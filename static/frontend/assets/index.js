var ED=Object.defineProperty;var PD=(t,e,n)=>e in t?ED(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ze=(t,e,n)=>PD(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function dy(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const ji={},fp=[],qu=()=>{},MD=()=>!1,Pm=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),o_=t=>t.startsWith("onUpdate:"),Ls=Object.assign,a_=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},kD=Object.prototype.hasOwnProperty,ns=(t,e)=>kD.call(t,e),lr=Array.isArray,pp=t=>Rp(t)==="[object Map]",Sf=t=>Rp(t)==="[object Set]",Mx=t=>Rp(t)==="[object Date]",AD=t=>Rp(t)==="[object RegExp]",Or=t=>typeof t=="function",Ds=t=>typeof t=="string",xc=t=>typeof t=="symbol",gs=t=>t!==null&&typeof t=="object",l_=t=>(gs(t)||Or(t))&&Or(t.then)&&Or(t.catch),PL=Object.prototype.toString,Rp=t=>PL.call(t),TD=t=>Rp(t).slice(8,-1),fy=t=>Rp(t)==="[object Object]",u_=t=>Ds(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,gp=dy(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),py=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},DD=/-(\w)/g,Ua=py(t=>t.replace(DD,(e,n)=>n?n.toUpperCase():"")),OD=/\B([A-Z])/g,Jl=py(t=>t.replace(OD,"-$1").toLowerCase()),Mm=py(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ng=py(t=>t?`on${Mm(t)}`:""),Tl=(t,e)=>!Object.is(t,e),mp=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},ML=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Sv=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Cv=t=>{const e=Ds(t)?Number(t):NaN;return isNaN(e)?t:e};let kx;const gy=()=>kx||(kx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),ND="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",ID=dy(ND);function tu(t){if(lr(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Ds(r)?jD(r):tu(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Ds(t)||gs(t))return t}const BD=/;(?![^(]*\))/g,RD=/:([^]+)/,FD=/\/\*[^]*?\*\//g;function jD(t){const e={};return t.replace(FD,"").split(BD).forEach(n=>{if(n){const r=n.split(RD);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ti(t){let e="";if(Ds(t))e=t;else if(lr(t))for(let n=0;n<t.length;n++){const r=Ti(t[n]);r&&(e+=r+" ")}else if(gs(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function zD(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Ds(e)&&(t.class=Ti(e)),n&&(t.style=tu(n)),t}const $D="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",VD=dy($D);function kL(t){return!!t||t===""}function UD(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=wd(t[r],e[r]);return n}function wd(t,e){if(t===e)return!0;let n=Mx(t),r=Mx(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=xc(t),r=xc(e),n||r)return t===e;if(n=lr(t),r=lr(e),n||r)return n&&r?UD(t,e):!1;if(n=gs(t),r=gs(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!wd(t[o],e[o]))return!1}}return String(t)===String(e)}function my(t,e){return t.findIndex(n=>wd(n,e))}const AL=t=>!!(t&&t.__v_isRef===!0),Ot=t=>Ds(t)?t:t==null?"":lr(t)||gs(t)&&(t.toString===PL||!Or(t.toString))?AL(t)?Ot(t.value):JSON.stringify(t,TL,2):String(t),TL=(t,e)=>AL(e)?TL(t,e.value):pp(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[M1(r,s)+" =>"]=i,n),{})}:Sf(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>M1(n))}:xc(e)?M1(e):gs(e)&&!lr(e)&&!fy(e)?String(e):e,M1=(t,e="")=>{var n;return xc(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Al;class c_{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Al,!e&&Al&&(this.index=(Al.scopes||(Al.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Al;try{return Al=this,e()}finally{Al=n}}}on(){Al=this}off(){Al=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function h_(t){return new c_(t)}function d_(){return Al}function DL(t,e=!1){Al&&Al.cleanups.push(t)}let As;const k1=new WeakSet;class im{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Al&&Al.active&&Al.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,k1.has(this)&&(k1.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||NL(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ax(this),IL(this);const e=As,n=_c;As=this,_c=!0;try{return this.fn()}finally{BL(this),As=e,_c=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)g_(e);this.deps=this.depsTail=void 0,Ax(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?k1.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){N2(this)&&this.run()}get dirty(){return N2(this)}}let OL=0,Ig,Bg;function NL(t,e=!1){if(t.flags|=8,e){t.next=Bg,Bg=t;return}t.next=Ig,Ig=t}function f_(){OL++}function p_(){if(--OL>0)return;if(Bg){let e=Bg;for(Bg=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Ig;){let e=Ig;for(Ig=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function IL(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function BL(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),g_(r),HD(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function N2(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(RL(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function RL(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===sm))return;t.globalVersion=sm;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!N2(t)){t.flags&=-3;return}const n=As,r=_c;As=t,_c=!0;try{IL(t);const i=t.fn(t._value);(e.version===0||Tl(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{As=n,_c=r,BL(t),t.flags&=-3}}function g_(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)g_(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function HD(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}function WD(t,e){t.effect instanceof im&&(t=t.effect.fn);const n=new im(t);e&&Ls(n,e);try{n.run()}catch(i){throw n.stop(),i}const r=n.run.bind(n);return r.effect=n,r}function GD(t){t.effect.stop()}let _c=!0;const FL=[];function kd(){FL.push(_c),_c=!1}function Ad(){const t=FL.pop();_c=t===void 0?!0:t}function Ax(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=As;As=void 0;try{e()}finally{As=n}}}let sm=0;class qD{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class vy{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!As||!_c||As===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==As)n=this.activeLink=new qD(As,this),As.deps?(n.prevDep=As.depsTail,As.depsTail.nextDep=n,As.depsTail=n):As.deps=As.depsTail=n,jL(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=As.depsTail,n.nextDep=void 0,As.depsTail.nextDep=n,As.depsTail=n,As.deps===n&&(As.deps=r)}return n}trigger(e){this.version++,sm++,this.notify(e)}notify(e){f_();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{p_()}}}function jL(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)jL(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Ev=new WeakMap,cf=Symbol(""),I2=Symbol(""),om=Symbol("");function ll(t,e,n){if(_c&&As){let r=Ev.get(t);r||Ev.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new vy),i.map=r,i.key=n),i.track()}}function Ch(t,e,n,r,i,s){const o=Ev.get(t);if(!o){sm++;return}const a=l=>{l&&l.trigger()};if(f_(),e==="clear")o.forEach(a);else{const l=lr(t),c=l&&u_(n);if(l&&n==="length"){const d=Number(r);o.forEach((p,v)=>{(v==="length"||v===om||!xc(v)&&v>=d)&&a(p)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(om)),e){case"add":l?c&&a(o.get("length")):(a(o.get(cf)),pp(t)&&a(o.get(I2)));break;case"delete":l||(a(o.get(cf)),pp(t)&&a(o.get(I2)));break;case"set":pp(t)&&a(o.get(cf));break}}p_()}function YD(t,e){const n=Ev.get(t);return n&&n.get(e)}function Gf(t){const e=Fi(t);return e===t?e:(ll(e,"iterate",om),Cu(t)?e:e.map(ul))}function yy(t){return ll(t=Fi(t),"iterate",om),t}const KD={__proto__:null,[Symbol.iterator](){return A1(this,Symbol.iterator,ul)},concat(...t){return Gf(this).concat(...t.map(e=>lr(e)?Gf(e):e))},entries(){return A1(this,"entries",t=>(t[1]=ul(t[1]),t))},every(t,e){return mh(this,"every",t,e,void 0,arguments)},filter(t,e){return mh(this,"filter",t,e,n=>n.map(ul),arguments)},find(t,e){return mh(this,"find",t,e,ul,arguments)},findIndex(t,e){return mh(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return mh(this,"findLast",t,e,ul,arguments)},findLastIndex(t,e){return mh(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return mh(this,"forEach",t,e,void 0,arguments)},includes(...t){return T1(this,"includes",t)},indexOf(...t){return T1(this,"indexOf",t)},join(t){return Gf(this).join(t)},lastIndexOf(...t){return T1(this,"lastIndexOf",t)},map(t,e){return mh(this,"map",t,e,void 0,arguments)},pop(){return Xp(this,"pop")},push(...t){return Xp(this,"push",t)},reduce(t,...e){return Tx(this,"reduce",t,e)},reduceRight(t,...e){return Tx(this,"reduceRight",t,e)},shift(){return Xp(this,"shift")},some(t,e){return mh(this,"some",t,e,void 0,arguments)},splice(...t){return Xp(this,"splice",t)},toReversed(){return Gf(this).toReversed()},toSorted(t){return Gf(this).toSorted(t)},toSpliced(...t){return Gf(this).toSpliced(...t)},unshift(...t){return Xp(this,"unshift",t)},values(){return A1(this,"values",ul)}};function A1(t,e,n){const r=yy(t),i=r[e]();return r!==t&&!Cu(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const ZD=Array.prototype;function mh(t,e,n,r,i,s){const o=yy(t),a=o!==t&&!Cu(t),l=o[e];if(l!==ZD[e]){const p=l.apply(t,s);return a?ul(p):p}let c=n;o!==t&&(a?c=function(p,v){return n.call(this,ul(p),v,t)}:n.length>2&&(c=function(p,v){return n.call(this,p,v,t)}));const d=l.call(o,c,r);return a&&i?i(d):d}function Tx(t,e,n,r){const i=yy(t);let s=n;return i!==t&&(Cu(t)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,t)}):s=function(o,a,l){return n.call(this,o,ul(a),l,t)}),i[e](s,...r)}function T1(t,e,n){const r=Fi(t);ll(r,"iterate",om);const i=r[e](...n);return(i===-1||i===!1)&&wy(n[0])?(n[0]=Fi(n[0]),r[e](...n)):i}function Xp(t,e,n=[]){kd(),f_();const r=Fi(t)[e].apply(t,n);return p_(),Ad(),r}const XD=dy("__proto__,__v_isRef,__isVue"),zL=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(xc));function JD(t){xc(t)||(t=String(t));const e=Fi(this);return ll(e,"has",t),e.hasOwnProperty(t)}class $L{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?qL:GL:s?WL:HL).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=lr(e);if(!i){let l;if(o&&(l=KD[n]))return l;if(n==="hasOwnProperty")return JD}const a=Reflect.get(e,n,po(e)?e:r);return(xc(n)?zL.has(n):XD(n))||(i||ll(e,"get",n),s)?a:po(a)?o&&u_(n)?a:a.value:gs(a)?i?pc(a):iu(a):a}}class VL extends $L{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=xd(s);if(!Cu(r)&&!xd(r)&&(s=Fi(s),r=Fi(r)),!lr(e)&&po(s)&&!po(r))return l?!1:(s.value=r,!0)}const o=lr(e)&&u_(n)?Number(n)<e.length:ns(e,n),a=Reflect.set(e,n,r,po(e)?e:i);return e===Fi(i)&&(o?Tl(r,s)&&Ch(e,"set",n,r):Ch(e,"add",n,r)),a}deleteProperty(e,n){const r=ns(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Ch(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!xc(n)||!zL.has(n))&&ll(e,"has",n),r}ownKeys(e){return ll(e,"iterate",lr(e)?"length":cf),Reflect.ownKeys(e)}}class UL extends $L{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const QD=new VL,e8=new UL,t8=new VL(!0),n8=new UL(!0),B2=t=>t,u0=t=>Reflect.getPrototypeOf(t);function r8(t,e,n){return function(...r){const i=this.__v_raw,s=Fi(i),o=pp(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),d=n?B2:e?R2:ul;return!e&&ll(s,"iterate",l?I2:cf),{next(){const{value:p,done:v}=c.next();return v?{value:p,done:v}:{value:a?[d(p[0]),d(p[1])]:d(p),done:v}},[Symbol.iterator](){return this}}}}function c0(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function i8(t,e){const n={get(i){const s=this.__v_raw,o=Fi(s),a=Fi(i);t||(Tl(i,a)&&ll(o,"get",i),ll(o,"get",a));const{has:l}=u0(o),c=e?B2:t?R2:ul;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&ll(Fi(i),"iterate",cf),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=Fi(s),a=Fi(i);return t||(Tl(i,a)&&ll(o,"has",i),ll(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=Fi(a),c=e?B2:t?R2:ul;return!t&&ll(l,"iterate",cf),a.forEach((d,p)=>i.call(s,c(d),c(p),o))}};return Ls(n,t?{add:c0("add"),set:c0("set"),delete:c0("delete"),clear:c0("clear")}:{add(i){!e&&!Cu(i)&&!xd(i)&&(i=Fi(i));const s=Fi(this);return u0(s).has.call(s,i)||(s.add(i),Ch(s,"add",i,i)),this},set(i,s){!e&&!Cu(s)&&!xd(s)&&(s=Fi(s));const o=Fi(this),{has:a,get:l}=u0(o);let c=a.call(o,i);c||(i=Fi(i),c=a.call(o,i));const d=l.call(o,i);return o.set(i,s),c?Tl(s,d)&&Ch(o,"set",i,s):Ch(o,"add",i,s),this},delete(i){const s=Fi(this),{has:o,get:a}=u0(s);let l=o.call(s,i);l||(i=Fi(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&Ch(s,"delete",i,void 0),c},clear(){const i=Fi(this),s=i.size!==0,o=i.clear();return s&&Ch(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=r8(i,t,e)}),n}function by(t,e){const n=i8(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(ns(n,i)&&i in r?n:r,i,s)}const s8={get:by(!1,!1)},o8={get:by(!1,!0)},a8={get:by(!0,!1)},l8={get:by(!0,!0)},HL=new WeakMap,WL=new WeakMap,GL=new WeakMap,qL=new WeakMap;function u8(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function c8(t){return t.__v_skip||!Object.isExtensible(t)?0:u8(TD(t))}function iu(t){return xd(t)?t:_y(t,!1,QD,s8,HL)}function m_(t){return _y(t,!1,t8,o8,WL)}function pc(t){return _y(t,!0,e8,a8,GL)}function h8(t){return _y(t,!0,n8,l8,qL)}function _y(t,e,n,r,i){if(!gs(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=c8(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Zc(t){return xd(t)?Zc(t.__v_raw):!!(t&&t.__v_isReactive)}function xd(t){return!!(t&&t.__v_isReadonly)}function Cu(t){return!!(t&&t.__v_isShallow)}function wy(t){return t?!!t.__v_raw:!1}function Fi(t){const e=t&&t.__v_raw;return e?Fi(e):t}function xy(t){return!ns(t,"__v_skip")&&Object.isExtensible(t)&&ML(t,"__v_skip",!0),t}const ul=t=>gs(t)?iu(t):t,R2=t=>gs(t)?pc(t):t;function po(t){return t?t.__v_isRef===!0:!1}function Ct(t){return YL(t,!1)}function v_(t){return YL(t,!0)}function YL(t,e){return po(t)?t:new d8(t,e)}class d8{constructor(e,n){this.dep=new vy,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Fi(e),this._value=n?e:ul(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Cu(e)||xd(e);e=r?e:Fi(e),Tl(e,n)&&(this._rawValue=e,this._value=r?e:ul(e),this.dep.trigger())}}function f8(t){t.dep&&t.dep.trigger()}function er(t){return po(t)?t.value:t}function p8(t){return Or(t)?t():er(t)}const g8={get:(t,e,n)=>e==="__v_raw"?t:er(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return po(i)&&!po(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function y_(t){return Zc(t)?t:new Proxy(t,g8)}class m8{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new vy,{get:r,set:i}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function KL(t){return new m8(t)}function ZL(t){const e=lr(t)?new Array(t.length):{};for(const n in t)e[n]=XL(t,n);return e}class v8{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return YD(Fi(this._object),this._key)}}class y8{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function b8(t,e,n){return po(t)?t:Or(t)?new y8(t):gs(t)&&arguments.length>1?XL(t,e,n):Ct(t)}function XL(t,e,n){const r=t[e];return po(r)?r:new v8(t,e,n)}class _8{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new vy(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=sm-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&As!==this)return NL(this,!0),!0}get value(){const e=this.dep.track();return RL(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function w8(t,e,n=!1){let r,i;return Or(t)?r=t:(r=t.get,i=t.set),new _8(r,i,n)}const x8={GET:"get",HAS:"has",ITERATE:"iterate"},L8={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},h0={},Pv=new WeakMap;let rd;function S8(){return rd}function JL(t,e=!1,n=rd){if(n){let r=Pv.get(n);r||Pv.set(n,r=[]),r.push(t)}}function C8(t,e,n=ji){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,c=Y=>i?Y:Cu(Y)||i===!1||i===0?Eh(Y,1):Eh(Y);let d,p,v,m,x=!1,E=!1;if(po(t)?(p=()=>t.value,x=Cu(t)):Zc(t)?(p=()=>c(t),x=!0):lr(t)?(E=!0,x=t.some(Y=>Zc(Y)||Cu(Y)),p=()=>t.map(Y=>{if(po(Y))return Y.value;if(Zc(Y))return c(Y);if(Or(Y))return l?l(Y,2):Y()})):Or(t)?e?p=l?()=>l(t,2):t:p=()=>{if(v){kd();try{v()}finally{Ad()}}const Y=rd;rd=d;try{return l?l(t,3,[m]):t(m)}finally{rd=Y}}:p=qu,e&&i){const Y=p,te=i===!0?1/0:i;p=()=>Eh(Y(),te)}const k=d_(),A=()=>{d.stop(),k&&k.active&&a_(k.effects,d)};if(s&&e){const Y=e;e=(...te)=>{Y(...te),A()}}let D=E?new Array(t.length).fill(h0):h0;const V=Y=>{if(!(!(d.flags&1)||!d.dirty&&!Y))if(e){const te=d.run();if(i||x||(E?te.some((ge,fe)=>Tl(ge,D[fe])):Tl(te,D))){v&&v();const ge=rd;rd=d;try{const fe=[te,D===h0?void 0:E&&D[0]===h0?[]:D,m];l?l(e,3,fe):e(...fe),D=te}finally{rd=ge}}}else d.run()};return a&&a(V),d=new im(p),d.scheduler=o?()=>o(V,!1):V,m=Y=>JL(Y,!1,d),v=d.onStop=()=>{const Y=Pv.get(d);if(Y){if(l)l(Y,4);else for(const te of Y)te();Pv.delete(d)}},e?r?V(!0):D=d.run():o?o(V.bind(null,!0),!0):d.run(),A.pause=d.pause.bind(d),A.resume=d.resume.bind(d),A.stop=A,A}function Eh(t,e=1/0,n){if(e<=0||!gs(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,po(t))Eh(t.value,e,n);else if(lr(t))for(let r=0;r<t.length;r++)Eh(t[r],e,n);else if(Sf(t)||pp(t))t.forEach(r=>{Eh(r,e,n)});else if(fy(t)){for(const r in t)Eh(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Eh(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const QL=[];function E8(t){QL.push(t)}function P8(){QL.pop()}function M8(t,e){}const k8={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},A8={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Fp(t,e,n,r){try{return r?t(...r):t()}catch(i){Cf(i,e,n)}}function Ku(t,e,n,r){if(Or(t)){const i=Fp(t,e,n,r);return i&&l_(i)&&i.catch(s=>{Cf(s,e,n)}),i}if(lr(t)){const i=[];for(let s=0;s<t.length;s++)i.push(Ku(t[s],e,n,r));return i}}function Cf(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ji;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const d=a.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](t,l,c)===!1)return}a=a.parent}if(s){kd(),Fp(s,null,10,[t,l,c]),Ad();return}}T8(t,n,i,r,o)}function T8(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const Dl=[];let $c=-1;const vp=[];let id=null,rp=0;const eS=Promise.resolve();let Mv=null;function ca(t){const e=Mv||eS;return t?e.then(this?t.bind(this):t):e}function D8(t){let e=$c+1,n=Dl.length;for(;e<n;){const r=e+n>>>1,i=Dl[r],s=lm(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function b_(t){if(!(t.flags&1)){const e=lm(t),n=Dl[Dl.length-1];!n||!(t.flags&2)&&e>=lm(n)?Dl.push(t):Dl.splice(D8(e),0,t),t.flags|=1,tS()}}function tS(){Mv||(Mv=eS.then(nS))}function am(t){lr(t)?vp.push(...t):id&&t.id===-1?id.splice(rp+1,0,t):t.flags&1||(vp.push(t),t.flags|=1),tS()}function Dx(t,e,n=$c+1){for(;n<Dl.length;n++){const r=Dl[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Dl.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function kv(t){if(vp.length){const e=[...new Set(vp)].sort((n,r)=>lm(n)-lm(r));if(vp.length=0,id){id.push(...e);return}for(id=e,rp=0;rp<id.length;rp++){const n=id[rp];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}id=null,rp=0}}const lm=t=>t.id==null?t.flags&2?-1:1/0:t.id;function nS(t){try{for($c=0;$c<Dl.length;$c++){const e=Dl[$c];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Fp(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;$c<Dl.length;$c++){const e=Dl[$c];e&&(e.flags&=-2)}$c=-1,Dl.length=0,kv(),Mv=null,(Dl.length||vp.length)&&nS()}}let ip,d0=[];function rS(t,e){var n,r;ip=t,ip?(ip.enabled=!0,d0.forEach(({event:i,args:s})=>ip.emit(i,...s)),d0=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{rS(s,e)}),setTimeout(()=>{ip||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,d0=[])},3e3)):d0=[]}let da=null,Ly=null;function um(t){const e=da;return da=t,Ly=t&&t.type.__scopeId||null,e}function O8(t){Ly=t}function N8(){Ly=null}const I8=t=>Gu;function Gu(t,e=da,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&G2(-1);const s=um(e);let o;try{o=t(...i)}finally{um(s),r._d&&G2(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function On(t,e){if(da===null)return t;const n=Tm(da),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=ji]=e[i];s&&(Or(s)&&(s={mounted:s,updated:s}),s.deep&&Eh(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Uc(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(kd(),Ku(l,n,8,[t.el,a,t,e]),Ad())}}const iS=Symbol("_vte"),sS=t=>t.__isTeleport,Rg=t=>t&&(t.disabled||t.disabled===""),Ox=t=>t&&(t.defer||t.defer===""),Nx=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Ix=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,F2=(t,e)=>{const n=t&&t.to;return Ds(n)?e?e(n):null:n},oS={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:d,pc:p,pbc:v,o:{insert:m,querySelector:x,createText:E,createComment:k}}=c,A=Rg(e.props);let{shapeFlag:D,children:V,dynamicChildren:Y}=e;if(t==null){const te=e.el=E(""),ge=e.anchor=E("");m(te,n,r),m(ge,n,r);const fe=(F,K)=>{D&16&&(i&&i.isCE&&(i.ce._teleportTarget=F),d(V,F,K,i,s,o,a,l))},I=()=>{const F=e.target=F2(e.props,x),K=aS(F,e,E,m);F&&(o!=="svg"&&Nx(F)?o="svg":o!=="mathml"&&Ix(F)&&(o="mathml"),A||(fe(F,K),K0(e,!1)))};A&&(fe(n,ge),K0(e,!0)),Ox(e.props)?ua(()=>{I(),e.el.__isMounted=!0},s):I()}else{if(Ox(e.props)&&!t.el.__isMounted){ua(()=>{oS.process(t,e,n,r,i,s,o,a,l,c),delete t.el.__isMounted},s);return}e.el=t.el,e.targetStart=t.targetStart;const te=e.anchor=t.anchor,ge=e.target=t.target,fe=e.targetAnchor=t.targetAnchor,I=Rg(t.props),F=I?n:ge,K=I?te:fe;if(o==="svg"||Nx(ge)?o="svg":(o==="mathml"||Ix(ge))&&(o="mathml"),Y?(v(t.dynamicChildren,Y,F,i,s,o,a),k_(t,e,!0)):l||p(t,e,F,K,i,s,o,a,!1),A)I?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):f0(e,n,te,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const B=e.target=F2(e.props,x);B&&f0(e,B,null,c,0)}else I&&f0(e,ge,fe,c,1);K0(e,A)}},remove(t,e,n,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:d,target:p,props:v}=t;if(p&&(i(c),i(d)),s&&i(l),o&16){const m=s||!Rg(v);for(let x=0;x<a.length;x++){const E=a[x];r(E,e,n,m,!!E.dynamicChildren)}}},move:f0,hydrate:B8};function f0(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:d}=t,p=s===2;if(p&&r(o,e,n),(!p||Rg(d))&&l&16)for(let v=0;v<c.length;v++)i(c[v],e,n,2);p&&r(a,e,n)}function B8(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:d}},p){const v=e.target=F2(e.props,l);if(v){const m=Rg(e.props),x=v._lpa||v.firstChild;if(e.shapeFlag&16)if(m)e.anchor=p(o(t),e,a(t),n,r,i,s),e.targetStart=x,e.targetAnchor=x&&o(x);else{e.anchor=o(t);let E=x;for(;E;){if(E&&E.nodeType===8){if(E.data==="teleport start anchor")e.targetStart=E;else if(E.data==="teleport anchor"){e.targetAnchor=E,v._lpa=e.targetAnchor&&o(e.targetAnchor);break}}E=o(E)}e.targetAnchor||aS(v,e,d,c),p(x&&o(x),e,v,n,r,i,s)}K0(e,m)}return e.anchor&&o(e.anchor)}const j2=oS;function K0(t,e){const n=t.ctx;if(n&&n.ut){let r,i;for(e?(r=t.el,i=t.anchor):(r=t.targetStart,i=t.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function aS(t,e,n,r){const i=e.targetStart=n(""),s=e.targetAnchor=n("");return i[iS]=s,t&&(r(i,t),r(s,t)),s}const sd=Symbol("_leaveCb"),p0=Symbol("_enterCb");function __(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return go(()=>{t.isMounted=!0}),Td(()=>{t.isUnmounting=!0}),t}const Fu=[Function,Array],w_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Fu,onEnter:Fu,onAfterEnter:Fu,onEnterCancelled:Fu,onBeforeLeave:Fu,onLeave:Fu,onAfterLeave:Fu,onLeaveCancelled:Fu,onBeforeAppear:Fu,onAppear:Fu,onAfterAppear:Fu,onAppearCancelled:Fu},lS=t=>{const e=t.subTree;return e.component?lS(e.component):e},R8={name:"BaseTransition",props:w_,setup(t,{slots:e}){const n=Ju(),r=__();return()=>{const i=e.default&&Sy(e.default(),!0);if(!i||!i.length)return;const s=uS(i),o=Fi(t),{mode:a}=o;if(r.isLeaving)return D1(s);const l=Bx(s);if(!l)return D1(s);let c=Sp(l,o,r,n,p=>c=p);l.type!==ra&&Nh(l,c);let d=n.subTree&&Bx(n.subTree);if(d&&d.type!==ra&&!vc(l,d)&&lS(n).type!==ra){let p=Sp(d,o,r,n);if(Nh(d,p),a==="out-in"&&l.type!==ra)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,d=void 0},D1(s);a==="in-out"&&l.type!==ra?p.delayLeave=(v,m,x)=>{const E=hS(r,d);E[String(d.key)]=d,v[sd]=()=>{m(),v[sd]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{x(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return s}}};function uS(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==ra){e=n;break}}return e}const cS=R8;function hS(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Sp(t,e,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:v,onLeave:m,onAfterLeave:x,onLeaveCancelled:E,onBeforeAppear:k,onAppear:A,onAfterAppear:D,onAppearCancelled:V}=e,Y=String(t.key),te=hS(n,t),ge=(F,K)=>{F&&Ku(F,r,9,K)},fe=(F,K)=>{const B=K[1];ge(F,K),lr(F)?F.every(N=>N.length<=1)&&B():F.length<=1&&B()},I={mode:o,persisted:a,beforeEnter(F){let K=l;if(!n.isMounted)if(s)K=k||l;else return;F[sd]&&F[sd](!0);const B=te[Y];B&&vc(t,B)&&B.el[sd]&&B.el[sd](),ge(K,[F])},enter(F){let K=c,B=d,N=p;if(!n.isMounted)if(s)K=A||c,B=D||d,N=V||p;else return;let j=!1;const z=F[p0]=U=>{j||(j=!0,U?ge(N,[F]):ge(B,[F]),I.delayedLeave&&I.delayedLeave(),F[p0]=void 0)};K?fe(K,[F,z]):z()},leave(F,K){const B=String(t.key);if(F[p0]&&F[p0](!0),n.isUnmounting)return K();ge(v,[F]);let N=!1;const j=F[sd]=z=>{N||(N=!0,K(),z?ge(E,[F]):ge(x,[F]),F[sd]=void 0,te[B]===t&&delete te[B])};te[B]=t,m?fe(m,[F,j]):j()},clone(F){const K=Sp(F,e,n,r,i);return i&&i(K),K}};return I}function D1(t){if(km(t))return t=eh(t),t.children=null,t}function Bx(t){if(!km(t))return sS(t.type)&&t.children?uS(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Or(n.default))return n.default()}}function Nh(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Nh(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Sy(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===Mn?(o.patchFlag&128&&i++,r=r.concat(Sy(o.children,e,a))):(e||o.type!==ra)&&r.push(a!=null?eh(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function js(t,e){return Or(t)?Ls({name:t.name},e,{setup:t}):t}function F8(){const t=Ju();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function x_(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function j8(t){const e=Ju(),n=v_(null);if(e){const i=e.refs===ji?e.refs={}:e.refs;Object.defineProperty(i,t,{enumerable:!0,get:()=>n.value,set:s=>n.value=s})}return n}function cm(t,e,n,r,i=!1){if(lr(t)){t.forEach((x,E)=>cm(x,e&&(lr(e)?e[E]:e),n,r,i));return}if(vd(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&cm(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?Tm(r.component):r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,d=a.refs===ji?a.refs={}:a.refs,p=a.setupState,v=Fi(p),m=p===ji?()=>!1:x=>ns(v,x);if(c!=null&&c!==l&&(Ds(c)?(d[c]=null,m(c)&&(p[c]=null)):po(c)&&(c.value=null)),Or(l))Fp(l,a,12,[o,d]);else{const x=Ds(l),E=po(l);if(x||E){const k=()=>{if(t.f){const A=x?m(l)?p[l]:d[l]:l.value;i?lr(A)&&a_(A,s):lr(A)?A.includes(s)||A.push(s):x?(d[l]=[s],m(l)&&(p[l]=d[l])):(l.value=[s],t.k&&(d[t.k]=l.value))}else x?(d[l]=o,m(l)&&(p[l]=o)):E&&(l.value=o,t.k&&(d[t.k]=o))};o?(k.id=-1,ua(k,n)):k()}}}let Rx=!1;const qf=()=>{Rx||(console.error("Hydration completed but contains mismatches."),Rx=!0)},z8=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",$8=t=>t.namespaceURI.includes("MathML"),g0=t=>{if(t.nodeType===1){if(z8(t))return"svg";if($8(t))return"mathml"}},cp=t=>t.nodeType===8;function V8(t){const{mt:e,p:n,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:a,insert:l,createComment:c}}=t,d=(V,Y)=>{if(!Y.hasChildNodes()){n(null,V,Y),kv(),Y._vnode=V;return}p(Y.firstChild,V,null,null,null),kv(),Y._vnode=V},p=(V,Y,te,ge,fe,I=!1)=>{I=I||!!Y.dynamicChildren;const F=cp(V)&&V.data==="[",K=()=>E(V,Y,te,ge,fe,F),{type:B,ref:N,shapeFlag:j,patchFlag:z}=Y;let U=V.nodeType;Y.el=V,z===-2&&(I=!1,Y.dynamicChildren=null);let $=null;switch(B){case yd:U!==3?Y.children===""?(l(Y.el=i(""),o(V),V),$=V):$=K():(V.data!==Y.children&&(qf(),V.data=Y.children),$=s(V));break;case ra:D(V)?($=s(V),A(Y.el=V.content.firstChild,V,te)):U!==8||F?$=K():$=s(V);break;case df:if(F&&(V=s(V),U=V.nodeType),U===1||U===3){$=V;const re=!Y.children.length;for(let Q=0;Q<Y.staticCount;Q++)re&&(Y.children+=$.nodeType===1?$.outerHTML:$.data),Q===Y.staticCount-1&&(Y.anchor=$),$=s($);return F?s($):$}else K();break;case Mn:F?$=x(V,Y,te,ge,fe,I):$=K();break;default:if(j&1)(U!==1||Y.type.toLowerCase()!==V.tagName.toLowerCase())&&!D(V)?$=K():$=v(V,Y,te,ge,fe,I);else if(j&6){Y.slotScopeIds=fe;const re=o(V);if(F?$=k(V):cp(V)&&V.data==="teleport start"?$=k(V,V.data,"teleport end"):$=s(V),e(Y,re,null,te,ge,g0(re),I),vd(Y)&&!Y.type.__asyncResolved){let Q;F?(Q=yi(Mn),Q.anchor=$?$.previousSibling:re.lastChild):Q=V.nodeType===3?ui(""):yi("div"),Q.el=V,Y.component.subTree=Q}}else j&64?U!==8?$=K():$=Y.type.hydrate(V,Y,te,ge,fe,I,t,m):j&128&&($=Y.type.hydrate(V,Y,te,ge,g0(o(V)),fe,I,t,p))}return N!=null&&cm(N,null,ge,Y),$},v=(V,Y,te,ge,fe,I)=>{I=I||!!Y.dynamicChildren;const{type:F,props:K,patchFlag:B,shapeFlag:N,dirs:j,transition:z}=Y,U=F==="input"||F==="option";if(U||B!==-1){j&&Uc(Y,null,te,"created");let $=!1;if(D(V)){$=FS(null,z)&&te&&te.vnode.props&&te.vnode.props.appear;const Q=V.content.firstChild;$&&z.beforeEnter(Q),A(Q,V,te),Y.el=V=Q}if(N&16&&!(K&&(K.innerHTML||K.textContent))){let Q=m(V.firstChild,Y,V,te,ge,fe,I);for(;Q;){m0(V,1)||qf();const _e=Q;Q=Q.nextSibling,a(_e)}}else if(N&8){let Q=Y.children;Q[0]===`
`&&(V.tagName==="PRE"||V.tagName==="TEXTAREA")&&(Q=Q.slice(1)),V.textContent!==Q&&(m0(V,0)||qf(),V.textContent=Y.children)}if(K){if(U||!I||B&48){const Q=V.tagName.includes("-");for(const _e in K)(U&&(_e.endsWith("value")||_e==="indeterminate")||Pm(_e)&&!gp(_e)||_e[0]==="."||Q)&&r(V,_e,null,K[_e],void 0,te)}else if(K.onClick)r(V,"onClick",null,K.onClick,void 0,te);else if(B&4&&Zc(K.style))for(const Q in K.style)K.style[Q]}let re;(re=K&&K.onVnodeBeforeMount)&&Zl(re,te,Y),j&&Uc(Y,null,te,"beforeMount"),((re=K&&K.onVnodeMounted)||j||$)&&qS(()=>{re&&Zl(re,te,Y),$&&z.enter(V),j&&Uc(Y,null,te,"mounted")},ge)}return V.nextSibling},m=(V,Y,te,ge,fe,I,F)=>{F=F||!!Y.dynamicChildren;const K=Y.children,B=K.length;for(let N=0;N<B;N++){const j=F?K[N]:K[N]=Xl(K[N]),z=j.type===yd;V?(z&&!F&&N+1<B&&Xl(K[N+1]).type===yd&&(l(i(V.data.slice(j.children.length)),te,s(V)),V.data=j.children),V=p(V,j,ge,fe,I,F)):z&&!j.children?l(j.el=i(""),te):(m0(te,1)||qf(),n(null,j,te,null,ge,fe,g0(te),I))}return V},x=(V,Y,te,ge,fe,I)=>{const{slotScopeIds:F}=Y;F&&(fe=fe?fe.concat(F):F);const K=o(V),B=m(s(V),Y,K,te,ge,fe,I);return B&&cp(B)&&B.data==="]"?s(Y.anchor=B):(qf(),l(Y.anchor=c("]"),K,B),B)},E=(V,Y,te,ge,fe,I)=>{if(m0(V.parentElement,1)||qf(),Y.el=null,I){const B=k(V);for(;;){const N=s(V);if(N&&N!==B)a(N);else break}}const F=s(V),K=o(V);return a(V),n(null,Y,K,F,te,ge,g0(K),fe),te&&(te.vnode.el=Y.el,My(te,Y.el)),F},k=(V,Y="[",te="]")=>{let ge=0;for(;V;)if(V=s(V),V&&cp(V)&&(V.data===Y&&ge++,V.data===te)){if(ge===0)return s(V);ge--}return V},A=(V,Y,te)=>{const ge=Y.parentNode;ge&&ge.replaceChild(V,Y);let fe=te;for(;fe;)fe.vnode.el===Y&&(fe.vnode.el=fe.subTree.el=V),fe=fe.parent},D=V=>V.nodeType===1&&V.tagName==="TEMPLATE";return[d,p]}const Fx="data-allow-mismatch",U8={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function m0(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Fx);)t=t.parentElement;const n=t&&t.getAttribute(Fx);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:n.split(",").includes(U8[e])}}const H8=gy().requestIdleCallback||(t=>setTimeout(t,1)),W8=gy().cancelIdleCallback||(t=>clearTimeout(t)),G8=(t=1e4)=>e=>{const n=H8(e,{timeout:t});return()=>W8(n)};function q8(t){const{top:e,left:n,bottom:r,right:i}=t.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(e>0&&e<s||r>0&&r<s)&&(n>0&&n<o||i>0&&i<o)}const Y8=t=>(e,n)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),e();break}},t);return n(i=>{if(i instanceof Element){if(q8(i))return e(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},K8=t=>e=>{if(t){const n=matchMedia(t);if(n.matches)e();else return n.addEventListener("change",e,{once:!0}),()=>n.removeEventListener("change",e)}},Z8=(t=[])=>(e,n)=>{Ds(t)&&(t=[t]);let r=!1;const i=o=>{r||(r=!0,s(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{n(o=>{for(const a of t)o.removeEventListener(a,i)})};return n(o=>{for(const a of t)o.addEventListener(a,i,{once:!0})}),s};function X8(t,e){if(cp(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(cp(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const vd=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function J8(t){Or(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:a=!0,onError:l}=t;let c=null,d,p=0;const v=()=>(p++,c=null,m()),m=()=>{let x;return c||(x=c=e().catch(E=>{if(E=E instanceof Error?E:new Error(String(E)),l)return new Promise((k,A)=>{l(E,()=>k(v()),()=>A(E),p+1)});throw E}).then(E=>x!==c&&c?c:(E&&(E.__esModule||E[Symbol.toStringTag]==="Module")&&(E=E.default),d=E,E)))};return js({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(x,E,k){const A=s?()=>{const D=s(k,V=>X8(x,V));D&&(E.bum||(E.bum=[])).push(D)}:k;d?A():m().then(()=>!E.isUnmounted&&A())},get __asyncResolved(){return d},setup(){const x=ha;if(x_(x),d)return()=>O1(d,x);const E=V=>{c=null,Cf(V,x,13,!r)};if(a&&x.suspense||Cp)return m().then(V=>()=>O1(V,x)).catch(V=>(E(V),()=>r?yi(r,{error:V}):null));const k=Ct(!1),A=Ct(),D=Ct(!!i);return i&&setTimeout(()=>{D.value=!1},i),o!=null&&setTimeout(()=>{if(!k.value&&!A.value){const V=new Error(`Async component timed out after ${o}ms.`);E(V),A.value=V}},o),m().then(()=>{k.value=!0,x.parent&&km(x.parent.vnode)&&x.parent.update()}).catch(V=>{E(V),A.value=V}),()=>{if(k.value&&d)return O1(d,x);if(A.value&&r)return yi(r,{error:A.value});if(n&&!D.value)return yi(n)}}})}function O1(t,e){const{ref:n,props:r,children:i,ce:s}=e.vnode,o=yi(t,r,i);return o.ref=n,o.ce=s,delete e.vnode.ce,o}const km=t=>t.type.__isKeepAlive,Q8={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Ju(),r=n.ctx;if(!r.renderer)return()=>{const D=e.default&&e.default();return D&&D.length===1?D[0]:D};const i=new Map,s=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:c,um:d,o:{createElement:p}}}=r,v=p("div");r.activate=(D,V,Y,te,ge)=>{const fe=D.component;c(D,V,Y,0,a),l(fe.vnode,D,V,Y,fe,a,te,D.slotScopeIds,ge),ua(()=>{fe.isDeactivated=!1,fe.a&&mp(fe.a);const I=D.props&&D.props.onVnodeMounted;I&&Zl(I,fe.parent,D)},a)},r.deactivate=D=>{const V=D.component;Tv(V.m),Tv(V.a),c(D,v,null,1,a),ua(()=>{V.da&&mp(V.da);const Y=D.props&&D.props.onVnodeUnmounted;Y&&Zl(Y,V.parent,D),V.isDeactivated=!0},a)};function m(D){N1(D),d(D,n,a,!0)}function x(D){i.forEach((V,Y)=>{const te=X2(V.type);te&&!D(te)&&E(Y)})}function E(D){const V=i.get(D);V&&(!o||!vc(V,o))?m(V):o&&N1(o),i.delete(D),s.delete(D)}Di(()=>[t.include,t.exclude],([D,V])=>{D&&x(Y=>yg(D,Y)),V&&x(Y=>!yg(V,Y))},{flush:"post",deep:!0});let k=null;const A=()=>{k!=null&&(Dv(n.subTree.type)?ua(()=>{i.set(k,v0(n.subTree))},n.subTree.suspense):i.set(k,v0(n.subTree)))};return go(A),Ey(A),Td(()=>{i.forEach(D=>{const{subTree:V,suspense:Y}=n,te=v0(V);if(D.type===te.type&&D.key===te.key){N1(te);const ge=te.component.da;ge&&ua(ge,Y);return}m(D)})}),()=>{if(k=null,!e.default)return o=null;const D=e.default(),V=D[0];if(D.length>1)return o=null,D;if(!Ih(V)||!(V.shapeFlag&4)&&!(V.shapeFlag&128))return o=null,V;let Y=v0(V);if(Y.type===ra)return o=null,Y;const te=Y.type,ge=X2(vd(Y)?Y.type.__asyncResolved||{}:te),{include:fe,exclude:I,max:F}=t;if(fe&&(!ge||!yg(fe,ge))||I&&ge&&yg(I,ge))return Y.shapeFlag&=-257,o=Y,V;const K=Y.key==null?te:Y.key,B=i.get(K);return Y.el&&(Y=eh(Y),V.shapeFlag&128&&(V.ssContent=Y)),k=K,B?(Y.el=B.el,Y.component=B.component,Y.transition&&Nh(Y,Y.transition),Y.shapeFlag|=512,s.delete(K),s.add(K)):(s.add(K),F&&s.size>parseInt(F,10)&&E(s.values().next().value)),Y.shapeFlag|=256,o=Y,Dv(V.type)?V:Y}}},eO=Q8;function yg(t,e){return lr(t)?t.some(n=>yg(n,e)):Ds(t)?t.split(",").includes(e):AD(t)?(t.lastIndex=0,t.test(e)):!1}function dS(t,e){pS(t,"a",e)}function fS(t,e){pS(t,"da",e)}function pS(t,e,n=ha){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Cy(e,r,n),n){let i=n.parent;for(;i&&i.parent;)km(i.parent.vnode)&&tO(r,e,n,i),i=i.parent}}function tO(t,e,n,r){const i=Cy(e,t,r,!0);Zu(()=>{a_(r[e],i)},n)}function N1(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function v0(t){return t.shapeFlag&128?t.ssContent:t}function Cy(t,e,n=ha,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{kd();const a=bf(n),l=Ku(e,n,t,o);return a(),Ad(),l});return r?i.unshift(s):i.push(s),s}}const Fh=t=>(e,n=ha)=>{(!Cp||t==="sp")&&Cy(t,(...r)=>e(...r),n)},gS=Fh("bm"),go=Fh("m"),L_=Fh("bu"),Ey=Fh("u"),Td=Fh("bum"),Zu=Fh("um"),mS=Fh("sp"),vS=Fh("rtg"),yS=Fh("rtc");function bS(t,e=ha){Cy("ec",t,e)}const S_="components",nO="directives";function _S(t,e){return C_(S_,t,!0,e)||t}const wS=Symbol.for("v-ndc");function rO(t){return Ds(t)?C_(S_,t,!1)||t:t||wS}function iO(t){return C_(nO,t)}function C_(t,e,n=!0,r=!1){const i=da||ha;if(i){const s=i.type;if(t===S_){const a=X2(s,!1);if(a&&(a===e||a===Ua(e)||a===Mm(Ua(e))))return s}const o=jx(i[t]||s[t],e)||jx(i.appContext[t],e);return!o&&r?s:o}}function jx(t,e){return t&&(t[e]||t[Ua(e)]||t[Mm(Ua(e))])}function gr(t,e,n,r){let i;const s=n&&n[r],o=lr(t);if(o||Ds(t)){const a=o&&Zc(t);let l=!1;a&&(l=!Cu(t),t=yy(t)),i=new Array(t.length);for(let c=0,d=t.length;c<d;c++)i[c]=e(l?ul(t[c]):t[c],c,void 0,s&&s[c])}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s&&s[a])}else if(gs(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s&&s[l]));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const d=a[l];i[l]=e(t[d],d,l,s&&s[l])}}else i=[];return n&&(n[r]=i),i}function sO(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(lr(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return t}function oO(t,e,n={},r,i){if(da.ce||da.parent&&vd(da.parent)&&da.parent.ce)return e!=="default"&&(n.name=e),Ie(),Va(Mn,null,[yi("slot",n,r&&r())],64);let s=t[e];s&&s._c&&(s._d=!1),Ie();const o=s&&E_(s(n)),a=n.key||o&&o.key,l=Va(Mn,{key:(a&&!xc(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function E_(t){return t.some(e=>Ih(e)?!(e.type===ra||e.type===Mn&&!E_(e.children)):!0)?t:null}function aO(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:Ng(r)]=t[r];return n}const z2=t=>t?eC(t)?Tm(t):z2(t.parent):null,Fg=Ls(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>z2(t.parent),$root:t=>z2(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>P_(t),$forceUpdate:t=>t.f||(t.f=()=>{b_(t.update)}),$nextTick:t=>t.n||(t.n=ca.bind(t.proxy)),$watch:t=>RO.bind(t)}),I1=(t,e)=>t!==ji&&!t.__isScriptSetup&&ns(t,e),$2={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(I1(r,e))return o[e]=1,r[e];if(i!==ji&&ns(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&ns(c,e))return o[e]=3,s[e];if(n!==ji&&ns(n,e))return o[e]=4,n[e];V2&&(o[e]=0)}}const d=Fg[e];let p,v;if(d)return e==="$attrs"&&ll(t.attrs,"get",""),d(t);if((p=a.__cssModules)&&(p=p[e]))return p;if(n!==ji&&ns(n,e))return o[e]=4,n[e];if(v=l.config.globalProperties,ns(v,e))return v[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return I1(i,e)?(i[e]=n,!0):r!==ji&&ns(r,e)?(r[e]=n,!0):ns(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==ji&&ns(t,o)||I1(e,o)||(a=s[0])&&ns(a,o)||ns(r,o)||ns(Fg,o)||ns(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ns(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},lO=Ls({},$2,{get(t,e){if(e!==Symbol.unscopables)return $2.get(t,e,t)},has(t,e){return e[0]!=="_"&&!ID(e)}});function uO(){return null}function cO(){return null}function hO(t){}function dO(t){}function fO(){return null}function pO(){}function gO(t,e){return null}function mO(){return xS().slots}function vO(){return xS().attrs}function xS(){const t=Ju();return t.setupContext||(t.setupContext=rC(t))}function hm(t){return lr(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function yO(t,e){const n=hm(t);for(const r in e){if(r.startsWith("__skip"))continue;let i=n[r];i?lr(i)||Or(i)?i=n[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=n[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function bO(t,e){return!t||!e?t||e:lr(t)&&lr(e)?t.concat(e):Ls({},hm(t),hm(e))}function _O(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function wO(t){const e=Ju();let n=t();return Y2(),l_(n)&&(n=n.catch(r=>{throw bf(e),r})),[n,()=>bf(e)]}let V2=!0;function xO(t){const e=P_(t),n=t.proxy,r=t.ctx;V2=!1,e.beforeCreate&&zx(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:d,beforeMount:p,mounted:v,beforeUpdate:m,updated:x,activated:E,deactivated:k,beforeDestroy:A,beforeUnmount:D,destroyed:V,unmounted:Y,render:te,renderTracked:ge,renderTriggered:fe,errorCaptured:I,serverPrefetch:F,expose:K,inheritAttrs:B,components:N,directives:j,filters:z}=e;if(c&&LO(c,r,null),o)for(const re in o){const Q=o[re];Or(Q)&&(r[re]=Q.bind(n))}if(i){const re=i.call(n,n);gs(re)&&(t.data=iu(re))}if(V2=!0,s)for(const re in s){const Q=s[re],_e=Or(Q)?Q.bind(n,n):Or(Q.get)?Q.get.bind(n,n):qu,we=!Or(Q)&&Or(Q.set)?Q.set.bind(n):qu,nt=Jn({get:_e,set:we});Object.defineProperty(r,re,{enumerable:!0,configurable:!0,get:()=>nt.value,set:ae=>nt.value=ae})}if(a)for(const re in a)LS(a[re],r,n,re);if(l){const re=Or(l)?l.call(n):l;Reflect.ownKeys(re).forEach(Q=>{jg(Q,re[Q])})}d&&zx(d,t,"c");function $(re,Q){lr(Q)?Q.forEach(_e=>re(_e.bind(n))):Q&&re(Q.bind(n))}if($(gS,p),$(go,v),$(L_,m),$(Ey,x),$(dS,E),$(fS,k),$(bS,I),$(yS,ge),$(vS,fe),$(Td,D),$(Zu,Y),$(mS,F),lr(K))if(K.length){const re=t.exposed||(t.exposed={});K.forEach(Q=>{Object.defineProperty(re,Q,{get:()=>n[Q],set:_e=>n[Q]=_e})})}else t.exposed||(t.exposed={});te&&t.render===qu&&(t.render=te),B!=null&&(t.inheritAttrs=B),N&&(t.components=N),j&&(t.directives=j),F&&x_(t)}function LO(t,e,n=qu){lr(t)&&(t=U2(t));for(const r in t){const i=t[r];let s;gs(i)?"default"in i?s=Eu(i.from||r,i.default,!0):s=Eu(i.from||r):s=Eu(i),po(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function zx(t,e,n){Ku(lr(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function LS(t,e,n,r){let i=r.includes(".")?US(n,r):()=>n[r];if(Ds(t)){const s=e[t];Or(s)&&Di(i,s)}else if(Or(t))Di(i,t.bind(n));else if(gs(t))if(lr(t))t.forEach(s=>LS(s,e,n,r));else{const s=Or(t.handler)?t.handler.bind(n):e[t.handler];Or(s)&&Di(i,s,t)}}function P_(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>Av(l,c,o,!0)),Av(l,e,o)),gs(e)&&s.set(e,l),l}function Av(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Av(t,s,n,!0),i&&i.forEach(o=>Av(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=SO[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const SO={data:$x,props:Vx,emits:Vx,methods:bg,computed:bg,beforeCreate:Sl,created:Sl,beforeMount:Sl,mounted:Sl,beforeUpdate:Sl,updated:Sl,beforeDestroy:Sl,beforeUnmount:Sl,destroyed:Sl,unmounted:Sl,activated:Sl,deactivated:Sl,errorCaptured:Sl,serverPrefetch:Sl,components:bg,directives:bg,watch:EO,provide:$x,inject:CO};function $x(t,e){return e?t?function(){return Ls(Or(t)?t.call(this,this):t,Or(e)?e.call(this,this):e)}:e:t}function CO(t,e){return bg(U2(t),U2(e))}function U2(t){if(lr(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Sl(t,e){return t?[...new Set([].concat(t,e))]:e}function bg(t,e){return t?Ls(Object.create(null),t,e):e}function Vx(t,e){return t?lr(t)&&lr(e)?[...new Set([...t,...e])]:Ls(Object.create(null),hm(t),hm(e??{})):e}function EO(t,e){if(!t)return e;if(!e)return t;const n=Ls(Object.create(null),t);for(const r in e)n[r]=Sl(t[r],e[r]);return n}function SS(){return{app:null,config:{isNativeTag:MD,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let PO=0;function MO(t,e){return function(r,i=null){Or(r)||(r=Ls({},r)),i!=null&&!gs(i)&&(i=null);const s=SS(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:PO++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:sC,get config(){return s.config},set config(d){},use(d,...p){return o.has(d)||(d&&Or(d.install)?(o.add(d),d.install(c,...p)):Or(d)&&(o.add(d),d(c,...p))),c},mixin(d){return s.mixins.includes(d)||s.mixins.push(d),c},component(d,p){return p?(s.components[d]=p,c):s.components[d]},directive(d,p){return p?(s.directives[d]=p,c):s.directives[d]},mount(d,p,v){if(!l){const m=c._ceVNode||yi(r,i);return m.appContext=s,v===!0?v="svg":v===!1&&(v=void 0),p&&e?e(m,d):t(m,d,v),l=!0,c._container=d,d.__vue_app__=c,Tm(m.component)}},onUnmount(d){a.push(d)},unmount(){l&&(Ku(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(d,p){return s.provides[d]=p,c},runWithContext(d){const p=hf;hf=c;try{return d()}finally{hf=p}}};return c}}let hf=null;function jg(t,e){if(ha){let n=ha.provides;const r=ha.parent&&ha.parent.provides;r===n&&(n=ha.provides=Object.create(r)),n[t]=e}}function Eu(t,e,n=!1){const r=ha||da;if(r||hf){const i=hf?hf._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Or(e)?e.call(r&&r.proxy):e}}function CS(){return!!(ha||da||hf)}const ES={},PS=()=>Object.create(ES),MS=t=>Object.getPrototypeOf(t)===ES;function kO(t,e,n,r=!1){const i={},s=PS();t.propsDefaults=Object.create(null),kS(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:m_(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function AO(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=Fi(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let p=0;p<d.length;p++){let v=d[p];if(Py(t.emitsOptions,v))continue;const m=e[v];if(l)if(ns(s,v))m!==s[v]&&(s[v]=m,c=!0);else{const x=Ua(v);i[x]=H2(l,a,x,m,t,!1)}else m!==s[v]&&(s[v]=m,c=!0)}}}else{kS(t,e,i,s)&&(c=!0);let d;for(const p in a)(!e||!ns(e,p)&&((d=Jl(p))===p||!ns(e,d)))&&(l?n&&(n[p]!==void 0||n[d]!==void 0)&&(i[p]=H2(l,a,p,void 0,t,!0)):delete i[p]);if(s!==a)for(const p in s)(!e||!ns(e,p))&&(delete s[p],c=!0)}c&&Ch(t.attrs,"set","")}function kS(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(gp(l))continue;const c=e[l];let d;i&&ns(i,d=Ua(l))?!s||!s.includes(d)?n[d]=c:(a||(a={}))[d]=c:Py(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=Fi(n),c=a||ji;for(let d=0;d<s.length;d++){const p=s[d];n[p]=H2(i,l,p,c[p],t,!ns(c,p))}}return o}function H2(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=ns(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Or(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const d=bf(i);r=c[n]=l.call(null,e),d()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Jl(n))&&(r=!0))}return r}const TO=new WeakMap;function AS(t,e,n=!1){const r=n?TO:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!Or(t)){const d=p=>{l=!0;const[v,m]=AS(p,e,!0);Ls(o,v),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!s&&!l)return gs(t)&&r.set(t,fp),fp;if(lr(s))for(let d=0;d<s.length;d++){const p=Ua(s[d]);Ux(p)&&(o[p]=ji)}else if(s)for(const d in s){const p=Ua(d);if(Ux(p)){const v=s[d],m=o[p]=lr(v)||Or(v)?{type:v}:Ls({},v),x=m.type;let E=!1,k=!0;if(lr(x))for(let A=0;A<x.length;++A){const D=x[A],V=Or(D)&&D.name;if(V==="Boolean"){E=!0;break}else V==="String"&&(k=!1)}else E=Or(x)&&x.name==="Boolean";m[0]=E,m[1]=k,(E||ns(m,"default"))&&a.push(p)}}const c=[o,a];return gs(t)&&r.set(t,c),c}function Ux(t){return t[0]!=="$"&&!gp(t)}const TS=t=>t[0]==="_"||t==="$stable",M_=t=>lr(t)?t.map(Xl):[Xl(t)],DO=(t,e,n)=>{if(e._n)return e;const r=Gu((...i)=>M_(e(...i)),n);return r._c=!1,r},DS=(t,e,n)=>{const r=t._ctx;for(const i in t){if(TS(i))continue;const s=t[i];if(Or(s))e[i]=DO(i,s,r);else if(s!=null){const o=M_(s);e[i]=()=>o}}},OS=(t,e)=>{const n=M_(e);t.slots.default=()=>n},NS=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},OO=(t,e,n)=>{const r=t.slots=PS();if(t.vnode.shapeFlag&32){const i=e._;i?(NS(r,e,n),n&&ML(r,"_",i,!0)):DS(e,r)}else e&&OS(t,e)},NO=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=ji;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:NS(i,e,n):(s=!e.$stable,DS(e,i)),o=e}else e&&(OS(t,e),o={default:1});if(s)for(const a in i)!TS(a)&&o[a]==null&&delete i[a]},ua=qS;function IS(t){return RS(t)}function BS(t){return RS(t,V8)}function RS(t,e){const n=gy();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:d,parentNode:p,nextSibling:v,setScopeId:m=qu,insertStaticContent:x}=t,E=(he,ee,se,le=null,ze=null,Se=null,ve=void 0,$e=null,Ge=!!ee.dynamicChildren)=>{if(he===ee)return;he&&!vc(he,ee)&&(le=de(he),ae(he,ze,Se,!0),he=null),ee.patchFlag===-2&&(Ge=!1,ee.dynamicChildren=null);const{type:Xe,ref:lt,shapeFlag:qe}=ee;switch(Xe){case yd:k(he,ee,se,le);break;case ra:A(he,ee,se,le);break;case df:he==null&&D(ee,se,le,ve);break;case Mn:N(he,ee,se,le,ze,Se,ve,$e,Ge);break;default:qe&1?te(he,ee,se,le,ze,Se,ve,$e,Ge):qe&6?j(he,ee,se,le,ze,Se,ve,$e,Ge):(qe&64||qe&128)&&Xe.process(he,ee,se,le,ze,Se,ve,$e,Ge,De)}lt!=null&&ze&&cm(lt,he&&he.ref,Se,ee||he,!ee)},k=(he,ee,se,le)=>{if(he==null)r(ee.el=a(ee.children),se,le);else{const ze=ee.el=he.el;ee.children!==he.children&&c(ze,ee.children)}},A=(he,ee,se,le)=>{he==null?r(ee.el=l(ee.children||""),se,le):ee.el=he.el},D=(he,ee,se,le)=>{[he.el,he.anchor]=x(he.children,ee,se,le,he.el,he.anchor)},V=({el:he,anchor:ee},se,le)=>{let ze;for(;he&&he!==ee;)ze=v(he),r(he,se,le),he=ze;r(ee,se,le)},Y=({el:he,anchor:ee})=>{let se;for(;he&&he!==ee;)se=v(he),i(he),he=se;i(ee)},te=(he,ee,se,le,ze,Se,ve,$e,Ge)=>{ee.type==="svg"?ve="svg":ee.type==="math"&&(ve="mathml"),he==null?ge(ee,se,le,ze,Se,ve,$e,Ge):F(he,ee,ze,Se,ve,$e,Ge)},ge=(he,ee,se,le,ze,Se,ve,$e)=>{let Ge,Xe;const{props:lt,shapeFlag:qe,transition:Lt,dirs:Gt}=he;if(Ge=he.el=o(he.type,Se,lt&&lt.is,lt),qe&8?d(Ge,he.children):qe&16&&I(he.children,Ge,null,le,ze,B1(he,Se),ve,$e),Gt&&Uc(he,null,le,"created"),fe(Ge,he,he.scopeId,ve,le),lt){for(const yn in lt)yn!=="value"&&!gp(yn)&&s(Ge,yn,null,lt[yn],Se,le);"value"in lt&&s(Ge,"value",null,lt.value,Se),(Xe=lt.onVnodeBeforeMount)&&Zl(Xe,le,he)}Gt&&Uc(he,null,le,"beforeMount");const rn=FS(ze,Lt);rn&&Lt.beforeEnter(Ge),r(Ge,ee,se),((Xe=lt&&lt.onVnodeMounted)||rn||Gt)&&ua(()=>{Xe&&Zl(Xe,le,he),rn&&Lt.enter(Ge),Gt&&Uc(he,null,le,"mounted")},ze)},fe=(he,ee,se,le,ze)=>{if(se&&m(he,se),le)for(let Se=0;Se<le.length;Se++)m(he,le[Se]);if(ze){let Se=ze.subTree;if(ee===Se||Dv(Se.type)&&(Se.ssContent===ee||Se.ssFallback===ee)){const ve=ze.vnode;fe(he,ve,ve.scopeId,ve.slotScopeIds,ze.parent)}}},I=(he,ee,se,le,ze,Se,ve,$e,Ge=0)=>{for(let Xe=Ge;Xe<he.length;Xe++){const lt=he[Xe]=$e?od(he[Xe]):Xl(he[Xe]);E(null,lt,ee,se,le,ze,Se,ve,$e)}},F=(he,ee,se,le,ze,Se,ve)=>{const $e=ee.el=he.el;let{patchFlag:Ge,dynamicChildren:Xe,dirs:lt}=ee;Ge|=he.patchFlag&16;const qe=he.props||ji,Lt=ee.props||ji;let Gt;if(se&&Ud(se,!1),(Gt=Lt.onVnodeBeforeUpdate)&&Zl(Gt,se,ee,he),lt&&Uc(ee,he,se,"beforeUpdate"),se&&Ud(se,!0),(qe.innerHTML&&Lt.innerHTML==null||qe.textContent&&Lt.textContent==null)&&d($e,""),Xe?K(he.dynamicChildren,Xe,$e,se,le,B1(ee,ze),Se):ve||Q(he,ee,$e,null,se,le,B1(ee,ze),Se,!1),Ge>0){if(Ge&16)B($e,qe,Lt,se,ze);else if(Ge&2&&qe.class!==Lt.class&&s($e,"class",null,Lt.class,ze),Ge&4&&s($e,"style",qe.style,Lt.style,ze),Ge&8){const rn=ee.dynamicProps;for(let yn=0;yn<rn.length;yn++){const Ye=rn[yn],at=qe[Ye],it=Lt[Ye];(it!==at||Ye==="value")&&s($e,Ye,at,it,ze,se)}}Ge&1&&he.children!==ee.children&&d($e,ee.children)}else!ve&&Xe==null&&B($e,qe,Lt,se,ze);((Gt=Lt.onVnodeUpdated)||lt)&&ua(()=>{Gt&&Zl(Gt,se,ee,he),lt&&Uc(ee,he,se,"updated")},le)},K=(he,ee,se,le,ze,Se,ve)=>{for(let $e=0;$e<ee.length;$e++){const Ge=he[$e],Xe=ee[$e],lt=Ge.el&&(Ge.type===Mn||!vc(Ge,Xe)||Ge.shapeFlag&70)?p(Ge.el):se;E(Ge,Xe,lt,null,le,ze,Se,ve,!0)}},B=(he,ee,se,le,ze)=>{if(ee!==se){if(ee!==ji)for(const Se in ee)!gp(Se)&&!(Se in se)&&s(he,Se,ee[Se],null,ze,le);for(const Se in se){if(gp(Se))continue;const ve=se[Se],$e=ee[Se];ve!==$e&&Se!=="value"&&s(he,Se,$e,ve,ze,le)}"value"in se&&s(he,"value",ee.value,se.value,ze)}},N=(he,ee,se,le,ze,Se,ve,$e,Ge)=>{const Xe=ee.el=he?he.el:a(""),lt=ee.anchor=he?he.anchor:a("");let{patchFlag:qe,dynamicChildren:Lt,slotScopeIds:Gt}=ee;Gt&&($e=$e?$e.concat(Gt):Gt),he==null?(r(Xe,se,le),r(lt,se,le),I(ee.children||[],se,lt,ze,Se,ve,$e,Ge)):qe>0&&qe&64&&Lt&&he.dynamicChildren?(K(he.dynamicChildren,Lt,se,ze,Se,ve,$e),(ee.key!=null||ze&&ee===ze.subTree)&&k_(he,ee,!0)):Q(he,ee,se,lt,ze,Se,ve,$e,Ge)},j=(he,ee,se,le,ze,Se,ve,$e,Ge)=>{ee.slotScopeIds=$e,he==null?ee.shapeFlag&512?ze.ctx.activate(ee,se,le,ve,Ge):z(ee,se,le,ze,Se,ve,Ge):U(he,ee,Ge)},z=(he,ee,se,le,ze,Se,ve)=>{const $e=he.component=QS(he,le,ze);if(km(he)&&($e.ctx.renderer=De),tC($e,!1,ve),$e.asyncDep){if(ze&&ze.registerDep($e,$,ve),!he.el){const Ge=$e.subTree=yi(ra);A(null,Ge,ee,se)}}else $($e,he,ee,se,ze,Se,ve)},U=(he,ee,se)=>{const le=ee.component=he.component;if(UO(he,ee,se))if(le.asyncDep&&!le.asyncResolved){re(le,ee,se);return}else le.next=ee,le.update();else ee.el=he.el,le.vnode=ee},$=(he,ee,se,le,ze,Se,ve)=>{const $e=()=>{if(he.isMounted){let{next:qe,bu:Lt,u:Gt,parent:rn,vnode:yn}=he;{const Yt=jS(he);if(Yt){qe&&(qe.el=yn.el,re(he,qe,ve)),Yt.asyncDep.then(()=>{he.isUnmounted||$e()});return}}let Ye=qe,at;Ud(he,!1),qe?(qe.el=yn.el,re(he,qe,ve)):qe=yn,Lt&&mp(Lt),(at=qe.props&&qe.props.onVnodeBeforeUpdate)&&Zl(at,rn,qe,yn),Ud(he,!0);const it=Z0(he),Vt=he.subTree;he.subTree=it,E(Vt,it,p(Vt.el),de(Vt),he,ze,Se),qe.el=it.el,Ye===null&&My(he,it.el),Gt&&ua(Gt,ze),(at=qe.props&&qe.props.onVnodeUpdated)&&ua(()=>Zl(at,rn,qe,yn),ze)}else{let qe;const{el:Lt,props:Gt}=ee,{bm:rn,m:yn,parent:Ye,root:at,type:it}=he,Vt=vd(ee);if(Ud(he,!1),rn&&mp(rn),!Vt&&(qe=Gt&&Gt.onVnodeBeforeMount)&&Zl(qe,Ye,ee),Ud(he,!0),Lt&&Je){const Yt=()=>{he.subTree=Z0(he),Je(Lt,he.subTree,he,ze,null)};Vt&&it.__asyncHydrate?it.__asyncHydrate(Lt,he,Yt):Yt()}else{at.ce&&at.ce._injectChildStyle(it);const Yt=he.subTree=Z0(he);E(null,Yt,se,le,he,ze,Se),ee.el=Yt.el}if(yn&&ua(yn,ze),!Vt&&(qe=Gt&&Gt.onVnodeMounted)){const Yt=ee;ua(()=>Zl(qe,Ye,Yt),ze)}(ee.shapeFlag&256||Ye&&vd(Ye.vnode)&&Ye.vnode.shapeFlag&256)&&he.a&&ua(he.a,ze),he.isMounted=!0,ee=se=le=null}};he.scope.on();const Ge=he.effect=new im($e);he.scope.off();const Xe=he.update=Ge.run.bind(Ge),lt=he.job=Ge.runIfDirty.bind(Ge);lt.i=he,lt.id=he.uid,Ge.scheduler=()=>b_(lt),Ud(he,!0),Xe()},re=(he,ee,se)=>{ee.component=he;const le=he.vnode.props;he.vnode=ee,he.next=null,AO(he,ee.props,le,se),NO(he,ee.children,se),kd(),Dx(he),Ad()},Q=(he,ee,se,le,ze,Se,ve,$e,Ge=!1)=>{const Xe=he&&he.children,lt=he?he.shapeFlag:0,qe=ee.children,{patchFlag:Lt,shapeFlag:Gt}=ee;if(Lt>0){if(Lt&128){we(Xe,qe,se,le,ze,Se,ve,$e,Ge);return}else if(Lt&256){_e(Xe,qe,se,le,ze,Se,ve,$e,Ge);return}}Gt&8?(lt&16&&pe(Xe,ze,Se),qe!==Xe&&d(se,qe)):lt&16?Gt&16?we(Xe,qe,se,le,ze,Se,ve,$e,Ge):pe(Xe,ze,Se,!0):(lt&8&&d(se,""),Gt&16&&I(qe,se,le,ze,Se,ve,$e,Ge))},_e=(he,ee,se,le,ze,Se,ve,$e,Ge)=>{he=he||fp,ee=ee||fp;const Xe=he.length,lt=ee.length,qe=Math.min(Xe,lt);let Lt;for(Lt=0;Lt<qe;Lt++){const Gt=ee[Lt]=Ge?od(ee[Lt]):Xl(ee[Lt]);E(he[Lt],Gt,se,null,ze,Se,ve,$e,Ge)}Xe>lt?pe(he,ze,Se,!0,!1,qe):I(ee,se,le,ze,Se,ve,$e,Ge,qe)},we=(he,ee,se,le,ze,Se,ve,$e,Ge)=>{let Xe=0;const lt=ee.length;let qe=he.length-1,Lt=lt-1;for(;Xe<=qe&&Xe<=Lt;){const Gt=he[Xe],rn=ee[Xe]=Ge?od(ee[Xe]):Xl(ee[Xe]);if(vc(Gt,rn))E(Gt,rn,se,null,ze,Se,ve,$e,Ge);else break;Xe++}for(;Xe<=qe&&Xe<=Lt;){const Gt=he[qe],rn=ee[Lt]=Ge?od(ee[Lt]):Xl(ee[Lt]);if(vc(Gt,rn))E(Gt,rn,se,null,ze,Se,ve,$e,Ge);else break;qe--,Lt--}if(Xe>qe){if(Xe<=Lt){const Gt=Lt+1,rn=Gt<lt?ee[Gt].el:le;for(;Xe<=Lt;)E(null,ee[Xe]=Ge?od(ee[Xe]):Xl(ee[Xe]),se,rn,ze,Se,ve,$e,Ge),Xe++}}else if(Xe>Lt)for(;Xe<=qe;)ae(he[Xe],ze,Se,!0),Xe++;else{const Gt=Xe,rn=Xe,yn=new Map;for(Xe=rn;Xe<=Lt;Xe++){const Nn=ee[Xe]=Ge?od(ee[Xe]):Xl(ee[Xe]);Nn.key!=null&&yn.set(Nn.key,Xe)}let Ye,at=0;const it=Lt-rn+1;let Vt=!1,Yt=0;const In=new Array(it);for(Xe=0;Xe<it;Xe++)In[Xe]=0;for(Xe=Gt;Xe<=qe;Xe++){const Nn=he[Xe];if(at>=it){ae(Nn,ze,Se,!0);continue}let Qn;if(Nn.key!=null)Qn=yn.get(Nn.key);else for(Ye=rn;Ye<=Lt;Ye++)if(In[Ye-rn]===0&&vc(Nn,ee[Ye])){Qn=Ye;break}Qn===void 0?ae(Nn,ze,Se,!0):(In[Qn-rn]=Xe+1,Qn>=Yt?Yt=Qn:Vt=!0,E(Nn,ee[Qn],se,null,ze,Se,ve,$e,Ge),at++)}const Sn=Vt?IO(In):fp;for(Ye=Sn.length-1,Xe=it-1;Xe>=0;Xe--){const Nn=rn+Xe,Qn=ee[Nn],Xt=Nn+1<lt?ee[Nn+1].el:le;In[Xe]===0?E(null,Qn,se,Xt,ze,Se,ve,$e,Ge):Vt&&(Ye<0||Xe!==Sn[Ye]?nt(Qn,se,Xt,2):Ye--)}}},nt=(he,ee,se,le,ze=null)=>{const{el:Se,type:ve,transition:$e,children:Ge,shapeFlag:Xe}=he;if(Xe&6){nt(he.component.subTree,ee,se,le);return}if(Xe&128){he.suspense.move(ee,se,le);return}if(Xe&64){ve.move(he,ee,se,De);return}if(ve===Mn){r(Se,ee,se);for(let qe=0;qe<Ge.length;qe++)nt(Ge[qe],ee,se,le);r(he.anchor,ee,se);return}if(ve===df){V(he,ee,se);return}if(le!==2&&Xe&1&&$e)if(le===0)$e.beforeEnter(Se),r(Se,ee,se),ua(()=>$e.enter(Se),ze);else{const{leave:qe,delayLeave:Lt,afterLeave:Gt}=$e,rn=()=>r(Se,ee,se),yn=()=>{qe(Se,()=>{rn(),Gt&&Gt()})};Lt?Lt(Se,rn,yn):yn()}else r(Se,ee,se)},ae=(he,ee,se,le=!1,ze=!1)=>{const{type:Se,props:ve,ref:$e,children:Ge,dynamicChildren:Xe,shapeFlag:lt,patchFlag:qe,dirs:Lt,cacheIndex:Gt}=he;if(qe===-2&&(ze=!1),$e!=null&&cm($e,null,se,he,!0),Gt!=null&&(ee.renderCache[Gt]=void 0),lt&256){ee.ctx.deactivate(he);return}const rn=lt&1&&Lt,yn=!vd(he);let Ye;if(yn&&(Ye=ve&&ve.onVnodeBeforeUnmount)&&Zl(Ye,ee,he),lt&6)me(he.component,se,le);else{if(lt&128){he.suspense.unmount(se,le);return}rn&&Uc(he,null,ee,"beforeUnmount"),lt&64?he.type.remove(he,ee,se,De,le):Xe&&!Xe.hasOnce&&(Se!==Mn||qe>0&&qe&64)?pe(Xe,ee,se,!1,!0):(Se===Mn&&qe&384||!ze&&lt&16)&&pe(Ge,ee,se),le&&H(he)}(yn&&(Ye=ve&&ve.onVnodeUnmounted)||rn)&&ua(()=>{Ye&&Zl(Ye,ee,he),rn&&Uc(he,null,ee,"unmounted")},se)},H=he=>{const{type:ee,el:se,anchor:le,transition:ze}=he;if(ee===Mn){Z(se,le);return}if(ee===df){Y(he);return}const Se=()=>{i(se),ze&&!ze.persisted&&ze.afterLeave&&ze.afterLeave()};if(he.shapeFlag&1&&ze&&!ze.persisted){const{leave:ve,delayLeave:$e}=ze,Ge=()=>ve(se,Se);$e?$e(he.el,Se,Ge):Ge()}else Se()},Z=(he,ee)=>{let se;for(;he!==ee;)se=v(he),i(he),he=se;i(ee)},me=(he,ee,se)=>{const{bum:le,scope:ze,job:Se,subTree:ve,um:$e,m:Ge,a:Xe}=he;Tv(Ge),Tv(Xe),le&&mp(le),ze.stop(),Se&&(Se.flags|=8,ae(ve,he,ee,se)),$e&&ua($e,ee),ua(()=>{he.isUnmounted=!0},ee),ee&&ee.pendingBranch&&!ee.isUnmounted&&he.asyncDep&&!he.asyncResolved&&he.suspenseId===ee.pendingId&&(ee.deps--,ee.deps===0&&ee.resolve())},pe=(he,ee,se,le=!1,ze=!1,Se=0)=>{for(let ve=Se;ve<he.length;ve++)ae(he[ve],ee,se,le,ze)},de=he=>{if(he.shapeFlag&6)return de(he.component.subTree);if(he.shapeFlag&128)return he.suspense.next();const ee=v(he.anchor||he.el),se=ee&&ee[iS];return se?v(se):ee};let X=!1;const J=(he,ee,se)=>{he==null?ee._vnode&&ae(ee._vnode,null,null,!0):E(ee._vnode||null,he,ee,null,null,null,se),ee._vnode=he,X||(X=!0,Dx(),kv(),X=!1)},De={p:E,um:ae,m:nt,r:H,mt:z,mc:I,pc:Q,pbc:K,n:de,o:t};let Te,Je;return e&&([Te,Je]=e(De)),{render:J,hydrate:Te,createApp:MO(J,Te)}}function B1({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ud({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function FS(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function k_(t,e,n=!1){const r=t.children,i=e.children;if(lr(r)&&lr(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=od(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&k_(o,a)),a.type===yd&&(a.el=o.el)}}function IO(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function jS(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:jS(e)}function Tv(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const zS=Symbol.for("v-scx"),$S=()=>Eu(zS);function dm(t,e){return Am(t,null,e)}function BO(t,e){return Am(t,null,{flush:"post"})}function VS(t,e){return Am(t,null,{flush:"sync"})}function Di(t,e,n){return Am(t,e,n)}function Am(t,e,n=ji){const{immediate:r,deep:i,flush:s,once:o}=n,a=Ls({},n),l=e&&r||!e&&s!=="post";let c;if(Cp){if(s==="sync"){const m=$S();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=qu,m.resume=qu,m.pause=qu,m}}const d=ha;a.call=(m,x,E)=>Ku(m,d,x,E);let p=!1;s==="post"?a.scheduler=m=>{ua(m,d&&d.suspense)}:s!=="sync"&&(p=!0,a.scheduler=(m,x)=>{x?m():b_(m)}),a.augmentJob=m=>{e&&(m.flags|=4),p&&(m.flags|=2,d&&(m.id=d.uid,m.i=d))};const v=C8(t,e,a);return Cp&&(c?c.push(v):l&&v()),v}function RO(t,e,n){const r=this.proxy,i=Ds(t)?t.includes(".")?US(r,t):()=>r[t]:t.bind(r,r);let s;Or(e)?s=e:(s=e.handler,n=e);const o=bf(this),a=Am(i,s.bind(r),n);return o(),a}function US(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function FO(t,e,n=ji){const r=Ju(),i=Ua(e),s=Jl(e),o=HS(t,i),a=KL((l,c)=>{let d,p=ji,v;return VS(()=>{const m=t[i];Tl(d,m)&&(d=m,c())}),{get(){return l(),n.get?n.get(d):d},set(m){const x=n.set?n.set(m):m;if(!Tl(x,d)&&!(p!==ji&&Tl(m,p)))return;const E=r.vnode.props;E&&(e in E||i in E||s in E)&&(`onUpdate:${e}`in E||`onUpdate:${i}`in E||`onUpdate:${s}`in E)||(d=m,c()),r.emit(`update:${e}`,x),Tl(m,x)&&Tl(m,p)&&!Tl(x,v)&&c(),p=m,v=x}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||ji:a,done:!1}:{done:!0}}}},a}const HS=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Ua(e)}Modifiers`]||t[`${Jl(e)}Modifiers`];function jO(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||ji;let i=n;const s=e.startsWith("update:"),o=s&&HS(r,e.slice(7));o&&(o.trim&&(i=n.map(d=>Ds(d)?d.trim():d)),o.number&&(i=n.map(Sv)));let a,l=r[a=Ng(e)]||r[a=Ng(Ua(e))];!l&&s&&(l=r[a=Ng(Jl(e))]),l&&Ku(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Ku(c,t,6,i)}}function WS(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Or(t)){const l=c=>{const d=WS(c,e,!0);d&&(a=!0,Ls(o,d))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(gs(t)&&r.set(t,null),null):(lr(s)?s.forEach(l=>o[l]=null):Ls(o,s),gs(t)&&r.set(t,o),o)}function Py(t,e){return!t||!Pm(e)?!1:(e=e.slice(2).replace(/Once$/,""),ns(t,e[0].toLowerCase()+e.slice(1))||ns(t,Jl(e))||ns(t,e))}function Z0(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:d,props:p,data:v,setupState:m,ctx:x,inheritAttrs:E}=t,k=um(t);let A,D;try{if(n.shapeFlag&4){const Y=i||r,te=Y;A=Xl(c.call(te,Y,d,p,m,v,x)),D=a}else{const Y=e;A=Xl(Y.length>1?Y(p,{attrs:a,slots:o,emit:l}):Y(p,null)),D=e.props?a:$O(a)}}catch(Y){zg.length=0,Cf(Y,t,1),A=yi(ra)}let V=A;if(D&&E!==!1){const Y=Object.keys(D),{shapeFlag:te}=V;Y.length&&te&7&&(s&&Y.some(o_)&&(D=VO(D,s)),V=eh(V,D,!1,!0))}return n.dirs&&(V=eh(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(n.dirs):n.dirs),n.transition&&Nh(V,n.transition),A=V,um(k),A}function zO(t,e=!0){let n;for(let r=0;r<t.length;r++){const i=t[r];if(Ih(i)){if(i.type!==ra||i.children==="v-if"){if(n)return;n=i}}else return}return n}const $O=t=>{let e;for(const n in t)(n==="class"||n==="style"||Pm(n))&&((e||(e={}))[n]=t[n]);return e},VO=(t,e)=>{const n={};for(const r in t)(!o_(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function UO(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Hx(r,o,c):!!o;if(l&8){const d=e.dynamicProps;for(let p=0;p<d.length;p++){const v=d[p];if(o[v]!==r[v]&&!Py(c,v))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Hx(r,o,c):!0:!!o;return!1}function Hx(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Py(n,s))return!0}return!1}function My({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Dv=t=>t.__isSuspense;let W2=0;const HO={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,c){if(t==null)GO(e,n,r,i,s,o,a,l,c);else{if(s&&s.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}qO(t,e,n,r,i,o,a,l,c)}},hydrate:YO,normalize:KO},WO=HO;function fm(t,e){const n=t.props&&t.props[e];Or(n)&&n()}function GO(t,e,n,r,i,s,o,a,l){const{p:c,o:{createElement:d}}=l,p=d("div"),v=t.suspense=GS(t,i,r,e,p,n,s,o,a,l);c(null,v.pendingBranch=t.ssContent,p,null,r,v,s,o),v.deps>0?(fm(t,"onPending"),fm(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,s,o),yp(v,t.ssFallback)):v.resolve(!1,!0)}function qO(t,e,n,r,i,s,o,a,{p:l,um:c,o:{createElement:d}}){const p=e.suspense=t.suspense;p.vnode=e,e.el=t.el;const v=e.ssContent,m=e.ssFallback,{activeBranch:x,pendingBranch:E,isInFallback:k,isHydrating:A}=p;if(E)p.pendingBranch=v,vc(v,E)?(l(E,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():k&&(A||(l(x,m,n,r,i,null,s,o,a),yp(p,m)))):(p.pendingId=W2++,A?(p.isHydrating=!1,p.activeBranch=E):c(E,i,p),p.deps=0,p.effects.length=0,p.hiddenContainer=d("div"),k?(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():(l(x,m,n,r,i,null,s,o,a),yp(p,m))):x&&vc(v,x)?(l(x,v,n,r,i,p,s,o,a),p.resolve(!0)):(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0&&p.resolve()));else if(x&&vc(v,x))l(x,v,n,r,i,p,s,o,a),yp(p,v);else if(fm(e,"onPending"),p.pendingBranch=v,v.shapeFlag&512?p.pendingId=v.component.suspenseId:p.pendingId=W2++,l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0)p.resolve();else{const{timeout:D,pendingId:V}=p;D>0?setTimeout(()=>{p.pendingId===V&&p.fallback(m)},D):D===0&&p.fallback(m)}}function GS(t,e,n,r,i,s,o,a,l,c,d=!1){const{p,m:v,um:m,n:x,o:{parentNode:E,remove:k}}=c;let A;const D=ZO(t);D&&e&&e.pendingBranch&&(A=e.pendingId,e.deps++);const V=t.props?Cv(t.props.timeout):void 0,Y=s,te={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:W2++,timeout:typeof V=="number"?V:-1,activeBranch:null,pendingBranch:null,isInFallback:!d,isHydrating:d,isUnmounted:!1,effects:[],resolve(ge=!1,fe=!1){const{vnode:I,activeBranch:F,pendingBranch:K,pendingId:B,effects:N,parentComponent:j,container:z}=te;let U=!1;te.isHydrating?te.isHydrating=!1:ge||(U=F&&K.transition&&K.transition.mode==="out-in",U&&(F.transition.afterLeave=()=>{B===te.pendingId&&(v(K,z,s===Y?x(F):s,0),am(N))}),F&&(E(F.el)===z&&(s=x(F)),m(F,j,te,!0)),U||v(K,z,s,0)),yp(te,K),te.pendingBranch=null,te.isInFallback=!1;let $=te.parent,re=!1;for(;$;){if($.pendingBranch){$.effects.push(...N),re=!0;break}$=$.parent}!re&&!U&&am(N),te.effects=[],D&&e&&e.pendingBranch&&A===e.pendingId&&(e.deps--,e.deps===0&&!fe&&e.resolve()),fm(I,"onResolve")},fallback(ge){if(!te.pendingBranch)return;const{vnode:fe,activeBranch:I,parentComponent:F,container:K,namespace:B}=te;fm(fe,"onFallback");const N=x(I),j=()=>{te.isInFallback&&(p(null,ge,K,N,F,null,B,a,l),yp(te,ge))},z=ge.transition&&ge.transition.mode==="out-in";z&&(I.transition.afterLeave=j),te.isInFallback=!0,m(I,F,null,!0),z||j()},move(ge,fe,I){te.activeBranch&&v(te.activeBranch,ge,fe,I),te.container=ge},next(){return te.activeBranch&&x(te.activeBranch)},registerDep(ge,fe,I){const F=!!te.pendingBranch;F&&te.deps++;const K=ge.vnode.el;ge.asyncDep.catch(B=>{Cf(B,ge,0)}).then(B=>{if(ge.isUnmounted||te.isUnmounted||te.pendingId!==ge.suspenseId)return;ge.asyncResolved=!0;const{vnode:N}=ge;K2(ge,B,!1),K&&(N.el=K);const j=!K&&ge.subTree.el;fe(ge,N,E(K||ge.subTree.el),K?null:x(ge.subTree),te,o,I),j&&k(j),My(ge,N.el),F&&--te.deps===0&&te.resolve()})},unmount(ge,fe){te.isUnmounted=!0,te.activeBranch&&m(te.activeBranch,n,ge,fe),te.pendingBranch&&m(te.pendingBranch,n,ge,fe)}};return te}function YO(t,e,n,r,i,s,o,a,l){const c=e.suspense=GS(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),d=l(t,c.pendingBranch=e.ssContent,n,c,s,o);return c.deps===0&&c.resolve(!1,!0),d}function KO(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=Wx(r?n.default:n),t.ssFallback=r?Wx(n.fallback):yi(ra)}function Wx(t){let e;if(Or(t)){const n=yf&&t._c;n&&(t._d=!1,Ie()),t=t(),n&&(t._d=!0,e=fl,YS())}return lr(t)&&(t=zO(t)),t=Xl(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function qS(t,e){e&&e.pendingBranch?lr(t)?e.effects.push(...t):e.effects.push(t):am(t)}function yp(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,My(r,i))}function ZO(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Mn=Symbol.for("v-fgt"),yd=Symbol.for("v-txt"),ra=Symbol.for("v-cmt"),df=Symbol.for("v-stc"),zg=[];let fl=null;function Ie(t=!1){zg.push(fl=t?null:[])}function YS(){zg.pop(),fl=zg[zg.length-1]||null}let yf=1;function G2(t,e=!1){yf+=t,t<0&&fl&&e&&(fl.hasOnce=!0)}function KS(t){return t.dynamicChildren=yf>0?fl||fp:null,YS(),yf>0&&fl&&fl.push(t),t}function je(t,e,n,r,i,s){return KS(C(t,e,n,r,i,s,!0))}function Va(t,e,n,r,i){return KS(yi(t,e,n,r,i,!0))}function Ih(t){return t?t.__v_isVNode===!0:!1}function vc(t,e){return t.type===e.type&&t.key===e.key}function XO(t){}const ZS=({key:t})=>t??null,X0=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ds(t)||po(t)||Or(t)?{i:da,r:t,k:e,f:!!n}:t:null);function C(t,e=null,n=null,r=0,i=null,s=t===Mn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ZS(e),ref:e&&X0(e),scopeId:Ly,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:da};return a?(A_(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=Ds(n)?8:16),yf>0&&!o&&fl&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&fl.push(l),l}const yi=JO;function JO(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===wS)&&(t=ra),Ih(t)){const a=eh(t,e,!0);return n&&A_(a,n),yf>0&&!s&&fl&&(a.shapeFlag&6?fl[fl.indexOf(t)]=a:fl.push(a)),a.patchFlag=-2,a}if(sN(t)&&(t=t.__vccOpts),e){e=XS(e);let{class:a,style:l}=e;a&&!Ds(a)&&(e.class=Ti(a)),gs(l)&&(wy(l)&&!lr(l)&&(l=Ls({},l)),e.style=tu(l))}const o=Ds(t)?1:Dv(t)?128:sS(t)?64:gs(t)?4:Or(t)?2:0;return C(t,e,n,r,i,o,s,!0)}function XS(t){return t?wy(t)||MS(t)?Ls({},t):t:null}function eh(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,c=e?JS(i||{},e):i,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&ZS(c),ref:e&&e.ref?n&&s?lr(s)?s.concat(X0(e)):[s,X0(e)]:X0(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Mn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&eh(t.ssContent),ssFallback:t.ssFallback&&eh(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Nh(d,l.clone(d)),d}function ui(t=" ",e=0){return yi(yd,null,t,e)}function eu(t,e){const n=yi(df,null,t);return n.staticCount=e,n}function en(t="",e=!1){return e?(Ie(),Va(ra,null,t)):yi(ra,null,t)}function Xl(t){return t==null||typeof t=="boolean"?yi(ra):lr(t)?yi(Mn,null,t.slice()):Ih(t)?od(t):yi(yd,null,String(t))}function od(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:eh(t)}function A_(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(lr(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),A_(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!MS(e)?e._ctx=da:i===3&&da&&(da.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Or(e)?(e={default:e,_ctx:da},n=32):(e=String(e),r&64?(n=16,e=[ui(e)]):n=8);t.children=e,t.shapeFlag|=n}function JS(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Ti([e.class,r.class]));else if(i==="style")e.style=tu([e.style,r.style]);else if(Pm(i)){const s=e[i],o=r[i];o&&s!==o&&!(lr(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Zl(t,e,n,r=null){Ku(t,e,7,[n,r])}const QO=SS();let eN=0;function QS(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||QO,s={uid:eN++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new c_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:AS(r,i),emitsOptions:WS(r,i),emit:null,emitted:null,propsDefaults:ji,inheritAttrs:r.inheritAttrs,ctx:ji,data:ji,props:ji,attrs:ji,slots:ji,refs:ji,setupState:ji,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=jO.bind(null,s),t.ce&&t.ce(s),s}let ha=null;const Ju=()=>ha||da;let Ov,q2;{const t=gy(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Ov=e("__VUE_INSTANCE_SETTERS__",n=>ha=n),q2=e("__VUE_SSR_SETTERS__",n=>Cp=n)}const bf=t=>{const e=ha;return Ov(t),t.scope.on(),()=>{t.scope.off(),Ov(e)}},Y2=()=>{ha&&ha.scope.off(),Ov(null)};function eC(t){return t.vnode.shapeFlag&4}let Cp=!1;function tC(t,e=!1,n=!1){e&&q2(e);const{props:r,children:i}=t.vnode,s=eC(t);kO(t,r,s,e),OO(t,i,n);const o=s?tN(t,e):void 0;return e&&q2(!1),o}function tN(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,$2);const{setup:r}=n;if(r){kd();const i=t.setupContext=r.length>1?rC(t):null,s=bf(t),o=Fp(r,t,0,[t.props,i]),a=l_(o);if(Ad(),s(),(a||t.sp)&&!vd(t)&&x_(t),a){if(o.then(Y2,Y2),e)return o.then(l=>{K2(t,l,e)}).catch(l=>{Cf(l,t,0)});t.asyncDep=o}else K2(t,o,e)}else nC(t,e)}function K2(t,e,n){Or(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:gs(e)&&(t.setupState=y_(e)),nC(t,n)}let Nv,Z2;function nN(t){Nv=t,Z2=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,lO))}}const rN=()=>!Nv;function nC(t,e,n){const r=t.type;if(!t.render){if(!e&&Nv&&!r.render){const i=r.template||P_(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Ls(Ls({isCustomElement:s,delimiters:a},o),l);r.render=Nv(i,c)}}t.render=r.render||qu,Z2&&Z2(t)}{const i=bf(t);kd();try{xO(t)}finally{Ad(),i()}}}const iN={get(t,e){return ll(t,"get",""),t[e]}};function rC(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,iN),slots:t.slots,emit:t.emit,expose:e}}function Tm(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(y_(xy(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Fg)return Fg[n](t)},has(e,n){return n in e||n in Fg}})):t.proxy}function X2(t,e=!0){return Or(t)?t.displayName||t.name:t.name||e&&t.__name}function sN(t){return Or(t)&&"__vccOpts"in t}const Jn=(t,e)=>w8(t,e,Cp);function ky(t,e,n){const r=arguments.length;return r===2?gs(e)&&!lr(e)?Ih(e)?yi(t,null,[e]):yi(t,e):yi(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ih(n)&&(n=[n]),yi(t,e,n))}function oN(){}function aN(t,e,n,r){const i=n[r];if(i&&iC(i,t))return i;const s=e();return s.memo=t.slice(),s.cacheIndex=r,n[r]=s}function iC(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(Tl(n[r],e[r]))return!1;return yf>0&&fl&&fl.push(t),!0}const sC="3.5.13",lN=qu,uN=A8,cN=ip,hN=rS,dN={createComponentInstance:QS,setupComponent:tC,renderComponentRoot:Z0,setCurrentRenderingInstance:um,isVNode:Ih,normalizeVNode:Xl,getComponentPublicInstance:Tm,ensureValidVNode:E_,pushWarningContext:E8,popWarningContext:P8},fN=dN,pN=null,gN=null,mN=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let J2;const Gx=typeof window<"u"&&window.trustedTypes;if(Gx)try{J2=Gx.createPolicy("vue",{createHTML:t=>t})}catch{}const oC=J2?t=>J2.createHTML(t):t=>t,vN="http://www.w3.org/2000/svg",yN="http://www.w3.org/1998/Math/MathML",Lh=typeof document<"u"?document:null,qx=Lh&&Lh.createElement("template"),bN={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Lh.createElementNS(vN,t):e==="mathml"?Lh.createElementNS(yN,t):n?Lh.createElement(t,{is:n}):Lh.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Lh.createTextNode(t),createComment:t=>Lh.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Lh.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{qx.innerHTML=oC(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=qx.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Kh="transition",Jp="animation",Ep=Symbol("_vtc"),aC={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},lC=Ls({},w_,aC),_N=t=>(t.displayName="Transition",t.props=lC,t),Q2=_N((t,{slots:e})=>ky(cS,uC(t),e)),Hd=(t,e=[])=>{lr(t)?t.forEach(n=>n(...e)):t&&t(...e)},Yx=t=>t?lr(t)?t.some(e=>e.length>1):t.length>1:!1;function uC(t){const e={};for(const N in t)N in aC||(e[N]=t[N]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:d=a,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:v=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,x=wN(i),E=x&&x[0],k=x&&x[1],{onBeforeEnter:A,onEnter:D,onEnterCancelled:V,onLeave:Y,onLeaveCancelled:te,onBeforeAppear:ge=A,onAppear:fe=D,onAppearCancelled:I=V}=e,F=(N,j,z,U)=>{N._enterCancelled=U,td(N,j?d:a),td(N,j?c:o),z&&z()},K=(N,j)=>{N._isLeaving=!1,td(N,p),td(N,m),td(N,v),j&&j()},B=N=>(j,z)=>{const U=N?fe:D,$=()=>F(j,N,z);Hd(U,[j,$]),Kx(()=>{td(j,N?l:s),Fc(j,N?d:a),Yx(U)||Zx(j,r,E,$)})};return Ls(e,{onBeforeEnter(N){Hd(A,[N]),Fc(N,s),Fc(N,o)},onBeforeAppear(N){Hd(ge,[N]),Fc(N,l),Fc(N,c)},onEnter:B(!1),onAppear:B(!0),onLeave(N,j){N._isLeaving=!0;const z=()=>K(N,j);Fc(N,p),N._enterCancelled?(Fc(N,v),eb()):(eb(),Fc(N,v)),Kx(()=>{N._isLeaving&&(td(N,p),Fc(N,m),Yx(Y)||Zx(N,r,k,z))}),Hd(Y,[N,z])},onEnterCancelled(N){F(N,!1,void 0,!0),Hd(V,[N])},onAppearCancelled(N){F(N,!0,void 0,!0),Hd(I,[N])},onLeaveCancelled(N){K(N),Hd(te,[N])}})}function wN(t){if(t==null)return null;if(gs(t))return[R1(t.enter),R1(t.leave)];{const e=R1(t);return[e,e]}}function R1(t){return Cv(t)}function Fc(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Ep]||(t[Ep]=new Set)).add(e)}function td(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Ep];n&&(n.delete(e),n.size||(t[Ep]=void 0))}function Kx(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let xN=0;function Zx(t,e,n,r){const i=t._endId=++xN,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=cC(t,e);if(!o)return r();const c=o+"end";let d=0;const p=()=>{t.removeEventListener(c,v),s()},v=m=>{m.target===t&&++d>=l&&p()};setTimeout(()=>{d<l&&p()},a+1),t.addEventListener(c,v)}function cC(t,e){const n=window.getComputedStyle(t),r=x=>(n[x]||"").split(", "),i=r(`${Kh}Delay`),s=r(`${Kh}Duration`),o=Xx(i,s),a=r(`${Jp}Delay`),l=r(`${Jp}Duration`),c=Xx(a,l);let d=null,p=0,v=0;e===Kh?o>0&&(d=Kh,p=o,v=s.length):e===Jp?c>0&&(d=Jp,p=c,v=l.length):(p=Math.max(o,c),d=p>0?o>c?Kh:Jp:null,v=d?d===Kh?s.length:l.length:0);const m=d===Kh&&/\b(transform|all)(,|$)/.test(r(`${Kh}Property`).toString());return{type:d,timeout:p,propCount:v,hasTransform:m}}function Xx(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Jx(n)+Jx(t[r])))}function Jx(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function eb(){return document.body.offsetHeight}function LN(t,e,n){const r=t[Ep];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Iv=Symbol("_vod"),hC=Symbol("_vsh"),Ay={beforeMount(t,{value:e},{transition:n}){t[Iv]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Qp(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Qp(t,!0),r.enter(t)):r.leave(t,()=>{Qp(t,!1)}):Qp(t,e))},beforeUnmount(t,{value:e}){Qp(t,e)}};function Qp(t,e){t.style.display=e?t[Iv]:"none",t[hC]=!e}function SN(){Ay.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const dC=Symbol("");function CN(t){const e=Ju();if(!e)return;const n=e.ut=(i=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>Bv(s,i))},r=()=>{const i=t(e.proxy);e.ce?Bv(e.ce,i):tb(e.subTree,i),n(i)};L_(()=>{am(r)}),go(()=>{Di(r,qu,{flush:"post"});const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),Zu(()=>i.disconnect())})}function tb(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{tb(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)Bv(t.el,e);else if(t.type===Mn)t.children.forEach(n=>tb(n,e));else if(t.type===df){let{el:n,anchor:r}=t;for(;n&&(Bv(n,e),n!==r);)n=n.nextSibling}}function Bv(t,e){if(t.nodeType===1){const n=t.style;let r="";for(const i in e)n.setProperty(`--${i}`,e[i]),r+=`--${i}: ${e[i]};`;n[dC]=r}}const EN=/(^|;)\s*display\s*:/;function PN(t,e,n){const r=t.style,i=Ds(n);let s=!1;if(n&&!i){if(e)if(Ds(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&J0(r,a,"")}else for(const o in e)n[o]==null&&J0(r,o,"");for(const o in n)o==="display"&&(s=!0),J0(r,o,n[o])}else if(i){if(e!==n){const o=r[dC];o&&(n+=";"+o),r.cssText=n,s=EN.test(n)}}else e&&t.removeAttribute("style");Iv in t&&(t[Iv]=s?r.display:"",t[hC]&&(r.display="none"))}const Qx=/\s*!important$/;function J0(t,e,n){if(lr(n))n.forEach(r=>J0(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=MN(t,e);Qx.test(n)?t.setProperty(Jl(r),n.replace(Qx,""),"important"):t[r]=n}}const e4=["Webkit","Moz","ms"],F1={};function MN(t,e){const n=F1[e];if(n)return n;let r=Ua(e);if(r!=="filter"&&r in t)return F1[e]=r;r=Mm(r);for(let i=0;i<e4.length;i++){const s=e4[i]+r;if(s in t)return F1[e]=s}return e}const t4="http://www.w3.org/1999/xlink";function n4(t,e,n,r,i,s=VD(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(t4,e.slice(6,e.length)):t.setAttributeNS(t4,e,n):n==null||s&&!kL(n)?t.removeAttribute(e):t.setAttribute(e,s?"":xc(n)?String(n):n)}function r4(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?oC(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=kL(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function Ph(t,e,n,r){t.addEventListener(e,n,r)}function kN(t,e,n,r){t.removeEventListener(e,n,r)}const i4=Symbol("_vei");function AN(t,e,n,r,i=null){const s=t[i4]||(t[i4]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=TN(e);if(r){const c=s[e]=NN(r,i);Ph(t,a,c,l)}else o&&(kN(t,a,o,l),s[e]=void 0)}}const s4=/(?:Once|Passive|Capture)$/;function TN(t){let e;if(s4.test(t)){e={};let r;for(;r=t.match(s4);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Jl(t.slice(2)),e]}let j1=0;const DN=Promise.resolve(),ON=()=>j1||(DN.then(()=>j1=0),j1=Date.now());function NN(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ku(IN(r,n.value),e,5,[r])};return n.value=t,n.attached=ON(),n}function IN(t,e){if(lr(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const o4=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,BN=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?LN(t,r,o):e==="style"?PN(t,n,r):Pm(e)?o_(e)||AN(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):RN(t,e,r,o))?(r4(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&n4(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ds(r))?r4(t,Ua(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),n4(t,e,r,o))};function RN(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&o4(e)&&Or(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return o4(e)&&Ds(n)?!1:e in t}const a4={};/*! #__NO_SIDE_EFFECTS__ */function fC(t,e,n){const r=js(t,e);fy(r)&&Ls(r,e);class i extends Ty{constructor(o){super(r,o,n)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const FN=(t,e)=>fC(t,e,LC),jN=typeof HTMLElement<"u"?HTMLElement:class{};class Ty extends jN{constructor(e,n={},r=Fv){super(),this._def=e,this._props=n,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==Fv?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof Ty){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,ca(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=r;let a;if(s&&!lr(s))for(const l in s){const c=s[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=Cv(this._props[l])),(a||(a=Object.create(null)))[Ua(l)]=!0)}this._numberProps=a,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(r=>e(this._def=r,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const r in n)ns(this,r)||Object.defineProperty(this,r,{get:()=>er(n[r])})}_resolveProps(e){const{props:n}=e,r=lr(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(Ua))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const n=this.hasAttribute(e);let r=n?this.getAttribute(e):a4;const i=Ua(e);n&&this._numberProps&&this._numberProps[i]&&(r=Cv(r)),this._setProp(i,r,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,n,r=!0,i=!1){if(n!==this._props[e]&&(n===a4?delete this._props[e]:(this._props[e]=n,e==="key"&&this._app&&(this._app._ceVNode.key=n)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),n===!0?this.setAttribute(Jl(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Jl(e),n+""):n||this.removeAttribute(Jl(e)),s&&s.observe(this,{attributes:!0})}}_update(){xC(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const n=yi(this._def,Ls(e,this._props));return this._instance||(n.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,fy(o[0])?Ls({detail:o},o[0]):{detail:o}))};r.emit=(s,...o)=>{i(s,o),Jl(s)!==s&&i(Jl(s),o)},this._setParent()}),n}_applyStyles(e,n){if(!e)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const r=this._nonce;for(let i=e.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=e[i],this.shadowRoot.prepend(s)}}_parseSlots(){const e=this._slots={};let n;for(;n=this.firstChild;){const r=n.nodeType===1&&n.getAttribute("slot")||"default";(e[r]||(e[r]=[])).push(n),this.removeChild(n)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),n=this._instance.type.__scopeId;for(let r=0;r<e.length;r++){const i=e[r],s=i.getAttribute("name")||"default",o=this._slots[s],a=i.parentNode;if(o)for(const l of o){if(n&&l.nodeType===1){const c=n+"-s",d=document.createTreeWalker(l,1);l.setAttribute(c,"");let p;for(;p=d.nextNode();)p.setAttribute(c,"")}a.insertBefore(l,i)}else for(;i.firstChild;)a.insertBefore(i.firstChild,i);a.removeChild(i)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function pC(t){const e=Ju(),n=e&&e.ce;return n||null}function zN(){const t=pC();return t&&t.shadowRoot}function $N(t="$style"){{const e=Ju();if(!e)return ji;const n=e.type.__cssModules;if(!n)return ji;const r=n[t];return r||ji}}const gC=new WeakMap,mC=new WeakMap,Rv=Symbol("_moveCb"),l4=Symbol("_enterCb"),VN=t=>(delete t.props.mode,t),UN=VN({name:"TransitionGroup",props:Ls({},lC,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Ju(),r=__();let i,s;return Ey(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!YN(i[0].el,n.vnode.el,o))return;i.forEach(WN),i.forEach(GN);const a=i.filter(qN);eb(),a.forEach(l=>{const c=l.el,d=c.style;Fc(c,o),d.transform=d.webkitTransform=d.transitionDuration="";const p=c[Rv]=v=>{v&&v.target!==c||(!v||/transform$/.test(v.propertyName))&&(c.removeEventListener("transitionend",p),c[Rv]=null,td(c,o))};c.addEventListener("transitionend",p)})}),()=>{const o=Fi(t),a=uC(o);let l=o.tag||Mn;if(i=[],s)for(let c=0;c<s.length;c++){const d=s[c];d.el&&d.el instanceof Element&&(i.push(d),Nh(d,Sp(d,a,r,n)),gC.set(d,d.el.getBoundingClientRect()))}s=e.default?Sy(e.default()):[];for(let c=0;c<s.length;c++){const d=s[c];d.key!=null&&Nh(d,Sp(d,a,r,n))}return yi(l,null,s)}}}),HN=UN;function WN(t){const e=t.el;e[Rv]&&e[Rv](),e[l4]&&e[l4]()}function GN(t){mC.set(t,t.el.getBoundingClientRect())}function qN(t){const e=gC.get(t),n=mC.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function YN(t,e,n){const r=t.cloneNode(),i=t[Ep];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=cC(r);return s.removeChild(r),o}const Ld=t=>{const e=t.props["onUpdate:modelValue"]||!1;return lr(e)?n=>mp(e,n):e};function KN(t){t.target.composing=!0}function u4(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Yu=Symbol("_assign"),Fr={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Yu]=Ld(i);const s=r||i.props&&i.props.type==="number";Ph(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=Sv(a)),t[Yu](a)}),n&&Ph(t,"change",()=>{t.value=t.value.trim()}),e||(Ph(t,"compositionstart",KN),Ph(t,"compositionend",u4),Ph(t,"change",u4))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(t[Yu]=Ld(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?Sv(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===l)||(t.value=l))}},Ml={deep:!0,created(t,e,n){t[Yu]=Ld(n),Ph(t,"change",()=>{const r=t._modelValue,i=Pp(t),s=t.checked,o=t[Yu];if(lr(r)){const a=my(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(Sf(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(vC(t,s))})},mounted:c4,beforeUpdate(t,e,n){t[Yu]=Ld(n),c4(t,e,n)}};function c4(t,{value:e,oldValue:n},r){t._modelValue=e;let i;if(lr(e))i=my(e,r.props.value)>-1;else if(Sf(e))i=e.has(r.props.value);else{if(e===n)return;i=wd(e,vC(t,!0))}t.checked!==i&&(t.checked=i)}const T_={created(t,{value:e},n){t.checked=wd(e,n.props.value),t[Yu]=Ld(n),Ph(t,"change",()=>{t[Yu](Pp(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Yu]=Ld(r),e!==n&&(t.checked=wd(e,r.props.value))}},rs={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=Sf(e);Ph(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Sv(Pp(o)):Pp(o));t[Yu](t.multiple?i?new Set(s):s:s[0]),t._assigning=!0,ca(()=>{t._assigning=!1})}),t[Yu]=Ld(r)},mounted(t,{value:e}){h4(t,e)},beforeUpdate(t,e,n){t[Yu]=Ld(n)},updated(t,{value:e}){t._assigning||h4(t,e)}};function h4(t,e){const n=t.multiple,r=lr(e);if(!(n&&!r&&!Sf(e))){for(let i=0,s=t.options.length;i<s;i++){const o=t.options[i],a=Pp(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=my(e,a)>-1}else o.selected=e.has(a);else if(wd(Pp(o),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Pp(t){return"_value"in t?t._value:t.value}function vC(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const D_={created(t,e,n){y0(t,e,n,null,"created")},mounted(t,e,n){y0(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){y0(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){y0(t,e,n,r,"updated")}};function yC(t,e){switch(t){case"SELECT":return rs;case"TEXTAREA":return Fr;default:switch(e){case"checkbox":return Ml;case"radio":return T_;default:return Fr}}}function y0(t,e,n,r,i){const o=yC(t.tagName,n.props&&n.props.type)[i];o&&o(t,e,n,r)}function ZN(){Fr.getSSRProps=({value:t})=>({value:t}),T_.getSSRProps=({value:t},e)=>{if(e.props&&wd(e.props.value,t))return{checked:!0}},Ml.getSSRProps=({value:t},e)=>{if(lr(t)){if(e.props&&my(t,e.props.value)>-1)return{checked:!0}}else if(Sf(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},D_.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=yC(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const XN=["ctrl","shift","alt","meta"],JN={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>XN.some(n=>t[`${n}Key`]&&!e.includes(n))},Bh=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=JN[e[o]];if(a&&a(i,e))return}return t(i,...s)})},QN={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},eI=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=Jl(i.key);if(e.some(o=>o===s||QN[o]===s))return t(i)})},bC=Ls({patchProp:BN},bN);let $g,d4=!1;function _C(){return $g||($g=IS(bC))}function wC(){return $g=d4?$g:BS(bC),d4=!0,$g}const xC=(...t)=>{_C().render(...t)},tI=(...t)=>{wC().hydrate(...t)},Fv=(...t)=>{const e=_C().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=CC(r);if(!i)return;const s=e._component;!Or(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,SC(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e},LC=(...t)=>{const e=wC().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=CC(r);if(i)return n(i,!0,SC(i))},e};function SC(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function CC(t){return Ds(t)?document.querySelector(t):t}let f4=!1;const nI=()=>{f4||(f4=!0,ZN(),SN())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const rI=()=>{},iI=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:cS,BaseTransitionPropsValidators:w_,Comment:ra,DeprecationTypes:mN,EffectScope:c_,ErrorCodes:k8,ErrorTypeStrings:uN,Fragment:Mn,KeepAlive:eO,ReactiveEffect:im,Static:df,Suspense:WO,Teleport:j2,Text:yd,TrackOpTypes:x8,Transition:Q2,TransitionGroup:HN,TriggerOpTypes:L8,VueElement:Ty,assertNumber:M8,callWithAsyncErrorHandling:Ku,callWithErrorHandling:Fp,camelize:Ua,capitalize:Mm,cloneVNode:eh,compatUtils:gN,compile:rI,computed:Jn,createApp:Fv,createBlock:Va,createCommentVNode:en,createElementBlock:je,createElementVNode:C,createHydrationRenderer:BS,createPropsRestProxy:_O,createRenderer:IS,createSSRApp:LC,createSlots:sO,createStaticVNode:eu,createTextVNode:ui,createVNode:yi,customRef:KL,defineAsyncComponent:J8,defineComponent:js,defineCustomElement:fC,defineEmits:cO,defineExpose:hO,defineModel:pO,defineOptions:dO,defineProps:uO,defineSSRCustomElement:FN,defineSlots:fO,devtools:cN,effect:WD,effectScope:h_,getCurrentInstance:Ju,getCurrentScope:d_,getCurrentWatcher:S8,getTransitionRawChildren:Sy,guardReactiveProps:XS,h:ky,handleError:Cf,hasInjectionContext:CS,hydrate:tI,hydrateOnIdle:G8,hydrateOnInteraction:Z8,hydrateOnMediaQuery:K8,hydrateOnVisible:Y8,initCustomFormatter:oN,initDirectivesForSSR:nI,inject:Eu,isMemoSame:iC,isProxy:wy,isReactive:Zc,isReadonly:xd,isRef:po,isRuntimeOnly:rN,isShallow:Cu,isVNode:Ih,markRaw:xy,mergeDefaults:yO,mergeModels:bO,mergeProps:JS,nextTick:ca,normalizeClass:Ti,normalizeProps:zD,normalizeStyle:tu,onActivated:dS,onBeforeMount:gS,onBeforeUnmount:Td,onBeforeUpdate:L_,onDeactivated:fS,onErrorCaptured:bS,onMounted:go,onRenderTracked:yS,onRenderTriggered:vS,onScopeDispose:DL,onServerPrefetch:mS,onUnmounted:Zu,onUpdated:Ey,onWatcherCleanup:JL,openBlock:Ie,popScopeId:N8,provide:jg,proxyRefs:y_,pushScopeId:O8,queuePostFlushCb:am,reactive:iu,readonly:pc,ref:Ct,registerRuntimeCompiler:nN,render:xC,renderList:gr,renderSlot:oO,resolveComponent:_S,resolveDirective:iO,resolveDynamicComponent:rO,resolveFilter:pN,resolveTransitionHooks:Sp,setBlockTracking:G2,setDevtoolsHook:hN,setTransitionHooks:Nh,shallowReactive:m_,shallowReadonly:h8,shallowRef:v_,ssrContextKey:zS,ssrUtils:fN,stop:GD,toDisplayString:Ot,toHandlerKey:Ng,toHandlers:aO,toRaw:Fi,toRef:b8,toRefs:ZL,toValue:p8,transformVNodeArgs:XO,triggerRef:f8,unref:er,useAttrs:vO,useCssModule:$N,useCssVars:CN,useHost:pC,useId:F8,useModel:FO,useSSRContext:$S,useShadowRoot:zN,useSlots:mO,useTemplateRef:j8,useTransitionState:__,vModelCheckbox:Ml,vModelDynamic:D_,vModelRadio:T_,vModelSelect:rs,vModelText:Fr,vShow:Ay,version:sC,warn:lN,watch:Di,watchEffect:dm,watchPostEffect:BO,watchSyncEffect:VS,withAsyncContext:wO,withCtx:Gu,withDefaults:gO,withDirectives:On,withKeys:eI,withMemo:aN,withModifiers:Bh,withScopeId:I8},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let EC;const Dy=t=>EC=t,PC=Symbol();function nb(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Vg;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Vg||(Vg={}));function sI(){const t=h_(!0),e=t.run(()=>Ct({}));let n=[],r=[];const i=xy({install(s){Dy(i),i._a=s,s.provide(PC,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const MC=()=>{};function p4(t,e,n,r=MC){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&d_()&&DL(i),i}function Yf(t,...e){t.slice().forEach(n=>{n(...e)})}const oI=t=>t(),g4=Symbol(),z1=Symbol();function rb(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];nb(i)&&nb(r)&&t.hasOwnProperty(n)&&!po(r)&&!Zc(r)?t[n]=rb(i,r):t[n]=r}return t}const aI=Symbol();function lI(t){return!nb(t)||!t.hasOwnProperty(aI)}const{assign:nd}=Object;function uI(t){return!!(po(t)&&t.effect)}function cI(t,e,n,r){const{state:i,actions:s,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=i?i():{});const d=ZL(n.state.value[t]);return nd(d,s,Object.keys(o||{}).reduce((p,v)=>(p[v]=xy(Jn(()=>{Dy(n);const m=n._s.get(t);return o[v].call(m,m)})),p),{}))}return l=kC(t,c,e,n,r,!0),l}function kC(t,e,n={},r,i,s){let o;const a=nd({actions:{}},n),l={deep:!0};let c,d,p=[],v=[],m;const x=r.state.value[t];!s&&!x&&(r.state.value[t]={}),Ct({});let E;function k(I){let F;c=d=!1,typeof I=="function"?(I(r.state.value[t]),F={type:Vg.patchFunction,storeId:t,events:m}):(rb(r.state.value[t],I),F={type:Vg.patchObject,payload:I,storeId:t,events:m});const K=E=Symbol();ca().then(()=>{E===K&&(c=!0)}),d=!0,Yf(p,F,r.state.value[t])}const A=s?function(){const{state:F}=n,K=F?F():{};this.$patch(B=>{nd(B,K)})}:MC;function D(){o.stop(),p=[],v=[],r._s.delete(t)}const V=(I,F="")=>{if(g4 in I)return I[z1]=F,I;const K=function(){Dy(r);const B=Array.from(arguments),N=[],j=[];function z(re){N.push(re)}function U(re){j.push(re)}Yf(v,{args:B,name:K[z1],store:te,after:z,onError:U});let $;try{$=I.apply(this&&this.$id===t?this:te,B)}catch(re){throw Yf(j,re),re}return $ instanceof Promise?$.then(re=>(Yf(N,re),re)).catch(re=>(Yf(j,re),Promise.reject(re))):(Yf(N,$),$)};return K[g4]=!0,K[z1]=F,K},Y={_p:r,$id:t,$onAction:p4.bind(null,v),$patch:k,$reset:A,$subscribe(I,F={}){const K=p4(p,I,F.detached,()=>B()),B=o.run(()=>Di(()=>r.state.value[t],N=>{(F.flush==="sync"?d:c)&&I({storeId:t,type:Vg.direct,events:m},N)},nd({},l,F)));return K},$dispose:D},te=iu(Y);r._s.set(t,te);const fe=(r._a&&r._a.runWithContext||oI)(()=>r._e.run(()=>(o=h_()).run(()=>e({action:V}))));for(const I in fe){const F=fe[I];if(po(F)&&!uI(F)||Zc(F))s||(x&&lI(F)&&(po(F)?F.value=x[I]:rb(F,x[I])),r.state.value[t][I]=F);else if(typeof F=="function"){const K=V(F,I);fe[I]=K,a.actions[I]=F}}return nd(te,fe),nd(Fi(te),fe),Object.defineProperty(te,"$state",{get:()=>r.state.value[t],set:I=>{k(F=>{nd(F,I)})}}),r._p.forEach(I=>{nd(te,o.run(()=>I({store:te,app:r._a,pinia:r,options:a})))}),x&&s&&n.hydrate&&n.hydrate(te.$state,x),c=!0,d=!0,te}/*! #__NO_SIDE_EFFECTS__ */function jp(t,e,n){let r,i;const s=typeof e=="function";typeof t=="string"?(r=t,i=s?n:e):(i=t,r=t.id);function o(a,l){const c=CS();return a=a||(c?Eu(PC,null):null),a&&Dy(a),a=EC,a._s.has(r)||(s?kC(r,e,i,a):cI(r,i,a)),a._s.get(r)}return o.$id=r,o}function AC(t,e){return function(){return t.apply(e,arguments)}}const{toString:hI}=Object.prototype,{getPrototypeOf:O_}=Object,Oy=(t=>e=>{const n=hI.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Cc=t=>(t=t.toLowerCase(),e=>Oy(e)===t),Ny=t=>e=>typeof e===t,{isArray:zp}=Array,pm=Ny("undefined");function dI(t){return t!==null&&!pm(t)&&t.constructor!==null&&!pm(t.constructor)&&Pu(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const TC=Cc("ArrayBuffer");function fI(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&TC(t.buffer),e}const pI=Ny("string"),Pu=Ny("function"),DC=Ny("number"),Iy=t=>t!==null&&typeof t=="object",gI=t=>t===!0||t===!1,Q0=t=>{if(Oy(t)!=="object")return!1;const e=O_(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},mI=Cc("Date"),vI=Cc("File"),yI=Cc("Blob"),bI=Cc("FileList"),_I=t=>Iy(t)&&Pu(t.pipe),wI=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Pu(t.append)&&((e=Oy(t))==="formdata"||e==="object"&&Pu(t.toString)&&t.toString()==="[object FormData]"))},xI=Cc("URLSearchParams"),[LI,SI,CI,EI]=["ReadableStream","Request","Response","Headers"].map(Cc),PI=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Dm(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),zp(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function OC(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const af=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,NC=t=>!pm(t)&&t!==af;function ib(){const{caseless:t}=NC(this)&&this||{},e={},n=(r,i)=>{const s=t&&OC(e,i)||i;Q0(e[s])&&Q0(r)?e[s]=ib(e[s],r):Q0(r)?e[s]=ib({},r):zp(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Dm(arguments[r],n);return e}const MI=(t,e,n,{allOwnKeys:r}={})=>(Dm(e,(i,s)=>{n&&Pu(i)?t[s]=AC(i,n):t[s]=i},{allOwnKeys:r}),t),kI=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),AI=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},TI=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&O_(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},DI=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},OI=t=>{if(!t)return null;if(zp(t))return t;let e=t.length;if(!DC(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},NI=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&O_(Uint8Array)),II=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},BI=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},RI=Cc("HTMLFormElement"),FI=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),m4=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),jI=Cc("RegExp"),IC=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Dm(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},zI=t=>{IC(t,(e,n)=>{if(Pu(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Pu(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},$I=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return zp(t)?r(t):r(String(t).split(e)),n},VI=()=>{},UI=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function HI(t){return!!(t&&Pu(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const WI=t=>{const e=new Array(10),n=(r,i)=>{if(Iy(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=zp(r)?[]:{};return Dm(r,(o,a)=>{const l=n(o,i+1);!pm(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},GI=Cc("AsyncFunction"),qI=t=>t&&(Iy(t)||Pu(t))&&Pu(t.then)&&Pu(t.catch),BC=((t,e)=>t?setImmediate:e?((n,r)=>(af.addEventListener("message",({source:i,data:s})=>{i===af&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),af.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Pu(af.postMessage)),YI=typeof queueMicrotask<"u"?queueMicrotask.bind(af):typeof process<"u"&&process.nextTick||BC,Zt={isArray:zp,isArrayBuffer:TC,isBuffer:dI,isFormData:wI,isArrayBufferView:fI,isString:pI,isNumber:DC,isBoolean:gI,isObject:Iy,isPlainObject:Q0,isReadableStream:LI,isRequest:SI,isResponse:CI,isHeaders:EI,isUndefined:pm,isDate:mI,isFile:vI,isBlob:yI,isRegExp:jI,isFunction:Pu,isStream:_I,isURLSearchParams:xI,isTypedArray:NI,isFileList:bI,forEach:Dm,merge:ib,extend:MI,trim:PI,stripBOM:kI,inherits:AI,toFlatObject:TI,kindOf:Oy,kindOfTest:Cc,endsWith:DI,toArray:OI,forEachEntry:II,matchAll:BI,isHTMLForm:RI,hasOwnProperty:m4,hasOwnProp:m4,reduceDescriptors:IC,freezeMethods:zI,toObjectSet:$I,toCamelCase:FI,noop:VI,toFiniteNumber:UI,findKey:OC,global:af,isContextDefined:NC,isSpecCompliantForm:HI,toJSONObject:WI,isAsyncFn:GI,isThenable:qI,setImmediate:BC,asap:YI};function li(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Zt.inherits(li,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Zt.toJSONObject(this.config),code:this.code,status:this.status}}});const RC=li.prototype,FC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{FC[t]={value:t}});Object.defineProperties(li,FC);Object.defineProperty(RC,"isAxiosError",{value:!0});li.from=(t,e,n,r,i,s)=>{const o=Object.create(RC);return Zt.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),li.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const KI=null;function sb(t){return Zt.isPlainObject(t)||Zt.isArray(t)}function jC(t){return Zt.endsWith(t,"[]")?t.slice(0,-2):t}function v4(t,e,n){return t?t.concat(e).map(function(i,s){return i=jC(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function ZI(t){return Zt.isArray(t)&&!t.some(sb)}const XI=Zt.toFlatObject(Zt,{},null,function(e){return/^is[A-Z]/.test(e)});function By(t,e,n){if(!Zt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Zt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,k){return!Zt.isUndefined(k[E])});const r=n.metaTokens,i=n.visitor||d,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Zt.isSpecCompliantForm(e);if(!Zt.isFunction(i))throw new TypeError("visitor must be a function");function c(x){if(x===null)return"";if(Zt.isDate(x))return x.toISOString();if(!l&&Zt.isBlob(x))throw new li("Blob is not supported. Use a Buffer instead.");return Zt.isArrayBuffer(x)||Zt.isTypedArray(x)?l&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function d(x,E,k){let A=x;if(x&&!k&&typeof x=="object"){if(Zt.endsWith(E,"{}"))E=r?E:E.slice(0,-2),x=JSON.stringify(x);else if(Zt.isArray(x)&&ZI(x)||(Zt.isFileList(x)||Zt.endsWith(E,"[]"))&&(A=Zt.toArray(x)))return E=jC(E),A.forEach(function(V,Y){!(Zt.isUndefined(V)||V===null)&&e.append(o===!0?v4([E],Y,s):o===null?E:E+"[]",c(V))}),!1}return sb(x)?!0:(e.append(v4(k,E,s),c(x)),!1)}const p=[],v=Object.assign(XI,{defaultVisitor:d,convertValue:c,isVisitable:sb});function m(x,E){if(!Zt.isUndefined(x)){if(p.indexOf(x)!==-1)throw Error("Circular reference detected in "+E.join("."));p.push(x),Zt.forEach(x,function(A,D){(!(Zt.isUndefined(A)||A===null)&&i.call(e,A,Zt.isString(D)?D.trim():D,E,v))===!0&&m(A,E?E.concat(D):[D])}),p.pop()}}if(!Zt.isObject(t))throw new TypeError("data must be an object");return m(t),e}function y4(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function N_(t,e){this._pairs=[],t&&By(t,this,e)}const zC=N_.prototype;zC.append=function(e,n){this._pairs.push([e,n])};zC.toString=function(e){const n=e?function(r){return e.call(this,r,y4)}:y4;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function JI(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function $C(t,e,n){if(!e)return t;const r=n&&n.encode||JI;Zt.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Zt.isURLSearchParams(e)?e.toString():new N_(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class b4{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Zt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const VC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},QI=typeof URLSearchParams<"u"?URLSearchParams:N_,e7=typeof FormData<"u"?FormData:null,t7=typeof Blob<"u"?Blob:null,n7={isBrowser:!0,classes:{URLSearchParams:QI,FormData:e7,Blob:t7},protocols:["http","https","file","blob","url","data"]},I_=typeof window<"u"&&typeof document<"u",ob=typeof navigator=="object"&&navigator||void 0,r7=I_&&(!ob||["ReactNative","NativeScript","NS"].indexOf(ob.product)<0),i7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",s7=I_&&window.location.href||"http://localhost",o7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:I_,hasStandardBrowserEnv:r7,hasStandardBrowserWebWorkerEnv:i7,navigator:ob,origin:s7},Symbol.toStringTag,{value:"Module"})),cl={...o7,...n7};function a7(t,e){return By(t,new cl.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return cl.isNode&&Zt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function l7(t){return Zt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function u7(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function UC(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&Zt.isArray(i)?i.length:o,l?(Zt.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Zt.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Zt.isArray(i[o])&&(i[o]=u7(i[o])),!a)}if(Zt.isFormData(t)&&Zt.isFunction(t.entries)){const n={};return Zt.forEachEntry(t,(r,i)=>{e(l7(r),i,n,0)}),n}return null}function c7(t,e,n){if(Zt.isString(t))try{return(e||JSON.parse)(t),Zt.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Om={transitional:VC,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Zt.isObject(e);if(s&&Zt.isHTMLForm(e)&&(e=new FormData(e)),Zt.isFormData(e))return i?JSON.stringify(UC(e)):e;if(Zt.isArrayBuffer(e)||Zt.isBuffer(e)||Zt.isStream(e)||Zt.isFile(e)||Zt.isBlob(e)||Zt.isReadableStream(e))return e;if(Zt.isArrayBufferView(e))return e.buffer;if(Zt.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return a7(e,this.formSerializer).toString();if((a=Zt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return By(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),c7(e)):e}],transformResponse:[function(e){const n=this.transitional||Om.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Zt.isResponse(e)||Zt.isReadableStream(e))return e;if(e&&Zt.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?li.from(a,li.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:cl.classes.FormData,Blob:cl.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Zt.forEach(["delete","get","head","post","put","patch"],t=>{Om.headers[t]={}});const h7=Zt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),d7=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&h7[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},_4=Symbol("internals");function eg(t){return t&&String(t).trim().toLowerCase()}function ev(t){return t===!1||t==null?t:Zt.isArray(t)?t.map(ev):String(t)}function f7(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const p7=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function $1(t,e,n,r,i){if(Zt.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Zt.isString(e)){if(Zt.isString(r))return e.indexOf(r)!==-1;if(Zt.isRegExp(r))return r.test(e)}}function g7(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function m7(t,e){const n=Zt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let nu=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const d=eg(l);if(!d)throw new Error("header name must be a non-empty string");const p=Zt.findKey(i,d);(!p||i[p]===void 0||c===!0||c===void 0&&i[p]!==!1)&&(i[p||l]=ev(a))}const o=(a,l)=>Zt.forEach(a,(c,d)=>s(c,d,l));if(Zt.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Zt.isString(e)&&(e=e.trim())&&!p7(e))o(d7(e),n);else if(Zt.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=eg(e),e){const r=Zt.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return f7(i);if(Zt.isFunction(n))return n.call(this,i,r);if(Zt.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=eg(e),e){const r=Zt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||$1(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=eg(o),o){const a=Zt.findKey(r,o);a&&(!n||$1(r,r[a],a,n))&&(delete r[a],i=!0)}}return Zt.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||$1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Zt.forEach(this,(i,s)=>{const o=Zt.findKey(r,s);if(o){n[o]=ev(i),delete n[s];return}const a=e?g7(s):String(s).trim();a!==s&&delete n[s],n[a]=ev(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Zt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Zt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[_4]=this[_4]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=eg(o);r[a]||(m7(i,o),r[a]=!0)}return Zt.isArray(e)?e.forEach(s):s(e),this}};nu.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Zt.reduceDescriptors(nu.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Zt.freezeMethods(nu);function V1(t,e){const n=this||Om,r=e||n,i=nu.from(r.headers);let s=r.data;return Zt.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function HC(t){return!!(t&&t.__CANCEL__)}function $p(t,e,n){li.call(this,t??"canceled",li.ERR_CANCELED,e,n),this.name="CanceledError"}Zt.inherits($p,li,{__CANCEL__:!0});function WC(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new li("Request failed with status code "+n.status,[li.ERR_BAD_REQUEST,li.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function v7(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function y7(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[s];o||(o=c),n[i]=l,r[i]=c;let p=s,v=0;for(;p!==i;)v+=n[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const m=d&&c-d;return m?Math.round(v*1e3/m):void 0}}function b7(t,e){let n=0,r=1e3/e,i,s;const o=(c,d=Date.now())=>{n=d,i=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const d=Date.now(),p=d-n;p>=r?o(c,d):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-p)))},()=>i&&o(i)]}const jv=(t,e,n=3)=>{let r=0;const i=y7(50,250);return b7(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),d=o<=a;r=o;const p={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&d?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(p)},n)},w4=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},x4=t=>(...e)=>Zt.asap(()=>t(...e)),_7=cl.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,cl.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(cl.origin),cl.navigator&&/(msie|trident)/i.test(cl.navigator.userAgent)):()=>!0,w7=cl.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Zt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Zt.isString(r)&&o.push("path="+r),Zt.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function x7(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function L7(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function GC(t,e,n){let r=!x7(e);return t&&(r||n==!1)?L7(t,e):e}const L4=t=>t instanceof nu?{...t}:t;function _f(t,e){e=e||{};const n={};function r(c,d,p,v){return Zt.isPlainObject(c)&&Zt.isPlainObject(d)?Zt.merge.call({caseless:v},c,d):Zt.isPlainObject(d)?Zt.merge({},d):Zt.isArray(d)?d.slice():d}function i(c,d,p,v){if(Zt.isUndefined(d)){if(!Zt.isUndefined(c))return r(void 0,c,p,v)}else return r(c,d,p,v)}function s(c,d){if(!Zt.isUndefined(d))return r(void 0,d)}function o(c,d){if(Zt.isUndefined(d)){if(!Zt.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,p){if(p in e)return r(c,d);if(p in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d,p)=>i(L4(c),L4(d),p,!0)};return Zt.forEach(Object.keys(Object.assign({},t,e)),function(d){const p=l[d]||i,v=p(t[d],e[d],d);Zt.isUndefined(v)&&p!==a||(n[d]=v)}),n}const qC=t=>{const e=_f({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=nu.from(o),e.url=$C(GC(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Zt.isFormData(n)){if(cl.hasStandardBrowserEnv||cl.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...d]=l?l.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...d].join("; "))}}if(cl.hasStandardBrowserEnv&&(r&&Zt.isFunction(r)&&(r=r(e)),r||r!==!1&&_7(e.url))){const c=i&&s&&w7.read(s);c&&o.set(i,c)}return e},S7=typeof XMLHttpRequest<"u",C7=S7&&function(t){return new Promise(function(n,r){const i=qC(t);let s=i.data;const o=nu.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,d,p,v,m,x;function E(){m&&m(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let k=new XMLHttpRequest;k.open(i.method.toUpperCase(),i.url,!0),k.timeout=i.timeout;function A(){if(!k)return;const V=nu.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),te={data:!a||a==="text"||a==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:V,config:t,request:k};WC(function(fe){n(fe),E()},function(fe){r(fe),E()},te),k=null}"onloadend"in k?k.onloadend=A:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(A)},k.onabort=function(){k&&(r(new li("Request aborted",li.ECONNABORTED,t,k)),k=null)},k.onerror=function(){r(new li("Network Error",li.ERR_NETWORK,t,k)),k=null},k.ontimeout=function(){let Y=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const te=i.transitional||VC;i.timeoutErrorMessage&&(Y=i.timeoutErrorMessage),r(new li(Y,te.clarifyTimeoutError?li.ETIMEDOUT:li.ECONNABORTED,t,k)),k=null},s===void 0&&o.setContentType(null),"setRequestHeader"in k&&Zt.forEach(o.toJSON(),function(Y,te){k.setRequestHeader(te,Y)}),Zt.isUndefined(i.withCredentials)||(k.withCredentials=!!i.withCredentials),a&&a!=="json"&&(k.responseType=i.responseType),c&&([v,x]=jv(c,!0),k.addEventListener("progress",v)),l&&k.upload&&([p,m]=jv(l),k.upload.addEventListener("progress",p),k.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(d=V=>{k&&(r(!V||V.type?new $p(null,t,k):V),k.abort(),k=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const D=v7(i.url);if(D&&cl.protocols.indexOf(D)===-1){r(new li("Unsupported protocol "+D+":",li.ERR_BAD_REQUEST,t));return}k.send(s||null)})},E7=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const d=c instanceof Error?c:this.reason;r.abort(d instanceof li?d:new $p(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new li(`timeout ${e} of ms exceeded`,li.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>Zt.asap(a),l}},P7=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},M7=async function*(t,e){for await(const n of k7(t))yield*P7(n,e)},k7=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},S4=(t,e,n,r)=>{const i=M7(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await i.next();if(c){a(),l.close();return}let p=d.byteLength;if(n){let v=s+=p;n(v)}l.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},Ry=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",YC=Ry&&typeof ReadableStream=="function",A7=Ry&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),KC=(t,...e)=>{try{return!!t(...e)}catch{return!1}},T7=YC&&KC(()=>{let t=!1;const e=new Request(cl.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),C4=64*1024,ab=YC&&KC(()=>Zt.isReadableStream(new Response("").body)),zv={stream:ab&&(t=>t.body)};Ry&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!zv[e]&&(zv[e]=Zt.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new li(`Response type '${e}' is not supported`,li.ERR_NOT_SUPPORT,r)})})})(new Response);const D7=async t=>{if(t==null)return 0;if(Zt.isBlob(t))return t.size;if(Zt.isSpecCompliantForm(t))return(await new Request(cl.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Zt.isArrayBufferView(t)||Zt.isArrayBuffer(t))return t.byteLength;if(Zt.isURLSearchParams(t)&&(t=t+""),Zt.isString(t))return(await A7(t)).byteLength},O7=async(t,e)=>{const n=Zt.toFiniteNumber(t.getContentLength());return n??D7(e)},N7=Ry&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:d,withCredentials:p="same-origin",fetchOptions:v}=qC(t);c=c?(c+"").toLowerCase():"text";let m=E7([i,s&&s.toAbortSignal()],o),x;const E=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let k;try{if(l&&T7&&n!=="get"&&n!=="head"&&(k=await O7(d,r))!==0){let te=new Request(e,{method:"POST",body:r,duplex:"half"}),ge;if(Zt.isFormData(r)&&(ge=te.headers.get("content-type"))&&d.setContentType(ge),te.body){const[fe,I]=w4(k,jv(x4(l)));r=S4(te.body,C4,fe,I)}}Zt.isString(p)||(p=p?"include":"omit");const A="credentials"in Request.prototype;x=new Request(e,{...v,signal:m,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:A?p:void 0});let D=await fetch(x);const V=ab&&(c==="stream"||c==="response");if(ab&&(a||V&&E)){const te={};["status","statusText","headers"].forEach(F=>{te[F]=D[F]});const ge=Zt.toFiniteNumber(D.headers.get("content-length")),[fe,I]=a&&w4(ge,jv(x4(a),!0))||[];D=new Response(S4(D.body,C4,fe,()=>{I&&I(),E&&E()}),te)}c=c||"text";let Y=await zv[Zt.findKey(zv,c)||"text"](D,t);return!V&&E&&E(),await new Promise((te,ge)=>{WC(te,ge,{data:Y,headers:nu.from(D.headers),status:D.status,statusText:D.statusText,config:t,request:x})})}catch(A){throw E&&E(),A&&A.name==="TypeError"&&/fetch/i.test(A.message)?Object.assign(new li("Network Error",li.ERR_NETWORK,t,x),{cause:A.cause||A}):li.from(A,A&&A.code,t,x)}}),lb={http:KI,xhr:C7,fetch:N7};Zt.forEach(lb,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const E4=t=>`- ${t}`,I7=t=>Zt.isFunction(t)||t===null||t===!1,ZC={getAdapter:t=>{t=Zt.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!I7(n)&&(r=lb[(o=String(n)).toLowerCase()],r===void 0))throw new li(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(E4).join(`
`):" "+E4(s[0]):"as no adapter specified";throw new li("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:lb};function U1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new $p(null,t)}function P4(t){return U1(t),t.headers=nu.from(t.headers),t.data=V1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ZC.getAdapter(t.adapter||Om.adapter)(t).then(function(r){return U1(t),r.data=V1.call(t,t.transformResponse,r),r.headers=nu.from(r.headers),r},function(r){return HC(r)||(U1(t),r&&r.response&&(r.response.data=V1.call(t,t.transformResponse,r.response),r.response.headers=nu.from(r.response.headers))),Promise.reject(r)})}const XC="1.8.4",Fy={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Fy[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const M4={};Fy.transitional=function(e,n,r){function i(s,o){return"[Axios v"+XC+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new li(i(o," has been removed"+(n?" in "+n:"")),li.ERR_DEPRECATED);return n&&!M4[o]&&(M4[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};Fy.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function B7(t,e,n){if(typeof t!="object")throw new li("options must be an object",li.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new li("option "+s+" must be "+l,li.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new li("Unknown option "+s,li.ERR_BAD_OPTION)}}const tv={assertOptions:B7,validators:Fy},Bc=tv.validators;let ff=class{constructor(e){this.defaults=e,this.interceptors={request:new b4,response:new b4}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=_f(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&tv.assertOptions(r,{silentJSONParsing:Bc.transitional(Bc.boolean),forcedJSONParsing:Bc.transitional(Bc.boolean),clarifyTimeoutError:Bc.transitional(Bc.boolean)},!1),i!=null&&(Zt.isFunction(i)?n.paramsSerializer={serialize:i}:tv.assertOptions(i,{encode:Bc.function,serialize:Bc.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),tv.assertOptions(n,{baseUrl:Bc.spelling("baseURL"),withXsrfToken:Bc.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Zt.merge(s.common,s[n.method]);s&&Zt.forEach(["delete","get","head","post","put","patch","common"],x=>{delete s[x]}),n.headers=nu.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(l=l&&E.synchronous,a.unshift(E.fulfilled,E.rejected))});const c=[];this.interceptors.response.forEach(function(E){c.push(E.fulfilled,E.rejected)});let d,p=0,v;if(!l){const x=[P4.bind(this),void 0];for(x.unshift.apply(x,a),x.push.apply(x,c),v=x.length,d=Promise.resolve(n);p<v;)d=d.then(x[p++],x[p++]);return d}v=a.length;let m=n;for(p=0;p<v;){const x=a[p++],E=a[p++];try{m=x(m)}catch(k){E.call(this,k);break}}try{d=P4.call(this,m)}catch(x){return Promise.reject(x)}for(p=0,v=c.length;p<v;)d=d.then(c[p++],c[p++]);return d}getUri(e){e=_f(this.defaults,e);const n=GC(e.baseURL,e.url,e.allowAbsoluteUrls);return $C(n,e.params,e.paramsSerializer)}};Zt.forEach(["delete","get","head","options"],function(e){ff.prototype[e]=function(n,r){return this.request(_f(r||{},{method:e,url:n,data:(r||{}).data}))}});Zt.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(_f(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ff.prototype[e]=n(),ff.prototype[e+"Form"]=n(!0)});let R7=class JC{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new $p(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new JC(function(i){e=i}),cancel:e}}};function F7(t){return function(n){return t.apply(null,n)}}function j7(t){return Zt.isObject(t)&&t.isAxiosError===!0}const ub={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ub).forEach(([t,e])=>{ub[e]=t});function QC(t){const e=new ff(t),n=AC(ff.prototype.request,e);return Zt.extend(n,ff.prototype,e,{allOwnKeys:!0}),Zt.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return QC(_f(t,i))},n}const qo=QC(Om);qo.Axios=ff;qo.CanceledError=$p;qo.CancelToken=R7;qo.isCancel=HC;qo.VERSION=XC;qo.toFormData=By;qo.AxiosError=li;qo.Cancel=qo.CanceledError;qo.all=function(e){return Promise.all(e)};qo.spread=F7;qo.isAxiosError=j7;qo.mergeConfig=_f;qo.AxiosHeaders=nu;qo.formToJSON=t=>UC(Zt.isHTMLForm(t)?new FormData(t):t);qo.getAdapter=ZC.getAdapter;qo.HttpStatusCode=ub;qo.default=qo;const{Axios:Soe,AxiosError:Coe,CanceledError:Eoe,isCancel:Poe,CancelToken:Moe,VERSION:koe,all:Aoe,Cancel:Toe,isAxiosError:Doe,spread:Ooe,toFormData:Noe,AxiosHeaders:Ioe,HttpStatusCode:Boe,formToJSON:Roe,getAdapter:Foe,mergeConfig:joe}=qo,vn=iu({measures:[],longTasks:[],memorySnapshots:[],framesPerSecond:0,lastFpsUpdate:0,frameCount:0,isRecording:!1,isEnabled:!1,startTime:0,currentOperation:null,operationStack:[],operationHistory:[]});let bd=null,lf=null;const z7=1e3;function jy(){if(vn.isEnabled){vn.isRecording=!0,vn.startTime=performance.now(),vn.frameCount=0,vn.lastFpsUpdate=performance.now();try{window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&(bd=new PerformanceObserver(t=>{t.getEntries().forEach(n=>{vn.longTasks.push({duration:n.duration,startTime:n.startTime,name:n.name,component:Lc()})})}),bd.observe({entryTypes:["longtask"]}))}catch(t){console.warn("PerformanceObserver pour longues tâches non supporté",t)}$7(),B_()}}function $v(){vn.isRecording=!1,bd&&(bd.disconnect(),bd=null),rE()}function cb(){bd&&(bd.disconnect(),bd=null),rE(),vn.measures=[],vn.longTasks=[],vn.memorySnapshots=[],vn.operationHistory=[],vn.frameCount=0,vn.framesPerSecond=0,vn.lastFpsUpdate=0,vn.isEnabled&&jy()}function eE(t,e,n){if(!vn.isEnabled||!vn.isRecording)return()=>{};const r=performance.now(),i=vn.currentOperation;return vn.currentOperation=t,vn.operationStack.push(t),()=>{const s=performance.now()-r;vn.operationStack.pop(),vn.currentOperation=vn.operationStack[vn.operationStack.length-1]||null,vn.measures.push({name:t,startTime:r,duration:s,component:e||Lc(),info:n,parentOperation:i||void 0}),s>10&&vn.operationHistory.push({operation:t,component:e||Lc()||"unknown",durationMs:s,timestamp:Date.now()})}}async function tE(t,e,n,r){if(!vn.isEnabled||!vn.isRecording)return e();const i=performance.now(),s=vn.currentOperation;vn.currentOperation=t,vn.operationStack.push(t);try{return await e()}finally{const o=performance.now()-i;vn.operationStack.pop(),vn.currentOperation=vn.operationStack[vn.operationStack.length-1]||null,vn.measures.push({name:t,startTime:i,duration:o,component:n||Lc(),info:r,parentOperation:s||void 0}),o>10&&vn.operationHistory.push({operation:t,component:n||Lc()||"unknown",durationMs:o,timestamp:Date.now()})}}function nE(t,e,n,r){if(!vn.isEnabled||!vn.isRecording)return e();const i=performance.now(),s=vn.currentOperation;vn.currentOperation=t,vn.operationStack.push(t);try{return e()}finally{const o=performance.now()-i;vn.operationStack.pop(),vn.currentOperation=vn.operationStack[vn.operationStack.length-1]||null,vn.measures.push({name:t,startTime:i,duration:o,component:n||Lc(),info:r,parentOperation:s||void 0}),o>10&&vn.operationHistory.push({operation:t,component:n||Lc()||"unknown",durationMs:o,timestamp:Date.now()})}}function B_(){!vn.isEnabled||!vn.isRecording||(performance.memory?vn.memorySnapshots.push({jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize,timestamp:performance.now()}):vn.memorySnapshots.push({timestamp:performance.now()}))}function $7(){lf!==null&&cancelAnimationFrame(lf),vn.frameCount=0,vn.lastFpsUpdate=performance.now();function t(){vn.frameCount++;const e=performance.now();e-vn.lastFpsUpdate>=z7&&(vn.framesPerSecond=Math.round(vn.frameCount*1e3/(e-vn.lastFpsUpdate)),vn.frameCount=0,vn.lastFpsUpdate=e),vn.isRecording&&(lf=requestAnimationFrame(t))}lf=requestAnimationFrame(t)}function rE(){lf!==null&&(cancelAnimationFrame(lf),lf=null)}function Lc(){return""}function hb(t){vn.isEnabled=t,t&&!vn.isRecording?jy():!t&&vn.isRecording&&$v()}function iE(t,e,n){return(...r)=>{if(!vn.isEnabled||!vn.isRecording)return t(...r);const i=performance.now();try{return t(...r)}finally{const s=performance.now()-i;vn.measures.push({name:e,startTime:i,duration:s,component:n||Lc(),info:{args:r}}),s>10&&vn.operationHistory.push({operation:e,component:n||Lc()||"unknown",durationMs:s,timestamp:Date.now()})}}}function sE(t,e,n){return async(...r)=>{if(!vn.isEnabled||!vn.isRecording)return await t(...r);const i=performance.now();try{return await t(...r)}finally{const s=performance.now()-i;vn.measures.push({name:e,startTime:i,duration:s,component:n||Lc(),info:{args:r}}),s>10&&vn.operationHistory.push({operation:e,component:n||Lc()||"unknown",durationMs:s,timestamp:Date.now()})}}}function V7(t,e){const n=vn.measures.filter(o=>o.startTime>=t&&o.startTime+o.duration<=e),r=new Map,i=[];n.forEach(o=>{o.parentOperation?(r.has(o.parentOperation)||r.set(o.parentOperation,[]),r.get(o.parentOperation).push(o)):i.push(o)});function s(o){const a=r.get(o.name)||[];return{operation:o.name,duration:o.duration,component:o.component,children:a.sort((l,c)=>c.duration-l.duration).map(l=>s(l))}}return i.sort((o,a)=>a.duration-o.duration).map(o=>s(o))}function db(t,e){const n=t||vn.startTime,r=e||performance.now(),i=V7(n,r),s=r-n,o=new Map;function a(c){const d=o.get(c.operation)||{duration:0,component:c.component};d.duration+=c.duration,o.set(c.operation,d),c.children.forEach(p=>a(p))}i.forEach(c=>a(c));const l=Array.from(o.entries()).map(([c,{duration:d,component:p}])=>({operation:c,duration:d,component:p,impact:d/s*100})).sort((c,d)=>d.impact-c.impact).slice(0,10);return{criticalPaths:i,totalTime:s,bottlenecks:l}}function Vp(){const t=Ct(!1);go(()=>{try{const r=new URL(window.location.href).searchParams.get("perf")==="true";t.value=r,hb(r),cb()}catch(n){console.warn("Erreur lors de la vérification du paramètre perf:",n),t.value=!1,hb(!1)}}),Zu(()=>{vn.isRecording&&$v()});const e=(n,r)=>{if(!vn.isEnabled||!vn.isRecording)return null;const i=vn.measures.find(c=>c.name===n&&c.startTime===r);if(!i)return null;const s=i.startTime+i.duration,o=vn.measures.filter(c=>c.startTime>=i.startTime&&c.startTime<=s&&c!==i),a=vn.longTasks.filter(c=>c.startTime>=i.startTime&&c.startTime<=s),l=vn.memorySnapshots.filter(c=>c.timestamp>=i.startTime&&c.timestamp<=s);return{operation:{name:i.name,component:i.component,startTime:i.startTime,duration:i.duration,info:i.info},context:{relatedOperations:o.map(c=>({name:c.name,component:c.component,startTime:c.startTime-i.startTime,duration:c.duration,info:c.info})),longTasks:a.map(c=>({duration:c.duration,startTime:c.startTime-i.startTime,name:c.name,component:c.component})),memorySnapshots:l.map(c=>({...c,timestamp:c.timestamp-i.startTime}))},summary:{totalRelatedOperations:o.length,totalLongTasks:a.length,maxLongTaskDuration:Math.max(...a.map(c=>c.duration),0),memoryDelta:l.length>1?(l[l.length-1].usedJSHeapSize||0)-(l[0].usedJSHeapSize||0):0}}};return{isEnabled:pc(Ct(vn.isEnabled)),isQueryParamEnabled:pc(t),isRecording:pc(Ct(vn.isRecording)),measures:pc(Ct(vn.measures)),longTasks:pc(Ct(vn.longTasks)),memorySnapshots:pc(Ct(vn.memorySnapshots)),framesPerSecond:pc(Ct(vn.framesPerSecond)),operationHistory:pc(Ct(vn.operationHistory)),startRecording:jy,stopRecording:$v,clearRecording:cb,startMeasure:eE,measure:nE,measureAsync:tE,captureMemorySnapshot:B_,createPerformanceTracker:iE,createAsyncPerformanceTracker:sE,getOperationDetails:e,getSlowOperations:()=>!vn.isEnabled||!vn.isRecording?[]:[...vn.measures].sort((n,r)=>r.duration-n.duration).slice(0,10),getLongTasks:()=>!vn.isEnabled||!vn.isRecording?[]:[...vn.longTasks].sort((n,r)=>r.duration-n.duration),getPerformanceReport:()=>{if(!vn.isEnabled||!vn.isRecording)return null;const n=db();return{totalMeasures:vn.measures.length,totalLongTasks:vn.longTasks.length,slowestOperations:[...vn.measures].sort((r,i)=>i.duration-r.duration).slice(0,10),averageFps:vn.framesPerSecond,memoryUsage:vn.memorySnapshots.length>0?vn.memorySnapshots[vn.memorySnapshots.length-1]:null,operationsByComponent:U7(vn.measures),criticalPaths:n.criticalPaths,bottlenecks:n.bottlenecks,recordingDuration:vn.isRecording?performance.now()-vn.startTime:null}},analyzeCriticalPaths:db}}function U7(t){if(!vn.isEnabled||!vn.isRecording)return{};const e={};return t.forEach(n=>{const r=n.component||"unknown";e[r]||(e[r]={totalTime:0,callCount:0,operations:{}}),e[r].totalTime+=n.duration,e[r].callCount++,e[r].operations[n.name]||(e[r].operations[n.name]={totalTime:0,callCount:0}),e[r].operations[n.name].totalTime+=n.duration,e[r].operations[n.name].callCount++}),e}const gn={startRecording:jy,stopRecording:$v,clearRecording:cb,startMeasure:eE,measure:nE,measureAsync:tE,captureMemorySnapshot:B_,createPerformanceTracker:iE,createAsyncPerformanceTracker:sE,setEnabled:hb,analyzeCriticalPaths:db},Un=qo.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0}),Gr=Vp();function oE(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Un.interceptors.request.use(async t=>{const e=Gr.startMeasure("api_request_interceptor","ApiService");try{const n=oE("access_token");return n&&(t.headers.Authorization=`Bearer ${n}`),console.log("Request config:",{url:t.url,method:t.method,headers:t.headers,withCredentials:t.withCredentials}),t}finally{e()}},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));Un.interceptors.response.use(t=>t,async t=>{var r,i;const e=Gr.startMeasure("api_response_interceptor","ApiService"),n=t.config;try{if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;const s=pa();try{await Gr.measureAsync("token_refresh",()=>s.refreshToken(),"ApiService");const o=oE("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,Un(n)}catch(o){return await s.logout(),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(o)}}return Promise.reject(t)}finally{e()}});function H7(t){var n;const e=[];if((n=t.response)!=null&&n.data){const r=t.response.data;typeof r=="object"&&!Array.isArray(r)?Object.entries(r).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>{e.push({field:i,message:o})}):typeof s=="string"&&e.push({field:i,message:s})}):typeof r=="string"?e.push({field:"non_field_error",message:r}):r.detail&&e.push({field:"non_field_error",message:r.detail})}else t.message&&e.push({field:"non_field_error",message:`Erreur de connexion: ${t.message}`});return e.length===0&&e.push({field:"non_field_error",message:"Une erreur inconnue s'est produite"}),e}async function nv(t){console.log("[fetchUsersByHierarchy] Récupération des utilisateurs:",t);const e={role:t.role};t.entrepriseId&&(e.entreprise=t.entrepriseId),t.salarieId&&(e.salarie=t.salarieId),t.includeDetails&&(e.include_plans=!0),t.search&&(e.search=t.search),console.log("[fetchUsersByHierarchy] Filtres appliqués:",e);try{const n=await kl.getUsers(e);return console.log(`[fetchUsersByHierarchy] Résultat (${n.data.length} utilisateurs):`,n.data),n.data}catch(n){throw console.error("[fetchUsersByHierarchy] Erreur lors de la récupération des utilisateurs:",n),n}}const kl={async getUsers(t={}){const e=Gr.startMeasure("get_users","UserService");try{return await Gr.measureAsync("get_users_request",()=>Un.get("/users/",{params:t}),"UserService")}finally{e()}},async getUser(t){return await Un.get(`/users/${t}/`)},async createUser(t){return await Un.post("/users/",t)},async updateUser(t,e){return await Un.patch(`/users/${t}/`,e)},async deleteUser(t){return await Un.delete(`/users/${t}/`)},async getEntreprises(){return await Un.get("/users/",{params:{role:"ENTREPRISE"}})},async getSalaries(t){const e={role:"SALARIE"};return t&&(e.entreprise=t),await Un.get("/users/",{params:e})},async getSalarieVisiteurs(t){return await Un.get("/users/",{params:{role:"VISITEUR",salarie:t}})},async getEntrepriseVisiteurs(t){return await Un.get("/users/",{params:{role:"VISITEUR",entreprise:t}})},async getUsersByHierarchy(t){const e=Gr.startMeasure("get_users_hierarchy","UserService");try{const n=Gr.measure("prepare_hierarchy_filters",()=>{const r={role:t.role};return t.entrepriseId&&(r.entreprise=t.entrepriseId),t.salarieId&&(r.salarie=t.salarieId),t.includeDetails&&(r.include_plans=!0),t.search&&(r.search=t.search),r},"UserService");return await Gr.measureAsync("get_users_hierarchy_request",()=>Un.get("/users/",{params:n}),"UserService")}finally{e()}},async getEntrepriseSalaries(t){return await Un.get("/users/",{params:{role:"SALARIE",entreprise:t}})},async getVisiteurs(t,e){const n={role:"VISITEUR"};return t&&(n.salarie=t),e&&(n.entreprise=e),await Un.get("/users/",{params:n})},async assignEntrepriseToSalarie(t,e){return await Un.patch(`/users/${t}/`,{entreprise:e})},async assignSalarieToVisiteur(t,e){return await Un.patch(`/users/${t}/`,{salarie:e})},formatLogoFileName(t){return Gr.measure("format_logo_filename",()=>{var i;const e=new Date().getTime(),n=((i=t.name.split(".").pop())==null?void 0:i.toLowerCase())||"";return`${t.name.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${e}.${n}`},"UserService")},async uploadLogo(t){const e=Gr.startMeasure("upload_logo","UserService");try{const n=new FormData,r=this.formatLogoFileName(t),i=new File([t],r,{type:t.type});return n.append("logo",i),await Gr.measureAsync("upload_logo_request",()=>Un.post("/users/upload_logo/",n,{headers:{"Content-Type":"multipart/form-data"}}),"UserService")}finally{e()}}};async function H1(t,e=3,n=1e3,r=1e4){let i=0;for(;;)try{return await t()}catch(s){if(i++,i>=e)throw s;const o=Math.min(n*Math.pow(2,i-1),r),a=Math.random()*200;console.log(`Tentative ${i}/${e} échouée, nouvelle tentative dans ${o+a}ms`),await new Promise(l=>setTimeout(l,o+a))}}const b0={async getPlans(){const t=Gr.startMeasure("get_plans","IrrigationService");try{return await Gr.measureAsync("get_plans_request",()=>Un.get("/plans/"),"IrrigationService")}finally{t()}},async createPlan(t){const e=Gr.startMeasure("create_plan","IrrigationService");try{const n=Gr.measure("format_plan_data",()=>({...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null}),"IrrigationService");return await Gr.measureAsync("create_plan_request",()=>Un.post("/plans/",n),"IrrigationService")}finally{e()}},async updatePlan(t,e){const n=Gr.startMeasure("update_plan","IrrigationService");try{return await Gr.measureAsync("update_plan_request",()=>Un.put(`/plans/${t}/`,e),"IrrigationService")}finally{n()}},async deletePlan(t){const e=Gr.startMeasure("delete_plan","IrrigationService");try{return await Gr.measureAsync("delete_plan_request",()=>Un.delete(`/plans/${t}/`),"IrrigationService")}finally{e()}},async getVisiteurPlans(t){return await Un.get("/plans/",{params:{visiteur:t}})},async createPlanForVisiteur(t){return await Un.post("/plans/",t)},async getEntreprisePlans(t){return await Un.get("/plans/",{params:{entreprise:t}})},async getSalariePlans(t){return await Un.get("/plans/",{params:{salarie:t}})},async createPlanForSalarie(t,e){const n={...t,salarie:e};return await Un.post("/plans/",n)},async createPlanForEntreprise(t,e){const n={...t,entreprise:e};return await Un.post("/plans/",n)}},Sa={async getNotes(t={}){const e=Gr.startMeasure("get_notes","NoteService");try{return await Gr.measureAsync("get_notes_request",()=>Un.get("/notes/",{params:t}),"NoteService")}finally{e()}},async getNotesByPlan(t){const e=Gr.startMeasure("get_notes_by_plan","NoteService");try{return await Gr.measureAsync("get_notes_by_plan_request",()=>Un.get("/notes/",{params:{plan:t}}),"NoteService")}finally{e()}},async getNote(t){const e=Gr.startMeasure("get_note","NoteService");try{return await Gr.measureAsync("get_note_request",()=>Un.get(`/notes/${t}/`),"NoteService")}finally{e()}},async createNote(t){const e=Gr.startMeasure("create_note","NoteService");try{const n={...t};return n.location&&Object.keys(n.location).length===0&&delete n.location,await Gr.measureAsync("create_note_request",()=>Un.post("/notes/",n),"NoteService")}finally{e()}},async updateNote(t,e){console.log("[noteService][updateNote] Mise à jour de la note:",{noteId:t,noteData:e});const n=Gr.startMeasure("update_note","NoteService");try{const r={...e};r.location&&Object.keys(r.location).length===0&&delete r.location,e.column!==void 0?r.column=e.column:e.columnId!==void 0&&(r.column=e.columnId),delete r.columnId,delete r.column_id,delete r.column_details,console.log("[noteService][updateNote] Données formatées:",r);const i=await Gr.measureAsync("update_note_request",()=>Un.patch(`/notes/${t}/`,r),"NoteService");return console.log("[noteService][updateNote] Réponse du serveur:",i.data),i}catch(r){throw console.error("[noteService][updateNote] Erreur lors de la mise à jour:",r),r}finally{n()}},async deleteNote(t){const e=Gr.startMeasure("delete_note","NoteService");try{return await Gr.measureAsync("delete_note_request",()=>Un.delete(`/notes/${t}/`),"NoteService")}finally{e()}},async getComments(t){return await Un.get(`/notes/${t}/comments/`)},async addComment(t,e){const n=typeof e=="string"?{text:e}:e;return console.log(`[noteService][addComment] Envoi du commentaire pour la note ${t}:`,n),await Un.post(`/notes/${t}/comments/`,n)},async updateComment(t,e,n){return await Un.patch(`/notes/${t}/comments/${e}/`,n)},async deleteComment(t,e){return await Un.delete(`/notes/${t}/comments/${e}/`)},async getPhotos(t){return await Un.get(`/notes/${t}/photos/`)},async addPhoto(t,e){return await Un.post(`/notes/${t}/photos/`,e,{headers:{"Content-Type":"multipart/form-data"}})},async updatePhoto(t,e,n){return await Un.patch(`/notes/${t}/photos/${e}/`,n)},async deletePhoto(t,e){return await Un.delete(`/notes/${t}/photos/${e}/`)}},W1={async getDevices(t={}){const e=Gr.startMeasure("get_weather_devices","WeatherService");try{return await H1(()=>Un.get("/weather/devices/",{params:t}),3,1e3,1e4)}finally{e()}},async getRealTimeData(t){const e=Gr.startMeasure("get_weather_data","WeatherService");try{const n=typeof t=="string"?{mac:t}:t;return await H1(()=>Un.get("/weather/",{params:n}),3,1e3,1e4)}finally{e()}},async getHistoryData(t){const e=Gr.startMeasure("get_history_data","WeatherService");try{return await H1(()=>Un.get("/weather/history/",{params:t}),3,1e3,1e4)}finally{e()}}},_0={async getFilters(){const t=Gr.startMeasure("get_map_filters","MapFilterService");try{return await Gr.measureAsync("get_map_filters_request",()=>Un.get("/map-filters/"),"MapFilterService")}finally{t()}},async getFilter(t){const e=Gr.startMeasure("get_map_filter","MapFilterService");try{return await Gr.measureAsync("get_map_filter_request",()=>Un.get(`/map-filters/${t}/`),"MapFilterService")}finally{e()}},async createFilter(t){const e=Gr.startMeasure("create_map_filter","MapFilterService");try{return await Gr.measureAsync("create_map_filter_request",()=>Un.post("/map-filters/",t),"MapFilterService")}finally{e()}},async updateFilter(t,e){const n=Gr.startMeasure("update_map_filter","MapFilterService");try{return await Gr.measureAsync("update_map_filter_request",()=>Un.patch(`/map-filters/${t}/`,e),"MapFilterService")}finally{n()}},async deleteFilter(t){const e=Gr.startMeasure("delete_map_filter","MapFilterService");try{return await Gr.measureAsync("delete_map_filter_request",()=>Un.delete(`/map-filters/${t}/`),"MapFilterService")}finally{e()}}};Un.defaults.baseURL="/api";Un.defaults.headers.common["Content-Type"]="application/json";Un.defaults.withCredentials=!0;function gm(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Un.interceptors.request.use(t=>{const e=gm("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));Un.interceptors.response.use(t=>t,async t=>{var r,i;const e=pa(),n=t.config;if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;try{if(!gm("access_token"))throw new Error("No token available");await e.refreshToken();const o=gm("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,Un(n)}catch(s){console.error("Token refresh failed:",s),await e.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(t)});function W7(t,e,n=1){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${t}=${e};${i};path=/;secure;samesite=Strict`}function Lu(t){if(!t)return"-";const e=t.first_name||"",n=t.last_name?t.last_name.toUpperCase():"",r=`${e} ${n}`.trim(),i=t.company_name||t.role||"";return!r&&!i?"-":r?i?`${r} (${i})`:r:`(${i})`}function G7(t="",e=""){return`${(t==null?void 0:t.charAt(0))||""}${(e==null?void 0:e.charAt(0))||""}`.toUpperCase()}const q7={ADMIN:"Administrateur",ENTREPRISE:"Entreprise",SALARIE:"Salarie",VISITEUR:"Visiteur"};function Y7(t){return q7[t]||t}function K7(){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function Z7(t){return t?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}async function X7({role:t,entrepriseId:e,salarieId:n,includeDetails:r=!1}){const i={role:t};return e&&(i.entreprise=e),n&&(i.salarie=n),r&&(i.include_plans=!0),(await kl.getUsers(i)).data}const pa=jp("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,enterprises:[],employees:[],visitors:[]}),getters:{isAdmin:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="admin"},isEntreprise:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="entreprise"},isSalarie:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="salarie"},isVisiteur:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="visiteur"},currentUser:t=>t.user,hasEnterprise:t=>{var e;return!!((e=t.user)!=null&&e.enterprise_id)},hasEmployee:t=>{var e;return!!((e=t.user)!=null&&e.employee_id)}},actions:{async initialize(t){if(!t){const n=await this.restoreSession();return this.initialized=!0,n}if(t.isAuthenticated&&t.user)return this.user=t.user,this.isAuthenticated=!0,this.mustChangePassword=t.user.must_change_password||!1,this.initialized=!0,!0;const e=await this.restoreSession();return this.initialized=!0,e},async restoreSession(){try{if(!gm("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const e=await Un.post("/token/refresh/");return e.data.user?(this.user=e.data.user,this.isAuthenticated=!0,this.mustChangePassword=e.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(t){return console.error("Failed to restore session:",t),this.isAuthenticated=!1,this.user=null,!1}},async login(t,e){var n,r,i;try{const s=await Un.post("/token/",{username:t,password:e});if(!s.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${s.data.access}; path=/; secure; samesite=Strict`;const o=await this.fetchUserProfile();return this.user=o,this.isAuthenticated=!0,!0}catch(s){throw this.isAuthenticated=!1,this.user=null,((n=s.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(i=(r=s.response)==null?void 0:r.data)!=null&&i.detail?new Error(s.response.data.detail):s}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const t=await Un.get("/users/me/");return this.user=t.data,this.isAuthenticated=!0,this.mustChangePassword=t.data.must_change_password||!1,t.data}catch(t){throw this.isAuthenticated=!1,this.user=null,t}},async changePassword(t,e){try{const n=await Un.post("/users/change_password/",{old_password:t,password:e});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var t,e;try{if(!gm("refresh_token"))throw new Error("No refresh token available");const r=await Un.post("/token/refresh/",{},{withCredentials:!0,_retry:!0}),{access:i}=r.data;if(!i)throw new Error("No access token received");return W7("access_token",i,1),this.isAuthenticated=!0,i}catch(n){throw console.error("Error refreshing token:",{status:(t=n.response)==null?void 0:t.status,data:(e=n.response)==null?void 0:e.data}),this.isAuthenticated=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",n}},async fetchUsers(t={}){this.loading=!0;try{return(await kl.getUsers(t)).data}catch(e){throw this.error="Erreur lors de la récupération des utilisateurs",e}finally{this.loading=!1}},async fetchEnterprises(){this.loading=!0;try{const t=await kl.getUsers({role:"ENTREPRISE"});return this.enterprises=t.data,this.enterprises}catch(t){throw this.error="Erreur lors de la récupération des entreprises",t}finally{this.loading=!1}},async fetchEnterpriseEmployees(t){this.loading=!0;try{const e=await kl.getUsers({role:"SALARIE",entreprise:t});return this.employees=e.data,this.employees}catch(e){throw this.error="Erreur lors de la récupération des salaries",e}finally{this.loading=!1}},async fetchEnterpriseVisitors(t){this.loading=!0;try{const e=await kl.getUsers({role:"VISITEUR",entreprise:t});return this.visitors=e.data,this.visitors}catch(e){throw this.error="Erreur lors de la récupération des visiteurs",e}finally{this.loading=!1}},async createUser(t){this.loading=!0;try{return(await kl.createUser(t)).data}catch(e){throw this.error="Erreur lors de la création de l'utilisateur",e}finally{this.loading=!1}},async updateUser(t,e){this.loading=!0;try{return(await kl.updateUser(t,e)).data}catch(n){throw this.error="Erreur lors de la mise à jour de l'utilisateur",n}finally{this.loading=!1}},async deleteUser(t){this.loading=!0;try{return await kl.deleteUser(t),!0}catch(e){throw this.error="Erreur lors de la suppression de l'utilisateur",e}finally{this.loading=!1}},async fetchEnterprisesLegacy(){this.loading=!0;try{const t=await Un.get("/users/",{params:{role:"entreprise"}});this.enterprises=t.data}catch(t){throw this.error="Erreur lors de la récupération des entreprises",t}finally{this.loading=!1}},async setEnterprise(t,e){this.loading=!0;try{await Un.patch(`/users/${t}/`,{enterprise:e}),this.user&&this.user.id===t&&(this.user.enterprise_id=e)}catch(n){throw this.error="Erreur lors de la mise à jour de l'entreprise",n}finally{this.loading=!1}},async updateUserRole(t,e){this.loading=!0;try{const n=await Un.patch(`/users/${t}/`,{role:e});return this.user&&this.user.id===t&&(this.user.user_type=e),n.data}catch(n){throw this.error="Erreur lors de la mise à jour du rôle",n}finally{this.loading=!1}},async updateUserEmail(t){var e;this.loading=!0;try{const n=await Un.patch(`/users/${(e=this.user)==null?void 0:e.id}/`,{email:t});return this.user&&(this.user.email=t),n.data}catch(n){throw this.error="Erreur lors de la mise à jour de l'email",n}finally{this.loading=!1}},async uploadLogo(t){this.loading=!0;try{const e=await kl.uploadLogo(t);return this.user&&e.data.logo&&(this.user.logo=e.data.logo),e.data}catch(e){throw this.error="Erreur lors du téléversement du logo",e}finally{this.loading=!1}},checkAccess(t){return this.user?t.includes(this.user.user_type):!1},async fetchUsersByRole(t){this.loading=!0;try{return await X7(t)}catch(e){throw console.error(`Error fetching ${t.role}:`,e),e}finally{this.loading=!1}},async fetchEntrepriseSalaries(t){this.loading=!0;try{return(await kl.getUsers({role:"SALARIE",entreprise:t})).data}catch(e){throw this.error="Erreur lors de la récupération des salaries",e}finally{this.loading=!1}},async fetchSalarieVisiteurs(t){this.loading=!0;try{return(await kl.getUsers({role:"VISITEUR",salarie:t})).data}catch(e){throw this.error="Erreur lors de la récupération des visiteurs",e}finally{this.loading=!1}}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const sp=typeof document<"u";function aE(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function J7(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&aE(t.default)}const as=Object.assign;function G1(t,e){const n={};for(const r in e){const i=e[r];n[r]=Sc(i)?i.map(t):t(i)}return n}const Ug=()=>{},Sc=Array.isArray,lE=/#/g,Q7=/&/g,eB=/\//g,tB=/=/g,nB=/\?/g,uE=/\+/g,rB=/%5B/g,iB=/%5D/g,cE=/%5E/g,sB=/%60/g,hE=/%7B/g,oB=/%7C/g,dE=/%7D/g,aB=/%20/g;function R_(t){return encodeURI(""+t).replace(oB,"|").replace(rB,"[").replace(iB,"]")}function lB(t){return R_(t).replace(hE,"{").replace(dE,"}").replace(cE,"^")}function fb(t){return R_(t).replace(uE,"%2B").replace(aB,"+").replace(lE,"%23").replace(Q7,"%26").replace(sB,"`").replace(hE,"{").replace(dE,"}").replace(cE,"^")}function uB(t){return fb(t).replace(tB,"%3D")}function cB(t){return R_(t).replace(lE,"%23").replace(nB,"%3F")}function hB(t){return t==null?"":cB(t).replace(eB,"%2F")}function mm(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const dB=/\/$/,fB=t=>t.replace(dB,"");function q1(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=vB(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:mm(o)}}function pB(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function k4(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function gB(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Mp(e.matched[r],n.matched[i])&&fE(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Mp(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function fE(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!mB(t[n],e[n]))return!1;return!0}function mB(t,e){return Sc(t)?A4(t,e):Sc(e)?A4(e,t):t===e}function A4(t,e){return Sc(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function vB(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Zh={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var vm;(function(t){t.pop="pop",t.push="push"})(vm||(vm={}));var Hg;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Hg||(Hg={}));function yB(t){if(!t)if(sp){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),fB(t)}const bB=/^[^#]+#/;function _B(t,e){return t.replace(bB,"#")+e}function wB(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const zy=()=>({left:window.scrollX,top:window.scrollY});function xB(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=wB(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function T4(t,e){return(history.state?history.state.position-e:-1)+t}const pb=new Map;function LB(t,e){pb.set(t,e)}function SB(t){const e=pb.get(t);return pb.delete(t),e}let CB=()=>location.protocol+"//"+location.host;function pE(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),k4(l,"")}return k4(n,t)+r+i}function EB(t,e,n,r){let i=[],s=[],o=null;const a=({state:v})=>{const m=pE(t,location),x=n.value,E=e.value;let k=0;if(v){if(n.value=m,e.value=v,o&&o===x){o=null;return}k=E?v.position-E.position:0}else r(m);i.forEach(A=>{A(n.value,x,{delta:k,type:vm.pop,direction:k?k>0?Hg.forward:Hg.back:Hg.unknown})})};function l(){o=n.value}function c(v){i.push(v);const m=()=>{const x=i.indexOf(v);x>-1&&i.splice(x,1)};return s.push(m),m}function d(){const{history:v}=window;v.state&&v.replaceState(as({},v.state,{scroll:zy()}),"")}function p(){for(const v of s)v();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:l,listen:c,destroy:p}}function D4(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?zy():null}}function PB(t){const{history:e,location:n}=window,r={value:pE(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,d){const p=t.indexOf("#"),v=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:CB()+t+l;try{e[d?"replaceState":"pushState"](c,"",v),i.value=c}catch(m){console.error(m),n[d?"replace":"assign"](v)}}function o(l,c){const d=as({},e.state,D4(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,d,!0),r.value=l}function a(l,c){const d=as({},i.value,e.state,{forward:l,scroll:zy()});s(d.current,d,!0);const p=as({},D4(r.value,l,null),{position:d.position+1},c);s(l,p,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function MB(t){t=yB(t);const e=PB(t),n=EB(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=as({location:"",base:t,go:r,createHref:_B.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function kB(t){return typeof t=="string"||t&&typeof t=="object"}function gE(t){return typeof t=="string"||typeof t=="symbol"}const mE=Symbol("");var O4;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(O4||(O4={}));function kp(t,e){return as(new Error,{type:t,[mE]:!0},e)}function vh(t,e){return t instanceof Error&&mE in t&&(e==null||!!(t.type&e))}const N4="[^/]+?",AB={sensitive:!1,strict:!1,start:!0,end:!0},TB=/[.+*?^${}()[\]/\\]/g;function DB(t,e){const n=as({},AB,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const d=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let p=0;p<c.length;p++){const v=c[p];let m=40+(n.sensitive?.25:0);if(v.type===0)p||(i+="/"),i+=v.value.replace(TB,"\\$&"),m+=40;else if(v.type===1){const{value:x,repeatable:E,optional:k,regexp:A}=v;s.push({name:x,repeatable:E,optional:k});const D=A||N4;if(D!==N4){m+=10;try{new RegExp(`(${D})`)}catch(Y){throw new Error(`Invalid custom RegExp for param "${x}" (${D}): `+Y.message)}}let V=E?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;p||(V=k&&c.length<2?`(?:/${V})`:"/"+V),k&&(V+="?"),i+=V,m+=20,k&&(m+=-8),E&&(m+=-20),D===".*"&&(m+=-50)}d.push(m)}r.push(d)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const d=c.match(o),p={};if(!d)return null;for(let v=1;v<d.length;v++){const m=d[v]||"",x=s[v-1];p[x.name]=m&&x.repeatable?m.split("/"):m}return p}function l(c){let d="",p=!1;for(const v of t){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const m of v)if(m.type===0)d+=m.value;else if(m.type===1){const{value:x,repeatable:E,optional:k}=m,A=x in c?c[x]:"";if(Sc(A)&&!E)throw new Error(`Provided param "${x}" is an array but it is not repeatable (* or + modifiers)`);const D=Sc(A)?A.join("/"):A;if(!D)if(k)v.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${x}"`);d+=D}}return d||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function OB(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function vE(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=OB(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(I4(r))return 1;if(I4(i))return-1}return i.length-r.length}function I4(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const NB={type:0,value:""},IB=/[a-zA-Z0-9_]/;function BB(t){if(!t)return[[]];if(t==="/")return[[NB]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",d="";function p(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function v(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&p(),o()):l===":"?(p(),n=1):v();break;case 4:v(),n=r;break;case 1:l==="("?n=2:IB.test(l)?v():(p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:n=3:d+=l;break;case 3:p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),p(),o(),i}function RB(t,e,n){const r=DB(BB(t.path),n),i=as(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function FB(t,e){const n=[],r=new Map;e=j4({strict:!1,end:!0,sensitive:!1},e);function i(p){return r.get(p)}function s(p,v,m){const x=!m,E=R4(p);E.aliasOf=m&&m.record;const k=j4(e,p),A=[E];if("alias"in p){const Y=typeof p.alias=="string"?[p.alias]:p.alias;for(const te of Y)A.push(R4(as({},E,{components:m?m.record.components:E.components,path:te,aliasOf:m?m.record:E})))}let D,V;for(const Y of A){const{path:te}=Y;if(v&&te[0]!=="/"){const ge=v.record.path,fe=ge[ge.length-1]==="/"?"":"/";Y.path=v.record.path+(te&&fe+te)}if(D=RB(Y,v,k),m?m.alias.push(D):(V=V||D,V!==D&&V.alias.push(D),x&&p.name&&!F4(D)&&o(p.name)),yE(D)&&l(D),E.children){const ge=E.children;for(let fe=0;fe<ge.length;fe++)s(ge[fe],D,m&&m.children[fe])}m=m||D}return V?()=>{o(V)}:Ug}function o(p){if(gE(p)){const v=r.get(p);v&&(r.delete(p),n.splice(n.indexOf(v),1),v.children.forEach(o),v.alias.forEach(o))}else{const v=n.indexOf(p);v>-1&&(n.splice(v,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function a(){return n}function l(p){const v=$B(p,n);n.splice(v,0,p),p.record.name&&!F4(p)&&r.set(p.record.name,p)}function c(p,v){let m,x={},E,k;if("name"in p&&p.name){if(m=r.get(p.name),!m)throw kp(1,{location:p});k=m.record.name,x=as(B4(v.params,m.keys.filter(V=>!V.optional).concat(m.parent?m.parent.keys.filter(V=>V.optional):[]).map(V=>V.name)),p.params&&B4(p.params,m.keys.map(V=>V.name))),E=m.stringify(x)}else if(p.path!=null)E=p.path,m=n.find(V=>V.re.test(E)),m&&(x=m.parse(E),k=m.record.name);else{if(m=v.name?r.get(v.name):n.find(V=>V.re.test(v.path)),!m)throw kp(1,{location:p,currentLocation:v});k=m.record.name,x=as({},v.params,p.params),E=m.stringify(x)}const A=[];let D=m;for(;D;)A.unshift(D.record),D=D.parent;return{name:k,path:E,params:x,matched:A,meta:zB(A)}}t.forEach(p=>s(p));function d(){n.length=0,r.clear()}return{addRoute:s,resolve:c,removeRoute:o,clearRoutes:d,getRoutes:a,getRecordMatcher:i}}function B4(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function R4(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:jB(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function jB(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function F4(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function zB(t){return t.reduce((e,n)=>as(e,n.meta),{})}function j4(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function $B(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;vE(t,e[s])<0?r=s:n=s+1}const i=VB(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function VB(t){let e=t;for(;e=e.parent;)if(yE(e)&&vE(t,e)===0)return e}function yE({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function UB(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(uE," "),o=s.indexOf("="),a=mm(o<0?s:s.slice(0,o)),l=o<0?null:mm(s.slice(o+1));if(a in e){let c=e[a];Sc(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function z4(t){let e="";for(let n in t){const r=t[n];if(n=uB(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Sc(r)?r.map(s=>s&&fb(s)):[r&&fb(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function HB(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Sc(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const WB=Symbol(""),$4=Symbol(""),$y=Symbol(""),F_=Symbol(""),gb=Symbol("");function tg(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ad(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=v=>{v===!1?l(kp(4,{from:n,to:e})):v instanceof Error?l(v):kB(v)?l(kp(2,{from:e,to:v})):(o&&r.enterCallbacks[i]===o&&typeof v=="function"&&o.push(v),a())},d=s(()=>t.call(r&&r.instances[i],e,n,c));let p=Promise.resolve(d);t.length<3&&(p=p.then(c)),p.catch(v=>l(v))})}function Y1(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(aE(l)){const d=(l.__vccOpts||l)[e];d&&s.push(ad(d,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const p=J7(d)?d.default:d;o.mods[a]=d,o.components[a]=p;const m=(p.__vccOpts||p)[e];return m&&ad(m,n,r,o,a,i)()}))}}return s}function V4(t){const e=Eu($y),n=Eu(F_),r=Jn(()=>{const l=er(t.to);return e.resolve(l)}),i=Jn(()=>{const{matched:l}=r.value,{length:c}=l,d=l[c-1],p=n.matched;if(!d||!p.length)return-1;const v=p.findIndex(Mp.bind(null,d));if(v>-1)return v;const m=U4(l[c-2]);return c>1&&U4(d)===m&&p[p.length-1].path!==m?p.findIndex(Mp.bind(null,l[c-2])):v}),s=Jn(()=>i.value>-1&&KB(n.params,r.value.params)),o=Jn(()=>i.value>-1&&i.value===n.matched.length-1&&fE(n.params,r.value.params));function a(l={}){if(YB(l)){const c=e[er(t.replace)?"replace":"push"](er(t.to)).catch(Ug);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:Jn(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function GB(t){return t.length===1?t[0]:t}const qB=js({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:V4,setup(t,{slots:e}){const n=iu(V4(t)),{options:r}=Eu($y),i=Jn(()=>({[H4(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[H4(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&GB(e.default(n));return t.custom?s:ky("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),_g=qB;function YB(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function KB(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Sc(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function U4(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const H4=(t,e,n)=>t??e??n,ZB=js({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Eu(gb),i=Jn(()=>t.route||r.value),s=Eu($4,0),o=Jn(()=>{let c=er(s);const{matched:d}=i.value;let p;for(;(p=d[c])&&!p.components;)c++;return c}),a=Jn(()=>i.value.matched[o.value]);jg($4,Jn(()=>o.value+1)),jg(WB,a),jg(gb,i);const l=Ct();return Di(()=>[l.value,a.value,t.name],([c,d,p],[v,m,x])=>{d&&(d.instances[p]=c,m&&m!==d&&c&&c===v&&(d.leaveGuards.size||(d.leaveGuards=m.leaveGuards),d.updateGuards.size||(d.updateGuards=m.updateGuards))),c&&d&&(!m||!Mp(d,m)||!v)&&(d.enterCallbacks[p]||[]).forEach(E=>E(c))},{flush:"post"}),()=>{const c=i.value,d=t.name,p=a.value,v=p&&p.components[d];if(!v)return W4(n.default,{Component:v,route:c});const m=p.props[d],x=m?m===!0?c.params:typeof m=="function"?m(c):m:null,k=ky(v,as({},x,e,{onVnodeUnmounted:A=>{A.component.isUnmounted&&(p.instances[d]=null)},ref:l}));return W4(n.default,{Component:k,route:c})||k}}});function W4(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const bE=ZB;function XB(t){const e=FB(t.routes,t),n=t.parseQuery||UB,r=t.stringifyQuery||z4,i=t.history,s=tg(),o=tg(),a=tg(),l=v_(Zh);let c=Zh;sp&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=G1.bind(null,de=>""+de),p=G1.bind(null,hB),v=G1.bind(null,mm);function m(de,X){let J,De;return gE(de)?(J=e.getRecordMatcher(de),De=X):De=de,e.addRoute(De,J)}function x(de){const X=e.getRecordMatcher(de);X&&e.removeRoute(X)}function E(){return e.getRoutes().map(de=>de.record)}function k(de){return!!e.getRecordMatcher(de)}function A(de,X){if(X=as({},X||l.value),typeof de=="string"){const ee=q1(n,de,X.path),se=e.resolve({path:ee.path},X),le=i.createHref(ee.fullPath);return as(ee,se,{params:v(se.params),hash:mm(ee.hash),redirectedFrom:void 0,href:le})}let J;if(de.path!=null)J=as({},de,{path:q1(n,de.path,X.path).path});else{const ee=as({},de.params);for(const se in ee)ee[se]==null&&delete ee[se];J=as({},de,{params:p(ee)}),X.params=p(X.params)}const De=e.resolve(J,X),Te=de.hash||"";De.params=d(v(De.params));const Je=pB(r,as({},de,{hash:lB(Te),path:De.path})),he=i.createHref(Je);return as({fullPath:Je,hash:Te,query:r===z4?HB(de.query):de.query||{}},De,{redirectedFrom:void 0,href:he})}function D(de){return typeof de=="string"?q1(n,de,l.value.path):as({},de)}function V(de,X){if(c!==de)return kp(8,{from:X,to:de})}function Y(de){return fe(de)}function te(de){return Y(as(D(de),{replace:!0}))}function ge(de){const X=de.matched[de.matched.length-1];if(X&&X.redirect){const{redirect:J}=X;let De=typeof J=="function"?J(de):J;return typeof De=="string"&&(De=De.includes("?")||De.includes("#")?De=D(De):{path:De},De.params={}),as({query:de.query,hash:de.hash,params:De.path!=null?{}:de.params},De)}}function fe(de,X){const J=c=A(de),De=l.value,Te=de.state,Je=de.force,he=de.replace===!0,ee=ge(J);if(ee)return fe(as(D(ee),{state:typeof ee=="object"?as({},Te,ee.state):Te,force:Je,replace:he}),X||J);const se=J;se.redirectedFrom=X;let le;return!Je&&gB(r,De,J)&&(le=kp(16,{to:se,from:De}),nt(De,De,!0,!1)),(le?Promise.resolve(le):K(se,De)).catch(ze=>vh(ze)?vh(ze,2)?ze:we(ze):Q(ze,se,De)).then(ze=>{if(ze){if(vh(ze,2))return fe(as({replace:he},D(ze.to),{state:typeof ze.to=="object"?as({},Te,ze.to.state):Te,force:Je}),X||se)}else ze=N(se,De,!0,he,Te);return B(se,De,ze),ze})}function I(de,X){const J=V(de,X);return J?Promise.reject(J):Promise.resolve()}function F(de){const X=Z.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(de):de()}function K(de,X){let J;const[De,Te,Je]=JB(de,X);J=Y1(De.reverse(),"beforeRouteLeave",de,X);for(const ee of De)ee.leaveGuards.forEach(se=>{J.push(ad(se,de,X))});const he=I.bind(null,de,X);return J.push(he),pe(J).then(()=>{J=[];for(const ee of s.list())J.push(ad(ee,de,X));return J.push(he),pe(J)}).then(()=>{J=Y1(Te,"beforeRouteUpdate",de,X);for(const ee of Te)ee.updateGuards.forEach(se=>{J.push(ad(se,de,X))});return J.push(he),pe(J)}).then(()=>{J=[];for(const ee of Je)if(ee.beforeEnter)if(Sc(ee.beforeEnter))for(const se of ee.beforeEnter)J.push(ad(se,de,X));else J.push(ad(ee.beforeEnter,de,X));return J.push(he),pe(J)}).then(()=>(de.matched.forEach(ee=>ee.enterCallbacks={}),J=Y1(Je,"beforeRouteEnter",de,X,F),J.push(he),pe(J))).then(()=>{J=[];for(const ee of o.list())J.push(ad(ee,de,X));return J.push(he),pe(J)}).catch(ee=>vh(ee,8)?ee:Promise.reject(ee))}function B(de,X,J){a.list().forEach(De=>F(()=>De(de,X,J)))}function N(de,X,J,De,Te){const Je=V(de,X);if(Je)return Je;const he=X===Zh,ee=sp?history.state:{};J&&(De||he?i.replace(de.fullPath,as({scroll:he&&ee&&ee.scroll},Te)):i.push(de.fullPath,Te)),l.value=de,nt(de,X,J,he),we()}let j;function z(){j||(j=i.listen((de,X,J)=>{if(!me.listening)return;const De=A(de),Te=ge(De);if(Te){fe(as(Te,{replace:!0,force:!0}),De).catch(Ug);return}c=De;const Je=l.value;sp&&LB(T4(Je.fullPath,J.delta),zy()),K(De,Je).catch(he=>vh(he,12)?he:vh(he,2)?(fe(as(D(he.to),{force:!0}),De).then(ee=>{vh(ee,20)&&!J.delta&&J.type===vm.pop&&i.go(-1,!1)}).catch(Ug),Promise.reject()):(J.delta&&i.go(-J.delta,!1),Q(he,De,Je))).then(he=>{he=he||N(De,Je,!1),he&&(J.delta&&!vh(he,8)?i.go(-J.delta,!1):J.type===vm.pop&&vh(he,20)&&i.go(-1,!1)),B(De,Je,he)}).catch(Ug)}))}let U=tg(),$=tg(),re;function Q(de,X,J){we(de);const De=$.list();return De.length?De.forEach(Te=>Te(de,X,J)):console.error(de),Promise.reject(de)}function _e(){return re&&l.value!==Zh?Promise.resolve():new Promise((de,X)=>{U.add([de,X])})}function we(de){return re||(re=!de,z(),U.list().forEach(([X,J])=>de?J(de):X()),U.reset()),de}function nt(de,X,J,De){const{scrollBehavior:Te}=t;if(!sp||!Te)return Promise.resolve();const Je=!J&&SB(T4(de.fullPath,0))||(De||!J)&&history.state&&history.state.scroll||null;return ca().then(()=>Te(de,X,Je)).then(he=>he&&xB(he)).catch(he=>Q(he,de,X))}const ae=de=>i.go(de);let H;const Z=new Set,me={currentRoute:l,listening:!0,addRoute:m,removeRoute:x,clearRoutes:e.clearRoutes,hasRoute:k,getRoutes:E,resolve:A,options:t,push:Y,replace:te,go:ae,back:()=>ae(-1),forward:()=>ae(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:$.add,isReady:_e,install(de){const X=this;de.component("RouterLink",_g),de.component("RouterView",bE),de.config.globalProperties.$router=X,Object.defineProperty(de.config.globalProperties,"$route",{enumerable:!0,get:()=>er(l)}),sp&&!H&&l.value===Zh&&(H=!0,Y(i.location).catch(Te=>{}));const J={};for(const Te in Zh)Object.defineProperty(J,Te,{get:()=>l.value[Te],enumerable:!0});de.provide($y,X),de.provide(F_,m_(J)),de.provide(gb,l);const De=de.unmount;Z.add(de),de.unmount=function(){Z.delete(de),Z.size<1&&(c=Zh,j&&j(),j=null,l.value=Zh,H=!1,re=!1),De()}}};function pe(de){return de.reduce((X,J)=>X.then(()=>F(J)),Promise.resolve())}return me}function JB(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>Mp(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Mp(c,l))||i.push(l))}return[n,r,i]}function Nm(){return Eu($y)}function QB(t){return Eu(F_)}const ru=jp("notification",()=>{const t=Ct([]),e=Ct(0),n=Ct(null),r=Jn(()=>[...t.value].sort((p,v)=>v.timestamp-p.timestamp));function i({type:p,message:v,duration:m=5e3}){const x=++e.value,E=Date.now(),k={id:x,type:p,message:v,duration:m,timestamp:E};return t.value.push(k),n.value=x,m>0&&setTimeout(()=>{c(x)},m),x}const s=(p,v=5e3)=>i({type:"success",message:p,duration:v}),o=(p,v=5e3)=>i({type:"error",message:p,duration:v}),a=(p,v=5e3)=>i({type:"info",message:p,duration:v}),l=(p,v=5e3)=>i({type:"warning",message:p,duration:v});function c(p){const v=t.value.findIndex(m=>m.id===p);v!==-1&&t.value.splice(v,1),n.value===p&&(n.value=null)}function d(){t.value=[],n.value=null}return{notifications:r,lastAddedId:n,addNotification:i,removeNotification:c,clearAll:d,success:s,error:o,info:a,warning:l}}),eR=Object.freeze(Object.defineProperty({__proto__:null,useNotificationStore:ru},Symbol.toStringTag,{value:"Module"}));var Ca=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function j_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _E(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}function tR(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var wE=tR,nR=typeof Ca=="object"&&Ca&&Ca.Object===Object&&Ca,rR=nR,iR=rR,sR=typeof self=="object"&&self&&self.Object===Object&&self,oR=iR||sR||Function("return this")(),xE=oR,aR=xE,lR=function(){return aR.Date.now()},uR=lR,cR=/\s/;function hR(t){for(var e=t.length;e--&&cR.test(t.charAt(e)););return e}var dR=hR,fR=dR,pR=/^\s+/;function gR(t){return t&&t.slice(0,fR(t)+1).replace(pR,"")}var mR=gR,vR=xE,yR=vR.Symbol,LE=yR,G4=LE,SE=Object.prototype,bR=SE.hasOwnProperty,_R=SE.toString,ng=G4?G4.toStringTag:void 0;function wR(t){var e=bR.call(t,ng),n=t[ng];try{t[ng]=void 0;var r=!0}catch{}var i=_R.call(t);return r&&(e?t[ng]=n:delete t[ng]),i}var xR=wR,LR=Object.prototype,SR=LR.toString;function CR(t){return SR.call(t)}var ER=CR,q4=LE,PR=xR,MR=ER,kR="[object Null]",AR="[object Undefined]",Y4=q4?q4.toStringTag:void 0;function TR(t){return t==null?t===void 0?AR:kR:Y4&&Y4 in Object(t)?PR(t):MR(t)}var DR=TR;function OR(t){return t!=null&&typeof t=="object"}var NR=OR,IR=DR,BR=NR,RR="[object Symbol]";function FR(t){return typeof t=="symbol"||BR(t)&&IR(t)==RR}var jR=FR,zR=mR,K4=wE,$R=jR,Z4=NaN,VR=/^[-+]0x[0-9a-f]+$/i,UR=/^0b[01]+$/i,HR=/^0o[0-7]+$/i,WR=parseInt;function GR(t){if(typeof t=="number")return t;if($R(t))return Z4;if(K4(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=K4(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=zR(t);var n=UR.test(t);return n||HR.test(t)?WR(t.slice(2),n?2:8):VR.test(t)?Z4:+t}var qR=GR,YR=wE,K1=uR,X4=qR,KR="Expected a function",ZR=Math.max,XR=Math.min;function JR(t,e,n){var r,i,s,o,a,l,c=0,d=!1,p=!1,v=!0;if(typeof t!="function")throw new TypeError(KR);e=X4(e)||0,YR(n)&&(d=!!n.leading,p="maxWait"in n,s=p?ZR(X4(n.maxWait)||0,e):s,v="trailing"in n?!!n.trailing:v);function m(ge){var fe=r,I=i;return r=i=void 0,c=ge,o=t.apply(I,fe),o}function x(ge){return c=ge,a=setTimeout(A,e),d?m(ge):o}function E(ge){var fe=ge-l,I=ge-c,F=e-fe;return p?XR(F,s-I):F}function k(ge){var fe=ge-l,I=ge-c;return l===void 0||fe>=e||fe<0||p&&I>=s}function A(){var ge=K1();if(k(ge))return D(ge);a=setTimeout(A,E(ge))}function D(ge){return a=void 0,v&&r?m(ge):(r=i=void 0,o)}function V(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function Y(){return a===void 0?o:D(K1())}function te(){var ge=K1(),fe=k(ge);if(r=arguments,i=this,l=ge,fe){if(a===void 0)return x(l);if(p)return clearTimeout(a),a=setTimeout(A,e),m(l)}return a===void 0&&(a=setTimeout(A,e)),o}return te.cancel=V,te.flush=Y,te}var QR=JR;const eF=j_(QR),tF={class:"relative w-full"},nF={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},rF=["onClick"],J4=js({__name:"SearchBar",emits:["select-location"],setup(t,{emit:e}){const n=Ct(""),r=Ct([]),i=e,s=eF(async l=>{if(l.length<3){r.value=[];return}try{const d=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(l)}`)).json();r.value=d}catch(c){console.error("Erreur lors de la recherche d'adresse:",c),r.value=[]}},300);function o(){s(n.value)}function a(l){n.value=l.display_name,r.value=[],i("select-location",{lat:parseFloat(l.lat),lng:parseFloat(l.lon)})}return(l,c)=>(Ie(),je("div",tF,[On(C("input",{"onUpdate:modelValue":c[0]||(c[0]=d=>n.value=d),onInput:o,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[Fr,n.value]]),r.value.length>0?(Ie(),je("div",nF,[(Ie(!0),je(Mn,null,gr(r.value,d=>(Ie(),je("div",{key:d.place_id,onClick:p=>a(d),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Ot(d.display_name),9,rF))),128))])):en("",!0)]))}}),iF={class:"perf-title"},sF={class:"perf-basic-stats"},oF={class:"perf-stat"},aF={class:"perf-stat"},lF={class:"perf-expand-btn"},uF={key:0,class:"perf-content"},cF={class:"perf-section"},hF={class:"perf-metrics"},dF={class:"perf-metric"},fF={class:"perf-metric-value"},pF={class:"perf-metric"},gF={class:"perf-metric-value"},mF={class:"perf-metric"},vF={class:"perf-metric-value"},yF={class:"perf-metric"},bF={class:"perf-metric-value"},_F={class:"perf-section"},wF={class:"perf-metrics"},xF={key:0,class:"perf-metric"},LF={class:"perf-metric-value"},SF={key:1,class:"perf-metric"},CF={class:"perf-metric-value"},EF={key:2,class:"perf-metric"},PF={class:"perf-metric-value"},MF={class:"perf-section"},kF={class:"perf-table"},AF={class:"perf-table-cell"},TF={class:"perf-table-cell"},DF={class:"perf-table-cell"},OF={class:"perf-table-cell"},NF=["onClick"],IF={key:0,class:"perf-empty"},BF=js({__name:"PerformancePanel",props:{position:{}},setup(t){const n=t.position||"bottom-left",r=Ct(!1),{isQueryParamEnabled:i,isRecording:s,measures:o,longTasks:a,memorySnapshots:l,framesPerSecond:c,operationHistory:d,startRecording:p,stopRecording:v,clearRecording:m,captureMemorySnapshot:x,getSlowOperations:E,getPerformanceReport:k,getOperationDetails:A}=Vp(),D=Jn(()=>{const N=k()??{totalMeasures:0,totalLongTasks:0,slowestOperations:[],averageFps:0,memoryUsage:null};return{totalMeasures:N.totalMeasures,totalLongTasks:N.totalLongTasks,averageDuration:N.slowestOperations.length>0?N.slowestOperations.reduce((j,z)=>j+z.duration,0)/N.slowestOperations.length:0,fps:N.averageFps,slowestOperations:N.slowestOperations,memoryUsage:N.memoryUsage}}),V=Jn(()=>(k()??{slowestOperations:[]}).slowestOperations.slice(0,5).map(j=>({operation:j.name,component:j.component||"unknown",durationMs:j.duration,timestamp:j.startTime}))),Y=Ct(null);go(()=>{i.value&&(Y.value=window.setInterval(()=>{x()},1e3))}),Zu(()=>{Y.value!==null&&clearInterval(Y.value)});function te(N){return N===void 0?"N/A":N<1024?N+" B":N<1024*1024?(N/1024).toFixed(2)+" KB":N<1024*1024*1024?(N/(1024*1024)).toFixed(2)+" MB":(N/(1024*1024*1024)).toFixed(2)+" GB"}function ge(N){return N.toFixed(2)}const fe=()=>{x()};function I(){const N=k(),j="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(N,null,2)),z=document.createElement("a");z.setAttribute("href",j),z.setAttribute("download","performance_report.json"),document.body.appendChild(z),z.click(),z.remove()}function F(){m(),fe()}function K(){const N=k();navigator.clipboard.writeText(JSON.stringify(N,null,2)).then(()=>{alert("Données de performance copiées dans le presse-papiers")}).catch(j=>{console.error("Erreur lors de la copie des données",j),alert("Erreur lors de la copie des données")})}async function B(N){const j=A(N.operation,N.timestamp);if(!j){alert("Impossible de trouver les détails de cette opération");return}const z={operation:{...j.operation,startTimeRelative:"0ms",startTimeAbsolute:new Date(j.operation.startTime).toISOString()},context:{...j.context,relatedOperations:j.context.relatedOperations.map(U=>({...U,startTime:`+${U.startTime.toFixed(2)}ms`})),longTasks:j.context.longTasks.map(U=>({...U,startTime:`+${U.startTime.toFixed(2)}ms`})),memorySnapshots:j.context.memorySnapshots.map(U=>({...U,timestamp:`+${U.timestamp.toFixed(2)}ms`,usedJSHeapSize:U.usedJSHeapSize?te(U.usedJSHeapSize):"N/A",totalJSHeapSize:U.totalJSHeapSize?te(U.totalJSHeapSize):"N/A"}))},summary:{...j.summary,memoryDelta:te(j.summary.memoryDelta),maxLongTaskDuration:`${j.summary.maxLongTaskDuration.toFixed(2)}ms`}};try{await navigator.clipboard.writeText(JSON.stringify(z,null,2)),alert("Détails de l'opération copiés dans le presse-papiers")}catch(U){console.error("Erreur lors de la copie des détails",U),alert("Erreur lors de la copie des détails")}}return(N,j)=>{var z,U,$,re,Q,_e;return er(i)?(Ie(),je("div",{key:0,class:Ti(["performance-panel",`position-${er(n)}`,{expanded:r.value}])},[C("div",{class:"perf-header",onClick:j[0]||(j[0]=we=>r.value=!r.value)},[C("div",iF,[C("div",{class:Ti(["perf-indicator",{active:er(s)}])},null,2),j[1]||(j[1]=C("span",null,"Performance",-1))]),C("div",sF,[C("span",oF,Ot(D.value.fps)+" FPS",1),C("span",aF,Ot(ge(D.value.averageDuration))+"ms",1)]),C("button",lF,Ot(r.value?"▼":"▲"),1)]),r.value?(Ie(),je("div",uF,[C("div",cF,[j[6]||(j[6]=C("h3",null,"Métriques générales",-1)),C("div",hF,[C("div",dF,[j[2]||(j[2]=C("span",{class:"perf-metric-label"},"Mesures",-1)),C("span",fF,Ot(D.value.totalMeasures),1)]),C("div",pF,[j[3]||(j[3]=C("span",{class:"perf-metric-label"},"Tâches longues",-1)),C("span",gF,Ot(D.value.totalLongTasks),1)]),C("div",mF,[j[4]||(j[4]=C("span",{class:"perf-metric-label"},"Durée moyenne",-1)),C("span",vF,Ot(ge(D.value.averageDuration))+"ms",1)]),C("div",yF,[j[5]||(j[5]=C("span",{class:"perf-metric-label"},"FPS",-1)),C("span",bF,Ot(D.value.fps),1)])])]),C("div",_F,[j[10]||(j[10]=C("h3",null,"Mémoire",-1)),C("div",wF,[((z=D.value.memoryUsage)==null?void 0:z.usedJSHeapSize)!==void 0?(Ie(),je("div",xF,[j[7]||(j[7]=C("span",{class:"perf-metric-label"},"Utilisée",-1)),C("span",LF,Ot(te((U=D.value.memoryUsage)==null?void 0:U.usedJSHeapSize)),1)])):en("",!0),(($=D.value.memoryUsage)==null?void 0:$.totalJSHeapSize)!==void 0?(Ie(),je("div",SF,[j[8]||(j[8]=C("span",{class:"perf-metric-label"},"Totale",-1)),C("span",CF,Ot(te((re=D.value.memoryUsage)==null?void 0:re.totalJSHeapSize)),1)])):en("",!0),((Q=D.value.memoryUsage)==null?void 0:Q.jsHeapSizeLimit)!==void 0?(Ie(),je("div",EF,[j[9]||(j[9]=C("span",{class:"perf-metric-label"},"Limite",-1)),C("span",PF,Ot(te((_e=D.value.memoryUsage)==null?void 0:_e.jsHeapSizeLimit)),1)])):en("",!0)])]),C("div",MF,[j[13]||(j[13]=C("h3",null,"Opérations les plus lentes",-1)),C("div",kF,[j[12]||(j[12]=eu('<div class="perf-table-header" data-v-fefe39b0><div class="perf-table-cell" data-v-fefe39b0>Opération</div><div class="perf-table-cell" data-v-fefe39b0>Composant</div><div class="perf-table-cell" data-v-fefe39b0>Durée</div><div class="perf-table-cell" data-v-fefe39b0>Actions</div></div>',1)),(Ie(!0),je(Mn,null,gr(V.value,we=>(Ie(),je("div",{class:"perf-table-row",key:we.timestamp},[C("div",AF,Ot(we.operation),1),C("div",TF,Ot(we.component),1),C("div",DF,Ot(ge(we.durationMs))+"ms",1),C("div",OF,[C("button",{onClick:nt=>B(we),class:"perf-action-button",title:"Copier les détails"},j[11]||(j[11]=[C("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,NF)])]))),128)),V.value.length===0?(Ie(),je("div",IF," Aucune opération enregistrée ")):en("",!0)])]),C("div",{class:"perf-actions"},[C("button",{onClick:F,class:"perf-button"}," Réinitialiser "),C("button",{onClick:I,class:"perf-button"}," Télécharger "),C("button",{onClick:K,class:"perf-button"}," Copier ")])])):en("",!0)],2)):en("",!0)}}}),jh=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},RF=jh(BF,[["__scopeId","data-v-fefe39b0"]]),FF={key:0,class:"pwa-update-notification"},jF=js({__name:"PWAUpdateNotification",setup(t,{expose:e}){const n=Ct(!1),r=async()=>{window.location.reload(),n.value=!1},i=()=>{n.value=!1};return e({showUpdateNotification:n,refreshApp:r,closeNotification:i}),(s,o)=>n.value?(Ie(),je("div",FF,[C("div",{class:"pwa-update-content"},[o[0]||(o[0]=C("p",null,"Une nouvelle version est disponible",-1)),C("div",{class:"pwa-update-actions"},[C("button",{onClick:r,class:"pwa-update-button"},"Mettre à jour"),C("button",{onClick:i,class:"pwa-close-button"},"Plus tard")])])])):en("",!0)}}),zF=jh(jF,[["__scopeId","data-v-aa687693"]]),$F="/static/frontend/img/icons/android-chrome-192x192.png",VF={class:"prompt-content"},UF={class:"prompt-body"},HF={key:0,class:"install-instructions ios"},WF={key:1,class:"install-instructions android"},GF={key:2,class:"install-instructions desktop"},qF={key:3,class:"install-instructions desktop"},YF=js({__name:"PWAInstallPrompt",setup(t){const e=Ct(!1),n=Ct(!1),r=Ct(null);Ct(null);const i=Ct(!1),s=Ct(!1),o=Ct(!1),a=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,l=()=>{const m=localStorage.getItem("pwaPromptLastClosed");if(!m)return!1;const x=3*24*60*60*1e3;return Date.now()-parseInt(m)<x},c=()=>{i.value=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,s.value=/Android/.test(navigator.userAgent),o.value=!i.value&&!s.value,window.addEventListener("beforeinstallprompt",m=>{m.preventDefault(),r.value=m,e.value=!0,n.value=!0}),window.addEventListener("appinstalled",m=>{console.log("Application installée avec succès",m),e.value=!1}),!a()&&(l()||setTimeout(()=>{e.value=!0,n.value=!0},3e3))},d=()=>{window.removeEventListener("beforeinstallprompt",()=>{}),window.removeEventListener("appinstalled",()=>{})};go(()=>{c()}),Td(()=>{d()});const p=async()=>{if(!r.value){console.log("Installation non disponible");return}try{r.value.prompt();const m=await r.value.userChoice;r.value=null,m.outcome==="accepted"?(console.log("Installation acceptée"),e.value=!1):console.log("Installation refusée")}catch(m){console.error("Erreur lors de l'installation:",m)}},v=()=>{e.value=!1,localStorage.setItem("pwaPromptLastClosed",Date.now().toString())};return(m,x)=>e.value?(Ie(),je("div",{key:0,class:Ti(["pwa-install-prompt",{fullscreen:n.value}])},[C("div",VF,[C("div",{class:"prompt-header"},[x[1]||(x[1]=C("div",{class:"app-info"},[C("img",{src:$F,alt:"TagMap Logo",class:"app-logo"}),C("div",{class:"app-details"},[C("h2",null,"Installer TagMap"),C("p",null,"Solution innovante de cartographie et gestion de projets")])],-1)),C("button",{onClick:v,class:"close-button","aria-label":"Fermer"},x[0]||(x[0]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[C("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),C("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),C("div",UF,[i.value?(Ie(),je("div",HF,x[2]||(x[2]=[eu('<h3 data-v-48772823>Pour installer l&#39;application sur votre iPhone :</h3><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>1</div><div class="step-content" data-v-48772823><p data-v-48772823>Appuyez sur <strong data-v-48772823>Partager</strong> <span class="ios-share-icon" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" data-v-48772823></path><polyline points="16 6 12 2 8 6" data-v-48772823></polyline><line x1="12" y1="2" x2="12" y2="15" data-v-48772823></line></svg></span></p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>2</div><div class="step-content" data-v-48772823><p data-v-48772823>Faites défiler et appuyez sur <strong data-v-48772823>Sur l&#39;écran d&#39;accueil</strong></p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>3</div><div class="step-content" data-v-48772823><p data-v-48772823>Appuyez sur <strong data-v-48772823>Ajouter</strong> en haut à droite</p></div></div>',4)]))):s.value?(Ie(),je("div",WF,[x[3]||(x[3]=C("h3",null,"Pour installer l'application sur votre appareil :",-1)),x[4]||(x[4]=C("div",{class:"instruction-step"},[C("div",{class:"step-number"},"1"),C("div",{class:"step-content"},[C("p",null,"Appuyez sur le bouton ci-dessous")])],-1)),C("button",{onClick:p,class:"install-button"}," Installer l'application ")])):o.value?(Ie(),je("div",GF,[x[5]||(x[5]=C("h3",null,"Pour installer l'application sur votre ordinateur :",-1)),x[6]||(x[6]=C("div",{class:"instruction-step"},[C("div",{class:"step-number"},"1"),C("div",{class:"step-content"},[C("p",null,"Cliquez sur le bouton ci-dessous pour installer l'application")])],-1)),C("button",{onClick:p,class:"install-button"}," Installer l'application ")])):(Ie(),je("div",qF,x[7]||(x[7]=[eu('<h3 data-v-48772823>Pour installer l&#39;application sur votre ordinateur :</h3><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>1</div><div class="step-content" data-v-48772823><p data-v-48772823>Cliquez sur l&#39;icône d&#39;installation dans la barre d&#39;adresse</p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>2</div><div class="step-content" data-v-48772823><p data-v-48772823>Cliquez sur &quot;Installer&quot;</p></div></div>',3)])))]),C("div",{class:"prompt-footer"},[x[8]||(x[8]=eu('<div class="benefits" data-v-48772823><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" data-v-48772823></path></svg><span data-v-48772823>Sécurisé</span></div><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><circle cx="12" cy="12" r="10" data-v-48772823></circle><polyline points="12 6 12 12 16 14" data-v-48772823></polyline></svg><span data-v-48772823>Rapide</span></div><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" data-v-48772823></path></svg><span data-v-48772823>Hors ligne</span></div></div>',1)),C("button",{onClick:v,class:"remind-later"},"Me le rappeler plus tard")])])],2)):en("",!0)}}),KF=jh(YF,[["__scopeId","data-v-48772823"]]),ZF={class:"h-screen flex flex-col"},XF={key:0,class:"bg-white shadow-sm z-[2500] flex-shrink-0"},JF={class:"mx-auto px-4 sm:px-6 lg:px-8"},QF={class:"flex h-16 items-center justify-between"},e9={class:"flex items-center"},t9={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n9={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},r9={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},i9={class:"hidden md:flex md:ml-6 space-x-8"},s9={key:0,class:"flex-1 mx-2"},o9={class:"hidden md:block"},a9={class:"md:hidden"},l9={key:1,class:"flex-1"},u9={class:"flex items-center space-x-2 md:space-x-4"},c9={class:"relative"},h9={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},d9={class:"flex items-center justify-between w-full"},f9={class:"flex items-center space-x-3"},p9={class:"max-h-72 overflow-y-auto"},g9={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},m9={class:"flex items-start"},v9={class:"flex-shrink-0 mr-3"},y9={key:0,class:"h-6 w-6 md:h-5 md:w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},b9={key:1,class:"h-6 w-6 md:h-5 md:w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},_9={key:2,class:"h-6 w-6 md:h-5 md:w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},w9={key:3,class:"h-6 w-6 md:h-5 md:w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},x9={class:"flex-1"},L9={class:"text-sm md:text-sm text-gray-800"},S9=["onClick"],C9={class:"relative"},E9={class:"hidden md:flex flex-col items-end"},P9={class:"text-sm font-medium text-gray-700"},M9={key:0,class:"text-xs text-gray-500"},k9=["src","alt"],A9={class:"md:hidden px-4 py-2 border-b border-gray-100 flex justify-between items-center"},T9={class:"text-sm font-semibold text-gray-700"},D9={class:"text-xs text-gray-500"},O9={key:0,class:"md:hidden fixed inset-0 bg-white shadow-lg z-[3000] border-t border-gray-200",style:{top:"var(--header-height)"}},N9={class:"space-y-1 px-2 pb-3 pt-2"},I9=js({__name:"App",setup(t){const e=Nm(),n=pa(),r=ru(),i=Ct(!1),s=Ct(!1),o=Ct(!1),a=Ct(!1),l=Ct(null),c=Ct(!1),d=Ct(!1),p=Ct(null),v=Ct("13px"),m=Ct("65px"),x=Ct(null),E=Ct(null),k=Ct(!1);function A(){d.value=window.innerWidth<768}go(()=>{A(),window.addEventListener("resize",A),window.addEventListener("resize",D),window.addEventListener("pwa-update-available",()=>{k.value=!0})}),Td(()=>{window.removeEventListener("resize",A),window.removeEventListener("resize",D),window.removeEventListener("pwa-update-available",()=>{})});function D(){if(!p.value)return;const U=p.value.getBoundingClientRect();v.value=`${U.top+window.scrollY+5}px`;const $=U.left+U.width/2;m.value=`${window.innerWidth-$-22}px`}const V=Jn(()=>{const U=n.user;if(!U)return"";const $=`${U.first_name} ${U.last_name.toUpperCase()}`;return U.company_name?`${$} (${U.company_name})`:$}),Y=Jn(()=>{var $;switch(($=n.user)==null?void 0:$.user_type){case"admin":return"Accès administrateur";case"entreprise":return"Accès entreprise";case"salarie":return"Accès salarie";case"visiteur":return"Accès visiteur";default:return""}}),te=Jn(()=>{var U;return((U=n.user)==null?void 0:U.user_type)==="admin"}),ge=Jn(()=>n.isAuthenticated),fe=[{name:"Carte",to:"/"},{name:"Météo",to:"/meteo"},{name:"Notes",to:"/notes"}],I=Jn(()=>{var $;if(!ge.value)return[];const U=[...fe];return(te.value||(($=n.user)==null?void 0:$.user_type)==="entreprise")&&U.push({name:"Utilisateurs",to:"/users"}),U}),F=Jn(()=>ge.value?[{name:"Mon profil",to:"/profile"}]:[]);async function K(){try{await n.logout(),e.push("/login")}catch(U){console.error("Erreur lors de la déconnexion:",U)}}function B(U){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:U.lat,lng:U.lng,zoom:16}}))}go(async()=>{console.log("App mounted, checking auth...");try{if(localStorage.getItem("token")){console.log("Token found, checking auth..."),await n.checkAuth(),await n.fetchUserProfile();const $=localStorage.getItem("lastPlanId");$&&window.dispatchEvent(new CustomEvent("load-last-plan",{detail:{planId:$}}))}else console.log("No token found")}catch(U){console.error("Auth check error:",U),e.push("/login")}});const N=Jn(()=>{const U="TagMap";if(!ge.value)return`${U} - Connexion`;const $=e.currentRoute.value,Q={home:"Carte",meteo:"Météo",notes:"Notes",users:"Utilisateurs",profile:"Mon profil",changePassword:"Changement de mot de passe",map:"Carte"}[$.name]||"";return Q?`${U} - ${Q}`:U});Di(N,U=>{document.title=U},{immediate:!0});const j=Jn(()=>r.notifications.length);function z(){r.clearAll(),o.value=!1}return dm(()=>{if(r.lastAddedId!==null){const U=r.notifications.find($=>$.id===r.lastAddedId);U&&ca(()=>{D(),a.value=!0,l.value={id:U.id,message:U.message,type:U.type},requestAnimationFrame(()=>{setTimeout(()=>{c.value=!0,setTimeout(()=>{c.value=!1,setTimeout(()=>{var $;(($=l.value)==null?void 0:$.id)===U.id&&(l.value=null,a.value=!1)},300)},4e3)},50)})})}}),(U,$)=>{var re;return Ie(),je("div",ZF,[ge.value?(Ie(),je("header",XF,[C("nav",JF,[C("div",QF,[C("div",e9,[C("button",{onClick:$[0]||($[0]=Q=>s.value=!s.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden"},[$[7]||($[7]=C("span",{class:"sr-only"},"Ouvrir le menu",-1)),(Ie(),je("svg",t9,[s.value?(Ie(),je("path",r9)):(Ie(),je("path",n9))]))]),yi(er(_g),{to:"/",class:"text-xl font-semibold text-primary-600 truncate ml-2 md:ml-0"},{default:Gu(()=>$[8]||($[8]=[C("span",{class:"md:inline hidden"},"TagMap",-1),C("span",{class:"md:hidden inline"},"TM",-1)])),_:1}),C("div",i9,[(Ie(!0),je(Mn,null,gr(I.value,Q=>(Ie(),Va(er(_g),{key:Q.name,to:Q.to,class:Ti(["text-sm font-medium transition-colors duration-200",[U.$route.path===Q.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Gu(()=>[ui(Ot(Q.name),1)]),_:2},1032,["to","class"]))),128))])]),U.$route.path==="/"?(Ie(),je("div",s9,[C("div",o9,[yi(J4,{onSelectLocation:B})]),C("div",a9,[yi(J4,{onSelectLocation:B,class:"max-w-full"})])])):(Ie(),je("div",l9)),C("div",u9,[C("div",c9,[C("button",{ref_key:"bellButtonRef",ref:p,onClick:$[1]||($[1]=Q=>o.value=!o.value),class:Ti(["relative flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"animate-bell":a.value}])},$[9]||($[9]=[C("span",{class:"sr-only"},"Voir les notifications",-1),C("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)]),2),o.value?(Ie(),je("div",{key:0,class:"absolute right-0 mt-2 md:w-80 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:tu(d.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[C("div",h9,[C("div",d9,[$[11]||($[11]=C("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),C("div",f9,[j.value>0?(Ie(),je("button",{key:0,onClick:z,class:"text-xs text-primary-600 hover:text-primary-800"}," Tout effacer ")):en("",!0),C("button",{onClick:$[2]||($[2]=Q=>o.value=!1),class:"md:hidden p-1 rounded-full hover:bg-gray-100"},$[10]||($[10]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),C("div",p9,[j.value===0?(Ie(),je("div",g9," Aucune notification ")):en("",!0),(Ie(!0),je(Mn,null,gr(er(r).notifications,Q=>(Ie(),je("div",{key:Q.id,class:"px-4 py-3 md:py-3 py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50"},[C("div",m9,[C("div",v9,[Q.type==="success"?(Ie(),je("svg",y9,$[12]||($[12]=[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Q.type==="error"?(Ie(),je("svg",b9,$[13]||($[13]=[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):Q.type==="warning"?(Ie(),je("svg",_9,$[14]||($[14]=[C("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(Ie(),je("svg",w9,$[15]||($[15]=[C("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))]),C("div",x9,[C("p",L9,Ot(Q.message),1),C("button",{onClick:_e=>er(r).removeNotification(Q.id),class:"text-xs md:text-xs text-primary-600 hover:text-primary-800 mt-2 md:mt-1 py-1 md:py-0"}," Fermer ",8,S9)])])]))),128))])],4)):en("",!0)]),C("div",C9,[C("button",{onClick:$[3]||($[3]=Q=>i.value=!i.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[C("div",E9,[C("span",P9,Ot(V.value),1),Y.value?(Ie(),je("span",M9,Ot(Y.value),1)):en("",!0)]),C("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:((re=er(n).user)==null?void 0:re.logo)||"https://ui-avatars.com/api/?name="+encodeURIComponent(V.value),alt:V.value},null,8,k9)]),i.value?(Ie(),je("div",{key:0,class:"absolute right-0 mt-2 md:w-48 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:tu(d.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[C("div",A9,[C("div",null,[C("div",T9,Ot(V.value),1),C("div",D9,Ot(Y.value),1)]),C("button",{onClick:$[4]||($[4]=Q=>i.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},$[16]||($[16]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),(Ie(!0),je(Mn,null,gr(F.value,Q=>(Ie(),Va(er(_g),{key:Q.name,to:Q.to,class:"block px-4 md:py-2 py-3 text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",onClick:$[5]||($[5]=_e=>i.value=!1)},{default:Gu(()=>[ui(Ot(Q.name),1)]),_:2},1032,["to"]))),128)),C("button",{onClick:K,class:"block w-full px-4 md:py-2 py-3 text-left text-sm text-red-600 hover:bg-gray-50 font-medium"}," Déconnexion ")],4)):en("",!0)])])]),s.value?(Ie(),je("div",O9,[C("div",N9,[(Ie(!0),je(Mn,null,gr(I.value,Q=>(Ie(),Va(er(_g),{key:Q.name,to:Q.to,class:Ti(["block px-3 py-2 rounded-md text-base font-medium",[U.$route.path===Q.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:$[6]||($[6]=_e=>s.value=!1)},{default:Gu(()=>[ui(Ot(Q.name),1)]),_:2},1032,["to","class"]))),128))])])):en("",!0)])])):en("",!0),C("main",{class:Ti([U.$route.path==="/"&&!d.value?"overflow-hidden":"overflow-auto","flex-1 flex flex-col","md:h-[calc(100vh-64px)]"])},[yi(er(bE))],2),yi(RF,{position:"bottom-left"}),yi(zF,{ref_key:"pwaUpdateNotification",ref:x},null,512),yi(KF,{ref_key:"pwaInstallPrompt",ref:E},null,512)])}}}),B9="modulepreload",R9=function(t){return"/static/frontend/"+t},Q4={},Mh=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=R9(l),l in Q4)return;Q4[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":B9,c||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),c)return new Promise((v,m)=>{p.addEventListener("load",v),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},F9={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},j9={class:"max-w-md w-full space-y-8"},z9={class:"space-y-4"},$9={class:"mt-1"},V9={class:"mt-1"},U9={class:"mt-1"},H9={key:0,class:"rounded-md bg-red-50 p-4"},W9={class:"flex"},G9={class:"ml-3"},q9={class:"text-sm font-medium text-red-800"},Y9={key:1,class:"rounded-md bg-yellow-50 p-4"},K9={class:"flex"},Z9={class:"ml-3"},X9={class:"mt-2 text-sm text-yellow-700"},J9={class:"list-disc pl-5 space-y-1"},Q9=["disabled"],ej={class:"absolute left-0 inset-y-0 flex items-center pl-3"},tj={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},nj={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},rj=js({__name:"ChangePasswordForm",setup(t){const e=Nm(),n=pa(),r=iu({oldPassword:"",newPassword:"",confirmPassword:""}),i=Ct(!1),s=Ct("");go(()=>{var c,d;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:n.isAuthenticated,userId:(c=n.user)==null?void 0:c.id,mustChangePassword:(d=n.user)==null?void 0:d.must_change_password})});const o=Jn(()=>{const c=[];return r.newPassword&&r.newPassword.length<8&&c.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&c.push("Les mots de passe ne correspondent pas"),c}),a=Jn(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function l(){var c,d,p,v,m,x,E,k;if(!a.value){s.value="Veuillez corriger les erreurs avant de continuer";return}if(!((c=n.user)!=null&&c.id)){s.value="Erreur : utilisateur non identifié";return}i.value=!0,s.value="";try{console.log("Submitting password change..."),await n.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),e.push("/")}catch(A){console.error("Password change failed:",A),(p=(d=A.response)==null?void 0:d.data)!=null&&p.detail?s.value=A.response.data.detail:(m=(v=A.response)==null?void 0:v.data)!=null&&m.old_password?s.value=A.response.data.old_password[0]:(E=(x=A.response)==null?void 0:x.data)!=null&&E.password?s.value=A.response.data.password[0]:((k=A.response)==null?void 0:k.status)===401?(s.value="Session expirée, veuillez vous reconnecter",await n.logout(),e.push("/login")):s.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(c,d)=>(Ie(),je("div",F9,[C("div",j9,[d[12]||(d[12]=C("div",null,[C("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),C("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),C("form",{class:"mt-8 space-y-6",onSubmit:Bh(l,["prevent"])},[C("div",z9,[C("div",null,[d[3]||(d[3]=C("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),C("div",$9,[On(C("input",{id:"old-password","onUpdate:modelValue":d[0]||(d[0]=p=>r.oldPassword=p),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[Fr,r.oldPassword]])])]),C("div",null,[d[4]||(d[4]=C("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),C("div",V9,[On(C("input",{id:"new-password","onUpdate:modelValue":d[1]||(d[1]=p=>r.newPassword=p),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[Fr,r.newPassword]])]),d[5]||(d[5]=C("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),C("div",null,[d[6]||(d[6]=C("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),C("div",U9,[On(C("input",{id:"confirm-password","onUpdate:modelValue":d[2]||(d[2]=p=>r.confirmPassword=p),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[Fr,r.confirmPassword]])])])]),s.value?(Ie(),je("div",H9,[C("div",W9,[d[7]||(d[7]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",G9,[C("h3",q9,Ot(s.value),1)])])])):en("",!0),o.value.length>0?(Ie(),je("div",Y9,[C("div",K9,[d[9]||(d[9]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),C("div",Z9,[d[8]||(d[8]=C("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),C("div",X9,[C("ul",J9,[(Ie(!0),je(Mn,null,gr(o.value,(p,v)=>(Ie(),je("li",{key:v},Ot(p),1))),128))])])])])])):en("",!0),C("div",null,[C("button",{type:"submit",disabled:i.value||!a.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[C("span",ej,[i.value?(Ie(),je("svg",nj,d[11]||(d[11]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Ie(),je("svg",tj,d[10]||(d[10]=[C("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),ui(" "+Ot(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,Q9)])],32)])]))}}),ij="/static/frontend/assets/background.svg",sj={class:"min-h-screen overflow-auto relative py-12 sm:px-6 lg:px-8"},oj={class:"container mx-auto relative z-10"},aj={class:"sm:mx-auto sm:w-full sm:max-w-md"},lj={class:"bg-white/95 backdrop-blur-sm py-8 px-6 shadow-xl rounded-xl sm:px-10 border border-white/20"},uj={key:0,class:"rounded-md bg-red-50 p-4"},cj={class:"flex"},hj={class:"ml-3"},dj={class:"text-sm font-medium text-red-800"},fj={class:"mt-1"},pj={class:"mt-1 relative"},gj=["type"],mj={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},vj={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},yj={class:"flex items-center justify-between"},bj={class:"flex items-center"},_j={class:"text-sm"},wj=["disabled"],xj={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Lj={class:"mt-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Sj={class:"mt-12"},Cj={class:"flex flex-wrap justify-center gap-2 mb-8"},Ej=["onClick"],Pj={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Mj={class:"flex items-center mb-4"},kj={class:"text-2xl mr-2"},Aj={class:"text-xl font-semibold text-gray-900"},Tj={class:"text-gray-600 text-sm"},Dj={key:0,class:"flex justify-center mt-8 gap-2"},Oj=["onClick"],Z1=6,Nj=js({__name:"LoginView",setup(t){const e=Nm(),n=pa(),r=Ct(!1),i=Ct(null),s=Ct(!1),o=Ct("Tous"),a=Ct(1),l=iu({username:"",password:"",rememberMe:!1}),c=[{type:"Liniculteur",sector:"Agriculture",icon:"🌾",text:"En tant qu'entreprise, j'ai mis en place un sous-compte « agriculteur » permettant la géolocalisation des parcelles. Cela offre à nos salariés et prestataires une visibilité complète sur l'ensemble des parcelles et facilite leur accès. De plus, ils peuvent y ajouter des notes et des photos si nécessaire. Grâce aux trackers, nous renforçons également la sécurité de nos machines contre le vol."},{type:"Agro industriel",sector:"Industrie",icon:"🏭",text:"La gestion des comptes et sous-comptes est un atout majeur pour limiter, filtrer et contrôler l'accès de nos salariés aux différentes tâches."},{type:"Agence de voyage",sector:"Tourisme",icon:"✈️",text:"L'outil nous permet de créer gratuitement et sans limite des sous-comptes clients, d'établir des itinéraires personnalisés avec des points d'intérêt."},{type:"Industriel agroalimentaire",sector:"Industrie",icon:"🌱",text:"Nous disposons d'un compte entreprise avec des sous-comptes dédiés à chaque culture. Nos techniciens et agriculteurs partenaires peuvent ainsi ajouter des annotations et photo sur les parcelles. Grâce aux stations météo connectées, nous optimisons la gestion des tours d'irrigation par secteur géographique en fonction des précipitations."},{type:"Conseil municipal",sector:"Collectivité",icon:"🏛️",text:"Cette solution nous permet de gagner en efficacité dans la gestion des tâches à réaliser, en les géolocalisant et en offrant à nos employés communaux la possibilité d'ajouter des commentaires et des photos sur chaque tâche géoréférencée."},{type:"Location de matériel",sector:"Services",icon:"🚜",text:"Cette solution nous permet de géolocaliser notre flotte grâce à des trackers sans abonnement, avec uniquement un abonnement à la plateforme."},{type:"Agriculteur",sector:"Agriculture",icon:"👨‍🌾",text:"J'ai équipé tous mes canons d'enrouleurs de trackers et de caméras pour dissuader le vol de batteries."},{type:"Semencier",sector:"Agriculture",icon:"🌱",text:"Nous assurons la géolocalisation de l'ensemble de nos parcelles en France."},{type:"Concessionnaire irrigation",sector:"Services",icon:"💧",text:"Nous avons géolocalisé tous les forages de nos clients et ajouté en commentaire la procédure d'entrée, facilitant ainsi le travail de nos techniciens et agriculteurs lors des interventions."},{type:"Entreprise paysagiste",sector:"Services",icon:"🌳",text:"Nous géolocalisons tous nos chantiers et ajoutons une photo du chantier terminé en commentaire, servant de preuve en cas de litige."}],d=Jn(()=>["Tous",...new Set(c.map(E=>E.sector))]),p=Jn(()=>{let x=o.value==="Tous"?c:c.filter(A=>A.sector===o.value);const E=(a.value-1)*Z1,k=E+Z1;return x.slice(E,k)}),v=Jn(()=>{const x=o.value==="Tous"?c:c.filter(E=>E.sector===o.value);return Math.ceil(x.length/Z1)});go(async()=>{var x;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE);try{if((x=window.INITIAL_STATE)!=null&&x.isAuthenticated){console.log("User is authenticated, redirecting to home"),e.push("/");return}await n.restoreSession()&&(console.log("Session restored, redirecting to home"),e.push("/"))}catch(E){console.error("Error during initialization:",E),i.value=null}});async function m(){var x,E,k,A,D,V,Y,te,ge;r.value=!0,i.value=null;try{if(!l.username||!l.password){i.value="Veuillez remplir tous les champs";return}await n.login(l.username,l.password),(x=n.user)!=null&&x.must_change_password?e.push("/change-password"):e.push("/")}catch(fe){console.error("Login error:",fe),((E=fe==null?void 0:fe.response)==null?void 0:E.status)===500?i.value="Le service est temporairement indisponible. Veuillez réessayer dans quelques instants.":((k=fe==null?void 0:fe.response)==null?void 0:k.status)===401||((A=fe==null?void 0:fe.response)==null?void 0:A.status)===403?i.value="Identifiants incorrects. Veuillez vérifier votre nom d'utilisateur et mot de passe.":(V=(D=fe==null?void 0:fe.response)==null?void 0:D.data)!=null&&V.detail?i.value=fe.response.data.detail:(ge=(te=(Y=fe==null?void 0:fe.response)==null?void 0:Y.data)==null?void 0:te.non_field_errors)!=null&&ge[0]?i.value=fe.response.data.non_field_errors[0]:(fe==null?void 0:fe.message)==="Network Error"?i.value="Impossible de se connecter au serveur. Veuillez vérifier votre connexion internet.":i.value="Une erreur est survenue lors de la connexion. Veuillez réessayer."}finally{r.value=!1}}return(x,E)=>{const k=_S("router-link");return Ie(),je("div",sj,[C("div",{class:"fixed inset-0 z-0",style:tu({backgroundImage:`url(${er(ij)})`,backgroundSize:"400px",backgroundRepeat:"repeat",filter:"blur(1px) opacity(0.15)"})},null,4),E[16]||(E[16]=C("div",{class:"fixed inset-0 z-0 bg-gradient-to-br from-white/40 via-transparent to-primary-900/10"},null,-1)),C("div",oj,[C("div",aj,[C("div",lj,[E[12]||(E[12]=C("div",{class:"text-center mb-8"},[C("h2",{class:"text-3xl font-bold text-gray-900 mb-2"}," TagMap "),C("p",{class:"text-sm text-gray-600"}," Solution innovante de cartographie et gestion de projets ")],-1)),C("form",{class:"space-y-6",onSubmit:Bh(m,["prevent"])},[i.value?(Ie(),je("div",uj,[C("div",cj,[E[4]||(E[4]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",hj,[C("h3",dj,Ot(i.value),1)])])])):en("",!0),C("div",null,[E[5]||(E[5]=C("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),C("div",fj,[On(C("input",{id:"username","onUpdate:modelValue":E[0]||(E[0]=A=>l.username=A),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[Fr,l.username]])])]),C("div",null,[E[8]||(E[8]=C("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),C("div",pj,[On(C("input",{id:"password","onUpdate:modelValue":E[1]||(E[1]=A=>l.password=A),type:s.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,gj),[[D_,l.password]]),C("button",{type:"button",onClick:E[2]||(E[2]=A=>s.value=!s.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[s.value?(Ie(),je("svg",mj,E[6]||(E[6]=[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(Ie(),je("svg",vj,E[7]||(E[7]=[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),C("div",yj,[C("div",bj,[On(C("input",{id:"remember-me","onUpdate:modelValue":E[3]||(E[3]=A=>l.rememberMe=A),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Ml,l.rememberMe]]),E[9]||(E[9]=C("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),C("div",_j,[yi(k,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Gu(()=>E[10]||(E[10]=[ui(" Mot de passe oublié ? ")])),_:1})])]),C("div",null,[C("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(Ie(),je("svg",xj,E[11]||(E[11]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):en("",!0),ui(" "+Ot(r.value?"Connexion en cours...":"Se connecter"),1)],8,wj)])],32)])]),C("div",Lj,[E[14]||(E[14]=eu('<div class="mb-12 bg-white/90 backdrop-blur-sm p-8 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-6" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>💡</span><h3 class="text-xl font-bold text-gray-900" data-v-9ff7ee32>Équipements Connectés sans Abonnement</h3></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-v-9ff7ee32><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32>📍</div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Tracker GPS solaire</h4><p class="text-gray-600" data-v-9ff7ee32>Géolocalisez et sécurisez votre matériel</p></div></div><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32>🌤️</div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Station météo</h4><p class="text-gray-600" data-v-9ff7ee32>Optimisez vos décisions avec des données en temps réel</p></div></div></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8" data-v-9ff7ee32><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>👀📌</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Carte Interactive</h3></div><p class="text-gray-600" data-v-9ff7ee32>Imaginez... Une carte interactive où tout est sous contrôle ! Tout est centralisé, organisé et accessible en un clin d&#39;œil !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>👥💻🔄</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Collaboration en Temps Réel</h3></div><p class="text-gray-600" data-v-9ff7ee32>Travail d&#39;équipe simplifié : Collaborez en temps réel sur une interface ultra-intuitive. Vos équipes restent synchronisées et efficaces !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>🚜📸</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Cerveau Cartographique</h3></div><p class="text-gray-600" data-v-9ff7ee32>Un cerveau cartographique : Dessinez, annotez, planifiez, suivez !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>🔐🔑</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Accès Sécurisé</h3></div><p class="text-gray-600" data-v-9ff7ee32>Accès sécurisé et intelligent : Gérez les droits d&#39;accès de vos salariés et prestataires en un clic.</p></div></div>',2)),C("div",Sj,[E[13]||(E[13]=C("h3",{class:"text-2xl font-bold text-center text-gray-900 mb-8"},"Ils utilisent TagMap",-1)),C("div",Cj,[(Ie(!0),je(Mn,null,gr(d.value,A=>(Ie(),je("button",{key:A,onClick:D=>o.value=A,class:Ti(["px-4 py-2 rounded-full text-sm font-medium transition-all duration-200",o.value===A?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},Ot(A),11,Ej))),128))]),C("div",Pj,[(Ie(!0),je(Mn,null,gr(p.value,A=>(Ie(),je("div",{key:A.type,class:"bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20 transition-all duration-300 hover:shadow-xl"},[C("div",Mj,[C("span",kj,Ot(A.icon),1),C("span",Aj,Ot(A.type),1)]),C("p",Tj,Ot(A.text),1)]))),128))]),v.value>1?(Ie(),je("div",Dj,[(Ie(!0),je(Mn,null,gr(v.value,A=>(Ie(),je("button",{key:A,onClick:D=>a.value=A,class:Ti(["w-8 h-8 rounded-full text-sm font-medium transition-all duration-200",a.value===A?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},Ot(A),11,Oj))),128))])):en("",!0)])]),E[15]||(E[15]=C("div",{class:"h-16"},null,-1))])])}}}),Ij=jh(Nj,[["__scopeId","data-v-9ff7ee32"]]),e5="/static/frontend/assets/logo.svg";var mb={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Ca,function(n){var r="1.9.4";function i(u){var y,P,G,ue;for(P=1,G=arguments.length;P<G;P++){ue=arguments[P];for(y in ue)u[y]=ue[y]}return u}var s=Object.create||function(){function u(){}return function(y){return u.prototype=y,new u}}();function o(u,y){var P=Array.prototype.slice;if(u.bind)return u.bind.apply(u,P.call(arguments,1));var G=P.call(arguments,2);return function(){return u.apply(y,G.length?G.concat(P.call(arguments)):arguments)}}var a=0;function l(u){return"_leaflet_id"in u||(u._leaflet_id=++a),u._leaflet_id}function c(u,y,P){var G,ue,Pe,ut;return ut=function(){G=!1,ue&&(Pe.apply(P,ue),ue=!1)},Pe=function(){G?ue=arguments:(u.apply(P,arguments),setTimeout(ut,y),G=!0)},Pe}function d(u,y,P){var G=y[1],ue=y[0],Pe=G-ue;return u===G&&P?u:((u-ue)%Pe+Pe)%Pe+ue}function p(){return!1}function v(u,y){if(y===!1)return u;var P=Math.pow(10,y===void 0?6:y);return Math.round(u*P)/P}function m(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function x(u){return m(u).split(/\s+/)}function E(u,y){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?s(u.options):{});for(var P in y)u.options[P]=y[P];return u.options}function k(u,y,P){var G=[];for(var ue in u)G.push(encodeURIComponent(P?ue.toUpperCase():ue)+"="+encodeURIComponent(u[ue]));return(!y||y.indexOf("?")===-1?"?":"&")+G.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function D(u,y){return u.replace(A,function(P,G){var ue=y[G];if(ue===void 0)throw new Error("No value provided for variable "+P);return typeof ue=="function"&&(ue=ue(y)),ue})}var V=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function Y(u,y){for(var P=0;P<u.length;P++)if(u[P]===y)return P;return-1}var te="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ge(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var fe=0;function I(u){var y=+new Date,P=Math.max(0,16-(y-fe));return fe=y+P,window.setTimeout(u,P)}var F=window.requestAnimationFrame||ge("RequestAnimationFrame")||I,K=window.cancelAnimationFrame||ge("CancelAnimationFrame")||ge("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function B(u,y,P){if(P&&F===I)u.call(y);else return F.call(window,o(u,y))}function N(u){u&&K.call(window,u)}var j={__proto__:null,extend:i,create:s,bind:o,get lastId(){return a},stamp:l,throttle:c,wrapNum:d,falseFn:p,formatNum:v,trim:m,splitWords:x,setOptions:E,getParamString:k,template:D,isArray:V,indexOf:Y,emptyImageUrl:te,requestFn:F,cancelFn:K,requestAnimFrame:B,cancelAnimFrame:N};function z(){}z.extend=function(u){var y=function(){E(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},P=y.__super__=this.prototype,G=s(P);G.constructor=y,y.prototype=G;for(var ue in this)Object.prototype.hasOwnProperty.call(this,ue)&&ue!=="prototype"&&ue!=="__super__"&&(y[ue]=this[ue]);return u.statics&&i(y,u.statics),u.includes&&(U(u.includes),i.apply(null,[G].concat(u.includes))),i(G,u),delete G.statics,delete G.includes,G.options&&(G.options=P.options?s(P.options):{},i(G.options,u.options)),G._initHooks=[],G.callInitHooks=function(){if(!this._initHooksCalled){P.callInitHooks&&P.callInitHooks.call(this),this._initHooksCalled=!0;for(var Pe=0,ut=G._initHooks.length;Pe<ut;Pe++)G._initHooks[Pe].call(this)}},y},z.include=function(u){var y=this.prototype.options;return i(this.prototype,u),u.options&&(this.prototype.options=y,this.mergeOptions(u.options)),this},z.mergeOptions=function(u){return i(this.prototype.options,u),this},z.addInitHook=function(u){var y=Array.prototype.slice.call(arguments,1),P=typeof u=="function"?u:function(){this[u].apply(this,y)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(P),this};function U(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=V(u)?u:[u];for(var y=0;y<u.length;y++)u[y]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var $={on:function(u,y,P){if(typeof u=="object")for(var G in u)this._on(G,u[G],y);else{u=x(u);for(var ue=0,Pe=u.length;ue<Pe;ue++)this._on(u[ue],y,P)}return this},off:function(u,y,P){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var G in u)this._off(G,u[G],y);else{u=x(u);for(var ue=arguments.length===1,Pe=0,ut=u.length;Pe<ut;Pe++)ue?this._off(u[Pe]):this._off(u[Pe],y,P)}return this},_on:function(u,y,P,G){if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}if(this._listens(u,y,P)===!1){P===this&&(P=void 0);var ue={fn:y,ctx:P};G&&(ue.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(ue)}},_off:function(u,y,P){var G,ue,Pe;if(this._events&&(G=this._events[u],!!G)){if(arguments.length===1){if(this._firingCount)for(ue=0,Pe=G.length;ue<Pe;ue++)G[ue].fn=p;delete this._events[u];return}if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}var ut=this._listens(u,y,P);if(ut!==!1){var Nt=G[ut];this._firingCount&&(Nt.fn=p,this._events[u]=G=G.slice()),G.splice(ut,1)}}},fire:function(u,y,P){if(!this.listens(u,P))return this;var G=i({},y,{type:u,target:this,sourceTarget:y&&y.sourceTarget||this});if(this._events){var ue=this._events[u];if(ue){this._firingCount=this._firingCount+1||1;for(var Pe=0,ut=ue.length;Pe<ut;Pe++){var Nt=ue[Pe],Ht=Nt.fn;Nt.once&&this.off(u,Ht,Nt.ctx),Ht.call(Nt.ctx||this,G)}this._firingCount--}}return P&&this._propagateEvent(G),this},listens:function(u,y,P,G){typeof u!="string"&&console.warn('"string" type argument expected');var ue=y;typeof y!="function"&&(G=!!y,ue=void 0,P=void 0);var Pe=this._events&&this._events[u];if(Pe&&Pe.length&&this._listens(u,ue,P)!==!1)return!0;if(G){for(var ut in this._eventParents)if(this._eventParents[ut].listens(u,y,P,G))return!0}return!1},_listens:function(u,y,P){if(!this._events)return!1;var G=this._events[u]||[];if(!y)return!!G.length;P===this&&(P=void 0);for(var ue=0,Pe=G.length;ue<Pe;ue++)if(G[ue].fn===y&&G[ue].ctx===P)return ue;return!1},once:function(u,y,P){if(typeof u=="object")for(var G in u)this._on(G,u[G],y,!0);else{u=x(u);for(var ue=0,Pe=u.length;ue<Pe;ue++)this._on(u[ue],y,P,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[l(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[l(u)],this},_propagateEvent:function(u){for(var y in this._eventParents)this._eventParents[y].fire(u.type,i({layer:u.target,propagatedFrom:u.target},u),!0)}};$.addEventListener=$.on,$.removeEventListener=$.clearAllEventListeners=$.off,$.addOneTimeEventListener=$.once,$.fireEvent=$.fire,$.hasEventListeners=$.listens;var re=z.extend($);function Q(u,y,P){this.x=P?Math.round(u):u,this.y=P?Math.round(y):y}var _e=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};Q.prototype={clone:function(){return new Q(this.x,this.y)},add:function(u){return this.clone()._add(we(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(we(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new Q(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new Q(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=_e(this.x),this.y=_e(this.y),this},distanceTo:function(u){u=we(u);var y=u.x-this.x,P=u.y-this.y;return Math.sqrt(y*y+P*P)},equals:function(u){return u=we(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=we(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function we(u,y,P){return u instanceof Q?u:V(u)?new Q(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new Q(u.x,u.y):new Q(u,y,P)}function nt(u,y){if(u)for(var P=y?[u,y]:u,G=0,ue=P.length;G<ue;G++)this.extend(P[G])}nt.prototype={extend:function(u){var y,P;if(!u)return this;if(u instanceof Q||typeof u[0]=="number"||"x"in u)y=P=we(u);else if(u=ae(u),y=u.min,P=u.max,!y||!P)return this;return!this.min&&!this.max?(this.min=y.clone(),this.max=P.clone()):(this.min.x=Math.min(y.x,this.min.x),this.max.x=Math.max(P.x,this.max.x),this.min.y=Math.min(y.y,this.min.y),this.max.y=Math.max(P.y,this.max.y)),this},getCenter:function(u){return we((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return we(this.min.x,this.max.y)},getTopRight:function(){return we(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var y,P;return typeof u[0]=="number"||u instanceof Q?u=we(u):u=ae(u),u instanceof nt?(y=u.min,P=u.max):y=P=u,y.x>=this.min.x&&P.x<=this.max.x&&y.y>=this.min.y&&P.y<=this.max.y},intersects:function(u){u=ae(u);var y=this.min,P=this.max,G=u.min,ue=u.max,Pe=ue.x>=y.x&&G.x<=P.x,ut=ue.y>=y.y&&G.y<=P.y;return Pe&&ut},overlaps:function(u){u=ae(u);var y=this.min,P=this.max,G=u.min,ue=u.max,Pe=ue.x>y.x&&G.x<P.x,ut=ue.y>y.y&&G.y<P.y;return Pe&&ut},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var y=this.min,P=this.max,G=Math.abs(y.x-P.x)*u,ue=Math.abs(y.y-P.y)*u;return ae(we(y.x-G,y.y-ue),we(P.x+G,P.y+ue))},equals:function(u){return u?(u=ae(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function ae(u,y){return!u||u instanceof nt?u:new nt(u,y)}function H(u,y){if(u)for(var P=y?[u,y]:u,G=0,ue=P.length;G<ue;G++)this.extend(P[G])}H.prototype={extend:function(u){var y=this._southWest,P=this._northEast,G,ue;if(u instanceof me)G=u,ue=u;else if(u instanceof H){if(G=u._southWest,ue=u._northEast,!G||!ue)return this}else return u?this.extend(pe(u)||Z(u)):this;return!y&&!P?(this._southWest=new me(G.lat,G.lng),this._northEast=new me(ue.lat,ue.lng)):(y.lat=Math.min(G.lat,y.lat),y.lng=Math.min(G.lng,y.lng),P.lat=Math.max(ue.lat,P.lat),P.lng=Math.max(ue.lng,P.lng)),this},pad:function(u){var y=this._southWest,P=this._northEast,G=Math.abs(y.lat-P.lat)*u,ue=Math.abs(y.lng-P.lng)*u;return new H(new me(y.lat-G,y.lng-ue),new me(P.lat+G,P.lng+ue))},getCenter:function(){return new me((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new me(this.getNorth(),this.getWest())},getSouthEast:function(){return new me(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof me||"lat"in u?u=pe(u):u=Z(u);var y=this._southWest,P=this._northEast,G,ue;return u instanceof H?(G=u.getSouthWest(),ue=u.getNorthEast()):G=ue=u,G.lat>=y.lat&&ue.lat<=P.lat&&G.lng>=y.lng&&ue.lng<=P.lng},intersects:function(u){u=Z(u);var y=this._southWest,P=this._northEast,G=u.getSouthWest(),ue=u.getNorthEast(),Pe=ue.lat>=y.lat&&G.lat<=P.lat,ut=ue.lng>=y.lng&&G.lng<=P.lng;return Pe&&ut},overlaps:function(u){u=Z(u);var y=this._southWest,P=this._northEast,G=u.getSouthWest(),ue=u.getNorthEast(),Pe=ue.lat>y.lat&&G.lat<P.lat,ut=ue.lng>y.lng&&G.lng<P.lng;return Pe&&ut},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,y){return u?(u=Z(u),this._southWest.equals(u.getSouthWest(),y)&&this._northEast.equals(u.getNorthEast(),y)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Z(u,y){return u instanceof H?u:new H(u,y)}function me(u,y,P){if(isNaN(u)||isNaN(y))throw new Error("Invalid LatLng object: ("+u+", "+y+")");this.lat=+u,this.lng=+y,P!==void 0&&(this.alt=+P)}me.prototype={equals:function(u,y){if(!u)return!1;u=pe(u);var P=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return P<=(y===void 0?1e-9:y)},toString:function(u){return"LatLng("+v(this.lat,u)+", "+v(this.lng,u)+")"},distanceTo:function(u){return X.distance(this,pe(u))},wrap:function(){return X.wrapLatLng(this)},toBounds:function(u){var y=180*u/40075017,P=y/Math.cos(Math.PI/180*this.lat);return Z([this.lat-y,this.lng-P],[this.lat+y,this.lng+P])},clone:function(){return new me(this.lat,this.lng,this.alt)}};function pe(u,y,P){return u instanceof me?u:V(u)&&typeof u[0]!="object"?u.length===3?new me(u[0],u[1],u[2]):u.length===2?new me(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new me(u.lat,"lng"in u?u.lng:u.lon,u.alt):y===void 0?null:new me(u,y,P)}var de={latLngToPoint:function(u,y){var P=this.projection.project(u),G=this.scale(y);return this.transformation._transform(P,G)},pointToLatLng:function(u,y){var P=this.scale(y),G=this.transformation.untransform(u,P);return this.projection.unproject(G)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var y=this.projection.bounds,P=this.scale(u),G=this.transformation.transform(y.min,P),ue=this.transformation.transform(y.max,P);return new nt(G,ue)},infinite:!1,wrapLatLng:function(u){var y=this.wrapLng?d(u.lng,this.wrapLng,!0):u.lng,P=this.wrapLat?d(u.lat,this.wrapLat,!0):u.lat,G=u.alt;return new me(P,y,G)},wrapLatLngBounds:function(u){var y=u.getCenter(),P=this.wrapLatLng(y),G=y.lat-P.lat,ue=y.lng-P.lng;if(G===0&&ue===0)return u;var Pe=u.getSouthWest(),ut=u.getNorthEast(),Nt=new me(Pe.lat-G,Pe.lng-ue),Ht=new me(ut.lat-G,ut.lng-ue);return new H(Nt,Ht)}},X=i({},de,{wrapLng:[-180,180],R:6371e3,distance:function(u,y){var P=Math.PI/180,G=u.lat*P,ue=y.lat*P,Pe=Math.sin((y.lat-u.lat)*P/2),ut=Math.sin((y.lng-u.lng)*P/2),Nt=Pe*Pe+Math.cos(G)*Math.cos(ue)*ut*ut,Ht=2*Math.atan2(Math.sqrt(Nt),Math.sqrt(1-Nt));return this.R*Ht}}),J=6378137,De={R:J,MAX_LATITUDE:85.0511287798,project:function(u){var y=Math.PI/180,P=this.MAX_LATITUDE,G=Math.max(Math.min(P,u.lat),-P),ue=Math.sin(G*y);return new Q(this.R*u.lng*y,this.R*Math.log((1+ue)/(1-ue))/2)},unproject:function(u){var y=180/Math.PI;return new me((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*y,u.x*y/this.R)},bounds:function(){var u=J*Math.PI;return new nt([-u,-u],[u,u])}()};function Te(u,y,P,G){if(V(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=y,this._c=P,this._d=G}Te.prototype={transform:function(u,y){return this._transform(u.clone(),y)},_transform:function(u,y){return y=y||1,u.x=y*(this._a*u.x+this._b),u.y=y*(this._c*u.y+this._d),u},untransform:function(u,y){return y=y||1,new Q((u.x/y-this._b)/this._a,(u.y/y-this._d)/this._c)}};function Je(u,y,P,G){return new Te(u,y,P,G)}var he=i({},X,{code:"EPSG:3857",projection:De,transformation:function(){var u=.5/(Math.PI*De.R);return Je(u,.5,-u,.5)}()}),ee=i({},he,{code:"EPSG:900913"});function se(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function le(u,y){var P="",G,ue,Pe,ut,Nt,Ht;for(G=0,Pe=u.length;G<Pe;G++){for(Nt=u[G],ue=0,ut=Nt.length;ue<ut;ue++)Ht=Nt[ue],P+=(ue?"L":"M")+Ht.x+" "+Ht.y;P+=y?Et.svg?"z":"x":""}return P||"M0 0"}var ze=document.documentElement.style,Se="ActiveXObject"in window,ve=Se&&!document.addEventListener,$e="msLaunchUri"in navigator&&!("documentMode"in document),Ge=bt("webkit"),Xe=bt("android"),lt=bt("android 2")||bt("android 3"),qe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Lt=Xe&&bt("Google")&&qe<537&&!("AudioNode"in window),Gt=!!window.opera,rn=!$e&&bt("chrome"),yn=bt("gecko")&&!Ge&&!Gt&&!Se,Ye=!rn&&bt("safari"),at=bt("phantom"),it="OTransition"in ze,Vt=navigator.platform.indexOf("Win")===0,Yt=Se&&"transition"in ze,In="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!lt,Sn="MozPerspective"in ze,Nn=!window.L_DISABLE_3D&&(Yt||In||Sn)&&!it&&!at,Qn=typeof orientation<"u"||bt("mobile"),Xt=Qn&&Ge,Cn=Qn&&In,Dn=!window.PointerEvent&&window.MSPointerEvent,rr=!!(window.PointerEvent||Dn),Zn="ontouchstart"in window||!!window.TouchEvent,_r=!window.L_NO_TOUCH&&(Zn||rr),ir=Qn&&Gt,qr=Qn&&yn,Os=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ls=function(){var u=!1;try{var y=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",p,y),window.removeEventListener("testPassiveEventSupport",p,y)}catch{}return u}(),ft=function(){return!!document.createElement("canvas").getContext}(),rt=!!(document.createElementNS&&se("svg").createSVGRect),wt=!!rt&&function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),kn=!rt&&function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var y=u.firstChild;return y.style.behavior="url(#default#VML)",y&&typeof y.adj=="object"}catch{return!1}}(),Hn=navigator.platform.indexOf("Mac")===0,wn=navigator.platform.indexOf("Linux")===0;function bt(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var Et={ie:Se,ielt9:ve,edge:$e,webkit:Ge,android:Xe,android23:lt,androidStock:Lt,opera:Gt,chrome:rn,gecko:yn,safari:Ye,phantom:at,opera12:it,win:Vt,ie3d:Yt,webkit3d:In,gecko3d:Sn,any3d:Nn,mobile:Qn,mobileWebkit:Xt,mobileWebkit3d:Cn,msPointer:Dn,pointer:rr,touch:_r,touchNative:Zn,mobileOpera:ir,mobileGecko:qr,retina:Os,passiveEvents:ls,canvas:ft,svg:rt,vml:kn,inlineSvg:wt,mac:Hn,linux:wn},ln=Et.msPointer?"MSPointerDown":"pointerdown",Jt=Et.msPointer?"MSPointerMove":"pointermove",Ln=Et.msPointer?"MSPointerUp":"pointerup",Nr=Et.msPointer?"MSPointerCancel":"pointercancel",sn={touchstart:ln,touchmove:Jt,touchend:Ln,touchcancel:Nr},tn={touchstart:un,touchmove:Lr,touchend:Lr,touchcancel:Lr},jn={},zr=!1;function ki(u,y,P){return y==="touchstart"&&Rr(),tn[y]?(P=tn[y].bind(this,P),u.addEventListener(sn[y],P,!1),P):(console.warn("wrong event specified:",y),p)}function zi(u,y,P){if(!sn[y]){console.warn("wrong event specified:",y);return}u.removeEventListener(sn[y],P,!1)}function Qr(u){jn[u.pointerId]=u}function ur(u){jn[u.pointerId]&&(jn[u.pointerId]=u)}function wr(u){delete jn[u.pointerId]}function Rr(){zr||(document.addEventListener(ln,Qr,!0),document.addEventListener(Jt,ur,!0),document.addEventListener(Ln,wr,!0),document.addEventListener(Nr,wr,!0),zr=!0)}function Lr(u,y){if(y.pointerType!==(y.MSPOINTER_TYPE_MOUSE||"mouse")){y.touches=[];for(var P in jn)y.touches.push(jn[P]);y.changedTouches=[y],u(y)}}function un(u,y){y.MSPOINTER_TYPE_TOUCH&&y.pointerType===y.MSPOINTER_TYPE_TOUCH&&Cr(y),Lr(u,y)}function ss(u){var y={},P,G;for(G in u)P=u[G],y[G]=P&&P.bind?P.bind(u):P;return u=y,y.type="dblclick",y.detail=2,y.isTrusted=!1,y._simulated=!0,y}var pi=200;function Ki(u,y){u.addEventListener("dblclick",y);var P=0,G;function ue(Pe){if(Pe.detail!==1){G=Pe.detail;return}if(!(Pe.pointerType==="mouse"||Pe.sourceCapabilities&&!Pe.sourceCapabilities.firesTouchEvents)){var ut=vl(Pe);if(!(ut.some(function(Ht){return Ht instanceof HTMLLabelElement&&Ht.attributes.for})&&!ut.some(function(Ht){return Ht instanceof HTMLInputElement||Ht instanceof HTMLSelectElement}))){var Nt=Date.now();Nt-P<=pi?(G++,G===2&&y(ss(Pe))):G=1,P=Nt}}}return u.addEventListener("click",ue),{dblclick:y,simDblclick:ue}}function $i(u,y){u.removeEventListener("dblclick",y.dblclick),u.removeEventListener("click",y.simDblclick)}var Ni=Ss(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Pr=Ss(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Mr=Pr==="webkitTransition"||Pr==="OTransition"?Pr+"End":"transitionend";function Yo(u){return typeof u=="string"?document.getElementById(u):u}function Xs(u,y){var P=u.style[y]||u.currentStyle&&u.currentStyle[y];if((!P||P==="auto")&&document.defaultView){var G=document.defaultView.getComputedStyle(u,null);P=G?G[y]:null}return P==="auto"?null:P}function An(u,y,P){var G=document.createElement(u);return G.className=y||"",P&&P.appendChild(G),G}function Pn(u){var y=u.parentNode;y&&y.removeChild(u)}function En(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function gi(u){var y=u.parentNode;y&&y.lastChild!==u&&y.appendChild(u)}function mi(u){var y=u.parentNode;y&&y.firstChild!==u&&y.insertBefore(u,y.firstChild)}function Zi(u,y){if(u.classList!==void 0)return u.classList.contains(y);var P=vr(u);return P.length>0&&new RegExp("(^|\\s)"+y+"(\\s|$)").test(P)}function Xn(u,y){if(u.classList!==void 0)for(var P=x(y),G=0,ue=P.length;G<ue;G++)u.classList.add(P[G]);else if(!Zi(u,y)){var Pe=vr(u);zs(u,(Pe?Pe+" ":"")+y)}}function kr(u,y){u.classList!==void 0?u.classList.remove(y):zs(u,m((" "+vr(u)+" ").replace(" "+y+" "," ")))}function zs(u,y){u.className.baseVal===void 0?u.className=y:u.className.baseVal=y}function vr(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function ps(u,y){"opacity"in u.style?u.style.opacity=y:"filter"in u.style&&us(u,y)}function us(u,y){var P=!1,G="DXImageTransform.Microsoft.Alpha";try{P=u.filters.item(G)}catch{if(y===1)return}y=Math.round(y*100),P?(P.Enabled=y!==100,P.Opacity=y):u.style.filter+=" progid:"+G+"(opacity="+y+")"}function Ss(u){for(var y=document.documentElement.style,P=0;P<u.length;P++)if(u[P]in y)return u[P];return!1}function Yr(u,y,P){var G=y||new Q(0,0);u.style[Ni]=(Et.ie3d?"translate("+G.x+"px,"+G.y+"px)":"translate3d("+G.x+"px,"+G.y+"px,0)")+(P?" scale("+P+")":"")}function bn(u,y){u._leaflet_pos=y,Et.any3d?Yr(u,y):(u.style.left=y.x+"px",u.style.top=y.y+"px")}function cn(u){return u._leaflet_pos||new Q(0,0)}var $r,Gi,Ao;if("onselectstart"in document)$r=function(){xr(window,"selectstart",Cr)},Gi=function(){Vr(window,"selectstart",Cr)};else{var To=Ss(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);$r=function(){if(To){var u=document.documentElement.style;Ao=u[To],u[To]="none"}},Gi=function(){To&&(document.documentElement.style[To]=Ao,Ao=void 0)}}function Ol(){xr(window,"dragstart",Cr)}function Ns(){Vr(window,"dragstart",Cr)}var ia,oi;function Pa(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(xi(),ia=u,oi=u.style.outlineStyle,u.style.outlineStyle="none",xr(window,"keydown",xi))}function xi(){ia&&(ia.style.outlineStyle=oi,ia=void 0,oi=void 0,Vr(window,"keydown",xi))}function sa(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function Do(u){var y=u.getBoundingClientRect();return{x:y.width/u.offsetWidth||1,y:y.height/u.offsetHeight||1,boundingClientRect:y}}var yr={__proto__:null,TRANSFORM:Ni,TRANSITION:Pr,TRANSITION_END:Mr,get:Yo,getStyle:Xs,create:An,remove:Pn,empty:En,toFront:gi,toBack:mi,hasClass:Zi,addClass:Xn,removeClass:kr,setClass:zs,getClass:vr,setOpacity:ps,testProp:Ss,setTransform:Yr,setPosition:bn,getPosition:cn,get disableTextSelection(){return $r},get enableTextSelection(){return Gi},disableImageDrag:Ol,enableImageDrag:Ns,preventOutline:Pa,restoreOutline:xi,getSizedParentNode:sa,getScale:Do};function xr(u,y,P,G){if(y&&typeof y=="object")for(var ue in y)Ha(u,ue,y[ue],P);else{y=x(y);for(var Pe=0,ut=y.length;Pe<ut;Pe++)Ha(u,y[Pe],P,G)}return this}var Ko="_leaflet_events";function Vr(u,y,P,G){if(arguments.length===1)ml(u),delete u[Ko];else if(y&&typeof y=="object")for(var ue in y)ei(u,ue,y[ue],P);else if(y=x(y),arguments.length===2)ml(u,function(Nt){return Y(y,Nt)!==-1});else for(var Pe=0,ut=y.length;Pe<ut;Pe++)ei(u,y[Pe],P,G);return this}function ml(u,y){for(var P in u[Ko]){var G=P.split(/\d/)[0];(!y||y(G))&&ei(u,G,null,null,P)}}var ga={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ha(u,y,P,G){var ue=y+l(P)+(G?"_"+l(G):"");if(u[Ko]&&u[Ko][ue])return this;var Pe=function(Nt){return P.call(G||u,Nt||window.event)},ut=Pe;!Et.touchNative&&Et.pointer&&y.indexOf("touch")===0?Pe=ki(u,y,Pe):Et.touch&&y==="dblclick"?Pe=Ki(u,Pe):"addEventListener"in u?y==="touchstart"||y==="touchmove"||y==="wheel"||y==="mousewheel"?u.addEventListener(ga[y]||y,Pe,Et.passiveEvents?{passive:!1}:!1):y==="mouseenter"||y==="mouseleave"?(Pe=function(Nt){Nt=Nt||window.event,Nl(u,Nt)&&ut(Nt)},u.addEventListener(ga[y],Pe,!1)):u.addEventListener(y,ut,!1):u.attachEvent("on"+y,Pe),u[Ko]=u[Ko]||{},u[Ko][ue]=Pe}function ei(u,y,P,G,ue){ue=ue||y+l(P)+(G?"_"+l(G):"");var Pe=u[Ko]&&u[Ko][ue];if(!Pe)return this;!Et.touchNative&&Et.pointer&&y.indexOf("touch")===0?zi(u,y,Pe):Et.touch&&y==="dblclick"?$i(u,Pe):"removeEventListener"in u?u.removeEventListener(ga[y]||y,Pe,!1):u.detachEvent("on"+y,Pe),u[Ko][ue]=null}function Js(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function Qs(u){return Ha(u,"wheel",Js),this}function ou(u){return xr(u,"mousedown touchstart dblclick contextmenu",Js),u._leaflet_disable_click=!0,this}function Cr(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function Kr(u){return Cr(u),Js(u),this}function vl(u){if(u.composedPath)return u.composedPath();for(var y=[],P=u.target;P;)y.push(P),P=P.parentNode;return y}function Mc(u,y){if(!y)return new Q(u.clientX,u.clientY);var P=Do(y),G=P.boundingClientRect;return new Q((u.clientX-G.left)/P.x-y.clientLeft,(u.clientY-G.top)/P.y-y.clientTop)}var au=Et.linux&&Et.chrome?window.devicePixelRatio:Et.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Mu(u){return Et.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/au:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function Nl(u,y){var P=y.relatedTarget;if(!P)return!0;try{for(;P&&P!==u;)P=P.parentNode}catch{return!1}return P!==u}var lu={__proto__:null,on:xr,off:Vr,stopPropagation:Js,disableScrollPropagation:Qs,disableClickPropagation:ou,preventDefault:Cr,stop:Kr,getPropagationPath:vl,getMousePosition:Mc,getWheelDelta:Mu,isExternalTarget:Nl,addListener:xr,removeListener:Vr},ku=re.extend({run:function(u,y,P,G){this.stop(),this._el=u,this._inProgress=!0,this._duration=P||.25,this._easeOutPower=1/Math.max(G||.5,.2),this._startPos=cn(u),this._offset=y.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=B(this._animate,this),this._step()},_step:function(u){var y=+new Date-this._startTime,P=this._duration*1e3;y<P?this._runFrame(this._easeOut(y/P),u):(this._runFrame(1),this._complete())},_runFrame:function(u,y){var P=this._startPos.add(this._offset.multiplyBy(u));y&&P._round(),bn(this._el,P),this.fire("step")},_complete:function(){N(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),ti=re.extend({options:{crs:he,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,y){y=E(this,y),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),y.maxBounds&&this.setMaxBounds(y.maxBounds),y.zoom!==void 0&&(this._zoom=this._limitZoom(y.zoom)),y.center&&y.zoom!==void 0&&this.setView(pe(y.center),y.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Pr&&Et.any3d&&!Et.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),xr(this._proxy,Mr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,y,P){if(y=y===void 0?this._zoom:this._limitZoom(y),u=this._limitCenter(pe(u),y,this.options.maxBounds),P=P||{},this._stop(),this._loaded&&!P.reset&&P!==!0){P.animate!==void 0&&(P.zoom=i({animate:P.animate},P.zoom),P.pan=i({animate:P.animate,duration:P.duration},P.pan));var G=this._zoom!==y?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,y,P.zoom):this._tryAnimatedPan(u,P.pan);if(G)return clearTimeout(this._sizeTimer),this}return this._resetView(u,y,P.pan&&P.pan.noMoveStart),this},setZoom:function(u,y){return this._loaded?this.setView(this.getCenter(),u,{zoom:y}):(this._zoom=u,this)},zoomIn:function(u,y){return u=u||(Et.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,y)},zoomOut:function(u,y){return u=u||(Et.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,y)},setZoomAround:function(u,y,P){var G=this.getZoomScale(y),ue=this.getSize().divideBy(2),Pe=u instanceof Q?u:this.latLngToContainerPoint(u),ut=Pe.subtract(ue).multiplyBy(1-1/G),Nt=this.containerPointToLatLng(ue.add(ut));return this.setView(Nt,y,{zoom:P})},_getBoundsCenterZoom:function(u,y){y=y||{},u=u.getBounds?u.getBounds():Z(u);var P=we(y.paddingTopLeft||y.padding||[0,0]),G=we(y.paddingBottomRight||y.padding||[0,0]),ue=this.getBoundsZoom(u,!1,P.add(G));if(ue=typeof y.maxZoom=="number"?Math.min(y.maxZoom,ue):ue,ue===1/0)return{center:u.getCenter(),zoom:ue};var Pe=G.subtract(P).divideBy(2),ut=this.project(u.getSouthWest(),ue),Nt=this.project(u.getNorthEast(),ue),Ht=this.unproject(ut.add(Nt).divideBy(2).add(Pe),ue);return{center:Ht,zoom:ue}},fitBounds:function(u,y){if(u=Z(u),!u.isValid())throw new Error("Bounds are not valid.");var P=this._getBoundsCenterZoom(u,y);return this.setView(P.center,P.zoom,y)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,y){return this.setView(u,this._zoom,{pan:y})},panBy:function(u,y){if(u=we(u).round(),y=y||{},!u.x&&!u.y)return this.fire("moveend");if(y.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ku,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),y.noMoveStart||this.fire("movestart"),y.animate!==!1){Xn(this._mapPane,"leaflet-pan-anim");var P=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,P,y.duration||.25,y.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,y,P){if(P=P||{},P.animate===!1||!Et.any3d)return this.setView(u,y,P);this._stop();var G=this.project(this.getCenter()),ue=this.project(u),Pe=this.getSize(),ut=this._zoom;u=pe(u),y=y===void 0?ut:y;var Nt=Math.max(Pe.x,Pe.y),Ht=Nt*this.getZoomScale(ut,y),hn=ue.distanceTo(G)||1,$n=1.42,sr=$n*$n;function jr(bi){var ao=bi?-1:1,Ne=bi?Ht:Nt,Ro=Ht*Ht-Nt*Nt+ao*sr*sr*hn*hn,tc=2*Ne*sr*hn,qs=Ro/tc,Wr=Math.sqrt(qs*qs+1)-qs,Vh=Wr<1e-9?-18:Math.log(Wr);return Vh}function Ms(bi){return(Math.exp(bi)-Math.exp(-bi))/2}function cs(bi){return(Math.exp(bi)+Math.exp(-bi))/2}function Gs(bi){return Ms(bi)/cs(bi)}var es=jr(0);function Bo(bi){return Nt*(cs(es)/cs(es+$n*bi))}function sh(bi){return Nt*(cs(es)*Gs(es+$n*bi)-Ms(es))/sr}function Ra(bi){return 1-Math.pow(1-bi,1.5)}var wa=Date.now(),la=(jr(1)-es)/$n,Od=P.duration?1e3*P.duration:1e3*la*.8;function Du(){var bi=(Date.now()-wa)/Od,ao=Ra(bi)*la;bi<=1?(this._flyToFrame=B(Du,this),this._move(this.unproject(G.add(ue.subtract(G).multiplyBy(sh(ao)/hn)),ut),this.getScaleZoom(Nt/Bo(ao),ut),{flyTo:!0})):this._move(u,y)._moveEnd(!0)}return this._moveStart(!0,P.noMoveStart),Du.call(this),this},flyToBounds:function(u,y){var P=this._getBoundsCenterZoom(u,y);return this.flyTo(P.center,P.zoom,y)},setMaxBounds:function(u){return u=Z(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var y=this.options.minZoom;return this.options.minZoom=u,this._loaded&&y!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var y=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&y!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,y){this._enforcingBounds=!0;var P=this.getCenter(),G=this._limitCenter(P,this._zoom,Z(u));return P.equals(G)||this.panTo(G,y),this._enforcingBounds=!1,this},panInside:function(u,y){y=y||{};var P=we(y.paddingTopLeft||y.padding||[0,0]),G=we(y.paddingBottomRight||y.padding||[0,0]),ue=this.project(this.getCenter()),Pe=this.project(u),ut=this.getPixelBounds(),Nt=ae([ut.min.add(P),ut.max.subtract(G)]),Ht=Nt.getSize();if(!Nt.contains(Pe)){this._enforcingBounds=!0;var hn=Pe.subtract(Nt.getCenter()),$n=Nt.extend(Pe).getSize().subtract(Ht);ue.x+=hn.x<0?-$n.x:$n.x,ue.y+=hn.y<0?-$n.y:$n.y,this.panTo(this.unproject(ue),y),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=i({animate:!1,pan:!0},u===!0?{animate:!0}:u);var y=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var P=this.getSize(),G=y.divideBy(2).round(),ue=P.divideBy(2).round(),Pe=G.subtract(ue);return!Pe.x&&!Pe.y?this:(u.animate&&u.pan?this.panBy(Pe):(u.pan&&this._rawPanBy(Pe),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:y,newSize:P}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=i({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var y=o(this._handleGeolocationResponse,this),P=o(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(y,P,u):navigator.geolocation.getCurrentPosition(y,P,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var y=u.code,P=u.message||(y===1?"permission denied":y===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:y,message:"Geolocation error: "+P+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var y=u.coords.latitude,P=u.coords.longitude,G=new me(y,P),ue=G.toBounds(u.coords.accuracy*2),Pe=this._locateOptions;if(Pe.setView){var ut=this.getBoundsZoom(ue);this.setView(G,Pe.maxZoom?Math.min(ut,Pe.maxZoom):ut)}var Nt={latlng:G,bounds:ue,timestamp:u.timestamp};for(var Ht in u.coords)typeof u.coords[Ht]=="number"&&(Nt[Ht]=u.coords[Ht]);this.fire("locationfound",Nt)}},addHandler:function(u,y){if(!y)return this;var P=this[u]=new y(this);return this._handlers.push(P),this.options[u]&&P.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Pn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(N(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)Pn(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,y){var P="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),G=An("div",P,y||this._mapPane);return u&&(this._panes[u]=G),G},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),y=this.unproject(u.getBottomLeft()),P=this.unproject(u.getTopRight());return new H(y,P)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,y,P){u=Z(u),P=we(P||[0,0]);var G=this.getZoom()||0,ue=this.getMinZoom(),Pe=this.getMaxZoom(),ut=u.getNorthWest(),Nt=u.getSouthEast(),Ht=this.getSize().subtract(P),hn=ae(this.project(Nt,G),this.project(ut,G)).getSize(),$n=Et.any3d?this.options.zoomSnap:1,sr=Ht.x/hn.x,jr=Ht.y/hn.y,Ms=y?Math.max(sr,jr):Math.min(sr,jr);return G=this.getScaleZoom(Ms,G),$n&&(G=Math.round(G/($n/100))*($n/100),G=y?Math.ceil(G/$n)*$n:Math.floor(G/$n)*$n),Math.max(ue,Math.min(Pe,G))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,y){var P=this._getTopLeftPoint(u,y);return new nt(P,P.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,y){var P=this.options.crs;return y=y===void 0?this._zoom:y,P.scale(u)/P.scale(y)},getScaleZoom:function(u,y){var P=this.options.crs;y=y===void 0?this._zoom:y;var G=P.zoom(u*P.scale(y));return isNaN(G)?1/0:G},project:function(u,y){return y=y===void 0?this._zoom:y,this.options.crs.latLngToPoint(pe(u),y)},unproject:function(u,y){return y=y===void 0?this._zoom:y,this.options.crs.pointToLatLng(we(u),y)},layerPointToLatLng:function(u){var y=we(u).add(this.getPixelOrigin());return this.unproject(y)},latLngToLayerPoint:function(u){var y=this.project(pe(u))._round();return y._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(pe(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(Z(u))},distance:function(u,y){return this.options.crs.distance(pe(u),pe(y))},containerPointToLayerPoint:function(u){return we(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return we(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var y=this.containerPointToLayerPoint(we(u));return this.layerPointToLatLng(y)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(pe(u)))},mouseEventToContainerPoint:function(u){return Mc(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var y=this._container=Yo(u);if(y){if(y._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");xr(y,"scroll",this._onScroll,this),this._containerId=l(y)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&Et.any3d,Xn(u,"leaflet-container"+(Et.touch?" leaflet-touch":"")+(Et.retina?" leaflet-retina":"")+(Et.ielt9?" leaflet-oldie":"")+(Et.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var y=Xs(u,"position");y!=="absolute"&&y!=="relative"&&y!=="fixed"&&y!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),bn(this._mapPane,new Q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Xn(u.markerPane,"leaflet-zoom-hide"),Xn(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,y,P){bn(this._mapPane,new Q(0,0));var G=!this._loaded;this._loaded=!0,y=this._limitZoom(y),this.fire("viewprereset");var ue=this._zoom!==y;this._moveStart(ue,P)._move(u,y)._moveEnd(ue),this.fire("viewreset"),G&&this.fire("load")},_moveStart:function(u,y){return u&&this.fire("zoomstart"),y||this.fire("movestart"),this},_move:function(u,y,P,G){y===void 0&&(y=this._zoom);var ue=this._zoom!==y;return this._zoom=y,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),G?P&&P.pinch&&this.fire("zoom",P):((ue||P&&P.pinch)&&this.fire("zoom",P),this.fire("move",P)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return N(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){bn(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[l(this._container)]=this;var y=u?Vr:xr;y(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&y(window,"resize",this._onResize,this),Et.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){N(this._resizeRequest),this._resizeRequest=B(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,y){for(var P=[],G,ue=y==="mouseout"||y==="mouseover",Pe=u.target||u.srcElement,ut=!1;Pe;){if(G=this._targets[l(Pe)],G&&(y==="click"||y==="preclick")&&this._draggableMoved(G)){ut=!0;break}if(G&&G.listens(y,!0)&&(ue&&!Nl(Pe,u)||(P.push(G),ue))||Pe===this._container)break;Pe=Pe.parentNode}return!P.length&&!ut&&!ue&&this.listens(y,!0)&&(P=[this]),P},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var y=u.target||u.srcElement;if(!(!this._loaded||y._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(y))){var P=u.type;P==="mousedown"&&Pa(y),this._fireDOMEvent(u,P)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,y,P){if(u.type==="click"){var G=i({},u);G.type="preclick",this._fireDOMEvent(G,G.type,P)}var ue=this._findEventTargets(u,y);if(P){for(var Pe=[],ut=0;ut<P.length;ut++)P[ut].listens(y,!0)&&Pe.push(P[ut]);ue=Pe.concat(ue)}if(ue.length){y==="contextmenu"&&Cr(u);var Nt=ue[0],Ht={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var hn=Nt.getLatLng&&(!Nt._radius||Nt._radius<=10);Ht.containerPoint=hn?this.latLngToContainerPoint(Nt.getLatLng()):this.mouseEventToContainerPoint(u),Ht.layerPoint=this.containerPointToLayerPoint(Ht.containerPoint),Ht.latlng=hn?Nt.getLatLng():this.layerPointToLatLng(Ht.layerPoint)}for(ut=0;ut<ue.length;ut++)if(ue[ut].fire(y,Ht,!0),Ht.originalEvent._stopped||ue[ut].options.bubblingMouseEvents===!1&&Y(this._mouseEvents,y)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,y=this._handlers.length;u<y;u++)this._handlers[u].disable()},whenReady:function(u,y){return this._loaded?u.call(y||this,{target:this}):this.on("load",u,y),this},_getMapPanePos:function(){return cn(this._mapPane)||new Q(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,y){var P=u&&y!==void 0?this._getNewPixelOrigin(u,y):this.getPixelOrigin();return P.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,y){var P=this.getSize()._divideBy(2);return this.project(u,y)._subtract(P)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,y,P){var G=this._getNewPixelOrigin(P,y);return this.project(u,y)._subtract(G)},_latLngBoundsToNewLayerBounds:function(u,y,P){var G=this._getNewPixelOrigin(P,y);return ae([this.project(u.getSouthWest(),y)._subtract(G),this.project(u.getNorthWest(),y)._subtract(G),this.project(u.getSouthEast(),y)._subtract(G),this.project(u.getNorthEast(),y)._subtract(G)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,y,P){if(!P)return u;var G=this.project(u,y),ue=this.getSize().divideBy(2),Pe=new nt(G.subtract(ue),G.add(ue)),ut=this._getBoundsOffset(Pe,P,y);return Math.abs(ut.x)<=1&&Math.abs(ut.y)<=1?u:this.unproject(G.add(ut),y)},_limitOffset:function(u,y){if(!y)return u;var P=this.getPixelBounds(),G=new nt(P.min.add(u),P.max.add(u));return u.add(this._getBoundsOffset(G,y))},_getBoundsOffset:function(u,y,P){var G=ae(this.project(y.getNorthEast(),P),this.project(y.getSouthWest(),P)),ue=G.min.subtract(u.min),Pe=G.max.subtract(u.max),ut=this._rebound(ue.x,-Pe.x),Nt=this._rebound(ue.y,-Pe.y);return new Q(ut,Nt)},_rebound:function(u,y){return u+y>0?Math.round(u-y)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(y))},_limitZoom:function(u){var y=this.getMinZoom(),P=this.getMaxZoom(),G=Et.any3d?this.options.zoomSnap:1;return G&&(u=Math.round(u/G)*G),Math.max(y,Math.min(P,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){kr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,y){var P=this._getCenterOffset(u)._trunc();return(y&&y.animate)!==!0&&!this.getSize().contains(P)?!1:(this.panBy(P,y),!0)},_createAnimProxy:function(){var u=this._proxy=An("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(y){var P=Ni,G=this._proxy.style[P];Yr(this._proxy,this.project(y.center,y.zoom),this.getZoomScale(y.zoom,1)),G===this._proxy.style[P]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Pn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),y=this.getZoom();Yr(this._proxy,this.project(u,y),this.getZoomScale(y,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,y,P){if(this._animatingZoom)return!0;if(P=P||{},!this._zoomAnimated||P.animate===!1||this._nothingToAnimate()||Math.abs(y-this._zoom)>this.options.zoomAnimationThreshold)return!1;var G=this.getZoomScale(y),ue=this._getCenterOffset(u)._divideBy(1-1/G);return P.animate!==!0&&!this.getSize().contains(ue)?!1:(B(function(){this._moveStart(!0,P.noMoveStart||!1)._animateZoom(u,y,!0)},this),!0)},_animateZoom:function(u,y,P,G){this._mapPane&&(P&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=y,Xn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:y,noUpdate:G}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&kr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ms(u,y){return new ti(u,y)}var dr=z.extend({options:{position:"topright"},initialize:function(u){E(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var y=this._map;return y&&y.removeControl(this),this.options.position=u,y&&y.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var y=this._container=this.onAdd(u),P=this.getPosition(),G=u._controlCorners[P];return Xn(y,"leaflet-control"),P.indexOf("bottom")!==-1?G.insertBefore(y,G.firstChild):G.appendChild(y),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Pn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),vs=function(u){return new dr(u)};ti.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},y="leaflet-",P=this._controlContainer=An("div",y+"control-container",this._container);function G(ue,Pe){var ut=y+ue+" "+y+Pe;u[ue+Pe]=An("div",ut,P)}G("top","left"),G("top","right"),G("bottom","left"),G("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)Pn(this._controlCorners[u]);Pn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Il=dr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,y,P,G){return P<G?-1:G<P?1:0}},initialize:function(u,y,P){E(this,P),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var G in u)this._addLayer(u[G],G);for(G in y)this._addLayer(y[G],G,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return dr.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,y){return this._addLayer(u,y),this._map?this._update():this},addOverlay:function(u,y){return this._addLayer(u,y,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var y=this._getLayer(l(u));return y&&this._layers.splice(this._layers.indexOf(y),1),this._map?this._update():this},expand:function(){Xn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(Xn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):kr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return kr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",y=this._container=An("div",u),P=this.options.collapsed;y.setAttribute("aria-haspopup",!0),ou(y),Qs(y);var G=this._section=An("section",u+"-list");P&&(this._map.on("click",this.collapse,this),xr(y,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ue=this._layersLink=An("a",u+"-toggle",y);ue.href="#",ue.title="Layers",ue.setAttribute("role","button"),xr(ue,{keydown:function(Pe){Pe.keyCode===13&&this._expandSafely()},click:function(Pe){Cr(Pe),this._expandSafely()}},this),P||this.expand(),this._baseLayersList=An("div",u+"-base",G),this._separator=An("div",u+"-separator",G),this._overlaysList=An("div",u+"-overlays",G),y.appendChild(G)},_getLayer:function(u){for(var y=0;y<this._layers.length;y++)if(this._layers[y]&&l(this._layers[y].layer)===u)return this._layers[y]},_addLayer:function(u,y,P){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:y,overlay:P}),this.options.sortLayers&&this._layers.sort(o(function(G,ue){return this.options.sortFunction(G.layer,ue.layer,G.name,ue.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;En(this._baseLayersList),En(this._overlaysList),this._layerControlInputs=[];var u,y,P,G,ue=0;for(P=0;P<this._layers.length;P++)G=this._layers[P],this._addItem(G),y=y||G.overlay,u=u||!G.overlay,ue+=G.overlay?0:1;return this.options.hideSingleBase&&(u=u&&ue>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=y&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var y=this._getLayer(l(u.target)),P=y.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;P&&this._map.fire(P,y)},_createRadioElement:function(u,y){var P='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(y?' checked="checked"':"")+"/>",G=document.createElement("div");return G.innerHTML=P,G.firstChild},_addItem:function(u){var y=document.createElement("label"),P=this._map.hasLayer(u.layer),G;u.overlay?(G=document.createElement("input"),G.type="checkbox",G.className="leaflet-control-layers-selector",G.defaultChecked=P):G=this._createRadioElement("leaflet-base-layers_"+l(this),P),this._layerControlInputs.push(G),G.layerId=l(u.layer),xr(G,"click",this._onInputClick,this);var ue=document.createElement("span");ue.innerHTML=" "+u.name;var Pe=document.createElement("span");y.appendChild(Pe),Pe.appendChild(G),Pe.appendChild(ue);var ut=u.overlay?this._overlaysList:this._baseLayersList;return ut.appendChild(y),this._checkDisabledLayers(),y},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,y,P,G=[],ue=[];this._handlingClick=!0;for(var Pe=u.length-1;Pe>=0;Pe--)y=u[Pe],P=this._getLayer(y.layerId).layer,y.checked?G.push(P):y.checked||ue.push(P);for(Pe=0;Pe<ue.length;Pe++)this._map.hasLayer(ue[Pe])&&this._map.removeLayer(ue[Pe]);for(Pe=0;Pe<G.length;Pe++)this._map.hasLayer(G[Pe])||this._map.addLayer(G[Pe]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,y,P,G=this._map.getZoom(),ue=u.length-1;ue>=0;ue--)y=u[ue],P=this._getLayer(y.layerId).layer,y.disabled=P.options.minZoom!==void 0&&G<P.options.minZoom||P.options.maxZoom!==void 0&&G>P.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,xr(u,"click",Cr),this.expand();var y=this;setTimeout(function(){Vr(u,"click",Cr),y._preventClick=!1})}}),Wa=function(u,y,P){return new Il(u,y,P)},Xi=dr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var y="leaflet-control-zoom",P=An("div",y+" leaflet-bar"),G=this.options;return this._zoomInButton=this._createButton(G.zoomInText,G.zoomInTitle,y+"-in",P,this._zoomIn),this._zoomOutButton=this._createButton(G.zoomOutText,G.zoomOutTitle,y+"-out",P,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),P},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,y,P,G,ue){var Pe=An("a",P,G);return Pe.innerHTML=u,Pe.href="#",Pe.title=y,Pe.setAttribute("role","button"),Pe.setAttribute("aria-label",y),ou(Pe),xr(Pe,"click",Kr),xr(Pe,"click",ue,this),xr(Pe,"click",this._refocusOnMap,this),Pe},_updateDisabled:function(){var u=this._map,y="leaflet-disabled";kr(this._zoomInButton,y),kr(this._zoomOutButton,y),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(Xn(this._zoomOutButton,y),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(Xn(this._zoomInButton,y),this._zoomInButton.setAttribute("aria-disabled","true"))}});ti.mergeOptions({zoomControl:!0}),ti.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Xi,this.addControl(this.zoomControl))});var Au=function(u){return new Xi(u)},Ma=dr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var y="leaflet-control-scale",P=An("div",y),G=this.options;return this._addScales(G,y+"-line",P),u.on(G.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),P},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,y,P){u.metric&&(this._mScale=An("div",y,P)),u.imperial&&(this._iScale=An("div",y,P))},_update:function(){var u=this._map,y=u.getSize().y/2,P=u.distance(u.containerPointToLatLng([0,y]),u.containerPointToLatLng([this.options.maxWidth,y]));this._updateScales(P)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var y=this._getRoundNum(u),P=y<1e3?y+" m":y/1e3+" km";this._updateScale(this._mScale,P,y/u)},_updateImperial:function(u){var y=u*3.2808399,P,G,ue;y>5280?(P=y/5280,G=this._getRoundNum(P),this._updateScale(this._iScale,G+" mi",G/P)):(ue=this._getRoundNum(y),this._updateScale(this._iScale,ue+" ft",ue/y))},_updateScale:function(u,y,P){u.style.width=Math.round(this.options.maxWidth*P)+"px",u.innerHTML=y},_getRoundNum:function(u){var y=Math.pow(10,(Math.floor(u)+"").length-1),P=u/y;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:1,y*P}}),uu=function(u){return new Ma(u)},cu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',oa=dr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Et.inlineSvg?cu+" ":"")+"Leaflet</a>"},initialize:function(u){E(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=An("div","leaflet-control-attribution"),ou(this._container);for(var y in u._layers)u._layers[y].getAttribution&&this.addAttribution(u._layers[y].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var y in this._attributions)this._attributions[y]&&u.push(y);var P=[];this.options.prefix&&P.push(this.options.prefix),u.length&&P.push(u.join(", ")),this._container.innerHTML=P.join(' <span aria-hidden="true">|</span> ')}}});ti.mergeOptions({attributionControl:!0}),ti.addInitHook(function(){this.options.attributionControl&&new oa().addTo(this)});var hu=function(u){return new oa(u)};dr.Layers=Il,dr.Zoom=Xi,dr.Scale=Ma,dr.Attribution=oa,vs.layers=Wa,vs.zoom=Au,vs.scale=uu,vs.attribution=hu;var Li=z.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Li.addTo=function(u,y){return u.addHandler(y,this),this};var kc={Events:$},$s=Et.touch?"touchstart mousedown":"mousedown",ma=re.extend({options:{clickTolerance:3},initialize:function(u,y,P,G){E(this,G),this._element=u,this._dragStartTarget=y||u,this._preventOutline=P},enable:function(){this._enabled||(xr(this._dragStartTarget,$s,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ma._dragging===this&&this.finishDrag(!0),Vr(this._dragStartTarget,$s,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!Zi(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){ma._dragging===this&&this.finishDrag();return}if(!(ma._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(ma._dragging=this,this._preventOutline&&Pa(this._element),Ol(),$r(),!this._moving)){this.fire("down");var y=u.touches?u.touches[0]:u,P=sa(this._element);this._startPoint=new Q(y.clientX,y.clientY),this._startPos=cn(this._element),this._parentScale=Do(P);var G=u.type==="mousedown";xr(document,G?"mousemove":"touchmove",this._onMove,this),xr(document,G?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var y=u.touches&&u.touches.length===1?u.touches[0]:u,P=new Q(y.clientX,y.clientY)._subtract(this._startPoint);!P.x&&!P.y||Math.abs(P.x)+Math.abs(P.y)<this.options.clickTolerance||(P.x/=this._parentScale.x,P.y/=this._parentScale.y,Cr(u),this._moved||(this.fire("dragstart"),this._moved=!0,Xn(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Xn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(P),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),bn(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){kr(document.body,"leaflet-dragging"),this._lastTarget&&(kr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Vr(document,"mousemove touchmove",this._onMove,this),Vr(document,"mouseup touchend touchcancel",this._onUp,this),Ns(),Gi();var y=this._moved&&this._moving;this._moving=!1,ma._dragging=!1,y&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function du(u,y,P){var G,ue=[1,4,2,8],Pe,ut,Nt,Ht,hn,$n,sr,jr;for(Pe=0,$n=u.length;Pe<$n;Pe++)u[Pe]._code=Ut(u[Pe],y);for(Nt=0;Nt<4;Nt++){for(sr=ue[Nt],G=[],Pe=0,$n=u.length,ut=$n-1;Pe<$n;ut=Pe++)Ht=u[Pe],hn=u[ut],Ht._code&sr?hn._code&sr||(jr=kt(hn,Ht,sr,y,P),jr._code=Ut(jr,y),G.push(jr)):(hn._code&sr&&(jr=kt(hn,Ht,sr,y,P),jr._code=Ut(jr,y),G.push(jr)),G.push(Ht));u=G}return u}function va(u,y){var P,G,ue,Pe,ut,Nt,Ht,hn,$n;if(!u||u.length===0)throw new Error("latlngs not passed");Wn(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var sr=pe([0,0]),jr=Z(u),Ms=jr.getNorthWest().distanceTo(jr.getSouthWest())*jr.getNorthEast().distanceTo(jr.getNorthWest());Ms<1700&&(sr=Bl(u));var cs=u.length,Gs=[];for(P=0;P<cs;P++){var es=pe(u[P]);Gs.push(y.project(pe([es.lat-sr.lat,es.lng-sr.lng])))}for(Nt=Ht=hn=0,P=0,G=cs-1;P<cs;G=P++)ue=Gs[P],Pe=Gs[G],ut=ue.y*Pe.x-Pe.y*ue.x,Ht+=(ue.x+Pe.x)*ut,hn+=(ue.y+Pe.y)*ut,Nt+=ut*3;Nt===0?$n=Gs[0]:$n=[Ht/Nt,hn/Nt];var Bo=y.unproject(we($n));return pe([Bo.lat+sr.lat,Bo.lng+sr.lng])}function Bl(u){for(var y=0,P=0,G=0,ue=0;ue<u.length;ue++){var Pe=pe(u[ue]);y+=Pe.lat,P+=Pe.lng,G++}return pe([y/G,P/G])}var Rl={__proto__:null,clipPolygon:du,polygonCenter:va,centroid:Bl};function Si(u,y){if(!y||!u.length)return u.slice();var P=y*y;return u=xe(u,P),u=ys(u,P),u}function Zo(u,y,P){return Math.sqrt(zn(u,y,P,!0))}function Ga(u,y,P){return zn(u,y,P)}function ys(u,y){var P=u.length,G=typeof Uint8Array<"u"?Uint8Array:Array,ue=new G(P);ue[0]=ue[P-1]=1,R(u,ue,y,0,P-1);var Pe,ut=[];for(Pe=0;Pe<P;Pe++)ue[Pe]&&ut.push(u[Pe]);return ut}function R(u,y,P,G,ue){var Pe=0,ut,Nt,Ht;for(Nt=G+1;Nt<=ue-1;Nt++)Ht=zn(u[Nt],u[G],u[ue],!0),Ht>Pe&&(ut=Nt,Pe=Ht);Pe>P&&(y[ut]=1,R(u,y,P,G,ut),R(u,y,P,ut,ue))}function xe(u,y){for(var P=[u[0]],G=1,ue=0,Pe=u.length;G<Pe;G++)pn(u[G],u[ue])>y&&(P.push(u[G]),ue=G);return ue<Pe-1&&P.push(u[Pe-1]),P}var Qe;function dt(u,y,P,G,ue){var Pe=G?Qe:Ut(u,P),ut=Ut(y,P),Nt,Ht,hn;for(Qe=ut;;){if(!(Pe|ut))return[u,y];if(Pe&ut)return!1;Nt=Pe||ut,Ht=kt(u,y,Nt,P,ue),hn=Ut(Ht,P),Nt===Pe?(u=Ht,Pe=hn):(y=Ht,ut=hn)}}function kt(u,y,P,G,ue){var Pe=y.x-u.x,ut=y.y-u.y,Nt=G.min,Ht=G.max,hn,$n;return P&8?(hn=u.x+Pe*(Ht.y-u.y)/ut,$n=Ht.y):P&4?(hn=u.x+Pe*(Nt.y-u.y)/ut,$n=Nt.y):P&2?(hn=Ht.x,$n=u.y+ut*(Ht.x-u.x)/Pe):P&1&&(hn=Nt.x,$n=u.y+ut*(Nt.x-u.x)/Pe),new Q(hn,$n,ue)}function Ut(u,y){var P=0;return u.x<y.min.x?P|=1:u.x>y.max.x&&(P|=2),u.y<y.min.y?P|=4:u.y>y.max.y&&(P|=8),P}function pn(u,y){var P=y.x-u.x,G=y.y-u.y;return P*P+G*G}function zn(u,y,P,G){var ue=y.x,Pe=y.y,ut=P.x-ue,Nt=P.y-Pe,Ht=ut*ut+Nt*Nt,hn;return Ht>0&&(hn=((u.x-ue)*ut+(u.y-Pe)*Nt)/Ht,hn>1?(ue=P.x,Pe=P.y):hn>0&&(ue+=ut*hn,Pe+=Nt*hn)),ut=u.x-ue,Nt=u.y-Pe,G?ut*ut+Nt*Nt:new Q(ue,Pe)}function Wn(u){return!V(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function cr(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Wn(u)}function br(u,y){var P,G,ue,Pe,ut,Nt,Ht,hn;if(!u||u.length===0)throw new Error("latlngs not passed");Wn(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var $n=pe([0,0]),sr=Z(u),jr=sr.getNorthWest().distanceTo(sr.getSouthWest())*sr.getNorthEast().distanceTo(sr.getNorthWest());jr<1700&&($n=Bl(u));var Ms=u.length,cs=[];for(P=0;P<Ms;P++){var Gs=pe(u[P]);cs.push(y.project(pe([Gs.lat-$n.lat,Gs.lng-$n.lng])))}for(P=0,G=0;P<Ms-1;P++)G+=cs[P].distanceTo(cs[P+1])/2;if(G===0)hn=cs[0];else for(P=0,Pe=0;P<Ms-1;P++)if(ut=cs[P],Nt=cs[P+1],ue=ut.distanceTo(Nt),Pe+=ue,Pe>G){Ht=(Pe-G)/ue,hn=[Nt.x-Ht*(Nt.x-ut.x),Nt.y-Ht*(Nt.y-ut.y)];break}var es=y.unproject(we(hn));return pe([es.lat+$n.lat,es.lng+$n.lng])}var Ur={__proto__:null,simplify:Si,pointToSegmentDistance:Zo,closestPointOnSegment:Ga,clipSegment:dt,_getEdgeIntersection:kt,_getBitCode:Ut,_sqClosestPointOnSegment:zn,isFlat:Wn,_flat:cr,polylineCenter:br},qi={project:function(u){return new Q(u.lng,u.lat)},unproject:function(u){return new me(u.y,u.x)},bounds:new nt([-180,-90],[180,90])},vi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new nt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var y=Math.PI/180,P=this.R,G=u.lat*y,ue=this.R_MINOR/P,Pe=Math.sqrt(1-ue*ue),ut=Pe*Math.sin(G),Nt=Math.tan(Math.PI/4-G/2)/Math.pow((1-ut)/(1+ut),Pe/2);return G=-P*Math.log(Math.max(Nt,1e-10)),new Q(u.lng*y*P,G)},unproject:function(u){for(var y=180/Math.PI,P=this.R,G=this.R_MINOR/P,ue=Math.sqrt(1-G*G),Pe=Math.exp(-u.y/P),ut=Math.PI/2-2*Math.atan(Pe),Nt=0,Ht=.1,hn;Nt<15&&Math.abs(Ht)>1e-7;Nt++)hn=ue*Math.sin(ut),hn=Math.pow((1-hn)/(1+hn),ue/2),Ht=Math.PI/2-2*Math.atan(Pe*hn)-ut,ut+=Ht;return new me(ut*y,u.x*y/P)}},Ci={__proto__:null,LonLat:qi,Mercator:vi,SphericalMercator:De},bs=i({},X,{code:"EPSG:3395",projection:vi,transformation:function(){var u=.5/(Math.PI*vi.R);return Je(u,.5,-u,.5)}()}),Cs=i({},X,{code:"EPSG:4326",projection:qi,transformation:Je(1/180,1,-1/180,.5)}),Xo=i({},de,{projection:qi,transformation:Je(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,y){var P=y.lng-u.lng,G=y.lat-u.lat;return Math.sqrt(P*P+G*G)},infinite:!0});de.Earth=X,de.EPSG3395=bs,de.EPSG3857=he,de.EPSG900913=ee,de.EPSG4326=Cs,de.Simple=Xo;var Hr=re.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[l(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[l(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var y=u.target;if(y.hasLayer(this)){if(this._map=y,this._zoomAnimated=y._zoomAnimated,this.getEvents){var P=this.getEvents();y.on(P,this),this.once("remove",function(){y.off(P,this)},this)}this.onAdd(y),this.fire("add"),y.fire("layeradd",{layer:this})}}});ti.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var y=l(u);return this._layers[y]?this:(this._layers[y]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var y=l(u);return this._layers[y]?(this._loaded&&u.onRemove(this),delete this._layers[y],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return l(u)in this._layers},eachLayer:function(u,y){for(var P in this._layers)u.call(y,this._layers[P]);return this},_addLayers:function(u){u=u?V(u)?u:[u]:[];for(var y=0,P=u.length;y<P;y++)this.addLayer(u[y])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[l(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var y=l(u);this._zoomBoundLayers[y]&&(delete this._zoomBoundLayers[y],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,y=-1/0,P=this._getZoomSpan();for(var G in this._zoomBoundLayers){var ue=this._zoomBoundLayers[G].options;u=ue.minZoom===void 0?u:Math.min(u,ue.minZoom),y=ue.maxZoom===void 0?y:Math.max(y,ue.maxZoom)}this._layersMaxZoom=y===-1/0?void 0:y,this._layersMinZoom=u===1/0?void 0:u,P!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var eo=Hr.extend({initialize:function(u,y){E(this,y),this._layers={};var P,G;if(u)for(P=0,G=u.length;P<G;P++)this.addLayer(u[P])},addLayer:function(u){var y=this.getLayerId(u);return this._layers[y]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var y=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[y]&&this._map.removeLayer(this._layers[y]),delete this._layers[y],this},hasLayer:function(u){var y=typeof u=="number"?u:this.getLayerId(u);return y in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var y=Array.prototype.slice.call(arguments,1),P,G;for(P in this._layers)G=this._layers[P],G[u]&&G[u].apply(G,y);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,y){for(var P in this._layers)u.call(y,this._layers[P]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return l(u)}}),Fl=function(u,y){return new eo(u,y)},mo=eo.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),eo.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),eo.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new H;for(var y in this._layers){var P=this._layers[y];u.extend(P.getBounds?P.getBounds():P.getLatLng())}return u}}),Tu=function(u,y){return new mo(u,y)},ka=z.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){E(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,y){var P=this._getIconUrl(u);if(!P){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var G=this._createImg(P,y&&y.tagName==="IMG"?y:null);return this._setIconStyles(G,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(G.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),G},_setIconStyles:function(u,y){var P=this.options,G=P[y+"Size"];typeof G=="number"&&(G=[G,G]);var ue=we(G),Pe=we(y==="shadow"&&P.shadowAnchor||P.iconAnchor||ue&&ue.divideBy(2,!0));u.className="leaflet-marker-"+y+" "+(P.className||""),Pe&&(u.style.marginLeft=-Pe.x+"px",u.style.marginTop=-Pe.y+"px"),ue&&(u.style.width=ue.x+"px",u.style.height=ue.y+"px")},_createImg:function(u,y){return y=y||document.createElement("img"),y.src=u,y},_getIconUrl:function(u){return Et.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function Qu(u){return new ka(u)}var yl=ka.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof yl.imagePath!="string"&&(yl.imagePath=this._detectIconPath()),(this.options.imagePath||yl.imagePath)+ka.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var y=function(P,G,ue){var Pe=G.exec(P);return Pe&&Pe[ue]};return u=y(u,/^url\((['"])?(.+)\1\)$/,2),u&&y(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=An("div","leaflet-default-icon-path",document.body),y=Xs(u,"background-image")||Xs(u,"backgroundImage");if(document.body.removeChild(u),y=this._stripUrl(y),y)return y;var P=document.querySelector('link[href$="leaflet.css"]');return P?P.href.substring(0,P.href.length-11-1):""}}),bl=Li.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new ma(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Xn(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&kr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var y=this._marker,P=y._map,G=this._marker.options.autoPanSpeed,ue=this._marker.options.autoPanPadding,Pe=cn(y._icon),ut=P.getPixelBounds(),Nt=P.getPixelOrigin(),Ht=ae(ut.min._subtract(Nt).add(ue),ut.max._subtract(Nt).subtract(ue));if(!Ht.contains(Pe)){var hn=we((Math.max(Ht.max.x,Pe.x)-Ht.max.x)/(ut.max.x-Ht.max.x)-(Math.min(Ht.min.x,Pe.x)-Ht.min.x)/(ut.min.x-Ht.min.x),(Math.max(Ht.max.y,Pe.y)-Ht.max.y)/(ut.max.y-Ht.max.y)-(Math.min(Ht.min.y,Pe.y)-Ht.min.y)/(ut.min.y-Ht.min.y)).multiplyBy(G);P.panBy(hn,{animate:!1}),this._draggable._newPos._add(hn),this._draggable._startPos._add(hn),bn(y._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=B(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(N(this._panRequest),this._panRequest=B(this._adjustPan.bind(this,u)))},_onDrag:function(u){var y=this._marker,P=y._shadow,G=cn(y._icon),ue=y._map.layerPointToLatLng(G);P&&bn(P,G),y._latlng=ue,u.latlng=ue,u.oldLatLng=this._oldLatLng,y.fire("move",u).fire("drag",u)},_onDragEnd:function(u){N(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),Es=Hr.extend({options:{icon:new yl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,y){E(this,y),this._latlng=pe(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var y=this._latlng;return this._latlng=pe(u),this.update(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,y="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),P=u.icon.createIcon(this._icon),G=!1;P!==this._icon&&(this._icon&&this._removeIcon(),G=!0,u.title&&(P.title=u.title),P.tagName==="IMG"&&(P.alt=u.alt||"")),Xn(P,y),u.keyboard&&(P.tabIndex="0",P.setAttribute("role","button")),this._icon=P,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&xr(P,"focus",this._panOnFocus,this);var ue=u.icon.createShadow(this._shadow),Pe=!1;ue!==this._shadow&&(this._removeShadow(),Pe=!0),ue&&(Xn(ue,y),ue.alt=""),this._shadow=ue,u.opacity<1&&this._updateOpacity(),G&&this.getPane().appendChild(this._icon),this._initInteraction(),ue&&Pe&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Vr(this._icon,"focus",this._panOnFocus,this),Pn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Pn(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&bn(this._icon,u),this._shadow&&bn(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(y)},_initInteraction:function(){if(this.options.interactive&&(Xn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),bl)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new bl(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&ps(this._icon,u),this._shadow&&ps(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var y=this.options.icon.options,P=y.iconSize?we(y.iconSize):we(0,0),G=y.iconAnchor?we(y.iconAnchor):we(0,0);u.panInside(this._latlng,{paddingTopLeft:G,paddingBottomRight:P.subtract(G)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Aa(u,y){return new Es(u,y)}var Jo=Hr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return E(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Oo=Jo.extend({options:{fill:!0,radius:10},initialize:function(u,y){E(this,y),this._latlng=pe(u),this._radius=this.options.radius},setLatLng:function(u){var y=this._latlng;return this._latlng=pe(u),this.redraw(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var y=u&&u.radius||this._radius;return Jo.prototype.setStyle.call(this,u),this.setRadius(y),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,y=this._radiusY||u,P=this._clickTolerance(),G=[u+P,y+P];this._pxBounds=new nt(this._point.subtract(G),this._point.add(G))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function jl(u,y){return new Oo(u,y)}var to=Oo.extend({initialize:function(u,y,P){if(typeof y=="number"&&(y=i({},P,{radius:y})),E(this,y),this._latlng=pe(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new H(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:Jo.prototype.setStyle,_project:function(){var u=this._latlng.lng,y=this._latlng.lat,P=this._map,G=P.options.crs;if(G.distance===X.distance){var ue=Math.PI/180,Pe=this._mRadius/X.R/ue,ut=P.project([y+Pe,u]),Nt=P.project([y-Pe,u]),Ht=ut.add(Nt).divideBy(2),hn=P.unproject(Ht).lat,$n=Math.acos((Math.cos(Pe*ue)-Math.sin(y*ue)*Math.sin(hn*ue))/(Math.cos(y*ue)*Math.cos(hn*ue)))/ue;(isNaN($n)||$n===0)&&($n=Pe/Math.cos(Math.PI/180*y)),this._point=Ht.subtract(P.getPixelOrigin()),this._radius=isNaN($n)?0:Ht.x-P.project([hn,u-$n]).x,this._radiusY=Ht.y-ut.y}else{var sr=G.unproject(G.project(this._latlng).subtract([this._mRadius,0]));this._point=P.latLngToLayerPoint(this._latlng),this._radius=this._point.x-P.latLngToLayerPoint(sr).x}this._updateBounds()}});function vo(u,y,P){return new to(u,y,P)}var yo=Jo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,y){E(this,y),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var y=1/0,P=null,G=zn,ue,Pe,ut=0,Nt=this._parts.length;ut<Nt;ut++)for(var Ht=this._parts[ut],hn=1,$n=Ht.length;hn<$n;hn++){ue=Ht[hn-1],Pe=Ht[hn];var sr=G(u,ue,Pe,!0);sr<y&&(y=sr,P=G(u,ue,Pe))}return P&&(P.distance=Math.sqrt(y)),P},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return br(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,y){return y=y||this._defaultShape(),u=pe(u),y.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new H,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return Wn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var y=[],P=Wn(u),G=0,ue=u.length;G<ue;G++)P?(y[G]=pe(u[G]),this._bounds.extend(y[G])):y[G]=this._convertLatLngs(u[G]);return y},_project:function(){var u=new nt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),y=new Q(u,u);this._rawPxBounds&&(this._pxBounds=new nt([this._rawPxBounds.min.subtract(y),this._rawPxBounds.max.add(y)]))},_projectLatlngs:function(u,y,P){var G=u[0]instanceof me,ue=u.length,Pe,ut;if(G){for(ut=[],Pe=0;Pe<ue;Pe++)ut[Pe]=this._map.latLngToLayerPoint(u[Pe]),P.extend(ut[Pe]);y.push(ut)}else for(Pe=0;Pe<ue;Pe++)this._projectLatlngs(u[Pe],y,P)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var y=this._parts,P,G,ue,Pe,ut,Nt,Ht;for(P=0,ue=0,Pe=this._rings.length;P<Pe;P++)for(Ht=this._rings[P],G=0,ut=Ht.length;G<ut-1;G++)Nt=dt(Ht[G],Ht[G+1],u,G,!0),Nt&&(y[ue]=y[ue]||[],y[ue].push(Nt[0]),(Nt[1]!==Ht[G+1]||G===ut-2)&&(y[ue].push(Nt[1]),ue++))}},_simplifyPoints:function(){for(var u=this._parts,y=this.options.smoothFactor,P=0,G=u.length;P<G;P++)u[P]=Si(u[P],y)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,y){var P,G,ue,Pe,ut,Nt,Ht=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(P=0,Pe=this._parts.length;P<Pe;P++)for(Nt=this._parts[P],G=0,ut=Nt.length,ue=ut-1;G<ut;ue=G++)if(!(!y&&G===0)&&Zo(u,Nt[ue],Nt[G])<=Ht)return!0;return!1}});function Ac(u,y){return new yo(u,y)}yo._flat=cr;var Is=yo.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return va(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var y=yo.prototype._convertLatLngs.call(this,u),P=y.length;return P>=2&&y[0]instanceof me&&y[0].equals(y[P-1])&&y.pop(),y},_setLatLngs:function(u){yo.prototype._setLatLngs.call(this,u),Wn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Wn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,y=this.options.weight,P=new Q(y,y);if(u=new nt(u.min.subtract(P),u.max.add(P)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var G=0,ue=this._rings.length,Pe;G<ue;G++)Pe=du(this._rings[G],u,!0),Pe.length&&this._parts.push(Pe)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var y=!1,P,G,ue,Pe,ut,Nt,Ht,hn;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(Pe=0,Ht=this._parts.length;Pe<Ht;Pe++)for(P=this._parts[Pe],ut=0,hn=P.length,Nt=hn-1;ut<hn;Nt=ut++)G=P[ut],ue=P[Nt],G.y>u.y!=ue.y>u.y&&u.x<(ue.x-G.x)*(u.y-G.y)/(ue.y-G.y)+G.x&&(y=!y);return y||yo.prototype._containsPoint.call(this,u,!0)}});function qa(u,y){return new Is(u,y)}var no=mo.extend({initialize:function(u,y){E(this,y),this._layers={},u&&this.addData(u)},addData:function(u){var y=V(u)?u:u.features,P,G,ue;if(y){for(P=0,G=y.length;P<G;P++)ue=y[P],(ue.geometries||ue.geometry||ue.features||ue.coordinates)&&this.addData(ue);return this}var Pe=this.options;if(Pe.filter&&!Pe.filter(u))return this;var ut=ro(u,Pe);return ut?(ut.feature=so(u),ut.defaultOptions=ut.options,this.resetStyle(ut),Pe.onEachFeature&&Pe.onEachFeature(u,ut),this.addLayer(ut)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=i({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(y){this._setLayerStyle(y,u)},this)},_setLayerStyle:function(u,y){u.setStyle&&(typeof y=="function"&&(y=y(u.feature)),u.setStyle(y))}});function ro(u,y){var P=u.type==="Feature"?u.geometry:u,G=P?P.coordinates:null,ue=[],Pe=y&&y.pointToLayer,ut=y&&y.coordsToLatLng||Ka,Nt,Ht,hn,$n;if(!G&&!P)return null;switch(P.type){case"Point":return Nt=ut(G),Ya(Pe,u,Nt,y);case"MultiPoint":for(hn=0,$n=G.length;hn<$n;hn++)Nt=ut(G[hn]),ue.push(Ya(Pe,u,Nt,y));return new mo(ue);case"LineString":case"MultiLineString":return Ht=io(G,P.type==="LineString"?0:1,ut),new yo(Ht,y);case"Polygon":case"MultiPolygon":return Ht=io(G,P.type==="Polygon"?1:2,ut),new Is(Ht,y);case"GeometryCollection":for(hn=0,$n=P.geometries.length;hn<$n;hn++){var sr=ro({geometry:P.geometries[hn],type:"Feature",properties:u.properties},y);sr&&ue.push(sr)}return new mo(ue);case"FeatureCollection":for(hn=0,$n=P.features.length;hn<$n;hn++){var jr=ro(P.features[hn],y);jr&&ue.push(jr)}return new mo(ue);default:throw new Error("Invalid GeoJSON object.")}}function Ya(u,y,P,G){return u?u(y,P):new Es(P,G&&G.markersInheritOptions&&G)}function Ka(u){return new me(u[1],u[0],u[2])}function io(u,y,P){for(var G=[],ue=0,Pe=u.length,ut;ue<Pe;ue++)ut=y?io(u[ue],y-1,P):(P||Ka)(u[ue]),G.push(ut);return G}function Vs(u,y){return u=pe(u),u.alt!==void 0?[v(u.lng,y),v(u.lat,y),v(u.alt,y)]:[v(u.lng,y),v(u.lat,y)]}function Ta(u,y,P,G){for(var ue=[],Pe=0,ut=u.length;Pe<ut;Pe++)ue.push(y?Ta(u[Pe],Wn(u[Pe])?0:y-1,P,G):Vs(u[Pe],G));return!y&&P&&ue.length>0&&ue.push(ue[0].slice()),ue}function Qo(u,y){return u.feature?i({},u.feature,{geometry:y}):so(y)}function so(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var St={toGeoJSON:function(u){return Qo(this,{type:"Point",coordinates:Vs(this.getLatLng(),u)})}};Es.include(St),to.include(St),Oo.include(St),yo.include({toGeoJSON:function(u){var y=!Wn(this._latlngs),P=Ta(this._latlngs,y?1:0,!1,u);return Qo(this,{type:(y?"Multi":"")+"LineString",coordinates:P})}}),Is.include({toGeoJSON:function(u){var y=!Wn(this._latlngs),P=y&&!Wn(this._latlngs[0]),G=Ta(this._latlngs,P?2:y?1:0,!0,u);return y||(G=[G]),Qo(this,{type:(P?"Multi":"")+"Polygon",coordinates:G})}}),eo.include({toMultiPoint:function(u){var y=[];return this.eachLayer(function(P){y.push(P.toGeoJSON(u).geometry.coordinates)}),Qo(this,{type:"MultiPoint",coordinates:y})},toGeoJSON:function(u){var y=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(y==="MultiPoint")return this.toMultiPoint(u);var P=y==="GeometryCollection",G=[];return this.eachLayer(function(ue){if(ue.toGeoJSON){var Pe=ue.toGeoJSON(u);if(P)G.push(Pe.geometry);else{var ut=so(Pe);ut.type==="FeatureCollection"?G.push.apply(G,ut.features):G.push(ut)}}}),P?Qo(this,{geometries:G,type:"GeometryCollection"}):{type:"FeatureCollection",features:G}}});function qt(u,y){return new no(u,y)}var It=qt,Rn=Hr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,y,P){this._url=u,this._bounds=Z(y),E(this,P)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Xn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Pn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&gi(this._image),this},bringToBack:function(){return this._map&&mi(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=Z(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",y=this._image=u?this._url:An("img");if(Xn(y,"leaflet-image-layer"),this._zoomAnimated&&Xn(y,"leaflet-zoom-animated"),this.options.className&&Xn(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onload=o(this.fire,this,"load"),y.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=y.src;return}y.src=this._url,y.alt=this.options.alt},_animateZoom:function(u){var y=this._map.getZoomScale(u.zoom),P=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;Yr(this._image,P,y)},_reset:function(){var u=this._image,y=new nt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),P=y.getSize();bn(u,y.min),u.style.width=P.x+"px",u.style.height=P.y+"px"},_updateOpacity:function(){ps(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),tr=function(u,y,P){return new Rn(u,y,P)},Sr=Rn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",y=this._image=u?this._url:An("video");if(Xn(y,"leaflet-image-layer"),this._zoomAnimated&&Xn(y,"leaflet-zoom-animated"),this.options.className&&Xn(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onloadeddata=o(this.fire,this,"load"),u){for(var P=y.getElementsByTagName("source"),G=[],ue=0;ue<P.length;ue++)G.push(P[ue].src);this._url=P.length>0?G:[y.src];return}V(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(y.style,"objectFit")&&(y.style.objectFit="fill"),y.autoplay=!!this.options.autoplay,y.loop=!!this.options.loop,y.muted=!!this.options.muted,y.playsInline=!!this.options.playsInline;for(var Pe=0;Pe<this._url.length;Pe++){var ut=An("source");ut.src=this._url[Pe],y.appendChild(ut)}}});function Ji(u,y,P){return new Sr(u,y,P)}var Ei=Rn.extend({_initImage:function(){var u=this._image=this._url;Xn(u,"leaflet-image-layer"),this._zoomAnimated&&Xn(u,"leaflet-zoom-animated"),this.options.className&&Xn(u,this.options.className),u.onselectstart=p,u.onmousemove=p}});function fu(u,y,P){return new Ei(u,y,P)}var bo=Hr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,y){u&&(u instanceof me||V(u))?(this._latlng=pe(u),E(this,y)):(E(this,u),this._source=y),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&ps(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&ps(this._container,1),this.bringToFront(),this.options.interactive&&(Xn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(ps(this._container,0),this._removeTimeout=setTimeout(o(Pn,void 0,this._container),200)):Pn(this._container),this.options.interactive&&(kr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=pe(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&gi(this._container),this},bringToBack:function(){return this._map&&mi(this._container),this},_prepareOpen:function(u){var y=this._source;if(!y._map)return!1;if(y instanceof mo){y=null;var P=this._source._layers;for(var G in P)if(P[G]._map){y=P[G];break}if(!y)return!1;this._source=y}if(!u)if(y.getCenter)u=y.getCenter();else if(y.getLatLng)u=y.getLatLng();else if(y.getBounds)u=y.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,y=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof y=="string")u.innerHTML=y;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(y)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),y=we(this.options.offset),P=this._getAnchor();this._zoomAnimated?bn(this._container,u.add(P)):y=y.add(u).add(P);var G=this._containerBottom=-y.y,ue=this._containerLeft=-Math.round(this._containerWidth/2)+y.x;this._container.style.bottom=G+"px",this._container.style.left=ue+"px"}},_getAnchor:function(){return[0,0]}});ti.include({_initOverlay:function(u,y,P,G){var ue=y;return ue instanceof u||(ue=new u(G).setContent(y)),P&&ue.setLatLng(P),ue}}),Hr.include({_initOverlay:function(u,y,P,G){var ue=P;return ue instanceof u?(E(ue,G),ue._source=this):(ue=y&&!G?y:new u(G,this),ue.setContent(P)),ue}});var Qi=bo.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,bo.prototype.openOn.call(this,u)},onAdd:function(u){bo.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Jo||this._source.on("preclick",Js))},onRemove:function(u){bo.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Jo||this._source.off("preclick",Js))},getEvents:function(){var u=bo.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",y=this._container=An("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),P=this._wrapper=An("div",u+"-content-wrapper",y);if(this._contentNode=An("div",u+"-content",P),ou(y),Qs(this._contentNode),xr(y,"contextmenu",Js),this._tipContainer=An("div",u+"-tip-container",y),this._tip=An("div",u+"-tip",this._tipContainer),this.options.closeButton){var G=this._closeButton=An("a",u+"-close-button",y);G.setAttribute("role","button"),G.setAttribute("aria-label","Close popup"),G.href="#close",G.innerHTML='<span aria-hidden="true">&#215;</span>',xr(G,"click",function(ue){Cr(ue),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,y=u.style;y.width="",y.whiteSpace="nowrap";var P=u.offsetWidth;P=Math.min(P,this.options.maxWidth),P=Math.max(P,this.options.minWidth),y.width=P+1+"px",y.whiteSpace="",y.height="";var G=u.offsetHeight,ue=this.options.maxHeight,Pe="leaflet-popup-scrolled";ue&&G>ue?(y.height=ue+"px",Xn(u,Pe)):kr(u,Pe),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),P=this._getAnchor();bn(this._container,y.add(P))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,y=parseInt(Xs(this._container,"marginBottom"),10)||0,P=this._container.offsetHeight+y,G=this._containerWidth,ue=new Q(this._containerLeft,-P-this._containerBottom);ue._add(cn(this._container));var Pe=u.layerPointToContainerPoint(ue),ut=we(this.options.autoPanPadding),Nt=we(this.options.autoPanPaddingTopLeft||ut),Ht=we(this.options.autoPanPaddingBottomRight||ut),hn=u.getSize(),$n=0,sr=0;Pe.x+G+Ht.x>hn.x&&($n=Pe.x+G-hn.x+Ht.x),Pe.x-$n-Nt.x<0&&($n=Pe.x-Nt.x),Pe.y+P+Ht.y>hn.y&&(sr=Pe.y+P-hn.y+Ht.y),Pe.y-sr-Nt.y<0&&(sr=Pe.y-Nt.y),($n||sr)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([$n,sr]))}},_getAnchor:function(){return we(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Da=function(u,y){return new Qi(u,y)};ti.mergeOptions({closePopupOnClick:!0}),ti.include({openPopup:function(u,y,P){return this._initOverlay(Qi,u,y,P).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),Hr.include({bindPopup:function(u,y){return this._popup=this._initOverlay(Qi,this._popup,u,y),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof mo||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){Kr(u);var y=u.layer||u.target;if(this._popup._source===y&&!(y instanceof Jo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=y,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var Za=bo.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){bo.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){bo.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=bo.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",y=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=An("div",y),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var y,P,G=this._map,ue=this._container,Pe=G.latLngToContainerPoint(G.getCenter()),ut=G.layerPointToContainerPoint(u),Nt=this.options.direction,Ht=ue.offsetWidth,hn=ue.offsetHeight,$n=we(this.options.offset),sr=this._getAnchor();Nt==="top"?(y=Ht/2,P=hn):Nt==="bottom"?(y=Ht/2,P=0):Nt==="center"?(y=Ht/2,P=hn/2):Nt==="right"?(y=0,P=hn/2):Nt==="left"?(y=Ht,P=hn/2):ut.x<Pe.x?(Nt="right",y=0,P=hn/2):(Nt="left",y=Ht+($n.x+sr.x)*2,P=hn/2),u=u.subtract(we(y,P,!0)).add($n).add(sr),kr(ue,"leaflet-tooltip-right"),kr(ue,"leaflet-tooltip-left"),kr(ue,"leaflet-tooltip-top"),kr(ue,"leaflet-tooltip-bottom"),Xn(ue,"leaflet-tooltip-"+Nt),bn(ue,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&ps(this._container,u)},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(y)},_getAnchor:function(){return we(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Oa=function(u,y){return new Za(u,y)};ti.include({openTooltip:function(u,y,P){return this._initOverlay(Za,u,y,P).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),Hr.include({bindTooltip:function(u,y){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Za,this._tooltip,u,y),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var y=u?"off":"on",P={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?P.add=this._openTooltip:(P.mouseover=this._openTooltip,P.mouseout=this.closeTooltip,P.click=this._openTooltip,this._map?this._addFocusListeners():P.add=this._addFocusListeners),this._tooltip.options.sticky&&(P.mousemove=this._moveTooltip),this[y](P),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof mo||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var y=typeof u.getElement=="function"&&u.getElement();y&&(xr(y,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),xr(y,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var y=typeof u.getElement=="function"&&u.getElement();y&&y.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var y=this;this._map.once("moveend",function(){y._openOnceFlag=!1,y._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var y=u.latlng,P,G;this._tooltip.options.sticky&&u.originalEvent&&(P=this._map.mouseEventToContainerPoint(u.originalEvent),G=this._map.containerPointToLayerPoint(P),y=this._map.layerPointToLatLng(G)),this._tooltip.setLatLng(y)}});var Na=ka.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var y=u&&u.tagName==="DIV"?u:document.createElement("div"),P=this.options;if(P.html instanceof Element?(En(y),y.appendChild(P.html)):y.innerHTML=P.html!==!1?P.html:"",P.bgPos){var G=we(P.bgPos);y.style.backgroundPosition=-G.x+"px "+-G.y+"px"}return this._setIconStyles(y,"icon"),y},createShadow:function(){return null}});function Ia(u){return new Na(u)}ka.Default=yl;var ni=Hr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Et.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){E(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),Pn(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(gi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(mi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof Q?u:new Q(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var y=this.getPane().children,P=-u(-1/0,1/0),G=0,ue=y.length,Pe;G<ue;G++)Pe=y[G].style.zIndex,y[G]!==this._container&&Pe&&(P=u(P,+Pe));isFinite(P)&&(this.options.zIndex=P+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Et.ielt9){ps(this._container,this.options.opacity);var u=+new Date,y=!1,P=!1;for(var G in this._tiles){var ue=this._tiles[G];if(!(!ue.current||!ue.loaded)){var Pe=Math.min(1,(u-ue.loaded)/200);ps(ue.el,Pe),Pe<1?y=!0:(ue.active?P=!0:this._onOpaqueTile(ue),ue.active=!0)}}P&&!this._noPrune&&this._pruneTiles(),y&&(N(this._fadeFrame),this._fadeFrame=B(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=An("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,y=this.options.maxZoom;if(u!==void 0){for(var P in this._levels)P=Number(P),this._levels[P].el.children.length||P===u?(this._levels[P].el.style.zIndex=y-Math.abs(u-P),this._onUpdateLevel(P)):(Pn(this._levels[P].el),this._removeTilesAtZoom(P),this._onRemoveLevel(P),delete this._levels[P]);var G=this._levels[u],ue=this._map;return G||(G=this._levels[u]={},G.el=An("div","leaflet-tile-container leaflet-zoom-animated",this._container),G.el.style.zIndex=y,G.origin=ue.project(ue.unproject(ue.getPixelOrigin()),u).round(),G.zoom=u,this._setZoomTransform(G,ue.getCenter(),ue.getZoom()),p(G.el.offsetWidth),this._onCreateLevel(G)),this._level=G,G}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var u,y,P=this._map.getZoom();if(P>this.options.maxZoom||P<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)y=this._tiles[u],y.retain=y.current;for(u in this._tiles)if(y=this._tiles[u],y.current&&!y.active){var G=y.coords;this._retainParent(G.x,G.y,G.z,G.z-5)||this._retainChildren(G.x,G.y,G.z,G.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var y in this._tiles)this._tiles[y].coords.z===u&&this._removeTile(y)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)Pn(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,y,P,G){var ue=Math.floor(u/2),Pe=Math.floor(y/2),ut=P-1,Nt=new Q(+ue,+Pe);Nt.z=+ut;var Ht=this._tileCoordsToKey(Nt),hn=this._tiles[Ht];return hn&&hn.active?(hn.retain=!0,!0):(hn&&hn.loaded&&(hn.retain=!0),ut>G?this._retainParent(ue,Pe,ut,G):!1)},_retainChildren:function(u,y,P,G){for(var ue=2*u;ue<2*u+2;ue++)for(var Pe=2*y;Pe<2*y+2;Pe++){var ut=new Q(ue,Pe);ut.z=P+1;var Nt=this._tileCoordsToKey(ut),Ht=this._tiles[Nt];if(Ht&&Ht.active){Ht.retain=!0;continue}else Ht&&Ht.loaded&&(Ht.retain=!0);P+1<G&&this._retainChildren(ue,Pe,P+1,G)}},_resetView:function(u){var y=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),y,y)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var y=this.options;return y.minNativeZoom!==void 0&&u<y.minNativeZoom?y.minNativeZoom:y.maxNativeZoom!==void 0&&y.maxNativeZoom<u?y.maxNativeZoom:u},_setView:function(u,y,P,G){var ue=Math.round(y);this.options.maxZoom!==void 0&&ue>this.options.maxZoom||this.options.minZoom!==void 0&&ue<this.options.minZoom?ue=void 0:ue=this._clampZoom(ue);var Pe=this.options.updateWhenZooming&&ue!==this._tileZoom;(!G||Pe)&&(this._tileZoom=ue,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ue!==void 0&&this._update(u),P||this._pruneTiles(),this._noPrune=!!P),this._setZoomTransforms(u,y)},_setZoomTransforms:function(u,y){for(var P in this._levels)this._setZoomTransform(this._levels[P],u,y)},_setZoomTransform:function(u,y,P){var G=this._map.getZoomScale(P,u.zoom),ue=u.origin.multiplyBy(G).subtract(this._map._getNewPixelOrigin(y,P)).round();Et.any3d?Yr(u.el,ue,G):bn(u.el,ue)},_resetGrid:function(){var u=this._map,y=u.options.crs,P=this._tileSize=this.getTileSize(),G=this._tileZoom,ue=this._map.getPixelWorldBounds(this._tileZoom);ue&&(this._globalTileRange=this._pxBoundsToTileRange(ue)),this._wrapX=y.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,y.wrapLng[0]],G).x/P.x),Math.ceil(u.project([0,y.wrapLng[1]],G).x/P.y)],this._wrapY=y.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([y.wrapLat[0],0],G).y/P.x),Math.ceil(u.project([y.wrapLat[1],0],G).y/P.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var y=this._map,P=y._animatingZoom?Math.max(y._animateToZoom,y.getZoom()):y.getZoom(),G=y.getZoomScale(P,this._tileZoom),ue=y.project(u,this._tileZoom).floor(),Pe=y.getSize().divideBy(G*2);return new nt(ue.subtract(Pe),ue.add(Pe))},_update:function(u){var y=this._map;if(y){var P=this._clampZoom(y.getZoom());if(u===void 0&&(u=y.getCenter()),this._tileZoom!==void 0){var G=this._getTiledPixelBounds(u),ue=this._pxBoundsToTileRange(G),Pe=ue.getCenter(),ut=[],Nt=this.options.keepBuffer,Ht=new nt(ue.getBottomLeft().subtract([Nt,-Nt]),ue.getTopRight().add([Nt,-Nt]));if(!(isFinite(ue.min.x)&&isFinite(ue.min.y)&&isFinite(ue.max.x)&&isFinite(ue.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var hn in this._tiles){var $n=this._tiles[hn].coords;($n.z!==this._tileZoom||!Ht.contains(new Q($n.x,$n.y)))&&(this._tiles[hn].current=!1)}if(Math.abs(P-this._tileZoom)>1){this._setView(u,P);return}for(var sr=ue.min.y;sr<=ue.max.y;sr++)for(var jr=ue.min.x;jr<=ue.max.x;jr++){var Ms=new Q(jr,sr);if(Ms.z=this._tileZoom,!!this._isValidTile(Ms)){var cs=this._tiles[this._tileCoordsToKey(Ms)];cs?cs.current=!0:ut.push(Ms)}}if(ut.sort(function(es,Bo){return es.distanceTo(Pe)-Bo.distanceTo(Pe)}),ut.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Gs=document.createDocumentFragment();for(jr=0;jr<ut.length;jr++)this._addTile(ut[jr],Gs);this._level.el.appendChild(Gs)}}}},_isValidTile:function(u){var y=this._map.options.crs;if(!y.infinite){var P=this._globalTileRange;if(!y.wrapLng&&(u.x<P.min.x||u.x>P.max.x)||!y.wrapLat&&(u.y<P.min.y||u.y>P.max.y))return!1}if(!this.options.bounds)return!0;var G=this._tileCoordsToBounds(u);return Z(this.options.bounds).overlaps(G)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var y=this._map,P=this.getTileSize(),G=u.scaleBy(P),ue=G.add(P),Pe=y.unproject(G,u.z),ut=y.unproject(ue,u.z);return[Pe,ut]},_tileCoordsToBounds:function(u){var y=this._tileCoordsToNwSe(u),P=new H(y[0],y[1]);return this.options.noWrap||(P=this._map.wrapLatLngBounds(P)),P},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var y=u.split(":"),P=new Q(+y[0],+y[1]);return P.z=+y[2],P},_removeTile:function(u){var y=this._tiles[u];y&&(Pn(y.el),delete this._tiles[u],this.fire("tileunload",{tile:y.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){Xn(u,"leaflet-tile");var y=this.getTileSize();u.style.width=y.x+"px",u.style.height=y.y+"px",u.onselectstart=p,u.onmousemove=p,Et.ielt9&&this.options.opacity<1&&ps(u,this.options.opacity)},_addTile:function(u,y){var P=this._getTilePos(u),G=this._tileCoordsToKey(u),ue=this.createTile(this._wrapCoords(u),o(this._tileReady,this,u));this._initTile(ue),this.createTile.length<2&&B(o(this._tileReady,this,u,null,ue)),bn(ue,P),this._tiles[G]={el:ue,coords:u,current:!0},y.appendChild(ue),this.fire("tileloadstart",{tile:ue,coords:u})},_tileReady:function(u,y,P){y&&this.fire("tileerror",{error:y,tile:P,coords:u});var G=this._tileCoordsToKey(u);P=this._tiles[G],P&&(P.loaded=+new Date,this._map._fadeAnimated?(ps(P.el,0),N(this._fadeFrame),this._fadeFrame=B(this._updateOpacity,this)):(P.active=!0,this._pruneTiles()),y||(Xn(P.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:P.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Et.ielt9||!this._map._fadeAnimated?B(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var y=new Q(this._wrapX?d(u.x,this._wrapX):u.x,this._wrapY?d(u.y,this._wrapY):u.y);return y.z=u.z,y},_pxBoundsToTileRange:function(u){var y=this.getTileSize();return new nt(u.min.unscaleBy(y).floor(),u.max.unscaleBy(y).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function ya(u){return new ni(u)}var Us=ni.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,y){this._url=u,y=E(this,y),y.detectRetina&&Et.retina&&y.maxZoom>0?(y.tileSize=Math.floor(y.tileSize/2),y.zoomReverse?(y.zoomOffset--,y.minZoom=Math.min(y.maxZoom,y.minZoom+1)):(y.zoomOffset++,y.maxZoom=Math.max(y.minZoom,y.maxZoom-1)),y.minZoom=Math.max(0,y.minZoom)):y.zoomReverse?y.minZoom=Math.min(y.maxZoom,y.minZoom):y.maxZoom=Math.max(y.minZoom,y.maxZoom),typeof y.subdomains=="string"&&(y.subdomains=y.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,y){return this._url===u&&y===void 0&&(y=!0),this._url=u,y||this.redraw(),this},createTile:function(u,y){var P=document.createElement("img");return xr(P,"load",o(this._tileOnLoad,this,y,P)),xr(P,"error",o(this._tileOnError,this,y,P)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(P.referrerPolicy=this.options.referrerPolicy),P.alt="",P.src=this.getTileUrl(u),P},getTileUrl:function(u){var y={r:Et.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var P=this._globalTileRange.max.y-u.y;this.options.tms&&(y.y=P),y["-y"]=P}return D(this._url,i(y,this.options))},_tileOnLoad:function(u,y){Et.ielt9?setTimeout(o(u,this,null,y),0):u(null,y)},_tileOnError:function(u,y,P){var G=this.options.errorTileUrl;G&&y.getAttribute("src")!==G&&(y.src=G),u(P,y)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,y=this.options.maxZoom,P=this.options.zoomReverse,G=this.options.zoomOffset;return P&&(u=y-u),u+G},_getSubdomain:function(u){var y=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[y]},_abortLoading:function(){var u,y;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(y=this._tiles[u].el,y.onload=p,y.onerror=p,!y.complete)){y.src=te;var P=this._tiles[u].coords;Pn(y),delete this._tiles[u],this.fire("tileabort",{tile:y,coords:P})}},_removeTile:function(u){var y=this._tiles[u];if(y)return y.el.setAttribute("src",te),ni.prototype._removeTile.call(this,u)},_tileReady:function(u,y,P){if(!(!this._map||P&&P.getAttribute("src")===te))return ni.prototype._tileReady.call(this,u,y,P)}});function Pi(u,y){return new Us(u,y)}var Ii=Us.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,y){this._url=u;var P=i({},this.defaultWmsParams);for(var G in y)G in this.options||(P[G]=y[G]);y=E(this,y);var ue=y.detectRetina&&Et.retina?2:1,Pe=this.getTileSize();P.width=Pe.x*ue,P.height=Pe.y*ue,this.wmsParams=P},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var y=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[y]=this._crs.code,Us.prototype.onAdd.call(this,u)},getTileUrl:function(u){var y=this._tileCoordsToNwSe(u),P=this._crs,G=ae(P.project(y[0]),P.project(y[1])),ue=G.min,Pe=G.max,ut=(this._wmsVersion>=1.3&&this._crs===Cs?[ue.y,ue.x,Pe.y,Pe.x]:[ue.x,ue.y,Pe.x,Pe.y]).join(","),Nt=Us.prototype.getTileUrl.call(this,u);return Nt+k(this.wmsParams,Nt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ut},setParams:function(u,y){return i(this.wmsParams,u),y||this.redraw(),this}});function _s(u,y){return new Ii(u,y)}Us.WMS=Ii,Pi.wms=_s;var Ui=Hr.extend({options:{padding:.1},initialize:function(u){E(this,u),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Xn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,y){var P=this._map.getZoomScale(y,this._zoom),G=this._map.getSize().multiplyBy(.5+this.options.padding),ue=this._map.project(this._center,y),Pe=G.multiplyBy(-P).add(ue).subtract(this._map._getNewPixelOrigin(u,y));Et.any3d?Yr(this._container,Pe,P):bn(this._container,Pe)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,y=this._map.getSize(),P=this._map.containerPointToLayerPoint(y.multiplyBy(-u)).round();this._bounds=new nt(P,P.add(y.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ea=Ui.extend({options:{tolerance:0},getEvents:function(){var u=Ui.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ui.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");xr(u,"mousemove",this._onMouseMove,this),xr(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),xr(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){N(this._redrawRequest),delete this._ctx,Pn(this._container),Vr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var y in this._layers)u=this._layers[y],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ui.prototype._update.call(this);var u=this._bounds,y=this._container,P=u.getSize(),G=Et.retina?2:1;bn(y,u.min),y.width=G*P.x,y.height=G*P.y,y.style.width=P.x+"px",y.style.height=P.y+"px",Et.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){Ui.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[l(u)]=u;var y=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=y),this._drawLast=y,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var y=u._order,P=y.next,G=y.prev;P?P.prev=G:this._drawLast=G,G?G.next=P:this._drawFirst=P,delete u._order,delete this._layers[l(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var y=u.options.dashArray.split(/[, ]+/),P=[],G,ue;for(ue=0;ue<y.length;ue++){if(G=Number(y[ue]),isNaN(G))return;P.push(G)}u.options._dashArray=P}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||B(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var y=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new nt,this._redrawBounds.extend(u._pxBounds.min.subtract([y,y])),this._redrawBounds.extend(u._pxBounds.max.add([y,y]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var y=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,y.x,y.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,y=this._redrawBounds;if(this._ctx.save(),y){var P=y.getSize();this._ctx.beginPath(),this._ctx.rect(y.min.x,y.min.y,P.x,P.y),this._ctx.clip()}this._drawing=!0;for(var G=this._drawFirst;G;G=G.next)u=G.layer,(!y||u._pxBounds&&u._pxBounds.intersects(y))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,y){if(this._drawing){var P,G,ue,Pe,ut=u._parts,Nt=ut.length,Ht=this._ctx;if(Nt){for(Ht.beginPath(),P=0;P<Nt;P++){for(G=0,ue=ut[P].length;G<ue;G++)Pe=ut[P][G],Ht[G?"lineTo":"moveTo"](Pe.x,Pe.y);y&&Ht.closePath()}this._fillStroke(Ht,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var y=u._point,P=this._ctx,G=Math.max(Math.round(u._radius),1),ue=(Math.max(Math.round(u._radiusY),1)||G)/G;ue!==1&&(P.save(),P.scale(1,ue)),P.beginPath(),P.arc(y.x,y.y/ue,G,0,Math.PI*2,!1),ue!==1&&P.restore(),this._fillStroke(P,u)}},_fillStroke:function(u,y){var P=y.options;P.fill&&(u.globalAlpha=P.fillOpacity,u.fillStyle=P.fillColor||P.color,u.fill(P.fillRule||"evenodd")),P.stroke&&P.weight!==0&&(u.setLineDash&&u.setLineDash(y.options&&y.options._dashArray||[]),u.globalAlpha=P.opacity,u.lineWidth=P.weight,u.strokeStyle=P.color,u.lineCap=P.lineCap,u.lineJoin=P.lineJoin,u.stroke())},_onClick:function(u){for(var y=this._map.mouseEventToLayerPoint(u),P,G,ue=this._drawFirst;ue;ue=ue.next)P=ue.layer,P.options.interactive&&P._containsPoint(y)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(P))&&(G=P);this._fireEvent(G?[G]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var y=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,y)}},_handleMouseOut:function(u){var y=this._hoveredLayer;y&&(kr(this._container,"leaflet-interactive"),this._fireEvent([y],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,y){if(!this._mouseHoverThrottled){for(var P,G,ue=this._drawFirst;ue;ue=ue.next)P=ue.layer,P.options.interactive&&P._containsPoint(y)&&(G=P);G!==this._hoveredLayer&&(this._handleMouseOut(u),G&&(Xn(this._container,"leaflet-interactive"),this._fireEvent([G],u,"mouseover"),this._hoveredLayer=G)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,y,P){this._map._fireDOMEvent(y,P||y.type,u)},_bringToFront:function(u){var y=u._order;if(y){var P=y.next,G=y.prev;if(P)P.prev=G;else return;G?G.next=P:P&&(this._drawFirst=P),y.prev=this._drawLast,this._drawLast.next=y,y.next=null,this._drawLast=y,this._requestRedraw(u)}},_bringToBack:function(u){var y=u._order;if(y){var P=y.next,G=y.prev;if(G)G.next=P;else return;P?P.prev=G:G&&(this._drawLast=G),y.prev=null,y.next=this._drawFirst,this._drawFirst.prev=y,this._drawFirst=y,this._requestRedraw(u)}}});function No(u){return Et.canvas?new ea(u):null}var aa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ec={_initContainer:function(){this._container=An("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ui.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var y=u._container=aa("shape");Xn(y,"leaflet-vml-shape "+(this.options.className||"")),y.coordsize="1 1",u._path=aa("path"),y.appendChild(u._path),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){var y=u._container;this._container.appendChild(y),u.options.interactive&&u.addInteractiveTarget(y)},_removePath:function(u){var y=u._container;Pn(y),u.removeInteractiveTarget(y),delete this._layers[l(u)]},_updateStyle:function(u){var y=u._stroke,P=u._fill,G=u.options,ue=u._container;ue.stroked=!!G.stroke,ue.filled=!!G.fill,G.stroke?(y||(y=u._stroke=aa("stroke")),ue.appendChild(y),y.weight=G.weight+"px",y.color=G.color,y.opacity=G.opacity,G.dashArray?y.dashStyle=V(G.dashArray)?G.dashArray.join(" "):G.dashArray.replace(/( *, *)/g," "):y.dashStyle="",y.endcap=G.lineCap.replace("butt","flat"),y.joinstyle=G.lineJoin):y&&(ue.removeChild(y),u._stroke=null),G.fill?(P||(P=u._fill=aa("fill")),ue.appendChild(P),P.color=G.fillColor||G.color,P.opacity=G.fillOpacity):P&&(ue.removeChild(P),u._fill=null)},_updateCircle:function(u){var y=u._point.round(),P=Math.round(u._radius),G=Math.round(u._radiusY||P);this._setPath(u,u._empty()?"M0 0":"AL "+y.x+","+y.y+" "+P+","+G+" 0,"+65535*360)},_setPath:function(u,y){u._path.v=y},_bringToFront:function(u){gi(u._container)},_bringToBack:function(u){mi(u._container)}},Ba=Et.vml?aa:se,Ps=Ui.extend({_initContainer:function(){this._container=Ba("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ba("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Pn(this._container),Vr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ui.prototype._update.call(this);var u=this._bounds,y=u.getSize(),P=this._container;(!this._svgSize||!this._svgSize.equals(y))&&(this._svgSize=y,P.setAttribute("width",y.x),P.setAttribute("height",y.y)),bn(P,u.min),P.setAttribute("viewBox",[u.min.x,u.min.y,y.x,y.y].join(" ")),this.fire("update")}},_initPath:function(u){var y=u._path=Ba("path");u.options.className&&Xn(y,u.options.className),u.options.interactive&&Xn(y,"leaflet-interactive"),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){Pn(u._path),u.removeInteractiveTarget(u._path),delete this._layers[l(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var y=u._path,P=u.options;y&&(P.stroke?(y.setAttribute("stroke",P.color),y.setAttribute("stroke-opacity",P.opacity),y.setAttribute("stroke-width",P.weight),y.setAttribute("stroke-linecap",P.lineCap),y.setAttribute("stroke-linejoin",P.lineJoin),P.dashArray?y.setAttribute("stroke-dasharray",P.dashArray):y.removeAttribute("stroke-dasharray"),P.dashOffset?y.setAttribute("stroke-dashoffset",P.dashOffset):y.removeAttribute("stroke-dashoffset")):y.setAttribute("stroke","none"),P.fill?(y.setAttribute("fill",P.fillColor||P.color),y.setAttribute("fill-opacity",P.fillOpacity),y.setAttribute("fill-rule",P.fillRule||"evenodd")):y.setAttribute("fill","none"))},_updatePoly:function(u,y){this._setPath(u,le(u._parts,y))},_updateCircle:function(u){var y=u._point,P=Math.max(Math.round(u._radius),1),G=Math.max(Math.round(u._radiusY),1)||P,ue="a"+P+","+G+" 0 1,0 ",Pe=u._empty()?"M0 0":"M"+(y.x-P)+","+y.y+ue+P*2+",0 "+ue+-P*2+",0 ";this._setPath(u,Pe)},_setPath:function(u,y){u._path.setAttribute("d",y)},_bringToFront:function(u){gi(u._path)},_bringToBack:function(u){mi(u._path)}});Et.vml&&Ps.include(ec);function Vi(u){return Et.svg||Et.vml?new Ps(u):null}ti.include({getRenderer:function(u){var y=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return y||(y=this._renderer=this._createRenderer()),this.hasLayer(y)||this.addLayer(y),y},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var y=this._paneRenderers[u];return y===void 0&&(y=this._createRenderer({pane:u}),this._paneRenderers[u]=y),y},_createRenderer:function(u){return this.options.preferCanvas&&No(u)||Vi(u)}});var oo=Is.extend({initialize:function(u,y){Is.prototype.initialize.call(this,this._boundsToLatLngs(u),y)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=Z(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function Io(u,y){return new oo(u,y)}Ps.create=Ba,Ps.pointsToPath=le,no.geometryToLayer=ro,no.coordsToLatLng=Ka,no.coordsToLatLngs=io,no.latLngToCoords=Vs,no.latLngsToCoords=Ta,no.getFeature=Qo,no.asFeature=so,ti.mergeOptions({boxZoom:!0});var mr=Li.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){xr(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Vr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Pn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),$r(),Ol(),this._startPoint=this._map.mouseEventToContainerPoint(u),xr(document,{contextmenu:Kr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=An("div","leaflet-zoom-box",this._container),Xn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var y=new nt(this._point,this._startPoint),P=y.getSize();bn(this._box,y.min),this._box.style.width=P.x+"px",this._box.style.height=P.y+"px"},_finish:function(){this._moved&&(Pn(this._box),kr(this._container,"leaflet-crosshair")),Gi(),Ns(),Vr(document,{contextmenu:Kr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var y=new H(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(y).fire("boxzoomend",{boxZoomBounds:y})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ti.addInitHook("addHandler","boxZoom",mr),ti.mergeOptions({doubleClickZoom:!0});var Xa=Li.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var y=this._map,P=y.getZoom(),G=y.options.zoomDelta,ue=u.originalEvent.shiftKey?P-G:P+G;y.options.doubleClickZoom==="center"?y.setZoom(ue):y.setZoomAround(u.containerPoint,ue)}});ti.addInitHook("addHandler","doubleClickZoom",Xa),ti.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ja=Li.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new ma(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}Xn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){kr(this._map._container,"leaflet-grab"),kr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var y=Z(this._map.options.maxBounds);this._offsetLimit=ae(this._map.latLngToContainerPoint(y.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(y.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var y=this._lastTime=+new Date,P=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(P),this._times.push(y),this._prunePositions(y)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),y=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=y.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,y){return u-(u-y)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),y=this._offsetLimit;u.x<y.min.x&&(u.x=this._viscousLimit(u.x,y.min.x)),u.y<y.min.y&&(u.y=this._viscousLimit(u.y,y.min.y)),u.x>y.max.x&&(u.x=this._viscousLimit(u.x,y.max.x)),u.y>y.max.y&&(u.y=this._viscousLimit(u.y,y.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,y=Math.round(u/2),P=this._initialWorldOffset,G=this._draggable._newPos.x,ue=(G-y+P)%u+y-P,Pe=(G+y+P)%u-y-P,ut=Math.abs(ue+P)<Math.abs(Pe+P)?ue:Pe;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ut},_onDragEnd:function(u){var y=this._map,P=y.options,G=!P.inertia||u.noInertia||this._times.length<2;if(y.fire("dragend",u),G)y.fire("moveend");else{this._prunePositions(+new Date);var ue=this._lastPos.subtract(this._positions[0]),Pe=(this._lastTime-this._times[0])/1e3,ut=P.easeLinearity,Nt=ue.multiplyBy(ut/Pe),Ht=Nt.distanceTo([0,0]),hn=Math.min(P.inertiaMaxSpeed,Ht),$n=Nt.multiplyBy(hn/Ht),sr=hn/(P.inertiaDeceleration*ut),jr=$n.multiplyBy(-sr/2).round();!jr.x&&!jr.y?y.fire("moveend"):(jr=y._limitOffset(jr,y.options.maxBounds),B(function(){y.panBy(jr,{duration:sr,easeLinearity:ut,noMoveStart:!0,animate:!0})}))}}});ti.addInitHook("addHandler","dragging",Ja),ti.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ba=Li.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),xr(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Vr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,y=document.documentElement,P=u.scrollTop||y.scrollTop,G=u.scrollLeft||y.scrollLeft;this._map._container.focus(),window.scrollTo(G,P)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var y=this._panKeys={},P=this.keyCodes,G,ue;for(G=0,ue=P.left.length;G<ue;G++)y[P.left[G]]=[-1*u,0];for(G=0,ue=P.right.length;G<ue;G++)y[P.right[G]]=[u,0];for(G=0,ue=P.down.length;G<ue;G++)y[P.down[G]]=[0,u];for(G=0,ue=P.up.length;G<ue;G++)y[P.up[G]]=[0,-1*u]},_setZoomDelta:function(u){var y=this._zoomKeys={},P=this.keyCodes,G,ue;for(G=0,ue=P.zoomIn.length;G<ue;G++)y[P.zoomIn[G]]=u;for(G=0,ue=P.zoomOut.length;G<ue;G++)y[P.zoomOut[G]]=-u},_addHooks:function(){xr(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Vr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var y=u.keyCode,P=this._map,G;if(y in this._panKeys){if(!P._panAnim||!P._panAnim._inProgress)if(G=this._panKeys[y],u.shiftKey&&(G=we(G).multiplyBy(3)),P.options.maxBounds&&(G=P._limitOffset(we(G),P.options.maxBounds)),P.options.worldCopyJump){var ue=P.wrapLatLng(P.unproject(P.project(P.getCenter()).add(G)));P.panTo(ue)}else P.panBy(G)}else if(y in this._zoomKeys)P.setZoom(P.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[y]);else if(y===27&&P._popup&&P._popup.options.closeOnEscapeKey)P.closePopup();else return;Kr(u)}}});ti.addInitHook("addHandler","keyboard",ba),ti.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var _o=Li.extend({addHooks:function(){xr(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Vr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var y=Mu(u),P=this._map.options.wheelDebounceTime;this._delta+=y,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var G=Math.max(P-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),G),Kr(u)},_performZoom:function(){var u=this._map,y=u.getZoom(),P=this._map.options.zoomSnap||0;u._stop();var G=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ue=4*Math.log(2/(1+Math.exp(-Math.abs(G))))/Math.LN2,Pe=P?Math.ceil(ue/P)*P:ue,ut=u._limitZoom(y+(this._delta>0?Pe:-Pe))-y;this._delta=0,this._startTime=null,ut&&(u.options.scrollWheelZoom==="center"?u.setZoom(y+ut):u.setZoomAround(this._lastMousePos,y+ut))}});ti.addInitHook("addHandler","scrollWheelZoom",_o);var ih=600;ti.mergeOptions({tapHold:Et.touchNative&&Et.safari&&Et.mobile,tapTolerance:15});var Hs=Li.extend({addHooks:function(){xr(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Vr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var y=u.touches[0];this._startPos=this._newPos=new Q(y.clientX,y.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(xr(document,"touchend",Cr),xr(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",y))},this),ih),xr(document,"touchend touchcancel contextmenu",this._cancel,this),xr(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){Vr(document,"touchend",Cr),Vr(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),Vr(document,"touchend touchcancel contextmenu",this._cancel,this),Vr(document,"touchmove",this._onMove,this)},_onMove:function(u){var y=u.touches[0];this._newPos=new Q(y.clientX,y.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,y){var P=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:y.screenX,screenY:y.screenY,clientX:y.clientX,clientY:y.clientY});P._simulated=!0,y.target.dispatchEvent(P)}});ti.addInitHook("addHandler","tapHold",Hs),ti.mergeOptions({touchZoom:Et.touch,bounceAtZoomLimits:!0});var Ws=Li.extend({addHooks:function(){Xn(this._map._container,"leaflet-touch-zoom"),xr(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){kr(this._map._container,"leaflet-touch-zoom"),Vr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var y=this._map;if(!(!u.touches||u.touches.length!==2||y._animatingZoom||this._zooming)){var P=y.mouseEventToContainerPoint(u.touches[0]),G=y.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=y.getSize()._divideBy(2),this._startLatLng=y.containerPointToLatLng(this._centerPoint),y.options.touchZoom!=="center"&&(this._pinchStartLatLng=y.containerPointToLatLng(P.add(G)._divideBy(2))),this._startDist=P.distanceTo(G),this._startZoom=y.getZoom(),this._moved=!1,this._zooming=!0,y._stop(),xr(document,"touchmove",this._onTouchMove,this),xr(document,"touchend touchcancel",this._onTouchEnd,this),Cr(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var y=this._map,P=y.mouseEventToContainerPoint(u.touches[0]),G=y.mouseEventToContainerPoint(u.touches[1]),ue=P.distanceTo(G)/this._startDist;if(this._zoom=y.getScaleZoom(ue,this._startZoom),!y.options.bounceAtZoomLimits&&(this._zoom<y.getMinZoom()&&ue<1||this._zoom>y.getMaxZoom()&&ue>1)&&(this._zoom=y._limitZoom(this._zoom)),y.options.touchZoom==="center"){if(this._center=this._startLatLng,ue===1)return}else{var Pe=P._add(G)._divideBy(2)._subtract(this._centerPoint);if(ue===1&&Pe.x===0&&Pe.y===0)return;this._center=y.unproject(y.project(this._pinchStartLatLng,this._zoom).subtract(Pe),this._zoom)}this._moved||(y._moveStart(!0,!1),this._moved=!0),N(this._animRequest);var ut=o(y._move,y,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=B(ut,this,!0),Cr(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,N(this._animRequest),Vr(document,"touchmove",this._onTouchMove,this),Vr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ti.addInitHook("addHandler","touchZoom",Ws),ti.BoxZoom=mr,ti.DoubleClickZoom=Xa,ti.Drag=Ja,ti.Keyboard=ba,ti.ScrollWheelZoom=_o,ti.TapHold=Hs,ti.TouchZoom=Ws,n.Bounds=nt,n.Browser=Et,n.CRS=de,n.Canvas=ea,n.Circle=to,n.CircleMarker=Oo,n.Class=z,n.Control=dr,n.DivIcon=Na,n.DivOverlay=bo,n.DomEvent=lu,n.DomUtil=yr,n.Draggable=ma,n.Evented=re,n.FeatureGroup=mo,n.GeoJSON=no,n.GridLayer=ni,n.Handler=Li,n.Icon=ka,n.ImageOverlay=Rn,n.LatLng=me,n.LatLngBounds=H,n.Layer=Hr,n.LayerGroup=eo,n.LineUtil=Ur,n.Map=ti,n.Marker=Es,n.Mixin=kc,n.Path=Jo,n.Point=Q,n.PolyUtil=Rl,n.Polygon=Is,n.Polyline=yo,n.Popup=Qi,n.PosAnimation=ku,n.Projection=Ci,n.Rectangle=oo,n.Renderer=Ui,n.SVG=Ps,n.SVGOverlay=Ei,n.TileLayer=Us,n.Tooltip=Za,n.Transformation=Te,n.Util=j,n.VideoOverlay=Sr,n.bind=o,n.bounds=ae,n.canvas=No,n.circle=vo,n.circleMarker=jl,n.control=vs,n.divIcon=Ia,n.extend=i,n.featureGroup=Tu,n.geoJSON=qt,n.geoJson=It,n.gridLayer=ya,n.icon=Qu,n.imageOverlay=tr,n.latLng=pe,n.latLngBounds=Z,n.layerGroup=Fl,n.map=ms,n.marker=Aa,n.point=we,n.polygon=qa,n.polyline=Ac,n.popup=Da,n.rectangle=Io,n.setOptions=E,n.stamp=l,n.svg=Vi,n.svgOverlay=fu,n.tileLayer=Pi,n.tooltip=Oa,n.transformation=Je,n.version=r,n.videoOverlay=Ji;var _a=window.L;n.noConflict=function(){return window.L=_a,this},window.L=n})})(mb,mb.exports);var $t=mb.exports;const Yn=j_($t);var t5={exports:{}};(function(t,e){(function(n,r){r(e)})(Ca,function(n){var r=typeof window<"u"?window:typeof Ca<"u"?Ca:typeof self<"u"?self:{};function i(c,d){return c(d={exports:{}},d.exports),d.exports}var s=i(function(c,d){(function(p){const v={escape:function(U){return U.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:m,mimeType:function(U){return U=m(U).toLowerCase(),function(){var $="application/font-woff",re="image/jpeg";return{woff:$,woff2:$,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:re,jpeg:re,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[U]||""},dataAsUrl:function(U,$){return`data:${$};base64,`+U},isDataUrl:function(U){return U.search(/^(data:)/)!==-1},canvasToBlob:function(U){return U.toBlob?new Promise(function(re){U.toBlob(re)}):($=U,new Promise(function(re){const Q=fe($.toDataURL().split(",")[1]);var _e=Q.length;const we=new Uint8Array(_e);for(let nt=0;nt<_e;nt++)we[nt]=Q.charCodeAt(nt);re(new Blob([we],{type:"image/png"}))}));var $},resolveUrl:function(U,$){const re=document.implementation.createHTMLDocument(),Q=re.createElement("base"),_e=(re.head.appendChild(Q),re.createElement("a"));return re.body.appendChild(_e),Q.href=$,_e.href=U,_e.href},getAndEncode:function(U){let $=te.impl.urlCache.find(function(re){return re.url===U});return $||($={url:U,promise:null},te.impl.urlCache.push($)),$.promise===null&&(te.impl.options.cacheBust&&(U+=(/\?/.test(U)?"&":"?")+new Date().getTime()),$.promise=new Promise(function(re){const Q=te.impl.options.httpTimeout,_e=new XMLHttpRequest;let we;var nt;function ae(H){console.error(H),re("")}_e.onreadystatechange=function(){if(_e.readyState===4)if(_e.status!==200)we?re(we):ae(`cannot fetch resource: ${U}, status: `+_e.status);else{const H=new FileReader;H.onloadend=function(){var Z=H.result.split(/,/)[1];re(Z)},H.readAsDataURL(_e.response)}},_e.ontimeout=function(){we?re(we):ae(`timeout of ${Q}ms occured while fetching resource: `+U)},_e.responseType="blob",_e.timeout=Q,te.impl.options.useCredentials&&(_e.withCredentials=!0),_e.open("GET",U,!0),_e.send(),te.impl.options.imagePlaceholder&&(nt=te.impl.options.imagePlaceholder.split(/,/))&&nt[1]&&(we=nt[1])})),$.promise},uid:function(){let U=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+U++}}(),delay:function(U){return function($){return new Promise(function(re){setTimeout(function(){re($)},U)})}},asArray:function(U){const $=[],re=U.length;for(let Q=0;Q<re;Q++)$.push(U[Q]);return $},escapeXhtml:function(U){return U.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(U){return U!=="data:,"?new Promise(function($,re){const Q=new Image;te.impl.options.useCredentials&&(Q.crossOrigin="use-credentials"),Q.onload=function(){$(Q)},Q.onerror=re,Q.src=U}):Promise.resolve()},width:function(U){var $=x(U,"border-left-width"),re=x(U,"border-right-width");return U.scrollWidth+$+re},height:function(U){var $=x(U,"border-top-width"),re=x(U,"border-bottom-width");return U.scrollHeight+$+re}};function m(U){return(U=/\.([^\.\/]*?)(\?|$)/g.exec(U))?U[1]:""}function x(U,$){const re=ge(U).getPropertyValue($);return parseFloat(re.replace("px",""))}const E=function(){const U=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(_e,we,nt){return $(_e)?Promise.resolve(_e).then(re).then(function(ae){let H=Promise.resolve(_e);return ae.forEach(function(Z){H=H.then(function(me){return Q(me,Z,we,nt)})}),H}):Promise.resolve(_e)},shouldProcess:$,impl:{readUrls:re,inline:Q}};function $(_e){return _e.search(U)!==-1}function re(_e){const we=[];for(var nt;(nt=U.exec(_e))!==null;)we.push(nt[1]);return we.filter(function(ae){return!v.isDataUrl(ae)})}function Q(_e,we,nt,ae){return Promise.resolve(we).then(function(H){return nt?v.resolveUrl(H,nt):H}).then(ae||v.getAndEncode).then(function(H){return v.dataAsUrl(H,v.mimeType(we))}).then(function(H){return _e.replace((Z=we,new RegExp(`(url\\(['"]?)(${v.escape(Z)})(['"]?\\))`,"g")),`$1${H}$3`);var Z})}}(),k={resolveAll:function(){return A().then(function(U){return Promise.all(U.map(function($){return $.resolve()}))}).then(function(U){return U.join(`
`)})},impl:{readAll:A}};function A(){return Promise.resolve(v.asArray(document.styleSheets)).then(function($){const re=[];return $.forEach(function(Q){if(Object.getPrototypeOf(Q).hasOwnProperty("cssRules"))try{v.asArray(Q.cssRules||[]).forEach(re.push.bind(re))}catch(_e){console.log("Error while reading CSS rules from "+Q.href,_e.toString())}}),re}).then(function($){return $.filter(function(re){return re.type===CSSRule.FONT_FACE_RULE}).filter(function(re){return E.shouldProcess(re.style.getPropertyValue("src"))})}).then(function($){return $.map(U)});function U($){return{resolve:function(){var re=($.parentStyleSheet||{}).href;return E.inlineAll($.cssText,re)},src:function(){return $.style.getPropertyValue("src")}}}}const D={inlineAll:function U($){return $ instanceof Element?function(re){const Q=re.style.getPropertyValue("background");return Q?E.inlineAll(Q).then(function(_e){re.style.setProperty("background",_e,Q)}).then(function(){return re}):Promise.resolve(re)}($).then(function(){return $ instanceof HTMLImageElement?V($).inline():Promise.all(v.asArray($.childNodes).map(function(re){return U(re)}))}):Promise.resolve($)},impl:{newImage:V}};function V(U){return{inline:function($){return v.isDataUrl(U.src)?Promise.resolve():Promise.resolve(U.src).then($||v.getAndEncode).then(function(re){return v.dataAsUrl(re,v.mimeType(U.src))}).then(function(re){return new Promise(function(Q){U.onload=Q,U.onerror=Q,U.src=re})})}}}const Y={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},te={toSvg:I,toPng:function(U,$){return($=$||{}).raster=!0,F(U,$).then(function(re){return re.toDataURL()})},toJpeg:function(U,$){return($=$||{}).raster=!0,F(U,$).then(function(re){return re.toDataURL("image/jpeg",$.quality||1)})},toBlob:function(U,$){return($=$||{}).raster=!0,F(U,$).then(v.canvasToBlob)},toPixelData:function(U,$){return($=$||{}).raster=!0,F(U,$).then(function(re){return re.getContext("2d").getImageData(0,0,v.width(U),v.height(U)).data})},toCanvas:function(U,$){return($=$||{}).raster=!0,F(U,$||{})},impl:{fontFaces:k,images:D,util:v,inliner:E,urlCache:[],options:{}}},ge=(c.exports=te,p.getComputedStyle||window.getComputedStyle),fe=p.atob||window.atob;function I(U,$){var re=$=$||{};return re.imagePlaceholder===void 0?te.impl.options.imagePlaceholder=Y.imagePlaceholder:te.impl.options.imagePlaceholder=re.imagePlaceholder,re.cacheBust===void 0?te.impl.options.cacheBust=Y.cacheBust:te.impl.options.cacheBust=re.cacheBust,re.useCredentials===void 0?te.impl.options.useCredentials=Y.useCredentials:te.impl.options.useCredentials=re.useCredentials,Promise.resolve(U).then(function(Q){return function _e(we,nt,ae,H,Z=null){return ae||!nt||nt(we)?Promise.resolve(we).then(function(me){return me instanceof HTMLCanvasElement?v.makeImage(me.toDataURL()):me.nodeName==="IFRAME"?html2canvas(me.contentDocument.body).then(pe=>pe.toDataURL()).then(v.makeImage):me.cloneNode(!1)}).then(function(me){return function(pe,de){const X=pe.childNodes;return X.length===0?Promise.resolve(de):function(J,De){const Te=ge(pe);let Je=Promise.resolve();return De.forEach(function(he){Je=Je.then(function(){return _e(he,nt,!1,H,Te)}).then(function(ee){ee&&J.appendChild(ee)})}),Je}(de,v.asArray(X)).then(function(){return de})}(we,me)}).then(function(me){return function(pe,de,X){return de instanceof Element?Promise.resolve().then(function(){(function(J,De){const Te=ge(J);Te.cssText?(De.style.cssText=Te.cssText,function(Je,he){he.font=Je.font,he.fontFamily=Je.fontFamily,he.fontFeatureSettings=Je.fontFeatureSettings,he.fontKerning=Je.fontKerning,he.fontSize=Je.fontSize,he.fontStretch=Je.fontStretch,he.fontStyle=Je.fontStyle,he.fontVariant=Je.fontVariant,he.fontVariantCaps=Je.fontVariantCaps,he.fontVariantEastAsian=Je.fontVariantEastAsian,he.fontVariantLigatures=Je.fontVariantLigatures,he.fontVariantNumeric=Je.fontVariantNumeric,he.fontVariationSettings=Je.fontVariationSettings,he.fontWeight=Je.fontWeight}(Te,De.style)):(X?function(Je,he,ee,se){const le=ee.style,ze=Je.style;for(var Se of he){var ve=he.getPropertyValue(Se),$e=ze.getPropertyValue(Se),Ge=(ze.setProperty(Se,se?"initial":"unset"),he.getPropertyValue(Se));Ge!==ve?le.setProperty(Se,ve):le.removeProperty(Se),ze.setProperty(Se,$e)}}(J,Te,De,ae):function(Je,he,ee){const se=function(ze){if(z[ze])return z[ze];j||((j=document.createElement("iframe")).style.visibility="hidden",j.style.position="fixed",document.body.appendChild(j),j.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const Se=document.createElement(ze),ve=(j.contentWindow.document.body.appendChild(Se),Se.textContent=".",j.contentWindow.getComputedStyle(Se)),$e={};return v.asArray(ve).forEach(function(Ge){$e[Ge]=Ge==="width"||Ge==="height"?"auto":ve.getPropertyValue(Ge)}),j.contentWindow.document.body.removeChild(Se),z[ze]=$e}(ee.tagName),le=ee.style;v.asArray(Je).forEach(function(ze){var Se=Je.getPropertyValue(ze);(Se!==se[ze]||he&&Se!==he.getPropertyValue(ze))&&le.setProperty(ze,Se,Je.getPropertyPriority(ze))})}(Te,Z,De),ae&&(["inset-block","inset-block-start","inset-block-end"].forEach(Je=>De.style.removeProperty(Je)),["left","right","top","bottom"].forEach(Je=>{De.style.getPropertyValue(Je)&&De.style.setProperty(Je,"0px")})))})(pe,de)}).then(function(){[":before",":after"].forEach(function(J){(function(De){const Te=ge(pe,De),Je=Te.getPropertyValue("content");if(Je!==""&&Je!=="none"){const he=v.uid(),ee=de.getAttribute("class"),se=(ee&&de.setAttribute("class",ee+" "+he),document.createElement("style"));se.appendChild(function(){const le=`.${he}:`+De,ze=(Te.cssText?function(){return`${Te.cssText} content: ${Te.getPropertyValue("content")};`}:function(){return v.asArray(Te).map(function(Se){return Se+": "+Te.getPropertyValue(Se)+(Te.getPropertyPriority(Se)?" !important":"")}).join("; ")+";"})();return document.createTextNode(le+`{${ze}}`)}()),de.appendChild(se)}})(J)})}).then(function(){pe instanceof HTMLTextAreaElement&&(de.innerHTML=pe.value),pe instanceof HTMLInputElement&&de.setAttribute("value",pe.value)}).then(function(){de instanceof SVGElement&&(de.setAttribute("xmlns","http://www.w3.org/2000/svg"),de instanceof SVGRectElement&&["width","height"].forEach(function(J){const De=de.getAttribute(J);De&&de.style.setProperty(J,De)}))}).then(function(){return de}):de}(we,me,H)}):Promise.resolve()}(Q,$.filter,!0,!$.raster)}).then(K).then(B).then(function(Q){$.bgcolor&&(Q.style.backgroundColor=$.bgcolor),$.width&&(Q.style.width=$.width+"px"),$.height&&(Q.style.height=$.height+"px"),$.style&&Object.keys($.style).forEach(function(we){Q.style[we]=$.style[we]});let _e=null;return typeof $.onclone=="function"&&(_e=$.onclone(Q)),Promise.resolve(_e).then(function(){return Q})}).then(function(Q){return Q=Q,_e=$.width||v.width(U),we=$.height||v.height(U),Promise.resolve(Q).then(function(nt){return nt.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(nt)}).then(v.escapeXhtml).then(function(nt){return`<foreignObject x="0" y="0" width="100%" height="100%">${nt}</foreignObject>`}).then(function(nt){return`<svg xmlns="http://www.w3.org/2000/svg" width="${_e}" height="${we}">${nt}</svg>`}).then(function(nt){return"data:image/svg+xml;charset=utf-8,"+nt});var _e,we}).then(function(Q){return te.impl.urlCache=[],Q})}function F(U,$){return I(U,$).then(v.makeImage).then(v.delay(0)).then(function(re){var Q=typeof $.scale!="number"?1:$.scale;const _e=function(nt,ae){const H=document.createElement("canvas");if(H.width=($.width||v.width(nt))*ae,H.height=($.height||v.height(nt))*ae,$.bgcolor){const Z=H.getContext("2d");Z.fillStyle=$.bgcolor,Z.fillRect(0,0,H.width,H.height)}return H}(U,Q),we=_e.getContext("2d");return we.mozImageSmoothingEnabled=!1,we.msImageSmoothingEnabled=!1,we.imageSmoothingEnabled=!1,re&&(we.scale(Q,Q),we.drawImage(re,0,0)),j&&(document.body.removeChild(j),j=null,N&&clearTimeout(N),N=setTimeout(()=>{N=null,z={}},2e4)),_e})}function K(U){return k.resolveAll().then(function($){const re=document.createElement("style");return U.appendChild(re),re.appendChild(document.createTextNode($)),U})}function B(U){return D.inlineAll(U).then(function(){return U})}let N=null,j=null,z={}})(r)}),o=i(function(c,d){(function(){function p(k,A,D){var V=new XMLHttpRequest;V.open("GET",k),V.responseType="blob",V.onload=function(){E(V.response,A,D)},V.onerror=function(){console.error("could not download file")},V.send()}function v(k){var A=new XMLHttpRequest;A.open("HEAD",k,!1);try{A.send()}catch{}return 200<=A.status&&299>=A.status}function m(k){try{k.dispatchEvent(new MouseEvent("click"))}catch{var A=document.createEvent("MouseEvents");A.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),k.dispatchEvent(A)}}var x=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,E=x.saveAs||(typeof window!="object"||window!==x?function(){}:"download"in HTMLAnchorElement.prototype?function(k,A,D){var V=x.URL||x.webkitURL,Y=document.createElement("a");A=A||k.name||"download",Y.download=A,Y.rel="noopener",typeof k=="string"?(Y.href=k,Y.origin===location.origin?m(Y):v(Y.href)?p(k,A,D):m(Y,Y.target="_blank")):(Y.href=V.createObjectURL(k),setTimeout(function(){V.revokeObjectURL(Y.href)},4e4),setTimeout(function(){m(Y)},0))}:"msSaveOrOpenBlob"in navigator?function(k,A,D){if(A=A||k.name||"download",typeof k!="string")navigator.msSaveOrOpenBlob(function(Y,te){return te===void 0?te={autoBom:!1}:typeof te!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),te={autoBom:!te}),te.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Y.type)?new Blob(["\uFEFF",Y],{type:Y.type}):Y}(k,D),A);else if(v(k))p(k,A,D);else{var V=document.createElement("a");V.href=k,V.target="_blank",setTimeout(function(){m(V)})}}:function(k,A,D,V){if((V=V||open("","_blank"))&&(V.document.title=V.document.body.innerText="downloading..."),typeof k=="string")return p(k,A,D);var Y=k.type==="application/octet-stream",te=/constructor/i.test(x.HTMLElement)||x.safari,ge=/CriOS\/[\d]+/.test(navigator.userAgent);if((ge||Y&&te)&&typeof FileReader=="object"){var fe=new FileReader;fe.onloadend=function(){var K=fe.result;K=ge?K:K.replace(/^data:[^;]*;/,"data:attachment/file;"),V?V.location.href=K:location=K,V=null},fe.readAsDataURL(k)}else{var I=x.URL||x.webkitURL,F=I.createObjectURL(k);V?V.location=F:location.href=F,V=null,setTimeout(function(){I.revokeObjectURL(F)},4e4)}});x.saveAs=E.saveAs=E,c.exports=E})()}),a=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(c){var d=c.node,p=c.error;return console.warn("Map node is very big "+d.scrollWidth+"x"+d.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(p)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var c=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v={};for(var m in this.options)p.hasOwnProperty(m)?v[m]=p[m]:v[m]=this.options[m];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return c._getPixelData(v)}).then(function(x){return c._setElementsVisible(!0),c._toCanvas(x,v)}).then(function(x){return d==="image"?c._canvasToImage(x,v):d==="canvas"?x:c._canvasToBlob(x,v)}).then(function(x){return c._screenState.status=1,c._map.fire("simpleMapScreenshoter.done"),x}).catch(function(x){return c._setElementsVisible(!0),c._screenState.status=1,c._map.fire("simpleMapScreenshoter.error",{e:x}),Promise.reject(x)}),this._screenState.promise)},_setElementsVisible:function(){var c=this,d=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(p){var v=c._map._container.querySelectorAll(p),m=!0,x=!1,E=void 0;try{for(var k,A=v[Symbol.iterator]();!(m=(k=A.next()).done);m=!0)k.value.style.opacity=d===!1?0:1}catch(D){x=!0,E=D}finally{try{!m&&A.return&&A.return()}finally{if(x)throw E}}})},_canvasToImage:function(c,d){var p=d.mimeType,v=c.toDataURL(p);return v.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(v)},_canvasToBlob:function(c,d){var p=d.mimeType;return new Promise(function(v,m){c.toBlob(function(x){v(x)},p)})},_toCanvas:function(c,d){var p=d.captionOffset,v=d.caption,m=d.captionFontSize,x=d.captionFont,E=d.captionColor,k=d.captionBgColor,A=this._node,D=A.screenHeight,V=A.screenWidth,Y=document.createElement("canvas");Y.width=V,Y.height=D;for(var te=Y.getContext("2d"),ge=te.createImageData(V,D),fe=0;fe<c.length;++fe)ge.data[fe]=c[fe];te.putImageData(ge,0,0),ge=null;var I=document.createElement("canvas"),F=I.getContext("2d"),K=0,B=0,N=D,j=V;if(this.options.cropImageByInnerWH===!0){for(var z=[],U=0,$=0;$<D;++$){U=0;for(var re=0;re<V;++re)c[4*$*V+4*re+4]===0&&U++;U===V&&z.push($)}var Q=this._getMinAndMaxOnValuesBreak(z);K=Q.min;for(var _e=V,we=Q.max,nt=[],ae=0,H=B;H<_e;++H){ae=0;for(var Z=0;Z<D;++Z)c[4*Z*V+4*H+4]===0&&ae++;ae===D&&nt.push(H)}var me=this._getMinAndMaxOnValuesBreak(nt);B=me.min,_e=me.max,(B===0&&_e===0||_e===null)&&(_e=V),(K===0&&we===0||we===null)&&(we=D),this.options.debugMode===!0&&(console.log("emptyYLine",z),console.log("minMaxY",Q),console.log("emptyXLine",nt),console.log("minMaxX",me),console.log("debugX",{}),console.log("debugY",{})),K===0&&we===D&&B===0&&_e===V||(K+=this.options.onCropBorderSize,we-=this.options.onCropBorderSize,B+=this.options.onCropBorderSize,_e-=this.options.onCropBorderSize),N=we-K,j=_e-B,I.width=j,I.height=N}else I.width=j,I.height=N;var pe=null;return v&&(pe=typeof v=="function"?v.call(this):v),pe!==null&&(I.height=I.height+(p+m+p),F.beginPath(),F.rect(0,0,I.width,I.height),F.fillStyle=k,F.fill(),F.save()),F.drawImage(Y,B,K,j,N,0,0,j,N),pe!==null&&(F.font=m+"px "+x,F.fillStyle=E,F.fillText(pe,p,N+p+m)),Promise.resolve(I)},_getMinAndMaxOnValuesBreak:function(c){for(var d=0,p=0,v=!1,m=1;m<c.length;m++){if(c[m]-1!==c[m-1]){p=c[m],v=!0;break}d=c[m]}return v===!1&&c[0]>1?(d=0,p=c[0]):v===!1&&(d=c[c.length-1]||0,p=null),{min:d,max:p}},_getPixelData:function(c){var d=this,p=c.domtoimageOptions,v=p===void 0?{}:p;return this._getPixelDataOfNormalMap(v).catch(function(m){return console.warn("May be map size very big on that zoom level, we have error:",m.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),d._getPixelDataOfBigMap(v)})},_getPixelDataOfNormalMap:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=this._map.getContainer();return this._node={node:d,screenHeight:d.scrollHeight,screenWidth:d.scrollWidth},s.toPixelData(d,c)},_getPixelDataOfBigMap:function(){var c=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=this._map.getContainer(),v=this._map.getPane("mapPane");v.style.width=2*p.clientWidth+"px",v.style.height=2*p.clientHeight+"px",v.style.overflow="hidden";var m=function(){v.style.width="initial",v.style.height="initial",v.style.overflow="initial"};return this._node={node:p,screenHeight:p.scrollHeight,screenWidth:p.scrollWidth},s.toPixelData(p,d).then(function(x){return m(),x}).catch(function(x){return m(),p.scrollHeight>=4e3||p.scrollWidth>=4e3?c.options.onPixelDataFail({plugin:c,node:p,mapPane:v,error:x,domtoimageOptions:d}):Promise.reject(x)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var c=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,d=document.head||document.getElementsByTagName("head")[0],p=document.createElement("style");p.appendChild(document.createTextNode(c)),d.appendChild(p)},_onScreenBtn:function(){var c=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(d){var p=typeof c.options.screenName=="function"?c.options.screenName.call(c):c.options.screenName;o.saveAs(d,p+".png")}).catch(function(d){c._map.fire("simpleMapScreenshoter.error",{e:d})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var c=this;return new Promise(function(d){var p=setInterval(function(){c._interaction||(d(),clearInterval(p))},100)})}}),l=(L.Control.SimpleMapScreenshoter=a,L.simpleMapScreenshoter=function(c){return new L.Control.SimpleMapScreenshoter(c)},a);n.default=l,n.SimpleMapScreenshoter=a,Object.defineProperty(n,"__esModule",{value:!0})})})(t5,t5.exports);var El=63710088e-1,CE={centimeters:El*100,centimetres:El*100,degrees:360/(2*Math.PI),feet:El*3.28084,inches:El*39.37,kilometers:El/1e3,kilometres:El/1e3,meters:El,metres:El,miles:El/1609.344,millimeters:El*1e3,millimetres:El*1e3,nauticalmiles:El/1852,radians:1,yards:El*1.0936};function Ap(t,e,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function Vv(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n5(t[0])||!n5(t[1]))throw new Error("coordinates must contain numbers");return Ap({type:"Point",coordinates:t},e,n)}function Hu(t,e,n={}){for(const i of t){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return Ap({type:"Polygon",coordinates:t},e,n)}function Wu(t,e,n={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return Ap({type:"LineString",coordinates:t},e,n)}function Bj(t,e={}){const n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function Rj(t,e,n={}){return Ap({type:"MultiPolygon",coordinates:t},e,n)}function Fj(t,e="kilometers"){const n=CE[e];if(!n)throw new Error(e+" units is invalid");return t*n}function jj(t,e="kilometers"){const n=CE[e];if(!n)throw new Error(e+" units is invalid");return t/n}function vb(t){return t%(2*Math.PI)*180/Math.PI}function yc(t){return t%360*Math.PI/180}function n5(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function r5(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function zj(t){return t.type==="Feature"?t.geometry:t}function EE(t,e,n={}){if(n.final===!0)return $j(t,e);const r=r5(t),i=r5(e),s=yc(r[0]),o=yc(i[0]),a=yc(r[1]),l=yc(i[1]),c=Math.sin(o-s)*Math.cos(l),d=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(o-s);return vb(Math.atan2(c,d))}function $j(t,e){let n=EE(e,t);return n=(n+180)%360,n}function Vj(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function z_(t,e,n,r={}){const i=Vj(t),s=yc(i[0]),o=yc(i[1]),a=yc(n),l=jj(e,r.units),c=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(a)),d=s+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(c)),p=vb(d),v=vb(c);return Vv([p,v],r.properties)}var i5=z_;function s5(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function $_(t,e,n={}){var r=s5(t),i=s5(e),s=yc(i[1]-r[1]),o=yc(i[0]-r[0]),a=yc(r[1]),l=yc(i[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return Fj(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}var X1=$_;function Uj(t,e,n={}){const i=zj(t).coordinates;let s=0;for(let o=0;o<i.length&&!(e>=s&&o===i.length-1);o++)if(s>=e){const a=e-s;if(a){const l=EE(i[o],i[o-1])-180;return z_(i[o],a,l,n)}else return Vv(i[o])}else s+=$_(i[o],i[o+1],n);return Vv(i[i.length-1])}var yb=Uj;function Hj(t,e){var n,r,i,s,o,a,l,c,d,p,v=0,m=t.type==="FeatureCollection",x=t.type==="Feature",E=m?t.features.length:1;for(n=0;n<E;n++){for(a=m?t.features[n].geometry:x?t.geometry:t,c=m?t.features[n].properties:x?t.properties:{},d=m?t.features[n].bbox:x?t.bbox:void 0,p=m?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,d,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,d,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,d,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function Wj(t,e,n){var r=n;return Hj(t,function(i,s,o,a,l){s===0&&n===void 0?r=i:r=e(r,i,s,o,a,l)}),r}function PE(t){return Wj(t,(e,n)=>e+Gj(n),0)}function Gj(t){let e=0,n;switch(t.type){case"Polygon":return o5(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=o5(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function o5(t){let e=0;if(t&&t.length>0){e+=Math.abs(a5(t[0]));for(let n=1;n<t.length;n++)e-=Math.abs(a5(t[n]))}return e}var qj=El*El/2,J1=Math.PI/180;function a5(t){const e=t.length-1;if(e<=2)return 0;let n=0,r=0;for(;r<e;){const i=t[r],s=t[r+1===e?0:r+1],o=t[r+2>=e?(r+2)%e:r+2],a=i[0]*J1,l=s[1]*J1,c=o[0]*J1;n+=(c-a)*Math.sin(l),r++}return n*qj}var Rc=PE;function ME(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,d=0,p=0,v,m=t.type,x=m==="FeatureCollection",E=m==="Feature",k=x?t.features.length:1,A=0;A<k;A++){c=x?t.features[A].geometry:E?t.geometry:t,v=c?c.type==="GeometryCollection":!1,a=v?c.geometries.length:1;for(var D=0;D<a;D++){var V=0,Y=0;if(o=v?c.geometries[D]:c,o!==null){l=o.coordinates;var te=o.type;switch(d=te==="Polygon"||te==="MultiPolygon"?1:0,te){case null:break;case"Point":if(e(l,p,A,V,Y)===!1)return!1;p++,V++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,A,V,Y)===!1)return!1;p++,te==="MultiPoint"&&V++}te==="LineString"&&V++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-d;i++){if(e(l[r][i],p,A,V,Y)===!1)return!1;p++}te==="MultiLineString"&&V++,te==="Polygon"&&Y++}te==="Polygon"&&V++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(Y=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-d;s++){if(e(l[r][i][s],p,A,V,Y)===!1)return!1;p++}Y++}V++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(ME(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Yj(t,e={}){let n=0,r=0,i=0;return ME(t,function(s){n+=s[0],r+=s[1],i++}),Vv([n/i,r/i],e.properties)}var Wg=Yj;function Kj(t,e,n={}){const r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&t.type==="Feature"&&t.properties?t.properties:{},s=[];for(let o=0;o<r;o++)s.push(z_(t,e,o*-360/r,n).geometry.coordinates);return s.push(s[0]),Hu([s],i)}var Zj=Kj,Xj=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Q1=Math.ceil,Vu=Math.floor,Kl="[BigNumber Error] ",l5=Kl+"Number primitive has more than 15 significant digits: ",uc=1e14,si=14,u5=9007199254740991,e2=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Xh=1e7,yu=1e9;function kE(t){var e,n,r,i=D.prototype={constructor:D,toString:null,valueOf:null},s=new D(1),o=20,a=4,l=-7,c=21,d=-1e7,p=1e7,v=!1,m=1,x=0,E={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},k="0123456789abcdefghijklmnopqrstuvwxyz",A=!0;function D(I,F){var K,B,N,j,z,U,$,re,Q=this;if(!(Q instanceof D))return new D(I,F);if(F==null){if(I&&I._isBigNumber===!0){Q.s=I.s,!I.c||I.e>p?Q.c=Q.e=null:I.e<d?Q.c=[Q.e=0]:(Q.e=I.e,Q.c=I.c.slice());return}if((U=typeof I=="number")&&I*0==0){if(Q.s=1/I<0?(I=-I,-1):1,I===~~I){for(j=0,z=I;z>=10;z/=10,j++);j>p?Q.c=Q.e=null:(Q.e=j,Q.c=[I]);return}re=String(I)}else{if(!Xj.test(re=String(I)))return r(Q,re,U);Q.s=re.charCodeAt(0)==45?(re=re.slice(1),-1):1}(j=re.indexOf("."))>-1&&(re=re.replace(".","")),(z=re.search(/e/i))>0?(j<0&&(j=z),j+=+re.slice(z+1),re=re.substring(0,z)):j<0&&(j=re.length)}else{if(co(F,2,k.length,"Base"),F==10&&A)return Q=new D(I),ge(Q,o+Q.e+1,a);if(re=String(I),U=typeof I=="number"){if(I*0!=0)return r(Q,re,U,F);if(Q.s=1/I<0?(re=re.slice(1),-1):1,D.DEBUG&&re.replace(/^0\.0*|\./,"").length>15)throw Error(l5+I)}else Q.s=re.charCodeAt(0)===45?(re=re.slice(1),-1):1;for(K=k.slice(0,F),j=z=0,$=re.length;z<$;z++)if(K.indexOf(B=re.charAt(z))<0){if(B=="."){if(z>j){j=$;continue}}else if(!N&&(re==re.toUpperCase()&&(re=re.toLowerCase())||re==re.toLowerCase()&&(re=re.toUpperCase()))){N=!0,z=-1,j=0;continue}return r(Q,String(I),U,F)}U=!1,re=n(re,F,10,Q.s),(j=re.indexOf("."))>-1?re=re.replace(".",""):j=re.length}for(z=0;re.charCodeAt(z)===48;z++);for($=re.length;re.charCodeAt(--$)===48;);if(re=re.slice(z,++$)){if($-=z,U&&D.DEBUG&&$>15&&(I>u5||I!==Vu(I)))throw Error(l5+Q.s*I);if((j=j-z-1)>p)Q.c=Q.e=null;else if(j<d)Q.c=[Q.e=0];else{if(Q.e=j,Q.c=[],z=(j+1)%si,j<0&&(z+=si),z<$){for(z&&Q.c.push(+re.slice(0,z)),$-=si;z<$;)Q.c.push(+re.slice(z,z+=si));z=si-(re=re.slice(z)).length}else z-=$;for(;z--;re+="0");Q.c.push(+re)}}else Q.c=[Q.e=0]}D.clone=kE,D.ROUND_UP=0,D.ROUND_DOWN=1,D.ROUND_CEIL=2,D.ROUND_FLOOR=3,D.ROUND_HALF_UP=4,D.ROUND_HALF_DOWN=5,D.ROUND_HALF_EVEN=6,D.ROUND_HALF_CEIL=7,D.ROUND_HALF_FLOOR=8,D.EUCLID=9,D.config=D.set=function(I){var F,K;if(I!=null)if(typeof I=="object"){if(I.hasOwnProperty(F="DECIMAL_PLACES")&&(K=I[F],co(K,0,yu,F),o=K),I.hasOwnProperty(F="ROUNDING_MODE")&&(K=I[F],co(K,0,8,F),a=K),I.hasOwnProperty(F="EXPONENTIAL_AT")&&(K=I[F],K&&K.pop?(co(K[0],-1e9,0,F),co(K[1],0,yu,F),l=K[0],c=K[1]):(co(K,-1e9,yu,F),l=-(c=K<0?-K:K))),I.hasOwnProperty(F="RANGE"))if(K=I[F],K&&K.pop)co(K[0],-1e9,-1,F),co(K[1],1,yu,F),d=K[0],p=K[1];else if(co(K,-1e9,yu,F),K)d=-(p=K<0?-K:K);else throw Error(Kl+F+" cannot be zero: "+K);if(I.hasOwnProperty(F="CRYPTO"))if(K=I[F],K===!!K)if(K)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))v=K;else throw v=!K,Error(Kl+"crypto unavailable");else v=K;else throw Error(Kl+F+" not true or false: "+K);if(I.hasOwnProperty(F="MODULO_MODE")&&(K=I[F],co(K,0,9,F),m=K),I.hasOwnProperty(F="POW_PRECISION")&&(K=I[F],co(K,0,yu,F),x=K),I.hasOwnProperty(F="FORMAT"))if(K=I[F],typeof K=="object")E=K;else throw Error(Kl+F+" not an object: "+K);if(I.hasOwnProperty(F="ALPHABET"))if(K=I[F],typeof K=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(K))A=K.slice(0,10)=="0123456789",k=K;else throw Error(Kl+F+" invalid: "+K)}else throw Error(Kl+"Object expected: "+I);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[l,c],RANGE:[d,p],CRYPTO:v,MODULO_MODE:m,POW_PRECISION:x,FORMAT:E,ALPHABET:k}},D.isBigNumber=function(I){if(!I||I._isBigNumber!==!0)return!1;if(!D.DEBUG)return!0;var F,K,B=I.c,N=I.e,j=I.s;e:if({}.toString.call(B)=="[object Array]"){if((j===1||j===-1)&&N>=-1e9&&N<=yu&&N===Vu(N)){if(B[0]===0){if(N===0&&B.length===1)return!0;break e}if(F=(N+1)%si,F<1&&(F+=si),String(B[0]).length==F){for(F=0;F<B.length;F++)if(K=B[F],K<0||K>=uc||K!==Vu(K))break e;if(K!==0)return!0}}}else if(B===null&&N===null&&(j===null||j===1||j===-1))return!0;throw Error(Kl+"Invalid BigNumber: "+I)},D.maximum=D.max=function(){return Y(arguments,-1)},D.minimum=D.min=function(){return Y(arguments,1)},D.random=function(){var I=9007199254740992,F=Math.random()*I&2097151?function(){return Vu(Math.random()*I)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(K){var B,N,j,z,U,$=0,re=[],Q=new D(s);if(K==null?K=o:co(K,0,yu),z=Q1(K/si),v)if(crypto.getRandomValues){for(B=crypto.getRandomValues(new Uint32Array(z*=2));$<z;)U=B[$]*131072+(B[$+1]>>>11),U>=9e15?(N=crypto.getRandomValues(new Uint32Array(2)),B[$]=N[0],B[$+1]=N[1]):(re.push(U%1e14),$+=2);$=z/2}else if(crypto.randomBytes){for(B=crypto.randomBytes(z*=7);$<z;)U=(B[$]&31)*281474976710656+B[$+1]*1099511627776+B[$+2]*4294967296+B[$+3]*16777216+(B[$+4]<<16)+(B[$+5]<<8)+B[$+6],U>=9e15?crypto.randomBytes(7).copy(B,$):(re.push(U%1e14),$+=7);$=z/7}else throw v=!1,Error(Kl+"crypto unavailable");if(!v)for(;$<z;)U=F(),U<9e15&&(re[$++]=U%1e14);for(z=re[--$],K%=si,z&&K&&(U=e2[si-K],re[$]=Vu(z/U)*U);re[$]===0;re.pop(),$--);if($<0)re=[j=0];else{for(j=-1;re[0]===0;re.splice(0,1),j-=si);for($=1,U=re[0];U>=10;U/=10,$++);$<si&&(j-=si-$)}return Q.e=j,Q.c=re,Q}}(),D.sum=function(){for(var I=1,F=arguments,K=new D(F[0]);I<F.length;)K=K.plus(F[I++]);return K},n=function(){var I="0123456789";function F(K,B,N,j){for(var z,U=[0],$,re=0,Q=K.length;re<Q;){for($=U.length;$--;U[$]*=B);for(U[0]+=j.indexOf(K.charAt(re++)),z=0;z<U.length;z++)U[z]>N-1&&(U[z+1]==null&&(U[z+1]=0),U[z+1]+=U[z]/N|0,U[z]%=N)}return U.reverse()}return function(K,B,N,j,z){var U,$,re,Q,_e,we,nt,ae,H=K.indexOf("."),Z=o,me=a;for(H>=0&&(Q=x,x=0,K=K.replace(".",""),ae=new D(B),we=ae.pow(K.length-H),x=Q,ae.c=F(yh(ju(we.c),we.e,"0"),10,N,I),ae.e=ae.c.length),nt=F(K,B,N,z?(U=k,I):(U=I,k)),re=Q=nt.length;nt[--Q]==0;nt.pop());if(!nt[0])return U.charAt(0);if(H<0?--re:(we.c=nt,we.e=re,we.s=j,we=e(we,ae,Z,me,N),nt=we.c,_e=we.r,re=we.e),$=re+Z+1,H=nt[$],Q=N/2,_e=_e||$<0||nt[$+1]!=null,_e=me<4?(H!=null||_e)&&(me==0||me==(we.s<0?3:2)):H>Q||H==Q&&(me==4||_e||me==6&&nt[$-1]&1||me==(we.s<0?8:7)),$<1||!nt[0])K=_e?yh(U.charAt(1),-Z,U.charAt(0)):U.charAt(0);else{if(nt.length=$,_e)for(--N;++nt[--$]>N;)nt[$]=0,$||(++re,nt=[1].concat(nt));for(Q=nt.length;!nt[--Q];);for(H=0,K="";H<=Q;K+=U.charAt(nt[H++]));K=yh(K,re,U.charAt(0))}return K}}(),e=function(){function I(B,N,j){var z,U,$,re,Q=0,_e=B.length,we=N%Xh,nt=N/Xh|0;for(B=B.slice();_e--;)$=B[_e]%Xh,re=B[_e]/Xh|0,z=nt*$+re*we,U=we*$+z%Xh*Xh+Q,Q=(U/j|0)+(z/Xh|0)+nt*re,B[_e]=U%j;return Q&&(B=[Q].concat(B)),B}function F(B,N,j,z){var U,$;if(j!=z)$=j>z?1:-1;else for(U=$=0;U<j;U++)if(B[U]!=N[U]){$=B[U]>N[U]?1:-1;break}return $}function K(B,N,j,z){for(var U=0;j--;)B[j]-=U,U=B[j]<N[j]?1:0,B[j]=U*z+B[j]-N[j];for(;!B[0]&&B.length>1;B.splice(0,1));}return function(B,N,j,z,U){var $,re,Q,_e,we,nt,ae,H,Z,me,pe,de,X,J,De,Te,Je,he=B.s==N.s?1:-1,ee=B.c,se=N.c;if(!ee||!ee[0]||!se||!se[0])return new D(!B.s||!N.s||(ee?se&&ee[0]==se[0]:!se)?NaN:ee&&ee[0]==0||!se?he*0:he/0);for(H=new D(he),Z=H.c=[],re=B.e-N.e,he=j+re+1,U||(U=uc,re=Uu(B.e/si)-Uu(N.e/si),he=he/si|0),Q=0;se[Q]==(ee[Q]||0);Q++);if(se[Q]>(ee[Q]||0)&&re--,he<0)Z.push(1),_e=!0;else{for(J=ee.length,Te=se.length,Q=0,he+=2,we=Vu(U/(se[0]+1)),we>1&&(se=I(se,we,U),ee=I(ee,we,U),Te=se.length,J=ee.length),X=Te,me=ee.slice(0,Te),pe=me.length;pe<Te;me[pe++]=0);Je=se.slice(),Je=[0].concat(Je),De=se[0],se[1]>=U/2&&De++;do{if(we=0,$=F(se,me,Te,pe),$<0){if(de=me[0],Te!=pe&&(de=de*U+(me[1]||0)),we=Vu(de/De),we>1)for(we>=U&&(we=U-1),nt=I(se,we,U),ae=nt.length,pe=me.length;F(nt,me,ae,pe)==1;)we--,K(nt,Te<ae?Je:se,ae,U),ae=nt.length,$=1;else we==0&&($=we=1),nt=se.slice(),ae=nt.length;if(ae<pe&&(nt=[0].concat(nt)),K(me,nt,pe,U),pe=me.length,$==-1)for(;F(se,me,Te,pe)<1;)we++,K(me,Te<pe?Je:se,pe,U),pe=me.length}else $===0&&(we++,me=[0]);Z[Q++]=we,me[0]?me[pe++]=ee[X]||0:(me=[ee[X]],pe=1)}while((X++<J||me[0]!=null)&&he--);_e=me[0]!=null,Z[0]||Z.splice(0,1)}if(U==uc){for(Q=1,he=Z[0];he>=10;he/=10,Q++);ge(H,j+(H.e=Q+re*si-1)+1,z,_e)}else H.e=re,H.r=+_e;return H}}();function V(I,F,K,B){var N,j,z,U,$;if(K==null?K=a:co(K,0,8),!I.c)return I.toString();if(N=I.c[0],z=I.e,F==null)$=ju(I.c),$=B==1||B==2&&(z<=l||z>=c)?x0($,z):yh($,z,"0");else if(I=ge(new D(I),F,K),j=I.e,$=ju(I.c),U=$.length,B==1||B==2&&(F<=j||j<=l)){for(;U<F;$+="0",U++);$=x0($,j)}else if(F-=z,$=yh($,j,"0"),j+1>U){if(--F>0)for($+=".";F--;$+="0");}else if(F+=j-U,F>0)for(j+1==U&&($+=".");F--;$+="0");return I.s<0&&N?"-"+$:$}function Y(I,F){for(var K,B,N=1,j=new D(I[0]);N<I.length;N++)B=new D(I[N]),(!B.s||(K=Wd(j,B))===F||K===0&&j.s===F)&&(j=B);return j}function te(I,F,K){for(var B=1,N=F.length;!F[--N];F.pop());for(N=F[0];N>=10;N/=10,B++);return(K=B+K*si-1)>p?I.c=I.e=null:K<d?I.c=[I.e=0]:(I.e=K,I.c=F),I}r=function(){var I=/^(-?)0([xbo])(?=\w[\w.]*$)/i,F=/^([^.]+)\.$/,K=/^\.([^.]+)$/,B=/^-?(Infinity|NaN)$/,N=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(j,z,U,$){var re,Q=U?z:z.replace(N,"");if(B.test(Q))j.s=isNaN(Q)?null:Q<0?-1:1;else{if(!U&&(Q=Q.replace(I,function(_e,we,nt){return re=(nt=nt.toLowerCase())=="x"?16:nt=="b"?2:8,!$||$==re?we:_e}),$&&(re=$,Q=Q.replace(F,"$1").replace(K,"0.$1")),z!=Q))return new D(Q,re);if(D.DEBUG)throw Error(Kl+"Not a"+($?" base "+$:"")+" number: "+z);j.s=null}j.c=j.e=null}}();function ge(I,F,K,B){var N,j,z,U,$,re,Q,_e=I.c,we=e2;if(_e){e:{for(N=1,U=_e[0];U>=10;U/=10,N++);if(j=F-N,j<0)j+=si,z=F,$=_e[re=0],Q=Vu($/we[N-z-1]%10);else if(re=Q1((j+1)/si),re>=_e.length)if(B){for(;_e.length<=re;_e.push(0));$=Q=0,N=1,j%=si,z=j-si+1}else break e;else{for($=U=_e[re],N=1;U>=10;U/=10,N++);j%=si,z=j-si+N,Q=z<0?0:Vu($/we[N-z-1]%10)}if(B=B||F<0||_e[re+1]!=null||(z<0?$:$%we[N-z-1]),B=K<4?(Q||B)&&(K==0||K==(I.s<0?3:2)):Q>5||Q==5&&(K==4||B||K==6&&(j>0?z>0?$/we[N-z]:0:_e[re-1])%10&1||K==(I.s<0?8:7)),F<1||!_e[0])return _e.length=0,B?(F-=I.e+1,_e[0]=we[(si-F%si)%si],I.e=-F||0):_e[0]=I.e=0,I;if(j==0?(_e.length=re,U=1,re--):(_e.length=re+1,U=we[si-j],_e[re]=z>0?Vu($/we[N-z]%we[z])*U:0),B)for(;;)if(re==0){for(j=1,z=_e[0];z>=10;z/=10,j++);for(z=_e[0]+=U,U=1;z>=10;z/=10,U++);j!=U&&(I.e++,_e[0]==uc&&(_e[0]=1));break}else{if(_e[re]+=U,_e[re]!=uc)break;_e[re--]=0,U=1}for(j=_e.length;_e[--j]===0;_e.pop());}I.e>p?I.c=I.e=null:I.e<d&&(I.c=[I.e=0])}return I}function fe(I){var F,K=I.e;return K===null?I.toString():(F=ju(I.c),F=K<=l||K>=c?x0(F,K):yh(F,K,"0"),I.s<0?"-"+F:F)}return i.absoluteValue=i.abs=function(){var I=new D(this);return I.s<0&&(I.s=1),I},i.comparedTo=function(I,F){return Wd(this,new D(I,F))},i.decimalPlaces=i.dp=function(I,F){var K,B,N,j=this;if(I!=null)return co(I,0,yu),F==null?F=a:co(F,0,8),ge(new D(j),I+j.e+1,F);if(!(K=j.c))return null;if(B=((N=K.length-1)-Uu(this.e/si))*si,N=K[N])for(;N%10==0;N/=10,B--);return B<0&&(B=0),B},i.dividedBy=i.div=function(I,F){return e(this,new D(I,F),o,a)},i.dividedToIntegerBy=i.idiv=function(I,F){return e(this,new D(I,F),0,1)},i.exponentiatedBy=i.pow=function(I,F){var K,B,N,j,z,U,$,re,Q,_e=this;if(I=new D(I),I.c&&!I.isInteger())throw Error(Kl+"Exponent not an integer: "+fe(I));if(F!=null&&(F=new D(F)),U=I.e>14,!_e.c||!_e.c[0]||_e.c[0]==1&&!_e.e&&_e.c.length==1||!I.c||!I.c[0])return Q=new D(Math.pow(+fe(_e),U?I.s*(2-w0(I)):+fe(I))),F?Q.mod(F):Q;if($=I.s<0,F){if(F.c?!F.c[0]:!F.s)return new D(NaN);B=!$&&_e.isInteger()&&F.isInteger(),B&&(_e=_e.mod(F))}else{if(I.e>9&&(_e.e>0||_e.e<-1||(_e.e==0?_e.c[0]>1||U&&_e.c[1]>=24e7:_e.c[0]<8e13||U&&_e.c[0]<=9999975e7)))return j=_e.s<0&&w0(I)?-0:0,_e.e>-1&&(j=1/j),new D($?1/j:j);x&&(j=Q1(x/si+2))}for(U?(K=new D(.5),$&&(I.s=1),re=w0(I)):(N=Math.abs(+fe(I)),re=N%2),Q=new D(s);;){if(re){if(Q=Q.times(_e),!Q.c)break;j?Q.c.length>j&&(Q.c.length=j):B&&(Q=Q.mod(F))}if(N){if(N=Vu(N/2),N===0)break;re=N%2}else if(I=I.times(K),ge(I,I.e+1,1),I.e>14)re=w0(I);else{if(N=+fe(I),N===0)break;re=N%2}_e=_e.times(_e),j?_e.c&&_e.c.length>j&&(_e.c.length=j):B&&(_e=_e.mod(F))}return B?Q:($&&(Q=s.div(Q)),F?Q.mod(F):j?ge(Q,x,a,z):Q)},i.integerValue=function(I){var F=new D(this);return I==null?I=a:co(I,0,8),ge(F,F.e+1,I)},i.isEqualTo=i.eq=function(I,F){return Wd(this,new D(I,F))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(I,F){return Wd(this,new D(I,F))>0},i.isGreaterThanOrEqualTo=i.gte=function(I,F){return(F=Wd(this,new D(I,F)))===1||F===0},i.isInteger=function(){return!!this.c&&Uu(this.e/si)>this.c.length-2},i.isLessThan=i.lt=function(I,F){return Wd(this,new D(I,F))<0},i.isLessThanOrEqualTo=i.lte=function(I,F){return(F=Wd(this,new D(I,F)))===-1||F===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(I,F){var K,B,N,j,z=this,U=z.s;if(I=new D(I,F),F=I.s,!U||!F)return new D(NaN);if(U!=F)return I.s=-F,z.plus(I);var $=z.e/si,re=I.e/si,Q=z.c,_e=I.c;if(!$||!re){if(!Q||!_e)return Q?(I.s=-F,I):new D(_e?z:NaN);if(!Q[0]||!_e[0])return _e[0]?(I.s=-F,I):new D(Q[0]?z:a==3?-0:0)}if($=Uu($),re=Uu(re),Q=Q.slice(),U=$-re){for((j=U<0)?(U=-U,N=Q):(re=$,N=_e),N.reverse(),F=U;F--;N.push(0));N.reverse()}else for(B=(j=(U=Q.length)<(F=_e.length))?U:F,U=F=0;F<B;F++)if(Q[F]!=_e[F]){j=Q[F]<_e[F];break}if(j&&(N=Q,Q=_e,_e=N,I.s=-I.s),F=(B=_e.length)-(K=Q.length),F>0)for(;F--;Q[K++]=0);for(F=uc-1;B>U;){if(Q[--B]<_e[B]){for(K=B;K&&!Q[--K];Q[K]=F);--Q[K],Q[B]+=uc}Q[B]-=_e[B]}for(;Q[0]==0;Q.splice(0,1),--re);return Q[0]?te(I,Q,re):(I.s=a==3?-1:1,I.c=[I.e=0],I)},i.modulo=i.mod=function(I,F){var K,B,N=this;return I=new D(I,F),!N.c||!I.s||I.c&&!I.c[0]?new D(NaN):!I.c||N.c&&!N.c[0]?new D(N):(m==9?(B=I.s,I.s=1,K=e(N,I,0,3),I.s=B,K.s*=B):K=e(N,I,0,m),I=N.minus(K.times(I)),!I.c[0]&&m==1&&(I.s=N.s),I)},i.multipliedBy=i.times=function(I,F){var K,B,N,j,z,U,$,re,Q,_e,we,nt,ae,H,Z,me=this,pe=me.c,de=(I=new D(I,F)).c;if(!pe||!de||!pe[0]||!de[0])return!me.s||!I.s||pe&&!pe[0]&&!de||de&&!de[0]&&!pe?I.c=I.e=I.s=null:(I.s*=me.s,!pe||!de?I.c=I.e=null:(I.c=[0],I.e=0)),I;for(B=Uu(me.e/si)+Uu(I.e/si),I.s*=me.s,$=pe.length,_e=de.length,$<_e&&(ae=pe,pe=de,de=ae,N=$,$=_e,_e=N),N=$+_e,ae=[];N--;ae.push(0));for(H=uc,Z=Xh,N=_e;--N>=0;){for(K=0,we=de[N]%Z,nt=de[N]/Z|0,z=$,j=N+z;j>N;)re=pe[--z]%Z,Q=pe[z]/Z|0,U=nt*re+Q*we,re=we*re+U%Z*Z+ae[j]+K,K=(re/H|0)+(U/Z|0)+nt*Q,ae[j--]=re%H;ae[j]=K}return K?++B:ae.splice(0,1),te(I,ae,B)},i.negated=function(){var I=new D(this);return I.s=-I.s||null,I},i.plus=function(I,F){var K,B=this,N=B.s;if(I=new D(I,F),F=I.s,!N||!F)return new D(NaN);if(N!=F)return I.s=-F,B.minus(I);var j=B.e/si,z=I.e/si,U=B.c,$=I.c;if(!j||!z){if(!U||!$)return new D(N/0);if(!U[0]||!$[0])return $[0]?I:new D(U[0]?B:N*0)}if(j=Uu(j),z=Uu(z),U=U.slice(),N=j-z){for(N>0?(z=j,K=$):(N=-N,K=U),K.reverse();N--;K.push(0));K.reverse()}for(N=U.length,F=$.length,N-F<0&&(K=$,$=U,U=K,F=N),N=0;F;)N=(U[--F]=U[F]+$[F]+N)/uc|0,U[F]=uc===U[F]?0:U[F]%uc;return N&&(U=[N].concat(U),++z),te(I,U,z)},i.precision=i.sd=function(I,F){var K,B,N,j=this;if(I!=null&&I!==!!I)return co(I,1,yu),F==null?F=a:co(F,0,8),ge(new D(j),I,F);if(!(K=j.c))return null;if(N=K.length-1,B=N*si+1,N=K[N]){for(;N%10==0;N/=10,B--);for(N=K[0];N>=10;N/=10,B++);}return I&&j.e+1>B&&(B=j.e+1),B},i.shiftedBy=function(I){return co(I,-9007199254740991,u5),this.times("1e"+I)},i.squareRoot=i.sqrt=function(){var I,F,K,B,N,j=this,z=j.c,U=j.s,$=j.e,re=o+4,Q=new D("0.5");if(U!==1||!z||!z[0])return new D(!U||U<0&&(!z||z[0])?NaN:z?j:1/0);if(U=Math.sqrt(+fe(j)),U==0||U==1/0?(F=ju(z),(F.length+$)%2==0&&(F+="0"),U=Math.sqrt(+F),$=Uu(($+1)/2)-($<0||$%2),U==1/0?F="5e"+$:(F=U.toExponential(),F=F.slice(0,F.indexOf("e")+1)+$),K=new D(F)):K=new D(U+""),K.c[0]){for($=K.e,U=$+re,U<3&&(U=0);;)if(N=K,K=Q.times(N.plus(e(j,N,re,1))),ju(N.c).slice(0,U)===(F=ju(K.c)).slice(0,U))if(K.e<$&&--U,F=F.slice(U-3,U+1),F=="9999"||!B&&F=="4999"){if(!B&&(ge(N,N.e+o+2,0),N.times(N).eq(j))){K=N;break}re+=4,U+=4,B=1}else{(!+F||!+F.slice(1)&&F.charAt(0)=="5")&&(ge(K,K.e+o+2,1),I=!K.times(K).eq(j));break}}return ge(K,K.e+o+1,a,I)},i.toExponential=function(I,F){return I!=null&&(co(I,0,yu),I++),V(this,I,F,1)},i.toFixed=function(I,F){return I!=null&&(co(I,0,yu),I=I+this.e+1),V(this,I,F)},i.toFormat=function(I,F,K){var B,N=this;if(K==null)I!=null&&F&&typeof F=="object"?(K=F,F=null):I&&typeof I=="object"?(K=I,I=F=null):K=E;else if(typeof K!="object")throw Error(Kl+"Argument not an object: "+K);if(B=N.toFixed(I,F),N.c){var j,z=B.split("."),U=+K.groupSize,$=+K.secondaryGroupSize,re=K.groupSeparator||"",Q=z[0],_e=z[1],we=N.s<0,nt=we?Q.slice(1):Q,ae=nt.length;if($&&(j=U,U=$,$=j,ae-=j),U>0&&ae>0){for(j=ae%U||U,Q=nt.substr(0,j);j<ae;j+=U)Q+=re+nt.substr(j,U);$>0&&(Q+=re+nt.slice(j)),we&&(Q="-"+Q)}B=_e?Q+(K.decimalSeparator||"")+(($=+K.fractionGroupSize)?_e.replace(new RegExp("\\d{"+$+"}\\B","g"),"$&"+(K.fractionGroupSeparator||"")):_e):Q}return(K.prefix||"")+B+(K.suffix||"")},i.toFraction=function(I){var F,K,B,N,j,z,U,$,re,Q,_e,we,nt=this,ae=nt.c;if(I!=null&&(U=new D(I),!U.isInteger()&&(U.c||U.s!==1)||U.lt(s)))throw Error(Kl+"Argument "+(U.isInteger()?"out of range: ":"not an integer: ")+fe(U));if(!ae)return new D(nt);for(F=new D(s),re=K=new D(s),B=$=new D(s),we=ju(ae),j=F.e=we.length-nt.e-1,F.c[0]=e2[(z=j%si)<0?si+z:z],I=!I||U.comparedTo(F)>0?j>0?F:re:U,z=p,p=1/0,U=new D(we),$.c[0]=0;Q=e(U,F,0,1),N=K.plus(Q.times(B)),N.comparedTo(I)!=1;)K=B,B=N,re=$.plus(Q.times(N=re)),$=N,F=U.minus(Q.times(N=F)),U=N;return N=e(I.minus(K),B,0,1),$=$.plus(N.times(re)),K=K.plus(N.times(B)),$.s=re.s=nt.s,j=j*2,_e=e(re,B,j,a).minus(nt).abs().comparedTo(e($,K,j,a).minus(nt).abs())<1?[re,B]:[$,K],p=z,_e},i.toNumber=function(){return+fe(this)},i.toPrecision=function(I,F){return I!=null&&co(I,1,yu),V(this,I,F,2)},i.toString=function(I){var F,K=this,B=K.s,N=K.e;return N===null?B?(F="Infinity",B<0&&(F="-"+F)):F="NaN":(I==null?F=N<=l||N>=c?x0(ju(K.c),N):yh(ju(K.c),N,"0"):I===10&&A?(K=ge(new D(K),o+N+1,a),F=yh(ju(K.c),K.e,"0")):(co(I,2,k.length,"Base"),F=n(yh(ju(K.c),N,"0"),10,I,B,!0)),B<0&&K.c[0]&&(F="-"+F)),F},i.valueOf=i.toJSON=function(){return fe(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,t!=null&&D.set(t),D}function Uu(t){var e=t|0;return t>0||t===e?e:e-1}function ju(t){for(var e,n,r=1,i=t.length,s=t[0]+"";r<i;){for(e=t[r++]+"",n=si-e.length;n--;e="0"+e);s+=e}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function Wd(t,e){var n,r,i=t.c,s=e.c,o=t.s,a=e.s,l=t.e,c=e.e;if(!o||!a)return null;if(n=i&&!i[0],r=s&&!s[0],n||r)return n?r?0:-a:o;if(o!=a)return o;if(n=o<0,r=l==c,!i||!s)return r?0:!i^n?1:-1;if(!r)return l>c^n?1:-1;for(a=(l=i.length)<(c=s.length)?l:c,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^n?1:-1;return l==c?0:l>c^n?1:-1}function co(t,e,n,r){if(t<e||t>n||t!==Vu(t))throw Error(Kl+(r||"Argument")+(typeof t=="number"?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function w0(t){var e=t.c.length-1;return Uu(t.e/si)==e&&t.c[e]%2!=0}function x0(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function yh(t,e,n){var r,i;if(e<0){for(i=n+".";++e;i+=n);t=i+t}else if(r=t.length,++e>r){for(i=n,e-=r;--e;i+=n);t+=i}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}var Yc=kE(),Jj=class{constructor(t){Ze(this,"key");Ze(this,"left",null);Ze(this,"right",null);this.key=t}},rg=class extends Jj{constructor(t){super(t)}},Qj=class{constructor(){Ze(this,"size",0);Ze(this,"modificationCount",0);Ze(this,"splayCount",0)}splay(t){const e=this.root;if(e==null)return this.compare(t,t),-1;let n=null,r=null,i=null,s=null,o=e;const a=this.compare;let l;for(;;)if(l=a(o.key,t),l>0){let c=o.left;if(c==null||(l=a(c.key,t),l>0&&(o.left=c.right,c.right=o,o=c,c=o.left,c==null)))break;n==null?r=o:n.left=o,n=o,o=c}else if(l<0){let c=o.right;if(c==null||(l=a(c.key,t),l<0&&(o.right=c.left,c.left=o,o=c,c=o.right,c==null)))break;i==null?s=o:i.right=o,i=o,o=c}else break;return i!=null&&(i.right=o.left,o.left=s),n!=null&&(n.left=o.right,o.right=r),this.root!==o&&(this.root=o,this.splayCount++),l}splayMin(t){let e=t,n=e.left;for(;n!=null;){const r=n;e.left=r.right,r.right=e,e=r,n=e.left}return e}splayMax(t){let e=t,n=e.right;for(;n!=null;){const r=n;e.right=r.left,r.left=e,e=r,n=e.right}return e}_delete(t){if(this.root==null||this.splay(t)!=0)return null;let n=this.root;const r=n,i=n.left;if(this.size--,i==null)this.root=n.right;else{const s=n.right;n=this.splayMax(i),n.right=s,this.root=n}return this.modificationCount++,r}addNewRoot(t,e){this.size++,this.modificationCount++;const n=this.root;if(n==null){this.root=t;return}e<0?(t.left=n,t.right=n.right,n.right=null):(t.right=n,t.left=n.left,n.left=null),this.root=t}_first(){const t=this.root;return t==null?null:(this.root=this.splayMin(t),this.root)}_last(){const t=this.root;return t==null?null:(this.root=this.splayMax(t),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(t){return this.validKey(t)&&this.splay(t)==0}defaultCompare(){return(t,e)=>t<e?-1:t>e?1:0}wrap(){return{getRoot:()=>this.root,setRoot:t=>{this.root=t},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:t=>{this.splayCount=t},splay:t=>this.splay(t),has:t=>this.has(t)}}},CL,EL,Uv=class wg extends Qj{constructor(n,r){super();Ze(this,"root",null);Ze(this,"compare");Ze(this,"validKey");Ze(this,CL,"[object Set]");this.compare=n??this.defaultCompare(),this.validKey=r??(i=>i!=null&&i!=null)}delete(n){return this.validKey(n)?this._delete(n)!=null:!1}deleteAll(n){for(const r of n)this.delete(r)}forEach(n){const r=this[Symbol.iterator]();let i;for(;i=r.next(),!i.done;)n(i.value,i.value,this)}add(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new rg(n),r),this}addAndReturn(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new rg(n),r),this.root.key}addAll(n){for(const r of n)this.add(r)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let s=i.right;for(;s!=null;)i=s,s=i.right;return i.key}firstAfter(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let s=i.left;for(;s!=null;)i=s,s=i.left;return i.key}retainAll(n){const r=new wg(this.compare,this.validKey),i=this.modificationCount;for(const s of n){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(s)&&this.splay(s)==0&&r.add(this.root.key)}r.size!=this.size&&(this.root=r.root,this.size=r.size,this.modificationCount++)}lookup(n){return!this.validKey(n)||this.splay(n)!=0?null:this.root.key}intersection(n){const r=new wg(this.compare,this.validKey);for(const i of this)n.has(i)&&r.add(i);return r}difference(n){const r=new wg(this.compare,this.validKey);for(const i of this)n.has(i)||r.add(i);return r}union(n){const r=this.clone();return r.addAll(n),r}clone(){const n=new wg(this.compare,this.validKey);return n.size=this.size,n.root=this.copyNode(this.root),n}copyNode(n){if(n==null)return null;function r(s,o){let a,l;do{if(a=s.left,l=s.right,a!=null){const c=new rg(a.key);o.left=c,r(a,c)}if(l!=null){const c=new rg(l.key);o.right=c,s=l,o=c}}while(l!=null)}const i=new rg(n.key);return r(n,i),i}toSet(){return this.clone()}entries(){return new tz(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(EL=Symbol.iterator,CL=Symbol.toStringTag,EL)](){return new ez(this.wrap())}},AE=class{constructor(t){Ze(this,"tree");Ze(this,"path",new Array);Ze(this,"modificationCount",null);Ze(this,"splayCount");this.tree=t,this.splayCount=t.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const t=this.path[this.path.length-1];return this.getValue(t)}rebuildPath(t){this.path.splice(0,this.path.length),this.tree.splay(t),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(t){for(;t!=null;)this.path.push(t),t=t.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let n=this.tree.getRoot();for(;n!=null;)this.path.push(n),n=n.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let t=this.path[this.path.length-1],e=t.right;if(e!=null){for(;e!=null;)this.path.push(e),e=e.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===t;)t=this.path.pop();return this.path.length>0}},ez=class extends AE{getValue(t){return t.key}},tz=class extends AE{getValue(t){return[t.key,t.key]}},TE=t=>()=>t,bb=t=>{const e=t?(n,r)=>r.minus(n).abs().isLessThanOrEqualTo(t):TE(!1);return(n,r)=>e(n,r)?0:n.comparedTo(r)};function nz(t){const e=t?(n,r,i,s,o)=>n.exponentiatedBy(2).isLessThanOrEqualTo(s.minus(r).exponentiatedBy(2).plus(o.minus(i).exponentiatedBy(2)).times(t)):TE(!1);return(n,r,i)=>{const s=n.x,o=n.y,a=i.x,l=i.y,c=o.minus(l).times(r.x.minus(a)).minus(s.minus(a).times(r.y.minus(l)));return e(c,s,o,a,l)?0:c.comparedTo(0)}}var rz=t=>t,iz=t=>{if(t){const e=new Uv(bb(t)),n=new Uv(bb(t)),r=(s,o)=>o.addAndReturn(s),i=s=>({x:r(s.x,e),y:r(s.y,n)});return i({x:new Yc(0),y:new Yc(0)}),i}return rz},_b=t=>({set:e=>{Rh=_b(e)},reset:()=>_b(t),compare:bb(t),snap:iz(t),orient:nz(t)}),Rh=_b(),ig=(t,e)=>t.ll.x.isLessThanOrEqualTo(e.x)&&e.x.isLessThanOrEqualTo(t.ur.x)&&t.ll.y.isLessThanOrEqualTo(e.y)&&e.y.isLessThanOrEqualTo(t.ur.y),wb=(t,e)=>{if(e.ur.x.isLessThan(t.ll.x)||t.ur.x.isLessThan(e.ll.x)||e.ur.y.isLessThan(t.ll.y)||t.ur.y.isLessThan(e.ll.y))return null;const n=t.ll.x.isLessThan(e.ll.x)?e.ll.x:t.ll.x,r=t.ur.x.isLessThan(e.ur.x)?t.ur.x:e.ur.x,i=t.ll.y.isLessThan(e.ll.y)?e.ll.y:t.ll.y,s=t.ur.y.isLessThan(e.ur.y)?t.ur.y:e.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:s}}},rv=(t,e)=>t.x.times(e.y).minus(t.y.times(e.x)),DE=(t,e)=>t.x.times(e.x).plus(t.y.times(e.y)),Hv=t=>DE(t,t).sqrt(),sz=(t,e,n)=>{const r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return rv(i,r).div(Hv(i)).div(Hv(r))},oz=(t,e,n)=>{const r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return DE(i,r).div(Hv(i)).div(Hv(r))},c5=(t,e,n)=>e.y.isZero()?null:{x:t.x.plus(e.x.div(e.y).times(n.minus(t.y))),y:n},h5=(t,e,n)=>e.x.isZero()?null:{x:n,y:t.y.plus(e.y.div(e.x).times(n.minus(t.x)))},az=(t,e,n,r)=>{if(e.x.isZero())return h5(n,r,t.x);if(r.x.isZero())return h5(t,e,n.x);if(e.y.isZero())return c5(n,r,t.y);if(r.y.isZero())return c5(t,e,n.y);const i=rv(e,r);if(i.isZero())return null;const s={x:n.x.minus(t.x),y:n.y.minus(t.y)},o=rv(s,e).div(i),a=rv(s,r).div(i),l=t.x.plus(a.times(e.x)),c=n.x.plus(o.times(r.x)),d=t.y.plus(a.times(e.y)),p=n.y.plus(o.times(r.y)),v=l.plus(c).div(2),m=d.plus(p).div(2);return{x:v,y:m}},Hc=class OE{constructor(e,n){Ze(this,"point");Ze(this,"isLeft");Ze(this,"segment");Ze(this,"otherSE");Ze(this,"consumedBy");e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}static compare(e,n){const r=OE.comparePoints(e.point,n.point);return r!==0?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:Wv.compare(e.segment,n.segment))}static comparePoints(e,n){return e.x.isLessThan(n.x)?-1:e.x.isGreaterThan(n.x)?1:e.y.isLessThan(n.y)?-1:e.y.isGreaterThan(n.y)?1:0}link(e){if(e.point===this.point)throw new Error("Tried to link already linked events");const n=e.point.events;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}checkForConsuming(){const e=this.point.events.length;for(let n=0;n<e;n++){const r=this.point.events[n];if(r.segment.consumedBy===void 0)for(let i=n+1;i<e;i++){const s=this.point.events[i];s.consumedBy===void 0&&r.otherSE.point.events===s.otherSE.point.events&&r.segment.consume(s.segment)}}}getAvailableLinkedEvents(){const e=[];for(let n=0,r=this.point.events.length;n<r;n++){const i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&e.push(i)}return e}getLeftmostComparator(e){const n=new Map,r=i=>{const s=i.otherSE;n.set(i,{sine:sz(this.point,e.point,s.point),cosine:oz(this.point,e.point,s.point)})};return(i,s)=>{n.has(i)||r(i),n.has(s)||r(s);const{sine:o,cosine:a}=n.get(i),{sine:l,cosine:c}=n.get(s);return o.isGreaterThanOrEqualTo(0)&&l.isGreaterThanOrEqualTo(0)?a.isLessThan(c)?1:a.isGreaterThan(c)?-1:0:o.isLessThan(0)&&l.isLessThan(0)?a.isLessThan(c)?-1:a.isGreaterThan(c)?1:0:l.isLessThan(o)?-1:l.isGreaterThan(o)?1:0}}},lz=class xb{constructor(e){Ze(this,"events");Ze(this,"poly");Ze(this,"_isExteriorRing");Ze(this,"_enclosingRing");this.events=e;for(let n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}static factory(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];if(!s.isInResult()||s.ringOut)continue;let o=null,a=s.leftSE,l=s.rightSE;const c=[a],d=a.point,p=[];for(;o=a,a=l,c.push(a),a.point!==d;)for(;;){const v=a.getAvailableLinkedEvents();if(v.length===0){const E=c[0].point,k=c[c.length-1].point;throw new Error(`Unable to complete output ring starting at [${E.x}, ${E.y}]. Last matching segment found ends at [${k.x}, ${k.y}].`)}if(v.length===1){l=v[0].otherSE;break}let m=null;for(let E=0,k=p.length;E<k;E++)if(p[E].point===a.point){m=E;break}if(m!==null){const E=p.splice(m)[0],k=c.splice(E.index);k.unshift(k[0].otherSE),n.push(new xb(k.reverse()));continue}p.push({index:c.length,point:a.point});const x=a.getLeftmostComparator(o);l=v.sort(x)[0].otherSE;break}n.push(new xb(c))}return n}getGeom(){let e=this.events[0].point;const n=[e];for(let c=1,d=this.events.length-1;c<d;c++){const p=this.events[c].point,v=this.events[c+1].point;Rh.orient(p,e,v)!==0&&(n.push(p),e=p)}if(n.length===1)return null;const r=n[0],i=n[1];Rh.orient(r,e,i)===0&&n.shift(),n.push(n[0]);const s=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:n.length-1,a=this.isExteriorRing()?n.length:-1,l=[];for(let c=o;c!=a;c+=s)l.push([n[c].x.toNumber(),n[c].y.toNumber()]);return l}isExteriorRing(){if(this._isExteriorRing===void 0){const e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var i,s;let e=this.events[0];for(let o=1,a=this.events.length;o<a;o++){const l=this.events[o];Hc.compare(e,l)>0&&(e=l)}let n=e.segment.prevInResult(),r=n?n.prevInResult():null;for(;;){if(!n)return null;if(!r)return n.ringOut;if(r.ringOut!==n.ringOut)return((i=r.ringOut)==null?void 0:i.enclosingRing())!==n.ringOut?n.ringOut:(s=n.ringOut)==null?void 0:s.enclosingRing();n=r.prevInResult(),r=n?n.prevInResult():null}}},d5=class{constructor(t){Ze(this,"exteriorRing");Ze(this,"interiorRings");this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=this.exteriorRing.getGeom();if(t===null)return null;const e=[t];for(let n=0,r=this.interiorRings.length;n<r;n++){const i=this.interiorRings[n].getGeom();i!==null&&e.push(i)}return e}},uz=class{constructor(t){Ze(this,"rings");Ze(this,"polys");this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const r=this.polys[e].getGeom();r!==null&&t.push(r)}return t}_composePolys(t){var n;const e=[];for(let r=0,i=t.length;r<i;r++){const s=t[r];if(!s.poly)if(s.isExteriorRing())e.push(new d5(s));else{const o=s.enclosingRing();o!=null&&o.poly||e.push(new d5(o)),(n=o==null?void 0:o.poly)==null||n.addInterior(s)}}return e}},cz=class{constructor(t,e=Wv.compare){Ze(this,"queue");Ze(this,"tree");Ze(this,"segments");this.queue=t,this.tree=new Uv(e),this.segments=[]}process(t){const e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.delete(t.otherSE):this.tree.delete(e),n;t.isLeft&&this.tree.add(e);let r=e,i=e;do r=this.tree.lastBefore(r);while(r!=null&&r.consumedBy!=null);do i=this.tree.firstAfter(i);while(i!=null&&i.consumedBy!=null);if(t.isLeft){let s=null;if(r){const a=r.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(s=a),!r.isAnEndpoint(a))){const l=this._splitSafely(r,a);for(let c=0,d=l.length;c<d;c++)n.push(l[c])}}let o=null;if(i){const a=i.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(o=a),!i.isAnEndpoint(a))){const l=this._splitSafely(i,a);for(let c=0,d=l.length;c<d;c++)n.push(l[c])}}if(s!==null||o!==null){let a=null;s===null?a=o:o===null?a=s:a=Hc.comparePoints(s,o)<=0?s:o,this.queue.delete(e.rightSE),n.push(e.rightSE);const l=e.split(a);for(let c=0,d=l.length;c<d;c++)n.push(l[c])}n.length>0?(this.tree.delete(e),n.push(t)):(this.segments.push(e),e.prev=r)}else{if(r&&i){const s=r.getIntersection(i);if(s!==null){if(!r.isAnEndpoint(s)){const o=this._splitSafely(r,s);for(let a=0,l=o.length;a<l;a++)n.push(o[a])}if(!i.isAnEndpoint(s)){const o=this._splitSafely(i,s);for(let a=0,l=o.length;a<l;a++)n.push(o[a])}}}this.tree.delete(e)}return n}_splitSafely(t,e){this.tree.delete(t);const n=t.rightSE;this.queue.delete(n);const r=t.split(e);return r.push(n),t.consumedBy===void 0&&this.tree.add(t),r}},hz=class{constructor(){Ze(this,"type");Ze(this,"numMultiPolys")}run(t,e,n){xg.type=t;const r=[new p5(e,!0)];for(let c=0,d=n.length;c<d;c++)r.push(new p5(n[c],!1));if(xg.numMultiPolys=r.length,xg.type==="difference"){const c=r[0];let d=1;for(;d<r.length;)wb(r[d].bbox,c.bbox)!==null?d++:r.splice(d,1)}if(xg.type==="intersection")for(let c=0,d=r.length;c<d;c++){const p=r[c];for(let v=c+1,m=r.length;v<m;v++)if(wb(p.bbox,r[v].bbox)===null)return[]}const i=new Uv(Hc.compare);for(let c=0,d=r.length;c<d;c++){const p=r[c].getSweepEvents();for(let v=0,m=p.length;v<m;v++)i.add(p[v])}const s=new cz(i);let o=null;for(i.size!=0&&(o=i.first(),i.delete(o));o;){const c=s.process(o);for(let d=0,p=c.length;d<p;d++){const v=c[d];v.consumedBy===void 0&&i.add(v)}i.size!=0?(o=i.first(),i.delete(o)):o=null}Rh.reset();const a=lz.factory(s.segments);return new uz(a).getGeom()}},xg=new hz,Lb=xg,dz=0,Wv=class iv{constructor(e,n,r,i){Ze(this,"id");Ze(this,"leftSE");Ze(this,"rightSE");Ze(this,"rings");Ze(this,"windings");Ze(this,"ringOut");Ze(this,"consumedBy");Ze(this,"prev");Ze(this,"_prevInResult");Ze(this,"_beforeState");Ze(this,"_afterState");Ze(this,"_isInResult");this.id=++dz,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}static compare(e,n){const r=e.leftSE.point.x,i=n.leftSE.point.x,s=e.rightSE.point.x,o=n.rightSE.point.x;if(o.isLessThan(r))return 1;if(s.isLessThan(i))return-1;const a=e.leftSE.point.y,l=n.leftSE.point.y,c=e.rightSE.point.y,d=n.rightSE.point.y;if(r.isLessThan(i)){if(l.isLessThan(a)&&l.isLessThan(c))return 1;if(l.isGreaterThan(a)&&l.isGreaterThan(c))return-1;const p=e.comparePoint(n.leftSE.point);if(p<0)return 1;if(p>0)return-1;const v=n.comparePoint(e.rightSE.point);return v!==0?v:-1}if(r.isGreaterThan(i)){if(a.isLessThan(l)&&a.isLessThan(d))return-1;if(a.isGreaterThan(l)&&a.isGreaterThan(d))return 1;const p=n.comparePoint(e.leftSE.point);if(p!==0)return p;const v=e.comparePoint(n.rightSE.point);return v<0?1:v>0?-1:1}if(a.isLessThan(l))return-1;if(a.isGreaterThan(l))return 1;if(s.isLessThan(o)){const p=n.comparePoint(e.rightSE.point);if(p!==0)return p}if(s.isGreaterThan(o)){const p=e.comparePoint(n.rightSE.point);if(p<0)return 1;if(p>0)return-1}if(!s.eq(o)){const p=c.minus(a),v=s.minus(r),m=d.minus(l),x=o.minus(i);if(p.isGreaterThan(v)&&m.isLessThan(x))return 1;if(p.isLessThan(v)&&m.isGreaterThan(x))return-1}return s.isGreaterThan(o)?1:s.isLessThan(o)||c.isLessThan(d)?-1:c.isGreaterThan(d)?1:e.id<n.id?-1:e.id>n.id?1:0}static fromRing(e,n,r){let i,s,o;const a=Hc.comparePoints(e,n);if(a<0)i=e,s=n,o=1;else if(a>0)i=n,s=e,o=-1;else throw new Error(`Tried to create degenerate segment at [${e.x}, ${e.y}]`);const l=new Hc(i,!0),c=new Hc(s,!1);return new iv(l,c,[r],[o])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const e=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e.isLessThan(n)?e:n},ur:{x:this.rightSE.point.x,y:e.isGreaterThan(n)?e:n}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(e){return e.x.eq(this.leftSE.point.x)&&e.y.eq(this.leftSE.point.y)||e.x.eq(this.rightSE.point.x)&&e.y.eq(this.rightSE.point.y)}comparePoint(e){return Rh.orient(this.leftSE.point,e,this.rightSE.point)}getIntersection(e){const n=this.bbox(),r=e.bbox(),i=wb(n,r);if(i===null)return null;const s=this.leftSE.point,o=this.rightSE.point,a=e.leftSE.point,l=e.rightSE.point,c=ig(n,a)&&this.comparePoint(a)===0,d=ig(r,s)&&e.comparePoint(s)===0,p=ig(n,l)&&this.comparePoint(l)===0,v=ig(r,o)&&e.comparePoint(o)===0;if(d&&c)return v&&!p?o:!v&&p?l:null;if(d)return p&&s.x.eq(l.x)&&s.y.eq(l.y)?null:s;if(c)return v&&o.x.eq(a.x)&&o.y.eq(a.y)?null:a;if(v&&p)return null;if(v)return o;if(p)return l;const m=az(s,this.vector(),a,e.vector());return m===null||!ig(i,m)?null:Rh.snap(m)}split(e){const n=[],r=e.events!==void 0,i=new Hc(e,!0),s=new Hc(e,!1),o=this.rightSE;this.replaceRightSE(s),n.push(s),n.push(i);const a=new iv(i,o,this.rings.slice(),this.windings.slice());return Hc.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),Hc.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),s.checkForConsuming()),n}swapEvents(){const e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}consume(e){let n=this,r=e;for(;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const i=iv.compare(n,r);if(i!==0){if(i>0){const s=n;n=r,r=s}if(n.prev===r){const s=n;n=r,r=s}for(let s=0,o=r.rings.length;s<o;s++){const a=r.rings[s],l=r.windings[s],c=n.rings.indexOf(a);c===-1?(n.rings.push(a),n.windings.push(l)):n.windings[c]+=l}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys;for(let a=0,l=this.rings.length;a<l;a++){const c=this.rings[a],d=this.windings[a],p=n.indexOf(c);p===-1?(n.push(c),r.push(d)):r[p]+=d}const s=[],o=[];for(let a=0,l=n.length;a<l;a++){if(r[a]===0)continue;const c=n[a],d=c.poly;if(o.indexOf(d)===-1)if(c.isExterior)s.push(d);else{o.indexOf(d)===-1&&o.push(d);const p=s.indexOf(c.poly);p!==-1&&s.splice(p,1)}}for(let a=0,l=s.length;a<l;a++){const c=s[a].multiPoly;i.indexOf(c)===-1&&i.push(c)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const e=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(Lb.type){case"union":{const r=e.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{let r,i;e.length<n.length?(r=e.length,i=n.length):(r=n.length,i=e.length),this._isInResult=i===Lb.numMultiPolys&&r<i;break}case"xor":{const r=Math.abs(e.length-n.length);this._isInResult=r%2===1;break}case"difference":{const r=i=>i.length===1&&i[0].isSubject;this._isInResult=r(e)!==r(n);break}}return this._isInResult}},f5=class{constructor(t,e,n){Ze(this,"poly");Ze(this,"isExterior");Ze(this,"segments");Ze(this,"bbox");if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=n,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=Rh.snap({x:new Yc(t[0][0]),y:new Yc(t[0][1])});this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let i=r;for(let s=1,o=t.length;s<o;s++){if(typeof t[s][0]!="number"||typeof t[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const a=Rh.snap({x:new Yc(t[s][0]),y:new Yc(t[s][1])});a.x.eq(i.x)&&a.y.eq(i.y)||(this.segments.push(Wv.fromRing(i,a,this)),a.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=a.x),a.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=a.y),a.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=a.x),a.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=a.y),i=a)}(!r.x.eq(i.x)||!r.y.eq(i.y))&&this.segments.push(Wv.fromRing(i,r,this))}getSweepEvents(){const t=[];for(let e=0,n=this.segments.length;e<n;e++){const r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}},fz=class{constructor(t,e){Ze(this,"multiPoly");Ze(this,"exteriorRing");Ze(this,"interiorRings");Ze(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new f5(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let n=1,r=t.length;n<r;n++){const i=new f5(t[n],this,!1);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=e}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let e=0,n=this.interiorRings.length;e<n;e++){const r=this.interiorRings[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)t.push(r[i])}return t}},p5=class{constructor(t,e){Ze(this,"isSubject");Ze(this,"polys");Ze(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:new Yc(Number.POSITIVE_INFINITY),y:new Yc(Number.POSITIVE_INFINITY)},ur:{x:new Yc(Number.NEGATIVE_INFINITY),y:new Yc(Number.NEGATIVE_INFINITY)}};for(let n=0,r=t.length;n<r;n++){const i=new fz(t[n],this);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=e}getSweepEvents(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const r=this.polys[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)t.push(r[i])}return t}},pz=(t,...e)=>Lb.run("intersection",t,e);Rh.set;function gz(t,e){var n,r,i,s,o,a,l,c,d,p,v=0,m=t.type==="FeatureCollection",x=t.type==="Feature",E=m?t.features.length:1;for(n=0;n<E;n++){for(a=m?t.features[n].geometry:x?t.geometry:t,c=m?t.features[n].properties:x?t.properties:{},d=m?t.features[n].bbox:x?t.bbox:void 0,p=m?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,d,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,d,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,d,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function mz(t,e={}){const n=[];if(gz(t,i=>{n.push(i.coordinates)}),n.length<2)throw new Error("Must specify at least 2 geometries");const r=pz(n[0],...n.slice(1));return r.length===0?null:r.length===1?Hu(r[0],e.properties):Rj(r,e.properties)}var vz=mz;function NE(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,d=0,p=0,v,m=t.type,x=m==="FeatureCollection",E=m==="Feature",k=x?t.features.length:1,A=0;A<k;A++){c=x?t.features[A].geometry:E?t.geometry:t,v=c?c.type==="GeometryCollection":!1,a=v?c.geometries.length:1;for(var D=0;D<a;D++){var V=0,Y=0;if(o=v?c.geometries[D]:c,o!==null){l=o.coordinates;var te=o.type;switch(d=0,te){case null:break;case"Point":if(e(l,p,A,V,Y)===!1)return!1;p++,V++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,A,V,Y)===!1)return!1;p++,te==="MultiPoint"&&V++}te==="LineString"&&V++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-d;i++){if(e(l[r][i],p,A,V,Y)===!1)return!1;p++}te==="MultiLineString"&&V++,te==="Polygon"&&Y++}te==="Polygon"&&V++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(Y=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-d;s++){if(e(l[r][i][s],p,A,V,Y)===!1)return!1;p++}Y++}V++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(NE(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function yz(t,e){var n,r,i,s,o,a,l,c,d,p,v=0,m=t.type==="FeatureCollection",x=t.type==="Feature",E=m?t.features.length:1;for(n=0;n<E;n++){for(a=m?t.features[n].geometry:x?t.geometry:t,c=m?t.features[n].properties:x?t.properties:{},d=m?t.features[n].bbox:x?t.bbox:void 0,p=m?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,d,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,d,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,d,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function bz(t,e){yz(t,function(n,r,i,s,o){var a=n===null?null:n.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(Ap(n,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<n.coordinates.length;c++){var d=n.coordinates[c],p={type:l,coordinates:d};if(e(Ap(p,i),r,c)===!1)return!1}})}function _z(t,e){bz(t,function(n,r,i){var s=0;if(n.geometry){var o=n.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,c=0,d=0;if(NE(n,function(p,v,m,x,E){if(a===void 0||r>l||x>c||E>d){a=p,l=r,c=x,d=E,s=0;return}var k=Wu([a,p],n.properties);if(e(k,r,i,E,s)===!1)return!1;s++,a=p})===!1)return!1}}})}function wz(t,e,n){var r=n,i=!1;return _z(t,function(s,o,a,l,c){i===!1&&n===void 0?r=s:r=e(r,s,o,a,l,c),i=!0}),r}function Gv(t,e={}){return wz(t,(n,r)=>{const i=r.geometry.coordinates;return n+$_(i[0],i[1],e)},0)}var Gd=Gv;class cd extends Yn.Polygon{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Ze(this,"properties");this.properties=gn.measure("Polygon.constructor.initProperties",()=>({type:"Polygon",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{color:r.color||"#2b6451",weight:r.weight||3,opacity:r.opacity||1,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity||.2,dashArray:r.dashArray||"",name:r.name||""}})),this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){gn.measure("Polygon.updateProperties",()=>{var n,r,i,s,o;try{const a=this.getLatLngs()[0];if(!a||a.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const l=a.map(A=>[A.lng,A.lat]);l.push(l[0]);const c=Hu([l]),d=PE(c),p=Gv(Wu([...l]),{units:"meters"}),v=Wg(c),m=Yn.latLng(v.geometry.coordinates[1],v.geometry.coordinates[0]),x=((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||"",E=((i=this.properties)==null?void 0:i.category)||"forages",k=((s=this.properties)==null?void 0:s.accessLevel)||"visitor";this.properties={type:"Polygon",coordinates:a.map(A=>({lat:A.lat,lng:A.lng})),surface:d,perimeter:p,center:{lat:m.lat,lng:m.lng},vertices:a.length,category:E,accessLevel:k,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:x}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate polygon properties",a)}})}setName(n){gn.measure("Polygon.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return gn.measure("Polygon.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}setLatLngs(n){return gn.measure("Polygon.setLatLngs",()=>(super.setLatLngs(n),this.updateProperties(),this))}getMidPoints(){return gn.measure("Polygon.getMidPoints",()=>{const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(Yn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return r})}moveVertex(n,r){gn.measure("Polygon.moveVertex",()=>{const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i[n]=r,Yn.Polygon.prototype.setLatLngs.call(this,[i]))})}addVertex(n,r){gn.measure("Polygon.addVertex",()=>{const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i.splice((n+1)%i.length,0,r),Yn.Polygon.prototype.setLatLngs.call(this,[i]))})}move(n){return gn.measure("Polygon.move",()=>{const i=this.getLatLngs()[0].map(s=>Yn.latLng(s.lat+n.lat,s.lng+n.lng));return Yn.Polygon.prototype.setLatLngs.call(this,[i]),this})}getCenter(){return gn.measure("Polygon.getCenter",()=>{const n=this.getLatLngs()[0];if(!n||n.length===0)return new Yn.LatLng(0,0);try{const r=n.filter(c=>c&&typeof c.lat=="number"&&typeof c.lng=="number"&&!isNaN(c.lat)&&!isNaN(c.lng)&&Math.abs(c.lat)<=90&&Math.abs(c.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new Yn.LatLng(0,0);const i=r.map(c=>[c.lng,c.lat]);i.push(i[0]);const s=Hu([i]),o=Wg(s),a=o.geometry.coordinates[1],l=o.geometry.coordinates[0];if(typeof a!="number"||typeof l!="number"||isNaN(a)||isNaN(l)||Math.abs(a)>90||Math.abs(l)>180)throw new Error("Centroid calculé invalide");return Yn.latLng(a,l)}catch(r){console.warn("Erreur lors du calcul du centroïde avec turf.js, utilisation de la méthode simple",r);let i=0,s=0,o=0;for(const a of n)a&&typeof a.lat=="number"&&typeof a.lng=="number"&&!isNaN(a.lat)&&!isNaN(a.lng)&&Math.abs(a.lat)<=90&&Math.abs(a.lng)<=180&&(i+=a.lat,s+=a.lng,o++);return o===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new Yn.LatLng(0,0)):new Yn.LatLng(i/o,s/o)}})}getSegmentLengths(){return gn.measure("Polygon.getSegmentLengths",()=>{const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(s.distanceTo(o))}return r})}}class na extends Yn.Polyline{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Ze(this,"properties");Ze(this,"cachedProperties",{});Ze(this,"needsUpdate",!0);this.properties=gn.measure("Line.constructor.initProperties",()=>({type:"Line",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...r||{},name:r.name||""}})),this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){gn.measure("Line.updateProperties",()=>{var i,s,o,a,l;const n=this.getLatLngs();if(!n||n.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=n.map(c=>[c.lng,c.lat]);try{const c=Wu(r),d=Gv(c,{units:"meters"});let p;if(n.length===2)p=Yn.latLng((n[0].lat+n[1].lat)/2,(n[0].lng+n[1].lng)/2);else{const k=yb(c,d/2,{units:"meters"});p=Yn.latLng(k.geometry.coordinates[1],k.geometry.coordinates[0])}const v=10,m=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"",x=((o=this.properties)==null?void 0:o.category)||"forages",E=((a=this.properties)==null?void 0:a.accessLevel)||"visitor";this.properties={type:"Line",length:d,coordinates:n.map(k=>({lat:k.lat,lng:k.lng})),center:{lat:p.lat,lng:p.lng},vertices:n.length,surfaceInfluence:d*v,dimensions:{width:v},category:x,accessLevel:E,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((l=this.options)==null?void 0:l.dashArray)||"",name:m}},this.cachedProperties.length=d,this.cachedProperties.center=p,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(c){console.error("Failed to calculate line properties",c)}})}setName(n){gn.measure("Line.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return gn.measure("Line.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}invalidateCache(){gn.measure("Line.invalidateCache",()=>{this.needsUpdate=!0,this.cachedProperties={}})}setLatLngs(n){return super.setLatLngs(n),this.needsUpdate=!0,this.cachedProperties={},this.fire("latlngs:updated",{latlngs:this.getLatLngs()}),this}getMidPoints(){return gn.measure("Line.getMidPoints",()=>{if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];if(!s||!o){console.warn("Points invalides détectés pour le segment",i);continue}r.push(Yn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return this.cachedProperties.midPoints=r,r})}getMidPointAt(n){return gn.measure("Line.getMidPointAt",()=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return null;const i=r[n],s=r[n+1];return!i||!s?(console.warn("Points invalides pour calcul du midpoint au segment",n),null):Yn.latLng((i.lat+s.lat)/2,(i.lng+s.lng)/2)})}moveVertex(n,r,i=!1){gn.measure("Line.moveVertex",()=>{const s=this.getLatLngs();n>=0&&n<s.length&&(s[n]=r,this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("vertex:moved",{index:n,latlng:r,allPoints:s}),i&&this.updateProperties())})}addVertex(n,r,i=!1){gn.measure("Line.addVertex",()=>{const s=this.getLatLngs();n>=0&&n<s.length-1&&(s.splice(n+1,0,r),Yn.Polyline.prototype.setLatLngs.call(this,s),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,i&&this.updateProperties())})}move(n,r=!0){return gn.measure("Line.move",()=>{this.fire("move:start");const i=this.getLatLngs(),s=i.map(o=>Yn.latLng(o.lat+n.lat,o.lng+n.lng));return this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("move",{delta:n,newPositions:s,oldPositions:i}),r&&(this.updateProperties(),this.fire("properties:updated",{shape:this,properties:this.properties}),this.fire("move:end")),this})}getCenter(){return gn.measure("Line.getCenter",()=>{if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const n=this.getLatLngs();if(n.length<2)return n[0]||new Yn.LatLng(0,0);try{const r=n.map(l=>[l.lng,l.lat]),i=Wu(r),s=Gv(i,{units:"meters"}),o=yb(i,s/2,{units:"meters"}),a=Yn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0]);return this.cachedProperties.center=a,a}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const i=n.reduce((a,l)=>a+l.lat,0)/n.length,s=n.reduce((a,l)=>a+l.lng,0)/n.length,o=new Yn.LatLng(i,s);return this.cachedProperties.center=o,o}})}getSegmentLengths(){return gn.measure("Line.getSegmentLengths",()=>{if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];r.push(s.distanceTo(o))}return this.cachedProperties.segmentLengths=r,r})}getSegmentLengthAt(n){return gn.measure("Line.getSegmentLengthAt",()=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return 0;const i=r[n],s=r[n+1];return i.distanceTo(s)})}getLengthToVertex(n){return gn.measure("Line.getLengthToVertex",()=>{const r=this.getLatLngs();let i=0;if(n<=0||r.length<2)return 0;for(let s=0;s<Math.min(n,r.length-1);s++)i+=r[s].distanceTo(r[s+1]);return i})}getLength(){return gn.measure("Line.getLength",()=>{if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const n=this.getLatLngs();let r=0;for(let i=0;i<n.length-1;i++)r+=n[i].distanceTo(n[i+1]);return this.cachedProperties.length=r,r})}}const Pl=class Pl extends na{constructor(n,r={}){super(n,{...r,color:"#FF4500",weight:4,opacity:.8,interactive:!1,pmIgnore:!0});Ze(this,"elevationData",[]);Ze(this,"elevationProfile",null);Ze(this,"elevationMarker",null);Ze(this,"isZooming",!1);Ze(this,"simpleLine",null);Ze(this,"isDestroyed",!1);Ze(this,"zoomAnimationTimeout",null);this.properties=gn.measure("ElevationLine.constructor.initProperties",()=>({...this.properties,type:"ElevationLine",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...this.properties.style||{},name:r.name||""},elevationProfile:null,maxElevation:0,minElevation:0,elevationGain:0,elevationLoss:0,dataSource:"pending"})),this.setupEventListeners()}setupEventListeners(){gn.measure("ElevationLine.setupEventListeners",()=>{this.on("move",()=>this.updateElevationProfile()),this.on("add",()=>{this._map&&(this._map.on("zoomstart",this.handleZoomStart,this),this._map.on("zoomend",this.handleZoomEnd,this),this._map.on("zoomanim",this._animateZoom,this))}),this.on("remove",()=>{this.cleanupEventListeners()})})}cleanupEventListeners(){this._map&&(this._map.off("zoomstart",this.handleZoomStart,this),this._map.off("zoomend",this.handleZoomEnd,this),this._map.off("zoomanim",this._animateZoom,this)),this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null)}_animateZoom(n){if(this.isDestroyed||!this._map||!this.getLatLngs().length){console.debug("[ElevationLine] Animation de zoom ignorée - ligne détruite ou carte non disponible");return}this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null);try{this.elevationMarker&&this.elevationMarker.remove();const r=this._path;r&&(r.style.display="none");const i=this.getLatLngs();if(i&&i.length>0&&this._map&&!this.isDestroyed){if(!this._map.getContainer()){console.debug("[ElevationLine] Carte non valide pendant l'animation de zoom");return}if(this.simpleLine?this.simpleLine.setLatLngs(i):(this.simpleLine=Yn.polyline(i,{color:"#FF4500",weight:3,opacity:.6,smoothFactor:1,interactive:!1}),this._map&&this._map.getContainer()&&this.simpleLine.addTo(this._map)),this.simpleLine&&this.simpleLine._path){const s=this.simpleLine._path.style.transform;this.simpleLine._path.style.transform="",this.zoomAnimationTimeout=setTimeout(()=>{if(this.isDestroyed||!this._map||!this._map.getContainer()){this.cleanup();return}try{this.simpleLine&&this.simpleLine._path&&(this.simpleLine._path.style.transform=s,this.simpleLine._path.style.display=""),r&&!this.isDestroyed&&(r.style.display=""),this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(o){console.warn("[ElevationLine] Erreur lors de la restauration après animation:",o),this.cleanup()}},300)}}}catch(r){console.debug("[ElevationLine] Animation de zoom ignorée:",r),this.zoomAnimationTimeout=setTimeout(()=>{if(this.isDestroyed||!this._map||!this._map.getContainer()){this.cleanup();return}try{this._path&&(this._path.style.display=""),this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(i){console.error("[ElevationLine] Erreur lors de la restauration après animation:",i),this.cleanup()}},300)}}handleZoomStart(){this.isDestroyed||gn.measure("ElevationLine.handleZoomStart",()=>{if(!(this.isZooming||!this._map)){this.isZooming=!0;try{this.elevationMarker&&this.elevationMarker.remove();const n=this._path;n&&(n.style.display="none"),this.isDestroyed||this.setStyle({opacity:.3})}catch(n){console.error("[ElevationLine] Error in handleZoomStart:",n),this.cleanup()}}})}handleZoomEnd(){this.isDestroyed||gn.measure("ElevationLine.handleZoomEnd",()=>{if(!this._map){this.isZooming=!1;return}try{this.simpleLine&&this._map&&(this.simpleLine.remove(),this.simpleLine=null);const n=this._path;n&&(n.style.display=""),this.isDestroyed||this.setStyle({opacity:.8}),this.zoomAnimationTimeout&&clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=setTimeout(()=>{if(!(this.isDestroyed||!this._map))try{this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(r){console.warn("[ElevationLine] Erreur lors du redraw après zoom:",r),this.cleanup()}},50)}catch(n){console.error("[ElevationLine] Error in handleZoomEnd:",n)}finally{this.isZooming=!1}})}cleanup(){gn.measure("ElevationLine.cleanup",()=>{if(this.isZooming=!1,this.hideElevationMarker(),this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null),this.simpleLine&&this._map){try{this.simpleLine.remove()}catch(r){console.error("[ElevationLine] Error removing simpleLine:",r)}this.simpleLine=null}if(this.elevationProfile){try{this.elevationProfile.remove()}catch(r){console.error("[ElevationLine] Error removing elevationProfile:",r)}this.elevationProfile=null}const n=this._path;n&&(n.style.display=""),!this.isDestroyed&&this._map&&this._map.hasLayer(this)&&this.setStyle({opacity:.8})})}calculateOptimalSampleCount(){return gn.measure("ElevationLine.calculateOptimalSampleCount",()=>{const n=this.getLength(),r=Math.ceil(n/Pl.SAMPLE_DISTANCE);return Math.min(Math.max(r,Pl.MIN_SAMPLES),Pl.MAX_SAMPLES)})}async fetchElevationData(n=0){return gn.measure("ElevationLine.fetchElevationData",async()=>{if(this.getLatLngs().length===0)return;const i=this.getLength();let s="";const o=this.calculateOptimalSampleCount();console.log(`[ElevationLine] Using ${o} sample points for ${i.toFixed(0)}m line`);const a=[];for(let l=0;l<o;l++){const c=l/(o-1)*i,d=this.getPointAtDistance(c);d&&a.push(`${d.lat},${d.lng}`)}s=a.join("|");try{const l=await fetch(`${Pl.API_URL}?locations=${s}`);if(!l.ok)throw new Error(`HTTP error ${l.status}`);const c=await l.json();if(!c.results||!Array.isArray(c.results))throw new Error("Invalid API response format");this.elevationData=c.results.map((d,p)=>({distance:p/(o-1)*i,elevation:d.elevation})),this.properties.dataSource="api"}catch(l){if(console.warn(`[ElevationLine] API fetch attempt ${n+1}/${Pl.MAX_RETRIES} failed:`,l),n<Pl.MAX_RETRIES)return await new Promise(c=>setTimeout(c,Pl.RETRY_DELAY)),this.fetchElevationData(n+1);console.warn("[ElevationLine] All API attempts failed, falling back to simulation"),this.simulateElevationData(),this.properties.dataSource="simulation"}this.calculateElevationStatistics()})}simulateElevationData(){gn.measure("ElevationLine.simulateElevationData",()=>{const n=this.getLength(),r=this.calculateOptimalSampleCount();this.elevationData=Array.from({length:r},(i,s)=>{const o=s/(r-1)*n,a=100+Math.sin(o/n*Math.PI*2)*50;return{distance:o,elevation:a}})})}calculateElevationStatistics(){gn.measure("ElevationLine.calculateElevationStatistics",()=>{if(!this.elevationData.length)return;const n=this.elevationData.map(d=>d.elevation),r=n.length?Math.max(...n):0,i=n.length?Math.min(...n):0;let s=0,o=0,a=0,l=0,c=0;console.log("[ElevationLine][calculateElevationStatistics] Données brutes:",{elevationsCount:n.length,maxElevation:r,minElevation:i});for(let d=1;d<this.elevationData.length;d++){const p=this.elevationData[d-1],v=this.elevationData[d],m=v.elevation-p.elevation;m>0?s+=m:o+=Math.abs(m);const x=v.distance-p.distance;if(x>0){const E=m/x*100;a=Math.max(a,Math.abs(E)),l+=Math.abs(E),c++}}console.log("[ElevationLine][calculateElevationStatistics] Calculs intermédiaires:",{gain:s,loss:o,maxSlope:a,averageSlope:c>0?l/c:0}),this.properties={...this.properties,type:"ElevationLine",maxElevation:r,minElevation:i,elevationGain:s,elevationLoss:o,maxSlope:a,averageSlope:c>0?l/c:0,elevationData:this.elevationData,dataSource:this.properties.dataSource,length:this.getLength()},console.log("[ElevationLine][calculateElevationStatistics] Propriétés mises à jour:",this.properties)})}showElevationAt(n){gn.measure("ElevationLine.showElevationAt",()=>{if(!(!this.elevationData.length||!this._map))try{const r=this.elevationData.reduce((s,o)=>Math.abs(o.distance-n)<Math.abs(s.distance-n)?o:s),i=this.getPointAtDistance(n);if(!i)return;this.elevationMarker?(this.elevationMarker.setLatLng(i),this.elevationMarker.setTooltipContent(`Distance: ${this.formatDistance(r.distance)}<br>Altitude: ${this.formatElevation(r.elevation)}`)):(this.elevationMarker=Yn.circleMarker(i,{radius:6,color:"#FF4500",fillColor:"#FF4500",fillOpacity:1,weight:2,className:"elevation-marker"}),this.elevationMarker.bindTooltip(`Distance: ${this.formatDistance(r.distance)}<br>Altitude: ${this.formatElevation(r.elevation)}`,{permanent:!0,direction:"top",offset:[0,-10],className:"elevation-marker-tooltip"}),this._map&&this._map.hasLayer(this)&&this.elevationMarker.addTo(this._map)),this.fire("elevation:show",{distance:n,elevation:r.elevation,latLng:i})}catch(r){console.error("[ElevationLine] Erreur lors de l'affichage de l'élévation:",r),this.hideElevationMarker()}})}hideElevationMarker(){gn.measure("ElevationLine.hideElevationMarker",()=>{this.elevationMarker&&(this.elevationMarker.remove(),this.elevationMarker=null)})}getPointAtDistance(n){return gn.measure("ElevationLine.getPointAtDistance",()=>{try{const i=this.getLatLngs().map(a=>[a.lng,a.lat]),s=Wu(i),o=yb(s,n,{units:"meters"});return Yn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0])}catch(r){return console.error("Error calculating point at distance",r),null}})}moveVertex(n,r,i=!1){gn.measure("ElevationLine.moveVertex",()=>{super.moveVertex(n,r,!1),this.properties.type="ElevationLine",i&&this.updateElevationProfile()})}addVertex(n,r,i=!1){gn.measure("ElevationLine.addVertex",()=>{console.warn("[ElevationLine] Tentative d'ajout de vertex ignorée - non autorisé pour un profil altimétrique")})}setLatLngs(n){return gn.measure("ElevationLine.setLatLngs",()=>(super.setLatLngs(n),this.properties.type="ElevationLine",this.updateElevationProfile(),this))}move(n,r=!0){return gn.measure("ElevationLine.move",()=>(super.move(n,!1),this.properties.type="ElevationLine",r&&this.updateElevationProfile(),this))}setName(n){gn.measure("ElevationLine.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return gn.measure("ElevationLine.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}formatDistance(n){return gn.measure("ElevationLine.formatDistance",()=>n>=1e3?`${(n/1e3).toFixed(2)} km`:`${n.toFixed(0)} m`)}formatElevation(n){return gn.measure("ElevationLine.formatElevation",()=>`${n.toFixed(0)} m`)}onAdd(n){return gn.measure("ElevationLine.onAdd",()=>(super.onAdd(n),this))}onRemove(n){return this.isDestroyed=!0,this.cleanupEventListeners(),this.cleanup(),super.onRemove(n)}async updateElevationProfile(){return gn.measure("ElevationLine.updateElevationProfile",async()=>{try{if(this.properties.elevationData&&this.properties.dataSource==="restored"){this.elevationData=this.properties.elevationData,this.calculateElevationStatistics(),this._map&&this._map.hasLayer(this)&&this.redraw(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties});return}await this.fetchElevationData(),this.updateProperties(),this._map&&this._map.hasLayer(this)&&this.redraw(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties})}catch(n){console.error("[ElevationLine] Erreur lors de la mise à jour du profil d'élévation:",n),this.properties.dataSource="error"}})}updateProperties(){gn.measure("ElevationLine.updateProperties",()=>{var n,r;if(super.updateProperties(),this.elevationData&&this.elevationData.length>0){const i=this.elevationData.map(k=>k.elevation),s=Math.max(...i),o=Math.min(...i);let a=0,l=0,c=0,d=0,p=0;for(let k=1;k<this.elevationData.length;k++){const A=this.elevationData[k-1],D=this.elevationData[k],V=D.elevation-A.elevation;V>0?a+=V:l+=Math.abs(V);const Y=D.distance-A.distance;if(Y>0){const te=V/Y*100;c=Math.max(c,Math.abs(te)),d+=Math.abs(te),p++}}const m=this.getLatLngs().map(k=>({lat:k.lat,lng:k.lng})),x=((n=this.properties)==null?void 0:n.category)||"forages",E=((r=this.properties)==null?void 0:r.accessLevel)||"visitor";this.properties={...this.properties,type:"ElevationLine",coordinates:m,elevationData:this.elevationData.map(k=>({distance:k.distance,elevation:k.elevation})),maxElevation:s,minElevation:o,elevationGain:a,elevationLoss:l,maxSlope:c,averageSlope:p>0?d/p:0,dataSource:this.properties.dataSource||"api",category:x,accessLevel:E},this.fire("properties:updated",{shape:this,properties:this.properties})}})}getElevationData(){return gn.measure("ElevationLine.getElevationData",()=>this.elevationData)}};Ze(Pl,"API_URL","https://api.open-elevation.com/api/v1/lookup"),Ze(Pl,"RETRY_DELAY",2e3),Ze(Pl,"MAX_RETRIES",3),Ze(Pl,"SAMPLE_DISTANCE",100),Ze(Pl,"MIN_SAMPLES",10),Ze(Pl,"MAX_SAMPLES",50);let Sd=Pl;var qv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */qv.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,d="__lodash_placeholder__",p=1,v=2,m=4,x=1,E=2,k=1,A=2,D=4,V=8,Y=16,te=32,ge=64,fe=128,I=256,F=512,K=30,B="...",N=800,j=16,z=1,U=2,$=3,re=1/0,Q=9007199254740991,_e=17976931348623157e292,we=NaN,nt=4294967295,ae=nt-1,H=nt>>>1,Z=[["ary",fe],["bind",k],["bindKey",A],["curry",V],["curryRight",Y],["flip",F],["partial",te],["partialRight",ge],["rearg",I]],me="[object Arguments]",pe="[object Array]",de="[object AsyncFunction]",X="[object Boolean]",J="[object Date]",De="[object DOMException]",Te="[object Error]",Je="[object Function]",he="[object GeneratorFunction]",ee="[object Map]",se="[object Number]",le="[object Null]",ze="[object Object]",Se="[object Promise]",ve="[object Proxy]",$e="[object RegExp]",Ge="[object Set]",Xe="[object String]",lt="[object Symbol]",qe="[object Undefined]",Lt="[object WeakMap]",Gt="[object WeakSet]",rn="[object ArrayBuffer]",yn="[object DataView]",Ye="[object Float32Array]",at="[object Float64Array]",it="[object Int8Array]",Vt="[object Int16Array]",Yt="[object Int32Array]",In="[object Uint8Array]",Sn="[object Uint8ClampedArray]",Nn="[object Uint16Array]",Qn="[object Uint32Array]",Xt=/\b__p \+= '';/g,Cn=/\b(__p \+=) '' \+/g,Dn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,rr=/&(?:amp|lt|gt|quot|#39);/g,Zn=/[&<>"']/g,_r=RegExp(rr.source),ir=RegExp(Zn.source),qr=/<%-([\s\S]+?)%>/g,Os=/<%([\s\S]+?)%>/g,ls=/<%=([\s\S]+?)%>/g,ft=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,rt=/^\w*$/,wt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kn=/[\\^$.*+?()[\]{}|]/g,Hn=RegExp(kn.source),wn=/^\s+/,bt=/\s/,Et=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ln=/\{\n\/\* \[wrapped with (.+)\] \*/,Jt=/,? & /,Ln=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Nr=/[()=,{}\[\]\/\s]/,sn=/\\(\\)?/g,tn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,jn=/\w*$/,zr=/^[-+]0x[0-9a-f]+$/i,ki=/^0b[01]+$/i,zi=/^\[object .+?Constructor\]$/,Qr=/^0o[0-7]+$/i,ur=/^(?:0|[1-9]\d*)$/,wr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Rr=/($^)/,Lr=/['\n\r\u2028\u2029\\]/g,un="\\ud800-\\udfff",ss="\\u0300-\\u036f",pi="\\ufe20-\\ufe2f",Ki="\\u20d0-\\u20ff",$i=ss+pi+Ki,Ni="\\u2700-\\u27bf",Pr="a-z\\xdf-\\xf6\\xf8-\\xff",Mr="\\xac\\xb1\\xd7\\xf7",Yo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Xs="\\u2000-\\u206f",An=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pn="A-Z\\xc0-\\xd6\\xd8-\\xde",En="\\ufe0e\\ufe0f",gi=Mr+Yo+Xs+An,mi="['’]",Zi="["+un+"]",Xn="["+gi+"]",kr="["+$i+"]",zs="\\d+",vr="["+Ni+"]",ps="["+Pr+"]",us="[^"+un+gi+zs+Ni+Pr+Pn+"]",Ss="\\ud83c[\\udffb-\\udfff]",Yr="(?:"+kr+"|"+Ss+")",bn="[^"+un+"]",cn="(?:\\ud83c[\\udde6-\\uddff]){2}",$r="[\\ud800-\\udbff][\\udc00-\\udfff]",Gi="["+Pn+"]",Ao="\\u200d",To="(?:"+ps+"|"+us+")",Ol="(?:"+Gi+"|"+us+")",Ns="(?:"+mi+"(?:d|ll|m|re|s|t|ve))?",ia="(?:"+mi+"(?:D|LL|M|RE|S|T|VE))?",oi=Yr+"?",Pa="["+En+"]?",xi="(?:"+Ao+"(?:"+[bn,cn,$r].join("|")+")"+Pa+oi+")*",sa="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Do="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",yr=Pa+oi+xi,xr="(?:"+[vr,cn,$r].join("|")+")"+yr,Ko="(?:"+[bn+kr+"?",kr,cn,$r,Zi].join("|")+")",Vr=RegExp(mi,"g"),ml=RegExp(kr,"g"),ga=RegExp(Ss+"(?="+Ss+")|"+Ko+yr,"g"),Ha=RegExp([Gi+"?"+ps+"+"+Ns+"(?="+[Xn,Gi,"$"].join("|")+")",Ol+"+"+ia+"(?="+[Xn,Gi+To,"$"].join("|")+")",Gi+"?"+To+"+"+Ns,Gi+"+"+ia,Do,sa,zs,xr].join("|"),"g"),ei=RegExp("["+Ao+un+$i+En+"]"),Js=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Qs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ou=-1,Cr={};Cr[Ye]=Cr[at]=Cr[it]=Cr[Vt]=Cr[Yt]=Cr[In]=Cr[Sn]=Cr[Nn]=Cr[Qn]=!0,Cr[me]=Cr[pe]=Cr[rn]=Cr[X]=Cr[yn]=Cr[J]=Cr[Te]=Cr[Je]=Cr[ee]=Cr[se]=Cr[ze]=Cr[$e]=Cr[Ge]=Cr[Xe]=Cr[Lt]=!1;var Kr={};Kr[me]=Kr[pe]=Kr[rn]=Kr[yn]=Kr[X]=Kr[J]=Kr[Ye]=Kr[at]=Kr[it]=Kr[Vt]=Kr[Yt]=Kr[ee]=Kr[se]=Kr[ze]=Kr[$e]=Kr[Ge]=Kr[Xe]=Kr[lt]=Kr[In]=Kr[Sn]=Kr[Nn]=Kr[Qn]=!0,Kr[Te]=Kr[Je]=Kr[Lt]=!1;var vl={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Mc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},au={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Mu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Nl=parseFloat,lu=parseInt,ku=typeof Ca=="object"&&Ca&&Ca.Object===Object&&Ca,ti=typeof self=="object"&&self&&self.Object===Object&&self,ms=ku||ti||Function("return this")(),dr=e&&!e.nodeType&&e,vs=dr&&!0&&t&&!t.nodeType&&t,Il=vs&&vs.exports===dr,Wa=Il&&ku.process,Xi=function(){try{var St=vs&&vs.require&&vs.require("util").types;return St||Wa&&Wa.binding&&Wa.binding("util")}catch{}}(),Au=Xi&&Xi.isArrayBuffer,Ma=Xi&&Xi.isDate,uu=Xi&&Xi.isMap,cu=Xi&&Xi.isRegExp,oa=Xi&&Xi.isSet,hu=Xi&&Xi.isTypedArray;function Li(St,qt,It){switch(It.length){case 0:return St.call(qt);case 1:return St.call(qt,It[0]);case 2:return St.call(qt,It[0],It[1]);case 3:return St.call(qt,It[0],It[1],It[2])}return St.apply(qt,It)}function kc(St,qt,It,Rn){for(var tr=-1,Sr=St==null?0:St.length;++tr<Sr;){var Ji=St[tr];qt(Rn,Ji,It(Ji),St)}return Rn}function $s(St,qt){for(var It=-1,Rn=St==null?0:St.length;++It<Rn&&qt(St[It],It,St)!==!1;);return St}function ma(St,qt){for(var It=St==null?0:St.length;It--&&qt(St[It],It,St)!==!1;);return St}function du(St,qt){for(var It=-1,Rn=St==null?0:St.length;++It<Rn;)if(!qt(St[It],It,St))return!1;return!0}function va(St,qt){for(var It=-1,Rn=St==null?0:St.length,tr=0,Sr=[];++It<Rn;){var Ji=St[It];qt(Ji,It,St)&&(Sr[tr++]=Ji)}return Sr}function Bl(St,qt){var It=St==null?0:St.length;return!!It&&pn(St,qt,0)>-1}function Rl(St,qt,It){for(var Rn=-1,tr=St==null?0:St.length;++Rn<tr;)if(It(qt,St[Rn]))return!0;return!1}function Si(St,qt){for(var It=-1,Rn=St==null?0:St.length,tr=Array(Rn);++It<Rn;)tr[It]=qt(St[It],It,St);return tr}function Zo(St,qt){for(var It=-1,Rn=qt.length,tr=St.length;++It<Rn;)St[tr+It]=qt[It];return St}function Ga(St,qt,It,Rn){var tr=-1,Sr=St==null?0:St.length;for(Rn&&Sr&&(It=St[++tr]);++tr<Sr;)It=qt(It,St[tr],tr,St);return It}function ys(St,qt,It,Rn){var tr=St==null?0:St.length;for(Rn&&tr&&(It=St[--tr]);tr--;)It=qt(It,St[tr],tr,St);return It}function R(St,qt){for(var It=-1,Rn=St==null?0:St.length;++It<Rn;)if(qt(St[It],It,St))return!0;return!1}var xe=br("length");function Qe(St){return St.split("")}function dt(St){return St.match(Ln)||[]}function kt(St,qt,It){var Rn;return It(St,function(tr,Sr,Ji){if(qt(tr,Sr,Ji))return Rn=Sr,!1}),Rn}function Ut(St,qt,It,Rn){for(var tr=St.length,Sr=It+(Rn?1:-1);Rn?Sr--:++Sr<tr;)if(qt(St[Sr],Sr,St))return Sr;return-1}function pn(St,qt,It){return qt===qt?Is(St,qt,It):Ut(St,Wn,It)}function zn(St,qt,It,Rn){for(var tr=It-1,Sr=St.length;++tr<Sr;)if(Rn(St[tr],qt))return tr;return-1}function Wn(St){return St!==St}function cr(St,qt){var It=St==null?0:St.length;return It?Ci(St,qt)/It:we}function br(St){return function(qt){return qt==null?n:qt[St]}}function Ur(St){return function(qt){return St==null?n:St[qt]}}function qi(St,qt,It,Rn,tr){return tr(St,function(Sr,Ji,Ei){It=Rn?(Rn=!1,Sr):qt(It,Sr,Ji,Ei)}),It}function vi(St,qt){var It=St.length;for(St.sort(qt);It--;)St[It]=St[It].value;return St}function Ci(St,qt){for(var It,Rn=-1,tr=St.length;++Rn<tr;){var Sr=qt(St[Rn]);Sr!==n&&(It=It===n?Sr:It+Sr)}return It}function bs(St,qt){for(var It=-1,Rn=Array(St);++It<St;)Rn[It]=qt(It);return Rn}function Cs(St,qt){return Si(qt,function(It){return[It,St[It]]})}function Xo(St){return St&&St.slice(0,Ya(St)+1).replace(wn,"")}function Hr(St){return function(qt){return St(qt)}}function eo(St,qt){return Si(qt,function(It){return St[It]})}function Fl(St,qt){return St.has(qt)}function mo(St,qt){for(var It=-1,Rn=St.length;++It<Rn&&pn(qt,St[It],0)>-1;);return It}function Tu(St,qt){for(var It=St.length;It--&&pn(qt,St[It],0)>-1;);return It}function ka(St,qt){for(var It=St.length,Rn=0;It--;)St[It]===qt&&++Rn;return Rn}var Qu=Ur(vl),yl=Ur(Mc);function bl(St){return"\\"+Mu[St]}function Es(St,qt){return St==null?n:St[qt]}function Aa(St){return ei.test(St)}function Jo(St){return Js.test(St)}function Oo(St){for(var qt,It=[];!(qt=St.next()).done;)It.push(qt.value);return It}function jl(St){var qt=-1,It=Array(St.size);return St.forEach(function(Rn,tr){It[++qt]=[tr,Rn]}),It}function to(St,qt){return function(It){return St(qt(It))}}function vo(St,qt){for(var It=-1,Rn=St.length,tr=0,Sr=[];++It<Rn;){var Ji=St[It];(Ji===qt||Ji===d)&&(St[It]=d,Sr[tr++]=It)}return Sr}function yo(St){var qt=-1,It=Array(St.size);return St.forEach(function(Rn){It[++qt]=Rn}),It}function Ac(St){var qt=-1,It=Array(St.size);return St.forEach(function(Rn){It[++qt]=[Rn,Rn]}),It}function Is(St,qt,It){for(var Rn=It-1,tr=St.length;++Rn<tr;)if(St[Rn]===qt)return Rn;return-1}function qa(St,qt,It){for(var Rn=It+1;Rn--;)if(St[Rn]===qt)return Rn;return Rn}function no(St){return Aa(St)?io(St):xe(St)}function ro(St){return Aa(St)?Vs(St):Qe(St)}function Ya(St){for(var qt=St.length;qt--&&bt.test(St.charAt(qt)););return qt}var Ka=Ur(au);function io(St){for(var qt=ga.lastIndex=0;ga.test(St);)++qt;return qt}function Vs(St){return St.match(ga)||[]}function Ta(St){return St.match(Ha)||[]}var Qo=function St(qt){qt=qt==null?ms:so.defaults(ms.Object(),qt,so.pick(ms,Qs));var It=qt.Array,Rn=qt.Date,tr=qt.Error,Sr=qt.Function,Ji=qt.Math,Ei=qt.Object,fu=qt.RegExp,bo=qt.String,Qi=qt.TypeError,Da=It.prototype,Za=Sr.prototype,Oa=Ei.prototype,Na=qt["__core-js_shared__"],Ia=Za.toString,ni=Oa.hasOwnProperty,ya=0,Us=function(){var f=/[^.]+$/.exec(Na&&Na.keys&&Na.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),Pi=Oa.toString,Ii=Ia.call(Ei),_s=ms._,Ui=fu("^"+Ia.call(ni).replace(kn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ea=Il?qt.Buffer:n,No=qt.Symbol,aa=qt.Uint8Array,ec=ea?ea.allocUnsafe:n,Ba=to(Ei.getPrototypeOf,Ei),Ps=Ei.create,Vi=Oa.propertyIsEnumerable,oo=Da.splice,Io=No?No.isConcatSpreadable:n,mr=No?No.iterator:n,Xa=No?No.toStringTag:n,Ja=function(){try{var f=zd(Ei,"defineProperty");return f({},"",{}),f}catch{}}(),ba=qt.clearTimeout!==ms.clearTimeout&&qt.clearTimeout,_o=Rn&&Rn.now!==ms.Date.now&&Rn.now,ih=qt.setTimeout!==ms.setTimeout&&qt.setTimeout,Hs=Ji.ceil,Ws=Ji.floor,_a=Ei.getOwnPropertySymbols,u=ea?ea.isBuffer:n,y=qt.isFinite,P=Da.join,G=to(Ei.keys,Ei),ue=Ji.max,Pe=Ji.min,ut=Rn.now,Nt=qt.parseInt,Ht=Ji.random,hn=Da.reverse,$n=zd(qt,"DataView"),sr=zd(qt,"Map"),jr=zd(qt,"Promise"),Ms=zd(qt,"Set"),cs=zd(qt,"WeakMap"),Gs=zd(Ei,"create"),es=cs&&new cs,Bo={},sh=$d($n),Ra=$d(sr),wa=$d(jr),la=$d(Ms),Od=$d(cs),Du=No?No.prototype:n,bi=Du?Du.valueOf:n,ao=Du?Du.toString:n;function Ne(f){if(wo(f)&&!ii(f)&&!(f instanceof Wr)){if(f instanceof qs)return f;if(ni.call(f,"__wrapped__"))return qw(f)}return new qs(f)}var Ro=function(){function f(){}return function(b){if(!uo(b))return{};if(Ps)return Ps(b);f.prototype=b;var O=new f;return f.prototype=n,O}}();function tc(){}function qs(f,b){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=n}Ne.templateSettings={escape:qr,evaluate:Os,interpolate:ls,variable:"",imports:{_:Ne}},Ne.prototype=tc.prototype,Ne.prototype.constructor=Ne,qs.prototype=Ro(tc.prototype),qs.prototype.constructor=qs;function Wr(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=nt,this.__views__=[]}function Vh(){var f=new Wr(this.__wrapped__);return f.__actions__=$l(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=$l(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=$l(this.__views__),f}function Af(){if(this.__filtered__){var f=new Wr(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function Uh(){var f=this.__wrapped__.value(),b=this.__dir__,O=ii(f),ie=b<0,Ce=O?f.length:0,Ve=QM(0,Ce,this.__views__),ot=Ve.start,yt=Ve.end,Dt=yt-ot,dn=ie?yt:ot-1,fn=this.__iteratees__,_n=fn.length,qn=0,fr=Pe(Dt,this.__takeCount__);if(!O||!ie&&Ce==Dt&&fr==Dt)return Ou(f,this.__actions__);var Ar=[];e:for(;Dt--&&qn<fr;){dn+=b;for(var fi=-1,Tr=f[dn];++fi<_n;){var Mi=fn[fi],Ri=Mi.iteratee,mu=Mi.type,Ll=Ri(Tr);if(mu==U)Tr=Ll;else if(!Ll){if(mu==z)continue e;break e}}Ar[qn++]=Tr}return Ar}Wr.prototype=Ro(tc.prototype),Wr.prototype.constructor=Wr;function _l(f){var b=-1,O=f==null?0:f.length;for(this.clear();++b<O;){var ie=f[b];this.set(ie[0],ie[1])}}function oh(){this.__data__=Gs?Gs(null):{},this.size=0}function Nd(f){var b=this.has(f)&&delete this.__data__[f];return this.size-=b?1:0,b}function Up(f){var b=this.__data__;if(Gs){var O=b[f];return O===l?n:O}return ni.call(b,f)?b[f]:n}function Tc(f){var b=this.__data__;return Gs?b[f]!==n:ni.call(b,f)}function Hh(f,b){var O=this.__data__;return this.size+=this.has(f)?0:1,O[f]=Gs&&b===n?l:b,this}_l.prototype.clear=oh,_l.prototype.delete=Nd,_l.prototype.get=Up,_l.prototype.has=Tc,_l.prototype.set=Hh;function pu(f){var b=-1,O=f==null?0:f.length;for(this.clear();++b<O;){var ie=f[b];this.set(ie[0],ie[1])}}function Hp(){this.__data__=[],this.size=0}function Wh(f){var b=this.__data__,O=xt(b,f);if(O<0)return!1;var ie=b.length-1;return O==ie?b.pop():oo.call(b,O,1),--this.size,!0}function Gh(f){var b=this.__data__,O=xt(b,f);return O<0?n:b[O][1]}function Tf(f){return xt(this.__data__,f)>-1}function Df(f,b){var O=this.__data__,ie=xt(O,f);return ie<0?(++this.size,O.push([f,b])):O[ie][1]=b,this}pu.prototype.clear=Hp,pu.prototype.delete=Wh,pu.prototype.get=Gh,pu.prototype.has=Tf,pu.prototype.set=Df;function Qa(f){var b=-1,O=f==null?0:f.length;for(this.clear();++b<O;){var ie=f[b];this.set(ie[0],ie[1])}}function Of(){this.size=0,this.__data__={hash:new _l,map:new(sr||pu),string:new _l}}function Nf(f){var b=Qm(this,f).delete(f);return this.size-=b?1:0,b}function If(f){return Qm(this,f).get(f)}function w(f){return Qm(this,f).has(f)}function T(f,b){var O=Qm(this,f),ie=O.size;return O.set(f,b),this.size+=O.size==ie?0:1,this}Qa.prototype.clear=Of,Qa.prototype.delete=Nf,Qa.prototype.get=If,Qa.prototype.has=w,Qa.prototype.set=T;function q(f){var b=-1,O=f==null?0:f.length;for(this.__data__=new Qa;++b<O;)this.add(f[b])}function ce(f){return this.__data__.set(f,l),this}function Le(f){return this.__data__.has(f)}q.prototype.add=q.prototype.push=ce,q.prototype.has=Le;function Me(f){var b=this.__data__=new pu(f);this.size=b.size}function Ae(){this.__data__=new pu,this.size=0}function Oe(f){var b=this.__data__,O=b.delete(f);return this.size=b.size,O}function Be(f){return this.__data__.get(f)}function Ke(f){return this.__data__.has(f)}function gt(f,b){var O=this.__data__;if(O instanceof pu){var ie=O.__data__;if(!sr||ie.length<i-1)return ie.push([f,b]),this.size=++O.size,this;O=this.__data__=new Qa(ie)}return O.set(f,b),this.size=O.size,this}Me.prototype.clear=Ae,Me.prototype.delete=Oe,Me.prototype.get=Be,Me.prototype.has=Ke,Me.prototype.set=gt;function Ft(f,b){var O=ii(f),ie=!O&&Vd(f),Ce=!O&&!ie&&Yh(f),Ve=!O&&!ie&&!Ce&&Hf(f),ot=O||ie||Ce||Ve,yt=ot?bs(f.length,bo):[],Dt=yt.length;for(var dn in f)(b||ni.call(f,dn))&&!(ot&&(dn=="length"||Ce&&(dn=="offset"||dn=="parent")||Ve&&(dn=="buffer"||dn=="byteLength"||dn=="byteOffset")||dh(dn,Dt)))&&yt.push(dn);return yt}function jt(f){var b=f.length;return b?f[Rd(0,b-1)]:n}function Mt(f,b){return e0($l(f),or(b,0,f.length))}function Kt(f){return e0($l(f))}function Wt(f,b,O){(O!==n&&!ac(f[b],O)||O===n&&!(b in f))&&Fn(f,b,O)}function mt(f,b,O){var ie=f[b];(!(ni.call(f,b)&&ac(ie,O))||O===n&&!(b in f))&&Fn(f,b,O)}function xt(f,b){for(var O=f.length;O--;)if(ac(f[O][0],b))return O;return-1}function nn(f,b,O,ie){return W(f,function(Ce,Ve,ot){b(ie,Ce,O(Ce),ot)}),ie}function mn(f,b){return f&&Nc(b,xa(b),f)}function on(f,b){return f&&Nc(b,Ul(b),f)}function Fn(f,b,O){b=="__proto__"&&Ja?Ja(f,b,{configurable:!0,enumerable:!0,value:O,writable:!0}):f[b]=O}function Bn(f,b){for(var O=-1,ie=b.length,Ce=It(ie),Ve=f==null;++O<ie;)Ce[O]=Ve?n:b1(f,b[O]);return Ce}function or(f,b,O){return f===f&&(O!==n&&(f=f<=O?f:O),b!==n&&(f=f>=b?f:b)),f}function h(f,b,O,ie,Ce,Ve){var ot,yt=b&p,Dt=b&v,dn=b&m;if(O&&(ot=Ce?O(f,ie,Ce,Ve):O(f)),ot!==n)return ot;if(!uo(f))return f;var fn=ii(f);if(fn){if(ot=tk(f),!yt)return $l(f,ot)}else{var _n=tl(f),qn=_n==Je||_n==he;if(Yh(f))return bw(f,yt);if(_n==ze||_n==me||qn&&!Ce){if(ot=Dt||qn?{}:Fw(f),!yt)return Dt?HM(f,on(ot,f)):UM(f,mn(ot,f))}else{if(!Kr[_n])return Ce?f:{};ot=nk(f,_n,yt)}}Ve||(Ve=new Me);var fr=Ve.get(f);if(fr)return fr;Ve.set(f,ot),fx(f)?f.forEach(function(Tr){ot.add(h(Tr,b,O,Tr,f,Ve))}):hx(f)&&f.forEach(function(Tr,Mi){ot.set(Mi,h(Tr,b,O,Mi,f,Ve))});var Ar=dn?Dt?s1:i1:Dt?Ul:xa,fi=fn?n:Ar(f);return $s(fi||f,function(Tr,Mi){fi&&(Mi=Tr,Tr=f[Mi]),mt(ot,Mi,h(Tr,b,O,Mi,f,Ve))}),ot}function g(f){var b=xa(f);return function(O){return _(O,f,b)}}function _(f,b,O){var ie=O.length;if(f==null)return!ie;for(f=Ei(f);ie--;){var Ce=O[ie],Ve=b[Ce],ot=f[Ce];if(ot===n&&!(Ce in f)||!Ve(ot))return!1}return!0}function S(f,b,O){if(typeof f!="function")throw new Qi(o);return Kp(function(){f.apply(n,O)},b)}function M(f,b,O,ie){var Ce=-1,Ve=Bl,ot=!0,yt=f.length,Dt=[],dn=b.length;if(!yt)return Dt;O&&(b=Si(b,Hr(O))),ie?(Ve=Rl,ot=!1):b.length>=i&&(Ve=Fl,ot=!1,b=new q(b));e:for(;++Ce<yt;){var fn=f[Ce],_n=O==null?fn:O(fn);if(fn=ie||fn!==0?fn:0,ot&&_n===_n){for(var qn=dn;qn--;)if(b[qn]===_n)continue e;Dt.push(fn)}else Ve(b,_n,ie)||Dt.push(fn)}return Dt}var W=Sw(Qt),ne=Sw(xn,!0);function oe(f,b){var O=!0;return W(f,function(ie,Ce,Ve){return O=!!b(ie,Ce,Ve),O}),O}function ye(f,b,O){for(var ie=-1,Ce=f.length;++ie<Ce;){var Ve=f[ie],ot=b(Ve);if(ot!=null&&(yt===n?ot===ot&&!gu(ot):O(ot,yt)))var yt=ot,Dt=Ve}return Dt}function Ee(f,b,O,ie){var Ce=f.length;for(O=di(O),O<0&&(O=-O>Ce?0:Ce+O),ie=ie===n||ie>Ce?Ce:di(ie),ie<0&&(ie+=Ce),ie=O>ie?0:gx(ie);O<ie;)f[O++]=b;return f}function tt(f,b){var O=[];return W(f,function(ie,Ce,Ve){b(ie,Ce,Ve)&&O.push(ie)}),O}function We(f,b,O,ie,Ce){var Ve=-1,ot=f.length;for(O||(O=ik),Ce||(Ce=[]);++Ve<ot;){var yt=f[Ve];b>0&&O(yt)?b>1?We(yt,b-1,O,ie,Ce):Zo(Ce,yt):ie||(Ce[Ce.length]=yt)}return Ce}var _t=Cw(),Bt=Cw(!0);function Qt(f,b){return f&&_t(f,b,xa)}function xn(f,b){return f&&Bt(f,b,xa)}function Tn(f,b){return va(b,function(O){return fh(f[O])})}function pr(f,b){b=oc(b,f);for(var O=0,ie=b.length;f!=null&&O<ie;)f=f[Ic(b[O++])];return O&&O==ie?f:n}function et(f,b,O){var ie=b(f);return ii(f)?ie:Zo(ie,O(f))}function st(f){return f==null?f===n?qe:le:Xa&&Xa in Ei(f)?JM(f):hk(f)}function pt(f,b){return f>b}function zt(f,b){return f!=null&&ni.call(f,b)}function Pt(f,b){return f!=null&&b in Ei(f)}function Rt(f,b,O){return f>=Pe(b,O)&&f<ue(b,O)}function be(f,b,O){for(var ie=O?Rl:Bl,Ce=f[0].length,Ve=f.length,ot=Ve,yt=It(Ve),Dt=1/0,dn=[];ot--;){var fn=f[ot];ot&&b&&(fn=Si(fn,Hr(b))),Dt=Pe(fn.length,Dt),yt[ot]=!O&&(b||Ce>=120&&fn.length>=120)?new q(ot&&fn):n}fn=f[0];var _n=-1,qn=yt[0];e:for(;++_n<Ce&&dn.length<Dt;){var fr=fn[_n],Ar=b?b(fr):fr;if(fr=O||fr!==0?fr:0,!(qn?Fl(qn,Ar):ie(dn,Ar,O))){for(ot=Ve;--ot;){var fi=yt[ot];if(!(fi?Fl(fi,Ar):ie(f[ot],Ar,O)))continue e}qn&&qn.push(Ar),dn.push(fr)}}return dn}function ke(f,b,O,ie){return Qt(f,function(Ce,Ve,ot){b(ie,O(Ce),Ve,ot)}),ie}function Fe(f,b,O){b=oc(b,f),f=Vw(f,b);var ie=f==null?f:f[Ic(Bu(b))];return ie==null?n:Li(ie,f,O)}function Re(f){return wo(f)&&st(f)==me}function Ue(f){return wo(f)&&st(f)==rn}function He(f){return wo(f)&&st(f)==J}function ct(f,b,O,ie,Ce){return f===b?!0:f==null||b==null||!wo(f)&&!wo(b)?f!==f&&b!==b:ht(f,b,O,ie,ct,Ce)}function ht(f,b,O,ie,Ce,Ve){var ot=ii(f),yt=ii(b),Dt=ot?pe:tl(f),dn=yt?pe:tl(b);Dt=Dt==me?ze:Dt,dn=dn==me?ze:dn;var fn=Dt==ze,_n=dn==ze,qn=Dt==dn;if(qn&&Yh(f)){if(!Yh(b))return!1;ot=!0,fn=!1}if(qn&&!fn)return Ve||(Ve=new Me),ot||Hf(f)?Iw(f,b,O,ie,Ce,Ve):ZM(f,b,Dt,O,ie,Ce,Ve);if(!(O&x)){var fr=fn&&ni.call(f,"__wrapped__"),Ar=_n&&ni.call(b,"__wrapped__");if(fr||Ar){var fi=fr?f.value():f,Tr=Ar?b.value():b;return Ve||(Ve=new Me),Ce(fi,Tr,O,ie,Ve)}}return qn?(Ve||(Ve=new Me),XM(f,b,O,ie,Ce,Ve)):!1}function vt(f){return wo(f)&&tl(f)==ee}function At(f,b,O,ie){var Ce=O.length,Ve=Ce,ot=!ie;if(f==null)return!Ve;for(f=Ei(f);Ce--;){var yt=O[Ce];if(ot&&yt[2]?yt[1]!==f[yt[0]]:!(yt[0]in f))return!1}for(;++Ce<Ve;){yt=O[Ce];var Dt=yt[0],dn=f[Dt],fn=yt[1];if(ot&&yt[2]){if(dn===n&&!(Dt in f))return!1}else{var _n=new Me;if(ie)var qn=ie(dn,fn,Dt,f,b,_n);if(!(qn===n?ct(fn,dn,x|E,ie,_n):qn))return!1}}return!0}function Tt(f){if(!uo(f)||ok(f))return!1;var b=fh(f)?Ui:zi;return b.test($d(f))}function an(f){return wo(f)&&st(f)==$e}function Gn(f){return wo(f)&&tl(f)==Ge}function Kn(f){return wo(f)&&o0(f.length)&&!!Cr[st(f)]}function ar(f){return typeof f=="function"?f:f==null?Hl:typeof f=="object"?ii(f)?nc(f[0],f[1]):Fo(f):Ex(f)}function _i(f){if(!Yp(f))return G(f);var b=[];for(var O in Ei(f))ni.call(f,O)&&O!="constructor"&&b.push(O);return b}function Bi(f){if(!uo(f))return ck(f);var b=Yp(f),O=[];for(var ie in f)ie=="constructor"&&(b||!ni.call(f,ie))||O.push(ie);return O}function ri(f,b){return f<b}function Hi(f,b){var O=-1,ie=Vl(f)?It(f.length):[];return W(f,function(Ce,Ve,ot){ie[++O]=b(Ce,Ve,ot)}),ie}function Fo(f){var b=a1(f);return b.length==1&&b[0][2]?zw(b[0][0],b[0][1]):function(O){return O===f||At(O,f,b)}}function nc(f,b){return u1(f)&&jw(b)?zw(Ic(f),b):function(O){var ie=b1(O,f);return ie===n&&ie===b?_1(O,f):ct(b,ie,x|E)}}function Fa(f,b,O,ie,Ce){f!==b&&_t(b,function(Ve,ot){if(Ce||(Ce=new Me),uo(Ve))Id(f,b,ot,O,Fa,ie,Ce);else{var yt=ie?ie(h1(f,ot),Ve,ot+"",f,b,Ce):n;yt===n&&(yt=Ve),Wt(f,ot,yt)}},Ul)}function Id(f,b,O,ie,Ce,Ve,ot){var yt=h1(f,O),Dt=h1(b,O),dn=ot.get(Dt);if(dn){Wt(f,O,dn);return}var fn=Ve?Ve(yt,Dt,O+"",f,b,ot):n,_n=fn===n;if(_n){var qn=ii(Dt),fr=!qn&&Yh(Dt),Ar=!qn&&!fr&&Hf(Dt);fn=Dt,qn||fr||Ar?ii(yt)?fn=yt:jo(yt)?fn=$l(yt):fr?(_n=!1,fn=bw(Dt,!0)):Ar?(_n=!1,fn=_w(Dt,!0)):fn=[]:Zp(Dt)||Vd(Dt)?(fn=yt,Vd(yt)?fn=mx(yt):(!uo(yt)||fh(yt))&&(fn=Fw(Dt))):_n=!1}_n&&(ot.set(Dt,fn),Ce(fn,Dt,ie,Ve,ot),ot.delete(Dt)),Wt(f,O,fn)}function wl(f,b){var O=f.length;if(O)return b+=b<0?O:0,dh(b,O)?f[b]:n}function Dc(f,b,O){b.length?b=Si(b,function(Ve){return ii(Ve)?function(ot){return pr(ot,Ve.length===1?Ve[0]:Ve)}:Ve}):b=[Hl];var ie=-1;b=Si(b,Hr(Er()));var Ce=Hi(f,function(Ve,ot,yt){var Dt=Si(b,function(dn){return dn(Ve)});return{criteria:Dt,index:++ie,value:Ve}});return vi(Ce,function(Ve,ot){return VM(Ve,ot,O)})}function ja(f,b){return lo(f,b,function(O,ie){return _1(f,ie)})}function lo(f,b,O){for(var ie=-1,Ce=b.length,Ve={};++ie<Ce;){var ot=b[ie],yt=pr(f,ot);O(yt,ot)&&ah(Ve,oc(ot,f),yt)}return Ve}function ws(f){return function(b){return pr(b,f)}}function Bf(f,b,O,ie){var Ce=ie?zn:pn,Ve=-1,ot=b.length,yt=f;for(f===b&&(b=$l(b)),O&&(yt=Si(f,Hr(O)));++Ve<ot;)for(var Dt=0,dn=b[Ve],fn=O?O(dn):dn;(Dt=Ce(yt,fn,Dt,ie))>-1;)yt!==f&&oo.call(yt,Dt,1),oo.call(f,Dt,1);return f}function Bd(f,b){for(var O=f?b.length:0,ie=O-1;O--;){var Ce=b[O];if(O==ie||Ce!==Ve){var Ve=Ce;dh(Ce)?oo.call(f,Ce,1):lh(f,Ce)}}return f}function Rd(f,b){return f+Ws(Ht()*(b-f+1))}function Fd(f,b,O,ie){for(var Ce=-1,Ve=ue(Hs((b-f)/(O||1)),0),ot=It(Ve);Ve--;)ot[ie?Ve:++Ce]=f,f+=O;return ot}function Rf(f,b){var O="";if(!f||b<1||b>Q)return O;do b%2&&(O+=f),b=Ws(b/2),b&&(f+=f);while(b);return O}function hi(f,b){return d1($w(f,b,Hl),f+"")}function Ff(f){return jt(Wf(f))}function Vm(f,b){var O=Wf(f);return e0(O,or(b,0,O.length))}function ah(f,b,O,ie){if(!uo(f))return f;b=oc(b,f);for(var Ce=-1,Ve=b.length,ot=Ve-1,yt=f;yt!=null&&++Ce<Ve;){var Dt=Ic(b[Ce]),dn=O;if(Dt==="__proto__"||Dt==="constructor"||Dt==="prototype")return f;if(Ce!=ot){var fn=yt[Dt];dn=ie?ie(fn,Dt,yt):n,dn===n&&(dn=uo(fn)?fn:dh(b[Ce+1])?[]:{})}mt(yt,Dt,dn),yt=yt[Dt]}return f}var rc=es?function(f,b){return es.set(f,b),f}:Hl,Um=Ja?function(f,b){return Ja(f,"toString",{configurable:!0,enumerable:!1,value:x1(b),writable:!0})}:Hl;function Hm(f){return e0(Wf(f))}function zl(f,b,O){var ie=-1,Ce=f.length;b<0&&(b=-b>Ce?0:Ce+b),O=O>Ce?Ce:O,O<0&&(O+=Ce),Ce=b>O?0:O-b>>>0,b>>>=0;for(var Ve=It(Ce);++ie<Ce;)Ve[ie]=f[ie+b];return Ve}function Wm(f,b){var O;return W(f,function(ie,Ce,Ve){return O=b(ie,Ce,Ve),!O}),!!O}function ic(f,b,O){var ie=0,Ce=f==null?ie:f.length;if(typeof b=="number"&&b===b&&Ce<=H){for(;ie<Ce;){var Ve=ie+Ce>>>1,ot=f[Ve];ot!==null&&!gu(ot)&&(O?ot<=b:ot<b)?ie=Ve+1:Ce=Ve}return Ce}return Wp(f,b,Hl,O)}function Wp(f,b,O,ie){var Ce=0,Ve=f==null?0:f.length;if(Ve===0)return 0;b=O(b);for(var ot=b!==b,yt=b===null,Dt=gu(b),dn=b===n;Ce<Ve;){var fn=Ws((Ce+Ve)/2),_n=O(f[fn]),qn=_n!==n,fr=_n===null,Ar=_n===_n,fi=gu(_n);if(ot)var Tr=ie||Ar;else dn?Tr=Ar&&(ie||qn):yt?Tr=Ar&&qn&&(ie||!fr):Dt?Tr=Ar&&qn&&!fr&&(ie||!fi):fr||fi?Tr=!1:Tr=ie?_n<=b:_n<b;Tr?Ce=fn+1:Ve=fn}return Pe(Ve,ae)}function Gp(f,b){for(var O=-1,ie=f.length,Ce=0,Ve=[];++O<ie;){var ot=f[O],yt=b?b(ot):ot;if(!O||!ac(yt,Dt)){var Dt=yt;Ve[Ce++]=ot===0?0:ot}}return Ve}function Gm(f){return typeof f=="number"?f:gu(f)?we:+f}function el(f){if(typeof f=="string")return f;if(ii(f))return Si(f,el)+"";if(gu(f))return ao?ao.call(f):"";var b=f+"";return b=="0"&&1/f==-1/0?"-0":b}function Oc(f,b,O){var ie=-1,Ce=Bl,Ve=f.length,ot=!0,yt=[],Dt=yt;if(O)ot=!1,Ce=Rl;else if(Ve>=i){var dn=b?null:YM(f);if(dn)return yo(dn);ot=!1,Ce=Fl,Dt=new q}else Dt=b?[]:yt;e:for(;++ie<Ve;){var fn=f[ie],_n=b?b(fn):fn;if(fn=O||fn!==0?fn:0,ot&&_n===_n){for(var qn=Dt.length;qn--;)if(Dt[qn]===_n)continue e;b&&Dt.push(_n),yt.push(fn)}else Ce(Dt,_n,O)||(Dt!==yt&&Dt.push(_n),yt.push(fn))}return yt}function lh(f,b){return b=oc(b,f),f=Vw(f,b),f==null||delete f[Ic(Bu(b))]}function jf(f,b,O,ie){return ah(f,b,O(pr(f,b)),ie)}function uh(f,b,O,ie){for(var Ce=f.length,Ve=ie?Ce:-1;(ie?Ve--:++Ve<Ce)&&b(f[Ve],Ve,f););return O?zl(f,ie?0:Ve,ie?Ve+1:Ce):zl(f,ie?Ve+1:0,ie?Ce:Ve)}function Ou(f,b){var O=f;return O instanceof Wr&&(O=O.value()),Ga(b,function(ie,Ce){return Ce.func.apply(Ce.thisArg,Zo([ie],Ce.args))},O)}function Nu(f,b,O){var ie=f.length;if(ie<2)return ie?Oc(f[0]):[];for(var Ce=-1,Ve=It(ie);++Ce<ie;)for(var ot=f[Ce],yt=-1;++yt<ie;)yt!=Ce&&(Ve[Ce]=M(Ve[Ce]||ot,f[yt],b,O));return Oc(We(Ve,1),b,O)}function sc(f,b,O){for(var ie=-1,Ce=f.length,Ve=b.length,ot={};++ie<Ce;){var yt=ie<Ve?b[ie]:n;O(ot,f[ie],yt)}return ot}function qh(f){return jo(f)?f:[]}function jd(f){return typeof f=="function"?f:Hl}function oc(f,b){return ii(f)?f:u1(f,b)?[f]:Gw(os(f))}var e1=hi;function Iu(f,b,O){var ie=f.length;return O=O===n?ie:O,!b&&O>=ie?f:zl(f,b,O)}var zf=ba||function(f){return ms.clearTimeout(f)};function bw(f,b){if(b)return f.slice();var O=f.length,ie=ec?ec(O):new f.constructor(O);return f.copy(ie),ie}function t1(f){var b=new f.constructor(f.byteLength);return new aa(b).set(new aa(f)),b}function jM(f,b){var O=b?t1(f.buffer):f.buffer;return new f.constructor(O,f.byteOffset,f.byteLength)}function zM(f){var b=new f.constructor(f.source,jn.exec(f));return b.lastIndex=f.lastIndex,b}function $M(f){return bi?Ei(bi.call(f)):{}}function _w(f,b){var O=b?t1(f.buffer):f.buffer;return new f.constructor(O,f.byteOffset,f.length)}function ww(f,b){if(f!==b){var O=f!==n,ie=f===null,Ce=f===f,Ve=gu(f),ot=b!==n,yt=b===null,Dt=b===b,dn=gu(b);if(!yt&&!dn&&!Ve&&f>b||Ve&&ot&&Dt&&!yt&&!dn||ie&&ot&&Dt||!O&&Dt||!Ce)return 1;if(!ie&&!Ve&&!dn&&f<b||dn&&O&&Ce&&!ie&&!Ve||yt&&O&&Ce||!ot&&Ce||!Dt)return-1}return 0}function VM(f,b,O){for(var ie=-1,Ce=f.criteria,Ve=b.criteria,ot=Ce.length,yt=O.length;++ie<ot;){var Dt=ww(Ce[ie],Ve[ie]);if(Dt){if(ie>=yt)return Dt;var dn=O[ie];return Dt*(dn=="desc"?-1:1)}}return f.index-b.index}function xw(f,b,O,ie){for(var Ce=-1,Ve=f.length,ot=O.length,yt=-1,Dt=b.length,dn=ue(Ve-ot,0),fn=It(Dt+dn),_n=!ie;++yt<Dt;)fn[yt]=b[yt];for(;++Ce<ot;)(_n||Ce<Ve)&&(fn[O[Ce]]=f[Ce]);for(;dn--;)fn[yt++]=f[Ce++];return fn}function Lw(f,b,O,ie){for(var Ce=-1,Ve=f.length,ot=-1,yt=O.length,Dt=-1,dn=b.length,fn=ue(Ve-yt,0),_n=It(fn+dn),qn=!ie;++Ce<fn;)_n[Ce]=f[Ce];for(var fr=Ce;++Dt<dn;)_n[fr+Dt]=b[Dt];for(;++ot<yt;)(qn||Ce<Ve)&&(_n[fr+O[ot]]=f[Ce++]);return _n}function $l(f,b){var O=-1,ie=f.length;for(b||(b=It(ie));++O<ie;)b[O]=f[O];return b}function Nc(f,b,O,ie){var Ce=!O;O||(O={});for(var Ve=-1,ot=b.length;++Ve<ot;){var yt=b[Ve],Dt=ie?ie(O[yt],f[yt],yt,O,f):n;Dt===n&&(Dt=f[yt]),Ce?Fn(O,yt,Dt):mt(O,yt,Dt)}return O}function UM(f,b){return Nc(f,l1(f),b)}function HM(f,b){return Nc(f,Bw(f),b)}function qm(f,b){return function(O,ie){var Ce=ii(O)?kc:nn,Ve=b?b():{};return Ce(O,f,Er(ie,2),Ve)}}function $f(f){return hi(function(b,O){var ie=-1,Ce=O.length,Ve=Ce>1?O[Ce-1]:n,ot=Ce>2?O[2]:n;for(Ve=f.length>3&&typeof Ve=="function"?(Ce--,Ve):n,ot&&xl(O[0],O[1],ot)&&(Ve=Ce<3?n:Ve,Ce=1),b=Ei(b);++ie<Ce;){var yt=O[ie];yt&&f(b,yt,ie,Ve)}return b})}function Sw(f,b){return function(O,ie){if(O==null)return O;if(!Vl(O))return f(O,ie);for(var Ce=O.length,Ve=b?Ce:-1,ot=Ei(O);(b?Ve--:++Ve<Ce)&&ie(ot[Ve],Ve,ot)!==!1;);return O}}function Cw(f){return function(b,O,ie){for(var Ce=-1,Ve=Ei(b),ot=ie(b),yt=ot.length;yt--;){var Dt=ot[f?yt:++Ce];if(O(Ve[Dt],Dt,Ve)===!1)break}return b}}function WM(f,b,O){var ie=b&k,Ce=qp(f);function Ve(){var ot=this&&this!==ms&&this instanceof Ve?Ce:f;return ot.apply(ie?O:this,arguments)}return Ve}function Ew(f){return function(b){b=os(b);var O=Aa(b)?ro(b):n,ie=O?O[0]:b.charAt(0),Ce=O?Iu(O,1).join(""):b.slice(1);return ie[f]()+Ce}}function Vf(f){return function(b){return Ga(Sx(Lx(b).replace(Vr,"")),f,"")}}function qp(f){return function(){var b=arguments;switch(b.length){case 0:return new f;case 1:return new f(b[0]);case 2:return new f(b[0],b[1]);case 3:return new f(b[0],b[1],b[2]);case 4:return new f(b[0],b[1],b[2],b[3]);case 5:return new f(b[0],b[1],b[2],b[3],b[4]);case 6:return new f(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new f(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var O=Ro(f.prototype),ie=f.apply(O,b);return uo(ie)?ie:O}}function GM(f,b,O){var ie=qp(f);function Ce(){for(var Ve=arguments.length,ot=It(Ve),yt=Ve,Dt=Uf(Ce);yt--;)ot[yt]=arguments[yt];var dn=Ve<3&&ot[0]!==Dt&&ot[Ve-1]!==Dt?[]:vo(ot,Dt);if(Ve-=dn.length,Ve<O)return Tw(f,b,Ym,Ce.placeholder,n,ot,dn,n,n,O-Ve);var fn=this&&this!==ms&&this instanceof Ce?ie:f;return Li(fn,this,ot)}return Ce}function Pw(f){return function(b,O,ie){var Ce=Ei(b);if(!Vl(b)){var Ve=Er(O,3);b=xa(b),O=function(yt){return Ve(Ce[yt],yt,Ce)}}var ot=f(b,O,ie);return ot>-1?Ce[Ve?b[ot]:ot]:n}}function Mw(f){return hh(function(b){var O=b.length,ie=O,Ce=qs.prototype.thru;for(f&&b.reverse();ie--;){var Ve=b[ie];if(typeof Ve!="function")throw new Qi(o);if(Ce&&!ot&&Jm(Ve)=="wrapper")var ot=new qs([],!0)}for(ie=ot?ie:O;++ie<O;){Ve=b[ie];var yt=Jm(Ve),Dt=yt=="wrapper"?o1(Ve):n;Dt&&c1(Dt[0])&&Dt[1]==(fe|V|te|I)&&!Dt[4].length&&Dt[9]==1?ot=ot[Jm(Dt[0])].apply(ot,Dt[3]):ot=Ve.length==1&&c1(Ve)?ot[yt]():ot.thru(Ve)}return function(){var dn=arguments,fn=dn[0];if(ot&&dn.length==1&&ii(fn))return ot.plant(fn).value();for(var _n=0,qn=O?b[_n].apply(this,dn):fn;++_n<O;)qn=b[_n].call(this,qn);return qn}})}function Ym(f,b,O,ie,Ce,Ve,ot,yt,Dt,dn){var fn=b&fe,_n=b&k,qn=b&A,fr=b&(V|Y),Ar=b&F,fi=qn?n:qp(f);function Tr(){for(var Mi=arguments.length,Ri=It(Mi),mu=Mi;mu--;)Ri[mu]=arguments[mu];if(fr)var Ll=Uf(Tr),vu=ka(Ri,Ll);if(ie&&(Ri=xw(Ri,ie,Ce,fr)),Ve&&(Ri=Lw(Ri,Ve,ot,fr)),Mi-=vu,fr&&Mi<dn){var zo=vo(Ri,Ll);return Tw(f,b,Ym,Tr.placeholder,O,Ri,zo,yt,Dt,dn-Mi)}var lc=_n?O:this,gh=qn?lc[f]:f;return Mi=Ri.length,yt?Ri=dk(Ri,yt):Ar&&Mi>1&&Ri.reverse(),fn&&Dt<Mi&&(Ri.length=Dt),this&&this!==ms&&this instanceof Tr&&(gh=fi||qp(gh)),gh.apply(lc,Ri)}return Tr}function kw(f,b){return function(O,ie){return ke(O,f,b(ie),{})}}function Km(f,b){return function(O,ie){var Ce;if(O===n&&ie===n)return b;if(O!==n&&(Ce=O),ie!==n){if(Ce===n)return ie;typeof O=="string"||typeof ie=="string"?(O=el(O),ie=el(ie)):(O=Gm(O),ie=Gm(ie)),Ce=f(O,ie)}return Ce}}function n1(f){return hh(function(b){return b=Si(b,Hr(Er())),hi(function(O){var ie=this;return f(b,function(Ce){return Li(Ce,ie,O)})})})}function Zm(f,b){b=b===n?" ":el(b);var O=b.length;if(O<2)return O?Rf(b,f):b;var ie=Rf(b,Hs(f/no(b)));return Aa(b)?Iu(ro(ie),0,f).join(""):ie.slice(0,f)}function qM(f,b,O,ie){var Ce=b&k,Ve=qp(f);function ot(){for(var yt=-1,Dt=arguments.length,dn=-1,fn=ie.length,_n=It(fn+Dt),qn=this&&this!==ms&&this instanceof ot?Ve:f;++dn<fn;)_n[dn]=ie[dn];for(;Dt--;)_n[dn++]=arguments[++yt];return Li(qn,Ce?O:this,_n)}return ot}function Aw(f){return function(b,O,ie){return ie&&typeof ie!="number"&&xl(b,O,ie)&&(O=ie=n),b=ph(b),O===n?(O=b,b=0):O=ph(O),ie=ie===n?b<O?1:-1:ph(ie),Fd(b,O,ie,f)}}function Xm(f){return function(b,O){return typeof b=="string"&&typeof O=="string"||(b=Ru(b),O=Ru(O)),f(b,O)}}function Tw(f,b,O,ie,Ce,Ve,ot,yt,Dt,dn){var fn=b&V,_n=fn?ot:n,qn=fn?n:ot,fr=fn?Ve:n,Ar=fn?n:Ve;b|=fn?te:ge,b&=~(fn?ge:te),b&D||(b&=-4);var fi=[f,b,Ce,fr,_n,Ar,qn,yt,Dt,dn],Tr=O.apply(n,fi);return c1(f)&&Uw(Tr,fi),Tr.placeholder=ie,Hw(Tr,f,b)}function r1(f){var b=Ji[f];return function(O,ie){if(O=Ru(O),ie=ie==null?0:Pe(di(ie),292),ie&&y(O)){var Ce=(os(O)+"e").split("e"),Ve=b(Ce[0]+"e"+(+Ce[1]+ie));return Ce=(os(Ve)+"e").split("e"),+(Ce[0]+"e"+(+Ce[1]-ie))}return b(O)}}var YM=Ms&&1/yo(new Ms([,-0]))[1]==re?function(f){return new Ms(f)}:C1;function Dw(f){return function(b){var O=tl(b);return O==ee?jl(b):O==Ge?Ac(b):Cs(b,f(b))}}function ch(f,b,O,ie,Ce,Ve,ot,yt){var Dt=b&A;if(!Dt&&typeof f!="function")throw new Qi(o);var dn=ie?ie.length:0;if(dn||(b&=-97,ie=Ce=n),ot=ot===n?ot:ue(di(ot),0),yt=yt===n?yt:di(yt),dn-=Ce?Ce.length:0,b&ge){var fn=ie,_n=Ce;ie=Ce=n}var qn=Dt?n:o1(f),fr=[f,b,O,ie,Ce,fn,_n,Ve,ot,yt];if(qn&&uk(fr,qn),f=fr[0],b=fr[1],O=fr[2],ie=fr[3],Ce=fr[4],yt=fr[9]=fr[9]===n?Dt?0:f.length:ue(fr[9]-dn,0),!yt&&b&(V|Y)&&(b&=-25),!b||b==k)var Ar=WM(f,b,O);else b==V||b==Y?Ar=GM(f,b,yt):(b==te||b==(k|te))&&!Ce.length?Ar=qM(f,b,O,ie):Ar=Ym.apply(n,fr);var fi=qn?rc:Uw;return Hw(fi(Ar,fr),f,b)}function Ow(f,b,O,ie){return f===n||ac(f,Oa[O])&&!ni.call(ie,O)?b:f}function Nw(f,b,O,ie,Ce,Ve){return uo(f)&&uo(b)&&(Ve.set(b,f),Fa(f,b,n,Nw,Ve),Ve.delete(b)),f}function KM(f){return Zp(f)?n:f}function Iw(f,b,O,ie,Ce,Ve){var ot=O&x,yt=f.length,Dt=b.length;if(yt!=Dt&&!(ot&&Dt>yt))return!1;var dn=Ve.get(f),fn=Ve.get(b);if(dn&&fn)return dn==b&&fn==f;var _n=-1,qn=!0,fr=O&E?new q:n;for(Ve.set(f,b),Ve.set(b,f);++_n<yt;){var Ar=f[_n],fi=b[_n];if(ie)var Tr=ot?ie(fi,Ar,_n,b,f,Ve):ie(Ar,fi,_n,f,b,Ve);if(Tr!==n){if(Tr)continue;qn=!1;break}if(fr){if(!R(b,function(Mi,Ri){if(!Fl(fr,Ri)&&(Ar===Mi||Ce(Ar,Mi,O,ie,Ve)))return fr.push(Ri)})){qn=!1;break}}else if(!(Ar===fi||Ce(Ar,fi,O,ie,Ve))){qn=!1;break}}return Ve.delete(f),Ve.delete(b),qn}function ZM(f,b,O,ie,Ce,Ve,ot){switch(O){case yn:if(f.byteLength!=b.byteLength||f.byteOffset!=b.byteOffset)return!1;f=f.buffer,b=b.buffer;case rn:return!(f.byteLength!=b.byteLength||!Ve(new aa(f),new aa(b)));case X:case J:case se:return ac(+f,+b);case Te:return f.name==b.name&&f.message==b.message;case $e:case Xe:return f==b+"";case ee:var yt=jl;case Ge:var Dt=ie&x;if(yt||(yt=yo),f.size!=b.size&&!Dt)return!1;var dn=ot.get(f);if(dn)return dn==b;ie|=E,ot.set(f,b);var fn=Iw(yt(f),yt(b),ie,Ce,Ve,ot);return ot.delete(f),fn;case lt:if(bi)return bi.call(f)==bi.call(b)}return!1}function XM(f,b,O,ie,Ce,Ve){var ot=O&x,yt=i1(f),Dt=yt.length,dn=i1(b),fn=dn.length;if(Dt!=fn&&!ot)return!1;for(var _n=Dt;_n--;){var qn=yt[_n];if(!(ot?qn in b:ni.call(b,qn)))return!1}var fr=Ve.get(f),Ar=Ve.get(b);if(fr&&Ar)return fr==b&&Ar==f;var fi=!0;Ve.set(f,b),Ve.set(b,f);for(var Tr=ot;++_n<Dt;){qn=yt[_n];var Mi=f[qn],Ri=b[qn];if(ie)var mu=ot?ie(Ri,Mi,qn,b,f,Ve):ie(Mi,Ri,qn,f,b,Ve);if(!(mu===n?Mi===Ri||Ce(Mi,Ri,O,ie,Ve):mu)){fi=!1;break}Tr||(Tr=qn=="constructor")}if(fi&&!Tr){var Ll=f.constructor,vu=b.constructor;Ll!=vu&&"constructor"in f&&"constructor"in b&&!(typeof Ll=="function"&&Ll instanceof Ll&&typeof vu=="function"&&vu instanceof vu)&&(fi=!1)}return Ve.delete(f),Ve.delete(b),fi}function hh(f){return d1($w(f,n,Zw),f+"")}function i1(f){return et(f,xa,l1)}function s1(f){return et(f,Ul,Bw)}var o1=es?function(f){return es.get(f)}:C1;function Jm(f){for(var b=f.name+"",O=Bo[b],ie=ni.call(Bo,b)?O.length:0;ie--;){var Ce=O[ie],Ve=Ce.func;if(Ve==null||Ve==f)return Ce.name}return b}function Uf(f){var b=ni.call(Ne,"placeholder")?Ne:f;return b.placeholder}function Er(){var f=Ne.iteratee||L1;return f=f===L1?ar:f,arguments.length?f(arguments[0],arguments[1]):f}function Qm(f,b){var O=f.__data__;return sk(b)?O[typeof b=="string"?"string":"hash"]:O.map}function a1(f){for(var b=xa(f),O=b.length;O--;){var ie=b[O],Ce=f[ie];b[O]=[ie,Ce,jw(Ce)]}return b}function zd(f,b){var O=Es(f,b);return Tt(O)?O:n}function JM(f){var b=ni.call(f,Xa),O=f[Xa];try{f[Xa]=n;var ie=!0}catch{}var Ce=Pi.call(f);return ie&&(b?f[Xa]=O:delete f[Xa]),Ce}var l1=_a?function(f){return f==null?[]:(f=Ei(f),va(_a(f),function(b){return Vi.call(f,b)}))}:E1,Bw=_a?function(f){for(var b=[];f;)Zo(b,l1(f)),f=Ba(f);return b}:E1,tl=st;($n&&tl(new $n(new ArrayBuffer(1)))!=yn||sr&&tl(new sr)!=ee||jr&&tl(jr.resolve())!=Se||Ms&&tl(new Ms)!=Ge||cs&&tl(new cs)!=Lt)&&(tl=function(f){var b=st(f),O=b==ze?f.constructor:n,ie=O?$d(O):"";if(ie)switch(ie){case sh:return yn;case Ra:return ee;case wa:return Se;case la:return Ge;case Od:return Lt}return b});function QM(f,b,O){for(var ie=-1,Ce=O.length;++ie<Ce;){var Ve=O[ie],ot=Ve.size;switch(Ve.type){case"drop":f+=ot;break;case"dropRight":b-=ot;break;case"take":b=Pe(b,f+ot);break;case"takeRight":f=ue(f,b-ot);break}}return{start:f,end:b}}function ek(f){var b=f.match(ln);return b?b[1].split(Jt):[]}function Rw(f,b,O){b=oc(b,f);for(var ie=-1,Ce=b.length,Ve=!1;++ie<Ce;){var ot=Ic(b[ie]);if(!(Ve=f!=null&&O(f,ot)))break;f=f[ot]}return Ve||++ie!=Ce?Ve:(Ce=f==null?0:f.length,!!Ce&&o0(Ce)&&dh(ot,Ce)&&(ii(f)||Vd(f)))}function tk(f){var b=f.length,O=new f.constructor(b);return b&&typeof f[0]=="string"&&ni.call(f,"index")&&(O.index=f.index,O.input=f.input),O}function Fw(f){return typeof f.constructor=="function"&&!Yp(f)?Ro(Ba(f)):{}}function nk(f,b,O){var ie=f.constructor;switch(b){case rn:return t1(f);case X:case J:return new ie(+f);case yn:return jM(f,O);case Ye:case at:case it:case Vt:case Yt:case In:case Sn:case Nn:case Qn:return _w(f,O);case ee:return new ie;case se:case Xe:return new ie(f);case $e:return zM(f);case Ge:return new ie;case lt:return $M(f)}}function rk(f,b){var O=b.length;if(!O)return f;var ie=O-1;return b[ie]=(O>1?"& ":"")+b[ie],b=b.join(O>2?", ":" "),f.replace(Et,`{
/* [wrapped with `+b+`] */
`)}function ik(f){return ii(f)||Vd(f)||!!(Io&&f&&f[Io])}function dh(f,b){var O=typeof f;return b=b??Q,!!b&&(O=="number"||O!="symbol"&&ur.test(f))&&f>-1&&f%1==0&&f<b}function xl(f,b,O){if(!uo(O))return!1;var ie=typeof b;return(ie=="number"?Vl(O)&&dh(b,O.length):ie=="string"&&b in O)?ac(O[b],f):!1}function u1(f,b){if(ii(f))return!1;var O=typeof f;return O=="number"||O=="symbol"||O=="boolean"||f==null||gu(f)?!0:rt.test(f)||!ft.test(f)||b!=null&&f in Ei(b)}function sk(f){var b=typeof f;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?f!=="__proto__":f===null}function c1(f){var b=Jm(f),O=Ne[b];if(typeof O!="function"||!(b in Wr.prototype))return!1;if(f===O)return!0;var ie=o1(O);return!!ie&&f===ie[0]}function ok(f){return!!Us&&Us in f}var ak=Na?fh:P1;function Yp(f){var b=f&&f.constructor,O=typeof b=="function"&&b.prototype||Oa;return f===O}function jw(f){return f===f&&!uo(f)}function zw(f,b){return function(O){return O==null?!1:O[f]===b&&(b!==n||f in Ei(O))}}function lk(f){var b=i0(f,function(ie){return O.size===c&&O.clear(),ie}),O=b.cache;return b}function uk(f,b){var O=f[1],ie=b[1],Ce=O|ie,Ve=Ce<(k|A|fe),ot=ie==fe&&O==V||ie==fe&&O==I&&f[7].length<=b[8]||ie==(fe|I)&&b[7].length<=b[8]&&O==V;if(!(Ve||ot))return f;ie&k&&(f[2]=b[2],Ce|=O&k?0:D);var yt=b[3];if(yt){var Dt=f[3];f[3]=Dt?xw(Dt,yt,b[4]):yt,f[4]=Dt?vo(f[3],d):b[4]}return yt=b[5],yt&&(Dt=f[5],f[5]=Dt?Lw(Dt,yt,b[6]):yt,f[6]=Dt?vo(f[5],d):b[6]),yt=b[7],yt&&(f[7]=yt),ie&fe&&(f[8]=f[8]==null?b[8]:Pe(f[8],b[8])),f[9]==null&&(f[9]=b[9]),f[0]=b[0],f[1]=Ce,f}function ck(f){var b=[];if(f!=null)for(var O in Ei(f))b.push(O);return b}function hk(f){return Pi.call(f)}function $w(f,b,O){return b=ue(b===n?f.length-1:b,0),function(){for(var ie=arguments,Ce=-1,Ve=ue(ie.length-b,0),ot=It(Ve);++Ce<Ve;)ot[Ce]=ie[b+Ce];Ce=-1;for(var yt=It(b+1);++Ce<b;)yt[Ce]=ie[Ce];return yt[b]=O(ot),Li(f,this,yt)}}function Vw(f,b){return b.length<2?f:pr(f,zl(b,0,-1))}function dk(f,b){for(var O=f.length,ie=Pe(b.length,O),Ce=$l(f);ie--;){var Ve=b[ie];f[ie]=dh(Ve,O)?Ce[Ve]:n}return f}function h1(f,b){if(!(b==="constructor"&&typeof f[b]=="function")&&b!="__proto__")return f[b]}var Uw=Ww(rc),Kp=ih||function(f,b){return ms.setTimeout(f,b)},d1=Ww(Um);function Hw(f,b,O){var ie=b+"";return d1(f,rk(ie,fk(ek(ie),O)))}function Ww(f){var b=0,O=0;return function(){var ie=ut(),Ce=j-(ie-O);if(O=ie,Ce>0){if(++b>=N)return arguments[0]}else b=0;return f.apply(n,arguments)}}function e0(f,b){var O=-1,ie=f.length,Ce=ie-1;for(b=b===n?ie:b;++O<b;){var Ve=Rd(O,Ce),ot=f[Ve];f[Ve]=f[O],f[O]=ot}return f.length=b,f}var Gw=lk(function(f){var b=[];return f.charCodeAt(0)===46&&b.push(""),f.replace(wt,function(O,ie,Ce,Ve){b.push(Ce?Ve.replace(sn,"$1"):ie||O)}),b});function Ic(f){if(typeof f=="string"||gu(f))return f;var b=f+"";return b=="0"&&1/f==-1/0?"-0":b}function $d(f){if(f!=null){try{return Ia.call(f)}catch{}try{return f+""}catch{}}return""}function fk(f,b){return $s(Z,function(O){var ie="_."+O[0];b&O[1]&&!Bl(f,ie)&&f.push(ie)}),f.sort()}function qw(f){if(f instanceof Wr)return f.clone();var b=new qs(f.__wrapped__,f.__chain__);return b.__actions__=$l(f.__actions__),b.__index__=f.__index__,b.__values__=f.__values__,b}function pk(f,b,O){(O?xl(f,b,O):b===n)?b=1:b=ue(di(b),0);var ie=f==null?0:f.length;if(!ie||b<1)return[];for(var Ce=0,Ve=0,ot=It(Hs(ie/b));Ce<ie;)ot[Ve++]=zl(f,Ce,Ce+=b);return ot}function gk(f){for(var b=-1,O=f==null?0:f.length,ie=0,Ce=[];++b<O;){var Ve=f[b];Ve&&(Ce[ie++]=Ve)}return Ce}function mk(){var f=arguments.length;if(!f)return[];for(var b=It(f-1),O=arguments[0],ie=f;ie--;)b[ie-1]=arguments[ie];return Zo(ii(O)?$l(O):[O],We(b,1))}var vk=hi(function(f,b){return jo(f)?M(f,We(b,1,jo,!0)):[]}),yk=hi(function(f,b){var O=Bu(b);return jo(O)&&(O=n),jo(f)?M(f,We(b,1,jo,!0),Er(O,2)):[]}),bk=hi(function(f,b){var O=Bu(b);return jo(O)&&(O=n),jo(f)?M(f,We(b,1,jo,!0),n,O):[]});function _k(f,b,O){var ie=f==null?0:f.length;return ie?(b=O||b===n?1:di(b),zl(f,b<0?0:b,ie)):[]}function wk(f,b,O){var ie=f==null?0:f.length;return ie?(b=O||b===n?1:di(b),b=ie-b,zl(f,0,b<0?0:b)):[]}function xk(f,b){return f&&f.length?uh(f,Er(b,3),!0,!0):[]}function Lk(f,b){return f&&f.length?uh(f,Er(b,3),!0):[]}function Sk(f,b,O,ie){var Ce=f==null?0:f.length;return Ce?(O&&typeof O!="number"&&xl(f,b,O)&&(O=0,ie=Ce),Ee(f,b,O,ie)):[]}function Yw(f,b,O){var ie=f==null?0:f.length;if(!ie)return-1;var Ce=O==null?0:di(O);return Ce<0&&(Ce=ue(ie+Ce,0)),Ut(f,Er(b,3),Ce)}function Kw(f,b,O){var ie=f==null?0:f.length;if(!ie)return-1;var Ce=ie-1;return O!==n&&(Ce=di(O),Ce=O<0?ue(ie+Ce,0):Pe(Ce,ie-1)),Ut(f,Er(b,3),Ce,!0)}function Zw(f){var b=f==null?0:f.length;return b?We(f,1):[]}function Ck(f){var b=f==null?0:f.length;return b?We(f,re):[]}function Ek(f,b){var O=f==null?0:f.length;return O?(b=b===n?1:di(b),We(f,b)):[]}function Pk(f){for(var b=-1,O=f==null?0:f.length,ie={};++b<O;){var Ce=f[b];ie[Ce[0]]=Ce[1]}return ie}function Xw(f){return f&&f.length?f[0]:n}function Mk(f,b,O){var ie=f==null?0:f.length;if(!ie)return-1;var Ce=O==null?0:di(O);return Ce<0&&(Ce=ue(ie+Ce,0)),pn(f,b,Ce)}function kk(f){var b=f==null?0:f.length;return b?zl(f,0,-1):[]}var Ak=hi(function(f){var b=Si(f,qh);return b.length&&b[0]===f[0]?be(b):[]}),Tk=hi(function(f){var b=Bu(f),O=Si(f,qh);return b===Bu(O)?b=n:O.pop(),O.length&&O[0]===f[0]?be(O,Er(b,2)):[]}),Dk=hi(function(f){var b=Bu(f),O=Si(f,qh);return b=typeof b=="function"?b:n,b&&O.pop(),O.length&&O[0]===f[0]?be(O,n,b):[]});function Ok(f,b){return f==null?"":P.call(f,b)}function Bu(f){var b=f==null?0:f.length;return b?f[b-1]:n}function Nk(f,b,O){var ie=f==null?0:f.length;if(!ie)return-1;var Ce=ie;return O!==n&&(Ce=di(O),Ce=Ce<0?ue(ie+Ce,0):Pe(Ce,ie-1)),b===b?qa(f,b,Ce):Ut(f,Wn,Ce,!0)}function Ik(f,b){return f&&f.length?wl(f,di(b)):n}var Bk=hi(Jw);function Jw(f,b){return f&&f.length&&b&&b.length?Bf(f,b):f}function Rk(f,b,O){return f&&f.length&&b&&b.length?Bf(f,b,Er(O,2)):f}function Fk(f,b,O){return f&&f.length&&b&&b.length?Bf(f,b,n,O):f}var jk=hh(function(f,b){var O=f==null?0:f.length,ie=Bn(f,b);return Bd(f,Si(b,function(Ce){return dh(Ce,O)?+Ce:Ce}).sort(ww)),ie});function zk(f,b){var O=[];if(!(f&&f.length))return O;var ie=-1,Ce=[],Ve=f.length;for(b=Er(b,3);++ie<Ve;){var ot=f[ie];b(ot,ie,f)&&(O.push(ot),Ce.push(ie))}return Bd(f,Ce),O}function f1(f){return f==null?f:hn.call(f)}function $k(f,b,O){var ie=f==null?0:f.length;return ie?(O&&typeof O!="number"&&xl(f,b,O)?(b=0,O=ie):(b=b==null?0:di(b),O=O===n?ie:di(O)),zl(f,b,O)):[]}function Vk(f,b){return ic(f,b)}function Uk(f,b,O){return Wp(f,b,Er(O,2))}function Hk(f,b){var O=f==null?0:f.length;if(O){var ie=ic(f,b);if(ie<O&&ac(f[ie],b))return ie}return-1}function Wk(f,b){return ic(f,b,!0)}function Gk(f,b,O){return Wp(f,b,Er(O,2),!0)}function qk(f,b){var O=f==null?0:f.length;if(O){var ie=ic(f,b,!0)-1;if(ac(f[ie],b))return ie}return-1}function Yk(f){return f&&f.length?Gp(f):[]}function Kk(f,b){return f&&f.length?Gp(f,Er(b,2)):[]}function Zk(f){var b=f==null?0:f.length;return b?zl(f,1,b):[]}function Xk(f,b,O){return f&&f.length?(b=O||b===n?1:di(b),zl(f,0,b<0?0:b)):[]}function Jk(f,b,O){var ie=f==null?0:f.length;return ie?(b=O||b===n?1:di(b),b=ie-b,zl(f,b<0?0:b,ie)):[]}function Qk(f,b){return f&&f.length?uh(f,Er(b,3),!1,!0):[]}function eA(f,b){return f&&f.length?uh(f,Er(b,3)):[]}var tA=hi(function(f){return Oc(We(f,1,jo,!0))}),nA=hi(function(f){var b=Bu(f);return jo(b)&&(b=n),Oc(We(f,1,jo,!0),Er(b,2))}),rA=hi(function(f){var b=Bu(f);return b=typeof b=="function"?b:n,Oc(We(f,1,jo,!0),n,b)});function iA(f){return f&&f.length?Oc(f):[]}function sA(f,b){return f&&f.length?Oc(f,Er(b,2)):[]}function oA(f,b){return b=typeof b=="function"?b:n,f&&f.length?Oc(f,n,b):[]}function p1(f){if(!(f&&f.length))return[];var b=0;return f=va(f,function(O){if(jo(O))return b=ue(O.length,b),!0}),bs(b,function(O){return Si(f,br(O))})}function Qw(f,b){if(!(f&&f.length))return[];var O=p1(f);return b==null?O:Si(O,function(ie){return Li(b,n,ie)})}var aA=hi(function(f,b){return jo(f)?M(f,b):[]}),lA=hi(function(f){return Nu(va(f,jo))}),uA=hi(function(f){var b=Bu(f);return jo(b)&&(b=n),Nu(va(f,jo),Er(b,2))}),cA=hi(function(f){var b=Bu(f);return b=typeof b=="function"?b:n,Nu(va(f,jo),n,b)}),hA=hi(p1);function dA(f,b){return sc(f||[],b||[],mt)}function fA(f,b){return sc(f||[],b||[],ah)}var pA=hi(function(f){var b=f.length,O=b>1?f[b-1]:n;return O=typeof O=="function"?(f.pop(),O):n,Qw(f,O)});function ex(f){var b=Ne(f);return b.__chain__=!0,b}function gA(f,b){return b(f),f}function t0(f,b){return b(f)}var mA=hh(function(f){var b=f.length,O=b?f[0]:0,ie=this.__wrapped__,Ce=function(Ve){return Bn(Ve,f)};return b>1||this.__actions__.length||!(ie instanceof Wr)||!dh(O)?this.thru(Ce):(ie=ie.slice(O,+O+(b?1:0)),ie.__actions__.push({func:t0,args:[Ce],thisArg:n}),new qs(ie,this.__chain__).thru(function(Ve){return b&&!Ve.length&&Ve.push(n),Ve}))});function vA(){return ex(this)}function yA(){return new qs(this.value(),this.__chain__)}function bA(){this.__values__===n&&(this.__values__=px(this.value()));var f=this.__index__>=this.__values__.length,b=f?n:this.__values__[this.__index__++];return{done:f,value:b}}function _A(){return this}function wA(f){for(var b,O=this;O instanceof tc;){var ie=qw(O);ie.__index__=0,ie.__values__=n,b?Ce.__wrapped__=ie:b=ie;var Ce=ie;O=O.__wrapped__}return Ce.__wrapped__=f,b}function xA(){var f=this.__wrapped__;if(f instanceof Wr){var b=f;return this.__actions__.length&&(b=new Wr(this)),b=b.reverse(),b.__actions__.push({func:t0,args:[f1],thisArg:n}),new qs(b,this.__chain__)}return this.thru(f1)}function LA(){return Ou(this.__wrapped__,this.__actions__)}var SA=qm(function(f,b,O){ni.call(f,O)?++f[O]:Fn(f,O,1)});function CA(f,b,O){var ie=ii(f)?du:oe;return O&&xl(f,b,O)&&(b=n),ie(f,Er(b,3))}function EA(f,b){var O=ii(f)?va:tt;return O(f,Er(b,3))}var PA=Pw(Yw),MA=Pw(Kw);function kA(f,b){return We(n0(f,b),1)}function AA(f,b){return We(n0(f,b),re)}function TA(f,b,O){return O=O===n?1:di(O),We(n0(f,b),O)}function tx(f,b){var O=ii(f)?$s:W;return O(f,Er(b,3))}function nx(f,b){var O=ii(f)?ma:ne;return O(f,Er(b,3))}var DA=qm(function(f,b,O){ni.call(f,O)?f[O].push(b):Fn(f,O,[b])});function OA(f,b,O,ie){f=Vl(f)?f:Wf(f),O=O&&!ie?di(O):0;var Ce=f.length;return O<0&&(O=ue(Ce+O,0)),a0(f)?O<=Ce&&f.indexOf(b,O)>-1:!!Ce&&pn(f,b,O)>-1}var NA=hi(function(f,b,O){var ie=-1,Ce=typeof b=="function",Ve=Vl(f)?It(f.length):[];return W(f,function(ot){Ve[++ie]=Ce?Li(b,ot,O):Fe(ot,b,O)}),Ve}),IA=qm(function(f,b,O){Fn(f,O,b)});function n0(f,b){var O=ii(f)?Si:Hi;return O(f,Er(b,3))}function BA(f,b,O,ie){return f==null?[]:(ii(b)||(b=b==null?[]:[b]),O=ie?n:O,ii(O)||(O=O==null?[]:[O]),Dc(f,b,O))}var RA=qm(function(f,b,O){f[O?0:1].push(b)},function(){return[[],[]]});function FA(f,b,O){var ie=ii(f)?Ga:qi,Ce=arguments.length<3;return ie(f,Er(b,4),O,Ce,W)}function jA(f,b,O){var ie=ii(f)?ys:qi,Ce=arguments.length<3;return ie(f,Er(b,4),O,Ce,ne)}function zA(f,b){var O=ii(f)?va:tt;return O(f,s0(Er(b,3)))}function $A(f){var b=ii(f)?jt:Ff;return b(f)}function VA(f,b,O){(O?xl(f,b,O):b===n)?b=1:b=di(b);var ie=ii(f)?Mt:Vm;return ie(f,b)}function UA(f){var b=ii(f)?Kt:Hm;return b(f)}function HA(f){if(f==null)return 0;if(Vl(f))return a0(f)?no(f):f.length;var b=tl(f);return b==ee||b==Ge?f.size:_i(f).length}function WA(f,b,O){var ie=ii(f)?R:Wm;return O&&xl(f,b,O)&&(b=n),ie(f,Er(b,3))}var GA=hi(function(f,b){if(f==null)return[];var O=b.length;return O>1&&xl(f,b[0],b[1])?b=[]:O>2&&xl(b[0],b[1],b[2])&&(b=[b[0]]),Dc(f,We(b,1),[])}),r0=_o||function(){return ms.Date.now()};function qA(f,b){if(typeof b!="function")throw new Qi(o);return f=di(f),function(){if(--f<1)return b.apply(this,arguments)}}function rx(f,b,O){return b=O?n:b,b=f&&b==null?f.length:b,ch(f,fe,n,n,n,n,b)}function ix(f,b){var O;if(typeof b!="function")throw new Qi(o);return f=di(f),function(){return--f>0&&(O=b.apply(this,arguments)),f<=1&&(b=n),O}}var g1=hi(function(f,b,O){var ie=k;if(O.length){var Ce=vo(O,Uf(g1));ie|=te}return ch(f,ie,b,O,Ce)}),sx=hi(function(f,b,O){var ie=k|A;if(O.length){var Ce=vo(O,Uf(sx));ie|=te}return ch(b,ie,f,O,Ce)});function ox(f,b,O){b=O?n:b;var ie=ch(f,V,n,n,n,n,n,b);return ie.placeholder=ox.placeholder,ie}function ax(f,b,O){b=O?n:b;var ie=ch(f,Y,n,n,n,n,n,b);return ie.placeholder=ax.placeholder,ie}function lx(f,b,O){var ie,Ce,Ve,ot,yt,Dt,dn=0,fn=!1,_n=!1,qn=!0;if(typeof f!="function")throw new Qi(o);b=Ru(b)||0,uo(O)&&(fn=!!O.leading,_n="maxWait"in O,Ve=_n?ue(Ru(O.maxWait)||0,b):Ve,qn="trailing"in O?!!O.trailing:qn);function fr(zo){var lc=ie,gh=Ce;return ie=Ce=n,dn=zo,ot=f.apply(gh,lc),ot}function Ar(zo){return dn=zo,yt=Kp(Mi,b),fn?fr(zo):ot}function fi(zo){var lc=zo-Dt,gh=zo-dn,Px=b-lc;return _n?Pe(Px,Ve-gh):Px}function Tr(zo){var lc=zo-Dt,gh=zo-dn;return Dt===n||lc>=b||lc<0||_n&&gh>=Ve}function Mi(){var zo=r0();if(Tr(zo))return Ri(zo);yt=Kp(Mi,fi(zo))}function Ri(zo){return yt=n,qn&&ie?fr(zo):(ie=Ce=n,ot)}function mu(){yt!==n&&zf(yt),dn=0,ie=Dt=Ce=yt=n}function Ll(){return yt===n?ot:Ri(r0())}function vu(){var zo=r0(),lc=Tr(zo);if(ie=arguments,Ce=this,Dt=zo,lc){if(yt===n)return Ar(Dt);if(_n)return zf(yt),yt=Kp(Mi,b),fr(Dt)}return yt===n&&(yt=Kp(Mi,b)),ot}return vu.cancel=mu,vu.flush=Ll,vu}var YA=hi(function(f,b){return S(f,1,b)}),KA=hi(function(f,b,O){return S(f,Ru(b)||0,O)});function ZA(f){return ch(f,F)}function i0(f,b){if(typeof f!="function"||b!=null&&typeof b!="function")throw new Qi(o);var O=function(){var ie=arguments,Ce=b?b.apply(this,ie):ie[0],Ve=O.cache;if(Ve.has(Ce))return Ve.get(Ce);var ot=f.apply(this,ie);return O.cache=Ve.set(Ce,ot)||Ve,ot};return O.cache=new(i0.Cache||Qa),O}i0.Cache=Qa;function s0(f){if(typeof f!="function")throw new Qi(o);return function(){var b=arguments;switch(b.length){case 0:return!f.call(this);case 1:return!f.call(this,b[0]);case 2:return!f.call(this,b[0],b[1]);case 3:return!f.call(this,b[0],b[1],b[2])}return!f.apply(this,b)}}function XA(f){return ix(2,f)}var JA=e1(function(f,b){b=b.length==1&&ii(b[0])?Si(b[0],Hr(Er())):Si(We(b,1),Hr(Er()));var O=b.length;return hi(function(ie){for(var Ce=-1,Ve=Pe(ie.length,O);++Ce<Ve;)ie[Ce]=b[Ce].call(this,ie[Ce]);return Li(f,this,ie)})}),m1=hi(function(f,b){var O=vo(b,Uf(m1));return ch(f,te,n,b,O)}),ux=hi(function(f,b){var O=vo(b,Uf(ux));return ch(f,ge,n,b,O)}),QA=hh(function(f,b){return ch(f,I,n,n,n,b)});function e6(f,b){if(typeof f!="function")throw new Qi(o);return b=b===n?b:di(b),hi(f,b)}function t6(f,b){if(typeof f!="function")throw new Qi(o);return b=b==null?0:ue(di(b),0),hi(function(O){var ie=O[b],Ce=Iu(O,0,b);return ie&&Zo(Ce,ie),Li(f,this,Ce)})}function n6(f,b,O){var ie=!0,Ce=!0;if(typeof f!="function")throw new Qi(o);return uo(O)&&(ie="leading"in O?!!O.leading:ie,Ce="trailing"in O?!!O.trailing:Ce),lx(f,b,{leading:ie,maxWait:b,trailing:Ce})}function r6(f){return rx(f,1)}function i6(f,b){return m1(jd(b),f)}function s6(){if(!arguments.length)return[];var f=arguments[0];return ii(f)?f:[f]}function o6(f){return h(f,m)}function a6(f,b){return b=typeof b=="function"?b:n,h(f,m,b)}function l6(f){return h(f,p|m)}function u6(f,b){return b=typeof b=="function"?b:n,h(f,p|m,b)}function c6(f,b){return b==null||_(f,b,xa(b))}function ac(f,b){return f===b||f!==f&&b!==b}var h6=Xm(pt),d6=Xm(function(f,b){return f>=b}),Vd=Re(function(){return arguments}())?Re:function(f){return wo(f)&&ni.call(f,"callee")&&!Vi.call(f,"callee")},ii=It.isArray,f6=Au?Hr(Au):Ue;function Vl(f){return f!=null&&o0(f.length)&&!fh(f)}function jo(f){return wo(f)&&Vl(f)}function p6(f){return f===!0||f===!1||wo(f)&&st(f)==X}var Yh=u||P1,g6=Ma?Hr(Ma):He;function m6(f){return wo(f)&&f.nodeType===1&&!Zp(f)}function v6(f){if(f==null)return!0;if(Vl(f)&&(ii(f)||typeof f=="string"||typeof f.splice=="function"||Yh(f)||Hf(f)||Vd(f)))return!f.length;var b=tl(f);if(b==ee||b==Ge)return!f.size;if(Yp(f))return!_i(f).length;for(var O in f)if(ni.call(f,O))return!1;return!0}function y6(f,b){return ct(f,b)}function b6(f,b,O){O=typeof O=="function"?O:n;var ie=O?O(f,b):n;return ie===n?ct(f,b,n,O):!!ie}function v1(f){if(!wo(f))return!1;var b=st(f);return b==Te||b==De||typeof f.message=="string"&&typeof f.name=="string"&&!Zp(f)}function _6(f){return typeof f=="number"&&y(f)}function fh(f){if(!uo(f))return!1;var b=st(f);return b==Je||b==he||b==de||b==ve}function cx(f){return typeof f=="number"&&f==di(f)}function o0(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=Q}function uo(f){var b=typeof f;return f!=null&&(b=="object"||b=="function")}function wo(f){return f!=null&&typeof f=="object"}var hx=uu?Hr(uu):vt;function w6(f,b){return f===b||At(f,b,a1(b))}function x6(f,b,O){return O=typeof O=="function"?O:n,At(f,b,a1(b),O)}function L6(f){return dx(f)&&f!=+f}function S6(f){if(ak(f))throw new tr(s);return Tt(f)}function C6(f){return f===null}function E6(f){return f==null}function dx(f){return typeof f=="number"||wo(f)&&st(f)==se}function Zp(f){if(!wo(f)||st(f)!=ze)return!1;var b=Ba(f);if(b===null)return!0;var O=ni.call(b,"constructor")&&b.constructor;return typeof O=="function"&&O instanceof O&&Ia.call(O)==Ii}var y1=cu?Hr(cu):an;function P6(f){return cx(f)&&f>=-9007199254740991&&f<=Q}var fx=oa?Hr(oa):Gn;function a0(f){return typeof f=="string"||!ii(f)&&wo(f)&&st(f)==Xe}function gu(f){return typeof f=="symbol"||wo(f)&&st(f)==lt}var Hf=hu?Hr(hu):Kn;function M6(f){return f===n}function k6(f){return wo(f)&&tl(f)==Lt}function A6(f){return wo(f)&&st(f)==Gt}var T6=Xm(ri),D6=Xm(function(f,b){return f<=b});function px(f){if(!f)return[];if(Vl(f))return a0(f)?ro(f):$l(f);if(mr&&f[mr])return Oo(f[mr]());var b=tl(f),O=b==ee?jl:b==Ge?yo:Wf;return O(f)}function ph(f){if(!f)return f===0?f:0;if(f=Ru(f),f===re||f===-1/0){var b=f<0?-1:1;return b*_e}return f===f?f:0}function di(f){var b=ph(f),O=b%1;return b===b?O?b-O:b:0}function gx(f){return f?or(di(f),0,nt):0}function Ru(f){if(typeof f=="number")return f;if(gu(f))return we;if(uo(f)){var b=typeof f.valueOf=="function"?f.valueOf():f;f=uo(b)?b+"":b}if(typeof f!="string")return f===0?f:+f;f=Xo(f);var O=ki.test(f);return O||Qr.test(f)?lu(f.slice(2),O?2:8):zr.test(f)?we:+f}function mx(f){return Nc(f,Ul(f))}function O6(f){return f?or(di(f),-9007199254740991,Q):f===0?f:0}function os(f){return f==null?"":el(f)}var N6=$f(function(f,b){if(Yp(b)||Vl(b)){Nc(b,xa(b),f);return}for(var O in b)ni.call(b,O)&&mt(f,O,b[O])}),vx=$f(function(f,b){Nc(b,Ul(b),f)}),l0=$f(function(f,b,O,ie){Nc(b,Ul(b),f,ie)}),I6=$f(function(f,b,O,ie){Nc(b,xa(b),f,ie)}),B6=hh(Bn);function R6(f,b){var O=Ro(f);return b==null?O:mn(O,b)}var F6=hi(function(f,b){f=Ei(f);var O=-1,ie=b.length,Ce=ie>2?b[2]:n;for(Ce&&xl(b[0],b[1],Ce)&&(ie=1);++O<ie;)for(var Ve=b[O],ot=Ul(Ve),yt=-1,Dt=ot.length;++yt<Dt;){var dn=ot[yt],fn=f[dn];(fn===n||ac(fn,Oa[dn])&&!ni.call(f,dn))&&(f[dn]=Ve[dn])}return f}),j6=hi(function(f){return f.push(n,Nw),Li(yx,n,f)});function z6(f,b){return kt(f,Er(b,3),Qt)}function $6(f,b){return kt(f,Er(b,3),xn)}function V6(f,b){return f==null?f:_t(f,Er(b,3),Ul)}function U6(f,b){return f==null?f:Bt(f,Er(b,3),Ul)}function H6(f,b){return f&&Qt(f,Er(b,3))}function W6(f,b){return f&&xn(f,Er(b,3))}function G6(f){return f==null?[]:Tn(f,xa(f))}function q6(f){return f==null?[]:Tn(f,Ul(f))}function b1(f,b,O){var ie=f==null?n:pr(f,b);return ie===n?O:ie}function Y6(f,b){return f!=null&&Rw(f,b,zt)}function _1(f,b){return f!=null&&Rw(f,b,Pt)}var K6=kw(function(f,b,O){b!=null&&typeof b.toString!="function"&&(b=Pi.call(b)),f[b]=O},x1(Hl)),Z6=kw(function(f,b,O){b!=null&&typeof b.toString!="function"&&(b=Pi.call(b)),ni.call(f,b)?f[b].push(O):f[b]=[O]},Er),X6=hi(Fe);function xa(f){return Vl(f)?Ft(f):_i(f)}function Ul(f){return Vl(f)?Ft(f,!0):Bi(f)}function J6(f,b){var O={};return b=Er(b,3),Qt(f,function(ie,Ce,Ve){Fn(O,b(ie,Ce,Ve),ie)}),O}function Q6(f,b){var O={};return b=Er(b,3),Qt(f,function(ie,Ce,Ve){Fn(O,Ce,b(ie,Ce,Ve))}),O}var eT=$f(function(f,b,O){Fa(f,b,O)}),yx=$f(function(f,b,O,ie){Fa(f,b,O,ie)}),tT=hh(function(f,b){var O={};if(f==null)return O;var ie=!1;b=Si(b,function(Ve){return Ve=oc(Ve,f),ie||(ie=Ve.length>1),Ve}),Nc(f,s1(f),O),ie&&(O=h(O,p|v|m,KM));for(var Ce=b.length;Ce--;)lh(O,b[Ce]);return O});function nT(f,b){return bx(f,s0(Er(b)))}var rT=hh(function(f,b){return f==null?{}:ja(f,b)});function bx(f,b){if(f==null)return{};var O=Si(s1(f),function(ie){return[ie]});return b=Er(b),lo(f,O,function(ie,Ce){return b(ie,Ce[0])})}function iT(f,b,O){b=oc(b,f);var ie=-1,Ce=b.length;for(Ce||(Ce=1,f=n);++ie<Ce;){var Ve=f==null?n:f[Ic(b[ie])];Ve===n&&(ie=Ce,Ve=O),f=fh(Ve)?Ve.call(f):Ve}return f}function sT(f,b,O){return f==null?f:ah(f,b,O)}function oT(f,b,O,ie){return ie=typeof ie=="function"?ie:n,f==null?f:ah(f,b,O,ie)}var _x=Dw(xa),wx=Dw(Ul);function aT(f,b,O){var ie=ii(f),Ce=ie||Yh(f)||Hf(f);if(b=Er(b,4),O==null){var Ve=f&&f.constructor;Ce?O=ie?new Ve:[]:uo(f)?O=fh(Ve)?Ro(Ba(f)):{}:O={}}return(Ce?$s:Qt)(f,function(ot,yt,Dt){return b(O,ot,yt,Dt)}),O}function lT(f,b){return f==null?!0:lh(f,b)}function uT(f,b,O){return f==null?f:jf(f,b,jd(O))}function cT(f,b,O,ie){return ie=typeof ie=="function"?ie:n,f==null?f:jf(f,b,jd(O),ie)}function Wf(f){return f==null?[]:eo(f,xa(f))}function hT(f){return f==null?[]:eo(f,Ul(f))}function dT(f,b,O){return O===n&&(O=b,b=n),O!==n&&(O=Ru(O),O=O===O?O:0),b!==n&&(b=Ru(b),b=b===b?b:0),or(Ru(f),b,O)}function fT(f,b,O){return b=ph(b),O===n?(O=b,b=0):O=ph(O),f=Ru(f),Rt(f,b,O)}function pT(f,b,O){if(O&&typeof O!="boolean"&&xl(f,b,O)&&(b=O=n),O===n&&(typeof b=="boolean"?(O=b,b=n):typeof f=="boolean"&&(O=f,f=n)),f===n&&b===n?(f=0,b=1):(f=ph(f),b===n?(b=f,f=0):b=ph(b)),f>b){var ie=f;f=b,b=ie}if(O||f%1||b%1){var Ce=Ht();return Pe(f+Ce*(b-f+Nl("1e-"+((Ce+"").length-1))),b)}return Rd(f,b)}var gT=Vf(function(f,b,O){return b=b.toLowerCase(),f+(O?xx(b):b)});function xx(f){return w1(os(f).toLowerCase())}function Lx(f){return f=os(f),f&&f.replace(wr,Qu).replace(ml,"")}function mT(f,b,O){f=os(f),b=el(b);var ie=f.length;O=O===n?ie:or(di(O),0,ie);var Ce=O;return O-=b.length,O>=0&&f.slice(O,Ce)==b}function vT(f){return f=os(f),f&&ir.test(f)?f.replace(Zn,yl):f}function yT(f){return f=os(f),f&&Hn.test(f)?f.replace(kn,"\\$&"):f}var bT=Vf(function(f,b,O){return f+(O?"-":"")+b.toLowerCase()}),_T=Vf(function(f,b,O){return f+(O?" ":"")+b.toLowerCase()}),wT=Ew("toLowerCase");function xT(f,b,O){f=os(f),b=di(b);var ie=b?no(f):0;if(!b||ie>=b)return f;var Ce=(b-ie)/2;return Zm(Ws(Ce),O)+f+Zm(Hs(Ce),O)}function LT(f,b,O){f=os(f),b=di(b);var ie=b?no(f):0;return b&&ie<b?f+Zm(b-ie,O):f}function ST(f,b,O){f=os(f),b=di(b);var ie=b?no(f):0;return b&&ie<b?Zm(b-ie,O)+f:f}function CT(f,b,O){return O||b==null?b=0:b&&(b=+b),Nt(os(f).replace(wn,""),b||0)}function ET(f,b,O){return(O?xl(f,b,O):b===n)?b=1:b=di(b),Rf(os(f),b)}function PT(){var f=arguments,b=os(f[0]);return f.length<3?b:b.replace(f[1],f[2])}var MT=Vf(function(f,b,O){return f+(O?"_":"")+b.toLowerCase()});function kT(f,b,O){return O&&typeof O!="number"&&xl(f,b,O)&&(b=O=n),O=O===n?nt:O>>>0,O?(f=os(f),f&&(typeof b=="string"||b!=null&&!y1(b))&&(b=el(b),!b&&Aa(f))?Iu(ro(f),0,O):f.split(b,O)):[]}var AT=Vf(function(f,b,O){return f+(O?" ":"")+w1(b)});function TT(f,b,O){return f=os(f),O=O==null?0:or(di(O),0,f.length),b=el(b),f.slice(O,O+b.length)==b}function DT(f,b,O){var ie=Ne.templateSettings;O&&xl(f,b,O)&&(b=n),f=os(f),b=l0({},b,ie,Ow);var Ce=l0({},b.imports,ie.imports,Ow),Ve=xa(Ce),ot=eo(Ce,Ve),yt,Dt,dn=0,fn=b.interpolate||Rr,_n="__p += '",qn=fu((b.escape||Rr).source+"|"+fn.source+"|"+(fn===ls?tn:Rr).source+"|"+(b.evaluate||Rr).source+"|$","g"),fr="//# sourceURL="+(ni.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ou+"]")+`
`;f.replace(qn,function(Tr,Mi,Ri,mu,Ll,vu){return Ri||(Ri=mu),_n+=f.slice(dn,vu).replace(Lr,bl),Mi&&(yt=!0,_n+=`' +
__e(`+Mi+`) +
'`),Ll&&(Dt=!0,_n+=`';
`+Ll+`;
__p += '`),Ri&&(_n+=`' +
((__t = (`+Ri+`)) == null ? '' : __t) +
'`),dn=vu+Tr.length,Tr}),_n+=`';
`;var Ar=ni.call(b,"variable")&&b.variable;if(!Ar)_n=`with (obj) {
`+_n+`
}
`;else if(Nr.test(Ar))throw new tr(a);_n=(Dt?_n.replace(Xt,""):_n).replace(Cn,"$1").replace(Dn,"$1;"),_n="function("+(Ar||"obj")+`) {
`+(Ar?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(yt?", __e = _.escape":"")+(Dt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+_n+`return __p
}`;var fi=Cx(function(){return Sr(Ve,fr+"return "+_n).apply(n,ot)});if(fi.source=_n,v1(fi))throw fi;return fi}function OT(f){return os(f).toLowerCase()}function NT(f){return os(f).toUpperCase()}function IT(f,b,O){if(f=os(f),f&&(O||b===n))return Xo(f);if(!f||!(b=el(b)))return f;var ie=ro(f),Ce=ro(b),Ve=mo(ie,Ce),ot=Tu(ie,Ce)+1;return Iu(ie,Ve,ot).join("")}function BT(f,b,O){if(f=os(f),f&&(O||b===n))return f.slice(0,Ya(f)+1);if(!f||!(b=el(b)))return f;var ie=ro(f),Ce=Tu(ie,ro(b))+1;return Iu(ie,0,Ce).join("")}function RT(f,b,O){if(f=os(f),f&&(O||b===n))return f.replace(wn,"");if(!f||!(b=el(b)))return f;var ie=ro(f),Ce=mo(ie,ro(b));return Iu(ie,Ce).join("")}function FT(f,b){var O=K,ie=B;if(uo(b)){var Ce="separator"in b?b.separator:Ce;O="length"in b?di(b.length):O,ie="omission"in b?el(b.omission):ie}f=os(f);var Ve=f.length;if(Aa(f)){var ot=ro(f);Ve=ot.length}if(O>=Ve)return f;var yt=O-no(ie);if(yt<1)return ie;var Dt=ot?Iu(ot,0,yt).join(""):f.slice(0,yt);if(Ce===n)return Dt+ie;if(ot&&(yt+=Dt.length-yt),y1(Ce)){if(f.slice(yt).search(Ce)){var dn,fn=Dt;for(Ce.global||(Ce=fu(Ce.source,os(jn.exec(Ce))+"g")),Ce.lastIndex=0;dn=Ce.exec(fn);)var _n=dn.index;Dt=Dt.slice(0,_n===n?yt:_n)}}else if(f.indexOf(el(Ce),yt)!=yt){var qn=Dt.lastIndexOf(Ce);qn>-1&&(Dt=Dt.slice(0,qn))}return Dt+ie}function jT(f){return f=os(f),f&&_r.test(f)?f.replace(rr,Ka):f}var zT=Vf(function(f,b,O){return f+(O?" ":"")+b.toUpperCase()}),w1=Ew("toUpperCase");function Sx(f,b,O){return f=os(f),b=O?n:b,b===n?Jo(f)?Ta(f):dt(f):f.match(b)||[]}var Cx=hi(function(f,b){try{return Li(f,n,b)}catch(O){return v1(O)?O:new tr(O)}}),$T=hh(function(f,b){return $s(b,function(O){O=Ic(O),Fn(f,O,g1(f[O],f))}),f});function VT(f){var b=f==null?0:f.length,O=Er();return f=b?Si(f,function(ie){if(typeof ie[1]!="function")throw new Qi(o);return[O(ie[0]),ie[1]]}):[],hi(function(ie){for(var Ce=-1;++Ce<b;){var Ve=f[Ce];if(Li(Ve[0],this,ie))return Li(Ve[1],this,ie)}})}function UT(f){return g(h(f,p))}function x1(f){return function(){return f}}function HT(f,b){return f==null||f!==f?b:f}var WT=Mw(),GT=Mw(!0);function Hl(f){return f}function L1(f){return ar(typeof f=="function"?f:h(f,p))}function qT(f){return Fo(h(f,p))}function YT(f,b){return nc(f,h(b,p))}var KT=hi(function(f,b){return function(O){return Fe(O,f,b)}}),ZT=hi(function(f,b){return function(O){return Fe(f,O,b)}});function S1(f,b,O){var ie=xa(b),Ce=Tn(b,ie);O==null&&!(uo(b)&&(Ce.length||!ie.length))&&(O=b,b=f,f=this,Ce=Tn(b,xa(b)));var Ve=!(uo(O)&&"chain"in O)||!!O.chain,ot=fh(f);return $s(Ce,function(yt){var Dt=b[yt];f[yt]=Dt,ot&&(f.prototype[yt]=function(){var dn=this.__chain__;if(Ve||dn){var fn=f(this.__wrapped__),_n=fn.__actions__=$l(this.__actions__);return _n.push({func:Dt,args:arguments,thisArg:f}),fn.__chain__=dn,fn}return Dt.apply(f,Zo([this.value()],arguments))})}),f}function XT(){return ms._===this&&(ms._=_s),this}function C1(){}function JT(f){return f=di(f),hi(function(b){return wl(b,f)})}var QT=n1(Si),eD=n1(du),tD=n1(R);function Ex(f){return u1(f)?br(Ic(f)):ws(f)}function nD(f){return function(b){return f==null?n:pr(f,b)}}var rD=Aw(),iD=Aw(!0);function E1(){return[]}function P1(){return!1}function sD(){return{}}function oD(){return""}function aD(){return!0}function lD(f,b){if(f=di(f),f<1||f>Q)return[];var O=nt,ie=Pe(f,nt);b=Er(b),f-=nt;for(var Ce=bs(ie,b);++O<f;)b(O);return Ce}function uD(f){return ii(f)?Si(f,Ic):gu(f)?[f]:$l(Gw(os(f)))}function cD(f){var b=++ya;return os(f)+b}var hD=Km(function(f,b){return f+b},0),dD=r1("ceil"),fD=Km(function(f,b){return f/b},1),pD=r1("floor");function gD(f){return f&&f.length?ye(f,Hl,pt):n}function mD(f,b){return f&&f.length?ye(f,Er(b,2),pt):n}function vD(f){return cr(f,Hl)}function yD(f,b){return cr(f,Er(b,2))}function bD(f){return f&&f.length?ye(f,Hl,ri):n}function _D(f,b){return f&&f.length?ye(f,Er(b,2),ri):n}var wD=Km(function(f,b){return f*b},1),xD=r1("round"),LD=Km(function(f,b){return f-b},0);function SD(f){return f&&f.length?Ci(f,Hl):0}function CD(f,b){return f&&f.length?Ci(f,Er(b,2)):0}return Ne.after=qA,Ne.ary=rx,Ne.assign=N6,Ne.assignIn=vx,Ne.assignInWith=l0,Ne.assignWith=I6,Ne.at=B6,Ne.before=ix,Ne.bind=g1,Ne.bindAll=$T,Ne.bindKey=sx,Ne.castArray=s6,Ne.chain=ex,Ne.chunk=pk,Ne.compact=gk,Ne.concat=mk,Ne.cond=VT,Ne.conforms=UT,Ne.constant=x1,Ne.countBy=SA,Ne.create=R6,Ne.curry=ox,Ne.curryRight=ax,Ne.debounce=lx,Ne.defaults=F6,Ne.defaultsDeep=j6,Ne.defer=YA,Ne.delay=KA,Ne.difference=vk,Ne.differenceBy=yk,Ne.differenceWith=bk,Ne.drop=_k,Ne.dropRight=wk,Ne.dropRightWhile=xk,Ne.dropWhile=Lk,Ne.fill=Sk,Ne.filter=EA,Ne.flatMap=kA,Ne.flatMapDeep=AA,Ne.flatMapDepth=TA,Ne.flatten=Zw,Ne.flattenDeep=Ck,Ne.flattenDepth=Ek,Ne.flip=ZA,Ne.flow=WT,Ne.flowRight=GT,Ne.fromPairs=Pk,Ne.functions=G6,Ne.functionsIn=q6,Ne.groupBy=DA,Ne.initial=kk,Ne.intersection=Ak,Ne.intersectionBy=Tk,Ne.intersectionWith=Dk,Ne.invert=K6,Ne.invertBy=Z6,Ne.invokeMap=NA,Ne.iteratee=L1,Ne.keyBy=IA,Ne.keys=xa,Ne.keysIn=Ul,Ne.map=n0,Ne.mapKeys=J6,Ne.mapValues=Q6,Ne.matches=qT,Ne.matchesProperty=YT,Ne.memoize=i0,Ne.merge=eT,Ne.mergeWith=yx,Ne.method=KT,Ne.methodOf=ZT,Ne.mixin=S1,Ne.negate=s0,Ne.nthArg=JT,Ne.omit=tT,Ne.omitBy=nT,Ne.once=XA,Ne.orderBy=BA,Ne.over=QT,Ne.overArgs=JA,Ne.overEvery=eD,Ne.overSome=tD,Ne.partial=m1,Ne.partialRight=ux,Ne.partition=RA,Ne.pick=rT,Ne.pickBy=bx,Ne.property=Ex,Ne.propertyOf=nD,Ne.pull=Bk,Ne.pullAll=Jw,Ne.pullAllBy=Rk,Ne.pullAllWith=Fk,Ne.pullAt=jk,Ne.range=rD,Ne.rangeRight=iD,Ne.rearg=QA,Ne.reject=zA,Ne.remove=zk,Ne.rest=e6,Ne.reverse=f1,Ne.sampleSize=VA,Ne.set=sT,Ne.setWith=oT,Ne.shuffle=UA,Ne.slice=$k,Ne.sortBy=GA,Ne.sortedUniq=Yk,Ne.sortedUniqBy=Kk,Ne.split=kT,Ne.spread=t6,Ne.tail=Zk,Ne.take=Xk,Ne.takeRight=Jk,Ne.takeRightWhile=Qk,Ne.takeWhile=eA,Ne.tap=gA,Ne.throttle=n6,Ne.thru=t0,Ne.toArray=px,Ne.toPairs=_x,Ne.toPairsIn=wx,Ne.toPath=uD,Ne.toPlainObject=mx,Ne.transform=aT,Ne.unary=r6,Ne.union=tA,Ne.unionBy=nA,Ne.unionWith=rA,Ne.uniq=iA,Ne.uniqBy=sA,Ne.uniqWith=oA,Ne.unset=lT,Ne.unzip=p1,Ne.unzipWith=Qw,Ne.update=uT,Ne.updateWith=cT,Ne.values=Wf,Ne.valuesIn=hT,Ne.without=aA,Ne.words=Sx,Ne.wrap=i6,Ne.xor=lA,Ne.xorBy=uA,Ne.xorWith=cA,Ne.zip=hA,Ne.zipObject=dA,Ne.zipObjectDeep=fA,Ne.zipWith=pA,Ne.entries=_x,Ne.entriesIn=wx,Ne.extend=vx,Ne.extendWith=l0,S1(Ne,Ne),Ne.add=hD,Ne.attempt=Cx,Ne.camelCase=gT,Ne.capitalize=xx,Ne.ceil=dD,Ne.clamp=dT,Ne.clone=o6,Ne.cloneDeep=l6,Ne.cloneDeepWith=u6,Ne.cloneWith=a6,Ne.conformsTo=c6,Ne.deburr=Lx,Ne.defaultTo=HT,Ne.divide=fD,Ne.endsWith=mT,Ne.eq=ac,Ne.escape=vT,Ne.escapeRegExp=yT,Ne.every=CA,Ne.find=PA,Ne.findIndex=Yw,Ne.findKey=z6,Ne.findLast=MA,Ne.findLastIndex=Kw,Ne.findLastKey=$6,Ne.floor=pD,Ne.forEach=tx,Ne.forEachRight=nx,Ne.forIn=V6,Ne.forInRight=U6,Ne.forOwn=H6,Ne.forOwnRight=W6,Ne.get=b1,Ne.gt=h6,Ne.gte=d6,Ne.has=Y6,Ne.hasIn=_1,Ne.head=Xw,Ne.identity=Hl,Ne.includes=OA,Ne.indexOf=Mk,Ne.inRange=fT,Ne.invoke=X6,Ne.isArguments=Vd,Ne.isArray=ii,Ne.isArrayBuffer=f6,Ne.isArrayLike=Vl,Ne.isArrayLikeObject=jo,Ne.isBoolean=p6,Ne.isBuffer=Yh,Ne.isDate=g6,Ne.isElement=m6,Ne.isEmpty=v6,Ne.isEqual=y6,Ne.isEqualWith=b6,Ne.isError=v1,Ne.isFinite=_6,Ne.isFunction=fh,Ne.isInteger=cx,Ne.isLength=o0,Ne.isMap=hx,Ne.isMatch=w6,Ne.isMatchWith=x6,Ne.isNaN=L6,Ne.isNative=S6,Ne.isNil=E6,Ne.isNull=C6,Ne.isNumber=dx,Ne.isObject=uo,Ne.isObjectLike=wo,Ne.isPlainObject=Zp,Ne.isRegExp=y1,Ne.isSafeInteger=P6,Ne.isSet=fx,Ne.isString=a0,Ne.isSymbol=gu,Ne.isTypedArray=Hf,Ne.isUndefined=M6,Ne.isWeakMap=k6,Ne.isWeakSet=A6,Ne.join=Ok,Ne.kebabCase=bT,Ne.last=Bu,Ne.lastIndexOf=Nk,Ne.lowerCase=_T,Ne.lowerFirst=wT,Ne.lt=T6,Ne.lte=D6,Ne.max=gD,Ne.maxBy=mD,Ne.mean=vD,Ne.meanBy=yD,Ne.min=bD,Ne.minBy=_D,Ne.stubArray=E1,Ne.stubFalse=P1,Ne.stubObject=sD,Ne.stubString=oD,Ne.stubTrue=aD,Ne.multiply=wD,Ne.nth=Ik,Ne.noConflict=XT,Ne.noop=C1,Ne.now=r0,Ne.pad=xT,Ne.padEnd=LT,Ne.padStart=ST,Ne.parseInt=CT,Ne.random=pT,Ne.reduce=FA,Ne.reduceRight=jA,Ne.repeat=ET,Ne.replace=PT,Ne.result=iT,Ne.round=xD,Ne.runInContext=St,Ne.sample=$A,Ne.size=HA,Ne.snakeCase=MT,Ne.some=WA,Ne.sortedIndex=Vk,Ne.sortedIndexBy=Uk,Ne.sortedIndexOf=Hk,Ne.sortedLastIndex=Wk,Ne.sortedLastIndexBy=Gk,Ne.sortedLastIndexOf=qk,Ne.startCase=AT,Ne.startsWith=TT,Ne.subtract=LD,Ne.sum=SD,Ne.sumBy=CD,Ne.template=DT,Ne.times=lD,Ne.toFinite=ph,Ne.toInteger=di,Ne.toLength=gx,Ne.toLower=OT,Ne.toNumber=Ru,Ne.toSafeInteger=O6,Ne.toString=os,Ne.toUpper=NT,Ne.trim=IT,Ne.trimEnd=BT,Ne.trimStart=RT,Ne.truncate=FT,Ne.unescape=jT,Ne.uniqueId=cD,Ne.upperCase=zT,Ne.upperFirst=w1,Ne.each=tx,Ne.eachRight=nx,Ne.first=Xw,S1(Ne,function(){var f={};return Qt(Ne,function(b,O){ni.call(Ne.prototype,O)||(f[O]=b)}),f}(),{chain:!1}),Ne.VERSION=r,$s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){Ne[f].placeholder=Ne}),$s(["drop","take"],function(f,b){Wr.prototype[f]=function(O){O=O===n?1:ue(di(O),0);var ie=this.__filtered__&&!b?new Wr(this):this.clone();return ie.__filtered__?ie.__takeCount__=Pe(O,ie.__takeCount__):ie.__views__.push({size:Pe(O,nt),type:f+(ie.__dir__<0?"Right":"")}),ie},Wr.prototype[f+"Right"]=function(O){return this.reverse()[f](O).reverse()}}),$s(["filter","map","takeWhile"],function(f,b){var O=b+1,ie=O==z||O==$;Wr.prototype[f]=function(Ce){var Ve=this.clone();return Ve.__iteratees__.push({iteratee:Er(Ce,3),type:O}),Ve.__filtered__=Ve.__filtered__||ie,Ve}}),$s(["head","last"],function(f,b){var O="take"+(b?"Right":"");Wr.prototype[f]=function(){return this[O](1).value()[0]}}),$s(["initial","tail"],function(f,b){var O="drop"+(b?"":"Right");Wr.prototype[f]=function(){return this.__filtered__?new Wr(this):this[O](1)}}),Wr.prototype.compact=function(){return this.filter(Hl)},Wr.prototype.find=function(f){return this.filter(f).head()},Wr.prototype.findLast=function(f){return this.reverse().find(f)},Wr.prototype.invokeMap=hi(function(f,b){return typeof f=="function"?new Wr(this):this.map(function(O){return Fe(O,f,b)})}),Wr.prototype.reject=function(f){return this.filter(s0(Er(f)))},Wr.prototype.slice=function(f,b){f=di(f);var O=this;return O.__filtered__&&(f>0||b<0)?new Wr(O):(f<0?O=O.takeRight(-f):f&&(O=O.drop(f)),b!==n&&(b=di(b),O=b<0?O.dropRight(-b):O.take(b-f)),O)},Wr.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},Wr.prototype.toArray=function(){return this.take(nt)},Qt(Wr.prototype,function(f,b){var O=/^(?:filter|find|map|reject)|While$/.test(b),ie=/^(?:head|last)$/.test(b),Ce=Ne[ie?"take"+(b=="last"?"Right":""):b],Ve=ie||/^find/.test(b);Ce&&(Ne.prototype[b]=function(){var ot=this.__wrapped__,yt=ie?[1]:arguments,Dt=ot instanceof Wr,dn=yt[0],fn=Dt||ii(ot),_n=function(Mi){var Ri=Ce.apply(Ne,Zo([Mi],yt));return ie&&qn?Ri[0]:Ri};fn&&O&&typeof dn=="function"&&dn.length!=1&&(Dt=fn=!1);var qn=this.__chain__,fr=!!this.__actions__.length,Ar=Ve&&!qn,fi=Dt&&!fr;if(!Ve&&fn){ot=fi?ot:new Wr(this);var Tr=f.apply(ot,yt);return Tr.__actions__.push({func:t0,args:[_n],thisArg:n}),new qs(Tr,qn)}return Ar&&fi?f.apply(this,yt):(Tr=this.thru(_n),Ar?ie?Tr.value()[0]:Tr.value():Tr)})}),$s(["pop","push","shift","sort","splice","unshift"],function(f){var b=Da[f],O=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",ie=/^(?:pop|shift)$/.test(f);Ne.prototype[f]=function(){var Ce=arguments;if(ie&&!this.__chain__){var Ve=this.value();return b.apply(ii(Ve)?Ve:[],Ce)}return this[O](function(ot){return b.apply(ii(ot)?ot:[],Ce)})}}),Qt(Wr.prototype,function(f,b){var O=Ne[b];if(O){var ie=O.name+"";ni.call(Bo,ie)||(Bo[ie]=[]),Bo[ie].push({name:b,func:O})}}),Bo[Ym(n,A).name]=[{name:"wrapper",func:n}],Wr.prototype.clone=Vh,Wr.prototype.reverse=Af,Wr.prototype.value=Uh,Ne.prototype.at=mA,Ne.prototype.chain=vA,Ne.prototype.commit=yA,Ne.prototype.next=bA,Ne.prototype.plant=wA,Ne.prototype.reverse=xA,Ne.prototype.toJSON=Ne.prototype.valueOf=Ne.prototype.value=LA,Ne.prototype.first=Ne.prototype.head,mr&&(Ne.prototype[mr]=_A),Ne},so=Qo();vs?((vs.exports=so)._=so,dr._=so):ms._=so}).call(Ca)})(qv,qv.exports);var IE=qv.exports;class $a extends Yn.Polygon{constructor(n,r={}){super([],{...r,pmIgnore:!1,interactive:!0});Ze(this,"_width");Ze(this,"_height");Ze(this,"_center");Ze(this,"_rotation");Ze(this,"_isMapReady",!1);Ze(this,"properties");Ze(this,"_helperPoints",{corners:[],midPoints:[]});Ze(this,"_throttledUpdateProperties");const i=n instanceof Yn.LatLngBounds?n:Yn.latLngBounds(n);if(this._center=i.getCenter(),this._rotation=0,console.log("[Rectangle][constructor] Initialisation avec options:",{bounds:i,center:this._center,hasExplicitDimensions:!!(r.width&&r.height),width:r.width,height:r.height}),r.width&&r.height)this._width=r.width,this._height=r.height,console.log("[Rectangle][constructor] Utilisation des dimensions explicites:",{width:this._width,height:this._height});else{const s=i.getSouthWest(),o=i.getNorthEast();this._width=gn.measure("Rectangle.constructor.calculateWidth",()=>{const a=X1([s.lng,s.lat],[o.lng,s.lat],{units:"meters"});return Math.max(a,1)}),this._height=gn.measure("Rectangle.constructor.calculateHeight",()=>{const a=X1([s.lng,s.lat],[s.lng,o.lat],{units:"meters"});return Math.max(a,1)}),console.log("[Rectangle][constructor] Dimensions calculées depuis bounds:",{width:this._width,height:this._height})}(this._width<1||this._height<1)&&this._getPixelsPerMeter()>0&&(this._width=Math.max(this._width,1),this._height=Math.max(this._height,1),this._updatePolygonCoordinates()),this.properties=gn.measure("Rectangle.constructor.initProperties",()=>({type:"Rectangle",style:{...r,name:r.name||""},rotation:this._rotation})),this._throttledUpdateProperties=gn.measure("Rectangle.constructor.initThrottle",()=>IE.throttle(()=>{this.updateProperties()},100)),this.on("add",()=>{this._isMapReady=!0,this._updatePolygonCoordinates(),this.updateProperties()}),this.on("remove",()=>{this._isMapReady=!1})}_updatePolygonCoordinates(){gn.measure("Rectangle._updatePolygonCoordinates",()=>{if(!this._isMapReady||!this._map)return;console.log("[Rectangle][_updatePolygonCoordinates] Début mise à jour avec:",{width:this._width,height:this._height,center:this._center,rotation:this._rotation}),this._width=Math.max(this._width,1),this._height=Math.max(this._height,1);const n=this._width/2,r=this._height/2,i=i5([this._center.lng,this._center.lat],r,0,{units:"meters"}).geometry.coordinates,s=i5([this._center.lng,this._center.lat],n,90,{units:"meters"}).geometry.coordinates,o=Math.abs(i[1]-this._center.lat)*2,a=Math.abs(s[0]-this._center.lng)*2,l=[Yn.latLng(this._center.lat+o/2,this._center.lng-a/2),Yn.latLng(this._center.lat+o/2,this._center.lng+a/2),Yn.latLng(this._center.lat-o/2,this._center.lng+a/2),Yn.latLng(this._center.lat-o/2,this._center.lng-a/2)];if(this._rotation===0){this.setLatLngs(l);return}const c=this._map.latLngToContainerPoint(this._center),d=l.map(k=>this._map.latLngToContainerPoint(k)),p=-this._rotation*Math.PI/180,v=Math.cos(p),m=Math.sin(p),E=d.map(k=>{const A=k.x-c.x,D=k.y-c.y;return Yn.point(c.x+(A*v-D*m),c.y+(A*m+D*v))}).map(k=>this._map.containerPointToLatLng(k));console.log("[Rectangle][_updatePolygonCoordinates] Résultat final:",{corners:E,dimensions:{width:this._width,height:this._height}}),this.setLatLngs(E),this.fire("coordinates:updated",{corners:E,center:this._center,rotation:this._rotation,dimensions:{width:this._width,height:this._height}})})}_getPixelsPerMeter(){return gn.measure("Rectangle._getPixelsPerMeter",()=>{if(!this._isMapReady||!this._map)return 1;const n=Math.max(this._width/1e3,1e-4),r=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(Yn.latLng(this._center.lat,this._center.lng+n)).x-r.x,o=X1([this._center.lng,this._center.lat],[this._center.lng+n,this._center.lat],{units:"meters"}),a=Math.abs(s/o);return isNaN(a)||a<=0?(console.warn("[Rectangle][_getPixelsPerMeter] Ratio invalide, utilisation de la valeur par défaut"),1):a})}getRotatedCorners(){return gn.measure("Rectangle.getRotatedCorners",()=>{try{const n=this.getLatLngs();if(!n||!Array.isArray(n)||n.length===0){const r=this._width/2,i=this._height/2;return[Yn.latLng(this._center.lat+i,this._center.lng-r),Yn.latLng(this._center.lat+i,this._center.lng+r),Yn.latLng(this._center.lat-i,this._center.lng+r),Yn.latLng(this._center.lat-i,this._center.lng-r)]}return n[0]}catch(n){console.warn("Error in getRotatedCorners:",n);const r=this._width/2,i=this._height/2;return[Yn.latLng(this._center.lat+i,this._center.lng-r),Yn.latLng(this._center.lat+i,this._center.lng+r),Yn.latLng(this._center.lat-i,this._center.lng+r),Yn.latLng(this._center.lat-i,this._center.lng-r)]}})}getMidPoints(){return gn.measure("Rectangle.getMidPoints",()=>{try{const n=this.getRotatedCorners();if(!n||n.length<4){const i=this._width/2,s=this._height/2;return[Yn.latLng(this._center.lat+s,this._center.lng),Yn.latLng(this._center.lat,this._center.lng+i),Yn.latLng(this._center.lat-s,this._center.lng),Yn.latLng(this._center.lat,this._center.lng-i)]}if(!n.every(i=>i&&typeof i.lat=="number"&&typeof i.lng=="number"))throw new Error("Invalid corner coordinates");return[this._getMidPoint(n[3],n[0]),this._getMidPoint(n[0],n[1]),this._getMidPoint(n[1],n[2]),this._getMidPoint(n[2],n[3])]}catch(n){console.warn("Error in getMidPoints:",n);const r=this._width/2,i=this._height/2;return[Yn.latLng(this._center.lat+i,this._center.lng),Yn.latLng(this._center.lat,this._center.lng+r),Yn.latLng(this._center.lat-i,this._center.lng),Yn.latLng(this._center.lat,this._center.lng-r)]}})}_getMidPoint(n,r){return gn.measure("Rectangle._getMidPoint",()=>{if(!n||!r||typeof n.lat!="number"||typeof n.lng!="number"||typeof r.lat!="number"||typeof r.lng!="number")throw new Error("Invalid points for midpoint calculation");return Yn.latLng((n.lat+r.lat)/2,(n.lng+r.lng)/2)})}getCenter(){return gn.measure("Rectangle.getCenter",()=>this._center)}setCenter(n){gn.measure("Rectangle.setCenter",()=>{this._center=n,this._updatePolygonCoordinates(),this.updateProperties(),this.updateHelperPointPositions()})}getRotation(){return gn.measure("Rectangle.getRotation",()=>this._rotation)}setRotation(n,r=!1){gn.measure("Rectangle.setRotation",()=>{this._rotation=(n%360+360)%360,this._updatePolygonCoordinates(),r&&this.updateProperties(),this.updateHelperPointPositions(),this.fire("rotation:updated",{angle:this._rotation,corners:this.getRotatedCorners(),center:this._center})})}finalizeRotation(){gn.measure("Rectangle.finalizeRotation",()=>{this.updateProperties()})}getDimensions(){return gn.measure("Rectangle.getDimensions",()=>({width:this._width,height:this._height}))}setDimensions(n,r){gn.measure("Rectangle.setDimensions",()=>{console.log("[Rectangle][setDimensions] Début de la mise à jour des dimensions:",{oldWidth:this._width,oldHeight:this._height,newWidth:n,newHeight:r}),this._width=n,this._height=r,console.log("[Rectangle][setDimensions] Mise à jour des coordonnées du polygone"),this._updatePolygonCoordinates(),console.log("[Rectangle][setDimensions] Mise à jour des propriétés"),this.updateProperties(),console.log("[Rectangle][setDimensions] Émission de l'événement dimensions:updated"),this.fire("dimensions:updated",{width:this._width,height:this._height,corners:this.getRotatedCorners(),center:this._center}),this.updateHelperPointPositions()})}resizeFromCorner(n,r){gn.measure("Rectangle.resizeFromCorner",()=>{if(!(!this._isMapReady||!this._map))try{const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,a=s.y-i.y,l=-this._rotation*Math.PI/180,c=Math.cos(l),d=Math.sin(l),p=o*c-a*d,v=o*d+a*c,m=this._getPixelsPerMeter(),x=n===0||n===3?-1:1,E=n===0||n===1?1:-1,k=Math.max(Math.abs(p*2)/m,1),A=Math.max(Math.abs(v*2)/m,1),D=k*m/2,V=A*m/2,Y=x*D*c-E*V*d,te=x*D*d+E*V*c,ge=Yn.point(s.x-Y,s.y-te),fe=this._map.containerPointToLatLng(ge),K=[Yn.point(ge.x-D,ge.y+V),Yn.point(ge.x+D,ge.y+V),Yn.point(ge.x+D,ge.y-V),Yn.point(ge.x-D,ge.y-V)].map(B=>{const N=B.x-ge.x,j=B.y-ge.y;return Yn.point(ge.x+(N*c-j*d),ge.y+(N*d+j*c))}).map(B=>this._map.containerPointToLatLng(B));this._width=k,this._height=A,this._center=fe,this.setLatLngs(K),this.fire("coordinates:updated",{corners:K,center:this._center,rotation:this._rotation})}catch(i){console.warn("Error in resizeFromCorner:",i)}})}resizeFromSide(n,r){gn.measure("Rectangle.resizeFromSide",()=>{if(!this._isMapReady||!this._map)return;const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,a=s.y-i.y,l=-this._rotation*Math.PI/180,c=Math.cos(l),d=Math.sin(l),p=o*c-a*d,v=o*d+a*c,m=this._getPixelsPerMeter();n%2===0?this._height=Math.abs(v*2)/m:this._width=Math.abs(p*2)/m,this._updatePolygonCoordinates(),this.updateProperties()})}moveFromCenter(n){gn.measure("Rectangle.moveFromCenter",()=>{this._center=n,this._updatePolygonCoordinates(),this.updateProperties()})}updateProperties(){gn.measure("Rectangle.updateProperties",()=>{var i,s,o;const n=this.getRotatedCorners(),r=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"";this.properties={...this.properties,width:this._width,height:this._height,surface:this._width*this._height,perimeter:2*(this._width+this._height),center:this._center,corners:n,midPoints:this.getMidPoints(),rotation:this._rotation,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:r}},this.fire("properties:updated",{shape:this,properties:this.properties,corners:n,midPoints:this.getMidPoints()})})}setName(n){gn.measure("Rectangle.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return gn.measure("Rectangle.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}generateHelperPoints(n,r="rgba(220, 38, 38, 0.5)",i="rgba(37, 99, 235, 0.5)"){gn.measure("Rectangle.generateHelperPoints",()=>{this.clearHelperPoints();const s=this.getRotatedCorners(),o=this.getMidPoints();this._helperPoints.corners=s.map(a=>Yn.circleMarker(a,{radius:5,color:r,fillColor:r,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-corner",pmIgnore:!0,interactive:!1}).addTo(n)),this._helperPoints.midPoints=o.map(a=>Yn.circleMarker(a,{radius:5,color:i,fillColor:i,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-midpoint",pmIgnore:!0,interactive:!1}).addTo(n))})}clearHelperPoints(){gn.measure("Rectangle.clearHelperPoints",()=>{this._helperPoints.corners.forEach(n=>{if(n&&n.remove)try{n.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de coin:",r)}}),this._helperPoints.midPoints.forEach(n=>{if(n&&n.remove)try{n.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de milieu:",r)}}),this._helperPoints.corners=[],this._helperPoints.midPoints=[]})}updateHelperPointPositions(){gn.measure("Rectangle.updateHelperPointPositions",()=>{if(this._helperPoints.corners.length===0&&this._helperPoints.midPoints.length===0)return;const n=this.getRotatedCorners(),r=this.getMidPoints();n.forEach((i,s)=>{this._helperPoints.corners[s]&&this._helperPoints.corners[s].setLatLng(i)}),r.forEach((i,s)=>{this._helperPoints.midPoints[s]&&this._helperPoints.midPoints[s].setLatLng(i)})})}findClosestHelperPoint(n){return gn.measure("Rectangle.findClosestHelperPoint",()=>{const r=this.getRotatedCorners(),i=this.getMidPoints(),s=[...r,...i];if(s.length===0)return null;let o=s[0],a=n.distanceTo(o);for(let l=1;l<s.length;l++){const c=n.distanceTo(s[l]);c<a&&(a=c,o=s[l])}return o})}toggleHelperPoints(n,r,i,s){gn.measure("Rectangle.toggleHelperPoints",()=>{r&&n?this.generateHelperPoints(n,i,s):this.clearHelperPoints()})}containsPoint(n){return gn.measure("Rectangle.containsPoint",()=>{const r=this.getRotatedCorners();if(r.length!==4)return!1;let i=!1;for(let s=0,o=r.length-1;s<r.length;o=s++){const a=r[s].lng,l=r[s].lat,c=r[o].lng,d=r[o].lat;l>n.lat!=d>n.lat&&n.lng<(c-a)*(n.lat-l)/(d-l)+a&&(i=!i)}return i})}}var Yi=(t=>(t.PRIVATE="private",t.COMPANY="company",t.EMPLOYEE="employee",t.VISITOR="visitor",t))(Yi||{});const wf=jp("notes",()=>{const t=Ct([]),e=Ct([]),n=Jn(()=>B=>t.value.find(N=>N.id===B)),r=Jn(()=>B=>{const N=t.value.find(j=>j.id===B);return N?N.color:"#6B7280"}),i=Jn(()=>B=>e.value.filter(N=>N.columnId===B).sort((N,j)=>N.order-j.order)),s=Jn(()=>t.value.find(B=>B.isDefault)||t.value[0]),o=Jn(()=>[...t.value].sort((B,N)=>B.order-N.order)),a=Jn(()=>B=>{const N=pa();if(!N.user)return!1;if(N.isAdmin)return!0;switch(B.accessLevel){case"private":return!0;case"company":return N.isAdmin||N.isEntreprise;case"employee":return N.isAdmin||N.isEntreprise||N.isSalarie;case"visitor":return N.isAdmin||N.isEntreprise||N.isSalarie||N.isVisiteur;default:return!1}}),l=Jn(()=>e.value.filter(B=>a.value(B))),c=Jn(()=>B=>l.value.filter(N=>N.columnId===B).sort((N,j)=>N.order-j.order));async function d(){console.log(`
[NotesStore][loadColumns] Initialisation des colonnes fixes...`);try{const B=[{id:"1",title:"Idées",color:"#8B5CF6",order:0,isDefault:!1},{id:"2",title:"À faire",color:"#F59E0B",order:1,isDefault:!0},{id:"3",title:"En cours",color:"#3B82F6",order:2,isDefault:!1},{id:"4",title:"Terminées",color:"#10B981",order:3,isDefault:!1},{id:"5",title:"Autres",color:"#6B7280",order:4,isDefault:!1}];t.value=B,console.log("[NotesStore][loadColumns] Colonnes fixes initialisées:",t.value)}catch(B){throw console.error("[NotesStore][loadColumns] Erreur:",B),B}}async function p(B){console.log(`
[NotesStore][addColumn] Fonction désactivée - Utilisation de colonnes fixes`)}async function v(B,N){console.log(`
[NotesStore][updateColumn] Mise à jour locale de la colonne:`,B,N);try{const j=t.value.findIndex(z=>z.id===B);j!==-1&&(t.value[j]={...t.value[j],...N},console.log("[NotesStore][updateColumn] État des colonnes après mise à jour:",t.value))}catch(j){throw console.error("[NotesStore][updateColumn] Erreur:",j),j}}async function m(B){console.log(`
[NotesStore][removeColumn] Fonction désactivée - Utilisation de colonnes fixes`)}async function x(B){console.log(`
[NotesStore][reorderColumns] FONCTION DÉSACTIVÉE - Le déplacement des colonnes n'est plus possible`)}function E(B){if(!B)return"private";switch(B.toLowerCase()){case"private":return"private";case"company":return"company";case"employee":return"employee";case"visitor":return"visitor";default:return console.warn(`[NotesStore] Niveau d'accès inconnu: ${B}, utilisation de PRIVATE par défaut`),"private"}}function k(B){if(!B.id)throw console.error("[NotesStore][addNote] Erreur: ID du backend manquant"),new Error("L'ID du backend est requis pour ajouter une note");const N=new Date().toISOString(),j=e.value.filter($=>$.columnId===B.columnId),z=j.length>0?Math.max(...j.map($=>$.order))+1:0,U=E(B.access_level);return console.log("[NotesStore][addNote] Ajout d'une note avec ID backend:",B.id,"et niveau d'accès:",U),e.value.push({...B,id:B.id,order:z,accessLevel:U,createdAt:N,updatedAt:N,comments:[],photos:[]}),B.id}function A(B,N){console.log(`
[NotesStore][updateNote] Mise à jour de la note:`,B,N);try{const j=e.value.findIndex(z=>z.id===B);j!==-1&&(N.color&&(N.style={...e.value[j].style,color:N.color,fillColor:N.color}),N.access_level&&(N.accessLevel=E(N.access_level),delete N.access_level),e.value[j]={...e.value[j],...N},console.log("[NotesStore][updateNote] Note mise à jour:",e.value[j]))}catch(j){throw console.error("[NotesStore][updateNote] Erreur:",j),j}}function D(B){e.value.findIndex(j=>j.id===B)!==-1?(console.log("[NotesStore][removeNote] Suppression de la note avec ID:",B),e.value=e.value.filter(j=>j.id!==B)):console.warn("[NotesStore][removeNote] Tentative de suppression d'une note inexistante avec ID:",B)}function V(B,N){const j=e.value.findIndex(z=>z.id===B);if(j!==-1){const z=e.value[j];if(z.columnId!==N){const $=e.value.filter(_e=>_e.columnId===N),re=$.length>0?Math.max(...$.map(_e=>_e.order))+1:0,Q={...z,columnId:N,order:re,updatedAt:new Date().toISOString()};e.value[j]=Q}else e.value[j]={...e.value[j],updatedAt:new Date().toISOString()}}}function Y(B,N){N.forEach((j,z)=>{const U=e.value.findIndex($=>$.id===j&&$.columnId===B);U!==-1&&(e.value[U]={...e.value[U],order:z,updatedAt:new Date().toISOString()})})}function te(B){switch(B){case"private":return"Privé";case"company":return"Entreprise";case"employee":return"Salariés";case"visitor":return"Visiteurs";default:return"Inconnu"}}async function ge(B,N){try{const j=pa();if(!j.user)throw new Error("Vous devez être connecté pour ajouter un commentaire");if(!j.isEntreprise&&!j.isAdmin)throw new Error("Seules les entreprises peuvent ajouter des commentaires");if(!e.value.some(we=>we.id===B))throw new Error(`La note avec l'ID ${B} n'existe pas`);const $=(await Sa.addComment(B,N)).data,re=e.value.findIndex(we=>we.id===B);if(re===-1)return;const Q=e.value[re];Q.comments||(Q.comments=[]);const _e={id:$.id,text:$.text,createdAt:$.created_at,userId:$.user,userName:$.user_name,userRole:$.user_role};return Q.comments.push(_e),Q.updatedAt=new Date().toISOString(),e.value[re]={...Q},_e.id}catch(j){throw console.error("Erreur lors de l'ajout du commentaire:",j),j}}async function fe(B,N){try{const j=e.value.findIndex($=>$.id===B);if(j===-1)throw new Error(`La note avec l'ID ${B} n'existe pas`);const z=e.value[j];if(!z.comments||z.comments.length===0)throw new Error("Aucun commentaire trouvé pour cette note");if(!z.comments.some($=>$.id===N))throw new Error(`Le commentaire avec l'ID ${N} n'existe pas`);await Sa.deleteComment(B,N),z.comments=z.comments.filter($=>$.id!==N),z.updatedAt=new Date().toISOString(),e.value[j]={...z}}catch(j){throw console.error("Erreur lors de la suppression du commentaire:",j),j}}async function I(B,N){try{if(N.id&&N.image){const j=e.value.findIndex($=>$.id===B);if(j===-1)return;const z=e.value[j];z.photos||(z.photos=[]);const U={id:N.id,url:N.image,caption:N.caption,createdAt:N.created_at};return z.photos.push(U),z.updatedAt=new Date().toISOString(),e.value[j]={...z},U.id}else{const j=new FormData;j.append("image",N.url),N.caption&&j.append("caption",N.caption);const U=(await Sa.addPhoto(B,j)).data,$=e.value.findIndex(_e=>_e.id===B);if($===-1)return;const re=e.value[$];re.photos||(re.photos=[]);const Q={id:U.id,url:U.image,caption:U.caption,createdAt:U.created_at};return re.photos.push(Q),re.updatedAt=new Date().toISOString(),e.value[$]={...re},Q.id}}catch(j){throw console.error("Erreur lors de l'ajout de la photo:",j),j}}async function F(B,N){try{await Sa.deletePhoto(B,N);const j=e.value.findIndex($=>$.id===B);if(j===-1){console.error("[NotesStore] Note non trouvée pour la suppression de la photo");return}e.value[j].photos||(e.value[j].photos=[]);const z=e.value[j],U=(z.photos||[]).filter($=>$.id!==N);e.value[j]={...z,photos:U,updatedAt:new Date().toISOString()},console.log("[NotesStore] Photo supprimée avec succès, photos restantes:",U.length)}catch(j){throw console.error("Erreur lors de la suppression de la photo:",j),j}}async function K(B,N,j){try{await Sa.updatePhoto(B,N,{caption:j});const z=e.value.findIndex(re=>re.id===B);if(z===-1||!e.value[z].photos)return;const U=e.value[z],$=U.photos.findIndex(re=>re.id===N);if($===-1)return;U.photos[$].caption=j,U.updatedAt=new Date().toISOString(),e.value[z]={...U}}catch(z){throw console.error("Erreur lors de la mise à jour de la légende:",z),z}}return{columns:t,notes:e,getColumnById:n,getColumnColor:r,getNotesByColumn:i,getDefaultColumn:s,getSortedColumns:o,hasAccessToNote:a,getAccessibleNotes:l,getAccessibleNotesByColumn:c,getAccessLevelLabel:te,loadColumns:d,addColumn:p,updateColumn:v,removeColumn:m,reorderColumns:x,addNote:k,updateNote:A,removeNote:D,moveNote:V,reorderNotes:Y,addComment:ge,removeComment:fe,addPhoto:I,removePhoto:F,updatePhoto:K}});class kh extends $t.Marker{constructor(n,r={}){const s=`
      <div class="geo-note-marker">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
          <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${r.color||"#2b6451"}" />
        </svg>
      </div>
    `,o=$t.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});if(!document.getElementById("geo-note-style")){const l=document.createElement("style");l.id="geo-note-style",l.textContent=`
        .geo-note-icon {
          background: none !important;
          border: none !important;
        }
        .geo-note-marker {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
          transform-origin: center bottom;
        }
      `,document.head.appendChild(l)}super(n,{icon:o,draggable:!1,autoPan:!0,riseOnHover:!0,bubblingMouseEvents:!1,interactive:!0,keyboard:!1});Ze(this,"properties");Ze(this,"_planSaved",!1);Ze(this,"_isMoving",!1);Ze(this,"_animateZoom",()=>{});this.properties={type:"Note",name:r.name||"Note géolocalisée",description:r.description||"",columnId:r.columnId||"1",accessLevel:r.accessLevel||Yi.PRIVATE,category:r.category||"forages",style:{color:r.color||"#2b6451",weight:r.weight||2,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity!==void 0?r.fillOpacity:.8,radius:r.radius||12},comments:[],photos:[],order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},console.log("[GeoNote][constructor] Note créée avec columnId:",this.properties.columnId),this.bindPopup(this.createPopupContent()),this.on("dblclick",this.onDoubleClick),this.on("add",l=>{if(l.target&&l.target._map){const c=l.target._map;this._protectFromZoomAnimationErrors(c),c.on("zoomend",()=>this.refreshIconStyle()),c.on("moveend",()=>this.refreshIconStyle())}}),window.addEventListener("geonote:updateStyle",l=>{const c=l.detail.noteId,d=this._dbId||this.properties.id;console.log("[GeoNote][updateStyle] Événement reçu pour noteId:",c,"Comparaison avec ID backend:",d),c===d&&(console.log("[GeoNote][updateStyle] Correspondance trouvée, mise à jour du style:",l.detail.style),this.setNoteStyle(l.detail.style),this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,...l.detail.style}),this.bindPopup(this.createPopupContent()))}),window.addEventListener("geonote:update",l=>{const c=l.detail.noteId,d=this._dbId||this.properties.id;console.log("[GeoNote][update] Événement reçu pour noteId:",c,"Comparaison avec ID backend:",d),c===d&&(console.log("[GeoNote][update] Correspondance trouvée, mise à jour des propriétés:",l.detail.properties),this.properties={...this.properties,name:l.detail.properties.name,description:l.detail.properties.description,columnId:l.detail.properties.columnId,accessLevel:l.detail.properties.accessLevel,style:l.detail.properties.style},this.setNoteStyle(l.detail.properties.style),this.bindPopup(this.createPopupContent()),console.log("[GeoNote][update] Propriétés mises à jour:",this.properties))}),console.log("[GeoNote][constructor] Note créée:",{location:n,name:this.properties.name,type:this.properties.type,style:this.properties.style})}createPopupContent(){const n=document.createElement("div");n.className="geo-note-popup",n.style.display="flex",n.style.flexDirection="column";const r=document.createElement("div");r.className="geo-note-header",n.appendChild(r);const i=document.createElement("div");i.className="geo-note-title",i.textContent=this.properties.name,r.appendChild(i);const s=document.createElement("div");s.className="geo-note-badges",r.appendChild(s);const o=document.createElement("div");o.className="geo-note-badge",o.style.backgroundColor=this.getColumnColor(this.properties.columnId),o.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5z" />
        <path d="M11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
      </svg>
      ${this.getColumnLabel(this.properties.columnId)}
    `,s.appendChild(o);const a=document.createElement("div");if(a.className="geo-note-badge",a.style.backgroundColor=this.getAccessLevelColor(this.properties.accessLevel),a.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
      </svg>
      ${this.getAccessLevelLabel(this.properties.accessLevel)}
    `,s.appendChild(a),this.properties.description&&this.properties.description.trim()!==""){const p=document.createElement("div");p.className="geo-note-content",n.appendChild(p);const v=document.createElement("div");v.className="geo-note-description",v.textContent=this.properties.description,p.appendChild(v)}const l=document.createElement("div");l.className="geo-note-buttons",l.style.display="flex",l.style.width="100%",l.style.marginTop="auto",l.style.borderTop="1px solid #E5E7EB",n.appendChild(l);const c=document.createElement("button");c.className="geo-note-edit-button",c.style.flex="1",c.style.height="36px",c.style.border="none",c.style.borderRight="1px solid #E5E7EB",c.style.background="transparent",c.style.color="#4B5563",c.style.fontSize="11px",c.style.fontWeight="500",c.style.display="flex",c.style.alignItems="center",c.style.justifyContent="center",c.style.cursor="pointer",c.style.padding="0",c.style.margin="0",c.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3 mr-1 inline-block align-text-bottom">
        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
      </svg>
      Éditer
    `,c.onclick=p=>{p.stopPropagation(),this.editNote()},l.appendChild(c);const d=document.createElement("button");return d.className="geo-note-open-button",d.style.flex="1",d.style.height="36px",d.style.border="none",d.style.background="transparent",d.style.color="#3B82F6",d.style.fontSize="11px",d.style.fontWeight="500",d.style.display="flex",d.style.alignItems="center",d.style.justifyContent="center",d.style.cursor="pointer",d.style.padding="0",d.style.margin="0",d.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3 mr-1 inline-block align-text-bottom">
        <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
      </svg>
      Itinéraire
    `,d.onclick=p=>{p.stopPropagation(),this.openInGoogleMaps()},l.appendChild(d),n}getColumnColor(n){return{1:"#8B5CF6",2:"#F59E0B",3:"#3B82F6",4:"#10B981",5:"#6B7280"}[n]||"#6B7280"}getColumnLabel(n){return{1:"Idées",2:"À faire",3:"En cours",4:"Terminées",5:"Autres"}[n]||"Colonne "+n}getAccessLevelLabel(n){switch(n){case Yi.PRIVATE:return"Privé";case Yi.COMPANY:return"Entreprise";case Yi.EMPLOYEE:return"Salariés";case Yi.VISITOR:return"Visiteurs";default:return"Inconnu"}}getAccessLevelColor(n){switch(n){case Yi.PRIVATE:return"#9CA3AF";case Yi.COMPANY:return"#EF4444";case Yi.EMPLOYEE:return"#F59E0B";case Yi.VISITOR:return"#10B981";default:return"#6B7280"}}onDoubleClick(n){$t.DomEvent.stopPropagation(n),this.editNote()}editNote(){this.closePopup();const n=this._dbId||this.properties.id||this._leaflet_id;console.log(`[GeoNote][editNote] Édition de note - ID backend: ${this._dbId}, ID properties: ${this.properties.id}, ID Leaflet: ${this._leaflet_id}, ID utilisé: ${n}`);const r={id:n,title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},columnId:this.properties.columnId||"1",accessLevel:this.properties.accessLevel||"company",style:this.properties.style||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:this.properties.comments||[],photos:this.properties.photos||[]};console.log("[GeoNote][editNote] Édition de note avec columnId:",r.columnId),console.log("[GeoNote] Émission de l'événement note:edit avec",r);const i=new CustomEvent("geonote:edit",{detail:{note:r,source:this}});window.dispatchEvent(i),this.fire("note:edit",{note:r,source:this})}openInGoogleMaps(){this.closePopup();const n=this.getLatLng().lat,r=this.getLatLng().lng,i=`https://www.google.com/maps/dir/?api=1&destination=${n},${r}`;window.open(i,"_blank")}updateProperties(){var s;this.properties.type="Note",this.properties.category||(this.properties.category="forages"),this.properties.accessLevel||(this.properties.accessLevel=Yi.PRIVATE);const n=this.properties.style||{};let r=n.color||n.fillColor;if(!r){const o=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker svg path");if(o){const a=o.getAttribute("fill");a&&(r=a,console.log("[GeoNote][updateProperties] Couleur récupérée depuis SVG:",r))}}r||(r="#2b6451",console.log("[GeoNote][updateProperties] Utilisation de la couleur par défaut:",r)),console.log("[GeoNote][updateProperties] Couleur finale utilisée:",r);const i=n.radius||12;this.properties.style={...n,color:r,weight:n.weight||2,fillColor:r,fillOpacity:n.fillOpacity||.8,radius:i,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category},console.log("[GeoNote][updateProperties] Style mis à jour:",this.properties.style),this.bindPopup(this.createPopupContent())}setNoteStyle(n){console.log("[GeoNote][setNoteStyle] Mise à jour du style:",n);const r=n.color||n.fillColor||"#2b6451",i=n.fillColor||n.color||"#2b6451";console.log("[GeoNote][setNoteStyle] Nouvelles couleurs - stroke:",r,"fill:",i);const s=this.getElement();if(s)try{const l=s.querySelector("svg path");l?(l.setAttribute("fill",i),console.log("[GeoNote][setNoteStyle] Couleur mise à jour directement sur le SVG existant")):(console.warn("[GeoNote][setNoteStyle] Impossible de trouver le path SVG dans l'élément"),this._updateIconWithNewColor(i))}catch(l){console.warn("[GeoNote][setNoteStyle] Erreur lors de la mise à jour directe du SVG:",l),this._updateIconWithNewColor(i)}else this._updateIconWithNewColor(i);const o=n._accessLevel||n.accessLevel||this.properties.accessLevel,a=n.category||this.properties.category;this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,color:r,weight:n.weight||this.properties.style.weight||2,fillColor:i,fillOpacity:n.fillOpacity!==void 0?n.fillOpacity:this.properties.style.fillOpacity||.8,radius:n.radius||this.properties.style.radius||12,_accessLevel:o,accessLevel:o,category:a}),o&&this.properties.accessLevel!==o&&(this.properties.accessLevel=o,console.log("[GeoNote][setNoteStyle] Niveau d'accès mis à jour:",o)),a&&this.properties.category!==a&&(this.properties.category=a,console.log("[GeoNote][setNoteStyle] Catégorie mise à jour:",a)),this.refreshIconStyle(),console.log("[GeoNote][setNoteStyle] Mise à jour du popup"),this.bindPopup(this.createPopupContent())}refreshIconStyle(){const n=this.getElement();if(n&&(n.style.display="none",n.offsetHeight,n.style.display="",this._map))try{const r=this._map.latLngToLayerPoint(this.getLatLng());$t.DomUtil.setPosition(n,r)}catch(r){console.warn("[GeoNote][refreshIconStyle] Erreur lors de la mise à jour de la position:",r)}}_protectFromZoomAnimationErrors(n){try{const r=this._animateZoom;this._animateZoom=function(i){try{if(!this._map||!i.center||!i.zoom){console.warn("[GeoNote][_animateZoom] Animation de zoom ignorée: propriétés manquantes");return}r.call(this,i)}catch(s){console.warn("[GeoNote][_animateZoom] Erreur lors de l'animation de zoom:",s);try{const o=this.getElement();if(o&&this._map){const a=this._map.latLngToLayerPoint(this.getLatLng());$t.DomUtil.setPosition(o,a)}}catch(o){console.error("[GeoNote][_animateZoom] Erreur lors de la récupération:",o)}}},console.log("[GeoNote][_protectFromZoomAnimationErrors] Protection contre les erreurs d'animation de zoom activée")}catch(r){console.error("[GeoNote][_protectFromZoomAnimationErrors] Erreur lors de la mise en place de la protection:",r)}}_updateIconWithNewColor(n){try{const r=this._map;let i=!1;r&&(i=r.options.zoomAnimation||!1,r.options.zoomAnimation=!1);const s=`
        <div class="geo-note-marker">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${n}" />
          </svg>
        </div>
      `,o=$t.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});this.setIcon(o),r&&i&&setTimeout(()=>{r.options.zoomAnimation=!0},100),console.log("[GeoNote][_updateIconWithNewColor] Icône mise à jour avec la nouvelle couleur")}catch(r){console.error("[GeoNote][_updateIconWithNewColor] Erreur lors de la mise à jour de l'icône:",r)}}toBackendFormat(n){this.updateProperties();const r=this.getLatLng(),s={...{...this.properties.style,radius:this.properties.style.radius||12},_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel},o=this.properties.columnId||"1";return console.log("[GeoNote][toBackendFormat] Sauvegarde de note avec columnId:",o),{id:n,type_forme:"Note",data:{location:{type:"Point",coordinates:[r.lng,r.lat]},name:this.properties.name,description:this.properties.description,columnId:o,accessLevel:this.properties.accessLevel,category:this.properties.category||"forages",style:s,comments:this.properties.comments||[],photos:this.properties.photos||[],order:this.properties.order||0,createdAt:this.properties.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}}}updateFromBackendData(n){var l,c,d,p,v;console.log("[GeoNote][updateFromBackendData] Début de la mise à jour avec les données:",n),console.log("[GeoNote][updateFromBackendData] Couleur dans les données reçues:",{styleColor:(l=n.style)==null?void 0:l.color,styleFillColor:(c=n.style)==null?void 0:c.fillColor,styleObject:n.style}),this.properties.type="Note";const r=n.style?{...n.style,radius:n.style.radius||12}:this.properties.style;console.log("[GeoNote][updateFromBackendData] Style après traitement initial:",r);const i=((d=n.style)==null?void 0:d._accessLevel)||((p=n.style)==null?void 0:p.accessLevel)||n.accessLevel||this.properties.accessLevel||Yi.PRIVATE;console.log("[GeoNote][updateFromBackendData] Niveau d'accès récupéré:",i);const s=((v=n.style)==null?void 0:v.category)||n.category||this.properties.category||"forages";console.log("[GeoNote][updateFromBackendData] Catégorie récupérée:",s);const o=n.columnId||this.properties.columnId||"1";console.log("[GeoNote][updateFromBackendData] Mise à jour de note avec columnId:",o);const a={...r,_accessLevel:i,accessLevel:i,category:s};this.properties={...this.properties,name:n.name||this.properties.name,description:n.description||this.properties.description,columnId:o,accessLevel:i,category:s,style:a,comments:n.comments||this.properties.comments||[],photos:n.photos||this.properties.photos||[],order:n.order||this.properties.order||0,createdAt:n.createdAt||this.properties.createdAt,updatedAt:n.updatedAt||new Date().toISOString()},this.setNoteStyle(a),this.bindPopup(this.createPopupContent()),console.log("[GeoNote][updateFromBackendData] Note mise à jour:",{name:this.properties.name,type:this.properties.type,category:this.properties.category,accessLevel:this.properties.accessLevel,style:this.properties.style})}static fromBackendData(n){var l,c,d,p,v,m,x,E;let r;if(typeof n.location=="object"&&!Array.isArray(n.location)&&n.location.type==="Point"){const k=n.location.coordinates;console.log("[GeoNote][fromBackendData] Coordonnées GeoJSON reçues:",k),r=[k[1],k[0]]}else if(Array.isArray(n.location)&&n.location.length===2)r=n.location;else throw new Error("Les données de la note ne contiennent pas de position valide");console.log("[GeoNote][fromBackendData] Création d'une note à partir des données:",n),console.log("[GeoNote][fromBackendData] Position utilisée:",r);const i=((l=n.style)==null?void 0:l._accessLevel)||((c=n.style)==null?void 0:c.accessLevel)||n.accessLevel||Yi.PRIVATE;console.log("[GeoNote][fromBackendData] Niveau d'accès récupéré:",i,"Style:",n.style);const s=((d=n.style)==null?void 0:d.category)||n.category||"forages";console.log("[GeoNote][fromBackendData] Catégorie récupérée:",s),n.accessLevel=i,n.category=s;const o=n.columnId||"1";console.log("[GeoNote][fromBackendData] Création de note avec columnId:",o);const a=new kh(r,{name:n.name,description:n.description,columnId:o,accessLevel:i,category:n.category||"forages",color:(p=n.style)==null?void 0:p.color,weight:(v=n.style)==null?void 0:v.weight,fillColor:(m=n.style)==null?void 0:m.fillColor,fillOpacity:(x=n.style)==null?void 0:x.fillOpacity,radius:(E=n.style)==null?void 0:E.radius});return a.properties.type="Note",a.properties.comments=n.comments||[],a.properties.photos=n.photos||[],a.properties.order=n.order||0,a.properties.createdAt=n.createdAt||new Date().toISOString(),a.properties.updatedAt=n.updatedAt||new Date().toISOString(),n.style&&a.setNoteStyle(n.style),a.bindPopup(a.createPopupContent()),console.log("[GeoNote][fromBackendData] Note créée:",{location:r,name:a.properties.name,type:a.properties.type,category:a.properties.category,accessLevel:a.properties.accessLevel,style:a.properties.style}),a}async saveNote(n){var r,i,s,o,a,l,c,d,p,v;if(this._planSaved)return this._dbId||0;console.log("[GeoNote][saveNote] Sauvegarde directe de la note via l'API");try{this.updateProperties(),console.log("[GeoNote][saveNote] Couleur avant sauvegarde:",{styleColor:(r=this.properties.style)==null?void 0:r.color,styleFillColor:(i=this.properties.style)==null?void 0:i.fillColor,iconColor:((o=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker svg path"))==null?void 0:o.getAttribute("fill"))||"non disponible"});let m=((a=this.properties.style)==null?void 0:a.color)||"#2b6451";if(m.startsWith("rgb")){const A=(l=this.getElement())==null?void 0:l.querySelector(".geo-note-marker svg path");if(A){const D=A.getAttribute("fill");D&&(m=D,console.log("[GeoNote][saveNote] Couleur récupérée depuis SVG pour remplacer RGB:",m))}}const x={...this.properties.style,color:m,fillColor:m,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category};console.log("[GeoNote][saveNote] Style final pour l'envoi:",x);const E={title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},column:this.properties.columnId||"1",access_level:this.properties.accessLevel||"company",style:x,category:this.properties.category||"forages",comments:this.properties.comments||[],photos:this.properties.photos||[]};n&&(E.plan=n),console.log("[GeoNote][saveNote] Données à envoyer:",E),console.log("[GeoNote][saveNote] Couleur dans les données envoyées:",{styleColor:E.style.color,styleFillColor:E.style.fillColor});let k;return this._dbId?(k=(await Sa.updateNote(this._dbId,E)).data,console.log("[GeoNote][saveNote] Note mise à jour avec succès:",k),console.log("[GeoNote][saveNote] Couleur dans la réponse du backend (update):",{styleColor:(c=k.style)==null?void 0:c.color,styleFillColor:(d=k.style)==null?void 0:d.fillColor,styleObject:k.style}),this.bindPopup(this.createPopupContent())):(k=(await Sa.createNote(E)).data,console.log("[GeoNote][saveNote] Note créée avec succès:",k),console.log("[GeoNote][saveNote] Couleur dans la réponse du backend (create):",{styleColor:(p=k.style)==null?void 0:p.color,styleFillColor:(v=k.style)==null?void 0:v.fillColor,styleObject:k.style}),this.bindPopup(this.createPopupContent()),this._dbId=k.id,wf().addNote({...k,id:k.id,columnId:k.column,accessLevel:k.access_level})),this._planSaved=!0,k.id}catch(m){return console.error("[GeoNote][saveNote] Erreur lors de la sauvegarde de la note:",m),ru().error("Erreur lors de la sauvegarde de la note"),0}}triggerPlanSave(){const n=localStorage.getItem("lastPlanId");n?(console.log(`[GeoNote][triggerPlanSave] Sauvegarde de la note avec le plan ${n}`),this.saveNote(parseInt(n))):(console.log("[GeoNote][triggerPlanSave] Aucun plan courant, sauvegarde sans association"),this.saveNote());const r=new CustomEvent("geonote:savePlan");window.dispatchEvent(r)}resetPlanSaveState(){this._planSaved=!1}moveTo(n){this.setLatLng(n),this.fire("note:moved",{latlng:n,note:this}),this.bindPopup(this.createPopupContent()),this._map&&this._map.invalidateSize(),this.triggerPlanSave()}startMoving(){this._isMoving=!0,this.closePopup(),this.fire("note:movestart",{latlng:this.getLatLng(),note:this})}finishMoving(){this._isMoving=!1,this.fire("note:moveend",{latlng:this.getLatLng(),note:this}),this.triggerPlanSave()}isMoving(){return this._isMoving}}function xz(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function Lz(t){if(!t||typeof t!="object")return console.log("[DrawingStore] ElevationData invalide: pas un objet",{data:t}),!1;const e=Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2,n=typeof t.style=="object"&&t.style!==null,r=!t.elevationData||Array.isArray(t.elevationData)&&t.elevationData.every(i=>typeof i=="object"&&"distance"in i&&"elevation"in i);return e&&n&&r}function Sz(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function g5(t){var e,n,r,i,s,o,a,l,c,d,p,v,m,x,E,k,A,D,V,Y,te,ge,fe,I,F,K,B;if(console.log("[DrawingStore] Conversion de la forme en élément",{type:(e=t.properties)==null?void 0:e.type,name:(r=(n=t.properties)==null?void 0:n.style)==null?void 0:r.name,properties:t.properties}),((i=t.properties)==null?void 0:i.type)==="Note"){const N=t.getLatLng();return{type_forme:"Note",data:{points:[[N.lng,N.lat]],style:{color:((s=t.properties.style)==null?void 0:s.color)||"#2b6451",weight:((o=t.properties.style)==null?void 0:o.weight)||3,opacity:((a=t.properties.style)==null?void 0:a.opacity)||1,fillColor:((l=t.properties.style)==null?void 0:l.fillColor)||"#2b6451",fillOpacity:((c=t.properties.style)==null?void 0:c.fillOpacity)||.2,name:((d=t.properties.style)==null?void 0:d.name)||""}}}}if(t instanceof Sd||((p=t.properties)==null?void 0:p.type)==="ElevationLine")return{type_forme:"ElevationLine",data:{points:t.getLatLngs().map(z=>[z.lng,z.lat]),style:{color:((v=t.properties.style)==null?void 0:v.color)||"#2b6451",weight:((m=t.properties.style)==null?void 0:m.weight)||4,opacity:((x=t.properties.style)==null?void 0:x.opacity)||.8,name:((E=t.properties.style)==null?void 0:E.name)||""},category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor",elevationData:t.properties.elevationData,minElevation:t.properties.minElevation,maxElevation:t.properties.maxElevation,elevationGain:t.properties.elevationGain,elevationLoss:t.properties.elevationLoss,averageSlope:t.properties.averageSlope,maxSlope:t.properties.maxSlope}};if(t instanceof cd||((k=t.properties)==null?void 0:k.type)==="Polygon")return{type_forme:"Polygon",data:{points:t.getLatLngs()[0].map(z=>[z.lng,z.lat]),style:{color:((A=t.properties.style)==null?void 0:A.color)||"#2b6451",weight:((D=t.properties.style)==null?void 0:D.weight)||3,opacity:((V=t.properties.style)==null?void 0:V.opacity)||1,fillColor:((Y=t.properties.style)==null?void 0:Y.fillColor)||"#2b6451",fillOpacity:((te=t.properties.style)==null?void 0:te.fillOpacity)||.2,name:((ge=t.properties.style)==null?void 0:ge.name)||""},category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor"}};if(t instanceof na||((fe=t.properties)==null?void 0:fe.type)==="Line")return{type_forme:"Line",data:{points:t.getLatLngs().map(z=>[z.lng,z.lat]),category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor",style:{color:((I=t.properties.style)==null?void 0:I.color)||"#2b6451",weight:((F=t.properties.style)==null?void 0:F.weight)||3,opacity:((K=t.properties.style)==null?void 0:K.opacity)||1,name:((B=t.properties.style)==null?void 0:B.name)||""}}};throw new Error("Type de forme non reconnu")}function Cz(t){var e,n,r,i,s,o,a,l,c,d,p,v,m,x,E,k,A,D,V,Y,te,ge,fe,I,F,K,B,N,j,z,U,$,re,Q,_e,we,nt,ae,H,Z,me,pe,de;switch(console.log("[DrawingStore] Conversion de l'élément stocké en forme",{element:t}),t.type_forme){case"Polygon":{const X=t.data;if(!xz(X))return console.error("[DrawingStore] Données invalides pour Polygon"),null;const J=X.points.map(Je=>Yn.latLng(Je[1],Je[0])),De=((e=X.style)==null?void 0:e._accessLevel)||((n=X.style)==null?void 0:n.accessLevel)||X.accessLevel||"visitor";console.log("[DrawingStore] Polygon - Niveau d'accès récupéré:",De,"Style:",X.style),X.accessLevel=De;const Te=new cd([J],{color:((r=X.style)==null?void 0:r.color)||"#2b6451",weight:((i=X.style)==null?void 0:i.weight)||3,opacity:((s=X.style)==null?void 0:s.opacity)||1,fillColor:((o=X.style)==null?void 0:o.fillColor)||"#2b6451",fillOpacity:((a=X.style)==null?void 0:a.fillOpacity)||.2,dashArray:((l=X.style)==null?void 0:l.dashArray)||"",name:((c=X.style)==null?void 0:c.name)||"",category:X.category||"forages",accessLevel:De});return Te.updateProperties(),Te}case"ElevationLine":{const X=t.data;if(!Lz(X))return console.error("[DrawingStore] Données invalides pour ElevationLine"),null;const J=X.points.map(Je=>Yn.latLng(Je[1],Je[0])),De=((d=X.style)==null?void 0:d._accessLevel)||((p=X.style)==null?void 0:p.accessLevel)||X.accessLevel||"visitor";console.log("[DrawingStore] ElevationLine - Niveau d'accès récupéré:",De,"Style:",X.style),X.accessLevel=De;const Te=new Sd(J,{color:((v=X.style)==null?void 0:v.color)||"#2b6451",weight:((m=X.style)==null?void 0:m.weight)||4,opacity:((x=X.style)==null?void 0:x.opacity)||.8,name:((E=X.style)==null?void 0:E.name)||"",category:X.category||"forages",accessLevel:De});return Te.properties={type:"ElevationLine",category:X.category||"forages",accessLevel:De,style:{...X.style||{},name:((k=X.style)==null?void 0:k.name)||""},elevationData:X.elevationData,minElevation:X.minElevation,maxElevation:X.maxElevation,elevationGain:X.elevationGain,elevationLoss:X.elevationLoss,averageSlope:X.averageSlope,maxSlope:X.maxSlope,dataSource:"restored"},X.elevationData&&Te.updateElevationProfile(),console.log("[DrawingStore] ElevationLine restored:",{points:J.length,hasElevationData:!!X.elevationData,name:(A=X.style)==null?void 0:A.name,properties:Te.properties}),Te}case"Line":{const X=t.data;if(!Sz(X))return console.error("[DrawingStore] Données invalides pour Ligne"),null;const J=X.points.map(Je=>Yn.latLng(Je[1],Je[0])),De=((D=X.style)==null?void 0:D._accessLevel)||((V=X.style)==null?void 0:V.accessLevel)||X.accessLevel||"visitor";console.log("[DrawingStore] Line - Niveau d'accès récupéré:",De,"Style:",X.style),X.accessLevel=De;const Te=new na(J,{...X.style||{},name:((Y=X.style)==null?void 0:Y.name)||"",category:X.category||"forages",accessLevel:De});return Te.updateProperties(),Te}case"Rectangle":{const X=t.data;if(console.log("[DrawingStore][convertStoredElementToShape] Restauration Rectangle:",{data:X,bounds:X.bounds,width:X.width,height:X.height,rotation:X.rotation}),!X.bounds)return console.error("[DrawingStore] Données de bounds manquantes pour Rectangle"),null;const J=new Yn.LatLngBounds(Yn.latLng(X.bounds.southWest[1],X.bounds.southWest[0]),Yn.latLng(X.bounds.northEast[1],X.bounds.northEast[0])),De=new $a(J,{color:((te=X.style)==null?void 0:te.color)||"#2b6451",weight:((ge=X.style)==null?void 0:ge.weight)||3,opacity:((fe=X.style)==null?void 0:fe.opacity)||1,fillColor:((I=X.style)==null?void 0:I.fillColor)||"#2b6451",fillOpacity:((F=X.style)==null?void 0:F.fillOpacity)||.2,dashArray:((K=X.style)==null?void 0:K.dashArray)||"",name:((B=X.style)==null?void 0:B.name)||"",width:X.width,height:X.height});return X.rotation&&De.setRotation(X.rotation),console.log("[DrawingStore][convertStoredElementToShape] Rectangle restauré:",{bounds:De.getBounds(),dimensions:De.getDimensions(),properties:De.properties}),De}case"Circle":{console.log("[DrawingStore] Traitement d'un Circle à partir de l'API",{id:t.id,data:t.data,hasName:((j=(N=t.data)==null?void 0:N.style)==null?void 0:j.name)!==void 0,name:(U=(z=t.data)==null?void 0:z.style)==null?void 0:U.name});const X=t.data;if(!X.center||!X.radius)return console.error("[DrawingStore] Données invalides pour Circle"),null;const J=Yn.circle([X.center[1],X.center[0]],{color:(($=X.style)==null?void 0:$.color)||"#2b6451",weight:((re=X.style)==null?void 0:re.weight)||3,opacity:((Q=X.style)==null?void 0:Q.opacity)||1,fillColor:((_e=X.style)==null?void 0:_e.fillColor)||"#2b6451",fillOpacity:((we=X.style)==null?void 0:we.fillOpacity)||.2,dashArray:((nt=X.style)==null?void 0:nt.dashArray)||"",radius:X.radius});return J.properties={type:"Circle",radius:X.radius,diameter:X.radius*2,surface:Math.PI*X.radius*X.radius,perimeter:2*Math.PI*X.radius,style:{...X.style||{},name:((ae=X.style)==null?void 0:ae.name)||""}},console.log("[DrawingStore] Cercle créé:",{centerType:typeof X.center,center:X.center,radius:X.radius,style:J.properties.style,name:J.properties.style.name}),J}case"Note":{console.log("[DrawingStore] Traitement d'une Note à partir de l'API",{id:t.id,data:t.data});const X=t.data;if(!X.location)return console.error("[DrawingStore] Données invalides pour Note"),null;try{const J={location:X.location,name:X.name||"Note géolocalisée",description:X.description||"",columnId:X.columnId||"en-cours",accessLevel:X.accessLevel||"private",category:X.category||"forages",style:{color:((H=X.style)==null?void 0:H.color)||"#2b6451",weight:((Z=X.style)==null?void 0:Z.weight)||2,fillColor:((me=X.style)==null?void 0:me.fillColor)||"#2b6451",fillOpacity:((pe=X.style)==null?void 0:pe.fillOpacity)||.8,radius:((de=X.style)==null?void 0:de.radius)||12},comments:X.comments||[],photos:X.photos||[],order:X.order||0,createdAt:X.createdAt||new Date().toISOString(),updatedAt:X.updatedAt||new Date().toISOString()};console.log("[DrawingStore] Données préparées pour la note:",J);const De=kh.fromBackendData(J);return De._dbId=t.id,console.log("[DrawingStore] Note créée:",{id:t.id,location:J.location,name:J.name,type:De.properties.type}),De}catch(J){return console.error("[DrawingStore] Erreur lors de la création de la Note:",J),null}}default:return console.warn("[DrawingStore] Type non géré pour la restauration:",t.type_forme),null}}const Tp=jp("drawing",{state:()=>({currentMapId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",filters:{accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}},currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null,performanceMonitor:Vp()}),getters:{hasUnsavedChanges:t=>t.unsavedChanges,getCurrentElements:t=>t.elements,getSelectedElement:t=>t.selectedElement,getCurrentTool:t=>t.currentTool,getCurrentStyle:t=>t.currentStyle,getLastUsedType:t=>t.lastUsedType,getFilters:t=>t.filters,getFilteredElements:t=>{if(t.elements.length===0)return console.log("[DrawingStore][getFilteredElements] Aucun élément dans le store, retour d'un tableau vide"),[];console.log("[DrawingStore][getFilteredElements] Début du filtrage avec",{totalElements:t.elements.length,filters:JSON.stringify({accessLevels:t.filters.accessLevels,categories:t.filters.categories,shapeTypes:t.filters.shapeTypes})}),console.log("[DrawingStore][getFilteredElements] Éléments dans le store:",t.elements.map(n=>({id:n.id,type_forme:n.type_forme,data:n.data?JSON.stringify(n.data):null})));const e=t.elements.filter(n=>{var l,c;if(console.log(`[DrawingStore][getFilteredElements] Vérification de l'élément ${n.id} (${n.type_forme})`),!(n.type_forme in t.filters.shapeTypes?t.filters.shapeTypes[n.type_forme]:!0))return console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} filtré par type: ${n.type_forme} (non visible)`),!1;const i=((l=n.data)==null?void 0:l.category)||"default";if(!(i in t.filters.categories?t.filters.categories[i]:!0))return console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} filtré par catégorie: ${i} (non visible)`),!1;const o=((c=n.data)==null?void 0:c.accessLevel)||"visitor";let a=!0;return o==="company"?a=t.filters.accessLevels.company:o==="employee"?a=t.filters.accessLevels.employee:o==="visitor"&&(a=t.filters.accessLevels.visitor),a?(console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} visible: type=${n.type_forme}, catégorie=${i}, accès=${o}`),!0):(console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} filtré par niveau d'accès: ${o} (non visible)`),!1)});return console.log("[DrawingStore][getFilteredElements] Résultat du filtrage:",{total:t.elements.length,filtered:e.length,filteredIds:e.map(n=>n.id)}),e}},actions:{setCurrentPlan(t){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentMapId=t,t===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},this.filters={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}},clearCurrentPlan(){(this.currentMapId!==null||this.elements.length>0)&&(this.currentMapId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null)},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(t){var n;const e=this.performanceMonitor.startMeasure("addElement","DrawingStore");try{if(console.log("[DrawingStore] Ajout d'un élément",{element:t,isLeafletLayer:t instanceof Yn.Layer,hasProperties:!!t.properties,properties:t.properties,type:(n=t.properties)==null?void 0:n.type}),t instanceof Yn.Layer&&t.properties){const r=this.performanceMonitor.measure("addElement_convert",()=>g5(t),"DrawingStore");console.log("[DrawingStore] Élément converti avant ajout",{original:t,converted:r,type:r.type_forme,data:r.data}),this.elements.push(r)}else!t.type_forme&&this.lastUsedType&&(t.type_forme=this.lastUsedType),this.elements.push(t);this.unsavedChanges=!0}finally{e()}},updateElement(t){const e=this.elements.findIndex(n=>n.id===t.id);if(e!==-1){const n=this.elements[e].type_forme;this.elements[e]={...t,type_forme:n},this.unsavedChanges=!0}},removeElement(t){const e=this.elements.findIndex(n=>n.id===t);e!==-1&&(this.elements.splice(e,1),this.unsavedChanges=!0)},selectElement(t){this.selectedElement=t},setCurrentTool(t){this.currentTool=t,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(t)&&(this.lastUsedType=t)},setCurrentStyle(t){if(!t||Object.keys(t).length===0){this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2};return}this.currentStyle={...this.currentStyle,...t}},updateFilters(t){if(t.accessLevels&&({...this.filters.accessLevels},this.filters.accessLevels={...this.filters.accessLevels,...t.accessLevels}),t.categories){const e={...this.filters.categories};this.filters.categories={...this.filters.categories,...t.categories};const n=Object.keys(t.categories).filter(r=>e[r]!==this.filters.categories[r]);if(n.length>0){const r=n.filter(i=>e[i]===!1&&this.filters.categories[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("categoriesReactivated",{detail:{categories:r}}))}}if(t.shapeTypes){const e={...this.filters.shapeTypes};this.filters.shapeTypes={...this.filters.shapeTypes,...t.shapeTypes};const n=Object.keys(t.shapeTypes).filter(r=>e[r]!==this.filters.shapeTypes[r]);if(n.length>0){const r=n.filter(i=>e[i]===!1&&this.filters.shapeTypes[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("shapeTypesReactivated",{detail:{shapeTypes:r}}))}}window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:this.filters}}))},async loadPlanElements(t){const e=this.performanceMonitor.startMeasure("loadPlanElements","DrawingStore");if(this.currentMapId===t&&this.elements.length>0)return console.log(`[DrawingStore] Plan ${t} déjà chargé avec ${this.elements.length} éléments`),e(),this.elements;this.loading=!0;try{console.log("[DrawingStore] Début du chargement du plan",{planId:t});const r=(await this.performanceMonitor.measureAsync("loadPlanElements_apiCall",()=>Un.get(`/plans/${t}/`),"DrawingStore")).data;return console.log("[DrawingStore] Données du plan reçues",{formes:r.formes,preferences:r.preferences}),r.formes&&Array.isArray(r.formes)&&r.formes.forEach((i,s)=>{var o,a,l;console.log(`[DrawingStore] Analyse détaillée forme ${s}:`,{id:i.id,type_forme:i.type_forme,hasData:!!i.data,dataKeys:i.data?Object.keys(i.data):[],name:(o=i.data)==null?void 0:o.name,hasName:i.data&&"name"in i.data,centerType:(a=i.data)!=null&&a.center?typeof i.data.center:"undefined",center:(l=i.data)==null?void 0:l.center})}),this.elements=r.formes.map(i=>{var s;if(console.log("[DrawingStore] Traitement de la forme stockée",{id:i.id,type_forme:i.type_forme,data:i.data}),i.type_forme)return console.log("[DrawingStore] Forme déjà au format élément",{type_forme:i.type_forme,data:i.data,hasName:i.data&&"name"in i.data,name:(s=i.data)==null?void 0:s.name}),{id:i.id,type_forme:i.type_forme,data:i.data||{}};try{const o=Cz(i);if(o)return console.log("[DrawingStore] Forme convertie avec succès",{originalType:i.type_forme,convertedType:o.type,properties:o.properties}),g5(o)}catch(o){console.error("[DrawingStore] Erreur lors de la conversion de la forme",{error:o,forme:i})}return console.warn("[DrawingStore] Utilisation de la forme sans conversion",{type_forme:i.type_forme,data:i.data}),i}),console.log(`[DrawingStore] Plan ${t} - Chargé ${this.elements.length} éléments`,{elements:this.elements.map(i=>({id:i.id,type_forme:i.type_forme}))}),this.currentMapId=t,this.unsavedChanges=!1,r.preferences&&(console.log("[DrawingStore] Chargement des préférences",r.preferences),r.preferences.currentTool&&this.setCurrentTool(r.preferences.currentTool),r.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...r.preferences.currentStyle}),r.preferences.lastUsedType&&(this.lastUsedType=r.preferences.lastUsedType)),this.elements}catch(n){throw console.error("[DrawingStore] Erreur lors du chargement des éléments:",n),this.error="Erreur lors du chargement des éléments du plan",n}finally{this.loading=!1,e()}},async saveToPlan(t,e){const n=this.performanceMonitor.startMeasure("saveToPlan","DrawingStore");this.loading=!0;try{const r=t||this.currentMapId;if(console.log("[DrawingStore][saveToPlan] Début de la sauvegarde",{targetPlanId:r,currentPlanId:this.currentMapId,elementsCount:this.elements.length,elementsToDelete:e==null?void 0:e.elementsToDelete}),!r)throw new Error("Aucun plan sélectionné pour la sauvegarde");const i=this.performanceMonitor.measure("saveToPlan_prepareElements",()=>this.elements.map(l=>({...l,type_forme:l.type_forme||this.lastUsedType})),"DrawingStore"),s=(e==null?void 0:e.elementsToDelete)||[],o=`/plans/${r}/save_with_elements/`,a=await this.performanceMonitor.measureAsync("saveToPlan_apiCall",()=>Un.post(o,{formes:i,connexions:[],annotations:[],elementsToDelete:s,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}}),"DrawingStore");return this.elements=this.performanceMonitor.measure("saveToPlan_processResponse",()=>{const l=new Set(s);return a.data.formes.filter(c=>!l.has(c.id)).map(c=>({...c,type_forme:c.type_forme}))},"DrawingStore"),console.log("[DrawingStore][saveToPlan] Éléments après filtrage:",{totalElements:this.elements.length,elementsToDelete:s}),this.unsavedChanges=!1,a.data}catch(r){throw console.error("[DrawingStore][saveToPlan] ERREUR:",r),console.error("[DrawingStore][saveToPlan] Stack trace:",r instanceof Error?r.stack:"No stack trace"),this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1,n()}}}}),BE=jp("mapFilters",{state:()=>({filters:[],loading:!1,error:null,performanceMonitor:Vp()}),getters:{getFilterById:t=>e=>t.filters.find(n=>n.id===e),getFiltersByCategory:t=>e=>t.filters.filter(n=>n.category===e),getUniqueCategories:t=>{const e=new Set;return t.filters.forEach(n=>e.add(n.category)),Array.from(e)}},actions:{async initializeStore(){await this.fetchFilters()},async fetchFilters(){const t=this.performanceMonitor.startMeasure("fetchFilters","MapFilterStore"),e=ru();this.loading=!0,this.error=null;try{const n=await this.performanceMonitor.measureAsync("fetchFilters_apiCall",()=>_0.getFilters(),"MapFilterStore");return this.filters=n.data,this.filters}catch(n){throw this.error="Erreur lors du chargement des filtres",e.error("Impossible de charger les filtres de carte"),console.error("[MapFilterStore] Erreur lors du chargement des filtres:",n),n}finally{this.loading=!1,t()}},async createFilter(t){const e=this.performanceMonitor.startMeasure("createFilter","MapFilterStore");this.loading=!0,this.error=null;try{const n=await this.performanceMonitor.measureAsync("createFilter_apiCall",()=>_0.createFilter(t),"MapFilterStore");return this.filters.push(n.data),console.log("[MapFilterStore] Filtre créé avec succès:",n.data),n.data}catch(n){throw this.error="Erreur lors de la création du filtre",console.error("[MapFilterStore] Erreur lors de la création du filtre:",n),n}finally{this.loading=!1,e()}},async updateFilter(t,e){const n=this.performanceMonitor.startMeasure("updateFilter","MapFilterStore");this.loading=!0,this.error=null;try{const r=await this.performanceMonitor.measureAsync("updateFilter_apiCall",()=>_0.updateFilter(t,e),"MapFilterStore"),i=this.filters.findIndex(s=>s.id===t);return i!==-1&&(this.filters[i]=r.data),console.log("[MapFilterStore] Filtre mis à jour avec succès:",r.data),r.data}catch(r){throw this.error="Erreur lors de la mise à jour du filtre",console.error("[MapFilterStore] Erreur lors de la mise à jour du filtre:",r),r}finally{this.loading=!1,n()}},async deleteFilter(t){const e=this.performanceMonitor.startMeasure("deleteFilter","MapFilterStore");this.loading=!0,this.error=null;try{return await this.performanceMonitor.measureAsync("deleteFilter_apiCall",()=>_0.deleteFilter(t),"MapFilterStore"),this.filters=this.filters.filter(n=>n.id!==t),console.log("[MapFilterStore] Filtre supprimé avec succès:",t),!0}catch(n){throw this.error="Erreur lors de la suppression du filtre",console.error("[MapFilterStore] Erreur lors de la suppression du filtre:",n),n}finally{this.loading=!1,e()}}}}),Vy=jp("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[],performanceMonitor:Vp()}),getters:{getPlanById:t=>e=>t.plans.find(n=>n.id===e),hasUnsavedChanges:t=>t.unsavedChanges,getCurrentPlanHistory:t=>t.planHistory},actions:{async fetchPlans(){var n,r;const t=this.performanceMonitor.startMeasure("fetchPlans","IrrigationStore"),e=pa();this.loading=!0;try{let i="/plans/";const s={};e.isSalarie?s.salarie=(n=e.user)==null?void 0:n.id:e.isVisiteur&&(s.visiteur=(r=e.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlans_apiCall",()=>Un.get(i,{params:s}),"IrrigationStore");this.plans=o.data}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,t()}},async fetchPlansWithDetails(){var n,r;const t=this.performanceMonitor.startMeasure("fetchPlansWithDetails","IrrigationStore"),e=pa();this.loading=!0;try{let i="/plans/";const s={include_details:!0};e.isSalarie?s.salarie=(n=e.user)==null?void 0:n.id:e.isVisiteur&&(s.visiteur=(r=e.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlansWithDetails_apiCall",()=>Un.get(i,{params:s}),"IrrigationStore"),a=this.performanceMonitor.measure("fetchPlansWithDetails_processResponse",()=>o.data.map(l=>({...l,entreprise:typeof l.entreprise=="object"?l.entreprise:null,salarie:typeof l.salarie=="object"?l.salarie:null,visiteur:typeof l.visiteur=="object"?l.visiteur:null})),"IrrigationStore");return this.plans=a,{data:a}}catch(i){throw console.error("[IrrigationStore] Error fetching plans:",i),this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,t()}},async fetchClientPlans(t){this.loading=!0;try{return(await b0.getVisiteurPlans(t)).data}catch(e){throw this.error="Erreur lors du chargement des plans du client",e}finally{this.loading=!1}},async createPlan(t){var r;const e=this.performanceMonitor.startMeasure("createPlan","IrrigationStore");this.clearCurrentPlan(),this.loading=!0;const n=ru();try{const i=pa();((r=i.user)==null?void 0:r.user_type)==="visiteur"&&(t={...t,visiteur:i.user.id,salarie_id:i.user.enterprise_id,entreprise_id:i.user.enterprise_id});const s=this.performanceMonitor.measure("createPlan_formatData",()=>({...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&t.entreprise&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&t.salarie&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&t.visiteur&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null}),"IrrigationStore"),o=await this.performanceMonitor.measureAsync("createPlan_apiCall",()=>b0.createPlan(s),"IrrigationStore");return this.plans.push(o.data),n.success(`Le plan "${o.data.nom}" a été créé avec succès`),o.data}catch(i){const s=i instanceof Error?i.message:String(i);throw console.error("Error creating plan:",s),this.error=s,n.error(`Erreur lors de la création du plan : ${s}`),i}finally{this.loading=!1,e()}},async createPlanForClient(t,e){this.clearCurrentPlan(),this.loading=!0;try{const n={...t,visiteur:e},r=await b0.createPlanForVisiteur(n);return this.plans.push(r.data),r.data}catch(n){const r=n instanceof Error?n.message:String(n);throw console.error("Error creating plan for client:",r),this.error="Erreur lors de la création du plan pour le client",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(t){const e=this.performanceMonitor.startMeasure("savePlan","IrrigationStore");if(!this.unsavedChanges){console.log("[IrrigationStore][savePlan] Aucun changement à sauvegarder"),e();return}this.loading=!0;try{const n=await this.performanceMonitor.measureAsync("savePlan_apiCall",()=>{var r;return Un.patch(`/plans/${t}/`,{...this.currentPlan,version:((r=this.currentPlan)==null?void 0:r.version)||1})},"IrrigationStore");return this.performanceMonitor.measure("savePlan_updateState",()=>{var i;const r=this.plans.findIndex(s=>s.id===t);r!==-1&&(this.plans[r]=n.data),((i=this.currentPlan)==null?void 0:i.id)===t&&(this.currentPlan=n.data)},"IrrigationStore"),this.unsavedChanges=!1,n.data}catch(n){throw console.error("[IrrigationStore][savePlan] ERREUR:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1,e()}},async updatePlanDetails(t,e){const n=this.performanceMonitor.startMeasure("updatePlanDetails","IrrigationStore"),r=ru();try{const i=await this.performanceMonitor.measureAsync("updatePlanDetails_apiCall",()=>{const{visiteur_id:s,salarie_id:o,entreprise_id:a,...l}=e,c={...l};return s!==void 0&&(c.visiteur_id=s),o!==void 0&&(c.salarie_id=o),a!==void 0&&(c.entreprise_id=a),Un.patch(`/plans/${t}/`,c)},"IrrigationStore");return this.performanceMonitor.measure("updatePlanDetails_updateState",()=>{this.currentPlan&&this.currentPlan.id===t&&(this.currentPlan={...this.currentPlan,...i.data});const s=this.plans.findIndex(o=>o.id===t);s!==-1&&(this.plans[s]={...this.plans[s],...i.data})},"IrrigationStore"),i.data}catch(i){throw console.error("Erreur lors de la mise à jour du plan:",i),r.error(`Erreur lors de la mise à jour du plan : ${i instanceof Error?i.message:String(i)}`),i}finally{n()}},async fetchPlanHistory(t){this.loading=!0;try{const e=await Un.get(`/plans/${t}/historique/`);return this.planHistory=e.data,e.data}catch(e){throw this.error="Erreur lors de la récupération de l'historique",e}finally{this.loading=!1}},async restorePlanVersion(t,e){var n;this.loading=!0;try{const r=await Un.post(`/plans/${t}/restaurer/`,{version_id:e});((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=r.data);const i=this.plans.findIndex(s=>s.id===t);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(t){this.currentPlan=t,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(t){var n;this.loading=!0;const e=ru();try{const r=this.plans.find(i=>i.id===t);await b0.deletePlan(t),this.plans=this.plans.filter(i=>i.id!==t),((n=this.currentPlan)==null?void 0:n.id)===t&&this.clearCurrentPlan(),e.success(`Le plan "${(r==null?void 0:r.nom)||""}" a été supprimé avec succès`)}catch(r){throw this.error="Erreur lors de la suppression du plan",e.error(`Erreur lors de la suppression du plan : ${r instanceof Error?r.message:String(r)}`),r}finally{this.loading=!1}}}}),Ez={class:"hidden md:hidden flex-mobile items-center justify-between p-4 border-b border-gray-200"},Pz={class:"flex-1 overflow-y-auto"},Mz={class:"border-b border-gray-200"},kz={class:"flex -mb-px"},Az={class:"flex-1 overflow-hidden flex flex-col"},Tz={key:0,class:"p-3 overflow-y-auto flex-1"},Dz={class:"grid grid-cols-4 gap-1.5 mb-4"},Oz=["onClick","title"],Nz=["innerHTML"],Iz={key:1,class:"my-4 border-t border-gray-200"},Bz={key:2,class:"mt-4"},Rz={key:0,class:"mb-4"},Fz={class:"mb-4"},jz=["value"],zz={class:"mb-4"},$z={class:"grid grid-cols-1 gap-4"},Vz={key:0,class:"space-y-1"},Uz={class:"flex justify-between items-center"},Hz={class:"text-sm font-medium text-gray-500"},Wz={class:"flex justify-between items-center"},Gz={class:"text-sm font-medium text-gray-500"},qz={class:"text-sm font-medium text-gray-500"},Yz={class:"flex flex-col space-y-2 w-full"},Kz={class:"flex justify-between items-center"},Zz={class:"text-sm font-medium text-gray-500 ml-2"},Xz={class:"flex justify-between items-center"},Jz={class:"text-sm font-medium text-gray-500 ml-2"},Qz={class:"flex justify-between items-center"},e$={class:"text-sm font-medium text-gray-500 ml-2"},t$={class:"flex justify-between items-center"},n$={class:"text-sm font-medium text-gray-500 ml-2"},r$={class:"flex justify-between items-center"},i$={class:"text-sm font-medium text-gray-500 ml-2"},s$={ref:"elevationProfileContainer",class:"elevation-profile-container w-full h-48 bg-gray-50 rounded border border-gray-200 relative mt-4"},o$={ref:"elevationCanvas"},a$={key:1,class:"p-3 overflow-y-auto flex-1"},l$={class:"grid grid-cols-6 gap-2 mb-4"},u$=["onClick","title"],c$={key:0,class:"space-y-4"},h$={class:"flex items-center gap-4"},d$={class:"flex items-center gap-2"},f$={class:"flex items-center gap-4"},p$=["value"],g$={key:0,class:"flex items-center gap-4"},m$={class:"flex items-center gap-2"},v$={key:1,class:"space-y-4"},y$={class:"flex items-center gap-4"},b$={class:"flex items-center gap-2"},_$={class:"flex items-center gap-4"},w$={class:"flex items-center gap-2"},x$={key:2,class:"filters-tab"},L$={class:"filters-content"},S$={class:"space-y-2"},C$={class:"space-y-2 mt-4"},E$={class:"space-y-1"},P$={class:"flex items-center"},M$={class:"flex items-center"},k$={class:"flex items-center"},A$={class:"flex items-center"},T$={class:"flex items-center"},D$={class:"flex items-center"},O$={key:0,class:"flex items-center"},N$=["onUpdate:modelValue"],I$={class:"ml-2 text-sm text-gray-700"},B$={key:0,class:"mt-2 pt-2 border-t border-gray-200"},R$={class:"flex space-x-2"},F$=["disabled"],j$={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},z$={key:1,class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},$$={class:"space-y-2 mt-4"},V$={class:"space-y-1"},U$={class:"flex items-center"},H$={class:"flex items-center"},W$={class:"flex items-center"},G$={class:"flex items-center"},q$={key:0,class:"p-3 border-t border-gray-200"},Y$={class:"mt-3"},K$={class:"mb-4"},Z$={class:"grid grid-cols-2 gap-2"},X$={class:"grid grid-cols-2 gap-2"},J$=js({__name:"DrawingTools",props:{show:{type:Boolean,default:!1},selectedTool:{type:String,default:""},selectedShape:{type:Object,default:null},allLayers:{type:Array,default:()=>[]},isDrawing:{type:Boolean,default:!1}},emits:["update:show","tool-selected","style-update","properties-update","delete-shape","filter-change","close-drawer"],setup(t,{emit:e}){const n=t,r=Tp(),i=pa(),s=Jn(()=>i.isAdmin),o=Jn(()=>i.isEntreprise),a=BE(),l=Vy(),c=iu({name:""}),d=Ct(!1),p=Ct(["forages","clients","entrepots","livraisons","cultures","parcelles"]),v=[{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"ElevationLine",label:"Profil altimétrique"},{type:"Note",label:"Note géolocalisée"}],m=Se=>{switch(Se){case"Polygon":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5l16 0l0 14l-16 0l0 -14z"/></svg>';case"Line":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20l16 -16"/></svg>';case"ElevationLine":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 20h18l-3-3l-4 4l-4-7l-4 4l-3-3"/></svg>';case"Note":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 2l4 4m-6 0l2-2 4 4-2 2-4-4z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h8" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14h4" /></svg>';default:return""}},x=Ct("tools");Di(()=>n.selectedTool,(Se,ve)=>{console.log("[DrawingTools][watch selectedTool] Changement d'outil:",{newTool:Se,oldTool:ve})}),Di(x,(Se,ve)=>{console.log("[DrawingTools][watch activeTab] Changement d'onglet:",{newTab:Se,oldTab:ve}),Se==="filters"&&ve!=="filters"&&(console.log("[DrawingTools][watch activeTab] Passage à l'onglet filtres"),console.log("[DrawingTools][watch activeTab] État actuel des filtres dans le store:",JSON.stringify({accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}},null,2)),console.log("[DrawingTools][watch activeTab] État actuel des filtres locaux:",JSON.stringify({accessLevels:{...z.accessLevels},categories:{...z.categories},shapeTypes:{...z.shapeTypes}},null,2)),n.selectedShape&&(console.log("[DrawingTools][watch activeTab] Désélection de la forme actuelle lors du passage à l'onglet filtres"),le("tool-selected","")),setTimeout(()=>{X()},0)),ve==="filters"&&Se!=="filters"&&(console.log("[DrawingTools][watch activeTab] Sortie de l'onglet filtres, application des changements"),console.log("[DrawingTools][watch activeTab] État des filtres locaux avant application:",JSON.stringify({accessLevels:{...z.accessLevels},categories:{...z.categories},shapeTypes:{...z.shapeTypes}},null,2)),X())});const E=Ct({samplePoints:!0,circleSections:!0}),k=Ct("#2b6451"),A=Ct(2),D=Ct("solid"),V=Ct("#2b6451"),Y=Ct(.2),te=Ct(!0),ge=Ct(""),fe=Ct("default"),I=Ct("visitor"),F=Ct({radius:4,color:"#2b6451",fillOpacity:.6,weight:2}),K=Ct({radius:6,color:"#EF4444",fillOpacity:.8,weight:2}),B=["#2b6451","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],N=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillés"}],j=Ct("company"),z=iu({accessLevels:{company:!0,employee:!1,visitor:!1},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}),U=Se=>{console.log(`[DrawingTools][updateAccessLevelFilter] Changement du niveau d'accès: ${Se}`),j.value=Se,Se==="company"?(z.accessLevels.company=!0,z.accessLevels.employee=!1,z.accessLevels.visitor=!1):Se==="employee"?(z.accessLevels.company=!1,z.accessLevels.employee=!0,z.accessLevels.visitor=!1):Se==="visitor"&&(z.accessLevels.company=!1,z.accessLevels.employee=!1,z.accessLevels.visitor=!0),X()},$=Se=>{console.log(`[DrawingTools][updateAccessLevelFilterAndDeselect] Changement du niveau d'accès: ${Se}`),n.selectedShape&&(console.log("[DrawingTools][updateAccessLevelFilterAndDeselect] Désélection de la forme actuelle"),le("tool-selected","")),U(Se)};console.log("[DrawingTools] Initialisation des filtres:",JSON.stringify({local:{accessLevels:{...z.accessLevels},categories:{...z.categories},shapeTypes:{...z.shapeTypes}},store:{accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}}},null,2));const re=Jn(()=>n.selectedShape&&n.selectedShape.properties||null),Q=Se=>{E.value[Se]=!E.value[Se]},_e=Se=>{k.value=Se,V.value=Se,we({strokeColor:Se,fillColor:Se})},we=Se=>{n.selectedShape&&le("style-update",Se)},nt=()=>{n.selectedShape&&le("properties-update",{name:ge.value})},ae=()=>{n.selectedShape&&le("properties-update",{category:fe.value})},H=()=>{n.selectedShape&&le("properties-update",{accessLevel:I.value})},Z=()=>{var Se;!n.selectedShape||((Se=re.value)==null?void 0:Se.type)!=="ElevationLine"||le("style-update",{samplePointStyle:F.value})},me=()=>{var Se;!n.selectedShape||((Se=re.value)==null?void 0:Se.type)!=="ElevationLine"||le("style-update",{minMaxPointStyle:K.value})},pe=()=>{console.log("[DrawingTools][resetFilters] Début de la réinitialisation des filtres"),console.log("[DrawingTools][resetFilters] État actuel des filtres:",JSON.stringify({accessLevels:{...z.accessLevels},categories:{...z.categories},shapeTypes:{...z.shapeTypes}},null,2));const Se={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}};console.log("[DrawingTools][resetFilters] Nouveaux filtres à appliquer:",JSON.stringify(Se,null,2)),console.log("[DrawingTools][resetFilters] Mise à jour des filtres locaux"),z.accessLevels.company=!0,z.accessLevels.employee=!0,z.accessLevels.visitor=!0,z.categories.forages=!0,z.categories.clients=!0,z.categories.entrepots=!0,z.categories.livraisons=!0,z.categories.cultures=!0,z.categories.parcelles=!0,z.shapeTypes.Polygon=!0,z.shapeTypes.Line=!0,z.shapeTypes.ElevationLine=!0,z.shapeTypes.Note=!0,console.log("[DrawingTools][resetFilters] Filtres locaux après mise à jour:",JSON.stringify({accessLevels:{...z.accessLevels},categories:{...z.categories},shapeTypes:{...z.shapeTypes}},null,2)),console.log("[DrawingTools][resetFilters] Mise à jour des filtres dans le store"),r.updateFilters(Se),console.log("[DrawingTools][resetFilters] Émission de l'event filter-change"),le("filter-change",Se),console.log("[DrawingTools][resetFilters] Mise à jour forcée de l'affichage"),console.log("[DrawingTools][resetFilters] Filtres réinitialisés avec succès")},de=()=>{console.log("[DrawingTools][resetFiltersAndDeselect] Début de la réinitialisation des filtres avec désélection"),he(),pe(),console.log("[DrawingTools][resetFiltersAndDeselect] Filtres réinitialisés et forme désélectionnée avec succès")},X=()=>{const Se={...z.accessLevels},ve={...z.categories},$e={...z.shapeTypes};console.log("[DrawingTools][applyFilters] Application des filtres:",JSON.stringify({accessLevels:Se,categories:ve,shapeTypes:$e},null,2));const Ge={accessLevels:Se,categories:ve,shapeTypes:$e};console.log("[DrawingTools][applyFilters] Envoi des filtres au store:",JSON.stringify(Ge,null,2)),r.updateFilters(Ge),console.log("[DrawingTools][applyFilters] Émission de l'event filter-change"),le("filter-change",Ge),setTimeout(()=>{console.log("[DrawingTools][applyFilters] Mise à jour forcée de l'affichage"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:Ge}}))},0),console.log("[DrawingTools][applyFilters] Filtres appliqués avec succès")},J=Se=>`${Math.round(Se)} m`,De=Se=>Se>=1e4?`${(Se/1e4).toFixed(2)} ha`:`${Math.round(Se)} m²`,Te=Se=>`${Se.toFixed(1)}%`,Je=Se=>p.value.includes(Se)?Se:Se.split("_").map(ve=>ve.charAt(0).toUpperCase()+ve.slice(1)).join(" "),he=()=>{n.selectedShape&&(console.log("[DrawingTools][deselectCurrentShape] Désélection de la forme actuelle"),le("tool-selected",""))};async function ee(){var Se,ve;if(!(!c.name||d.value)){d.value=!0;try{const $e=c.name.toLowerCase().replace(/\s+/g,"_"),Ge=l.currentPlan;let Xe=null;if(Ge!=null&&Ge.entreprise_id?Xe=Ge.entreprise_id:Ge!=null&&Ge.entreprise&&typeof Ge.entreprise=="object"&&"id"in Ge.entreprise?Xe=Ge.entreprise.id:(Se=i.user)!=null&&Se.enterprise_id?Xe=i.user.enterprise_id:i.isEntreprise&&((ve=i.user)!=null&&ve.id)&&(Xe=i.user.id),!Xe){console.error("[DrawingTools] Impossible de créer un filtre: ID d'entreprise non disponible");return}console.log("[DrawingTools] Création d'un filtre pour l'entreprise:",Xe);const lt=await a.createFilter({name:c.name,category:$e,entreprise:Xe});console.log("[DrawingTools] Filtre créé avec succès:",lt),z.categories[$e]||(console.log(`[DrawingTools] Ajout de la catégorie ${$e} aux filtres locaux`),z.categories[$e]=!0),console.log(`[DrawingTools] Mise à jour du DrawingStore avec la catégorie ${$e}`);const qe={...r.filters.categories};qe[$e]=!0,r.updateFilters({categories:qe}),console.log("[DrawingTools] Émission de l'événement filter-change"),le("filter-change",z),c.name=""}catch($e){console.error("[DrawingTools] Erreur lors de la création du filtre:",$e)}finally{d.value=!1}}}const se=()=>{he(),x.value="filters"},le=e;dm(()=>{var Se,ve,$e,Ge,Xe,lt,qe;if(n.selectedShape){console.log("[DrawingTools][watchEffect] Mise à jour des propriétés pour la forme sélectionnée:",{type:n.selectedShape.type,properties:n.selectedShape.properties,options:n.selectedShape.options,layer:(Se=n.selectedShape.layer)==null?void 0:Se._leaflet_id});const Lt=n.selectedShape.options||{};k.value=Lt.color||"#2b6451",A.value=Lt.weight||3,D.value=Lt.dashArray?"dashed":"solid",V.value=Lt.fillColor||"#2b6451",Y.value=Lt.fillOpacity||.2;const Gt=n.selectedShape.type||((ve=n.selectedShape.properties)==null?void 0:ve.type)||"";te.value=Gt!=="Line",console.log("[DrawingTools][watchEffect] Type de forme détecté:",Gt),ge.value=(($e=n.selectedShape.properties)==null?void 0:$e.name)||"",fe.value=((Ge=n.selectedShape.properties)==null?void 0:Ge.category)||"forages",I.value=((Xe=n.selectedShape.properties)==null?void 0:Xe.accessLevel)||"visitor",Gt==="ElevationLine"&&((lt=n.selectedShape.properties)!=null&&lt.samplePointStyle&&(F.value={...n.selectedShape.properties.samplePointStyle}),(qe=n.selectedShape.properties)!=null&&qe.minMaxPointStyle&&(K.value={...n.selectedShape.properties.minMaxPointStyle})),console.log("[DrawingTools][watchEffect] Propriétés mises à jour avec succès")}}),go(async()=>{console.log("[DrawingTools][onMounted] Initialisation des filtres depuis le store");const Se=r.filters;console.log("[DrawingTools][onMounted] Filtres du store:",JSON.stringify({accessLevels:{...Se.accessLevels},categories:{...Se.categories},shapeTypes:{...Se.shapeTypes}},null,2)),z.accessLevels.company=Se.accessLevels.company,z.accessLevels.employee=Se.accessLevels.employee,z.accessLevels.visitor=Se.accessLevels.visitor,z.categories.forages=Se.categories.forages,z.categories.clients=Se.categories.clients,z.categories.entrepots=Se.categories.entrepots,z.categories.livraisons=Se.categories.livraisons,z.categories.cultures=Se.categories.cultures,z.categories.parcelles=Se.categories.parcelles,z.shapeTypes.Polygon=Se.shapeTypes.Polygon,z.shapeTypes.Line=Se.shapeTypes.Line,z.shapeTypes.ElevationLine=Se.shapeTypes.ElevationLine,z.shapeTypes.Note=Se.shapeTypes.Note;try{console.log("[DrawingTools][onMounted] Chargement des filtres personnalisés"),await a.fetchFilters();const ve=a.getUniqueCategories;console.log("[DrawingTools][onMounted] Catégories personnalisées trouvées:",ve);const $e=[];ve.forEach(Ge=>{!p.value.includes(Ge)&&!z.categories[Ge]&&(console.log(`[DrawingTools][onMounted] Ajout de la catégorie personnalisée: ${Ge}`),z.categories[Ge]=!0,$e.push(Ge))}),$e.length>0&&(console.log("[DrawingTools][onMounted] Mise à jour du store avec les catégories personnalisées:",$e),r.updateFilters({categories:z.categories}),le("filter-change",z))}catch(ve){console.error("[DrawingTools][onMounted] Erreur lors du chargement des filtres personnalisés:",ve)}console.log("[DrawingTools][onMounted] Filtres locaux après initialisation:",JSON.stringify({accessLevels:{...z.accessLevels},categories:{...z.categories},shapeTypes:{...z.shapeTypes}},null,2))}),Di(z,(Se,ve)=>{console.log("[DrawingTools][watch filters] Changement détecté:",{activeTab:x.value,newFilters:JSON.stringify({accessLevels:Se.accessLevels,categories:Se.categories,shapeTypes:Se.shapeTypes}),oldFilters:JSON.stringify({accessLevels:ve.accessLevels,categories:ve.categories,shapeTypes:ve.shapeTypes})});const $e=Object.keys(Se.accessLevels).filter(qe=>ve.accessLevels[qe]!==Se.accessLevels[qe]),Ge=Object.keys(Se.categories).filter(qe=>ve.categories[qe]!==Se.categories[qe]),Xe=Object.keys(Se.shapeTypes).filter(qe=>ve.shapeTypes[qe]!==Se.shapeTypes[qe]),lt=$e.length>0||Ge.length>0||Xe.length>0;console.log("[DrawingTools][watch filters] Différences détectées:",{accessLevelsDiff:$e,categoriesDiff:Ge,shapeTypesDiff:Xe,hasChanges:lt}),x.value==="filters"?(console.log("[DrawingTools][watch filters] Onglet filtres actif, application des filtres"),X()):console.log("[DrawingTools][watch filters] Onglet filtres non actif, pas d'application automatique")},{deep:!0});const ze=Se=>{console.log("[DrawingTools][handleToolClick] Outil cliqué:",Se,"Outil actuel:",n.selectedTool),le("tool-selected",n.selectedTool===Se?"":Se),window.innerWidth<768&&le("update:show",!1)};return(Se,ve)=>{var $e,Ge,Xe,lt;return Ie(),je("div",{class:Ti(["drawing-tools-panel",{open:t.show}])},[C("div",Ez,[ve[47]||(ve[47]=C("div",{class:"flex items-center"},[C("div",{class:"w-10 h-1.5 bg-gray-300 rounded-full mr-3"}),C("h3",{class:"text-sm font-semibold text-gray-700"},"Outils de dessin")],-1)),C("button",{onClick:ve[0]||(ve[0]=qe=>Se.$emit("update:show",!1)),class:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},ve[46]||(ve[46]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",Pz,[C("div",Mz,[C("nav",kz,[C("button",{onClick:ve[1]||(ve[1]=qe=>x.value="tools"),class:Ti([x.value==="tools"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},ve[48]||(ve[48]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),C("span",null,"Outils",-1)]),2),t.selectedShape&&(($e=t.selectedShape.properties)==null?void 0:$e.type)!=="Note"?(Ie(),je("button",{key:0,onClick:ve[2]||(ve[2]=qe=>x.value="style"),class:Ti([x.value==="style"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},ve[49]||(ve[49]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1),C("span",null,"Style",-1)]),2)):en("",!0),C("button",{onClick:se,class:Ti([x.value==="filters"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},ve[50]||(ve[50]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),C("span",null,"Filtres",-1)]),2)])]),C("div",Az,[x.value==="tools"?(Ie(),je("div",Tz,[C("div",Dz,[(Ie(!0),je(Mn,null,gr(v.filter(qe=>qe.type!=="delete"),qe=>(Ie(),je("button",{key:qe.type,class:Ti(["flex items-center justify-center p-2 rounded-md border transition-all duration-200",{"bg-primary-50 border-primary-500 text-primary-600":n.selectedTool===qe.type,"hover:bg-gray-50 border-gray-300 text-gray-700":n.selectedTool!==qe.type}]),onClick:Lt=>ze(qe.type),title:qe.label},[C("span",{class:"icon",innerHTML:m(qe.type)},null,8,Nz)],10,Oz))),128))]),t.selectedShape?(Ie(),je("button",{key:0,class:Ti(["w-full mt-2 p-2 rounded-md border border-red-200 bg-red-50 text-red-600 hover:bg-red-100 flex items-center justify-center",{"bg-red-100":n.selectedTool==="delete"}]),onClick:ve[3]||(ve[3]=qe=>Se.$emit("delete-shape")),title:"Supprimer la forme"},ve[51]||(ve[51]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),C("span",{class:"text-sm"},"Supprimer",-1)]),2)):en("",!0),t.selectedShape&&re.value?(Ie(),je("div",Iz)):en("",!0),t.selectedShape&&re.value?(Ie(),je("div",Bz,[re.value.type!=="Note"?(Ie(),je("div",Rz,[ve[52]||(ve[52]=C("label",{for:"shapeName",class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de la forme",-1)),On(C("input",{type:"text",id:"shapeName","onUpdate:modelValue":ve[4]||(ve[4]=qe=>ge.value=qe),onChange:nt,placeholder:"Donnez un nom à cette forme",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,544),[[Fr,ge.value]])])):en("",!0),C("div",Fz,[ve[55]||(ve[55]=C("label",{for:"shapeCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Catégorie",-1)),On(C("select",{id:"shapeCategory","onUpdate:modelValue":ve[5]||(ve[5]=qe=>fe.value=qe),onChange:ae,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},[ve[53]||(ve[53]=eu('<option value="forages" data-v-27145f9b>Forages</option><option value="clients" data-v-27145f9b>Clients</option><option value="entrepots" data-v-27145f9b>Entrepôts</option><option value="livraisons" data-v-27145f9b>Lieux de livraison</option><option value="cultures" data-v-27145f9b>Cultures</option><option value="parcelles" data-v-27145f9b>Noms des parcelles</option>',6)),(Ie(!0),je(Mn,null,gr(z.categories,(qe,Lt)=>(Ie(),je(Mn,{key:Lt},[p.value.includes(String(Lt))?en("",!0):(Ie(),je("option",{key:0,value:String(Lt)},Ot(Je(String(Lt))),9,jz))],64))),128)),ve[54]||(ve[54]=C("option",{value:"default"},"Autre",-1))],544),[[rs,fe.value]])]),C("div",zz,[ve[57]||(ve[57]=C("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700 mb-1"},"Niveau d'accès",-1)),ve[58]||(ve[58]=C("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Définit qui peut voir cet élément sur la carte. ",-1)),On(C("select",{id:"accessLevel","onUpdate:modelValue":ve[6]||(ve[6]=qe=>I.value=qe),onChange:H,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},ve[56]||(ve[56]=[C("option",{value:"company"},"Entreprise uniquement",-1),C("option",{value:"employee"},"Entreprise et salariés",-1),C("option",{value:"visitor"},"Tous (visiteurs inclus)",-1)]),544),[[rs,I.value]])]),C("div",$z,[re.value.type==="Polygon"?(Ie(),je("div",Vz,[C("div",Uz,[ve[59]||(ve[59]=C("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),C("span",Hz,Ot(De(re.value.surface||0)),1)]),C("div",Wz,[ve[60]||(ve[60]=C("span",{class:"text-sm font-semibold text-gray-700"},"Périmètre :",-1)),C("span",Gz,Ot(J(re.value.perimeter||0)),1)])])):re.value.type==="Line"?(Ie(),je(Mn,{key:1},[ve[61]||(ve[61]=C("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),C("span",qz,Ot(J(re.value.length||0)),1)],64)):re.value.type==="ElevationLine"?(Ie(),je(Mn,{key:2},[C("div",Yz,[C("div",Kz,[ve[62]||(ve[62]=C("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Distance totale :",-1)),C("span",Zz,Ot(J(re.value.length||0)),1)]),C("div",Xz,[ve[63]||(ve[63]=C("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dénivelé + :",-1)),C("span",Jz,Ot(J(re.value.elevationGain||0)),1)]),C("div",Qz,[ve[64]||(ve[64]=C("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dénivelé - :",-1)),C("span",e$,Ot(J(re.value.elevationLoss||0)),1)]),C("div",t$,[ve[65]||(ve[65]=C("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente moy. :",-1)),C("span",n$,Ot(Te(re.value.averageSlope||0)),1)]),C("div",r$,[ve[66]||(ve[66]=C("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente max :",-1)),C("span",i$,Ot(Te(re.value.maxSlope||0)),1)])]),C("div",s$,[C("canvas",o$,null,512)],512)],64)):en("",!0)])])):en("",!0)])):en("",!0),x.value==="style"&&t.selectedShape&&((Ge=t.selectedShape.properties)==null?void 0:Ge.type)!=="Note"?(Ie(),je("div",a$,[C("div",l$,[(Ie(),je(Mn,null,gr(B,qe=>C("button",{key:qe,class:"w-8 h-8 rounded-full",style:tu({backgroundColor:qe}),onClick:Lt=>_e(qe),title:qe},null,12,u$)),64))]),((Xe=re.value)==null?void 0:Xe.type)!=="TextRectangle"?(Ie(),je("div",c$,[C("div",h$,[ve[67]||(ve[67]=C("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),C("div",d$,[On(C("input",{type:"color","onUpdate:modelValue":ve[7]||(ve[7]=qe=>k.value=qe),class:"w-16 h-8 rounded border",onChange:ve[8]||(ve[8]=qe=>we({strokeColor:k.value})),title:"Couleur du contour"},null,544),[[Fr,k.value]]),On(C("input",{type:"range","onUpdate:modelValue":ve[9]||(ve[9]=qe=>A.value=qe),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:ve[10]||(ve[10]=qe=>we({strokeWidth:A.value})),title:"Épaisseur du contour"},null,544),[[Fr,A.value]])])]),C("div",f$,[ve[68]||(ve[68]=C("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),On(C("select",{"onUpdate:modelValue":ve[11]||(ve[11]=qe=>D.value=qe),class:"w-full rounded border",onChange:ve[12]||(ve[12]=qe=>we({strokeStyle:D.value}))},[(Ie(),je(Mn,null,gr(N,qe=>C("option",{key:qe.value,value:qe.value},Ot(qe.label),9,p$)),64))],544),[[rs,D.value]])]),te.value?(Ie(),je("div",g$,[ve[69]||(ve[69]=C("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),C("div",m$,[On(C("input",{type:"color","onUpdate:modelValue":ve[13]||(ve[13]=qe=>V.value=qe),class:"w-16 h-8 rounded border",onChange:ve[14]||(ve[14]=qe=>we({fillColor:V.value})),title:"Couleur de remplissage"},null,544),[[Fr,V.value]]),On(C("input",{type:"range","onUpdate:modelValue":ve[15]||(ve[15]=qe=>Y.value=qe),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:ve[16]||(ve[16]=qe=>we({fillOpacity:Y.value})),title:"Opacité du remplissage"},null,544),[[Fr,Y.value]])])])):en("",!0)])):en("",!0),((lt=re.value)==null?void 0:lt.type)==="TextRectangle"?(Ie(),je("div",v$,[C("div",y$,[ve[70]||(ve[70]=C("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),C("div",b$,[On(C("input",{type:"color","onUpdate:modelValue":ve[17]||(ve[17]=qe=>k.value=qe),class:"w-16 h-8 rounded border",onChange:ve[18]||(ve[18]=qe=>we({strokeColor:k.value})),title:"Couleur du contour"},null,544),[[Fr,k.value]]),On(C("input",{type:"range","onUpdate:modelValue":ve[19]||(ve[19]=qe=>A.value=qe),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:ve[20]||(ve[20]=qe=>we({strokeWidth:A.value})),title:"Épaisseur du contour"},null,544),[[Fr,A.value]])])]),C("div",_$,[ve[71]||(ve[71]=C("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),C("div",w$,[On(C("input",{type:"color","onUpdate:modelValue":ve[21]||(ve[21]=qe=>V.value=qe),class:"w-16 h-8 rounded border",onChange:ve[22]||(ve[22]=qe=>we({fillColor:V.value})),title:"Couleur de remplissage"},null,544),[[Fr,V.value]]),On(C("input",{type:"range","onUpdate:modelValue":ve[23]||(ve[23]=qe=>Y.value=qe),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:ve[24]||(ve[24]=qe=>we({fillOpacity:Y.value})),title:"Opacité du remplissage"},null,544),[[Fr,Y.value]])])])])):en("",!0)])):en("",!0),x.value==="filters"?(Ie(),je("div",x$,[C("div",L$,[C("div",S$,[ve[74]||(ve[74]=C("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Niveau d'accès",-1)),ve[75]||(ve[75]=C("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Sélectionnez votre niveau d'accès pour filtrer les éléments visibles sur la carte. ",-1)),C("div",null,[On(C("select",{"onUpdate:modelValue":ve[25]||(ve[25]=qe=>j.value=qe),onChange:ve[26]||(ve[26]=qe=>$(j.value)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm"},ve[72]||(ve[72]=[C("option",{value:"company"},"Entreprise (accès à tout)",-1),C("option",{value:"employee"},"Salariés (accès niveau salariés et visiteurs)",-1),C("option",{value:"visitor"},"Visiteurs (accès niveau visiteurs uniquement)",-1)]),544),[[rs,j.value]]),ve[73]||(ve[73]=C("div",{class:"mt-2 text-xs text-gray-500"},[C("p",null,[C("strong",null,"Entreprise"),ui(" : Vous verrez tous les éléments (entreprise, salariés, visiteurs)")]),C("p",null,[C("strong",null,"Salariés"),ui(" : Vous verrez les éléments pour salariés et visiteurs")]),C("p",null,[C("strong",null,"Visiteurs"),ui(" : Vous ne verrez que les éléments pour visiteurs")])],-1))])]),C("div",C$,[ve[84]||(ve[84]=C("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Catégories",-1)),C("div",E$,[C("label",P$,[On(C("input",{type:"checkbox","onUpdate:modelValue":ve[27]||(ve[27]=qe=>z.categories.forages=qe),onChange:he,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ml,z.categories.forages]]),ve[76]||(ve[76]=C("span",{class:"ml-2 text-sm text-gray-700"},"Forages",-1))]),C("label",M$,[On(C("input",{type:"checkbox","onUpdate:modelValue":ve[28]||(ve[28]=qe=>z.categories.clients=qe),onChange:he,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ml,z.categories.clients]]),ve[77]||(ve[77]=C("span",{class:"ml-2 text-sm text-gray-700"},"Clients",-1))]),C("label",k$,[On(C("input",{type:"checkbox","onUpdate:modelValue":ve[29]||(ve[29]=qe=>z.categories.entrepots=qe),onChange:he,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ml,z.categories.entrepots]]),ve[78]||(ve[78]=C("span",{class:"ml-2 text-sm text-gray-700"},"Entrepôts",-1))]),C("label",A$,[On(C("input",{type:"checkbox","onUpdate:modelValue":ve[30]||(ve[30]=qe=>z.categories.livraisons=qe),onChange:he,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ml,z.categories.livraisons]]),ve[79]||(ve[79]=C("span",{class:"ml-2 text-sm text-gray-700"},"Lieux de livraison",-1))]),C("label",T$,[On(C("input",{type:"checkbox","onUpdate:modelValue":ve[31]||(ve[31]=qe=>z.categories.cultures=qe),onChange:he,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ml,z.categories.cultures]]),ve[80]||(ve[80]=C("span",{class:"ml-2 text-sm text-gray-700"},"Cultures",-1))]),C("label",D$,[On(C("input",{type:"checkbox","onUpdate:modelValue":ve[32]||(ve[32]=qe=>z.categories.parcelles=qe),onChange:he,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ml,z.categories.parcelles]]),ve[81]||(ve[81]=C("span",{class:"ml-2 text-sm text-gray-700"},"Noms des parcelles",-1))]),(Ie(!0),je(Mn,null,gr(z.categories,(qe,Lt)=>(Ie(),je(Mn,{key:Lt},[p.value.includes(String(Lt))?en("",!0):(Ie(),je("label",O$,[On(C("input",{type:"checkbox","onUpdate:modelValue":Gt=>z.categories[Lt]=Gt,onChange:he,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,40,N$),[[Ml,z.categories[Lt]]]),C("span",I$,Ot(Lt),1)]))],64))),128)),s.value||o.value?(Ie(),je("div",B$,[C("div",R$,[On(C("input",{type:"text","onUpdate:modelValue":ve[33]||(ve[33]=qe=>c.name=qe),placeholder:"Nouveau filtre...",class:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-primary-500 focus:border-primary-500"},null,512),[[Fr,c.name]]),C("button",{onClick:ee,disabled:!c.name||d.value,class:"px-2 py-1 bg-primary-600 text-white text-sm rounded hover:bg-primary-700 transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"},[d.value?(Ie(),je("svg",z$,ve[83]||(ve[83]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Ie(),je("svg",j$,ve[82]||(ve[82]=[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1)])))],8,F$)])])):en("",!0)])]),C("div",$$,[ve[89]||(ve[89]=C("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Types de formes",-1)),C("div",V$,[C("label",U$,[On(C("input",{type:"checkbox","onUpdate:modelValue":ve[34]||(ve[34]=qe=>z.shapeTypes.Polygon=qe),onChange:he,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ml,z.shapeTypes.Polygon]]),ve[85]||(ve[85]=C("span",{class:"ml-2 text-sm text-gray-700"},"Polygones",-1))]),C("label",H$,[On(C("input",{type:"checkbox","onUpdate:modelValue":ve[35]||(ve[35]=qe=>z.shapeTypes.Line=qe),onChange:he,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ml,z.shapeTypes.Line]]),ve[86]||(ve[86]=C("span",{class:"ml-2 text-sm text-gray-700"},"Lignes",-1))]),C("label",W$,[On(C("input",{type:"checkbox","onUpdate:modelValue":ve[36]||(ve[36]=qe=>z.shapeTypes.ElevationLine=qe),onChange:he,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ml,z.shapeTypes.ElevationLine]]),ve[87]||(ve[87]=C("span",{class:"ml-2 text-sm text-gray-700"},"Profils altimétriques",-1))]),C("label",G$,[On(C("input",{type:"checkbox","onUpdate:modelValue":ve[37]||(ve[37]=qe=>z.shapeTypes.Note=qe),onChange:he,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ml,z.shapeTypes.Note]]),ve[88]||(ve[88]=C("span",{class:"ml-2 text-sm text-gray-700"},"Notes",-1))])])]),C("div",{class:"pt-4 mb-4"},[C("button",{onClick:de,class:"w-full px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200 transition-colors"}," Réinitialiser ")])])])):en("",!0)])]),t.selectedShape&&re.value&&re.value.type==="ElevationLine"?(Ie(),je("div",q$,[C("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:ve[38]||(ve[38]=qe=>Q("samplePoints"))},[ve[91]||(ve[91]=C("span",null,"Points d'échantillonnage",-1)),(Ie(),je("svg",{class:Ti(["w-4 h-4",{"rotate-180":!E.value.samplePoints}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ve[90]||(ve[90]=[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),On(C("div",Y$,[C("div",K$,[ve[96]||(ve[96]=C("h4",{class:"text-sm font-semibold mb-2"},"Points normaux",-1)),C("div",Z$,[C("div",null,[ve[92]||(ve[92]=C("label",{class:"text-xs text-gray-600"},"Taille",-1)),On(C("input",{type:"number","onUpdate:modelValue":ve[39]||(ve[39]=qe=>F.value.radius=qe),min:"2",max:"10",step:"1",class:"w-full px-2 py-1 border rounded",onChange:Z},null,544),[[Fr,F.value.radius]])]),C("div",null,[ve[93]||(ve[93]=C("label",{class:"text-xs text-gray-600"},"Couleur",-1)),On(C("input",{type:"color","onUpdate:modelValue":ve[40]||(ve[40]=qe=>F.value.color=qe),class:"w-full h-8 px-1 border rounded",onChange:Z},null,544),[[Fr,F.value.color]])]),C("div",null,[ve[94]||(ve[94]=C("label",{class:"text-xs text-gray-600"},"Opacité",-1)),On(C("input",{type:"range","onUpdate:modelValue":ve[41]||(ve[41]=qe=>F.value.fillOpacity=qe),min:"0",max:"1",step:"0.1",class:"w-full",onChange:Z},null,544),[[Fr,F.value.fillOpacity]])]),C("div",null,[ve[95]||(ve[95]=C("label",{class:"text-xs text-gray-600"},"Bordure",-1)),On(C("input",{type:"number","onUpdate:modelValue":ve[42]||(ve[42]=qe=>F.value.weight=qe),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:Z},null,544),[[Fr,F.value.weight]])])])]),C("div",null,[ve[100]||(ve[100]=C("h4",{class:"text-sm font-semibold mb-2"},"Points min/max",-1)),C("div",X$,[C("div",null,[ve[97]||(ve[97]=C("label",{class:"text-xs text-gray-600"},"Taille",-1)),On(C("input",{type:"number","onUpdate:modelValue":ve[43]||(ve[43]=qe=>K.value.radius=qe),min:"4",max:"12",step:"1",class:"w-full px-2 py-1 border rounded",onChange:me},null,544),[[Fr,K.value.radius]])]),C("div",null,[ve[98]||(ve[98]=C("label",{class:"text-xs text-gray-600"},"Bordure",-1)),On(C("input",{type:"number","onUpdate:modelValue":ve[44]||(ve[44]=qe=>K.value.weight=qe),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:me},null,544),[[Fr,K.value.weight]])]),C("div",null,[ve[99]||(ve[99]=C("label",{class:"text-xs text-gray-600"},"Opacité",-1)),On(C("input",{type:"range","onUpdate:modelValue":ve[45]||(ve[45]=qe=>K.value.fillOpacity=qe),min:"0",max:"1",step:"0.1",class:"w-full",onChange:me},null,544),[[Fr,K.value.fillOpacity]])])])])],512),[[Ay,!E.value.samplePoints]])])):en("",!0)],2)}}}),Q$=jh(J$,[["__scopeId","data-v-27145f9b"]]),eV={class:"map-toolbar w-full"},tV={class:"hidden md:flex items-center space-x-2"},nV={class:"dropdown"},rV={class:"dropdown-menu"},iV=["onClick"],sV={key:0,class:"border-l pl-2 flex-1"},oV={class:"flex items-center"},aV={class:"plan-info"},lV={class:"plan-name"},uV={key:0,class:"plan-description"},cV={class:"border-l pl-2 ml-auto"},hV={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},dV={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},fV={key:"saving"},pV={key:"success",class:"save-success-text"},gV={key:"default"},mV={class:"md:hidden"},vV={class:"flex justify-between items-center"},yV={key:0,class:"truncate mx-2 text-sm font-medium"},bV={key:0,class:"mobile-menu mt-0 bg-white shadow-lg p-4 z-[1900] fixed left-0 right-0 w-full"},_V={class:"flex justify-between items-center mb-3 border-b pb-2"},wV={class:"flex flex-col space-y-4"},xV={key:0,class:"flex flex-col pb-3 border-b"},LV={class:"text-sm font-semibold text-gray-800"},SV={key:0,class:"text-xs text-gray-600 mt-1"},CV={class:"flex flex-col"},EV={class:"grid grid-cols-3 gap-2"},PV=["onClick"],MV={key:0,class:"animate-spin h-4 w-4 mr-2 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},kV={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},AV={key:"saving"},TV={key:"success",class:"save-success-text"},DV={key:"default"},OV=js({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view","generate-summary"],setup(t,{emit:e}){const n=e,r=t,i=Ct("Hybride"),s=Ct(!1),o=k=>{const A=k.currentTarget,D=A.nextElementSibling;if(D&&D.classList.contains("dropdown-menu")){const V=A.getBoundingClientRect();D.style.top=`${V.bottom}px`,D.style.left=`${V.left}px`}},a={Hybride:"Hybride",Cadastre:"Cadastre",IGN:"IGN"},l=Jn(()=>r.lastSave?new Date(r.lastSave).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),c=k=>{i.value=k,n("change-map-type",k),E()},d=()=>{n("create-new-plan"),E()},p=()=>{n("load-plan"),E()},v=()=>{n("save-plan"),E()},m=()=>{n("adjust-view"),E()},x=()=>{n("generate-summary"),E()},E=()=>{s.value=!1};return(k,A)=>(Ie(),je("div",eV,[C("div",tV,[C("div",nV,[C("button",{class:"btn-toolbar dropdown-toggle",onMouseover:o},[A[2]||(A[2]=C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),C("span",null,Ot(a[i.value]),1)],32),C("div",rV,[(Ie(),je(Mn,null,gr(a,(D,V)=>C("button",{key:V,class:Ti(["dropdown-item",{active:V===i.value}]),onClick:Y=>c(V)},Ot(D),11,iV)),64))])]),k.planName?(Ie(),je("div",sV,[C("div",oV,[C("div",aV,[C("h2",lV,Ot(k.planName),1),k.planDescription?(Ie(),je("p",uV,Ot(k.planDescription),1)):en("",!0)])])])):en("",!0),C("div",{class:"border-l pl-2"},[C("div",{class:"flex items-center space-x-1"},[C("button",{onClick:d,class:"btn-toolbar",title:"Nouveau plan"},A[3]||(A[3]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),C("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),C("button",{onClick:p,class:"btn-toolbar",title:"Charger un plan"},A[4]||(A[4]=[eu('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-b4cc3353><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-b4cc3353></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-b4cc3353></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-b4cc3353></path></svg><span class="hidden lg:inline ml-1" data-v-b4cc3353>Charger</span>',2)])),C("button",{onClick:v,class:"btn-toolbar",title:"Enregistrer le plan"},A[5]||(A[5]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),C("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),C("div",{class:"border-l pl-2"},[C("div",{class:"flex items-center space-x-1"},[C("button",{onClick:m,class:"btn-toolbar",title:"Ajuster la vue"},A[6]||(A[6]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),C("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)])),C("button",{onClick:x,class:"btn-toolbar",title:"Générer une synthèse"},A[7]||(A[7]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),C("span",{class:"hidden lg:inline ml-1"},"Synthèse",-1)]))])]),C("div",cV,[C("div",{class:Ti(["text-xs hidden lg:flex items-center",{"text-gray-500":!k.saveStatus,"text-primary-600 font-medium":k.saveStatus==="success","text-blue-600 font-medium":k.saveStatus==="saving"}])},[k.saveStatus==="saving"?(Ie(),je("svg",hV,A[8]||(A[8]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):en("",!0),k.saveStatus==="success"?(Ie(),je("svg",dV,A[9]||(A[9]=[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):en("",!0),yi(Q2,{name:"fade-slide",mode:"out-in"},{default:Gu(()=>[k.saveStatus==="saving"?(Ie(),je("span",fV," Sauvegarde en cours... ")):k.saveStatus==="success"?(Ie(),je("span",pV," Sauvegarde réussie ! ")):(Ie(),je("span",gV," Dernière modification : "+Ot(l.value),1))]),_:1})],2)])]),C("div",mV,[C("div",vV,[C("button",{onClick:A[0]||(A[0]=D=>s.value=!s.value),class:"p-2 rounded-md border bg-white shadow-sm"},A[10]||(A[10]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})],-1)])),k.planName?(Ie(),je("div",yV,Ot(k.planName),1)):en("",!0),C("div",{class:"flex space-x-2"},[C("button",{onClick:d,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},A[11]||(A[11]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),C("button",{onClick:v,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},A[12]||(A[12]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),C("button",{onClick:m,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},A[13]||(A[13]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),s.value?(Ie(),je("div",bV,[C("div",_V,[A[15]||(A[15]=C("h3",{class:"text-base font-semibold text-gray-800"},"Menu",-1)),C("button",{onClick:A[1]||(A[1]=D=>s.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},A[14]||(A[14]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",wV,[k.planName?(Ie(),je("div",xV,[C("h3",LV,Ot(k.planName),1),k.planDescription?(Ie(),je("p",SV,Ot(k.planDescription),1)):en("",!0)])):en("",!0),C("div",CV,[A[16]||(A[16]=C("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Type de carte",-1)),C("div",EV,[(Ie(),je(Mn,null,gr(a,(D,V)=>C("button",{key:V,class:Ti(["px-3 py-2 text-sm rounded-md border shadow-sm",{"bg-blue-50 border-blue-300 text-blue-700 font-medium":V===i.value}]),onClick:Y=>c(V)},Ot(D),11,PV)),64))])]),C("div",{class:"flex flex-col"},[A[20]||(A[20]=C("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Outils de plan",-1)),C("div",{class:"grid grid-cols-3 gap-2"},[C("button",{onClick:d,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},A[17]||(A[17]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),ui(" Nouveau ")])),C("button",{onClick:p,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},A[18]||(A[18]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),C("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),C("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),ui(" Charger ")])),C("button",{onClick:x,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},A[19]||(A[19]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),ui(" Synthèse ")]))])]),C("div",{class:Ti(["text-sm text-center pt-3 border-t flex items-center justify-center space-x-1 mt-2",{"text-gray-500":!k.saveStatus,"text-primary-600 font-medium":k.saveStatus==="success","text-blue-600 font-medium":k.saveStatus==="saving"}])},[k.saveStatus==="saving"?(Ie(),je("svg",MV,A[21]||(A[21]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):en("",!0),k.saveStatus==="success"?(Ie(),je("svg",kV,A[22]||(A[22]=[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):en("",!0),yi(Q2,{name:"fade-slide",mode:"out-in"},{default:Gu(()=>[k.saveStatus==="saving"?(Ie(),je("span",AV," Sauvegarde en cours... ")):k.saveStatus==="success"?(Ie(),je("span",TV," Sauvegarde réussie ! ")):(Ie(),je("span",DV," Dernière modification : "+Ot(l.value),1))]),_:1})],2)])])):en("",!0)])]))}}),NV=jh(OV,[["__scopeId","data-v-b4cc3353"]]),IV={class:"comment-thread"},BV={key:0,class:"space-y-3 mb-4"},RV={class:"flex justify-between items-start"},FV={class:"flex items-center"},jV={class:"font-medium text-sm text-gray-900"},zV={class:"flex items-center"},$V={class:"text-xs text-gray-500"},VV=["onClick"],UV={class:"mt-1 text-sm text-gray-700 whitespace-pre-wrap"},HV={key:1,class:"text-center text-sm text-gray-500 italic my-4"},WV={key:2,class:"mt-3"},GV={class:"flex justify-end mt-2"},qV=["disabled"],YV={key:3,class:"text-center text-sm text-gray-500 italic mt-2"},KV=js({__name:"CommentThread",props:{noteId:{},comments:{}},emits:["update:comments","comment-added","comment-deleted"],setup(t,{emit:e}){const n=t;console.log("[CommentThread] Commentaires reçus initialement:",n.comments),Di(()=>n.comments,E=>{console.log("[CommentThread] Commentaires mis à jour:",E)},{deep:!0});const r=e,i=pa(),s=wf(),o=ru(),a=Ct(""),l=Jn(()=>i.isEntreprise||i.isAdmin);function c(E){return i.user&&E.userId===i.user.id||i.isAdmin}async function d(){var E;if(a.value.trim())try{await s.addComment(n.noteId,a.value.trim()),a.value="",o.success("Commentaire ajouté avec succès"),r("comment-added")}catch(k){if(console.error("Erreur lors de l'ajout du commentaire:",k),(E=k.response)!=null&&E.data){const A=k.response.data;A.note?o.error(`Erreur: ${A.note[0]}`):A.user?o.error(`Erreur: ${A.user[0]}`):A.text?o.error(`Erreur: ${A.text[0]}`):o.error("Erreur lors de l'ajout du commentaire")}else o.error("Erreur lors de l'ajout du commentaire")}}async function p(E){var k;if(confirm("Voulez-vous vraiment supprimer ce commentaire ?"))try{await s.removeComment(n.noteId,E),o.success("Commentaire supprimé"),r("comment-deleted")}catch(A){if(console.error("Erreur lors de la suppression du commentaire:",A),(k=A.response)!=null&&k.data){const D=A.response.data;D.detail?o.error(`Erreur: ${D.detail}`):o.error("Erreur lors de la suppression du commentaire")}else o.error("Erreur lors de la suppression du commentaire")}}function v(E){try{if(!E)return"Date inconnue";const k=new Date(E);return isNaN(k.getTime())?(console.warn(`Date invalide: ${E}`),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(k)}catch(k){return console.error(`Erreur lors du formatage de la date: ${E}`,k),"Date invalide"}}function m(E){switch(E){case"admin":return"bg-purple-100 text-purple-800";case"entreprise":return"bg-blue-100 text-blue-800";case"salarie":return"bg-green-100 text-green-800";case"visiteur":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function x(E){switch(E){case"admin":return"Admin";case"entreprise":return"Entreprise";case"salarie":return"Salarié";case"visiteur":return"Visiteur";default:return E}}return(E,k)=>(Ie(),je("div",IV,[E.comments&&E.comments.length>0?(Ie(),je("div",BV,[(Ie(!0),je(Mn,null,gr(E.comments,A=>(Ie(),je("div",{key:A.id,class:"bg-gray-50 rounded-lg p-3"},[C("div",RV,[C("div",FV,[C("div",jV,Ot(A.userName),1),C("span",{class:Ti(["ml-2 text-xs px-2 py-0.5 rounded-full",m(A.userRole)])},Ot(x(A.userRole)),3)]),C("div",zV,[C("span",$V,Ot(v(A.createdAt)),1),c(A)?(Ie(),je("button",{key:0,onClick:Bh(D=>p(A.id),["prevent"]),class:"ml-2 text-gray-400 hover:text-red-500"},k[1]||(k[1]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,VV)):en("",!0)])]),C("p",UV,Ot(A.text),1)]))),128))])):(Ie(),je("div",HV," Aucun commentaire pour le moment ")),l.value?(Ie(),je("div",WV,[On(C("textarea",{"onUpdate:modelValue":k[0]||(k[0]=A=>a.value=A),placeholder:"Ajouter un commentaire...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"2"},null,512),[[Fr,a.value]]),C("div",GV,[C("button",{type:"button",onClick:Bh(d,["prevent"]),disabled:!a.value.trim(),class:"px-3 py-1 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"}," Ajouter ",8,qV)])])):(Ie(),je("div",YV," Seuls les utilisateurs de l'entreprise peuvent ajouter des commentaires "))]))}}),ZV={class:"photo-gallery"},XV={key:0,class:"grid grid-cols-2 gap-2 mb-4"},JV=["src","onClick"],QV={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center"},eU={class:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2"},tU=["onClick"],nU={key:1,class:"text-center text-sm text-gray-500 italic my-4"},rU={class:"flex space-x-2 mt-3"},iU={key:2,class:"mt-4 border border-gray-300 rounded-lg overflow-hidden bg-white"},sU={class:"relative bg-gray-900",style:{height:"300px"}},oU=["src"],aU={class:"p-3 bg-gray-50 border-t border-gray-300 flex justify-center"},lU={key:1,class:"flex space-x-3"},uU={key:3,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},cU={class:"relative max-w-3xl max-h-[90vh] bg-white rounded-lg overflow-hidden"},hU=["src"],dU=js({__name:"PhotoGallery",props:{noteId:{},photos:{}},emits:["update:photos","photo-added","photo-deleted"],setup(t,{emit:e}){const n=t,r=e,i=wf(),s=ru(),o=Ct(null),a=Ct(null),l=Ct(null);let c=null;const d=Ct(!1),p=Ct(!1),v=Ct(null),m=Ct(null);function x(fe){v.value=fe,d.value=!0}async function E(fe){var I;if(confirm("Êtes-vous sûr de vouloir supprimer cette photo ?"))try{await i.removePhoto(n.noteId,fe),s.success("Photo supprimée"),r("photo-deleted"),d.value&&((I=v.value)==null?void 0:I.id)===fe&&(d.value=!1,v.value=null)}catch(F){console.error("Erreur lors de la suppression de la photo:",F),s.error("Erreur lors de la suppression de la photo")}}function k(){l.value&&l.value.click()}async function A(fe){const I=fe.target;if(!I.files||I.files.length===0)return;const F=I.files[0];if(!F.type.startsWith("image/")){s.error("Le fichier doit être une image");return}if(F.size>5*1024*1024){s.error("L'image est trop volumineuse (max 5MB)");return}try{const K=await D(F);await i.addPhoto(n.noteId,{url:K}),I.value="",s.success("Photo ajoutée"),r("photo-added")}catch(K){console.error("Erreur lors de l'ajout de la photo:",K),s.error("Erreur lors de l'ajout de la photo")}}function D(fe){return new Promise((I,F)=>{const K=new FileReader;K.onload=()=>I(K.result),K.onerror=F,K.readAsDataURL(fe)})}Di(p,async fe=>{if(fe){m.value=null;try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("API de caméra non supportée sur ce navigateur");const I={video:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}};c=await navigator.mediaDevices.getUserMedia(I),o.value&&(o.value.srcObject=c,await new Promise(F=>{o.value.onloadedmetadata=()=>{o.value.play().then(F)}}))}catch(I){console.error("Erreur lors de l'accès à la caméra:",I);let F="Impossible d'accéder à la caméra";I.name==="NotAllowedError"?F="L'accès à la caméra a été refusé. Veuillez vérifier vos permissions.":I.name==="NotFoundError"?F="Aucune caméra n'a été trouvée sur votre appareil.":I.name==="NotSupportedError"&&(F="Votre navigateur ne supporte pas l'accès à la caméra."),s.error(F),p.value=!1}}else c&&(c.getTracks().forEach(I=>I.stop()),c=null)});function V(){if(!o.value||!a.value)return;const fe=o.value,I=a.value;I.width=fe.videoWidth,I.height=fe.videoHeight;const F=I.getContext("2d");F&&(F.drawImage(fe,0,0,I.width,I.height),m.value=I.toDataURL("image/jpeg"))}function Y(){m.value=null}async function te(){if(m.value)try{await i.addPhoto(n.noteId,{url:m.value}),p.value=!1,s.success("Photo ajoutée"),r("photo-added")}catch(fe){console.error("Erreur lors de l'ajout de la photo:",fe),s.error("Erreur lors de l'ajout de la photo")}}function ge(){p.value=!1}return Zu(()=>{c&&(c.getTracks().forEach(fe=>fe.stop()),c=null)}),(fe,I)=>(Ie(),je("div",ZV,[fe.photos&&fe.photos.length>0?(Ie(),je("div",XV,[(Ie(!0),je(Mn,null,gr(fe.photos,F=>(Ie(),je("div",{key:F.id,class:"relative group"},[C("img",{src:F.url,alt:"Photo",class:"w-full h-32 object-cover rounded-lg cursor-pointer",onClick:K=>x(F)},null,8,JV),C("div",QV,[C("div",eU,[C("button",{onClick:Bh(K=>E(F.id),["stop","prevent"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-red-600",title:"Supprimer la photo"},I[2]||(I[2]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,tU)])])]))),128))])):(Ie(),je("div",nU," Aucune photo pour le moment ")),C("div",rU,[C("button",{type:"button",onClick:I[0]||(I[0]=F=>p.value=!0),class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},I[3]||(I[3]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),ui(" Prendre une photo ")])),C("button",{type:"button",onClick:k,class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer"},I[4]||(I[4]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})],-1),ui(" Téléverser ")])),C("input",{id:"photo-upload",ref_key:"fileInput",ref:l,type:"file",accept:"image/*",class:"hidden",onChange:A},null,544)]),p.value?(Ie(),je("div",iU,[C("div",{class:"p-3 bg-gray-50 border-b border-gray-300 flex justify-between items-center"},[I[6]||(I[6]=C("h3",{class:"text-sm font-medium text-gray-700"},"Mode caméra",-1)),C("button",{type:"button",onClick:ge,class:"text-gray-400 hover:text-gray-500"},I[5]||(I[5]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",sU,[m.value?(Ie(),je("img",{key:1,src:m.value,class:"w-full h-full object-contain",alt:"Captured"},null,8,oU)):(Ie(),je("video",{key:0,ref_key:"videoElement",ref:o,autoplay:"",class:"w-full h-full object-contain"},null,512)),C("canvas",{ref_key:"canvasElement",ref:a,class:"hidden"},null,512)]),C("div",aU,[m.value?(Ie(),je("div",lU,[C("button",{type:"button",onClick:Y,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Reprendre "),C("button",{type:"button",onClick:te,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Utiliser ")])):(Ie(),je("button",{key:0,type:"button",onClick:V,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-full w-12 h-12 flex items-center justify-center hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},I[7]||(I[7]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})],-1)])))])])):en("",!0),d.value?(Ie(),je("div",uU,[C("div",cU,[C("button",{type:"button",onClick:I[1]||(I[1]=F=>d.value=!1),class:"absolute top-2 right-2 z-10 p-1 bg-white rounded-full text-gray-700 hover:text-red-600 shadow-md"},I[8]||(I[8]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),v.value?(Ie(),je("img",{key:0,src:v.value.url,alt:"Photo",class:"max-h-[80vh] max-w-full object-contain"},null,8,hU)):en("",!0)])])):en("",!0)]))}}),fU=jh(dU,[["__scopeId","data-v-f87156b4"]]),pU={class:"fixed z-[9999] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},gU={class:"flex items-center justify-center min-h-screen w-full"},mU={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-2xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},vU={class:"p-4 md:p-6 flex-1 overflow-y-auto"},yU={class:"flex justify-between items-center mb-4 border-b pb-4"},bU={class:"text-xl font-semibold text-gray-900"},_U={class:"mb-4 border-b border-gray-200"},wU={class:"flex space-x-4","aria-label":"Tabs"},xU={key:0,class:"ml-1 px-2 py-0.5 text-xs rounded-full bg-primary-100 text-primary-800"},LU={key:0,class:"ml-1 px-2 py-0.5 text-xs rounded-full bg-primary-100 text-primary-800"},SU={key:0},CU={class:"mb-4"},EU={class:"mb-4"},PU={key:0,class:"mb-4 p-2 rounded bg-gray-50 flex items-center"},MU={class:"mb-4"},kU=["value"],AU={class:"mb-4"},TU=["value"],DU={class:"mb-4"},OU={class:"mt-1 flex space-x-2"},NU=["onClick"],IU={key:1,class:"mt-4"},BU={class:"hidden"},RU={key:2,class:"mt-4"},RE=js({__name:"NoteEditModal",props:{note:{},isNewNote:{type:Boolean},location:{}},emits:["close","save"],setup(t,{emit:e}){const n=t,r=e,i=wf(),s=ru(),o=Ct("info"),a=window.console;Di(o,async K=>{a.log("[NoteEditModal] Onglet actif changé:",K),K==="comments"&&n.note&&n.note.id&&(a.log("[NoteEditModal] Onglet Commentaires sélectionné, commentaires actuels:",l.value.comments),await p(n.note.id)),K==="photos"&&n.note&&n.note.id&&(a.log("[NoteEditModal] Onglet Photos sélectionné, photos actuelles:",l.value.photos),await v(n.note.id))});const l=Ct({title:"",description:"",columnId:"",accessLevel:Yi.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[]});function c(K){return Array.isArray(K)?K:typeof K=="object"&&"type"in K&&"coordinates"in K?[K.coordinates[1],K.coordinates[0]]:(a.error("[NoteEditModal] Format de localisation non reconnu:",K),[0,0])}function d(K){if(!K)return new Date().toISOString();try{const B=new Date(K);return isNaN(B.getTime())?(a.warn("[NoteEditModal] Date invalide:",K),new Date().toISOString()):B.toISOString()}catch(B){return a.error("[NoteEditModal] Erreur lors de la création de la date:",B),new Date().toISOString()}}async function p(K){try{a.log(`[NoteEditModal] Chargement des commentaires pour la note ${K}`);const B=await Sa.getComments(K);a.log("[NoteEditModal] Commentaires reçus:",B.data);const N=B.data.map(j=>({id:j.id,text:j.text,createdAt:j.created_at,userId:j.user,userName:j.user_name,userRole:j.user_role}));return a.log("[NoteEditModal] Commentaires transformés:",N),n.note&&(i.updateNote(n.note.id,{comments:N}),l.value.comments=N,a.log("[NoteEditModal] Commentaires mis à jour dans le store et localement"),a.log("[NoteEditModal] editingNote.comments après mise à jour:",l.value.comments)),N}catch(B){return a.error("[NoteEditModal] Erreur lors du chargement des commentaires:",B),s.error("Erreur lors du chargement des commentaires"),[]}}async function v(K){try{a.log(`[NoteEditModal] Chargement des photos pour la note ${K}`);const B=await Sa.getPhotos(K);a.log("[NoteEditModal] Photos reçues:",B.data);const N=B.data.map(j=>({id:j.id,url:j.image,createdAt:j.created_at,caption:j.caption}));return n.note&&(i.updateNote(n.note.id,{photos:N}),l.value.photos=N,a.log("[NoteEditModal] Photos mises à jour dans le store et localement")),N}catch(B){return a.error("[NoteEditModal] Erreur lors du chargement des photos:",B),s.error("Erreur lors du chargement des photos"),[]}}go(async()=>{var K,B;if(a.log("[NoteEditModal] onMounted - props:",n),await i.loadColumns(),a.log("[NoteEditModal] Colonnes chargées:",i.columns),n.note){a.log("[NoteEditModal] Édition d'une note existante:",n.note);const N=JSON.parse(JSON.stringify(n.note));N.createdAt=d(N.createdAt),N.updatedAt=d(N.updatedAt),l.value=N,n.note.id&&(a.log("[NoteEditModal] Chargement des commentaires et photos..."),await Promise.all([p(n.note.id),v(n.note.id)]),a.log("[NoteEditModal] Après chargement - Commentaires:",((K=l.value.comments)==null?void 0:K.length)||0),a.log("[NoteEditModal] Après chargement - Photos:",((B=l.value.photos)==null?void 0:B.length)||0),setTimeout(()=>{a.log("[NoteEditModal] Compteurs après timeout - Commentaires:",x.value),a.log("[NoteEditModal] Compteurs après timeout - Photos:",E.value)},0))}else if(n.isNewNote){if(a.log("[NoteEditModal] Création d'une nouvelle note"),l.value={title:"Nouvelle note",description:"",columnId:i.getDefaultColumn.id||"1",accessLevel:Yi.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},n.location){a.log("[NoteEditModal] Ajout de la localisation:",n.location);const N=c(n.location);l.value.location=N}a.log("[NoteEditModal] Niveau d'accès initial:",l.value.accessLevel)}else a.error("[NoteEditModal] Erreur: Ni note existante ni nouvelle note");a.log("[NoteEditModal] editingNote.value après initialisation:",l.value)});const m=Jn(()=>i.getSortedColumns),x=Jn(()=>{var B;const K=((B=l.value.comments)==null?void 0:B.length)||0;return a.log("[NoteEditModal] Computed commentsCount recalculé:",K),K}),E=Jn(()=>{var B;const K=((B=l.value.photos)==null?void 0:B.length)||0;return a.log("[NoteEditModal] Computed photosCount recalculé:",K),K}),k=[{id:Yi.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:Yi.COMPANY,title:"Entreprise",description:"Visible par l'entreprise uniquement"},{id:Yi.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et les salariés"},{id:Yi.VISITOR,title:"Visiteurs",description:"Visible par tous"}],A=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"],D=K=>{l.value.style?(l.value.style.color=K,l.value.style.fillColor=K):l.value.style={color:K,weight:2,opacity:1,fillColor:K,fillOpacity:.6,radius:8},l.value.color=K},V=()=>{var K,B,N,j,z,U,$,re,Q,_e,we;l.value={title:((K=n.note)==null?void 0:K.title)||"",description:((B=n.note)==null?void 0:B.description)||"",columnId:((N=n.note)==null?void 0:N.columnId)||"",accessLevel:((j=n.note)==null?void 0:j.accessLevel)||"private",style:((z=n.note)==null?void 0:z.style)||{color:((U=n.note)==null?void 0:U.color)||"#3B82F6",weight:2,opacity:1,fillColor:(($=n.note)==null?void 0:$.color)||"#3B82F6",fillOpacity:.6,radius:8},color:((re=n.note)==null?void 0:re.color)||"#3B82F6",location:n.location||((Q=n.note)==null?void 0:Q.location)||null,comments:((_e=n.note)==null?void 0:_e.comments)||[],photos:((we=n.note)==null?void 0:we.photos)||[]}};go(()=>{V()}),Di(()=>n.note,()=>{V()},{deep:!0});function Y(){r("close")}async function te(){a.log("[NoteEditModal] Commentaire ajouté, le modal reste ouvert"),n.note&&n.note.id&&await p(n.note.id)}async function ge(){a.log("[NoteEditModal] Photo ajoutée, le modal reste ouvert"),n.note&&n.note.id&&await v(n.note.id)}async function fe(){a.log("[NoteEditModal] Commentaire supprimé, mise à jour de la liste"),n.note&&n.note.id&&await p(n.note.id)}async function I(){a.log("[NoteEditModal] Photo supprimée, mise à jour de la liste"),n.note&&n.note.id&&await v(n.note.id)}async function F(){var K;try{const B={title:l.value.title,description:l.value.description,columnId:l.value.columnId,style:l.value.style,access_level:l.value.accessLevel,comments:l.value.comments||[],photos:l.value.photos||[]};l.value.location&&(B.location=Array.isArray(l.value.location)?{type:"Point",coordinates:[l.value.location[1],l.value.location[0]]}:l.value.location),a.log("[NoteEditModal] Données de note à sauvegarder:",B);let N;if((K=n.note)!=null&&K.id){N=(await Sa.updateNote(n.note.id,B)).data,i.updateNote(n.note.id,{...l.value,...N,accessLevel:l.value.accessLevel,style:l.value.style,updatedAt:new Date().toISOString()});const z=n.note.id,U=new CustomEvent("geonote:update",{detail:{noteId:z,properties:{name:l.value.title,description:l.value.description,columnId:l.value.columnId,accessLevel:l.value.accessLevel,style:l.value.style}}});window.dispatchEvent(U),setTimeout(()=>{window.dispatchEvent(U),a.log("[NoteEditModal] Événement de mise à jour ré-émis pour garantir la mise à jour du popup")},100),s.success("Note mise à jour avec succès")}else{if(N=(await Sa.createNote(B)).data,!N.id)throw new Error("Le backend n'a pas fourni d'ID pour la nouvelle note");const z=i.getDefaultColumn,U={...B,id:N.id,columnId:B.columnId||z.id,accessLevel:l.value.accessLevel,style:B.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.2}};a.log("[NoteEditModal] Note à ajouter au store avec ID backend:",N.id),i.addNote(U),s.success("Note créée avec succès")}N&&(!N.comments&&l.value.comments&&(N.comments=l.value.comments),!N.photos&&l.value.photos&&(N.photos=l.value.photos)),r("save",N),r("close")}catch(B){a.error("[NoteEditModal] Erreur lors de la sauvegarde de la note:",B),s.error("Erreur lors de la sauvegarde de la note")}}return(K,B)=>{var N;return Ie(),je("div",pU,[C("div",gU,[B[17]||(B[17]=C("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),C("div",mU,[C("form",{onSubmit:Bh(F,["prevent"]),class:"h-full md:h-auto flex flex-col"},[C("div",vU,[C("div",yU,[C("h3",bU,Ot((N=K.note)!=null&&N.id?"Modifier la note":"Nouvelle note"),1),C("button",{type:"button",onClick:Y,class:"text-gray-400 hover:text-gray-500"},B[7]||(B[7]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",_U,[C("nav",wU,[C("button",{type:"button",onClick:B[0]||(B[0]=j=>o.value="info"),class:Ti(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="info"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Informations ",2),C("button",{type:"button",onClick:B[1]||(B[1]=j=>o.value="comments"),class:Ti(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="comments"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[B[8]||(B[8]=ui(" Commentaires ")),x.value>0?(Ie(),je("span",xU,Ot(x.value),1)):en("",!0)],2),C("button",{type:"button",onClick:B[2]||(B[2]=j=>o.value="photos"),class:Ti(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="photos"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[B[9]||(B[9]=ui(" Photos ")),E.value>0?(Ie(),je("span",LU,Ot(E.value),1)):en("",!0)],2)])]),o.value==="info"?(Ie(),je("div",SU,[C("div",CU,[B[10]||(B[10]=C("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Titre",-1)),On(C("input",{type:"text",id:"title","onUpdate:modelValue":B[3]||(B[3]=j=>l.value.title=j),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Fr,l.value.title]])]),C("div",EU,[B[11]||(B[11]=C("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),On(C("textarea",{id:"description","onUpdate:modelValue":B[4]||(B[4]=j=>l.value.description=j),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Fr,l.value.description]])]),l.value.location?(Ie(),je("div",PU,B[12]||(B[12]=[C("div",{class:"text-primary-600 mr-2"},[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})])],-1),C("div",{class:"text-sm text-gray-600"}," Note géolocalisée ",-1)]))):en("",!0),C("div",MU,[B[13]||(B[13]=C("label",{for:"column",class:"block text-sm font-medium text-gray-700"},"État",-1)),On(C("select",{id:"column","onUpdate:modelValue":B[5]||(B[5]=j=>l.value.columnId=j),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[(Ie(!0),je(Mn,null,gr(m.value,j=>(Ie(),je("option",{key:j.id,value:j.id},Ot(j.title),9,kU))),128))],512),[[rs,l.value.columnId]])]),C("div",AU,[B[14]||(B[14]=C("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accès",-1)),On(C("select",{id:"accessLevel","onUpdate:modelValue":B[6]||(B[6]=j=>l.value.accessLevel=j),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[(Ie(),je(Mn,null,gr(k,j=>C("option",{key:j.id,value:j.id},Ot(j.title)+" - "+Ot(j.description),9,TU)),64))],512),[[rs,l.value.accessLevel]])]),C("div",DU,[B[15]||(B[15]=C("label",{class:"block text-sm font-medium text-gray-700"},"Couleur",-1)),C("div",OU,[(Ie(),je(Mn,null,gr(A,j=>C("div",{key:j,class:Ti(["w-8 h-8 rounded-full cursor-pointer border-2",{"border-gray-400":l.value.style.color!==j,"border-black":l.value.style.color===j}]),style:tu({backgroundColor:j}),onClick:z=>D(j)},null,14,NU)),64))])])])):o.value==="comments"?(Ie(),je("div",IU,[C("div",BU,Ot(a.log("[NoteEditModal] Commentaires passés au composant:",l.value.comments)),1),K.note?(Ie(),Va(KV,{key:0,noteId:K.note.id,comments:l.value.comments||[],onCommentAdded:te,onCommentDeleted:fe},null,8,["noteId","comments"])):en("",!0)])):o.value==="photos"?(Ie(),je("div",RU,[K.note?(Ie(),Va(fU,{key:0,noteId:K.note.id,photos:l.value.photos||[],onPhotoAdded:ge,onPhotoDeleted:I},null,8,["noteId","photos"])):en("",!0)])):en("",!0)]),C("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[B[16]||(B[16]=C("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm"}," Enregistrer ",-1)),C("button",{onClick:Y,type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Annuler ")])],32)])])])}}});(()=>{var Bn,or;var t=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(h,g)=>()=>(g||h((g={exports:{}}).exports,g),g.exports),a=(h,g,_,S)=>{if(g&&typeof g=="object"||typeof g=="function")for(let M of r(g))!s.call(h,M)&&M!==_&&e(h,M,{get:()=>g[M],enumerable:!(S=n(g,M))||S.enumerable});return h},l=(h,g,_)=>(_=h!=null?t(i(h)):{},a(g||!h||!h.__esModule?e(_,"default",{value:h,enumerable:!0}):_,h)),c=o((h,g)=>{function _(){this.__data__=[],this.size=0}g.exports=_}),d=o((h,g)=>{function _(S,M){return S===M||S!==S&&M!==M}g.exports=_}),p=o((h,g)=>{var _=d();function S(M,W){for(var ne=M.length;ne--;)if(_(M[ne][0],W))return ne;return-1}g.exports=S}),v=o((h,g)=>{var _=p(),S=Array.prototype,M=S.splice;function W(ne){var oe=this.__data__,ye=_(oe,ne);if(ye<0)return!1;var Ee=oe.length-1;return ye==Ee?oe.pop():M.call(oe,ye,1),--this.size,!0}g.exports=W}),m=o((h,g)=>{var _=p();function S(M){var W=this.__data__,ne=_(W,M);return ne<0?void 0:W[ne][1]}g.exports=S}),x=o((h,g)=>{var _=p();function S(M){return _(this.__data__,M)>-1}g.exports=S}),E=o((h,g)=>{var _=p();function S(M,W){var ne=this.__data__,oe=_(ne,M);return oe<0?(++this.size,ne.push([M,W])):ne[oe][1]=W,this}g.exports=S}),k=o((h,g)=>{var _=c(),S=v(),M=m(),W=x(),ne=E();function oe(ye){var Ee=-1,tt=ye==null?0:ye.length;for(this.clear();++Ee<tt;){var We=ye[Ee];this.set(We[0],We[1])}}oe.prototype.clear=_,oe.prototype.delete=S,oe.prototype.get=M,oe.prototype.has=W,oe.prototype.set=ne,g.exports=oe}),A=o((h,g)=>{var _=k();function S(){this.__data__=new _,this.size=0}g.exports=S}),D=o((h,g)=>{function _(S){var M=this.__data__,W=M.delete(S);return this.size=M.size,W}g.exports=_}),V=o((h,g)=>{function _(S){return this.__data__.get(S)}g.exports=_}),Y=o((h,g)=>{function _(S){return this.__data__.has(S)}g.exports=_}),te=o((h,g)=>{var _=typeof Ca=="object"&&Ca&&Ca.Object===Object&&Ca;g.exports=_}),ge=o((h,g)=>{var _=te(),S=typeof self=="object"&&self&&self.Object===Object&&self,M=_||S||Function("return this")();g.exports=M}),fe=o((h,g)=>{var _=ge(),S=_.Symbol;g.exports=S}),I=o((h,g)=>{var _=fe(),S=Object.prototype,M=S.hasOwnProperty,W=S.toString,ne=_?_.toStringTag:void 0;function oe(ye){var Ee=M.call(ye,ne),tt=ye[ne];try{ye[ne]=void 0;var We=!0}catch{}var _t=W.call(ye);return We&&(Ee?ye[ne]=tt:delete ye[ne]),_t}g.exports=oe}),F=o((h,g)=>{var _=Object.prototype,S=_.toString;function M(W){return S.call(W)}g.exports=M}),K=o((h,g)=>{var _=fe(),S=I(),M=F(),W="[object Null]",ne="[object Undefined]",oe=_?_.toStringTag:void 0;function ye(Ee){return Ee==null?Ee===void 0?ne:W:oe&&oe in Object(Ee)?S(Ee):M(Ee)}g.exports=ye}),B=o((h,g)=>{function _(S){var M=typeof S;return S!=null&&(M=="object"||M=="function")}g.exports=_}),N=o((h,g)=>{var _=K(),S=B(),M="[object AsyncFunction]",W="[object Function]",ne="[object GeneratorFunction]",oe="[object Proxy]";function ye(Ee){if(!S(Ee))return!1;var tt=_(Ee);return tt==W||tt==ne||tt==M||tt==oe}g.exports=ye}),j=o((h,g)=>{var _=ge(),S=_["__core-js_shared__"];g.exports=S}),z=o((h,g)=>{var _=j(),S=function(){var W=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||"");return W?"Symbol(src)_1."+W:""}();function M(W){return!!S&&S in W}g.exports=M}),U=o((h,g)=>{var _=Function.prototype,S=_.toString;function M(W){if(W!=null){try{return S.call(W)}catch{}try{return W+""}catch{}}return""}g.exports=M}),$=o((h,g)=>{var _=N(),S=z(),M=B(),W=U(),ne=/[\\^$.*+?()[\]{}|]/g,oe=/^\[object .+?Constructor\]$/,ye=Function.prototype,Ee=Object.prototype,tt=ye.toString,We=Ee.hasOwnProperty,_t=RegExp("^"+tt.call(We).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Bt(Qt){if(!M(Qt)||S(Qt))return!1;var xn=_(Qt)?_t:oe;return xn.test(W(Qt))}g.exports=Bt}),re=o((h,g)=>{function _(S,M){return S==null?void 0:S[M]}g.exports=_}),Q=o((h,g)=>{var _=$(),S=re();function M(W,ne){var oe=S(W,ne);return _(oe)?oe:void 0}g.exports=M}),_e=o((h,g)=>{var _=Q(),S=ge(),M=_(S,"Map");g.exports=M}),we=o((h,g)=>{var _=Q(),S=_(Object,"create");g.exports=S}),nt=o((h,g)=>{var _=we();function S(){this.__data__=_?_(null):{},this.size=0}g.exports=S}),ae=o((h,g)=>{function _(S){var M=this.has(S)&&delete this.__data__[S];return this.size-=M?1:0,M}g.exports=_}),H=o((h,g)=>{var _=we(),S="__lodash_hash_undefined__",M=Object.prototype,W=M.hasOwnProperty;function ne(oe){var ye=this.__data__;if(_){var Ee=ye[oe];return Ee===S?void 0:Ee}return W.call(ye,oe)?ye[oe]:void 0}g.exports=ne}),Z=o((h,g)=>{var _=we(),S=Object.prototype,M=S.hasOwnProperty;function W(ne){var oe=this.__data__;return _?oe[ne]!==void 0:M.call(oe,ne)}g.exports=W}),me=o((h,g)=>{var _=we(),S="__lodash_hash_undefined__";function M(W,ne){var oe=this.__data__;return this.size+=this.has(W)?0:1,oe[W]=_&&ne===void 0?S:ne,this}g.exports=M}),pe=o((h,g)=>{var _=nt(),S=ae(),M=H(),W=Z(),ne=me();function oe(ye){var Ee=-1,tt=ye==null?0:ye.length;for(this.clear();++Ee<tt;){var We=ye[Ee];this.set(We[0],We[1])}}oe.prototype.clear=_,oe.prototype.delete=S,oe.prototype.get=M,oe.prototype.has=W,oe.prototype.set=ne,g.exports=oe}),de=o((h,g)=>{var _=pe(),S=k(),M=_e();function W(){this.size=0,this.__data__={hash:new _,map:new(M||S),string:new _}}g.exports=W}),X=o((h,g)=>{function _(S){var M=typeof S;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?S!=="__proto__":S===null}g.exports=_}),J=o((h,g)=>{var _=X();function S(M,W){var ne=M.__data__;return _(W)?ne[typeof W=="string"?"string":"hash"]:ne.map}g.exports=S}),De=o((h,g)=>{var _=J();function S(M){var W=_(this,M).delete(M);return this.size-=W?1:0,W}g.exports=S}),Te=o((h,g)=>{var _=J();function S(M){return _(this,M).get(M)}g.exports=S}),Je=o((h,g)=>{var _=J();function S(M){return _(this,M).has(M)}g.exports=S}),he=o((h,g)=>{var _=J();function S(M,W){var ne=_(this,M),oe=ne.size;return ne.set(M,W),this.size+=ne.size==oe?0:1,this}g.exports=S}),ee=o((h,g)=>{var _=de(),S=De(),M=Te(),W=Je(),ne=he();function oe(ye){var Ee=-1,tt=ye==null?0:ye.length;for(this.clear();++Ee<tt;){var We=ye[Ee];this.set(We[0],We[1])}}oe.prototype.clear=_,oe.prototype.delete=S,oe.prototype.get=M,oe.prototype.has=W,oe.prototype.set=ne,g.exports=oe}),se=o((h,g)=>{var _=k(),S=_e(),M=ee(),W=200;function ne(oe,ye){var Ee=this.__data__;if(Ee instanceof _){var tt=Ee.__data__;if(!S||tt.length<W-1)return tt.push([oe,ye]),this.size=++Ee.size,this;Ee=this.__data__=new M(tt)}return Ee.set(oe,ye),this.size=Ee.size,this}g.exports=ne}),le=o((h,g)=>{var _=k(),S=A(),M=D(),W=V(),ne=Y(),oe=se();function ye(Ee){var tt=this.__data__=new _(Ee);this.size=tt.size}ye.prototype.clear=S,ye.prototype.delete=M,ye.prototype.get=W,ye.prototype.has=ne,ye.prototype.set=oe,g.exports=ye}),ze=o((h,g)=>{var _=Q(),S=function(){try{var M=_(Object,"defineProperty");return M({},"",{}),M}catch{}}();g.exports=S}),Se=o((h,g)=>{var _=ze();function S(M,W,ne){W=="__proto__"&&_?_(M,W,{configurable:!0,enumerable:!0,value:ne,writable:!0}):M[W]=ne}g.exports=S}),ve=o((h,g)=>{var _=Se(),S=d();function M(W,ne,oe){(oe!==void 0&&!S(W[ne],oe)||oe===void 0&&!(ne in W))&&_(W,ne,oe)}g.exports=M}),$e=o((h,g)=>{function _(S){return function(M,W,ne){for(var oe=-1,ye=Object(M),Ee=ne(M),tt=Ee.length;tt--;){var We=Ee[S?tt:++oe];if(W(ye[We],We,ye)===!1)break}return M}}g.exports=_}),Ge=o((h,g)=>{var _=$e(),S=_();g.exports=S}),Xe=o((h,g)=>{var _=ge(),S=typeof h=="object"&&h&&!h.nodeType&&h,M=S&&typeof g=="object"&&g&&!g.nodeType&&g,W=M&&M.exports===S,ne=W?_.Buffer:void 0,oe=ne?ne.allocUnsafe:void 0;function ye(Ee,tt){if(tt)return Ee.slice();var We=Ee.length,_t=oe?oe(We):new Ee.constructor(We);return Ee.copy(_t),_t}g.exports=ye}),lt=o((h,g)=>{var _=ge(),S=_.Uint8Array;g.exports=S}),qe=o((h,g)=>{var _=lt();function S(M){var W=new M.constructor(M.byteLength);return new _(W).set(new _(M)),W}g.exports=S}),Lt=o((h,g)=>{var _=qe();function S(M,W){var ne=W?_(M.buffer):M.buffer;return new M.constructor(ne,M.byteOffset,M.length)}g.exports=S}),Gt=o((h,g)=>{function _(S,M){var W=-1,ne=S.length;for(M||(M=Array(ne));++W<ne;)M[W]=S[W];return M}g.exports=_}),rn=o((h,g)=>{var _=B(),S=Object.create,M=function(){function W(){}return function(ne){if(!_(ne))return{};if(S)return S(ne);W.prototype=ne;var oe=new W;return W.prototype=void 0,oe}}();g.exports=M}),yn=o((h,g)=>{function _(S,M){return function(W){return S(M(W))}}g.exports=_}),Ye=o((h,g)=>{var _=yn(),S=_(Object.getPrototypeOf,Object);g.exports=S}),at=o((h,g)=>{var _=Object.prototype;function S(M){var W=M&&M.constructor,ne=typeof W=="function"&&W.prototype||_;return M===ne}g.exports=S}),it=o((h,g)=>{var _=rn(),S=Ye(),M=at();function W(ne){return typeof ne.constructor=="function"&&!M(ne)?_(S(ne)):{}}g.exports=W}),Vt=o((h,g)=>{function _(S){return S!=null&&typeof S=="object"}g.exports=_}),Yt=o((h,g)=>{var _=K(),S=Vt(),M="[object Arguments]";function W(ne){return S(ne)&&_(ne)==M}g.exports=W}),In=o((h,g)=>{var _=Yt(),S=Vt(),M=Object.prototype,W=M.hasOwnProperty,ne=M.propertyIsEnumerable,oe=_(function(){return arguments}())?_:function(ye){return S(ye)&&W.call(ye,"callee")&&!ne.call(ye,"callee")};g.exports=oe}),Sn=o((h,g)=>{var _=Array.isArray;g.exports=_}),Nn=o((h,g)=>{var _=9007199254740991;function S(M){return typeof M=="number"&&M>-1&&M%1==0&&M<=_}g.exports=S}),Qn=o((h,g)=>{var _=N(),S=Nn();function M(W){return W!=null&&S(W.length)&&!_(W)}g.exports=M}),Xt=o((h,g)=>{var _=Qn(),S=Vt();function M(W){return S(W)&&_(W)}g.exports=M}),Cn=o((h,g)=>{function _(){return!1}g.exports=_}),Dn=o((h,g)=>{var _=ge(),S=Cn(),M=typeof h=="object"&&h&&!h.nodeType&&h,W=M&&typeof g=="object"&&g&&!g.nodeType&&g,ne=W&&W.exports===M,oe=ne?_.Buffer:void 0,ye=oe?oe.isBuffer:void 0,Ee=ye||S;g.exports=Ee}),rr=o((h,g)=>{var _=K(),S=Ye(),M=Vt(),W="[object Object]",ne=Function.prototype,oe=Object.prototype,ye=ne.toString,Ee=oe.hasOwnProperty,tt=ye.call(Object);function We(_t){if(!M(_t)||_(_t)!=W)return!1;var Bt=S(_t);if(Bt===null)return!0;var Qt=Ee.call(Bt,"constructor")&&Bt.constructor;return typeof Qt=="function"&&Qt instanceof Qt&&ye.call(Qt)==tt}g.exports=We}),Zn=o((h,g)=>{var _=K(),S=Nn(),M=Vt(),W="[object Arguments]",ne="[object Array]",oe="[object Boolean]",ye="[object Date]",Ee="[object Error]",tt="[object Function]",We="[object Map]",_t="[object Number]",Bt="[object Object]",Qt="[object RegExp]",xn="[object Set]",Tn="[object String]",pr="[object WeakMap]",et="[object ArrayBuffer]",st="[object DataView]",pt="[object Float32Array]",zt="[object Float64Array]",Pt="[object Int8Array]",Rt="[object Int16Array]",be="[object Int32Array]",ke="[object Uint8Array]",Fe="[object Uint8ClampedArray]",Re="[object Uint16Array]",Ue="[object Uint32Array]",He={};He[pt]=He[zt]=He[Pt]=He[Rt]=He[be]=He[ke]=He[Fe]=He[Re]=He[Ue]=!0,He[W]=He[ne]=He[et]=He[oe]=He[st]=He[ye]=He[Ee]=He[tt]=He[We]=He[_t]=He[Bt]=He[Qt]=He[xn]=He[Tn]=He[pr]=!1;function ct(ht){return M(ht)&&S(ht.length)&&!!He[_(ht)]}g.exports=ct}),_r=o((h,g)=>{function _(S){return function(M){return S(M)}}g.exports=_}),ir=o((h,g)=>{var _=te(),S=typeof h=="object"&&h&&!h.nodeType&&h,M=S&&typeof g=="object"&&g&&!g.nodeType&&g,W=M&&M.exports===S,ne=W&&_.process,oe=function(){try{var ye=M&&M.require&&M.require("util").types;return ye||ne&&ne.binding&&ne.binding("util")}catch{}}();g.exports=oe}),qr=o((h,g)=>{var _=Zn(),S=_r(),M=ir(),W=M&&M.isTypedArray,ne=W?S(W):_;g.exports=ne}),Os=o((h,g)=>{function _(S,M){if(!(M==="constructor"&&typeof S[M]=="function")&&M!="__proto__")return S[M]}g.exports=_}),ls=o((h,g)=>{var _=Se(),S=d(),M=Object.prototype,W=M.hasOwnProperty;function ne(oe,ye,Ee){var tt=oe[ye];(!(W.call(oe,ye)&&S(tt,Ee))||Ee===void 0&&!(ye in oe))&&_(oe,ye,Ee)}g.exports=ne}),ft=o((h,g)=>{var _=ls(),S=Se();function M(W,ne,oe,ye){var Ee=!oe;oe||(oe={});for(var tt=-1,We=ne.length;++tt<We;){var _t=ne[tt],Bt=ye?ye(oe[_t],W[_t],_t,oe,W):void 0;Bt===void 0&&(Bt=W[_t]),Ee?S(oe,_t,Bt):_(oe,_t,Bt)}return oe}g.exports=M}),rt=o((h,g)=>{function _(S,M){for(var W=-1,ne=Array(S);++W<S;)ne[W]=M(W);return ne}g.exports=_}),wt=o((h,g)=>{var _=9007199254740991,S=/^(?:0|[1-9]\d*)$/;function M(W,ne){var oe=typeof W;return ne=ne??_,!!ne&&(oe=="number"||oe!="symbol"&&S.test(W))&&W>-1&&W%1==0&&W<ne}g.exports=M}),kn=o((h,g)=>{var _=rt(),S=In(),M=Sn(),W=Dn(),ne=wt(),oe=qr(),ye=Object.prototype,Ee=ye.hasOwnProperty;function tt(We,_t){var Bt=M(We),Qt=!Bt&&S(We),xn=!Bt&&!Qt&&W(We),Tn=!Bt&&!Qt&&!xn&&oe(We),pr=Bt||Qt||xn||Tn,et=pr?_(We.length,String):[],st=et.length;for(var pt in We)(_t||Ee.call(We,pt))&&!(pr&&(pt=="length"||xn&&(pt=="offset"||pt=="parent")||Tn&&(pt=="buffer"||pt=="byteLength"||pt=="byteOffset")||ne(pt,st)))&&et.push(pt);return et}g.exports=tt}),Hn=o((h,g)=>{function _(S){var M=[];if(S!=null)for(var W in Object(S))M.push(W);return M}g.exports=_}),wn=o((h,g)=>{var _=B(),S=at(),M=Hn(),W=Object.prototype,ne=W.hasOwnProperty;function oe(ye){if(!_(ye))return M(ye);var Ee=S(ye),tt=[];for(var We in ye)We=="constructor"&&(Ee||!ne.call(ye,We))||tt.push(We);return tt}g.exports=oe}),bt=o((h,g)=>{var _=kn(),S=wn(),M=Qn();function W(ne){return M(ne)?_(ne,!0):S(ne)}g.exports=W}),Et=o((h,g)=>{var _=ft(),S=bt();function M(W){return _(W,S(W))}g.exports=M}),ln=o((h,g)=>{var _=ve(),S=Xe(),M=Lt(),W=Gt(),ne=it(),oe=In(),ye=Sn(),Ee=Xt(),tt=Dn(),We=N(),_t=B(),Bt=rr(),Qt=qr(),xn=Os(),Tn=Et();function pr(et,st,pt,zt,Pt,Rt,be){var ke=xn(et,pt),Fe=xn(st,pt),Re=be.get(Fe);if(Re){_(et,pt,Re);return}var Ue=Rt?Rt(ke,Fe,pt+"",et,st,be):void 0,He=Ue===void 0;if(He){var ct=ye(Fe),ht=!ct&&tt(Fe),vt=!ct&&!ht&&Qt(Fe);Ue=Fe,ct||ht||vt?ye(ke)?Ue=ke:Ee(ke)?Ue=W(ke):ht?(He=!1,Ue=S(Fe,!0)):vt?(He=!1,Ue=M(Fe,!0)):Ue=[]:Bt(Fe)||oe(Fe)?(Ue=ke,oe(ke)?Ue=Tn(ke):(!_t(ke)||We(ke))&&(Ue=ne(Fe))):He=!1}He&&(be.set(Fe,Ue),Pt(Ue,Fe,zt,Rt,be),be.delete(Fe)),_(et,pt,Ue)}g.exports=pr}),Jt=o((h,g)=>{var _=le(),S=ve(),M=Ge(),W=ln(),ne=B(),oe=bt(),ye=Os();function Ee(tt,We,_t,Bt,Qt){tt!==We&&M(We,function(xn,Tn){if(Qt||(Qt=new _),ne(xn))W(tt,We,Tn,_t,Ee,Bt,Qt);else{var pr=Bt?Bt(ye(tt,Tn),xn,Tn+"",tt,We,Qt):void 0;pr===void 0&&(pr=xn),S(tt,Tn,pr)}},oe)}g.exports=Ee}),Ln=o((h,g)=>{function _(S){return S}g.exports=_}),Nr=o((h,g)=>{function _(S,M,W){switch(W.length){case 0:return S.call(M);case 1:return S.call(M,W[0]);case 2:return S.call(M,W[0],W[1]);case 3:return S.call(M,W[0],W[1],W[2])}return S.apply(M,W)}g.exports=_}),sn=o((h,g)=>{var _=Nr(),S=Math.max;function M(W,ne,oe){return ne=S(ne===void 0?W.length-1:ne,0),function(){for(var ye=arguments,Ee=-1,tt=S(ye.length-ne,0),We=Array(tt);++Ee<tt;)We[Ee]=ye[ne+Ee];Ee=-1;for(var _t=Array(ne+1);++Ee<ne;)_t[Ee]=ye[Ee];return _t[ne]=oe(We),_(W,this,_t)}}g.exports=M}),tn=o((h,g)=>{function _(S){return function(){return S}}g.exports=_}),jn=o((h,g)=>{var _=tn(),S=ze(),M=Ln(),W=S?function(ne,oe){return S(ne,"toString",{configurable:!0,enumerable:!1,value:_(oe),writable:!0})}:M;g.exports=W}),zr=o((h,g)=>{var _=800,S=16,M=Date.now;function W(ne){var oe=0,ye=0;return function(){var Ee=M(),tt=S-(Ee-ye);if(ye=Ee,tt>0){if(++oe>=_)return arguments[0]}else oe=0;return ne.apply(void 0,arguments)}}g.exports=W}),ki=o((h,g)=>{var _=jn(),S=zr(),M=S(_);g.exports=M}),zi=o((h,g)=>{var _=Ln(),S=sn(),M=ki();function W(ne,oe){return M(S(ne,oe,_),ne+"")}g.exports=W}),Qr=o((h,g)=>{var _=d(),S=Qn(),M=wt(),W=B();function ne(oe,ye,Ee){if(!W(Ee))return!1;var tt=typeof ye;return(tt=="number"?S(Ee)&&M(ye,Ee.length):tt=="string"&&ye in Ee)?_(Ee[ye],oe):!1}g.exports=ne}),ur=o((h,g)=>{var _=zi(),S=Qr();function M(W){return _(function(ne,oe){var ye=-1,Ee=oe.length,tt=Ee>1?oe[Ee-1]:void 0,We=Ee>2?oe[2]:void 0;for(tt=W.length>3&&typeof tt=="function"?(Ee--,tt):void 0,We&&S(oe[0],oe[1],We)&&(tt=Ee<3?void 0:tt,Ee=1),ne=Object(ne);++ye<Ee;){var _t=oe[ye];_t&&W(ne,_t,ye,tt)}return ne})}g.exports=M}),wr=o((h,g)=>{var _=Jt(),S=ur(),M=S(function(W,ne,oe){_(W,ne,oe)});g.exports=M}),Rr=o((h,g)=>{var _=K(),S=Vt(),M="[object Symbol]";function W(ne){return typeof ne=="symbol"||S(ne)&&_(ne)==M}g.exports=W}),Lr=o((h,g)=>{var _=Sn(),S=Rr(),M=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/;function ne(oe,ye){if(_(oe))return!1;var Ee=typeof oe;return Ee=="number"||Ee=="symbol"||Ee=="boolean"||oe==null||S(oe)?!0:W.test(oe)||!M.test(oe)||ye!=null&&oe in Object(ye)}g.exports=ne}),un=o((h,g)=>{var _=ee(),S="Expected a function";function M(W,ne){if(typeof W!="function"||ne!=null&&typeof ne!="function")throw new TypeError(S);var oe=function(){var ye=arguments,Ee=ne?ne.apply(this,ye):ye[0],tt=oe.cache;if(tt.has(Ee))return tt.get(Ee);var We=W.apply(this,ye);return oe.cache=tt.set(Ee,We)||tt,We};return oe.cache=new(M.Cache||_),oe}M.Cache=_,g.exports=M}),ss=o((h,g)=>{var _=un(),S=500;function M(W){var ne=_(W,function(ye){return oe.size===S&&oe.clear(),ye}),oe=ne.cache;return ne}g.exports=M}),pi=o((h,g)=>{var _=ss(),S=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,M=/\\(\\)?/g,W=_(function(ne){var oe=[];return ne.charCodeAt(0)===46&&oe.push(""),ne.replace(S,function(ye,Ee,tt,We){oe.push(tt?We.replace(M,"$1"):Ee||ye)}),oe});g.exports=W}),Ki=o((h,g)=>{function _(S,M){for(var W=-1,ne=S==null?0:S.length,oe=Array(ne);++W<ne;)oe[W]=M(S[W],W,S);return oe}g.exports=_}),$i=o((h,g)=>{var _=fe(),S=Ki(),M=Sn(),W=Rr(),ne=_?_.prototype:void 0,oe=ne?ne.toString:void 0;function ye(Ee){if(typeof Ee=="string")return Ee;if(M(Ee))return S(Ee,ye)+"";if(W(Ee))return oe?oe.call(Ee):"";var tt=Ee+"";return tt=="0"&&1/Ee==-1/0?"-0":tt}g.exports=ye}),Ni=o((h,g)=>{var _=$i();function S(M){return M==null?"":_(M)}g.exports=S}),Pr=o((h,g)=>{var _=Sn(),S=Lr(),M=pi(),W=Ni();function ne(oe,ye){return _(oe)?oe:S(oe,ye)?[oe]:M(W(oe))}g.exports=ne}),Mr=o((h,g)=>{var _=Rr();function S(M){if(typeof M=="string"||_(M))return M;var W=M+"";return W=="0"&&1/M==-1/0?"-0":W}g.exports=S}),Yo=o((h,g)=>{var _=Pr(),S=Mr();function M(W,ne){ne=_(ne,W);for(var oe=0,ye=ne.length;W!=null&&oe<ye;)W=W[S(ne[oe++])];return oe&&oe==ye?W:void 0}g.exports=M}),Xs=o((h,g)=>{var _=Yo();function S(M,W,ne){var oe=M==null?void 0:_(M,W);return oe===void 0?ne:oe}g.exports=S}),An=o((h,g)=>{(function(_,S){typeof h=="object"&&typeof g<"u"?g.exports=S():(_=_||self).RBush=S()})(h,function(){function _(et,st,pt,zt,Pt){(function Rt(be,ke,Fe,Re,Ue){for(;Re>Fe;){if(Re-Fe>600){var He=Re-Fe+1,ct=ke-Fe+1,ht=Math.log(He),vt=.5*Math.exp(2*ht/3),At=.5*Math.sqrt(ht*vt*(He-vt)/He)*(ct-He/2<0?-1:1),Tt=Math.max(Fe,Math.floor(ke-ct*vt/He+At)),an=Math.min(Re,Math.floor(ke+(He-ct)*vt/He+At));Rt(be,ke,Tt,an,Ue)}var Gn=be[ke],Kn=Fe,ar=Re;for(S(be,Fe,ke),Ue(be[Re],Gn)>0&&S(be,Fe,Re);Kn<ar;){for(S(be,Kn,ar),Kn++,ar--;Ue(be[Kn],Gn)<0;)Kn++;for(;Ue(be[ar],Gn)>0;)ar--}Ue(be[Fe],Gn)===0?S(be,Fe,ar):S(be,++ar,Re),ar<=ke&&(Fe=ar+1),ke<=ar&&(Re=ar-1)}})(et,st,pt||0,zt||et.length-1,Pt||M)}function S(et,st,pt){var zt=et[st];et[st]=et[pt],et[pt]=zt}function M(et,st){return et<st?-1:et>st?1:0}var W=function(et){et===void 0&&(et=9),this._maxEntries=Math.max(4,et),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function ne(et,st,pt){if(!pt)return st.indexOf(et);for(var zt=0;zt<st.length;zt++)if(pt(et,st[zt]))return zt;return-1}function oe(et,st){ye(et,0,et.children.length,st,et)}function ye(et,st,pt,zt,Pt){Pt||(Pt=Tn(null)),Pt.minX=1/0,Pt.minY=1/0,Pt.maxX=-1/0,Pt.maxY=-1/0;for(var Rt=st;Rt<pt;Rt++){var be=et.children[Rt];Ee(Pt,et.leaf?zt(be):be)}return Pt}function Ee(et,st){return et.minX=Math.min(et.minX,st.minX),et.minY=Math.min(et.minY,st.minY),et.maxX=Math.max(et.maxX,st.maxX),et.maxY=Math.max(et.maxY,st.maxY),et}function tt(et,st){return et.minX-st.minX}function We(et,st){return et.minY-st.minY}function _t(et){return(et.maxX-et.minX)*(et.maxY-et.minY)}function Bt(et){return et.maxX-et.minX+(et.maxY-et.minY)}function Qt(et,st){return et.minX<=st.minX&&et.minY<=st.minY&&st.maxX<=et.maxX&&st.maxY<=et.maxY}function xn(et,st){return st.minX<=et.maxX&&st.minY<=et.maxY&&st.maxX>=et.minX&&st.maxY>=et.minY}function Tn(et){return{children:et,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function pr(et,st,pt,zt,Pt){for(var Rt=[st,pt];Rt.length;)if(!((pt=Rt.pop())-(st=Rt.pop())<=zt)){var be=st+Math.ceil((pt-st)/zt/2)*zt;_(et,be,st,pt,Pt),Rt.push(st,be,be,pt)}}return W.prototype.all=function(){return this._all(this.data,[])},W.prototype.search=function(et){var st=this.data,pt=[];if(!xn(et,st))return pt;for(var zt=this.toBBox,Pt=[];st;){for(var Rt=0;Rt<st.children.length;Rt++){var be=st.children[Rt],ke=st.leaf?zt(be):be;xn(et,ke)&&(st.leaf?pt.push(be):Qt(et,ke)?this._all(be,pt):Pt.push(be))}st=Pt.pop()}return pt},W.prototype.collides=function(et){var st=this.data;if(!xn(et,st))return!1;for(var pt=[];st;){for(var zt=0;zt<st.children.length;zt++){var Pt=st.children[zt],Rt=st.leaf?this.toBBox(Pt):Pt;if(xn(et,Rt)){if(st.leaf||Qt(et,Rt))return!0;pt.push(Pt)}}st=pt.pop()}return!1},W.prototype.load=function(et){if(!et||!et.length)return this;if(et.length<this._minEntries){for(var st=0;st<et.length;st++)this.insert(et[st]);return this}var pt=this._build(et.slice(),0,et.length-1,0);if(this.data.children.length)if(this.data.height===pt.height)this._splitRoot(this.data,pt);else{if(this.data.height<pt.height){var zt=this.data;this.data=pt,pt=zt}this._insert(pt,this.data.height-pt.height-1,!0)}else this.data=pt;return this},W.prototype.insert=function(et){return et&&this._insert(et,this.data.height-1),this},W.prototype.clear=function(){return this.data=Tn([]),this},W.prototype.remove=function(et,st){if(!et)return this;for(var pt,zt,Pt,Rt=this.data,be=this.toBBox(et),ke=[],Fe=[];Rt||ke.length;){if(Rt||(Rt=ke.pop(),zt=ke[ke.length-1],pt=Fe.pop(),Pt=!0),Rt.leaf){var Re=ne(et,Rt.children,st);if(Re!==-1)return Rt.children.splice(Re,1),ke.push(Rt),this._condense(ke),this}Pt||Rt.leaf||!Qt(Rt,be)?zt?(pt++,Rt=zt.children[pt],Pt=!1):Rt=null:(ke.push(Rt),Fe.push(pt),pt=0,zt=Rt,Rt=Rt.children[0])}return this},W.prototype.toBBox=function(et){return et},W.prototype.compareMinX=function(et,st){return et.minX-st.minX},W.prototype.compareMinY=function(et,st){return et.minY-st.minY},W.prototype.toJSON=function(){return this.data},W.prototype.fromJSON=function(et){return this.data=et,this},W.prototype._all=function(et,st){for(var pt=[];et;)et.leaf?st.push.apply(st,et.children):pt.push.apply(pt,et.children),et=pt.pop();return st},W.prototype._build=function(et,st,pt,zt){var Pt,Rt=pt-st+1,be=this._maxEntries;if(Rt<=be)return oe(Pt=Tn(et.slice(st,pt+1)),this.toBBox),Pt;zt||(zt=Math.ceil(Math.log(Rt)/Math.log(be)),be=Math.ceil(Rt/Math.pow(be,zt-1))),(Pt=Tn([])).leaf=!1,Pt.height=zt;var ke=Math.ceil(Rt/be),Fe=ke*Math.ceil(Math.sqrt(be));pr(et,st,pt,Fe,this.compareMinX);for(var Re=st;Re<=pt;Re+=Fe){var Ue=Math.min(Re+Fe-1,pt);pr(et,Re,Ue,ke,this.compareMinY);for(var He=Re;He<=Ue;He+=ke){var ct=Math.min(He+ke-1,Ue);Pt.children.push(this._build(et,He,ct,zt-1))}}return oe(Pt,this.toBBox),Pt},W.prototype._chooseSubtree=function(et,st,pt,zt){for(;zt.push(st),!st.leaf&&zt.length-1!==pt;){for(var Pt=1/0,Rt=1/0,be=void 0,ke=0;ke<st.children.length;ke++){var Fe=st.children[ke],Re=_t(Fe),Ue=(He=et,ct=Fe,(Math.max(ct.maxX,He.maxX)-Math.min(ct.minX,He.minX))*(Math.max(ct.maxY,He.maxY)-Math.min(ct.minY,He.minY))-Re);Ue<Rt?(Rt=Ue,Pt=Re<Pt?Re:Pt,be=Fe):Ue===Rt&&Re<Pt&&(Pt=Re,be=Fe)}st=be||st.children[0]}var He,ct;return st},W.prototype._insert=function(et,st,pt){var zt=pt?et:this.toBBox(et),Pt=[],Rt=this._chooseSubtree(zt,this.data,st,Pt);for(Rt.children.push(et),Ee(Rt,zt);st>=0&&Pt[st].children.length>this._maxEntries;)this._split(Pt,st),st--;this._adjustParentBBoxes(zt,Pt,st)},W.prototype._split=function(et,st){var pt=et[st],zt=pt.children.length,Pt=this._minEntries;this._chooseSplitAxis(pt,Pt,zt);var Rt=this._chooseSplitIndex(pt,Pt,zt),be=Tn(pt.children.splice(Rt,pt.children.length-Rt));be.height=pt.height,be.leaf=pt.leaf,oe(pt,this.toBBox),oe(be,this.toBBox),st?et[st-1].children.push(be):this._splitRoot(pt,be)},W.prototype._splitRoot=function(et,st){this.data=Tn([et,st]),this.data.height=et.height+1,this.data.leaf=!1,oe(this.data,this.toBBox)},W.prototype._chooseSplitIndex=function(et,st,pt){for(var zt,Pt,Rt,be,ke,Fe,Re,Ue=1/0,He=1/0,ct=st;ct<=pt-st;ct++){var ht=ye(et,0,ct,this.toBBox),vt=ye(et,ct,pt,this.toBBox),At=(Pt=ht,Rt=vt,be=void 0,ke=void 0,Fe=void 0,Re=void 0,be=Math.max(Pt.minX,Rt.minX),ke=Math.max(Pt.minY,Rt.minY),Fe=Math.min(Pt.maxX,Rt.maxX),Re=Math.min(Pt.maxY,Rt.maxY),Math.max(0,Fe-be)*Math.max(0,Re-ke)),Tt=_t(ht)+_t(vt);At<Ue?(Ue=At,zt=ct,He=Tt<He?Tt:He):At===Ue&&Tt<He&&(He=Tt,zt=ct)}return zt||pt-st},W.prototype._chooseSplitAxis=function(et,st,pt){var zt=et.leaf?this.compareMinX:tt,Pt=et.leaf?this.compareMinY:We;this._allDistMargin(et,st,pt,zt)<this._allDistMargin(et,st,pt,Pt)&&et.children.sort(zt)},W.prototype._allDistMargin=function(et,st,pt,zt){et.children.sort(zt);for(var Pt=this.toBBox,Rt=ye(et,0,st,Pt),be=ye(et,pt-st,pt,Pt),ke=Bt(Rt)+Bt(be),Fe=st;Fe<pt-st;Fe++){var Re=et.children[Fe];Ee(Rt,et.leaf?Pt(Re):Re),ke+=Bt(Rt)}for(var Ue=pt-st-1;Ue>=st;Ue--){var He=et.children[Ue];Ee(be,et.leaf?Pt(He):He),ke+=Bt(be)}return ke},W.prototype._adjustParentBBoxes=function(et,st,pt){for(var zt=pt;zt>=0;zt--)Ee(st[zt],et)},W.prototype._condense=function(et){for(var st=et.length-1,pt=void 0;st>=0;st--)et[st].children.length===0?st>0?(pt=et[st-1].children).splice(pt.indexOf(et[st]),1):this.clear():oe(et[st],this.toBBox)},W})}),Pn=o(h=>{Object.defineProperty(h,"__esModule",{value:!0}),h.earthRadius=63710088e-1,h.factors={centimeters:h.earthRadius*100,centimetres:h.earthRadius*100,degrees:h.earthRadius/111325,feet:h.earthRadius*3.28084,inches:h.earthRadius*39.37,kilometers:h.earthRadius/1e3,kilometres:h.earthRadius/1e3,meters:h.earthRadius,metres:h.earthRadius,miles:h.earthRadius/1609.344,millimeters:h.earthRadius*1e3,millimetres:h.earthRadius*1e3,nauticalmiles:h.earthRadius/1852,radians:1,yards:h.earthRadius*1.0936},h.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/h.earthRadius,yards:1.0936133},h.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function g(Re,Ue,He){He===void 0&&(He={});var ct={type:"Feature"};return(He.id===0||He.id)&&(ct.id=He.id),He.bbox&&(ct.bbox=He.bbox),ct.properties=Ue||{},ct.geometry=Re,ct}h.feature=g;function _(Re,Ue,He){switch(Re){case"Point":return S(Ue).geometry;case"LineString":return oe(Ue).geometry;case"Polygon":return W(Ue).geometry;case"MultiPoint":return We(Ue).geometry;case"MultiLineString":return tt(Ue).geometry;case"MultiPolygon":return _t(Ue).geometry;default:throw new Error(Re+" is invalid")}}h.geometry=_;function S(Re,Ue,He){if(He===void 0&&(He={}),!Re)throw new Error("coordinates is required");if(!Array.isArray(Re))throw new Error("coordinates must be an Array");if(Re.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Rt(Re[0])||!Rt(Re[1]))throw new Error("coordinates must contain numbers");var ct={type:"Point",coordinates:Re};return g(ct,Ue,He)}h.point=S;function M(Re,Ue,He){return He===void 0&&(He={}),Ee(Re.map(function(ct){return S(ct,Ue)}),He)}h.points=M;function W(Re,Ue,He){He===void 0&&(He={});for(var ct=0,ht=Re;ct<ht.length;ct++){var vt=ht[ct];if(vt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var At=0;At<vt[vt.length-1].length;At++)if(vt[vt.length-1][At]!==vt[0][At])throw new Error("First and last Position are not equivalent.")}var Tt={type:"Polygon",coordinates:Re};return g(Tt,Ue,He)}h.polygon=W;function ne(Re,Ue,He){return He===void 0&&(He={}),Ee(Re.map(function(ct){return W(ct,Ue)}),He)}h.polygons=ne;function oe(Re,Ue,He){if(He===void 0&&(He={}),Re.length<2)throw new Error("coordinates must be an array of two or more positions");var ct={type:"LineString",coordinates:Re};return g(ct,Ue,He)}h.lineString=oe;function ye(Re,Ue,He){return He===void 0&&(He={}),Ee(Re.map(function(ct){return oe(ct,Ue)}),He)}h.lineStrings=ye;function Ee(Re,Ue){Ue===void 0&&(Ue={});var He={type:"FeatureCollection"};return Ue.id&&(He.id=Ue.id),Ue.bbox&&(He.bbox=Ue.bbox),He.features=Re,He}h.featureCollection=Ee;function tt(Re,Ue,He){He===void 0&&(He={});var ct={type:"MultiLineString",coordinates:Re};return g(ct,Ue,He)}h.multiLineString=tt;function We(Re,Ue,He){He===void 0&&(He={});var ct={type:"MultiPoint",coordinates:Re};return g(ct,Ue,He)}h.multiPoint=We;function _t(Re,Ue,He){He===void 0&&(He={});var ct={type:"MultiPolygon",coordinates:Re};return g(ct,Ue,He)}h.multiPolygon=_t;function Bt(Re,Ue,He){He===void 0&&(He={});var ct={type:"GeometryCollection",geometries:Re};return g(ct,Ue,He)}h.geometryCollection=Bt;function Qt(Re,Ue){if(Ue===void 0&&(Ue=0),Ue&&!(Ue>=0))throw new Error("precision must be a positive number");var He=Math.pow(10,Ue||0);return Math.round(Re*He)/He}h.round=Qt;function xn(Re,Ue){Ue===void 0&&(Ue="kilometers");var He=h.factors[Ue];if(!He)throw new Error(Ue+" units is invalid");return Re*He}h.radiansToLength=xn;function Tn(Re,Ue){Ue===void 0&&(Ue="kilometers");var He=h.factors[Ue];if(!He)throw new Error(Ue+" units is invalid");return Re/He}h.lengthToRadians=Tn;function pr(Re,Ue){return st(Tn(Re,Ue))}h.lengthToDegrees=pr;function et(Re){var Ue=Re%360;return Ue<0&&(Ue+=360),Ue}h.bearingToAzimuth=et;function st(Re){var Ue=Re%(2*Math.PI);return Ue*180/Math.PI}h.radiansToDegrees=st;function pt(Re){var Ue=Re%360;return Ue*Math.PI/180}h.degreesToRadians=pt;function zt(Re,Ue,He){if(Ue===void 0&&(Ue="kilometers"),He===void 0&&(He="kilometers"),!(Re>=0))throw new Error("length must be a positive number");return xn(Tn(Re,Ue),He)}h.convertLength=zt;function Pt(Re,Ue,He){if(Ue===void 0&&(Ue="meters"),He===void 0&&(He="kilometers"),!(Re>=0))throw new Error("area must be a positive number");var ct=h.areaFactors[Ue];if(!ct)throw new Error("invalid original units");var ht=h.areaFactors[He];if(!ht)throw new Error("invalid final units");return Re/ct*ht}h.convertArea=Pt;function Rt(Re){return!isNaN(Re)&&Re!==null&&!Array.isArray(Re)}h.isNumber=Rt;function be(Re){return!!Re&&Re.constructor===Object}h.isObject=be;function ke(Re){if(!Re)throw new Error("bbox is required");if(!Array.isArray(Re))throw new Error("bbox must be an Array");if(Re.length!==4&&Re.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");Re.forEach(function(Ue){if(!Rt(Ue))throw new Error("bbox must only contain numbers")})}h.validateBBox=ke;function Fe(Re){if(!Re)throw new Error("id is required");if(["string","number"].indexOf(typeof Re)===-1)throw new Error("id must be a number or a string")}h.validateId=Fe}),En=o(h=>{Object.defineProperty(h,"__esModule",{value:!0});var g=Pn();function _(st,pt,zt){if(st!==null)for(var Pt,Rt,be,ke,Fe,Re,Ue,He=0,ct=0,ht,vt=st.type,At=vt==="FeatureCollection",Tt=vt==="Feature",an=At?st.features.length:1,Gn=0;Gn<an;Gn++){Ue=At?st.features[Gn].geometry:Tt?st.geometry:st,ht=Ue?Ue.type==="GeometryCollection":!1,Fe=ht?Ue.geometries.length:1;for(var Kn=0;Kn<Fe;Kn++){var ar=0,_i=0;if(ke=ht?Ue.geometries[Kn]:Ue,ke!==null){Re=ke.coordinates;var Bi=ke.type;switch(He=zt&&(Bi==="Polygon"||Bi==="MultiPolygon")?1:0,Bi){case null:break;case"Point":if(pt(Re,ct,Gn,ar,_i)===!1)return!1;ct++,ar++;break;case"LineString":case"MultiPoint":for(Pt=0;Pt<Re.length;Pt++){if(pt(Re[Pt],ct,Gn,ar,_i)===!1)return!1;ct++,Bi==="MultiPoint"&&ar++}Bi==="LineString"&&ar++;break;case"Polygon":case"MultiLineString":for(Pt=0;Pt<Re.length;Pt++){for(Rt=0;Rt<Re[Pt].length-He;Rt++){if(pt(Re[Pt][Rt],ct,Gn,ar,_i)===!1)return!1;ct++}Bi==="MultiLineString"&&ar++,Bi==="Polygon"&&_i++}Bi==="Polygon"&&ar++;break;case"MultiPolygon":for(Pt=0;Pt<Re.length;Pt++){for(_i=0,Rt=0;Rt<Re[Pt].length;Rt++){for(be=0;be<Re[Pt][Rt].length-He;be++){if(pt(Re[Pt][Rt][be],ct,Gn,ar,_i)===!1)return!1;ct++}_i++}ar++}break;case"GeometryCollection":for(Pt=0;Pt<ke.geometries.length;Pt++)if(_(ke.geometries[Pt],pt,zt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function S(st,pt,zt,Pt){var Rt=zt;return _(st,function(be,ke,Fe,Re,Ue){ke===0&&zt===void 0?Rt=be:Rt=pt(Rt,be,ke,Fe,Re,Ue)},Pt),Rt}function M(st,pt){var zt;switch(st.type){case"FeatureCollection":for(zt=0;zt<st.features.length&&pt(st.features[zt].properties,zt)!==!1;zt++);break;case"Feature":pt(st.properties,0);break}}function W(st,pt,zt){var Pt=zt;return M(st,function(Rt,be){be===0&&zt===void 0?Pt=Rt:Pt=pt(Pt,Rt,be)}),Pt}function ne(st,pt){if(st.type==="Feature")pt(st,0);else if(st.type==="FeatureCollection")for(var zt=0;zt<st.features.length&&pt(st.features[zt],zt)!==!1;zt++);}function oe(st,pt,zt){var Pt=zt;return ne(st,function(Rt,be){be===0&&zt===void 0?Pt=Rt:Pt=pt(Pt,Rt,be)}),Pt}function ye(st){var pt=[];return _(st,function(zt){pt.push(zt)}),pt}function Ee(st,pt){var zt,Pt,Rt,be,ke,Fe,Re,Ue,He,ct,ht=0,vt=st.type==="FeatureCollection",At=st.type==="Feature",Tt=vt?st.features.length:1;for(zt=0;zt<Tt;zt++){for(Fe=vt?st.features[zt].geometry:At?st.geometry:st,Ue=vt?st.features[zt].properties:At?st.properties:{},He=vt?st.features[zt].bbox:At?st.bbox:void 0,ct=vt?st.features[zt].id:At?st.id:void 0,Re=Fe?Fe.type==="GeometryCollection":!1,ke=Re?Fe.geometries.length:1,Rt=0;Rt<ke;Rt++){if(be=Re?Fe.geometries[Rt]:Fe,be===null){if(pt(null,ht,Ue,He,ct)===!1)return!1;continue}switch(be.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(pt(be,ht,Ue,He,ct)===!1)return!1;break}case"GeometryCollection":{for(Pt=0;Pt<be.geometries.length;Pt++)if(pt(be.geometries[Pt],ht,Ue,He,ct)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ht++}}function tt(st,pt,zt){var Pt=zt;return Ee(st,function(Rt,be,ke,Fe,Re){be===0&&zt===void 0?Pt=Rt:Pt=pt(Pt,Rt,be,ke,Fe,Re)}),Pt}function We(st,pt){Ee(st,function(zt,Pt,Rt,be,ke){var Fe=zt===null?null:zt.type;switch(Fe){case null:case"Point":case"LineString":case"Polygon":return pt(g.feature(zt,Rt,{bbox:be,id:ke}),Pt,0)===!1?!1:void 0}var Re;switch(Fe){case"MultiPoint":Re="Point";break;case"MultiLineString":Re="LineString";break;case"MultiPolygon":Re="Polygon";break}for(var Ue=0;Ue<zt.coordinates.length;Ue++){var He=zt.coordinates[Ue],ct={type:Re,coordinates:He};if(pt(g.feature(ct,Rt),Pt,Ue)===!1)return!1}})}function _t(st,pt,zt){var Pt=zt;return We(st,function(Rt,be,ke){be===0&&ke===0&&zt===void 0?Pt=Rt:Pt=pt(Pt,Rt,be,ke)}),Pt}function Bt(st,pt){We(st,function(zt,Pt,Rt){var be=0;if(zt.geometry){var ke=zt.geometry.type;if(!(ke==="Point"||ke==="MultiPoint")){var Fe,Re=0,Ue=0,He=0;if(_(zt,function(ct,ht,vt,At,Tt){if(Fe===void 0||Pt>Re||At>Ue||Tt>He){Fe=ct,Re=Pt,Ue=At,He=Tt,be=0;return}var an=g.lineString([Fe,ct],zt.properties);if(pt(an,Pt,Rt,Tt,be)===!1)return!1;be++,Fe=ct})===!1)return!1}}})}function Qt(st,pt,zt){var Pt=zt,Rt=!1;return Bt(st,function(be,ke,Fe,Re,Ue){Rt===!1&&zt===void 0?Pt=be:Pt=pt(Pt,be,ke,Fe,Re,Ue),Rt=!0}),Pt}function xn(st,pt){if(!st)throw new Error("geojson is required");We(st,function(zt,Pt,Rt){if(zt.geometry!==null){var be=zt.geometry.type,ke=zt.geometry.coordinates;switch(be){case"LineString":if(pt(zt,Pt,Rt,0,0)===!1)return!1;break;case"Polygon":for(var Fe=0;Fe<ke.length;Fe++)if(pt(g.lineString(ke[Fe],zt.properties),Pt,Rt,Fe)===!1)return!1;break}}})}function Tn(st,pt,zt){var Pt=zt;return xn(st,function(Rt,be,ke,Fe){be===0&&zt===void 0?Pt=Rt:Pt=pt(Pt,Rt,be,ke,Fe)}),Pt}function pr(st,pt){if(pt=pt||{},!g.isObject(pt))throw new Error("options is invalid");var zt=pt.featureIndex||0,Pt=pt.multiFeatureIndex||0,Rt=pt.geometryIndex||0,be=pt.segmentIndex||0,ke=pt.properties,Fe;switch(st.type){case"FeatureCollection":zt<0&&(zt=st.features.length+zt),ke=ke||st.features[zt].properties,Fe=st.features[zt].geometry;break;case"Feature":ke=ke||st.properties,Fe=st.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Fe=st;break;default:throw new Error("geojson is invalid")}if(Fe===null)return null;var Re=Fe.coordinates;switch(Fe.type){case"Point":case"MultiPoint":return null;case"LineString":return be<0&&(be=Re.length+be-1),g.lineString([Re[be],Re[be+1]],ke,pt);case"Polygon":return Rt<0&&(Rt=Re.length+Rt),be<0&&(be=Re[Rt].length+be-1),g.lineString([Re[Rt][be],Re[Rt][be+1]],ke,pt);case"MultiLineString":return Pt<0&&(Pt=Re.length+Pt),be<0&&(be=Re[Pt].length+be-1),g.lineString([Re[Pt][be],Re[Pt][be+1]],ke,pt);case"MultiPolygon":return Pt<0&&(Pt=Re.length+Pt),Rt<0&&(Rt=Re[Pt].length+Rt),be<0&&(be=Re[Pt][Rt].length-be-1),g.lineString([Re[Pt][Rt][be],Re[Pt][Rt][be+1]],ke,pt)}throw new Error("geojson is invalid")}function et(st,pt){if(pt=pt||{},!g.isObject(pt))throw new Error("options is invalid");var zt=pt.featureIndex||0,Pt=pt.multiFeatureIndex||0,Rt=pt.geometryIndex||0,be=pt.coordIndex||0,ke=pt.properties,Fe;switch(st.type){case"FeatureCollection":zt<0&&(zt=st.features.length+zt),ke=ke||st.features[zt].properties,Fe=st.features[zt].geometry;break;case"Feature":ke=ke||st.properties,Fe=st.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Fe=st;break;default:throw new Error("geojson is invalid")}if(Fe===null)return null;var Re=Fe.coordinates;switch(Fe.type){case"Point":return g.point(Re,ke,pt);case"MultiPoint":return Pt<0&&(Pt=Re.length+Pt),g.point(Re[Pt],ke,pt);case"LineString":return be<0&&(be=Re.length+be),g.point(Re[be],ke,pt);case"Polygon":return Rt<0&&(Rt=Re.length+Rt),be<0&&(be=Re[Rt].length+be),g.point(Re[Rt][be],ke,pt);case"MultiLineString":return Pt<0&&(Pt=Re.length+Pt),be<0&&(be=Re[Pt].length+be),g.point(Re[Pt][be],ke,pt);case"MultiPolygon":return Pt<0&&(Pt=Re.length+Pt),Rt<0&&(Rt=Re[Pt].length+Rt),be<0&&(be=Re[Pt][Rt].length-be),g.point(Re[Pt][Rt][be],ke,pt)}throw new Error("geojson is invalid")}h.coordAll=ye,h.coordEach=_,h.coordReduce=S,h.featureEach=ne,h.featureReduce=oe,h.findPoint=et,h.findSegment=pr,h.flattenEach=We,h.flattenReduce=_t,h.geomEach=Ee,h.geomReduce=tt,h.lineEach=xn,h.lineReduce=Tn,h.propEach=M,h.propReduce=W,h.segmentEach=Bt,h.segmentReduce=Qt}),gi=o(h=>{Object.defineProperty(h,"__esModule",{value:!0});var g=En();function _(S){var M=[1/0,1/0,-1/0,-1/0];return g.coordEach(S,function(W){M[0]>W[0]&&(M[0]=W[0]),M[1]>W[1]&&(M[1]=W[1]),M[2]<W[0]&&(M[2]=W[0]),M[3]<W[1]&&(M[3]=W[1])}),M}_.default=_,h.default=_}),mi=o((h,g)=>{var _=An(),S=Pn(),M=En(),W=gi().default,ne=M.featureEach;M.coordEach,S.polygon;var oe=S.featureCollection;function ye(Ee){var tt=new _(Ee);return tt.insert=function(We){if(We.type!=="Feature")throw new Error("invalid feature");return We.bbox=We.bbox?We.bbox:W(We),_.prototype.insert.call(this,We)},tt.load=function(We){var _t=[];return Array.isArray(We)?We.forEach(function(Bt){if(Bt.type!=="Feature")throw new Error("invalid features");Bt.bbox=Bt.bbox?Bt.bbox:W(Bt),_t.push(Bt)}):ne(We,function(Bt){if(Bt.type!=="Feature")throw new Error("invalid features");Bt.bbox=Bt.bbox?Bt.bbox:W(Bt),_t.push(Bt)}),_.prototype.load.call(this,_t)},tt.remove=function(We,_t){if(We.type!=="Feature")throw new Error("invalid feature");return We.bbox=We.bbox?We.bbox:W(We),_.prototype.remove.call(this,We,_t)},tt.clear=function(){return _.prototype.clear.call(this)},tt.search=function(We){var _t=_.prototype.search.call(this,this.toBBox(We));return oe(_t)},tt.collides=function(We){return _.prototype.collides.call(this,this.toBBox(We))},tt.all=function(){var We=_.prototype.all.call(this);return oe(We)},tt.toJSON=function(){return _.prototype.toJSON.call(this)},tt.fromJSON=function(We){return _.prototype.fromJSON.call(this,We)},tt.toBBox=function(We){var _t;if(We.bbox)_t=We.bbox;else if(Array.isArray(We)&&We.length===4)_t=We;else if(Array.isArray(We)&&We.length===6)_t=[We[0],We[1],We[3],We[4]];else if(We.type==="Feature")_t=W(We);else if(We.type==="FeatureCollection")_t=W(We);else throw new Error("invalid geojson");return{minX:_t[0],minY:_t[1],maxX:_t[2],maxY:_t[3]}},tt}g.exports=ye,g.exports.default=ye});Array.prototype.findIndex=Array.prototype.findIndex||function(h){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var g=Object(this),_=g.length>>>0,S=arguments[1],M=0;M<_;M++)if(h.call(S,g[M],M,g))return M;return-1},Array.prototype.find=Array.prototype.find||function(h){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var g=Object(this),_=g.length>>>0,S=arguments[1],M=0;M<_;M++){var W=g[M];if(h.call(S,W,M,g))return W}},typeof Object.assign!="function"&&(Object.assign=function(h){if(h==null)throw new TypeError("Cannot convert undefined or null to object");h=Object(h);for(var g=1;g<arguments.length;g++){var _=arguments[g];if(_!=null)for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(h[S]=_[S])}return h}),function(h){h.forEach(function(g){g.hasOwnProperty("remove")||Object.defineProperty(g,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(h,g){if(this==null)throw new TypeError('"this" is null or not defined');var _=Object(this),S=_.length>>>0;if(S===0)return!1;var M=g|0,W=Math.max(M>=0?M:S-Math.abs(M),0);function ne(oe,ye){return oe===ye||typeof oe=="number"&&typeof ye=="number"&&isNaN(oe)&&isNaN(ye)}for(;W<S;){if(ne(_[W],h))return!0;W++}return!1}});var Zi={version:"2.18.3"},Xn=l(wr()),kr={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},zs={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},vr={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},ps={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},us={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},Ss={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},Yr={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},bn={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},cn={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},$r={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},Gi={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},Ao={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},To={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},Ol={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Ns={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},ia={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},oi={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},Pa={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},xi={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},sa={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},Do={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},yr={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},xr={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},Ko={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},Vr={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},ml={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},ga={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},Ha=To,ei={en:kr,de:zs,it:vr,id:ps,ro:us,ru:Ss,es:Yr,nl:bn,fr:cn,pt:Ha,pt_br:Ao,pt_pt:To,zh:$r,zh_tw:Gi,pl:Ol,sv:Ns,el:ia,hu:oi,da:Pa,no:xi,fa:sa,ua:Do,tr:yr,cz:xr,ja:Ko,fi:Vr,ko:ml,ky:ga},Js={_globalEditModeEnabled:!1,enableGlobalEditMode(h){let g={...h};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(_=>{this._isRelevantForEdit(_)&&_.pm.enable(g)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(h=>{h.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(h=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(h)},handleLayerAdditionInGlobalEditMode(){let h=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let g in h){let _=h[g];this._isRelevantForEdit(_)&&_.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:h}){this._addedLayersEdit[L.stamp(h)]=h},_isRelevantForEdit(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowEditing}},Qs=Js,ou={_globalDragModeEnabled:!1,enableGlobalDragMode(){let h=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},h.forEach(g=>{this._isRelevantForDrag(g)&&g.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let h=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,h.forEach(g=>{g.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let h=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let g in h){let _=h[g];this._isRelevantForDrag(_)&&_.pm.enableLayerDrag()}},_layerAddedDrag({layer:h}){this._addedLayersDrag[L.stamp(h)]=h},_isRelevantForDrag(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.draggable}},Cr=ou,Kr={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(h=>{this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(h=>{h.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(h){let g=h.target;this._isRelevantForRemoval(g)&&!g.pm.dragging()&&(g.removeFrom(this.map.pm._getContainingLayer()),g.remove(),g instanceof L.LayerGroup?(this._fireRemoveLayerGroup(g),this._fireRemoveLayerGroup(this.map,g)):(g.pm._fireRemove(g),g.pm._fireRemove(this.map,g)))},_isRelevantForRemoval(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let h=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let g in h){let _=h[g];this._isRelevantForRemoval(_)&&(_.pm.enabled()&&_.pm.disable(),_.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:h}){this._addedLayersRemoval[L.stamp(h)]=h}},vl=Kr,Mc={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(h=>h instanceof L.Polyline).forEach(h=>{this._isRelevantForRotate(h)&&h.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(h=>h instanceof L.Polyline).forEach(h=>{h.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(h){return h.pm&&h instanceof L.Polyline&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let h=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let g in h){let _=h[g];this._isRelevantForRemoval(_)&&_.pm.enableRotate()}},_layerAddedRotate({layer:h}){this._addedLayersRotate[L.stamp(h)]=h}},au=Mc,Mu=l(wr()),Nl={_fireDrawStart(h="Draw",g={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},h,g)},_fireDrawEnd(h="Draw",g={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},h,g)},_fireCreate(h,g="Draw",_={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:h,layer:h},g,_)},_fireCenterPlaced(h="Draw",g={}){let _=h==="Draw"?this._layer:void 0,S=h!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:_,layer:S,latlng:this._layer.getLatLng()},h,g)},_fireCut(h,g,_,S="Draw",M={}){this.__fire(h,"pm:cut",{shape:this._shape,layer:g,originalLayer:_},S,M)},_fireEdit(h=this._layer,g="Edit",_={}){this.__fire(h,"pm:edit",{layer:this._layer,shape:this.getShape()},g,_)},_fireEnable(h="Edit",g={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},h,g)},_fireDisable(h="Edit",g={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},h,g)},_fireUpdate(h="Edit",g={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},h,g)},_fireMarkerDragStart(h,g=void 0,_="Edit",S={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g},_,S)},_fireMarkerDrag(h,g=void 0,_="Edit",S={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g},_,S)},_fireMarkerDragEnd(h,g=void 0,_=void 0,S="Edit",M={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g,intersectionReset:_},S,M)},_fireDragStart(h="Edit",g={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},h,g)},_fireDrag(h,g="Edit",_={}){this.__fire(this._layer,"pm:drag",{...h,shape:this.getShape()},g,_)},_fireDragEnd(h="Edit",g={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},h,g)},_fireDragEnable(h="Edit",g={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},h,g)},_fireDragDisable(h="Edit",g={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},h,g)},_fireRemove(h,g=h,_="Edit",S={}){this.__fire(h,"pm:remove",{layer:g,shape:this.getShape()},_,S)},_fireVertexAdded(h,g,_,S="Edit",M={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:h,indexPath:g,latlng:_,shape:this.getShape()},S,M)},_fireVertexRemoved(h,g,_="Edit",S={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:h,indexPath:g,shape:this.getShape()},_,S)},_fireVertexClick(h,g,_="Edit",S={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:h,indexPath:g,shape:this.getShape()},_,S)},_fireIntersect(h,g=this._layer,_="Edit",S={}){this.__fire(g,"pm:intersect",{layer:this._layer,intersection:h,shape:this.getShape()},_,S)},_fireLayerReset(h,g,_="Edit",S={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:h,indexPath:g,shape:this.getShape()},_,S)},_fireChange(h,g="Edit",_={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:h,shape:this.getShape()},g,_)},_fireTextChange(h,g="Edit",_={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:h,shape:this.getShape()},g,_)},_fireTextFocus(h="Edit",g={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},h,g)},_fireTextBlur(h="Edit",g={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},h,g)},_fireSnapDrag(h,g,_="Snapping",S={}){this.__fire(h,"pm:snapdrag",g,_,S)},_fireSnap(h,g,_="Snapping",S={}){this.__fire(h,"pm:snap",g,_,S)},_fireUnsnap(h,g,_="Snapping",S={}){this.__fire(h,"pm:unsnap",g,_,S)},_fireRotationEnable(h,g,_="Rotation",S={}){this.__fire(h,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},_,S)},_fireRotationDisable(h,g="Rotation",_={}){this.__fire(h,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},g,_)},_fireRotationStart(h,g,_="Rotation",S={}){this.__fire(h,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:g},_,S)},_fireRotation(h,g,_,S=this._rotationLayer,M="Rotation",W={}){this.__fire(h,"pm:rotate",{layer:S,helpLayer:this._layer,startAngle:this._startAngle,angle:S.pm.getAngle(),angleDiff:g,oldLatLngs:_,newLatLngs:S.getLatLngs()},M,W)},_fireRotationEnd(h,g,_,S="Rotation",M={}){this.__fire(h,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:g,angle:this._rotationLayer.pm.getAngle(),originLatLngs:_,newLatLngs:this._rotationLayer.getLatLngs()},S,M)},_fireActionClick(h,g,_,S="Toolbar",M={}){this.__fire(this._map,"pm:actionclick",{text:h.text,action:h,btnName:g,button:_},S,M)},_fireButtonClick(h,g,_="Toolbar",S={}){this.__fire(this._map,"pm:buttonclick",{btnName:h,button:g},_,S)},_fireLangChange(h,g,_,S,M="Global",W={}){this.__fire(this.map,"pm:langchange",{oldLang:h,activeLang:g,fallback:_,translations:S},M,W)},_fireGlobalDragModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalEditModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalRemovalModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalCutModeToggled(h="Global",g={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},h,g)},_fireGlobalDrawModeToggled(h="Global",g={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},h,g)},_fireGlobalRotateModeToggled(h="Global",g={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},h,g)},_fireRemoveLayerGroup(h,g=h,_="Edit",S={}){this.__fire(h,"pm:remove",{layer:g,shape:void 0},_,S)},_fireKeyeventEvent(h,g,_,S="Global",M={}){this.__fire(this.map,"pm:keyevent",{event:h,eventType:g,focusOn:_},S,M)},__fire(h,g,_,S,M={}){_=(0,Mu.default)(_,M,{source:S}),L.PM.Utils._fireEvent(h,g,_)}},lu=Nl,ku=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(h){this.map=h,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),h.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(h){let g="document";this.map.getContainer().contains(h.target)&&(g="map");let _={event:h,eventType:h.type,focusOn:g};this._lastEvents[h.type]=_,this._lastEvents.current=_,this.map.pm._fireKeyeventEvent(h,h.type,g)},_onBlur(h){h.altKey=!1;let g={event:h,eventType:h.type,focusOn:"document"};this._lastEvents[h.type]=g,this._lastEvents.current=g},getLastKeyEvent(h="current"){return this._lastEvents[h]},isShiftKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.shiftKey},isAltKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.altKey},isCtrlKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.ctrlKey},isMetaKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.metaKey},getPressedKey(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.key}}),ti=ku,ms=l(Xs());function dr(h){let g=L.PM.activeLang;return(0,ms.default)(ei[g],h)||(0,ms.default)(ei.en,h)||h}function vs(h){for(let g=0;g<h.length;g+=1){let _=h[g];if(Array.isArray(_)){if(vs(_))return!0}else if(_!=null&&_!=="")return!0}return!1}function Il(h){return h.reduce((g,_)=>{if(_.length!==0){let S=Array.isArray(_)?Il(_):_;Array.isArray(S)?S.length!==0&&g.push(S):g.push(S)}return g},[])}function Wa(h,g,_){let S={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:M,b:W,f:ne}=S,oe=h.lng,ye=h.lat,Ee=_,tt=Math.PI,We=g*tt/180,_t=Math.sin(We),Bt=Math.cos(We),Qt=(1-ne)*Math.tan(ye*tt/180),xn=1/Math.sqrt(1+Qt*Qt),Tn=Qt*xn,pr=Math.atan2(Qt,Bt),et=xn*_t,st=1-et*et,pt=st*(M*M-W*W)/(W*W),zt=1+pt/16384*(4096+pt*(-768+pt*(320-175*pt))),Pt=pt/1024*(256+pt*(-128+pt*(74-47*pt))),Rt=Ee/(W*zt),be=2*Math.PI,ke,Fe,Re;for(;Math.abs(Rt-be)>1e-12;){ke=Math.cos(2*pr+Rt),Fe=Math.sin(Rt),Re=Math.cos(Rt);let an=Pt*Fe*(ke+Pt/4*(Re*(-1+2*ke*ke)-Pt/6*ke*(-3+4*Fe*Fe)*(-3+4*ke*ke)));be=Rt,Rt=Ee/(W*zt)+an}let Ue=Tn*Fe-xn*Re*Bt,He=Math.atan2(Tn*Re+xn*Fe*Bt,(1-ne)*Math.sqrt(et*et+Ue*Ue)),ct=Math.atan2(Fe*_t,xn*Re-Tn*Fe*Bt),ht=ne/16*st*(4+ne*(4-3*st)),vt=ct-(1-ht)*ne*et*(Rt+ht*Fe*(ke+ht*Re*(-1+2*ke*ke))),At=oe+vt*180/tt,Tt=He*180/tt;return L.latLng(At,Tt)}function Xi(h,g,_,S,M=!0){let W,ne,oe,ye=[];for(let Ee=0;Ee<_;Ee+=1){if(M)W=Ee*360/_+S,ne=Wa(h,W,g),oe=L.latLng(ne.lng,ne.lat);else{let tt=h.lat+Math.cos(2*Ee*Math.PI/_)*g,We=h.lng+Math.sin(2*Ee*Math.PI/_)*g;oe=L.latLng(tt,We)}ye.push(oe)}return ye}function Au(h,g,_){g=(g+360)%360;let S=Math.PI/180,M=180/Math.PI,{R:W}=L.CRS.Earth,ne=h.lng*S,oe=h.lat*S,ye=g*S,Ee=Math.sin(oe),tt=Math.cos(oe),We=Math.cos(_/W),_t=Math.sin(_/W),Bt=Math.asin(Ee*We+tt*_t*Math.cos(ye)),Qt=ne+Math.atan2(Math.sin(ye)*_t*tt,We-Ee*Math.sin(Bt));Qt*=M;let xn=Qt-360,Tn=Qt<-180?Qt+360:Qt;return Qt=Qt>180?xn:Tn,L.latLng([Bt*M,Qt])}function Ma(h,g,_){let S=h.latLngToContainerPoint(g),M=h.latLngToContainerPoint(_),W=Math.atan2(M.y-S.y,M.x-S.x)*180/Math.PI+90;return W+=W<0?360:0,W}function uu(h,g,_,S){let M=Ma(h,g,_);return Au(g,M,S)}function cu(h,g,_="asc"){if(!g||Object.keys(g).length===0)return(ye,Ee)=>ye-Ee;let S=Object.keys(g),M,W=S.length-1,ne={};for(;W>=0;)M=S[W],ne[M.toLowerCase()]=g[M],W-=1;function oe(ye){if(ye instanceof L.Marker)return"Marker";if(ye instanceof L.Circle)return"Circle";if(ye instanceof L.CircleMarker)return"CircleMarker";if(ye instanceof L.Rectangle)return"Rectangle";if(ye instanceof L.Polygon)return"Polygon";if(ye instanceof L.Polyline)return"Line"}return(ye,Ee)=>{let tt,We;if(tt=oe(ye.layer).toLowerCase(),We=oe(Ee.layer).toLowerCase(),!tt||!We)return 0;let _t=tt in ne?ne[tt]:Number.MAX_SAFE_INTEGER,Bt=We in ne?ne[We]:Number.MAX_SAFE_INTEGER,Qt=0;return _t<Bt?Qt=-1:_t>Bt&&(Qt=1),_==="desc"?Qt*-1:Qt}}function oa(h,g=h.getLatLngs()){return h instanceof L.Polygon?L.polygon(g).getLatLngs():L.polyline(g).getLatLngs()}function hu(h,g){var _,S,M,W;if((S=(_=g.options.crs)==null?void 0:_.projection)!=null&&S.MAX_LATITUDE){let ne=(W=(M=g.options.crs)==null?void 0:M.projection)==null?void 0:W.MAX_LATITUDE;h.lat=Math.max(Math.min(ne,h.lat),-ne)}return h}function Li(h){return h.options.renderer||h._map&&(h._map._getPaneRenderer(h.options.pane)||h._map.options.renderer||h._map._renderer)||h._renderer}var kc=L.Class.extend({includes:[Qs,Cr,vl,au,lu],initialize(h){this.map=h,this.Draw=new L.PM.Draw(h),this.Toolbar=new L.PM.Toolbar(h),this.Keyboard=ti(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(h)},setLang(h="en",g,_="en"){if(h=h.trim().toLowerCase(),!/^[a-z]{2}$/.test(h)){let M=h.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(M){let W=[`${M[1]}_${M[2]}`,`${M[1]}`];for(let ne of W)if(ei[ne]){h=ne;break}}}let S=L.PM.activeLang;g&&(ei[h]=(0,Xn.default)(ei[_],g)),L.PM.activeLang=h,this.map.pm.Toolbar.reinit(),this._fireLangChange(S,h,_,ei[h])},addControls(h){this.Toolbar.addControls(h)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(h="Polygon",g){h==="Poly"&&(h="Polygon"),this.Draw.enable(h,g)},disableDraw(h="Polygon"){h==="Poly"&&(h="Polygon"),this.Draw.disable(h)},setPathOptions(h,g={}){let _=g.ignoreShapes||[],S=g.merge||!1;this.map.pm.Draw.shapes.forEach(M=>{_.indexOf(M)===-1&&this.map.pm.Draw[M].setPathOptions(h,S)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(h){let g=(0,Xn.default)(this.globalOptions,h);g.editable&&(g.resizeableCircleMarker=g.editable,delete g.editable);let _=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!g.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),_=!0);let S=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!g.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),S=!0),this.map.pm.Draw.shapes.forEach(M=>{this.map.pm.Draw[M].setOptions(g)}),_&&this.map.pm.Draw.CircleMarker.enable(),S&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(M=>{M.pm.setOptions(g)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=g,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(h=>{h.pm.enabled()&&h.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(h){return this.Draw.Cut.enable(h)},toggleGlobalCutMode(h){return this.Draw.Cut.toggle(h)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(h=!1){let g=L.PM.Utils.findLayers(this.map);if(!h)return g;let _=L.featureGroup();return _._pmTempLayer=!0,g.forEach(S=>{_.addLayer(S)}),_},getGeomanDrawLayers(h=!1){let g=L.PM.Utils.findLayers(this.map).filter(S=>S._drawnByGeoman===!0);if(!h)return g;let _=L.featureGroup();return _._pmTempLayer=!0,g.forEach(S=>{_.addLayer(S)}),_},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(h){this._touchEventCounter===0&&(L.DomEvent.on(h,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(h,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(h){this._touchEventCounter===1&&(L.DomEvent.off(h,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(h,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(h){Li(this.map)._onMouseMove(this._createMouseEvent("mousemove",h))},_canvasTouchClick(h){let g="";h.type==="touchstart"||h.type==="pointerdown"?g="mousedown":(h.type==="touchend"||h.type==="pointerup"||h.type==="touchcancel"||h.type==="pointercancel")&&(g="mouseup"),g&&Li(this.map)._onClick(this._createMouseEvent(g,h))},_createMouseEvent(h,g){let _,S=g.touches[0]||g.changedTouches[0];try{_=new MouseEvent(h,{bubbles:g.bubbles,cancelable:g.cancelable,view:g.view,detail:S.detail,screenX:S.screenX,screenY:S.screenY,clientX:S.clientX,clientY:S.clientY,ctrlKey:g.ctrlKey,altKey:g.altKey,shiftKey:g.shiftKey,metaKey:g.metaKey,button:g.button,relatedTarget:g.relatedTarget})}catch{_=document.createEvent("MouseEvents"),_.initMouseEvent(h,g.bubbles,g.cancelable,g.view,S.detail,S.screenX,S.screenY,S.clientX,S.clientY,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,g.button,g.relatedTarget)}return _}}),$s=kc,ma=L.Control.extend({includes:[lu],options:{position:"topleft",disableByOtherButtons:!0},initialize(h){this._button=L.Util.extend({},this.options,h)},onAdd(h){return this._map=h,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let h=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),h?h.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(h){return typeof h=="boolean"?this._button.toggleStatus=h:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(h){h&&h.preventDefault(),!this._button.disabled&&(this._button.onClick(h,{button:this,event:h}),this._clicked(h),this._button.afterClick(h,{button:this,event:h}))},_makeButton(h){let g=this.options.position.indexOf("right")>-1?"pos-right":"",_=L.DomUtil.create("div",`button-container  ${g}`,this._container);h.title&&_.setAttribute("title",h.title);let S=L.DomUtil.create("a","leaflet-buttons-control-button",_);S.setAttribute("role","button"),S.setAttribute("tabindex","0"),S.href="#";let M=L.DomUtil.create("div",`leaflet-pm-actions-container ${g}`,_),W=h.actions,ne={cancel:{text:dr("actions.cancel"),title:dr("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:dr("actions.finish"),title:dr("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:dr("actions.removeLastVertex"),title:dr("actions.removeLastVertex"),onClick(){this._map.pm.Draw[h.jsClass]._removeLastVertex()}},finish:{text:dr("actions.finish"),title:dr("actions.finish"),onClick(ye){this._map.pm.Draw[h.jsClass]._finishShape(ye)}}};h._preparedActions=W.map(ye=>{let Ee=typeof ye=="string"?ye:ye.name,tt;if(ne[Ee])tt=ne[Ee];else if(ye.text)tt=ye;else return tt;let We=L.DomUtil.create("a",`leaflet-pm-action ${g} action-${Ee}`,M);if(We.setAttribute("role","button"),We.setAttribute("tabindex","0"),We.href="#",tt.title&&(We.title=tt.title),We.innerHTML=tt.text,L.DomEvent.disableClickPropagation(We),L.DomEvent.on(We,"click",L.DomEvent.stop),tt._node=We,!h.disabled&&tt.onClick){let _t=Bt=>{Bt.preventDefault();let Qt="",{buttons:xn}=this._map.pm.Toolbar;for(let Tn in xn)if(xn[Tn]._button===h){Qt=Tn;break}this._fireActionClick(tt,Qt,h)};L.DomEvent.addListener(We,"click",_t,this),L.DomEvent.addListener(We,"click",tt.onClick,this),L.DomEvent.addListener(We,"click",()=>this._updateActiveAction(h))}return tt}),this._updateActiveAction(h),h.toggleStatus&&L.DomUtil.addClass(_,"active");let oe=L.DomUtil.create("div","control-icon",S);return h.iconUrl&&oe.setAttribute("src",h.iconUrl),h.className&&L.DomUtil.addClass(oe,h.className),L.DomEvent.disableClickPropagation(S),L.DomEvent.on(S,"click",L.DomEvent.stop),h.disabled||(L.DomEvent.addListener(S,"click",this._onBtnClick,this),L.DomEvent.addListener(S,"click",this._triggerClick,this)),h.disabled&&(L.DomUtil.addClass(S,"pm-disabled"),S.setAttribute("aria-disabled","true")),_},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let h="",{buttons:g}=this._map.pm.Toolbar;for(let _ in g)if(g[_]._button===this._button){h=_;break}this._fireButtonClick(h,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let h="pm-disabled",g=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(g,h),g.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(g,h),g.setAttribute("aria-disabled","false"))},_updateActiveAction(h){var g;(g=h._preparedActions)==null||g.forEach(_=>{_!=null&&_._node&&(_.isActive&&_.isActive.call(this)?L.DomUtil.addClass(_._node,"active-action"):L.DomUtil.removeClass(_._node,"active-action"))})}}),du=ma;L.Control.PMButton=du;var va=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(h){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(h)},reinit(){let h=this.isVisible;this.removeControls(),this._defineButtons(),h&&this.addControls()},init(h){this.map=h,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(h){let g=`${h}Container`;return this[g]||(this[g]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${h} leaflet-bar leaflet-control`)),this[g]},getButtons(){return this.buttons},addControls(h=this.options){typeof h.editPolygon<"u"&&(h.editMode=h.editPolygon),typeof h.deleteLayer<"u"&&(h.removalMode=h.deleteLayer),L.Util.setOptions(this,h),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let h=this.getButtons(),g={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let _ in h){let S=h[_];L.Util.setOptions(S,{className:g.geomanIcons[_]})}},removeControls(){let h=this.getButtons();for(let g in h)h[g].remove();this.isVisible=!1},toggleControls(h=this.options){this.isVisible?this.removeControls():this.addControls(h)},_addButton(h,g){return this.buttons[h]=g,this.options[h]=!!this.options[h]||!1,this.buttons[h]},triggerClickOnToggledButtons(h){for(let g in this.buttons){let _=this.buttons[g];_._button.disableByOtherButtons&&_!==h&&_.toggled()&&_._triggerClick()}},toggleButton(h,g,_=!0){h==="editPolygon"&&(h="editMode"),h==="deleteLayer"&&(h="removalMode");let S=h;return _&&this.triggerClickOnToggledButtons(this.buttons[S]),this.buttons[S]?this.buttons[S].toggle(g):!1},_defineButtons(){let h={className:"control-icon leaflet-pm-icon-marker",title:dr("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(_t,Bt)=>{this.map.pm.Draw[Bt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},g={title:dr("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(_t,Bt)=>{this.map.pm.Draw[Bt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},_={className:"control-icon leaflet-pm-icon-polyline",title:dr("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(_t,Bt)=>{this.map.pm.Draw[Bt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},S={title:dr("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(_t,Bt)=>{this.map.pm.Draw[Bt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},M={title:dr("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(_t,Bt)=>{this.map.pm.Draw[Bt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},W={title:dr("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(_t,Bt)=>{this.map.pm.Draw[Bt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},ne={title:dr("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},oe={title:dr("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ye={title:dr("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(_t,Bt)=>{this.map.pm.Draw[Bt.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Ee={title:dr("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},tt={title:dr("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},We={className:"control-icon leaflet-pm-icon-text",title:dr("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(_t,Bt)=>{this.map.pm.Draw[Bt.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(h)),this._addButton("drawPolyline",new L.Control.PMButton(_)),this._addButton("drawRectangle",new L.Control.PMButton(W)),this._addButton("drawPolygon",new L.Control.PMButton(g)),this._addButton("drawCircle",new L.Control.PMButton(S)),this._addButton("drawCircleMarker",new L.Control.PMButton(M)),this._addButton("drawText",new L.Control.PMButton(We)),this._addButton("editMode",new L.Control.PMButton(ne)),this._addButton("dragMode",new L.Control.PMButton(oe)),this._addButton("cutPolygon",new L.Control.PMButton(ye)),this._addButton("removalMode",new L.Control.PMButton(Ee)),this._addButton("rotateMode",new L.Control.PMButton(tt))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let h=this.getButtons(),g=[];this.options.drawControls===!1&&(g=g.concat(Object.keys(h).filter(_=>!h[_]._button.tool))),this.options.editControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="edit"))),this.options.optionsControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="options"))),this.options.customControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="custom")));for(let _ in h)if(this.options[_]&&g.indexOf(_)===-1){let S=h[_]._button.tool;S||(S="draw"),h[_].setPosition(this._getBtnPosition(S)),h[_].addTo(this.map)}},_getBtnPosition(h){return this.options.positions&&this.options.positions[h]?this.options.positions[h]:this.options.position},setBlockPosition(h,g){this.options.positions[h]=g,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(h,g){if(g)typeof g!="object"&&(g={name:g});else throw new TypeError("Button has no name");let _=this._btnNameMapping(h);if(!g.name)throw new TypeError("Button has no name");if(this.buttons[g.name])throw new TypeError("Button with this name already exists");let S=this.map.pm.Draw.createNewDrawInstance(g.name,_);g={...this.buttons[_]._button,...g};let M=this.createCustomControl(g);return{drawInstance:S,control:M}},createCustomControl(h){if(!h.name)throw new TypeError("Button has no name");if(this.buttons[h.name])throw new TypeError("Button with this name already exists");h.onClick||(h.onClick=()=>{}),h.afterClick||(h.afterClick=()=>{}),h.toggle!==!1&&(h.toggle=!0),h.block&&(h.block=h.block.toLowerCase()),(!h.block||h.block==="draw")&&(h.block=""),h.className?h.className.indexOf("control-icon")===-1&&(h.className=`control-icon ${h.className}`):h.className="control-icon";let g={tool:h.block,className:h.className,title:h.title||"",jsClass:h.name,onClick:h.onClick,afterClick:h.afterClick,doToggle:h.toggle,toggleStatus:!1,disableOtherButtons:h.disableOtherButtons??!0,disableByOtherButtons:h.disableByOtherButtons??!0,cssToggle:h.toggle,position:this.options.position,actions:h.actions||[],disabled:!!h.disabled};this.options[h.name]!==!1&&(this.options[h.name]=!0);let _=this._addButton(h.name,new L.Control.PMButton(g));return this.changeControlOrder(),_},controlExists(h){return!!this.getButton(h)},getButton(h){return this.getButtons()[h]},getButtonsInBlock(h){let g={};if(h)for(let _ in this.getButtons()){let S=this.getButtons()[_];(S._button.tool===h||h==="draw"&&!S._button.tool)&&(g[_]=S)}return g},changeControlOrder(h=[]){let g=this._shapeMapping(),_=[];h.forEach(W=>{g[W]?_.push(g[W]):_.push(W)});let S=this.getButtons(),M={};_.forEach(W=>{S[W]&&(M[W]=S[W])}),Object.keys(S).filter(W=>!S[W]._button.tool||S[W]._button.tool==="draw").forEach(W=>{_.indexOf(W)===-1&&(M[W]=S[W])}),Object.keys(S).filter(W=>S[W]._button.tool==="edit").forEach(W=>{_.indexOf(W)===-1&&(M[W]=S[W])}),Object.keys(S).filter(W=>S[W]._button.tool==="options").forEach(W=>{_.indexOf(W)===-1&&(M[W]=S[W])}),Object.keys(S).filter(W=>S[W]._button.tool==="custom").forEach(W=>{_.indexOf(W)===-1&&(M[W]=S[W])}),Object.keys(S).forEach(W=>{_.indexOf(W)===-1&&(M[W]=S[W])}),this.map.pm.Toolbar.buttons=M,this._showHideButtons()},getControlOrder(){let h=this.getButtons(),g=[];for(let _ in h)g.push(_);return g},changeActionsOfControl(h,g){let _=this._btnNameMapping(h);if(!_)throw new TypeError("No name passed");if(!g)throw new TypeError("No actions passed");if(!this.buttons[_])throw new TypeError("Button with this name not exists");this.buttons[_]._button.actions=g,this.changeControlOrder()},setButtonDisabled(h,g){let _=this._btnNameMapping(h);g?this.buttons[_].disable():this.buttons[_].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(h){let g=this._shapeMapping();return g[h]?g[h]:h}}),Bl=va,Rl=l(wr()),Si={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(h){h.forEach(g=>{if(Array.isArray(g)){this._assignEvents(g);return}g.off("drag",this._handleSnapping,this),g.on("drag",this._handleSnapping,this),g.off("dragend",this._cleanupSnapping,this),g.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(h){if(h){let g=h.target;g._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(g=>{g.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(h){var oe,ye,Ee;let g=h.target;if(g._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((oe=h==null?void 0:h.originalEvent)==null?void 0:oe.altKey)||((Ee=(ye=this._map)==null?void 0:ye.pm)==null?void 0:Ee.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let _=this._calcClosestLayer(g.getLatLng(),this._snapList);if(Object.keys(_).length===0)return!1;let S=_.layer instanceof L.Marker||_.layer instanceof L.CircleMarker||!this.options.snapSegment,M;S?M=_.latlng:M=this._checkPrioritiySnapping(_);let W=this.options.snapDistance,ne={marker:g,shape:this._shape,snapLatLng:M,segment:_.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:_.layer,distance:_.distance};if(this._fireSnapDrag(ne.marker,ne),this._fireSnapDrag(this._layer,ne),_.distance<W){g._orgLatLng=g.getLatLng(),g.setLatLng(M),g._snapped=!0,g._snapInfo=ne;let tt=()=>{this._snapLatLng=M,this._fireSnap(g,ne),this._fireSnap(this._layer,ne)},We=this._snapLatLng||{},_t=M||{};(We.lat!==_t.lat||We.lng!==_t.lng)&&tt()}else this._snapLatLng&&(this._unsnap(ne),g._snapped=!1,g._snapInfo=void 0,this._fireUnsnap(ne.marker,ne),this._fireUnsnap(this._layer,ne));return!0},_createSnapList(){let h=[],g=[],_=this._map;_.off("layerremove",this._handleSnapLayerRemoval,this),_.on("layerremove",this._handleSnapLayerRemoval,this),_.eachLayer(S=>{if((S instanceof L.Polyline||S instanceof L.Marker||S instanceof L.CircleMarker||S instanceof L.ImageOverlay)&&S.options.snapIgnore!==!0){if(S.options.snapIgnore===void 0&&(!L.PM.optIn&&S.options.pmIgnore===!0||L.PM.optIn&&S.options.pmIgnore!==!1))return;(S instanceof L.Circle||S instanceof L.CircleMarker)&&S.pm&&S.pm._hiddenPolyCircle?h.push(S.pm._hiddenPolyCircle):S instanceof L.ImageOverlay&&(S=L.rectangle(S.getBounds())),h.push(S);let M=L.polyline([],{color:"red",pmIgnore:!0});M._pmTempLayer=!0,g.push(M),(S instanceof L.Circle||S instanceof L.CircleMarker)&&g.push(M)}}),h=h.filter(S=>this._layer!==S),h=h.filter(S=>S._latlng||S._latlngs&&vs(S._latlngs)),h=h.filter(S=>!S._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let S=L.polyline([],{color:"red",pmIgnore:!0});S._pmTempLayer=!0,g.push(S)}),this._snapList=h.concat(this._otherSnapLayers)):this._snapList=h,this.debugIndicatorLines=g},_handleSnapLayerRemoval({layer:h}){if(!h._leaflet_id)return;let g=this._snapList.findIndex(_=>_._leaflet_id===h._leaflet_id);g>-1&&this._snapList.splice(g,1)},_calcClosestLayer(h,g){return this._calcClosestLayers(h,g,1)[0]},_calcClosestLayers(h,g,_=1){let S=[],M={};g.forEach((ne,oe)=>{var Ee;if(ne._parentCopy&&ne._parentCopy===this._layer||((Ee=ne.getLatLngs)==null?void 0:Ee.call(ne).flat(5).length)<2)return;let ye=this._calcLayerDistances(h,ne);if(ye.distance=Math.floor(ye.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[oe]){let tt=L.polyline([],{color:"red",pmIgnore:!0});tt._pmTempLayer=!0,this.debugIndicatorLines[oe]=tt}this.debugIndicatorLines[oe].setLatLngs([h,ye.latlng])}_===1&&(M.distance===void 0||ye.distance-5<=M.distance)?(ye.distance+5<M.distance&&(S=[]),M=ye,M.layer=ne,S.push(M)):_!==1&&(M={},M=ye,M.layer=ne,S.push(M))}),_!==1&&(S=S.sort((ne,oe)=>ne.distance-oe.distance)),_===-1&&(_=S.length);let W=this._getClosestLayerByPriority(S,_);return L.Util.isArray(W)?W:[W]},_calcLayerDistances(h,g){let _=this._map,S=g instanceof L.Marker||g instanceof L.CircleMarker,M=g instanceof L.Polygon,W=h;if(S){let ne=g.getLatLng();return{latlng:{...ne},distance:this._getDistance(_,ne,W)}}return this._calcLatLngDistances(W,g.getLatLngs(),_,M)},_calcLatLngDistances(h,g,_,S=!1){let M,W,ne,oe=ye=>{ye.forEach((Ee,tt)=>{if(Array.isArray(Ee)){oe(Ee);return}if(this.options.snapSegment){let We=Ee,_t;S?_t=tt+1===ye.length?0:tt+1:_t=tt+1===ye.length?void 0:tt+1;let Bt=ye[_t];if(Bt){let Qt=this._getDistanceToSegment(_,h,We,Bt);(W===void 0||Qt<W)&&(W=Qt,ne=[We,Bt])}}else{let We=this._getDistance(_,h,Ee);(W===void 0||We<W)&&(W=We,M=Ee)}})};return oe(g),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(_,h,ne[0],ne[1])},segment:ne,distance:W}:{latlng:M,distance:W}},_getClosestLayerByPriority(h,g=1){h=h.sort((ne,oe)=>ne._leaflet_id-oe._leaflet_id);let _=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],S=this._map.pm.globalOptions.snappingOrder||[],M=0,W={};return S.concat(_).forEach(ne=>{W[ne]||(M+=1,W[ne]=M)}),h.sort(cu("instanceofShape",W)),g===1?h[0]||{}:h.slice(0,g)},_checkPrioritiySnapping(h){let g=this._map,_=h.segment[0],S=h.segment[1],M=h.latlng,W=M;if(this.options.snapVertex){let ne=this._getDistance(g,_,M),oe=this._getDistance(g,S,M),ye=ne<oe?_:S,Ee=ne<oe?ne:oe;if(this.options.snapMiddle){let We=L.PM.Utils.calcMiddleLatLng(g,_,S),_t=this._getDistance(g,We,M);_t<ne&&_t<oe&&(ye=We,Ee=_t)}let tt=this.options.snapDistance;Ee<tt&&(W=ye)}return{...W}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(h,g,_,S){let M=h.getMaxZoom();M===1/0&&(M=h.getZoom());let W=h.project(g,M),ne=h.project(_,M),oe=h.project(S,M),ye=L.LineUtil.closestPointOnSegment(W,ne,oe);return h.unproject(ye,M)},_getDistanceToSegment(h,g,_,S){let M=h.latLngToContainerPoint(g),W=h.latLngToContainerPoint(_),ne=h.latLngToContainerPoint(S);return L.LineUtil.pointToSegmentDistance(M,W,ne)},_getDistance(h,g,_){return h.latLngToContainerPoint(g).distanceTo(h.latLngToContainerPoint(_))}},Zo=Si,Ga=L.Class.extend({includes:[Zo,lu],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(h){L.Util.setOptions(this,h),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(h){let g=new L.Icon.Default;g.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=g,this._map=h,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(_=>{this[_]=new L.PM.Draw[_](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(h,g=!1){g?this.options.pathOptions=(0,Rl.default)(this.options.pathOptions,h):this.options.pathOptions=h},getShapes(){return this.shapes},getShape(){return this._shape},enable(h,g){if(!h)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[h].enable(g)},disable(){this.shapes.forEach(h=>{this[h].disable()})},addControls(){this.shapes.forEach(h=>{this[h].addButton()})},getActiveShape(){let h;return this.shapes.forEach(g=>{this[g]._enabled&&(h=g)}),h},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let h=[];this._map.eachLayer(g=>{(g instanceof L.Polyline||g instanceof L.Marker||g instanceof L.Circle||g instanceof L.CircleMarker||g instanceof L.ImageOverlay)&&(g._pmTempLayer||h.push(g))}),this._enabled?h.forEach(g=>{L.PM.Utils.disablePopup(g)}):h.forEach(g=>{L.PM.Utils.enablePopup(g)})},createNewDrawInstance(h,g){let _=this._getShapeFromBtnName(g);if(this[h])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[_])throw new TypeError(`There is no class L.PM.Draw.${_}`);return this[h]=new L.PM.Draw[_](this._map),this[h].toolbarButtonName=h,this[h]._shape=h,this.shapes.push(h),this[g]&&this[h].setOptions(this[g].options),this[h].setOptions(this[h].options),this[h]},_getShapeFromBtnName(h){let g={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return g[h]?g[h]:this[h]?this[h]._shape:h},_finishLayer(h){h.pm&&(h.pm.setOptions(this.options),h.pm._shape=this._shape,h.pm._map=this._map),this._addDrawnLayerProp(h)},_addDrawnLayerProp(h){h._drawnByGeoman=!0},_setPane(h,g){g==="layerPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":g==="vertexPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":g==="markerPane"&&(h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),ys=Ga;ys.Marker=ys.extend({initialize(h){this._map=h,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(dr("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(g=>{this.isRelevantMarker(g)&&g.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},isRelevantMarker(h){return h instanceof L.Marker&&h.pm&&!h._pmTempLayer&&!h.pm._initTextMarker},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let g=h;g.target=this._hintMarker,this._handleSnapping(g)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(h){if(!h.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=new L.Marker(g,this.options.markerStyle);this._setPane(_,"markerPane"),this._finishLayer(_),_.pm||(_.options.draggable=!1),_.addTo(this._map.pm._getContainingLayer()),_.pm&&this.options.markerEditable?_.pm.enable():_.dragging&&_.dragging.disable(),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var h,g;(h=this.options.markerStyle)!=null&&h.icon&&((g=this._hintMarker)==null||g.setIcon(this.options.markerStyle.icon))}});var R=63710088e-1,xe={centimeters:R*100,centimetres:R*100,degrees:R/111325,feet:R*3.28084,inches:R*39.37,kilometers:R/1e3,kilometres:R/1e3,meters:R,metres:R,miles:R/1609.344,millimeters:R*1e3,millimetres:R*1e3,nauticalmiles:R/1852,radians:1,yards:R*1.0936};function Qe(h,g,_){_===void 0&&(_={});var S={type:"Feature"};return(_.id===0||_.id)&&(S.id=_.id),_.bbox&&(S.bbox=_.bbox),S.properties=g||{},S.geometry=h,S}function dt(h,g,_){if(_===void 0&&(_={}),!h)throw new Error("coordinates is required");if(!Array.isArray(h))throw new Error("coordinates must be an Array");if(h.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!br(h[0])||!br(h[1]))throw new Error("coordinates must contain numbers");var S={type:"Point",coordinates:h};return Qe(S,g,_)}function kt(h,g,_){if(_===void 0&&(_={}),h.length<2)throw new Error("coordinates must be an array of two or more positions");var S={type:"LineString",coordinates:h};return Qe(S,g,_)}function Ut(h,g){g===void 0&&(g={});var _={type:"FeatureCollection"};return g.id&&(_.id=g.id),g.bbox&&(_.bbox=g.bbox),_.features=h,_}function pn(h,g){g===void 0&&(g="kilometers");var _=xe[g];if(!_)throw new Error(g+" units is invalid");return h*_}function zn(h,g){g===void 0&&(g="kilometers");var _=xe[g];if(!_)throw new Error(g+" units is invalid");return h/_}function Wn(h){var g=h%(2*Math.PI);return g*180/Math.PI}function cr(h){var g=h%360;return g*Math.PI/180}function br(h){return!isNaN(h)&&h!==null&&!Array.isArray(h)}function Ur(h){var g,_,S={type:"FeatureCollection",features:[]};if(h.type==="Feature"?_=h.geometry:_=h,_.type==="LineString")g=[_.coordinates];else if(_.type==="MultiLineString")g=_.coordinates;else if(_.type==="MultiPolygon")g=[].concat.apply([],_.coordinates);else if(_.type==="Polygon")g=_.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return g.forEach(function(M){g.forEach(function(W){for(var ne=0;ne<M.length-1;ne++)for(var oe=ne;oe<W.length-1;oe++)if(!(M===W&&(Math.abs(ne-oe)===1||ne===0&&oe===M.length-2&&M[ne][0]===M[M.length-1][0]&&M[ne][1]===M[M.length-1][1]))){var ye=qi(M[ne][0],M[ne][1],M[ne+1][0],M[ne+1][1],W[oe][0],W[oe][1],W[oe+1][0],W[oe+1][1]);ye&&S.features.push(dt([ye[0],ye[1]]))}})}),S}function qi(h,g,_,S,M,W,ne,oe){var ye,Ee,tt,We,_t,Bt={x:null,y:null,onLine1:!1,onLine2:!1};return ye=(oe-W)*(_-h)-(ne-M)*(S-g),ye===0?Bt.x!==null&&Bt.y!==null?Bt:!1:(Ee=g-W,tt=h-M,We=(ne-M)*Ee-(oe-W)*tt,_t=(_-h)*Ee-(S-g)*tt,Ee=We/ye,tt=_t/ye,Bt.x=h+Ee*(_-h),Bt.y=g+Ee*(S-g),Ee>=0&&Ee<=1&&(Bt.onLine1=!0),tt>=0&&tt<=1&&(Bt.onLine2=!0),Bt.onLine1&&Bt.onLine2?[Bt.x,Bt.y]:!1)}ys.Line=ys.extend({initialize(h){this._map=h,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(dr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_syncHintLine(){let h=this._layer.getLatLngs();if(h.length>0){let g=h[h.length-1];this._hintline.setLatLngs([g,this._hintMarker.getLatLng()])}},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let g=this._layer._defaultShape().slice();g.push(this._hintMarker.getLatLng()),this._change(g)},hasSelfIntersection(){return Ur(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(h,g){let _=L.polyline(this._layer.getLatLngs());h&&(g||(g=this._hintMarker.getLatLng()),_.addLatLng(g));let S=Ur(_.toGeoJSON(15));this._doesSelfIntersect=S.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(S,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(h){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,h.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=this._layer.getLatLngs(),S=_[_.length-1];if(g.equals(_[0])||_.length>0&&g.equals(S)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:g,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(g);let M=this._createMarker(g);this._setTooltipText(),this._setHintLineAfterNewVertex(g),this._fireVertexAdded(M,void 0,g,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(h)},_setHintLineAfterNewVertex(h){this._hintline.setLatLngs([h,h])},_removeLastVertex(){let h=this._markers;if(h.length<=1){this.disable();return}let g=this._layer.getLatLngs(),_=h[h.length-1],{indexPath:S}=L.PM.Utils.findDeepMarkerIndex(h,_);h.pop(),this._layerGroup.removeLayer(_);let M=h[h.length-1],W=g.indexOf(M.getLatLng());g=g.slice(0,W+1),this._layer.setLatLngs(g),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(_,S,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=1)return;let g=L.polyline(h,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this.options.snappable&&this._cleanupSnapping();let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},_createMarker(h){let g=new L.Marker(h,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),g.on("click",this._finishShape,this),g},_setTooltipText(){let{length:h}=this._layer.getLatLngs().flat(),g="";h<=1?g=dr("tooltips.continueLine"):g=dr("tooltips.finishLine"),this._hintMarker.setTooltipContent(g)},_change(h){this._fireChange(h,"Draw")},setStyle(){var h,g;(h=this._layer)==null||h.setStyle(this.options.templineStyle),(g=this._hintline)==null||g.setStyle(this.options.hintlineStyle)}}),ys.Polygon=ys.Line.extend({initialize(h){this._map=h,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(h){L.PM.Draw.Line.prototype.enable.call(this,h),this._layer.pm._shape="Polygon"},_createMarker(h){let g=new L.Marker(h,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),this._layer.getLatLngs().flat().length===1?(g.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(g)-1,this.options.snappable&&this._cleanupSnapping()):g.on("click",()=>1),g},_setTooltipText(){let{length:h}=this._layer.getLatLngs().flat(),g="";h<=2?g=dr("tooltips.continueLine"):g=dr("tooltips.finishPoly"),this._hintMarker.setTooltipContent(g)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=2)return;let g=L.polygon(h,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))}}),ys.Rectangle=ys.extend({initialize(h){this._map=h,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(h){if(L.Util.setOptions(this,h),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(dr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let g=0;g<2;g+=1){let _=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(_,"vertexPane"),_._pmTempLayer=!0,this._layerGroup.addLayer(_),this._styleMarkers.push(_)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_placeStartingMarkers(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(g),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(_=>{L.DomUtil.addClass(_._icon,"visible"),_.setLatLng(g)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(dr("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let h=this._startMarker.getLatLng();h&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([h,h]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}let g=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(g,"Draw")},_syncRectangleSize(){let h=hu(this._startMarker.getLatLng(),this._map),g=hu(this._hintMarker.getLatLng(),this._map),_=L.PM.Utils._getRotatedRectangle(h,g,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(_),this.options.cursorMarker&&this._styleMarkers){let S=[];_.forEach(M=>{!M.equals(h,1e-8)&&!M.equals(g,1e-8)&&S.push(M)}),S.forEach((M,W)=>{try{this._styleMarkers[W].setLatLng(M)}catch{}})}},_findCorners(){let h=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(h[0],h[2],this.options.rectangleAngle||0,this._map)},_finishShape(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||_.equals(g))return;let S=L.rectangle([_,g],this.options.pathOptions);if(this.options.rectangleAngle){let W=L.PM.Utils._getRotatedRectangle(_,g,this.options.rectangleAngle||0,this._map);S.setLatLngs(W),S.pm&&S.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(S,"layerPane"),this._finishLayer(S),S.addTo(this._map.pm._getContainingLayer()),this._fireCreate(S);let M=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(M))},setStyle(){var h;(h=this._layer)==null||h.setStyle(this.options.pathOptions)}}),ys.CircleMarker=ys.extend({initialize(h){this._map=h,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(h){if(L.Util.setOptions(this,h),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let g={};L.extend(g,this.options.templineStyle),g.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),g),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(dr("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(dr("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.disable()})},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_placeCenterMarker(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let g=this._hintMarker.getLatLng();this._centerMarker.setLatLng(g),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let h=this._centerMarker.getLatLng();h&&(this._layer.setLatLng(h),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(dr("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let h=this._centerMarker.getLatLng(),g=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([h,g])},_syncCircleRadius(){let h=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_)},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}this._handleHintMarkerSnapping();let g=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(g,"Draw")},isRelevantMarker(h){return h instanceof L.CircleMarker&&!(h instanceof L.Circle)&&h.pm&&!h._pmTempLayer},_createMarker(h){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!h.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=new this._BaseCircleClass(g,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(_,"layerPane"),this._finishLayer(_),_.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(_),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(h){h.pm&&this.options.markerEditable&&h.pm.enable()},_finishShape(h){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._centerMarker.getLatLng(),_=this._defaultRadius;if(this.options[this._editableOption]){let ne=this._hintMarker.getLatLng();_=this._distanceCalculation(g,ne),this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?_=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(_=this.options[this._maxRadiusOption])}let S={...this.options.pathOptions,radius:_},M=new this._BaseCircleClass(g,S);this._setPane(M,"layerPane"),this._finishLayer(M),M.addTo(this._map.pm._getContainingLayer()),M.pm&&M.pm._updateHiddenPolyCircle(),this._fireCreate(M);let W=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(W))},_getNewDestinationOfHintMarker(){let h=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return h;let g=this._centerMarker.getLatLng(),_=this._distanceCalculation(g,h);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?h=uu(this._map,g,h,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(h=uu(this._map,g,h,this._getMaxDistanceInMeter()))}return h},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let h=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),_=this._distanceCalculation(h,g);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var g,_;let h={};L.extend(h,this.options.templineStyle),this.options[this._editableOption]&&(h.radius=0),(g=this._layer)==null||g.setStyle(h),(_=this._hintline)==null||_.setStyle(this.options.hintlineStyle)},_distanceCalculation(h,g){return this._map.project(h).distanceTo(this._map.project(g))}}),ys.Circle=ys.CircleMarker.extend({initialize(h){this._map=h,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(h,g){return this._map.distance(h,g)}});function vi(h){if(!h)throw new Error("coord is required");if(!Array.isArray(h)){if(h.type==="Feature"&&h.geometry!==null&&h.geometry.type==="Point")return h.geometry.coordinates;if(h.type==="Point")return h.coordinates}if(Array.isArray(h)&&h.length>=2&&!Array.isArray(h[0])&&!Array.isArray(h[1]))return h;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Ci(h){if(Array.isArray(h))return h;if(h.type==="Feature"){if(h.geometry!==null)return h.geometry.coordinates}else if(h.coordinates)return h.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function bs(h){return h.type==="Feature"?h.geometry:h}function Cs(h,g){return h.type==="FeatureCollection"?"FeatureCollection":h.type==="GeometryCollection"?"GeometryCollection":h.type==="Feature"&&h.geometry!==null?h.geometry.type:h.type}function Xo(h,g,_){if(h!==null)for(var S,M,W,ne,oe,ye,Ee,tt=0,We=0,_t,Bt=h.type,Qt=Bt==="FeatureCollection",xn=Bt==="Feature",Tn=Qt?h.features.length:1,pr=0;pr<Tn;pr++){Ee=Qt?h.features[pr].geometry:xn?h.geometry:h,_t=Ee?Ee.type==="GeometryCollection":!1,oe=_t?Ee.geometries.length:1;for(var et=0;et<oe;et++){var st=0,pt=0;if(ne=_t?Ee.geometries[et]:Ee,ne!==null){ye=ne.coordinates;var zt=ne.type;switch(tt=0,zt){case null:break;case"Point":if(g(ye,We,pr,st,pt)===!1)return!1;We++,st++;break;case"LineString":case"MultiPoint":for(S=0;S<ye.length;S++){if(g(ye[S],We,pr,st,pt)===!1)return!1;We++,zt==="MultiPoint"&&st++}zt==="LineString"&&st++;break;case"Polygon":case"MultiLineString":for(S=0;S<ye.length;S++){for(M=0;M<ye[S].length-tt;M++){if(g(ye[S][M],We,pr,st,pt)===!1)return!1;We++}zt==="MultiLineString"&&st++,zt==="Polygon"&&pt++}zt==="Polygon"&&st++;break;case"MultiPolygon":for(S=0;S<ye.length;S++){for(pt=0,M=0;M<ye[S].length;M++){for(W=0;W<ye[S][M].length-tt;W++){if(g(ye[S][M][W],We,pr,st,pt)===!1)return!1;We++}pt++}st++}break;case"GeometryCollection":for(S=0;S<ne.geometries.length;S++)if(Xo(ne.geometries[S],g)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Hr(h,g){if(h.type==="Feature")g(h,0);else if(h.type==="FeatureCollection")for(var _=0;_<h.features.length&&g(h.features[_],_)!==!1;_++);}function eo(h,g,_){var S=_;return Hr(h,function(M,W){W===0&&_===void 0?S=M:S=g(S,M,W)}),S}function Fl(h,g){var _,S,M,W,ne,oe,ye,Ee,tt,We,_t=0,Bt=h.type==="FeatureCollection",Qt=h.type==="Feature",xn=Bt?h.features.length:1;for(_=0;_<xn;_++){for(oe=Bt?h.features[_].geometry:Qt?h.geometry:h,Ee=Bt?h.features[_].properties:Qt?h.properties:{},tt=Bt?h.features[_].bbox:Qt?h.bbox:void 0,We=Bt?h.features[_].id:Qt?h.id:void 0,ye=oe?oe.type==="GeometryCollection":!1,ne=ye?oe.geometries.length:1,M=0;M<ne;M++){if(W=ye?oe.geometries[M]:oe,W===null){if(g(null,_t,Ee,tt,We)===!1)return!1;continue}switch(W.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(g(W,_t,Ee,tt,We)===!1)return!1;break}case"GeometryCollection":{for(S=0;S<W.geometries.length;S++)if(g(W.geometries[S],_t,Ee,tt,We)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}_t++}}function mo(h,g){Fl(h,function(_,S,M,W,ne){var oe=_===null?null:_.type;switch(oe){case null:case"Point":case"LineString":case"Polygon":return g(Qe(_,M,{bbox:W,id:ne}),S,0)===!1?!1:void 0}var ye;switch(oe){case"MultiPoint":ye="Point";break;case"MultiLineString":ye="LineString";break;case"MultiPolygon":ye="Polygon";break}for(var Ee=0;Ee<_.coordinates.length;Ee++){var tt=_.coordinates[Ee],We={type:ye,coordinates:tt};if(g(Qe(We,M),S,Ee)===!1)return!1}})}function Tu(h){if(!h)throw new Error("geojson is required");var g=[];return mo(h,function(_){ka(_,g)}),Ut(g)}function ka(h,g){var _=[],S=h.geometry;if(S!==null){switch(S.type){case"Polygon":_=Ci(S);break;case"LineString":_=[Ci(S)]}_.forEach(function(M){var W=Qu(M,h.properties);W.forEach(function(ne){ne.id=g.length,g.push(ne)})})}}function Qu(h,g){var _=[];return h.reduce(function(S,M){var W=kt([S,M],g);return W.bbox=yl(S,M),_.push(W),M}),_}function yl(h,g){var _=h[0],S=h[1],M=g[0],W=g[1],ne=_<M?_:M,oe=S<W?S:W,ye=_>M?_:M,Ee=S>W?S:W;return[ne,oe,ye,Ee]}var bl=Tu,Es=l(mi(),1);function Aa(h,g){var _={},S=[];if(h.type==="LineString"&&(h=Qe(h)),g.type==="LineString"&&(g=Qe(g)),h.type==="Feature"&&g.type==="Feature"&&h.geometry!==null&&g.geometry!==null&&h.geometry.type==="LineString"&&g.geometry.type==="LineString"&&h.geometry.coordinates.length===2&&g.geometry.coordinates.length===2){var M=Jo(h,g);return M&&S.push(M),Ut(S)}var W=(0,Es.default)();return W.load(bl(g)),Hr(bl(h),function(ne){Hr(W.search(ne),function(oe){var ye=Jo(ne,oe);if(ye){var Ee=Ci(ye).join(",");_[Ee]||(_[Ee]=!0,S.push(ye))}})}),Ut(S)}function Jo(h,g){var _=Ci(h),S=Ci(g);if(_.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(S.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var M=_[0][0],W=_[0][1],ne=_[1][0],oe=_[1][1],ye=S[0][0],Ee=S[0][1],tt=S[1][0],We=S[1][1],_t=(We-Ee)*(ne-M)-(tt-ye)*(oe-W),Bt=(tt-ye)*(W-Ee)-(We-Ee)*(M-ye),Qt=(ne-M)*(W-Ee)-(oe-W)*(M-ye);if(_t===0)return null;var xn=Bt/_t,Tn=Qt/_t;if(xn>=0&&xn<=1&&Tn>=0&&Tn<=1){var pr=M+xn*(ne-M),et=W+xn*(oe-W);return dt([pr,et])}return null}var Oo=Aa,jl=l(mi(),1);function to(h,g,_){_===void 0&&(_={});var S=vi(h),M=vi(g),W=cr(M[1]-S[1]),ne=cr(M[0]-S[0]),oe=cr(S[1]),ye=cr(M[1]),Ee=Math.pow(Math.sin(W/2),2)+Math.pow(Math.sin(ne/2),2)*Math.cos(oe)*Math.cos(ye);return pn(2*Math.atan2(Math.sqrt(Ee),Math.sqrt(1-Ee)),_.units)}var vo=to;function yo(h){var g=h[0],_=h[1],S=h[2],M=h[3],W=vo(h.slice(0,2),[S,_]),ne=vo(h.slice(0,2),[g,M]);if(W>=ne){var oe=(_+M)/2;return[g,oe-(S-g)/2,S,oe+(S-g)/2]}else{var ye=(g+S)/2;return[ye-(M-_)/2,_,ye+(M-_)/2,M]}}var Ac=yo;function Is(h){var g=[1/0,1/0,-1/0,-1/0];return Xo(h,function(_){g[0]>_[0]&&(g[0]=_[0]),g[1]>_[1]&&(g[1]=_[1]),g[2]<_[0]&&(g[2]=_[0]),g[3]<_[1]&&(g[3]=_[1])}),g}Is.default=Is;var qa=Is;function no(h,g){g===void 0&&(g={});var _=g.precision,S=g.coordinates,M=g.mutate;if(_=_==null||isNaN(_)?6:_,S=S==null||isNaN(S)?3:S,!h)throw new Error("<geojson> is required");if(typeof _!="number")throw new Error("<precision> must be a number");if(typeof S!="number")throw new Error("<coordinates> must be a number");(M===!1||M===void 0)&&(h=JSON.parse(JSON.stringify(h)));var W=Math.pow(10,_);return Xo(h,function(ne){ro(ne,W,S)}),h}function ro(h,g,_){h.length>_&&h.splice(_,h.length);for(var S=0;S<h.length;S++)h[S]=Math.round(h[S]*g)/g;return h}var Ya=no;function Ka(h,g,_){if(_===void 0&&(_={}),_.final===!0)return io(h,g);var S=vi(h),M=vi(g),W=cr(S[0]),ne=cr(M[0]),oe=cr(S[1]),ye=cr(M[1]),Ee=Math.sin(ne-W)*Math.cos(ye),tt=Math.cos(oe)*Math.sin(ye)-Math.sin(oe)*Math.cos(ye)*Math.cos(ne-W);return Wn(Math.atan2(Ee,tt))}function io(h,g){var _=Ka(g,h);return _=(_+180)%360,_}function Vs(h,g,_,S){S===void 0&&(S={});var M=vi(h),W=cr(M[0]),ne=cr(M[1]),oe=cr(_),ye=zn(g,S.units),Ee=Math.asin(Math.sin(ne)*Math.cos(ye)+Math.cos(ne)*Math.sin(ye)*Math.cos(oe)),tt=W+Math.atan2(Math.sin(oe)*Math.sin(ye)*Math.cos(ne),Math.cos(ye)-Math.sin(ne)*Math.sin(Ee)),We=Wn(tt),_t=Wn(Ee);return dt([We,_t],S.properties)}function Ta(h,g,_){_===void 0&&(_={});var S=dt([1/0,1/0],{dist:1/0}),M=0;return mo(h,function(W){for(var ne=Ci(W),oe=0;oe<ne.length-1;oe++){var ye=dt(ne[oe]);ye.properties.dist=vo(g,ye,_);var Ee=dt(ne[oe+1]);Ee.properties.dist=vo(g,Ee,_);var tt=vo(ye,Ee,_),We=Math.max(ye.properties.dist,Ee.properties.dist),_t=Ka(ye,Ee),Bt=Vs(g,We,_t+90,_),Qt=Vs(g,We,_t-90,_),xn=Oo(kt([Bt.geometry.coordinates,Qt.geometry.coordinates]),kt([ye.geometry.coordinates,Ee.geometry.coordinates])),Tn=null;xn.features.length>0&&(Tn=xn.features[0],Tn.properties.dist=vo(g,Tn,_),Tn.properties.location=M+vo(ye,Tn,_)),ye.properties.dist<S.properties.dist&&(S=ye,S.properties.index=oe,S.properties.location=M),Ee.properties.dist<S.properties.dist&&(S=Ee,S.properties.index=oe+1,S.properties.location=M+tt),Tn&&Tn.properties.dist<S.properties.dist&&(S=Tn,S.properties.index=oe),M+=tt}}),S}var Qo=Ta;function so(h,g){if(!h)throw new Error("line is required");if(!g)throw new Error("splitter is required");var _=Cs(h),S=Cs(g);if(_!=="LineString")throw new Error("line must be LineString");if(S==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(S==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var M=Ya(g,{precision:7});switch(S){case"Point":return qt(h,M);case"MultiPoint":return St(h,M);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return St(h,Oo(h,M))}}function St(h,g){var _=[],S=(0,jl.default)();return mo(g,function(M){if(_.forEach(function(oe,ye){oe.id=ye}),!_.length)_=qt(h,M).features,_.forEach(function(oe){oe.bbox||(oe.bbox=Ac(qa(oe)))}),S.load(Ut(_));else{var W=S.search(M);if(W.features.length){var ne=It(M,W);_=_.filter(function(oe){return oe.id!==ne.id}),S.remove(ne),Hr(qt(ne,M),function(oe){_.push(oe),S.insert(oe)})}}}),Ut(_)}function qt(h,g){var _=[],S=Ci(h)[0],M=Ci(h)[h.geometry.coordinates.length-1];if(Rn(S,vi(g))||Rn(M,vi(g)))return Ut([h]);var W=(0,jl.default)(),ne=bl(h);W.load(ne);var oe=W.search(g);if(!oe.features.length)return Ut([h]);var ye=It(g,oe),Ee=[S],tt=eo(ne,function(We,_t,Bt){var Qt=Ci(_t)[1],xn=vi(g);return Bt===ye.id?(We.push(xn),_.push(kt(We)),Rn(xn,Qt)?[xn]:[xn,Qt]):(We.push(Qt),We)},Ee);return tt.length>1&&_.push(kt(tt)),Ut(_)}function It(h,g){if(!g.features.length)throw new Error("lines must contain features");if(g.features.length===1)return g.features[0];var _,S=1/0;return Hr(g,function(M){var W=Qo(M,h),ne=W.properties.dist;ne<S&&(_=M,S=ne)}),_}function Rn(h,g){return h[0]===g[0]&&h[1]===g[1]}var tr=so;function Sr(h,g,_){if(_===void 0&&(_={}),!h)throw new Error("point is required");if(!g)throw new Error("polygon is required");var S=vi(h),M=bs(g),W=M.type,ne=g.bbox,oe=M.coordinates;if(ne&&Ei(S,ne)===!1)return!1;W==="Polygon"&&(oe=[oe]);for(var ye=!1,Ee=0;Ee<oe.length&&!ye;Ee++)if(Ji(S,oe[Ee][0],_.ignoreBoundary)){for(var tt=!1,We=1;We<oe[Ee].length&&!tt;)Ji(S,oe[Ee][We],!_.ignoreBoundary)&&(tt=!0),We++;tt||(ye=!0)}return ye}function Ji(h,g,_){var S=!1;g[0][0]===g[g.length-1][0]&&g[0][1]===g[g.length-1][1]&&(g=g.slice(0,g.length-1));for(var M=0,W=g.length-1;M<g.length;W=M++){var ne=g[M][0],oe=g[M][1],ye=g[W][0],Ee=g[W][1],tt=h[1]*(ne-ye)+oe*(ye-h[0])+Ee*(h[0]-ne)===0&&(ne-h[0])*(ye-h[0])<=0&&(oe-h[1])*(Ee-h[1])<=0;if(tt)return!_;var We=oe>h[1]!=Ee>h[1]&&h[0]<(ye-ne)*(h[1]-oe)/(Ee-oe)+ne;We&&(S=!S)}return S}function Ei(h,g){return g[0]<=h[0]&&g[1]<=h[1]&&g[2]>=h[0]&&g[3]>=h[1]}function fu(h,g,_){_===void 0&&(_={});for(var S=vi(h),M=Ci(g),W=0;W<M.length-1;W++){var ne=!1;if(_.ignoreEndVertices&&(W===0&&(ne="start"),W===M.length-2&&(ne="end"),W===0&&W+1===M.length-1&&(ne="both")),bo(M[W],M[W+1],S,ne,typeof _.epsilon>"u"?null:_.epsilon))return!0}return!1}function bo(h,g,_,S,M){var W=_[0],ne=_[1],oe=h[0],ye=h[1],Ee=g[0],tt=g[1],We=_[0]-oe,_t=_[1]-ye,Bt=Ee-oe,Qt=tt-ye,xn=We*Qt-_t*Bt;if(M!==null){if(Math.abs(xn)>M)return!1}else if(xn!==0)return!1;if(S){if(S==="start")return Math.abs(Bt)>=Math.abs(Qt)?Bt>0?oe<W&&W<=Ee:Ee<=W&&W<oe:Qt>0?ye<ne&&ne<=tt:tt<=ne&&ne<ye;if(S==="end")return Math.abs(Bt)>=Math.abs(Qt)?Bt>0?oe<=W&&W<Ee:Ee<W&&W<=oe:Qt>0?ye<=ne&&ne<tt:tt<ne&&ne<=ye;if(S==="both")return Math.abs(Bt)>=Math.abs(Qt)?Bt>0?oe<W&&W<Ee:Ee<W&&W<oe:Qt>0?ye<ne&&ne<tt:tt<ne&&ne<ye}else return Math.abs(Bt)>=Math.abs(Qt)?Bt>0?oe<=W&&W<=Ee:Ee<=W&&W<=oe:Qt>0?ye<=ne&&ne<=tt:tt<=ne&&ne<=ye;return!1}var Qi=fu;function Da(h,g){var _=bs(h),S=bs(g),M=_.type,W=S.type,ne=_.coordinates,oe=S.coordinates;switch(M){case"Point":switch(W){case"Point":return Ii(ne,oe);default:throw new Error("feature2 "+W+" geometry not supported")}case"MultiPoint":switch(W){case"Point":return Za(_,S);case"MultiPoint":return Oa(_,S);default:throw new Error("feature2 "+W+" geometry not supported")}case"LineString":switch(W){case"Point":return Qi(S,_,{ignoreEndVertices:!0});case"LineString":return ni(_,S);case"MultiPoint":return Na(_,S);default:throw new Error("feature2 "+W+" geometry not supported")}case"Polygon":switch(W){case"Point":return Sr(S,_,{ignoreBoundary:!0});case"LineString":return ya(_,S);case"Polygon":return Us(_,S);case"MultiPoint":return Ia(_,S);default:throw new Error("feature2 "+W+" geometry not supported")}default:throw new Error("feature1 "+M+" geometry not supported")}}function Za(h,g){var _,S=!1;for(_=0;_<h.coordinates.length;_++)if(Ii(h.coordinates[_],g.coordinates)){S=!0;break}return S}function Oa(h,g){for(var _=0,S=g.coordinates;_<S.length;_++){for(var M=S[_],W=!1,ne=0,oe=h.coordinates;ne<oe.length;ne++){var ye=oe[ne];if(Ii(M,ye)){W=!0;break}}if(!W)return!1}return!0}function Na(h,g){for(var _=!1,S=0,M=g.coordinates;S<M.length;S++){var W=M[S];if(Qi(W,h,{ignoreEndVertices:!0})&&(_=!0),!Qi(W,h))return!1}return!!_}function Ia(h,g){for(var _=0,S=g.coordinates;_<S.length;_++){var M=S[_];if(!Sr(M,h,{ignoreBoundary:!0}))return!1}return!0}function ni(h,g){for(var _=!1,S=0,M=g.coordinates;S<M.length;S++){var W=M[S];if(Qi({type:"Point",coordinates:W},h,{ignoreEndVertices:!0})&&(_=!0),!Qi({type:"Point",coordinates:W},h,{ignoreEndVertices:!1}))return!1}return _}function ya(h,g){var _=!1,S=0,M=qa(h),W=qa(g);if(!Pi(M,W))return!1;for(S;S<g.coordinates.length-1;S++){var ne=_s(g.coordinates[S],g.coordinates[S+1]);if(Sr({type:"Point",coordinates:ne},h,{ignoreBoundary:!0})){_=!0;break}}return _}function Us(h,g){if(h.type==="Feature"&&h.geometry===null||g.type==="Feature"&&g.geometry===null)return!1;var _=qa(h),S=qa(g);if(!Pi(_,S))return!1;for(var M=bs(g).coordinates,W=0,ne=M;W<ne.length;W++)for(var oe=ne[W],ye=0,Ee=oe;ye<Ee.length;ye++){var tt=Ee[ye];if(!Sr(tt,h))return!1}return!0}function Pi(h,g){return!(h[0]>g[0]||h[2]<g[2]||h[1]>g[1]||h[3]<g[3])}function Ii(h,g){return h[0]===g[0]&&h[1]===g[1]}function _s(h,g){return[(h[0]+g[0])/2,(h[1]+g[1])/2]}var Ui=l(Xs()),ea=h=>()=>h,No=h=>{let g=h?(_,S)=>S.minus(_).abs().isLessThanOrEqualTo(h):ea(!1);return(_,S)=>g(_,S)?0:_.comparedTo(S)};function aa(h){let g=h?(_,S,M,W,ne)=>_.exponentiatedBy(2).isLessThanOrEqualTo(W.minus(S).exponentiatedBy(2).plus(ne.minus(M).exponentiatedBy(2)).times(h)):ea(!1);return(_,S,M)=>{let W=_.x,ne=_.y,oe=M.x,ye=M.y,Ee=ne.minus(ye).times(S.x.minus(oe)).minus(W.minus(oe).times(S.y.minus(ye)));return g(Ee,W,ne,oe,ye)?0:Ee.comparedTo(0)}}var ec=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Ba=Math.ceil,Ps=Math.floor,Vi="[BigNumber Error] ",oo=Vi+"Number primitive has more than 15 significant digits: ",Io=1e14,mr=14,Xa=9007199254740991,Ja=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],ba=1e7,_o=1e9;function ih(h){var g,_,S,M=et.prototype={constructor:et,toString:null,valueOf:null},W=new et(1),ne=20,oe=4,ye=-7,Ee=21,tt=-1e7,We=1e7,_t=!1,Bt=1,Qt=0,xn={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Tn="0123456789abcdefghijklmnopqrstuvwxyz",pr=!0;function et(be,ke){var Fe,Re,Ue,He,ct,ht,vt,At,Tt=this;if(!(Tt instanceof et))return new et(be,ke);if(ke==null){if(be&&be._isBigNumber===!0){Tt.s=be.s,!be.c||be.e>We?Tt.c=Tt.e=null:be.e<tt?Tt.c=[Tt.e=0]:(Tt.e=be.e,Tt.c=be.c.slice());return}if((ht=typeof be=="number")&&be*0==0){if(Tt.s=1/be<0?(be=-be,-1):1,be===~~be){for(He=0,ct=be;ct>=10;ct/=10,He++);He>We?Tt.c=Tt.e=null:(Tt.e=He,Tt.c=[be]);return}At=String(be)}else{if(!ec.test(At=String(be)))return S(Tt,At,ht);Tt.s=At.charCodeAt(0)==45?(At=At.slice(1),-1):1}(He=At.indexOf("."))>-1&&(At=At.replace(".","")),(ct=At.search(/e/i))>0?(He<0&&(He=ct),He+=+At.slice(ct+1),At=At.substring(0,ct)):He<0&&(He=At.length)}else{if(u(ke,2,Tn.length,"Base"),ke==10&&pr)return Tt=new et(be),Pt(Tt,ne+Tt.e+1,oe);if(At=String(be),ht=typeof be=="number"){if(be*0!=0)return S(Tt,At,ht,ke);if(Tt.s=1/be<0?(At=At.slice(1),-1):1,et.DEBUG&&At.replace(/^0\.0*|\./,"").length>15)throw Error(oo+be)}else Tt.s=At.charCodeAt(0)===45?(At=At.slice(1),-1):1;for(Fe=Tn.slice(0,ke),He=ct=0,vt=At.length;ct<vt;ct++)if(Fe.indexOf(Re=At.charAt(ct))<0){if(Re=="."){if(ct>He){He=vt;continue}}else if(!Ue&&(At==At.toUpperCase()&&(At=At.toLowerCase())||At==At.toLowerCase()&&(At=At.toUpperCase()))){Ue=!0,ct=-1,He=0;continue}return S(Tt,String(be),ht,ke)}ht=!1,At=_(At,ke,10,Tt.s),(He=At.indexOf("."))>-1?At=At.replace(".",""):He=At.length}for(ct=0;At.charCodeAt(ct)===48;ct++);for(vt=At.length;At.charCodeAt(--vt)===48;);if(At=At.slice(ct,++vt)){if(vt-=ct,ht&&et.DEBUG&&vt>15&&(be>Xa||be!==Ps(be)))throw Error(oo+Tt.s*be);if((He=He-ct-1)>We)Tt.c=Tt.e=null;else if(He<tt)Tt.c=[Tt.e=0];else{if(Tt.e=He,Tt.c=[],ct=(He+1)%mr,He<0&&(ct+=mr),ct<vt){for(ct&&Tt.c.push(+At.slice(0,ct)),vt-=mr;ct<vt;)Tt.c.push(+At.slice(ct,ct+=mr));ct=mr-(At=At.slice(ct)).length}else ct-=vt;for(;ct--;At+="0");Tt.c.push(+At)}}else Tt.c=[Tt.e=0]}et.clone=ih,et.ROUND_UP=0,et.ROUND_DOWN=1,et.ROUND_CEIL=2,et.ROUND_FLOOR=3,et.ROUND_HALF_UP=4,et.ROUND_HALF_DOWN=5,et.ROUND_HALF_EVEN=6,et.ROUND_HALF_CEIL=7,et.ROUND_HALF_FLOOR=8,et.EUCLID=9,et.config=et.set=function(be){var ke,Fe;if(be!=null)if(typeof be=="object"){if(be.hasOwnProperty(ke="DECIMAL_PLACES")&&(Fe=be[ke],u(Fe,0,_o,ke),ne=Fe),be.hasOwnProperty(ke="ROUNDING_MODE")&&(Fe=be[ke],u(Fe,0,8,ke),oe=Fe),be.hasOwnProperty(ke="EXPONENTIAL_AT")&&(Fe=be[ke],Fe&&Fe.pop?(u(Fe[0],-1e9,0,ke),u(Fe[1],0,_o,ke),ye=Fe[0],Ee=Fe[1]):(u(Fe,-1e9,_o,ke),ye=-(Ee=Fe<0?-Fe:Fe))),be.hasOwnProperty(ke="RANGE"))if(Fe=be[ke],Fe&&Fe.pop)u(Fe[0],-1e9,-1,ke),u(Fe[1],1,_o,ke),tt=Fe[0],We=Fe[1];else if(u(Fe,-1e9,_o,ke),Fe)tt=-(We=Fe<0?-Fe:Fe);else throw Error(Vi+ke+" cannot be zero: "+Fe);if(be.hasOwnProperty(ke="CRYPTO"))if(Fe=be[ke],Fe===!!Fe)if(Fe)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))_t=Fe;else throw _t=!Fe,Error(Vi+"crypto unavailable");else _t=Fe;else throw Error(Vi+ke+" not true or false: "+Fe);if(be.hasOwnProperty(ke="MODULO_MODE")&&(Fe=be[ke],u(Fe,0,9,ke),Bt=Fe),be.hasOwnProperty(ke="POW_PRECISION")&&(Fe=be[ke],u(Fe,0,_o,ke),Qt=Fe),be.hasOwnProperty(ke="FORMAT"))if(Fe=be[ke],typeof Fe=="object")xn=Fe;else throw Error(Vi+ke+" not an object: "+Fe);if(be.hasOwnProperty(ke="ALPHABET"))if(Fe=be[ke],typeof Fe=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Fe))pr=Fe.slice(0,10)=="0123456789",Tn=Fe;else throw Error(Vi+ke+" invalid: "+Fe)}else throw Error(Vi+"Object expected: "+be);return{DECIMAL_PLACES:ne,ROUNDING_MODE:oe,EXPONENTIAL_AT:[ye,Ee],RANGE:[tt,We],CRYPTO:_t,MODULO_MODE:Bt,POW_PRECISION:Qt,FORMAT:xn,ALPHABET:Tn}},et.isBigNumber=function(be){if(!be||be._isBigNumber!==!0)return!1;if(!et.DEBUG)return!0;var ke,Fe,Re=be.c,Ue=be.e,He=be.s;e:if({}.toString.call(Re)=="[object Array]"){if((He===1||He===-1)&&Ue>=-1e9&&Ue<=_o&&Ue===Ps(Ue)){if(Re[0]===0){if(Ue===0&&Re.length===1)return!0;break e}if(ke=(Ue+1)%mr,ke<1&&(ke+=mr),String(Re[0]).length==ke){for(ke=0;ke<Re.length;ke++)if(Fe=Re[ke],Fe<0||Fe>=Io||Fe!==Ps(Fe))break e;if(Fe!==0)return!0}}}else if(Re===null&&Ue===null&&(He===null||He===1||He===-1))return!0;throw Error(Vi+"Invalid BigNumber: "+be)},et.maximum=et.max=function(){return pt(arguments,-1)},et.minimum=et.min=function(){return pt(arguments,1)},et.random=function(){var be=9007199254740992,ke=Math.random()*be&2097151?function(){return Ps(Math.random()*be)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Fe){var Re,Ue,He,ct,ht,vt=0,At=[],Tt=new et(W);if(Fe==null?Fe=ne:u(Fe,0,_o),ct=Ba(Fe/mr),_t)if(crypto.getRandomValues){for(Re=crypto.getRandomValues(new Uint32Array(ct*=2));vt<ct;)ht=Re[vt]*131072+(Re[vt+1]>>>11),ht>=9e15?(Ue=crypto.getRandomValues(new Uint32Array(2)),Re[vt]=Ue[0],Re[vt+1]=Ue[1]):(At.push(ht%1e14),vt+=2);vt=ct/2}else if(crypto.randomBytes){for(Re=crypto.randomBytes(ct*=7);vt<ct;)ht=(Re[vt]&31)*281474976710656+Re[vt+1]*1099511627776+Re[vt+2]*4294967296+Re[vt+3]*16777216+(Re[vt+4]<<16)+(Re[vt+5]<<8)+Re[vt+6],ht>=9e15?crypto.randomBytes(7).copy(Re,vt):(At.push(ht%1e14),vt+=7);vt=ct/7}else throw _t=!1,Error(Vi+"crypto unavailable");if(!_t)for(;vt<ct;)ht=ke(),ht<9e15&&(At[vt++]=ht%1e14);for(ct=At[--vt],Fe%=mr,ct&&Fe&&(ht=Ja[mr-Fe],At[vt]=Ps(ct/ht)*ht);At[vt]===0;At.pop(),vt--);if(vt<0)At=[He=0];else{for(He=-1;At[0]===0;At.splice(0,1),He-=mr);for(vt=1,ht=At[0];ht>=10;ht/=10,vt++);vt<mr&&(He-=mr-vt)}return Tt.e=He,Tt.c=At,Tt}}(),et.sum=function(){for(var be=1,ke=arguments,Fe=new et(ke[0]);be<ke.length;)Fe=Fe.plus(ke[be++]);return Fe},_=function(){var be="0123456789";function ke(Fe,Re,Ue,He){for(var ct,ht=[0],vt,At=0,Tt=Fe.length;At<Tt;){for(vt=ht.length;vt--;ht[vt]*=Re);for(ht[0]+=He.indexOf(Fe.charAt(At++)),ct=0;ct<ht.length;ct++)ht[ct]>Ue-1&&(ht[ct+1]==null&&(ht[ct+1]=0),ht[ct+1]+=ht[ct]/Ue|0,ht[ct]%=Ue)}return ht.reverse()}return function(Fe,Re,Ue,He,ct){var ht,vt,At,Tt,an,Gn,Kn,ar,_i=Fe.indexOf("."),Bi=ne,ri=oe;for(_i>=0&&(Tt=Qt,Qt=0,Fe=Fe.replace(".",""),ar=new et(Re),Gn=ar.pow(Fe.length-_i),Qt=Tt,ar.c=ke(G(Ws(Gn.c),Gn.e,"0"),10,Ue,be),ar.e=ar.c.length),Kn=ke(Fe,Re,Ue,ct?(ht=Tn,be):(ht=be,Tn)),At=Tt=Kn.length;Kn[--Tt]==0;Kn.pop());if(!Kn[0])return ht.charAt(0);if(_i<0?--At:(Gn.c=Kn,Gn.e=At,Gn.s=He,Gn=g(Gn,ar,Bi,ri,Ue),Kn=Gn.c,an=Gn.r,At=Gn.e),vt=At+Bi+1,_i=Kn[vt],Tt=Ue/2,an=an||vt<0||Kn[vt+1]!=null,an=ri<4?(_i!=null||an)&&(ri==0||ri==(Gn.s<0?3:2)):_i>Tt||_i==Tt&&(ri==4||an||ri==6&&Kn[vt-1]&1||ri==(Gn.s<0?8:7)),vt<1||!Kn[0])Fe=an?G(ht.charAt(1),-Bi,ht.charAt(0)):ht.charAt(0);else{if(Kn.length=vt,an)for(--Ue;++Kn[--vt]>Ue;)Kn[vt]=0,vt||(++At,Kn=[1].concat(Kn));for(Tt=Kn.length;!Kn[--Tt];);for(_i=0,Fe="";_i<=Tt;Fe+=ht.charAt(Kn[_i++]));Fe=G(Fe,At,ht.charAt(0))}return Fe}}(),g=function(){function be(Re,Ue,He){var ct,ht,vt,At,Tt=0,an=Re.length,Gn=Ue%ba,Kn=Ue/ba|0;for(Re=Re.slice();an--;)vt=Re[an]%ba,At=Re[an]/ba|0,ct=Kn*vt+At*Gn,ht=Gn*vt+ct%ba*ba+Tt,Tt=(ht/He|0)+(ct/ba|0)+Kn*At,Re[an]=ht%He;return Tt&&(Re=[Tt].concat(Re)),Re}function ke(Re,Ue,He,ct){var ht,vt;if(He!=ct)vt=He>ct?1:-1;else for(ht=vt=0;ht<He;ht++)if(Re[ht]!=Ue[ht]){vt=Re[ht]>Ue[ht]?1:-1;break}return vt}function Fe(Re,Ue,He,ct){for(var ht=0;He--;)Re[He]-=ht,ht=Re[He]<Ue[He]?1:0,Re[He]=ht*ct+Re[He]-Ue[He];for(;!Re[0]&&Re.length>1;Re.splice(0,1));}return function(Re,Ue,He,ct,ht){var vt,At,Tt,an,Gn,Kn,ar,_i,Bi,ri,Hi,Fo,nc,Fa,Id,wl,Dc,ja=Re.s==Ue.s?1:-1,lo=Re.c,ws=Ue.c;if(!lo||!lo[0]||!ws||!ws[0])return new et(!Re.s||!Ue.s||(lo?ws&&lo[0]==ws[0]:!ws)?NaN:lo&&lo[0]==0||!ws?ja*0:ja/0);for(_i=new et(ja),Bi=_i.c=[],At=Re.e-Ue.e,ja=He+At+1,ht||(ht=Io,At=Hs(Re.e/mr)-Hs(Ue.e/mr),ja=ja/mr|0),Tt=0;ws[Tt]==(lo[Tt]||0);Tt++);if(ws[Tt]>(lo[Tt]||0)&&At--,ja<0)Bi.push(1),an=!0;else{for(Fa=lo.length,wl=ws.length,Tt=0,ja+=2,Gn=Ps(ht/(ws[0]+1)),Gn>1&&(ws=be(ws,Gn,ht),lo=be(lo,Gn,ht),wl=ws.length,Fa=lo.length),nc=wl,ri=lo.slice(0,wl),Hi=ri.length;Hi<wl;ri[Hi++]=0);Dc=ws.slice(),Dc=[0].concat(Dc),Id=ws[0],ws[1]>=ht/2&&Id++;do{if(Gn=0,vt=ke(ws,ri,wl,Hi),vt<0){if(Fo=ri[0],wl!=Hi&&(Fo=Fo*ht+(ri[1]||0)),Gn=Ps(Fo/Id),Gn>1)for(Gn>=ht&&(Gn=ht-1),Kn=be(ws,Gn,ht),ar=Kn.length,Hi=ri.length;ke(Kn,ri,ar,Hi)==1;)Gn--,Fe(Kn,wl<ar?Dc:ws,ar,ht),ar=Kn.length,vt=1;else Gn==0&&(vt=Gn=1),Kn=ws.slice(),ar=Kn.length;if(ar<Hi&&(Kn=[0].concat(Kn)),Fe(ri,Kn,Hi,ht),Hi=ri.length,vt==-1)for(;ke(ws,ri,wl,Hi)<1;)Gn++,Fe(ri,wl<Hi?Dc:ws,Hi,ht),Hi=ri.length}else vt===0&&(Gn++,ri=[0]);Bi[Tt++]=Gn,ri[0]?ri[Hi++]=lo[nc]||0:(ri=[lo[nc]],Hi=1)}while((nc++<Fa||ri[0]!=null)&&ja--);an=ri[0]!=null,Bi[0]||Bi.splice(0,1)}if(ht==Io){for(Tt=1,ja=Bi[0];ja>=10;ja/=10,Tt++);Pt(_i,He+(_i.e=Tt+At*mr-1)+1,ct,an)}else _i.e=At,_i.r=+an;return _i}}();function st(be,ke,Fe,Re){var Ue,He,ct,ht,vt;if(Fe==null?Fe=oe:u(Fe,0,8),!be.c)return be.toString();if(Ue=be.c[0],ct=be.e,ke==null)vt=Ws(be.c),vt=Re==1||Re==2&&(ct<=ye||ct>=Ee)?P(vt,ct):G(vt,ct,"0");else if(be=Pt(new et(be),ke,Fe),He=be.e,vt=Ws(be.c),ht=vt.length,Re==1||Re==2&&(ke<=He||He<=ye)){for(;ht<ke;vt+="0",ht++);vt=P(vt,He)}else if(ke-=ct,vt=G(vt,He,"0"),He+1>ht){if(--ke>0)for(vt+=".";ke--;vt+="0");}else if(ke+=He-ht,ke>0)for(He+1==ht&&(vt+=".");ke--;vt+="0");return be.s<0&&Ue?"-"+vt:vt}function pt(be,ke){for(var Fe,Re,Ue=1,He=new et(be[0]);Ue<be.length;Ue++)Re=new et(be[Ue]),(!Re.s||(Fe=_a(He,Re))===ke||Fe===0&&He.s===ke)&&(He=Re);return He}function zt(be,ke,Fe){for(var Re=1,Ue=ke.length;!ke[--Ue];ke.pop());for(Ue=ke[0];Ue>=10;Ue/=10,Re++);return(Fe=Re+Fe*mr-1)>We?be.c=be.e=null:Fe<tt?be.c=[be.e=0]:(be.e=Fe,be.c=ke),be}S=function(){var be=/^(-?)0([xbo])(?=\w[\w.]*$)/i,ke=/^([^.]+)\.$/,Fe=/^\.([^.]+)$/,Re=/^-?(Infinity|NaN)$/,Ue=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(He,ct,ht,vt){var At,Tt=ht?ct:ct.replace(Ue,"");if(Re.test(Tt))He.s=isNaN(Tt)?null:Tt<0?-1:1;else{if(!ht&&(Tt=Tt.replace(be,function(an,Gn,Kn){return At=(Kn=Kn.toLowerCase())=="x"?16:Kn=="b"?2:8,!vt||vt==At?Gn:an}),vt&&(At=vt,Tt=Tt.replace(ke,"$1").replace(Fe,"0.$1")),ct!=Tt))return new et(Tt,At);if(et.DEBUG)throw Error(Vi+"Not a"+(vt?" base "+vt:"")+" number: "+ct);He.s=null}He.c=He.e=null}}();function Pt(be,ke,Fe,Re){var Ue,He,ct,ht,vt,At,Tt,an=be.c,Gn=Ja;if(an){e:{for(Ue=1,ht=an[0];ht>=10;ht/=10,Ue++);if(He=ke-Ue,He<0)He+=mr,ct=ke,vt=an[At=0],Tt=Ps(vt/Gn[Ue-ct-1]%10);else if(At=Ba((He+1)/mr),At>=an.length)if(Re){for(;an.length<=At;an.push(0));vt=Tt=0,Ue=1,He%=mr,ct=He-mr+1}else break e;else{for(vt=ht=an[At],Ue=1;ht>=10;ht/=10,Ue++);He%=mr,ct=He-mr+Ue,Tt=ct<0?0:Ps(vt/Gn[Ue-ct-1]%10)}if(Re=Re||ke<0||an[At+1]!=null||(ct<0?vt:vt%Gn[Ue-ct-1]),Re=Fe<4?(Tt||Re)&&(Fe==0||Fe==(be.s<0?3:2)):Tt>5||Tt==5&&(Fe==4||Re||Fe==6&&(He>0?ct>0?vt/Gn[Ue-ct]:0:an[At-1])%10&1||Fe==(be.s<0?8:7)),ke<1||!an[0])return an.length=0,Re?(ke-=be.e+1,an[0]=Gn[(mr-ke%mr)%mr],be.e=-ke||0):an[0]=be.e=0,be;if(He==0?(an.length=At,ht=1,At--):(an.length=At+1,ht=Gn[mr-He],an[At]=ct>0?Ps(vt/Gn[Ue-ct]%Gn[ct])*ht:0),Re)for(;;)if(At==0){for(He=1,ct=an[0];ct>=10;ct/=10,He++);for(ct=an[0]+=ht,ht=1;ct>=10;ct/=10,ht++);He!=ht&&(be.e++,an[0]==Io&&(an[0]=1));break}else{if(an[At]+=ht,an[At]!=Io)break;an[At--]=0,ht=1}for(He=an.length;an[--He]===0;an.pop());}be.e>We?be.c=be.e=null:be.e<tt&&(be.c=[be.e=0])}return be}function Rt(be){var ke,Fe=be.e;return Fe===null?be.toString():(ke=Ws(be.c),ke=Fe<=ye||Fe>=Ee?P(ke,Fe):G(ke,Fe,"0"),be.s<0?"-"+ke:ke)}return M.absoluteValue=M.abs=function(){var be=new et(this);return be.s<0&&(be.s=1),be},M.comparedTo=function(be,ke){return _a(this,new et(be,ke))},M.decimalPlaces=M.dp=function(be,ke){var Fe,Re,Ue,He=this;if(be!=null)return u(be,0,_o),ke==null?ke=oe:u(ke,0,8),Pt(new et(He),be+He.e+1,ke);if(!(Fe=He.c))return null;if(Re=((Ue=Fe.length-1)-Hs(this.e/mr))*mr,Ue=Fe[Ue])for(;Ue%10==0;Ue/=10,Re--);return Re<0&&(Re=0),Re},M.dividedBy=M.div=function(be,ke){return g(this,new et(be,ke),ne,oe)},M.dividedToIntegerBy=M.idiv=function(be,ke){return g(this,new et(be,ke),0,1)},M.exponentiatedBy=M.pow=function(be,ke){var Fe,Re,Ue,He,ct,ht,vt,At,Tt,an=this;if(be=new et(be),be.c&&!be.isInteger())throw Error(Vi+"Exponent not an integer: "+Rt(be));if(ke!=null&&(ke=new et(ke)),ht=be.e>14,!an.c||!an.c[0]||an.c[0]==1&&!an.e&&an.c.length==1||!be.c||!be.c[0])return Tt=new et(Math.pow(+Rt(an),ht?be.s*(2-y(be)):+Rt(be))),ke?Tt.mod(ke):Tt;if(vt=be.s<0,ke){if(ke.c?!ke.c[0]:!ke.s)return new et(NaN);Re=!vt&&an.isInteger()&&ke.isInteger(),Re&&(an=an.mod(ke))}else{if(be.e>9&&(an.e>0||an.e<-1||(an.e==0?an.c[0]>1||ht&&an.c[1]>=24e7:an.c[0]<8e13||ht&&an.c[0]<=9999975e7)))return He=an.s<0&&y(be)?-0:0,an.e>-1&&(He=1/He),new et(vt?1/He:He);Qt&&(He=Ba(Qt/mr+2))}for(ht?(Fe=new et(.5),vt&&(be.s=1),At=y(be)):(Ue=Math.abs(+Rt(be)),At=Ue%2),Tt=new et(W);;){if(At){if(Tt=Tt.times(an),!Tt.c)break;He?Tt.c.length>He&&(Tt.c.length=He):Re&&(Tt=Tt.mod(ke))}if(Ue){if(Ue=Ps(Ue/2),Ue===0)break;At=Ue%2}else if(be=be.times(Fe),Pt(be,be.e+1,1),be.e>14)At=y(be);else{if(Ue=+Rt(be),Ue===0)break;At=Ue%2}an=an.times(an),He?an.c&&an.c.length>He&&(an.c.length=He):Re&&(an=an.mod(ke))}return Re?Tt:(vt&&(Tt=W.div(Tt)),ke?Tt.mod(ke):He?Pt(Tt,Qt,oe,ct):Tt)},M.integerValue=function(be){var ke=new et(this);return be==null?be=oe:u(be,0,8),Pt(ke,ke.e+1,be)},M.isEqualTo=M.eq=function(be,ke){return _a(this,new et(be,ke))===0},M.isFinite=function(){return!!this.c},M.isGreaterThan=M.gt=function(be,ke){return _a(this,new et(be,ke))>0},M.isGreaterThanOrEqualTo=M.gte=function(be,ke){return(ke=_a(this,new et(be,ke)))===1||ke===0},M.isInteger=function(){return!!this.c&&Hs(this.e/mr)>this.c.length-2},M.isLessThan=M.lt=function(be,ke){return _a(this,new et(be,ke))<0},M.isLessThanOrEqualTo=M.lte=function(be,ke){return(ke=_a(this,new et(be,ke)))===-1||ke===0},M.isNaN=function(){return!this.s},M.isNegative=function(){return this.s<0},M.isPositive=function(){return this.s>0},M.isZero=function(){return!!this.c&&this.c[0]==0},M.minus=function(be,ke){var Fe,Re,Ue,He,ct=this,ht=ct.s;if(be=new et(be,ke),ke=be.s,!ht||!ke)return new et(NaN);if(ht!=ke)return be.s=-ke,ct.plus(be);var vt=ct.e/mr,At=be.e/mr,Tt=ct.c,an=be.c;if(!vt||!At){if(!Tt||!an)return Tt?(be.s=-ke,be):new et(an?ct:NaN);if(!Tt[0]||!an[0])return an[0]?(be.s=-ke,be):new et(Tt[0]?ct:oe==3?-0:0)}if(vt=Hs(vt),At=Hs(At),Tt=Tt.slice(),ht=vt-At){for((He=ht<0)?(ht=-ht,Ue=Tt):(At=vt,Ue=an),Ue.reverse(),ke=ht;ke--;Ue.push(0));Ue.reverse()}else for(Re=(He=(ht=Tt.length)<(ke=an.length))?ht:ke,ht=ke=0;ke<Re;ke++)if(Tt[ke]!=an[ke]){He=Tt[ke]<an[ke];break}if(He&&(Ue=Tt,Tt=an,an=Ue,be.s=-be.s),ke=(Re=an.length)-(Fe=Tt.length),ke>0)for(;ke--;Tt[Fe++]=0);for(ke=Io-1;Re>ht;){if(Tt[--Re]<an[Re]){for(Fe=Re;Fe&&!Tt[--Fe];Tt[Fe]=ke);--Tt[Fe],Tt[Re]+=Io}Tt[Re]-=an[Re]}for(;Tt[0]==0;Tt.splice(0,1),--At);return Tt[0]?zt(be,Tt,At):(be.s=oe==3?-1:1,be.c=[be.e=0],be)},M.modulo=M.mod=function(be,ke){var Fe,Re,Ue=this;return be=new et(be,ke),!Ue.c||!be.s||be.c&&!be.c[0]?new et(NaN):!be.c||Ue.c&&!Ue.c[0]?new et(Ue):(Bt==9?(Re=be.s,be.s=1,Fe=g(Ue,be,0,3),be.s=Re,Fe.s*=Re):Fe=g(Ue,be,0,Bt),be=Ue.minus(Fe.times(be)),!be.c[0]&&Bt==1&&(be.s=Ue.s),be)},M.multipliedBy=M.times=function(be,ke){var Fe,Re,Ue,He,ct,ht,vt,At,Tt,an,Gn,Kn,ar,_i,Bi,ri=this,Hi=ri.c,Fo=(be=new et(be,ke)).c;if(!Hi||!Fo||!Hi[0]||!Fo[0])return!ri.s||!be.s||Hi&&!Hi[0]&&!Fo||Fo&&!Fo[0]&&!Hi?be.c=be.e=be.s=null:(be.s*=ri.s,!Hi||!Fo?be.c=be.e=null:(be.c=[0],be.e=0)),be;for(Re=Hs(ri.e/mr)+Hs(be.e/mr),be.s*=ri.s,vt=Hi.length,an=Fo.length,vt<an&&(ar=Hi,Hi=Fo,Fo=ar,Ue=vt,vt=an,an=Ue),Ue=vt+an,ar=[];Ue--;ar.push(0));for(_i=Io,Bi=ba,Ue=an;--Ue>=0;){for(Fe=0,Gn=Fo[Ue]%Bi,Kn=Fo[Ue]/Bi|0,ct=vt,He=Ue+ct;He>Ue;)At=Hi[--ct]%Bi,Tt=Hi[ct]/Bi|0,ht=Kn*At+Tt*Gn,At=Gn*At+ht%Bi*Bi+ar[He]+Fe,Fe=(At/_i|0)+(ht/Bi|0)+Kn*Tt,ar[He--]=At%_i;ar[He]=Fe}return Fe?++Re:ar.splice(0,1),zt(be,ar,Re)},M.negated=function(){var be=new et(this);return be.s=-be.s||null,be},M.plus=function(be,ke){var Fe,Re=this,Ue=Re.s;if(be=new et(be,ke),ke=be.s,!Ue||!ke)return new et(NaN);if(Ue!=ke)return be.s=-ke,Re.minus(be);var He=Re.e/mr,ct=be.e/mr,ht=Re.c,vt=be.c;if(!He||!ct){if(!ht||!vt)return new et(Ue/0);if(!ht[0]||!vt[0])return vt[0]?be:new et(ht[0]?Re:Ue*0)}if(He=Hs(He),ct=Hs(ct),ht=ht.slice(),Ue=He-ct){for(Ue>0?(ct=He,Fe=vt):(Ue=-Ue,Fe=ht),Fe.reverse();Ue--;Fe.push(0));Fe.reverse()}for(Ue=ht.length,ke=vt.length,Ue-ke<0&&(Fe=vt,vt=ht,ht=Fe,ke=Ue),Ue=0;ke;)Ue=(ht[--ke]=ht[ke]+vt[ke]+Ue)/Io|0,ht[ke]=Io===ht[ke]?0:ht[ke]%Io;return Ue&&(ht=[Ue].concat(ht),++ct),zt(be,ht,ct)},M.precision=M.sd=function(be,ke){var Fe,Re,Ue,He=this;if(be!=null&&be!==!!be)return u(be,1,_o),ke==null?ke=oe:u(ke,0,8),Pt(new et(He),be,ke);if(!(Fe=He.c))return null;if(Ue=Fe.length-1,Re=Ue*mr+1,Ue=Fe[Ue]){for(;Ue%10==0;Ue/=10,Re--);for(Ue=Fe[0];Ue>=10;Ue/=10,Re++);}return be&&He.e+1>Re&&(Re=He.e+1),Re},M.shiftedBy=function(be){return u(be,-9007199254740991,Xa),this.times("1e"+be)},M.squareRoot=M.sqrt=function(){var be,ke,Fe,Re,Ue,He=this,ct=He.c,ht=He.s,vt=He.e,At=ne+4,Tt=new et("0.5");if(ht!==1||!ct||!ct[0])return new et(!ht||ht<0&&(!ct||ct[0])?NaN:ct?He:1/0);if(ht=Math.sqrt(+Rt(He)),ht==0||ht==1/0?(ke=Ws(ct),(ke.length+vt)%2==0&&(ke+="0"),ht=Math.sqrt(+ke),vt=Hs((vt+1)/2)-(vt<0||vt%2),ht==1/0?ke="5e"+vt:(ke=ht.toExponential(),ke=ke.slice(0,ke.indexOf("e")+1)+vt),Fe=new et(ke)):Fe=new et(ht+""),Fe.c[0]){for(vt=Fe.e,ht=vt+At,ht<3&&(ht=0);;)if(Ue=Fe,Fe=Tt.times(Ue.plus(g(He,Ue,At,1))),Ws(Ue.c).slice(0,ht)===(ke=Ws(Fe.c)).slice(0,ht))if(Fe.e<vt&&--ht,ke=ke.slice(ht-3,ht+1),ke=="9999"||!Re&&ke=="4999"){if(!Re&&(Pt(Ue,Ue.e+ne+2,0),Ue.times(Ue).eq(He))){Fe=Ue;break}At+=4,ht+=4,Re=1}else{(!+ke||!+ke.slice(1)&&ke.charAt(0)=="5")&&(Pt(Fe,Fe.e+ne+2,1),be=!Fe.times(Fe).eq(He));break}}return Pt(Fe,Fe.e+ne+1,oe,be)},M.toExponential=function(be,ke){return be!=null&&(u(be,0,_o),be++),st(this,be,ke,1)},M.toFixed=function(be,ke){return be!=null&&(u(be,0,_o),be=be+this.e+1),st(this,be,ke)},M.toFormat=function(be,ke,Fe){var Re,Ue=this;if(Fe==null)be!=null&&ke&&typeof ke=="object"?(Fe=ke,ke=null):be&&typeof be=="object"?(Fe=be,be=ke=null):Fe=xn;else if(typeof Fe!="object")throw Error(Vi+"Argument not an object: "+Fe);if(Re=Ue.toFixed(be,ke),Ue.c){var He,ct=Re.split("."),ht=+Fe.groupSize,vt=+Fe.secondaryGroupSize,At=Fe.groupSeparator||"",Tt=ct[0],an=ct[1],Gn=Ue.s<0,Kn=Gn?Tt.slice(1):Tt,ar=Kn.length;if(vt&&(He=ht,ht=vt,vt=He,ar-=He),ht>0&&ar>0){for(He=ar%ht||ht,Tt=Kn.substr(0,He);He<ar;He+=ht)Tt+=At+Kn.substr(He,ht);vt>0&&(Tt+=At+Kn.slice(He)),Gn&&(Tt="-"+Tt)}Re=an?Tt+(Fe.decimalSeparator||"")+((vt=+Fe.fractionGroupSize)?an.replace(new RegExp("\\d{"+vt+"}\\B","g"),"$&"+(Fe.fractionGroupSeparator||"")):an):Tt}return(Fe.prefix||"")+Re+(Fe.suffix||"")},M.toFraction=function(be){var ke,Fe,Re,Ue,He,ct,ht,vt,At,Tt,an,Gn,Kn=this,ar=Kn.c;if(be!=null&&(ht=new et(be),!ht.isInteger()&&(ht.c||ht.s!==1)||ht.lt(W)))throw Error(Vi+"Argument "+(ht.isInteger()?"out of range: ":"not an integer: ")+Rt(ht));if(!ar)return new et(Kn);for(ke=new et(W),At=Fe=new et(W),Re=vt=new et(W),Gn=Ws(ar),He=ke.e=Gn.length-Kn.e-1,ke.c[0]=Ja[(ct=He%mr)<0?mr+ct:ct],be=!be||ht.comparedTo(ke)>0?He>0?ke:At:ht,ct=We,We=1/0,ht=new et(Gn),vt.c[0]=0;Tt=g(ht,ke,0,1),Ue=Fe.plus(Tt.times(Re)),Ue.comparedTo(be)!=1;)Fe=Re,Re=Ue,At=vt.plus(Tt.times(Ue=At)),vt=Ue,ke=ht.minus(Tt.times(Ue=ke)),ht=Ue;return Ue=g(be.minus(Fe),Re,0,1),vt=vt.plus(Ue.times(At)),Fe=Fe.plus(Ue.times(Re)),vt.s=At.s=Kn.s,He=He*2,an=g(At,Re,He,oe).minus(Kn).abs().comparedTo(g(vt,Fe,He,oe).minus(Kn).abs())<1?[At,Re]:[vt,Fe],We=ct,an},M.toNumber=function(){return+Rt(this)},M.toPrecision=function(be,ke){return be!=null&&u(be,1,_o),st(this,be,ke,2)},M.toString=function(be){var ke,Fe=this,Re=Fe.s,Ue=Fe.e;return Ue===null?Re?(ke="Infinity",Re<0&&(ke="-"+ke)):ke="NaN":(be==null?ke=Ue<=ye||Ue>=Ee?P(Ws(Fe.c),Ue):G(Ws(Fe.c),Ue,"0"):be===10&&pr?(Fe=Pt(new et(Fe),ne+Ue+1,oe),ke=G(Ws(Fe.c),Fe.e,"0")):(u(be,2,Tn.length,"Base"),ke=_(G(Ws(Fe.c),Ue,"0"),10,be,Re,!0)),Re<0&&Fe.c[0]&&(ke="-"+ke)),ke},M.valueOf=M.toJSON=function(){return Rt(this)},M._isBigNumber=!0,M[Symbol.toStringTag]="BigNumber",M[Symbol.for("nodejs.util.inspect.custom")]=M.valueOf,h!=null&&et.set(h),et}function Hs(h){var g=h|0;return h>0||h===g?g:g-1}function Ws(h){for(var g,_,S=1,M=h.length,W=h[0]+"";S<M;){for(g=h[S++]+"",_=mr-g.length;_--;g="0"+g);W+=g}for(M=W.length;W.charCodeAt(--M)===48;);return W.slice(0,M+1||1)}function _a(h,g){var _,S,M=h.c,W=g.c,ne=h.s,oe=g.s,ye=h.e,Ee=g.e;if(!ne||!oe)return null;if(_=M&&!M[0],S=W&&!W[0],_||S)return _?S?0:-oe:ne;if(ne!=oe)return ne;if(_=ne<0,S=ye==Ee,!M||!W)return S?0:!M^_?1:-1;if(!S)return ye>Ee^_?1:-1;for(oe=(ye=M.length)<(Ee=W.length)?ye:Ee,ne=0;ne<oe;ne++)if(M[ne]!=W[ne])return M[ne]>W[ne]^_?1:-1;return ye==Ee?0:ye>Ee^_?1:-1}function u(h,g,_,S){if(h<g||h>_||h!==Ps(h))throw Error(Vi+(S||"Argument")+(typeof h=="number"?h<g||h>_?" out of range: ":" not an integer: ":" not a primitive number: ")+String(h))}function y(h){var g=h.c.length-1;return Hs(h.e/mr)==g&&h.c[g]%2!=0}function P(h,g){return(h.length>1?h.charAt(0)+"."+h.slice(1):h)+(g<0?"e":"e+")+g}function G(h,g,_){var S,M;if(g<0){for(M=_+".";++g;M+=_);h=M+h}else if(S=h.length,++g>S){for(M=_,g-=S;--g;M+=_);h+=M}else g<S&&(h=h.slice(0,g)+"."+h.slice(g));return h}var ue=ih(),Pe=ue,ut=class{constructor(h){Ze(this,"key");Ze(this,"left",null);Ze(this,"right",null);this.key=h}},Nt=class extends ut{constructor(h){super(h)}},Ht=class{constructor(){Ze(this,"size",0);Ze(this,"modificationCount",0);Ze(this,"splayCount",0)}splay(h){let g=this.root;if(g==null)return this.compare(h,h),-1;let _=null,S=null,M=null,W=null,ne=g,oe=this.compare,ye;for(;;)if(ye=oe(ne.key,h),ye>0){let Ee=ne.left;if(Ee==null||(ye=oe(Ee.key,h),ye>0&&(ne.left=Ee.right,Ee.right=ne,ne=Ee,Ee=ne.left,Ee==null)))break;_==null?S=ne:_.left=ne,_=ne,ne=Ee}else if(ye<0){let Ee=ne.right;if(Ee==null||(ye=oe(Ee.key,h),ye<0&&(ne.right=Ee.left,Ee.left=ne,ne=Ee,Ee=ne.right,Ee==null)))break;M==null?W=ne:M.right=ne,M=ne,ne=Ee}else break;return M!=null&&(M.right=ne.left,ne.left=W),_!=null&&(_.left=ne.right,ne.right=S),this.root!==ne&&(this.root=ne,this.splayCount++),ye}splayMin(h){let g=h,_=g.left;for(;_!=null;){let S=_;g.left=S.right,S.right=g,g=S,_=g.left}return g}splayMax(h){let g=h,_=g.right;for(;_!=null;){let S=_;g.right=S.left,S.left=g,g=S,_=g.right}return g}_delete(h){if(this.root==null||this.splay(h)!=0)return null;let g=this.root,_=g,S=g.left;if(this.size--,S==null)this.root=g.right;else{let M=g.right;g=this.splayMax(S),g.right=M,this.root=g}return this.modificationCount++,_}addNewRoot(h,g){this.size++,this.modificationCount++;let _=this.root;if(_==null){this.root=h;return}g<0?(h.left=_,h.right=_.right,_.right=null):(h.right=_,h.left=_.left,_.left=null),this.root=h}_first(){let h=this.root;return h==null?null:(this.root=this.splayMin(h),this.root)}_last(){let h=this.root;return h==null?null:(this.root=this.splayMax(h),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(h){return this.validKey(h)&&this.splay(h)==0}defaultCompare(){return(h,g)=>h<g?-1:h>g?1:0}wrap(){return{getRoot:()=>this.root,setRoot:h=>{this.root=h},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:h=>{this.splayCount=h},splay:h=>this.splay(h),has:h=>this.has(h)}}},hn=class Lg extends Ht{constructor(_,S){super();Ze(this,"root",null);Ze(this,"compare");Ze(this,"validKey");Ze(this,Bn,"[object Set]");this.compare=_??this.defaultCompare(),this.validKey=S??(M=>M!=null&&M!=null)}delete(_){return this.validKey(_)?this._delete(_)!=null:!1}deleteAll(_){for(let S of _)this.delete(S)}forEach(_){let S=this[Symbol.iterator](),M;for(;M=S.next(),!M.done;)_(M.value,M.value,this)}add(_){let S=this.splay(_);return S!=0&&this.addNewRoot(new Nt(_),S),this}addAndReturn(_){let S=this.splay(_);return S!=0&&this.addNewRoot(new Nt(_),S),this.root.key}addAll(_){for(let S of _)this.add(S)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)<0)return this.root.key;let S=this.root.left;if(S==null)return null;let M=S.right;for(;M!=null;)S=M,M=S.right;return S.key}firstAfter(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)>0)return this.root.key;let S=this.root.right;if(S==null)return null;let M=S.left;for(;M!=null;)S=M,M=S.left;return S.key}retainAll(_){let S=new Lg(this.compare,this.validKey),M=this.modificationCount;for(let W of _){if(M!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(W)&&this.splay(W)==0&&S.add(this.root.key)}S.size!=this.size&&(this.root=S.root,this.size=S.size,this.modificationCount++)}lookup(_){return!this.validKey(_)||this.splay(_)!=0?null:this.root.key}intersection(_){let S=new Lg(this.compare,this.validKey);for(let M of this)_.has(M)&&S.add(M);return S}difference(_){let S=new Lg(this.compare,this.validKey);for(let M of this)_.has(M)||S.add(M);return S}union(_){let S=this.clone();return S.addAll(_),S}clone(){let _=new Lg(this.compare,this.validKey);return _.size=this.size,_.root=this.copyNode(this.root),_}copyNode(_){if(_==null)return null;function S(W,ne){let oe,ye;do{if(oe=W.left,ye=W.right,oe!=null){let Ee=new Nt(oe.key);ne.left=Ee,S(oe,Ee)}if(ye!=null){let Ee=new Nt(ye.key);ne.right=Ee,W=ye,ne=Ee}}while(ye!=null)}let M=new Nt(_.key);return S(_,M),M}toSet(){return this.clone()}entries(){return new jr(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(or=Symbol.iterator,Bn=Symbol.toStringTag,or)](){return new sr(this.wrap())}},$n=class{constructor(h){Ze(this,"tree");Ze(this,"path",new Array);Ze(this,"modificationCount",null);Ze(this,"splayCount");this.tree=h,this.splayCount=h.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let h=this.path[this.path.length-1];return this.getValue(h)}rebuildPath(h){this.path.splice(0,this.path.length),this.tree.splay(h),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(h){for(;h!=null;)this.path.push(h),h=h.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let _=this.tree.getRoot();for(;_!=null;)this.path.push(_),_=_.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let h=this.path[this.path.length-1],g=h.right;if(g!=null){for(;g!=null;)this.path.push(g),g=g.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===h;)h=this.path.pop();return this.path.length>0}},sr=class extends $n{getValue(h){return h.key}},jr=class extends $n{getValue(h){return[h.key,h.key]}},Ms=h=>h,cs=h=>{if(h){let g=new hn(No(h)),_=new hn(No(h)),S=(W,ne)=>ne.addAndReturn(W),M=W=>({x:S(W.x,g),y:S(W.y,_)});return M({x:new Pe(0),y:new Pe(0)}),M}return Ms},Gs=h=>({set:g=>{es=Gs(g)},reset:()=>Gs(h),compare:No(h),snap:cs(h),orient:aa(h)}),es=Gs(),Bo=(h,g)=>h.ll.x.isLessThanOrEqualTo(g.x)&&g.x.isLessThanOrEqualTo(h.ur.x)&&h.ll.y.isLessThanOrEqualTo(g.y)&&g.y.isLessThanOrEqualTo(h.ur.y),sh=(h,g)=>{if(g.ur.x.isLessThan(h.ll.x)||h.ur.x.isLessThan(g.ll.x)||g.ur.y.isLessThan(h.ll.y)||h.ur.y.isLessThan(g.ll.y))return null;let _=h.ll.x.isLessThan(g.ll.x)?g.ll.x:h.ll.x,S=h.ur.x.isLessThan(g.ur.x)?h.ur.x:g.ur.x,M=h.ll.y.isLessThan(g.ll.y)?g.ll.y:h.ll.y,W=h.ur.y.isLessThan(g.ur.y)?h.ur.y:g.ur.y;return{ll:{x:_,y:M},ur:{x:S,y:W}}},Ra=(h,g)=>h.x.times(g.y).minus(h.y.times(g.x)),wa=(h,g)=>h.x.times(g.x).plus(h.y.times(g.y)),la=h=>wa(h,h).sqrt(),Od=(h,g,_)=>{let S={x:g.x.minus(h.x),y:g.y.minus(h.y)},M={x:_.x.minus(h.x),y:_.y.minus(h.y)};return Ra(M,S).div(la(M)).div(la(S))},Du=(h,g,_)=>{let S={x:g.x.minus(h.x),y:g.y.minus(h.y)},M={x:_.x.minus(h.x),y:_.y.minus(h.y)};return wa(M,S).div(la(M)).div(la(S))},bi=(h,g,_)=>g.y.isZero()?null:{x:h.x.plus(g.x.div(g.y).times(_.minus(h.y))),y:_},ao=(h,g,_)=>g.x.isZero()?null:{x:_,y:h.y.plus(g.y.div(g.x).times(_.minus(h.x)))},Ne=(h,g,_,S)=>{if(g.x.isZero())return ao(_,S,h.x);if(S.x.isZero())return ao(h,g,_.x);if(g.y.isZero())return bi(_,S,h.y);if(S.y.isZero())return bi(h,g,_.y);let M=Ra(g,S);if(M.isZero())return null;let W={x:_.x.minus(h.x),y:_.y.minus(h.y)},ne=Ra(W,g).div(M),oe=Ra(W,S).div(M),ye=h.x.plus(oe.times(g.x)),Ee=_.x.plus(ne.times(S.x)),tt=h.y.plus(oe.times(g.y)),We=_.y.plus(ne.times(S.y)),_t=ye.plus(Ee).div(2),Bt=tt.plus(We).div(2);return{x:_t,y:Bt}},Ro=class FE{constructor(g,_){Ze(this,"point");Ze(this,"isLeft");Ze(this,"segment");Ze(this,"otherSE");Ze(this,"consumedBy");g.events===void 0?g.events=[this]:g.events.push(this),this.point=g,this.isLeft=_}static compare(g,_){let S=FE.comparePoints(g.point,_.point);return S!==0?S:(g.point!==_.point&&g.link(_),g.isLeft!==_.isLeft?g.isLeft?1:-1:qs.compare(g.segment,_.segment))}static comparePoints(g,_){return g.x.isLessThan(_.x)?-1:g.x.isGreaterThan(_.x)?1:g.y.isLessThan(_.y)?-1:g.y.isGreaterThan(_.y)?1:0}link(g){if(g.point===this.point)throw new Error("Tried to link already linked events");let _=g.point.events;for(let S=0,M=_.length;S<M;S++){let W=_[S];this.point.events.push(W),W.point=this.point}this.checkForConsuming()}checkForConsuming(){let g=this.point.events.length;for(let _=0;_<g;_++){let S=this.point.events[_];if(S.segment.consumedBy===void 0)for(let M=_+1;M<g;M++){let W=this.point.events[M];W.consumedBy===void 0&&S.otherSE.point.events===W.otherSE.point.events&&S.segment.consume(W.segment)}}}getAvailableLinkedEvents(){let g=[];for(let _=0,S=this.point.events.length;_<S;_++){let M=this.point.events[_];M!==this&&!M.segment.ringOut&&M.segment.isInResult()&&g.push(M)}return g}getLeftmostComparator(g){let _=new Map,S=M=>{let W=M.otherSE;_.set(M,{sine:Od(this.point,g.point,W.point),cosine:Du(this.point,g.point,W.point)})};return(M,W)=>{_.has(M)||S(M),_.has(W)||S(W);let{sine:ne,cosine:oe}=_.get(M),{sine:ye,cosine:Ee}=_.get(W);return ne.isGreaterThanOrEqualTo(0)&&ye.isGreaterThanOrEqualTo(0)?oe.isLessThan(Ee)?1:oe.isGreaterThan(Ee)?-1:0:ne.isLessThan(0)&&ye.isLessThan(0)?oe.isLessThan(Ee)?-1:oe.isGreaterThan(Ee)?1:0:ye.isLessThan(ne)?-1:ye.isGreaterThan(ne)?1:0}}},tc=0,qs=class sv{constructor(g,_,S,M){Ze(this,"id");Ze(this,"leftSE");Ze(this,"rightSE");Ze(this,"rings");Ze(this,"windings");Ze(this,"ringOut");Ze(this,"consumedBy");Ze(this,"prev");Ze(this,"_prevInResult");Ze(this,"_beforeState");Ze(this,"_afterState");Ze(this,"_isInResult");this.id=++tc,this.leftSE=g,g.segment=this,g.otherSE=_,this.rightSE=_,_.segment=this,_.otherSE=g,this.rings=S,this.windings=M}static compare(g,_){let S=g.leftSE.point.x,M=_.leftSE.point.x,W=g.rightSE.point.x,ne=_.rightSE.point.x;if(ne.isLessThan(S))return 1;if(W.isLessThan(M))return-1;let oe=g.leftSE.point.y,ye=_.leftSE.point.y,Ee=g.rightSE.point.y,tt=_.rightSE.point.y;if(S.isLessThan(M)){if(ye.isLessThan(oe)&&ye.isLessThan(Ee))return 1;if(ye.isGreaterThan(oe)&&ye.isGreaterThan(Ee))return-1;let We=g.comparePoint(_.leftSE.point);if(We<0)return 1;if(We>0)return-1;let _t=_.comparePoint(g.rightSE.point);return _t!==0?_t:-1}if(S.isGreaterThan(M)){if(oe.isLessThan(ye)&&oe.isLessThan(tt))return-1;if(oe.isGreaterThan(ye)&&oe.isGreaterThan(tt))return 1;let We=_.comparePoint(g.leftSE.point);if(We!==0)return We;let _t=g.comparePoint(_.rightSE.point);return _t<0?1:_t>0?-1:1}if(oe.isLessThan(ye))return-1;if(oe.isGreaterThan(ye))return 1;if(W.isLessThan(ne)){let We=_.comparePoint(g.rightSE.point);if(We!==0)return We}if(W.isGreaterThan(ne)){let We=g.comparePoint(_.rightSE.point);if(We<0)return 1;if(We>0)return-1}if(!W.eq(ne)){let We=Ee.minus(oe),_t=W.minus(S),Bt=tt.minus(ye),Qt=ne.minus(M);if(We.isGreaterThan(_t)&&Bt.isLessThan(Qt))return 1;if(We.isLessThan(_t)&&Bt.isGreaterThan(Qt))return-1}return W.isGreaterThan(ne)?1:W.isLessThan(ne)||Ee.isLessThan(tt)?-1:Ee.isGreaterThan(tt)?1:g.id<_.id?-1:g.id>_.id?1:0}static fromRing(g,_,S){let M,W,ne,oe=Ro.comparePoints(g,_);if(oe<0)M=g,W=_,ne=1;else if(oe>0)M=_,W=g,ne=-1;else throw new Error(`Tried to create degenerate segment at [${g.x}, ${g.y}]`);let ye=new Ro(M,!0),Ee=new Ro(W,!1);return new sv(ye,Ee,[S],[ne])}replaceRightSE(g){this.rightSE=g,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let g=this.leftSE.point.y,_=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:g.isLessThan(_)?g:_},ur:{x:this.rightSE.point.x,y:g.isGreaterThan(_)?g:_}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(g){return g.x.eq(this.leftSE.point.x)&&g.y.eq(this.leftSE.point.y)||g.x.eq(this.rightSE.point.x)&&g.y.eq(this.rightSE.point.y)}comparePoint(g){return es.orient(this.leftSE.point,g,this.rightSE.point)}getIntersection(g){let _=this.bbox(),S=g.bbox(),M=sh(_,S);if(M===null)return null;let W=this.leftSE.point,ne=this.rightSE.point,oe=g.leftSE.point,ye=g.rightSE.point,Ee=Bo(_,oe)&&this.comparePoint(oe)===0,tt=Bo(S,W)&&g.comparePoint(W)===0,We=Bo(_,ye)&&this.comparePoint(ye)===0,_t=Bo(S,ne)&&g.comparePoint(ne)===0;if(tt&&Ee)return _t&&!We?ne:!_t&&We?ye:null;if(tt)return We&&W.x.eq(ye.x)&&W.y.eq(ye.y)?null:W;if(Ee)return _t&&ne.x.eq(oe.x)&&ne.y.eq(oe.y)?null:oe;if(_t&&We)return null;if(_t)return ne;if(We)return ye;let Bt=Ne(W,this.vector(),oe,g.vector());return Bt===null||!Bo(M,Bt)?null:es.snap(Bt)}split(g){let _=[],S=g.events!==void 0,M=new Ro(g,!0),W=new Ro(g,!1),ne=this.rightSE;this.replaceRightSE(W),_.push(W),_.push(M);let oe=new sv(M,ne,this.rings.slice(),this.windings.slice());return Ro.comparePoints(oe.leftSE.point,oe.rightSE.point)>0&&oe.swapEvents(),Ro.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),S&&(M.checkForConsuming(),W.checkForConsuming()),_}swapEvents(){let g=this.rightSE;this.rightSE=this.leftSE,this.leftSE=g,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let _=0,S=this.windings.length;_<S;_++)this.windings[_]*=-1}consume(g){let _=this,S=g;for(;_.consumedBy;)_=_.consumedBy;for(;S.consumedBy;)S=S.consumedBy;let M=sv.compare(_,S);if(M!==0){if(M>0){let W=_;_=S,S=W}if(_.prev===S){let W=_;_=S,S=W}for(let W=0,ne=S.rings.length;W<ne;W++){let oe=S.rings[W],ye=S.windings[W],Ee=_.rings.indexOf(oe);Ee===-1?(_.rings.push(oe),_.windings.push(ye)):_.windings[Ee]+=ye}S.rings=null,S.windings=null,S.consumedBy=_,S.leftSE.consumedBy=_.leftSE,S.rightSE.consumedBy=_.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let g=this.prev.consumedBy||this.prev;this._beforeState=g.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let g=this.beforeState();this._afterState={rings:g.rings.slice(0),windings:g.windings.slice(0),multiPolys:[]};let _=this._afterState.rings,S=this._afterState.windings,M=this._afterState.multiPolys;for(let oe=0,ye=this.rings.length;oe<ye;oe++){let Ee=this.rings[oe],tt=this.windings[oe],We=_.indexOf(Ee);We===-1?(_.push(Ee),S.push(tt)):S[We]+=tt}let W=[],ne=[];for(let oe=0,ye=_.length;oe<ye;oe++){if(S[oe]===0)continue;let Ee=_[oe],tt=Ee.poly;if(ne.indexOf(tt)===-1)if(Ee.isExterior)W.push(tt);else{ne.indexOf(tt)===-1&&ne.push(tt);let We=W.indexOf(Ee.poly);We!==-1&&W.splice(We,1)}}for(let oe=0,ye=W.length;oe<ye;oe++){let Ee=W[oe].multiPoly;M.indexOf(Ee)===-1&&M.push(Ee)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let g=this.beforeState().multiPolys,_=this.afterState().multiPolys;switch(Hh.type){case"union":{let S=g.length===0,M=_.length===0;this._isInResult=S!==M;break}case"intersection":{let S,M;g.length<_.length?(S=g.length,M=_.length):(S=_.length,M=g.length),this._isInResult=M===Hh.numMultiPolys&&S<M;break}case"xor":{let S=Math.abs(g.length-_.length);this._isInResult=S%2===1;break}case"difference":{let S=M=>M.length===1&&M[0].isSubject;this._isInResult=S(g)!==S(_);break}}return this._isInResult}},Wr=class{constructor(h,g,_){Ze(this,"poly");Ze(this,"isExterior");Ze(this,"segments");Ze(this,"bbox");if(!Array.isArray(h)||h.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=g,this.isExterior=_,this.segments=[],typeof h[0][0]!="number"||typeof h[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let S=es.snap({x:new Pe(h[0][0]),y:new Pe(h[0][1])});this.bbox={ll:{x:S.x,y:S.y},ur:{x:S.x,y:S.y}};let M=S;for(let W=1,ne=h.length;W<ne;W++){if(typeof h[W][0]!="number"||typeof h[W][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let oe=es.snap({x:new Pe(h[W][0]),y:new Pe(h[W][1])});oe.x.eq(M.x)&&oe.y.eq(M.y)||(this.segments.push(qs.fromRing(M,oe,this)),oe.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=oe.x),oe.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=oe.y),oe.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=oe.x),oe.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=oe.y),M=oe)}(!S.x.eq(M.x)||!S.y.eq(M.y))&&this.segments.push(qs.fromRing(M,S,this))}getSweepEvents(){let h=[];for(let g=0,_=this.segments.length;g<_;g++){let S=this.segments[g];h.push(S.leftSE),h.push(S.rightSE)}return h}},Vh=class{constructor(h,g){Ze(this,"multiPoly");Ze(this,"exteriorRing");Ze(this,"interiorRings");Ze(this,"bbox");if(!Array.isArray(h))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Wr(h[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let _=1,S=h.length;_<S;_++){let M=new Wr(h[_],this,!1);M.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=M.bbox.ll.x),M.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=M.bbox.ll.y),M.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=M.bbox.ur.x),M.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=M.bbox.ur.y),this.interiorRings.push(M)}this.multiPoly=g}getSweepEvents(){let h=this.exteriorRing.getSweepEvents();for(let g=0,_=this.interiorRings.length;g<_;g++){let S=this.interiorRings[g].getSweepEvents();for(let M=0,W=S.length;M<W;M++)h.push(S[M])}return h}},Af=class{constructor(h,g){Ze(this,"isSubject");Ze(this,"polys");Ze(this,"bbox");if(!Array.isArray(h))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof h[0][0][0]=="number"&&(h=[h])}catch{}this.polys=[],this.bbox={ll:{x:new Pe(Number.POSITIVE_INFINITY),y:new Pe(Number.POSITIVE_INFINITY)},ur:{x:new Pe(Number.NEGATIVE_INFINITY),y:new Pe(Number.NEGATIVE_INFINITY)}};for(let _=0,S=h.length;_<S;_++){let M=new Vh(h[_],this);M.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=M.bbox.ll.x),M.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=M.bbox.ll.y),M.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=M.bbox.ur.x),M.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=M.bbox.ur.y),this.polys.push(M)}this.isSubject=g}getSweepEvents(){let h=[];for(let g=0,_=this.polys.length;g<_;g++){let S=this.polys[g].getSweepEvents();for(let M=0,W=S.length;M<W;M++)h.push(S[M])}return h}},Uh=class Sb{constructor(g){Ze(this,"events");Ze(this,"poly");Ze(this,"_isExteriorRing");Ze(this,"_enclosingRing");this.events=g;for(let _=0,S=g.length;_<S;_++)g[_].segment.ringOut=this;this.poly=null}static factory(g){let _=[];for(let S=0,M=g.length;S<M;S++){let W=g[S];if(!W.isInResult()||W.ringOut)continue;let ne=null,oe=W.leftSE,ye=W.rightSE,Ee=[oe],tt=oe.point,We=[];for(;ne=oe,oe=ye,Ee.push(oe),oe.point!==tt;)for(;;){let _t=oe.getAvailableLinkedEvents();if(_t.length===0){let xn=Ee[0].point,Tn=Ee[Ee.length-1].point;throw new Error(`Unable to complete output ring starting at [${xn.x}, ${xn.y}]. Last matching segment found ends at [${Tn.x}, ${Tn.y}].`)}if(_t.length===1){ye=_t[0].otherSE;break}let Bt=null;for(let xn=0,Tn=We.length;xn<Tn;xn++)if(We[xn].point===oe.point){Bt=xn;break}if(Bt!==null){let xn=We.splice(Bt)[0],Tn=Ee.splice(xn.index);Tn.unshift(Tn[0].otherSE),_.push(new Sb(Tn.reverse()));continue}We.push({index:Ee.length,point:oe.point});let Qt=oe.getLeftmostComparator(ne);ye=_t.sort(Qt)[0].otherSE;break}_.push(new Sb(Ee))}return _}getGeom(){let g=this.events[0].point,_=[g];for(let Ee=1,tt=this.events.length-1;Ee<tt;Ee++){let We=this.events[Ee].point,_t=this.events[Ee+1].point;es.orient(We,g,_t)!==0&&(_.push(We),g=We)}if(_.length===1)return null;let S=_[0],M=_[1];es.orient(S,g,M)===0&&_.shift(),_.push(_[0]);let W=this.isExteriorRing()?1:-1,ne=this.isExteriorRing()?0:_.length-1,oe=this.isExteriorRing()?_.length:-1,ye=[];for(let Ee=ne;Ee!=oe;Ee+=W)ye.push([_[Ee].x.toNumber(),_[Ee].y.toNumber()]);return ye}isExteriorRing(){if(this._isExteriorRing===void 0){let g=this.enclosingRing();this._isExteriorRing=g?!g.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var M,W;let g=this.events[0];for(let ne=1,oe=this.events.length;ne<oe;ne++){let ye=this.events[ne];Ro.compare(g,ye)>0&&(g=ye)}let _=g.segment.prevInResult(),S=_?_.prevInResult():null;for(;;){if(!_)return null;if(!S)return _.ringOut;if(S.ringOut!==_.ringOut)return((M=S.ringOut)==null?void 0:M.enclosingRing())!==_.ringOut?_.ringOut:(W=_.ringOut)==null?void 0:W.enclosingRing();_=S.prevInResult(),S=_?_.prevInResult():null}}},_l=class{constructor(h){Ze(this,"exteriorRing");Ze(this,"interiorRings");this.exteriorRing=h,h.poly=this,this.interiorRings=[]}addInterior(h){this.interiorRings.push(h),h.poly=this}getGeom(){let h=this.exteriorRing.getGeom();if(h===null)return null;let g=[h];for(let _=0,S=this.interiorRings.length;_<S;_++){let M=this.interiorRings[_].getGeom();M!==null&&g.push(M)}return g}},oh=class{constructor(h){Ze(this,"rings");Ze(this,"polys");this.rings=h,this.polys=this._composePolys(h)}getGeom(){let h=[];for(let g=0,_=this.polys.length;g<_;g++){let S=this.polys[g].getGeom();S!==null&&h.push(S)}return h}_composePolys(h){var _;let g=[];for(let S=0,M=h.length;S<M;S++){let W=h[S];if(!W.poly)if(W.isExteriorRing())g.push(new _l(W));else{let ne=W.enclosingRing();ne!=null&&ne.poly||g.push(new _l(ne)),(_=ne==null?void 0:ne.poly)==null||_.addInterior(W)}}return g}},Nd=class{constructor(h,g=qs.compare){Ze(this,"queue");Ze(this,"tree");Ze(this,"segments");this.queue=h,this.tree=new hn(g),this.segments=[]}process(h){let g=h.segment,_=[];if(h.consumedBy)return h.isLeft?this.queue.delete(h.otherSE):this.tree.delete(g),_;h.isLeft&&this.tree.add(g);let S=g,M=g;do S=this.tree.lastBefore(S);while(S!=null&&S.consumedBy!=null);do M=this.tree.firstAfter(M);while(M!=null&&M.consumedBy!=null);if(h.isLeft){let W=null;if(S){let oe=S.getIntersection(g);if(oe!==null&&(g.isAnEndpoint(oe)||(W=oe),!S.isAnEndpoint(oe))){let ye=this._splitSafely(S,oe);for(let Ee=0,tt=ye.length;Ee<tt;Ee++)_.push(ye[Ee])}}let ne=null;if(M){let oe=M.getIntersection(g);if(oe!==null&&(g.isAnEndpoint(oe)||(ne=oe),!M.isAnEndpoint(oe))){let ye=this._splitSafely(M,oe);for(let Ee=0,tt=ye.length;Ee<tt;Ee++)_.push(ye[Ee])}}if(W!==null||ne!==null){let oe=null;W===null?oe=ne:ne===null?oe=W:oe=Ro.comparePoints(W,ne)<=0?W:ne,this.queue.delete(g.rightSE),_.push(g.rightSE);let ye=g.split(oe);for(let Ee=0,tt=ye.length;Ee<tt;Ee++)_.push(ye[Ee])}_.length>0?(this.tree.delete(g),_.push(h)):(this.segments.push(g),g.prev=S)}else{if(S&&M){let W=S.getIntersection(M);if(W!==null){if(!S.isAnEndpoint(W)){let ne=this._splitSafely(S,W);for(let oe=0,ye=ne.length;oe<ye;oe++)_.push(ne[oe])}if(!M.isAnEndpoint(W)){let ne=this._splitSafely(M,W);for(let oe=0,ye=ne.length;oe<ye;oe++)_.push(ne[oe])}}}this.tree.delete(g)}return _}_splitSafely(h,g){this.tree.delete(h);let _=h.rightSE;this.queue.delete(_);let S=h.split(g);return S.push(_),h.consumedBy===void 0&&this.tree.add(h),S}},Up=class{constructor(){Ze(this,"type");Ze(this,"numMultiPolys")}run(h,g,_){Tc.type=h;let S=[new Af(g,!0)];for(let ye=0,Ee=_.length;ye<Ee;ye++)S.push(new Af(_[ye],!1));if(Tc.numMultiPolys=S.length,Tc.type==="difference"){let ye=S[0],Ee=1;for(;Ee<S.length;)sh(S[Ee].bbox,ye.bbox)!==null?Ee++:S.splice(Ee,1)}if(Tc.type==="intersection")for(let ye=0,Ee=S.length;ye<Ee;ye++){let tt=S[ye];for(let We=ye+1,_t=S.length;We<_t;We++)if(sh(tt.bbox,S[We].bbox)===null)return[]}let M=new hn(Ro.compare);for(let ye=0,Ee=S.length;ye<Ee;ye++){let tt=S[ye].getSweepEvents();for(let We=0,_t=tt.length;We<_t;We++)M.add(tt[We])}let W=new Nd(M),ne=null;for(M.size!=0&&(ne=M.first(),M.delete(ne));ne;){let ye=W.process(ne);for(let Ee=0,tt=ye.length;Ee<tt;Ee++){let We=ye[Ee];We.consumedBy===void 0&&M.add(We)}M.size!=0?(ne=M.first(),M.delete(ne)):ne=null}es.reset();let oe=Uh.factory(W.segments);return new oh(oe).getGeom()}},Tc=new Up,Hh=Tc,pu=(h,...g)=>Hh.run("intersection",h,g),Hp=(h,...g)=>Hh.run("difference",h,g);es.set;function Wh(h){let g={type:"Feature"};return g.geometry=h,g}function Gh(h){return h.type==="Feature"?h.geometry:h}function Tf(h){return h&&h.geometry&&h.geometry.coordinates?h.geometry.coordinates:h}function Df(h){return Wh({type:"LineString",coordinates:h})}function Qa(h){return Wh({type:"MultiLineString",coordinates:h})}function Of(h){return Wh({type:"Polygon",coordinates:h})}function Nf(h){return Wh({type:"MultiPolygon",coordinates:h})}function If(h,g){let _=Gh(h),S=Gh(g),M=pu(_.coordinates,S.coordinates);return M.length===0?null:M.length===1?Of(M[0]):Nf(M)}function w(h,g){let _=Gh(h),S=Gh(g),M=Hp(_.coordinates,S.coordinates);return M.length===0?null:M.length===1?Of(M[0]):Nf(M)}function T(h){return Array.isArray(h)?1+T(h[0]):-1}function q(h){h instanceof L.Polyline&&(h=h.toGeoJSON(15));let g=Tf(h),_=T(g),S=[];return _>1?g.forEach(M=>{S.push(Df(M))}):S.push(h),S}function ce(h){let g=[];return h.eachLayer(_=>{g.push(Tf(_.toGeoJSON(15)))}),Qa(g)}ys.Cut=ys.Polygon.extend({initialize(h){this._map=h,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=2)return;let g=L.polygon(h,this.options.pathOptions);g._latlngInfos=this._layer._latlngInfo,this.cut(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:S,originalLayer:M})=>{this._fireCut(M,S,M),this._fireCut(this._map,S,M),M.pm._fireEdit()}),this._editedLayers=[];let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},cut(h){let g=this._map._layers,_=h._latlngInfos||[];Object.keys(g).map(S=>g[S]).filter(S=>S.pm).filter(S=>!S._pmTempLayer).filter(S=>!L.PM.optIn&&!S.options.pmIgnore||L.PM.optIn&&S.options.pmIgnore===!1).filter(S=>S instanceof L.Polyline).filter(S=>S!==h).filter(S=>S.pm.options.allowCutting).filter(S=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(S)>-1:!0).filter(S=>!this._layerGroup.hasLayer(S)).filter(S=>{try{let M=!!Oo(h.toGeoJSON(15),S.toGeoJSON(15)).features.length>0;return M||S instanceof L.Polyline&&!(S instanceof L.Polygon)?M:!!If(h.toGeoJSON(15),S.toGeoJSON(15))}catch{return S instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(S=>{let M;if(S instanceof L.Polygon){M=L.polygon(S.getLatLngs());let ye=M.getLatLngs();_.forEach(Ee=>{if(Ee&&Ee.snapInfo){let{latlng:tt}=Ee,We=this._calcClosestLayer(tt,[M]);if(We&&We.segment&&We.distance<this.options.snapDistance){let{segment:_t}=We;if(_t&&_t.length===2){let{indexPath:Bt,parentPath:Qt,newIndex:xn}=L.PM.Utils._getIndexFromSegment(ye,_t);(Bt.length>1?(0,Ui.default)(ye,Qt):ye).splice(xn,0,tt)}}}})}else M=S;let W=this._cutLayer(h,M),ne=L.geoJSON(W,S.options);ne.getLayers().length===1&&([ne]=ne.getLayers()),this._setPane(ne,"layerPane");let oe=ne.addTo(this._map.pm._getContainingLayer());if(oe.pm.enable(S.pm.options),oe.pm.disable(),S._pmTempLayer=!0,h._pmTempLayer=!0,S.remove(),S.removeFrom(this._map.pm._getContainingLayer()),h.remove(),h.removeFrom(this._map.pm._getContainingLayer()),oe.getLayers&&oe.getLayers().length===0&&this._map.pm.removeLayer({target:oe}),oe instanceof L.LayerGroup?(oe.eachLayer(ye=>{this._addDrawnLayerProp(ye)}),this._addDrawnLayerProp(oe)):this._addDrawnLayerProp(oe),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let ye=this.options.layersToCut.indexOf(S);ye>-1&&this.options.layersToCut.splice(ye,1)}this._editedLayers.push({layer:oe,originalLayer:S})})},_cutLayer(h,g){let _=L.geoJSON(),S;if(g instanceof L.Polygon)S=w(g.toGeoJSON(15),h.toGeoJSON(15));else{let M=q(g);M.forEach(W=>{let ne=tr(W,h.toGeoJSON(15)),oe;ne&&ne.features.length>0?oe=L.geoJSON(ne):oe=L.geoJSON(W),oe.getLayers().forEach(ye=>{Da(h.toGeoJSON(15),ye.toGeoJSON(15))||ye.addTo(_)})}),M.length>1?S=ce(_):S=_.toGeoJSON(15)}return S},_change:L.Util.falseFn}),ys.Text=ys.extend({initialize(h){this._map=h,this._shape="Text",this.toolbarButtonName="drawText"},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(dr("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var h;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(h=this._hintMarker)==null||h.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let g=h;g.target=this._hintMarker,this._handleSnapping(g)}},_createMarker(h){var M,W,ne,oe;if(!h.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(M=this.options.textOptions)==null?void 0:M.className){let ye=this.options.textOptions.className.split(" ");this.textArea.classList.add(...ye)}let _=this._createTextIcon(this.textArea),S=new L.Marker(g,{textMarker:!0,_textMarkerOverPM:!0,icon:_});if(this._setPane(S,"markerPane"),this._finishLayer(S),S.pm||(S.options.draggable=!1),S.addTo(this._map.pm._getContainingLayer()),S.pm){S.pm.textArea=this.textArea,L.setOptions(S.pm,{removeIfEmpty:((W=this.options.textOptions)==null?void 0:W.removeIfEmpty)??!0});let ye=((ne=this.options.textOptions)==null?void 0:ne.focusAfterDraw)??!0;S.pm._createTextMarker(ye),(oe=this.options.textOptions)!=null&&oe.text&&S.pm.setText(this.options.textOptions.text)}this._fireCreate(S),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(h){this.enable(),this._hintMarker.setLatLng(h.latlng)},_createTextArea(){let h=document.createElement("textarea");return h.readOnly=!0,h.classList.add("pm-textarea","pm-disabled"),h},_createTextIcon(h){return L.divIcon({className:"pm-text-marker",html:h})}});var Le={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Li(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let h=this._getDOMElem();h&&(Li(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(h)):L.DomEvent.on(h,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,Li(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let h=this._getDOMElem();h&&(Li(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(h)):L.DomEvent.off(h,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(h){let g=h.touches?h.touches[0]:h,_={originalEvent:g,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(g),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseDown(_),!1},_simulateMouseMoveEvent(h){let g=h.touches?h.touches[0]:h,_={originalEvent:g,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(g),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseMove(_),!1},_simulateMouseUpEvent(h){let g={originalEvent:h.touches?h.touches[0]:h,target:this._layer};return h.type.indexOf("touch")===-1&&(g.containerPoint=this._map.mouseEventToContainerPoint(h),g.latlng=this._map.containerPointToLatLng(g.containerPoint)),this._dragMixinOnMouseUp(g),!1},_dragMixinOnMouseDown(h){if(h.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(h);let g=h._fromLayerSync,_=this._syncLayers("_dragMixinOnMouseDown",h);if(this._layer instanceof L.Marker&&(this.options.snappable&&!g&&!_?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let S="resizeableCircleMarker";this._layer instanceof L.Circle&&(S="resizeableCircle"),this.options.snappable&&!g&&!_?this._layer.pm.options[S]||this._initSnappableMarkersDrag():this._layer.pm.options[S]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=h.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(h){this._overwriteEventIfItComesFromMarker(h);let g=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",h),this._dragging||(this._dragging=!0,L.DomUtil.addClass(g,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=h.latlng),this._onLayerDrag(h),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(h){let g=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",h),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,g&&L.DomUtil.removeClass(g,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(h){let{latlng:g}=h,_={lat:g.lat-this._tempDragCoord.lat,lng:g.lng-this._tempDragCoord.lng},S=M=>M.map(W=>{if(Array.isArray(W))return S(W);let ne={lat:W.lat+_.lat,lng:W.lng+_.lng};return(W.alt||W.alt===0)&&(ne.alt=W.alt),ne});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let M=S([this._layer.getLatLng()]);this._layer.setLatLng(M[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let M=this._layer.getLatLng();this._layer._snapped&&(M=this._layer._orgLatLng);let W=S([M]);this._layer.setLatLng(W[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let M=S([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(M),this._fireChange(this._layer.getBounds(),"Edit")}else{let M=S(this._layer.getLatLngs());this._layer.setLatLngs(M),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=g,h.layer=this._layer,this._fireDrag(h)},addDraggingClass(){let h=this._getDOMElem();h&&L.DomUtil.addClass(h,"leaflet-pm-draggable")},removeDraggingClass(){let h=this._getDOMElem();h&&L.DomUtil.removeClass(h,"leaflet-pm-draggable")},_getDOMElem(){let h=null;return this._layer._path?h=this._layer._path:this._layer._renderer&&this._layer._renderer._container?h=this._layer._renderer._container:this._layer._image?h=this._layer._image:this._layer._icon&&(h=this._layer._icon),h},_overwriteEventIfItComesFromMarker(h){h.target.getLatLng&&(!h.target._radius||h.target._radius<=10)&&(h.containerPoint=this._map.mouseEventToContainerPoint(h.originalEvent),h.latlng=this._map.containerPointToLatLng(h.containerPoint))},_syncLayers(h,g){if(this.enabled())return!1;if(!g._fromLayerSync&&this._layer===g.target&&this.options.syncLayersOnDrag){g._fromLayerSync=!0;let _=[];if(L.Util.isArray(this.options.syncLayersOnDrag))_=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(S=>{S instanceof L.LayerGroup&&(_=_.concat(S.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let S in this._parentLayerGroup){let M=this._parentLayerGroup[S];M.pm&&(_=M.pm.getLayers(!0))}return L.Util.isArray(_)&&_.length>0&&(_=_.filter(S=>!!S.pm).filter(S=>!!S.pm.options.draggable),_.forEach(S=>{S!==this._layer&&S.pm[h]&&(S._snapped=!1,S.pm[h](g))})),_.length>0}return!1},_stopDOMImageDrag(h){return h.preventDefault(),!1}},Me=Le,Ae=l(Xs());function Oe(h,g,_,S){return _.unproject(g.transform(_.project(h,S)),S)}function Be(h,g,_){let S=_.getMaxZoom();if(S===1/0&&(S=_.getZoom()),L.Util.isArray(h)){let M=[];return h.forEach(W=>{M.push(Be(W,g,_))}),M}return h instanceof L.LatLng?Oe(h,g,_,S):null}function Ke(h,g){g instanceof L.Layer&&(g=g.getLatLng());let _=h.getMaxZoom();return _===1/0&&(_=h.getZoom()),h.project(g,_)}function gt(h,g){let _=h.getMaxZoom();return _===1/0&&(_=h.getZoom()),h.unproject(g,_)}var Ft={_onRotateStart(h){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Ke(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Ke(this._map,h.target.getLatLng()),this._initialRotateLatLng=oa(this._layer),this._startAngle=this.getAngle();let g=oa(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,g),this._fireRotationStart(this._map,g)},_onRotate(h){let g=Ke(this._map,h.target.getLatLng()),_=this._rotationStartPoint,S=this._rotationOriginPoint,M=Math.atan2(g.y-S.y,g.x-S.x)-Math.atan2(_.y-S.y,_.x-S.x);this._layer.setLatLngs(this._rotateLayer(M,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let W=this;function ne(tt,We=[],_t=-1){if(_t>-1&&We.push(_t),L.Util.isArray(tt[0]))tt.forEach((Bt,Qt)=>ne(Bt,We.slice(),Qt));else{let Bt=We.length>0?(0,Ae.default)(W._markers,We):W._markers[0];tt.forEach((Qt,xn)=>{Bt[xn].setLatLng(Qt)})}}ne(this._layer.getLatLngs());let oe=oa(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(M,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let ye=M*180/Math.PI;ye=ye<0?ye+360:ye;let Ee=ye+this._startAngle;this._setAngle(Ee),this._rotationLayer.pm._setAngle(Ee),this._fireRotation(this._rotationLayer,ye,oe),this._fireRotation(this._map,ye,oe),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let h=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let g=oa(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=oa(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,h,g),this._fireRotationEnd(this._map,h,g),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(h,g,_,S,M){let W=Ke(M,_);return this._matrix=S.clone().rotate(h,W).flip(),Be(g,this._matrix,M)},_setAngle(h){h=h<0?h+360:h,this._angle=h%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let h=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),g=h.getCenter();return h.removeFrom(this._layer._map),g},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Ma(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let h={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),h),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=oa(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(h){let g=this.getAngle(),_=this._layer.getLatLngs(),S=h*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(S,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+h),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(S,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let M=this.getAngle()-g;M=M<0?M+360:M,this._startAngle=g,this._fireRotation(this._layer,M,_,this._layer),this._fireRotation(this._map||this._layer._map,M,_,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(h){let g=h-this.getAngle();this.rotateLayer(g)},getAngle(){return this._angle||0},setInitAngle(h){this._setAngle(h)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(h){this._rotationCenter=h,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(h)}},jt=Ft,Mt=L.Class.extend({includes:[Me,Zo,jt,lu],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(h){L.Util.setOptions(this,h)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(h,g){g==="layerPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":g==="vertexPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":g==="markerPane"&&(h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(h,g){let _=g.target,S={layer:this._layer,marker:_,event:g},M="";return h==="move"?M="moveVertexValidation":h==="add"?M="addVertexValidation":h==="remove"&&(M="removeVertexValidation"),this.options[M]&&typeof this.options[M]=="function"&&!this.options[M](S)?(h==="move"&&(_._cancelDragEventChain=_.getLatLng()),!1):(_._cancelDragEventChain=null,!0)},_vertexValidationDrag(h){return h._cancelDragEventChain?(h._latlng=h._cancelDragEventChain,h.update(),!1):!0},_vertexValidationDragEnd(h){return h._cancelDragEventChain?(h._cancelDragEventChain=null,!1):!0}}),Kt=Mt;Kt.LayerGroup=L.Class.extend({initialize(h){this._layerGroup=h,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(S=>this._initLayer(S));let g=S=>{if(S.layer._pmTempLayer)return;this._layers=this.getLayers();let M=this._layers.filter(W=>!W.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in W.pm._parentLayerGroup));M.forEach(W=>{this._initLayer(W)}),M.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(g,100,this),this),this._layerGroup.on("layerremove",S=>{this._removeLayerFromGroup(S.target)},this);let _=S=>{S.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(_,100,this),this)},enable(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this._options=h,this._layers.forEach(_=>{_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.enable(h,g)):_.pm.enable(h)})},disable(h=[]){h.length===0&&(this._layers=this.getLayers()),this._layers.forEach(g=>{g instanceof L.LayerGroup?h.indexOf(g._leaflet_id)===-1&&(h.push(g._leaflet_id),g.pm.disable(h)):g.pm.disable()})},enabled(h=[]){return h.length===0&&(this._layers=this.getLayers()),!!this._layers.find(g=>g instanceof L.LayerGroup?h.indexOf(g._leaflet_id)===-1?(h.push(g._leaflet_id),g.pm.enabled(h)):!1:g.pm.enabled())},toggleEdit(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this._options=h,this._layers.forEach(_=>{_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.toggleEdit(h,g)):_.pm.toggleEdit(h)})},_initLayer(h){let g=L.Util.stamp(this._layerGroup);h.pm._parentLayerGroup||(h.pm._parentLayerGroup={}),h.pm._parentLayerGroup[g]=this._layerGroup},_removeLayerFromGroup(h){if(h.pm&&h.pm._layerGroup){let g=L.Util.stamp(this._layerGroup);delete h.pm._layerGroup[g]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(h=>h.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var h;return this._map||((h=this._layers.find(g=>!!g._map))==null?void 0:h._map)||null},getLayers(h=!1,g=!0,_=!0,S=[]){let M=[];return h?this._layerGroup.getLayers().forEach(W=>{M.push(W),W instanceof L.LayerGroup&&S.indexOf(W._leaflet_id)===-1&&(S.push(W._leaflet_id),M=M.concat(W.pm.getLayers(!0,!0,!0,S)))}):M=this._layerGroup.getLayers(),_&&(M=M.filter(W=>!(W instanceof L.LayerGroup))),g&&(M=M.filter(W=>!!W.pm),M=M.filter(W=>!W._pmTempLayer),M=M.filter(W=>!L.PM.optIn&&!W.options.pmIgnore||L.PM.optIn&&W.options.pmIgnore===!1)),M},setOptions(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this.options=h,this._layers.forEach(_=>{_.pm&&(_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.setOptions(h,g)):_.pm.setOptions(h))})}}),Kt.Marker=Kt.extend({_shape:"Marker",initialize(h){this._layer=h,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(h={draggable:!0}){if(L.Util.setOptions(this,h),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(h){let g=h.target;g.remove(),this._fireRemove(g),this._fireRemove(this._map,g)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)}});var Wt=l(Xs()),mt={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let h=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=h.filter((g,_,S)=>S.indexOf(g)===_)},_removeFromCache(h){let g=this.markerCache.indexOf(h);g>-1&&this.markerCache.splice(g,1)},renderLimits(h){this.markerCache.forEach(g=>{h.includes(g)?this._markerGroup.addLayer(g):this._markerGroup.removeLayer(g)})},applyLimitFilters({latlng:h={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let g=[...this._filterClosestMarkers(h)];this.renderLimits(g)},_filterClosestMarkers(h){let g=[...this.markerCache],_=this.options.limitMarkersToCount;return _===-1?g:(g.sort((S,M)=>{let W=S._latlng.distanceTo(h),ne=M._latlng.distanceTo(h);return W-ne}),g.filter((S,M)=>_>-1?M<_:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(h){this._preventRenderMarkers=!!h}},xt=mt;Kt.Line=Kt.extend({includes:[xt],_shape:"Line",initialize(h){this._layer=h,this._enabled=!1},enable(h){if(L.Util.setOptions(this,h),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let h=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(h,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(h){return this.enabled()?this.disable():this.enable(h),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let h=this._map,g=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(h),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let _=S=>{if(Array.isArray(S[0]))return S.map(_,this);let M=S.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&S.map((W,ne)=>{let oe=this.isPolygon()?(ne+1)%S.length:ne+1;return this._createMiddleMarker(M[ne],M[oe])}),M};this._markers=_(g),this.filterMarkerGroup(),h.addLayer(this._markerGroup)},_createMarker(h){let g=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this.options.rotate?(g.on("dragstart",this._onRotateStart,this),g.on("drag",this._onRotate,this),g.on("dragend",this._onRotateEnd,this)):(g.on("click",this._onVertexClick,this),g.on("dragstart",this._onMarkerDragStart,this),g.on("move",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||g.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(g),g},_createMiddleMarker(h,g){if(!h||!g)return!1;let _=L.PM.Utils.calcMiddleLatLng(this._map,h.getLatLng(),g.getLatLng()),S=this._createMarker(_),M=L.divIcon({className:"marker-icon marker-icon-middle"});return S.setIcon(M),S.leftM=h,S.rightM=g,h._middleMarkerNext=S,g._middleMarkerPrev=S,S.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),S.on("movestart",this._onMiddleMarkerMoveStart,this),S},_onMiddleMarkerClick(h){let g=h.target;if(!this._vertexValidation("add",h))return;let _=L.divIcon({className:"marker-icon"});g.setIcon(_),this._addMarker(g,g.leftM,g.rightM)},_onMiddleMarkerMoveStart(h){let g=h.target;if(g.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",h)){g.on("move",this._onMiddleMarkerMovePrevent,this);return}g._dragging=!0,this._addMarker(g,g.leftM,g.rightM)},_onMiddleMarkerMovePrevent(h){let g=h.target;this._vertexValidationDrag(g)},_onMiddleMarkerMoveEnd(h){let g=h.target;if(g.off("move",this._onMiddleMarkerMovePrevent,this),g.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(g))return;let _=L.divIcon({className:"marker-icon"});g.setIcon(_),setTimeout(()=>{delete g._dragging},100)},_addMarker(h,g,_){h.off("movestart",this._onMiddleMarkerMoveStart,this),h.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let S=h.getLatLng(),M=this._layer._latlngs;delete h.leftM,delete h.rightM;let{indexPath:W,index:ne,parentPath:oe}=L.PM.Utils.findDeepMarkerIndex(this._markers,g),ye=W.length>1?(0,Wt.default)(M,oe):M,Ee=W.length>1?(0,Wt.default)(this._markers,oe):this._markers;ye.splice(ne+1,0,S),Ee.splice(ne+1,0,h),this._layer.setLatLngs(M),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(g,h),this._createMiddleMarker(h,_)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(h,L.PM.Utils.findDeepMarkerIndex(this._markers,h).indexPath,S),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Ur(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(h){let g=this._layer,_,S;if(this.options.allowSelfIntersection?_=!1:(S=Ur(this._layer.toGeoJSON(15)),_=S.features.length>0),_){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return _;h?this._flashLayer():(g.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(S)}else g.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return _},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(h,g){h.forEach(_=>{Array.isArray(_)?this._updateDisabledMarkerStyle(_,g):_._icon&&(g&&!this._checkMarkerAllowedToDrag(_)?L.DomUtil.addClass(_._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(_._icon,"vertexmarker-disabled"))})},_removeMarker(h){let g=h.target;if(!this._vertexValidation("remove",h))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=oa(this._layer,this._layer.getLatLngs()));let _=this._layer.getLatLngs(),{indexPath:S,index:M,parentPath:W}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);if(!S)return;let ne=S.length>1?(0,Wt.default)(_,W):_,oe=S.length>1?(0,Wt.default)(this._markers,W):this._markers,ye=W[W.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!ye&&(ne.length<=2||this.isPolygon()&&ne.length<=3)){this._flashLayer();return}ne.splice(M,1),this._layer.setLatLngs(_),this.isPolygon()&&ne.length<=2&&ne.splice(0,ne.length);let Ee=!1;if(ne.length<=1&&(ne.splice(0,ne.length),W.length>1&&S.length>1&&(_=Il(_)),this._layer.setLatLngs(_),this._initMarkers(),Ee=!0),vs(_)||this._layer.remove(),_=Il(_),this._layer.setLatLngs(_),this._markers=Il(this._markers),!Ee&&(oe=S.length>1?(0,Wt.default)(this._markers,W):this._markers,g._middleMarkerPrev&&(this._markerGroup.removeLayer(g._middleMarkerPrev),this._removeFromCache(g._middleMarkerPrev)),g._middleMarkerNext&&(this._markerGroup.removeLayer(g._middleMarkerNext),this._removeFromCache(g._middleMarkerNext)),this._markerGroup.removeLayer(g),this._removeFromCache(g),oe)){let tt,We;if(this.isPolygon()?(tt=(M+1)%oe.length,We=(M+(oe.length-1))%oe.length):(We=M-1<0?void 0:M-1,tt=M+1>=oe.length?void 0:M+1),tt!==We){let _t=oe[We],Bt=oe[tt];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(_t,Bt)}oe.splice(M,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(g,S),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(h){let g=this._layer.getLatLngs(),_=h.getLatLng(),{indexPath:S,index:M,parentPath:W}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);(S.length>1?(0,Wt.default)(g,W):g).splice(M,1,_),this._layer.setLatLngs(g)},_getNeighborMarkers(h){let{indexPath:g,index:_,parentPath:S}=L.PM.Utils.findDeepMarkerIndex(this._markers,h),M=g.length>1?(0,Wt.default)(this._markers,S):this._markers,W=(_+1)%M.length,ne=(_+(M.length-1))%M.length,oe=M[ne],ye=M[W];return{prevMarker:oe,nextMarker:ye}},_checkMarkerAllowedToDrag(h){let{prevMarker:g,nextMarker:_}=this._getNeighborMarkers(h),S=L.polyline([g.getLatLng(),h.getLatLng()]),M=L.polyline([h.getLatLng(),_.getLatLng()]),W=Oo(this._layer.toGeoJSON(15),S.toGeoJSON(15)).features.length,ne=Oo(this._layer.toGeoJSON(15),M.toGeoJSON(15)).features.length;return h.getLatLng()===this._markers[0][0].getLatLng()?ne+=1:h.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(W+=1),!(W<=2&&ne<=2)},_onMarkerDragStart(h){let g=h.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",h))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragStart(h,_),this.options.allowSelfIntersection||(this._coordsBeforeEdit=oa(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(g):this._markerAllowedToDrag=null},_onMarkerDrag(h){let g=h.target;if(!this._vertexValidationDrag(g))return;let{indexPath:_,index:S,parentPath:M}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);if(!_)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(g);let W=_.length>1?(0,Wt.default)(this._markers,M):this._markers,ne=(S+1)%W.length,oe=(S+(W.length-1))%W.length,ye=g.getLatLng(),Ee=W[oe].getLatLng(),tt=W[ne].getLatLng();if(g._middleMarkerNext){let We=L.PM.Utils.calcMiddleLatLng(this._map,ye,tt);g._middleMarkerNext.setLatLng(We)}if(g._middleMarkerPrev){let We=L.PM.Utils.calcMiddleLatLng(this._map,ye,Ee);g._middleMarkerPrev.setLatLng(We)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(h,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(h){let g=h.target;if(!this._vertexValidationDragEnd(g))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g),S=!this.options.allowSelfIntersection&&this.hasSelfIntersection();S&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(S=!1);let M=!this.options.allowSelfIntersection&&S;if(this._fireMarkerDragEnd(h,_,M),M){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(h,_);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(h){let g=h.target;if(g._dragging)return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireVertexClick(h,_)}}),Kt.Polygon=Kt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(h){let{prevMarker:g,nextMarker:_}=this._getNeighborMarkers(h),S=L.polyline([g.getLatLng(),h.getLatLng()]),M=L.polyline([h.getLatLng(),_.getLatLng()]),W=Oo(this._layer.toGeoJSON(15),S.toGeoJSON(15)).features.length,ne=Oo(this._layer.toGeoJSON(15),M.toGeoJSON(15)).features.length;return!(W<=2&&ne<=2)}}),Kt.Rectangle=Kt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let h=this._map,g=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,h.addLayer(this._markerGroup),this._markers=[],this._markers[0]=g.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((_,S)=>{let M=this._cornerMarkers.find(W=>W._index===S);M&&M.setLatLng(_)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(h,g){let _=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(_,"vertexPane"),_._origLatLng=h,_._index=g,_._pmTempLayer=!0,_.on("click",this._onVertexClick,this),this._markerGroup.addLayer(_),_},_addMarkerEvents(){this._markers[0].forEach(h=>{h.on("dragstart",this._onMarkerDragStart,this),h.on("drag",this._onMarkerDrag,this),h.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||h.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(h){if(!this._vertexValidation("move",h))return;let g=h.target,_=this._cornerMarkers;g._oppositeCornerLatLng=_.find(M=>M._index===(g._index+2)%4).getLatLng(),g._snapped=!1;let{indexPath:S}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragStart(h,S)},_onMarkerDrag(h){let g=h.target;if(!this._vertexValidationDrag(g)||g._index===void 0)return;this._adjustRectangleForMarkerMove(g);let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDrag(h,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(h){let g=h.target;if(!this._vertexValidationDragEnd(g))return;this._cornerMarkers.forEach(S=>{delete S._oppositeCornerLatLng});let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragEnd(h,_),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(h){L.extend(h._origLatLng,h._latlng);let g=L.PM.Utils._getRotatedRectangle(h.getLatLng(),h._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(g),this._adjustAllMarkers(h),this._layer.redraw()},_adjustAllMarkers(h){let g=this._layer.getLatLngs()[0];if(g&&g.length!==4&&g.length>0)g.forEach((_,S)=>{this._cornerMarkers[S].setLatLng(_)}),this._cornerMarkers.slice(g.length).forEach(_=>{_.setLatLng(g[0])});else if(!g||!g.length)console.error("The layer has no LatLngs");else{let _=g.findIndex(S=>h.getLatLng().equals(S));_>-1?(this._cornerMarkers[(h._index+1)%4].setLatLng(g[(_+1)%4]),this._cornerMarkers[(h._index+2)%4].setLatLng(g[(_+2)%4]),this._cornerMarkers[(h._index+3)%4].setLatLng(g[(_+3)%4])):this._cornerMarkers.forEach(S=>{S.setLatLng(g[S._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Ma(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let h=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(h[0],h[2],this.getAngle(),this._map||this)}}),Kt.CircleMarker=Kt.extend({_shape:"CircleMarker",initialize(h){this._layer=h,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(h={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,h),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let h=this._map;this._helperLayers&&(this._helperLayers.removeFrom(h),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(h);let g=this._layer.getLatLng(),_=this._layer._radius,S=this._getLatLngOnCircle(g,_);this._centerMarker=this._createCenterMarker(g),this._outerMarker=this._createOuterMarker(S),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(h,g){let _=this._map.project(h),S=L.point(_.x+g,_.y);return this._map.unproject(S)},_createHintLine(h,g){let _=h.getLatLng(),S=g.getLatLng();this._hintline=L.polyline([_,S],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(h){let g=this._createMarker(h);return this.options.draggable?(L.DomUtil.addClass(g._icon,"leaflet-pm-draggable"),g.on("move",this._moveCircle,this)):g.dragging.disable(),g},_createOuterMarker(h){let g=this._createMarker(h);return g.on("drag",this._resizeCircle,this),g},_createMarker(h){let g=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._origLatLng=h,g._pmTempLayer=!0,g.on("dragstart",this._onMarkerDragStart,this),g.on("drag",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),g.on("click",this._onVertexClick,this),this._helperLayers.addLayer(g),g},_moveCircle(h){if(h.target._cancelDragEventChain)return;let g=this._centerMarker.getLatLng();this._layer.setLatLng(g);let _=this._layer._radius,S=this._getLatLngOnCircle(g,_);this._outerMarker._latlng=S,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let h=this._layer.getLatLng(),g=this._layer._radius,_=this._getLatLngOnCircle(h,g);this._outerMarker.setLatLng(_),this._centerMarker.setLatLng(h),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng();this._hintline.setLatLngs([h,g])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(h){this._vertexValidation("move",h)&&this._fireMarkerDragStart(h)},_onMarkerDrag(h){let g=h.target;g instanceof L.Marker&&!this._vertexValidationDrag(g)||this._fireMarkerDrag(h)},_onMarkerDragEnd(h){this._extedingMarkerDragEnd();let g=h.target;this._vertexValidationDragEnd(g)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(h))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let h=this._layer._map||this._map;if(h){let g=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),h,this._layer.getLatLng()),_=L.circle(this._layer.getLatLng(),this._layer.options);_.setRadius(g);let S=h&&h.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(_,200,!S).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(_,200,!S),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);return this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?g=uu(this._map,h,g,this._getMinDistanceInMeter(h)):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(g=uu(this._map,h,g,this._getMaxDistanceInMeter(h))),g},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(h,g){return this._map.project(h).distanceTo(this._map.project(g))},_getMinDistanceInMeter(h){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,h)},_getMaxDistanceInMeter(h){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,h)},_onVertexClick(h){h.target._dragging||this._fireVertexClick(h,void 0)}}),Kt.Circle=Kt.CircleMarker.extend({_shape:"Circle",initialize(h){this._layer=h,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(h){L.PM.Edit.CircleMarker.prototype.enable.call(this,h||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let h=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(h,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let h=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!h).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!h),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(h,g){return this._map.distance(h,g)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(h){h.target._dragging||this._fireVertexClick(h,void 0)}}),Kt.ImageOverlay=Kt.extend({_shape:"ImageOverlay",initialize(h){this._layer=h,this._enabled=!1},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},enabled(){return this._enabled},enable(h={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,h),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let h=this._layer.getBounds(),g=h.getNorthWest(),_=h.getNorthEast(),S=h.getSouthEast(),M=h.getSouthWest();return[g,_,S,M]}}),Kt.Text=Kt.extend({_shape:"Text",initialize(h){this._layer=h,this._enabled=!1},enable(h){if(L.Util.setOptions(this,h),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let h=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),h.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let h=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,g=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${h}px`,this.textArea.style.width=`${g}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(h){h.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(h={}){let g=this._hasFocus;this._hasFocus=h.type==="focus",!g!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(h){h&&(this.textArea.value=h),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let g=this.options.className.split(" ");this.textArea.classList.add(...g)}let h=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(h),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(h=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),h===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(h){h.preventDefault()}});var nn=function(h,g,_,S,M,W){this._matrix=[h,g,_,S,M,W]};nn.init=()=>new L.PM.Matrix(1,0,0,1,0,0),nn.prototype={transform(h){return this._transform(h.clone())},_transform(h){let g=this._matrix,{x:_,y:S}=h;return h.x=g[0]*_+g[1]*S+g[4],h.y=g[2]*_+g[3]*S+g[5],h},untransform(h){let g=this._matrix;return new L.Point((h.x/g[0]-g[4])/g[0],(h.y/g[2]-g[5])/g[2])},clone(){let h=this._matrix;return new L.PM.Matrix(h[0],h[1],h[2],h[3],h[4],h[5])},translate(h){if(h===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let g,_;return typeof h=="number"?(g=h,_=h):(g=h.x,_=h.y),this._add(1,0,0,1,g,_)},scale(h,g){if(h===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let _,S;return g=g||L.point(0,0),typeof h=="number"?(_=h,S=h):(_=h.x,S=h.y),this._add(_,0,0,S,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},rotate(h,g){let _=Math.cos(h),S=Math.sin(h);return g=g||new L.Point(0,0),this._add(_,S,-S,_,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(h,g,_,S,M,W){let ne=[[],[],[]],oe=this._matrix,ye=[[oe[0],oe[2],oe[4]],[oe[1],oe[3],oe[5]],[0,0,1]],Ee=[[h,_,M],[g,S,W],[0,0,1]],tt;h&&h instanceof L.PM.Matrix&&(oe=h._matrix,Ee=[[oe[0],oe[2],oe[4]],[oe[1],oe[3],oe[5]],[0,0,1]]);for(let We=0;We<3;We+=1)for(let _t=0;_t<3;_t+=1){tt=0;for(let Bt=0;Bt<3;Bt+=1)tt+=ye[We][Bt]*Ee[Bt][_t];ne[We][_t]=tt}return this._matrix=[ne[0][0],ne[1][0],ne[0][1],ne[1][1],ne[0][2],ne[1][2]],this}};var mn=nn,on={calcMiddleLatLng(h,g,_){let S=h.project(g),M=h.project(_);return h.unproject(S._add(M)._divideBy(2))},findLayers(h){let g=[];return h.eachLayer(_=>{(_ instanceof L.Polyline||_ instanceof L.Marker||_ instanceof L.Circle||_ instanceof L.CircleMarker||_ instanceof L.ImageOverlay)&&g.push(_)}),g=g.filter(_=>!!_.pm),g=g.filter(_=>!_._pmTempLayer),g=g.filter(_=>!L.PM.optIn&&!_.options.pmIgnore||L.PM.optIn&&_.options.pmIgnore===!1),g},circleToPolygon(h,g=60,_=!0){let S=h.getLatLng(),M=h.getRadius(),W=Xi(S,M,g,0,_),ne=[];for(let oe=0;oe<W.length;oe+=1){let ye=[W[oe].lat,W[oe].lng];ne.push(ye)}return L.polygon(ne,h.options)},disablePopup(h){h.getPopup()&&(h._tempPopupCopy=h.getPopup(),h.unbindPopup())},enablePopup(h){h._tempPopupCopy&&(h.bindPopup(h._tempPopupCopy),delete h._tempPopupCopy)},_fireEvent(h,g,_,S=!1){h.fire(g,_,S);let{groups:M}=this.getAllParentGroups(h);M.forEach(W=>{W.fire(g,_,S)})},getAllParentGroups(h){let g=[],_=[],S=M=>{for(let W in M._eventParents)if(g.indexOf(W)===-1){g.push(W);let ne=M._eventParents[W];_.push(ne),S(ne)}};return!h._pmLastGroupFetch||!h._pmLastGroupFetch.time||new Date().getTime()-h._pmLastGroupFetch.time>1e3?(S(h),h._pmLastGroupFetch={time:new Date().getTime(),groups:_,groupIds:g},{groupIds:g,groups:_}):{groups:h._pmLastGroupFetch.groups,groupIds:h._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Xi,getTranslation:dr,findDeepCoordIndex(h,g,_=!0){let S,M=ne=>(oe,ye)=>{let Ee=ne.concat(ye);if(_){if(oe.lat&&oe.lat===g.lat&&oe.lng===g.lng)return S=Ee,!0}else if(oe.lat&&L.latLng(oe).equals(g))return S=Ee,!0;return Array.isArray(oe)&&oe.some(M(Ee))};h.some(M([]));let W={};return S&&(W={indexPath:S,index:S[S.length-1],parentPath:S.slice(0,S.length-1)}),W},findDeepMarkerIndex(h,g){let _,S=W=>(ne,oe)=>{let ye=W.concat(oe);return ne._leaflet_id===g._leaflet_id?(_=ye,!0):Array.isArray(ne)&&ne.some(S(ye))};h.some(S([]));let M={};return _&&(M={indexPath:_,index:_[_.length-1],parentPath:_.slice(0,_.length-1)}),M},_getIndexFromSegment(h,g){if(g&&g.length===2){let _=this.findDeepCoordIndex(h,g[0]),S=this.findDeepCoordIndex(h,g[1]),M=Math.max(_.index,S.index);return(_.index===0||S.index===0)&&M!==1&&(M+=1),{indexA:_,indexB:S,newIndex:M,indexPath:_.indexPath,parentPath:_.parentPath}}return null},_getRotatedRectangle(h,g,_,S){let M=Ke(S,h),W=Ke(S,g),ne=_*Math.PI/180,oe=Math.cos(ne),ye=Math.sin(ne),Ee=(W.x-M.x)*oe+(W.y-M.y)*ye,tt=(W.y-M.y)*oe-(W.x-M.x)*ye,We=Ee*oe+M.x,_t=Ee*ye+M.y,Bt=-tt*ye+M.x,Qt=tt*oe+M.y,xn=gt(S,M),Tn=gt(S,{x:We,y:_t}),pr=gt(S,W),et=gt(S,{x:Bt,y:Qt});return[xn,Tn,pr,et]},pxRadiusToMeterRadius(h,g,_){let S=g.project(_),M=L.point(S.x+h,S.y);return g.distance(g.unproject(M),_)}},Fn=on;L.PM=L.PM||{version:Zi.version,Map:$s,Toolbar:Bl,Draw:ys,Edit:Kt,Utils:Fn,Matrix:mn,activeLang:"en",optIn:!1,initialize(h){this.addInitHooks(h)},setOptIn(h){this.optIn=!!h},addInitHooks(){function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(h);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(g);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(_);function S(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(S);function M(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(M);function W(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(W);function ne(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(ne);function oe(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(oe);function ye(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(ye)},reInitLayer(h){h instanceof L.LayerGroup&&h.eachLayer(g=>{this.reInitLayer(g)}),h.pm||L.PM.optIn&&h.options.pmIgnore!==!1||h.options.pmIgnore||(h instanceof L.Map?h.pm=new L.PM.Map(h):h instanceof L.Marker?h.options.textMarker?(h.pm=new L.PM.Edit.Text(h),h.pm._initTextMarker(),h.pm._createTextMarker(!1)):h.pm=new L.PM.Edit.Marker(h):h instanceof L.Circle?h.pm=new L.PM.Edit.Circle(h):h instanceof L.CircleMarker?h.pm=new L.PM.Edit.CircleMarker(h):h instanceof L.Rectangle?h.pm=new L.PM.Edit.Rectangle(h):h instanceof L.Polygon?h.pm=new L.PM.Edit.Polygon(h):h instanceof L.Polyline?h.pm=new L.PM.Edit.Line(h):h instanceof L.LayerGroup?h.pm=new L.PM.Edit.LayerGroup(h):h instanceof L.ImageOverlay&&(h.pm=new L.PM.Edit.ImageOverlay(h)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(h){let g=this._map.mouseEventToLayerPoint(h),_,S;for(let M=this._drawFirst;M;M=M.next)_=M.layer,_.options.interactive&&_._containsPoint(g)&&(!(h.type==="click"||h.type==="preclick")||!this._map._draggableMoved(_))&&(S=_);S&&(L.DomEvent.fakeStop(h),this._fireEvent([S],h))}}),L.PM.initialize()})();class op extends Yn.Circle{constructor(n,r){const i=r.radius||10;super(n,i,r);Ze(this,"properties");Ze(this,"angleCache",new Map);Ze(this,"lastCenter");Ze(this,"lastCenterCosLat");Ze(this,"_pendingNameUpdate",!1);Ze(this,"_nameUpdateTimeout",null);gn.measure("Circle.constructor.init",()=>{this.properties={type:"Circle",style:{name:r.name||""}},requestAnimationFrame(()=>{this.updateProperties()}),this.on("add",()=>{requestAnimationFrame(()=>{this.updateProperties()})})},"Circle")}updateProperties(){gn.measure("Circle.updateProperties",()=>{var a,l,c,d;const n=this.getRadius(),r=this.getLatLng(),i=((l=(a=this.properties)==null?void 0:a.style)==null?void 0:l.name)||"",s=((c=this.properties)==null?void 0:c.style)||{},o={type:"Circle",radius:n,diameter:n*2,surface:Math.PI*Math.pow(n,2),perimeter:2*Math.PI*n,center:{lat:r.lat,lng:r.lng},style:{...s,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((d=this.options)==null?void 0:d.dashArray)||"",name:i}};JSON.stringify(this.properties)!==JSON.stringify(o)&&(this.properties=o,this.fire("properties:updated",{shape:this,properties:this.properties}))},"Circle")}setName(n){gn.measure("Circle.setName",()=>{var r,i;((i=(r=this.properties)==null?void 0:r.style)==null?void 0:i.name)!==n&&(this.properties.style||(this.properties.style={}),this.properties.style.name=n,!this._pendingNameUpdate&&(this._pendingNameUpdate=!0,this._nameUpdateTimeout&&clearTimeout(this._nameUpdateTimeout),this._nameUpdateTimeout=setTimeout(()=>{this._pendingNameUpdate=!1,this._nameUpdateTimeout=null,this.fire("properties:updated",{shape:this,properties:this.properties})},100)))},"Circle")}getName(){return gn.measure("Circle.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""},"Circle")}setRadius(n){return gn.measure("Circle.setRadius",()=>(super.setRadius(n),this.updateProperties(),this),"Circle")}setLatLng(n){return gn.measure("Circle.setLatLng",()=>(super.setLatLng(n),this.updateProperties(),this),"Circle")}calculatePointOnCircle(n){return gn.measure("Circle.calculatePointOnCircle",()=>{const r=this.getLatLng(),i=this.getRadius();let s=this.angleCache.get(n);if(!s){const o=n*Math.PI/180;s={sin:Math.sin(o),cos:Math.cos(o)},this.angleCache.set(n,s)}return(!this.lastCenter||!this.lastCenter.equals(r))&&(this.lastCenter=r,this.lastCenterCosLat=Math.cos(r.lat*Math.PI/180)),Yn.latLng(r.lat+i/111319.9*s.sin,r.lng+i/(111319.9*this.lastCenterCosLat)*s.cos)},"Circle")}getCardinalPoints(){return gn.measure("Circle.getCardinalPoints",()=>[0,45,90,135,180,225,270,315].map(n=>this.calculatePointOnCircle(n)),"Circle")}calculateAngleFromPoint(n){return gn.measure("Circle.calculateAngleFromPoint",()=>{const r=this.getLatLng(),i=n.lng-r.lng,s=n.lat-r.lat;let o=Math.atan2(s,i)*180/Math.PI;return o<0&&(o+=360),o},"Circle")}resizeFromControlPoint(n){gn.measure("Circle.resizeFromControlPoint",()=>{const i=this.getLatLng().distanceTo(n);i>0&&super.setRadius(i)},"Circle")}clearCache(){this.angleCache.clear(),this.lastCenter=void 0,this.lastCenterCosLat=void 0}}const Yv=(t,e)=>{if(!t||typeof t!="string"||!t.startsWith("#"))return`rgba(0, 0, 0, ${e})`;const n=parseInt(t.slice(1,3),16),r=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return`rgba(${n}, ${r}, ${i}, ${e})`},m5=(t,e)=>{t.style.fontSize=e.fontSize,t.style.color=e.color,t.style.backgroundColor=Yv(e.backgroundColor,e.backgroundOpacity),e.hasBorder?t.style.border=`${e.borderWidth} solid ${Yv(e.borderColor,e.borderOpacity)}`:t.style.border="none",t.style.padding=e.padding,t.style.borderRadius=e.borderRadius},Wl=t=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const n=$t.DomUtil.create("div","drawing-help-message");return n.innerHTML=t,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n};function v5(t,e,n){const r=156543.03392*Math.cos(e*Math.PI/180)/Math.pow(2,n);return t/r}const ts=(t,e="m",n="")=>{let r,i;return e==="m²"?t>=1e4?(r=(t/1e4).toFixed(2),i="ha"):(r=t.toFixed(2),i="m²"):e==="m"?t>=1e3?(r=(t/1e3).toFixed(2),i="km"):(r=t.toFixed(2),i="m"):(r=t.toFixed(2),i=e),n?`${n}: ${r} ${i}`:`${r} ${i}`},FU=t=>({...t,clientX:t.clientX,clientY:t.clientY,button:t.button||0,buttons:t.buttons||0,altKey:t.altKey||!1}),jU=(t,e)=>{let n;return function(...r){window.clearTimeout(n),n=window.setTimeout(()=>t.apply(this,r),e)}},qd=(t,e)=>{let n=0;return function(...r){const i=Date.now();if(!(i-n<e))return n=i,t.apply(this,r)}};function zU(){const t=Ct(null),e=Ct(null),n=Ct(null),r=Ct(null),i=Ct(""),s=Ct(null),o=Ct(!1),a=Ct(null);window.addEventListener("clearControlPoints",()=>{s.value=null,n.value&&n.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(H=>H.remove()),document.querySelectorAll(".drawing-help-message").forEach(H=>H.remove())}),Zu(()=>{window.removeEventListener("clearControlPoints",()=>{}),t.value&&(t.value.remove(),t.value=null)});const l=(H,Z="Double-cliquez pour éditer")=>{const me={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},pe=(ze,Se)=>{var Xe;const ve=((Xe=t.value)==null?void 0:Xe.getZoom())||14,$e=H.lat,Ge=v5(Se.physicalSize,$e,ve);return`<div class="text-container" style="width:${Ge}px;height:${Ge}px;transform:rotate(${Se.rotation}deg)">
        <div class="text-annotation" style="font-size:${Ge*.2}px;color:${Se.color};background-color:${Yv(Se.backgroundColor,Se.backgroundOpacity)};border:${Se.hasBorder?Se.borderWidth+" solid "+Yv(Se.borderColor,Se.borderOpacity):"none"};padding:${Se.padding};border-radius:${Se.borderRadius}">${ze}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},de=()=>{if(!t.value)return;const ze=J.getIcon(),Se={html:pe(J.properties.text,J.properties.style),className:ze.options.className};J.setIcon($t.divIcon(Se))},X=$t.divIcon({html:pe(Z,me),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),J=$t.marker(H,{icon:X,draggable:!1,pmIgnore:!0});J.properties={type:"text",text:Z,style:{...me}},t.value&&(t.value.on("zoomend",de),J.on("remove",()=>{var ze;(ze=t.value)==null||ze.off("zoomend",de)})),de();let De=!1,Te=!1,Je=0,he=0;const ee=ze=>{if(!t.value)return;const Se=ze.target;if(Se.classList.contains("rotate")){De=!0;const ve=J.getLatLng(),$e=t.value.mouseEventToLatLng(ze);Je=Math.atan2($e.lat-ve.lat,$e.lng-ve.lng)*180/Math.PI,he=J.properties.style.rotation||0}else Se.classList.contains("move")&&(Te=!0);document.addEventListener("mousemove",se),document.addEventListener("mouseup",le)},se=ze=>{if(!(!Te||!t.value)){if(De){const Se=J.getLatLng(),ve=t.value.mouseEventToLatLng(ze),$e=Math.atan2(ve.lat-Se.lat,ve.lng-Se.lng)*180/Math.PI,Ge=(he+($e-Je))%360;J.properties.style.rotation=Ge;const Xe=J.getIcon(),lt={html:pe(J.properties.text,J.properties.style),className:Xe.options.className};J.setIcon($t.divIcon(lt))}else if(Te){const Se=FU(ze),ve=t.value.mouseEventToLatLng(Se);J.setLatLng(ve)}}},le=()=>{De=!1,Te=!1,document.removeEventListener("mousemove",se),document.removeEventListener("mouseup",le)};return J.on("add",()=>{const ze=J.getElement();ze&&ze.querySelectorAll(".control-button").forEach(ve=>{ve.addEventListener("mousedown",ee)})}),J.on("remove",()=>{const ze=J.getElement();ze&&ze.querySelectorAll(".control-button").forEach(ve=>{ve.removeEventListener("mousedown",ee)})}),J.on("dblclick",ze=>{var lt;$t.DomEvent.stopPropagation(ze);const Se=(lt=J.getElement())==null?void 0:lt.querySelector(".text-annotation");if(!Se)return;Se.contentEditable="true",Se.focus(),Se.classList.add("editing");const ve=window.getSelection(),$e=document.createRange();$e.selectNodeContents(Se),ve==null||ve.removeAllRanges(),ve==null||ve.addRange($e);const Ge=()=>{Se.contentEditable="false",Se.classList.remove("editing");const qe=Se.innerText.trim();if(qe){J.properties.text=qe;const Lt=J.getIcon(),Gt={html:pe(qe,J.properties.style),className:Lt.options.className};J.setIcon($t.divIcon(Gt))}Se.removeEventListener("blur",Ge),Se.removeEventListener("keydown",Xe)},Xe=qe=>{qe.key==="Enter"&&!qe.shiftKey&&(qe.preventDefault(),Ge())};Se.addEventListener("blur",Ge),Se.addEventListener("keydown",Xe)}),J},c=(H,Z)=>{const me=$t.DomUtil.create("div","measure-tooltip");if(me.innerHTML=Z,me.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(me),t.value){const pe=t.value.latLngToContainerPoint(H);me.style.left=`${pe.x+10}px`,me.style.top=`${pe.y-25}px`}return me},d=qd((H,Z,me)=>{if(H&&(H.innerHTML=me,t.value)){const pe=t.value.latLngToContainerPoint(Z);H.style.left=`${pe.x+10}px`,H.style.top=`${pe.y-25}px`}},100),p=(H,Z,me)=>{H.on("mouseover",()=>{const pe=c(H.getLatLng(),me());H.measureDiv=pe}),H.on("mousemove",pe=>{H.measureDiv&&t.value&&d(H.measureDiv,pe.latlng,me())}),H.on("mouseout",()=>{H.measureDiv&&(H.measureDiv.remove(),H.measureDiv=void 0)})};let v=[];const m=()=>{var H;v.cleanup&&v.cleanup(),n.value&&n.value.clearLayers(),v=[],(H=r.value)==null||H.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(Z=>Z.remove()),e.value&&e.value.getLayers().forEach(Z=>{Z instanceof $a&&Z.clearHelperPoints()})},x=(H,Z="#2563EB")=>{const me=$t.circleMarker(H,{radius:6,color:Z,fillColor:Z,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(me),me},E=(H,Z)=>{var pe,de,X,J,De,Te;console.log("Input layer:",{type:Z,instanceof:{Circle:H instanceof $t.Circle,Rectangle:H instanceof $t.Rectangle,Polygon:H instanceof $t.Polygon,Polyline:H instanceof $t.Polyline,ElevationLine:H instanceof Sd,Line:H instanceof na},options:H.options});const me={type:Z,style:H.options||{}};try{if(H instanceof $t.Circle){const Je=H.getRadius();me.radius=Je,me.diameter=Je*2,me.surface=Math.PI*Math.pow(Je,2),me.perimeter=2*Math.PI*Je,me.center=H.getLatLng()}else if(H instanceof $t.Rectangle){const Je=H.getBounds(),he=Je.getNorthEast(),ee=Je.getSouthWest(),se=Wu([[ee.lng,ee.lat],[he.lng,ee.lat]]),le=Wu([[ee.lng,ee.lat],[ee.lng,he.lat]]),ze=Gd(se,{units:"meters"}),Se=Gd(le,{units:"meters"});me.width=ze,me.height=Se,me.surface=ze*Se,me.perimeter=2*(ze+Se),me.dimensions={width:ze,height:Se}}else if(H instanceof $t.Polygon)try{const he=H.getLatLngs()[0].map(se=>[se.lng,se.lat]);he.push(he[0]);const ee=Hu([he]);me.surface=Rc(ee),me.perimeter=Gd(Wu(he),{units:"meters"})}catch(Je){console.error("Erreur lors du calcul des propriétés du polygone",Je)}else if(H instanceof $t.Polyline&&!(H instanceof $t.Polygon))try{const Je=H.getLatLngs();let he=0;for(let ee=1;ee<Je.length;ee++)he+=Je[ee].distanceTo(Je[ee-1]);me.length=he}catch(Je){console.error("Erreur lors du calcul de la longueur de la ligne",Je)}me.style={...me.style,color:((pe=H.options)==null?void 0:pe.color)||"#3388ff",weight:((de=H.options)==null?void 0:de.weight)||3,opacity:((X=H.options)==null?void 0:X.opacity)||1,fillColor:((J=H.options)==null?void 0:J.fillColor)||"#3388ff",fillOpacity:((De=H.options)==null?void 0:De.fillOpacity)||.2,dashArray:((Te=H.options)==null?void 0:Te.dashArray)||""}}catch(Je){console.error("Error calculating shape properties:",Je)}return me},k=(H,Z=2)=>{var J;if(!t.value){console.warn("Map is not available for text size update");return}const me=t.value.getZoom(),pe=H.getLatLng().lat,de=v5(Z,pe,me),X=(J=H.getElement())==null?void 0:J.querySelector(".text-annotation");X&&(H.properties.style.fontSize=`${de}px`,H.properties.physicalWidth=Z,H.properties.physicalHeight=Z,m5(X,H.properties.style))},A=(H,Z,me)=>{const pe=$t.map(H).setView(Z,me);t.value=pe,$t.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:5}).addTo(pe);const de=new $t.FeatureGroup;return de.addTo(pe),e.value=de,n.value=$t.featureGroup().addTo(pe),r.value=$t.featureGroup().addTo(pe),pe.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:de,snapLayers:[de,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),pe.on("pm:drawstart",X=>{o.value=!0,X.shape==="Circle"&&i.value==="Semicircle"&&(pe.getContainer().style.cursor="crosshair")}),pe.on("pm:drawend",()=>{o.value=!1,pe.getContainer().style.cursor="",s.value&&Wl("Cliquez sur la forme pour afficher les points de contrôle")}),pe.on("pm:create",nt),de.on("click",X=>{var De,Te,Je,he,ee,se,le,ze,Se,ve,$e,Ge,Xe,lt,qe;$t.DomEvent.stopPropagation(X);const J=X.layer;if(J.name&&!((De=J.properties)!=null&&De.name)?(J.properties||(J.properties={}),J.properties.name=J.name):(Te=J.properties)!=null&&Te.name&&!J.name&&(J.name=J.properties.name),console.log("[featureGroup click] État du nom:",{directName:J.name,propertiesName:(Je=J.properties)==null?void 0:Je.name,fullProperties:J.properties}),(he=r.value)==null||he.clearLayers(),m(),s.value=J,J instanceof op)F(J);else if(J instanceof $t.Circle){console.log("[useMapDrawing] Création du cercle personnalisé:",{propertyDescriptor:Object.getOwnPropertyDescriptor(J,"name"),directName:J.name,propertiesName:(ee=J.properties)==null?void 0:ee.name,styleNameBeforeTransfer:(le=(se=J.properties)==null?void 0:se.style)==null?void 0:le.name,nameIsEnumerable:Object.keys(J).includes("name"),allProperties:Object.keys(J.properties||{}),_dbId:J._dbId});const Lt=J.name,Gt=(ze=J.properties)==null?void 0:ze.name,rn=(ve=(Se=J.properties)==null?void 0:Se.style)==null?void 0:ve.name,yn=J._dbId,Ye=new op(J.getLatLng(),{...J.options,radius:J.getRadius()});J.properties?Ye.properties={...J.properties||{}}:Ye.updateProperties();const at=Lt||Gt||rn;at&&(Ye.properties.name=at,Ye.properties.style||(Ye.properties.style={}),Ye.properties.style.name=at,Ye.name=at),yn&&(Ye._dbId=yn),console.log("[useMapDrawing] Cercle après conversion:",{name:Ye.name,propertiesName:Ye.properties.name,stylePropertyName:($e=Ye.properties.style)==null?void 0:$e.name,allProperties:Object.keys(Ye.properties||{})}),(Ge=e.value)==null||Ge.removeLayer(J),(Xe=e.value)==null||Xe.addLayer(Ye),s.value=Ye,F(Ye)}else if(J instanceof $a)K(J);else if(J instanceof $t.Rectangle){const Lt=new $a(J.getBounds(),{...J.options});Lt.updateProperties(),(lt=e.value)==null||lt.removeLayer(J),(qe=e.value)==null||qe.addLayer(Lt),s.value=Lt,K(Lt)}else J instanceof $t.Polygon?N(J):J instanceof na||J instanceof $t.Polyline?B(J):J instanceof kh&&j(J)}),pe.on("pm:edit",X=>{var De,Te,Je;console.log("[pm:edit] Début",{layer:X.layer,currentProperties:X.layer.properties});const J=X.layer;if(J){const he=((De=J.properties)==null?void 0:De.type)||"unknown";if(fe(J,he),console.log("[pm:edit] Après updateLayerProperties",{updatedProperties:J.properties,selectedShape:s.value}),J instanceof op)F(J);else if(J instanceof $a)K(J);else if(J instanceof $t.Rectangle){const ee=new $a(J.getBounds(),{...J.options});ee.updateProperties(),(Te=e.value)==null||Te.removeLayer(J),(Je=e.value)==null||Je.addLayer(ee),s.value=ee,K(ee)}else J instanceof $t.Polygon?N(J):J instanceof na?(J.updateProperties(),fe(J,"Line"),B(J)):J instanceof $t.Polyline?B(J):J instanceof kh&&(J.updateProperties(),j(J))}}),pe.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(X=>X.remove()),Wl("Déplacez la forme à l'endroit souhaité")}),pe.on("pm:dragend",X=>{var De,Te,Je;console.log("[pm:dragend] Début",{layer:X.layer,currentProperties:X.layer.properties});const J=X.layer;if(J){const he=((De=J.properties)==null?void 0:De.type)||"unknown";if(J instanceof $t.Rectangle&&!(J instanceof $a)){const ee=new $a(J.getBounds(),{...J.options});ee.updateProperties(),(Te=e.value)==null||Te.removeLayer(J),(Je=e.value)==null||Je.addLayer(ee),s.value=ee,K(ee)}else J instanceof na?(J.updateProperties(),fe(J,"Line"),B(J)):fe(J,he);console.log("[pm:dragend] Après updateLayerProperties",{updatedProperties:J.properties,selectedShape:s.value})}setTimeout(()=>{Wl("Cliquez sur la forme pour afficher les points de contrôle")},100)}),pe.on("pm:remove",()=>{var X;(X=document.querySelector(".drawing-help-message"))==null||X.remove()}),pe.on("pm:select",()=>{document.querySelectorAll(".drawing-help-message").forEach(X=>X.remove()),Wl("Utilisez les points de contrôle pour modifier la forme")}),pe.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(X=>X.remove())}),pe.on("zoomstart",()=>{s.value&&(m(),s.value=null,document.querySelectorAll(".drawing-help-message").forEach(X=>X.remove()))}),pe},D=()=>{if(!(!t.value||!e.value||!e.value.getLayers().length))try{const H=e.value.getBounds();if(H.isValid()){const Z={zoomAnimation:t.value.options.zoomAnimation,fadeAnimation:t.value.options.fadeAnimation,markerZoomAnimation:t.value.options.markerZoomAnimation};t.value.options.zoomAnimation=!1,t.value.options.fadeAnimation=!1,t.value.options.markerZoomAnimation=!1,t.value.fitBounds(H,{padding:[50,50],maxZoom:18,animate:!1,duration:0,noMoveStart:!0}),t.value.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{try{t.value.options.fadeAnimation=Z.fadeAnimation,setTimeout(()=>{try{t.value.options.zoomAnimation=Z.zoomAnimation,t.value.options.markerZoomAnimation=Z.markerZoomAnimation}catch(me){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",me)}},500)}catch(me){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",me)}},500)}}catch(H){if(console.warn("[useMapDrawing] Error adjusting view:",H),t.value)try{t.value.options.zoomAnimation=!0,t.value.options.fadeAnimation=!0,t.value.options.markerZoomAnimation=!0,t.value.invalidateSize({animate:!1,pan:!1})}catch(Z){console.error("[useMapDrawing] Erreur lors de la restauration après échec:",Z)}}},V=H=>{var me;if(!t.value)return;document.querySelectorAll(".drawing-help-message").forEach(pe=>pe.remove());try{const pe=t.value.pm;pe.globalEditModeEnabled()&&pe.disableGlobalEditMode(),pe.globalRemovalModeEnabled()&&pe.disableGlobalRemovalMode(),pe.disableDraw(),m(),(me=r.value)==null||me.clearLayers()}catch(pe){console.error("Error disabling modes:",pe)}if(i.value=H,!H){m();return}let Z=H;switch(H){case"Note":Z="GeoNote";break;case"Polygon":Z="Polygon";break;case"Line":Z="Line";break;case"ElevationLine":Z="ElevationLine";break;default:Z=H}H=Z,ae(),setTimeout(()=>{var pe,de,X,J,De,Te,Je,he,ee,se,le,ze,Se;try{switch(H){case"Polygon":Wl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(pe=t.value)==null||pe.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(de=t.value)==null||de.off("pm:create"),(X=t.value)==null||X.on("pm:create",$e=>{var Ge,Xe,lt;if($e.shape==="Polygon"&&$e.layer){const qe=$e.layer.getLatLngs()[0];(Ge=t.value)==null||Ge.removeLayer($e.layer),(Xe=e.value)!=null&&Xe.hasLayer($e.layer)&&e.value.removeLayer($e.layer);const Lt=new cd(qe,{color:"#3B82F6",weight:3,fillColor:"#3B82F6",fillOpacity:.2});e.value&&(e.value.addLayer(Lt),s.value=Lt,Lt.updateProperties()),(lt=t.value)==null||lt.pm.disableDraw(),ae()}});break;case"Circle":e.value&&e.value.getLayers().filter(Ge=>Ge instanceof $a).forEach(Ge=>{Ge.toggleHelperPoints(t.value,!0,"#DC2626","#2563EB")}),t.value.pm.setGlobalOptions({snapDistance:15,snapSegment:!0,snapVertices:!0,snapLayers:[e.value,r.value],snapMiddle:!0,snapIntersections:!0}),Wl("Positionnez le centre du cercle. Points bleus : milieu des côtés, Points rouges : sommets, Point vert : centre"),t.value.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":Wl("Cliquez et maintenez pour dessiner un rectangle, relâchez pour terminer"),(J=t.value)==null||J.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":Wl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(De=t.value)==null||De.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":Wl("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(Te=t.value)==null||Te.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(Je=t.value)==null||Je.off("pm:create"),(he=t.value)==null||he.on("pm:create",$e=>{var Ge,Xe,lt;if($e.shape==="Line"&&$e.layer){const qe=$e.layer.getLatLngs();(Ge=t.value)==null||Ge.removeLayer($e.layer),(Xe=e.value)!=null&&Xe.hasLayer($e.layer)&&e.value.removeLayer($e.layer);const Lt=new na(qe,{color:"#3B82F6",weight:3,opacity:.8});e.value&&(e.value.addLayer(Lt),s.value=Lt,Lt.updateProperties()),(lt=t.value)==null||lt.pm.disableDraw(),ae()}});break;case"Text":if(Wl("Cliquez pour ajouter du texte, double-cliquez pour éditer"),t.value){const $e=Ge=>{if(!t.value||!e.value)return;const Xe=l(Ge.latlng);e.value.addLayer(Xe),s.value=Xe,t.value.off("click",$e),V("")};t.value.on("click",$e)}break;case"GeoNote":if(Wl("Cliquez pour ajouter une note géolocalisée, double-cliquez pour éditer"),t.value){const $e=async Ge=>{if(!(!t.value||!e.value))try{const Xe=Tp(),lt=new kh(Ge.latlng,{color:"#3B82F6",name:"Note géolocalisée",description:"",columnId:"1"});e.value.addLayer(lt),s.value=lt,lt.updateProperties();try{const qe=Xe.currentMapId||void 0,Lt=await lt.saveNote(qe);console.log(`[useMapDrawing] Note sauvegardée avec succès, ID backend: ${Lt}`);const Gt=lt._leaflet_id;console.log(`[useMapDrawing] ID Leaflet: ${Gt}, ID backend: ${Lt}`),window.dispatchEvent(new CustomEvent("note:created",{detail:{geoNote:lt,leafletId:Gt,backendId:Lt}})),lt.openPopup()}catch(qe){console.error("[useMapDrawing] Erreur lors de la sauvegarde de la note:",qe),Mh(async()=>{const{useNotificationStore:Lt}=await Promise.resolve().then(()=>eR);return{useNotificationStore:Lt}},void 0).then(({useNotificationStore:Lt})=>{Lt().error("Erreur lors de la création de la note")})}t.value.off("click",$e),V("")}catch(Xe){console.error("[useMapDrawing] Erreur lors de la création de la note:",Xe),t.value.off("click",$e),V("")}};t.value.on("click",$e)}break;case"delete":Wl("Cliquez sur une forme pour la supprimer"),(ee=t.value)==null||ee.pm.enableGlobalRemovalMode();break;case"ElevationLine":Wl("Cliquez et maintenez pour tracer le profil altimétrique"),(se=t.value)==null||se.pm.enableDraw("Line",{finishOn:"mouseup",continueDrawing:!1,allowSelfIntersection:!1,templineStyle:{color:"#FF4500",weight:4,opacity:.8}}),(le=t.value)==null||le.pm.setGlobalOptions({continueDrawing:!1,finishOn:"mouseup",preventMarkerRemoval:!0,preventVertexEdit:!0,preventMarkerEdit:!0}),(ze=t.value)==null||ze.off("pm:create"),(Se=t.value)==null||Se.on("pm:create",async $e=>{var Ge,Xe,lt;if($e.shape==="Line"&&$e.layer){const qe=$e.layer.getLatLngs();(Ge=t.value)==null||Ge.removeLayer($e.layer),(Xe=e.value)!=null&&Xe.hasLayer($e.layer)&&e.value.removeLayer($e.layer);const Lt=new Sd(qe,{color:"#FF4500",weight:4,opacity:.8,interactive:!1,pmIgnore:!0});if(e.value){e.value.addLayer(Lt),s.value=Lt,await Lt.updateElevationProfile();const Gt=E(Lt,"ElevationLine");Object.assign(Lt.properties,{...Gt,...Lt.properties,type:"ElevationLine",elevationData:Lt.getElevationData()}),s.value=null,ca(()=>{s.value=Lt})}(lt=t.value)==null||lt.pm.disableDraw(),i.value="",ae()}});break}}catch(ve){console.error("[setDrawingTool] Erreur lors de la configuration de l'outil:",ve)}},100)},Y=H=>{var me;if(!s.value)return;const Z=s.value;if(Z.properties=Z.properties||{},Z.properties.style=Z.properties.style||{},Z.properties.style={...Z.properties.style,...H},Z.properties.type==="text"){const pe=Z.properties._textLayer,de=(me=pe==null?void 0:pe.getElement())==null?void 0:me.querySelector(".text-annotation");de&&m5(de,Z.properties.style);const X={color:H.borderColor||Z.properties.style.borderColor,weight:parseInt(H.borderWidth||Z.properties.style.borderWidth),opacity:H.borderOpacity??Z.properties.style.borderOpacity};"setStyle"in Z&&Z.setStyle(X)}else if(Z.properties.type==="TextRectangle")console.log("[updateShapeStyle] TextRectangle supprimé selon les exigences");else{const pe={};H.fillColor&&(pe.fillColor=H.fillColor),H.fillOpacity!==void 0&&(pe.fillOpacity=H.fillOpacity),H.strokeColor&&(pe.color=H.strokeColor),H.strokeOpacity!==void 0&&(pe.opacity=H.strokeOpacity),H.strokeWidth!==void 0&&(pe.weight=H.strokeWidth),H.dashArray&&(pe.dashArray=H.dashArray),"setStyle"in Z&&Z.setStyle(pe)}},te=H=>{var J,De,Te,Je,he;if(!s.value){console.warn("[useMapDrawing] Cannot update properties: no shape selected");return}console.log("[useMapDrawing] Updating shape properties",{before:s.value.properties,newProps:H,layerType:(J=s.value.properties)==null?void 0:J.type,beforeName:s.value.name,beforePropertiesName:(De=s.value.properties)==null?void 0:De.name,beforeCategory:(Te=s.value.properties)==null?void 0:Te.category,nameIsDirectProperty:"name"in s.value,dbId:s.value._dbId}),s.value.properties||(s.value.properties={});const Z=s.value.properties.type;console.log(`[useMapDrawing] Type actuel de la forme: ${Z}`),s.value.properties.category||(s.value.properties.category="forages"),s.value.properties.accessLevel||(s.value.properties.accessLevel="visitor"),s.value._dbId||(s.value._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[useMapDrawing] Assigned temporary dbId: ${s.value._dbId}`));const me=s.value.properties.type;console.log(`[useMapDrawing] Type original avant mise à jour: ${me}`);const pe=s.value.properties.category;console.log(`[useMapDrawing] Catégorie existante: ${pe}`);const de="category"in H&&H.category!==pe;if(Object.keys(H).forEach(ee=>{ee==="type"&&me?console.log(`[useMapDrawing] Préservation du type original: ${me}`):s.value.properties[ee]=H[ee],ee==="name"&&(console.log(`[useMapDrawing] Setting name "${H[ee]}" directly on layer`),s.value.name=H[ee]),ee==="category"&&console.log(`[useMapDrawing] Mise à jour de la catégorie: ${pe} -> ${H[ee]}`)}),me&&(s.value.properties.type=me),pe&&!de&&(console.log(`[useMapDrawing] Restauration de la catégorie originale: ${pe}`),s.value.properties.category=pe),s.value._dbId&&de){const ee=Tp(),se=ee.elements.find(le=>le.id===s.value._dbId);if(se){console.log(`[useMapDrawing] Mise à jour de la catégorie dans le store: ${s.value.properties.category} pour l'élément ${s.value._dbId}`);const le=se;le.data||(le.data={}),le.data.category=s.value.properties.category,ee.$patch({unsavedChanges:!0})}}const X=new CustomEvent("shape:propertiesUpdated",{detail:{shape:s.value,properties:s.value.properties,categoryUpdated:de}});if(window.dispatchEvent(X),console.log("[useMapDrawing] Updated shape properties",{after:s.value.properties,name:s.value.name,propertiesName:(Je=s.value.properties)==null?void 0:Je.name,allLayerKeys:Object.keys(s.value),allPropertiesKeys:Object.keys(s.value.properties||{})}),((he=s.value.properties)==null?void 0:he.type)==="Circle"){const ee=s.value,se=ee.getRadius();ee.properties.radius=se,ee.properties.diameter=se*2,ee.properties.surface=Math.PI*se*se,ee.properties.perimeter=2*Math.PI*se,H.name&&(console.log(`[useMapDrawing] Ensuring circle name "${H.name}" is set in multiple places`),ee.properties.name=H.name,ee.properties.style.name=H.name,ee.name=H.name,console.log("[useMapDrawing] Circle name verification:",{circleDirectName:ee.name,circlePropertiesName:ee.properties.name,nameIsEnumerable:Object.keys(ee).includes("name"),propertiesNameIsEnumerable:Object.keys(ee.properties).includes("name")}))}},ge=H=>{console.log("[forceShapeUpdate] Début",{currentProperties:H.properties,selectedShapeRef:s.value}),s.value=null,ca(()=>{s.value=H,console.log("[forceShapeUpdate] Après mise à jour",{selectedShape:s.value,properties:s.value.properties})})},fe=(H,Z)=>{console.log("[updateLayerProperties] Début",{layer:H,shapeType:Z,currentProperties:H.properties}),jU((pe,de)=>{const X=E(pe,de);console.log("[updateLayerProperties] Nouvelles propriétés calculées",{newProperties:X}),pe.properties={...X},ge(pe),pe.fire("properties:updated",{shape:pe,properties:pe.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:pe.properties,selectedShape:s.value})},100)(H,Z)},I=(H,Z)=>$t.latLng((H.lat+Z.lat)/2,(H.lng+Z.lng)/2),F=H=>{if(!t.value||!e.value)return;m();const Z=H.getLatLng(),me=H.getRadius(),pe=x(Z,"#059669");v.push(pe),p(pe,H,()=>[ts(me,"m","Rayon"),ts(me*2,"m","Diamètre"),ts(Math.PI*Math.pow(me,2),"m²","Surface")].join("<br>"));const de=[],X=[0,45,90,135,180,225,270,315];X.forEach(J=>{const De=H.calculatePointOnCircle(J),Te=x(De,"#2563EB");de.push(Te),v.push(Te),p(Te,H,()=>ts(me,"m","Rayon")),Te.on("mousedown",Je=>{if(!t.value)return;$t.DomEvent.stopPropagation(Je),t.value.dragging.disable();let he=!0;const ee=le=>{he&&(H.resizeFromControlPoint(le.latlng),de.forEach((ze,Se)=>{const ve=H.calculatePointOnCircle(X[Se]);ze.setLatLng(ve)}),pe.setLatLng(H.getLatLng()),Te.measureDiv&&(Te.measureDiv.innerHTML=ts(H.getRadius(),"m","Rayon")))},se=()=>{he=!1,t.value&&(t.value.off("mousemove",ee),document.removeEventListener("mouseup",se),t.value.dragging.enable(),H.updateProperties(),s.value=null,ca(()=>{s.value=H}),fe(H,"Circle"))};t.value.on("mousemove",ee),document.addEventListener("mouseup",se)})}),pe.on("mousedown",J=>{if(!t.value)return;$t.DomEvent.stopPropagation(J),t.value.dragging.disable();let De=!0;const Te=H.getLatLng(),Je=J.latlng,he=se=>{if(!De)return;const le=se.latlng.lng-Je.lng,ze=se.latlng.lat-Je.lat,Se=$t.latLng(Te.lat+ze,Te.lng+le);$t.Circle.prototype.setLatLng.call(H,Se),pe.setLatLng(Se),de.forEach((ve,$e)=>{const Ge=H.calculatePointOnCircle(X[$e]);ve.setLatLng(Ge)}),pe.measureDiv&&(pe.measureDiv.innerHTML=[ts(H.getRadius(),"m","Rayon"),ts(H.getRadius()*2,"m","Diamètre"),ts(Math.PI*Math.pow(H.getRadius(),2),"m²","Surface")].join("<br>"))},ee=()=>{De=!1,t.value&&(t.value.off("mousemove",he),document.removeEventListener("mouseup",ee),t.value.dragging.enable(),H.updateProperties(),s.value=null,ca(()=>{s.value=H}),fe(H,"Circle"))};t.value.on("mousemove",he),document.addEventListener("mouseup",ee)}),H.on("circle:resized",()=>{fe(H,"Circle")}),s.value=H},K=H=>{var he;if(!t.value||!e.value)return;if(!(H instanceof $a)){console.warn("La couche n'est pas une instance de Rectangle");return}const Z=H;m();const me=Z.getCenter(),pe=Z.getRotatedCorners(),de=Z.getMidPoints(),X=x(me,"#059669");v.push(X),p(X,Z,()=>{const{width:ee,height:se}=Z.getDimensions(),le=ee*se,ze=Z.getRotation();return[ts(ee,"m","Largeur"),ts(se,"m","Hauteur"),ts(le,"m²","Surface"),`Rotation: ${ze.toFixed(1)}°`].join("<br>")});const J=x($t.latLng(me.lat+(pe[0].lat-me.lat)*1.2,me.lng+(pe[0].lng-me.lng)*1.2),"#F97316");v.push(J);const De=$t.polyline([me,J.getLatLng()],{color:"#F97316",weight:1,opacity:.6,dashArray:"4",pmIgnore:!0});(he=n.value)==null||he.addLayer(De);const Te=pe.map(ee=>{const se=x(ee,"#DC2626");return v.push(se),p(se,Z,()=>{const{width:le,height:ze}=Z.getDimensions();return[ts(le,"m","Largeur"),ts(ze,"m","Hauteur")].join("<br>")}),se}),Je=de.map((ee,se)=>{const le=x(ee,"#2b6451");return v.push(le),p(le,Z,()=>{const{width:ze,height:Se}=Z.getDimensions(),ve=se%2===0?ze:Se;return[ts(ve,"m","Longueur du côté"),ts(ve/2,"m","Distance au coin")].join("<br>")}),le});X.on("mousedown",ee=>{if(!t.value)return;$t.DomEvent.stopPropagation(ee),t.value.dragging.disable();let se=!0;const le=Se=>{if(!se)return;Z.moveFromCenter(Se.latlng);const ve=Z.getRotatedCorners(),$e=Z.getMidPoints();Te.forEach((Xe,lt)=>Xe.setLatLng(ve[lt])),Je.forEach((Xe,lt)=>Xe.setLatLng($e[lt])),X.setLatLng(Se.latlng);const Ge=$t.latLng(Se.latlng.lat+(ve[0].lat-Se.latlng.lat)*1.2,Se.latlng.lng+(ve[0].lng-Se.latlng.lng)*1.2);J.setLatLng(Ge),De.setLatLngs([Se.latlng,Ge])},ze=()=>{se=!1,t.value&&(t.value.off("mousemove",le),document.removeEventListener("mouseup",ze),t.value.dragging.enable(),Z.updateProperties(),s.value=null,ca(()=>{s.value=Z}))};t.value.on("mousemove",le),document.addEventListener("mouseup",ze)}),J.on("mousedown",ee=>{if(!t.value)return;$t.DomEvent.stopPropagation(ee),t.value.dragging.disable();let se=!1;const le=ee.latlng,ze=Z.getRotation(),Se=Z.getCenter(),ve=le.lng-Se.lng,$e=le.lat-Se.lat,Ge=Math.atan2($e,ve)*180/Math.PI;v.forEach(qe=>{qe!==J&&(qe.setStyle({opacity:0,fillOpacity:0}),qe.measureDiv&&(qe.measureDiv.style.display="none"))});const Xe=qd(qe=>{se||(se=!0);const Lt=qe.latlng.lng-Se.lng,Gt=qe.latlng.lat-Se.lat;let yn=Math.atan2(Gt,Lt)*180/Math.PI-Ge,Ye=(ze+yn)%360;Ye<0&&(Ye+=360),Z.setRotation(Ye,!1),J.setLatLng(qe.latlng),De.setLatLngs([Se,qe.latlng])},16),lt=()=>{t.value&&(t.value.off("mousemove",Xe),document.removeEventListener("mouseup",lt),t.value.dragging.enable(),se&&Z.finalizeRotation(),s.value=null,ca(()=>{s.value=Z,m(),K(Z)}))};t.value.on("mousemove",Xe),document.addEventListener("mouseup",lt)}),Z.on("coordinates:updated",ee=>{const{corners:se,center:le}=ee,ze=Z.getMidPoints();Te.forEach((ve,$e)=>ve.setLatLng(se[$e])),Je.forEach((ve,$e)=>ve.setLatLng(ze[$e])),X.setLatLng(le);const Se=$t.latLng(le.lat+(se[0].lat-le.lat)*1.2,le.lng+(se[0].lng-le.lng)*1.2);J.setLatLng(Se),De.setLatLngs([le,Se])})},B=H=>{if(!t.value||!e.value)return;m();const Z=H.getLatLngs();if(!Z||Z.length===0){console.warn("Pas de points pour la ligne");return}let me=null;if(H instanceof na){const pe=H.getCenter();me=x(pe,"#059669"),v.push(me),p(me,H,()=>{const de=H.getLength()||0;return ts(de,"m","Longueur totale")}),me.on("mousedown",de=>{if(!t.value)return;$t.DomEvent.stopPropagation(de),t.value.dragging.disable();let X=!0;const J=H.getLatLngs().map(ee=>$t.latLng(ee.lat,ee.lng)),De=de.latlng;H instanceof na&&(H.off("move:end"),H.off("vertex:moved"),H.off("latlngs:updated"),H.off("properties:updated")),v.forEach((ee,se)=>{se>0&&(ee.setStyle({opacity:0,fillOpacity:0}),ee.measureDiv&&(ee.measureDiv.style.display="none"))});const Je=qd(ee=>{if(!X)return;const se=ee.latlng.lng-De.lng,le=ee.latlng.lat-De.lat,ze=J.map(Se=>$t.latLng(Se.lat+le,Se.lng+se));$t.Polyline.prototype.setLatLngs.call(H,ze),me==null||me.setLatLng(ee.latlng)},16),he=()=>{if(X=!1,!!t.value){if(t.value.off("mousemove",Je),document.removeEventListener("mouseup",he),t.value.dragging.enable(),H instanceof na){const ee=()=>{m(),B(H)};H.on("move:end",ee),H.on("vertex:moved",ee),H.on("latlngs:updated",ee),H.on("properties:updated",ee),H.updateProperties(),fe(H,"Line")}m(),B(H)}};t.value.on("mousemove",Je),document.addEventListener("mouseup",he)})}if(Z.forEach((pe,de)=>{const X=x(pe,"#DC2626");v.push(X),p(X,H,()=>{if(H instanceof na){const J=H.getLength()||0,De=H.getLengthToVertex(de);return[ts(De,"m","Distance depuis le début"),ts(J,"m","Longueur totale")].join("<br>")}return""}),X.on("mousedown",J=>{if(!t.value)return;$t.DomEvent.stopPropagation(J),t.value.dragging.disable();let De=!0;H instanceof na&&(H.off("move:end"),H.off("vertex:moved"),H.off("latlngs:updated"),H.off("properties:updated")),v.forEach((he,ee)=>{ee!==de+1&&(he.setStyle({opacity:0,fillOpacity:0}),he.measureDiv&&(he.measureDiv.style.display="none"))});const Te=qd(he=>{if(!De)return;const ee=H.getLatLngs();ee[de]=he.latlng,$t.Polyline.prototype.setLatLngs.call(H,ee),X.setLatLng(he.latlng)},16),Je=()=>{if(De=!1,!!t.value){if(t.value.off("mousemove",Te),document.removeEventListener("mouseup",Je),t.value.dragging.enable(),H instanceof na){const he=()=>{m(),B(H)};H.on("move:end",he),H.on("vertex:moved",he),H.on("latlngs:updated",he),H.on("properties:updated",he),H.updateProperties(),fe(H,"Line")}m(),B(H)}};t.value.on("mousemove",Te),document.addEventListener("mouseup",Je)})}),Z.length>=2)for(let pe=0;pe<Z.length-1;pe++){const de=Z[pe],X=Z[pe+1],J=$t.latLng((de.lat+X.lat)/2,(de.lng+X.lng)/2),De=x(J,"#2b6451");v.push(De),p(De,H,()=>{if(H instanceof na){const Te=H.getSegmentLengthAt(pe),Je=H.getLength()||0,he=H.getLengthToVertex(pe)+Te/2;return[ts(Te,"m","Longueur du segment"),ts(Te/2,"m","Demi-segment"),ts(he,"m","Distance depuis le début"),ts(Je,"m","Longueur totale")].join("<br>")}return""})}if(H instanceof na){const pe=()=>{m(),B(H)};H.on("move:start",()=>{v.forEach((de,X)=>{X>0&&(de.setStyle({opacity:0,fillOpacity:0}),de.measureDiv&&(de.measureDiv.style.display="none"))})}),H.on("move:end",pe),H.on("vertex:moved",pe),H.on("latlngs:updated",pe),H.on("properties:updated",pe),v.cleanup=()=>{H.off("move:start",()=>{}),H.off("move:end",pe),H.off("vertex:moved",pe),H.off("latlngs:updated",pe),H.off("properties:updated",pe)}}},N=H=>{if(!t.value||!e.value)return;m();const Z=H.getLatLngs()[0],me=Z.map(Je=>[Je.lng,Je.lat]);me.push(me[0]);const pe=Hu([me]),de=Rc(pe),X=Z.reduce((Je,he,ee)=>{const se=Z[(ee+1)%Z.length];return Je+he.distanceTo(se)},0);let J;if(typeof H.getCenter=="function")try{J=H.getCenter()}catch(Je){console.warn("Erreur lors de la récupération du centre du polygone via getCenter(), utilisation de la méthode alternative",Je);const he=Wg(pe);J=$t.latLng(he.geometry.coordinates[1],he.geometry.coordinates[0])}else{const Je=Wg(pe);J=$t.latLng(Je.geometry.coordinates[1],Je.geometry.coordinates[0])}const De=x(J,"#059669");v.push(De),p(De,H,()=>[ts(X,"m","Périmètre"),ts(de,"m²","Surface")].join("<br>")),De.on("mousedown",Je=>{if(!t.value)return;$t.DomEvent.stopPropagation(Je),t.value.dragging.disable();let he=!0;const ee=Je.latlng,se=[...Z];v.forEach((ve,$e)=>{$e>0&&ve.setStyle({opacity:0,fillOpacity:0})});const le=qd(ve=>{if(!he)return;const $e=ve.latlng.lng-ee.lng,Ge=ve.latlng.lat-ee.lat,Xe=se.map(lt=>$t.latLng(lt.lat+Ge,lt.lng+$e));$t.Polygon.prototype.setLatLngs.call(H,[Xe]),De.setLatLng(ve.latlng)},16),ze=ve=>{he&&le(ve)},Se=()=>{if(he=!1,!!t.value){if(t.value.off("mousemove",ze),document.removeEventListener("mouseup",Se),t.value.dragging.enable(),H.properties){const ve=H.getLatLngs()[0],$e=ve.map(Xe=>[Xe.lng,Xe.lat]);$e.push($e[0]);const Ge=Hu([$e]);H.properties.area=Rc(Ge),H.properties.perimeter=ve.reduce((Xe,lt,qe)=>{const Lt=ve[(qe+1)%ve.length];return Xe+lt.distanceTo(Lt)},0),H.properties.surface=H.properties.area}m(),N(H),s.value=null,ca(()=>{s.value=H})}};t.value.on("mousemove",ze),document.addEventListener("mouseup",Se)}),Z.forEach((Je,he)=>{const ee=x(Je,"#DC2626");v.push(ee),p(ee,H,()=>{const se=Z[(he-1+Z.length)%Z.length],le=Z[(he+1)%Z.length],ze=Je.distanceTo(se),Se=Je.distanceTo(le);return[ts(ze,"m","Distance au point précédent"),ts(Se,"m","Distance au point suivant"),ts(X,"m","Périmètre total"),ts(de,"m²","Surface")].join("<br>")}),ee.on("mousedown",se=>{if($t.DomEvent.stopPropagation(se),!t.value)return;t.value.dragging.disable();let le=!0;De&&(De.setStyle({opacity:0,fillOpacity:0}),De.measureDiv&&(De.measureDiv.style.display="none"));const ze=qd($e=>{if(!le)return;Z[he]=$e.latlng,$t.Polygon.prototype.setLatLngs.call(H,[Z]),ee.setLatLng($e.latlng);const Ge=v.slice(Z.length+1),Xe=(he-1+Z.length)%Z.length,lt=Ge[Xe];if(lt){const Lt=Z[Xe],Gt=Z[he],rn=$t.latLng((Lt.lat+Gt.lat)/2,(Lt.lng+Gt.lng)/2);lt.setLatLng(rn)}const qe=Ge[he];if(qe){const Lt=Z[he],Gt=Z[(he+1)%Z.length],rn=$t.latLng((Lt.lat+Gt.lat)/2,(Lt.lng+Gt.lng)/2);qe.setLatLng(rn)}},16),Se=$e=>{le&&ze($e)},ve=()=>{if(le=!1,!!t.value){if(t.value.off("mousemove",Se),document.removeEventListener("mouseup",ve),t.value.dragging.enable(),H.properties){const $e=H.getLatLngs()[0].map(Xe=>[Xe.lng,Xe.lat]);$e.push($e[0]);const Ge=Hu([$e]);H.properties.area=Rc(Ge),H.properties.perimeter=Z.reduce((Xe,lt,qe)=>{const Lt=Z[(qe+1)%Z.length];return Xe+lt.distanceTo(Lt)},0),H.properties.surface=H.properties.area}m(),N(H),s.value=null,ca(()=>{s.value=H})}};t.value.on("mousemove",Se),document.addEventListener("mouseup",ve)})}),(()=>{const Je=H.getLatLngs()[0];v.slice(Je.length+1).forEach(ee=>{n.value&&n.value.removeLayer(ee)}),v=v.slice(0,Je.length+1);const he=new Array(Je.length);for(let ee=0;ee<Je.length;ee++){const se=Je[ee],le=Je[(ee+1)%Je.length];he[ee]=I(se,le)}he.forEach((ee,se)=>{const le=x(ee,"#2b6451");v.push(le),p(le,H,()=>{const ze=Je[se],Se=Je[(se+1)%Je.length],ve=ze.distanceTo(Se);return[ts(ve,"m","Longueur du segment"),ts(X,"m","Périmètre total"),ts(de,"m²","Surface")].join("<br>")}),le.on("mousedown",ze=>{if(!t.value)return;$t.DomEvent.stopPropagation(ze),t.value.dragging.disable();let Se=!0;const ve=se;De&&(De.setStyle({opacity:0,fillOpacity:0}),De.measureDiv&&(De.measureDiv.style.display="none"));const $e=[...H.getLatLngs()[0]];$e.splice((ve+1)%$e.length,0,ee),H.setLatLngs([$e]),m(),N(H);const Ge=ve+1,Xe=1+Ge,lt=Ge<v.length-1?v[Xe]:null;if(lt){const qe=Gt=>{if(!Se)return;const rn=H.getLatLngs()[0];rn[Ge]=Gt.latlng,H.setLatLngs([rn]),lt.setLatLng(Gt.latlng);const yn=v.slice(1+rn.length),Ye=(Ge-1+rn.length)%rn.length,at=Ge;if(yn[Ye]){const it=rn[Ye],Vt=rn[Ge],Yt=$t.latLng((it.lat+Vt.lat)/2,(it.lng+Vt.lng)/2);yn[Ye].setLatLng(Yt)}if(yn[at]){const it=rn[Ge],Vt=rn[(Ge+1)%rn.length],Yt=$t.latLng((it.lat+Vt.lat)/2,(it.lng+Vt.lng)/2);yn[at].setLatLng(Yt)}},Lt=()=>{if(Se=!1,!!t.value){if(t.value.off("mousemove",qe),document.removeEventListener("mouseup",Lt),t.value.dragging.enable(),H.properties){const Gt=H.getLatLngs()[0].map(yn=>[yn.lng,yn.lat]);Gt.push(Gt[0]);const rn=Hu([Gt]);H.properties.area=Rc(rn),H.properties.perimeter=H.getLatLngs()[0].reduce((yn,Ye,at,it)=>{const Vt=it[(at+1)%it.length];return yn+Ye.distanceTo(Vt)},0)}m(),N(H),s.value=null,ca(()=>{s.value=H})}};t.value.on("mousemove",qe),document.addEventListener("mouseup",Lt)}else t.value.dragging.enable(),m(),N(H)})})})()},j=H=>{if(!t.value||!e.value)return;m();const Z=H.getLatLng(),me=x(Z,"#059669");v.push(me),p(me,H,()=>`Position: ${Z.lat.toFixed(6)}, ${Z.lng.toFixed(6)}`),me.on("mousedown",pe=>{if(!t.value)return;$t.DomEvent.stopPropagation(pe),t.value.dragging.disable(),H.startMoving();let de=!0;const J=qd(Te=>{de&&(me.setLatLng(Te.latlng),H.setLatLng(Te.latlng))},16),De=()=>{t.value&&(t.value.off("mousemove",J),document.removeEventListener("mouseup",De),t.value.dragging.enable(),de=!1,H.finishMoving(),H.updateProperties(),s.value=null,ca(()=>{s.value=H,m(),j(H)}))};t.value.on("mousemove",J),document.addEventListener("mouseup",De)}),s.value=H},z=H=>{if(!(!t.value||!r.value)){console.log("[generateTempControlPoints] Génération des points temporaires pour",{layerType:H.constructor.name,properties:H.properties}),r.value.clearLayers();try{if(H instanceof $a)H.generateHelperPoints(t.value);else if(H instanceof op){if("getLatLng"in H&&typeof H.getLatLng=="function"){const Z=H.getLatLng();if(Z){const me=$t.circleMarker(Z,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(me)}}}else if(H instanceof kh){const Z=H.getLatLng();if(Z){const me=$t.circleMarker(Z,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(me)}}else if(H instanceof cd||H instanceof $t.Polygon){let Z=[];if("getLatLngs"in H){const pe=H.getLatLngs();if(Array.isArray(pe)&&pe.length>0){const de=pe[0];Array.isArray(de)?Z=de:de instanceof $t.LatLng&&(Z=pe)}}let me=null;if(H instanceof cd&&typeof H.getCenter=="function")me=H.getCenter();else if(Z.length>0){const pe=Z.map(J=>[J.lng,J.lat]);pe.push(pe[0]);const de=Hu([pe]),X=Wg(de);me=$t.latLng(X.geometry.coordinates[1],X.geometry.coordinates[0])}if(me){const pe=$t.circleMarker(me,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(pe)}Z.forEach(pe=>{if(pe){const de=$t.circleMarker(pe,{radius:5,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(de)}});for(let pe=0;pe<Z.length;pe++){const de=Z[pe],X=Z[(pe+1)%Z.length];if(de&&X){const J=$t.latLng((de.lat+X.lat)/2,(de.lng+X.lng)/2),De=$t.circleMarker(J,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(De)}}}console.log("[generateTempControlPoints] Points temporaires générés",{count:r.value.getLayers().length})}catch(Z){console.error("[generateTempControlPoints] Erreur lors de la génération des points temporaires:",Z)}}},U=H=>{console.log("Nombre total de couches:",H.length);const Z=H.filter(J=>{var Je;if(!J)return!1;let De=0,Te={width:0,height:0};if(J instanceof $t.Circle){De=Math.PI*Math.pow(J.getRadius(),2);const he=J.getRadius();console.log(`
Forme détectée: Circle`),console.log(`- Surface propre: ${De.toFixed(2)} m²`),console.log(`- Rayon: ${he.toFixed(2)} m`),console.log("- Angle: Cercle complet (360°)")}else if(J instanceof $a||J instanceof $t.Rectangle){const he=J.getBounds(),ee=he.getSouthWest(),se=he.getNorthEast(),le=Wu([[ee.lng,ee.lat],[se.lng,ee.lat]]),ze=Wu([[ee.lng,ee.lat],[ee.lng,se.lat]]);Te.width=Gd(le,{units:"meters"}),Te.height=Gd(ze,{units:"meters"}),De=Te.width*Te.height,console.log(`
Forme détectée: Rectangle`),console.log(`- Surface propre: ${De.toFixed(2)} m²`),console.log(`- Largeur: ${Te.width.toFixed(2)} m`),console.log(`- Hauteur: ${Te.height.toFixed(2)} m`)}else if(((Je=J.properties)==null?void 0:Je.type)==="Semicircle"){const he=J.getStartAngle(),ee=J.getStopAngle(),se=(ee-he+360)%360,le=J.getRadius();De=Math.PI*Math.pow(le,2)*se/360,console.log(`
Forme détectée: Semicircle`),console.log(`- Surface propre: ${De.toFixed(2)} m²`),console.log(`- Rayon: ${le.toFixed(2)} m`),console.log(`- Angle de début: ${he.toFixed(2)}°`),console.log(`- Angle de fin: ${ee.toFixed(2)}°`),console.log(`- Angle d'ouverture: ${se.toFixed(2)}°`)}return De>0});if(Z.length===0)return 0;const me=new Set,pe=[];for(const J of Z)if(!me.has(J)){const De=Q(Z,J);De.length>0&&(pe.push(De),De.forEach(Te=>me.add(Te)))}console.log(`
Nombre de groupes de formes connectées: ${pe.length}`);const de=pe.map((J,De)=>{console.log(`
Calcul pour le groupe ${De+1} (${J.length} formes):`);const Te=J.map(le=>{var ze,Se,ve;try{let $e;if(le instanceof $t.Circle){const Ge=le.getLatLng(),Xe=le.getRadius();$e=Zj([Ge.lng,Ge.lat],Xe/1e3,{units:"kilometers",steps:256});const lt=Rc($e),qe=((ze=le.properties)==null?void 0:ze.surface)||0;return console.log(`
Conversion Cercle -> GeoJSON`),console.log(`- Rayon: ${Xe.toFixed(2)}m`),console.log(`- Surface propriété: ${qe.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${lt.toFixed(2)}m²`),$e}else if(le instanceof $a||le instanceof $t.Rectangle){const Ge=le.getBounds(),Xe=Ge.getSouthWest(),lt=Ge.getNorthEast(),qe=$t.latLng(lt.lat,Xe.lng),Lt=$t.latLng(Xe.lat,lt.lng),Gt=[[Xe.lng,Xe.lat],[Lt.lng,Lt.lat],[lt.lng,lt.lat],[qe.lng,qe.lat],[Xe.lng,Xe.lat]];$e=Hu([Gt]);const rn=Rc($e),yn=Wu([[Xe.lng,Xe.lat],[lt.lng,Xe.lat]]),Ye=Wu([[Xe.lng,Xe.lat],[Xe.lng,lt.lat]]),at=Gd(yn,{units:"meters"}),it=Gd(Ye,{units:"meters"}),Vt=at*it;return console.log(`
Conversion Rectangle -> GeoJSON`),console.log(`- Largeur: ${at.toFixed(2)}m`),console.log(`- Hauteur: ${it.toFixed(2)}m`),console.log(`- Surface théorique: ${Vt.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${rn.toFixed(2)}m²`),console.log(`- Différence: ${Math.abs(Vt-rn).toFixed(2)}m² (${(Math.abs(Vt-rn)/Vt*100).toFixed(2)}%)`),$e}else if(((Se=le.properties)==null?void 0:Se.type)==="Semicircle"){const Ge=le.getCenter(),Xe=le.getRadius(),lt=le.getStartAngle(),qe=le.getStopAngle(),Lt=[],Gt=64;Lt.push([Ge.lng,Ge.lat]);for(let Ye=0;Ye<=Gt;Ye++){const it=(lt+(qe-lt+360)%360*Ye/Gt)*Math.PI/180,Vt=Xe*Math.cos(it),In=Xe*Math.sin(it)/111319.9,Sn=Vt/(111319.9*Math.cos(Ge.lat*Math.PI/180));Lt.push([Ge.lng+Sn,Ge.lat+In])}Lt.push([Ge.lng,Ge.lat]),$e=Hu([Lt]);const rn=Rc($e),yn=((ve=le.properties)==null?void 0:ve.surface)||0;return console.log(`
Conversion Semicircle -> GeoJSON`),console.log(`- Rayon: ${Xe.toFixed(2)}m`),console.log(`- Surface propriété: ${yn.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${rn.toFixed(2)}m²`),console.log(`- Différence: ${Math.abs(yn-rn).toFixed(2)}m² (${(Math.abs(yn-rn)/yn*100).toFixed(2)}%)`),$e}return null}catch($e){return console.error("[useMapDrawing] Erreur lors de la conversion en GeoJSON:",$e),null}}).filter(le=>le!==null);if(Te.length===0)return 0;const Je=Te.map(le=>{const ze=Rc(le);return console.log(`Surface individuelle: ${ze.toFixed(2)}m²`),ze});let he=0;for(let le=0;le<Te.length;le++)for(let ze=le+1;ze<Te.length;ze++)try{const Se=Bj([Te[le],Te[ze]]),ve=vz(Se);if(ve){const $e=Rc(ve);he+=$e,console.log(`Intersection entre formes ${le+1} et ${ze+1}: ${$e.toFixed(2)}m²`)}}catch(Se){console.error(`Erreur lors du calcul d'intersection entre les formes ${le+1} et ${ze+1}:`,Se)}const ee=Je.reduce((le,ze)=>le+ze,0),se=ee-he;return console.log(`
Calcul de la surface d'irrigation pour le groupe ${De+1}:`),console.log(`- Surface totale (somme): ${ee.toFixed(2)}m²`),console.log(`- Surface d'intersection: ${he.toFixed(2)}m²`),console.log(`- Surface d'irrigation finale: ${se.toFixed(2)}m²`),se}),X=Math.max(...de);return console.log(`
Surface d'irrigation maximale parmi les groupes: ${X.toFixed(2)}m²`),X},$=()=>{a.value&&(t.value.removeLayer(a.value),a.value=null)},re=(H,Z)=>{if(!t.value)return;$();const me=Z?Q(H,Z):H;if(a.value||(a.value=$t.layerGroup().addTo(t.value)),me.forEach(pe=>{var X;const de=(X=pe.properties)==null?void 0:X.type;if(de==="Circle"||de==="Semicircle"){const J=pe.getLatLng(),De=pe.getRadius(),Te=$t.circle(J,{radius:De,fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:$t.canvas({padding:.5})}),Je=$t.circle(J,{radius:De,fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:$t.canvas({padding:.5})});a.value&&(a.value.addLayer(Je),a.value.addLayer(Te))}else if(de==="Rectangle"||de==="Polygon"){const J=pe.getLatLngs(),De=$t.polygon(J,{fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:$t.canvas({padding:.5})}),Te=$t.polygon(J,{fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:$t.canvas({padding:.5})});a.value&&(a.value.addLayer(Te),a.value.addLayer(De))}}),Z&&me.length>1&&t.value){const pe=$t.latLngBounds([]);me.forEach(J=>{J.getBounds?pe.extend(J.getBounds()):J.getLatLng&&pe.extend(J.getLatLng())});const de=pe.getCenter(),X=$t.tooltip({permanent:!0,direction:"center",className:"connected-group-tooltip"}).setContent("<div>Groupe connecté</div>").setLatLng(de);a.value&&a.value.addLayer($t.marker(de,{opacity:0,interactive:!1}).bindTooltip(X).openTooltip())}},Q=(H,Z)=>{if(!Z)return[];const me=new Set,pe=[Z],de=[Z];for(Z._leaflet_id!==void 0&&me.add(Z._leaflet_id);pe.length>0;){const X=pe.shift();for(const J of H){if(J===X||me.has(J._leaflet_id))continue;_e(X,J)&&(de.push(J),pe.push(J),me.add(J._leaflet_id))}}return de},_e=(H,Z)=>{let me=null,pe=null;if(H.getBounds&&typeof H.getBounds=="function")me=H.getBounds();else if(H.getLatLng&&H.getRadius){const de=H.getLatLng(),X=H.getRadius();me=$t.latLngBounds([de.lat-X/111e3,de.lng-X/(111e3*Math.cos(de.lat*Math.PI/180))],[de.lat+X/111e3,de.lng+X/(111e3*Math.cos(de.lat*Math.PI/180))])}if(Z.getBounds&&typeof Z.getBounds=="function")pe=Z.getBounds();else if(Z.getLatLng&&Z.getRadius){const de=Z.getLatLng(),X=Z.getRadius();pe=$t.latLngBounds([de.lat-X/111e3,de.lng-X/(111e3*Math.cos(de.lat*Math.PI/180))],[de.lat+X/111e3,de.lng+X/(111e3*Math.cos(de.lat*Math.PI/180))])}return!(!me||!pe||!me.intersects(pe))},we=(H,Z)=>{var pe;const me=Q(H,Z);return me.length===1&&(pe=Z.properties)!=null&&pe.surface?Z.properties.surface:U(me)},nt=H=>{var pe,de,X,J,De,Te,Je,he,ee;const Z=H.layer;(pe=e.value)==null||pe.addLayer(Z);let me="unknown";if(Z instanceof $t.Circle?me=i.value==="Semicircle"?"Semicircle":"Circle":Z instanceof $t.Rectangle?me="Rectangle":Z instanceof $t.Polygon?me="Polygon":Z instanceof $t.Polyline&&!(Z instanceof $t.Polygon)&&(me="Line"),Z.properties=E(Z,me),Z.properties||(Z.properties={}),Z.properties.category||(Z.properties.category="forages"),Z.properties.accessLevel||(Z.properties.accessLevel="visitor"),Z._dbId=Date.now()+Math.floor(Math.random()*1e3),s.value=Z,console.log("[useMapDrawing] Input layer:",{type:me,instanceof:{Circle:Z instanceof $t.Circle,Rectangle:Z instanceof $t.Rectangle,Polygon:Z instanceof $t.Polygon,Polyline:Z instanceof $t.Polyline},options:Z.options,properties:Z.properties,_dbId:Z._dbId}),window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:Z,type:me,properties:Z.properties}})),Z.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:me,isSelected:s.value===Z}),(!s.value||s.value!==Z)&&z(Z)}),Z.on("mouseout",()=>{var se;console.log("[mouseout] Sortie de la forme",{type:me,isSelected:s.value===Z}),(!s.value||s.value!==Z)&&((se=r.value)==null||se.clearLayers())}),me==="Semicircle")console.log("Conversion en demi-cercle désactivée selon les exigences");else if(me==="Circle"){(de=e.value)==null||de.removeLayer(Z);const se=new op(Z.getLatLng(),{radius:Z.getRadius(),...Z.options});se.properties={...E(se,"Circle"),type:"Circle"},Object.defineProperty(se,"name",{value:se.properties.name,writable:!0,enumerable:!0,configurable:!0}),console.log("[useMapDrawing] Création du cercle personnalisé:",{propertyDescriptor:Object.getOwnPropertyDescriptor(se,"name"),directName:se.name,propertiesName:se.properties.name,nameIsEnumerable:Object.keys(se).includes("name"),allProperties:Object.keys(se.properties),allKeys:Object.keys(se)}),(X=e.value)==null||X.addLayer(se),s.value=se,F(se)}else if(me==="Rectangle"){(J=e.value)==null||J.removeLayer(Z);const se=new $a(Z.getBounds(),{...Z.options});se.updateProperties(),(De=e.value)==null||De.addLayer(se),s.value=se,K(se)}else if(Z instanceof $t.Polygon){const se=Z.getLatLngs()[0],le=new cd([se],{...Z.options});le.updateProperties(),(Te=e.value)==null||Te.removeLayer(Z),(Je=e.value)==null||Je.addLayer(le),s.value=le,N(le)}else if(Z instanceof na)B(Z);else if(Z instanceof $t.Polyline&&!(Z instanceof $t.Polygon)){const se=Z.getLatLngs(),le=new na(se,{...Z.options});le.updateProperties(),(he=e.value)==null||he.removeLayer(Z),(ee=e.value)==null||ee.addLayer(le),s.value=le,B(le)}Wl("Cliquez sur la forme pour afficher les points de contrôle")},ae=()=>{t.value&&(t.value.off("pm:create"),t.value.on("pm:create",nt))};return{map:t,featureGroup:e,controlPointsGroup:n,tempControlPointsGroup:r,currentTool:i,selectedShape:s,isDrawing:o,initMap:A,setDrawingTool:V,updateShapeStyle:Y,updateShapeProperties:te,updateTextFixedSize:k,adjustView:D,clearActiveControlPoints:m,calculateTotalCoverageArea:U,showCoverageOverlay:re,hideCoverageOverlay:$,calculateConnectedCoverageArea:we,getConnectedShapes:Q}}function $U(){const{isEnabled:t,startMeasure:e}=Vp(),n=Ct(null),r=Ct(""),i=Ct("Hybride"),s=Ct(null),o=e("createBaseMaps","useMapState"),a={Hybride:$t.layerGroup([$t.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:19,tileSize:256,zoomOffset:0,bounds:$t.latLngBounds($t.latLng(41.333,-5.566),$t.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,opacity:.6}),$t.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"© Esri",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:20,tileSize:256,zoomOffset:0,bounds:$t.latLngBounds($t.latLng(41.333,-5.566),$t.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,opacity:.6})]),Cadastre:$t.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte © IGN/Geoportail",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:18,tileSize:256,zoomOffset:0,bounds:$t.latLngBounds($t.latLng(41.333,-5.566),$t.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0}),IGN:$t.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Carte IGN © IGN/Geoportail",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:18,tileSize:256,zoomOffset:0,bounds:$t.latLngBounds($t.latLng(41.333,-5.566),$t.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0})};o();const l=gn.createPerformanceTracker(v=>{gn.measure("initMap:setOptions",()=>{n.value=v,v.options.zoomSnap=.25,v.options.zoomDelta=.25,v.options.wheelPxPerZoomLevel=100,v.options.zoomAnimation=!0,v.options.fadeAnimation=!0,v.options.markerZoomAnimation=!0,v.options.minZoom=2,v.options.maxZoom=19,v.options.scrollWheelZoom=!0,v.options.doubleClickZoom=!0;const m=$t.latLngBounds($t.latLng(-90,-180),$t.latLng(90,180));v.setMaxBounds(m),v.options.maxBoundsViscosity=1,v.options.trackResize=!0;let x=null;v.getZoom(),v.on("zoomstart",()=>{v.getZoom(),v.options.zoomAnimation=!1,v.options.markerZoomAnimation=!1}),v.on("zoomend",()=>{x&&clearTimeout(x),x=setTimeout(()=>{setTimeout(()=>{v.options.zoomAnimation=!0,v.options.markerZoomAnimation=!0,v.invalidateSize({animate:!1,pan:!1});const k=v.getBounds(),A=v.options.maxBounds;A&&!k.intersects(A)&&v.panInsideBounds(A,{animate:!1})},250)},250)});const E=v._zoomAnimation;E&&(v._zoomAnimation=function(k){try{this._animatingZoom||E.call(this,k)}catch{console.warn("Animation de zoom interrompue, restauration de la vue..."),this._resetView(this.getCenter(),this.getZoom())}})},"useMapState"),gn.measure("initMap:addInitialLayer",()=>{v&&v.whenReady(()=>{const m=i.value;if(a[m]){if(console.log(`Initialisation de la couche de base: ${m}`),s.value&&v.hasLayer(s.value))try{v.removeLayer(s.value),console.log("Couche active précédente supprimée")}catch(x){console.warn("Erreur lors de la suppression de la couche active précédente:",x)}s.value=a[m];try{s.value.addTo(v),console.log(`Couche ${m} ajoutée à la carte`)}catch(x){console.error(`Erreur lors de l'ajout de la couche ${m}:`,x)}}else console.warn(`Couche de base non disponible: ${m}`)})},"useMapState"),v.on("baselayerchange",m=>{const x=e("baselayerchange","useMapState",{layer:m.name});i.value=m.name,s.value=m.layer,x()}),t.value&&(v.on("movestart",()=>{e("mapMove","useMapState",{startCenter:v.getCenter()})}),v.on("moveend",()=>{e("mapMoveEnd","useMapState",{endCenter:v.getCenter()})()}),v.on("tileloadstart",()=>{e("tileLoad","useMapState")}),v.on("tileload",()=>{e("tileLoadEnd","useMapState")()}))},"initMap","useMapState"),c=gn.createAsyncPerformanceTracker(async v=>{if(!n.value||!a[v]){console.warn(`Impossible de changer la carte de base: ${n.value?"type de carte non disponible":"carte non initialisée"}`);return}try{if(i.value===v)return;console.log(`Changement de carte: ${i.value} -> ${v}`);const m=n.value,x=m.getCenter(),E=m.getZoom();m.options.zoomAnimation=!1,m.options.fadeAnimation=!1,m.options.markerZoomAnimation=!1;const k=a[v];if(s.value&&m.hasLayer(s.value))try{m.removeLayer(s.value),console.log(`Couche précédente ${i.value} supprimée`)}catch(A){console.warn("Erreur lors de la suppression de la couche active:",A)}try{k instanceof $t.LayerGroup,k.addTo(m),console.log(`Nouvelle couche ${v} ajoutée`)}catch(A){console.error("Erreur lors de l'ajout de la nouvelle couche:",A);try{m.hasLayer(k)&&m.removeLayer(k),k.addTo(m),console.log(`Récupération: couche ${v} réajoutée`)}catch(D){throw console.error("Échec de la récupération:",D),new Error("Impossible d'ajouter la nouvelle couche")}}s.value=k,i.value=v;try{m.setView(x,E,{animate:!1,duration:0,noMoveStart:!0}),console.log(`Vue réinitialisée: centre=${x}, zoom=${E}`)}catch(A){console.warn("Erreur lors de la réinitialisation de la vue:",A)}try{m.invalidateSize({animate:!1,pan:!1})}catch(A){console.warn("Erreur lors du rafraîchissement de la carte:",A)}setTimeout(()=>{m.options.zoomAnimation=!0,m.options.fadeAnimation=!0,m.options.markerZoomAnimation=!0,console.log("Animations restaurées")},500)}catch(m){if(console.error("Erreur lors du changement de carte de base:",m),n.value)try{const x=n.value;x.eachLayer(k=>{(k instanceof $t.TileLayer||k instanceof $t.LayerGroup)&&x.removeLayer(k)});const E=a[v];E.addTo(x),s.value=E,i.value=v,x.options.zoomAnimation=!0,x.options.fadeAnimation=!0,x.options.markerZoomAnimation=!0,x.invalidateSize({animate:!1,pan:!1}),console.log("Récupération effectuée après erreur")}catch(x){console.error("Erreur lors de la récupération après échec:",x)}}},"changeBaseMap","useMapState"),d=gn.createAsyncPerformanceTracker(async()=>{if(!(!n.value||!r.value))try{const v=await gn.measureAsync("searchLocation:fetchData",async()=>await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r.value)}`),"useMapState"),m=await gn.measureAsync("searchLocation:parseResponse",async()=>await v.json(),"useMapState");m&&m.length>0&&gn.measure("searchLocation:updateView",()=>{const{lat:x,lon:E}=m[0];n.value.setView([x,E],13,{animate:i.value!=="Cadastre"})},"useMapState")}catch(v){console.error("Erreur lors de la recherche de localisation:",v)}},"searchLocation","useMapState");return{map:n,searchQuery:r,currentBaseMap:i,baseMaps:a,initMap:l,searchLocation:d,changeBaseMap:c,cleanup:()=>{const v=e("cleanup","useMapState");n.value&&(n.value.remove(),n.value=null),s.value&&(s.value=null),v()},isPerformanceEnabled:t}}const VU={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3001] overflow-y-auto"},UU={class:"bg-white w-full h-full md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 relative overflow-y-auto"},HU={class:"p-4 md:p-6 pt-0 overflow-y-auto max-h-[calc(100vh-80px)] md:max-h-[calc(90vh-80px)]"},WU={key:0,class:"mb-4"},GU={key:0,class:"animate-pulse"},qU=["value"],YU={key:1,class:"mb-4"},KU={key:0,class:"animate-pulse"},ZU=["disabled"],XU={value:null},JU=["value"],QU={key:2,class:"mb-4"},eH={key:0,class:"animate-pulse"},tH=["disabled"],nH={value:null},rH=["value"],iH={class:"mb-4"},sH={class:"mb-6"},oH={class:"flex justify-end space-x-3"},aH=["disabled"],lH={key:0},uH={key:1},jE=js({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","salarieSelected","visiteurSelected"],setup(t,{expose:e,emit:n}){function r(j){return j?typeof j=="object"?j.id:j:null}function i(j){if(j===null)throw new Error("Invalid ID");return j}const s=t,o=n,a=pa(),l=Vy(),c=Tp(),d=Ct(!1),p=Ct(null),v=Ct([]),m=Ct([]),x=Ct([]),E=Ct(null),k=Ct(null),A=Ct(!1),D=Ct(!1),V=Ct(!1),Y=Ct({nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),te=Jn(()=>{var j,z,U;return((j=a.user)==null?void 0:j.user_type)==="admin"?Y.value.nom.trim()&&Y.value.entreprise&&Y.value.salarie:((z=a.user)==null?void 0:z.user_type)==="entreprise"?Y.value.nom.trim()&&Y.value.salarie:(((U=a.user)==null?void 0:U.user_type)==="salarie",Y.value.nom.trim())});Di(()=>Y.value.entreprise,async j=>{if(!s.modelValue)return;Y.value.salarie=null,Y.value.visiteur=null,m.value=[];const z=r(j);console.log("[NewPlanModal] Entreprise sélectionnée:",z),z?await ge(z):v.value=[]}),Di(()=>Y.value.salarie,async j=>{if(!s.modelValue)return;Y.value.visiteur=null;const z=r(j);z?await fe(z):m.value=[]}),Di(()=>s.modelValue,j=>{var z,U,$;j?((z=a.user)==null?void 0:z.user_type)==="admin"?B():((U=a.user)==null?void 0:U.user_type)==="entreprise"?ge(a.user.id):(($=a.user)==null?void 0:$.user_type)==="salarie"&&fe(a.user.id):(Y.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},E.value=null,k.value=null,m.value=[],v.value=[],x.value=[],p.value=null)});async function ge(j){A.value=!0;try{console.log("[NewPlanModal] Chargement des salaries pour entreprise:",j);const z=await kl.getUsers({role:"SALARIE",entreprise:j});console.log("[NewPlanModal] Réponse salaries:",z.data),v.value=z.data}catch(z){console.error("[NewPlanModal] Error loading salaries:",z),v.value=[]}finally{A.value=!1}}async function fe(j){D.value=!0;try{const z=await kl.getUsers({role:"VISITEUR",salarie:j});m.value=z.data}catch(z){console.error("[NewPlanModal] Error loading visiteurs:",z),m.value=[]}finally{D.value=!1}}async function I(j){s.modelValue&&(E.value=j,Y.value.salarie=j.id,await fe(j.id),o("salarieSelected",j))}function F(j){s.modelValue&&(k.value=j,Y.value.visiteur=j.id,o("visiteurSelected",j))}function K(){o("update:modelValue",!1),Y.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},E.value=null,k.value=null,m.value=[],p.value=null}async function B(){V.value=!0;try{const j=await a.fetchEnterprises();x.value=j}catch(j){console.error("[NewPlanModal] Error loading entreprises:",j),x.value=[]}finally{V.value=!1}}async function N(){var j,z;p.value=null,d.value=!0;try{const U={nom:Y.value.nom.trim(),description:Y.value.description.trim()},$=a.user;if(!$)throw new Error("User not found");if($.user_type==="admin"){if(!Y.value.entreprise||!Y.value.salarie)throw new Error("Missing required fields");U.entreprise=i(r(Y.value.entreprise)),U.salarie=i(r(Y.value.salarie)),Y.value.visiteur&&(U.visiteur=Y.value.visiteur)}else if($.user_type==="entreprise"){if(!Y.value.salarie)throw new Error("Missing required fields");U.entreprise=$.id,U.salarie=i(r(Y.value.salarie)),Y.value.visiteur&&(U.visiteur=Y.value.visiteur)}else if($.user_type==="salarie"){if(!$.entreprise)throw new Error("Missing required fields");U.entreprise=$.entreprise.id,U.salarie=$.id,Y.value.visiteur&&(U.visiteur=Y.value.visiteur)}else if($.user_type==="visiteur"){if(!$.entreprise||!$.salarie)throw new Error("Missing required fields");U.entreprise=$.entreprise.id,U.salarie=$.salarie.id,U.visiteur=$.id}console.log("Données du plan à créer:",U),l.clearCurrentPlan(),c.setCurrentPlan(null);const re=await l.createPlan(U);o("created",re.id),K()}catch(U){console.error("[NewPlanModal] Error creating plan:",U),console.error("Response data:",(j=U.response)==null?void 0:j.data);let $="Une erreur est survenue lors de la création du plan";(z=U.response)!=null&&z.data&&(typeof U.response.data=="object"?$=Object.entries(U.response.data).map(([re,Q])=>Array.isArray(Q)?`${re}: ${Q.join(", ")}`:`${re}: ${Q}`).join(`
`):typeof U.response.data=="string"&&($=U.response.data)),p.value=$}finally{d.value=!1}}return e({salaries:v,visiteurs:m,selectedSalarie:E,selectedVisiteur:k,loadSalaries:ge,loadVisiteurs:fe,selectSalarie:I,selectVisiteur:F}),(j,z)=>{var U,$,re,Q;return j.modelValue?(Ie(),je("div",VU,[C("div",UU,[C("div",{class:"flex justify-between items-center mb-4 sticky top-0 bg-white p-4 md:p-6 pb-4 border-b z-10"},[z[6]||(z[6]=C("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),C("button",{onClick:K,class:"text-gray-400 hover:text-gray-500"},z[5]||(z[5]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",HU,[er(a).isAdmin?(Ie(),je("div",WU,[z[9]||(z[9]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Entreprise",-1)),V.value?(Ie(),je("div",GU,z[7]||(z[7]=[C("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):On((Ie(),je("select",{key:1,"onUpdate:modelValue":z[0]||(z[0]=_e=>Y.value.entreprise=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[z[8]||(z[8]=C("option",{value:null},"Sélectionnez une entreprise",-1)),(Ie(!0),je(Mn,null,gr(x.value,_e=>(Ie(),je("option",{key:_e.id,value:_e.id},Ot(er(Lu)(_e)),9,qU))),128))],512)),[[rs,Y.value.entreprise]])])):en("",!0),((U=er(a).user)==null?void 0:U.user_type)==="admin"||(($=er(a).user)==null?void 0:$.user_type)==="entreprise"?(Ie(),je("div",YU,[z[11]||(z[11]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salarie",-1)),A.value?(Ie(),je("div",KU,z[10]||(z[10]=[C("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):On((Ie(),je("select",{key:1,id:"edit-salarie","onUpdate:modelValue":z[1]||(z[1]=_e=>Y.value.salarie=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:er(a).isAdmin&&!Y.value.entreprise},[C("option",XU,Ot(v.value.length?"Sélectionnez un salarie":"Aucun salarie disponible"),1),(Ie(!0),je(Mn,null,gr(v.value,_e=>(Ie(),je("option",{key:_e.id,value:_e.id},Ot(er(Lu)(_e)),9,JU))),128))],8,ZU)),[[rs,Y.value.salarie]])])):en("",!0),((re=er(a).user)==null?void 0:re.user_type)!=="visiteur"?(Ie(),je("div",QU,[z[13]||(z[13]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visiteur",-1)),D.value?(Ie(),je("div",eH,z[12]||(z[12]=[C("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):On((Ie(),je("select",{key:1,id:"edit-visiteur","onUpdate:modelValue":z[2]||(z[2]=_e=>Y.value.visiteur=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!m.value.length||((Q=er(a).user)==null?void 0:Q.user_type)!=="salarie"&&!Y.value.salarie},[C("option",nH,Ot(m.value.length?"Sélectionnez un visiteur":"Aucun visiteur disponible"),1),(Ie(!0),je(Mn,null,gr(m.value,_e=>(Ie(),je("option",{key:_e.id,value:_e.id},Ot(er(Lu)(_e)),9,rH))),128))],8,tH)),[[rs,Y.value.visiteur]])])):en("",!0),C("div",iH,[z[14]||(z[14]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),On(C("input",{id:"edit-nom","onUpdate:modelValue":z[3]||(z[3]=_e=>Y.value.nom=_e),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[Fr,Y.value.nom]])]),C("div",sH,[z[15]||(z[15]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),On(C("textarea",{id:"edit-description","onUpdate:modelValue":z[4]||(z[4]=_e=>Y.value.description=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[Fr,Y.value.description]])]),C("div",oH,[C("button",{onClick:K,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),C("button",{onClick:N,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!te.value||d.value},[d.value?(Ie(),je("span",lH,"Création en cours...")):(Ie(),je("span",uH,"Créer"))],8,aH)])])])])):en("",!0)}}});function fs(t){"@babel/helpers - typeof";return fs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fs(t)}var hl=Uint8Array,Su=Uint16Array,V_=Int32Array,Uy=new hl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Hy=new hl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Cb=new hl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zE=function(t,e){for(var n=new Su(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new V_(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},$E=zE(Uy,2),VE=$E.b,Eb=$E.r;VE[28]=258,Eb[258]=28;var UE=zE(Hy,0),cH=UE.b,y5=UE.r,Pb=new Su(32768);for(var Bs=0;Bs<32768;++Bs){var Jh=(Bs&43690)>>1|(Bs&21845)<<1;Jh=(Jh&52428)>>2|(Jh&13107)<<2,Jh=(Jh&61680)>>4|(Jh&3855)<<4,Pb[Bs]=((Jh&65280)>>8|(Jh&255)<<8)>>1}var Xc=function(t,e,n){for(var r=t.length,i=0,s=new Su(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new Su(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new Su(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],d=e-t[i],p=o[t[i]-1]++<<d,v=p|(1<<d)-1;p<=v;++p)a[Pb[p]>>l]=c}else for(a=new Su(r),i=0;i<r;++i)t[i]&&(a[i]=Pb[o[t[i]-1]++]>>15-t[i]);return a},Cd=new hl(288);for(var Bs=0;Bs<144;++Bs)Cd[Bs]=8;for(var Bs=144;Bs<256;++Bs)Cd[Bs]=9;for(var Bs=256;Bs<280;++Bs)Cd[Bs]=7;for(var Bs=280;Bs<288;++Bs)Cd[Bs]=8;var ym=new hl(32);for(var Bs=0;Bs<32;++Bs)ym[Bs]=5;var hH=Xc(Cd,9,0),dH=Xc(Cd,9,1),fH=Xc(ym,5,0),pH=Xc(ym,5,1),t2=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},cc=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},n2=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},U_=function(t){return(t+7)/8|0},HE=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new hl(t.subarray(e,n))},gH=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],gc=function(t,e,n){var r=new Error(e||gH[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,gc),!n)throw r;return r},mH=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new hl(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new hl(i*3));var c=function(Te){var Je=n.length;if(Te>Je){var he=new hl(Math.max(Je*2,Te));he.set(n),n=he}},d=e.f||0,p=e.p||0,v=e.b||0,m=e.l,x=e.d,E=e.m,k=e.n,A=i*8;do{if(!m){d=cc(t,p,1);var D=cc(t,p+1,3);if(p+=3,D)if(D==1)m=dH,x=pH,E=9,k=5;else if(D==2){var ge=cc(t,p,31)+257,fe=cc(t,p+10,15)+4,I=ge+cc(t,p+5,31)+1;p+=14;for(var F=new hl(I),K=new hl(19),B=0;B<fe;++B)K[Cb[B]]=cc(t,p+B*3,7);p+=fe*3;for(var N=t2(K),j=(1<<N)-1,z=Xc(K,N,1),B=0;B<I;){var U=z[cc(t,p,j)];p+=U&15;var V=U>>4;if(V<16)F[B++]=V;else{var $=0,re=0;for(V==16?(re=3+cc(t,p,3),p+=2,$=F[B-1]):V==17?(re=3+cc(t,p,7),p+=3):V==18&&(re=11+cc(t,p,127),p+=7);re--;)F[B++]=$}}var Q=F.subarray(0,ge),_e=F.subarray(ge);E=t2(Q),k=t2(_e),m=Xc(Q,E,1),x=Xc(_e,k,1)}else gc(1);else{var V=U_(p)+4,Y=t[V-4]|t[V-3]<<8,te=V+Y;if(te>i){l&&gc(0);break}a&&c(v+Y),n.set(t.subarray(V,te),v),e.b=v+=Y,e.p=p=te*8,e.f=d;continue}if(p>A){l&&gc(0);break}}a&&c(v+131072);for(var we=(1<<E)-1,nt=(1<<k)-1,ae=p;;ae=p){var $=m[n2(t,p)&we],H=$>>4;if(p+=$&15,p>A){l&&gc(0);break}if($||gc(2),H<256)n[v++]=H;else if(H==256){ae=p,m=null;break}else{var Z=H-254;if(H>264){var B=H-257,me=Uy[B];Z=cc(t,p,(1<<me)-1)+VE[B],p+=me}var pe=x[n2(t,p)&nt],de=pe>>4;pe||gc(3),p+=pe&15;var _e=cH[de];if(de>3){var me=Hy[de];_e+=n2(t,p)&(1<<me)-1,p+=me}if(p>A){l&&gc(0);break}a&&c(v+131072);var X=v+Z;if(v<_e){var J=s-_e,De=Math.min(_e,X);for(J+v<0&&gc(3);v<De;++v)n[v]=r[J+v]}for(;v<X;++v)n[v]=n[v-_e]}}e.l=m,e.p=ae,e.b=v,e.f=d,m&&(d=1,e.m=E,e.d=x,e.n=k)}while(!d);return v!=n.length&&o?HE(n,0,v):n.subarray(0,v)},bh=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},sg=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},r2=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:GE,l:0};if(i==1){var o=new hl(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(te,ge){return te.f-ge.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,d=1,p=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=i-1;)a=n[n[c].f<n[p].f?c++:p++],l=n[c!=d&&n[c].f<n[p].f?c++:p++],n[d++]={s:-1,f:a.f+l.f,l:a,r:l};for(var v=s[0].s,r=1;r<i;++r)s[r].s>v&&(v=s[r].s);var m=new Su(v+1),x=Mb(n[d-1],m,0);if(x>e){var r=0,E=0,k=x-e,A=1<<k;for(s.sort(function(ge,fe){return m[fe.s]-m[ge.s]||ge.f-fe.f});r<i;++r){var D=s[r].s;if(m[D]>e)E+=A-(1<<x-m[D]),m[D]=e;else break}for(E>>=k;E>0;){var V=s[r].s;m[V]<e?E-=1<<e-m[V]++-1:++r}for(;r>=0&&E;--r){var Y=s[r].s;m[Y]==e&&(--m[Y],++E)}x=e}return{t:new hl(m),l:x}},Mb=function(t,e,n){return t.s==-1?Math.max(Mb(t.l,e,n+1),Mb(t.r,e,n+1)):e[t.s]=n},b5=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Su(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},og=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},WE=function(t,e,n){var r=n.length,i=U_(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},_5=function(t,e,n,r,i,s,o,a,l,c,d){bh(e,d++,n),++i[256];for(var p=r2(i,15),v=p.t,m=p.l,x=r2(s,15),E=x.t,k=x.l,A=b5(v),D=A.c,V=A.n,Y=b5(E),te=Y.c,ge=Y.n,fe=new Su(19),I=0;I<D.length;++I)++fe[D[I]&31];for(var I=0;I<te.length;++I)++fe[te[I]&31];for(var F=r2(fe,7),K=F.t,B=F.l,N=19;N>4&&!K[Cb[N-1]];--N);var j=c+5<<3,z=og(i,Cd)+og(s,ym)+o,U=og(i,v)+og(s,E)+o+14+3*N+og(fe,K)+2*fe[16]+3*fe[17]+7*fe[18];if(l>=0&&j<=z&&j<=U)return WE(e,d,t.subarray(l,l+c));var $,re,Q,_e;if(bh(e,d,1+(U<z)),d+=2,U<z){$=Xc(v,m,0),re=v,Q=Xc(E,k,0),_e=E;var we=Xc(K,B,0);bh(e,d,V-257),bh(e,d+5,ge-1),bh(e,d+10,N-4),d+=14;for(var I=0;I<N;++I)bh(e,d+3*I,K[Cb[I]]);d+=3*N;for(var nt=[D,te],ae=0;ae<2;++ae)for(var H=nt[ae],I=0;I<H.length;++I){var Z=H[I]&31;bh(e,d,we[Z]),d+=K[Z],Z>15&&(bh(e,d,H[I]>>5&127),d+=H[I]>>12)}}else $=hH,re=Cd,Q=fH,_e=ym;for(var I=0;I<a;++I){var me=r[I];if(me>255){var Z=me>>18&31;sg(e,d,$[Z+257]),d+=re[Z+257],Z>7&&(bh(e,d,me>>23&31),d+=Uy[Z]);var pe=me&31;sg(e,d,Q[pe]),d+=_e[pe],pe>3&&(sg(e,d,me>>5&8191),d+=Hy[pe])}else sg(e,d,$[me]),d+=re[me]}return sg(e,d,$[256]),d+re[256]},vH=new V_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),GE=new hl(0),yH=function(t,e,n,r,i,s){var o=s.z||t.length,a=new hl(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,d=(s.r||0)&7;if(e){d&&(l[0]=s.r>>3);for(var p=vH[e-1],v=p>>13,m=p&8191,x=(1<<n)-1,E=s.p||new Su(32768),k=s.h||new Su(x+1),A=Math.ceil(n/3),D=2*A,V=function(ee){return(t[ee]^t[ee+1]<<A^t[ee+2]<<D)&x},Y=new V_(25e3),te=new Su(288),ge=new Su(32),fe=0,I=0,F=s.i||0,K=0,B=s.w||0,N=0;F+2<o;++F){var j=V(F),z=F&32767,U=k[j];if(E[z]=U,k[j]=z,B<=F){var $=o-F;if((fe>7e3||K>24576)&&($>423||!c)){d=_5(t,l,0,Y,te,ge,I,K,N,F-N,d),K=fe=I=0,N=F;for(var re=0;re<286;++re)te[re]=0;for(var re=0;re<30;++re)ge[re]=0}var Q=2,_e=0,we=m,nt=z-U&32767;if($>2&&j==V(F-nt))for(var ae=Math.min(v,$)-1,H=Math.min(32767,F),Z=Math.min(258,$);nt<=H&&--we&&z!=U;){if(t[F+Q]==t[F+Q-nt]){for(var me=0;me<Z&&t[F+me]==t[F+me-nt];++me);if(me>Q){if(Q=me,_e=nt,me>ae)break;for(var pe=Math.min(nt,me-2),de=0,re=0;re<pe;++re){var X=F-nt+re&32767,J=E[X],De=X-J&32767;De>de&&(de=De,U=X)}}}z=U,U=E[z],nt+=z-U&32767}if(_e){Y[K++]=268435456|Eb[Q]<<18|y5[_e];var Te=Eb[Q]&31,Je=y5[_e]&31;I+=Uy[Te]+Hy[Je],++te[257+Te],++ge[Je],B=F+Q,++fe}else Y[K++]=t[F],++te[t[F]]}}for(F=Math.max(F,B);F<o;++F)Y[K++]=t[F],++te[t[F]];d=_5(t,l,c,Y,te,ge,I,K,N,F-N,d),c||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=k,s.p=E,s.i=F,s.w=B)}else{for(var F=s.w||0;F<o+c;F+=65535){var he=F+65535;he>=o&&(l[d/8|0]=c,he=o),d=WE(l,d+1,t.subarray(F,he))}s.i=o}return HE(a,0,r+U_(d)+i)},qE=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},bH=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new hl(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return yH(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},YE=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},_H=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=qE();i.p(e.dictionary),YE(t,2,i.d())}},wH=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&gc(6,"invalid zlib data"),(t[1]>>5&1)==1&&gc(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function kb(t,e){e||(e={});var n=qE();n.p(t);var r=bH(t,e,e.dictionary?6:2,4);return _H(r,e),YE(r,r.length-4,n.d()),r}function xH(t,e){return mH(t.subarray(wH(t),-4),{i:2},e,e)}var LH=typeof TextDecoder<"u"&&new TextDecoder,SH=0;try{LH.decode(GE,{stream:!0}),SH=1}catch{}var Br=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function i2(){Br.console&&typeof Br.console.log=="function"&&Br.console.log.apply(Br.console,arguments)}var xs={log:i2,warn:function(t){Br.console&&(typeof Br.console.warn=="function"?Br.console.warn.apply(Br.console,arguments):i2.call(null,arguments))},error:function(t){Br.console&&(typeof Br.console.error=="function"?Br.console.error.apply(Br.console,arguments):i2(t))}};function s2(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){ef(r.response,e,n)},r.onerror=function(){xs.error("could not download file")},r.send()}function w5(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function L0(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Gg,Ab,ef=Br.saveAs||((typeof window>"u"?"undefined":fs(window))!=="object"||window!==Br?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Br.URL||Br.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?w5(i.href)?s2(t,e,n):L0(i,i.target="_blank"):L0(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){L0(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(w5(t))s2(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){L0(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:fs(s)!=="object"&&(xs.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return s2(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(Br.HTMLElement)||Br.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":fs(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var d=a.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},a.readAsDataURL(t)}else{var l=Br.URL||Br.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function KE(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function o2(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=nl(n,r,i,s,e[0],7,-680876936),s=nl(s,n,r,i,e[1],12,-389564586),i=nl(i,s,n,r,e[2],17,606105819),r=nl(r,i,s,n,e[3],22,-1044525330),n=nl(n,r,i,s,e[4],7,-176418897),s=nl(s,n,r,i,e[5],12,1200080426),i=nl(i,s,n,r,e[6],17,-1473231341),r=nl(r,i,s,n,e[7],22,-45705983),n=nl(n,r,i,s,e[8],7,1770035416),s=nl(s,n,r,i,e[9],12,-1958414417),i=nl(i,s,n,r,e[10],17,-42063),r=nl(r,i,s,n,e[11],22,-1990404162),n=nl(n,r,i,s,e[12],7,1804603682),s=nl(s,n,r,i,e[13],12,-40341101),i=nl(i,s,n,r,e[14],17,-1502002290),n=rl(n,r=nl(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=rl(s,n,r,i,e[6],9,-1069501632),i=rl(i,s,n,r,e[11],14,643717713),r=rl(r,i,s,n,e[0],20,-373897302),n=rl(n,r,i,s,e[5],5,-701558691),s=rl(s,n,r,i,e[10],9,38016083),i=rl(i,s,n,r,e[15],14,-660478335),r=rl(r,i,s,n,e[4],20,-405537848),n=rl(n,r,i,s,e[9],5,568446438),s=rl(s,n,r,i,e[14],9,-1019803690),i=rl(i,s,n,r,e[3],14,-187363961),r=rl(r,i,s,n,e[8],20,1163531501),n=rl(n,r,i,s,e[13],5,-1444681467),s=rl(s,n,r,i,e[2],9,-51403784),i=rl(i,s,n,r,e[7],14,1735328473),n=il(n,r=rl(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=il(s,n,r,i,e[8],11,-2022574463),i=il(i,s,n,r,e[11],16,1839030562),r=il(r,i,s,n,e[14],23,-35309556),n=il(n,r,i,s,e[1],4,-1530992060),s=il(s,n,r,i,e[4],11,1272893353),i=il(i,s,n,r,e[7],16,-155497632),r=il(r,i,s,n,e[10],23,-1094730640),n=il(n,r,i,s,e[13],4,681279174),s=il(s,n,r,i,e[0],11,-358537222),i=il(i,s,n,r,e[3],16,-722521979),r=il(r,i,s,n,e[6],23,76029189),n=il(n,r,i,s,e[9],4,-640364487),s=il(s,n,r,i,e[12],11,-421815835),i=il(i,s,n,r,e[15],16,530742520),n=sl(n,r=il(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=sl(s,n,r,i,e[7],10,1126891415),i=sl(i,s,n,r,e[14],15,-1416354905),r=sl(r,i,s,n,e[5],21,-57434055),n=sl(n,r,i,s,e[12],6,1700485571),s=sl(s,n,r,i,e[3],10,-1894986606),i=sl(i,s,n,r,e[10],15,-1051523),r=sl(r,i,s,n,e[1],21,-2054922799),n=sl(n,r,i,s,e[8],6,1873313359),s=sl(s,n,r,i,e[15],10,-30611744),i=sl(i,s,n,r,e[6],15,-1560198380),r=sl(r,i,s,n,e[13],21,1309151649),n=sl(n,r,i,s,e[4],6,-145523070),s=sl(s,n,r,i,e[11],10,-1120210379),i=sl(i,s,n,r,e[2],15,718787259),r=sl(r,i,s,n,e[9],21,-343485551),t[0]=hd(n,t[0]),t[1]=hd(r,t[1]),t[2]=hd(i,t[2]),t[3]=hd(s,t[3])}function Wy(t,e,n,r,i,s){return e=hd(hd(e,t),hd(r,s)),hd(e<<i|e>>>32-i,n)}function nl(t,e,n,r,i,s,o){return Wy(e&n|~e&r,t,e,i,s,o)}function rl(t,e,n,r,i,s,o){return Wy(e&r|n&~r,t,e,i,s,o)}function il(t,e,n,r,i,s,o){return Wy(e^n^r,t,e,i,s,o)}function sl(t,e,n,r,i,s,o){return Wy(n^(e|~r),t,e,i,s,o)}function ZE(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)o2(r,CH(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(o2(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,o2(r,i),r}function CH(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Gg=Br.atob.bind(Br),Ab=Br.btoa.bind(Br);var x5="0123456789abcdef".split("");function EH(t){for(var e="",n=0;n<4;n++)e+=x5[t>>8*n+4&15]+x5[t>>8*n&15];return e}function PH(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Tb(t){return ZE(t).map(PH).join("")}var MH=function(t){for(var e=0;e<t.length;e++)t[e]=EH(t[e]);return t.join("")}(ZE("hello"))!="5d41402abc4b2a76b9719d911017c592";function hd(t,e){if(MH){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Db(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var d=a[l];c=(c+d+o.charCodeAt(l))%256,a[l]=a[c],a[c]=d}n=t,r=a}else a=r;var p=e.length,v=0,m=0,x="";for(l=0;l<p;l++)m=(m+(d=a[v=(v+1)%256]))%256,a[v]=a[m],a[m]=d,o=a[(a[v]+a[m])%256],x+=String.fromCharCode(e.charCodeAt(l)^o);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var L5={print:4,modify:8,copy:16,"annot-forms":32};function ap(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(L5.perm!==void 0)throw new Error("Invalid permission: "+a);i+=L5[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=Tb(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Db(this.encryptionKey,this.padding)}function lp(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function S5(t){if(fs(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){Br.console&&xs.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Kv(t){if(!(this instanceof Kv))return new Kv(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function XE(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function of(t,e,n,r,i){if(!(this instanceof of))return new of(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,XE.call(this,r,i)}function hp(t,e,n,r,i){if(!(this instanceof hp))return new hp(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,XE.call(this,r,i)}function Dr(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",d=null;fs(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,v={},m={internal:{},__private__:{}};m.__private__.PubSub=S5;var x="1.3",E=m.__private__.getPdfVersion=function(){return x};m.__private__.setPdfVersion=function(R){x=R};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return k};var A=m.__private__.getPageFormat=function(R){return k[R]};i=i||"a4";var D={COMPAT:"compat",ADVANCED:"advanced"},V=D.COMPAT;function Y(){this.saveGraphicsState(),le(new wt(it,0,0,-it,0,Ga()*it).toString()+" cm"),this.setFontSize(this.getFontSize()/it),c="n",V=D.ADVANCED}function te(){this.restoreGraphicsState(),c="S",V=D.COMPAT}var ge=m.__private__.combineFontStyleAndFontWeight=function(R,xe){if(R=="bold"&&xe=="normal"||R=="bold"&&xe==400||R=="normal"&&xe=="italic"||R=="bold"&&xe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return xe&&(R=xe==400||xe==="normal"?R==="italic"?"italic":"normal":xe!=700&&xe!=="bold"||R!=="normal"?(xe==700?"bold":xe)+""+R:"bold"),R};m.advancedAPI=function(R){var xe=V===D.COMPAT;return xe&&Y.call(this),typeof R!="function"||(R(this),xe&&te.call(this)),this},m.compatAPI=function(R){var xe=V===D.ADVANCED;return xe&&te.call(this),typeof R!="function"||(R(this),xe&&Y.call(this)),this},m.isAdvancedAPI=function(){return V===D.ADVANCED};var fe,I=function(R){if(V!==D.ADVANCED)throw new Error(R+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=m.roundToPrecision=m.__private__.roundToPrecision=function(R,xe){var Qe=e||xe;if(isNaN(R)||isNaN(Qe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return R.toFixed(Qe).replace(/0+$/,"")};fe=m.hpf=m.__private__.hpf=typeof l=="number"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return F(R,l)}:l==="smart"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return F(R,R>-1&&R<1?16:5)}:function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return F(R,16)};var K=m.f2=m.__private__.f2=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f2");return F(R,2)},B=m.__private__.f3=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f3");return F(R,3)},N=m.scale=m.__private__.scale=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.scale");return V===D.COMPAT?R*it:V===D.ADVANCED?R:void 0},j=function(R){return V===D.COMPAT?Ga()-R:V===D.ADVANCED?R:void 0},z=function(R){return N(j(R))};m.__private__.setPrecision=m.setPrecision=function(R){typeof parseInt(R,10)=="number"&&(e=parseInt(R,10))};var U,$="00000000000000000000000000000000",re=m.__private__.getFileId=function(){return $},Q=m.__private__.setFileId=function(R){return $=R!==void 0&&/^[a-fA-F0-9]{32}$/.test(R)?R.toUpperCase():$.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(xi=new ap(d.userPermissions,d.userPassword,d.ownerPassword,$)),$};m.setFileId=function(R){return Q(R),this},m.getFileId=function(){return re()};var _e=m.__private__.convertDateToPDFDate=function(R){var xe=R.getTimezoneOffset(),Qe=xe<0?"+":"-",dt=Math.floor(Math.abs(xe/60)),kt=Math.abs(xe%60),Ut=[Qe,Z(dt),"'",Z(kt),"'"].join("");return["D:",R.getFullYear(),Z(R.getMonth()+1),Z(R.getDate()),Z(R.getHours()),Z(R.getMinutes()),Z(R.getSeconds()),Ut].join("")},we=m.__private__.convertPDFDateToDate=function(R){var xe=parseInt(R.substr(2,4),10),Qe=parseInt(R.substr(6,2),10)-1,dt=parseInt(R.substr(8,2),10),kt=parseInt(R.substr(10,2),10),Ut=parseInt(R.substr(12,2),10),pn=parseInt(R.substr(14,2),10);return new Date(xe,Qe,dt,kt,Ut,pn,0)},nt=m.__private__.setCreationDate=function(R){var xe;if(R===void 0&&(R=new Date),R instanceof Date)xe=_e(R);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(R))throw new Error("Invalid argument passed to jsPDF.setCreationDate");xe=R}return U=xe},ae=m.__private__.getCreationDate=function(R){var xe=U;return R==="jsDate"&&(xe=we(U)),xe};m.setCreationDate=function(R){return nt(R),this},m.getCreationDate=function(R){return ae(R)};var H,Z=m.__private__.padd2=function(R){return("0"+parseInt(R)).slice(-2)},me=m.__private__.padd2Hex=function(R){return("00"+(R=R.toString())).substr(R.length)},pe=0,de=[],X=[],J=0,De=[],Te=[],Je=!1,he=X,ee=function(){pe=0,J=0,X=[],de=[],De=[],Ln=Et(),Nr=Et()};m.__private__.setCustomOutputDestination=function(R){Je=!0,he=R};var se=function(R){Je||(he=R)};m.__private__.resetCustomOutputDestination=function(){Je=!1,he=X};var le=m.__private__.out=function(R){return R=R.toString(),J+=R.length+1,he.push(R),he},ze=m.__private__.write=function(R){return le(arguments.length===1?R.toString():Array.prototype.join.call(arguments," "))},Se=m.__private__.getArrayBuffer=function(R){for(var xe=R.length,Qe=new ArrayBuffer(xe),dt=new Uint8Array(Qe);xe--;)dt[xe]=R.charCodeAt(xe);return Qe},ve=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return ve};var $e=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(R){return $e=V===D.ADVANCED?R/it:R,this};var Ge,Xe=m.__private__.getFontSize=m.getFontSize=function(){return V===D.COMPAT?$e:$e*it},lt=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(R){return lt=R,this},m.__private__.getR2L=m.getR2L=function(){return lt};var qe,Lt=m.__private__.setZoomMode=function(R){var xe=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(R))Ge=R;else if(isNaN(R)){if(xe.indexOf(R)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+R+'" is not recognized.');Ge=R}else Ge=parseInt(R,10)};m.__private__.getZoomMode=function(){return Ge};var Gt,rn=m.__private__.setPageMode=function(R){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(R)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+R+'" is not recognized.');qe=R};m.__private__.getPageMode=function(){return qe};var yn=m.__private__.setLayoutMode=function(R){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(R)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+R+'" is not recognized.');Gt=R};m.__private__.getLayoutMode=function(){return Gt},m.__private__.setDisplayMode=m.setDisplayMode=function(R,xe,Qe){return Lt(R),yn(xe),rn(Qe),this};var Ye={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(R){if(Object.keys(Ye).indexOf(R)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ye[R]},m.__private__.getDocumentProperties=function(){return Ye},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(R){for(var xe in Ye)Ye.hasOwnProperty(xe)&&R[xe]&&(Ye[xe]=R[xe]);return this},m.__private__.setDocumentProperty=function(R,xe){if(Object.keys(Ye).indexOf(R)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ye[R]=xe};var at,it,Vt,Yt,In,Sn={},Nn={},Qn=[],Xt={},Cn={},Dn={},rr={},Zn=null,_r=0,ir=[],qr=new S5(m),Os=t.hotfixes||[],ls={},ft={},rt=[],wt=function R(xe,Qe,dt,kt,Ut,pn){if(!(this instanceof R))return new R(xe,Qe,dt,kt,Ut,pn);isNaN(xe)&&(xe=1),isNaN(Qe)&&(Qe=0),isNaN(dt)&&(dt=0),isNaN(kt)&&(kt=1),isNaN(Ut)&&(Ut=0),isNaN(pn)&&(pn=0),this._matrix=[xe,Qe,dt,kt,Ut,pn]};Object.defineProperty(wt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(wt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(wt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(wt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(wt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(wt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(wt.prototype,"a",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(wt.prototype,"b",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(wt.prototype,"c",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(wt.prototype,"d",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(wt.prototype,"e",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(wt.prototype,"f",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(wt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(wt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(wt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(wt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),wt.prototype.join=function(R){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(fe).join(R)},wt.prototype.multiply=function(R){var xe=R.sx*this.sx+R.shy*this.shx,Qe=R.sx*this.shy+R.shy*this.sy,dt=R.shx*this.sx+R.sy*this.shx,kt=R.shx*this.shy+R.sy*this.sy,Ut=R.tx*this.sx+R.ty*this.shx+this.tx,pn=R.tx*this.shy+R.ty*this.sy+this.ty;return new wt(xe,Qe,dt,kt,Ut,pn)},wt.prototype.decompose=function(){var R=this.sx,xe=this.shy,Qe=this.shx,dt=this.sy,kt=this.tx,Ut=this.ty,pn=Math.sqrt(R*R+xe*xe),zn=(R/=pn)*Qe+(xe/=pn)*dt;Qe-=R*zn,dt-=xe*zn;var Wn=Math.sqrt(Qe*Qe+dt*dt);return zn/=Wn,R*(dt/=Wn)<xe*(Qe/=Wn)&&(R=-R,xe=-xe,zn=-zn,pn=-pn),{scale:new wt(pn,0,0,Wn,0,0),translate:new wt(1,0,0,1,kt,Ut),rotate:new wt(R,xe,-xe,R,0,0),skew:new wt(1,0,zn,1,0,0)}},wt.prototype.toString=function(R){return this.join(" ")},wt.prototype.inversed=function(){var R=this.sx,xe=this.shy,Qe=this.shx,dt=this.sy,kt=this.tx,Ut=this.ty,pn=1/(R*dt-xe*Qe),zn=dt*pn,Wn=-xe*pn,cr=-Qe*pn,br=R*pn;return new wt(zn,Wn,cr,br,-zn*kt-cr*Ut,-Wn*kt-br*Ut)},wt.prototype.applyToPoint=function(R){var xe=R.x*this.sx+R.y*this.shx+this.tx,Qe=R.x*this.shy+R.y*this.sy+this.ty;return new $s(xe,Qe)},wt.prototype.applyToRectangle=function(R){var xe=this.applyToPoint(R),Qe=this.applyToPoint(new $s(R.x+R.w,R.y+R.h));return new ma(xe.x,xe.y,Qe.x-xe.x,Qe.y-xe.y)},wt.prototype.clone=function(){var R=this.sx,xe=this.shy,Qe=this.shx,dt=this.sy,kt=this.tx,Ut=this.ty;return new wt(R,xe,Qe,dt,kt,Ut)},m.Matrix=wt;var kn=m.matrixMult=function(R,xe){return xe.multiply(R)},Hn=new wt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Hn;var wn=function(R,xe){if(!Cn[R]){var Qe=(xe instanceof of?"Sh":"P")+(Object.keys(Xt).length+1).toString(10);xe.id=Qe,Cn[R]=Qe,Xt[Qe]=xe,qr.publish("addPattern",xe)}};m.ShadingPattern=of,m.TilingPattern=hp,m.addShadingPattern=function(R,xe){return I("addShadingPattern()"),wn(R,xe),this},m.beginTilingPattern=function(R){I("beginTilingPattern()"),va(R.boundingBox[0],R.boundingBox[1],R.boundingBox[2]-R.boundingBox[0],R.boundingBox[3]-R.boundingBox[1],R.matrix)},m.endTilingPattern=function(R,xe){I("endTilingPattern()"),xe.stream=Te[H].join(`
`),wn(R,xe),qr.publish("endTilingPattern",xe),rt.pop().restore()};var bt=m.__private__.newObject=function(){var R=Et();return ln(R,!0),R},Et=m.__private__.newObjectDeferred=function(){return pe++,de[pe]=function(){return J},pe},ln=function(R,xe){return xe=typeof xe=="boolean"&&xe,de[R]=J,xe&&le(R+" 0 obj"),R},Jt=m.__private__.newAdditionalObject=function(){var R={objId:Et(),content:""};return De.push(R),R},Ln=Et(),Nr=Et(),sn=m.__private__.decodeColorString=function(R){var xe=R.split(" ");if(xe.length!==2||xe[1]!=="g"&&xe[1]!=="G")xe.length===5&&(xe[4]==="k"||xe[4]==="K")&&(xe=[(1-xe[0])*(1-xe[3]),(1-xe[1])*(1-xe[3]),(1-xe[2])*(1-xe[3]),"r"]);else{var Qe=parseFloat(xe[0]);xe=[Qe,Qe,Qe,"r"]}for(var dt="#",kt=0;kt<3;kt++)dt+=("0"+Math.floor(255*parseFloat(xe[kt])).toString(16)).slice(-2);return dt},tn=m.__private__.encodeColorString=function(R){var xe;typeof R=="string"&&(R={ch1:R});var Qe=R.ch1,dt=R.ch2,kt=R.ch3,Ut=R.ch4,pn=R.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Qe=="string"&&Qe.charAt(0)!=="#"){var zn=new KE(Qe);if(zn.ok)Qe=zn.toHex();else if(!/^\d*\.?\d*$/.test(Qe))throw new Error('Invalid color "'+Qe+'" passed to jsPDF.encodeColorString.')}if(typeof Qe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Qe)&&(Qe="#"+Qe[1]+Qe[1]+Qe[2]+Qe[2]+Qe[3]+Qe[3]),typeof Qe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Qe)){var Wn=parseInt(Qe.substr(1),16);Qe=Wn>>16&255,dt=Wn>>8&255,kt=255&Wn}if(dt===void 0||Ut===void 0&&Qe===dt&&dt===kt)if(typeof Qe=="string")xe=Qe+" "+pn[0];else switch(R.precision){case 2:xe=K(Qe/255)+" "+pn[0];break;case 3:default:xe=B(Qe/255)+" "+pn[0]}else if(Ut===void 0||fs(Ut)==="object"){if(Ut&&!isNaN(Ut.a)&&Ut.a===0)return xe=["1.","1.","1.",pn[1]].join(" ");if(typeof Qe=="string")xe=[Qe,dt,kt,pn[1]].join(" ");else switch(R.precision){case 2:xe=[K(Qe/255),K(dt/255),K(kt/255),pn[1]].join(" ");break;default:case 3:xe=[B(Qe/255),B(dt/255),B(kt/255),pn[1]].join(" ")}}else if(typeof Qe=="string")xe=[Qe,dt,kt,Ut,pn[2]].join(" ");else switch(R.precision){case 2:xe=[K(Qe),K(dt),K(kt),K(Ut),pn[2]].join(" ");break;case 3:default:xe=[B(Qe),B(dt),B(kt),B(Ut),pn[2]].join(" ")}return xe},jn=m.__private__.getFilters=function(){return o},zr=m.__private__.putStream=function(R){var xe=(R=R||{}).data||"",Qe=R.filters||jn(),dt=R.alreadyAppliedFilters||[],kt=R.addLength1||!1,Ut=xe.length,pn=R.objectId,zn=function(bs){return bs};if(d!==null&&pn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(zn=xi.encryptor(pn,0));var Wn={};Qe===!0&&(Qe=["FlateEncode"]);var cr=R.additionalKeyValues||[],br=(Wn=Dr.API.processDataByFilters!==void 0?Dr.API.processDataByFilters(xe,Qe):{data:xe,reverseChain:[]}).reverseChain+(Array.isArray(dt)?dt.join(" "):dt.toString());if(Wn.data.length!==0&&(cr.push({key:"Length",value:Wn.data.length}),kt===!0&&cr.push({key:"Length1",value:Ut})),br.length!=0)if(br.split("/").length-1==1)cr.push({key:"Filter",value:br});else{cr.push({key:"Filter",value:"["+br+"]"});for(var Ur=0;Ur<cr.length;Ur+=1)if(cr[Ur].key==="DecodeParms"){for(var qi=[],vi=0;vi<Wn.reverseChain.split("/").length-1;vi+=1)qi.push("null");qi.push(cr[Ur].value),cr[Ur].value="["+qi.join(" ")+"]"}}le("<<");for(var Ci=0;Ci<cr.length;Ci++)le("/"+cr[Ci].key+" "+cr[Ci].value);le(">>"),Wn.data.length!==0&&(le("stream"),le(zn(Wn.data)),le("endstream"))},ki=m.__private__.putPage=function(R){var xe=R.number,Qe=R.data,dt=R.objId,kt=R.contentsObjId;ln(dt,!0),le("<</Type /Page"),le("/Parent "+R.rootDictionaryObjId+" 0 R"),le("/Resources "+R.resourceDictionaryObjId+" 0 R"),le("/MediaBox ["+parseFloat(fe(R.mediaBox.bottomLeftX))+" "+parseFloat(fe(R.mediaBox.bottomLeftY))+" "+fe(R.mediaBox.topRightX)+" "+fe(R.mediaBox.topRightY)+"]"),R.cropBox!==null&&le("/CropBox ["+fe(R.cropBox.bottomLeftX)+" "+fe(R.cropBox.bottomLeftY)+" "+fe(R.cropBox.topRightX)+" "+fe(R.cropBox.topRightY)+"]"),R.bleedBox!==null&&le("/BleedBox ["+fe(R.bleedBox.bottomLeftX)+" "+fe(R.bleedBox.bottomLeftY)+" "+fe(R.bleedBox.topRightX)+" "+fe(R.bleedBox.topRightY)+"]"),R.trimBox!==null&&le("/TrimBox ["+fe(R.trimBox.bottomLeftX)+" "+fe(R.trimBox.bottomLeftY)+" "+fe(R.trimBox.topRightX)+" "+fe(R.trimBox.topRightY)+"]"),R.artBox!==null&&le("/ArtBox ["+fe(R.artBox.bottomLeftX)+" "+fe(R.artBox.bottomLeftY)+" "+fe(R.artBox.topRightX)+" "+fe(R.artBox.topRightY)+"]"),typeof R.userUnit=="number"&&R.userUnit!==1&&le("/UserUnit "+R.userUnit),qr.publish("putPage",{objId:dt,pageContext:ir[xe],pageNumber:xe,page:Qe}),le("/Contents "+kt+" 0 R"),le(">>"),le("endobj");var Ut=Qe.join(`
`);return V===D.ADVANCED&&(Ut+=`
Q`),ln(kt,!0),zr({data:Ut,filters:jn(),objectId:kt}),le("endobj"),dt},zi=m.__private__.putPages=function(){var R,xe,Qe=[];for(R=1;R<=_r;R++)ir[R].objId=Et(),ir[R].contentsObjId=Et();for(R=1;R<=_r;R++)Qe.push(ki({number:R,data:Te[R],objId:ir[R].objId,contentsObjId:ir[R].contentsObjId,mediaBox:ir[R].mediaBox,cropBox:ir[R].cropBox,bleedBox:ir[R].bleedBox,trimBox:ir[R].trimBox,artBox:ir[R].artBox,userUnit:ir[R].userUnit,rootDictionaryObjId:Ln,resourceDictionaryObjId:Nr}));ln(Ln,!0),le("<</Type /Pages");var dt="/Kids [";for(xe=0;xe<_r;xe++)dt+=Qe[xe]+" 0 R ";le(dt+"]"),le("/Count "+_r),le(">>"),le("endobj"),qr.publish("postPutPages")},Qr=function(R){qr.publish("putFont",{font:R,out:le,newObject:bt,putStream:zr}),R.isAlreadyPutted!==!0&&(R.objectNumber=bt(),le("<<"),le("/Type /Font"),le("/BaseFont /"+lp(R.postScriptName)),le("/Subtype /Type1"),typeof R.encoding=="string"&&le("/Encoding /"+R.encoding),le("/FirstChar 32"),le("/LastChar 255"),le(">>"),le("endobj"))},ur=function(){for(var R in Sn)Sn.hasOwnProperty(R)&&(p===!1||p===!0&&v.hasOwnProperty(R))&&Qr(Sn[R])},wr=function(R){R.objectNumber=bt();var xe=[];xe.push({key:"Type",value:"/XObject"}),xe.push({key:"Subtype",value:"/Form"}),xe.push({key:"BBox",value:"["+[fe(R.x),fe(R.y),fe(R.x+R.width),fe(R.y+R.height)].join(" ")+"]"}),xe.push({key:"Matrix",value:"["+R.matrix.toString()+"]"});var Qe=R.pages[1].join(`
`);zr({data:Qe,additionalKeyValues:xe,objectId:R.objectNumber}),le("endobj")},Rr=function(){for(var R in ls)ls.hasOwnProperty(R)&&wr(ls[R])},Lr=function(R,xe){var Qe,dt=[],kt=1/(xe-1);for(Qe=0;Qe<1;Qe+=kt)dt.push(Qe);if(dt.push(1),R[0].offset!=0){var Ut={offset:0,color:R[0].color};R.unshift(Ut)}if(R[R.length-1].offset!=1){var pn={offset:1,color:R[R.length-1].color};R.push(pn)}for(var zn="",Wn=0,cr=0;cr<dt.length;cr++){for(Qe=dt[cr];Qe>R[Wn+1].offset;)Wn++;var br=R[Wn].offset,Ur=(Qe-br)/(R[Wn+1].offset-br),qi=R[Wn].color,vi=R[Wn+1].color;zn+=me(Math.round((1-Ur)*qi[0]+Ur*vi[0]).toString(16))+me(Math.round((1-Ur)*qi[1]+Ur*vi[1]).toString(16))+me(Math.round((1-Ur)*qi[2]+Ur*vi[2]).toString(16))}return zn.trim()},un=function(R,xe){xe||(xe=21);var Qe=bt(),dt=Lr(R.colors,xe),kt=[];kt.push({key:"FunctionType",value:"0"}),kt.push({key:"Domain",value:"[0.0 1.0]"}),kt.push({key:"Size",value:"["+xe+"]"}),kt.push({key:"BitsPerSample",value:"8"}),kt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),kt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),zr({data:dt,additionalKeyValues:kt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Qe}),le("endobj"),R.objectNumber=bt(),le("<< /ShadingType "+R.type),le("/ColorSpace /DeviceRGB");var Ut="/Coords ["+fe(parseFloat(R.coords[0]))+" "+fe(parseFloat(R.coords[1]))+" ";R.type===2?Ut+=fe(parseFloat(R.coords[2]))+" "+fe(parseFloat(R.coords[3])):Ut+=fe(parseFloat(R.coords[2]))+" "+fe(parseFloat(R.coords[3]))+" "+fe(parseFloat(R.coords[4]))+" "+fe(parseFloat(R.coords[5])),le(Ut+="]"),R.matrix&&le("/Matrix ["+R.matrix.toString()+"]"),le("/Function "+Qe+" 0 R"),le("/Extend [true true]"),le(">>"),le("endobj")},ss=function(R,xe){var Qe=Et(),dt=bt();xe.push({resourcesOid:Qe,objectOid:dt}),R.objectNumber=dt;var kt=[];kt.push({key:"Type",value:"/Pattern"}),kt.push({key:"PatternType",value:"1"}),kt.push({key:"PaintType",value:"1"}),kt.push({key:"TilingType",value:"1"}),kt.push({key:"BBox",value:"["+R.boundingBox.map(fe).join(" ")+"]"}),kt.push({key:"XStep",value:fe(R.xStep)}),kt.push({key:"YStep",value:fe(R.yStep)}),kt.push({key:"Resources",value:Qe+" 0 R"}),R.matrix&&kt.push({key:"Matrix",value:"["+R.matrix.toString()+"]"}),zr({data:R.stream,additionalKeyValues:kt,objectId:R.objectNumber}),le("endobj")},pi=function(R){var xe;for(xe in Xt)Xt.hasOwnProperty(xe)&&(Xt[xe]instanceof of?un(Xt[xe]):Xt[xe]instanceof hp&&ss(Xt[xe],R))},Ki=function(R){for(var xe in R.objectNumber=bt(),le("<<"),R)switch(xe){case"opacity":le("/ca "+K(R[xe]));break;case"stroke-opacity":le("/CA "+K(R[xe]))}le(">>"),le("endobj")},$i=function(){var R;for(R in Dn)Dn.hasOwnProperty(R)&&Ki(Dn[R])},Ni=function(){for(var R in le("/XObject <<"),ls)ls.hasOwnProperty(R)&&ls[R].objectNumber>=0&&le("/"+R+" "+ls[R].objectNumber+" 0 R");qr.publish("putXobjectDict"),le(">>")},Pr=function(){xi.oid=bt(),le("<<"),le("/Filter /Standard"),le("/V "+xi.v),le("/R "+xi.r),le("/U <"+xi.toHexString(xi.U)+">"),le("/O <"+xi.toHexString(xi.O)+">"),le("/P "+xi.P),le(">>"),le("endobj")},Mr=function(){for(var R in le("/Font <<"),Sn)Sn.hasOwnProperty(R)&&(p===!1||p===!0&&v.hasOwnProperty(R))&&le("/"+R+" "+Sn[R].objectNumber+" 0 R");le(">>")},Yo=function(){if(Object.keys(Xt).length>0){for(var R in le("/Shading <<"),Xt)Xt.hasOwnProperty(R)&&Xt[R]instanceof of&&Xt[R].objectNumber>=0&&le("/"+R+" "+Xt[R].objectNumber+" 0 R");qr.publish("putShadingPatternDict"),le(">>")}},Xs=function(R){if(Object.keys(Xt).length>0){for(var xe in le("/Pattern <<"),Xt)Xt.hasOwnProperty(xe)&&Xt[xe]instanceof m.TilingPattern&&Xt[xe].objectNumber>=0&&Xt[xe].objectNumber<R&&le("/"+xe+" "+Xt[xe].objectNumber+" 0 R");qr.publish("putTilingPatternDict"),le(">>")}},An=function(){if(Object.keys(Dn).length>0){var R;for(R in le("/ExtGState <<"),Dn)Dn.hasOwnProperty(R)&&Dn[R].objectNumber>=0&&le("/"+R+" "+Dn[R].objectNumber+" 0 R");qr.publish("putGStateDict"),le(">>")}},Pn=function(R){ln(R.resourcesOid,!0),le("<<"),le("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Mr(),Yo(),Xs(R.objectOid),An(),Ni(),le(">>"),le("endobj")},En=function(){var R=[];ur(),$i(),Rr(),pi(R),qr.publish("putResources"),R.forEach(Pn),Pn({resourcesOid:Nr,objectOid:Number.MAX_SAFE_INTEGER}),qr.publish("postPutResources")},gi=function(){qr.publish("putAdditionalObjects");for(var R=0;R<De.length;R++){var xe=De[R];ln(xe.objId,!0),le(xe.content),le("endobj")}qr.publish("postPutAdditionalObjects")},mi=function(R){Nn[R.fontName]=Nn[R.fontName]||{},Nn[R.fontName][R.fontStyle]=R.id},Zi=function(R,xe,Qe,dt,kt){var Ut={id:"F"+(Object.keys(Sn).length+1).toString(10),postScriptName:R,fontName:xe,fontStyle:Qe,encoding:dt,isStandardFont:kt||!1,metadata:{}};return qr.publish("addFont",{font:Ut,instance:this}),Sn[Ut.id]=Ut,mi(Ut),Ut.id},Xn=function(R){for(var xe=0,Qe=ve.length;xe<Qe;xe++){var dt=Zi.call(this,R[xe][0],R[xe][1],R[xe][2],ve[xe][3],!0);p===!1&&(v[dt]=!0);var kt=R[xe][0].split("-");mi({id:dt,fontName:kt[0],fontStyle:kt[1]||""})}qr.publish("addFonts",{fonts:Sn,dictionary:Nn})},kr=function(R){return R.foo=function(){try{return R.apply(this,arguments)}catch(dt){var xe=dt.stack||"";~xe.indexOf(" at ")&&(xe=xe.split(" at ")[1]);var Qe="Error in function "+xe.split(`
`)[0].split("<")[0]+": "+dt.message;if(!Br.console)throw new Error(Qe);Br.console.error(Qe,dt),Br.alert&&alert(Qe)}},R.foo.bar=R,R.foo},zs=function(R,xe){var Qe,dt,kt,Ut,pn,zn,Wn,cr,br;if(kt=(xe=xe||{}).sourceEncoding||"Unicode",pn=xe.outputEncoding,(xe.autoencode||pn)&&Sn[at].metadata&&Sn[at].metadata[kt]&&Sn[at].metadata[kt].encoding&&(Ut=Sn[at].metadata[kt].encoding,!pn&&Sn[at].encoding&&(pn=Sn[at].encoding),!pn&&Ut.codePages&&(pn=Ut.codePages[0]),typeof pn=="string"&&(pn=Ut[pn]),pn)){for(Wn=!1,zn=[],Qe=0,dt=R.length;Qe<dt;Qe++)(cr=pn[R.charCodeAt(Qe)])?zn.push(String.fromCharCode(cr)):zn.push(R[Qe]),zn[Qe].charCodeAt(0)>>8&&(Wn=!0);R=zn.join("")}for(Qe=R.length;Wn===void 0&&Qe!==0;)R.charCodeAt(Qe-1)>>8&&(Wn=!0),Qe--;if(!Wn)return R;for(zn=xe.noBOM?[]:[254,255],Qe=0,dt=R.length;Qe<dt;Qe++){if((br=(cr=R.charCodeAt(Qe))>>8)>>8)throw new Error("Character at position "+Qe+" of string '"+R+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");zn.push(br),zn.push(cr-(br<<8))}return String.fromCharCode.apply(void 0,zn)},vr=m.__private__.pdfEscape=m.pdfEscape=function(R,xe){return zs(R,xe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ps=m.__private__.beginPage=function(R){Te[++_r]=[],ir[_r]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(R[0]),topRightY:Number(R[1])}},Yr(_r),se(Te[H])},us=function(R,xe){var Qe,dt,kt;switch(n=xe||n,typeof R=="string"&&(Qe=A(R.toLowerCase()),Array.isArray(Qe)&&(dt=Qe[0],kt=Qe[1])),Array.isArray(R)&&(dt=R[0]*it,kt=R[1]*it),isNaN(dt)&&(dt=i[0],kt=i[1]),(dt>14400||kt>14400)&&(xs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),dt=Math.min(14400,dt),kt=Math.min(14400,kt)),i=[dt,kt],n.substr(0,1)){case"l":kt>dt&&(i=[kt,dt]);break;case"p":dt>kt&&(i=[kt,dt])}ps(i),lu(Mu),le(Xi),hu!==0&&le(hu+" J"),Li!==0&&le(Li+" j"),qr.publish("addPage",{pageNumber:_r})},Ss=function(R){R>0&&R<=_r&&(Te.splice(R,1),ir.splice(R,1),_r--,H>_r&&(H=_r),this.setPage(H))},Yr=function(R){R>0&&R<=_r&&(H=R)},bn=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Te.length-1},cn=function(R,xe,Qe){var dt,kt=void 0;return Qe=Qe||{},R=R!==void 0?R:Sn[at].fontName,xe=xe!==void 0?xe:Sn[at].fontStyle,dt=R.toLowerCase(),Nn[dt]!==void 0&&Nn[dt][xe]!==void 0?kt=Nn[dt][xe]:Nn[R]!==void 0&&Nn[R][xe]!==void 0?kt=Nn[R][xe]:Qe.disableWarning===!1&&xs.warn("Unable to look up font label for font '"+R+"', '"+xe+"'. Refer to getFontList() for available fonts."),kt||Qe.noFallback||(kt=Nn.times[xe])==null&&(kt=Nn.times.normal),kt},$r=m.__private__.putInfo=function(){var R=bt(),xe=function(dt){return dt};for(var Qe in d!==null&&(xe=xi.encryptor(R,0)),le("<<"),le("/Producer ("+vr(xe("jsPDF "+Dr.version))+")"),Ye)Ye.hasOwnProperty(Qe)&&Ye[Qe]&&le("/"+Qe.substr(0,1).toUpperCase()+Qe.substr(1)+" ("+vr(xe(Ye[Qe]))+")");le("/CreationDate ("+vr(xe(U))+")"),le(">>"),le("endobj")},Gi=m.__private__.putCatalog=function(R){var xe=(R=R||{}).rootDictionaryObjId||Ln;switch(bt(),le("<<"),le("/Type /Catalog"),le("/Pages "+xe+" 0 R"),Ge||(Ge="fullwidth"),Ge){case"fullwidth":le("/OpenAction [3 0 R /FitH null]");break;case"fullheight":le("/OpenAction [3 0 R /FitV null]");break;case"fullpage":le("/OpenAction [3 0 R /Fit]");break;case"original":le("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Qe=""+Ge;Qe.substr(Qe.length-1)==="%"&&(Ge=parseInt(Ge)/100),typeof Ge=="number"&&le("/OpenAction [3 0 R /XYZ null null "+K(Ge)+"]")}switch(Gt||(Gt="continuous"),Gt){case"continuous":le("/PageLayout /OneColumn");break;case"single":le("/PageLayout /SinglePage");break;case"two":case"twoleft":le("/PageLayout /TwoColumnLeft");break;case"tworight":le("/PageLayout /TwoColumnRight")}qe&&le("/PageMode /"+qe),qr.publish("putCatalog"),le(">>"),le("endobj")},Ao=m.__private__.putTrailer=function(){le("trailer"),le("<<"),le("/Size "+(pe+1)),le("/Root "+pe+" 0 R"),le("/Info "+(pe-1)+" 0 R"),d!==null&&le("/Encrypt "+xi.oid+" 0 R"),le("/ID [ <"+$+"> <"+$+"> ]"),le(">>")},To=m.__private__.putHeader=function(){le("%PDF-"+x),le("%ºß¬à")},Ol=m.__private__.putXRef=function(){var R="0000000000";le("xref"),le("0 "+(pe+1)),le("0000000000 65535 f ");for(var xe=1;xe<=pe;xe++)typeof de[xe]=="function"?le((R+de[xe]()).slice(-10)+" 00000 n "):de[xe]!==void 0?le((R+de[xe]).slice(-10)+" 00000 n "):le("0000000000 00000 n ")},Ns=m.__private__.buildDocument=function(){ee(),se(X),qr.publish("buildDocument"),To(),zi(),gi(),En(),d!==null&&Pr(),$r(),Gi();var R=J;return Ol(),Ao(),le("startxref"),le(""+R),le("%%EOF"),se(Te[H]),X.join(`
`)},ia=m.__private__.getBlob=function(R){return new Blob([Se(R)],{type:"application/pdf"})},oi=m.output=m.__private__.output=kr(function(R,xe){switch(typeof(xe=xe||{})=="string"?xe={filename:xe}:xe.filename=xe.filename||"generated.pdf",R){case void 0:return Ns();case"save":m.save(xe.filename);break;case"arraybuffer":return Se(Ns());case"blob":return ia(Ns());case"bloburi":case"bloburl":if(Br.URL!==void 0&&typeof Br.URL.createObjectURL=="function")return Br.URL&&Br.URL.createObjectURL(ia(Ns()))||void 0;xs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Qe="",dt=Ns();try{Qe=Ab(dt)}catch{Qe=Ab(unescape(encodeURIComponent(dt)))}return"data:application/pdf;filename="+xe.filename+";base64,"+Qe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Br)==="[object Window]"){var kt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ut=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';xe.pdfObjectUrl&&(kt=xe.pdfObjectUrl,Ut="");var pn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+kt+'"'+Ut+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(xe)+");<\/script></body></html>",zn=Br.open();return zn!==null&&zn.document.write(pn),zn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Br)==="[object Window]"){var Wn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(xe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+xe.filename+'" width="500px" height="400px" /></body></html>',cr=Br.open();if(cr!==null){cr.document.write(Wn);var br=this;cr.document.documentElement.querySelector("#pdfViewer").onload=function(){cr.document.title=xe.filename,cr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(br.output("bloburl"))}}return cr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Br)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ur='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",xe)+'"></iframe></body></html>',qi=Br.open();if(qi!==null&&(qi.document.write(Ur),qi.document.title=xe.filename),qi||typeof safari>"u")return qi;break;case"datauri":case"dataurl":return Br.document.location.href=this.output("datauristring",xe);default:return null}}),Pa=function(R){return Array.isArray(Os)===!0&&Os.indexOf(R)>-1};switch(r){case"pt":it=1;break;case"mm":it=72/25.4;break;case"cm":it=72/2.54;break;case"in":it=72;break;case"px":it=Pa("px_scaling")==1?.75:96/72;break;case"pc":case"em":it=12;break;case"ex":it=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);it=r}var xi=null;nt(),Q();var sa=function(R){return d!==null?xi.encryptor(R,0):function(xe){return xe}},Do=m.__private__.getPageInfo=m.getPageInfo=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ir[R].objId,pageNumber:R,pageContext:ir[R]}},yr=m.__private__.getPageInfoByObjId=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var xe in ir)if(ir[xe].objId===R)break;return Do(xe)},xr=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:ir[H].objId,pageNumber:H,pageContext:ir[H]}};m.addPage=function(){return us.apply(this,arguments),this},m.setPage=function(){return Yr.apply(this,arguments),se.call(this,Te[H]),this},m.insertPage=function(R){return this.addPage(),this.movePage(H,R),this},m.movePage=function(R,xe){var Qe,dt;if(R>xe){Qe=Te[R],dt=ir[R];for(var kt=R;kt>xe;kt--)Te[kt]=Te[kt-1],ir[kt]=ir[kt-1];Te[xe]=Qe,ir[xe]=dt,this.setPage(xe)}else if(R<xe){Qe=Te[R],dt=ir[R];for(var Ut=R;Ut<xe;Ut++)Te[Ut]=Te[Ut+1],ir[Ut]=ir[Ut+1];Te[xe]=Qe,ir[xe]=dt,this.setPage(xe)}return this},m.deletePage=function(){return Ss.apply(this,arguments),this},m.__private__.text=m.text=function(R,xe,Qe,dt,kt){var Ut,pn,zn,Wn,cr,br,Ur,qi,vi,Ci=(dt=dt||{}).scope||this;if(typeof R=="number"&&typeof xe=="number"&&(typeof Qe=="string"||Array.isArray(Qe))){var bs=Qe;Qe=xe,xe=R,R=bs}if(arguments[3]instanceof wt?(I("The transform parameter of text() with a Matrix value"),vi=kt):(zn=arguments[4],Wn=arguments[5],fs(Ur=arguments[3])==="object"&&Ur!==null||(typeof zn=="string"&&(Wn=zn,zn=null),typeof Ur=="string"&&(Wn=Ur,Ur=null),typeof Ur=="number"&&(zn=Ur,Ur=null),dt={flags:Ur,angle:zn,align:Wn})),isNaN(xe)||isNaN(Qe)||R==null)throw new Error("Invalid arguments passed to jsPDF.text");if(R.length===0)return Ci;var Cs="",Xo=!1,Hr=typeof dt.lineHeightFactor=="number"?dt.lineHeightFactor:au,eo=Ci.internal.scaleFactor;function Fl(Pi){return Pi=Pi.split("	").join(Array(dt.TabLen||9).join(" ")),vr(Pi,Ur)}function mo(Pi){for(var Ii,_s=Pi.concat(),Ui=[],ea=_s.length;ea--;)typeof(Ii=_s.shift())=="string"?Ui.push(Ii):Array.isArray(Pi)&&(Ii.length===1||Ii[1]===void 0&&Ii[2]===void 0)?Ui.push(Ii[0]):Ui.push([Ii[0],Ii[1],Ii[2]]);return Ui}function Tu(Pi,Ii){var _s;if(typeof Pi=="string")_s=Ii(Pi)[0];else if(Array.isArray(Pi)){for(var Ui,ea,No=Pi.concat(),aa=[],ec=No.length;ec--;)typeof(Ui=No.shift())=="string"?aa.push(Ii(Ui)[0]):Array.isArray(Ui)&&typeof Ui[0]=="string"&&(ea=Ii(Ui[0],Ui[1],Ui[2]),aa.push([ea[0],ea[1],ea[2]]));_s=aa}return _s}var ka=!1,Qu=!0;if(typeof R=="string")ka=!0;else if(Array.isArray(R)){var yl=R.concat();pn=[];for(var bl,Es=yl.length;Es--;)(typeof(bl=yl.shift())!="string"||Array.isArray(bl)&&typeof bl[0]!="string")&&(Qu=!1);ka=Qu}if(ka===!1)throw new Error('Type of text must be string or Array. "'+R+'" is not recognized.');typeof R=="string"&&(R=R.match(/[\r?\n]/)?R.split(/\r\n|\r|\n/g):[R]);var Aa=$e/Ci.internal.scaleFactor,Jo=Aa*(Hr-1);switch(dt.baseline){case"bottom":Qe-=Jo;break;case"top":Qe+=Aa-Jo;break;case"hanging":Qe+=Aa-2*Jo;break;case"middle":Qe+=Aa/2-Jo}if((br=dt.maxWidth||0)>0&&(typeof R=="string"?R=Ci.splitTextToSize(R,br):Object.prototype.toString.call(R)==="[object Array]"&&(R=R.reduce(function(Pi,Ii){return Pi.concat(Ci.splitTextToSize(Ii,br))},[]))),Ut={text:R,x:xe,y:Qe,options:dt,mutex:{pdfEscape:vr,activeFontKey:at,fonts:Sn,activeFontSize:$e}},qr.publish("preProcessText",Ut),R=Ut.text,zn=(dt=Ut.options).angle,!(vi instanceof wt)&&zn&&typeof zn=="number"){zn*=Math.PI/180,dt.rotationDirection===0&&(zn=-zn),V===D.ADVANCED&&(zn=-zn);var Oo=Math.cos(zn),jl=Math.sin(zn);vi=new wt(Oo,jl,-jl,Oo,0,0)}else zn&&zn instanceof wt&&(vi=zn);V!==D.ADVANCED||vi||(vi=Hn),(cr=dt.charSpace||cu)!==void 0&&(Cs+=fe(N(cr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(qi=dt.horizontalScale)!==void 0&&(Cs+=fe(100*qi)+` Tz
`),dt.lang;var to=-1,vo=dt.renderingMode!==void 0?dt.renderingMode:dt.stroke,yo=Ci.internal.getCurrentPageInfo().pageContext;switch(vo){case 0:case!1:case"fill":to=0;break;case 1:case!0:case"stroke":to=1;break;case 2:case"fillThenStroke":to=2;break;case 3:case"invisible":to=3;break;case 4:case"fillAndAddForClipping":to=4;break;case 5:case"strokeAndAddPathForClipping":to=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":to=6;break;case 7:case"addToPathForClipping":to=7}var Ac=yo.usedRenderingMode!==void 0?yo.usedRenderingMode:-1;to!==-1?Cs+=to+` Tr
`:Ac!==-1&&(Cs+=`0 Tr
`),to!==-1&&(yo.usedRenderingMode=to),Wn=dt.align||"left";var Is,qa=$e*Hr,no=Ci.internal.pageSize.getWidth(),ro=Sn[at];cr=dt.charSpace||cu,br=dt.maxWidth||0,Ur=Object.assign({autoencode:!0,noBOM:!0},dt.flags);var Ya=[],Ka=function(Pi){return Ci.getStringUnitWidth(Pi,{font:ro,charSpace:cr,fontSize:$e,doKerning:!1})*$e/eo};if(Object.prototype.toString.call(R)==="[object Array]"){var io;pn=mo(R),Wn!=="left"&&(Is=pn.map(Ka));var Vs,Ta=0;if(Wn==="right"){xe-=Is[0],R=[],Es=pn.length;for(var Qo=0;Qo<Es;Qo++)Qo===0?(Vs=dr(xe),io=vs(Qe)):(Vs=N(Ta-Is[Qo]),io=-qa),R.push([pn[Qo],Vs,io]),Ta=Is[Qo]}else if(Wn==="center"){xe-=Is[0]/2,R=[],Es=pn.length;for(var so=0;so<Es;so++)so===0?(Vs=dr(xe),io=vs(Qe)):(Vs=N((Ta-Is[so])/2),io=-qa),R.push([pn[so],Vs,io]),Ta=Is[so]}else if(Wn==="left"){R=[],Es=pn.length;for(var St=0;St<Es;St++)R.push(pn[St])}else if(Wn==="justify"&&ro.encoding==="Identity-H"){R=[],Es=pn.length,br=br!==0?br:no;for(var qt=0,It=0;It<Es;It++)if(io=It===0?vs(Qe):-qa,Vs=It===0?dr(xe):qt,It<Es-1){var Rn=N((br-Is[It])/(pn[It].split(" ").length-1)),tr=pn[It].split(" ");R.push([tr[0]+" ",Vs,io]),qt=0;for(var Sr=1;Sr<tr.length;Sr++){var Ji=(Ka(tr[Sr-1]+" "+tr[Sr])-Ka(tr[Sr]))*eo+Rn;Sr==tr.length-1?R.push([tr[Sr],Ji,0]):R.push([tr[Sr]+" ",Ji,0]),qt-=Ji}}else R.push([pn[It],Vs,io]);R.push(["",qt,0])}else{if(Wn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(R=[],Es=pn.length,br=br!==0?br:no,It=0;It<Es;It++)io=It===0?vs(Qe):-qa,Vs=It===0?dr(xe):0,It<Es-1?Ya.push(fe(N((br-Is[It])/(pn[It].split(" ").length-1)))):Ya.push(0),R.push([pn[It],Vs,io])}}var Ei=typeof dt.R2L=="boolean"?dt.R2L:lt;Ei===!0&&(R=Tu(R,function(Pi,Ii,_s){return[Pi.split("").reverse().join(""),Ii,_s]})),Ut={text:R,x:xe,y:Qe,options:dt,mutex:{pdfEscape:vr,activeFontKey:at,fonts:Sn,activeFontSize:$e}},qr.publish("postProcessText",Ut),R=Ut.text,Xo=Ut.mutex.isHex||!1;var fu=Sn[at].encoding;fu!=="WinAnsiEncoding"&&fu!=="StandardEncoding"||(R=Tu(R,function(Pi,Ii,_s){return[Fl(Pi),Ii,_s]})),pn=mo(R),R=[];for(var bo,Qi,Da,Za=0,Oa=1,Na=Array.isArray(pn[0])?Oa:Za,Ia="",ni=function(Pi,Ii,_s){var Ui="";return _s instanceof wt?(_s=typeof dt.angle=="number"?kn(_s,new wt(1,0,0,1,Pi,Ii)):kn(new wt(1,0,0,1,Pi,Ii),_s),V===D.ADVANCED&&(_s=kn(new wt(1,0,0,-1,0,0),_s)),Ui=_s.join(" ")+` Tm
`):Ui=fe(Pi)+" "+fe(Ii)+` Td
`,Ui},ya=0;ya<pn.length;ya++){switch(Ia="",Na){case Oa:Da=(Xo?"<":"(")+pn[ya][0]+(Xo?">":")"),bo=parseFloat(pn[ya][1]),Qi=parseFloat(pn[ya][2]);break;case Za:Da=(Xo?"<":"(")+pn[ya]+(Xo?">":")"),bo=dr(xe),Qi=vs(Qe)}Ya!==void 0&&Ya[ya]!==void 0&&(Ia=Ya[ya]+` Tw
`),ya===0?R.push(Ia+ni(bo,Qi,vi)+Da):Na===Za?R.push(Ia+Da):Na===Oa&&R.push(Ia+ni(bo,Qi,vi)+Da)}R=Na===Za?R.join(` Tj
T* `):R.join(` Tj
`),R+=` Tj
`;var Us=`BT
/`;return Us+=at+" "+$e+` Tf
`,Us+=fe($e*Hr)+` TL
`,Us+=Ma+`
`,Us+=Cs,Us+=R,le(Us+="ET"),v[at]=!0,Ci};var Ko=m.__private__.clip=m.clip=function(R){return le(R==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Ko("evenodd")},m.__private__.discardPath=m.discardPath=function(){return le("n"),this};var Vr=m.__private__.isValidStyle=function(R){var xe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(R)!==-1&&(xe=!0),xe};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(R){return Vr(R)&&(c=R),this};var ml=m.__private__.getStyle=m.getStyle=function(R){var xe=c;switch(R){case"D":case"S":xe="S";break;case"F":xe="f";break;case"FD":case"DF":xe="B";break;case"f":case"f*":case"B":case"B*":xe=R}return xe},ga=m.close=function(){return le("h"),this};m.stroke=function(){return le("S"),this},m.fill=function(R){return Ha("f",R),this},m.fillEvenOdd=function(R){return Ha("f*",R),this},m.fillStroke=function(R){return Ha("B",R),this},m.fillStrokeEvenOdd=function(R){return Ha("B*",R),this};var Ha=function(R,xe){fs(xe)==="object"?Qs(xe,R):le(R)},ei=function(R){R===null||V===D.ADVANCED&&R===void 0||(R=ml(R),le(R))};function Js(R,xe,Qe,dt,kt){var Ut=new hp(xe||this.boundingBox,Qe||this.xStep,dt||this.yStep,this.gState,kt||this.matrix);Ut.stream=this.stream;var pn=R+"$$"+this.cloneIndex+++"$$";return wn(pn,Ut),Ut}var Qs=function(R,xe){var Qe=Cn[R.key],dt=Xt[Qe];if(dt instanceof of)le("q"),le(ou(xe)),dt.gState&&m.setGState(dt.gState),le(R.matrix.toString()+" cm"),le("/"+Qe+" sh"),le("Q");else if(dt instanceof hp){var kt=new wt(1,0,0,-1,0,Ga());R.matrix&&(kt=kt.multiply(R.matrix||Hn),Qe=Js.call(dt,R.key,R.boundingBox,R.xStep,R.yStep,kt).id),le("q"),le("/Pattern cs"),le("/"+Qe+" scn"),dt.gState&&m.setGState(dt.gState),le(xe),le("Q")}},ou=function(R){switch(R){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Cr=m.moveTo=function(R,xe){return le(fe(N(R))+" "+fe(z(xe))+" m"),this},Kr=m.lineTo=function(R,xe){return le(fe(N(R))+" "+fe(z(xe))+" l"),this},vl=m.curveTo=function(R,xe,Qe,dt,kt,Ut){return le([fe(N(R)),fe(z(xe)),fe(N(Qe)),fe(z(dt)),fe(N(kt)),fe(z(Ut)),"c"].join(" ")),this};m.__private__.line=m.line=function(R,xe,Qe,dt,kt){if(isNaN(R)||isNaN(xe)||isNaN(Qe)||isNaN(dt)||!Vr(kt))throw new Error("Invalid arguments passed to jsPDF.line");return V===D.COMPAT?this.lines([[Qe-R,dt-xe]],R,xe,[1,1],kt||"S"):this.lines([[Qe-R,dt-xe]],R,xe,[1,1]).stroke()},m.__private__.lines=m.lines=function(R,xe,Qe,dt,kt,Ut){var pn,zn,Wn,cr,br,Ur,qi,vi,Ci,bs,Cs,Xo;if(typeof R=="number"&&(Xo=Qe,Qe=xe,xe=R,R=Xo),dt=dt||[1,1],Ut=Ut||!1,isNaN(xe)||isNaN(Qe)||!Array.isArray(R)||!Array.isArray(dt)||!Vr(kt)||typeof Ut!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Cr(xe,Qe),pn=dt[0],zn=dt[1],cr=R.length,bs=xe,Cs=Qe,Wn=0;Wn<cr;Wn++)(br=R[Wn]).length===2?(bs=br[0]*pn+bs,Cs=br[1]*zn+Cs,Kr(bs,Cs)):(Ur=br[0]*pn+bs,qi=br[1]*zn+Cs,vi=br[2]*pn+bs,Ci=br[3]*zn+Cs,bs=br[4]*pn+bs,Cs=br[5]*zn+Cs,vl(Ur,qi,vi,Ci,bs,Cs));return Ut&&ga(),ei(kt),this},m.path=function(R){for(var xe=0;xe<R.length;xe++){var Qe=R[xe],dt=Qe.c;switch(Qe.op){case"m":Cr(dt[0],dt[1]);break;case"l":Kr(dt[0],dt[1]);break;case"c":vl.apply(this,dt);break;case"h":ga()}}return this},m.__private__.rect=m.rect=function(R,xe,Qe,dt,kt){if(isNaN(R)||isNaN(xe)||isNaN(Qe)||isNaN(dt)||!Vr(kt))throw new Error("Invalid arguments passed to jsPDF.rect");return V===D.COMPAT&&(dt=-dt),le([fe(N(R)),fe(z(xe)),fe(N(Qe)),fe(N(dt)),"re"].join(" ")),ei(kt),this},m.__private__.triangle=m.triangle=function(R,xe,Qe,dt,kt,Ut,pn){if(isNaN(R)||isNaN(xe)||isNaN(Qe)||isNaN(dt)||isNaN(kt)||isNaN(Ut)||!Vr(pn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Qe-R,dt-xe],[kt-Qe,Ut-dt],[R-kt,xe-Ut]],R,xe,[1,1],pn,!0),this},m.__private__.roundedRect=m.roundedRect=function(R,xe,Qe,dt,kt,Ut,pn){if(isNaN(R)||isNaN(xe)||isNaN(Qe)||isNaN(dt)||isNaN(kt)||isNaN(Ut)||!Vr(pn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var zn=4/3*(Math.SQRT2-1);return kt=Math.min(kt,.5*Qe),Ut=Math.min(Ut,.5*dt),this.lines([[Qe-2*kt,0],[kt*zn,0,kt,Ut-Ut*zn,kt,Ut],[0,dt-2*Ut],[0,Ut*zn,-kt*zn,Ut,-kt,Ut],[2*kt-Qe,0],[-kt*zn,0,-kt,-Ut*zn,-kt,-Ut],[0,2*Ut-dt],[0,-Ut*zn,kt*zn,-Ut,kt,-Ut]],R+kt,xe,[1,1],pn,!0),this},m.__private__.ellipse=m.ellipse=function(R,xe,Qe,dt,kt){if(isNaN(R)||isNaN(xe)||isNaN(Qe)||isNaN(dt)||!Vr(kt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ut=4/3*(Math.SQRT2-1)*Qe,pn=4/3*(Math.SQRT2-1)*dt;return Cr(R+Qe,xe),vl(R+Qe,xe-pn,R+Ut,xe-dt,R,xe-dt),vl(R-Ut,xe-dt,R-Qe,xe-pn,R-Qe,xe),vl(R-Qe,xe+pn,R-Ut,xe+dt,R,xe+dt),vl(R+Ut,xe+dt,R+Qe,xe+pn,R+Qe,xe),ei(kt),this},m.__private__.circle=m.circle=function(R,xe,Qe,dt){if(isNaN(R)||isNaN(xe)||isNaN(Qe)||!Vr(dt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(R,xe,Qe,Qe,dt)},m.setFont=function(R,xe,Qe){return Qe&&(xe=ge(xe,Qe)),at=cn(R,xe,{disableWarning:!1}),this};var Mc=m.__private__.getFont=m.getFont=function(){return Sn[cn.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var R,xe,Qe={};for(R in Nn)if(Nn.hasOwnProperty(R))for(xe in Qe[R]=[],Nn[R])Nn[R].hasOwnProperty(xe)&&Qe[R].push(xe);return Qe},m.addFont=function(R,xe,Qe,dt,kt){var Ut=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ut.indexOf(arguments[3])!==-1?kt=arguments[3]:arguments[3]&&Ut.indexOf(arguments[3])==-1&&(Qe=ge(Qe,dt)),kt=kt||"Identity-H",Zi.call(this,R,xe,Qe,kt)};var au,Mu=t.lineWidth||.200025,Nl=m.__private__.getLineWidth=m.getLineWidth=function(){return Mu},lu=m.__private__.setLineWidth=m.setLineWidth=function(R){return Mu=R,le(fe(N(R))+" w"),this};m.__private__.setLineDash=Dr.API.setLineDash=Dr.API.setLineDashPattern=function(R,xe){if(R=R||[],xe=xe||0,isNaN(xe)||!Array.isArray(R))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return R=R.map(function(Qe){return fe(N(Qe))}).join(" "),xe=fe(N(xe)),le("["+R+"] "+xe+" d"),this};var ku=m.__private__.getLineHeight=m.getLineHeight=function(){return $e*au};m.__private__.getLineHeight=m.getLineHeight=function(){return $e*au};var ti=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(R){return typeof(R=R||1.15)=="number"&&(au=R),this},ms=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return au};ti(t.lineHeight);var dr=m.__private__.getHorizontalCoordinate=function(R){return N(R)},vs=m.__private__.getVerticalCoordinate=function(R){return V===D.ADVANCED?R:ir[H].mediaBox.topRightY-ir[H].mediaBox.bottomLeftY-N(R)},Il=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(R){return fe(dr(R))},Wa=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(R){return fe(vs(R))},Xi=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return sn(Xi)},m.__private__.setStrokeColor=m.setDrawColor=function(R,xe,Qe,dt){return Xi=tn({ch1:R,ch2:xe,ch3:Qe,ch4:dt,pdfColorType:"draw",precision:2}),le(Xi),this};var Au=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return sn(Au)},m.__private__.setFillColor=m.setFillColor=function(R,xe,Qe,dt){return Au=tn({ch1:R,ch2:xe,ch3:Qe,ch4:dt,pdfColorType:"fill",precision:2}),le(Au),this};var Ma=t.textColor||"0 g",uu=m.__private__.getTextColor=m.getTextColor=function(){return sn(Ma)};m.__private__.setTextColor=m.setTextColor=function(R,xe,Qe,dt){return Ma=tn({ch1:R,ch2:xe,ch3:Qe,ch4:dt,pdfColorType:"text",precision:3}),this};var cu=t.charSpace,oa=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(cu||0)};m.__private__.setCharSpace=m.setCharSpace=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return cu=R,this};var hu=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(R){var xe=m.CapJoinStyles[R];if(xe===void 0)throw new Error("Line cap style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return hu=xe,le(xe+" J"),this};var Li=0;m.__private__.setLineJoin=m.setLineJoin=function(R){var xe=m.CapJoinStyles[R];if(xe===void 0)throw new Error("Line join style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Li=xe,le(xe+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(R){if(R=R||0,isNaN(R))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return le(fe(N(R))+" M"),this},m.GState=Kv,m.setGState=function(R){(R=typeof R=="string"?Dn[rr[R]]:kc(null,R)).equals(Zn)||(le("/"+R.id+" gs"),Zn=R)};var kc=function(R,xe){if(!R||!rr[R]){var Qe=!1;for(var dt in Dn)if(Dn.hasOwnProperty(dt)&&Dn[dt].equals(xe)){Qe=!0;break}if(Qe)xe=Dn[dt];else{var kt="GS"+(Object.keys(Dn).length+1).toString(10);Dn[kt]=xe,xe.id=kt}return R&&(rr[R]=xe.id),qr.publish("addGState",xe),xe}};m.addGState=function(R,xe){return kc(R,xe),this},m.saveGraphicsState=function(){return le("q"),Qn.push({key:at,size:$e,color:Ma}),this},m.restoreGraphicsState=function(){le("Q");var R=Qn.pop();return at=R.key,$e=R.size,Ma=R.color,Zn=null,this},m.setCurrentTransformationMatrix=function(R){return le(R.toString()+" cm"),this},m.comment=function(R){return le("#"+R),this};var $s=function(R,xe){var Qe=R||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Qe},set:function(Ut){isNaN(Ut)||(Qe=parseFloat(Ut))}});var dt=xe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return dt},set:function(Ut){isNaN(Ut)||(dt=parseFloat(Ut))}});var kt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return kt},set:function(Ut){kt=Ut.toString()}}),this},ma=function(R,xe,Qe,dt){$s.call(this,R,xe),this.type="rect";var kt=Qe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return kt},set:function(pn){isNaN(pn)||(kt=parseFloat(pn))}});var Ut=dt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ut},set:function(pn){isNaN(pn)||(Ut=parseFloat(pn))}}),this},du=function(){this.page=_r,this.currentPage=H,this.pages=Te.slice(0),this.pagesContext=ir.slice(0),this.x=Vt,this.y=Yt,this.matrix=In,this.width=Si(H),this.height=Ga(H),this.outputDestination=he,this.id="",this.objectNumber=-1};du.prototype.restore=function(){_r=this.page,H=this.currentPage,ir=this.pagesContext,Te=this.pages,Vt=this.x,Yt=this.y,In=this.matrix,Zo(H,this.width),ys(H,this.height),he=this.outputDestination};var va=function(R,xe,Qe,dt,kt){rt.push(new du),_r=H=0,Te=[],Vt=R,Yt=xe,In=kt,ps([Qe,dt])},Bl=function(R){if(ft[R])rt.pop().restore();else{var xe=new du,Qe="Xo"+(Object.keys(ls).length+1).toString(10);xe.id=Qe,ft[R]=Qe,ls[Qe]=xe,qr.publish("addFormObject",xe),rt.pop().restore()}};for(var Rl in m.beginFormObject=function(R,xe,Qe,dt,kt){return va(R,xe,Qe,dt,kt),this},m.endFormObject=function(R){return Bl(R),this},m.doFormObject=function(R,xe){var Qe=ls[ft[R]];return le("q"),le(xe.toString()+" cm"),le("/"+Qe.id+" Do"),le("Q"),this},m.getFormObject=function(R){var xe=ls[ft[R]];return{x:xe.x,y:xe.y,width:xe.width,height:xe.height,matrix:xe.matrix}},m.save=function(R,xe){return R=R||"generated.pdf",(xe=xe||{}).returnPromise=xe.returnPromise||!1,xe.returnPromise===!1?(ef(ia(Ns()),R),typeof ef.unload=="function"&&Br.setTimeout&&setTimeout(ef.unload,911),this):new Promise(function(Qe,dt){try{var kt=ef(ia(Ns()),R);typeof ef.unload=="function"&&Br.setTimeout&&setTimeout(ef.unload,911),Qe(kt)}catch(Ut){dt(Ut.message)}})},Dr.API)Dr.API.hasOwnProperty(Rl)&&(Rl==="events"&&Dr.API.events.length?function(R,xe){var Qe,dt,kt;for(kt=xe.length-1;kt!==-1;kt--)Qe=xe[kt][0],dt=xe[kt][1],R.subscribe.apply(R,[Qe].concat(typeof dt=="function"?[dt]:dt))}(qr,Dr.API.events):m[Rl]=Dr.API[Rl]);var Si=m.getPageWidth=function(R){return(ir[R=R||H].mediaBox.topRightX-ir[R].mediaBox.bottomLeftX)/it},Zo=m.setPageWidth=function(R,xe){ir[R].mediaBox.topRightX=xe*it+ir[R].mediaBox.bottomLeftX},Ga=m.getPageHeight=function(R){return(ir[R=R||H].mediaBox.topRightY-ir[R].mediaBox.bottomLeftY)/it},ys=m.setPageHeight=function(R,xe){ir[R].mediaBox.topRightY=xe*it+ir[R].mediaBox.bottomLeftY};return m.internal={pdfEscape:vr,getStyle:ml,getFont:Mc,getFontSize:Xe,getCharSpace:oa,getTextColor:uu,getLineHeight:ku,getLineHeightFactor:ms,getLineWidth:Nl,write:ze,getHorizontalCoordinate:dr,getVerticalCoordinate:vs,getCoordinateString:Il,getVerticalCoordinateString:Wa,collections:{},newObject:bt,newAdditionalObject:Jt,newObjectDeferred:Et,newObjectDeferredBegin:ln,getFilters:jn,putStream:zr,events:qr,scaleFactor:it,pageSize:{getWidth:function(){return Si(H)},setWidth:function(R){Zo(H,R)},getHeight:function(){return Ga(H)},setHeight:function(R){ys(H,R)}},encryptionOptions:d,encryption:xi,getEncryptor:sa,output:oi,getNumberOfPages:bn,pages:Te,out:le,f2:K,f3:B,getPageInfo:Do,getPageInfoByObjId:yr,getCurrentPageInfo:xr,getPDFVersion:E,Point:$s,Rectangle:ma,Matrix:wt,hasHotfix:Pa},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Si(H)},set:function(R){Zo(H,R)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Ga(H)},set:function(R){ys(H,R)},enumerable:!0,configurable:!0}),Xn.call(m,ve),at="F1",us(i,n),qr.publish("initialized"),m}ap.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},ap.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ap.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},ap.prototype.processOwnerPassword=function(t,e){return Db(Tb(e).substr(0,5),t)},ap.prototype.encryptor=function(t,e){var n=Tb(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Db(n,r)}},Kv.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||fs(t)!==fs(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},Dr.API={events:[]},Dr.version="2.5.2";var So=Dr.API,H_=1,Ef=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Kf=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Xr=function(t){return t.toFixed(2)},Qh=function(t){return t.toFixed(5)};So.__acroform__={};var su=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},C5=function(t){return t*H_},jc=function(t){var e=new QE,n=nr.internal.getHeight(t)||0,r=nr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Xr(r)),Number(Xr(n))],e},kH=So.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},AH=So.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},TH=So.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},$o=So.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return TH(t,e-1)},Vo=So.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return kH(t,e-1)},Uo=So.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return AH(t,e-1)},DH=So.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(Xr(l.lowerLeft_X)),Number(Xr(l.lowerLeft_Y)),Number(Xr(l.upperRight_X)),Number(Xr(l.upperRight_Y))]},OH=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=Ob(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Xr(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=jc(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},Ob=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(B){return B.split(`
`)}):i.map(function(B){return[B]});var s=n,o=nr.internal.getHeight(t)||0;o=o<0?-o:o;var a=nr.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(B,N,j){if(B+1<i.length){var z=N+" "+i[B+1][0];return S0(z,t,j).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,d,p=S0("3",t,s).height,v=t.multiline?o-s:(o-p)/2,m=v+=2,x=0,E=0,k=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+S0(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var A="",D=0,V=0;V<i.length;V++)if(i.hasOwnProperty(V)){var Y=!1;if(i[V].length!==1&&k!==i[V].length-1){if((p+2)*(D+2)+2>o)continue e;A+=i[V][k],Y=!0,E=V,V--}else{A=(A+=i[V][k]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var te=parseInt(V),ge=l(te,A,s),fe=V>=i.length-1;if(ge&&!fe){A+=" ",k=0;continue}if(ge||fe){if(fe)E=te;else if(t.multiline&&(p+2)*(D+2)+2>o)continue e}else{if(!t.multiline||(p+2)*(D+2)+2>o)continue e;E=te}}for(var I="",F=x;F<=E;F++){var K=i[F];if(t.multiline){if(F===E){I+=K[k]+" ",k=(k+1)%K.length;continue}if(F===x){I+=K[K.length-1]+" ";continue}}I+=K[0]+" "}switch(I=I.substr(I.length-1)==" "?I.substr(0,I.length-1):I,d=S0(I,t,s).width,t.textAlign){case"right":c=a-d-2;break;case"center":c=(a-d)/2;break;case"left":default:c=2}e+=Xr(c)+" "+Xr(m)+` Td
`,e+="("+Ef(I)+`) Tj
`,e+=-Xr(c)+` 0 Td
`,m=-(s+2),d=0,x=Y?E:E+1,D++,A=""}break}return r.text=e,r.fontSize=s,r},S0=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},NH={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},IH=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},BH=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),fs(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},RH=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Ec.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(NH)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");H_=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new eP,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&IH(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=DH(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=nr.createDefaultAppearanceStream(a),fs(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var d=OH(a);l.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(a.appearanceStreamContent){var p="";for(var v in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(v)){var m=a.appearanceStreamContent[v];if(p+="/"+v+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var x=m[o];typeof x=="function"&&(x=x.call(i,a)),p+="/"+o+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=m)=="function"&&(x=x.call(i,a)),p+="/"+o+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&BH(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},JE=So.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),fs(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Ef(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},a2=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Ef(r(t))+")"},Kc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Kc.prototype.toString=function(){return this.objId+" 0 R"},Kc.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Kc.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:JE(i,this.objId,this.scope)}):i instanceof Kc?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var QE=function(){Kc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};su(QE,Kc);var eP=function(){Kc.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Ef(n(t))+")"}},set:function(n){t=n}})};su(eP,Kc);var Ec=function t(){Kc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');e=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!$o(e,3)},set:function(A){A?this.F=Vo(e,3):this.F=Uo(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');n=A}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(A){r=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(A){r[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(A){r[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(A){r[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(A){r[3]=A}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Zv)return;s="FieldObject"+t.FieldNum++}var A=function(D){return D};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+Ef(A(s))+")"},set:function(A){s=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(A){s=A}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(A){o=A}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(A){a=A}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(A){l=A}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/H_:c},set:function(A){c=A}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(A){d=A}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Zv||this instanceof pf))return a2(p,this.objId,this.scope)},set:function(A){A=A.toString(),p=A}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof La?v:a2(v,this.objId,this.scope)},set:function(A){A=A.toString(),v=this instanceof La?A:A.substr(0,1)==="("?Kf(A.substr(1,A.length-2)):Kf(A)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof La?Kf(v.substr(1,v.length-1)):v},set:function(A){A=A.toString(),v=this instanceof La?"/"+A:A}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof La?m:a2(m,this.objId,this.scope)},set:function(A){A=A.toString(),m=this instanceof La?A:A.substr(0,1)==="("?Kf(A.substr(1,A.length-2)):Kf(A)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof La?Kf(m.substr(1,m.length-1)):m},set:function(A){A=A.toString(),m=this instanceof La?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(A){A=!!A,E=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(A){x=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!$o(this.Ff,1)},set:function(A){A?this.Ff=Vo(this.Ff,1):this.Ff=Uo(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!$o(this.Ff,2)},set:function(A){A?this.Ff=Vo(this.Ff,2):this.Ff=Uo(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!$o(this.Ff,3)},set:function(A){A?this.Ff=Vo(this.Ff,3):this.Ff=Uo(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');k=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(k){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:k=2;break;case"center":case 1:k=1;break;case"left":case 0:default:k=0}}})};su(Ec,Kc);var bp=function(){Ec.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return JE(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!$o(this.Ff,18)},set:function(n){n?this.Ff=Vo(this.Ff,18):this.Ff=Uo(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!$o(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Vo(this.Ff,19):this.Ff=Uo(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!$o(this.Ff,20)},set:function(n){n?(this.Ff=Vo(this.Ff,20),e.sort()):this.Ff=Uo(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!$o(this.Ff,22)},set:function(n){n?this.Ff=Vo(this.Ff,22):this.Ff=Uo(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$o(this.Ff,23)},set:function(n){n?this.Ff=Vo(this.Ff,23):this.Ff=Uo(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!$o(this.Ff,27)},set:function(n){n?this.Ff=Vo(this.Ff,27):this.Ff=Uo(this.Ff,27)}}),this.hasAppearanceStream=!1};su(bp,Ec);var _p=function(){bp.call(this),this.fontName="helvetica",this.combo=!1};su(_p,bp);var wp=function(){_p.call(this),this.combo=!0};su(wp,_p);var ov=function(){wp.call(this),this.edit=!0};su(ov,wp);var La=function(){Ec.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!$o(this.Ff,15)},set:function(n){n?this.Ff=Vo(this.Ff,15):this.Ff=Uo(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!$o(this.Ff,16)},set:function(n){n?this.Ff=Vo(this.Ff,16):this.Ff=Uo(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!$o(this.Ff,17)},set:function(n){n?this.Ff=Vo(this.Ff,17):this.Ff=Uo(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!$o(this.Ff,26)},set:function(n){n?this.Ff=Vo(this.Ff,26):this.Ff=Uo(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Ef(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){fs(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};su(La,Ec);var av=function(){La.call(this),this.pushButton=!0};su(av,La);var xp=function(){La.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};su(xp,La);var Zv=function(){var t,e;Ec.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Ef(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){fs(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=nr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};su(Zv,Ec),xp.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},xp.prototype.createOption=function(t){var e=new Zv;return e.Parent=this,e.optionName=t,this.Kids.push(e),FH.call(this.scope,e),e};var lv=function(){La.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=nr.CheckBox.createAppearanceStream()};su(lv,La);var pf=function(){Ec.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!$o(this.Ff,13)},set:function(e){e?this.Ff=Vo(this.Ff,13):this.Ff=Uo(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!$o(this.Ff,21)},set:function(e){e?this.Ff=Vo(this.Ff,21):this.Ff=Uo(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$o(this.Ff,23)},set:function(e){e?this.Ff=Vo(this.Ff,23):this.Ff=Uo(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!$o(this.Ff,24)},set:function(e){e?this.Ff=Vo(this.Ff,24):this.Ff=Uo(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!$o(this.Ff,25)},set:function(e){e?this.Ff=Vo(this.Ff,25):this.Ff=Uo(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!$o(this.Ff,26)},set:function(e){e?this.Ff=Vo(this.Ff,26):this.Ff=Uo(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};su(pf,Ec);var uv=function(){pf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!$o(this.Ff,14)},set:function(t){t?this.Ff=Vo(this.Ff,14):this.Ff=Uo(this.Ff,14)}}),this.password=!0};su(uv,pf);var nr={CheckBox:{createAppearanceStream:function(){return{N:{On:nr.CheckBox.YesNormal},D:{On:nr.CheckBox.YesPushDown,Off:nr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=Ob(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Xr(nr.internal.getWidth(t))+" "+Xr(nr.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Xr(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=jc(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=nr.internal.getHeight(t),o=nr.internal.getWidth(t),a=Ob(t,t.caption);return i.push("1 g"),i.push("0 0 "+Xr(o)+" "+Xr(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Xr(o-1)+" "+Xr(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Xr(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Xr(nr.internal.getWidth(t))+" "+Xr(nr.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:nr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=nr.RadioButton.Circle.YesNormal,e.D[t]=nr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=nr.internal.getWidth(t)<=nr.internal.getHeight(t)?nr.internal.getWidth(t)/4:nr.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=nr.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Qh(nr.internal.getWidth(t)/2)+" "+Qh(nr.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=nr.internal.getWidth(t)<=nr.internal.getHeight(t)?nr.internal.getWidth(t)/4:nr.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*nr.internal.Bezier_C).toFixed(5)),o=Number((r*nr.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Qh(nr.internal.getWidth(t)/2)+" "+Qh(nr.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Qh(nr.internal.getWidth(t)/2)+" "+Qh(nr.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=nr.internal.getWidth(t)<=nr.internal.getHeight(t)?nr.internal.getWidth(t)/4:nr.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*nr.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Qh(nr.internal.getWidth(t)/2)+" "+Qh(nr.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:nr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=nr.RadioButton.Cross.YesNormal,e.D[t]=nr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=nr.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Xr(nr.internal.getWidth(t)-2)+" "+Xr(nr.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Xr(r.x1.x)+" "+Xr(r.x1.y)+" m"),n.push(Xr(r.x2.x)+" "+Xr(r.x2.y)+" l"),n.push(Xr(r.x4.x)+" "+Xr(r.x4.y)+" m"),n.push(Xr(r.x3.x)+" "+Xr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=nr.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Xr(nr.internal.getWidth(t))+" "+Xr(nr.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Xr(nr.internal.getWidth(t)-2)+" "+Xr(nr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Xr(n.x1.x)+" "+Xr(n.x1.y)+" m"),r.push(Xr(n.x2.x)+" "+Xr(n.x2.y)+" l"),r.push(Xr(n.x4.x)+" "+Xr(n.x4.y)+" m"),r.push(Xr(n.x3.x)+" "+Xr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Xr(nr.internal.getWidth(t))+" "+Xr(nr.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};nr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=nr.internal.getWidth(t),n=nr.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},nr.internal.getWidth=function(t){var e=0;return fs(t)==="object"&&(e=C5(t.Rect[2])),e},nr.internal.getHeight=function(t){var e=0;return fs(t)==="object"&&(e=C5(t.Rect[3])),e};var FH=So.addField=function(t){if(RH(this,t),!(t instanceof Ec))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};So.AcroFormChoiceField=bp,So.AcroFormListBox=_p,So.AcroFormComboBox=wp,So.AcroFormEditBox=ov,So.AcroFormButton=La,So.AcroFormPushButton=av,So.AcroFormRadioButton=xp,So.AcroFormCheckBox=lv,So.AcroFormTextField=pf,So.AcroFormPasswordField=uv,So.AcroFormAppearance=nr,So.AcroForm={ChoiceField:bp,ListBox:_p,ComboBox:wp,EditBox:ov,Button:La,PushButton:av,RadioButton:xp,CheckBox:lv,TextField:pf,PasswordField:uv,Appearance:nr},Dr.AcroForm={ChoiceField:bp,ListBox:_p,ComboBox:wp,EditBox:ov,Button:La,PushButton:av,RadioButton:xp,CheckBox:lv,TextField:pf,PasswordField:uv,Appearance:nr};Dr.AcroForm;function tP(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(B,N){var j,z,U,$,re,Q=e;if((N=N||e)==="RGBA"||B.data!==void 0&&B.data instanceof Uint8ClampedArray&&"height"in B&&"width"in B)return"RGBA";if(ge(B))for(re in n)for(U=n[re],j=0;j<U.length;j+=1){for($=!0,z=0;z<U[j].length;z+=1)if(U[j][z]!==void 0&&U[j][z]!==B[z]){$=!1;break}if($===!0){Q=re;break}}else for(re in n)for(U=n[re],j=0;j<U.length;j+=1){for($=!0,z=0;z<U[j].length;z+=1)if(U[j][z]!==void 0&&U[j][z]!==B.charCodeAt(z)){$=!1;break}if($===!0){Q=re;break}}return Q===e&&N!==e&&(Q=N),Q},i=function B(N){for(var j=this.internal.write,z=this.internal.putStream,U=(0,this.internal.getFilters)();U.indexOf("FlateEncode")!==-1;)U.splice(U.indexOf("FlateEncode"),1);N.objectId=this.internal.newObject();var $=[];if($.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Image"}),$.push({key:"Width",value:N.width}),$.push({key:"Height",value:N.height}),N.colorSpace===k.INDEXED?$.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(N.palette.length/3-1)+" "+("sMask"in N&&N.sMask!==void 0?N.objectId+2:N.objectId+1)+" 0 R]"}):($.push({key:"ColorSpace",value:"/"+N.colorSpace}),N.colorSpace===k.DEVICE_CMYK&&$.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),$.push({key:"BitsPerComponent",value:N.bitsPerComponent}),"decodeParameters"in N&&N.decodeParameters!==void 0&&$.push({key:"DecodeParms",value:"<<"+N.decodeParameters+">>"}),"transparency"in N&&Array.isArray(N.transparency)){for(var re="",Q=0,_e=N.transparency.length;Q<_e;Q++)re+=N.transparency[Q]+" "+N.transparency[Q]+" ";$.push({key:"Mask",value:"["+re+"]"})}N.sMask!==void 0&&$.push({key:"SMask",value:N.objectId+1+" 0 R"});var we=N.filter!==void 0?["/"+N.filter]:void 0;if(z({data:N.data,additionalKeyValues:$,alreadyAppliedFilters:we,objectId:N.objectId}),j("endobj"),"sMask"in N&&N.sMask!==void 0){var nt="/Predictor "+N.predictor+" /Colors 1 /BitsPerComponent "+N.bitsPerComponent+" /Columns "+N.width,ae={width:N.width,height:N.height,colorSpace:"DeviceGray",bitsPerComponent:N.bitsPerComponent,decodeParameters:nt,data:N.sMask};"filter"in N&&(ae.filter=N.filter),B.call(this,ae)}if(N.colorSpace===k.INDEXED){var H=this.internal.newObject();z({data:I(new Uint8Array(N.palette)),objectId:H}),j("endobj")}},s=function(){var B=this.internal.collections.addImage_images;for(var N in B)i.call(this,B[N])},o=function(){var B,N=this.internal.collections.addImage_images,j=this.internal.write;for(var z in N)j("/I"+(B=N[z]).index,B.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var B=this.internal.collections.addImage_images;return a.call(this),B},c=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(B){return typeof t["process"+B.toUpperCase()]=="function"},p=function(B){return fs(B)==="object"&&B.nodeType===1},v=function(B,N){if(B.nodeName==="IMG"&&B.hasAttribute("src")){var j=""+B.getAttribute("src");if(j.indexOf("data:image/")===0)return Gg(unescape(j).split("base64,").pop());var z=t.loadFile(j,!0);if(z!==void 0)return z}if(B.nodeName==="CANVAS"){if(B.width===0||B.height===0)throw new Error("Given canvas must have data. Canvas width: "+B.width+", height: "+B.height);var U;switch(N){case"PNG":U="image/png";break;case"WEBP":U="image/webp";break;case"JPEG":case"JPG":default:U="image/jpeg"}return Gg(B.toDataURL(U,1).split("base64,").pop())}},m=function(B){var N=this.internal.collections.addImage_images;if(N){for(var j in N)if(B===N[j].alias)return N[j]}},x=function(B,N,j){return B||N||(B=-96,N=-96),B<0&&(B=-1*j.width*72/B/this.internal.scaleFactor),N<0&&(N=-1*j.height*72/N/this.internal.scaleFactor),B===0&&(B=N*j.width/j.height),N===0&&(N=B*j.height/j.width),[B,N]},E=function(B,N,j,z,U,$){var re=x.call(this,j,z,U),Q=this.internal.getCoordinateString,_e=this.internal.getVerticalCoordinateString,we=l.call(this);if(j=re[0],z=re[1],we[U.index]=U,$){$*=Math.PI/180;var nt=Math.cos($),ae=Math.sin($),H=function(me){return me.toFixed(4)},Z=[H(nt),H(ae),H(-1*ae),H(nt),0,0,"cm"]}this.internal.write("q"),$?(this.internal.write([1,"0","0",1,Q(B),_e(N+z),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([Q(j),"0","0",Q(z),"0","0","cm"].join(" "))):this.internal.write([Q(j),"0","0",Q(z),Q(B),_e(N+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+U.index+" Do"),this.internal.write("Q")},k=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var A=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=t.__addimage__.sHashCode=function(B){var N,j,z=0;if(typeof B=="string")for(j=B.length,N=0;N<j;N++)z=(z<<5)-z+B.charCodeAt(N),z|=0;else if(ge(B))for(j=B.byteLength/2,N=0;N<j;N++)z=(z<<5)-z+B[N],z|=0;return z},V=t.__addimage__.validateStringAsBase64=function(B){(B=B||"").toString().trim();var N=!0;return B.length===0&&(N=!1),B.length%4!=0&&(N=!1),/^[A-Za-z0-9+/]+$/.test(B.substr(0,B.length-2))===!1&&(N=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(B.substr(-2))===!1&&(N=!1),N},Y=t.__addimage__.extractImageFromDataUrl=function(B){var N=(B=B||"").split("base64,"),j=null;if(N.length===2){var z=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(N[0]);Array.isArray(z)&&(j={mimeType:z[1],charset:z[2],data:N[1]})}return j},te=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(B){return te()&&B instanceof ArrayBuffer};var ge=t.__addimage__.isArrayBufferView=function(B){return te()&&typeof Uint32Array<"u"&&(B instanceof Int8Array||B instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&B instanceof Uint8ClampedArray||B instanceof Int16Array||B instanceof Uint16Array||B instanceof Int32Array||B instanceof Uint32Array||B instanceof Float32Array||B instanceof Float64Array)},fe=t.__addimage__.binaryStringToUint8Array=function(B){for(var N=B.length,j=new Uint8Array(N),z=0;z<N;z++)j[z]=B.charCodeAt(z);return j},I=t.__addimage__.arrayBufferToBinaryString=function(B){for(var N="",j=ge(B)?B:new Uint8Array(B),z=0;z<j.length;z+=8192)N+=String.fromCharCode.apply(null,j.subarray(z,z+8192));return N};t.addImage=function(){var B,N,j,z,U,$,re,Q,_e;if(typeof arguments[1]=="number"?(N=e,j=arguments[1],z=arguments[2],U=arguments[3],$=arguments[4],re=arguments[5],Q=arguments[6],_e=arguments[7]):(N=arguments[1],j=arguments[2],z=arguments[3],U=arguments[4],$=arguments[5],re=arguments[6],Q=arguments[7],_e=arguments[8]),fs(B=arguments[0])==="object"&&!p(B)&&"imageData"in B){var we=B;B=we.imageData,N=we.format||N||e,j=we.x||j||0,z=we.y||z||0,U=we.w||we.width||U,$=we.h||we.height||$,re=we.alias||re,Q=we.compression||Q,_e=we.rotation||we.angle||_e}var nt=this.internal.getFilters();if(Q===void 0&&nt.indexOf("FlateEncode")!==-1&&(Q="SLOW"),isNaN(j)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var ae=F.call(this,B,N,re,Q);return E.call(this,j,z,U,$,ae,_e),this};var F=function(B,N,j,z){var U,$,re;if(typeof B=="string"&&r(B)===e){B=unescape(B);var Q=K(B,!1);(Q!==""||(Q=t.loadFile(B,!0))!==void 0)&&(B=Q)}if(p(B)&&(B=v(B,N)),N=r(B,N),!d(N))throw new Error("addImage does not support files of type '"+N+"', please ensure that a plugin for '"+N+"' support is added.");if(((re=j)==null||re.length===0)&&(j=function(_e){return typeof _e=="string"||ge(_e)?D(_e):ge(_e.data)?D(_e.data):null}(B)),(U=m.call(this,j))||(te()&&(B instanceof Uint8Array||N==="RGBA"||($=B,B=fe(B))),U=this["process"+N.toUpperCase()](B,c.call(this),j,function(_e){return _e&&typeof _e=="string"&&(_e=_e.toUpperCase()),_e in t.image_compression?_e:A.NONE}(z),$)),!U)throw new Error("An unknown error occurred whilst processing the image.");return U},K=t.__addimage__.convertBase64ToBinaryString=function(B,N){var j;N=typeof N!="boolean"||N;var z,U="";if(typeof B=="string"){z=(j=Y(B))!==null?j.data:B;try{U=Gg(z)}catch($){if(N)throw V(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+$.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return U};t.getImageProperties=function(B){var N,j,z="";if(p(B)&&(B=v(B)),typeof B=="string"&&r(B)===e&&((z=K(B,!1))===""&&(z=t.loadFile(B)||""),B=z),j=r(B),!d(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(!te()||B instanceof Uint8Array||(B=fe(B)),!(N=this["process"+j.toUpperCase()](B)))throw new Error("An unknown error occurred whilst processing the image");return N.fileType=j,N}})(Dr.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Dr.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,d=!1,p=0;p<c.length&&!d;p++)switch((r=c[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var v=0;v<c.length;v++){r=c[v];var m=this.internal.pdfEscape,x=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(E.objId),D=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+m(A(r.contents))+")",s+=" /Popup "+k.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+m(A(D))+") >>",E.content=s;var V=E.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+V,r.open&&(s+=" /Open true"),s+=" >>",k.content=s,this.internal.write(E.objId,"0 R",k.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var Y=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(x(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Y+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var te=this.annotations._nameMap[r.options.name];r.options.pageNumber=te.page,r.options.top=te.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(x(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ge=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+ge+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var d=this.splitTextToSize(n,a).length;o=Math.ceil(c*d)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Dr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(E){return e[E.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},a=t.__arabicParser__.isArabicEndLetter=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(E){return o(E)&&i.indexOf(E.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(E){var k=0,A=n,D="",V=0;for(k=0;k<E.length;k+=1)A[E.charCodeAt(k)]!==void 0?(V++,typeof(A=A[E.charCodeAt(k)])=="number"&&(D+=String.fromCharCode(A),A=n,V=0),k===E.length-1&&(A=n,D+=E.charAt(k-(V-1)),k-=V-1,V=0)):(A=n,D+=E.charAt(k-V),k-=V,V=0);return D};t.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&r[E.charCodeAt(0)]!==void 0};var v=t.__arabicParser__.getCorrectForm=function(E,k,A){return o(E)?s(E)===!1?-1:!c(E)||!o(k)&&!o(A)||!o(A)&&a(k)||a(E)&&!o(k)||a(E)&&l(k)||a(E)&&a(k)?0:d(E)&&o(k)&&!a(k)&&o(A)&&c(A)?3:a(E)||!o(A)?1:2:-1},m=function(E){var k=0,A=0,D=0,V="",Y="",te="",ge=(E=E||"").split("\\s+"),fe=[];for(k=0;k<ge.length;k+=1){for(fe.push(""),A=0;A<ge[k].length;A+=1)V=ge[k][A],Y=ge[k][A-1],te=ge[k][A+1],o(V)?(D=v(V,Y,te),fe[k]+=D!==-1?String.fromCharCode(e[V.charCodeAt(0)][D]):V):fe[k]+=V;fe[k]=p(fe[k])}return fe.join(" ")},x=t.__arabicParser__.processArabic=t.processArabic=function(){var E,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(k)){var D=0;for(A=[],D=0;D<k.length;D+=1)Array.isArray(k[D])?A.push([m(k[D][0]),k[D][1],k[D][2]]):A.push([m(k[D])]);E=A}else E=m(k);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};t.events.push(["preProcessText",x])}(Dr.API),Dr.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Dr.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(E){l=E}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(E){c=E}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(E){d=E}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(E){p=E}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(E){v=E}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(E){m=E}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(E){x=E}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),v=c.scaleFactor||this.internal.scaleFactor,m=0,x=0,E=0,k=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var A=c.maxWidth;A>0?typeof l=="string"?l=this.splitTextToSize(l,A):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(V,Y){return V.concat(k.splitTextToSize(Y,A))},[])):l=Array.isArray(l)?l:[l];for(var D=0;D<l.length;D++)m<(E=this.getStringUnitWidth(l[D],{font:p})*d)&&(m=E);return m!==0&&(x=l.length),{w:m/=v,h:Math.max((x*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/v,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,m&&v&&(this.printHeaderRow(l.lineNumber,!0),l.y+=v[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,d,p,v){if(r.call(this),!d)throw new Error("No data for PDF table.");var m,x,E,k,A=[],D=[],V=[],Y={},te={},ge=[],fe=[],I=(v=v||{}).autoSize||!1,F=v.printHeaders!==!1,K=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,B=v.margins||Object.assign({width:this.getPageWidth()},e),N=typeof v.padding=="number"?v.padding:3,j=v.headerBackgroundColor||"#c8c8c8",z=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=F,this.internal.__cell__.margins=B,this.internal.__cell__.table_font_size=K,this.internal.__cell__.padding=N,this.internal.__cell__.headerBackgroundColor=j,this.internal.__cell__.headerTextColor=z,this.setFontSize(K),p==null)D=A=Object.keys(d[0]),V=A.map(function(){return"left"});else if(Array.isArray(p)&&fs(p[0])==="object")for(A=p.map(function(we){return we.name}),D=p.map(function(we){return we.prompt||we.name||""}),V=p.map(function(we){return we.align||"left"}),m=0;m<p.length;m+=1)te[p[m].name]=p[m].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(D=A=p,V=A.map(function(){return"left"}));if(I||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<A.length;m+=1){for(Y[k=A[m]]=d.map(function(we){return we[k]}),this.setFont(void 0,"bold"),ge.push(this.getTextDimensions(D[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=Y[k],this.setFont(void 0,"normal"),E=0;E<x.length;E+=1)ge.push(this.getTextDimensions(x[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);te[k]=Math.max.apply(null,ge)+N+N,ge=[]}if(F){var U={};for(m=0;m<A.length;m+=1)U[A[m]]={},U[A[m]].text=D[m],U[A[m]].align=V[m];var $=a.call(this,U,te);fe=A.map(function(we){return new s(l,c,te[we],$,U[we].text,void 0,U[we].align)}),this.setTableHeaderRow(fe),this.printHeaderRow(1,!1)}var re=p.reduce(function(we,nt){return we[nt.name]=nt.align,we},{});for(m=0;m<d.length;m+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:m,data:d[m]},this);var Q=a.call(this,d[m],te);for(E=0;E<A.length;E+=1){var _e=d[m][A[E]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:m,col:E,data:_e},this),o.call(this,new s(l,c,te[A[E]],Q,_e,m+2,re[A[E]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(l).map(function(m){var x=l[m];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,c[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/v+d+d},this).reduce(function(m,x){return Math.max(m,x)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,v.push(d)),d.lineNumber=l;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(x)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),n=!1}}(Dr.API);var nP={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},rP=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Nb=tP(rP),iP=[100,200,300,400,500,600,700,800,900],jH=tP(iP);function Ib(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return nP[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof Nb[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function E5(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var zH={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},P5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function M5(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function $H(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},zH,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=Ib(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+M5(s)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var d=Nb[l],p=d<=Nb.normal?-1:1,v=E5(c,rP,d,p);if(!v)throw new Error("Could not find a matching font-stretch value for "+l);return v}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var d=nP[l],p=0;p<d.length;++p)if(c[d[p]])return c[d[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var d=jH[l],p=E5(c,iP,d,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+M5(s)+"'.");return o}function k5(t){return t.trimLeft()}function VH(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function UH(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var C0,A5,T5,l2=["times"];(function(t){var e,n,r,i,s,o,a,l,c,d=function(ae){return ae=ae||{},this.isStrokeTransparent=ae.isStrokeTransparent||!1,this.strokeOpacity=ae.strokeOpacity||1,this.strokeStyle=ae.strokeStyle||"#000000",this.fillStyle=ae.fillStyle||"#000000",this.isFillTransparent=ae.isFillTransparent||!1,this.fillOpacity=ae.fillOpacity||1,this.font=ae.font||"10px sans-serif",this.textBaseline=ae.textBaseline||"alphabetic",this.textAlign=ae.textAlign||"left",this.lineWidth=ae.lineWidth||1,this.lineJoin=ae.lineJoin||"miter",this.lineCap=ae.lineCap||"butt",this.path=ae.path||[],this.transform=ae.transform!==void 0?ae.transform.clone():new l,this.globalCompositeOperation=ae.globalCompositeOperation||"normal",this.globalAlpha=ae.globalAlpha||1,this.clip_path=ae.clip_path||[],this.currentPoint=ae.currentPoint||new o,this.miterLimit=ae.miterLimit||10,this.lastPoint=ae.lastPoint||new o,this.lineDashOffset=ae.lineDashOffset||0,this.lineDash=ae.lineDash||[],this.margin=ae.margin||[0,0,0,0],this.prevPageLastElemOffset=ae.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ae.ignoreClearRect!="boolean"||ae.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var p=function(ae){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=ae;Object.defineProperty(this,"pdf",{get:function(){return H}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(se){Z=!!se}});var me=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return me},set:function(se){me=!!se}});var pe=0;Object.defineProperty(this,"posX",{get:function(){return pe},set:function(se){isNaN(se)||(pe=se)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(se){isNaN(se)||(de=se)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(se){var le;typeof se=="number"?le=[se,se,se,se]:((le=new Array(4))[0]=se[0],le[1]=se.length>=2?se[1]:le[0],le[2]=se.length>=3?se[2]:le[0],le[3]=se.length>=4?se[3]:le[1]),c.margin=le}});var X=!1;Object.defineProperty(this,"autoPaging",{get:function(){return X},set:function(se){X=se}});var J=0;Object.defineProperty(this,"lastBreak",{get:function(){return J},set:function(se){J=se}});var De=[];Object.defineProperty(this,"pageBreaks",{get:function(){return De},set:function(se){De=se}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(se){se instanceof d&&(c=se)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(se){c.path=se}});var Te=[];Object.defineProperty(this,"ctxStack",{get:function(){return Te},set:function(se){Te=se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(se){var le;le=v(se),this.ctx.fillStyle=le.style,this.ctx.isFillTransparent=le.a===0,this.ctx.fillOpacity=le.a,this.pdf.setFillColor(le.r,le.g,le.b,{a:le.a}),this.pdf.setTextColor(le.r,le.g,le.b,{a:le.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(se){var le=v(se);this.ctx.strokeStyle=le.style,this.ctx.isStrokeTransparent=le.a===0,this.ctx.strokeOpacity=le.a,le.a===0?this.pdf.setDrawColor(255,255,255):(le.a,this.pdf.setDrawColor(le.r,le.g,le.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(se){["butt","round","square"].indexOf(se)!==-1&&(this.ctx.lineCap=se,this.pdf.setLineCap(se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(se){isNaN(se)||(this.ctx.lineWidth=se,this.pdf.setLineWidth(se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(se){["bevel","round","miter"].indexOf(se)!==-1&&(this.ctx.lineJoin=se,this.pdf.setLineJoin(se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(se){isNaN(se)||(this.ctx.miterLimit=se,this.pdf.setMiterLimit(se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(se){this.ctx.textBaseline=se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(se){["right","end","center","left","start"].indexOf(se)!==-1&&(this.ctx.textAlign=se)}});var Je=null;function he(se,le){if(Je===null){var ze=function(Se){var ve=[];return Object.keys(Se).forEach(function($e){Se[$e].forEach(function(Ge){var Xe=null;switch(Ge){case"bold":Xe={family:$e,weight:"bold"};break;case"italic":Xe={family:$e,style:"italic"};break;case"bolditalic":Xe={family:$e,weight:"bold",style:"italic"};break;case"":case"normal":Xe={family:$e}}Xe!==null&&(Xe.ref={name:$e,style:Ge},ve.push(Xe))})}),ve}(se.getFontList());Je=function(Se){for(var ve={},$e=0;$e<Se.length;++$e){var Ge=Ib(Se[$e]),Xe=Ge.family,lt=Ge.stretch,qe=Ge.style,Lt=Ge.weight;ve[Xe]=ve[Xe]||{},ve[Xe][lt]=ve[Xe][lt]||{},ve[Xe][lt][qe]=ve[Xe][lt][qe]||{},ve[Xe][lt][qe][Lt]=Ge}return ve}(ze.concat(le))}return Je}var ee=null;Object.defineProperty(this,"fontFaces",{get:function(){return ee},set:function(se){Je=null,ee=se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(se){var le;if(this.ctx.font=se,(le=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(se))!==null){var ze=le[1],Se=(le[2],le[3]),ve=le[4],$e=(le[5],le[6]),Ge=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ve)[2];ve=Math.floor(Ge==="px"?parseFloat(ve)*this.pdf.internal.scaleFactor:Ge==="em"?parseFloat(ve)*this.pdf.getFontSize():parseFloat(ve)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ve);var Xe=function(Ye){var at,it,Vt=[],Yt=Ye.trim();if(Yt==="")return l2;if(Yt in P5)return[P5[Yt]];for(;Yt!=="";){switch(it=null,at=(Yt=k5(Yt)).charAt(0)){case'"':case"'":it=VH(Yt.substring(1),at);break;default:it=UH(Yt)}if(it===null||(Vt.push(it[0]),(Yt=k5(it[1]))!==""&&Yt.charAt(0)!==","))return l2;Yt=Yt.replace(/^,/,"")}return Vt}($e);if(this.fontFaces){var lt=$H(he(this.pdf,this.fontFaces),Xe.map(function(Ye){return{family:Ye,stretch:"normal",weight:Se,style:ze}}));this.pdf.setFont(lt.ref.name,lt.ref.style)}else{var qe="";(Se==="bold"||parseInt(Se,10)>=700||ze==="bold")&&(qe="bold"),ze==="italic"&&(qe+="italic"),qe.length===0&&(qe="normal");for(var Lt="",Gt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},rn=0;rn<Xe.length;rn++){if(this.pdf.internal.getFont(Xe[rn],qe,{noFallback:!0,disableWarning:!0})!==void 0){Lt=Xe[rn];break}if(qe==="bolditalic"&&this.pdf.internal.getFont(Xe[rn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Lt=Xe[rn],qe="bold";else if(this.pdf.internal.getFont(Xe[rn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Lt=Xe[rn],qe="normal";break}}if(Lt===""){for(var yn=0;yn<Xe.length;yn++)if(Gt[Xe[yn]]){Lt=Gt[Xe[yn]];break}}Lt=Lt===""?"Times":Lt,this.pdf.setFont(Lt,qe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(se){this.ctx.globalCompositeOperation=se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(se){this.ctx.globalAlpha=se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(se){this.ctx.lineDashOffset=se,nt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(se){this.ctx.lineDash=se,nt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(se){this.ctx.ignoreClearRect=!!se}})};p.prototype.setLineDash=function(ae){this.lineDash=ae},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){Y.call(this,"fill",!1)},p.prototype.stroke=function(){Y.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(ae,H){if(isNaN(ae)||isNaN(H))throw xs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new o(ae,H));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new o(ae,H)},p.prototype.closePath=function(){var ae=new o(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&fs(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){ae=new o(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(ae.x,ae.y)},p.prototype.lineTo=function(ae,H){if(isNaN(ae)||isNaN(H))throw xs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new o(ae,H));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new o(Z.x,Z.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Y.call(this,null,!0)},p.prototype.quadraticCurveTo=function(ae,H,Z,me){if(isNaN(Z)||isNaN(me)||isNaN(ae)||isNaN(H))throw xs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var pe=this.ctx.transform.applyToPoint(new o(Z,me)),de=this.ctx.transform.applyToPoint(new o(ae,H));this.path.push({type:"qct",x1:de.x,y1:de.y,x:pe.x,y:pe.y}),this.ctx.lastPoint=new o(pe.x,pe.y)},p.prototype.bezierCurveTo=function(ae,H,Z,me,pe,de){if(isNaN(pe)||isNaN(de)||isNaN(ae)||isNaN(H)||isNaN(Z)||isNaN(me))throw xs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var X=this.ctx.transform.applyToPoint(new o(pe,de)),J=this.ctx.transform.applyToPoint(new o(ae,H)),De=this.ctx.transform.applyToPoint(new o(Z,me));this.path.push({type:"bct",x1:J.x,y1:J.y,x2:De.x,y2:De.y,x:X.x,y:X.y}),this.ctx.lastPoint=new o(X.x,X.y)},p.prototype.arc=function(ae,H,Z,me,pe,de){if(isNaN(ae)||isNaN(H)||isNaN(Z)||isNaN(me)||isNaN(pe))throw xs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var X=this.ctx.transform.applyToPoint(new o(ae,H));ae=X.x,H=X.y;var J=this.ctx.transform.applyToPoint(new o(0,Z)),De=this.ctx.transform.applyToPoint(new o(0,0));Z=Math.sqrt(Math.pow(J.x-De.x,2)+Math.pow(J.y-De.y,2))}Math.abs(pe-me)>=2*Math.PI&&(me=0,pe=2*Math.PI),this.path.push({type:"arc",x:ae,y:H,radius:Z,startAngle:me,endAngle:pe,counterclockwise:de})},p.prototype.arcTo=function(ae,H,Z,me,pe){throw new Error("arcTo not implemented.")},p.prototype.rect=function(ae,H,Z,me){if(isNaN(ae)||isNaN(H)||isNaN(Z)||isNaN(me))throw xs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ae,H),this.lineTo(ae+Z,H),this.lineTo(ae+Z,H+me),this.lineTo(ae,H+me),this.lineTo(ae,H),this.lineTo(ae+Z,H),this.lineTo(ae,H)},p.prototype.fillRect=function(ae,H,Z,me){if(isNaN(ae)||isNaN(H)||isNaN(Z)||isNaN(me))throw xs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var pe={};this.lineCap!=="butt"&&(pe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(pe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ae,H,Z,me),this.fill(),pe.hasOwnProperty("lineCap")&&(this.lineCap=pe.lineCap),pe.hasOwnProperty("lineJoin")&&(this.lineJoin=pe.lineJoin)}},p.prototype.strokeRect=function(ae,H,Z,me){if(isNaN(ae)||isNaN(H)||isNaN(Z)||isNaN(me))throw xs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(ae,H,Z,me),this.stroke())},p.prototype.clearRect=function(ae,H,Z,me){if(isNaN(ae)||isNaN(H)||isNaN(Z)||isNaN(me))throw xs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ae,H,Z,me))},p.prototype.save=function(ae){ae=typeof ae!="boolean"||ae;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),ae){this.ctx.fontSize=this.pdf.internal.getFontSize();var me=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=me}},p.prototype.restore=function(ae){ae=typeof ae!="boolean"||ae;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(H),ae&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(ae){var H,Z,me,pe;if(ae.isCanvasGradient===!0&&(ae=ae.getColor()),!ae)return{r:0,g:0,b:0,a:0,style:ae};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ae))H=0,Z=0,me=0,pe=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ae);if(de!==null)H=parseInt(de[1]),Z=parseInt(de[2]),me=parseInt(de[3]),pe=1;else if((de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ae))!==null)H=parseInt(de[1]),Z=parseInt(de[2]),me=parseInt(de[3]),pe=parseFloat(de[4]);else{if(pe=1,typeof ae=="string"&&ae.charAt(0)!=="#"){var X=new KE(ae);ae=X.ok?X.toHex():"#000000"}ae.length===4?(H=ae.substring(1,2),H+=H,Z=ae.substring(2,3),Z+=Z,me=ae.substring(3,4),me+=me):(H=ae.substring(1,3),Z=ae.substring(3,5),me=ae.substring(5,7)),H=parseInt(H,16),Z=parseInt(Z,16),me=parseInt(me,16)}}return{r:H,g:Z,b:me,a:pe,style:ae}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(ae,H,Z,me){if(isNaN(H)||isNaN(Z)||typeof ae!="string")throw xs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(me=isNaN(me)?void 0:me,!m.call(this)){var pe=Q(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;N.call(this,{text:ae,x:H,y:Z,scale:de,angle:pe,align:this.textAlign,maxWidth:me})}},p.prototype.strokeText=function(ae,H,Z,me){if(isNaN(H)||isNaN(Z)||typeof ae!="string")throw xs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){me=isNaN(me)?void 0:me;var pe=Q(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;N.call(this,{text:ae,x:H,y:Z,scale:de,renderingMode:"stroke",angle:pe,align:this.textAlign,maxWidth:me})}},p.prototype.measureText=function(ae){if(typeof ae!="string")throw xs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,Z=this.pdf.internal.scaleFactor,me=H.internal.getFontSize(),pe=H.getStringUnitWidth(ae)*me/H.internal.scaleFactor,de=function(X){var J=(X=X||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return J}}),this};return new de({width:pe*=Math.round(96*Z/72*1e4)/1e4})},p.prototype.scale=function(ae,H){if(isNaN(ae)||isNaN(H))throw xs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new l(ae,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},p.prototype.rotate=function(ae){if(isNaN(ae))throw xs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new l(Math.cos(ae),Math.sin(ae),-Math.sin(ae),Math.cos(ae),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},p.prototype.translate=function(ae,H){if(isNaN(ae)||isNaN(H))throw xs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new l(1,0,0,1,ae,H);this.ctx.transform=this.ctx.transform.multiply(Z)},p.prototype.transform=function(ae,H,Z,me,pe,de){if(isNaN(ae)||isNaN(H)||isNaN(Z)||isNaN(me)||isNaN(pe)||isNaN(de))throw xs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var X=new l(ae,H,Z,me,pe,de);this.ctx.transform=this.ctx.transform.multiply(X)},p.prototype.setTransform=function(ae,H,Z,me,pe,de){ae=isNaN(ae)?1:ae,H=isNaN(H)?0:H,Z=isNaN(Z)?0:Z,me=isNaN(me)?1:me,pe=isNaN(pe)?0:pe,de=isNaN(de)?0:de,this.ctx.transform=new l(ae,H,Z,me,pe,de)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(ae,H,Z,me,pe,de,X,J,De){var Te=this.pdf.getImageProperties(ae),Je=1,he=1,ee=1,se=1;me!==void 0&&J!==void 0&&(ee=J/me,se=De/pe,Je=Te.width/me*J/me,he=Te.height/pe*De/pe),de===void 0&&(de=H,X=Z,H=0,Z=0),me!==void 0&&J===void 0&&(J=me,De=pe),me===void 0&&J===void 0&&(J=Te.width,De=Te.height);for(var le,ze=this.ctx.transform.decompose(),Se=Q(ze.rotate.shx),ve=new l,$e=(ve=(ve=(ve=ve.multiply(ze.translate)).multiply(ze.skew)).multiply(ze.scale)).applyToRectangle(new a(de-H*ee,X-Z*se,me*Je,pe*he)),Ge=k.call(this,$e),Xe=[],lt=0;lt<Ge.length;lt+=1)Xe.indexOf(Ge[lt])===-1&&Xe.push(Ge[lt]);if(V(Xe),this.autoPaging)for(var qe=Xe[0],Lt=Xe[Xe.length-1],Gt=qe;Gt<Lt+1;Gt++){this.pdf.setPage(Gt);var rn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yn=Gt===1?this.posY+this.margin[0]:this.margin[0],Ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],at=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],it=Gt===1?0:Ye+(Gt-2)*at;if(this.ctx.clip_path.length!==0){var Vt=this.path;le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(le,this.posX+this.margin[3],-it+yn+this.ctx.prevPageLastElemOffset),te.call(this,"fill",!0),this.path=Vt}var Yt=JSON.parse(JSON.stringify($e));Yt=D([Yt],this.posX+this.margin[3],-it+yn+this.ctx.prevPageLastElemOffset)[0];var In=(Gt>qe||Gt<Lt)&&E.call(this);In&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],rn,at,null).clip().discardPath()),this.pdf.addImage(ae,"JPEG",Yt.x,Yt.y,Yt.w,Yt.h,null,null,Se),In&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ae,"JPEG",$e.x,$e.y,$e.w,$e.h,null,null,Se)};var k=function(ae,H,Z){var me=[];H=H||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var pe=this.posY+this.ctx.prevPageLastElemOffset;switch(ae.type){default:case"mt":case"lt":me.push(Math.floor((ae.y+pe)/Z)+1);break;case"arc":me.push(Math.floor((ae.y+pe-ae.radius)/Z)+1),me.push(Math.floor((ae.y+pe+ae.radius)/Z)+1);break;case"qct":var de=_e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ae.x1,ae.y1,ae.x,ae.y);me.push(Math.floor((de.y+pe)/Z)+1),me.push(Math.floor((de.y+de.h+pe)/Z)+1);break;case"bct":var X=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ae.x1,ae.y1,ae.x2,ae.y2,ae.x,ae.y);me.push(Math.floor((X.y+pe)/Z)+1),me.push(Math.floor((X.y+X.h+pe)/Z)+1);break;case"rect":me.push(Math.floor((ae.y+pe)/Z)+1),me.push(Math.floor((ae.y+ae.h+pe)/Z)+1)}for(var J=0;J<me.length;J+=1)for(;this.pdf.internal.getNumberOfPages()<me[J];)A.call(this);return me},A=function(){var ae=this.fillStyle,H=this.strokeStyle,Z=this.font,me=this.lineCap,pe=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=ae,this.strokeStyle=H,this.font=Z,this.lineCap=me,this.lineWidth=pe,this.lineJoin=de},D=function(ae,H,Z){for(var me=0;me<ae.length;me++)switch(ae[me].type){case"bct":ae[me].x2+=H,ae[me].y2+=Z;case"qct":ae[me].x1+=H,ae[me].y1+=Z;case"mt":case"lt":case"arc":default:ae[me].x+=H,ae[me].y+=Z}return ae},V=function(ae){return ae.sort(function(H,Z){return H-Z})},Y=function(ae,H){for(var Z,me,pe=this.fillStyle,de=this.strokeStyle,X=this.lineCap,J=this.lineWidth,De=Math.abs(J*this.ctx.transform.scaleX),Te=this.lineJoin,Je=JSON.parse(JSON.stringify(this.path)),he=JSON.parse(JSON.stringify(this.path)),ee=[],se=0;se<he.length;se++)if(he[se].x!==void 0)for(var le=k.call(this,he[se]),ze=0;ze<le.length;ze+=1)ee.indexOf(le[ze])===-1&&ee.push(le[ze]);for(var Se=0;Se<ee.length;Se++)for(;this.pdf.internal.getNumberOfPages()<ee[Se];)A.call(this);if(V(ee),this.autoPaging)for(var ve=ee[0],$e=ee[ee.length-1],Ge=ve;Ge<$e+1;Ge++){this.pdf.setPage(Ge),this.fillStyle=pe,this.strokeStyle=de,this.lineCap=X,this.lineWidth=De,this.lineJoin=Te;var Xe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],lt=Ge===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Gt=Ge===1?0:qe+(Ge-2)*Lt;if(this.ctx.clip_path.length!==0){var rn=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(Z,this.posX+this.margin[3],-Gt+lt+this.ctx.prevPageLastElemOffset),te.call(this,ae,!0),this.path=rn}if(me=JSON.parse(JSON.stringify(Je)),this.path=D(me,this.posX+this.margin[3],-Gt+lt+this.ctx.prevPageLastElemOffset),H===!1||Ge===0){var yn=(Ge>ve||Ge<$e)&&E.call(this);yn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xe,Lt,null).clip().discardPath()),te.call(this,ae,H),yn&&this.pdf.restoreGraphicsState()}this.lineWidth=J}else this.lineWidth=De,te.call(this,ae,H),this.lineWidth=J;this.path=Je},te=function(ae,H){if((ae!=="stroke"||H||!x.call(this))&&(ae==="stroke"||H||!m.call(this))){for(var Z,me,pe=[],de=this.path,X=0;X<de.length;X++){var J=de[X];switch(J.type){case"begin":pe.push({begin:!0});break;case"close":pe.push({close:!0});break;case"mt":pe.push({start:J,deltas:[],abs:[]});break;case"lt":var De=pe.length;if(de[X-1]&&!isNaN(de[X-1].x)&&(Z=[J.x-de[X-1].x,J.y-de[X-1].y],De>0)){for(;De>=0;De--)if(pe[De-1].close!==!0&&pe[De-1].begin!==!0){pe[De-1].deltas.push(Z),pe[De-1].abs.push(J);break}}break;case"bct":Z=[J.x1-de[X-1].x,J.y1-de[X-1].y,J.x2-de[X-1].x,J.y2-de[X-1].y,J.x-de[X-1].x,J.y-de[X-1].y],pe[pe.length-1].deltas.push(Z);break;case"qct":var Te=de[X-1].x+2/3*(J.x1-de[X-1].x),Je=de[X-1].y+2/3*(J.y1-de[X-1].y),he=J.x+2/3*(J.x1-J.x),ee=J.y+2/3*(J.y1-J.y),se=J.x,le=J.y;Z=[Te-de[X-1].x,Je-de[X-1].y,he-de[X-1].x,ee-de[X-1].y,se-de[X-1].x,le-de[X-1].y],pe[pe.length-1].deltas.push(Z);break;case"arc":pe.push({deltas:[],abs:[],arc:!0}),Array.isArray(pe[pe.length-1].abs)&&pe[pe.length-1].abs.push(J)}}me=H?null:ae==="stroke"?"stroke":"fill";for(var ze=!1,Se=0;Se<pe.length;Se++)if(pe[Se].arc)for(var ve=pe[Se].abs,$e=0;$e<ve.length;$e++){var Ge=ve[$e];Ge.type==="arc"?I.call(this,Ge.x,Ge.y,Ge.radius,Ge.startAngle,Ge.endAngle,Ge.counterclockwise,void 0,H,!ze):j.call(this,Ge.x,Ge.y),ze=!0}else if(pe[Se].close===!0)this.pdf.internal.out("h"),ze=!1;else if(pe[Se].begin!==!0){var Xe=pe[Se].start.x,lt=pe[Se].start.y;z.call(this,pe[Se].deltas,Xe,lt),ze=!0}me&&F.call(this,me),H&&K.call(this)}},ge=function(ae){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ae-Z;case"top":return ae+H-Z;case"hanging":return ae+H-2*Z;case"middle":return ae+H/2-Z;case"ideographic":return ae;case"alphabetic":default:return ae}},fe=function(ae){return ae+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var ae=function(){};return ae.colorStops=[],ae.addColorStop=function(H,Z){this.colorStops.push([H,Z])},ae.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ae.isCanvasGradient=!0,ae},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var I=function(ae,H,Z,me,pe,de,X,J,De){for(var Te=$.call(this,Z,me,pe,de),Je=0;Je<Te.length;Je++){var he=Te[Je];Je===0&&(De?B.call(this,he.x1+ae,he.y1+H):j.call(this,he.x1+ae,he.y1+H)),U.call(this,ae,H,he.x2,he.y2,he.x3,he.y3,he.x4,he.y4)}J?K.call(this):F.call(this,X)},F=function(ae){switch(ae){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},K=function(){this.pdf.clip(),this.pdf.discardPath()},B=function(ae,H){this.pdf.internal.out(n(ae)+" "+r(H)+" m")},N=function(ae){var H;switch(ae.align){case"right":case"end":H="right";break;case"center":H="center";break;case"left":case"start":default:H="left"}var Z=this.pdf.getTextDimensions(ae.text),me=ge.call(this,ae.y),pe=fe.call(this,me)-Z.h,de=this.ctx.transform.applyToPoint(new o(ae.x,me)),X=this.ctx.transform.decompose(),J=new l;J=(J=(J=J.multiply(X.translate)).multiply(X.skew)).multiply(X.scale);for(var De,Te,Je,he=this.ctx.transform.applyToRectangle(new a(ae.x,me,Z.w,Z.h)),ee=J.applyToRectangle(new a(ae.x,pe,Z.w,Z.h)),se=k.call(this,ee),le=[],ze=0;ze<se.length;ze+=1)le.indexOf(se[ze])===-1&&le.push(se[ze]);if(V(le),this.autoPaging)for(var Se=le[0],ve=le[le.length-1],$e=Se;$e<ve+1;$e++){this.pdf.setPage($e);var Ge=$e===1?this.posY+this.margin[0]:this.margin[0],Xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],lt=this.pdf.internal.pageSize.height-this.margin[2],qe=lt-this.margin[0],Lt=this.pdf.internal.pageSize.width-this.margin[1],Gt=Lt-this.margin[3],rn=$e===1?0:Xe+($e-2)*qe;if(this.ctx.clip_path.length!==0){var yn=this.path;De=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(De,this.posX+this.margin[3],-1*rn+Ge),te.call(this,"fill",!0),this.path=yn}var Ye=D([JSON.parse(JSON.stringify(ee))],this.posX+this.margin[3],-rn+Ge+this.ctx.prevPageLastElemOffset)[0];ae.scale>=.01&&(Te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Te*ae.scale),Je=this.lineWidth,this.lineWidth=Je*ae.scale);var at=this.autoPaging!=="text";if(at||Ye.y+Ye.h<=lt){if(at||Ye.y>=Ge&&Ye.x<=Lt){var it=at?ae.text:this.pdf.splitTextToSize(ae.text,ae.maxWidth||Lt-Ye.x)[0],Vt=D([JSON.parse(JSON.stringify(he))],this.posX+this.margin[3],-rn+Ge+this.ctx.prevPageLastElemOffset)[0],Yt=at&&($e>Se||$e<ve)&&E.call(this);Yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Gt,qe,null).clip().discardPath()),this.pdf.text(it,Vt.x,Vt.y,{angle:ae.angle,align:H,renderingMode:ae.renderingMode}),Yt&&this.pdf.restoreGraphicsState()}}else Ye.y<lt&&(this.ctx.prevPageLastElemOffset+=lt-Ye.y);ae.scale>=.01&&(this.pdf.setFontSize(Te),this.lineWidth=Je)}else ae.scale>=.01&&(Te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Te*ae.scale),Je=this.lineWidth,this.lineWidth=Je*ae.scale),this.pdf.text(ae.text,de.x+this.posX,de.y+this.posY,{angle:ae.angle,align:H,renderingMode:ae.renderingMode,maxWidth:ae.maxWidth}),ae.scale>=.01&&(this.pdf.setFontSize(Te),this.lineWidth=Je)},j=function(ae,H,Z,me){Z=Z||0,me=me||0,this.pdf.internal.out(n(ae+Z)+" "+r(H+me)+" l")},z=function(ae,H,Z){return this.pdf.lines(ae,H,Z,null,null)},U=function(ae,H,Z,me,pe,de,X,J){this.pdf.internal.out([e(i(Z+ae)),e(s(me+H)),e(i(pe+ae)),e(s(de+H)),e(i(X+ae)),e(s(J+H)),"c"].join(" "))},$=function(ae,H,Z,me){for(var pe=2*Math.PI,de=Math.PI/2;H>Z;)H-=pe;var X=Math.abs(Z-H);X<pe&&me&&(X=pe-X);for(var J=[],De=me?-1:1,Te=H;X>1e-5;){var Je=Te+De*Math.min(X,de);J.push(re.call(this,ae,Te,Je)),X-=Math.abs(Je-Te),Te=Je}return J},re=function(ae,H,Z){var me=(Z-H)/2,pe=ae*Math.cos(me),de=ae*Math.sin(me),X=pe,J=-de,De=X*X+J*J,Te=De+X*pe+J*de,Je=4/3*(Math.sqrt(2*De*Te)-Te)/(X*de-J*pe),he=X-Je*J,ee=J+Je*X,se=he,le=-ee,ze=me+H,Se=Math.cos(ze),ve=Math.sin(ze);return{x1:ae*Math.cos(H),y1:ae*Math.sin(H),x2:he*Se-ee*ve,y2:he*ve+ee*Se,x3:se*Se-le*ve,y3:se*ve+le*Se,x4:ae*Math.cos(Z),y4:ae*Math.sin(Z)}},Q=function(ae){return 180*ae/Math.PI},_e=function(ae,H,Z,me,pe,de){var X=ae+.5*(Z-ae),J=H+.5*(me-H),De=pe+.5*(Z-pe),Te=de+.5*(me-de),Je=Math.min(ae,pe,X,De),he=Math.max(ae,pe,X,De),ee=Math.min(H,de,J,Te),se=Math.max(H,de,J,Te);return new a(Je,ee,he-Je,se-ee)},we=function(ae,H,Z,me,pe,de,X,J){var De,Te,Je,he,ee,se,le,ze,Se,ve,$e,Ge,Xe,lt,qe=Z-ae,Lt=me-H,Gt=pe-Z,rn=de-me,yn=X-pe,Ye=J-de;for(Te=0;Te<41;Te++)Se=(le=(Je=ae+(De=Te/40)*qe)+De*((ee=Z+De*Gt)-Je))+De*(ee+De*(pe+De*yn-ee)-le),ve=(ze=(he=H+De*Lt)+De*((se=me+De*rn)-he))+De*(se+De*(de+De*Ye-se)-ze),Te==0?($e=Se,Ge=ve,Xe=Se,lt=ve):($e=Math.min($e,Se),Ge=Math.min(Ge,ve),Xe=Math.max(Xe,Se),lt=Math.max(lt,ve));return new a(Math.round($e),Math.round(Ge),Math.round(Xe-$e),Math.round(lt-Ge))},nt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ae,H,Z=(ae=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:ae,lineDashOffset:H}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(Dr.API),function(t){var e=function(s){var o,a,l,c,d,p,v,m,x,E;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(d=((d=((d=((d=(d-(E=d%85))/85)-(x=d%85))/85)-(m=d%85))/85)-(v=d%85))/85)%85,a.push(p+33,v+33,m+33,x+33,E+33)):a.push(122);return function(k,A){for(var D=A;D>0;D--)k.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,c,d,p=String,v="length",m=255,x="charCodeAt",E="slice",k="replace";for(s[E](-2),s=s[E](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),l=[],c=0,d=(s+=o="uuuuu"[E](s[v]%5||5))[v];d>c;c+=5)a=52200625*(s[x](c)-33)+614125*(s[x](c+1)-33)+7225*(s[x](c+2)-33)+85*(s[x](c+3)-33)+(s[x](c+4)-33),l.push(m&a>>24,m&a>>16,m&a>>8,m&a);return function(A,D){for(var V=D;V>0;V--)A.pop()}(l,o[v]),p.fromCharCode.apply(p,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=kb(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(Dr.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,d){var p=new XMLHttpRequest,v=0,m=function(x){var E=x.length,k=[],A=String.fromCharCode;for(v=0;v<E;v+=1)k.push(A(255&x.charCodeAt(v)));return k.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?d(m(this.responseText)):d(void 0)}),p.send(null),c&&p.status===200)return m(p.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(Dr.API),function(t){function e(){return(Br.html2canvas?Promise.resolve(Br.html2canvas):Mh(()=>import("./html2canvas.esm.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Br.DOMPurify?Promise.resolve(Br.DOMPurify):Mh(()=>import("./purify.es.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=fs(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,d){for(var p=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),v=c.firstChild;v;v=v.nextSibling)d!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||p.appendChild(l(v,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(p.width=c.width,p.height=c.height,p.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(p.value=c.value),p.addEventListener("load",function(){p.scrollTop=c.scrollTop,p.scrollLeft=c.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var v=0;v<c.length;++v){var m=c[v],x=m.src.find(function(E){return E.format==="truetype"});x&&l.addFont(x.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||Dr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,d){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,c),p}).then(c,d).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(c,o,a);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Dr.getPageSize=function(o,a,l){if(fs(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var d,p=(""+l).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+a}var m,x=0,E=0;if(v.hasOwnProperty(p))x=v[p][1]/d,E=v[p][0]/d;else try{x=l[1],E=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",E>x&&(m=E,E=x,x=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",x>E&&(m=E,E=x,x=m)}return{width:E,height:x,unit:a,k:d,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Ib):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(Dr.API),Dr.API.addJS=function(t){return T5=t,this.internal.events.subscribe("postPutResources",function(){C0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(C0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),A5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+T5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){C0!==void 0&&A5!==void 0&&this.internal.out("/Names <</JavaScript "+C0+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(s=0;s<c;s++){var p=n.internal.newObject();d.push(p);var v=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<d.length;s++)n.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Dr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(p){for(var v,m=256*p.charCodeAt(4)+p.charCodeAt(5),x=p.length,E={width:0,height:0,numcomponents:1},k=4;k<x;k+=2){if(k+=m,e.indexOf(p.charCodeAt(k+1))!==-1){v=256*p.charCodeAt(k+5)+p.charCodeAt(k+6),E={width:256*p.charCodeAt(k+7)+p.charCodeAt(k+8),height:v,numcomponents:p.charCodeAt(k+9)};break}m=256*p.charCodeAt(k+2)+p.charCodeAt(k+3)}return E}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}d={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return d}}(Dr.API);var Zf,E0,D5,O5,N5,HH=function(){var t,e,n;function r(s){var o,a,l,c,d,p,v,m,x,E,k,A,D,V;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),x=(function(){var Y,te;for(te=[],Y=0;Y<4;++Y)te.push(String.fromCharCode(this.data[this.pos++]));return te}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),c=this.readUInt16()||100,p.delay=1e3*d/c,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,o-=4),s=(p!=null?p.data:void 0)||this.imgData,A=0;0<=o?A<o:A>o;0<=o?++A:--A)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((E=l-this.transparency.indexed.length)>0)for(D=0;0<=E?D<E:D>E;0<=E?++D:--D)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":v=(k=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,k.slice(0,v)),this.text[m]=String.fromCharCode.apply(String,k.slice(v+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(V=this.colorType)===4||V===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(p,v,m,x){var E,k,A,D,V,Y,te,ge,fe,I,F,K,B,N,j,z,U,$,re,Q,_e,we=Math.ceil((c.width-p)/m),nt=Math.ceil((c.height-v)/x),ae=c.width==we&&c.height==nt;for(N=o*we,K=ae?a:new Uint8Array(N*nt),Y=s.length,B=0,k=0;B<nt&&l<Y;){switch(s[l++]){case 0:for(D=U=0;U<N;D=U+=1)K[k++]=s[l++];break;case 1:for(D=$=0;$<N;D=$+=1)E=s[l++],V=D<o?0:K[k-o],K[k++]=(E+V)%256;break;case 2:for(D=re=0;re<N;D=re+=1)E=s[l++],A=(D-D%o)/o,j=B&&K[(B-1)*N+A*o+D%o],K[k++]=(j+E)%256;break;case 3:for(D=Q=0;Q<N;D=Q+=1)E=s[l++],A=(D-D%o)/o,V=D<o?0:K[k-o],j=B&&K[(B-1)*N+A*o+D%o],K[k++]=(E+Math.floor((V+j)/2))%256;break;case 4:for(D=_e=0;_e<N;D=_e+=1)E=s[l++],A=(D-D%o)/o,V=D<o?0:K[k-o],B===0?j=z=0:(j=K[(B-1)*N+A*o+D%o],z=A&&K[(B-1)*N+(A-1)*o+D%o]),te=V+j-z,ge=Math.abs(te-V),I=Math.abs(te-j),F=Math.abs(te-z),fe=ge<=I&&ge<=F?V:I<=F?j:z,K[k++]=(E+fe)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!ae){var H=((v+B*x)*c.width+p)*o,Z=B*N;for(D=0;D<we;D+=1){for(var me=0;me<o;me+=1)a[H++]=K[Z++];H+=(m-1)*o}}B++}}return s=xH(s),c.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,c,d,p,v,m;for(a=this.palette,d=this.transparency.indexed||[],c=new Uint8Array((d.length||0)+a.length),l=0,s=0,o=p=0,v=a.length;p<v;o=p+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(m=d[s++])!=null?m:255;return c},r.prototype.copyToImageData=function(s,o){var a,l,c,d,p,v,m,x,E,k,A;if(l=this.colors,E=null,a=this.hasAlphaChannel,this.palette.length&&(E=(A=this._decodedPalette)!=null?A:this._decodedPalette=this.decodePalette(),l=4,a=!0),x=(c=s.data||s).length,p=E||o,d=v=0,l===1)for(;d<x;)m=E?4*o[d/4]:v,k=p[m++],c[d++]=k,c[d++]=k,c[d++]=k,c[d++]=a?p[m++]:255,v=m;else for(;d<x;)m=E?4*o[d/4]:v,c[d++]=p[m++],c[d++]=p[m++],c[d++]=p[m++],c[d++]=a?p[m++]:255,v=m},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Br)==="[object Window]"){try{e=Br.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,c,d,p,v,m;if(this.animation){for(m=[],a=d=0,p=(v=this.animation.frames).length;d<p;a=++d)o=v[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,m.push(o.image=t(l));return m}},r.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,c,d,p,v=this;return a=0,p=this.animation,c=p.numFrames,l=p.frames,d=p.numPlays,(o=function(){var m,x;if(m=a++%c,x=l[m],v.renderFrame(s,m),c>1&&a/c<d)return v.animation._timeout=setTimeout(o,x.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function WH(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,d=[],p=0,v=null,m=0,x=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,x=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((B=t[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var E=t[e++];p=t[e++]|t[e++]<<8,v=t[e++],!(1&E)&&(v=null),m=E>>2&7,e++;break;case 254:for(;;){if(!((B=t[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var k=t[e++]|t[e++]<<8,A=t[e++]|t[e++]<<8,D=t[e++]|t[e++]<<8,V=t[e++]|t[e++]<<8,Y=t[e++],te=Y>>6&1,ge=1<<(7&Y)+1,fe=a,I=l,F=!1;Y>>7&&(F=!0,fe=e,I=ge,e+=3*ge);var K=e;for(e++;;){var B;if(!((B=t[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}d.push({x:k,y:A,width:D,height:V,has_local_palette:F,palette_offset:fe,palette_size:I,data_offset:K,data_length:e-K,transparent_index:v,interlaced:!!te,delay:p,disposal:m});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return x},this.frameInfo=function(N){if(N<0||N>=d.length)throw new Error("Frame index out of range.");return d[N]},this.decodeAndBlitFrameBGRA=function(N,j){var z=this.frameInfo(N),U=z.width*z.height,$=new Uint8Array(U);I5(t,z.data_offset,$,U);var re=z.palette_offset,Q=z.transparent_index;Q===null&&(Q=256);var _e=z.width,we=n-_e,nt=_e,ae=4*(z.y*n+z.x),H=4*((z.y+z.height)*n+z.x),Z=ae,me=4*we;z.interlaced===!0&&(me+=4*n*7);for(var pe=8,de=0,X=$.length;de<X;++de){var J=$[de];if(nt===0&&(nt=_e,(Z+=me)>=H&&(me=4*we+4*n*(pe-1),Z=ae+(_e+we)*(pe<<1),pe>>=1)),J===Q)Z+=4;else{var De=t[re+3*J],Te=t[re+3*J+1],Je=t[re+3*J+2];j[Z++]=Je,j[Z++]=Te,j[Z++]=De,j[Z++]=255}--nt}},this.decodeAndBlitFrameRGBA=function(N,j){var z=this.frameInfo(N),U=z.width*z.height,$=new Uint8Array(U);I5(t,z.data_offset,$,U);var re=z.palette_offset,Q=z.transparent_index;Q===null&&(Q=256);var _e=z.width,we=n-_e,nt=_e,ae=4*(z.y*n+z.x),H=4*((z.y+z.height)*n+z.x),Z=ae,me=4*we;z.interlaced===!0&&(me+=4*n*7);for(var pe=8,de=0,X=$.length;de<X;++de){var J=$[de];if(nt===0&&(nt=_e,(Z+=me)>=H&&(me=4*we+4*n*(pe-1),Z=ae+(_e+we)*(pe<<1),pe>>=1)),J===Q)Z+=4;else{var De=t[re+3*J],Te=t[re+3*J+1],Je=t[re+3*J+2];j[Z++]=De,j[Z++]=Te,j[Z++]=Je,j[Z++]=255}--nt}}}function I5(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,d=0,p=0,v=0,m=t[e++],x=new Int32Array(4096),E=null;;){for(;d<16&&m!==0;)p|=t[e++]<<d,d+=8,m===1?m=t[e++]:--m;if(d<l)break;var k=p&c;if(p>>=l,d-=l,k!==s){if(k===o)break;for(var A=k<a?k:E,D=0,V=A;V>s;)V=x[V]>>8,++D;var Y=V;if(v+D+(A!==k?1:0)>r)return void xs.log("Warning, gif stream longer than expected.");n[v++]=Y;var te=v+=D;for(A!==k&&(n[v++]=Y),V=A;D--;)V=x[V],n[--te]=255&V,V>>=8;E!==null&&a<4096&&(x[a++]=E<<8|Y,a>=c+1&&l<12&&(++l,c=c<<1|1)),E=k}else a=o+1,c=(1<<(l=i+1))-1,E=null}return v!==r&&xs.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function u2(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),p=new Array(65535),v=new Array(65535),m=new Array(64),x=new Array(64),E=[],k=0,A=7,D=new Array(64),V=new Array(64),Y=new Array(64),te=new Array(256),ge=new Array(2048),fe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],I=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],B=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],N=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],U=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function $(ae,H){for(var Z=0,me=0,pe=new Array,de=1;de<=16;de++){for(var X=1;X<=ae[de];X++)pe[H[me]]=[],pe[H[me]][0]=Z,pe[H[me]][1]=de,me++,Z++;Z*=2}return pe}function re(ae){for(var H=ae[0],Z=ae[1]-1;Z>=0;)H&1<<Z&&(k|=1<<A),Z--,--A<0&&(k==255?(Q(255),Q(0)):Q(k),A=7,k=0)}function Q(ae){E.push(ae)}function _e(ae){Q(ae>>8&255),Q(255&ae)}function we(ae,H,Z,me,pe){for(var de,X=pe[0],J=pe[240],De=function(ve,$e){var Ge,Xe,lt,qe,Lt,Gt,rn,yn,Ye,at,it=0;for(Ye=0;Ye<8;++Ye){Ge=ve[it],Xe=ve[it+1],lt=ve[it+2],qe=ve[it+3],Lt=ve[it+4],Gt=ve[it+5],rn=ve[it+6];var Vt=Ge+(yn=ve[it+7]),Yt=Ge-yn,In=Xe+rn,Sn=Xe-rn,Nn=lt+Gt,Qn=lt-Gt,Xt=qe+Lt,Cn=qe-Lt,Dn=Vt+Xt,rr=Vt-Xt,Zn=In+Nn,_r=In-Nn;ve[it]=Dn+Zn,ve[it+4]=Dn-Zn;var ir=.707106781*(_r+rr);ve[it+2]=rr+ir,ve[it+6]=rr-ir;var qr=.382683433*((Dn=Cn+Qn)-(_r=Sn+Yt)),Os=.5411961*Dn+qr,ls=1.306562965*_r+qr,ft=.707106781*(Zn=Qn+Sn),rt=Yt+ft,wt=Yt-ft;ve[it+5]=wt+Os,ve[it+3]=wt-Os,ve[it+1]=rt+ls,ve[it+7]=rt-ls,it+=8}for(it=0,Ye=0;Ye<8;++Ye){Ge=ve[it],Xe=ve[it+8],lt=ve[it+16],qe=ve[it+24],Lt=ve[it+32],Gt=ve[it+40],rn=ve[it+48];var kn=Ge+(yn=ve[it+56]),Hn=Ge-yn,wn=Xe+rn,bt=Xe-rn,Et=lt+Gt,ln=lt-Gt,Jt=qe+Lt,Ln=qe-Lt,Nr=kn+Jt,sn=kn-Jt,tn=wn+Et,jn=wn-Et;ve[it]=Nr+tn,ve[it+32]=Nr-tn;var zr=.707106781*(jn+sn);ve[it+16]=sn+zr,ve[it+48]=sn-zr;var ki=.382683433*((Nr=Ln+ln)-(jn=bt+Hn)),zi=.5411961*Nr+ki,Qr=1.306562965*jn+ki,ur=.707106781*(tn=ln+bt),wr=Hn+ur,Rr=Hn-ur;ve[it+40]=Rr+zi,ve[it+24]=Rr-zi,ve[it+8]=wr+Qr,ve[it+56]=wr-Qr,it++}for(Ye=0;Ye<64;++Ye)at=ve[Ye]*$e[Ye],m[Ye]=at>0?at+.5|0:at-.5|0;return m}(ae,H),Te=0;Te<64;++Te)x[fe[Te]]=De[Te];var Je=x[0]-Z;Z=x[0],Je==0?re(me[0]):(re(me[v[de=32767+Je]]),re(p[de]));for(var he=63;he>0&&x[he]==0;)he--;if(he==0)return re(X),Z;for(var ee,se=1;se<=he;){for(var le=se;x[se]==0&&se<=he;)++se;var ze=se-le;if(ze>=16){ee=ze>>4;for(var Se=1;Se<=ee;++Se)re(J);ze&=15}de=32767+x[se],re(pe[(ze<<4)+v[de]]),re(p[de]),se++}return he!=63&&re(X),Z}function nt(ae){ae=Math.min(Math.max(ae,1),100),s!=ae&&(function(H){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],me=0;me<64;me++){var pe=o((Z[me]*H+50)/100);pe=Math.min(Math.max(pe,1),255),a[fe[me]]=pe}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],X=0;X<64;X++){var J=o((de[X]*H+50)/100);J=Math.min(Math.max(J,1),255),l[fe[X]]=J}for(var De=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Te=0,Je=0;Je<8;Je++)for(var he=0;he<8;he++)c[Te]=1/(a[fe[Te]]*De[Je]*De[he]*8),d[Te]=1/(l[fe[Te]]*De[Je]*De[he]*8),Te++}(ae<50?Math.floor(5e3/ae):Math.floor(200-2*ae)),s=ae)}this.encode=function(ae,H){H&&nt(H),E=new Array,k=0,A=7,_e(65496),_e(65504),_e(16),Q(74),Q(70),Q(73),Q(70),Q(0),Q(1),Q(1),Q(0),_e(1),_e(1),Q(0),Q(0),function(){_e(65499),_e(132),Q(0);for(var Xe=0;Xe<64;Xe++)Q(a[Xe]);Q(1);for(var lt=0;lt<64;lt++)Q(l[lt])}(),function(Xe,lt){_e(65472),_e(17),Q(8),_e(lt),_e(Xe),Q(3),Q(1),Q(17),Q(0),Q(2),Q(17),Q(1),Q(3),Q(17),Q(1)}(ae.width,ae.height),function(){_e(65476),_e(418),Q(0);for(var Xe=0;Xe<16;Xe++)Q(I[Xe+1]);for(var lt=0;lt<=11;lt++)Q(F[lt]);Q(16);for(var qe=0;qe<16;qe++)Q(K[qe+1]);for(var Lt=0;Lt<=161;Lt++)Q(B[Lt]);Q(1);for(var Gt=0;Gt<16;Gt++)Q(N[Gt+1]);for(var rn=0;rn<=11;rn++)Q(j[rn]);Q(17);for(var yn=0;yn<16;yn++)Q(z[yn+1]);for(var Ye=0;Ye<=161;Ye++)Q(U[Ye])}(),_e(65498),_e(12),Q(3),Q(1),Q(0),Q(2),Q(17),Q(3),Q(17),Q(0),Q(63),Q(0);var Z=0,me=0,pe=0;k=0,A=7,this.encode.displayName="_encode_";for(var de,X,J,De,Te,Je,he,ee,se,le=ae.data,ze=ae.width,Se=ae.height,ve=4*ze,$e=0;$e<Se;){for(de=0;de<ve;){for(Te=ve*$e+de,he=-1,ee=0,se=0;se<64;se++)Je=Te+(ee=se>>3)*ve+(he=4*(7&se)),$e+ee>=Se&&(Je-=ve*($e+1+ee-Se)),de+he>=ve&&(Je-=de+he-ve+4),X=le[Je++],J=le[Je++],De=le[Je++],D[se]=(ge[X]+ge[J+256>>0]+ge[De+512>>0]>>16)-128,V[se]=(ge[X+768>>0]+ge[J+1024>>0]+ge[De+1280>>0]>>16)-128,Y[se]=(ge[X+1280>>0]+ge[J+1536>>0]+ge[De+1792>>0]>>16)-128;Z=we(D,c,Z,e,r),me=we(V,d,me,n,i),pe=we(Y,d,pe,n,i),de+=32}$e+=8}if(A>=0){var Ge=[];Ge[1]=A+1,Ge[0]=(1<<A+1)-1,re(Ge)}return _e(65497),new Uint8Array(E)},t=t||50,function(){for(var ae=String.fromCharCode,H=0;H<256;H++)te[H]=ae(H)}(),e=$(I,F),n=$(N,j),r=$(K,B),i=$(z,U),function(){for(var ae=1,H=2,Z=1;Z<=15;Z++){for(var me=ae;me<H;me++)v[32767+me]=Z,p[32767+me]=[],p[32767+me][1]=Z,p[32767+me][0]=me;for(var pe=-(H-1);pe<=-ae;pe++)v[32767+pe]=Z,p[32767+pe]=[],p[32767+pe][1]=Z,p[32767+pe][0]=H-1+pe;ae<<=1,H<<=1}}(),function(){for(var ae=0;ae<256;ae++)ge[ae]=19595*ae,ge[ae+256>>0]=38470*ae,ge[ae+512>>0]=7471*ae+32768,ge[ae+768>>0]=-11059*ae,ge[ae+1024>>0]=-21709*ae,ge[ae+1280>>0]=32768*ae+8421375,ge[ae+1536>>0]=-27439*ae,ge[ae+1792>>0]=-5329*ae}(),nt(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function hc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function B5(t){function e(I){if(!I)throw Error("assert :P")}function n(I,F,K){for(var B=0;4>B;B++)if(I[F+B]!=K.charCodeAt(B))return!0;return!1}function r(I,F,K,B,N){for(var j=0;j<N;j++)I[F+j]=K[B+j]}function i(I,F,K,B){for(var N=0;N<B;N++)I[F+N]=K}function s(I){return new Int32Array(I)}function o(I,F){for(var K=[],B=0;B<I;B++)K.push(new F);return K}function a(I,F){var K=[];return function B(N,j,z){for(var U=z[j],$=0;$<U&&(N.push(z.length>j+1?[]:new F),!(z.length<j+1));$++)B(N[$],j+1,z)}(K,0,I),K}var l=function(){var I=this;function F(w,T){for(var q=1<<T-1>>>0;w&q;)q>>>=1;return q?(w&q-1)+q:w}function K(w,T,q,ce,Le){e(!(ce%q));do w[T+(ce-=q)]=Le;while(0<ce)}function B(w,T,q,ce,Le){if(e(2328>=Le),512>=Le)var Me=s(512);else if((Me=s(Le))==null)return 0;return function(Ae,Oe,Be,Ke,gt,Ft){var jt,Mt,Kt=Oe,Wt=1<<Be,mt=s(16),xt=s(16);for(e(gt!=0),e(Ke!=null),e(Ae!=null),e(0<Be),Mt=0;Mt<gt;++Mt){if(15<Ke[Mt])return 0;++mt[Ke[Mt]]}if(mt[0]==gt)return 0;for(xt[1]=0,jt=1;15>jt;++jt){if(mt[jt]>1<<jt)return 0;xt[jt+1]=xt[jt]+mt[jt]}for(Mt=0;Mt<gt;++Mt)jt=Ke[Mt],0<Ke[Mt]&&(Ft[xt[jt]++]=Mt);if(xt[15]==1)return(Ke=new N).g=0,Ke.value=Ft[0],K(Ae,Kt,1,Wt,Ke),Wt;var nn,mn=-1,on=Wt-1,Fn=0,Bn=1,or=1,h=1<<Be;for(Mt=0,jt=1,gt=2;jt<=Be;++jt,gt<<=1){if(Bn+=or<<=1,0>(or-=mt[jt]))return 0;for(;0<mt[jt];--mt[jt])(Ke=new N).g=jt,Ke.value=Ft[Mt++],K(Ae,Kt+Fn,gt,h,Ke),Fn=F(Fn,jt)}for(jt=Be+1,gt=2;15>=jt;++jt,gt<<=1){if(Bn+=or<<=1,0>(or-=mt[jt]))return 0;for(;0<mt[jt];--mt[jt]){if(Ke=new N,(Fn&on)!=mn){for(Kt+=h,nn=1<<(mn=jt)-Be;15>mn&&!(0>=(nn-=mt[mn]));)++mn,nn<<=1;Wt+=h=1<<(nn=mn-Be),Ae[Oe+(mn=Fn&on)].g=nn+Be,Ae[Oe+mn].value=Kt-Oe-mn}Ke.g=jt-Be,Ke.value=Ft[Mt++],K(Ae,Kt+(Fn>>Be),gt,h,Ke),Fn=F(Fn,jt)}}return Bn!=2*xt[15]-1?0:Wt}(w,T,q,ce,Le,Me)}function N(){this.value=this.g=0}function j(){this.value=this.g=0}function z(){this.G=o(5,N),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Es,j)}function U(w,T,q,ce){e(w!=null),e(T!=null),e(2147483648>ce),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=T,w.pa=q,w.Jd=T,w.Yc=q+ce,w.Zc=4<=ce?q+ce-4+1:q,de(w)}function $(w,T){for(var q=0;0<T--;)q|=J(w,128)<<T;return q}function re(w,T){var q=$(w,T);return X(w)?-q:q}function Q(w,T,q,ce){var Le,Me=0;for(e(w!=null),e(T!=null),e(4294967288>ce),w.Sb=ce,w.Ra=0,w.u=0,w.h=0,4<ce&&(ce=4),Le=0;Le<ce;++Le)Me+=T[q+Le]<<8*Le;w.Ra=Me,w.bb=ce,w.oa=T,w.pa=q}function _e(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Oo-8>>>0,++w.bb,w.u-=8;Z(w)&&(w.h=1,w.u=0)}function we(w,T){if(e(0<=T),!w.h&&T<=Jo){var q=H(w)&Aa[T];return w.u+=T,_e(w),q}return w.h=1,w.u=0}function nt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ae(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(w){return w.Ra>>>(w.u&Oo-1)>>>0}function Z(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Oo}function me(w,T){w.u=T,w.h=Z(w)}function pe(w){w.u>=jl&&(e(w.u>=jl),_e(w))}function de(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function X(w){return $(w,1)}function J(w,T){var q=w.Ca;0>w.b&&de(w);var ce=w.b,Le=q*T>>>8,Me=(w.I>>>ce>Le)+0;for(Me?(q-=Le,w.I-=Le+1<<ce>>>0):q=Le+1,ce=q,Le=0;256<=ce;)Le+=8,ce>>=8;return ce=7^Le+to[ce],w.b-=ce,w.Ca=(q<<ce)-1,Me}function De(w,T,q){w[T+0]=q>>24&255,w[T+1]=q>>16&255,w[T+2]=q>>8&255,w[T+3]=q>>0&255}function Te(w,T){return w[T+0]<<0|w[T+1]<<8}function Je(w,T){return Te(w,T)|w[T+2]<<16}function he(w,T){return Te(w,T)|Te(w,T+2)<<16}function ee(w,T){var q=1<<T;return e(w!=null),e(0<T),w.X=s(q),w.X==null?0:(w.Mb=32-T,w.Xa=T,1)}function se(w,T){e(w!=null),e(T!=null),e(w.Xa==T.Xa),r(T.X,0,w.X,0,1<<T.Xa)}function le(){this.X=[],this.Xa=this.Mb=0}function ze(w,T,q,ce){e(q!=null),e(ce!=null);var Le=q[0],Me=ce[0];return Le==0&&(Le=(w*Me+T/2)/T),Me==0&&(Me=(T*Le+w/2)/w),0>=Le||0>=Me?0:(q[0]=Le,ce[0]=Me,1)}function Se(w,T){return w+(1<<T)-1>>>T}function ve(w,T){return((4278255360&w)+(4278255360&T)>>>0&4278255360)+((16711935&w)+(16711935&T)>>>0&16711935)>>>0}function $e(w,T){I[T]=function(q,ce,Le,Me,Ae,Oe,Be){var Ke;for(Ke=0;Ke<Ae;++Ke){var gt=I[w](Oe[Be+Ke-1],Le,Me+Ke);Oe[Be+Ke]=ve(q[ce+Ke],gt)}}}function Ge(){this.ud=this.hd=this.jd=0}function Xe(w,T){return((4278124286&(w^T))>>>1)+(w&T)>>>0}function lt(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function qe(w,T){return lt(w+(w-T+.5>>1))}function Lt(w,T,q){return Math.abs(T-q)-Math.abs(w-q)}function Gt(w,T,q,ce,Le,Me,Ae){for(ce=Me[Ae-1],q=0;q<Le;++q)Me[Ae+q]=ce=ve(w[T+q],ce)}function rn(w,T,q,ce,Le){var Me;for(Me=0;Me<q;++Me){var Ae=w[T+Me],Oe=Ae>>8&255,Be=16711935&(Be=(Be=16711935&Ae)+((Oe<<16)+Oe));ce[Le+Me]=(4278255360&Ae)+Be>>>0}}function yn(w,T){T.jd=w>>0&255,T.hd=w>>8&255,T.ud=w>>16&255}function Ye(w,T,q,ce,Le,Me){var Ae;for(Ae=0;Ae<ce;++Ae){var Oe=T[q+Ae],Be=Oe>>>8,Ke=Oe,gt=255&(gt=(gt=Oe>>>16)+((w.jd<<24>>24)*(Be<<24>>24)>>>5));Ke=255&(Ke=(Ke=Ke+((w.hd<<24>>24)*(Be<<24>>24)>>>5))+((w.ud<<24>>24)*(gt<<24>>24)>>>5)),Le[Me+Ae]=(4278255360&Oe)+(gt<<16)+Ke}}function at(w,T,q,ce,Le){I[T]=function(Me,Ae,Oe,Be,Ke,gt,Ft,jt,Mt){for(Be=Ft;Be<jt;++Be)for(Ft=0;Ft<Mt;++Ft)Ke[gt++]=Le(Oe[ce(Me[Ae++])])},I[w]=function(Me,Ae,Oe,Be,Ke,gt,Ft){var jt=8>>Me.b,Mt=Me.Ea,Kt=Me.K[0],Wt=Me.w;if(8>jt)for(Me=(1<<Me.b)-1,Wt=(1<<jt)-1;Ae<Oe;++Ae){var mt,xt=0;for(mt=0;mt<Mt;++mt)mt&Me||(xt=ce(Be[Ke++])),gt[Ft++]=Le(Kt[xt&Wt]),xt>>=jt}else I["VP8LMapColor"+q](Be,Ke,Kt,Wt,gt,Ft,Ae,Oe,Mt)}}function it(w,T,q,ce,Le){for(q=T+q;T<q;){var Me=w[T++];ce[Le++]=Me>>16&255,ce[Le++]=Me>>8&255,ce[Le++]=Me>>0&255}}function Vt(w,T,q,ce,Le){for(q=T+q;T<q;){var Me=w[T++];ce[Le++]=Me>>16&255,ce[Le++]=Me>>8&255,ce[Le++]=Me>>0&255,ce[Le++]=Me>>24&255}}function Yt(w,T,q,ce,Le){for(q=T+q;T<q;){var Me=(Ae=w[T++])>>16&240|Ae>>12&15,Ae=Ae>>0&240|Ae>>28&15;ce[Le++]=Me,ce[Le++]=Ae}}function In(w,T,q,ce,Le){for(q=T+q;T<q;){var Me=(Ae=w[T++])>>16&248|Ae>>13&7,Ae=Ae>>5&224|Ae>>3&31;ce[Le++]=Me,ce[Le++]=Ae}}function Sn(w,T,q,ce,Le){for(q=T+q;T<q;){var Me=w[T++];ce[Le++]=Me>>0&255,ce[Le++]=Me>>8&255,ce[Le++]=Me>>16&255}}function Nn(w,T,q,ce,Le,Me){if(Me==0)for(q=T+q;T<q;)De(ce,((Me=w[T++])[0]>>24|Me[1]>>8&65280|Me[2]<<8&16711680|Me[3]<<24)>>>0),Le+=32;else r(ce,Le,w,T,q)}function Qn(w,T){I[T][0]=I[w+"0"],I[T][1]=I[w+"1"],I[T][2]=I[w+"2"],I[T][3]=I[w+"3"],I[T][4]=I[w+"4"],I[T][5]=I[w+"5"],I[T][6]=I[w+"6"],I[T][7]=I[w+"7"],I[T][8]=I[w+"8"],I[T][9]=I[w+"9"],I[T][10]=I[w+"10"],I[T][11]=I[w+"11"],I[T][12]=I[w+"12"],I[T][13]=I[w+"13"],I[T][14]=I[w+"0"],I[T][15]=I[w+"0"]}function Xt(w){return w==Hs||w==Ws||w==_a||w==u}function Cn(){this.eb=[],this.size=this.A=this.fb=0}function Dn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function rr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Cn,this.f.kb=new Dn,this.sd=null}function Zn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function _r(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ir(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function qr(w,T){var q=w.T,ce=T.ba.f.RGBA,Le=ce.eb,Me=ce.fb+w.ka*ce.A,Ae=ao[T.ba.S],Oe=w.y,Be=w.O,Ke=w.f,gt=w.N,Ft=w.ea,jt=w.W,Mt=T.cc,Kt=T.dc,Wt=T.Mc,mt=T.Nc,xt=w.ka,nn=w.ka+w.T,mn=w.U,on=mn+1>>1;for(xt==0?Ae(Oe,Be,null,null,Ke,gt,Ft,jt,Ke,gt,Ft,jt,Le,Me,null,null,mn):(Ae(T.ec,T.fc,Oe,Be,Mt,Kt,Wt,mt,Ke,gt,Ft,jt,Le,Me-ce.A,Le,Me,mn),++q);xt+2<nn;xt+=2)Mt=Ke,Kt=gt,Wt=Ft,mt=jt,gt+=w.Rc,jt+=w.Rc,Me+=2*ce.A,Ae(Oe,(Be+=2*w.fa)-w.fa,Oe,Be,Mt,Kt,Wt,mt,Ke,gt,Ft,jt,Le,Me-ce.A,Le,Me,mn);return Be+=w.fa,w.j+nn<w.o?(r(T.ec,T.fc,Oe,Be,mn),r(T.cc,T.dc,Ke,gt,on),r(T.Mc,T.Nc,Ft,jt,on),q--):1&nn||Ae(Oe,Be,null,null,Ke,gt,Ft,jt,Ke,gt,Ft,jt,Le,Me+ce.A,null,null,mn),q}function Os(w,T,q){var ce=w.F,Le=[w.J];if(ce!=null){var Me=w.U,Ae=T.ba.S,Oe=Ae==ba||Ae==_a;T=T.ba.f.RGBA;var Be=[0],Ke=w.ka;Be[0]=w.T,w.Kb&&(Ke==0?--Be[0]:(--Ke,Le[0]-=w.width),w.j+w.ka+w.T==w.o&&(Be[0]=w.o-w.j-Ke));var gt=T.eb;Ke=T.fb+Ke*T.A,w=Ii(ce,Le[0],w.width,Me,Be,gt,Ke+(Oe?0:3),T.A),e(q==Be),w&&Xt(Ae)&&Us(gt,Ke,Oe,Me,Be,T.A)}return 0}function ls(w){var T=w.ma,q=T.ba.S,ce=11>q,Le=q==mr||q==Ja||q==ba||q==_o||q==12||Xt(q);if(T.memory=null,T.Ib=null,T.Jb=null,T.Nd=null,!Qu(T.Oa,w,Le?11:12))return 0;if(Le&&Xt(q)&&pn(),w.da)alert("todo:use_scaling");else{if(ce){if(T.Ib=ir,w.Kb){if(q=w.U+1>>1,T.memory=s(w.U+2*q),T.memory==null)return 0;T.ec=T.memory,T.fc=0,T.cc=T.ec,T.dc=T.fc+w.U,T.Mc=T.cc,T.Nc=T.dc+q,T.Ib=qr,pn()}}else alert("todo:EmitYUV");Le&&(T.Jb=Os,ce&&kt())}if(ce&&!Tc){for(w=0;256>w;++w)Hh[w]=89858*(w-128)+_l>>Uh,Wh[w]=-22014*(w-128)+_l,Hp[w]=-45773*(w-128),pu[w]=113618*(w-128)+_l>>Uh;for(w=oh;w<Nd;++w)T=76283*(w-16)+_l>>Uh,Gh[w-oh]=Hr(T,255),Tf[w-oh]=Hr(T+8>>4,15);Tc=1}return 1}function ft(w){var T=w.ma,q=w.U,ce=w.T;return e(!(1&w.ka)),0>=q||0>=ce?0:(q=T.Ib(w,T),T.Jb!=null&&T.Jb(w,T,q),T.Dc+=q,1)}function rt(w){w.ma.memory=null}function wt(w,T,q,ce){return we(w,8)!=47?0:(T[0]=we(w,14)+1,q[0]=we(w,14)+1,ce[0]=we(w,1),we(w,3)!=0?0:!w.h)}function kn(w,T){if(4>w)return w+1;var q=w-2>>1;return(2+(1&w)<<q)+we(T,q)+1}function Hn(w,T){return 120<T?T-120:1<=(q=((q=ut[T-1])>>4)*w+(8-(15&q)))?q:1;var q}function wn(w,T,q){var ce=H(q),Le=w[T+=255&ce].g-8;return 0<Le&&(me(q,q.u+8),ce=H(q),T+=w[T].value,T+=ce&(1<<Le)-1),me(q,q.u+w[T].g),w[T].value}function bt(w,T,q){return q.g+=w.g,q.value+=w.value<<T>>>0,e(8>=q.g),w.g}function Et(w,T,q){var ce=w.xc;return e((T=ce==0?0:w.vc[w.md*(q>>ce)+(T>>ce)])<w.Wb),w.Ya[T]}function ln(w,T,q,ce){var Le=w.ab,Me=w.c*T,Ae=w.C;T=Ae+T;var Oe=q,Be=ce;for(ce=w.Ta,q=w.Ua;0<Le--;){var Ke=w.gc[Le],gt=Ae,Ft=T,jt=Oe,Mt=Be,Kt=(Be=ce,Oe=q,Ke.Ea);switch(e(gt<Ft),e(Ft<=Ke.nc),Ke.hc){case 2:Ac(jt,Mt,(Ft-gt)*Kt,Be,Oe);break;case 0:var Wt=gt,mt=Ft,xt=Be,nn=Oe,mn=(h=Ke).Ea;Wt==0&&(vo(jt,Mt,null,null,1,xt,nn),Gt(jt,Mt+1,0,0,mn-1,xt,nn+1),Mt+=mn,nn+=mn,++Wt);for(var on=1<<h.b,Fn=on-1,Bn=Se(mn,h.b),or=h.K,h=h.w+(Wt>>h.b)*Bn;Wt<mt;){var g=or,_=h,S=1;for(yo(jt,Mt,xt,nn-mn,1,xt,nn);S<mn;){var M=(S&~Fn)+on;M>mn&&(M=mn),(0,Ya[g[_++]>>8&15])(jt,Mt+ +S,xt,nn+S-mn,M-S,xt,nn+S),S=M}Mt+=mn,nn+=mn,++Wt&Fn||(h+=Bn)}Ft!=Ke.nc&&r(Be,Oe-Kt,Be,Oe+(Ft-gt-1)*Kt,Kt);break;case 1:for(Kt=jt,mt=Mt,mn=(jt=Ke.Ea)-(nn=jt&~(xt=(Mt=1<<Ke.b)-1)),Wt=Se(jt,Ke.b),on=Ke.K,Ke=Ke.w+(gt>>Ke.b)*Wt;gt<Ft;){for(Fn=on,Bn=Ke,or=new Ge,h=mt+nn,g=mt+jt;mt<h;)yn(Fn[Bn++],or),Ka(or,Kt,mt,Mt,Be,Oe),mt+=Mt,Oe+=Mt;mt<g&&(yn(Fn[Bn++],or),Ka(or,Kt,mt,mn,Be,Oe),mt+=mn,Oe+=mn),++gt&xt||(Ke+=Wt)}break;case 3:if(jt==Be&&Mt==Oe&&0<Ke.b){for(mt=Be,jt=Kt=Oe+(Ft-gt)*Kt-(nn=(Ft-gt)*Se(Ke.Ea,Ke.b)),Mt=Be,xt=Oe,Wt=[],nn=(mn=nn)-1;0<=nn;--nn)Wt[nn]=Mt[xt+nn];for(nn=mn-1;0<=nn;--nn)mt[jt+nn]=Wt[nn];Is(Ke,gt,Ft,Be,Kt,Be,Oe)}else Is(Ke,gt,Ft,jt,Mt,Be,Oe)}Oe=ce,Be=q}Be!=q&&r(ce,q,Oe,Be,Me)}function Jt(w,T){var q=w.V,ce=w.Ba+w.c*w.C,Le=T-w.C;if(e(T<=w.l.o),e(16>=Le),0<Le){var Me=w.l,Ae=w.Ta,Oe=w.Ua,Be=Me.width;if(ln(w,Le,q,ce),Le=Oe=[Oe],e((q=w.C)<(ce=T)),e(Me.v<Me.va),ce>Me.o&&(ce=Me.o),q<Me.j){var Ke=Me.j-q;q=Me.j,Le[0]+=Ke*Be}if(q>=ce?q=0:(Le[0]+=4*Me.v,Me.ka=q-Me.j,Me.U=Me.va-Me.v,Me.T=ce-q,q=1),q){if(Oe=Oe[0],11>(q=w.ca).S){var gt=q.f.RGBA,Ft=(ce=q.S,Le=Me.U,Me=Me.T,Ke=gt.eb,gt.A),jt=Me;for(gt=gt.fb+w.Ma*gt.A;0<jt--;){var Mt=Ae,Kt=Oe,Wt=Le,mt=Ke,xt=gt;switch(ce){case Io:io(Mt,Kt,Wt,mt,xt);break;case mr:Vs(Mt,Kt,Wt,mt,xt);break;case Hs:Vs(Mt,Kt,Wt,mt,xt),Us(mt,xt,0,Wt,1,0);break;case Xa:so(Mt,Kt,Wt,mt,xt);break;case Ja:Nn(Mt,Kt,Wt,mt,xt,1);break;case Ws:Nn(Mt,Kt,Wt,mt,xt,1),Us(mt,xt,0,Wt,1,0);break;case ba:Nn(Mt,Kt,Wt,mt,xt,0);break;case _a:Nn(Mt,Kt,Wt,mt,xt,0),Us(mt,xt,1,Wt,1,0);break;case _o:Ta(Mt,Kt,Wt,mt,xt);break;case u:Ta(Mt,Kt,Wt,mt,xt),Pi(mt,xt,Wt,1,0);break;case ih:Qo(Mt,Kt,Wt,mt,xt);break;default:e(0)}Oe+=Be,gt+=Ft}w.Ma+=Me}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=q.height)}}w.C=T,e(w.C<=w.i)}function Ln(w){var T;if(0<w.ua)return 0;for(T=0;T<w.Wb;++T){var q=w.Ya[T].G,ce=w.Ya[T].H;if(0<q[1][ce[1]+0].g||0<q[2][ce[2]+0].g||0<q[3][ce[3]+0].g)return 0}return 1}function Nr(w,T,q,ce,Le,Me){if(w.Z!=0){var Ae=w.qd,Oe=w.rd;for(e(bi[w.Z]!=null);T<q;++T)bi[w.Z](Ae,Oe,ce,Le,ce,Le,Me),Ae=ce,Oe=Le,Le+=Me;w.qd=Ae,w.rd=Oe}}function sn(w,T){var q=w.l.ma,ce=q.Z==0||q.Z==1?w.l.j:w.C;if(ce=w.C<ce?ce:w.C,e(T<=w.l.o),T>ce){var Le=w.l.width,Me=q.ca,Ae=q.tb+Le*ce,Oe=w.V,Be=w.Ba+w.c*ce,Ke=w.gc;e(w.ab==1),e(Ke[0].hc==3),no(Ke[0],ce,T,Oe,Be,Me,Ae),Nr(q,ce,T,Me,Ae,Le)}w.C=w.Ma=T}function tn(w,T,q,ce,Le,Me,Ae){var Oe=w.$/ce,Be=w.$%ce,Ke=w.m,gt=w.s,Ft=q+w.$,jt=Ft;Le=q+ce*Le;var Mt=q+ce*Me,Kt=280+gt.ua,Wt=w.Pb?Oe:16777216,mt=0<gt.ua?gt.Wa:null,xt=gt.wc,nn=Ft<Mt?Et(gt,Be,Oe):null;e(w.C<Me),e(Mt<=Le);var mn=!1;e:for(;;){for(;mn||Ft<Mt;){var on=0;if(Oe>=Wt){var Fn=Ft-q;e((Wt=w).Pb),Wt.wd=Wt.m,Wt.xd=Fn,0<Wt.s.ua&&se(Wt.s.Wa,Wt.s.vb),Wt=Oe+Ht}if(Be&xt||(nn=Et(gt,Be,Oe)),e(nn!=null),nn.Qb&&(T[Ft]=nn.qb,mn=!0),!mn)if(pe(Ke),nn.jc){on=Ke,Fn=T;var Bn=Ft,or=nn.pd[H(on)&Es-1];e(nn.jc),256>or.g?(me(on,on.u+or.g),Fn[Bn]=or.value,on=0):(me(on,on.u+or.g-256),e(256<=or.value),on=or.value),on==0&&(mn=!0)}else on=wn(nn.G[0],nn.H[0],Ke);if(Ke.h)break;if(mn||256>on){if(!mn)if(nn.nd)T[Ft]=(nn.qb|on<<8)>>>0;else{if(pe(Ke),mn=wn(nn.G[1],nn.H[1],Ke),pe(Ke),Fn=wn(nn.G[2],nn.H[2],Ke),Bn=wn(nn.G[3],nn.H[3],Ke),Ke.h)break;T[Ft]=(Bn<<24|mn<<16|on<<8|Fn)>>>0}if(mn=!1,++Ft,++Be>=ce&&(Be=0,++Oe,Ae!=null&&Oe<=Me&&!(Oe%16)&&Ae(w,Oe),mt!=null))for(;jt<Ft;)on=T[jt++],mt.X[(506832829*on&4294967295)>>>mt.Mb]=on}else if(280>on){if(on=kn(on-256,Ke),Fn=wn(nn.G[4],nn.H[4],Ke),pe(Ke),Fn=Hn(ce,Fn=kn(Fn,Ke)),Ke.h)break;if(Ft-q<Fn||Le-Ft<on)break e;for(Bn=0;Bn<on;++Bn)T[Ft+Bn]=T[Ft+Bn-Fn];for(Ft+=on,Be+=on;Be>=ce;)Be-=ce,++Oe,Ae!=null&&Oe<=Me&&!(Oe%16)&&Ae(w,Oe);if(e(Ft<=Le),Be&xt&&(nn=Et(gt,Be,Oe)),mt!=null)for(;jt<Ft;)on=T[jt++],mt.X[(506832829*on&4294967295)>>>mt.Mb]=on}else{if(!(on<Kt))break e;for(mn=on-280,e(mt!=null);jt<Ft;)on=T[jt++],mt.X[(506832829*on&4294967295)>>>mt.Mb]=on;on=Ft,e(!(mn>>>(Fn=mt).Xa)),T[on]=Fn.X[mn],mn=!0}mn||e(Ke.h==Z(Ke))}if(w.Pb&&Ke.h&&Ft<Le)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&se(w.s.vb,w.s.Wa);else{if(Ke.h)break e;Ae!=null&&Ae(w,Oe>Me?Me:Oe),w.a=0,w.$=Ft-q}return 1}return w.a=3,0}function jn(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var T=w.Wa;T!=null&&(T.X=null),w.vb=null,e(w!=null)}function zr(){var w=new Bl;return w==null?null:(w.a=0,w.xb=Du,Qn("Predictor","VP8LPredictors"),Qn("Predictor","VP8LPredictors_C"),Qn("PredictorAdd","VP8LPredictorsAdd"),Qn("PredictorAdd","VP8LPredictorsAdd_C"),Ac=rn,Ka=Ye,io=it,Vs=Vt,Ta=Yt,Qo=In,so=Sn,I.VP8LMapColor32b=qa,I.VP8LMapColor8b=ro,w)}function ki(w,T,q,ce,Le){var Me=1,Ae=[w],Oe=[T],Be=ce.m,Ke=ce.s,gt=null,Ft=0;e:for(;;){if(q)for(;Me&&we(Be,1);){var jt=Ae,Mt=Oe,Kt=ce,Wt=1,mt=Kt.m,xt=Kt.gc[Kt.ab],nn=we(mt,2);if(Kt.Oc&1<<nn)Me=0;else{switch(Kt.Oc|=1<<nn,xt.hc=nn,xt.Ea=jt[0],xt.nc=Mt[0],xt.K=[null],++Kt.ab,e(4>=Kt.ab),nn){case 0:case 1:xt.b=we(mt,3)+2,Wt=ki(Se(xt.Ea,xt.b),Se(xt.nc,xt.b),0,Kt,xt.K),xt.K=xt.K[0];break;case 3:var mn,on=we(mt,8)+1,Fn=16<on?0:4<on?1:2<on?2:3;if(jt[0]=Se(xt.Ea,Fn),xt.b=Fn,mn=Wt=ki(on,1,0,Kt,xt.K)){var Bn,or=on,h=xt,g=1<<(8>>h.b),_=s(g);if(_==null)mn=0;else{var S=h.K[0],M=h.w;for(_[0]=h.K[0][0],Bn=1;Bn<1*or;++Bn)_[Bn]=ve(S[M+Bn],_[Bn-1]);for(;Bn<4*g;++Bn)_[Bn]=0;h.K[0]=null,h.K[0]=_,mn=1}}Wt=mn;break;case 2:break;default:e(0)}Me=Wt}}if(Ae=Ae[0],Oe=Oe[0],Me&&we(Be,1)&&!(Me=1<=(Ft=we(Be,4))&&11>=Ft)){ce.a=3;break e}var W;if(W=Me)t:{var ne,oe,ye,Ee=ce,tt=Ae,We=Oe,_t=Ft,Bt=q,Qt=Ee.m,xn=Ee.s,Tn=[null],pr=1,et=0,st=Nt[_t];n:for(;;){if(Bt&&we(Qt,1)){var pt=we(Qt,3)+2,zt=Se(tt,pt),Pt=Se(We,pt),Rt=zt*Pt;if(!ki(zt,Pt,0,Ee,Tn))break n;for(Tn=Tn[0],xn.xc=pt,ne=0;ne<Rt;++ne){var be=Tn[ne]>>8&65535;Tn[ne]=be,be>=pr&&(pr=be+1)}}if(Qt.h)break n;for(oe=0;5>oe;++oe){var ke=G[oe];!oe&&0<_t&&(ke+=1<<_t),et<ke&&(et=ke)}var Fe=o(pr*st,N),Re=pr,Ue=o(Re,z);if(Ue==null)var He=null;else e(65536>=Re),He=Ue;var ct=s(et);if(He==null||ct==null||Fe==null){Ee.a=1;break n}var ht=Fe;for(ne=ye=0;ne<pr;++ne){var vt=He[ne],At=vt.G,Tt=vt.H,an=0,Gn=1,Kn=0;for(oe=0;5>oe;++oe){ke=G[oe],At[oe]=ht,Tt[oe]=ye,!oe&&0<_t&&(ke+=1<<_t);i:{var ar,_i=ke,Bi=Ee,ri=ct,Hi=ht,Fo=ye,nc=0,Fa=Bi.m,Id=we(Fa,1);if(i(ri,0,0,_i),Id){var wl=we(Fa,1)+1,Dc=we(Fa,1),ja=we(Fa,Dc==0?1:8);ri[ja]=1,wl==2&&(ri[ja=we(Fa,8)]=1);var lo=1}else{var ws=s(19),Bf=we(Fa,4)+4;if(19<Bf){Bi.a=3;var Bd=0;break i}for(ar=0;ar<Bf;++ar)ws[Pe[ar]]=we(Fa,3);var Rd=void 0,Fd=void 0,Rf=Bi,hi=ws,Ff=_i,Vm=ri,ah=0,rc=Rf.m,Um=8,Hm=o(128,N);r:for(;B(Hm,0,7,hi,19);){if(we(rc,1)){var zl=2+2*we(rc,3);if((Rd=2+we(rc,zl))>Ff)break r}else Rd=Ff;for(Fd=0;Fd<Ff&&Rd--;){pe(rc);var Wm=Hm[0+(127&H(rc))];me(rc,rc.u+Wm.g);var ic=Wm.value;if(16>ic)Vm[Fd++]=ic,ic!=0&&(Um=ic);else{var Wp=ic==16,Gp=ic-16,Gm=P[Gp],el=we(rc,y[Gp])+Gm;if(Fd+el>Ff)break r;for(var Oc=Wp?Um:0;0<el--;)Vm[Fd++]=Oc}}ah=1;break r}ah||(Rf.a=3),lo=ah}(lo=lo&&!Fa.h)&&(nc=B(Hi,Fo,8,ri,_i)),lo&&nc!=0?Bd=nc:(Bi.a=3,Bd=0)}if(Bd==0)break n;if(Gn&&ue[oe]==1&&(Gn=ht[ye].g==0),an+=ht[ye].g,ye+=Bd,3>=oe){var lh,jf=ct[0];for(lh=1;lh<ke;++lh)ct[lh]>jf&&(jf=ct[lh]);Kn+=jf}}if(vt.nd=Gn,vt.Qb=0,Gn&&(vt.qb=(At[3][Tt[3]+0].value<<24|At[1][Tt[1]+0].value<<16|At[2][Tt[2]+0].value)>>>0,an==0&&256>At[0][Tt[0]+0].value&&(vt.Qb=1,vt.qb+=At[0][Tt[0]+0].value<<8)),vt.jc=!vt.Qb&&6>Kn,vt.jc){var uh,Ou=vt;for(uh=0;uh<Es;++uh){var Nu=uh,sc=Ou.pd[Nu],qh=Ou.G[0][Ou.H[0]+Nu];256<=qh.value?(sc.g=qh.g+256,sc.value=qh.value):(sc.g=0,sc.value=0,Nu>>=bt(qh,8,sc),Nu>>=bt(Ou.G[1][Ou.H[1]+Nu],16,sc),Nu>>=bt(Ou.G[2][Ou.H[2]+Nu],0,sc),bt(Ou.G[3][Ou.H[3]+Nu],24,sc))}}}xn.vc=Tn,xn.Wb=pr,xn.Ya=He,xn.yc=Fe,W=1;break t}W=0}if(!(Me=W)){ce.a=3;break e}if(0<Ft){if(Ke.ua=1<<Ft,!ee(Ke.Wa,Ft)){ce.a=1,Me=0;break e}}else Ke.ua=0;var jd=ce,oc=Ae,e1=Oe,Iu=jd.s,zf=Iu.xc;if(jd.c=oc,jd.i=e1,Iu.md=Se(oc,zf),Iu.wc=zf==0?-1:(1<<zf)-1,q){ce.xb=Od;break e}if((gt=s(Ae*Oe))==null){ce.a=1,Me=0;break e}Me=(Me=tn(ce,gt,0,Ae,Oe,Oe,null))&&!Be.h;break e}return Me?(Le!=null?Le[0]=gt:(e(gt==null),e(q)),ce.$=0,q||jn(Ke)):jn(Ke),Me}function zi(w,T){var q=w.c*w.i,ce=q+T+16*T;return e(w.c<=T),w.V=s(ce),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+q+T,1)}function Qr(w,T){var q=w.C,ce=T-q,Le=w.V,Me=w.Ba+w.c*q;for(e(T<=w.l.o);0<ce;){var Ae=16<ce?16:ce,Oe=w.l.ma,Be=w.l.width,Ke=Be*Ae,gt=Oe.ca,Ft=Oe.tb+Be*q,jt=w.Ta,Mt=w.Ua;ln(w,Ae,Le,Me),_s(jt,Mt,gt,Ft,Ke),Nr(Oe,q,q+Ae,gt,Ft,Be),ce-=Ae,Le+=Ae*w.c,q+=Ae}e(q==T),w.C=w.Ma=T}function ur(){this.ub=this.yd=this.td=this.Rb=0}function wr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Rr(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Lr(){this.Yb=function(){var w=[];return function T(q,ce,Le){for(var Me=Le[ce],Ae=0;Ae<Me&&(q.push(Le.length>ce+1?[]:0),!(Le.length<ce+1));Ae++)T(q[Ae],ce+1,Le)}(w,0,[3,11]),w}()}function un(){this.jb=s(3),this.Wc=a([4,8],Lr),this.Xc=a([4,17],Lr)}function ss(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function pi(){this.ld=this.La=this.dd=this.tc=0}function Ki(){this.Na=this.la=0}function $i(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ni(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Pr(){this.uc=this.M=this.Nb=0,this.wa=Array(new pi),this.Y=0,this.ya=Array(new Ni),this.aa=0,this.l=new Xs}function Mr(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Yo(){this.cb=this.a=0,this.sc="",this.m=new nt,this.Od=new ur,this.Kc=new wr,this.ed=new ss,this.Qa=new Rr,this.Ic=this.$c=this.Aa=0,this.D=new Pr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,nt),this.ia=0,this.pb=o(4,$i),this.Pa=new un,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Mr),this.Hd=0,this.rb=Array(new Ki),this.sb=0,this.wa=Array(new pi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ni),this.L=this.aa=0,this.gd=a([4,2],pi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Xs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function An(){var w=new Yo;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,sr||(sr=mi)),w}function Pn(w,T,q){return w.a==0&&(w.a=T,w.sc=q,w.cb=0),0}function En(w,T,q){return 3<=q&&w[T+0]==157&&w[T+1]==1&&w[T+2]==42}function gi(w,T){if(w==null)return 0;if(w.a=0,w.sc="OK",T==null)return Pn(w,2,"null VP8Io passed to VP8GetHeaders()");var q=T.data,ce=T.w,Le=T.ha;if(4>Le)return Pn(w,7,"Truncated header.");var Me=q[ce+0]|q[ce+1]<<8|q[ce+2]<<16,Ae=w.Od;if(Ae.Rb=!(1&Me),Ae.td=Me>>1&7,Ae.yd=Me>>4&1,Ae.ub=Me>>5,3<Ae.td)return Pn(w,3,"Incorrect keyframe parameters.");if(!Ae.yd)return Pn(w,4,"Frame not displayable.");ce+=3,Le-=3;var Oe=w.Kc;if(Ae.Rb){if(7>Le)return Pn(w,7,"cannot parse picture header");if(!En(q,ce,Le))return Pn(w,3,"Bad code word");Oe.c=16383&(q[ce+4]<<8|q[ce+3]),Oe.Td=q[ce+4]>>6,Oe.i=16383&(q[ce+6]<<8|q[ce+5]),Oe.Ud=q[ce+6]>>6,ce+=7,Le-=7,w.za=Oe.c+15>>4,w.Ub=Oe.i+15>>4,T.width=Oe.c,T.height=Oe.i,T.Da=0,T.j=0,T.v=0,T.va=T.width,T.o=T.height,T.da=0,T.ib=T.width,T.hb=T.height,T.U=T.width,T.T=T.height,i((Me=w.Pa).jb,0,255,Me.jb.length),e((Me=w.Qa)!=null),Me.Cb=0,Me.Bb=0,Me.Fb=1,i(Me.Zb,0,0,Me.Zb.length),i(Me.Lb,0,0,Me.Lb)}if(Ae.ub>Le)return Pn(w,7,"bad partition length");U(Me=w.m,q,ce,Ae.ub),ce+=Ae.ub,Le-=Ae.ub,Ae.Rb&&(Oe.Ld=X(Me),Oe.Kd=X(Me)),Oe=w.Qa;var Be,Ke=w.Pa;if(e(Me!=null),e(Oe!=null),Oe.Cb=X(Me),Oe.Cb){if(Oe.Bb=X(Me),X(Me)){for(Oe.Fb=X(Me),Be=0;4>Be;++Be)Oe.Zb[Be]=X(Me)?re(Me,7):0;for(Be=0;4>Be;++Be)Oe.Lb[Be]=X(Me)?re(Me,6):0}if(Oe.Bb)for(Be=0;3>Be;++Be)Ke.jb[Be]=X(Me)?$(Me,8):255}else Oe.Bb=0;if(Me.Ka)return Pn(w,3,"cannot parse segment header");if((Oe=w.ed).zd=X(Me),Oe.Tb=$(Me,6),Oe.wb=$(Me,3),Oe.Pc=X(Me),Oe.Pc&&X(Me)){for(Ke=0;4>Ke;++Ke)X(Me)&&(Oe.vd[Ke]=re(Me,6));for(Ke=0;4>Ke;++Ke)X(Me)&&(Oe.od[Ke]=re(Me,6))}if(w.L=Oe.Tb==0?0:Oe.zd?1:2,Me.Ka)return Pn(w,3,"cannot parse filter header");var gt=Le;if(Le=Be=ce,ce=Be+gt,Oe=gt,w.Xb=(1<<$(w.m,2))-1,gt<3*(Ke=w.Xb))q=7;else{for(Be+=3*Ke,Oe-=3*Ke,gt=0;gt<Ke;++gt){var Ft=q[Le+0]|q[Le+1]<<8|q[Le+2]<<16;Ft>Oe&&(Ft=Oe),U(w.Jc[+gt],q,Be,Ft),Be+=Ft,Oe-=Ft,Le+=3}U(w.Jc[+Ke],q,Be,Oe),q=Be<ce?0:5}if(q!=0)return Pn(w,q,"cannot parse partitions");for(q=$(Be=w.m,7),Le=X(Be)?re(Be,4):0,ce=X(Be)?re(Be,4):0,Oe=X(Be)?re(Be,4):0,Ke=X(Be)?re(Be,4):0,Be=X(Be)?re(Be,4):0,gt=w.Qa,Ft=0;4>Ft;++Ft){if(gt.Cb){var jt=gt.Zb[Ft];gt.Fb||(jt+=q)}else{if(0<Ft){w.pb[Ft]=w.pb[0];continue}jt=q}var Mt=w.pb[Ft];Mt.Sc[0]=hn[Hr(jt+Le,127)],Mt.Sc[1]=$n[Hr(jt+0,127)],Mt.Eb[0]=2*hn[Hr(jt+ce,127)],Mt.Eb[1]=101581*$n[Hr(jt+Oe,127)]>>16,8>Mt.Eb[1]&&(Mt.Eb[1]=8),Mt.Qc[0]=hn[Hr(jt+Ke,117)],Mt.Qc[1]=$n[Hr(jt+Be,127)],Mt.lc=jt+Be}if(!Ae.Rb)return Pn(w,4,"Not a key frame.");for(X(Me),Ae=w.Pa,q=0;4>q;++q){for(Le=0;8>Le;++Le)for(ce=0;3>ce;++ce)for(Oe=0;11>Oe;++Oe)Ke=J(Me,Bo[q][Le][ce][Oe])?$(Me,8):Gs[q][Le][ce][Oe],Ae.Wc[q][Le].Yb[ce][Oe]=Ke;for(Le=0;17>Le;++Le)Ae.Xc[q][Le]=Ae.Wc[q][sh[Le]]}return w.kc=X(Me),w.kc&&(w.Bd=$(Me,8)),w.cb=1}function mi(w,T,q,ce,Le,Me,Ae){var Oe=T[Le].Yb[q];for(q=0;16>Le;++Le){if(!J(w,Oe[q+0]))return Le;for(;!J(w,Oe[q+1]);)if(Oe=T[++Le].Yb[0],q=0,Le==16)return 16;var Be=T[Le+1].Yb;if(J(w,Oe[q+2])){var Ke=w,gt=0;if(J(Ke,(jt=Oe)[(Ft=q)+3]))if(J(Ke,jt[Ft+6])){for(Oe=0,Ft=2*(gt=J(Ke,jt[Ft+8]))+(jt=J(Ke,jt[Ft+9+gt])),gt=0,jt=jr[Ft];jt[Oe];++Oe)gt+=gt+J(Ke,jt[Oe]);gt+=3+(8<<Ft)}else J(Ke,jt[Ft+7])?(gt=7+2*J(Ke,165),gt+=J(Ke,145)):gt=5+J(Ke,159);else gt=J(Ke,jt[Ft+4])?3+J(Ke,jt[Ft+5]):2;Oe=Be[2]}else gt=1,Oe=Be[1];Be=Ae+Ms[Le],0>(Ke=w).b&&de(Ke);var Ft,jt=Ke.b,Mt=(Ft=Ke.Ca>>1)-(Ke.I>>jt)>>31;--Ke.b,Ke.Ca+=Mt,Ke.Ca|=1,Ke.I-=(Ft+1&Mt)<<jt,Me[Be]=((gt^Mt)-Mt)*ce[(0<Le)+0]}return 16}function Zi(w){var T=w.rb[w.sb-1];T.la=0,T.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function Xn(w,T){if(w==null)return 0;if(T==null)return Pn(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!gi(w,T))return 0;if(e(w.cb),T.ac==null||T.ac(T)){T.ob&&(w.L=0);var q=Qa[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=T.v-q>>4,w.zb=T.j-q>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=T.o+15+q>>4,w.Hb=T.va+15+q>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var ce=w.ed;for(q=0;4>q;++q){var Le;if(w.Qa.Cb){var Me=w.Qa.Lb[q];w.Qa.Fb||(Me+=ce.Tb)}else Me=ce.Tb;for(Le=0;1>=Le;++Le){var Ae=w.gd[q][Le],Oe=Me;if(ce.Pc&&(Oe+=ce.vd[0],Le&&(Oe+=ce.od[0])),0<(Oe=0>Oe?0:63<Oe?63:Oe)){var Be=Oe;0<ce.wb&&(Be=4<ce.wb?Be>>2:Be>>1)>9-ce.wb&&(Be=9-ce.wb),1>Be&&(Be=1),Ae.dd=Be,Ae.tc=2*Oe+Be,Ae.ld=40<=Oe?2:15<=Oe?1:0}else Ae.tc=0;Ae.La=Le}}}q=0}else Pn(w,6,"Frame setup failed"),q=w.a;if(q=q==0){if(q){w.$c=0,0<w.Aa||(w.Ic=Nf);e:{q=w.Ic,ce=4*(Be=w.za);var Ke=32*Be,gt=Be+1,Ft=0<w.L?Be*(0<w.Aa?2:1):0,jt=(w.Aa==2?2:1)*Be;if((Ae=ce+832+(Le=3*(16*q+Qa[w.L])/2*Ke)+(Me=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=Ae)q=0;else{if(Ae>w.Vb){if(w.Vb=0,w.Ec=s(Ae),w.Fc=0,w.Ec==null){q=Pn(w,1,"no memory during frame initialization.");break e}w.Vb=Ae}Ae=w.Ec,Oe=w.Fc,w.Ac=Ae,w.Bc=Oe,Oe+=ce,w.Gd=o(Ke,Mr),w.Hd=0,w.rb=o(gt+1,Ki),w.sb=1,w.wa=Ft?o(Ft,pi):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=Be),e(!0),w.oc=Ae,w.pc=Oe,Oe+=832,w.ya=o(jt,Ni),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=Be),w.R=16*Be,w.B=8*Be,Be=(Ke=Qa[w.L])*w.R,Ke=Ke/2*w.B,w.sa=Ae,w.ta=Oe+Be,w.qa=w.sa,w.ra=w.ta+16*q*w.R+Ke,w.Ha=w.qa,w.Ia=w.ra+8*q*w.B+Ke,w.$c=0,Oe+=Le,w.mb=Me?Ae:null,w.nb=Me?Oe:null,e(Oe+Me<=w.Fc+w.Vb),Zi(w),i(w.Ac,w.Bc,0,ce),q=1}}if(q){if(T.ka=0,T.y=w.sa,T.O=w.ta,T.f=w.qa,T.N=w.ra,T.ea=w.Ha,T.Vd=w.Ia,T.fa=w.R,T.Rc=w.B,T.F=null,T.J=0,!ec){for(q=-255;255>=q;++q)Ui[255+q]=0>q?-q:q;for(q=-1020;1020>=q;++q)ea[1020+q]=-128>q?-128:127<q?127:q;for(q=-112;112>=q;++q)No[112+q]=-16>q?-16:15<q?15:q;for(q=-255;510>=q;++q)aa[255+q]=0>q?0:255<q?255:q;ec=1}St=$r,qt=Ss,Rn=Yr,tr=bn,Sr=cn,It=us,Ji=Au,Ei=Ma,fu=oa,bo=hu,Qi=uu,Da=cu,Za=Li,Oa=kc,Na=ms,Ia=dr,ni=vs,ya=Il,wa[0]=Vr,wa[1]=Ao,wa[2]=xr,wa[3]=Ko,wa[4]=ml,wa[5]=Ha,wa[6]=ga,wa[7]=ei,wa[8]=Qs,wa[9]=Js,Ra[0]=Pa,Ra[1]=Ol,Ra[2]=Ns,Ra[3]=ia,Ra[4]=xi,Ra[5]=sa,Ra[6]=Do,la[0]=vl,la[1]=To,la[2]=ou,la[3]=Cr,la[4]=au,la[5]=Mc,la[6]=Mu,q=1}else q=0}q&&(q=function(Mt,Kt){for(Mt.M=0;Mt.M<Mt.Va;++Mt.M){var Wt,mt=Mt.Jc[Mt.M&Mt.Xb],xt=Mt.m,nn=Mt;for(Wt=0;Wt<nn.za;++Wt){var mn=xt,on=nn,Fn=on.Ac,Bn=on.Bc+4*Wt,or=on.zc,h=on.ya[on.aa+Wt];if(on.Qa.Bb?h.$b=J(mn,on.Pa.jb[0])?2+J(mn,on.Pa.jb[2]):J(mn,on.Pa.jb[1]):h.$b=0,on.kc&&(h.Ad=J(mn,on.Bd)),h.Za=!J(mn,145)+0,h.Za){var g=h.Ob,_=0;for(on=0;4>on;++on){var S,M=or[0+on];for(S=0;4>S;++S){M=es[Fn[Bn+S]][M];for(var W=cs[J(mn,M[0])];0<W;)W=cs[2*W+J(mn,M[W])];M=-W,Fn[Bn+S]=M}r(g,_,Fn,Bn,4),_+=4,or[0+on]=M}}else M=J(mn,156)?J(mn,128)?1:3:J(mn,163)?2:0,h.Ob[0]=M,i(Fn,Bn,M,4),i(or,0,M,4);h.Dd=J(mn,142)?J(mn,114)?J(mn,183)?1:3:2:0}if(nn.m.Ka)return Pn(Mt,7,"Premature end-of-partition0 encountered.");for(;Mt.ja<Mt.za;++Mt.ja){if(nn=mt,mn=(xt=Mt).rb[xt.sb-1],Fn=xt.rb[xt.sb+xt.ja],Wt=xt.ya[xt.aa+xt.ja],Bn=xt.kc?Wt.Ad:0)mn.la=Fn.la=0,Wt.Za||(mn.Na=Fn.Na=0),Wt.Hc=0,Wt.Gc=0,Wt.ia=0;else{var ne,oe;if(mn=Fn,Fn=nn,Bn=xt.Pa.Xc,or=xt.ya[xt.aa+xt.ja],h=xt.pb[or.$b],on=or.ad,g=0,_=xt.rb[xt.sb-1],M=S=0,i(on,g,0,384),or.Za)var ye=0,Ee=Bn[3];else{W=s(16);var tt=mn.Na+_.Na;if(tt=sr(Fn,Bn[1],tt,h.Eb,0,W,0),mn.Na=_.Na=(0<tt)+0,1<tt)St(W,0,on,g);else{var We=W[0]+3>>3;for(W=0;256>W;W+=16)on[g+W]=We}ye=1,Ee=Bn[0]}var _t=15&mn.la,Bt=15&_.la;for(W=0;4>W;++W){var Qt=1&Bt;for(We=oe=0;4>We;++We)_t=_t>>1|(Qt=(tt=sr(Fn,Ee,tt=Qt+(1&_t),h.Sc,ye,on,g))>ye)<<7,oe=oe<<2|(3<tt?3:1<tt?2:on[g+0]!=0),g+=16;_t>>=4,Bt=Bt>>1|Qt<<7,S=(S<<8|oe)>>>0}for(Ee=_t,ye=Bt>>4,ne=0;4>ne;ne+=2){for(oe=0,_t=mn.la>>4+ne,Bt=_.la>>4+ne,W=0;2>W;++W){for(Qt=1&Bt,We=0;2>We;++We)tt=Qt+(1&_t),_t=_t>>1|(Qt=0<(tt=sr(Fn,Bn[2],tt,h.Qc,0,on,g)))<<3,oe=oe<<2|(3<tt?3:1<tt?2:on[g+0]!=0),g+=16;_t>>=2,Bt=Bt>>1|Qt<<5}M|=oe<<4*ne,Ee|=_t<<4<<ne,ye|=(240&Bt)<<ne}mn.la=Ee,_.la=ye,or.Hc=S,or.Gc=M,or.ia=43690&M?0:h.ia,Bn=!(S|M)}if(0<xt.L&&(xt.wa[xt.Y+xt.ja]=xt.gd[Wt.$b][Wt.Za],xt.wa[xt.Y+xt.ja].La|=!Bn),nn.Ka)return Pn(Mt,7,"Premature end-of-file encountered.")}if(Zi(Mt),xt=Kt,nn=1,Wt=(mt=Mt).D,mn=0<mt.L&&mt.M>=mt.zb&&mt.M<=mt.Va,mt.Aa==0)e:{if(Wt.M=mt.M,Wt.uc=mn,Tu(mt,Wt),nn=1,Wt=(oe=mt.D).Nb,mn=(M=Qa[mt.L])*mt.R,Fn=M/2*mt.B,W=16*Wt*mt.R,We=8*Wt*mt.B,Bn=mt.sa,or=mt.ta-mn+W,h=mt.qa,on=mt.ra-Fn+We,g=mt.Ha,_=mt.Ia-Fn+We,Bt=(_t=oe.M)==0,S=_t>=mt.Va-1,mt.Aa==2&&Tu(mt,oe),oe.uc)for(Qt=(tt=mt).D.M,e(tt.D.uc),oe=tt.yb;oe<tt.Hb;++oe){ye=oe,Ee=Qt;var xn=(Tn=(ke=tt).D).Nb;ne=ke.R;var Tn=Tn.wa[Tn.Y+ye],pr=ke.sa,et=ke.ta+16*xn*ne+16*ye,st=Tn.dd,pt=Tn.tc;if(pt!=0)if(e(3<=pt),ke.L==1)0<ye&&Ia(pr,et,ne,pt+4),Tn.La&&ya(pr,et,ne,pt),0<Ee&&Na(pr,et,ne,pt+4),Tn.La&&ni(pr,et,ne,pt);else{var zt=ke.B,Pt=ke.qa,Rt=ke.ra+8*xn*zt+8*ye,be=ke.Ha,ke=ke.Ia+8*xn*zt+8*ye;xn=Tn.ld,0<ye&&(Ei(pr,et,ne,pt+4,st,xn),bo(Pt,Rt,be,ke,zt,pt+4,st,xn)),Tn.La&&(Da(pr,et,ne,pt,st,xn),Oa(Pt,Rt,be,ke,zt,pt,st,xn)),0<Ee&&(Ji(pr,et,ne,pt+4,st,xn),fu(Pt,Rt,be,ke,zt,pt+4,st,xn)),Tn.La&&(Qi(pr,et,ne,pt,st,xn),Za(Pt,Rt,be,ke,zt,pt,st,xn))}}if(mt.ia&&alert("todo:DitherRow"),xt.put!=null){if(oe=16*_t,_t=16*(_t+1),Bt?(xt.y=mt.sa,xt.O=mt.ta+W,xt.f=mt.qa,xt.N=mt.ra+We,xt.ea=mt.Ha,xt.W=mt.Ia+We):(oe-=M,xt.y=Bn,xt.O=or,xt.f=h,xt.N=on,xt.ea=g,xt.W=_),S||(_t-=M),_t>xt.o&&(_t=xt.o),xt.F=null,xt.J=null,mt.Fa!=null&&0<mt.Fa.length&&oe<_t&&(xt.J=ys(mt,xt,oe,_t-oe),xt.F=mt.mb,xt.F==null&&xt.F.length==0)){nn=Pn(mt,3,"Could not decode alpha data.");break e}oe<xt.j&&(M=xt.j-oe,oe=xt.j,e(!(1&M)),xt.O+=mt.R*M,xt.N+=mt.B*(M>>1),xt.W+=mt.B*(M>>1),xt.F!=null&&(xt.J+=xt.width*M)),oe<_t&&(xt.O+=xt.v,xt.N+=xt.v>>1,xt.W+=xt.v>>1,xt.F!=null&&(xt.J+=xt.v),xt.ka=oe-xt.j,xt.U=xt.va-xt.v,xt.T=_t-oe,nn=xt.put(xt))}Wt+1!=mt.Ic||S||(r(mt.sa,mt.ta-mn,Bn,or+16*mt.R,mn),r(mt.qa,mt.ra-Fn,h,on+8*mt.B,Fn),r(mt.Ha,mt.Ia-Fn,g,_+8*mt.B,Fn))}if(!nn)return Pn(Mt,6,"Output aborted.")}return 1}(w,T)),T.bc!=null&&T.bc(T),q&=1}return q?(w.cb=0,q):0}function kr(w,T,q,ce,Le){Le=w[T+q+32*ce]+(Le>>3),w[T+q+32*ce]=-256&Le?0>Le?0:255:Le}function zs(w,T,q,ce,Le,Me){kr(w,T,0,q,ce+Le),kr(w,T,1,q,ce+Me),kr(w,T,2,q,ce-Me),kr(w,T,3,q,ce-Le)}function vr(w){return(20091*w>>16)+w}function ps(w,T,q,ce){var Le,Me=0,Ae=s(16);for(Le=0;4>Le;++Le){var Oe=w[T+0]+w[T+8],Be=w[T+0]-w[T+8],Ke=(35468*w[T+4]>>16)-vr(w[T+12]),gt=vr(w[T+4])+(35468*w[T+12]>>16);Ae[Me+0]=Oe+gt,Ae[Me+1]=Be+Ke,Ae[Me+2]=Be-Ke,Ae[Me+3]=Oe-gt,Me+=4,T++}for(Le=Me=0;4>Le;++Le)Oe=(w=Ae[Me+0]+4)+Ae[Me+8],Be=w-Ae[Me+8],Ke=(35468*Ae[Me+4]>>16)-vr(Ae[Me+12]),kr(q,ce,0,0,Oe+(gt=vr(Ae[Me+4])+(35468*Ae[Me+12]>>16))),kr(q,ce,1,0,Be+Ke),kr(q,ce,2,0,Be-Ke),kr(q,ce,3,0,Oe-gt),Me++,ce+=32}function us(w,T,q,ce){var Le=w[T+0]+4,Me=35468*w[T+4]>>16,Ae=vr(w[T+4]),Oe=35468*w[T+1]>>16;zs(q,ce,0,Le+Ae,w=vr(w[T+1]),Oe),zs(q,ce,1,Le+Me,w,Oe),zs(q,ce,2,Le-Me,w,Oe),zs(q,ce,3,Le-Ae,w,Oe)}function Ss(w,T,q,ce,Le){ps(w,T,q,ce),Le&&ps(w,T+16,q,ce+4)}function Yr(w,T,q,ce){qt(w,T+0,q,ce,1),qt(w,T+32,q,ce+128,1)}function bn(w,T,q,ce){var Le;for(w=w[T+0]+4,Le=0;4>Le;++Le)for(T=0;4>T;++T)kr(q,ce,T,Le,w)}function cn(w,T,q,ce){w[T+0]&&tr(w,T+0,q,ce),w[T+16]&&tr(w,T+16,q,ce+4),w[T+32]&&tr(w,T+32,q,ce+128),w[T+48]&&tr(w,T+48,q,ce+128+4)}function $r(w,T,q,ce){var Le,Me=s(16);for(Le=0;4>Le;++Le){var Ae=w[T+0+Le]+w[T+12+Le],Oe=w[T+4+Le]+w[T+8+Le],Be=w[T+4+Le]-w[T+8+Le],Ke=w[T+0+Le]-w[T+12+Le];Me[0+Le]=Ae+Oe,Me[8+Le]=Ae-Oe,Me[4+Le]=Ke+Be,Me[12+Le]=Ke-Be}for(Le=0;4>Le;++Le)Ae=(w=Me[0+4*Le]+3)+Me[3+4*Le],Oe=Me[1+4*Le]+Me[2+4*Le],Be=Me[1+4*Le]-Me[2+4*Le],Ke=w-Me[3+4*Le],q[ce+0]=Ae+Oe>>3,q[ce+16]=Ke+Be>>3,q[ce+32]=Ae-Oe>>3,q[ce+48]=Ke-Be>>3,ce+=64}function Gi(w,T,q){var ce,Le=T-32,Me=Vi,Ae=255-w[Le-1];for(ce=0;ce<q;++ce){var Oe,Be=Me,Ke=Ae+w[T-1];for(Oe=0;Oe<q;++Oe)w[T+Oe]=Be[Ke+w[Le+Oe]];T+=32}}function Ao(w,T){Gi(w,T,4)}function To(w,T){Gi(w,T,8)}function Ol(w,T){Gi(w,T,16)}function Ns(w,T){var q;for(q=0;16>q;++q)r(w,T+32*q,w,T-32,16)}function ia(w,T){var q;for(q=16;0<q;--q)i(w,T,w[T-1],16),T+=32}function oi(w,T,q){var ce;for(ce=0;16>ce;++ce)i(T,q+32*ce,w,16)}function Pa(w,T){var q,ce=16;for(q=0;16>q;++q)ce+=w[T-1+32*q]+w[T+q-32];oi(ce>>5,w,T)}function xi(w,T){var q,ce=8;for(q=0;16>q;++q)ce+=w[T-1+32*q];oi(ce>>4,w,T)}function sa(w,T){var q,ce=8;for(q=0;16>q;++q)ce+=w[T+q-32];oi(ce>>4,w,T)}function Do(w,T){oi(128,w,T)}function yr(w,T,q){return w+2*T+q+2>>2}function xr(w,T){var q,ce=T-32;for(ce=new Uint8Array([yr(w[ce-1],w[ce+0],w[ce+1]),yr(w[ce+0],w[ce+1],w[ce+2]),yr(w[ce+1],w[ce+2],w[ce+3]),yr(w[ce+2],w[ce+3],w[ce+4])]),q=0;4>q;++q)r(w,T+32*q,ce,0,ce.length)}function Ko(w,T){var q=w[T-1],ce=w[T-1+32],Le=w[T-1+64],Me=w[T-1+96];De(w,T+0,16843009*yr(w[T-1-32],q,ce)),De(w,T+32,16843009*yr(q,ce,Le)),De(w,T+64,16843009*yr(ce,Le,Me)),De(w,T+96,16843009*yr(Le,Me,Me))}function Vr(w,T){var q,ce=4;for(q=0;4>q;++q)ce+=w[T+q-32]+w[T-1+32*q];for(ce>>=3,q=0;4>q;++q)i(w,T+32*q,ce,4)}function ml(w,T){var q=w[T-1+0],ce=w[T-1+32],Le=w[T-1+64],Me=w[T-1-32],Ae=w[T+0-32],Oe=w[T+1-32],Be=w[T+2-32],Ke=w[T+3-32];w[T+0+96]=yr(ce,Le,w[T-1+96]),w[T+1+96]=w[T+0+64]=yr(q,ce,Le),w[T+2+96]=w[T+1+64]=w[T+0+32]=yr(Me,q,ce),w[T+3+96]=w[T+2+64]=w[T+1+32]=w[T+0+0]=yr(Ae,Me,q),w[T+3+64]=w[T+2+32]=w[T+1+0]=yr(Oe,Ae,Me),w[T+3+32]=w[T+2+0]=yr(Be,Oe,Ae),w[T+3+0]=yr(Ke,Be,Oe)}function ga(w,T){var q=w[T+1-32],ce=w[T+2-32],Le=w[T+3-32],Me=w[T+4-32],Ae=w[T+5-32],Oe=w[T+6-32],Be=w[T+7-32];w[T+0+0]=yr(w[T+0-32],q,ce),w[T+1+0]=w[T+0+32]=yr(q,ce,Le),w[T+2+0]=w[T+1+32]=w[T+0+64]=yr(ce,Le,Me),w[T+3+0]=w[T+2+32]=w[T+1+64]=w[T+0+96]=yr(Le,Me,Ae),w[T+3+32]=w[T+2+64]=w[T+1+96]=yr(Me,Ae,Oe),w[T+3+64]=w[T+2+96]=yr(Ae,Oe,Be),w[T+3+96]=yr(Oe,Be,Be)}function Ha(w,T){var q=w[T-1+0],ce=w[T-1+32],Le=w[T-1+64],Me=w[T-1-32],Ae=w[T+0-32],Oe=w[T+1-32],Be=w[T+2-32],Ke=w[T+3-32];w[T+0+0]=w[T+1+64]=Me+Ae+1>>1,w[T+1+0]=w[T+2+64]=Ae+Oe+1>>1,w[T+2+0]=w[T+3+64]=Oe+Be+1>>1,w[T+3+0]=Be+Ke+1>>1,w[T+0+96]=yr(Le,ce,q),w[T+0+64]=yr(ce,q,Me),w[T+0+32]=w[T+1+96]=yr(q,Me,Ae),w[T+1+32]=w[T+2+96]=yr(Me,Ae,Oe),w[T+2+32]=w[T+3+96]=yr(Ae,Oe,Be),w[T+3+32]=yr(Oe,Be,Ke)}function ei(w,T){var q=w[T+0-32],ce=w[T+1-32],Le=w[T+2-32],Me=w[T+3-32],Ae=w[T+4-32],Oe=w[T+5-32],Be=w[T+6-32],Ke=w[T+7-32];w[T+0+0]=q+ce+1>>1,w[T+1+0]=w[T+0+64]=ce+Le+1>>1,w[T+2+0]=w[T+1+64]=Le+Me+1>>1,w[T+3+0]=w[T+2+64]=Me+Ae+1>>1,w[T+0+32]=yr(q,ce,Le),w[T+1+32]=w[T+0+96]=yr(ce,Le,Me),w[T+2+32]=w[T+1+96]=yr(Le,Me,Ae),w[T+3+32]=w[T+2+96]=yr(Me,Ae,Oe),w[T+3+64]=yr(Ae,Oe,Be),w[T+3+96]=yr(Oe,Be,Ke)}function Js(w,T){var q=w[T-1+0],ce=w[T-1+32],Le=w[T-1+64],Me=w[T-1+96];w[T+0+0]=q+ce+1>>1,w[T+2+0]=w[T+0+32]=ce+Le+1>>1,w[T+2+32]=w[T+0+64]=Le+Me+1>>1,w[T+1+0]=yr(q,ce,Le),w[T+3+0]=w[T+1+32]=yr(ce,Le,Me),w[T+3+32]=w[T+1+64]=yr(Le,Me,Me),w[T+3+64]=w[T+2+64]=w[T+0+96]=w[T+1+96]=w[T+2+96]=w[T+3+96]=Me}function Qs(w,T){var q=w[T-1+0],ce=w[T-1+32],Le=w[T-1+64],Me=w[T-1+96],Ae=w[T-1-32],Oe=w[T+0-32],Be=w[T+1-32],Ke=w[T+2-32];w[T+0+0]=w[T+2+32]=q+Ae+1>>1,w[T+0+32]=w[T+2+64]=ce+q+1>>1,w[T+0+64]=w[T+2+96]=Le+ce+1>>1,w[T+0+96]=Me+Le+1>>1,w[T+3+0]=yr(Oe,Be,Ke),w[T+2+0]=yr(Ae,Oe,Be),w[T+1+0]=w[T+3+32]=yr(q,Ae,Oe),w[T+1+32]=w[T+3+64]=yr(ce,q,Ae),w[T+1+64]=w[T+3+96]=yr(Le,ce,q),w[T+1+96]=yr(Me,Le,ce)}function ou(w,T){var q;for(q=0;8>q;++q)r(w,T+32*q,w,T-32,8)}function Cr(w,T){var q;for(q=0;8>q;++q)i(w,T,w[T-1],8),T+=32}function Kr(w,T,q){var ce;for(ce=0;8>ce;++ce)i(T,q+32*ce,w,8)}function vl(w,T){var q,ce=8;for(q=0;8>q;++q)ce+=w[T+q-32]+w[T-1+32*q];Kr(ce>>4,w,T)}function Mc(w,T){var q,ce=4;for(q=0;8>q;++q)ce+=w[T+q-32];Kr(ce>>3,w,T)}function au(w,T){var q,ce=4;for(q=0;8>q;++q)ce+=w[T-1+32*q];Kr(ce>>3,w,T)}function Mu(w,T){Kr(128,w,T)}function Nl(w,T,q){var ce=w[T-q],Le=w[T+0],Me=3*(Le-ce)+Ba[1020+w[T-2*q]-w[T+q]],Ae=Ps[112+(Me+4>>3)];w[T-q]=Vi[255+ce+Ps[112+(Me+3>>3)]],w[T+0]=Vi[255+Le-Ae]}function lu(w,T,q,ce){var Le=w[T+0],Me=w[T+q];return oo[255+w[T-2*q]-w[T-q]]>ce||oo[255+Me-Le]>ce}function ku(w,T,q,ce){return 4*oo[255+w[T-q]-w[T+0]]+oo[255+w[T-2*q]-w[T+q]]<=ce}function ti(w,T,q,ce,Le){var Me=w[T-3*q],Ae=w[T-2*q],Oe=w[T-q],Be=w[T+0],Ke=w[T+q],gt=w[T+2*q],Ft=w[T+3*q];return 4*oo[255+Oe-Be]+oo[255+Ae-Ke]>ce?0:oo[255+w[T-4*q]-Me]<=Le&&oo[255+Me-Ae]<=Le&&oo[255+Ae-Oe]<=Le&&oo[255+Ft-gt]<=Le&&oo[255+gt-Ke]<=Le&&oo[255+Ke-Be]<=Le}function ms(w,T,q,ce){var Le=2*ce+1;for(ce=0;16>ce;++ce)ku(w,T+ce,q,Le)&&Nl(w,T+ce,q)}function dr(w,T,q,ce){var Le=2*ce+1;for(ce=0;16>ce;++ce)ku(w,T+ce*q,1,Le)&&Nl(w,T+ce*q,1)}function vs(w,T,q,ce){var Le;for(Le=3;0<Le;--Le)ms(w,T+=4*q,q,ce)}function Il(w,T,q,ce){var Le;for(Le=3;0<Le;--Le)dr(w,T+=4,q,ce)}function Wa(w,T,q,ce,Le,Me,Ae,Oe){for(Me=2*Me+1;0<Le--;){if(ti(w,T,q,Me,Ae))if(lu(w,T,q,Oe))Nl(w,T,q);else{var Be=w,Ke=T,gt=q,Ft=Be[Ke-2*gt],jt=Be[Ke-gt],Mt=Be[Ke+0],Kt=Be[Ke+gt],Wt=Be[Ke+2*gt],mt=27*(nn=Ba[1020+3*(Mt-jt)+Ba[1020+Ft-Kt]])+63>>7,xt=18*nn+63>>7,nn=9*nn+63>>7;Be[Ke-3*gt]=Vi[255+Be[Ke-3*gt]+nn],Be[Ke-2*gt]=Vi[255+Ft+xt],Be[Ke-gt]=Vi[255+jt+mt],Be[Ke+0]=Vi[255+Mt-mt],Be[Ke+gt]=Vi[255+Kt-xt],Be[Ke+2*gt]=Vi[255+Wt-nn]}T+=ce}}function Xi(w,T,q,ce,Le,Me,Ae,Oe){for(Me=2*Me+1;0<Le--;){if(ti(w,T,q,Me,Ae))if(lu(w,T,q,Oe))Nl(w,T,q);else{var Be=w,Ke=T,gt=q,Ft=Be[Ke-gt],jt=Be[Ke+0],Mt=Be[Ke+gt],Kt=Ps[112+((Wt=3*(jt-Ft))+4>>3)],Wt=Ps[112+(Wt+3>>3)],mt=Kt+1>>1;Be[Ke-2*gt]=Vi[255+Be[Ke-2*gt]+mt],Be[Ke-gt]=Vi[255+Ft+Wt],Be[Ke+0]=Vi[255+jt-Kt],Be[Ke+gt]=Vi[255+Mt-mt]}T+=ce}}function Au(w,T,q,ce,Le,Me){Wa(w,T,q,1,16,ce,Le,Me)}function Ma(w,T,q,ce,Le,Me){Wa(w,T,1,q,16,ce,Le,Me)}function uu(w,T,q,ce,Le,Me){var Ae;for(Ae=3;0<Ae;--Ae)Xi(w,T+=4*q,q,1,16,ce,Le,Me)}function cu(w,T,q,ce,Le,Me){var Ae;for(Ae=3;0<Ae;--Ae)Xi(w,T+=4,1,q,16,ce,Le,Me)}function oa(w,T,q,ce,Le,Me,Ae,Oe){Wa(w,T,Le,1,8,Me,Ae,Oe),Wa(q,ce,Le,1,8,Me,Ae,Oe)}function hu(w,T,q,ce,Le,Me,Ae,Oe){Wa(w,T,1,Le,8,Me,Ae,Oe),Wa(q,ce,1,Le,8,Me,Ae,Oe)}function Li(w,T,q,ce,Le,Me,Ae,Oe){Xi(w,T+4*Le,Le,1,8,Me,Ae,Oe),Xi(q,ce+4*Le,Le,1,8,Me,Ae,Oe)}function kc(w,T,q,ce,Le,Me,Ae,Oe){Xi(w,T+4,1,Le,8,Me,Ae,Oe),Xi(q,ce+4,1,Le,8,Me,Ae,Oe)}function $s(){this.ba=new rr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new _r,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ma(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function du(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function va(){this.ua=0,this.Wa=new le,this.vb=new le,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new N}function Bl(){this.xb=this.a=0,this.l=new Xs,this.ca=new rr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ae,this.Pb=0,this.wd=new ae,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new va,this.ab=0,this.gc=o(4,du),this.Oc=0}function Rl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Xs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Si(w,T,q,ce,Le,Me,Ae){for(w=w==null?0:w[T+0],T=0;T<Ae;++T)Le[Me+T]=w+q[ce+T]&255,w=Le[Me+T]}function Zo(w,T,q,ce,Le,Me,Ae){var Oe;if(w==null)Si(null,null,q,ce,Le,Me,Ae);else for(Oe=0;Oe<Ae;++Oe)Le[Me+Oe]=w[T+Oe]+q[ce+Oe]&255}function Ga(w,T,q,ce,Le,Me,Ae){if(w==null)Si(null,null,q,ce,Le,Me,Ae);else{var Oe,Be=w[T+0],Ke=Be,gt=Be;for(Oe=0;Oe<Ae;++Oe)Ke=gt+(Be=w[T+Oe])-Ke,gt=q[ce+Oe]+(-256&Ke?0>Ke?0:255:Ke)&255,Ke=Be,Le[Me+Oe]=gt}}function ys(w,T,q,ce){var Le=T.width,Me=T.o;if(e(w!=null&&T!=null),0>q||0>=ce||q+ce>Me)return null;if(!w.Cc){if(w.ga==null){var Ae;if(w.ga=new Rl,(Ae=w.ga==null)||(Ae=T.width*T.o,e(w.Gb.length==0),w.Gb=s(Ae),w.Uc=0,w.Gb==null?Ae=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Ae=1),Ae=!Ae),!Ae){Ae=w.ga;var Oe=w.Fa,Be=w.P,Ke=w.qc,gt=w.mb,Ft=w.nb,jt=Be+1,Mt=Ke-1,Kt=Ae.l;if(e(Oe!=null&&gt!=null&&T!=null),bi[0]=null,bi[1]=Si,bi[2]=Zo,bi[3]=Ga,Ae.ca=gt,Ae.tb=Ft,Ae.c=T.width,Ae.i=T.height,e(0<Ae.c&&0<Ae.i),1>=Ke)T=0;else if(Ae.$a=Oe[Be+0]>>0&3,Ae.Z=Oe[Be+0]>>2&3,Ae.Lc=Oe[Be+0]>>4&3,Be=Oe[Be+0]>>6&3,0>Ae.$a||1<Ae.$a||4<=Ae.Z||1<Ae.Lc||Be)T=0;else if(Kt.put=ft,Kt.ac=ls,Kt.bc=rt,Kt.ma=Ae,Kt.width=T.width,Kt.height=T.height,Kt.Da=T.Da,Kt.v=T.v,Kt.va=T.va,Kt.j=T.j,Kt.o=T.o,Ae.$a)e:{e(Ae.$a==1),T=zr();t:for(;;){if(T==null){T=0;break e}if(e(Ae!=null),Ae.mc=T,T.c=Ae.c,T.i=Ae.i,T.l=Ae.l,T.l.ma=Ae,T.l.width=Ae.c,T.l.height=Ae.i,T.a=0,Q(T.m,Oe,jt,Mt),!ki(Ae.c,Ae.i,1,T,null)||(T.ab==1&&T.gc[0].hc==3&&Ln(T.s)?(Ae.ic=1,Oe=T.c*T.i,T.Ta=null,T.Ua=0,T.V=s(Oe),T.Ba=0,T.V==null?(T.a=1,T=0):T=1):(Ae.ic=0,T=zi(T,Ae.c)),!T))break t;T=1;break e}Ae.mc=null,T=0}else T=Mt>=Ae.c*Ae.i;Ae=!T}if(Ae)return null;w.ga.Lc!=1?w.Ga=0:ce=Me-q}e(w.ga!=null),e(q+ce<=Me);e:{if(T=(Oe=w.ga).c,Me=Oe.l.o,Oe.$a==0){if(jt=w.rc,Mt=w.Vc,Kt=w.Fa,Be=w.P+1+q*T,Ke=w.mb,gt=w.nb+q*T,e(Be<=w.P+w.qc),Oe.Z!=0)for(e(bi[Oe.Z]!=null),Ae=0;Ae<ce;++Ae)bi[Oe.Z](jt,Mt,Kt,Be,Ke,gt,T),jt=Ke,Mt=gt,gt+=T,Be+=T;else for(Ae=0;Ae<ce;++Ae)r(Ke,gt,Kt,Be,T),jt=Ke,Mt=gt,gt+=T,Be+=T;w.rc=jt,w.Vc=Mt}else{if(e(Oe.mc!=null),T=q+ce,e((Ae=Oe.mc)!=null),e(T<=Ae.i),Ae.C>=T)T=1;else if(Oe.ic||kt(),Oe.ic){Oe=Ae.V,jt=Ae.Ba,Mt=Ae.c;var Wt=Ae.i,mt=(Kt=1,Be=Ae.$/Mt,Ke=Ae.$%Mt,gt=Ae.m,Ft=Ae.s,Ae.$),xt=Mt*Wt,nn=Mt*T,mn=Ft.wc,on=mt<nn?Et(Ft,Ke,Be):null;e(mt<=xt),e(T<=Wt),e(Ln(Ft));t:for(;;){for(;!gt.h&&mt<nn;){if(Ke&mn||(on=Et(Ft,Ke,Be)),e(on!=null),pe(gt),256>(Wt=wn(on.G[0],on.H[0],gt)))Oe[jt+mt]=Wt,++mt,++Ke>=Mt&&(Ke=0,++Be<=T&&!(Be%16)&&sn(Ae,Be));else{if(!(280>Wt)){Kt=0;break t}Wt=kn(Wt-256,gt);var Fn,Bn=wn(on.G[4],on.H[4],gt);if(pe(gt),!(mt>=(Bn=Hn(Mt,Bn=kn(Bn,gt)))&&xt-mt>=Wt)){Kt=0;break t}for(Fn=0;Fn<Wt;++Fn)Oe[jt+mt+Fn]=Oe[jt+mt+Fn-Bn];for(mt+=Wt,Ke+=Wt;Ke>=Mt;)Ke-=Mt,++Be<=T&&!(Be%16)&&sn(Ae,Be);mt<nn&&Ke&mn&&(on=Et(Ft,Ke,Be))}e(gt.h==Z(gt))}sn(Ae,Be>T?T:Be);break t}!Kt||gt.h&&mt<xt?(Kt=0,Ae.a=gt.h?5:3):Ae.$=mt,T=Kt}else T=tn(Ae,Ae.V,Ae.Ba,Ae.c,Ae.i,T,Qr);if(!T){ce=0;break e}}q+ce>=Me&&(w.Cc=1),ce=1}if(!ce)return null;if(w.Cc&&((ce=w.ga)!=null&&(ce.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+q*Le}function R(w,T,q,ce,Le,Me){for(;0<Le--;){var Ae,Oe=w,Be=T+(q?1:0),Ke=w,gt=T+(q?0:3);for(Ae=0;Ae<ce;++Ae){var Ft=Ke[gt+4*Ae];Ft!=255&&(Ft*=32897,Oe[Be+4*Ae+0]=Oe[Be+4*Ae+0]*Ft>>23,Oe[Be+4*Ae+1]=Oe[Be+4*Ae+1]*Ft>>23,Oe[Be+4*Ae+2]=Oe[Be+4*Ae+2]*Ft>>23)}T+=Me}}function xe(w,T,q,ce,Le){for(;0<ce--;){var Me;for(Me=0;Me<q;++Me){var Ae=w[T+2*Me+0],Oe=15&(Ke=w[T+2*Me+1]),Be=4369*Oe,Ke=(240&Ke|Ke>>4)*Be>>16;w[T+2*Me+0]=(240&Ae|Ae>>4)*Be>>16&240|(15&Ae|Ae<<4)*Be>>16>>4&15,w[T+2*Me+1]=240&Ke|Oe}T+=Le}}function Qe(w,T,q,ce,Le,Me,Ae,Oe){var Be,Ke,gt=255;for(Ke=0;Ke<Le;++Ke){for(Be=0;Be<ce;++Be){var Ft=w[T+Be];Me[Ae+4*Be]=Ft,gt&=Ft}T+=q,Ae+=Oe}return gt!=255}function dt(w,T,q,ce,Le){var Me;for(Me=0;Me<Le;++Me)q[ce+Me]=w[T+Me]>>8}function kt(){Us=R,Pi=xe,Ii=Qe,_s=dt}function Ut(w,T,q){I[w]=function(ce,Le,Me,Ae,Oe,Be,Ke,gt,Ft,jt,Mt,Kt,Wt,mt,xt,nn,mn){var on,Fn=mn-1>>1,Bn=Oe[Be+0]|Ke[gt+0]<<16,or=Ft[jt+0]|Mt[Kt+0]<<16;e(ce!=null);var h=3*Bn+or+131074>>2;for(T(ce[Le+0],255&h,h>>16,Wt,mt),Me!=null&&(h=3*or+Bn+131074>>2,T(Me[Ae+0],255&h,h>>16,xt,nn)),on=1;on<=Fn;++on){var g=Oe[Be+on]|Ke[gt+on]<<16,_=Ft[jt+on]|Mt[Kt+on]<<16,S=Bn+g+or+_+524296,M=S+2*(g+or)>>3;h=M+Bn>>1,Bn=(S=S+2*(Bn+_)>>3)+g>>1,T(ce[Le+2*on-1],255&h,h>>16,Wt,mt+(2*on-1)*q),T(ce[Le+2*on-0],255&Bn,Bn>>16,Wt,mt+(2*on-0)*q),Me!=null&&(h=S+or>>1,Bn=M+_>>1,T(Me[Ae+2*on-1],255&h,h>>16,xt,nn+(2*on-1)*q),T(Me[Ae+2*on+0],255&Bn,Bn>>16,xt,nn+(2*on+0)*q)),Bn=g,or=_}1&mn||(h=3*Bn+or+131074>>2,T(ce[Le+mn-1],255&h,h>>16,Wt,mt+(mn-1)*q),Me!=null&&(h=3*or+Bn+131074>>2,T(Me[Ae+mn-1],255&h,h>>16,xt,nn+(mn-1)*q)))}}function pn(){ao[Io]=Ne,ao[mr]=tc,ao[Xa]=Ro,ao[Ja]=qs,ao[ba]=Wr,ao[_o]=Vh,ao[ih]=Af,ao[Hs]=tc,ao[Ws]=qs,ao[_a]=Wr,ao[u]=Vh}function zn(w){return w&-16384?0>w?0:255:w>>Up}function Wn(w,T){return zn((19077*w>>8)+(26149*T>>8)-14234)}function cr(w,T,q){return zn((19077*w>>8)-(6419*T>>8)-(13320*q>>8)+8708)}function br(w,T){return zn((19077*w>>8)+(33050*T>>8)-17685)}function Ur(w,T,q,ce,Le){ce[Le+0]=Wn(w,q),ce[Le+1]=cr(w,T,q),ce[Le+2]=br(w,T)}function qi(w,T,q,ce,Le){ce[Le+0]=br(w,T),ce[Le+1]=cr(w,T,q),ce[Le+2]=Wn(w,q)}function vi(w,T,q,ce,Le){var Me=cr(w,T,q);T=Me<<3&224|br(w,T)>>3,ce[Le+0]=248&Wn(w,q)|Me>>5,ce[Le+1]=T}function Ci(w,T,q,ce,Le){var Me=240&br(w,T)|15;ce[Le+0]=240&Wn(w,q)|cr(w,T,q)>>4,ce[Le+1]=Me}function bs(w,T,q,ce,Le){ce[Le+0]=255,Ur(w,T,q,ce,Le+1)}function Cs(w,T,q,ce,Le){qi(w,T,q,ce,Le),ce[Le+3]=255}function Xo(w,T,q,ce,Le){Ur(w,T,q,ce,Le),ce[Le+3]=255}function Hr(w,T){return 0>w?0:w>T?T:w}function eo(w,T,q){I[w]=function(ce,Le,Me,Ae,Oe,Be,Ke,gt,Ft){for(var jt=gt+(-2&Ft)*q;gt!=jt;)T(ce[Le+0],Me[Ae+0],Oe[Be+0],Ke,gt),T(ce[Le+1],Me[Ae+0],Oe[Be+0],Ke,gt+q),Le+=2,++Ae,++Be,gt+=2*q;1&Ft&&T(ce[Le+0],Me[Ae+0],Oe[Be+0],Ke,gt)}}function Fl(w,T,q){return q==0?w==0?T==0?6:5:T==0?4:0:q}function mo(w,T,q,ce,Le){switch(w>>>30){case 3:qt(T,q,ce,Le,0);break;case 2:It(T,q,ce,Le);break;case 1:tr(T,q,ce,Le)}}function Tu(w,T){var q,ce,Le=T.M,Me=T.Nb,Ae=w.oc,Oe=w.pc+40,Be=w.oc,Ke=w.pc+584,gt=w.oc,Ft=w.pc+600;for(q=0;16>q;++q)Ae[Oe+32*q-1]=129;for(q=0;8>q;++q)Be[Ke+32*q-1]=129,gt[Ft+32*q-1]=129;for(0<Le?Ae[Oe-1-32]=Be[Ke-1-32]=gt[Ft-1-32]=129:(i(Ae,Oe-32-1,127,21),i(Be,Ke-32-1,127,9),i(gt,Ft-32-1,127,9)),ce=0;ce<w.za;++ce){var jt=T.ya[T.aa+ce];if(0<ce){for(q=-1;16>q;++q)r(Ae,Oe+32*q-4,Ae,Oe+32*q+12,4);for(q=-1;8>q;++q)r(Be,Ke+32*q-4,Be,Ke+32*q+4,4),r(gt,Ft+32*q-4,gt,Ft+32*q+4,4)}var Mt=w.Gd,Kt=w.Hd+ce,Wt=jt.ad,mt=jt.Hc;if(0<Le&&(r(Ae,Oe-32,Mt[Kt].y,0,16),r(Be,Ke-32,Mt[Kt].f,0,8),r(gt,Ft-32,Mt[Kt].ea,0,8)),jt.Za){var xt=Ae,nn=Oe-32+16;for(0<Le&&(ce>=w.za-1?i(xt,nn,Mt[Kt].y[15],4):r(xt,nn,Mt[Kt+1].y,0,4)),q=0;4>q;q++)xt[nn+128+q]=xt[nn+256+q]=xt[nn+384+q]=xt[nn+0+q];for(q=0;16>q;++q,mt<<=2)xt=Ae,nn=Oe+Df[q],wa[jt.Ob[q]](xt,nn),mo(mt,Wt,16*+q,xt,nn)}else if(xt=Fl(ce,Le,jt.Ob[0]),Ra[xt](Ae,Oe),mt!=0)for(q=0;16>q;++q,mt<<=2)mo(mt,Wt,16*+q,Ae,Oe+Df[q]);for(q=jt.Gc,xt=Fl(ce,Le,jt.Dd),la[xt](Be,Ke),la[xt](gt,Ft),mt=Wt,xt=Be,nn=Ke,255&(jt=q>>0)&&(170&jt?Rn(mt,256,xt,nn):Sr(mt,256,xt,nn)),jt=gt,mt=Ft,255&(q>>=8)&&(170&q?Rn(Wt,320,jt,mt):Sr(Wt,320,jt,mt)),Le<w.Ub-1&&(r(Mt[Kt].y,0,Ae,Oe+480,16),r(Mt[Kt].f,0,Be,Ke+224,8),r(Mt[Kt].ea,0,gt,Ft+224,8)),q=8*Me*w.B,Mt=w.sa,Kt=w.ta+16*ce+16*Me*w.R,Wt=w.qa,jt=w.ra+8*ce+q,mt=w.Ha,xt=w.Ia+8*ce+q,q=0;16>q;++q)r(Mt,Kt+q*w.R,Ae,Oe+32*q,16);for(q=0;8>q;++q)r(Wt,jt+q*w.B,Be,Ke+32*q,8),r(mt,xt+q*w.B,gt,Ft+32*q,8)}}function ka(w,T,q,ce,Le,Me,Ae,Oe,Be){var Ke=[0],gt=[0],Ft=0,jt=Be!=null?Be.kd:0,Mt=Be??new ma;if(w==null||12>q)return 7;Mt.data=w,Mt.w=T,Mt.ha=q,T=[T],q=[q],Mt.gb=[Mt.gb];e:{var Kt=T,Wt=q,mt=Mt.gb;if(e(w!=null),e(Wt!=null),e(mt!=null),mt[0]=0,12<=Wt[0]&&!n(w,Kt[0],"RIFF")){if(n(w,Kt[0]+8,"WEBP")){mt=3;break e}var xt=he(w,Kt[0]+4);if(12>xt||4294967286<xt){mt=3;break e}if(jt&&xt>Wt[0]-8){mt=7;break e}mt[0]=xt,Kt[0]+=12,Wt[0]-=12}mt=0}if(mt!=0)return mt;for(xt=0<Mt.gb[0],q=q[0];;){e:{var nn=w;Wt=T,mt=q;var mn=Ke,on=gt,Fn=Kt=[0];if((h=Ft=[Ft])[0]=0,8>mt[0])mt=7;else{if(!n(nn,Wt[0],"VP8X")){if(he(nn,Wt[0]+4)!=10){mt=3;break e}if(18>mt[0]){mt=7;break e}var Bn=he(nn,Wt[0]+8),or=1+Je(nn,Wt[0]+12);if(2147483648<=or*(nn=1+Je(nn,Wt[0]+15))){mt=3;break e}Fn!=null&&(Fn[0]=Bn),mn!=null&&(mn[0]=or),on!=null&&(on[0]=nn),Wt[0]+=18,mt[0]-=18,h[0]=1}mt=0}}if(Ft=Ft[0],Kt=Kt[0],mt!=0)return mt;if(Wt=!!(2&Kt),!xt&&Ft)return 3;if(Me!=null&&(Me[0]=!!(16&Kt)),Ae!=null&&(Ae[0]=Wt),Oe!=null&&(Oe[0]=0),Ae=Ke[0],Kt=gt[0],Ft&&Wt&&Be==null){mt=0;break}if(4>q){mt=7;break}if(xt&&Ft||!xt&&!Ft&&!n(w,T[0],"ALPH")){q=[q],Mt.na=[Mt.na],Mt.P=[Mt.P],Mt.Sa=[Mt.Sa];e:{Bn=w,mt=T,xt=q;var h=Mt.gb;mn=Mt.na,on=Mt.P,Fn=Mt.Sa,or=22,e(Bn!=null),e(xt!=null),nn=mt[0];var g=xt[0];for(e(mn!=null),e(Fn!=null),mn[0]=null,on[0]=null,Fn[0]=0;;){if(mt[0]=nn,xt[0]=g,8>g){mt=7;break e}var _=he(Bn,nn+4);if(4294967286<_){mt=3;break e}var S=8+_+1&-2;if(or+=S,0<h&&or>h){mt=3;break e}if(!n(Bn,nn,"VP8 ")||!n(Bn,nn,"VP8L")){mt=0;break e}if(g[0]<S){mt=7;break e}n(Bn,nn,"ALPH")||(mn[0]=Bn,on[0]=nn+8,Fn[0]=_),nn+=S,g-=S}}if(q=q[0],Mt.na=Mt.na[0],Mt.P=Mt.P[0],Mt.Sa=Mt.Sa[0],mt!=0)break}q=[q],Mt.Ja=[Mt.Ja],Mt.xa=[Mt.xa];e:if(h=w,mt=T,xt=q,mn=Mt.gb[0],on=Mt.Ja,Fn=Mt.xa,Bn=mt[0],nn=!n(h,Bn,"VP8 "),or=!n(h,Bn,"VP8L"),e(h!=null),e(xt!=null),e(on!=null),e(Fn!=null),8>xt[0])mt=7;else{if(nn||or){if(h=he(h,Bn+4),12<=mn&&h>mn-12){mt=3;break e}if(jt&&h>xt[0]-8){mt=7;break e}on[0]=h,mt[0]+=8,xt[0]-=8,Fn[0]=or}else Fn[0]=5<=xt[0]&&h[Bn+0]==47&&!(h[Bn+4]>>5),on[0]=xt[0];mt=0}if(q=q[0],Mt.Ja=Mt.Ja[0],Mt.xa=Mt.xa[0],T=T[0],mt!=0)break;if(4294967286<Mt.Ja)return 3;if(Oe==null||Wt||(Oe[0]=Mt.xa?2:1),Ae=[Ae],Kt=[Kt],Mt.xa){if(5>q){mt=7;break}Oe=Ae,jt=Kt,Wt=Me,w==null||5>q?w=0:5<=q&&w[T+0]==47&&!(w[T+4]>>5)?(xt=[0],h=[0],mn=[0],Q(on=new ae,w,T,q),wt(on,xt,h,mn)?(Oe!=null&&(Oe[0]=xt[0]),jt!=null&&(jt[0]=h[0]),Wt!=null&&(Wt[0]=mn[0]),w=1):w=0):w=0}else{if(10>q){mt=7;break}Oe=Kt,w==null||10>q||!En(w,T+3,q-3)?w=0:(jt=w[T+0]|w[T+1]<<8|w[T+2]<<16,Wt=16383&(w[T+7]<<8|w[T+6]),w=16383&(w[T+9]<<8|w[T+8]),1&jt||3<(jt>>1&7)||!(jt>>4&1)||jt>>5>=Mt.Ja||!Wt||!w?w=0:(Ae&&(Ae[0]=Wt),Oe&&(Oe[0]=w),w=1))}if(!w||(Ae=Ae[0],Kt=Kt[0],Ft&&(Ke[0]!=Ae||gt[0]!=Kt)))return 3;Be!=null&&(Be[0]=Mt,Be.offset=T-Be.w,e(4294967286>T-Be.w),e(Be.offset==Be.ha-q));break}return mt==0||mt==7&&Ft&&Be==null?(Me!=null&&(Me[0]|=Mt.na!=null&&0<Mt.na.length),ce!=null&&(ce[0]=Ae),Le!=null&&(Le[0]=Kt),0):mt}function Qu(w,T,q){var ce=T.width,Le=T.height,Me=0,Ae=0,Oe=ce,Be=Le;if(T.Da=w!=null&&0<w.Da,T.Da&&(Oe=w.cd,Be=w.bd,Me=w.v,Ae=w.j,11>q||(Me&=-2,Ae&=-2),0>Me||0>Ae||0>=Oe||0>=Be||Me+Oe>ce||Ae+Be>Le))return 0;if(T.v=Me,T.j=Ae,T.va=Me+Oe,T.o=Ae+Be,T.U=Oe,T.T=Be,T.da=w!=null&&0<w.da,T.da){if(!ze(Oe,Be,q=[w.ib],Me=[w.hb]))return 0;T.ib=q[0],T.hb=Me[0]}return T.ob=w!=null&&w.ob,T.Kb=w==null||!w.Sd,T.da&&(T.ob=T.ib<3*ce/4&&T.hb<3*Le/4,T.Kb=0),1}function yl(w){if(w==null)return 2;if(11>w.S){var T=w.f.RGBA;T.fb+=(w.height-1)*T.A,T.A=-T.A}else T=w.f.kb,w=w.height,T.O+=(w-1)*T.fa,T.fa=-T.fa,T.N+=(w-1>>1)*T.Ab,T.Ab=-T.Ab,T.W+=(w-1>>1)*T.Db,T.Db=-T.Db,T.F!=null&&(T.J+=(w-1)*T.lb,T.lb=-T.lb);return 0}function bl(w,T,q,ce){if(ce==null||0>=w||0>=T)return 2;if(q!=null){if(q.Da){var Le=q.cd,Me=q.bd,Ae=-2&q.v,Oe=-2&q.j;if(0>Ae||0>Oe||0>=Le||0>=Me||Ae+Le>w||Oe+Me>T)return 2;w=Le,T=Me}if(q.da){if(!ze(w,T,Le=[q.ib],Me=[q.hb]))return 2;w=Le[0],T=Me[0]}}ce.width=w,ce.height=T;e:{var Be=ce.width,Ke=ce.height;if(w=ce.S,0>=Be||0>=Ke||!(w>=Io&&13>w))w=2;else{if(0>=ce.Rd&&ce.sd==null){Ae=Me=Le=T=0;var gt=(Oe=Be*If[w])*Ke;if(11>w||(Me=(Ke+1)/2*(T=(Be+1)/2),w==12&&(Ae=(Le=Be)*Ke)),(Ke=s(gt+2*Me+Ae))==null){w=1;break e}ce.sd=Ke,11>w?((Be=ce.f.RGBA).eb=Ke,Be.fb=0,Be.A=Oe,Be.size=gt):((Be=ce.f.kb).y=Ke,Be.O=0,Be.fa=Oe,Be.Fd=gt,Be.f=Ke,Be.N=0+gt,Be.Ab=T,Be.Cd=Me,Be.ea=Ke,Be.W=0+gt+Me,Be.Db=T,Be.Ed=Me,w==12&&(Be.F=Ke,Be.J=0+gt+2*Me),Be.Tc=Ae,Be.lb=Le)}if(T=1,Le=ce.S,Me=ce.width,Ae=ce.height,Le>=Io&&13>Le)if(11>Le)w=ce.f.RGBA,T&=(Oe=Math.abs(w.A))*(Ae-1)+Me<=w.size,T&=Oe>=Me*If[Le],T&=w.eb!=null;else{w=ce.f.kb,Oe=(Me+1)/2,gt=(Ae+1)/2,Be=Math.abs(w.fa),Ke=Math.abs(w.Ab);var Ft=Math.abs(w.Db),jt=Math.abs(w.lb),Mt=jt*(Ae-1)+Me;T&=Be*(Ae-1)+Me<=w.Fd,T&=Ke*(gt-1)+Oe<=w.Cd,T=(T&=Ft*(gt-1)+Oe<=w.Ed)&Be>=Me&Ke>=Oe&Ft>=Oe,T&=w.y!=null,T&=w.f!=null,T&=w.ea!=null,Le==12&&(T&=jt>=Me,T&=Mt<=w.Tc,T&=w.F!=null)}else T=0;w=T?0:2}}return w!=0||q!=null&&q.fd&&(w=yl(ce)),w}var Es=64,Aa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Jo=24,Oo=32,jl=8,to=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];$e("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(w){return w},I.Predictor2=function(w,T,q){return T[q+0]},I.Predictor3=function(w,T,q){return T[q+1]},I.Predictor4=function(w,T,q){return T[q-1]},I.Predictor5=function(w,T,q){return Xe(Xe(w,T[q+1]),T[q+0])},I.Predictor6=function(w,T,q){return Xe(w,T[q-1])},I.Predictor7=function(w,T,q){return Xe(w,T[q+0])},I.Predictor8=function(w,T,q){return Xe(T[q-1],T[q+0])},I.Predictor9=function(w,T,q){return Xe(T[q+0],T[q+1])},I.Predictor10=function(w,T,q){return Xe(Xe(w,T[q-1]),Xe(T[q+0],T[q+1]))},I.Predictor11=function(w,T,q){var ce=T[q+0];return 0>=Lt(ce>>24&255,w>>24&255,(T=T[q-1])>>24&255)+Lt(ce>>16&255,w>>16&255,T>>16&255)+Lt(ce>>8&255,w>>8&255,T>>8&255)+Lt(255&ce,255&w,255&T)?ce:w},I.Predictor12=function(w,T,q){var ce=T[q+0];return(lt((w>>24&255)+(ce>>24&255)-((T=T[q-1])>>24&255))<<24|lt((w>>16&255)+(ce>>16&255)-(T>>16&255))<<16|lt((w>>8&255)+(ce>>8&255)-(T>>8&255))<<8|lt((255&w)+(255&ce)-(255&T)))>>>0},I.Predictor13=function(w,T,q){var ce=T[q-1];return(qe((w=Xe(w,T[q+0]))>>24&255,ce>>24&255)<<24|qe(w>>16&255,ce>>16&255)<<16|qe(w>>8&255,ce>>8&255)<<8|qe(w>>0&255,ce>>0&255))>>>0};var vo=I.PredictorAdd0;I.PredictorAdd1=Gt,$e("Predictor2","PredictorAdd2"),$e("Predictor3","PredictorAdd3"),$e("Predictor4","PredictorAdd4"),$e("Predictor5","PredictorAdd5"),$e("Predictor6","PredictorAdd6"),$e("Predictor7","PredictorAdd7"),$e("Predictor8","PredictorAdd8"),$e("Predictor9","PredictorAdd9"),$e("Predictor10","PredictorAdd10"),$e("Predictor11","PredictorAdd11"),$e("Predictor12","PredictorAdd12"),$e("Predictor13","PredictorAdd13");var yo=I.PredictorAdd2;at("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),at("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var Ac,Is=I.ColorIndexInverseTransform,qa=I.MapARGB,no=I.VP8LColorIndexInverseTransformAlpha,ro=I.MapAlpha,Ya=I.VP8LPredictorsAdd=[];Ya.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var Ka,io,Vs,Ta,Qo,so,St,qt,It,Rn,tr,Sr,Ji,Ei,fu,bo,Qi,Da,Za,Oa,Na,Ia,ni,ya,Us,Pi,Ii,_s,Ui=s(511),ea=s(2041),No=s(225),aa=s(767),ec=0,Ba=ea,Ps=No,Vi=aa,oo=Ui,Io=0,mr=1,Xa=2,Ja=3,ba=4,_o=5,ih=6,Hs=7,Ws=8,_a=9,u=10,y=[2,3,7],P=[3,3,11],G=[280,256,256,256,40],ue=[0,1,1,1,0],Pe=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ut=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Nt=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ht=8,hn=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],$n=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],sr=null,jr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ms=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],cs=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Gs=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],es=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Bo=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],sh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ra=[],wa=[],la=[],Od=1,Du=2,bi=[],ao=[];Ut("UpsampleRgbLinePair",Ur,3),Ut("UpsampleBgrLinePair",qi,3),Ut("UpsampleRgbaLinePair",Xo,4),Ut("UpsampleBgraLinePair",Cs,4),Ut("UpsampleArgbLinePair",bs,4),Ut("UpsampleRgba4444LinePair",Ci,2),Ut("UpsampleRgb565LinePair",vi,2);var Ne=I.UpsampleRgbLinePair,Ro=I.UpsampleBgrLinePair,tc=I.UpsampleRgbaLinePair,qs=I.UpsampleBgraLinePair,Wr=I.UpsampleArgbLinePair,Vh=I.UpsampleRgba4444LinePair,Af=I.UpsampleRgb565LinePair,Uh=16,_l=1<<Uh-1,oh=-227,Nd=482,Up=6,Tc=0,Hh=s(256),pu=s(256),Hp=s(256),Wh=s(256),Gh=s(Nd-oh),Tf=s(Nd-oh);eo("YuvToRgbRow",Ur,3),eo("YuvToBgrRow",qi,3),eo("YuvToRgbaRow",Xo,4),eo("YuvToBgraRow",Cs,4),eo("YuvToArgbRow",bs,4),eo("YuvToRgba4444Row",Ci,2),eo("YuvToRgb565Row",vi,2);var Df=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Qa=[0,2,8],Of=[8,7,6,4,4,2,2,2,1,1,1,1],Nf=1;this.WebPDecodeRGBA=function(w,T,q,ce,Le){var Me=mr,Ae=new $s,Oe=new rr;Ae.ba=Oe,Oe.S=Me,Oe.width=[Oe.width],Oe.height=[Oe.height];var Be=Oe.width,Ke=Oe.height,gt=new Zn;if(gt==null||w==null)var Ft=2;else e(gt!=null),Ft=ka(w,T,q,gt.width,gt.height,gt.Pd,gt.Qd,gt.format,null);if(Ft!=0?Be=0:(Be!=null&&(Be[0]=gt.width[0]),Ke!=null&&(Ke[0]=gt.height[0]),Be=1),Be){Oe.width=Oe.width[0],Oe.height=Oe.height[0],ce!=null&&(ce[0]=Oe.width),Le!=null&&(Le[0]=Oe.height);e:{if(ce=new Xs,(Le=new ma).data=w,Le.w=T,Le.ha=q,Le.kd=1,T=[0],e(Le!=null),((w=ka(Le.data,Le.w,Le.ha,null,null,null,T,null,Le))==0||w==7)&&T[0]&&(w=4),(T=w)==0){if(e(Ae!=null),ce.data=Le.data,ce.w=Le.w+Le.offset,ce.ha=Le.ha-Le.offset,ce.put=ft,ce.ac=ls,ce.bc=rt,ce.ma=Ae,Le.xa){if((w=zr())==null){Ae=1;break e}if(function(jt,Mt){var Kt=[0],Wt=[0],mt=[0];t:for(;;){if(jt==null)return 0;if(Mt==null)return jt.a=2,0;if(jt.l=Mt,jt.a=0,Q(jt.m,Mt.data,Mt.w,Mt.ha),!wt(jt.m,Kt,Wt,mt)){jt.a=3;break t}if(jt.xb=Du,Mt.width=Kt[0],Mt.height=Wt[0],!ki(Kt[0],Wt[0],1,jt,null))break t;return 1}return e(jt.a!=0),0}(w,ce)){if(ce=(T=bl(ce.width,ce.height,Ae.Oa,Ae.ba))==0){t:{ce=w;n:for(;;){if(ce==null){ce=0;break t}if(e(ce.s.yc!=null),e(ce.s.Ya!=null),e(0<ce.s.Wb),e((q=ce.l)!=null),e((Le=q.ma)!=null),ce.xb!=0){if(ce.ca=Le.ba,ce.tb=Le.tb,e(ce.ca!=null),!Qu(Le.Oa,q,Ja)){ce.a=2;break n}if(!zi(ce,q.width)||q.da)break n;if((q.da||Xt(ce.ca.S))&&kt(),11>ce.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ce.ca.f.kb.F!=null&&kt()),ce.Pb&&0<ce.s.ua&&ce.s.vb.X==null&&!ee(ce.s.vb,ce.s.Wa.Xa)){ce.a=1;break n}ce.xb=0}if(!tn(ce,ce.V,ce.Ba,ce.c,ce.i,q.o,Jt))break n;Le.Dc=ce.Ma,ce=1;break t}e(ce.a!=0),ce=0}ce=!ce}ce&&(T=w.a)}else T=w.a}else{if((w=new An)==null){Ae=1;break e}if(w.Fa=Le.na,w.P=Le.P,w.qc=Le.Sa,gi(w,ce)){if((T=bl(ce.width,ce.height,Ae.Oa,Ae.ba))==0){if(w.Aa=0,q=Ae.Oa,e((Le=w)!=null),q!=null){if(0<(Be=0>(Be=q.Md)?0:100<Be?255:255*Be/100)){for(Ke=gt=0;4>Ke;++Ke)12>(Ft=Le.pb[Ke]).lc&&(Ft.ia=Be*Of[0>Ft.lc?0:Ft.lc]>>3),gt|=Ft.ia;gt&&(alert("todo:VP8InitRandom"),Le.ia=1)}Le.Ga=q.Id,100<Le.Ga?Le.Ga=100:0>Le.Ga&&(Le.Ga=0)}Xn(w,ce)||(T=w.a)}}else T=w.a}T==0&&Ae.Oa!=null&&Ae.Oa.fd&&(T=yl(Ae.ba))}Ae=T}Me=Ae!=0?null:11>Me?Oe.f.RGBA.eb:Oe.f.kb.y}else Me=null;return Me};var If=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(I,F){for(var K="",B=0;B<4;B++)K+=String.fromCharCode(I[F++]);return K}function d(I,F){return(I[F+0]<<0|I[F+1]<<8|I[F+2]<<16)>>>0}function p(I,F){return(I[F+0]<<0|I[F+1]<<8|I[F+2]<<16|I[F+3]<<24)>>>0}new l;var v=[0],m=[0],x=[],E=new l,k=t,A=function(I,F){var K={},B=0,N=!1,j=0,z=0;if(K.frames=[],!function(H,Z,me,pe){for(var de=0;de<pe;de++)if(H[Z+de]!=me.charCodeAt(de))return!0;return!1}(I,F,"RIFF",4)){var U,$;for(p(I,F+=4),F+=8;F<I.length;){var re=c(I,F),Q=p(I,F+=4);F+=4;var _e=Q+(1&Q);switch(re){case"VP8 ":case"VP8L":K.frames[B]===void 0&&(K.frames[B]={}),(ae=K.frames[B]).src_off=N?z:F-8,ae.src_size=j+Q+8,B++,N&&(N=!1,j=0,z=0);break;case"VP8X":(ae=K.header={}).feature_flags=I[F];var we=F+4;ae.canvas_width=1+d(I,we),we+=3,ae.canvas_height=1+d(I,we),we+=3;break;case"ALPH":N=!0,j=_e+8,z=F-8;break;case"ANIM":(ae=K.header).bgcolor=p(I,F),we=F+4,ae.loop_count=(U=I)[($=we)+0]<<0|U[$+1]<<8,we+=2;break;case"ANMF":var nt,ae;(ae=K.frames[B]={}).offset_x=2*d(I,F),F+=3,ae.offset_y=2*d(I,F),F+=3,ae.width=1+d(I,F),F+=3,ae.height=1+d(I,F),F+=3,ae.duration=d(I,F),F+=3,nt=I[F++],ae.dispose=1&nt,ae.blend=nt>>1&1}re!="ANMF"&&(F+=_e)}return K}}(k,0);A.response=k,A.rgbaoutput=!0,A.dataurl=!1;var D=A.header?A.header:null,V=A.frames?A.frames:null;if(D){D.loop_counter=D.loop_count,v=[D.canvas_height],m=[D.canvas_width];for(var Y=0;Y<V.length&&V[Y].blend!=0;Y++);}var te=V[0],ge=E.WebPDecodeRGBA(k,te.src_off,te.src_size,m,v);te.rgba=ge,te.imgwidth=m[0],te.imgheight=v[0];for(var fe=0;fe<m[0]*v[0]*4;fe++)x[fe]=ge[fe];return this.width=m,this.height=v,this.data=x,this}(function(t){var e=function(){return typeof kb=="function"},n=function(v,m,x,E){var k=4,A=o;switch(E){case t.image_compression.FAST:k=1,A=s;break;case t.image_compression.MEDIUM:k=6,A=a;break;case t.image_compression.SLOW:k=9,A=l}v=r(v,m,x,A);var D=kb(v,{level:k});return t.__addimage__.arrayBufferToBinaryString(D)},r=function(v,m,x,E){for(var k,A,D,V=v.length/m,Y=new Uint8Array(v.length+V),te=d(),ge=0;ge<V;ge+=1){if(D=ge*m,k=v.subarray(D,D+m),E)Y.set(E(k,x,A),D+ge);else{for(var fe,I=te.length,F=[];fe<I;fe+=1)F[fe]=te[fe](k,x,A);var K=p(F.concat());Y.set(F[K],D+ge)}A=k}return Y},i=function(v){var m=Array.apply([],v);return m.unshift(0),m},s=function(v,m){var x,E=[],k=v.length;E[0]=1;for(var A=0;A<k;A+=1)x=v[A-m]||0,E[A+1]=v[A]-x+256&255;return E},o=function(v,m,x){var E,k=[],A=v.length;k[0]=2;for(var D=0;D<A;D+=1)E=x&&x[D]||0,k[D+1]=v[D]-E+256&255;return k},a=function(v,m,x){var E,k,A=[],D=v.length;A[0]=3;for(var V=0;V<D;V+=1)E=v[V-m]||0,k=x&&x[V]||0,A[V+1]=v[V]+256-(E+k>>>1)&255;return A},l=function(v,m,x){var E,k,A,D,V=[],Y=v.length;V[0]=4;for(var te=0;te<Y;te+=1)E=v[te-m]||0,k=x&&x[te]||0,A=x&&x[te-m]||0,D=c(E,k,A),V[te+1]=v[te]-D+256&255;return V},c=function(v,m,x){if(v===m&&m===x)return v;var E=Math.abs(m-x),k=Math.abs(v-x),A=Math.abs(v+m-x-x);return E<=k&&E<=A?v:k<=A?m:x},d=function(){return[i,s,o,a,l]},p=function(v){var m=v.map(function(x){return x.reduce(function(E,k){return E+Math.abs(k)},0)});return m.indexOf(Math.min.apply(null,m))};t.processPNG=function(v,m,x,E){var k,A,D,V,Y,te,ge,fe,I,F,K,B,N,j,z,U=this.decode.FLATE_DECODE,$="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(D=new HH(v)).imgData,A=D.bits,k=D.colorSpace,Y=D.colors,[4,6].indexOf(D.colorType)!==-1){if(D.bits===8){I=(fe=D.pixelBitlength==32?new Uint32Array(D.decodePixels().buffer):D.pixelBitlength==16?new Uint16Array(D.decodePixels().buffer):new Uint8Array(D.decodePixels().buffer)).length,K=new Uint8Array(I*D.colors),F=new Uint8Array(I);var re,Q=D.pixelBitlength-D.bits;for(j=0,z=0;j<I;j++){for(N=fe[j],re=0;re<Q;)K[z++]=N>>>re&255,re+=D.bits;F[j]=N>>>re&255}}if(D.bits===16){I=(fe=new Uint32Array(D.decodePixels().buffer)).length,K=new Uint8Array(I*(32/D.pixelBitlength)*D.colors),F=new Uint8Array(I*(32/D.pixelBitlength)),B=D.colors>1,j=0,z=0;for(var _e=0;j<I;)N=fe[j++],K[z++]=N>>>0&255,B&&(K[z++]=N>>>16&255,N=fe[j++],K[z++]=N>>>0&255),F[_e++]=N>>>16&255;A=8}E!==t.image_compression.NONE&&e()?(v=n(K,D.width*D.colors,D.colors,E),ge=n(F,D.width,1,E)):(v=K,ge=F,U=void 0)}if(D.colorType===3&&(k=this.color_spaces.INDEXED,te=D.palette,D.transparency.indexed)){var we=D.transparency.indexed,nt=0;for(j=0,I=we.length;j<I;++j)nt+=we[j];if((nt/=255)===I-1&&we.indexOf(0)!==-1)V=[we.indexOf(0)];else if(nt!==I){for(fe=D.decodePixels(),F=new Uint8Array(fe.length),j=0,I=fe.length;j<I;j++)F[j]=we[fe[j]];ge=n(F,D.width,1)}}var ae=function(H){var Z;switch(H){case t.image_compression.FAST:Z=11;break;case t.image_compression.MEDIUM:Z=13;break;case t.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(E);return U===this.decode.FLATE_DECODE&&($="/Predictor "+ae+" "),$+="/Colors "+Y+" /BitsPerComponent "+A+" /Columns "+D.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(ge&&this.__addimage__.isArrayBuffer(ge)||this.__addimage__.isArrayBufferView(ge))&&(ge=this.__addimage__.arrayBufferToBinaryString(ge)),{alias:x,data:v,index:m,filter:U,decodeParameters:$,transparency:V,palette:te,sMask:ge,predictor:ae,width:D.width,height:D.height,bitsPerComponent:A,colorSpace:k}}}})(Dr.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new WH(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},d=new u2(100).encode(c,100);return t.processJPEG.call(this,d,n,r,i)},t.processGIF87A=t.processGIF89A}(Dr.API),hc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},hc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){xs.log("bit decode error:"+n)}},hc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},hc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},hc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},hc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,d=r*this.width*4+4*i;this.data[d]=l,this.data[d+1]=a,this.data[d+2]=o,this.data[d+3]=c}this.pos+=t}},hc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,d=i*this.width*4+4*s;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=a,this.data[d+3]=255}this.pos+=t}},hc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},hc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},hc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new hc(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new u2(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(Dr.API),B5.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new B5(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new u2(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(Dr.API),Dr.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var d=r[c],p=r[c+1],v=r[c+2],m=r[c+3];s[a++]=d,s[a++]=p,s[a++]=v,o[l++]=m}var x=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:x,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Dr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Zf=Dr.API,E0=Zf.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=c.fof?c.fof:1,p=e.doKerning!==!1,v=0,m=t.length,x=0,E=a[0]||l,k=[];for(n=0;n<m;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?k.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(v=p&&fs(c[r])==="object"&&!isNaN(parseInt(c[r][x],10))?c[r][x]/d:0,k.push((a[r]||E)/l+v)),x=r;return k},D5=Zf.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Zf.processArabic&&(t=Zf.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:E0.apply(this,arguments).reduce(function(s,o){return s+o},0)},O5=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},N5=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,d=[],p=[d],v=n.textIndent||0,m=0,x=0,E=t.split(" "),k=E0.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?E[0].length+2:n.lineIndent||0){var A=Array(l).join(" "),D=[];E.map(function(Y){(Y=Y.split(/\s*\n/)).length>1?D=D.concat(Y.map(function(te,ge){return(ge&&te.length?`
`:"")+te})):D.push(Y[0])}),E=D,l=D5.apply(this,[A,n])}for(s=0,o=E.length;s<o;s++){var V=0;if(r=E[s],l&&r[0]==`
`&&(r=r.substr(1),V=1),v+m+(x=(i=E0.apply(this,[r,n])).reduce(function(Y,te){return Y+te},0))>e||V){if(x>e){for(a=O5.apply(this,[r,i,e-(v+m),e]),d.push(a.shift()),d=[a.pop()];a.length;)p.push([a.shift()]);x=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(Y,te){return Y+te},0)}else d=[r];p.push(d),v=x+l,m=k}else d.push(r),v+=m+x,m=k}return c=l?function(Y,te){return(te?A:"")+Y.join(" ")}:function(Y){return Y.join(" ")},p.map(c)},Zf.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(N5.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var v,m,x,E,k=["{"];for(var A in p){if(v=p[A],isNaN(parseInt(A,10))?m="'"+A+"'":(A=parseInt(A,10),m=(m=s(A).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof v=="number")v<0?(x=s(v).slice(3),E="-"):(x=s(v).slice(2),E=""),x=E+x.slice(0,-1)+r[x.slice(-1)];else{if(fs(v)!=="object")throw new Error("Don't know what to do with value type "+fs(v)+".");x=o(v)}k.push(m+x)}return k.push("}"),k.join("")},a=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,m,x,E,k={},A=1,D=k,V=[],Y="",te="",ge=p.length-1,fe=1;fe<ge;fe+=1)(E=p[fe])=="'"?v?(x=v.join(""),v=void 0):v=[]:v?v.push(E):E=="{"?(V.push([D,x]),D={},x=void 0):E=="}"?((m=V.pop())[0][m[1]]=D,x=void 0,D=m[0]):E=="-"?A=-1:x===void 0?n.hasOwnProperty(E)?(Y+=n[E],x=parseInt(Y,16)*A,A=1,Y=""):Y+=E:n.hasOwnProperty(E)?(te+=n[E],D[x]=parseInt(te,16)*A,A=1,x=void 0,te=""):te+=E;return k},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var v=p.font,m=d.Unicode[v.postScriptName];m&&(v.metadata.Unicode={},v.metadata.Unicode.widths=m.widths,v.metadata.Unicode.kerning=m.kerning);var x=c.Unicode[v.postScriptName];x&&(v.metadata.Unicode.encoding=x,v.encoding=x.codePages[0])}])}(Dr.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Gg(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Dr),function(t){function e(){return(Br.canvg?Promise.resolve(Br.canvg):Mh(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Dr.API.addSvgAsImage=function(n,r,i,s,o,a,l,c){if(isNaN(r)||isNaN(i))throw xs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw xs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=o;var p=d.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,d.width,d.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(x){return x.fromString(p,n,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(v)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),r,i,s,o,l,c)})}}(),Dr.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},Dr.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,d=0,p=0;function v(x,E){var k,A=!1;for(k=0;k<x.length;k+=1)x[k]===E&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=a.length;for(p=0;p<m;p+=1)n[a[p]].value=n[a[p]].defaultValue,n[a[p]].explicitSet=!1}if(fs(t)==="object"){for(i in t)if(s=t[i],v(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&v(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(d=0;d<s[c].length;d+=1)typeof s[c][d]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,E=[];for(x in n)n[x].explicitSet===!0&&(n[x].type==="name"?E.push("/"+x+" /"+n[x].value):E.push("/"+x+" "+n[x].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(Dr.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],p=0,v=s.length;p<v;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return d.join("");a=a.toString(16),d.push(c[4-a.length],a)}return d.join("")},r=function(s){var o,a,l,c,d,p,v;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,v=(a=Object.keys(s).sort(function(m,x){return m-x})).length;p<v;p++)o=a[p],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,d=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,v=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),m="",x=0;x<v.length;x++)m+=String.fromCharCode(v[x]);var E=c();d({data:m,addLength1:!0,objectId:E}),l("endobj");var k=c();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:k}),l("endobj");var A=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+lp(a.fontName)),l("/FontFile2 "+E+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var D=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+lp(a.fontName)),l("/FontDescriptor "+A+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+k+" 0 R"),l("/BaseFont /"+lp(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+D+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,d=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,v="",m=0;m<p.length;m++)v+=String.fromCharCode(p[m]);var x=c();d({data:v,addLength1:!0,objectId:x}),l("endobj");var E=c();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:E}),l("endobj");var k=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+x+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+lp(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var A=0;A<a.metadata.hmtx.widths.length;A++)a.metadata.hmtx.widths[A]=parseInt(a.metadata.hmtx.widths[A]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+lp(a.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,d=s.options||{},p=s.mutex||{},v=p.pdfEscape,m=p.activeFontKey,x=p.fonts,E=m,k="",A=0,D="",V=x[E].encoding;if(x[E].encoding!=="Identity-H")return{text:a,x:l,y:c,options:d,mutex:p};for(D=a,E=m,Array.isArray(a)&&(D=a[0]),A=0;A<D.length;A+=1)x[E].metadata.hasOwnProperty("cmap")&&(o=x[E].metadata.cmap.unicode.codeMap[D[A].charCodeAt(0)]),o||D[A].charCodeAt(0)<256&&x[E].metadata.hasOwnProperty("Unicode")?k+=D[A]:k+="";var Y="";return parseInt(E.slice(1))<14||V==="WinAnsiEncoding"?Y=v(k,E).split("").map(function(te){return te.charCodeAt(0).toString(16)}).join(""):V==="Identity-H"&&(Y=n(k,x[E])),p.isHex=!0,{text:Y,x:l,y:c,options:d,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(Dr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Dr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,d,p=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),D=!1,V=0;this.__bidiEngine__={};var Y=function(B){var N=B.charCodeAt(),j=N>>8,z=E[j];return z!==void 0?p[256*z+(255&N)]:j===252||j===253?"AL":A.test(j)?"L":j===8?"R":"N"},te=function(B){for(var N,j=0;j<B.length;j++){if((N=Y(B.charAt(j)))==="L")return!1;if(N==="R")return!0}return!1},ge=function(B,N,j,z){var U,$,re,Q,_e=N[z];switch(_e){case"L":case"R":D=!1;break;case"N":case"AN":break;case"EN":D&&(_e="AN");break;case"AL":D=!0,_e="R";break;case"WS":_e="N";break;case"CS":z<1||z+1>=N.length||(U=j[z-1])!=="EN"&&U!=="AN"||($=N[z+1])!=="EN"&&$!=="AN"?_e="N":D&&($="AN"),_e=$===U?$:"N";break;case"ES":_e=(U=z>0?j[z-1]:"B")==="EN"&&z+1<N.length&&N[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&j[z-1]==="EN"){_e="EN";break}if(D){_e="N";break}for(re=z+1,Q=N.length;re<Q&&N[re]==="ET";)re++;_e=re<Q&&N[re]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(Q=N.length,re=z+1;re<Q&&N[re]==="NSM";)re++;if(re<Q){var we=B[z],nt=we>=1425&&we<=2303||we===64286;if(U=N[re],nt&&(U==="R"||U==="AL")){_e="R";break}}}_e=z<1||(U=N[z-1])==="B"?"N":j[z-1];break;case"B":D=!1,i=!0,_e=V;break;case"S":s=!0,_e="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":D=!1;break;case"BN":_e="N"}return _e},fe=function(B,N,j){var z=B.split("");return j&&I(z,j,{hiLevel:V}),z.reverse(),N&&N.reverse(),z.join("")},I=function(B,N,j){var z,U,$,re,Q,_e=-1,we=B.length,nt=0,ae=[],H=V?m:v,Z=[];for(D=!1,i=!1,s=!1,U=0;U<we;U++)Z[U]=Y(B[U]);for($=0;$<we;$++){if(Q=nt,ae[$]=ge(B,Z,ae,$),z=240&(nt=H[Q][x[ae[$]]]),nt&=15,N[$]=re=H[nt][5],z>0)if(z===16){for(U=_e;U<$;U++)N[U]=1;_e=-1}else _e=-1;if(H[nt][6])_e===-1&&(_e=$);else if(_e>-1){for(U=_e;U<$;U++)N[U]=re;_e=-1}Z[$]==="B"&&(N[$]=0),j.hiLevel|=re}s&&function(me,pe,de){for(var X=0;X<de;X++)if(me[X]==="S"){pe[X]=V;for(var J=X-1;J>=0&&me[J]==="WS";J--)pe[J]=V}}(Z,N,we)},F=function(B,N,j,z,U){if(!(U.hiLevel<B)){if(B===1&&V===1&&!i)return N.reverse(),void(j&&j.reverse());for(var $,re,Q,_e,we=N.length,nt=0;nt<we;){if(z[nt]>=B){for(Q=nt+1;Q<we&&z[Q]>=B;)Q++;for(_e=nt,re=Q-1;_e<re;_e++,re--)$=N[_e],N[_e]=N[re],N[re]=$,j&&($=j[_e],j[_e]=j[re],j[re]=$);nt=Q}nt++}}},K=function(B,N,j){var z=B.split(""),U={hiLevel:V};return j||(j=[]),I(z,j,U),function($,re,Q){if(Q.hiLevel!==0&&d)for(var _e,we=0;we<$.length;we++)re[we]===1&&(_e=k.indexOf($[we]))>=0&&($[we]=k[_e+1])}(z,j,U),F(2,z,N,j,U),F(1,z,N,j,U),z.join("")};return this.__bidiEngine__.doBidiReorder=function(B,N,j){if(function(U,$){if($)for(var re=0;re<U.length;re++)$[re]=re;a===void 0&&(a=te(U)),c===void 0&&(c=te(U))}(B,N),o||!l||c)if(o&&l&&a^c)V=a?1:0,B=fe(B,N,j);else if(!o&&l&&c)V=a?1:0,B=K(B,N,j),B=fe(B,N);else if(!o||a||l||c){if(o&&!l&&a^c)B=fe(B,N),a?(V=0,B=K(B,N,j)):(V=1,B=K(B,N,j),B=fe(B,N));else if(o&&a&&!l&&c)V=1,B=K(B,N,j),B=fe(B,N);else if(!o&&!l&&a^c){var z=d;a?(V=1,B=K(B,N,j),V=0,d=!1,B=K(B,N,j),d=z):(V=0,B=K(B,N,j),B=fe(B,N),V=1,d=!1,B=K(B,N,j),d=z,B=fe(B,N))}}else V=0,B=K(B,N,j);else V=a?1:0,B=K(B,N,j);return B},this.__bidiEngine__.setOptions=function(B){B&&(o=B.isInputVisual,l=B.isOutputVisual,a=B.isInputRtl,c=B.isOutputRtl,d=B.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(Dr),Dr.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Ed(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new oW(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new GH(this.contents),this.head=new YH(this),this.name=new QH(this),this.cmap=new sP(this),this.toUnicode={},this.hhea=new KH(this),this.maxp=new eW(this),this.hmtx=new tW(this),this.post=new XH(this),this.os2=new ZH(this),this.loca=new sW(this),this.glyf=new nW(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Pc,Ed=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),GH=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,d,p,v,m,x,E;for(E in m=Object.keys(n).length,l=Math.log(2),p=16*Math.floor(Math.log(m)/l),o=Math.floor(p/l),d=16*m-p,(i=new Ed).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(o),i.writeShort(d),s=16*m,c=i.pos+s,a=null,x=[],n)for(v=n[E],i.writeString(E),i.writeInt(t(v)),i.writeInt(c),i.writeInt(v.length),x=x.concat(v),E==="head"&&(a=c),c+=v.length;c%4;)x.push(0),c++;return i.write(x),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=oP.call(n);n.length%4;)n.push(0);for(s=new Ed(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),qH={}.hasOwnProperty,rh=function(t,e){for(var n in e)qH.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Pc=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var YH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Ed).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),R5=function(){function t(e,n){var r,i,s,o,a,l,c,d,p,v,m,x,E,k,A,D,V;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),v=m/2,e.pos+=6,s=function(){var Y,te;for(te=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)te.push(e.readUInt16());return te}(),e.pos+=2,E=function(){var Y,te;for(te=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)te.push(e.readUInt16());return te}(),c=function(){var Y,te;for(te=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)te.push(e.readUInt16());return te}(),d=function(){var Y,te;for(te=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)te.push(e.readUInt16());return te}(),i=(this.length-e.pos+this.offset)/2,a=function(){var Y,te;for(te=[],l=Y=0;0<=i?Y<i:Y>i;l=0<=i?++Y:--Y)te.push(e.readUInt16());return te}(),l=A=0,V=s.length;A<V;l=++A)for(k=s[l],r=D=x=E[l];x<=k?D<=k:D>=k;r=x<=k?++D:--D)d[l]===0?o=r+c[l]:(o=a[d[l]/2+(r-x)-(v-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=p}return t.encode=function(e,n){var r,i,s,o,a,l,c,d,p,v,m,x,E,k,A,D,V,Y,te,ge,fe,I,F,K,B,N,j,z,U,$,re,Q,_e,we,nt,ae,H,Z,me,pe,de,X,J,De,Te,Je;switch(z=new Ed,o=Object.keys(e).sort(function(he,ee){return he-ee}),n){case"macroman":for(E=0,k=function(){var he=[];for(x=0;x<256;++x)he.push(0);return he}(),D={0:0},s={},U=0,_e=o.length;U<_e;U++)D[J=e[i=o[U]]]==null&&(D[J]=++E),s[i]={old:e[i],new:D[e[i]]},k[i]=D[e[i]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(k),{charMap:s,subtable:z.data,maxGlyphID:E+1};case"unicode":for(N=[],p=[],V=0,D={},r={},A=c=null,$=0,we=o.length;$<we;$++)D[te=e[i=o[$]]]==null&&(D[te]=++V),r[i]={old:te,new:D[te]},a=D[te]-i,A!=null&&a===c||(A&&p.push(A),N.push(i),c=a),A=i;for(A&&p.push(A),p.push(65535),N.push(65535),K=2*(F=N.length),I=2*Math.pow(Math.log(F)/Math.LN2,2),v=Math.log(I/2)/Math.LN2,fe=2*F-I,l=[],ge=[],m=[],x=re=0,nt=N.length;re<nt;x=++re){if(B=N[x],d=p[x],B===65535){l.push(0),ge.push(0);break}if(B-(j=r[B].new)>=32768)for(l.push(0),ge.push(2*(m.length+F-x)),i=Q=B;B<=d?Q<=d:Q>=d;i=B<=d?++Q:--Q)m.push(r[i].new);else l.push(j-B),ge.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*F+2*m.length),z.writeUInt16(0),z.writeUInt16(K),z.writeUInt16(I),z.writeUInt16(v),z.writeUInt16(fe),de=0,ae=p.length;de<ae;de++)i=p[de],z.writeUInt16(i);for(z.writeUInt16(0),X=0,H=N.length;X<H;X++)i=N[X],z.writeUInt16(i);for(De=0,Z=l.length;De<Z;De++)a=l[De],z.writeUInt16(a);for(Te=0,me=ge.length;Te<me;Te++)Y=ge[Te],z.writeUInt16(Y);for(Je=0,pe=m.length;Je<pe;Je++)E=m[Je],z.writeUInt16(E);return{charMap:r,subtable:z.data,maxGlyphID:V+1}}},t}(),sP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new R5(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=R5.encode(n,r),(s=new Ed).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),KH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),ZH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),XH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e}(),JH=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},QH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,c,d,p,v,m;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=p=0,v=i.length;p<v;o=++p)s=i[o],n.pos=s.offset,d=n.readString(s.length),a=new JH(d,s),c[m=s.nameID]==null&&(c[m]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),eW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),tW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,p;for(p=[],r=d=0;0<=s?d<s:d>s;r=0<=s?++d:--d)p.push(n.readInt16());return p}(),this.widths=(function(){var d,p,v,m;for(m=[],d=0,p=(v=this.metrics).length;d<p;d++)o=v[d],m.push(o.advance);return m}).call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),oP=[].slice,nW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,c,d,p,v;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new Ed(r.read(s))).readShort(),d=l.readShort(),v=l.readShort(),c=l.readShort(),p=l.readShort(),this.cache[n]=a===-1?new iW(l,d,v,c,p):new rW(l,a,d,v,c,p),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),rW=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),iW=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Ed(oP.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),sW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var d=new Array(4*i.length),p=0;p<i.length;++p)d[4*p+3]=255&i[p],d[4*p+2]=(65280&i[p])>>8,d[4*p+1]=(16711680&i[p])>>16,d[4*p]=(4278190080&i[p])>>24;return d},e}(),oW=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,d,p,v,m,x,E,k,A;for(i in r=sP.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},A=r.charMap)m[(l=A[i]).old]=l.new;for(x in v=r.maxGlyphID,o)x in m||(m[x]=v++);return d=function(D){var V,Y;for(V in Y={},D)Y[D[V]]=V;return Y}(m),p=Object.keys(d).sort(function(D,V){return D-V}),E=function(){var D,V,Y;for(Y=[],D=0,V=p.length;D<V;D++)a=p[D],Y.push(d[a]);return Y}(),s=this.font.glyf.encode(o,E,m),c=this.font.loca.encode(s.offsets,E),k={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},t}();Dr.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();const aW={class:"h-full flex"},lW={class:"flex-1 relative"},uW={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},cW={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},hW={class:"text-center max-w-lg mx-auto p-8"},dW={class:"space-y-4"},fW={class:"map-parent"},pW={class:"map-content flex flex-col h-full"},gW={class:"flex-1 flex flex-col md:flex-row relative"},mW={class:"flex-1 relative"},vW={key:0,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},yW={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-[9999] p-4 overflow-y-auto"},bW={class:"bg-white rounded-lg p-6 max-w-2xl w-full my-8 relative"},_W={class:"flex justify-between items-center mb-4 sticky top-0 bg-white pb-4 border-b"},wW={class:"overflow-y-auto max-h-[calc(100vh-12rem)]"},xW={key:0,class:"space-y-4"},LW={key:0,class:"space-y-2"},SW={class:"grid grid-cols-1 gap-2"},CW=["onClick"],EW={class:"font-medium text-gray-900"},PW={key:1,class:"space-y-2"},MW={class:"flex items-center mb-4"},kW={class:"text-sm text-gray-600"},AW={class:"grid grid-cols-1 gap-2"},TW=["onClick"],DW={class:"font-medium text-gray-900"},OW={key:2,class:"space-y-2"},NW={class:"flex items-center mb-4"},IW={class:"text-sm text-gray-600"},BW={class:"grid grid-cols-1 gap-2"},RW={key:0,class:"text-center py-4"},FW=["onClick"],jW={class:"font-medium text-gray-900"},zW={key:3,class:"space-y-2"},$W={class:"flex items-center mb-4"},VW={class:"text-sm text-gray-600"},UW={class:"grid grid-cols-1 gap-2"},HW=["onClick"],WW={class:"font-medium text-gray-900"},GW={class:"text-sm text-gray-500"},qW={class:"text-xs text-gray-400 mt-1"},YW={key:1,class:"space-y-4"},KW={key:0,class:"space-y-2"},ZW={class:"grid grid-cols-1 gap-2"},XW={key:0,class:"text-center py-8"},JW=["onClick"],QW={class:"font-medium text-gray-900"},eG={key:1,class:"space-y-2"},tG={class:"flex items-center mb-4"},nG={class:"text-sm text-gray-600"},rG={class:"grid grid-cols-1 gap-2"},iG=["onClick"],sG={class:"font-medium text-gray-900"},oG={class:"text-sm text-gray-500"},aG={class:"text-xs text-gray-400 mt-1"},lG={key:2,class:"space-y-4"},uG={key:0,class:"py-4"},cG={key:1,class:"text-center py-8"},hG={key:2,class:"space-y-2"},dG={class:"grid grid-cols-1 gap-2"},fG=["onClick"],pG={class:"font-medium text-gray-900"},gG={class:"text-sm text-gray-500"},mG={class:"text-xs text-gray-400 mt-1"},vG={key:3,class:"space-y-4"},yG={key:0,class:"text-center py-8"},bG={key:1,class:"space-y-2"},_G=["onClick"],wG={class:"font-medium text-gray-900"},xG={class:"text-sm text-gray-500"},LG={class:"text-xs text-gray-400 mt-1"},F5=js({__name:"MapView",emits:["shape-selected"],setup(t,{emit:e}){const n=QB(),r=Ct(null),i=Ct(!1),s=Vy(),o=Tp(),a=wf(),l=ru(),c=Ct([]),d=Ct({planId:n.query.planId?parseInt(n.query.planId):null,noteId:n.query.noteId?parseInt(n.query.noteId):null,lat:n.query.lat?parseFloat(n.query.lat):null,lng:n.query.lng?parseFloat(n.query.lng):null,tool:n.query.tool||null}),{currentTool:p,selectedShape:v,map:m,initMap:x,setDrawingTool:E,updateShapeStyle:k,updateShapeProperties:A,featureGroup:D,adjustView:V,clearActiveControlPoints:Y,calculateConnectedCoverageArea:te,isDrawing:ge}=zU(),{initMap:fe,changeBaseMap:I}=$U(),F=Ct(!1),K=Ct(!1),B=Ct(!1),N=Ct(null),j=Ct(null),z=Ct(!1),U=Ct(null),$=pa(),re=Ct([]),Q=Ct([]),_e=Ct([]),we=Ct(null),nt=Ct(null),ae=Ct(null),H=Ct(!1),Z=Ct(!1),me=Ct(!1),pe=Ct(null),de=Jn(()=>{var ft,rt;return console.log("[MapView][filteredClients] Computing with:",{userType:(ft=$.user)==null?void 0:ft.user_type,selectedSalarie:we.value,salarieVisiteurs:Q.value,visiteurCount:((rt=Q.value)==null?void 0:rt.length)||0}),$.isSalarie||we.value?Q.value:[]}),X=Jn(()=>{var wn,bt,Et;if(!v.value)return null;console.log("[MapView][selectedShape] Initial layer state:",{layer:v.value,hasName:"name"in v.value,name:v.value.name,hasProperties:"properties"in v.value,propertiesName:(wn=v.value.properties)==null?void 0:wn.name,allLayerKeys:Object.keys(v.value),allPropertiesKeys:v.value.properties?Object.keys(v.value.properties):[],_leaflet_id:v.value._leaflet_id,_dbId:v.value._dbId,descriptor:Object.getOwnPropertyDescriptor(v.value,"name")});const ft=v.value.properties||{};let rt="unknown";ft.type?rt=ft.type:v.value instanceof $t.Circle?rt="Circle":v.value instanceof $a||v.value instanceof $t.Rectangle?rt="Rectangle":v.value instanceof cd||v.value instanceof $t.Polygon?rt="Polygon":v.value instanceof Sd?rt="ElevationLine":(v.value instanceof na||v.value instanceof $t.Polyline&&!(v.value instanceof $t.Polygon))&&(rt="Line"),console.log(`[MapView][selectedShape] Type de forme détecté: ${rt}`),ft.type||(v.value.properties||(v.value.properties={}),v.value.properties.type=rt);let wt;if(ft.style&&ft.style.name)wt=ft.style.name,console.log("[MapView][selectedShape] Using name from style:",wt);else if(ft.name)wt=ft.name,console.log("[MapView][selectedShape] Using name from properties:",wt);else if(v.value.name)wt=v.value.name,console.log("[MapView][selectedShape] Using name from layer:",wt);else{const ln=Object.getOwnPropertyDescriptor(v.value,"name");ln&&ln.value&&(wt=ln.value,console.log("[MapView][selectedShape] Found name in non-enumerable layer property:",wt));const Jt=["_name","displayName","title"];for(const Ln of Jt)if(v.value[Ln]){wt=v.value[Ln],console.log(`[MapView][selectedShape] Found name in ${Ln}:`,wt);break}}wt&&(console.log(`[MapView][selectedShape] Ensuring name "${wt}" is set everywhere`),v.value.properties||(v.value.properties={}),v.value.properties.name=wt,v.value.properties.style||(v.value.properties.style={}),v.value.properties.style.name=wt,v.value.name=wt,typeof v.value.setName=="function"&&(v.value.setName(wt),console.log(`[MapView][selectedShape] Used setName method to set name "${wt}"`))),v.value.properties.category||(v.value.properties.category="forages"),v.value.properties.accessLevel||(v.value.properties.accessLevel="visitor"),console.log("[MapView][selectedShape] Preparing properties for DrawingTools:",{type:rt,name:ft.name,foundName:wt,hasNameProperty:"name"in ft,allPropertiesKeys:Object.keys(ft),layerId:v.value._leaflet_id,rawProperties:ft,layerName:v.value.name,layerPropertiesName:(bt=v.value.properties)==null?void 0:bt.name});const kn={...ft,type:rt,name:wt||v.value.name||ft.name||void 0,category:v.value.properties.category||"forages",accessLevel:v.value.properties.accessLevel||"visitor"},Hn={type:rt,properties:kn,layer:v.value,options:v.value.options||{}};return console.log("[MapView][selectedShape] Final shape object for DrawingTools:",{type:Hn.type,hasName:"name"in Hn.properties,name:Hn.properties.name,layerName:Hn.layer.name,layerPropertiesName:(Et=Hn.layer.properties)==null?void 0:Et.name}),Hn});function J(ft){const rt=ft.getCenter(),wt=ft.getZoom(),kn={lat:rt.lat,lng:rt.lng,zoom:wt};document.cookie=`mapState=${JSON.stringify(kn)};max-age=2592000;path=/`}function De(){const rt=document.cookie.split(";").find(wt=>wt.trim().startsWith("mapState="));if(rt)try{return JSON.parse(rt.split("=")[1])}catch(wt){return console.error("Erreur lors de la lecture du cookie de position:",wt),null}return null}go(async()=>{var ft,rt;console.log("[MapView][onMounted] Initialisation du composant MapView"),console.log("[MapView][onMounted] État initial des filtres dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2));try{if(await s.fetchPlans(),($.isAdmin||$.isEntreprise)&&await In(),$.isEntreprise){H.value=!0;try{const ln=await Un.get("/users/",{params:{role:"SALARIE",entreprise:(ft=$.user)==null?void 0:ft.id}});re.value=ln.data}catch(ln){console.error("Error loading salaries:",ln),re.value=[]}finally{H.value=!1}}if($.isSalarie){Z.value=!0;try{const ln=await $.fetchSalarieVisiteurs(((rt=$.user)==null?void 0:rt.id)||0);Q.value=Array.isArray(ln)?ln:[ln]}catch(ln){console.error("Error loading clients:",ln)}finally{Z.value=!1}}const wt=De(),kn=wt?[wt.lat,wt.lng]:[46.603354,1.888334],Hn=(wt==null?void 0:wt.zoom)??6;if(r.value&&!m.value){const ln=x(r.value,kn,Hn);ln.pm.setLang("fr"),ln.pm.addControls({rotateMode:!1}),fe(ln),ln.on("moveend",()=>{J(ln)}),window.addEventListener("map-set-location",Jt=>{if(ln&&Jt.detail){const{lat:Ln,lng:Nr,zoom:sn}=Jt.detail;ln.flyTo([Ln,Nr],sn,{duration:1.5,easeLinearity:.25})}}),D.value&&(D.value.on("layeradd",Jt=>{const Ln=Jt.layer;Ln&&Ln._leaflet_id&&c.value.findIndex(sn=>sn.layer&&sn.layer._leaflet_id===Ln._leaflet_id)===-1&&(console.log(`[MapView][featureGroup.layeradd] Ajout de la couche ${Ln._leaflet_id} à shapes.value`),c.value.push({layer:Ln,id:Ln._dbId||Ln._leaflet_id}))}),D.value.on("layerremove",Jt=>{const Ln=Jt.layer;if(Ln&&Ln._leaflet_id)if(!Ln._dbId&&(!Ln.properties||Ln.properties&&!Ln.properties.type)){console.log(`[MapView][featureGroup.layerremove] Couche temporaire ${Ln._leaflet_id} supprimée définitivement`);const sn=c.value.findIndex(tn=>tn.layer&&tn.layer._leaflet_id===Ln._leaflet_id);sn!==-1&&c.value.splice(sn,1)}else console.log(`[MapView][featureGroup.layerremove] Couche ${Ln._leaflet_id} supprimée du featureGroup mais conservée dans shapes.value pour restauration ultérieure`)}))}if(d.value.planId)try{console.log("[MapView][onMounted] Chargement du plan depuis les paramètres d'URL:",d.value.planId),await se(d.value.planId);const ln=document.querySelector(".map-parent");ln instanceof HTMLElement&&(ln.style.display="block"),d.value.lat&&d.value.lng&&m.value&&(console.log("[MapView][onMounted] Centrage de la carte sur les coordonnées:",d.value.lat,d.value.lng),m.value.flyTo([d.value.lat,d.value.lng],16)),d.value.noteId&&D.value&&(console.log("[MapView][onMounted] Recherche de la note:",d.value.noteId),setTimeout(()=>{var Ln;const Jt=((Ln=D.value)==null?void 0:Ln.getLayers())||[];for(const Nr of Jt)if(Nr._dbId===d.value.noteId||Nr.id===d.value.noteId){console.log("[MapView][onMounted] Note trouvée:",Nr),typeof Nr.fire=="function"&&Nr.fire("click");break}},1e3)),d.value.tool&&(console.log("[MapView][onMounted] Activation de l'outil:",d.value.tool),E(d.value.tool))}catch(ln){console.error("[MapView][onMounted] Erreur chargement plan depuis URL:",ln),wn()}else wn();async function wn(){const ln=localStorage.getItem("lastPlanId");if(ln)try{console.log("[MapView][loadLastPlan] Chargement du dernier plan:",ln),await se(parseInt(ln));const Jt=document.querySelector(".map-parent");Jt instanceof HTMLElement&&(Jt.style.display="block")}catch(Jt){console.error("[MapView][loadLastPlan] Erreur chargement dernier plan:",Jt),N.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),he(),localStorage.removeItem("lastPlanId")}else console.log("[MapView][loadLastPlan] Aucun dernier plan à charger"),N.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),he()}window.addEventListener("shape:created",ln=>{const{shape:Jt,type:Ln,properties:Nr}=ln.detail;console.log("[MapView] Nouvelle forme créée",{shape:Jt,type:Ln,properties:Nr}),o.addElement(Jt),E("")}),window.addEventListener("geonote:savePlan",()=>{console.log("[MapView] Événement geonote:savePlan reçu - Sauvegarde automatique du plan"),le()}),window.addEventListener("categoriesReactivated",ln=>{console.log("[MapView][categoriesReactivated] Événement reçu:",ln.detail),Zn()}),window.addEventListener("shapeTypesReactivated",ln=>{console.log("[MapView][shapeTypesReactivated] Événement reçu:",ln.detail),Zn()});const bt=ln=>{if(console.log("[MapView] Édition de note via Leaflet",ln),console.log("[MapView] Type de e:",typeof ln,"Contenu de e:",JSON.stringify(ln)),!ln||!ln.note){console.error("[MapView] Erreur: e.note est undefined ou null",ln);return}const Jt=ln.note;console.log("[MapView] Note à éditer:",Jt),j.value={id:Jt.id,title:Jt.title||Jt.name,description:Jt.description,location:Jt.location,columnId:Jt.columnId||a.getDefaultColumn.id,accessLevel:Jt.accessLevel,style:Jt.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:Jt.createdAt||new Date().toISOString(),updatedAt:Jt.updatedAt||new Date().toISOString(),comments:Jt.comments||[],photos:Jt.photos||[]},console.log("[MapView] editingMapNote.value après conversion:",j.value),B.value=!0,console.log("[MapView] showNoteEditModal.value:",B.value)},Et=ln=>{if(console.log("[MapView] Édition de note via événement global",ln),!ln.detail||!ln.detail.note){console.error("[MapView] Erreur: event.detail.note est undefined ou null",ln);return}const Jt=ln.detail.note;console.log("[MapView] Note à éditer (global):",Jt);const Ln=c.value.find(sn=>sn.layer===ln.detail.source),Nr=Ln?Ln.id:Jt.id;console.log("[MapView] ID de la note pour l'API:",Nr,"Source:",ln.detail.source?"Couche Leaflet":"Autre"),j.value={id:Nr,title:Jt.title||Jt.name,description:Jt.description,location:Jt.location,columnId:Jt.columnId||a.getDefaultColumn.id,accessLevel:Jt.accessLevel,style:Jt.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:Jt.createdAt||new Date().toISOString(),updatedAt:Jt.updatedAt||new Date().toISOString(),comments:Jt.comments||[],photos:Jt.photos||[]},B.value=!0};window.addEventListener("geonote:edit",Et),D.value&&(D.value.off("note:edit"),D.value.on("note:edit",bt))}catch(wt){console.error("Error during component mount:",wt),N.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),he(),localStorage.removeItem("lastPlanId")}}),Di(()=>o.hasUnsavedChanges,ft=>{console.log("[MapView][watch drawingStore.hasUnsavedChanges]",ft),ft&&N.value&&s.markUnsavedChanges()}),Di(()=>o.filters,(ft,rt)=>{if(console.log("[MapView][watch drawingStore.filters] Changement de filtres détecté:",JSON.stringify(ft,null,2)),rt){const wt=JSON.stringify(rt.accessLevels)!==JSON.stringify(ft.accessLevels),kn=JSON.stringify(rt.categories)!==JSON.stringify(ft.categories),Hn=JSON.stringify(rt.shapeTypes)!==JSON.stringify(ft.shapeTypes);console.log("[MapView][watch drawingStore.filters] Changements détectés:",{accessLevelsChanged:wt,categoriesChanged:kn,shapeTypesChanged:Hn}),wt||kn||Hn?(console.log("[MapView][watch drawingStore.filters] Mise à jour de l'affichage suite au changement de filtres"),Zn()):console.log("[MapView][watch drawingStore.filters] Aucun changement réel, pas de mise à jour")}else console.log("[MapView][watch drawingStore.filters] Mise à jour de l'affichage suite au changement de filtres"),Zn()},{deep:!0});const Te=ft=>{console.log("[MapView][filtersChanged] Événement reçu:",ft.detail),Zn()};go(()=>{window.addEventListener("filtersChanged",Te)}),Zu(()=>{window.removeEventListener("filtersChanged",Te),console.log("[MapView][filtersChanged] Événement désactivé")}),Di(()=>o.getFilteredElements,(ft,rt)=>{console.log("[MapView][watch drawingStore.getFilteredElements] Mise à jour de l'affichage, éléments filtrés:",{nouveaux:ft.length,anciens:rt?rt.length:"aucun",ids:ft.map(wt=>wt.id)}),console.log("[MapView][watch drawingStore.getFilteredElements] Mise à jour de l'affichage suite au changement d'elements filtrés"),Zn()},{deep:!0}),Di(m,async ft=>{var rt;console.log(`
[MapView][watch map] Nouvelle carte:`,!!ft),ft&&s.currentPlan&&!((rt=D.value)!=null&&rt.getLayers().length)&&(console.log("[MapView][watch map] Chargement initial des éléments du plan:",s.currentPlan.id),he(),await o.loadPlanElements(s.currentPlan.id))}),Di(()=>s.currentPlan,async(ft,rt)=>{var wt,kn,Hn;if((ft==null?void 0:ft.id)===(rt==null?void 0:rt.id)){console.log("[MapView][watch currentPlan] Plan identique, pas de rechargement nécessaire");return}console.log(`
[MapView][watch currentPlan] ====== CHANGEMENT DE PLAN ======`),console.log("[MapView][watch currentPlan] Nouveau plan:",ft==null?void 0:ft.id);try{if(ft){console.log("[MapView][watch currentPlan] Mise à jour du plan courant..."),N.value=ft;const wn=document.querySelector(".map-parent");wn instanceof HTMLElement&&(wn.style.display="block"),console.log("[MapView][watch currentPlan] Plan mis à jour avec succès")}else{console.log("[MapView][watch currentPlan] Nettoyage du plan courant..."),N.value=null,he();const wn=document.querySelector(".map-parent");wn instanceof HTMLElement&&(wn.style.display="none")}}catch(wn){console.error("[MapView][watch currentPlan] ERREUR:",wn),N.value=null,he()}console.log("[MapView][watch currentPlan] État final:",{currentPlanId:(wt=N.value)==null?void 0:wt.id,storePlanId:(kn=s.currentPlan)==null?void 0:kn.id,mapVisible:m.value!==null,mapParentDisplay:(Hn=document.querySelector(".map-parent"))==null?void 0:Hn.getAttribute("style")}),console.log(`[MapView][watch currentPlan] ====== FIN CHANGEMENT ======
`)},{immediate:!0}),Td(()=>{m.value&&m.value.off("moveend"),window.removeEventListener("shape:created",()=>{})});function Je(){i.value=!i.value}function he(){D.value&&(D.value.eachLayer(ft=>{var rt;((rt=ft.properties)==null?void 0:rt.type)==="Note"&&typeof ft.resetPlanSaveState=="function"&&ft.resetPlanSaveState()}),D.value.clearLayers()),c.value=[],Y(),v.value=null,p.value=""}async function ee(ft){return await gn.measureAsync("refreshMapWithPlan",async()=>{try{gn.measure("refreshMapWithPlan:clearMap",()=>{he()},"MapView"),await gn.measureAsync("refreshMapWithPlan:loadPlanElements",async()=>{await o.loadPlanElements(ft)},"MapView");const rt=gn.measure("refreshMapWithPlan:getPlanById",()=>s.getPlanById(ft),"MapView");rt?(gn.measure("refreshMapWithPlan:updateCurrentPlan",()=>{N.value=rt,s.setCurrentPlan(rt),o.setCurrentPlan(rt.id),localStorage.setItem("lastPlanId",rt.id.toString())},"MapView"),await gn.measureAsync("refreshMapWithPlan:loadPlanNotes",async()=>{try{console.log("[MapView][refreshMapWithPlan] Chargement des notes géolocalisées associées au plan:",ft);const kn=(await Sa.getNotesByPlan(ft)).data;console.log(`[MapView][refreshMapWithPlan] ${kn.length} notes géolocalisées récupérées`);const Hn=wf();m.value&&D.value&&kn.forEach(wn=>{try{if(Hn.addNote({...wn,id:wn.id,columnId:wn.column,accessLevel:wn.access_level}),wn.location&&wn.location.type==="Point"&&Array.isArray(wn.location.coordinates)&&wn.location.coordinates.length===2){const bt=kh.fromBackendData({name:wn.title,description:wn.description,location:wn.location,columnId:wn.column,accessLevel:wn.access_level,style:wn.style||{color:wn.color||"#3B82F6",weight:2,opacity:1,fillColor:wn.color||"#3B82F6",fillOpacity:.6,radius:8},category:wn.category||"forages",comments:wn.comments||[],photos:wn.photos||[]});bt._dbId=wn.id,D.value.addLayer(bt),c.value.push({id:wn.id,type:"Note",layer:bt,properties:bt.properties}),console.log("[MapView][refreshMapWithPlan] Note géolocalisée ajoutée à la carte:",{id:wn.id,title:wn.title,location:wn.location})}}catch(bt){console.error("[MapView][refreshMapWithPlan] Erreur lors de l'ajout de la note géolocalisée:",bt)}})}catch(wt){console.error("[MapView][refreshMapWithPlan] Erreur lors du chargement des notes géolocalisées:",wt)}},"MapView"),m.value&&D.value&&await gn.measureAsync("refreshMapWithPlan:addShapesToMap",async()=>{console.log("[MapView][refreshMapWithPlan] Éléments disponibles:",{count:o.getCurrentElements.length,elements:o.getCurrentElements.map(wn=>{var bt;return{id:wn.id,type:wn.type_forme,hasName:wn.data&&"name"in wn.data,name:(bt=wn.data)==null?void 0:bt.name}})});const wt=o.getCurrentElements.reduce((wn,bt)=>(wn[bt.type_forme]||(wn[bt.type_forme]=[]),wn[bt.type_forme].push(bt),wn),{}),kn=10,Hn=Object.entries(wt).map(async([wn,bt])=>{for(let Et=0;Et<bt.length;Et+=kn){const ln=bt.slice(Et,Et+kn);await Promise.all(ln.map(async Jt=>{await gn.measureAsync(`refreshMapWithPlan:createElement:${Jt.type_forme}`,async()=>{var Nr;if(!D.value||!Jt.data)return;let Ln=null;switch(Jt.type_forme){case"Circle":{const sn=Jt.data;sn.center&&sn.radius&&(Ln=new op($t.latLng(sn.center[1],sn.center[0]),{...sn.style,radius:sn.radius}),sn.name&&(Ln.properties={type:"Circle",name:sn.name,style:sn.style,radius:sn.radius,diameter:sn.radius*2,surface:Math.PI*sn.radius*sn.radius,perimeter:2*Math.PI*sn.radius},Ln.name=sn.name));break}case"Rectangle":{const sn=Jt.data;if(sn.bounds){const tn=$t.latLngBounds($t.latLng(sn.bounds.southWest[1],sn.bounds.southWest[0]),$t.latLng(sn.bounds.northEast[1],sn.bounds.northEast[0]));Ln=new $a(tn,sn.style),sn.name&&(Ln.properties={name:sn.name},Ln.name=sn.name)}break}case"Polygon":{const sn=Jt.data;if(sn.points&&sn.points.length>0){const tn=sn.points.map(jn=>$t.latLng(jn[1],jn[0]));Ln=new cd(tn,sn.style),sn.name&&(Ln.properties={name:sn.name},Ln.name=sn.name)}break}case"Line":{const sn=Jt.data;if(sn.points&&sn.points.length>0){const tn=sn.points.map(jn=>$t.latLng(jn[1],jn[0]));Ln=new na(tn,sn.style),sn.name&&(Ln.properties={name:sn.name},Ln.name=sn.name)}break}case"ElevationLine":{const sn=Jt.data;if(sn.points&&sn.points.length>0){const tn=sn.points.map(jn=>$t.latLng(jn[1],jn[0]));Ln=new Sd(tn,sn.style),sn.name&&(Ln.properties={name:sn.name,type:"ElevationLine",elevationData:sn.elevationData,minElevation:sn.minElevation,maxElevation:sn.maxElevation,elevationGain:sn.elevationGain,elevationLoss:sn.elevationLoss,averageSlope:sn.averageSlope,maxSlope:sn.maxSlope},Ln.name=sn.name),sn.elevationData&&(Ln.elevationData=sn.elevationData)}break}case"Note":{console.log("[MapView][refreshMapWithPlan] Création d'une note:",Jt.data);const sn=Jt.data;if(sn.location&&Array.isArray(sn.location)&&sn.location.length===2||sn.location&&typeof sn.location=="object"&&sn.location.type==="Point"&&Array.isArray(sn.location.coordinates)&&sn.location.coordinates.length===2)try{sn.category||(sn.category="forages",console.log("[MapView][refreshMapWithPlan] Catégorie par défaut ajoutée:",sn.category)),sn.accessLevel||(sn.accessLevel="private",console.log("[MapView][refreshMapWithPlan] Niveau d'accès par défaut ajouté:",sn.accessLevel));const jn=kh.fromBackendData(sn);jn._dbId=Jt.id,Ln=jn,console.log("[MapView][refreshMapWithPlan] Note créée:",{id:Jt.id,location:sn.location,name:sn.name,category:sn.category,accessLevel:sn.accessLevel,type:jn.properties.type})}catch(jn){console.error("[MapView][refreshMapWithPlan] Erreur lors de la création de la Note:",jn)}else console.error("[MapView][refreshMapWithPlan] Données invalides pour Note:",sn),console.log("[MapView][refreshMapWithPlan] Format de location attendu:",{formatArray:"[lat, lng]",formatGeoJSON:'{ type: "Point", coordinates: [lng, lat] }'});break}}Ln&&(Ln._dbId=Jt.id,(Nr=D.value)==null||Nr.addLayer(Ln),c.value.push({id:Jt.id,type:Jt.type_forme,layer:Ln,properties:Ln.properties}))},"MapView")})),await new Promise(Jt=>setTimeout(Jt,0))}});await Promise.all(Hn),gn.measure("refreshMapWithPlan:adjustView",()=>{V()},"MapView")},"MapView"),console.log(`Plan ${ft} chargé avec succès avec ${o.getCurrentElements.length} formes`)):console.error(`Plan ${ft} introuvable après chargement`),K.value=!1}catch(rt){throw console.error("Erreur lors du rafraîchissement de la carte:",rt),rt}},"MapView")}async function se(ft){return await gn.measureAsync("loadPlan",async()=>{var rt;console.log(`
[MapView][loadPlan] ====== DÉBUT CHARGEMENT PLAN ======`),console.log("[MapView][loadPlan] Tentative de chargement du plan:",ft);try{const wt=await gn.measureAsync("loadPlan:getPlanFromStore",async()=>s.getPlanById(ft),"MapView");if(console.log("[MapView][loadPlan] Plan trouvé dans le store:",!!wt),!wt){console.log("[MapView][loadPlan] Plan non trouvé dans le store, vérification API...");try{await gn.measureAsync("loadPlan:apiCheck",async()=>{await Un.get(`/plans/${ft}/`)},"MapView")}catch(kn){throw((rt=kn.response)==null?void 0:rt.status)===404&&(console.warn("[MapView][loadPlan] Plan non trouvé - Nettoyage du localStorage"),localStorage.removeItem("lastPlanId"),N.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),he()),kn}}console.log("[MapView][loadPlan] Rafraîchissement de la carte..."),await gn.measureAsync("loadPlan:refreshMap",async()=>{await ee(ft)},"MapView"),K.value=!1,console.log("[MapView][loadPlan] Invalidation de la taille de la carte..."),yn(),console.log("[MapView][loadPlan] Plan chargé avec succès:",{planId:ft,elementsCount:o.getCurrentElements.length})}catch(wt){throw console.error("Erreur lors du chargement du plan:",wt),gn.measure("loadPlan:errorRecovery",()=>{N.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),he(),localStorage.removeItem("lastPlanId")},"MapView"),wt}},"MapView")}async function le(){var ft;if(!N.value||!D.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}z.value=!0,U.value="saving";try{const rt=[],wt=new Set(o.getCurrentElements.filter(bt=>bt.id!==void 0).map(bt=>bt.id)),kn=new Set;console.log("[savePlan] Début de la sauvegarde",{featureGroupLayers:D.value.getLayers().length,existingIds:Array.from(wt),currentElements:o.getCurrentElements}),D.value.eachLayer(bt=>{var Ln,Nr,sn,tn,jn,zr,ki,zi,Qr,ur,wr,Rr,Lr,un,ss,pi,Ki,$i,Ni,Pr,Mr,Yo,Xs;console.log("[savePlan] Traitement de la couche",{type:(Ln=bt.properties)==null?void 0:Ln.type,name:(Nr=bt.properties)==null?void 0:Nr.name,isPolygon:bt instanceof $t.Polygon,properties:bt.properties});let Et,ln;const Jt={color:bt.options.color||"#2b6451",weight:bt.options.weight||3,opacity:bt.options.opacity||1,fillColor:bt.options.fillColor||"#2b6451",fillOpacity:bt.options.fillOpacity||.2,dashArray:bt.options.dashArray||""};if(bt instanceof $a){Et="Rectangle";const An=bt.getBounds();ln={bounds:{southWest:[An.getSouthWest().lng,An.getSouthWest().lat],northEast:[An.getNorthEast().lng,An.getNorthEast().lat]},style:Jt,name:((sn=bt.properties)==null?void 0:sn.name)||"",rotation:bt.getRotation(),width:bt.getDimensions().width,height:bt.getDimensions().height,center:[bt.getCenter().lng,bt.getCenter().lat]}}else if(bt instanceof $t.Circle)Et="Circle",ln={center:[bt.getLatLng().lng,bt.getLatLng().lat],radius:bt.getRadius(),name:((tn=bt.properties)==null?void 0:tn.name)||"",style:Jt};else if(bt instanceof $t.Rectangle){Et="Rectangle";const An=bt.getBounds();ln={bounds:{southWest:[An.getSouthWest().lng,An.getSouthWest().lat],northEast:[An.getNorthEast().lng,An.getNorthEast().lat]},name:((jn=bt.properties)==null?void 0:jn.name)||"",style:Jt}}else if(bt instanceof $t.Polyline&&!(bt instanceof $t.Polygon))if(((zr=bt.properties)==null?void 0:zr.type)==="ElevationLine"){Et="ElevationLine";const An=bt.getLatLngs(),Pn=((ki=bt.properties)==null?void 0:ki.category)||"forages",En=((zi=bt.properties)==null?void 0:zi.accessLevel)||"visitor";console.log("[savePlan] ElevationLine - Catégorie:",Pn,"Niveau d'accès:",En),ln={points:An.map(gi=>[gi.lng,gi.lat]),style:{...Jt,color:((Qr=bt.properties.style)==null?void 0:Qr.color)||"#FF4500",weight:((ur=bt.properties.style)==null?void 0:ur.weight)||4,opacity:((wr=bt.properties.style)==null?void 0:wr.opacity)||.8,_accessLevel:En,accessLevel:En},name:((Rr=bt.properties)==null?void 0:Rr.name)||"",category:Pn,accessLevel:En,elevationData:bt.properties.elevationData,samplePointStyle:bt.properties.samplePointStyle,minMaxPointStyle:bt.properties.minMaxPointStyle,minElevation:bt.properties.minElevation,maxElevation:bt.properties.maxElevation,elevationGain:bt.properties.elevationGain,elevationLoss:bt.properties.elevationLoss,averageSlope:bt.properties.averageSlope,maxSlope:bt.properties.maxSlope}}else{Et="Line";const An=bt.getLatLngs(),Pn=((Lr=bt.properties)==null?void 0:Lr.category)||"forages",En=((un=bt.properties)==null?void 0:un.accessLevel)||"visitor";console.log("[savePlan] Line - Catégorie:",Pn,"Niveau d'accès:",En),ln={points:An.map(gi=>[gi.lng,gi.lat]),name:((ss=bt.properties)==null?void 0:ss.name)||"",category:Pn,accessLevel:En,style:{...Jt,_accessLevel:En,accessLevel:En}}}else if(bt instanceof $t.Polygon&&!(bt instanceof $t.Rectangle)){Et="Polygon";const An=bt.getLatLngs()[0],Pn=((pi=bt.properties)==null?void 0:pi.category)||"forages",En=((Ki=bt.properties)==null?void 0:Ki.accessLevel)||"visitor";console.log("[savePlan] Polygon - Catégorie:",Pn,"Niveau d'accès:",En),ln={points:An.map(gi=>[gi.lng,gi.lat]),name:(($i=bt.properties)==null?void 0:$i.name)||"",category:Pn,accessLevel:En,style:{...Jt,_accessLevel:En,accessLevel:En}}}else if(((Ni=bt.properties)==null?void 0:Ni.type)==="Note"){console.log("[savePlan] Note géolocalisée détectée - sauvegarde via API dédiée");const An=bt;if(An._dbId&&typeof An._dbId=="number"&&kn.add(An._dbId),typeof An.saveNote=="function")try{if(An.properties&&(An.properties.style||(An.properties.style={}),An.properties.accessLevel&&(An.properties.style._accessLevel=An.properties.accessLevel,An.properties.style.accessLevel=An.properties.accessLevel),An.properties.style.color)){const Pn=An.properties.style.color;console.log("[savePlan] Préservation de la couleur existante:",Pn),An.properties.style.color=Pn,An.properties.style.fillColor=Pn}console.log("[savePlan] Sauvegarde de la note géolocalisée via API dédiée",{category:(Pr=An.properties)==null?void 0:Pr.category,accessLevel:(Mr=An.properties)==null?void 0:Mr.accessLevel,styleAccessLevel:(Xs=(Yo=An.properties)==null?void 0:Yo.style)==null?void 0:Xs.accessLevel}),N.value&&N.value.id?An.saveNote(N.value.id):An.saveNote()}catch(Pn){console.error("[savePlan] Erreur lors de la sauvegarde de la note:",Pn)}else console.warn("[savePlan] La note ne possède pas de méthode saveNote");Et=void 0,ln=void 0}if(Et&&ln){let An=bt._elementId;bt._dbId&&(An=bt._dbId,typeof An=="number"&&kn.add(An)),rt.push({id:An,type_forme:Et,data:ln})}}),console.log("[savePlan] Éléments à sauvegarder",{totalElements:rt.length,elements:rt.map(bt=>({type:bt.type_forme,hasPoints:"points"in bt.data,hasStyle:"style"in bt.data}))});const Hn=Array.from(wt).filter(bt=>!kn.has(bt));console.log("[savePlan] Éléments supprimés:",{existingIds:Array.from(wt),currentLayerIds:Array.from(kn),elementsToDelete:Hn}),o.elements=rt.filter(bt=>!bt.id||!Hn.includes(bt.id));const wn=await o.saveToPlan(N.value.id,{elementsToDelete:Hn});if(wn&&((ft=N.value)!=null&&ft.id)){const bt=N.value.id;N.value={...N.value,...wn},s.updatePlanDetails(bt,wn)}U.value="success",D.value&&D.value.eachLayer(bt=>{var Et;((Et=bt.properties)==null?void 0:Et.type)==="Note"&&typeof bt.resetPlanSaveState=="function"&&bt.resetPlanSaveState()}),setTimeout(()=>{U.value=null},3e3)}catch(rt){console.error("Erreur lors de la sauvegarde du plan:",rt),U.value=null}finally{z.value=!1}}Zu(()=>{$.user||Xe(),s.clearCurrentPlan(),o.clearCurrentPlan(),D.value&&D.value.off("note:edit"),window.removeEventListener("geonote:edit",()=>{}),window.removeEventListener("categoriesReactivated",()=>{}),window.removeEventListener("shapeTypesReactivated",()=>{}),window.removeEventListener("shape:created",()=>{}),window.removeEventListener("map-set-location",()=>{})});function ze(ft){var rt,wt,kn;if(console.log("[MapView][updateShapeProperties] Mise à jour des propriétés:",ft),A(ft),v.value&&((rt=v.value.properties)==null?void 0:rt.type)==="Note")if(console.log("[MapView][updateShapeProperties] Note géolocalisée détectée, sauvegarde via API dédiée"),typeof v.value.saveNote=="function")try{if(ft.category&&(v.value.properties.category=ft.category),ft.accessLevel&&(v.value.properties.accessLevel=ft.accessLevel,v.value.properties.style||(v.value.properties.style={}),v.value.properties.style._accessLevel=ft.accessLevel,v.value.properties.style.accessLevel=ft.accessLevel),v.value.properties.style&&v.value.properties.style.color){const Hn=v.value.properties.style.color;console.log("[MapView][updateShapeProperties] Préservation de la couleur existante:",Hn),v.value.properties.style.color=Hn,v.value.properties.style.fillColor=Hn}console.log("[MapView][updateShapeProperties] Sauvegarde de la note géolocalisée via API dédiée",{category:(wt=v.value.properties)==null?void 0:wt.category,accessLevel:(kn=v.value.properties)==null?void 0:kn.accessLevel,updatedProperties:ft}),N.value&&N.value.id?v.value.saveNote(N.value.id):v.value.saveNote(),v.value.bindPopup&&v.value.createPopupContent&&(console.log("[MapView][updateShapeProperties] Forçage de la mise à jour du popup après la sauvegarde"),v.value.bindPopup(v.value.createPopupContent()))}catch(Hn){console.error("[MapView][updateShapeProperties] Erreur lors de la sauvegarde de la note:",Hn)}else console.warn("[MapView][updateShapeProperties] La note ne possède pas de méthode saveNote");else if(ft.category&&v.value&&v.value._dbId){const Hn=v.value._dbId,wn=o.elements.find(bt=>bt.id===Hn);if(wn){console.log(`[MapView][updateShapeProperties] Mise à jour de la catégorie dans le store: ${ft.category} pour l'élément ${Hn}`);const bt=wn;bt.data||(bt.data={}),bt.data.category=ft.category,o.$patch({unsavedChanges:!0})}}}function Se(ft){try{const rt=new Date(ft);return isNaN(rt.getTime())?(console.error("Date invalide reçue:",ft),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(rt)}catch(rt){return console.error("Erreur lors du formatage de la date:",rt),"Date invalide"}}const ve=()=>{D.value&&V()},$e=async()=>{var ft;if(v.value&&D.value){const rt=v.value._leaflet_id,wt=v.value._dbId;if(((ft=v.value.properties)==null?void 0:ft.type)==="Note"&&wt)try{console.log(`[MapView][deleteSelectedShape] Suppression de la note ${wt} du backend...`),await Sa.deleteNote(wt),a.removeNote(wt),console.log(`[MapView][deleteSelectedShape] Note ${wt} supprimée avec succès du backend et du store`),l.success("Note supprimée avec succès")}catch(Hn){console.error(`[MapView][deleteSelectedShape] Erreur lors de la suppression de la note ${wt} du backend:`,Hn),l.error("Erreur lors de la suppression de la note")}E(""),D.value.removeLayer(v.value),c.value=c.value.filter(Hn=>Hn.layer&&Hn.layer._leaflet_id!==rt),console.log(`[MapView][deleteSelectedShape] Forme ${rt} (dbId: ${wt}) supprimée du featureGroup et de shapes.value`),v.value=null}};async function Ge(ft){console.log(`onPlanCreated - Tentative de chargement du plan ${ft}`),await s.fetchPlans();const rt=s.getPlanById(ft);rt?(console.log(`Plan ${ft} trouvé, chargement en cours...`),localStorage.setItem("lastPlanId",ft.toString()),N.value=rt,s.setCurrentPlan(rt),o.setCurrentPlan(rt.id),F.value=!1,yn(),console.log(`Plan ${ft} chargé avec succès`)):console.error(`Plan ${ft} introuvable après création! Vérifiez les permissions.`)}Di(we,async ft=>{var rt;if(ft&&((rt=$.user)==null?void 0:rt.user_type)==="admin"){Z.value=!0;try{const wt=await $.fetchSalarieVisiteurs(ft.id);Q.value=Array.isArray(wt)?wt:[wt]}catch(wt){console.error("[MapView][watch selectedSalarie] Error:",wt),Q.value=[]}finally{Z.value=!1}}});function Xe(){localStorage.removeItem("lastPlanId")}function lt(ft,rt="m"){return rt==="m²"?`${(ft/1e4).toFixed(2)} ha`:rt==="m"?ft>=1e3?`${(ft/1e3).toFixed(2)} km`:`${ft.toFixed(2)} m`:`${ft.toFixed(2)} ${rt}`}const qe=Ct(!1);function Lt(ft){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",TextRectangle:"Annotation",ElevationLine:"Profil altimétrique"}[ft]||ft}async function Gt(){var rt,wt,kn,Hn,wn,bt,Et,ln,Jt,Ln;if(!N.value||!m.value||!D.value){console.error("[generateSynthesis] Plan, map ou featureGroup manquant");return}const ft=N.value;try{console.log("[generateSynthesis] Début de la génération"),console.log("[generateSynthesis] Plan courant complet:",ft),await le();let ur=ft;if(!ft.salarie_details&&!ft.entreprise_details&&!ft.client_details){console.log("[generateSynthesis] Détails manquants, tentative de récupération...");try{const Mr=await Un.get(`/plans/${ft.id}/`);Mr.status===200&&(console.log("[generateSynthesis] Plan mis à jour:",Mr.data),N.value={...ft,...Mr.data},ur=Mr.data,s.updatePlanDetails(ft.id,Mr.data))}catch(Mr){console.error("[generateSynthesis] Erreur lors de la récupération des détails:",Mr)}}await new Promise(Mr=>setTimeout(Mr,1e3)),qe.value=!0;const wr=ur.salarie_details,Rr=ur.client_details,Lr=(wr==null?void 0:wr.entreprise_details)||ur.entreprise_details;console.log("[generateSynthesis] Détails du plan utilisé:",ur),console.log("[generateSynthesis] Détails des utilisateurs:",{salarie:wr?{id:wr.id,nom:`${wr.first_name} ${wr.last_name}`,company:wr.company_name,logo:wr.logo}:null,entreprise:Lr?{id:Lr.id,nom:`${Lr.first_name} ${Lr.last_name}`,company:Lr.company_name,logo:Lr.logo}:null,client:Rr?{id:Rr.id,nom:`${Rr.first_name} ${Rr.last_name}`,company:Rr.company_name}:null}),v.value&&(Y(),v.value=null);const un=new Dr("l","mm","a4");console.log("[generateSynthesis] Chargement du logo de l'application");const ss=new Image;ss.src=e5,await new Promise(Mr=>{ss.onload=()=>{console.log("[generateSynthesis] Logo application chargé"),Mr()},ss.onerror=Yo=>{console.error("[generateSynthesis] Erreur chargement logo application:",Yo),Mr()}}),console.log("[generateSynthesis] Tentative de chargement du logo entreprise:",Lr==null?void 0:Lr.logo);let pi=null;Lr!=null&&Lr.logo&&(pi=new Image,pi.src=Lr.logo,await new Promise(Mr=>{pi?(pi.onload=()=>{console.log("[generateSynthesis] Logo entreprise chargé avec succès"),Mr()},pi.onerror=Yo=>{console.error("[generateSynthesis] Erreur chargement logo entreprise:",Yo),Mr()}):Mr()})),console.log("[generateSynthesis] Tentative de chargement du logo salarie:",wr==null?void 0:wr.logo);let Ki=null;wr!=null&&wr.logo&&(Ki=new Image,Ki.src=wr.logo,await new Promise(Mr=>{Ki?(Ki.onload=()=>{console.log("[generateSynthesis] Logo salarie chargé avec succès"),Mr()},Ki.onerror=Yo=>{console.error("[generateSynthesis] Erreur chargement logo salarie:",Yo),Mr()}):Mr()})),console.log("[generateSynthesis] Ajout des logos au PDF:",{logoApplication:!0,logoEntreprise:pi!==null,logoSalarie:Ki!==null}),pi!==null&&un.addImage(pi,"JPEG",148.5-40-30,20,40,40),un.addImage(ss,"JPEG",148.5-40/2,20,40,40),Ki!==null&&un.addImage(Ki,"JPEG",148.5+30,20,40,40),un.setFontSize(24),un.setTextColor(0),un.text(ft.nom||"Sans titre",297/2,100,{align:"center"});let $i=120;if(Lr&&(un.setFontSize(14),un.setFont("helvetica","bold"),un.text("Entreprise:",20,$i),un.setFont("helvetica","normal"),un.text(`${Lr.first_name} ${Lr.last_name}${Lr.company_name?` (${Lr.company_name})`:""}`,20,$i+6),$i+=15),wr&&(un.setFontSize(14),un.setFont("helvetica","bold"),un.text("Salarie:",20,$i),un.setFont("helvetica","normal"),un.text(`${wr.first_name} ${wr.last_name}${wr.company_name?` (${wr.company_name})`:""}`,20,$i+6),$i+=15),Rr&&(un.setFontSize(14),un.setFont("helvetica","bold"),un.text("Client:",20,$i),un.setFont("helvetica","normal"),un.text(`${Rr.first_name} ${Rr.last_name}${Rr.company_name?` (${Rr.company_name})`:""}`,20,$i+6),$i+=15),ft.description){un.setFont("helvetica","bold"),un.text("Description:",20,$i),un.setFont("helvetica","normal");const Mr=un.splitTextToSize(ft.description,150);un.text(Mr,20,$i+6),$i+=8*Mr.length+10}$i=Math.min($i,180),un.setFontSize(10),un.setTextColor(100),un.text(`Date de création: ${Se(ft.date_creation)}`,20,190),un.text(`Dernière modification: ${Se(ft.date_modification)}`,277,190,{align:"right"});const Ni=[];D.value.eachLayer(Mr=>Ni.push(Mr));const Pr=$t.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar",".leaflet-grid-layer",".leaflet-grid-label"],preventDownload:!0}).addTo(m.value);await new Promise(Mr=>setTimeout(Mr,3e3));for(let Mr=0;Mr<Ni.length;Mr++){un.addPage(),un.setFillColor(248,250,252),un.setDrawColor(226,232,240),un.rect(0,0,297,25,"F"),un.setFontSize(10),un.setTextColor(50,50,50),un.setFont("helvetica","bold"),un.text(ft.nom||"Sans titre",20,12);let An=297-20-(15*(1+(pi!==null?1:0)+(Ki!==null?1:0))+5*(1+(pi!==null?1:0)));pi!==null&&(un.addImage(pi,"JPEG",An,5,15,15),An+=20),un.addImage(ss,"JPEG",An,5,15,15),An+=20,Ki!==null&&un.addImage(Ki,"JPEG",An,5,15,15),un.setDrawColor(200,200,200),un.setLineWidth(.5),un.line(0,25,297,25);const Pn=Ni[Mr],En=Pn.properties;if(En){un.setTextColor(0),un.setFontSize(14),un.setFont("helvetica","bold");const gi=En.name||Lt(En.type);let mi="";if(En.type!=="TextRectangle"){const Xn=te(Ni,Pn);mi=Xn>0?` (surface totale d'irrigation : ${lt(Xn,"m²")})`:""}const Zi=`${gi}${mi}`;un.text(Zi,20,35)}if(En&&En.type==="ElevationLine")try{const gi=((rt=Pn.getBounds)==null?void 0:rt.call(Pn))||((wt=Pn.getLatLng)==null?void 0:wt.call(Pn));gi&&m.value.fitBounds(gi instanceof $t.LatLng?$t.latLngBounds([gi]):gi,{padding:[50,50]});try{const bn=((kn=Pn.getBounds)==null?void 0:kn.call(Pn))||((Hn=Pn.getLatLng)==null?void 0:Hn.call(Pn));if(!bn||!m.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const cn=bn instanceof $t.LatLng?$t.latLngBounds([bn]):bn;cn&&cn.isValid&&cn.isValid()&&m.value.getContainer()&&document.body.contains(m.value.getContainer())&&m.value.fitBounds(cn,{padding:[50,50],animate:!1})}}catch(bn){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",bn)}await new Promise(bn=>setTimeout(bn,2e3)),m.value.invalidateSize();try{m.value&&m.value.getContainer()&&document.body.contains(m.value.getContainer())?m.value.invalidateSize({animate:!1}):console.warn("[generateSynthesis] Carte non valide pour l'invalidation de taille")}catch(bn){console.warn("[generateSynthesis] Erreur lors de l'invalidation de la taille de la carte:",bn)}await new Promise(bn=>{const cn=()=>{var To;const $r=(To=m.value)==null?void 0:To.getContainer();if(!$r){bn();return}const Gi=$r.querySelectorAll(".leaflet-tile-loaded");$r.querySelectorAll(".leaflet-tile-loading").length===0&&Gi.length>0?bn():setTimeout(cn,100)};cn()});const mi=await Pr.takeScreen("image"),Zi=await new Promise((bn,cn)=>{const $r=new Image;$r.onload=()=>bn($r),$r.onerror=Gi=>cn(Gi),$r.src=mi}),Xn=40,kr=237/2,zs=Math.min(70,Zi.height*kr/Zi.width);if(un.addImage(Zi,"PNG",20,Xn,kr,zs),En.elevationData&&En.elevationData.length>0){const bn=document.createElement("canvas");bn.width=800,bn.height=400;const cn=bn.getContext("2d");if(cn){const $r=En.elevationData,Gi=En.minElevation,Ao=En.maxElevation,Ol=(Ao-Gi)*.05,Ns=Gi-Ol,ia=Ao+Ol,oi=40,Pa=bn.width-2*oi,xi=bn.height-2*oi,sa=ei=>oi+ei/$r[$r.length-1].distance*Pa,Do=ei=>oi+xi-(ei-Ns)/(ia-Ns)*xi;cn.fillStyle="#f8fafc",cn.fillRect(0,0,bn.width,bn.height),cn.fillStyle="#334155",cn.font="bold 20px Arial",cn.textAlign="center",cn.fillText("Profil altimétrique",bn.width/2,25),cn.strokeStyle="#e2e8f0",cn.lineWidth=1,cn.beginPath(),cn.moveTo(oi,oi),cn.lineTo(oi,xi+oi),cn.lineTo(Pa+oi,xi+oi),cn.strokeStyle="#94a3b8",cn.stroke();const yr=5;for(let ei=0;ei<=yr;ei++){const Js=Ns+ei/yr*(ia-Ns),Qs=Do(Js);cn.beginPath(),cn.strokeStyle="#e2e8f0",cn.moveTo(oi,Qs),cn.lineTo(Pa+oi,Qs),cn.stroke(),cn.beginPath(),cn.strokeStyle="#94a3b8",cn.moveTo(oi-5,Qs),cn.lineTo(oi,Qs),cn.stroke(),cn.fillStyle="#64748b",cn.font="12px Arial",cn.textAlign="right",cn.fillText(`${Math.round(Js)}m`,oi-8,Qs+4)}const xr=5,Ko=$r[$r.length-1].distance;for(let ei=0;ei<=xr;ei++){const Js=ei/xr*Ko,Qs=sa(Js);cn.beginPath(),cn.strokeStyle="#e2e8f0",cn.moveTo(Qs,oi),cn.lineTo(Qs,xi+oi),cn.stroke(),cn.beginPath(),cn.strokeStyle="#94a3b8",cn.moveTo(Qs,xi+oi),cn.lineTo(Qs,xi+oi+5),cn.stroke(),cn.fillStyle="#64748b",cn.font="12px Arial",cn.textAlign="center",cn.fillText(`${Math.round(Js)}m`,Qs,xi+oi+16)}const Vr=cn.createLinearGradient(0,oi,0,xi+oi);Vr.addColorStop(0,"rgba(255, 69, 0, 0.8)"),Vr.addColorStop(1,"rgba(255, 69, 0, 0.2)"),cn.beginPath(),cn.moveTo(sa($r[0].distance),Do($r[0].elevation)),$r.forEach((ei,Js)=>{Js>0&&cn.lineTo(sa(ei.distance),Do(ei.elevation))}),cn.strokeStyle="#FF4500",cn.lineWidth=2,cn.stroke(),cn.lineTo(sa($r[$r.length-1].distance),Do(Ns)),cn.lineTo(sa($r[0].distance),Do(Ns)),cn.closePath(),cn.fillStyle=Vr,cn.fill(),$r.forEach(ei=>{cn.beginPath(),cn.arc(sa(ei.distance),Do(ei.elevation),3,0,Math.PI*2),cn.fillStyle="#FF4500",cn.fill(),cn.strokeStyle="white",cn.lineWidth=1,cn.stroke()});let ml=0,ga=0;for(let ei=0;ei<$r.length;ei++)$r[ei].elevation===Gi&&(ml=ei),$r[ei].elevation===Ao&&(ga=ei);cn.beginPath(),cn.arc(sa($r[ga].distance),Do($r[ga].elevation),6,0,Math.PI*2),cn.fillStyle="#059669",cn.fill(),cn.strokeStyle="white",cn.lineWidth=2,cn.stroke(),cn.beginPath(),cn.arc(sa($r[ml].distance),Do($r[ml].elevation),6,0,Math.PI*2),cn.fillStyle="#DC2626",cn.fill(),cn.strokeStyle="white",cn.lineWidth=2,cn.stroke(),cn.font="12px Arial",cn.fillStyle="#059669",cn.textAlign="left",cn.fillText(`Point haut: ${lt(Ao,"m")}`,oi,xi+oi+35),cn.fillStyle="#DC2626",cn.fillText(`Point bas: ${lt(Gi,"m")}`,oi+200,xi+oi+35);const Ha=bn.toDataURL("image/png");un.addImage(Ha,"PNG",20+kr+20,Xn,kr,zs)}}const vr=Xn+zs+15;un.setFillColor(248,250,252),un.setDrawColor(226,232,240),un.roundedRect(20,vr,257,50,3,3,"FD"),un.setFont("helvetica","bold"),un.setFontSize(12),un.setTextColor(51,65,85),un.text("Caractéristiques",30,vr+10);const ps=[{label:"Distance totale",value:lt(En.length||0)},{label:"Dénivelé positif",value:lt(En.elevationGain||0,"m")},{label:"Dénivelé négatif",value:lt(En.elevationLoss||0,"m")}],us=[{label:"Pente moyenne",value:`${(En.averageSlope||0).toFixed(1)}%`},{label:"Pente maximale",value:`${(En.maxSlope||0).toFixed(1)}%`},{label:"Altitude min/max",value:`${lt(En.minElevation||0,"m")} / ${lt(En.maxElevation||0,"m")}`}];let Ss=vr+20;un.setFont("helvetica","normal"),un.setFontSize(10),ps.forEach(bn=>{un.setTextColor(100,116,139),un.text(bn.label,30,Ss),un.setTextColor(15,23,42),un.setFont("helvetica","bold"),un.text(bn.value,110,Ss),un.setFont("helvetica","normal"),Ss+=9}),Ss=vr+20;const Yr=297/2;us.forEach(bn=>{un.setTextColor(100,116,139),un.text(bn.label,Yr,Ss),un.setTextColor(15,23,42),un.setFont("helvetica","bold"),un.text(bn.value,Yr+80,Ss),un.setFont("helvetica","normal"),Ss+=9})}catch(gi){console.error("[generateSynthesis] Erreur traitement profil altimétrique:",gi)}else{const gi=((wn=Pn.getBounds)==null?void 0:wn.call(Pn))||((bt=Pn.getLatLng)==null?void 0:bt.call(Pn));gi&&m.value.fitBounds(gi instanceof $t.LatLng?$t.latLngBounds([gi]):gi,{padding:[50,50]});try{const mi=((Et=Pn.getBounds)==null?void 0:Et.call(Pn))||((ln=Pn.getLatLng)==null?void 0:ln.call(Pn));if(!mi||!m.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const Zi=mi instanceof $t.LatLng?$t.latLngBounds([mi]):mi;Zi&&Zi.isValid&&Zi.isValid()&&m.value.getContainer()&&document.body.contains(m.value.getContainer())&&m.value.fitBounds(Zi,{padding:[50,50],animate:!1})}}catch(mi){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",mi)}await new Promise(mi=>setTimeout(mi,2e3)),m.value.invalidateSize(),await new Promise(mi=>{const Zi=()=>{var vr;const Xn=(vr=m.value)==null?void 0:vr.getContainer();if(!Xn){mi();return}const kr=Xn.querySelectorAll(".leaflet-tile-loaded");Xn.querySelectorAll(".leaflet-tile-loading").length===0&&kr.length>0?mi():setTimeout(Zi,100)};Zi()});try{const mi=await Pr.takeScreen("image"),Zi=await new Promise((vr,ps)=>{const us=new Image;us.onload=()=>vr(us),us.onerror=Ss=>ps(Ss),us.src=mi}),Xn=45,kr=297*.6-30;let zs=Zi.height*kr/Zi.width;if(zs>210*.9&&(zs=210*.9),un.addImage(Zi,"PNG",20,Xn,kr,zs),En){let vr=function(cn,$r,Gi,Ao,To){un.setTextColor(100,116,139),un.setFont("helvetica","normal"),un.text(cn,Gi+10,Ao),un.setTextColor(15,23,42),un.setFont("helvetica","bold"),un.text($r,Gi+To-10,Ao,{align:"right"})},us=0;if(En.type==="Circle")us=4;else if(En.type==="Rectangle")us=4;else if(En.type==="Line")us=1,(Jt=En.dimensions)!=null&&Jt.width&&us++,En.surfaceInfluence&&us++;else if(En.type==="Semicircle")us=6;else if(En.type==="Polygon")us=2;else if(En.type==="CircleWithSections"&&(us=3,En.sections&&En.sections.length>0)){const cn=Math.ceil(En.sections.length/3);us+=cn*3}const Ss=Math.max(15+us*12+30,60),Yr=297-188.2-20;un.setFillColor(248,250,252),un.setDrawColor(226,232,240),un.roundedRect(188.2,Xn,Yr,Ss,3,3,"FD"),un.setFont("helvetica","bold"),un.setFontSize(12),un.setTextColor(51,65,85),un.text("Caractéristiques",188.2+10,Xn+15);let bn=Xn+30;un.setFontSize(10),En.type==="Circle"?(vr("Rayon",lt(En.radius),188.2,bn,Yr),bn+=12,vr("Diamètre",lt(En.radius*2),188.2,bn,Yr),bn+=12,vr("Surface",lt(En.surface,"m²"),188.2,bn,Yr),bn+=12,vr("Périmètre",lt(En.perimeter),188.2,bn,Yr)):En.type==="Rectangle"?(vr("Largeur",lt(En.width),188.2,bn,Yr),bn+=12,vr("Hauteur",lt(En.height),188.2,bn,Yr),bn+=12,vr("Surface",lt(En.surface,"m²"),188.2,bn,Yr),bn+=12,vr("Périmètre",lt(En.perimeter),188.2,bn,Yr)):En.type==="Line"?(vr("Longueur",lt(En.length),188.2,bn,Yr),bn+=12,(Ln=En.dimensions)!=null&&Ln.width&&(vr("Largeur d'influence",lt(En.dimensions.width),188.2,bn,Yr),bn+=12),En.surfaceInfluence&&vr("Surface d'influence",lt(En.surfaceInfluence,"m²"),188.2,bn,Yr)):En.type==="Semicircle"?(vr("Rayon",lt(En.radius),188.2,bn,Yr),bn+=12,vr("Diamètre",lt(En.radius*2),188.2,bn,Yr),bn+=12,vr("Surface",lt(En.surface,"m²"),188.2,bn,Yr),bn+=12,vr("Périmètre",lt(En.perimeter),188.2,bn,Yr),bn+=12,vr("Longueur d'arc",lt(En.arcLength),188.2,bn,Yr),bn+=12,vr("Angle d'ouverture",`${En.openingAngle.toFixed(1)}°`,188.2,bn,Yr)):En.type==="Polygon"?(vr("Surface",lt(En.surface,"m²"),188.2,bn,Yr),bn+=12,vr("Périmètre",lt(En.perimeter),188.2,bn,Yr)):En.type==="CircleWithSections"&&(vr("Rayon",lt(En.radius),188.2,bn,Yr),bn+=12,vr("Surface totale",lt(En.surface,"m²"),188.2,bn,Yr),bn+=12,vr("Périmètre",lt(En.perimeter),188.2,bn,Yr),bn+=20,En.sections&&En.sections.length>0&&(bn=ls(En.sections,un,188.2,bn,Yr)))}}catch(mi){console.error(`[generateSynthesis] Erreur capture forme ${Mr+1}:`,mi)}}}m.value.removeControl(Pr),un.save(`synthese_${ft.nom}.pdf`)}catch(Nr){console.error("[generateSynthesis] Erreur:",Nr),alert("Une erreur est survenue lors de la génération de la synthèse. Veuillez réessayer.")}finally{qe.value=!1}}const rn=IE.debounce(()=>{const ft=gn.startMeasure("invalidateMapSize","MapView");if(!m.value){ft();return}ca(()=>{gn.measure("invalidateMapSize:nextTick",()=>{var rt;try{if(m.value&&m.value.getContainer()&&document.body.contains(m.value.getContainer())){if(m.value.invalidateSize({animate:!1}),(rt=D.value)!=null&&rt.getLayers().length)try{V()}catch(wt){console.warn("[invalidateMapSize] Erreur lors de l'ajustement de la vue:",wt)}}else console.warn("[invalidateMapSize] Carte non valide pour l'invalidation")}catch(wt){console.warn("[invalidateMapSize] Erreur lors de l'invalidation de la taille de la carte:",wt)}ft()},"MapView")})},250);function yn(){rn()}Di(N,(ft,rt)=>{ft&&ft.id!==(rt==null?void 0:rt.id)&&ca(()=>{yn()})});const Ye=Ct(null),at=Ct(!1),it=Ct([]),Vt=Jn(()=>{if(console.log("[MapView][filteredSalaries] Computing with:",{selectedEntreprise:Ye.value,salaries:re.value,salariesLength:re.value.length}),!Ye.value)return[];const ft=re.value.filter(rt=>{var Hn,wn,bt;const wt=rt.entreprise,kn=typeof wt=="object"&&wt!==null?wt.id:wt;return console.log("[MapView][filteredSalaries] Checking salarie:",{salarie:rt,salarieEntreprise:wt,salarieEntrepriseId:kn,selectedEntrepriseId:(Hn=Ye.value)==null?void 0:Hn.id,matches:kn===((wn=Ye.value)==null?void 0:wn.id)}),kn===((bt=Ye.value)==null?void 0:bt.id)});return console.log("[MapView][filteredSalaries] Filtered result:",ft),ft});function Yt(ft){if(!ft)return"";const rt=ft.first_name||"",wt=ft.last_name?ft.last_name.toUpperCase():"",kn=ft.company_name||ft.role||"";return`${rt} ${wt} (${kn})`}async function In(){at.value=!0;try{const ft=await Un.get("/users/",{params:{role:"ENTREPRISE"}});it.value=ft.data}catch(ft){console.error("[MapView] Error loading entreprises:",ft),it.value=[]}finally{at.value=!1}}async function Sn(ft){console.log("[MapView][selectEntreprise] Sélection de l'entreprise:",ft),Ye.value=ft,H.value=!0;try{console.log("[MapView][selectEntreprise] Envoi de la requête avec params:",{role:"SALARIE",entreprise:ft.id});const rt=await Un.get("/users/",{params:{role:"SALARIE",entreprise:ft.id}});console.log("[MapView][selectEntreprise] Réponse reçue:",rt.data),re.value=rt.data,console.log("[MapView][selectEntreprise] Salaries mis à jour:",re.value)}catch(rt){console.error("[MapView] Error loading salaries for entreprise:",rt),re.value=[]}finally{H.value=!1}}function Nn(){Ye.value=null,we.value=null,ae.value=null,re.value=[],Q.value=[],_e.value=[]}function Qn(){we.value=null,ae.value=null,Q.value=[],_e.value=[]}function Xt(){ae.value=null,_e.value=[]}async function Cn(ft){var rt,wt,kn,Hn,wn,bt;console.log(`
[MapView][selectSalarie] ====== DÉBUT SÉLECTION SALARIE ======`),console.log("Informations du salarie:",{id:ft.id,username:ft.username,company:ft.company_name,role:ft.role}),console.log("Contexte utilisateur:",{userType:(rt=$.user)==null?void 0:rt.user_type,userId:(wt=$.user)==null?void 0:wt.id,userRole:(kn=$.user)==null?void 0:kn.role,selectedEntrepriseId:(Hn=Ye.value)==null?void 0:Hn.id}),we.value=ft,Z.value=!0;try{const Et={role:"VISITEUR",salarie:ft.id};$.isEntreprise?(console.log("Ajout de l'ID de l'entreprise connectée:",(wn=$.user)==null?void 0:wn.id),Et.entreprise=(bt=$.user)==null?void 0:bt.id):Ye.value&&(console.log("Ajout de l'ID de l'entreprise sélectionnée:",Ye.value.id),Et.entreprise=Ye.value.id),console.log("Paramètres de la requête:",Et);const ln=await Un.get("/users/",{params:Et});console.log("Réponse reçue du serveur:",{status:ln.status,dataLength:Array.isArray(ln.data)?ln.data.length:"non-array",data:ln.data}),Array.isArray(ln.data)?(Q.value=ln.data,console.log(`${ln.data.length} visiteurs chargés`),ln.data.forEach((Jt,Ln)=>{console.log(`Visiteur ${Ln+1}:`,{id:Jt.id,username:Jt.username,company:Jt.company_name,salarie:Jt.salarie})})):(console.warn("Format de réponse inattendu:",ln.data),Q.value=[]),Q.value.length===0&&console.warn("Aucun visiteur trouvé pour ce salarie")}catch(Et){if(console.error("ERREUR lors du chargement des visiteurs:",Et),Et&&typeof Et=="object"&&"response"in Et){const ln=Et;console.error("Détails de l'erreur:",{status:ln.response.status,data:ln.response.data})}Q.value=[]}finally{Z.value=!1,console.log(`[MapView][selectSalarie] ====== FIN SÉLECTION SALARIE ======
`)}}function Dn(){B.value=!1,j.value=null}function rr(ft){console.log("[MapView][handleFilterChange] Nouveaux filtres reçus:",JSON.stringify(ft,null,2)),console.log("[MapView][handleFilterChange] Filtres actuels dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2)),console.log("[MapView][handleFilterChange] Mise à jour des filtres dans le store"),o.updateFilters(ft),console.log("[MapView][handleFilterChange] Éléments dans le store:",{count:o.elements.length,ids:o.elements.map(rt=>rt.id)}),console.log("[MapView][handleFilterChange] Mise à jour de l'affichage de la carte"),Zn(),setTimeout(()=>{console.log("[MapView][handleFilterChange] Mise à jour forcée de l'affichage"),Zn()},100),console.log("[MapView][handleFilterChange] Traitement des filtres terminé")}function Zn(){if(!D.value)return;const ft=[];c.value.forEach((tn,jn)=>{tn.layer&&!tn.id&&(!tn.layer.properties||tn.layer.properties&&!tn.layer.properties.type)&&(console.log(`[MapView][updateMapDisplay] Nettoyage préventif de la couche temporaire ${tn.layer._leaflet_id}`),ft.push(jn))});for(let tn=ft.length-1;tn>=0;tn--)c.value.splice(ft[tn],1);const rt={accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}};console.log("[MapView][updateMapDisplay] Mise à jour de l'affichage avec filtres:",JSON.stringify(rt,null,2));const wt={count:o.elements.length,elements:o.elements.map(tn=>({id:tn.id,type_forme:tn.type_forme}))};console.log("[MapView][updateMapDisplay] Éléments dans le store:",JSON.stringify(wt,null,2));const kn=o.getFilteredElements;console.log("[MapView][updateMapDisplay] Éléments filtrés:",{total:o.elements.length,filtered:kn.length,filteredIds:kn.map(tn=>tn.id)});const Hn=D.value.getLayers();console.log("[MapView][updateMapDisplay] Couches actuelles:",Hn.length);const wn=Hn.map(tn=>({_leaflet_id:tn._leaflet_id,_dbId:tn._dbId,hasProperties:!!tn.properties,propertyType:tn.properties?tn.properties.type:null,category:tn.properties?tn.properties.category:null}));console.log("[MapView][updateMapDisplay] Détails des couches:",JSON.stringify(wn,null,2)),console.log("[MapView][updateMapDisplay] État des filtres pour les catégories:",{forages:o.filters.categories.forages,clients:o.filters.categories.clients,entrepots:o.filters.categories.entrepots,livraisons:o.filters.categories.livraisons,cultures:o.filters.categories.cultures,parcelles:o.filters.categories.parcelles});const bt=new Map;c.value.forEach(tn=>{tn.layer&&tn.id&&bt.set(tn.id,tn.layer)});const Et=new Map;Hn.forEach(tn=>{tn._dbId&&Et.set(tn,tn._dbId)});const ln=new Set(kn.map(tn=>tn.id));console.log("[MapView][updateMapDisplay] Début du traitement des couches");const Jt=Array.from(ln);console.log("[MapView][updateMapDisplay] IDs des éléments filtrés:",JSON.stringify(Jt));let Ln=0,Nr=0,sn=0;Hn.forEach(tn=>{var Ki,$i;const jn=tn._dbId,zr=tn._leaflet_id;if(!jn){if(!tn.properties){sn++,console.log(`[MapView][updateMapDisplay] Couche ${zr} sans dbId et sans propriétés, ignorée`);return}tn._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[MapView][updateMapDisplay] Couche ${zr} sans dbId, ID temporaire assigné: ${tn._dbId}`)}const ki=tn.properties||{},zi=ki.type||tn.type_forme||"";let Qr=ki.category;if(tn._dbId){const Ni=o.elements.find(Pr=>Pr.id===tn._dbId);if(Ni){const Pr=Ni.data;Pr&&Pr.category&&(Qr!==Pr.category&&(console.log(`[MapView][updateMapDisplay] Catégorie différente détectée - Propriétés: ${Qr}, Store: ${Pr.category} pour la couche ${tn._dbId}`),Qr=Pr.category),tn.properties||(tn.properties={}),tn.properties.category=Qr)}}Qr||(Qr="default");const ur=ki.accessLevel||"visitor";console.log(`[MapView][updateMapDisplay] Couche ${zr} (dbId: ${tn._dbId}): type=${zi}, category=${Qr}, accessLevel=${ur}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify(o.filters));let wr=!1;zi?wr=zi in o.filters.shapeTypes&&o.filters.shapeTypes[zi]===!0:wr=o.filters.shapeTypes.Polygon===!0;let Rr=!1;Qr?Qr in o.filters.categories?(Rr=o.filters.categories[Qr]===!0,console.log(`[MapView][updateMapDisplay] Vérification de la catégorie ${Qr}: ${Rr}`)):(Rr=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie ${Qr} non trouvée dans les filtres, utilisation de 'forages': ${Rr}`)):(Rr=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie non spécifiée, utilisation de 'forages': ${Rr}`));let Lr=!1;const un={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let ss="visitor";un.company?ss="company":un.employee?ss="employee":un.visitor&&(ss="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès sélectionné par l'utilisateur: ${ss}`),ss==="company"?Lr=!0:ss==="employee"?Lr=ur==="employee"||ur==="visitor":ss==="visitor"&&(Lr=ur==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès de la couche: ${ur}, visible: ${Lr}`);const pi=wr&&Rr&&Lr;console.log(`[MapView][updateMapDisplay] Visibilité de la couche ${zr}: typeVisible=${wr}, categoryVisible=${Rr}, accessLevelVisible=${Lr}, isVisible=${pi}`),console.log(`[MapView][updateMapDisplay] Détails de la couche ${zr}: type=${zi}, category=${Qr}, accessLevel=${ur}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify({accessLevels:o.filters.accessLevels,categories:o.filters.categories,shapeTypes:o.filters.shapeTypes},null,2)),pi?D.value.hasLayer(tn)?(Ln++,console.log(`[MapView][updateMapDisplay] Couche ${tn._dbId} (${zi}) déjà visible avec catégorie ${(($i=tn.properties)==null?void 0:$i.category)||"non définie"}`)):(Qr&&Qr!=="default"&&(!tn.properties||!tn.properties.category)&&(tn.properties||(tn.properties={}),tn.properties.category=Qr,console.log(`[MapView][updateMapDisplay] Catégorie définie avant ajout: ${Qr} pour la couche ${tn._dbId}`)),D.value.addLayer(tn),Ln++,console.log(`[MapView][updateMapDisplay] Affichage de la couche ${tn._dbId} (${zi}) avec catégorie ${((Ki=tn.properties)==null?void 0:Ki.category)||"non définie"}`)):D.value.hasLayer(tn)?(D.value.removeLayer(tn),Nr++,console.log(`[MapView][updateMapDisplay] Masquage de la couche ${tn._dbId} (${zi}) - Filtres non respectés`)):(Nr++,console.log(`[MapView][updateMapDisplay] Couche ${tn._dbId} (${zi}) déjà masquée`))}),console.log("[MapView][updateMapDisplay] Début de la restauration des couches filtrées"),console.log("[MapView][updateMapDisplay] Nombre de formes dans shapes.value:",c.value.length),c.value.forEach(tn=>{var $i;if(!tn.layer){console.log("[MapView][updateMapDisplay] Forme sans couche, ignorée");return}const jn=tn.layer,zr=jn._leaflet_id,ki=jn._dbId;if(console.log(`[MapView][updateMapDisplay] Traitement de la forme ${zr} (dbId: ${ki})`),D.value.hasLayer(jn)){console.log(`[MapView][updateMapDisplay] La couche ${zr} est déjà dans le featureGroup, ignorée`);return}const zi=jn.properties||{},Qr=zi.type||jn.type_forme||"";let ur=null;if(jn._dbId){const Ni=o.elements.find(Pr=>Pr.id===jn._dbId);if(Ni){const Pr=Ni.data;Pr&&Pr.category&&(ur=Pr.category,console.log(`[MapView][updateMapDisplay] Catégorie récupérée depuis le store: ${ur} pour la couche ${jn._dbId}`))}}!ur&&zi.category&&(ur=zi.category,console.log(`[MapView][updateMapDisplay] Catégorie récupérée depuis les propriétés: ${ur} pour la couche ${zr}`)),ur||(ur="default");const wr=zi.accessLevel||"visitor";if(jn.properties||(jn.properties={}),ur&&ur!=="default"&&(jn.properties.category=ur,console.log(`[MapView][updateMapDisplay] Catégorie définie/restaurée: ${ur} pour la couche ${jn._dbId}`),jn._dbId)){const Ni=o.elements.find(Pr=>Pr.id===jn._dbId);if(Ni){const Pr=Ni;Pr.data||(Pr.data={}),Pr.data.category!==ur&&(console.log(`[MapView][updateMapDisplay] Mise à jour de la catégorie dans le store: ${ur} pour l'élément ${jn._dbId}`),Pr.data.category=ur,o.$patch({unsavedChanges:!0}))}}jn.properties.accessLevel||(jn.properties.accessLevel="visitor"),console.log(`[MapView][updateMapDisplay] Propriétés de la couche ${zr}: type=${Qr}, category=${ur}, accessLevel=${wr}`);let Rr=!1;Qr?Rr=Qr in o.filters.shapeTypes&&o.filters.shapeTypes[Qr]===!0:Rr=o.filters.shapeTypes.Polygon===!0;let Lr=!1;if(ur)if(ur in o.filters.categories)Lr=o.filters.categories[ur]===!0,console.log(`[MapView][updateMapDisplay] Vérification de la catégorie ${ur}: ${Lr}`);else if(BE().getUniqueCategories.includes(ur)){console.log(`[MapView][updateMapDisplay] Catégorie personnalisée ${ur} trouvée dans mapFilterStore, ajout aux filtres`);const Mr={...o.filters.categories};Mr[ur]=!0,o.updateFilters({categories:Mr}),Lr=!0}else Lr=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie ${ur} non trouvée, utilisation de 'forages': ${Lr}`);else Lr=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Pas de catégorie, utilisation de 'forages': ${Lr}`);let un=!1;const ss={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let pi="visitor";ss.company?pi="company":ss.employee?pi="employee":ss.visitor&&(pi="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès sélectionné par l'utilisateur (2ème étape): ${pi}`),pi==="company"?un=!0:pi==="employee"?un=wr==="employee"||wr==="visitor":pi==="visitor"&&(un=wr==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès de la couche (2ème étape): ${wr}, visible: ${un}`);const Ki=Rr&&Lr&&un;if(console.log(`[MapView][updateMapDisplay] Visibilité de la couche ${zr}: typeVisible=${Rr}, categoryVisible=${Lr}, accessLevelVisible=${un}, isVisible=${Ki}`),Ki){if(ur&&ur!=="default"&&(jn.properties||(jn.properties={}),jn.properties.category=ur,console.log(`[MapView][updateMapDisplay] Catégorie définie avant restauration: ${ur} pour la couche ${zr}`),jn._dbId)){const Ni=o.elements.find(Pr=>Pr.id===jn._dbId);if(Ni){const Pr=Ni;Pr.data||(Pr.data={}),Pr.data.category!==ur&&(console.log(`[MapView][updateMapDisplay] Mise à jour de la catégorie dans le store avant restauration: ${ur} pour l'élément ${jn._dbId}`),Pr.data.category=ur,o.$patch({unsavedChanges:!0}))}}D.value.addLayer(jn),Ln++,console.log(`[MapView][updateMapDisplay] Restauration de la couche ${zr} (${Qr}) avec catégorie ${(($i=jn.properties)==null?void 0:$i.category)||"non définie"} - Filtres respectés`)}else console.log(`[MapView][updateMapDisplay] La couche ${zr} (${Qr}) reste masquée - Filtres non respectés`)}),console.log(`[MapView][updateMapDisplay] Restauration terminée: ${Ln} couches visibles au total`),console.log(`[MapView][updateMapDisplay] Statistiques: ${Ln} couches visibles, ${Nr} couches masquées, ${sn} couches sans dbId`),console.log("[MapView][updateMapDisplay] Mise à jour terminée")}function _r(ft){if(D.value){const wt=D.value.getLayers().find(kn=>kn._leaflet_id===ft.id);wt&&(wt.properties.name=ft.title,wt.properties.description=ft.description,wt.properties.columnId=ft.columnId,wt.properties.accessLevel=ft.accessLevel,wt.properties.category||(wt.properties.category="forages"),wt.setNoteStyle({color:ft.style.color,fillColor:ft.style.fillColor,weight:ft.style.weight,fillOpacity:ft.style.fillOpacity,radius:ft.style.radius}),wt.closePopup(),wt.unbindPopup(),wt.bindPopup(wt.createPopupContent()),console.log("[handleNoteSave] Note mise à jour:",{name:wt.properties.name,category:wt.properties.category,accessLevel:wt.properties.accessLevel,columnId:wt.properties.columnId}),a.notes.find(Hn=>Hn.id===ft.id)?(a.updateNote(ft.id,{title:ft.title,description:ft.description,columnId:ft.columnId,accessLevel:ft.accessLevel,style:ft.style,updatedAt:new Date().toISOString()}),console.log("[handleNoteSave] Note mise à jour dans le store avec columnId:",ft.columnId)):(a.addNote({title:ft.title,description:ft.description,location:[ft.location[0],ft.location[1]],columnId:ft.columnId||"1",style:ft.style,accessLevel:ft.accessLevel}),console.log("[handleNoteSave] Note ajoutée au store avec columnId:",ft.columnId||"1")))}l.success("Note enregistrée avec succès")}async function ir(ft){var rt;ae.value=ft,me.value=!0;try{const wt={visiteur:ft.id};$.isEntreprise?wt.entreprise=(rt=$.user)==null?void 0:rt.id:Ye.value&&(wt.entreprise=Ye.value.id),we.value&&(wt.salarie=we.value.id);const kn=await Un.get("/plans/",{params:wt});_e.value=kn.data}catch(wt){console.error("[MapView] Error loading client plans:",wt),_e.value=[]}finally{me.value=!1}}async function qr(){var rt;console.log("[MapView][loadPlansWithoutVisiteur] Chargement des plans sans visiteur");const ft={id:-1,username:"sans_visiteur",first_name:"Sans",last_name:"Visiteur",company_name:"",role:"VISITEUR",display_name:"Plans sans visiteur"};ae.value=ft,me.value=!0;try{const wt={visiteur_null:!0};$.isEntreprise?wt.entreprise=(rt=$.user)==null?void 0:rt.id:Ye.value&&(wt.entreprise=Ye.value.id),we.value&&(wt.salarie=we.value.id),console.log("[MapView][loadPlansWithoutVisiteur] Paramètres de requête:",wt);const kn=await Un.get("/plans/",{params:wt});console.log("[MapView][loadPlansWithoutVisiteur] Plans reçus:",kn.data),_e.value=kn.data}catch(wt){console.error("[MapView] Error loading plans without visiteur:",wt),_e.value=[]}finally{me.value=!1}}async function Os(){if($.isEntreprise){me.value=!0;try{await s.fetchPlans()}catch(ft){console.error("[MapView] Erreur lors du chargement des plans:",ft)}finally{me.value=!1}}K.value=!0}function ls(ft,rt,wt,kn,Hn){if(!ft||ft.length===0)return kn;const wn=[...ft].sort((tn,jn)=>(jn.surface||0)-(tn.surface||0)),bt=Hn,Et=7,ln=6,Jt=2,Ln=[{header:"Nom",width:.3,align:"left"},{header:"Surface",width:.2,align:"right"},{header:"Angles",width:.25,align:"right"},{header:"Rayon",width:.15,align:"right"},{header:"Type",width:.1,align:"center"}],Nr=Et+ln*wn.length;rt.setFillColor(248,250,252),rt.setDrawColor(226,232,240),rt.roundedRect(wt,kn,bt,Nr+Jt*2,2,2,"FD"),rt.setFillColor(241,245,249),rt.rect(wt+Jt,kn+Jt,bt-Jt*2,Et,"F"),rt.setFont("helvetica","bold"),rt.setFontSize(7),rt.setTextColor(51,65,85);let sn=wt+Jt;return Ln.forEach(tn=>{const jn=tn.width*(bt-Jt*2);tn.align==="right"?rt.text(tn.header,sn+jn-Jt,kn+Jt+5,{align:"right"}):tn.align==="center"?rt.text(tn.header,sn+jn/2,kn+Jt+5,{align:"center"}):rt.text(tn.header,sn+Jt/2,kn+Jt+5),sn+=jn}),rt.setFont("helvetica","normal"),rt.setFontSize(6.5),rt.setTextColor(71,85,105),wn.forEach((tn,jn)=>{const zr=kn+Et+Jt+jn*ln;jn%2===0&&(rt.setFillColor(250,252,254),rt.rect(wt+Jt,zr,bt-Jt*2,ln,"F"));let ki=wt+Jt;const zi=tn.name||`Section ${jn+1}`;rt.text(zi,ki+Jt/2,zr+4),ki+=Ln[0].width*(bt-Jt*2);const Qr=lt(tn.surface||0,"m²");rt.text(Qr,ki+Ln[1].width*(bt-Jt*2)-Jt,zr+4,{align:"right"}),ki+=Ln[1].width*(bt-Jt*2);const ur=tn.startAngle===0&&tn.endAngle===360?"Complet":`${tn.startAngle}°-${tn.endAngle}°`;rt.text(ur,ki+Ln[2].width*(bt-Jt*2)-Jt,zr+4,{align:"right"}),ki+=Ln[2].width*(bt-Jt*2);const wr=lt(tn.radius||0);rt.text(wr,ki+Ln[3].width*(bt-Jt*2)-Jt,zr+4,{align:"right"}),ki+=Ln[3].width*(bt-Jt*2);const Rr=tn.startAngle===0&&tn.endAngle===360?"C":"P";rt.text(Rr,ki+Ln[4].width*(bt-Jt*2)/2,zr+4,{align:"center"})}),rt.setDrawColor(226,232,240),rt.setLineWidth(.05),rt.line(wt+Jt,kn+Et+Jt,wt+bt-Jt,kn+Et+Jt),kn+Nr+Jt*2}return(ft,rt)=>{var wt,kn,Hn,wn,bt;return Ie(),je(Mn,null,[C("div",aW,[C("div",lW,[qe.value?(Ie(),je("div",uW,rt[7]||(rt[7]=[eu('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Génération de la synthèse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualité de vos captures pour un rendu parfait </p></div></div></div>',1)]))):en("",!0),N.value?en("",!0):(Ie(),je("div",cW,[C("div",hW,[rt[10]||(rt[10]=eu('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+e5+'" alt="TagMap Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur TagMap</h1><p class="text-gray-600 mb-8">Pour commencer à dessiner, vous devez d&#39;abord créer un nouveau plan ou charger un plan existant.</p>',3)),C("div",dW,[C("button",{onClick:rt[0]||(rt[0]=Et=>F.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},rt[8]||(rt[8]=[C("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ui(" Créer un nouveau plan ")])),C("button",{onClick:Os,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},rt[9]||(rt[9]=[C("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),ui(" Charger un plan existant ")]))])])])),On(C("div",fW,[C("div",pW,[N.value&&!qe.value?(Ie(),Va(NV,{key:0,"last-save":(wt=N.value)!=null&&wt.date_modification?new Date(N.value.date_modification):void 0,"plan-name":(kn=N.value)==null?void 0:kn.nom,"plan-description":(Hn=N.value)==null?void 0:Hn.description,"save-status":U.value,onChangeMapType:er(I),onCreateNewPlan:rt[1]||(rt[1]=Et=>F.value=!0),onLoadPlan:Os,onSavePlan:le,onAdjustView:ve,onGenerateSummary:Gt,class:"flex-shrink-0"},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])):en("",!0),C("div",gW,[i.value&&N.value&&!qe.value?(Ie(),je("div",{key:0,onClick:Je,class:"md:hidden fixed inset-0 bg-black/30 z-[1800] transition-opacity duration-300"})):en("",!0),C("div",mW,[C("div",{ref_key:"mapContainer",ref:r,class:"absolute inset-0 z-[1000]"},null,512)]),N.value&&!qe.value?(Ie(),Va(Q$,{key:1,show:i.value,"onUpdate:show":rt[2]||(rt[2]=Et=>i.value=Et),"selected-tool":er(p),"selected-shape":X.value,"is-drawing":er(ge),onToolSelected:er(E),onFilterChange:rr,onDeleteShape:$e,onPropertiesUpdate:ze,onStyleUpdate:er(k),class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected","onStyleUpdate"])):en("",!0),N.value&&!qe.value?(Ie(),je("div",{key:2,class:"md:hidden fixed left-0 right-0 z-[1900] bg-white py-3 px-3 shadow-lg border-t border-gray-200 flex items-center justify-between cursor-pointer",style:{height:"var(--mobile-bottom-toolbar-height)",bottom:"0"},onClick:Je},rt[11]||(rt[11]=[eu('<div class="flex items-center w-full justify-center"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg><span class="text-sm text-gray-500 font-medium">Outils de dessin</span></div></div>',1)]))):en("",!0)])]),qe.value?(Ie(),je("div",vW,rt[12]||(rt[12]=[eu('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Génération de la synthèse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):en("",!0)],512),[[Ay,N.value]]),(Ie(),Va(j2,{to:"body"},[yi(jE,{ref_key:"newPlanModalRef",ref:pe,modelValue:F.value,"onUpdate:modelValue":rt[3]||(rt[3]=Et=>F.value=Et),onCreated:Ge,onSalarieSelected:rt[4]||(rt[4]=Et=>we.value=Et),onVisiteurSelected:rt[5]||(rt[5]=Et=>nt.value=Et)},null,8,["modelValue"])])),(Ie(),Va(j2,{to:"body"},[K.value?(Ie(),je("div",yW,[C("div",bW,[C("div",_W,[rt[14]||(rt[14]=C("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),C("button",{onClick:rt[6]||(rt[6]=Et=>K.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},rt[13]||(rt[13]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",wW,[er($).isAdmin?(Ie(),je("div",xW,[Ye.value?we.value?ae.value?(Ie(),je("div",zW,[C("div",$W,[C("button",{onClick:Xt,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},rt[30]||(rt[30]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ui(" Retour à la liste des clients ")])),rt[31]||(rt[31]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",VW,Ot(Yt(ae.value)),1)]),rt[33]||(rt[33]=C("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),C("div",UW,[me.value?(Ie(),je(Mn,{key:0},gr(3,Et=>C("div",{key:Et,class:"animate-pulse"},rt[32]||(rt[32]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),C("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ie(!0),je(Mn,{key:1},gr(_e.value,Et=>(Ie(),je("button",{key:Et.id,onClick:ln=>se(Et.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",WW,Ot(Et.nom),1),C("div",GW,Ot(Et.description),1),C("div",qW," Modifié le "+Ot(Se(Et.date_modification)),1)],8,HW))),128))])])):(Ie(),je("div",OW,[C("div",NW,[C("button",{onClick:Qn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},rt[23]||(rt[23]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ui(" Retour à la liste des salaries ")])),rt[24]||(rt[24]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",IW,Ot(Yt(we.value)),1)]),rt[29]||(rt[29]=C("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),C("div",BW,[C("button",{onClick:qr,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},rt[25]||(rt[25]=[C("div",null,[C("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),C("div",{class:"text-xs text-primary-600"},"Afficher les plans créés sans visiteur associé")],-1),C("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),Z.value?(Ie(),je(Mn,{key:0},gr(3,Et=>C("div",{key:Et,class:"animate-pulse"},rt[26]||(rt[26]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ie(),je(Mn,{key:1},[de.value.length===0?(Ie(),je("div",RW,rt[27]||(rt[27]=[C("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),C("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Ie(!0),je(Mn,{key:1},gr(de.value,Et=>(Ie(),je("button",{key:Et.id,onClick:ln=>ir(Et),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",jW,Ot(Yt(Et)),1)]),rt[28]||(rt[28]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,FW))),128))],64))])])):(Ie(),je("div",PW,[C("div",MW,[C("button",{onClick:Nn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},rt[18]||(rt[18]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ui(" Retour à la liste des entreprises ")])),rt[19]||(rt[19]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",kW,Ot(Yt(Ye.value)),1)]),rt[22]||(rt[22]=C("h3",{class:"font-medium text-gray-700"},"Sélectionnez un salarie",-1)),C("div",AW,[H.value?(Ie(),je(Mn,{key:0},gr(3,Et=>C("div",{key:Et,class:"animate-pulse"},rt[20]||(rt[20]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ie(!0),je(Mn,{key:1},gr(Vt.value,Et=>(Ie(),je("button",{key:Et.id,onClick:ln=>Cn(Et),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",DW,Ot(Yt(Et)),1)]),rt[21]||(rt[21]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,TW))),128))])])):(Ie(),je("div",LW,[rt[17]||(rt[17]=C("h3",{class:"font-medium text-gray-700"},"Sélectionnez une entreprise",-1)),C("div",SW,[at.value?(Ie(),je(Mn,{key:0},gr(3,Et=>C("div",{key:Et,class:"animate-pulse"},rt[15]||(rt[15]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ie(!0),je(Mn,{key:1},gr(it.value,Et=>(Ie(),je("button",{key:Et.id,onClick:ln=>Sn(Et),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",EW,Ot(Yt(Et)),1)]),rt[16]||(rt[16]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,CW))),128))])]))])):er($).isSalarie?(Ie(),je("div",YW,[ae.value?(Ie(),je("div",eG,[C("div",tG,[C("button",{onClick:Xt,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},rt[38]||(rt[38]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ui(" Retour à la liste des clients ")])),rt[39]||(rt[39]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",nG,Ot(Yt(ae.value)),1)]),rt[41]||(rt[41]=C("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),C("div",rG,[me.value?(Ie(),je(Mn,{key:0},gr(3,Et=>C("div",{key:Et,class:"animate-pulse"},rt[40]||(rt[40]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),C("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ie(!0),je(Mn,{key:1},gr(_e.value,Et=>(Ie(),je("button",{key:Et.id,onClick:ln=>se(Et.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",sG,Ot(Et.nom),1),C("div",oG,Ot(Et.description),1),C("div",aG," Modifié le "+Ot(Se(Et.date_modification)),1)],8,iG))),128))])])):(Ie(),je("div",KW,[rt[37]||(rt[37]=C("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),C("div",ZW,[Z.value?(Ie(),je(Mn,{key:0},gr(3,Et=>C("div",{key:Et,class:"animate-pulse"},rt[34]||(rt[34]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ie(),je(Mn,{key:1},[de.value.length===0?(Ie(),je("div",XW,rt[35]||(rt[35]=[C("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),C("div",{class:"text-sm text-gray-400"}," Veuillez vérifier que des visiteurs ont été assignés à ce salarie ",-1)]))):(Ie(!0),je(Mn,{key:1},gr(de.value,Et=>(Ie(),je("button",{key:Et.id,onClick:ln=>ir(Et),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",QW,Ot(Yt(Et)),1)]),rt[36]||(rt[36]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,JW))),128))],64))])]))])):er($).isEntreprise?(Ie(),je("div",lG,[me.value?(Ie(),je("div",uG,rt[42]||(rt[42]=[C("div",{class:"flex justify-center"},[C("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-600"})],-1),C("p",{class:"text-center text-sm text-gray-500 mt-2"},"Chargement des plans...",-1)]))):er(s).plans.length===0?(Ie(),je("div",cG,rt[43]||(rt[43]=[C("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(Ie(),je("div",hG,[rt[44]||(rt[44]=C("h3",{class:"font-medium text-gray-700"},"Vos plans",-1)),C("div",dG,[(Ie(!0),je(Mn,null,gr(er(s).plans,Et=>(Ie(),je("button",{key:Et.id,onClick:ln=>se(Et.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",pG,Ot(Et.nom),1),C("div",gG,Ot(Et.description),1),C("div",mG," Modifié le "+Ot(Se(Et.date_modification)),1)],8,fG))),128))])]))])):(Ie(),je("div",vG,[er(s).plans.length===0?(Ie(),je("div",yG,rt[45]||(rt[45]=[C("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(Ie(),je("div",bG,[(Ie(!0),je(Mn,null,gr(er(s).plans,Et=>(Ie(),je("button",{key:Et.id,onClick:ln=>se(Et.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",wG,Ot(Et.nom),1),C("div",xG,Ot(Et.description),1),C("div",LG," Modifié le "+Ot(Se(Et.date_modification)),1)],8,_G))),128))]))]))])])])):en("",!0)]))])]),B.value?(Ie(),Va(RE,{key:0,note:j.value,"is-new-note":!((wn=j.value)!=null&&wn.id),location:(bt=j.value)==null?void 0:bt.location,onClose:Dn,onSave:_r},null,8,["note","is-new-note","location"])):en("",!0)],64)}}}),SG={class:"fixed inset-0 z-[3001] overflow-y-auto"},CG={class:"flex items-center justify-center min-h-screen w-full p-0"},EG={class:"relative bg-white w-full h-full max-h-full overflow-y-auto md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},PG={class:"p-4 md:p-6"},MG={class:"flex justify-between items-center mb-4 border-b pb-4"},kG={class:"text-xl font-semibold text-gray-900",id:"modal-headline"},AG={class:"mt-4"},TG={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},DG={class:"flex"},OG={class:"ml-3"},NG={class:"text-sm font-medium text-red-800"},IG={key:0},BG={key:1},RG=["value"],FG={key:2},jG={key:3},zG=["value"],$G={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2"},VG={key:0,class:"mt-2 text-sm text-red-600"},UG={key:0,class:"mt-2 text-sm text-red-600"},HG={key:4},WG={class:"flex items-center"},GG={key:5,class:"border-t pt-4 mt-4"},qG={class:"mb-4"},YG={class:"mb-4"},KG={key:6},ZG={key:7},XG={key:0,class:"mt-2 text-sm text-red-600"},JG={class:"flex justify-end space-x-3"},QG=["disabled"],eq={key:0,class:"mr-2"},tq=js({__name:"UserFormModal",props:{user:{type:Object,default:()=>({})},salaries:{type:Array,default:()=>[]},entreprises:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isEntreprise:{type:Boolean,default:!1},currentSalarie:{type:String,default:void 0},currentEntreprise:{type:String,default:void 0},apiErrors:{type:Array,default:()=>[]},refreshKey:{type:Number,default:0}},emits:["close","save","refresh"],setup(t,{emit:e}){const n=t,r=e,i=Ct(!1),s=Ct(""),o=Ct(""),a=Ct(""),l=Ct(""),c=Ct(""),d=iu({id:void 0,first_name:"",last_name:"",username:"",email:"",password:"",company_name:"",role:n.isEntreprise?"SALARIE":n.isAdmin?"ADMIN":"VISITEUR",salarie:null,entreprise:null,is_active:!0,storage_quota:50,storage_used:0,ecowitt_api_key:"",ecowitt_application_key:""});go(()=>{var v;(v=n.user)!=null&&v.id?(d.id=n.user.id,d.first_name=n.user.first_name||"",d.last_name=n.user.last_name||"",d.username=n.user.username||"",d.email=n.user.email||"",d.company_name=n.user.company_name||"",d.role=n.user.role||"VISITEUR",d.is_active=n.user.is_active??!0,d.ecowitt_api_key=n.user.ecowitt_api_key||"",d.ecowitt_application_key=n.user.ecowitt_application_key||"",d.storage_quota=n.user.storage_quota||50,d.storage_used=n.user.storage_used||0,n.user.salarie?typeof n.user.salarie=="object"?d.salarie=n.user.salarie.id:d.salarie=n.user.salarie:n.user.salarie_id?d.salarie=n.user.salarie_id:n.currentSalarie&&(d.salarie=parseInt(n.currentSalarie)),n.user.entreprise?typeof n.user.entreprise=="object"?d.entreprise=n.user.entreprise.id:d.entreprise=n.user.entreprise:n.user.entreprise_id?d.entreprise=n.user.entreprise_id:n.currentEntreprise&&(d.entreprise=parseInt(n.currentEntreprise))):(n.currentSalarie&&(d.salarie=parseInt(n.currentSalarie)),n.currentEntreprise&&(d.entreprise=parseInt(n.currentEntreprise)),n.isEntreprise?d.role="SALARIE":n.isAdmin||(d.role="VISITEUR"))}),dm(()=>{d.role==="ADMIN"||d.role==="ENTREPRISE"?(d.salarie=null,d.entreprise=null):d.role==="SALARIE"&&(d.salarie=null,n.isEntreprise&&n.currentEntreprise&&(d.entreprise=parseInt(n.currentEntreprise)))}),dm(()=>{s.value="",o.value="",a.value="",l.value="",n.apiErrors&&n.apiErrors.length>0&&n.apiErrors.forEach(v=>{switch(v.field){case"email":s.value=v.message;break;case"username":o.value=v.message;break;case"password":a.value=v.message;break;case"non_field_error":default:l.value=v.message;break}})});async function p(){s.value="",o.value="",a.value="",l.value="";let v=!0;if(d.id||(d.password!==c.value?(a.value="Les mots de passe ne correspondent pas",v=!1):d.password.length<8&&(a.value="Le mot de passe doit contenir au moins 8 caractères",v=!1)),!!v){i.value=!0;try{const m={...d};d.id&&delete m.password,n.isEntreprise&&["SALARIE","VISITEUR"].includes(d.role)&&(m.entreprise_id=n.currentEntreprise?parseInt(n.currentEntreprise):void 0),m.salarie&&(m.salarie_id=m.salarie,delete m.salarie),n.currentSalarie&&d.role==="VISITEUR"&&(m.salarie_id=parseInt(n.currentSalarie)),await r("save",m),r("refresh")}catch(m){console.error("Erreur locale:",m)}finally{i.value=!1}}}return(v,m)=>(Ie(),je("div",SG,[C("div",CG,[m[42]||(m[42]=C("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[C("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),C("div",EG,[C("div",null,[C("div",PG,[C("div",MG,[C("h3",kG,Ot(t.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),C("button",{type:"button",onClick:m[0]||(m[0]=x=>v.$emit("close")),class:"text-gray-400 hover:text-gray-500"},m[16]||(m[16]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",AG,[l.value?(Ie(),je("div",TG,[C("div",DG,[m[17]||(m[17]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",OG,[C("h3",NG,Ot(l.value),1)])])])):en("",!0),C("form",{onSubmit:Bh(p,["prevent"]),class:"space-y-6"},[t.isAdmin?(Ie(),je("div",IG,[m[19]||(m[19]=C("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),On(C("select",{id:"role","onUpdate:modelValue":m[1]||(m[1]=x=>d.role=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},m[18]||(m[18]=[C("option",{value:"ADMIN"},"Administrateur",-1),C("option",{value:"ENTREPRISE"},"Entreprise",-1),C("option",{value:"SALARIE"},"Salarie",-1),C("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[rs,d.role]])])):en("",!0),t.isAdmin&&d.role==="SALARIE"?(Ie(),je("div",BG,[m[21]||(m[21]=C("label",{for:"entreprise",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),On(C("select",{id:"entreprise","onUpdate:modelValue":m[2]||(m[2]=x=>d.entreprise=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[m[20]||(m[20]=C("option",{value:null},"-- Sélectionner une entreprise --",-1)),(Ie(!0),je(Mn,null,gr(t.entreprises,x=>(Ie(),je("option",{key:x.id,value:x.id},Ot(x.first_name)+" "+Ot(x.last_name)+" ("+Ot(x.company_name||"Entreprise")+") ",9,RG))),128))],512),[[rs,d.entreprise]])])):en("",!0),t.isEntreprise&&!d.id?(Ie(),je("div",FG,[m[23]||(m[23]=C("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),On(C("select",{id:"role","onUpdate:modelValue":m[3]||(m[3]=x=>d.role=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},m[22]||(m[22]=[C("option",{value:"SALARIE"},"Salarie",-1),C("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[rs,d.role]])])):en("",!0),(t.isAdmin||t.isEntreprise)&&d.role==="VISITEUR"&&!t.currentSalarie?(Ie(),je("div",jG,[m[25]||(m[25]=C("label",{for:"salarie",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),On(C("select",{id:"salarie","onUpdate:modelValue":m[4]||(m[4]=x=>d.salarie=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},[m[24]||(m[24]=C("option",{value:null},"-- Sélectionner un salarie --",-1)),(Ie(!0),je(Mn,null,gr(t.salaries,x=>(Ie(),je("option",{key:x.id,value:x.id},Ot(x.first_name)+" "+Ot(x.last_name)+" ("+Ot(x.company_name||"Salarie")+") ",9,zG))),128))],512),[[rs,d.salarie]])])):en("",!0),C("div",$G,[C("div",null,[m[26]||(m[26]=C("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),On(C("input",{type:"text",id:"first_name","onUpdate:modelValue":m[5]||(m[5]=x=>d.first_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Fr,d.first_name]])]),C("div",null,[m[27]||(m[27]=C("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),On(C("input",{type:"text",id:"last_name","onUpdate:modelValue":m[6]||(m[6]=x=>d.last_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Fr,d.last_name]])])]),C("div",null,[m[28]||(m[28]=C("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),On(C("input",{type:"email",id:"email","onUpdate:modelValue":m[7]||(m[7]=x=>d.email=x),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Fr,d.email]]),s.value?(Ie(),je("div",VG,Ot(s.value),1)):en("",!0)]),C("div",null,[m[29]||(m[29]=C("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),On(C("input",{type:"text",id:"username","onUpdate:modelValue":m[8]||(m[8]=x=>d.username=x),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Fr,d.username]]),o.value?(Ie(),je("div",UG,Ot(o.value),1)):en("",!0)]),C("div",null,[m[30]||(m[30]=C("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),On(C("input",{type:"text",id:"company_name","onUpdate:modelValue":m[9]||(m[9]=x=>d.company_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Fr,d.company_name]])]),d.role==="ENTREPRISE"||d.role==="SALARIE"?(Ie(),je("div",HG,[m[32]||(m[32]=C("label",{for:"storage_quota",class:"block text-sm font-medium text-gray-700"},"Quota de stockage (MB)",-1)),C("div",WG,[On(C("input",{type:"number",id:"storage_quota","onUpdate:modelValue":m[10]||(m[10]=x=>d.storage_quota=x),min:"1",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Fr,d.storage_quota]]),m[31]||(m[31]=C("span",{class:"ml-2 text-sm text-gray-500"},"MB",-1))]),m[33]||(m[33]=C("p",{class:"mt-1 text-sm text-gray-500"},"Espace de stockage maximum pour les photos des notes",-1))])):en("",!0),d.role==="ENTREPRISE"?(Ie(),je("div",GG,[m[38]||(m[38]=C("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Configuration API",-1)),C("div",qG,[m[34]||(m[34]=C("label",{for:"ecowitt_api_key",class:"block text-sm font-medium text-gray-700"},"Clé API Ecowitt",-1)),On(C("input",{type:"text",id:"ecowitt_api_key","onUpdate:modelValue":m[11]||(m[11]=x=>d.ecowitt_api_key=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la clé API Ecowitt"},null,512),[[Fr,d.ecowitt_api_key]]),m[35]||(m[35]=C("p",{class:"mt-1 text-sm text-gray-500"},"Clé API pour accéder aux services météo Ecowitt",-1))]),C("div",YG,[m[36]||(m[36]=C("label",{for:"ecowitt_application_key",class:"block text-sm font-medium text-gray-700"},"Clé d'application Ecowitt",-1)),On(C("input",{type:"text",id:"ecowitt_application_key","onUpdate:modelValue":m[12]||(m[12]=x=>d.ecowitt_application_key=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la clé d'application Ecowitt"},null,512),[[Fr,d.ecowitt_application_key]]),m[37]||(m[37]=C("p",{class:"mt-1 text-sm text-gray-500"},"Clé d'application pour accéder aux services météo Ecowitt",-1))])])):en("",!0),d.id?en("",!0):(Ie(),je("div",KG,[m[39]||(m[39]=C("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),On(C("input",{type:"password",id:"password","onUpdate:modelValue":m[13]||(m[13]=x=>d.password=x),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Fr,d.password]])])),d.id?en("",!0):(Ie(),je("div",ZG,[m[40]||(m[40]=C("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),On(C("input",{type:"password",id:"password_confirm","onUpdate:modelValue":m[14]||(m[14]=x=>c.value=x),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Fr,c.value]]),a.value?(Ie(),je("div",XG,Ot(a.value),1)):en("",!0)])),C("div",JG,[C("button",{type:"button",onClick:m[15]||(m[15]=x=>v.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Annuler "),C("button",{type:"submit",disabled:i.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[i.value?(Ie(),je("span",eq,m[41]||(m[41]=[C("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):en("",!0),ui(" "+Ot(d.id?"Enregistrer":"Créer"),1)],8,QG)])],32)])])])])])]))}}),nq={class:"fixed inset-0 z-[3001] overflow-y-auto"},rq={class:"flex items-center justify-center min-h-screen w-full"},iq={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},sq={class:"p-4 md:p-6"},oq={class:"flex items-start"},aq={class:"ml-4 flex-1"},lq={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},uq={class:"mt-2"},cq={class:"text-sm text-gray-500"},hq={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},aP=js({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(t){return(e,n)=>(Ie(),je("div",nq,[C("div",rq,[n[3]||(n[3]=C("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[C("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),C("div",iq,[C("div",sq,[C("div",oq,[n[2]||(n[2]=C("div",{class:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[C("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),C("div",aq,[C("h3",lq,Ot(t.title),1),C("div",uq,[C("p",cq,Ot(t.message),1)])])]),C("div",hq,[C("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=r=>e.$emit("confirm"))}," Confirmer "),C("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=r=>e.$emit("cancel"))}," Annuler ")])])])])]))}}),dq={class:"h-full bg-gray-50"},fq={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},pq={class:"flex justify-between items-center mb-8"},gq={class:"text-3xl font-extrabold text-gray-900"},mq={key:0},vq={key:1},yq={key:2},bq={key:0},_q={key:1},wq={key:2},xq={class:"bg-white shadow rounded-lg mb-6 p-4"},Lq={class:"space-y-4"},Sq={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Cq={key:0},Eq={key:0,value:"ADMIN"},Pq={key:1,value:"ENTREPRISE"},Mq={key:1},kq=["value"],Aq={key:2},Tq=["value"],Dq={class:"w-full"},Oq={class:"bg-white shadow rounded-lg"},Nq={class:"overflow-x-auto"},Iq={class:"min-w-full divide-y divide-gray-200"},Bq={class:"bg-gray-50"},Rq={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Fq={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},jq={class:"bg-white divide-y divide-gray-200"},zq={key:0,class:"animate-pulse"},$q={key:1},Vq={class:"px-6 py-4 whitespace-nowrap"},Uq={class:"flex items-center"},Hq={class:"flex-shrink-0 h-10 w-10"},Wq={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},Gq={class:"text-primary-600 font-medium"},qq={class:"ml-4"},Yq={class:"text-sm font-medium text-gray-900"},Kq={class:"text-sm text-gray-500"},Zq={class:"px-6 py-4 whitespace-nowrap"},Xq={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Jq={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Qq={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},eY={class:"px-6 py-4 whitespace-nowrap"},tY={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},nY=["onClick"],rY=["onClick"],iY={key:0,class:"fixed inset-0 z-[3001] overflow-y-auto"},sY=js({__name:"UserListView",setup(t){const e=pa(),n=ru(),r=Ct([]),i=Ct([]),s=Ct([]),o=Ct(!1),a=Ct(!1),l=Ct(null),c=Ct(null),d=Ct(!0),p=Ct([]),v=iu({role:"",search:"",salarie:"",entreprise:""}),m=Jn(()=>e.isAdmin),x=Jn(()=>e.isEntreprise),E=Jn(()=>e.isSalarie),k=Jn(()=>m.value?r.value.filter(z=>z.role==="SALARIE"):x.value?r.value.filter(z=>{var U,$;return z.role==="SALARIE"&&((U=z.entreprise)==null?void 0:U.id)===(($=e.user)==null?void 0:$.id)}):[]),A=Jn(()=>{let z=r.value;if(x.value&&(z=z.filter(U=>{var $,re,Q,_e,we;return U.role==="SALARIE"?(($=U.entreprise)==null?void 0:$.id)===((re=e.user)==null?void 0:re.id):U.role==="VISITEUR"?((_e=(Q=U.salarie)==null?void 0:Q.entreprise)==null?void 0:_e.id)===((we=e.user)==null?void 0:we.id):!1})),E.value&&(z=z.filter(U=>{var $,re;return U.role==="VISITEUR"&&(U.salarie_id===(($=e.user)==null?void 0:$.id)||U.salarie&&U.salarie.id===((re=e.user)==null?void 0:re.id))})),(m.value||x.value)&&(v.role&&(z=z.filter(U=>U.role===v.role)),v.salarie&&(z=z.filter(U=>{var re;const $=((re=U.salarie)==null?void 0:re.id)||U.salarie_id;return($==null?void 0:$.toString())===v.salarie.toString()})),v.entreprise&&m.value&&(z=z.filter(U=>{var $,re,Q,_e,we;return U.role==="SALARIE"?((re=($=U.entreprise)==null?void 0:$.id)==null?void 0:re.toString())===v.entreprise.toString():U.role==="VISITEUR"?((we=(_e=(Q=U.salarie)==null?void 0:Q.entreprise)==null?void 0:_e.id)==null?void 0:we.toString())===v.entreprise.toString():!1}))),v.search){const U=v.search.toLowerCase();z=z.filter($=>{var re,Q,_e,we;return((re=$.username)==null?void 0:re.toLowerCase().includes(U))||((Q=$.email)==null?void 0:Q.toLowerCase().includes(U))||((_e=$.first_name)==null?void 0:_e.toLowerCase().includes(U))||((we=$.last_name)==null?void 0:we.toLowerCase().includes(U))||$.company_name&&$.company_name.toLowerCase().includes(U)})}return z});go(async()=>{await D(),await V()});async function D(){var z,U,$;d.value=!0;try{if(m.value)r.value=await e.fetchUsers();else if(x.value){const[re,Q]=await Promise.all([nv({role:"SALARIE",entrepriseId:(z=e.user)==null?void 0:z.id}),nv({role:"VISITEUR",entrepriseId:(U=e.user)==null?void 0:U.id})]);r.value=[...re,...Q]}else E.value&&(r.value=await nv({role:"VISITEUR",salarieId:($=e.user)==null?void 0:$.id,includeDetails:!0}),console.log("Visiteurs récupérés:",r.value))}catch(re){console.error("Erreur lors de la récupération des utilisateurs:",re),n.error("Erreur lors de la récupération des utilisateurs")}finally{d.value=!1}}async function V(){try{m.value?await Promise.all([Y(),ge()]):x.value&&await te()}catch(z){console.error("Erreur lors de la récupération des dépendances:",z)}}async function Y(){var z;try{m.value?i.value=await e.fetchUsersByRole({role:"SALARIE"}):x.value&&(i.value=await e.fetchEntrepriseSalaries((z=e.user)==null?void 0:z.id))}catch(U){console.error("Erreur lors de la récupération des salaries:",U)}}async function te(){var z,U;if(!(!x.value||!((z=e.user)!=null&&z.id)))try{i.value=await e.fetchEntrepriseSalaries((U=e.user)==null?void 0:U.id)}catch($){console.error("Erreur lors de la récupération des salaries de l'entreprise:",$)}}async function ge(){try{s.value=await e.fetchEnterprises()}catch(z){console.error("Erreur lors de la récupération des entreprises:",z)}}function fe(){l.value=null,o.value=!0}function I(z){l.value={...z},o.value=!0}function F(){o.value=!1,l.value=null,p.value=[]}async function K(z){var $,re,Q,_e,we,nt;p.value=[];const U=!!z.id;try{const ae={...z};m.value?(ae.entreprise&&typeof ae.entreprise=="object"?ae.entreprise_id=ae.entreprise.id:typeof ae.entreprise=="number"&&(ae.entreprise_id=ae.entreprise),ae.salarie&&typeof ae.salarie=="object"?ae.salarie_id=ae.salarie.id:typeof ae.salarie=="number"&&(ae.salarie_id=ae.salarie)):x.value?(ae.entreprise_id=($=e.user)==null?void 0:$.id,ae.role==="VISITEUR"&&(ae.salarie&&typeof ae.salarie=="object"?ae.salarie_id=ae.salarie.id:typeof ae.salarie=="number"&&(ae.salarie_id=ae.salarie))):E.value&&(ae.role="VISITEUR",ae.salarie_id=(re=e.user)==null?void 0:re.id),ae.role==="SALARIE"?((Q=ae.entreprise)!=null&&Q.id?(ae.entreprise_id=ae.entreprise.id,delete ae.entreprise):typeof ae.entreprise=="number"&&(ae.entreprise_id=ae.entreprise,delete ae.entreprise),delete ae.salarie):ae.role==="VISITEUR"&&((_e=ae.salarie)!=null&&_e.id?(ae.salarie_id=ae.salarie.id,delete ae.salarie):typeof ae.salarie=="number"&&(ae.salarie_id=ae.salarie,delete ae.salarie),delete ae.entreprise,delete ae.entreprise_id),U?(await e.updateUser(z.id,ae),n.success("Utilisateur modifié avec succès")):(await e.createUser(ae),n.success("Utilisateur créé avec succès")),await Promise.all([D(),V()]),F()}catch(ae){console.error("Error saving user:",((we=ae.response)==null?void 0:we.data)||ae),p.value=H7(ae),n.error("Erreur lors de la sauvegarde de l'utilisateur");const H=((nt=ae.response)==null?void 0:nt.data)||{};let Z="";throw typeof H=="object"&&(Z=Object.entries(H).map(([me,pe])=>Array.isArray(pe)?`${me}: ${pe[0]}`:`${me}: ${pe}`).filter(me=>me).join(`
`)),Z||(Z="Une erreur est survenue lors de la sauvegarde"),new Error(Z)}}function B(z){c.value=z,a.value=!0}async function N(){if(c.value)try{await e.deleteUser(c.value.id),n.success("Utilisateur supprimé avec succès"),await Promise.all([D(),V()]),a.value=!1,c.value=null}catch(z){throw console.error("Erreur lors de la suppression de l'utilisateur:",z),n.error("Erreur lors de la suppression de l'utilisateur"),z}}function j(z){var U,$,re,Q,_e,we,nt,ae;return m.value?!0:x.value?z.role==="SALARIE"?((U=z.entreprise)==null?void 0:U.id)===(($=e.user)==null?void 0:$.id):z.role==="VISITEUR"?((Q=(re=z.salarie)==null?void 0:re.entreprise)==null?void 0:Q.id)===((_e=e.user)==null?void 0:_e.id):!1:E.value?z.role==="VISITEUR"&&(z.salarie_id===((we=e.user)==null?void 0:we.id)||((nt=z.salarie)==null?void 0:nt.id)===((ae=e.user)==null?void 0:ae.id)):!1}return(z,U)=>{var $,re,Q,_e;return Ie(),je("div",dq,[C("div",fq,[C("div",pq,[C("h1",gq,[m.value?(Ie(),je("span",mq,"Gestion des utilisateurs")):x.value?(Ie(),je("span",vq,"Gestion des salaries et visiteurs")):E.value?(Ie(),je("span",yq,"Gestion des visiteurs")):en("",!0)]),C("button",{onClick:fe,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[U[5]||(U[5]=C("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),m.value?(Ie(),je("span",bq,"Nouvel utilisateur")):x.value?(Ie(),je("span",_q,"Nouveau salarie/visiteur")):E.value?(Ie(),je("span",wq,"Nouvel visiteur")):en("",!0)])]),C("div",xq,[C("div",Lq,[C("div",Sq,[m.value||x.value?(Ie(),je("div",Cq,[U[9]||(U[9]=C("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),On(C("select",{id:"role-filter","onUpdate:modelValue":U[0]||(U[0]=we=>v.role=we),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[U[6]||(U[6]=C("option",{value:""},"Tous les rôles",-1)),m.value?(Ie(),je("option",Eq,"Administrateur")):en("",!0),m.value?(Ie(),je("option",Pq,"Entreprise")):en("",!0),U[7]||(U[7]=C("option",{value:"SALARIE"},"Salarie",-1)),U[8]||(U[8]=C("option",{value:"VISITEUR"},"Visiteur",-1))],512),[[rs,v.role]])])):en("",!0),m.value?(Ie(),je("div",Mq,[U[11]||(U[11]=C("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),On(C("select",{id:"entreprise-filter","onUpdate:modelValue":U[1]||(U[1]=we=>v.entreprise=we),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[U[10]||(U[10]=C("option",{value:""},"Toutes les entreprises",-1)),(Ie(!0),je(Mn,null,gr(s.value,we=>(Ie(),je("option",{key:we.id,value:we.id},Ot(er(Lu)(we)),9,kq))),128))],512),[[rs,v.entreprise]])])):en("",!0),m.value||x.value?(Ie(),je("div",Aq,[U[13]||(U[13]=C("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),On(C("select",{id:"salarie-filter","onUpdate:modelValue":U[2]||(U[2]=we=>v.salarie=we),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[U[12]||(U[12]=C("option",{value:""},"Tous les salaries",-1)),(Ie(!0),je(Mn,null,gr(k.value,we=>(Ie(),je("option",{key:we.id,value:we.id},Ot(er(Lu)(we)),9,Tq))),128))],512),[[rs,v.salarie]])])):en("",!0)]),C("div",Dq,[U[14]||(U[14]=C("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),On(C("input",{type:"text",id:"search","onUpdate:modelValue":U[3]||(U[3]=we=>v.search=we),placeholder:"Rechercher par nom, email, entreprise...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Fr,v.search]])])])]),C("div",Oq,[C("div",Nq,[C("table",Iq,[C("thead",Bq,[C("tr",null,[U[15]||(U[15]=C("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur ",-1)),U[16]||(U[16]=C("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rôle ",-1)),U[17]||(U[17]=C("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),m.value||x.value?(Ie(),je("th",Rq," Entreprise ")):en("",!0),m.value||x.value?(Ie(),je("th",Fq," Salarie ")):en("",!0),U[18]||(U[18]=C("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),U[19]||(U[19]=C("th",{scope:"col",class:"relative px-6 py-3"},[C("span",{class:"sr-only"},"Actions")],-1))])]),C("tbody",jq,[d.value?(Ie(),je("tr",zq,U[20]||(U[20]=[C("td",{colspan:"7",class:"py-4 px-6"},[C("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):A.value.length===0?(Ie(),je("tr",$q,U[21]||(U[21]=[C("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun utilisateur trouvé ",-1)]))):en("",!0),(Ie(!0),je(Mn,null,gr(A.value,we=>{var nt;return Ie(),je("tr",{key:we.id},[C("td",Vq,[C("div",Uq,[C("div",Hq,[C("div",Wq,[C("span",Gq,Ot(er(G7)(we.first_name,we.last_name)),1)])]),C("div",qq,[C("div",Yq,Ot(er(Lu)(we)),1),C("div",Kq,Ot(we.username),1)])])]),C("td",Zq,[C("span",{class:Ti(er(K7)())},Ot(er(Y7)(we.role)),3)]),C("td",Xq,Ot(we.email),1),m.value||x.value?(Ie(),je("td",Jq,[we.role==="ENTREPRISE"?(Ie(),je(Mn,{key:0},[ui(" - ")],64)):we.role==="SALARIE"?(Ie(),je(Mn,{key:1},[ui(Ot(we.entreprise?er(Lu)(we.entreprise):"Non assigné"),1)],64)):we.role==="VISITEUR"?(Ie(),je(Mn,{key:2},[ui(Ot((nt=we.salarie)!=null&&nt.entreprise?er(Lu)(we.salarie.entreprise):"Non assigné"),1)],64)):(Ie(),je(Mn,{key:3},[ui(" - ")],64))])):en("",!0),m.value||x.value?(Ie(),je("td",Qq,[we.role==="ENTREPRISE"||we.role==="ADMIN"?(Ie(),je(Mn,{key:0},[ui(" - ")],64)):we.role==="SALARIE"?(Ie(),je(Mn,{key:1},[ui(" - ")],64)):(Ie(),je(Mn,{key:2},[ui(Ot(we.salarie?er(Lu)(we.salarie):"Non assigné"),1)],64))])):en("",!0),C("td",eY,[C("span",{class:Ti(er(Z7)(we.is_active))},Ot(we.is_active?"Actif":"Inactif"),3)]),C("td",tY,[C("button",{onClick:ae=>I(we),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,nY),j(we)?(Ie(),je("button",{key:0,onClick:ae=>B(we),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,rY)):en("",!0)])])}),128))])])])])]),o.value?(Ie(),je("div",iY,[yi(tq,{user:l.value,salaries:i.value,entreprises:s.value,"is-admin":m.value,"is-entreprise":x.value,"current-salarie":E.value?(re=($=er(e).user)==null?void 0:$.id)==null?void 0:re.toString():void 0,"current-entreprise":x.value?(_e=(Q=er(e).user)==null?void 0:Q.id)==null?void 0:_e.toString():void 0,"api-errors":p.value,onClose:F,onSave:K},null,8,["user","salaries","entreprises","is-admin","is-entreprise","current-salarie","current-entreprise","api-errors"])])):en("",!0),a.value?(Ie(),Va(aP,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:N,onCancel:U[4]||(U[4]=we=>a.value=!1)})):en("",!0)])}}}),oY={class:"h-full bg-gray-50"},aY={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},lY={class:"sm:flex sm:items-center"},uY={class:"sm:flex-auto"},cY={class:"text-2xl font-semibold text-gray-900"},hY={class:"mt-2 text-sm text-gray-700"},dY={key:0,class:"mt-8"},fY={class:"mb-6"},pY=["value"],gY={class:"mb-6"},mY={value:null},vY=["value"],yY={key:0,class:"mb-6"},bY={value:null},_Y=["value"],wY={key:1,class:"mt-8"},xY={class:"mb-6"},LY=["value"],SY={class:"mt-8"},CY={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},EY={class:"overflow-x-auto"},PY={class:"min-w-full divide-y divide-gray-300"},MY={class:"bg-gray-50"},kY={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},AY={class:"ml-2 flex-none rounded"},TY={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},DY={class:"ml-2 flex-none rounded"},OY={class:"divide-y divide-gray-200 bg-white"},NY={key:0},IY={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},BY={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},RY={class:"px-3 py-4 text-sm text-gray-900"},FY={key:0,class:"flex items-center"},jY={class:"h-8 w-8 flex-shrink-0"},zY={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},$Y={class:"text-primary-700 font-medium text-sm"},VY={class:"ml-3"},UY={class:"font-medium"},HY={key:1,class:"text-gray-500"},WY={class:"px-3 py-4 text-sm text-gray-900"},GY={key:0,class:"flex items-center"},qY={class:"h-8 w-8 flex-shrink-0"},YY={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},KY={class:"text-primary-700 font-medium text-sm"},ZY={class:"ml-3"},XY={class:"font-medium"},JY={key:1,class:"text-gray-500"},QY={class:"px-3 py-4 text-sm text-gray-900"},eK={key:0,class:"flex items-center"},tK={class:"h-8 w-8 flex-shrink-0"},nK={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},rK={class:"text-primary-700 font-medium text-sm"},iK={class:"ml-3"},sK={class:"font-medium"},oK={key:1,class:"text-gray-500"},aK={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},lK={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},uK=["onClick"],cK=["onClick"],hK=["onClick"],dK={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},fK={class:"bg-white rounded-lg p-6 max-w-md w-full"},pK={class:"flex justify-between items-center mb-4"},gK=["disabled"],mK=["disabled"],vK={key:0,class:"space-y-4"},yK={key:0},bK=["disabled"],_K=["value"],wK=["disabled"],xK=["value"],LK={key:0,class:"mt-1 text-sm text-gray-500"},SK=["disabled"],CK=["value"],EK={key:0,class:"mt-1 text-sm text-gray-500"},PK={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},MK={class:"flex"},kK={class:"ml-3"},AK={class:"text-sm font-medium text-red-800"},TK={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},DK=["disabled"],OK={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},NK=js({__name:"PlansView",setup(t){const e=Nm(),n=Vy(),r=pa(),i=Ct([]),s=Ct([]),o=Ct([]),a=Ct([]),l=Ct(!1),c=Ct(!1),d=Ct(!1),p=Ct(null),v=Ct({nom:"",description:"",client:null}),m=Ct({id:0,nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),x=Ct(!1),E=Ct(null),k=Ct(null),A=Ct(null),D=Ct("date_modification"),V=Ct("desc"),Y=Ct(null),te=Jn(()=>k.value?a.value.filter(X=>typeof X.salarie=="object"&&X.salarie?X.salarie.id===k.value:X.salarie===k.value||X.salarie_id===k.value):a.value),ge=Jn(()=>{let X=i.value;console.log(`
[PlansView] Filtering plans:`,X.map(De=>({id:De.id,entreprise:De.entreprise,salarie:De.salarie,visiteur:De.visiteur}))),r.isAdmin?(Y.value&&(X=X.filter(De=>{var Te;return typeof De.entreprise=="object"?((Te=De.entreprise)==null?void 0:Te.id)===Y.value:De.entreprise===Y.value})),k.value&&(X=X.filter(De=>{var Te;return typeof De.salarie=="object"?((Te=De.salarie)==null?void 0:Te.id)===k.value:De.salarie===k.value}),A.value&&(X=X.filter(De=>{var Te;return typeof De.visiteur=="object"?((Te=De.visiteur)==null?void 0:Te.id)===A.value:De.visiteur===A.value})))):r.isSalarie&&(X=X.filter(De=>{var Te,Je,he;return typeof De.salarie=="object"?((Te=De.salarie)==null?void 0:Te.id)===((Je=r.user)==null?void 0:Je.id):De.salarie===((he=r.user)==null?void 0:he.id)}),A.value&&(X=X.filter(De=>{var Te;return typeof De.visiteur=="object"?((Te=De.visiteur)==null?void 0:Te.id)===A.value:De.visiteur===A.value})));const J=[...X].sort((De,Te)=>{if(D.value==="nom")return V.value==="asc"?De.nom.localeCompare(Te.nom):Te.nom.localeCompare(De.nom);{const Je=new Date(De[D.value]).getTime(),he=new Date(Te[D.value]).getTime();return V.value==="asc"?Je-he:he-Je}});return console.log("[PlansView] Final filtered and sorted plans:",J.map(De=>({id:De.id,entreprise:De.entreprise,salarie:De.salarie,visiteur:De.visiteur}))),J}),fe=Jn(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complète des plans",plans:i.value}:r.isSalarie?{title:"Plans des visiteurs",description:"Plans où vous êtes assigné comme salarie",plans:i.value.filter(X=>{var J,De,Te;return typeof X.salarie=="object"?((J=X.salarie)==null?void 0:J.id)===((De=r.user)==null?void 0:De.id):X.salarie===((Te=r.user)==null?void 0:Te.id)})}:{title:"Mes plans",description:"Plans qui vous sont assignés ou que vous avez créés",plans:i.value.filter(X=>{var Te,Je,he,ee;const J=X.createur.id===((Te=r.user)==null?void 0:Te.id);let De=!1;return typeof X.visiteur=="object"?De=((Je=X.visiteur)==null?void 0:Je.id)===((he=r.user)==null?void 0:he.id):De=X.visiteur===((ee=r.user)==null?void 0:ee.id),De||J})}),I=Jn(()=>Y.value?s.value.filter(X=>{var J;return typeof X.entreprise=="object"?((J=X.entreprise)==null?void 0:J.id)===Y.value:X.entreprise_id===Y.value}):s.value),F=Jn(()=>m.value.entreprise?s.value.filter(X=>{var J;return typeof X.entreprise=="object"?((J=X.entreprise)==null?void 0:J.id)===m.value.entreprise:X.entreprise_id===m.value.entreprise}):[]),K=Jn(()=>!m.value.entreprise||!m.value.salarie?[]:a.value.filter(X=>typeof X.salarie=="object"&&X.salarie?X.salarie.id===m.value.salarie:X.salarie===m.value.salarie||X.salarie_id===m.value.salarie));go(async()=>{var X;await B(),r.isAdmin?await N():r.isSalarie&&await z(((X=r.user)==null?void 0:X.id)||0)});async function B(){try{const X=await n.fetchPlansWithDetails();i.value=X.data}catch(X){console.error("Erreur lors du chargement des plans:",X)}}async function N(){try{console.log("Chargement des entreprises..."),o.value=await r.fetchEnterprises(),console.log("Entreprises chargées:",o.value)}catch(X){console.error("Erreur lors du chargement des entreprises:",X)}}async function j(X){try{if(console.log("Chargement des salaries pour l'entreprise:",X),X===void 0){const J=await r.fetchUsersByRole({role:"SALARIE"});s.value=J}else s.value=await r.fetchEntrepriseSalaries(X);console.log("Salaries chargés:",s.value)}catch(J){console.error("Erreur lors du chargement des salaries:",J)}}async function z(X){try{console.log("Chargement des visiteurs pour le salarie:",X);const J=await nv({role:"VISITEUR",salarieId:X});a.value=J.map(De=>({...De,salarie_id:X})),console.log("Visiteurs chargés:",a.value)}catch(J){console.error("Erreur lors du chargement des visiteurs:",J)}}function U(){l.value=!0,v.value={nom:"",description:"",client:null}}async function $(X){console.log(`
[PlansView][editPlan] ====== DÉBUT ÉDITION PLAN ======`),console.log("[PlansView][editPlan] Plan reçu:",{id:X.id,nom:X.nom,entreprise:X.entreprise,salarie:X.salarie,visiteur:X.visiteur});try{console.log("[PlansView][editPlan] Définition du plan courant dans le store..."),n.setCurrentPlan(X),console.log("[PlansView][editPlan] Sauvegarde de l'ID dans localStorage:",X.id),localStorage.setItem("lastPlanId",X.id.toString()),console.log("[PlansView][editPlan] Redirection vers la vue carte..."),await e.push("/"),console.log(`[PlansView][editPlan] ====== FIN ÉDITION PLAN ======
`)}catch(J){console.error("[PlansView][editPlan] ERREUR:",J),J instanceof Error&&console.error("[PlansView][editPlan] Stack trace:",J.stack),alert("Une erreur est survenue lors du chargement du plan")}}async function re(X){X!=null&&X.id&&(p.value=X,d.value=!0)}async function Q(){var X,J;if((X=p.value)!=null&&X.id)try{await n.deletePlan(p.value.id),await B(),((J=n.currentPlan)==null?void 0:J.id)===p.value.id&&n.clearCurrentPlan()}catch(De){console.error("Erreur lors de la suppression du plan:",De),alert("Une erreur est survenue lors de la suppression du plan")}finally{d.value=!1,p.value=null}}function _e(){d.value=!1,p.value=null}function we(X){return new Date(X).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function nt(X){if(!X)return"";const J=X.first_name||"",De=X.last_name||"";return(J.charAt(0)+De.charAt(0)).toUpperCase()}async function ae(X){x.value=!0,E.value=null;try{r.isAdmin&&!o.value.length&&await N();const J=typeof X.entreprise=="object"&&X.entreprise?X.entreprise.id:X.entreprise,De=typeof X.salarie=="object"&&X.salarie?X.salarie.id:X.salarie,Te=typeof X.visiteur=="object"&&X.visiteur?X.visiteur.id:X.visiteur;m.value={id:X.id,nom:X.nom,description:X.description,entreprise:J||null,salarie:De||null,visiteur:Te||null},J&&await j(J),De&&await z(De),c.value=!0}catch(J){console.error("Erreur lors de l'ouverture du modal:",J),E.value="Erreur lors du chargement des données"}finally{x.value=!1}}async function H(){var X,J,De,Te,Je;E.value=null,x.value=!0;try{if(!m.value.nom.trim())throw new Error("Le nom du plan est requis");if(m.value.visiteur&&!m.value.salarie)throw new Error("Un salarie doit être sélectionné pour assigner un visiteur");if(m.value.salarie&&!m.value.entreprise)throw new Error("Une entreprise doit être sélectionnée pour assigner un salarie");console.log("Données envoyées pour la mise à jour:",{id:m.value.id,nom:m.value.nom.trim(),description:m.value.description.trim(),entreprise_id:m.value.entreprise,salarie_id:m.value.salarie,visiteur_id:m.value.visiteur});const he=await n.updatePlanDetails(m.value.id,{nom:m.value.nom.trim(),description:m.value.description.trim(),entreprise_id:m.value.entreprise,salarie_id:m.value.salarie,visiteur_id:m.value.visiteur});console.log("Réponse de la mise à jour:",he),he&&(c.value=!1,await B())}catch(he){if(console.error("Erreur lors de la mise à jour du plan:",he),(J=(X=he.response)==null?void 0:X.data)!=null&&J.detail)E.value=he.response.data.detail;else if((Te=(De=he.response)==null?void 0:De.data)!=null&&Te.non_field_errors)E.value=he.response.data.non_field_errors[0];else if((Je=he.response)!=null&&Je.data){const ee=Object.entries(he.response.data).map(([se,le])=>`${se}: ${Array.isArray(le)?le[0]:le}`);E.value=ee.join(`
`)}else E.value=he.message||"Une erreur est survenue lors de la mise à jour du plan"}finally{x.value=!1}}Di(()=>Y.value,async X=>{k.value=null,A.value=null,X?await j(X):await j()}),Di(()=>k.value,async X=>{A.value=null,X&&await z(X)}),Di(()=>m.value.entreprise,async X=>{X===null?(m.value.salarie=null,m.value.visiteur=null):await j(X)}),Di(()=>m.value.salarie,async X=>{m.value.visiteur=null,X&&await z(X)});function Z(X){var Je,he,ee;const J=r.user;if(!J)return!1;if(J.user_type==="admin")return!0;if(J.user_type==="entreprise")return typeof X.entreprise=="object"?((Je=X.entreprise)==null?void 0:Je.id)===J.id:X.entreprise===J.id;if(J.user_type==="salarie")return typeof X.salarie=="object"?((he=X.salarie)==null?void 0:he.id)===J.id:X.salarie===J.id;const De=X.createur.id===J.id;let Te=!1;return typeof X.visiteur=="object"?Te=((ee=X.visiteur)==null?void 0:ee.id)===J.id:Te=X.visiteur===J.id,Te||De}async function me(X){await B(),localStorage.setItem("lastPlanId",X.toString()),console.log(`Plan ${X} créé et défini comme plan actif`),e.push("/")}function pe(X){D.value===X?V.value=V.value==="asc"?"desc":"asc":(D.value=X,V.value="desc")}function de(X){return X?Lu(X):""}return(X,J)=>{var De;return Ie(),je("div",oY,[C("div",aY,[C("div",lY,[C("div",uY,[C("h1",cY,Ot(fe.value.title),1),C("p",hY,Ot(fe.value.description),1)]),C("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[C("button",{onClick:U,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),er(r).isAdmin?(Ie(),je("div",dY,[C("div",fY,[J[15]||(J[15]=C("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par entreprise",-1)),On(C("select",{id:"entreprise-filter","onUpdate:modelValue":J[0]||(J[0]=Te=>Y.value=Te),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[J[14]||(J[14]=C("option",{value:null},"Toutes les entreprises",-1)),(Ie(!0),je(Mn,null,gr(o.value,Te=>(Ie(),je("option",{key:Te.id,value:Te.id},Ot(de(Te)),9,pY))),128))],512),[[rs,Y.value]])]),C("div",gY,[J[16]||(J[16]=C("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par salarie",-1)),On(C("select",{id:"salarie-filter","onUpdate:modelValue":J[1]||(J[1]=Te=>k.value=Te),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[C("option",mY,Ot(I.value.length?"Tous les salaries":"Aucun salarie disponible"),1),(Ie(!0),je(Mn,null,gr(I.value,Te=>(Ie(),je("option",{key:Te.id,value:Te.id},Ot(de(Te)),9,vY))),128))],512),[[rs,k.value]])]),k.value?(Ie(),je("div",yY,[J[17]||(J[17]=C("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),On(C("select",{id:"visiteur-filter","onUpdate:modelValue":J[2]||(J[2]=Te=>A.value=Te),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[C("option",bY,Ot(te.value.length?"Tous les visiteurs":"Aucun visiteur disponible"),1),(Ie(!0),je(Mn,null,gr(te.value,Te=>(Ie(),je("option",{key:Te.id,value:Te.id},Ot(de(Te)),9,_Y))),128))],512),[[rs,A.value]])])):en("",!0)])):er(r).isSalarie?(Ie(),je("div",wY,[C("div",xY,[J[19]||(J[19]=C("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),On(C("select",{id:"visiteur-filter","onUpdate:modelValue":J[3]||(J[3]=Te=>A.value=Te),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[J[18]||(J[18]=C("option",{value:null},"Tous les visiteurs",-1)),(Ie(!0),je(Mn,null,gr(a.value,Te=>(Ie(),je("option",{key:Te.id,value:Te.id},Ot(de(Te)),9,LY))),128))],512),[[rs,A.value]])])])):en("",!0),C("div",SY,[C("div",CY,[C("div",EY,[C("table",PY,[C("thead",MY,[C("tr",null,[C("th",kY,[C("button",{onClick:J[4]||(J[4]=Te=>pe("nom")),class:"group inline-flex items-center"},[J[21]||(J[21]=ui(" Nom ")),C("span",AY,[(Ie(),je("svg",{class:Ti(["h-5 w-5",{"text-gray-900":D.value==="nom","text-gray-400":D.value!=="nom","rotate-180":D.value==="nom"&&V.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},J[20]||(J[20]=[C("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),J[24]||(J[24]=C("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),J[25]||(J[25]=C("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise ",-1)),J[26]||(J[26]=C("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Salarie ",-1)),J[27]||(J[27]=C("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Visiteur ",-1)),C("th",TY,[C("button",{onClick:J[5]||(J[5]=Te=>pe("date_modification")),class:"group inline-flex items-center"},[J[23]||(J[23]=ui(" Dernière modification ")),C("span",DY,[(Ie(),je("svg",{class:Ti(["h-5 w-5",{"text-gray-900":D.value==="date_modification","text-gray-400":D.value!=="date_modification","rotate-180":D.value==="date_modification"&&V.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},J[22]||(J[22]=[C("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),J[28]||(J[28]=C("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[C("span",{class:"sr-only"},"Actions")],-1))])]),C("tbody",OY,[ge.value.length===0?(Ie(),je("tr",NY,J[29]||(J[29]=[C("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):en("",!0),(Ie(!0),je(Mn,null,gr(ge.value,Te=>(Ie(),je("tr",{key:Te.id,class:"hover:bg-gray-50"},[C("td",IY,Ot(Te.nom),1),C("td",BY,Ot(Te.description||"-"),1),C("td",RY,[Te.entreprise&&typeof Te.entreprise=="object"?(Ie(),je("div",FY,[C("div",jY,[C("div",zY,[C("span",$Y,Ot(nt(Te.entreprise)),1)])]),C("div",VY,[C("div",UY,Ot(er(Lu)(Te.entreprise)),1)])])):(Ie(),je("div",HY," Non assigné "))]),C("td",WY,[Te.salarie&&typeof Te.salarie=="object"?(Ie(),je("div",GY,[C("div",qY,[C("div",YY,[C("span",KY,Ot(nt(Te.salarie)),1)])]),C("div",ZY,[C("div",XY,Ot(er(Lu)(Te.salarie)),1)])])):(Ie(),je("div",JY," Non assigné "))]),C("td",QY,[Te.visiteur&&typeof Te.visiteur=="object"?(Ie(),je("div",eK,[C("div",tK,[C("div",nK,[C("span",rK,Ot(nt(Te.visiteur)),1)])]),C("div",iK,[C("div",sK,Ot(er(Lu)(Te.visiteur)),1)])])):(Ie(),je("div",oK," Non assigné "))]),C("td",aK,Ot(we(Te.date_modification)),1),C("td",lK,[C("button",{onClick:Je=>$(Te),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,uK),C("button",{onClick:Je=>ae(Te),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,cK),Z(Te)?(Ie(),je("button",{key:0,onClick:Je=>re(Te),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,hK)):en("",!0)])]))),128))])])])])]),yi(jE,{modelValue:l.value,"onUpdate:modelValue":J[6]||(J[6]=Te=>l.value=Te),salaries:s.value,clients:a.value,onCreated:me},null,8,["modelValue","salaries","clients"]),c.value?(Ie(),je("div",dK,[C("div",fK,[C("div",pK,[J[31]||(J[31]=C("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),C("button",{onClick:J[7]||(J[7]=Te=>c.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},J[30]||(J[30]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("form",{onSubmit:Bh(H,["prevent"]),class:"space-y-4"},[C("div",null,[J[32]||(J[32]=C("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),On(C("input",{type:"text",id:"edit-nom","onUpdate:modelValue":J[8]||(J[8]=Te=>m.value.nom=Te),disabled:x.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",required:""},null,8,gK),[[Fr,m.value.nom]])]),C("div",null,[J[33]||(J[33]=C("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),On(C("textarea",{id:"edit-description","onUpdate:modelValue":J[9]||(J[9]=Te=>m.value.description=Te),disabled:x.value,rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,mK),[[Fr,m.value.description]])]),er(r).isAdmin||((De=er(r).user)==null?void 0:De.user_type)==="entreprise"?(Ie(),je("div",vK,[er(r).isAdmin?(Ie(),je("div",yK,[J[35]||(J[35]=C("label",{for:"edit-entreprise",class:"block text-sm font-medium text-gray-700"}," Entreprise ",-1)),On(C("select",{id:"edit-entreprise","onUpdate:modelValue":J[10]||(J[10]=Te=>m.value.entreprise=Te),disabled:x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[J[34]||(J[34]=C("option",{value:null},"Sélectionner une entreprise",-1)),(Ie(!0),je(Mn,null,gr(o.value,Te=>(Ie(),je("option",{key:Te.id,value:Te.id},Ot(de(Te)),9,_K))),128))],8,bK),[[rs,m.value.entreprise]])])):en("",!0),C("div",null,[J[37]||(J[37]=C("label",{for:"edit-salarie",class:"block text-sm font-medium text-gray-700"}," Salarie ",-1)),On(C("select",{id:"edit-salarie","onUpdate:modelValue":J[11]||(J[11]=Te=>m.value.salarie=Te),disabled:er(r).isAdmin&&!m.value.entreprise||x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[J[36]||(J[36]=C("option",{value:null},"Sélectionner un salarie",-1)),(Ie(!0),je(Mn,null,gr(F.value,Te=>(Ie(),je("option",{key:Te.id,value:Te.id},Ot(de(Te)),9,xK))),128))],8,wK),[[rs,m.value.salarie]]),er(r).isAdmin&&!m.value.entreprise?(Ie(),je("p",LK," Veuillez d'abord sélectionner une entreprise ")):en("",!0)]),C("div",null,[J[39]||(J[39]=C("label",{for:"edit-visiteur",class:"block text-sm font-medium text-gray-700"}," Visiteur ",-1)),On(C("select",{id:"edit-visiteur","onUpdate:modelValue":J[12]||(J[12]=Te=>m.value.visiteur=Te),disabled:!m.value.salarie||x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[J[38]||(J[38]=C("option",{value:null},"Sélectionner un visiteur",-1)),(Ie(!0),je(Mn,null,gr(K.value,Te=>(Ie(),je("option",{key:Te.id,value:Te.id},Ot(de(Te)),9,CK))),128))],8,SK),[[rs,m.value.visiteur]]),m.value.salarie?en("",!0):(Ie(),je("p",EK," Veuillez d'abord sélectionner un salarie "))])])):en("",!0),E.value?(Ie(),je("div",PK,[C("div",MK,[J[40]||(J[40]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",kK,[C("p",AK,Ot(E.value),1)])])])):en("",!0),C("div",TK,[C("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:J[13]||(J[13]=Te=>c.value=!1)}," Annuler "),C("button",{type:"submit",disabled:x.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[x.value?(Ie(),je("svg",OK,J[41]||(J[41]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):en("",!0),ui(" "+Ot(x.value?"Enregistrement...":"Enregistrer"),1)],8,DK)])],32)])])):en("",!0),d.value?(Ie(),Va(aP,{key:3,title:"Supprimer le plan",message:"Êtes-vous sûr de vouloir supprimer ce plan ? Cette action est irréversible.",onConfirm:Q,onCancel:_e})):en("",!0)])])}}});var lP={exports:{}};const IK=_E(iI);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function j5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function th(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j5(Object(n),!0).forEach(function(r){BK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cv(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?cv=function(e){return typeof e}:cv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cv(t)}function BK(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xu(){return Xu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xu.apply(this,arguments)}function RK(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function FK(t,e){if(t==null)return{};var n=RK(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jK(t){return zK(t)||$K(t)||VK(t)||UK()}function zK(t){if(Array.isArray(t))return Bb(t)}function $K(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function VK(t,e){if(t){if(typeof t=="string")return Bb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bb(t,e)}}function Bb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function UK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var HK="1.14.0";function Oh(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var zh=Oh(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Im=Oh(/Edge/i),z5=Oh(/firefox/i),qg=Oh(/safari/i)&&!Oh(/chrome/i)&&!Oh(/android/i),uP=Oh(/iP(ad|od|hone)/i),WK=Oh(/chrome/i)&&Oh(/android/i),cP={capture:!1,passive:!1};function Ai(t,e,n){t.addEventListener(e,n,!zh&&cP)}function wi(t,e,n){t.removeEventListener(e,n,!zh&&cP)}function Xv(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function GK(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function mc(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Xv(t,e):Xv(t,e))||r&&t===n)return t;if(t===n)break}while(t=GK(t))}return null}var $5=/\s+/g;function ho(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace($5," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace($5," ")}}function hr(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function gf(t,e){var n="";if(typeof t=="string")n=t;else do{var r=hr(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function hP(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function Jc(){var t=document.scrollingElement;return t||document.documentElement}function Ks(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,c,d,p;if(t!==window&&t.parentNode&&t!==Jc()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,d=s.height,p=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,p=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!zh))do if(i&&i.getBoundingClientRect&&(hr(i,"transform")!=="none"||n&&hr(i,"position")!=="static")){var v=i.getBoundingClientRect();o-=v.top+parseInt(hr(i,"border-top-width")),a-=v.left+parseInt(hr(i,"border-left-width")),l=o+s.height,c=a+s.width;break}while(i=i.parentNode);if(r&&t!==window){var m=gf(i||t),x=m&&m.a,E=m&&m.d;m&&(o/=E,a/=x,p/=x,d/=E,l=o+d,c=a+p)}return{top:o,left:a,bottom:l,right:c,width:p,height:d}}}function V5(t,e,n){for(var r=dd(t,!0),i=Ks(t)[e];r;){var s=Ks(r)[n],o=void 0;if(o=i>=s,!o)return r;if(r===Jc())break;r=dd(r,!1)}return!1}function Dp(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Ir.ghost&&(r||o[s]!==Ir.dragged)&&mc(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function W_(t,e){for(var n=t.lastElementChild;n&&(n===Ir.ghost||hr(n,"display")==="none"||e&&!Xv(n,e));)n=n.previousElementSibling;return n||null}function Co(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Ir.clone&&(!e||Xv(t,e))&&n++;return n}function U5(t){var e=0,n=0,r=Jc();if(t)do{var i=gf(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function qK(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function dd(t,e){if(!t||!t.getBoundingClientRect)return Jc();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=hr(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Jc();if(r||e)return n;r=!0}}while(n=n.parentNode);return Jc()}function YK(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function c2(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Yg;function dP(t,e){return function(){if(!Yg){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),Yg=setTimeout(function(){Yg=void 0},e)}}}function KK(){clearTimeout(Yg),Yg=void 0}function fP(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function G_(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function H5(t,e){hr(t,"position","absolute"),hr(t,"top",e.top),hr(t,"left",e.left),hr(t,"width",e.width),hr(t,"height",e.height)}function h2(t){hr(t,"position",""),hr(t,"top",""),hr(t,"left",""),hr(t,"width",""),hr(t,"height","")}var dl="Sortable"+new Date().getTime();function ZK(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(hr(i,"display")==="none"||i===Ir.ghost)){t.push({target:i,rect:Ks(i)});var s=th({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=gf(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(qK(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,c=a.target,d=c.fromRect,p=Ks(c),v=c.prevFromRect,m=c.prevToRect,x=a.rect,E=gf(c,!0);E&&(p.top-=E.f,p.left-=E.e),c.toRect=p,c.thisAnimationDuration&&c2(v,p)&&!c2(d,p)&&(x.top-p.top)/(x.left-p.left)===(d.top-p.top)/(d.left-p.left)&&(l=JK(x,v,m,i.options)),c2(p,d)||(c.prevFromRect=d,c.prevToRect=p,l||(l=i.options.animation),i.animate(c,x,p,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){hr(r,"transition",""),hr(r,"transform","");var a=gf(this.el),l=a&&a.a,c=a&&a.d,d=(i.left-s.left)/(l||1),p=(i.top-s.top)/(c||1);r.animatingX=!!d,r.animatingY=!!p,hr(r,"transform","translate3d("+d+"px,"+p+"px,0)"),this.forRepaintDummy=XK(r),hr(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),hr(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){hr(r,"transition",""),hr(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function XK(t){return t.offsetWidth}function JK(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var Xf=[],d2={initializeByDefault:!0},Bm={mount:function(e){for(var n in d2)d2.hasOwnProperty(n)&&!(n in e)&&(e[n]=d2[n]);Xf.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Xf.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";Xf.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](th({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](th({sortable:n},r)))})},initializePlugins:function(e,n,r,i){Xf.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,Xu(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return Xf.forEach(function(i){typeof i.eventProperties=="function"&&Xu(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return Xf.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function Sg(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,d=t.oldDraggableIndex,p=t.newDraggableIndex,v=t.originalEvent,m=t.putSortable,x=t.extraEventProperties;if(e=e||n&&n[dl],!!e){var E,k=e.options,A="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!zh&&!Im?E=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(E=document.createEvent("Event"),E.initEvent(r,!0,!0)),E.to=o||n,E.from=a||n,E.item=i||n,E.clone=s,E.oldIndex=l,E.newIndex=c,E.oldDraggableIndex=d,E.newDraggableIndex=p,E.originalEvent=v,E.pullMode=m?m.lastPutMode:void 0;var D=th(th({},x),Bm.getEventProperties(r,e));for(var V in D)E[V]=D[V];n&&n.dispatchEvent(E),k[A]&&k[A].call(e,E)}}var QK=["evt"],Gl=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=FK(r,QK);Bm.pluginEvent.bind(Ir)(e,n,th({dragEl:Vn,parentEl:xo,ghostEl:ai,rootEl:Ys,nextEl:tf,lastDownEl:hv,cloneEl:Lo,cloneHidden:ud,dragStarted:Cg,putSortable:za,activeSortable:Ir.active,originalEvent:i,oldIndex:dp,oldDraggableIndex:Kg,newIndex:_u,newDraggableIndex:ld,hideGhostForTarget:vP,unhideGhostForTarget:yP,cloneNowHidden:function(){ud=!0},cloneNowShown:function(){ud=!1},dispatchSortableEvent:function(a){Cl({sortable:n,name:a,originalEvent:i})}},s))};function Cl(t){Sg(th({putSortable:za,cloneEl:Lo,targetEl:Vn,rootEl:Ys,oldIndex:dp,oldDraggableIndex:Kg,newIndex:_u,newDraggableIndex:ld},t))}var Vn,xo,ai,Ys,tf,hv,Lo,ud,dp,_u,Kg,ld,P0,za,up=!1,Jv=!1,Qv=[],Yd,dc,f2,p2,W5,G5,Cg,Jf,Zg,Xg=!1,M0=!1,dv,ol,g2=[],Rb=!1,ey=[],Gy=typeof document<"u",k0=uP,q5=Im||zh?"cssFloat":"float",eZ=Gy&&!WK&&!uP&&"draggable"in document.createElement("div"),pP=function(){if(Gy){if(zh)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),gP=function(e,n){var r=hr(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=Dp(e,0,n),o=Dp(e,1,n),a=s&&hr(s),l=o&&hr(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Ks(s).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Ks(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var p=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===p)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[q5]==="none"||o&&r[q5]==="none"&&c+d>i)?"vertical":"horizontal"},tZ=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?n.left:n.top,l=r?n.right:n.bottom,c=r?n.width:n.height;return i===a||s===l||i+o/2===a+c/2},nZ=function(e,n){var r;return Qv.some(function(i){var s=i[dl].options.emptyInsertThreshold;if(!(!s||W_(i))){var o=Ks(i),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},mP=function(e){function n(s,o){return function(a,l,c,d){var p=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||p))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,d),o)(a,l,c,d);var v=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===v||s.join&&s.indexOf(v)>-1}}var r={},i=e.group;(!i||cv(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},vP=function(){!pP&&ai&&hr(ai,"display","none")},yP=function(){!pP&&ai&&hr(ai,"display","")};Gy&&document.addEventListener("click",function(t){if(Jv)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Jv=!1,!1},!0);var Kd=function(e){if(Vn){e=e.touches?e.touches[0]:e;var n=nZ(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[dl]._onDragOver(r)}}},rZ=function(e){Vn&&Vn.parentNode[dl]._isOutsideThisEl(e.target)};function Ir(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Xu({},e),t[dl]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return gP(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ir.supportPointer!==!1&&"PointerEvent"in window&&!qg,emptyInsertThreshold:5};Bm.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);mP(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:eZ,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Ai(t,"pointerdown",this._onTapStart):(Ai(t,"mousedown",this._onTapStart),Ai(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ai(t,"dragover",this),Ai(t,"dragenter",this)),Qv.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Xu(this,ZK())}Ir.prototype={constructor:Ir,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Jf=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,Vn):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,d=i.filter;if(hZ(r),!Vn&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&qg&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=mc(l,i.draggable,r,!1),!(l&&l.animated)&&hv!==l)){if(dp=Co(l),Kg=Co(l,i.draggable),typeof d=="function"){if(d.call(this,e,l,this)){Cl({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Gl("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(p){if(p=mc(c,p.trim(),r,!1),p)return Cl({sortable:n,rootEl:p,name:"filter",targetEl:l,fromEl:r,toEl:r}),Gl("filter",n,{evt:e}),!0}),d)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!mc(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!Vn&&r.parentNode===s){var c=Ks(r);if(Ys=s,Vn=r,xo=Vn.parentNode,tf=Vn.nextSibling,hv=r,P0=o.group,Ir.dragged=Vn,Yd={target:Vn,clientX:(n||e).clientX,clientY:(n||e).clientY},W5=Yd.clientX-c.left,G5=Yd.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,Vn.style["will-change"]="all",l=function(){if(Gl("delayEnded",i,{evt:e}),Ir.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!z5&&i.nativeDraggable&&(Vn.draggable=!0),i._triggerDragStart(e,n),Cl({sortable:i,name:"choose",originalEvent:e}),ho(Vn,o.chosenClass,!0)},o.ignore.split(",").forEach(function(d){hP(Vn,d.trim(),m2)}),Ai(a,"dragover",Kd),Ai(a,"mousemove",Kd),Ai(a,"touchmove",Kd),Ai(a,"mouseup",i._onDrop),Ai(a,"touchend",i._onDrop),Ai(a,"touchcancel",i._onDrop),z5&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Vn.draggable=!0),Gl("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Im||zh))){if(Ir.eventCanceled){this._onDrop();return}Ai(a,"mouseup",i._disableDelayedDrag),Ai(a,"touchend",i._disableDelayedDrag),Ai(a,"touchcancel",i._disableDelayedDrag),Ai(a,"mousemove",i._delayedDragTouchMoveHandler),Ai(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&Ai(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Vn&&m2(Vn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;wi(e,"mouseup",this._disableDelayedDrag),wi(e,"touchend",this._disableDelayedDrag),wi(e,"touchcancel",this._disableDelayedDrag),wi(e,"mousemove",this._delayedDragTouchMoveHandler),wi(e,"touchmove",this._delayedDragTouchMoveHandler),wi(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?Ai(document,"pointermove",this._onTouchMove):n?Ai(document,"touchmove",this._onTouchMove):Ai(document,"mousemove",this._onTouchMove):(Ai(Vn,"dragend",this),Ai(Ys,"dragstart",this._onDragStart));try{document.selection?fv(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(up=!1,Ys&&Vn){Gl("dragStarted",this,{evt:n}),this.nativeDraggable&&Ai(document,"dragover",rZ);var r=this.options;!e&&ho(Vn,r.dragClass,!1),ho(Vn,r.ghostClass,!0),Ir.active=this,e&&this._appendGhost(),Cl({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(dc){this._lastX=dc.clientX,this._lastY=dc.clientY,vP();for(var e=document.elementFromPoint(dc.clientX,dc.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(dc.clientX,dc.clientY),e!==n);)n=e;if(Vn.parentNode[dl]._isOutsideThisEl(e),n)do{if(n[dl]){var r=void 0;if(r=n[dl]._onDragOver({clientX:dc.clientX,clientY:dc.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);yP()}},_onTouchMove:function(e){if(Yd){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=ai&&gf(ai,!0),a=ai&&o&&o.a,l=ai&&o&&o.d,c=k0&&ol&&U5(ol),d=(s.clientX-Yd.clientX+i.x)/(a||1)+(c?c[0]-g2[0]:0)/(a||1),p=(s.clientY-Yd.clientY+i.y)/(l||1)+(c?c[1]-g2[1]:0)/(l||1);if(!Ir.active&&!up){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(ai){o?(o.e+=d-(f2||0),o.f+=p-(p2||0)):o={a:1,b:0,c:0,d:1,e:d,f:p};var v="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");hr(ai,"webkitTransform",v),hr(ai,"mozTransform",v),hr(ai,"msTransform",v),hr(ai,"transform",v),f2=d,p2=p,dc=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ai){var e=this.options.fallbackOnBody?document.body:Ys,n=Ks(Vn,!0,k0,!0,e),r=this.options;if(k0){for(ol=e;hr(ol,"position")==="static"&&hr(ol,"transform")==="none"&&ol!==document;)ol=ol.parentNode;ol!==document.body&&ol!==document.documentElement?(ol===document&&(ol=Jc()),n.top+=ol.scrollTop,n.left+=ol.scrollLeft):ol=Jc(),g2=U5(ol)}ai=Vn.cloneNode(!0),ho(ai,r.ghostClass,!1),ho(ai,r.fallbackClass,!0),ho(ai,r.dragClass,!0),hr(ai,"transition",""),hr(ai,"transform",""),hr(ai,"box-sizing","border-box"),hr(ai,"margin",0),hr(ai,"top",n.top),hr(ai,"left",n.left),hr(ai,"width",n.width),hr(ai,"height",n.height),hr(ai,"opacity","0.8"),hr(ai,"position",k0?"absolute":"fixed"),hr(ai,"zIndex","100000"),hr(ai,"pointerEvents","none"),Ir.ghost=ai,e.appendChild(ai),hr(ai,"transform-origin",W5/parseInt(ai.style.width)*100+"% "+G5/parseInt(ai.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(Gl("dragStart",this,{evt:e}),Ir.eventCanceled){this._onDrop();return}Gl("setupClone",this),Ir.eventCanceled||(Lo=G_(Vn),Lo.draggable=!1,Lo.style["will-change"]="",this._hideClone(),ho(Lo,this.options.chosenClass,!1),Ir.clone=Lo),r.cloneId=fv(function(){Gl("clone",r),!Ir.eventCanceled&&(r.options.removeCloneOnHide||Ys.insertBefore(Lo,Vn),r._hideClone(),Cl({sortable:r,name:"clone"}))}),!n&&ho(Vn,s.dragClass,!0),n?(Jv=!0,r._loopId=setInterval(r._emulateDragOver,50)):(wi(document,"mouseup",r._onDrop),wi(document,"touchend",r._onDrop),wi(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,Vn)),Ai(document,"drop",r),hr(Vn,"transform","translateZ(0)")),up=!0,r._dragStartId=fv(r._dragStarted.bind(r,n,e)),Ai(document,"selectstart",r),Cg=!0,qg&&hr(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,a=this.options,l=a.group,c=Ir.active,d=P0===l,p=a.sort,v=za||c,m,x=this,E=!1;if(Rb)return;function k(Q,_e){Gl(Q,x,th({evt:e,isOwner:d,axis:m?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:p,fromSortable:v,target:r,completed:D,onMove:function(nt,ae){return A0(Ys,n,Vn,i,nt,Ks(nt),e,ae)},changed:V},_e))}function A(){k("dragOverAnimationCapture"),x.captureAnimationState(),x!==v&&v.captureAnimationState()}function D(Q){return k("dragOverCompleted",{insertion:Q}),Q&&(d?c._hideClone():c._showClone(x),x!==v&&(ho(Vn,za?za.options.ghostClass:c.options.ghostClass,!1),ho(Vn,a.ghostClass,!0)),za!==x&&x!==Ir.active?za=x:x===Ir.active&&za&&(za=null),v===x&&(x._ignoreWhileAnimating=r),x.animateAll(function(){k("dragOverAnimationComplete"),x._ignoreWhileAnimating=null}),x!==v&&(v.animateAll(),v._ignoreWhileAnimating=null)),(r===Vn&&!Vn.animated||r===n&&!r.animated)&&(Jf=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(Vn.parentNode[dl]._isOutsideThisEl(e.target),!Q&&Kd(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),E=!0}function V(){_u=Co(Vn),ld=Co(Vn,a.draggable),Cl({sortable:x,name:"change",toEl:n,newIndex:_u,newDraggableIndex:ld,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=mc(r,a.draggable,n,!0),k("dragOver"),Ir.eventCanceled)return E;if(Vn.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||x._ignoreWhileAnimating===r)return D(!1);if(Jv=!1,c&&!a.disabled&&(d?p||(o=xo!==Ys):za===this||(this.lastPutMode=P0.checkPull(this,c,Vn,e))&&l.checkPut(this,c,Vn,e))){if(m=this._getDirection(e,r)==="vertical",i=Ks(Vn),k("dragOverValid"),Ir.eventCanceled)return E;if(o)return xo=Ys,A(),this._hideClone(),k("revert"),Ir.eventCanceled||(tf?Ys.insertBefore(Vn,tf):Ys.appendChild(Vn)),D(!0);var Y=W_(n,a.draggable);if(!Y||aZ(e,m,this)&&!Y.animated){if(Y===Vn)return D(!1);if(Y&&n===e.target&&(r=Y),r&&(s=Ks(r)),A0(Ys,n,Vn,i,r,s,e,!!r)!==!1)return A(),n.appendChild(Vn),xo=n,V(),D(!0)}else if(Y&&oZ(e,m,this)){var te=Dp(n,0,a,!0);if(te===Vn)return D(!1);if(r=te,s=Ks(r),A0(Ys,n,Vn,i,r,s,e,!1)!==!1)return A(),n.insertBefore(Vn,te),xo=n,V(),D(!0)}else if(r.parentNode===n){s=Ks(r);var ge=0,fe,I=Vn.parentNode!==n,F=!tZ(Vn.animated&&Vn.toRect||i,r.animated&&r.toRect||s,m),K=m?"top":"left",B=V5(r,"top","top")||V5(Vn,"top","top"),N=B?B.scrollTop:void 0;Jf!==r&&(fe=s[K],Xg=!1,M0=!F&&a.invertSwap||I),ge=lZ(e,r,s,m,F?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,M0,Jf===r);var j;if(ge!==0){var z=Co(Vn);do z-=ge,j=xo.children[z];while(j&&(hr(j,"display")==="none"||j===ai))}if(ge===0||j===r)return D(!1);Jf=r,Zg=ge;var U=r.nextElementSibling,$=!1;$=ge===1;var re=A0(Ys,n,Vn,i,r,s,e,$);if(re!==!1)return(re===1||re===-1)&&($=re===1),Rb=!0,setTimeout(sZ,30),A(),$&&!U?n.appendChild(Vn):r.parentNode.insertBefore(Vn,$?U:r),B&&fP(B,0,N-B.scrollTop),xo=Vn.parentNode,fe!==void 0&&!M0&&(dv=Math.abs(fe-Ks(r)[K])),V(),D(!0)}if(n.contains(Vn))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){wi(document,"mousemove",this._onTouchMove),wi(document,"touchmove",this._onTouchMove),wi(document,"pointermove",this._onTouchMove),wi(document,"dragover",Kd),wi(document,"mousemove",Kd),wi(document,"touchmove",Kd)},_offUpEvents:function(){var e=this.el.ownerDocument;wi(e,"mouseup",this._onDrop),wi(e,"touchend",this._onDrop),wi(e,"pointerup",this._onDrop),wi(e,"touchcancel",this._onDrop),wi(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(_u=Co(Vn),ld=Co(Vn,r.draggable),Gl("drop",this,{evt:e}),xo=Vn&&Vn.parentNode,_u=Co(Vn),ld=Co(Vn,r.draggable),Ir.eventCanceled){this._nulling();return}up=!1,M0=!1,Xg=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Fb(this.cloneId),Fb(this._dragStartId),this.nativeDraggable&&(wi(document,"drop",this),wi(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),qg&&hr(document.body,"user-select",""),hr(Vn,"transform",""),e&&(Cg&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),ai&&ai.parentNode&&ai.parentNode.removeChild(ai),(Ys===xo||za&&za.lastPutMode!=="clone")&&Lo&&Lo.parentNode&&Lo.parentNode.removeChild(Lo),Vn&&(this.nativeDraggable&&wi(Vn,"dragend",this),m2(Vn),Vn.style["will-change"]="",Cg&&!up&&ho(Vn,za?za.options.ghostClass:this.options.ghostClass,!1),ho(Vn,this.options.chosenClass,!1),Cl({sortable:this,name:"unchoose",toEl:xo,newIndex:null,newDraggableIndex:null,originalEvent:e}),Ys!==xo?(_u>=0&&(Cl({rootEl:xo,name:"add",toEl:xo,fromEl:Ys,originalEvent:e}),Cl({sortable:this,name:"remove",toEl:xo,originalEvent:e}),Cl({rootEl:xo,name:"sort",toEl:xo,fromEl:Ys,originalEvent:e}),Cl({sortable:this,name:"sort",toEl:xo,originalEvent:e})),za&&za.save()):_u!==dp&&_u>=0&&(Cl({sortable:this,name:"update",toEl:xo,originalEvent:e}),Cl({sortable:this,name:"sort",toEl:xo,originalEvent:e})),Ir.active&&((_u==null||_u===-1)&&(_u=dp,ld=Kg),Cl({sortable:this,name:"end",toEl:xo,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Gl("nulling",this),Ys=Vn=xo=ai=tf=Lo=hv=ud=Yd=dc=Cg=_u=ld=dp=Kg=Jf=Zg=za=P0=Ir.dragged=Ir.ghost=Ir.clone=Ir.active=null,ey.forEach(function(e){e.checked=!0}),ey.length=f2=p2=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Vn&&(this._onDragOver(e),iZ(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],mc(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||cZ(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];mc(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return mc(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=Bm.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&mP(r)},destroy:function(){Gl("destroy",this);var e=this.el;e[dl]=null,wi(e,"mousedown",this._onTapStart),wi(e,"touchstart",this._onTapStart),wi(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(wi(e,"dragover",this),wi(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Qv.splice(Qv.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ud){if(Gl("hideClone",this),Ir.eventCanceled)return;hr(Lo,"display","none"),this.options.removeCloneOnHide&&Lo.parentNode&&Lo.parentNode.removeChild(Lo),ud=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ud){if(Gl("showClone",this),Ir.eventCanceled)return;Vn.parentNode==Ys&&!this.options.group.revertClone?Ys.insertBefore(Lo,Vn):tf?Ys.insertBefore(Lo,tf):Ys.appendChild(Lo),this.options.group.revertClone&&this.animate(Vn,Lo),hr(Lo,"display",""),ud=!1}}};function iZ(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function A0(t,e,n,r,i,s,o,a){var l,c=t[dl],d=c.options.onMove,p;return window.CustomEvent&&!zh&&!Im?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=s||Ks(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),d&&(p=d.call(c,l,o)),p}function m2(t){t.draggable=!1}function sZ(){Rb=!1}function oZ(t,e,n){var r=Ks(Dp(n.el,0,n.options,!0)),i=10;return e?t.clientX<r.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-i||t.clientY<r.bottom&&t.clientX<r.left}function aZ(t,e,n){var r=Ks(W_(n.el,n.options.draggable)),i=10;return e?t.clientX>r.right+i||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+i}function lZ(t,e,n,r,i,s,o,a){var l=r?t.clientY:t.clientX,c=r?n.height:n.width,d=r?n.top:n.left,p=r?n.bottom:n.right,v=!1;if(!o){if(a&&dv<c*i){if(!Xg&&(Zg===1?l>d+c*s/2:l<p-c*s/2)&&(Xg=!0),Xg)v=!0;else if(Zg===1?l<d+dv:l>p-dv)return-Zg}else if(l>d+c*(1-i)/2&&l<p-c*(1-i)/2)return uZ(e)}return v=v||o,v&&(l<d+c*s/2||l>p-c*s/2)?l>d+c/2?1:-1:0}function uZ(t){return Co(Vn)<Co(t)?1:-1}function cZ(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function hZ(t){ey.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&ey.push(r)}}function fv(t){return setTimeout(t,0)}function Fb(t){return clearTimeout(t)}Gy&&Ai(document,"touchmove",function(t){(Ir.active||up)&&t.cancelable&&t.preventDefault()});Ir.utils={on:Ai,off:wi,css:hr,find:hP,is:function(e,n){return!!mc(e,n,e,!1)},extend:YK,throttle:dP,closest:mc,toggleClass:ho,clone:G_,index:Co,nextTick:fv,cancelNextTick:Fb,detectDirection:gP,getChild:Dp};Ir.get=function(t){return t[dl]};Ir.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Ir.utils=th(th({},Ir.utils),r.utils)),Bm.mount(r)})};Ir.create=function(t,e){return new Ir(t,e)};Ir.version=HK;var ta=[],Eg,jb,zb=!1,v2,y2,ty,Pg;function dZ(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?Ai(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ai(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Ai(document,"touchmove",this._handleFallbackAutoScroll):Ai(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?wi(document,"dragover",this._handleAutoScroll):(wi(document,"pointermove",this._handleFallbackAutoScroll),wi(document,"touchmove",this._handleFallbackAutoScroll),wi(document,"mousemove",this._handleFallbackAutoScroll)),Y5(),pv(),KK()},nulling:function(){ty=jb=Eg=zb=Pg=v2=y2=null,ta.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(ty=n,r||this.options.forceAutoScrollFallback||Im||zh||qg){b2(n,this.options,a,r);var l=dd(a,!0);zb&&(!Pg||s!==v2||o!==y2)&&(Pg&&Y5(),Pg=setInterval(function(){var c=dd(document.elementFromPoint(s,o),!0);c!==l&&(l=c,pv()),b2(n,i.options,c,r)},10),v2=s,y2=o)}else{if(!this.options.bubbleScroll||dd(a,!0)===Jc()){pv();return}b2(n,this.options,dd(a,!1),!1)}}},Xu(t,{pluginName:"scroll",initializeByDefault:!0})}function pv(){ta.forEach(function(t){clearInterval(t.pid)}),ta=[]}function Y5(){clearInterval(Pg)}var b2=dP(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Jc(),c=!1,d;jb!==n&&(jb=n,pv(),Eg=e.scroll,d=e.scrollFn,Eg===!0&&(Eg=dd(n,!0)));var p=0,v=Eg;do{var m=v,x=Ks(m),E=x.top,k=x.bottom,A=x.left,D=x.right,V=x.width,Y=x.height,te=void 0,ge=void 0,fe=m.scrollWidth,I=m.scrollHeight,F=hr(m),K=m.scrollLeft,B=m.scrollTop;m===l?(te=V<fe&&(F.overflowX==="auto"||F.overflowX==="scroll"||F.overflowX==="visible"),ge=Y<I&&(F.overflowY==="auto"||F.overflowY==="scroll"||F.overflowY==="visible")):(te=V<fe&&(F.overflowX==="auto"||F.overflowX==="scroll"),ge=Y<I&&(F.overflowY==="auto"||F.overflowY==="scroll"));var N=te&&(Math.abs(D-i)<=o&&K+V<fe)-(Math.abs(A-i)<=o&&!!K),j=ge&&(Math.abs(k-s)<=o&&B+Y<I)-(Math.abs(E-s)<=o&&!!B);if(!ta[p])for(var z=0;z<=p;z++)ta[z]||(ta[z]={});(ta[p].vx!=N||ta[p].vy!=j||ta[p].el!==m)&&(ta[p].el=m,ta[p].vx=N,ta[p].vy=j,clearInterval(ta[p].pid),(N!=0||j!=0)&&(c=!0,ta[p].pid=setInterval((function(){r&&this.layer===0&&Ir.active._onTouchMove(ty);var U=ta[this.layer].vy?ta[this.layer].vy*a:0,$=ta[this.layer].vx?ta[this.layer].vx*a:0;typeof d=="function"&&d.call(Ir.dragged.parentNode[dl],$,U,t,ty,ta[this.layer].el)!=="continue"||fP(ta[this.layer].el,$,U)}).bind({layer:p}),24))),p++}while(e.bubbleScroll&&v!==l&&(v=dd(v,!1)));zb=c}},30),bP=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=r||s;a();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,p=document.elementFromPoint(d.clientX,d.clientY);l(),c&&!c.el.contains(p)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function q_(){}q_.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Dp(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:bP};Xu(q_,{pluginName:"revertOnSpill"});function Y_(){}Y_.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:bP};Xu(Y_,{pluginName:"removeOnSpill"});var zu;function fZ(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(n){var r=n.dragEl;zu=r},dragOverValid:function(n){var r=n.completed,i=n.target,s=n.onMove,o=n.activeSortable,a=n.changed,l=n.cancel;if(o.options.swap){var c=this.sortable.el,d=this.options;if(i&&i!==c){var p=zu;s(i)!==!1?(ho(i,d.swapClass,!0),zu=i):zu=null,p&&p!==zu&&ho(p,d.swapClass,!1)}a(),r(!0),l()}},drop:function(n){var r=n.activeSortable,i=n.putSortable,s=n.dragEl,o=i||this.sortable,a=this.options;zu&&ho(zu,a.swapClass,!1),zu&&(a.swap||i&&i.options.swap)&&s!==zu&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),pZ(s,zu),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){zu=null}},Xu(t,{pluginName:"swap",eventProperties:function(){return{swapItem:zu}}})}function pZ(t,e){var n=t.parentNode,r=e.parentNode,i,s;!n||!r||n.isEqualNode(e)||r.isEqualNode(t)||(i=Co(t),s=Co(e),n.isEqualNode(r)&&i<s&&s++,n.insertBefore(e,n.children[i]),r.insertBefore(t,r.children[s]))}var Zr=[],bu=[],ag,fc,lg=!1,ql=!1,Qf=!1,ks,ug,T0;function gZ(){function t(e){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));e.options.supportPointer?Ai(document,"pointerup",this._deselectMultiDrag):(Ai(document,"mouseup",this._deselectMultiDrag),Ai(document,"touchend",this._deselectMultiDrag)),Ai(document,"keydown",this._checkKeyDown),Ai(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";Zr.length&&fc===e?Zr.forEach(function(a,l){o+=(l?", ":"")+a.textContent}):o=s.textContent,i.setData("Text",o)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var r=n.dragEl;ks=r},delayEnded:function(){this.isMultiDrag=~Zr.indexOf(ks)},setupClone:function(n){var r=n.sortable,i=n.cancel;if(this.isMultiDrag){for(var s=0;s<Zr.length;s++)bu.push(G_(Zr[s])),bu[s].sortableIndex=Zr[s].sortableIndex,bu[s].draggable=!1,bu[s].style["will-change"]="",ho(bu[s],this.options.selectedClass,!1),Zr[s]===ks&&ho(bu[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(n){var r=n.sortable,i=n.rootEl,s=n.dispatchSortableEvent,o=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Zr.length&&fc===r&&(K5(!0,i),s("clone"),o()))},showClone:function(n){var r=n.cloneNowShown,i=n.rootEl,s=n.cancel;this.isMultiDrag&&(K5(!1,i),bu.forEach(function(o){hr(o,"display","")}),r(),T0=!1,s())},hideClone:function(n){var r=this;n.sortable;var i=n.cloneNowHidden,s=n.cancel;this.isMultiDrag&&(bu.forEach(function(o){hr(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),T0=!0,s())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&fc&&fc.multiDrag._deselectMultiDrag(),Zr.forEach(function(r){r.sortableIndex=Co(r)}),Zr=Zr.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),Qf=!0},dragStarted:function(n){var r=this,i=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Zr.forEach(function(o){o!==ks&&hr(o,"position","absolute")});var s=Ks(ks,!1,!0,!0);Zr.forEach(function(o){o!==ks&&H5(o,s)}),ql=!0,lg=!0}i.animateAll(function(){ql=!1,lg=!1,r.options.animation&&Zr.forEach(function(o){h2(o)}),r.options.sort&&D0()})}},dragOver:function(n){var r=n.target,i=n.completed,s=n.cancel;ql&&~Zr.indexOf(r)&&(i(!1),s())},revert:function(n){var r=n.fromSortable,i=n.rootEl,s=n.sortable,o=n.dragRect;Zr.length>1&&(Zr.forEach(function(a){s.addAnimationState({target:a,rect:ql?Ks(a):o}),h2(a),a.fromRect=o,r.removeAnimationState(a)}),ql=!1,mZ(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(n){var r=n.sortable,i=n.isOwner,s=n.insertion,o=n.activeSortable,a=n.parentEl,l=n.putSortable,c=this.options;if(s){if(i&&o._hideClone(),lg=!1,c.animation&&Zr.length>1&&(ql||!i&&!o.options.sort&&!l)){var d=Ks(ks,!1,!0,!0);Zr.forEach(function(v){v!==ks&&(H5(v,d),a.appendChild(v))}),ql=!0}if(!i)if(ql||D0(),Zr.length>1){var p=T0;o._showClone(r),o.options.animation&&!T0&&p&&bu.forEach(function(v){o.addAnimationState({target:v,rect:ug}),v.fromRect=ug,v.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(n){var r=n.dragRect,i=n.isOwner,s=n.activeSortable;if(Zr.forEach(function(a){a.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){ug=Xu({},r);var o=gf(ks,!0);ug.top-=o.f,ug.left-=o.e}},dragOverAnimationComplete:function(){ql&&(ql=!1,D0())},drop:function(n){var r=n.originalEvent,i=n.rootEl,s=n.parentEl,o=n.sortable,a=n.dispatchSortableEvent,l=n.oldIndex,c=n.putSortable,d=c||this.sortable;if(r){var p=this.options,v=s.children;if(!Qf)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),ho(ks,p.selectedClass,!~Zr.indexOf(ks)),~Zr.indexOf(ks))Zr.splice(Zr.indexOf(ks),1),ag=null,Sg({sortable:o,rootEl:i,name:"deselect",targetEl:ks});else{if(Zr.push(ks),Sg({sortable:o,rootEl:i,name:"select",targetEl:ks}),r.shiftKey&&ag&&o.el.contains(ag)){var m=Co(ag),x=Co(ks);if(~m&&~x&&m!==x){var E,k;for(x>m?(k=m,E=x):(k=x,E=m+1);k<E;k++)~Zr.indexOf(v[k])||(ho(v[k],p.selectedClass,!0),Zr.push(v[k]),Sg({sortable:o,rootEl:i,name:"select",targetEl:v[k]}))}}else ag=ks;fc=d}if(Qf&&this.isMultiDrag){if(ql=!1,(s[dl].options.sort||s!==i)&&Zr.length>1){var A=Ks(ks),D=Co(ks,":not(."+this.options.selectedClass+")");if(!lg&&p.animation&&(ks.thisAnimationDuration=null),d.captureAnimationState(),!lg&&(p.animation&&(ks.fromRect=A,Zr.forEach(function(Y){if(Y.thisAnimationDuration=null,Y!==ks){var te=ql?Ks(Y):A;Y.fromRect=te,d.addAnimationState({target:Y,rect:te})}})),D0(),Zr.forEach(function(Y){v[D]?s.insertBefore(Y,v[D]):s.appendChild(Y),D++}),l===Co(ks))){var V=!1;Zr.forEach(function(Y){if(Y.sortableIndex!==Co(Y)){V=!0;return}}),V&&a("update")}Zr.forEach(function(Y){h2(Y)}),d.animateAll()}fc=d}(i===s||c&&c.lastPutMode!=="clone")&&bu.forEach(function(Y){Y.parentNode&&Y.parentNode.removeChild(Y)})}},nullingGlobal:function(){this.isMultiDrag=Qf=!1,bu.length=0},destroyGlobal:function(){this._deselectMultiDrag(),wi(document,"pointerup",this._deselectMultiDrag),wi(document,"mouseup",this._deselectMultiDrag),wi(document,"touchend",this._deselectMultiDrag),wi(document,"keydown",this._checkKeyDown),wi(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Qf<"u"&&Qf)&&fc===this.sortable&&!(n&&mc(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;Zr.length;){var r=Zr[0];ho(r,this.options.selectedClass,!1),Zr.shift(),Sg({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Xu(t,{pluginName:"multiDrag",utils:{select:function(n){var r=n.parentNode[dl];!r||!r.options.multiDrag||~Zr.indexOf(n)||(fc&&fc!==r&&(fc.multiDrag._deselectMultiDrag(),fc=r),ho(n,r.options.selectedClass,!0),Zr.push(n))},deselect:function(n){var r=n.parentNode[dl],i=Zr.indexOf(n);!r||!r.options.multiDrag||!~i||(ho(n,r.options.selectedClass,!1),Zr.splice(i,1))}},eventProperties:function(){var n=this,r=[],i=[];return Zr.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;ql&&s!==ks?o=-1:ql?o=Co(s,":not(."+n.options.selectedClass+")"):o=Co(s),i.push({multiDragElement:s,index:o})}),{items:jK(Zr),clones:[].concat(bu),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function mZ(t,e){Zr.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function K5(t,e){bu.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function D0(){Zr.forEach(function(t){t!==ks&&t.parentNode&&t.parentNode.removeChild(t)})}Ir.mount(new dZ);Ir.mount(Y_,q_);const vZ=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:gZ,Sortable:Ir,Swap:fZ,default:Ir},Symbol.toStringTag,{value:"Module"})),yZ=_E(vZ);(function(t,e){(function(r,i){t.exports=i(IK,yZ)})(typeof self<"u"?self:Ca,function(n,r){return function(i){var s={};function o(a){if(s[a])return s[a].exports;var l=s[a]={i:a,l:!1,exports:{}};return i[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=i,o.c=s,o.d=function(a,l,c){o.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:c})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,l){if(l&1&&(a=o(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var d in a)o.d(c,d,(function(p){return a[p]}).bind(null,d));return c},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var a=o("b622"),l=a("toStringTag"),c={};c[l]="z",i.exports=String(c)==="[object z]"},"0366":function(i,s,o){var a=o("1c0b");i.exports=function(l,c,d){if(a(l),c===void 0)return l;switch(d){case 0:return function(){return l.call(c)};case 1:return function(p){return l.call(c,p)};case 2:return function(p,v){return l.call(c,p,v)};case 3:return function(p,v,m){return l.call(c,p,v,m)}}return function(){return l.apply(c,arguments)}}},"057f":function(i,s,o){var a=o("fc6a"),l=o("241c").f,c={}.toString,d=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],p=function(v){try{return l(v)}catch{return d.slice()}};i.exports.f=function(m){return d&&c.call(m)=="[object Window]"?p(m):l(a(m))}},"06cf":function(i,s,o){var a=o("83ab"),l=o("d1e7"),c=o("5c6c"),d=o("fc6a"),p=o("c04e"),v=o("5135"),m=o("0cfb"),x=Object.getOwnPropertyDescriptor;s.f=a?x:function(k,A){if(k=d(k),A=p(A,!0),m)try{return x(k,A)}catch{}if(v(k,A))return c(!l.f.call(k,A),k[A])}},"0cfb":function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("cc12");i.exports=!a&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var a=o("23e7"),l=o("d58f").left,c=o("a640"),d=o("ae40"),p=c("reduce"),v=d("reduce",{1:0});a({target:"Array",proto:!0,forced:!p||!v},{reduce:function(x){return l(this,x,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var a=o("c6b6"),l=o("9263");i.exports=function(c,d){var p=c.exec;if(typeof p=="function"){var v=p.call(c,d);if(typeof v!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return v}if(a(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,d)}},"159b":function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("17c2"),d=o("9112");for(var p in l){var v=a[p],m=v&&v.prototype;if(m&&m.forEach!==c)try{d(m,"forEach",c)}catch{m.forEach=c}}},"17c2":function(i,s,o){var a=o("b727").forEach,l=o("a640"),c=o("ae40"),d=l("forEach"),p=c("forEach");i.exports=!d||!p?function(m){return a(this,m,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var a=o("d066");i.exports=a("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var a=o("b622"),l=a("iterator"),c=!1;try{var d=0,p={next:function(){return{done:!!d++}},return:function(){c=!0}};p[l]=function(){return this},Array.from(p,function(){throw 2})}catch{}i.exports=function(v,m){if(!m&&!c)return!1;var x=!1;try{var E={};E[l]=function(){return{next:function(){return{done:x=!0}}}},v(E)}catch{}return x}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var a=o("d039"),l=o("b622"),c=o("2d00"),d=l("species");i.exports=function(p){return c>=51||!a(function(){var v=[],m=v.constructor={};return m[d]=function(){return{foo:1}},v[p](Boolean).foo!==1})}},"23cb":function(i,s,o){var a=o("a691"),l=Math.max,c=Math.min;i.exports=function(d,p){var v=a(d);return v<0?l(v+p,0):c(v,p)}},"23e7":function(i,s,o){var a=o("da84"),l=o("06cf").f,c=o("9112"),d=o("6eeb"),p=o("ce4e"),v=o("e893"),m=o("94ca");i.exports=function(x,E){var k=x.target,A=x.global,D=x.stat,V,Y,te,ge,fe,I;if(A?Y=a:D?Y=a[k]||p(k,{}):Y=(a[k]||{}).prototype,Y)for(te in E){if(fe=E[te],x.noTargetGet?(I=l(Y,te),ge=I&&I.value):ge=Y[te],V=m(A?te:k+(D?".":"#")+te,x.forced),!V&&ge!==void 0){if(typeof fe==typeof ge)continue;v(fe,ge)}(x.sham||ge&&ge.sham)&&c(fe,"sham",!0),d(Y,te,fe,x)}}},"241c":function(i,s,o){var a=o("ca84"),l=o("7839"),c=l.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(p){return a(p,c)}},"25f0":function(i,s,o){var a=o("6eeb"),l=o("825a"),c=o("d039"),d=o("ad6d"),p="toString",v=RegExp.prototype,m=v[p],x=c(function(){return m.call({source:"a",flags:"b"})!="/a/b"}),E=m.name!=p;(x||E)&&a(RegExp.prototype,p,function(){var A=l(this),D=String(A.source),V=A.flags,Y=String(V===void 0&&A instanceof RegExp&&!("flags"in v)?d.call(A):V);return"/"+D+"/"+Y},{unsafe:!0})},"2ca0":function(i,s,o){var a=o("23e7"),l=o("06cf").f,c=o("50c4"),d=o("5a34"),p=o("1d80"),v=o("ab13"),m=o("c430"),x="".startsWith,E=Math.min,k=v("startsWith"),A=!m&&!k&&!!function(){var D=l(String.prototype,"startsWith");return D&&!D.writable}();a({target:"String",proto:!0,forced:!A&&!k},{startsWith:function(V){var Y=String(p(this));d(V);var te=c(E(arguments.length>1?arguments[1]:void 0,Y.length)),ge=String(V);return x?x.call(Y,ge,te):Y.slice(te,te+ge.length)===ge}})},"2d00":function(i,s,o){var a=o("da84"),l=o("342f"),c=a.process,d=c&&c.versions,p=d&&d.v8,v,m;p?(v=p.split("."),m=v[0]+v[1]):l&&(v=l.match(/Edge\/(\d+)/),(!v||v[1]>=74)&&(v=l.match(/Chrome\/(\d+)/),v&&(m=v[1]))),i.exports=m&&+m},"342f":function(i,s,o){var a=o("d066");i.exports=a("navigator","userAgent")||""},"35a1":function(i,s,o){var a=o("f5df"),l=o("3f8c"),c=o("b622"),d=c("iterator");i.exports=function(p){if(p!=null)return p[d]||p["@@iterator"]||l[a(p)]}},"37e8":function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("825a"),d=o("df75");i.exports=a?Object.defineProperties:function(v,m){c(v);for(var x=d(m),E=x.length,k=0,A;E>k;)l.f(v,A=x[k++],m[A]);return v}},"3bbe":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(i,s,o){var a=o("6547").charAt,l=o("69f3"),c=o("7dd0"),d="String Iterator",p=l.set,v=l.getterFor(d);c(String,"String",function(m){p(this,{type:d,string:String(m),index:0})},function(){var x=v(this),E=x.string,k=x.index,A;return k>=E.length?{value:void 0,done:!0}:(A=a(E,k),x.index+=A.length,{value:A,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var a=o("23e7"),l=o("17c2");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(i,s,o){var a=o("da84");i.exports=a},"44ad":function(i,s,o){var a=o("d039"),l=o("c6b6"),c="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(d){return l(d)=="String"?c.call(d,""):Object(d)}:Object},"44d2":function(i,s,o){var a=o("b622"),l=o("7c73"),c=o("9bf2"),d=a("unscopables"),p=Array.prototype;p[d]==null&&c.f(p,d,{configurable:!0,value:l(null)}),i.exports=function(v){p[d][v]=!0}},"44e7":function(i,s,o){var a=o("861d"),l=o("c6b6"),c=o("b622"),d=c("match");i.exports=function(p){var v;return a(p)&&((v=p[d])!==void 0?!!v:l(p)=="RegExp")}},4930:function(i,s,o){var a=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},"4d64":function(i,s,o){var a=o("fc6a"),l=o("50c4"),c=o("23cb"),d=function(p){return function(v,m,x){var E=a(v),k=l(E.length),A=c(x,k),D;if(p&&m!=m){for(;k>A;)if(D=E[A++],D!=D)return!0}else for(;k>A;A++)if((p||A in E)&&E[A]===m)return p||A||0;return!p&&-1}};i.exports={includes:d(!0),indexOf:d(!1)}},"4de4":function(i,s,o){var a=o("23e7"),l=o("b727").filter,c=o("1dde"),d=o("ae40"),p=c("filter"),v=d("filter");a({target:"Array",proto:!0,forced:!p||!v},{filter:function(x){return l(this,x,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var a=o("0366"),l=o("7b0b"),c=o("9bdd"),d=o("e95a"),p=o("50c4"),v=o("8418"),m=o("35a1");i.exports=function(E){var k=l(E),A=typeof this=="function"?this:Array,D=arguments.length,V=D>1?arguments[1]:void 0,Y=V!==void 0,te=m(k),ge=0,fe,I,F,K,B,N;if(Y&&(V=a(V,D>2?arguments[2]:void 0,2)),te!=null&&!(A==Array&&d(te)))for(K=te.call(k),B=K.next,I=new A;!(F=B.call(K)).done;ge++)N=Y?c(K,V,[F.value,ge],!0):F.value,v(I,ge,N);else for(fe=p(k.length),I=new A(fe);fe>ge;ge++)N=Y?V(k[ge],ge):k[ge],v(I,ge,N);return I.length=ge,I}},"4fad":function(i,s,o){var a=o("23e7"),l=o("6f53").entries;a({target:"Object",stat:!0},{entries:function(d){return l(d)}})},"50c4":function(i,s,o){var a=o("a691"),l=Math.min;i.exports=function(c){return c>0?l(a(c),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(a,l){return o.call(a,l)}},5319:function(i,s,o){var a=o("d784"),l=o("825a"),c=o("7b0b"),d=o("50c4"),p=o("a691"),v=o("1d80"),m=o("8aa5"),x=o("14c3"),E=Math.max,k=Math.min,A=Math.floor,D=/\$([$&'`]|\d\d?|<[^>]*>)/g,V=/\$([$&'`]|\d\d?)/g,Y=function(te){return te===void 0?te:String(te)};a("replace",2,function(te,ge,fe,I){var F=I.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,K=I.REPLACE_KEEPS_$0,B=F?"$":"$0";return[function(z,U){var $=v(this),re=z==null?void 0:z[te];return re!==void 0?re.call(z,$,U):ge.call(String($),z,U)},function(j,z){if(!F&&K||typeof z=="string"&&z.indexOf(B)===-1){var U=fe(ge,j,this,z);if(U.done)return U.value}var $=l(j),re=String(this),Q=typeof z=="function";Q||(z=String(z));var _e=$.global;if(_e){var we=$.unicode;$.lastIndex=0}for(var nt=[];;){var ae=x($,re);if(ae===null||(nt.push(ae),!_e))break;var H=String(ae[0]);H===""&&($.lastIndex=m(re,d($.lastIndex),we))}for(var Z="",me=0,pe=0;pe<nt.length;pe++){ae=nt[pe];for(var de=String(ae[0]),X=E(k(p(ae.index),re.length),0),J=[],De=1;De<ae.length;De++)J.push(Y(ae[De]));var Te=ae.groups;if(Q){var Je=[de].concat(J,X,re);Te!==void 0&&Je.push(Te);var he=String(z.apply(void 0,Je))}else he=N(de,re,X,J,Te,z);X>=me&&(Z+=re.slice(me,X)+he,me=X+de.length)}return Z+re.slice(me)}];function N(j,z,U,$,re,Q){var _e=U+j.length,we=$.length,nt=V;return re!==void 0&&(re=c(re),nt=D),ge.call(Q,nt,function(ae,H){var Z;switch(H.charAt(0)){case"$":return"$";case"&":return j;case"`":return z.slice(0,U);case"'":return z.slice(_e);case"<":Z=re[H.slice(1,-1)];break;default:var me=+H;if(me===0)return ae;if(me>we){var pe=A(me/10);return pe===0?ae:pe<=we?$[pe-1]===void 0?H.charAt(1):$[pe-1]+H.charAt(1):ae}Z=$[me-1]}return Z===void 0?"":Z})}})},5692:function(i,s,o){var a=o("c430"),l=o("c6cd");(i.exports=function(c,d){return l[c]||(l[c]=d!==void 0?d:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var a=o("d066"),l=o("241c"),c=o("7418"),d=o("825a");i.exports=a("Reflect","ownKeys")||function(v){var m=l.f(d(v)),x=c.f;return x?m.concat(x(v)):m}},"5a34":function(i,s,o){var a=o("44e7");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(i,s){i.exports=function(o,a){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:a}}},"5db7":function(i,s,o){var a=o("23e7"),l=o("a2bf"),c=o("7b0b"),d=o("50c4"),p=o("1c0b"),v=o("65f0");a({target:"Array",proto:!0},{flatMap:function(x){var E=c(this),k=d(E.length),A;return p(x),A=v(E,0),A.length=l(A,E,E,k,0,1,x,arguments.length>1?arguments[1]:void 0),A}})},6547:function(i,s,o){var a=o("a691"),l=o("1d80"),c=function(d){return function(p,v){var m=String(l(p)),x=a(v),E=m.length,k,A;return x<0||x>=E?d?"":void 0:(k=m.charCodeAt(x),k<55296||k>56319||x+1===E||(A=m.charCodeAt(x+1))<56320||A>57343?d?m.charAt(x):k:d?m.slice(x,x+2):(k-55296<<10)+(A-56320)+65536)}};i.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(i,s,o){var a=o("861d"),l=o("e8b5"),c=o("b622"),d=c("species");i.exports=function(p,v){var m;return l(p)&&(m=p.constructor,typeof m=="function"&&(m===Array||l(m.prototype))?m=void 0:a(m)&&(m=m[d],m===null&&(m=void 0))),new(m===void 0?Array:m)(v===0?0:v)}},"69f3":function(i,s,o){var a=o("7f9a"),l=o("da84"),c=o("861d"),d=o("9112"),p=o("5135"),v=o("f772"),m=o("d012"),x=l.WeakMap,E,k,A,D=function(F){return A(F)?k(F):E(F,{})},V=function(F){return function(K){var B;if(!c(K)||(B=k(K)).type!==F)throw TypeError("Incompatible receiver, "+F+" required");return B}};if(a){var Y=new x,te=Y.get,ge=Y.has,fe=Y.set;E=function(F,K){return fe.call(Y,F,K),K},k=function(F){return te.call(Y,F)||{}},A=function(F){return ge.call(Y,F)}}else{var I=v("state");m[I]=!0,E=function(F,K){return d(F,I,K),K},k=function(F){return p(F,I)?F[I]:{}},A=function(F){return p(F,I)}}i.exports={set:E,get:k,has:A,enforce:D,getterFor:V}},"6eeb":function(i,s,o){var a=o("da84"),l=o("9112"),c=o("5135"),d=o("ce4e"),p=o("8925"),v=o("69f3"),m=v.get,x=v.enforce,E=String(String).split("String");(i.exports=function(k,A,D,V){var Y=V?!!V.unsafe:!1,te=V?!!V.enumerable:!1,ge=V?!!V.noTargetGet:!1;if(typeof D=="function"&&(typeof A=="string"&&!c(D,"name")&&l(D,"name",A),x(D).source=E.join(typeof A=="string"?A:"")),k===a){te?k[A]=D:d(A,D);return}else Y?!ge&&k[A]&&(te=!0):delete k[A];te?k[A]=D:l(k,A,D)})(Function.prototype,"toString",function(){return typeof this=="function"&&m(this).source||p(this)})},"6f53":function(i,s,o){var a=o("83ab"),l=o("df75"),c=o("fc6a"),d=o("d1e7").f,p=function(v){return function(m){for(var x=c(m),E=l(x),k=E.length,A=0,D=[],V;k>A;)V=E[A++],(!a||d.call(x,V))&&D.push(v?[V,x[V]]:x[V]);return D}};i.exports={entries:p(!0),values:p(!1)}},"73d9":function(i,s,o){var a=o("44d2");a("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var a=o("428f"),l=o("5135"),c=o("e538"),d=o("9bf2").f;i.exports=function(p){var v=a.Symbol||(a.Symbol={});l(v,p)||d(v,p,{value:c.f(p)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var a=o("1d80");i.exports=function(l){return Object(a(l))}},"7c73":function(i,s,o){var a=o("825a"),l=o("37e8"),c=o("7839"),d=o("d012"),p=o("1be4"),v=o("cc12"),m=o("f772"),x=">",E="<",k="prototype",A="script",D=m("IE_PROTO"),V=function(){},Y=function(F){return E+A+x+F+E+"/"+A+x},te=function(F){F.write(Y("")),F.close();var K=F.parentWindow.Object;return F=null,K},ge=function(){var F=v("iframe"),K="java"+A+":",B;return F.style.display="none",p.appendChild(F),F.src=String(K),B=F.contentWindow.document,B.open(),B.write(Y("document.F=Object")),B.close(),B.F},fe,I=function(){try{fe=document.domain&&new ActiveXObject("htmlfile")}catch{}I=fe?te(fe):ge();for(var F=c.length;F--;)delete I[k][c[F]];return I()};d[D]=!0,i.exports=Object.create||function(K,B){var N;return K!==null?(V[k]=a(K),N=new V,V[k]=null,N[D]=K):N=I(),B===void 0?N:l(N,B)}},"7dd0":function(i,s,o){var a=o("23e7"),l=o("9ed3"),c=o("e163"),d=o("d2bb"),p=o("d44e"),v=o("9112"),m=o("6eeb"),x=o("b622"),E=o("c430"),k=o("3f8c"),A=o("ae93"),D=A.IteratorPrototype,V=A.BUGGY_SAFARI_ITERATORS,Y=x("iterator"),te="keys",ge="values",fe="entries",I=function(){return this};i.exports=function(F,K,B,N,j,z,U){l(B,K,N);var $=function(pe){if(pe===j&&nt)return nt;if(!V&&pe in _e)return _e[pe];switch(pe){case te:return function(){return new B(this,pe)};case ge:return function(){return new B(this,pe)};case fe:return function(){return new B(this,pe)}}return function(){return new B(this)}},re=K+" Iterator",Q=!1,_e=F.prototype,we=_e[Y]||_e["@@iterator"]||j&&_e[j],nt=!V&&we||$(j),ae=K=="Array"&&_e.entries||we,H,Z,me;if(ae&&(H=c(ae.call(new F)),D!==Object.prototype&&H.next&&(!E&&c(H)!==D&&(d?d(H,D):typeof H[Y]!="function"&&v(H,Y,I)),p(H,re,!0,!0),E&&(k[re]=I))),j==ge&&we&&we.name!==ge&&(Q=!0,nt=function(){return we.call(this)}),(!E||U)&&_e[Y]!==nt&&v(_e,Y,nt),k[K]=nt,j)if(Z={values:$(ge),keys:z?nt:$(te),entries:$(fe)},U)for(me in Z)(V||Q||!(me in _e))&&m(_e,me,Z[me]);else a({target:K,proto:!0,forced:V||Q},Z);return Z}},"7f9a":function(i,s,o){var a=o("da84"),l=o("8925"),c=a.WeakMap;i.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(i,s,o){var a=o("d039");i.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var a=o("c04e"),l=o("9bf2"),c=o("5c6c");i.exports=function(d,p,v){var m=a(p);m in d?l.f(d,m,c(0,v)):d[m]=v}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var a,l,c;(function(d,p){l=[],a=p,c=typeof a=="function"?a.apply(s,l):a,c!==void 0&&(i.exports=c)})(typeof self<"u"?self:this,function(){function d(){var p=Object.getOwnPropertyDescriptor(document,"currentScript");if(!p&&"currentScript"in document&&document.currentScript||p&&p.get!==d&&document.currentScript)return document.currentScript;try{throw new Error}catch(fe){var v=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,m=/@([^@]*):(\d+):(\d+)\s*$/ig,x=v.exec(fe.stack)||m.exec(fe.stack),E=x&&x[1]||!1,k=x&&x[2]||!1,A=document.location.href.replace(document.location.hash,""),D,V,Y,te=document.getElementsByTagName("script");E===A&&(D=document.documentElement.outerHTML,V=new RegExp("(?:[^\\n]+?\\n){0,"+(k-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),Y=D.replace(V,"$1").trim());for(var ge=0;ge<te.length;ge++)if(te[ge].readyState==="interactive"||te[ge].src===E||E===A&&te[ge].innerHTML&&te[ge].innerHTML.trim()===Y)return te[ge];return null}}return d})},8925:function(i,s,o){var a=o("c6cd"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(c){return l.call(c)}),i.exports=a.inspectSource},"8aa5":function(i,s,o){var a=o("6547").charAt;i.exports=function(l,c,d){return c+(d?a(l,c).length:1)}},"8bbf":function(i,s){i.exports=n},"90e3":function(i,s){var o=0,a=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+a).toString(36)}},9112:function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("5c6c");i.exports=a?function(d,p,v){return l.f(d,p,c(1,v))}:function(d,p,v){return d[p]=v,d}},9263:function(i,s,o){var a=o("ad6d"),l=o("9f7f"),c=RegExp.prototype.exec,d=String.prototype.replace,p=c,v=function(){var k=/a/,A=/b*/g;return c.call(k,"a"),c.call(A,"a"),k.lastIndex!==0||A.lastIndex!==0}(),m=l.UNSUPPORTED_Y||l.BROKEN_CARET,x=/()??/.exec("")[1]!==void 0,E=v||x||m;E&&(p=function(A){var D=this,V,Y,te,ge,fe=m&&D.sticky,I=a.call(D),F=D.source,K=0,B=A;return fe&&(I=I.replace("y",""),I.indexOf("g")===-1&&(I+="g"),B=String(A).slice(D.lastIndex),D.lastIndex>0&&(!D.multiline||D.multiline&&A[D.lastIndex-1]!==`
`)&&(F="(?: "+F+")",B=" "+B,K++),Y=new RegExp("^(?:"+F+")",I)),x&&(Y=new RegExp("^"+F+"$(?!\\s)",I)),v&&(V=D.lastIndex),te=c.call(fe?Y:D,B),fe?te?(te.input=te.input.slice(K),te[0]=te[0].slice(K),te.index=D.lastIndex,D.lastIndex+=te[0].length):D.lastIndex=0:v&&te&&(D.lastIndex=D.global?te.index+te[0].length:V),x&&te&&te.length>1&&d.call(te[0],Y,function(){for(ge=1;ge<arguments.length-2;ge++)arguments[ge]===void 0&&(te[ge]=void 0)}),te}),i.exports=p},"94ca":function(i,s,o){var a=o("d039"),l=/#|\.prototype\./,c=function(x,E){var k=p[d(x)];return k==m?!0:k==v?!1:typeof E=="function"?a(E):!!E},d=c.normalize=function(x){return String(x).replace(l,".").toLowerCase()},p=c.data={},v=c.NATIVE="N",m=c.POLYFILL="P";i.exports=c},"99af":function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("e8b5"),d=o("861d"),p=o("7b0b"),v=o("50c4"),m=o("8418"),x=o("65f0"),E=o("1dde"),k=o("b622"),A=o("2d00"),D=k("isConcatSpreadable"),V=9007199254740991,Y="Maximum allowed index exceeded",te=A>=51||!l(function(){var F=[];return F[D]=!1,F.concat()[0]!==F}),ge=E("concat"),fe=function(F){if(!d(F))return!1;var K=F[D];return K!==void 0?!!K:c(F)},I=!te||!ge;a({target:"Array",proto:!0,forced:I},{concat:function(K){var B=p(this),N=x(B,0),j=0,z,U,$,re,Q;for(z=-1,$=arguments.length;z<$;z++)if(Q=z===-1?B:arguments[z],fe(Q)){if(re=v(Q.length),j+re>V)throw TypeError(Y);for(U=0;U<re;U++,j++)U in Q&&m(N,j,Q[U])}else{if(j>=V)throw TypeError(Y);m(N,j++,Q)}return N.length=j,N}})},"9bdd":function(i,s,o){var a=o("825a");i.exports=function(l,c,d,p){try{return p?c(a(d)[0],d[1]):c(d)}catch(m){var v=l.return;throw v!==void 0&&a(v.call(l)),m}}},"9bf2":function(i,s,o){var a=o("83ab"),l=o("0cfb"),c=o("825a"),d=o("c04e"),p=Object.defineProperty;s.f=a?p:function(m,x,E){if(c(m),x=d(x,!0),c(E),l)try{return p(m,x,E)}catch{}if("get"in E||"set"in E)throw TypeError("Accessors not supported");return"value"in E&&(m[x]=E.value),m}},"9ed3":function(i,s,o){var a=o("ae93").IteratorPrototype,l=o("7c73"),c=o("5c6c"),d=o("d44e"),p=o("3f8c"),v=function(){return this};i.exports=function(m,x,E){var k=x+" Iterator";return m.prototype=l(a,{next:c(1,E)}),d(m,k,!1,!0),p[k]=v,m}},"9f7f":function(i,s,o){var a=o("d039");function l(c,d){return RegExp(c,d)}s.UNSUPPORTED_Y=a(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),s.BROKEN_CARET=a(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(i,s,o){var a=o("e8b5"),l=o("50c4"),c=o("0366"),d=function(p,v,m,x,E,k,A,D){for(var V=E,Y=0,te=A?c(A,D,3):!1,ge;Y<x;){if(Y in m){if(ge=te?te(m[Y],Y,v):m[Y],k>0&&a(ge))V=d(p,v,ge,l(ge.length),V,k-1)-1;else{if(V>=9007199254740991)throw TypeError("Exceed the acceptable array length");p[V]=ge}V++}Y++}return V};i.exports=d},a352:function(i,s){i.exports=r},a434:function(i,s,o){var a=o("23e7"),l=o("23cb"),c=o("a691"),d=o("50c4"),p=o("7b0b"),v=o("65f0"),m=o("8418"),x=o("1dde"),E=o("ae40"),k=x("splice"),A=E("splice",{ACCESSORS:!0,0:0,1:2}),D=Math.max,V=Math.min,Y=9007199254740991,te="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!k||!A},{splice:function(fe,I){var F=p(this),K=d(F.length),B=l(fe,K),N=arguments.length,j,z,U,$,re,Q;if(N===0?j=z=0:N===1?(j=0,z=K-B):(j=N-2,z=V(D(c(I),0),K-B)),K+j-z>Y)throw TypeError(te);for(U=v(F,z),$=0;$<z;$++)re=B+$,re in F&&m(U,$,F[re]);if(U.length=z,j<z){for($=B;$<K-z;$++)re=$+z,Q=$+j,re in F?F[Q]=F[re]:delete F[Q];for($=K;$>K-z+j;$--)delete F[$-1]}else if(j>z)for($=K-z;$>B;$--)re=$+z-1,Q=$+j-1,re in F?F[Q]=F[re]:delete F[Q];for($=0;$<j;$++)F[$+B]=arguments[$+2];return F.length=K-z+j,U}})},a4d3:function(i,s,o){var a=o("23e7"),l=o("da84"),c=o("d066"),d=o("c430"),p=o("83ab"),v=o("4930"),m=o("fdbf"),x=o("d039"),E=o("5135"),k=o("e8b5"),A=o("861d"),D=o("825a"),V=o("7b0b"),Y=o("fc6a"),te=o("c04e"),ge=o("5c6c"),fe=o("7c73"),I=o("df75"),F=o("241c"),K=o("057f"),B=o("7418"),N=o("06cf"),j=o("9bf2"),z=o("d1e7"),U=o("9112"),$=o("6eeb"),re=o("5692"),Q=o("f772"),_e=o("d012"),we=o("90e3"),nt=o("b622"),ae=o("e538"),H=o("746f"),Z=o("d44e"),me=o("69f3"),pe=o("b727").forEach,de=Q("hidden"),X="Symbol",J="prototype",De=nt("toPrimitive"),Te=me.set,Je=me.getterFor(X),he=Object[J],ee=l.Symbol,se=c("JSON","stringify"),le=N.f,ze=j.f,Se=K.f,ve=z.f,$e=re("symbols"),Ge=re("op-symbols"),Xe=re("string-to-symbol-registry"),lt=re("symbol-to-string-registry"),qe=re("wks"),Lt=l.QObject,Gt=!Lt||!Lt[J]||!Lt[J].findChild,rn=p&&x(function(){return fe(ze({},"a",{get:function(){return ze(this,"a",{value:7}).a}})).a!=7})?function(Xt,Cn,Dn){var rr=le(he,Cn);rr&&delete he[Cn],ze(Xt,Cn,Dn),rr&&Xt!==he&&ze(he,Cn,rr)}:ze,yn=function(Xt,Cn){var Dn=$e[Xt]=fe(ee[J]);return Te(Dn,{type:X,tag:Xt,description:Cn}),p||(Dn.description=Cn),Dn},Ye=m?function(Xt){return typeof Xt=="symbol"}:function(Xt){return Object(Xt)instanceof ee},at=function(Cn,Dn,rr){Cn===he&&at(Ge,Dn,rr),D(Cn);var Zn=te(Dn,!0);return D(rr),E($e,Zn)?(rr.enumerable?(E(Cn,de)&&Cn[de][Zn]&&(Cn[de][Zn]=!1),rr=fe(rr,{enumerable:ge(0,!1)})):(E(Cn,de)||ze(Cn,de,ge(1,{})),Cn[de][Zn]=!0),rn(Cn,Zn,rr)):ze(Cn,Zn,rr)},it=function(Cn,Dn){D(Cn);var rr=Y(Dn),Zn=I(rr).concat(Nn(rr));return pe(Zn,function(_r){(!p||Yt.call(rr,_r))&&at(Cn,_r,rr[_r])}),Cn},Vt=function(Cn,Dn){return Dn===void 0?fe(Cn):it(fe(Cn),Dn)},Yt=function(Cn){var Dn=te(Cn,!0),rr=ve.call(this,Dn);return this===he&&E($e,Dn)&&!E(Ge,Dn)?!1:rr||!E(this,Dn)||!E($e,Dn)||E(this,de)&&this[de][Dn]?rr:!0},In=function(Cn,Dn){var rr=Y(Cn),Zn=te(Dn,!0);if(!(rr===he&&E($e,Zn)&&!E(Ge,Zn))){var _r=le(rr,Zn);return _r&&E($e,Zn)&&!(E(rr,de)&&rr[de][Zn])&&(_r.enumerable=!0),_r}},Sn=function(Cn){var Dn=Se(Y(Cn)),rr=[];return pe(Dn,function(Zn){!E($e,Zn)&&!E(_e,Zn)&&rr.push(Zn)}),rr},Nn=function(Cn){var Dn=Cn===he,rr=Se(Dn?Ge:Y(Cn)),Zn=[];return pe(rr,function(_r){E($e,_r)&&(!Dn||E(he,_r))&&Zn.push($e[_r])}),Zn};if(v||(ee=function(){if(this instanceof ee)throw TypeError("Symbol is not a constructor");var Cn=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),Dn=we(Cn),rr=function(Zn){this===he&&rr.call(Ge,Zn),E(this,de)&&E(this[de],Dn)&&(this[de][Dn]=!1),rn(this,Dn,ge(1,Zn))};return p&&Gt&&rn(he,Dn,{configurable:!0,set:rr}),yn(Dn,Cn)},$(ee[J],"toString",function(){return Je(this).tag}),$(ee,"withoutSetter",function(Xt){return yn(we(Xt),Xt)}),z.f=Yt,j.f=at,N.f=In,F.f=K.f=Sn,B.f=Nn,ae.f=function(Xt){return yn(nt(Xt),Xt)},p&&(ze(ee[J],"description",{configurable:!0,get:function(){return Je(this).description}}),d||$(he,"propertyIsEnumerable",Yt,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!v,sham:!v},{Symbol:ee}),pe(I(qe),function(Xt){H(Xt)}),a({target:X,stat:!0,forced:!v},{for:function(Xt){var Cn=String(Xt);if(E(Xe,Cn))return Xe[Cn];var Dn=ee(Cn);return Xe[Cn]=Dn,lt[Dn]=Cn,Dn},keyFor:function(Cn){if(!Ye(Cn))throw TypeError(Cn+" is not a symbol");if(E(lt,Cn))return lt[Cn]},useSetter:function(){Gt=!0},useSimple:function(){Gt=!1}}),a({target:"Object",stat:!0,forced:!v,sham:!p},{create:Vt,defineProperty:at,defineProperties:it,getOwnPropertyDescriptor:In}),a({target:"Object",stat:!0,forced:!v},{getOwnPropertyNames:Sn,getOwnPropertySymbols:Nn}),a({target:"Object",stat:!0,forced:x(function(){B.f(1)})},{getOwnPropertySymbols:function(Cn){return B.f(V(Cn))}}),se){var Qn=!v||x(function(){var Xt=ee();return se([Xt])!="[null]"||se({a:Xt})!="{}"||se(Object(Xt))!="{}"});a({target:"JSON",stat:!0,forced:Qn},{stringify:function(Cn,Dn,rr){for(var Zn=[Cn],_r=1,ir;arguments.length>_r;)Zn.push(arguments[_r++]);if(ir=Dn,!(!A(Dn)&&Cn===void 0||Ye(Cn)))return k(Dn)||(Dn=function(qr,Os){if(typeof ir=="function"&&(Os=ir.call(this,qr,Os)),!Ye(Os))return Os}),Zn[1]=Dn,se.apply(null,Zn)}})}ee[J][De]||U(ee[J],De,ee[J].valueOf),Z(ee,X),_e[de]=!0},a630:function(i,s,o){var a=o("23e7"),l=o("4df4"),c=o("1c7e"),d=!c(function(p){Array.from(p)});a({target:"Array",stat:!0,forced:d},{from:l})},a640:function(i,s,o){var a=o("d039");i.exports=function(l,c){var d=[][l];return!!d&&a(function(){d.call(null,c||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,a=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(l>0?a:o)(l)}},ab13:function(i,s,o){var a=o("b622"),l=a("match");i.exports=function(c){var d=/./;try{"/./"[c](d)}catch{try{return d[l]=!1,"/./"[c](d)}catch{}}return!1}},ac1f:function(i,s,o){var a=o("23e7"),l=o("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(i,s,o){var a=o("825a");i.exports=function(){var l=a(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("5135"),d=Object.defineProperty,p={},v=function(m){throw m};i.exports=function(m,x){if(c(p,m))return p[m];x||(x={});var E=[][m],k=c(x,"ACCESSORS")?x.ACCESSORS:!1,A=c(x,0)?x[0]:v,D=c(x,1)?x[1]:void 0;return p[m]=!!E&&!l(function(){if(k&&!a)return!0;var V={length:-1};k?d(V,1,{enumerable:!0,get:v}):V[1]=1,E.call(V,A,D)})}},ae93:function(i,s,o){var a=o("e163"),l=o("9112"),c=o("5135"),d=o("b622"),p=o("c430"),v=d("iterator"),m=!1,x=function(){return this},E,k,A;[].keys&&(A=[].keys(),"next"in A?(k=a(a(A)),k!==Object.prototype&&(E=k)):m=!0),E==null&&(E={}),!p&&!c(E,v)&&l(E,v,x),i.exports={IteratorPrototype:E,BUGGY_SAFARI_ITERATORS:m}},b041:function(i,s,o){var a=o("00ee"),l=o("f5df");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(i,s,o){var a=o("83ab"),l=o("9bf2").f,c=Function.prototype,d=c.toString,p=/^\s*function ([^ (]*)/,v="name";a&&!(v in c)&&l(c,v,{configurable:!0,get:function(){try{return d.call(this).match(p)[1]}catch{return""}}})},b622:function(i,s,o){var a=o("da84"),l=o("5692"),c=o("5135"),d=o("90e3"),p=o("4930"),v=o("fdbf"),m=l("wks"),x=a.Symbol,E=v?x:x&&x.withoutSetter||d;i.exports=function(k){return c(m,k)||(p&&c(x,k)?m[k]=x[k]:m[k]=E("Symbol."+k)),m[k]}},b64b:function(i,s,o){var a=o("23e7"),l=o("7b0b"),c=o("df75"),d=o("d039"),p=d(function(){c(1)});a({target:"Object",stat:!0,forced:p},{keys:function(m){return c(l(m))}})},b727:function(i,s,o){var a=o("0366"),l=o("44ad"),c=o("7b0b"),d=o("50c4"),p=o("65f0"),v=[].push,m=function(x){var E=x==1,k=x==2,A=x==3,D=x==4,V=x==6,Y=x==5||V;return function(te,ge,fe,I){for(var F=c(te),K=l(F),B=a(ge,fe,3),N=d(K.length),j=0,z=I||p,U=E?z(te,N):k?z(te,0):void 0,$,re;N>j;j++)if((Y||j in K)&&($=K[j],re=B($,j,F),x)){if(E)U[j]=re;else if(re)switch(x){case 3:return!0;case 5:return $;case 6:return j;case 2:v.call(U,$)}else if(D)return!1}return V?-1:A||D?D:U}};i.exports={forEach:m(0),map:m(1),filter:m(2),some:m(3),every:m(4),find:m(5),findIndex:m(6)}},c04e:function(i,s,o){var a=o("861d");i.exports=function(l,c){if(!a(l))return l;var d,p;if(c&&typeof(d=l.toString)=="function"&&!a(p=d.call(l))||typeof(d=l.valueOf)=="function"&&!a(p=d.call(l))||!c&&typeof(d=l.toString)=="function"&&!a(p=d.call(l)))return p;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(a){return o.call(a).slice(8,-1)}},c6cd:function(i,s,o){var a=o("da84"),l=o("ce4e"),c="__core-js_shared__",d=a[c]||l(c,{});i.exports=d},c740:function(i,s,o){var a=o("23e7"),l=o("b727").findIndex,c=o("44d2"),d=o("ae40"),p="findIndex",v=!0,m=d(p);p in[]&&Array(1)[p](function(){v=!1}),a({target:"Array",proto:!0,forced:v||!m},{findIndex:function(E){return l(this,E,arguments.length>1?arguments[1]:void 0)}}),c(p)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var a=o("23e7"),l=o("4d64").indexOf,c=o("a640"),d=o("ae40"),p=[].indexOf,v=!!p&&1/[1].indexOf(1,-0)<0,m=c("indexOf"),x=d("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:v||!m||!x},{indexOf:function(k){return v?p.apply(this,arguments)||0:l(this,k,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var a=o("5135"),l=o("fc6a"),c=o("4d64").indexOf,d=o("d012");i.exports=function(p,v){var m=l(p),x=0,E=[],k;for(k in m)!a(d,k)&&a(m,k)&&E.push(k);for(;v.length>x;)a(m,k=v[x++])&&(~c(E,k)||E.push(k));return E}},caad:function(i,s,o){var a=o("23e7"),l=o("4d64").includes,c=o("44d2"),d=o("ae40"),p=d("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!p},{includes:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(i,s,o){var a=o("da84"),l=o("861d"),c=a.document,d=l(c)&&l(c.createElement);i.exports=function(p){return d?c.createElement(p):{}}},ce4e:function(i,s,o){var a=o("da84"),l=o("9112");i.exports=function(c,d){try{l(a,c,d)}catch{a[c]=d}return d}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var a=o("428f"),l=o("da84"),c=function(d){return typeof d=="function"?d:void 0};i.exports=function(d,p){return arguments.length<2?c(a[d])||c(l[d]):a[d]&&a[d][p]||l[d]&&l[d][p]}},d1e7:function(i,s,o){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!a.call({1:2},1);s.f=c?function(p){var v=l(this,p);return!!v&&v.enumerable}:a},d28b:function(i,s,o){var a=o("746f");a("iterator")},d2bb:function(i,s,o){var a=o("825a"),l=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,d={},p;try{p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,p.call(d,[]),c=d instanceof Array}catch{}return function(m,x){return a(m),l(x),c?p.call(m,x):m.__proto__=x,m}}():void 0)},d3b7:function(i,s,o){var a=o("00ee"),l=o("6eeb"),c=o("b041");a||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(i,s,o){var a=o("9bf2").f,l=o("5135"),c=o("b622"),d=c("toStringTag");i.exports=function(p,v,m){p&&!l(p=m?p:p.prototype,d)&&a(p,d,{configurable:!0,value:v})}},d58f:function(i,s,o){var a=o("1c0b"),l=o("7b0b"),c=o("44ad"),d=o("50c4"),p=function(v){return function(m,x,E,k){a(x);var A=l(m),D=c(A),V=d(A.length),Y=v?V-1:0,te=v?-1:1;if(E<2)for(;;){if(Y in D){k=D[Y],Y+=te;break}if(Y+=te,v?Y<0:V<=Y)throw TypeError("Reduce of empty array with no initial value")}for(;v?Y>=0:V>Y;Y+=te)Y in D&&(k=x(k,D[Y],Y,A));return k}};i.exports={left:p(!1),right:p(!0)}},d784:function(i,s,o){o("ac1f");var a=o("6eeb"),l=o("d039"),c=o("b622"),d=o("9263"),p=o("9112"),v=c("species"),m=!l(function(){var D=/./;return D.exec=function(){var V=[];return V.groups={a:"7"},V},"".replace(D,"$<a>")!=="7"}),x=function(){return"a".replace(/./,"$0")==="$0"}(),E=c("replace"),k=function(){return/./[E]?/./[E]("a","$0")==="":!1}(),A=!l(function(){var D=/(?:)/,V=D.exec;D.exec=function(){return V.apply(this,arguments)};var Y="ab".split(D);return Y.length!==2||Y[0]!=="a"||Y[1]!=="b"});i.exports=function(D,V,Y,te){var ge=c(D),fe=!l(function(){var j={};return j[ge]=function(){return 7},""[D](j)!=7}),I=fe&&!l(function(){var j=!1,z=/a/;return D==="split"&&(z={},z.constructor={},z.constructor[v]=function(){return z},z.flags="",z[ge]=/./[ge]),z.exec=function(){return j=!0,null},z[ge](""),!j});if(!fe||!I||D==="replace"&&!(m&&x&&!k)||D==="split"&&!A){var F=/./[ge],K=Y(ge,""[D],function(j,z,U,$,re){return z.exec===d?fe&&!re?{done:!0,value:F.call(z,U,$)}:{done:!0,value:j.call(U,z,$)}:{done:!1}},{REPLACE_KEEPS_$0:x,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:k}),B=K[0],N=K[1];a(String.prototype,D,B),a(RegExp.prototype,ge,V==2?function(j,z){return N.call(j,this,z)}:function(j){return N.call(j,this)})}te&&p(RegExp.prototype[ge],"sham",!0)}},d81d:function(i,s,o){var a=o("23e7"),l=o("b727").map,c=o("1dde"),d=o("ae40"),p=c("map"),v=d("map");a({target:"Array",proto:!0,forced:!p||!v},{map:function(x){return l(this,x,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(a){var l=function(c){return c&&c.Math==Math&&c};i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("56ef"),d=o("fc6a"),p=o("06cf"),v=o("8418");a({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(x){for(var E=d(x),k=p.f,A=c(E),D={},V=0,Y,te;A.length>V;)te=k(E,Y=A[V++]),te!==void 0&&v(D,Y,te);return D}})},dbf1:function(i,s,o){(function(a){o.d(s,"a",function(){return c});function l(){return typeof window<"u"?window.console:a.console}var c=l()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("e260"),d=o("9112"),p=o("b622"),v=p("iterator"),m=p("toStringTag"),x=c.values;for(var E in l){var k=a[E],A=k&&k.prototype;if(A){if(A[v]!==x)try{d(A,v,x)}catch{A[v]=x}if(A[m]||d(A,m,E),l[E]){for(var D in c)if(A[D]!==c[D])try{d(A,D,c[D])}catch{A[D]=c[D]}}}}},df75:function(i,s,o){var a=o("ca84"),l=o("7839");i.exports=Object.keys||function(d){return a(d,l)}},e01a:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("da84"),d=o("5135"),p=o("861d"),v=o("9bf2").f,m=o("e893"),x=c.Symbol;if(l&&typeof x=="function"&&(!("description"in x.prototype)||x().description!==void 0)){var E={},k=function(){var ge=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),fe=this instanceof k?new x(ge):ge===void 0?x():x(ge);return ge===""&&(E[fe]=!0),fe};m(k,x);var A=k.prototype=x.prototype;A.constructor=k;var D=A.toString,V=String(x("test"))=="Symbol(test)",Y=/^Symbol\((.*)\)[^)]+$/;v(A,"description",{configurable:!0,get:function(){var ge=p(this)?this.valueOf():this,fe=D.call(ge);if(d(E,ge))return"";var I=V?fe.slice(7,-1):fe.replace(Y,"$1");return I===""?void 0:I}}),a({global:!0,forced:!0},{Symbol:k})}},e163:function(i,s,o){var a=o("5135"),l=o("7b0b"),c=o("f772"),d=o("e177"),p=c("IE_PROTO"),v=Object.prototype;i.exports=d?Object.getPrototypeOf:function(m){return m=l(m),a(m,p)?m[p]:typeof m.constructor=="function"&&m instanceof m.constructor?m.constructor.prototype:m instanceof Object?v:null}},e177:function(i,s,o){var a=o("d039");i.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(i,s,o){var a=o("fc6a"),l=o("44d2"),c=o("3f8c"),d=o("69f3"),p=o("7dd0"),v="Array Iterator",m=d.set,x=d.getterFor(v);i.exports=p(Array,"Array",function(E,k){m(this,{type:v,target:a(E),index:0,kind:k})},function(){var E=x(this),k=E.target,A=E.kind,D=E.index++;return!k||D>=k.length?(E.target=void 0,{value:void 0,done:!0}):A=="keys"?{value:D,done:!1}:A=="values"?{value:k[D],done:!1}:{value:[D,k[D]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("fc6a"),d=o("06cf").f,p=o("83ab"),v=l(function(){d(1)}),m=!p||v;a({target:"Object",stat:!0,forced:m,sham:!p},{getOwnPropertyDescriptor:function(E,k){return d(c(E),k)}})},e538:function(i,s,o){var a=o("b622");s.f=a},e893:function(i,s,o){var a=o("5135"),l=o("56ef"),c=o("06cf"),d=o("9bf2");i.exports=function(p,v){for(var m=l(v),x=d.f,E=c.f,k=0;k<m.length;k++){var A=m[k];a(p,A)||x(p,A,E(v,A))}}},e8b5:function(i,s,o){var a=o("c6b6");i.exports=Array.isArray||function(c){return a(c)=="Array"}},e95a:function(i,s,o){var a=o("b622"),l=o("3f8c"),c=a("iterator"),d=Array.prototype;i.exports=function(p){return p!==void 0&&(l.Array===p||d[c]===p)}},f5df:function(i,s,o){var a=o("00ee"),l=o("c6b6"),c=o("b622"),d=c("toStringTag"),p=l(function(){return arguments}())=="Arguments",v=function(m,x){try{return m[x]}catch{}};i.exports=a?l:function(m){var x,E,k;return m===void 0?"Undefined":m===null?"Null":typeof(E=v(x=Object(m),d))=="string"?E:p?l(x):(k=l(x))=="Object"&&typeof x.callee=="function"?"Arguments":k}},f772:function(i,s,o){var a=o("5692"),l=o("90e3"),c=a("keys");i.exports=function(d){return c[d]||(c[d]=l(d))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var a=window.document.currentScript;{var l=o("8875");a=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(o.p=c[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function d(Ye,at,it){return at in Ye?Object.defineProperty(Ye,at,{value:it,enumerable:!0,configurable:!0,writable:!0}):Ye[at]=it,Ye}function p(Ye,at){var it=Object.keys(Ye);if(Object.getOwnPropertySymbols){var Vt=Object.getOwnPropertySymbols(Ye);at&&(Vt=Vt.filter(function(Yt){return Object.getOwnPropertyDescriptor(Ye,Yt).enumerable})),it.push.apply(it,Vt)}return it}function v(Ye){for(var at=1;at<arguments.length;at++){var it=arguments[at]!=null?arguments[at]:{};at%2?p(Object(it),!0).forEach(function(Vt){d(Ye,Vt,it[Vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ye,Object.getOwnPropertyDescriptors(it)):p(Object(it)).forEach(function(Vt){Object.defineProperty(Ye,Vt,Object.getOwnPropertyDescriptor(it,Vt))})}return Ye}function m(Ye){if(Array.isArray(Ye))return Ye}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function x(Ye,at){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Ye)))){var it=[],Vt=!0,Yt=!1,In=void 0;try{for(var Sn=Ye[Symbol.iterator](),Nn;!(Vt=(Nn=Sn.next()).done)&&(it.push(Nn.value),!(at&&it.length===at));Vt=!0);}catch(Qn){Yt=!0,In=Qn}finally{try{!Vt&&Sn.return!=null&&Sn.return()}finally{if(Yt)throw In}}return it}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function E(Ye,at){(at==null||at>Ye.length)&&(at=Ye.length);for(var it=0,Vt=new Array(at);it<at;it++)Vt[it]=Ye[it];return Vt}function k(Ye,at){if(Ye){if(typeof Ye=="string")return E(Ye,at);var it=Object.prototype.toString.call(Ye).slice(8,-1);if(it==="Object"&&Ye.constructor&&(it=Ye.constructor.name),it==="Map"||it==="Set")return Array.from(Ye);if(it==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(it))return E(Ye,at)}}function A(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(Ye,at){return m(Ye)||x(Ye,at)||k(Ye,at)||A()}function V(Ye){if(Array.isArray(Ye))return E(Ye)}function Y(Ye){if(typeof Symbol<"u"&&Symbol.iterator in Object(Ye))return Array.from(Ye)}function te(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ge(Ye){return V(Ye)||Y(Ye)||k(Ye)||te()}var fe=o("a352"),I=o.n(fe);function F(Ye){Ye.parentElement!==null&&Ye.parentElement.removeChild(Ye)}function K(Ye,at,it){var Vt=it===0?Ye.children[0]:Ye.children[it-1].nextSibling;Ye.insertBefore(at,Vt)}var B=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function N(Ye){var at=Object.create(null);return function(Vt){var Yt=at[Vt];return Yt||(at[Vt]=Ye(Vt))}}var j=/-(\w)/g,z=N(function(Ye){return Ye.replace(j,function(at,it){return it.toUpperCase()})});o("5db7"),o("73d9");var U=["Start","Add","Remove","Update","End"],$=["Choose","Unchoose","Sort","Filter","Clone"],re=["Move"],Q=[re,U,$].flatMap(function(Ye){return Ye}).map(function(Ye){return"on".concat(Ye)}),_e={manage:re,manageAndEmit:U,emit:$};function we(Ye){return Q.indexOf(Ye)!==-1}o("caad"),o("2ca0");var nt=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function ae(Ye){return nt.includes(Ye)}function H(Ye){return["transition-group","TransitionGroup"].includes(Ye)}function Z(Ye){return["id","class","role","style"].includes(Ye)||Ye.startsWith("data-")||Ye.startsWith("aria-")||Ye.startsWith("on")}function me(Ye){return Ye.reduce(function(at,it){var Vt=D(it,2),Yt=Vt[0],In=Vt[1];return at[Yt]=In,at},{})}function pe(Ye){var at=Ye.$attrs,it=Ye.componentData,Vt=it===void 0?{}:it,Yt=me(Object.entries(at).filter(function(In){var Sn=D(In,2),Nn=Sn[0];return Sn[1],Z(Nn)}));return v(v({},Yt),Vt)}function de(Ye){var at=Ye.$attrs,it=Ye.callBackBuilder,Vt=me(X(at));Object.entries(it).forEach(function(In){var Sn=D(In,2),Nn=Sn[0],Qn=Sn[1];_e[Nn].forEach(function(Xt){Vt["on".concat(Xt)]=Qn(Xt)})});var Yt="[data-draggable]".concat(Vt.draggable||"");return v(v({},Vt),{},{draggable:Yt})}function X(Ye){return Object.entries(Ye).filter(function(at){var it=D(at,2),Vt=it[0];return it[1],!Z(Vt)}).map(function(at){var it=D(at,2),Vt=it[0],Yt=it[1];return[z(Vt),Yt]}).filter(function(at){var it=D(at,2),Vt=it[0];return it[1],!we(Vt)})}o("c740");function J(Ye,at){if(!(Ye instanceof at))throw new TypeError("Cannot call a class as a function")}function De(Ye,at){for(var it=0;it<at.length;it++){var Vt=at[it];Vt.enumerable=Vt.enumerable||!1,Vt.configurable=!0,"value"in Vt&&(Vt.writable=!0),Object.defineProperty(Ye,Vt.key,Vt)}}function Te(Ye,at,it){return at&&De(Ye.prototype,at),Ye}var Je=function(at){var it=at.el;return it},he=function(at,it){return at.__draggable_context=it},ee=function(at){return at.__draggable_context},se=function(){function Ye(at){var it=at.nodes,Vt=it.header,Yt=it.default,In=it.footer,Sn=at.root,Nn=at.realList;J(this,Ye),this.defaultNodes=Yt,this.children=[].concat(ge(Vt),ge(Yt),ge(In)),this.externalComponent=Sn.externalComponent,this.rootTransition=Sn.transition,this.tag=Sn.tag,this.realList=Nn}return Te(Ye,[{key:"render",value:function(it,Vt){var Yt=this.tag,In=this.children,Sn=this._isRootComponent,Nn=Sn?{default:function(){return In}}:In;return it(Yt,Vt,Nn)}},{key:"updated",value:function(){var it=this.defaultNodes,Vt=this.realList;it.forEach(function(Yt,In){he(Je(Yt),{element:Vt[In],index:In})})}},{key:"getUnderlyingVm",value:function(it){return ee(it)}},{key:"getVmIndexFromDomIndex",value:function(it,Vt){var Yt=this.defaultNodes,In=Yt.length,Sn=Vt.children,Nn=Sn.item(it);if(Nn===null)return In;var Qn=ee(Nn);if(Qn)return Qn.index;if(In===0)return 0;var Xt=Je(Yt[0]),Cn=ge(Sn).findIndex(function(Dn){return Dn===Xt});return it<Cn?0:In}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),Ye}(),le=o("8bbf");function ze(Ye,at){var it=Ye[at];return it?it():[]}function Se(Ye){var at=Ye.$slots,it=Ye.realList,Vt=Ye.getKey,Yt=it||[],In=["header","footer"].map(function(Dn){return ze(at,Dn)}),Sn=D(In,2),Nn=Sn[0],Qn=Sn[1],Xt=at.item;if(!Xt)throw new Error("draggable element must have an item slot");var Cn=Yt.flatMap(function(Dn,rr){return Xt({element:Dn,index:rr}).map(function(Zn){return Zn.key=Vt(Dn),Zn.props=v(v({},Zn.props||{}),{},{"data-draggable":!0}),Zn})});if(Cn.length!==Yt.length)throw new Error("Item slot must have only one child");return{header:Nn,footer:Qn,default:Cn}}function ve(Ye){var at=H(Ye),it=!ae(Ye)&&!at;return{transition:at,externalComponent:it,tag:it?Object(le.resolveComponent)(Ye):at?le.TransitionGroup:Ye}}function $e(Ye){var at=Ye.$slots,it=Ye.tag,Vt=Ye.realList,Yt=Ye.getKey,In=Se({$slots:at,realList:Vt,getKey:Yt}),Sn=ve(it);return new se({nodes:In,root:Sn,realList:Vt})}function Ge(Ye,at){var it=this;Object(le.nextTick)(function(){return it.$emit(Ye.toLowerCase(),at)})}function Xe(Ye){var at=this;return function(it,Vt){if(at.realList!==null)return at["onDrag".concat(Ye)](it,Vt)}}function lt(Ye){var at=this,it=Xe.call(this,Ye);return function(Vt,Yt){it.call(at,Vt,Yt),Ge.call(at,Ye,Vt)}}var qe=null,Lt={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(at){return at}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Gt=["update:modelValue","change"].concat(ge([].concat(ge(_e.manageAndEmit),ge(_e.emit)).map(function(Ye){return Ye.toLowerCase()}))),rn=Object(le.defineComponent)({name:"draggable",inheritAttrs:!1,props:Lt,emits:Gt,data:function(){return{error:!1}},render:function(){try{this.error=!1;var at=this.$slots,it=this.$attrs,Vt=this.tag,Yt=this.componentData,In=this.realList,Sn=this.getKey,Nn=$e({$slots:at,tag:Vt,realList:In,getKey:Sn});this.componentStructure=Nn;var Qn=pe({$attrs:it,componentData:Yt});return Nn.render(le.h,Qn)}catch(Xt){return this.error=!0,Object(le.h)("pre",{style:{color:"red"}},Xt.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&B.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var at=this;if(!this.error){var it=this.$attrs,Vt=this.$el,Yt=this.componentStructure;Yt.updated();var In=de({$attrs:it,callBackBuilder:{manageAndEmit:function(Qn){return lt.call(at,Qn)},emit:function(Qn){return Ge.bind(at,Qn)},manage:function(Qn){return Xe.call(at,Qn)}}}),Sn=Vt.nodeType===1?Vt:Vt.parentElement;this._sortable=new I.a(Sn,In),this.targetDomElement=Sn,Sn.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var at=this.list;return at||this.modelValue},getKey:function(){var at=this.itemKey;return typeof at=="function"?at:function(it){return it[at]}}},watch:{$attrs:{handler:function(at){var it=this._sortable;it&&X(at).forEach(function(Vt){var Yt=D(Vt,2),In=Yt[0],Sn=Yt[1];it.option(In,Sn)})},deep:!0}},methods:{getUnderlyingVm:function(at){return this.componentStructure.getUnderlyingVm(at)||null},getUnderlyingPotencialDraggableComponent:function(at){return at.__draggable_component__},emitChanges:function(at){var it=this;Object(le.nextTick)(function(){return it.$emit("change",at)})},alterList:function(at){if(this.list){at(this.list);return}var it=ge(this.modelValue);at(it),this.$emit("update:modelValue",it)},spliceList:function(){var at=arguments,it=function(Yt){return Yt.splice.apply(Yt,ge(at))};this.alterList(it)},updatePosition:function(at,it){var Vt=function(In){return In.splice(it,0,In.splice(at,1)[0])};this.alterList(Vt)},getRelatedContextFromMoveEvent:function(at){var it=at.to,Vt=at.related,Yt=this.getUnderlyingPotencialDraggableComponent(it);if(!Yt)return{component:Yt};var In=Yt.realList,Sn={list:In,component:Yt};if(it!==Vt&&In){var Nn=Yt.getUnderlyingVm(Vt)||{};return v(v({},Nn),Sn)}return Sn},getVmIndexFromDomIndex:function(at){return this.componentStructure.getVmIndexFromDomIndex(at,this.targetDomElement)},onDragStart:function(at){this.context=this.getUnderlyingVm(at.item),at.item._underlying_vm_=this.clone(this.context.element),qe=at.item},onDragAdd:function(at){var it=at.item._underlying_vm_;if(it!==void 0){F(at.item);var Vt=this.getVmIndexFromDomIndex(at.newIndex);this.spliceList(Vt,0,it);var Yt={element:it,newIndex:Vt};this.emitChanges({added:Yt})}},onDragRemove:function(at){if(K(this.$el,at.item,at.oldIndex),at.pullMode==="clone"){F(at.clone);return}var it=this.context,Vt=it.index,Yt=it.element;this.spliceList(Vt,1);var In={element:Yt,oldIndex:Vt};this.emitChanges({removed:In})},onDragUpdate:function(at){F(at.item),K(at.from,at.item,at.oldIndex);var it=this.context.index,Vt=this.getVmIndexFromDomIndex(at.newIndex);this.updatePosition(it,Vt);var Yt={element:this.context.element,oldIndex:it,newIndex:Vt};this.emitChanges({moved:Yt})},computeFutureIndex:function(at,it){if(!at.element)return 0;var Vt=ge(it.to.children).filter(function(Nn){return Nn.style.display!=="none"}),Yt=Vt.indexOf(it.related),In=at.component.getVmIndexFromDomIndex(Yt),Sn=Vt.indexOf(qe)!==-1;return Sn||!it.willInsertAfter?In:In+1},onDragMove:function(at,it){var Vt=this.move,Yt=this.realList;if(!Vt||!Yt)return!0;var In=this.getRelatedContextFromMoveEvent(at),Sn=this.computeFutureIndex(In,at),Nn=v(v({},this.context),{},{futureIndex:Sn}),Qn=v(v({},at),{},{relatedContext:In,draggedContext:Nn});return Vt(Qn,it)},onDragEnd:function(){qe=null}}}),yn=rn;s.default=yn},fb6a:function(i,s,o){var a=o("23e7"),l=o("861d"),c=o("e8b5"),d=o("23cb"),p=o("50c4"),v=o("fc6a"),m=o("8418"),x=o("b622"),E=o("1dde"),k=o("ae40"),A=E("slice"),D=k("slice",{ACCESSORS:!0,0:0,1:2}),V=x("species"),Y=[].slice,te=Math.max;a({target:"Array",proto:!0,forced:!A||!D},{slice:function(fe,I){var F=v(this),K=p(F.length),B=d(fe,K),N=d(I===void 0?K:I,K),j,z,U;if(c(F)&&(j=F.constructor,typeof j=="function"&&(j===Array||c(j.prototype))?j=void 0:l(j)&&(j=j[V],j===null&&(j=void 0)),j===Array||j===void 0))return Y.call(F,B,N);for(z=new(j===void 0?Array:j)(te(N-B,0)),U=0;B<N;B++,U++)B in F&&m(z,U,F[B]);return z.length=U,z}})},fc6a:function(i,s,o){var a=o("44ad"),l=o("1d80");i.exports=function(c){return a(l(c))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var a=o("4930");i.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(lP);var bZ=lP.exports;const _Z=j_(bZ),wZ={class:"h-full bg-gray-50"},xZ={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},LZ={class:"sm:flex sm:items-center"},SZ={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},CZ={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10"},EZ={class:"mt-6 bg-white shadow rounded-lg p-4"},PZ={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},MZ=["value"],kZ={key:0,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},AZ={key:1,class:"mt-6 overflow-x-auto pb-4"},TZ={key:0,class:"p-6 text-center bg-white shadow rounded-lg mb-4"},DZ={class:"flex space-x-4 min-w-max"},OZ={class:"bg-white rounded-lg shadow overflow-hidden"},NZ={class:"flex items-center"},IZ={class:"flex items-center"},BZ={class:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full"},RZ={class:"p-2 max-h-[calc(100vh-250px)] overflow-y-auto"},FZ={class:"min-h-[100px] draggable-container"},jZ={class:"note-container"},zZ={class:"bg-white rounded-md shadow-sm border border-gray-200 overflow-hidden"},$Z={class:"flex items-center"},VZ={key:0,class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},UZ={class:"text-sm font-medium text-gray-900 truncate"},HZ={class:"px-3 py-2"},WZ={class:"text-sm text-gray-500 line-clamp-2"},GZ={class:"px-3 py-2 bg-gray-50 border-t border-gray-100 flex justify-between items-center"},qZ={class:"text-xs text-gray-500"},YZ={class:"flex space-x-1"},KZ={key:0,class:"text-xs text-primary-500 flex items-center mr-1",title:"Note géolocalisée"},ZZ={key:1,class:"text-xs text-gray-400 flex items-center mr-1",title:"Note simple"},XZ=["onClick"],JZ=["onClick"],QZ=["onClick"],eX=["onClick"],tX={key:0,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},nX={class:"flex items-center justify-center min-h-screen w-full"},rX={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},iX={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3 p-4 md:px-6"},sX=js({__name:"NotesView",setup(t){const e=Nm(),n=ru(),r=wf(),i=Tp(),s=Ct(!0),o=Ct(!1),a=Ct(!1),l=Ct(null),c=Ct(null),d=Ct("info"),p=Ct(null),v=Ct(window.innerWidth<768),m=()=>{v.value=window.innerWidth<768},x=Jn(()=>{const H=r.getSortedColumns;return console.log("[NotesView][columnsForDrag] Colonnes triées:",H),H}),E=[{id:Yi.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:Yi.COMPANY,title:"Entreprise",description:"Visible uniquement par l'entreprise"},{id:Yi.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et ses salariés"},{id:Yi.VISITOR,title:"Visiteurs",description:"Visible par tous (entreprise, salariés et visiteurs)"}],k=iu({search:"",date:"",accessLevel:""});function A(H){if(!H)return"Date non définie";try{const Z=new Date(H);return isNaN(Z.getTime())?(console.warn("[safeFormatDate] Date invalide:",H),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(Z)}catch(Z){return console.error("[safeFormatDate] Erreur lors du formatage de la date:",Z),"Date invalide"}}function D(H){if(!H)return null;try{const Z=new Date(H);return isNaN(Z.getTime())?(console.warn("[safeDate] Date invalide:",H),null):Z}catch(Z){return console.error("[safeDate] Erreur lors de la création de la date:",Z),null}}function V(H){return A(H)}const Y=Jn(()=>{let H=r.getAccessibleNotes;if(k.search){const Z=k.search.toLowerCase();H=H.filter(me=>me.title.toLowerCase().includes(Z)||me.description.toLowerCase().includes(Z))}if(k.accessLevel&&(H=H.filter(Z=>Z.accessLevel===k.accessLevel)),k.date){const Z=new Date;Z.setHours(0,0,0,0);const me=new Date(Z);me.setDate(Z.getDate()-Z.getDay());const pe=new Date(Z.getFullYear(),Z.getMonth(),1);H=H.filter(de=>{const X=D(de.createdAt);return X?k.date==="today"?X>=Z:k.date==="week"?X>=me:k.date==="month"?X>=pe:!0:!1})}return H}),te=Jn(()=>H=>r.getNotesByColumn(H));function ge(H){if(H==null)return"Non défini";switch(H){case Yi.PRIVATE:return"Privé";case Yi.COMPANY:return"Entreprise";case Yi.EMPLOYEE:return"Salariés";case Yi.VISITOR:return"Visiteurs";default:return"Non défini"}}function fe(H){if(H==null)return"#9CA3AF";switch(H){case Yi.PRIVATE:return"#9CA3AF";case Yi.COMPANY:return"#EF4444";case Yi.EMPLOYEE:return"#F59E0B";case Yi.VISITOR:return"#10B981";default:return"#6B7280"}}go(()=>{console.log("[NotesView] Composant monté"),I().then(()=>{console.log("[NotesView] Données chargées avec succès")}).catch(H=>{console.error("[NotesView] Erreur lors du chargement des données:",H),n.error("Erreur lors du chargement des données")}),document.addEventListener("click",ae),window.addEventListener("resize",m)});async function I(){console.log(`
[NotesView][loadInitialData] Début du chargement des données`);try{s.value=!0,console.log("[NotesView][loadInitialData] Chargement des colonnes..."),await r.loadColumns(),console.log("[NotesView][loadInitialData] Colonnes chargées:",r.columns),console.log("[NotesView][loadInitialData] Chargement des notes...");const H=await Sa.getNotes();console.log("[NotesView][loadInitialData] Notes reçues:",H.data),H.data.length>0?(console.log("[NotesView][loadInitialData] Détails des notes:"),H.data.forEach((de,X)=>{console.log(`Note ${X+1}:`,{id:de.id,title:de.title,columnId:de.column||de.column_id,access_level:de.access_level,column:de.column})})):console.warn("[NotesView][loadInitialData] Aucune note reçue du backend!");const Z=r.columns.map(de=>de.id),me=H.data.filter(de=>{const X=(de.column||de.column_id||"").toString();return X===""||!Z.includes(X)});if(me.length>0){console.warn(`[NotesView][loadInitialData] ${me.length} notes avec des colonnes invalides:`,me),console.log("[NotesView][loadInitialData] Assignation des notes à la colonne À faire (2)");for(const de of me)try{await Sa.updateNote(de.id,{column:"2"})}catch(X){console.error(`[NotesView][loadInitialData] Erreur lors de l'assignation de la note ${de.id} à la colonne À faire:`,X)}}const pe=H.data.map(de=>({id:de.id,title:de.title,description:de.description,location:de.location,columnId:(de.column||de.column_id||"2").toString(),access_level:de.access_level,style:de.style||{},comments:de.comments||[],photos:de.photos||[],order:de.order||0,createdAt:de.created_at,updatedAt:de.updated_at}));r.notes.length=0,pe.forEach(de=>{r.addNote(de)}),console.log("[NotesView][loadInitialData] Notes chargées dans le store");for(const de of r.columns){const X=r.getNotesByColumn(de.id);console.log(`[NotesView][loadInitialData] Colonne ${de.title} (${de.id}): ${X.length} notes`),X.length>0&&X.forEach(J=>{console.log(`  - Note ID=${J.id}, Titre="${J.title}", Niveau d'accès=${J.accessLevel}, Colonne=${J.columnId}`)})}}catch(H){console.error("[NotesView][loadInitialData] Erreur:",H),n.error("Erreur lors du chargement des données")}finally{s.value=!1,console.log("[NotesView][loadInitialData] Chargement terminé")}}function F(){e.push({path:"/",query:{tool:"Note"}})}async function K(H){if(!H.location){n.warning("Cette note n'est pas géolocalisée");return}try{const me=(await Sa.getNote(H.id)).data,pe=me.plan;console.log("[NotesView][viewOnMap] Détails de la note récupérés:",me),e.push({path:"/",query:{lat:Array.isArray(H.location)?H.location[0].toString():H.location.coordinates[1].toString(),lng:Array.isArray(H.location)?H.location[1].toString():H.location.coordinates[0].toString(),noteId:H.id.toString(),planId:pe?pe.toString():void 0}})}catch(Z){console.error("[NotesView][viewOnMap] Erreur lors de la récupération des détails de la note:",Z),n.error("Erreur lors de l'ouverture de la note sur la carte")}}function B(H){if(!H.location){n.warning("Cette note n'est pas géolocalisée");return}let Z,me;Array.isArray(H.location)?(Z=H.location[0],me=H.location[1]):(Z=H.location.coordinates[1],me=H.location.coordinates[0]);const pe=`https://www.google.com/maps/dir/?api=1&destination=${Z},${me}`;window.open(pe,"_blank")}function N(H){c.value=JSON.parse(JSON.stringify(H)),d.value="info",a.value=!0}async function j(H){if(console.log("[NotesView][handleNoteSave] Note sauvegardée:",H),H&&H.id){const Z=r.notes.find(me=>me.id===H.id);Z&&(!H.comments&&Z.comments&&(H.comments=Z.comments),!H.photos&&Z.photos&&(H.photos=Z.photos))}if(a.value=!1,p.value&&c.value)try{const Z={location:c.value.location,name:c.value.title,description:c.value.description,columnId:c.value.columnId,accessLevel:c.value.accessLevel,style:c.value.style,comments:c.value.comments||[],photos:c.value.photos||[],order:c.value.order,createdAt:c.value.createdAt,updatedAt:new Date().toISOString()},me=i.elements.findIndex(pe=>{var de;return pe.type_forme==="Note"&&pe.id===((de=c.value)==null?void 0:de.id)});me!==-1?i.elements[me].data=Z:i.elements.push({id:c.value.id,type_forme:"Note",data:Z}),await i.saveToPlan(p.value),n.success("Note sauvegardée et plan mis à jour avec succès")}catch(Z){console.error("Erreur lors de la sauvegarde de la note:",Z),n.error("Erreur lors de la sauvegarde de la note")}}function z(H){l.value=H,o.value=!0}async function U(){if(l.value)try{try{await Sa.deleteNote(l.value.id)}catch(H){if(H.response&&H.response.status===404)console.log("[NotesView][deleteNote] Note non trouvée dans le backend (404), suppression locale uniquement");else throw H}r.removeNote(l.value.id),n.success("Note supprimée avec succès")}catch(H){console.error("Erreur lors de la suppression de la note:",H),n.error("Erreur lors de la suppression de la note")}finally{o.value=!1,l.value=null}}async function $(H,Z){console.log("[NotesView][onDragChange] Événement:",H),console.log("[NotesView][onDragChange] Colonne cible:",Z);try{if(H.added){const{element:me}=H.added;console.log("[NotesView][onDragChange] Note à déplacer:",me);const pe=typeof me=="object"&&me.id?me.id:null;if(!pe)throw console.error("[NotesView][onDragChange] ID de note invalide:",me),new Error("ID de note invalide");r.moveNote(pe,Z);const X=te.value(Z).map(De=>De.id);r.reorderNotes(Z,X);const J=r.getColumnById(Z);n.success(`Note déplacée vers ${(J==null?void 0:J.title)||"une autre colonne"}`),await re(pe,{columnId:Z})}if(H.moved){const me=te.value(Z),pe=me.map(de=>de.id);r.reorderNotes(Z,pe),n.success("Ordre des notes mis à jour");for(const[de,X]of me.entries())await re(X.id,{order:de})}}catch(me){console.error("[NotesView][onDragChange] Erreur:",me),n.error("Une erreur est survenue lors du déplacement de la note")}}async function re(H,Z){console.log("[NotesView][updateNoteInBackend] Mise à jour de la note:",H,Z);try{const me=r.notes.find(X=>X.id===H);if(!me){console.error("[NotesView][updateNoteInBackend] Note non trouvée:",H);return}const pe={...Z};if(Z.columnId){const X=r.getColumnById(Z.columnId);X?(console.log(`[NotesView][updateNoteInBackend] Mise à jour de la colonne: ${X.id} (${X.title})`),pe.column=X.id,delete pe.columnId,delete pe.column_id):console.warn(`[NotesView][updateNoteInBackend] Colonne non trouvée: ${Z.columnId}`)}const de={...me,...pe,updatedAt:new Date().toISOString()};console.log("[NotesView][updateNoteInBackend] Données envoyées au backend:",de),await Sa.updateNote(H,de),console.log("[NotesView][updateNoteInBackend] Note mise à jour avec succès")}catch(me){throw console.error("[NotesView][updateNoteInBackend] Erreur:",me),me}}function Q(){c.value={id:"",title:"Nouvelle note",description:"",location:null,columnId:r.getDefaultColumn.id,accessLevel:Yi.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:[],photos:[]},a.value=!0,d.value="info"}const _e=Ct(null),we=Ct(!1);function nt(){we.value=!we.value}function ae(H){_e.value&&!_e.value.contains(H.target)&&(we.value=!1)}return go(()=>{document.addEventListener("click",ae),window.addEventListener("resize",m)}),Td(()=>{document.removeEventListener("click",ae),window.removeEventListener("resize",m)}),(H,Z)=>{var me,pe;return Ie(),je("div",wZ,[C("div",xZ,[C("div",LZ,[Z[6]||(Z[6]=C("div",{class:"sm:flex-auto"},[C("h1",{class:"text-2xl font-semibold text-gray-900"},"Notes"),C("p",{class:"mt-2 text-sm text-gray-700"}," Liste de toutes vos notes. ")],-1)),C("div",SZ,[C("div",{class:"relative",ref_key:"dropdownRef",ref:_e},[C("button",{onClick:nt,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},Z[5]||(Z[5]=[ui(" Créer "),C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])),we.value?(Ie(),je("div",CZ,[C("div",{class:"py-1"},[C("button",{onClick:Q,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note simple "),C("button",{onClick:F,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note géolocalisée ")])])):en("",!0)],512)])]),C("div",EZ,[C("div",PZ,[C("div",null,[Z[7]||(Z[7]=C("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),On(C("input",{type:"text",id:"search","onUpdate:modelValue":Z[0]||(Z[0]=de=>k.search=de),placeholder:"Rechercher par titre ou description...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Fr,k.search]])]),C("div",null,[Z[9]||(Z[9]=C("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),On(C("select",{id:"date","onUpdate:modelValue":Z[1]||(Z[1]=de=>k.date=de),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},Z[8]||(Z[8]=[C("option",{value:""},"Toutes les dates",-1),C("option",{value:"today"},"Aujourd'hui",-1),C("option",{value:"week"},"Cette semaine",-1),C("option",{value:"month"},"Ce mois",-1)]),512),[[rs,k.date]])]),C("div",null,[Z[11]||(Z[11]=C("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accès",-1)),On(C("select",{id:"accessLevel","onUpdate:modelValue":Z[2]||(Z[2]=de=>k.accessLevel=de),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[Z[10]||(Z[10]=C("option",{value:""},"Tous les niveaux",-1)),(Ie(),je(Mn,null,gr(E,de=>C("option",{key:de.id,value:de.id},Ot(de.title),9,MZ)),64))],512),[[rs,k.accessLevel]])])])]),s.value?(Ie(),je("div",kZ,Z[12]||(Z[12]=[C("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),C("p",{class:"mt-2 text-sm text-gray-500"},"Chargement des notes...",-1)]))):(Ie(),je("div",AZ,[Y.value.length===0&&x.value.length===0?(Ie(),je("div",TZ,Z[13]||(Z[13]=[C("p",{class:"text-sm text-gray-500"},"Aucune note ni colonne trouvée",-1)]))):en("",!0),C("div",DZ,[(Ie(!0),je(Mn,null,gr(x.value,de=>(Ie(),je("div",{key:de.id,class:"column-wrapper w-80 flex-shrink-0"},[C("div",OZ,[C("div",{class:"p-3 flex items-center justify-between no-select",style:tu({backgroundColor:de.color+"20",borderBottom:"2px solid "+de.color})},[C("div",NZ,[C("h3",{class:"text-sm font-semibold",style:tu({color:de.color})},Ot(de.title),5)]),C("div",IZ,[C("span",BZ,Ot(te.value(de.id).length),1)])],4),C("div",RZ,[C("div",FZ,[yi(er(_Z),{list:te.value(de.id),class:"space-y-2",group:"notes","item-key":"id",handle:v.value?null:".note-drag-handle",onChange:X=>$(X,de.id),animation:150,"ghost-class":"ghost-card","chosen-class":"chosen","drag-class":"dragging",disabled:v.value},{item:Gu(({element:X})=>[C("div",jZ,[C("div",zZ,[C("div",{class:Ti(["p-3 flex items-center justify-between",{"note-drag-handle cursor-move":!v.value,"no-select":!0}])},[C("div",$Z,[v.value?en("",!0):(Ie(),je("svg",VZ,Z[14]||(Z[14]=[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"},null,-1)]))),C("h4",UZ,Ot(X.title),1)]),C("div",null,[C("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:tu({backgroundColor:fe(X.accessLevel)+"20",color:fe(X.accessLevel)})},Ot(ge(X.accessLevel)||"Non défini"),5)])],2),C("div",HZ,[C("p",WZ,Ot(X.description||"Aucune description"),1)]),C("div",GZ,[C("span",qZ,Ot(X.updatedAt?V(X.updatedAt):X.createdAt?V(X.createdAt):"Date non définie"),1),C("div",YZ,[X.location?(Ie(),je("span",KZ,Z[15]||(Z[15]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))):(Ie(),je("span",ZZ,Z[16]||(Z[16]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]))),X.location?(Ie(),je(Mn,{key:2},[C("button",{onClick:J=>B(X),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Ouvrir dans Google Maps"},Z[17]||(Z[17]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),8,XZ),C("button",{onClick:J=>K(X),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Voir sur la carte"},Z[18]||(Z[18]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)]),8,JZ)],64)):en("",!0),C("button",{onClick:J=>N(X),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Éditer la note"},Z[19]||(Z[19]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,QZ),C("button",{onClick:J=>z(X),class:"p-1 text-gray-400 hover:text-red-500 focus:outline-none",title:"Supprimer la note"},Z[20]||(Z[20]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,eX)])])])])]),"empty-content":Gu(()=>Z[21]||(Z[21]=[C("div",{class:"p-4 text-center text-gray-400 text-sm italic"}," Aucune note dans cette colonne ",-1)])),_:2},1032,["list","handle","onChange","disabled"])])])])]))),128))])]))]),o.value?(Ie(),je("div",tX,[C("div",nX,[Z[23]||(Z[23]=C("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),C("div",rX,[Z[22]||(Z[22]=eu('<div class="p-4 md:p-6" data-v-0158f3fe><div class="flex items-start" data-v-0158f3fe><div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100" data-v-0158f3fe><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-0158f3fe><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-0158f3fe></path></svg></div><div class="ml-4 flex-1" data-v-0158f3fe><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title" data-v-0158f3fe> Supprimer la note </h3><div class="mt-2" data-v-0158f3fe><p class="text-sm text-gray-500" data-v-0158f3fe> Êtes-vous sûr de vouloir supprimer cette note ? Cette action est irréversible. </p></div></div></div></div>',1)),C("div",iX,[C("button",{onClick:U,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm"}," Supprimer "),C("button",{onClick:Z[3]||(Z[3]=de=>o.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])])])])):en("",!0),a.value?(Ie(),Va(RE,{key:1,note:c.value,"is-new-note":!((me=c.value)!=null&&me.id),location:(pe=c.value)==null?void 0:pe.location,onClose:Z[4]||(Z[4]=de=>a.value=!1),onSave:j},null,8,["note","is-new-note","location"])):en("",!0)])}}}),oX=jh(sX,[["__scopeId","data-v-0158f3fe"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Rm(t){return t+.5|0}const fd=(t,e,n)=>Math.max(Math.min(t,n),e);function Mg(t){return fd(Rm(t*2.55),0,255)}function _d(t){return fd(Rm(t*255),0,255)}function Sh(t){return fd(Rm(t/2.55)/100,0,1)}function Z5(t){return fd(Rm(t*100),0,100)}const $u={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$b=[..."0123456789ABCDEF"],aX=t=>$b[t&15],lX=t=>$b[(t&240)>>4]+$b[t&15],O0=t=>(t&240)>>4===(t&15),uX=t=>O0(t.r)&&O0(t.g)&&O0(t.b)&&O0(t.a);function cX(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&$u[t[1]]*17,g:255&$u[t[2]]*17,b:255&$u[t[3]]*17,a:e===5?$u[t[4]]*17:255}:(e===7||e===9)&&(n={r:$u[t[1]]<<4|$u[t[2]],g:$u[t[3]]<<4|$u[t[4]],b:$u[t[5]]<<4|$u[t[6]],a:e===9?$u[t[7]]<<4|$u[t[8]]:255})),n}const hX=(t,e)=>t<255?e(t):"";function dX(t){var e=uX(t)?aX:lX;return t?"#"+e(t.r)+e(t.g)+e(t.b)+hX(t.a,e):void 0}const fX=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function _P(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function pX(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function gX(t,e,n){const r=_P(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function mX(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function K_(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,d;return s!==o&&(d=s-o,c=a>.5?d/(2-s-o):d/(s+o),l=mX(n,r,i,d,s),l=l*60+.5),[l|0,c||0,a]}function Z_(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(_d)}function X_(t,e,n){return Z_(_P,t,e,n)}function vX(t,e,n){return Z_(gX,t,e,n)}function yX(t,e,n){return Z_(pX,t,e,n)}function wP(t){return(t%360+360)%360}function bX(t){const e=fX.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Mg(+e[5]):_d(+e[5]));const i=wP(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=vX(i,s,o):e[1]==="hsv"?r=yX(i,s,o):r=X_(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function _X(t,e){var n=K_(t);n[0]=wP(n[0]+e),n=X_(n),t.r=n[0],t.g=n[1],t.b=n[2]}function wX(t){if(!t)return;const e=K_(t),n=e[0],r=Z5(e[1]),i=Z5(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Sh(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const X5={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},J5={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function xX(){const t={},e=Object.keys(J5),n=Object.keys(X5);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,X5[s]);s=parseInt(J5[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let N0;function LX(t){N0||(N0=xX(),N0.transparent=[0,0,0,0]);const e=N0[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const SX=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function CX(t){const e=SX.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Mg(o):fd(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Mg(r):fd(r,0,255)),i=255&(e[4]?Mg(i):fd(i,0,255)),s=255&(e[6]?Mg(s):fd(s,0,255)),{r,g:i,b:s,a:n}}}function EX(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Sh(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const _2=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ep=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function PX(t,e,n){const r=ep(Sh(t.r)),i=ep(Sh(t.g)),s=ep(Sh(t.b));return{r:_d(_2(r+n*(ep(Sh(e.r))-r))),g:_d(_2(i+n*(ep(Sh(e.g))-i))),b:_d(_2(s+n*(ep(Sh(e.b))-s))),a:t.a+n*(e.a-t.a)}}function I0(t,e,n){if(t){let r=K_(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=X_(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function xP(t,e){return t&&Object.assign(e||{},t)}function Q5(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=_d(t[3]))):(e=xP(t,{r:0,g:0,b:0,a:1}),e.a=_d(e.a)),e}function MX(t){return t.charAt(0)==="r"?CX(t):bX(t)}class bm{constructor(e){if(e instanceof bm)return e;const n=typeof e;let r;n==="object"?r=Q5(e):n==="string"&&(r=cX(e)||LX(e)||MX(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=xP(this._rgb);return e&&(e.a=Sh(e.a)),e}set rgb(e){this._rgb=Q5(e)}rgbString(){return this._valid?EX(this._rgb):void 0}hexString(){return this._valid?dX(this._rgb):void 0}hslString(){return this._valid?wX(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=PX(this._rgb,e._rgb,n)),this}clone(){return new bm(this.rgb)}alpha(e){return this._rgb.a=_d(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Rm(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return I0(this._rgb,2,e),this}darken(e){return I0(this._rgb,2,-e),this}saturate(e){return I0(this._rgb,1,e),this}desaturate(e){return I0(this._rgb,1,-e),this}rotate(e){return _X(this._rgb,e),this}}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function _h(){}const kX=(()=>{let t=0;return()=>t++})();function Wi(t){return t===null||typeof t>"u"}function Zs(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Oi(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Eo(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function wu(t,e){return Eo(t)?t:e}function ci(t,e){return typeof t>"u"?e:t}const AX=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,LP=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ts(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ds(t,e,n,r){let i,s,o;if(Zs(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(Oi(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function ny(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function ry(t){if(Zs(t))return t.map(ry);if(Oi(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=ry(t[n[i]]);return e}return t}function SP(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function TX(t,e,n,r){if(!SP(t))return;const i=e[t],s=n[t];Oi(i)&&Oi(s)?_m(i,s,r):e[t]=ry(s)}function _m(t,e,n){const r=Zs(e)?e:[e],i=r.length;if(!Oi(t))return t;n=n||{};const s=n.merger||TX;let o;for(let a=0;a<i;++a){if(o=r[a],!Oi(o))continue;const l=Object.keys(o);for(let c=0,d=l.length;c<d;++c)s(l[c],t,o,n)}return t}function Jg(t,e){return _m(t,e,{merger:DX})}function DX(t,e,n){if(!SP(t))return;const r=e[t],i=n[t];Oi(r)&&Oi(i)?Jg(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ry(i))}const e3={"":t=>t,x:t=>t.x,y:t=>t.y};function OX(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function NX(t){const e=OX(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Pd(t,e){return(e3[e]||(e3[e]=NX(e)))(t)}function J_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const wm=t=>typeof t<"u",Md=t=>typeof t=="function",t3=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function IX(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Fs=Math.PI,Rs=2*Fs,BX=Rs+Fs,iy=Number.POSITIVE_INFINITY,RX=Fs/180,Ho=Fs/2,Zd=Fs/4,n3=Fs*2/3,pd=Math.log10,Qc=Math.sign;function Qg(t,e,n){return Math.abs(t-e)<n}function r3(t){const e=Math.round(t);t=Qg(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(pd(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function FX(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function Op(t){return!isNaN(parseFloat(t))&&isFinite(t)}function jX(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function CP(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function bc(t){return t*(Fs/180)}function Q_(t){return t*(180/Fs)}function i3(t){if(!Eo(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function EP(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Fs&&(s+=Rs),{angle:s,distance:i}}function Vb(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function zX(t,e){return(t-e+BX)%Rs-Fs}function xu(t){return(t%Rs+Rs)%Rs}function xm(t,e,n,r){const i=xu(t),s=xu(e),o=xu(n),a=xu(s-i),l=xu(o-i),c=xu(i-s),d=xu(i-o);return i===s||i===o||r&&s===o||a>l&&c<d}function Ea(t,e,n){return Math.max(e,Math.min(n,t))}function $X(t){return Ea(t,-32768,32767)}function Ah(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function ew(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const Th=(t,e,n,r)=>ew(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),VX=(t,e,n)=>ew(t,n,r=>t[r][e]>=n);function UX(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const PP=["push","pop","shift","splice","unshift"];function HX(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),PP.forEach(n=>{const r="_onData"+J_(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function s3(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(PP.forEach(s=>{delete t[s]}),delete t._chartjs)}function MP(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const kP=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function AP(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,kP.call(window,()=>{r=!1,t.apply(e,n)}))}}function WX(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const tw=t=>t==="start"?"left":t==="end"?"right":"center",al=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,GX=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function TP(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:d,minDefined:p,maxDefined:v}=o.getUserBounds();p&&(i=Ea(Math.min(Th(a,l,c).lo,n?r:Th(e,l,o.getPixelForValue(c)).lo),0,r-1)),v?s=Ea(Math.max(Th(a,o.axis,d,!0).hi+1,n?0:Th(e,l,o.getPixelForValue(d),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function DP(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const B0=t=>t===0||t===1,o3=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Rs/n)),a3=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Rs/n)+1,em={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Ho)+1,easeOutSine:t=>Math.sin(t*Ho),easeInOutSine:t=>-.5*(Math.cos(Fs*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>B0(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>B0(t)?t:o3(t,.075,.3),easeOutElastic:t=>B0(t)?t:a3(t,.075,.3),easeInOutElastic(t){return B0(t)?t:t<.5?.5*o3(t*2,.1125,.45):.5+.5*a3(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-em.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?em.easeInBounce(t*2)*.5:em.easeOutBounce(t*2-1)*.5+.5};function nw(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function l3(t){return nw(t)?t:new bm(t)}function w2(t){return nw(t)?t:new bm(t).saturate(.5).darken(.1).hexString()}const qX=["x","y","borderWidth","radius","tension"],YX=["color","borderColor","backgroundColor"];function KX(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:YX},numbers:{type:"number",properties:qX}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function ZX(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const u3=new Map;function XX(t,e){e=e||{};const n=t+JSON.stringify(e);let r=u3.get(n);return r||(r=new Intl.NumberFormat(t,e),u3.set(n,r)),r}function Fm(t,e,n){return XX(e,n).format(t)}const OP={values(t){return Zs(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=JX(t,n)}const o=pd(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Fm(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(pd(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?OP.numeric.call(this,t,e,n):""}};function JX(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var qy={formatters:OP};function QX(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:qy.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const xf=Object.create(null),Ub=Object.create(null);function tm(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function x2(t,e,n){return typeof e=="string"?_m(tm(t,e),n):_m(tm(t,""),e)}class eJ{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>w2(i.backgroundColor),this.hoverBorderColor=(r,i)=>w2(i.borderColor),this.hoverColor=(r,i)=>w2(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return x2(this,e,n)}get(e){return tm(this,e)}describe(e,n){return x2(Ub,e,n)}override(e,n){return x2(xf,e,n)}route(e,n,r,i){const s=tm(this,e),o=tm(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Oi(l)?Object.assign({},c,l):ci(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Po=new eJ({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[KX,ZX,QX]);function tJ(t){return!t||Wi(t.size)||Wi(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function sy(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function nJ(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,d,p,v;for(l=0;l<a;l++)if(p=n[l],p!=null&&!Zs(p))o=sy(t,i,s,o,p);else if(Zs(p))for(c=0,d=p.length;c<d;c++)v=p[c],v!=null&&!Zs(v)&&(o=sy(t,i,s,o,v));t.restore();const m=s.length/2;if(m>n.length){for(l=0;l<m;l++)delete i[s[l]];s.splice(0,m)}return o}function Xd(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function c3(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Hb(t,e,n,r){NP(t,e,n,r,null)}function NP(t,e,n,r,i){let s,o,a,l,c,d,p,v;const m=e.pointStyle,x=e.rotation,E=e.radius;let k=(x||0)*RX;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(k),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(E)||E<=0)){switch(t.beginPath(),m){default:i?t.ellipse(n,r,i/2,E,0,0,Rs):t.arc(n,r,E,0,Rs),t.closePath();break;case"triangle":d=i?i/2:E,t.moveTo(n+Math.sin(k)*d,r-Math.cos(k)*E),k+=n3,t.lineTo(n+Math.sin(k)*d,r-Math.cos(k)*E),k+=n3,t.lineTo(n+Math.sin(k)*d,r-Math.cos(k)*E),t.closePath();break;case"rectRounded":c=E*.516,l=E-c,o=Math.cos(k+Zd)*l,p=Math.cos(k+Zd)*(i?i/2-c:l),a=Math.sin(k+Zd)*l,v=Math.sin(k+Zd)*(i?i/2-c:l),t.arc(n-p,r-a,c,k-Fs,k-Ho),t.arc(n+v,r-o,c,k-Ho,k),t.arc(n+p,r+a,c,k,k+Ho),t.arc(n-v,r+o,c,k+Ho,k+Fs),t.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*E,d=i?i/2:l,t.rect(n-d,r-l,2*d,2*l);break}k+=Zd;case"rectRot":p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+v,r-o),t.lineTo(n+p,r+a),t.lineTo(n-v,r+o),t.closePath();break;case"crossRot":k+=Zd;case"cross":p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o);break;case"star":p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o),k+=Zd,p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o);break;case"line":o=i?i/2:Math.cos(k)*E,a=Math.sin(k)*E,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(k)*(i?i/2:E),r+Math.sin(k)*E);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Dh(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Yy(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ky(t){t.restore()}function rJ(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function iJ(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function sJ(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Wi(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function oJ(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,d=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,d),t.lineTo(a,d),t.stroke()}}function aJ(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Lf(t,e,n,r,i,s={}){const o=Zs(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,sJ(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&aJ(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Wi(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),oJ(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function Lm(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Fs,Fs,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Fs,Ho,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Ho,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Ho,!0),t.lineTo(n+o.topLeft,r)}const lJ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,uJ=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function cJ(t,e){const n=(""+t).match(lJ);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const hJ=t=>+t||0;function rw(t,e){const n={},r=Oi(e),i=r?Object.keys(e):e,s=Oi(t)?r?o=>ci(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=hJ(s(o));return n}function IP(t){return rw(t,{top:"y",right:"x",bottom:"y",left:"x"})}function mf(t){return rw(t,["topLeft","topRight","bottomLeft","bottomRight"])}function gl(t){const e=IP(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function fa(t,e){t=t||{},e=e||Po.font;let n=ci(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=ci(t.style,e.style);r&&!(""+r).match(uJ)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:ci(t.family,e.family),lineHeight:cJ(ci(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:ci(t.weight,e.weight),string:""};return i.string=tJ(i),i}function kg(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function dJ(t,e,n){const{min:r,max:i}=t,s=LP(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Dd(t,e){return Object.assign(Object.create(t),e)}function iw(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=jP("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>iw([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return RP(a,l,()=>_J(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return d3(a).includes(l)},ownKeys(a){return d3(a)},set(a,l,c){const d=a._storage||(a._storage=i());return a[l]=d[l]=c,delete a._keys,!0}})}function Np(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:BP(t,r),setContext:s=>Np(t,s,n,r),override:s=>Np(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return RP(s,o,()=>pJ(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function BP(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Md(n)?n:()=>n,isIndexable:Md(r)?r:()=>r}}const fJ=(t,e)=>t?t+J_(e):e,sw=(t,e)=>Oi(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function RP(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=n();return t[e]=r,r}function pJ(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return Md(a)&&o.isScriptable(e)&&(a=gJ(e,a,t,n)),Zs(a)&&a.length&&(a=mJ(e,a,t,o.isIndexable)),sw(e,a)&&(a=Np(a,i,s&&s[e],o)),a}function gJ(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),sw(t,l)&&(l=ow(i._scopes,i,t,l)),l}function mJ(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(Oi(e[0])){const l=e,c=i._scopes.filter(d=>d!==l);e=[];for(const d of l){const p=ow(c,i,t,d);e.push(Np(p,s,o&&o[t],a))}}return e}function FP(t,e,n){return Md(t)?t(e,n):t}const vJ=(t,e)=>t===!0?e:typeof t=="string"?Pd(e,t):void 0;function yJ(t,e,n,r,i){for(const s of e){const o=vJ(n,s);if(o){t.add(o);const a=FP(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function ow(t,e,n,r){const i=e._rootScopes,s=FP(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=h3(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=h3(a,o,s,l,r),l===null)?!1:iw(Array.from(a),[""],i,s,()=>bJ(e,n,r))}function h3(t,e,n,r,i){for(;n;)n=yJ(t,e,n,r,i);return n}function bJ(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Zs(i)&&Oi(n)?n:i||{}}function _J(t,e,n,r){let i;for(const s of e)if(i=jP(fJ(s,t),n),typeof i<"u")return sw(t,i)?ow(n,r,t,i):i}function jP(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function d3(t){let e=t._keys;return e||(e=t._keys=wJ(t._scopes)),e}function wJ(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function zP(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,d;for(a=0,l=r;a<l;++a)c=a+n,d=e[c],o[a]={r:i.parse(Pd(d,s),c)};return o}const xJ=Number.EPSILON||1e-14,Ip=(t,e)=>e<t.length&&!t[e].skip&&t[e],$P=t=>t==="x"?"y":"x";function LJ(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=Vb(s,i),l=Vb(o,s);let c=a/(a+l),d=l/(a+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const p=r*c,v=r*d;return{previous:{x:s.x-p*(o.x-i.x),y:s.y-p*(o.y-i.y)},next:{x:s.x+v*(o.x-i.x),y:s.y+v*(o.y-i.y)}}}function SJ(t,e,n){const r=t.length;let i,s,o,a,l,c=Ip(t,0);for(let d=0;d<r-1;++d)if(l=c,c=Ip(t,d+1),!(!l||!c)){if(Qg(e[d],0,xJ)){n[d]=n[d+1]=0;continue}i=n[d]/e[d],s=n[d+1]/e[d],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[d]=i*o*e[d],n[d+1]=s*o*e[d])}}function CJ(t,e,n="x"){const r=$P(n),i=t.length;let s,o,a,l=Ip(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Ip(t,c+1),!a)continue;const d=a[n],p=a[r];o&&(s=(d-o[n])/3,a[`cp1${n}`]=d-s,a[`cp1${r}`]=p-s*e[c]),l&&(s=(l[n]-d)/3,a[`cp2${n}`]=d+s,a[`cp2${r}`]=p+s*e[c])}}function EJ(t,e="x"){const n=$P(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=Ip(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Ip(t,o+1),!!l){if(c){const d=c[e]-l[e];i[o]=d!==0?(c[n]-l[n])/d:0}s[o]=a?c?Qc(i[o-1])!==Qc(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}SJ(t,i,s),CJ(t,s,e)}function R0(t,e,n){return Math.max(Math.min(t,n),e)}function PJ(t,e){let n,r,i,s,o,a=Dh(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&Dh(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=R0(i.cp1x,e.left,e.right),i.cp1y=R0(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=R0(i.cp2x,e.left,e.right),i.cp2y=R0(i.cp2y,e.top,e.bottom)))}function MJ(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")EJ(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=LJ(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&PJ(t,n)}function aw(){return typeof window<"u"&&typeof document<"u"}function lw(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function oy(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Zy=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function kJ(t,e){return Zy(t).getPropertyValue(e)}const AJ=["top","right","bottom","left"];function vf(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=AJ[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const TJ=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function DJ(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(TJ(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function nf(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Zy(n),s=i.boxSizing==="border-box",o=vf(i,"padding"),a=vf(i,"border","width"),{x:l,y:c,box:d}=DJ(t,n),p=o.left+(d&&a.left),v=o.top+(d&&a.top);let{width:m,height:x}=e;return s&&(m-=o.width+a.width,x-=o.height+a.height),{x:Math.round((l-p)/m*n.width/r),y:Math.round((c-v)/x*n.height/r)}}function OJ(t,e,n){let r,i;if(e===void 0||n===void 0){const s=lw(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Zy(s),l=vf(a,"border","width"),c=vf(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=oy(a.maxWidth,s,"clientWidth"),i=oy(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||iy,maxHeight:i||iy}}const F0=t=>Math.round(t*10)/10;function NJ(t,e,n,r){const i=Zy(t),s=vf(i,"margin"),o=oy(i.maxWidth,t,"clientWidth")||iy,a=oy(i.maxHeight,t,"clientHeight")||iy,l=OJ(t,e,n);let{width:c,height:d}=l;if(i.boxSizing==="content-box"){const v=vf(i,"border","width"),m=vf(i,"padding");c-=m.width+v.width,d-=m.height+v.height}return c=Math.max(0,c-s.width),d=Math.max(0,r?c/r:d-s.height),c=F0(Math.min(c,o,l.maxWidth)),d=F0(Math.min(d,a,l.maxHeight)),c&&!d&&(d=F0(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&d>l.height&&(d=l.height,c=F0(Math.floor(d*r))),{width:c,height:d}}function f3(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const IJ=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};aw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function p3(t,e){const n=kJ(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function rf(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function BJ(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function RJ(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=rf(t,i,n),a=rf(i,s,n),l=rf(s,e,n),c=rf(o,a,n),d=rf(a,l,n);return rf(c,d,n)}const FJ=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},jJ=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Lp(t,e,n){return t?FJ(e,n):jJ()}function VP(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function UP(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function HP(t){return t==="angle"?{between:xm,compare:zX,normalize:xu}:{between:Ah,compare:(e,n)=>e-n,normalize:e=>e}}function g3({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function zJ(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=HP(r),l=e.length;let{start:c,end:d,loop:p}=t,v,m;if(p){for(c+=l,d+=l,v=0,m=l;v<m&&o(a(e[c%l][r]),i,s);++v)c--,d--;c%=l,d%=l}return d<c&&(d+=l),{start:c,end:d,loop:p,style:t.style}}function WP(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=HP(r),{start:d,end:p,loop:v,style:m}=zJ(t,e,n),x=[];let E=!1,k=null,A,D,V;const Y=()=>l(i,V,A)&&a(i,V)!==0,te=()=>a(s,A)===0||l(s,V,A),ge=()=>E||Y(),fe=()=>!E||te();for(let I=d,F=d;I<=p;++I)D=e[I%o],!D.skip&&(A=c(D[r]),A!==V&&(E=l(A,i,s),k===null&&ge()&&(k=a(A,i)===0?I:F),k!==null&&fe()&&(x.push(g3({start:k,end:I,loop:v,count:o,style:m})),k=null),F=I,V=A));return k!==null&&x.push(g3({start:k,end:p,loop:v,count:o,style:m})),x}function GP(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=WP(r[i],t.points,e);s.length&&n.push(...s)}return n}function $J(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function VJ(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function UJ(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=$J(n,i,s,r);if(r===!0)return m3(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return m3(t,VJ(n,o,l,c),n,e)}function m3(t,e,n,r){return!r||!r.setContext||!n?e:HJ(t,e,n,r)}function HJ(t,e,n,r){const i=t._chart.getContext(),s=v3(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let d=s,p=e[0].start,v=p;function m(x,E,k,A){const D=a?-1:1;if(x!==E){for(x+=l;n[x%l].skip;)x-=D;for(;n[E%l].skip;)E+=D;x%l!==E%l&&(c.push({start:x%l,end:E%l,loop:k,style:A}),d=A,p=E%l)}}for(const x of e){p=a?p:x.start;let E=n[p%l],k;for(v=p+1;v<=x.end;v++){const A=n[v%l];k=v3(r.setContext(Dd(i,{type:"segment",p0:E,p1:A,p0DataIndex:(v-1)%l,p1DataIndex:v%l,datasetIndex:o}))),WJ(k,d)&&m(p,v-1,x.loop,d),E=A,d=k}p<v-1&&m(p,v-1,x.loop,d)}return c}function v3(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function WJ(t,e){if(!e)return!1;const n=[],r=function(i,s){return nw(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class GJ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=kP.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var wh=new GJ;const y3="transparent",qJ={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=l3(t||y3),i=r.valid&&l3(e||y3);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class YJ{constructor(e,n,r,i){const s=n[r];i=kg([e.to,i,s,e.from]);const o=kg([e.from,s,i]);this._active=!0,this._fn=e.fn||qJ[e.type||typeof o],this._easing=em[e.easing]||em.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=kg([e.to,n,i,e.from]),this._from=kg([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class qP{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Oi(e))return;const n=Object.keys(Po.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Oi(s))return;const o={};for(const a of n)o[a]=s[a];(Zs(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=ZJ(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&KJ(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const d=n[c];let p=s[c];const v=r.get(c);if(p)if(v&&p.active()){p.update(v,d,a);continue}else p.cancel();if(!v||!v.duration){e[c]=d;continue}s[c]=p=new YJ(v,e,c,d),i.push(p)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return wh.add(this._chart,r),!0}}function KJ(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function ZJ(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function b3(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function XJ(t,e,n){if(n===!1)return!1;const r=b3(t,n),i=b3(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function JJ(t){let e,n,r,i;return Oi(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function YP(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function _3(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(r.all)continue;break}c=t.values[l],Eo(c)&&(s||e===0||Qc(e)===Qc(c))&&(e+=c)}return e}}function QJ(t){const e=Object.keys(t),n=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],n[r]={x:s,y:t[s]};return n}function w3(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function eQ(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function tQ(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function nQ(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function x3(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function L3(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,d=eQ(s,o,r),p=e.length;let v;for(let m=0;m<p;++m){const x=e[m],{[l]:E,[c]:k}=x,A=x._stacks||(x._stacks={});v=A[c]=nQ(i,d,E),v[a]=k,v._top=x3(v,o,!0,r.type),v._bottom=x3(v,o,!1,r.type);const D=v._visualValues||(v._visualValues={});D[a]=k}}function L2(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function rQ(t,e){return Dd(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function iQ(t,e,n){return Dd(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function cg(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const S2=t=>t==="reset"||t==="none",S3=(t,e)=>e?t:Object.assign({},t),sQ=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:YP(n,!0),values:null};class wc{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=w3(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&cg(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(p,v,m,x)=>p==="x"?v:p==="r"?x:m,s=n.xAxisID=ci(r.xAxisID,L2(e,"x")),o=n.yAxisID=ci(r.yAxisID,L2(e,"y")),a=n.rAxisID=ci(r.rAxisID,L2(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),d=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&s3(this._data,this),e._stacked&&cg(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Oi(n))this._data=QJ(n);else if(r!==n){if(r){s3(r,this);const i=this._cachedMeta;cg(i),i._parsed=[]}n&&Object.isExtensible(n)&&HX(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=w3(n.vScale,n),n.stack!==r.stack&&(i=!0,cg(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&L3(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],d,p,v;if(this._parsing===!1)r._parsed=i,r._sorted=!0,v=i;else{Zs(i[e])?v=this.parseArrayData(r,i,e,n):Oi(i[e])?v=this.parseObjectData(r,i,e,n):v=this.parsePrimitiveData(r,i,e,n);const m=()=>p[a]===null||c&&p[a]<c[a];for(d=0;d<n;++d)r._parsed[d+e]=p=v[d],l&&(m()&&(l=!1),c=p);r._sorted=l}o&&L3(this,v)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),d=s===o,p=new Array(i);let v,m,x;for(v=0,m=i;v<m;++v)x=v+r,p[v]={[a]:d||s.parse(c[x],x),[l]:o.parse(n[x],x)};return p}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,d,p;for(l=0,c=i;l<c;++l)d=l+r,p=n[d],a[l]={x:s.parse(p[0],d),y:o.parse(p[1],d)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let d,p,v,m;for(d=0,p=i;d<p;++d)v=d+r,m=n[v],c[d]={x:s.parse(Pd(m,a),v),y:o.parse(Pd(m,l),v)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:YP(i,!0),values:n._stacks[e.axis]._visualValues};return _3(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=_3(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=sQ(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:p}=tQ(a);let v,m;function x(){m=i[v];const E=m[a.axis];return!Eo(m[e.axis])||d>E||p<E}for(v=0;v<o&&!(!x()&&(this.updateRangeFromParsed(c,e,m,l),s));++v);if(s){for(v=o-1;v>=0;--v)if(!x()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],Eo(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=JJ(ci(this.options.clip,XJ(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let d;for(r.dataset&&r.dataset.draw(e,s,a,l),d=a;d<a+l;++d){const p=i[d];p.hidden||(p.active&&c?o.push(p):p.draw(e,s))}for(d=0;d<o.length;++d)o[d].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=iQ(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=rQ(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&wm(r);if(a)return S3(a,l);const c=this.chart.config,d=c.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],v=c.getOptionScopes(this.getDataset(),d),m=Object.keys(Po.elements[e]),x=()=>this.getContext(r,i,n),E=c.resolveNamedOptions(v,m,x,p);return E.$shared&&(E.$shared=l,s[o]=Object.freeze(S3(E,l))),E}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const d=this.chart.config,p=d.datasetAnimationScopeKeys(this._type,n),v=d.getOptionScopes(this.getDataset(),p);l=d.createResolver(v,this.getContext(e,r,n))}const c=new qP(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||S2(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){S2(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!S2(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&cg(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ze(wc,"defaults",{}),Ze(wc,"datasetElementType",null),Ze(wc,"dataElementType",null);function oQ(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=MP(r.sort((i,s)=>i-s))}return t._cache.$bar}function aQ(t){const e=t.iScale,n=oQ(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(wm(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function lQ(t,e,n,r){const i=n.barThickness;let s,o;return Wi(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function uQ(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function cQ(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function KP(t,e,n,r){return Zs(t)?cQ(t,e,n,r):e[n.axis]=n.parse(t,r),e}function C3(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,d,p,v;for(c=n,d=n+r;c<d;++c)v=e[c],p={},p[i.axis]=a||i.parse(o[c],c),l.push(KP(v,p,s,c));return l}function C2(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function hQ(t,e,n){return t!==0?Qc(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function dQ(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function fQ(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:d}=dQ(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=d:(s[E3(d,o,a,l)]=!0,i=c)),s[E3(i,o,a,l)]=!0,t.borderSkipped=s}function E3(t,e,n,r){return r?(t=pQ(t,e,n),t=P3(t,n,e)):t=P3(t,e,n),t}function pQ(t,e,n){return t===e?n:t===n?e:t}function P3(t,e,n){return t==="start"?e:t==="end"?n:t}function gQ(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class gv extends wc{parsePrimitiveData(e,n,r,i){return C3(e,n,r,i)}parseArrayData(e,n,r,i){return C3(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,d=o.axis==="x"?a:l,p=[];let v,m,x,E;for(v=r,m=r+i;v<m;++v)E=n[v],x={},x[s.axis]=s.parse(Pd(E,c),v),p.push(KP(Pd(E,d),x,o,v));return p}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=C2(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),d=this._getRuler(),{sharedOptions:p,includeOptions:v}=this._getSharedOptions(n,i);for(let m=n;m<n+r;m++){const x=this.getParsed(m),E=s||Wi(x[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),k=this._calculateBarIndexPixels(m,d),A=(x._stacks||{})[a.axis],D={horizontal:c,base:E.base,enableBorderRadius:!A||C2(x._custom)||o===A._top||o===A._bottom,x:c?E.head:k.center,y:c?k.center:E.head,height:c?k.size:Math.abs(E.size),width:c?Math.abs(E.size):k.size};v&&(D.options=p||this.resolveDataElementOptions(m,e[m].active?"active":i));const V=D.options||e[m].options;fQ(D,V,A,o),gQ(D,V,d.ratio),this.updateElement(e[m],m,D,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=r.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),d=c&&c[l.vScale.axis];if(Wi(d)||isNaN(d))return!0};for(const l of i)if(!(n!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||aQ(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,d=C2(c);let p=l[n.axis],v=0,m=r?this.applyStack(n,l,r):p,x,E;m!==p&&(v=m-p,m=p),d&&(p=c.barStart,m=c.barEnd-c.barStart,p!==0&&Qc(p)!==Qc(c.barEnd)&&(v=0),v+=p);const k=!Wi(s)&&!d?s:v;let A=n.getPixelForValue(k);if(this.chart.getDataVisibility(e)?x=n.getPixelForValue(v+m):x=A,E=x-A,Math.abs(E)<o){E=hQ(E,n,a)*o,p===a&&(A-=E/2);const D=n.getPixelForDecimal(0),V=n.getPixelForDecimal(1),Y=Math.min(D,V),te=Math.max(D,V);A=Math.max(Math.min(A,te),Y),x=A+E,r&&!d&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(x)-n.getValueForPixel(A))}if(A===n.getPixelForValue(a)){const D=Qc(E)*n.getLineWidthForValue(a)/2;A+=D,E-=D}return{size:E,base:A,head:x,center:x+E/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=ci(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,d=i.barThickness==="flex"?uQ(e,n,i,c):lQ(e,n,i,c),p=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=d.start+d.chunk*p+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&r[s].draw(this._ctx)}}Ze(gv,"id","bar"),Ze(gv,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Ze(gv,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class mv extends wc{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,i){const s=super.parsePrimitiveData(e,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,n,r,i){const s=super.parseArrayData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=ci(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,n,r,i){const s=super.parseObjectData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=ci(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),d=o.axis,p=a.axis;for(let v=n;v<n+r;v++){const m=e[v],x=!s&&this.getParsed(v),E={},k=E[d]=s?o.getPixelForDecimal(.5):o.getPixelForValue(x[d]),A=E[p]=s?a.getBasePixel():a.getPixelForValue(x[p]);E.skip=isNaN(k)||isNaN(A),c&&(E.options=l||this.resolveDataElementOptions(v,m.active?"active":i),s&&(E.options.radius=0)),this.updateElement(m,v,E,i)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=ci(r&&r._custom,s),i}}Ze(mv,"id","bubble"),Ze(mv,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Ze(mv,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function mQ(t,e,n){let r=1,i=1,s=0,o=0;if(e<Rs){const a=t,l=a+e,c=Math.cos(a),d=Math.sin(a),p=Math.cos(l),v=Math.sin(l),m=(V,Y,te)=>xm(V,a,l,!0)?1:Math.max(Y,Y*n,te,te*n),x=(V,Y,te)=>xm(V,a,l,!0)?-1:Math.min(Y,Y*n,te,te*n),E=m(0,c,p),k=m(Ho,d,v),A=x(Fs,c,p),D=x(Fs+Ho,d,v);r=(E-A)/2,i=(k-D)/2,s=-(E+A)/2,o=-(k+D)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class uf extends wc{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(Oi(r[e])){const{key:l="value"}=this._parsing;s=c=>+Pd(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return bc(this.options.rotation-90)}_getCircumference(){return bc(this.options.circumference)}_getRotationExtents(){let e=Rs,n=-Rs;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(AX(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:d,rotation:p}=this._getRotationExtents(),{ratioX:v,ratioY:m,offsetX:x,offsetY:E}=mQ(p,d,l),k=(r.width-o)/v,A=(r.height-o)/m,D=Math.max(Math.min(k,A)/2,0),V=LP(this.options.radius,D),Y=Math.max(V*l,0),te=(V-Y)/this._getVisibleDatasetWeightTotal();this.offsetX=x*V,this.offsetY=E*V,i.total=this.calculateTotal(),this.outerRadius=V-te*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-te*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/Rs)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,d=(a.left+a.right)/2,p=(a.top+a.bottom)/2,v=s&&c.animateScale,m=v?0:this.innerRadius,x=v?0:this.outerRadius,{sharedOptions:E,includeOptions:k}=this._getSharedOptions(n,i);let A=this._getRotation(),D;for(D=0;D<n;++D)A+=this._circumference(D,s);for(D=n;D<n+r;++D){const V=this._circumference(D,s),Y=e[D],te={x:d+this.offsetX,y:p+this.offsetY,startAngle:A,endAngle:A+V,circumference:V,outerRadius:x,innerRadius:m};k&&(te.options=E||this.resolveDataElementOptions(D,Y.active?"active":i)),A+=V,this.updateElement(Y,D,te,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Rs*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Fm(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(ci(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Ze(uf,"id","doughnut"),Ze(uf,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Ze(uf,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Ze(uf,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class vv extends wc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=TP(n,i,o);this._drawStart=a,this._drawCount=l,DP(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:d,includeOptions:p}=this._getSharedOptions(n,i),v=o.axis,m=a.axis,{spanGaps:x,segment:E}=this.options,k=Op(x)?x:Number.POSITIVE_INFINITY,A=this.chart._animationsDisabled||s||i==="none",D=n+r,V=e.length;let Y=n>0&&this.getParsed(n-1);for(let te=0;te<V;++te){const ge=e[te],fe=A?ge:{};if(te<n||te>=D){fe.skip=!0;continue}const I=this.getParsed(te),F=Wi(I[m]),K=fe[v]=o.getPixelForValue(I[v],te),B=fe[m]=s||F?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,I,l):I[m],te);fe.skip=isNaN(K)||isNaN(B)||F,fe.stop=te>0&&Math.abs(I[v]-Y[v])>k,E&&(fe.parsed=I,fe.raw=c.data[te]),p&&(fe.options=d||this.resolveDataElementOptions(te,ge.active?"active":i)),A||this.updateElement(ge,te,fe,i),Y=I}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Ze(vv,"id","line"),Ze(vv,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ze(vv,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class nm extends wc{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Fm(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return zP.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,d=c.xCenter,p=c.yCenter,v=c.getIndexAngle(0)-.5*Fs;let m=v,x;const E=360/this.countVisibleElements();for(x=0;x<n;++x)m+=this._computeAngle(x,i,E);for(x=n;x<n+r;x++){const k=e[x];let A=m,D=m+this._computeAngle(x,i,E),V=o.getDataVisibility(x)?c.getDistanceFromCenterForValue(this.getParsed(x).r):0;m=D,s&&(l.animateScale&&(V=0),l.animateRotate&&(A=D=v));const Y={x:d,y:p,innerRadius:0,outerRadius:V,startAngle:A,endAngle:D,options:this.resolveDataElementOptions(x,k.active?"active":i)};this.updateElement(k,x,Y,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?bc(this.resolveDataElementOptions(e,n).angle||r):0}}Ze(nm,"id","polarArea"),Ze(nm,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Ze(nm,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Wb extends uf{}Ze(Wb,"id","pie"),Ze(Wb,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class yv extends wc{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return zP.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),d=s.getPointPositionForValue(a,this.getParsed(a).r),p=o?s.xCenter:d.x,v=o?s.yCenter:d.y,m={x:p,y:v,angle:d.angle,skip:isNaN(p)||isNaN(v),options:c};this.updateElement(l,a,m,i)}}}Ze(yv,"id","radar"),Ze(yv,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Ze(yv,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class bv extends wc{getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=TP(n,r,i);if(this._drawStart=s,this._drawCount=o,DP(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,d=this.resolveDataElementOptions(n,i),p=this.getSharedOptions(d),v=this.includeOptions(i,p),m=o.axis,x=a.axis,{spanGaps:E,segment:k}=this.options,A=Op(E)?E:Number.POSITIVE_INFINITY,D=this.chart._animationsDisabled||s||i==="none";let V=n>0&&this.getParsed(n-1);for(let Y=n;Y<n+r;++Y){const te=e[Y],ge=this.getParsed(Y),fe=D?te:{},I=Wi(ge[x]),F=fe[m]=o.getPixelForValue(ge[m],Y),K=fe[x]=s||I?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,ge,l):ge[x],Y);fe.skip=isNaN(F)||isNaN(K)||I,fe.stop=Y>0&&Math.abs(ge[m]-V[m])>A,k&&(fe.parsed=ge,fe.raw=c.data[Y]),v&&(fe.options=p||this.resolveDataElementOptions(Y,te.active?"active":i)),D||this.updateElement(te,Y,fe,i),V=ge}this.updateSharedOptions(p,i,d)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}Ze(bv,"id","scatter"),Ze(bv,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Ze(bv,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var vQ=Object.freeze({__proto__:null,BarController:gv,BubbleController:mv,DoughnutController:uf,LineController:vv,PieController:Wb,PolarAreaController:nm,RadarController:yv,ScatterController:bv});function Jd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class uw{constructor(e){Ze(this,"options");this.options=e||{}}static override(e){Object.assign(uw.prototype,e)}init(){}formats(){return Jd()}parse(){return Jd()}format(){return Jd()}add(){return Jd()}diff(){return Jd()}startOf(){return Jd()}endOf(){return Jd()}}var ZP={_date:uw};function yQ(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?VX:Th;if(r){if(i._sharedOptions){const c=s[0],d=typeof c.getRange=="function"&&c.getRange(e);if(d){const p=l(s,e,n-d),v=l(s,e,n+d);return{lo:p.lo,hi:v.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function Xy(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:d}=s[a],{lo:p,hi:v}=yQ(s[a],e,o,i);for(let m=p;m<=v;++m){const x=d[m];x.skip||r(x,c,m)}}}function bQ(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function E2(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||Xy(t,n,e,function(a,l,c){!i&&!Dh(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function _Q(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:d}=o.getProps(["startAngle","endAngle"],r),{angle:p}=EP(o,{x:e.x,y:e.y});xm(p,c,d)&&i.push({element:o,datasetIndex:a,index:l})}return Xy(t,n,e,s),i}function wQ(t,e,n,r,i,s){let o=[];const a=bQ(n);let l=Number.POSITIVE_INFINITY;function c(d,p,v){const m=d.inRange(e.x,e.y,i);if(r&&!m)return;const x=d.getCenterPoint(i);if(!(!!s||t.isPointInArea(x))&&!m)return;const k=a(e,x);k<l?(o=[{element:d,datasetIndex:p,index:v}],l=k):k===l&&o.push({element:d,datasetIndex:p,index:v})}return Xy(t,n,e,c),o}function P2(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?_Q(t,e,n,i):wQ(t,e,n,r,i,s)}function M3(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Xy(t,n,e,(l,c,d)=>{l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:d}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var xQ={modes:{index(t,e,n,r){const i=nf(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?E2(t,i,s,r,o):P2(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const d=a[0].index,p=c.data[d];p&&!p.skip&&l.push({element:p,datasetIndex:c.index,index:d})}),l):[]},dataset(t,e,n,r){const i=nf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?E2(t,i,s,r,o):P2(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let d=0;d<c.length;++d)a.push({element:c[d],datasetIndex:l,index:d})}return a},point(t,e,n,r){const i=nf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return E2(t,i,s,r,o)},nearest(t,e,n,r){const i=nf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return P2(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=nf(e,t);return M3(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=nf(e,t);return M3(t,i,"y",n.intersect,r)}}};const XP=["left","top","right","bottom"];function hg(t,e){return t.filter(n=>n.pos===e)}function k3(t,e){return t.filter(n=>XP.indexOf(n.pos)===-1&&n.box.axis===e)}function dg(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function LQ(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function SQ(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!XP.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function CQ(t,e){const n=SQ(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],d=c&&a.stackWeight/c.weight;a.horizontal?(a.width=d?d*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=d?d*i:l&&e.availableHeight)}return n}function EQ(t){const e=LQ(t),n=dg(e.filter(c=>c.box.fullSize),!0),r=dg(hg(e,"left"),!0),i=dg(hg(e,"right")),s=dg(hg(e,"top"),!0),o=dg(hg(e,"bottom")),a=k3(e,"x"),l=k3(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:hg(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function A3(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function JP(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function PQ(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!Oi(i)){n.size&&(t[i]-=n.size);const p=r[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?s.height:s.width),n.size=p.size/p.count,t[i]+=n.size}s.getPadding&&JP(o,s.getPadding());const a=Math.max(0,e.outerWidth-A3(o,t,"left","right")),l=Math.max(0,e.outerHeight-A3(o,t,"top","bottom")),c=a!==t.w,d=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:d}:{same:d,other:c}}function MQ(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function kQ(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Ag(t,e,n,r){const i=[];let s,o,a,l,c,d;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,kQ(a.horizontal,e));const{same:p,other:v}=PQ(e,n,a,r);c|=p&&i.length,d=d||v,l.fullSize||i.push(a)}return c&&Ag(i,e,n,r)||d}function j0(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function T3(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},d=a.stackWeight/c.weight||1;if(a.horizontal){const p=e.w*d,v=c.size||l.height;wm(c.start)&&(o=c.start),l.fullSize?j0(l,i.left,o,n.outerWidth-i.right-i.left,v):j0(l,e.left+c.placed,o,p,v),c.start=o,c.placed+=p,o=l.bottom}else{const p=e.h*d,v=c.size||l.width;wm(c.start)&&(s=c.start),l.fullSize?j0(l,s,i.top,v,n.outerHeight-i.bottom-i.top):j0(l,s,e.top+c.placed,v,p),c.start=s,c.placed+=p,s=l.right}}e.x=s,e.y=o}var pl={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=gl(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=EQ(t.boxes),l=a.vertical,c=a.horizontal;ds(t.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const d=l.reduce((E,k)=>k.box.options&&k.box.options.display===!1?E:E+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/d,hBoxMaxHeight:o/2}),v=Object.assign({},i);JP(v,gl(r));const m=Object.assign({maxPadding:v,w:s,h:o,x:i.left,y:i.top},i),x=CQ(l.concat(c),p);Ag(a.fullSize,m,p,x),Ag(l,m,p,x),Ag(c,m,p,x)&&Ag(l,m,p,x),MQ(m),T3(a.leftAndTop,m,p,x),m.x+=m.w,m.y+=m.h,T3(a.rightAndBottom,m,p,x),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},ds(a.chartArea,E=>{const k=E.box;Object.assign(k,t.chartArea),k.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class QP{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class AQ extends QP{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const _v="$chartjs",TQ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},D3=t=>t===null||t==="";function DQ(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[_v]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",D3(i)){const s=p3(t,"width");s!==void 0&&(t.width=s)}if(D3(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=p3(t,"height");s!==void 0&&(t.height=s)}return t}const eM=IJ?{passive:!0}:!1;function OQ(t,e,n){t.addEventListener(e,n,eM)}function NQ(t,e,n){t.canvas.removeEventListener(e,n,eM)}function IQ(t,e){const n=TQ[t.type]||t.type,{x:r,y:i}=nf(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function ay(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function BQ(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ay(a.addedNodes,r),o=o&&!ay(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function RQ(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ay(a.removedNodes,r),o=o&&!ay(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Sm=new Map;let O3=0;function tM(){const t=window.devicePixelRatio;t!==O3&&(O3=t,Sm.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function FQ(t,e){Sm.size||window.addEventListener("resize",tM),Sm.set(t,e)}function jQ(t){Sm.delete(t),Sm.size||window.removeEventListener("resize",tM)}function zQ(t,e,n){const r=t.canvas,i=r&&lw(r);if(!i)return;const s=AP((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,d=l.contentRect.height;c===0&&d===0||s(c,d)});return o.observe(i),FQ(t,s),o}function M2(t,e,n){n&&n.disconnect(),e==="resize"&&jQ(t)}function $Q(t,e,n){const r=t.canvas,i=AP(s=>{t.ctx!==null&&n(IQ(s,t))},t);return OQ(r,e,i),i}class VQ extends QP{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(DQ(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[_v])return!1;const r=n[_v].initial;["height","width"].forEach(s=>{const o=r[s];Wi(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[_v],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:BQ,detach:RQ,resize:zQ}[n]||$Q;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:M2,detach:M2,resize:M2}[n]||NQ)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return NJ(e,n,r,i)}isAttached(e){const n=lw(e);return!!(n&&n.isConnected)}}function UQ(t){return!aw()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?AQ:VQ}var Y0;let $h=(Y0=class{constructor(){Ze(this,"x");Ze(this,"y");Ze(this,"active",!1);Ze(this,"options");Ze(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Op(this.x)&&Op(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},Ze(Y0,"defaults",{}),Ze(Y0,"defaultRoutes"),Y0);function HQ(t,e){const n=t.options.ticks,r=WQ(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?qQ(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return YQ(e,c,s,o/i),c;const d=GQ(s,e,i);if(o>0){let p,v;const m=o>1?Math.round((l-a)/(o-1)):null;for(z0(e,c,d,Wi(m)?0:a-m,a),p=0,v=o-1;p<v;p++)z0(e,c,d,s[p],s[p+1]);return z0(e,c,d,l,Wi(m)?e.length:l+m),c}return z0(e,c,d),c}function WQ(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function GQ(t,e,n){const r=KQ(t),i=e.length/n;if(!r)return Math.max(i,1);const s=FX(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function qQ(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function YQ(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function z0(t,e,n,r,i){const s=ci(r,0),o=Math.min(ci(i,t.length),t.length);let a=0,l,c,d;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),d=s;d<0;)a++,d=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===d&&(e.push(t[c]),a++,d=Math.round(s+a*n))}function KQ(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const ZQ=t=>t==="left"?"right":t==="right"?"left":t,N3=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,I3=(t,e)=>Math.min(e||t,t);function B3(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function XQ(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function JQ(t,e){ds(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function fg(t){return t.drawTicks?t.tickLength:0}function R3(t,e){if(!t.display)return 0;const n=fa(t.font,e),r=gl(t.padding);return(Zs(t.text)?t.text.length:1)*n.lineHeight+r.height}function QQ(t,e){return Dd(t,{scale:e,type:"scale"})}function eee(t,e,n){return Dd(t,{tick:n,index:e,type:"tick"})}function tee(t,e,n){let r=tw(t);return(n&&e!=="right"||!n&&e==="right")&&(r=ZQ(r)),r}function nee(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:d}=l;let p=0,v,m,x;const E=o-i,k=a-s;if(t.isHorizontal()){if(m=al(r,s,a),Oi(n)){const A=Object.keys(n)[0],D=n[A];x=d[A].getPixelForValue(D)+E-e}else n==="center"?x=(c.bottom+c.top)/2+E-e:x=N3(t,n,e);v=a-s}else{if(Oi(n)){const A=Object.keys(n)[0],D=n[A];m=d[A].getPixelForValue(D)-k+e}else n==="center"?m=(c.left+c.right)/2-k+e:m=N3(t,n,e);x=al(r,o,i),p=n==="left"?-Ho:Ho}return{titleX:m,titleY:x,maxWidth:v,rotation:p}}class Pf extends $h{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=wu(e,Number.POSITIVE_INFINITY),n=wu(n,Number.NEGATIVE_INFINITY),r=wu(r,Number.POSITIVE_INFINITY),i=wu(i,Number.NEGATIVE_INFINITY),{min:wu(e,r),max:wu(n,i),minDefined:Eo(e),maxDefined:Eo(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:wu(n,wu(r,n)),max:wu(r,wu(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ts(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=dJ(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?B3(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=HQ(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ts(this.options.afterUpdate,[this])}beforeSetDimensions(){Ts(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ts(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ts(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ts(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Ts(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Ts(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ts(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=I3(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const d=this._getLabelSizes(),p=d.widest.width,v=d.highest.height,m=Ea(this.chart.width-p,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),p+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-fg(e.grid)-n.padding-R3(e.title,this.chart.options.font),c=Math.sqrt(p*p+v*v),o=Q_(Math.min(Math.asin(Ea((d.highest.height+6)/a,-1,1)),Math.asin(Ea(l/c,-1,1))-Math.asin(Ea(v/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ts(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ts(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=R3(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=fg(s)+l):(e.height=this.maxHeight,e.width=fg(s)+l),r.display&&this.ticks.length){const{first:c,last:d,widest:p,highest:v}=this._getLabelSizes(),m=r.padding*2,x=bc(this.labelRotation),E=Math.cos(x),k=Math.sin(x);if(a){const A=r.mirror?0:k*p.width+E*v.height;e.height=Math.min(this.maxHeight,e.height+A+m)}else{const A=r.mirror?0:E*p.width+k*v.height;e.width=Math.min(this.maxWidth,e.width+A+m)}this._calculatePadding(c,d,k,E)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,m=0;l?c?(v=i*e.width,m=r*n.height):(v=r*e.height,m=i*n.width):s==="start"?m=n.width:s==="end"?v=e.width:s!=="inner"&&(v=e.width/2,m=n.width/2),this.paddingLeft=Math.max((v-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((m-p+o)*this.width/(this.width-p),0)}else{let d=n.height/2,p=e.height/2;s==="start"?(d=0,p=e.height):s==="end"&&(d=n.height,p=0),this.paddingTop=d+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ts(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Wi(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=B3(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/I3(n,r));let c=0,d=0,p,v,m,x,E,k,A,D,V,Y,te;for(p=0;p<n;p+=l){if(x=e[p].label,E=this._resolveTickFontOptions(p),i.font=k=E.string,A=s[k]=s[k]||{data:{},gc:[]},D=E.lineHeight,V=Y=0,!Wi(x)&&!Zs(x))V=sy(i,A.data,A.gc,V,x),Y=D;else if(Zs(x))for(v=0,m=x.length;v<m;++v)te=x[v],!Wi(te)&&!Zs(te)&&(V=sy(i,A.data,A.gc,V,te),Y+=D);o.push(V),a.push(Y),c=Math.max(V,c),d=Math.max(Y,d)}JQ(s,n);const ge=o.indexOf(c),fe=a.indexOf(d),I=F=>({width:o[F]||0,height:a[F]||0});return{first:I(0),last:I(n-1),widest:I(ge),highest:I(fe),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return $X(this._alignToPixels?Xd(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=eee(this.getContext(),e,r))}return this.$context||(this.$context=QQ(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=bc(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),p=this.ticks.length+(l?1:0),v=fg(s),m=[],x=a.setContext(this.getContext()),E=x.display?x.width:0,k=E/2,A=function($){return Xd(r,$,E)};let D,V,Y,te,ge,fe,I,F,K,B,N,j;if(o==="top")D=A(this.bottom),fe=this.bottom-v,F=D-k,B=A(e.top)+k,j=e.bottom;else if(o==="bottom")D=A(this.top),B=e.top,j=A(e.bottom)-k,fe=D+k,F=this.top+v;else if(o==="left")D=A(this.right),ge=this.right-v,I=D-k,K=A(e.left)+k,N=e.right;else if(o==="right")D=A(this.left),K=e.left,N=A(e.right)-k,ge=D+k,I=this.left+v;else if(n==="x"){if(o==="center")D=A((e.top+e.bottom)/2+.5);else if(Oi(o)){const $=Object.keys(o)[0],re=o[$];D=A(this.chart.scales[$].getPixelForValue(re))}B=e.top,j=e.bottom,fe=D+k,F=fe+v}else if(n==="y"){if(o==="center")D=A((e.left+e.right)/2);else if(Oi(o)){const $=Object.keys(o)[0],re=o[$];D=A(this.chart.scales[$].getPixelForValue(re))}ge=D-k,I=ge-v,K=e.left,N=e.right}const z=ci(i.ticks.maxTicksLimit,p),U=Math.max(1,Math.ceil(p/z));for(V=0;V<p;V+=U){const $=this.getContext(V),re=s.setContext($),Q=a.setContext($),_e=re.lineWidth,we=re.color,nt=Q.dash||[],ae=Q.dashOffset,H=re.tickWidth,Z=re.tickColor,me=re.tickBorderDash||[],pe=re.tickBorderDashOffset;Y=XQ(this,V,l),Y!==void 0&&(te=Xd(r,Y,_e),c?ge=I=K=N=te:fe=F=B=j=te,m.push({tx1:ge,ty1:fe,tx2:I,ty2:F,x1:K,y1:B,x2:N,y2:j,width:_e,color:we,borderDash:nt,borderDashOffset:ae,tickWidth:H,tickColor:Z,tickBorderDash:me,tickBorderDashOffset:pe}))}return this._ticksLength=p,this._borderValue=D,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:d,mirror:p}=s,v=fg(r.grid),m=v+d,x=p?-d:m,E=-bc(this.labelRotation),k=[];let A,D,V,Y,te,ge,fe,I,F,K,B,N,j="middle";if(i==="top")ge=this.bottom-x,fe=this._getXAxisLabelAlignment();else if(i==="bottom")ge=this.top+x,fe=this._getXAxisLabelAlignment();else if(i==="left"){const U=this._getYAxisLabelAlignment(v);fe=U.textAlign,te=U.x}else if(i==="right"){const U=this._getYAxisLabelAlignment(v);fe=U.textAlign,te=U.x}else if(n==="x"){if(i==="center")ge=(e.top+e.bottom)/2+m;else if(Oi(i)){const U=Object.keys(i)[0],$=i[U];ge=this.chart.scales[U].getPixelForValue($)+m}fe=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")te=(e.left+e.right)/2-m;else if(Oi(i)){const U=Object.keys(i)[0],$=i[U];te=this.chart.scales[U].getPixelForValue($)}fe=this._getYAxisLabelAlignment(v).textAlign}n==="y"&&(l==="start"?j="top":l==="end"&&(j="bottom"));const z=this._getLabelSizes();for(A=0,D=a.length;A<D;++A){V=a[A],Y=V.label;const U=s.setContext(this.getContext(A));I=this.getPixelForTick(A)+s.labelOffset,F=this._resolveTickFontOptions(A),K=F.lineHeight,B=Zs(Y)?Y.length:1;const $=B/2,re=U.color,Q=U.textStrokeColor,_e=U.textStrokeWidth;let we=fe;o?(te=I,fe==="inner"&&(A===D-1?we=this.options.reverse?"left":"right":A===0?we=this.options.reverse?"right":"left":we="center"),i==="top"?c==="near"||E!==0?N=-B*K+K/2:c==="center"?N=-z.highest.height/2-$*K+K:N=-z.highest.height+K/2:c==="near"||E!==0?N=K/2:c==="center"?N=z.highest.height/2-$*K:N=z.highest.height-B*K,p&&(N*=-1),E!==0&&!U.showLabelBackdrop&&(te+=K/2*Math.sin(E))):(ge=I,N=(1-B)*K/2);let nt;if(U.showLabelBackdrop){const ae=gl(U.backdropPadding),H=z.heights[A],Z=z.widths[A];let me=N-ae.top,pe=0-ae.left;switch(j){case"middle":me-=H/2;break;case"bottom":me-=H;break}switch(fe){case"center":pe-=Z/2;break;case"right":pe-=Z;break;case"inner":A===D-1?pe-=Z:A>0&&(pe-=Z/2);break}nt={left:pe,top:me,width:Z+ae.width,height:H+ae.height,color:U.backdropColor}}k.push({label:Y,font:F,textOffset:N,options:{rotation:E,color:re,strokeColor:Q,strokeWidth:_e,textAlign:we,textBaseline:j,translation:[te,ge],backdrop:nt}})}return k}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-bc(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,d;return n==="left"?i?(d=this.right+s,r==="near"?c="left":r==="center"?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-a,r==="near"?c="right":r==="center"?(c="center",d-=l/2):(c="left",d=this.left)):n==="right"?i?(d=this.left+s,r==="near"?c="right":r==="center"?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+a,r==="near"?c="left":r==="center"?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,d,p,v;this.isHorizontal()?(c=Xd(e,this.left,o)-o/2,d=Xd(e,this.right,a)+a/2,p=v=l):(p=Xd(e,this.top,o)-o/2,v=Xd(e,this.bottom,a)+a/2,c=d=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,p),n.lineTo(d,v),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Yy(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,d=o.textOffset;Lf(r,c,0,d,l,a)}i&&Ky(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=fa(r.font),o=gl(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Oi(n)?(l+=o.bottom,Zs(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:d,maxWidth:p,rotation:v}=nee(this,l,n,a);Lf(e,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:v,textAlign:tee(a,n,i),textBaseline:"middle",translation:[c,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=ci(e.grid&&e.grid.z,-1),i=ci(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Pf.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return fa(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class $0{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;see(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,ree(e,o,r),this.override&&Po.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Po[i]&&(delete Po[i][r],this.override&&delete xf[r])}}function ree(t,e,n){const r=_m(Object.create(null),[n?Po.get(n):{},Po.get(e),t.defaults]);Po.set(e,r),t.defaultRoutes&&iee(e,t.defaultRoutes),t.descriptors&&Po.describe(e,t.descriptors)}function iee(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Po.route(s,i,l,a)})}function see(t){return"id"in t&&"defaults"in t}class oee{constructor(){this.controllers=new $0(wc,"datasets",!0),this.elements=new $0($h,"elements"),this.plugins=new $0(Object,"plugins"),this.scales=new $0(Pf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):ds(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=J_(e);Ts(r["before"+i],[],r),n[e](r),Ts(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Vc=new oee;class aee{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(Ts(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Wi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=ci(r.options&&r.options.plugins,{}),s=lee(r);return i===!1&&!n?[]:cee(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function lee(t){const e={},n=[],r=Object.keys(Vc.plugins.items);for(let s=0;s<r.length;s++)n.push(Vc.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function uee(t,e){return!e&&t===!1?null:t===!0?{}:t}function cee(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=uee(r[l],i);c!==null&&s.push({plugin:a,options:hee(t.config,{plugin:a,local:n[l]},c,o)})}return s}function hee(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Gb(t,e){const n=Po.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function dee(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function fee(t,e){return t===e?"_index_":"_value_"}function F3(t){if(t==="x"||t==="y"||t==="r")return t}function pee(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function qb(t,...e){if(F3(t))return t;for(const n of e){const r=n.axis||pee(n.position)||t.length>1&&F3(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function j3(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function gee(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return j3(t,"x",n[0])||j3(t,"y",n[0])}return{}}function mee(t,e){const n=xf[t.type]||{scales:{}},r=e.scales||{},i=Gb(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Oi(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=qb(o,a,gee(o,t),Po.scales[a.type]),c=fee(l,i),d=n.scales||{};s[o]=Jg(Object.create(null),[{axis:l},a,d[l],d[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Gb(a,e),d=(xf[a]||{}).scales||{};Object.keys(d).forEach(p=>{const v=dee(p,l),m=o[v+"AxisID"]||v;s[m]=s[m]||Object.create(null),Jg(s[m],[{axis:v},r[m],d[p]])})}),Object.keys(s).forEach(o=>{const a=s[o];Jg(a,[Po.scales[a.type],Po.scale])}),s}function nM(t){const e=t.options||(t.options={});e.plugins=ci(e.plugins,{}),e.scales=mee(t,e)}function rM(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function vee(t){return t=t||{},t.data=rM(t.data),nM(t),t}const z3=new Map,iM=new Set;function V0(t,e){let n=z3.get(t);return n||(n=e(),z3.set(t,n),iM.add(n)),n}const pg=(t,e,n)=>{const r=Pd(e,n);r!==void 0&&t.add(r)};class yee{constructor(e){this._config=vee(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=rM(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),nM(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return V0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return V0(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return V0(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return V0(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(d=>{e&&(l.add(e),d.forEach(p=>pg(l,e,p))),d.forEach(p=>pg(l,i,p)),d.forEach(p=>pg(l,xf[s]||{},p)),d.forEach(p=>pg(l,Po,p)),d.forEach(p=>pg(l,Ub,p))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),iM.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,xf[n]||{},Po.datasets[n]||{},{type:n},Po,Ub]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=$3(this._resolverCache,e,i);let l=o;if(_ee(o,n)){s.$shared=!1,r=Md(r)?r():r;const c=this.createResolver(e,r,a);l=Np(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=$3(this._resolverCache,e,r);return Oi(n)?Np(s,n,void 0,i):s}}function $3(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:iw(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const bee=t=>Oi(t)&&Object.getOwnPropertyNames(t).some(e=>Md(t[e]));function _ee(t,e){const{isScriptable:n,isIndexable:r}=BP(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(Md(a)||bee(a))||o&&Zs(a))return!0}return!1}var wee="4.4.1";const xee=["top","bottom","left","right","chartArea"];function V3(t,e){return t==="top"||t==="bottom"||xee.indexOf(t)===-1&&e==="x"}function U3(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function H3(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ts(n&&n.onComplete,[t],e)}function Lee(t){const e=t.chart,n=e.options.animation;Ts(n&&n.onProgress,[t],e)}function sM(t){return aw()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const wv={},W3=t=>{const e=sM(t);return Object.values(wv).filter(n=>n.canvas===e).pop()};function See(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function Cee(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function U0(t,e,n){return t.options.clip?t[n]:e[n]}function Eee(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:U0(n,e,"left"),right:U0(n,e,"right"),top:U0(r,e,"top"),bottom:U0(r,e,"bottom")}:e}class Wc{static register(...e){Vc.add(...e),G3()}static unregister(...e){Vc.remove(...e),G3()}constructor(e,n){const r=this.config=new yee(n),i=sM(e),s=W3(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||UQ(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,d=l&&l.width;if(this.id=kX(),this.ctx=a,this.canvas=l,this.width=d,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new aee,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=WX(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],wv[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}wh.listen(this,"complete",H3),wh.listen(this,"progress",Lee),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return Wi(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Vc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():f3(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return c3(this.canvas,this.ctx),this}stop(){return wh.stop(this),this}resize(e,n){wh.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,f3(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ts(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ds(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=qb(o,a),c=l==="r",d=l==="x";return{options:a,dposition:c?"chartArea":d?"bottom":"left",dtype:c?"radialLinear":d?"category":"linear"}}))),ds(s,o=>{const a=o.options,l=a.id,c=qb(l,a),d=ci(a.type,o.dtype);(a.position===void 0||V3(a.position,c)!==V3(o.dposition))&&(a.position=o.dposition),i[l]=!0;let p=null;if(l in r&&r[l].type===d)p=r[l];else{const v=Vc.getScale(d);p=new v({id:l,type:d,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(a,e)}),ds(i,(o,a)=>{o||delete r[a]}),ds(r,o=>{pl.configure(this,o,o.options),pl.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(U3("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||Gb(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Vc.getController(a),{datasetElementType:c,dataElementType:d}=Po.datasets[a];Object.assign(l,{dataElementType:Vc.getElement(d),datasetElementType:c&&Vc.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ds(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,d=this.data.datasets.length;c<d;c++){const{controller:p}=this.getDatasetMeta(c),v=!i&&s.indexOf(p)===-1;p.buildOrUpdateElements(v),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||ds(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(U3("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ds(this.scales,e=>{pl.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!t3(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;See(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!t3(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;pl.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],ds(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Md(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(wh.has(this)?this.attached&&!wh.running(this)&&wh.start(this):(this.draw(),H3({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=Eee(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&Yy(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&Ky(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Dh(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=xQ.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Dd(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);wm(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),wh.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),c3(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete wv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};ds(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ds(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ds(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!ny(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(d=>!c.some(p=>d.datasetIndex===p.datasetIndex&&d.index===p.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=IX(e),c=Cee(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Ts(s.onHover,[e,a,this],this),l&&Ts(s.onClick,[e,a,this],this));const d=!ny(a,i);return(d||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,d}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}Ze(Wc,"defaults",Po),Ze(Wc,"instances",wv),Ze(Wc,"overrides",xf),Ze(Wc,"registry",Vc),Ze(Wc,"version",wee),Ze(Wc,"getChart",W3);function G3(){return ds(Wc.instances,t=>t._plugins.invalidate())}function Pee(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+Ho,r-Ho),t.closePath(),t.clip()}function Mee(t){return rw(t,["outerStart","outerEnd","innerStart","innerEnd"])}function kee(t,e,n,r){const i=Mee(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return Ea(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Ea(i.innerStart,0,o),innerEnd:Ea(i.innerEnd,0,o)}}function tp(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function ly(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:d}=e,p=Math.max(e.outerRadius+r+n-c,0),v=d>0?d+r+n+c:0;let m=0;const x=i-l;if(r){const U=d>0?d-r:0,$=p>0?p-r:0,re=(U+$)/2,Q=re!==0?x*re/(re+r):x;m=(x-Q)/2}const E=Math.max(.001,x*p-n/Fs)/p,k=(x-E)/2,A=l+k+m,D=i-k-m,{outerStart:V,outerEnd:Y,innerStart:te,innerEnd:ge}=kee(e,v,p,D-A),fe=p-V,I=p-Y,F=A+V/fe,K=D-Y/I,B=v+te,N=v+ge,j=A+te/B,z=D-ge/N;if(t.beginPath(),s){const U=(F+K)/2;if(t.arc(o,a,p,F,U),t.arc(o,a,p,U,K),Y>0){const _e=tp(I,K,o,a);t.arc(_e.x,_e.y,Y,K,D+Ho)}const $=tp(N,D,o,a);if(t.lineTo($.x,$.y),ge>0){const _e=tp(N,z,o,a);t.arc(_e.x,_e.y,ge,D+Ho,z+Math.PI)}const re=(D-ge/v+(A+te/v))/2;if(t.arc(o,a,v,D-ge/v,re,!0),t.arc(o,a,v,re,A+te/v,!0),te>0){const _e=tp(B,j,o,a);t.arc(_e.x,_e.y,te,j+Math.PI,A-Ho)}const Q=tp(fe,A,o,a);if(t.lineTo(Q.x,Q.y),V>0){const _e=tp(fe,F,o,a);t.arc(_e.x,_e.y,V,A-Ho,F)}}else{t.moveTo(o,a);const U=Math.cos(F)*p+o,$=Math.sin(F)*p+a;t.lineTo(U,$);const re=Math.cos(K)*p+o,Q=Math.sin(K)*p+a;t.lineTo(re,Q)}t.closePath()}function Aee(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){ly(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%Rs||Rs))}return ly(t,e,n,r,l,i),t.fill(),l}function Tee(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:d,borderDash:p,borderDashOffset:v}=l,m=l.borderAlign==="inner";if(!c)return;t.setLineDash(p||[]),t.lineDashOffset=v,m?(t.lineWidth=c*2,t.lineJoin=d||"round"):(t.lineWidth=c,t.lineJoin=d||"bevel");let x=e.endAngle;if(s){ly(t,e,n,r,x,i);for(let E=0;E<s;++E)t.stroke();isNaN(a)||(x=o+(a%Rs||Rs))}m&&Pee(t,e,x),s||(ly(t,e,n,r,x,i),t.stroke())}class Tg extends $h{constructor(n){super();Ze(this,"circumference");Ze(this,"endAngle");Ze(this,"fullCircles");Ze(this,"innerRadius");Ze(this,"outerRadius");Ze(this,"pixelMargin");Ze(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=EP(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:p,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),m=(this.options.spacing+this.options.borderWidth)/2,E=ci(v,c-l)>=Rs||xm(o,l,c),k=Ah(a,d+m,p+m);return E&&k}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:d}=this.options,p=(s+o)/2,v=(a+l+d+c)/2;return{x:r+Math.cos(p)*v,y:i+Math.sin(p)*v}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>Rs?Math.floor(i/Rs):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Fs,i||0)),d=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,Aee(n,this,d,o,a),Tee(n,this,d,o,a),n.restore()}}Ze(Tg,"id","arc"),Ze(Tg,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Ze(Tg,"defaultRoutes",{backgroundColor:"backgroundColor"}),Ze(Tg,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function oM(t,e,n=e){t.lineCap=ci(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ci(n.borderDash,e.borderDash)),t.lineDashOffset=ci(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ci(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ci(n.borderWidth,e.borderWidth),t.strokeStyle=ci(n.borderColor,e.borderColor)}function Dee(t,e,n){t.lineTo(n.x,n.y)}function Oee(t){return t.stepped?rJ:t.tension||t.cubicInterpolationMode==="monotone"?iJ:Dee}function aM(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),d=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!d?r+c-l:c-l}}function Nee(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=aM(i,n,r),d=Oee(s);let{move:p=!0,reverse:v}=r||{},m,x,E;for(m=0;m<=c;++m)x=i[(a+(v?c-m:m))%o],!x.skip&&(p?(t.moveTo(x.x,x.y),p=!1):d(t,E,x,v,s.stepped),E=x);return l&&(x=i[(a+(v?c:0))%o],d(t,E,x,v,s.stepped)),!!l}function Iee(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=aM(i,n,r),{move:l=!0,reverse:c}=r||{};let d=0,p=0,v,m,x,E,k,A;const D=Y=>(o+(c?a-Y:Y))%s,V=()=>{E!==k&&(t.lineTo(d,k),t.lineTo(d,E),t.lineTo(d,A))};for(l&&(m=i[D(0)],t.moveTo(m.x,m.y)),v=0;v<=a;++v){if(m=i[D(v)],m.skip)continue;const Y=m.x,te=m.y,ge=Y|0;ge===x?(te<E?E=te:te>k&&(k=te),d=(p*d+Y)/++p):(V(),t.lineTo(Y,te),x=ge,p=0,E=k=te),A=te}V()}function Yb(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?Iee:Nee}function Bee(t){return t.stepped?BJ:t.tension||t.cubicInterpolationMode==="monotone"?RJ:rf}function Ree(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),oM(t,e.options),t.stroke(i)}function Fee(t,e,n,r){const{segments:i,options:s}=e,o=Yb(e);for(const a of i)oM(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const jee=typeof Path2D=="function";function zee(t,e,n,r){jee&&!e.options.segment?Ree(t,e,n,r):Fee(t,e,n,r)}class gd extends $h{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;MJ(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=UJ(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=GP(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=Bee(r);let c,d;for(c=0,d=o.length;c<d;++c){const{start:p,end:v}=o[c],m=s[p],x=s[v];if(m===x){a.push(m);continue}const E=Math.abs((i-m[n])/(x[n]-m[n])),k=l(m,x,E,r.stepped);k[n]=e[n],a.push(k)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Yb(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=Yb(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),zee(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ze(gd,"id","line"),Ze(gd,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ze(gd,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ze(gd,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function q3(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class xv extends $h{constructor(n){super();Ze(this,"parsed");Ze(this,"skip");Ze(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return q3(this,n,"x",r)}inYRange(n,r){return q3(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!Dh(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Hb(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Ze(xv,"id","point"),Ze(xv,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ze(xv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function lM(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,d,p;return t.horizontal?(p=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-p,d=r+p):(p=s/2,a=n-p,l=n+p,c=Math.min(r,i),d=Math.max(r,i)),{left:a,top:c,right:l,bottom:d}}function md(t,e,n,r){return t?0:Ea(e,n,r)}function $ee(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=IP(r);return{t:md(i.top,s.top,0,n),r:md(i.right,s.right,0,e),b:md(i.bottom,s.bottom,0,n),l:md(i.left,s.left,0,e)}}function Vee(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=mf(i),o=Math.min(e,n),a=t.borderSkipped,l=r||Oi(i);return{topLeft:md(!l||a.top||a.left,s.topLeft,0,o),topRight:md(!l||a.top||a.right,s.topRight,0,o),bottomLeft:md(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:md(!l||a.bottom||a.right,s.bottomRight,0,o)}}function Uee(t){const e=lM(t),n=e.right-e.left,r=e.bottom-e.top,i=$ee(t,n/2,r/2),s=Vee(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function k2(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&lM(t,r);return a&&(i||Ah(e,a.left,a.right))&&(s||Ah(n,a.top,a.bottom))}function Hee(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function Wee(t,e){t.rect(e.x,e.y,e.w,e.h)}function A2(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class Lv extends $h{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=Uee(this),a=Hee(o.radius)?Lm:Wee;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,A2(o,n,s)),e.clip(),a(e,A2(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,A2(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return k2(this,e,n,r)}inXRange(e,n){return k2(this,e,null,n)}inYRange(e,n){return k2(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Ze(Lv,"id","bar"),Ze(Lv,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Ze(Lv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Gee=Object.freeze({__proto__:null,ArcElement:Tg,BarElement:Lv,LineElement:gd,PointElement:xv});const Kb=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Y3=Kb.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function uM(t){return Kb[t%Kb.length]}function cM(t){return Y3[t%Y3.length]}function qee(t,e){return t.borderColor=uM(e),t.backgroundColor=cM(e),++e}function Yee(t,e){return t.backgroundColor=t.data.map(()=>uM(e++)),e}function Kee(t,e){return t.backgroundColor=t.data.map(()=>cM(e++)),e}function Zee(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof uf?e=Yee(n,e):i instanceof nm?e=Kee(n,e):i&&(e=qee(n,e))}}function K3(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function Xee(t){return t&&(t.borderColor||t.backgroundColor)}var Jee={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i;if(!n.forceOverride&&(K3(r)||Xee(i)||s&&K3(s)))return;const o=Zee(t);r.forEach(o)}};function Qee(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let d=e,p,v,m,x,E;for(o[l++]=t[d],p=0;p<s-2;p++){let k=0,A=0,D;const V=Math.floor((p+1)*a)+1+e,Y=Math.min(Math.floor((p+2)*a)+1,n)+e,te=Y-V;for(D=V;D<Y;D++)k+=t[D].x,A+=t[D].y;k/=te,A/=te;const ge=Math.floor(p*a)+1+e,fe=Math.min(Math.floor((p+1)*a)+1,n)+e,{x:I,y:F}=t[d];for(m=x=-1,D=ge;D<fe;D++)x=.5*Math.abs((I-k)*(t[D].y-F)-(I-t[D].x)*(A-F)),x>m&&(m=x,v=t[D],E=D);o[l++]=v,d=E}return o[l++]=t[c],o}function ete(t,e,n,r){let i=0,s=0,o,a,l,c,d,p,v,m,x,E;const k=[],A=e+n-1,D=t[e].x,Y=t[A].x-D;for(o=e;o<e+n;++o){a=t[o],l=(a.x-D)/Y*r,c=a.y;const te=l|0;if(te===d)c<x?(x=c,p=o):c>E&&(E=c,v=o),i=(s*i+a.x)/++s;else{const ge=o-1;if(!Wi(p)&&!Wi(v)){const fe=Math.min(p,v),I=Math.max(p,v);fe!==m&&fe!==ge&&k.push({...t[fe],x:i}),I!==m&&I!==ge&&k.push({...t[I],x:i})}o>0&&ge!==m&&k.push(t[ge]),k.push(a),d=te,s=0,x=E=c,p=v=m=o}}return k}function hM(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Z3(t){t.data.datasets.forEach(e=>{hM(e)})}function tte(t,e){const n=e.length;let r=0,i;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=Ea(Th(e,s.axis,o).lo,0,n-1)),c?i=Ea(Th(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var nte={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){Z3(t);return}const r=t.width;t.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=t.getDatasetMeta(s),c=o||i.data;if(kg([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const d=t.scales[l.xAxisID];if(d.type!=="linear"&&d.type!=="time"||t.options.parsing)return;let{start:p,count:v}=tte(l,c);const m=n.threshold||4*r;if(v<=m){hM(i);return}Wi(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(E){this._data=E}}));let x;switch(n.algorithm){case"lttb":x=Qee(c,p,v,r,n);break;case"min-max":x=ete(c,p,v,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=x})},destroy(t){Z3(t)}};function rte(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=cw(l,c,i);const d=Zb(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:d,start:i[l],end:i[c]});continue}const p=GP(e,d);for(const v of p){const m=Zb(n,s[v.start],s[v.end],v.loop),x=WP(a,i,m);for(const E of x)o.push({source:E,target:v,start:{[n]:X3(d,m,"start",Math.max)},end:{[n]:X3(d,m,"end",Math.min)}})}}return o}function Zb(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=xu(i),s=xu(s)),{property:t,start:i,end:s}}function ite(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=cw(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function cw(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function X3(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function dM(t,e){let n=[],r=!1;return Zs(t)?(r=!0,n=t):n=ite(t,e),n.length?new gd({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function J3(t){return t&&t.fill!==!1}function ste(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Eo(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function ote(t,e,n){const r=cte(t);if(Oi(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Eo(i)&&Math.floor(i)===i?ate(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function ate(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function lte(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Oi(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function ute(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Oi(t)?r=t.value:r=e.getBaseValue(),r}function cte(t){const e=t.options,n=e.fill;let r=ci(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function hte(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=dte(e,n);a.push(dM({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let d=c.start;d<=c.end;d++)fte(i,o[d],a)}return new gd({points:i,options:{}})}function dte(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function fte(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=pte(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function pte(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const d=s[c],p=o[d.start][n],v=o[d.end][n];if(Ah(i,p,v)){a=i===p,l=i===v;break}}return{first:a,last:l,point:r}}class fM{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:Rs},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function gte(t){const{chart:e,fill:n,line:r}=t;if(Eo(n))return mte(e,n);if(n==="stack")return hte(t);if(n==="shape")return!0;const i=vte(t);return i instanceof fM?i:dM(i,r)}function mte(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function vte(t){return(t.scale||{}).getPointPositionForValue?bte(t):yte(t)}function yte(t){const{scale:e={},fill:n}=t,r=lte(n,e);if(Eo(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function bte(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=ute(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new fM({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function T2(t,e,n){const r=gte(e),{line:i,scale:s,axis:o}=e,a=i.options,l=a.fill,c=a.backgroundColor,{above:d=c,below:p=c}=l||{};r&&i.points.length&&(Yy(t,n),_te(t,{line:i,target:r,above:d,below:p,area:n,scale:s,axis:o}),Ky(t))}function _te(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==i&&(Q3(t,r,o.top),eL(t,{line:n,target:r,color:i,scale:a,property:l}),t.restore(),t.save(),Q3(t,r,o.bottom)),eL(t,{line:n,target:r,color:s,scale:a,property:l}),t.restore()}function Q3(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,d=i[l],p=i[cw(l,c,i)];s?(t.moveTo(d.x,d.y),s=!1):(t.lineTo(d.x,n),t.lineTo(d.x,d.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(p.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function eL(t,e){const{line:n,target:r,property:i,color:s,scale:o}=e,a=rte(n,r,i);for(const{source:l,target:c,start:d,end:p}of a){const{style:{backgroundColor:v=s}={}}=l,m=r!==!0;t.save(),t.fillStyle=v,wte(t,o,m&&Zb(i,d,p)),t.beginPath();const x=!!n.pathSegment(t,l);let E;if(m){x?t.closePath():tL(t,r,p,i);const k=!!r.pathSegment(t,c,{move:x,reverse:!0});E=x&&k,E||tL(t,r,d,i)}t.closePath(),t.fill(E?"evenodd":"nonzero"),t.restore()}}function wte(t,e,n){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,r,a-o,i-r),t.clip())}function tL(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var xte={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof gd&&(l={visible:t.isDatasetVisible(o),index:o,fill:ote(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=ste(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&T2(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;J3(s)&&T2(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!J3(r)||n.drawTime!=="beforeDatasetDraw"||T2(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const nL=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},Lte=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class rL extends $h{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ts(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=fa(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=nL(r,s);let c,d;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(o,s,a,l)+10):(d=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=i+a;let p=e;s.textAlign="left",s.textBaseline="middle";let v=-1,m=-d;return this.legendItems.forEach((x,E)=>{const k=r+n/2+s.measureText(x.text).width;(E===0||c[c.length-1]+k+2*a>o)&&(p+=d,c[c.length-(E>0?0:1)]=0,m+=d,v++),l[E]={left:0,top:m,row:v,width:k,height:i},c[c.length-1]+=k+a}),p}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=o-e;let p=a,v=0,m=0,x=0,E=0;return this.legendItems.forEach((k,A)=>{const{itemWidth:D,itemHeight:V}=Ste(r,n,s,k,i);A>0&&m+V+2*a>d&&(p+=v+a,c.push({width:v,height:m}),x+=v+a,E++,v=m=0),l[A]={left:x,top:m,col:E,width:D,height:V},v=Math.max(v,D),m+=V+a}),p+=v,c.push({width:v,height:m}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=Lp(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=al(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=al(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=al(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=al(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Yy(e,this),this._draw(),Ky(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Po.color,l=Lp(e.rtl,this.left,this.width),c=fa(o.font),{padding:d}=o,p=c.size,v=p/2;let m;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:x,boxHeight:E,itemHeight:k}=nL(o,p),A=function(ge,fe,I){if(isNaN(x)||x<=0||isNaN(E)||E<0)return;i.save();const F=ci(I.lineWidth,1);if(i.fillStyle=ci(I.fillStyle,a),i.lineCap=ci(I.lineCap,"butt"),i.lineDashOffset=ci(I.lineDashOffset,0),i.lineJoin=ci(I.lineJoin,"miter"),i.lineWidth=F,i.strokeStyle=ci(I.strokeStyle,a),i.setLineDash(ci(I.lineDash,[])),o.usePointStyle){const K={radius:E*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:F},B=l.xPlus(ge,x/2),N=fe+v;NP(i,K,B,N,o.pointStyleWidth&&x)}else{const K=fe+Math.max((p-E)/2,0),B=l.leftForLtr(ge,x),N=mf(I.borderRadius);i.beginPath(),Object.values(N).some(j=>j!==0)?Lm(i,{x:B,y:K,w:x,h:E,radius:N}):i.rect(B,K,x,E),i.fill(),F!==0&&i.stroke()}i.restore()},D=function(ge,fe,I){Lf(i,I.text,ge,fe+k/2,c,{strikethrough:I.hidden,textAlign:l.textAlign(I.textAlign)})},V=this.isHorizontal(),Y=this._computeTitleHeight();V?m={x:al(s,this.left+d,this.right-r[0]),y:this.top+d+Y,line:0}:m={x:this.left+d,y:al(s,this.top+Y+d,this.bottom-n[0].height),line:0},VP(this.ctx,e.textDirection);const te=k+d;this.legendItems.forEach((ge,fe)=>{i.strokeStyle=ge.fontColor,i.fillStyle=ge.fontColor;const I=i.measureText(ge.text).width,F=l.textAlign(ge.textAlign||(ge.textAlign=o.textAlign)),K=x+v+I;let B=m.x,N=m.y;l.setWidth(this.width),V?fe>0&&B+K+d>this.right&&(N=m.y+=te,m.line++,B=m.x=al(s,this.left+d,this.right-r[m.line])):fe>0&&N+te>this.bottom&&(B=m.x=B+n[m.line].width+d,m.line++,N=m.y=al(s,this.top+Y+d,this.bottom-n[m.line].height));const j=l.x(B);if(A(j,N,ge),B=GX(F,B+x+v,V?B+K:this.right,e.rtl),D(l.x(B),N,ge),V)m.x+=K+d;else if(typeof ge.text!="string"){const z=c.lineHeight;m.y+=pM(ge,z)+d}else m.y+=te}),UP(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=fa(n.font),i=gl(n.padding);if(!n.display)return;const s=Lp(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let d,p=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),d=this.top+c,p=al(e.align,p,this.right-v);else{const x=this.columnSizes.reduce((E,k)=>Math.max(E,k.height),0);d=c+al(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const m=al(a,p,p+v);o.textAlign=s.textAlign(tw(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Lf(o,n.text,m,d,r)}_computeTitleHeight(){const e=this.options.title,n=fa(e.font),r=gl(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(Ah(e,this.left,this.right)&&Ah(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Ah(e,i.left,i.left+i.width)&&Ah(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!Pte(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=Lte(i,r);i&&!s&&Ts(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Ts(n.onHover,[e,r,this],this)}else r&&Ts(n.onClick,[e,r,this],this)}}function Ste(t,e,n,r,i){const s=Cte(r,t,e,n),o=Ete(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function Cte(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function Ete(t,e,n){let r=t;return typeof e.text!="string"&&(r=pM(e,n)),r}function pM(t,e){const n=t.text?t.text.length:0;return e*n}function Pte(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Mte={id:"legend",_element:rL,start(t,e,n){const r=t.legend=new rL({ctx:t.ctx,options:n,chart:t});pl.configure(t,r,n),pl.addBox(t,r)},stop(t){pl.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;pl.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),d=gl(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class hw extends $h{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Zs(r.text)?r.text.length:1;this._padding=gl(r.padding);const s=i*fa(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,d,p;return this.isHorizontal()?(d=al(a,r,s),p=n+e,c=s-r):(o.position==="left"?(d=r+e,p=al(a,i,n),l=Fs*-.5):(d=s-e,p=al(a,n,i),l=Fs*.5),c=i-n),{titleX:d,titleY:p,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=fa(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Lf(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:tw(n.align),textBaseline:"middle",translation:[o,a]})}}function kte(t,e){const n=new hw({ctx:t.ctx,options:e,chart:t});pl.configure(t,n,e),pl.addBox(t,n),t.titleBlock=n}var Ate={id:"title",_element:hw,start(t,e,n){kte(t,n)},stop(t){const e=t.titleBlock;pl.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;pl.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const H0=new WeakMap;var Tte={id:"subtitle",start(t,e,n){const r=new hw({ctx:t.ctx,options:n,chart:t});pl.configure(t,r,n),pl.addBox(t,r),H0.set(t,r)},stop(t){pl.removeBox(t,H0.get(t)),H0.delete(t)},beforeUpdate(t,e,n){const r=H0.get(t);pl.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Dg={average(t){if(!t.length)return!1;let e,n,r=0,i=0,s=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();r+=a.x,i+=a.y,++s}}return{x:r/s,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),d=Vb(e,c);d<i&&(i=d,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function zc(t,e){return e&&(Zs(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function xh(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Dte(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function iL(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=fa(e.bodyFont),c=fa(e.titleFont),d=fa(e.footerFont),p=s.length,v=i.length,m=r.length,x=gl(e.padding);let E=x.height,k=0,A=r.reduce((Y,te)=>Y+te.before.length+te.lines.length+te.after.length,0);if(A+=t.beforeBody.length+t.afterBody.length,p&&(E+=p*c.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),A){const Y=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;E+=m*Y+(A-m)*l.lineHeight+(A-1)*e.bodySpacing}v&&(E+=e.footerMarginTop+v*d.lineHeight+(v-1)*e.footerSpacing);let D=0;const V=function(Y){k=Math.max(k,n.measureText(Y).width+D)};return n.save(),n.font=c.string,ds(t.title,V),n.font=l.string,ds(t.beforeBody.concat(t.afterBody),V),D=e.displayColors?o+2+e.boxPadding:0,ds(r,Y=>{ds(Y.before,V),ds(Y.lines,V),ds(Y.after,V)}),D=0,n.font=d.string,ds(t.footer,V),n.restore(),k+=x.width,{width:k,height:E}}function Ote(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function Nte(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function Ite(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),Nte(c,t,e,n)&&(c="center"),c}function sL(t,e,n){const r=n.yAlign||e.yAlign||Ote(t,n);return{xAlign:n.xAlign||e.xAlign||Ite(t,e,n,r),yAlign:r}}function Bte(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function Rte(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function oL(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:d,topRight:p,bottomLeft:v,bottomRight:m}=mf(o);let x=Bte(e,a);const E=Rte(e,l,c);return l==="center"?a==="left"?x+=c:a==="right"&&(x-=c):a==="left"?x-=Math.max(d,v)+i:a==="right"&&(x+=Math.max(p,m)+i),{x:Ea(x,0,r.width-e.width),y:Ea(E,0,r.height-e.height)}}function W0(t,e,n){const r=gl(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function aL(t){return zc([],xh(t))}function Fte(t,e,n){return Dd(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function lL(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const gM={beforeTitle:_h,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:_h,beforeBody:_h,beforeLabel:_h,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Wi(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:_h,afterBody:_h,beforeFooter:_h,footer:_h,afterFooter:_h};function Yl(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?gM[e].call(n,r):i}class Xb extends $h{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new qP(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=Fte(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Yl(r,"beforeTitle",this,e),s=Yl(r,"title",this,e),o=Yl(r,"afterTitle",this,e);let a=[];return a=zc(a,xh(i)),a=zc(a,xh(s)),a=zc(a,xh(o)),a}getBeforeBody(e,n){return aL(Yl(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return ds(e,s=>{const o={before:[],lines:[],after:[]},a=lL(r,s);zc(o.before,xh(Yl(a,"beforeLabel",this,s))),zc(o.lines,Yl(a,"label",this,s)),zc(o.after,xh(Yl(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return aL(Yl(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Yl(r,"beforeFooter",this,e),s=Yl(r,"footer",this,e),o=Yl(r,"afterFooter",this,e);let a=[];return a=zc(a,xh(i)),a=zc(a,xh(s)),a=zc(a,xh(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(Dte(this.chart,n[l]));return e.filter&&(a=a.filter((d,p,v)=>e.filter(d,p,v,r))),e.itemSort&&(a=a.sort((d,p)=>e.itemSort(d,p,r))),ds(a,d=>{const p=lL(e.callbacks,d);i.push(Yl(p,"labelColor",this,d)),s.push(Yl(p,"labelPointStyle",this,d)),o.push(Yl(p,"labelTextColor",this,d))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Dg[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=iL(this,r),c=Object.assign({},a,l),d=sL(this.chart,r,c),p=oL(r,c,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:d,bottomRight:p}=mf(a),{x:v,y:m}=e,{width:x,height:E}=n;let k,A,D,V,Y,te;return s==="center"?(Y=m+E/2,i==="left"?(k=v,A=k-o,V=Y+o,te=Y-o):(k=v+x,A=k+o,V=Y-o,te=Y+o),D=k):(i==="left"?A=v+Math.max(l,d)+o:i==="right"?A=v+x-Math.max(c,p)-o:A=this.caretX,s==="top"?(V=m,Y=V-o,k=A-o,D=A+o):(V=m+E,Y=V+o,k=A+o,D=A-o),te=V),{x1:k,x2:A,x3:D,y1:V,y2:Y,y3:te}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=Lp(r.rtl,this.x,this.width);for(e.x=W0(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=fa(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,d=fa(s.bodyFont),p=W0(this,"left",s),v=i.x(p),m=l<d.lineHeight?(d.lineHeight-l)/2:0,x=n.y+m;if(s.usePointStyle){const E={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},k=i.leftForLtr(v,c)+c/2,A=x+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Hb(e,E,k,A),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Hb(e,E,k,A)}else{e.lineWidth=Oi(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const E=i.leftForLtr(v,c),k=i.leftForLtr(i.xPlus(v,1),c-2),A=mf(o.borderRadius);Object.values(A).some(D=>D!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Lm(e,{x:E,y:x,w:c,h:l,radius:A}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Lm(e,{x:k,y:x+1,w:c-2,h:l-2,radius:A}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(E,x,c,l),e.strokeRect(E,x,c,l),e.fillStyle=o.backgroundColor,e.fillRect(k,x+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:d}=r,p=fa(r.bodyFont);let v=p.lineHeight,m=0;const x=Lp(r.rtl,this.x,this.width),E=function(I){n.fillText(I,x.x(e.x+m),e.y+v/2),e.y+=v+s},k=x.textAlign(o);let A,D,V,Y,te,ge,fe;for(n.textAlign=o,n.textBaseline="middle",n.font=p.string,e.x=W0(this,k,r),n.fillStyle=r.bodyColor,ds(this.beforeBody,E),m=a&&k!=="right"?o==="center"?c/2+d:c+2+d:0,Y=0,ge=i.length;Y<ge;++Y){for(A=i[Y],D=this.labelTextColors[Y],n.fillStyle=D,ds(A.before,E),V=A.lines,a&&V.length&&(this._drawColorBox(n,e,Y,x,r),v=Math.max(p.lineHeight,l)),te=0,fe=V.length;te<fe;++te)E(V[te]),v=p.lineHeight;ds(A.after,E)}m=0,v=p.lineHeight,ds(this.afterBody,E),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=Lp(r.rtl,this.x,this.width);for(e.x=W0(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=fa(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:d}=r,{topLeft:p,topRight:v,bottomLeft:m,bottomRight:x}=mf(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+p,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-v,l),n.quadraticCurveTo(a+c,l,a+c,l+v),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+d-x),n.quadraticCurveTo(a+c,l+d,a+c-x,l+d),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+m,l+d),n.quadraticCurveTo(a,l+d,a,l+d-m),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+p),n.quadraticCurveTo(a,l,a+p,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Dg[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=iL(this,e),l=Object.assign({},o,this._size),c=sL(n,e,l),d=oL(e,l,c,n);(i._to!==d.x||s._to!==d.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=gl(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),VP(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),UP(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!ny(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!ny(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Dg[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}Ze(Xb,"positioners",Dg);var jte={id:"tooltip",_element:Xb,positioners:Dg,afterInit(t,e,n){n&&(t.tooltip=new Xb({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:gM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},zte=Object.freeze({__proto__:null,Colors:Jee,Decimation:nte,Filler:xte,Legend:Mte,SubTitle:Tte,Title:Ate,Tooltip:jte});const $te=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Vte(t,e,n,r){const i=t.indexOf(e);if(i===-1)return $te(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const Ute=(t,e)=>t===null?null:Ea(Math.round(t),0,e);function uL(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Jb extends Pf{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Wi(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:Vte(r,e,ci(n,e),this._addedLabels),Ute(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return uL.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Ze(Jb,"id","category"),Ze(Jb,"defaults",{ticks:{callback:uL}});function Hte(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:d,maxDigits:p,includeBounds:v}=t,m=s||1,x=d-1,{min:E,max:k}=e,A=!Wi(o),D=!Wi(a),V=!Wi(c),Y=(k-E)/(p+1);let te=r3((k-E)/x/m)*m,ge,fe,I,F;if(te<1e-14&&!A&&!D)return[{value:E},{value:k}];F=Math.ceil(k/te)-Math.floor(E/te),F>x&&(te=r3(F*te/x/m)*m),Wi(l)||(ge=Math.pow(10,l),te=Math.ceil(te*ge)/ge),i==="ticks"?(fe=Math.floor(E/te)*te,I=Math.ceil(k/te)*te):(fe=E,I=k),A&&D&&s&&jX((a-o)/s,te/1e3)?(F=Math.round(Math.min((a-o)/te,d)),te=(a-o)/F,fe=o,I=a):V?(fe=A?o:fe,I=D?a:I,F=c-1,te=(I-fe)/F):(F=(I-fe)/te,Qg(F,Math.round(F),te/1e3)?F=Math.round(F):F=Math.ceil(F));const K=Math.max(i3(te),i3(fe));ge=Math.pow(10,Wi(l)?K:l),fe=Math.round(fe*ge)/ge,I=Math.round(I*ge)/ge;let B=0;for(A&&(v&&fe!==o?(n.push({value:o}),fe<o&&B++,Qg(Math.round((fe+B*te)*ge)/ge,o,cL(o,Y,t))&&B++):fe<o&&B++);B<F;++B){const N=Math.round((fe+B*te)*ge)/ge;if(D&&N>a)break;n.push({value:N})}return D&&v&&I!==a?n.length&&Qg(n[n.length-1].value,a,cL(a,Y,t))?n[n.length-1].value=a:n.push({value:a}):(!D||I===a)&&n.push({value:I}),n}function cL(t,e,{horizontal:n,minRotation:r}){const i=bc(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class uy extends Pf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Wi(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=Qc(i),c=Qc(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=Hte(i,s);return e.bounds==="ticks"&&CP(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Fm(e,this.chart.options.locale,this.options.ticks.format)}}class Qb extends uy{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Eo(e)?e:0,this.max=Eo(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=bc(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ze(Qb,"id","linear"),Ze(Qb,"defaults",{ticks:{callback:qy.formatters.numeric}});const Cm=t=>Math.floor(pd(t)),Qd=(t,e)=>Math.pow(10,Cm(t)+e);function hL(t){return t/Math.pow(10,Cm(t))===1}function dL(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function Wte(t,e){const n=e-t;let r=Cm(n);for(;dL(t,e,r)>10;)r++;for(;dL(t,e,r)<10;)r--;return Math.min(r,Cm(t))}function Gte(t,{min:e,max:n}){e=wu(t.min,e);const r=[],i=Cm(e);let s=Wte(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,d=Math.floor((e-l)/a/10)*a*10;let p=Math.floor((c-d)/Math.pow(10,s)),v=wu(t.min,Math.round((l+d+p*Math.pow(10,s))*o)/o);for(;v<n;)r.push({value:v,major:hL(v),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(s++,p=2,o=s>=0?1:o),v=Math.round((l+d+p*Math.pow(10,s))*o)/o;const m=wu(t.max,v);return r.push({value:m,major:hL(m),significand:p}),r}class e_ extends Pf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=uy.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return Eo(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Eo(e)?Math.max(0,e):null,this.max=Eo(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Eo(this._userMin)&&(this.min=e===Qd(this.min,0)?Qd(this.min,-1):Qd(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(Qd(r,-1)),o(Qd(i,1)))),r<=0&&s(Qd(i,-1)),i<=0&&o(Qd(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=Gte(n,this);return e.bounds==="ticks"&&CP(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":Fm(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=pd(e),this._valueRange=pd(this.max)-pd(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(pd(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}Ze(e_,"id","logarithmic"),Ze(e_,"defaults",{ticks:{callback:qy.formatters.logarithmic,major:{enabled:!0}}});function t_(t){const e=t.ticks;if(e.display&&t.display){const n=gl(e.backdropPadding);return ci(e.font&&e.font.size,Po.font.size)+n.height}return 0}function qte(t,e,n){return n=Zs(n)?n:[n],{w:nJ(t,e.string,n),h:n.length*e.lineHeight}}function fL(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function Yte(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Fs/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const d=t.getPointPosition(l,t.drawingArea+i[l],a),p=fa(c.font),v=qte(t.ctx,p,t._pointLabels[l]);r[l]=v;const m=xu(t.getIndexAngle(l)+a),x=Math.round(Q_(m)),E=fL(x,d.x,v.w,0,180),k=fL(x,d.y,v.h,90,270);Kte(n,e,m,E,k)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=Jte(t,r,i)}function Kte(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function Zte(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(Q_(xu(l.angle+Ho))),d=tne(l.y,a.h,c),p=Qte(c),v=ene(l.x,a.w,p);return{visible:!0,x:l.x,y:d,textAlign:p,left:v,top:d,right:v+a.w,bottom:d+a.h}}function Xte(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(Dh({x:n,y:r},e)||Dh({x:n,y:s},e)||Dh({x:i,y:r},e)||Dh({x:i,y:s},e))}function Jte(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:t_(s)/2,additionalAngle:o?Fs/i:0};let c;for(let d=0;d<i;d++){l.padding=n[d],l.size=e[d];const p=Zte(t,d,l);r.push(p),a==="auto"&&(p.visible=Xte(p,c),p.visible&&(c=p))}return r}function Qte(t){return t===0||t===180?"center":t<180?"left":"right"}function ene(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function tne(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function nne(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!Wi(a)){const l=mf(e.borderRadius),c=gl(e.backdropPadding);t.fillStyle=a;const d=r-c.left,p=i-c.top,v=s-r+c.width,m=o-i+c.height;Object.values(l).some(x=>x!==0)?(t.beginPath(),Lm(t,{x:d,y:p,w:v,h:m,radius:l}),t.fill()):t.fillRect(d,p,v,m)}}function rne(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));nne(n,o,s);const a=fa(o.font),{x:l,y:c,textAlign:d}=s;Lf(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:d,textBaseline:"middle"})}}function mM(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,Rs);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function ine(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),mM(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function sne(t,e,n){return Dd(t,{label:n,index:e,type:"pointLabel"})}class Og extends uy{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=gl(t_(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Eo(e)&&!isNaN(e)?e:0,this.max=Eo(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/t_(this.options))}generateTickLabels(e){uy.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=Ts(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?Yte(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=Rs/(this._pointLabels.length||1),r=this.options.startAngle||0;return xu(e*n+bc(r))}getDistanceFromCenterForValue(e){if(Wi(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(Wi(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return sne(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-Ho+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),mM(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&rne(this,o),i.display&&this.ticks.forEach((d,p)=>{if(p!==0){l=this.getDistanceFromCenterForValue(d.value);const v=this.getContext(p),m=i.setContext(v),x=s.setContext(v);ine(this,m,l,o,x)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const d=r.setContext(this.getPointLabelContext(a)),{color:p,lineWidth:v}=d;!v||!p||(e.lineWidth=v,e.strokeStyle=p,e.setLineDash(d.borderDash),e.lineDashOffset=d.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),d=fa(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=d.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const p=gl(c.backdropPadding);e.fillRect(-o/2-p.left,-s-d.size/2-p.top,o+p.width,d.size+p.height)}Lf(e,a.label,0,-s,d,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Ze(Og,"id","radialLinear"),Ze(Og,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:qy.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Ze(Og,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Ze(Og,"descriptors",{angleLines:{_fallback:"grid"}});const Jy={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ql=Object.keys(Jy);function pL(t,e){return t-e}function gL(t,e){if(Wi(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Eo(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Op(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function mL(t,e,n,r){const i=Ql.length;for(let s=Ql.indexOf(t);s<i-1;++s){const o=Jy[Ql[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Ql[s]}return Ql[i-1]}function one(t,e,n,r,i){for(let s=Ql.length-1;s>=Ql.indexOf(n);s--){const o=Ql[s];if(Jy[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return Ql[n?Ql.indexOf(n):0]}function ane(t){for(let e=Ql.indexOf(t)+1,n=Ql.length;e<n;++e)if(Jy[Ql[e]].common)return Ql[e]}function vL(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=ew(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function lne(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function yL(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:lne(t,r,i,n)}class Em extends Pf{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new ZP._date(e.adapters.date);i.init(n),Jg(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:gL(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Eo(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Eo(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=UX(i,s,o);return this._unit=n.unit||(r.autoSkip?mL(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):one(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:ane(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),yL(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Ea(n,0,o),r=Ea(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||mL(s.minUnit,n,r,this._getLabelCapacity(n)),a=ci(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Op(l)||l===!0,d={};let p=n,v,m;if(c&&(p=+e.startOf(p,"isoWeek",l)),p=+e.startOf(p,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const x=i.ticks.source==="data"&&this.getDataTimestamps();for(v=p,m=0;v<r;v=+e.add(v,a,o),m++)vL(d,v,x);return(v===r||i.bounds==="ticks"||m===1)&&vL(d,v,x),Object.keys(d).sort(pL).map(E=>+E)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return Ts(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,d=l&&a[l],p=c&&a[c],v=r[n],m=c&&p&&v&&v.major;return this._adapter.format(e,i||(m?p:d))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=bc(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,yL(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(gL(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return MP(e.sort(pL))}}Ze(Em,"id","time"),Ze(Em,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function G0(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Th(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Th(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class n_ extends Em{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=G0(n,this.min),this._tableRange=G0(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,d;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)d=i[o+1],l=i[o-1],c=i[o],Math.round((d+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(G0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return G0(this._table,r*this._tableRange+this._minPos,!0)}}Ze(n_,"id","timeseries"),Ze(n_,"defaults",Em.defaults);var une=Object.freeze({__proto__:null,CategoryScale:Jb,LinearScale:Qb,LogarithmicScale:e_,RadialLinearScale:Og,TimeScale:Em,TimeSeriesScale:n_});const cne=[vQ,Gee,zte,une];Wc.register(...cne);const vM=6048e5,hne=864e5,jm=6e4,zm=36e5,dne=1e3,bL=Symbol.for("constructDateFrom");function Mo(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&bL in t?t[bL](e):t instanceof Date?new t.constructor(e):new Date(e)}function Jr(t,e){return Mo(e||t,t)}function Qy(t,e,n){const r=Jr(t,n==null?void 0:n.in);return isNaN(e)?Mo((n==null?void 0:n.in)||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function dw(t,e,n){const r=Jr(t,n==null?void 0:n.in);if(isNaN(e))return Mo(t,NaN);if(!e)return r;const i=r.getDate(),s=Mo(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function fw(t,e,n){return Mo(t,+Jr(t)+e)}function fne(t,e,n){return fw(t,e*zm)}let pne={};function Mf(){return pne}function nh(t,e){var a,l,c,d;const n=Mf(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,i=Jr(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Bp(t,e){return nh(t,{...e,weekStartsOn:1})}function yM(t,e){const n=Jr(t,e==null?void 0:e.in),r=n.getFullYear(),i=Mo(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=Bp(i),o=Mo(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Bp(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function cy(t){const e=Jr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function kf(t,...e){const n=Mo.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function r_(t,e){const n=Jr(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function bM(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e),s=r_(r),o=r_(i),a=+s-cy(s),l=+o-cy(o);return Math.round((a-l)/hne)}function gne(t,e){const n=yM(t,e),r=Mo(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Bp(r)}function mne(t,e,n){const r=Jr(t,n==null?void 0:n.in);return r.setTime(r.getTime()+e*jm),r}function vne(t,e,n){return dw(t,e*3,n)}function yne(t,e,n){return fw(t,e*1e3)}function bne(t,e,n){return Qy(t,e*7,n)}function _ne(t,e,n){return dw(t,e*12,n)}function rm(t,e){const n=+Jr(t)-+Jr(e);return n<0?-1:n>0?1:n}function wne(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function _M(t){return!(!wne(t)&&typeof t!="number"||isNaN(+Jr(t)))}function xne(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function Lne(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e);return r.getFullYear()-i.getFullYear()}function wM(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e),s=_L(r,i),o=Math.abs(bM(r,i));r.setDate(r.getDate()-s*o);const a=+(_L(r,i)===-s),l=s*(o-a);return l===0?0:l}function _L(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function $m(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function Sne(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e),s=(+r-+i)/zm;return $m(n==null?void 0:n.roundingMethod)(s)}function pw(t,e){return+Jr(t)-+Jr(e)}function Cne(t,e,n){const r=pw(t,e)/jm;return $m(n==null?void 0:n.roundingMethod)(r)}function xM(t,e){const n=Jr(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function LM(t,e){const n=Jr(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Ene(t,e){const n=Jr(t,e==null?void 0:e.in);return+xM(n,e)==+LM(n,e)}function SM(t,e,n){const[r,i,s]=kf(n==null?void 0:n.in,t,t,e),o=rm(i,s),a=Math.abs(xne(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let l=rm(i,s)===-o;Ene(r)&&a===1&&rm(r,s)===1&&(l=!1);const c=o*(a-+l);return c===0?0:c}function Pne(t,e,n){const r=SM(t,e,n)/3;return $m(n==null?void 0:n.roundingMethod)(r)}function Mne(t,e,n){const r=pw(t,e)/1e3;return $m(n==null?void 0:n.roundingMethod)(r)}function kne(t,e,n){const r=wM(t,e,n)/7;return $m(n==null?void 0:n.roundingMethod)(r)}function Ane(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e),s=rm(r,i),o=Math.abs(Lne(r,i));r.setFullYear(1584),i.setFullYear(1584);const a=rm(r,i)===-s,l=s*(o-+a);return l===0?0:l}function Tne(t,e){const n=Jr(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3;return n.setMonth(i,1),n.setHours(0,0,0,0),n}function Dne(t,e){const n=Jr(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function One(t,e){const n=Jr(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function CM(t,e){const n=Jr(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Nne(t,e){const n=Jr(t,e==null?void 0:e.in);return n.setMinutes(59,59,999),n}function Ine(t,e){var a,l;const n=Mf(),r=n.weekStartsOn??((l=(a=n.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,i=Jr(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function Bne(t,e){const n=Jr(t,e==null?void 0:e.in);return n.setSeconds(59,999),n}function Rne(t,e){const n=Jr(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3+3;return n.setMonth(i,0),n.setHours(23,59,59,999),n}function Fne(t,e){const n=Jr(t,e==null?void 0:e.in);return n.setMilliseconds(999),n}const jne={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},zne=(t,e,n)=>{let r;const i=jne[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function D2(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const $ne={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Vne={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Une={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Hne={date:D2({formats:$ne,defaultWidth:"full"}),time:D2({formats:Vne,defaultWidth:"full"}),dateTime:D2({formats:Une,defaultWidth:"full"})},Wne={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Gne=(t,e,n,r)=>Wne[t];function gg(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const qne={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Yne={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Kne={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Zne={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Xne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Jne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Qne=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},ere={ordinalNumber:Qne,era:gg({values:qne,defaultWidth:"wide"}),quarter:gg({values:Yne,defaultWidth:"wide",argumentCallback:t=>t-1}),month:gg({values:Kne,defaultWidth:"wide"}),day:gg({values:Zne,defaultWidth:"wide"}),dayPeriod:gg({values:Xne,defaultWidth:"wide",formattingValues:Jne,defaultFormattingWidth:"wide"})};function mg(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?nre(a,p=>p.test(o)):tre(a,p=>p.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function tre(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function nre(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function rre(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const ire=/^(\d+)(th|st|nd|rd)?/i,sre=/\d+/i,ore={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},are={any:[/^b/i,/^(a|c)/i]},lre={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ure={any:[/1/i,/2/i,/3/i,/4/i]},cre={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},hre={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},dre={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},fre={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},pre={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},gre={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mre={ordinalNumber:rre({matchPattern:ire,parsePattern:sre,valueCallback:t=>parseInt(t,10)}),era:mg({matchPatterns:ore,defaultMatchWidth:"wide",parsePatterns:are,defaultParseWidth:"any"}),quarter:mg({matchPatterns:lre,defaultMatchWidth:"wide",parsePatterns:ure,defaultParseWidth:"any",valueCallback:t=>t+1}),month:mg({matchPatterns:cre,defaultMatchWidth:"wide",parsePatterns:hre,defaultParseWidth:"any"}),day:mg({matchPatterns:dre,defaultMatchWidth:"wide",parsePatterns:fre,defaultParseWidth:"any"}),dayPeriod:mg({matchPatterns:pre,defaultMatchWidth:"any",parsePatterns:gre,defaultParseWidth:"any"})},EM={code:"en-US",formatDistance:zne,formatLong:Hne,formatRelative:Gne,localize:ere,match:mre,options:{weekStartsOn:0,firstWeekContainsDate:1}};function vre(t,e){const n=Jr(t,e==null?void 0:e.in);return bM(n,CM(n))+1}function PM(t,e){const n=Jr(t,e==null?void 0:e.in),r=+Bp(n)-+gne(n);return Math.round(r/vM)+1}function gw(t,e){var d,p,v,m;const n=Jr(t,e==null?void 0:e.in),r=n.getFullYear(),i=Mf(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(v=i.locale)==null?void 0:v.options)==null?void 0:m.firstWeekContainsDate)??1,o=Mo((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=nh(o,e),l=Mo((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=nh(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function yre(t,e){var a,l,c,d;const n=Mf(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,i=gw(t,e),s=Mo((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),nh(s,e)}function MM(t,e){const n=Jr(t,e==null?void 0:e.in),r=+nh(n,e)-+yre(n,e);return Math.round(r/vM)+1}function hs(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ed={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return hs(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):hs(n+1,2)},d(t,e){return hs(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return hs(t.getHours()%12||12,e.length)},H(t,e){return hs(t.getHours(),e.length)},m(t,e){return hs(t.getMinutes(),e.length)},s(t,e){return hs(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return hs(i,e.length)}},np={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wL={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ed.y(t,e)},Y:function(t,e,n,r){const i=gw(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return hs(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):hs(s,e.length)},R:function(t,e){const n=yM(t);return hs(n,e.length)},u:function(t,e){const n=t.getFullYear();return hs(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return hs(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return hs(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ed.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return hs(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=MM(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):hs(i,e.length)},I:function(t,e,n){const r=PM(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):hs(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ed.d(t,e)},D:function(t,e,n){const r=vre(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):hs(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return hs(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return hs(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return hs(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=np.noon:r===0?i=np.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=np.evening:r>=12?i=np.afternoon:r>=4?i=np.morning:i=np.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ed.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ed.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):hs(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):hs(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ed.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ed.s(t,e)},S:function(t,e){return ed.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return LL(r);case"XXXX":case"XX":return sf(r);case"XXXXX":case"XXX":default:return sf(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return LL(r);case"xxxx":case"xx":return sf(r);case"xxxxx":case"xxx":default:return sf(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+xL(r,":");case"OOOO":default:return"GMT"+sf(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+xL(r,":");case"zzzz":default:return"GMT"+sf(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return hs(r,e.length)},T:function(t,e,n){return hs(+t,e.length)}};function xL(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+hs(s,2)}function LL(t,e){return t%60===0?(t>0?"-":"+")+hs(Math.abs(t)/60,2):sf(t,e)}function sf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=hs(Math.trunc(r/60),2),s=hs(r%60,2);return n+i+e+s}const SL=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},kM=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},bre=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return SL(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",SL(r,e)).replace("{{time}}",kM(i,e))},i_={p:kM,P:bre},_re=/^D+$/,wre=/^Y+$/,xre=["D","DD","YY","YYYY"];function AM(t){return _re.test(t)}function TM(t){return wre.test(t)}function s_(t,e,n){const r=Lre(t,e,n);if(console.warn(r),xre.includes(t))throw new RangeError(r)}function Lre(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Sre=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Cre=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ere=/^'([^]*?)'?$/,Pre=/''/g,Mre=/[a-zA-Z]/;function kre(t,e,n){var d,p,v,m,x,E,k,A;const r=Mf(),i=(n==null?void 0:n.locale)??r.locale??EM,s=(n==null?void 0:n.firstWeekContainsDate)??((p=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(v=r.locale)==null?void 0:v.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((E=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:E.weekStartsOn)??r.weekStartsOn??((A=(k=r.locale)==null?void 0:k.options)==null?void 0:A.weekStartsOn)??0,a=Jr(t,n==null?void 0:n.in);if(!_M(a))throw new RangeError("Invalid time value");let l=e.match(Cre).map(D=>{const V=D[0];if(V==="p"||V==="P"){const Y=i_[V];return Y(D,i.formatLong)}return D}).join("").match(Sre).map(D=>{if(D==="''")return{isToken:!1,value:"'"};const V=D[0];if(V==="'")return{isToken:!1,value:Are(D)};if(wL[V])return{isToken:!0,value:D};if(V.match(Mre))throw new RangeError("Format string contains an unescaped latin alphabet character `"+V+"`");return{isToken:!1,value:D}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(D=>{if(!D.isToken)return D.value;const V=D.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&TM(V)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&AM(V))&&s_(V,e,String(t));const Y=wL[V[0]];return Y(a,V,i.localize,c)}).join("")}function Are(t){const e=t.match(Ere);return e?e[1].replace(Pre,"'"):t}function Tre(){return Object.assign({},Mf())}function Dre(t,e){const n=Jr(t,e==null?void 0:e.in).getDay();return n===0?7:n}function Ore(t,e){const n=Nre(e)?new e(0):Mo(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function Nre(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const Ire=10;class DM{constructor(){Ze(this,"subPriority",0)}validate(e,n){return!0}}class Bre extends DM{constructor(e,n,r,i,s){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class Rre extends DM{constructor(n,r){super();Ze(this,"priority",Ire);Ze(this,"subPriority",-1);this.context=n||(i=>Mo(r,i))}set(n,r){return r.timestampIsSet?n:Mo(n,Ore(n,this.context))}}class is{run(e,n,r,i){const s=this.parse(e,n,r,i);return s?{setter:new Bre(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,n,r){return!0}}class Fre extends is{constructor(){super(...arguments);Ze(this,"priority",140);Ze(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,r,i){return r.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const Wo={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Gc={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Go(t,e){return t&&{value:e(t.value),rest:t.rest}}function fo(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function qc(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(i*zm+s*jm+o*dne),rest:e.slice(n[0].length)}}function OM(t){return fo(Wo.anyDigitsSigned,t)}function ko(t,e){switch(t){case 1:return fo(Wo.singleDigit,e);case 2:return fo(Wo.twoDigits,e);case 3:return fo(Wo.threeDigits,e);case 4:return fo(Wo.fourDigits,e);default:return fo(new RegExp("^\\d{1,"+t+"}"),e)}}function hy(t,e){switch(t){case 1:return fo(Wo.singleDigitSigned,e);case 2:return fo(Wo.twoDigitsSigned,e);case 3:return fo(Wo.threeDigitsSigned,e);case 4:return fo(Wo.fourDigitsSigned,e);default:return fo(new RegExp("^-?\\d{1,"+t+"}"),e)}}function mw(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function NM(t,e){const n=e>0,r=n?e:1-e;let i;if(r<=50)i=t||100;else{const s=r+50,o=Math.trunc(s/100)*100,a=t>=s%100;i=t+o-(a?100:0)}return n?i:1-i}function IM(t){return t%400===0||t%4===0&&t%100!==0}class jre extends is{constructor(){super(...arguments);Ze(this,"priority",130);Ze(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return Go(ko(4,n),s);case"yo":return Go(i.ordinalNumber(n,{unit:"year"}),s);default:return Go(ko(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i){const s=n.getFullYear();if(i.isTwoDigitYear){const a=NM(i.year,s);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class zre extends is{constructor(){super(...arguments);Ze(this,"priority",130);Ze(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Go(ko(4,n),s);case"Yo":return Go(i.ordinalNumber(n,{unit:"year"}),s);default:return Go(ko(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i,s){const o=gw(n,s);if(i.isTwoDigitYear){const l=NM(i.year,o);return n.setFullYear(l,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),nh(n,s)}const a=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(a,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),nh(n,s)}}class $re extends is{constructor(){super(...arguments);Ze(this,"priority",130);Ze(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return hy(r==="R"?4:r.length,n)}set(n,r,i){const s=Mo(n,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),Bp(s)}}class Vre extends is{constructor(){super(...arguments);Ze(this,"priority",130);Ze(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return hy(r==="u"?4:r.length,n)}set(n,r,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class Ure extends is{constructor(){super(...arguments);Ze(this,"priority",120);Ze(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"Q":case"QQ":return ko(r.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class Hre extends is{constructor(){super(...arguments);Ze(this,"priority",120);Ze(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"q":case"qq":return ko(r.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class Wre extends is{constructor(){super(...arguments);Ze(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Ze(this,"priority",110)}parse(n,r,i){const s=o=>o-1;switch(r){case"M":return Go(fo(Wo.month,n),s);case"MM":return Go(ko(2,n),s);case"Mo":return Go(i.ordinalNumber(n,{unit:"month"}),s);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class Gre extends is{constructor(){super(...arguments);Ze(this,"priority",110);Ze(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,i){const s=o=>o-1;switch(r){case"L":return Go(fo(Wo.month,n),s);case"LL":return Go(ko(2,n),s);case"Lo":return Go(i.ordinalNumber(n,{unit:"month"}),s);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function qre(t,e,n){const r=Jr(t,n==null?void 0:n.in),i=MM(r,n)-e;return r.setDate(r.getDate()-i*7),Jr(r,n==null?void 0:n.in)}class Yre extends is{constructor(){super(...arguments);Ze(this,"priority",100);Ze(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,i){switch(r){case"w":return fo(Wo.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return ko(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i,s){return nh(qre(n,i,s),s)}}function Kre(t,e,n){const r=Jr(t,n==null?void 0:n.in),i=PM(r,n)-e;return r.setDate(r.getDate()-i*7),r}class Zre extends is{constructor(){super(...arguments);Ze(this,"priority",100);Ze(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,i){switch(r){case"I":return fo(Wo.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return ko(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i){return Bp(Kre(n,i))}}const Xre=[31,28,31,30,31,30,31,31,30,31,30,31],Jre=[31,29,31,30,31,30,31,31,30,31,30,31];class Qre extends is{constructor(){super(...arguments);Ze(this,"priority",90);Ze(this,"subPriority",1);Ze(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"d":return fo(Wo.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return ko(r.length,n)}}validate(n,r){const i=n.getFullYear(),s=IM(i),o=n.getMonth();return s?r>=1&&r<=Jre[o]:r>=1&&r<=Xre[o]}set(n,r,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class eie extends is{constructor(){super(...arguments);Ze(this,"priority",90);Ze(this,"subpriority",1);Ze(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,i){switch(r){case"D":case"DD":return fo(Wo.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return ko(r.length,n)}}validate(n,r){const i=n.getFullYear();return IM(i)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function vw(t,e,n){var p,v,m,x;const r=Mf(),i=(n==null?void 0:n.weekStartsOn)??((v=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((x=(m=r.locale)==null?void 0:m.options)==null?void 0:x.weekStartsOn)??0,s=Jr(t,n==null?void 0:n.in),o=s.getDay(),l=(e%7+7)%7,c=7-i,d=e<0||e>6?e-(o+c)%7:(l+c)%7-(o+c)%7;return Qy(s,d,n)}class tie extends is{constructor(){super(...arguments);Ze(this,"priority",90);Ze(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=vw(n,i,s),n.setHours(0,0,0,0),n}}class nie extends is{constructor(){super(...arguments);Ze(this,"priority",90);Ze(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return Go(ko(r.length,n),o);case"eo":return Go(i.ordinalNumber(n,{unit:"day"}),o);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=vw(n,i,s),n.setHours(0,0,0,0),n}}class rie extends is{constructor(){super(...arguments);Ze(this,"priority",90);Ze(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return Go(ko(r.length,n),o);case"co":return Go(i.ordinalNumber(n,{unit:"day"}),o);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=vw(n,i,s),n.setHours(0,0,0,0),n}}function iie(t,e,n){const r=Jr(t,n==null?void 0:n.in),i=Dre(r,n),s=e-i;return Qy(r,s,n)}class sie extends is{constructor(){super(...arguments);Ze(this,"priority",90);Ze(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,i){const s=o=>o===0?7:o;switch(r){case"i":case"ii":return ko(r.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return Go(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiii":return Go(i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Go(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Go(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s)}}validate(n,r){return r>=1&&r<=7}set(n,r,i){return n=iie(n,i),n.setHours(0,0,0,0),n}}class oie extends is{constructor(){super(...arguments);Ze(this,"priority",80);Ze(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(mw(i),0,0,0),n}}class aie extends is{constructor(){super(...arguments);Ze(this,"priority",80);Ze(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(mw(i),0,0,0),n}}class lie extends is{constructor(){super(...arguments);Ze(this,"priority",80);Ze(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(mw(i),0,0,0),n}}class uie extends is{constructor(){super(...arguments);Ze(this,"priority",70);Ze(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,i){switch(r){case"h":return fo(Wo.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return ko(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,i){const s=n.getHours()>=12;return s&&i<12?n.setHours(i+12,0,0,0):!s&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class cie extends is{constructor(){super(...arguments);Ze(this,"priority",70);Ze(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,i){switch(r){case"H":return fo(Wo.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return ko(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,i){return n.setHours(i,0,0,0),n}}class hie extends is{constructor(){super(...arguments);Ze(this,"priority",70);Ze(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,i){switch(r){case"K":return fo(Wo.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return ko(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class die extends is{constructor(){super(...arguments);Ze(this,"priority",70);Ze(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,i){switch(r){case"k":return fo(Wo.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return ko(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,i){const s=i<=24?i%24:i;return n.setHours(s,0,0,0),n}}class fie extends is{constructor(){super(...arguments);Ze(this,"priority",60);Ze(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"m":return fo(Wo.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return ko(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setMinutes(i,0,0),n}}class pie extends is{constructor(){super(...arguments);Ze(this,"priority",50);Ze(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"s":return fo(Wo.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return ko(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setSeconds(i,0),n}}class gie extends is{constructor(){super(...arguments);Ze(this,"priority",30);Ze(this,"incompatibleTokens",["t","T"])}parse(n,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return Go(ko(r.length,n),i)}set(n,r,i){return n.setMilliseconds(i),n}}class mie extends is{constructor(){super(...arguments);Ze(this,"priority",10);Ze(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return qc(Gc.basicOptionalMinutes,n);case"XX":return qc(Gc.basic,n);case"XXXX":return qc(Gc.basicOptionalSeconds,n);case"XXXXX":return qc(Gc.extendedOptionalSeconds,n);case"XXX":default:return qc(Gc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:Mo(n,n.getTime()-cy(n)-i)}}class vie extends is{constructor(){super(...arguments);Ze(this,"priority",10);Ze(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return qc(Gc.basicOptionalMinutes,n);case"xx":return qc(Gc.basic,n);case"xxxx":return qc(Gc.basicOptionalSeconds,n);case"xxxxx":return qc(Gc.extendedOptionalSeconds,n);case"xxx":default:return qc(Gc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:Mo(n,n.getTime()-cy(n)-i)}}class yie extends is{constructor(){super(...arguments);Ze(this,"priority",40);Ze(this,"incompatibleTokens","*")}parse(n){return OM(n)}set(n,r,i){return[Mo(n,i*1e3),{timestampIsSet:!0}]}}class bie extends is{constructor(){super(...arguments);Ze(this,"priority",20);Ze(this,"incompatibleTokens","*")}parse(n){return OM(n)}set(n,r,i){return[Mo(n,i),{timestampIsSet:!0}]}}const _ie={G:new Fre,y:new jre,Y:new zre,R:new $re,u:new Vre,Q:new Ure,q:new Hre,M:new Wre,L:new Gre,w:new Yre,I:new Zre,d:new Qre,D:new eie,E:new tie,e:new nie,c:new rie,i:new sie,a:new oie,b:new aie,B:new lie,h:new uie,H:new cie,K:new hie,k:new die,m:new fie,s:new pie,S:new gie,X:new mie,x:new vie,t:new yie,T:new bie},wie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,xie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Lie=/^'([^]*?)'?$/,Sie=/''/g,Cie=/\S/,Eie=/[a-zA-Z]/;function Pie(t,e,n,r){var k,A,D,V,Y,te,ge,fe;const i=()=>Mo((r==null?void 0:r.in)||n,NaN),s=Tre(),o=(r==null?void 0:r.locale)??s.locale??EM,a=(r==null?void 0:r.firstWeekContainsDate)??((A=(k=r==null?void 0:r.locale)==null?void 0:k.options)==null?void 0:A.firstWeekContainsDate)??s.firstWeekContainsDate??((V=(D=s.locale)==null?void 0:D.options)==null?void 0:V.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((te=(Y=r==null?void 0:r.locale)==null?void 0:Y.options)==null?void 0:te.weekStartsOn)??s.weekStartsOn??((fe=(ge=s.locale)==null?void 0:ge.options)==null?void 0:fe.weekStartsOn)??0;if(!e)return t?i():Jr(n,r==null?void 0:r.in);const c={firstWeekContainsDate:a,weekStartsOn:l,locale:o},d=[new Rre(r==null?void 0:r.in,n)],p=e.match(xie).map(I=>{const F=I[0];if(F in i_){const K=i_[F];return K(I,o.formatLong)}return I}).join("").match(wie),v=[];for(let I of p){!(r!=null&&r.useAdditionalWeekYearTokens)&&TM(I)&&s_(I,e,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&AM(I)&&s_(I,e,t);const F=I[0],K=_ie[F];if(K){const{incompatibleTokens:B}=K;if(Array.isArray(B)){const j=v.find(z=>B.includes(z.token)||z.token===F);if(j)throw new RangeError(`The format string mustn't contain \`${j.fullToken}\` and \`${I}\` at the same time`)}else if(K.incompatibleTokens==="*"&&v.length>0)throw new RangeError(`The format string mustn't contain \`${I}\` and any other token at the same time`);v.push({token:F,fullToken:I});const N=K.run(t,I,o.match,c);if(!N)return i();d.push(N.setter),t=N.rest}else{if(F.match(Eie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+F+"`");if(I==="''"?I="'":F==="'"&&(I=Mie(I)),t.indexOf(I)===0)t=t.slice(I.length);else return i()}}if(t.length>0&&Cie.test(t))return i();const m=d.map(I=>I.priority).sort((I,F)=>F-I).filter((I,F,K)=>K.indexOf(I)===F).map(I=>d.filter(F=>F.priority===I).sort((F,K)=>K.subPriority-F.subPriority)).map(I=>I[0]);let x=Jr(n,r==null?void 0:r.in);if(isNaN(+x))return i();const E={};for(const I of m){if(!I.validate(x,c))return i();const F=I.set(x,E,c);Array.isArray(F)?(x=F[0],Object.assign(E,F[1])):x=F}return x}function Mie(t){return t.match(Lie)[1].replace(Sie,"'")}function kie(t,e){const n=Jr(t,e==null?void 0:e.in);return n.setMinutes(0,0,0),n}function Aie(t,e){const n=Jr(t,e==null?void 0:e.in);return n.setSeconds(0,0),n}function Tie(t,e){const n=Jr(t,e==null?void 0:e.in);return n.setMilliseconds(0),n}function Die(t,e){const n=()=>Mo(e==null?void 0:e.in,NaN),r=(e==null?void 0:e.additionalDigits)??2,i=Bie(t);let s;if(i.date){const c=Rie(i.date,r);s=Fie(c.restDateString,c.year)}if(!s||isNaN(+s))return n();const o=+s;let a=0,l;if(i.time&&(a=jie(i.time),isNaN(a)))return n();if(i.timezone){if(l=zie(i.timezone),isNaN(l))return n()}else{const c=new Date(o+a),d=Jr(0,e==null?void 0:e.in);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return Jr(o+a+l,e==null?void 0:e.in)}const q0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Oie=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Nie=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Iie=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Bie(t){const e={},n=t.split(q0.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],q0.timeZoneDelimiter.test(e.date)&&(e.date=t.split(q0.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=q0.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function Rie(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function Fie(t,e){if(e===null)return new Date(NaN);const n=t.match(Oie);if(!n)return new Date(NaN);const r=!!n[4],i=vg(n[1]),s=vg(n[2])-1,o=vg(n[3]),a=vg(n[4]),l=vg(n[5])-1;if(r)return Wie(e,a,l)?$ie(e,a,l):new Date(NaN);{const c=new Date(0);return!Uie(e,s,o)||!Hie(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function vg(t){return t?parseInt(t):1}function jie(t){const e=t.match(Nie);if(!e)return NaN;const n=O2(e[1]),r=O2(e[2]),i=O2(e[3]);return Gie(n,r,i)?n*zm+r*jm+i*1e3:NaN}function O2(t){return t&&parseFloat(t.replace(",","."))||0}function zie(t){if(t==="Z")return 0;const e=t.match(Iie);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return qie(r,i)?n*(r*zm+i*jm):NaN}function $ie(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const Vie=[31,null,31,30,31,30,31,31,30,31,30,31];function BM(t){return t%400===0||t%4===0&&t%100!==0}function Uie(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(Vie[e]||(BM(t)?29:28))}function Hie(t,e){return e>=1&&e<=(BM(t)?366:365)}function Wie(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function Gie(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function qie(t,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const Yie={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};ZP._date.override({_id:"date-fns",formats:function(){return Yie},parse:function(t,e){if(t===null||typeof t>"u")return null;const n=typeof t;return n==="number"||t instanceof Date?t=Jr(t):n==="string"&&(typeof e=="string"?t=Pie(t,e,new Date,this.options):t=Die(t,this.options)),_M(t)?t.getTime():null},format:function(t,e){return kre(t,e,this.options)},add:function(t,e,n){switch(n){case"millisecond":return fw(t,e);case"second":return yne(t,e);case"minute":return mne(t,e);case"hour":return fne(t,e);case"day":return Qy(t,e);case"week":return bne(t,e);case"month":return dw(t,e);case"quarter":return vne(t,e);case"year":return _ne(t,e);default:return t}},diff:function(t,e,n){switch(n){case"millisecond":return pw(t,e);case"second":return Mne(t,e);case"minute":return Cne(t,e);case"hour":return Sne(t,e);case"day":return wM(t,e);case"week":return kne(t,e);case"month":return SM(t,e);case"quarter":return Pne(t,e);case"year":return Ane(t,e);default:return 0}},startOf:function(t,e,n){switch(e){case"second":return Tie(t);case"minute":return Aie(t);case"hour":return kie(t);case"day":return r_(t);case"week":return nh(t);case"isoWeek":return nh(t,{weekStartsOn:+n});case"month":return Dne(t);case"quarter":return Tne(t);case"year":return CM(t);default:return t}},endOf:function(t,e){switch(e){case"second":return Fne(t);case"minute":return Bne(t);case"hour":return Nne(t);case"day":return xM(t);case"week":return Ine(t);case"month":return LM(t);case"quarter":return Rne(t);case"year":return One(t);default:return t}}});const Kie={class:"container mx-auto px-4 py-8"},Zie={class:"mb-8"},Xie={key:0,class:"mb-6"},Jie={class:"flex gap-4"},Qie=["disabled"],ese={key:0,value:""},tse=["value"],nse={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},rse={class:"flex"},ise={class:"ml-3"},sse={class:"text-sm font-medium text-red-800"},ose={class:"mb-6"},ase={class:"flex gap-4"},lse=["disabled"],use={key:0,value:""},cse={key:1,value:""},hse=["value"],dse=["disabled"],fse={key:0,class:"mt-4 bg-white rounded-lg shadow-md p-4"},pse={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},gse={class:"font-medium"},mse={class:"font-medium"},vse={class:"font-medium"},yse={class:"font-medium"},bse={class:"font-medium"},_se={class:"font-medium"},wse={class:"md:col-span-2 lg:col-span-3 flex items-center"},xse=["href"],Lse={class:"mb-6"},Sse={class:"border-b border-gray-200"},Cse={class:"-mb-px flex space-x-8","aria-label":"Tabs"},Ese=["onClick"],Pse={key:2,class:"mb-8"},Mse={class:"text-sm text-gray-600 mb-4"},kse={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ase={class:"bg-white rounded-lg shadow-md p-6"},Tse={class:"text-4xl font-bold text-primary-600 mb-2"},Dse={class:"text-sm text-gray-600"},Ose={class:"bg-white rounded-lg shadow-md p-6"},Nse={class:"text-4xl font-bold text-primary-600 mb-2"},Ise={class:"mt-4"},Bse={class:"w-full bg-gray-200 rounded-full h-2.5"},Rse={class:"bg-white rounded-lg shadow-md p-6"},Fse={class:"text-4xl font-bold text-primary-600 mb-2"},jse={class:"text-sm text-gray-600"},zse={class:"bg-white rounded-lg shadow-md p-6"},$se={class:"text-4xl font-bold text-primary-600 mb-2"},Vse={class:"text-sm text-gray-600"},Use={class:"bg-white rounded-lg shadow-md p-6"},Hse={class:"text-4xl font-bold text-primary-600 mb-2"},Wse={class:"text-sm text-gray-600"},Gse={class:"bg-white rounded-lg shadow-md p-6"},qse={class:"text-4xl font-bold text-primary-600 mb-2"},Yse={class:"text-sm text-gray-600"},Kse={key:3,class:"mb-8"},Zse={class:"flex justify-between items-center mb-4"},Xse={class:"flex items-center gap-4"},Jse={key:0,class:"text-sm text-gray-600"},Qse=["disabled"],eoe={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},toe={key:0,class:"md:col-span-2 grid grid-cols-2 gap-4"},noe=["value"],roe={key:0,class:"mt-1 text-sm text-red-600"},ioe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},soe={class:"bg-white rounded-lg shadow-md p-6"},ooe={class:"chart-container"},aoe={class:"bg-white rounded-lg shadow-md p-6"},loe={class:"chart-container"},uoe={class:"bg-white rounded-lg shadow-md p-6"},coe={class:"chart-container"},hoe={class:"bg-white rounded-lg shadow-md p-6"},doe={class:"chart-container"},foe={class:"bg-white rounded-lg shadow-md p-6"},poe={class:"chart-container"},goe={class:"bg-white rounded-lg shadow-md p-6"},moe={class:"chart-container"},voe=js({__name:"MeteoView",setup(t){const e=ru(),n=pa(),r=Ct({}),i=Ct(new Date),s=Ct(""),o=Ct([]),a=Ct(""),l=Ct([]),c=Ct(null),d=Ct(""),p=Ct(""),v=Jn(()=>n.isAdmin);let m=null;const x=Jn(()=>!a.value||!o.value.length?null:o.value.find(ee=>ee.mac===a.value));function E(ee){return ee?ee.latitude&&ee.longitude&&ee.latitude!==0&&ee.longitude!==0:!1}function k(ee){return E(ee)?`${ee.latitude.toFixed(6)}, ${ee.longitude.toFixed(6)}`:""}function A(ee){if(!E(ee))return"#";const se=ee.latitude,le=ee.longitude,ze=encodeURIComponent(ee.name||"Station météo");return`https://www.google.com/maps/search/?api=1&query=${se},${le}&query_place_id=${ze}`}async function D(){try{d.value="";const ee={};v.value&&c.value&&(ee.entreprise=c.value),console.log("[fetchDevices] Appel API avec params:",ee);const se=await W1.getDevices(ee);console.log("[fetchDevices] Réponse API:",se.data);let le;if(se.data&&se.data.devices)le=se.data.devices;else if(Array.isArray(se.data))le=se.data;else if(le=[],typeof se.data=="object"&&se.data!==null){for(const ze in se.data)if(Array.isArray(se.data[ze])){le=se.data[ze];break}}o.value=le.map(ze=>{var Se,ve;return{id:ze.id,name:ze.name||`Station ${ze.mac}`,mac:ze.mac,model:((Se=ze.stationtype)==null?void 0:Se.split("_")[0])||"Inconnu",firmware_version:(ve=ze.stationtype)!=null&&ve.includes("_V")?ze.stationtype.split("_V")[1]:"1.0",timezone:ze.date_zone_id||"UTC",created_at:ze.createtime?new Date(ze.createtime*1e3).toISOString():new Date().toISOString(),latitude:ze.latitude||0,longitude:ze.longitude||0}}),console.log("[fetchDevices] Appareils normalisés:",o.value),o.value.length>0?(a.value=o.value[0].mac,await V()):console.warn("[fetchDevices] Aucun appareil disponible")}catch(ee){console.error("[fetchDevices] Erreur lors de la récupération des appareils:",ee),ee.response&&ee.response.data&&ee.response.data.error?d.value=ee.response.data.error:(d.value="Erreur lors de la récupération des stations météo",e.error("Erreur lors de la récupération des stations météo")),o.value=[],a.value="",r.value={}}}async function V(){if(a.value)try{d.value="";const ee={mac:a.value};v.value&&c.value&&(ee.entreprise=c.value),console.log("[fetchWeatherData] Appel API avec params:",ee);const se=await W1.getRealTimeData(ee);console.log("[fetchWeatherData] Réponse API:",se.data),console.log("[fetchWeatherData] Structure de la réponse:",{hasData:se.data&&"data"in se.data,hasCode:se.data&&"code"in se.data,topLevelKeys:se.data?Object.keys(se.data):[]});let le;se.data&&"data"in se.data?le=se.data.data:se.data&&("outdoor"in se.data||"indoor"in se.data)?le=se.data:(le={},console.warn("[fetchWeatherData] Format de réponse non reconnu")),r.value=le,i.value=new Date,console.log("[fetchWeatherData] Données météo extraites:",r.value)}catch(ee){console.error("[fetchWeatherData] Erreur:",ee),ee.response&&ee.response.data&&ee.response.data.error?d.value=ee.response.data.error:(d.value="Erreur lors de la récupération des données météo",e.error("Erreur lors de la récupération des données météo")),r.value={}}}function Y(ee){if(ee==null)return"0";const se=typeof ee=="string"?parseFloat(ee):ee;return isNaN(se)?"0":((se-32)*5/9).toFixed(1)}function te(ee){if(ee==null)return"0";const se=typeof ee=="string"?parseFloat(ee):ee;return isNaN(se)?"0":(se*1.60934).toFixed(1)}function ge(ee){if(ee==null)return"0";const se=typeof ee=="string"?parseFloat(ee):ee;return isNaN(se)?"0":(se*25.4).toFixed(1)}function fe(ee){if(ee==null)return"0";const se=typeof ee=="string"?parseFloat(ee):ee;return isNaN(se)?"0":(se*33.8639).toFixed(1)}function I(ee){if(!ee)return"N/A";const se=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSO","SO","OSO","O","ONO","NO","NNO"],le=Math.round(ee/22.5)%16;return se[le]}function F(ee){return ee?ee>0?"En hausse":"En baisse":"Stable"}async function K(){if(v.value)try{const ee=await kl.getUsers({role:"ENTREPRISE"});l.value=ee.data,l.value.length>0&&!c.value&&(c.value=l.value[0].id)}catch(ee){console.error("Erreur lors de la récupération des entreprises:",ee),e.error("Erreur lors de la récupération des entreprises")}}async function B(){try{o.value=[],a.value="",r.value={},d.value="",Object.values(de).forEach(ee=>{try{ee.destroy()}catch(se){console.error("Erreur lors de la destruction d'un graphique:",se)}}),de={},await D()}catch(ee){console.error("Erreur lors de la récupération des appareils avec l'entreprise:",ee),e.error("Erreur lors du changement d'entreprise")}}const N=[{id:"realtime",name:"Temps réel"},{id:"history",name:"Historique"}],j=Ct("realtime"),z=Ct("today"),U=Ct("5min"),$=Ct(""),re=Ct(""),Q=()=>{const ee=new Date,se=new Date(ee);se.setDate(ee.getDate()-1),$.value=se.toISOString().split("T")[0],re.value=se.toISOString().split("T")[0]},_e=[{value:"5min",label:"5 minutes",maxDays:1,maxPastDays:90},{value:"30min",label:"30 minutes",maxDays:7,maxPastDays:365},{value:"4hour",label:"4 heures",maxDays:31,maxPastDays:730},{value:"1day",label:"1 jour",maxDays:365,maxPastDays:1460}],we=Jn(()=>{const ee=X(),se=new Date(ee.start),le=new Date(ee.end);le.setHours(23,59,59,999);const ze=Math.abs(le.getTime()-se.getTime()),Se=Math.ceil(ze/(1e3*60*60*24)),$e=Math.abs(new Date().getTime()-se.getTime()),Ge=Math.ceil($e/(1e3*60*60*24));return _e.filter(Xe=>Se<=Xe.maxDays&&Ge<=Xe.maxPastDays)});Di(z,ee=>{ee==="custom"&&Q(),!we.value.some(le=>le.value===U.value)&&we.value.length>0&&(U.value=we.value[0].value)}),Di([$,re],()=>{z.value==="custom"&&!we.value.some(se=>se.value===U.value)&&we.value.length>0&&(U.value=we.value[0].value)});const nt=Ct(null),ae=Ct(null),H=Ct(null),Z=Ct(null),me=Ct(null),pe=Ct(null);let de={};const X=()=>{let ee=new Date,se=new Date;switch(z.value){case"today":ee.setHours(0,0,0,0);break;case"yesterday":ee.setDate(ee.getDate()-1),ee.setHours(0,0,0,0),se.setDate(se.getDate()-1),se.setHours(23,59,59,999);break;case"week":ee.setDate(ee.getDate()-7);break;case"month":ee.setDate(ee.getDate()-30);break;case"custom":ee=new Date($.value),se=new Date(re.value);break}return{start:ee.toISOString().split("T")[0],end:se.toISOString().split("T")[0]}},J=async()=>{try{if(De.value){console.log("[updateAllCharts] Mise à jour déjà en cours, annulation");return}if(De.value=!0,we.value.length===0){e.warning("Aucun intervalle disponible pour cette période"),De.value=!1;return}we.value.some(ze=>ze.value===U.value)||(U.value=we.value[0].value),console.log("[updateAllCharts] Début de la mise à jour des graphiques");const se=X(),le={mac:a.value,start_date:se.start,end_date:se.end,cycle_type:U.value};v.value&&c.value&&(le.entreprise=c.value),console.log("[updateAllCharts] Récupération des données historiques:",le);try{const Se=(await W1.getHistoryData(le)).data;console.log("[updateAllCharts] Données historiques reçues:",Se);const ve=[{type:"temp",ref:nt},{type:"humidity",ref:ae},{type:"pressure",ref:H},{type:"wind",ref:Z},{type:"rain",ref:me},{type:"solar",ref:pe}];for(const $e of ve)if(console.log(`[updateAllCharts] Mise à jour du graphique ${$e.type}`),$e.ref.value){const Ge=he(Se,$e.type);Te($e.type,$e.ref.value,Ge)}s.value=new Date().toLocaleString()}catch(ze){console.error("[updateAllCharts] Erreur lors de la récupération des données:",ze),e.error("Erreur lors de la récupération des données historiques")}finally{De.value=!1}}catch(ee){console.error("[updateAllCharts] Erreur lors de la mise à jour des graphiques:",ee),e.error("Erreur lors de la mise à jour des graphiques"),De.value=!1}},De=Ct(!1),Te=(ee,se,le)=>{try{if(de[ee]&&(de[ee].destroy(),delete de[ee]),console.log(`[updateChart] Données reçues pour ${ee}:`,le),!le.datasets||!le.datasets.length){console.warn(`[updateChart] Pas de datasets pour ${ee}`),de[ee]=new Wc(se,{type:"line",data:{labels:[],datasets:[]},options:{plugins:{title:{display:!0,text:"Aucune donnée disponible"}}}});return}let ze="hour";U.value==="5min"||U.value==="30min"?ze="hour":(U.value==="4hour"||U.value==="1day")&&(ze="day");const Se=X(),ve=new Date(Se.start),$e=new Date(Se.end);$e.setHours(23,59,59,999);const Ge={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{title:function(Xe){return Xe.length>0?new Date(Xe[0].parsed.x).toLocaleString():""}}}},scales:{x:{type:"time",time:{unit:ze,displayFormats:{hour:"HH:mm",day:"dd/MM",week:"dd/MM",month:"MM/yyyy"}},min:ve.getTime(),max:$e.getTime(),title:{display:!0,text:"Date/Heure"}},y:{beginAtZero:!0,title:{display:!0,text:Je(ee)},ticks:{callback:function(Xe){const lt=typeof Xe=="string"?parseFloat(Xe):Xe;switch(ee){case"temp":return lt.toFixed(1)+"°C";case"humidity":return lt.toFixed(0)+"%";case"pressure":return lt.toFixed(0)+" hPa";case"wind":case"rain":return lt.toFixed(1)+(ee==="wind"?" km/h":" mm");case"solar":return lt.toFixed(0)+" W/m²";default:return lt}}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};de[ee]=new Wc(se,{type:"line",data:{datasets:le.datasets||[]},options:Ge}),console.log(`[updateChart] Graphique ${ee} créé avec ${le.datasets.length} datasets`)}catch(ze){console.error(`[updateChart] Erreur lors de la mise à jour du graphique ${ee}:`,ze)}},Je=ee=>{switch(ee){case"temp":return"Température (°C)";case"humidity":return"Humidité (%)";case"pressure":return"Pression (hPa)";case"wind":return"Vitesse (km/h)";case"rain":return"Précipitations (mm)";case"solar":return"Rayonnement (W/m²)";default:return""}},he=(ee,se)=>{var ve,$e,Ge,Xe,lt,qe,Lt,Gt,rn,yn,Ye,at,it,Vt,Yt,In,Sn,Nn,Qn;if(console.log(`[formatHistoryDataForChart] Données reçues pour ${se}:`,ee),!ee)return console.warn(`[formatHistoryDataForChart] Pas de données pour ${se}`),null;let le;if("data"in ee)le=ee.data;else if(se in ee)le=ee;else return console.warn(`[formatHistoryDataForChart] Structure de données non reconnue pour ${se}`),null;console.log(`[formatHistoryDataForChart] Données extraites pour ${se}:`,le);const ze=[],Se=(Xt,Cn,Dn,rr)=>{if(!Array.isArray(Xt)){console.warn(`[formatHistoryDataForChart] Les données pour ${Cn} ne sont pas un tableau`);return}const Zn=Xt.map(_r=>{const ir=parseFloat(String(_r.value));return{x:_r.time,y:rr?rr(ir):ir}}).filter(_r=>!isNaN(_r.y));Zn.length>0&&ze.push({label:Cn,data:Zn,borderColor:Dn,fill:!1,tension:.4})};switch(se){case"temp":($e=(ve=le.outdoor)==null?void 0:ve.temperature)!=null&&$e.list?Se(Object.entries(le.outdoor.temperature.list).map(([Xt,Cn])=>({time:parseInt(Xt)*1e3,value:Cn})),"Température","#FF6384",Xt=>(Xt-32)*5/9):(Ge=le.outdoor)!=null&&Ge.temperature&&Se(le.outdoor.temperature,"Température","#FF6384",Xt=>(Xt-32)*5/9);break;case"humidity":(lt=(Xe=le.outdoor)==null?void 0:Xe.humidity)!=null&&lt.list?Se(Object.entries(le.outdoor.humidity.list).map(([Xt,Cn])=>({time:parseInt(Xt)*1e3,value:Cn})),"Humidité","#36A2EB"):(qe=le.outdoor)!=null&&qe.humidity&&Se(le.outdoor.humidity,"Humidité","#36A2EB");break;case"pressure":(Gt=(Lt=le.pressure)==null?void 0:Lt.absolute)!=null&&Gt.list?Se(Object.entries(le.pressure.absolute.list).map(([Xt,Cn])=>({time:parseInt(Xt)*1e3,value:Cn})),"Pression","#4BC0C0",Xt=>Xt*33.8639):(rn=le.pressure)!=null&&rn.absolute&&Se(le.pressure.absolute,"Pression","#4BC0C0",Xt=>Xt*33.8639);break;case"wind":(Ye=(yn=le.wind)==null?void 0:yn.wind_speed)!=null&&Ye.list?(Se(Object.entries(le.wind.wind_speed.list).map(([Xt,Cn])=>({time:parseInt(Xt)*1e3,value:Cn})),"Vitesse du vent","#FFCE56",Xt=>Xt*1.60934),(at=le.wind.wind_gust)!=null&&at.list&&Se(Object.entries(le.wind.wind_gust.list).map(([Xt,Cn])=>({time:parseInt(Xt)*1e3,value:Cn})),"Rafales","#FF9F40",Xt=>Xt*1.60934)):(it=le.wind)!=null&&it.wind_speed&&(Se(le.wind.wind_speed,"Vitesse du vent","#FFCE56",Xt=>Xt*1.60934),le.wind.wind_gust&&Se(le.wind.wind_gust,"Rafales","#FF9F40",Xt=>Xt*1.60934));break;case"rain":(Yt=(Vt=le.rainfall)==null?void 0:Vt.daily)!=null&&Yt.list?Se(Object.entries(le.rainfall.daily.list).map(([Xt,Cn])=>({time:parseInt(Xt)*1e3,value:Cn})),"Précipitations journalières","#9966FF",Xt=>Xt*25.4):(In=le.rainfall)!=null&&In.daily&&Se(le.rainfall.daily,"Précipitations journalières","#9966FF",Xt=>Xt*25.4);break;case"solar":(Nn=(Sn=le.solar_and_uvi)==null?void 0:Sn.solar)!=null&&Nn.list?Se(Object.entries(le.solar_and_uvi.solar.list).map(([Xt,Cn])=>({time:parseInt(Xt)*1e3,value:Cn})),"Rayonnement solaire","#FF9F40"):(Qn=le.solar_and_uvi)!=null&&Qn.solar&&Se(le.solar_and_uvi.solar,"Rayonnement solaire","#FF9F40");break}return console.log(`[formatHistoryDataForChart] Datasets générés pour ${se}:`,ze),{datasets:ze}};return Zu(()=>{Object.values(de).forEach(ee=>ee.destroy())}),Di([z,U,$,re],()=>{j.value==="history"&&a.value&&J()}),go(async()=>{const ee=[];v.value&&ee.push(K()),await Promise.all(ee),await D(),m=window.setInterval(V,5*60*1e3)}),Di(c,ee=>{v.value&&ee&&B()}),Di(a,ee=>{ee&&j.value==="history"&&J()}),Di(j,ee=>{ee==="history"&&a.value&&J()}),Zu(()=>{m&&clearInterval(m)}),(ee,se)=>{var le,ze,Se,ve,$e,Ge,Xe,lt,qe,Lt,Gt,rn,yn,Ye,at,it,Vt,Yt,In,Sn,Nn,Qn,Xt,Cn,Dn,rr,Zn,_r,ir,qr,Os,ls,ft,rt,wt,kn,Hn,wn;return Ie(),je("div",Kie,[C("div",Zie,[se[38]||(se[38]=C("h1",{class:"text-3xl font-bold mb-4"},"Météo",-1)),v.value?(Ie(),je("div",Xie,[se[6]||(se[6]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sélectionner une entreprise ",-1)),C("div",Jie,[On(C("select",{"onUpdate:modelValue":se[0]||(se[0]=bt=>c.value=bt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!l.value.length,onChange:B},[l.value.length?en("",!0):(Ie(),je("option",ese,"Chargement des entreprises...")),(Ie(!0),je(Mn,null,gr(l.value,bt=>(Ie(),je("option",{key:bt.id,value:bt.id},Ot(bt.company_name||`${bt.first_name} ${bt.last_name}`),9,tse))),128))],40,Qie),[[rs,c.value]])])])):en("",!0),d.value?(Ie(),je("div",nse,[C("div",rse,[se[7]||(se[7]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",ise,[C("h3",sse,Ot(d.value),1)])])])):en("",!0),C("div",ose,[se[17]||(se[17]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sélectionner une station ",-1)),C("div",ase,[On(C("select",{"onUpdate:modelValue":se[1]||(se[1]=bt=>a.value=bt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!!(!o.value.length||d.value)},[!o.value.length&&!d.value?(Ie(),je("option",use,"Chargement des stations...")):en("",!0),d.value?(Ie(),je("option",cse,"Aucune station disponible")):en("",!0),(Ie(!0),je(Mn,null,gr(o.value,bt=>(Ie(),je("option",{key:bt.mac,value:bt.mac},Ot(bt.name)+" ("+Ot(bt.model)+" - v"+Ot(bt.firmware_version)+") ",9,hse))),128))],8,lse),[[rs,a.value]]),C("button",{onClick:V,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!!(!a.value||d.value)}," Actualiser ",8,dse)]),x.value?(Ie(),je("div",fse,[se[16]||(se[16]=C("h3",{class:"text-lg font-semibold mb-2"},"Informations sur la station",-1)),C("div",pse,[C("div",null,[se[8]||(se[8]=C("span",{class:"text-gray-500"},"Modèle:",-1)),C("p",gse,Ot(x.value.model),1)]),C("div",null,[se[9]||(se[9]=C("span",{class:"text-gray-500"},"Version:",-1)),C("p",mse,Ot(x.value.firmware_version),1)]),C("div",null,[se[10]||(se[10]=C("span",{class:"text-gray-500"},"ID:",-1)),C("p",vse,Ot(x.value.id),1)]),C("div",null,[se[11]||(se[11]=C("span",{class:"text-gray-500"},"MAC:",-1)),C("p",yse,Ot(x.value.mac),1)]),C("div",null,[se[12]||(se[12]=C("span",{class:"text-gray-500"},"Fuseau horaire:",-1)),C("p",bse,Ot(x.value.timezone),1)]),C("div",null,[se[13]||(se[13]=C("span",{class:"text-gray-500"},"Installation:",-1)),C("p",_se,Ot(new Date(x.value.created_at).toLocaleDateString()),1)]),C("div",wse,[se[15]||(se[15]=C("span",{class:"text-gray-500 mr-2"},"Position:",-1)),E(x.value)?(Ie(),je("a",{key:0,href:A(x.value),target:"_blank",class:"text-primary-600 hover:text-primary-800 flex items-center",title:"Ouvrir dans Google Maps"},[se[14]||(se[14]=C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),ui(" "+Ot(k(x.value)),1)],8,xse)):en("",!0)])])])):en("",!0)]),C("div",Lse,[C("div",Sse,[C("nav",Cse,[(Ie(),je(Mn,null,gr(N,bt=>C("button",{key:bt.id,onClick:Et=>j.value=bt.id,class:Ti([j.value===bt.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},Ot(bt.name),11,Ese)),64))])])]),j.value==="realtime"?(Ie(),je("div",Pse,[C("p",Mse," Dernière mise à jour : "+Ot(i.value?new Date(i.value).toLocaleString():"Jamais"),1),C("div",kse,[C("div",Ase,[se[18]||(se[18]=C("h2",{class:"text-xl font-semibold mb-4"},"Température Extérieure",-1)),C("div",Tse,Ot(Y((ze=(le=r.value.outdoor)==null?void 0:le.temperature)==null?void 0:ze.value))+"°C ",1),C("div",Dse," Min: "+Ot(Y(((ve=(Se=r.value.outdoor)==null?void 0:Se.temperature)==null?void 0:ve.min)||"0"))+"°C Max: "+Ot(Y(((Ge=($e=r.value.outdoor)==null?void 0:$e.temperature)==null?void 0:Ge.max)||"0"))+"°C ",1)]),C("div",Ose,[se[19]||(se[19]=C("h2",{class:"text-xl font-semibold mb-4"},"Humidité",-1)),C("div",Nse,Ot(((lt=(Xe=r.value.outdoor)==null?void 0:Xe.humidity)==null?void 0:lt.value)||"0")+"% ",1),C("div",Ise,[C("div",Bse,[C("div",{class:"bg-primary-600 h-2.5 rounded-full",style:tu({width:`${((Lt=(qe=r.value.outdoor)==null?void 0:qe.humidity)==null?void 0:Lt.value)||0}%`})},null,4)])])]),C("div",Rse,[se[20]||(se[20]=C("h2",{class:"text-xl font-semibold mb-4"},"Pression Atmosphérique",-1)),C("div",Fse,Ot(fe((rn=(Gt=r.value.pressure)==null?void 0:Gt.absolute)==null?void 0:rn.value))+" hPa ",1),C("div",jse," Tendance: "+Ot(F((Ye=(yn=r.value.pressure)==null?void 0:yn.absolute)==null?void 0:Ye.trend)),1)]),C("div",zse,[se[22]||(se[22]=C("h2",{class:"text-xl font-semibold mb-4"},"Vent",-1)),C("div",$se,Ot(te(((it=(at=r.value.wind)==null?void 0:at.speed)==null?void 0:it.value)||((Yt=(Vt=r.value.wind)==null?void 0:Vt.wind_speed)==null?void 0:Yt.value)))+" km/h ",1),C("div",Vse,[ui(" Direction: "+Ot(I(((Sn=(In=r.value.wind)==null?void 0:In.direction)==null?void 0:Sn.value)||((Qn=(Nn=r.value.wind)==null?void 0:Nn.wind_direction)==null?void 0:Qn.value)))+" ",1),se[21]||(se[21]=C("br",null,null,-1)),ui(" Rafales: "+Ot(te(((Cn=(Xt=r.value.wind)==null?void 0:Xt.gust)==null?void 0:Cn.value)||((rr=(Dn=r.value.wind)==null?void 0:Dn.wind_gust)==null?void 0:rr.value)))+" km/h ",1)])]),C("div",Use,[se[24]||(se[24]=C("h2",{class:"text-xl font-semibold mb-4"},"Précipitations",-1)),C("div",Hse,Ot(ge((_r=(Zn=r.value.rainfall)==null?void 0:Zn.daily)==null?void 0:_r.value))+" mm ",1),C("div",Wse,[ui(" Taux: "+Ot(ge(((qr=(ir=r.value.rainfall)==null?void 0:ir.rate)==null?void 0:qr.value)||((ls=(Os=r.value.rainfall)==null?void 0:Os.rain_rate)==null?void 0:ls.value)))+" mm/h ",1),se[23]||(se[23]=C("br",null,null,-1)),ui(" Mensuel: "+Ot(ge((rt=(ft=r.value.rainfall)==null?void 0:ft.monthly)==null?void 0:rt.value))+" mm ",1)])]),C("div",Gse,[se[25]||(se[25]=C("h2",{class:"text-xl font-semibold mb-4"},"Rayonnement",-1)),C("div",qse,Ot(((kn=(wt=r.value.solar_and_uvi)==null?void 0:wt.solar)==null?void 0:kn.value)||"0")+" W/m² ",1),C("div",Yse," UV: "+Ot(((wn=(Hn=r.value.solar_and_uvi)==null?void 0:Hn.uvi)==null?void 0:wn.value)||"0"),1)])])])):j.value==="history"?(Ie(),je("div",Kse,[C("div",Zse,[se[26]||(se[26]=C("h2",{class:"text-xl font-semibold"},"Données historiques",-1)),C("div",Xse,[s.value?(Ie(),je("div",Jse," Dernière mise à jour: "+Ot(s.value),1)):en("",!0),C("button",{onClick:J,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!a.value}," Actualiser ",8,Qse)])]),C("div",eoe,[C("div",null,[se[28]||(se[28]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Période ",-1)),On(C("select",{"onUpdate:modelValue":se[2]||(se[2]=bt=>z.value=bt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},se[27]||(se[27]=[eu('<option value="today" data-v-9a089f70>Aujourd&#39;hui</option><option value="yesterday" data-v-9a089f70>Hier</option><option value="week" data-v-9a089f70>7 derniers jours</option><option value="month" data-v-9a089f70>30 derniers jours</option><option value="custom" data-v-9a089f70>Période personnalisée</option>',5)]),512),[[rs,z.value]])]),z.value==="custom"?(Ie(),je("div",toe,[C("div",null,[se[29]||(se[29]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de début ",-1)),On(C("input",{type:"date","onUpdate:modelValue":se[3]||(se[3]=bt=>$.value=bt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[Fr,$.value]])]),C("div",null,[se[30]||(se[30]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de fin ",-1)),On(C("input",{type:"date","onUpdate:modelValue":se[4]||(se[4]=bt=>re.value=bt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[Fr,re.value]])])])):en("",!0),C("div",null,[se[31]||(se[31]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Intervalle ",-1)),On(C("select",{"onUpdate:modelValue":se[5]||(se[5]=bt=>U.value=bt),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},[(Ie(!0),je(Mn,null,gr(we.value,bt=>(Ie(),je("option",{key:bt.value,value:bt.value},Ot(bt.label),9,noe))),128))],512),[[rs,U.value]]),p.value?(Ie(),je("div",roe,Ot(p.value),1)):en("",!0)])]),C("div",ioe,[C("div",soe,[se[32]||(se[32]=C("h3",{class:"text-lg font-semibold mb-4"},"Température",-1)),C("div",ooe,[C("canvas",{ref_key:"tempChart",ref:nt},null,512)])]),C("div",aoe,[se[33]||(se[33]=C("h3",{class:"text-lg font-semibold mb-4"},"Humidité",-1)),C("div",loe,[C("canvas",{ref_key:"humidityChart",ref:ae},null,512)])]),C("div",uoe,[se[34]||(se[34]=C("h3",{class:"text-lg font-semibold mb-4"},"Pression",-1)),C("div",coe,[C("canvas",{ref_key:"pressureChart",ref:H},null,512)])]),C("div",hoe,[se[35]||(se[35]=C("h3",{class:"text-lg font-semibold mb-4"},"Vent",-1)),C("div",doe,[C("canvas",{ref_key:"windChart",ref:Z},null,512)])]),C("div",foe,[se[36]||(se[36]=C("h3",{class:"text-lg font-semibold mb-4"},"Précipitations",-1)),C("div",poe,[C("canvas",{ref_key:"rainChart",ref:me},null,512)])]),C("div",goe,[se[37]||(se[37]=C("h3",{class:"text-lg font-semibold mb-4"},"Rayonnement",-1)),C("div",moe,[C("canvas",{ref_key:"solarChart",ref:pe},null,512)])])])])):en("",!0)])])}}}),yoe=jh(voe,[["__scopeId","data-v-9a089f70"]]),RM=XB({history:MB("/"),routes:[{path:"/",name:"home",component:F5,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/meteo",name:"meteo",component:yoe,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/plans",name:"plans",component:NK,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/users",name:"users",component:sY,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie"]}},{path:"/profile",name:"profile",component:()=>Mh(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/login",name:"login",component:Ij,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Mh(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Mh(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:rj,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/notes",name:"notes",component:oX,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/map",name:"map",component:F5,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Mh(()=>import("./NotFoundView.js"),[])}]});RM.beforeEach(async(t,e,n)=>{var a,l;const r=pa();if(console.log("Route:",t.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(c){console.error("Error initializing auth store:",c)}const i=r.isAuthenticated,s=(a=r.user)==null?void 0:a.must_change_password,o=(l=r.user)==null?void 0:l.user_type;if(t.meta.requiresAuth&&!i){n("/login");return}if(i&&s&&t.name!=="changePassword"){n({name:"changePassword"});return}if(t.name==="changePassword"&&!s){n({name:"home"});return}if(t.meta.allowedRoles&&o&&!t.meta.allowedRoles.includes(o)){n({name:"home"});return}if(t.meta.requiresGuest&&i){n({name:"home"});return}n()});function boe(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(p=!0)=>{await l};async function d(){if("serviceWorker"in navigator){if(a=await Mh(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/static/frontend/sw.js",{scope:"/static/frontend/",type:"classic"})).catch(p=>{o==null||o(p)}),!a)return;a.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),a.addEventListener("installed",p=>{p.isUpdate||r==null||r()}),a.register({immediate:e}).then(p=>{s?s("/static/frontend/sw.js",p):i==null||i(p)}).catch(p=>{o==null||o(p)})}}return l=d(),c}const yw=Fv(I9),FM=sI();yw.use(FM);yw.use(RM);const _oe=pa(FM);window.INITIAL_STATE&&_oe.initialize(window.INITIAL_STATE);yw.mount("#app");boe({immediate:!0,onRegistered(t){t&&console.log("SW enregistré:",t)},onRegisterError(t){console.error("Erreur d'enregistrement du SW:",t)},onOfflineReady(){console.log("L'application est prête à être utilisée hors ligne")}});export{fs as _,iu as a,C as b,je as c,js as d,en as e,er as f,ui as g,On as h,Ie as i,eu as j,yi as k,Gu as l,_S as m,Ti as n,go as o,QB as p,Nm as q,Ct as r,Ca as s,Ot as t,pa as u,Fr as v,Bh as w,j_ as x};

var CD=Object.defineProperty;var ED=(t,e,n)=>e in t?CD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Je=(t,e,n)=>ED(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function dy(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Vi={},hp=[],qu=()=>{},PD=()=>!1,Em=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),r_=t=>t.startsWith("onUpdate:"),Es=Object.assign,i_=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},MD=Object.prototype.hasOwnProperty,is=(t,e)=>MD.call(t,e),ar=Array.isArray,fp=t=>Bp(t)==="[object Map]",xf=t=>Bp(t)==="[object Set]",Cx=t=>Bp(t)==="[object Date]",kD=t=>Bp(t)==="[object RegExp]",Ir=t=>typeof t=="function",Is=t=>typeof t=="string",Lc=t=>typeof t=="symbol",vs=t=>t!==null&&typeof t=="object",s_=t=>(vs(t)||Ir(t))&&Ir(t.then)&&Ir(t.catch),EL=Object.prototype.toString,Bp=t=>EL.call(t),AD=t=>Bp(t).slice(8,-1),hy=t=>Bp(t)==="[object Object]",o_=t=>Is(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,pp=dy(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fy=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},TD=/-(\w)/g,Ya=fy(t=>t.replace(TD,(e,n)=>n?n.toUpperCase():"")),DD=/\B([A-Z])/g,Ql=fy(t=>t.replace(DD,"-$1").toLowerCase()),Pm=fy(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ng=fy(t=>t?`on${Pm(t)}`:""),Nl=(t,e)=>!Object.is(t,e),gp=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},PL=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Lv=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Sv=t=>{const e=Is(t)?Number(t):NaN;return isNaN(e)?t:e};let Ex;const py=()=>Ex||(Ex=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),ND="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",OD=dy(ND);function ru(t){if(ar(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Is(r)?FD(r):ru(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Is(t)||vs(t))return t}const ID=/;(?![^(]*\))/g,BD=/:([^]+)/,RD=/\/\*[^]*?\*\//g;function FD(t){const e={};return t.replace(RD,"").split(ID).forEach(n=>{if(n){const r=n.split(BD);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ii(t){let e="";if(Is(t))e=t;else if(ar(t))for(let n=0;n<t.length;n++){const r=Ii(t[n]);r&&(e+=r+" ")}else if(vs(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function jD(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Is(e)&&(t.class=Ii(e)),n&&(t.style=ru(n)),t}const zD="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",$D=dy(zD);function ML(t){return!!t||t===""}function VD(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=_h(t[r],e[r]);return n}function _h(t,e){if(t===e)return!0;let n=Cx(t),r=Cx(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Lc(t),r=Lc(e),n||r)return t===e;if(n=ar(t),r=ar(e),n||r)return n&&r?VD(t,e):!1;if(n=vs(t),r=vs(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!_h(t[o],e[o]))return!1}}return String(t)===String(e)}function gy(t,e){return t.findIndex(n=>_h(n,e))}const kL=t=>!!(t&&t.__v_isRef===!0),kt=t=>Is(t)?t:t==null?"":ar(t)||vs(t)&&(t.toString===EL||!Ir(t.toString))?kL(t)?kt(t.value):JSON.stringify(t,AL,2):String(t),AL=(t,e)=>kL(e)?AL(t,e.value):fp(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[P1(r,s)+" =>"]=i,n),{})}:xf(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>P1(n))}:Lc(e)?P1(e):vs(e)&&!ar(e)&&!hy(e)?String(e):e,P1=(t,e="")=>{var n;return Lc(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Dl;class a_{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Dl,!e&&Dl&&(this.index=(Dl.scopes||(Dl.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Dl;try{return Dl=this,e()}finally{Dl=n}}}on(){Dl=this}off(){Dl=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function l_(t){return new a_(t)}function u_(){return Dl}function TL(t,e=!1){Dl&&Dl.cleanups.push(t)}let Ns;const M1=new WeakSet;class rm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Dl&&Dl.active&&Dl.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,M1.has(this)&&(M1.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||NL(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Px(this),OL(this);const e=Ns,n=wc;Ns=this,wc=!0;try{return this.fn()}finally{IL(this),Ns=e,wc=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)h_(e);this.deps=this.depsTail=void 0,Px(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?M1.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){N2(this)&&this.run()}get dirty(){return N2(this)}}let DL=0,Og,Ig;function NL(t,e=!1){if(t.flags|=8,e){t.next=Ig,Ig=t;return}t.next=Og,Og=t}function c_(){DL++}function d_(){if(--DL>0)return;if(Ig){let e=Ig;for(Ig=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Og;){let e=Og;for(Og=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function OL(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function IL(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),h_(r),UD(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function N2(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(BL(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function BL(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===im))return;t.globalVersion=im;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!N2(t)){t.flags&=-3;return}const n=Ns,r=wc;Ns=t,wc=!0;try{OL(t);const i=t.fn(t._value);(e.version===0||Nl(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{Ns=n,wc=r,IL(t),t.flags&=-3}}function h_(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)h_(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function UD(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}function HD(t,e){t.effect instanceof rm&&(t=t.effect.fn);const n=new rm(t);e&&Es(n,e);try{n.run()}catch(i){throw n.stop(),i}const r=n.run.bind(n);return r.effect=n,r}function WD(t){t.effect.stop()}let wc=!0;const RL=[];function Ph(){RL.push(wc),wc=!1}function Mh(){const t=RL.pop();wc=t===void 0?!0:t}function Px(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ns;Ns=void 0;try{e()}finally{Ns=n}}}let im=0;class GD{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class my{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Ns||!wc||Ns===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ns)n=this.activeLink=new GD(Ns,this),Ns.deps?(n.prevDep=Ns.depsTail,Ns.depsTail.nextDep=n,Ns.depsTail=n):Ns.deps=Ns.depsTail=n,FL(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ns.depsTail,n.nextDep=void 0,Ns.depsTail.nextDep=n,Ns.depsTail=n,Ns.deps===n&&(Ns.deps=r)}return n}trigger(e){this.version++,im++,this.notify(e)}notify(e){c_();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{d_()}}}function FL(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)FL(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Cv=new WeakMap,lf=Symbol(""),O2=Symbol(""),sm=Symbol("");function fl(t,e,n){if(wc&&Ns){let r=Cv.get(t);r||Cv.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new my),i.map=r,i.key=n),i.track()}}function Ed(t,e,n,r,i,s){const o=Cv.get(t);if(!o){im++;return}const a=l=>{l&&l.trigger()};if(c_(),e==="clear")o.forEach(a);else{const l=ar(t),c=l&&o_(n);if(l&&n==="length"){const h=Number(r);o.forEach((p,v)=>{(v==="length"||v===sm||!Lc(v)&&v>=h)&&a(p)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(sm)),e){case"add":l?c&&a(o.get("length")):(a(o.get(lf)),fp(t)&&a(o.get(O2)));break;case"delete":l||(a(o.get(lf)),fp(t)&&a(o.get(O2)));break;case"set":fp(t)&&a(o.get(lf));break}}d_()}function qD(t,e){const n=Cv.get(t);return n&&n.get(e)}function Hf(t){const e=$i(t);return e===t?e:(fl(e,"iterate",sm),Pu(t)?e:e.map(pl))}function vy(t){return fl(t=$i(t),"iterate",sm),t}const YD={__proto__:null,[Symbol.iterator](){return k1(this,Symbol.iterator,pl)},concat(...t){return Hf(this).concat(...t.map(e=>ar(e)?Hf(e):e))},entries(){return k1(this,"entries",t=>(t[1]=pl(t[1]),t))},every(t,e){return vd(this,"every",t,e,void 0,arguments)},filter(t,e){return vd(this,"filter",t,e,n=>n.map(pl),arguments)},find(t,e){return vd(this,"find",t,e,pl,arguments)},findIndex(t,e){return vd(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return vd(this,"findLast",t,e,pl,arguments)},findLastIndex(t,e){return vd(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return vd(this,"forEach",t,e,void 0,arguments)},includes(...t){return A1(this,"includes",t)},indexOf(...t){return A1(this,"indexOf",t)},join(t){return Hf(this).join(t)},lastIndexOf(...t){return A1(this,"lastIndexOf",t)},map(t,e){return vd(this,"map",t,e,void 0,arguments)},pop(){return Zp(this,"pop")},push(...t){return Zp(this,"push",t)},reduce(t,...e){return Mx(this,"reduce",t,e)},reduceRight(t,...e){return Mx(this,"reduceRight",t,e)},shift(){return Zp(this,"shift")},some(t,e){return vd(this,"some",t,e,void 0,arguments)},splice(...t){return Zp(this,"splice",t)},toReversed(){return Hf(this).toReversed()},toSorted(t){return Hf(this).toSorted(t)},toSpliced(...t){return Hf(this).toSpliced(...t)},unshift(...t){return Zp(this,"unshift",t)},values(){return k1(this,"values",pl)}};function k1(t,e,n){const r=vy(t),i=r[e]();return r!==t&&!Pu(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const KD=Array.prototype;function vd(t,e,n,r,i,s){const o=vy(t),a=o!==t&&!Pu(t),l=o[e];if(l!==KD[e]){const p=l.apply(t,s);return a?pl(p):p}let c=n;o!==t&&(a?c=function(p,v){return n.call(this,pl(p),v,t)}:n.length>2&&(c=function(p,v){return n.call(this,p,v,t)}));const h=l.call(o,c,r);return a&&i?i(h):h}function Mx(t,e,n,r){const i=vy(t);let s=n;return i!==t&&(Pu(t)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,t)}):s=function(o,a,l){return n.call(this,o,pl(a),l,t)}),i[e](s,...r)}function A1(t,e,n){const r=$i(t);fl(r,"iterate",sm);const i=r[e](...n);return(i===-1||i===!1)&&_y(n[0])?(n[0]=$i(n[0]),r[e](...n)):i}function Zp(t,e,n=[]){Ph(),c_();const r=$i(t)[e].apply(t,n);return d_(),Mh(),r}const ZD=dy("__proto__,__v_isRef,__isVue"),jL=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Lc));function XD(t){Lc(t)||(t=String(t));const e=$i(this);return fl(e,"has",t),e.hasOwnProperty(t)}class zL{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?GL:WL:s?HL:UL).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ar(e);if(!i){let l;if(o&&(l=YD[n]))return l;if(n==="hasOwnProperty")return XD}const a=Reflect.get(e,n,wo(e)?e:r);return(Lc(n)?jL.has(n):ZD(n))||(i||fl(e,"get",n),s)?a:wo(a)?o&&o_(n)?a:a.value:vs(a)?i?pc(a):ou(a):a}}class $L extends zL{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=wh(s);if(!Pu(r)&&!wh(r)&&(s=$i(s),r=$i(r)),!ar(e)&&wo(s)&&!wo(r))return l?!1:(s.value=r,!0)}const o=ar(e)&&o_(n)?Number(n)<e.length:is(e,n),a=Reflect.set(e,n,r,wo(e)?e:i);return e===$i(i)&&(o?Nl(r,s)&&Ed(e,"set",n,r):Ed(e,"add",n,r)),a}deleteProperty(e,n){const r=is(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Ed(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Lc(n)||!jL.has(n))&&fl(e,"has",n),r}ownKeys(e){return fl(e,"iterate",ar(e)?"length":lf),Reflect.ownKeys(e)}}class VL extends zL{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const JD=new $L,QD=new VL,e8=new $L(!0),t8=new VL(!0),I2=t=>t,l0=t=>Reflect.getPrototypeOf(t);function n8(t,e,n){return function(...r){const i=this.__v_raw,s=$i(i),o=fp(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),h=n?I2:e?B2:pl;return!e&&fl(s,"iterate",l?O2:lf),{next(){const{value:p,done:v}=c.next();return v?{value:p,done:v}:{value:a?[h(p[0]),h(p[1])]:h(p),done:v}},[Symbol.iterator](){return this}}}}function u0(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function r8(t,e){const n={get(i){const s=this.__v_raw,o=$i(s),a=$i(i);t||(Nl(i,a)&&fl(o,"get",i),fl(o,"get",a));const{has:l}=l0(o),c=e?I2:t?B2:pl;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&fl($i(i),"iterate",lf),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=$i(s),a=$i(i);return t||(Nl(i,a)&&fl(o,"has",i),fl(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=$i(a),c=e?I2:t?B2:pl;return!t&&fl(l,"iterate",lf),a.forEach((h,p)=>i.call(s,c(h),c(p),o))}};return Es(n,t?{add:u0("add"),set:u0("set"),delete:u0("delete"),clear:u0("clear")}:{add(i){!e&&!Pu(i)&&!wh(i)&&(i=$i(i));const s=$i(this);return l0(s).has.call(s,i)||(s.add(i),Ed(s,"add",i,i)),this},set(i,s){!e&&!Pu(s)&&!wh(s)&&(s=$i(s));const o=$i(this),{has:a,get:l}=l0(o);let c=a.call(o,i);c||(i=$i(i),c=a.call(o,i));const h=l.call(o,i);return o.set(i,s),c?Nl(s,h)&&Ed(o,"set",i,s):Ed(o,"add",i,s),this},delete(i){const s=$i(this),{has:o,get:a}=l0(s);let l=o.call(s,i);l||(i=$i(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&Ed(s,"delete",i,void 0),c},clear(){const i=$i(this),s=i.size!==0,o=i.clear();return s&&Ed(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=n8(i,t,e)}),n}function yy(t,e){const n=r8(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(is(n,i)&&i in r?n:r,i,s)}const i8={get:yy(!1,!1)},s8={get:yy(!1,!0)},o8={get:yy(!0,!1)},a8={get:yy(!0,!0)},UL=new WeakMap,HL=new WeakMap,WL=new WeakMap,GL=new WeakMap;function l8(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function u8(t){return t.__v_skip||!Object.isExtensible(t)?0:l8(AD(t))}function ou(t){return wh(t)?t:by(t,!1,JD,i8,UL)}function f_(t){return by(t,!1,e8,s8,HL)}function pc(t){return by(t,!0,QD,o8,WL)}function c8(t){return by(t,!0,t8,a8,GL)}function by(t,e,n,r,i){if(!vs(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=u8(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Zc(t){return wh(t)?Zc(t.__v_raw):!!(t&&t.__v_isReactive)}function wh(t){return!!(t&&t.__v_isReadonly)}function Pu(t){return!!(t&&t.__v_isShallow)}function _y(t){return t?!!t.__v_raw:!1}function $i(t){const e=t&&t.__v_raw;return e?$i(e):t}function wy(t){return!is(t,"__v_skip")&&Object.isExtensible(t)&&PL(t,"__v_skip",!0),t}const pl=t=>vs(t)?ou(t):t,B2=t=>vs(t)?pc(t):t;function wo(t){return t?t.__v_isRef===!0:!1}function Ct(t){return qL(t,!1)}function p_(t){return qL(t,!0)}function qL(t,e){return wo(t)?t:new d8(t,e)}class d8{constructor(e,n){this.dep=new my,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:$i(e),this._value=n?e:pl(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Pu(e)||wh(e);e=r?e:$i(e),Nl(e,n)&&(this._rawValue=e,this._value=r?e:pl(e),this.dep.trigger())}}function h8(t){t.dep&&t.dep.trigger()}function Vn(t){return wo(t)?t.value:t}function f8(t){return Ir(t)?t():Vn(t)}const p8={get:(t,e,n)=>e==="__v_raw"?t:Vn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return wo(i)&&!wo(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function g_(t){return Zc(t)?t:new Proxy(t,p8)}class g8{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new my,{get:r,set:i}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function YL(t){return new g8(t)}function KL(t){const e=ar(t)?new Array(t.length):{};for(const n in t)e[n]=ZL(t,n);return e}class m8{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return qD($i(this._object),this._key)}}class v8{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function y8(t,e,n){return wo(t)?t:Ir(t)?new v8(t):vs(t)&&arguments.length>1?ZL(t,e,n):Ct(t)}function ZL(t,e,n){const r=t[e];return wo(r)?r:new m8(t,e,n)}class b8{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new my(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=im-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ns!==this)return NL(this,!0),!0}get value(){const e=this.dep.track();return BL(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function _8(t,e,n=!1){let r,i;return Ir(t)?r=t:(r=t.get,i=t.set),new b8(r,i,n)}const w8={GET:"get",HAS:"has",ITERATE:"iterate"},x8={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},c0={},Ev=new WeakMap;let nh;function L8(){return nh}function XL(t,e=!1,n=nh){if(n){let r=Ev.get(n);r||Ev.set(n,r=[]),r.push(t)}}function S8(t,e,n=Vi){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,c=Y=>i?Y:Pu(Y)||i===!1||i===0?Pd(Y,1):Pd(Y);let h,p,v,g,x=!1,E=!1;if(wo(t)?(p=()=>t.value,x=Pu(t)):Zc(t)?(p=()=>c(t),x=!0):ar(t)?(E=!0,x=t.some(Y=>Zc(Y)||Pu(Y)),p=()=>t.map(Y=>{if(wo(Y))return Y.value;if(Zc(Y))return c(Y);if(Ir(Y))return l?l(Y,2):Y()})):Ir(t)?e?p=l?()=>l(t,2):t:p=()=>{if(v){Ph();try{v()}finally{Mh()}}const Y=nh;nh=h;try{return l?l(t,3,[g]):t(g)}finally{nh=Y}}:p=qu,e&&i){const Y=p,ne=i===!0?1/0:i;p=()=>Pd(Y(),ne)}const D=u_(),M=()=>{h.stop(),D&&D.active&&i_(D.effects,h)};if(s&&e){const Y=e;e=(...ne)=>{Y(...ne),M()}}let A=E?new Array(t.length).fill(c0):c0;const z=Y=>{if(!(!(h.flags&1)||!h.dirty&&!Y))if(e){const ne=h.run();if(i||x||(E?ne.some((ge,pe)=>Nl(ge,A[pe])):Nl(ne,A))){v&&v();const ge=nh;nh=h;try{const pe=[ne,A===c0?void 0:E&&A[0]===c0?[]:A,g];l?l(e,3,pe):e(...pe),A=ne}finally{nh=ge}}}else h.run()};return a&&a(z),h=new rm(p),h.scheduler=o?()=>o(z,!1):z,g=Y=>XL(Y,!1,h),v=h.onStop=()=>{const Y=Ev.get(h);if(Y){if(l)l(Y,4);else for(const ne of Y)ne();Ev.delete(h)}},e?r?z(!0):A=h.run():o?o(z.bind(null,!0),!0):h.run(),M.pause=h.pause.bind(h),M.resume=h.resume.bind(h),M.stop=M,M}function Pd(t,e=1/0,n){if(e<=0||!vs(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,wo(t))Pd(t.value,e,n);else if(ar(t))for(let r=0;r<t.length;r++)Pd(t[r],e,n);else if(xf(t)||fp(t))t.forEach(r=>{Pd(r,e,n)});else if(hy(t)){for(const r in t)Pd(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Pd(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const JL=[];function C8(t){JL.push(t)}function E8(){JL.pop()}function P8(t,e){}const M8={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},k8={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Rp(t,e,n,r){try{return r?t(...r):t()}catch(i){Lf(i,e,n)}}function Ku(t,e,n,r){if(Ir(t)){const i=Rp(t,e,n,r);return i&&s_(i)&&i.catch(s=>{Lf(s,e,n)}),i}if(ar(t)){const i=[];for(let s=0;s<t.length;s++)i.push(Ku(t[s],e,n,r));return i}}function Lf(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Vi;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let p=0;p<h.length;p++)if(h[p](t,l,c)===!1)return}a=a.parent}if(s){Ph(),Rp(s,null,10,[t,l,c]),Mh();return}}A8(t,n,i,r,o)}function A8(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const Ol=[];let $c=-1;const mp=[];let rh=null,tp=0;const QL=Promise.resolve();let Pv=null;function ma(t){const e=Pv||QL;return t?e.then(this?t.bind(this):t):e}function T8(t){let e=$c+1,n=Ol.length;for(;e<n;){const r=e+n>>>1,i=Ol[r],s=am(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function m_(t){if(!(t.flags&1)){const e=am(t),n=Ol[Ol.length-1];!n||!(t.flags&2)&&e>=am(n)?Ol.push(t):Ol.splice(T8(e),0,t),t.flags|=1,eS()}}function eS(){Pv||(Pv=QL.then(tS))}function om(t){ar(t)?mp.push(...t):rh&&t.id===-1?rh.splice(tp+1,0,t):t.flags&1||(mp.push(t),t.flags|=1),eS()}function kx(t,e,n=$c+1){for(;n<Ol.length;n++){const r=Ol[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Ol.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Mv(t){if(mp.length){const e=[...new Set(mp)].sort((n,r)=>am(n)-am(r));if(mp.length=0,rh){rh.push(...e);return}for(rh=e,tp=0;tp<rh.length;tp++){const n=rh[tp];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}rh=null,tp=0}}const am=t=>t.id==null?t.flags&2?-1:1/0:t.id;function tS(t){try{for($c=0;$c<Ol.length;$c++){const e=Ol[$c];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Rp(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;$c<Ol.length;$c++){const e=Ol[$c];e&&(e.flags&=-2)}$c=-1,Ol.length=0,Mv(),Pv=null,(Ol.length||mp.length)&&tS()}}let np,d0=[];function nS(t,e){var n,r;np=t,np?(np.enabled=!0,d0.forEach(({event:i,args:s})=>np.emit(i,...s)),d0=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{nS(s,e)}),setTimeout(()=>{np||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,d0=[])},3e3)):d0=[]}let ya=null,xy=null;function lm(t){const e=ya;return ya=t,xy=t&&t.type.__scopeId||null,e}function D8(t){xy=t}function N8(){xy=null}const O8=t=>Gu;function Gu(t,e=ya,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&H2(-1);const s=lm(e);let o;try{o=t(...i)}finally{lm(s),r._d&&H2(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function kn(t,e){if(ya===null)return t;const n=Am(ya),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=Vi]=e[i];s&&(Ir(s)&&(s={mounted:s,updated:s}),s.deep&&Pd(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Uc(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(Ph(),Ku(l,n,8,[t.el,a,t,e]),Mh())}}const rS=Symbol("_vte"),iS=t=>t.__isTeleport,Bg=t=>t&&(t.disabled||t.disabled===""),Ax=t=>t&&(t.defer||t.defer===""),Tx=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Dx=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,R2=(t,e)=>{const n=t&&t.to;return Is(n)?e?e(n):null:n},sS={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:h,pc:p,pbc:v,o:{insert:g,querySelector:x,createText:E,createComment:D}}=c,M=Bg(e.props);let{shapeFlag:A,children:z,dynamicChildren:Y}=e;if(t==null){const ne=e.el=E(""),ge=e.anchor=E("");g(ne,n,r),g(ge,n,r);const pe=(j,J)=>{A&16&&(i&&i.isCE&&(i.ce._teleportTarget=j),h(z,j,J,i,s,o,a,l))},O=()=>{const j=e.target=R2(e.props,x),J=oS(j,e,E,g);j&&(o!=="svg"&&Tx(j)?o="svg":o!=="mathml"&&Dx(j)&&(o="mathml"),M||(pe(j,J),Y0(e,!1)))};M&&(pe(n,ge),Y0(e,!0)),Ax(e.props)?ga(()=>{O(),e.el.__isMounted=!0},s):O()}else{if(Ax(e.props)&&!t.el.__isMounted){ga(()=>{sS.process(t,e,n,r,i,s,o,a,l,c),delete t.el.__isMounted},s);return}e.el=t.el,e.targetStart=t.targetStart;const ne=e.anchor=t.anchor,ge=e.target=t.target,pe=e.targetAnchor=t.targetAnchor,O=Bg(t.props),j=O?n:ge,J=O?ne:pe;if(o==="svg"||Tx(ge)?o="svg":(o==="mathml"||Dx(ge))&&(o="mathml"),Y?(v(t.dynamicChildren,Y,j,i,s,o,a),E_(t,e,!0)):l||p(t,e,j,J,i,s,o,a,!1),M)O?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):h0(e,n,ne,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const U=e.target=R2(e.props,x);U&&h0(e,U,null,c,0)}else O&&h0(e,ge,pe,c,1);Y0(e,M)}},remove(t,e,n,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:h,target:p,props:v}=t;if(p&&(i(c),i(h)),s&&i(l),o&16){const g=s||!Bg(v);for(let x=0;x<a.length;x++){const E=a[x];r(E,e,n,g,!!E.dynamicChildren)}}},move:h0,hydrate:I8};function h0(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:h}=t,p=s===2;if(p&&r(o,e,n),(!p||Bg(h))&&l&16)for(let v=0;v<c.length;v++)i(c[v],e,n,2);p&&r(a,e,n)}function I8(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:h}},p){const v=e.target=R2(e.props,l);if(v){const g=Bg(e.props),x=v._lpa||v.firstChild;if(e.shapeFlag&16)if(g)e.anchor=p(o(t),e,a(t),n,r,i,s),e.targetStart=x,e.targetAnchor=x&&o(x);else{e.anchor=o(t);let E=x;for(;E;){if(E&&E.nodeType===8){if(E.data==="teleport start anchor")e.targetStart=E;else if(E.data==="teleport anchor"){e.targetAnchor=E,v._lpa=e.targetAnchor&&o(e.targetAnchor);break}}E=o(E)}e.targetAnchor||oS(v,e,h,c),p(x&&o(x),e,v,n,r,i,s)}Y0(e,g)}return e.anchor&&o(e.anchor)}const rp=sS;function Y0(t,e){const n=t.ctx;if(n&&n.ut){let r,i;for(e?(r=t.el,i=t.anchor):(r=t.targetStart,i=t.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function oS(t,e,n,r){const i=e.targetStart=n(""),s=e.targetAnchor=n("");return i[rS]=s,t&&(r(i,t),r(s,t)),s}const ih=Symbol("_leaveCb"),f0=Symbol("_enterCb");function v_(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Lo(()=>{t.isMounted=!0}),kh(()=>{t.isUnmounting=!0}),t}const ju=[Function,Array],y_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ju,onEnter:ju,onAfterEnter:ju,onEnterCancelled:ju,onBeforeLeave:ju,onLeave:ju,onAfterLeave:ju,onLeaveCancelled:ju,onBeforeAppear:ju,onAppear:ju,onAfterAppear:ju,onAppearCancelled:ju},aS=t=>{const e=t.subTree;return e.component?aS(e.component):e},B8={name:"BaseTransition",props:y_,setup(t,{slots:e}){const n=Ju(),r=v_();return()=>{const i=e.default&&Ly(e.default(),!0);if(!i||!i.length)return;const s=lS(i),o=$i(t),{mode:a}=o;if(r.isLeaving)return T1(s);const l=Nx(s);if(!l)return T1(s);let c=Lp(l,o,r,n,p=>c=p);l.type!==ca&&Id(l,c);let h=n.subTree&&Nx(n.subTree);if(h&&h.type!==ca&&!yc(l,h)&&aS(n).type!==ca){let p=Lp(h,o,r,n);if(Id(h,p),a==="out-in"&&l.type!==ca)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,h=void 0},T1(s);a==="in-out"&&l.type!==ca?p.delayLeave=(v,g,x)=>{const E=cS(r,h);E[String(h.key)]=h,v[ih]=()=>{g(),v[ih]=void 0,delete c.delayedLeave,h=void 0},c.delayedLeave=()=>{x(),delete c.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return s}}};function lS(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==ca){e=n;break}}return e}const uS=B8;function cS(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Lp(t,e,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:h,onEnterCancelled:p,onBeforeLeave:v,onLeave:g,onAfterLeave:x,onLeaveCancelled:E,onBeforeAppear:D,onAppear:M,onAfterAppear:A,onAppearCancelled:z}=e,Y=String(t.key),ne=cS(n,t),ge=(j,J)=>{j&&Ku(j,r,9,J)},pe=(j,J)=>{const U=J[1];ge(j,J),ar(j)?j.every(R=>R.length<=1)&&U():j.length<=1&&U()},O={mode:o,persisted:a,beforeEnter(j){let J=l;if(!n.isMounted)if(s)J=D||l;else return;j[ih]&&j[ih](!0);const U=ne[Y];U&&yc(t,U)&&U.el[ih]&&U.el[ih](),ge(J,[j])},enter(j){let J=c,U=h,R=p;if(!n.isMounted)if(s)J=M||c,U=A||h,R=z||p;else return;let V=!1;const $=j[f0]=B=>{V||(V=!0,B?ge(R,[j]):ge(U,[j]),O.delayedLeave&&O.delayedLeave(),j[f0]=void 0)};J?pe(J,[j,$]):$()},leave(j,J){const U=String(t.key);if(j[f0]&&j[f0](!0),n.isUnmounting)return J();ge(v,[j]);let R=!1;const V=j[ih]=$=>{R||(R=!0,J(),$?ge(E,[j]):ge(x,[j]),j[ih]=void 0,ne[U]===t&&delete ne[U])};ne[U]=t,g?pe(g,[j,V]):V()},clone(j){const J=Lp(j,e,n,r,i);return i&&i(J),J}};return O}function T1(t){if(Mm(t))return t=ed(t),t.children=null,t}function Nx(t){if(!Mm(t))return iS(t.type)&&t.children?lS(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Ir(n.default))return n.default()}}function Id(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Id(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Ly(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===wn?(o.patchFlag&128&&i++,r=r.concat(Ly(o.children,e,a))):(e||o.type!==ca)&&r.push(a!=null?ed(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Hs(t,e){return Ir(t)?Es({name:t.name},e,{setup:t}):t}function R8(){const t=Ju();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function b_(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function F8(t){const e=Ju(),n=p_(null);if(e){const i=e.refs===Vi?e.refs={}:e.refs;Object.defineProperty(i,t,{enumerable:!0,get:()=>n.value,set:s=>n.value=s})}return n}function um(t,e,n,r,i=!1){if(ar(t)){t.forEach((x,E)=>um(x,e&&(ar(e)?e[E]:e),n,r,i));return}if(mh(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&um(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?Am(r.component):r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,h=a.refs===Vi?a.refs={}:a.refs,p=a.setupState,v=$i(p),g=p===Vi?()=>!1:x=>is(v,x);if(c!=null&&c!==l&&(Is(c)?(h[c]=null,g(c)&&(p[c]=null)):wo(c)&&(c.value=null)),Ir(l))Rp(l,a,12,[o,h]);else{const x=Is(l),E=wo(l);if(x||E){const D=()=>{if(t.f){const M=x?g(l)?p[l]:h[l]:l.value;i?ar(M)&&i_(M,s):ar(M)?M.includes(s)||M.push(s):x?(h[l]=[s],g(l)&&(p[l]=h[l])):(l.value=[s],t.k&&(h[t.k]=l.value))}else x?(h[l]=o,g(l)&&(p[l]=o)):E&&(l.value=o,t.k&&(h[t.k]=o))};o?(D.id=-1,ga(D,n)):D()}}}let Ox=!1;const Wf=()=>{Ox||(console.error("Hydration completed but contains mismatches."),Ox=!0)},j8=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",z8=t=>t.namespaceURI.includes("MathML"),p0=t=>{if(t.nodeType===1){if(j8(t))return"svg";if(z8(t))return"mathml"}},up=t=>t.nodeType===8;function $8(t){const{mt:e,p:n,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:a,insert:l,createComment:c}}=t,h=(z,Y)=>{if(!Y.hasChildNodes()){n(null,z,Y),Mv(),Y._vnode=z;return}p(Y.firstChild,z,null,null,null),Mv(),Y._vnode=z},p=(z,Y,ne,ge,pe,O=!1)=>{O=O||!!Y.dynamicChildren;const j=up(z)&&z.data==="[",J=()=>E(z,Y,ne,ge,pe,j),{type:U,ref:R,shapeFlag:V,patchFlag:$}=Y;let B=z.nodeType;Y.el=z,$===-2&&(O=!1,Y.dynamicChildren=null);let I=null;switch(U){case vh:B!==3?Y.children===""?(l(Y.el=i(""),o(z),z),I=z):I=J():(z.data!==Y.children&&(Wf(),z.data=Y.children),I=s(z));break;case ca:A(z)?(I=s(z),M(Y.el=z.content.firstChild,z,ne)):B!==8||j?I=J():I=s(z);break;case cf:if(j&&(z=s(z),B=z.nodeType),B===1||B===3){I=z;const Q=!Y.children.length;for(let G=0;G<Y.staticCount;G++)Q&&(Y.children+=I.nodeType===1?I.outerHTML:I.data),G===Y.staticCount-1&&(Y.anchor=I),I=s(I);return j?s(I):I}else J();break;case wn:j?I=x(z,Y,ne,ge,pe,O):I=J();break;default:if(V&1)(B!==1||Y.type.toLowerCase()!==z.tagName.toLowerCase())&&!A(z)?I=J():I=v(z,Y,ne,ge,pe,O);else if(V&6){Y.slotScopeIds=pe;const Q=o(z);if(j?I=D(z):up(z)&&z.data==="teleport start"?I=D(z,z.data,"teleport end"):I=s(z),e(Y,Q,null,ne,ge,p0(Q),O),mh(Y)&&!Y.type.__asyncResolved){let G;j?(G=yi(wn),G.anchor=I?I.previousSibling:Q.lastChild):G=z.nodeType===3?ri(""):yi("div"),G.el=z,Y.component.subTree=G}}else V&64?B!==8?I=J():I=Y.type.hydrate(z,Y,ne,ge,pe,O,t,g):V&128&&(I=Y.type.hydrate(z,Y,ne,ge,p0(o(z)),pe,O,t,p))}return R!=null&&um(R,null,ge,Y),I},v=(z,Y,ne,ge,pe,O)=>{O=O||!!Y.dynamicChildren;const{type:j,props:J,patchFlag:U,shapeFlag:R,dirs:V,transition:$}=Y,B=j==="input"||j==="option";if(B||U!==-1){V&&Uc(Y,null,ne,"created");let I=!1;if(A(z)){I=RS(null,$)&&ne&&ne.vnode.props&&ne.vnode.props.appear;const G=z.content.firstChild;I&&$.beforeEnter(G),M(G,z,ne),Y.el=z=G}if(R&16&&!(J&&(J.innerHTML||J.textContent))){let G=g(z.firstChild,Y,z,ne,ge,pe,O);for(;G;){g0(z,1)||Wf();const _e=G;G=G.nextSibling,a(_e)}}else if(R&8){let G=Y.children;G[0]===`
`&&(z.tagName==="PRE"||z.tagName==="TEXTAREA")&&(G=G.slice(1)),z.textContent!==G&&(g0(z,0)||Wf(),z.textContent=Y.children)}if(J){if(B||!O||U&48){const G=z.tagName.includes("-");for(const _e in J)(B&&(_e.endsWith("value")||_e==="indeterminate")||Em(_e)&&!pp(_e)||_e[0]==="."||G)&&r(z,_e,null,J[_e],void 0,ne)}else if(J.onClick)r(z,"onClick",null,J.onClick,void 0,ne);else if(U&4&&Zc(J.style))for(const G in J.style)J.style[G]}let Q;(Q=J&&J.onVnodeBeforeMount)&&Xl(Q,ne,Y),V&&Uc(Y,null,ne,"beforeMount"),((Q=J&&J.onVnodeMounted)||V||I)&&GS(()=>{Q&&Xl(Q,ne,Y),I&&$.enter(z),V&&Uc(Y,null,ne,"mounted")},ge)}return z.nextSibling},g=(z,Y,ne,ge,pe,O,j)=>{j=j||!!Y.dynamicChildren;const J=Y.children,U=J.length;for(let R=0;R<U;R++){const V=j?J[R]:J[R]=Jl(J[R]),$=V.type===vh;z?($&&!j&&R+1<U&&Jl(J[R+1]).type===vh&&(l(i(z.data.slice(V.children.length)),ne,s(z)),z.data=V.children),z=p(z,V,ge,pe,O,j)):$&&!V.children?l(V.el=i(""),ne):(g0(ne,1)||Wf(),n(null,V,ne,null,ge,pe,p0(ne),O))}return z},x=(z,Y,ne,ge,pe,O)=>{const{slotScopeIds:j}=Y;j&&(pe=pe?pe.concat(j):j);const J=o(z),U=g(s(z),Y,J,ne,ge,pe,O);return U&&up(U)&&U.data==="]"?s(Y.anchor=U):(Wf(),l(Y.anchor=c("]"),J,U),U)},E=(z,Y,ne,ge,pe,O)=>{if(g0(z.parentElement,1)||Wf(),Y.el=null,O){const U=D(z);for(;;){const R=s(z);if(R&&R!==U)a(R);else break}}const j=s(z),J=o(z);return a(z),n(null,Y,J,j,ne,ge,p0(J),pe),ne&&(ne.vnode.el=Y.el,Py(ne,Y.el)),j},D=(z,Y="[",ne="]")=>{let ge=0;for(;z;)if(z=s(z),z&&up(z)&&(z.data===Y&&ge++,z.data===ne)){if(ge===0)return s(z);ge--}return z},M=(z,Y,ne)=>{const ge=Y.parentNode;ge&&ge.replaceChild(z,Y);let pe=ne;for(;pe;)pe.vnode.el===Y&&(pe.vnode.el=pe.subTree.el=z),pe=pe.parent},A=z=>z.nodeType===1&&z.tagName==="TEMPLATE";return[h,p]}const Ix="data-allow-mismatch",V8={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function g0(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Ix);)t=t.parentElement;const n=t&&t.getAttribute(Ix);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:n.split(",").includes(V8[e])}}const U8=py().requestIdleCallback||(t=>setTimeout(t,1)),H8=py().cancelIdleCallback||(t=>clearTimeout(t)),W8=(t=1e4)=>e=>{const n=U8(e,{timeout:t});return()=>H8(n)};function G8(t){const{top:e,left:n,bottom:r,right:i}=t.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(e>0&&e<s||r>0&&r<s)&&(n>0&&n<o||i>0&&i<o)}const q8=t=>(e,n)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),e();break}},t);return n(i=>{if(i instanceof Element){if(G8(i))return e(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},Y8=t=>e=>{if(t){const n=matchMedia(t);if(n.matches)e();else return n.addEventListener("change",e,{once:!0}),()=>n.removeEventListener("change",e)}},K8=(t=[])=>(e,n)=>{Is(t)&&(t=[t]);let r=!1;const i=o=>{r||(r=!0,s(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{n(o=>{for(const a of t)o.removeEventListener(a,i)})};return n(o=>{for(const a of t)o.addEventListener(a,i,{once:!0})}),s};function Z8(t,e){if(up(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(up(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const mh=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function X8(t){Ir(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:a=!0,onError:l}=t;let c=null,h,p=0;const v=()=>(p++,c=null,g()),g=()=>{let x;return c||(x=c=e().catch(E=>{if(E=E instanceof Error?E:new Error(String(E)),l)return new Promise((D,M)=>{l(E,()=>D(v()),()=>M(E),p+1)});throw E}).then(E=>x!==c&&c?c:(E&&(E.__esModule||E[Symbol.toStringTag]==="Module")&&(E=E.default),h=E,E)))};return Hs({name:"AsyncComponentWrapper",__asyncLoader:g,__asyncHydrate(x,E,D){const M=s?()=>{const A=s(D,z=>Z8(x,z));A&&(E.bum||(E.bum=[])).push(A)}:D;h?M():g().then(()=>!E.isUnmounted&&M())},get __asyncResolved(){return h},setup(){const x=va;if(b_(x),h)return()=>D1(h,x);const E=z=>{c=null,Lf(z,x,13,!r)};if(a&&x.suspense||Sp)return g().then(z=>()=>D1(z,x)).catch(z=>(E(z),()=>r?yi(r,{error:z}):null));const D=Ct(!1),M=Ct(),A=Ct(!!i);return i&&setTimeout(()=>{A.value=!1},i),o!=null&&setTimeout(()=>{if(!D.value&&!M.value){const z=new Error(`Async component timed out after ${o}ms.`);E(z),M.value=z}},o),g().then(()=>{D.value=!0,x.parent&&Mm(x.parent.vnode)&&x.parent.update()}).catch(z=>{E(z),M.value=z}),()=>{if(D.value&&h)return D1(h,x);if(M.value&&r)return yi(r,{error:M.value});if(n&&!A.value)return yi(n)}}})}function D1(t,e){const{ref:n,props:r,children:i,ce:s}=e.vnode,o=yi(t,r,i);return o.ref=n,o.ce=s,delete e.vnode.ce,o}const Mm=t=>t.type.__isKeepAlive,J8={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Ju(),r=n.ctx;if(!r.renderer)return()=>{const A=e.default&&e.default();return A&&A.length===1?A[0]:A};const i=new Map,s=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:c,um:h,o:{createElement:p}}}=r,v=p("div");r.activate=(A,z,Y,ne,ge)=>{const pe=A.component;c(A,z,Y,0,a),l(pe.vnode,A,z,Y,pe,a,ne,A.slotScopeIds,ge),ga(()=>{pe.isDeactivated=!1,pe.a&&gp(pe.a);const O=A.props&&A.props.onVnodeMounted;O&&Xl(O,pe.parent,A)},a)},r.deactivate=A=>{const z=A.component;Av(z.m),Av(z.a),c(A,v,null,1,a),ga(()=>{z.da&&gp(z.da);const Y=A.props&&A.props.onVnodeUnmounted;Y&&Xl(Y,z.parent,A),z.isDeactivated=!0},a)};function g(A){N1(A),h(A,n,a,!0)}function x(A){i.forEach((z,Y)=>{const ne=K2(z.type);ne&&!A(ne)&&E(Y)})}function E(A){const z=i.get(A);z&&(!o||!yc(z,o))?g(z):o&&N1(o),i.delete(A),s.delete(A)}Ti(()=>[t.include,t.exclude],([A,z])=>{A&&x(Y=>vg(A,Y)),z&&x(Y=>!vg(z,Y))},{flush:"post",deep:!0});let D=null;const M=()=>{D!=null&&(Tv(n.subTree.type)?ga(()=>{i.set(D,m0(n.subTree))},n.subTree.suspense):i.set(D,m0(n.subTree)))};return Lo(M),Cy(M),kh(()=>{i.forEach(A=>{const{subTree:z,suspense:Y}=n,ne=m0(z);if(A.type===ne.type&&A.key===ne.key){N1(ne);const ge=ne.component.da;ge&&ga(ge,Y);return}g(A)})}),()=>{if(D=null,!e.default)return o=null;const A=e.default(),z=A[0];if(A.length>1)return o=null,A;if(!Bd(z)||!(z.shapeFlag&4)&&!(z.shapeFlag&128))return o=null,z;let Y=m0(z);if(Y.type===ca)return o=null,Y;const ne=Y.type,ge=K2(mh(Y)?Y.type.__asyncResolved||{}:ne),{include:pe,exclude:O,max:j}=t;if(pe&&(!ge||!vg(pe,ge))||O&&ge&&vg(O,ge))return Y.shapeFlag&=-257,o=Y,z;const J=Y.key==null?ne:Y.key,U=i.get(J);return Y.el&&(Y=ed(Y),z.shapeFlag&128&&(z.ssContent=Y)),D=J,U?(Y.el=U.el,Y.component=U.component,Y.transition&&Id(Y,Y.transition),Y.shapeFlag|=512,s.delete(J),s.add(J)):(s.add(J),j&&s.size>parseInt(j,10)&&E(s.values().next().value)),Y.shapeFlag|=256,o=Y,Tv(z.type)?z:Y}}},Q8=J8;function vg(t,e){return ar(t)?t.some(n=>vg(n,e)):Is(t)?t.split(",").includes(e):kD(t)?(t.lastIndex=0,t.test(e)):!1}function dS(t,e){fS(t,"a",e)}function hS(t,e){fS(t,"da",e)}function fS(t,e,n=va){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Sy(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Mm(i.parent.vnode)&&eN(r,e,n,i),i=i.parent}}function eN(t,e,n,r){const i=Sy(e,t,r,!0);Zu(()=>{i_(r[e],i)},n)}function N1(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function m0(t){return t.shapeFlag&128?t.ssContent:t}function Sy(t,e,n=va,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{Ph();const a=vf(n),l=Ku(e,n,t,o);return a(),Mh(),l});return r?i.unshift(s):i.push(s),s}}const Fd=t=>(e,n=va)=>{(!Sp||t==="sp")&&Sy(t,(...r)=>e(...r),n)},pS=Fd("bm"),Lo=Fd("m"),__=Fd("bu"),Cy=Fd("u"),kh=Fd("bum"),Zu=Fd("um"),gS=Fd("sp"),mS=Fd("rtg"),vS=Fd("rtc");function yS(t,e=va){Sy("ec",t,e)}const w_="components",tN="directives";function bS(t,e){return x_(w_,t,!0,e)||t}const _S=Symbol.for("v-ndc");function nN(t){return Is(t)?x_(w_,t,!1)||t:t||_S}function rN(t){return x_(tN,t)}function x_(t,e,n=!0,r=!1){const i=ya||va;if(i){const s=i.type;if(t===w_){const a=K2(s,!1);if(a&&(a===e||a===Ya(e)||a===Pm(Ya(e))))return s}const o=Bx(i[t]||s[t],e)||Bx(i.appContext[t],e);return!o&&r?s:o}}function Bx(t,e){return t&&(t[e]||t[Ya(e)]||t[Pm(Ya(e))])}function Qn(t,e,n,r){let i;const s=n&&n[r],o=ar(t);if(o||Is(t)){const a=o&&Zc(t);let l=!1;a&&(l=!Pu(t),t=vy(t)),i=new Array(t.length);for(let c=0,h=t.length;c<h;c++)i[c]=e(l?pl(t[c]):t[c],c,void 0,s&&s[c])}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s&&s[a])}else if(vs(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s&&s[l]));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const h=a[l];i[l]=e(t[h],h,l,s&&s[l])}}else i=[];return n&&(n[r]=i),i}function iN(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(ar(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return t}function sN(t,e,n={},r,i){if(ya.ce||ya.parent&&mh(ya.parent)&&ya.parent.ce)return e!=="default"&&(n.name=e),Ne(),ua(wn,null,[yi("slot",n,r&&r())],64);let s=t[e];s&&s._c&&(s._d=!1),Ne();const o=s&&L_(s(n)),a=n.key||o&&o.key,l=ua(wn,{key:(a&&!Lc(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function L_(t){return t.some(e=>Bd(e)?!(e.type===ca||e.type===wn&&!L_(e.children)):!0)?t:null}function oN(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:Ng(r)]=t[r];return n}const F2=t=>t?QS(t)?Am(t):F2(t.parent):null,Rg=Es(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>F2(t.parent),$root:t=>F2(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>S_(t),$forceUpdate:t=>t.f||(t.f=()=>{m_(t.update)}),$nextTick:t=>t.n||(t.n=ma.bind(t.proxy)),$watch:t=>BN.bind(t)}),O1=(t,e)=>t!==Vi&&!t.__isScriptSetup&&is(t,e),j2={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(O1(r,e))return o[e]=1,r[e];if(i!==Vi&&is(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&is(c,e))return o[e]=3,s[e];if(n!==Vi&&is(n,e))return o[e]=4,n[e];z2&&(o[e]=0)}}const h=Rg[e];let p,v;if(h)return e==="$attrs"&&fl(t.attrs,"get",""),h(t);if((p=a.__cssModules)&&(p=p[e]))return p;if(n!==Vi&&is(n,e))return o[e]=4,n[e];if(v=l.config.globalProperties,is(v,e))return v[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return O1(i,e)?(i[e]=n,!0):r!==Vi&&is(r,e)?(r[e]=n,!0):is(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==Vi&&is(t,o)||O1(e,o)||(a=s[0])&&is(a,o)||is(r,o)||is(Rg,o)||is(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:is(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},aN=Es({},j2,{get(t,e){if(e!==Symbol.unscopables)return j2.get(t,e,t)},has(t,e){return e[0]!=="_"&&!OD(e)}});function lN(){return null}function uN(){return null}function cN(t){}function dN(t){}function hN(){return null}function fN(){}function pN(t,e){return null}function gN(){return wS().slots}function mN(){return wS().attrs}function wS(){const t=Ju();return t.setupContext||(t.setupContext=nC(t))}function cm(t){return ar(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function vN(t,e){const n=cm(t);for(const r in e){if(r.startsWith("__skip"))continue;let i=n[r];i?ar(i)||Ir(i)?i=n[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=n[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function yN(t,e){return!t||!e?t||e:ar(t)&&ar(e)?t.concat(e):Es({},cm(t),cm(e))}function bN(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function _N(t){const e=Ju();let n=t();return G2(),s_(n)&&(n=n.catch(r=>{throw vf(e),r})),[n,()=>vf(e)]}let z2=!0;function wN(t){const e=S_(t),n=t.proxy,r=t.ctx;z2=!1,e.beforeCreate&&Rx(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:p,mounted:v,beforeUpdate:g,updated:x,activated:E,deactivated:D,beforeDestroy:M,beforeUnmount:A,destroyed:z,unmounted:Y,render:ne,renderTracked:ge,renderTriggered:pe,errorCaptured:O,serverPrefetch:j,expose:J,inheritAttrs:U,components:R,directives:V,filters:$}=e;if(c&&xN(c,r,null),o)for(const Q in o){const G=o[Q];Ir(G)&&(r[Q]=G.bind(n))}if(i){const Q=i.call(n,n);vs(Q)&&(t.data=ou(Q))}if(z2=!0,s)for(const Q in s){const G=s[Q],_e=Ir(G)?G.bind(n,n):Ir(G.get)?G.get.bind(n,n):qu,ve=!Ir(G)&&Ir(G.set)?G.set.bind(n):qu,qe=Xn({get:_e,set:ve});Object.defineProperty(r,Q,{enumerable:!0,configurable:!0,get:()=>qe.value,set:re=>qe.value=re})}if(a)for(const Q in a)xS(a[Q],r,n,Q);if(l){const Q=Ir(l)?l.call(n):l;Reflect.ownKeys(Q).forEach(G=>{Fg(G,Q[G])})}h&&Rx(h,t,"c");function I(Q,G){ar(G)?G.forEach(_e=>Q(_e.bind(n))):G&&Q(G.bind(n))}if(I(pS,p),I(Lo,v),I(__,g),I(Cy,x),I(dS,E),I(hS,D),I(yS,O),I(vS,ge),I(mS,pe),I(kh,A),I(Zu,Y),I(gS,j),ar(J))if(J.length){const Q=t.exposed||(t.exposed={});J.forEach(G=>{Object.defineProperty(Q,G,{get:()=>n[G],set:_e=>n[G]=_e})})}else t.exposed||(t.exposed={});ne&&t.render===qu&&(t.render=ne),U!=null&&(t.inheritAttrs=U),R&&(t.components=R),V&&(t.directives=V),j&&b_(t)}function xN(t,e,n=qu){ar(t)&&(t=$2(t));for(const r in t){const i=t[r];let s;vs(i)?"default"in i?s=Mu(i.from||r,i.default,!0):s=Mu(i.from||r):s=Mu(i),wo(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Rx(t,e,n){Ku(ar(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function xS(t,e,n,r){let i=r.includes(".")?VS(n,r):()=>n[r];if(Is(t)){const s=e[t];Ir(s)&&Ti(i,s)}else if(Ir(t))Ti(i,t.bind(n));else if(vs(t))if(ar(t))t.forEach(s=>xS(s,e,n,r));else{const s=Ir(t.handler)?t.handler.bind(n):e[t.handler];Ir(s)&&Ti(i,s,t)}}function S_(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>kv(l,c,o,!0)),kv(l,e,o)),vs(e)&&s.set(e,l),l}function kv(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&kv(t,s,n,!0),i&&i.forEach(o=>kv(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=LN[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const LN={data:Fx,props:jx,emits:jx,methods:yg,computed:yg,beforeCreate:Ml,created:Ml,beforeMount:Ml,mounted:Ml,beforeUpdate:Ml,updated:Ml,beforeDestroy:Ml,beforeUnmount:Ml,destroyed:Ml,unmounted:Ml,activated:Ml,deactivated:Ml,errorCaptured:Ml,serverPrefetch:Ml,components:yg,directives:yg,watch:CN,provide:Fx,inject:SN};function Fx(t,e){return e?t?function(){return Es(Ir(t)?t.call(this,this):t,Ir(e)?e.call(this,this):e)}:e:t}function SN(t,e){return yg($2(t),$2(e))}function $2(t){if(ar(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ml(t,e){return t?[...new Set([].concat(t,e))]:e}function yg(t,e){return t?Es(Object.create(null),t,e):e}function jx(t,e){return t?ar(t)&&ar(e)?[...new Set([...t,...e])]:Es(Object.create(null),cm(t),cm(e??{})):e}function CN(t,e){if(!t)return e;if(!e)return t;const n=Es(Object.create(null),t);for(const r in e)n[r]=Ml(t[r],e[r]);return n}function LS(){return{app:null,config:{isNativeTag:PD,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let EN=0;function PN(t,e){return function(r,i=null){Ir(r)||(r=Es({},r)),i!=null&&!vs(i)&&(i=null);const s=LS(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:EN++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:iC,get config(){return s.config},set config(h){},use(h,...p){return o.has(h)||(h&&Ir(h.install)?(o.add(h),h.install(c,...p)):Ir(h)&&(o.add(h),h(c,...p))),c},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),c},component(h,p){return p?(s.components[h]=p,c):s.components[h]},directive(h,p){return p?(s.directives[h]=p,c):s.directives[h]},mount(h,p,v){if(!l){const g=c._ceVNode||yi(r,i);return g.appContext=s,v===!0?v="svg":v===!1&&(v=void 0),p&&e?e(g,h):t(g,h,v),l=!0,c._container=h,h.__vue_app__=c,Am(g.component)}},onUnmount(h){a.push(h)},unmount(){l&&(Ku(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(h,p){return s.provides[h]=p,c},runWithContext(h){const p=uf;uf=c;try{return h()}finally{uf=p}}};return c}}let uf=null;function Fg(t,e){if(va){let n=va.provides;const r=va.parent&&va.parent.provides;r===n&&(n=va.provides=Object.create(r)),n[t]=e}}function Mu(t,e,n=!1){const r=va||ya;if(r||uf){const i=uf?uf._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Ir(e)?e.call(r&&r.proxy):e}}function SS(){return!!(va||ya||uf)}const CS={},ES=()=>Object.create(CS),PS=t=>Object.getPrototypeOf(t)===CS;function MN(t,e,n,r=!1){const i={},s=ES();t.propsDefaults=Object.create(null),MS(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:f_(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function kN(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=$i(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let p=0;p<h.length;p++){let v=h[p];if(Ey(t.emitsOptions,v))continue;const g=e[v];if(l)if(is(s,v))g!==s[v]&&(s[v]=g,c=!0);else{const x=Ya(v);i[x]=V2(l,a,x,g,t,!1)}else g!==s[v]&&(s[v]=g,c=!0)}}}else{MS(t,e,i,s)&&(c=!0);let h;for(const p in a)(!e||!is(e,p)&&((h=Ql(p))===p||!is(e,h)))&&(l?n&&(n[p]!==void 0||n[h]!==void 0)&&(i[p]=V2(l,a,p,void 0,t,!0)):delete i[p]);if(s!==a)for(const p in s)(!e||!is(e,p))&&(delete s[p],c=!0)}c&&Ed(t.attrs,"set","")}function MS(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(pp(l))continue;const c=e[l];let h;i&&is(i,h=Ya(l))?!s||!s.includes(h)?n[h]=c:(a||(a={}))[h]=c:Ey(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=$i(n),c=a||Vi;for(let h=0;h<s.length;h++){const p=s[h];n[p]=V2(i,l,p,c[p],t,!is(c,p))}}return o}function V2(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=is(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ir(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const h=vf(i);r=c[n]=l.call(null,e),h()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Ql(n))&&(r=!0))}return r}const AN=new WeakMap;function kS(t,e,n=!1){const r=n?AN:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!Ir(t)){const h=p=>{l=!0;const[v,g]=kS(p,e,!0);Es(o,v),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!s&&!l)return vs(t)&&r.set(t,hp),hp;if(ar(s))for(let h=0;h<s.length;h++){const p=Ya(s[h]);zx(p)&&(o[p]=Vi)}else if(s)for(const h in s){const p=Ya(h);if(zx(p)){const v=s[h],g=o[p]=ar(v)||Ir(v)?{type:v}:Es({},v),x=g.type;let E=!1,D=!0;if(ar(x))for(let M=0;M<x.length;++M){const A=x[M],z=Ir(A)&&A.name;if(z==="Boolean"){E=!0;break}else z==="String"&&(D=!1)}else E=Ir(x)&&x.name==="Boolean";g[0]=E,g[1]=D,(E||is(g,"default"))&&a.push(p)}}const c=[o,a];return vs(t)&&r.set(t,c),c}function zx(t){return t[0]!=="$"&&!pp(t)}const AS=t=>t[0]==="_"||t==="$stable",C_=t=>ar(t)?t.map(Jl):[Jl(t)],TN=(t,e,n)=>{if(e._n)return e;const r=Gu((...i)=>C_(e(...i)),n);return r._c=!1,r},TS=(t,e,n)=>{const r=t._ctx;for(const i in t){if(AS(i))continue;const s=t[i];if(Ir(s))e[i]=TN(i,s,r);else if(s!=null){const o=C_(s);e[i]=()=>o}}},DS=(t,e)=>{const n=C_(e);t.slots.default=()=>n},NS=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},DN=(t,e,n)=>{const r=t.slots=ES();if(t.vnode.shapeFlag&32){const i=e._;i?(NS(r,e,n),n&&PL(r,"_",i,!0)):TS(e,r)}else e&&DS(t,e)},NN=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=Vi;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:NS(i,e,n):(s=!e.$stable,TS(e,i)),o=e}else e&&(DS(t,e),o={default:1});if(s)for(const a in i)!AS(a)&&o[a]==null&&delete i[a]},ga=GS;function OS(t){return BS(t)}function IS(t){return BS(t,$8)}function BS(t,e){const n=py();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:p,nextSibling:v,setScopeId:g=qu,insertStaticContent:x}=t,E=(fe,ee,se,le=null,je=null,$e=null,et=void 0,Ee=null,me=!!ee.dynamicChildren)=>{if(fe===ee)return;fe&&!yc(fe,ee)&&(le=ye(fe),re(fe,je,$e,!0),fe=null),ee.patchFlag===-2&&(me=!1,ee.dynamicChildren=null);const{type:We,ref:ct,shapeFlag:pt}=ee;switch(We){case vh:D(fe,ee,se,le);break;case ca:M(fe,ee,se,le);break;case cf:fe==null&&A(ee,se,le,et);break;case wn:R(fe,ee,se,le,je,$e,et,Ee,me);break;default:pt&1?ne(fe,ee,se,le,je,$e,et,Ee,me):pt&6?V(fe,ee,se,le,je,$e,et,Ee,me):(pt&64||pt&128)&&We.process(fe,ee,se,le,je,$e,et,Ee,me,Ae)}ct!=null&&je&&um(ct,fe&&fe.ref,$e,ee||fe,!ee)},D=(fe,ee,se,le)=>{if(fe==null)r(ee.el=a(ee.children),se,le);else{const je=ee.el=fe.el;ee.children!==fe.children&&c(je,ee.children)}},M=(fe,ee,se,le)=>{fe==null?r(ee.el=l(ee.children||""),se,le):ee.el=fe.el},A=(fe,ee,se,le)=>{[fe.el,fe.anchor]=x(fe.children,ee,se,le,fe.el,fe.anchor)},z=({el:fe,anchor:ee},se,le)=>{let je;for(;fe&&fe!==ee;)je=v(fe),r(fe,se,le),fe=je;r(ee,se,le)},Y=({el:fe,anchor:ee})=>{let se;for(;fe&&fe!==ee;)se=v(fe),i(fe),fe=se;i(ee)},ne=(fe,ee,se,le,je,$e,et,Ee,me)=>{ee.type==="svg"?et="svg":ee.type==="math"&&(et="mathml"),fe==null?ge(ee,se,le,je,$e,et,Ee,me):j(fe,ee,je,$e,et,Ee,me)},ge=(fe,ee,se,le,je,$e,et,Ee)=>{let me,We;const{props:ct,shapeFlag:pt,transition:gt,dirs:st}=fe;if(me=fe.el=o(fe.type,$e,ct&&ct.is,ct),pt&8?h(me,fe.children):pt&16&&O(fe.children,me,null,le,je,I1(fe,$e),et,Ee),st&&Uc(fe,null,le,"created"),pe(me,fe,fe.scopeId,et,le),ct){for(const gn in ct)gn!=="value"&&!pp(gn)&&s(me,gn,null,ct[gn],$e,le);"value"in ct&&s(me,"value",null,ct.value,$e),(We=ct.onVnodeBeforeMount)&&Xl(We,le,fe)}st&&Uc(fe,null,le,"beforeMount");const qt=RS(je,gt);qt&&gt.beforeEnter(me),r(me,ee,se),((We=ct&&ct.onVnodeMounted)||qt||st)&&ga(()=>{We&&Xl(We,le,fe),qt&&gt.enter(me),st&&Uc(fe,null,le,"mounted")},je)},pe=(fe,ee,se,le,je)=>{if(se&&g(fe,se),le)for(let $e=0;$e<le.length;$e++)g(fe,le[$e]);if(je){let $e=je.subTree;if(ee===$e||Tv($e.type)&&($e.ssContent===ee||$e.ssFallback===ee)){const et=je.vnode;pe(fe,et,et.scopeId,et.slotScopeIds,je.parent)}}},O=(fe,ee,se,le,je,$e,et,Ee,me=0)=>{for(let We=me;We<fe.length;We++){const ct=fe[We]=Ee?sh(fe[We]):Jl(fe[We]);E(null,ct,ee,se,le,je,$e,et,Ee)}},j=(fe,ee,se,le,je,$e,et)=>{const Ee=ee.el=fe.el;let{patchFlag:me,dynamicChildren:We,dirs:ct}=ee;me|=fe.patchFlag&16;const pt=fe.props||Vi,gt=ee.props||Vi;let st;if(se&&$h(se,!1),(st=gt.onVnodeBeforeUpdate)&&Xl(st,se,ee,fe),ct&&Uc(ee,fe,se,"beforeUpdate"),se&&$h(se,!0),(pt.innerHTML&&gt.innerHTML==null||pt.textContent&&gt.textContent==null)&&h(Ee,""),We?J(fe.dynamicChildren,We,Ee,se,le,I1(ee,je),$e):et||G(fe,ee,Ee,null,se,le,I1(ee,je),$e,!1),me>0){if(me&16)U(Ee,pt,gt,se,je);else if(me&2&&pt.class!==gt.class&&s(Ee,"class",null,gt.class,je),me&4&&s(Ee,"style",pt.style,gt.style,je),me&8){const qt=ee.dynamicProps;for(let gn=0;gn<qt.length;gn++){const Qe=qt[gn],lt=pt[Qe],it=gt[Qe];(it!==lt||Qe==="value")&&s(Ee,Qe,lt,it,je,se)}}me&1&&fe.children!==ee.children&&h(Ee,ee.children)}else!et&&We==null&&U(Ee,pt,gt,se,je);((st=gt.onVnodeUpdated)||ct)&&ga(()=>{st&&Xl(st,se,ee,fe),ct&&Uc(ee,fe,se,"updated")},le)},J=(fe,ee,se,le,je,$e,et)=>{for(let Ee=0;Ee<ee.length;Ee++){const me=fe[Ee],We=ee[Ee],ct=me.el&&(me.type===wn||!yc(me,We)||me.shapeFlag&70)?p(me.el):se;E(me,We,ct,null,le,je,$e,et,!0)}},U=(fe,ee,se,le,je)=>{if(ee!==se){if(ee!==Vi)for(const $e in ee)!pp($e)&&!($e in se)&&s(fe,$e,ee[$e],null,je,le);for(const $e in se){if(pp($e))continue;const et=se[$e],Ee=ee[$e];et!==Ee&&$e!=="value"&&s(fe,$e,Ee,et,je,le)}"value"in se&&s(fe,"value",ee.value,se.value,je)}},R=(fe,ee,se,le,je,$e,et,Ee,me)=>{const We=ee.el=fe?fe.el:a(""),ct=ee.anchor=fe?fe.anchor:a("");let{patchFlag:pt,dynamicChildren:gt,slotScopeIds:st}=ee;st&&(Ee=Ee?Ee.concat(st):st),fe==null?(r(We,se,le),r(ct,se,le),O(ee.children||[],se,ct,je,$e,et,Ee,me)):pt>0&&pt&64&&gt&&fe.dynamicChildren?(J(fe.dynamicChildren,gt,se,je,$e,et,Ee),(ee.key!=null||je&&ee===je.subTree)&&E_(fe,ee,!0)):G(fe,ee,se,ct,je,$e,et,Ee,me)},V=(fe,ee,se,le,je,$e,et,Ee,me)=>{ee.slotScopeIds=Ee,fe==null?ee.shapeFlag&512?je.ctx.activate(ee,se,le,et,me):$(ee,se,le,je,$e,et,me):B(fe,ee,me)},$=(fe,ee,se,le,je,$e,et)=>{const Ee=fe.component=JS(fe,le,je);if(Mm(fe)&&(Ee.ctx.renderer=Ae),eC(Ee,!1,et),Ee.asyncDep){if(je&&je.registerDep(Ee,I,et),!fe.el){const me=Ee.subTree=yi(ca);M(null,me,ee,se)}}else I(Ee,fe,ee,se,je,$e,et)},B=(fe,ee,se)=>{const le=ee.component=fe.component;if(VN(fe,ee,se))if(le.asyncDep&&!le.asyncResolved){Q(le,ee,se);return}else le.next=ee,le.update();else ee.el=fe.el,le.vnode=ee},I=(fe,ee,se,le,je,$e,et)=>{const Ee=()=>{if(fe.isMounted){let{next:pt,bu:gt,u:st,parent:qt,vnode:gn}=fe;{const Jt=FS(fe);if(Jt){pt&&(pt.el=gn.el,Q(fe,pt,et)),Jt.asyncDep.then(()=>{fe.isUnmounted||Ee()});return}}let Qe=pt,lt;$h(fe,!1),pt?(pt.el=gn.el,Q(fe,pt,et)):pt=gn,gt&&gp(gt),(lt=pt.props&&pt.props.onVnodeBeforeUpdate)&&Xl(lt,qt,pt,gn),$h(fe,!0);const it=K0(fe),$t=fe.subTree;fe.subTree=it,E($t,it,p($t.el),ye($t),fe,je,$e),pt.el=it.el,Qe===null&&Py(fe,it.el),st&&ga(st,je),(lt=pt.props&&pt.props.onVnodeUpdated)&&ga(()=>Xl(lt,qt,pt,gn),je)}else{let pt;const{el:gt,props:st}=ee,{bm:qt,m:gn,parent:Qe,root:lt,type:it}=fe,$t=mh(ee);if($h(fe,!1),qt&&gp(qt),!$t&&(pt=st&&st.onVnodeBeforeMount)&&Xl(pt,Qe,ee),$h(fe,!0),gt&&Xe){const Jt=()=>{fe.subTree=K0(fe),Xe(gt,fe.subTree,fe,je,null)};$t&&it.__asyncHydrate?it.__asyncHydrate(gt,fe,Jt):Jt()}else{lt.ce&&lt.ce._injectChildStyle(it);const Jt=fe.subTree=K0(fe);E(null,Jt,se,le,fe,je,$e),ee.el=Jt.el}if(gn&&ga(gn,je),!$t&&(pt=st&&st.onVnodeMounted)){const Jt=ee;ga(()=>Xl(pt,Qe,Jt),je)}(ee.shapeFlag&256||Qe&&mh(Qe.vnode)&&Qe.vnode.shapeFlag&256)&&fe.a&&ga(fe.a,je),fe.isMounted=!0,ee=se=le=null}};fe.scope.on();const me=fe.effect=new rm(Ee);fe.scope.off();const We=fe.update=me.run.bind(me),ct=fe.job=me.runIfDirty.bind(me);ct.i=fe,ct.id=fe.uid,me.scheduler=()=>m_(ct),$h(fe,!0),We()},Q=(fe,ee,se)=>{ee.component=fe;const le=fe.vnode.props;fe.vnode=ee,fe.next=null,kN(fe,ee.props,le,se),NN(fe,ee.children,se),Ph(),kx(fe),Mh()},G=(fe,ee,se,le,je,$e,et,Ee,me=!1)=>{const We=fe&&fe.children,ct=fe?fe.shapeFlag:0,pt=ee.children,{patchFlag:gt,shapeFlag:st}=ee;if(gt>0){if(gt&128){ve(We,pt,se,le,je,$e,et,Ee,me);return}else if(gt&256){_e(We,pt,se,le,je,$e,et,Ee,me);return}}st&8?(ct&16&&de(We,je,$e),pt!==We&&h(se,pt)):ct&16?st&16?ve(We,pt,se,le,je,$e,et,Ee,me):de(We,je,$e,!0):(ct&8&&h(se,""),st&16&&O(pt,se,le,je,$e,et,Ee,me))},_e=(fe,ee,se,le,je,$e,et,Ee,me)=>{fe=fe||hp,ee=ee||hp;const We=fe.length,ct=ee.length,pt=Math.min(We,ct);let gt;for(gt=0;gt<pt;gt++){const st=ee[gt]=me?sh(ee[gt]):Jl(ee[gt]);E(fe[gt],st,se,null,je,$e,et,Ee,me)}We>ct?de(fe,je,$e,!0,!1,pt):O(ee,se,le,je,$e,et,Ee,me,pt)},ve=(fe,ee,se,le,je,$e,et,Ee,me)=>{let We=0;const ct=ee.length;let pt=fe.length-1,gt=ct-1;for(;We<=pt&&We<=gt;){const st=fe[We],qt=ee[We]=me?sh(ee[We]):Jl(ee[We]);if(yc(st,qt))E(st,qt,se,null,je,$e,et,Ee,me);else break;We++}for(;We<=pt&&We<=gt;){const st=fe[pt],qt=ee[gt]=me?sh(ee[gt]):Jl(ee[gt]);if(yc(st,qt))E(st,qt,se,null,je,$e,et,Ee,me);else break;pt--,gt--}if(We>pt){if(We<=gt){const st=gt+1,qt=st<ct?ee[st].el:le;for(;We<=gt;)E(null,ee[We]=me?sh(ee[We]):Jl(ee[We]),se,qt,je,$e,et,Ee,me),We++}}else if(We>gt)for(;We<=pt;)re(fe[We],je,$e,!0),We++;else{const st=We,qt=We,gn=new Map;for(We=qt;We<=gt;We++){const Tn=ee[We]=me?sh(ee[We]):Jl(ee[We]);Tn.key!=null&&gn.set(Tn.key,We)}let Qe,lt=0;const it=gt-qt+1;let $t=!1,Jt=0;const Dn=new Array(it);for(We=0;We<it;We++)Dn[We]=0;for(We=st;We<=pt;We++){const Tn=fe[We];if(lt>=it){re(Tn,je,$e,!0);continue}let Jn;if(Tn.key!=null)Jn=gn.get(Tn.key);else for(Qe=qt;Qe<=gt;Qe++)if(Dn[Qe-qt]===0&&yc(Tn,ee[Qe])){Jn=Qe;break}Jn===void 0?re(Tn,je,$e,!0):(Dn[Jn-qt]=We+1,Jn>=Jt?Jt=Jn:$t=!0,E(Tn,ee[Jn],se,null,je,$e,et,Ee,me),lt++)}const vn=$t?ON(Dn):hp;for(Qe=vn.length-1,We=it-1;We>=0;We--){const Tn=qt+We,Jn=ee[Tn],en=Tn+1<ct?ee[Tn+1].el:le;Dn[We]===0?E(null,Jn,se,en,je,$e,et,Ee,me):$t&&(Qe<0||We!==vn[Qe]?qe(Jn,se,en,2):Qe--)}}},qe=(fe,ee,se,le,je=null)=>{const{el:$e,type:et,transition:Ee,children:me,shapeFlag:We}=fe;if(We&6){qe(fe.component.subTree,ee,se,le);return}if(We&128){fe.suspense.move(ee,se,le);return}if(We&64){et.move(fe,ee,se,Ae);return}if(et===wn){r($e,ee,se);for(let pt=0;pt<me.length;pt++)qe(me[pt],ee,se,le);r(fe.anchor,ee,se);return}if(et===cf){z(fe,ee,se);return}if(le!==2&&We&1&&Ee)if(le===0)Ee.beforeEnter($e),r($e,ee,se),ga(()=>Ee.enter($e),je);else{const{leave:pt,delayLeave:gt,afterLeave:st}=Ee,qt=()=>r($e,ee,se),gn=()=>{pt($e,()=>{qt(),st&&st()})};gt?gt($e,qt,gn):gn()}else r($e,ee,se)},re=(fe,ee,se,le=!1,je=!1)=>{const{type:$e,props:et,ref:Ee,children:me,dynamicChildren:We,shapeFlag:ct,patchFlag:pt,dirs:gt,cacheIndex:st}=fe;if(pt===-2&&(je=!1),Ee!=null&&um(Ee,null,se,fe,!0),st!=null&&(ee.renderCache[st]=void 0),ct&256){ee.ctx.deactivate(fe);return}const qt=ct&1&&gt,gn=!mh(fe);let Qe;if(gn&&(Qe=et&&et.onVnodeBeforeUnmount)&&Xl(Qe,ee,fe),ct&6)oe(fe.component,se,le);else{if(ct&128){fe.suspense.unmount(se,le);return}qt&&Uc(fe,null,ee,"beforeUnmount"),ct&64?fe.type.remove(fe,ee,se,Ae,le):We&&!We.hasOnce&&($e!==wn||pt>0&&pt&64)?de(We,ee,se,!1,!0):($e===wn&&pt&384||!je&&ct&16)&&de(me,ee,se),le&&K(fe)}(gn&&(Qe=et&&et.onVnodeUnmounted)||qt)&&ga(()=>{Qe&&Xl(Qe,ee,fe),qt&&Uc(fe,null,ee,"unmounted")},se)},K=fe=>{const{type:ee,el:se,anchor:le,transition:je}=fe;if(ee===wn){Z(se,le);return}if(ee===cf){Y(fe);return}const $e=()=>{i(se),je&&!je.persisted&&je.afterLeave&&je.afterLeave()};if(fe.shapeFlag&1&&je&&!je.persisted){const{leave:et,delayLeave:Ee}=je,me=()=>et(se,$e);Ee?Ee(fe.el,$e,me):me()}else $e()},Z=(fe,ee)=>{let se;for(;fe!==ee;)se=v(fe),i(fe),fe=se;i(ee)},oe=(fe,ee,se)=>{const{bum:le,scope:je,job:$e,subTree:et,um:Ee,m:me,a:We}=fe;Av(me),Av(We),le&&gp(le),je.stop(),$e&&($e.flags|=8,re(et,fe,ee,se)),Ee&&ga(Ee,ee),ga(()=>{fe.isUnmounted=!0},ee),ee&&ee.pendingBranch&&!ee.isUnmounted&&fe.asyncDep&&!fe.asyncResolved&&fe.suspenseId===ee.pendingId&&(ee.deps--,ee.deps===0&&ee.resolve())},de=(fe,ee,se,le=!1,je=!1,$e=0)=>{for(let et=$e;et<fe.length;et++)re(fe[et],ee,se,le,je)},ye=fe=>{if(fe.shapeFlag&6)return ye(fe.component.subTree);if(fe.shapeFlag&128)return fe.suspense.next();const ee=v(fe.anchor||fe.el),se=ee&&ee[rS];return se?v(se):ee};let he=!1;const X=(fe,ee,se)=>{fe==null?ee._vnode&&re(ee._vnode,null,null,!0):E(ee._vnode||null,fe,ee,null,null,null,se),ee._vnode=fe,he||(he=!0,kx(),Mv(),he=!1)},Ae={p:E,um:re,m:qe,r:K,mt:$,mc:O,pc:G,pbc:J,n:ye,o:t};let De,Xe;return e&&([De,Xe]=e(Ae)),{render:X,hydrate:De,createApp:PN(X,De)}}function I1({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function $h({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function RS(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function E_(t,e,n=!1){const r=t.children,i=e.children;if(ar(r)&&ar(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=sh(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&E_(o,a)),a.type===vh&&(a.el=o.el)}}function ON(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function FS(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:FS(e)}function Av(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const jS=Symbol.for("v-scx"),zS=()=>Mu(jS);function dm(t,e){return km(t,null,e)}function IN(t,e){return km(t,null,{flush:"post"})}function $S(t,e){return km(t,null,{flush:"sync"})}function Ti(t,e,n){return km(t,e,n)}function km(t,e,n=Vi){const{immediate:r,deep:i,flush:s,once:o}=n,a=Es({},n),l=e&&r||!e&&s!=="post";let c;if(Sp){if(s==="sync"){const g=zS();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=qu,g.resume=qu,g.pause=qu,g}}const h=va;a.call=(g,x,E)=>Ku(g,h,x,E);let p=!1;s==="post"?a.scheduler=g=>{ga(g,h&&h.suspense)}:s!=="sync"&&(p=!0,a.scheduler=(g,x)=>{x?g():m_(g)}),a.augmentJob=g=>{e&&(g.flags|=4),p&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const v=S8(t,e,a);return Sp&&(c?c.push(v):l&&v()),v}function BN(t,e,n){const r=this.proxy,i=Is(t)?t.includes(".")?VS(r,t):()=>r[t]:t.bind(r,r);let s;Ir(e)?s=e:(s=e.handler,n=e);const o=vf(this),a=km(i,s.bind(r),n);return o(),a}function VS(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function RN(t,e,n=Vi){const r=Ju(),i=Ya(e),s=Ql(e),o=US(t,i),a=YL((l,c)=>{let h,p=Vi,v;return $S(()=>{const g=t[i];Nl(h,g)&&(h=g,c())}),{get(){return l(),n.get?n.get(h):h},set(g){const x=n.set?n.set(g):g;if(!Nl(x,h)&&!(p!==Vi&&Nl(g,p)))return;const E=r.vnode.props;E&&(e in E||i in E||s in E)&&(`onUpdate:${e}`in E||`onUpdate:${i}`in E||`onUpdate:${s}`in E)||(h=g,c()),r.emit(`update:${e}`,x),Nl(g,x)&&Nl(g,p)&&!Nl(x,v)&&c(),p=g,v=x}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||Vi:a,done:!1}:{done:!0}}}},a}const US=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Ya(e)}Modifiers`]||t[`${Ql(e)}Modifiers`];function FN(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Vi;let i=n;const s=e.startsWith("update:"),o=s&&US(r,e.slice(7));o&&(o.trim&&(i=n.map(h=>Is(h)?h.trim():h)),o.number&&(i=n.map(Lv)));let a,l=r[a=Ng(e)]||r[a=Ng(Ya(e))];!l&&s&&(l=r[a=Ng(Ql(e))]),l&&Ku(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Ku(c,t,6,i)}}function HS(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Ir(t)){const l=c=>{const h=HS(c,e,!0);h&&(a=!0,Es(o,h))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(vs(t)&&r.set(t,null),null):(ar(s)?s.forEach(l=>o[l]=null):Es(o,s),vs(t)&&r.set(t,o),o)}function Ey(t,e){return!t||!Em(e)?!1:(e=e.slice(2).replace(/Once$/,""),is(t,e[0].toLowerCase()+e.slice(1))||is(t,Ql(e))||is(t,e))}function K0(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:h,props:p,data:v,setupState:g,ctx:x,inheritAttrs:E}=t,D=lm(t);let M,A;try{if(n.shapeFlag&4){const Y=i||r,ne=Y;M=Jl(c.call(ne,Y,h,p,g,v,x)),A=a}else{const Y=e;M=Jl(Y.length>1?Y(p,{attrs:a,slots:o,emit:l}):Y(p,null)),A=e.props?a:zN(a)}}catch(Y){jg.length=0,Lf(Y,t,1),M=yi(ca)}let z=M;if(A&&E!==!1){const Y=Object.keys(A),{shapeFlag:ne}=z;Y.length&&ne&7&&(s&&Y.some(r_)&&(A=$N(A,s)),z=ed(z,A,!1,!0))}return n.dirs&&(z=ed(z,null,!1,!0),z.dirs=z.dirs?z.dirs.concat(n.dirs):n.dirs),n.transition&&Id(z,n.transition),M=z,lm(D),M}function jN(t,e=!0){let n;for(let r=0;r<t.length;r++){const i=t[r];if(Bd(i)){if(i.type!==ca||i.children==="v-if"){if(n)return;n=i}}else return}return n}const zN=t=>{let e;for(const n in t)(n==="class"||n==="style"||Em(n))&&((e||(e={}))[n]=t[n]);return e},$N=(t,e)=>{const n={};for(const r in t)(!r_(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function VN(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?$x(r,o,c):!!o;if(l&8){const h=e.dynamicProps;for(let p=0;p<h.length;p++){const v=h[p];if(o[v]!==r[v]&&!Ey(c,v))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?$x(r,o,c):!0:!!o;return!1}function $x(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Ey(n,s))return!0}return!1}function Py({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Tv=t=>t.__isSuspense;let U2=0;const UN={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,c){if(t==null)WN(e,n,r,i,s,o,a,l,c);else{if(s&&s.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}GN(t,e,n,r,i,o,a,l,c)}},hydrate:qN,normalize:YN},HN=UN;function hm(t,e){const n=t.props&&t.props[e];Ir(n)&&n()}function WN(t,e,n,r,i,s,o,a,l){const{p:c,o:{createElement:h}}=l,p=h("div"),v=t.suspense=WS(t,i,r,e,p,n,s,o,a,l);c(null,v.pendingBranch=t.ssContent,p,null,r,v,s,o),v.deps>0?(hm(t,"onPending"),hm(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,s,o),vp(v,t.ssFallback)):v.resolve(!1,!0)}function GN(t,e,n,r,i,s,o,a,{p:l,um:c,o:{createElement:h}}){const p=e.suspense=t.suspense;p.vnode=e,e.el=t.el;const v=e.ssContent,g=e.ssFallback,{activeBranch:x,pendingBranch:E,isInFallback:D,isHydrating:M}=p;if(E)p.pendingBranch=v,yc(v,E)?(l(E,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():D&&(M||(l(x,g,n,r,i,null,s,o,a),vp(p,g)))):(p.pendingId=U2++,M?(p.isHydrating=!1,p.activeBranch=E):c(E,i,p),p.deps=0,p.effects.length=0,p.hiddenContainer=h("div"),D?(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():(l(x,g,n,r,i,null,s,o,a),vp(p,g))):x&&yc(v,x)?(l(x,v,n,r,i,p,s,o,a),p.resolve(!0)):(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0&&p.resolve()));else if(x&&yc(v,x))l(x,v,n,r,i,p,s,o,a),vp(p,v);else if(hm(e,"onPending"),p.pendingBranch=v,v.shapeFlag&512?p.pendingId=v.component.suspenseId:p.pendingId=U2++,l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0)p.resolve();else{const{timeout:A,pendingId:z}=p;A>0?setTimeout(()=>{p.pendingId===z&&p.fallback(g)},A):A===0&&p.fallback(g)}}function WS(t,e,n,r,i,s,o,a,l,c,h=!1){const{p,m:v,um:g,n:x,o:{parentNode:E,remove:D}}=c;let M;const A=KN(t);A&&e&&e.pendingBranch&&(M=e.pendingId,e.deps++);const z=t.props?Sv(t.props.timeout):void 0,Y=s,ne={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:U2++,timeout:typeof z=="number"?z:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(ge=!1,pe=!1){const{vnode:O,activeBranch:j,pendingBranch:J,pendingId:U,effects:R,parentComponent:V,container:$}=ne;let B=!1;ne.isHydrating?ne.isHydrating=!1:ge||(B=j&&J.transition&&J.transition.mode==="out-in",B&&(j.transition.afterLeave=()=>{U===ne.pendingId&&(v(J,$,s===Y?x(j):s,0),om(R))}),j&&(E(j.el)===$&&(s=x(j)),g(j,V,ne,!0)),B||v(J,$,s,0)),vp(ne,J),ne.pendingBranch=null,ne.isInFallback=!1;let I=ne.parent,Q=!1;for(;I;){if(I.pendingBranch){I.effects.push(...R),Q=!0;break}I=I.parent}!Q&&!B&&om(R),ne.effects=[],A&&e&&e.pendingBranch&&M===e.pendingId&&(e.deps--,e.deps===0&&!pe&&e.resolve()),hm(O,"onResolve")},fallback(ge){if(!ne.pendingBranch)return;const{vnode:pe,activeBranch:O,parentComponent:j,container:J,namespace:U}=ne;hm(pe,"onFallback");const R=x(O),V=()=>{ne.isInFallback&&(p(null,ge,J,R,j,null,U,a,l),vp(ne,ge))},$=ge.transition&&ge.transition.mode==="out-in";$&&(O.transition.afterLeave=V),ne.isInFallback=!0,g(O,j,null,!0),$||V()},move(ge,pe,O){ne.activeBranch&&v(ne.activeBranch,ge,pe,O),ne.container=ge},next(){return ne.activeBranch&&x(ne.activeBranch)},registerDep(ge,pe,O){const j=!!ne.pendingBranch;j&&ne.deps++;const J=ge.vnode.el;ge.asyncDep.catch(U=>{Lf(U,ge,0)}).then(U=>{if(ge.isUnmounted||ne.isUnmounted||ne.pendingId!==ge.suspenseId)return;ge.asyncResolved=!0;const{vnode:R}=ge;q2(ge,U,!1),J&&(R.el=J);const V=!J&&ge.subTree.el;pe(ge,R,E(J||ge.subTree.el),J?null:x(ge.subTree),ne,o,O),V&&D(V),Py(ge,R.el),j&&--ne.deps===0&&ne.resolve()})},unmount(ge,pe){ne.isUnmounted=!0,ne.activeBranch&&g(ne.activeBranch,n,ge,pe),ne.pendingBranch&&g(ne.pendingBranch,n,ge,pe)}};return ne}function qN(t,e,n,r,i,s,o,a,l){const c=e.suspense=WS(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),h=l(t,c.pendingBranch=e.ssContent,n,c,s,o);return c.deps===0&&c.resolve(!1,!0),h}function YN(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=Vx(r?n.default:n),t.ssFallback=r?Vx(n.fallback):yi(ca)}function Vx(t){let e;if(Ir(t)){const n=mf&&t._c;n&&(t._d=!1,Ne()),t=t(),n&&(t._d=!0,e=yl,qS())}return ar(t)&&(t=jN(t)),t=Jl(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function GS(t,e){e&&e.pendingBranch?ar(t)?e.effects.push(...t):e.effects.push(t):om(t)}function vp(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,Py(r,i))}function KN(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const wn=Symbol.for("v-fgt"),vh=Symbol.for("v-txt"),ca=Symbol.for("v-cmt"),cf=Symbol.for("v-stc"),jg=[];let yl=null;function Ne(t=!1){jg.push(yl=t?null:[])}function qS(){jg.pop(),yl=jg[jg.length-1]||null}let mf=1;function H2(t,e=!1){mf+=t,t<0&&yl&&e&&(yl.hasOnce=!0)}function YS(t){return t.dynamicChildren=mf>0?yl||hp:null,qS(),mf>0&&yl&&yl.push(t),t}function Be(t,e,n,r,i,s){return YS(S(t,e,n,r,i,s,!0))}function ua(t,e,n,r,i){return YS(yi(t,e,n,r,i,!0))}function Bd(t){return t?t.__v_isVNode===!0:!1}function yc(t,e){return t.type===e.type&&t.key===e.key}function ZN(t){}const KS=({key:t})=>t??null,Z0=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Is(t)||wo(t)||Ir(t)?{i:ya,r:t,k:e,f:!!n}:t:null);function S(t,e=null,n=null,r=0,i=null,s=t===wn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&KS(e),ref:e&&Z0(e),scopeId:xy,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ya};return a?(P_(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=Is(n)?8:16),mf>0&&!o&&yl&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&yl.push(l),l}const yi=XN;function XN(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===_S)&&(t=ca),Bd(t)){const a=ed(t,e,!0);return n&&P_(a,n),mf>0&&!s&&yl&&(a.shapeFlag&6?yl[yl.indexOf(t)]=a:yl.push(a)),a.patchFlag=-2,a}if(iO(t)&&(t=t.__vccOpts),e){e=ZS(e);let{class:a,style:l}=e;a&&!Is(a)&&(e.class=Ii(a)),vs(l)&&(_y(l)&&!ar(l)&&(l=Es({},l)),e.style=ru(l))}const o=Is(t)?1:Tv(t)?128:iS(t)?64:vs(t)?4:Ir(t)?2:0;return S(t,e,n,r,i,o,s,!0)}function ZS(t){return t?_y(t)||PS(t)?Es({},t):t:null}function ed(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,c=e?XS(i||{},e):i,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&KS(c),ref:e&&e.ref?n&&s?ar(s)?s.concat(Z0(e)):[s,Z0(e)]:Z0(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==wn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ed(t.ssContent),ssFallback:t.ssFallback&&ed(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Id(h,l.clone(h)),h}function ri(t=" ",e=0){return yi(vh,null,t,e)}function tu(t,e){const n=yi(cf,null,t);return n.staticCount=e,n}function Zt(t="",e=!1){return e?(Ne(),ua(ca,null,t)):yi(ca,null,t)}function Jl(t){return t==null||typeof t=="boolean"?yi(ca):ar(t)?yi(wn,null,t.slice()):Bd(t)?sh(t):yi(vh,null,String(t))}function sh(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ed(t)}function P_(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ar(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),P_(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!PS(e)?e._ctx=ya:i===3&&ya&&(ya.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ir(e)?(e={default:e,_ctx:ya},n=32):(e=String(e),r&64?(n=16,e=[ri(e)]):n=8);t.children=e,t.shapeFlag|=n}function XS(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Ii([e.class,r.class]));else if(i==="style")e.style=ru([e.style,r.style]);else if(Em(i)){const s=e[i],o=r[i];o&&s!==o&&!(ar(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Xl(t,e,n,r=null){Ku(t,e,7,[n,r])}const JN=LS();let QN=0;function JS(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||JN,s={uid:QN++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new a_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:kS(r,i),emitsOptions:HS(r,i),emit:null,emitted:null,propsDefaults:Vi,inheritAttrs:r.inheritAttrs,ctx:Vi,data:Vi,props:Vi,attrs:Vi,slots:Vi,refs:Vi,setupState:Vi,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=FN.bind(null,s),t.ce&&t.ce(s),s}let va=null;const Ju=()=>va||ya;let Dv,W2;{const t=py(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Dv=e("__VUE_INSTANCE_SETTERS__",n=>va=n),W2=e("__VUE_SSR_SETTERS__",n=>Sp=n)}const vf=t=>{const e=va;return Dv(t),t.scope.on(),()=>{t.scope.off(),Dv(e)}},G2=()=>{va&&va.scope.off(),Dv(null)};function QS(t){return t.vnode.shapeFlag&4}let Sp=!1;function eC(t,e=!1,n=!1){e&&W2(e);const{props:r,children:i}=t.vnode,s=QS(t);MN(t,r,s,e),DN(t,i,n);const o=s?eO(t,e):void 0;return e&&W2(!1),o}function eO(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,j2);const{setup:r}=n;if(r){Ph();const i=t.setupContext=r.length>1?nC(t):null,s=vf(t),o=Rp(r,t,0,[t.props,i]),a=s_(o);if(Mh(),s(),(a||t.sp)&&!mh(t)&&b_(t),a){if(o.then(G2,G2),e)return o.then(l=>{q2(t,l,e)}).catch(l=>{Lf(l,t,0)});t.asyncDep=o}else q2(t,o,e)}else tC(t,e)}function q2(t,e,n){Ir(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:vs(e)&&(t.setupState=g_(e)),tC(t,n)}let Nv,Y2;function tO(t){Nv=t,Y2=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,aN))}}const nO=()=>!Nv;function tC(t,e,n){const r=t.type;if(!t.render){if(!e&&Nv&&!r.render){const i=r.template||S_(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Es(Es({isCustomElement:s,delimiters:a},o),l);r.render=Nv(i,c)}}t.render=r.render||qu,Y2&&Y2(t)}{const i=vf(t);Ph();try{wN(t)}finally{Mh(),i()}}}const rO={get(t,e){return fl(t,"get",""),t[e]}};function nC(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,rO),slots:t.slots,emit:t.emit,expose:e}}function Am(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(g_(wy(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Rg)return Rg[n](t)},has(e,n){return n in e||n in Rg}})):t.proxy}function K2(t,e=!0){return Ir(t)?t.displayName||t.name:t.name||e&&t.__name}function iO(t){return Ir(t)&&"__vccOpts"in t}const Xn=(t,e)=>_8(t,e,Sp);function My(t,e,n){const r=arguments.length;return r===2?vs(e)&&!ar(e)?Bd(e)?yi(t,null,[e]):yi(t,e):yi(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Bd(n)&&(n=[n]),yi(t,e,n))}function sO(){}function oO(t,e,n,r){const i=n[r];if(i&&rC(i,t))return i;const s=e();return s.memo=t.slice(),s.cacheIndex=r,n[r]=s}function rC(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(Nl(n[r],e[r]))return!1;return mf>0&&yl&&yl.push(t),!0}const iC="3.5.13",aO=qu,lO=k8,uO=np,cO=nS,dO={createComponentInstance:JS,setupComponent:eC,renderComponentRoot:K0,setCurrentRenderingInstance:lm,isVNode:Bd,normalizeVNode:Jl,getComponentPublicInstance:Am,ensureValidVNode:L_,pushWarningContext:C8,popWarningContext:E8},hO=dO,fO=null,pO=null,gO=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Z2;const Ux=typeof window<"u"&&window.trustedTypes;if(Ux)try{Z2=Ux.createPolicy("vue",{createHTML:t=>t})}catch{}const sC=Z2?t=>Z2.createHTML(t):t=>t,mO="http://www.w3.org/2000/svg",vO="http://www.w3.org/1998/Math/MathML",Sd=typeof document<"u"?document:null,Hx=Sd&&Sd.createElement("template"),yO={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Sd.createElementNS(mO,t):e==="mathml"?Sd.createElementNS(vO,t):n?Sd.createElement(t,{is:n}):Sd.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Sd.createTextNode(t),createComment:t=>Sd.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Sd.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{Hx.innerHTML=sC(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=Hx.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Yd="transition",Xp="animation",Cp=Symbol("_vtc"),oC={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},aC=Es({},y_,oC),bO=t=>(t.displayName="Transition",t.props=aC,t),X2=bO((t,{slots:e})=>My(uS,lC(t),e)),Vh=(t,e=[])=>{ar(t)?t.forEach(n=>n(...e)):t&&t(...e)},Wx=t=>t?ar(t)?t.some(e=>e.length>1):t.length>1:!1;function lC(t){const e={};for(const R in t)R in oC||(e[R]=t[R]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:h=a,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:v=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=t,x=_O(i),E=x&&x[0],D=x&&x[1],{onBeforeEnter:M,onEnter:A,onEnterCancelled:z,onLeave:Y,onLeaveCancelled:ne,onBeforeAppear:ge=M,onAppear:pe=A,onAppearCancelled:O=z}=e,j=(R,V,$,B)=>{R._enterCancelled=B,eh(R,V?h:a),eh(R,V?c:o),$&&$()},J=(R,V)=>{R._isLeaving=!1,eh(R,p),eh(R,g),eh(R,v),V&&V()},U=R=>(V,$)=>{const B=R?pe:A,I=()=>j(V,R,$);Vh(B,[V,I]),Gx(()=>{eh(V,R?l:s),Fc(V,R?h:a),Wx(B)||qx(V,r,E,I)})};return Es(e,{onBeforeEnter(R){Vh(M,[R]),Fc(R,s),Fc(R,o)},onBeforeAppear(R){Vh(ge,[R]),Fc(R,l),Fc(R,c)},onEnter:U(!1),onAppear:U(!0),onLeave(R,V){R._isLeaving=!0;const $=()=>J(R,V);Fc(R,p),R._enterCancelled?(Fc(R,v),J2()):(J2(),Fc(R,v)),Gx(()=>{R._isLeaving&&(eh(R,p),Fc(R,g),Wx(Y)||qx(R,r,D,$))}),Vh(Y,[R,$])},onEnterCancelled(R){j(R,!1,void 0,!0),Vh(z,[R])},onAppearCancelled(R){j(R,!0,void 0,!0),Vh(O,[R])},onLeaveCancelled(R){J(R),Vh(ne,[R])}})}function _O(t){if(t==null)return null;if(vs(t))return[B1(t.enter),B1(t.leave)];{const e=B1(t);return[e,e]}}function B1(t){return Sv(t)}function Fc(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Cp]||(t[Cp]=new Set)).add(e)}function eh(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Cp];n&&(n.delete(e),n.size||(t[Cp]=void 0))}function Gx(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let wO=0;function qx(t,e,n,r){const i=t._endId=++wO,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=uC(t,e);if(!o)return r();const c=o+"end";let h=0;const p=()=>{t.removeEventListener(c,v),s()},v=g=>{g.target===t&&++h>=l&&p()};setTimeout(()=>{h<l&&p()},a+1),t.addEventListener(c,v)}function uC(t,e){const n=window.getComputedStyle(t),r=x=>(n[x]||"").split(", "),i=r(`${Yd}Delay`),s=r(`${Yd}Duration`),o=Yx(i,s),a=r(`${Xp}Delay`),l=r(`${Xp}Duration`),c=Yx(a,l);let h=null,p=0,v=0;e===Yd?o>0&&(h=Yd,p=o,v=s.length):e===Xp?c>0&&(h=Xp,p=c,v=l.length):(p=Math.max(o,c),h=p>0?o>c?Yd:Xp:null,v=h?h===Yd?s.length:l.length:0);const g=h===Yd&&/\b(transform|all)(,|$)/.test(r(`${Yd}Property`).toString());return{type:h,timeout:p,propCount:v,hasTransform:g}}function Yx(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Kx(n)+Kx(t[r])))}function Kx(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function J2(){return document.body.offsetHeight}function xO(t,e,n){const r=t[Cp];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ov=Symbol("_vod"),cC=Symbol("_vsh"),ky={beforeMount(t,{value:e},{transition:n}){t[Ov]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Jp(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Jp(t,!0),r.enter(t)):r.leave(t,()=>{Jp(t,!1)}):Jp(t,e))},beforeUnmount(t,{value:e}){Jp(t,e)}};function Jp(t,e){t.style.display=e?t[Ov]:"none",t[cC]=!e}function LO(){ky.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const dC=Symbol("");function SO(t){const e=Ju();if(!e)return;const n=e.ut=(i=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>Iv(s,i))},r=()=>{const i=t(e.proxy);e.ce?Iv(e.ce,i):Q2(e.subTree,i),n(i)};__(()=>{om(r)}),Lo(()=>{Ti(r,qu,{flush:"post"});const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),Zu(()=>i.disconnect())})}function Q2(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Q2(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)Iv(t.el,e);else if(t.type===wn)t.children.forEach(n=>Q2(n,e));else if(t.type===cf){let{el:n,anchor:r}=t;for(;n&&(Iv(n,e),n!==r);)n=n.nextSibling}}function Iv(t,e){if(t.nodeType===1){const n=t.style;let r="";for(const i in e)n.setProperty(`--${i}`,e[i]),r+=`--${i}: ${e[i]};`;n[dC]=r}}const CO=/(^|;)\s*display\s*:/;function EO(t,e,n){const r=t.style,i=Is(n);let s=!1;if(n&&!i){if(e)if(Is(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&X0(r,a,"")}else for(const o in e)n[o]==null&&X0(r,o,"");for(const o in n)o==="display"&&(s=!0),X0(r,o,n[o])}else if(i){if(e!==n){const o=r[dC];o&&(n+=";"+o),r.cssText=n,s=CO.test(n)}}else e&&t.removeAttribute("style");Ov in t&&(t[Ov]=s?r.display:"",t[cC]&&(r.display="none"))}const Zx=/\s*!important$/;function X0(t,e,n){if(ar(n))n.forEach(r=>X0(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=PO(t,e);Zx.test(n)?t.setProperty(Ql(r),n.replace(Zx,""),"important"):t[r]=n}}const Xx=["Webkit","Moz","ms"],R1={};function PO(t,e){const n=R1[e];if(n)return n;let r=Ya(e);if(r!=="filter"&&r in t)return R1[e]=r;r=Pm(r);for(let i=0;i<Xx.length;i++){const s=Xx[i]+r;if(s in t)return R1[e]=s}return e}const Jx="http://www.w3.org/1999/xlink";function Qx(t,e,n,r,i,s=$D(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Jx,e.slice(6,e.length)):t.setAttributeNS(Jx,e,n):n==null||s&&!ML(n)?t.removeAttribute(e):t.setAttribute(e,s?"":Lc(n)?String(n):n)}function e4(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?sC(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=ML(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function Md(t,e,n,r){t.addEventListener(e,n,r)}function MO(t,e,n,r){t.removeEventListener(e,n,r)}const t4=Symbol("_vei");function kO(t,e,n,r,i=null){const s=t[t4]||(t[t4]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=AO(e);if(r){const c=s[e]=NO(r,i);Md(t,a,c,l)}else o&&(MO(t,a,o,l),s[e]=void 0)}}const n4=/(?:Once|Passive|Capture)$/;function AO(t){let e;if(n4.test(t)){e={};let r;for(;r=t.match(n4);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ql(t.slice(2)),e]}let F1=0;const TO=Promise.resolve(),DO=()=>F1||(TO.then(()=>F1=0),F1=Date.now());function NO(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ku(OO(r,n.value),e,5,[r])};return n.value=t,n.attached=DO(),n}function OO(t,e){if(ar(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const r4=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,IO=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?xO(t,r,o):e==="style"?EO(t,n,r):Em(e)?r_(e)||kO(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):BO(t,e,r,o))?(e4(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Qx(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Is(r))?e4(t,Ya(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Qx(t,e,r,o))};function BO(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&r4(e)&&Ir(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return r4(e)&&Is(n)?!1:e in t}const i4={};/*! #__NO_SIDE_EFFECTS__ */function hC(t,e,n){const r=Hs(t,e);hy(r)&&Es(r,e);class i extends Ay{constructor(o){super(r,o,n)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const RO=(t,e)=>hC(t,e,xC),FO=typeof HTMLElement<"u"?HTMLElement:class{};class Ay extends FO{constructor(e,n={},r=Rv){super(),this._def=e,this._props=n,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==Rv?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof Ay){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,ma(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=r;let a;if(s&&!ar(s))for(const l in s){const c=s[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=Sv(this._props[l])),(a||(a=Object.create(null)))[Ya(l)]=!0)}this._numberProps=a,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(r=>e(this._def=r,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const r in n)is(this,r)||Object.defineProperty(this,r,{get:()=>Vn(n[r])})}_resolveProps(e){const{props:n}=e,r=ar(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(Ya))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const n=this.hasAttribute(e);let r=n?this.getAttribute(e):i4;const i=Ya(e);n&&this._numberProps&&this._numberProps[i]&&(r=Sv(r)),this._setProp(i,r,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,n,r=!0,i=!1){if(n!==this._props[e]&&(n===i4?delete this._props[e]:(this._props[e]=n,e==="key"&&this._app&&(this._app._ceVNode.key=n)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),n===!0?this.setAttribute(Ql(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Ql(e),n+""):n||this.removeAttribute(Ql(e)),s&&s.observe(this,{attributes:!0})}}_update(){wC(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const n=yi(this._def,Es(e,this._props));return this._instance||(n.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,hy(o[0])?Es({detail:o},o[0]):{detail:o}))};r.emit=(s,...o)=>{i(s,o),Ql(s)!==s&&i(Ql(s),o)},this._setParent()}),n}_applyStyles(e,n){if(!e)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const r=this._nonce;for(let i=e.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=e[i],this.shadowRoot.prepend(s)}}_parseSlots(){const e=this._slots={};let n;for(;n=this.firstChild;){const r=n.nodeType===1&&n.getAttribute("slot")||"default";(e[r]||(e[r]=[])).push(n),this.removeChild(n)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),n=this._instance.type.__scopeId;for(let r=0;r<e.length;r++){const i=e[r],s=i.getAttribute("name")||"default",o=this._slots[s],a=i.parentNode;if(o)for(const l of o){if(n&&l.nodeType===1){const c=n+"-s",h=document.createTreeWalker(l,1);l.setAttribute(c,"");let p;for(;p=h.nextNode();)p.setAttribute(c,"")}a.insertBefore(l,i)}else for(;i.firstChild;)a.insertBefore(i.firstChild,i);a.removeChild(i)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function fC(t){const e=Ju(),n=e&&e.ce;return n||null}function jO(){const t=fC();return t&&t.shadowRoot}function zO(t="$style"){{const e=Ju();if(!e)return Vi;const n=e.type.__cssModules;if(!n)return Vi;const r=n[t];return r||Vi}}const pC=new WeakMap,gC=new WeakMap,Bv=Symbol("_moveCb"),s4=Symbol("_enterCb"),$O=t=>(delete t.props.mode,t),VO=$O({name:"TransitionGroup",props:Es({},aC,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Ju(),r=v_();let i,s;return Cy(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!qO(i[0].el,n.vnode.el,o))return;i.forEach(HO),i.forEach(WO);const a=i.filter(GO);J2(),a.forEach(l=>{const c=l.el,h=c.style;Fc(c,o),h.transform=h.webkitTransform=h.transitionDuration="";const p=c[Bv]=v=>{v&&v.target!==c||(!v||/transform$/.test(v.propertyName))&&(c.removeEventListener("transitionend",p),c[Bv]=null,eh(c,o))};c.addEventListener("transitionend",p)})}),()=>{const o=$i(t),a=lC(o);let l=o.tag||wn;if(i=[],s)for(let c=0;c<s.length;c++){const h=s[c];h.el&&h.el instanceof Element&&(i.push(h),Id(h,Lp(h,a,r,n)),pC.set(h,h.el.getBoundingClientRect()))}s=e.default?Ly(e.default()):[];for(let c=0;c<s.length;c++){const h=s[c];h.key!=null&&Id(h,Lp(h,a,r,n))}return yi(l,null,s)}}}),UO=VO;function HO(t){const e=t.el;e[Bv]&&e[Bv](),e[s4]&&e[s4]()}function WO(t){gC.set(t,t.el.getBoundingClientRect())}function GO(t){const e=pC.get(t),n=gC.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function qO(t,e,n){const r=t.cloneNode(),i=t[Cp];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=uC(r);return s.removeChild(r),o}const xh=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ar(e)?n=>gp(e,n):e};function YO(t){t.target.composing=!0}function o4(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Yu=Symbol("_assign"),zr={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Yu]=xh(i);const s=r||i.props&&i.props.type==="number";Md(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=Lv(a)),t[Yu](a)}),n&&Md(t,"change",()=>{t.value=t.value.trim()}),e||(Md(t,"compositionstart",YO),Md(t,"compositionend",o4),Md(t,"change",o4))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(t[Yu]=xh(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?Lv(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===l)||(t.value=l))}},Tl={deep:!0,created(t,e,n){t[Yu]=xh(n),Md(t,"change",()=>{const r=t._modelValue,i=Ep(t),s=t.checked,o=t[Yu];if(ar(r)){const a=gy(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(xf(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(mC(t,s))})},mounted:a4,beforeUpdate(t,e,n){t[Yu]=xh(n),a4(t,e,n)}};function a4(t,{value:e,oldValue:n},r){t._modelValue=e;let i;if(ar(e))i=gy(e,r.props.value)>-1;else if(xf(e))i=e.has(r.props.value);else{if(e===n)return;i=_h(e,mC(t,!0))}t.checked!==i&&(t.checked=i)}const M_={created(t,{value:e},n){t.checked=_h(e,n.props.value),t[Yu]=xh(n),Md(t,"change",()=>{t[Yu](Ep(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Yu]=xh(r),e!==n&&(t.checked=_h(e,r.props.value))}},Zi={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=xf(e);Md(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Lv(Ep(o)):Ep(o));t[Yu](t.multiple?i?new Set(s):s:s[0]),t._assigning=!0,ma(()=>{t._assigning=!1})}),t[Yu]=xh(r)},mounted(t,{value:e}){l4(t,e)},beforeUpdate(t,e,n){t[Yu]=xh(n)},updated(t,{value:e}){t._assigning||l4(t,e)}};function l4(t,e){const n=t.multiple,r=ar(e);if(!(n&&!r&&!xf(e))){for(let i=0,s=t.options.length;i<s;i++){const o=t.options[i],a=Ep(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=gy(e,a)>-1}else o.selected=e.has(a);else if(_h(Ep(o),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Ep(t){return"_value"in t?t._value:t.value}function mC(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const k_={created(t,e,n){v0(t,e,n,null,"created")},mounted(t,e,n){v0(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){v0(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){v0(t,e,n,r,"updated")}};function vC(t,e){switch(t){case"SELECT":return Zi;case"TEXTAREA":return zr;default:switch(e){case"checkbox":return Tl;case"radio":return M_;default:return zr}}}function v0(t,e,n,r,i){const o=vC(t.tagName,n.props&&n.props.type)[i];o&&o(t,e,n,r)}function KO(){zr.getSSRProps=({value:t})=>({value:t}),M_.getSSRProps=({value:t},e)=>{if(e.props&&_h(e.props.value,t))return{checked:!0}},Tl.getSSRProps=({value:t},e)=>{if(ar(t)){if(e.props&&gy(t,e.props.value)>-1)return{checked:!0}}else if(xf(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},k_.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=vC(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const ZO=["ctrl","shift","alt","meta"],XO={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>ZO.some(n=>t[`${n}Key`]&&!e.includes(n))},nu=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=XO[e[o]];if(a&&a(i,e))return}return t(i,...s)})},JO={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},QO=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=Ql(i.key);if(e.some(o=>o===s||JO[o]===s))return t(i)})},yC=Es({patchProp:IO},yO);let zg,u4=!1;function bC(){return zg||(zg=OS(yC))}function _C(){return zg=u4?zg:IS(yC),u4=!0,zg}const wC=(...t)=>{bC().render(...t)},eI=(...t)=>{_C().hydrate(...t)},Rv=(...t)=>{const e=bC().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=SC(r);if(!i)return;const s=e._component;!Ir(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,LC(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e},xC=(...t)=>{const e=_C().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=SC(r);if(i)return n(i,!0,LC(i))},e};function LC(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function SC(t){return Is(t)?document.querySelector(t):t}let c4=!1;const tI=()=>{c4||(c4=!0,KO(),LO())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const nI=()=>{},rI=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:uS,BaseTransitionPropsValidators:y_,Comment:ca,DeprecationTypes:gO,EffectScope:a_,ErrorCodes:M8,ErrorTypeStrings:lO,Fragment:wn,KeepAlive:Q8,ReactiveEffect:rm,Static:cf,Suspense:HN,Teleport:rp,Text:vh,TrackOpTypes:w8,Transition:X2,TransitionGroup:UO,TriggerOpTypes:x8,VueElement:Ay,assertNumber:P8,callWithAsyncErrorHandling:Ku,callWithErrorHandling:Rp,camelize:Ya,capitalize:Pm,cloneVNode:ed,compatUtils:pO,compile:nI,computed:Xn,createApp:Rv,createBlock:ua,createCommentVNode:Zt,createElementBlock:Be,createElementVNode:S,createHydrationRenderer:IS,createPropsRestProxy:bN,createRenderer:OS,createSSRApp:xC,createSlots:iN,createStaticVNode:tu,createTextVNode:ri,createVNode:yi,customRef:YL,defineAsyncComponent:X8,defineComponent:Hs,defineCustomElement:hC,defineEmits:uN,defineExpose:cN,defineModel:fN,defineOptions:dN,defineProps:lN,defineSSRCustomElement:RO,defineSlots:hN,devtools:uO,effect:HD,effectScope:l_,getCurrentInstance:Ju,getCurrentScope:u_,getCurrentWatcher:L8,getTransitionRawChildren:Ly,guardReactiveProps:ZS,h:My,handleError:Lf,hasInjectionContext:SS,hydrate:eI,hydrateOnIdle:W8,hydrateOnInteraction:K8,hydrateOnMediaQuery:Y8,hydrateOnVisible:q8,initCustomFormatter:sO,initDirectivesForSSR:tI,inject:Mu,isMemoSame:rC,isProxy:_y,isReactive:Zc,isReadonly:wh,isRef:wo,isRuntimeOnly:nO,isShallow:Pu,isVNode:Bd,markRaw:wy,mergeDefaults:vN,mergeModels:yN,mergeProps:XS,nextTick:ma,normalizeClass:Ii,normalizeProps:jD,normalizeStyle:ru,onActivated:dS,onBeforeMount:pS,onBeforeUnmount:kh,onBeforeUpdate:__,onDeactivated:hS,onErrorCaptured:yS,onMounted:Lo,onRenderTracked:vS,onRenderTriggered:mS,onScopeDispose:TL,onServerPrefetch:gS,onUnmounted:Zu,onUpdated:Cy,onWatcherCleanup:XL,openBlock:Ne,popScopeId:N8,provide:Fg,proxyRefs:g_,pushScopeId:D8,queuePostFlushCb:om,reactive:ou,readonly:pc,ref:Ct,registerRuntimeCompiler:tO,render:wC,renderList:Qn,renderSlot:sN,resolveComponent:bS,resolveDirective:rN,resolveDynamicComponent:nN,resolveFilter:fO,resolveTransitionHooks:Lp,setBlockTracking:H2,setDevtoolsHook:cO,setTransitionHooks:Id,shallowReactive:f_,shallowReadonly:c8,shallowRef:p_,ssrContextKey:jS,ssrUtils:hO,stop:WD,toDisplayString:kt,toHandlerKey:Ng,toHandlers:oN,toRaw:$i,toRef:y8,toRefs:KL,toValue:f8,transformVNodeArgs:ZN,triggerRef:h8,unref:Vn,useAttrs:mN,useCssModule:zO,useCssVars:SO,useHost:fC,useId:R8,useModel:RN,useSSRContext:zS,useShadowRoot:jO,useSlots:gN,useTemplateRef:F8,useTransitionState:v_,vModelCheckbox:Tl,vModelDynamic:k_,vModelRadio:M_,vModelSelect:Zi,vModelText:zr,vShow:ky,version:iC,warn:aO,watch:Ti,watchEffect:dm,watchPostEffect:IN,watchSyncEffect:$S,withAsyncContext:_N,withCtx:Gu,withDefaults:pN,withDirectives:kn,withKeys:QO,withMemo:oO,withModifiers:nu,withScopeId:O8},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let CC;const Ty=t=>CC=t,EC=Symbol();function eb(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var $g;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})($g||($g={}));function iI(){const t=l_(!0),e=t.run(()=>Ct({}));let n=[],r=[];const i=wy({install(s){Ty(i),i._a=s,s.provide(EC,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const PC=()=>{};function d4(t,e,n,r=PC){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&u_()&&TL(i),i}function Gf(t,...e){t.slice().forEach(n=>{n(...e)})}const sI=t=>t(),h4=Symbol(),j1=Symbol();function tb(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];eb(i)&&eb(r)&&t.hasOwnProperty(n)&&!wo(r)&&!Zc(r)?t[n]=tb(i,r):t[n]=r}return t}const oI=Symbol();function aI(t){return!eb(t)||!t.hasOwnProperty(oI)}const{assign:th}=Object;function lI(t){return!!(wo(t)&&t.effect)}function uI(t,e,n,r){const{state:i,actions:s,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=i?i():{});const h=KL(n.state.value[t]);return th(h,s,Object.keys(o||{}).reduce((p,v)=>(p[v]=wy(Xn(()=>{Ty(n);const g=n._s.get(t);return o[v].call(g,g)})),p),{}))}return l=MC(t,c,e,n,r,!0),l}function MC(t,e,n={},r,i,s){let o;const a=th({actions:{}},n),l={deep:!0};let c,h,p=[],v=[],g;const x=r.state.value[t];!s&&!x&&(r.state.value[t]={}),Ct({});let E;function D(O){let j;c=h=!1,typeof O=="function"?(O(r.state.value[t]),j={type:$g.patchFunction,storeId:t,events:g}):(tb(r.state.value[t],O),j={type:$g.patchObject,payload:O,storeId:t,events:g});const J=E=Symbol();ma().then(()=>{E===J&&(c=!0)}),h=!0,Gf(p,j,r.state.value[t])}const M=s?function(){const{state:j}=n,J=j?j():{};this.$patch(U=>{th(U,J)})}:PC;function A(){o.stop(),p=[],v=[],r._s.delete(t)}const z=(O,j="")=>{if(h4 in O)return O[j1]=j,O;const J=function(){Ty(r);const U=Array.from(arguments),R=[],V=[];function $(Q){R.push(Q)}function B(Q){V.push(Q)}Gf(v,{args:U,name:J[j1],store:ne,after:$,onError:B});let I;try{I=O.apply(this&&this.$id===t?this:ne,U)}catch(Q){throw Gf(V,Q),Q}return I instanceof Promise?I.then(Q=>(Gf(R,Q),Q)).catch(Q=>(Gf(V,Q),Promise.reject(Q))):(Gf(R,I),I)};return J[h4]=!0,J[j1]=j,J},Y={_p:r,$id:t,$onAction:d4.bind(null,v),$patch:D,$reset:M,$subscribe(O,j={}){const J=d4(p,O,j.detached,()=>U()),U=o.run(()=>Ti(()=>r.state.value[t],R=>{(j.flush==="sync"?h:c)&&O({storeId:t,type:$g.direct,events:g},R)},th({},l,j)));return J},$dispose:A},ne=ou(Y);r._s.set(t,ne);const pe=(r._a&&r._a.runWithContext||sI)(()=>r._e.run(()=>(o=l_()).run(()=>e({action:z}))));for(const O in pe){const j=pe[O];if(wo(j)&&!lI(j)||Zc(j))s||(x&&aI(j)&&(wo(j)?j.value=x[O]:tb(j,x[O])),r.state.value[t][O]=j);else if(typeof j=="function"){const J=z(j,O);pe[O]=J,a.actions[O]=j}}return th(ne,pe),th($i(ne),pe),Object.defineProperty(ne,"$state",{get:()=>r.state.value[t],set:O=>{D(j=>{th(j,O)})}}),r._p.forEach(O=>{th(ne,o.run(()=>O({store:ne,app:r._a,pinia:r,options:a})))}),x&&s&&n.hydrate&&n.hydrate(ne.$state,x),c=!0,h=!0,ne}/*! #__NO_SIDE_EFFECTS__ */function Fp(t,e,n){let r,i;const s=typeof e=="function";typeof t=="string"?(r=t,i=s?n:e):(i=t,r=t.id);function o(a,l){const c=SS();return a=a||(c?Mu(EC,null):null),a&&Ty(a),a=CC,a._s.has(r)||(s?MC(r,e,i,a):uI(r,i,a)),a._s.get(r)}return o.$id=r,o}function kC(t,e){return function(){return t.apply(e,arguments)}}const{toString:cI}=Object.prototype,{getPrototypeOf:A_}=Object,Dy=(t=>e=>{const n=cI.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ec=t=>(t=t.toLowerCase(),e=>Dy(e)===t),Ny=t=>e=>typeof e===t,{isArray:jp}=Array,fm=Ny("undefined");function dI(t){return t!==null&&!fm(t)&&t.constructor!==null&&!fm(t.constructor)&&ku(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const AC=Ec("ArrayBuffer");function hI(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&AC(t.buffer),e}const fI=Ny("string"),ku=Ny("function"),TC=Ny("number"),Oy=t=>t!==null&&typeof t=="object",pI=t=>t===!0||t===!1,J0=t=>{if(Dy(t)!=="object")return!1;const e=A_(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},gI=Ec("Date"),mI=Ec("File"),vI=Ec("Blob"),yI=Ec("FileList"),bI=t=>Oy(t)&&ku(t.pipe),_I=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ku(t.append)&&((e=Dy(t))==="formdata"||e==="object"&&ku(t.toString)&&t.toString()==="[object FormData]"))},wI=Ec("URLSearchParams"),[xI,LI,SI,CI]=["ReadableStream","Request","Response","Headers"].map(Ec),EI=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Tm(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),jp(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function DC(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const sf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,NC=t=>!fm(t)&&t!==sf;function nb(){const{caseless:t}=NC(this)&&this||{},e={},n=(r,i)=>{const s=t&&DC(e,i)||i;J0(e[s])&&J0(r)?e[s]=nb(e[s],r):J0(r)?e[s]=nb({},r):jp(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Tm(arguments[r],n);return e}const PI=(t,e,n,{allOwnKeys:r}={})=>(Tm(e,(i,s)=>{n&&ku(i)?t[s]=kC(i,n):t[s]=i},{allOwnKeys:r}),t),MI=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),kI=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},AI=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&A_(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},TI=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},DI=t=>{if(!t)return null;if(jp(t))return t;let e=t.length;if(!TC(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},NI=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&A_(Uint8Array)),OI=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},II=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},BI=Ec("HTMLFormElement"),RI=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),f4=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),FI=Ec("RegExp"),OC=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Tm(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},jI=t=>{OC(t,(e,n)=>{if(ku(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(ku(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},zI=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return jp(t)?r(t):r(String(t).split(e)),n},$I=()=>{},VI=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function UI(t){return!!(t&&ku(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const HI=t=>{const e=new Array(10),n=(r,i)=>{if(Oy(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=jp(r)?[]:{};return Tm(r,(o,a)=>{const l=n(o,i+1);!fm(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},WI=Ec("AsyncFunction"),GI=t=>t&&(Oy(t)||ku(t))&&ku(t.then)&&ku(t.catch),IC=((t,e)=>t?setImmediate:e?((n,r)=>(sf.addEventListener("message",({source:i,data:s})=>{i===sf&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),sf.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ku(sf.postMessage)),qI=typeof queueMicrotask<"u"?queueMicrotask.bind(sf):typeof process<"u"&&process.nextTick||IC,Qt={isArray:jp,isArrayBuffer:AC,isBuffer:dI,isFormData:_I,isArrayBufferView:hI,isString:fI,isNumber:TC,isBoolean:pI,isObject:Oy,isPlainObject:J0,isReadableStream:xI,isRequest:LI,isResponse:SI,isHeaders:CI,isUndefined:fm,isDate:gI,isFile:mI,isBlob:vI,isRegExp:FI,isFunction:ku,isStream:bI,isURLSearchParams:wI,isTypedArray:NI,isFileList:yI,forEach:Tm,merge:nb,extend:PI,trim:EI,stripBOM:MI,inherits:kI,toFlatObject:AI,kindOf:Dy,kindOfTest:Ec,endsWith:TI,toArray:DI,forEachEntry:OI,matchAll:II,isHTMLForm:BI,hasOwnProperty:f4,hasOwnProp:f4,reduceDescriptors:OC,freezeMethods:jI,toObjectSet:zI,toCamelCase:RI,noop:$I,toFiniteNumber:VI,findKey:DC,global:sf,isContextDefined:NC,isSpecCompliantForm:UI,toJSONObject:HI,isAsyncFn:WI,isThenable:GI,setImmediate:IC,asap:qI};function hi(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Qt.inherits(hi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Qt.toJSONObject(this.config),code:this.code,status:this.status}}});const BC=hi.prototype,RC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{RC[t]={value:t}});Object.defineProperties(hi,RC);Object.defineProperty(BC,"isAxiosError",{value:!0});hi.from=(t,e,n,r,i,s)=>{const o=Object.create(BC);return Qt.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),hi.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const YI=null;function rb(t){return Qt.isPlainObject(t)||Qt.isArray(t)}function FC(t){return Qt.endsWith(t,"[]")?t.slice(0,-2):t}function p4(t,e,n){return t?t.concat(e).map(function(i,s){return i=FC(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function KI(t){return Qt.isArray(t)&&!t.some(rb)}const ZI=Qt.toFlatObject(Qt,{},null,function(e){return/^is[A-Z]/.test(e)});function Iy(t,e,n){if(!Qt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Qt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,D){return!Qt.isUndefined(D[E])});const r=n.metaTokens,i=n.visitor||h,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Qt.isSpecCompliantForm(e);if(!Qt.isFunction(i))throw new TypeError("visitor must be a function");function c(x){if(x===null)return"";if(Qt.isDate(x))return x.toISOString();if(!l&&Qt.isBlob(x))throw new hi("Blob is not supported. Use a Buffer instead.");return Qt.isArrayBuffer(x)||Qt.isTypedArray(x)?l&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function h(x,E,D){let M=x;if(x&&!D&&typeof x=="object"){if(Qt.endsWith(E,"{}"))E=r?E:E.slice(0,-2),x=JSON.stringify(x);else if(Qt.isArray(x)&&KI(x)||(Qt.isFileList(x)||Qt.endsWith(E,"[]"))&&(M=Qt.toArray(x)))return E=FC(E),M.forEach(function(z,Y){!(Qt.isUndefined(z)||z===null)&&e.append(o===!0?p4([E],Y,s):o===null?E:E+"[]",c(z))}),!1}return rb(x)?!0:(e.append(p4(D,E,s),c(x)),!1)}const p=[],v=Object.assign(ZI,{defaultVisitor:h,convertValue:c,isVisitable:rb});function g(x,E){if(!Qt.isUndefined(x)){if(p.indexOf(x)!==-1)throw Error("Circular reference detected in "+E.join("."));p.push(x),Qt.forEach(x,function(M,A){(!(Qt.isUndefined(M)||M===null)&&i.call(e,M,Qt.isString(A)?A.trim():A,E,v))===!0&&g(M,E?E.concat(A):[A])}),p.pop()}}if(!Qt.isObject(t))throw new TypeError("data must be an object");return g(t),e}function g4(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function T_(t,e){this._pairs=[],t&&Iy(t,this,e)}const jC=T_.prototype;jC.append=function(e,n){this._pairs.push([e,n])};jC.toString=function(e){const n=e?function(r){return e.call(this,r,g4)}:g4;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function XI(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function zC(t,e,n){if(!e)return t;const r=n&&n.encode||XI;Qt.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Qt.isURLSearchParams(e)?e.toString():new T_(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class m4{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Qt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const $C={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},JI=typeof URLSearchParams<"u"?URLSearchParams:T_,QI=typeof FormData<"u"?FormData:null,e7=typeof Blob<"u"?Blob:null,t7={isBrowser:!0,classes:{URLSearchParams:JI,FormData:QI,Blob:e7},protocols:["http","https","file","blob","url","data"]},D_=typeof window<"u"&&typeof document<"u",ib=typeof navigator=="object"&&navigator||void 0,n7=D_&&(!ib||["ReactNative","NativeScript","NS"].indexOf(ib.product)<0),r7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",i7=D_&&window.location.href||"http://localhost",s7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:D_,hasStandardBrowserEnv:n7,hasStandardBrowserWebWorkerEnv:r7,navigator:ib,origin:i7},Symbol.toStringTag,{value:"Module"})),gl={...s7,...t7};function o7(t,e){return Iy(t,new gl.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return gl.isNode&&Qt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function a7(t){return Qt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function l7(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function VC(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&Qt.isArray(i)?i.length:o,l?(Qt.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Qt.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Qt.isArray(i[o])&&(i[o]=l7(i[o])),!a)}if(Qt.isFormData(t)&&Qt.isFunction(t.entries)){const n={};return Qt.forEachEntry(t,(r,i)=>{e(a7(r),i,n,0)}),n}return null}function u7(t,e,n){if(Qt.isString(t))try{return(e||JSON.parse)(t),Qt.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Dm={transitional:$C,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Qt.isObject(e);if(s&&Qt.isHTMLForm(e)&&(e=new FormData(e)),Qt.isFormData(e))return i?JSON.stringify(VC(e)):e;if(Qt.isArrayBuffer(e)||Qt.isBuffer(e)||Qt.isStream(e)||Qt.isFile(e)||Qt.isBlob(e)||Qt.isReadableStream(e))return e;if(Qt.isArrayBufferView(e))return e.buffer;if(Qt.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return o7(e,this.formSerializer).toString();if((a=Qt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Iy(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),u7(e)):e}],transformResponse:[function(e){const n=this.transitional||Dm.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Qt.isResponse(e)||Qt.isReadableStream(e))return e;if(e&&Qt.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?hi.from(a,hi.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:gl.classes.FormData,Blob:gl.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Qt.forEach(["delete","get","head","post","put","patch"],t=>{Dm.headers[t]={}});const c7=Qt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),d7=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&c7[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},v4=Symbol("internals");function Qp(t){return t&&String(t).trim().toLowerCase()}function Q0(t){return t===!1||t==null?t:Qt.isArray(t)?t.map(Q0):String(t)}function h7(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const f7=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function z1(t,e,n,r,i){if(Qt.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Qt.isString(e)){if(Qt.isString(r))return e.indexOf(r)!==-1;if(Qt.isRegExp(r))return r.test(e)}}function p7(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function g7(t,e){const n=Qt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let iu=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const h=Qp(l);if(!h)throw new Error("header name must be a non-empty string");const p=Qt.findKey(i,h);(!p||i[p]===void 0||c===!0||c===void 0&&i[p]!==!1)&&(i[p||l]=Q0(a))}const o=(a,l)=>Qt.forEach(a,(c,h)=>s(c,h,l));if(Qt.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Qt.isString(e)&&(e=e.trim())&&!f7(e))o(d7(e),n);else if(Qt.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=Qp(e),e){const r=Qt.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return h7(i);if(Qt.isFunction(n))return n.call(this,i,r);if(Qt.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Qp(e),e){const r=Qt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||z1(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Qp(o),o){const a=Qt.findKey(r,o);a&&(!n||z1(r,r[a],a,n))&&(delete r[a],i=!0)}}return Qt.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||z1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Qt.forEach(this,(i,s)=>{const o=Qt.findKey(r,s);if(o){n[o]=Q0(i),delete n[s];return}const a=e?p7(s):String(s).trim();a!==s&&delete n[s],n[a]=Q0(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Qt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Qt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[v4]=this[v4]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Qp(o);r[a]||(g7(i,o),r[a]=!0)}return Qt.isArray(e)?e.forEach(s):s(e),this}};iu.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Qt.reduceDescriptors(iu.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Qt.freezeMethods(iu);function $1(t,e){const n=this||Dm,r=e||n,i=iu.from(r.headers);let s=r.data;return Qt.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function UC(t){return!!(t&&t.__CANCEL__)}function zp(t,e,n){hi.call(this,t??"canceled",hi.ERR_CANCELED,e,n),this.name="CanceledError"}Qt.inherits(zp,hi,{__CANCEL__:!0});function HC(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new hi("Request failed with status code "+n.status,[hi.ERR_BAD_REQUEST,hi.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function m7(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function v7(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),h=r[s];o||(o=c),n[i]=l,r[i]=c;let p=s,v=0;for(;p!==i;)v+=n[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const g=h&&c-h;return g?Math.round(v*1e3/g):void 0}}function y7(t,e){let n=0,r=1e3/e,i,s;const o=(c,h=Date.now())=>{n=h,i=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const h=Date.now(),p=h-n;p>=r?o(c,h):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-p)))},()=>i&&o(i)]}const Fv=(t,e,n=3)=>{let r=0;const i=v7(50,250);return y7(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),h=o<=a;r=o;const p={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&h?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(p)},n)},y4=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},b4=t=>(...e)=>Qt.asap(()=>t(...e)),b7=gl.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,gl.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(gl.origin),gl.navigator&&/(msie|trident)/i.test(gl.navigator.userAgent)):()=>!0,_7=gl.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Qt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Qt.isString(r)&&o.push("path="+r),Qt.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function w7(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function x7(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function WC(t,e,n){let r=!w7(e);return t&&(r||n==!1)?x7(t,e):e}const _4=t=>t instanceof iu?{...t}:t;function yf(t,e){e=e||{};const n={};function r(c,h,p,v){return Qt.isPlainObject(c)&&Qt.isPlainObject(h)?Qt.merge.call({caseless:v},c,h):Qt.isPlainObject(h)?Qt.merge({},h):Qt.isArray(h)?h.slice():h}function i(c,h,p,v){if(Qt.isUndefined(h)){if(!Qt.isUndefined(c))return r(void 0,c,p,v)}else return r(c,h,p,v)}function s(c,h){if(!Qt.isUndefined(h))return r(void 0,h)}function o(c,h){if(Qt.isUndefined(h)){if(!Qt.isUndefined(c))return r(void 0,c)}else return r(void 0,h)}function a(c,h,p){if(p in e)return r(c,h);if(p in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,h,p)=>i(_4(c),_4(h),p,!0)};return Qt.forEach(Object.keys(Object.assign({},t,e)),function(h){const p=l[h]||i,v=p(t[h],e[h],h);Qt.isUndefined(v)&&p!==a||(n[h]=v)}),n}const GC=t=>{const e=yf({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=iu.from(o),e.url=zC(WC(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Qt.isFormData(n)){if(gl.hasStandardBrowserEnv||gl.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...h]=l?l.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...h].join("; "))}}if(gl.hasStandardBrowserEnv&&(r&&Qt.isFunction(r)&&(r=r(e)),r||r!==!1&&b7(e.url))){const c=i&&s&&_7.read(s);c&&o.set(i,c)}return e},L7=typeof XMLHttpRequest<"u",S7=L7&&function(t){return new Promise(function(n,r){const i=GC(t);let s=i.data;const o=iu.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,h,p,v,g,x;function E(){g&&g(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let D=new XMLHttpRequest;D.open(i.method.toUpperCase(),i.url,!0),D.timeout=i.timeout;function M(){if(!D)return;const z=iu.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),ne={data:!a||a==="text"||a==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:z,config:t,request:D};HC(function(pe){n(pe),E()},function(pe){r(pe),E()},ne),D=null}"onloadend"in D?D.onloadend=M:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(M)},D.onabort=function(){D&&(r(new hi("Request aborted",hi.ECONNABORTED,t,D)),D=null)},D.onerror=function(){r(new hi("Network Error",hi.ERR_NETWORK,t,D)),D=null},D.ontimeout=function(){let Y=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const ne=i.transitional||$C;i.timeoutErrorMessage&&(Y=i.timeoutErrorMessage),r(new hi(Y,ne.clarifyTimeoutError?hi.ETIMEDOUT:hi.ECONNABORTED,t,D)),D=null},s===void 0&&o.setContentType(null),"setRequestHeader"in D&&Qt.forEach(o.toJSON(),function(Y,ne){D.setRequestHeader(ne,Y)}),Qt.isUndefined(i.withCredentials)||(D.withCredentials=!!i.withCredentials),a&&a!=="json"&&(D.responseType=i.responseType),c&&([v,x]=Fv(c,!0),D.addEventListener("progress",v)),l&&D.upload&&([p,g]=Fv(l),D.upload.addEventListener("progress",p),D.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(h=z=>{D&&(r(!z||z.type?new zp(null,t,D):z),D.abort(),D=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const A=m7(i.url);if(A&&gl.protocols.indexOf(A)===-1){r(new hi("Unsupported protocol "+A+":",hi.ERR_BAD_REQUEST,t));return}D.send(s||null)})},C7=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const h=c instanceof Error?c:this.reason;r.abort(h instanceof hi?h:new zp(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,s(new hi(`timeout ${e} of ms exceeded`,hi.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>Qt.asap(a),l}},E7=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},P7=async function*(t,e){for await(const n of M7(t))yield*E7(n,e)},M7=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},w4=(t,e,n,r)=>{const i=P7(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:h}=await i.next();if(c){a(),l.close();return}let p=h.byteLength;if(n){let v=s+=p;n(v)}l.enqueue(new Uint8Array(h))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},By=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",qC=By&&typeof ReadableStream=="function",k7=By&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),YC=(t,...e)=>{try{return!!t(...e)}catch{return!1}},A7=qC&&YC(()=>{let t=!1;const e=new Request(gl.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),x4=64*1024,sb=qC&&YC(()=>Qt.isReadableStream(new Response("").body)),jv={stream:sb&&(t=>t.body)};By&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!jv[e]&&(jv[e]=Qt.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new hi(`Response type '${e}' is not supported`,hi.ERR_NOT_SUPPORT,r)})})})(new Response);const T7=async t=>{if(t==null)return 0;if(Qt.isBlob(t))return t.size;if(Qt.isSpecCompliantForm(t))return(await new Request(gl.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Qt.isArrayBufferView(t)||Qt.isArrayBuffer(t))return t.byteLength;if(Qt.isURLSearchParams(t)&&(t=t+""),Qt.isString(t))return(await k7(t)).byteLength},D7=async(t,e)=>{const n=Qt.toFiniteNumber(t.getContentLength());return n??T7(e)},N7=By&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:h,withCredentials:p="same-origin",fetchOptions:v}=GC(t);c=c?(c+"").toLowerCase():"text";let g=C7([i,s&&s.toAbortSignal()],o),x;const E=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let D;try{if(l&&A7&&n!=="get"&&n!=="head"&&(D=await D7(h,r))!==0){let ne=new Request(e,{method:"POST",body:r,duplex:"half"}),ge;if(Qt.isFormData(r)&&(ge=ne.headers.get("content-type"))&&h.setContentType(ge),ne.body){const[pe,O]=y4(D,Fv(b4(l)));r=w4(ne.body,x4,pe,O)}}Qt.isString(p)||(p=p?"include":"omit");const M="credentials"in Request.prototype;x=new Request(e,{...v,signal:g,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:M?p:void 0});let A=await fetch(x);const z=sb&&(c==="stream"||c==="response");if(sb&&(a||z&&E)){const ne={};["status","statusText","headers"].forEach(j=>{ne[j]=A[j]});const ge=Qt.toFiniteNumber(A.headers.get("content-length")),[pe,O]=a&&y4(ge,Fv(b4(a),!0))||[];A=new Response(w4(A.body,x4,pe,()=>{O&&O(),E&&E()}),ne)}c=c||"text";let Y=await jv[Qt.findKey(jv,c)||"text"](A,t);return!z&&E&&E(),await new Promise((ne,ge)=>{HC(ne,ge,{data:Y,headers:iu.from(A.headers),status:A.status,statusText:A.statusText,config:t,request:x})})}catch(M){throw E&&E(),M&&M.name==="TypeError"&&/fetch/i.test(M.message)?Object.assign(new hi("Network Error",hi.ERR_NETWORK,t,x),{cause:M.cause||M}):hi.from(M,M&&M.code,t,x)}}),ob={http:YI,xhr:S7,fetch:N7};Qt.forEach(ob,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const L4=t=>`- ${t}`,O7=t=>Qt.isFunction(t)||t===null||t===!1,KC={getAdapter:t=>{t=Qt.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!O7(n)&&(r=ob[(o=String(n)).toLowerCase()],r===void 0))throw new hi(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(L4).join(`
`):" "+L4(s[0]):"as no adapter specified";throw new hi("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:ob};function V1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new zp(null,t)}function S4(t){return V1(t),t.headers=iu.from(t.headers),t.data=$1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),KC.getAdapter(t.adapter||Dm.adapter)(t).then(function(r){return V1(t),r.data=$1.call(t,t.transformResponse,r),r.headers=iu.from(r.headers),r},function(r){return UC(r)||(V1(t),r&&r.response&&(r.response.data=$1.call(t,t.transformResponse,r.response),r.response.headers=iu.from(r.response.headers))),Promise.reject(r)})}const ZC="1.8.4",Ry={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Ry[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const C4={};Ry.transitional=function(e,n,r){function i(s,o){return"[Axios v"+ZC+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new hi(i(o," has been removed"+(n?" in "+n:"")),hi.ERR_DEPRECATED);return n&&!C4[o]&&(C4[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};Ry.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function I7(t,e,n){if(typeof t!="object")throw new hi("options must be an object",hi.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new hi("option "+s+" must be "+l,hi.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new hi("Unknown option "+s,hi.ERR_BAD_OPTION)}}const ev={assertOptions:I7,validators:Ry},Bc=ev.validators;let df=class{constructor(e){this.defaults=e,this.interceptors={request:new m4,response:new m4}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=yf(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&ev.assertOptions(r,{silentJSONParsing:Bc.transitional(Bc.boolean),forcedJSONParsing:Bc.transitional(Bc.boolean),clarifyTimeoutError:Bc.transitional(Bc.boolean)},!1),i!=null&&(Qt.isFunction(i)?n.paramsSerializer={serialize:i}:ev.assertOptions(i,{encode:Bc.function,serialize:Bc.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ev.assertOptions(n,{baseUrl:Bc.spelling("baseURL"),withXsrfToken:Bc.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Qt.merge(s.common,s[n.method]);s&&Qt.forEach(["delete","get","head","post","put","patch","common"],x=>{delete s[x]}),n.headers=iu.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(l=l&&E.synchronous,a.unshift(E.fulfilled,E.rejected))});const c=[];this.interceptors.response.forEach(function(E){c.push(E.fulfilled,E.rejected)});let h,p=0,v;if(!l){const x=[S4.bind(this),void 0];for(x.unshift.apply(x,a),x.push.apply(x,c),v=x.length,h=Promise.resolve(n);p<v;)h=h.then(x[p++],x[p++]);return h}v=a.length;let g=n;for(p=0;p<v;){const x=a[p++],E=a[p++];try{g=x(g)}catch(D){E.call(this,D);break}}try{h=S4.call(this,g)}catch(x){return Promise.reject(x)}for(p=0,v=c.length;p<v;)h=h.then(c[p++],c[p++]);return h}getUri(e){e=yf(this.defaults,e);const n=WC(e.baseURL,e.url,e.allowAbsoluteUrls);return zC(n,e.params,e.paramsSerializer)}};Qt.forEach(["delete","get","head","options"],function(e){df.prototype[e]=function(n,r){return this.request(yf(r||{},{method:e,url:n,data:(r||{}).data}))}});Qt.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(yf(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}df.prototype[e]=n(),df.prototype[e+"Form"]=n(!0)});let B7=class XC{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new zp(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new XC(function(i){e=i}),cancel:e}}};function R7(t){return function(n){return t.apply(null,n)}}function F7(t){return Qt.isObject(t)&&t.isAxiosError===!0}const ab={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ab).forEach(([t,e])=>{ab[e]=t});function JC(t){const e=new df(t),n=kC(df.prototype.request,e);return Qt.extend(n,df.prototype,e,{allOwnKeys:!0}),Qt.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return JC(yf(t,i))},n}const na=JC(Dm);na.Axios=df;na.CanceledError=zp;na.CancelToken=B7;na.isCancel=UC;na.VERSION=ZC;na.toFormData=Iy;na.AxiosError=hi;na.Cancel=na.CanceledError;na.all=function(e){return Promise.all(e)};na.spread=R7;na.isAxiosError=F7;na.mergeConfig=yf;na.AxiosHeaders=iu;na.formToJSON=t=>VC(Qt.isHTMLForm(t)?new FormData(t):t);na.getAdapter=KC.getAdapter;na.HttpStatusCode=ab;na.default=na;const{Axios:joe,AxiosError:zoe,CanceledError:$oe,isCancel:Voe,CancelToken:Uoe,VERSION:Hoe,all:Woe,Cancel:Goe,isAxiosError:qoe,spread:Yoe,toFormData:Koe,AxiosHeaders:Zoe,HttpStatusCode:Xoe,formToJSON:Joe,getAdapter:Qoe,mergeConfig:eae}=na,mn=ou({measures:[],longTasks:[],memorySnapshots:[],framesPerSecond:0,lastFpsUpdate:0,frameCount:0,isRecording:!1,isEnabled:!1,startTime:0,currentOperation:null,operationStack:[],operationHistory:[]});let yh=null,of=null;const j7=1e3;function Fy(){if(mn.isEnabled){mn.isRecording=!0,mn.startTime=performance.now(),mn.frameCount=0,mn.lastFpsUpdate=performance.now();try{window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&(yh=new PerformanceObserver(t=>{t.getEntries().forEach(n=>{mn.longTasks.push({duration:n.duration,startTime:n.startTime,name:n.name,component:Sc()})})}),yh.observe({entryTypes:["longtask"]}))}catch(t){console.warn("PerformanceObserver pour longues tâches non supporté",t)}z7(),N_()}}function zv(){mn.isRecording=!1,yh&&(yh.disconnect(),yh=null),nE()}function lb(){yh&&(yh.disconnect(),yh=null),nE(),mn.measures=[],mn.longTasks=[],mn.memorySnapshots=[],mn.operationHistory=[],mn.frameCount=0,mn.framesPerSecond=0,mn.lastFpsUpdate=0,mn.isEnabled&&Fy()}function QC(t,e,n){if(!mn.isEnabled||!mn.isRecording)return()=>{};const r=performance.now(),i=mn.currentOperation;return mn.currentOperation=t,mn.operationStack.push(t),()=>{const s=performance.now()-r;mn.operationStack.pop(),mn.currentOperation=mn.operationStack[mn.operationStack.length-1]||null,mn.measures.push({name:t,startTime:r,duration:s,component:e||Sc(),info:n,parentOperation:i||void 0}),s>10&&mn.operationHistory.push({operation:t,component:e||Sc()||"unknown",durationMs:s,timestamp:Date.now()})}}async function eE(t,e,n,r){if(!mn.isEnabled||!mn.isRecording)return e();const i=performance.now(),s=mn.currentOperation;mn.currentOperation=t,mn.operationStack.push(t);try{return await e()}finally{const o=performance.now()-i;mn.operationStack.pop(),mn.currentOperation=mn.operationStack[mn.operationStack.length-1]||null,mn.measures.push({name:t,startTime:i,duration:o,component:n||Sc(),info:r,parentOperation:s||void 0}),o>10&&mn.operationHistory.push({operation:t,component:n||Sc()||"unknown",durationMs:o,timestamp:Date.now()})}}function tE(t,e,n,r){if(!mn.isEnabled||!mn.isRecording)return e();const i=performance.now(),s=mn.currentOperation;mn.currentOperation=t,mn.operationStack.push(t);try{return e()}finally{const o=performance.now()-i;mn.operationStack.pop(),mn.currentOperation=mn.operationStack[mn.operationStack.length-1]||null,mn.measures.push({name:t,startTime:i,duration:o,component:n||Sc(),info:r,parentOperation:s||void 0}),o>10&&mn.operationHistory.push({operation:t,component:n||Sc()||"unknown",durationMs:o,timestamp:Date.now()})}}function N_(){!mn.isEnabled||!mn.isRecording||(performance.memory?mn.memorySnapshots.push({jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize,timestamp:performance.now()}):mn.memorySnapshots.push({timestamp:performance.now()}))}function z7(){of!==null&&cancelAnimationFrame(of),mn.frameCount=0,mn.lastFpsUpdate=performance.now();function t(){mn.frameCount++;const e=performance.now();e-mn.lastFpsUpdate>=j7&&(mn.framesPerSecond=Math.round(mn.frameCount*1e3/(e-mn.lastFpsUpdate)),mn.frameCount=0,mn.lastFpsUpdate=e),mn.isRecording&&(of=requestAnimationFrame(t))}of=requestAnimationFrame(t)}function nE(){of!==null&&(cancelAnimationFrame(of),of=null)}function Sc(){return""}function ub(t){mn.isEnabled=t,t&&!mn.isRecording?Fy():!t&&mn.isRecording&&zv()}function rE(t,e,n){return(...r)=>{if(!mn.isEnabled||!mn.isRecording)return t(...r);const i=performance.now();try{return t(...r)}finally{const s=performance.now()-i;mn.measures.push({name:e,startTime:i,duration:s,component:n||Sc(),info:{args:r}}),s>10&&mn.operationHistory.push({operation:e,component:n||Sc()||"unknown",durationMs:s,timestamp:Date.now()})}}}function iE(t,e,n){return async(...r)=>{if(!mn.isEnabled||!mn.isRecording)return await t(...r);const i=performance.now();try{return await t(...r)}finally{const s=performance.now()-i;mn.measures.push({name:e,startTime:i,duration:s,component:n||Sc(),info:{args:r}}),s>10&&mn.operationHistory.push({operation:e,component:n||Sc()||"unknown",durationMs:s,timestamp:Date.now()})}}}function $7(t,e){const n=mn.measures.filter(o=>o.startTime>=t&&o.startTime+o.duration<=e),r=new Map,i=[];n.forEach(o=>{o.parentOperation?(r.has(o.parentOperation)||r.set(o.parentOperation,[]),r.get(o.parentOperation).push(o)):i.push(o)});function s(o){const a=r.get(o.name)||[];return{operation:o.name,duration:o.duration,component:o.component,children:a.sort((l,c)=>c.duration-l.duration).map(l=>s(l))}}return i.sort((o,a)=>a.duration-o.duration).map(o=>s(o))}function cb(t,e){const n=t||mn.startTime,r=e||performance.now(),i=$7(n,r),s=r-n,o=new Map;function a(c){const h=o.get(c.operation)||{duration:0,component:c.component};h.duration+=c.duration,o.set(c.operation,h),c.children.forEach(p=>a(p))}i.forEach(c=>a(c));const l=Array.from(o.entries()).map(([c,{duration:h,component:p}])=>({operation:c,duration:h,component:p,impact:h/s*100})).sort((c,h)=>h.impact-c.impact).slice(0,10);return{criticalPaths:i,totalTime:s,bottlenecks:l}}function $p(){const t=Ct(!1);Lo(()=>{try{const r=new URL(window.location.href).searchParams.get("perf")==="true";t.value=r,ub(r),lb()}catch(n){console.warn("Erreur lors de la vérification du paramètre perf:",n),t.value=!1,ub(!1)}}),Zu(()=>{mn.isRecording&&zv()});const e=(n,r)=>{if(!mn.isEnabled||!mn.isRecording)return null;const i=mn.measures.find(c=>c.name===n&&c.startTime===r);if(!i)return null;const s=i.startTime+i.duration,o=mn.measures.filter(c=>c.startTime>=i.startTime&&c.startTime<=s&&c!==i),a=mn.longTasks.filter(c=>c.startTime>=i.startTime&&c.startTime<=s),l=mn.memorySnapshots.filter(c=>c.timestamp>=i.startTime&&c.timestamp<=s);return{operation:{name:i.name,component:i.component,startTime:i.startTime,duration:i.duration,info:i.info},context:{relatedOperations:o.map(c=>({name:c.name,component:c.component,startTime:c.startTime-i.startTime,duration:c.duration,info:c.info})),longTasks:a.map(c=>({duration:c.duration,startTime:c.startTime-i.startTime,name:c.name,component:c.component})),memorySnapshots:l.map(c=>({...c,timestamp:c.timestamp-i.startTime}))},summary:{totalRelatedOperations:o.length,totalLongTasks:a.length,maxLongTaskDuration:Math.max(...a.map(c=>c.duration),0),memoryDelta:l.length>1?(l[l.length-1].usedJSHeapSize||0)-(l[0].usedJSHeapSize||0):0}}};return{isEnabled:pc(Ct(mn.isEnabled)),isQueryParamEnabled:pc(t),isRecording:pc(Ct(mn.isRecording)),measures:pc(Ct(mn.measures)),longTasks:pc(Ct(mn.longTasks)),memorySnapshots:pc(Ct(mn.memorySnapshots)),framesPerSecond:pc(Ct(mn.framesPerSecond)),operationHistory:pc(Ct(mn.operationHistory)),startRecording:Fy,stopRecording:zv,clearRecording:lb,startMeasure:QC,measure:tE,measureAsync:eE,captureMemorySnapshot:N_,createPerformanceTracker:rE,createAsyncPerformanceTracker:iE,getOperationDetails:e,getSlowOperations:()=>!mn.isEnabled||!mn.isRecording?[]:[...mn.measures].sort((n,r)=>r.duration-n.duration).slice(0,10),getLongTasks:()=>!mn.isEnabled||!mn.isRecording?[]:[...mn.longTasks].sort((n,r)=>r.duration-n.duration),getPerformanceReport:()=>{if(!mn.isEnabled||!mn.isRecording)return null;const n=cb();return{totalMeasures:mn.measures.length,totalLongTasks:mn.longTasks.length,slowestOperations:[...mn.measures].sort((r,i)=>i.duration-r.duration).slice(0,10),averageFps:mn.framesPerSecond,memoryUsage:mn.memorySnapshots.length>0?mn.memorySnapshots[mn.memorySnapshots.length-1]:null,operationsByComponent:V7(mn.measures),criticalPaths:n.criticalPaths,bottlenecks:n.bottlenecks,recordingDuration:mn.isRecording?performance.now()-mn.startTime:null}},analyzeCriticalPaths:cb}}function V7(t){if(!mn.isEnabled||!mn.isRecording)return{};const e={};return t.forEach(n=>{const r=n.component||"unknown";e[r]||(e[r]={totalTime:0,callCount:0,operations:{}}),e[r].totalTime+=n.duration,e[r].callCount++,e[r].operations[n.name]||(e[r].operations[n.name]={totalTime:0,callCount:0}),e[r].operations[n.name].totalTime+=n.duration,e[r].operations[n.name].callCount++}),e}const An={startRecording:Fy,stopRecording:zv,clearRecording:lb,startMeasure:QC,measure:tE,measureAsync:eE,captureMemorySnapshot:N_,createPerformanceTracker:rE,createAsyncPerformanceTracker:iE,setEnabled:ub,analyzeCriticalPaths:cb},In=na.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0}),Xr=$p();function sE(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}In.interceptors.request.use(async t=>{const e=Xr.startMeasure("api_request_interceptor","ApiService");try{const n=sE("access_token");return n&&(t.headers.Authorization=`Bearer ${n}`),console.log("Request config:",{url:t.url,method:t.method,headers:t.headers,withCredentials:t.withCredentials}),t}finally{e()}},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));In.interceptors.response.use(t=>t,async t=>{var r,i;const e=Xr.startMeasure("api_response_interceptor","ApiService"),n=t.config;try{if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;const s=xo();try{await Xr.measureAsync("token_refresh",()=>s.refreshToken(),"ApiService");const o=sE("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,In(n)}catch(o){return await s.logout(),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(o)}}return Promise.reject(t)}finally{e()}});function U7(t){var n;const e=[];if((n=t.response)!=null&&n.data){const r=t.response.data;typeof r=="object"&&!Array.isArray(r)?Object.entries(r).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>{e.push({field:i,message:o})}):typeof s=="string"&&e.push({field:i,message:s})}):typeof r=="string"?e.push({field:"non_field_error",message:r}):r.detail&&e.push({field:"non_field_error",message:r.detail})}else t.message&&e.push({field:"non_field_error",message:`Erreur de connexion: ${t.message}`});return e.length===0&&e.push({field:"non_field_error",message:"Une erreur inconnue s'est produite"}),e}async function tv(t){console.log("[fetchUsersByHierarchy] Récupération des utilisateurs:",t);const e={role:t.role};t.entrepriseId&&(e.entreprise=t.entrepriseId),t.salarieId&&(e.salarie=t.salarieId),t.includeDetails&&(e.include_plans=!0),t.search&&(e.search=t.search),console.log("[fetchUsersByHierarchy] Filtres appliqués:",e);try{const n=await hl.getUsers(e);return console.log(`[fetchUsersByHierarchy] Résultat (${n.data.length} utilisateurs):`,n.data),n.data}catch(n){throw console.error("[fetchUsersByHierarchy] Erreur lors de la récupération des utilisateurs:",n),n}}const hl={async getUsers(t={}){const e=Xr.startMeasure("get_users","UserService");try{return await Xr.measureAsync("get_users_request",()=>In.get("/users/",{params:t}),"UserService")}finally{e()}},async getUser(t){return await In.get(`/users/${t}/`)},async createUser(t){return await In.post("/users/",t)},async updateUser(t,e){return await In.patch(`/users/${t}/`,e)},async deleteUser(t){return await In.delete(`/users/${t}/`)},async getEntreprises(){return await In.get("/users/",{params:{role:"ENTREPRISE"}})},async getSalaries(t){const e={role:"SALARIE"};return t&&(e.entreprise=t),await In.get("/users/",{params:e})},async getSalarieVisiteurs(t){return await In.get("/users/",{params:{role:"VISITEUR",salarie:t}})},async getEntrepriseVisiteurs(t){return await In.get("/users/",{params:{role:"VISITEUR",entreprise:t}})},async getUsersByHierarchy(t){const e=Xr.startMeasure("get_users_hierarchy","UserService");try{const n=Xr.measure("prepare_hierarchy_filters",()=>{const r={role:t.role};return t.entrepriseId&&(r.entreprise=t.entrepriseId),t.salarieId&&(r.salarie=t.salarieId),t.includeDetails&&(r.include_plans=!0),t.search&&(r.search=t.search),r},"UserService");return await Xr.measureAsync("get_users_hierarchy_request",()=>In.get("/users/",{params:n}),"UserService")}finally{e()}},async getEntrepriseSalaries(t){return await In.get("/users/",{params:{role:"SALARIE",entreprise:t}})},async getVisiteurs(t,e){const n={role:"VISITEUR"};return t&&(n.salarie=t),e&&(n.entreprise=e),await In.get("/users/",{params:n})},async assignEntrepriseToSalarie(t,e){return await In.patch(`/users/${t}/`,{entreprise:e})},async assignSalarieToVisiteur(t,e){return await In.patch(`/users/${t}/`,{salarie:e})},formatLogoFileName(t){return Xr.measure("format_logo_filename",()=>{var i;const e=new Date().getTime(),n=((i=t.name.split(".").pop())==null?void 0:i.toLowerCase())||"";return`${t.name.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${e}.${n}`},"UserService")},async uploadLogo(t){const e=Xr.startMeasure("upload_logo","UserService");try{const n=new FormData,r=this.formatLogoFileName(t),i=new File([t],r,{type:t.type});return n.append("logo",i),await Xr.measureAsync("upload_logo_request",()=>In.post("/users/upload_logo/",n,{headers:{"Content-Type":"multipart/form-data"}}),"UserService")}finally{e()}}};async function U1(t,e=3,n=1e3,r=1e4){let i=0;for(;;)try{return await t()}catch(s){if(i++,i>=e)throw s;const o=Math.min(n*Math.pow(2,i-1),r),a=Math.random()*200;console.log(`Tentative ${i}/${e} échouée, nouvelle tentative dans ${o+a}ms`),await new Promise(l=>setTimeout(l,o+a))}}const y0={async getPlans(){const t=Xr.startMeasure("get_plans","IrrigationService");try{return await Xr.measureAsync("get_plans_request",()=>In.get("/plans/"),"IrrigationService")}finally{t()}},async createPlan(t){const e=Xr.startMeasure("create_plan","IrrigationService");try{const n=Xr.measure("format_plan_data",()=>({...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null}),"IrrigationService");return await Xr.measureAsync("create_plan_request",()=>In.post("/plans/",n),"IrrigationService")}finally{e()}},async updatePlan(t,e){const n=Xr.startMeasure("update_plan","IrrigationService");try{return await Xr.measureAsync("update_plan_request",()=>In.put(`/plans/${t}/`,e),"IrrigationService")}finally{n()}},async deletePlan(t){const e=Xr.startMeasure("delete_plan","IrrigationService");try{return await Xr.measureAsync("delete_plan_request",()=>In.delete(`/plans/${t}/`),"IrrigationService")}finally{e()}},async getVisiteurPlans(t){return await In.get("/plans/",{params:{visiteur:t}})},async createPlanForVisiteur(t){return await In.post("/plans/",t)},async getEntreprisePlans(t){return await In.get("/plans/",{params:{entreprise:t}})},async getSalariePlans(t){return await In.get("/plans/",{params:{salarie:t}})},async createPlanForSalarie(t,e){const n={...t,salarie:e};return await In.post("/plans/",n)},async createPlanForEntreprise(t,e){const n={...t,entreprise:e};return await In.post("/plans/",n)}},ka={async getNotes(t={}){const e=Xr.startMeasure("get_notes","NoteService");try{return await Xr.measureAsync("get_notes_request",()=>In.get("/notes/",{params:t}),"NoteService")}finally{e()}},async getNotesByPlan(t){const e=Xr.startMeasure("get_notes_by_plan","NoteService");try{return await Xr.measureAsync("get_notes_by_plan_request",()=>In.get("/notes/",{params:{plan:t}}),"NoteService")}finally{e()}},async getNote(t){const e=Xr.startMeasure("get_note","NoteService");try{return await Xr.measureAsync("get_note_request",()=>In.get(`/notes/${t}/`),"NoteService")}finally{e()}},async createNote(t){const e=Xr.startMeasure("create_note","NoteService");try{const n={...t};return n.location&&Object.keys(n.location).length===0&&delete n.location,await Xr.measureAsync("create_note_request",()=>In.post("/notes/",n),"NoteService")}finally{e()}},async updateNote(t,e){console.log("[noteService][updateNote] Mise à jour de la note:",{noteId:t,noteData:e});const n=Xr.startMeasure("update_note","NoteService");try{const r=e.backendId||t,i={...e};i.location&&Object.keys(i.location).length===0&&delete i.location,e.column!==void 0?i.column=e.column:e.columnId!==void 0&&(i.column=e.columnId),delete i.columnId,delete i.column_id,delete i.column_details,delete i.backendId,delete i.leafletId,console.log("[noteService][updateNote] Données formatées:",i),console.log(`[noteService][updateNote] Utilisation de l'ID backend ${r} pour la mise à jour`);const s=await Xr.measureAsync("update_note_request",()=>In.patch(`/notes/${r}/`,i),"NoteService");return console.log("[noteService][updateNote] Réponse du serveur:",s.data),s}catch(r){throw console.error("[noteService][updateNote] Erreur lors de la mise à jour:",r),r}finally{n()}},async deleteNote(t){const e=Xr.startMeasure("delete_note","NoteService");try{return await Xr.measureAsync("delete_note_request",()=>In.delete(`/notes/${t}/`),"NoteService")}finally{e()}},async getComments(t){return await In.get(`/notes/${t}/comments/`)},async addComment(t,e){const n=typeof e=="string"?{text:e}:e;return console.log(`[noteService][addComment] Envoi du commentaire pour la note ${t}:`,n),await In.post(`/notes/${t}/comments/`,n)},async updateComment(t,e,n){return await In.patch(`/notes/${t}/comments/${e}/`,n)},async deleteComment(t,e){return await In.delete(`/notes/${t}/comments/${e}/`)},async getPhotos(t){return await In.get(`/notes/${t}/photos/`)},async addPhoto(t,e){return await In.post(`/notes/${t}/photos/`,e,{headers:{"Content-Type":"multipart/form-data"}})},async updatePhoto(t,e,n){return await In.patch(`/notes/${t}/photos/${e}/`,n)},async deletePhoto(t,e){return await In.delete(`/notes/${t}/photos/${e}/`)}},H1={async getDevices(t={}){const e=Xr.startMeasure("get_weather_devices","WeatherService");try{return await U1(()=>In.get("/weather/devices/",{params:t}),3,1e3,1e4)}finally{e()}},async getRealTimeData(t){const e=Xr.startMeasure("get_weather_data","WeatherService");try{const n=typeof t=="string"?{mac:t}:t;return await U1(()=>In.get("/weather/",{params:n}),3,1e3,1e4)}finally{e()}},async getHistoryData(t){const e=Xr.startMeasure("get_history_data","WeatherService");try{return await U1(()=>In.get("/weather/history/",{params:t}),3,1e3,1e4)}finally{e()}}},b0={async getFilters(){const t=Xr.startMeasure("get_map_filters","MapFilterService");try{return await Xr.measureAsync("get_map_filters_request",()=>In.get("/map-filters/"),"MapFilterService")}finally{t()}},async getFilter(t){const e=Xr.startMeasure("get_map_filter","MapFilterService");try{return await Xr.measureAsync("get_map_filter_request",()=>In.get(`/map-filters/${t}/`),"MapFilterService")}finally{e()}},async createFilter(t){const e=Xr.startMeasure("create_map_filter","MapFilterService");try{return await Xr.measureAsync("create_map_filter_request",()=>In.post("/map-filters/",t),"MapFilterService")}finally{e()}},async updateFilter(t,e){const n=Xr.startMeasure("update_map_filter","MapFilterService");try{return await Xr.measureAsync("update_map_filter_request",()=>In.patch(`/map-filters/${t}/`,e),"MapFilterService")}finally{n()}},async deleteFilter(t){const e=Xr.startMeasure("delete_map_filter","MapFilterService");try{return await Xr.measureAsync("delete_map_filter_request",()=>In.delete(`/map-filters/${t}/`),"MapFilterService")}finally{e()}}};In.defaults.baseURL="/api";In.defaults.headers.common["Content-Type"]="application/json";In.defaults.withCredentials=!0;function pm(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}In.interceptors.request.use(t=>{const e=pm("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));In.interceptors.response.use(t=>t,async t=>{var r,i;const e=xo(),n=t.config;if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;try{if(!pm("access_token"))throw new Error("No token available");await e.refreshToken();const o=pm("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,In(n)}catch(s){console.error("Token refresh failed:",s),await e.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(t)});function H7(t,e,n=1){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${t}=${e};${i};path=/;secure;samesite=Strict`}function Cu(t){if(!t)return"-";const e=t.first_name||"",n=t.last_name?t.last_name.toUpperCase():"",r=`${e} ${n}`.trim(),i=t.company_name||t.role||"";return!r&&!i?"-":r?i?`${r} (${i})`:r:`(${i})`}function W7(t="",e=""){return`${(t==null?void 0:t.charAt(0))||""}${(e==null?void 0:e.charAt(0))||""}`.toUpperCase()}const G7={ADMIN:"Administrateur",ENTREPRISE:"Entreprise",SALARIE:"Salarie",VISITEUR:"Visiteur"};function q7(t){return G7[t]||t}function Y7(){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function K7(t){return t?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}async function Z7({role:t,entrepriseId:e,salarieId:n,includeDetails:r=!1}){const i={role:t};return e&&(i.entreprise=e),n&&(i.salarie=n),r&&(i.include_plans=!0),(await hl.getUsers(i)).data}const xo=Fp("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,enterprises:[],employees:[],visitors:[]}),getters:{isAdmin:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="admin"},isEntreprise:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="entreprise"},isSalarie:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="salarie"},isVisiteur:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="visiteur"},currentUser:t=>t.user,hasEnterprise:t=>{var e;return!!((e=t.user)!=null&&e.enterprise_id)},hasEmployee:t=>{var e;return!!((e=t.user)!=null&&e.employee_id)}},actions:{async initialize(t){if(!t){const n=await this.restoreSession();return this.initialized=!0,n}if(t.isAuthenticated&&t.user)return this.user=t.user,this.isAuthenticated=!0,this.mustChangePassword=t.user.must_change_password||!1,this.initialized=!0,!0;const e=await this.restoreSession();return this.initialized=!0,e},async restoreSession(){try{if(!pm("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const e=await In.post("/token/refresh/");return e.data.user?(this.user=e.data.user,this.isAuthenticated=!0,this.mustChangePassword=e.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(t){return console.error("Failed to restore session:",t),this.isAuthenticated=!1,this.user=null,!1}},async login(t,e){var n,r,i;try{const s=await In.post("/token/",{username:t,password:e});if(!s.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${s.data.access}; path=/; secure; samesite=Strict`;const o=await this.fetchUserProfile();return this.user=o,this.isAuthenticated=!0,!0}catch(s){throw this.isAuthenticated=!1,this.user=null,((n=s.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(i=(r=s.response)==null?void 0:r.data)!=null&&i.detail?new Error(s.response.data.detail):s}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const t=await In.get("/users/me/");return this.user=t.data,this.isAuthenticated=!0,this.mustChangePassword=t.data.must_change_password||!1,t.data}catch(t){throw this.isAuthenticated=!1,this.user=null,t}},async changePassword(t,e){try{const n=await In.post("/users/change_password/",{old_password:t,password:e});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var t,e;try{if(!pm("refresh_token"))throw new Error("No refresh token available");const r=await In.post("/token/refresh/",{},{withCredentials:!0,_retry:!0}),{access:i}=r.data;if(!i)throw new Error("No access token received");return H7("access_token",i,1),this.isAuthenticated=!0,i}catch(n){throw console.error("Error refreshing token:",{status:(t=n.response)==null?void 0:t.status,data:(e=n.response)==null?void 0:e.data}),this.isAuthenticated=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",n}},async fetchUsers(t={}){this.loading=!0;try{return(await hl.getUsers(t)).data}catch(e){throw this.error="Erreur lors de la récupération des utilisateurs",e}finally{this.loading=!1}},async fetchEnterprises(){this.loading=!0;try{const t=await hl.getUsers({role:"ENTREPRISE"});return this.enterprises=t.data,this.enterprises}catch(t){throw this.error="Erreur lors de la récupération des entreprises",t}finally{this.loading=!1}},async fetchEnterpriseEmployees(t){this.loading=!0;try{const e=await hl.getUsers({role:"SALARIE",entreprise:t});return this.employees=e.data,this.employees}catch(e){throw this.error="Erreur lors de la récupération des salaries",e}finally{this.loading=!1}},async fetchEnterpriseVisitors(t){this.loading=!0;try{const e=await hl.getUsers({role:"VISITEUR",entreprise:t});return this.visitors=e.data,this.visitors}catch(e){throw this.error="Erreur lors de la récupération des visiteurs",e}finally{this.loading=!1}},async createUser(t){this.loading=!0;try{return(await hl.createUser(t)).data}catch(e){throw this.error="Erreur lors de la création de l'utilisateur",e}finally{this.loading=!1}},async updateUser(t,e){this.loading=!0;try{return(await hl.updateUser(t,e)).data}catch(n){throw this.error="Erreur lors de la mise à jour de l'utilisateur",n}finally{this.loading=!1}},async deleteUser(t){this.loading=!0;try{return await hl.deleteUser(t),!0}catch(e){throw this.error="Erreur lors de la suppression de l'utilisateur",e}finally{this.loading=!1}},async fetchEnterprisesLegacy(){this.loading=!0;try{const t=await In.get("/users/",{params:{role:"entreprise"}});this.enterprises=t.data}catch(t){throw this.error="Erreur lors de la récupération des entreprises",t}finally{this.loading=!1}},async setEnterprise(t,e){this.loading=!0;try{await In.patch(`/users/${t}/`,{enterprise:e}),this.user&&this.user.id===t&&(this.user.enterprise_id=e)}catch(n){throw this.error="Erreur lors de la mise à jour de l'entreprise",n}finally{this.loading=!1}},async updateUserRole(t,e){this.loading=!0;try{const n=await In.patch(`/users/${t}/`,{role:e});return this.user&&this.user.id===t&&(this.user.user_type=e),n.data}catch(n){throw this.error="Erreur lors de la mise à jour du rôle",n}finally{this.loading=!1}},async updateUserEmail(t){var e;this.loading=!0;try{const n=await In.patch(`/users/${(e=this.user)==null?void 0:e.id}/`,{email:t});return this.user&&(this.user.email=t),n.data}catch(n){throw this.error="Erreur lors de la mise à jour de l'email",n}finally{this.loading=!1}},async uploadLogo(t){this.loading=!0;try{const e=await hl.uploadLogo(t);return this.user&&e.data.logo&&(this.user.logo=e.data.logo),e.data}catch(e){throw this.error="Erreur lors du téléversement du logo",e}finally{this.loading=!1}},checkAccess(t){return this.user?t.includes(this.user.user_type):!1},async fetchUsersByRole(t){this.loading=!0;try{return await Z7(t)}catch(e){throw console.error(`Error fetching ${t.role}:`,e),e}finally{this.loading=!1}},async fetchEntrepriseSalaries(t){this.loading=!0;try{return(await hl.getUsers({role:"SALARIE",entreprise:t})).data}catch(e){throw this.error="Erreur lors de la récupération des salaries",e}finally{this.loading=!1}},async fetchSalarieVisiteurs(t){this.loading=!0;try{return(await hl.getUsers({role:"VISITEUR",salarie:t})).data}catch(e){throw this.error="Erreur lors de la récupération des visiteurs",e}finally{this.loading=!1}}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const ip=typeof document<"u";function oE(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function X7(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&oE(t.default)}const us=Object.assign;function W1(t,e){const n={};for(const r in e){const i=e[r];n[r]=Cc(i)?i.map(t):t(i)}return n}const Vg=()=>{},Cc=Array.isArray,aE=/#/g,J7=/&/g,Q7=/\//g,eB=/=/g,tB=/\?/g,lE=/\+/g,nB=/%5B/g,rB=/%5D/g,uE=/%5E/g,iB=/%60/g,cE=/%7B/g,sB=/%7C/g,dE=/%7D/g,oB=/%20/g;function O_(t){return encodeURI(""+t).replace(sB,"|").replace(nB,"[").replace(rB,"]")}function aB(t){return O_(t).replace(cE,"{").replace(dE,"}").replace(uE,"^")}function db(t){return O_(t).replace(lE,"%2B").replace(oB,"+").replace(aE,"%23").replace(J7,"%26").replace(iB,"`").replace(cE,"{").replace(dE,"}").replace(uE,"^")}function lB(t){return db(t).replace(eB,"%3D")}function uB(t){return O_(t).replace(aE,"%23").replace(tB,"%3F")}function cB(t){return t==null?"":uB(t).replace(Q7,"%2F")}function gm(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const dB=/\/$/,hB=t=>t.replace(dB,"");function G1(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=mB(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:gm(o)}}function fB(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function E4(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function pB(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Pp(e.matched[r],n.matched[i])&&hE(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Pp(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function hE(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!gB(t[n],e[n]))return!1;return!0}function gB(t,e){return Cc(t)?P4(t,e):Cc(e)?P4(e,t):t===e}function P4(t,e){return Cc(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function mB(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Kd={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var mm;(function(t){t.pop="pop",t.push="push"})(mm||(mm={}));var Ug;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ug||(Ug={}));function vB(t){if(!t)if(ip){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),hB(t)}const yB=/^[^#]+#/;function bB(t,e){return t.replace(yB,"#")+e}function _B(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const jy=()=>({left:window.scrollX,top:window.scrollY});function wB(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=_B(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function M4(t,e){return(history.state?history.state.position-e:-1)+t}const hb=new Map;function xB(t,e){hb.set(t,e)}function LB(t){const e=hb.get(t);return hb.delete(t),e}let SB=()=>location.protocol+"//"+location.host;function fE(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),E4(l,"")}return E4(n,t)+r+i}function CB(t,e,n,r){let i=[],s=[],o=null;const a=({state:v})=>{const g=fE(t,location),x=n.value,E=e.value;let D=0;if(v){if(n.value=g,e.value=v,o&&o===x){o=null;return}D=E?v.position-E.position:0}else r(g);i.forEach(M=>{M(n.value,x,{delta:D,type:mm.pop,direction:D?D>0?Ug.forward:Ug.back:Ug.unknown})})};function l(){o=n.value}function c(v){i.push(v);const g=()=>{const x=i.indexOf(v);x>-1&&i.splice(x,1)};return s.push(g),g}function h(){const{history:v}=window;v.state&&v.replaceState(us({},v.state,{scroll:jy()}),"")}function p(){for(const v of s)v();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:c,destroy:p}}function k4(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?jy():null}}function EB(t){const{history:e,location:n}=window,r={value:fE(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,h){const p=t.indexOf("#"),v=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:SB()+t+l;try{e[h?"replaceState":"pushState"](c,"",v),i.value=c}catch(g){console.error(g),n[h?"replace":"assign"](v)}}function o(l,c){const h=us({},e.state,k4(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,h,!0),r.value=l}function a(l,c){const h=us({},i.value,e.state,{forward:l,scroll:jy()});s(h.current,h,!0);const p=us({},k4(r.value,l,null),{position:h.position+1},c);s(l,p,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function PB(t){t=vB(t);const e=EB(t),n=CB(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=us({location:"",base:t,go:r,createHref:bB.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function MB(t){return typeof t=="string"||t&&typeof t=="object"}function pE(t){return typeof t=="string"||typeof t=="symbol"}const gE=Symbol("");var A4;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(A4||(A4={}));function Mp(t,e){return us(new Error,{type:t,[gE]:!0},e)}function yd(t,e){return t instanceof Error&&gE in t&&(e==null||!!(t.type&e))}const T4="[^/]+?",kB={sensitive:!1,strict:!1,start:!0,end:!0},AB=/[.+*?^${}()[\]/\\]/g;function TB(t,e){const n=us({},kB,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const h=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let p=0;p<c.length;p++){const v=c[p];let g=40+(n.sensitive?.25:0);if(v.type===0)p||(i+="/"),i+=v.value.replace(AB,"\\$&"),g+=40;else if(v.type===1){const{value:x,repeatable:E,optional:D,regexp:M}=v;s.push({name:x,repeatable:E,optional:D});const A=M||T4;if(A!==T4){g+=10;try{new RegExp(`(${A})`)}catch(Y){throw new Error(`Invalid custom RegExp for param "${x}" (${A}): `+Y.message)}}let z=E?`((?:${A})(?:/(?:${A}))*)`:`(${A})`;p||(z=D&&c.length<2?`(?:/${z})`:"/"+z),D&&(z+="?"),i+=z,g+=20,D&&(g+=-8),E&&(g+=-20),A===".*"&&(g+=-50)}h.push(g)}r.push(h)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const h=c.match(o),p={};if(!h)return null;for(let v=1;v<h.length;v++){const g=h[v]||"",x=s[v-1];p[x.name]=g&&x.repeatable?g.split("/"):g}return p}function l(c){let h="",p=!1;for(const v of t){(!p||!h.endsWith("/"))&&(h+="/"),p=!1;for(const g of v)if(g.type===0)h+=g.value;else if(g.type===1){const{value:x,repeatable:E,optional:D}=g,M=x in c?c[x]:"";if(Cc(M)&&!E)throw new Error(`Provided param "${x}" is an array but it is not repeatable (* or + modifiers)`);const A=Cc(M)?M.join("/"):M;if(!A)if(D)v.length<2&&(h.endsWith("/")?h=h.slice(0,-1):p=!0);else throw new Error(`Missing required param "${x}"`);h+=A}}return h||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function DB(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function mE(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=DB(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(D4(r))return 1;if(D4(i))return-1}return i.length-r.length}function D4(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const NB={type:0,value:""},OB=/[a-zA-Z0-9_]/;function IB(t){if(!t)return[[]];if(t==="/")return[[NB]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${c}": ${g}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",h="";function p(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function v(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&p(),o()):l===":"?(p(),n=1):v();break;case 4:v(),n=r;break;case 1:l==="("?n=2:OB.test(l)?v():(p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=3:h+=l;break;case 3:p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),p(),o(),i}function BB(t,e,n){const r=TB(IB(t.path),n),i=us(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function RB(t,e){const n=[],r=new Map;e=B4({strict:!1,end:!0,sensitive:!1},e);function i(p){return r.get(p)}function s(p,v,g){const x=!g,E=O4(p);E.aliasOf=g&&g.record;const D=B4(e,p),M=[E];if("alias"in p){const Y=typeof p.alias=="string"?[p.alias]:p.alias;for(const ne of Y)M.push(O4(us({},E,{components:g?g.record.components:E.components,path:ne,aliasOf:g?g.record:E})))}let A,z;for(const Y of M){const{path:ne}=Y;if(v&&ne[0]!=="/"){const ge=v.record.path,pe=ge[ge.length-1]==="/"?"":"/";Y.path=v.record.path+(ne&&pe+ne)}if(A=BB(Y,v,D),g?g.alias.push(A):(z=z||A,z!==A&&z.alias.push(A),x&&p.name&&!I4(A)&&o(p.name)),vE(A)&&l(A),E.children){const ge=E.children;for(let pe=0;pe<ge.length;pe++)s(ge[pe],A,g&&g.children[pe])}g=g||A}return z?()=>{o(z)}:Vg}function o(p){if(pE(p)){const v=r.get(p);v&&(r.delete(p),n.splice(n.indexOf(v),1),v.children.forEach(o),v.alias.forEach(o))}else{const v=n.indexOf(p);v>-1&&(n.splice(v,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function a(){return n}function l(p){const v=zB(p,n);n.splice(v,0,p),p.record.name&&!I4(p)&&r.set(p.record.name,p)}function c(p,v){let g,x={},E,D;if("name"in p&&p.name){if(g=r.get(p.name),!g)throw Mp(1,{location:p});D=g.record.name,x=us(N4(v.params,g.keys.filter(z=>!z.optional).concat(g.parent?g.parent.keys.filter(z=>z.optional):[]).map(z=>z.name)),p.params&&N4(p.params,g.keys.map(z=>z.name))),E=g.stringify(x)}else if(p.path!=null)E=p.path,g=n.find(z=>z.re.test(E)),g&&(x=g.parse(E),D=g.record.name);else{if(g=v.name?r.get(v.name):n.find(z=>z.re.test(v.path)),!g)throw Mp(1,{location:p,currentLocation:v});D=g.record.name,x=us({},v.params,p.params),E=g.stringify(x)}const M=[];let A=g;for(;A;)M.unshift(A.record),A=A.parent;return{name:D,path:E,params:x,matched:M,meta:jB(M)}}t.forEach(p=>s(p));function h(){n.length=0,r.clear()}return{addRoute:s,resolve:c,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:i}}function N4(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function O4(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:FB(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function FB(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function I4(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function jB(t){return t.reduce((e,n)=>us(e,n.meta),{})}function B4(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function zB(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;mE(t,e[s])<0?r=s:n=s+1}const i=$B(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function $B(t){let e=t;for(;e=e.parent;)if(vE(e)&&mE(t,e)===0)return e}function vE({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function VB(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(lE," "),o=s.indexOf("="),a=gm(o<0?s:s.slice(0,o)),l=o<0?null:gm(s.slice(o+1));if(a in e){let c=e[a];Cc(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function R4(t){let e="";for(let n in t){const r=t[n];if(n=lB(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Cc(r)?r.map(s=>s&&db(s)):[r&&db(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function UB(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Cc(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const HB=Symbol(""),F4=Symbol(""),zy=Symbol(""),I_=Symbol(""),fb=Symbol("");function eg(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function oh(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=v=>{v===!1?l(Mp(4,{from:n,to:e})):v instanceof Error?l(v):MB(v)?l(Mp(2,{from:e,to:v})):(o&&r.enterCallbacks[i]===o&&typeof v=="function"&&o.push(v),a())},h=s(()=>t.call(r&&r.instances[i],e,n,c));let p=Promise.resolve(h);t.length<3&&(p=p.then(c)),p.catch(v=>l(v))})}function q1(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(oE(l)){const h=(l.__vccOpts||l)[e];h&&s.push(oh(h,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const p=X7(h)?h.default:h;o.mods[a]=h,o.components[a]=p;const g=(p.__vccOpts||p)[e];return g&&oh(g,n,r,o,a,i)()}))}}return s}function j4(t){const e=Mu(zy),n=Mu(I_),r=Xn(()=>{const l=Vn(t.to);return e.resolve(l)}),i=Xn(()=>{const{matched:l}=r.value,{length:c}=l,h=l[c-1],p=n.matched;if(!h||!p.length)return-1;const v=p.findIndex(Pp.bind(null,h));if(v>-1)return v;const g=z4(l[c-2]);return c>1&&z4(h)===g&&p[p.length-1].path!==g?p.findIndex(Pp.bind(null,l[c-2])):v}),s=Xn(()=>i.value>-1&&YB(n.params,r.value.params)),o=Xn(()=>i.value>-1&&i.value===n.matched.length-1&&hE(n.params,r.value.params));function a(l={}){if(qB(l)){const c=e[Vn(t.replace)?"replace":"push"](Vn(t.to)).catch(Vg);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:Xn(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function WB(t){return t.length===1?t[0]:t}const GB=Hs({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:j4,setup(t,{slots:e}){const n=ou(j4(t)),{options:r}=Mu(zy),i=Xn(()=>({[$4(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[$4(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&WB(e.default(n));return t.custom?s:My("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),bg=GB;function qB(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function YB(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Cc(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function z4(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const $4=(t,e,n)=>t??e??n,KB=Hs({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Mu(fb),i=Xn(()=>t.route||r.value),s=Mu(F4,0),o=Xn(()=>{let c=Vn(s);const{matched:h}=i.value;let p;for(;(p=h[c])&&!p.components;)c++;return c}),a=Xn(()=>i.value.matched[o.value]);Fg(F4,Xn(()=>o.value+1)),Fg(HB,a),Fg(fb,i);const l=Ct();return Ti(()=>[l.value,a.value,t.name],([c,h,p],[v,g,x])=>{h&&(h.instances[p]=c,g&&g!==h&&c&&c===v&&(h.leaveGuards.size||(h.leaveGuards=g.leaveGuards),h.updateGuards.size||(h.updateGuards=g.updateGuards))),c&&h&&(!g||!Pp(h,g)||!v)&&(h.enterCallbacks[p]||[]).forEach(E=>E(c))},{flush:"post"}),()=>{const c=i.value,h=t.name,p=a.value,v=p&&p.components[h];if(!v)return V4(n.default,{Component:v,route:c});const g=p.props[h],x=g?g===!0?c.params:typeof g=="function"?g(c):g:null,D=My(v,us({},x,e,{onVnodeUnmounted:M=>{M.component.isUnmounted&&(p.instances[h]=null)},ref:l}));return V4(n.default,{Component:D,route:c})||D}}});function V4(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const yE=KB;function ZB(t){const e=RB(t.routes,t),n=t.parseQuery||VB,r=t.stringifyQuery||R4,i=t.history,s=eg(),o=eg(),a=eg(),l=p_(Kd);let c=Kd;ip&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=W1.bind(null,ye=>""+ye),p=W1.bind(null,cB),v=W1.bind(null,gm);function g(ye,he){let X,Ae;return pE(ye)?(X=e.getRecordMatcher(ye),Ae=he):Ae=ye,e.addRoute(Ae,X)}function x(ye){const he=e.getRecordMatcher(ye);he&&e.removeRoute(he)}function E(){return e.getRoutes().map(ye=>ye.record)}function D(ye){return!!e.getRecordMatcher(ye)}function M(ye,he){if(he=us({},he||l.value),typeof ye=="string"){const ee=G1(n,ye,he.path),se=e.resolve({path:ee.path},he),le=i.createHref(ee.fullPath);return us(ee,se,{params:v(se.params),hash:gm(ee.hash),redirectedFrom:void 0,href:le})}let X;if(ye.path!=null)X=us({},ye,{path:G1(n,ye.path,he.path).path});else{const ee=us({},ye.params);for(const se in ee)ee[se]==null&&delete ee[se];X=us({},ye,{params:p(ee)}),he.params=p(he.params)}const Ae=e.resolve(X,he),De=ye.hash||"";Ae.params=h(v(Ae.params));const Xe=fB(r,us({},ye,{hash:aB(De),path:Ae.path})),fe=i.createHref(Xe);return us({fullPath:Xe,hash:De,query:r===R4?UB(ye.query):ye.query||{}},Ae,{redirectedFrom:void 0,href:fe})}function A(ye){return typeof ye=="string"?G1(n,ye,l.value.path):us({},ye)}function z(ye,he){if(c!==ye)return Mp(8,{from:he,to:ye})}function Y(ye){return pe(ye)}function ne(ye){return Y(us(A(ye),{replace:!0}))}function ge(ye){const he=ye.matched[ye.matched.length-1];if(he&&he.redirect){const{redirect:X}=he;let Ae=typeof X=="function"?X(ye):X;return typeof Ae=="string"&&(Ae=Ae.includes("?")||Ae.includes("#")?Ae=A(Ae):{path:Ae},Ae.params={}),us({query:ye.query,hash:ye.hash,params:Ae.path!=null?{}:ye.params},Ae)}}function pe(ye,he){const X=c=M(ye),Ae=l.value,De=ye.state,Xe=ye.force,fe=ye.replace===!0,ee=ge(X);if(ee)return pe(us(A(ee),{state:typeof ee=="object"?us({},De,ee.state):De,force:Xe,replace:fe}),he||X);const se=X;se.redirectedFrom=he;let le;return!Xe&&pB(r,Ae,X)&&(le=Mp(16,{to:se,from:Ae}),qe(Ae,Ae,!0,!1)),(le?Promise.resolve(le):J(se,Ae)).catch(je=>yd(je)?yd(je,2)?je:ve(je):G(je,se,Ae)).then(je=>{if(je){if(yd(je,2))return pe(us({replace:fe},A(je.to),{state:typeof je.to=="object"?us({},De,je.to.state):De,force:Xe}),he||se)}else je=R(se,Ae,!0,fe,De);return U(se,Ae,je),je})}function O(ye,he){const X=z(ye,he);return X?Promise.reject(X):Promise.resolve()}function j(ye){const he=Z.values().next().value;return he&&typeof he.runWithContext=="function"?he.runWithContext(ye):ye()}function J(ye,he){let X;const[Ae,De,Xe]=XB(ye,he);X=q1(Ae.reverse(),"beforeRouteLeave",ye,he);for(const ee of Ae)ee.leaveGuards.forEach(se=>{X.push(oh(se,ye,he))});const fe=O.bind(null,ye,he);return X.push(fe),de(X).then(()=>{X=[];for(const ee of s.list())X.push(oh(ee,ye,he));return X.push(fe),de(X)}).then(()=>{X=q1(De,"beforeRouteUpdate",ye,he);for(const ee of De)ee.updateGuards.forEach(se=>{X.push(oh(se,ye,he))});return X.push(fe),de(X)}).then(()=>{X=[];for(const ee of Xe)if(ee.beforeEnter)if(Cc(ee.beforeEnter))for(const se of ee.beforeEnter)X.push(oh(se,ye,he));else X.push(oh(ee.beforeEnter,ye,he));return X.push(fe),de(X)}).then(()=>(ye.matched.forEach(ee=>ee.enterCallbacks={}),X=q1(Xe,"beforeRouteEnter",ye,he,j),X.push(fe),de(X))).then(()=>{X=[];for(const ee of o.list())X.push(oh(ee,ye,he));return X.push(fe),de(X)}).catch(ee=>yd(ee,8)?ee:Promise.reject(ee))}function U(ye,he,X){a.list().forEach(Ae=>j(()=>Ae(ye,he,X)))}function R(ye,he,X,Ae,De){const Xe=z(ye,he);if(Xe)return Xe;const fe=he===Kd,ee=ip?history.state:{};X&&(Ae||fe?i.replace(ye.fullPath,us({scroll:fe&&ee&&ee.scroll},De)):i.push(ye.fullPath,De)),l.value=ye,qe(ye,he,X,fe),ve()}let V;function $(){V||(V=i.listen((ye,he,X)=>{if(!oe.listening)return;const Ae=M(ye),De=ge(Ae);if(De){pe(us(De,{replace:!0,force:!0}),Ae).catch(Vg);return}c=Ae;const Xe=l.value;ip&&xB(M4(Xe.fullPath,X.delta),jy()),J(Ae,Xe).catch(fe=>yd(fe,12)?fe:yd(fe,2)?(pe(us(A(fe.to),{force:!0}),Ae).then(ee=>{yd(ee,20)&&!X.delta&&X.type===mm.pop&&i.go(-1,!1)}).catch(Vg),Promise.reject()):(X.delta&&i.go(-X.delta,!1),G(fe,Ae,Xe))).then(fe=>{fe=fe||R(Ae,Xe,!1),fe&&(X.delta&&!yd(fe,8)?i.go(-X.delta,!1):X.type===mm.pop&&yd(fe,20)&&i.go(-1,!1)),U(Ae,Xe,fe)}).catch(Vg)}))}let B=eg(),I=eg(),Q;function G(ye,he,X){ve(ye);const Ae=I.list();return Ae.length?Ae.forEach(De=>De(ye,he,X)):console.error(ye),Promise.reject(ye)}function _e(){return Q&&l.value!==Kd?Promise.resolve():new Promise((ye,he)=>{B.add([ye,he])})}function ve(ye){return Q||(Q=!ye,$(),B.list().forEach(([he,X])=>ye?X(ye):he()),B.reset()),ye}function qe(ye,he,X,Ae){const{scrollBehavior:De}=t;if(!ip||!De)return Promise.resolve();const Xe=!X&&LB(M4(ye.fullPath,0))||(Ae||!X)&&history.state&&history.state.scroll||null;return ma().then(()=>De(ye,he,Xe)).then(fe=>fe&&wB(fe)).catch(fe=>G(fe,ye,he))}const re=ye=>i.go(ye);let K;const Z=new Set,oe={currentRoute:l,listening:!0,addRoute:g,removeRoute:x,clearRoutes:e.clearRoutes,hasRoute:D,getRoutes:E,resolve:M,options:t,push:Y,replace:ne,go:re,back:()=>re(-1),forward:()=>re(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:I.add,isReady:_e,install(ye){const he=this;ye.component("RouterLink",bg),ye.component("RouterView",yE),ye.config.globalProperties.$router=he,Object.defineProperty(ye.config.globalProperties,"$route",{enumerable:!0,get:()=>Vn(l)}),ip&&!K&&l.value===Kd&&(K=!0,Y(i.location).catch(De=>{}));const X={};for(const De in Kd)Object.defineProperty(X,De,{get:()=>l.value[De],enumerable:!0});ye.provide(zy,he),ye.provide(I_,f_(X)),ye.provide(fb,l);const Ae=ye.unmount;Z.add(ye),ye.unmount=function(){Z.delete(ye),Z.size<1&&(c=Kd,V&&V(),V=null,l.value=Kd,K=!1,Q=!1),Ae()}}};function de(ye){return ye.reduce((he,X)=>he.then(()=>j(X)),Promise.resolve())}return oe}function XB(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>Pp(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Pp(c,l))||i.push(l))}return[n,r,i]}function Nm(){return Mu(zy)}function JB(t){return Mu(I_)}const su=Fp("notification",()=>{const t=Ct([]),e=Ct(0),n=Ct(null),r=Xn(()=>[...t.value].sort((p,v)=>v.timestamp-p.timestamp));function i({type:p,message:v,duration:g=5e3}){const x=++e.value,E=Date.now(),D={id:x,type:p,message:v,duration:g,timestamp:E};return t.value.push(D),n.value=x,g>0&&setTimeout(()=>{c(x)},g),x}const s=(p,v=5e3)=>i({type:"success",message:p,duration:v}),o=(p,v=5e3)=>i({type:"error",message:p,duration:v}),a=(p,v=5e3)=>i({type:"info",message:p,duration:v}),l=(p,v=5e3)=>i({type:"warning",message:p,duration:v});function c(p){const v=t.value.findIndex(g=>g.id===p);v!==-1&&t.value.splice(v,1),n.value===p&&(n.value=null)}function h(){t.value=[],n.value=null}return{notifications:r,lastAddedId:n,addNotification:i,removeNotification:c,clearAll:h,success:s,error:o,info:a,warning:l}}),QB=Object.freeze(Object.defineProperty({__proto__:null,useNotificationStore:su},Symbol.toStringTag,{value:"Module"}));var Aa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function B_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function bE(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}function eR(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var _E=eR,tR=typeof Aa=="object"&&Aa&&Aa.Object===Object&&Aa,nR=tR,rR=nR,iR=typeof self=="object"&&self&&self.Object===Object&&self,sR=rR||iR||Function("return this")(),wE=sR,oR=wE,aR=function(){return oR.Date.now()},lR=aR,uR=/\s/;function cR(t){for(var e=t.length;e--&&uR.test(t.charAt(e)););return e}var dR=cR,hR=dR,fR=/^\s+/;function pR(t){return t&&t.slice(0,hR(t)+1).replace(fR,"")}var gR=pR,mR=wE,vR=mR.Symbol,xE=vR,U4=xE,LE=Object.prototype,yR=LE.hasOwnProperty,bR=LE.toString,tg=U4?U4.toStringTag:void 0;function _R(t){var e=yR.call(t,tg),n=t[tg];try{t[tg]=void 0;var r=!0}catch{}var i=bR.call(t);return r&&(e?t[tg]=n:delete t[tg]),i}var wR=_R,xR=Object.prototype,LR=xR.toString;function SR(t){return LR.call(t)}var CR=SR,H4=xE,ER=wR,PR=CR,MR="[object Null]",kR="[object Undefined]",W4=H4?H4.toStringTag:void 0;function AR(t){return t==null?t===void 0?kR:MR:W4&&W4 in Object(t)?ER(t):PR(t)}var TR=AR;function DR(t){return t!=null&&typeof t=="object"}var NR=DR,OR=TR,IR=NR,BR="[object Symbol]";function RR(t){return typeof t=="symbol"||IR(t)&&OR(t)==BR}var FR=RR,jR=gR,G4=_E,zR=FR,q4=NaN,$R=/^[-+]0x[0-9a-f]+$/i,VR=/^0b[01]+$/i,UR=/^0o[0-7]+$/i,HR=parseInt;function WR(t){if(typeof t=="number")return t;if(zR(t))return q4;if(G4(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=G4(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=jR(t);var n=VR.test(t);return n||UR.test(t)?HR(t.slice(2),n?2:8):$R.test(t)?q4:+t}var GR=WR,qR=_E,Y1=lR,Y4=GR,YR="Expected a function",KR=Math.max,ZR=Math.min;function XR(t,e,n){var r,i,s,o,a,l,c=0,h=!1,p=!1,v=!0;if(typeof t!="function")throw new TypeError(YR);e=Y4(e)||0,qR(n)&&(h=!!n.leading,p="maxWait"in n,s=p?KR(Y4(n.maxWait)||0,e):s,v="trailing"in n?!!n.trailing:v);function g(ge){var pe=r,O=i;return r=i=void 0,c=ge,o=t.apply(O,pe),o}function x(ge){return c=ge,a=setTimeout(M,e),h?g(ge):o}function E(ge){var pe=ge-l,O=ge-c,j=e-pe;return p?ZR(j,s-O):j}function D(ge){var pe=ge-l,O=ge-c;return l===void 0||pe>=e||pe<0||p&&O>=s}function M(){var ge=Y1();if(D(ge))return A(ge);a=setTimeout(M,E(ge))}function A(ge){return a=void 0,v&&r?g(ge):(r=i=void 0,o)}function z(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function Y(){return a===void 0?o:A(Y1())}function ne(){var ge=Y1(),pe=D(ge);if(r=arguments,i=this,l=ge,pe){if(a===void 0)return x(l);if(p)return clearTimeout(a),a=setTimeout(M,e),g(l)}return a===void 0&&(a=setTimeout(M,e)),o}return ne.cancel=z,ne.flush=Y,ne}var JR=XR;const QR=B_(JR),eF={class:"relative w-full"},tF={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},nF=["onClick"],K4=Hs({__name:"SearchBar",emits:["select-location"],setup(t,{emit:e}){const n=Ct(""),r=Ct([]),i=e,s=QR(async l=>{if(l.length<3){r.value=[];return}try{const h=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(l)}`)).json();r.value=h}catch(c){console.error("Erreur lors de la recherche d'adresse:",c),r.value=[]}},300);function o(){s(n.value)}function a(l){n.value=l.display_name,r.value=[],i("select-location",{lat:parseFloat(l.lat),lng:parseFloat(l.lon)})}return(l,c)=>(Ne(),Be("div",eF,[kn(S("input",{"onUpdate:modelValue":c[0]||(c[0]=h=>n.value=h),onInput:o,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[zr,n.value]]),r.value.length>0?(Ne(),Be("div",tF,[(Ne(!0),Be(wn,null,Qn(r.value,h=>(Ne(),Be("div",{key:h.place_id,onClick:p=>a(h),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},kt(h.display_name),9,nF))),128))])):Zt("",!0)]))}}),rF={class:"perf-title"},iF={class:"perf-basic-stats"},sF={class:"perf-stat"},oF={class:"perf-stat"},aF={class:"perf-expand-btn"},lF={key:0,class:"perf-content"},uF={class:"perf-section"},cF={class:"perf-metrics"},dF={class:"perf-metric"},hF={class:"perf-metric-value"},fF={class:"perf-metric"},pF={class:"perf-metric-value"},gF={class:"perf-metric"},mF={class:"perf-metric-value"},vF={class:"perf-metric"},yF={class:"perf-metric-value"},bF={class:"perf-section"},_F={class:"perf-metrics"},wF={key:0,class:"perf-metric"},xF={class:"perf-metric-value"},LF={key:1,class:"perf-metric"},SF={class:"perf-metric-value"},CF={key:2,class:"perf-metric"},EF={class:"perf-metric-value"},PF={class:"perf-section"},MF={class:"perf-table"},kF={class:"perf-table-cell"},AF={class:"perf-table-cell"},TF={class:"perf-table-cell"},DF={class:"perf-table-cell"},NF=["onClick"],OF={key:0,class:"perf-empty"},IF=Hs({__name:"PerformancePanel",props:{position:{}},setup(t){const n=t.position||"bottom-left",r=Ct(!1),{isQueryParamEnabled:i,isRecording:s,measures:o,longTasks:a,memorySnapshots:l,framesPerSecond:c,operationHistory:h,startRecording:p,stopRecording:v,clearRecording:g,captureMemorySnapshot:x,getSlowOperations:E,getPerformanceReport:D,getOperationDetails:M}=$p(),A=Xn(()=>{const R=D()??{totalMeasures:0,totalLongTasks:0,slowestOperations:[],averageFps:0,memoryUsage:null};return{totalMeasures:R.totalMeasures,totalLongTasks:R.totalLongTasks,averageDuration:R.slowestOperations.length>0?R.slowestOperations.reduce((V,$)=>V+$.duration,0)/R.slowestOperations.length:0,fps:R.averageFps,slowestOperations:R.slowestOperations,memoryUsage:R.memoryUsage}}),z=Xn(()=>(D()??{slowestOperations:[]}).slowestOperations.slice(0,5).map(V=>({operation:V.name,component:V.component||"unknown",durationMs:V.duration,timestamp:V.startTime}))),Y=Ct(null);Lo(()=>{i.value&&(Y.value=window.setInterval(()=>{x()},1e3))}),Zu(()=>{Y.value!==null&&clearInterval(Y.value)});function ne(R){return R===void 0?"N/A":R<1024?R+" B":R<1024*1024?(R/1024).toFixed(2)+" KB":R<1024*1024*1024?(R/(1024*1024)).toFixed(2)+" MB":(R/(1024*1024*1024)).toFixed(2)+" GB"}function ge(R){return R.toFixed(2)}const pe=()=>{x()};function O(){const R=D(),V="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(R,null,2)),$=document.createElement("a");$.setAttribute("href",V),$.setAttribute("download","performance_report.json"),document.body.appendChild($),$.click(),$.remove()}function j(){g(),pe()}function J(){const R=D();navigator.clipboard.writeText(JSON.stringify(R,null,2)).then(()=>{alert("Données de performance copiées dans le presse-papiers")}).catch(V=>{console.error("Erreur lors de la copie des données",V),alert("Erreur lors de la copie des données")})}async function U(R){const V=M(R.operation,R.timestamp);if(!V){alert("Impossible de trouver les détails de cette opération");return}const $={operation:{...V.operation,startTimeRelative:"0ms",startTimeAbsolute:new Date(V.operation.startTime).toISOString()},context:{...V.context,relatedOperations:V.context.relatedOperations.map(B=>({...B,startTime:`+${B.startTime.toFixed(2)}ms`})),longTasks:V.context.longTasks.map(B=>({...B,startTime:`+${B.startTime.toFixed(2)}ms`})),memorySnapshots:V.context.memorySnapshots.map(B=>({...B,timestamp:`+${B.timestamp.toFixed(2)}ms`,usedJSHeapSize:B.usedJSHeapSize?ne(B.usedJSHeapSize):"N/A",totalJSHeapSize:B.totalJSHeapSize?ne(B.totalJSHeapSize):"N/A"}))},summary:{...V.summary,memoryDelta:ne(V.summary.memoryDelta),maxLongTaskDuration:`${V.summary.maxLongTaskDuration.toFixed(2)}ms`}};try{await navigator.clipboard.writeText(JSON.stringify($,null,2)),alert("Détails de l'opération copiés dans le presse-papiers")}catch(B){console.error("Erreur lors de la copie des détails",B),alert("Erreur lors de la copie des détails")}}return(R,V)=>{var $,B,I,Q,G,_e;return Vn(i)?(Ne(),Be("div",{key:0,class:Ii(["performance-panel",`position-${Vn(n)}`,{expanded:r.value}])},[S("div",{class:"perf-header",onClick:V[0]||(V[0]=ve=>r.value=!r.value)},[S("div",rF,[S("div",{class:Ii(["perf-indicator",{active:Vn(s)}])},null,2),V[1]||(V[1]=S("span",null,"Performance",-1))]),S("div",iF,[S("span",sF,kt(A.value.fps)+" FPS",1),S("span",oF,kt(ge(A.value.averageDuration))+"ms",1)]),S("button",aF,kt(r.value?"▼":"▲"),1)]),r.value?(Ne(),Be("div",lF,[S("div",uF,[V[6]||(V[6]=S("h3",null,"Métriques générales",-1)),S("div",cF,[S("div",dF,[V[2]||(V[2]=S("span",{class:"perf-metric-label"},"Mesures",-1)),S("span",hF,kt(A.value.totalMeasures),1)]),S("div",fF,[V[3]||(V[3]=S("span",{class:"perf-metric-label"},"Tâches longues",-1)),S("span",pF,kt(A.value.totalLongTasks),1)]),S("div",gF,[V[4]||(V[4]=S("span",{class:"perf-metric-label"},"Durée moyenne",-1)),S("span",mF,kt(ge(A.value.averageDuration))+"ms",1)]),S("div",vF,[V[5]||(V[5]=S("span",{class:"perf-metric-label"},"FPS",-1)),S("span",yF,kt(A.value.fps),1)])])]),S("div",bF,[V[10]||(V[10]=S("h3",null,"Mémoire",-1)),S("div",_F,[(($=A.value.memoryUsage)==null?void 0:$.usedJSHeapSize)!==void 0?(Ne(),Be("div",wF,[V[7]||(V[7]=S("span",{class:"perf-metric-label"},"Utilisée",-1)),S("span",xF,kt(ne((B=A.value.memoryUsage)==null?void 0:B.usedJSHeapSize)),1)])):Zt("",!0),((I=A.value.memoryUsage)==null?void 0:I.totalJSHeapSize)!==void 0?(Ne(),Be("div",LF,[V[8]||(V[8]=S("span",{class:"perf-metric-label"},"Totale",-1)),S("span",SF,kt(ne((Q=A.value.memoryUsage)==null?void 0:Q.totalJSHeapSize)),1)])):Zt("",!0),((G=A.value.memoryUsage)==null?void 0:G.jsHeapSizeLimit)!==void 0?(Ne(),Be("div",CF,[V[9]||(V[9]=S("span",{class:"perf-metric-label"},"Limite",-1)),S("span",EF,kt(ne((_e=A.value.memoryUsage)==null?void 0:_e.jsHeapSizeLimit)),1)])):Zt("",!0)])]),S("div",PF,[V[13]||(V[13]=S("h3",null,"Opérations les plus lentes",-1)),S("div",MF,[V[12]||(V[12]=tu('<div class="perf-table-header" data-v-fefe39b0><div class="perf-table-cell" data-v-fefe39b0>Opération</div><div class="perf-table-cell" data-v-fefe39b0>Composant</div><div class="perf-table-cell" data-v-fefe39b0>Durée</div><div class="perf-table-cell" data-v-fefe39b0>Actions</div></div>',1)),(Ne(!0),Be(wn,null,Qn(z.value,ve=>(Ne(),Be("div",{class:"perf-table-row",key:ve.timestamp},[S("div",kF,kt(ve.operation),1),S("div",AF,kt(ve.component),1),S("div",TF,kt(ge(ve.durationMs))+"ms",1),S("div",DF,[S("button",{onClick:qe=>U(ve),class:"perf-action-button",title:"Copier les détails"},V[11]||(V[11]=[S("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,NF)])]))),128)),z.value.length===0?(Ne(),Be("div",OF," Aucune opération enregistrée ")):Zt("",!0)])]),S("div",{class:"perf-actions"},[S("button",{onClick:j,class:"perf-button"}," Réinitialiser "),S("button",{onClick:O,class:"perf-button"}," Télécharger "),S("button",{onClick:J,class:"perf-button"}," Copier ")])])):Zt("",!0)],2)):Zt("",!0)}}}),rd=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},BF=rd(IF,[["__scopeId","data-v-fefe39b0"]]),RF={key:0,class:"pwa-update-notification"},FF=Hs({__name:"PWAUpdateNotification",setup(t,{expose:e}){const n=Ct(!1),r=async()=>{window.location.reload(),n.value=!1},i=()=>{n.value=!1};return e({showUpdateNotification:n,refreshApp:r,closeNotification:i}),(s,o)=>n.value?(Ne(),Be("div",RF,[S("div",{class:"pwa-update-content"},[o[0]||(o[0]=S("p",null,"Une nouvelle version est disponible",-1)),S("div",{class:"pwa-update-actions"},[S("button",{onClick:r,class:"pwa-update-button"},"Mettre à jour"),S("button",{onClick:i,class:"pwa-close-button"},"Plus tard")])])])):Zt("",!0)}}),jF=rd(FF,[["__scopeId","data-v-aa687693"]]),zF="/static/frontend/img/icons/android-chrome-192x192.png",$F={class:"prompt-content"},VF={class:"prompt-body"},UF={key:0,class:"install-instructions ios"},HF={key:1,class:"install-instructions android"},WF={key:2,class:"install-instructions desktop"},GF={key:3,class:"install-instructions desktop"},qF=Hs({__name:"PWAInstallPrompt",setup(t){const e=Ct(!1),n=Ct(!1),r=Ct(null);Ct(null);const i=Ct(!1),s=Ct(!1),o=Ct(!1),a=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,l=()=>{const g=localStorage.getItem("pwaPromptLastClosed");if(!g)return!1;const x=3*24*60*60*1e3;return Date.now()-parseInt(g)<x},c=()=>{i.value=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,s.value=/Android/.test(navigator.userAgent),o.value=!i.value&&!s.value,window.addEventListener("beforeinstallprompt",g=>{g.preventDefault(),r.value=g,e.value=!0,n.value=!0}),window.addEventListener("appinstalled",g=>{console.log("Application installée avec succès",g),e.value=!1}),!a()&&(l()||setTimeout(()=>{e.value=!0,n.value=!0},3e3))},h=()=>{window.removeEventListener("beforeinstallprompt",()=>{}),window.removeEventListener("appinstalled",()=>{})};Lo(()=>{c()}),kh(()=>{h()});const p=async()=>{if(!r.value){console.log("Installation non disponible");return}try{r.value.prompt();const g=await r.value.userChoice;r.value=null,g.outcome==="accepted"?(console.log("Installation acceptée"),e.value=!1):console.log("Installation refusée")}catch(g){console.error("Erreur lors de l'installation:",g)}},v=()=>{e.value=!1,localStorage.setItem("pwaPromptLastClosed",Date.now().toString())};return(g,x)=>e.value?(Ne(),Be("div",{key:0,class:Ii(["pwa-install-prompt",{fullscreen:n.value}])},[S("div",$F,[S("div",{class:"prompt-header"},[x[1]||(x[1]=S("div",{class:"app-info"},[S("img",{src:zF,alt:"TagMap Logo",class:"app-logo"}),S("div",{class:"app-details"},[S("h2",null,"Installer TagMap"),S("p",null,"Solution innovante de cartographie et gestion de projets")])],-1)),S("button",{onClick:v,class:"close-button","aria-label":"Fermer"},x[0]||(x[0]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[S("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),S("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),S("div",VF,[i.value?(Ne(),Be("div",UF,x[2]||(x[2]=[tu('<h3 data-v-48772823>Pour installer l&#39;application sur votre iPhone :</h3><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>1</div><div class="step-content" data-v-48772823><p data-v-48772823>Appuyez sur <strong data-v-48772823>Partager</strong> <span class="ios-share-icon" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" data-v-48772823></path><polyline points="16 6 12 2 8 6" data-v-48772823></polyline><line x1="12" y1="2" x2="12" y2="15" data-v-48772823></line></svg></span></p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>2</div><div class="step-content" data-v-48772823><p data-v-48772823>Faites défiler et appuyez sur <strong data-v-48772823>Sur l&#39;écran d&#39;accueil</strong></p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>3</div><div class="step-content" data-v-48772823><p data-v-48772823>Appuyez sur <strong data-v-48772823>Ajouter</strong> en haut à droite</p></div></div>',4)]))):s.value?(Ne(),Be("div",HF,[x[3]||(x[3]=S("h3",null,"Pour installer l'application sur votre appareil :",-1)),x[4]||(x[4]=S("div",{class:"instruction-step"},[S("div",{class:"step-number"},"1"),S("div",{class:"step-content"},[S("p",null,"Appuyez sur le bouton ci-dessous")])],-1)),S("button",{onClick:p,class:"install-button"}," Installer l'application ")])):o.value?(Ne(),Be("div",WF,[x[5]||(x[5]=S("h3",null,"Pour installer l'application sur votre ordinateur :",-1)),x[6]||(x[6]=S("div",{class:"instruction-step"},[S("div",{class:"step-number"},"1"),S("div",{class:"step-content"},[S("p",null,"Cliquez sur le bouton ci-dessous pour installer l'application")])],-1)),S("button",{onClick:p,class:"install-button"}," Installer l'application ")])):(Ne(),Be("div",GF,x[7]||(x[7]=[tu('<h3 data-v-48772823>Pour installer l&#39;application sur votre ordinateur :</h3><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>1</div><div class="step-content" data-v-48772823><p data-v-48772823>Cliquez sur l&#39;icône d&#39;installation dans la barre d&#39;adresse</p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>2</div><div class="step-content" data-v-48772823><p data-v-48772823>Cliquez sur &quot;Installer&quot;</p></div></div>',3)])))]),S("div",{class:"prompt-footer"},[x[8]||(x[8]=tu('<div class="benefits" data-v-48772823><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" data-v-48772823></path></svg><span data-v-48772823>Sécurisé</span></div><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><circle cx="12" cy="12" r="10" data-v-48772823></circle><polyline points="12 6 12 12 16 14" data-v-48772823></polyline></svg><span data-v-48772823>Rapide</span></div><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" data-v-48772823></path></svg><span data-v-48772823>Hors ligne</span></div></div>',1)),S("button",{onClick:v,class:"remind-later"},"Me le rappeler plus tard")])])],2)):Zt("",!0)}}),YF=rd(qF,[["__scopeId","data-v-48772823"]]),KF={class:"h-screen flex flex-col"},ZF={key:0,class:"bg-white shadow-sm z-[2500] flex-shrink-0"},XF={class:"mx-auto px-4 sm:px-6 lg:px-8"},JF={class:"flex h-16 items-center justify-between"},QF={class:"flex items-center"},e9={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t9={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},n9={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},r9={class:"hidden md:flex md:ml-6 space-x-8"},i9={key:0,class:"flex-1 mx-2"},s9={class:"hidden md:block"},o9={class:"md:hidden"},a9={key:1,class:"flex-1"},l9={class:"flex items-center space-x-2 md:space-x-4"},u9={class:"relative"},c9={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},d9={class:"flex items-center justify-between w-full"},h9={class:"flex items-center space-x-3"},f9={class:"max-h-72 overflow-y-auto"},p9={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},g9={class:"flex items-start"},m9={class:"flex-shrink-0 mr-3"},v9={key:0,class:"h-6 w-6 md:h-5 md:w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},y9={key:1,class:"h-6 w-6 md:h-5 md:w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},b9={key:2,class:"h-6 w-6 md:h-5 md:w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},_9={key:3,class:"h-6 w-6 md:h-5 md:w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},w9={class:"flex-1"},x9={class:"text-sm md:text-sm text-gray-800"},L9=["onClick"],S9={class:"relative"},C9={class:"hidden md:flex flex-col items-end"},E9={class:"text-sm font-medium text-gray-700"},P9={key:0,class:"text-xs text-gray-500"},M9=["src","alt"],k9={class:"md:hidden px-4 py-2 border-b border-gray-100 flex justify-between items-center"},A9={class:"text-sm font-semibold text-gray-700"},T9={class:"text-xs text-gray-500"},D9={key:0,class:"md:hidden fixed inset-0 bg-white shadow-lg z-[3000] border-t border-gray-200",style:{top:"var(--header-height)"}},N9={class:"space-y-1 px-2 pb-3 pt-2"},O9=Hs({__name:"App",setup(t){const e=Nm(),n=xo(),r=su(),i=Ct(!1),s=Ct(!1),o=Ct(!1),a=Ct(!1),l=Ct(null),c=Ct(!1),h=Ct(!1),p=Ct(null),v=Ct("13px"),g=Ct("65px"),x=Ct(null),E=Ct(null),D=Ct(!1);function M(){h.value=window.innerWidth<768}Lo(()=>{M(),window.addEventListener("resize",M),window.addEventListener("resize",A),window.addEventListener("pwa-update-available",()=>{D.value=!0})}),kh(()=>{window.removeEventListener("resize",M),window.removeEventListener("resize",A),window.removeEventListener("pwa-update-available",()=>{})});function A(){if(!p.value)return;const B=p.value.getBoundingClientRect();v.value=`${B.top+window.scrollY+5}px`;const I=B.left+B.width/2;g.value=`${window.innerWidth-I-22}px`}const z=Xn(()=>{const B=n.user;if(!B)return"";const I=`${B.first_name} ${B.last_name.toUpperCase()}`;return B.company_name?`${I} (${B.company_name})`:I}),Y=Xn(()=>{var I;switch((I=n.user)==null?void 0:I.user_type){case"admin":return"Accès administrateur";case"entreprise":return"Accès entreprise";case"salarie":return"Accès salarie";case"visiteur":return"Accès visiteur";default:return""}}),ne=Xn(()=>{var B;return((B=n.user)==null?void 0:B.user_type)==="admin"}),ge=Xn(()=>n.isAuthenticated),pe=[{name:"Carte",to:"/"},{name:"Météo",to:"/meteo"},{name:"Notes",to:"/notes"}],O=Xn(()=>{var I;if(!ge.value)return[];const B=[...pe];return(ne.value||((I=n.user)==null?void 0:I.user_type)==="entreprise")&&B.push({name:"Utilisateurs",to:"/users"}),B}),j=Xn(()=>ge.value?[{name:"Mon profil",to:"/profile"}]:[]);async function J(){try{await n.logout(),e.push("/login")}catch(B){console.error("Erreur lors de la déconnexion:",B)}}function U(B){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:B.lat,lng:B.lng,zoom:16}}))}Lo(async()=>{console.log("App mounted, checking auth...");try{if(localStorage.getItem("token")){console.log("Token found, checking auth..."),await n.checkAuth(),await n.fetchUserProfile();const I=localStorage.getItem("lastPlanId");I&&window.dispatchEvent(new CustomEvent("load-last-plan",{detail:{planId:I}}))}else console.log("No token found")}catch(B){console.error("Auth check error:",B),e.push("/login")}});const R=Xn(()=>{const B="TagMap";if(!ge.value)return`${B} - Connexion`;const I=e.currentRoute.value,G={home:"Carte",meteo:"Météo",notes:"Notes",users:"Utilisateurs",profile:"Mon profil",changePassword:"Changement de mot de passe",map:"Carte"}[I.name]||"";return G?`${B} - ${G}`:B});Ti(R,B=>{document.title=B},{immediate:!0});const V=Xn(()=>r.notifications.length);function $(){r.clearAll(),o.value=!1}return dm(()=>{if(r.lastAddedId!==null){const B=r.notifications.find(I=>I.id===r.lastAddedId);B&&ma(()=>{A(),a.value=!0,l.value={id:B.id,message:B.message,type:B.type},requestAnimationFrame(()=>{setTimeout(()=>{c.value=!0,setTimeout(()=>{c.value=!1,setTimeout(()=>{var I;((I=l.value)==null?void 0:I.id)===B.id&&(l.value=null,a.value=!1)},300)},4e3)},50)})})}}),(B,I)=>{var Q;return Ne(),Be("div",KF,[ge.value?(Ne(),Be("header",ZF,[S("nav",XF,[S("div",JF,[S("div",QF,[S("button",{onClick:I[0]||(I[0]=G=>s.value=!s.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden"},[I[7]||(I[7]=S("span",{class:"sr-only"},"Ouvrir le menu",-1)),(Ne(),Be("svg",e9,[s.value?(Ne(),Be("path",n9)):(Ne(),Be("path",t9))]))]),yi(Vn(bg),{to:"/",class:"text-xl font-semibold text-primary-600 truncate ml-2 md:ml-0"},{default:Gu(()=>I[8]||(I[8]=[S("span",{class:"md:inline hidden"},"TagMap",-1),S("span",{class:"md:hidden inline"},"TM",-1)])),_:1}),S("div",r9,[(Ne(!0),Be(wn,null,Qn(O.value,G=>(Ne(),ua(Vn(bg),{key:G.name,to:G.to,class:Ii(["text-sm font-medium transition-colors duration-200",[B.$route.path===G.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Gu(()=>[ri(kt(G.name),1)]),_:2},1032,["to","class"]))),128))])]),B.$route.path==="/"?(Ne(),Be("div",i9,[S("div",s9,[yi(K4,{onSelectLocation:U})]),S("div",o9,[yi(K4,{onSelectLocation:U,class:"max-w-full"})])])):(Ne(),Be("div",a9)),S("div",l9,[S("div",u9,[S("button",{ref_key:"bellButtonRef",ref:p,onClick:I[1]||(I[1]=G=>o.value=!o.value),class:Ii(["relative flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"animate-bell":a.value}])},I[9]||(I[9]=[S("span",{class:"sr-only"},"Voir les notifications",-1),S("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)]),2),o.value?(Ne(),Be("div",{key:0,class:"absolute right-0 mt-2 md:w-80 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:ru(h.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[S("div",c9,[S("div",d9,[I[11]||(I[11]=S("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),S("div",h9,[V.value>0?(Ne(),Be("button",{key:0,onClick:$,class:"text-xs text-primary-600 hover:text-primary-800"}," Tout effacer ")):Zt("",!0),S("button",{onClick:I[2]||(I[2]=G=>o.value=!1),class:"md:hidden p-1 rounded-full hover:bg-gray-100"},I[10]||(I[10]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),S("div",f9,[V.value===0?(Ne(),Be("div",p9," Aucune notification ")):Zt("",!0),(Ne(!0),Be(wn,null,Qn(Vn(r).notifications,G=>(Ne(),Be("div",{key:G.id,class:"px-4 py-3 md:py-3 py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50"},[S("div",g9,[S("div",m9,[G.type==="success"?(Ne(),Be("svg",v9,I[12]||(I[12]=[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):G.type==="error"?(Ne(),Be("svg",y9,I[13]||(I[13]=[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):G.type==="warning"?(Ne(),Be("svg",b9,I[14]||(I[14]=[S("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(Ne(),Be("svg",_9,I[15]||(I[15]=[S("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))]),S("div",w9,[S("p",x9,kt(G.message),1),S("button",{onClick:_e=>Vn(r).removeNotification(G.id),class:"text-xs md:text-xs text-primary-600 hover:text-primary-800 mt-2 md:mt-1 py-1 md:py-0"}," Fermer ",8,L9)])])]))),128))])],4)):Zt("",!0)]),S("div",S9,[S("button",{onClick:I[3]||(I[3]=G=>i.value=!i.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[S("div",C9,[S("span",E9,kt(z.value),1),Y.value?(Ne(),Be("span",P9,kt(Y.value),1)):Zt("",!0)]),S("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:((Q=Vn(n).user)==null?void 0:Q.logo)||"https://ui-avatars.com/api/?name="+encodeURIComponent(z.value),alt:z.value},null,8,M9)]),i.value?(Ne(),Be("div",{key:0,class:"absolute right-0 mt-2 md:w-48 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:ru(h.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[S("div",k9,[S("div",null,[S("div",A9,kt(z.value),1),S("div",T9,kt(Y.value),1)]),S("button",{onClick:I[4]||(I[4]=G=>i.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},I[16]||(I[16]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),(Ne(!0),Be(wn,null,Qn(j.value,G=>(Ne(),ua(Vn(bg),{key:G.name,to:G.to,class:"block px-4 md:py-2 py-3 text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",onClick:I[5]||(I[5]=_e=>i.value=!1)},{default:Gu(()=>[ri(kt(G.name),1)]),_:2},1032,["to"]))),128)),S("button",{onClick:J,class:"block w-full px-4 md:py-2 py-3 text-left text-sm text-red-600 hover:bg-gray-50 font-medium"}," Déconnexion ")],4)):Zt("",!0)])])]),s.value?(Ne(),Be("div",D9,[S("div",N9,[(Ne(!0),Be(wn,null,Qn(O.value,G=>(Ne(),ua(Vn(bg),{key:G.name,to:G.to,class:Ii(["block px-3 py-2 rounded-md text-base font-medium",[B.$route.path===G.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:I[6]||(I[6]=_e=>s.value=!1)},{default:Gu(()=>[ri(kt(G.name),1)]),_:2},1032,["to","class"]))),128))])])):Zt("",!0)])])):Zt("",!0),S("main",{class:Ii([B.$route.path==="/"&&!h.value?"overflow-hidden":"overflow-auto","flex-1 flex flex-col","md:h-[calc(100vh-64px)]"])},[yi(Vn(yE))],2),yi(BF,{position:"bottom-left"}),yi(jF,{ref_key:"pwaUpdateNotification",ref:x},null,512),yi(YF,{ref_key:"pwaInstallPrompt",ref:E},null,512)])}}}),I9="modulepreload",B9=function(t){return"/static/frontend/"+t},Z4={},kd=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=B9(l),l in Z4)return;Z4[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":I9,c||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),c)return new Promise((v,g)=>{p.addEventListener("load",v),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},R9={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},F9={class:"max-w-md w-full space-y-8"},j9={class:"space-y-4"},z9={class:"mt-1"},$9={class:"mt-1"},V9={class:"mt-1"},U9={key:0,class:"rounded-md bg-red-50 p-4"},H9={class:"flex"},W9={class:"ml-3"},G9={class:"text-sm font-medium text-red-800"},q9={key:1,class:"rounded-md bg-yellow-50 p-4"},Y9={class:"flex"},K9={class:"ml-3"},Z9={class:"mt-2 text-sm text-yellow-700"},X9={class:"list-disc pl-5 space-y-1"},J9=["disabled"],Q9={class:"absolute left-0 inset-y-0 flex items-center pl-3"},ej={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},tj={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},nj=Hs({__name:"ChangePasswordForm",setup(t){const e=Nm(),n=xo(),r=ou({oldPassword:"",newPassword:"",confirmPassword:""}),i=Ct(!1),s=Ct("");Lo(()=>{var c,h;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:n.isAuthenticated,userId:(c=n.user)==null?void 0:c.id,mustChangePassword:(h=n.user)==null?void 0:h.must_change_password})});const o=Xn(()=>{const c=[];return r.newPassword&&r.newPassword.length<8&&c.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&c.push("Les mots de passe ne correspondent pas"),c}),a=Xn(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function l(){var c,h,p,v,g,x,E,D;if(!a.value){s.value="Veuillez corriger les erreurs avant de continuer";return}if(!((c=n.user)!=null&&c.id)){s.value="Erreur : utilisateur non identifié";return}i.value=!0,s.value="";try{console.log("Submitting password change..."),await n.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),e.push("/")}catch(M){console.error("Password change failed:",M),(p=(h=M.response)==null?void 0:h.data)!=null&&p.detail?s.value=M.response.data.detail:(g=(v=M.response)==null?void 0:v.data)!=null&&g.old_password?s.value=M.response.data.old_password[0]:(E=(x=M.response)==null?void 0:x.data)!=null&&E.password?s.value=M.response.data.password[0]:((D=M.response)==null?void 0:D.status)===401?(s.value="Session expirée, veuillez vous reconnecter",await n.logout(),e.push("/login")):s.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(c,h)=>(Ne(),Be("div",R9,[S("div",F9,[h[12]||(h[12]=S("div",null,[S("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),S("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),S("form",{class:"mt-8 space-y-6",onSubmit:nu(l,["prevent"])},[S("div",j9,[S("div",null,[h[3]||(h[3]=S("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),S("div",z9,[kn(S("input",{id:"old-password","onUpdate:modelValue":h[0]||(h[0]=p=>r.oldPassword=p),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[zr,r.oldPassword]])])]),S("div",null,[h[4]||(h[4]=S("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),S("div",$9,[kn(S("input",{id:"new-password","onUpdate:modelValue":h[1]||(h[1]=p=>r.newPassword=p),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[zr,r.newPassword]])]),h[5]||(h[5]=S("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),S("div",null,[h[6]||(h[6]=S("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),S("div",V9,[kn(S("input",{id:"confirm-password","onUpdate:modelValue":h[2]||(h[2]=p=>r.confirmPassword=p),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[zr,r.confirmPassword]])])])]),s.value?(Ne(),Be("div",U9,[S("div",H9,[h[7]||(h[7]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",W9,[S("h3",G9,kt(s.value),1)])])])):Zt("",!0),o.value.length>0?(Ne(),Be("div",q9,[S("div",Y9,[h[9]||(h[9]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),S("div",K9,[h[8]||(h[8]=S("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),S("div",Z9,[S("ul",X9,[(Ne(!0),Be(wn,null,Qn(o.value,(p,v)=>(Ne(),Be("li",{key:v},kt(p),1))),128))])])])])])):Zt("",!0),S("div",null,[S("button",{type:"submit",disabled:i.value||!a.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[S("span",Q9,[i.value?(Ne(),Be("svg",tj,h[11]||(h[11]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Ne(),Be("svg",ej,h[10]||(h[10]=[S("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),ri(" "+kt(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,J9)])],32)])]))}}),rj="/static/frontend/assets/background.svg",ij={class:"min-h-screen overflow-auto relative py-12 sm:px-6 lg:px-8"},sj={class:"container mx-auto relative z-10"},oj={class:"sm:mx-auto sm:w-full sm:max-w-md"},aj={class:"bg-white/95 backdrop-blur-sm py-8 px-6 shadow-xl rounded-xl sm:px-10 border border-white/20"},lj={key:0,class:"rounded-md bg-red-50 p-4"},uj={class:"flex"},cj={class:"ml-3"},dj={class:"text-sm font-medium text-red-800"},hj={class:"mt-1"},fj={class:"mt-1 relative"},pj=["type"],gj={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},mj={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},vj={class:"flex items-center justify-between"},yj={class:"flex items-center"},bj={class:"text-sm"},_j=["disabled"],wj={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},xj={class:"mt-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Lj={class:"mt-12"},Sj={class:"flex flex-wrap justify-center gap-2 mb-8"},Cj=["onClick"],Ej={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Pj={class:"flex items-center mb-4"},Mj={class:"text-2xl mr-2"},kj={class:"text-xl font-semibold text-gray-900"},Aj={class:"text-gray-600 text-sm"},Tj={key:0,class:"flex justify-center mt-8 gap-2"},Dj=["onClick"],K1=6,Nj=Hs({__name:"LoginView",setup(t){const e=Nm(),n=xo(),r=Ct(!1),i=Ct(null),s=Ct(!1),o=Ct("Tous"),a=Ct(1),l=ou({username:"",password:"",rememberMe:!1}),c=[{type:"Liniculteur",sector:"Agriculture",icon:"🌾",text:"En tant qu'entreprise, j'ai mis en place un sous-compte « agriculteur » permettant la géolocalisation des parcelles. Cela offre à nos salariés et prestataires une visibilité complète sur l'ensemble des parcelles et facilite leur accès. De plus, ils peuvent y ajouter des notes et des photos si nécessaire. Grâce aux trackers, nous renforçons également la sécurité de nos machines contre le vol."},{type:"Agro industriel",sector:"Industrie",icon:"🏭",text:"La gestion des comptes et sous-comptes est un atout majeur pour limiter, filtrer et contrôler l'accès de nos salariés aux différentes tâches."},{type:"Agence de voyage",sector:"Tourisme",icon:"✈️",text:"L'outil nous permet de créer gratuitement et sans limite des sous-comptes clients, d'établir des itinéraires personnalisés avec des points d'intérêt."},{type:"Industriel agroalimentaire",sector:"Industrie",icon:"🌱",text:"Nous disposons d'un compte entreprise avec des sous-comptes dédiés à chaque culture. Nos techniciens et agriculteurs partenaires peuvent ainsi ajouter des annotations et photo sur les parcelles. Grâce aux stations météo connectées, nous optimisons la gestion des tours d'irrigation par secteur géographique en fonction des précipitations."},{type:"Conseil municipal",sector:"Collectivité",icon:"🏛️",text:"Cette solution nous permet de gagner en efficacité dans la gestion des tâches à réaliser, en les géolocalisant et en offrant à nos employés communaux la possibilité d'ajouter des commentaires et des photos sur chaque tâche géoréférencée."},{type:"Location de matériel",sector:"Services",icon:"🚜",text:"Cette solution nous permet de géolocaliser notre flotte grâce à des trackers sans abonnement, avec uniquement un abonnement à la plateforme."},{type:"Agriculteur",sector:"Agriculture",icon:"👨‍🌾",text:"J'ai équipé tous mes canons d'enrouleurs de trackers et de caméras pour dissuader le vol de batteries."},{type:"Semencier",sector:"Agriculture",icon:"🌱",text:"Nous assurons la géolocalisation de l'ensemble de nos parcelles en France."},{type:"Concessionnaire irrigation",sector:"Services",icon:"💧",text:"Nous avons géolocalisé tous les forages de nos clients et ajouté en commentaire la procédure d'entrée, facilitant ainsi le travail de nos techniciens et agriculteurs lors des interventions."},{type:"Entreprise paysagiste",sector:"Services",icon:"🌳",text:"Nous géolocalisons tous nos chantiers et ajoutons une photo du chantier terminé en commentaire, servant de preuve en cas de litige."}],h=Xn(()=>["Tous",...new Set(c.map(E=>E.sector))]),p=Xn(()=>{let x=o.value==="Tous"?c:c.filter(M=>M.sector===o.value);const E=(a.value-1)*K1,D=E+K1;return x.slice(E,D)}),v=Xn(()=>{const x=o.value==="Tous"?c:c.filter(E=>E.sector===o.value);return Math.ceil(x.length/K1)});Lo(async()=>{var x;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE);try{if((x=window.INITIAL_STATE)!=null&&x.isAuthenticated){console.log("User is authenticated, redirecting to home"),e.push("/");return}await n.restoreSession()&&(console.log("Session restored, redirecting to home"),e.push("/"))}catch(E){console.error("Error during initialization:",E),i.value=null}});async function g(){var x,E,D,M,A,z,Y,ne,ge;r.value=!0,i.value=null;try{if(!l.username||!l.password){i.value="Veuillez remplir tous les champs";return}await n.login(l.username,l.password),(x=n.user)!=null&&x.must_change_password?e.push("/change-password"):e.push("/")}catch(pe){console.error("Login error:",pe),((E=pe==null?void 0:pe.response)==null?void 0:E.status)===500?i.value="Le service est temporairement indisponible. Veuillez réessayer dans quelques instants.":((D=pe==null?void 0:pe.response)==null?void 0:D.status)===401||((M=pe==null?void 0:pe.response)==null?void 0:M.status)===403?i.value="Identifiants incorrects. Veuillez vérifier votre nom d'utilisateur et mot de passe.":(z=(A=pe==null?void 0:pe.response)==null?void 0:A.data)!=null&&z.detail?i.value=pe.response.data.detail:(ge=(ne=(Y=pe==null?void 0:pe.response)==null?void 0:Y.data)==null?void 0:ne.non_field_errors)!=null&&ge[0]?i.value=pe.response.data.non_field_errors[0]:(pe==null?void 0:pe.message)==="Network Error"?i.value="Impossible de se connecter au serveur. Veuillez vérifier votre connexion internet.":i.value="Une erreur est survenue lors de la connexion. Veuillez réessayer."}finally{r.value=!1}}return(x,E)=>{const D=bS("router-link");return Ne(),Be("div",ij,[S("div",{class:"fixed inset-0 z-0",style:ru({backgroundImage:`url(${Vn(rj)})`,backgroundSize:"400px",backgroundRepeat:"repeat",filter:"blur(1px) opacity(0.15)"})},null,4),E[16]||(E[16]=S("div",{class:"fixed inset-0 z-0 bg-gradient-to-br from-white/40 via-transparent to-primary-900/10"},null,-1)),S("div",sj,[S("div",oj,[S("div",aj,[E[12]||(E[12]=S("div",{class:"text-center mb-8"},[S("h2",{class:"text-3xl font-bold text-gray-900 mb-2"}," TagMap "),S("p",{class:"text-sm text-gray-600"}," Solution innovante de cartographie et gestion de projets ")],-1)),S("form",{class:"space-y-6",onSubmit:nu(g,["prevent"])},[i.value?(Ne(),Be("div",lj,[S("div",uj,[E[4]||(E[4]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",cj,[S("h3",dj,kt(i.value),1)])])])):Zt("",!0),S("div",null,[E[5]||(E[5]=S("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),S("div",hj,[kn(S("input",{id:"username","onUpdate:modelValue":E[0]||(E[0]=M=>l.username=M),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[zr,l.username]])])]),S("div",null,[E[8]||(E[8]=S("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),S("div",fj,[kn(S("input",{id:"password","onUpdate:modelValue":E[1]||(E[1]=M=>l.password=M),type:s.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,pj),[[k_,l.password]]),S("button",{type:"button",onClick:E[2]||(E[2]=M=>s.value=!s.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[s.value?(Ne(),Be("svg",gj,E[6]||(E[6]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(Ne(),Be("svg",mj,E[7]||(E[7]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),S("div",vj,[S("div",yj,[kn(S("input",{id:"remember-me","onUpdate:modelValue":E[3]||(E[3]=M=>l.rememberMe=M),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Tl,l.rememberMe]]),E[9]||(E[9]=S("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),S("div",bj,[yi(D,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Gu(()=>E[10]||(E[10]=[ri(" Mot de passe oublié ? ")])),_:1})])]),S("div",null,[S("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(Ne(),Be("svg",wj,E[11]||(E[11]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Zt("",!0),ri(" "+kt(r.value?"Connexion en cours...":"Se connecter"),1)],8,_j)])],32)])]),S("div",xj,[E[14]||(E[14]=tu('<div class="mb-12 bg-white/90 backdrop-blur-sm p-8 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-6" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>💡</span><h3 class="text-xl font-bold text-gray-900" data-v-9ff7ee32>Équipements Connectés sans Abonnement</h3></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-v-9ff7ee32><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32>📍</div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Tracker GPS solaire</h4><p class="text-gray-600" data-v-9ff7ee32>Géolocalisez et sécurisez votre matériel</p></div></div><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32>🌤️</div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Station météo</h4><p class="text-gray-600" data-v-9ff7ee32>Optimisez vos décisions avec des données en temps réel</p></div></div></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8" data-v-9ff7ee32><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>👀📌</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Carte Interactive</h3></div><p class="text-gray-600" data-v-9ff7ee32>Imaginez... Une carte interactive où tout est sous contrôle ! Tout est centralisé, organisé et accessible en un clin d&#39;œil !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>👥💻🔄</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Collaboration en Temps Réel</h3></div><p class="text-gray-600" data-v-9ff7ee32>Travail d&#39;équipe simplifié : Collaborez en temps réel sur une interface ultra-intuitive. Vos équipes restent synchronisées et efficaces !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>🚜📸</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Cerveau Cartographique</h3></div><p class="text-gray-600" data-v-9ff7ee32>Un cerveau cartographique : Dessinez, annotez, planifiez, suivez !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>🔐🔑</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Accès Sécurisé</h3></div><p class="text-gray-600" data-v-9ff7ee32>Accès sécurisé et intelligent : Gérez les droits d&#39;accès de vos salariés et prestataires en un clic.</p></div></div>',2)),S("div",Lj,[E[13]||(E[13]=S("h3",{class:"text-2xl font-bold text-center text-gray-900 mb-8"},"Ils utilisent TagMap",-1)),S("div",Sj,[(Ne(!0),Be(wn,null,Qn(h.value,M=>(Ne(),Be("button",{key:M,onClick:A=>o.value=M,class:Ii(["px-4 py-2 rounded-full text-sm font-medium transition-all duration-200",o.value===M?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},kt(M),11,Cj))),128))]),S("div",Ej,[(Ne(!0),Be(wn,null,Qn(p.value,M=>(Ne(),Be("div",{key:M.type,class:"bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20 transition-all duration-300 hover:shadow-xl"},[S("div",Pj,[S("span",Mj,kt(M.icon),1),S("span",kj,kt(M.type),1)]),S("p",Aj,kt(M.text),1)]))),128))]),v.value>1?(Ne(),Be("div",Tj,[(Ne(!0),Be(wn,null,Qn(v.value,M=>(Ne(),Be("button",{key:M,onClick:A=>a.value=M,class:Ii(["w-8 h-8 rounded-full text-sm font-medium transition-all duration-200",a.value===M?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},kt(M),11,Dj))),128))])):Zt("",!0)])]),E[15]||(E[15]=S("div",{class:"h-16"},null,-1))])])}}}),Oj=rd(Nj,[["__scopeId","data-v-9ff7ee32"]]),X4="/static/frontend/assets/logo.svg";var pb={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Aa,function(n){var r="1.9.4";function i(u){var y,P,W,ue;for(P=1,W=arguments.length;P<W;P++){ue=arguments[P];for(y in ue)u[y]=ue[y]}return u}var s=Object.create||function(){function u(){}return function(y){return u.prototype=y,new u}}();function o(u,y){var P=Array.prototype.slice;if(u.bind)return u.bind.apply(u,P.call(arguments,1));var W=P.call(arguments,2);return function(){return u.apply(y,W.length?W.concat(P.call(arguments)):arguments)}}var a=0;function l(u){return"_leaflet_id"in u||(u._leaflet_id=++a),u._leaflet_id}function c(u,y,P){var W,ue,Pe,ut;return ut=function(){W=!1,ue&&(Pe.apply(P,ue),ue=!1)},Pe=function(){W?ue=arguments:(u.apply(P,arguments),setTimeout(ut,y),W=!0)},Pe}function h(u,y,P){var W=y[1],ue=y[0],Pe=W-ue;return u===W&&P?u:((u-ue)%Pe+Pe)%Pe+ue}function p(){return!1}function v(u,y){if(y===!1)return u;var P=Math.pow(10,y===void 0?6:y);return Math.round(u*P)/P}function g(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function x(u){return g(u).split(/\s+/)}function E(u,y){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?s(u.options):{});for(var P in y)u.options[P]=y[P];return u.options}function D(u,y,P){var W=[];for(var ue in u)W.push(encodeURIComponent(P?ue.toUpperCase():ue)+"="+encodeURIComponent(u[ue]));return(!y||y.indexOf("?")===-1?"?":"&")+W.join("&")}var M=/\{ *([\w_ -]+) *\}/g;function A(u,y){return u.replace(M,function(P,W){var ue=y[W];if(ue===void 0)throw new Error("No value provided for variable "+P);return typeof ue=="function"&&(ue=ue(y)),ue})}var z=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function Y(u,y){for(var P=0;P<u.length;P++)if(u[P]===y)return P;return-1}var ne="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ge(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var pe=0;function O(u){var y=+new Date,P=Math.max(0,16-(y-pe));return pe=y+P,window.setTimeout(u,P)}var j=window.requestAnimationFrame||ge("RequestAnimationFrame")||O,J=window.cancelAnimationFrame||ge("CancelAnimationFrame")||ge("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function U(u,y,P){if(P&&j===O)u.call(y);else return j.call(window,o(u,y))}function R(u){u&&J.call(window,u)}var V={__proto__:null,extend:i,create:s,bind:o,get lastId(){return a},stamp:l,throttle:c,wrapNum:h,falseFn:p,formatNum:v,trim:g,splitWords:x,setOptions:E,getParamString:D,template:A,isArray:z,indexOf:Y,emptyImageUrl:ne,requestFn:j,cancelFn:J,requestAnimFrame:U,cancelAnimFrame:R};function $(){}$.extend=function(u){var y=function(){E(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},P=y.__super__=this.prototype,W=s(P);W.constructor=y,y.prototype=W;for(var ue in this)Object.prototype.hasOwnProperty.call(this,ue)&&ue!=="prototype"&&ue!=="__super__"&&(y[ue]=this[ue]);return u.statics&&i(y,u.statics),u.includes&&(B(u.includes),i.apply(null,[W].concat(u.includes))),i(W,u),delete W.statics,delete W.includes,W.options&&(W.options=P.options?s(P.options):{},i(W.options,u.options)),W._initHooks=[],W.callInitHooks=function(){if(!this._initHooksCalled){P.callInitHooks&&P.callInitHooks.call(this),this._initHooksCalled=!0;for(var Pe=0,ut=W._initHooks.length;Pe<ut;Pe++)W._initHooks[Pe].call(this)}},y},$.include=function(u){var y=this.prototype.options;return i(this.prototype,u),u.options&&(this.prototype.options=y,this.mergeOptions(u.options)),this},$.mergeOptions=function(u){return i(this.prototype.options,u),this},$.addInitHook=function(u){var y=Array.prototype.slice.call(arguments,1),P=typeof u=="function"?u:function(){this[u].apply(this,y)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(P),this};function B(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=z(u)?u:[u];for(var y=0;y<u.length;y++)u[y]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var I={on:function(u,y,P){if(typeof u=="object")for(var W in u)this._on(W,u[W],y);else{u=x(u);for(var ue=0,Pe=u.length;ue<Pe;ue++)this._on(u[ue],y,P)}return this},off:function(u,y,P){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var W in u)this._off(W,u[W],y);else{u=x(u);for(var ue=arguments.length===1,Pe=0,ut=u.length;Pe<ut;Pe++)ue?this._off(u[Pe]):this._off(u[Pe],y,P)}return this},_on:function(u,y,P,W){if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}if(this._listens(u,y,P)===!1){P===this&&(P=void 0);var ue={fn:y,ctx:P};W&&(ue.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(ue)}},_off:function(u,y,P){var W,ue,Pe;if(this._events&&(W=this._events[u],!!W)){if(arguments.length===1){if(this._firingCount)for(ue=0,Pe=W.length;ue<Pe;ue++)W[ue].fn=p;delete this._events[u];return}if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}var ut=this._listens(u,y,P);if(ut!==!1){var Nt=W[ut];this._firingCount&&(Nt.fn=p,this._events[u]=W=W.slice()),W.splice(ut,1)}}},fire:function(u,y,P){if(!this.listens(u,P))return this;var W=i({},y,{type:u,target:this,sourceTarget:y&&y.sourceTarget||this});if(this._events){var ue=this._events[u];if(ue){this._firingCount=this._firingCount+1||1;for(var Pe=0,ut=ue.length;Pe<ut;Pe++){var Nt=ue[Pe],Wt=Nt.fn;Nt.once&&this.off(u,Wt,Nt.ctx),Wt.call(Nt.ctx||this,W)}this._firingCount--}}return P&&this._propagateEvent(W),this},listens:function(u,y,P,W){typeof u!="string"&&console.warn('"string" type argument expected');var ue=y;typeof y!="function"&&(W=!!y,ue=void 0,P=void 0);var Pe=this._events&&this._events[u];if(Pe&&Pe.length&&this._listens(u,ue,P)!==!1)return!0;if(W){for(var ut in this._eventParents)if(this._eventParents[ut].listens(u,y,P,W))return!0}return!1},_listens:function(u,y,P){if(!this._events)return!1;var W=this._events[u]||[];if(!y)return!!W.length;P===this&&(P=void 0);for(var ue=0,Pe=W.length;ue<Pe;ue++)if(W[ue].fn===y&&W[ue].ctx===P)return ue;return!1},once:function(u,y,P){if(typeof u=="object")for(var W in u)this._on(W,u[W],y,!0);else{u=x(u);for(var ue=0,Pe=u.length;ue<Pe;ue++)this._on(u[ue],y,P,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[l(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[l(u)],this},_propagateEvent:function(u){for(var y in this._eventParents)this._eventParents[y].fire(u.type,i({layer:u.target,propagatedFrom:u.target},u),!0)}};I.addEventListener=I.on,I.removeEventListener=I.clearAllEventListeners=I.off,I.addOneTimeEventListener=I.once,I.fireEvent=I.fire,I.hasEventListeners=I.listens;var Q=$.extend(I);function G(u,y,P){this.x=P?Math.round(u):u,this.y=P?Math.round(y):y}var _e=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};G.prototype={clone:function(){return new G(this.x,this.y)},add:function(u){return this.clone()._add(ve(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(ve(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new G(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new G(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=_e(this.x),this.y=_e(this.y),this},distanceTo:function(u){u=ve(u);var y=u.x-this.x,P=u.y-this.y;return Math.sqrt(y*y+P*P)},equals:function(u){return u=ve(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=ve(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function ve(u,y,P){return u instanceof G?u:z(u)?new G(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new G(u.x,u.y):new G(u,y,P)}function qe(u,y){if(u)for(var P=y?[u,y]:u,W=0,ue=P.length;W<ue;W++)this.extend(P[W])}qe.prototype={extend:function(u){var y,P;if(!u)return this;if(u instanceof G||typeof u[0]=="number"||"x"in u)y=P=ve(u);else if(u=re(u),y=u.min,P=u.max,!y||!P)return this;return!this.min&&!this.max?(this.min=y.clone(),this.max=P.clone()):(this.min.x=Math.min(y.x,this.min.x),this.max.x=Math.max(P.x,this.max.x),this.min.y=Math.min(y.y,this.min.y),this.max.y=Math.max(P.y,this.max.y)),this},getCenter:function(u){return ve((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return ve(this.min.x,this.max.y)},getTopRight:function(){return ve(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var y,P;return typeof u[0]=="number"||u instanceof G?u=ve(u):u=re(u),u instanceof qe?(y=u.min,P=u.max):y=P=u,y.x>=this.min.x&&P.x<=this.max.x&&y.y>=this.min.y&&P.y<=this.max.y},intersects:function(u){u=re(u);var y=this.min,P=this.max,W=u.min,ue=u.max,Pe=ue.x>=y.x&&W.x<=P.x,ut=ue.y>=y.y&&W.y<=P.y;return Pe&&ut},overlaps:function(u){u=re(u);var y=this.min,P=this.max,W=u.min,ue=u.max,Pe=ue.x>y.x&&W.x<P.x,ut=ue.y>y.y&&W.y<P.y;return Pe&&ut},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var y=this.min,P=this.max,W=Math.abs(y.x-P.x)*u,ue=Math.abs(y.y-P.y)*u;return re(ve(y.x-W,y.y-ue),ve(P.x+W,P.y+ue))},equals:function(u){return u?(u=re(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function re(u,y){return!u||u instanceof qe?u:new qe(u,y)}function K(u,y){if(u)for(var P=y?[u,y]:u,W=0,ue=P.length;W<ue;W++)this.extend(P[W])}K.prototype={extend:function(u){var y=this._southWest,P=this._northEast,W,ue;if(u instanceof oe)W=u,ue=u;else if(u instanceof K){if(W=u._southWest,ue=u._northEast,!W||!ue)return this}else return u?this.extend(de(u)||Z(u)):this;return!y&&!P?(this._southWest=new oe(W.lat,W.lng),this._northEast=new oe(ue.lat,ue.lng)):(y.lat=Math.min(W.lat,y.lat),y.lng=Math.min(W.lng,y.lng),P.lat=Math.max(ue.lat,P.lat),P.lng=Math.max(ue.lng,P.lng)),this},pad:function(u){var y=this._southWest,P=this._northEast,W=Math.abs(y.lat-P.lat)*u,ue=Math.abs(y.lng-P.lng)*u;return new K(new oe(y.lat-W,y.lng-ue),new oe(P.lat+W,P.lng+ue))},getCenter:function(){return new oe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new oe(this.getNorth(),this.getWest())},getSouthEast:function(){return new oe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof oe||"lat"in u?u=de(u):u=Z(u);var y=this._southWest,P=this._northEast,W,ue;return u instanceof K?(W=u.getSouthWest(),ue=u.getNorthEast()):W=ue=u,W.lat>=y.lat&&ue.lat<=P.lat&&W.lng>=y.lng&&ue.lng<=P.lng},intersects:function(u){u=Z(u);var y=this._southWest,P=this._northEast,W=u.getSouthWest(),ue=u.getNorthEast(),Pe=ue.lat>=y.lat&&W.lat<=P.lat,ut=ue.lng>=y.lng&&W.lng<=P.lng;return Pe&&ut},overlaps:function(u){u=Z(u);var y=this._southWest,P=this._northEast,W=u.getSouthWest(),ue=u.getNorthEast(),Pe=ue.lat>y.lat&&W.lat<P.lat,ut=ue.lng>y.lng&&W.lng<P.lng;return Pe&&ut},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,y){return u?(u=Z(u),this._southWest.equals(u.getSouthWest(),y)&&this._northEast.equals(u.getNorthEast(),y)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Z(u,y){return u instanceof K?u:new K(u,y)}function oe(u,y,P){if(isNaN(u)||isNaN(y))throw new Error("Invalid LatLng object: ("+u+", "+y+")");this.lat=+u,this.lng=+y,P!==void 0&&(this.alt=+P)}oe.prototype={equals:function(u,y){if(!u)return!1;u=de(u);var P=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return P<=(y===void 0?1e-9:y)},toString:function(u){return"LatLng("+v(this.lat,u)+", "+v(this.lng,u)+")"},distanceTo:function(u){return he.distance(this,de(u))},wrap:function(){return he.wrapLatLng(this)},toBounds:function(u){var y=180*u/40075017,P=y/Math.cos(Math.PI/180*this.lat);return Z([this.lat-y,this.lng-P],[this.lat+y,this.lng+P])},clone:function(){return new oe(this.lat,this.lng,this.alt)}};function de(u,y,P){return u instanceof oe?u:z(u)&&typeof u[0]!="object"?u.length===3?new oe(u[0],u[1],u[2]):u.length===2?new oe(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new oe(u.lat,"lng"in u?u.lng:u.lon,u.alt):y===void 0?null:new oe(u,y,P)}var ye={latLngToPoint:function(u,y){var P=this.projection.project(u),W=this.scale(y);return this.transformation._transform(P,W)},pointToLatLng:function(u,y){var P=this.scale(y),W=this.transformation.untransform(u,P);return this.projection.unproject(W)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var y=this.projection.bounds,P=this.scale(u),W=this.transformation.transform(y.min,P),ue=this.transformation.transform(y.max,P);return new qe(W,ue)},infinite:!1,wrapLatLng:function(u){var y=this.wrapLng?h(u.lng,this.wrapLng,!0):u.lng,P=this.wrapLat?h(u.lat,this.wrapLat,!0):u.lat,W=u.alt;return new oe(P,y,W)},wrapLatLngBounds:function(u){var y=u.getCenter(),P=this.wrapLatLng(y),W=y.lat-P.lat,ue=y.lng-P.lng;if(W===0&&ue===0)return u;var Pe=u.getSouthWest(),ut=u.getNorthEast(),Nt=new oe(Pe.lat-W,Pe.lng-ue),Wt=new oe(ut.lat-W,ut.lng-ue);return new K(Nt,Wt)}},he=i({},ye,{wrapLng:[-180,180],R:6371e3,distance:function(u,y){var P=Math.PI/180,W=u.lat*P,ue=y.lat*P,Pe=Math.sin((y.lat-u.lat)*P/2),ut=Math.sin((y.lng-u.lng)*P/2),Nt=Pe*Pe+Math.cos(W)*Math.cos(ue)*ut*ut,Wt=2*Math.atan2(Math.sqrt(Nt),Math.sqrt(1-Nt));return this.R*Wt}}),X=6378137,Ae={R:X,MAX_LATITUDE:85.0511287798,project:function(u){var y=Math.PI/180,P=this.MAX_LATITUDE,W=Math.max(Math.min(P,u.lat),-P),ue=Math.sin(W*y);return new G(this.R*u.lng*y,this.R*Math.log((1+ue)/(1-ue))/2)},unproject:function(u){var y=180/Math.PI;return new oe((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*y,u.x*y/this.R)},bounds:function(){var u=X*Math.PI;return new qe([-u,-u],[u,u])}()};function De(u,y,P,W){if(z(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=y,this._c=P,this._d=W}De.prototype={transform:function(u,y){return this._transform(u.clone(),y)},_transform:function(u,y){return y=y||1,u.x=y*(this._a*u.x+this._b),u.y=y*(this._c*u.y+this._d),u},untransform:function(u,y){return y=y||1,new G((u.x/y-this._b)/this._a,(u.y/y-this._d)/this._c)}};function Xe(u,y,P,W){return new De(u,y,P,W)}var fe=i({},he,{code:"EPSG:3857",projection:Ae,transformation:function(){var u=.5/(Math.PI*Ae.R);return Xe(u,.5,-u,.5)}()}),ee=i({},fe,{code:"EPSG:900913"});function se(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function le(u,y){var P="",W,ue,Pe,ut,Nt,Wt;for(W=0,Pe=u.length;W<Pe;W++){for(Nt=u[W],ue=0,ut=Nt.length;ue<ut;ue++)Wt=Nt[ue],P+=(ue?"L":"M")+Wt.x+" "+Wt.y;P+=y?Ze.svg?"z":"x":""}return P||"M0 0"}var je=document.documentElement.style,$e="ActiveXObject"in window,et=$e&&!document.addEventListener,Ee="msLaunchUri"in navigator&&!("documentMode"in document),me=qn("webkit"),We=qn("android"),ct=qn("android 2")||qn("android 3"),pt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),gt=We&&qn("Google")&&pt<537&&!("AudioNode"in window),st=!!window.opera,qt=!Ee&&qn("chrome"),gn=qn("gecko")&&!me&&!st&&!$e,Qe=!qt&&qn("safari"),lt=qn("phantom"),it="OTransition"in je,$t=navigator.platform.indexOf("Win")===0,Jt=$e&&"transition"in je,Dn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ct,vn="MozPerspective"in je,Tn=!window.L_DISABLE_3D&&(Jt||Dn||vn)&&!it&&!lt,Jn=typeof orientation<"u"||qn("mobile"),en=Jn&&me,xn=Jn&&Dn,Cn=!window.PointerEvent&&window.MSPointerEvent,er=!!(window.PointerEvent||Cn),pr="ontouchstart"in window||!!window.TouchEvent,xr=!window.L_NO_TOUCH&&(pr||er),lr=Jn&&st,Jr=Jn&&gn,Bs=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Di=function(){var u=!1;try{var y=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",p,y),window.removeEventListener("testPassiveEventSupport",p,y)}catch{}return u}(),Fo=function(){return!!document.createElement("canvas").getContext}(),Rs=!!(document.createElementNS&&se("svg").createSVGRect),tr=!!Rs&&function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Fs=!Rs&&function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var y=u.firstChild;return y.style.behavior="url(#default#VML)",y&&typeof y.adj=="object"}catch{return!1}}(),jo=navigator.platform.indexOf("Mac")===0,gs=navigator.platform.indexOf("Linux")===0;function qn(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var Ze={ie:$e,ielt9:et,edge:Ee,webkit:me,android:We,android23:ct,androidStock:gt,opera:st,chrome:qt,gecko:gn,safari:Qe,phantom:lt,opera12:it,win:$t,ie3d:Jt,webkit3d:Dn,gecko3d:vn,any3d:Tn,mobile:Jn,mobileWebkit:en,mobileWebkit3d:xn,msPointer:Cn,pointer:er,touch:xr,touchNative:pr,mobileOpera:lr,mobileGecko:Jr,retina:Bs,passiveEvents:Di,canvas:Fo,svg:Rs,vml:Fs,inlineSvg:tr,mac:jo,linux:gs},Ye=Ze.msPointer?"MSPointerDown":"pointerdown",Ut=Ze.msPointer?"MSPointerMove":"pointermove",En=Ze.msPointer?"MSPointerUp":"pointerup",On=Ze.msPointer?"MSPointerCancel":"pointercancel",Ln={touchstart:Ye,touchmove:Ut,touchend:En,touchcancel:On},jt={touchstart:Qr,touchmove:$r,touchend:$r,touchcancel:$r},$n={},xt=!1;function Kt(u,y,P){return y==="touchstart"&&nn(),jt[y]?(P=jt[y].bind(this,P),u.addEventListener(Ln[y],P,!1),P):(console.warn("wrong event specified:",y),p)}function Yn(u,y,P){if(!Ln[y]){console.warn("wrong event specified:",y);return}u.removeEventListener(Ln[y],P,!1)}function gr(u){$n[u.pointerId]=u}function Sr(u){$n[u.pointerId]&&($n[u.pointerId]=u)}function an(u){delete $n[u.pointerId]}function nn(){xt||(document.addEventListener(Ye,gr,!0),document.addEventListener(Ut,Sr,!0),document.addEventListener(En,an,!0),document.addEventListener(On,an,!0),xt=!0)}function $r(u,y){if(y.pointerType!==(y.MSPOINTER_TYPE_MOUSE||"mouse")){y.touches=[];for(var P in $n)y.touches.push($n[P]);y.changedTouches=[y],u(y)}}function Qr(u,y){y.MSPOINTER_TYPE_TOUCH&&y.pointerType===y.MSPOINTER_TYPE_TOUCH&&Lr(y),$r(u,y)}function os(u){var y={},P,W;for(W in u)P=u[W],y[W]=P&&P.bind?P.bind(u):P;return u=y,y.type="dblclick",y.detail=2,y.isTrusted=!1,y._simulated=!0,y}var si=200;function mr(u,y){u.addEventListener("dblclick",y);var P=0,W;function ue(Pe){if(Pe.detail!==1){W=Pe.detail;return}if(!(Pe.pointerType==="mouse"||Pe.sourceCapabilities&&!Pe.sourceCapabilities.firesTouchEvents)){var ut=Na(Pe);if(!(ut.some(function(Wt){return Wt instanceof HTMLLabelElement&&Wt.attributes.for})&&!ut.some(function(Wt){return Wt instanceof HTMLInputElement||Wt instanceof HTMLSelectElement}))){var Nt=Date.now();Nt-P<=si?(W++,W===2&&y(os(Pe))):W=1,P=Nt}}}return u.addEventListener("click",ue),{dblclick:y,simDblclick:ue}}function Fr(u,y){u.removeEventListener("dblclick",y.dblclick),u.removeEventListener("click",y.simDblclick)}var ei=cs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Pr=cs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),cn=Pr==="webkitTransition"||Pr==="OTransition"?Pr+"End":"transitionend";function Xi(u){return typeof u=="string"?document.getElementById(u):u}function Vr(u,y){var P=u.style[y]||u.currentStyle&&u.currentStyle[y];if((!P||P==="auto")&&document.defaultView){var W=document.defaultView.getComputedStyle(u,null);P=W?W[y]:null}return P==="auto"?null:P}function ur(u,y,P){var W=document.createElement(u);return W.className=y||"",P&&P.appendChild(W),W}function Un(u){var y=u.parentNode;y&&y.removeChild(u)}function Ni(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function kr(u){var y=u.parentNode;y&&y.lastChild!==u&&y.appendChild(u)}function br(u){var y=u.parentNode;y&&y.firstChild!==u&&y.insertBefore(u,y.firstChild)}function no(u,y){if(u.classList!==void 0)return u.classList.contains(y);var P=bn(u);return P.length>0&&new RegExp("(^|\\s)"+y+"(\\s|$)").test(P)}function Cr(u,y){if(u.classList!==void 0)for(var P=x(y),W=0,ue=P.length;W<ue;W++)u.classList.add(P[W]);else if(!no(u,y)){var Pe=bn(u);_r(u,(Pe?Pe+" ":"")+y)}}function Pn(u,y){u.classList!==void 0?u.classList.remove(y):_r(u,g((" "+bn(u)+" ").replace(" "+y+" "," ")))}function _r(u,y){u.className.baseVal===void 0?u.className=y:u.className.baseVal=y}function bn(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function Ur(u,y){"opacity"in u.style?u.style.opacity=y:"filter"in u.style&&Ji(u,y)}function Ji(u,y){var P=!1,W="DXImageTransform.Microsoft.Alpha";try{P=u.filters.item(W)}catch{if(y===1)return}y=Math.round(y*100),P?(P.Enabled=y!==100,P.Opacity=y):u.style.filter+=" progid:"+W+"(opacity="+y+")"}function cs(u){for(var y=document.documentElement.style,P=0;P<u.length;P++)if(u[P]in y)return u[P];return!1}function ms(u,y,P){var W=y||new G(0,0);u.style[ei]=(Ze.ie3d?"translate("+W.x+"px,"+W.y+"px)":"translate3d("+W.x+"px,"+W.y+"px,0)")+(P?" scale("+P+")":"")}function Si(u,y){u._leaflet_pos=y,Ze.any3d?ms(u,y):(u.style.left=y.x+"px",u.style.top=y.y+"px")}function Ps(u){return u._leaflet_pos||new G(0,0)}var Wr,js,as;if("onselectstart"in document)Wr=function(){Mr(window,"selectstart",Lr)},js=function(){qr(window,"selectstart",Lr)};else{var ys=cs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Wr=function(){if(ys){var u=document.documentElement.style;as=u[ys],u[ys]="none"}},js=function(){ys&&(document.documentElement.style[ys]=as,as=void 0)}}function bi(){Mr(window,"dragstart",Lr)}function Sn(){qr(window,"dragstart",Lr)}var pn,pi;function ro(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(Hi(),pn=u,pi=u.style.outlineStyle,u.style.outlineStyle="none",Mr(window,"keydown",Hi))}function Hi(){pn&&(pn.style.outlineStyle=pi,pn=void 0,pi=void 0,qr(window,"keydown",Hi))}function lu(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function wl(u){var y=u.getBoundingClientRect();return{x:y.width/u.offsetWidth||1,y:y.height/u.offsetHeight||1,boundingClientRect:y}}var vr={__proto__:null,TRANSFORM:ei,TRANSITION:Pr,TRANSITION_END:cn,get:Xi,getStyle:Vr,create:ur,remove:Un,empty:Ni,toFront:kr,toBack:br,hasClass:no,addClass:Cr,removeClass:Pn,setClass:_r,getClass:bn,setOpacity:Ur,testProp:cs,setTransform:ms,setPosition:Si,getPosition:Ps,get disableTextSelection(){return Wr},get enableTextSelection(){return js},disableImageDrag:bi,enableImageDrag:Sn,preventOutline:ro,restoreOutline:Hi,getSizedParentNode:lu,getScale:wl};function Mr(u,y,P,W){if(y&&typeof y=="object")for(var ue in y)oo(u,ue,y[ue],P);else{y=x(y);for(var Pe=0,ut=y.length;Pe<ut;Pe++)oo(u,y[Pe],P,W)}return this}var Gr="_leaflet_events";function qr(u,y,P,W){if(arguments.length===1)io(u),delete u[Gr];else if(y&&typeof y=="object")for(var ue in y)zo(u,ue,y[ue],P);else if(y=x(y),arguments.length===2)io(u,function(Nt){return Y(y,Nt)!==-1});else for(var Pe=0,ut=y.length;Pe<ut;Pe++)zo(u,y[Pe],P,W);return this}function io(u,y){for(var P in u[Gr]){var W=P.split(/\d/)[0];(!y||y(W))&&zo(u,W,null,null,P)}}var so={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function oo(u,y,P,W){var ue=y+l(P)+(W?"_"+l(W):"");if(u[Gr]&&u[Gr][ue])return this;var Pe=function(Nt){return P.call(W||u,Nt||window.event)},ut=Pe;!Ze.touchNative&&Ze.pointer&&y.indexOf("touch")===0?Pe=Kt(u,y,Pe):Ze.touch&&y==="dblclick"?Pe=mr(u,Pe):"addEventListener"in u?y==="touchstart"||y==="touchmove"||y==="wheel"||y==="mousewheel"?u.addEventListener(so[y]||y,Pe,Ze.passiveEvents?{passive:!1}:!1):y==="mouseenter"||y==="mouseleave"?(Pe=function(Nt){Nt=Nt||window.event,Il(u,Nt)&&ut(Nt)},u.addEventListener(so[y],Pe,!1)):u.addEventListener(y,ut,!1):u.attachEvent("on"+y,Pe),u[Gr]=u[Gr]||{},u[Gr][ue]=Pe}function zo(u,y,P,W,ue){ue=ue||y+l(P)+(W?"_"+l(W):"");var Pe=u[Gr]&&u[Gr][ue];if(!Pe)return this;!Ze.touchNative&&Ze.pointer&&y.indexOf("touch")===0?Yn(u,y,Pe):Ze.touch&&y==="dblclick"?Fr(u,Pe):"removeEventListener"in u?u.removeEventListener(so[y]||y,Pe,!1):u.detachEvent("on"+y,Pe),u[Gr][ue]=null}function _a(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function uu(u){return oo(u,"wheel",_a),this}function Da(u){return Mr(u,"mousedown touchstart dblclick contextmenu",_a),u._leaflet_disable_click=!0,this}function Lr(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function jr(u){return Lr(u),_a(u),this}function Na(u){if(u.composedPath)return u.composedPath();for(var y=[],P=u.target;P;)y.push(P),P=P.parentNode;return y}function Ri(u,y){if(!y)return new G(u.clientX,u.clientY);var P=wl(y),W=P.boundingClientRect;return new G((u.clientX-W.left)/P.x-y.clientLeft,(u.clientY-W.top)/P.y-y.clientTop)}var $o=Ze.linux&&Ze.chrome?window.devicePixelRatio:Ze.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Ws(u){return Ze.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/$o:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function Il(u,y){var P=y.relatedTarget;if(!P)return!0;try{for(;P&&P!==u;)P=P.parentNode}catch{return!1}return P!==u}var cu={__proto__:null,on:Mr,off:qr,stopPropagation:_a,disableScrollPropagation:uu,disableClickPropagation:Da,preventDefault:Lr,stop:jr,getPropagationPath:Na,getMousePosition:Ri,getWheelDelta:Ws,isExternalTarget:Il,addListener:Mr,removeListener:qr},Au=Q.extend({run:function(u,y,P,W){this.stop(),this._el=u,this._inProgress=!0,this._duration=P||.25,this._easeOutPower=1/Math.max(W||.5,.2),this._startPos=Ps(u),this._offset=y.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=U(this._animate,this),this._step()},_step:function(u){var y=+new Date-this._startTime,P=this._duration*1e3;y<P?this._runFrame(this._easeOut(y/P),u):(this._runFrame(1),this._complete())},_runFrame:function(u,y){var P=this._startPos.add(this._offset.multiplyBy(u));y&&P._round(),Si(this._el,P),this.fire("step")},_complete:function(){R(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),oi=Q.extend({options:{crs:fe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,y){y=E(this,y),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),y.maxBounds&&this.setMaxBounds(y.maxBounds),y.zoom!==void 0&&(this._zoom=this._limitZoom(y.zoom)),y.center&&y.zoom!==void 0&&this.setView(de(y.center),y.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Pr&&Ze.any3d&&!Ze.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Mr(this._proxy,cn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,y,P){if(y=y===void 0?this._zoom:this._limitZoom(y),u=this._limitCenter(de(u),y,this.options.maxBounds),P=P||{},this._stop(),this._loaded&&!P.reset&&P!==!0){P.animate!==void 0&&(P.zoom=i({animate:P.animate},P.zoom),P.pan=i({animate:P.animate,duration:P.duration},P.pan));var W=this._zoom!==y?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,y,P.zoom):this._tryAnimatedPan(u,P.pan);if(W)return clearTimeout(this._sizeTimer),this}return this._resetView(u,y,P.pan&&P.pan.noMoveStart),this},setZoom:function(u,y){return this._loaded?this.setView(this.getCenter(),u,{zoom:y}):(this._zoom=u,this)},zoomIn:function(u,y){return u=u||(Ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,y)},zoomOut:function(u,y){return u=u||(Ze.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,y)},setZoomAround:function(u,y,P){var W=this.getZoomScale(y),ue=this.getSize().divideBy(2),Pe=u instanceof G?u:this.latLngToContainerPoint(u),ut=Pe.subtract(ue).multiplyBy(1-1/W),Nt=this.containerPointToLatLng(ue.add(ut));return this.setView(Nt,y,{zoom:P})},_getBoundsCenterZoom:function(u,y){y=y||{},u=u.getBounds?u.getBounds():Z(u);var P=ve(y.paddingTopLeft||y.padding||[0,0]),W=ve(y.paddingBottomRight||y.padding||[0,0]),ue=this.getBoundsZoom(u,!1,P.add(W));if(ue=typeof y.maxZoom=="number"?Math.min(y.maxZoom,ue):ue,ue===1/0)return{center:u.getCenter(),zoom:ue};var Pe=W.subtract(P).divideBy(2),ut=this.project(u.getSouthWest(),ue),Nt=this.project(u.getNorthEast(),ue),Wt=this.unproject(ut.add(Nt).divideBy(2).add(Pe),ue);return{center:Wt,zoom:ue}},fitBounds:function(u,y){if(u=Z(u),!u.isValid())throw new Error("Bounds are not valid.");var P=this._getBoundsCenterZoom(u,y);return this.setView(P.center,P.zoom,y)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,y){return this.setView(u,this._zoom,{pan:y})},panBy:function(u,y){if(u=ve(u).round(),y=y||{},!u.x&&!u.y)return this.fire("moveend");if(y.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Au,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),y.noMoveStart||this.fire("movestart"),y.animate!==!1){Cr(this._mapPane,"leaflet-pan-anim");var P=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,P,y.duration||.25,y.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,y,P){if(P=P||{},P.animate===!1||!Ze.any3d)return this.setView(u,y,P);this._stop();var W=this.project(this.getCenter()),ue=this.project(u),Pe=this.getSize(),ut=this._zoom;u=de(u),y=y===void 0?ut:y;var Nt=Math.max(Pe.x,Pe.y),Wt=Nt*this.getZoomScale(ut,y),ln=ue.distanceTo(W)||1,jn=1.42,ir=jn*jn;function Hr(wi){var go=wi?-1:1,Ie=wi?Wt:Nt,Go=Wt*Wt-Nt*Nt+go*ir*ir*ln*ln,tc=2*Ie*ir*ln,Js=Go/tc,Zr=Math.sqrt(Js*Js+1)-Js,$d=Zr<1e-9?-18:Math.log(Zr);return $d}function Ts(wi){return(Math.exp(wi)-Math.exp(-wi))/2}function ds(wi){return(Math.exp(wi)+Math.exp(-wi))/2}function Xs(wi){return Ts(wi)/ds(wi)}var ns=Hr(0);function Wo(wi){return Nt*(ds(ns)/ds(ns+jn*wi))}function od(wi){return Nt*(ds(ns)*Xs(ns+jn*wi)-Ts(ns))/ir}function Ua(wi){return 1-Math.pow(1-wi,1.5)}var Ea=Date.now(),fa=(Hr(1)-ns)/jn,Th=P.duration?1e3*P.duration:1e3*fa*.8;function Nu(){var wi=(Date.now()-Ea)/Th,go=Ua(wi)*fa;wi<=1?(this._flyToFrame=U(Nu,this),this._move(this.unproject(W.add(ue.subtract(W).multiplyBy(od(go)/ln)),ut),this.getScaleZoom(Nt/Wo(go),ut),{flyTo:!0})):this._move(u,y)._moveEnd(!0)}return this._moveStart(!0,P.noMoveStart),Nu.call(this),this},flyToBounds:function(u,y){var P=this._getBoundsCenterZoom(u,y);return this.flyTo(P.center,P.zoom,y)},setMaxBounds:function(u){return u=Z(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var y=this.options.minZoom;return this.options.minZoom=u,this._loaded&&y!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var y=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&y!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,y){this._enforcingBounds=!0;var P=this.getCenter(),W=this._limitCenter(P,this._zoom,Z(u));return P.equals(W)||this.panTo(W,y),this._enforcingBounds=!1,this},panInside:function(u,y){y=y||{};var P=ve(y.paddingTopLeft||y.padding||[0,0]),W=ve(y.paddingBottomRight||y.padding||[0,0]),ue=this.project(this.getCenter()),Pe=this.project(u),ut=this.getPixelBounds(),Nt=re([ut.min.add(P),ut.max.subtract(W)]),Wt=Nt.getSize();if(!Nt.contains(Pe)){this._enforcingBounds=!0;var ln=Pe.subtract(Nt.getCenter()),jn=Nt.extend(Pe).getSize().subtract(Wt);ue.x+=ln.x<0?-jn.x:jn.x,ue.y+=ln.y<0?-jn.y:jn.y,this.panTo(this.unproject(ue),y),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=i({animate:!1,pan:!0},u===!0?{animate:!0}:u);var y=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var P=this.getSize(),W=y.divideBy(2).round(),ue=P.divideBy(2).round(),Pe=W.subtract(ue);return!Pe.x&&!Pe.y?this:(u.animate&&u.pan?this.panBy(Pe):(u.pan&&this._rawPanBy(Pe),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:y,newSize:P}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=i({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var y=o(this._handleGeolocationResponse,this),P=o(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(y,P,u):navigator.geolocation.getCurrentPosition(y,P,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var y=u.code,P=u.message||(y===1?"permission denied":y===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:y,message:"Geolocation error: "+P+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var y=u.coords.latitude,P=u.coords.longitude,W=new oe(y,P),ue=W.toBounds(u.coords.accuracy*2),Pe=this._locateOptions;if(Pe.setView){var ut=this.getBoundsZoom(ue);this.setView(W,Pe.maxZoom?Math.min(ut,Pe.maxZoom):ut)}var Nt={latlng:W,bounds:ue,timestamp:u.timestamp};for(var Wt in u.coords)typeof u.coords[Wt]=="number"&&(Nt[Wt]=u.coords[Wt]);this.fire("locationfound",Nt)}},addHandler:function(u,y){if(!y)return this;var P=this[u]=new y(this);return this._handlers.push(P),this.options[u]&&P.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Un(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(R(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)Un(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,y){var P="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),W=ur("div",P,y||this._mapPane);return u&&(this._panes[u]=W),W},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),y=this.unproject(u.getBottomLeft()),P=this.unproject(u.getTopRight());return new K(y,P)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,y,P){u=Z(u),P=ve(P||[0,0]);var W=this.getZoom()||0,ue=this.getMinZoom(),Pe=this.getMaxZoom(),ut=u.getNorthWest(),Nt=u.getSouthEast(),Wt=this.getSize().subtract(P),ln=re(this.project(Nt,W),this.project(ut,W)).getSize(),jn=Ze.any3d?this.options.zoomSnap:1,ir=Wt.x/ln.x,Hr=Wt.y/ln.y,Ts=y?Math.max(ir,Hr):Math.min(ir,Hr);return W=this.getScaleZoom(Ts,W),jn&&(W=Math.round(W/(jn/100))*(jn/100),W=y?Math.ceil(W/jn)*jn:Math.floor(W/jn)*jn),Math.max(ue,Math.min(Pe,W))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new G(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,y){var P=this._getTopLeftPoint(u,y);return new qe(P,P.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,y){var P=this.options.crs;return y=y===void 0?this._zoom:y,P.scale(u)/P.scale(y)},getScaleZoom:function(u,y){var P=this.options.crs;y=y===void 0?this._zoom:y;var W=P.zoom(u*P.scale(y));return isNaN(W)?1/0:W},project:function(u,y){return y=y===void 0?this._zoom:y,this.options.crs.latLngToPoint(de(u),y)},unproject:function(u,y){return y=y===void 0?this._zoom:y,this.options.crs.pointToLatLng(ve(u),y)},layerPointToLatLng:function(u){var y=ve(u).add(this.getPixelOrigin());return this.unproject(y)},latLngToLayerPoint:function(u){var y=this.project(de(u))._round();return y._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(de(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(Z(u))},distance:function(u,y){return this.options.crs.distance(de(u),de(y))},containerPointToLayerPoint:function(u){return ve(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return ve(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var y=this.containerPointToLayerPoint(ve(u));return this.layerPointToLatLng(y)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(de(u)))},mouseEventToContainerPoint:function(u){return Ri(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var y=this._container=Xi(u);if(y){if(y._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Mr(y,"scroll",this._onScroll,this),this._containerId=l(y)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ze.any3d,Cr(u,"leaflet-container"+(Ze.touch?" leaflet-touch":"")+(Ze.retina?" leaflet-retina":"")+(Ze.ielt9?" leaflet-oldie":"")+(Ze.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var y=Vr(u,"position");y!=="absolute"&&y!=="relative"&&y!=="fixed"&&y!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Si(this._mapPane,new G(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Cr(u.markerPane,"leaflet-zoom-hide"),Cr(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,y,P){Si(this._mapPane,new G(0,0));var W=!this._loaded;this._loaded=!0,y=this._limitZoom(y),this.fire("viewprereset");var ue=this._zoom!==y;this._moveStart(ue,P)._move(u,y)._moveEnd(ue),this.fire("viewreset"),W&&this.fire("load")},_moveStart:function(u,y){return u&&this.fire("zoomstart"),y||this.fire("movestart"),this},_move:function(u,y,P,W){y===void 0&&(y=this._zoom);var ue=this._zoom!==y;return this._zoom=y,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),W?P&&P.pinch&&this.fire("zoom",P):((ue||P&&P.pinch)&&this.fire("zoom",P),this.fire("move",P)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return R(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){Si(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[l(this._container)]=this;var y=u?qr:Mr;y(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&y(window,"resize",this._onResize,this),Ze.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){R(this._resizeRequest),this._resizeRequest=U(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,y){for(var P=[],W,ue=y==="mouseout"||y==="mouseover",Pe=u.target||u.srcElement,ut=!1;Pe;){if(W=this._targets[l(Pe)],W&&(y==="click"||y==="preclick")&&this._draggableMoved(W)){ut=!0;break}if(W&&W.listens(y,!0)&&(ue&&!Il(Pe,u)||(P.push(W),ue))||Pe===this._container)break;Pe=Pe.parentNode}return!P.length&&!ut&&!ue&&this.listens(y,!0)&&(P=[this]),P},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var y=u.target||u.srcElement;if(!(!this._loaded||y._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(y))){var P=u.type;P==="mousedown"&&ro(y),this._fireDOMEvent(u,P)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,y,P){if(u.type==="click"){var W=i({},u);W.type="preclick",this._fireDOMEvent(W,W.type,P)}var ue=this._findEventTargets(u,y);if(P){for(var Pe=[],ut=0;ut<P.length;ut++)P[ut].listens(y,!0)&&Pe.push(P[ut]);ue=Pe.concat(ue)}if(ue.length){y==="contextmenu"&&Lr(u);var Nt=ue[0],Wt={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var ln=Nt.getLatLng&&(!Nt._radius||Nt._radius<=10);Wt.containerPoint=ln?this.latLngToContainerPoint(Nt.getLatLng()):this.mouseEventToContainerPoint(u),Wt.layerPoint=this.containerPointToLayerPoint(Wt.containerPoint),Wt.latlng=ln?Nt.getLatLng():this.layerPointToLatLng(Wt.layerPoint)}for(ut=0;ut<ue.length;ut++)if(ue[ut].fire(y,Wt,!0),Wt.originalEvent._stopped||ue[ut].options.bubblingMouseEvents===!1&&Y(this._mouseEvents,y)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,y=this._handlers.length;u<y;u++)this._handlers[u].disable()},whenReady:function(u,y){return this._loaded?u.call(y||this,{target:this}):this.on("load",u,y),this},_getMapPanePos:function(){return Ps(this._mapPane)||new G(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,y){var P=u&&y!==void 0?this._getNewPixelOrigin(u,y):this.getPixelOrigin();return P.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,y){var P=this.getSize()._divideBy(2);return this.project(u,y)._subtract(P)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,y,P){var W=this._getNewPixelOrigin(P,y);return this.project(u,y)._subtract(W)},_latLngBoundsToNewLayerBounds:function(u,y,P){var W=this._getNewPixelOrigin(P,y);return re([this.project(u.getSouthWest(),y)._subtract(W),this.project(u.getNorthWest(),y)._subtract(W),this.project(u.getSouthEast(),y)._subtract(W),this.project(u.getNorthEast(),y)._subtract(W)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,y,P){if(!P)return u;var W=this.project(u,y),ue=this.getSize().divideBy(2),Pe=new qe(W.subtract(ue),W.add(ue)),ut=this._getBoundsOffset(Pe,P,y);return Math.abs(ut.x)<=1&&Math.abs(ut.y)<=1?u:this.unproject(W.add(ut),y)},_limitOffset:function(u,y){if(!y)return u;var P=this.getPixelBounds(),W=new qe(P.min.add(u),P.max.add(u));return u.add(this._getBoundsOffset(W,y))},_getBoundsOffset:function(u,y,P){var W=re(this.project(y.getNorthEast(),P),this.project(y.getSouthWest(),P)),ue=W.min.subtract(u.min),Pe=W.max.subtract(u.max),ut=this._rebound(ue.x,-Pe.x),Nt=this._rebound(ue.y,-Pe.y);return new G(ut,Nt)},_rebound:function(u,y){return u+y>0?Math.round(u-y)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(y))},_limitZoom:function(u){var y=this.getMinZoom(),P=this.getMaxZoom(),W=Ze.any3d?this.options.zoomSnap:1;return W&&(u=Math.round(u/W)*W),Math.max(y,Math.min(P,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Pn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,y){var P=this._getCenterOffset(u)._trunc();return(y&&y.animate)!==!0&&!this.getSize().contains(P)?!1:(this.panBy(P,y),!0)},_createAnimProxy:function(){var u=this._proxy=ur("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(y){var P=ei,W=this._proxy.style[P];ms(this._proxy,this.project(y.center,y.zoom),this.getZoomScale(y.zoom,1)),W===this._proxy.style[P]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Un(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),y=this.getZoom();ms(this._proxy,this.project(u,y),this.getZoomScale(y,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,y,P){if(this._animatingZoom)return!0;if(P=P||{},!this._zoomAnimated||P.animate===!1||this._nothingToAnimate()||Math.abs(y-this._zoom)>this.options.zoomAnimationThreshold)return!1;var W=this.getZoomScale(y),ue=this._getCenterOffset(u)._divideBy(1-1/W);return P.animate!==!0&&!this.getSize().contains(ue)?!1:(U(function(){this._moveStart(!0,P.noMoveStart||!1)._animateZoom(u,y,!0)},this),!0)},_animateZoom:function(u,y,P,W){this._mapPane&&(P&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=y,Cr(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:y,noUpdate:W}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Pn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function bs(u,y){return new oi(u,y)}var hr=$.extend({options:{position:"topright"},initialize:function(u){E(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var y=this._map;return y&&y.removeControl(this),this.options.position=u,y&&y.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var y=this._container=this.onAdd(u),P=this.getPosition(),W=u._controlCorners[P];return Cr(y,"leaflet-control"),P.indexOf("bottom")!==-1?W.insertBefore(y,W.firstChild):W.appendChild(y),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Un(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),_s=function(u){return new hr(u)};oi.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},y="leaflet-",P=this._controlContainer=ur("div",y+"control-container",this._container);function W(ue,Pe){var ut=y+ue+" "+y+Pe;u[ue+Pe]=ur("div",ut,P)}W("top","left"),W("top","right"),W("bottom","left"),W("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)Un(this._controlCorners[u]);Un(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Bl=hr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,y,P,W){return P<W?-1:W<P?1:0}},initialize:function(u,y,P){E(this,P),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var W in u)this._addLayer(u[W],W);for(W in y)this._addLayer(y[W],W,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return hr.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,y){return this._addLayer(u,y),this._map?this._update():this},addOverlay:function(u,y){return this._addLayer(u,y,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var y=this._getLayer(l(u));return y&&this._layers.splice(this._layers.indexOf(y),1),this._map?this._update():this},expand:function(){Cr(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(Cr(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):Pn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Pn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",y=this._container=ur("div",u),P=this.options.collapsed;y.setAttribute("aria-haspopup",!0),Da(y),uu(y);var W=this._section=ur("section",u+"-list");P&&(this._map.on("click",this.collapse,this),Mr(y,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ue=this._layersLink=ur("a",u+"-toggle",y);ue.href="#",ue.title="Layers",ue.setAttribute("role","button"),Mr(ue,{keydown:function(Pe){Pe.keyCode===13&&this._expandSafely()},click:function(Pe){Lr(Pe),this._expandSafely()}},this),P||this.expand(),this._baseLayersList=ur("div",u+"-base",W),this._separator=ur("div",u+"-separator",W),this._overlaysList=ur("div",u+"-overlays",W),y.appendChild(W)},_getLayer:function(u){for(var y=0;y<this._layers.length;y++)if(this._layers[y]&&l(this._layers[y].layer)===u)return this._layers[y]},_addLayer:function(u,y,P){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:y,overlay:P}),this.options.sortLayers&&this._layers.sort(o(function(W,ue){return this.options.sortFunction(W.layer,ue.layer,W.name,ue.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ni(this._baseLayersList),Ni(this._overlaysList),this._layerControlInputs=[];var u,y,P,W,ue=0;for(P=0;P<this._layers.length;P++)W=this._layers[P],this._addItem(W),y=y||W.overlay,u=u||!W.overlay,ue+=W.overlay?0:1;return this.options.hideSingleBase&&(u=u&&ue>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=y&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var y=this._getLayer(l(u.target)),P=y.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;P&&this._map.fire(P,y)},_createRadioElement:function(u,y){var P='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(y?' checked="checked"':"")+"/>",W=document.createElement("div");return W.innerHTML=P,W.firstChild},_addItem:function(u){var y=document.createElement("label"),P=this._map.hasLayer(u.layer),W;u.overlay?(W=document.createElement("input"),W.type="checkbox",W.className="leaflet-control-layers-selector",W.defaultChecked=P):W=this._createRadioElement("leaflet-base-layers_"+l(this),P),this._layerControlInputs.push(W),W.layerId=l(u.layer),Mr(W,"click",this._onInputClick,this);var ue=document.createElement("span");ue.innerHTML=" "+u.name;var Pe=document.createElement("span");y.appendChild(Pe),Pe.appendChild(W),Pe.appendChild(ue);var ut=u.overlay?this._overlaysList:this._baseLayersList;return ut.appendChild(y),this._checkDisabledLayers(),y},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,y,P,W=[],ue=[];this._handlingClick=!0;for(var Pe=u.length-1;Pe>=0;Pe--)y=u[Pe],P=this._getLayer(y.layerId).layer,y.checked?W.push(P):y.checked||ue.push(P);for(Pe=0;Pe<ue.length;Pe++)this._map.hasLayer(ue[Pe])&&this._map.removeLayer(ue[Pe]);for(Pe=0;Pe<W.length;Pe++)this._map.hasLayer(W[Pe])||this._map.addLayer(W[Pe]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,y,P,W=this._map.getZoom(),ue=u.length-1;ue>=0;ue--)y=u[ue],P=this._getLayer(y.layerId).layer,y.disabled=P.options.minZoom!==void 0&&W<P.options.minZoom||P.options.maxZoom!==void 0&&W>P.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,Mr(u,"click",Lr),this.expand();var y=this;setTimeout(function(){qr(u,"click",Lr),y._preventClick=!1})}}),Ka=function(u,y,P){return new Bl(u,y,P)},Qi=hr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var y="leaflet-control-zoom",P=ur("div",y+" leaflet-bar"),W=this.options;return this._zoomInButton=this._createButton(W.zoomInText,W.zoomInTitle,y+"-in",P,this._zoomIn),this._zoomOutButton=this._createButton(W.zoomOutText,W.zoomOutTitle,y+"-out",P,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),P},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,y,P,W,ue){var Pe=ur("a",P,W);return Pe.innerHTML=u,Pe.href="#",Pe.title=y,Pe.setAttribute("role","button"),Pe.setAttribute("aria-label",y),Da(Pe),Mr(Pe,"click",jr),Mr(Pe,"click",ue,this),Mr(Pe,"click",this._refocusOnMap,this),Pe},_updateDisabled:function(){var u=this._map,y="leaflet-disabled";Pn(this._zoomInButton,y),Pn(this._zoomOutButton,y),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(Cr(this._zoomOutButton,y),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(Cr(this._zoomInButton,y),this._zoomInButton.setAttribute("aria-disabled","true"))}});oi.mergeOptions({zoomControl:!0}),oi.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Qi,this.addControl(this.zoomControl))});var Tu=function(u){return new Qi(u)},Oa=hr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var y="leaflet-control-scale",P=ur("div",y),W=this.options;return this._addScales(W,y+"-line",P),u.on(W.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),P},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,y,P){u.metric&&(this._mScale=ur("div",y,P)),u.imperial&&(this._iScale=ur("div",y,P))},_update:function(){var u=this._map,y=u.getSize().y/2,P=u.distance(u.containerPointToLatLng([0,y]),u.containerPointToLatLng([this.options.maxWidth,y]));this._updateScales(P)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var y=this._getRoundNum(u),P=y<1e3?y+" m":y/1e3+" km";this._updateScale(this._mScale,P,y/u)},_updateImperial:function(u){var y=u*3.2808399,P,W,ue;y>5280?(P=y/5280,W=this._getRoundNum(P),this._updateScale(this._iScale,W+" mi",W/P)):(ue=this._getRoundNum(y),this._updateScale(this._iScale,ue+" ft",ue/y))},_updateScale:function(u,y,P){u.style.width=Math.round(this.options.maxWidth*P)+"px",u.innerHTML=y},_getRoundNum:function(u){var y=Math.pow(10,(Math.floor(u)+"").length-1),P=u/y;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:1,y*P}}),du=function(u){return new Oa(u)},hu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',da=hr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ze.inlineSvg?hu+" ":"")+"Leaflet</a>"},initialize:function(u){E(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=ur("div","leaflet-control-attribution"),Da(this._container);for(var y in u._layers)u._layers[y].getAttribution&&this.addAttribution(u._layers[y].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var y in this._attributions)this._attributions[y]&&u.push(y);var P=[];this.options.prefix&&P.push(this.options.prefix),u.length&&P.push(u.join(", ")),this._container.innerHTML=P.join(' <span aria-hidden="true">|</span> ')}}});oi.mergeOptions({attributionControl:!0}),oi.addInitHook(function(){this.options.attributionControl&&new da().addTo(this)});var fu=function(u){return new da(u)};hr.Layers=Bl,hr.Zoom=Qi,hr.Scale=Oa,hr.Attribution=da,_s.layers=Ka,_s.zoom=Tu,_s.scale=du,_s.attribution=fu;var Ci=$.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ci.addTo=function(u,y){return u.addHandler(y,this),this};var kc={Events:I},Gs=Ze.touch?"touchstart mousedown":"mousedown",wa=Q.extend({options:{clickTolerance:3},initialize:function(u,y,P,W){E(this,W),this._element=u,this._dragStartTarget=y||u,this._preventOutline=P},enable:function(){this._enabled||(Mr(this._dragStartTarget,Gs,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(wa._dragging===this&&this.finishDrag(!0),qr(this._dragStartTarget,Gs,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!no(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){wa._dragging===this&&this.finishDrag();return}if(!(wa._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(wa._dragging=this,this._preventOutline&&ro(this._element),bi(),Wr(),!this._moving)){this.fire("down");var y=u.touches?u.touches[0]:u,P=lu(this._element);this._startPoint=new G(y.clientX,y.clientY),this._startPos=Ps(this._element),this._parentScale=wl(P);var W=u.type==="mousedown";Mr(document,W?"mousemove":"touchmove",this._onMove,this),Mr(document,W?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var y=u.touches&&u.touches.length===1?u.touches[0]:u,P=new G(y.clientX,y.clientY)._subtract(this._startPoint);!P.x&&!P.y||Math.abs(P.x)+Math.abs(P.y)<this.options.clickTolerance||(P.x/=this._parentScale.x,P.y/=this._parentScale.y,Lr(u),this._moved||(this.fire("dragstart"),this._moved=!0,Cr(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Cr(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(P),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),Si(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){Pn(document.body,"leaflet-dragging"),this._lastTarget&&(Pn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),qr(document,"mousemove touchmove",this._onMove,this),qr(document,"mouseup touchend touchcancel",this._onUp,this),Sn(),js();var y=this._moved&&this._moving;this._moving=!1,wa._dragging=!1,y&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function pu(u,y,P){var W,ue=[1,4,2,8],Pe,ut,Nt,Wt,ln,jn,ir,Hr;for(Pe=0,jn=u.length;Pe<jn;Pe++)u[Pe]._code=Ht(u[Pe],y);for(Nt=0;Nt<4;Nt++){for(ir=ue[Nt],W=[],Pe=0,jn=u.length,ut=jn-1;Pe<jn;ut=Pe++)Wt=u[Pe],ln=u[ut],Wt._code&ir?ln._code&ir||(Hr=Mt(ln,Wt,ir,y,P),Hr._code=Ht(Hr,y),W.push(Hr)):(ln._code&ir&&(Hr=Mt(ln,Wt,ir,y,P),Hr._code=Ht(Hr,y),W.push(Hr)),W.push(Wt));u=W}return u}function xa(u,y){var P,W,ue,Pe,ut,Nt,Wt,ln,jn;if(!u||u.length===0)throw new Error("latlngs not passed");Hn(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var ir=de([0,0]),Hr=Z(u),Ts=Hr.getNorthWest().distanceTo(Hr.getSouthWest())*Hr.getNorthEast().distanceTo(Hr.getNorthWest());Ts<1700&&(ir=Rl(u));var ds=u.length,Xs=[];for(P=0;P<ds;P++){var ns=de(u[P]);Xs.push(y.project(de([ns.lat-ir.lat,ns.lng-ir.lng])))}for(Nt=Wt=ln=0,P=0,W=ds-1;P<ds;W=P++)ue=Xs[P],Pe=Xs[W],ut=ue.y*Pe.x-Pe.y*ue.x,Wt+=(ue.x+Pe.x)*ut,ln+=(ue.y+Pe.y)*ut,Nt+=ut*3;Nt===0?jn=Xs[0]:jn=[Wt/Nt,ln/Nt];var Wo=y.unproject(ve(jn));return de([Wo.lat+ir.lat,Wo.lng+ir.lng])}function Rl(u){for(var y=0,P=0,W=0,ue=0;ue<u.length;ue++){var Pe=de(u[ue]);y+=Pe.lat,P+=Pe.lng,W++}return de([y/W,P/W])}var Fl={__proto__:null,clipPolygon:pu,polygonCenter:xa,centroid:Rl};function Ei(u,y){if(!y||!u.length)return u.slice();var P=y*y;return u=xe(u,P),u=ws(u,P),u}function ra(u,y,P){return Math.sqrt(Fn(u,y,P,!0))}function Za(u,y,P){return Fn(u,y,P)}function ws(u,y){var P=u.length,W=typeof Uint8Array<"u"?Uint8Array:Array,ue=new W(P);ue[0]=ue[P-1]=1,F(u,ue,y,0,P-1);var Pe,ut=[];for(Pe=0;Pe<P;Pe++)ue[Pe]&&ut.push(u[Pe]);return ut}function F(u,y,P,W,ue){var Pe=0,ut,Nt,Wt;for(Nt=W+1;Nt<=ue-1;Nt++)Wt=Fn(u[Nt],u[W],u[ue],!0),Wt>Pe&&(ut=Nt,Pe=Wt);Pe>P&&(y[ut]=1,F(u,y,P,W,ut),F(u,y,P,ut,ue))}function xe(u,y){for(var P=[u[0]],W=1,ue=0,Pe=u.length;W<Pe;W++)hn(u[W],u[ue])>y&&(P.push(u[W]),ue=W);return ue<Pe-1&&P.push(u[Pe-1]),P}var tt;function ft(u,y,P,W,ue){var Pe=W?tt:Ht(u,P),ut=Ht(y,P),Nt,Wt,ln;for(tt=ut;;){if(!(Pe|ut))return[u,y];if(Pe&ut)return!1;Nt=Pe||ut,Wt=Mt(u,y,Nt,P,ue),ln=Ht(Wt,P),Nt===Pe?(u=Wt,Pe=ln):(y=Wt,ut=ln)}}function Mt(u,y,P,W,ue){var Pe=y.x-u.x,ut=y.y-u.y,Nt=W.min,Wt=W.max,ln,jn;return P&8?(ln=u.x+Pe*(Wt.y-u.y)/ut,jn=Wt.y):P&4?(ln=u.x+Pe*(Nt.y-u.y)/ut,jn=Nt.y):P&2?(ln=Wt.x,jn=u.y+ut*(Wt.x-u.x)/Pe):P&1&&(ln=Nt.x,jn=u.y+ut*(Nt.x-u.x)/Pe),new G(ln,jn,ue)}function Ht(u,y){var P=0;return u.x<y.min.x?P|=1:u.x>y.max.x&&(P|=2),u.y<y.min.y?P|=4:u.y>y.max.y&&(P|=8),P}function hn(u,y){var P=y.x-u.x,W=y.y-u.y;return P*P+W*W}function Fn(u,y,P,W){var ue=y.x,Pe=y.y,ut=P.x-ue,Nt=P.y-Pe,Wt=ut*ut+Nt*Nt,ln;return Wt>0&&(ln=((u.x-ue)*ut+(u.y-Pe)*Nt)/Wt,ln>1?(ue=P.x,Pe=P.y):ln>0&&(ue+=ut*ln,Pe+=Nt*ln)),ut=u.x-ue,Nt=u.y-Pe,W?ut*ut+Nt*Nt:new G(ue,Pe)}function Hn(u){return!z(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function cr(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Hn(u)}function Er(u,y){var P,W,ue,Pe,ut,Nt,Wt,ln;if(!u||u.length===0)throw new Error("latlngs not passed");Hn(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var jn=de([0,0]),ir=Z(u),Hr=ir.getNorthWest().distanceTo(ir.getSouthWest())*ir.getNorthEast().distanceTo(ir.getNorthWest());Hr<1700&&(jn=Rl(u));var Ts=u.length,ds=[];for(P=0;P<Ts;P++){var Xs=de(u[P]);ds.push(y.project(de([Xs.lat-jn.lat,Xs.lng-jn.lng])))}for(P=0,W=0;P<Ts-1;P++)W+=ds[P].distanceTo(ds[P+1])/2;if(W===0)ln=ds[0];else for(P=0,Pe=0;P<Ts-1;P++)if(ut=ds[P],Nt=ds[P+1],ue=ut.distanceTo(Nt),Pe+=ue,Pe>W){Wt=(Pe-W)/ue,ln=[Nt.x-Wt*(Nt.x-ut.x),Nt.y-Wt*(Nt.y-ut.y)];break}var ns=y.unproject(ve(ln));return de([ns.lat+jn.lat,ns.lng+jn.lng])}var Yr={__proto__:null,simplify:Ei,pointToSegmentDistance:ra,closestPointOnSegment:Za,clipSegment:ft,_getEdgeIntersection:Mt,_getBitCode:Ht,_sqClosestPointOnSegment:Fn,isFlat:Hn,_flat:cr,polylineCenter:Er},Yi={project:function(u){return new G(u.lng,u.lat)},unproject:function(u){return new oe(u.y,u.x)},bounds:new qe([-180,-90],[180,90])},_i={R:6378137,R_MINOR:6356752314245179e-9,bounds:new qe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var y=Math.PI/180,P=this.R,W=u.lat*y,ue=this.R_MINOR/P,Pe=Math.sqrt(1-ue*ue),ut=Pe*Math.sin(W),Nt=Math.tan(Math.PI/4-W/2)/Math.pow((1-ut)/(1+ut),Pe/2);return W=-P*Math.log(Math.max(Nt,1e-10)),new G(u.lng*y*P,W)},unproject:function(u){for(var y=180/Math.PI,P=this.R,W=this.R_MINOR/P,ue=Math.sqrt(1-W*W),Pe=Math.exp(-u.y/P),ut=Math.PI/2-2*Math.atan(Pe),Nt=0,Wt=.1,ln;Nt<15&&Math.abs(Wt)>1e-7;Nt++)ln=ue*Math.sin(ut),ln=Math.pow((1-ln)/(1+ln),ue/2),Wt=Math.PI/2-2*Math.atan(Pe*ln)-ut,ut+=Wt;return new oe(ut*y,u.x*y/P)}},Pi={__proto__:null,LonLat:Yi,Mercator:_i,SphericalMercator:Ae},xs=i({},he,{code:"EPSG:3395",projection:_i,transformation:function(){var u=.5/(Math.PI*_i.R);return Xe(u,.5,-u,.5)}()}),Ms=i({},he,{code:"EPSG:4326",projection:Yi,transformation:Xe(1/180,1,-1/180,.5)}),ia=i({},ye,{projection:Yi,transformation:Xe(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,y){var P=y.lng-u.lng,W=y.lat-u.lat;return Math.sqrt(P*P+W*W)},infinite:!0});ye.Earth=he,ye.EPSG3395=xs,ye.EPSG3857=fe,ye.EPSG900913=ee,ye.EPSG4326=Ms,ye.Simple=ia;var Kr=Q.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[l(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[l(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var y=u.target;if(y.hasLayer(this)){if(this._map=y,this._zoomAnimated=y._zoomAnimated,this.getEvents){var P=this.getEvents();y.on(P,this),this.once("remove",function(){y.off(P,this)},this)}this.onAdd(y),this.fire("add"),y.fire("layeradd",{layer:this})}}});oi.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var y=l(u);return this._layers[y]?this:(this._layers[y]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var y=l(u);return this._layers[y]?(this._loaded&&u.onRemove(this),delete this._layers[y],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return l(u)in this._layers},eachLayer:function(u,y){for(var P in this._layers)u.call(y,this._layers[P]);return this},_addLayers:function(u){u=u?z(u)?u:[u]:[];for(var y=0,P=u.length;y<P;y++)this.addLayer(u[y])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[l(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var y=l(u);this._zoomBoundLayers[y]&&(delete this._zoomBoundLayers[y],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,y=-1/0,P=this._getZoomSpan();for(var W in this._zoomBoundLayers){var ue=this._zoomBoundLayers[W].options;u=ue.minZoom===void 0?u:Math.min(u,ue.minZoom),y=ue.maxZoom===void 0?y:Math.max(y,ue.maxZoom)}this._layersMaxZoom=y===-1/0?void 0:y,this._layersMinZoom=u===1/0?void 0:u,P!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ao=Kr.extend({initialize:function(u,y){E(this,y),this._layers={};var P,W;if(u)for(P=0,W=u.length;P<W;P++)this.addLayer(u[P])},addLayer:function(u){var y=this.getLayerId(u);return this._layers[y]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var y=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[y]&&this._map.removeLayer(this._layers[y]),delete this._layers[y],this},hasLayer:function(u){var y=typeof u=="number"?u:this.getLayerId(u);return y in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var y=Array.prototype.slice.call(arguments,1),P,W;for(P in this._layers)W=this._layers[P],W[u]&&W[u].apply(W,y);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,y){for(var P in this._layers)u.call(y,this._layers[P]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return l(u)}}),jl=function(u,y){return new ao(u,y)},So=ao.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),ao.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),ao.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new K;for(var y in this._layers){var P=this._layers[y];u.extend(P.getBounds?P.getBounds():P.getLatLng())}return u}}),Du=function(u,y){return new So(u,y)},Ia=$.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){E(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,y){var P=this._getIconUrl(u);if(!P){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var W=this._createImg(P,y&&y.tagName==="IMG"?y:null);return this._setIconStyles(W,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(W.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),W},_setIconStyles:function(u,y){var P=this.options,W=P[y+"Size"];typeof W=="number"&&(W=[W,W]);var ue=ve(W),Pe=ve(y==="shadow"&&P.shadowAnchor||P.iconAnchor||ue&&ue.divideBy(2,!0));u.className="leaflet-marker-"+y+" "+(P.className||""),Pe&&(u.style.marginLeft=-Pe.x+"px",u.style.marginTop=-Pe.y+"px"),ue&&(u.style.width=ue.x+"px",u.style.height=ue.y+"px")},_createImg:function(u,y){return y=y||document.createElement("img"),y.src=u,y},_getIconUrl:function(u){return Ze.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function Qu(u){return new Ia(u)}var xl=Ia.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof xl.imagePath!="string"&&(xl.imagePath=this._detectIconPath()),(this.options.imagePath||xl.imagePath)+Ia.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var y=function(P,W,ue){var Pe=W.exec(P);return Pe&&Pe[ue]};return u=y(u,/^url\((['"])?(.+)\1\)$/,2),u&&y(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=ur("div","leaflet-default-icon-path",document.body),y=Vr(u,"background-image")||Vr(u,"backgroundImage");if(document.body.removeChild(u),y=this._stripUrl(y),y)return y;var P=document.querySelector('link[href$="leaflet.css"]');return P?P.href.substring(0,P.href.length-11-1):""}}),Ll=Ci.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new wa(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Cr(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Pn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var y=this._marker,P=y._map,W=this._marker.options.autoPanSpeed,ue=this._marker.options.autoPanPadding,Pe=Ps(y._icon),ut=P.getPixelBounds(),Nt=P.getPixelOrigin(),Wt=re(ut.min._subtract(Nt).add(ue),ut.max._subtract(Nt).subtract(ue));if(!Wt.contains(Pe)){var ln=ve((Math.max(Wt.max.x,Pe.x)-Wt.max.x)/(ut.max.x-Wt.max.x)-(Math.min(Wt.min.x,Pe.x)-Wt.min.x)/(ut.min.x-Wt.min.x),(Math.max(Wt.max.y,Pe.y)-Wt.max.y)/(ut.max.y-Wt.max.y)-(Math.min(Wt.min.y,Pe.y)-Wt.min.y)/(ut.min.y-Wt.min.y)).multiplyBy(W);P.panBy(ln,{animate:!1}),this._draggable._newPos._add(ln),this._draggable._startPos._add(ln),Si(y._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=U(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(R(this._panRequest),this._panRequest=U(this._adjustPan.bind(this,u)))},_onDrag:function(u){var y=this._marker,P=y._shadow,W=Ps(y._icon),ue=y._map.layerPointToLatLng(W);P&&Si(P,W),y._latlng=ue,u.latlng=ue,u.oldLatLng=this._oldLatLng,y.fire("move",u).fire("drag",u)},_onDragEnd:function(u){R(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),ks=Kr.extend({options:{icon:new xl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,y){E(this,y),this._latlng=de(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var y=this._latlng;return this._latlng=de(u),this.update(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,y="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),P=u.icon.createIcon(this._icon),W=!1;P!==this._icon&&(this._icon&&this._removeIcon(),W=!0,u.title&&(P.title=u.title),P.tagName==="IMG"&&(P.alt=u.alt||"")),Cr(P,y),u.keyboard&&(P.tabIndex="0",P.setAttribute("role","button")),this._icon=P,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Mr(P,"focus",this._panOnFocus,this);var ue=u.icon.createShadow(this._shadow),Pe=!1;ue!==this._shadow&&(this._removeShadow(),Pe=!0),ue&&(Cr(ue,y),ue.alt=""),this._shadow=ue,u.opacity<1&&this._updateOpacity(),W&&this.getPane().appendChild(this._icon),this._initInteraction(),ue&&Pe&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&qr(this._icon,"focus",this._panOnFocus,this),Un(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Un(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&Si(this._icon,u),this._shadow&&Si(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(y)},_initInteraction:function(){if(this.options.interactive&&(Cr(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ll)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ll(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&Ur(this._icon,u),this._shadow&&Ur(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var y=this.options.icon.options,P=y.iconSize?ve(y.iconSize):ve(0,0),W=y.iconAnchor?ve(y.iconAnchor):ve(0,0);u.panInside(this._latlng,{paddingTopLeft:W,paddingBottomRight:P.subtract(W)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ba(u,y){return new ks(u,y)}var sa=Kr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return E(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Vo=sa.extend({options:{fill:!0,radius:10},initialize:function(u,y){E(this,y),this._latlng=de(u),this._radius=this.options.radius},setLatLng:function(u){var y=this._latlng;return this._latlng=de(u),this.redraw(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var y=u&&u.radius||this._radius;return sa.prototype.setStyle.call(this,u),this.setRadius(y),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,y=this._radiusY||u,P=this._clickTolerance(),W=[u+P,y+P];this._pxBounds=new qe(this._point.subtract(W),this._point.add(W))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function zl(u,y){return new Vo(u,y)}var lo=Vo.extend({initialize:function(u,y,P){if(typeof y=="number"&&(y=i({},P,{radius:y})),E(this,y),this._latlng=de(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new K(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:sa.prototype.setStyle,_project:function(){var u=this._latlng.lng,y=this._latlng.lat,P=this._map,W=P.options.crs;if(W.distance===he.distance){var ue=Math.PI/180,Pe=this._mRadius/he.R/ue,ut=P.project([y+Pe,u]),Nt=P.project([y-Pe,u]),Wt=ut.add(Nt).divideBy(2),ln=P.unproject(Wt).lat,jn=Math.acos((Math.cos(Pe*ue)-Math.sin(y*ue)*Math.sin(ln*ue))/(Math.cos(y*ue)*Math.cos(ln*ue)))/ue;(isNaN(jn)||jn===0)&&(jn=Pe/Math.cos(Math.PI/180*y)),this._point=Wt.subtract(P.getPixelOrigin()),this._radius=isNaN(jn)?0:Wt.x-P.project([ln,u-jn]).x,this._radiusY=Wt.y-ut.y}else{var ir=W.unproject(W.project(this._latlng).subtract([this._mRadius,0]));this._point=P.latLngToLayerPoint(this._latlng),this._radius=this._point.x-P.latLngToLayerPoint(ir).x}this._updateBounds()}});function Co(u,y,P){return new lo(u,y,P)}var Eo=sa.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,y){E(this,y),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var y=1/0,P=null,W=Fn,ue,Pe,ut=0,Nt=this._parts.length;ut<Nt;ut++)for(var Wt=this._parts[ut],ln=1,jn=Wt.length;ln<jn;ln++){ue=Wt[ln-1],Pe=Wt[ln];var ir=W(u,ue,Pe,!0);ir<y&&(y=ir,P=W(u,ue,Pe))}return P&&(P.distance=Math.sqrt(y)),P},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Er(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,y){return y=y||this._defaultShape(),u=de(u),y.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new K,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return Hn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var y=[],P=Hn(u),W=0,ue=u.length;W<ue;W++)P?(y[W]=de(u[W]),this._bounds.extend(y[W])):y[W]=this._convertLatLngs(u[W]);return y},_project:function(){var u=new qe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),y=new G(u,u);this._rawPxBounds&&(this._pxBounds=new qe([this._rawPxBounds.min.subtract(y),this._rawPxBounds.max.add(y)]))},_projectLatlngs:function(u,y,P){var W=u[0]instanceof oe,ue=u.length,Pe,ut;if(W){for(ut=[],Pe=0;Pe<ue;Pe++)ut[Pe]=this._map.latLngToLayerPoint(u[Pe]),P.extend(ut[Pe]);y.push(ut)}else for(Pe=0;Pe<ue;Pe++)this._projectLatlngs(u[Pe],y,P)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var y=this._parts,P,W,ue,Pe,ut,Nt,Wt;for(P=0,ue=0,Pe=this._rings.length;P<Pe;P++)for(Wt=this._rings[P],W=0,ut=Wt.length;W<ut-1;W++)Nt=ft(Wt[W],Wt[W+1],u,W,!0),Nt&&(y[ue]=y[ue]||[],y[ue].push(Nt[0]),(Nt[1]!==Wt[W+1]||W===ut-2)&&(y[ue].push(Nt[1]),ue++))}},_simplifyPoints:function(){for(var u=this._parts,y=this.options.smoothFactor,P=0,W=u.length;P<W;P++)u[P]=Ei(u[P],y)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,y){var P,W,ue,Pe,ut,Nt,Wt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(P=0,Pe=this._parts.length;P<Pe;P++)for(Nt=this._parts[P],W=0,ut=Nt.length,ue=ut-1;W<ut;ue=W++)if(!(!y&&W===0)&&ra(u,Nt[ue],Nt[W])<=Wt)return!0;return!1}});function Ac(u,y){return new Eo(u,y)}Eo._flat=cr;var zs=Eo.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return xa(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var y=Eo.prototype._convertLatLngs.call(this,u),P=y.length;return P>=2&&y[0]instanceof oe&&y[0].equals(y[P-1])&&y.pop(),y},_setLatLngs:function(u){Eo.prototype._setLatLngs.call(this,u),Hn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Hn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,y=this.options.weight,P=new G(y,y);if(u=new qe(u.min.subtract(P),u.max.add(P)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var W=0,ue=this._rings.length,Pe;W<ue;W++)Pe=pu(this._rings[W],u,!0),Pe.length&&this._parts.push(Pe)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var y=!1,P,W,ue,Pe,ut,Nt,Wt,ln;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(Pe=0,Wt=this._parts.length;Pe<Wt;Pe++)for(P=this._parts[Pe],ut=0,ln=P.length,Nt=ln-1;ut<ln;Nt=ut++)W=P[ut],ue=P[Nt],W.y>u.y!=ue.y>u.y&&u.x<(ue.x-W.x)*(u.y-W.y)/(ue.y-W.y)+W.x&&(y=!y);return y||Eo.prototype._containsPoint.call(this,u,!0)}});function Xa(u,y){return new zs(u,y)}var uo=So.extend({initialize:function(u,y){E(this,y),this._layers={},u&&this.addData(u)},addData:function(u){var y=z(u)?u:u.features,P,W,ue;if(y){for(P=0,W=y.length;P<W;P++)ue=y[P],(ue.geometries||ue.geometry||ue.features||ue.coordinates)&&this.addData(ue);return this}var Pe=this.options;if(Pe.filter&&!Pe.filter(u))return this;var ut=co(u,Pe);return ut?(ut.feature=fo(u),ut.defaultOptions=ut.options,this.resetStyle(ut),Pe.onEachFeature&&Pe.onEachFeature(u,ut),this.addLayer(ut)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=i({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(y){this._setLayerStyle(y,u)},this)},_setLayerStyle:function(u,y){u.setStyle&&(typeof y=="function"&&(y=y(u.feature)),u.setStyle(y))}});function co(u,y){var P=u.type==="Feature"?u.geometry:u,W=P?P.coordinates:null,ue=[],Pe=y&&y.pointToLayer,ut=y&&y.coordsToLatLng||Qa,Nt,Wt,ln,jn;if(!W&&!P)return null;switch(P.type){case"Point":return Nt=ut(W),Ja(Pe,u,Nt,y);case"MultiPoint":for(ln=0,jn=W.length;ln<jn;ln++)Nt=ut(W[ln]),ue.push(Ja(Pe,u,Nt,y));return new So(ue);case"LineString":case"MultiLineString":return Wt=ho(W,P.type==="LineString"?0:1,ut),new Eo(Wt,y);case"Polygon":case"MultiPolygon":return Wt=ho(W,P.type==="Polygon"?1:2,ut),new zs(Wt,y);case"GeometryCollection":for(ln=0,jn=P.geometries.length;ln<jn;ln++){var ir=co({geometry:P.geometries[ln],type:"Feature",properties:u.properties},y);ir&&ue.push(ir)}return new So(ue);case"FeatureCollection":for(ln=0,jn=P.features.length;ln<jn;ln++){var Hr=co(P.features[ln],y);Hr&&ue.push(Hr)}return new So(ue);default:throw new Error("Invalid GeoJSON object.")}}function Ja(u,y,P,W){return u?u(y,P):new ks(P,W&&W.markersInheritOptions&&W)}function Qa(u){return new oe(u[1],u[0],u[2])}function ho(u,y,P){for(var W=[],ue=0,Pe=u.length,ut;ue<Pe;ue++)ut=y?ho(u[ue],y-1,P):(P||Qa)(u[ue]),W.push(ut);return W}function qs(u,y){return u=de(u),u.alt!==void 0?[v(u.lng,y),v(u.lat,y),v(u.alt,y)]:[v(u.lng,y),v(u.lat,y)]}function Ra(u,y,P,W){for(var ue=[],Pe=0,ut=u.length;Pe<ut;Pe++)ue.push(y?Ra(u[Pe],Hn(u[Pe])?0:y-1,P,W):qs(u[Pe],W));return!y&&P&&ue.length>0&&ue.push(ue[0].slice()),ue}function oa(u,y){return u.feature?i({},u.feature,{geometry:y}):fo(y)}function fo(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var St={toGeoJSON:function(u){return oa(this,{type:"Point",coordinates:qs(this.getLatLng(),u)})}};ks.include(St),lo.include(St),Vo.include(St),Eo.include({toGeoJSON:function(u){var y=!Hn(this._latlngs),P=Ra(this._latlngs,y?1:0,!1,u);return oa(this,{type:(y?"Multi":"")+"LineString",coordinates:P})}}),zs.include({toGeoJSON:function(u){var y=!Hn(this._latlngs),P=y&&!Hn(this._latlngs[0]),W=Ra(this._latlngs,P?2:y?1:0,!0,u);return y||(W=[W]),oa(this,{type:(P?"Multi":"")+"Polygon",coordinates:W})}}),ao.include({toMultiPoint:function(u){var y=[];return this.eachLayer(function(P){y.push(P.toGeoJSON(u).geometry.coordinates)}),oa(this,{type:"MultiPoint",coordinates:y})},toGeoJSON:function(u){var y=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(y==="MultiPoint")return this.toMultiPoint(u);var P=y==="GeometryCollection",W=[];return this.eachLayer(function(ue){if(ue.toGeoJSON){var Pe=ue.toGeoJSON(u);if(P)W.push(Pe.geometry);else{var ut=fo(Pe);ut.type==="FeatureCollection"?W.push.apply(W,ut.features):W.push(ut)}}}),P?oa(this,{geometries:W,type:"GeometryCollection"}):{type:"FeatureCollection",features:W}}});function Yt(u,y){return new uo(u,y)}var Ot=Yt,Bn=Kr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,y,P){this._url=u,this._bounds=Z(y),E(this,P)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Cr(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Un(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&kr(this._image),this},bringToBack:function(){return this._map&&br(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=Z(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",y=this._image=u?this._url:ur("img");if(Cr(y,"leaflet-image-layer"),this._zoomAnimated&&Cr(y,"leaflet-zoom-animated"),this.options.className&&Cr(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onload=o(this.fire,this,"load"),y.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=y.src;return}y.src=this._url,y.alt=this.options.alt},_animateZoom:function(u){var y=this._map.getZoomScale(u.zoom),P=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;ms(this._image,P,y)},_reset:function(){var u=this._image,y=new qe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),P=y.getSize();Si(u,y.min),u.style.width=P.x+"px",u.style.height=P.y+"px"},_updateOpacity:function(){Ur(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),nr=function(u,y,P){return new Bn(u,y,P)},Ar=Bn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",y=this._image=u?this._url:ur("video");if(Cr(y,"leaflet-image-layer"),this._zoomAnimated&&Cr(y,"leaflet-zoom-animated"),this.options.className&&Cr(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onloadeddata=o(this.fire,this,"load"),u){for(var P=y.getElementsByTagName("source"),W=[],ue=0;ue<P.length;ue++)W.push(P[ue].src);this._url=P.length>0?W:[y.src];return}z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(y.style,"objectFit")&&(y.style.objectFit="fill"),y.autoplay=!!this.options.autoplay,y.loop=!!this.options.loop,y.muted=!!this.options.muted,y.playsInline=!!this.options.playsInline;for(var Pe=0;Pe<this._url.length;Pe++){var ut=ur("source");ut.src=this._url[Pe],y.appendChild(ut)}}});function es(u,y,P){return new Ar(u,y,P)}var Mi=Bn.extend({_initImage:function(){var u=this._image=this._url;Cr(u,"leaflet-image-layer"),this._zoomAnimated&&Cr(u,"leaflet-zoom-animated"),this.options.className&&Cr(u,this.options.className),u.onselectstart=p,u.onmousemove=p}});function gu(u,y,P){return new Mi(u,y,P)}var Po=Kr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,y){u&&(u instanceof oe||z(u))?(this._latlng=de(u),E(this,y)):(E(this,u),this._source=y),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&Ur(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&Ur(this._container,1),this.bringToFront(),this.options.interactive&&(Cr(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(Ur(this._container,0),this._removeTimeout=setTimeout(o(Un,void 0,this._container),200)):Un(this._container),this.options.interactive&&(Pn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=de(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&kr(this._container),this},bringToBack:function(){return this._map&&br(this._container),this},_prepareOpen:function(u){var y=this._source;if(!y._map)return!1;if(y instanceof So){y=null;var P=this._source._layers;for(var W in P)if(P[W]._map){y=P[W];break}if(!y)return!1;this._source=y}if(!u)if(y.getCenter)u=y.getCenter();else if(y.getLatLng)u=y.getLatLng();else if(y.getBounds)u=y.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,y=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof y=="string")u.innerHTML=y;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(y)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),y=ve(this.options.offset),P=this._getAnchor();this._zoomAnimated?Si(this._container,u.add(P)):y=y.add(u).add(P);var W=this._containerBottom=-y.y,ue=this._containerLeft=-Math.round(this._containerWidth/2)+y.x;this._container.style.bottom=W+"px",this._container.style.left=ue+"px"}},_getAnchor:function(){return[0,0]}});oi.include({_initOverlay:function(u,y,P,W){var ue=y;return ue instanceof u||(ue=new u(W).setContent(y)),P&&ue.setLatLng(P),ue}}),Kr.include({_initOverlay:function(u,y,P,W){var ue=P;return ue instanceof u?(E(ue,W),ue._source=this):(ue=y&&!W?y:new u(W,this),ue.setContent(P)),ue}});var ts=Po.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,Po.prototype.openOn.call(this,u)},onAdd:function(u){Po.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof sa||this._source.on("preclick",_a))},onRemove:function(u){Po.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof sa||this._source.off("preclick",_a))},getEvents:function(){var u=Po.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",y=this._container=ur("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),P=this._wrapper=ur("div",u+"-content-wrapper",y);if(this._contentNode=ur("div",u+"-content",P),Da(y),uu(this._contentNode),Mr(y,"contextmenu",_a),this._tipContainer=ur("div",u+"-tip-container",y),this._tip=ur("div",u+"-tip",this._tipContainer),this.options.closeButton){var W=this._closeButton=ur("a",u+"-close-button",y);W.setAttribute("role","button"),W.setAttribute("aria-label","Close popup"),W.href="#close",W.innerHTML='<span aria-hidden="true">&#215;</span>',Mr(W,"click",function(ue){Lr(ue),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,y=u.style;y.width="",y.whiteSpace="nowrap";var P=u.offsetWidth;P=Math.min(P,this.options.maxWidth),P=Math.max(P,this.options.minWidth),y.width=P+1+"px",y.whiteSpace="",y.height="";var W=u.offsetHeight,ue=this.options.maxHeight,Pe="leaflet-popup-scrolled";ue&&W>ue?(y.height=ue+"px",Cr(u,Pe)):Pn(u,Pe),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),P=this._getAnchor();Si(this._container,y.add(P))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,y=parseInt(Vr(this._container,"marginBottom"),10)||0,P=this._container.offsetHeight+y,W=this._containerWidth,ue=new G(this._containerLeft,-P-this._containerBottom);ue._add(Ps(this._container));var Pe=u.layerPointToContainerPoint(ue),ut=ve(this.options.autoPanPadding),Nt=ve(this.options.autoPanPaddingTopLeft||ut),Wt=ve(this.options.autoPanPaddingBottomRight||ut),ln=u.getSize(),jn=0,ir=0;Pe.x+W+Wt.x>ln.x&&(jn=Pe.x+W-ln.x+Wt.x),Pe.x-jn-Nt.x<0&&(jn=Pe.x-Nt.x),Pe.y+P+Wt.y>ln.y&&(ir=Pe.y+P-ln.y+Wt.y),Pe.y-ir-Nt.y<0&&(ir=Pe.y-Nt.y),(jn||ir)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([jn,ir]))}},_getAnchor:function(){return ve(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Fa=function(u,y){return new ts(u,y)};oi.mergeOptions({closePopupOnClick:!0}),oi.include({openPopup:function(u,y,P){return this._initOverlay(ts,u,y,P).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),Kr.include({bindPopup:function(u,y){return this._popup=this._initOverlay(ts,this._popup,u,y),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof So||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){jr(u);var y=u.layer||u.target;if(this._popup._source===y&&!(y instanceof sa)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=y,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var el=Po.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){Po.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){Po.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=Po.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",y=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ur("div",y),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var y,P,W=this._map,ue=this._container,Pe=W.latLngToContainerPoint(W.getCenter()),ut=W.layerPointToContainerPoint(u),Nt=this.options.direction,Wt=ue.offsetWidth,ln=ue.offsetHeight,jn=ve(this.options.offset),ir=this._getAnchor();Nt==="top"?(y=Wt/2,P=ln):Nt==="bottom"?(y=Wt/2,P=0):Nt==="center"?(y=Wt/2,P=ln/2):Nt==="right"?(y=0,P=ln/2):Nt==="left"?(y=Wt,P=ln/2):ut.x<Pe.x?(Nt="right",y=0,P=ln/2):(Nt="left",y=Wt+(jn.x+ir.x)*2,P=ln/2),u=u.subtract(ve(y,P,!0)).add(jn).add(ir),Pn(ue,"leaflet-tooltip-right"),Pn(ue,"leaflet-tooltip-left"),Pn(ue,"leaflet-tooltip-top"),Pn(ue,"leaflet-tooltip-bottom"),Cr(ue,"leaflet-tooltip-"+Nt),Si(ue,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&Ur(this._container,u)},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(y)},_getAnchor:function(){return ve(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ja=function(u,y){return new el(u,y)};oi.include({openTooltip:function(u,y,P){return this._initOverlay(el,u,y,P).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),Kr.include({bindTooltip:function(u,y){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(el,this._tooltip,u,y),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var y=u?"off":"on",P={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?P.add=this._openTooltip:(P.mouseover=this._openTooltip,P.mouseout=this.closeTooltip,P.click=this._openTooltip,this._map?this._addFocusListeners():P.add=this._addFocusListeners),this._tooltip.options.sticky&&(P.mousemove=this._moveTooltip),this[y](P),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof So||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var y=typeof u.getElement=="function"&&u.getElement();y&&(Mr(y,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),Mr(y,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var y=typeof u.getElement=="function"&&u.getElement();y&&y.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var y=this;this._map.once("moveend",function(){y._openOnceFlag=!1,y._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var y=u.latlng,P,W;this._tooltip.options.sticky&&u.originalEvent&&(P=this._map.mouseEventToContainerPoint(u.originalEvent),W=this._map.containerPointToLayerPoint(P),y=this._map.layerPointToLatLng(W)),this._tooltip.setLatLng(y)}});var za=Ia.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var y=u&&u.tagName==="DIV"?u:document.createElement("div"),P=this.options;if(P.html instanceof Element?(Ni(y),y.appendChild(P.html)):y.innerHTML=P.html!==!1?P.html:"",P.bgPos){var W=ve(P.bgPos);y.style.backgroundPosition=-W.x+"px "+-W.y+"px"}return this._setIconStyles(y,"icon"),y},createShadow:function(){return null}});function $a(u){return new za(u)}Ia.Default=xl;var ai=Kr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ze.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){E(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),Un(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(kr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(br(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof G?u:new G(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var y=this.getPane().children,P=-u(-1/0,1/0),W=0,ue=y.length,Pe;W<ue;W++)Pe=y[W].style.zIndex,y[W]!==this._container&&Pe&&(P=u(P,+Pe));isFinite(P)&&(this.options.zIndex=P+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ze.ielt9){Ur(this._container,this.options.opacity);var u=+new Date,y=!1,P=!1;for(var W in this._tiles){var ue=this._tiles[W];if(!(!ue.current||!ue.loaded)){var Pe=Math.min(1,(u-ue.loaded)/200);Ur(ue.el,Pe),Pe<1?y=!0:(ue.active?P=!0:this._onOpaqueTile(ue),ue.active=!0)}}P&&!this._noPrune&&this._pruneTiles(),y&&(R(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=ur("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,y=this.options.maxZoom;if(u!==void 0){for(var P in this._levels)P=Number(P),this._levels[P].el.children.length||P===u?(this._levels[P].el.style.zIndex=y-Math.abs(u-P),this._onUpdateLevel(P)):(Un(this._levels[P].el),this._removeTilesAtZoom(P),this._onRemoveLevel(P),delete this._levels[P]);var W=this._levels[u],ue=this._map;return W||(W=this._levels[u]={},W.el=ur("div","leaflet-tile-container leaflet-zoom-animated",this._container),W.el.style.zIndex=y,W.origin=ue.project(ue.unproject(ue.getPixelOrigin()),u).round(),W.zoom=u,this._setZoomTransform(W,ue.getCenter(),ue.getZoom()),p(W.el.offsetWidth),this._onCreateLevel(W)),this._level=W,W}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var u,y,P=this._map.getZoom();if(P>this.options.maxZoom||P<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)y=this._tiles[u],y.retain=y.current;for(u in this._tiles)if(y=this._tiles[u],y.current&&!y.active){var W=y.coords;this._retainParent(W.x,W.y,W.z,W.z-5)||this._retainChildren(W.x,W.y,W.z,W.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var y in this._tiles)this._tiles[y].coords.z===u&&this._removeTile(y)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)Un(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,y,P,W){var ue=Math.floor(u/2),Pe=Math.floor(y/2),ut=P-1,Nt=new G(+ue,+Pe);Nt.z=+ut;var Wt=this._tileCoordsToKey(Nt),ln=this._tiles[Wt];return ln&&ln.active?(ln.retain=!0,!0):(ln&&ln.loaded&&(ln.retain=!0),ut>W?this._retainParent(ue,Pe,ut,W):!1)},_retainChildren:function(u,y,P,W){for(var ue=2*u;ue<2*u+2;ue++)for(var Pe=2*y;Pe<2*y+2;Pe++){var ut=new G(ue,Pe);ut.z=P+1;var Nt=this._tileCoordsToKey(ut),Wt=this._tiles[Nt];if(Wt&&Wt.active){Wt.retain=!0;continue}else Wt&&Wt.loaded&&(Wt.retain=!0);P+1<W&&this._retainChildren(ue,Pe,P+1,W)}},_resetView:function(u){var y=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),y,y)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var y=this.options;return y.minNativeZoom!==void 0&&u<y.minNativeZoom?y.minNativeZoom:y.maxNativeZoom!==void 0&&y.maxNativeZoom<u?y.maxNativeZoom:u},_setView:function(u,y,P,W){var ue=Math.round(y);this.options.maxZoom!==void 0&&ue>this.options.maxZoom||this.options.minZoom!==void 0&&ue<this.options.minZoom?ue=void 0:ue=this._clampZoom(ue);var Pe=this.options.updateWhenZooming&&ue!==this._tileZoom;(!W||Pe)&&(this._tileZoom=ue,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ue!==void 0&&this._update(u),P||this._pruneTiles(),this._noPrune=!!P),this._setZoomTransforms(u,y)},_setZoomTransforms:function(u,y){for(var P in this._levels)this._setZoomTransform(this._levels[P],u,y)},_setZoomTransform:function(u,y,P){var W=this._map.getZoomScale(P,u.zoom),ue=u.origin.multiplyBy(W).subtract(this._map._getNewPixelOrigin(y,P)).round();Ze.any3d?ms(u.el,ue,W):Si(u.el,ue)},_resetGrid:function(){var u=this._map,y=u.options.crs,P=this._tileSize=this.getTileSize(),W=this._tileZoom,ue=this._map.getPixelWorldBounds(this._tileZoom);ue&&(this._globalTileRange=this._pxBoundsToTileRange(ue)),this._wrapX=y.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,y.wrapLng[0]],W).x/P.x),Math.ceil(u.project([0,y.wrapLng[1]],W).x/P.y)],this._wrapY=y.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([y.wrapLat[0],0],W).y/P.x),Math.ceil(u.project([y.wrapLat[1],0],W).y/P.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var y=this._map,P=y._animatingZoom?Math.max(y._animateToZoom,y.getZoom()):y.getZoom(),W=y.getZoomScale(P,this._tileZoom),ue=y.project(u,this._tileZoom).floor(),Pe=y.getSize().divideBy(W*2);return new qe(ue.subtract(Pe),ue.add(Pe))},_update:function(u){var y=this._map;if(y){var P=this._clampZoom(y.getZoom());if(u===void 0&&(u=y.getCenter()),this._tileZoom!==void 0){var W=this._getTiledPixelBounds(u),ue=this._pxBoundsToTileRange(W),Pe=ue.getCenter(),ut=[],Nt=this.options.keepBuffer,Wt=new qe(ue.getBottomLeft().subtract([Nt,-Nt]),ue.getTopRight().add([Nt,-Nt]));if(!(isFinite(ue.min.x)&&isFinite(ue.min.y)&&isFinite(ue.max.x)&&isFinite(ue.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ln in this._tiles){var jn=this._tiles[ln].coords;(jn.z!==this._tileZoom||!Wt.contains(new G(jn.x,jn.y)))&&(this._tiles[ln].current=!1)}if(Math.abs(P-this._tileZoom)>1){this._setView(u,P);return}for(var ir=ue.min.y;ir<=ue.max.y;ir++)for(var Hr=ue.min.x;Hr<=ue.max.x;Hr++){var Ts=new G(Hr,ir);if(Ts.z=this._tileZoom,!!this._isValidTile(Ts)){var ds=this._tiles[this._tileCoordsToKey(Ts)];ds?ds.current=!0:ut.push(Ts)}}if(ut.sort(function(ns,Wo){return ns.distanceTo(Pe)-Wo.distanceTo(Pe)}),ut.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Xs=document.createDocumentFragment();for(Hr=0;Hr<ut.length;Hr++)this._addTile(ut[Hr],Xs);this._level.el.appendChild(Xs)}}}},_isValidTile:function(u){var y=this._map.options.crs;if(!y.infinite){var P=this._globalTileRange;if(!y.wrapLng&&(u.x<P.min.x||u.x>P.max.x)||!y.wrapLat&&(u.y<P.min.y||u.y>P.max.y))return!1}if(!this.options.bounds)return!0;var W=this._tileCoordsToBounds(u);return Z(this.options.bounds).overlaps(W)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var y=this._map,P=this.getTileSize(),W=u.scaleBy(P),ue=W.add(P),Pe=y.unproject(W,u.z),ut=y.unproject(ue,u.z);return[Pe,ut]},_tileCoordsToBounds:function(u){var y=this._tileCoordsToNwSe(u),P=new K(y[0],y[1]);return this.options.noWrap||(P=this._map.wrapLatLngBounds(P)),P},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var y=u.split(":"),P=new G(+y[0],+y[1]);return P.z=+y[2],P},_removeTile:function(u){var y=this._tiles[u];y&&(Un(y.el),delete this._tiles[u],this.fire("tileunload",{tile:y.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){Cr(u,"leaflet-tile");var y=this.getTileSize();u.style.width=y.x+"px",u.style.height=y.y+"px",u.onselectstart=p,u.onmousemove=p,Ze.ielt9&&this.options.opacity<1&&Ur(u,this.options.opacity)},_addTile:function(u,y){var P=this._getTilePos(u),W=this._tileCoordsToKey(u),ue=this.createTile(this._wrapCoords(u),o(this._tileReady,this,u));this._initTile(ue),this.createTile.length<2&&U(o(this._tileReady,this,u,null,ue)),Si(ue,P),this._tiles[W]={el:ue,coords:u,current:!0},y.appendChild(ue),this.fire("tileloadstart",{tile:ue,coords:u})},_tileReady:function(u,y,P){y&&this.fire("tileerror",{error:y,tile:P,coords:u});var W=this._tileCoordsToKey(u);P=this._tiles[W],P&&(P.loaded=+new Date,this._map._fadeAnimated?(Ur(P.el,0),R(this._fadeFrame),this._fadeFrame=U(this._updateOpacity,this)):(P.active=!0,this._pruneTiles()),y||(Cr(P.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:P.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ze.ielt9||!this._map._fadeAnimated?U(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var y=new G(this._wrapX?h(u.x,this._wrapX):u.x,this._wrapY?h(u.y,this._wrapY):u.y);return y.z=u.z,y},_pxBoundsToTileRange:function(u){var y=this.getTileSize();return new qe(u.min.unscaleBy(y).floor(),u.max.unscaleBy(y).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function La(u){return new ai(u)}var Ys=ai.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,y){this._url=u,y=E(this,y),y.detectRetina&&Ze.retina&&y.maxZoom>0?(y.tileSize=Math.floor(y.tileSize/2),y.zoomReverse?(y.zoomOffset--,y.minZoom=Math.min(y.maxZoom,y.minZoom+1)):(y.zoomOffset++,y.maxZoom=Math.max(y.minZoom,y.maxZoom-1)),y.minZoom=Math.max(0,y.minZoom)):y.zoomReverse?y.minZoom=Math.min(y.maxZoom,y.minZoom):y.maxZoom=Math.max(y.minZoom,y.maxZoom),typeof y.subdomains=="string"&&(y.subdomains=y.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,y){return this._url===u&&y===void 0&&(y=!0),this._url=u,y||this.redraw(),this},createTile:function(u,y){var P=document.createElement("img");return Mr(P,"load",o(this._tileOnLoad,this,y,P)),Mr(P,"error",o(this._tileOnError,this,y,P)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(P.referrerPolicy=this.options.referrerPolicy),P.alt="",P.src=this.getTileUrl(u),P},getTileUrl:function(u){var y={r:Ze.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var P=this._globalTileRange.max.y-u.y;this.options.tms&&(y.y=P),y["-y"]=P}return A(this._url,i(y,this.options))},_tileOnLoad:function(u,y){Ze.ielt9?setTimeout(o(u,this,null,y),0):u(null,y)},_tileOnError:function(u,y,P){var W=this.options.errorTileUrl;W&&y.getAttribute("src")!==W&&(y.src=W),u(P,y)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,y=this.options.maxZoom,P=this.options.zoomReverse,W=this.options.zoomOffset;return P&&(u=y-u),u+W},_getSubdomain:function(u){var y=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[y]},_abortLoading:function(){var u,y;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(y=this._tiles[u].el,y.onload=p,y.onerror=p,!y.complete)){y.src=ne;var P=this._tiles[u].coords;Un(y),delete this._tiles[u],this.fire("tileabort",{tile:y,coords:P})}},_removeTile:function(u){var y=this._tiles[u];if(y)return y.el.setAttribute("src",ne),ai.prototype._removeTile.call(this,u)},_tileReady:function(u,y,P){if(!(!this._map||P&&P.getAttribute("src")===ne))return ai.prototype._tileReady.call(this,u,y,P)}});function ki(u,y){return new Ys(u,y)}var Fi=Ys.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,y){this._url=u;var P=i({},this.defaultWmsParams);for(var W in y)W in this.options||(P[W]=y[W]);y=E(this,y);var ue=y.detectRetina&&Ze.retina?2:1,Pe=this.getTileSize();P.width=Pe.x*ue,P.height=Pe.y*ue,this.wmsParams=P},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var y=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[y]=this._crs.code,Ys.prototype.onAdd.call(this,u)},getTileUrl:function(u){var y=this._tileCoordsToNwSe(u),P=this._crs,W=re(P.project(y[0]),P.project(y[1])),ue=W.min,Pe=W.max,ut=(this._wmsVersion>=1.3&&this._crs===Ms?[ue.y,ue.x,Pe.y,Pe.x]:[ue.x,ue.y,Pe.x,Pe.y]).join(","),Nt=Ys.prototype.getTileUrl.call(this,u);return Nt+D(this.wmsParams,Nt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ut},setParams:function(u,y){return i(this.wmsParams,u),y||this.redraw(),this}});function Ls(u,y){return new Fi(u,y)}Ys.WMS=Fi,ki.wms=Ls;var Wi=Kr.extend({options:{padding:.1},initialize:function(u){E(this,u),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Cr(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,y){var P=this._map.getZoomScale(y,this._zoom),W=this._map.getSize().multiplyBy(.5+this.options.padding),ue=this._map.project(this._center,y),Pe=W.multiplyBy(-P).add(ue).subtract(this._map._getNewPixelOrigin(u,y));Ze.any3d?ms(this._container,Pe,P):Si(this._container,Pe)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,y=this._map.getSize(),P=this._map.containerPointToLayerPoint(y.multiplyBy(-u)).round();this._bounds=new qe(P,P.add(y.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),aa=Wi.extend({options:{tolerance:0},getEvents:function(){var u=Wi.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Wi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");Mr(u,"mousemove",this._onMouseMove,this),Mr(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Mr(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){R(this._redrawRequest),delete this._ctx,Un(this._container),qr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var y in this._layers)u=this._layers[y],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Wi.prototype._update.call(this);var u=this._bounds,y=this._container,P=u.getSize(),W=Ze.retina?2:1;Si(y,u.min),y.width=W*P.x,y.height=W*P.y,y.style.width=P.x+"px",y.style.height=P.y+"px",Ze.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){Wi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[l(u)]=u;var y=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=y),this._drawLast=y,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var y=u._order,P=y.next,W=y.prev;P?P.prev=W:this._drawLast=W,W?W.next=P:this._drawFirst=P,delete u._order,delete this._layers[l(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var y=u.options.dashArray.split(/[, ]+/),P=[],W,ue;for(ue=0;ue<y.length;ue++){if(W=Number(y[ue]),isNaN(W))return;P.push(W)}u.options._dashArray=P}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||U(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var y=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new qe,this._redrawBounds.extend(u._pxBounds.min.subtract([y,y])),this._redrawBounds.extend(u._pxBounds.max.add([y,y]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var y=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,y.x,y.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,y=this._redrawBounds;if(this._ctx.save(),y){var P=y.getSize();this._ctx.beginPath(),this._ctx.rect(y.min.x,y.min.y,P.x,P.y),this._ctx.clip()}this._drawing=!0;for(var W=this._drawFirst;W;W=W.next)u=W.layer,(!y||u._pxBounds&&u._pxBounds.intersects(y))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,y){if(this._drawing){var P,W,ue,Pe,ut=u._parts,Nt=ut.length,Wt=this._ctx;if(Nt){for(Wt.beginPath(),P=0;P<Nt;P++){for(W=0,ue=ut[P].length;W<ue;W++)Pe=ut[P][W],Wt[W?"lineTo":"moveTo"](Pe.x,Pe.y);y&&Wt.closePath()}this._fillStroke(Wt,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var y=u._point,P=this._ctx,W=Math.max(Math.round(u._radius),1),ue=(Math.max(Math.round(u._radiusY),1)||W)/W;ue!==1&&(P.save(),P.scale(1,ue)),P.beginPath(),P.arc(y.x,y.y/ue,W,0,Math.PI*2,!1),ue!==1&&P.restore(),this._fillStroke(P,u)}},_fillStroke:function(u,y){var P=y.options;P.fill&&(u.globalAlpha=P.fillOpacity,u.fillStyle=P.fillColor||P.color,u.fill(P.fillRule||"evenodd")),P.stroke&&P.weight!==0&&(u.setLineDash&&u.setLineDash(y.options&&y.options._dashArray||[]),u.globalAlpha=P.opacity,u.lineWidth=P.weight,u.strokeStyle=P.color,u.lineCap=P.lineCap,u.lineJoin=P.lineJoin,u.stroke())},_onClick:function(u){for(var y=this._map.mouseEventToLayerPoint(u),P,W,ue=this._drawFirst;ue;ue=ue.next)P=ue.layer,P.options.interactive&&P._containsPoint(y)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(P))&&(W=P);this._fireEvent(W?[W]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var y=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,y)}},_handleMouseOut:function(u){var y=this._hoveredLayer;y&&(Pn(this._container,"leaflet-interactive"),this._fireEvent([y],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,y){if(!this._mouseHoverThrottled){for(var P,W,ue=this._drawFirst;ue;ue=ue.next)P=ue.layer,P.options.interactive&&P._containsPoint(y)&&(W=P);W!==this._hoveredLayer&&(this._handleMouseOut(u),W&&(Cr(this._container,"leaflet-interactive"),this._fireEvent([W],u,"mouseover"),this._hoveredLayer=W)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,y,P){this._map._fireDOMEvent(y,P||y.type,u)},_bringToFront:function(u){var y=u._order;if(y){var P=y.next,W=y.prev;if(P)P.prev=W;else return;W?W.next=P:P&&(this._drawFirst=P),y.prev=this._drawLast,this._drawLast.next=y,y.next=null,this._drawLast=y,this._requestRedraw(u)}},_bringToBack:function(u){var y=u._order;if(y){var P=y.next,W=y.prev;if(W)W.next=P;else return;P?P.prev=W:W&&(this._drawLast=W),y.prev=null,y.next=this._drawFirst,this._drawFirst.prev=y,this._drawFirst=y,this._requestRedraw(u)}}});function Uo(u){return Ze.canvas?new aa(u):null}var ha=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ec={_initContainer:function(){this._container=ur("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Wi.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var y=u._container=ha("shape");Cr(y,"leaflet-vml-shape "+(this.options.className||"")),y.coordsize="1 1",u._path=ha("path"),y.appendChild(u._path),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){var y=u._container;this._container.appendChild(y),u.options.interactive&&u.addInteractiveTarget(y)},_removePath:function(u){var y=u._container;Un(y),u.removeInteractiveTarget(y),delete this._layers[l(u)]},_updateStyle:function(u){var y=u._stroke,P=u._fill,W=u.options,ue=u._container;ue.stroked=!!W.stroke,ue.filled=!!W.fill,W.stroke?(y||(y=u._stroke=ha("stroke")),ue.appendChild(y),y.weight=W.weight+"px",y.color=W.color,y.opacity=W.opacity,W.dashArray?y.dashStyle=z(W.dashArray)?W.dashArray.join(" "):W.dashArray.replace(/( *, *)/g," "):y.dashStyle="",y.endcap=W.lineCap.replace("butt","flat"),y.joinstyle=W.lineJoin):y&&(ue.removeChild(y),u._stroke=null),W.fill?(P||(P=u._fill=ha("fill")),ue.appendChild(P),P.color=W.fillColor||W.color,P.opacity=W.fillOpacity):P&&(ue.removeChild(P),u._fill=null)},_updateCircle:function(u){var y=u._point.round(),P=Math.round(u._radius),W=Math.round(u._radiusY||P);this._setPath(u,u._empty()?"M0 0":"AL "+y.x+","+y.y+" "+P+","+W+" 0,"+65535*360)},_setPath:function(u,y){u._path.v=y},_bringToFront:function(u){kr(u._container)},_bringToBack:function(u){br(u._container)}},Va=Ze.vml?ha:se,As=Wi.extend({_initContainer:function(){this._container=Va("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Va("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Un(this._container),qr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Wi.prototype._update.call(this);var u=this._bounds,y=u.getSize(),P=this._container;(!this._svgSize||!this._svgSize.equals(y))&&(this._svgSize=y,P.setAttribute("width",y.x),P.setAttribute("height",y.y)),Si(P,u.min),P.setAttribute("viewBox",[u.min.x,u.min.y,y.x,y.y].join(" ")),this.fire("update")}},_initPath:function(u){var y=u._path=Va("path");u.options.className&&Cr(y,u.options.className),u.options.interactive&&Cr(y,"leaflet-interactive"),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){Un(u._path),u.removeInteractiveTarget(u._path),delete this._layers[l(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var y=u._path,P=u.options;y&&(P.stroke?(y.setAttribute("stroke",P.color),y.setAttribute("stroke-opacity",P.opacity),y.setAttribute("stroke-width",P.weight),y.setAttribute("stroke-linecap",P.lineCap),y.setAttribute("stroke-linejoin",P.lineJoin),P.dashArray?y.setAttribute("stroke-dasharray",P.dashArray):y.removeAttribute("stroke-dasharray"),P.dashOffset?y.setAttribute("stroke-dashoffset",P.dashOffset):y.removeAttribute("stroke-dashoffset")):y.setAttribute("stroke","none"),P.fill?(y.setAttribute("fill",P.fillColor||P.color),y.setAttribute("fill-opacity",P.fillOpacity),y.setAttribute("fill-rule",P.fillRule||"evenodd")):y.setAttribute("fill","none"))},_updatePoly:function(u,y){this._setPath(u,le(u._parts,y))},_updateCircle:function(u){var y=u._point,P=Math.max(Math.round(u._radius),1),W=Math.max(Math.round(u._radiusY),1)||P,ue="a"+P+","+W+" 0 1,0 ",Pe=u._empty()?"M0 0":"M"+(y.x-P)+","+y.y+ue+P*2+",0 "+ue+-P*2+",0 ";this._setPath(u,Pe)},_setPath:function(u,y){u._path.setAttribute("d",y)},_bringToFront:function(u){kr(u._path)},_bringToBack:function(u){br(u._path)}});Ze.vml&&As.include(ec);function Ui(u){return Ze.svg||Ze.vml?new As(u):null}oi.include({getRenderer:function(u){var y=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return y||(y=this._renderer=this._createRenderer()),this.hasLayer(y)||this.addLayer(y),y},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var y=this._paneRenderers[u];return y===void 0&&(y=this._createRenderer({pane:u}),this._paneRenderers[u]=y),y},_createRenderer:function(u){return this.options.preferCanvas&&Uo(u)||Ui(u)}});var po=zs.extend({initialize:function(u,y){zs.prototype.initialize.call(this,this._boundsToLatLngs(u),y)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=Z(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function Ho(u,y){return new po(u,y)}As.create=Va,As.pointsToPath=le,uo.geometryToLayer=co,uo.coordsToLatLng=Qa,uo.coordsToLatLngs=ho,uo.latLngToCoords=qs,uo.latLngsToCoords=Ra,uo.getFeature=oa,uo.asFeature=fo,oi.mergeOptions({boxZoom:!0});var wr=Ci.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){Mr(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){qr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Un(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Wr(),bi(),this._startPoint=this._map.mouseEventToContainerPoint(u),Mr(document,{contextmenu:jr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=ur("div","leaflet-zoom-box",this._container),Cr(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var y=new qe(this._point,this._startPoint),P=y.getSize();Si(this._box,y.min),this._box.style.width=P.x+"px",this._box.style.height=P.y+"px"},_finish:function(){this._moved&&(Un(this._box),Pn(this._container,"leaflet-crosshair")),js(),Sn(),qr(document,{contextmenu:jr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var y=new K(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(y).fire("boxzoomend",{boxZoomBounds:y})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});oi.addInitHook("addHandler","boxZoom",wr),oi.mergeOptions({doubleClickZoom:!0});var tl=Ci.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var y=this._map,P=y.getZoom(),W=y.options.zoomDelta,ue=u.originalEvent.shiftKey?P-W:P+W;y.options.doubleClickZoom==="center"?y.setZoom(ue):y.setZoomAround(u.containerPoint,ue)}});oi.addInitHook("addHandler","doubleClickZoom",tl),oi.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var nl=Ci.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new wa(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}Cr(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Pn(this._map._container,"leaflet-grab"),Pn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var y=Z(this._map.options.maxBounds);this._offsetLimit=re(this._map.latLngToContainerPoint(y.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(y.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var y=this._lastTime=+new Date,P=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(P),this._times.push(y),this._prunePositions(y)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),y=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=y.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,y){return u-(u-y)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),y=this._offsetLimit;u.x<y.min.x&&(u.x=this._viscousLimit(u.x,y.min.x)),u.y<y.min.y&&(u.y=this._viscousLimit(u.y,y.min.y)),u.x>y.max.x&&(u.x=this._viscousLimit(u.x,y.max.x)),u.y>y.max.y&&(u.y=this._viscousLimit(u.y,y.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,y=Math.round(u/2),P=this._initialWorldOffset,W=this._draggable._newPos.x,ue=(W-y+P)%u+y-P,Pe=(W+y+P)%u-y-P,ut=Math.abs(ue+P)<Math.abs(Pe+P)?ue:Pe;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ut},_onDragEnd:function(u){var y=this._map,P=y.options,W=!P.inertia||u.noInertia||this._times.length<2;if(y.fire("dragend",u),W)y.fire("moveend");else{this._prunePositions(+new Date);var ue=this._lastPos.subtract(this._positions[0]),Pe=(this._lastTime-this._times[0])/1e3,ut=P.easeLinearity,Nt=ue.multiplyBy(ut/Pe),Wt=Nt.distanceTo([0,0]),ln=Math.min(P.inertiaMaxSpeed,Wt),jn=Nt.multiplyBy(ln/Wt),ir=ln/(P.inertiaDeceleration*ut),Hr=jn.multiplyBy(-ir/2).round();!Hr.x&&!Hr.y?y.fire("moveend"):(Hr=y._limitOffset(Hr,y.options.maxBounds),U(function(){y.panBy(Hr,{duration:ir,easeLinearity:ut,noMoveStart:!0,animate:!0})}))}}});oi.addInitHook("addHandler","dragging",nl),oi.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Sa=Ci.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),Mr(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),qr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,y=document.documentElement,P=u.scrollTop||y.scrollTop,W=u.scrollLeft||y.scrollLeft;this._map._container.focus(),window.scrollTo(W,P)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var y=this._panKeys={},P=this.keyCodes,W,ue;for(W=0,ue=P.left.length;W<ue;W++)y[P.left[W]]=[-1*u,0];for(W=0,ue=P.right.length;W<ue;W++)y[P.right[W]]=[u,0];for(W=0,ue=P.down.length;W<ue;W++)y[P.down[W]]=[0,u];for(W=0,ue=P.up.length;W<ue;W++)y[P.up[W]]=[0,-1*u]},_setZoomDelta:function(u){var y=this._zoomKeys={},P=this.keyCodes,W,ue;for(W=0,ue=P.zoomIn.length;W<ue;W++)y[P.zoomIn[W]]=u;for(W=0,ue=P.zoomOut.length;W<ue;W++)y[P.zoomOut[W]]=-u},_addHooks:function(){Mr(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){qr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var y=u.keyCode,P=this._map,W;if(y in this._panKeys){if(!P._panAnim||!P._panAnim._inProgress)if(W=this._panKeys[y],u.shiftKey&&(W=ve(W).multiplyBy(3)),P.options.maxBounds&&(W=P._limitOffset(ve(W),P.options.maxBounds)),P.options.worldCopyJump){var ue=P.wrapLatLng(P.unproject(P.project(P.getCenter()).add(W)));P.panTo(ue)}else P.panBy(W)}else if(y in this._zoomKeys)P.setZoom(P.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[y]);else if(y===27&&P._popup&&P._popup.options.closeOnEscapeKey)P.closePopup();else return;jr(u)}}});oi.addInitHook("addHandler","keyboard",Sa),oi.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Mo=Ci.extend({addHooks:function(){Mr(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){qr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var y=Ws(u),P=this._map.options.wheelDebounceTime;this._delta+=y,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var W=Math.max(P-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),W),jr(u)},_performZoom:function(){var u=this._map,y=u.getZoom(),P=this._map.options.zoomSnap||0;u._stop();var W=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ue=4*Math.log(2/(1+Math.exp(-Math.abs(W))))/Math.LN2,Pe=P?Math.ceil(ue/P)*P:ue,ut=u._limitZoom(y+(this._delta>0?Pe:-Pe))-y;this._delta=0,this._startTime=null,ut&&(u.options.scrollWheelZoom==="center"?u.setZoom(y+ut):u.setZoomAround(this._lastMousePos,y+ut))}});oi.addInitHook("addHandler","scrollWheelZoom",Mo);var sd=600;oi.mergeOptions({tapHold:Ze.touchNative&&Ze.safari&&Ze.mobile,tapTolerance:15});var Ks=Ci.extend({addHooks:function(){Mr(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){qr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var y=u.touches[0];this._startPos=this._newPos=new G(y.clientX,y.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Mr(document,"touchend",Lr),Mr(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",y))},this),sd),Mr(document,"touchend touchcancel contextmenu",this._cancel,this),Mr(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){qr(document,"touchend",Lr),qr(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),qr(document,"touchend touchcancel contextmenu",this._cancel,this),qr(document,"touchmove",this._onMove,this)},_onMove:function(u){var y=u.touches[0];this._newPos=new G(y.clientX,y.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,y){var P=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:y.screenX,screenY:y.screenY,clientX:y.clientX,clientY:y.clientY});P._simulated=!0,y.target.dispatchEvent(P)}});oi.addInitHook("addHandler","tapHold",Ks),oi.mergeOptions({touchZoom:Ze.touch,bounceAtZoomLimits:!0});var Zs=Ci.extend({addHooks:function(){Cr(this._map._container,"leaflet-touch-zoom"),Mr(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Pn(this._map._container,"leaflet-touch-zoom"),qr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var y=this._map;if(!(!u.touches||u.touches.length!==2||y._animatingZoom||this._zooming)){var P=y.mouseEventToContainerPoint(u.touches[0]),W=y.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=y.getSize()._divideBy(2),this._startLatLng=y.containerPointToLatLng(this._centerPoint),y.options.touchZoom!=="center"&&(this._pinchStartLatLng=y.containerPointToLatLng(P.add(W)._divideBy(2))),this._startDist=P.distanceTo(W),this._startZoom=y.getZoom(),this._moved=!1,this._zooming=!0,y._stop(),Mr(document,"touchmove",this._onTouchMove,this),Mr(document,"touchend touchcancel",this._onTouchEnd,this),Lr(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var y=this._map,P=y.mouseEventToContainerPoint(u.touches[0]),W=y.mouseEventToContainerPoint(u.touches[1]),ue=P.distanceTo(W)/this._startDist;if(this._zoom=y.getScaleZoom(ue,this._startZoom),!y.options.bounceAtZoomLimits&&(this._zoom<y.getMinZoom()&&ue<1||this._zoom>y.getMaxZoom()&&ue>1)&&(this._zoom=y._limitZoom(this._zoom)),y.options.touchZoom==="center"){if(this._center=this._startLatLng,ue===1)return}else{var Pe=P._add(W)._divideBy(2)._subtract(this._centerPoint);if(ue===1&&Pe.x===0&&Pe.y===0)return;this._center=y.unproject(y.project(this._pinchStartLatLng,this._zoom).subtract(Pe),this._zoom)}this._moved||(y._moveStart(!0,!1),this._moved=!0),R(this._animRequest);var ut=o(y._move,y,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=U(ut,this,!0),Lr(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,R(this._animRequest),qr(document,"touchmove",this._onTouchMove,this),qr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});oi.addInitHook("addHandler","touchZoom",Zs),oi.BoxZoom=wr,oi.DoubleClickZoom=tl,oi.Drag=nl,oi.Keyboard=Sa,oi.ScrollWheelZoom=Mo,oi.TapHold=Ks,oi.TouchZoom=Zs,n.Bounds=qe,n.Browser=Ze,n.CRS=ye,n.Canvas=aa,n.Circle=lo,n.CircleMarker=Vo,n.Class=$,n.Control=hr,n.DivIcon=za,n.DivOverlay=Po,n.DomEvent=cu,n.DomUtil=vr,n.Draggable=wa,n.Evented=Q,n.FeatureGroup=So,n.GeoJSON=uo,n.GridLayer=ai,n.Handler=Ci,n.Icon=Ia,n.ImageOverlay=Bn,n.LatLng=oe,n.LatLngBounds=K,n.Layer=Kr,n.LayerGroup=ao,n.LineUtil=Yr,n.Map=oi,n.Marker=ks,n.Mixin=kc,n.Path=sa,n.Point=G,n.PolyUtil=Fl,n.Polygon=zs,n.Polyline=Eo,n.Popup=ts,n.PosAnimation=Au,n.Projection=Pi,n.Rectangle=po,n.Renderer=Wi,n.SVG=As,n.SVGOverlay=Mi,n.TileLayer=Ys,n.Tooltip=el,n.Transformation=De,n.Util=V,n.VideoOverlay=Ar,n.bind=o,n.bounds=re,n.canvas=Uo,n.circle=Co,n.circleMarker=zl,n.control=_s,n.divIcon=$a,n.extend=i,n.featureGroup=Du,n.geoJSON=Yt,n.geoJson=Ot,n.gridLayer=La,n.icon=Qu,n.imageOverlay=nr,n.latLng=de,n.latLngBounds=Z,n.layerGroup=jl,n.map=bs,n.marker=Ba,n.point=ve,n.polygon=Xa,n.polyline=Ac,n.popup=Fa,n.rectangle=Ho,n.setOptions=E,n.stamp=l,n.svg=Ui,n.svgOverlay=gu,n.tileLayer=ki,n.tooltip=ja,n.transformation=Xe,n.version=r,n.videoOverlay=es;var Ca=window.L;n.noConflict=function(){return window.L=Ca,this},window.L=n})})(pb,pb.exports);var Vt=pb.exports;const Zn=B_(Vt);var J4={exports:{}};(function(t,e){(function(n,r){r(e)})(Aa,function(n){var r=typeof window<"u"?window:typeof Aa<"u"?Aa:typeof self<"u"?self:{};function i(c,h){return c(h={exports:{}},h.exports),h.exports}var s=i(function(c,h){(function(p){const v={escape:function(B){return B.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:g,mimeType:function(B){return B=g(B).toLowerCase(),function(){var I="application/font-woff",Q="image/jpeg";return{woff:I,woff2:I,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Q,jpeg:Q,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[B]||""},dataAsUrl:function(B,I){return`data:${I};base64,`+B},isDataUrl:function(B){return B.search(/^(data:)/)!==-1},canvasToBlob:function(B){return B.toBlob?new Promise(function(Q){B.toBlob(Q)}):(I=B,new Promise(function(Q){const G=pe(I.toDataURL().split(",")[1]);var _e=G.length;const ve=new Uint8Array(_e);for(let qe=0;qe<_e;qe++)ve[qe]=G.charCodeAt(qe);Q(new Blob([ve],{type:"image/png"}))}));var I},resolveUrl:function(B,I){const Q=document.implementation.createHTMLDocument(),G=Q.createElement("base"),_e=(Q.head.appendChild(G),Q.createElement("a"));return Q.body.appendChild(_e),G.href=I,_e.href=B,_e.href},getAndEncode:function(B){let I=ne.impl.urlCache.find(function(Q){return Q.url===B});return I||(I={url:B,promise:null},ne.impl.urlCache.push(I)),I.promise===null&&(ne.impl.options.cacheBust&&(B+=(/\?/.test(B)?"&":"?")+new Date().getTime()),I.promise=new Promise(function(Q){const G=ne.impl.options.httpTimeout,_e=new XMLHttpRequest;let ve;var qe;function re(K){console.error(K),Q("")}_e.onreadystatechange=function(){if(_e.readyState===4)if(_e.status!==200)ve?Q(ve):re(`cannot fetch resource: ${B}, status: `+_e.status);else{const K=new FileReader;K.onloadend=function(){var Z=K.result.split(/,/)[1];Q(Z)},K.readAsDataURL(_e.response)}},_e.ontimeout=function(){ve?Q(ve):re(`timeout of ${G}ms occured while fetching resource: `+B)},_e.responseType="blob",_e.timeout=G,ne.impl.options.useCredentials&&(_e.withCredentials=!0),_e.open("GET",B,!0),_e.send(),ne.impl.options.imagePlaceholder&&(qe=ne.impl.options.imagePlaceholder.split(/,/))&&qe[1]&&(ve=qe[1])})),I.promise},uid:function(){let B=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+B++}}(),delay:function(B){return function(I){return new Promise(function(Q){setTimeout(function(){Q(I)},B)})}},asArray:function(B){const I=[],Q=B.length;for(let G=0;G<Q;G++)I.push(B[G]);return I},escapeXhtml:function(B){return B.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(B){return B!=="data:,"?new Promise(function(I,Q){const G=new Image;ne.impl.options.useCredentials&&(G.crossOrigin="use-credentials"),G.onload=function(){I(G)},G.onerror=Q,G.src=B}):Promise.resolve()},width:function(B){var I=x(B,"border-left-width"),Q=x(B,"border-right-width");return B.scrollWidth+I+Q},height:function(B){var I=x(B,"border-top-width"),Q=x(B,"border-bottom-width");return B.scrollHeight+I+Q}};function g(B){return(B=/\.([^\.\/]*?)(\?|$)/g.exec(B))?B[1]:""}function x(B,I){const Q=ge(B).getPropertyValue(I);return parseFloat(Q.replace("px",""))}const E=function(){const B=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(_e,ve,qe){return I(_e)?Promise.resolve(_e).then(Q).then(function(re){let K=Promise.resolve(_e);return re.forEach(function(Z){K=K.then(function(oe){return G(oe,Z,ve,qe)})}),K}):Promise.resolve(_e)},shouldProcess:I,impl:{readUrls:Q,inline:G}};function I(_e){return _e.search(B)!==-1}function Q(_e){const ve=[];for(var qe;(qe=B.exec(_e))!==null;)ve.push(qe[1]);return ve.filter(function(re){return!v.isDataUrl(re)})}function G(_e,ve,qe,re){return Promise.resolve(ve).then(function(K){return qe?v.resolveUrl(K,qe):K}).then(re||v.getAndEncode).then(function(K){return v.dataAsUrl(K,v.mimeType(ve))}).then(function(K){return _e.replace((Z=ve,new RegExp(`(url\\(['"]?)(${v.escape(Z)})(['"]?\\))`,"g")),`$1${K}$3`);var Z})}}(),D={resolveAll:function(){return M().then(function(B){return Promise.all(B.map(function(I){return I.resolve()}))}).then(function(B){return B.join(`
`)})},impl:{readAll:M}};function M(){return Promise.resolve(v.asArray(document.styleSheets)).then(function(I){const Q=[];return I.forEach(function(G){if(Object.getPrototypeOf(G).hasOwnProperty("cssRules"))try{v.asArray(G.cssRules||[]).forEach(Q.push.bind(Q))}catch(_e){console.log("Error while reading CSS rules from "+G.href,_e.toString())}}),Q}).then(function(I){return I.filter(function(Q){return Q.type===CSSRule.FONT_FACE_RULE}).filter(function(Q){return E.shouldProcess(Q.style.getPropertyValue("src"))})}).then(function(I){return I.map(B)});function B(I){return{resolve:function(){var Q=(I.parentStyleSheet||{}).href;return E.inlineAll(I.cssText,Q)},src:function(){return I.style.getPropertyValue("src")}}}}const A={inlineAll:function B(I){return I instanceof Element?function(Q){const G=Q.style.getPropertyValue("background");return G?E.inlineAll(G).then(function(_e){Q.style.setProperty("background",_e,G)}).then(function(){return Q}):Promise.resolve(Q)}(I).then(function(){return I instanceof HTMLImageElement?z(I).inline():Promise.all(v.asArray(I.childNodes).map(function(Q){return B(Q)}))}):Promise.resolve(I)},impl:{newImage:z}};function z(B){return{inline:function(I){return v.isDataUrl(B.src)?Promise.resolve():Promise.resolve(B.src).then(I||v.getAndEncode).then(function(Q){return v.dataAsUrl(Q,v.mimeType(B.src))}).then(function(Q){return new Promise(function(G){B.onload=G,B.onerror=G,B.src=Q})})}}}const Y={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},ne={toSvg:O,toPng:function(B,I){return(I=I||{}).raster=!0,j(B,I).then(function(Q){return Q.toDataURL()})},toJpeg:function(B,I){return(I=I||{}).raster=!0,j(B,I).then(function(Q){return Q.toDataURL("image/jpeg",I.quality||1)})},toBlob:function(B,I){return(I=I||{}).raster=!0,j(B,I).then(v.canvasToBlob)},toPixelData:function(B,I){return(I=I||{}).raster=!0,j(B,I).then(function(Q){return Q.getContext("2d").getImageData(0,0,v.width(B),v.height(B)).data})},toCanvas:function(B,I){return(I=I||{}).raster=!0,j(B,I||{})},impl:{fontFaces:D,images:A,util:v,inliner:E,urlCache:[],options:{}}},ge=(c.exports=ne,p.getComputedStyle||window.getComputedStyle),pe=p.atob||window.atob;function O(B,I){var Q=I=I||{};return Q.imagePlaceholder===void 0?ne.impl.options.imagePlaceholder=Y.imagePlaceholder:ne.impl.options.imagePlaceholder=Q.imagePlaceholder,Q.cacheBust===void 0?ne.impl.options.cacheBust=Y.cacheBust:ne.impl.options.cacheBust=Q.cacheBust,Q.useCredentials===void 0?ne.impl.options.useCredentials=Y.useCredentials:ne.impl.options.useCredentials=Q.useCredentials,Promise.resolve(B).then(function(G){return function _e(ve,qe,re,K,Z=null){return re||!qe||qe(ve)?Promise.resolve(ve).then(function(oe){return oe instanceof HTMLCanvasElement?v.makeImage(oe.toDataURL()):oe.nodeName==="IFRAME"?html2canvas(oe.contentDocument.body).then(de=>de.toDataURL()).then(v.makeImage):oe.cloneNode(!1)}).then(function(oe){return function(de,ye){const he=de.childNodes;return he.length===0?Promise.resolve(ye):function(X,Ae){const De=ge(de);let Xe=Promise.resolve();return Ae.forEach(function(fe){Xe=Xe.then(function(){return _e(fe,qe,!1,K,De)}).then(function(ee){ee&&X.appendChild(ee)})}),Xe}(ye,v.asArray(he)).then(function(){return ye})}(ve,oe)}).then(function(oe){return function(de,ye,he){return ye instanceof Element?Promise.resolve().then(function(){(function(X,Ae){const De=ge(X);De.cssText?(Ae.style.cssText=De.cssText,function(Xe,fe){fe.font=Xe.font,fe.fontFamily=Xe.fontFamily,fe.fontFeatureSettings=Xe.fontFeatureSettings,fe.fontKerning=Xe.fontKerning,fe.fontSize=Xe.fontSize,fe.fontStretch=Xe.fontStretch,fe.fontStyle=Xe.fontStyle,fe.fontVariant=Xe.fontVariant,fe.fontVariantCaps=Xe.fontVariantCaps,fe.fontVariantEastAsian=Xe.fontVariantEastAsian,fe.fontVariantLigatures=Xe.fontVariantLigatures,fe.fontVariantNumeric=Xe.fontVariantNumeric,fe.fontVariationSettings=Xe.fontVariationSettings,fe.fontWeight=Xe.fontWeight}(De,Ae.style)):(he?function(Xe,fe,ee,se){const le=ee.style,je=Xe.style;for(var $e of fe){var et=fe.getPropertyValue($e),Ee=je.getPropertyValue($e),me=(je.setProperty($e,se?"initial":"unset"),fe.getPropertyValue($e));me!==et?le.setProperty($e,et):le.removeProperty($e),je.setProperty($e,Ee)}}(X,De,Ae,re):function(Xe,fe,ee){const se=function(je){if($[je])return $[je];V||((V=document.createElement("iframe")).style.visibility="hidden",V.style.position="fixed",document.body.appendChild(V),V.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const $e=document.createElement(je),et=(V.contentWindow.document.body.appendChild($e),$e.textContent=".",V.contentWindow.getComputedStyle($e)),Ee={};return v.asArray(et).forEach(function(me){Ee[me]=me==="width"||me==="height"?"auto":et.getPropertyValue(me)}),V.contentWindow.document.body.removeChild($e),$[je]=Ee}(ee.tagName),le=ee.style;v.asArray(Xe).forEach(function(je){var $e=Xe.getPropertyValue(je);($e!==se[je]||fe&&$e!==fe.getPropertyValue(je))&&le.setProperty(je,$e,Xe.getPropertyPriority(je))})}(De,Z,Ae),re&&(["inset-block","inset-block-start","inset-block-end"].forEach(Xe=>Ae.style.removeProperty(Xe)),["left","right","top","bottom"].forEach(Xe=>{Ae.style.getPropertyValue(Xe)&&Ae.style.setProperty(Xe,"0px")})))})(de,ye)}).then(function(){[":before",":after"].forEach(function(X){(function(Ae){const De=ge(de,Ae),Xe=De.getPropertyValue("content");if(Xe!==""&&Xe!=="none"){const fe=v.uid(),ee=ye.getAttribute("class"),se=(ee&&ye.setAttribute("class",ee+" "+fe),document.createElement("style"));se.appendChild(function(){const le=`.${fe}:`+Ae,je=(De.cssText?function(){return`${De.cssText} content: ${De.getPropertyValue("content")};`}:function(){return v.asArray(De).map(function($e){return $e+": "+De.getPropertyValue($e)+(De.getPropertyPriority($e)?" !important":"")}).join("; ")+";"})();return document.createTextNode(le+`{${je}}`)}()),ye.appendChild(se)}})(X)})}).then(function(){de instanceof HTMLTextAreaElement&&(ye.innerHTML=de.value),de instanceof HTMLInputElement&&ye.setAttribute("value",de.value)}).then(function(){ye instanceof SVGElement&&(ye.setAttribute("xmlns","http://www.w3.org/2000/svg"),ye instanceof SVGRectElement&&["width","height"].forEach(function(X){const Ae=ye.getAttribute(X);Ae&&ye.style.setProperty(X,Ae)}))}).then(function(){return ye}):ye}(ve,oe,K)}):Promise.resolve()}(G,I.filter,!0,!I.raster)}).then(J).then(U).then(function(G){I.bgcolor&&(G.style.backgroundColor=I.bgcolor),I.width&&(G.style.width=I.width+"px"),I.height&&(G.style.height=I.height+"px"),I.style&&Object.keys(I.style).forEach(function(ve){G.style[ve]=I.style[ve]});let _e=null;return typeof I.onclone=="function"&&(_e=I.onclone(G)),Promise.resolve(_e).then(function(){return G})}).then(function(G){return G=G,_e=I.width||v.width(B),ve=I.height||v.height(B),Promise.resolve(G).then(function(qe){return qe.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(qe)}).then(v.escapeXhtml).then(function(qe){return`<foreignObject x="0" y="0" width="100%" height="100%">${qe}</foreignObject>`}).then(function(qe){return`<svg xmlns="http://www.w3.org/2000/svg" width="${_e}" height="${ve}">${qe}</svg>`}).then(function(qe){return"data:image/svg+xml;charset=utf-8,"+qe});var _e,ve}).then(function(G){return ne.impl.urlCache=[],G})}function j(B,I){return O(B,I).then(v.makeImage).then(v.delay(0)).then(function(Q){var G=typeof I.scale!="number"?1:I.scale;const _e=function(qe,re){const K=document.createElement("canvas");if(K.width=(I.width||v.width(qe))*re,K.height=(I.height||v.height(qe))*re,I.bgcolor){const Z=K.getContext("2d");Z.fillStyle=I.bgcolor,Z.fillRect(0,0,K.width,K.height)}return K}(B,G),ve=_e.getContext("2d");return ve.mozImageSmoothingEnabled=!1,ve.msImageSmoothingEnabled=!1,ve.imageSmoothingEnabled=!1,Q&&(ve.scale(G,G),ve.drawImage(Q,0,0)),V&&(document.body.removeChild(V),V=null,R&&clearTimeout(R),R=setTimeout(()=>{R=null,$={}},2e4)),_e})}function J(B){return D.resolveAll().then(function(I){const Q=document.createElement("style");return B.appendChild(Q),Q.appendChild(document.createTextNode(I)),B})}function U(B){return A.inlineAll(B).then(function(){return B})}let R=null,V=null,$={}})(r)}),o=i(function(c,h){(function(){function p(D,M,A){var z=new XMLHttpRequest;z.open("GET",D),z.responseType="blob",z.onload=function(){E(z.response,M,A)},z.onerror=function(){console.error("could not download file")},z.send()}function v(D){var M=new XMLHttpRequest;M.open("HEAD",D,!1);try{M.send()}catch{}return 200<=M.status&&299>=M.status}function g(D){try{D.dispatchEvent(new MouseEvent("click"))}catch{var M=document.createEvent("MouseEvents");M.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),D.dispatchEvent(M)}}var x=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,E=x.saveAs||(typeof window!="object"||window!==x?function(){}:"download"in HTMLAnchorElement.prototype?function(D,M,A){var z=x.URL||x.webkitURL,Y=document.createElement("a");M=M||D.name||"download",Y.download=M,Y.rel="noopener",typeof D=="string"?(Y.href=D,Y.origin===location.origin?g(Y):v(Y.href)?p(D,M,A):g(Y,Y.target="_blank")):(Y.href=z.createObjectURL(D),setTimeout(function(){z.revokeObjectURL(Y.href)},4e4),setTimeout(function(){g(Y)},0))}:"msSaveOrOpenBlob"in navigator?function(D,M,A){if(M=M||D.name||"download",typeof D!="string")navigator.msSaveOrOpenBlob(function(Y,ne){return ne===void 0?ne={autoBom:!1}:typeof ne!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),ne={autoBom:!ne}),ne.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Y.type)?new Blob(["\uFEFF",Y],{type:Y.type}):Y}(D,A),M);else if(v(D))p(D,M,A);else{var z=document.createElement("a");z.href=D,z.target="_blank",setTimeout(function(){g(z)})}}:function(D,M,A,z){if((z=z||open("","_blank"))&&(z.document.title=z.document.body.innerText="downloading..."),typeof D=="string")return p(D,M,A);var Y=D.type==="application/octet-stream",ne=/constructor/i.test(x.HTMLElement)||x.safari,ge=/CriOS\/[\d]+/.test(navigator.userAgent);if((ge||Y&&ne)&&typeof FileReader=="object"){var pe=new FileReader;pe.onloadend=function(){var J=pe.result;J=ge?J:J.replace(/^data:[^;]*;/,"data:attachment/file;"),z?z.location.href=J:location=J,z=null},pe.readAsDataURL(D)}else{var O=x.URL||x.webkitURL,j=O.createObjectURL(D);z?z.location=j:location.href=j,z=null,setTimeout(function(){O.revokeObjectURL(j)},4e4)}});x.saveAs=E.saveAs=E,c.exports=E})()}),a=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(c){var h=c.node,p=c.error;return console.warn("Map node is very big "+h.scrollWidth+"x"+h.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(p)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var c=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v={};for(var g in this.options)p.hasOwnProperty(g)?v[g]=p[g]:v[g]=this.options[g];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return c._getPixelData(v)}).then(function(x){return c._setElementsVisible(!0),c._toCanvas(x,v)}).then(function(x){return h==="image"?c._canvasToImage(x,v):h==="canvas"?x:c._canvasToBlob(x,v)}).then(function(x){return c._screenState.status=1,c._map.fire("simpleMapScreenshoter.done"),x}).catch(function(x){return c._setElementsVisible(!0),c._screenState.status=1,c._map.fire("simpleMapScreenshoter.error",{e:x}),Promise.reject(x)}),this._screenState.promise)},_setElementsVisible:function(){var c=this,h=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(p){var v=c._map._container.querySelectorAll(p),g=!0,x=!1,E=void 0;try{for(var D,M=v[Symbol.iterator]();!(g=(D=M.next()).done);g=!0)D.value.style.opacity=h===!1?0:1}catch(A){x=!0,E=A}finally{try{!g&&M.return&&M.return()}finally{if(x)throw E}}})},_canvasToImage:function(c,h){var p=h.mimeType,v=c.toDataURL(p);return v.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(v)},_canvasToBlob:function(c,h){var p=h.mimeType;return new Promise(function(v,g){c.toBlob(function(x){v(x)},p)})},_toCanvas:function(c,h){var p=h.captionOffset,v=h.caption,g=h.captionFontSize,x=h.captionFont,E=h.captionColor,D=h.captionBgColor,M=this._node,A=M.screenHeight,z=M.screenWidth,Y=document.createElement("canvas");Y.width=z,Y.height=A;for(var ne=Y.getContext("2d"),ge=ne.createImageData(z,A),pe=0;pe<c.length;++pe)ge.data[pe]=c[pe];ne.putImageData(ge,0,0),ge=null;var O=document.createElement("canvas"),j=O.getContext("2d"),J=0,U=0,R=A,V=z;if(this.options.cropImageByInnerWH===!0){for(var $=[],B=0,I=0;I<A;++I){B=0;for(var Q=0;Q<z;++Q)c[4*I*z+4*Q+4]===0&&B++;B===z&&$.push(I)}var G=this._getMinAndMaxOnValuesBreak($);J=G.min;for(var _e=z,ve=G.max,qe=[],re=0,K=U;K<_e;++K){re=0;for(var Z=0;Z<A;++Z)c[4*Z*z+4*K+4]===0&&re++;re===A&&qe.push(K)}var oe=this._getMinAndMaxOnValuesBreak(qe);U=oe.min,_e=oe.max,(U===0&&_e===0||_e===null)&&(_e=z),(J===0&&ve===0||ve===null)&&(ve=A),this.options.debugMode===!0&&(console.log("emptyYLine",$),console.log("minMaxY",G),console.log("emptyXLine",qe),console.log("minMaxX",oe),console.log("debugX",{}),console.log("debugY",{})),J===0&&ve===A&&U===0&&_e===z||(J+=this.options.onCropBorderSize,ve-=this.options.onCropBorderSize,U+=this.options.onCropBorderSize,_e-=this.options.onCropBorderSize),R=ve-J,V=_e-U,O.width=V,O.height=R}else O.width=V,O.height=R;var de=null;return v&&(de=typeof v=="function"?v.call(this):v),de!==null&&(O.height=O.height+(p+g+p),j.beginPath(),j.rect(0,0,O.width,O.height),j.fillStyle=D,j.fill(),j.save()),j.drawImage(Y,U,J,V,R,0,0,V,R),de!==null&&(j.font=g+"px "+x,j.fillStyle=E,j.fillText(de,p,R+p+g)),Promise.resolve(O)},_getMinAndMaxOnValuesBreak:function(c){for(var h=0,p=0,v=!1,g=1;g<c.length;g++){if(c[g]-1!==c[g-1]){p=c[g],v=!0;break}h=c[g]}return v===!1&&c[0]>1?(h=0,p=c[0]):v===!1&&(h=c[c.length-1]||0,p=null),{min:h,max:p}},_getPixelData:function(c){var h=this,p=c.domtoimageOptions,v=p===void 0?{}:p;return this._getPixelDataOfNormalMap(v).catch(function(g){return console.warn("May be map size very big on that zoom level, we have error:",g.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),h._getPixelDataOfBigMap(v)})},_getPixelDataOfNormalMap:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=this._map.getContainer();return this._node={node:h,screenHeight:h.scrollHeight,screenWidth:h.scrollWidth},s.toPixelData(h,c)},_getPixelDataOfBigMap:function(){var c=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=this._map.getContainer(),v=this._map.getPane("mapPane");v.style.width=2*p.clientWidth+"px",v.style.height=2*p.clientHeight+"px",v.style.overflow="hidden";var g=function(){v.style.width="initial",v.style.height="initial",v.style.overflow="initial"};return this._node={node:p,screenHeight:p.scrollHeight,screenWidth:p.scrollWidth},s.toPixelData(p,h).then(function(x){return g(),x}).catch(function(x){return g(),p.scrollHeight>=4e3||p.scrollWidth>=4e3?c.options.onPixelDataFail({plugin:c,node:p,mapPane:v,error:x,domtoimageOptions:h}):Promise.reject(x)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var c=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,h=document.head||document.getElementsByTagName("head")[0],p=document.createElement("style");p.appendChild(document.createTextNode(c)),h.appendChild(p)},_onScreenBtn:function(){var c=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(h){var p=typeof c.options.screenName=="function"?c.options.screenName.call(c):c.options.screenName;o.saveAs(h,p+".png")}).catch(function(h){c._map.fire("simpleMapScreenshoter.error",{e:h})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var c=this;return new Promise(function(h){var p=setInterval(function(){c._interaction||(h(),clearInterval(p))},100)})}}),l=(L.Control.SimpleMapScreenshoter=a,L.simpleMapScreenshoter=function(c){return new L.Control.SimpleMapScreenshoter(c)},a);n.default=l,n.SimpleMapScreenshoter=a,Object.defineProperty(n,"__esModule",{value:!0})})})(J4,J4.exports);var Al=63710088e-1,SE={centimeters:Al*100,centimetres:Al*100,degrees:360/(2*Math.PI),feet:Al*3.28084,inches:Al*39.37,kilometers:Al/1e3,kilometres:Al/1e3,meters:Al,metres:Al,miles:Al/1609.344,millimeters:Al*1e3,millimetres:Al*1e3,nauticalmiles:Al/1852,radians:1,yards:Al*1.0936};function kp(t,e,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function $v(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Q4(t[0])||!Q4(t[1]))throw new Error("coordinates must contain numbers");return kp({type:"Point",coordinates:t},e,n)}function Wu(t,e,n={}){for(const i of t){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return kp({type:"Polygon",coordinates:t},e,n)}function mc(t,e,n={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return kp({type:"LineString",coordinates:t},e,n)}function Ij(t,e={}){const n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function Bj(t,e,n={}){return kp({type:"MultiPolygon",coordinates:t},e,n)}function Rj(t,e="kilometers"){const n=SE[e];if(!n)throw new Error(e+" units is invalid");return t*n}function Fj(t,e="kilometers"){const n=SE[e];if(!n)throw new Error(e+" units is invalid");return t/n}function gb(t){return t%(2*Math.PI)*180/Math.PI}function bc(t){return t%360*Math.PI/180}function Q4(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function e5(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function jj(t){return t.type==="Feature"?t.geometry:t}function CE(t,e,n={}){if(n.final===!0)return zj(t,e);const r=e5(t),i=e5(e),s=bc(r[0]),o=bc(i[0]),a=bc(r[1]),l=bc(i[1]),c=Math.sin(o-s)*Math.cos(l),h=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(o-s);return gb(Math.atan2(c,h))}function zj(t,e){let n=CE(e,t);return n=(n+180)%360,n}function $j(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function R_(t,e,n,r={}){const i=$j(t),s=bc(i[0]),o=bc(i[1]),a=bc(n),l=Fj(e,r.units),c=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(a)),h=s+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(c)),p=gb(h),v=gb(c);return $v([p,v],r.properties)}var t5=R_;function n5(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function F_(t,e,n={}){var r=n5(t),i=n5(e),s=bc(i[1]-r[1]),o=bc(i[0]-r[0]),a=bc(r[1]),l=bc(i[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return Rj(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}var Z1=F_;function Vj(t,e,n={}){const i=jj(t).coordinates;let s=0;for(let o=0;o<i.length&&!(e>=s&&o===i.length-1);o++)if(s>=e){const a=e-s;if(a){const l=CE(i[o],i[o-1])-180;return R_(i[o],a,l,n)}else return $v(i[o])}else s+=F_(i[o],i[o+1],n);return $v(i[i.length-1])}var r5=Vj;function Uj(t,e){var n,r,i,s,o,a,l,c,h,p,v=0,g=t.type==="FeatureCollection",x=t.type==="Feature",E=g?t.features.length:1;for(n=0;n<E;n++){for(a=g?t.features[n].geometry:x?t.geometry:t,c=g?t.features[n].properties:x?t.properties:{},h=g?t.features[n].bbox:x?t.bbox:void 0,p=g?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,h,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,h,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,h,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function Hj(t,e,n){var r=n;return Uj(t,function(i,s,o,a,l){s===0&&n===void 0?r=i:r=e(r,i,s,o,a,l)}),r}function EE(t){return Hj(t,(e,n)=>e+Wj(n),0)}function Wj(t){let e=0,n;switch(t.type){case"Polygon":return i5(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=i5(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function i5(t){let e=0;if(t&&t.length>0){e+=Math.abs(s5(t[0]));for(let n=1;n<t.length;n++)e-=Math.abs(s5(t[n]))}return e}var Gj=Al*Al/2,X1=Math.PI/180;function s5(t){const e=t.length-1;if(e<=2)return 0;let n=0,r=0;for(;r<e;){const i=t[r],s=t[r+1===e?0:r+1],o=t[r+2>=e?(r+2)%e:r+2],a=i[0]*X1,l=s[1]*X1,c=o[0]*X1;n+=(c-a)*Math.sin(l),r++}return n*Gj}var Rc=EE;function PE(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,h=0,p=0,v,g=t.type,x=g==="FeatureCollection",E=g==="Feature",D=x?t.features.length:1,M=0;M<D;M++){c=x?t.features[M].geometry:E?t.geometry:t,v=c?c.type==="GeometryCollection":!1,a=v?c.geometries.length:1;for(var A=0;A<a;A++){var z=0,Y=0;if(o=v?c.geometries[A]:c,o!==null){l=o.coordinates;var ne=o.type;switch(h=ne==="Polygon"||ne==="MultiPolygon"?1:0,ne){case null:break;case"Point":if(e(l,p,M,z,Y)===!1)return!1;p++,z++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,M,z,Y)===!1)return!1;p++,ne==="MultiPoint"&&z++}ne==="LineString"&&z++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(e(l[r][i],p,M,z,Y)===!1)return!1;p++}ne==="MultiLineString"&&z++,ne==="Polygon"&&Y++}ne==="Polygon"&&z++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(Y=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-h;s++){if(e(l[r][i][s],p,M,z,Y)===!1)return!1;p++}Y++}z++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(PE(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function qj(t,e={}){let n=0,r=0,i=0;return PE(t,function(s){n+=s[0],r+=s[1],i++}),$v([n/i,r/i],e.properties)}var Hg=qj;function Yj(t,e,n={}){const r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&t.type==="Feature"&&t.properties?t.properties:{},s=[];for(let o=0;o<r;o++)s.push(R_(t,e,o*-360/r,n).geometry.coordinates);return s.push(s[0]),Wu([s],i)}var Kj=Yj,Zj=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,J1=Math.ceil,Uu=Math.floor,Zl="[BigNumber Error] ",o5=Zl+"Number primitive has more than 15 significant digits: ",uc=1e14,ci=14,a5=9007199254740991,Q1=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Zd=1e7,_u=1e9;function ME(t){var e,n,r,i=A.prototype={constructor:A,toString:null,valueOf:null},s=new A(1),o=20,a=4,l=-7,c=21,h=-1e7,p=1e7,v=!1,g=1,x=0,E={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},D="0123456789abcdefghijklmnopqrstuvwxyz",M=!0;function A(O,j){var J,U,R,V,$,B,I,Q,G=this;if(!(G instanceof A))return new A(O,j);if(j==null){if(O&&O._isBigNumber===!0){G.s=O.s,!O.c||O.e>p?G.c=G.e=null:O.e<h?G.c=[G.e=0]:(G.e=O.e,G.c=O.c.slice());return}if((B=typeof O=="number")&&O*0==0){if(G.s=1/O<0?(O=-O,-1):1,O===~~O){for(V=0,$=O;$>=10;$/=10,V++);V>p?G.c=G.e=null:(G.e=V,G.c=[O]);return}Q=String(O)}else{if(!Zj.test(Q=String(O)))return r(G,Q,B);G.s=Q.charCodeAt(0)==45?(Q=Q.slice(1),-1):1}(V=Q.indexOf("."))>-1&&(Q=Q.replace(".","")),($=Q.search(/e/i))>0?(V<0&&(V=$),V+=+Q.slice($+1),Q=Q.substring(0,$)):V<0&&(V=Q.length)}else{if(yo(j,2,D.length,"Base"),j==10&&M)return G=new A(O),ge(G,o+G.e+1,a);if(Q=String(O),B=typeof O=="number"){if(O*0!=0)return r(G,Q,B,j);if(G.s=1/O<0?(Q=Q.slice(1),-1):1,A.DEBUG&&Q.replace(/^0\.0*|\./,"").length>15)throw Error(o5+O)}else G.s=Q.charCodeAt(0)===45?(Q=Q.slice(1),-1):1;for(J=D.slice(0,j),V=$=0,I=Q.length;$<I;$++)if(J.indexOf(U=Q.charAt($))<0){if(U=="."){if($>V){V=I;continue}}else if(!R&&(Q==Q.toUpperCase()&&(Q=Q.toLowerCase())||Q==Q.toLowerCase()&&(Q=Q.toUpperCase()))){R=!0,$=-1,V=0;continue}return r(G,String(O),B,j)}B=!1,Q=n(Q,j,10,G.s),(V=Q.indexOf("."))>-1?Q=Q.replace(".",""):V=Q.length}for($=0;Q.charCodeAt($)===48;$++);for(I=Q.length;Q.charCodeAt(--I)===48;);if(Q=Q.slice($,++I)){if(I-=$,B&&A.DEBUG&&I>15&&(O>a5||O!==Uu(O)))throw Error(o5+G.s*O);if((V=V-$-1)>p)G.c=G.e=null;else if(V<h)G.c=[G.e=0];else{if(G.e=V,G.c=[],$=(V+1)%ci,V<0&&($+=ci),$<I){for($&&G.c.push(+Q.slice(0,$)),I-=ci;$<I;)G.c.push(+Q.slice($,$+=ci));$=ci-(Q=Q.slice($)).length}else $-=I;for(;$--;Q+="0");G.c.push(+Q)}}else G.c=[G.e=0]}A.clone=ME,A.ROUND_UP=0,A.ROUND_DOWN=1,A.ROUND_CEIL=2,A.ROUND_FLOOR=3,A.ROUND_HALF_UP=4,A.ROUND_HALF_DOWN=5,A.ROUND_HALF_EVEN=6,A.ROUND_HALF_CEIL=7,A.ROUND_HALF_FLOOR=8,A.EUCLID=9,A.config=A.set=function(O){var j,J;if(O!=null)if(typeof O=="object"){if(O.hasOwnProperty(j="DECIMAL_PLACES")&&(J=O[j],yo(J,0,_u,j),o=J),O.hasOwnProperty(j="ROUNDING_MODE")&&(J=O[j],yo(J,0,8,j),a=J),O.hasOwnProperty(j="EXPONENTIAL_AT")&&(J=O[j],J&&J.pop?(yo(J[0],-1e9,0,j),yo(J[1],0,_u,j),l=J[0],c=J[1]):(yo(J,-1e9,_u,j),l=-(c=J<0?-J:J))),O.hasOwnProperty(j="RANGE"))if(J=O[j],J&&J.pop)yo(J[0],-1e9,-1,j),yo(J[1],1,_u,j),h=J[0],p=J[1];else if(yo(J,-1e9,_u,j),J)h=-(p=J<0?-J:J);else throw Error(Zl+j+" cannot be zero: "+J);if(O.hasOwnProperty(j="CRYPTO"))if(J=O[j],J===!!J)if(J)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))v=J;else throw v=!J,Error(Zl+"crypto unavailable");else v=J;else throw Error(Zl+j+" not true or false: "+J);if(O.hasOwnProperty(j="MODULO_MODE")&&(J=O[j],yo(J,0,9,j),g=J),O.hasOwnProperty(j="POW_PRECISION")&&(J=O[j],yo(J,0,_u,j),x=J),O.hasOwnProperty(j="FORMAT"))if(J=O[j],typeof J=="object")E=J;else throw Error(Zl+j+" not an object: "+J);if(O.hasOwnProperty(j="ALPHABET"))if(J=O[j],typeof J=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(J))M=J.slice(0,10)=="0123456789",D=J;else throw Error(Zl+j+" invalid: "+J)}else throw Error(Zl+"Object expected: "+O);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[l,c],RANGE:[h,p],CRYPTO:v,MODULO_MODE:g,POW_PRECISION:x,FORMAT:E,ALPHABET:D}},A.isBigNumber=function(O){if(!O||O._isBigNumber!==!0)return!1;if(!A.DEBUG)return!0;var j,J,U=O.c,R=O.e,V=O.s;e:if({}.toString.call(U)=="[object Array]"){if((V===1||V===-1)&&R>=-1e9&&R<=_u&&R===Uu(R)){if(U[0]===0){if(R===0&&U.length===1)return!0;break e}if(j=(R+1)%ci,j<1&&(j+=ci),String(U[0]).length==j){for(j=0;j<U.length;j++)if(J=U[j],J<0||J>=uc||J!==Uu(J))break e;if(J!==0)return!0}}}else if(U===null&&R===null&&(V===null||V===1||V===-1))return!0;throw Error(Zl+"Invalid BigNumber: "+O)},A.maximum=A.max=function(){return Y(arguments,-1)},A.minimum=A.min=function(){return Y(arguments,1)},A.random=function(){var O=9007199254740992,j=Math.random()*O&2097151?function(){return Uu(Math.random()*O)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(J){var U,R,V,$,B,I=0,Q=[],G=new A(s);if(J==null?J=o:yo(J,0,_u),$=J1(J/ci),v)if(crypto.getRandomValues){for(U=crypto.getRandomValues(new Uint32Array($*=2));I<$;)B=U[I]*131072+(U[I+1]>>>11),B>=9e15?(R=crypto.getRandomValues(new Uint32Array(2)),U[I]=R[0],U[I+1]=R[1]):(Q.push(B%1e14),I+=2);I=$/2}else if(crypto.randomBytes){for(U=crypto.randomBytes($*=7);I<$;)B=(U[I]&31)*281474976710656+U[I+1]*1099511627776+U[I+2]*4294967296+U[I+3]*16777216+(U[I+4]<<16)+(U[I+5]<<8)+U[I+6],B>=9e15?crypto.randomBytes(7).copy(U,I):(Q.push(B%1e14),I+=7);I=$/7}else throw v=!1,Error(Zl+"crypto unavailable");if(!v)for(;I<$;)B=j(),B<9e15&&(Q[I++]=B%1e14);for($=Q[--I],J%=ci,$&&J&&(B=Q1[ci-J],Q[I]=Uu($/B)*B);Q[I]===0;Q.pop(),I--);if(I<0)Q=[V=0];else{for(V=-1;Q[0]===0;Q.splice(0,1),V-=ci);for(I=1,B=Q[0];B>=10;B/=10,I++);I<ci&&(V-=ci-I)}return G.e=V,G.c=Q,G}}(),A.sum=function(){for(var O=1,j=arguments,J=new A(j[0]);O<j.length;)J=J.plus(j[O++]);return J},n=function(){var O="0123456789";function j(J,U,R,V){for(var $,B=[0],I,Q=0,G=J.length;Q<G;){for(I=B.length;I--;B[I]*=U);for(B[0]+=V.indexOf(J.charAt(Q++)),$=0;$<B.length;$++)B[$]>R-1&&(B[$+1]==null&&(B[$+1]=0),B[$+1]+=B[$]/R|0,B[$]%=R)}return B.reverse()}return function(J,U,R,V,$){var B,I,Q,G,_e,ve,qe,re,K=J.indexOf("."),Z=o,oe=a;for(K>=0&&(G=x,x=0,J=J.replace(".",""),re=new A(U),ve=re.pow(J.length-K),x=G,re.c=j(bd(zu(ve.c),ve.e,"0"),10,R,O),re.e=re.c.length),qe=j(J,U,R,$?(B=D,O):(B=O,D)),Q=G=qe.length;qe[--G]==0;qe.pop());if(!qe[0])return B.charAt(0);if(K<0?--Q:(ve.c=qe,ve.e=Q,ve.s=V,ve=e(ve,re,Z,oe,R),qe=ve.c,_e=ve.r,Q=ve.e),I=Q+Z+1,K=qe[I],G=R/2,_e=_e||I<0||qe[I+1]!=null,_e=oe<4?(K!=null||_e)&&(oe==0||oe==(ve.s<0?3:2)):K>G||K==G&&(oe==4||_e||oe==6&&qe[I-1]&1||oe==(ve.s<0?8:7)),I<1||!qe[0])J=_e?bd(B.charAt(1),-Z,B.charAt(0)):B.charAt(0);else{if(qe.length=I,_e)for(--R;++qe[--I]>R;)qe[I]=0,I||(++Q,qe=[1].concat(qe));for(G=qe.length;!qe[--G];);for(K=0,J="";K<=G;J+=B.charAt(qe[K++]));J=bd(J,Q,B.charAt(0))}return J}}(),e=function(){function O(U,R,V){var $,B,I,Q,G=0,_e=U.length,ve=R%Zd,qe=R/Zd|0;for(U=U.slice();_e--;)I=U[_e]%Zd,Q=U[_e]/Zd|0,$=qe*I+Q*ve,B=ve*I+$%Zd*Zd+G,G=(B/V|0)+($/Zd|0)+qe*Q,U[_e]=B%V;return G&&(U=[G].concat(U)),U}function j(U,R,V,$){var B,I;if(V!=$)I=V>$?1:-1;else for(B=I=0;B<V;B++)if(U[B]!=R[B]){I=U[B]>R[B]?1:-1;break}return I}function J(U,R,V,$){for(var B=0;V--;)U[V]-=B,B=U[V]<R[V]?1:0,U[V]=B*$+U[V]-R[V];for(;!U[0]&&U.length>1;U.splice(0,1));}return function(U,R,V,$,B){var I,Q,G,_e,ve,qe,re,K,Z,oe,de,ye,he,X,Ae,De,Xe,fe=U.s==R.s?1:-1,ee=U.c,se=R.c;if(!ee||!ee[0]||!se||!se[0])return new A(!U.s||!R.s||(ee?se&&ee[0]==se[0]:!se)?NaN:ee&&ee[0]==0||!se?fe*0:fe/0);for(K=new A(fe),Z=K.c=[],Q=U.e-R.e,fe=V+Q+1,B||(B=uc,Q=Hu(U.e/ci)-Hu(R.e/ci),fe=fe/ci|0),G=0;se[G]==(ee[G]||0);G++);if(se[G]>(ee[G]||0)&&Q--,fe<0)Z.push(1),_e=!0;else{for(X=ee.length,De=se.length,G=0,fe+=2,ve=Uu(B/(se[0]+1)),ve>1&&(se=O(se,ve,B),ee=O(ee,ve,B),De=se.length,X=ee.length),he=De,oe=ee.slice(0,De),de=oe.length;de<De;oe[de++]=0);Xe=se.slice(),Xe=[0].concat(Xe),Ae=se[0],se[1]>=B/2&&Ae++;do{if(ve=0,I=j(se,oe,De,de),I<0){if(ye=oe[0],De!=de&&(ye=ye*B+(oe[1]||0)),ve=Uu(ye/Ae),ve>1)for(ve>=B&&(ve=B-1),qe=O(se,ve,B),re=qe.length,de=oe.length;j(qe,oe,re,de)==1;)ve--,J(qe,De<re?Xe:se,re,B),re=qe.length,I=1;else ve==0&&(I=ve=1),qe=se.slice(),re=qe.length;if(re<de&&(qe=[0].concat(qe)),J(oe,qe,de,B),de=oe.length,I==-1)for(;j(se,oe,De,de)<1;)ve++,J(oe,De<de?Xe:se,de,B),de=oe.length}else I===0&&(ve++,oe=[0]);Z[G++]=ve,oe[0]?oe[de++]=ee[he]||0:(oe=[ee[he]],de=1)}while((he++<X||oe[0]!=null)&&fe--);_e=oe[0]!=null,Z[0]||Z.splice(0,1)}if(B==uc){for(G=1,fe=Z[0];fe>=10;fe/=10,G++);ge(K,V+(K.e=G+Q*ci-1)+1,$,_e)}else K.e=Q,K.r=+_e;return K}}();function z(O,j,J,U){var R,V,$,B,I;if(J==null?J=a:yo(J,0,8),!O.c)return O.toString();if(R=O.c[0],$=O.e,j==null)I=zu(O.c),I=U==1||U==2&&($<=l||$>=c)?w0(I,$):bd(I,$,"0");else if(O=ge(new A(O),j,J),V=O.e,I=zu(O.c),B=I.length,U==1||U==2&&(j<=V||V<=l)){for(;B<j;I+="0",B++);I=w0(I,V)}else if(j-=$,I=bd(I,V,"0"),V+1>B){if(--j>0)for(I+=".";j--;I+="0");}else if(j+=V-B,j>0)for(V+1==B&&(I+=".");j--;I+="0");return O.s<0&&R?"-"+I:I}function Y(O,j){for(var J,U,R=1,V=new A(O[0]);R<O.length;R++)U=new A(O[R]),(!U.s||(J=Uh(V,U))===j||J===0&&V.s===j)&&(V=U);return V}function ne(O,j,J){for(var U=1,R=j.length;!j[--R];j.pop());for(R=j[0];R>=10;R/=10,U++);return(J=U+J*ci-1)>p?O.c=O.e=null:J<h?O.c=[O.e=0]:(O.e=J,O.c=j),O}r=function(){var O=/^(-?)0([xbo])(?=\w[\w.]*$)/i,j=/^([^.]+)\.$/,J=/^\.([^.]+)$/,U=/^-?(Infinity|NaN)$/,R=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(V,$,B,I){var Q,G=B?$:$.replace(R,"");if(U.test(G))V.s=isNaN(G)?null:G<0?-1:1;else{if(!B&&(G=G.replace(O,function(_e,ve,qe){return Q=(qe=qe.toLowerCase())=="x"?16:qe=="b"?2:8,!I||I==Q?ve:_e}),I&&(Q=I,G=G.replace(j,"$1").replace(J,"0.$1")),$!=G))return new A(G,Q);if(A.DEBUG)throw Error(Zl+"Not a"+(I?" base "+I:"")+" number: "+$);V.s=null}V.c=V.e=null}}();function ge(O,j,J,U){var R,V,$,B,I,Q,G,_e=O.c,ve=Q1;if(_e){e:{for(R=1,B=_e[0];B>=10;B/=10,R++);if(V=j-R,V<0)V+=ci,$=j,I=_e[Q=0],G=Uu(I/ve[R-$-1]%10);else if(Q=J1((V+1)/ci),Q>=_e.length)if(U){for(;_e.length<=Q;_e.push(0));I=G=0,R=1,V%=ci,$=V-ci+1}else break e;else{for(I=B=_e[Q],R=1;B>=10;B/=10,R++);V%=ci,$=V-ci+R,G=$<0?0:Uu(I/ve[R-$-1]%10)}if(U=U||j<0||_e[Q+1]!=null||($<0?I:I%ve[R-$-1]),U=J<4?(G||U)&&(J==0||J==(O.s<0?3:2)):G>5||G==5&&(J==4||U||J==6&&(V>0?$>0?I/ve[R-$]:0:_e[Q-1])%10&1||J==(O.s<0?8:7)),j<1||!_e[0])return _e.length=0,U?(j-=O.e+1,_e[0]=ve[(ci-j%ci)%ci],O.e=-j||0):_e[0]=O.e=0,O;if(V==0?(_e.length=Q,B=1,Q--):(_e.length=Q+1,B=ve[ci-V],_e[Q]=$>0?Uu(I/ve[R-$]%ve[$])*B:0),U)for(;;)if(Q==0){for(V=1,$=_e[0];$>=10;$/=10,V++);for($=_e[0]+=B,B=1;$>=10;$/=10,B++);V!=B&&(O.e++,_e[0]==uc&&(_e[0]=1));break}else{if(_e[Q]+=B,_e[Q]!=uc)break;_e[Q--]=0,B=1}for(V=_e.length;_e[--V]===0;_e.pop());}O.e>p?O.c=O.e=null:O.e<h&&(O.c=[O.e=0])}return O}function pe(O){var j,J=O.e;return J===null?O.toString():(j=zu(O.c),j=J<=l||J>=c?w0(j,J):bd(j,J,"0"),O.s<0?"-"+j:j)}return i.absoluteValue=i.abs=function(){var O=new A(this);return O.s<0&&(O.s=1),O},i.comparedTo=function(O,j){return Uh(this,new A(O,j))},i.decimalPlaces=i.dp=function(O,j){var J,U,R,V=this;if(O!=null)return yo(O,0,_u),j==null?j=a:yo(j,0,8),ge(new A(V),O+V.e+1,j);if(!(J=V.c))return null;if(U=((R=J.length-1)-Hu(this.e/ci))*ci,R=J[R])for(;R%10==0;R/=10,U--);return U<0&&(U=0),U},i.dividedBy=i.div=function(O,j){return e(this,new A(O,j),o,a)},i.dividedToIntegerBy=i.idiv=function(O,j){return e(this,new A(O,j),0,1)},i.exponentiatedBy=i.pow=function(O,j){var J,U,R,V,$,B,I,Q,G,_e=this;if(O=new A(O),O.c&&!O.isInteger())throw Error(Zl+"Exponent not an integer: "+pe(O));if(j!=null&&(j=new A(j)),B=O.e>14,!_e.c||!_e.c[0]||_e.c[0]==1&&!_e.e&&_e.c.length==1||!O.c||!O.c[0])return G=new A(Math.pow(+pe(_e),B?O.s*(2-_0(O)):+pe(O))),j?G.mod(j):G;if(I=O.s<0,j){if(j.c?!j.c[0]:!j.s)return new A(NaN);U=!I&&_e.isInteger()&&j.isInteger(),U&&(_e=_e.mod(j))}else{if(O.e>9&&(_e.e>0||_e.e<-1||(_e.e==0?_e.c[0]>1||B&&_e.c[1]>=24e7:_e.c[0]<8e13||B&&_e.c[0]<=9999975e7)))return V=_e.s<0&&_0(O)?-0:0,_e.e>-1&&(V=1/V),new A(I?1/V:V);x&&(V=J1(x/ci+2))}for(B?(J=new A(.5),I&&(O.s=1),Q=_0(O)):(R=Math.abs(+pe(O)),Q=R%2),G=new A(s);;){if(Q){if(G=G.times(_e),!G.c)break;V?G.c.length>V&&(G.c.length=V):U&&(G=G.mod(j))}if(R){if(R=Uu(R/2),R===0)break;Q=R%2}else if(O=O.times(J),ge(O,O.e+1,1),O.e>14)Q=_0(O);else{if(R=+pe(O),R===0)break;Q=R%2}_e=_e.times(_e),V?_e.c&&_e.c.length>V&&(_e.c.length=V):U&&(_e=_e.mod(j))}return U?G:(I&&(G=s.div(G)),j?G.mod(j):V?ge(G,x,a,$):G)},i.integerValue=function(O){var j=new A(this);return O==null?O=a:yo(O,0,8),ge(j,j.e+1,O)},i.isEqualTo=i.eq=function(O,j){return Uh(this,new A(O,j))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(O,j){return Uh(this,new A(O,j))>0},i.isGreaterThanOrEqualTo=i.gte=function(O,j){return(j=Uh(this,new A(O,j)))===1||j===0},i.isInteger=function(){return!!this.c&&Hu(this.e/ci)>this.c.length-2},i.isLessThan=i.lt=function(O,j){return Uh(this,new A(O,j))<0},i.isLessThanOrEqualTo=i.lte=function(O,j){return(j=Uh(this,new A(O,j)))===-1||j===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(O,j){var J,U,R,V,$=this,B=$.s;if(O=new A(O,j),j=O.s,!B||!j)return new A(NaN);if(B!=j)return O.s=-j,$.plus(O);var I=$.e/ci,Q=O.e/ci,G=$.c,_e=O.c;if(!I||!Q){if(!G||!_e)return G?(O.s=-j,O):new A(_e?$:NaN);if(!G[0]||!_e[0])return _e[0]?(O.s=-j,O):new A(G[0]?$:a==3?-0:0)}if(I=Hu(I),Q=Hu(Q),G=G.slice(),B=I-Q){for((V=B<0)?(B=-B,R=G):(Q=I,R=_e),R.reverse(),j=B;j--;R.push(0));R.reverse()}else for(U=(V=(B=G.length)<(j=_e.length))?B:j,B=j=0;j<U;j++)if(G[j]!=_e[j]){V=G[j]<_e[j];break}if(V&&(R=G,G=_e,_e=R,O.s=-O.s),j=(U=_e.length)-(J=G.length),j>0)for(;j--;G[J++]=0);for(j=uc-1;U>B;){if(G[--U]<_e[U]){for(J=U;J&&!G[--J];G[J]=j);--G[J],G[U]+=uc}G[U]-=_e[U]}for(;G[0]==0;G.splice(0,1),--Q);return G[0]?ne(O,G,Q):(O.s=a==3?-1:1,O.c=[O.e=0],O)},i.modulo=i.mod=function(O,j){var J,U,R=this;return O=new A(O,j),!R.c||!O.s||O.c&&!O.c[0]?new A(NaN):!O.c||R.c&&!R.c[0]?new A(R):(g==9?(U=O.s,O.s=1,J=e(R,O,0,3),O.s=U,J.s*=U):J=e(R,O,0,g),O=R.minus(J.times(O)),!O.c[0]&&g==1&&(O.s=R.s),O)},i.multipliedBy=i.times=function(O,j){var J,U,R,V,$,B,I,Q,G,_e,ve,qe,re,K,Z,oe=this,de=oe.c,ye=(O=new A(O,j)).c;if(!de||!ye||!de[0]||!ye[0])return!oe.s||!O.s||de&&!de[0]&&!ye||ye&&!ye[0]&&!de?O.c=O.e=O.s=null:(O.s*=oe.s,!de||!ye?O.c=O.e=null:(O.c=[0],O.e=0)),O;for(U=Hu(oe.e/ci)+Hu(O.e/ci),O.s*=oe.s,I=de.length,_e=ye.length,I<_e&&(re=de,de=ye,ye=re,R=I,I=_e,_e=R),R=I+_e,re=[];R--;re.push(0));for(K=uc,Z=Zd,R=_e;--R>=0;){for(J=0,ve=ye[R]%Z,qe=ye[R]/Z|0,$=I,V=R+$;V>R;)Q=de[--$]%Z,G=de[$]/Z|0,B=qe*Q+G*ve,Q=ve*Q+B%Z*Z+re[V]+J,J=(Q/K|0)+(B/Z|0)+qe*G,re[V--]=Q%K;re[V]=J}return J?++U:re.splice(0,1),ne(O,re,U)},i.negated=function(){var O=new A(this);return O.s=-O.s||null,O},i.plus=function(O,j){var J,U=this,R=U.s;if(O=new A(O,j),j=O.s,!R||!j)return new A(NaN);if(R!=j)return O.s=-j,U.minus(O);var V=U.e/ci,$=O.e/ci,B=U.c,I=O.c;if(!V||!$){if(!B||!I)return new A(R/0);if(!B[0]||!I[0])return I[0]?O:new A(B[0]?U:R*0)}if(V=Hu(V),$=Hu($),B=B.slice(),R=V-$){for(R>0?($=V,J=I):(R=-R,J=B),J.reverse();R--;J.push(0));J.reverse()}for(R=B.length,j=I.length,R-j<0&&(J=I,I=B,B=J,j=R),R=0;j;)R=(B[--j]=B[j]+I[j]+R)/uc|0,B[j]=uc===B[j]?0:B[j]%uc;return R&&(B=[R].concat(B),++$),ne(O,B,$)},i.precision=i.sd=function(O,j){var J,U,R,V=this;if(O!=null&&O!==!!O)return yo(O,1,_u),j==null?j=a:yo(j,0,8),ge(new A(V),O,j);if(!(J=V.c))return null;if(R=J.length-1,U=R*ci+1,R=J[R]){for(;R%10==0;R/=10,U--);for(R=J[0];R>=10;R/=10,U++);}return O&&V.e+1>U&&(U=V.e+1),U},i.shiftedBy=function(O){return yo(O,-9007199254740991,a5),this.times("1e"+O)},i.squareRoot=i.sqrt=function(){var O,j,J,U,R,V=this,$=V.c,B=V.s,I=V.e,Q=o+4,G=new A("0.5");if(B!==1||!$||!$[0])return new A(!B||B<0&&(!$||$[0])?NaN:$?V:1/0);if(B=Math.sqrt(+pe(V)),B==0||B==1/0?(j=zu($),(j.length+I)%2==0&&(j+="0"),B=Math.sqrt(+j),I=Hu((I+1)/2)-(I<0||I%2),B==1/0?j="5e"+I:(j=B.toExponential(),j=j.slice(0,j.indexOf("e")+1)+I),J=new A(j)):J=new A(B+""),J.c[0]){for(I=J.e,B=I+Q,B<3&&(B=0);;)if(R=J,J=G.times(R.plus(e(V,R,Q,1))),zu(R.c).slice(0,B)===(j=zu(J.c)).slice(0,B))if(J.e<I&&--B,j=j.slice(B-3,B+1),j=="9999"||!U&&j=="4999"){if(!U&&(ge(R,R.e+o+2,0),R.times(R).eq(V))){J=R;break}Q+=4,B+=4,U=1}else{(!+j||!+j.slice(1)&&j.charAt(0)=="5")&&(ge(J,J.e+o+2,1),O=!J.times(J).eq(V));break}}return ge(J,J.e+o+1,a,O)},i.toExponential=function(O,j){return O!=null&&(yo(O,0,_u),O++),z(this,O,j,1)},i.toFixed=function(O,j){return O!=null&&(yo(O,0,_u),O=O+this.e+1),z(this,O,j)},i.toFormat=function(O,j,J){var U,R=this;if(J==null)O!=null&&j&&typeof j=="object"?(J=j,j=null):O&&typeof O=="object"?(J=O,O=j=null):J=E;else if(typeof J!="object")throw Error(Zl+"Argument not an object: "+J);if(U=R.toFixed(O,j),R.c){var V,$=U.split("."),B=+J.groupSize,I=+J.secondaryGroupSize,Q=J.groupSeparator||"",G=$[0],_e=$[1],ve=R.s<0,qe=ve?G.slice(1):G,re=qe.length;if(I&&(V=B,B=I,I=V,re-=V),B>0&&re>0){for(V=re%B||B,G=qe.substr(0,V);V<re;V+=B)G+=Q+qe.substr(V,B);I>0&&(G+=Q+qe.slice(V)),ve&&(G="-"+G)}U=_e?G+(J.decimalSeparator||"")+((I=+J.fractionGroupSize)?_e.replace(new RegExp("\\d{"+I+"}\\B","g"),"$&"+(J.fractionGroupSeparator||"")):_e):G}return(J.prefix||"")+U+(J.suffix||"")},i.toFraction=function(O){var j,J,U,R,V,$,B,I,Q,G,_e,ve,qe=this,re=qe.c;if(O!=null&&(B=new A(O),!B.isInteger()&&(B.c||B.s!==1)||B.lt(s)))throw Error(Zl+"Argument "+(B.isInteger()?"out of range: ":"not an integer: ")+pe(B));if(!re)return new A(qe);for(j=new A(s),Q=J=new A(s),U=I=new A(s),ve=zu(re),V=j.e=ve.length-qe.e-1,j.c[0]=Q1[($=V%ci)<0?ci+$:$],O=!O||B.comparedTo(j)>0?V>0?j:Q:B,$=p,p=1/0,B=new A(ve),I.c[0]=0;G=e(B,j,0,1),R=J.plus(G.times(U)),R.comparedTo(O)!=1;)J=U,U=R,Q=I.plus(G.times(R=Q)),I=R,j=B.minus(G.times(R=j)),B=R;return R=e(O.minus(J),U,0,1),I=I.plus(R.times(Q)),J=J.plus(R.times(U)),I.s=Q.s=qe.s,V=V*2,_e=e(Q,U,V,a).minus(qe).abs().comparedTo(e(I,J,V,a).minus(qe).abs())<1?[Q,U]:[I,J],p=$,_e},i.toNumber=function(){return+pe(this)},i.toPrecision=function(O,j){return O!=null&&yo(O,1,_u),z(this,O,j,2)},i.toString=function(O){var j,J=this,U=J.s,R=J.e;return R===null?U?(j="Infinity",U<0&&(j="-"+j)):j="NaN":(O==null?j=R<=l||R>=c?w0(zu(J.c),R):bd(zu(J.c),R,"0"):O===10&&M?(J=ge(new A(J),o+R+1,a),j=bd(zu(J.c),J.e,"0")):(yo(O,2,D.length,"Base"),j=n(bd(zu(J.c),R,"0"),10,O,U,!0)),U<0&&J.c[0]&&(j="-"+j)),j},i.valueOf=i.toJSON=function(){return pe(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,t!=null&&A.set(t),A}function Hu(t){var e=t|0;return t>0||t===e?e:e-1}function zu(t){for(var e,n,r=1,i=t.length,s=t[0]+"";r<i;){for(e=t[r++]+"",n=ci-e.length;n--;e="0"+e);s+=e}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function Uh(t,e){var n,r,i=t.c,s=e.c,o=t.s,a=e.s,l=t.e,c=e.e;if(!o||!a)return null;if(n=i&&!i[0],r=s&&!s[0],n||r)return n?r?0:-a:o;if(o!=a)return o;if(n=o<0,r=l==c,!i||!s)return r?0:!i^n?1:-1;if(!r)return l>c^n?1:-1;for(a=(l=i.length)<(c=s.length)?l:c,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^n?1:-1;return l==c?0:l>c^n?1:-1}function yo(t,e,n,r){if(t<e||t>n||t!==Uu(t))throw Error(Zl+(r||"Argument")+(typeof t=="number"?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function _0(t){var e=t.c.length-1;return Hu(t.e/ci)==e&&t.c[e]%2!=0}function w0(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function bd(t,e,n){var r,i;if(e<0){for(i=n+".";++e;i+=n);t=i+t}else if(r=t.length,++e>r){for(i=n,e-=r;--e;i+=n);t+=i}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}var Yc=ME(),Xj=class{constructor(t){Je(this,"key");Je(this,"left",null);Je(this,"right",null);this.key=t}},ng=class extends Xj{constructor(t){super(t)}},Jj=class{constructor(){Je(this,"size",0);Je(this,"modificationCount",0);Je(this,"splayCount",0)}splay(t){const e=this.root;if(e==null)return this.compare(t,t),-1;let n=null,r=null,i=null,s=null,o=e;const a=this.compare;let l;for(;;)if(l=a(o.key,t),l>0){let c=o.left;if(c==null||(l=a(c.key,t),l>0&&(o.left=c.right,c.right=o,o=c,c=o.left,c==null)))break;n==null?r=o:n.left=o,n=o,o=c}else if(l<0){let c=o.right;if(c==null||(l=a(c.key,t),l<0&&(o.right=c.left,c.left=o,o=c,c=o.right,c==null)))break;i==null?s=o:i.right=o,i=o,o=c}else break;return i!=null&&(i.right=o.left,o.left=s),n!=null&&(n.left=o.right,o.right=r),this.root!==o&&(this.root=o,this.splayCount++),l}splayMin(t){let e=t,n=e.left;for(;n!=null;){const r=n;e.left=r.right,r.right=e,e=r,n=e.left}return e}splayMax(t){let e=t,n=e.right;for(;n!=null;){const r=n;e.right=r.left,r.left=e,e=r,n=e.right}return e}_delete(t){if(this.root==null||this.splay(t)!=0)return null;let n=this.root;const r=n,i=n.left;if(this.size--,i==null)this.root=n.right;else{const s=n.right;n=this.splayMax(i),n.right=s,this.root=n}return this.modificationCount++,r}addNewRoot(t,e){this.size++,this.modificationCount++;const n=this.root;if(n==null){this.root=t;return}e<0?(t.left=n,t.right=n.right,n.right=null):(t.right=n,t.left=n.left,n.left=null),this.root=t}_first(){const t=this.root;return t==null?null:(this.root=this.splayMin(t),this.root)}_last(){const t=this.root;return t==null?null:(this.root=this.splayMax(t),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(t){return this.validKey(t)&&this.splay(t)==0}defaultCompare(){return(t,e)=>t<e?-1:t>e?1:0}wrap(){return{getRoot:()=>this.root,setRoot:t=>{this.root=t},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:t=>{this.splayCount=t},splay:t=>this.splay(t),has:t=>this.has(t)}}},SL,CL,Vv=class _g extends Jj{constructor(n,r){super();Je(this,"root",null);Je(this,"compare");Je(this,"validKey");Je(this,SL,"[object Set]");this.compare=n??this.defaultCompare(),this.validKey=r??(i=>i!=null&&i!=null)}delete(n){return this.validKey(n)?this._delete(n)!=null:!1}deleteAll(n){for(const r of n)this.delete(r)}forEach(n){const r=this[Symbol.iterator]();let i;for(;i=r.next(),!i.done;)n(i.value,i.value,this)}add(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new ng(n),r),this}addAndReturn(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new ng(n),r),this.root.key}addAll(n){for(const r of n)this.add(r)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let s=i.right;for(;s!=null;)i=s,s=i.right;return i.key}firstAfter(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let s=i.left;for(;s!=null;)i=s,s=i.left;return i.key}retainAll(n){const r=new _g(this.compare,this.validKey),i=this.modificationCount;for(const s of n){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(s)&&this.splay(s)==0&&r.add(this.root.key)}r.size!=this.size&&(this.root=r.root,this.size=r.size,this.modificationCount++)}lookup(n){return!this.validKey(n)||this.splay(n)!=0?null:this.root.key}intersection(n){const r=new _g(this.compare,this.validKey);for(const i of this)n.has(i)&&r.add(i);return r}difference(n){const r=new _g(this.compare,this.validKey);for(const i of this)n.has(i)||r.add(i);return r}union(n){const r=this.clone();return r.addAll(n),r}clone(){const n=new _g(this.compare,this.validKey);return n.size=this.size,n.root=this.copyNode(this.root),n}copyNode(n){if(n==null)return null;function r(s,o){let a,l;do{if(a=s.left,l=s.right,a!=null){const c=new ng(a.key);o.left=c,r(a,c)}if(l!=null){const c=new ng(l.key);o.right=c,s=l,o=c}}while(l!=null)}const i=new ng(n.key);return r(n,i),i}toSet(){return this.clone()}entries(){return new ez(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(CL=Symbol.iterator,SL=Symbol.toStringTag,CL)](){return new Qj(this.wrap())}},kE=class{constructor(t){Je(this,"tree");Je(this,"path",new Array);Je(this,"modificationCount",null);Je(this,"splayCount");this.tree=t,this.splayCount=t.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const t=this.path[this.path.length-1];return this.getValue(t)}rebuildPath(t){this.path.splice(0,this.path.length),this.tree.splay(t),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(t){for(;t!=null;)this.path.push(t),t=t.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let n=this.tree.getRoot();for(;n!=null;)this.path.push(n),n=n.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let t=this.path[this.path.length-1],e=t.right;if(e!=null){for(;e!=null;)this.path.push(e),e=e.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===t;)t=this.path.pop();return this.path.length>0}},Qj=class extends kE{getValue(t){return t.key}},ez=class extends kE{getValue(t){return[t.key,t.key]}},AE=t=>()=>t,mb=t=>{const e=t?(n,r)=>r.minus(n).abs().isLessThanOrEqualTo(t):AE(!1);return(n,r)=>e(n,r)?0:n.comparedTo(r)};function tz(t){const e=t?(n,r,i,s,o)=>n.exponentiatedBy(2).isLessThanOrEqualTo(s.minus(r).exponentiatedBy(2).plus(o.minus(i).exponentiatedBy(2)).times(t)):AE(!1);return(n,r,i)=>{const s=n.x,o=n.y,a=i.x,l=i.y,c=o.minus(l).times(r.x.minus(a)).minus(s.minus(a).times(r.y.minus(l)));return e(c,s,o,a,l)?0:c.comparedTo(0)}}var nz=t=>t,rz=t=>{if(t){const e=new Vv(mb(t)),n=new Vv(mb(t)),r=(s,o)=>o.addAndReturn(s),i=s=>({x:r(s.x,e),y:r(s.y,n)});return i({x:new Yc(0),y:new Yc(0)}),i}return nz},vb=t=>({set:e=>{Rd=vb(e)},reset:()=>vb(t),compare:mb(t),snap:rz(t),orient:tz(t)}),Rd=vb(),rg=(t,e)=>t.ll.x.isLessThanOrEqualTo(e.x)&&e.x.isLessThanOrEqualTo(t.ur.x)&&t.ll.y.isLessThanOrEqualTo(e.y)&&e.y.isLessThanOrEqualTo(t.ur.y),yb=(t,e)=>{if(e.ur.x.isLessThan(t.ll.x)||t.ur.x.isLessThan(e.ll.x)||e.ur.y.isLessThan(t.ll.y)||t.ur.y.isLessThan(e.ll.y))return null;const n=t.ll.x.isLessThan(e.ll.x)?e.ll.x:t.ll.x,r=t.ur.x.isLessThan(e.ur.x)?t.ur.x:e.ur.x,i=t.ll.y.isLessThan(e.ll.y)?e.ll.y:t.ll.y,s=t.ur.y.isLessThan(e.ur.y)?t.ur.y:e.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:s}}},nv=(t,e)=>t.x.times(e.y).minus(t.y.times(e.x)),TE=(t,e)=>t.x.times(e.x).plus(t.y.times(e.y)),Uv=t=>TE(t,t).sqrt(),iz=(t,e,n)=>{const r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return nv(i,r).div(Uv(i)).div(Uv(r))},sz=(t,e,n)=>{const r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return TE(i,r).div(Uv(i)).div(Uv(r))},l5=(t,e,n)=>e.y.isZero()?null:{x:t.x.plus(e.x.div(e.y).times(n.minus(t.y))),y:n},u5=(t,e,n)=>e.x.isZero()?null:{x:n,y:t.y.plus(e.y.div(e.x).times(n.minus(t.x)))},oz=(t,e,n,r)=>{if(e.x.isZero())return u5(n,r,t.x);if(r.x.isZero())return u5(t,e,n.x);if(e.y.isZero())return l5(n,r,t.y);if(r.y.isZero())return l5(t,e,n.y);const i=nv(e,r);if(i.isZero())return null;const s={x:n.x.minus(t.x),y:n.y.minus(t.y)},o=nv(s,e).div(i),a=nv(s,r).div(i),l=t.x.plus(a.times(e.x)),c=n.x.plus(o.times(r.x)),h=t.y.plus(a.times(e.y)),p=n.y.plus(o.times(r.y)),v=l.plus(c).div(2),g=h.plus(p).div(2);return{x:v,y:g}},Hc=class DE{constructor(e,n){Je(this,"point");Je(this,"isLeft");Je(this,"segment");Je(this,"otherSE");Je(this,"consumedBy");e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}static compare(e,n){const r=DE.comparePoints(e.point,n.point);return r!==0?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:Hv.compare(e.segment,n.segment))}static comparePoints(e,n){return e.x.isLessThan(n.x)?-1:e.x.isGreaterThan(n.x)?1:e.y.isLessThan(n.y)?-1:e.y.isGreaterThan(n.y)?1:0}link(e){if(e.point===this.point)throw new Error("Tried to link already linked events");const n=e.point.events;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}checkForConsuming(){const e=this.point.events.length;for(let n=0;n<e;n++){const r=this.point.events[n];if(r.segment.consumedBy===void 0)for(let i=n+1;i<e;i++){const s=this.point.events[i];s.consumedBy===void 0&&r.otherSE.point.events===s.otherSE.point.events&&r.segment.consume(s.segment)}}}getAvailableLinkedEvents(){const e=[];for(let n=0,r=this.point.events.length;n<r;n++){const i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&e.push(i)}return e}getLeftmostComparator(e){const n=new Map,r=i=>{const s=i.otherSE;n.set(i,{sine:iz(this.point,e.point,s.point),cosine:sz(this.point,e.point,s.point)})};return(i,s)=>{n.has(i)||r(i),n.has(s)||r(s);const{sine:o,cosine:a}=n.get(i),{sine:l,cosine:c}=n.get(s);return o.isGreaterThanOrEqualTo(0)&&l.isGreaterThanOrEqualTo(0)?a.isLessThan(c)?1:a.isGreaterThan(c)?-1:0:o.isLessThan(0)&&l.isLessThan(0)?a.isLessThan(c)?-1:a.isGreaterThan(c)?1:0:l.isLessThan(o)?-1:l.isGreaterThan(o)?1:0}}},az=class bb{constructor(e){Je(this,"events");Je(this,"poly");Je(this,"_isExteriorRing");Je(this,"_enclosingRing");this.events=e;for(let n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}static factory(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];if(!s.isInResult()||s.ringOut)continue;let o=null,a=s.leftSE,l=s.rightSE;const c=[a],h=a.point,p=[];for(;o=a,a=l,c.push(a),a.point!==h;)for(;;){const v=a.getAvailableLinkedEvents();if(v.length===0){const E=c[0].point,D=c[c.length-1].point;throw new Error(`Unable to complete output ring starting at [${E.x}, ${E.y}]. Last matching segment found ends at [${D.x}, ${D.y}].`)}if(v.length===1){l=v[0].otherSE;break}let g=null;for(let E=0,D=p.length;E<D;E++)if(p[E].point===a.point){g=E;break}if(g!==null){const E=p.splice(g)[0],D=c.splice(E.index);D.unshift(D[0].otherSE),n.push(new bb(D.reverse()));continue}p.push({index:c.length,point:a.point});const x=a.getLeftmostComparator(o);l=v.sort(x)[0].otherSE;break}n.push(new bb(c))}return n}getGeom(){let e=this.events[0].point;const n=[e];for(let c=1,h=this.events.length-1;c<h;c++){const p=this.events[c].point,v=this.events[c+1].point;Rd.orient(p,e,v)!==0&&(n.push(p),e=p)}if(n.length===1)return null;const r=n[0],i=n[1];Rd.orient(r,e,i)===0&&n.shift(),n.push(n[0]);const s=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:n.length-1,a=this.isExteriorRing()?n.length:-1,l=[];for(let c=o;c!=a;c+=s)l.push([n[c].x.toNumber(),n[c].y.toNumber()]);return l}isExteriorRing(){if(this._isExteriorRing===void 0){const e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var i,s;let e=this.events[0];for(let o=1,a=this.events.length;o<a;o++){const l=this.events[o];Hc.compare(e,l)>0&&(e=l)}let n=e.segment.prevInResult(),r=n?n.prevInResult():null;for(;;){if(!n)return null;if(!r)return n.ringOut;if(r.ringOut!==n.ringOut)return((i=r.ringOut)==null?void 0:i.enclosingRing())!==n.ringOut?n.ringOut:(s=n.ringOut)==null?void 0:s.enclosingRing();n=r.prevInResult(),r=n?n.prevInResult():null}}},c5=class{constructor(t){Je(this,"exteriorRing");Je(this,"interiorRings");this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=this.exteriorRing.getGeom();if(t===null)return null;const e=[t];for(let n=0,r=this.interiorRings.length;n<r;n++){const i=this.interiorRings[n].getGeom();i!==null&&e.push(i)}return e}},lz=class{constructor(t){Je(this,"rings");Je(this,"polys");this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const r=this.polys[e].getGeom();r!==null&&t.push(r)}return t}_composePolys(t){var n;const e=[];for(let r=0,i=t.length;r<i;r++){const s=t[r];if(!s.poly)if(s.isExteriorRing())e.push(new c5(s));else{const o=s.enclosingRing();o!=null&&o.poly||e.push(new c5(o)),(n=o==null?void 0:o.poly)==null||n.addInterior(s)}}return e}},uz=class{constructor(t,e=Hv.compare){Je(this,"queue");Je(this,"tree");Je(this,"segments");this.queue=t,this.tree=new Vv(e),this.segments=[]}process(t){const e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.delete(t.otherSE):this.tree.delete(e),n;t.isLeft&&this.tree.add(e);let r=e,i=e;do r=this.tree.lastBefore(r);while(r!=null&&r.consumedBy!=null);do i=this.tree.firstAfter(i);while(i!=null&&i.consumedBy!=null);if(t.isLeft){let s=null;if(r){const a=r.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(s=a),!r.isAnEndpoint(a))){const l=this._splitSafely(r,a);for(let c=0,h=l.length;c<h;c++)n.push(l[c])}}let o=null;if(i){const a=i.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(o=a),!i.isAnEndpoint(a))){const l=this._splitSafely(i,a);for(let c=0,h=l.length;c<h;c++)n.push(l[c])}}if(s!==null||o!==null){let a=null;s===null?a=o:o===null?a=s:a=Hc.comparePoints(s,o)<=0?s:o,this.queue.delete(e.rightSE),n.push(e.rightSE);const l=e.split(a);for(let c=0,h=l.length;c<h;c++)n.push(l[c])}n.length>0?(this.tree.delete(e),n.push(t)):(this.segments.push(e),e.prev=r)}else{if(r&&i){const s=r.getIntersection(i);if(s!==null){if(!r.isAnEndpoint(s)){const o=this._splitSafely(r,s);for(let a=0,l=o.length;a<l;a++)n.push(o[a])}if(!i.isAnEndpoint(s)){const o=this._splitSafely(i,s);for(let a=0,l=o.length;a<l;a++)n.push(o[a])}}}this.tree.delete(e)}return n}_splitSafely(t,e){this.tree.delete(t);const n=t.rightSE;this.queue.delete(n);const r=t.split(e);return r.push(n),t.consumedBy===void 0&&this.tree.add(t),r}},cz=class{constructor(){Je(this,"type");Je(this,"numMultiPolys")}run(t,e,n){wg.type=t;const r=[new h5(e,!0)];for(let c=0,h=n.length;c<h;c++)r.push(new h5(n[c],!1));if(wg.numMultiPolys=r.length,wg.type==="difference"){const c=r[0];let h=1;for(;h<r.length;)yb(r[h].bbox,c.bbox)!==null?h++:r.splice(h,1)}if(wg.type==="intersection")for(let c=0,h=r.length;c<h;c++){const p=r[c];for(let v=c+1,g=r.length;v<g;v++)if(yb(p.bbox,r[v].bbox)===null)return[]}const i=new Vv(Hc.compare);for(let c=0,h=r.length;c<h;c++){const p=r[c].getSweepEvents();for(let v=0,g=p.length;v<g;v++)i.add(p[v])}const s=new uz(i);let o=null;for(i.size!=0&&(o=i.first(),i.delete(o));o;){const c=s.process(o);for(let h=0,p=c.length;h<p;h++){const v=c[h];v.consumedBy===void 0&&i.add(v)}i.size!=0?(o=i.first(),i.delete(o)):o=null}Rd.reset();const a=az.factory(s.segments);return new lz(a).getGeom()}},wg=new cz,_b=wg,dz=0,Hv=class rv{constructor(e,n,r,i){Je(this,"id");Je(this,"leftSE");Je(this,"rightSE");Je(this,"rings");Je(this,"windings");Je(this,"ringOut");Je(this,"consumedBy");Je(this,"prev");Je(this,"_prevInResult");Je(this,"_beforeState");Je(this,"_afterState");Je(this,"_isInResult");this.id=++dz,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}static compare(e,n){const r=e.leftSE.point.x,i=n.leftSE.point.x,s=e.rightSE.point.x,o=n.rightSE.point.x;if(o.isLessThan(r))return 1;if(s.isLessThan(i))return-1;const a=e.leftSE.point.y,l=n.leftSE.point.y,c=e.rightSE.point.y,h=n.rightSE.point.y;if(r.isLessThan(i)){if(l.isLessThan(a)&&l.isLessThan(c))return 1;if(l.isGreaterThan(a)&&l.isGreaterThan(c))return-1;const p=e.comparePoint(n.leftSE.point);if(p<0)return 1;if(p>0)return-1;const v=n.comparePoint(e.rightSE.point);return v!==0?v:-1}if(r.isGreaterThan(i)){if(a.isLessThan(l)&&a.isLessThan(h))return-1;if(a.isGreaterThan(l)&&a.isGreaterThan(h))return 1;const p=n.comparePoint(e.leftSE.point);if(p!==0)return p;const v=e.comparePoint(n.rightSE.point);return v<0?1:v>0?-1:1}if(a.isLessThan(l))return-1;if(a.isGreaterThan(l))return 1;if(s.isLessThan(o)){const p=n.comparePoint(e.rightSE.point);if(p!==0)return p}if(s.isGreaterThan(o)){const p=e.comparePoint(n.rightSE.point);if(p<0)return 1;if(p>0)return-1}if(!s.eq(o)){const p=c.minus(a),v=s.minus(r),g=h.minus(l),x=o.minus(i);if(p.isGreaterThan(v)&&g.isLessThan(x))return 1;if(p.isLessThan(v)&&g.isGreaterThan(x))return-1}return s.isGreaterThan(o)?1:s.isLessThan(o)||c.isLessThan(h)?-1:c.isGreaterThan(h)?1:e.id<n.id?-1:e.id>n.id?1:0}static fromRing(e,n,r){let i,s,o;const a=Hc.comparePoints(e,n);if(a<0)i=e,s=n,o=1;else if(a>0)i=n,s=e,o=-1;else throw new Error(`Tried to create degenerate segment at [${e.x}, ${e.y}]`);const l=new Hc(i,!0),c=new Hc(s,!1);return new rv(l,c,[r],[o])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const e=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e.isLessThan(n)?e:n},ur:{x:this.rightSE.point.x,y:e.isGreaterThan(n)?e:n}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(e){return e.x.eq(this.leftSE.point.x)&&e.y.eq(this.leftSE.point.y)||e.x.eq(this.rightSE.point.x)&&e.y.eq(this.rightSE.point.y)}comparePoint(e){return Rd.orient(this.leftSE.point,e,this.rightSE.point)}getIntersection(e){const n=this.bbox(),r=e.bbox(),i=yb(n,r);if(i===null)return null;const s=this.leftSE.point,o=this.rightSE.point,a=e.leftSE.point,l=e.rightSE.point,c=rg(n,a)&&this.comparePoint(a)===0,h=rg(r,s)&&e.comparePoint(s)===0,p=rg(n,l)&&this.comparePoint(l)===0,v=rg(r,o)&&e.comparePoint(o)===0;if(h&&c)return v&&!p?o:!v&&p?l:null;if(h)return p&&s.x.eq(l.x)&&s.y.eq(l.y)?null:s;if(c)return v&&o.x.eq(a.x)&&o.y.eq(a.y)?null:a;if(v&&p)return null;if(v)return o;if(p)return l;const g=oz(s,this.vector(),a,e.vector());return g===null||!rg(i,g)?null:Rd.snap(g)}split(e){const n=[],r=e.events!==void 0,i=new Hc(e,!0),s=new Hc(e,!1),o=this.rightSE;this.replaceRightSE(s),n.push(s),n.push(i);const a=new rv(i,o,this.rings.slice(),this.windings.slice());return Hc.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),Hc.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),s.checkForConsuming()),n}swapEvents(){const e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}consume(e){let n=this,r=e;for(;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const i=rv.compare(n,r);if(i!==0){if(i>0){const s=n;n=r,r=s}if(n.prev===r){const s=n;n=r,r=s}for(let s=0,o=r.rings.length;s<o;s++){const a=r.rings[s],l=r.windings[s],c=n.rings.indexOf(a);c===-1?(n.rings.push(a),n.windings.push(l)):n.windings[c]+=l}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys;for(let a=0,l=this.rings.length;a<l;a++){const c=this.rings[a],h=this.windings[a],p=n.indexOf(c);p===-1?(n.push(c),r.push(h)):r[p]+=h}const s=[],o=[];for(let a=0,l=n.length;a<l;a++){if(r[a]===0)continue;const c=n[a],h=c.poly;if(o.indexOf(h)===-1)if(c.isExterior)s.push(h);else{o.indexOf(h)===-1&&o.push(h);const p=s.indexOf(c.poly);p!==-1&&s.splice(p,1)}}for(let a=0,l=s.length;a<l;a++){const c=s[a].multiPoly;i.indexOf(c)===-1&&i.push(c)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const e=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(_b.type){case"union":{const r=e.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{let r,i;e.length<n.length?(r=e.length,i=n.length):(r=n.length,i=e.length),this._isInResult=i===_b.numMultiPolys&&r<i;break}case"xor":{const r=Math.abs(e.length-n.length);this._isInResult=r%2===1;break}case"difference":{const r=i=>i.length===1&&i[0].isSubject;this._isInResult=r(e)!==r(n);break}}return this._isInResult}},d5=class{constructor(t,e,n){Je(this,"poly");Je(this,"isExterior");Je(this,"segments");Je(this,"bbox");if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=n,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=Rd.snap({x:new Yc(t[0][0]),y:new Yc(t[0][1])});this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let i=r;for(let s=1,o=t.length;s<o;s++){if(typeof t[s][0]!="number"||typeof t[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const a=Rd.snap({x:new Yc(t[s][0]),y:new Yc(t[s][1])});a.x.eq(i.x)&&a.y.eq(i.y)||(this.segments.push(Hv.fromRing(i,a,this)),a.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=a.x),a.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=a.y),a.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=a.x),a.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=a.y),i=a)}(!r.x.eq(i.x)||!r.y.eq(i.y))&&this.segments.push(Hv.fromRing(i,r,this))}getSweepEvents(){const t=[];for(let e=0,n=this.segments.length;e<n;e++){const r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}},hz=class{constructor(t,e){Je(this,"multiPoly");Je(this,"exteriorRing");Je(this,"interiorRings");Je(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new d5(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let n=1,r=t.length;n<r;n++){const i=new d5(t[n],this,!1);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=e}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let e=0,n=this.interiorRings.length;e<n;e++){const r=this.interiorRings[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)t.push(r[i])}return t}},h5=class{constructor(t,e){Je(this,"isSubject");Je(this,"polys");Je(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:new Yc(Number.POSITIVE_INFINITY),y:new Yc(Number.POSITIVE_INFINITY)},ur:{x:new Yc(Number.NEGATIVE_INFINITY),y:new Yc(Number.NEGATIVE_INFINITY)}};for(let n=0,r=t.length;n<r;n++){const i=new hz(t[n],this);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=e}getSweepEvents(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const r=this.polys[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)t.push(r[i])}return t}},fz=(t,...e)=>_b.run("intersection",t,e);Rd.set;function pz(t,e){var n,r,i,s,o,a,l,c,h,p,v=0,g=t.type==="FeatureCollection",x=t.type==="Feature",E=g?t.features.length:1;for(n=0;n<E;n++){for(a=g?t.features[n].geometry:x?t.geometry:t,c=g?t.features[n].properties:x?t.properties:{},h=g?t.features[n].bbox:x?t.bbox:void 0,p=g?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,h,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,h,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,h,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function gz(t,e={}){const n=[];if(pz(t,i=>{n.push(i.coordinates)}),n.length<2)throw new Error("Must specify at least 2 geometries");const r=fz(n[0],...n.slice(1));return r.length===0?null:r.length===1?Wu(r[0],e.properties):Bj(r,e.properties)}var mz=gz;function NE(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,h=0,p=0,v,g=t.type,x=g==="FeatureCollection",E=g==="Feature",D=x?t.features.length:1,M=0;M<D;M++){c=x?t.features[M].geometry:E?t.geometry:t,v=c?c.type==="GeometryCollection":!1,a=v?c.geometries.length:1;for(var A=0;A<a;A++){var z=0,Y=0;if(o=v?c.geometries[A]:c,o!==null){l=o.coordinates;var ne=o.type;switch(h=0,ne){case null:break;case"Point":if(e(l,p,M,z,Y)===!1)return!1;p++,z++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,M,z,Y)===!1)return!1;p++,ne==="MultiPoint"&&z++}ne==="LineString"&&z++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(e(l[r][i],p,M,z,Y)===!1)return!1;p++}ne==="MultiLineString"&&z++,ne==="Polygon"&&Y++}ne==="Polygon"&&z++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(Y=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-h;s++){if(e(l[r][i][s],p,M,z,Y)===!1)return!1;p++}Y++}z++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(NE(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function vz(t,e){var n,r,i,s,o,a,l,c,h,p,v=0,g=t.type==="FeatureCollection",x=t.type==="Feature",E=g?t.features.length:1;for(n=0;n<E;n++){for(a=g?t.features[n].geometry:x?t.geometry:t,c=g?t.features[n].properties:x?t.properties:{},h=g?t.features[n].bbox:x?t.bbox:void 0,p=g?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,h,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,h,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,h,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function yz(t,e){vz(t,function(n,r,i,s,o){var a=n===null?null:n.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(kp(n,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<n.coordinates.length;c++){var h=n.coordinates[c],p={type:l,coordinates:h};if(e(kp(p,i),r,c)===!1)return!1}})}function bz(t,e){yz(t,function(n,r,i){var s=0;if(n.geometry){var o=n.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,c=0,h=0;if(NE(n,function(p,v,g,x,E){if(a===void 0||r>l||x>c||E>h){a=p,l=r,c=x,h=E,s=0;return}var D=mc([a,p],n.properties);if(e(D,r,i,E,s)===!1)return!1;s++,a=p})===!1)return!1}}})}function _z(t,e,n){var r=n,i=!1;return bz(t,function(s,o,a,l,c){i===!1&&n===void 0?r=s:r=e(r,s,o,a,l,c),i=!0}),r}function Wv(t,e={}){return _z(t,(n,r)=>{const i=r.geometry.coordinates;return n+F_(i[0],i[1],e)},0)}var Hh=Wv;class uh extends Zn.Polygon{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Je(this,"properties");this.properties=An.measure("Polygon.constructor.initProperties",()=>({type:"Polygon",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{color:r.color||"#2b6451",weight:r.weight||3,opacity:r.opacity||1,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity||.2,dashArray:r.dashArray||"",name:r.name||""}})),this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){An.measure("Polygon.updateProperties",()=>{var n,r,i,s,o;try{const a=this.getLatLngs()[0];if(!a||a.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const l=a.map(M=>[M.lng,M.lat]);l.push(l[0]);const c=Wu([l]),h=EE(c),p=Wv(mc([...l]),{units:"meters"}),v=Hg(c),g=Zn.latLng(v.geometry.coordinates[1],v.geometry.coordinates[0]),x=((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||"",E=((i=this.properties)==null?void 0:i.category)||"forages",D=((s=this.properties)==null?void 0:s.accessLevel)||"visitor";this.properties={type:"Polygon",coordinates:a.map(M=>({lat:M.lat,lng:M.lng})),surface:h,perimeter:p,center:{lat:g.lat,lng:g.lng},vertices:a.length,category:E,accessLevel:D,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:x}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate polygon properties",a)}})}setName(n){An.measure("Polygon.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return An.measure("Polygon.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}setLatLngs(n){return An.measure("Polygon.setLatLngs",()=>(super.setLatLngs(n),this.updateProperties(),this))}getMidPoints(){return An.measure("Polygon.getMidPoints",()=>{const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(Zn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return r})}moveVertex(n,r){An.measure("Polygon.moveVertex",()=>{const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i[n]=r,Zn.Polygon.prototype.setLatLngs.call(this,[i]))})}addVertex(n,r){An.measure("Polygon.addVertex",()=>{const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i.splice((n+1)%i.length,0,r),Zn.Polygon.prototype.setLatLngs.call(this,[i]))})}move(n){return An.measure("Polygon.move",()=>{const i=this.getLatLngs()[0].map(s=>Zn.latLng(s.lat+n.lat,s.lng+n.lng));return Zn.Polygon.prototype.setLatLngs.call(this,[i]),this})}getCenter(){return An.measure("Polygon.getCenter",()=>{const n=this.getLatLngs()[0];if(!n||n.length===0)return new Zn.LatLng(0,0);try{const r=n.filter(c=>c&&typeof c.lat=="number"&&typeof c.lng=="number"&&!isNaN(c.lat)&&!isNaN(c.lng)&&Math.abs(c.lat)<=90&&Math.abs(c.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new Zn.LatLng(0,0);const i=r.map(c=>[c.lng,c.lat]);i.push(i[0]);const s=Wu([i]),o=Hg(s),a=o.geometry.coordinates[1],l=o.geometry.coordinates[0];if(typeof a!="number"||typeof l!="number"||isNaN(a)||isNaN(l)||Math.abs(a)>90||Math.abs(l)>180)throw new Error("Centroid calculé invalide");return Zn.latLng(a,l)}catch(r){console.warn("Erreur lors du calcul du centroïde avec turf.js, utilisation de la méthode simple",r);let i=0,s=0,o=0;for(const a of n)a&&typeof a.lat=="number"&&typeof a.lng=="number"&&!isNaN(a.lat)&&!isNaN(a.lng)&&Math.abs(a.lat)<=90&&Math.abs(a.lng)<=180&&(i+=a.lat,s+=a.lng,o++);return o===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new Zn.LatLng(0,0)):new Zn.LatLng(i/o,s/o)}})}getSegmentLengths(){return An.measure("Polygon.getSegmentLengths",()=>{const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(s.distanceTo(o))}return r})}}class pa extends Zn.Polyline{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Je(this,"properties");Je(this,"cachedProperties",{});Je(this,"needsUpdate",!0);this.properties=An.measure("Line.constructor.initProperties",()=>({type:"Line",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...r||{},name:r.name||""}})),this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){An.measure("Line.updateProperties",()=>{var i,s,o,a,l;const n=this.getLatLngs();if(!n||n.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=n.map(c=>[c.lng,c.lat]);try{const c=mc(r),h=Wv(c,{units:"meters"});let p;if(n.length===2)p=Zn.latLng((n[0].lat+n[1].lat)/2,(n[0].lng+n[1].lng)/2);else{const D=r5(c,h/2,{units:"meters"});p=Zn.latLng(D.geometry.coordinates[1],D.geometry.coordinates[0])}const v=10,g=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"",x=((o=this.properties)==null?void 0:o.category)||"forages",E=((a=this.properties)==null?void 0:a.accessLevel)||"visitor";this.properties={type:"Line",length:h,coordinates:n.map(D=>({lat:D.lat,lng:D.lng})),center:{lat:p.lat,lng:p.lng},vertices:n.length,surfaceInfluence:h*v,dimensions:{width:v},category:x,accessLevel:E,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((l=this.options)==null?void 0:l.dashArray)||"",name:g}},this.cachedProperties.length=h,this.cachedProperties.center=p,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(c){console.error("Failed to calculate line properties",c)}})}setName(n){An.measure("Line.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return An.measure("Line.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}invalidateCache(){An.measure("Line.invalidateCache",()=>{this.needsUpdate=!0,this.cachedProperties={}})}setLatLngs(n){return super.setLatLngs(n),this.needsUpdate=!0,this.cachedProperties={},this.fire("latlngs:updated",{latlngs:this.getLatLngs()}),this}getMidPoints(){return An.measure("Line.getMidPoints",()=>{if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];if(!s||!o){console.warn("Points invalides détectés pour le segment",i);continue}r.push(Zn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return this.cachedProperties.midPoints=r,r})}getMidPointAt(n){return An.measure("Line.getMidPointAt",()=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return null;const i=r[n],s=r[n+1];return!i||!s?(console.warn("Points invalides pour calcul du midpoint au segment",n),null):Zn.latLng((i.lat+s.lat)/2,(i.lng+s.lng)/2)})}moveVertex(n,r,i=!1){An.measure("Line.moveVertex",()=>{const s=this.getLatLngs();n>=0&&n<s.length&&(s[n]=r,this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("vertex:moved",{index:n,latlng:r,allPoints:s}),i&&this.updateProperties())})}addVertex(n,r,i=!1){An.measure("Line.addVertex",()=>{const s=this.getLatLngs();n>=0&&n<s.length-1&&(s.splice(n+1,0,r),Zn.Polyline.prototype.setLatLngs.call(this,s),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,i&&this.updateProperties())})}move(n,r=!0){return An.measure("Line.move",()=>{this.fire("move:start");const i=this.getLatLngs(),s=i.map(o=>Zn.latLng(o.lat+n.lat,o.lng+n.lng));return this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("move",{delta:n,newPositions:s,oldPositions:i}),r&&(this.updateProperties(),this.fire("properties:updated",{shape:this,properties:this.properties}),this.fire("move:end")),this})}getCenter(){return An.measure("Line.getCenter",()=>{if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const n=this.getLatLngs();if(n.length<2)return n[0]||new Zn.LatLng(0,0);try{const r=n.map(l=>[l.lng,l.lat]),i=mc(r),s=Wv(i,{units:"meters"}),o=r5(i,s/2,{units:"meters"}),a=Zn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0]);return this.cachedProperties.center=a,a}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const i=n.reduce((a,l)=>a+l.lat,0)/n.length,s=n.reduce((a,l)=>a+l.lng,0)/n.length,o=new Zn.LatLng(i,s);return this.cachedProperties.center=o,o}})}getSegmentLengths(){return An.measure("Line.getSegmentLengths",()=>{if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];r.push(s.distanceTo(o))}return this.cachedProperties.segmentLengths=r,r})}getSegmentLengthAt(n){return An.measure("Line.getSegmentLengthAt",()=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return 0;const i=r[n],s=r[n+1];return i.distanceTo(s)})}getLengthToVertex(n){return An.measure("Line.getLengthToVertex",()=>{const r=this.getLatLngs();let i=0;if(n<=0||r.length<2)return 0;for(let s=0;s<Math.min(n,r.length-1);s++)i+=r[s].distanceTo(r[s+1]);return i})}getLength(){return An.measure("Line.getLength",()=>{if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const n=this.getLatLngs();let r=0;for(let i=0;i<n.length-1;i++)r+=n[i].distanceTo(n[i+1]);return this.cachedProperties.length=r,r})}}var Gv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Gv.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,h="__lodash_placeholder__",p=1,v=2,g=4,x=1,E=2,D=1,M=2,A=4,z=8,Y=16,ne=32,ge=64,pe=128,O=256,j=512,J=30,U="...",R=800,V=16,$=1,B=2,I=3,Q=1/0,G=9007199254740991,_e=17976931348623157e292,ve=NaN,qe=4294967295,re=qe-1,K=qe>>>1,Z=[["ary",pe],["bind",D],["bindKey",M],["curry",z],["curryRight",Y],["flip",j],["partial",ne],["partialRight",ge],["rearg",O]],oe="[object Arguments]",de="[object Array]",ye="[object AsyncFunction]",he="[object Boolean]",X="[object Date]",Ae="[object DOMException]",De="[object Error]",Xe="[object Function]",fe="[object GeneratorFunction]",ee="[object Map]",se="[object Number]",le="[object Null]",je="[object Object]",$e="[object Promise]",et="[object Proxy]",Ee="[object RegExp]",me="[object Set]",We="[object String]",ct="[object Symbol]",pt="[object Undefined]",gt="[object WeakMap]",st="[object WeakSet]",qt="[object ArrayBuffer]",gn="[object DataView]",Qe="[object Float32Array]",lt="[object Float64Array]",it="[object Int8Array]",$t="[object Int16Array]",Jt="[object Int32Array]",Dn="[object Uint8Array]",vn="[object Uint8ClampedArray]",Tn="[object Uint16Array]",Jn="[object Uint32Array]",en=/\b__p \+= '';/g,xn=/\b(__p \+=) '' \+/g,Cn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,er=/&(?:amp|lt|gt|quot|#39);/g,pr=/[&<>"']/g,xr=RegExp(er.source),lr=RegExp(pr.source),Jr=/<%-([\s\S]+?)%>/g,Bs=/<%([\s\S]+?)%>/g,Di=/<%=([\s\S]+?)%>/g,Fo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rs=/^\w*$/,tr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fs=/[\\^$.*+?()[\]{}|]/g,jo=RegExp(Fs.source),gs=/^\s+/,qn=/\s/,Ze=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ye=/\{\n\/\* \[wrapped with (.+)\] \*/,Ut=/,? & /,En=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,On=/[()=,{}\[\]\/\s]/,Ln=/\\(\\)?/g,jt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$n=/\w*$/,xt=/^[-+]0x[0-9a-f]+$/i,Kt=/^0b[01]+$/i,Yn=/^\[object .+?Constructor\]$/,gr=/^0o[0-7]+$/i,Sr=/^(?:0|[1-9]\d*)$/,an=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,nn=/($^)/,$r=/['\n\r\u2028\u2029\\]/g,Qr="\\ud800-\\udfff",os="\\u0300-\\u036f",si="\\ufe20-\\ufe2f",mr="\\u20d0-\\u20ff",Fr=os+si+mr,ei="\\u2700-\\u27bf",Pr="a-z\\xdf-\\xf6\\xf8-\\xff",cn="\\xac\\xb1\\xd7\\xf7",Xi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Vr="\\u2000-\\u206f",ur=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Un="A-Z\\xc0-\\xd6\\xd8-\\xde",Ni="\\ufe0e\\ufe0f",kr=cn+Xi+Vr+ur,br="['’]",no="["+Qr+"]",Cr="["+kr+"]",Pn="["+Fr+"]",_r="\\d+",bn="["+ei+"]",Ur="["+Pr+"]",Ji="[^"+Qr+kr+_r+ei+Pr+Un+"]",cs="\\ud83c[\\udffb-\\udfff]",ms="(?:"+Pn+"|"+cs+")",Si="[^"+Qr+"]",Ps="(?:\\ud83c[\\udde6-\\uddff]){2}",Wr="[\\ud800-\\udbff][\\udc00-\\udfff]",js="["+Un+"]",as="\\u200d",ys="(?:"+Ur+"|"+Ji+")",bi="(?:"+js+"|"+Ji+")",Sn="(?:"+br+"(?:d|ll|m|re|s|t|ve))?",pn="(?:"+br+"(?:D|LL|M|RE|S|T|VE))?",pi=ms+"?",ro="["+Ni+"]?",Hi="(?:"+as+"(?:"+[Si,Ps,Wr].join("|")+")"+ro+pi+")*",lu="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",wl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",vr=ro+pi+Hi,Mr="(?:"+[bn,Ps,Wr].join("|")+")"+vr,Gr="(?:"+[Si+Pn+"?",Pn,Ps,Wr,no].join("|")+")",qr=RegExp(br,"g"),io=RegExp(Pn,"g"),so=RegExp(cs+"(?="+cs+")|"+Gr+vr,"g"),oo=RegExp([js+"?"+Ur+"+"+Sn+"(?="+[Cr,js,"$"].join("|")+")",bi+"+"+pn+"(?="+[Cr,js+ys,"$"].join("|")+")",js+"?"+ys+"+"+Sn,js+"+"+pn,wl,lu,_r,Mr].join("|"),"g"),zo=RegExp("["+as+Qr+Fr+Ni+"]"),_a=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,uu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Da=-1,Lr={};Lr[Qe]=Lr[lt]=Lr[it]=Lr[$t]=Lr[Jt]=Lr[Dn]=Lr[vn]=Lr[Tn]=Lr[Jn]=!0,Lr[oe]=Lr[de]=Lr[qt]=Lr[he]=Lr[gn]=Lr[X]=Lr[De]=Lr[Xe]=Lr[ee]=Lr[se]=Lr[je]=Lr[Ee]=Lr[me]=Lr[We]=Lr[gt]=!1;var jr={};jr[oe]=jr[de]=jr[qt]=jr[gn]=jr[he]=jr[X]=jr[Qe]=jr[lt]=jr[it]=jr[$t]=jr[Jt]=jr[ee]=jr[se]=jr[je]=jr[Ee]=jr[me]=jr[We]=jr[ct]=jr[Dn]=jr[vn]=jr[Tn]=jr[Jn]=!0,jr[De]=jr[Xe]=jr[gt]=!1;var Na={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ri={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$o={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ws={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Il=parseFloat,cu=parseInt,Au=typeof Aa=="object"&&Aa&&Aa.Object===Object&&Aa,oi=typeof self=="object"&&self&&self.Object===Object&&self,bs=Au||oi||Function("return this")(),hr=e&&!e.nodeType&&e,_s=hr&&!0&&t&&!t.nodeType&&t,Bl=_s&&_s.exports===hr,Ka=Bl&&Au.process,Qi=function(){try{var St=_s&&_s.require&&_s.require("util").types;return St||Ka&&Ka.binding&&Ka.binding("util")}catch{}}(),Tu=Qi&&Qi.isArrayBuffer,Oa=Qi&&Qi.isDate,du=Qi&&Qi.isMap,hu=Qi&&Qi.isRegExp,da=Qi&&Qi.isSet,fu=Qi&&Qi.isTypedArray;function Ci(St,Yt,Ot){switch(Ot.length){case 0:return St.call(Yt);case 1:return St.call(Yt,Ot[0]);case 2:return St.call(Yt,Ot[0],Ot[1]);case 3:return St.call(Yt,Ot[0],Ot[1],Ot[2])}return St.apply(Yt,Ot)}function kc(St,Yt,Ot,Bn){for(var nr=-1,Ar=St==null?0:St.length;++nr<Ar;){var es=St[nr];Yt(Bn,es,Ot(es),St)}return Bn}function Gs(St,Yt){for(var Ot=-1,Bn=St==null?0:St.length;++Ot<Bn&&Yt(St[Ot],Ot,St)!==!1;);return St}function wa(St,Yt){for(var Ot=St==null?0:St.length;Ot--&&Yt(St[Ot],Ot,St)!==!1;);return St}function pu(St,Yt){for(var Ot=-1,Bn=St==null?0:St.length;++Ot<Bn;)if(!Yt(St[Ot],Ot,St))return!1;return!0}function xa(St,Yt){for(var Ot=-1,Bn=St==null?0:St.length,nr=0,Ar=[];++Ot<Bn;){var es=St[Ot];Yt(es,Ot,St)&&(Ar[nr++]=es)}return Ar}function Rl(St,Yt){var Ot=St==null?0:St.length;return!!Ot&&hn(St,Yt,0)>-1}function Fl(St,Yt,Ot){for(var Bn=-1,nr=St==null?0:St.length;++Bn<nr;)if(Ot(Yt,St[Bn]))return!0;return!1}function Ei(St,Yt){for(var Ot=-1,Bn=St==null?0:St.length,nr=Array(Bn);++Ot<Bn;)nr[Ot]=Yt(St[Ot],Ot,St);return nr}function ra(St,Yt){for(var Ot=-1,Bn=Yt.length,nr=St.length;++Ot<Bn;)St[nr+Ot]=Yt[Ot];return St}function Za(St,Yt,Ot,Bn){var nr=-1,Ar=St==null?0:St.length;for(Bn&&Ar&&(Ot=St[++nr]);++nr<Ar;)Ot=Yt(Ot,St[nr],nr,St);return Ot}function ws(St,Yt,Ot,Bn){var nr=St==null?0:St.length;for(Bn&&nr&&(Ot=St[--nr]);nr--;)Ot=Yt(Ot,St[nr],nr,St);return Ot}function F(St,Yt){for(var Ot=-1,Bn=St==null?0:St.length;++Ot<Bn;)if(Yt(St[Ot],Ot,St))return!0;return!1}var xe=Er("length");function tt(St){return St.split("")}function ft(St){return St.match(En)||[]}function Mt(St,Yt,Ot){var Bn;return Ot(St,function(nr,Ar,es){if(Yt(nr,Ar,es))return Bn=Ar,!1}),Bn}function Ht(St,Yt,Ot,Bn){for(var nr=St.length,Ar=Ot+(Bn?1:-1);Bn?Ar--:++Ar<nr;)if(Yt(St[Ar],Ar,St))return Ar;return-1}function hn(St,Yt,Ot){return Yt===Yt?zs(St,Yt,Ot):Ht(St,Hn,Ot)}function Fn(St,Yt,Ot,Bn){for(var nr=Ot-1,Ar=St.length;++nr<Ar;)if(Bn(St[nr],Yt))return nr;return-1}function Hn(St){return St!==St}function cr(St,Yt){var Ot=St==null?0:St.length;return Ot?Pi(St,Yt)/Ot:ve}function Er(St){return function(Yt){return Yt==null?n:Yt[St]}}function Yr(St){return function(Yt){return St==null?n:St[Yt]}}function Yi(St,Yt,Ot,Bn,nr){return nr(St,function(Ar,es,Mi){Ot=Bn?(Bn=!1,Ar):Yt(Ot,Ar,es,Mi)}),Ot}function _i(St,Yt){var Ot=St.length;for(St.sort(Yt);Ot--;)St[Ot]=St[Ot].value;return St}function Pi(St,Yt){for(var Ot,Bn=-1,nr=St.length;++Bn<nr;){var Ar=Yt(St[Bn]);Ar!==n&&(Ot=Ot===n?Ar:Ot+Ar)}return Ot}function xs(St,Yt){for(var Ot=-1,Bn=Array(St);++Ot<St;)Bn[Ot]=Yt(Ot);return Bn}function Ms(St,Yt){return Ei(Yt,function(Ot){return[Ot,St[Ot]]})}function ia(St){return St&&St.slice(0,Ja(St)+1).replace(gs,"")}function Kr(St){return function(Yt){return St(Yt)}}function ao(St,Yt){return Ei(Yt,function(Ot){return St[Ot]})}function jl(St,Yt){return St.has(Yt)}function So(St,Yt){for(var Ot=-1,Bn=St.length;++Ot<Bn&&hn(Yt,St[Ot],0)>-1;);return Ot}function Du(St,Yt){for(var Ot=St.length;Ot--&&hn(Yt,St[Ot],0)>-1;);return Ot}function Ia(St,Yt){for(var Ot=St.length,Bn=0;Ot--;)St[Ot]===Yt&&++Bn;return Bn}var Qu=Yr(Na),xl=Yr(Ri);function Ll(St){return"\\"+Ws[St]}function ks(St,Yt){return St==null?n:St[Yt]}function Ba(St){return zo.test(St)}function sa(St){return _a.test(St)}function Vo(St){for(var Yt,Ot=[];!(Yt=St.next()).done;)Ot.push(Yt.value);return Ot}function zl(St){var Yt=-1,Ot=Array(St.size);return St.forEach(function(Bn,nr){Ot[++Yt]=[nr,Bn]}),Ot}function lo(St,Yt){return function(Ot){return St(Yt(Ot))}}function Co(St,Yt){for(var Ot=-1,Bn=St.length,nr=0,Ar=[];++Ot<Bn;){var es=St[Ot];(es===Yt||es===h)&&(St[Ot]=h,Ar[nr++]=Ot)}return Ar}function Eo(St){var Yt=-1,Ot=Array(St.size);return St.forEach(function(Bn){Ot[++Yt]=Bn}),Ot}function Ac(St){var Yt=-1,Ot=Array(St.size);return St.forEach(function(Bn){Ot[++Yt]=[Bn,Bn]}),Ot}function zs(St,Yt,Ot){for(var Bn=Ot-1,nr=St.length;++Bn<nr;)if(St[Bn]===Yt)return Bn;return-1}function Xa(St,Yt,Ot){for(var Bn=Ot+1;Bn--;)if(St[Bn]===Yt)return Bn;return Bn}function uo(St){return Ba(St)?ho(St):xe(St)}function co(St){return Ba(St)?qs(St):tt(St)}function Ja(St){for(var Yt=St.length;Yt--&&qn.test(St.charAt(Yt)););return Yt}var Qa=Yr($o);function ho(St){for(var Yt=so.lastIndex=0;so.test(St);)++Yt;return Yt}function qs(St){return St.match(so)||[]}function Ra(St){return St.match(oo)||[]}var oa=function St(Yt){Yt=Yt==null?bs:fo.defaults(bs.Object(),Yt,fo.pick(bs,uu));var Ot=Yt.Array,Bn=Yt.Date,nr=Yt.Error,Ar=Yt.Function,es=Yt.Math,Mi=Yt.Object,gu=Yt.RegExp,Po=Yt.String,ts=Yt.TypeError,Fa=Ot.prototype,el=Ar.prototype,ja=Mi.prototype,za=Yt["__core-js_shared__"],$a=el.toString,ai=ja.hasOwnProperty,La=0,Ys=function(){var f=/[^.]+$/.exec(za&&za.keys&&za.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),ki=ja.toString,Fi=$a.call(Mi),Ls=bs._,Wi=gu("^"+$a.call(ai).replace(Fs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aa=Bl?Yt.Buffer:n,Uo=Yt.Symbol,ha=Yt.Uint8Array,ec=aa?aa.allocUnsafe:n,Va=lo(Mi.getPrototypeOf,Mi),As=Mi.create,Ui=ja.propertyIsEnumerable,po=Fa.splice,Ho=Uo?Uo.isConcatSpreadable:n,wr=Uo?Uo.iterator:n,tl=Uo?Uo.toStringTag:n,nl=function(){try{var f=Fh(Mi,"defineProperty");return f({},"",{}),f}catch{}}(),Sa=Yt.clearTimeout!==bs.clearTimeout&&Yt.clearTimeout,Mo=Bn&&Bn.now!==bs.Date.now&&Bn.now,sd=Yt.setTimeout!==bs.setTimeout&&Yt.setTimeout,Ks=es.ceil,Zs=es.floor,Ca=Mi.getOwnPropertySymbols,u=aa?aa.isBuffer:n,y=Yt.isFinite,P=Fa.join,W=lo(Mi.keys,Mi),ue=es.max,Pe=es.min,ut=Bn.now,Nt=Yt.parseInt,Wt=es.random,ln=Fa.reverse,jn=Fh(Yt,"DataView"),ir=Fh(Yt,"Map"),Hr=Fh(Yt,"Promise"),Ts=Fh(Yt,"Set"),ds=Fh(Yt,"WeakMap"),Xs=Fh(Mi,"create"),ns=ds&&new ds,Wo={},od=jh(jn),Ua=jh(ir),Ea=jh(Hr),fa=jh(Ts),Th=jh(ds),Nu=Uo?Uo.prototype:n,wi=Nu?Nu.valueOf:n,go=Nu?Nu.toString:n;function Ie(f){if(ko(f)&&!ui(f)&&!(f instanceof Zr)){if(f instanceof Js)return f;if(ai.call(f,"__wrapped__"))return Hw(f)}return new Js(f)}var Go=function(){function f(){}return function(b){if(!vo(b))return{};if(As)return As(b);f.prototype=b;var N=new f;return f.prototype=n,N}}();function tc(){}function Js(f,b){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=n}Ie.templateSettings={escape:Jr,evaluate:Bs,interpolate:Di,variable:"",imports:{_:Ie}},Ie.prototype=tc.prototype,Ie.prototype.constructor=Ie,Js.prototype=Go(tc.prototype),Js.prototype.constructor=Js;function Zr(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=qe,this.__views__=[]}function $d(){var f=new Zr(this.__wrapped__);return f.__actions__=Vl(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=Vl(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=Vl(this.__views__),f}function Mf(){if(this.__filtered__){var f=new Zr(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function Vd(){var f=this.__wrapped__.value(),b=this.__dir__,N=ui(f),ie=b<0,Se=N?f.length:0,Ve=JM(0,Se,this.__views__),at=Ve.start,_t=Ve.end,Dt=_t-at,un=ie?_t:at-1,dn=this.__iteratees__,yn=dn.length,Gn=0,fr=Pe(Dt,this.__takeCount__);if(!N||!ie&&Se==Dt&&fr==Dt)return Ou(f,this.__actions__);var Dr=[];e:for(;Dt--&&Gn<fr;){un+=b;for(var vi=-1,Nr=f[un];++vi<yn;){var Ai=dn[vi],zi=Ai.iteratee,yu=Ai.type,Pl=zi(Nr);if(yu==B)Nr=Pl;else if(!Pl){if(yu==$)continue e;break e}}Dr[Gn++]=Nr}return Dr}Zr.prototype=Go(tc.prototype),Zr.prototype.constructor=Zr;function Sl(f){var b=-1,N=f==null?0:f.length;for(this.clear();++b<N;){var ie=f[b];this.set(ie[0],ie[1])}}function ad(){this.__data__=Xs?Xs(null):{},this.size=0}function Dh(f){var b=this.has(f)&&delete this.__data__[f];return this.size-=b?1:0,b}function Vp(f){var b=this.__data__;if(Xs){var N=b[f];return N===l?n:N}return ai.call(b,f)?b[f]:n}function Tc(f){var b=this.__data__;return Xs?b[f]!==n:ai.call(b,f)}function Ud(f,b){var N=this.__data__;return this.size+=this.has(f)?0:1,N[f]=Xs&&b===n?l:b,this}Sl.prototype.clear=ad,Sl.prototype.delete=Dh,Sl.prototype.get=Vp,Sl.prototype.has=Tc,Sl.prototype.set=Ud;function mu(f){var b=-1,N=f==null?0:f.length;for(this.clear();++b<N;){var ie=f[b];this.set(ie[0],ie[1])}}function Up(){this.__data__=[],this.size=0}function Hd(f){var b=this.__data__,N=Lt(b,f);if(N<0)return!1;var ie=b.length-1;return N==ie?b.pop():po.call(b,N,1),--this.size,!0}function Wd(f){var b=this.__data__,N=Lt(b,f);return N<0?n:b[N][1]}function kf(f){return Lt(this.__data__,f)>-1}function Af(f,b){var N=this.__data__,ie=Lt(N,f);return ie<0?(++this.size,N.push([f,b])):N[ie][1]=b,this}mu.prototype.clear=Up,mu.prototype.delete=Hd,mu.prototype.get=Wd,mu.prototype.has=kf,mu.prototype.set=Af;function rl(f){var b=-1,N=f==null?0:f.length;for(this.clear();++b<N;){var ie=f[b];this.set(ie[0],ie[1])}}function Tf(){this.size=0,this.__data__={hash:new Sl,map:new(ir||mu),string:new Sl}}function Df(f){var b=Jm(this,f).delete(f);return this.size-=b?1:0,b}function Nf(f){return Jm(this,f).get(f)}function w(f){return Jm(this,f).has(f)}function T(f,b){var N=Jm(this,f),ie=N.size;return N.set(f,b),this.size+=N.size==ie?0:1,this}rl.prototype.clear=Tf,rl.prototype.delete=Df,rl.prototype.get=Nf,rl.prototype.has=w,rl.prototype.set=T;function q(f){var b=-1,N=f==null?0:f.length;for(this.__data__=new rl;++b<N;)this.add(f[b])}function ce(f){return this.__data__.set(f,l),this}function Le(f){return this.__data__.has(f)}q.prototype.add=q.prototype.push=ce,q.prototype.has=Le;function Me(f){var b=this.__data__=new mu(f);this.size=b.size}function Te(){this.__data__=new mu,this.size=0}function Oe(f){var b=this.__data__,N=b.delete(f);return this.size=b.size,N}function Re(f){return this.__data__.get(f)}function Ke(f){return this.__data__.has(f)}function vt(f,b){var N=this.__data__;if(N instanceof mu){var ie=N.__data__;if(!ir||ie.length<i-1)return ie.push([f,b]),this.size=++N.size,this;N=this.__data__=new rl(ie)}return N.set(f,b),this.size=N.size,this}Me.prototype.clear=Te,Me.prototype.delete=Oe,Me.prototype.get=Re,Me.prototype.has=Ke,Me.prototype.set=vt;function Rt(f,b){var N=ui(f),ie=!N&&zh(f),Se=!N&&!ie&&qd(f),Ve=!N&&!ie&&!Se&&Vf(f),at=N||ie||Se||Ve,_t=at?xs(f.length,Po):[],Dt=_t.length;for(var un in f)(b||ai.call(f,un))&&!(at&&(un=="length"||Se&&(un=="offset"||un=="parent")||Ve&&(un=="buffer"||un=="byteLength"||un=="byteOffset")||fd(un,Dt)))&&_t.push(un);return _t}function Ft(f){var b=f.length;return b?f[Ih(0,b-1)]:n}function Pt(f,b){return Qm(Vl(f),sr(b,0,f.length))}function Xt(f){return Qm(Vl(f))}function Gt(f,b,N){(N!==n&&!ac(f[b],N)||N===n&&!(b in f))&&Rn(f,b,N)}function yt(f,b,N){var ie=f[b];(!(ai.call(f,b)&&ac(ie,N))||N===n&&!(b in f))&&Rn(f,b,N)}function Lt(f,b){for(var N=f.length;N--;)if(ac(f[N][0],b))return N;return-1}function rn(f,b,N,ie){return H(f,function(Se,Ve,at){b(ie,Se,N(Se),at)}),ie}function fn(f,b){return f&&Oc(b,Pa(b),f)}function sn(f,b){return f&&Oc(b,Hl(b),f)}function Rn(f,b,N){b=="__proto__"&&nl?nl(f,b,{configurable:!0,enumerable:!0,value:N,writable:!0}):f[b]=N}function Nn(f,b){for(var N=-1,ie=b.length,Se=Ot(ie),Ve=f==null;++N<ie;)Se[N]=Ve?n:y1(f,b[N]);return Se}function sr(f,b,N){return f===f&&(N!==n&&(f=f<=N?f:N),b!==n&&(f=f>=b?f:b)),f}function d(f,b,N,ie,Se,Ve){var at,_t=b&p,Dt=b&v,un=b&g;if(N&&(at=Se?N(f,ie,Se,Ve):N(f)),at!==n)return at;if(!vo(f))return f;var dn=ui(f);if(dn){if(at=ek(f),!_t)return Vl(f,at)}else{var yn=sl(f),Gn=yn==Xe||yn==fe;if(qd(f))return mw(f,_t);if(yn==je||yn==oe||Gn&&!Se){if(at=Dt||Gn?{}:Iw(f),!_t)return Dt?UM(f,sn(at,f)):VM(f,fn(at,f))}else{if(!jr[yn])return Se?f:{};at=tk(f,yn,_t)}}Ve||(Ve=new Me);var fr=Ve.get(f);if(fr)return fr;Ve.set(f,at),cx(f)?f.forEach(function(Nr){at.add(d(Nr,b,N,Nr,f,Ve))}):lx(f)&&f.forEach(function(Nr,Ai){at.set(Ai,d(Nr,b,N,Ai,f,Ve))});var Dr=un?Dt?i1:r1:Dt?Hl:Pa,vi=dn?n:Dr(f);return Gs(vi||f,function(Nr,Ai){vi&&(Ai=Nr,Nr=f[Ai]),yt(at,Ai,d(Nr,b,N,Ai,f,Ve))}),at}function m(f){var b=Pa(f);return function(N){return _(N,f,b)}}function _(f,b,N){var ie=N.length;if(f==null)return!ie;for(f=Mi(f);ie--;){var Se=N[ie],Ve=b[Se],at=f[Se];if(at===n&&!(Se in f)||!Ve(at))return!1}return!0}function C(f,b,N){if(typeof f!="function")throw new ts(o);return Yp(function(){f.apply(n,N)},b)}function k(f,b,N,ie){var Se=-1,Ve=Rl,at=!0,_t=f.length,Dt=[],un=b.length;if(!_t)return Dt;N&&(b=Ei(b,Kr(N))),ie?(Ve=Fl,at=!1):b.length>=i&&(Ve=jl,at=!1,b=new q(b));e:for(;++Se<_t;){var dn=f[Se],yn=N==null?dn:N(dn);if(dn=ie||dn!==0?dn:0,at&&yn===yn){for(var Gn=un;Gn--;)if(b[Gn]===yn)continue e;Dt.push(dn)}else Ve(b,yn,ie)||Dt.push(dn)}return Dt}var H=ww(tn),te=ww(_n,!0);function ae(f,b){var N=!0;return H(f,function(ie,Se,Ve){return N=!!b(ie,Se,Ve),N}),N}function be(f,b,N){for(var ie=-1,Se=f.length;++ie<Se;){var Ve=f[ie],at=b(Ve);if(at!=null&&(_t===n?at===at&&!vu(at):N(at,_t)))var _t=at,Dt=Ve}return Dt}function Ce(f,b,N,ie){var Se=f.length;for(N=mi(N),N<0&&(N=-N>Se?0:Se+N),ie=ie===n||ie>Se?Se:mi(ie),ie<0&&(ie+=Se),ie=N>ie?0:hx(ie);N<ie;)f[N++]=b;return f}function rt(f,b){var N=[];return H(f,function(ie,Se,Ve){b(ie,Se,Ve)&&N.push(ie)}),N}function Ge(f,b,N,ie,Se){var Ve=-1,at=f.length;for(N||(N=rk),Se||(Se=[]);++Ve<at;){var _t=f[Ve];b>0&&N(_t)?b>1?Ge(_t,b-1,N,ie,Se):ra(Se,_t):ie||(Se[Se.length]=_t)}return Se}var wt=xw(),It=xw(!0);function tn(f,b){return f&&wt(f,b,Pa)}function _n(f,b){return f&&It(f,b,Pa)}function Mn(f,b){return xa(b,function(N){return pd(f[N])})}function yr(f,b){b=oc(b,f);for(var N=0,ie=b.length;f!=null&&N<ie;)f=f[Ic(b[N++])];return N&&N==ie?f:n}function nt(f,b,N){var ie=b(f);return ui(f)?ie:ra(ie,N(f))}function ot(f){return f==null?f===n?pt:le:tl&&tl in Mi(f)?XM(f):ck(f)}function mt(f,b){return f>b}function zt(f,b){return f!=null&&ai.call(f,b)}function Et(f,b){return f!=null&&b in Mi(f)}function Bt(f,b,N){return f>=Pe(b,N)&&f<ue(b,N)}function we(f,b,N){for(var ie=N?Fl:Rl,Se=f[0].length,Ve=f.length,at=Ve,_t=Ot(Ve),Dt=1/0,un=[];at--;){var dn=f[at];at&&b&&(dn=Ei(dn,Kr(b))),Dt=Pe(dn.length,Dt),_t[at]=!N&&(b||Se>=120&&dn.length>=120)?new q(at&&dn):n}dn=f[0];var yn=-1,Gn=_t[0];e:for(;++yn<Se&&un.length<Dt;){var fr=dn[yn],Dr=b?b(fr):fr;if(fr=N||fr!==0?fr:0,!(Gn?jl(Gn,Dr):ie(un,Dr,N))){for(at=Ve;--at;){var vi=_t[at];if(!(vi?jl(vi,Dr):ie(f[at],Dr,N)))continue e}Gn&&Gn.push(Dr),un.push(fr)}}return un}function ke(f,b,N,ie){return tn(f,function(Se,Ve,at){b(ie,N(Se),Ve,at)}),ie}function ze(f,b,N){b=oc(b,f),f=jw(f,b);var ie=f==null?f:f[Ic(Ru(b))];return ie==null?n:Ci(ie,f,N)}function Fe(f){return ko(f)&&ot(f)==oe}function Ue(f){return ko(f)&&ot(f)==qt}function He(f){return ko(f)&&ot(f)==X}function dt(f,b,N,ie,Se){return f===b?!0:f==null||b==null||!ko(f)&&!ko(b)?f!==f&&b!==b:ht(f,b,N,ie,dt,Se)}function ht(f,b,N,ie,Se,Ve){var at=ui(f),_t=ui(b),Dt=at?de:sl(f),un=_t?de:sl(b);Dt=Dt==oe?je:Dt,un=un==oe?je:un;var dn=Dt==je,yn=un==je,Gn=Dt==un;if(Gn&&qd(f)){if(!qd(b))return!1;at=!0,dn=!1}if(Gn&&!dn)return Ve||(Ve=new Me),at||Vf(f)?Dw(f,b,N,ie,Se,Ve):KM(f,b,Dt,N,ie,Se,Ve);if(!(N&x)){var fr=dn&&ai.call(f,"__wrapped__"),Dr=yn&&ai.call(b,"__wrapped__");if(fr||Dr){var vi=fr?f.value():f,Nr=Dr?b.value():b;return Ve||(Ve=new Me),Se(vi,Nr,N,ie,Ve)}}return Gn?(Ve||(Ve=new Me),ZM(f,b,N,ie,Se,Ve)):!1}function bt(f){return ko(f)&&sl(f)==ee}function At(f,b,N,ie){var Se=N.length,Ve=Se,at=!ie;if(f==null)return!Ve;for(f=Mi(f);Se--;){var _t=N[Se];if(at&&_t[2]?_t[1]!==f[_t[0]]:!(_t[0]in f))return!1}for(;++Se<Ve;){_t=N[Se];var Dt=_t[0],un=f[Dt],dn=_t[1];if(at&&_t[2]){if(un===n&&!(Dt in f))return!1}else{var yn=new Me;if(ie)var Gn=ie(un,dn,Dt,f,b,yn);if(!(Gn===n?dt(dn,un,x|E,ie,yn):Gn))return!1}}return!0}function Tt(f){if(!vo(f)||sk(f))return!1;var b=pd(f)?Wi:Yn;return b.test(jh(f))}function on(f){return ko(f)&&ot(f)==Ee}function Wn(f){return ko(f)&&sl(f)==me}function Kn(f){return ko(f)&&s0(f.length)&&!!Lr[ot(f)]}function or(f){return typeof f=="function"?f:f==null?Wl:typeof f=="object"?ui(f)?nc(f[0],f[1]):qo(f):Lx(f)}function xi(f){if(!qp(f))return W(f);var b=[];for(var N in Mi(f))ai.call(f,N)&&N!="constructor"&&b.push(N);return b}function ji(f){if(!vo(f))return uk(f);var b=qp(f),N=[];for(var ie in f)ie=="constructor"&&(b||!ai.call(f,ie))||N.push(ie);return N}function li(f,b){return f<b}function Gi(f,b){var N=-1,ie=Ul(f)?Ot(f.length):[];return H(f,function(Se,Ve,at){ie[++N]=b(Se,Ve,at)}),ie}function qo(f){var b=o1(f);return b.length==1&&b[0][2]?Rw(b[0][0],b[0][1]):function(N){return N===f||At(N,f,b)}}function nc(f,b){return l1(f)&&Bw(b)?Rw(Ic(f),b):function(N){var ie=y1(N,f);return ie===n&&ie===b?b1(N,f):dt(b,ie,x|E)}}function Ha(f,b,N,ie,Se){f!==b&&wt(b,function(Ve,at){if(Se||(Se=new Me),vo(Ve))Nh(f,b,at,N,Ha,ie,Se);else{var _t=ie?ie(c1(f,at),Ve,at+"",f,b,Se):n;_t===n&&(_t=Ve),Gt(f,at,_t)}},Hl)}function Nh(f,b,N,ie,Se,Ve,at){var _t=c1(f,N),Dt=c1(b,N),un=at.get(Dt);if(un){Gt(f,N,un);return}var dn=Ve?Ve(_t,Dt,N+"",f,b,at):n,yn=dn===n;if(yn){var Gn=ui(Dt),fr=!Gn&&qd(Dt),Dr=!Gn&&!fr&&Vf(Dt);dn=Dt,Gn||fr||Dr?ui(_t)?dn=_t:Yo(_t)?dn=Vl(_t):fr?(yn=!1,dn=mw(Dt,!0)):Dr?(yn=!1,dn=vw(Dt,!0)):dn=[]:Kp(Dt)||zh(Dt)?(dn=_t,zh(_t)?dn=fx(_t):(!vo(_t)||pd(_t))&&(dn=Iw(Dt))):yn=!1}yn&&(at.set(Dt,dn),Se(dn,Dt,ie,Ve,at),at.delete(Dt)),Gt(f,N,dn)}function Cl(f,b){var N=f.length;if(N)return b+=b<0?N:0,fd(b,N)?f[b]:n}function Dc(f,b,N){b.length?b=Ei(b,function(Ve){return ui(Ve)?function(at){return yr(at,Ve.length===1?Ve[0]:Ve)}:Ve}):b=[Wl];var ie=-1;b=Ei(b,Kr(Tr()));var Se=Gi(f,function(Ve,at,_t){var Dt=Ei(b,function(un){return un(Ve)});return{criteria:Dt,index:++ie,value:Ve}});return _i(Se,function(Ve,at){return $M(Ve,at,N)})}function Wa(f,b){return mo(f,b,function(N,ie){return b1(f,ie)})}function mo(f,b,N){for(var ie=-1,Se=b.length,Ve={};++ie<Se;){var at=b[ie],_t=yr(f,at);N(_t,at)&&ld(Ve,oc(at,f),_t)}return Ve}function Ss(f){return function(b){return yr(b,f)}}function Of(f,b,N,ie){var Se=ie?Fn:hn,Ve=-1,at=b.length,_t=f;for(f===b&&(b=Vl(b)),N&&(_t=Ei(f,Kr(N)));++Ve<at;)for(var Dt=0,un=b[Ve],dn=N?N(un):un;(Dt=Se(_t,dn,Dt,ie))>-1;)_t!==f&&po.call(_t,Dt,1),po.call(f,Dt,1);return f}function Oh(f,b){for(var N=f?b.length:0,ie=N-1;N--;){var Se=b[N];if(N==ie||Se!==Ve){var Ve=Se;fd(Se)?po.call(f,Se,1):ud(f,Se)}}return f}function Ih(f,b){return f+Zs(Wt()*(b-f+1))}function Bh(f,b,N,ie){for(var Se=-1,Ve=ue(Ks((b-f)/(N||1)),0),at=Ot(Ve);Ve--;)at[ie?Ve:++Se]=f,f+=N;return at}function If(f,b){var N="";if(!f||b<1||b>G)return N;do b%2&&(N+=f),b=Zs(b/2),b&&(f+=f);while(b);return N}function gi(f,b){return d1(Fw(f,b,Wl),f+"")}function Bf(f){return Ft(Uf(f))}function $m(f,b){var N=Uf(f);return Qm(N,sr(b,0,N.length))}function ld(f,b,N,ie){if(!vo(f))return f;b=oc(b,f);for(var Se=-1,Ve=b.length,at=Ve-1,_t=f;_t!=null&&++Se<Ve;){var Dt=Ic(b[Se]),un=N;if(Dt==="__proto__"||Dt==="constructor"||Dt==="prototype")return f;if(Se!=at){var dn=_t[Dt];un=ie?ie(dn,Dt,_t):n,un===n&&(un=vo(dn)?dn:fd(b[Se+1])?[]:{})}yt(_t,Dt,un),_t=_t[Dt]}return f}var rc=ns?function(f,b){return ns.set(f,b),f}:Wl,Vm=nl?function(f,b){return nl(f,"toString",{configurable:!0,enumerable:!1,value:w1(b),writable:!0})}:Wl;function Um(f){return Qm(Uf(f))}function $l(f,b,N){var ie=-1,Se=f.length;b<0&&(b=-b>Se?0:Se+b),N=N>Se?Se:N,N<0&&(N+=Se),Se=b>N?0:N-b>>>0,b>>>=0;for(var Ve=Ot(Se);++ie<Se;)Ve[ie]=f[ie+b];return Ve}function Hm(f,b){var N;return H(f,function(ie,Se,Ve){return N=b(ie,Se,Ve),!N}),!!N}function ic(f,b,N){var ie=0,Se=f==null?ie:f.length;if(typeof b=="number"&&b===b&&Se<=K){for(;ie<Se;){var Ve=ie+Se>>>1,at=f[Ve];at!==null&&!vu(at)&&(N?at<=b:at<b)?ie=Ve+1:Se=Ve}return Se}return Hp(f,b,Wl,N)}function Hp(f,b,N,ie){var Se=0,Ve=f==null?0:f.length;if(Ve===0)return 0;b=N(b);for(var at=b!==b,_t=b===null,Dt=vu(b),un=b===n;Se<Ve;){var dn=Zs((Se+Ve)/2),yn=N(f[dn]),Gn=yn!==n,fr=yn===null,Dr=yn===yn,vi=vu(yn);if(at)var Nr=ie||Dr;else un?Nr=Dr&&(ie||Gn):_t?Nr=Dr&&Gn&&(ie||!fr):Dt?Nr=Dr&&Gn&&!fr&&(ie||!vi):fr||vi?Nr=!1:Nr=ie?yn<=b:yn<b;Nr?Se=dn+1:Ve=dn}return Pe(Ve,re)}function Wp(f,b){for(var N=-1,ie=f.length,Se=0,Ve=[];++N<ie;){var at=f[N],_t=b?b(at):at;if(!N||!ac(_t,Dt)){var Dt=_t;Ve[Se++]=at===0?0:at}}return Ve}function Wm(f){return typeof f=="number"?f:vu(f)?ve:+f}function il(f){if(typeof f=="string")return f;if(ui(f))return Ei(f,il)+"";if(vu(f))return go?go.call(f):"";var b=f+"";return b=="0"&&1/f==-1/0?"-0":b}function Nc(f,b,N){var ie=-1,Se=Rl,Ve=f.length,at=!0,_t=[],Dt=_t;if(N)at=!1,Se=Fl;else if(Ve>=i){var un=b?null:qM(f);if(un)return Eo(un);at=!1,Se=jl,Dt=new q}else Dt=b?[]:_t;e:for(;++ie<Ve;){var dn=f[ie],yn=b?b(dn):dn;if(dn=N||dn!==0?dn:0,at&&yn===yn){for(var Gn=Dt.length;Gn--;)if(Dt[Gn]===yn)continue e;b&&Dt.push(yn),_t.push(dn)}else Se(Dt,yn,N)||(Dt!==_t&&Dt.push(yn),_t.push(dn))}return _t}function ud(f,b){return b=oc(b,f),f=jw(f,b),f==null||delete f[Ic(Ru(b))]}function Rf(f,b,N,ie){return ld(f,b,N(yr(f,b)),ie)}function cd(f,b,N,ie){for(var Se=f.length,Ve=ie?Se:-1;(ie?Ve--:++Ve<Se)&&b(f[Ve],Ve,f););return N?$l(f,ie?0:Ve,ie?Ve+1:Se):$l(f,ie?Ve+1:0,ie?Se:Ve)}function Ou(f,b){var N=f;return N instanceof Zr&&(N=N.value()),Za(b,function(ie,Se){return Se.func.apply(Se.thisArg,ra([ie],Se.args))},N)}function Iu(f,b,N){var ie=f.length;if(ie<2)return ie?Nc(f[0]):[];for(var Se=-1,Ve=Ot(ie);++Se<ie;)for(var at=f[Se],_t=-1;++_t<ie;)_t!=Se&&(Ve[Se]=k(Ve[Se]||at,f[_t],b,N));return Nc(Ge(Ve,1),b,N)}function sc(f,b,N){for(var ie=-1,Se=f.length,Ve=b.length,at={};++ie<Se;){var _t=ie<Ve?b[ie]:n;N(at,f[ie],_t)}return at}function Gd(f){return Yo(f)?f:[]}function Rh(f){return typeof f=="function"?f:Wl}function oc(f,b){return ui(f)?f:l1(f,b)?[f]:Uw(ls(f))}var Qy=gi;function Bu(f,b,N){var ie=f.length;return N=N===n?ie:N,!b&&N>=ie?f:$l(f,b,N)}var Ff=Sa||function(f){return bs.clearTimeout(f)};function mw(f,b){if(b)return f.slice();var N=f.length,ie=ec?ec(N):new f.constructor(N);return f.copy(ie),ie}function e1(f){var b=new f.constructor(f.byteLength);return new ha(b).set(new ha(f)),b}function FM(f,b){var N=b?e1(f.buffer):f.buffer;return new f.constructor(N,f.byteOffset,f.byteLength)}function jM(f){var b=new f.constructor(f.source,$n.exec(f));return b.lastIndex=f.lastIndex,b}function zM(f){return wi?Mi(wi.call(f)):{}}function vw(f,b){var N=b?e1(f.buffer):f.buffer;return new f.constructor(N,f.byteOffset,f.length)}function yw(f,b){if(f!==b){var N=f!==n,ie=f===null,Se=f===f,Ve=vu(f),at=b!==n,_t=b===null,Dt=b===b,un=vu(b);if(!_t&&!un&&!Ve&&f>b||Ve&&at&&Dt&&!_t&&!un||ie&&at&&Dt||!N&&Dt||!Se)return 1;if(!ie&&!Ve&&!un&&f<b||un&&N&&Se&&!ie&&!Ve||_t&&N&&Se||!at&&Se||!Dt)return-1}return 0}function $M(f,b,N){for(var ie=-1,Se=f.criteria,Ve=b.criteria,at=Se.length,_t=N.length;++ie<at;){var Dt=yw(Se[ie],Ve[ie]);if(Dt){if(ie>=_t)return Dt;var un=N[ie];return Dt*(un=="desc"?-1:1)}}return f.index-b.index}function bw(f,b,N,ie){for(var Se=-1,Ve=f.length,at=N.length,_t=-1,Dt=b.length,un=ue(Ve-at,0),dn=Ot(Dt+un),yn=!ie;++_t<Dt;)dn[_t]=b[_t];for(;++Se<at;)(yn||Se<Ve)&&(dn[N[Se]]=f[Se]);for(;un--;)dn[_t++]=f[Se++];return dn}function _w(f,b,N,ie){for(var Se=-1,Ve=f.length,at=-1,_t=N.length,Dt=-1,un=b.length,dn=ue(Ve-_t,0),yn=Ot(dn+un),Gn=!ie;++Se<dn;)yn[Se]=f[Se];for(var fr=Se;++Dt<un;)yn[fr+Dt]=b[Dt];for(;++at<_t;)(Gn||Se<Ve)&&(yn[fr+N[at]]=f[Se++]);return yn}function Vl(f,b){var N=-1,ie=f.length;for(b||(b=Ot(ie));++N<ie;)b[N]=f[N];return b}function Oc(f,b,N,ie){var Se=!N;N||(N={});for(var Ve=-1,at=b.length;++Ve<at;){var _t=b[Ve],Dt=ie?ie(N[_t],f[_t],_t,N,f):n;Dt===n&&(Dt=f[_t]),Se?Rn(N,_t,Dt):yt(N,_t,Dt)}return N}function VM(f,b){return Oc(f,a1(f),b)}function UM(f,b){return Oc(f,Nw(f),b)}function Gm(f,b){return function(N,ie){var Se=ui(N)?kc:rn,Ve=b?b():{};return Se(N,f,Tr(ie,2),Ve)}}function jf(f){return gi(function(b,N){var ie=-1,Se=N.length,Ve=Se>1?N[Se-1]:n,at=Se>2?N[2]:n;for(Ve=f.length>3&&typeof Ve=="function"?(Se--,Ve):n,at&&El(N[0],N[1],at)&&(Ve=Se<3?n:Ve,Se=1),b=Mi(b);++ie<Se;){var _t=N[ie];_t&&f(b,_t,ie,Ve)}return b})}function ww(f,b){return function(N,ie){if(N==null)return N;if(!Ul(N))return f(N,ie);for(var Se=N.length,Ve=b?Se:-1,at=Mi(N);(b?Ve--:++Ve<Se)&&ie(at[Ve],Ve,at)!==!1;);return N}}function xw(f){return function(b,N,ie){for(var Se=-1,Ve=Mi(b),at=ie(b),_t=at.length;_t--;){var Dt=at[f?_t:++Se];if(N(Ve[Dt],Dt,Ve)===!1)break}return b}}function HM(f,b,N){var ie=b&D,Se=Gp(f);function Ve(){var at=this&&this!==bs&&this instanceof Ve?Se:f;return at.apply(ie?N:this,arguments)}return Ve}function Lw(f){return function(b){b=ls(b);var N=Ba(b)?co(b):n,ie=N?N[0]:b.charAt(0),Se=N?Bu(N,1).join(""):b.slice(1);return ie[f]()+Se}}function zf(f){return function(b){return Za(wx(_x(b).replace(qr,"")),f,"")}}function Gp(f){return function(){var b=arguments;switch(b.length){case 0:return new f;case 1:return new f(b[0]);case 2:return new f(b[0],b[1]);case 3:return new f(b[0],b[1],b[2]);case 4:return new f(b[0],b[1],b[2],b[3]);case 5:return new f(b[0],b[1],b[2],b[3],b[4]);case 6:return new f(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new f(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var N=Go(f.prototype),ie=f.apply(N,b);return vo(ie)?ie:N}}function WM(f,b,N){var ie=Gp(f);function Se(){for(var Ve=arguments.length,at=Ot(Ve),_t=Ve,Dt=$f(Se);_t--;)at[_t]=arguments[_t];var un=Ve<3&&at[0]!==Dt&&at[Ve-1]!==Dt?[]:Co(at,Dt);if(Ve-=un.length,Ve<N)return Mw(f,b,qm,Se.placeholder,n,at,un,n,n,N-Ve);var dn=this&&this!==bs&&this instanceof Se?ie:f;return Ci(dn,this,at)}return Se}function Sw(f){return function(b,N,ie){var Se=Mi(b);if(!Ul(b)){var Ve=Tr(N,3);b=Pa(b),N=function(_t){return Ve(Se[_t],_t,Se)}}var at=f(b,N,ie);return at>-1?Se[Ve?b[at]:at]:n}}function Cw(f){return hd(function(b){var N=b.length,ie=N,Se=Js.prototype.thru;for(f&&b.reverse();ie--;){var Ve=b[ie];if(typeof Ve!="function")throw new ts(o);if(Se&&!at&&Xm(Ve)=="wrapper")var at=new Js([],!0)}for(ie=at?ie:N;++ie<N;){Ve=b[ie];var _t=Xm(Ve),Dt=_t=="wrapper"?s1(Ve):n;Dt&&u1(Dt[0])&&Dt[1]==(pe|z|ne|O)&&!Dt[4].length&&Dt[9]==1?at=at[Xm(Dt[0])].apply(at,Dt[3]):at=Ve.length==1&&u1(Ve)?at[_t]():at.thru(Ve)}return function(){var un=arguments,dn=un[0];if(at&&un.length==1&&ui(dn))return at.plant(dn).value();for(var yn=0,Gn=N?b[yn].apply(this,un):dn;++yn<N;)Gn=b[yn].call(this,Gn);return Gn}})}function qm(f,b,N,ie,Se,Ve,at,_t,Dt,un){var dn=b&pe,yn=b&D,Gn=b&M,fr=b&(z|Y),Dr=b&j,vi=Gn?n:Gp(f);function Nr(){for(var Ai=arguments.length,zi=Ot(Ai),yu=Ai;yu--;)zi[yu]=arguments[yu];if(fr)var Pl=$f(Nr),bu=Ia(zi,Pl);if(ie&&(zi=bw(zi,ie,Se,fr)),Ve&&(zi=_w(zi,Ve,at,fr)),Ai-=bu,fr&&Ai<un){var Ko=Co(zi,Pl);return Mw(f,b,qm,Nr.placeholder,N,zi,Ko,_t,Dt,un-Ai)}var lc=yn?N:this,md=Gn?lc[f]:f;return Ai=zi.length,_t?zi=dk(zi,_t):Dr&&Ai>1&&zi.reverse(),dn&&Dt<Ai&&(zi.length=Dt),this&&this!==bs&&this instanceof Nr&&(md=vi||Gp(md)),md.apply(lc,zi)}return Nr}function Ew(f,b){return function(N,ie){return ke(N,f,b(ie),{})}}function Ym(f,b){return function(N,ie){var Se;if(N===n&&ie===n)return b;if(N!==n&&(Se=N),ie!==n){if(Se===n)return ie;typeof N=="string"||typeof ie=="string"?(N=il(N),ie=il(ie)):(N=Wm(N),ie=Wm(ie)),Se=f(N,ie)}return Se}}function t1(f){return hd(function(b){return b=Ei(b,Kr(Tr())),gi(function(N){var ie=this;return f(b,function(Se){return Ci(Se,ie,N)})})})}function Km(f,b){b=b===n?" ":il(b);var N=b.length;if(N<2)return N?If(b,f):b;var ie=If(b,Ks(f/uo(b)));return Ba(b)?Bu(co(ie),0,f).join(""):ie.slice(0,f)}function GM(f,b,N,ie){var Se=b&D,Ve=Gp(f);function at(){for(var _t=-1,Dt=arguments.length,un=-1,dn=ie.length,yn=Ot(dn+Dt),Gn=this&&this!==bs&&this instanceof at?Ve:f;++un<dn;)yn[un]=ie[un];for(;Dt--;)yn[un++]=arguments[++_t];return Ci(Gn,Se?N:this,yn)}return at}function Pw(f){return function(b,N,ie){return ie&&typeof ie!="number"&&El(b,N,ie)&&(N=ie=n),b=gd(b),N===n?(N=b,b=0):N=gd(N),ie=ie===n?b<N?1:-1:gd(ie),Bh(b,N,ie,f)}}function Zm(f){return function(b,N){return typeof b=="string"&&typeof N=="string"||(b=Fu(b),N=Fu(N)),f(b,N)}}function Mw(f,b,N,ie,Se,Ve,at,_t,Dt,un){var dn=b&z,yn=dn?at:n,Gn=dn?n:at,fr=dn?Ve:n,Dr=dn?n:Ve;b|=dn?ne:ge,b&=~(dn?ge:ne),b&A||(b&=-4);var vi=[f,b,Se,fr,yn,Dr,Gn,_t,Dt,un],Nr=N.apply(n,vi);return u1(f)&&zw(Nr,vi),Nr.placeholder=ie,$w(Nr,f,b)}function n1(f){var b=es[f];return function(N,ie){if(N=Fu(N),ie=ie==null?0:Pe(mi(ie),292),ie&&y(N)){var Se=(ls(N)+"e").split("e"),Ve=b(Se[0]+"e"+(+Se[1]+ie));return Se=(ls(Ve)+"e").split("e"),+(Se[0]+"e"+(+Se[1]-ie))}return b(N)}}var qM=Ts&&1/Eo(new Ts([,-0]))[1]==Q?function(f){return new Ts(f)}:S1;function kw(f){return function(b){var N=sl(b);return N==ee?zl(b):N==me?Ac(b):Ms(b,f(b))}}function dd(f,b,N,ie,Se,Ve,at,_t){var Dt=b&M;if(!Dt&&typeof f!="function")throw new ts(o);var un=ie?ie.length:0;if(un||(b&=-97,ie=Se=n),at=at===n?at:ue(mi(at),0),_t=_t===n?_t:mi(_t),un-=Se?Se.length:0,b&ge){var dn=ie,yn=Se;ie=Se=n}var Gn=Dt?n:s1(f),fr=[f,b,N,ie,Se,dn,yn,Ve,at,_t];if(Gn&&lk(fr,Gn),f=fr[0],b=fr[1],N=fr[2],ie=fr[3],Se=fr[4],_t=fr[9]=fr[9]===n?Dt?0:f.length:ue(fr[9]-un,0),!_t&&b&(z|Y)&&(b&=-25),!b||b==D)var Dr=HM(f,b,N);else b==z||b==Y?Dr=WM(f,b,_t):(b==ne||b==(D|ne))&&!Se.length?Dr=GM(f,b,N,ie):Dr=qm.apply(n,fr);var vi=Gn?rc:zw;return $w(vi(Dr,fr),f,b)}function Aw(f,b,N,ie){return f===n||ac(f,ja[N])&&!ai.call(ie,N)?b:f}function Tw(f,b,N,ie,Se,Ve){return vo(f)&&vo(b)&&(Ve.set(b,f),Ha(f,b,n,Tw,Ve),Ve.delete(b)),f}function YM(f){return Kp(f)?n:f}function Dw(f,b,N,ie,Se,Ve){var at=N&x,_t=f.length,Dt=b.length;if(_t!=Dt&&!(at&&Dt>_t))return!1;var un=Ve.get(f),dn=Ve.get(b);if(un&&dn)return un==b&&dn==f;var yn=-1,Gn=!0,fr=N&E?new q:n;for(Ve.set(f,b),Ve.set(b,f);++yn<_t;){var Dr=f[yn],vi=b[yn];if(ie)var Nr=at?ie(vi,Dr,yn,b,f,Ve):ie(Dr,vi,yn,f,b,Ve);if(Nr!==n){if(Nr)continue;Gn=!1;break}if(fr){if(!F(b,function(Ai,zi){if(!jl(fr,zi)&&(Dr===Ai||Se(Dr,Ai,N,ie,Ve)))return fr.push(zi)})){Gn=!1;break}}else if(!(Dr===vi||Se(Dr,vi,N,ie,Ve))){Gn=!1;break}}return Ve.delete(f),Ve.delete(b),Gn}function KM(f,b,N,ie,Se,Ve,at){switch(N){case gn:if(f.byteLength!=b.byteLength||f.byteOffset!=b.byteOffset)return!1;f=f.buffer,b=b.buffer;case qt:return!(f.byteLength!=b.byteLength||!Ve(new ha(f),new ha(b)));case he:case X:case se:return ac(+f,+b);case De:return f.name==b.name&&f.message==b.message;case Ee:case We:return f==b+"";case ee:var _t=zl;case me:var Dt=ie&x;if(_t||(_t=Eo),f.size!=b.size&&!Dt)return!1;var un=at.get(f);if(un)return un==b;ie|=E,at.set(f,b);var dn=Dw(_t(f),_t(b),ie,Se,Ve,at);return at.delete(f),dn;case ct:if(wi)return wi.call(f)==wi.call(b)}return!1}function ZM(f,b,N,ie,Se,Ve){var at=N&x,_t=r1(f),Dt=_t.length,un=r1(b),dn=un.length;if(Dt!=dn&&!at)return!1;for(var yn=Dt;yn--;){var Gn=_t[yn];if(!(at?Gn in b:ai.call(b,Gn)))return!1}var fr=Ve.get(f),Dr=Ve.get(b);if(fr&&Dr)return fr==b&&Dr==f;var vi=!0;Ve.set(f,b),Ve.set(b,f);for(var Nr=at;++yn<Dt;){Gn=_t[yn];var Ai=f[Gn],zi=b[Gn];if(ie)var yu=at?ie(zi,Ai,Gn,b,f,Ve):ie(Ai,zi,Gn,f,b,Ve);if(!(yu===n?Ai===zi||Se(Ai,zi,N,ie,Ve):yu)){vi=!1;break}Nr||(Nr=Gn=="constructor")}if(vi&&!Nr){var Pl=f.constructor,bu=b.constructor;Pl!=bu&&"constructor"in f&&"constructor"in b&&!(typeof Pl=="function"&&Pl instanceof Pl&&typeof bu=="function"&&bu instanceof bu)&&(vi=!1)}return Ve.delete(f),Ve.delete(b),vi}function hd(f){return d1(Fw(f,n,qw),f+"")}function r1(f){return nt(f,Pa,a1)}function i1(f){return nt(f,Hl,Nw)}var s1=ns?function(f){return ns.get(f)}:S1;function Xm(f){for(var b=f.name+"",N=Wo[b],ie=ai.call(Wo,b)?N.length:0;ie--;){var Se=N[ie],Ve=Se.func;if(Ve==null||Ve==f)return Se.name}return b}function $f(f){var b=ai.call(Ie,"placeholder")?Ie:f;return b.placeholder}function Tr(){var f=Ie.iteratee||x1;return f=f===x1?or:f,arguments.length?f(arguments[0],arguments[1]):f}function Jm(f,b){var N=f.__data__;return ik(b)?N[typeof b=="string"?"string":"hash"]:N.map}function o1(f){for(var b=Pa(f),N=b.length;N--;){var ie=b[N],Se=f[ie];b[N]=[ie,Se,Bw(Se)]}return b}function Fh(f,b){var N=ks(f,b);return Tt(N)?N:n}function XM(f){var b=ai.call(f,tl),N=f[tl];try{f[tl]=n;var ie=!0}catch{}var Se=ki.call(f);return ie&&(b?f[tl]=N:delete f[tl]),Se}var a1=Ca?function(f){return f==null?[]:(f=Mi(f),xa(Ca(f),function(b){return Ui.call(f,b)}))}:C1,Nw=Ca?function(f){for(var b=[];f;)ra(b,a1(f)),f=Va(f);return b}:C1,sl=ot;(jn&&sl(new jn(new ArrayBuffer(1)))!=gn||ir&&sl(new ir)!=ee||Hr&&sl(Hr.resolve())!=$e||Ts&&sl(new Ts)!=me||ds&&sl(new ds)!=gt)&&(sl=function(f){var b=ot(f),N=b==je?f.constructor:n,ie=N?jh(N):"";if(ie)switch(ie){case od:return gn;case Ua:return ee;case Ea:return $e;case fa:return me;case Th:return gt}return b});function JM(f,b,N){for(var ie=-1,Se=N.length;++ie<Se;){var Ve=N[ie],at=Ve.size;switch(Ve.type){case"drop":f+=at;break;case"dropRight":b-=at;break;case"take":b=Pe(b,f+at);break;case"takeRight":f=ue(f,b-at);break}}return{start:f,end:b}}function QM(f){var b=f.match(Ye);return b?b[1].split(Ut):[]}function Ow(f,b,N){b=oc(b,f);for(var ie=-1,Se=b.length,Ve=!1;++ie<Se;){var at=Ic(b[ie]);if(!(Ve=f!=null&&N(f,at)))break;f=f[at]}return Ve||++ie!=Se?Ve:(Se=f==null?0:f.length,!!Se&&s0(Se)&&fd(at,Se)&&(ui(f)||zh(f)))}function ek(f){var b=f.length,N=new f.constructor(b);return b&&typeof f[0]=="string"&&ai.call(f,"index")&&(N.index=f.index,N.input=f.input),N}function Iw(f){return typeof f.constructor=="function"&&!qp(f)?Go(Va(f)):{}}function tk(f,b,N){var ie=f.constructor;switch(b){case qt:return e1(f);case he:case X:return new ie(+f);case gn:return FM(f,N);case Qe:case lt:case it:case $t:case Jt:case Dn:case vn:case Tn:case Jn:return vw(f,N);case ee:return new ie;case se:case We:return new ie(f);case Ee:return jM(f);case me:return new ie;case ct:return zM(f)}}function nk(f,b){var N=b.length;if(!N)return f;var ie=N-1;return b[ie]=(N>1?"& ":"")+b[ie],b=b.join(N>2?", ":" "),f.replace(Ze,`{
/* [wrapped with `+b+`] */
`)}function rk(f){return ui(f)||zh(f)||!!(Ho&&f&&f[Ho])}function fd(f,b){var N=typeof f;return b=b??G,!!b&&(N=="number"||N!="symbol"&&Sr.test(f))&&f>-1&&f%1==0&&f<b}function El(f,b,N){if(!vo(N))return!1;var ie=typeof b;return(ie=="number"?Ul(N)&&fd(b,N.length):ie=="string"&&b in N)?ac(N[b],f):!1}function l1(f,b){if(ui(f))return!1;var N=typeof f;return N=="number"||N=="symbol"||N=="boolean"||f==null||vu(f)?!0:Rs.test(f)||!Fo.test(f)||b!=null&&f in Mi(b)}function ik(f){var b=typeof f;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?f!=="__proto__":f===null}function u1(f){var b=Xm(f),N=Ie[b];if(typeof N!="function"||!(b in Zr.prototype))return!1;if(f===N)return!0;var ie=s1(N);return!!ie&&f===ie[0]}function sk(f){return!!Ys&&Ys in f}var ok=za?pd:E1;function qp(f){var b=f&&f.constructor,N=typeof b=="function"&&b.prototype||ja;return f===N}function Bw(f){return f===f&&!vo(f)}function Rw(f,b){return function(N){return N==null?!1:N[f]===b&&(b!==n||f in Mi(N))}}function ak(f){var b=r0(f,function(ie){return N.size===c&&N.clear(),ie}),N=b.cache;return b}function lk(f,b){var N=f[1],ie=b[1],Se=N|ie,Ve=Se<(D|M|pe),at=ie==pe&&N==z||ie==pe&&N==O&&f[7].length<=b[8]||ie==(pe|O)&&b[7].length<=b[8]&&N==z;if(!(Ve||at))return f;ie&D&&(f[2]=b[2],Se|=N&D?0:A);var _t=b[3];if(_t){var Dt=f[3];f[3]=Dt?bw(Dt,_t,b[4]):_t,f[4]=Dt?Co(f[3],h):b[4]}return _t=b[5],_t&&(Dt=f[5],f[5]=Dt?_w(Dt,_t,b[6]):_t,f[6]=Dt?Co(f[5],h):b[6]),_t=b[7],_t&&(f[7]=_t),ie&pe&&(f[8]=f[8]==null?b[8]:Pe(f[8],b[8])),f[9]==null&&(f[9]=b[9]),f[0]=b[0],f[1]=Se,f}function uk(f){var b=[];if(f!=null)for(var N in Mi(f))b.push(N);return b}function ck(f){return ki.call(f)}function Fw(f,b,N){return b=ue(b===n?f.length-1:b,0),function(){for(var ie=arguments,Se=-1,Ve=ue(ie.length-b,0),at=Ot(Ve);++Se<Ve;)at[Se]=ie[b+Se];Se=-1;for(var _t=Ot(b+1);++Se<b;)_t[Se]=ie[Se];return _t[b]=N(at),Ci(f,this,_t)}}function jw(f,b){return b.length<2?f:yr(f,$l(b,0,-1))}function dk(f,b){for(var N=f.length,ie=Pe(b.length,N),Se=Vl(f);ie--;){var Ve=b[ie];f[ie]=fd(Ve,N)?Se[Ve]:n}return f}function c1(f,b){if(!(b==="constructor"&&typeof f[b]=="function")&&b!="__proto__")return f[b]}var zw=Vw(rc),Yp=sd||function(f,b){return bs.setTimeout(f,b)},d1=Vw(Vm);function $w(f,b,N){var ie=b+"";return d1(f,nk(ie,hk(QM(ie),N)))}function Vw(f){var b=0,N=0;return function(){var ie=ut(),Se=V-(ie-N);if(N=ie,Se>0){if(++b>=R)return arguments[0]}else b=0;return f.apply(n,arguments)}}function Qm(f,b){var N=-1,ie=f.length,Se=ie-1;for(b=b===n?ie:b;++N<b;){var Ve=Ih(N,Se),at=f[Ve];f[Ve]=f[N],f[N]=at}return f.length=b,f}var Uw=ak(function(f){var b=[];return f.charCodeAt(0)===46&&b.push(""),f.replace(tr,function(N,ie,Se,Ve){b.push(Se?Ve.replace(Ln,"$1"):ie||N)}),b});function Ic(f){if(typeof f=="string"||vu(f))return f;var b=f+"";return b=="0"&&1/f==-1/0?"-0":b}function jh(f){if(f!=null){try{return $a.call(f)}catch{}try{return f+""}catch{}}return""}function hk(f,b){return Gs(Z,function(N){var ie="_."+N[0];b&N[1]&&!Rl(f,ie)&&f.push(ie)}),f.sort()}function Hw(f){if(f instanceof Zr)return f.clone();var b=new Js(f.__wrapped__,f.__chain__);return b.__actions__=Vl(f.__actions__),b.__index__=f.__index__,b.__values__=f.__values__,b}function fk(f,b,N){(N?El(f,b,N):b===n)?b=1:b=ue(mi(b),0);var ie=f==null?0:f.length;if(!ie||b<1)return[];for(var Se=0,Ve=0,at=Ot(Ks(ie/b));Se<ie;)at[Ve++]=$l(f,Se,Se+=b);return at}function pk(f){for(var b=-1,N=f==null?0:f.length,ie=0,Se=[];++b<N;){var Ve=f[b];Ve&&(Se[ie++]=Ve)}return Se}function gk(){var f=arguments.length;if(!f)return[];for(var b=Ot(f-1),N=arguments[0],ie=f;ie--;)b[ie-1]=arguments[ie];return ra(ui(N)?Vl(N):[N],Ge(b,1))}var mk=gi(function(f,b){return Yo(f)?k(f,Ge(b,1,Yo,!0)):[]}),vk=gi(function(f,b){var N=Ru(b);return Yo(N)&&(N=n),Yo(f)?k(f,Ge(b,1,Yo,!0),Tr(N,2)):[]}),yk=gi(function(f,b){var N=Ru(b);return Yo(N)&&(N=n),Yo(f)?k(f,Ge(b,1,Yo,!0),n,N):[]});function bk(f,b,N){var ie=f==null?0:f.length;return ie?(b=N||b===n?1:mi(b),$l(f,b<0?0:b,ie)):[]}function _k(f,b,N){var ie=f==null?0:f.length;return ie?(b=N||b===n?1:mi(b),b=ie-b,$l(f,0,b<0?0:b)):[]}function wk(f,b){return f&&f.length?cd(f,Tr(b,3),!0,!0):[]}function xk(f,b){return f&&f.length?cd(f,Tr(b,3),!0):[]}function Lk(f,b,N,ie){var Se=f==null?0:f.length;return Se?(N&&typeof N!="number"&&El(f,b,N)&&(N=0,ie=Se),Ce(f,b,N,ie)):[]}function Ww(f,b,N){var ie=f==null?0:f.length;if(!ie)return-1;var Se=N==null?0:mi(N);return Se<0&&(Se=ue(ie+Se,0)),Ht(f,Tr(b,3),Se)}function Gw(f,b,N){var ie=f==null?0:f.length;if(!ie)return-1;var Se=ie-1;return N!==n&&(Se=mi(N),Se=N<0?ue(ie+Se,0):Pe(Se,ie-1)),Ht(f,Tr(b,3),Se,!0)}function qw(f){var b=f==null?0:f.length;return b?Ge(f,1):[]}function Sk(f){var b=f==null?0:f.length;return b?Ge(f,Q):[]}function Ck(f,b){var N=f==null?0:f.length;return N?(b=b===n?1:mi(b),Ge(f,b)):[]}function Ek(f){for(var b=-1,N=f==null?0:f.length,ie={};++b<N;){var Se=f[b];ie[Se[0]]=Se[1]}return ie}function Yw(f){return f&&f.length?f[0]:n}function Pk(f,b,N){var ie=f==null?0:f.length;if(!ie)return-1;var Se=N==null?0:mi(N);return Se<0&&(Se=ue(ie+Se,0)),hn(f,b,Se)}function Mk(f){var b=f==null?0:f.length;return b?$l(f,0,-1):[]}var kk=gi(function(f){var b=Ei(f,Gd);return b.length&&b[0]===f[0]?we(b):[]}),Ak=gi(function(f){var b=Ru(f),N=Ei(f,Gd);return b===Ru(N)?b=n:N.pop(),N.length&&N[0]===f[0]?we(N,Tr(b,2)):[]}),Tk=gi(function(f){var b=Ru(f),N=Ei(f,Gd);return b=typeof b=="function"?b:n,b&&N.pop(),N.length&&N[0]===f[0]?we(N,n,b):[]});function Dk(f,b){return f==null?"":P.call(f,b)}function Ru(f){var b=f==null?0:f.length;return b?f[b-1]:n}function Nk(f,b,N){var ie=f==null?0:f.length;if(!ie)return-1;var Se=ie;return N!==n&&(Se=mi(N),Se=Se<0?ue(ie+Se,0):Pe(Se,ie-1)),b===b?Xa(f,b,Se):Ht(f,Hn,Se,!0)}function Ok(f,b){return f&&f.length?Cl(f,mi(b)):n}var Ik=gi(Kw);function Kw(f,b){return f&&f.length&&b&&b.length?Of(f,b):f}function Bk(f,b,N){return f&&f.length&&b&&b.length?Of(f,b,Tr(N,2)):f}function Rk(f,b,N){return f&&f.length&&b&&b.length?Of(f,b,n,N):f}var Fk=hd(function(f,b){var N=f==null?0:f.length,ie=Nn(f,b);return Oh(f,Ei(b,function(Se){return fd(Se,N)?+Se:Se}).sort(yw)),ie});function jk(f,b){var N=[];if(!(f&&f.length))return N;var ie=-1,Se=[],Ve=f.length;for(b=Tr(b,3);++ie<Ve;){var at=f[ie];b(at,ie,f)&&(N.push(at),Se.push(ie))}return Oh(f,Se),N}function h1(f){return f==null?f:ln.call(f)}function zk(f,b,N){var ie=f==null?0:f.length;return ie?(N&&typeof N!="number"&&El(f,b,N)?(b=0,N=ie):(b=b==null?0:mi(b),N=N===n?ie:mi(N)),$l(f,b,N)):[]}function $k(f,b){return ic(f,b)}function Vk(f,b,N){return Hp(f,b,Tr(N,2))}function Uk(f,b){var N=f==null?0:f.length;if(N){var ie=ic(f,b);if(ie<N&&ac(f[ie],b))return ie}return-1}function Hk(f,b){return ic(f,b,!0)}function Wk(f,b,N){return Hp(f,b,Tr(N,2),!0)}function Gk(f,b){var N=f==null?0:f.length;if(N){var ie=ic(f,b,!0)-1;if(ac(f[ie],b))return ie}return-1}function qk(f){return f&&f.length?Wp(f):[]}function Yk(f,b){return f&&f.length?Wp(f,Tr(b,2)):[]}function Kk(f){var b=f==null?0:f.length;return b?$l(f,1,b):[]}function Zk(f,b,N){return f&&f.length?(b=N||b===n?1:mi(b),$l(f,0,b<0?0:b)):[]}function Xk(f,b,N){var ie=f==null?0:f.length;return ie?(b=N||b===n?1:mi(b),b=ie-b,$l(f,b<0?0:b,ie)):[]}function Jk(f,b){return f&&f.length?cd(f,Tr(b,3),!1,!0):[]}function Qk(f,b){return f&&f.length?cd(f,Tr(b,3)):[]}var eA=gi(function(f){return Nc(Ge(f,1,Yo,!0))}),tA=gi(function(f){var b=Ru(f);return Yo(b)&&(b=n),Nc(Ge(f,1,Yo,!0),Tr(b,2))}),nA=gi(function(f){var b=Ru(f);return b=typeof b=="function"?b:n,Nc(Ge(f,1,Yo,!0),n,b)});function rA(f){return f&&f.length?Nc(f):[]}function iA(f,b){return f&&f.length?Nc(f,Tr(b,2)):[]}function sA(f,b){return b=typeof b=="function"?b:n,f&&f.length?Nc(f,n,b):[]}function f1(f){if(!(f&&f.length))return[];var b=0;return f=xa(f,function(N){if(Yo(N))return b=ue(N.length,b),!0}),xs(b,function(N){return Ei(f,Er(N))})}function Zw(f,b){if(!(f&&f.length))return[];var N=f1(f);return b==null?N:Ei(N,function(ie){return Ci(b,n,ie)})}var oA=gi(function(f,b){return Yo(f)?k(f,b):[]}),aA=gi(function(f){return Iu(xa(f,Yo))}),lA=gi(function(f){var b=Ru(f);return Yo(b)&&(b=n),Iu(xa(f,Yo),Tr(b,2))}),uA=gi(function(f){var b=Ru(f);return b=typeof b=="function"?b:n,Iu(xa(f,Yo),n,b)}),cA=gi(f1);function dA(f,b){return sc(f||[],b||[],yt)}function hA(f,b){return sc(f||[],b||[],ld)}var fA=gi(function(f){var b=f.length,N=b>1?f[b-1]:n;return N=typeof N=="function"?(f.pop(),N):n,Zw(f,N)});function Xw(f){var b=Ie(f);return b.__chain__=!0,b}function pA(f,b){return b(f),f}function e0(f,b){return b(f)}var gA=hd(function(f){var b=f.length,N=b?f[0]:0,ie=this.__wrapped__,Se=function(Ve){return Nn(Ve,f)};return b>1||this.__actions__.length||!(ie instanceof Zr)||!fd(N)?this.thru(Se):(ie=ie.slice(N,+N+(b?1:0)),ie.__actions__.push({func:e0,args:[Se],thisArg:n}),new Js(ie,this.__chain__).thru(function(Ve){return b&&!Ve.length&&Ve.push(n),Ve}))});function mA(){return Xw(this)}function vA(){return new Js(this.value(),this.__chain__)}function yA(){this.__values__===n&&(this.__values__=dx(this.value()));var f=this.__index__>=this.__values__.length,b=f?n:this.__values__[this.__index__++];return{done:f,value:b}}function bA(){return this}function _A(f){for(var b,N=this;N instanceof tc;){var ie=Hw(N);ie.__index__=0,ie.__values__=n,b?Se.__wrapped__=ie:b=ie;var Se=ie;N=N.__wrapped__}return Se.__wrapped__=f,b}function wA(){var f=this.__wrapped__;if(f instanceof Zr){var b=f;return this.__actions__.length&&(b=new Zr(this)),b=b.reverse(),b.__actions__.push({func:e0,args:[h1],thisArg:n}),new Js(b,this.__chain__)}return this.thru(h1)}function xA(){return Ou(this.__wrapped__,this.__actions__)}var LA=Gm(function(f,b,N){ai.call(f,N)?++f[N]:Rn(f,N,1)});function SA(f,b,N){var ie=ui(f)?pu:ae;return N&&El(f,b,N)&&(b=n),ie(f,Tr(b,3))}function CA(f,b){var N=ui(f)?xa:rt;return N(f,Tr(b,3))}var EA=Sw(Ww),PA=Sw(Gw);function MA(f,b){return Ge(t0(f,b),1)}function kA(f,b){return Ge(t0(f,b),Q)}function AA(f,b,N){return N=N===n?1:mi(N),Ge(t0(f,b),N)}function Jw(f,b){var N=ui(f)?Gs:H;return N(f,Tr(b,3))}function Qw(f,b){var N=ui(f)?wa:te;return N(f,Tr(b,3))}var TA=Gm(function(f,b,N){ai.call(f,N)?f[N].push(b):Rn(f,N,[b])});function DA(f,b,N,ie){f=Ul(f)?f:Uf(f),N=N&&!ie?mi(N):0;var Se=f.length;return N<0&&(N=ue(Se+N,0)),o0(f)?N<=Se&&f.indexOf(b,N)>-1:!!Se&&hn(f,b,N)>-1}var NA=gi(function(f,b,N){var ie=-1,Se=typeof b=="function",Ve=Ul(f)?Ot(f.length):[];return H(f,function(at){Ve[++ie]=Se?Ci(b,at,N):ze(at,b,N)}),Ve}),OA=Gm(function(f,b,N){Rn(f,N,b)});function t0(f,b){var N=ui(f)?Ei:Gi;return N(f,Tr(b,3))}function IA(f,b,N,ie){return f==null?[]:(ui(b)||(b=b==null?[]:[b]),N=ie?n:N,ui(N)||(N=N==null?[]:[N]),Dc(f,b,N))}var BA=Gm(function(f,b,N){f[N?0:1].push(b)},function(){return[[],[]]});function RA(f,b,N){var ie=ui(f)?Za:Yi,Se=arguments.length<3;return ie(f,Tr(b,4),N,Se,H)}function FA(f,b,N){var ie=ui(f)?ws:Yi,Se=arguments.length<3;return ie(f,Tr(b,4),N,Se,te)}function jA(f,b){var N=ui(f)?xa:rt;return N(f,i0(Tr(b,3)))}function zA(f){var b=ui(f)?Ft:Bf;return b(f)}function $A(f,b,N){(N?El(f,b,N):b===n)?b=1:b=mi(b);var ie=ui(f)?Pt:$m;return ie(f,b)}function VA(f){var b=ui(f)?Xt:Um;return b(f)}function UA(f){if(f==null)return 0;if(Ul(f))return o0(f)?uo(f):f.length;var b=sl(f);return b==ee||b==me?f.size:xi(f).length}function HA(f,b,N){var ie=ui(f)?F:Hm;return N&&El(f,b,N)&&(b=n),ie(f,Tr(b,3))}var WA=gi(function(f,b){if(f==null)return[];var N=b.length;return N>1&&El(f,b[0],b[1])?b=[]:N>2&&El(b[0],b[1],b[2])&&(b=[b[0]]),Dc(f,Ge(b,1),[])}),n0=Mo||function(){return bs.Date.now()};function GA(f,b){if(typeof b!="function")throw new ts(o);return f=mi(f),function(){if(--f<1)return b.apply(this,arguments)}}function ex(f,b,N){return b=N?n:b,b=f&&b==null?f.length:b,dd(f,pe,n,n,n,n,b)}function tx(f,b){var N;if(typeof b!="function")throw new ts(o);return f=mi(f),function(){return--f>0&&(N=b.apply(this,arguments)),f<=1&&(b=n),N}}var p1=gi(function(f,b,N){var ie=D;if(N.length){var Se=Co(N,$f(p1));ie|=ne}return dd(f,ie,b,N,Se)}),nx=gi(function(f,b,N){var ie=D|M;if(N.length){var Se=Co(N,$f(nx));ie|=ne}return dd(b,ie,f,N,Se)});function rx(f,b,N){b=N?n:b;var ie=dd(f,z,n,n,n,n,n,b);return ie.placeholder=rx.placeholder,ie}function ix(f,b,N){b=N?n:b;var ie=dd(f,Y,n,n,n,n,n,b);return ie.placeholder=ix.placeholder,ie}function sx(f,b,N){var ie,Se,Ve,at,_t,Dt,un=0,dn=!1,yn=!1,Gn=!0;if(typeof f!="function")throw new ts(o);b=Fu(b)||0,vo(N)&&(dn=!!N.leading,yn="maxWait"in N,Ve=yn?ue(Fu(N.maxWait)||0,b):Ve,Gn="trailing"in N?!!N.trailing:Gn);function fr(Ko){var lc=ie,md=Se;return ie=Se=n,un=Ko,at=f.apply(md,lc),at}function Dr(Ko){return un=Ko,_t=Yp(Ai,b),dn?fr(Ko):at}function vi(Ko){var lc=Ko-Dt,md=Ko-un,Sx=b-lc;return yn?Pe(Sx,Ve-md):Sx}function Nr(Ko){var lc=Ko-Dt,md=Ko-un;return Dt===n||lc>=b||lc<0||yn&&md>=Ve}function Ai(){var Ko=n0();if(Nr(Ko))return zi(Ko);_t=Yp(Ai,vi(Ko))}function zi(Ko){return _t=n,Gn&&ie?fr(Ko):(ie=Se=n,at)}function yu(){_t!==n&&Ff(_t),un=0,ie=Dt=Se=_t=n}function Pl(){return _t===n?at:zi(n0())}function bu(){var Ko=n0(),lc=Nr(Ko);if(ie=arguments,Se=this,Dt=Ko,lc){if(_t===n)return Dr(Dt);if(yn)return Ff(_t),_t=Yp(Ai,b),fr(Dt)}return _t===n&&(_t=Yp(Ai,b)),at}return bu.cancel=yu,bu.flush=Pl,bu}var qA=gi(function(f,b){return C(f,1,b)}),YA=gi(function(f,b,N){return C(f,Fu(b)||0,N)});function KA(f){return dd(f,j)}function r0(f,b){if(typeof f!="function"||b!=null&&typeof b!="function")throw new ts(o);var N=function(){var ie=arguments,Se=b?b.apply(this,ie):ie[0],Ve=N.cache;if(Ve.has(Se))return Ve.get(Se);var at=f.apply(this,ie);return N.cache=Ve.set(Se,at)||Ve,at};return N.cache=new(r0.Cache||rl),N}r0.Cache=rl;function i0(f){if(typeof f!="function")throw new ts(o);return function(){var b=arguments;switch(b.length){case 0:return!f.call(this);case 1:return!f.call(this,b[0]);case 2:return!f.call(this,b[0],b[1]);case 3:return!f.call(this,b[0],b[1],b[2])}return!f.apply(this,b)}}function ZA(f){return tx(2,f)}var XA=Qy(function(f,b){b=b.length==1&&ui(b[0])?Ei(b[0],Kr(Tr())):Ei(Ge(b,1),Kr(Tr()));var N=b.length;return gi(function(ie){for(var Se=-1,Ve=Pe(ie.length,N);++Se<Ve;)ie[Se]=b[Se].call(this,ie[Se]);return Ci(f,this,ie)})}),g1=gi(function(f,b){var N=Co(b,$f(g1));return dd(f,ne,n,b,N)}),ox=gi(function(f,b){var N=Co(b,$f(ox));return dd(f,ge,n,b,N)}),JA=hd(function(f,b){return dd(f,O,n,n,n,b)});function QA(f,b){if(typeof f!="function")throw new ts(o);return b=b===n?b:mi(b),gi(f,b)}function e6(f,b){if(typeof f!="function")throw new ts(o);return b=b==null?0:ue(mi(b),0),gi(function(N){var ie=N[b],Se=Bu(N,0,b);return ie&&ra(Se,ie),Ci(f,this,Se)})}function t6(f,b,N){var ie=!0,Se=!0;if(typeof f!="function")throw new ts(o);return vo(N)&&(ie="leading"in N?!!N.leading:ie,Se="trailing"in N?!!N.trailing:Se),sx(f,b,{leading:ie,maxWait:b,trailing:Se})}function n6(f){return ex(f,1)}function r6(f,b){return g1(Rh(b),f)}function i6(){if(!arguments.length)return[];var f=arguments[0];return ui(f)?f:[f]}function s6(f){return d(f,g)}function o6(f,b){return b=typeof b=="function"?b:n,d(f,g,b)}function a6(f){return d(f,p|g)}function l6(f,b){return b=typeof b=="function"?b:n,d(f,p|g,b)}function u6(f,b){return b==null||_(f,b,Pa(b))}function ac(f,b){return f===b||f!==f&&b!==b}var c6=Zm(mt),d6=Zm(function(f,b){return f>=b}),zh=Fe(function(){return arguments}())?Fe:function(f){return ko(f)&&ai.call(f,"callee")&&!Ui.call(f,"callee")},ui=Ot.isArray,h6=Tu?Kr(Tu):Ue;function Ul(f){return f!=null&&s0(f.length)&&!pd(f)}function Yo(f){return ko(f)&&Ul(f)}function f6(f){return f===!0||f===!1||ko(f)&&ot(f)==he}var qd=u||E1,p6=Oa?Kr(Oa):He;function g6(f){return ko(f)&&f.nodeType===1&&!Kp(f)}function m6(f){if(f==null)return!0;if(Ul(f)&&(ui(f)||typeof f=="string"||typeof f.splice=="function"||qd(f)||Vf(f)||zh(f)))return!f.length;var b=sl(f);if(b==ee||b==me)return!f.size;if(qp(f))return!xi(f).length;for(var N in f)if(ai.call(f,N))return!1;return!0}function v6(f,b){return dt(f,b)}function y6(f,b,N){N=typeof N=="function"?N:n;var ie=N?N(f,b):n;return ie===n?dt(f,b,n,N):!!ie}function m1(f){if(!ko(f))return!1;var b=ot(f);return b==De||b==Ae||typeof f.message=="string"&&typeof f.name=="string"&&!Kp(f)}function b6(f){return typeof f=="number"&&y(f)}function pd(f){if(!vo(f))return!1;var b=ot(f);return b==Xe||b==fe||b==ye||b==et}function ax(f){return typeof f=="number"&&f==mi(f)}function s0(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=G}function vo(f){var b=typeof f;return f!=null&&(b=="object"||b=="function")}function ko(f){return f!=null&&typeof f=="object"}var lx=du?Kr(du):bt;function _6(f,b){return f===b||At(f,b,o1(b))}function w6(f,b,N){return N=typeof N=="function"?N:n,At(f,b,o1(b),N)}function x6(f){return ux(f)&&f!=+f}function L6(f){if(ok(f))throw new nr(s);return Tt(f)}function S6(f){return f===null}function C6(f){return f==null}function ux(f){return typeof f=="number"||ko(f)&&ot(f)==se}function Kp(f){if(!ko(f)||ot(f)!=je)return!1;var b=Va(f);if(b===null)return!0;var N=ai.call(b,"constructor")&&b.constructor;return typeof N=="function"&&N instanceof N&&$a.call(N)==Fi}var v1=hu?Kr(hu):on;function E6(f){return ax(f)&&f>=-9007199254740991&&f<=G}var cx=da?Kr(da):Wn;function o0(f){return typeof f=="string"||!ui(f)&&ko(f)&&ot(f)==We}function vu(f){return typeof f=="symbol"||ko(f)&&ot(f)==ct}var Vf=fu?Kr(fu):Kn;function P6(f){return f===n}function M6(f){return ko(f)&&sl(f)==gt}function k6(f){return ko(f)&&ot(f)==st}var A6=Zm(li),T6=Zm(function(f,b){return f<=b});function dx(f){if(!f)return[];if(Ul(f))return o0(f)?co(f):Vl(f);if(wr&&f[wr])return Vo(f[wr]());var b=sl(f),N=b==ee?zl:b==me?Eo:Uf;return N(f)}function gd(f){if(!f)return f===0?f:0;if(f=Fu(f),f===Q||f===-1/0){var b=f<0?-1:1;return b*_e}return f===f?f:0}function mi(f){var b=gd(f),N=b%1;return b===b?N?b-N:b:0}function hx(f){return f?sr(mi(f),0,qe):0}function Fu(f){if(typeof f=="number")return f;if(vu(f))return ve;if(vo(f)){var b=typeof f.valueOf=="function"?f.valueOf():f;f=vo(b)?b+"":b}if(typeof f!="string")return f===0?f:+f;f=ia(f);var N=Kt.test(f);return N||gr.test(f)?cu(f.slice(2),N?2:8):xt.test(f)?ve:+f}function fx(f){return Oc(f,Hl(f))}function D6(f){return f?sr(mi(f),-9007199254740991,G):f===0?f:0}function ls(f){return f==null?"":il(f)}var N6=jf(function(f,b){if(qp(b)||Ul(b)){Oc(b,Pa(b),f);return}for(var N in b)ai.call(b,N)&&yt(f,N,b[N])}),px=jf(function(f,b){Oc(b,Hl(b),f)}),a0=jf(function(f,b,N,ie){Oc(b,Hl(b),f,ie)}),O6=jf(function(f,b,N,ie){Oc(b,Pa(b),f,ie)}),I6=hd(Nn);function B6(f,b){var N=Go(f);return b==null?N:fn(N,b)}var R6=gi(function(f,b){f=Mi(f);var N=-1,ie=b.length,Se=ie>2?b[2]:n;for(Se&&El(b[0],b[1],Se)&&(ie=1);++N<ie;)for(var Ve=b[N],at=Hl(Ve),_t=-1,Dt=at.length;++_t<Dt;){var un=at[_t],dn=f[un];(dn===n||ac(dn,ja[un])&&!ai.call(f,un))&&(f[un]=Ve[un])}return f}),F6=gi(function(f){return f.push(n,Tw),Ci(gx,n,f)});function j6(f,b){return Mt(f,Tr(b,3),tn)}function z6(f,b){return Mt(f,Tr(b,3),_n)}function $6(f,b){return f==null?f:wt(f,Tr(b,3),Hl)}function V6(f,b){return f==null?f:It(f,Tr(b,3),Hl)}function U6(f,b){return f&&tn(f,Tr(b,3))}function H6(f,b){return f&&_n(f,Tr(b,3))}function W6(f){return f==null?[]:Mn(f,Pa(f))}function G6(f){return f==null?[]:Mn(f,Hl(f))}function y1(f,b,N){var ie=f==null?n:yr(f,b);return ie===n?N:ie}function q6(f,b){return f!=null&&Ow(f,b,zt)}function b1(f,b){return f!=null&&Ow(f,b,Et)}var Y6=Ew(function(f,b,N){b!=null&&typeof b.toString!="function"&&(b=ki.call(b)),f[b]=N},w1(Wl)),K6=Ew(function(f,b,N){b!=null&&typeof b.toString!="function"&&(b=ki.call(b)),ai.call(f,b)?f[b].push(N):f[b]=[N]},Tr),Z6=gi(ze);function Pa(f){return Ul(f)?Rt(f):xi(f)}function Hl(f){return Ul(f)?Rt(f,!0):ji(f)}function X6(f,b){var N={};return b=Tr(b,3),tn(f,function(ie,Se,Ve){Rn(N,b(ie,Se,Ve),ie)}),N}function J6(f,b){var N={};return b=Tr(b,3),tn(f,function(ie,Se,Ve){Rn(N,Se,b(ie,Se,Ve))}),N}var Q6=jf(function(f,b,N){Ha(f,b,N)}),gx=jf(function(f,b,N,ie){Ha(f,b,N,ie)}),eT=hd(function(f,b){var N={};if(f==null)return N;var ie=!1;b=Ei(b,function(Ve){return Ve=oc(Ve,f),ie||(ie=Ve.length>1),Ve}),Oc(f,i1(f),N),ie&&(N=d(N,p|v|g,YM));for(var Se=b.length;Se--;)ud(N,b[Se]);return N});function tT(f,b){return mx(f,i0(Tr(b)))}var nT=hd(function(f,b){return f==null?{}:Wa(f,b)});function mx(f,b){if(f==null)return{};var N=Ei(i1(f),function(ie){return[ie]});return b=Tr(b),mo(f,N,function(ie,Se){return b(ie,Se[0])})}function rT(f,b,N){b=oc(b,f);var ie=-1,Se=b.length;for(Se||(Se=1,f=n);++ie<Se;){var Ve=f==null?n:f[Ic(b[ie])];Ve===n&&(ie=Se,Ve=N),f=pd(Ve)?Ve.call(f):Ve}return f}function iT(f,b,N){return f==null?f:ld(f,b,N)}function sT(f,b,N,ie){return ie=typeof ie=="function"?ie:n,f==null?f:ld(f,b,N,ie)}var vx=kw(Pa),yx=kw(Hl);function oT(f,b,N){var ie=ui(f),Se=ie||qd(f)||Vf(f);if(b=Tr(b,4),N==null){var Ve=f&&f.constructor;Se?N=ie?new Ve:[]:vo(f)?N=pd(Ve)?Go(Va(f)):{}:N={}}return(Se?Gs:tn)(f,function(at,_t,Dt){return b(N,at,_t,Dt)}),N}function aT(f,b){return f==null?!0:ud(f,b)}function lT(f,b,N){return f==null?f:Rf(f,b,Rh(N))}function uT(f,b,N,ie){return ie=typeof ie=="function"?ie:n,f==null?f:Rf(f,b,Rh(N),ie)}function Uf(f){return f==null?[]:ao(f,Pa(f))}function cT(f){return f==null?[]:ao(f,Hl(f))}function dT(f,b,N){return N===n&&(N=b,b=n),N!==n&&(N=Fu(N),N=N===N?N:0),b!==n&&(b=Fu(b),b=b===b?b:0),sr(Fu(f),b,N)}function hT(f,b,N){return b=gd(b),N===n?(N=b,b=0):N=gd(N),f=Fu(f),Bt(f,b,N)}function fT(f,b,N){if(N&&typeof N!="boolean"&&El(f,b,N)&&(b=N=n),N===n&&(typeof b=="boolean"?(N=b,b=n):typeof f=="boolean"&&(N=f,f=n)),f===n&&b===n?(f=0,b=1):(f=gd(f),b===n?(b=f,f=0):b=gd(b)),f>b){var ie=f;f=b,b=ie}if(N||f%1||b%1){var Se=Wt();return Pe(f+Se*(b-f+Il("1e-"+((Se+"").length-1))),b)}return Ih(f,b)}var pT=zf(function(f,b,N){return b=b.toLowerCase(),f+(N?bx(b):b)});function bx(f){return _1(ls(f).toLowerCase())}function _x(f){return f=ls(f),f&&f.replace(an,Qu).replace(io,"")}function gT(f,b,N){f=ls(f),b=il(b);var ie=f.length;N=N===n?ie:sr(mi(N),0,ie);var Se=N;return N-=b.length,N>=0&&f.slice(N,Se)==b}function mT(f){return f=ls(f),f&&lr.test(f)?f.replace(pr,xl):f}function vT(f){return f=ls(f),f&&jo.test(f)?f.replace(Fs,"\\$&"):f}var yT=zf(function(f,b,N){return f+(N?"-":"")+b.toLowerCase()}),bT=zf(function(f,b,N){return f+(N?" ":"")+b.toLowerCase()}),_T=Lw("toLowerCase");function wT(f,b,N){f=ls(f),b=mi(b);var ie=b?uo(f):0;if(!b||ie>=b)return f;var Se=(b-ie)/2;return Km(Zs(Se),N)+f+Km(Ks(Se),N)}function xT(f,b,N){f=ls(f),b=mi(b);var ie=b?uo(f):0;return b&&ie<b?f+Km(b-ie,N):f}function LT(f,b,N){f=ls(f),b=mi(b);var ie=b?uo(f):0;return b&&ie<b?Km(b-ie,N)+f:f}function ST(f,b,N){return N||b==null?b=0:b&&(b=+b),Nt(ls(f).replace(gs,""),b||0)}function CT(f,b,N){return(N?El(f,b,N):b===n)?b=1:b=mi(b),If(ls(f),b)}function ET(){var f=arguments,b=ls(f[0]);return f.length<3?b:b.replace(f[1],f[2])}var PT=zf(function(f,b,N){return f+(N?"_":"")+b.toLowerCase()});function MT(f,b,N){return N&&typeof N!="number"&&El(f,b,N)&&(b=N=n),N=N===n?qe:N>>>0,N?(f=ls(f),f&&(typeof b=="string"||b!=null&&!v1(b))&&(b=il(b),!b&&Ba(f))?Bu(co(f),0,N):f.split(b,N)):[]}var kT=zf(function(f,b,N){return f+(N?" ":"")+_1(b)});function AT(f,b,N){return f=ls(f),N=N==null?0:sr(mi(N),0,f.length),b=il(b),f.slice(N,N+b.length)==b}function TT(f,b,N){var ie=Ie.templateSettings;N&&El(f,b,N)&&(b=n),f=ls(f),b=a0({},b,ie,Aw);var Se=a0({},b.imports,ie.imports,Aw),Ve=Pa(Se),at=ao(Se,Ve),_t,Dt,un=0,dn=b.interpolate||nn,yn="__p += '",Gn=gu((b.escape||nn).source+"|"+dn.source+"|"+(dn===Di?jt:nn).source+"|"+(b.evaluate||nn).source+"|$","g"),fr="//# sourceURL="+(ai.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Da+"]")+`
`;f.replace(Gn,function(Nr,Ai,zi,yu,Pl,bu){return zi||(zi=yu),yn+=f.slice(un,bu).replace($r,Ll),Ai&&(_t=!0,yn+=`' +
__e(`+Ai+`) +
'`),Pl&&(Dt=!0,yn+=`';
`+Pl+`;
__p += '`),zi&&(yn+=`' +
((__t = (`+zi+`)) == null ? '' : __t) +
'`),un=bu+Nr.length,Nr}),yn+=`';
`;var Dr=ai.call(b,"variable")&&b.variable;if(!Dr)yn=`with (obj) {
`+yn+`
}
`;else if(On.test(Dr))throw new nr(a);yn=(Dt?yn.replace(en,""):yn).replace(xn,"$1").replace(Cn,"$1;"),yn="function("+(Dr||"obj")+`) {
`+(Dr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(_t?", __e = _.escape":"")+(Dt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+yn+`return __p
}`;var vi=xx(function(){return Ar(Ve,fr+"return "+yn).apply(n,at)});if(vi.source=yn,m1(vi))throw vi;return vi}function DT(f){return ls(f).toLowerCase()}function NT(f){return ls(f).toUpperCase()}function OT(f,b,N){if(f=ls(f),f&&(N||b===n))return ia(f);if(!f||!(b=il(b)))return f;var ie=co(f),Se=co(b),Ve=So(ie,Se),at=Du(ie,Se)+1;return Bu(ie,Ve,at).join("")}function IT(f,b,N){if(f=ls(f),f&&(N||b===n))return f.slice(0,Ja(f)+1);if(!f||!(b=il(b)))return f;var ie=co(f),Se=Du(ie,co(b))+1;return Bu(ie,0,Se).join("")}function BT(f,b,N){if(f=ls(f),f&&(N||b===n))return f.replace(gs,"");if(!f||!(b=il(b)))return f;var ie=co(f),Se=So(ie,co(b));return Bu(ie,Se).join("")}function RT(f,b){var N=J,ie=U;if(vo(b)){var Se="separator"in b?b.separator:Se;N="length"in b?mi(b.length):N,ie="omission"in b?il(b.omission):ie}f=ls(f);var Ve=f.length;if(Ba(f)){var at=co(f);Ve=at.length}if(N>=Ve)return f;var _t=N-uo(ie);if(_t<1)return ie;var Dt=at?Bu(at,0,_t).join(""):f.slice(0,_t);if(Se===n)return Dt+ie;if(at&&(_t+=Dt.length-_t),v1(Se)){if(f.slice(_t).search(Se)){var un,dn=Dt;for(Se.global||(Se=gu(Se.source,ls($n.exec(Se))+"g")),Se.lastIndex=0;un=Se.exec(dn);)var yn=un.index;Dt=Dt.slice(0,yn===n?_t:yn)}}else if(f.indexOf(il(Se),_t)!=_t){var Gn=Dt.lastIndexOf(Se);Gn>-1&&(Dt=Dt.slice(0,Gn))}return Dt+ie}function FT(f){return f=ls(f),f&&xr.test(f)?f.replace(er,Qa):f}var jT=zf(function(f,b,N){return f+(N?" ":"")+b.toUpperCase()}),_1=Lw("toUpperCase");function wx(f,b,N){return f=ls(f),b=N?n:b,b===n?sa(f)?Ra(f):ft(f):f.match(b)||[]}var xx=gi(function(f,b){try{return Ci(f,n,b)}catch(N){return m1(N)?N:new nr(N)}}),zT=hd(function(f,b){return Gs(b,function(N){N=Ic(N),Rn(f,N,p1(f[N],f))}),f});function $T(f){var b=f==null?0:f.length,N=Tr();return f=b?Ei(f,function(ie){if(typeof ie[1]!="function")throw new ts(o);return[N(ie[0]),ie[1]]}):[],gi(function(ie){for(var Se=-1;++Se<b;){var Ve=f[Se];if(Ci(Ve[0],this,ie))return Ci(Ve[1],this,ie)}})}function VT(f){return m(d(f,p))}function w1(f){return function(){return f}}function UT(f,b){return f==null||f!==f?b:f}var HT=Cw(),WT=Cw(!0);function Wl(f){return f}function x1(f){return or(typeof f=="function"?f:d(f,p))}function GT(f){return qo(d(f,p))}function qT(f,b){return nc(f,d(b,p))}var YT=gi(function(f,b){return function(N){return ze(N,f,b)}}),KT=gi(function(f,b){return function(N){return ze(f,N,b)}});function L1(f,b,N){var ie=Pa(b),Se=Mn(b,ie);N==null&&!(vo(b)&&(Se.length||!ie.length))&&(N=b,b=f,f=this,Se=Mn(b,Pa(b)));var Ve=!(vo(N)&&"chain"in N)||!!N.chain,at=pd(f);return Gs(Se,function(_t){var Dt=b[_t];f[_t]=Dt,at&&(f.prototype[_t]=function(){var un=this.__chain__;if(Ve||un){var dn=f(this.__wrapped__),yn=dn.__actions__=Vl(this.__actions__);return yn.push({func:Dt,args:arguments,thisArg:f}),dn.__chain__=un,dn}return Dt.apply(f,ra([this.value()],arguments))})}),f}function ZT(){return bs._===this&&(bs._=Ls),this}function S1(){}function XT(f){return f=mi(f),gi(function(b){return Cl(b,f)})}var JT=t1(Ei),QT=t1(pu),eD=t1(F);function Lx(f){return l1(f)?Er(Ic(f)):Ss(f)}function tD(f){return function(b){return f==null?n:yr(f,b)}}var nD=Pw(),rD=Pw(!0);function C1(){return[]}function E1(){return!1}function iD(){return{}}function sD(){return""}function oD(){return!0}function aD(f,b){if(f=mi(f),f<1||f>G)return[];var N=qe,ie=Pe(f,qe);b=Tr(b),f-=qe;for(var Se=xs(ie,b);++N<f;)b(N);return Se}function lD(f){return ui(f)?Ei(f,Ic):vu(f)?[f]:Vl(Uw(ls(f)))}function uD(f){var b=++La;return ls(f)+b}var cD=Ym(function(f,b){return f+b},0),dD=n1("ceil"),hD=Ym(function(f,b){return f/b},1),fD=n1("floor");function pD(f){return f&&f.length?be(f,Wl,mt):n}function gD(f,b){return f&&f.length?be(f,Tr(b,2),mt):n}function mD(f){return cr(f,Wl)}function vD(f,b){return cr(f,Tr(b,2))}function yD(f){return f&&f.length?be(f,Wl,li):n}function bD(f,b){return f&&f.length?be(f,Tr(b,2),li):n}var _D=Ym(function(f,b){return f*b},1),wD=n1("round"),xD=Ym(function(f,b){return f-b},0);function LD(f){return f&&f.length?Pi(f,Wl):0}function SD(f,b){return f&&f.length?Pi(f,Tr(b,2)):0}return Ie.after=GA,Ie.ary=ex,Ie.assign=N6,Ie.assignIn=px,Ie.assignInWith=a0,Ie.assignWith=O6,Ie.at=I6,Ie.before=tx,Ie.bind=p1,Ie.bindAll=zT,Ie.bindKey=nx,Ie.castArray=i6,Ie.chain=Xw,Ie.chunk=fk,Ie.compact=pk,Ie.concat=gk,Ie.cond=$T,Ie.conforms=VT,Ie.constant=w1,Ie.countBy=LA,Ie.create=B6,Ie.curry=rx,Ie.curryRight=ix,Ie.debounce=sx,Ie.defaults=R6,Ie.defaultsDeep=F6,Ie.defer=qA,Ie.delay=YA,Ie.difference=mk,Ie.differenceBy=vk,Ie.differenceWith=yk,Ie.drop=bk,Ie.dropRight=_k,Ie.dropRightWhile=wk,Ie.dropWhile=xk,Ie.fill=Lk,Ie.filter=CA,Ie.flatMap=MA,Ie.flatMapDeep=kA,Ie.flatMapDepth=AA,Ie.flatten=qw,Ie.flattenDeep=Sk,Ie.flattenDepth=Ck,Ie.flip=KA,Ie.flow=HT,Ie.flowRight=WT,Ie.fromPairs=Ek,Ie.functions=W6,Ie.functionsIn=G6,Ie.groupBy=TA,Ie.initial=Mk,Ie.intersection=kk,Ie.intersectionBy=Ak,Ie.intersectionWith=Tk,Ie.invert=Y6,Ie.invertBy=K6,Ie.invokeMap=NA,Ie.iteratee=x1,Ie.keyBy=OA,Ie.keys=Pa,Ie.keysIn=Hl,Ie.map=t0,Ie.mapKeys=X6,Ie.mapValues=J6,Ie.matches=GT,Ie.matchesProperty=qT,Ie.memoize=r0,Ie.merge=Q6,Ie.mergeWith=gx,Ie.method=YT,Ie.methodOf=KT,Ie.mixin=L1,Ie.negate=i0,Ie.nthArg=XT,Ie.omit=eT,Ie.omitBy=tT,Ie.once=ZA,Ie.orderBy=IA,Ie.over=JT,Ie.overArgs=XA,Ie.overEvery=QT,Ie.overSome=eD,Ie.partial=g1,Ie.partialRight=ox,Ie.partition=BA,Ie.pick=nT,Ie.pickBy=mx,Ie.property=Lx,Ie.propertyOf=tD,Ie.pull=Ik,Ie.pullAll=Kw,Ie.pullAllBy=Bk,Ie.pullAllWith=Rk,Ie.pullAt=Fk,Ie.range=nD,Ie.rangeRight=rD,Ie.rearg=JA,Ie.reject=jA,Ie.remove=jk,Ie.rest=QA,Ie.reverse=h1,Ie.sampleSize=$A,Ie.set=iT,Ie.setWith=sT,Ie.shuffle=VA,Ie.slice=zk,Ie.sortBy=WA,Ie.sortedUniq=qk,Ie.sortedUniqBy=Yk,Ie.split=MT,Ie.spread=e6,Ie.tail=Kk,Ie.take=Zk,Ie.takeRight=Xk,Ie.takeRightWhile=Jk,Ie.takeWhile=Qk,Ie.tap=pA,Ie.throttle=t6,Ie.thru=e0,Ie.toArray=dx,Ie.toPairs=vx,Ie.toPairsIn=yx,Ie.toPath=lD,Ie.toPlainObject=fx,Ie.transform=oT,Ie.unary=n6,Ie.union=eA,Ie.unionBy=tA,Ie.unionWith=nA,Ie.uniq=rA,Ie.uniqBy=iA,Ie.uniqWith=sA,Ie.unset=aT,Ie.unzip=f1,Ie.unzipWith=Zw,Ie.update=lT,Ie.updateWith=uT,Ie.values=Uf,Ie.valuesIn=cT,Ie.without=oA,Ie.words=wx,Ie.wrap=r6,Ie.xor=aA,Ie.xorBy=lA,Ie.xorWith=uA,Ie.zip=cA,Ie.zipObject=dA,Ie.zipObjectDeep=hA,Ie.zipWith=fA,Ie.entries=vx,Ie.entriesIn=yx,Ie.extend=px,Ie.extendWith=a0,L1(Ie,Ie),Ie.add=cD,Ie.attempt=xx,Ie.camelCase=pT,Ie.capitalize=bx,Ie.ceil=dD,Ie.clamp=dT,Ie.clone=s6,Ie.cloneDeep=a6,Ie.cloneDeepWith=l6,Ie.cloneWith=o6,Ie.conformsTo=u6,Ie.deburr=_x,Ie.defaultTo=UT,Ie.divide=hD,Ie.endsWith=gT,Ie.eq=ac,Ie.escape=mT,Ie.escapeRegExp=vT,Ie.every=SA,Ie.find=EA,Ie.findIndex=Ww,Ie.findKey=j6,Ie.findLast=PA,Ie.findLastIndex=Gw,Ie.findLastKey=z6,Ie.floor=fD,Ie.forEach=Jw,Ie.forEachRight=Qw,Ie.forIn=$6,Ie.forInRight=V6,Ie.forOwn=U6,Ie.forOwnRight=H6,Ie.get=y1,Ie.gt=c6,Ie.gte=d6,Ie.has=q6,Ie.hasIn=b1,Ie.head=Yw,Ie.identity=Wl,Ie.includes=DA,Ie.indexOf=Pk,Ie.inRange=hT,Ie.invoke=Z6,Ie.isArguments=zh,Ie.isArray=ui,Ie.isArrayBuffer=h6,Ie.isArrayLike=Ul,Ie.isArrayLikeObject=Yo,Ie.isBoolean=f6,Ie.isBuffer=qd,Ie.isDate=p6,Ie.isElement=g6,Ie.isEmpty=m6,Ie.isEqual=v6,Ie.isEqualWith=y6,Ie.isError=m1,Ie.isFinite=b6,Ie.isFunction=pd,Ie.isInteger=ax,Ie.isLength=s0,Ie.isMap=lx,Ie.isMatch=_6,Ie.isMatchWith=w6,Ie.isNaN=x6,Ie.isNative=L6,Ie.isNil=C6,Ie.isNull=S6,Ie.isNumber=ux,Ie.isObject=vo,Ie.isObjectLike=ko,Ie.isPlainObject=Kp,Ie.isRegExp=v1,Ie.isSafeInteger=E6,Ie.isSet=cx,Ie.isString=o0,Ie.isSymbol=vu,Ie.isTypedArray=Vf,Ie.isUndefined=P6,Ie.isWeakMap=M6,Ie.isWeakSet=k6,Ie.join=Dk,Ie.kebabCase=yT,Ie.last=Ru,Ie.lastIndexOf=Nk,Ie.lowerCase=bT,Ie.lowerFirst=_T,Ie.lt=A6,Ie.lte=T6,Ie.max=pD,Ie.maxBy=gD,Ie.mean=mD,Ie.meanBy=vD,Ie.min=yD,Ie.minBy=bD,Ie.stubArray=C1,Ie.stubFalse=E1,Ie.stubObject=iD,Ie.stubString=sD,Ie.stubTrue=oD,Ie.multiply=_D,Ie.nth=Ok,Ie.noConflict=ZT,Ie.noop=S1,Ie.now=n0,Ie.pad=wT,Ie.padEnd=xT,Ie.padStart=LT,Ie.parseInt=ST,Ie.random=fT,Ie.reduce=RA,Ie.reduceRight=FA,Ie.repeat=CT,Ie.replace=ET,Ie.result=rT,Ie.round=wD,Ie.runInContext=St,Ie.sample=zA,Ie.size=UA,Ie.snakeCase=PT,Ie.some=HA,Ie.sortedIndex=$k,Ie.sortedIndexBy=Vk,Ie.sortedIndexOf=Uk,Ie.sortedLastIndex=Hk,Ie.sortedLastIndexBy=Wk,Ie.sortedLastIndexOf=Gk,Ie.startCase=kT,Ie.startsWith=AT,Ie.subtract=xD,Ie.sum=LD,Ie.sumBy=SD,Ie.template=TT,Ie.times=aD,Ie.toFinite=gd,Ie.toInteger=mi,Ie.toLength=hx,Ie.toLower=DT,Ie.toNumber=Fu,Ie.toSafeInteger=D6,Ie.toString=ls,Ie.toUpper=NT,Ie.trim=OT,Ie.trimEnd=IT,Ie.trimStart=BT,Ie.truncate=RT,Ie.unescape=FT,Ie.uniqueId=uD,Ie.upperCase=jT,Ie.upperFirst=_1,Ie.each=Jw,Ie.eachRight=Qw,Ie.first=Yw,L1(Ie,function(){var f={};return tn(Ie,function(b,N){ai.call(Ie.prototype,N)||(f[N]=b)}),f}(),{chain:!1}),Ie.VERSION=r,Gs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){Ie[f].placeholder=Ie}),Gs(["drop","take"],function(f,b){Zr.prototype[f]=function(N){N=N===n?1:ue(mi(N),0);var ie=this.__filtered__&&!b?new Zr(this):this.clone();return ie.__filtered__?ie.__takeCount__=Pe(N,ie.__takeCount__):ie.__views__.push({size:Pe(N,qe),type:f+(ie.__dir__<0?"Right":"")}),ie},Zr.prototype[f+"Right"]=function(N){return this.reverse()[f](N).reverse()}}),Gs(["filter","map","takeWhile"],function(f,b){var N=b+1,ie=N==$||N==I;Zr.prototype[f]=function(Se){var Ve=this.clone();return Ve.__iteratees__.push({iteratee:Tr(Se,3),type:N}),Ve.__filtered__=Ve.__filtered__||ie,Ve}}),Gs(["head","last"],function(f,b){var N="take"+(b?"Right":"");Zr.prototype[f]=function(){return this[N](1).value()[0]}}),Gs(["initial","tail"],function(f,b){var N="drop"+(b?"":"Right");Zr.prototype[f]=function(){return this.__filtered__?new Zr(this):this[N](1)}}),Zr.prototype.compact=function(){return this.filter(Wl)},Zr.prototype.find=function(f){return this.filter(f).head()},Zr.prototype.findLast=function(f){return this.reverse().find(f)},Zr.prototype.invokeMap=gi(function(f,b){return typeof f=="function"?new Zr(this):this.map(function(N){return ze(N,f,b)})}),Zr.prototype.reject=function(f){return this.filter(i0(Tr(f)))},Zr.prototype.slice=function(f,b){f=mi(f);var N=this;return N.__filtered__&&(f>0||b<0)?new Zr(N):(f<0?N=N.takeRight(-f):f&&(N=N.drop(f)),b!==n&&(b=mi(b),N=b<0?N.dropRight(-b):N.take(b-f)),N)},Zr.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},Zr.prototype.toArray=function(){return this.take(qe)},tn(Zr.prototype,function(f,b){var N=/^(?:filter|find|map|reject)|While$/.test(b),ie=/^(?:head|last)$/.test(b),Se=Ie[ie?"take"+(b=="last"?"Right":""):b],Ve=ie||/^find/.test(b);Se&&(Ie.prototype[b]=function(){var at=this.__wrapped__,_t=ie?[1]:arguments,Dt=at instanceof Zr,un=_t[0],dn=Dt||ui(at),yn=function(Ai){var zi=Se.apply(Ie,ra([Ai],_t));return ie&&Gn?zi[0]:zi};dn&&N&&typeof un=="function"&&un.length!=1&&(Dt=dn=!1);var Gn=this.__chain__,fr=!!this.__actions__.length,Dr=Ve&&!Gn,vi=Dt&&!fr;if(!Ve&&dn){at=vi?at:new Zr(this);var Nr=f.apply(at,_t);return Nr.__actions__.push({func:e0,args:[yn],thisArg:n}),new Js(Nr,Gn)}return Dr&&vi?f.apply(this,_t):(Nr=this.thru(yn),Dr?ie?Nr.value()[0]:Nr.value():Nr)})}),Gs(["pop","push","shift","sort","splice","unshift"],function(f){var b=Fa[f],N=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",ie=/^(?:pop|shift)$/.test(f);Ie.prototype[f]=function(){var Se=arguments;if(ie&&!this.__chain__){var Ve=this.value();return b.apply(ui(Ve)?Ve:[],Se)}return this[N](function(at){return b.apply(ui(at)?at:[],Se)})}}),tn(Zr.prototype,function(f,b){var N=Ie[b];if(N){var ie=N.name+"";ai.call(Wo,ie)||(Wo[ie]=[]),Wo[ie].push({name:b,func:N})}}),Wo[qm(n,M).name]=[{name:"wrapper",func:n}],Zr.prototype.clone=$d,Zr.prototype.reverse=Mf,Zr.prototype.value=Vd,Ie.prototype.at=gA,Ie.prototype.chain=mA,Ie.prototype.commit=vA,Ie.prototype.next=yA,Ie.prototype.plant=_A,Ie.prototype.reverse=wA,Ie.prototype.toJSON=Ie.prototype.valueOf=Ie.prototype.value=xA,Ie.prototype.first=Ie.prototype.head,wr&&(Ie.prototype[wr]=bA),Ie},fo=oa();_s?((_s.exports=fo)._=fo,hr._=fo):bs._=fo}).call(Aa)})(Gv,Gv.exports);var OE=Gv.exports;class qa extends Zn.Polygon{constructor(n,r={}){super([],{...r,pmIgnore:!1,interactive:!0});Je(this,"_width");Je(this,"_height");Je(this,"_center");Je(this,"_rotation");Je(this,"_isMapReady",!1);Je(this,"properties");Je(this,"_helperPoints",{corners:[],midPoints:[]});Je(this,"_throttledUpdateProperties");const i=n instanceof Zn.LatLngBounds?n:Zn.latLngBounds(n);if(this._center=i.getCenter(),this._rotation=0,console.log("[Rectangle][constructor] Initialisation avec options:",{bounds:i,center:this._center,hasExplicitDimensions:!!(r.width&&r.height),width:r.width,height:r.height}),r.width&&r.height)this._width=r.width,this._height=r.height,console.log("[Rectangle][constructor] Utilisation des dimensions explicites:",{width:this._width,height:this._height});else{const s=i.getSouthWest(),o=i.getNorthEast();this._width=An.measure("Rectangle.constructor.calculateWidth",()=>{const a=Z1([s.lng,s.lat],[o.lng,s.lat],{units:"meters"});return Math.max(a,1)}),this._height=An.measure("Rectangle.constructor.calculateHeight",()=>{const a=Z1([s.lng,s.lat],[s.lng,o.lat],{units:"meters"});return Math.max(a,1)}),console.log("[Rectangle][constructor] Dimensions calculées depuis bounds:",{width:this._width,height:this._height})}(this._width<1||this._height<1)&&this._getPixelsPerMeter()>0&&(this._width=Math.max(this._width,1),this._height=Math.max(this._height,1),this._updatePolygonCoordinates()),this.properties=An.measure("Rectangle.constructor.initProperties",()=>({type:"Rectangle",style:{...r,name:r.name||""},rotation:this._rotation})),this._throttledUpdateProperties=An.measure("Rectangle.constructor.initThrottle",()=>OE.throttle(()=>{this.updateProperties()},100)),this.on("add",()=>{this._isMapReady=!0,this._updatePolygonCoordinates(),this.updateProperties()}),this.on("remove",()=>{this._isMapReady=!1})}_updatePolygonCoordinates(){An.measure("Rectangle._updatePolygonCoordinates",()=>{if(!this._isMapReady||!this._map)return;console.log("[Rectangle][_updatePolygonCoordinates] Début mise à jour avec:",{width:this._width,height:this._height,center:this._center,rotation:this._rotation}),this._width=Math.max(this._width,1),this._height=Math.max(this._height,1);const n=this._width/2,r=this._height/2,i=t5([this._center.lng,this._center.lat],r,0,{units:"meters"}).geometry.coordinates,s=t5([this._center.lng,this._center.lat],n,90,{units:"meters"}).geometry.coordinates,o=Math.abs(i[1]-this._center.lat)*2,a=Math.abs(s[0]-this._center.lng)*2,l=[Zn.latLng(this._center.lat+o/2,this._center.lng-a/2),Zn.latLng(this._center.lat+o/2,this._center.lng+a/2),Zn.latLng(this._center.lat-o/2,this._center.lng+a/2),Zn.latLng(this._center.lat-o/2,this._center.lng-a/2)];if(this._rotation===0){this.setLatLngs(l);return}const c=this._map.latLngToContainerPoint(this._center),h=l.map(D=>this._map.latLngToContainerPoint(D)),p=-this._rotation*Math.PI/180,v=Math.cos(p),g=Math.sin(p),E=h.map(D=>{const M=D.x-c.x,A=D.y-c.y;return Zn.point(c.x+(M*v-A*g),c.y+(M*g+A*v))}).map(D=>this._map.containerPointToLatLng(D));console.log("[Rectangle][_updatePolygonCoordinates] Résultat final:",{corners:E,dimensions:{width:this._width,height:this._height}}),this.setLatLngs(E),this.fire("coordinates:updated",{corners:E,center:this._center,rotation:this._rotation,dimensions:{width:this._width,height:this._height}})})}_getPixelsPerMeter(){return An.measure("Rectangle._getPixelsPerMeter",()=>{if(!this._isMapReady||!this._map)return 1;const n=Math.max(this._width/1e3,1e-4),r=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(Zn.latLng(this._center.lat,this._center.lng+n)).x-r.x,o=Z1([this._center.lng,this._center.lat],[this._center.lng+n,this._center.lat],{units:"meters"}),a=Math.abs(s/o);return isNaN(a)||a<=0?(console.warn("[Rectangle][_getPixelsPerMeter] Ratio invalide, utilisation de la valeur par défaut"),1):a})}getRotatedCorners(){return An.measure("Rectangle.getRotatedCorners",()=>{try{const n=this.getLatLngs();if(!n||!Array.isArray(n)||n.length===0){const r=this._width/2,i=this._height/2;return[Zn.latLng(this._center.lat+i,this._center.lng-r),Zn.latLng(this._center.lat+i,this._center.lng+r),Zn.latLng(this._center.lat-i,this._center.lng+r),Zn.latLng(this._center.lat-i,this._center.lng-r)]}return n[0]}catch(n){console.warn("Error in getRotatedCorners:",n);const r=this._width/2,i=this._height/2;return[Zn.latLng(this._center.lat+i,this._center.lng-r),Zn.latLng(this._center.lat+i,this._center.lng+r),Zn.latLng(this._center.lat-i,this._center.lng+r),Zn.latLng(this._center.lat-i,this._center.lng-r)]}})}getMidPoints(){return An.measure("Rectangle.getMidPoints",()=>{try{const n=this.getRotatedCorners();if(!n||n.length<4){const i=this._width/2,s=this._height/2;return[Zn.latLng(this._center.lat+s,this._center.lng),Zn.latLng(this._center.lat,this._center.lng+i),Zn.latLng(this._center.lat-s,this._center.lng),Zn.latLng(this._center.lat,this._center.lng-i)]}if(!n.every(i=>i&&typeof i.lat=="number"&&typeof i.lng=="number"))throw new Error("Invalid corner coordinates");return[this._getMidPoint(n[3],n[0]),this._getMidPoint(n[0],n[1]),this._getMidPoint(n[1],n[2]),this._getMidPoint(n[2],n[3])]}catch(n){console.warn("Error in getMidPoints:",n);const r=this._width/2,i=this._height/2;return[Zn.latLng(this._center.lat+i,this._center.lng),Zn.latLng(this._center.lat,this._center.lng+r),Zn.latLng(this._center.lat-i,this._center.lng),Zn.latLng(this._center.lat,this._center.lng-r)]}})}_getMidPoint(n,r){return An.measure("Rectangle._getMidPoint",()=>{if(!n||!r||typeof n.lat!="number"||typeof n.lng!="number"||typeof r.lat!="number"||typeof r.lng!="number")throw new Error("Invalid points for midpoint calculation");return Zn.latLng((n.lat+r.lat)/2,(n.lng+r.lng)/2)})}getCenter(){return An.measure("Rectangle.getCenter",()=>this._center)}setCenter(n){An.measure("Rectangle.setCenter",()=>{this._center=n,this._updatePolygonCoordinates(),this.updateProperties(),this.updateHelperPointPositions()})}getRotation(){return An.measure("Rectangle.getRotation",()=>this._rotation)}setRotation(n,r=!1){An.measure("Rectangle.setRotation",()=>{this._rotation=(n%360+360)%360,this._updatePolygonCoordinates(),r&&this.updateProperties(),this.updateHelperPointPositions(),this.fire("rotation:updated",{angle:this._rotation,corners:this.getRotatedCorners(),center:this._center})})}finalizeRotation(){An.measure("Rectangle.finalizeRotation",()=>{this.updateProperties()})}getDimensions(){return An.measure("Rectangle.getDimensions",()=>({width:this._width,height:this._height}))}setDimensions(n,r){An.measure("Rectangle.setDimensions",()=>{console.log("[Rectangle][setDimensions] Début de la mise à jour des dimensions:",{oldWidth:this._width,oldHeight:this._height,newWidth:n,newHeight:r}),this._width=n,this._height=r,console.log("[Rectangle][setDimensions] Mise à jour des coordonnées du polygone"),this._updatePolygonCoordinates(),console.log("[Rectangle][setDimensions] Mise à jour des propriétés"),this.updateProperties(),console.log("[Rectangle][setDimensions] Émission de l'événement dimensions:updated"),this.fire("dimensions:updated",{width:this._width,height:this._height,corners:this.getRotatedCorners(),center:this._center}),this.updateHelperPointPositions()})}resizeFromCorner(n,r){An.measure("Rectangle.resizeFromCorner",()=>{if(!(!this._isMapReady||!this._map))try{const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,a=s.y-i.y,l=-this._rotation*Math.PI/180,c=Math.cos(l),h=Math.sin(l),p=o*c-a*h,v=o*h+a*c,g=this._getPixelsPerMeter(),x=n===0||n===3?-1:1,E=n===0||n===1?1:-1,D=Math.max(Math.abs(p*2)/g,1),M=Math.max(Math.abs(v*2)/g,1),A=D*g/2,z=M*g/2,Y=x*A*c-E*z*h,ne=x*A*h+E*z*c,ge=Zn.point(s.x-Y,s.y-ne),pe=this._map.containerPointToLatLng(ge),J=[Zn.point(ge.x-A,ge.y+z),Zn.point(ge.x+A,ge.y+z),Zn.point(ge.x+A,ge.y-z),Zn.point(ge.x-A,ge.y-z)].map(U=>{const R=U.x-ge.x,V=U.y-ge.y;return Zn.point(ge.x+(R*c-V*h),ge.y+(R*h+V*c))}).map(U=>this._map.containerPointToLatLng(U));this._width=D,this._height=M,this._center=pe,this.setLatLngs(J),this.fire("coordinates:updated",{corners:J,center:this._center,rotation:this._rotation})}catch(i){console.warn("Error in resizeFromCorner:",i)}})}resizeFromSide(n,r){An.measure("Rectangle.resizeFromSide",()=>{if(!this._isMapReady||!this._map)return;const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,a=s.y-i.y,l=-this._rotation*Math.PI/180,c=Math.cos(l),h=Math.sin(l),p=o*c-a*h,v=o*h+a*c,g=this._getPixelsPerMeter();n%2===0?this._height=Math.abs(v*2)/g:this._width=Math.abs(p*2)/g,this._updatePolygonCoordinates(),this.updateProperties()})}moveFromCenter(n){An.measure("Rectangle.moveFromCenter",()=>{this._center=n,this._updatePolygonCoordinates(),this.updateProperties()})}updateProperties(){An.measure("Rectangle.updateProperties",()=>{var i,s,o;const n=this.getRotatedCorners(),r=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"";this.properties={...this.properties,width:this._width,height:this._height,surface:this._width*this._height,perimeter:2*(this._width+this._height),center:this._center,corners:n,midPoints:this.getMidPoints(),rotation:this._rotation,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:r}},this.fire("properties:updated",{shape:this,properties:this.properties,corners:n,midPoints:this.getMidPoints()})})}setName(n){An.measure("Rectangle.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return An.measure("Rectangle.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}generateHelperPoints(n,r="rgba(220, 38, 38, 0.5)",i="rgba(37, 99, 235, 0.5)"){An.measure("Rectangle.generateHelperPoints",()=>{this.clearHelperPoints();const s=this.getRotatedCorners(),o=this.getMidPoints();this._helperPoints.corners=s.map(a=>Zn.circleMarker(a,{radius:5,color:r,fillColor:r,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-corner",pmIgnore:!0,interactive:!1}).addTo(n)),this._helperPoints.midPoints=o.map(a=>Zn.circleMarker(a,{radius:5,color:i,fillColor:i,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-midpoint",pmIgnore:!0,interactive:!1}).addTo(n))})}clearHelperPoints(){An.measure("Rectangle.clearHelperPoints",()=>{this._helperPoints.corners.forEach(n=>{if(n&&n.remove)try{n.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de coin:",r)}}),this._helperPoints.midPoints.forEach(n=>{if(n&&n.remove)try{n.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de milieu:",r)}}),this._helperPoints.corners=[],this._helperPoints.midPoints=[]})}updateHelperPointPositions(){An.measure("Rectangle.updateHelperPointPositions",()=>{if(this._helperPoints.corners.length===0&&this._helperPoints.midPoints.length===0)return;const n=this.getRotatedCorners(),r=this.getMidPoints();n.forEach((i,s)=>{this._helperPoints.corners[s]&&this._helperPoints.corners[s].setLatLng(i)}),r.forEach((i,s)=>{this._helperPoints.midPoints[s]&&this._helperPoints.midPoints[s].setLatLng(i)})})}findClosestHelperPoint(n){return An.measure("Rectangle.findClosestHelperPoint",()=>{const r=this.getRotatedCorners(),i=this.getMidPoints(),s=[...r,...i];if(s.length===0)return null;let o=s[0],a=n.distanceTo(o);for(let l=1;l<s.length;l++){const c=n.distanceTo(s[l]);c<a&&(a=c,o=s[l])}return o})}toggleHelperPoints(n,r,i,s){An.measure("Rectangle.toggleHelperPoints",()=>{r&&n?this.generateHelperPoints(n,i,s):this.clearHelperPoints()})}containsPoint(n){return An.measure("Rectangle.containsPoint",()=>{const r=this.getRotatedCorners();if(r.length!==4)return!1;let i=!1;for(let s=0,o=r.length-1;s<r.length;o=s++){const a=r[s].lng,l=r[s].lat,c=r[o].lng,h=r[o].lat;l>n.lat!=h>n.lat&&n.lng<(c-a)*(n.lat-l)/(h-l)+a&&(i=!i)}return i})}}var Ki=(t=>(t.PRIVATE="private",t.COMPANY="company",t.EMPLOYEE="employee",t.VISITOR="visitor",t))(Ki||{});const bf=Fp("notes",()=>{const t=Ct([]),e=Ct([]),n=Xn(()=>U=>t.value.find(R=>R.id===U)),r=Xn(()=>U=>{const R=t.value.find(V=>V.id===U);return R?R.color:"#6B7280"}),i=Xn(()=>U=>e.value.filter(R=>R.columnId===U).sort((R,V)=>R.order-V.order)),s=Xn(()=>t.value.find(U=>U.isDefault)||t.value[0]),o=Xn(()=>[...t.value].sort((U,R)=>U.order-R.order)),a=Xn(()=>U=>{const R=xo();if(!R.user)return!1;if(R.isAdmin)return!0;switch(U.accessLevel){case"private":return!0;case"company":return R.isAdmin||R.isEntreprise;case"employee":return R.isAdmin||R.isEntreprise||R.isSalarie;case"visitor":return R.isAdmin||R.isEntreprise||R.isSalarie||R.isVisiteur;default:return!1}}),l=Xn(()=>e.value.filter(U=>a.value(U))),c=Xn(()=>U=>l.value.filter(R=>R.columnId===U).sort((R,V)=>R.order-V.order));async function h(){console.log(`
[NotesStore][loadColumns] Initialisation des colonnes fixes...`);try{const U=[{id:"1",title:"Idées",color:"#8B5CF6",order:0,isDefault:!1},{id:"2",title:"À faire",color:"#F59E0B",order:1,isDefault:!0},{id:"3",title:"En cours",color:"#3B82F6",order:2,isDefault:!1},{id:"4",title:"Terminées",color:"#10B981",order:3,isDefault:!1},{id:"5",title:"Autres",color:"#6B7280",order:4,isDefault:!1}];t.value=U,console.log("[NotesStore][loadColumns] Colonnes fixes initialisées:",t.value)}catch(U){throw console.error("[NotesStore][loadColumns] Erreur:",U),U}}async function p(U){console.log(`
[NotesStore][addColumn] Fonction désactivée - Utilisation de colonnes fixes`)}async function v(U,R){console.log(`
[NotesStore][updateColumn] Mise à jour locale de la colonne:`,U,R);try{const V=t.value.findIndex($=>$.id===U);V!==-1&&(t.value[V]={...t.value[V],...R},console.log("[NotesStore][updateColumn] État des colonnes après mise à jour:",t.value))}catch(V){throw console.error("[NotesStore][updateColumn] Erreur:",V),V}}async function g(U){console.log(`
[NotesStore][removeColumn] Fonction désactivée - Utilisation de colonnes fixes`)}async function x(U){console.log(`
[NotesStore][reorderColumns] FONCTION DÉSACTIVÉE - Le déplacement des colonnes n'est plus possible`)}function E(U){if(!U)return"private";switch(U.toLowerCase()){case"private":return"private";case"company":return"company";case"employee":return"employee";case"visitor":return"visitor";default:return console.warn(`[NotesStore] Niveau d'accès inconnu: ${U}, utilisation de PRIVATE par défaut`),"private"}}function D(U){var G;if(!U.id)throw console.error("[NotesStore][addNote] Erreur: ID du backend manquant"),new Error("L'ID du backend est requis pour ajouter une note");const R=new Date().toISOString(),V=e.value.filter(_e=>_e.columnId===U.columnId),$=V.length>0?Math.max(...V.map(_e=>_e.order))+1:0,B=E(U.access_level);console.log("[NotesStore][addNote] Ajout d'une note avec ID backend:",U.id,"et niveau d'accès:",B);const I=xo(),Q=U.enterprise_id||(!I.isAdmin&&((G=I.user)!=null&&G.enterprise_id)?I.user.enterprise_id:null);return e.value.push({...U,id:U.id,order:$,accessLevel:B,createdAt:R,updatedAt:R,comments:[],photos:[],enterprise_id:Q}),U.id}function M(U,R){console.log(`
[NotesStore][updateNote] Mise à jour de la note:`,U,R);try{const V=e.value.findIndex($=>$.id===U);V!==-1&&(R.color&&(R.style={...e.value[V].style,color:R.color,fillColor:R.color}),R.access_level&&(R.accessLevel=E(R.access_level),delete R.access_level),e.value[V]={...e.value[V],...R},console.log("[NotesStore][updateNote] Note mise à jour:",e.value[V]))}catch(V){throw console.error("[NotesStore][updateNote] Erreur:",V),V}}function A(U){e.value.findIndex(V=>V.id===U)!==-1?(console.log("[NotesStore][removeNote] Suppression de la note avec ID:",U),e.value=e.value.filter(V=>V.id!==U)):console.warn("[NotesStore][removeNote] Tentative de suppression d'une note inexistante avec ID:",U)}function z(U,R){const V=e.value.findIndex($=>$.id===U);if(V!==-1){const $=e.value[V];if($.columnId!==R){const I=e.value.filter(_e=>_e.columnId===R),Q=I.length>0?Math.max(...I.map(_e=>_e.order))+1:0,G={...$,columnId:R,order:Q,updatedAt:new Date().toISOString()};e.value[V]=G}else e.value[V]={...e.value[V],updatedAt:new Date().toISOString()}}}function Y(U,R){R.forEach((V,$)=>{const B=e.value.findIndex(I=>I.id===V&&I.columnId===U);B!==-1&&(e.value[B]={...e.value[B],order:$,updatedAt:new Date().toISOString()})})}function ne(U){switch(U){case"private":return"Privé";case"company":return"Entreprise";case"employee":return"Salariés";case"visitor":return"Visiteurs";default:return"Inconnu"}}async function ge(U,R){try{const V=xo();if(!V.user)throw new Error("Vous devez être connecté pour ajouter un commentaire");if(!V.isEntreprise&&!V.isAdmin)throw new Error("Seules les entreprises peuvent ajouter des commentaires");if(!e.value.some(ve=>ve.id===U))throw new Error(`La note avec l'ID ${U} n'existe pas`);const I=(await ka.addComment(U,R)).data,Q=e.value.findIndex(ve=>ve.id===U);if(Q===-1)return;const G=e.value[Q];G.comments||(G.comments=[]);const _e={id:I.id,text:I.text,createdAt:I.created_at,userId:I.user,userName:I.user_name,userRole:I.user_role};return G.comments.push(_e),G.updatedAt=new Date().toISOString(),e.value[Q]={...G},_e.id}catch(V){throw console.error("Erreur lors de l'ajout du commentaire:",V),V}}async function pe(U,R){try{const V=e.value.findIndex(I=>I.id===U);if(V===-1)throw new Error(`La note avec l'ID ${U} n'existe pas`);const $=e.value[V];if(!$.comments||$.comments.length===0)throw new Error("Aucun commentaire trouvé pour cette note");if(!$.comments.some(I=>I.id===R))throw new Error(`Le commentaire avec l'ID ${R} n'existe pas`);await ka.deleteComment(U,R),$.comments=$.comments.filter(I=>I.id!==R),$.updatedAt=new Date().toISOString(),e.value[V]={...$}}catch(V){throw console.error("Erreur lors de la suppression du commentaire:",V),V}}async function O(U,R){try{if(R.id&&R.image){const V=e.value.findIndex(I=>I.id===U);if(V===-1)return;const $=e.value[V];$.photos||($.photos=[]);const B={id:R.id,url:R.image,caption:R.caption,createdAt:R.created_at};return $.photos.push(B),$.updatedAt=new Date().toISOString(),e.value[V]={...$},B.id}else{const V=new FormData;V.append("image",R.url),R.caption&&V.append("caption",R.caption);const B=(await ka.addPhoto(U,V)).data,I=e.value.findIndex(_e=>_e.id===U);if(I===-1)return;const Q=e.value[I];Q.photos||(Q.photos=[]);const G={id:B.id,url:B.image,caption:B.caption,createdAt:B.created_at};return Q.photos.push(G),Q.updatedAt=new Date().toISOString(),e.value[I]={...Q},G.id}}catch(V){throw console.error("Erreur lors de l'ajout de la photo:",V),V}}async function j(U,R){try{await ka.deletePhoto(U,R);const V=e.value.findIndex(I=>I.id===U);if(V===-1){console.error("[NotesStore] Note non trouvée pour la suppression de la photo");return}e.value[V].photos||(e.value[V].photos=[]);const $=e.value[V],B=($.photos||[]).filter(I=>I.id!==R);e.value[V]={...$,photos:B,updatedAt:new Date().toISOString()},console.log("[NotesStore] Photo supprimée avec succès, photos restantes:",B.length)}catch(V){throw console.error("Erreur lors de la suppression de la photo:",V),V}}async function J(U,R,V){try{await ka.updatePhoto(U,R,{caption:V});const $=e.value.findIndex(Q=>Q.id===U);if($===-1||!e.value[$].photos)return;const B=e.value[$],I=B.photos.findIndex(Q=>Q.id===R);if(I===-1)return;B.photos[I].caption=V,B.updatedAt=new Date().toISOString(),e.value[$]={...B}}catch($){throw console.error("Erreur lors de la mise à jour de la légende:",$),$}}return{columns:t,notes:e,getColumnById:n,getColumnColor:r,getNotesByColumn:i,getDefaultColumn:s,getSortedColumns:o,hasAccessToNote:a,getAccessibleNotes:l,getAccessibleNotesByColumn:c,getAccessLevelLabel:ne,loadColumns:h,addColumn:p,updateColumn:v,removeColumn:g,reorderColumns:x,addNote:D,updateNote:M,removeNote:A,moveNote:z,reorderNotes:Y,addComment:ge,removeComment:pe,addPhoto:O,removePhoto:j,updatePhoto:J}});class Ad extends Vt.Marker{constructor(n,r={}){const s=`
      <div class="geo-note-marker">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
          <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${r.color||"#2b6451"}" />
        </svg>
      </div>
    `,o=Vt.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36]});if(!document.getElementById("geo-note-style")){const l=document.createElement("style");l.id="geo-note-style",l.textContent=`
        .geo-note-icon {
          background: none !important;
          border: none !important;
        }
        .geo-note-marker {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
          transform-origin: center bottom;
        }
      `,document.head.appendChild(l)}super(n,{icon:o,draggable:!1,autoPan:!0,riseOnHover:!0,bubblingMouseEvents:!1,interactive:!0,keyboard:!1});Je(this,"properties");Je(this,"_planSaved",!1);Je(this,"_isMoving",!1);Je(this,"_animateZoom",()=>{});this.properties={type:"Note",name:r.name||"Note géolocalisée",description:r.description||"",columnId:r.columnId||"1",accessLevel:r.accessLevel||Ki.PRIVATE,category:r.category||"forages",style:{color:r.color||"#2b6451",weight:r.weight||2,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity!==void 0?r.fillOpacity:.8,radius:r.radius||12},comments:[],photos:[],order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),enterprise_id:r.enterprise_id||null},console.log("[GeoNote][constructor] Note créée avec columnId:",this.properties.columnId),this.on("dblclick",this.onDoubleClick),this.on("add",l=>{if(l.target&&l.target._map){const c=l.target._map;this._protectFromZoomAnimationErrors(c),c.on("zoomend",()=>{this.updatePosition(),this.refreshIconStyle()}),c.on("moveend",()=>{this.updatePosition(),this.refreshIconStyle()})}}),window.addEventListener("geonote:updateStyle",l=>{const c=l.detail.noteId,h=this._dbId||this.properties.id;console.log("[GeoNote][updateStyle] Événement reçu pour noteId:",c,"Comparaison avec ID backend:",h),c===h&&(console.log("[GeoNote][updateStyle] Correspondance trouvée, mise à jour du style:",l.detail.style),this.setNoteStyle(l.detail.style),this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,...l.detail.style}))}),window.addEventListener("geonote:update",l=>{const c=l.detail.noteId,h=this._dbId||this.properties.id;console.log("[GeoNote][update] Événement reçu pour noteId:",c,"Comparaison avec ID backend:",h),c===h&&(console.log("[GeoNote][update] Correspondance trouvée, mise à jour des propriétés:",l.detail.properties),this.properties={...this.properties,name:l.detail.properties.name,description:l.detail.properties.description,columnId:l.detail.properties.columnId,accessLevel:l.detail.properties.accessLevel,style:l.detail.properties.style},this.setNoteStyle(l.detail.properties.style),console.log("[GeoNote][update] Propriétés mises à jour:",this.properties))}),console.log("[GeoNote][constructor] Note créée:",{location:n,name:this.properties.name,type:this.properties.type,style:this.properties.style})}getColumnColor(n){return{1:"#8B5CF6",2:"#F59E0B",3:"#3B82F6",4:"#10B981",5:"#6B7280"}[n]||"#6B7280"}getColumnLabel(n){return{1:"Idées",2:"À faire",3:"En cours",4:"Terminées",5:"Autres"}[n]||"Colonne "+n}getAccessLevelLabel(n){switch(n){case Ki.PRIVATE:return"Privé";case Ki.COMPANY:return"Entreprise";case Ki.EMPLOYEE:return"Salariés";case Ki.VISITOR:return"Visiteurs";default:return"Inconnu"}}getAccessLevelColor(n){switch(n){case Ki.PRIVATE:return"#9CA3AF";case Ki.COMPANY:return"#EF4444";case Ki.EMPLOYEE:return"#F59E0B";case Ki.VISITOR:return"#10B981";default:return"#6B7280"}}onDoubleClick(n){Vt.DomEvent.stopPropagation(n),this.editNote()}editNote(){const n=this._dbId,r=this._leaflet_id;console.log(`[GeoNote][editNote] Édition de note - ID backend: ${n}, ID properties: ${this.properties.id}, ID Leaflet: ${r}`);const i={id:r,backendId:n,title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},columnId:this.properties.columnId||"1",accessLevel:this.properties.accessLevel||"company",style:this.properties.style||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:this.properties.comments||[],photos:this.properties.photos||[]};console.log("[GeoNote][editNote] Édition de note avec columnId:",i.columnId),console.log("[GeoNote] Émission de l'événement note:edit avec",i);const s=new CustomEvent("geonote:edit",{detail:{note:i,source:this,backendId:n}});window.dispatchEvent(s),this.fire("note:edit",{note:i,source:this,backendId:n})}openInGoogleMaps(){const n=this.getLatLng().lat,r=this.getLatLng().lng,i=`https://www.google.com/maps/dir/?api=1&destination=${n},${r}`;window.open(i,"_blank")}updateProperties(){var s;this.properties.type="Note",this.properties.category||(this.properties.category="forages"),this.properties.accessLevel||(this.properties.accessLevel=Ki.PRIVATE);const n=this.properties.style||{};let r=n.color||n.fillColor;if(!r){const o=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker svg path");if(o){const a=o.getAttribute("fill");a&&(r=a,console.log("[GeoNote][updateProperties] Couleur récupérée depuis SVG:",r))}}r||(r="#2b6451",console.log("[GeoNote][updateProperties] Utilisation de la couleur par défaut:",r)),console.log("[GeoNote][updateProperties] Couleur finale utilisée:",r);const i=n.radius||12;this.properties.style={...n,color:r,weight:n.weight||2,fillColor:r,fillOpacity:n.fillOpacity||.8,radius:i,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category},console.log("[GeoNote][updateProperties] Style mis à jour:",this.properties.style)}setNoteStyle(n){console.log("[GeoNote][setNoteStyle] Mise à jour du style:",n);const r=n.color||n.fillColor||"#2b6451",i=n.fillColor||n.color||"#2b6451";console.log("[GeoNote][setNoteStyle] Nouvelles couleurs - stroke:",r,"fill:",i);const s=this.getElement();if(s)try{const l=s.querySelector("svg path");l?(l.setAttribute("fill",i),console.log("[GeoNote][setNoteStyle] Couleur mise à jour directement sur le SVG existant")):(console.warn("[GeoNote][setNoteStyle] Impossible de trouver le path SVG dans l'élément"),this._updateIconWithNewColor(i))}catch(l){console.warn("[GeoNote][setNoteStyle] Erreur lors de la mise à jour directe du SVG:",l),this._updateIconWithNewColor(i)}else this._updateIconWithNewColor(i);const o=n._accessLevel||n.accessLevel||this.properties.accessLevel,a=n.category||this.properties.category;this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,color:r,weight:n.weight||this.properties.style.weight||2,fillColor:i,fillOpacity:n.fillOpacity!==void 0?n.fillOpacity:this.properties.style.fillOpacity||.8,radius:n.radius||this.properties.style.radius||12,_accessLevel:o,accessLevel:o,category:a}),o&&this.properties.accessLevel!==o&&(this.properties.accessLevel=o,console.log("[GeoNote][setNoteStyle] Niveau d'accès mis à jour:",o)),a&&this.properties.category!==a&&(this.properties.category=a,console.log("[GeoNote][setNoteStyle] Catégorie mise à jour:",a)),this.refreshIconStyle(),console.log("[GeoNote][setNoteStyle] Mise à jour du popup")}refreshIconStyle(){const n=this.getElement();if(n&&(n.style.display="none",n.offsetHeight,n.style.display="",Vt.DomUtil.setTransform(n,new Vt.Point(0,0),1),this._map))try{const r=this._map.latLngToLayerPoint(this.getLatLng());Vt.DomUtil.setPosition(n,r),n.style.opacity="1",n.style.transition="opacity 0.2s"}catch(r){console.warn("[GeoNote][refreshIconStyle] Erreur lors de la mise à jour de la position:",r)}}_protectFromZoomAnimationErrors(n){try{const r=this._animateZoom;this._animateZoom=function(i){try{if(!this._map||!i.center||!i.zoom){console.warn("[GeoNote][_animateZoom] Animation de zoom ignorée: propriétés manquantes");return}typeof this.updatePositionDuringZoom=="function"?this.updatePositionDuringZoom(i):r.call(this,i)}catch(s){console.warn("[GeoNote][_animateZoom] Erreur lors de l'animation de zoom:",s);try{const o=this.getElement();if(o&&this._map){const a=this._map.latLngToLayerPoint(this.getLatLng());Vt.DomUtil.setPosition(o,a)}}catch(o){console.error("[GeoNote][_animateZoom] Erreur lors de la récupération:",o)}}},n.on("zoomanim",i=>{this.updatePositionDuringZoom(i)}),console.log("[GeoNote][_protectFromZoomAnimationErrors] Protection contre les erreurs d'animation de zoom activée")}catch(r){console.error("[GeoNote][_protectFromZoomAnimationErrors] Erreur lors de la mise en place de la protection:",r)}}_updateIconWithNewColor(n){try{const r=this._map;let i=!1;r&&(i=r.options.zoomAnimation||!1,r.options.zoomAnimation=!1);const s=`
        <div class="geo-note-marker">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${n}" />
          </svg>
        </div>
      `,o=Vt.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});this.setIcon(o),r&&i&&setTimeout(()=>{r.options.zoomAnimation=!0},100),console.log("[GeoNote][_updateIconWithNewColor] Icône mise à jour avec la nouvelle couleur")}catch(r){console.error("[GeoNote][_updateIconWithNewColor] Erreur lors de la mise à jour de l'icône:",r)}}toBackendFormat(n){this.updateProperties();const r=this.getLatLng(),s={...{...this.properties.style,radius:this.properties.style.radius||12},_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel},o=this.properties.columnId||"1";return console.log("[GeoNote][toBackendFormat] Sauvegarde de note avec columnId:",o),{id:n,type_forme:"Note",data:{location:{type:"Point",coordinates:[r.lng,r.lat]},name:this.properties.name,description:this.properties.description,columnId:o,accessLevel:this.properties.accessLevel,category:this.properties.category||"forages",style:s,comments:this.properties.comments||[],photos:this.properties.photos||[],order:this.properties.order||0,createdAt:this.properties.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}}}updateFromBackendData(n){var l,c,h,p,v;console.log("[GeoNote][updateFromBackendData] Début de la mise à jour avec les données:",n),console.log("[GeoNote][updateFromBackendData] Couleur dans les données reçues:",{styleColor:(l=n.style)==null?void 0:l.color,styleFillColor:(c=n.style)==null?void 0:c.fillColor,styleObject:n.style}),this.properties.type="Note";const r=n.style?{...n.style,radius:n.style.radius||12}:this.properties.style;console.log("[GeoNote][updateFromBackendData] Style après traitement initial:",r);const i=((h=n.style)==null?void 0:h._accessLevel)||((p=n.style)==null?void 0:p.accessLevel)||n.accessLevel||this.properties.accessLevel||Ki.PRIVATE;console.log("[GeoNote][updateFromBackendData] Niveau d'accès récupéré:",i);const s=((v=n.style)==null?void 0:v.category)||n.category||this.properties.category||"forages";console.log("[GeoNote][updateFromBackendData] Catégorie récupérée:",s);const o=n.columnId||this.properties.columnId||"1";console.log("[GeoNote][updateFromBackendData] Mise à jour de note avec columnId:",o);const a={...r,_accessLevel:i,accessLevel:i,category:s};this.properties={...this.properties,name:n.name||this.properties.name,description:n.description||this.properties.description,columnId:o,accessLevel:i,category:s,style:a,comments:n.comments||this.properties.comments||[],photos:n.photos||this.properties.photos||[],order:n.order||this.properties.order||0,createdAt:n.createdAt||this.properties.createdAt,updatedAt:n.updatedAt||new Date().toISOString()},this.setNoteStyle(a),console.log("[GeoNote][updateFromBackendData] Note mise à jour:",{name:this.properties.name,type:this.properties.type,category:this.properties.category,accessLevel:this.properties.accessLevel,style:this.properties.style})}static fromBackendData(n){var l,c,h,p,v,g,x,E;let r;if(typeof n.location=="object"&&!Array.isArray(n.location)&&n.location.type==="Point"){const D=n.location.coordinates;console.log("[GeoNote][fromBackendData] Coordonnées GeoJSON reçues:",D),r=[D[1],D[0]]}else if(Array.isArray(n.location)&&n.location.length===2)r=n.location;else throw new Error("Les données de la note ne contiennent pas de position valide");console.log("[GeoNote][fromBackendData] Création d'une note à partir des données:",n),console.log("[GeoNote][fromBackendData] Position utilisée:",r);const i=((l=n.style)==null?void 0:l._accessLevel)||((c=n.style)==null?void 0:c.accessLevel)||n.accessLevel||Ki.PRIVATE;console.log("[GeoNote][fromBackendData] Niveau d'accès récupéré:",i,"Style:",n.style);const s=((h=n.style)==null?void 0:h.category)||n.category||"forages";console.log("[GeoNote][fromBackendData] Catégorie récupérée:",s),n.accessLevel=i,n.category=s;const o=n.columnId||"1";console.log("[GeoNote][fromBackendData] Création de note avec columnId:",o);const a=new Ad(r,{name:n.name,description:n.description,columnId:o,accessLevel:i,category:n.category||"forages",color:(p=n.style)==null?void 0:p.color,weight:(v=n.style)==null?void 0:v.weight,fillColor:(g=n.style)==null?void 0:g.fillColor,fillOpacity:(x=n.style)==null?void 0:x.fillOpacity,radius:(E=n.style)==null?void 0:E.radius});return a.properties.type="Note",a.properties.comments=n.comments||[],a.properties.photos=n.photos||[],a.properties.order=n.order||0,a.properties.createdAt=n.createdAt||new Date().toISOString(),a.properties.updatedAt=n.updatedAt||new Date().toISOString(),n.style&&a.setNoteStyle(n.style),console.log("[GeoNote][fromBackendData] Note créée:",{location:r,name:a.properties.name,type:a.properties.type,category:a.properties.category,accessLevel:a.properties.accessLevel,style:a.properties.style}),a}async saveNote(n){var r,i,s,o,a,l,c,h,p,v,g;if(this._planSaved)return this._dbId||0;console.log("[GeoNote][saveNote] Sauvegarde directe de la note via l'API");try{this.updateProperties(),console.log("[GeoNote][saveNote] Couleur avant sauvegarde:",{styleColor:(r=this.properties.style)==null?void 0:r.color,styleFillColor:(i=this.properties.style)==null?void 0:i.fillColor,iconColor:((o=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker svg path"))==null?void 0:o.getAttribute("fill"))||"non disponible"});let x=((a=this.properties.style)==null?void 0:a.color)||"#2b6451";if(x.startsWith("rgb")){const A=(l=this.getElement())==null?void 0:l.querySelector(".geo-note-marker svg path");if(A){const z=A.getAttribute("fill");z&&(x=z,console.log("[GeoNote][saveNote] Couleur récupérée depuis SVG pour remplacer RGB:",x))}}const E={...this.properties.style,color:x,fillColor:x,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category};console.log("[GeoNote][saveNote] Style final pour l'envoi:",E);const D={title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},column:this.properties.columnId||"1",access_level:this.properties.accessLevel||"company",style:E,category:this.properties.category||"forages",comments:this.properties.comments||[],photos:this.properties.photos||[]};if(this.properties.enterprise_id)D.enterprise_id=this.properties.enterprise_id;else{const A=xo();!A.isAdmin&&((c=A.user)!=null&&c.enterprise_id)&&(D.enterprise_id=A.user.enterprise_id)}n&&(D.plan=n),console.log("[GeoNote][saveNote] Données à envoyer:",D),console.log("[GeoNote][saveNote] Couleur dans les données envoyées:",{styleColor:D.style.color,styleFillColor:D.style.fillColor});let M;return this._dbId?(M=(await ka.updateNote(this._dbId,D)).data,console.log("[GeoNote][saveNote] Note mise à jour avec succès:",M),console.log("[GeoNote][saveNote] Couleur dans la réponse du backend (update):",{styleColor:(h=M.style)==null?void 0:h.color,styleFillColor:(p=M.style)==null?void 0:p.fillColor,styleObject:M.style})):(M=(await ka.createNote(D)).data,console.log("[GeoNote][saveNote] Note créée avec succès:",M),console.log("[GeoNote][saveNote] Couleur dans la réponse du backend (create):",{styleColor:(v=M.style)==null?void 0:v.color,styleFillColor:(g=M.style)==null?void 0:g.fillColor,styleObject:M.style}),this._dbId=M.id,bf().addNote({...M,id:M.id,columnId:M.column,accessLevel:M.access_level})),this._planSaved=!0,M.id}catch(x){return console.error("[GeoNote][saveNote] Erreur lors de la sauvegarde de la note:",x),su().error("Erreur lors de la sauvegarde de la note"),0}}triggerPlanSave(){const n=localStorage.getItem("lastPlanId");n?(console.log(`[GeoNote][triggerPlanSave] Sauvegarde de la note avec le plan ${n}`),this.saveNote(parseInt(n))):(console.log("[GeoNote][triggerPlanSave] Aucun plan courant, sauvegarde sans association"),this.saveNote());const r=new CustomEvent("geonote:savePlan");window.dispatchEvent(r)}resetPlanSaveState(){this._planSaved=!1}moveTo(n){this.setLatLng(n),this.fire("note:moved",{latlng:n,note:this}),this.triggerPlanSave()}startMoving(){this._isMoving=!0,this.fire("note:movestart",{latlng:this.getLatLng(),note:this})}finishMoving(){this._isMoving=!1,this.fire("note:moveend",{latlng:this.getLatLng(),note:this}),this.triggerPlanSave()}isMoving(){return this._isMoving}updatePositionDuringZoom(n){try{if(!this._map||!n.center||n.zoom===void 0)return;const r=this.getElement();if(!r)return;r.style.opacity="0",r.style.transition="opacity 0.01s"}catch(r){console.warn("[GeoNote][updatePositionDuringZoom] Erreur lors de la gestion de l'animation de zoom:",r)}}updatePosition(){try{if(!this._map)return;const n=this.getElement();if(!n)return;const r=this._map.latLngToLayerPoint(this.getLatLng());Vt.DomUtil.setPosition(n,r),n.style.opacity="1",n.style.transition="opacity 0.2s"}catch(n){console.warn("[GeoNote][updatePosition] Erreur lors de la mise à jour de la position:",n)}}}function wz(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function xz(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function f5(t){var e,n,r,i,s,o,a,l,c,h,p,v,g,x,E,D,M,A,z,Y,ne,ge;if(console.log("[DrawingStore] Conversion de la forme en élément",{type:(e=t.properties)==null?void 0:e.type,name:(r=(n=t.properties)==null?void 0:n.style)==null?void 0:r.name,properties:t.properties}),((i=t.properties)==null?void 0:i.type)==="Note"){const pe=t.getLatLng();return{type_forme:"Note",data:{points:[[pe.lng,pe.lat]],style:{color:((s=t.properties.style)==null?void 0:s.color)||"#2b6451",weight:((o=t.properties.style)==null?void 0:o.weight)||3,opacity:((a=t.properties.style)==null?void 0:a.opacity)||1,fillColor:((l=t.properties.style)==null?void 0:l.fillColor)||"#2b6451",fillOpacity:((c=t.properties.style)==null?void 0:c.fillOpacity)||.2,name:((h=t.properties.style)==null?void 0:h.name)||""}}}}if(t instanceof uh||((p=t.properties)==null?void 0:p.type)==="Polygon")return{type_forme:"Polygon",data:{points:t.getLatLngs()[0].map(j=>[j.lng,j.lat]),style:{color:((v=t.properties.style)==null?void 0:v.color)||"#2b6451",weight:((g=t.properties.style)==null?void 0:g.weight)||3,opacity:((x=t.properties.style)==null?void 0:x.opacity)||1,fillColor:((E=t.properties.style)==null?void 0:E.fillColor)||"#2b6451",fillOpacity:((D=t.properties.style)==null?void 0:D.fillOpacity)||.2,name:((M=t.properties.style)==null?void 0:M.name)||""},category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor"}};if(t instanceof pa||((A=t.properties)==null?void 0:A.type)==="Line")return{type_forme:"Line",data:{points:t.getLatLngs().map(j=>[j.lng,j.lat]),category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor",style:{color:((z=t.properties.style)==null?void 0:z.color)||"#2b6451",weight:((Y=t.properties.style)==null?void 0:Y.weight)||3,opacity:((ne=t.properties.style)==null?void 0:ne.opacity)||1,name:((ge=t.properties.style)==null?void 0:ge.name)||""}}};throw new Error("Type de forme non reconnu")}function Lz(t){var e,n,r,i,s,o,a,l,c,h,p,v,g,x,E,D,M,A,z,Y,ne,ge,pe,O,j,J,U,R,V,$,B,I,Q,G,_e;switch(console.log("[DrawingStore] Conversion de l'élément stocké en forme",{element:t}),t.type_forme){case"Polygon":{const ve=t.data;if(!wz(ve))return console.error("[DrawingStore] Données invalides pour Polygon"),null;const qe=ve.points.map(Z=>Zn.latLng(Z[1],Z[0])),re=((e=ve.style)==null?void 0:e._accessLevel)||((n=ve.style)==null?void 0:n.accessLevel)||ve.accessLevel||"visitor";console.log("[DrawingStore] Polygon - Niveau d'accès récupéré:",re,"Style:",ve.style),ve.accessLevel=re;const K=new uh([qe],{color:((r=ve.style)==null?void 0:r.color)||"#2b6451",weight:((i=ve.style)==null?void 0:i.weight)||3,opacity:((s=ve.style)==null?void 0:s.opacity)||1,fillColor:((o=ve.style)==null?void 0:o.fillColor)||"#2b6451",fillOpacity:((a=ve.style)==null?void 0:a.fillOpacity)||.2,dashArray:((l=ve.style)==null?void 0:l.dashArray)||"",name:((c=ve.style)==null?void 0:c.name)||"",category:ve.category||"forages",accessLevel:re});return K.updateProperties(),K}case"Line":{const ve=t.data;if(!xz(ve))return console.error("[DrawingStore] Données invalides pour Ligne"),null;const qe=ve.points.map(Z=>Zn.latLng(Z[1],Z[0])),re=((h=ve.style)==null?void 0:h._accessLevel)||((p=ve.style)==null?void 0:p.accessLevel)||ve.accessLevel||"visitor";console.log("[DrawingStore] Line - Niveau d'accès récupéré:",re,"Style:",ve.style),ve.accessLevel=re;const K=new pa(qe,{...ve.style||{},name:((v=ve.style)==null?void 0:v.name)||"",category:ve.category||"forages",accessLevel:re});return K.updateProperties(),K}case"Rectangle":{const ve=t.data;if(console.log("[DrawingStore][convertStoredElementToShape] Restauration Rectangle:",{data:ve,bounds:ve.bounds,width:ve.width,height:ve.height,rotation:ve.rotation}),!ve.bounds)return console.error("[DrawingStore] Données de bounds manquantes pour Rectangle"),null;const qe=new Zn.LatLngBounds(Zn.latLng(ve.bounds.southWest[1],ve.bounds.southWest[0]),Zn.latLng(ve.bounds.northEast[1],ve.bounds.northEast[0])),re=new qa(qe,{color:((g=ve.style)==null?void 0:g.color)||"#2b6451",weight:((x=ve.style)==null?void 0:x.weight)||3,opacity:((E=ve.style)==null?void 0:E.opacity)||1,fillColor:((D=ve.style)==null?void 0:D.fillColor)||"#2b6451",fillOpacity:((M=ve.style)==null?void 0:M.fillOpacity)||.2,dashArray:((A=ve.style)==null?void 0:A.dashArray)||"",name:((z=ve.style)==null?void 0:z.name)||"",width:ve.width,height:ve.height});return ve.rotation&&re.setRotation(ve.rotation),console.log("[DrawingStore][convertStoredElementToShape] Rectangle restauré:",{bounds:re.getBounds(),dimensions:re.getDimensions(),properties:re.properties}),re}case"Circle":{console.log("[DrawingStore] Traitement d'un Circle à partir de l'API",{id:t.id,data:t.data,hasName:((ne=(Y=t.data)==null?void 0:Y.style)==null?void 0:ne.name)!==void 0,name:(pe=(ge=t.data)==null?void 0:ge.style)==null?void 0:pe.name});const ve=t.data;if(!ve.center||!ve.radius)return console.error("[DrawingStore] Données invalides pour Circle"),null;const qe=Zn.circle([ve.center[1],ve.center[0]],{color:((O=ve.style)==null?void 0:O.color)||"#2b6451",weight:((j=ve.style)==null?void 0:j.weight)||3,opacity:((J=ve.style)==null?void 0:J.opacity)||1,fillColor:((U=ve.style)==null?void 0:U.fillColor)||"#2b6451",fillOpacity:((R=ve.style)==null?void 0:R.fillOpacity)||.2,dashArray:((V=ve.style)==null?void 0:V.dashArray)||"",radius:ve.radius});return qe.properties={type:"Circle",radius:ve.radius,diameter:ve.radius*2,surface:Math.PI*ve.radius*ve.radius,perimeter:2*Math.PI*ve.radius,style:{...ve.style||{},name:(($=ve.style)==null?void 0:$.name)||""}},console.log("[DrawingStore] Cercle créé:",{centerType:typeof ve.center,center:ve.center,radius:ve.radius,style:qe.properties.style,name:qe.properties.style.name}),qe}case"Note":{console.log("[DrawingStore] Traitement d'une Note à partir de l'API",{id:t.id,data:t.data});const ve=t.data;if(!ve.location)return console.error("[DrawingStore] Données invalides pour Note"),null;try{const qe={location:ve.location,name:ve.name||"Note géolocalisée",description:ve.description||"",columnId:ve.columnId||"en-cours",accessLevel:ve.accessLevel||"private",category:ve.category||"forages",style:{color:((B=ve.style)==null?void 0:B.color)||"#2b6451",weight:((I=ve.style)==null?void 0:I.weight)||2,fillColor:((Q=ve.style)==null?void 0:Q.fillColor)||"#2b6451",fillOpacity:((G=ve.style)==null?void 0:G.fillOpacity)||.8,radius:((_e=ve.style)==null?void 0:_e.radius)||12},comments:ve.comments||[],photos:ve.photos||[],order:ve.order||0,createdAt:ve.createdAt||new Date().toISOString(),updatedAt:ve.updatedAt||new Date().toISOString()};console.log("[DrawingStore] Données préparées pour la note:",qe);const re=Ad.fromBackendData(qe);return re._dbId=t.id,console.log("[DrawingStore] Note créée:",{id:t.id,location:qe.location,name:qe.name,type:re.properties.type}),re}catch(qe){return console.error("[DrawingStore] Erreur lors de la création de la Note:",qe),null}}default:return console.warn("[DrawingStore] Type non géré pour la restauration:",t.type_forme),null}}const Ap=Fp("drawing",{state:()=>({currentMapId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",filters:{accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}},currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null,performanceMonitor:$p()}),getters:{hasUnsavedChanges:t=>t.unsavedChanges,getCurrentElements:t=>t.elements,getSelectedElement:t=>t.selectedElement,getCurrentTool:t=>t.currentTool,getCurrentStyle:t=>t.currentStyle,getLastUsedType:t=>t.lastUsedType,getFilters:t=>t.filters,getFilteredElements:t=>{if(t.elements.length===0)return console.log("[DrawingStore][getFilteredElements] Aucun élément dans le store, retour d'un tableau vide"),[];console.log("[DrawingStore][getFilteredElements] Début du filtrage avec",{totalElements:t.elements.length,filters:JSON.stringify({accessLevels:t.filters.accessLevels,categories:t.filters.categories,shapeTypes:t.filters.shapeTypes})}),console.log("[DrawingStore][getFilteredElements] Éléments dans le store:",t.elements.map(n=>({id:n.id,type_forme:n.type_forme,data:n.data?JSON.stringify(n.data):null})));const e=t.elements.filter(n=>{var l,c;if(console.log(`[DrawingStore][getFilteredElements] Vérification de l'élément ${n.id} (${n.type_forme})`),!(n.type_forme in t.filters.shapeTypes?t.filters.shapeTypes[n.type_forme]:!0))return console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} filtré par type: ${n.type_forme} (non visible)`),!1;const i=((l=n.data)==null?void 0:l.category)||"default";if(!(i in t.filters.categories?t.filters.categories[i]:!0))return console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} filtré par catégorie: ${i} (non visible)`),!1;const o=((c=n.data)==null?void 0:c.accessLevel)||"visitor";let a=!0;return o==="company"?a=t.filters.accessLevels.company:o==="employee"?a=t.filters.accessLevels.employee:o==="visitor"&&(a=t.filters.accessLevels.visitor),a?(console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} visible: type=${n.type_forme}, catégorie=${i}, accès=${o}`),!0):(console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} filtré par niveau d'accès: ${o} (non visible)`),!1)});return console.log("[DrawingStore][getFilteredElements] Résultat du filtrage:",{total:t.elements.length,filtered:e.length,filteredIds:e.map(n=>n.id)}),e}},actions:{setCurrentPlan(t){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentMapId=t,t===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},this.filters={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}},clearCurrentPlan(){(this.currentMapId!==null||this.elements.length>0)&&(this.currentMapId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null)},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(t){var n;const e=this.performanceMonitor.startMeasure("addElement","DrawingStore");try{if(console.log("[DrawingStore] Ajout d'un élément",{element:t,isLeafletLayer:t instanceof Zn.Layer,hasProperties:!!t.properties,properties:t.properties,type:(n=t.properties)==null?void 0:n.type}),t instanceof Zn.Layer&&t.properties){const r=this.performanceMonitor.measure("addElement_convert",()=>f5(t),"DrawingStore");console.log("[DrawingStore] Élément converti avant ajout",{original:t,converted:r,type:r.type_forme,data:r.data}),this.elements.push(r)}else!t.type_forme&&this.lastUsedType&&(t.type_forme=this.lastUsedType),this.elements.push(t);this.unsavedChanges=!0}finally{e()}},updateElement(t){const e=this.elements.findIndex(n=>n.id===t.id);if(e!==-1){const n=this.elements[e].type_forme;this.elements[e]={...t,type_forme:n},this.unsavedChanges=!0}},removeElement(t){const e=this.elements.findIndex(n=>n.id===t);e!==-1&&(this.elements.splice(e,1),this.unsavedChanges=!0)},selectElement(t){this.selectedElement=t},setCurrentTool(t){this.currentTool=t,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(t)&&(this.lastUsedType=t)},setCurrentStyle(t){if(!t||Object.keys(t).length===0){this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2};return}this.currentStyle={...this.currentStyle,...t}},updateFilters(t){if(t.accessLevels&&({...this.filters.accessLevels},this.filters.accessLevels={...this.filters.accessLevels,...t.accessLevels}),t.categories){const e={...this.filters.categories};this.filters.categories={...this.filters.categories,...t.categories};const n=Object.keys(t.categories).filter(r=>e[r]!==this.filters.categories[r]);if(n.length>0){const r=n.filter(i=>e[i]===!1&&this.filters.categories[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("categoriesReactivated",{detail:{categories:r}}))}}if(t.shapeTypes){const e={...this.filters.shapeTypes};this.filters.shapeTypes={...this.filters.shapeTypes,...t.shapeTypes};const n=Object.keys(t.shapeTypes).filter(r=>e[r]!==this.filters.shapeTypes[r]);if(n.length>0){const r=n.filter(i=>e[i]===!1&&this.filters.shapeTypes[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("shapeTypesReactivated",{detail:{shapeTypes:r}}))}}window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:this.filters}}))},async loadPlanElements(t){const e=this.performanceMonitor.startMeasure("loadPlanElements","DrawingStore");if(this.currentMapId===t&&this.elements.length>0)return console.log(`[DrawingStore] Plan ${t} déjà chargé avec ${this.elements.length} éléments`),e(),this.elements;this.loading=!0;try{console.log("[DrawingStore] Début du chargement du plan",{planId:t});const r=(await this.performanceMonitor.measureAsync("loadPlanElements_apiCall",()=>In.get(`/plans/${t}/`),"DrawingStore")).data;return console.log("[DrawingStore] Données du plan reçues",{formes:r.formes,preferences:r.preferences}),r.formes&&Array.isArray(r.formes)&&r.formes.forEach((i,s)=>{var o,a,l;console.log(`[DrawingStore] Analyse détaillée forme ${s}:`,{id:i.id,type_forme:i.type_forme,hasData:!!i.data,dataKeys:i.data?Object.keys(i.data):[],name:(o=i.data)==null?void 0:o.name,hasName:i.data&&"name"in i.data,centerType:(a=i.data)!=null&&a.center?typeof i.data.center:"undefined",center:(l=i.data)==null?void 0:l.center})}),this.elements=r.formes.map(i=>{var s;if(console.log("[DrawingStore] Traitement de la forme stockée",{id:i.id,type_forme:i.type_forme,data:i.data}),i.type_forme)return console.log("[DrawingStore] Forme déjà au format élément",{type_forme:i.type_forme,data:i.data,hasName:i.data&&"name"in i.data,name:(s=i.data)==null?void 0:s.name}),{id:i.id,type_forme:i.type_forme,data:i.data||{}};try{const o=Lz(i);if(o)return console.log("[DrawingStore] Forme convertie avec succès",{originalType:i.type_forme,convertedType:o.type,properties:o.properties}),f5(o)}catch(o){console.error("[DrawingStore] Erreur lors de la conversion de la forme",{error:o,forme:i})}return console.warn("[DrawingStore] Utilisation de la forme sans conversion",{type_forme:i.type_forme,data:i.data}),i}),console.log(`[DrawingStore] Plan ${t} - Chargé ${this.elements.length} éléments`,{elements:this.elements.map(i=>({id:i.id,type_forme:i.type_forme}))}),this.currentMapId=t,this.unsavedChanges=!1,r.preferences&&(console.log("[DrawingStore] Chargement des préférences",r.preferences),r.preferences.currentTool&&this.setCurrentTool(r.preferences.currentTool),r.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...r.preferences.currentStyle}),r.preferences.lastUsedType&&(this.lastUsedType=r.preferences.lastUsedType)),this.elements}catch(n){throw console.error("[DrawingStore] Erreur lors du chargement des éléments:",n),this.error="Erreur lors du chargement des éléments du plan",n}finally{this.loading=!1,e()}},async saveToPlan(t,e){const n=this.performanceMonitor.startMeasure("saveToPlan","DrawingStore");this.loading=!0;try{const r=t||this.currentMapId;if(console.log("[DrawingStore][saveToPlan] Début de la sauvegarde",{targetPlanId:r,currentPlanId:this.currentMapId,elementsCount:this.elements.length,elementsToDelete:e==null?void 0:e.elementsToDelete}),!r)throw new Error("Aucun plan sélectionné pour la sauvegarde");const i=this.performanceMonitor.measure("saveToPlan_prepareElements",()=>this.elements.map(l=>({...l,type_forme:l.type_forme||this.lastUsedType})),"DrawingStore"),s=(e==null?void 0:e.elementsToDelete)||[],o=`/plans/${r}/save_with_elements/`,a=await this.performanceMonitor.measureAsync("saveToPlan_apiCall",()=>In.post(o,{formes:i,connexions:[],annotations:[],elementsToDelete:s,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}}),"DrawingStore");return this.elements=this.performanceMonitor.measure("saveToPlan_processResponse",()=>{const l=new Set(s);return a.data.formes.filter(c=>!l.has(c.id)).map(c=>({...c,type_forme:c.type_forme}))},"DrawingStore"),console.log("[DrawingStore][saveToPlan] Éléments après filtrage:",{totalElements:this.elements.length,elementsToDelete:s}),this.unsavedChanges=!1,a.data}catch(r){throw console.error("[DrawingStore][saveToPlan] ERREUR:",r),console.error("[DrawingStore][saveToPlan] Stack trace:",r instanceof Error?r.stack:"No stack trace"),this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1,n()}}}}),IE=Fp("mapFilters",{state:()=>({filters:[],loading:!1,error:null,performanceMonitor:$p()}),getters:{getFilterById:t=>e=>t.filters.find(n=>n.id===e),getFiltersByCategory:t=>e=>t.filters.filter(n=>n.category===e),getUniqueCategories:t=>{const e=new Set;return t.filters.forEach(n=>e.add(n.category)),Array.from(e)}},actions:{async initializeStore(){await this.fetchFilters()},async fetchFilters(){const t=this.performanceMonitor.startMeasure("fetchFilters","MapFilterStore"),e=su();this.loading=!0,this.error=null;try{const n=await this.performanceMonitor.measureAsync("fetchFilters_apiCall",()=>b0.getFilters(),"MapFilterStore");return this.filters=n.data,this.filters}catch(n){throw this.error="Erreur lors du chargement des filtres",e.error("Impossible de charger les filtres de carte"),console.error("[MapFilterStore] Erreur lors du chargement des filtres:",n),n}finally{this.loading=!1,t()}},async createFilter(t){const e=this.performanceMonitor.startMeasure("createFilter","MapFilterStore");this.loading=!0,this.error=null;try{const n=await this.performanceMonitor.measureAsync("createFilter_apiCall",()=>b0.createFilter(t),"MapFilterStore");return this.filters.push(n.data),console.log("[MapFilterStore] Filtre créé avec succès:",n.data),n.data}catch(n){throw this.error="Erreur lors de la création du filtre",console.error("[MapFilterStore] Erreur lors de la création du filtre:",n),n}finally{this.loading=!1,e()}},async updateFilter(t,e){const n=this.performanceMonitor.startMeasure("updateFilter","MapFilterStore");this.loading=!0,this.error=null;try{const r=await this.performanceMonitor.measureAsync("updateFilter_apiCall",()=>b0.updateFilter(t,e),"MapFilterStore"),i=this.filters.findIndex(s=>s.id===t);return i!==-1&&(this.filters[i]=r.data),console.log("[MapFilterStore] Filtre mis à jour avec succès:",r.data),r.data}catch(r){throw this.error="Erreur lors de la mise à jour du filtre",console.error("[MapFilterStore] Erreur lors de la mise à jour du filtre:",r),r}finally{this.loading=!1,n()}},async deleteFilter(t){const e=this.performanceMonitor.startMeasure("deleteFilter","MapFilterStore");this.loading=!0,this.error=null;try{return await this.performanceMonitor.measureAsync("deleteFilter_apiCall",()=>b0.deleteFilter(t),"MapFilterStore"),this.filters=this.filters.filter(n=>n.id!==t),console.log("[MapFilterStore] Filtre supprimé avec succès:",t),!0}catch(n){throw this.error="Erreur lors de la suppression du filtre",console.error("[MapFilterStore] Erreur lors de la suppression du filtre:",n),n}finally{this.loading=!1,e()}}}}),$y=Fp("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[],performanceMonitor:$p()}),getters:{getPlanById:t=>e=>t.plans.find(n=>n.id===e),hasUnsavedChanges:t=>t.unsavedChanges,getCurrentPlanHistory:t=>t.planHistory},actions:{async fetchPlans(){var n,r;const t=this.performanceMonitor.startMeasure("fetchPlans","IrrigationStore"),e=xo();this.loading=!0;try{let i="/plans/";const s={};e.isSalarie?s.salarie=(n=e.user)==null?void 0:n.id:e.isVisiteur&&(s.visiteur=(r=e.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlans_apiCall",()=>In.get(i,{params:s}),"IrrigationStore");this.plans=o.data}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,t()}},async fetchPlansWithDetails(){var n,r;const t=this.performanceMonitor.startMeasure("fetchPlansWithDetails","IrrigationStore"),e=xo();this.loading=!0;try{let i="/plans/";const s={include_details:!0};e.isSalarie?s.salarie=(n=e.user)==null?void 0:n.id:e.isVisiteur&&(s.visiteur=(r=e.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlansWithDetails_apiCall",()=>In.get(i,{params:s}),"IrrigationStore"),a=this.performanceMonitor.measure("fetchPlansWithDetails_processResponse",()=>o.data.map(l=>({...l,entreprise:typeof l.entreprise=="object"?l.entreprise:null,salarie:typeof l.salarie=="object"?l.salarie:null,visiteur:typeof l.visiteur=="object"?l.visiteur:null})),"IrrigationStore");return this.plans=a,{data:a}}catch(i){throw console.error("[IrrigationStore] Error fetching plans:",i),this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,t()}},async fetchClientPlans(t){this.loading=!0;try{return(await y0.getVisiteurPlans(t)).data}catch(e){throw this.error="Erreur lors du chargement des plans du client",e}finally{this.loading=!1}},async createPlan(t){var r;const e=this.performanceMonitor.startMeasure("createPlan","IrrigationStore");this.clearCurrentPlan(),this.loading=!0;const n=su();try{const i=xo();((r=i.user)==null?void 0:r.user_type)==="visiteur"&&(t={...t,visiteur:i.user.id,salarie_id:i.user.enterprise_id,entreprise_id:i.user.enterprise_id});const s=this.performanceMonitor.measure("createPlan_formatData",()=>({...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&t.entreprise&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&t.salarie&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&t.visiteur&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null}),"IrrigationStore"),o=await this.performanceMonitor.measureAsync("createPlan_apiCall",()=>y0.createPlan(s),"IrrigationStore");return this.plans.push(o.data),n.success(`Le plan "${o.data.nom}" a été créé avec succès`),o.data}catch(i){const s=i instanceof Error?i.message:String(i);throw console.error("Error creating plan:",s),this.error=s,n.error(`Erreur lors de la création du plan : ${s}`),i}finally{this.loading=!1,e()}},async createPlanForClient(t,e){this.clearCurrentPlan(),this.loading=!0;try{const n={...t,visiteur:e},r=await y0.createPlanForVisiteur(n);return this.plans.push(r.data),r.data}catch(n){const r=n instanceof Error?n.message:String(n);throw console.error("Error creating plan for client:",r),this.error="Erreur lors de la création du plan pour le client",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(t){const e=this.performanceMonitor.startMeasure("savePlan","IrrigationStore");if(!this.unsavedChanges){console.log("[IrrigationStore][savePlan] Aucun changement à sauvegarder"),e();return}this.loading=!0;try{const n=await this.performanceMonitor.measureAsync("savePlan_apiCall",()=>{var r;return In.patch(`/plans/${t}/`,{...this.currentPlan,version:((r=this.currentPlan)==null?void 0:r.version)||1})},"IrrigationStore");return this.performanceMonitor.measure("savePlan_updateState",()=>{var i;const r=this.plans.findIndex(s=>s.id===t);r!==-1&&(this.plans[r]=n.data),((i=this.currentPlan)==null?void 0:i.id)===t&&(this.currentPlan=n.data)},"IrrigationStore"),this.unsavedChanges=!1,n.data}catch(n){throw console.error("[IrrigationStore][savePlan] ERREUR:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1,e()}},async updatePlanDetails(t,e){const n=this.performanceMonitor.startMeasure("updatePlanDetails","IrrigationStore"),r=su();try{const i=await this.performanceMonitor.measureAsync("updatePlanDetails_apiCall",()=>{const{visiteur_id:s,salarie_id:o,entreprise_id:a,...l}=e,c={...l};return s!==void 0&&(c.visiteur_id=s),o!==void 0&&(c.salarie_id=o),a!==void 0&&(c.entreprise_id=a),In.patch(`/plans/${t}/`,c)},"IrrigationStore");return this.performanceMonitor.measure("updatePlanDetails_updateState",()=>{this.currentPlan&&this.currentPlan.id===t&&(this.currentPlan={...this.currentPlan,...i.data});const s=this.plans.findIndex(o=>o.id===t);s!==-1&&(this.plans[s]={...this.plans[s],...i.data})},"IrrigationStore"),i.data}catch(i){throw console.error("Erreur lors de la mise à jour du plan:",i),r.error(`Erreur lors de la mise à jour du plan : ${i instanceof Error?i.message:String(i)}`),i}finally{n()}},async fetchPlanHistory(t){this.loading=!0;try{const e=await In.get(`/plans/${t}/historique/`);return this.planHistory=e.data,e.data}catch(e){throw this.error="Erreur lors de la récupération de l'historique",e}finally{this.loading=!1}},async restorePlanVersion(t,e){var n;this.loading=!0;try{const r=await In.post(`/plans/${t}/restaurer/`,{version_id:e});((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=r.data);const i=this.plans.findIndex(s=>s.id===t);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(t){this.currentPlan=t,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(t){var n;this.loading=!0;const e=su();try{const r=this.plans.find(i=>i.id===t);await y0.deletePlan(t),this.plans=this.plans.filter(i=>i.id!==t),((n=this.currentPlan)==null?void 0:n.id)===t&&this.clearCurrentPlan(),e.success(`Le plan "${(r==null?void 0:r.nom)||""}" a été supprimé avec succès`)}catch(r){throw this.error="Erreur lors de la suppression du plan",e.error(`Erreur lors de la suppression du plan : ${r instanceof Error?r.message:String(r)}`),r}finally{this.loading=!1}}}}),Sz={class:"hidden md:hidden flex-mobile items-center justify-between p-4 border-b border-gray-200"},Cz={class:"flex-1 overflow-y-auto"},Ez={class:"border-b border-gray-200"},Pz={class:"flex -mb-px"},Mz={class:"flex-1 overflow-hidden flex flex-col"},kz={key:0,class:"p-3 overflow-y-auto flex-1"},Az={class:"grid grid-cols-3 gap-1.5 mb-4"},Tz=["onClick","title"],Dz=["innerHTML"],Nz={key:0,class:"grid grid-cols-2 gap-2 mt-2 mb-2"},Oz={key:2,class:"my-4 border-t border-gray-200"},Iz={key:3,class:"mt-4"},Bz={key:0,class:"mb-4"},Rz={class:"mb-4"},Fz=["value"],jz={class:"mb-4"},zz={class:"grid grid-cols-1 gap-4"},$z={key:0,class:"space-y-1"},Vz={class:"flex justify-between items-center"},Uz={class:"text-sm font-medium text-gray-500"},Hz={class:"flex justify-between items-center"},Wz={class:"text-sm font-medium text-gray-500"},Gz={class:"text-sm font-medium text-gray-500"},qz={class:"flex flex-col space-y-2 w-full"},Yz={class:"flex justify-between items-center"},Kz={class:"text-sm font-medium text-gray-500 ml-2"},Zz={class:"flex justify-between items-center"},Xz={class:"text-sm font-medium text-gray-500 ml-2"},Jz={class:"flex justify-between items-center"},Qz={class:"text-sm font-medium text-gray-500 ml-2"},e$={class:"flex justify-between items-center"},t$={class:"text-sm font-medium text-gray-500 ml-2"},n$={class:"flex justify-between items-center"},r$={class:"text-sm font-medium text-gray-500 ml-2"},i$={ref:"elevationProfileContainer",class:"elevation-profile-container w-full h-48 bg-gray-50 rounded border border-gray-200 relative mt-4"},s$={ref:"elevationCanvas"},o$={key:1,class:"p-3 overflow-y-auto flex-1"},a$={class:"grid grid-cols-6 gap-2 mb-4"},l$=["onClick","title"],u$={key:0,class:"space-y-4"},c$={class:"flex items-center gap-4"},d$={class:"flex items-center gap-2"},h$={class:"flex items-center gap-4"},f$=["value"],p$={key:0,class:"flex items-center gap-4"},g$={class:"flex items-center gap-2"},m$={key:1,class:"space-y-4"},v$={class:"flex items-center gap-4"},y$={class:"flex items-center gap-2"},b$={class:"flex items-center gap-4"},_$={class:"flex items-center gap-2"},w$={key:2,class:"filters-tab"},x$={class:"filters-content"},L$={class:"space-y-2"},S$={class:"space-y-2 mt-4"},C$={class:"space-y-1"},E$={class:"flex items-center"},P$={class:"flex items-center"},M$={class:"flex items-center"},k$={class:"flex items-center"},A$={class:"flex items-center"},T$={class:"flex items-center"},D$={key:0,class:"flex items-center"},N$=["onUpdate:modelValue"],O$={class:"ml-2 text-sm text-gray-700"},I$={key:0,class:"mt-2 pt-2 border-t border-gray-200"},B$={class:"flex space-x-2"},R$=["disabled"],F$={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},j$={key:1,class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},z$={class:"space-y-2 mt-4"},$$={class:"space-y-1"},V$={class:"flex items-center"},U$={class:"flex items-center"},H$={class:"flex items-center"},W$={class:"flex items-center"},G$={key:0,class:"p-3 border-t border-gray-200"},q$={class:"mt-3"},Y$={class:"mb-4"},K$={class:"grid grid-cols-2 gap-2"},Z$={class:"grid grid-cols-2 gap-2"},X$=Hs({__name:"DrawingTools",props:{show:{type:Boolean,default:!1},selectedTool:{type:String,default:""},selectedShape:{type:Object,default:null},allLayers:{type:Array,default:()=>[]},isDrawing:{type:Boolean,default:!1}},emits:["update:show","tool-selected","style-update","properties-update","delete-shape","filter-change","close-drawer"],setup(t,{emit:e}){const n=t,r=Ap(),i=xo(),s=Xn(()=>i.isAdmin),o=Xn(()=>i.isEntreprise),a=IE(),l=$y(),c=ou({name:""}),h=Ct(!1),p=Ct(["forages","clients","entrepots","livraisons","cultures","parcelles"]),v=[{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"Note",label:"Note géolocalisée"}],g=Ee=>{switch(Ee){case"Polygon":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5l16 0l0 14l-16 0l0 -14z"/></svg>';case"Line":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20l16 -16"/></svg>';case"Note":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 2l4 4m-6 0l2-2 4 4-2 2-4-4z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h8" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14h4" /></svg>';default:return""}},x=Ct("tools");Ti(()=>n.selectedTool,(Ee,me)=>{console.log("[DrawingTools][watch selectedTool] Changement d'outil:",{newTool:Ee,oldTool:me})}),Ti(x,(Ee,me)=>{console.log("[DrawingTools][watch activeTab] Changement d'onglet:",{newTab:Ee,oldTab:me}),Ee==="filters"&&me!=="filters"&&(console.log("[DrawingTools][watch activeTab] Passage à l'onglet filtres"),console.log("[DrawingTools][watch activeTab] État actuel des filtres dans le store:",JSON.stringify({accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}},null,2)),console.log("[DrawingTools][watch activeTab] État actuel des filtres locaux:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2)),n.selectedShape&&(console.log("[DrawingTools][watch activeTab] Désélection de la forme actuelle lors du passage à l'onglet filtres"),le("tool-selected","")),setTimeout(()=>{he()},0)),me==="filters"&&Ee!=="filters"&&(console.log("[DrawingTools][watch activeTab] Sortie de l'onglet filtres, application des changements"),console.log("[DrawingTools][watch activeTab] État des filtres locaux avant application:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2)),he())});const E=Ct({samplePoints:!0,circleSections:!0}),D=Ct("#2b6451"),M=Ct(2),A=Ct("solid"),z=Ct("#2b6451"),Y=Ct(.2),ne=Ct(!0),ge=Ct(""),pe=Ct("default"),O=Ct("visitor"),j=Ct({radius:4,color:"#2b6451",fillOpacity:.6,weight:2}),J=Ct({radius:6,color:"#EF4444",fillOpacity:.8,weight:2}),U=["#2b6451","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],R=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillés"}],V=Ct("company"),$=ou({accessLevels:{company:!0,employee:!1,visitor:!1},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}),B=Ee=>{console.log(`[DrawingTools][updateAccessLevelFilter] Changement du niveau d'accès: ${Ee}`),V.value=Ee,Ee==="company"?($.accessLevels.company=!0,$.accessLevels.employee=!1,$.accessLevels.visitor=!1):Ee==="employee"?($.accessLevels.company=!1,$.accessLevels.employee=!0,$.accessLevels.visitor=!1):Ee==="visitor"&&($.accessLevels.company=!1,$.accessLevels.employee=!1,$.accessLevels.visitor=!0),he()},I=Ee=>{console.log(`[DrawingTools][updateAccessLevelFilterAndDeselect] Changement du niveau d'accès: ${Ee}`),n.selectedShape&&(console.log("[DrawingTools][updateAccessLevelFilterAndDeselect] Désélection de la forme actuelle"),le("tool-selected","")),B(Ee)};console.log("[DrawingTools] Initialisation des filtres:",JSON.stringify({local:{accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},store:{accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}}},null,2));const Q=Xn(()=>n.selectedShape&&n.selectedShape.properties||null),G=Ee=>{E.value[Ee]=!E.value[Ee]},_e=Ee=>{D.value=Ee,z.value=Ee,ve({strokeColor:Ee,fillColor:Ee})},ve=Ee=>{n.selectedShape&&le("style-update",Ee)},qe=()=>{n.selectedShape&&le("properties-update",{name:ge.value})},re=()=>{n.selectedShape&&le("properties-update",{category:pe.value})},K=()=>{n.selectedShape&&le("properties-update",{accessLevel:O.value})},Z=()=>{var Ee;!n.selectedShape||((Ee=Q.value)==null?void 0:Ee.type)!=="ElevationLine"||le("style-update",{samplePointStyle:j.value})},oe=()=>{var Ee;!n.selectedShape||((Ee=Q.value)==null?void 0:Ee.type)!=="ElevationLine"||le("style-update",{minMaxPointStyle:J.value})},de=()=>{console.log("[DrawingTools][resetFilters] Début de la réinitialisation des filtres"),console.log("[DrawingTools][resetFilters] État actuel des filtres:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2));const Ee={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}};console.log("[DrawingTools][resetFilters] Nouveaux filtres à appliquer:",JSON.stringify(Ee,null,2)),console.log("[DrawingTools][resetFilters] Mise à jour des filtres locaux"),$.accessLevels.company=!0,$.accessLevels.employee=!0,$.accessLevels.visitor=!0,$.categories.forages=!0,$.categories.clients=!0,$.categories.entrepots=!0,$.categories.livraisons=!0,$.categories.cultures=!0,$.categories.parcelles=!0,$.shapeTypes.Polygon=!0,$.shapeTypes.Line=!0,$.shapeTypes.ElevationLine=!0,$.shapeTypes.Note=!0,console.log("[DrawingTools][resetFilters] Filtres locaux après mise à jour:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2)),console.log("[DrawingTools][resetFilters] Mise à jour des filtres dans le store"),r.updateFilters(Ee),console.log("[DrawingTools][resetFilters] Émission de l'event filter-change"),le("filter-change",Ee),console.log("[DrawingTools][resetFilters] Mise à jour forcée de l'affichage"),console.log("[DrawingTools][resetFilters] Filtres réinitialisés avec succès")},ye=()=>{console.log("[DrawingTools][resetFiltersAndDeselect] Début de la réinitialisation des filtres avec désélection"),fe(),de(),console.log("[DrawingTools][resetFiltersAndDeselect] Filtres réinitialisés et forme désélectionnée avec succès")},he=()=>{const Ee={...$.accessLevels},me={...$.categories},We={...$.shapeTypes};console.log("[DrawingTools][applyFilters] Application des filtres:",JSON.stringify({accessLevels:Ee,categories:me,shapeTypes:We},null,2));const ct={accessLevels:Ee,categories:me,shapeTypes:We};console.log("[DrawingTools][applyFilters] Envoi des filtres au store:",JSON.stringify(ct,null,2)),r.updateFilters(ct),console.log("[DrawingTools][applyFilters] Émission de l'event filter-change"),le("filter-change",ct),setTimeout(()=>{console.log("[DrawingTools][applyFilters] Mise à jour forcée de l'affichage"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:ct}}))},0),console.log("[DrawingTools][applyFilters] Filtres appliqués avec succès")},X=Ee=>`${Math.round(Ee)} m`,Ae=Ee=>Ee>=1e4?`${(Ee/1e4).toFixed(2)} ha`:`${Math.round(Ee)} m²`,De=Ee=>`${Ee.toFixed(1)}%`,Xe=Ee=>p.value.includes(Ee)?Ee:Ee.split("_").map(me=>me.charAt(0).toUpperCase()+me.slice(1)).join(" "),fe=()=>{n.selectedShape&&(console.log("[DrawingTools][deselectCurrentShape] Désélection de la forme actuelle"),le("tool-selected",""))};async function ee(){var Ee,me;if(!(!c.name||h.value)){h.value=!0;try{const We=c.name.toLowerCase().replace(/\s+/g,"_"),ct=l.currentPlan;let pt=null;if(ct!=null&&ct.entreprise_id?pt=ct.entreprise_id:ct!=null&&ct.entreprise&&typeof ct.entreprise=="object"&&"id"in ct.entreprise?pt=ct.entreprise.id:(Ee=i.user)!=null&&Ee.enterprise_id?pt=i.user.enterprise_id:i.isEntreprise&&((me=i.user)!=null&&me.id)&&(pt=i.user.id),!pt){console.error("[DrawingTools] Impossible de créer un filtre: ID d'entreprise non disponible");return}console.log("[DrawingTools] Création d'un filtre pour l'entreprise:",pt);const gt=await a.createFilter({name:c.name,category:We,entreprise:pt});console.log("[DrawingTools] Filtre créé avec succès:",gt),$.categories[We]||(console.log(`[DrawingTools] Ajout de la catégorie ${We} aux filtres locaux`),$.categories[We]=!0),console.log(`[DrawingTools] Mise à jour du DrawingStore avec la catégorie ${We}`);const st={...r.filters.categories};st[We]=!0,r.updateFilters({categories:st}),console.log("[DrawingTools] Émission de l'événement filter-change"),le("filter-change",$),c.name=""}catch(We){console.error("[DrawingTools] Erreur lors de la création du filtre:",We)}finally{h.value=!1}}}const se=()=>{fe(),x.value="filters"},le=e;dm(()=>{var Ee,me,We,ct,pt,gt,st;if(n.selectedShape){console.log("[DrawingTools][watchEffect] Mise à jour des propriétés pour la forme sélectionnée:",{type:n.selectedShape.type,properties:n.selectedShape.properties,options:n.selectedShape.options,layer:(Ee=n.selectedShape.layer)==null?void 0:Ee._leaflet_id});const qt=n.selectedShape.options||{};D.value=qt.color||"#2b6451",M.value=qt.weight||3,A.value=qt.dashArray?"dashed":"solid",z.value=qt.fillColor||"#2b6451",Y.value=qt.fillOpacity||.2;const gn=n.selectedShape.type||((me=n.selectedShape.properties)==null?void 0:me.type)||"";ne.value=gn!=="Line",console.log("[DrawingTools][watchEffect] Type de forme détecté:",gn),ge.value=((We=n.selectedShape.properties)==null?void 0:We.name)||"",pe.value=((ct=n.selectedShape.properties)==null?void 0:ct.category)||"forages",O.value=((pt=n.selectedShape.properties)==null?void 0:pt.accessLevel)||"visitor",gn==="ElevationLine"&&((gt=n.selectedShape.properties)!=null&&gt.samplePointStyle&&(j.value={...n.selectedShape.properties.samplePointStyle}),(st=n.selectedShape.properties)!=null&&st.minMaxPointStyle&&(J.value={...n.selectedShape.properties.minMaxPointStyle})),console.log("[DrawingTools][watchEffect] Propriétés mises à jour avec succès")}}),Lo(async()=>{console.log("[DrawingTools][onMounted] Initialisation des filtres depuis le store");const Ee=r.filters;console.log("[DrawingTools][onMounted] Filtres du store:",JSON.stringify({accessLevels:{...Ee.accessLevels},categories:{...Ee.categories},shapeTypes:{...Ee.shapeTypes}},null,2)),$.accessLevels.company=Ee.accessLevels.company,$.accessLevels.employee=Ee.accessLevels.employee,$.accessLevels.visitor=Ee.accessLevels.visitor,$.categories.forages=Ee.categories.forages,$.categories.clients=Ee.categories.clients,$.categories.entrepots=Ee.categories.entrepots,$.categories.livraisons=Ee.categories.livraisons,$.categories.cultures=Ee.categories.cultures,$.categories.parcelles=Ee.categories.parcelles,$.shapeTypes.Polygon=Ee.shapeTypes.Polygon,$.shapeTypes.Line=Ee.shapeTypes.Line,$.shapeTypes.ElevationLine=Ee.shapeTypes.ElevationLine,$.shapeTypes.Note=Ee.shapeTypes.Note;try{console.log("[DrawingTools][onMounted] Chargement des filtres personnalisés"),await a.fetchFilters();const me=a.getUniqueCategories;console.log("[DrawingTools][onMounted] Catégories personnalisées trouvées:",me);const We=[];me.forEach(ct=>{!p.value.includes(ct)&&!$.categories[ct]&&(console.log(`[DrawingTools][onMounted] Ajout de la catégorie personnalisée: ${ct}`),$.categories[ct]=!0,We.push(ct))}),We.length>0&&(console.log("[DrawingTools][onMounted] Mise à jour du store avec les catégories personnalisées:",We),r.updateFilters({categories:$.categories}),le("filter-change",$))}catch(me){console.error("[DrawingTools][onMounted] Erreur lors du chargement des filtres personnalisés:",me)}console.log("[DrawingTools][onMounted] Filtres locaux après initialisation:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2))}),Ti($,(Ee,me)=>{console.log("[DrawingTools][watch filters] Changement détecté:",{activeTab:x.value,newFilters:JSON.stringify({accessLevels:Ee.accessLevels,categories:Ee.categories,shapeTypes:Ee.shapeTypes}),oldFilters:JSON.stringify({accessLevels:me.accessLevels,categories:me.categories,shapeTypes:me.shapeTypes})});const We=Object.keys(Ee.accessLevels).filter(st=>me.accessLevels[st]!==Ee.accessLevels[st]),ct=Object.keys(Ee.categories).filter(st=>me.categories[st]!==Ee.categories[st]),pt=Object.keys(Ee.shapeTypes).filter(st=>me.shapeTypes[st]!==Ee.shapeTypes[st]),gt=We.length>0||ct.length>0||pt.length>0;console.log("[DrawingTools][watch filters] Différences détectées:",{accessLevelsDiff:We,categoriesDiff:ct,shapeTypesDiff:pt,hasChanges:gt}),x.value==="filters"?(console.log("[DrawingTools][watch filters] Onglet filtres actif, application des filtres"),he()):console.log("[DrawingTools][watch filters] Onglet filtres non actif, pas d'application automatique")},{deep:!0});const je=Ee=>{console.log("[DrawingTools][handleToolClick] Outil cliqué:",Ee,"Outil actuel:",n.selectedTool),le("tool-selected",n.selectedTool===Ee?"":Ee),window.innerWidth<768&&le("update:show",!1)},$e=()=>{var Ee;if(console.log("[DrawingTools][editGeoNote] Édition de la GeoNote"),le("update:show",!1),n.selectedShape&&((Ee=n.selectedShape.properties)==null?void 0:Ee.type)==="Note"){const me=n.selectedShape.layer;me&&typeof me.editNote=="function"?(me.editNote(),console.log("[DrawingTools][editGeoNote] Méthode editNote appelée avec succès")):console.error("[DrawingTools][editGeoNote] La méthode editNote n'est pas disponible sur la couche")}},et=()=>{var Ee;if(console.log("[DrawingTools][openGeoNoteRoute] Ouverture de l'itinéraire pour la GeoNote"),le("update:show",!1),n.selectedShape&&((Ee=n.selectedShape.properties)==null?void 0:Ee.type)==="Note"){const me=n.selectedShape.layer;me&&typeof me.openInGoogleMaps=="function"?(me.openInGoogleMaps(),console.log("[DrawingTools][openGeoNoteRoute] Méthode openInGoogleMaps appelée avec succès")):console.error("[DrawingTools][openGeoNoteRoute] La méthode openInGoogleMaps n'est pas disponible sur la couche")}};return(Ee,me)=>{var We,ct,pt,gt;return Ne(),Be("div",{class:Ii(["drawing-tools-panel",{open:t.show}])},[S("div",Sz,[me[47]||(me[47]=S("div",{class:"flex items-center"},[S("div",{class:"w-10 h-1.5 bg-gray-300 rounded-full mr-3"}),S("h3",{class:"text-sm font-semibold text-gray-700"},"Outils")],-1)),S("button",{onClick:me[0]||(me[0]=st=>Ee.$emit("update:show",!1)),class:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},me[46]||(me[46]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",Cz,[S("div",Ez,[S("nav",Pz,[S("button",{onClick:me[1]||(me[1]=st=>x.value="tools"),class:Ii([x.value==="tools"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},me[48]||(me[48]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),S("span",null,"Outils",-1)]),2),t.selectedShape&&((We=t.selectedShape.properties)==null?void 0:We.type)!=="Note"?(Ne(),Be("button",{key:0,onClick:me[2]||(me[2]=st=>x.value="style"),class:Ii([x.value==="style"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},me[49]||(me[49]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1),S("span",null,"Style",-1)]),2)):Zt("",!0),S("button",{onClick:se,class:Ii([x.value==="filters"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},me[50]||(me[50]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),S("span",null,"Filtres",-1)]),2)])]),S("div",Mz,[x.value==="tools"?(Ne(),Be("div",kz,[S("div",Az,[(Ne(!0),Be(wn,null,Qn(v.filter(st=>st.type!=="delete"),st=>(Ne(),Be("button",{key:st.type,class:Ii(["flex items-center justify-center p-2 rounded-md border transition-all duration-200",{"bg-primary-50 border-primary-500 text-primary-600":n.selectedTool===st.type,"hover:bg-gray-50 border-gray-300 text-gray-700":n.selectedTool!==st.type}]),onClick:qt=>je(st.type),title:st.label},[S("span",{class:"icon",innerHTML:g(st.type)},null,8,Dz)],10,Tz))),128))]),t.selectedShape&&Q.value&&Q.value.type==="Note"?(Ne(),Be("div",Nz,[S("button",{class:"p-2 rounded-md border border-primary-200 bg-primary-50 text-primary-600 hover:bg-primary-100 flex items-center justify-center",onClick:$e,title:"Éditer la note"},me[51]||(me[51]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),S("span",{class:"text-sm"},"Éditer",-1)])),S("button",{class:"p-2 rounded-md border border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 flex items-center justify-center",onClick:et,title:"Obtenir l'itinéraire"},me[52]||(me[52]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1),S("span",{class:"text-sm"},"Itinéraire",-1)]))])):Zt("",!0),t.selectedShape?(Ne(),Be("button",{key:1,class:Ii(["w-full mt-2 p-2 rounded-md border border-red-200 bg-red-50 text-red-600 hover:bg-red-100 flex items-center justify-center",{"bg-red-100":n.selectedTool==="delete"}]),onClick:me[3]||(me[3]=st=>Ee.$emit("delete-shape")),title:"Supprimer la forme"},me[53]||(me[53]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),S("span",{class:"text-sm"},"Supprimer",-1)]),2)):Zt("",!0),t.selectedShape&&Q.value?(Ne(),Be("div",Oz)):Zt("",!0),t.selectedShape&&Q.value?(Ne(),Be("div",Iz,[Q.value.type!=="Note"?(Ne(),Be("div",Bz,[me[54]||(me[54]=S("label",{for:"shapeName",class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de la forme",-1)),kn(S("input",{type:"text",id:"shapeName","onUpdate:modelValue":me[4]||(me[4]=st=>ge.value=st),onChange:qe,placeholder:"Donnez un nom à cette forme",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,544),[[zr,ge.value]])])):Zt("",!0),S("div",Rz,[me[57]||(me[57]=S("label",{for:"shapeCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Catégorie",-1)),kn(S("select",{id:"shapeCategory","onUpdate:modelValue":me[5]||(me[5]=st=>pe.value=st),onChange:re,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},[me[55]||(me[55]=tu('<option value="forages" data-v-502bbef9>Forages</option><option value="clients" data-v-502bbef9>Clients</option><option value="entrepots" data-v-502bbef9>Entrepôts</option><option value="livraisons" data-v-502bbef9>Lieux de livraison</option><option value="cultures" data-v-502bbef9>Cultures</option><option value="parcelles" data-v-502bbef9>Noms des parcelles</option>',6)),(Ne(!0),Be(wn,null,Qn($.categories,(st,qt)=>(Ne(),Be(wn,{key:qt},[p.value.includes(String(qt))?Zt("",!0):(Ne(),Be("option",{key:0,value:String(qt)},kt(Xe(String(qt))),9,Fz))],64))),128)),me[56]||(me[56]=S("option",{value:"default"},"Autre",-1))],544),[[Zi,pe.value]])]),S("div",jz,[me[59]||(me[59]=S("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700 mb-1"},"Niveau d'accès",-1)),me[60]||(me[60]=S("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Définit qui peut voir cet élément sur la carte. ",-1)),kn(S("select",{id:"accessLevel","onUpdate:modelValue":me[6]||(me[6]=st=>O.value=st),onChange:K,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},me[58]||(me[58]=[S("option",{value:"company"},"Entreprise uniquement",-1),S("option",{value:"employee"},"Entreprise et salariés",-1),S("option",{value:"visitor"},"Tous (visiteurs inclus)",-1)]),544),[[Zi,O.value]])]),S("div",zz,[Q.value.type==="Polygon"?(Ne(),Be("div",$z,[S("div",Vz,[me[61]||(me[61]=S("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),S("span",Uz,kt(Ae(Q.value.surface||0)),1)]),S("div",Hz,[me[62]||(me[62]=S("span",{class:"text-sm font-semibold text-gray-700"},"Périmètre :",-1)),S("span",Wz,kt(X(Q.value.perimeter||0)),1)])])):Q.value.type==="Line"?(Ne(),Be(wn,{key:1},[me[63]||(me[63]=S("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),S("span",Gz,kt(X(Q.value.length||0)),1)],64)):Q.value.type==="ElevationLine"?(Ne(),Be(wn,{key:2},[S("div",qz,[S("div",Yz,[me[64]||(me[64]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Distance totale :",-1)),S("span",Kz,kt(X(Q.value.length||0)),1)]),S("div",Zz,[me[65]||(me[65]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dénivelé + :",-1)),S("span",Xz,kt(X(Q.value.elevationGain||0)),1)]),S("div",Jz,[me[66]||(me[66]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dénivelé - :",-1)),S("span",Qz,kt(X(Q.value.elevationLoss||0)),1)]),S("div",e$,[me[67]||(me[67]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente moy. :",-1)),S("span",t$,kt(De(Q.value.averageSlope||0)),1)]),S("div",n$,[me[68]||(me[68]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente max :",-1)),S("span",r$,kt(De(Q.value.maxSlope||0)),1)])]),S("div",i$,[S("canvas",s$,null,512)],512)],64)):Zt("",!0)])])):Zt("",!0)])):Zt("",!0),x.value==="style"&&t.selectedShape&&((ct=t.selectedShape.properties)==null?void 0:ct.type)!=="Note"?(Ne(),Be("div",o$,[S("div",a$,[(Ne(),Be(wn,null,Qn(U,st=>S("button",{key:st,class:"w-8 h-8 rounded-full",style:ru({backgroundColor:st}),onClick:qt=>_e(st),title:st},null,12,l$)),64))]),((pt=Q.value)==null?void 0:pt.type)!=="TextRectangle"?(Ne(),Be("div",u$,[S("div",c$,[me[69]||(me[69]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),S("div",d$,[kn(S("input",{type:"color","onUpdate:modelValue":me[7]||(me[7]=st=>D.value=st),class:"w-16 h-8 rounded border",onChange:me[8]||(me[8]=st=>ve({strokeColor:D.value})),title:"Couleur du contour"},null,544),[[zr,D.value]]),kn(S("input",{type:"range","onUpdate:modelValue":me[9]||(me[9]=st=>M.value=st),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:me[10]||(me[10]=st=>ve({strokeWidth:M.value})),title:"Épaisseur du contour"},null,544),[[zr,M.value]])])]),S("div",h$,[me[70]||(me[70]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),kn(S("select",{"onUpdate:modelValue":me[11]||(me[11]=st=>A.value=st),class:"w-full rounded border",onChange:me[12]||(me[12]=st=>ve({strokeStyle:A.value}))},[(Ne(),Be(wn,null,Qn(R,st=>S("option",{key:st.value,value:st.value},kt(st.label),9,f$)),64))],544),[[Zi,A.value]])]),ne.value?(Ne(),Be("div",p$,[me[71]||(me[71]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),S("div",g$,[kn(S("input",{type:"color","onUpdate:modelValue":me[13]||(me[13]=st=>z.value=st),class:"w-16 h-8 rounded border",onChange:me[14]||(me[14]=st=>ve({fillColor:z.value})),title:"Couleur de remplissage"},null,544),[[zr,z.value]]),kn(S("input",{type:"range","onUpdate:modelValue":me[15]||(me[15]=st=>Y.value=st),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:me[16]||(me[16]=st=>ve({fillOpacity:Y.value})),title:"Opacité du remplissage"},null,544),[[zr,Y.value]])])])):Zt("",!0)])):Zt("",!0),((gt=Q.value)==null?void 0:gt.type)==="TextRectangle"?(Ne(),Be("div",m$,[S("div",v$,[me[72]||(me[72]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),S("div",y$,[kn(S("input",{type:"color","onUpdate:modelValue":me[17]||(me[17]=st=>D.value=st),class:"w-16 h-8 rounded border",onChange:me[18]||(me[18]=st=>ve({strokeColor:D.value})),title:"Couleur du contour"},null,544),[[zr,D.value]]),kn(S("input",{type:"range","onUpdate:modelValue":me[19]||(me[19]=st=>M.value=st),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:me[20]||(me[20]=st=>ve({strokeWidth:M.value})),title:"Épaisseur du contour"},null,544),[[zr,M.value]])])]),S("div",b$,[me[73]||(me[73]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),S("div",_$,[kn(S("input",{type:"color","onUpdate:modelValue":me[21]||(me[21]=st=>z.value=st),class:"w-16 h-8 rounded border",onChange:me[22]||(me[22]=st=>ve({fillColor:z.value})),title:"Couleur de remplissage"},null,544),[[zr,z.value]]),kn(S("input",{type:"range","onUpdate:modelValue":me[23]||(me[23]=st=>Y.value=st),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:me[24]||(me[24]=st=>ve({fillOpacity:Y.value})),title:"Opacité du remplissage"},null,544),[[zr,Y.value]])])])])):Zt("",!0)])):Zt("",!0),x.value==="filters"?(Ne(),Be("div",w$,[S("div",x$,[S("div",L$,[me[76]||(me[76]=S("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Niveau d'accès",-1)),me[77]||(me[77]=S("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Sélectionnez votre niveau d'accès pour filtrer les éléments visibles sur la carte. ",-1)),S("div",null,[kn(S("select",{"onUpdate:modelValue":me[25]||(me[25]=st=>V.value=st),onChange:me[26]||(me[26]=st=>I(V.value)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm"},me[74]||(me[74]=[S("option",{value:"company"},"Entreprise (accès à tout)",-1),S("option",{value:"employee"},"Salariés (accès niveau salariés et visiteurs)",-1),S("option",{value:"visitor"},"Visiteurs (accès niveau visiteurs uniquement)",-1)]),544),[[Zi,V.value]]),me[75]||(me[75]=S("div",{class:"mt-2 text-xs text-gray-500"},[S("p",null,[S("strong",null,"Entreprise"),ri(" : Vous verrez tous les éléments (entreprise, salariés, visiteurs)")]),S("p",null,[S("strong",null,"Salariés"),ri(" : Vous verrez les éléments pour salariés et visiteurs")]),S("p",null,[S("strong",null,"Visiteurs"),ri(" : Vous ne verrez que les éléments pour visiteurs")])],-1))])]),S("div",S$,[me[86]||(me[86]=S("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Catégories",-1)),S("div",C$,[S("label",E$,[kn(S("input",{type:"checkbox","onUpdate:modelValue":me[27]||(me[27]=st=>$.categories.forages=st),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.categories.forages]]),me[78]||(me[78]=S("span",{class:"ml-2 text-sm text-gray-700"},"Forages",-1))]),S("label",P$,[kn(S("input",{type:"checkbox","onUpdate:modelValue":me[28]||(me[28]=st=>$.categories.clients=st),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.categories.clients]]),me[79]||(me[79]=S("span",{class:"ml-2 text-sm text-gray-700"},"Clients",-1))]),S("label",M$,[kn(S("input",{type:"checkbox","onUpdate:modelValue":me[29]||(me[29]=st=>$.categories.entrepots=st),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.categories.entrepots]]),me[80]||(me[80]=S("span",{class:"ml-2 text-sm text-gray-700"},"Entrepôts",-1))]),S("label",k$,[kn(S("input",{type:"checkbox","onUpdate:modelValue":me[30]||(me[30]=st=>$.categories.livraisons=st),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.categories.livraisons]]),me[81]||(me[81]=S("span",{class:"ml-2 text-sm text-gray-700"},"Lieux de livraison",-1))]),S("label",A$,[kn(S("input",{type:"checkbox","onUpdate:modelValue":me[31]||(me[31]=st=>$.categories.cultures=st),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.categories.cultures]]),me[82]||(me[82]=S("span",{class:"ml-2 text-sm text-gray-700"},"Cultures",-1))]),S("label",T$,[kn(S("input",{type:"checkbox","onUpdate:modelValue":me[32]||(me[32]=st=>$.categories.parcelles=st),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.categories.parcelles]]),me[83]||(me[83]=S("span",{class:"ml-2 text-sm text-gray-700"},"Noms des parcelles",-1))]),(Ne(!0),Be(wn,null,Qn($.categories,(st,qt)=>(Ne(),Be(wn,{key:qt},[p.value.includes(String(qt))?Zt("",!0):(Ne(),Be("label",D$,[kn(S("input",{type:"checkbox","onUpdate:modelValue":gn=>$.categories[qt]=gn,onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,40,N$),[[Tl,$.categories[qt]]]),S("span",O$,kt(qt),1)]))],64))),128)),s.value||o.value?(Ne(),Be("div",I$,[S("div",B$,[kn(S("input",{type:"text","onUpdate:modelValue":me[33]||(me[33]=st=>c.name=st),placeholder:"Nouveau filtre...",class:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-primary-500 focus:border-primary-500"},null,512),[[zr,c.name]]),S("button",{onClick:ee,disabled:!c.name||h.value,class:"px-2 py-1 bg-primary-600 text-white text-sm rounded hover:bg-primary-700 transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"},[h.value?(Ne(),Be("svg",j$,me[85]||(me[85]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Ne(),Be("svg",F$,me[84]||(me[84]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1)])))],8,R$)])])):Zt("",!0)])]),S("div",z$,[me[91]||(me[91]=S("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Types de formes",-1)),S("div",$$,[S("label",V$,[kn(S("input",{type:"checkbox","onUpdate:modelValue":me[34]||(me[34]=st=>$.shapeTypes.Polygon=st),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.shapeTypes.Polygon]]),me[87]||(me[87]=S("span",{class:"ml-2 text-sm text-gray-700"},"Polygones",-1))]),S("label",U$,[kn(S("input",{type:"checkbox","onUpdate:modelValue":me[35]||(me[35]=st=>$.shapeTypes.Line=st),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.shapeTypes.Line]]),me[88]||(me[88]=S("span",{class:"ml-2 text-sm text-gray-700"},"Lignes",-1))]),S("label",H$,[kn(S("input",{type:"checkbox","onUpdate:modelValue":me[36]||(me[36]=st=>$.shapeTypes.ElevationLine=st),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.shapeTypes.ElevationLine]]),me[89]||(me[89]=S("span",{class:"ml-2 text-sm text-gray-700"},"Profils altimétriques",-1))]),S("label",W$,[kn(S("input",{type:"checkbox","onUpdate:modelValue":me[37]||(me[37]=st=>$.shapeTypes.Note=st),onChange:fe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,$.shapeTypes.Note]]),me[90]||(me[90]=S("span",{class:"ml-2 text-sm text-gray-700"},"Notes",-1))])])]),S("div",{class:"pt-4 mb-4"},[S("button",{onClick:ye,class:"w-full px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200 transition-colors"}," Réinitialiser ")])])])):Zt("",!0)])]),t.selectedShape&&Q.value&&Q.value.type==="ElevationLine"?(Ne(),Be("div",G$,[S("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:me[38]||(me[38]=st=>G("samplePoints"))},[me[93]||(me[93]=S("span",null,"Points d'échantillonnage",-1)),(Ne(),Be("svg",{class:Ii(["w-4 h-4",{"rotate-180":!E.value.samplePoints}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},me[92]||(me[92]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),kn(S("div",q$,[S("div",Y$,[me[98]||(me[98]=S("h4",{class:"text-sm font-semibold mb-2"},"Points normaux",-1)),S("div",K$,[S("div",null,[me[94]||(me[94]=S("label",{class:"text-xs text-gray-600"},"Taille",-1)),kn(S("input",{type:"number","onUpdate:modelValue":me[39]||(me[39]=st=>j.value.radius=st),min:"2",max:"10",step:"1",class:"w-full px-2 py-1 border rounded",onChange:Z},null,544),[[zr,j.value.radius]])]),S("div",null,[me[95]||(me[95]=S("label",{class:"text-xs text-gray-600"},"Couleur",-1)),kn(S("input",{type:"color","onUpdate:modelValue":me[40]||(me[40]=st=>j.value.color=st),class:"w-full h-8 px-1 border rounded",onChange:Z},null,544),[[zr,j.value.color]])]),S("div",null,[me[96]||(me[96]=S("label",{class:"text-xs text-gray-600"},"Opacité",-1)),kn(S("input",{type:"range","onUpdate:modelValue":me[41]||(me[41]=st=>j.value.fillOpacity=st),min:"0",max:"1",step:"0.1",class:"w-full",onChange:Z},null,544),[[zr,j.value.fillOpacity]])]),S("div",null,[me[97]||(me[97]=S("label",{class:"text-xs text-gray-600"},"Bordure",-1)),kn(S("input",{type:"number","onUpdate:modelValue":me[42]||(me[42]=st=>j.value.weight=st),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:Z},null,544),[[zr,j.value.weight]])])])]),S("div",null,[me[102]||(me[102]=S("h4",{class:"text-sm font-semibold mb-2"},"Points min/max",-1)),S("div",Z$,[S("div",null,[me[99]||(me[99]=S("label",{class:"text-xs text-gray-600"},"Taille",-1)),kn(S("input",{type:"number","onUpdate:modelValue":me[43]||(me[43]=st=>J.value.radius=st),min:"4",max:"12",step:"1",class:"w-full px-2 py-1 border rounded",onChange:oe},null,544),[[zr,J.value.radius]])]),S("div",null,[me[100]||(me[100]=S("label",{class:"text-xs text-gray-600"},"Bordure",-1)),kn(S("input",{type:"number","onUpdate:modelValue":me[44]||(me[44]=st=>J.value.weight=st),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:oe},null,544),[[zr,J.value.weight]])]),S("div",null,[me[101]||(me[101]=S("label",{class:"text-xs text-gray-600"},"Opacité",-1)),kn(S("input",{type:"range","onUpdate:modelValue":me[45]||(me[45]=st=>J.value.fillOpacity=st),min:"0",max:"1",step:"0.1",class:"w-full",onChange:oe},null,544),[[zr,J.value.fillOpacity]])])])])],512),[[ky,!E.value.samplePoints]])])):Zt("",!0)],2)}}}),p5=rd(X$,[["__scopeId","data-v-502bbef9"]]),J$={class:"map-toolbar w-full"},Q$={class:"hidden md:flex items-center space-x-2"},eV={class:"dropdown"},tV={class:"dropdown-menu"},nV=["onClick"],rV={key:0,class:"border-l pl-2 flex-1"},iV={class:"flex items-center"},sV={class:"plan-info"},oV={class:"plan-name"},aV={key:0,class:"plan-description"},lV={class:"border-l pl-2 ml-auto"},uV={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},cV={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},dV={key:"saving"},hV={key:"success",class:"save-success-text"},fV={key:"default"},pV={class:"md:hidden"},gV={class:"flex justify-between items-center"},mV={key:0,class:"truncate mx-2 text-sm font-medium"},vV={key:0,class:"mobile-menu mt-0 bg-white shadow-lg p-4 z-[1900] fixed left-0 right-0 w-full"},yV={class:"flex justify-between items-center mb-3 border-b pb-2"},bV={class:"flex flex-col space-y-4"},_V={key:0,class:"flex flex-col pb-3 border-b"},wV={class:"text-sm font-semibold text-gray-800"},xV={key:0,class:"text-xs text-gray-600 mt-1"},LV={class:"flex flex-col"},SV={class:"grid grid-cols-3 gap-2"},CV=["onClick"],EV={key:0,class:"animate-spin h-4 w-4 mr-2 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},PV={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},MV={key:"saving"},kV={key:"success",class:"save-success-text"},AV={key:"default"},TV=Hs({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view","generate-summary"],setup(t,{emit:e}){const n=e,r=t,i=Ct("Hybride"),s=Ct(!1),o=D=>{const M=D.currentTarget,A=M.nextElementSibling;if(A&&A.classList.contains("dropdown-menu")){const z=M.getBoundingClientRect();A.style.top=`${z.bottom}px`,A.style.left=`${z.left}px`}},a={Hybride:"Hybride",Cadastre:"Cadastre",IGN:"IGN"},l=Xn(()=>r.lastSave?new Date(r.lastSave).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),c=D=>{i.value=D,n("change-map-type",D),E()},h=()=>{n("create-new-plan"),E()},p=()=>{n("load-plan"),E()},v=()=>{n("save-plan"),E()},g=()=>{n("adjust-view"),E()},x=()=>{n("generate-summary"),E()},E=()=>{s.value=!1};return(D,M)=>(Ne(),Be("div",J$,[S("div",Q$,[S("div",eV,[S("button",{class:"btn-toolbar dropdown-toggle",onMouseover:o},[M[2]||(M[2]=S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),S("span",null,kt(a[i.value]),1)],32),S("div",tV,[(Ne(),Be(wn,null,Qn(a,(A,z)=>S("button",{key:z,class:Ii(["dropdown-item",{active:z===i.value}]),onClick:Y=>c(z)},kt(A),11,nV)),64))])]),D.planName?(Ne(),Be("div",rV,[S("div",iV,[S("div",sV,[S("h2",oV,kt(D.planName),1),D.planDescription?(Ne(),Be("p",aV,kt(D.planDescription),1)):Zt("",!0)])])])):Zt("",!0),S("div",{class:"border-l pl-2"},[S("div",{class:"flex items-center space-x-1"},[S("button",{onClick:h,class:"btn-toolbar",title:"Nouveau plan"},M[3]||(M[3]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),S("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),S("button",{onClick:p,class:"btn-toolbar",title:"Charger un plan"},M[4]||(M[4]=[tu('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-b4cc3353><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-b4cc3353></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-b4cc3353></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-b4cc3353></path></svg><span class="hidden lg:inline ml-1" data-v-b4cc3353>Charger</span>',2)])),S("button",{onClick:v,class:"btn-toolbar",title:"Enregistrer le plan"},M[5]||(M[5]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),S("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),S("div",{class:"border-l pl-2"},[S("div",{class:"flex items-center space-x-1"},[S("button",{onClick:g,class:"btn-toolbar",title:"Ajuster la vue"},M[6]||(M[6]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),S("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)])),S("button",{onClick:x,class:"btn-toolbar",title:"Générer une synthèse"},M[7]||(M[7]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),S("span",{class:"hidden lg:inline ml-1"},"Synthèse",-1)]))])]),S("div",lV,[S("div",{class:Ii(["text-xs hidden lg:flex items-center",{"text-gray-500":!D.saveStatus,"text-primary-600 font-medium":D.saveStatus==="success","text-blue-600 font-medium":D.saveStatus==="saving"}])},[D.saveStatus==="saving"?(Ne(),Be("svg",uV,M[8]||(M[8]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Zt("",!0),D.saveStatus==="success"?(Ne(),Be("svg",cV,M[9]||(M[9]=[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Zt("",!0),yi(X2,{name:"fade-slide",mode:"out-in"},{default:Gu(()=>[D.saveStatus==="saving"?(Ne(),Be("span",dV," Sauvegarde en cours... ")):D.saveStatus==="success"?(Ne(),Be("span",hV," Sauvegarde réussie ! ")):(Ne(),Be("span",fV," Dernière modification : "+kt(l.value),1))]),_:1})],2)])]),S("div",pV,[S("div",gV,[S("button",{onClick:M[0]||(M[0]=A=>s.value=!s.value),class:"p-2 rounded-md border bg-white shadow-sm"},M[10]||(M[10]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})],-1)])),D.planName?(Ne(),Be("div",mV,kt(D.planName),1)):Zt("",!0),S("div",{class:"flex space-x-2"},[S("button",{onClick:h,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},M[11]||(M[11]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),S("button",{onClick:v,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},M[12]||(M[12]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),S("button",{onClick:g,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},M[13]||(M[13]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),s.value?(Ne(),Be("div",vV,[S("div",yV,[M[15]||(M[15]=S("h3",{class:"text-base font-semibold text-gray-800"},"Menu",-1)),S("button",{onClick:M[1]||(M[1]=A=>s.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},M[14]||(M[14]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",bV,[D.planName?(Ne(),Be("div",_V,[S("h3",wV,kt(D.planName),1),D.planDescription?(Ne(),Be("p",xV,kt(D.planDescription),1)):Zt("",!0)])):Zt("",!0),S("div",LV,[M[16]||(M[16]=S("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Type de carte",-1)),S("div",SV,[(Ne(),Be(wn,null,Qn(a,(A,z)=>S("button",{key:z,class:Ii(["px-3 py-2 text-sm rounded-md border shadow-sm",{"bg-blue-50 border-blue-300 text-blue-700 font-medium":z===i.value}]),onClick:Y=>c(z)},kt(A),11,CV)),64))])]),S("div",{class:"flex flex-col"},[M[20]||(M[20]=S("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Outils de plan",-1)),S("div",{class:"grid grid-cols-3 gap-2"},[S("button",{onClick:h,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},M[17]||(M[17]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),ri(" Nouveau ")])),S("button",{onClick:p,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},M[18]||(M[18]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),S("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),S("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),ri(" Charger ")])),S("button",{onClick:x,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},M[19]||(M[19]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),ri(" Synthèse ")]))])]),S("div",{class:Ii(["text-sm text-center pt-3 border-t flex items-center justify-center space-x-1 mt-2",{"text-gray-500":!D.saveStatus,"text-primary-600 font-medium":D.saveStatus==="success","text-blue-600 font-medium":D.saveStatus==="saving"}])},[D.saveStatus==="saving"?(Ne(),Be("svg",EV,M[21]||(M[21]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Zt("",!0),D.saveStatus==="success"?(Ne(),Be("svg",PV,M[22]||(M[22]=[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Zt("",!0),yi(X2,{name:"fade-slide",mode:"out-in"},{default:Gu(()=>[D.saveStatus==="saving"?(Ne(),Be("span",MV," Sauvegarde en cours... ")):D.saveStatus==="success"?(Ne(),Be("span",kV," Sauvegarde réussie ! ")):(Ne(),Be("span",AV," Dernière modification : "+kt(l.value),1))]),_:1})],2)])])):Zt("",!0)])]))}}),DV=rd(TV,[["__scopeId","data-v-b4cc3353"]]),NV={class:"comment-thread"},OV={key:0,class:"space-y-3 mb-4"},IV={class:"flex justify-between items-start"},BV={class:"flex items-center"},RV={class:"font-medium text-sm text-gray-900"},FV={class:"flex items-center"},jV={class:"text-xs text-gray-500"},zV=["onClick"],$V={class:"mt-1 text-sm text-gray-700 whitespace-pre-wrap"},VV={key:1,class:"text-center text-sm text-gray-500 italic my-4"},UV={key:2,class:"mt-3"},HV={class:"flex justify-end mt-2"},WV=["disabled"],GV={key:3,class:"text-center text-sm text-gray-500 italic mt-2"},qV=Hs({__name:"CommentThread",props:{noteId:{},comments:{}},emits:["update:comments","comment-added","comment-deleted"],setup(t,{emit:e}){const n=t;console.log("[CommentThread] Commentaires reçus initialement:",n.comments),Ti(()=>n.comments,E=>{console.log("[CommentThread] Commentaires mis à jour:",E)},{deep:!0});const r=e,i=xo(),s=bf(),o=su(),a=Ct(""),l=Xn(()=>i.isEntreprise||i.isAdmin);function c(E){return i.user&&E.userId===i.user.id||i.isAdmin}async function h(){var E;if(a.value.trim())try{await s.addComment(n.noteId,a.value.trim()),a.value="",o.success("Commentaire ajouté avec succès"),r("comment-added")}catch(D){if(console.error("Erreur lors de l'ajout du commentaire:",D),(E=D.response)!=null&&E.data){const M=D.response.data;M.note?o.error(`Erreur: ${M.note[0]}`):M.user?o.error(`Erreur: ${M.user[0]}`):M.text?o.error(`Erreur: ${M.text[0]}`):o.error("Erreur lors de l'ajout du commentaire")}else o.error("Erreur lors de l'ajout du commentaire")}}async function p(E){var D;if(confirm("Voulez-vous vraiment supprimer ce commentaire ?"))try{await s.removeComment(n.noteId,E),o.success("Commentaire supprimé"),r("comment-deleted")}catch(M){if(console.error("Erreur lors de la suppression du commentaire:",M),(D=M.response)!=null&&D.data){const A=M.response.data;A.detail?o.error(`Erreur: ${A.detail}`):o.error("Erreur lors de la suppression du commentaire")}else o.error("Erreur lors de la suppression du commentaire")}}function v(E){try{if(!E)return"Date inconnue";const D=new Date(E);return isNaN(D.getTime())?(console.warn(`Date invalide: ${E}`),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(D)}catch(D){return console.error(`Erreur lors du formatage de la date: ${E}`,D),"Date invalide"}}function g(E){switch(E){case"admin":return"bg-purple-100 text-purple-800";case"entreprise":return"bg-blue-100 text-blue-800";case"salarie":return"bg-green-100 text-green-800";case"visiteur":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function x(E){switch(E){case"admin":return"Admin";case"entreprise":return"Entreprise";case"salarie":return"Salarié";case"visiteur":return"Visiteur";default:return E}}return(E,D)=>(Ne(),Be("div",NV,[E.comments&&E.comments.length>0?(Ne(),Be("div",OV,[(Ne(!0),Be(wn,null,Qn(E.comments,M=>(Ne(),Be("div",{key:M.id,class:"bg-gray-50 rounded-lg p-3"},[S("div",IV,[S("div",BV,[S("div",RV,kt(M.userName),1),S("span",{class:Ii(["ml-2 text-xs px-2 py-0.5 rounded-full",g(M.userRole)])},kt(x(M.userRole)),3)]),S("div",FV,[S("span",jV,kt(v(M.createdAt)),1),c(M)?(Ne(),Be("button",{key:0,onClick:nu(A=>p(M.id),["prevent"]),class:"ml-2 text-gray-400 hover:text-red-500"},D[1]||(D[1]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,zV)):Zt("",!0)])]),S("p",$V,kt(M.text),1)]))),128))])):(Ne(),Be("div",VV," Aucun commentaire pour le moment ")),l.value?(Ne(),Be("div",UV,[kn(S("textarea",{"onUpdate:modelValue":D[0]||(D[0]=M=>a.value=M),placeholder:"Ajouter un commentaire...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"2"},null,512),[[zr,a.value]]),S("div",HV,[S("button",{type:"button",onClick:nu(h,["prevent"]),disabled:!a.value.trim(),class:"px-3 py-1 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"}," Ajouter ",8,WV)])])):(Ne(),Be("div",GV," Seuls les utilisateurs de l'entreprise peuvent ajouter des commentaires "))]))}}),YV={class:"photo-gallery"},KV={key:0,class:"grid grid-cols-2 gap-2 mb-4"},ZV=["src","onClick"],XV={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center"},JV={class:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2"},QV=["onClick"],eU={key:1,class:"text-center text-sm text-gray-500 italic my-4"},tU={class:"flex space-x-2 mt-3"},nU={key:2,class:"mt-4 border border-gray-300 rounded-lg overflow-hidden bg-white"},rU={class:"relative bg-gray-900",style:{height:"300px"}},iU=["src"],sU={class:"p-3 bg-gray-50 border-t border-gray-300 flex justify-center"},oU={key:1,class:"flex space-x-3"},aU={key:3,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},lU={class:"relative max-w-3xl max-h-[90vh] bg-white rounded-lg overflow-hidden"},uU=["src"],cU=Hs({__name:"PhotoGallery",props:{noteId:{},photos:{}},emits:["update:photos","photo-added","photo-deleted"],setup(t,{emit:e}){const n=t,r=e,i=bf(),s=su(),o=Ct(null),a=Ct(null),l=Ct(null);let c=null;const h=Ct(!1),p=Ct(!1),v=Ct(null),g=Ct(null);function x(pe){v.value=pe,h.value=!0}async function E(pe){var O;if(confirm("Êtes-vous sûr de vouloir supprimer cette photo ?"))try{await i.removePhoto(n.noteId,pe),s.success("Photo supprimée"),r("photo-deleted"),h.value&&((O=v.value)==null?void 0:O.id)===pe&&(h.value=!1,v.value=null)}catch(j){console.error("Erreur lors de la suppression de la photo:",j),s.error("Erreur lors de la suppression de la photo")}}function D(){l.value&&l.value.click()}async function M(pe){const O=pe.target;if(!O.files||O.files.length===0)return;const j=O.files[0];if(!j.type.startsWith("image/")){s.error("Le fichier doit être une image");return}if(j.size>5*1024*1024){s.error("L'image est trop volumineuse (max 5MB)");return}try{const J=await A(j);await i.addPhoto(n.noteId,{url:J}),O.value="",s.success("Photo ajoutée"),r("photo-added")}catch(J){console.error("Erreur lors de l'ajout de la photo:",J),s.error("Erreur lors de l'ajout de la photo")}}function A(pe){return new Promise((O,j)=>{const J=new FileReader;J.onload=()=>O(J.result),J.onerror=j,J.readAsDataURL(pe)})}Ti(p,async pe=>{if(pe){g.value=null;try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("API de caméra non supportée sur ce navigateur");const O={video:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}};c=await navigator.mediaDevices.getUserMedia(O),o.value&&(o.value.srcObject=c,await new Promise(j=>{o.value.onloadedmetadata=()=>{o.value.play().then(j)}}))}catch(O){console.error("Erreur lors de l'accès à la caméra:",O);let j="Impossible d'accéder à la caméra";O.name==="NotAllowedError"?j="L'accès à la caméra a été refusé. Veuillez vérifier vos permissions.":O.name==="NotFoundError"?j="Aucune caméra n'a été trouvée sur votre appareil.":O.name==="NotSupportedError"&&(j="Votre navigateur ne supporte pas l'accès à la caméra."),s.error(j),p.value=!1}}else c&&(c.getTracks().forEach(O=>O.stop()),c=null)});function z(){if(!o.value||!a.value)return;const pe=o.value,O=a.value;O.width=pe.videoWidth,O.height=pe.videoHeight;const j=O.getContext("2d");j&&(j.drawImage(pe,0,0,O.width,O.height),g.value=O.toDataURL("image/jpeg"))}function Y(){g.value=null}async function ne(){if(g.value)try{await i.addPhoto(n.noteId,{url:g.value}),p.value=!1,s.success("Photo ajoutée"),r("photo-added")}catch(pe){console.error("Erreur lors de l'ajout de la photo:",pe),s.error("Erreur lors de l'ajout de la photo")}}function ge(){p.value=!1}return Zu(()=>{c&&(c.getTracks().forEach(pe=>pe.stop()),c=null)}),(pe,O)=>(Ne(),Be("div",YV,[pe.photos&&pe.photos.length>0?(Ne(),Be("div",KV,[(Ne(!0),Be(wn,null,Qn(pe.photos,j=>(Ne(),Be("div",{key:j.id,class:"relative group"},[S("img",{src:j.url,alt:"Photo",class:"w-full h-32 object-cover rounded-lg cursor-pointer",onClick:J=>x(j)},null,8,ZV),S("div",XV,[S("div",JV,[S("button",{onClick:nu(J=>E(j.id),["stop","prevent"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-red-600",title:"Supprimer la photo"},O[2]||(O[2]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,QV)])])]))),128))])):(Ne(),Be("div",eU," Aucune photo pour le moment ")),S("div",tU,[S("button",{type:"button",onClick:O[0]||(O[0]=j=>p.value=!0),class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},O[3]||(O[3]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),ri(" Prendre une photo ")])),S("button",{type:"button",onClick:D,class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer"},O[4]||(O[4]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})],-1),ri(" Téléverser ")])),S("input",{id:"photo-upload",ref_key:"fileInput",ref:l,type:"file",accept:"image/*",class:"hidden",onChange:M},null,544)]),p.value?(Ne(),Be("div",nU,[S("div",{class:"p-3 bg-gray-50 border-b border-gray-300 flex justify-between items-center"},[O[6]||(O[6]=S("h3",{class:"text-sm font-medium text-gray-700"},"Mode caméra",-1)),S("button",{type:"button",onClick:ge,class:"text-gray-400 hover:text-gray-500"},O[5]||(O[5]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",rU,[g.value?(Ne(),Be("img",{key:1,src:g.value,class:"w-full h-full object-contain",alt:"Captured"},null,8,iU)):(Ne(),Be("video",{key:0,ref_key:"videoElement",ref:o,autoplay:"",class:"w-full h-full object-contain"},null,512)),S("canvas",{ref_key:"canvasElement",ref:a,class:"hidden"},null,512)]),S("div",sU,[g.value?(Ne(),Be("div",oU,[S("button",{type:"button",onClick:Y,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Reprendre "),S("button",{type:"button",onClick:ne,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Utiliser ")])):(Ne(),Be("button",{key:0,type:"button",onClick:z,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-full w-12 h-12 flex items-center justify-center hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},O[7]||(O[7]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})],-1)])))])])):Zt("",!0),h.value?(Ne(),Be("div",aU,[S("div",lU,[S("button",{type:"button",onClick:O[1]||(O[1]=j=>h.value=!1),class:"absolute top-2 right-2 z-10 p-1 bg-white rounded-full text-gray-700 hover:text-red-600 shadow-md"},O[8]||(O[8]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),v.value?(Ne(),Be("img",{key:0,src:v.value.url,alt:"Photo",class:"max-h-[80vh] max-w-full object-contain"},null,8,uU)):Zt("",!0)])])):Zt("",!0)]))}}),dU=rd(cU,[["__scopeId","data-v-f87156b4"]]),hU={class:"modal-header"},fU={class:"modal-title"},pU={class:"modal-tabs"},gU={key:0,class:"badge"},mU={key:0,class:"badge"},vU={class:"modal-content"},yU={key:0,class:"tab-content"},bU={class:"form-group"},_U={class:"form-group"},wU={key:0,class:"location-indicator"},xU={class:"form-group"},LU=["value"],SU={key:1,class:"form-group"},CU=["value"],EU={class:"form-group"},PU=["value"],MU={class:"form-group"},kU={class:"color-picker"},AU=["onClick"],TU={key:1,class:"tab-content"},DU={key:2,class:"tab-content"},NU=Hs({__name:"NoteEditModal",props:{note:{},isNewNote:{type:Boolean},location:{}},emits:["close","save"],setup(t,{emit:e}){const n=t,r=e,i=bf(),s=su(),o=xo(),a=Ct("info"),l=Ct([]),c=Ct(null),h=window.console;Ti(a,async B=>{h.log("[NoteEditModal] Onglet actif changé:",B),B==="comments"&&n.note&&n.note.id&&(h.log("[NoteEditModal] Onglet Commentaires sélectionné, commentaires actuels:",p.value.comments),await x(n.note.id)),B==="photos"&&n.note&&n.note.id&&(h.log("[NoteEditModal] Onglet Photos sélectionné, photos actuelles:",p.value.photos),await E(n.note.id))});const p=Ct({title:"",description:"",columnId:"",accessLevel:Ki.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[],enterprise_id:null});function v(B){return Array.isArray(B)?B:typeof B=="object"&&"type"in B&&"coordinates"in B?[B.coordinates[1],B.coordinates[0]]:(h.error("[NoteEditModal] Format de localisation non reconnu:",B),[0,0])}function g(B){if(!B)return new Date().toISOString();try{const I=new Date(B);return isNaN(I.getTime())?(h.warn("[NoteEditModal] Date invalide:",B),new Date().toISOString()):I.toISOString()}catch(I){return h.error("[NoteEditModal] Erreur lors de la création de la date:",I),new Date().toISOString()}}async function x(B){try{h.log(`[NoteEditModal] Chargement des commentaires pour la note ${B}`);const I=await ka.getComments(B);h.log("[NoteEditModal] Commentaires reçus:",I.data);const Q=I.data.map(G=>({id:G.id,text:G.text,createdAt:G.created_at,userId:G.user,userName:G.user_name,userRole:G.user_role}));return h.log("[NoteEditModal] Commentaires transformés:",Q),n.note&&(i.updateNote(n.note.id,{comments:Q}),p.value.comments=Q,h.log("[NoteEditModal] Commentaires mis à jour dans le store et localement"),h.log("[NoteEditModal] editingNote.comments après mise à jour:",p.value.comments)),Q}catch(I){return h.error("[NoteEditModal] Erreur lors du chargement des commentaires:",I),s.error("Erreur lors du chargement des commentaires"),[]}}async function E(B){try{h.log(`[NoteEditModal] Chargement des photos pour la note ${B}`);const I=await ka.getPhotos(B);h.log("[NoteEditModal] Photos reçues:",I.data);const Q=I.data.map(G=>({id:G.id,url:G.image,createdAt:G.created_at,caption:G.caption}));return n.note&&(i.updateNote(n.note.id,{photos:Q}),p.value.photos=Q,h.log("[NoteEditModal] Photos mises à jour dans le store et localement")),Q}catch(I){return h.error("[NoteEditModal] Erreur lors du chargement des photos:",I),s.error("Erreur lors du chargement des photos"),[]}}async function D(){if(o.isAdmin)try{const B=await hl.getEntreprises();l.value=B.data,h.log("[NoteEditModal] Entreprises chargées:",l.value)}catch(B){h.error("[NoteEditModal] Erreur lors du chargement des entreprises:",B),s.error("Erreur lors du chargement des entreprises")}}Lo(async()=>{var B,I,Q;if(h.log("[NoteEditModal] onMounted - props:",n),await i.loadColumns(),h.log("[NoteEditModal] Colonnes chargées:",i.columns),await D(),n.note){h.log("[NoteEditModal] Édition d'une note existante:",n.note);const G=JSON.parse(JSON.stringify(n.note));G.createdAt=g(G.createdAt),G.updatedAt=g(G.updatedAt),p.value=G,o.isAdmin&&G.enterprise_id&&(c.value=G.enterprise_id),n.note.id&&(h.log("[NoteEditModal] Chargement des commentaires et photos..."),await Promise.all([x(n.note.id),E(n.note.id)]),h.log("[NoteEditModal] Après chargement - Commentaires:",((B=p.value.comments)==null?void 0:B.length)||0),h.log("[NoteEditModal] Après chargement - Photos:",((I=p.value.photos)==null?void 0:I.length)||0),setTimeout(()=>{h.log("[NoteEditModal] Compteurs après timeout - Commentaires:",A.value),h.log("[NoteEditModal] Compteurs après timeout - Photos:",z.value)},0))}else if(n.isNewNote){if(h.log("[NoteEditModal] Création d'une nouvelle note"),p.value={title:"Nouvelle note",description:"",columnId:i.getDefaultColumn.id||"1",accessLevel:Ki.PRIVATE,style:{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},comments:[],photos:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),enterprise_id:null},!o.isAdmin&&((Q=o.user)!=null&&Q.enterprise_id)&&(p.value.enterprise_id=o.user.enterprise_id),n.location){h.log("[NoteEditModal] Ajout de la localisation:",n.location);const G=v(n.location);p.value.location=G}h.log("[NoteEditModal] Niveau d'accès initial:",p.value.accessLevel)}else h.error("[NoteEditModal] Erreur: Ni note existante ni nouvelle note");h.log("[NoteEditModal] editingNote.value après initialisation:",p.value)});const M=Xn(()=>i.getSortedColumns),A=Xn(()=>{var I;const B=((I=p.value.comments)==null?void 0:I.length)||0;return h.log("[NoteEditModal] Computed commentsCount recalculé:",B),B}),z=Xn(()=>{var I;const B=((I=p.value.photos)==null?void 0:I.length)||0;return h.log("[NoteEditModal] Computed photosCount recalculé:",B),B}),Y=[{id:Ki.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:Ki.COMPANY,title:"Entreprise",description:"Visible par l'entreprise uniquement"},{id:Ki.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et les salariés"},{id:Ki.VISITOR,title:"Visiteurs",description:"Visible par tous"}],ne=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"],ge=B=>{var I;if(p.value.style?(p.value.style.color=B,p.value.style.fillColor=B):p.value.style={color:B,weight:2,opacity:1,fillColor:B,fillOpacity:.6,radius:8},p.value.color=B,(I=n.note)!=null&&I.id){h.log("[NoteEditModal] Émission de l'événement de mise à jour de couleur:",B);const Q=new CustomEvent("geonote:updateStyle",{detail:{noteId:n.note.id,style:{color:B,fillColor:B}}});window.dispatchEvent(Q);const G=new CustomEvent("geonote:update",{detail:{noteId:n.note.id,properties:{name:p.value.title,description:p.value.description,columnId:p.value.columnId,accessLevel:p.value.accessLevel,style:p.value.style}}});window.dispatchEvent(G)}},pe=()=>{var B,I,Q,G,_e,ve,qe,re,K,Z,oe;p.value={title:((B=n.note)==null?void 0:B.title)||"",description:((I=n.note)==null?void 0:I.description)||"",columnId:((Q=n.note)==null?void 0:Q.columnId)||"",accessLevel:((G=n.note)==null?void 0:G.accessLevel)||"private",style:((_e=n.note)==null?void 0:_e.style)||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},location:n.location||((ve=n.note)==null?void 0:ve.location)||null,comments:((qe=n.note)==null?void 0:qe.comments)||[],photos:((re=n.note)==null?void 0:re.photos)||[],enterprise_id:((K=n.note)==null?void 0:K.enterprise_id)||null},o.isAdmin&&((Z=n.note)!=null&&Z.enterprise_id)&&(c.value=n.note.enterprise_id),!o.isAdmin&&!p.value.enterprise_id&&((oe=o.user)!=null&&oe.enterprise_id)&&(p.value.enterprise_id=o.user.enterprise_id)};Lo(()=>{pe()}),Ti(()=>n.note,()=>{pe()},{deep:!0});function O(){r("close")}async function j(){h.log("[NoteEditModal] Commentaire ajouté, le modal reste ouvert"),n.note&&n.note.id&&await x(n.note.id)}async function J(){h.log("[NoteEditModal] Photo ajoutée, le modal reste ouvert"),n.note&&n.note.id&&await E(n.note.id)}async function U(){h.log("[NoteEditModal] Commentaire supprimé, mise à jour de la liste"),n.note&&n.note.id&&await x(n.note.id)}async function R(){h.log("[NoteEditModal] Photo supprimée, mise à jour de la liste"),n.note&&n.note.id&&await E(n.note.id)}async function V(){var B,I;try{const Q=p.value.style.color;p.value.style={...p.value.style,color:Q,fillColor:Q,weight:2,opacity:1,fillOpacity:.6,radius:8};const G={title:p.value.title,description:p.value.description,columnId:p.value.columnId,style:p.value.style,access_level:p.value.accessLevel,comments:p.value.comments||[],photos:p.value.photos||[],color:Q,enterprise_id:o.isAdmin?c.value:p.value.enterprise_id};!o.isAdmin&&((B=o.user)!=null&&B.enterprise_id)&&(G.enterprise_id=o.user.enterprise_id),p.value.location&&(G.location=Array.isArray(p.value.location)?{type:"Point",coordinates:[p.value.location[1],p.value.location[0]]}:p.value.location),h.log("[NoteEditModal] Données de note à sauvegarder:",G);let _e;if((I=n.note)!=null&&I.id){const ve=n.note.backendId||n.note.id;h.log(`[NoteEditModal] Mise à jour de la note avec ID backend: ${ve}`),G.backendId=n.note.backendId,_e=(await ka.updateNote(ve,G)).data,i.updateNote(ve,{...p.value,..._e,accessLevel:p.value.accessLevel,style:p.value.style,color:Q,updatedAt:new Date().toISOString()});const re=n.note.leafletId||n.note.id,K=new CustomEvent("geonote:update",{detail:{noteId:re,properties:{name:p.value.title,description:p.value.description,columnId:p.value.columnId,accessLevel:p.value.accessLevel,style:p.value.style,color:Q}}});window.dispatchEvent(K),s.success("Note mise à jour avec succès")}else{if(_e=(await ka.createNote(G)).data,!_e.id)throw new Error("Le backend n'a pas fourni d'ID pour la nouvelle note");const qe=i.getDefaultColumn,re={...G,id:_e.id,columnId:G.columnId||qe.id,accessLevel:p.value.accessLevel,style:G.style,color:Q};h.log("[NoteEditModal] Note à ajouter au store avec ID backend:",_e.id),i.addNote(re),s.success("Note créée avec succès")}_e&&(!_e.comments&&p.value.comments&&(_e.comments=p.value.comments),!_e.photos&&p.value.photos&&(_e.photos=p.value.photos),_e.color=Q,_e.style={..._e.style,color:Q,fillColor:Q}),r("save",_e),r("close")}catch(Q){h.error("[NoteEditModal] Erreur lors de la sauvegarde de la note:",Q),s.error("Erreur lors de la sauvegarde de la note")}}function $(B){B.stopPropagation()}return(B,I)=>{var Q;return Ne(),Be("div",{class:"modal-overlay",onClick:$},[S("div",{class:"modal-container",onClick:I[8]||(I[8]=nu(()=>{},["stop"]))},[S("form",{onSubmit:nu(V,["prevent"]),class:"modal-form"},[S("div",hU,[S("h3",fU,kt((Q=B.note)!=null&&Q.id?"Modifier la note":"Nouvelle note"),1),S("button",{type:"button",onClick:O,class:"close-button"},I[9]||(I[9]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",pU,[S("button",{type:"button",onClick:I[0]||(I[0]=G=>a.value="info"),class:Ii(["tab-button",{active:a.value==="info"}])}," Informations ",2),S("button",{type:"button",onClick:I[1]||(I[1]=G=>a.value="comments"),class:Ii(["tab-button",{active:a.value==="comments"}])},[I[10]||(I[10]=ri(" Commentaires ")),A.value>0?(Ne(),Be("span",gU,kt(A.value),1)):Zt("",!0)],2),S("button",{type:"button",onClick:I[2]||(I[2]=G=>a.value="photos"),class:Ii(["tab-button",{active:a.value==="photos"}])},[I[11]||(I[11]=ri(" Photos ")),z.value>0?(Ne(),Be("span",mU,kt(z.value),1)):Zt("",!0)],2)]),S("div",vU,[a.value==="info"?(Ne(),Be("div",yU,[S("div",bU,[I[12]||(I[12]=S("label",{for:"title"},"Titre",-1)),kn(S("input",{type:"text",id:"title","onUpdate:modelValue":I[3]||(I[3]=G=>p.value.title=G),required:""},null,512),[[zr,p.value.title]])]),S("div",_U,[I[13]||(I[13]=S("label",{for:"description"},"Description",-1)),kn(S("textarea",{id:"description","onUpdate:modelValue":I[4]||(I[4]=G=>p.value.description=G),rows:"3"},null,512),[[zr,p.value.description]])]),p.value.location?(Ne(),Be("div",wU,I[14]||(I[14]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1),S("span",null,"Note géolocalisée",-1)]))):Zt("",!0),S("div",xU,[I[15]||(I[15]=S("label",{for:"column"},"État",-1)),kn(S("select",{id:"column","onUpdate:modelValue":I[5]||(I[5]=G=>p.value.columnId=G)},[(Ne(!0),Be(wn,null,Qn(M.value,G=>(Ne(),Be("option",{key:G.id,value:G.id},kt(G.title),9,LU))),128))],512),[[Zi,p.value.columnId]])]),Vn(o).isAdmin?(Ne(),Be("div",SU,[I[17]||(I[17]=S("label",{for:"enterprise"},"Entreprise",-1)),kn(S("select",{id:"enterprise","onUpdate:modelValue":I[6]||(I[6]=G=>c.value=G)},[I[16]||(I[16]=S("option",{value:null},"Sélectionner une entreprise",-1)),(Ne(!0),Be(wn,null,Qn(l.value,G=>(Ne(),Be("option",{key:G.id,value:G.id},kt(G.company_name||`${G.first_name} ${G.last_name}`),9,CU))),128))],512),[[Zi,c.value]])])):Zt("",!0),S("div",EU,[I[18]||(I[18]=S("label",{for:"accessLevel"},"Niveau d'accès",-1)),kn(S("select",{id:"accessLevel","onUpdate:modelValue":I[7]||(I[7]=G=>p.value.accessLevel=G)},[(Ne(),Be(wn,null,Qn(Y,G=>S("option",{key:G.id,value:G.id},kt(G.title)+" - "+kt(G.description),9,PU)),64))],512),[[Zi,p.value.accessLevel]])]),S("div",MU,[I[19]||(I[19]=S("label",null,"Couleur",-1)),S("div",kU,[(Ne(),Be(wn,null,Qn(ne,G=>S("div",{key:G,class:Ii(["color-option",{selected:p.value.style.color===G}]),style:ru({backgroundColor:G}),onClick:_e=>ge(G)},null,14,AU)),64))])])])):a.value==="comments"?(Ne(),Be("div",TU,[B.note?(Ne(),ua(qV,{key:0,noteId:B.note.id,comments:p.value.comments||[],onCommentAdded:j,onCommentDeleted:U},null,8,["noteId","comments"])):Zt("",!0)])):a.value==="photos"?(Ne(),Be("div",DU,[B.note?(Ne(),ua(dU,{key:0,noteId:B.note.id,photos:p.value.photos||[],onPhotoAdded:J,onPhotoDeleted:R},null,8,["noteId","photos"])):Zt("",!0)])):Zt("",!0)]),S("div",{class:"modal-footer"},[I[20]||(I[20]=S("button",{type:"submit",class:"primary-button"},"Enregistrer",-1)),S("button",{type:"button",onClick:O,class:"secondary-button"},"Annuler")])],32)])])}}}),BE=rd(NU,[["__scopeId","data-v-a26dd91d"]]);(()=>{var Nn,sr;var t=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(d,m)=>()=>(m||d((m={exports:{}}).exports,m),m.exports),a=(d,m,_,C)=>{if(m&&typeof m=="object"||typeof m=="function")for(let k of r(m))!s.call(d,k)&&k!==_&&e(d,k,{get:()=>m[k],enumerable:!(C=n(m,k))||C.enumerable});return d},l=(d,m,_)=>(_=d!=null?t(i(d)):{},a(m||!d||!d.__esModule?e(_,"default",{value:d,enumerable:!0}):_,d)),c=o((d,m)=>{function _(){this.__data__=[],this.size=0}m.exports=_}),h=o((d,m)=>{function _(C,k){return C===k||C!==C&&k!==k}m.exports=_}),p=o((d,m)=>{var _=h();function C(k,H){for(var te=k.length;te--;)if(_(k[te][0],H))return te;return-1}m.exports=C}),v=o((d,m)=>{var _=p(),C=Array.prototype,k=C.splice;function H(te){var ae=this.__data__,be=_(ae,te);if(be<0)return!1;var Ce=ae.length-1;return be==Ce?ae.pop():k.call(ae,be,1),--this.size,!0}m.exports=H}),g=o((d,m)=>{var _=p();function C(k){var H=this.__data__,te=_(H,k);return te<0?void 0:H[te][1]}m.exports=C}),x=o((d,m)=>{var _=p();function C(k){return _(this.__data__,k)>-1}m.exports=C}),E=o((d,m)=>{var _=p();function C(k,H){var te=this.__data__,ae=_(te,k);return ae<0?(++this.size,te.push([k,H])):te[ae][1]=H,this}m.exports=C}),D=o((d,m)=>{var _=c(),C=v(),k=g(),H=x(),te=E();function ae(be){var Ce=-1,rt=be==null?0:be.length;for(this.clear();++Ce<rt;){var Ge=be[Ce];this.set(Ge[0],Ge[1])}}ae.prototype.clear=_,ae.prototype.delete=C,ae.prototype.get=k,ae.prototype.has=H,ae.prototype.set=te,m.exports=ae}),M=o((d,m)=>{var _=D();function C(){this.__data__=new _,this.size=0}m.exports=C}),A=o((d,m)=>{function _(C){var k=this.__data__,H=k.delete(C);return this.size=k.size,H}m.exports=_}),z=o((d,m)=>{function _(C){return this.__data__.get(C)}m.exports=_}),Y=o((d,m)=>{function _(C){return this.__data__.has(C)}m.exports=_}),ne=o((d,m)=>{var _=typeof Aa=="object"&&Aa&&Aa.Object===Object&&Aa;m.exports=_}),ge=o((d,m)=>{var _=ne(),C=typeof self=="object"&&self&&self.Object===Object&&self,k=_||C||Function("return this")();m.exports=k}),pe=o((d,m)=>{var _=ge(),C=_.Symbol;m.exports=C}),O=o((d,m)=>{var _=pe(),C=Object.prototype,k=C.hasOwnProperty,H=C.toString,te=_?_.toStringTag:void 0;function ae(be){var Ce=k.call(be,te),rt=be[te];try{be[te]=void 0;var Ge=!0}catch{}var wt=H.call(be);return Ge&&(Ce?be[te]=rt:delete be[te]),wt}m.exports=ae}),j=o((d,m)=>{var _=Object.prototype,C=_.toString;function k(H){return C.call(H)}m.exports=k}),J=o((d,m)=>{var _=pe(),C=O(),k=j(),H="[object Null]",te="[object Undefined]",ae=_?_.toStringTag:void 0;function be(Ce){return Ce==null?Ce===void 0?te:H:ae&&ae in Object(Ce)?C(Ce):k(Ce)}m.exports=be}),U=o((d,m)=>{function _(C){var k=typeof C;return C!=null&&(k=="object"||k=="function")}m.exports=_}),R=o((d,m)=>{var _=J(),C=U(),k="[object AsyncFunction]",H="[object Function]",te="[object GeneratorFunction]",ae="[object Proxy]";function be(Ce){if(!C(Ce))return!1;var rt=_(Ce);return rt==H||rt==te||rt==k||rt==ae}m.exports=be}),V=o((d,m)=>{var _=ge(),C=_["__core-js_shared__"];m.exports=C}),$=o((d,m)=>{var _=V(),C=function(){var H=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||"");return H?"Symbol(src)_1."+H:""}();function k(H){return!!C&&C in H}m.exports=k}),B=o((d,m)=>{var _=Function.prototype,C=_.toString;function k(H){if(H!=null){try{return C.call(H)}catch{}try{return H+""}catch{}}return""}m.exports=k}),I=o((d,m)=>{var _=R(),C=$(),k=U(),H=B(),te=/[\\^$.*+?()[\]{}|]/g,ae=/^\[object .+?Constructor\]$/,be=Function.prototype,Ce=Object.prototype,rt=be.toString,Ge=Ce.hasOwnProperty,wt=RegExp("^"+rt.call(Ge).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function It(tn){if(!k(tn)||C(tn))return!1;var _n=_(tn)?wt:ae;return _n.test(H(tn))}m.exports=It}),Q=o((d,m)=>{function _(C,k){return C==null?void 0:C[k]}m.exports=_}),G=o((d,m)=>{var _=I(),C=Q();function k(H,te){var ae=C(H,te);return _(ae)?ae:void 0}m.exports=k}),_e=o((d,m)=>{var _=G(),C=ge(),k=_(C,"Map");m.exports=k}),ve=o((d,m)=>{var _=G(),C=_(Object,"create");m.exports=C}),qe=o((d,m)=>{var _=ve();function C(){this.__data__=_?_(null):{},this.size=0}m.exports=C}),re=o((d,m)=>{function _(C){var k=this.has(C)&&delete this.__data__[C];return this.size-=k?1:0,k}m.exports=_}),K=o((d,m)=>{var _=ve(),C="__lodash_hash_undefined__",k=Object.prototype,H=k.hasOwnProperty;function te(ae){var be=this.__data__;if(_){var Ce=be[ae];return Ce===C?void 0:Ce}return H.call(be,ae)?be[ae]:void 0}m.exports=te}),Z=o((d,m)=>{var _=ve(),C=Object.prototype,k=C.hasOwnProperty;function H(te){var ae=this.__data__;return _?ae[te]!==void 0:k.call(ae,te)}m.exports=H}),oe=o((d,m)=>{var _=ve(),C="__lodash_hash_undefined__";function k(H,te){var ae=this.__data__;return this.size+=this.has(H)?0:1,ae[H]=_&&te===void 0?C:te,this}m.exports=k}),de=o((d,m)=>{var _=qe(),C=re(),k=K(),H=Z(),te=oe();function ae(be){var Ce=-1,rt=be==null?0:be.length;for(this.clear();++Ce<rt;){var Ge=be[Ce];this.set(Ge[0],Ge[1])}}ae.prototype.clear=_,ae.prototype.delete=C,ae.prototype.get=k,ae.prototype.has=H,ae.prototype.set=te,m.exports=ae}),ye=o((d,m)=>{var _=de(),C=D(),k=_e();function H(){this.size=0,this.__data__={hash:new _,map:new(k||C),string:new _}}m.exports=H}),he=o((d,m)=>{function _(C){var k=typeof C;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?C!=="__proto__":C===null}m.exports=_}),X=o((d,m)=>{var _=he();function C(k,H){var te=k.__data__;return _(H)?te[typeof H=="string"?"string":"hash"]:te.map}m.exports=C}),Ae=o((d,m)=>{var _=X();function C(k){var H=_(this,k).delete(k);return this.size-=H?1:0,H}m.exports=C}),De=o((d,m)=>{var _=X();function C(k){return _(this,k).get(k)}m.exports=C}),Xe=o((d,m)=>{var _=X();function C(k){return _(this,k).has(k)}m.exports=C}),fe=o((d,m)=>{var _=X();function C(k,H){var te=_(this,k),ae=te.size;return te.set(k,H),this.size+=te.size==ae?0:1,this}m.exports=C}),ee=o((d,m)=>{var _=ye(),C=Ae(),k=De(),H=Xe(),te=fe();function ae(be){var Ce=-1,rt=be==null?0:be.length;for(this.clear();++Ce<rt;){var Ge=be[Ce];this.set(Ge[0],Ge[1])}}ae.prototype.clear=_,ae.prototype.delete=C,ae.prototype.get=k,ae.prototype.has=H,ae.prototype.set=te,m.exports=ae}),se=o((d,m)=>{var _=D(),C=_e(),k=ee(),H=200;function te(ae,be){var Ce=this.__data__;if(Ce instanceof _){var rt=Ce.__data__;if(!C||rt.length<H-1)return rt.push([ae,be]),this.size=++Ce.size,this;Ce=this.__data__=new k(rt)}return Ce.set(ae,be),this.size=Ce.size,this}m.exports=te}),le=o((d,m)=>{var _=D(),C=M(),k=A(),H=z(),te=Y(),ae=se();function be(Ce){var rt=this.__data__=new _(Ce);this.size=rt.size}be.prototype.clear=C,be.prototype.delete=k,be.prototype.get=H,be.prototype.has=te,be.prototype.set=ae,m.exports=be}),je=o((d,m)=>{var _=G(),C=function(){try{var k=_(Object,"defineProperty");return k({},"",{}),k}catch{}}();m.exports=C}),$e=o((d,m)=>{var _=je();function C(k,H,te){H=="__proto__"&&_?_(k,H,{configurable:!0,enumerable:!0,value:te,writable:!0}):k[H]=te}m.exports=C}),et=o((d,m)=>{var _=$e(),C=h();function k(H,te,ae){(ae!==void 0&&!C(H[te],ae)||ae===void 0&&!(te in H))&&_(H,te,ae)}m.exports=k}),Ee=o((d,m)=>{function _(C){return function(k,H,te){for(var ae=-1,be=Object(k),Ce=te(k),rt=Ce.length;rt--;){var Ge=Ce[C?rt:++ae];if(H(be[Ge],Ge,be)===!1)break}return k}}m.exports=_}),me=o((d,m)=>{var _=Ee(),C=_();m.exports=C}),We=o((d,m)=>{var _=ge(),C=typeof d=="object"&&d&&!d.nodeType&&d,k=C&&typeof m=="object"&&m&&!m.nodeType&&m,H=k&&k.exports===C,te=H?_.Buffer:void 0,ae=te?te.allocUnsafe:void 0;function be(Ce,rt){if(rt)return Ce.slice();var Ge=Ce.length,wt=ae?ae(Ge):new Ce.constructor(Ge);return Ce.copy(wt),wt}m.exports=be}),ct=o((d,m)=>{var _=ge(),C=_.Uint8Array;m.exports=C}),pt=o((d,m)=>{var _=ct();function C(k){var H=new k.constructor(k.byteLength);return new _(H).set(new _(k)),H}m.exports=C}),gt=o((d,m)=>{var _=pt();function C(k,H){var te=H?_(k.buffer):k.buffer;return new k.constructor(te,k.byteOffset,k.length)}m.exports=C}),st=o((d,m)=>{function _(C,k){var H=-1,te=C.length;for(k||(k=Array(te));++H<te;)k[H]=C[H];return k}m.exports=_}),qt=o((d,m)=>{var _=U(),C=Object.create,k=function(){function H(){}return function(te){if(!_(te))return{};if(C)return C(te);H.prototype=te;var ae=new H;return H.prototype=void 0,ae}}();m.exports=k}),gn=o((d,m)=>{function _(C,k){return function(H){return C(k(H))}}m.exports=_}),Qe=o((d,m)=>{var _=gn(),C=_(Object.getPrototypeOf,Object);m.exports=C}),lt=o((d,m)=>{var _=Object.prototype;function C(k){var H=k&&k.constructor,te=typeof H=="function"&&H.prototype||_;return k===te}m.exports=C}),it=o((d,m)=>{var _=qt(),C=Qe(),k=lt();function H(te){return typeof te.constructor=="function"&&!k(te)?_(C(te)):{}}m.exports=H}),$t=o((d,m)=>{function _(C){return C!=null&&typeof C=="object"}m.exports=_}),Jt=o((d,m)=>{var _=J(),C=$t(),k="[object Arguments]";function H(te){return C(te)&&_(te)==k}m.exports=H}),Dn=o((d,m)=>{var _=Jt(),C=$t(),k=Object.prototype,H=k.hasOwnProperty,te=k.propertyIsEnumerable,ae=_(function(){return arguments}())?_:function(be){return C(be)&&H.call(be,"callee")&&!te.call(be,"callee")};m.exports=ae}),vn=o((d,m)=>{var _=Array.isArray;m.exports=_}),Tn=o((d,m)=>{var _=9007199254740991;function C(k){return typeof k=="number"&&k>-1&&k%1==0&&k<=_}m.exports=C}),Jn=o((d,m)=>{var _=R(),C=Tn();function k(H){return H!=null&&C(H.length)&&!_(H)}m.exports=k}),en=o((d,m)=>{var _=Jn(),C=$t();function k(H){return C(H)&&_(H)}m.exports=k}),xn=o((d,m)=>{function _(){return!1}m.exports=_}),Cn=o((d,m)=>{var _=ge(),C=xn(),k=typeof d=="object"&&d&&!d.nodeType&&d,H=k&&typeof m=="object"&&m&&!m.nodeType&&m,te=H&&H.exports===k,ae=te?_.Buffer:void 0,be=ae?ae.isBuffer:void 0,Ce=be||C;m.exports=Ce}),er=o((d,m)=>{var _=J(),C=Qe(),k=$t(),H="[object Object]",te=Function.prototype,ae=Object.prototype,be=te.toString,Ce=ae.hasOwnProperty,rt=be.call(Object);function Ge(wt){if(!k(wt)||_(wt)!=H)return!1;var It=C(wt);if(It===null)return!0;var tn=Ce.call(It,"constructor")&&It.constructor;return typeof tn=="function"&&tn instanceof tn&&be.call(tn)==rt}m.exports=Ge}),pr=o((d,m)=>{var _=J(),C=Tn(),k=$t(),H="[object Arguments]",te="[object Array]",ae="[object Boolean]",be="[object Date]",Ce="[object Error]",rt="[object Function]",Ge="[object Map]",wt="[object Number]",It="[object Object]",tn="[object RegExp]",_n="[object Set]",Mn="[object String]",yr="[object WeakMap]",nt="[object ArrayBuffer]",ot="[object DataView]",mt="[object Float32Array]",zt="[object Float64Array]",Et="[object Int8Array]",Bt="[object Int16Array]",we="[object Int32Array]",ke="[object Uint8Array]",ze="[object Uint8ClampedArray]",Fe="[object Uint16Array]",Ue="[object Uint32Array]",He={};He[mt]=He[zt]=He[Et]=He[Bt]=He[we]=He[ke]=He[ze]=He[Fe]=He[Ue]=!0,He[H]=He[te]=He[nt]=He[ae]=He[ot]=He[be]=He[Ce]=He[rt]=He[Ge]=He[wt]=He[It]=He[tn]=He[_n]=He[Mn]=He[yr]=!1;function dt(ht){return k(ht)&&C(ht.length)&&!!He[_(ht)]}m.exports=dt}),xr=o((d,m)=>{function _(C){return function(k){return C(k)}}m.exports=_}),lr=o((d,m)=>{var _=ne(),C=typeof d=="object"&&d&&!d.nodeType&&d,k=C&&typeof m=="object"&&m&&!m.nodeType&&m,H=k&&k.exports===C,te=H&&_.process,ae=function(){try{var be=k&&k.require&&k.require("util").types;return be||te&&te.binding&&te.binding("util")}catch{}}();m.exports=ae}),Jr=o((d,m)=>{var _=pr(),C=xr(),k=lr(),H=k&&k.isTypedArray,te=H?C(H):_;m.exports=te}),Bs=o((d,m)=>{function _(C,k){if(!(k==="constructor"&&typeof C[k]=="function")&&k!="__proto__")return C[k]}m.exports=_}),Di=o((d,m)=>{var _=$e(),C=h(),k=Object.prototype,H=k.hasOwnProperty;function te(ae,be,Ce){var rt=ae[be];(!(H.call(ae,be)&&C(rt,Ce))||Ce===void 0&&!(be in ae))&&_(ae,be,Ce)}m.exports=te}),Fo=o((d,m)=>{var _=Di(),C=$e();function k(H,te,ae,be){var Ce=!ae;ae||(ae={});for(var rt=-1,Ge=te.length;++rt<Ge;){var wt=te[rt],It=be?be(ae[wt],H[wt],wt,ae,H):void 0;It===void 0&&(It=H[wt]),Ce?C(ae,wt,It):_(ae,wt,It)}return ae}m.exports=k}),Rs=o((d,m)=>{function _(C,k){for(var H=-1,te=Array(C);++H<C;)te[H]=k(H);return te}m.exports=_}),tr=o((d,m)=>{var _=9007199254740991,C=/^(?:0|[1-9]\d*)$/;function k(H,te){var ae=typeof H;return te=te??_,!!te&&(ae=="number"||ae!="symbol"&&C.test(H))&&H>-1&&H%1==0&&H<te}m.exports=k}),Fs=o((d,m)=>{var _=Rs(),C=Dn(),k=vn(),H=Cn(),te=tr(),ae=Jr(),be=Object.prototype,Ce=be.hasOwnProperty;function rt(Ge,wt){var It=k(Ge),tn=!It&&C(Ge),_n=!It&&!tn&&H(Ge),Mn=!It&&!tn&&!_n&&ae(Ge),yr=It||tn||_n||Mn,nt=yr?_(Ge.length,String):[],ot=nt.length;for(var mt in Ge)(wt||Ce.call(Ge,mt))&&!(yr&&(mt=="length"||_n&&(mt=="offset"||mt=="parent")||Mn&&(mt=="buffer"||mt=="byteLength"||mt=="byteOffset")||te(mt,ot)))&&nt.push(mt);return nt}m.exports=rt}),jo=o((d,m)=>{function _(C){var k=[];if(C!=null)for(var H in Object(C))k.push(H);return k}m.exports=_}),gs=o((d,m)=>{var _=U(),C=lt(),k=jo(),H=Object.prototype,te=H.hasOwnProperty;function ae(be){if(!_(be))return k(be);var Ce=C(be),rt=[];for(var Ge in be)Ge=="constructor"&&(Ce||!te.call(be,Ge))||rt.push(Ge);return rt}m.exports=ae}),qn=o((d,m)=>{var _=Fs(),C=gs(),k=Jn();function H(te){return k(te)?_(te,!0):C(te)}m.exports=H}),Ze=o((d,m)=>{var _=Fo(),C=qn();function k(H){return _(H,C(H))}m.exports=k}),Ye=o((d,m)=>{var _=et(),C=We(),k=gt(),H=st(),te=it(),ae=Dn(),be=vn(),Ce=en(),rt=Cn(),Ge=R(),wt=U(),It=er(),tn=Jr(),_n=Bs(),Mn=Ze();function yr(nt,ot,mt,zt,Et,Bt,we){var ke=_n(nt,mt),ze=_n(ot,mt),Fe=we.get(ze);if(Fe){_(nt,mt,Fe);return}var Ue=Bt?Bt(ke,ze,mt+"",nt,ot,we):void 0,He=Ue===void 0;if(He){var dt=be(ze),ht=!dt&&rt(ze),bt=!dt&&!ht&&tn(ze);Ue=ze,dt||ht||bt?be(ke)?Ue=ke:Ce(ke)?Ue=H(ke):ht?(He=!1,Ue=C(ze,!0)):bt?(He=!1,Ue=k(ze,!0)):Ue=[]:It(ze)||ae(ze)?(Ue=ke,ae(ke)?Ue=Mn(ke):(!wt(ke)||Ge(ke))&&(Ue=te(ze))):He=!1}He&&(we.set(ze,Ue),Et(Ue,ze,zt,Bt,we),we.delete(ze)),_(nt,mt,Ue)}m.exports=yr}),Ut=o((d,m)=>{var _=le(),C=et(),k=me(),H=Ye(),te=U(),ae=qn(),be=Bs();function Ce(rt,Ge,wt,It,tn){rt!==Ge&&k(Ge,function(_n,Mn){if(tn||(tn=new _),te(_n))H(rt,Ge,Mn,wt,Ce,It,tn);else{var yr=It?It(be(rt,Mn),_n,Mn+"",rt,Ge,tn):void 0;yr===void 0&&(yr=_n),C(rt,Mn,yr)}},ae)}m.exports=Ce}),En=o((d,m)=>{function _(C){return C}m.exports=_}),On=o((d,m)=>{function _(C,k,H){switch(H.length){case 0:return C.call(k);case 1:return C.call(k,H[0]);case 2:return C.call(k,H[0],H[1]);case 3:return C.call(k,H[0],H[1],H[2])}return C.apply(k,H)}m.exports=_}),Ln=o((d,m)=>{var _=On(),C=Math.max;function k(H,te,ae){return te=C(te===void 0?H.length-1:te,0),function(){for(var be=arguments,Ce=-1,rt=C(be.length-te,0),Ge=Array(rt);++Ce<rt;)Ge[Ce]=be[te+Ce];Ce=-1;for(var wt=Array(te+1);++Ce<te;)wt[Ce]=be[Ce];return wt[te]=ae(Ge),_(H,this,wt)}}m.exports=k}),jt=o((d,m)=>{function _(C){return function(){return C}}m.exports=_}),$n=o((d,m)=>{var _=jt(),C=je(),k=En(),H=C?function(te,ae){return C(te,"toString",{configurable:!0,enumerable:!1,value:_(ae),writable:!0})}:k;m.exports=H}),xt=o((d,m)=>{var _=800,C=16,k=Date.now;function H(te){var ae=0,be=0;return function(){var Ce=k(),rt=C-(Ce-be);if(be=Ce,rt>0){if(++ae>=_)return arguments[0]}else ae=0;return te.apply(void 0,arguments)}}m.exports=H}),Kt=o((d,m)=>{var _=$n(),C=xt(),k=C(_);m.exports=k}),Yn=o((d,m)=>{var _=En(),C=Ln(),k=Kt();function H(te,ae){return k(C(te,ae,_),te+"")}m.exports=H}),gr=o((d,m)=>{var _=h(),C=Jn(),k=tr(),H=U();function te(ae,be,Ce){if(!H(Ce))return!1;var rt=typeof be;return(rt=="number"?C(Ce)&&k(be,Ce.length):rt=="string"&&be in Ce)?_(Ce[be],ae):!1}m.exports=te}),Sr=o((d,m)=>{var _=Yn(),C=gr();function k(H){return _(function(te,ae){var be=-1,Ce=ae.length,rt=Ce>1?ae[Ce-1]:void 0,Ge=Ce>2?ae[2]:void 0;for(rt=H.length>3&&typeof rt=="function"?(Ce--,rt):void 0,Ge&&C(ae[0],ae[1],Ge)&&(rt=Ce<3?void 0:rt,Ce=1),te=Object(te);++be<Ce;){var wt=ae[be];wt&&H(te,wt,be,rt)}return te})}m.exports=k}),an=o((d,m)=>{var _=Ut(),C=Sr(),k=C(function(H,te,ae){_(H,te,ae)});m.exports=k}),nn=o((d,m)=>{var _=J(),C=$t(),k="[object Symbol]";function H(te){return typeof te=="symbol"||C(te)&&_(te)==k}m.exports=H}),$r=o((d,m)=>{var _=vn(),C=nn(),k=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,H=/^\w*$/;function te(ae,be){if(_(ae))return!1;var Ce=typeof ae;return Ce=="number"||Ce=="symbol"||Ce=="boolean"||ae==null||C(ae)?!0:H.test(ae)||!k.test(ae)||be!=null&&ae in Object(be)}m.exports=te}),Qr=o((d,m)=>{var _=ee(),C="Expected a function";function k(H,te){if(typeof H!="function"||te!=null&&typeof te!="function")throw new TypeError(C);var ae=function(){var be=arguments,Ce=te?te.apply(this,be):be[0],rt=ae.cache;if(rt.has(Ce))return rt.get(Ce);var Ge=H.apply(this,be);return ae.cache=rt.set(Ce,Ge)||rt,Ge};return ae.cache=new(k.Cache||_),ae}k.Cache=_,m.exports=k}),os=o((d,m)=>{var _=Qr(),C=500;function k(H){var te=_(H,function(be){return ae.size===C&&ae.clear(),be}),ae=te.cache;return te}m.exports=k}),si=o((d,m)=>{var _=os(),C=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,k=/\\(\\)?/g,H=_(function(te){var ae=[];return te.charCodeAt(0)===46&&ae.push(""),te.replace(C,function(be,Ce,rt,Ge){ae.push(rt?Ge.replace(k,"$1"):Ce||be)}),ae});m.exports=H}),mr=o((d,m)=>{function _(C,k){for(var H=-1,te=C==null?0:C.length,ae=Array(te);++H<te;)ae[H]=k(C[H],H,C);return ae}m.exports=_}),Fr=o((d,m)=>{var _=pe(),C=mr(),k=vn(),H=nn(),te=_?_.prototype:void 0,ae=te?te.toString:void 0;function be(Ce){if(typeof Ce=="string")return Ce;if(k(Ce))return C(Ce,be)+"";if(H(Ce))return ae?ae.call(Ce):"";var rt=Ce+"";return rt=="0"&&1/Ce==-1/0?"-0":rt}m.exports=be}),ei=o((d,m)=>{var _=Fr();function C(k){return k==null?"":_(k)}m.exports=C}),Pr=o((d,m)=>{var _=vn(),C=$r(),k=si(),H=ei();function te(ae,be){return _(ae)?ae:C(ae,be)?[ae]:k(H(ae))}m.exports=te}),cn=o((d,m)=>{var _=nn();function C(k){if(typeof k=="string"||_(k))return k;var H=k+"";return H=="0"&&1/k==-1/0?"-0":H}m.exports=C}),Xi=o((d,m)=>{var _=Pr(),C=cn();function k(H,te){te=_(te,H);for(var ae=0,be=te.length;H!=null&&ae<be;)H=H[C(te[ae++])];return ae&&ae==be?H:void 0}m.exports=k}),Vr=o((d,m)=>{var _=Xi();function C(k,H,te){var ae=k==null?void 0:_(k,H);return ae===void 0?te:ae}m.exports=C}),ur=o((d,m)=>{(function(_,C){typeof d=="object"&&typeof m<"u"?m.exports=C():(_=_||self).RBush=C()})(d,function(){function _(nt,ot,mt,zt,Et){(function Bt(we,ke,ze,Fe,Ue){for(;Fe>ze;){if(Fe-ze>600){var He=Fe-ze+1,dt=ke-ze+1,ht=Math.log(He),bt=.5*Math.exp(2*ht/3),At=.5*Math.sqrt(ht*bt*(He-bt)/He)*(dt-He/2<0?-1:1),Tt=Math.max(ze,Math.floor(ke-dt*bt/He+At)),on=Math.min(Fe,Math.floor(ke+(He-dt)*bt/He+At));Bt(we,ke,Tt,on,Ue)}var Wn=we[ke],Kn=ze,or=Fe;for(C(we,ze,ke),Ue(we[Fe],Wn)>0&&C(we,ze,Fe);Kn<or;){for(C(we,Kn,or),Kn++,or--;Ue(we[Kn],Wn)<0;)Kn++;for(;Ue(we[or],Wn)>0;)or--}Ue(we[ze],Wn)===0?C(we,ze,or):C(we,++or,Fe),or<=ke&&(ze=or+1),ke<=or&&(Fe=or-1)}})(nt,ot,mt||0,zt||nt.length-1,Et||k)}function C(nt,ot,mt){var zt=nt[ot];nt[ot]=nt[mt],nt[mt]=zt}function k(nt,ot){return nt<ot?-1:nt>ot?1:0}var H=function(nt){nt===void 0&&(nt=9),this._maxEntries=Math.max(4,nt),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function te(nt,ot,mt){if(!mt)return ot.indexOf(nt);for(var zt=0;zt<ot.length;zt++)if(mt(nt,ot[zt]))return zt;return-1}function ae(nt,ot){be(nt,0,nt.children.length,ot,nt)}function be(nt,ot,mt,zt,Et){Et||(Et=Mn(null)),Et.minX=1/0,Et.minY=1/0,Et.maxX=-1/0,Et.maxY=-1/0;for(var Bt=ot;Bt<mt;Bt++){var we=nt.children[Bt];Ce(Et,nt.leaf?zt(we):we)}return Et}function Ce(nt,ot){return nt.minX=Math.min(nt.minX,ot.minX),nt.minY=Math.min(nt.minY,ot.minY),nt.maxX=Math.max(nt.maxX,ot.maxX),nt.maxY=Math.max(nt.maxY,ot.maxY),nt}function rt(nt,ot){return nt.minX-ot.minX}function Ge(nt,ot){return nt.minY-ot.minY}function wt(nt){return(nt.maxX-nt.minX)*(nt.maxY-nt.minY)}function It(nt){return nt.maxX-nt.minX+(nt.maxY-nt.minY)}function tn(nt,ot){return nt.minX<=ot.minX&&nt.minY<=ot.minY&&ot.maxX<=nt.maxX&&ot.maxY<=nt.maxY}function _n(nt,ot){return ot.minX<=nt.maxX&&ot.minY<=nt.maxY&&ot.maxX>=nt.minX&&ot.maxY>=nt.minY}function Mn(nt){return{children:nt,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function yr(nt,ot,mt,zt,Et){for(var Bt=[ot,mt];Bt.length;)if(!((mt=Bt.pop())-(ot=Bt.pop())<=zt)){var we=ot+Math.ceil((mt-ot)/zt/2)*zt;_(nt,we,ot,mt,Et),Bt.push(ot,we,we,mt)}}return H.prototype.all=function(){return this._all(this.data,[])},H.prototype.search=function(nt){var ot=this.data,mt=[];if(!_n(nt,ot))return mt;for(var zt=this.toBBox,Et=[];ot;){for(var Bt=0;Bt<ot.children.length;Bt++){var we=ot.children[Bt],ke=ot.leaf?zt(we):we;_n(nt,ke)&&(ot.leaf?mt.push(we):tn(nt,ke)?this._all(we,mt):Et.push(we))}ot=Et.pop()}return mt},H.prototype.collides=function(nt){var ot=this.data;if(!_n(nt,ot))return!1;for(var mt=[];ot;){for(var zt=0;zt<ot.children.length;zt++){var Et=ot.children[zt],Bt=ot.leaf?this.toBBox(Et):Et;if(_n(nt,Bt)){if(ot.leaf||tn(nt,Bt))return!0;mt.push(Et)}}ot=mt.pop()}return!1},H.prototype.load=function(nt){if(!nt||!nt.length)return this;if(nt.length<this._minEntries){for(var ot=0;ot<nt.length;ot++)this.insert(nt[ot]);return this}var mt=this._build(nt.slice(),0,nt.length-1,0);if(this.data.children.length)if(this.data.height===mt.height)this._splitRoot(this.data,mt);else{if(this.data.height<mt.height){var zt=this.data;this.data=mt,mt=zt}this._insert(mt,this.data.height-mt.height-1,!0)}else this.data=mt;return this},H.prototype.insert=function(nt){return nt&&this._insert(nt,this.data.height-1),this},H.prototype.clear=function(){return this.data=Mn([]),this},H.prototype.remove=function(nt,ot){if(!nt)return this;for(var mt,zt,Et,Bt=this.data,we=this.toBBox(nt),ke=[],ze=[];Bt||ke.length;){if(Bt||(Bt=ke.pop(),zt=ke[ke.length-1],mt=ze.pop(),Et=!0),Bt.leaf){var Fe=te(nt,Bt.children,ot);if(Fe!==-1)return Bt.children.splice(Fe,1),ke.push(Bt),this._condense(ke),this}Et||Bt.leaf||!tn(Bt,we)?zt?(mt++,Bt=zt.children[mt],Et=!1):Bt=null:(ke.push(Bt),ze.push(mt),mt=0,zt=Bt,Bt=Bt.children[0])}return this},H.prototype.toBBox=function(nt){return nt},H.prototype.compareMinX=function(nt,ot){return nt.minX-ot.minX},H.prototype.compareMinY=function(nt,ot){return nt.minY-ot.minY},H.prototype.toJSON=function(){return this.data},H.prototype.fromJSON=function(nt){return this.data=nt,this},H.prototype._all=function(nt,ot){for(var mt=[];nt;)nt.leaf?ot.push.apply(ot,nt.children):mt.push.apply(mt,nt.children),nt=mt.pop();return ot},H.prototype._build=function(nt,ot,mt,zt){var Et,Bt=mt-ot+1,we=this._maxEntries;if(Bt<=we)return ae(Et=Mn(nt.slice(ot,mt+1)),this.toBBox),Et;zt||(zt=Math.ceil(Math.log(Bt)/Math.log(we)),we=Math.ceil(Bt/Math.pow(we,zt-1))),(Et=Mn([])).leaf=!1,Et.height=zt;var ke=Math.ceil(Bt/we),ze=ke*Math.ceil(Math.sqrt(we));yr(nt,ot,mt,ze,this.compareMinX);for(var Fe=ot;Fe<=mt;Fe+=ze){var Ue=Math.min(Fe+ze-1,mt);yr(nt,Fe,Ue,ke,this.compareMinY);for(var He=Fe;He<=Ue;He+=ke){var dt=Math.min(He+ke-1,Ue);Et.children.push(this._build(nt,He,dt,zt-1))}}return ae(Et,this.toBBox),Et},H.prototype._chooseSubtree=function(nt,ot,mt,zt){for(;zt.push(ot),!ot.leaf&&zt.length-1!==mt;){for(var Et=1/0,Bt=1/0,we=void 0,ke=0;ke<ot.children.length;ke++){var ze=ot.children[ke],Fe=wt(ze),Ue=(He=nt,dt=ze,(Math.max(dt.maxX,He.maxX)-Math.min(dt.minX,He.minX))*(Math.max(dt.maxY,He.maxY)-Math.min(dt.minY,He.minY))-Fe);Ue<Bt?(Bt=Ue,Et=Fe<Et?Fe:Et,we=ze):Ue===Bt&&Fe<Et&&(Et=Fe,we=ze)}ot=we||ot.children[0]}var He,dt;return ot},H.prototype._insert=function(nt,ot,mt){var zt=mt?nt:this.toBBox(nt),Et=[],Bt=this._chooseSubtree(zt,this.data,ot,Et);for(Bt.children.push(nt),Ce(Bt,zt);ot>=0&&Et[ot].children.length>this._maxEntries;)this._split(Et,ot),ot--;this._adjustParentBBoxes(zt,Et,ot)},H.prototype._split=function(nt,ot){var mt=nt[ot],zt=mt.children.length,Et=this._minEntries;this._chooseSplitAxis(mt,Et,zt);var Bt=this._chooseSplitIndex(mt,Et,zt),we=Mn(mt.children.splice(Bt,mt.children.length-Bt));we.height=mt.height,we.leaf=mt.leaf,ae(mt,this.toBBox),ae(we,this.toBBox),ot?nt[ot-1].children.push(we):this._splitRoot(mt,we)},H.prototype._splitRoot=function(nt,ot){this.data=Mn([nt,ot]),this.data.height=nt.height+1,this.data.leaf=!1,ae(this.data,this.toBBox)},H.prototype._chooseSplitIndex=function(nt,ot,mt){for(var zt,Et,Bt,we,ke,ze,Fe,Ue=1/0,He=1/0,dt=ot;dt<=mt-ot;dt++){var ht=be(nt,0,dt,this.toBBox),bt=be(nt,dt,mt,this.toBBox),At=(Et=ht,Bt=bt,we=void 0,ke=void 0,ze=void 0,Fe=void 0,we=Math.max(Et.minX,Bt.minX),ke=Math.max(Et.minY,Bt.minY),ze=Math.min(Et.maxX,Bt.maxX),Fe=Math.min(Et.maxY,Bt.maxY),Math.max(0,ze-we)*Math.max(0,Fe-ke)),Tt=wt(ht)+wt(bt);At<Ue?(Ue=At,zt=dt,He=Tt<He?Tt:He):At===Ue&&Tt<He&&(He=Tt,zt=dt)}return zt||mt-ot},H.prototype._chooseSplitAxis=function(nt,ot,mt){var zt=nt.leaf?this.compareMinX:rt,Et=nt.leaf?this.compareMinY:Ge;this._allDistMargin(nt,ot,mt,zt)<this._allDistMargin(nt,ot,mt,Et)&&nt.children.sort(zt)},H.prototype._allDistMargin=function(nt,ot,mt,zt){nt.children.sort(zt);for(var Et=this.toBBox,Bt=be(nt,0,ot,Et),we=be(nt,mt-ot,mt,Et),ke=It(Bt)+It(we),ze=ot;ze<mt-ot;ze++){var Fe=nt.children[ze];Ce(Bt,nt.leaf?Et(Fe):Fe),ke+=It(Bt)}for(var Ue=mt-ot-1;Ue>=ot;Ue--){var He=nt.children[Ue];Ce(we,nt.leaf?Et(He):He),ke+=It(we)}return ke},H.prototype._adjustParentBBoxes=function(nt,ot,mt){for(var zt=mt;zt>=0;zt--)Ce(ot[zt],nt)},H.prototype._condense=function(nt){for(var ot=nt.length-1,mt=void 0;ot>=0;ot--)nt[ot].children.length===0?ot>0?(mt=nt[ot-1].children).splice(mt.indexOf(nt[ot]),1):this.clear():ae(nt[ot],this.toBBox)},H})}),Un=o(d=>{Object.defineProperty(d,"__esModule",{value:!0}),d.earthRadius=63710088e-1,d.factors={centimeters:d.earthRadius*100,centimetres:d.earthRadius*100,degrees:d.earthRadius/111325,feet:d.earthRadius*3.28084,inches:d.earthRadius*39.37,kilometers:d.earthRadius/1e3,kilometres:d.earthRadius/1e3,meters:d.earthRadius,metres:d.earthRadius,miles:d.earthRadius/1609.344,millimeters:d.earthRadius*1e3,millimetres:d.earthRadius*1e3,nauticalmiles:d.earthRadius/1852,radians:1,yards:d.earthRadius*1.0936},d.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/d.earthRadius,yards:1.0936133},d.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function m(Fe,Ue,He){He===void 0&&(He={});var dt={type:"Feature"};return(He.id===0||He.id)&&(dt.id=He.id),He.bbox&&(dt.bbox=He.bbox),dt.properties=Ue||{},dt.geometry=Fe,dt}d.feature=m;function _(Fe,Ue,He){switch(Fe){case"Point":return C(Ue).geometry;case"LineString":return ae(Ue).geometry;case"Polygon":return H(Ue).geometry;case"MultiPoint":return Ge(Ue).geometry;case"MultiLineString":return rt(Ue).geometry;case"MultiPolygon":return wt(Ue).geometry;default:throw new Error(Fe+" is invalid")}}d.geometry=_;function C(Fe,Ue,He){if(He===void 0&&(He={}),!Fe)throw new Error("coordinates is required");if(!Array.isArray(Fe))throw new Error("coordinates must be an Array");if(Fe.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Bt(Fe[0])||!Bt(Fe[1]))throw new Error("coordinates must contain numbers");var dt={type:"Point",coordinates:Fe};return m(dt,Ue,He)}d.point=C;function k(Fe,Ue,He){return He===void 0&&(He={}),Ce(Fe.map(function(dt){return C(dt,Ue)}),He)}d.points=k;function H(Fe,Ue,He){He===void 0&&(He={});for(var dt=0,ht=Fe;dt<ht.length;dt++){var bt=ht[dt];if(bt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var At=0;At<bt[bt.length-1].length;At++)if(bt[bt.length-1][At]!==bt[0][At])throw new Error("First and last Position are not equivalent.")}var Tt={type:"Polygon",coordinates:Fe};return m(Tt,Ue,He)}d.polygon=H;function te(Fe,Ue,He){return He===void 0&&(He={}),Ce(Fe.map(function(dt){return H(dt,Ue)}),He)}d.polygons=te;function ae(Fe,Ue,He){if(He===void 0&&(He={}),Fe.length<2)throw new Error("coordinates must be an array of two or more positions");var dt={type:"LineString",coordinates:Fe};return m(dt,Ue,He)}d.lineString=ae;function be(Fe,Ue,He){return He===void 0&&(He={}),Ce(Fe.map(function(dt){return ae(dt,Ue)}),He)}d.lineStrings=be;function Ce(Fe,Ue){Ue===void 0&&(Ue={});var He={type:"FeatureCollection"};return Ue.id&&(He.id=Ue.id),Ue.bbox&&(He.bbox=Ue.bbox),He.features=Fe,He}d.featureCollection=Ce;function rt(Fe,Ue,He){He===void 0&&(He={});var dt={type:"MultiLineString",coordinates:Fe};return m(dt,Ue,He)}d.multiLineString=rt;function Ge(Fe,Ue,He){He===void 0&&(He={});var dt={type:"MultiPoint",coordinates:Fe};return m(dt,Ue,He)}d.multiPoint=Ge;function wt(Fe,Ue,He){He===void 0&&(He={});var dt={type:"MultiPolygon",coordinates:Fe};return m(dt,Ue,He)}d.multiPolygon=wt;function It(Fe,Ue,He){He===void 0&&(He={});var dt={type:"GeometryCollection",geometries:Fe};return m(dt,Ue,He)}d.geometryCollection=It;function tn(Fe,Ue){if(Ue===void 0&&(Ue=0),Ue&&!(Ue>=0))throw new Error("precision must be a positive number");var He=Math.pow(10,Ue||0);return Math.round(Fe*He)/He}d.round=tn;function _n(Fe,Ue){Ue===void 0&&(Ue="kilometers");var He=d.factors[Ue];if(!He)throw new Error(Ue+" units is invalid");return Fe*He}d.radiansToLength=_n;function Mn(Fe,Ue){Ue===void 0&&(Ue="kilometers");var He=d.factors[Ue];if(!He)throw new Error(Ue+" units is invalid");return Fe/He}d.lengthToRadians=Mn;function yr(Fe,Ue){return ot(Mn(Fe,Ue))}d.lengthToDegrees=yr;function nt(Fe){var Ue=Fe%360;return Ue<0&&(Ue+=360),Ue}d.bearingToAzimuth=nt;function ot(Fe){var Ue=Fe%(2*Math.PI);return Ue*180/Math.PI}d.radiansToDegrees=ot;function mt(Fe){var Ue=Fe%360;return Ue*Math.PI/180}d.degreesToRadians=mt;function zt(Fe,Ue,He){if(Ue===void 0&&(Ue="kilometers"),He===void 0&&(He="kilometers"),!(Fe>=0))throw new Error("length must be a positive number");return _n(Mn(Fe,Ue),He)}d.convertLength=zt;function Et(Fe,Ue,He){if(Ue===void 0&&(Ue="meters"),He===void 0&&(He="kilometers"),!(Fe>=0))throw new Error("area must be a positive number");var dt=d.areaFactors[Ue];if(!dt)throw new Error("invalid original units");var ht=d.areaFactors[He];if(!ht)throw new Error("invalid final units");return Fe/dt*ht}d.convertArea=Et;function Bt(Fe){return!isNaN(Fe)&&Fe!==null&&!Array.isArray(Fe)}d.isNumber=Bt;function we(Fe){return!!Fe&&Fe.constructor===Object}d.isObject=we;function ke(Fe){if(!Fe)throw new Error("bbox is required");if(!Array.isArray(Fe))throw new Error("bbox must be an Array");if(Fe.length!==4&&Fe.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");Fe.forEach(function(Ue){if(!Bt(Ue))throw new Error("bbox must only contain numbers")})}d.validateBBox=ke;function ze(Fe){if(!Fe)throw new Error("id is required");if(["string","number"].indexOf(typeof Fe)===-1)throw new Error("id must be a number or a string")}d.validateId=ze}),Ni=o(d=>{Object.defineProperty(d,"__esModule",{value:!0});var m=Un();function _(ot,mt,zt){if(ot!==null)for(var Et,Bt,we,ke,ze,Fe,Ue,He=0,dt=0,ht,bt=ot.type,At=bt==="FeatureCollection",Tt=bt==="Feature",on=At?ot.features.length:1,Wn=0;Wn<on;Wn++){Ue=At?ot.features[Wn].geometry:Tt?ot.geometry:ot,ht=Ue?Ue.type==="GeometryCollection":!1,ze=ht?Ue.geometries.length:1;for(var Kn=0;Kn<ze;Kn++){var or=0,xi=0;if(ke=ht?Ue.geometries[Kn]:Ue,ke!==null){Fe=ke.coordinates;var ji=ke.type;switch(He=zt&&(ji==="Polygon"||ji==="MultiPolygon")?1:0,ji){case null:break;case"Point":if(mt(Fe,dt,Wn,or,xi)===!1)return!1;dt++,or++;break;case"LineString":case"MultiPoint":for(Et=0;Et<Fe.length;Et++){if(mt(Fe[Et],dt,Wn,or,xi)===!1)return!1;dt++,ji==="MultiPoint"&&or++}ji==="LineString"&&or++;break;case"Polygon":case"MultiLineString":for(Et=0;Et<Fe.length;Et++){for(Bt=0;Bt<Fe[Et].length-He;Bt++){if(mt(Fe[Et][Bt],dt,Wn,or,xi)===!1)return!1;dt++}ji==="MultiLineString"&&or++,ji==="Polygon"&&xi++}ji==="Polygon"&&or++;break;case"MultiPolygon":for(Et=0;Et<Fe.length;Et++){for(xi=0,Bt=0;Bt<Fe[Et].length;Bt++){for(we=0;we<Fe[Et][Bt].length-He;we++){if(mt(Fe[Et][Bt][we],dt,Wn,or,xi)===!1)return!1;dt++}xi++}or++}break;case"GeometryCollection":for(Et=0;Et<ke.geometries.length;Et++)if(_(ke.geometries[Et],mt,zt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function C(ot,mt,zt,Et){var Bt=zt;return _(ot,function(we,ke,ze,Fe,Ue){ke===0&&zt===void 0?Bt=we:Bt=mt(Bt,we,ke,ze,Fe,Ue)},Et),Bt}function k(ot,mt){var zt;switch(ot.type){case"FeatureCollection":for(zt=0;zt<ot.features.length&&mt(ot.features[zt].properties,zt)!==!1;zt++);break;case"Feature":mt(ot.properties,0);break}}function H(ot,mt,zt){var Et=zt;return k(ot,function(Bt,we){we===0&&zt===void 0?Et=Bt:Et=mt(Et,Bt,we)}),Et}function te(ot,mt){if(ot.type==="Feature")mt(ot,0);else if(ot.type==="FeatureCollection")for(var zt=0;zt<ot.features.length&&mt(ot.features[zt],zt)!==!1;zt++);}function ae(ot,mt,zt){var Et=zt;return te(ot,function(Bt,we){we===0&&zt===void 0?Et=Bt:Et=mt(Et,Bt,we)}),Et}function be(ot){var mt=[];return _(ot,function(zt){mt.push(zt)}),mt}function Ce(ot,mt){var zt,Et,Bt,we,ke,ze,Fe,Ue,He,dt,ht=0,bt=ot.type==="FeatureCollection",At=ot.type==="Feature",Tt=bt?ot.features.length:1;for(zt=0;zt<Tt;zt++){for(ze=bt?ot.features[zt].geometry:At?ot.geometry:ot,Ue=bt?ot.features[zt].properties:At?ot.properties:{},He=bt?ot.features[zt].bbox:At?ot.bbox:void 0,dt=bt?ot.features[zt].id:At?ot.id:void 0,Fe=ze?ze.type==="GeometryCollection":!1,ke=Fe?ze.geometries.length:1,Bt=0;Bt<ke;Bt++){if(we=Fe?ze.geometries[Bt]:ze,we===null){if(mt(null,ht,Ue,He,dt)===!1)return!1;continue}switch(we.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(mt(we,ht,Ue,He,dt)===!1)return!1;break}case"GeometryCollection":{for(Et=0;Et<we.geometries.length;Et++)if(mt(we.geometries[Et],ht,Ue,He,dt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ht++}}function rt(ot,mt,zt){var Et=zt;return Ce(ot,function(Bt,we,ke,ze,Fe){we===0&&zt===void 0?Et=Bt:Et=mt(Et,Bt,we,ke,ze,Fe)}),Et}function Ge(ot,mt){Ce(ot,function(zt,Et,Bt,we,ke){var ze=zt===null?null:zt.type;switch(ze){case null:case"Point":case"LineString":case"Polygon":return mt(m.feature(zt,Bt,{bbox:we,id:ke}),Et,0)===!1?!1:void 0}var Fe;switch(ze){case"MultiPoint":Fe="Point";break;case"MultiLineString":Fe="LineString";break;case"MultiPolygon":Fe="Polygon";break}for(var Ue=0;Ue<zt.coordinates.length;Ue++){var He=zt.coordinates[Ue],dt={type:Fe,coordinates:He};if(mt(m.feature(dt,Bt),Et,Ue)===!1)return!1}})}function wt(ot,mt,zt){var Et=zt;return Ge(ot,function(Bt,we,ke){we===0&&ke===0&&zt===void 0?Et=Bt:Et=mt(Et,Bt,we,ke)}),Et}function It(ot,mt){Ge(ot,function(zt,Et,Bt){var we=0;if(zt.geometry){var ke=zt.geometry.type;if(!(ke==="Point"||ke==="MultiPoint")){var ze,Fe=0,Ue=0,He=0;if(_(zt,function(dt,ht,bt,At,Tt){if(ze===void 0||Et>Fe||At>Ue||Tt>He){ze=dt,Fe=Et,Ue=At,He=Tt,we=0;return}var on=m.lineString([ze,dt],zt.properties);if(mt(on,Et,Bt,Tt,we)===!1)return!1;we++,ze=dt})===!1)return!1}}})}function tn(ot,mt,zt){var Et=zt,Bt=!1;return It(ot,function(we,ke,ze,Fe,Ue){Bt===!1&&zt===void 0?Et=we:Et=mt(Et,we,ke,ze,Fe,Ue),Bt=!0}),Et}function _n(ot,mt){if(!ot)throw new Error("geojson is required");Ge(ot,function(zt,Et,Bt){if(zt.geometry!==null){var we=zt.geometry.type,ke=zt.geometry.coordinates;switch(we){case"LineString":if(mt(zt,Et,Bt,0,0)===!1)return!1;break;case"Polygon":for(var ze=0;ze<ke.length;ze++)if(mt(m.lineString(ke[ze],zt.properties),Et,Bt,ze)===!1)return!1;break}}})}function Mn(ot,mt,zt){var Et=zt;return _n(ot,function(Bt,we,ke,ze){we===0&&zt===void 0?Et=Bt:Et=mt(Et,Bt,we,ke,ze)}),Et}function yr(ot,mt){if(mt=mt||{},!m.isObject(mt))throw new Error("options is invalid");var zt=mt.featureIndex||0,Et=mt.multiFeatureIndex||0,Bt=mt.geometryIndex||0,we=mt.segmentIndex||0,ke=mt.properties,ze;switch(ot.type){case"FeatureCollection":zt<0&&(zt=ot.features.length+zt),ke=ke||ot.features[zt].properties,ze=ot.features[zt].geometry;break;case"Feature":ke=ke||ot.properties,ze=ot.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":ze=ot;break;default:throw new Error("geojson is invalid")}if(ze===null)return null;var Fe=ze.coordinates;switch(ze.type){case"Point":case"MultiPoint":return null;case"LineString":return we<0&&(we=Fe.length+we-1),m.lineString([Fe[we],Fe[we+1]],ke,mt);case"Polygon":return Bt<0&&(Bt=Fe.length+Bt),we<0&&(we=Fe[Bt].length+we-1),m.lineString([Fe[Bt][we],Fe[Bt][we+1]],ke,mt);case"MultiLineString":return Et<0&&(Et=Fe.length+Et),we<0&&(we=Fe[Et].length+we-1),m.lineString([Fe[Et][we],Fe[Et][we+1]],ke,mt);case"MultiPolygon":return Et<0&&(Et=Fe.length+Et),Bt<0&&(Bt=Fe[Et].length+Bt),we<0&&(we=Fe[Et][Bt].length-we-1),m.lineString([Fe[Et][Bt][we],Fe[Et][Bt][we+1]],ke,mt)}throw new Error("geojson is invalid")}function nt(ot,mt){if(mt=mt||{},!m.isObject(mt))throw new Error("options is invalid");var zt=mt.featureIndex||0,Et=mt.multiFeatureIndex||0,Bt=mt.geometryIndex||0,we=mt.coordIndex||0,ke=mt.properties,ze;switch(ot.type){case"FeatureCollection":zt<0&&(zt=ot.features.length+zt),ke=ke||ot.features[zt].properties,ze=ot.features[zt].geometry;break;case"Feature":ke=ke||ot.properties,ze=ot.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":ze=ot;break;default:throw new Error("geojson is invalid")}if(ze===null)return null;var Fe=ze.coordinates;switch(ze.type){case"Point":return m.point(Fe,ke,mt);case"MultiPoint":return Et<0&&(Et=Fe.length+Et),m.point(Fe[Et],ke,mt);case"LineString":return we<0&&(we=Fe.length+we),m.point(Fe[we],ke,mt);case"Polygon":return Bt<0&&(Bt=Fe.length+Bt),we<0&&(we=Fe[Bt].length+we),m.point(Fe[Bt][we],ke,mt);case"MultiLineString":return Et<0&&(Et=Fe.length+Et),we<0&&(we=Fe[Et].length+we),m.point(Fe[Et][we],ke,mt);case"MultiPolygon":return Et<0&&(Et=Fe.length+Et),Bt<0&&(Bt=Fe[Et].length+Bt),we<0&&(we=Fe[Et][Bt].length-we),m.point(Fe[Et][Bt][we],ke,mt)}throw new Error("geojson is invalid")}d.coordAll=be,d.coordEach=_,d.coordReduce=C,d.featureEach=te,d.featureReduce=ae,d.findPoint=nt,d.findSegment=yr,d.flattenEach=Ge,d.flattenReduce=wt,d.geomEach=Ce,d.geomReduce=rt,d.lineEach=_n,d.lineReduce=Mn,d.propEach=k,d.propReduce=H,d.segmentEach=It,d.segmentReduce=tn}),kr=o(d=>{Object.defineProperty(d,"__esModule",{value:!0});var m=Ni();function _(C){var k=[1/0,1/0,-1/0,-1/0];return m.coordEach(C,function(H){k[0]>H[0]&&(k[0]=H[0]),k[1]>H[1]&&(k[1]=H[1]),k[2]<H[0]&&(k[2]=H[0]),k[3]<H[1]&&(k[3]=H[1])}),k}_.default=_,d.default=_}),br=o((d,m)=>{var _=ur(),C=Un(),k=Ni(),H=kr().default,te=k.featureEach;k.coordEach,C.polygon;var ae=C.featureCollection;function be(Ce){var rt=new _(Ce);return rt.insert=function(Ge){if(Ge.type!=="Feature")throw new Error("invalid feature");return Ge.bbox=Ge.bbox?Ge.bbox:H(Ge),_.prototype.insert.call(this,Ge)},rt.load=function(Ge){var wt=[];return Array.isArray(Ge)?Ge.forEach(function(It){if(It.type!=="Feature")throw new Error("invalid features");It.bbox=It.bbox?It.bbox:H(It),wt.push(It)}):te(Ge,function(It){if(It.type!=="Feature")throw new Error("invalid features");It.bbox=It.bbox?It.bbox:H(It),wt.push(It)}),_.prototype.load.call(this,wt)},rt.remove=function(Ge,wt){if(Ge.type!=="Feature")throw new Error("invalid feature");return Ge.bbox=Ge.bbox?Ge.bbox:H(Ge),_.prototype.remove.call(this,Ge,wt)},rt.clear=function(){return _.prototype.clear.call(this)},rt.search=function(Ge){var wt=_.prototype.search.call(this,this.toBBox(Ge));return ae(wt)},rt.collides=function(Ge){return _.prototype.collides.call(this,this.toBBox(Ge))},rt.all=function(){var Ge=_.prototype.all.call(this);return ae(Ge)},rt.toJSON=function(){return _.prototype.toJSON.call(this)},rt.fromJSON=function(Ge){return _.prototype.fromJSON.call(this,Ge)},rt.toBBox=function(Ge){var wt;if(Ge.bbox)wt=Ge.bbox;else if(Array.isArray(Ge)&&Ge.length===4)wt=Ge;else if(Array.isArray(Ge)&&Ge.length===6)wt=[Ge[0],Ge[1],Ge[3],Ge[4]];else if(Ge.type==="Feature")wt=H(Ge);else if(Ge.type==="FeatureCollection")wt=H(Ge);else throw new Error("invalid geojson");return{minX:wt[0],minY:wt[1],maxX:wt[2],maxY:wt[3]}},rt}m.exports=be,m.exports.default=be});Array.prototype.findIndex=Array.prototype.findIndex||function(d){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof d!="function")throw new TypeError("callback must be a function");for(var m=Object(this),_=m.length>>>0,C=arguments[1],k=0;k<_;k++)if(d.call(C,m[k],k,m))return k;return-1},Array.prototype.find=Array.prototype.find||function(d){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof d!="function")throw new TypeError("callback must be a function");for(var m=Object(this),_=m.length>>>0,C=arguments[1],k=0;k<_;k++){var H=m[k];if(d.call(C,H,k,m))return H}},typeof Object.assign!="function"&&(Object.assign=function(d){if(d==null)throw new TypeError("Cannot convert undefined or null to object");d=Object(d);for(var m=1;m<arguments.length;m++){var _=arguments[m];if(_!=null)for(var C in _)Object.prototype.hasOwnProperty.call(_,C)&&(d[C]=_[C])}return d}),function(d){d.forEach(function(m){m.hasOwnProperty("remove")||Object.defineProperty(m,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(d,m){if(this==null)throw new TypeError('"this" is null or not defined');var _=Object(this),C=_.length>>>0;if(C===0)return!1;var k=m|0,H=Math.max(k>=0?k:C-Math.abs(k),0);function te(ae,be){return ae===be||typeof ae=="number"&&typeof be=="number"&&isNaN(ae)&&isNaN(be)}for(;H<C;){if(te(_[H],d))return!0;H++}return!1}});var no={version:"2.18.3"},Cr=l(an()),Pn={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},_r={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},bn={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},Ur={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},Ji={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},cs={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},ms={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},Si={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Ps={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},Wr={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},js={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},as={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},ys={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},bi={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Sn={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},pn={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},pi={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},ro={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},Hi={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},lu={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},wl={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},vr={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},Mr={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},Gr={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},qr={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},io={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},so={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},oo=ys,zo={en:Pn,de:_r,it:bn,id:Ur,ro:Ji,ru:cs,es:ms,nl:Si,fr:Ps,pt:oo,pt_br:as,pt_pt:ys,zh:Wr,zh_tw:js,pl:bi,sv:Sn,el:pn,hu:pi,da:ro,no:Hi,fa:lu,ua:wl,tr:vr,cz:Mr,ja:Gr,fi:qr,ko:io,ky:so},_a={_globalEditModeEnabled:!1,enableGlobalEditMode(d){let m={...d};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(_=>{this._isRelevantForEdit(_)&&_.pm.enable(m)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(d=>{d.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(d=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(d)},handleLayerAdditionInGlobalEditMode(){let d=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let m in d){let _=d[m];this._isRelevantForEdit(_)&&_.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:d}){this._addedLayersEdit[L.stamp(d)]=d},_isRelevantForEdit(d){return d.pm&&!(d instanceof L.LayerGroup)&&(!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1)&&!d._pmTempLayer&&d.pm.options.allowEditing}},uu=_a,Da={_globalDragModeEnabled:!1,enableGlobalDragMode(){let d=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},d.forEach(m=>{this._isRelevantForDrag(m)&&m.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let d=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,d.forEach(m=>{m.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let d=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let m in d){let _=d[m];this._isRelevantForDrag(_)&&_.pm.enableLayerDrag()}},_layerAddedDrag({layer:d}){this._addedLayersDrag[L.stamp(d)]=d},_isRelevantForDrag(d){return d.pm&&!(d instanceof L.LayerGroup)&&(!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1)&&!d._pmTempLayer&&d.pm.options.draggable}},Lr=Da,jr={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(d=>{this._isRelevantForRemoval(d)&&(d.pm.enabled()&&d.pm.disable(),d.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(d=>{d.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(d){let m=d.target;this._isRelevantForRemoval(m)&&!m.pm.dragging()&&(m.removeFrom(this.map.pm._getContainingLayer()),m.remove(),m instanceof L.LayerGroup?(this._fireRemoveLayerGroup(m),this._fireRemoveLayerGroup(this.map,m)):(m.pm._fireRemove(m),m.pm._fireRemove(this.map,m)))},_isRelevantForRemoval(d){return d.pm&&!(d instanceof L.LayerGroup)&&(!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1)&&!d._pmTempLayer&&d.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let d=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let m in d){let _=d[m];this._isRelevantForRemoval(_)&&(_.pm.enabled()&&_.pm.disable(),_.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:d}){this._addedLayersRemoval[L.stamp(d)]=d}},Na=jr,Ri={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(d=>d instanceof L.Polyline).forEach(d=>{this._isRelevantForRotate(d)&&d.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(d=>d instanceof L.Polyline).forEach(d=>{d.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(d){return d.pm&&d instanceof L.Polyline&&!(d instanceof L.LayerGroup)&&(!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1)&&!d._pmTempLayer&&d.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let d=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let m in d){let _=d[m];this._isRelevantForRemoval(_)&&_.pm.enableRotate()}},_layerAddedRotate({layer:d}){this._addedLayersRotate[L.stamp(d)]=d}},$o=Ri,Ws=l(an()),Il={_fireDrawStart(d="Draw",m={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},d,m)},_fireDrawEnd(d="Draw",m={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},d,m)},_fireCreate(d,m="Draw",_={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:d,layer:d},m,_)},_fireCenterPlaced(d="Draw",m={}){let _=d==="Draw"?this._layer:void 0,C=d!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:_,layer:C,latlng:this._layer.getLatLng()},d,m)},_fireCut(d,m,_,C="Draw",k={}){this.__fire(d,"pm:cut",{shape:this._shape,layer:m,originalLayer:_},C,k)},_fireEdit(d=this._layer,m="Edit",_={}){this.__fire(d,"pm:edit",{layer:this._layer,shape:this.getShape()},m,_)},_fireEnable(d="Edit",m={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},d,m)},_fireDisable(d="Edit",m={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},d,m)},_fireUpdate(d="Edit",m={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},d,m)},_fireMarkerDragStart(d,m=void 0,_="Edit",C={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:d,shape:this.getShape(),indexPath:m},_,C)},_fireMarkerDrag(d,m=void 0,_="Edit",C={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:d,shape:this.getShape(),indexPath:m},_,C)},_fireMarkerDragEnd(d,m=void 0,_=void 0,C="Edit",k={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:d,shape:this.getShape(),indexPath:m,intersectionReset:_},C,k)},_fireDragStart(d="Edit",m={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},d,m)},_fireDrag(d,m="Edit",_={}){this.__fire(this._layer,"pm:drag",{...d,shape:this.getShape()},m,_)},_fireDragEnd(d="Edit",m={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},d,m)},_fireDragEnable(d="Edit",m={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},d,m)},_fireDragDisable(d="Edit",m={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},d,m)},_fireRemove(d,m=d,_="Edit",C={}){this.__fire(d,"pm:remove",{layer:m,shape:this.getShape()},_,C)},_fireVertexAdded(d,m,_,C="Edit",k={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:d,indexPath:m,latlng:_,shape:this.getShape()},C,k)},_fireVertexRemoved(d,m,_="Edit",C={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:d,indexPath:m,shape:this.getShape()},_,C)},_fireVertexClick(d,m,_="Edit",C={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:d,indexPath:m,shape:this.getShape()},_,C)},_fireIntersect(d,m=this._layer,_="Edit",C={}){this.__fire(m,"pm:intersect",{layer:this._layer,intersection:d,shape:this.getShape()},_,C)},_fireLayerReset(d,m,_="Edit",C={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:d,indexPath:m,shape:this.getShape()},_,C)},_fireChange(d,m="Edit",_={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:d,shape:this.getShape()},m,_)},_fireTextChange(d,m="Edit",_={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:d,shape:this.getShape()},m,_)},_fireTextFocus(d="Edit",m={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},d,m)},_fireTextBlur(d="Edit",m={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},d,m)},_fireSnapDrag(d,m,_="Snapping",C={}){this.__fire(d,"pm:snapdrag",m,_,C)},_fireSnap(d,m,_="Snapping",C={}){this.__fire(d,"pm:snap",m,_,C)},_fireUnsnap(d,m,_="Snapping",C={}){this.__fire(d,"pm:unsnap",m,_,C)},_fireRotationEnable(d,m,_="Rotation",C={}){this.__fire(d,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},_,C)},_fireRotationDisable(d,m="Rotation",_={}){this.__fire(d,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},m,_)},_fireRotationStart(d,m,_="Rotation",C={}){this.__fire(d,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:m},_,C)},_fireRotation(d,m,_,C=this._rotationLayer,k="Rotation",H={}){this.__fire(d,"pm:rotate",{layer:C,helpLayer:this._layer,startAngle:this._startAngle,angle:C.pm.getAngle(),angleDiff:m,oldLatLngs:_,newLatLngs:C.getLatLngs()},k,H)},_fireRotationEnd(d,m,_,C="Rotation",k={}){this.__fire(d,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:m,angle:this._rotationLayer.pm.getAngle(),originLatLngs:_,newLatLngs:this._rotationLayer.getLatLngs()},C,k)},_fireActionClick(d,m,_,C="Toolbar",k={}){this.__fire(this._map,"pm:actionclick",{text:d.text,action:d,btnName:m,button:_},C,k)},_fireButtonClick(d,m,_="Toolbar",C={}){this.__fire(this._map,"pm:buttonclick",{btnName:d,button:m},_,C)},_fireLangChange(d,m,_,C,k="Global",H={}){this.__fire(this.map,"pm:langchange",{oldLang:d,activeLang:m,fallback:_,translations:C},k,H)},_fireGlobalDragModeToggled(d,m="Global",_={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:d,map:this.map},m,_)},_fireGlobalEditModeToggled(d,m="Global",_={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:d,map:this.map},m,_)},_fireGlobalRemovalModeToggled(d,m="Global",_={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:d,map:this.map},m,_)},_fireGlobalCutModeToggled(d="Global",m={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},d,m)},_fireGlobalDrawModeToggled(d="Global",m={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},d,m)},_fireGlobalRotateModeToggled(d="Global",m={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},d,m)},_fireRemoveLayerGroup(d,m=d,_="Edit",C={}){this.__fire(d,"pm:remove",{layer:m,shape:void 0},_,C)},_fireKeyeventEvent(d,m,_,C="Global",k={}){this.__fire(this.map,"pm:keyevent",{event:d,eventType:m,focusOn:_},C,k)},__fire(d,m,_,C,k={}){_=(0,Ws.default)(_,k,{source:C}),L.PM.Utils._fireEvent(d,m,_)}},cu=Il,Au=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(d){this.map=d,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),d.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(d){let m="document";this.map.getContainer().contains(d.target)&&(m="map");let _={event:d,eventType:d.type,focusOn:m};this._lastEvents[d.type]=_,this._lastEvents.current=_,this.map.pm._fireKeyeventEvent(d,d.type,m)},_onBlur(d){d.altKey=!1;let m={event:d,eventType:d.type,focusOn:"document"};this._lastEvents[d.type]=m,this._lastEvents.current=m},getLastKeyEvent(d="current"){return this._lastEvents[d]},isShiftKeyPressed(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.shiftKey},isAltKeyPressed(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.altKey},isCtrlKeyPressed(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.ctrlKey},isMetaKeyPressed(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.metaKey},getPressedKey(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.key}}),oi=Au,bs=l(Vr());function hr(d){let m=L.PM.activeLang;return(0,bs.default)(zo[m],d)||(0,bs.default)(zo.en,d)||d}function _s(d){for(let m=0;m<d.length;m+=1){let _=d[m];if(Array.isArray(_)){if(_s(_))return!0}else if(_!=null&&_!=="")return!0}return!1}function Bl(d){return d.reduce((m,_)=>{if(_.length!==0){let C=Array.isArray(_)?Bl(_):_;Array.isArray(C)?C.length!==0&&m.push(C):m.push(C)}return m},[])}function Ka(d,m,_){let C={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:k,b:H,f:te}=C,ae=d.lng,be=d.lat,Ce=_,rt=Math.PI,Ge=m*rt/180,wt=Math.sin(Ge),It=Math.cos(Ge),tn=(1-te)*Math.tan(be*rt/180),_n=1/Math.sqrt(1+tn*tn),Mn=tn*_n,yr=Math.atan2(tn,It),nt=_n*wt,ot=1-nt*nt,mt=ot*(k*k-H*H)/(H*H),zt=1+mt/16384*(4096+mt*(-768+mt*(320-175*mt))),Et=mt/1024*(256+mt*(-128+mt*(74-47*mt))),Bt=Ce/(H*zt),we=2*Math.PI,ke,ze,Fe;for(;Math.abs(Bt-we)>1e-12;){ke=Math.cos(2*yr+Bt),ze=Math.sin(Bt),Fe=Math.cos(Bt);let on=Et*ze*(ke+Et/4*(Fe*(-1+2*ke*ke)-Et/6*ke*(-3+4*ze*ze)*(-3+4*ke*ke)));we=Bt,Bt=Ce/(H*zt)+on}let Ue=Mn*ze-_n*Fe*It,He=Math.atan2(Mn*Fe+_n*ze*It,(1-te)*Math.sqrt(nt*nt+Ue*Ue)),dt=Math.atan2(ze*wt,_n*Fe-Mn*ze*It),ht=te/16*ot*(4+te*(4-3*ot)),bt=dt-(1-ht)*te*nt*(Bt+ht*ze*(ke+ht*Fe*(-1+2*ke*ke))),At=ae+bt*180/rt,Tt=He*180/rt;return L.latLng(At,Tt)}function Qi(d,m,_,C,k=!0){let H,te,ae,be=[];for(let Ce=0;Ce<_;Ce+=1){if(k)H=Ce*360/_+C,te=Ka(d,H,m),ae=L.latLng(te.lng,te.lat);else{let rt=d.lat+Math.cos(2*Ce*Math.PI/_)*m,Ge=d.lng+Math.sin(2*Ce*Math.PI/_)*m;ae=L.latLng(rt,Ge)}be.push(ae)}return be}function Tu(d,m,_){m=(m+360)%360;let C=Math.PI/180,k=180/Math.PI,{R:H}=L.CRS.Earth,te=d.lng*C,ae=d.lat*C,be=m*C,Ce=Math.sin(ae),rt=Math.cos(ae),Ge=Math.cos(_/H),wt=Math.sin(_/H),It=Math.asin(Ce*Ge+rt*wt*Math.cos(be)),tn=te+Math.atan2(Math.sin(be)*wt*rt,Ge-Ce*Math.sin(It));tn*=k;let _n=tn-360,Mn=tn<-180?tn+360:tn;return tn=tn>180?_n:Mn,L.latLng([It*k,tn])}function Oa(d,m,_){let C=d.latLngToContainerPoint(m),k=d.latLngToContainerPoint(_),H=Math.atan2(k.y-C.y,k.x-C.x)*180/Math.PI+90;return H+=H<0?360:0,H}function du(d,m,_,C){let k=Oa(d,m,_);return Tu(m,k,C)}function hu(d,m,_="asc"){if(!m||Object.keys(m).length===0)return(be,Ce)=>be-Ce;let C=Object.keys(m),k,H=C.length-1,te={};for(;H>=0;)k=C[H],te[k.toLowerCase()]=m[k],H-=1;function ae(be){if(be instanceof L.Marker)return"Marker";if(be instanceof L.Circle)return"Circle";if(be instanceof L.CircleMarker)return"CircleMarker";if(be instanceof L.Rectangle)return"Rectangle";if(be instanceof L.Polygon)return"Polygon";if(be instanceof L.Polyline)return"Line"}return(be,Ce)=>{let rt,Ge;if(rt=ae(be.layer).toLowerCase(),Ge=ae(Ce.layer).toLowerCase(),!rt||!Ge)return 0;let wt=rt in te?te[rt]:Number.MAX_SAFE_INTEGER,It=Ge in te?te[Ge]:Number.MAX_SAFE_INTEGER,tn=0;return wt<It?tn=-1:wt>It&&(tn=1),_==="desc"?tn*-1:tn}}function da(d,m=d.getLatLngs()){return d instanceof L.Polygon?L.polygon(m).getLatLngs():L.polyline(m).getLatLngs()}function fu(d,m){var _,C,k,H;if((C=(_=m.options.crs)==null?void 0:_.projection)!=null&&C.MAX_LATITUDE){let te=(H=(k=m.options.crs)==null?void 0:k.projection)==null?void 0:H.MAX_LATITUDE;d.lat=Math.max(Math.min(te,d.lat),-te)}return d}function Ci(d){return d.options.renderer||d._map&&(d._map._getPaneRenderer(d.options.pane)||d._map.options.renderer||d._map._renderer)||d._renderer}var kc=L.Class.extend({includes:[uu,Lr,Na,$o,cu],initialize(d){this.map=d,this.Draw=new L.PM.Draw(d),this.Toolbar=new L.PM.Toolbar(d),this.Keyboard=oi(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(d)},setLang(d="en",m,_="en"){if(d=d.trim().toLowerCase(),!/^[a-z]{2}$/.test(d)){let k=d.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(k){let H=[`${k[1]}_${k[2]}`,`${k[1]}`];for(let te of H)if(zo[te]){d=te;break}}}let C=L.PM.activeLang;m&&(zo[d]=(0,Cr.default)(zo[_],m)),L.PM.activeLang=d,this.map.pm.Toolbar.reinit(),this._fireLangChange(C,d,_,zo[d])},addControls(d){this.Toolbar.addControls(d)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(d="Polygon",m){d==="Poly"&&(d="Polygon"),this.Draw.enable(d,m)},disableDraw(d="Polygon"){d==="Poly"&&(d="Polygon"),this.Draw.disable(d)},setPathOptions(d,m={}){let _=m.ignoreShapes||[],C=m.merge||!1;this.map.pm.Draw.shapes.forEach(k=>{_.indexOf(k)===-1&&this.map.pm.Draw[k].setPathOptions(d,C)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(d){let m=(0,Cr.default)(this.globalOptions,d);m.editable&&(m.resizeableCircleMarker=m.editable,delete m.editable);let _=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!m.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),_=!0);let C=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!m.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),C=!0),this.map.pm.Draw.shapes.forEach(k=>{this.map.pm.Draw[k].setOptions(m)}),_&&this.map.pm.Draw.CircleMarker.enable(),C&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(k=>{k.pm.setOptions(m)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=m,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(d=>{d.pm.enabled()&&d.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(d){return this.Draw.Cut.enable(d)},toggleGlobalCutMode(d){return this.Draw.Cut.toggle(d)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(d=!1){let m=L.PM.Utils.findLayers(this.map);if(!d)return m;let _=L.featureGroup();return _._pmTempLayer=!0,m.forEach(C=>{_.addLayer(C)}),_},getGeomanDrawLayers(d=!1){let m=L.PM.Utils.findLayers(this.map).filter(C=>C._drawnByGeoman===!0);if(!d)return m;let _=L.featureGroup();return _._pmTempLayer=!0,m.forEach(C=>{_.addLayer(C)}),_},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(d){this._touchEventCounter===0&&(L.DomEvent.on(d,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(d,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(d){this._touchEventCounter===1&&(L.DomEvent.off(d,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(d,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(d){Ci(this.map)._onMouseMove(this._createMouseEvent("mousemove",d))},_canvasTouchClick(d){let m="";d.type==="touchstart"||d.type==="pointerdown"?m="mousedown":(d.type==="touchend"||d.type==="pointerup"||d.type==="touchcancel"||d.type==="pointercancel")&&(m="mouseup"),m&&Ci(this.map)._onClick(this._createMouseEvent(m,d))},_createMouseEvent(d,m){let _,C=m.touches[0]||m.changedTouches[0];try{_=new MouseEvent(d,{bubbles:m.bubbles,cancelable:m.cancelable,view:m.view,detail:C.detail,screenX:C.screenX,screenY:C.screenY,clientX:C.clientX,clientY:C.clientY,ctrlKey:m.ctrlKey,altKey:m.altKey,shiftKey:m.shiftKey,metaKey:m.metaKey,button:m.button,relatedTarget:m.relatedTarget})}catch{_=document.createEvent("MouseEvents"),_.initMouseEvent(d,m.bubbles,m.cancelable,m.view,C.detail,C.screenX,C.screenY,C.clientX,C.clientY,m.ctrlKey,m.altKey,m.shiftKey,m.metaKey,m.button,m.relatedTarget)}return _}}),Gs=kc,wa=L.Control.extend({includes:[cu],options:{position:"topleft",disableByOtherButtons:!0},initialize(d){this._button=L.Util.extend({},this.options,d)},onAdd(d){return this._map=d,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let d=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),d?d.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(d){return typeof d=="boolean"?this._button.toggleStatus=d:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(d){d&&d.preventDefault(),!this._button.disabled&&(this._button.onClick(d,{button:this,event:d}),this._clicked(d),this._button.afterClick(d,{button:this,event:d}))},_makeButton(d){let m=this.options.position.indexOf("right")>-1?"pos-right":"",_=L.DomUtil.create("div",`button-container  ${m}`,this._container);d.title&&_.setAttribute("title",d.title);let C=L.DomUtil.create("a","leaflet-buttons-control-button",_);C.setAttribute("role","button"),C.setAttribute("tabindex","0"),C.href="#";let k=L.DomUtil.create("div",`leaflet-pm-actions-container ${m}`,_),H=d.actions,te={cancel:{text:hr("actions.cancel"),title:hr("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:hr("actions.finish"),title:hr("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:hr("actions.removeLastVertex"),title:hr("actions.removeLastVertex"),onClick(){this._map.pm.Draw[d.jsClass]._removeLastVertex()}},finish:{text:hr("actions.finish"),title:hr("actions.finish"),onClick(be){this._map.pm.Draw[d.jsClass]._finishShape(be)}}};d._preparedActions=H.map(be=>{let Ce=typeof be=="string"?be:be.name,rt;if(te[Ce])rt=te[Ce];else if(be.text)rt=be;else return rt;let Ge=L.DomUtil.create("a",`leaflet-pm-action ${m} action-${Ce}`,k);if(Ge.setAttribute("role","button"),Ge.setAttribute("tabindex","0"),Ge.href="#",rt.title&&(Ge.title=rt.title),Ge.innerHTML=rt.text,L.DomEvent.disableClickPropagation(Ge),L.DomEvent.on(Ge,"click",L.DomEvent.stop),rt._node=Ge,!d.disabled&&rt.onClick){let wt=It=>{It.preventDefault();let tn="",{buttons:_n}=this._map.pm.Toolbar;for(let Mn in _n)if(_n[Mn]._button===d){tn=Mn;break}this._fireActionClick(rt,tn,d)};L.DomEvent.addListener(Ge,"click",wt,this),L.DomEvent.addListener(Ge,"click",rt.onClick,this),L.DomEvent.addListener(Ge,"click",()=>this._updateActiveAction(d))}return rt}),this._updateActiveAction(d),d.toggleStatus&&L.DomUtil.addClass(_,"active");let ae=L.DomUtil.create("div","control-icon",C);return d.iconUrl&&ae.setAttribute("src",d.iconUrl),d.className&&L.DomUtil.addClass(ae,d.className),L.DomEvent.disableClickPropagation(C),L.DomEvent.on(C,"click",L.DomEvent.stop),d.disabled||(L.DomEvent.addListener(C,"click",this._onBtnClick,this),L.DomEvent.addListener(C,"click",this._triggerClick,this)),d.disabled&&(L.DomUtil.addClass(C,"pm-disabled"),C.setAttribute("aria-disabled","true")),_},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let d="",{buttons:m}=this._map.pm.Toolbar;for(let _ in m)if(m[_]._button===this._button){d=_;break}this._fireButtonClick(d,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let d="pm-disabled",m=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(m,d),m.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(m,d),m.setAttribute("aria-disabled","false"))},_updateActiveAction(d){var m;(m=d._preparedActions)==null||m.forEach(_=>{_!=null&&_._node&&(_.isActive&&_.isActive.call(this)?L.DomUtil.addClass(_._node,"active-action"):L.DomUtil.removeClass(_._node,"active-action"))})}}),pu=wa;L.Control.PMButton=pu;var xa=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(d){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(d)},reinit(){let d=this.isVisible;this.removeControls(),this._defineButtons(),d&&this.addControls()},init(d){this.map=d,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(d){let m=`${d}Container`;return this[m]||(this[m]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${d} leaflet-bar leaflet-control`)),this[m]},getButtons(){return this.buttons},addControls(d=this.options){typeof d.editPolygon<"u"&&(d.editMode=d.editPolygon),typeof d.deleteLayer<"u"&&(d.removalMode=d.deleteLayer),L.Util.setOptions(this,d),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let d=this.getButtons(),m={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let _ in d){let C=d[_];L.Util.setOptions(C,{className:m.geomanIcons[_]})}},removeControls(){let d=this.getButtons();for(let m in d)d[m].remove();this.isVisible=!1},toggleControls(d=this.options){this.isVisible?this.removeControls():this.addControls(d)},_addButton(d,m){return this.buttons[d]=m,this.options[d]=!!this.options[d]||!1,this.buttons[d]},triggerClickOnToggledButtons(d){for(let m in this.buttons){let _=this.buttons[m];_._button.disableByOtherButtons&&_!==d&&_.toggled()&&_._triggerClick()}},toggleButton(d,m,_=!0){d==="editPolygon"&&(d="editMode"),d==="deleteLayer"&&(d="removalMode");let C=d;return _&&this.triggerClickOnToggledButtons(this.buttons[C]),this.buttons[C]?this.buttons[C].toggle(m):!1},_defineButtons(){let d={className:"control-icon leaflet-pm-icon-marker",title:hr("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},m={title:hr("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},_={className:"control-icon leaflet-pm-icon-polyline",title:hr("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},C={title:hr("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},k={title:hr("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},H={title:hr("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},te={title:hr("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ae={title:hr("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},be={title:hr("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Ce={title:hr("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},rt={title:hr("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Ge={className:"control-icon leaflet-pm-icon-text",title:hr("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(d)),this._addButton("drawPolyline",new L.Control.PMButton(_)),this._addButton("drawRectangle",new L.Control.PMButton(H)),this._addButton("drawPolygon",new L.Control.PMButton(m)),this._addButton("drawCircle",new L.Control.PMButton(C)),this._addButton("drawCircleMarker",new L.Control.PMButton(k)),this._addButton("drawText",new L.Control.PMButton(Ge)),this._addButton("editMode",new L.Control.PMButton(te)),this._addButton("dragMode",new L.Control.PMButton(ae)),this._addButton("cutPolygon",new L.Control.PMButton(be)),this._addButton("removalMode",new L.Control.PMButton(Ce)),this._addButton("rotateMode",new L.Control.PMButton(rt))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let d=this.getButtons(),m=[];this.options.drawControls===!1&&(m=m.concat(Object.keys(d).filter(_=>!d[_]._button.tool))),this.options.editControls===!1&&(m=m.concat(Object.keys(d).filter(_=>d[_]._button.tool==="edit"))),this.options.optionsControls===!1&&(m=m.concat(Object.keys(d).filter(_=>d[_]._button.tool==="options"))),this.options.customControls===!1&&(m=m.concat(Object.keys(d).filter(_=>d[_]._button.tool==="custom")));for(let _ in d)if(this.options[_]&&m.indexOf(_)===-1){let C=d[_]._button.tool;C||(C="draw"),d[_].setPosition(this._getBtnPosition(C)),d[_].addTo(this.map)}},_getBtnPosition(d){return this.options.positions&&this.options.positions[d]?this.options.positions[d]:this.options.position},setBlockPosition(d,m){this.options.positions[d]=m,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(d,m){if(m)typeof m!="object"&&(m={name:m});else throw new TypeError("Button has no name");let _=this._btnNameMapping(d);if(!m.name)throw new TypeError("Button has no name");if(this.buttons[m.name])throw new TypeError("Button with this name already exists");let C=this.map.pm.Draw.createNewDrawInstance(m.name,_);m={...this.buttons[_]._button,...m};let k=this.createCustomControl(m);return{drawInstance:C,control:k}},createCustomControl(d){if(!d.name)throw new TypeError("Button has no name");if(this.buttons[d.name])throw new TypeError("Button with this name already exists");d.onClick||(d.onClick=()=>{}),d.afterClick||(d.afterClick=()=>{}),d.toggle!==!1&&(d.toggle=!0),d.block&&(d.block=d.block.toLowerCase()),(!d.block||d.block==="draw")&&(d.block=""),d.className?d.className.indexOf("control-icon")===-1&&(d.className=`control-icon ${d.className}`):d.className="control-icon";let m={tool:d.block,className:d.className,title:d.title||"",jsClass:d.name,onClick:d.onClick,afterClick:d.afterClick,doToggle:d.toggle,toggleStatus:!1,disableOtherButtons:d.disableOtherButtons??!0,disableByOtherButtons:d.disableByOtherButtons??!0,cssToggle:d.toggle,position:this.options.position,actions:d.actions||[],disabled:!!d.disabled};this.options[d.name]!==!1&&(this.options[d.name]=!0);let _=this._addButton(d.name,new L.Control.PMButton(m));return this.changeControlOrder(),_},controlExists(d){return!!this.getButton(d)},getButton(d){return this.getButtons()[d]},getButtonsInBlock(d){let m={};if(d)for(let _ in this.getButtons()){let C=this.getButtons()[_];(C._button.tool===d||d==="draw"&&!C._button.tool)&&(m[_]=C)}return m},changeControlOrder(d=[]){let m=this._shapeMapping(),_=[];d.forEach(H=>{m[H]?_.push(m[H]):_.push(H)});let C=this.getButtons(),k={};_.forEach(H=>{C[H]&&(k[H]=C[H])}),Object.keys(C).filter(H=>!C[H]._button.tool||C[H]._button.tool==="draw").forEach(H=>{_.indexOf(H)===-1&&(k[H]=C[H])}),Object.keys(C).filter(H=>C[H]._button.tool==="edit").forEach(H=>{_.indexOf(H)===-1&&(k[H]=C[H])}),Object.keys(C).filter(H=>C[H]._button.tool==="options").forEach(H=>{_.indexOf(H)===-1&&(k[H]=C[H])}),Object.keys(C).filter(H=>C[H]._button.tool==="custom").forEach(H=>{_.indexOf(H)===-1&&(k[H]=C[H])}),Object.keys(C).forEach(H=>{_.indexOf(H)===-1&&(k[H]=C[H])}),this.map.pm.Toolbar.buttons=k,this._showHideButtons()},getControlOrder(){let d=this.getButtons(),m=[];for(let _ in d)m.push(_);return m},changeActionsOfControl(d,m){let _=this._btnNameMapping(d);if(!_)throw new TypeError("No name passed");if(!m)throw new TypeError("No actions passed");if(!this.buttons[_])throw new TypeError("Button with this name not exists");this.buttons[_]._button.actions=m,this.changeControlOrder()},setButtonDisabled(d,m){let _=this._btnNameMapping(d);m?this.buttons[_].disable():this.buttons[_].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(d){let m=this._shapeMapping();return m[d]?m[d]:d}}),Rl=xa,Fl=l(an()),Ei={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(d){d.forEach(m=>{if(Array.isArray(m)){this._assignEvents(m);return}m.off("drag",this._handleSnapping,this),m.on("drag",this._handleSnapping,this),m.off("dragend",this._cleanupSnapping,this),m.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(d){if(d){let m=d.target;m._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(m=>{m.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(d){var ae,be,Ce;let m=d.target;if(m._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((ae=d==null?void 0:d.originalEvent)==null?void 0:ae.altKey)||((Ce=(be=this._map)==null?void 0:be.pm)==null?void 0:Ce.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let _=this._calcClosestLayer(m.getLatLng(),this._snapList);if(Object.keys(_).length===0)return!1;let C=_.layer instanceof L.Marker||_.layer instanceof L.CircleMarker||!this.options.snapSegment,k;C?k=_.latlng:k=this._checkPrioritiySnapping(_);let H=this.options.snapDistance,te={marker:m,shape:this._shape,snapLatLng:k,segment:_.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:_.layer,distance:_.distance};if(this._fireSnapDrag(te.marker,te),this._fireSnapDrag(this._layer,te),_.distance<H){m._orgLatLng=m.getLatLng(),m.setLatLng(k),m._snapped=!0,m._snapInfo=te;let rt=()=>{this._snapLatLng=k,this._fireSnap(m,te),this._fireSnap(this._layer,te)},Ge=this._snapLatLng||{},wt=k||{};(Ge.lat!==wt.lat||Ge.lng!==wt.lng)&&rt()}else this._snapLatLng&&(this._unsnap(te),m._snapped=!1,m._snapInfo=void 0,this._fireUnsnap(te.marker,te),this._fireUnsnap(this._layer,te));return!0},_createSnapList(){let d=[],m=[],_=this._map;_.off("layerremove",this._handleSnapLayerRemoval,this),_.on("layerremove",this._handleSnapLayerRemoval,this),_.eachLayer(C=>{if((C instanceof L.Polyline||C instanceof L.Marker||C instanceof L.CircleMarker||C instanceof L.ImageOverlay)&&C.options.snapIgnore!==!0){if(C.options.snapIgnore===void 0&&(!L.PM.optIn&&C.options.pmIgnore===!0||L.PM.optIn&&C.options.pmIgnore!==!1))return;(C instanceof L.Circle||C instanceof L.CircleMarker)&&C.pm&&C.pm._hiddenPolyCircle?d.push(C.pm._hiddenPolyCircle):C instanceof L.ImageOverlay&&(C=L.rectangle(C.getBounds())),d.push(C);let k=L.polyline([],{color:"red",pmIgnore:!0});k._pmTempLayer=!0,m.push(k),(C instanceof L.Circle||C instanceof L.CircleMarker)&&m.push(k)}}),d=d.filter(C=>this._layer!==C),d=d.filter(C=>C._latlng||C._latlngs&&_s(C._latlngs)),d=d.filter(C=>!C._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let C=L.polyline([],{color:"red",pmIgnore:!0});C._pmTempLayer=!0,m.push(C)}),this._snapList=d.concat(this._otherSnapLayers)):this._snapList=d,this.debugIndicatorLines=m},_handleSnapLayerRemoval({layer:d}){if(!d._leaflet_id)return;let m=this._snapList.findIndex(_=>_._leaflet_id===d._leaflet_id);m>-1&&this._snapList.splice(m,1)},_calcClosestLayer(d,m){return this._calcClosestLayers(d,m,1)[0]},_calcClosestLayers(d,m,_=1){let C=[],k={};m.forEach((te,ae)=>{var Ce;if(te._parentCopy&&te._parentCopy===this._layer||((Ce=te.getLatLngs)==null?void 0:Ce.call(te).flat(5).length)<2)return;let be=this._calcLayerDistances(d,te);if(be.distance=Math.floor(be.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[ae]){let rt=L.polyline([],{color:"red",pmIgnore:!0});rt._pmTempLayer=!0,this.debugIndicatorLines[ae]=rt}this.debugIndicatorLines[ae].setLatLngs([d,be.latlng])}_===1&&(k.distance===void 0||be.distance-5<=k.distance)?(be.distance+5<k.distance&&(C=[]),k=be,k.layer=te,C.push(k)):_!==1&&(k={},k=be,k.layer=te,C.push(k))}),_!==1&&(C=C.sort((te,ae)=>te.distance-ae.distance)),_===-1&&(_=C.length);let H=this._getClosestLayerByPriority(C,_);return L.Util.isArray(H)?H:[H]},_calcLayerDistances(d,m){let _=this._map,C=m instanceof L.Marker||m instanceof L.CircleMarker,k=m instanceof L.Polygon,H=d;if(C){let te=m.getLatLng();return{latlng:{...te},distance:this._getDistance(_,te,H)}}return this._calcLatLngDistances(H,m.getLatLngs(),_,k)},_calcLatLngDistances(d,m,_,C=!1){let k,H,te,ae=be=>{be.forEach((Ce,rt)=>{if(Array.isArray(Ce)){ae(Ce);return}if(this.options.snapSegment){let Ge=Ce,wt;C?wt=rt+1===be.length?0:rt+1:wt=rt+1===be.length?void 0:rt+1;let It=be[wt];if(It){let tn=this._getDistanceToSegment(_,d,Ge,It);(H===void 0||tn<H)&&(H=tn,te=[Ge,It])}}else{let Ge=this._getDistance(_,d,Ce);(H===void 0||Ge<H)&&(H=Ge,k=Ce)}})};return ae(m),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(_,d,te[0],te[1])},segment:te,distance:H}:{latlng:k,distance:H}},_getClosestLayerByPriority(d,m=1){d=d.sort((te,ae)=>te._leaflet_id-ae._leaflet_id);let _=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],C=this._map.pm.globalOptions.snappingOrder||[],k=0,H={};return C.concat(_).forEach(te=>{H[te]||(k+=1,H[te]=k)}),d.sort(hu("instanceofShape",H)),m===1?d[0]||{}:d.slice(0,m)},_checkPrioritiySnapping(d){let m=this._map,_=d.segment[0],C=d.segment[1],k=d.latlng,H=k;if(this.options.snapVertex){let te=this._getDistance(m,_,k),ae=this._getDistance(m,C,k),be=te<ae?_:C,Ce=te<ae?te:ae;if(this.options.snapMiddle){let Ge=L.PM.Utils.calcMiddleLatLng(m,_,C),wt=this._getDistance(m,Ge,k);wt<te&&wt<ae&&(be=Ge,Ce=wt)}let rt=this.options.snapDistance;Ce<rt&&(H=be)}return{...H}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(d,m,_,C){let k=d.getMaxZoom();k===1/0&&(k=d.getZoom());let H=d.project(m,k),te=d.project(_,k),ae=d.project(C,k),be=L.LineUtil.closestPointOnSegment(H,te,ae);return d.unproject(be,k)},_getDistanceToSegment(d,m,_,C){let k=d.latLngToContainerPoint(m),H=d.latLngToContainerPoint(_),te=d.latLngToContainerPoint(C);return L.LineUtil.pointToSegmentDistance(k,H,te)},_getDistance(d,m,_){return d.latLngToContainerPoint(m).distanceTo(d.latLngToContainerPoint(_))}},ra=Ei,Za=L.Class.extend({includes:[ra,cu],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(d){L.Util.setOptions(this,d),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(d){let m=new L.Icon.Default;m.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=m,this._map=d,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(_=>{this[_]=new L.PM.Draw[_](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(d,m=!1){m?this.options.pathOptions=(0,Fl.default)(this.options.pathOptions,d):this.options.pathOptions=d},getShapes(){return this.shapes},getShape(){return this._shape},enable(d,m){if(!d)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[d].enable(m)},disable(){this.shapes.forEach(d=>{this[d].disable()})},addControls(){this.shapes.forEach(d=>{this[d].addButton()})},getActiveShape(){let d;return this.shapes.forEach(m=>{this[m]._enabled&&(d=m)}),d},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let d=[];this._map.eachLayer(m=>{(m instanceof L.Polyline||m instanceof L.Marker||m instanceof L.Circle||m instanceof L.CircleMarker||m instanceof L.ImageOverlay)&&(m._pmTempLayer||d.push(m))}),this._enabled?d.forEach(m=>{L.PM.Utils.disablePopup(m)}):d.forEach(m=>{L.PM.Utils.enablePopup(m)})},createNewDrawInstance(d,m){let _=this._getShapeFromBtnName(m);if(this[d])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[_])throw new TypeError(`There is no class L.PM.Draw.${_}`);return this[d]=new L.PM.Draw[_](this._map),this[d].toolbarButtonName=d,this[d]._shape=d,this.shapes.push(d),this[m]&&this[d].setOptions(this[m].options),this[d].setOptions(this[d].options),this[d]},_getShapeFromBtnName(d){let m={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return m[d]?m[d]:this[d]?this[d]._shape:d},_finishLayer(d){d.pm&&(d.pm.setOptions(this.options),d.pm._shape=this._shape,d.pm._map=this._map),this._addDrawnLayerProp(d)},_addDrawnLayerProp(d){d._drawnByGeoman=!0},_setPane(d,m){m==="layerPane"?d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":m==="vertexPane"?d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":m==="markerPane"&&(d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),ws=Za;ws.Marker=ws.extend({initialize(d){this._map=d,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(d){L.Util.setOptions(this,d),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(hr("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(m=>{this.isRelevantMarker(m)&&m.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(d=>{this.isRelevantMarker(d)&&d.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},isRelevantMarker(d){return d instanceof L.Marker&&d.pm&&!d._pmTempLayer&&!d.pm._initTextMarker},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this.options.snappable){let m=d;m.target=this._hintMarker,this._handleSnapping(m)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(d){if(!d.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let m=this._hintMarker.getLatLng(),_=new L.Marker(m,this.options.markerStyle);this._setPane(_,"markerPane"),this._finishLayer(_),_.pm||(_.options.draggable=!1),_.addTo(this._map.pm._getContainingLayer()),_.pm&&this.options.markerEditable?_.pm.enable():_.dragging&&_.dragging.disable(),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var d,m;(d=this.options.markerStyle)!=null&&d.icon&&((m=this._hintMarker)==null||m.setIcon(this.options.markerStyle.icon))}});var F=63710088e-1,xe={centimeters:F*100,centimetres:F*100,degrees:F/111325,feet:F*3.28084,inches:F*39.37,kilometers:F/1e3,kilometres:F/1e3,meters:F,metres:F,miles:F/1609.344,millimeters:F*1e3,millimetres:F*1e3,nauticalmiles:F/1852,radians:1,yards:F*1.0936};function tt(d,m,_){_===void 0&&(_={});var C={type:"Feature"};return(_.id===0||_.id)&&(C.id=_.id),_.bbox&&(C.bbox=_.bbox),C.properties=m||{},C.geometry=d,C}function ft(d,m,_){if(_===void 0&&(_={}),!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Er(d[0])||!Er(d[1]))throw new Error("coordinates must contain numbers");var C={type:"Point",coordinates:d};return tt(C,m,_)}function Mt(d,m,_){if(_===void 0&&(_={}),d.length<2)throw new Error("coordinates must be an array of two or more positions");var C={type:"LineString",coordinates:d};return tt(C,m,_)}function Ht(d,m){m===void 0&&(m={});var _={type:"FeatureCollection"};return m.id&&(_.id=m.id),m.bbox&&(_.bbox=m.bbox),_.features=d,_}function hn(d,m){m===void 0&&(m="kilometers");var _=xe[m];if(!_)throw new Error(m+" units is invalid");return d*_}function Fn(d,m){m===void 0&&(m="kilometers");var _=xe[m];if(!_)throw new Error(m+" units is invalid");return d/_}function Hn(d){var m=d%(2*Math.PI);return m*180/Math.PI}function cr(d){var m=d%360;return m*Math.PI/180}function Er(d){return!isNaN(d)&&d!==null&&!Array.isArray(d)}function Yr(d){var m,_,C={type:"FeatureCollection",features:[]};if(d.type==="Feature"?_=d.geometry:_=d,_.type==="LineString")m=[_.coordinates];else if(_.type==="MultiLineString")m=_.coordinates;else if(_.type==="MultiPolygon")m=[].concat.apply([],_.coordinates);else if(_.type==="Polygon")m=_.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return m.forEach(function(k){m.forEach(function(H){for(var te=0;te<k.length-1;te++)for(var ae=te;ae<H.length-1;ae++)if(!(k===H&&(Math.abs(te-ae)===1||te===0&&ae===k.length-2&&k[te][0]===k[k.length-1][0]&&k[te][1]===k[k.length-1][1]))){var be=Yi(k[te][0],k[te][1],k[te+1][0],k[te+1][1],H[ae][0],H[ae][1],H[ae+1][0],H[ae+1][1]);be&&C.features.push(ft([be[0],be[1]]))}})}),C}function Yi(d,m,_,C,k,H,te,ae){var be,Ce,rt,Ge,wt,It={x:null,y:null,onLine1:!1,onLine2:!1};return be=(ae-H)*(_-d)-(te-k)*(C-m),be===0?It.x!==null&&It.y!==null?It:!1:(Ce=m-H,rt=d-k,Ge=(te-k)*Ce-(ae-H)*rt,wt=(_-d)*Ce-(C-m)*rt,Ce=Ge/be,rt=wt/be,It.x=d+Ce*(_-d),It.y=m+Ce*(C-m),Ce>=0&&Ce<=1&&(It.onLine1=!0),rt>=0&&rt<=1&&(It.onLine2=!0),It.onLine1&&It.onLine2?[It.x,It.y]:!1)}ws.Line=ws.extend({initialize(d){this._map=d,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(d){L.Util.setOptions(this,d),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(hr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},_syncHintLine(){let d=this._layer.getLatLngs();if(d.length>0){let m=d[d.length-1];this._hintline.setLatLngs([m,this._hintMarker.getLatLng()])}},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this.options.snappable){let _=d;_.target=this._hintMarker,this._handleSnapping(_)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let m=this._layer._defaultShape().slice();m.push(this._hintMarker.getLatLng()),this._change(m)},hasSelfIntersection(){return Yr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(d,m){let _=L.polyline(this._layer.getLatLngs());d&&(m||(m=this._hintMarker.getLatLng()),_.addLatLng(m));let C=Yr(_.toGeoJSON(15));this._doesSelfIntersect=C.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(C,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(d){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,d.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let m=this._hintMarker.getLatLng(),_=this._layer.getLatLngs(),C=_[_.length-1];if(m.equals(_[0])||_.length>0&&m.equals(C)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:m,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(m);let k=this._createMarker(m);this._setTooltipText(),this._setHintLineAfterNewVertex(m),this._fireVertexAdded(k,void 0,m,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(d)},_setHintLineAfterNewVertex(d){this._hintline.setLatLngs([d,d])},_removeLastVertex(){let d=this._markers;if(d.length<=1){this.disable();return}let m=this._layer.getLatLngs(),_=d[d.length-1],{indexPath:C}=L.PM.Utils.findDeepMarkerIndex(d,_);d.pop(),this._layerGroup.removeLayer(_);let k=d[d.length-1],H=m.indexOf(k.getLatLng());m=m.slice(0,H+1),this._layer.setLatLngs(m),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(_,C,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let d=this._layer.getLatLngs();if(d.length<=1)return;let m=L.polyline(d,this.options.pathOptions);this._setPane(m,"layerPane"),this._finishLayer(m),m.addTo(this._map.pm._getContainingLayer()),this._fireCreate(m),this.options.snappable&&this._cleanupSnapping();let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},_createMarker(d){let m=new L.Marker(d,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(m,"vertexPane"),m._pmTempLayer=!0,this._layerGroup.addLayer(m),this._markers.push(m),m.on("click",this._finishShape,this),m},_setTooltipText(){let{length:d}=this._layer.getLatLngs().flat(),m="";d<=1?m=hr("tooltips.continueLine"):m=hr("tooltips.finishLine"),this._hintMarker.setTooltipContent(m)},_change(d){this._fireChange(d,"Draw")},setStyle(){var d,m;(d=this._layer)==null||d.setStyle(this.options.templineStyle),(m=this._hintline)==null||m.setStyle(this.options.hintlineStyle)}}),ws.Polygon=ws.Line.extend({initialize(d){this._map=d,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(d){L.PM.Draw.Line.prototype.enable.call(this,d),this._layer.pm._shape="Polygon"},_createMarker(d){let m=new L.Marker(d,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(m,"vertexPane"),m._pmTempLayer=!0,this._layerGroup.addLayer(m),this._markers.push(m),this._layer.getLatLngs().flat().length===1?(m.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(m)-1,this.options.snappable&&this._cleanupSnapping()):m.on("click",()=>1),m},_setTooltipText(){let{length:d}=this._layer.getLatLngs().flat(),m="";d<=2?m=hr("tooltips.continueLine"):m=hr("tooltips.finishPoly"),this._hintMarker.setTooltipContent(m)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let d=this._layer.getLatLngs();if(d.length<=2)return;let m=L.polygon(d,this.options.pathOptions);this._setPane(m,"layerPane"),this._finishLayer(m),m.addTo(this._map.pm._getContainingLayer()),this._fireCreate(m),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))}}),ws.Rectangle=ws.extend({initialize(d){this._map=d,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(d){if(L.Util.setOptions(this,d),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(hr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let m=0;m<2;m+=1){let _=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(_,"vertexPane"),_._pmTempLayer=!0,this._layerGroup.addLayer(_),this._styleMarkers.push(_)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},_placeStartingMarkers(d){this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let m=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(m),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(_=>{L.DomUtil.addClass(_._icon,"visible"),_.setLatLng(m)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(hr("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let d=this._startMarker.getLatLng();d&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([d,d]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this.options.snappable){let _=d;_.target=this._hintMarker,this._handleSnapping(_)}let m=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(m,"Draw")},_syncRectangleSize(){let d=fu(this._startMarker.getLatLng(),this._map),m=fu(this._hintMarker.getLatLng(),this._map),_=L.PM.Utils._getRotatedRectangle(d,m,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(_),this.options.cursorMarker&&this._styleMarkers){let C=[];_.forEach(k=>{!k.equals(d,1e-8)&&!k.equals(m,1e-8)&&C.push(k)}),C.forEach((k,H)=>{try{this._styleMarkers[H].setLatLng(k)}catch{}})}},_findCorners(){let d=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(d[0],d[2],this.options.rectangleAngle||0,this._map)},_finishShape(d){this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let m=this._hintMarker.getLatLng(),_=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||_.equals(m))return;let C=L.rectangle([_,m],this.options.pathOptions);if(this.options.rectangleAngle){let H=L.PM.Utils._getRotatedRectangle(_,m,this.options.rectangleAngle||0,this._map);C.setLatLngs(H),C.pm&&C.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(C,"layerPane"),this._finishLayer(C),C.addTo(this._map.pm._getContainingLayer()),this._fireCreate(C);let k=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(k))},setStyle(){var d;(d=this._layer)==null||d.setStyle(this.options.pathOptions)}}),ws.CircleMarker=ws.extend({initialize(d){this._map=d,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(d){if(L.Util.setOptions(this,d),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let m={};L.extend(m,this.options.templineStyle),m.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),m),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(hr("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(hr("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(d=>{this.isRelevantMarker(d)&&d.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(d=>{this.isRelevantMarker(d)&&d.pm.disable()})},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},_placeCenterMarker(d){this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let m=this._hintMarker.getLatLng();this._centerMarker.setLatLng(m),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let d=this._centerMarker.getLatLng();d&&(this._layer.setLatLng(d),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(hr("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let d=this._centerMarker.getLatLng(),m=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([d,m])},_syncCircleRadius(){let d=this._centerMarker.getLatLng(),m=this._hintMarker.getLatLng(),_=this._distanceCalculation(d,m);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_)},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let _=d;_.target=this._hintMarker,this._handleSnapping(_)}this._handleHintMarkerSnapping();let m=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(m,"Draw")},isRelevantMarker(d){return d instanceof L.CircleMarker&&!(d instanceof L.Circle)&&d.pm&&!d._pmTempLayer},_createMarker(d){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!d.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let m=this._hintMarker.getLatLng(),_=new this._BaseCircleClass(m,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(_,"layerPane"),this._finishLayer(_),_.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(_),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(d){d.pm&&this.options.markerEditable&&d.pm.enable()},_finishShape(d){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let m=this._centerMarker.getLatLng(),_=this._defaultRadius;if(this.options[this._editableOption]){let te=this._hintMarker.getLatLng();_=this._distanceCalculation(m,te),this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?_=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(_=this.options[this._maxRadiusOption])}let C={...this.options.pathOptions,radius:_},k=new this._BaseCircleClass(m,C);this._setPane(k,"layerPane"),this._finishLayer(k),k.addTo(this._map.pm._getContainingLayer()),k.pm&&k.pm._updateHiddenPolyCircle(),this._fireCreate(k);let H=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(H))},_getNewDestinationOfHintMarker(){let d=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return d;let m=this._centerMarker.getLatLng(),_=this._distanceCalculation(m,d);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?d=du(this._map,m,d,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(d=du(this._map,m,d,this._getMaxDistanceInMeter()))}return d},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let d=this._centerMarker.getLatLng(),m=this._hintMarker.getLatLng(),_=this._distanceCalculation(d,m);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var m,_;let d={};L.extend(d,this.options.templineStyle),this.options[this._editableOption]&&(d.radius=0),(m=this._layer)==null||m.setStyle(d),(_=this._hintline)==null||_.setStyle(this.options.hintlineStyle)},_distanceCalculation(d,m){return this._map.project(d).distanceTo(this._map.project(m))}}),ws.Circle=ws.CircleMarker.extend({initialize(d){this._map=d,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(d,m){return this._map.distance(d,m)}});function _i(d){if(!d)throw new Error("coord is required");if(!Array.isArray(d)){if(d.type==="Feature"&&d.geometry!==null&&d.geometry.type==="Point")return d.geometry.coordinates;if(d.type==="Point")return d.coordinates}if(Array.isArray(d)&&d.length>=2&&!Array.isArray(d[0])&&!Array.isArray(d[1]))return d;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Pi(d){if(Array.isArray(d))return d;if(d.type==="Feature"){if(d.geometry!==null)return d.geometry.coordinates}else if(d.coordinates)return d.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function xs(d){return d.type==="Feature"?d.geometry:d}function Ms(d,m){return d.type==="FeatureCollection"?"FeatureCollection":d.type==="GeometryCollection"?"GeometryCollection":d.type==="Feature"&&d.geometry!==null?d.geometry.type:d.type}function ia(d,m,_){if(d!==null)for(var C,k,H,te,ae,be,Ce,rt=0,Ge=0,wt,It=d.type,tn=It==="FeatureCollection",_n=It==="Feature",Mn=tn?d.features.length:1,yr=0;yr<Mn;yr++){Ce=tn?d.features[yr].geometry:_n?d.geometry:d,wt=Ce?Ce.type==="GeometryCollection":!1,ae=wt?Ce.geometries.length:1;for(var nt=0;nt<ae;nt++){var ot=0,mt=0;if(te=wt?Ce.geometries[nt]:Ce,te!==null){be=te.coordinates;var zt=te.type;switch(rt=0,zt){case null:break;case"Point":if(m(be,Ge,yr,ot,mt)===!1)return!1;Ge++,ot++;break;case"LineString":case"MultiPoint":for(C=0;C<be.length;C++){if(m(be[C],Ge,yr,ot,mt)===!1)return!1;Ge++,zt==="MultiPoint"&&ot++}zt==="LineString"&&ot++;break;case"Polygon":case"MultiLineString":for(C=0;C<be.length;C++){for(k=0;k<be[C].length-rt;k++){if(m(be[C][k],Ge,yr,ot,mt)===!1)return!1;Ge++}zt==="MultiLineString"&&ot++,zt==="Polygon"&&mt++}zt==="Polygon"&&ot++;break;case"MultiPolygon":for(C=0;C<be.length;C++){for(mt=0,k=0;k<be[C].length;k++){for(H=0;H<be[C][k].length-rt;H++){if(m(be[C][k][H],Ge,yr,ot,mt)===!1)return!1;Ge++}mt++}ot++}break;case"GeometryCollection":for(C=0;C<te.geometries.length;C++)if(ia(te.geometries[C],m)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Kr(d,m){if(d.type==="Feature")m(d,0);else if(d.type==="FeatureCollection")for(var _=0;_<d.features.length&&m(d.features[_],_)!==!1;_++);}function ao(d,m,_){var C=_;return Kr(d,function(k,H){H===0&&_===void 0?C=k:C=m(C,k,H)}),C}function jl(d,m){var _,C,k,H,te,ae,be,Ce,rt,Ge,wt=0,It=d.type==="FeatureCollection",tn=d.type==="Feature",_n=It?d.features.length:1;for(_=0;_<_n;_++){for(ae=It?d.features[_].geometry:tn?d.geometry:d,Ce=It?d.features[_].properties:tn?d.properties:{},rt=It?d.features[_].bbox:tn?d.bbox:void 0,Ge=It?d.features[_].id:tn?d.id:void 0,be=ae?ae.type==="GeometryCollection":!1,te=be?ae.geometries.length:1,k=0;k<te;k++){if(H=be?ae.geometries[k]:ae,H===null){if(m(null,wt,Ce,rt,Ge)===!1)return!1;continue}switch(H.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(m(H,wt,Ce,rt,Ge)===!1)return!1;break}case"GeometryCollection":{for(C=0;C<H.geometries.length;C++)if(m(H.geometries[C],wt,Ce,rt,Ge)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}wt++}}function So(d,m){jl(d,function(_,C,k,H,te){var ae=_===null?null:_.type;switch(ae){case null:case"Point":case"LineString":case"Polygon":return m(tt(_,k,{bbox:H,id:te}),C,0)===!1?!1:void 0}var be;switch(ae){case"MultiPoint":be="Point";break;case"MultiLineString":be="LineString";break;case"MultiPolygon":be="Polygon";break}for(var Ce=0;Ce<_.coordinates.length;Ce++){var rt=_.coordinates[Ce],Ge={type:be,coordinates:rt};if(m(tt(Ge,k),C,Ce)===!1)return!1}})}function Du(d){if(!d)throw new Error("geojson is required");var m=[];return So(d,function(_){Ia(_,m)}),Ht(m)}function Ia(d,m){var _=[],C=d.geometry;if(C!==null){switch(C.type){case"Polygon":_=Pi(C);break;case"LineString":_=[Pi(C)]}_.forEach(function(k){var H=Qu(k,d.properties);H.forEach(function(te){te.id=m.length,m.push(te)})})}}function Qu(d,m){var _=[];return d.reduce(function(C,k){var H=Mt([C,k],m);return H.bbox=xl(C,k),_.push(H),k}),_}function xl(d,m){var _=d[0],C=d[1],k=m[0],H=m[1],te=_<k?_:k,ae=C<H?C:H,be=_>k?_:k,Ce=C>H?C:H;return[te,ae,be,Ce]}var Ll=Du,ks=l(br(),1);function Ba(d,m){var _={},C=[];if(d.type==="LineString"&&(d=tt(d)),m.type==="LineString"&&(m=tt(m)),d.type==="Feature"&&m.type==="Feature"&&d.geometry!==null&&m.geometry!==null&&d.geometry.type==="LineString"&&m.geometry.type==="LineString"&&d.geometry.coordinates.length===2&&m.geometry.coordinates.length===2){var k=sa(d,m);return k&&C.push(k),Ht(C)}var H=(0,ks.default)();return H.load(Ll(m)),Kr(Ll(d),function(te){Kr(H.search(te),function(ae){var be=sa(te,ae);if(be){var Ce=Pi(be).join(",");_[Ce]||(_[Ce]=!0,C.push(be))}})}),Ht(C)}function sa(d,m){var _=Pi(d),C=Pi(m);if(_.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(C.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var k=_[0][0],H=_[0][1],te=_[1][0],ae=_[1][1],be=C[0][0],Ce=C[0][1],rt=C[1][0],Ge=C[1][1],wt=(Ge-Ce)*(te-k)-(rt-be)*(ae-H),It=(rt-be)*(H-Ce)-(Ge-Ce)*(k-be),tn=(te-k)*(H-Ce)-(ae-H)*(k-be);if(wt===0)return null;var _n=It/wt,Mn=tn/wt;if(_n>=0&&_n<=1&&Mn>=0&&Mn<=1){var yr=k+_n*(te-k),nt=H+_n*(ae-H);return ft([yr,nt])}return null}var Vo=Ba,zl=l(br(),1);function lo(d,m,_){_===void 0&&(_={});var C=_i(d),k=_i(m),H=cr(k[1]-C[1]),te=cr(k[0]-C[0]),ae=cr(C[1]),be=cr(k[1]),Ce=Math.pow(Math.sin(H/2),2)+Math.pow(Math.sin(te/2),2)*Math.cos(ae)*Math.cos(be);return hn(2*Math.atan2(Math.sqrt(Ce),Math.sqrt(1-Ce)),_.units)}var Co=lo;function Eo(d){var m=d[0],_=d[1],C=d[2],k=d[3],H=Co(d.slice(0,2),[C,_]),te=Co(d.slice(0,2),[m,k]);if(H>=te){var ae=(_+k)/2;return[m,ae-(C-m)/2,C,ae+(C-m)/2]}else{var be=(m+C)/2;return[be-(k-_)/2,_,be+(k-_)/2,k]}}var Ac=Eo;function zs(d){var m=[1/0,1/0,-1/0,-1/0];return ia(d,function(_){m[0]>_[0]&&(m[0]=_[0]),m[1]>_[1]&&(m[1]=_[1]),m[2]<_[0]&&(m[2]=_[0]),m[3]<_[1]&&(m[3]=_[1])}),m}zs.default=zs;var Xa=zs;function uo(d,m){m===void 0&&(m={});var _=m.precision,C=m.coordinates,k=m.mutate;if(_=_==null||isNaN(_)?6:_,C=C==null||isNaN(C)?3:C,!d)throw new Error("<geojson> is required");if(typeof _!="number")throw new Error("<precision> must be a number");if(typeof C!="number")throw new Error("<coordinates> must be a number");(k===!1||k===void 0)&&(d=JSON.parse(JSON.stringify(d)));var H=Math.pow(10,_);return ia(d,function(te){co(te,H,C)}),d}function co(d,m,_){d.length>_&&d.splice(_,d.length);for(var C=0;C<d.length;C++)d[C]=Math.round(d[C]*m)/m;return d}var Ja=uo;function Qa(d,m,_){if(_===void 0&&(_={}),_.final===!0)return ho(d,m);var C=_i(d),k=_i(m),H=cr(C[0]),te=cr(k[0]),ae=cr(C[1]),be=cr(k[1]),Ce=Math.sin(te-H)*Math.cos(be),rt=Math.cos(ae)*Math.sin(be)-Math.sin(ae)*Math.cos(be)*Math.cos(te-H);return Hn(Math.atan2(Ce,rt))}function ho(d,m){var _=Qa(m,d);return _=(_+180)%360,_}function qs(d,m,_,C){C===void 0&&(C={});var k=_i(d),H=cr(k[0]),te=cr(k[1]),ae=cr(_),be=Fn(m,C.units),Ce=Math.asin(Math.sin(te)*Math.cos(be)+Math.cos(te)*Math.sin(be)*Math.cos(ae)),rt=H+Math.atan2(Math.sin(ae)*Math.sin(be)*Math.cos(te),Math.cos(be)-Math.sin(te)*Math.sin(Ce)),Ge=Hn(rt),wt=Hn(Ce);return ft([Ge,wt],C.properties)}function Ra(d,m,_){_===void 0&&(_={});var C=ft([1/0,1/0],{dist:1/0}),k=0;return So(d,function(H){for(var te=Pi(H),ae=0;ae<te.length-1;ae++){var be=ft(te[ae]);be.properties.dist=Co(m,be,_);var Ce=ft(te[ae+1]);Ce.properties.dist=Co(m,Ce,_);var rt=Co(be,Ce,_),Ge=Math.max(be.properties.dist,Ce.properties.dist),wt=Qa(be,Ce),It=qs(m,Ge,wt+90,_),tn=qs(m,Ge,wt-90,_),_n=Vo(Mt([It.geometry.coordinates,tn.geometry.coordinates]),Mt([be.geometry.coordinates,Ce.geometry.coordinates])),Mn=null;_n.features.length>0&&(Mn=_n.features[0],Mn.properties.dist=Co(m,Mn,_),Mn.properties.location=k+Co(be,Mn,_)),be.properties.dist<C.properties.dist&&(C=be,C.properties.index=ae,C.properties.location=k),Ce.properties.dist<C.properties.dist&&(C=Ce,C.properties.index=ae+1,C.properties.location=k+rt),Mn&&Mn.properties.dist<C.properties.dist&&(C=Mn,C.properties.index=ae),k+=rt}}),C}var oa=Ra;function fo(d,m){if(!d)throw new Error("line is required");if(!m)throw new Error("splitter is required");var _=Ms(d),C=Ms(m);if(_!=="LineString")throw new Error("line must be LineString");if(C==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(C==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var k=Ja(m,{precision:7});switch(C){case"Point":return Yt(d,k);case"MultiPoint":return St(d,k);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return St(d,Vo(d,k))}}function St(d,m){var _=[],C=(0,zl.default)();return So(m,function(k){if(_.forEach(function(ae,be){ae.id=be}),!_.length)_=Yt(d,k).features,_.forEach(function(ae){ae.bbox||(ae.bbox=Ac(Xa(ae)))}),C.load(Ht(_));else{var H=C.search(k);if(H.features.length){var te=Ot(k,H);_=_.filter(function(ae){return ae.id!==te.id}),C.remove(te),Kr(Yt(te,k),function(ae){_.push(ae),C.insert(ae)})}}}),Ht(_)}function Yt(d,m){var _=[],C=Pi(d)[0],k=Pi(d)[d.geometry.coordinates.length-1];if(Bn(C,_i(m))||Bn(k,_i(m)))return Ht([d]);var H=(0,zl.default)(),te=Ll(d);H.load(te);var ae=H.search(m);if(!ae.features.length)return Ht([d]);var be=Ot(m,ae),Ce=[C],rt=ao(te,function(Ge,wt,It){var tn=Pi(wt)[1],_n=_i(m);return It===be.id?(Ge.push(_n),_.push(Mt(Ge)),Bn(_n,tn)?[_n]:[_n,tn]):(Ge.push(tn),Ge)},Ce);return rt.length>1&&_.push(Mt(rt)),Ht(_)}function Ot(d,m){if(!m.features.length)throw new Error("lines must contain features");if(m.features.length===1)return m.features[0];var _,C=1/0;return Kr(m,function(k){var H=oa(k,d),te=H.properties.dist;te<C&&(_=k,C=te)}),_}function Bn(d,m){return d[0]===m[0]&&d[1]===m[1]}var nr=fo;function Ar(d,m,_){if(_===void 0&&(_={}),!d)throw new Error("point is required");if(!m)throw new Error("polygon is required");var C=_i(d),k=xs(m),H=k.type,te=m.bbox,ae=k.coordinates;if(te&&Mi(C,te)===!1)return!1;H==="Polygon"&&(ae=[ae]);for(var be=!1,Ce=0;Ce<ae.length&&!be;Ce++)if(es(C,ae[Ce][0],_.ignoreBoundary)){for(var rt=!1,Ge=1;Ge<ae[Ce].length&&!rt;)es(C,ae[Ce][Ge],!_.ignoreBoundary)&&(rt=!0),Ge++;rt||(be=!0)}return be}function es(d,m,_){var C=!1;m[0][0]===m[m.length-1][0]&&m[0][1]===m[m.length-1][1]&&(m=m.slice(0,m.length-1));for(var k=0,H=m.length-1;k<m.length;H=k++){var te=m[k][0],ae=m[k][1],be=m[H][0],Ce=m[H][1],rt=d[1]*(te-be)+ae*(be-d[0])+Ce*(d[0]-te)===0&&(te-d[0])*(be-d[0])<=0&&(ae-d[1])*(Ce-d[1])<=0;if(rt)return!_;var Ge=ae>d[1]!=Ce>d[1]&&d[0]<(be-te)*(d[1]-ae)/(Ce-ae)+te;Ge&&(C=!C)}return C}function Mi(d,m){return m[0]<=d[0]&&m[1]<=d[1]&&m[2]>=d[0]&&m[3]>=d[1]}function gu(d,m,_){_===void 0&&(_={});for(var C=_i(d),k=Pi(m),H=0;H<k.length-1;H++){var te=!1;if(_.ignoreEndVertices&&(H===0&&(te="start"),H===k.length-2&&(te="end"),H===0&&H+1===k.length-1&&(te="both")),Po(k[H],k[H+1],C,te,typeof _.epsilon>"u"?null:_.epsilon))return!0}return!1}function Po(d,m,_,C,k){var H=_[0],te=_[1],ae=d[0],be=d[1],Ce=m[0],rt=m[1],Ge=_[0]-ae,wt=_[1]-be,It=Ce-ae,tn=rt-be,_n=Ge*tn-wt*It;if(k!==null){if(Math.abs(_n)>k)return!1}else if(_n!==0)return!1;if(C){if(C==="start")return Math.abs(It)>=Math.abs(tn)?It>0?ae<H&&H<=Ce:Ce<=H&&H<ae:tn>0?be<te&&te<=rt:rt<=te&&te<be;if(C==="end")return Math.abs(It)>=Math.abs(tn)?It>0?ae<=H&&H<Ce:Ce<H&&H<=ae:tn>0?be<=te&&te<rt:rt<te&&te<=be;if(C==="both")return Math.abs(It)>=Math.abs(tn)?It>0?ae<H&&H<Ce:Ce<H&&H<ae:tn>0?be<te&&te<rt:rt<te&&te<be}else return Math.abs(It)>=Math.abs(tn)?It>0?ae<=H&&H<=Ce:Ce<=H&&H<=ae:tn>0?be<=te&&te<=rt:rt<=te&&te<=be;return!1}var ts=gu;function Fa(d,m){var _=xs(d),C=xs(m),k=_.type,H=C.type,te=_.coordinates,ae=C.coordinates;switch(k){case"Point":switch(H){case"Point":return Fi(te,ae);default:throw new Error("feature2 "+H+" geometry not supported")}case"MultiPoint":switch(H){case"Point":return el(_,C);case"MultiPoint":return ja(_,C);default:throw new Error("feature2 "+H+" geometry not supported")}case"LineString":switch(H){case"Point":return ts(C,_,{ignoreEndVertices:!0});case"LineString":return ai(_,C);case"MultiPoint":return za(_,C);default:throw new Error("feature2 "+H+" geometry not supported")}case"Polygon":switch(H){case"Point":return Ar(C,_,{ignoreBoundary:!0});case"LineString":return La(_,C);case"Polygon":return Ys(_,C);case"MultiPoint":return $a(_,C);default:throw new Error("feature2 "+H+" geometry not supported")}default:throw new Error("feature1 "+k+" geometry not supported")}}function el(d,m){var _,C=!1;for(_=0;_<d.coordinates.length;_++)if(Fi(d.coordinates[_],m.coordinates)){C=!0;break}return C}function ja(d,m){for(var _=0,C=m.coordinates;_<C.length;_++){for(var k=C[_],H=!1,te=0,ae=d.coordinates;te<ae.length;te++){var be=ae[te];if(Fi(k,be)){H=!0;break}}if(!H)return!1}return!0}function za(d,m){for(var _=!1,C=0,k=m.coordinates;C<k.length;C++){var H=k[C];if(ts(H,d,{ignoreEndVertices:!0})&&(_=!0),!ts(H,d))return!1}return!!_}function $a(d,m){for(var _=0,C=m.coordinates;_<C.length;_++){var k=C[_];if(!Ar(k,d,{ignoreBoundary:!0}))return!1}return!0}function ai(d,m){for(var _=!1,C=0,k=m.coordinates;C<k.length;C++){var H=k[C];if(ts({type:"Point",coordinates:H},d,{ignoreEndVertices:!0})&&(_=!0),!ts({type:"Point",coordinates:H},d,{ignoreEndVertices:!1}))return!1}return _}function La(d,m){var _=!1,C=0,k=Xa(d),H=Xa(m);if(!ki(k,H))return!1;for(C;C<m.coordinates.length-1;C++){var te=Ls(m.coordinates[C],m.coordinates[C+1]);if(Ar({type:"Point",coordinates:te},d,{ignoreBoundary:!0})){_=!0;break}}return _}function Ys(d,m){if(d.type==="Feature"&&d.geometry===null||m.type==="Feature"&&m.geometry===null)return!1;var _=Xa(d),C=Xa(m);if(!ki(_,C))return!1;for(var k=xs(m).coordinates,H=0,te=k;H<te.length;H++)for(var ae=te[H],be=0,Ce=ae;be<Ce.length;be++){var rt=Ce[be];if(!Ar(rt,d))return!1}return!0}function ki(d,m){return!(d[0]>m[0]||d[2]<m[2]||d[1]>m[1]||d[3]<m[3])}function Fi(d,m){return d[0]===m[0]&&d[1]===m[1]}function Ls(d,m){return[(d[0]+m[0])/2,(d[1]+m[1])/2]}var Wi=l(Vr()),aa=d=>()=>d,Uo=d=>{let m=d?(_,C)=>C.minus(_).abs().isLessThanOrEqualTo(d):aa(!1);return(_,C)=>m(_,C)?0:_.comparedTo(C)};function ha(d){let m=d?(_,C,k,H,te)=>_.exponentiatedBy(2).isLessThanOrEqualTo(H.minus(C).exponentiatedBy(2).plus(te.minus(k).exponentiatedBy(2)).times(d)):aa(!1);return(_,C,k)=>{let H=_.x,te=_.y,ae=k.x,be=k.y,Ce=te.minus(be).times(C.x.minus(ae)).minus(H.minus(ae).times(C.y.minus(be)));return m(Ce,H,te,ae,be)?0:Ce.comparedTo(0)}}var ec=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Va=Math.ceil,As=Math.floor,Ui="[BigNumber Error] ",po=Ui+"Number primitive has more than 15 significant digits: ",Ho=1e14,wr=14,tl=9007199254740991,nl=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Sa=1e7,Mo=1e9;function sd(d){var m,_,C,k=nt.prototype={constructor:nt,toString:null,valueOf:null},H=new nt(1),te=20,ae=4,be=-7,Ce=21,rt=-1e7,Ge=1e7,wt=!1,It=1,tn=0,_n={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Mn="0123456789abcdefghijklmnopqrstuvwxyz",yr=!0;function nt(we,ke){var ze,Fe,Ue,He,dt,ht,bt,At,Tt=this;if(!(Tt instanceof nt))return new nt(we,ke);if(ke==null){if(we&&we._isBigNumber===!0){Tt.s=we.s,!we.c||we.e>Ge?Tt.c=Tt.e=null:we.e<rt?Tt.c=[Tt.e=0]:(Tt.e=we.e,Tt.c=we.c.slice());return}if((ht=typeof we=="number")&&we*0==0){if(Tt.s=1/we<0?(we=-we,-1):1,we===~~we){for(He=0,dt=we;dt>=10;dt/=10,He++);He>Ge?Tt.c=Tt.e=null:(Tt.e=He,Tt.c=[we]);return}At=String(we)}else{if(!ec.test(At=String(we)))return C(Tt,At,ht);Tt.s=At.charCodeAt(0)==45?(At=At.slice(1),-1):1}(He=At.indexOf("."))>-1&&(At=At.replace(".","")),(dt=At.search(/e/i))>0?(He<0&&(He=dt),He+=+At.slice(dt+1),At=At.substring(0,dt)):He<0&&(He=At.length)}else{if(u(ke,2,Mn.length,"Base"),ke==10&&yr)return Tt=new nt(we),Et(Tt,te+Tt.e+1,ae);if(At=String(we),ht=typeof we=="number"){if(we*0!=0)return C(Tt,At,ht,ke);if(Tt.s=1/we<0?(At=At.slice(1),-1):1,nt.DEBUG&&At.replace(/^0\.0*|\./,"").length>15)throw Error(po+we)}else Tt.s=At.charCodeAt(0)===45?(At=At.slice(1),-1):1;for(ze=Mn.slice(0,ke),He=dt=0,bt=At.length;dt<bt;dt++)if(ze.indexOf(Fe=At.charAt(dt))<0){if(Fe=="."){if(dt>He){He=bt;continue}}else if(!Ue&&(At==At.toUpperCase()&&(At=At.toLowerCase())||At==At.toLowerCase()&&(At=At.toUpperCase()))){Ue=!0,dt=-1,He=0;continue}return C(Tt,String(we),ht,ke)}ht=!1,At=_(At,ke,10,Tt.s),(He=At.indexOf("."))>-1?At=At.replace(".",""):He=At.length}for(dt=0;At.charCodeAt(dt)===48;dt++);for(bt=At.length;At.charCodeAt(--bt)===48;);if(At=At.slice(dt,++bt)){if(bt-=dt,ht&&nt.DEBUG&&bt>15&&(we>tl||we!==As(we)))throw Error(po+Tt.s*we);if((He=He-dt-1)>Ge)Tt.c=Tt.e=null;else if(He<rt)Tt.c=[Tt.e=0];else{if(Tt.e=He,Tt.c=[],dt=(He+1)%wr,He<0&&(dt+=wr),dt<bt){for(dt&&Tt.c.push(+At.slice(0,dt)),bt-=wr;dt<bt;)Tt.c.push(+At.slice(dt,dt+=wr));dt=wr-(At=At.slice(dt)).length}else dt-=bt;for(;dt--;At+="0");Tt.c.push(+At)}}else Tt.c=[Tt.e=0]}nt.clone=sd,nt.ROUND_UP=0,nt.ROUND_DOWN=1,nt.ROUND_CEIL=2,nt.ROUND_FLOOR=3,nt.ROUND_HALF_UP=4,nt.ROUND_HALF_DOWN=5,nt.ROUND_HALF_EVEN=6,nt.ROUND_HALF_CEIL=7,nt.ROUND_HALF_FLOOR=8,nt.EUCLID=9,nt.config=nt.set=function(we){var ke,ze;if(we!=null)if(typeof we=="object"){if(we.hasOwnProperty(ke="DECIMAL_PLACES")&&(ze=we[ke],u(ze,0,Mo,ke),te=ze),we.hasOwnProperty(ke="ROUNDING_MODE")&&(ze=we[ke],u(ze,0,8,ke),ae=ze),we.hasOwnProperty(ke="EXPONENTIAL_AT")&&(ze=we[ke],ze&&ze.pop?(u(ze[0],-1e9,0,ke),u(ze[1],0,Mo,ke),be=ze[0],Ce=ze[1]):(u(ze,-1e9,Mo,ke),be=-(Ce=ze<0?-ze:ze))),we.hasOwnProperty(ke="RANGE"))if(ze=we[ke],ze&&ze.pop)u(ze[0],-1e9,-1,ke),u(ze[1],1,Mo,ke),rt=ze[0],Ge=ze[1];else if(u(ze,-1e9,Mo,ke),ze)rt=-(Ge=ze<0?-ze:ze);else throw Error(Ui+ke+" cannot be zero: "+ze);if(we.hasOwnProperty(ke="CRYPTO"))if(ze=we[ke],ze===!!ze)if(ze)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))wt=ze;else throw wt=!ze,Error(Ui+"crypto unavailable");else wt=ze;else throw Error(Ui+ke+" not true or false: "+ze);if(we.hasOwnProperty(ke="MODULO_MODE")&&(ze=we[ke],u(ze,0,9,ke),It=ze),we.hasOwnProperty(ke="POW_PRECISION")&&(ze=we[ke],u(ze,0,Mo,ke),tn=ze),we.hasOwnProperty(ke="FORMAT"))if(ze=we[ke],typeof ze=="object")_n=ze;else throw Error(Ui+ke+" not an object: "+ze);if(we.hasOwnProperty(ke="ALPHABET"))if(ze=we[ke],typeof ze=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(ze))yr=ze.slice(0,10)=="0123456789",Mn=ze;else throw Error(Ui+ke+" invalid: "+ze)}else throw Error(Ui+"Object expected: "+we);return{DECIMAL_PLACES:te,ROUNDING_MODE:ae,EXPONENTIAL_AT:[be,Ce],RANGE:[rt,Ge],CRYPTO:wt,MODULO_MODE:It,POW_PRECISION:tn,FORMAT:_n,ALPHABET:Mn}},nt.isBigNumber=function(we){if(!we||we._isBigNumber!==!0)return!1;if(!nt.DEBUG)return!0;var ke,ze,Fe=we.c,Ue=we.e,He=we.s;e:if({}.toString.call(Fe)=="[object Array]"){if((He===1||He===-1)&&Ue>=-1e9&&Ue<=Mo&&Ue===As(Ue)){if(Fe[0]===0){if(Ue===0&&Fe.length===1)return!0;break e}if(ke=(Ue+1)%wr,ke<1&&(ke+=wr),String(Fe[0]).length==ke){for(ke=0;ke<Fe.length;ke++)if(ze=Fe[ke],ze<0||ze>=Ho||ze!==As(ze))break e;if(ze!==0)return!0}}}else if(Fe===null&&Ue===null&&(He===null||He===1||He===-1))return!0;throw Error(Ui+"Invalid BigNumber: "+we)},nt.maximum=nt.max=function(){return mt(arguments,-1)},nt.minimum=nt.min=function(){return mt(arguments,1)},nt.random=function(){var we=9007199254740992,ke=Math.random()*we&2097151?function(){return As(Math.random()*we)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(ze){var Fe,Ue,He,dt,ht,bt=0,At=[],Tt=new nt(H);if(ze==null?ze=te:u(ze,0,Mo),dt=Va(ze/wr),wt)if(crypto.getRandomValues){for(Fe=crypto.getRandomValues(new Uint32Array(dt*=2));bt<dt;)ht=Fe[bt]*131072+(Fe[bt+1]>>>11),ht>=9e15?(Ue=crypto.getRandomValues(new Uint32Array(2)),Fe[bt]=Ue[0],Fe[bt+1]=Ue[1]):(At.push(ht%1e14),bt+=2);bt=dt/2}else if(crypto.randomBytes){for(Fe=crypto.randomBytes(dt*=7);bt<dt;)ht=(Fe[bt]&31)*281474976710656+Fe[bt+1]*1099511627776+Fe[bt+2]*4294967296+Fe[bt+3]*16777216+(Fe[bt+4]<<16)+(Fe[bt+5]<<8)+Fe[bt+6],ht>=9e15?crypto.randomBytes(7).copy(Fe,bt):(At.push(ht%1e14),bt+=7);bt=dt/7}else throw wt=!1,Error(Ui+"crypto unavailable");if(!wt)for(;bt<dt;)ht=ke(),ht<9e15&&(At[bt++]=ht%1e14);for(dt=At[--bt],ze%=wr,dt&&ze&&(ht=nl[wr-ze],At[bt]=As(dt/ht)*ht);At[bt]===0;At.pop(),bt--);if(bt<0)At=[He=0];else{for(He=-1;At[0]===0;At.splice(0,1),He-=wr);for(bt=1,ht=At[0];ht>=10;ht/=10,bt++);bt<wr&&(He-=wr-bt)}return Tt.e=He,Tt.c=At,Tt}}(),nt.sum=function(){for(var we=1,ke=arguments,ze=new nt(ke[0]);we<ke.length;)ze=ze.plus(ke[we++]);return ze},_=function(){var we="0123456789";function ke(ze,Fe,Ue,He){for(var dt,ht=[0],bt,At=0,Tt=ze.length;At<Tt;){for(bt=ht.length;bt--;ht[bt]*=Fe);for(ht[0]+=He.indexOf(ze.charAt(At++)),dt=0;dt<ht.length;dt++)ht[dt]>Ue-1&&(ht[dt+1]==null&&(ht[dt+1]=0),ht[dt+1]+=ht[dt]/Ue|0,ht[dt]%=Ue)}return ht.reverse()}return function(ze,Fe,Ue,He,dt){var ht,bt,At,Tt,on,Wn,Kn,or,xi=ze.indexOf("."),ji=te,li=ae;for(xi>=0&&(Tt=tn,tn=0,ze=ze.replace(".",""),or=new nt(Fe),Wn=or.pow(ze.length-xi),tn=Tt,or.c=ke(W(Zs(Wn.c),Wn.e,"0"),10,Ue,we),or.e=or.c.length),Kn=ke(ze,Fe,Ue,dt?(ht=Mn,we):(ht=we,Mn)),At=Tt=Kn.length;Kn[--Tt]==0;Kn.pop());if(!Kn[0])return ht.charAt(0);if(xi<0?--At:(Wn.c=Kn,Wn.e=At,Wn.s=He,Wn=m(Wn,or,ji,li,Ue),Kn=Wn.c,on=Wn.r,At=Wn.e),bt=At+ji+1,xi=Kn[bt],Tt=Ue/2,on=on||bt<0||Kn[bt+1]!=null,on=li<4?(xi!=null||on)&&(li==0||li==(Wn.s<0?3:2)):xi>Tt||xi==Tt&&(li==4||on||li==6&&Kn[bt-1]&1||li==(Wn.s<0?8:7)),bt<1||!Kn[0])ze=on?W(ht.charAt(1),-ji,ht.charAt(0)):ht.charAt(0);else{if(Kn.length=bt,on)for(--Ue;++Kn[--bt]>Ue;)Kn[bt]=0,bt||(++At,Kn=[1].concat(Kn));for(Tt=Kn.length;!Kn[--Tt];);for(xi=0,ze="";xi<=Tt;ze+=ht.charAt(Kn[xi++]));ze=W(ze,At,ht.charAt(0))}return ze}}(),m=function(){function we(Fe,Ue,He){var dt,ht,bt,At,Tt=0,on=Fe.length,Wn=Ue%Sa,Kn=Ue/Sa|0;for(Fe=Fe.slice();on--;)bt=Fe[on]%Sa,At=Fe[on]/Sa|0,dt=Kn*bt+At*Wn,ht=Wn*bt+dt%Sa*Sa+Tt,Tt=(ht/He|0)+(dt/Sa|0)+Kn*At,Fe[on]=ht%He;return Tt&&(Fe=[Tt].concat(Fe)),Fe}function ke(Fe,Ue,He,dt){var ht,bt;if(He!=dt)bt=He>dt?1:-1;else for(ht=bt=0;ht<He;ht++)if(Fe[ht]!=Ue[ht]){bt=Fe[ht]>Ue[ht]?1:-1;break}return bt}function ze(Fe,Ue,He,dt){for(var ht=0;He--;)Fe[He]-=ht,ht=Fe[He]<Ue[He]?1:0,Fe[He]=ht*dt+Fe[He]-Ue[He];for(;!Fe[0]&&Fe.length>1;Fe.splice(0,1));}return function(Fe,Ue,He,dt,ht){var bt,At,Tt,on,Wn,Kn,or,xi,ji,li,Gi,qo,nc,Ha,Nh,Cl,Dc,Wa=Fe.s==Ue.s?1:-1,mo=Fe.c,Ss=Ue.c;if(!mo||!mo[0]||!Ss||!Ss[0])return new nt(!Fe.s||!Ue.s||(mo?Ss&&mo[0]==Ss[0]:!Ss)?NaN:mo&&mo[0]==0||!Ss?Wa*0:Wa/0);for(xi=new nt(Wa),ji=xi.c=[],At=Fe.e-Ue.e,Wa=He+At+1,ht||(ht=Ho,At=Ks(Fe.e/wr)-Ks(Ue.e/wr),Wa=Wa/wr|0),Tt=0;Ss[Tt]==(mo[Tt]||0);Tt++);if(Ss[Tt]>(mo[Tt]||0)&&At--,Wa<0)ji.push(1),on=!0;else{for(Ha=mo.length,Cl=Ss.length,Tt=0,Wa+=2,Wn=As(ht/(Ss[0]+1)),Wn>1&&(Ss=we(Ss,Wn,ht),mo=we(mo,Wn,ht),Cl=Ss.length,Ha=mo.length),nc=Cl,li=mo.slice(0,Cl),Gi=li.length;Gi<Cl;li[Gi++]=0);Dc=Ss.slice(),Dc=[0].concat(Dc),Nh=Ss[0],Ss[1]>=ht/2&&Nh++;do{if(Wn=0,bt=ke(Ss,li,Cl,Gi),bt<0){if(qo=li[0],Cl!=Gi&&(qo=qo*ht+(li[1]||0)),Wn=As(qo/Nh),Wn>1)for(Wn>=ht&&(Wn=ht-1),Kn=we(Ss,Wn,ht),or=Kn.length,Gi=li.length;ke(Kn,li,or,Gi)==1;)Wn--,ze(Kn,Cl<or?Dc:Ss,or,ht),or=Kn.length,bt=1;else Wn==0&&(bt=Wn=1),Kn=Ss.slice(),or=Kn.length;if(or<Gi&&(Kn=[0].concat(Kn)),ze(li,Kn,Gi,ht),Gi=li.length,bt==-1)for(;ke(Ss,li,Cl,Gi)<1;)Wn++,ze(li,Cl<Gi?Dc:Ss,Gi,ht),Gi=li.length}else bt===0&&(Wn++,li=[0]);ji[Tt++]=Wn,li[0]?li[Gi++]=mo[nc]||0:(li=[mo[nc]],Gi=1)}while((nc++<Ha||li[0]!=null)&&Wa--);on=li[0]!=null,ji[0]||ji.splice(0,1)}if(ht==Ho){for(Tt=1,Wa=ji[0];Wa>=10;Wa/=10,Tt++);Et(xi,He+(xi.e=Tt+At*wr-1)+1,dt,on)}else xi.e=At,xi.r=+on;return xi}}();function ot(we,ke,ze,Fe){var Ue,He,dt,ht,bt;if(ze==null?ze=ae:u(ze,0,8),!we.c)return we.toString();if(Ue=we.c[0],dt=we.e,ke==null)bt=Zs(we.c),bt=Fe==1||Fe==2&&(dt<=be||dt>=Ce)?P(bt,dt):W(bt,dt,"0");else if(we=Et(new nt(we),ke,ze),He=we.e,bt=Zs(we.c),ht=bt.length,Fe==1||Fe==2&&(ke<=He||He<=be)){for(;ht<ke;bt+="0",ht++);bt=P(bt,He)}else if(ke-=dt,bt=W(bt,He,"0"),He+1>ht){if(--ke>0)for(bt+=".";ke--;bt+="0");}else if(ke+=He-ht,ke>0)for(He+1==ht&&(bt+=".");ke--;bt+="0");return we.s<0&&Ue?"-"+bt:bt}function mt(we,ke){for(var ze,Fe,Ue=1,He=new nt(we[0]);Ue<we.length;Ue++)Fe=new nt(we[Ue]),(!Fe.s||(ze=Ca(He,Fe))===ke||ze===0&&He.s===ke)&&(He=Fe);return He}function zt(we,ke,ze){for(var Fe=1,Ue=ke.length;!ke[--Ue];ke.pop());for(Ue=ke[0];Ue>=10;Ue/=10,Fe++);return(ze=Fe+ze*wr-1)>Ge?we.c=we.e=null:ze<rt?we.c=[we.e=0]:(we.e=ze,we.c=ke),we}C=function(){var we=/^(-?)0([xbo])(?=\w[\w.]*$)/i,ke=/^([^.]+)\.$/,ze=/^\.([^.]+)$/,Fe=/^-?(Infinity|NaN)$/,Ue=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(He,dt,ht,bt){var At,Tt=ht?dt:dt.replace(Ue,"");if(Fe.test(Tt))He.s=isNaN(Tt)?null:Tt<0?-1:1;else{if(!ht&&(Tt=Tt.replace(we,function(on,Wn,Kn){return At=(Kn=Kn.toLowerCase())=="x"?16:Kn=="b"?2:8,!bt||bt==At?Wn:on}),bt&&(At=bt,Tt=Tt.replace(ke,"$1").replace(ze,"0.$1")),dt!=Tt))return new nt(Tt,At);if(nt.DEBUG)throw Error(Ui+"Not a"+(bt?" base "+bt:"")+" number: "+dt);He.s=null}He.c=He.e=null}}();function Et(we,ke,ze,Fe){var Ue,He,dt,ht,bt,At,Tt,on=we.c,Wn=nl;if(on){e:{for(Ue=1,ht=on[0];ht>=10;ht/=10,Ue++);if(He=ke-Ue,He<0)He+=wr,dt=ke,bt=on[At=0],Tt=As(bt/Wn[Ue-dt-1]%10);else if(At=Va((He+1)/wr),At>=on.length)if(Fe){for(;on.length<=At;on.push(0));bt=Tt=0,Ue=1,He%=wr,dt=He-wr+1}else break e;else{for(bt=ht=on[At],Ue=1;ht>=10;ht/=10,Ue++);He%=wr,dt=He-wr+Ue,Tt=dt<0?0:As(bt/Wn[Ue-dt-1]%10)}if(Fe=Fe||ke<0||on[At+1]!=null||(dt<0?bt:bt%Wn[Ue-dt-1]),Fe=ze<4?(Tt||Fe)&&(ze==0||ze==(we.s<0?3:2)):Tt>5||Tt==5&&(ze==4||Fe||ze==6&&(He>0?dt>0?bt/Wn[Ue-dt]:0:on[At-1])%10&1||ze==(we.s<0?8:7)),ke<1||!on[0])return on.length=0,Fe?(ke-=we.e+1,on[0]=Wn[(wr-ke%wr)%wr],we.e=-ke||0):on[0]=we.e=0,we;if(He==0?(on.length=At,ht=1,At--):(on.length=At+1,ht=Wn[wr-He],on[At]=dt>0?As(bt/Wn[Ue-dt]%Wn[dt])*ht:0),Fe)for(;;)if(At==0){for(He=1,dt=on[0];dt>=10;dt/=10,He++);for(dt=on[0]+=ht,ht=1;dt>=10;dt/=10,ht++);He!=ht&&(we.e++,on[0]==Ho&&(on[0]=1));break}else{if(on[At]+=ht,on[At]!=Ho)break;on[At--]=0,ht=1}for(He=on.length;on[--He]===0;on.pop());}we.e>Ge?we.c=we.e=null:we.e<rt&&(we.c=[we.e=0])}return we}function Bt(we){var ke,ze=we.e;return ze===null?we.toString():(ke=Zs(we.c),ke=ze<=be||ze>=Ce?P(ke,ze):W(ke,ze,"0"),we.s<0?"-"+ke:ke)}return k.absoluteValue=k.abs=function(){var we=new nt(this);return we.s<0&&(we.s=1),we},k.comparedTo=function(we,ke){return Ca(this,new nt(we,ke))},k.decimalPlaces=k.dp=function(we,ke){var ze,Fe,Ue,He=this;if(we!=null)return u(we,0,Mo),ke==null?ke=ae:u(ke,0,8),Et(new nt(He),we+He.e+1,ke);if(!(ze=He.c))return null;if(Fe=((Ue=ze.length-1)-Ks(this.e/wr))*wr,Ue=ze[Ue])for(;Ue%10==0;Ue/=10,Fe--);return Fe<0&&(Fe=0),Fe},k.dividedBy=k.div=function(we,ke){return m(this,new nt(we,ke),te,ae)},k.dividedToIntegerBy=k.idiv=function(we,ke){return m(this,new nt(we,ke),0,1)},k.exponentiatedBy=k.pow=function(we,ke){var ze,Fe,Ue,He,dt,ht,bt,At,Tt,on=this;if(we=new nt(we),we.c&&!we.isInteger())throw Error(Ui+"Exponent not an integer: "+Bt(we));if(ke!=null&&(ke=new nt(ke)),ht=we.e>14,!on.c||!on.c[0]||on.c[0]==1&&!on.e&&on.c.length==1||!we.c||!we.c[0])return Tt=new nt(Math.pow(+Bt(on),ht?we.s*(2-y(we)):+Bt(we))),ke?Tt.mod(ke):Tt;if(bt=we.s<0,ke){if(ke.c?!ke.c[0]:!ke.s)return new nt(NaN);Fe=!bt&&on.isInteger()&&ke.isInteger(),Fe&&(on=on.mod(ke))}else{if(we.e>9&&(on.e>0||on.e<-1||(on.e==0?on.c[0]>1||ht&&on.c[1]>=24e7:on.c[0]<8e13||ht&&on.c[0]<=9999975e7)))return He=on.s<0&&y(we)?-0:0,on.e>-1&&(He=1/He),new nt(bt?1/He:He);tn&&(He=Va(tn/wr+2))}for(ht?(ze=new nt(.5),bt&&(we.s=1),At=y(we)):(Ue=Math.abs(+Bt(we)),At=Ue%2),Tt=new nt(H);;){if(At){if(Tt=Tt.times(on),!Tt.c)break;He?Tt.c.length>He&&(Tt.c.length=He):Fe&&(Tt=Tt.mod(ke))}if(Ue){if(Ue=As(Ue/2),Ue===0)break;At=Ue%2}else if(we=we.times(ze),Et(we,we.e+1,1),we.e>14)At=y(we);else{if(Ue=+Bt(we),Ue===0)break;At=Ue%2}on=on.times(on),He?on.c&&on.c.length>He&&(on.c.length=He):Fe&&(on=on.mod(ke))}return Fe?Tt:(bt&&(Tt=H.div(Tt)),ke?Tt.mod(ke):He?Et(Tt,tn,ae,dt):Tt)},k.integerValue=function(we){var ke=new nt(this);return we==null?we=ae:u(we,0,8),Et(ke,ke.e+1,we)},k.isEqualTo=k.eq=function(we,ke){return Ca(this,new nt(we,ke))===0},k.isFinite=function(){return!!this.c},k.isGreaterThan=k.gt=function(we,ke){return Ca(this,new nt(we,ke))>0},k.isGreaterThanOrEqualTo=k.gte=function(we,ke){return(ke=Ca(this,new nt(we,ke)))===1||ke===0},k.isInteger=function(){return!!this.c&&Ks(this.e/wr)>this.c.length-2},k.isLessThan=k.lt=function(we,ke){return Ca(this,new nt(we,ke))<0},k.isLessThanOrEqualTo=k.lte=function(we,ke){return(ke=Ca(this,new nt(we,ke)))===-1||ke===0},k.isNaN=function(){return!this.s},k.isNegative=function(){return this.s<0},k.isPositive=function(){return this.s>0},k.isZero=function(){return!!this.c&&this.c[0]==0},k.minus=function(we,ke){var ze,Fe,Ue,He,dt=this,ht=dt.s;if(we=new nt(we,ke),ke=we.s,!ht||!ke)return new nt(NaN);if(ht!=ke)return we.s=-ke,dt.plus(we);var bt=dt.e/wr,At=we.e/wr,Tt=dt.c,on=we.c;if(!bt||!At){if(!Tt||!on)return Tt?(we.s=-ke,we):new nt(on?dt:NaN);if(!Tt[0]||!on[0])return on[0]?(we.s=-ke,we):new nt(Tt[0]?dt:ae==3?-0:0)}if(bt=Ks(bt),At=Ks(At),Tt=Tt.slice(),ht=bt-At){for((He=ht<0)?(ht=-ht,Ue=Tt):(At=bt,Ue=on),Ue.reverse(),ke=ht;ke--;Ue.push(0));Ue.reverse()}else for(Fe=(He=(ht=Tt.length)<(ke=on.length))?ht:ke,ht=ke=0;ke<Fe;ke++)if(Tt[ke]!=on[ke]){He=Tt[ke]<on[ke];break}if(He&&(Ue=Tt,Tt=on,on=Ue,we.s=-we.s),ke=(Fe=on.length)-(ze=Tt.length),ke>0)for(;ke--;Tt[ze++]=0);for(ke=Ho-1;Fe>ht;){if(Tt[--Fe]<on[Fe]){for(ze=Fe;ze&&!Tt[--ze];Tt[ze]=ke);--Tt[ze],Tt[Fe]+=Ho}Tt[Fe]-=on[Fe]}for(;Tt[0]==0;Tt.splice(0,1),--At);return Tt[0]?zt(we,Tt,At):(we.s=ae==3?-1:1,we.c=[we.e=0],we)},k.modulo=k.mod=function(we,ke){var ze,Fe,Ue=this;return we=new nt(we,ke),!Ue.c||!we.s||we.c&&!we.c[0]?new nt(NaN):!we.c||Ue.c&&!Ue.c[0]?new nt(Ue):(It==9?(Fe=we.s,we.s=1,ze=m(Ue,we,0,3),we.s=Fe,ze.s*=Fe):ze=m(Ue,we,0,It),we=Ue.minus(ze.times(we)),!we.c[0]&&It==1&&(we.s=Ue.s),we)},k.multipliedBy=k.times=function(we,ke){var ze,Fe,Ue,He,dt,ht,bt,At,Tt,on,Wn,Kn,or,xi,ji,li=this,Gi=li.c,qo=(we=new nt(we,ke)).c;if(!Gi||!qo||!Gi[0]||!qo[0])return!li.s||!we.s||Gi&&!Gi[0]&&!qo||qo&&!qo[0]&&!Gi?we.c=we.e=we.s=null:(we.s*=li.s,!Gi||!qo?we.c=we.e=null:(we.c=[0],we.e=0)),we;for(Fe=Ks(li.e/wr)+Ks(we.e/wr),we.s*=li.s,bt=Gi.length,on=qo.length,bt<on&&(or=Gi,Gi=qo,qo=or,Ue=bt,bt=on,on=Ue),Ue=bt+on,or=[];Ue--;or.push(0));for(xi=Ho,ji=Sa,Ue=on;--Ue>=0;){for(ze=0,Wn=qo[Ue]%ji,Kn=qo[Ue]/ji|0,dt=bt,He=Ue+dt;He>Ue;)At=Gi[--dt]%ji,Tt=Gi[dt]/ji|0,ht=Kn*At+Tt*Wn,At=Wn*At+ht%ji*ji+or[He]+ze,ze=(At/xi|0)+(ht/ji|0)+Kn*Tt,or[He--]=At%xi;or[He]=ze}return ze?++Fe:or.splice(0,1),zt(we,or,Fe)},k.negated=function(){var we=new nt(this);return we.s=-we.s||null,we},k.plus=function(we,ke){var ze,Fe=this,Ue=Fe.s;if(we=new nt(we,ke),ke=we.s,!Ue||!ke)return new nt(NaN);if(Ue!=ke)return we.s=-ke,Fe.minus(we);var He=Fe.e/wr,dt=we.e/wr,ht=Fe.c,bt=we.c;if(!He||!dt){if(!ht||!bt)return new nt(Ue/0);if(!ht[0]||!bt[0])return bt[0]?we:new nt(ht[0]?Fe:Ue*0)}if(He=Ks(He),dt=Ks(dt),ht=ht.slice(),Ue=He-dt){for(Ue>0?(dt=He,ze=bt):(Ue=-Ue,ze=ht),ze.reverse();Ue--;ze.push(0));ze.reverse()}for(Ue=ht.length,ke=bt.length,Ue-ke<0&&(ze=bt,bt=ht,ht=ze,ke=Ue),Ue=0;ke;)Ue=(ht[--ke]=ht[ke]+bt[ke]+Ue)/Ho|0,ht[ke]=Ho===ht[ke]?0:ht[ke]%Ho;return Ue&&(ht=[Ue].concat(ht),++dt),zt(we,ht,dt)},k.precision=k.sd=function(we,ke){var ze,Fe,Ue,He=this;if(we!=null&&we!==!!we)return u(we,1,Mo),ke==null?ke=ae:u(ke,0,8),Et(new nt(He),we,ke);if(!(ze=He.c))return null;if(Ue=ze.length-1,Fe=Ue*wr+1,Ue=ze[Ue]){for(;Ue%10==0;Ue/=10,Fe--);for(Ue=ze[0];Ue>=10;Ue/=10,Fe++);}return we&&He.e+1>Fe&&(Fe=He.e+1),Fe},k.shiftedBy=function(we){return u(we,-9007199254740991,tl),this.times("1e"+we)},k.squareRoot=k.sqrt=function(){var we,ke,ze,Fe,Ue,He=this,dt=He.c,ht=He.s,bt=He.e,At=te+4,Tt=new nt("0.5");if(ht!==1||!dt||!dt[0])return new nt(!ht||ht<0&&(!dt||dt[0])?NaN:dt?He:1/0);if(ht=Math.sqrt(+Bt(He)),ht==0||ht==1/0?(ke=Zs(dt),(ke.length+bt)%2==0&&(ke+="0"),ht=Math.sqrt(+ke),bt=Ks((bt+1)/2)-(bt<0||bt%2),ht==1/0?ke="5e"+bt:(ke=ht.toExponential(),ke=ke.slice(0,ke.indexOf("e")+1)+bt),ze=new nt(ke)):ze=new nt(ht+""),ze.c[0]){for(bt=ze.e,ht=bt+At,ht<3&&(ht=0);;)if(Ue=ze,ze=Tt.times(Ue.plus(m(He,Ue,At,1))),Zs(Ue.c).slice(0,ht)===(ke=Zs(ze.c)).slice(0,ht))if(ze.e<bt&&--ht,ke=ke.slice(ht-3,ht+1),ke=="9999"||!Fe&&ke=="4999"){if(!Fe&&(Et(Ue,Ue.e+te+2,0),Ue.times(Ue).eq(He))){ze=Ue;break}At+=4,ht+=4,Fe=1}else{(!+ke||!+ke.slice(1)&&ke.charAt(0)=="5")&&(Et(ze,ze.e+te+2,1),we=!ze.times(ze).eq(He));break}}return Et(ze,ze.e+te+1,ae,we)},k.toExponential=function(we,ke){return we!=null&&(u(we,0,Mo),we++),ot(this,we,ke,1)},k.toFixed=function(we,ke){return we!=null&&(u(we,0,Mo),we=we+this.e+1),ot(this,we,ke)},k.toFormat=function(we,ke,ze){var Fe,Ue=this;if(ze==null)we!=null&&ke&&typeof ke=="object"?(ze=ke,ke=null):we&&typeof we=="object"?(ze=we,we=ke=null):ze=_n;else if(typeof ze!="object")throw Error(Ui+"Argument not an object: "+ze);if(Fe=Ue.toFixed(we,ke),Ue.c){var He,dt=Fe.split("."),ht=+ze.groupSize,bt=+ze.secondaryGroupSize,At=ze.groupSeparator||"",Tt=dt[0],on=dt[1],Wn=Ue.s<0,Kn=Wn?Tt.slice(1):Tt,or=Kn.length;if(bt&&(He=ht,ht=bt,bt=He,or-=He),ht>0&&or>0){for(He=or%ht||ht,Tt=Kn.substr(0,He);He<or;He+=ht)Tt+=At+Kn.substr(He,ht);bt>0&&(Tt+=At+Kn.slice(He)),Wn&&(Tt="-"+Tt)}Fe=on?Tt+(ze.decimalSeparator||"")+((bt=+ze.fractionGroupSize)?on.replace(new RegExp("\\d{"+bt+"}\\B","g"),"$&"+(ze.fractionGroupSeparator||"")):on):Tt}return(ze.prefix||"")+Fe+(ze.suffix||"")},k.toFraction=function(we){var ke,ze,Fe,Ue,He,dt,ht,bt,At,Tt,on,Wn,Kn=this,or=Kn.c;if(we!=null&&(ht=new nt(we),!ht.isInteger()&&(ht.c||ht.s!==1)||ht.lt(H)))throw Error(Ui+"Argument "+(ht.isInteger()?"out of range: ":"not an integer: ")+Bt(ht));if(!or)return new nt(Kn);for(ke=new nt(H),At=ze=new nt(H),Fe=bt=new nt(H),Wn=Zs(or),He=ke.e=Wn.length-Kn.e-1,ke.c[0]=nl[(dt=He%wr)<0?wr+dt:dt],we=!we||ht.comparedTo(ke)>0?He>0?ke:At:ht,dt=Ge,Ge=1/0,ht=new nt(Wn),bt.c[0]=0;Tt=m(ht,ke,0,1),Ue=ze.plus(Tt.times(Fe)),Ue.comparedTo(we)!=1;)ze=Fe,Fe=Ue,At=bt.plus(Tt.times(Ue=At)),bt=Ue,ke=ht.minus(Tt.times(Ue=ke)),ht=Ue;return Ue=m(we.minus(ze),Fe,0,1),bt=bt.plus(Ue.times(At)),ze=ze.plus(Ue.times(Fe)),bt.s=At.s=Kn.s,He=He*2,on=m(At,Fe,He,ae).minus(Kn).abs().comparedTo(m(bt,ze,He,ae).minus(Kn).abs())<1?[At,Fe]:[bt,ze],Ge=dt,on},k.toNumber=function(){return+Bt(this)},k.toPrecision=function(we,ke){return we!=null&&u(we,1,Mo),ot(this,we,ke,2)},k.toString=function(we){var ke,ze=this,Fe=ze.s,Ue=ze.e;return Ue===null?Fe?(ke="Infinity",Fe<0&&(ke="-"+ke)):ke="NaN":(we==null?ke=Ue<=be||Ue>=Ce?P(Zs(ze.c),Ue):W(Zs(ze.c),Ue,"0"):we===10&&yr?(ze=Et(new nt(ze),te+Ue+1,ae),ke=W(Zs(ze.c),ze.e,"0")):(u(we,2,Mn.length,"Base"),ke=_(W(Zs(ze.c),Ue,"0"),10,we,Fe,!0)),Fe<0&&ze.c[0]&&(ke="-"+ke)),ke},k.valueOf=k.toJSON=function(){return Bt(this)},k._isBigNumber=!0,k[Symbol.toStringTag]="BigNumber",k[Symbol.for("nodejs.util.inspect.custom")]=k.valueOf,d!=null&&nt.set(d),nt}function Ks(d){var m=d|0;return d>0||d===m?m:m-1}function Zs(d){for(var m,_,C=1,k=d.length,H=d[0]+"";C<k;){for(m=d[C++]+"",_=wr-m.length;_--;m="0"+m);H+=m}for(k=H.length;H.charCodeAt(--k)===48;);return H.slice(0,k+1||1)}function Ca(d,m){var _,C,k=d.c,H=m.c,te=d.s,ae=m.s,be=d.e,Ce=m.e;if(!te||!ae)return null;if(_=k&&!k[0],C=H&&!H[0],_||C)return _?C?0:-ae:te;if(te!=ae)return te;if(_=te<0,C=be==Ce,!k||!H)return C?0:!k^_?1:-1;if(!C)return be>Ce^_?1:-1;for(ae=(be=k.length)<(Ce=H.length)?be:Ce,te=0;te<ae;te++)if(k[te]!=H[te])return k[te]>H[te]^_?1:-1;return be==Ce?0:be>Ce^_?1:-1}function u(d,m,_,C){if(d<m||d>_||d!==As(d))throw Error(Ui+(C||"Argument")+(typeof d=="number"?d<m||d>_?" out of range: ":" not an integer: ":" not a primitive number: ")+String(d))}function y(d){var m=d.c.length-1;return Ks(d.e/wr)==m&&d.c[m]%2!=0}function P(d,m){return(d.length>1?d.charAt(0)+"."+d.slice(1):d)+(m<0?"e":"e+")+m}function W(d,m,_){var C,k;if(m<0){for(k=_+".";++m;k+=_);d=k+d}else if(C=d.length,++m>C){for(k=_,m-=C;--m;k+=_);d+=k}else m<C&&(d=d.slice(0,m)+"."+d.slice(m));return d}var ue=sd(),Pe=ue,ut=class{constructor(d){Je(this,"key");Je(this,"left",null);Je(this,"right",null);this.key=d}},Nt=class extends ut{constructor(d){super(d)}},Wt=class{constructor(){Je(this,"size",0);Je(this,"modificationCount",0);Je(this,"splayCount",0)}splay(d){let m=this.root;if(m==null)return this.compare(d,d),-1;let _=null,C=null,k=null,H=null,te=m,ae=this.compare,be;for(;;)if(be=ae(te.key,d),be>0){let Ce=te.left;if(Ce==null||(be=ae(Ce.key,d),be>0&&(te.left=Ce.right,Ce.right=te,te=Ce,Ce=te.left,Ce==null)))break;_==null?C=te:_.left=te,_=te,te=Ce}else if(be<0){let Ce=te.right;if(Ce==null||(be=ae(Ce.key,d),be<0&&(te.right=Ce.left,Ce.left=te,te=Ce,Ce=te.right,Ce==null)))break;k==null?H=te:k.right=te,k=te,te=Ce}else break;return k!=null&&(k.right=te.left,te.left=H),_!=null&&(_.left=te.right,te.right=C),this.root!==te&&(this.root=te,this.splayCount++),be}splayMin(d){let m=d,_=m.left;for(;_!=null;){let C=_;m.left=C.right,C.right=m,m=C,_=m.left}return m}splayMax(d){let m=d,_=m.right;for(;_!=null;){let C=_;m.right=C.left,C.left=m,m=C,_=m.right}return m}_delete(d){if(this.root==null||this.splay(d)!=0)return null;let m=this.root,_=m,C=m.left;if(this.size--,C==null)this.root=m.right;else{let k=m.right;m=this.splayMax(C),m.right=k,this.root=m}return this.modificationCount++,_}addNewRoot(d,m){this.size++,this.modificationCount++;let _=this.root;if(_==null){this.root=d;return}m<0?(d.left=_,d.right=_.right,_.right=null):(d.right=_,d.left=_.left,_.left=null),this.root=d}_first(){let d=this.root;return d==null?null:(this.root=this.splayMin(d),this.root)}_last(){let d=this.root;return d==null?null:(this.root=this.splayMax(d),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(d){return this.validKey(d)&&this.splay(d)==0}defaultCompare(){return(d,m)=>d<m?-1:d>m?1:0}wrap(){return{getRoot:()=>this.root,setRoot:d=>{this.root=d},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:d=>{this.splayCount=d},splay:d=>this.splay(d),has:d=>this.has(d)}}},ln=class xg extends Wt{constructor(_,C){super();Je(this,"root",null);Je(this,"compare");Je(this,"validKey");Je(this,Nn,"[object Set]");this.compare=_??this.defaultCompare(),this.validKey=C??(k=>k!=null&&k!=null)}delete(_){return this.validKey(_)?this._delete(_)!=null:!1}deleteAll(_){for(let C of _)this.delete(C)}forEach(_){let C=this[Symbol.iterator](),k;for(;k=C.next(),!k.done;)_(k.value,k.value,this)}add(_){let C=this.splay(_);return C!=0&&this.addNewRoot(new Nt(_),C),this}addAndReturn(_){let C=this.splay(_);return C!=0&&this.addNewRoot(new Nt(_),C),this.root.key}addAll(_){for(let C of _)this.add(C)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)<0)return this.root.key;let C=this.root.left;if(C==null)return null;let k=C.right;for(;k!=null;)C=k,k=C.right;return C.key}firstAfter(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)>0)return this.root.key;let C=this.root.right;if(C==null)return null;let k=C.left;for(;k!=null;)C=k,k=C.left;return C.key}retainAll(_){let C=new xg(this.compare,this.validKey),k=this.modificationCount;for(let H of _){if(k!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(H)&&this.splay(H)==0&&C.add(this.root.key)}C.size!=this.size&&(this.root=C.root,this.size=C.size,this.modificationCount++)}lookup(_){return!this.validKey(_)||this.splay(_)!=0?null:this.root.key}intersection(_){let C=new xg(this.compare,this.validKey);for(let k of this)_.has(k)&&C.add(k);return C}difference(_){let C=new xg(this.compare,this.validKey);for(let k of this)_.has(k)||C.add(k);return C}union(_){let C=this.clone();return C.addAll(_),C}clone(){let _=new xg(this.compare,this.validKey);return _.size=this.size,_.root=this.copyNode(this.root),_}copyNode(_){if(_==null)return null;function C(H,te){let ae,be;do{if(ae=H.left,be=H.right,ae!=null){let Ce=new Nt(ae.key);te.left=Ce,C(ae,Ce)}if(be!=null){let Ce=new Nt(be.key);te.right=Ce,H=be,te=Ce}}while(be!=null)}let k=new Nt(_.key);return C(_,k),k}toSet(){return this.clone()}entries(){return new Hr(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(sr=Symbol.iterator,Nn=Symbol.toStringTag,sr)](){return new ir(this.wrap())}},jn=class{constructor(d){Je(this,"tree");Je(this,"path",new Array);Je(this,"modificationCount",null);Je(this,"splayCount");this.tree=d,this.splayCount=d.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let d=this.path[this.path.length-1];return this.getValue(d)}rebuildPath(d){this.path.splice(0,this.path.length),this.tree.splay(d),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(d){for(;d!=null;)this.path.push(d),d=d.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let _=this.tree.getRoot();for(;_!=null;)this.path.push(_),_=_.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let d=this.path[this.path.length-1],m=d.right;if(m!=null){for(;m!=null;)this.path.push(m),m=m.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===d;)d=this.path.pop();return this.path.length>0}},ir=class extends jn{getValue(d){return d.key}},Hr=class extends jn{getValue(d){return[d.key,d.key]}},Ts=d=>d,ds=d=>{if(d){let m=new ln(Uo(d)),_=new ln(Uo(d)),C=(H,te)=>te.addAndReturn(H),k=H=>({x:C(H.x,m),y:C(H.y,_)});return k({x:new Pe(0),y:new Pe(0)}),k}return Ts},Xs=d=>({set:m=>{ns=Xs(m)},reset:()=>Xs(d),compare:Uo(d),snap:ds(d),orient:ha(d)}),ns=Xs(),Wo=(d,m)=>d.ll.x.isLessThanOrEqualTo(m.x)&&m.x.isLessThanOrEqualTo(d.ur.x)&&d.ll.y.isLessThanOrEqualTo(m.y)&&m.y.isLessThanOrEqualTo(d.ur.y),od=(d,m)=>{if(m.ur.x.isLessThan(d.ll.x)||d.ur.x.isLessThan(m.ll.x)||m.ur.y.isLessThan(d.ll.y)||d.ur.y.isLessThan(m.ll.y))return null;let _=d.ll.x.isLessThan(m.ll.x)?m.ll.x:d.ll.x,C=d.ur.x.isLessThan(m.ur.x)?d.ur.x:m.ur.x,k=d.ll.y.isLessThan(m.ll.y)?m.ll.y:d.ll.y,H=d.ur.y.isLessThan(m.ur.y)?d.ur.y:m.ur.y;return{ll:{x:_,y:k},ur:{x:C,y:H}}},Ua=(d,m)=>d.x.times(m.y).minus(d.y.times(m.x)),Ea=(d,m)=>d.x.times(m.x).plus(d.y.times(m.y)),fa=d=>Ea(d,d).sqrt(),Th=(d,m,_)=>{let C={x:m.x.minus(d.x),y:m.y.minus(d.y)},k={x:_.x.minus(d.x),y:_.y.minus(d.y)};return Ua(k,C).div(fa(k)).div(fa(C))},Nu=(d,m,_)=>{let C={x:m.x.minus(d.x),y:m.y.minus(d.y)},k={x:_.x.minus(d.x),y:_.y.minus(d.y)};return Ea(k,C).div(fa(k)).div(fa(C))},wi=(d,m,_)=>m.y.isZero()?null:{x:d.x.plus(m.x.div(m.y).times(_.minus(d.y))),y:_},go=(d,m,_)=>m.x.isZero()?null:{x:_,y:d.y.plus(m.y.div(m.x).times(_.minus(d.x)))},Ie=(d,m,_,C)=>{if(m.x.isZero())return go(_,C,d.x);if(C.x.isZero())return go(d,m,_.x);if(m.y.isZero())return wi(_,C,d.y);if(C.y.isZero())return wi(d,m,_.y);let k=Ua(m,C);if(k.isZero())return null;let H={x:_.x.minus(d.x),y:_.y.minus(d.y)},te=Ua(H,m).div(k),ae=Ua(H,C).div(k),be=d.x.plus(ae.times(m.x)),Ce=_.x.plus(te.times(C.x)),rt=d.y.plus(ae.times(m.y)),Ge=_.y.plus(te.times(C.y)),wt=be.plus(Ce).div(2),It=rt.plus(Ge).div(2);return{x:wt,y:It}},Go=class RE{constructor(m,_){Je(this,"point");Je(this,"isLeft");Je(this,"segment");Je(this,"otherSE");Je(this,"consumedBy");m.events===void 0?m.events=[this]:m.events.push(this),this.point=m,this.isLeft=_}static compare(m,_){let C=RE.comparePoints(m.point,_.point);return C!==0?C:(m.point!==_.point&&m.link(_),m.isLeft!==_.isLeft?m.isLeft?1:-1:Js.compare(m.segment,_.segment))}static comparePoints(m,_){return m.x.isLessThan(_.x)?-1:m.x.isGreaterThan(_.x)?1:m.y.isLessThan(_.y)?-1:m.y.isGreaterThan(_.y)?1:0}link(m){if(m.point===this.point)throw new Error("Tried to link already linked events");let _=m.point.events;for(let C=0,k=_.length;C<k;C++){let H=_[C];this.point.events.push(H),H.point=this.point}this.checkForConsuming()}checkForConsuming(){let m=this.point.events.length;for(let _=0;_<m;_++){let C=this.point.events[_];if(C.segment.consumedBy===void 0)for(let k=_+1;k<m;k++){let H=this.point.events[k];H.consumedBy===void 0&&C.otherSE.point.events===H.otherSE.point.events&&C.segment.consume(H.segment)}}}getAvailableLinkedEvents(){let m=[];for(let _=0,C=this.point.events.length;_<C;_++){let k=this.point.events[_];k!==this&&!k.segment.ringOut&&k.segment.isInResult()&&m.push(k)}return m}getLeftmostComparator(m){let _=new Map,C=k=>{let H=k.otherSE;_.set(k,{sine:Th(this.point,m.point,H.point),cosine:Nu(this.point,m.point,H.point)})};return(k,H)=>{_.has(k)||C(k),_.has(H)||C(H);let{sine:te,cosine:ae}=_.get(k),{sine:be,cosine:Ce}=_.get(H);return te.isGreaterThanOrEqualTo(0)&&be.isGreaterThanOrEqualTo(0)?ae.isLessThan(Ce)?1:ae.isGreaterThan(Ce)?-1:0:te.isLessThan(0)&&be.isLessThan(0)?ae.isLessThan(Ce)?-1:ae.isGreaterThan(Ce)?1:0:be.isLessThan(te)?-1:be.isGreaterThan(te)?1:0}}},tc=0,Js=class iv{constructor(m,_,C,k){Je(this,"id");Je(this,"leftSE");Je(this,"rightSE");Je(this,"rings");Je(this,"windings");Je(this,"ringOut");Je(this,"consumedBy");Je(this,"prev");Je(this,"_prevInResult");Je(this,"_beforeState");Je(this,"_afterState");Je(this,"_isInResult");this.id=++tc,this.leftSE=m,m.segment=this,m.otherSE=_,this.rightSE=_,_.segment=this,_.otherSE=m,this.rings=C,this.windings=k}static compare(m,_){let C=m.leftSE.point.x,k=_.leftSE.point.x,H=m.rightSE.point.x,te=_.rightSE.point.x;if(te.isLessThan(C))return 1;if(H.isLessThan(k))return-1;let ae=m.leftSE.point.y,be=_.leftSE.point.y,Ce=m.rightSE.point.y,rt=_.rightSE.point.y;if(C.isLessThan(k)){if(be.isLessThan(ae)&&be.isLessThan(Ce))return 1;if(be.isGreaterThan(ae)&&be.isGreaterThan(Ce))return-1;let Ge=m.comparePoint(_.leftSE.point);if(Ge<0)return 1;if(Ge>0)return-1;let wt=_.comparePoint(m.rightSE.point);return wt!==0?wt:-1}if(C.isGreaterThan(k)){if(ae.isLessThan(be)&&ae.isLessThan(rt))return-1;if(ae.isGreaterThan(be)&&ae.isGreaterThan(rt))return 1;let Ge=_.comparePoint(m.leftSE.point);if(Ge!==0)return Ge;let wt=m.comparePoint(_.rightSE.point);return wt<0?1:wt>0?-1:1}if(ae.isLessThan(be))return-1;if(ae.isGreaterThan(be))return 1;if(H.isLessThan(te)){let Ge=_.comparePoint(m.rightSE.point);if(Ge!==0)return Ge}if(H.isGreaterThan(te)){let Ge=m.comparePoint(_.rightSE.point);if(Ge<0)return 1;if(Ge>0)return-1}if(!H.eq(te)){let Ge=Ce.minus(ae),wt=H.minus(C),It=rt.minus(be),tn=te.minus(k);if(Ge.isGreaterThan(wt)&&It.isLessThan(tn))return 1;if(Ge.isLessThan(wt)&&It.isGreaterThan(tn))return-1}return H.isGreaterThan(te)?1:H.isLessThan(te)||Ce.isLessThan(rt)?-1:Ce.isGreaterThan(rt)?1:m.id<_.id?-1:m.id>_.id?1:0}static fromRing(m,_,C){let k,H,te,ae=Go.comparePoints(m,_);if(ae<0)k=m,H=_,te=1;else if(ae>0)k=_,H=m,te=-1;else throw new Error(`Tried to create degenerate segment at [${m.x}, ${m.y}]`);let be=new Go(k,!0),Ce=new Go(H,!1);return new iv(be,Ce,[C],[te])}replaceRightSE(m){this.rightSE=m,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let m=this.leftSE.point.y,_=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:m.isLessThan(_)?m:_},ur:{x:this.rightSE.point.x,y:m.isGreaterThan(_)?m:_}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(m){return m.x.eq(this.leftSE.point.x)&&m.y.eq(this.leftSE.point.y)||m.x.eq(this.rightSE.point.x)&&m.y.eq(this.rightSE.point.y)}comparePoint(m){return ns.orient(this.leftSE.point,m,this.rightSE.point)}getIntersection(m){let _=this.bbox(),C=m.bbox(),k=od(_,C);if(k===null)return null;let H=this.leftSE.point,te=this.rightSE.point,ae=m.leftSE.point,be=m.rightSE.point,Ce=Wo(_,ae)&&this.comparePoint(ae)===0,rt=Wo(C,H)&&m.comparePoint(H)===0,Ge=Wo(_,be)&&this.comparePoint(be)===0,wt=Wo(C,te)&&m.comparePoint(te)===0;if(rt&&Ce)return wt&&!Ge?te:!wt&&Ge?be:null;if(rt)return Ge&&H.x.eq(be.x)&&H.y.eq(be.y)?null:H;if(Ce)return wt&&te.x.eq(ae.x)&&te.y.eq(ae.y)?null:ae;if(wt&&Ge)return null;if(wt)return te;if(Ge)return be;let It=Ie(H,this.vector(),ae,m.vector());return It===null||!Wo(k,It)?null:ns.snap(It)}split(m){let _=[],C=m.events!==void 0,k=new Go(m,!0),H=new Go(m,!1),te=this.rightSE;this.replaceRightSE(H),_.push(H),_.push(k);let ae=new iv(k,te,this.rings.slice(),this.windings.slice());return Go.comparePoints(ae.leftSE.point,ae.rightSE.point)>0&&ae.swapEvents(),Go.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),C&&(k.checkForConsuming(),H.checkForConsuming()),_}swapEvents(){let m=this.rightSE;this.rightSE=this.leftSE,this.leftSE=m,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let _=0,C=this.windings.length;_<C;_++)this.windings[_]*=-1}consume(m){let _=this,C=m;for(;_.consumedBy;)_=_.consumedBy;for(;C.consumedBy;)C=C.consumedBy;let k=iv.compare(_,C);if(k!==0){if(k>0){let H=_;_=C,C=H}if(_.prev===C){let H=_;_=C,C=H}for(let H=0,te=C.rings.length;H<te;H++){let ae=C.rings[H],be=C.windings[H],Ce=_.rings.indexOf(ae);Ce===-1?(_.rings.push(ae),_.windings.push(be)):_.windings[Ce]+=be}C.rings=null,C.windings=null,C.consumedBy=_,C.leftSE.consumedBy=_.leftSE,C.rightSE.consumedBy=_.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let m=this.prev.consumedBy||this.prev;this._beforeState=m.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let m=this.beforeState();this._afterState={rings:m.rings.slice(0),windings:m.windings.slice(0),multiPolys:[]};let _=this._afterState.rings,C=this._afterState.windings,k=this._afterState.multiPolys;for(let ae=0,be=this.rings.length;ae<be;ae++){let Ce=this.rings[ae],rt=this.windings[ae],Ge=_.indexOf(Ce);Ge===-1?(_.push(Ce),C.push(rt)):C[Ge]+=rt}let H=[],te=[];for(let ae=0,be=_.length;ae<be;ae++){if(C[ae]===0)continue;let Ce=_[ae],rt=Ce.poly;if(te.indexOf(rt)===-1)if(Ce.isExterior)H.push(rt);else{te.indexOf(rt)===-1&&te.push(rt);let Ge=H.indexOf(Ce.poly);Ge!==-1&&H.splice(Ge,1)}}for(let ae=0,be=H.length;ae<be;ae++){let Ce=H[ae].multiPoly;k.indexOf(Ce)===-1&&k.push(Ce)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let m=this.beforeState().multiPolys,_=this.afterState().multiPolys;switch(Ud.type){case"union":{let C=m.length===0,k=_.length===0;this._isInResult=C!==k;break}case"intersection":{let C,k;m.length<_.length?(C=m.length,k=_.length):(C=_.length,k=m.length),this._isInResult=k===Ud.numMultiPolys&&C<k;break}case"xor":{let C=Math.abs(m.length-_.length);this._isInResult=C%2===1;break}case"difference":{let C=k=>k.length===1&&k[0].isSubject;this._isInResult=C(m)!==C(_);break}}return this._isInResult}},Zr=class{constructor(d,m,_){Je(this,"poly");Je(this,"isExterior");Je(this,"segments");Je(this,"bbox");if(!Array.isArray(d)||d.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=m,this.isExterior=_,this.segments=[],typeof d[0][0]!="number"||typeof d[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let C=ns.snap({x:new Pe(d[0][0]),y:new Pe(d[0][1])});this.bbox={ll:{x:C.x,y:C.y},ur:{x:C.x,y:C.y}};let k=C;for(let H=1,te=d.length;H<te;H++){if(typeof d[H][0]!="number"||typeof d[H][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let ae=ns.snap({x:new Pe(d[H][0]),y:new Pe(d[H][1])});ae.x.eq(k.x)&&ae.y.eq(k.y)||(this.segments.push(Js.fromRing(k,ae,this)),ae.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=ae.x),ae.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=ae.y),ae.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=ae.x),ae.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=ae.y),k=ae)}(!C.x.eq(k.x)||!C.y.eq(k.y))&&this.segments.push(Js.fromRing(k,C,this))}getSweepEvents(){let d=[];for(let m=0,_=this.segments.length;m<_;m++){let C=this.segments[m];d.push(C.leftSE),d.push(C.rightSE)}return d}},$d=class{constructor(d,m){Je(this,"multiPoly");Je(this,"exteriorRing");Je(this,"interiorRings");Je(this,"bbox");if(!Array.isArray(d))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Zr(d[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let _=1,C=d.length;_<C;_++){let k=new Zr(d[_],this,!1);k.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=k.bbox.ll.x),k.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=k.bbox.ll.y),k.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=k.bbox.ur.x),k.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=k.bbox.ur.y),this.interiorRings.push(k)}this.multiPoly=m}getSweepEvents(){let d=this.exteriorRing.getSweepEvents();for(let m=0,_=this.interiorRings.length;m<_;m++){let C=this.interiorRings[m].getSweepEvents();for(let k=0,H=C.length;k<H;k++)d.push(C[k])}return d}},Mf=class{constructor(d,m){Je(this,"isSubject");Je(this,"polys");Je(this,"bbox");if(!Array.isArray(d))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof d[0][0][0]=="number"&&(d=[d])}catch{}this.polys=[],this.bbox={ll:{x:new Pe(Number.POSITIVE_INFINITY),y:new Pe(Number.POSITIVE_INFINITY)},ur:{x:new Pe(Number.NEGATIVE_INFINITY),y:new Pe(Number.NEGATIVE_INFINITY)}};for(let _=0,C=d.length;_<C;_++){let k=new $d(d[_],this);k.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=k.bbox.ll.x),k.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=k.bbox.ll.y),k.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=k.bbox.ur.x),k.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=k.bbox.ur.y),this.polys.push(k)}this.isSubject=m}getSweepEvents(){let d=[];for(let m=0,_=this.polys.length;m<_;m++){let C=this.polys[m].getSweepEvents();for(let k=0,H=C.length;k<H;k++)d.push(C[k])}return d}},Vd=class wb{constructor(m){Je(this,"events");Je(this,"poly");Je(this,"_isExteriorRing");Je(this,"_enclosingRing");this.events=m;for(let _=0,C=m.length;_<C;_++)m[_].segment.ringOut=this;this.poly=null}static factory(m){let _=[];for(let C=0,k=m.length;C<k;C++){let H=m[C];if(!H.isInResult()||H.ringOut)continue;let te=null,ae=H.leftSE,be=H.rightSE,Ce=[ae],rt=ae.point,Ge=[];for(;te=ae,ae=be,Ce.push(ae),ae.point!==rt;)for(;;){let wt=ae.getAvailableLinkedEvents();if(wt.length===0){let _n=Ce[0].point,Mn=Ce[Ce.length-1].point;throw new Error(`Unable to complete output ring starting at [${_n.x}, ${_n.y}]. Last matching segment found ends at [${Mn.x}, ${Mn.y}].`)}if(wt.length===1){be=wt[0].otherSE;break}let It=null;for(let _n=0,Mn=Ge.length;_n<Mn;_n++)if(Ge[_n].point===ae.point){It=_n;break}if(It!==null){let _n=Ge.splice(It)[0],Mn=Ce.splice(_n.index);Mn.unshift(Mn[0].otherSE),_.push(new wb(Mn.reverse()));continue}Ge.push({index:Ce.length,point:ae.point});let tn=ae.getLeftmostComparator(te);be=wt.sort(tn)[0].otherSE;break}_.push(new wb(Ce))}return _}getGeom(){let m=this.events[0].point,_=[m];for(let Ce=1,rt=this.events.length-1;Ce<rt;Ce++){let Ge=this.events[Ce].point,wt=this.events[Ce+1].point;ns.orient(Ge,m,wt)!==0&&(_.push(Ge),m=Ge)}if(_.length===1)return null;let C=_[0],k=_[1];ns.orient(C,m,k)===0&&_.shift(),_.push(_[0]);let H=this.isExteriorRing()?1:-1,te=this.isExteriorRing()?0:_.length-1,ae=this.isExteriorRing()?_.length:-1,be=[];for(let Ce=te;Ce!=ae;Ce+=H)be.push([_[Ce].x.toNumber(),_[Ce].y.toNumber()]);return be}isExteriorRing(){if(this._isExteriorRing===void 0){let m=this.enclosingRing();this._isExteriorRing=m?!m.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var k,H;let m=this.events[0];for(let te=1,ae=this.events.length;te<ae;te++){let be=this.events[te];Go.compare(m,be)>0&&(m=be)}let _=m.segment.prevInResult(),C=_?_.prevInResult():null;for(;;){if(!_)return null;if(!C)return _.ringOut;if(C.ringOut!==_.ringOut)return((k=C.ringOut)==null?void 0:k.enclosingRing())!==_.ringOut?_.ringOut:(H=_.ringOut)==null?void 0:H.enclosingRing();_=C.prevInResult(),C=_?_.prevInResult():null}}},Sl=class{constructor(d){Je(this,"exteriorRing");Je(this,"interiorRings");this.exteriorRing=d,d.poly=this,this.interiorRings=[]}addInterior(d){this.interiorRings.push(d),d.poly=this}getGeom(){let d=this.exteriorRing.getGeom();if(d===null)return null;let m=[d];for(let _=0,C=this.interiorRings.length;_<C;_++){let k=this.interiorRings[_].getGeom();k!==null&&m.push(k)}return m}},ad=class{constructor(d){Je(this,"rings");Je(this,"polys");this.rings=d,this.polys=this._composePolys(d)}getGeom(){let d=[];for(let m=0,_=this.polys.length;m<_;m++){let C=this.polys[m].getGeom();C!==null&&d.push(C)}return d}_composePolys(d){var _;let m=[];for(let C=0,k=d.length;C<k;C++){let H=d[C];if(!H.poly)if(H.isExteriorRing())m.push(new Sl(H));else{let te=H.enclosingRing();te!=null&&te.poly||m.push(new Sl(te)),(_=te==null?void 0:te.poly)==null||_.addInterior(H)}}return m}},Dh=class{constructor(d,m=Js.compare){Je(this,"queue");Je(this,"tree");Je(this,"segments");this.queue=d,this.tree=new ln(m),this.segments=[]}process(d){let m=d.segment,_=[];if(d.consumedBy)return d.isLeft?this.queue.delete(d.otherSE):this.tree.delete(m),_;d.isLeft&&this.tree.add(m);let C=m,k=m;do C=this.tree.lastBefore(C);while(C!=null&&C.consumedBy!=null);do k=this.tree.firstAfter(k);while(k!=null&&k.consumedBy!=null);if(d.isLeft){let H=null;if(C){let ae=C.getIntersection(m);if(ae!==null&&(m.isAnEndpoint(ae)||(H=ae),!C.isAnEndpoint(ae))){let be=this._splitSafely(C,ae);for(let Ce=0,rt=be.length;Ce<rt;Ce++)_.push(be[Ce])}}let te=null;if(k){let ae=k.getIntersection(m);if(ae!==null&&(m.isAnEndpoint(ae)||(te=ae),!k.isAnEndpoint(ae))){let be=this._splitSafely(k,ae);for(let Ce=0,rt=be.length;Ce<rt;Ce++)_.push(be[Ce])}}if(H!==null||te!==null){let ae=null;H===null?ae=te:te===null?ae=H:ae=Go.comparePoints(H,te)<=0?H:te,this.queue.delete(m.rightSE),_.push(m.rightSE);let be=m.split(ae);for(let Ce=0,rt=be.length;Ce<rt;Ce++)_.push(be[Ce])}_.length>0?(this.tree.delete(m),_.push(d)):(this.segments.push(m),m.prev=C)}else{if(C&&k){let H=C.getIntersection(k);if(H!==null){if(!C.isAnEndpoint(H)){let te=this._splitSafely(C,H);for(let ae=0,be=te.length;ae<be;ae++)_.push(te[ae])}if(!k.isAnEndpoint(H)){let te=this._splitSafely(k,H);for(let ae=0,be=te.length;ae<be;ae++)_.push(te[ae])}}}this.tree.delete(m)}return _}_splitSafely(d,m){this.tree.delete(d);let _=d.rightSE;this.queue.delete(_);let C=d.split(m);return C.push(_),d.consumedBy===void 0&&this.tree.add(d),C}},Vp=class{constructor(){Je(this,"type");Je(this,"numMultiPolys")}run(d,m,_){Tc.type=d;let C=[new Mf(m,!0)];for(let be=0,Ce=_.length;be<Ce;be++)C.push(new Mf(_[be],!1));if(Tc.numMultiPolys=C.length,Tc.type==="difference"){let be=C[0],Ce=1;for(;Ce<C.length;)od(C[Ce].bbox,be.bbox)!==null?Ce++:C.splice(Ce,1)}if(Tc.type==="intersection")for(let be=0,Ce=C.length;be<Ce;be++){let rt=C[be];for(let Ge=be+1,wt=C.length;Ge<wt;Ge++)if(od(rt.bbox,C[Ge].bbox)===null)return[]}let k=new ln(Go.compare);for(let be=0,Ce=C.length;be<Ce;be++){let rt=C[be].getSweepEvents();for(let Ge=0,wt=rt.length;Ge<wt;Ge++)k.add(rt[Ge])}let H=new Dh(k),te=null;for(k.size!=0&&(te=k.first(),k.delete(te));te;){let be=H.process(te);for(let Ce=0,rt=be.length;Ce<rt;Ce++){let Ge=be[Ce];Ge.consumedBy===void 0&&k.add(Ge)}k.size!=0?(te=k.first(),k.delete(te)):te=null}ns.reset();let ae=Vd.factory(H.segments);return new ad(ae).getGeom()}},Tc=new Vp,Ud=Tc,mu=(d,...m)=>Ud.run("intersection",d,m),Up=(d,...m)=>Ud.run("difference",d,m);ns.set;function Hd(d){let m={type:"Feature"};return m.geometry=d,m}function Wd(d){return d.type==="Feature"?d.geometry:d}function kf(d){return d&&d.geometry&&d.geometry.coordinates?d.geometry.coordinates:d}function Af(d){return Hd({type:"LineString",coordinates:d})}function rl(d){return Hd({type:"MultiLineString",coordinates:d})}function Tf(d){return Hd({type:"Polygon",coordinates:d})}function Df(d){return Hd({type:"MultiPolygon",coordinates:d})}function Nf(d,m){let _=Wd(d),C=Wd(m),k=mu(_.coordinates,C.coordinates);return k.length===0?null:k.length===1?Tf(k[0]):Df(k)}function w(d,m){let _=Wd(d),C=Wd(m),k=Up(_.coordinates,C.coordinates);return k.length===0?null:k.length===1?Tf(k[0]):Df(k)}function T(d){return Array.isArray(d)?1+T(d[0]):-1}function q(d){d instanceof L.Polyline&&(d=d.toGeoJSON(15));let m=kf(d),_=T(m),C=[];return _>1?m.forEach(k=>{C.push(Af(k))}):C.push(d),C}function ce(d){let m=[];return d.eachLayer(_=>{m.push(kf(_.toGeoJSON(15)))}),rl(m)}ws.Cut=ws.Polygon.extend({initialize(d){this._map=d,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let d=this._layer.getLatLngs();if(d.length<=2)return;let m=L.polygon(d,this.options.pathOptions);m._latlngInfos=this._layer._latlngInfo,this.cut(m),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:C,originalLayer:k})=>{this._fireCut(k,C,k),this._fireCut(this._map,C,k),k.pm._fireEdit()}),this._editedLayers=[];let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},cut(d){let m=this._map._layers,_=d._latlngInfos||[];Object.keys(m).map(C=>m[C]).filter(C=>C.pm).filter(C=>!C._pmTempLayer).filter(C=>!L.PM.optIn&&!C.options.pmIgnore||L.PM.optIn&&C.options.pmIgnore===!1).filter(C=>C instanceof L.Polyline).filter(C=>C!==d).filter(C=>C.pm.options.allowCutting).filter(C=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(C)>-1:!0).filter(C=>!this._layerGroup.hasLayer(C)).filter(C=>{try{let k=!!Vo(d.toGeoJSON(15),C.toGeoJSON(15)).features.length>0;return k||C instanceof L.Polyline&&!(C instanceof L.Polygon)?k:!!Nf(d.toGeoJSON(15),C.toGeoJSON(15))}catch{return C instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(C=>{let k;if(C instanceof L.Polygon){k=L.polygon(C.getLatLngs());let be=k.getLatLngs();_.forEach(Ce=>{if(Ce&&Ce.snapInfo){let{latlng:rt}=Ce,Ge=this._calcClosestLayer(rt,[k]);if(Ge&&Ge.segment&&Ge.distance<this.options.snapDistance){let{segment:wt}=Ge;if(wt&&wt.length===2){let{indexPath:It,parentPath:tn,newIndex:_n}=L.PM.Utils._getIndexFromSegment(be,wt);(It.length>1?(0,Wi.default)(be,tn):be).splice(_n,0,rt)}}}})}else k=C;let H=this._cutLayer(d,k),te=L.geoJSON(H,C.options);te.getLayers().length===1&&([te]=te.getLayers()),this._setPane(te,"layerPane");let ae=te.addTo(this._map.pm._getContainingLayer());if(ae.pm.enable(C.pm.options),ae.pm.disable(),C._pmTempLayer=!0,d._pmTempLayer=!0,C.remove(),C.removeFrom(this._map.pm._getContainingLayer()),d.remove(),d.removeFrom(this._map.pm._getContainingLayer()),ae.getLayers&&ae.getLayers().length===0&&this._map.pm.removeLayer({target:ae}),ae instanceof L.LayerGroup?(ae.eachLayer(be=>{this._addDrawnLayerProp(be)}),this._addDrawnLayerProp(ae)):this._addDrawnLayerProp(ae),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let be=this.options.layersToCut.indexOf(C);be>-1&&this.options.layersToCut.splice(be,1)}this._editedLayers.push({layer:ae,originalLayer:C})})},_cutLayer(d,m){let _=L.geoJSON(),C;if(m instanceof L.Polygon)C=w(m.toGeoJSON(15),d.toGeoJSON(15));else{let k=q(m);k.forEach(H=>{let te=nr(H,d.toGeoJSON(15)),ae;te&&te.features.length>0?ae=L.geoJSON(te):ae=L.geoJSON(H),ae.getLayers().forEach(be=>{Fa(d.toGeoJSON(15),be.toGeoJSON(15))||be.addTo(_)})}),k.length>1?C=ce(_):C=_.toGeoJSON(15)}return C},_change:L.Util.falseFn}),ws.Text=ws.extend({initialize(d){this._map=d,this._shape="Text",this.toolbarButtonName="drawText"},enable(d){L.Util.setOptions(this,d),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(hr("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var d;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(d=this._hintMarker)==null||d.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this.options.snappable){let m=d;m.target=this._hintMarker,this._handleSnapping(m)}},_createMarker(d){var k,H,te,ae;if(!d.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let m=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(k=this.options.textOptions)==null?void 0:k.className){let be=this.options.textOptions.className.split(" ");this.textArea.classList.add(...be)}let _=this._createTextIcon(this.textArea),C=new L.Marker(m,{textMarker:!0,_textMarkerOverPM:!0,icon:_});if(this._setPane(C,"markerPane"),this._finishLayer(C),C.pm||(C.options.draggable=!1),C.addTo(this._map.pm._getContainingLayer()),C.pm){C.pm.textArea=this.textArea,L.setOptions(C.pm,{removeIfEmpty:((H=this.options.textOptions)==null?void 0:H.removeIfEmpty)??!0});let be=((te=this.options.textOptions)==null?void 0:te.focusAfterDraw)??!0;C.pm._createTextMarker(be),(ae=this.options.textOptions)!=null&&ae.text&&C.pm.setText(this.options.textOptions.text)}this._fireCreate(C),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(d){this.enable(),this._hintMarker.setLatLng(d.latlng)},_createTextArea(){let d=document.createElement("textarea");return d.readOnly=!0,d.classList.add("pm-textarea","pm-disabled"),d},_createTextIcon(d){return L.divIcon({className:"pm-text-marker",html:d})}});var Le={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Ci(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let d=this._getDOMElem();d&&(Ci(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(d)):L.DomEvent.on(d,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,Ci(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let d=this._getDOMElem();d&&(Ci(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(d)):L.DomEvent.off(d,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(d){let m=d.touches?d.touches[0]:d,_={originalEvent:m,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(m),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseDown(_),!1},_simulateMouseMoveEvent(d){let m=d.touches?d.touches[0]:d,_={originalEvent:m,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(m),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseMove(_),!1},_simulateMouseUpEvent(d){let m={originalEvent:d.touches?d.touches[0]:d,target:this._layer};return d.type.indexOf("touch")===-1&&(m.containerPoint=this._map.mouseEventToContainerPoint(d),m.latlng=this._map.containerPointToLatLng(m.containerPoint)),this._dragMixinOnMouseUp(m),!1},_dragMixinOnMouseDown(d){if(d.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(d);let m=d._fromLayerSync,_=this._syncLayers("_dragMixinOnMouseDown",d);if(this._layer instanceof L.Marker&&(this.options.snappable&&!m&&!_?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let C="resizeableCircleMarker";this._layer instanceof L.Circle&&(C="resizeableCircle"),this.options.snappable&&!m&&!_?this._layer.pm.options[C]||this._initSnappableMarkersDrag():this._layer.pm.options[C]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=d.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(d){this._overwriteEventIfItComesFromMarker(d);let m=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",d),this._dragging||(this._dragging=!0,L.DomUtil.addClass(m,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=d.latlng),this._onLayerDrag(d),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(d){let m=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",d),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,m&&L.DomUtil.removeClass(m,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(d){let{latlng:m}=d,_={lat:m.lat-this._tempDragCoord.lat,lng:m.lng-this._tempDragCoord.lng},C=k=>k.map(H=>{if(Array.isArray(H))return C(H);let te={lat:H.lat+_.lat,lng:H.lng+_.lng};return(H.alt||H.alt===0)&&(te.alt=H.alt),te});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let k=C([this._layer.getLatLng()]);this._layer.setLatLng(k[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let k=this._layer.getLatLng();this._layer._snapped&&(k=this._layer._orgLatLng);let H=C([k]);this._layer.setLatLng(H[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let k=C([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(k),this._fireChange(this._layer.getBounds(),"Edit")}else{let k=C(this._layer.getLatLngs());this._layer.setLatLngs(k),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=m,d.layer=this._layer,this._fireDrag(d)},addDraggingClass(){let d=this._getDOMElem();d&&L.DomUtil.addClass(d,"leaflet-pm-draggable")},removeDraggingClass(){let d=this._getDOMElem();d&&L.DomUtil.removeClass(d,"leaflet-pm-draggable")},_getDOMElem(){let d=null;return this._layer._path?d=this._layer._path:this._layer._renderer&&this._layer._renderer._container?d=this._layer._renderer._container:this._layer._image?d=this._layer._image:this._layer._icon&&(d=this._layer._icon),d},_overwriteEventIfItComesFromMarker(d){d.target.getLatLng&&(!d.target._radius||d.target._radius<=10)&&(d.containerPoint=this._map.mouseEventToContainerPoint(d.originalEvent),d.latlng=this._map.containerPointToLatLng(d.containerPoint))},_syncLayers(d,m){if(this.enabled())return!1;if(!m._fromLayerSync&&this._layer===m.target&&this.options.syncLayersOnDrag){m._fromLayerSync=!0;let _=[];if(L.Util.isArray(this.options.syncLayersOnDrag))_=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(C=>{C instanceof L.LayerGroup&&(_=_.concat(C.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let C in this._parentLayerGroup){let k=this._parentLayerGroup[C];k.pm&&(_=k.pm.getLayers(!0))}return L.Util.isArray(_)&&_.length>0&&(_=_.filter(C=>!!C.pm).filter(C=>!!C.pm.options.draggable),_.forEach(C=>{C!==this._layer&&C.pm[d]&&(C._snapped=!1,C.pm[d](m))})),_.length>0}return!1},_stopDOMImageDrag(d){return d.preventDefault(),!1}},Me=Le,Te=l(Vr());function Oe(d,m,_,C){return _.unproject(m.transform(_.project(d,C)),C)}function Re(d,m,_){let C=_.getMaxZoom();if(C===1/0&&(C=_.getZoom()),L.Util.isArray(d)){let k=[];return d.forEach(H=>{k.push(Re(H,m,_))}),k}return d instanceof L.LatLng?Oe(d,m,_,C):null}function Ke(d,m){m instanceof L.Layer&&(m=m.getLatLng());let _=d.getMaxZoom();return _===1/0&&(_=d.getZoom()),d.project(m,_)}function vt(d,m){let _=d.getMaxZoom();return _===1/0&&(_=d.getZoom()),d.unproject(m,_)}var Rt={_onRotateStart(d){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Ke(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Ke(this._map,d.target.getLatLng()),this._initialRotateLatLng=da(this._layer),this._startAngle=this.getAngle();let m=da(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,m),this._fireRotationStart(this._map,m)},_onRotate(d){let m=Ke(this._map,d.target.getLatLng()),_=this._rotationStartPoint,C=this._rotationOriginPoint,k=Math.atan2(m.y-C.y,m.x-C.x)-Math.atan2(_.y-C.y,_.x-C.x);this._layer.setLatLngs(this._rotateLayer(k,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let H=this;function te(rt,Ge=[],wt=-1){if(wt>-1&&Ge.push(wt),L.Util.isArray(rt[0]))rt.forEach((It,tn)=>te(It,Ge.slice(),tn));else{let It=Ge.length>0?(0,Te.default)(H._markers,Ge):H._markers[0];rt.forEach((tn,_n)=>{It[_n].setLatLng(tn)})}}te(this._layer.getLatLngs());let ae=da(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(k,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let be=k*180/Math.PI;be=be<0?be+360:be;let Ce=be+this._startAngle;this._setAngle(Ce),this._rotationLayer.pm._setAngle(Ce),this._fireRotation(this._rotationLayer,be,ae),this._fireRotation(this._map,be,ae),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let d=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let m=da(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=da(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,d,m),this._fireRotationEnd(this._map,d,m),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(d,m,_,C,k){let H=Ke(k,_);return this._matrix=C.clone().rotate(d,H).flip(),Re(m,this._matrix,k)},_setAngle(d){d=d<0?d+360:d,this._angle=d%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let d=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),m=d.getCenter();return d.removeFrom(this._layer._map),m},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Oa(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let d={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),d),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=da(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(d){let m=this.getAngle(),_=this._layer.getLatLngs(),C=d*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(C,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+d),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(C,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let k=this.getAngle()-m;k=k<0?k+360:k,this._startAngle=m,this._fireRotation(this._layer,k,_,this._layer),this._fireRotation(this._map||this._layer._map,k,_,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(d){let m=d-this.getAngle();this.rotateLayer(m)},getAngle(){return this._angle||0},setInitAngle(d){this._setAngle(d)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(d){this._rotationCenter=d,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(d)}},Ft=Rt,Pt=L.Class.extend({includes:[Me,ra,Ft,cu],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(d){L.Util.setOptions(this,d)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(d,m){m==="layerPane"?d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":m==="vertexPane"?d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":m==="markerPane"&&(d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(d,m){let _=m.target,C={layer:this._layer,marker:_,event:m},k="";return d==="move"?k="moveVertexValidation":d==="add"?k="addVertexValidation":d==="remove"&&(k="removeVertexValidation"),this.options[k]&&typeof this.options[k]=="function"&&!this.options[k](C)?(d==="move"&&(_._cancelDragEventChain=_.getLatLng()),!1):(_._cancelDragEventChain=null,!0)},_vertexValidationDrag(d){return d._cancelDragEventChain?(d._latlng=d._cancelDragEventChain,d.update(),!1):!0},_vertexValidationDragEnd(d){return d._cancelDragEventChain?(d._cancelDragEventChain=null,!1):!0}}),Xt=Pt;Xt.LayerGroup=L.Class.extend({initialize(d){this._layerGroup=d,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(C=>this._initLayer(C));let m=C=>{if(C.layer._pmTempLayer)return;this._layers=this.getLayers();let k=this._layers.filter(H=>!H.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in H.pm._parentLayerGroup));k.forEach(H=>{this._initLayer(H)}),k.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(m,100,this),this),this._layerGroup.on("layerremove",C=>{this._removeLayerFromGroup(C.target)},this);let _=C=>{C.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(_,100,this),this)},enable(d,m=[]){m.length===0&&(this._layers=this.getLayers()),this._options=d,this._layers.forEach(_=>{_ instanceof L.LayerGroup?m.indexOf(_._leaflet_id)===-1&&(m.push(_._leaflet_id),_.pm.enable(d,m)):_.pm.enable(d)})},disable(d=[]){d.length===0&&(this._layers=this.getLayers()),this._layers.forEach(m=>{m instanceof L.LayerGroup?d.indexOf(m._leaflet_id)===-1&&(d.push(m._leaflet_id),m.pm.disable(d)):m.pm.disable()})},enabled(d=[]){return d.length===0&&(this._layers=this.getLayers()),!!this._layers.find(m=>m instanceof L.LayerGroup?d.indexOf(m._leaflet_id)===-1?(d.push(m._leaflet_id),m.pm.enabled(d)):!1:m.pm.enabled())},toggleEdit(d,m=[]){m.length===0&&(this._layers=this.getLayers()),this._options=d,this._layers.forEach(_=>{_ instanceof L.LayerGroup?m.indexOf(_._leaflet_id)===-1&&(m.push(_._leaflet_id),_.pm.toggleEdit(d,m)):_.pm.toggleEdit(d)})},_initLayer(d){let m=L.Util.stamp(this._layerGroup);d.pm._parentLayerGroup||(d.pm._parentLayerGroup={}),d.pm._parentLayerGroup[m]=this._layerGroup},_removeLayerFromGroup(d){if(d.pm&&d.pm._layerGroup){let m=L.Util.stamp(this._layerGroup);delete d.pm._layerGroup[m]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(d=>d.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var d;return this._map||((d=this._layers.find(m=>!!m._map))==null?void 0:d._map)||null},getLayers(d=!1,m=!0,_=!0,C=[]){let k=[];return d?this._layerGroup.getLayers().forEach(H=>{k.push(H),H instanceof L.LayerGroup&&C.indexOf(H._leaflet_id)===-1&&(C.push(H._leaflet_id),k=k.concat(H.pm.getLayers(!0,!0,!0,C)))}):k=this._layerGroup.getLayers(),_&&(k=k.filter(H=>!(H instanceof L.LayerGroup))),m&&(k=k.filter(H=>!!H.pm),k=k.filter(H=>!H._pmTempLayer),k=k.filter(H=>!L.PM.optIn&&!H.options.pmIgnore||L.PM.optIn&&H.options.pmIgnore===!1)),k},setOptions(d,m=[]){m.length===0&&(this._layers=this.getLayers()),this.options=d,this._layers.forEach(_=>{_.pm&&(_ instanceof L.LayerGroup?m.indexOf(_._leaflet_id)===-1&&(m.push(_._leaflet_id),_.pm.setOptions(d,m)):_.pm.setOptions(d))})}}),Xt.Marker=Xt.extend({_shape:"Marker",initialize(d){this._layer=d,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(d={draggable:!0}){if(L.Util.setOptions(this,d),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(d){this.enabled()?this.disable():this.enable(d)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(d){let m=d.target;m.remove(),this._fireRemove(m),this._fireRemove(this._map,m)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let d=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,d.off("pm:drag",this._handleSnapping,this),d.on("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.on("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this),d.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let d=this._layer;d.off("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this)}});var Gt=l(Vr()),yt={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let d=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=d.filter((m,_,C)=>C.indexOf(m)===_)},_removeFromCache(d){let m=this.markerCache.indexOf(d);m>-1&&this.markerCache.splice(m,1)},renderLimits(d){this.markerCache.forEach(m=>{d.includes(m)?this._markerGroup.addLayer(m):this._markerGroup.removeLayer(m)})},applyLimitFilters({latlng:d={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let m=[...this._filterClosestMarkers(d)];this.renderLimits(m)},_filterClosestMarkers(d){let m=[...this.markerCache],_=this.options.limitMarkersToCount;return _===-1?m:(m.sort((C,k)=>{let H=C._latlng.distanceTo(d),te=k._latlng.distanceTo(d);return H-te}),m.filter((C,k)=>_>-1?k<_:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(d){this._preventRenderMarkers=!!d}},Lt=yt;Xt.Line=Xt.extend({includes:[Lt],_shape:"Line",initialize(d){this._layer=d,this._enabled=!1},enable(d){if(L.Util.setOptions(this,d),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let d=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(d,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(d){return this.enabled()?this.disable():this.enable(d),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let d=this._map,m=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(d),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let _=C=>{if(Array.isArray(C[0]))return C.map(_,this);let k=C.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&C.map((H,te)=>{let ae=this.isPolygon()?(te+1)%C.length:te+1;return this._createMiddleMarker(k[te],k[ae])}),k};this._markers=_(m),this.filterMarkerGroup(),d.addLayer(this._markerGroup)},_createMarker(d){let m=new L.Marker(d,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(m,"vertexPane"),m._pmTempLayer=!0,this.options.rotate?(m.on("dragstart",this._onRotateStart,this),m.on("drag",this._onRotate,this),m.on("dragend",this._onRotateEnd,this)):(m.on("click",this._onVertexClick,this),m.on("dragstart",this._onMarkerDragStart,this),m.on("move",this._onMarkerDrag,this),m.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||m.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(m),m},_createMiddleMarker(d,m){if(!d||!m)return!1;let _=L.PM.Utils.calcMiddleLatLng(this._map,d.getLatLng(),m.getLatLng()),C=this._createMarker(_),k=L.divIcon({className:"marker-icon marker-icon-middle"});return C.setIcon(k),C.leftM=d,C.rightM=m,d._middleMarkerNext=C,m._middleMarkerPrev=C,C.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),C.on("movestart",this._onMiddleMarkerMoveStart,this),C},_onMiddleMarkerClick(d){let m=d.target;if(!this._vertexValidation("add",d))return;let _=L.divIcon({className:"marker-icon"});m.setIcon(_),this._addMarker(m,m.leftM,m.rightM)},_onMiddleMarkerMoveStart(d){let m=d.target;if(m.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",d)){m.on("move",this._onMiddleMarkerMovePrevent,this);return}m._dragging=!0,this._addMarker(m,m.leftM,m.rightM)},_onMiddleMarkerMovePrevent(d){let m=d.target;this._vertexValidationDrag(m)},_onMiddleMarkerMoveEnd(d){let m=d.target;if(m.off("move",this._onMiddleMarkerMovePrevent,this),m.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(m))return;let _=L.divIcon({className:"marker-icon"});m.setIcon(_),setTimeout(()=>{delete m._dragging},100)},_addMarker(d,m,_){d.off("movestart",this._onMiddleMarkerMoveStart,this),d.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let C=d.getLatLng(),k=this._layer._latlngs;delete d.leftM,delete d.rightM;let{indexPath:H,index:te,parentPath:ae}=L.PM.Utils.findDeepMarkerIndex(this._markers,m),be=H.length>1?(0,Gt.default)(k,ae):k,Ce=H.length>1?(0,Gt.default)(this._markers,ae):this._markers;be.splice(te+1,0,C),Ce.splice(te+1,0,d),this._layer.setLatLngs(k),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(m,d),this._createMiddleMarker(d,_)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(d,L.PM.Utils.findDeepMarkerIndex(this._markers,d).indexPath,C),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Yr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(d){let m=this._layer,_,C;if(this.options.allowSelfIntersection?_=!1:(C=Yr(this._layer.toGeoJSON(15)),_=C.features.length>0),_){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return _;d?this._flashLayer():(m.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(C)}else m.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return _},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(d,m){d.forEach(_=>{Array.isArray(_)?this._updateDisabledMarkerStyle(_,m):_._icon&&(m&&!this._checkMarkerAllowedToDrag(_)?L.DomUtil.addClass(_._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(_._icon,"vertexmarker-disabled"))})},_removeMarker(d){let m=d.target;if(!this._vertexValidation("remove",d))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=da(this._layer,this._layer.getLatLngs()));let _=this._layer.getLatLngs(),{indexPath:C,index:k,parentPath:H}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);if(!C)return;let te=C.length>1?(0,Gt.default)(_,H):_,ae=C.length>1?(0,Gt.default)(this._markers,H):this._markers,be=H[H.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!be&&(te.length<=2||this.isPolygon()&&te.length<=3)){this._flashLayer();return}te.splice(k,1),this._layer.setLatLngs(_),this.isPolygon()&&te.length<=2&&te.splice(0,te.length);let Ce=!1;if(te.length<=1&&(te.splice(0,te.length),H.length>1&&C.length>1&&(_=Bl(_)),this._layer.setLatLngs(_),this._initMarkers(),Ce=!0),_s(_)||this._layer.remove(),_=Bl(_),this._layer.setLatLngs(_),this._markers=Bl(this._markers),!Ce&&(ae=C.length>1?(0,Gt.default)(this._markers,H):this._markers,m._middleMarkerPrev&&(this._markerGroup.removeLayer(m._middleMarkerPrev),this._removeFromCache(m._middleMarkerPrev)),m._middleMarkerNext&&(this._markerGroup.removeLayer(m._middleMarkerNext),this._removeFromCache(m._middleMarkerNext)),this._markerGroup.removeLayer(m),this._removeFromCache(m),ae)){let rt,Ge;if(this.isPolygon()?(rt=(k+1)%ae.length,Ge=(k+(ae.length-1))%ae.length):(Ge=k-1<0?void 0:k-1,rt=k+1>=ae.length?void 0:k+1),rt!==Ge){let wt=ae[Ge],It=ae[rt];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(wt,It)}ae.splice(k,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(m,C),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(d){let m=this._layer.getLatLngs(),_=d.getLatLng(),{indexPath:C,index:k,parentPath:H}=L.PM.Utils.findDeepMarkerIndex(this._markers,d);(C.length>1?(0,Gt.default)(m,H):m).splice(k,1,_),this._layer.setLatLngs(m)},_getNeighborMarkers(d){let{indexPath:m,index:_,parentPath:C}=L.PM.Utils.findDeepMarkerIndex(this._markers,d),k=m.length>1?(0,Gt.default)(this._markers,C):this._markers,H=(_+1)%k.length,te=(_+(k.length-1))%k.length,ae=k[te],be=k[H];return{prevMarker:ae,nextMarker:be}},_checkMarkerAllowedToDrag(d){let{prevMarker:m,nextMarker:_}=this._getNeighborMarkers(d),C=L.polyline([m.getLatLng(),d.getLatLng()]),k=L.polyline([d.getLatLng(),_.getLatLng()]),H=Vo(this._layer.toGeoJSON(15),C.toGeoJSON(15)).features.length,te=Vo(this._layer.toGeoJSON(15),k.toGeoJSON(15)).features.length;return d.getLatLng()===this._markers[0][0].getLatLng()?te+=1:d.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(H+=1),!(H<=2&&te<=2)},_onMarkerDragStart(d){let m=d.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",d))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);this._fireMarkerDragStart(d,_),this.options.allowSelfIntersection||(this._coordsBeforeEdit=da(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(m):this._markerAllowedToDrag=null},_onMarkerDrag(d){let m=d.target;if(!this._vertexValidationDrag(m))return;let{indexPath:_,index:C,parentPath:k}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);if(!_)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(m);let H=_.length>1?(0,Gt.default)(this._markers,k):this._markers,te=(C+1)%H.length,ae=(C+(H.length-1))%H.length,be=m.getLatLng(),Ce=H[ae].getLatLng(),rt=H[te].getLatLng();if(m._middleMarkerNext){let Ge=L.PM.Utils.calcMiddleLatLng(this._map,be,rt);m._middleMarkerNext.setLatLng(Ge)}if(m._middleMarkerPrev){let Ge=L.PM.Utils.calcMiddleLatLng(this._map,be,Ce);m._middleMarkerPrev.setLatLng(Ge)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(d,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(d){let m=d.target;if(!this._vertexValidationDragEnd(m))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,m),C=!this.options.allowSelfIntersection&&this.hasSelfIntersection();C&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(C=!1);let k=!this.options.allowSelfIntersection&&C;if(this._fireMarkerDragEnd(d,_,k),k){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(d,_);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(d){let m=d.target;if(m._dragging)return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);this._fireVertexClick(d,_)}}),Xt.Polygon=Xt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(d){let{prevMarker:m,nextMarker:_}=this._getNeighborMarkers(d),C=L.polyline([m.getLatLng(),d.getLatLng()]),k=L.polyline([d.getLatLng(),_.getLatLng()]),H=Vo(this._layer.toGeoJSON(15),C.toGeoJSON(15)).features.length,te=Vo(this._layer.toGeoJSON(15),k.toGeoJSON(15)).features.length;return!(H<=2&&te<=2)}}),Xt.Rectangle=Xt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let d=this._map,m=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,d.addLayer(this._markerGroup),this._markers=[],this._markers[0]=m.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((_,C)=>{let k=this._cornerMarkers.find(H=>H._index===C);k&&k.setLatLng(_)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(d,m){let _=new L.Marker(d,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(_,"vertexPane"),_._origLatLng=d,_._index=m,_._pmTempLayer=!0,_.on("click",this._onVertexClick,this),this._markerGroup.addLayer(_),_},_addMarkerEvents(){this._markers[0].forEach(d=>{d.on("dragstart",this._onMarkerDragStart,this),d.on("drag",this._onMarkerDrag,this),d.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||d.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(d){if(!this._vertexValidation("move",d))return;let m=d.target,_=this._cornerMarkers;m._oppositeCornerLatLng=_.find(k=>k._index===(m._index+2)%4).getLatLng(),m._snapped=!1;let{indexPath:C}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);this._fireMarkerDragStart(d,C)},_onMarkerDrag(d){let m=d.target;if(!this._vertexValidationDrag(m)||m._index===void 0)return;this._adjustRectangleForMarkerMove(m);let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);this._fireMarkerDrag(d,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(d){let m=d.target;if(!this._vertexValidationDragEnd(m))return;this._cornerMarkers.forEach(C=>{delete C._oppositeCornerLatLng});let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);this._fireMarkerDragEnd(d,_),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(d){L.extend(d._origLatLng,d._latlng);let m=L.PM.Utils._getRotatedRectangle(d.getLatLng(),d._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(m),this._adjustAllMarkers(d),this._layer.redraw()},_adjustAllMarkers(d){let m=this._layer.getLatLngs()[0];if(m&&m.length!==4&&m.length>0)m.forEach((_,C)=>{this._cornerMarkers[C].setLatLng(_)}),this._cornerMarkers.slice(m.length).forEach(_=>{_.setLatLng(m[0])});else if(!m||!m.length)console.error("The layer has no LatLngs");else{let _=m.findIndex(C=>d.getLatLng().equals(C));_>-1?(this._cornerMarkers[(d._index+1)%4].setLatLng(m[(_+1)%4]),this._cornerMarkers[(d._index+2)%4].setLatLng(m[(_+2)%4]),this._cornerMarkers[(d._index+3)%4].setLatLng(m[(_+3)%4])):this._cornerMarkers.forEach(C=>{C.setLatLng(m[C._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Oa(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let d=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(d[0],d[2],this.getAngle(),this._map||this)}}),Xt.CircleMarker=Xt.extend({_shape:"CircleMarker",initialize(d){this._layer=d,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(d={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,d),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(d){this.enabled()?this.disable():this.enable(d)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let d=this._map;this._helperLayers&&(this._helperLayers.removeFrom(d),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(d);let m=this._layer.getLatLng(),_=this._layer._radius,C=this._getLatLngOnCircle(m,_);this._centerMarker=this._createCenterMarker(m),this._outerMarker=this._createOuterMarker(C),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(d,m){let _=this._map.project(d),C=L.point(_.x+m,_.y);return this._map.unproject(C)},_createHintLine(d,m){let _=d.getLatLng(),C=m.getLatLng();this._hintline=L.polyline([_,C],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(d){let m=this._createMarker(d);return this.options.draggable?(L.DomUtil.addClass(m._icon,"leaflet-pm-draggable"),m.on("move",this._moveCircle,this)):m.dragging.disable(),m},_createOuterMarker(d){let m=this._createMarker(d);return m.on("drag",this._resizeCircle,this),m},_createMarker(d){let m=new L.Marker(d,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(m,"vertexPane"),m._origLatLng=d,m._pmTempLayer=!0,m.on("dragstart",this._onMarkerDragStart,this),m.on("drag",this._onMarkerDrag,this),m.on("dragend",this._onMarkerDragEnd,this),m.on("click",this._onVertexClick,this),this._helperLayers.addLayer(m),m},_moveCircle(d){if(d.target._cancelDragEventChain)return;let m=this._centerMarker.getLatLng();this._layer.setLatLng(m);let _=this._layer._radius,C=this._getLatLngOnCircle(m,_);this._outerMarker._latlng=C,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let d=this._layer.getLatLng(),m=this._layer._radius,_=this._getLatLngOnCircle(d,m);this._outerMarker.setLatLng(_),this._centerMarker.setLatLng(d),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let d=this._centerMarker.getLatLng(),m=this._outerMarker.getLatLng(),_=this._distanceCalculation(d,m);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let d=this._centerMarker.getLatLng(),m=this._outerMarker.getLatLng();this._hintline.setLatLngs([d,m])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(d){this._vertexValidation("move",d)&&this._fireMarkerDragStart(d)},_onMarkerDrag(d){let m=d.target;m instanceof L.Marker&&!this._vertexValidationDrag(m)||this._fireMarkerDrag(d)},_onMarkerDragEnd(d){this._extedingMarkerDragEnd();let m=d.target;this._vertexValidationDragEnd(m)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(d))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let d=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,d.off("pm:drag",this._handleSnapping,this),d.on("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.on("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this),d.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let d=this._layer;d.off("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let d=this._layer._map||this._map;if(d){let m=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),d,this._layer.getLatLng()),_=L.circle(this._layer.getLatLng(),this._layer.options);_.setRadius(m);let C=d&&d.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(_,200,!C).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(_,200,!C),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let d=this._centerMarker.getLatLng(),m=this._outerMarker.getLatLng(),_=this._distanceCalculation(d,m);return this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?m=du(this._map,d,m,this._getMinDistanceInMeter(d)):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(m=du(this._map,d,m,this._getMaxDistanceInMeter(d))),m},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let d=this._centerMarker.getLatLng(),m=this._outerMarker.getLatLng(),_=this._distanceCalculation(d,m);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(d,m){return this._map.project(d).distanceTo(this._map.project(m))},_getMinDistanceInMeter(d){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,d)},_getMaxDistanceInMeter(d){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,d)},_onVertexClick(d){d.target._dragging||this._fireVertexClick(d,void 0)}}),Xt.Circle=Xt.CircleMarker.extend({_shape:"Circle",initialize(d){this._layer=d,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(d){L.PM.Edit.CircleMarker.prototype.enable.call(this,d||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let d=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(d,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let d=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!d).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!d),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(d,m){return this._map.distance(d,m)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(d){d.target._dragging||this._fireVertexClick(d,void 0)}}),Xt.ImageOverlay=Xt.extend({_shape:"ImageOverlay",initialize(d){this._layer=d,this._enabled=!1},toggleEdit(d){this.enabled()?this.disable():this.enable(d)},enabled(){return this._enabled},enable(d={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,d),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let d=this._layer.getBounds(),m=d.getNorthWest(),_=d.getNorthEast(),C=d.getSouthEast(),k=d.getSouthWest();return[m,_,C,k]}}),Xt.Text=Xt.extend({_shape:"Text",initialize(d){this._layer=d,this._enabled=!1},enable(d){if(L.Util.setOptions(this,d),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let d=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),d.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(d){this.enabled()?this.disable():this.enable(d)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let d=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,d.off("pm:drag",this._handleSnapping,this),d.on("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.on("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this),d.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let d=this._layer;d.off("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let d=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,m=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${d}px`,this.textArea.style.width=`${m}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(d){d.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(d={}){let m=this._hasFocus;this._hasFocus=d.type==="focus",!m!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(d){d&&(this.textArea.value=d),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let m=this.options.className.split(" ");this.textArea.classList.add(...m)}let d=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(d),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(d=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),d===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(d){d.preventDefault()}});var rn=function(d,m,_,C,k,H){this._matrix=[d,m,_,C,k,H]};rn.init=()=>new L.PM.Matrix(1,0,0,1,0,0),rn.prototype={transform(d){return this._transform(d.clone())},_transform(d){let m=this._matrix,{x:_,y:C}=d;return d.x=m[0]*_+m[1]*C+m[4],d.y=m[2]*_+m[3]*C+m[5],d},untransform(d){let m=this._matrix;return new L.Point((d.x/m[0]-m[4])/m[0],(d.y/m[2]-m[5])/m[2])},clone(){let d=this._matrix;return new L.PM.Matrix(d[0],d[1],d[2],d[3],d[4],d[5])},translate(d){if(d===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let m,_;return typeof d=="number"?(m=d,_=d):(m=d.x,_=d.y),this._add(1,0,0,1,m,_)},scale(d,m){if(d===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let _,C;return m=m||L.point(0,0),typeof d=="number"?(_=d,C=d):(_=d.x,C=d.y),this._add(_,0,0,C,m.x,m.y)._add(1,0,0,1,-m.x,-m.y)},rotate(d,m){let _=Math.cos(d),C=Math.sin(d);return m=m||new L.Point(0,0),this._add(_,C,-C,_,m.x,m.y)._add(1,0,0,1,-m.x,-m.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(d,m,_,C,k,H){let te=[[],[],[]],ae=this._matrix,be=[[ae[0],ae[2],ae[4]],[ae[1],ae[3],ae[5]],[0,0,1]],Ce=[[d,_,k],[m,C,H],[0,0,1]],rt;d&&d instanceof L.PM.Matrix&&(ae=d._matrix,Ce=[[ae[0],ae[2],ae[4]],[ae[1],ae[3],ae[5]],[0,0,1]]);for(let Ge=0;Ge<3;Ge+=1)for(let wt=0;wt<3;wt+=1){rt=0;for(let It=0;It<3;It+=1)rt+=be[Ge][It]*Ce[It][wt];te[Ge][wt]=rt}return this._matrix=[te[0][0],te[1][0],te[0][1],te[1][1],te[0][2],te[1][2]],this}};var fn=rn,sn={calcMiddleLatLng(d,m,_){let C=d.project(m),k=d.project(_);return d.unproject(C._add(k)._divideBy(2))},findLayers(d){let m=[];return d.eachLayer(_=>{(_ instanceof L.Polyline||_ instanceof L.Marker||_ instanceof L.Circle||_ instanceof L.CircleMarker||_ instanceof L.ImageOverlay)&&m.push(_)}),m=m.filter(_=>!!_.pm),m=m.filter(_=>!_._pmTempLayer),m=m.filter(_=>!L.PM.optIn&&!_.options.pmIgnore||L.PM.optIn&&_.options.pmIgnore===!1),m},circleToPolygon(d,m=60,_=!0){let C=d.getLatLng(),k=d.getRadius(),H=Qi(C,k,m,0,_),te=[];for(let ae=0;ae<H.length;ae+=1){let be=[H[ae].lat,H[ae].lng];te.push(be)}return L.polygon(te,d.options)},disablePopup(d){d.getPopup()&&(d._tempPopupCopy=d.getPopup(),d.unbindPopup())},enablePopup(d){d._tempPopupCopy&&(d.bindPopup(d._tempPopupCopy),delete d._tempPopupCopy)},_fireEvent(d,m,_,C=!1){d.fire(m,_,C);let{groups:k}=this.getAllParentGroups(d);k.forEach(H=>{H.fire(m,_,C)})},getAllParentGroups(d){let m=[],_=[],C=k=>{for(let H in k._eventParents)if(m.indexOf(H)===-1){m.push(H);let te=k._eventParents[H];_.push(te),C(te)}};return!d._pmLastGroupFetch||!d._pmLastGroupFetch.time||new Date().getTime()-d._pmLastGroupFetch.time>1e3?(C(d),d._pmLastGroupFetch={time:new Date().getTime(),groups:_,groupIds:m},{groupIds:m,groups:_}):{groups:d._pmLastGroupFetch.groups,groupIds:d._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Qi,getTranslation:hr,findDeepCoordIndex(d,m,_=!0){let C,k=te=>(ae,be)=>{let Ce=te.concat(be);if(_){if(ae.lat&&ae.lat===m.lat&&ae.lng===m.lng)return C=Ce,!0}else if(ae.lat&&L.latLng(ae).equals(m))return C=Ce,!0;return Array.isArray(ae)&&ae.some(k(Ce))};d.some(k([]));let H={};return C&&(H={indexPath:C,index:C[C.length-1],parentPath:C.slice(0,C.length-1)}),H},findDeepMarkerIndex(d,m){let _,C=H=>(te,ae)=>{let be=H.concat(ae);return te._leaflet_id===m._leaflet_id?(_=be,!0):Array.isArray(te)&&te.some(C(be))};d.some(C([]));let k={};return _&&(k={indexPath:_,index:_[_.length-1],parentPath:_.slice(0,_.length-1)}),k},_getIndexFromSegment(d,m){if(m&&m.length===2){let _=this.findDeepCoordIndex(d,m[0]),C=this.findDeepCoordIndex(d,m[1]),k=Math.max(_.index,C.index);return(_.index===0||C.index===0)&&k!==1&&(k+=1),{indexA:_,indexB:C,newIndex:k,indexPath:_.indexPath,parentPath:_.parentPath}}return null},_getRotatedRectangle(d,m,_,C){let k=Ke(C,d),H=Ke(C,m),te=_*Math.PI/180,ae=Math.cos(te),be=Math.sin(te),Ce=(H.x-k.x)*ae+(H.y-k.y)*be,rt=(H.y-k.y)*ae-(H.x-k.x)*be,Ge=Ce*ae+k.x,wt=Ce*be+k.y,It=-rt*be+k.x,tn=rt*ae+k.y,_n=vt(C,k),Mn=vt(C,{x:Ge,y:wt}),yr=vt(C,H),nt=vt(C,{x:It,y:tn});return[_n,Mn,yr,nt]},pxRadiusToMeterRadius(d,m,_){let C=m.project(_),k=L.point(C.x+d,C.y);return m.distance(m.unproject(k),_)}},Rn=sn;L.PM=L.PM||{version:no.version,Map:Gs,Toolbar:Rl,Draw:ws,Edit:Xt,Utils:Rn,Matrix:fn,activeLang:"en",optIn:!1,initialize(d){this.addInitHooks(d)},setOptIn(d){this.optIn=!!d},addInitHooks(){function d(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(d);function m(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(m);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(_);function C(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(C);function k(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(k);function H(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(H);function te(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(te);function ae(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(ae);function be(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(be)},reInitLayer(d){d instanceof L.LayerGroup&&d.eachLayer(m=>{this.reInitLayer(m)}),d.pm||L.PM.optIn&&d.options.pmIgnore!==!1||d.options.pmIgnore||(d instanceof L.Map?d.pm=new L.PM.Map(d):d instanceof L.Marker?d.options.textMarker?(d.pm=new L.PM.Edit.Text(d),d.pm._initTextMarker(),d.pm._createTextMarker(!1)):d.pm=new L.PM.Edit.Marker(d):d instanceof L.Circle?d.pm=new L.PM.Edit.Circle(d):d instanceof L.CircleMarker?d.pm=new L.PM.Edit.CircleMarker(d):d instanceof L.Rectangle?d.pm=new L.PM.Edit.Rectangle(d):d instanceof L.Polygon?d.pm=new L.PM.Edit.Polygon(d):d instanceof L.Polyline?d.pm=new L.PM.Edit.Line(d):d instanceof L.LayerGroup?d.pm=new L.PM.Edit.LayerGroup(d):d instanceof L.ImageOverlay&&(d.pm=new L.PM.Edit.ImageOverlay(d)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(d){let m=this._map.mouseEventToLayerPoint(d),_,C;for(let k=this._drawFirst;k;k=k.next)_=k.layer,_.options.interactive&&_._containsPoint(m)&&(!(d.type==="click"||d.type==="preclick")||!this._map._draggableMoved(_))&&(C=_);C&&(L.DomEvent.fakeStop(d),this._fireEvent([C],d))}}),L.PM.initialize()})();class sp extends Zn.Circle{constructor(n,r){const i=r.radius||10;super(n,i,r);Je(this,"properties");Je(this,"angleCache",new Map);Je(this,"lastCenter");Je(this,"lastCenterCosLat");Je(this,"_pendingNameUpdate",!1);Je(this,"_nameUpdateTimeout",null);An.measure("Circle.constructor.init",()=>{this.properties={type:"Circle",style:{name:r.name||""}},requestAnimationFrame(()=>{this.updateProperties()}),this.on("add",()=>{requestAnimationFrame(()=>{this.updateProperties()})})},"Circle")}updateProperties(){An.measure("Circle.updateProperties",()=>{var a,l,c,h;const n=this.getRadius(),r=this.getLatLng(),i=((l=(a=this.properties)==null?void 0:a.style)==null?void 0:l.name)||"",s=((c=this.properties)==null?void 0:c.style)||{},o={type:"Circle",radius:n,diameter:n*2,surface:Math.PI*Math.pow(n,2),perimeter:2*Math.PI*n,center:{lat:r.lat,lng:r.lng},style:{...s,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((h=this.options)==null?void 0:h.dashArray)||"",name:i}};JSON.stringify(this.properties)!==JSON.stringify(o)&&(this.properties=o,this.fire("properties:updated",{shape:this,properties:this.properties}))},"Circle")}setName(n){An.measure("Circle.setName",()=>{var r,i;((i=(r=this.properties)==null?void 0:r.style)==null?void 0:i.name)!==n&&(this.properties.style||(this.properties.style={}),this.properties.style.name=n,!this._pendingNameUpdate&&(this._pendingNameUpdate=!0,this._nameUpdateTimeout&&clearTimeout(this._nameUpdateTimeout),this._nameUpdateTimeout=setTimeout(()=>{this._pendingNameUpdate=!1,this._nameUpdateTimeout=null,this.fire("properties:updated",{shape:this,properties:this.properties})},100)))},"Circle")}getName(){return An.measure("Circle.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""},"Circle")}setRadius(n){return An.measure("Circle.setRadius",()=>(super.setRadius(n),this.updateProperties(),this),"Circle")}setLatLng(n){return An.measure("Circle.setLatLng",()=>(super.setLatLng(n),this.updateProperties(),this),"Circle")}calculatePointOnCircle(n){return An.measure("Circle.calculatePointOnCircle",()=>{const r=this.getLatLng(),i=this.getRadius();let s=this.angleCache.get(n);if(!s){const o=n*Math.PI/180;s={sin:Math.sin(o),cos:Math.cos(o)},this.angleCache.set(n,s)}return(!this.lastCenter||!this.lastCenter.equals(r))&&(this.lastCenter=r,this.lastCenterCosLat=Math.cos(r.lat*Math.PI/180)),Zn.latLng(r.lat+i/111319.9*s.sin,r.lng+i/(111319.9*this.lastCenterCosLat)*s.cos)},"Circle")}getCardinalPoints(){return An.measure("Circle.getCardinalPoints",()=>[0,45,90,135,180,225,270,315].map(n=>this.calculatePointOnCircle(n)),"Circle")}calculateAngleFromPoint(n){return An.measure("Circle.calculateAngleFromPoint",()=>{const r=this.getLatLng(),i=n.lng-r.lng,s=n.lat-r.lat;let o=Math.atan2(s,i)*180/Math.PI;return o<0&&(o+=360),o},"Circle")}resizeFromControlPoint(n){An.measure("Circle.resizeFromControlPoint",()=>{const i=this.getLatLng().distanceTo(n);i>0&&super.setRadius(i)},"Circle")}clearCache(){this.angleCache.clear(),this.lastCenter=void 0,this.lastCenterCosLat=void 0}}const qv=(t,e)=>{if(!t||typeof t!="string"||!t.startsWith("#"))return`rgba(0, 0, 0, ${e})`;const n=parseInt(t.slice(1,3),16),r=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return`rgba(${n}, ${r}, ${i}, ${e})`},g5=(t,e)=>{t.style.fontSize=e.fontSize,t.style.color=e.color,t.style.backgroundColor=qv(e.backgroundColor,e.backgroundOpacity),e.hasBorder?t.style.border=`${e.borderWidth} solid ${qv(e.borderColor,e.borderOpacity)}`:t.style.border="none",t.style.padding=e.padding,t.style.borderRadius=e.borderRadius},Gl=t=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const n=Vt.DomUtil.create("div","drawing-help-message");return n.innerHTML=t,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n};function m5(t,e,n){const r=156543.03392*Math.cos(e*Math.PI/180)/Math.pow(2,n);return t/r}const rs=(t,e="m",n="")=>{let r,i;return e==="m²"?t>=1e4?(r=(t/1e4).toFixed(2),i="ha"):(r=t.toFixed(2),i="m²"):e==="m"?t>=1e3?(r=(t/1e3).toFixed(2),i="km"):(r=t.toFixed(2),i="m"):(r=t.toFixed(2),i=e),n?`${n}: ${r} ${i}`:`${r} ${i}`},OU=t=>({...t,clientX:t.clientX,clientY:t.clientY,button:t.button||0,buttons:t.buttons||0,altKey:t.altKey||!1}),IU=(t,e)=>{let n;return function(...r){window.clearTimeout(n),n=window.setTimeout(()=>t.apply(this,r),e)}},Wh=(t,e)=>{let n=0;return function(...r){const i=Date.now();if(!(i-n<e))return n=i,t.apply(this,r)}};function BU(){const t=Ct(null),e=Ct(null),n=Ct(null),r=Ct(null),i=Ct(""),s=Ct(null),o=Ct(!1),a=Ct(null);window.addEventListener("clearControlPoints",()=>{s.value=null,n.value&&n.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(K=>K.remove()),document.querySelectorAll(".drawing-help-message").forEach(K=>K.remove())}),Zu(()=>{window.removeEventListener("clearControlPoints",()=>{}),t.value&&(t.value.remove(),t.value=null)});const l=(K,Z="Double-cliquez pour éditer")=>{const oe={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},de=(je,$e)=>{var We;const et=((We=t.value)==null?void 0:We.getZoom())||14,Ee=K.lat,me=m5($e.physicalSize,Ee,et);return`<div class="text-container" style="width:${me}px;height:${me}px;transform:rotate(${$e.rotation}deg)">
        <div class="text-annotation" style="font-size:${me*.2}px;color:${$e.color};background-color:${qv($e.backgroundColor,$e.backgroundOpacity)};border:${$e.hasBorder?$e.borderWidth+" solid "+qv($e.borderColor,$e.borderOpacity):"none"};padding:${$e.padding};border-radius:${$e.borderRadius}">${je}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},ye=()=>{if(!t.value)return;const je=X.getIcon(),$e={html:de(X.properties.text,X.properties.style),className:je.options.className};X.setIcon(Vt.divIcon($e))},he=Vt.divIcon({html:de(Z,oe),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),X=Vt.marker(K,{icon:he,draggable:!1,pmIgnore:!0});X.properties={type:"text",text:Z,style:{...oe}},t.value&&(t.value.on("zoomend",ye),X.on("remove",()=>{var je;(je=t.value)==null||je.off("zoomend",ye)})),ye();let Ae=!1,De=!1,Xe=0,fe=0;const ee=je=>{if(!t.value)return;const $e=je.target;if($e.classList.contains("rotate")){Ae=!0;const et=X.getLatLng(),Ee=t.value.mouseEventToLatLng(je);Xe=Math.atan2(Ee.lat-et.lat,Ee.lng-et.lng)*180/Math.PI,fe=X.properties.style.rotation||0}else $e.classList.contains("move")&&(De=!0);document.addEventListener("mousemove",se),document.addEventListener("mouseup",le)},se=je=>{if(!(!De||!t.value)){if(Ae){const $e=X.getLatLng(),et=t.value.mouseEventToLatLng(je),Ee=Math.atan2(et.lat-$e.lat,et.lng-$e.lng)*180/Math.PI,me=(fe+(Ee-Xe))%360;X.properties.style.rotation=me;const We=X.getIcon(),ct={html:de(X.properties.text,X.properties.style),className:We.options.className};X.setIcon(Vt.divIcon(ct))}else if(De){const $e=OU(je),et=t.value.mouseEventToLatLng($e);X.setLatLng(et)}}},le=()=>{Ae=!1,De=!1,document.removeEventListener("mousemove",se),document.removeEventListener("mouseup",le)};return X.on("add",()=>{const je=X.getElement();je&&je.querySelectorAll(".control-button").forEach(et=>{et.addEventListener("mousedown",ee)})}),X.on("remove",()=>{const je=X.getElement();je&&je.querySelectorAll(".control-button").forEach(et=>{et.removeEventListener("mousedown",ee)})}),X.on("dblclick",je=>{var ct;Vt.DomEvent.stopPropagation(je);const $e=(ct=X.getElement())==null?void 0:ct.querySelector(".text-annotation");if(!$e)return;$e.contentEditable="true",$e.focus(),$e.classList.add("editing");const et=window.getSelection(),Ee=document.createRange();Ee.selectNodeContents($e),et==null||et.removeAllRanges(),et==null||et.addRange(Ee);const me=()=>{$e.contentEditable="false",$e.classList.remove("editing");const pt=$e.innerText.trim();if(pt){X.properties.text=pt;const gt=X.getIcon(),st={html:de(pt,X.properties.style),className:gt.options.className};X.setIcon(Vt.divIcon(st))}$e.removeEventListener("blur",me),$e.removeEventListener("keydown",We)},We=pt=>{pt.key==="Enter"&&!pt.shiftKey&&(pt.preventDefault(),me())};$e.addEventListener("blur",me),$e.addEventListener("keydown",We)}),X},c=(K,Z)=>{const oe=Vt.DomUtil.create("div","measure-tooltip");if(oe.innerHTML=Z,oe.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(oe),t.value){const de=t.value.latLngToContainerPoint(K);oe.style.left=`${de.x+10}px`,oe.style.top=`${de.y-25}px`}return oe},h=Wh((K,Z,oe)=>{if(K&&(K.innerHTML=oe,t.value)){const de=t.value.latLngToContainerPoint(Z);K.style.left=`${de.x+10}px`,K.style.top=`${de.y-25}px`}},100),p=(K,Z,oe)=>{K.on("mouseover",()=>{const de=c(K.getLatLng(),oe());K.measureDiv=de}),K.on("mousemove",de=>{K.measureDiv&&t.value&&h(K.measureDiv,de.latlng,oe())}),K.on("mouseout",()=>{K.measureDiv&&(K.measureDiv.remove(),K.measureDiv=void 0)})};let v=[];const g=()=>{var K;v.cleanup&&v.cleanup(),n.value&&n.value.clearLayers(),v=[],(K=r.value)==null||K.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(Z=>Z.remove()),e.value&&e.value.getLayers().forEach(Z=>{Z instanceof qa&&Z.clearHelperPoints()})},x=(K,Z="#2563EB")=>{const oe=Vt.circleMarker(K,{radius:6,color:Z,fillColor:Z,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(oe),oe},E=(K,Z)=>{var de,ye,he,X,Ae,De;console.log("Input layer:",{type:Z,instanceof:{Circle:K instanceof Vt.Circle,Rectangle:K instanceof Vt.Rectangle,Polygon:K instanceof Vt.Polygon,Polyline:K instanceof Vt.Polyline,Line:K instanceof pa},options:K.options});const oe={type:Z,style:K.options||{}};try{if(K instanceof Vt.Circle){const Xe=K.getRadius();oe.radius=Xe,oe.diameter=Xe*2,oe.surface=Math.PI*Math.pow(Xe,2),oe.perimeter=2*Math.PI*Xe,oe.center=K.getLatLng()}else if(K instanceof Vt.Rectangle){const Xe=K.getBounds(),fe=Xe.getNorthEast(),ee=Xe.getSouthWest(),se=mc([[ee.lng,ee.lat],[fe.lng,ee.lat]]),le=mc([[ee.lng,ee.lat],[ee.lng,fe.lat]]),je=Hh(se,{units:"meters"}),$e=Hh(le,{units:"meters"});oe.width=je,oe.height=$e,oe.surface=je*$e,oe.perimeter=2*(je+$e),oe.dimensions={width:je,height:$e}}else if(K instanceof Vt.Polygon)try{const fe=K.getLatLngs()[0].map(se=>[se.lng,se.lat]);fe.push(fe[0]);const ee=Wu([fe]);oe.surface=Rc(ee),oe.perimeter=Hh(mc(fe),{units:"meters"})}catch(Xe){console.error("Erreur lors du calcul des propriétés du polygone",Xe)}else if(K instanceof Vt.Polyline&&!(K instanceof Vt.Polygon))try{const Xe=K.getLatLngs();let fe=0;for(let ee=1;ee<Xe.length;ee++)fe+=Xe[ee].distanceTo(Xe[ee-1]);oe.length=fe}catch(Xe){console.error("Erreur lors du calcul de la longueur de la ligne",Xe)}oe.style={...oe.style,color:((de=K.options)==null?void 0:de.color)||"#3388ff",weight:((ye=K.options)==null?void 0:ye.weight)||3,opacity:((he=K.options)==null?void 0:he.opacity)||1,fillColor:((X=K.options)==null?void 0:X.fillColor)||"#3388ff",fillOpacity:((Ae=K.options)==null?void 0:Ae.fillOpacity)||.2,dashArray:((De=K.options)==null?void 0:De.dashArray)||""}}catch(Xe){console.error("Error calculating shape properties:",Xe)}return oe},D=(K,Z=2)=>{var X;if(!t.value){console.warn("Map is not available for text size update");return}const oe=t.value.getZoom(),de=K.getLatLng().lat,ye=m5(Z,de,oe),he=(X=K.getElement())==null?void 0:X.querySelector(".text-annotation");he&&(K.properties.style.fontSize=`${ye}px`,K.properties.physicalWidth=Z,K.properties.physicalHeight=Z,g5(he,K.properties.style))},M=(K,Z,oe)=>{const de=Vt.map(K).setView(Z,oe);t.value=de,Vt.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:5}).addTo(de);const ye=new Vt.FeatureGroup;return ye.addTo(de),e.value=ye,n.value=Vt.featureGroup().addTo(de),r.value=Vt.featureGroup().addTo(de),de.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:ye,snapLayers:[ye,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),de.on("pm:drawstart",he=>{o.value=!0,he.shape==="Circle"&&i.value==="Semicircle"&&(de.getContainer().style.cursor="crosshair")}),de.on("pm:drawend",()=>{o.value=!1,de.getContainer().style.cursor="",s.value&&Gl("Cliquez sur la forme pour afficher les points de contrôle")}),de.on("pm:create",qe),ye.on("click",he=>{var Ae,De,Xe,fe,ee,se,le,je,$e,et,Ee,me,We,ct,pt;Vt.DomEvent.stopPropagation(he);const X=he.layer;if(X.name&&!((Ae=X.properties)!=null&&Ae.name)?(X.properties||(X.properties={}),X.properties.name=X.name):(De=X.properties)!=null&&De.name&&!X.name&&(X.name=X.properties.name),console.log("[featureGroup click] État du nom:",{directName:X.name,propertiesName:(Xe=X.properties)==null?void 0:Xe.name,fullProperties:X.properties}),(fe=r.value)==null||fe.clearLayers(),g(),s.value=X,X instanceof sp)j(X);else if(X instanceof Vt.Circle){console.log("[useMapDrawing] Création du cercle personnalisé:",{propertyDescriptor:Object.getOwnPropertyDescriptor(X,"name"),directName:X.name,propertiesName:(ee=X.properties)==null?void 0:ee.name,styleNameBeforeTransfer:(le=(se=X.properties)==null?void 0:se.style)==null?void 0:le.name,nameIsEnumerable:Object.keys(X).includes("name"),allProperties:Object.keys(X.properties||{}),_dbId:X._dbId});const gt=X.name,st=(je=X.properties)==null?void 0:je.name,qt=(et=($e=X.properties)==null?void 0:$e.style)==null?void 0:et.name,gn=X._dbId,Qe=new sp(X.getLatLng(),{...X.options,radius:X.getRadius()});X.properties?Qe.properties={...X.properties||{}}:Qe.updateProperties();const lt=gt||st||qt;lt&&(Qe.properties.name=lt,Qe.properties.style||(Qe.properties.style={}),Qe.properties.style.name=lt,Qe.name=lt),gn&&(Qe._dbId=gn),console.log("[useMapDrawing] Cercle après conversion:",{name:Qe.name,propertiesName:Qe.properties.name,stylePropertyName:(Ee=Qe.properties.style)==null?void 0:Ee.name,allProperties:Object.keys(Qe.properties||{})}),(me=e.value)==null||me.removeLayer(X),(We=e.value)==null||We.addLayer(Qe),s.value=Qe,j(Qe)}else if(X instanceof qa)J(X);else if(X instanceof Vt.Rectangle){const gt=new qa(X.getBounds(),{...X.options});gt.updateProperties(),(ct=e.value)==null||ct.removeLayer(X),(pt=e.value)==null||pt.addLayer(gt),s.value=gt,J(gt)}else X instanceof Vt.Polygon?R(X):X instanceof pa||X instanceof Vt.Polyline?U(X):X instanceof Ad&&V(X)}),de.on("pm:edit",he=>{var Ae,De,Xe;console.log("[pm:edit] Début",{layer:he.layer,currentProperties:he.layer.properties});const X=he.layer;if(X){const fe=((Ae=X.properties)==null?void 0:Ae.type)||"unknown";if(pe(X,fe),console.log("[pm:edit] Après updateLayerProperties",{updatedProperties:X.properties,selectedShape:s.value}),X instanceof sp)j(X);else if(X instanceof qa)J(X);else if(X instanceof Vt.Rectangle){const ee=new qa(X.getBounds(),{...X.options});ee.updateProperties(),(De=e.value)==null||De.removeLayer(X),(Xe=e.value)==null||Xe.addLayer(ee),s.value=ee,J(ee)}else X instanceof Vt.Polygon?R(X):X instanceof pa?(X.updateProperties(),pe(X,"Line"),U(X)):X instanceof Vt.Polyline?U(X):X instanceof Ad&&(X.updateProperties(),V(X))}}),de.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(he=>he.remove()),Gl("Déplacez la forme à l'endroit souhaité")}),de.on("pm:dragend",he=>{var Ae,De,Xe;console.log("[pm:dragend] Début",{layer:he.layer,currentProperties:he.layer.properties});const X=he.layer;if(X){const fe=((Ae=X.properties)==null?void 0:Ae.type)||"unknown";if(X instanceof Vt.Rectangle&&!(X instanceof qa)){const ee=new qa(X.getBounds(),{...X.options});ee.updateProperties(),(De=e.value)==null||De.removeLayer(X),(Xe=e.value)==null||Xe.addLayer(ee),s.value=ee,J(ee)}else X instanceof pa?(X.updateProperties(),pe(X,"Line"),U(X)):pe(X,fe);console.log("[pm:dragend] Après updateLayerProperties",{updatedProperties:X.properties,selectedShape:s.value})}setTimeout(()=>{Gl("Cliquez sur la forme pour afficher les points de contrôle")},100)}),de.on("pm:remove",()=>{var he;(he=document.querySelector(".drawing-help-message"))==null||he.remove()}),de.on("pm:select",()=>{document.querySelectorAll(".drawing-help-message").forEach(he=>he.remove()),Gl("Utilisez les points de contrôle pour modifier la forme")}),de.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(he=>he.remove())}),de.on("zoomstart",()=>{s.value&&(g(),s.value=null,document.querySelectorAll(".drawing-help-message").forEach(he=>he.remove()))}),de},A=()=>{if(!(!t.value||!e.value||!e.value.getLayers().length))try{const K=e.value.getBounds();if(K.isValid()){const Z={zoomAnimation:t.value.options.zoomAnimation,fadeAnimation:t.value.options.fadeAnimation,markerZoomAnimation:t.value.options.markerZoomAnimation};t.value.options.zoomAnimation=!1,t.value.options.fadeAnimation=!1,t.value.options.markerZoomAnimation=!1,t.value.fitBounds(K,{padding:[50,50],maxZoom:18,animate:!1,duration:0,noMoveStart:!0}),t.value.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{try{t.value.options.fadeAnimation=Z.fadeAnimation,setTimeout(()=>{try{t.value.options.zoomAnimation=Z.zoomAnimation,t.value.options.markerZoomAnimation=Z.markerZoomAnimation}catch(oe){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",oe)}},500)}catch(oe){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",oe)}},500)}}catch(K){if(console.warn("[useMapDrawing] Error adjusting view:",K),t.value)try{t.value.options.zoomAnimation=!0,t.value.options.fadeAnimation=!0,t.value.options.markerZoomAnimation=!0,t.value.invalidateSize({animate:!1,pan:!1})}catch(Z){console.error("[useMapDrawing] Erreur lors de la restauration après échec:",Z)}}},z=K=>{var oe;if(!t.value)return;document.querySelectorAll(".drawing-help-message").forEach(de=>de.remove());try{const de=t.value.pm;de.globalEditModeEnabled()&&de.disableGlobalEditMode(),de.globalRemovalModeEnabled()&&de.disableGlobalRemovalMode(),de.disableDraw(),g(),(oe=r.value)==null||oe.clearLayers()}catch(de){console.error("Error disabling modes:",de)}if(window.dispatchEvent(new CustomEvent("tool:changed",{detail:{previousTool:i.value,newTool:K}})),i.value=K,!K){g();return}let Z=K;switch(K){case"Note":Z="GeoNote";break;case"Polygon":Z="Polygon";break;case"Line":Z="Line";break;case"ElevationLine":Z="ElevationLine";break;default:Z=K}K=Z,re(),setTimeout(()=>{var de,ye,he,X,Ae,De,Xe,fe,ee,se,le,je,$e;try{switch(K){case"Polygon":Gl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(de=t.value)==null||de.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(ye=t.value)==null||ye.off("pm:create"),(he=t.value)==null||he.on("pm:create",Ee=>{var me,We,ct;if(Ee.shape==="Polygon"&&Ee.layer){const pt=Ee.layer.getLatLngs()[0];(me=t.value)==null||me.removeLayer(Ee.layer),(We=e.value)!=null&&We.hasLayer(Ee.layer)&&e.value.removeLayer(Ee.layer);const gt=new uh(pt,{color:"#3B82F6",weight:3,fillColor:"#3B82F6",fillOpacity:.2});e.value&&(e.value.addLayer(gt),s.value=gt,gt.updateProperties()),(ct=t.value)==null||ct.pm.disableDraw(),re()}});break;case"Circle":e.value&&e.value.getLayers().filter(me=>me instanceof qa).forEach(me=>{me.toggleHelperPoints(t.value,!0,"#DC2626","#2563EB")}),t.value.pm.setGlobalOptions({snapDistance:15,snapSegment:!0,snapVertices:!0,snapLayers:[e.value,r.value],snapMiddle:!0,snapIntersections:!0}),Gl("Positionnez le centre du cercle. Points bleus : milieu des côtés, Points rouges : sommets, Point vert : centre"),t.value.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":Gl("Cliquez et maintenez pour dessiner un rectangle, relâchez pour terminer"),(X=t.value)==null||X.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":Gl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(Ae=t.value)==null||Ae.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":Gl("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(De=t.value)==null||De.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(Xe=t.value)==null||Xe.off("pm:create"),(fe=t.value)==null||fe.on("pm:create",Ee=>{var me,We,ct;if(Ee.shape==="Line"&&Ee.layer){const pt=Ee.layer.getLatLngs();(me=t.value)==null||me.removeLayer(Ee.layer),(We=e.value)!=null&&We.hasLayer(Ee.layer)&&e.value.removeLayer(Ee.layer);const gt=new pa(pt,{color:"#3B82F6",weight:3,opacity:.8});e.value&&(e.value.addLayer(gt),s.value=gt,gt.updateProperties()),(ct=t.value)==null||ct.pm.disableDraw(),re()}});break;case"Text":if(Gl("Cliquez pour ajouter du texte, double-cliquez pour éditer"),t.value){const Ee=me=>{if(!t.value||!e.value)return;const We=l(me.latlng);e.value.addLayer(We),s.value=We,t.value.off("click",Ee),z("")};t.value.on("click",Ee)}break;case"GeoNote":if(Gl("Cliquez pour ajouter une note géolocalisée, double-cliquez pour éditer"),t.value){const Ee=async We=>{if(!t.value||!e.value)return null;try{const ct=Ap(),pt=new Ad(We,{color:"#3B82F6",name:"Note géolocalisée",description:"",columnId:"1"});e.value.addLayer(pt),s.value=pt,pt.updateProperties();try{const gt=ct.currentMapId||void 0,st=await pt.saveNote(gt);console.log(`[useMapDrawing] Note sauvegardée avec succès, ID backend: ${st}`);const qt=pt._leaflet_id;return console.log(`[useMapDrawing] ID Leaflet: ${qt}, ID backend: ${st}`),window.dispatchEvent(new CustomEvent("note:created",{detail:{geoNote:pt,leafletId:qt,backendId:st}})),pt.openPopup(),pt}catch(gt){return console.error("[useMapDrawing] Erreur lors de la sauvegarde de la note:",gt),kd(async()=>{const{useNotificationStore:st}=await Promise.resolve().then(()=>QB);return{useNotificationStore:st}},void 0).then(({useNotificationStore:st})=>{st().error("Erreur lors de la création de la note")}),null}}catch(ct){return console.error("[useMapDrawing] Erreur lors de la création de la note:",ct),null}},me=async We=>{Vt.DomEvent.stopPropagation(We),Vt.DomEvent.preventDefault(We);const ct=await Ee(We.latlng);ct&&(t.value.off("click",me),e.value&&e.value.getLayers().forEach(pt=>{if(pt.off&&typeof pt.off=="function")try{pt.off("click")}catch(gt){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",gt)}}),z(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:ct,leafletId:ct._leaflet_id}})))};if(t.value.on("click",me),e.value){const We=async pt=>{Vt.DomEvent.stopPropagation(pt),Vt.DomEvent.preventDefault(pt),console.log("[useMapDrawing] Clic sur une forme existante en mode GeoNote");const gt=await Ee(pt.latlng);return gt&&(t.value.off("click",me),e.value&&e.value.getLayers().forEach(st=>{if(st.off&&typeof st.off=="function")try{st.off("click")}catch(qt){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",qt)}}),z(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:gt,leafletId:gt._leaflet_id}}))),!1};e.value.getLayers().forEach(pt=>{pt.on("click",We)});const ct=()=>{e.value&&e.value.getLayers().forEach(pt=>{if(pt.off&&typeof pt.off=="function")try{pt.off("click")}catch(gt){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",gt)}}),window.removeEventListener("tool:changed",ct),console.log("[useMapDrawing] Nettoyage des gestionnaires d'événements pour les formes existantes")};window.addEventListener("tool:changed",ct)}}break;case"delete":Gl("Cliquez sur une forme pour la supprimer"),(ee=t.value)==null||ee.pm.enableGlobalRemovalMode();break;case"ElevationLine":Gl("Cliquez et maintenez pour tracer le profil altimétrique"),(se=t.value)==null||se.pm.enableDraw("Line",{finishOn:"mouseup",continueDrawing:!1,allowSelfIntersection:!1,templineStyle:{color:"#FF4500",weight:4,opacity:.8}}),(le=t.value)==null||le.pm.setGlobalOptions({continueDrawing:!1,finishOn:"mouseup",preventMarkerRemoval:!0,preventVertexEdit:!0,preventMarkerEdit:!0}),(je=t.value)==null||je.off("pm:create"),($e=t.value)==null||$e.on("pm:create",async Ee=>{var me,We,ct;if(Ee.shape==="Line"&&Ee.layer){const pt=Ee.layer.getLatLngs();(me=t.value)==null||me.removeLayer(Ee.layer),(We=e.value)!=null&&We.hasLayer(Ee.layer)&&e.value.removeLayer(Ee.layer),(ct=t.value)==null||ct.pm.disableDraw(),i.value="",re()}});break}}catch(et){console.error("[setDrawingTool] Erreur lors de la configuration de l'outil:",et)}},100)},Y=K=>{var oe;if(!s.value)return;const Z=s.value;if(Z.properties=Z.properties||{},Z.properties.style=Z.properties.style||{},Z.properties.style={...Z.properties.style,...K},Z.properties.type==="text"){const de=Z.properties._textLayer,ye=(oe=de==null?void 0:de.getElement())==null?void 0:oe.querySelector(".text-annotation");ye&&g5(ye,Z.properties.style);const he={color:K.borderColor||Z.properties.style.borderColor,weight:parseInt(K.borderWidth||Z.properties.style.borderWidth),opacity:K.borderOpacity??Z.properties.style.borderOpacity};"setStyle"in Z&&Z.setStyle(he)}else if(Z.properties.type==="TextRectangle")console.log("[updateShapeStyle] TextRectangle supprimé selon les exigences");else{const de={};K.fillColor&&(de.fillColor=K.fillColor),K.fillOpacity!==void 0&&(de.fillOpacity=K.fillOpacity),K.strokeColor&&(de.color=K.strokeColor),K.strokeOpacity!==void 0&&(de.opacity=K.strokeOpacity),K.strokeWidth!==void 0&&(de.weight=K.strokeWidth),K.dashArray&&(de.dashArray=K.dashArray),"setStyle"in Z&&Z.setStyle(de)}},ne=K=>{var X,Ae,De,Xe,fe;if(!s.value){console.warn("[useMapDrawing] Cannot update properties: no shape selected");return}console.log("[useMapDrawing] Updating shape properties",{before:s.value.properties,newProps:K,layerType:(X=s.value.properties)==null?void 0:X.type,beforeName:s.value.name,beforePropertiesName:(Ae=s.value.properties)==null?void 0:Ae.name,beforeCategory:(De=s.value.properties)==null?void 0:De.category,nameIsDirectProperty:"name"in s.value,dbId:s.value._dbId}),s.value.properties||(s.value.properties={});const Z=s.value.properties.type;console.log(`[useMapDrawing] Type actuel de la forme: ${Z}`),s.value.properties.category||(s.value.properties.category="forages"),s.value.properties.accessLevel||(s.value.properties.accessLevel="visitor"),s.value._dbId||(s.value._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[useMapDrawing] Assigned temporary dbId: ${s.value._dbId}`));const oe=s.value.properties.type;console.log(`[useMapDrawing] Type original avant mise à jour: ${oe}`);const de=s.value.properties.category;console.log(`[useMapDrawing] Catégorie existante: ${de}`);const ye="category"in K&&K.category!==de;if(Object.keys(K).forEach(ee=>{ee==="type"&&oe?console.log(`[useMapDrawing] Préservation du type original: ${oe}`):s.value.properties[ee]=K[ee],ee==="name"&&(console.log(`[useMapDrawing] Setting name "${K[ee]}" directly on layer`),s.value.name=K[ee]),ee==="category"&&console.log(`[useMapDrawing] Mise à jour de la catégorie: ${de} -> ${K[ee]}`)}),oe&&(s.value.properties.type=oe),de&&!ye&&(console.log(`[useMapDrawing] Restauration de la catégorie originale: ${de}`),s.value.properties.category=de),s.value._dbId&&ye){const ee=Ap(),se=ee.elements.find(le=>le.id===s.value._dbId);if(se){console.log(`[useMapDrawing] Mise à jour de la catégorie dans le store: ${s.value.properties.category} pour l'élément ${s.value._dbId}`);const le=se;le.data||(le.data={}),le.data.category=s.value.properties.category,ee.$patch({unsavedChanges:!0})}}const he=new CustomEvent("shape:propertiesUpdated",{detail:{shape:s.value,properties:s.value.properties,categoryUpdated:ye}});if(window.dispatchEvent(he),console.log("[useMapDrawing] Updated shape properties",{after:s.value.properties,name:s.value.name,propertiesName:(Xe=s.value.properties)==null?void 0:Xe.name,allLayerKeys:Object.keys(s.value),allPropertiesKeys:Object.keys(s.value.properties||{})}),((fe=s.value.properties)==null?void 0:fe.type)==="Circle"){const ee=s.value,se=ee.getRadius();ee.properties.radius=se,ee.properties.diameter=se*2,ee.properties.surface=Math.PI*se*se,ee.properties.perimeter=2*Math.PI*se,K.name&&(console.log(`[useMapDrawing] Ensuring circle name "${K.name}" is set in multiple places`),ee.properties.name=K.name,ee.properties.style.name=K.name,ee.name=K.name,console.log("[useMapDrawing] Circle name verification:",{circleDirectName:ee.name,circlePropertiesName:ee.properties.name,nameIsEnumerable:Object.keys(ee).includes("name"),propertiesNameIsEnumerable:Object.keys(ee.properties).includes("name")}))}},ge=K=>{console.log("[forceShapeUpdate] Début",{currentProperties:K.properties,selectedShapeRef:s.value}),s.value=null,ma(()=>{s.value=K,console.log("[forceShapeUpdate] Après mise à jour",{selectedShape:s.value,properties:s.value.properties})})},pe=(K,Z)=>{console.log("[updateLayerProperties] Début",{layer:K,shapeType:Z,currentProperties:K.properties}),IU((de,ye)=>{const he=E(de,ye);console.log("[updateLayerProperties] Nouvelles propriétés calculées",{newProperties:he}),de.properties={...he},ge(de),de.fire("properties:updated",{shape:de,properties:de.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:de.properties,selectedShape:s.value})},100)(K,Z)},O=(K,Z)=>Vt.latLng((K.lat+Z.lat)/2,(K.lng+Z.lng)/2),j=K=>{if(!t.value||!e.value)return;g();const Z=K.getLatLng(),oe=K.getRadius(),de=x(Z,"#059669");v.push(de),p(de,K,()=>[rs(oe,"m","Rayon"),rs(oe*2,"m","Diamètre"),rs(Math.PI*Math.pow(oe,2),"m²","Surface")].join("<br>"));const ye=[],he=[0,45,90,135,180,225,270,315];he.forEach(X=>{const Ae=K.calculatePointOnCircle(X),De=x(Ae,"#2563EB");ye.push(De),v.push(De),p(De,K,()=>rs(oe,"m","Rayon")),De.on("mousedown",Xe=>{if(!t.value)return;Vt.DomEvent.stopPropagation(Xe),t.value.dragging.disable();let fe=!0;const ee=le=>{fe&&(K.resizeFromControlPoint(le.latlng),ye.forEach((je,$e)=>{const et=K.calculatePointOnCircle(he[$e]);je.setLatLng(et)}),de.setLatLng(K.getLatLng()),De.measureDiv&&(De.measureDiv.innerHTML=rs(K.getRadius(),"m","Rayon")))},se=()=>{fe=!1,t.value&&(t.value.off("mousemove",ee),document.removeEventListener("mouseup",se),t.value.dragging.enable(),K.updateProperties(),s.value=null,ma(()=>{s.value=K}),pe(K,"Circle"))};t.value.on("mousemove",ee),document.addEventListener("mouseup",se)})}),de.on("mousedown",X=>{if(!t.value)return;Vt.DomEvent.stopPropagation(X),t.value.dragging.disable();let Ae=!0;const De=K.getLatLng(),Xe=X.latlng,fe=se=>{if(!Ae)return;const le=se.latlng.lng-Xe.lng,je=se.latlng.lat-Xe.lat,$e=Vt.latLng(De.lat+je,De.lng+le);Vt.Circle.prototype.setLatLng.call(K,$e),de.setLatLng($e),ye.forEach((et,Ee)=>{const me=K.calculatePointOnCircle(he[Ee]);et.setLatLng(me)}),de.measureDiv&&(de.measureDiv.innerHTML=[rs(K.getRadius(),"m","Rayon"),rs(K.getRadius()*2,"m","Diamètre"),rs(Math.PI*Math.pow(K.getRadius(),2),"m²","Surface")].join("<br>"))},ee=()=>{Ae=!1,t.value&&(t.value.off("mousemove",fe),document.removeEventListener("mouseup",ee),t.value.dragging.enable(),K.updateProperties(),s.value=null,ma(()=>{s.value=K}),pe(K,"Circle"))};t.value.on("mousemove",fe),document.addEventListener("mouseup",ee)}),K.on("circle:resized",()=>{pe(K,"Circle")}),s.value=K},J=K=>{var fe;if(!t.value||!e.value)return;if(!(K instanceof qa)){console.warn("La couche n'est pas une instance de Rectangle");return}const Z=K;g();const oe=Z.getCenter(),de=Z.getRotatedCorners(),ye=Z.getMidPoints(),he=x(oe,"#059669");v.push(he),p(he,Z,()=>{const{width:ee,height:se}=Z.getDimensions(),le=ee*se,je=Z.getRotation();return[rs(ee,"m","Largeur"),rs(se,"m","Hauteur"),rs(le,"m²","Surface"),`Rotation: ${je.toFixed(1)}°`].join("<br>")});const X=x(Vt.latLng(oe.lat+(de[0].lat-oe.lat)*1.2,oe.lng+(de[0].lng-oe.lng)*1.2),"#F97316");v.push(X);const Ae=Vt.polyline([oe,X.getLatLng()],{color:"#F97316",weight:1,opacity:.6,dashArray:"4",pmIgnore:!0});(fe=n.value)==null||fe.addLayer(Ae);const De=de.map(ee=>{const se=x(ee,"#DC2626");return v.push(se),p(se,Z,()=>{const{width:le,height:je}=Z.getDimensions();return[rs(le,"m","Largeur"),rs(je,"m","Hauteur")].join("<br>")}),se}),Xe=ye.map((ee,se)=>{const le=x(ee,"#2b6451");return v.push(le),p(le,Z,()=>{const{width:je,height:$e}=Z.getDimensions(),et=se%2===0?je:$e;return[rs(et,"m","Longueur du côté"),rs(et/2,"m","Distance au coin")].join("<br>")}),le});he.on("mousedown",ee=>{if(!t.value)return;Vt.DomEvent.stopPropagation(ee),t.value.dragging.disable();let se=!0;const le=$e=>{if(!se)return;Z.moveFromCenter($e.latlng);const et=Z.getRotatedCorners(),Ee=Z.getMidPoints();De.forEach((We,ct)=>We.setLatLng(et[ct])),Xe.forEach((We,ct)=>We.setLatLng(Ee[ct])),he.setLatLng($e.latlng);const me=Vt.latLng($e.latlng.lat+(et[0].lat-$e.latlng.lat)*1.2,$e.latlng.lng+(et[0].lng-$e.latlng.lng)*1.2);X.setLatLng(me),Ae.setLatLngs([$e.latlng,me])},je=()=>{se=!1,t.value&&(t.value.off("mousemove",le),document.removeEventListener("mouseup",je),t.value.dragging.enable(),Z.updateProperties(),s.value=null,ma(()=>{s.value=Z}))};t.value.on("mousemove",le),document.addEventListener("mouseup",je)}),X.on("mousedown",ee=>{if(!t.value)return;Vt.DomEvent.stopPropagation(ee),t.value.dragging.disable();let se=!1;const le=ee.latlng,je=Z.getRotation(),$e=Z.getCenter(),et=le.lng-$e.lng,Ee=le.lat-$e.lat,me=Math.atan2(Ee,et)*180/Math.PI;v.forEach(pt=>{pt!==X&&(pt.setStyle({opacity:0,fillOpacity:0}),pt.measureDiv&&(pt.measureDiv.style.display="none"))});const We=Wh(pt=>{se||(se=!0);const gt=pt.latlng.lng-$e.lng,st=pt.latlng.lat-$e.lat;let gn=Math.atan2(st,gt)*180/Math.PI-me,Qe=(je+gn)%360;Qe<0&&(Qe+=360),Z.setRotation(Qe,!1),X.setLatLng(pt.latlng),Ae.setLatLngs([$e,pt.latlng])},16),ct=()=>{t.value&&(t.value.off("mousemove",We),document.removeEventListener("mouseup",ct),t.value.dragging.enable(),se&&Z.finalizeRotation(),s.value=null,ma(()=>{s.value=Z,g(),J(Z)}))};t.value.on("mousemove",We),document.addEventListener("mouseup",ct)}),Z.on("coordinates:updated",ee=>{const{corners:se,center:le}=ee,je=Z.getMidPoints();De.forEach((et,Ee)=>et.setLatLng(se[Ee])),Xe.forEach((et,Ee)=>et.setLatLng(je[Ee])),he.setLatLng(le);const $e=Vt.latLng(le.lat+(se[0].lat-le.lat)*1.2,le.lng+(se[0].lng-le.lng)*1.2);X.setLatLng($e),Ae.setLatLngs([le,$e])})},U=K=>{if(!t.value||!e.value)return;g();const Z=K.getLatLngs();if(!Z||Z.length===0){console.warn("Pas de points pour la ligne");return}let oe=null;if(K instanceof pa){const de=K.getCenter();oe=x(de,"#059669"),v.push(oe),p(oe,K,()=>{const ye=K.getLength()||0;return rs(ye,"m","Longueur totale")}),oe.on("mousedown",ye=>{if(!t.value)return;Vt.DomEvent.stopPropagation(ye),t.value.dragging.disable();let he=!0;const X=K.getLatLngs().map(ee=>Vt.latLng(ee.lat,ee.lng)),Ae=ye.latlng;K instanceof pa&&(K.off("move:end"),K.off("vertex:moved"),K.off("latlngs:updated"),K.off("properties:updated")),v.forEach((ee,se)=>{se>0&&(ee.setStyle({opacity:0,fillOpacity:0}),ee.measureDiv&&(ee.measureDiv.style.display="none"))});const Xe=Wh(ee=>{if(!he)return;const se=ee.latlng.lng-Ae.lng,le=ee.latlng.lat-Ae.lat,je=X.map($e=>Vt.latLng($e.lat+le,$e.lng+se));Vt.Polyline.prototype.setLatLngs.call(K,je),oe==null||oe.setLatLng(ee.latlng)},16),fe=()=>{if(he=!1,!!t.value){if(t.value.off("mousemove",Xe),document.removeEventListener("mouseup",fe),t.value.dragging.enable(),K instanceof pa){const ee=()=>{g(),U(K)};K.on("move:end",ee),K.on("vertex:moved",ee),K.on("latlngs:updated",ee),K.on("properties:updated",ee),K.updateProperties(),pe(K,"Line")}g(),U(K)}};t.value.on("mousemove",Xe),document.addEventListener("mouseup",fe)})}if(Z.forEach((de,ye)=>{const he=x(de,"#DC2626");v.push(he),p(he,K,()=>{if(K instanceof pa){const X=K.getLength()||0,Ae=K.getLengthToVertex(ye);return[rs(Ae,"m","Distance depuis le début"),rs(X,"m","Longueur totale")].join("<br>")}return""}),he.on("mousedown",X=>{if(!t.value)return;Vt.DomEvent.stopPropagation(X),t.value.dragging.disable();let Ae=!0;K instanceof pa&&(K.off("move:end"),K.off("vertex:moved"),K.off("latlngs:updated"),K.off("properties:updated")),v.forEach((fe,ee)=>{ee!==ye+1&&(fe.setStyle({opacity:0,fillOpacity:0}),fe.measureDiv&&(fe.measureDiv.style.display="none"))});const De=Wh(fe=>{if(!Ae)return;const ee=K.getLatLngs();ee[ye]=fe.latlng,Vt.Polyline.prototype.setLatLngs.call(K,ee),he.setLatLng(fe.latlng)},16),Xe=()=>{if(Ae=!1,!!t.value){if(t.value.off("mousemove",De),document.removeEventListener("mouseup",Xe),t.value.dragging.enable(),K instanceof pa){const fe=()=>{g(),U(K)};K.on("move:end",fe),K.on("vertex:moved",fe),K.on("latlngs:updated",fe),K.on("properties:updated",fe),K.updateProperties(),pe(K,"Line")}g(),U(K)}};t.value.on("mousemove",De),document.addEventListener("mouseup",Xe)})}),Z.length>=2)for(let de=0;de<Z.length-1;de++){const ye=Z[de],he=Z[de+1],X=Vt.latLng((ye.lat+he.lat)/2,(ye.lng+he.lng)/2),Ae=x(X,"#2b6451");v.push(Ae),p(Ae,K,()=>{if(K instanceof pa){const De=K.getSegmentLengthAt(de),Xe=K.getLength()||0,fe=K.getLengthToVertex(de)+De/2;return[rs(De,"m","Longueur du segment"),rs(De/2,"m","Demi-segment"),rs(fe,"m","Distance depuis le début"),rs(Xe,"m","Longueur totale")].join("<br>")}return""})}if(K instanceof pa){const de=()=>{g(),U(K)};K.on("move:start",()=>{v.forEach((ye,he)=>{he>0&&(ye.setStyle({opacity:0,fillOpacity:0}),ye.measureDiv&&(ye.measureDiv.style.display="none"))})}),K.on("move:end",de),K.on("vertex:moved",de),K.on("latlngs:updated",de),K.on("properties:updated",de),v.cleanup=()=>{K.off("move:start",()=>{}),K.off("move:end",de),K.off("vertex:moved",de),K.off("latlngs:updated",de),K.off("properties:updated",de)}}},R=K=>{if(!t.value||!e.value)return;g();const Z=K.getLatLngs()[0],oe=Z.map(Xe=>[Xe.lng,Xe.lat]);oe.push(oe[0]);const de=Wu([oe]),ye=Rc(de),he=Z.reduce((Xe,fe,ee)=>{const se=Z[(ee+1)%Z.length];return Xe+fe.distanceTo(se)},0);let X;if(typeof K.getCenter=="function")try{X=K.getCenter()}catch(Xe){console.warn("Erreur lors de la récupération du centre du polygone via getCenter(), utilisation de la méthode alternative",Xe);const fe=Hg(de);X=Vt.latLng(fe.geometry.coordinates[1],fe.geometry.coordinates[0])}else{const Xe=Hg(de);X=Vt.latLng(Xe.geometry.coordinates[1],Xe.geometry.coordinates[0])}const Ae=x(X,"#059669");v.push(Ae),p(Ae,K,()=>[rs(he,"m","Périmètre"),rs(ye,"m²","Surface")].join("<br>")),Ae.on("mousedown",Xe=>{if(!t.value)return;Vt.DomEvent.stopPropagation(Xe),t.value.dragging.disable();let fe=!0;const ee=Xe.latlng,se=[...Z];v.forEach((et,Ee)=>{Ee>0&&et.setStyle({opacity:0,fillOpacity:0})});const le=Wh(et=>{if(!fe)return;const Ee=et.latlng.lng-ee.lng,me=et.latlng.lat-ee.lat,We=se.map(ct=>Vt.latLng(ct.lat+me,ct.lng+Ee));Vt.Polygon.prototype.setLatLngs.call(K,[We]),Ae.setLatLng(et.latlng)},16),je=et=>{fe&&le(et)},$e=()=>{if(fe=!1,!!t.value){if(t.value.off("mousemove",je),document.removeEventListener("mouseup",$e),t.value.dragging.enable(),K.properties){const et=K.getLatLngs()[0],Ee=et.map(We=>[We.lng,We.lat]);Ee.push(Ee[0]);const me=Wu([Ee]);K.properties.area=Rc(me),K.properties.perimeter=et.reduce((We,ct,pt)=>{const gt=et[(pt+1)%et.length];return We+ct.distanceTo(gt)},0),K.properties.surface=K.properties.area}g(),R(K),s.value=null,ma(()=>{s.value=K})}};t.value.on("mousemove",je),document.addEventListener("mouseup",$e)}),Z.forEach((Xe,fe)=>{const ee=x(Xe,"#DC2626");v.push(ee),p(ee,K,()=>{const se=Z[(fe-1+Z.length)%Z.length],le=Z[(fe+1)%Z.length],je=Xe.distanceTo(se),$e=Xe.distanceTo(le);return[rs(je,"m","Distance au point précédent"),rs($e,"m","Distance au point suivant"),rs(he,"m","Périmètre total"),rs(ye,"m²","Surface")].join("<br>")}),ee.on("mousedown",se=>{if(Vt.DomEvent.stopPropagation(se),!t.value)return;t.value.dragging.disable();let le=!0;Ae&&(Ae.setStyle({opacity:0,fillOpacity:0}),Ae.measureDiv&&(Ae.measureDiv.style.display="none"));const je=Wh(Ee=>{if(!le)return;Z[fe]=Ee.latlng,Vt.Polygon.prototype.setLatLngs.call(K,[Z]),ee.setLatLng(Ee.latlng);const me=v.slice(Z.length+1),We=(fe-1+Z.length)%Z.length,ct=me[We];if(ct){const gt=Z[We],st=Z[fe],qt=Vt.latLng((gt.lat+st.lat)/2,(gt.lng+st.lng)/2);ct.setLatLng(qt)}const pt=me[fe];if(pt){const gt=Z[fe],st=Z[(fe+1)%Z.length],qt=Vt.latLng((gt.lat+st.lat)/2,(gt.lng+st.lng)/2);pt.setLatLng(qt)}},16),$e=Ee=>{le&&je(Ee)},et=()=>{if(le=!1,!!t.value){if(t.value.off("mousemove",$e),document.removeEventListener("mouseup",et),t.value.dragging.enable(),K.properties){const Ee=K.getLatLngs()[0].map(We=>[We.lng,We.lat]);Ee.push(Ee[0]);const me=Wu([Ee]);K.properties.area=Rc(me),K.properties.perimeter=Z.reduce((We,ct,pt)=>{const gt=Z[(pt+1)%Z.length];return We+ct.distanceTo(gt)},0),K.properties.surface=K.properties.area}g(),R(K),s.value=null,ma(()=>{s.value=K})}};t.value.on("mousemove",$e),document.addEventListener("mouseup",et)})}),(()=>{const Xe=K.getLatLngs()[0];v.slice(Xe.length+1).forEach(ee=>{n.value&&n.value.removeLayer(ee)}),v=v.slice(0,Xe.length+1);const fe=new Array(Xe.length);for(let ee=0;ee<Xe.length;ee++){const se=Xe[ee],le=Xe[(ee+1)%Xe.length];fe[ee]=O(se,le)}fe.forEach((ee,se)=>{const le=x(ee,"#2b6451");v.push(le),p(le,K,()=>{const je=Xe[se],$e=Xe[(se+1)%Xe.length],et=je.distanceTo($e);return[rs(et,"m","Longueur du segment"),rs(he,"m","Périmètre total"),rs(ye,"m²","Surface")].join("<br>")}),le.on("mousedown",je=>{if(!t.value)return;Vt.DomEvent.stopPropagation(je),t.value.dragging.disable();let $e=!0;const et=se;Ae&&(Ae.setStyle({opacity:0,fillOpacity:0}),Ae.measureDiv&&(Ae.measureDiv.style.display="none"));const Ee=[...K.getLatLngs()[0]];Ee.splice((et+1)%Ee.length,0,ee),K.setLatLngs([Ee]),g(),R(K);const me=et+1,We=1+me,ct=me<v.length-1?v[We]:null;if(ct){const pt=st=>{if(!$e)return;const qt=K.getLatLngs()[0];qt[me]=st.latlng,K.setLatLngs([qt]),ct.setLatLng(st.latlng);const gn=v.slice(1+qt.length),Qe=(me-1+qt.length)%qt.length,lt=me;if(gn[Qe]){const it=qt[Qe],$t=qt[me],Jt=Vt.latLng((it.lat+$t.lat)/2,(it.lng+$t.lng)/2);gn[Qe].setLatLng(Jt)}if(gn[lt]){const it=qt[me],$t=qt[(me+1)%qt.length],Jt=Vt.latLng((it.lat+$t.lat)/2,(it.lng+$t.lng)/2);gn[lt].setLatLng(Jt)}},gt=()=>{if($e=!1,!!t.value){if(t.value.off("mousemove",pt),document.removeEventListener("mouseup",gt),t.value.dragging.enable(),K.properties){const st=K.getLatLngs()[0].map(gn=>[gn.lng,gn.lat]);st.push(st[0]);const qt=Wu([st]);K.properties.area=Rc(qt),K.properties.perimeter=K.getLatLngs()[0].reduce((gn,Qe,lt,it)=>{const $t=it[(lt+1)%it.length];return gn+Qe.distanceTo($t)},0)}g(),R(K),s.value=null,ma(()=>{s.value=K})}};t.value.on("mousemove",pt),document.addEventListener("mouseup",gt)}else t.value.dragging.enable(),g(),R(K)})})})()},V=K=>{if(!t.value||!e.value)return;g();const Z=K.getLatLng(),oe=x(Z,"#059669");v.push(oe),p(oe,K,()=>`Position: ${Z.lat.toFixed(6)}, ${Z.lng.toFixed(6)}`),oe.on("mousedown",de=>{if(!t.value)return;Vt.DomEvent.stopPropagation(de),t.value.dragging.disable(),K.startMoving();let ye=!0;const X=Wh(De=>{ye&&(oe.setLatLng(De.latlng),K.setLatLng(De.latlng))},16),Ae=()=>{t.value&&(t.value.off("mousemove",X),document.removeEventListener("mouseup",Ae),t.value.dragging.enable(),ye=!1,K.finishMoving(),K.updateProperties(),s.value=null,ma(()=>{s.value=K,g(),V(K)}))};t.value.on("mousemove",X),document.addEventListener("mouseup",Ae)}),s.value=K},$=K=>{if(!(!t.value||!r.value)){console.log("[generateTempControlPoints] Génération des points temporaires pour",{layerType:K.constructor.name,properties:K.properties}),r.value.clearLayers();try{if(K instanceof qa)K.generateHelperPoints(t.value);else if(K instanceof sp){if("getLatLng"in K&&typeof K.getLatLng=="function"){const Z=K.getLatLng();if(Z){const oe=Vt.circleMarker(Z,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(oe)}}}else if(K instanceof Ad){const Z=K.getLatLng();if(Z){const oe=Vt.circleMarker(Z,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(oe)}}else if(K instanceof uh||K instanceof Vt.Polygon){let Z=[];if("getLatLngs"in K){const de=K.getLatLngs();if(Array.isArray(de)&&de.length>0){const ye=de[0];Array.isArray(ye)?Z=ye:ye instanceof Vt.LatLng&&(Z=de)}}let oe=null;if(K instanceof uh&&typeof K.getCenter=="function")oe=K.getCenter();else if(Z.length>0){const de=Z.map(X=>[X.lng,X.lat]);de.push(de[0]);const ye=Wu([de]),he=Hg(ye);oe=Vt.latLng(he.geometry.coordinates[1],he.geometry.coordinates[0])}if(oe){const de=Vt.circleMarker(oe,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(de)}Z.forEach(de=>{if(de){const ye=Vt.circleMarker(de,{radius:5,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ye)}});for(let de=0;de<Z.length;de++){const ye=Z[de],he=Z[(de+1)%Z.length];if(ye&&he){const X=Vt.latLng((ye.lat+he.lat)/2,(ye.lng+he.lng)/2),Ae=Vt.circleMarker(X,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(Ae)}}}console.log("[generateTempControlPoints] Points temporaires générés",{count:r.value.getLayers().length})}catch(Z){console.error("[generateTempControlPoints] Erreur lors de la génération des points temporaires:",Z)}}},B=K=>{console.log("Nombre total de couches:",K.length);const Z=K.filter(X=>{var Xe;if(!X)return!1;let Ae=0,De={width:0,height:0};if(X instanceof Vt.Circle){Ae=Math.PI*Math.pow(X.getRadius(),2);const fe=X.getRadius();console.log(`
Forme détectée: Circle`),console.log(`- Surface propre: ${Ae.toFixed(2)} m²`),console.log(`- Rayon: ${fe.toFixed(2)} m`),console.log("- Angle: Cercle complet (360°)")}else if(X instanceof qa||X instanceof Vt.Rectangle){const fe=X.getBounds(),ee=fe.getSouthWest(),se=fe.getNorthEast(),le=mc([[ee.lng,ee.lat],[se.lng,ee.lat]]),je=mc([[ee.lng,ee.lat],[ee.lng,se.lat]]);De.width=Hh(le,{units:"meters"}),De.height=Hh(je,{units:"meters"}),Ae=De.width*De.height,console.log(`
Forme détectée: Rectangle`),console.log(`- Surface propre: ${Ae.toFixed(2)} m²`),console.log(`- Largeur: ${De.width.toFixed(2)} m`),console.log(`- Hauteur: ${De.height.toFixed(2)} m`)}else if(((Xe=X.properties)==null?void 0:Xe.type)==="Semicircle"){const fe=X.getStartAngle(),ee=X.getStopAngle(),se=(ee-fe+360)%360,le=X.getRadius();Ae=Math.PI*Math.pow(le,2)*se/360,console.log(`
Forme détectée: Semicircle`),console.log(`- Surface propre: ${Ae.toFixed(2)} m²`),console.log(`- Rayon: ${le.toFixed(2)} m`),console.log(`- Angle de début: ${fe.toFixed(2)}°`),console.log(`- Angle de fin: ${ee.toFixed(2)}°`),console.log(`- Angle d'ouverture: ${se.toFixed(2)}°`)}return Ae>0});if(Z.length===0)return 0;const oe=new Set,de=[];for(const X of Z)if(!oe.has(X)){const Ae=G(Z,X);Ae.length>0&&(de.push(Ae),Ae.forEach(De=>oe.add(De)))}console.log(`
Nombre de groupes de formes connectées: ${de.length}`);const ye=de.map((X,Ae)=>{console.log(`
Calcul pour le groupe ${Ae+1} (${X.length} formes):`);const De=X.map(le=>{var je,$e,et;try{let Ee;if(le instanceof Vt.Circle){const me=le.getLatLng(),We=le.getRadius();Ee=Kj([me.lng,me.lat],We/1e3,{units:"kilometers",steps:256});const ct=Rc(Ee),pt=((je=le.properties)==null?void 0:je.surface)||0;return console.log(`
Conversion Cercle -> GeoJSON`),console.log(`- Rayon: ${We.toFixed(2)}m`),console.log(`- Surface propriété: ${pt.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${ct.toFixed(2)}m²`),Ee}else if(le instanceof qa||le instanceof Vt.Rectangle){const me=le.getBounds(),We=me.getSouthWest(),ct=me.getNorthEast(),pt=Vt.latLng(ct.lat,We.lng),gt=Vt.latLng(We.lat,ct.lng),st=[[We.lng,We.lat],[gt.lng,gt.lat],[ct.lng,ct.lat],[pt.lng,pt.lat],[We.lng,We.lat]];Ee=Wu([st]);const qt=Rc(Ee),gn=mc([[We.lng,We.lat],[ct.lng,We.lat]]),Qe=mc([[We.lng,We.lat],[We.lng,ct.lat]]),lt=Hh(gn,{units:"meters"}),it=Hh(Qe,{units:"meters"}),$t=lt*it;return console.log(`
Conversion Rectangle -> GeoJSON`),console.log(`- Largeur: ${lt.toFixed(2)}m`),console.log(`- Hauteur: ${it.toFixed(2)}m`),console.log(`- Surface théorique: ${$t.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${qt.toFixed(2)}m²`),console.log(`- Différence: ${Math.abs($t-qt).toFixed(2)}m² (${(Math.abs($t-qt)/$t*100).toFixed(2)}%)`),Ee}else if((($e=le.properties)==null?void 0:$e.type)==="Semicircle"){const me=le.getCenter(),We=le.getRadius(),ct=le.getStartAngle(),pt=le.getStopAngle(),gt=[],st=64;gt.push([me.lng,me.lat]);for(let Qe=0;Qe<=st;Qe++){const it=(ct+(pt-ct+360)%360*Qe/st)*Math.PI/180,$t=We*Math.cos(it),Dn=We*Math.sin(it)/111319.9,vn=$t/(111319.9*Math.cos(me.lat*Math.PI/180));gt.push([me.lng+vn,me.lat+Dn])}gt.push([me.lng,me.lat]),Ee=Wu([gt]);const qt=Rc(Ee),gn=((et=le.properties)==null?void 0:et.surface)||0;return console.log(`
Conversion Semicircle -> GeoJSON`),console.log(`- Rayon: ${We.toFixed(2)}m`),console.log(`- Surface propriété: ${gn.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${qt.toFixed(2)}m²`),console.log(`- Différence: ${Math.abs(gn-qt).toFixed(2)}m² (${(Math.abs(gn-qt)/gn*100).toFixed(2)}%)`),Ee}return null}catch(Ee){return console.error("[useMapDrawing] Erreur lors de la conversion en GeoJSON:",Ee),null}}).filter(le=>le!==null);if(De.length===0)return 0;const Xe=De.map(le=>{const je=Rc(le);return console.log(`Surface individuelle: ${je.toFixed(2)}m²`),je});let fe=0;for(let le=0;le<De.length;le++)for(let je=le+1;je<De.length;je++)try{const $e=Ij([De[le],De[je]]),et=mz($e);if(et){const Ee=Rc(et);fe+=Ee,console.log(`Intersection entre formes ${le+1} et ${je+1}: ${Ee.toFixed(2)}m²`)}}catch($e){console.error(`Erreur lors du calcul d'intersection entre les formes ${le+1} et ${je+1}:`,$e)}const ee=Xe.reduce((le,je)=>le+je,0),se=ee-fe;return console.log(`
Calcul de la surface d'irrigation pour le groupe ${Ae+1}:`),console.log(`- Surface totale (somme): ${ee.toFixed(2)}m²`),console.log(`- Surface d'intersection: ${fe.toFixed(2)}m²`),console.log(`- Surface d'irrigation finale: ${se.toFixed(2)}m²`),se}),he=Math.max(...ye);return console.log(`
Surface d'irrigation maximale parmi les groupes: ${he.toFixed(2)}m²`),he},I=()=>{a.value&&(t.value.removeLayer(a.value),a.value=null)},Q=(K,Z)=>{if(!t.value)return;I();const oe=Z?G(K,Z):K;if(a.value||(a.value=Vt.layerGroup().addTo(t.value)),oe.forEach(de=>{var he;const ye=(he=de.properties)==null?void 0:he.type;if(ye==="Circle"||ye==="Semicircle"){const X=de.getLatLng(),Ae=de.getRadius(),De=Vt.circle(X,{radius:Ae,fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Vt.canvas({padding:.5})}),Xe=Vt.circle(X,{radius:Ae,fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Vt.canvas({padding:.5})});a.value&&(a.value.addLayer(Xe),a.value.addLayer(De))}else if(ye==="Rectangle"||ye==="Polygon"){const X=de.getLatLngs(),Ae=Vt.polygon(X,{fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Vt.canvas({padding:.5})}),De=Vt.polygon(X,{fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Vt.canvas({padding:.5})});a.value&&(a.value.addLayer(De),a.value.addLayer(Ae))}}),Z&&oe.length>1&&t.value){const de=Vt.latLngBounds([]);oe.forEach(X=>{X.getBounds?de.extend(X.getBounds()):X.getLatLng&&de.extend(X.getLatLng())});const ye=de.getCenter(),he=Vt.tooltip({permanent:!0,direction:"center",className:"connected-group-tooltip"}).setContent("<div>Groupe connecté</div>").setLatLng(ye);a.value&&a.value.addLayer(Vt.marker(ye,{opacity:0,interactive:!1}).bindTooltip(he).openTooltip())}},G=(K,Z)=>{if(!Z)return[];const oe=new Set,de=[Z],ye=[Z];for(Z._leaflet_id!==void 0&&oe.add(Z._leaflet_id);de.length>0;){const he=de.shift();for(const X of K){if(X===he||oe.has(X._leaflet_id))continue;_e(he,X)&&(ye.push(X),de.push(X),oe.add(X._leaflet_id))}}return ye},_e=(K,Z)=>{let oe=null,de=null;if(K.getBounds&&typeof K.getBounds=="function")oe=K.getBounds();else if(K.getLatLng&&K.getRadius){const ye=K.getLatLng(),he=K.getRadius();oe=Vt.latLngBounds([ye.lat-he/111e3,ye.lng-he/(111e3*Math.cos(ye.lat*Math.PI/180))],[ye.lat+he/111e3,ye.lng+he/(111e3*Math.cos(ye.lat*Math.PI/180))])}if(Z.getBounds&&typeof Z.getBounds=="function")de=Z.getBounds();else if(Z.getLatLng&&Z.getRadius){const ye=Z.getLatLng(),he=Z.getRadius();de=Vt.latLngBounds([ye.lat-he/111e3,ye.lng-he/(111e3*Math.cos(ye.lat*Math.PI/180))],[ye.lat+he/111e3,ye.lng+he/(111e3*Math.cos(ye.lat*Math.PI/180))])}return!(!oe||!de||!oe.intersects(de))},ve=(K,Z)=>{var de;const oe=G(K,Z);return oe.length===1&&(de=Z.properties)!=null&&de.surface?Z.properties.surface:B(oe)},qe=K=>{var de,ye,he,X,Ae,De,Xe,fe,ee;const Z=K.layer;(de=e.value)==null||de.addLayer(Z);let oe="unknown";if(Z instanceof Vt.Circle?oe=i.value==="Semicircle"?"Semicircle":"Circle":Z instanceof Vt.Rectangle?oe="Rectangle":Z instanceof Vt.Polygon?oe="Polygon":Z instanceof Vt.Polyline&&!(Z instanceof Vt.Polygon)&&(oe="Line"),Z.properties=E(Z,oe),Z.properties||(Z.properties={}),Z.properties.category||(Z.properties.category="forages"),Z.properties.accessLevel||(Z.properties.accessLevel="visitor"),Z._dbId=Date.now()+Math.floor(Math.random()*1e3),s.value=Z,console.log("[useMapDrawing] Input layer:",{type:oe,instanceof:{Circle:Z instanceof Vt.Circle,Rectangle:Z instanceof Vt.Rectangle,Polygon:Z instanceof Vt.Polygon,Polyline:Z instanceof Vt.Polyline},options:Z.options,properties:Z.properties,_dbId:Z._dbId}),window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:Z,type:oe,properties:Z.properties}})),Z.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:oe,isSelected:s.value===Z}),(!s.value||s.value!==Z)&&$(Z)}),Z.on("mouseout",()=>{var se;console.log("[mouseout] Sortie de la forme",{type:oe,isSelected:s.value===Z}),(!s.value||s.value!==Z)&&((se=r.value)==null||se.clearLayers())}),oe==="Semicircle")console.log("Conversion en demi-cercle désactivée selon les exigences");else if(oe==="Circle"){(ye=e.value)==null||ye.removeLayer(Z);const se=new sp(Z.getLatLng(),{radius:Z.getRadius(),...Z.options});se.properties={...E(se,"Circle"),type:"Circle"},Object.defineProperty(se,"name",{value:se.properties.name,writable:!0,enumerable:!0,configurable:!0}),console.log("[useMapDrawing] Création du cercle personnalisé:",{propertyDescriptor:Object.getOwnPropertyDescriptor(se,"name"),directName:se.name,propertiesName:se.properties.name,nameIsEnumerable:Object.keys(se).includes("name"),allProperties:Object.keys(se.properties),allKeys:Object.keys(se)}),(he=e.value)==null||he.addLayer(se),s.value=se,j(se)}else if(oe==="Rectangle"){(X=e.value)==null||X.removeLayer(Z);const se=new qa(Z.getBounds(),{...Z.options});se.updateProperties(),(Ae=e.value)==null||Ae.addLayer(se),s.value=se,J(se)}else if(Z instanceof Vt.Polygon){const se=Z.getLatLngs()[0],le=new uh([se],{...Z.options});le.updateProperties(),(De=e.value)==null||De.removeLayer(Z),(Xe=e.value)==null||Xe.addLayer(le),s.value=le,R(le)}else if(Z instanceof pa)U(Z);else if(Z instanceof Vt.Polyline&&!(Z instanceof Vt.Polygon)){const se=Z.getLatLngs(),le=new pa(se,{...Z.options});le.updateProperties(),(fe=e.value)==null||fe.removeLayer(Z),(ee=e.value)==null||ee.addLayer(le),s.value=le,U(le)}Gl("Cliquez sur la forme pour afficher les points de contrôle")},re=()=>{t.value&&(t.value.off("pm:create"),t.value.on("pm:create",qe))};return{map:t,featureGroup:e,controlPointsGroup:n,tempControlPointsGroup:r,currentTool:i,selectedShape:s,isDrawing:o,initMap:M,setDrawingTool:z,updateShapeStyle:Y,updateShapeProperties:ne,updateTextFixedSize:D,adjustView:A,clearActiveControlPoints:g,calculateTotalCoverageArea:B,showCoverageOverlay:Q,hideCoverageOverlay:I,calculateConnectedCoverageArea:ve,getConnectedShapes:G}}function RU(){const{isEnabled:t,startMeasure:e}=$p(),n=Ct(null),r=Ct(""),i=Ct("Hybride"),s=Ct(null),o={maxZoom:19,updateWhenZooming:!0,updateWhenIdle:!0,noWrap:!0,keepBuffer:2,maxNativeZoom:19,tileSize:256,zoomOffset:0,bounds:Vt.latLngBounds(Vt.latLng(41.333,-5.566),Vt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,useCache:!0,priorityLevels:3},a=e("createBaseMaps","useMapState"),l={Hybride:Vt.layerGroup([Vt.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{...o,attribution:"© OpenStreetMap contributors",opacity:.6,subdomains:["a","b","c"],crossOrigin:!0}),Vt.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{...o,attribution:"© Esri",maxNativeZoom:20,opacity:.6})]),Cadastre:Vt.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...o,attribution:"Cadastre - Carte © IGN/Geoportail",maxNativeZoom:18}),IGN:Vt.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...o,attribution:"Carte IGN © IGN/Geoportail",maxNativeZoom:18})};a();const c=An.createPerformanceTracker(g=>{An.measure("initMap:setOptions",()=>{n.value=g,g.options.zoomSnap=.5,g.options.zoomDelta=.5,g.options.wheelPxPerZoomLevel=120,g.options.zoomAnimation=!0,g.options.fadeAnimation=!0,g.options.markerZoomAnimation=!0,g.options.preferCanvas=!0,g.options.renderer=Vt.canvas(),g.options.minZoom=2,g.options.maxZoom=19,g.options.scrollWheelZoom=!0,g.options.doubleClickZoom=!0;const x=Vt.latLngBounds(Vt.latLng(-90,-180),Vt.latLng(90,180));g.setMaxBounds(x),g.options.maxBoundsViscosity=1,g.options.trackResize=!0;let E=null;g.getZoom(),g.on("zoomstart",()=>{g.getZoom(),g.options.zoomAnimation=!1,g.options.markerZoomAnimation=!1}),g.on("zoomend",()=>{E&&clearTimeout(E),E=setTimeout(()=>{setTimeout(()=>{g.options.zoomAnimation=!0,g.options.markerZoomAnimation=!0,g.invalidateSize({animate:!1,pan:!1});const M=g.getBounds(),A=g.options.maxBounds;A&&!M.intersects(A)&&g.panInsideBounds(A,{animate:!1}),g.eachLayer(z=>{z.properties&&z.properties.type==="Note"&&typeof z.updatePosition=="function"&&z.updatePosition()})},250)},250)});const D=g._zoomAnimation;D&&(g._zoomAnimation=function(M){try{this._animatingZoom||D.call(this,M)}catch{console.warn("Animation de zoom interrompue, restauration de la vue..."),this._resetView(this.getCenter(),this.getZoom())}}),g.on("zoomanim",M=>{g.eachLayer(A=>{A.properties&&A.properties.type==="Note"&&typeof A.updatePositionDuringZoom=="function"&&A.updatePositionDuringZoom(M)})})},"useMapState"),An.measure("initMap:addInitialLayer",()=>{g&&g.whenReady(()=>{const x=i.value;if(l[x]){if(console.log(`Initialisation de la couche de base: ${x}`),s.value&&g.hasLayer(s.value))try{g.removeLayer(s.value),console.log("Couche active précédente supprimée")}catch(E){console.warn("Erreur lors de la suppression de la couche active précédente:",E)}s.value=l[x];try{s.value.addTo(g),console.log(`Couche ${x} ajoutée à la carte`)}catch(E){console.error(`Erreur lors de l'ajout de la couche ${x}:`,E)}}else console.warn(`Couche de base non disponible: ${x}`)})},"useMapState"),g.on("baselayerchange",x=>{const E=e("baselayerchange","useMapState",{layer:x.name});i.value=x.name,s.value=x.layer,E()}),t.value&&(g.on("movestart",()=>{e("mapMove","useMapState",{startCenter:g.getCenter()})}),g.on("moveend",()=>{e("mapMoveEnd","useMapState",{endCenter:g.getCenter()})(),g.eachLayer(E=>{E.properties&&E.properties.type==="Note"&&typeof E.updatePosition=="function"&&E.updatePosition()})}),g.on("tileloadstart",()=>{e("tileLoad","useMapState")}),g.on("tileload",()=>{e("tileLoadEnd","useMapState")()}))},"initMap","useMapState"),h=An.createAsyncPerformanceTracker(async g=>{if(!n.value||!l[g]){console.warn(`Impossible de changer la carte de base: ${n.value?"type de carte non disponible":"carte non initialisée"}`);return}try{if(i.value===g)return;console.log(`Changement de carte: ${i.value} -> ${g}`);const x=n.value,E=x.getCenter(),D=x.getZoom();x.options.zoomAnimation=!1,x.options.fadeAnimation=!1,x.options.markerZoomAnimation=!1;const M=l[g];if(s.value&&x.hasLayer(s.value))try{x.removeLayer(s.value),console.log(`Couche précédente ${i.value} supprimée`)}catch(A){console.warn("Erreur lors de la suppression de la couche active:",A)}try{M instanceof Vt.LayerGroup,M.addTo(x),console.log(`Nouvelle couche ${g} ajoutée`)}catch(A){console.error("Erreur lors de l'ajout de la nouvelle couche:",A);try{x.hasLayer(M)&&x.removeLayer(M),M.addTo(x),console.log(`Récupération: couche ${g} réajoutée`)}catch(z){throw console.error("Échec de la récupération:",z),new Error("Impossible d'ajouter la nouvelle couche")}}s.value=M,i.value=g;try{x.setView(E,D,{animate:!1,duration:0,noMoveStart:!0}),console.log(`Vue réinitialisée: centre=${E}, zoom=${D}`)}catch(A){console.warn("Erreur lors de la réinitialisation de la vue:",A)}try{x.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{x.eachLayer(A=>{A.properties&&A.properties.type==="Note"&&typeof A.updatePosition=="function"&&A.updatePosition()})},100)}catch(A){console.warn("Erreur lors du rafraîchissement de la carte:",A)}setTimeout(()=>{x.options.zoomAnimation=!0,x.options.fadeAnimation=!0,x.options.markerZoomAnimation=!0,console.log("Animations restaurées")},500)}catch(x){if(console.error("Erreur lors du changement de carte de base:",x),n.value)try{const E=n.value;E.eachLayer(M=>{(M instanceof Vt.TileLayer||M instanceof Vt.LayerGroup)&&E.removeLayer(M)});const D=l[g];D.addTo(E),s.value=D,i.value=g,E.options.zoomAnimation=!0,E.options.fadeAnimation=!0,E.options.markerZoomAnimation=!0,E.invalidateSize({animate:!1,pan:!1}),console.log("Récupération effectuée après erreur")}catch(E){console.error("Erreur lors de la récupération après échec:",E)}}},"changeBaseMap","useMapState"),p=An.createAsyncPerformanceTracker(async()=>{if(!(!n.value||!r.value))try{const g=await An.measureAsync("searchLocation:fetchData",async()=>await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r.value)}`),"useMapState"),x=await An.measureAsync("searchLocation:parseResponse",async()=>await g.json(),"useMapState");x&&x.length>0&&An.measure("searchLocation:updateView",()=>{const{lat:E,lon:D}=x[0];n.value.setView([E,D],13,{animate:!0})},"useMapState")}catch(g){console.error("Erreur lors de la recherche de localisation:",g)}},"searchLocation","useMapState");return{map:n,searchQuery:r,currentBaseMap:i,baseMaps:l,initMap:c,searchLocation:p,changeBaseMap:h,cleanup:()=>{const g=e("cleanup","useMapState");n.value&&(n.value.remove(),n.value=null),s.value&&(s.value=null),g()},isPerformanceEnabled:t}}const FU={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3001] overflow-y-auto"},jU={class:"bg-white w-full h-full md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 relative overflow-y-auto"},zU={class:"p-4 md:p-6 pt-0 overflow-y-auto max-h-[calc(100vh-80px)] md:max-h-[calc(90vh-80px)]"},$U={key:0,class:"mb-4"},VU={key:0,class:"animate-pulse"},UU=["value"],HU={key:1,class:"mb-4"},WU={key:0,class:"animate-pulse"},GU=["disabled"],qU={value:null},YU=["value"],KU={key:2,class:"mb-4"},ZU={key:0,class:"animate-pulse"},XU=["disabled"],JU={value:null},QU=["value"],eH={class:"mb-4"},tH={class:"mb-6"},nH={class:"flex justify-end space-x-3"},rH=["disabled"],iH={key:0},sH={key:1},FE=Hs({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","salarieSelected","visiteurSelected"],setup(t,{expose:e,emit:n}){function r(V){return V?typeof V=="object"?V.id:V:null}function i(V){if(V===null)throw new Error("Invalid ID");return V}const s=t,o=n,a=xo(),l=$y(),c=Ap(),h=Ct(!1),p=Ct(null),v=Ct([]),g=Ct([]),x=Ct([]),E=Ct(null),D=Ct(null),M=Ct(!1),A=Ct(!1),z=Ct(!1),Y=Ct({nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),ne=Xn(()=>{var V,$,B;return((V=a.user)==null?void 0:V.user_type)==="admin"?Y.value.nom.trim()&&Y.value.entreprise&&Y.value.salarie:(($=a.user)==null?void 0:$.user_type)==="entreprise"?Y.value.nom.trim()&&Y.value.salarie:(((B=a.user)==null?void 0:B.user_type)==="salarie",Y.value.nom.trim())});Ti(()=>Y.value.entreprise,async V=>{if(!s.modelValue)return;Y.value.salarie=null,Y.value.visiteur=null,g.value=[];const $=r(V);console.log("[NewPlanModal] Entreprise sélectionnée:",$),$?await ge($):v.value=[]}),Ti(()=>Y.value.salarie,async V=>{if(!s.modelValue)return;Y.value.visiteur=null;const $=r(V);$?await pe($):g.value=[]}),Ti(()=>s.modelValue,V=>{var $,B,I;V?(($=a.user)==null?void 0:$.user_type)==="admin"?U():((B=a.user)==null?void 0:B.user_type)==="entreprise"?ge(a.user.id):((I=a.user)==null?void 0:I.user_type)==="salarie"&&pe(a.user.id):(Y.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},E.value=null,D.value=null,g.value=[],v.value=[],x.value=[],p.value=null)});async function ge(V){M.value=!0;try{console.log("[NewPlanModal] Chargement des salaries pour entreprise:",V);const $=await hl.getUsers({role:"SALARIE",entreprise:V});console.log("[NewPlanModal] Réponse salaries:",$.data),v.value=$.data}catch($){console.error("[NewPlanModal] Error loading salaries:",$),v.value=[]}finally{M.value=!1}}async function pe(V){A.value=!0;try{const $=await hl.getUsers({role:"VISITEUR",salarie:V});g.value=$.data}catch($){console.error("[NewPlanModal] Error loading visiteurs:",$),g.value=[]}finally{A.value=!1}}async function O(V){s.modelValue&&(E.value=V,Y.value.salarie=V.id,await pe(V.id),o("salarieSelected",V))}function j(V){s.modelValue&&(D.value=V,Y.value.visiteur=V.id,o("visiteurSelected",V))}function J(){o("update:modelValue",!1),Y.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},E.value=null,D.value=null,g.value=[],p.value=null}async function U(){z.value=!0;try{const V=await a.fetchEnterprises();x.value=V}catch(V){console.error("[NewPlanModal] Error loading entreprises:",V),x.value=[]}finally{z.value=!1}}async function R(){var V,$;p.value=null,h.value=!0;try{const B={nom:Y.value.nom.trim(),description:Y.value.description.trim()},I=a.user;if(!I)throw new Error("User not found");if(I.user_type==="admin"){if(!Y.value.entreprise||!Y.value.salarie)throw new Error("Missing required fields");B.entreprise=i(r(Y.value.entreprise)),B.salarie=i(r(Y.value.salarie)),Y.value.visiteur&&(B.visiteur=Y.value.visiteur)}else if(I.user_type==="entreprise"){if(!Y.value.salarie)throw new Error("Missing required fields");B.entreprise=I.id,B.salarie=i(r(Y.value.salarie)),Y.value.visiteur&&(B.visiteur=Y.value.visiteur)}else if(I.user_type==="salarie"){if(!I.entreprise)throw new Error("Missing required fields");B.entreprise=I.entreprise.id,B.salarie=I.id,Y.value.visiteur&&(B.visiteur=Y.value.visiteur)}else if(I.user_type==="visiteur"){if(!I.entreprise||!I.salarie)throw new Error("Missing required fields");B.entreprise=I.entreprise.id,B.salarie=I.salarie.id,B.visiteur=I.id}console.log("Données du plan à créer:",B),l.clearCurrentPlan(),c.setCurrentPlan(null);const Q=await l.createPlan(B);o("created",Q.id),J()}catch(B){console.error("[NewPlanModal] Error creating plan:",B),console.error("Response data:",(V=B.response)==null?void 0:V.data);let I="Une erreur est survenue lors de la création du plan";($=B.response)!=null&&$.data&&(typeof B.response.data=="object"?I=Object.entries(B.response.data).map(([Q,G])=>Array.isArray(G)?`${Q}: ${G.join(", ")}`:`${Q}: ${G}`).join(`
`):typeof B.response.data=="string"&&(I=B.response.data)),p.value=I}finally{h.value=!1}}return e({salaries:v,visiteurs:g,selectedSalarie:E,selectedVisiteur:D,loadSalaries:ge,loadVisiteurs:pe,selectSalarie:O,selectVisiteur:j}),(V,$)=>{var B,I,Q,G;return V.modelValue?(Ne(),Be("div",FU,[S("div",jU,[S("div",{class:"flex justify-between items-center mb-4 sticky top-0 bg-white p-4 md:p-6 pb-4 border-b z-10"},[$[6]||($[6]=S("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),S("button",{onClick:J,class:"text-gray-400 hover:text-gray-500"},$[5]||($[5]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",zU,[Vn(a).isAdmin?(Ne(),Be("div",$U,[$[9]||($[9]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Entreprise",-1)),z.value?(Ne(),Be("div",VU,$[7]||($[7]=[S("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):kn((Ne(),Be("select",{key:1,"onUpdate:modelValue":$[0]||($[0]=_e=>Y.value.entreprise=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[$[8]||($[8]=S("option",{value:null},"Sélectionnez une entreprise",-1)),(Ne(!0),Be(wn,null,Qn(x.value,_e=>(Ne(),Be("option",{key:_e.id,value:_e.id},kt(Vn(Cu)(_e)),9,UU))),128))],512)),[[Zi,Y.value.entreprise]])])):Zt("",!0),((B=Vn(a).user)==null?void 0:B.user_type)==="admin"||((I=Vn(a).user)==null?void 0:I.user_type)==="entreprise"?(Ne(),Be("div",HU,[$[11]||($[11]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salarie",-1)),M.value?(Ne(),Be("div",WU,$[10]||($[10]=[S("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):kn((Ne(),Be("select",{key:1,id:"edit-salarie","onUpdate:modelValue":$[1]||($[1]=_e=>Y.value.salarie=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:Vn(a).isAdmin&&!Y.value.entreprise},[S("option",qU,kt(v.value.length?"Sélectionnez un salarie":"Aucun salarie disponible"),1),(Ne(!0),Be(wn,null,Qn(v.value,_e=>(Ne(),Be("option",{key:_e.id,value:_e.id},kt(Vn(Cu)(_e)),9,YU))),128))],8,GU)),[[Zi,Y.value.salarie]])])):Zt("",!0),((Q=Vn(a).user)==null?void 0:Q.user_type)!=="visiteur"?(Ne(),Be("div",KU,[$[13]||($[13]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visiteur",-1)),A.value?(Ne(),Be("div",ZU,$[12]||($[12]=[S("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):kn((Ne(),Be("select",{key:1,id:"edit-visiteur","onUpdate:modelValue":$[2]||($[2]=_e=>Y.value.visiteur=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!g.value.length||((G=Vn(a).user)==null?void 0:G.user_type)!=="salarie"&&!Y.value.salarie},[S("option",JU,kt(g.value.length?"Sélectionnez un visiteur":"Aucun visiteur disponible"),1),(Ne(!0),Be(wn,null,Qn(g.value,_e=>(Ne(),Be("option",{key:_e.id,value:_e.id},kt(Vn(Cu)(_e)),9,QU))),128))],8,XU)),[[Zi,Y.value.visiteur]])])):Zt("",!0),S("div",eH,[$[14]||($[14]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),kn(S("input",{id:"edit-nom","onUpdate:modelValue":$[3]||($[3]=_e=>Y.value.nom=_e),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[zr,Y.value.nom]])]),S("div",tH,[$[15]||($[15]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),kn(S("textarea",{id:"edit-description","onUpdate:modelValue":$[4]||($[4]=_e=>Y.value.description=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[zr,Y.value.description]])]),S("div",nH,[S("button",{onClick:J,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),S("button",{onClick:R,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!ne.value||h.value},[h.value?(Ne(),Be("span",iH,"Création en cours...")):(Ne(),Be("span",sH,"Créer"))],8,rH)])])])])):Zt("",!0)}}});function ps(t){"@babel/helpers - typeof";return ps=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ps(t)}var ml=Uint8Array,Eu=Uint16Array,j_=Int32Array,Vy=new ml([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Uy=new ml([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),xb=new ml([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),jE=function(t,e){for(var n=new Eu(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new j_(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},zE=jE(Vy,2),$E=zE.b,Lb=zE.r;$E[28]=258,Lb[258]=28;var VE=jE(Uy,0),oH=VE.b,v5=VE.r,Sb=new Eu(32768);for(var $s=0;$s<32768;++$s){var Xd=($s&43690)>>1|($s&21845)<<1;Xd=(Xd&52428)>>2|(Xd&13107)<<2,Xd=(Xd&61680)>>4|(Xd&3855)<<4,Sb[$s]=((Xd&65280)>>8|(Xd&255)<<8)>>1}var Xc=function(t,e,n){for(var r=t.length,i=0,s=new Eu(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new Eu(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new Eu(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],h=e-t[i],p=o[t[i]-1]++<<h,v=p|(1<<h)-1;p<=v;++p)a[Sb[p]>>l]=c}else for(a=new Eu(r),i=0;i<r;++i)t[i]&&(a[i]=Sb[o[t[i]-1]++]>>15-t[i]);return a},Lh=new ml(288);for(var $s=0;$s<144;++$s)Lh[$s]=8;for(var $s=144;$s<256;++$s)Lh[$s]=9;for(var $s=256;$s<280;++$s)Lh[$s]=7;for(var $s=280;$s<288;++$s)Lh[$s]=8;var vm=new ml(32);for(var $s=0;$s<32;++$s)vm[$s]=5;var aH=Xc(Lh,9,0),lH=Xc(Lh,9,1),uH=Xc(vm,5,0),cH=Xc(vm,5,1),e2=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},cc=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},t2=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},z_=function(t){return(t+7)/8|0},UE=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new ml(t.subarray(e,n))},dH=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],gc=function(t,e,n){var r=new Error(e||dH[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,gc),!n)throw r;return r},hH=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new ml(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new ml(i*3));var c=function(De){var Xe=n.length;if(De>Xe){var fe=new ml(Math.max(Xe*2,De));fe.set(n),n=fe}},h=e.f||0,p=e.p||0,v=e.b||0,g=e.l,x=e.d,E=e.m,D=e.n,M=i*8;do{if(!g){h=cc(t,p,1);var A=cc(t,p+1,3);if(p+=3,A)if(A==1)g=lH,x=cH,E=9,D=5;else if(A==2){var ge=cc(t,p,31)+257,pe=cc(t,p+10,15)+4,O=ge+cc(t,p+5,31)+1;p+=14;for(var j=new ml(O),J=new ml(19),U=0;U<pe;++U)J[xb[U]]=cc(t,p+U*3,7);p+=pe*3;for(var R=e2(J),V=(1<<R)-1,$=Xc(J,R,1),U=0;U<O;){var B=$[cc(t,p,V)];p+=B&15;var z=B>>4;if(z<16)j[U++]=z;else{var I=0,Q=0;for(z==16?(Q=3+cc(t,p,3),p+=2,I=j[U-1]):z==17?(Q=3+cc(t,p,7),p+=3):z==18&&(Q=11+cc(t,p,127),p+=7);Q--;)j[U++]=I}}var G=j.subarray(0,ge),_e=j.subarray(ge);E=e2(G),D=e2(_e),g=Xc(G,E,1),x=Xc(_e,D,1)}else gc(1);else{var z=z_(p)+4,Y=t[z-4]|t[z-3]<<8,ne=z+Y;if(ne>i){l&&gc(0);break}a&&c(v+Y),n.set(t.subarray(z,ne),v),e.b=v+=Y,e.p=p=ne*8,e.f=h;continue}if(p>M){l&&gc(0);break}}a&&c(v+131072);for(var ve=(1<<E)-1,qe=(1<<D)-1,re=p;;re=p){var I=g[t2(t,p)&ve],K=I>>4;if(p+=I&15,p>M){l&&gc(0);break}if(I||gc(2),K<256)n[v++]=K;else if(K==256){re=p,g=null;break}else{var Z=K-254;if(K>264){var U=K-257,oe=Vy[U];Z=cc(t,p,(1<<oe)-1)+$E[U],p+=oe}var de=x[t2(t,p)&qe],ye=de>>4;de||gc(3),p+=de&15;var _e=oH[ye];if(ye>3){var oe=Uy[ye];_e+=t2(t,p)&(1<<oe)-1,p+=oe}if(p>M){l&&gc(0);break}a&&c(v+131072);var he=v+Z;if(v<_e){var X=s-_e,Ae=Math.min(_e,he);for(X+v<0&&gc(3);v<Ae;++v)n[v]=r[X+v]}for(;v<he;++v)n[v]=n[v-_e]}}e.l=g,e.p=re,e.b=v,e.f=h,g&&(h=1,e.m=E,e.d=x,e.n=D)}while(!h);return v!=n.length&&o?UE(n,0,v):n.subarray(0,v)},_d=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},ig=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},n2=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:WE,l:0};if(i==1){var o=new ml(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(ne,ge){return ne.f-ge.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,h=1,p=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};h!=i-1;)a=n[n[c].f<n[p].f?c++:p++],l=n[c!=h&&n[c].f<n[p].f?c++:p++],n[h++]={s:-1,f:a.f+l.f,l:a,r:l};for(var v=s[0].s,r=1;r<i;++r)s[r].s>v&&(v=s[r].s);var g=new Eu(v+1),x=Cb(n[h-1],g,0);if(x>e){var r=0,E=0,D=x-e,M=1<<D;for(s.sort(function(ge,pe){return g[pe.s]-g[ge.s]||ge.f-pe.f});r<i;++r){var A=s[r].s;if(g[A]>e)E+=M-(1<<x-g[A]),g[A]=e;else break}for(E>>=D;E>0;){var z=s[r].s;g[z]<e?E-=1<<e-g[z]++-1:++r}for(;r>=0&&E;--r){var Y=s[r].s;g[Y]==e&&(--g[Y],++E)}x=e}return{t:new ml(g),l:x}},Cb=function(t,e,n){return t.s==-1?Math.max(Cb(t.l,e,n+1),Cb(t.r,e,n+1)):e[t.s]=n},y5=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Eu(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},sg=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},HE=function(t,e,n){var r=n.length,i=z_(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},b5=function(t,e,n,r,i,s,o,a,l,c,h){_d(e,h++,n),++i[256];for(var p=n2(i,15),v=p.t,g=p.l,x=n2(s,15),E=x.t,D=x.l,M=y5(v),A=M.c,z=M.n,Y=y5(E),ne=Y.c,ge=Y.n,pe=new Eu(19),O=0;O<A.length;++O)++pe[A[O]&31];for(var O=0;O<ne.length;++O)++pe[ne[O]&31];for(var j=n2(pe,7),J=j.t,U=j.l,R=19;R>4&&!J[xb[R-1]];--R);var V=c+5<<3,$=sg(i,Lh)+sg(s,vm)+o,B=sg(i,v)+sg(s,E)+o+14+3*R+sg(pe,J)+2*pe[16]+3*pe[17]+7*pe[18];if(l>=0&&V<=$&&V<=B)return HE(e,h,t.subarray(l,l+c));var I,Q,G,_e;if(_d(e,h,1+(B<$)),h+=2,B<$){I=Xc(v,g,0),Q=v,G=Xc(E,D,0),_e=E;var ve=Xc(J,U,0);_d(e,h,z-257),_d(e,h+5,ge-1),_d(e,h+10,R-4),h+=14;for(var O=0;O<R;++O)_d(e,h+3*O,J[xb[O]]);h+=3*R;for(var qe=[A,ne],re=0;re<2;++re)for(var K=qe[re],O=0;O<K.length;++O){var Z=K[O]&31;_d(e,h,ve[Z]),h+=J[Z],Z>15&&(_d(e,h,K[O]>>5&127),h+=K[O]>>12)}}else I=aH,Q=Lh,G=uH,_e=vm;for(var O=0;O<a;++O){var oe=r[O];if(oe>255){var Z=oe>>18&31;ig(e,h,I[Z+257]),h+=Q[Z+257],Z>7&&(_d(e,h,oe>>23&31),h+=Vy[Z]);var de=oe&31;ig(e,h,G[de]),h+=_e[de],de>3&&(ig(e,h,oe>>5&8191),h+=Uy[de])}else ig(e,h,I[oe]),h+=Q[oe]}return ig(e,h,I[256]),h+Q[256]},fH=new j_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),WE=new ml(0),pH=function(t,e,n,r,i,s){var o=s.z||t.length,a=new ml(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,h=(s.r||0)&7;if(e){h&&(l[0]=s.r>>3);for(var p=fH[e-1],v=p>>13,g=p&8191,x=(1<<n)-1,E=s.p||new Eu(32768),D=s.h||new Eu(x+1),M=Math.ceil(n/3),A=2*M,z=function(ee){return(t[ee]^t[ee+1]<<M^t[ee+2]<<A)&x},Y=new j_(25e3),ne=new Eu(288),ge=new Eu(32),pe=0,O=0,j=s.i||0,J=0,U=s.w||0,R=0;j+2<o;++j){var V=z(j),$=j&32767,B=D[V];if(E[$]=B,D[V]=$,U<=j){var I=o-j;if((pe>7e3||J>24576)&&(I>423||!c)){h=b5(t,l,0,Y,ne,ge,O,J,R,j-R,h),J=pe=O=0,R=j;for(var Q=0;Q<286;++Q)ne[Q]=0;for(var Q=0;Q<30;++Q)ge[Q]=0}var G=2,_e=0,ve=g,qe=$-B&32767;if(I>2&&V==z(j-qe))for(var re=Math.min(v,I)-1,K=Math.min(32767,j),Z=Math.min(258,I);qe<=K&&--ve&&$!=B;){if(t[j+G]==t[j+G-qe]){for(var oe=0;oe<Z&&t[j+oe]==t[j+oe-qe];++oe);if(oe>G){if(G=oe,_e=qe,oe>re)break;for(var de=Math.min(qe,oe-2),ye=0,Q=0;Q<de;++Q){var he=j-qe+Q&32767,X=E[he],Ae=he-X&32767;Ae>ye&&(ye=Ae,B=he)}}}$=B,B=E[$],qe+=$-B&32767}if(_e){Y[J++]=268435456|Lb[G]<<18|v5[_e];var De=Lb[G]&31,Xe=v5[_e]&31;O+=Vy[De]+Uy[Xe],++ne[257+De],++ge[Xe],U=j+G,++pe}else Y[J++]=t[j],++ne[t[j]]}}for(j=Math.max(j,U);j<o;++j)Y[J++]=t[j],++ne[t[j]];h=b5(t,l,c,Y,ne,ge,O,J,R,j-R,h),c||(s.r=h&7|l[h/8|0]<<3,h-=7,s.h=D,s.p=E,s.i=j,s.w=U)}else{for(var j=s.w||0;j<o+c;j+=65535){var fe=j+65535;fe>=o&&(l[h/8|0]=c,fe=o),h=HE(l,h+1,t.subarray(j,fe))}s.i=o}return UE(a,0,r+z_(h)+i)},GE=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},gH=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new ml(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return pH(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},qE=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},mH=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=GE();i.p(e.dictionary),qE(t,2,i.d())}},vH=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&gc(6,"invalid zlib data"),(t[1]>>5&1)==1&&gc(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Eb(t,e){e||(e={});var n=GE();n.p(t);var r=gH(t,e,e.dictionary?6:2,4);return mH(r,e),qE(r,r.length-4,n.d()),r}function yH(t,e){return hH(t.subarray(vH(t),-4),{i:2},e,e)}var bH=typeof TextDecoder<"u"&&new TextDecoder,_H=0;try{bH.decode(WE,{stream:!0}),_H=1}catch{}var Rr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function r2(){Rr.console&&typeof Rr.console.log=="function"&&Rr.console.log.apply(Rr.console,arguments)}var Cs={log:r2,warn:function(t){Rr.console&&(typeof Rr.console.warn=="function"?Rr.console.warn.apply(Rr.console,arguments):r2.call(null,arguments))},error:function(t){Rr.console&&(typeof Rr.console.error=="function"?Rr.console.error.apply(Rr.console,arguments):r2(t))}};function i2(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Jh(r.response,e,n)},r.onerror=function(){Cs.error("could not download file")},r.send()}function _5(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function x0(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Wg,Pb,Jh=Rr.saveAs||((typeof window>"u"?"undefined":ps(window))!=="object"||window!==Rr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Rr.URL||Rr.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?_5(i.href)?i2(t,e,n):x0(i,i.target="_blank"):x0(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){x0(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(_5(t))i2(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){x0(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:ps(s)!=="object"&&(Cs.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return i2(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(Rr.HTMLElement)||Rr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":ps(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var h=a.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=h:location=h,r=null},a.readAsDataURL(t)}else{var l=Rr.URL||Rr.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function YE(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function s2(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=ol(n,r,i,s,e[0],7,-680876936),s=ol(s,n,r,i,e[1],12,-389564586),i=ol(i,s,n,r,e[2],17,606105819),r=ol(r,i,s,n,e[3],22,-1044525330),n=ol(n,r,i,s,e[4],7,-176418897),s=ol(s,n,r,i,e[5],12,1200080426),i=ol(i,s,n,r,e[6],17,-1473231341),r=ol(r,i,s,n,e[7],22,-45705983),n=ol(n,r,i,s,e[8],7,1770035416),s=ol(s,n,r,i,e[9],12,-1958414417),i=ol(i,s,n,r,e[10],17,-42063),r=ol(r,i,s,n,e[11],22,-1990404162),n=ol(n,r,i,s,e[12],7,1804603682),s=ol(s,n,r,i,e[13],12,-40341101),i=ol(i,s,n,r,e[14],17,-1502002290),n=al(n,r=ol(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=al(s,n,r,i,e[6],9,-1069501632),i=al(i,s,n,r,e[11],14,643717713),r=al(r,i,s,n,e[0],20,-373897302),n=al(n,r,i,s,e[5],5,-701558691),s=al(s,n,r,i,e[10],9,38016083),i=al(i,s,n,r,e[15],14,-660478335),r=al(r,i,s,n,e[4],20,-405537848),n=al(n,r,i,s,e[9],5,568446438),s=al(s,n,r,i,e[14],9,-1019803690),i=al(i,s,n,r,e[3],14,-187363961),r=al(r,i,s,n,e[8],20,1163531501),n=al(n,r,i,s,e[13],5,-1444681467),s=al(s,n,r,i,e[2],9,-51403784),i=al(i,s,n,r,e[7],14,1735328473),n=ll(n,r=al(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=ll(s,n,r,i,e[8],11,-2022574463),i=ll(i,s,n,r,e[11],16,1839030562),r=ll(r,i,s,n,e[14],23,-35309556),n=ll(n,r,i,s,e[1],4,-1530992060),s=ll(s,n,r,i,e[4],11,1272893353),i=ll(i,s,n,r,e[7],16,-155497632),r=ll(r,i,s,n,e[10],23,-1094730640),n=ll(n,r,i,s,e[13],4,681279174),s=ll(s,n,r,i,e[0],11,-358537222),i=ll(i,s,n,r,e[3],16,-722521979),r=ll(r,i,s,n,e[6],23,76029189),n=ll(n,r,i,s,e[9],4,-640364487),s=ll(s,n,r,i,e[12],11,-421815835),i=ll(i,s,n,r,e[15],16,530742520),n=ul(n,r=ll(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=ul(s,n,r,i,e[7],10,1126891415),i=ul(i,s,n,r,e[14],15,-1416354905),r=ul(r,i,s,n,e[5],21,-57434055),n=ul(n,r,i,s,e[12],6,1700485571),s=ul(s,n,r,i,e[3],10,-1894986606),i=ul(i,s,n,r,e[10],15,-1051523),r=ul(r,i,s,n,e[1],21,-2054922799),n=ul(n,r,i,s,e[8],6,1873313359),s=ul(s,n,r,i,e[15],10,-30611744),i=ul(i,s,n,r,e[6],15,-1560198380),r=ul(r,i,s,n,e[13],21,1309151649),n=ul(n,r,i,s,e[4],6,-145523070),s=ul(s,n,r,i,e[11],10,-1120210379),i=ul(i,s,n,r,e[2],15,718787259),r=ul(r,i,s,n,e[9],21,-343485551),t[0]=ch(n,t[0]),t[1]=ch(r,t[1]),t[2]=ch(i,t[2]),t[3]=ch(s,t[3])}function Hy(t,e,n,r,i,s){return e=ch(ch(e,t),ch(r,s)),ch(e<<i|e>>>32-i,n)}function ol(t,e,n,r,i,s,o){return Hy(e&n|~e&r,t,e,i,s,o)}function al(t,e,n,r,i,s,o){return Hy(e&r|n&~r,t,e,i,s,o)}function ll(t,e,n,r,i,s,o){return Hy(e^n^r,t,e,i,s,o)}function ul(t,e,n,r,i,s,o){return Hy(n^(e|~r),t,e,i,s,o)}function KE(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)s2(r,wH(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(s2(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,s2(r,i),r}function wH(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Wg=Rr.atob.bind(Rr),Pb=Rr.btoa.bind(Rr);var w5="0123456789abcdef".split("");function xH(t){for(var e="",n=0;n<4;n++)e+=w5[t>>8*n+4&15]+w5[t>>8*n&15];return e}function LH(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Mb(t){return KE(t).map(LH).join("")}var SH=function(t){for(var e=0;e<t.length;e++)t[e]=xH(t[e]);return t.join("")}(KE("hello"))!="5d41402abc4b2a76b9719d911017c592";function ch(t,e){if(SH){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function kb(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var h=a[l];c=(c+h+o.charCodeAt(l))%256,a[l]=a[c],a[c]=h}n=t,r=a}else a=r;var p=e.length,v=0,g=0,x="";for(l=0;l<p;l++)g=(g+(h=a[v=(v+1)%256]))%256,a[v]=a[g],a[g]=h,o=a[(a[v]+a[g])%256],x+=String.fromCharCode(e.charCodeAt(l)^o);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var x5={print:4,modify:8,copy:16,"annot-forms":32};function op(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(x5.perm!==void 0)throw new Error("Invalid permission: "+a);i+=x5[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=Mb(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=kb(this.encryptionKey,this.padding)}function ap(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function L5(t){if(ps(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){Rr.console&&Cs.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Yv(t){if(!(this instanceof Yv))return new Yv(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function ZE(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function rf(t,e,n,r,i){if(!(this instanceof rf))return new rf(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,ZE.call(this,r,i)}function cp(t,e,n,r,i){if(!(this instanceof cp))return new cp(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,ZE.call(this,r,i)}function Or(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",h=null;ps(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(h=t.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,v={},g={internal:{},__private__:{}};g.__private__.PubSub=L5;var x="1.3",E=g.__private__.getPdfVersion=function(){return x};g.__private__.setPdfVersion=function(F){x=F};var D={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return D};var M=g.__private__.getPageFormat=function(F){return D[F]};i=i||"a4";var A={COMPAT:"compat",ADVANCED:"advanced"},z=A.COMPAT;function Y(){this.saveGraphicsState(),le(new tr(it,0,0,-it,0,Za()*it).toString()+" cm"),this.setFontSize(this.getFontSize()/it),c="n",z=A.ADVANCED}function ne(){this.restoreGraphicsState(),c="S",z=A.COMPAT}var ge=g.__private__.combineFontStyleAndFontWeight=function(F,xe){if(F=="bold"&&xe=="normal"||F=="bold"&&xe==400||F=="normal"&&xe=="italic"||F=="bold"&&xe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return xe&&(F=xe==400||xe==="normal"?F==="italic"?"italic":"normal":xe!=700&&xe!=="bold"||F!=="normal"?(xe==700?"bold":xe)+""+F:"bold"),F};g.advancedAPI=function(F){var xe=z===A.COMPAT;return xe&&Y.call(this),typeof F!="function"||(F(this),xe&&ne.call(this)),this},g.compatAPI=function(F){var xe=z===A.ADVANCED;return xe&&ne.call(this),typeof F!="function"||(F(this),xe&&Y.call(this)),this},g.isAdvancedAPI=function(){return z===A.ADVANCED};var pe,O=function(F){if(z!==A.ADVANCED)throw new Error(F+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},j=g.roundToPrecision=g.__private__.roundToPrecision=function(F,xe){var tt=e||xe;if(isNaN(F)||isNaN(tt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return F.toFixed(tt).replace(/0+$/,"")};pe=g.hpf=g.__private__.hpf=typeof l=="number"?function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return j(F,l)}:l==="smart"?function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return j(F,F>-1&&F<1?16:5)}:function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return j(F,16)};var J=g.f2=g.__private__.f2=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.f2");return j(F,2)},U=g.__private__.f3=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.f3");return j(F,3)},R=g.scale=g.__private__.scale=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.scale");return z===A.COMPAT?F*it:z===A.ADVANCED?F:void 0},V=function(F){return z===A.COMPAT?Za()-F:z===A.ADVANCED?F:void 0},$=function(F){return R(V(F))};g.__private__.setPrecision=g.setPrecision=function(F){typeof parseInt(F,10)=="number"&&(e=parseInt(F,10))};var B,I="00000000000000000000000000000000",Q=g.__private__.getFileId=function(){return I},G=g.__private__.setFileId=function(F){return I=F!==void 0&&/^[a-fA-F0-9]{32}$/.test(F)?F.toUpperCase():I.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(Hi=new op(h.userPermissions,h.userPassword,h.ownerPassword,I)),I};g.setFileId=function(F){return G(F),this},g.getFileId=function(){return Q()};var _e=g.__private__.convertDateToPDFDate=function(F){var xe=F.getTimezoneOffset(),tt=xe<0?"+":"-",ft=Math.floor(Math.abs(xe/60)),Mt=Math.abs(xe%60),Ht=[tt,Z(ft),"'",Z(Mt),"'"].join("");return["D:",F.getFullYear(),Z(F.getMonth()+1),Z(F.getDate()),Z(F.getHours()),Z(F.getMinutes()),Z(F.getSeconds()),Ht].join("")},ve=g.__private__.convertPDFDateToDate=function(F){var xe=parseInt(F.substr(2,4),10),tt=parseInt(F.substr(6,2),10)-1,ft=parseInt(F.substr(8,2),10),Mt=parseInt(F.substr(10,2),10),Ht=parseInt(F.substr(12,2),10),hn=parseInt(F.substr(14,2),10);return new Date(xe,tt,ft,Mt,Ht,hn,0)},qe=g.__private__.setCreationDate=function(F){var xe;if(F===void 0&&(F=new Date),F instanceof Date)xe=_e(F);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(F))throw new Error("Invalid argument passed to jsPDF.setCreationDate");xe=F}return B=xe},re=g.__private__.getCreationDate=function(F){var xe=B;return F==="jsDate"&&(xe=ve(B)),xe};g.setCreationDate=function(F){return qe(F),this},g.getCreationDate=function(F){return re(F)};var K,Z=g.__private__.padd2=function(F){return("0"+parseInt(F)).slice(-2)},oe=g.__private__.padd2Hex=function(F){return("00"+(F=F.toString())).substr(F.length)},de=0,ye=[],he=[],X=0,Ae=[],De=[],Xe=!1,fe=he,ee=function(){de=0,X=0,he=[],ye=[],Ae=[],En=Ze(),On=Ze()};g.__private__.setCustomOutputDestination=function(F){Xe=!0,fe=F};var se=function(F){Xe||(fe=F)};g.__private__.resetCustomOutputDestination=function(){Xe=!1,fe=he};var le=g.__private__.out=function(F){return F=F.toString(),X+=F.length+1,fe.push(F),fe},je=g.__private__.write=function(F){return le(arguments.length===1?F.toString():Array.prototype.join.call(arguments," "))},$e=g.__private__.getArrayBuffer=function(F){for(var xe=F.length,tt=new ArrayBuffer(xe),ft=new Uint8Array(tt);xe--;)ft[xe]=F.charCodeAt(xe);return tt},et=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return et};var Ee=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(F){return Ee=z===A.ADVANCED?F/it:F,this};var me,We=g.__private__.getFontSize=g.getFontSize=function(){return z===A.COMPAT?Ee:Ee*it},ct=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(F){return ct=F,this},g.__private__.getR2L=g.getR2L=function(){return ct};var pt,gt=g.__private__.setZoomMode=function(F){var xe=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(F))me=F;else if(isNaN(F)){if(xe.indexOf(F)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+F+'" is not recognized.');me=F}else me=parseInt(F,10)};g.__private__.getZoomMode=function(){return me};var st,qt=g.__private__.setPageMode=function(F){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(F)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+F+'" is not recognized.');pt=F};g.__private__.getPageMode=function(){return pt};var gn=g.__private__.setLayoutMode=function(F){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(F)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+F+'" is not recognized.');st=F};g.__private__.getLayoutMode=function(){return st},g.__private__.setDisplayMode=g.setDisplayMode=function(F,xe,tt){return gt(F),gn(xe),qt(tt),this};var Qe={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(F){if(Object.keys(Qe).indexOf(F)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Qe[F]},g.__private__.getDocumentProperties=function(){return Qe},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(F){for(var xe in Qe)Qe.hasOwnProperty(xe)&&F[xe]&&(Qe[xe]=F[xe]);return this},g.__private__.setDocumentProperty=function(F,xe){if(Object.keys(Qe).indexOf(F)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Qe[F]=xe};var lt,it,$t,Jt,Dn,vn={},Tn={},Jn=[],en={},xn={},Cn={},er={},pr=null,xr=0,lr=[],Jr=new L5(g),Bs=t.hotfixes||[],Di={},Fo={},Rs=[],tr=function F(xe,tt,ft,Mt,Ht,hn){if(!(this instanceof F))return new F(xe,tt,ft,Mt,Ht,hn);isNaN(xe)&&(xe=1),isNaN(tt)&&(tt=0),isNaN(ft)&&(ft=0),isNaN(Mt)&&(Mt=1),isNaN(Ht)&&(Ht=0),isNaN(hn)&&(hn=0),this._matrix=[xe,tt,ft,Mt,Ht,hn]};Object.defineProperty(tr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(F){this._matrix[0]=F}}),Object.defineProperty(tr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(F){this._matrix[1]=F}}),Object.defineProperty(tr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(F){this._matrix[2]=F}}),Object.defineProperty(tr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(F){this._matrix[3]=F}}),Object.defineProperty(tr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(F){this._matrix[4]=F}}),Object.defineProperty(tr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(F){this._matrix[5]=F}}),Object.defineProperty(tr.prototype,"a",{get:function(){return this._matrix[0]},set:function(F){this._matrix[0]=F}}),Object.defineProperty(tr.prototype,"b",{get:function(){return this._matrix[1]},set:function(F){this._matrix[1]=F}}),Object.defineProperty(tr.prototype,"c",{get:function(){return this._matrix[2]},set:function(F){this._matrix[2]=F}}),Object.defineProperty(tr.prototype,"d",{get:function(){return this._matrix[3]},set:function(F){this._matrix[3]=F}}),Object.defineProperty(tr.prototype,"e",{get:function(){return this._matrix[4]},set:function(F){this._matrix[4]=F}}),Object.defineProperty(tr.prototype,"f",{get:function(){return this._matrix[5]},set:function(F){this._matrix[5]=F}}),Object.defineProperty(tr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(tr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(tr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(tr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),tr.prototype.join=function(F){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(pe).join(F)},tr.prototype.multiply=function(F){var xe=F.sx*this.sx+F.shy*this.shx,tt=F.sx*this.shy+F.shy*this.sy,ft=F.shx*this.sx+F.sy*this.shx,Mt=F.shx*this.shy+F.sy*this.sy,Ht=F.tx*this.sx+F.ty*this.shx+this.tx,hn=F.tx*this.shy+F.ty*this.sy+this.ty;return new tr(xe,tt,ft,Mt,Ht,hn)},tr.prototype.decompose=function(){var F=this.sx,xe=this.shy,tt=this.shx,ft=this.sy,Mt=this.tx,Ht=this.ty,hn=Math.sqrt(F*F+xe*xe),Fn=(F/=hn)*tt+(xe/=hn)*ft;tt-=F*Fn,ft-=xe*Fn;var Hn=Math.sqrt(tt*tt+ft*ft);return Fn/=Hn,F*(ft/=Hn)<xe*(tt/=Hn)&&(F=-F,xe=-xe,Fn=-Fn,hn=-hn),{scale:new tr(hn,0,0,Hn,0,0),translate:new tr(1,0,0,1,Mt,Ht),rotate:new tr(F,xe,-xe,F,0,0),skew:new tr(1,0,Fn,1,0,0)}},tr.prototype.toString=function(F){return this.join(" ")},tr.prototype.inversed=function(){var F=this.sx,xe=this.shy,tt=this.shx,ft=this.sy,Mt=this.tx,Ht=this.ty,hn=1/(F*ft-xe*tt),Fn=ft*hn,Hn=-xe*hn,cr=-tt*hn,Er=F*hn;return new tr(Fn,Hn,cr,Er,-Fn*Mt-cr*Ht,-Hn*Mt-Er*Ht)},tr.prototype.applyToPoint=function(F){var xe=F.x*this.sx+F.y*this.shx+this.tx,tt=F.x*this.shy+F.y*this.sy+this.ty;return new Gs(xe,tt)},tr.prototype.applyToRectangle=function(F){var xe=this.applyToPoint(F),tt=this.applyToPoint(new Gs(F.x+F.w,F.y+F.h));return new wa(xe.x,xe.y,tt.x-xe.x,tt.y-xe.y)},tr.prototype.clone=function(){var F=this.sx,xe=this.shy,tt=this.shx,ft=this.sy,Mt=this.tx,Ht=this.ty;return new tr(F,xe,tt,ft,Mt,Ht)},g.Matrix=tr;var Fs=g.matrixMult=function(F,xe){return xe.multiply(F)},jo=new tr(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=jo;var gs=function(F,xe){if(!xn[F]){var tt=(xe instanceof rf?"Sh":"P")+(Object.keys(en).length+1).toString(10);xe.id=tt,xn[F]=tt,en[tt]=xe,Jr.publish("addPattern",xe)}};g.ShadingPattern=rf,g.TilingPattern=cp,g.addShadingPattern=function(F,xe){return O("addShadingPattern()"),gs(F,xe),this},g.beginTilingPattern=function(F){O("beginTilingPattern()"),xa(F.boundingBox[0],F.boundingBox[1],F.boundingBox[2]-F.boundingBox[0],F.boundingBox[3]-F.boundingBox[1],F.matrix)},g.endTilingPattern=function(F,xe){O("endTilingPattern()"),xe.stream=De[K].join(`
`),gs(F,xe),Jr.publish("endTilingPattern",xe),Rs.pop().restore()};var qn=g.__private__.newObject=function(){var F=Ze();return Ye(F,!0),F},Ze=g.__private__.newObjectDeferred=function(){return de++,ye[de]=function(){return X},de},Ye=function(F,xe){return xe=typeof xe=="boolean"&&xe,ye[F]=X,xe&&le(F+" 0 obj"),F},Ut=g.__private__.newAdditionalObject=function(){var F={objId:Ze(),content:""};return Ae.push(F),F},En=Ze(),On=Ze(),Ln=g.__private__.decodeColorString=function(F){var xe=F.split(" ");if(xe.length!==2||xe[1]!=="g"&&xe[1]!=="G")xe.length===5&&(xe[4]==="k"||xe[4]==="K")&&(xe=[(1-xe[0])*(1-xe[3]),(1-xe[1])*(1-xe[3]),(1-xe[2])*(1-xe[3]),"r"]);else{var tt=parseFloat(xe[0]);xe=[tt,tt,tt,"r"]}for(var ft="#",Mt=0;Mt<3;Mt++)ft+=("0"+Math.floor(255*parseFloat(xe[Mt])).toString(16)).slice(-2);return ft},jt=g.__private__.encodeColorString=function(F){var xe;typeof F=="string"&&(F={ch1:F});var tt=F.ch1,ft=F.ch2,Mt=F.ch3,Ht=F.ch4,hn=F.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof tt=="string"&&tt.charAt(0)!=="#"){var Fn=new YE(tt);if(Fn.ok)tt=Fn.toHex();else if(!/^\d*\.?\d*$/.test(tt))throw new Error('Invalid color "'+tt+'" passed to jsPDF.encodeColorString.')}if(typeof tt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(tt)&&(tt="#"+tt[1]+tt[1]+tt[2]+tt[2]+tt[3]+tt[3]),typeof tt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(tt)){var Hn=parseInt(tt.substr(1),16);tt=Hn>>16&255,ft=Hn>>8&255,Mt=255&Hn}if(ft===void 0||Ht===void 0&&tt===ft&&ft===Mt)if(typeof tt=="string")xe=tt+" "+hn[0];else switch(F.precision){case 2:xe=J(tt/255)+" "+hn[0];break;case 3:default:xe=U(tt/255)+" "+hn[0]}else if(Ht===void 0||ps(Ht)==="object"){if(Ht&&!isNaN(Ht.a)&&Ht.a===0)return xe=["1.","1.","1.",hn[1]].join(" ");if(typeof tt=="string")xe=[tt,ft,Mt,hn[1]].join(" ");else switch(F.precision){case 2:xe=[J(tt/255),J(ft/255),J(Mt/255),hn[1]].join(" ");break;default:case 3:xe=[U(tt/255),U(ft/255),U(Mt/255),hn[1]].join(" ")}}else if(typeof tt=="string")xe=[tt,ft,Mt,Ht,hn[2]].join(" ");else switch(F.precision){case 2:xe=[J(tt),J(ft),J(Mt),J(Ht),hn[2]].join(" ");break;case 3:default:xe=[U(tt),U(ft),U(Mt),U(Ht),hn[2]].join(" ")}return xe},$n=g.__private__.getFilters=function(){return o},xt=g.__private__.putStream=function(F){var xe=(F=F||{}).data||"",tt=F.filters||$n(),ft=F.alreadyAppliedFilters||[],Mt=F.addLength1||!1,Ht=xe.length,hn=F.objectId,Fn=function(xs){return xs};if(h!==null&&hn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(Fn=Hi.encryptor(hn,0));var Hn={};tt===!0&&(tt=["FlateEncode"]);var cr=F.additionalKeyValues||[],Er=(Hn=Or.API.processDataByFilters!==void 0?Or.API.processDataByFilters(xe,tt):{data:xe,reverseChain:[]}).reverseChain+(Array.isArray(ft)?ft.join(" "):ft.toString());if(Hn.data.length!==0&&(cr.push({key:"Length",value:Hn.data.length}),Mt===!0&&cr.push({key:"Length1",value:Ht})),Er.length!=0)if(Er.split("/").length-1==1)cr.push({key:"Filter",value:Er});else{cr.push({key:"Filter",value:"["+Er+"]"});for(var Yr=0;Yr<cr.length;Yr+=1)if(cr[Yr].key==="DecodeParms"){for(var Yi=[],_i=0;_i<Hn.reverseChain.split("/").length-1;_i+=1)Yi.push("null");Yi.push(cr[Yr].value),cr[Yr].value="["+Yi.join(" ")+"]"}}le("<<");for(var Pi=0;Pi<cr.length;Pi++)le("/"+cr[Pi].key+" "+cr[Pi].value);le(">>"),Hn.data.length!==0&&(le("stream"),le(Fn(Hn.data)),le("endstream"))},Kt=g.__private__.putPage=function(F){var xe=F.number,tt=F.data,ft=F.objId,Mt=F.contentsObjId;Ye(ft,!0),le("<</Type /Page"),le("/Parent "+F.rootDictionaryObjId+" 0 R"),le("/Resources "+F.resourceDictionaryObjId+" 0 R"),le("/MediaBox ["+parseFloat(pe(F.mediaBox.bottomLeftX))+" "+parseFloat(pe(F.mediaBox.bottomLeftY))+" "+pe(F.mediaBox.topRightX)+" "+pe(F.mediaBox.topRightY)+"]"),F.cropBox!==null&&le("/CropBox ["+pe(F.cropBox.bottomLeftX)+" "+pe(F.cropBox.bottomLeftY)+" "+pe(F.cropBox.topRightX)+" "+pe(F.cropBox.topRightY)+"]"),F.bleedBox!==null&&le("/BleedBox ["+pe(F.bleedBox.bottomLeftX)+" "+pe(F.bleedBox.bottomLeftY)+" "+pe(F.bleedBox.topRightX)+" "+pe(F.bleedBox.topRightY)+"]"),F.trimBox!==null&&le("/TrimBox ["+pe(F.trimBox.bottomLeftX)+" "+pe(F.trimBox.bottomLeftY)+" "+pe(F.trimBox.topRightX)+" "+pe(F.trimBox.topRightY)+"]"),F.artBox!==null&&le("/ArtBox ["+pe(F.artBox.bottomLeftX)+" "+pe(F.artBox.bottomLeftY)+" "+pe(F.artBox.topRightX)+" "+pe(F.artBox.topRightY)+"]"),typeof F.userUnit=="number"&&F.userUnit!==1&&le("/UserUnit "+F.userUnit),Jr.publish("putPage",{objId:ft,pageContext:lr[xe],pageNumber:xe,page:tt}),le("/Contents "+Mt+" 0 R"),le(">>"),le("endobj");var Ht=tt.join(`
`);return z===A.ADVANCED&&(Ht+=`
Q`),Ye(Mt,!0),xt({data:Ht,filters:$n(),objectId:Mt}),le("endobj"),ft},Yn=g.__private__.putPages=function(){var F,xe,tt=[];for(F=1;F<=xr;F++)lr[F].objId=Ze(),lr[F].contentsObjId=Ze();for(F=1;F<=xr;F++)tt.push(Kt({number:F,data:De[F],objId:lr[F].objId,contentsObjId:lr[F].contentsObjId,mediaBox:lr[F].mediaBox,cropBox:lr[F].cropBox,bleedBox:lr[F].bleedBox,trimBox:lr[F].trimBox,artBox:lr[F].artBox,userUnit:lr[F].userUnit,rootDictionaryObjId:En,resourceDictionaryObjId:On}));Ye(En,!0),le("<</Type /Pages");var ft="/Kids [";for(xe=0;xe<xr;xe++)ft+=tt[xe]+" 0 R ";le(ft+"]"),le("/Count "+xr),le(">>"),le("endobj"),Jr.publish("postPutPages")},gr=function(F){Jr.publish("putFont",{font:F,out:le,newObject:qn,putStream:xt}),F.isAlreadyPutted!==!0&&(F.objectNumber=qn(),le("<<"),le("/Type /Font"),le("/BaseFont /"+ap(F.postScriptName)),le("/Subtype /Type1"),typeof F.encoding=="string"&&le("/Encoding /"+F.encoding),le("/FirstChar 32"),le("/LastChar 255"),le(">>"),le("endobj"))},Sr=function(){for(var F in vn)vn.hasOwnProperty(F)&&(p===!1||p===!0&&v.hasOwnProperty(F))&&gr(vn[F])},an=function(F){F.objectNumber=qn();var xe=[];xe.push({key:"Type",value:"/XObject"}),xe.push({key:"Subtype",value:"/Form"}),xe.push({key:"BBox",value:"["+[pe(F.x),pe(F.y),pe(F.x+F.width),pe(F.y+F.height)].join(" ")+"]"}),xe.push({key:"Matrix",value:"["+F.matrix.toString()+"]"});var tt=F.pages[1].join(`
`);xt({data:tt,additionalKeyValues:xe,objectId:F.objectNumber}),le("endobj")},nn=function(){for(var F in Di)Di.hasOwnProperty(F)&&an(Di[F])},$r=function(F,xe){var tt,ft=[],Mt=1/(xe-1);for(tt=0;tt<1;tt+=Mt)ft.push(tt);if(ft.push(1),F[0].offset!=0){var Ht={offset:0,color:F[0].color};F.unshift(Ht)}if(F[F.length-1].offset!=1){var hn={offset:1,color:F[F.length-1].color};F.push(hn)}for(var Fn="",Hn=0,cr=0;cr<ft.length;cr++){for(tt=ft[cr];tt>F[Hn+1].offset;)Hn++;var Er=F[Hn].offset,Yr=(tt-Er)/(F[Hn+1].offset-Er),Yi=F[Hn].color,_i=F[Hn+1].color;Fn+=oe(Math.round((1-Yr)*Yi[0]+Yr*_i[0]).toString(16))+oe(Math.round((1-Yr)*Yi[1]+Yr*_i[1]).toString(16))+oe(Math.round((1-Yr)*Yi[2]+Yr*_i[2]).toString(16))}return Fn.trim()},Qr=function(F,xe){xe||(xe=21);var tt=qn(),ft=$r(F.colors,xe),Mt=[];Mt.push({key:"FunctionType",value:"0"}),Mt.push({key:"Domain",value:"[0.0 1.0]"}),Mt.push({key:"Size",value:"["+xe+"]"}),Mt.push({key:"BitsPerSample",value:"8"}),Mt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Mt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xt({data:ft,additionalKeyValues:Mt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:tt}),le("endobj"),F.objectNumber=qn(),le("<< /ShadingType "+F.type),le("/ColorSpace /DeviceRGB");var Ht="/Coords ["+pe(parseFloat(F.coords[0]))+" "+pe(parseFloat(F.coords[1]))+" ";F.type===2?Ht+=pe(parseFloat(F.coords[2]))+" "+pe(parseFloat(F.coords[3])):Ht+=pe(parseFloat(F.coords[2]))+" "+pe(parseFloat(F.coords[3]))+" "+pe(parseFloat(F.coords[4]))+" "+pe(parseFloat(F.coords[5])),le(Ht+="]"),F.matrix&&le("/Matrix ["+F.matrix.toString()+"]"),le("/Function "+tt+" 0 R"),le("/Extend [true true]"),le(">>"),le("endobj")},os=function(F,xe){var tt=Ze(),ft=qn();xe.push({resourcesOid:tt,objectOid:ft}),F.objectNumber=ft;var Mt=[];Mt.push({key:"Type",value:"/Pattern"}),Mt.push({key:"PatternType",value:"1"}),Mt.push({key:"PaintType",value:"1"}),Mt.push({key:"TilingType",value:"1"}),Mt.push({key:"BBox",value:"["+F.boundingBox.map(pe).join(" ")+"]"}),Mt.push({key:"XStep",value:pe(F.xStep)}),Mt.push({key:"YStep",value:pe(F.yStep)}),Mt.push({key:"Resources",value:tt+" 0 R"}),F.matrix&&Mt.push({key:"Matrix",value:"["+F.matrix.toString()+"]"}),xt({data:F.stream,additionalKeyValues:Mt,objectId:F.objectNumber}),le("endobj")},si=function(F){var xe;for(xe in en)en.hasOwnProperty(xe)&&(en[xe]instanceof rf?Qr(en[xe]):en[xe]instanceof cp&&os(en[xe],F))},mr=function(F){for(var xe in F.objectNumber=qn(),le("<<"),F)switch(xe){case"opacity":le("/ca "+J(F[xe]));break;case"stroke-opacity":le("/CA "+J(F[xe]))}le(">>"),le("endobj")},Fr=function(){var F;for(F in Cn)Cn.hasOwnProperty(F)&&mr(Cn[F])},ei=function(){for(var F in le("/XObject <<"),Di)Di.hasOwnProperty(F)&&Di[F].objectNumber>=0&&le("/"+F+" "+Di[F].objectNumber+" 0 R");Jr.publish("putXobjectDict"),le(">>")},Pr=function(){Hi.oid=qn(),le("<<"),le("/Filter /Standard"),le("/V "+Hi.v),le("/R "+Hi.r),le("/U <"+Hi.toHexString(Hi.U)+">"),le("/O <"+Hi.toHexString(Hi.O)+">"),le("/P "+Hi.P),le(">>"),le("endobj")},cn=function(){for(var F in le("/Font <<"),vn)vn.hasOwnProperty(F)&&(p===!1||p===!0&&v.hasOwnProperty(F))&&le("/"+F+" "+vn[F].objectNumber+" 0 R");le(">>")},Xi=function(){if(Object.keys(en).length>0){for(var F in le("/Shading <<"),en)en.hasOwnProperty(F)&&en[F]instanceof rf&&en[F].objectNumber>=0&&le("/"+F+" "+en[F].objectNumber+" 0 R");Jr.publish("putShadingPatternDict"),le(">>")}},Vr=function(F){if(Object.keys(en).length>0){for(var xe in le("/Pattern <<"),en)en.hasOwnProperty(xe)&&en[xe]instanceof g.TilingPattern&&en[xe].objectNumber>=0&&en[xe].objectNumber<F&&le("/"+xe+" "+en[xe].objectNumber+" 0 R");Jr.publish("putTilingPatternDict"),le(">>")}},ur=function(){if(Object.keys(Cn).length>0){var F;for(F in le("/ExtGState <<"),Cn)Cn.hasOwnProperty(F)&&Cn[F].objectNumber>=0&&le("/"+F+" "+Cn[F].objectNumber+" 0 R");Jr.publish("putGStateDict"),le(">>")}},Un=function(F){Ye(F.resourcesOid,!0),le("<<"),le("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),cn(),Xi(),Vr(F.objectOid),ur(),ei(),le(">>"),le("endobj")},Ni=function(){var F=[];Sr(),Fr(),nn(),si(F),Jr.publish("putResources"),F.forEach(Un),Un({resourcesOid:On,objectOid:Number.MAX_SAFE_INTEGER}),Jr.publish("postPutResources")},kr=function(){Jr.publish("putAdditionalObjects");for(var F=0;F<Ae.length;F++){var xe=Ae[F];Ye(xe.objId,!0),le(xe.content),le("endobj")}Jr.publish("postPutAdditionalObjects")},br=function(F){Tn[F.fontName]=Tn[F.fontName]||{},Tn[F.fontName][F.fontStyle]=F.id},no=function(F,xe,tt,ft,Mt){var Ht={id:"F"+(Object.keys(vn).length+1).toString(10),postScriptName:F,fontName:xe,fontStyle:tt,encoding:ft,isStandardFont:Mt||!1,metadata:{}};return Jr.publish("addFont",{font:Ht,instance:this}),vn[Ht.id]=Ht,br(Ht),Ht.id},Cr=function(F){for(var xe=0,tt=et.length;xe<tt;xe++){var ft=no.call(this,F[xe][0],F[xe][1],F[xe][2],et[xe][3],!0);p===!1&&(v[ft]=!0);var Mt=F[xe][0].split("-");br({id:ft,fontName:Mt[0],fontStyle:Mt[1]||""})}Jr.publish("addFonts",{fonts:vn,dictionary:Tn})},Pn=function(F){return F.foo=function(){try{return F.apply(this,arguments)}catch(ft){var xe=ft.stack||"";~xe.indexOf(" at ")&&(xe=xe.split(" at ")[1]);var tt="Error in function "+xe.split(`
`)[0].split("<")[0]+": "+ft.message;if(!Rr.console)throw new Error(tt);Rr.console.error(tt,ft),Rr.alert&&alert(tt)}},F.foo.bar=F,F.foo},_r=function(F,xe){var tt,ft,Mt,Ht,hn,Fn,Hn,cr,Er;if(Mt=(xe=xe||{}).sourceEncoding||"Unicode",hn=xe.outputEncoding,(xe.autoencode||hn)&&vn[lt].metadata&&vn[lt].metadata[Mt]&&vn[lt].metadata[Mt].encoding&&(Ht=vn[lt].metadata[Mt].encoding,!hn&&vn[lt].encoding&&(hn=vn[lt].encoding),!hn&&Ht.codePages&&(hn=Ht.codePages[0]),typeof hn=="string"&&(hn=Ht[hn]),hn)){for(Hn=!1,Fn=[],tt=0,ft=F.length;tt<ft;tt++)(cr=hn[F.charCodeAt(tt)])?Fn.push(String.fromCharCode(cr)):Fn.push(F[tt]),Fn[tt].charCodeAt(0)>>8&&(Hn=!0);F=Fn.join("")}for(tt=F.length;Hn===void 0&&tt!==0;)F.charCodeAt(tt-1)>>8&&(Hn=!0),tt--;if(!Hn)return F;for(Fn=xe.noBOM?[]:[254,255],tt=0,ft=F.length;tt<ft;tt++){if((Er=(cr=F.charCodeAt(tt))>>8)>>8)throw new Error("Character at position "+tt+" of string '"+F+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Fn.push(Er),Fn.push(cr-(Er<<8))}return String.fromCharCode.apply(void 0,Fn)},bn=g.__private__.pdfEscape=g.pdfEscape=function(F,xe){return _r(F,xe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ur=g.__private__.beginPage=function(F){De[++xr]=[],lr[xr]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(F[0]),topRightY:Number(F[1])}},ms(xr),se(De[K])},Ji=function(F,xe){var tt,ft,Mt;switch(n=xe||n,typeof F=="string"&&(tt=M(F.toLowerCase()),Array.isArray(tt)&&(ft=tt[0],Mt=tt[1])),Array.isArray(F)&&(ft=F[0]*it,Mt=F[1]*it),isNaN(ft)&&(ft=i[0],Mt=i[1]),(ft>14400||Mt>14400)&&(Cs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ft=Math.min(14400,ft),Mt=Math.min(14400,Mt)),i=[ft,Mt],n.substr(0,1)){case"l":Mt>ft&&(i=[Mt,ft]);break;case"p":ft>Mt&&(i=[Mt,ft])}Ur(i),cu(Ws),le(Qi),fu!==0&&le(fu+" J"),Ci!==0&&le(Ci+" j"),Jr.publish("addPage",{pageNumber:xr})},cs=function(F){F>0&&F<=xr&&(De.splice(F,1),lr.splice(F,1),xr--,K>xr&&(K=xr),this.setPage(K))},ms=function(F){F>0&&F<=xr&&(K=F)},Si=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return De.length-1},Ps=function(F,xe,tt){var ft,Mt=void 0;return tt=tt||{},F=F!==void 0?F:vn[lt].fontName,xe=xe!==void 0?xe:vn[lt].fontStyle,ft=F.toLowerCase(),Tn[ft]!==void 0&&Tn[ft][xe]!==void 0?Mt=Tn[ft][xe]:Tn[F]!==void 0&&Tn[F][xe]!==void 0?Mt=Tn[F][xe]:tt.disableWarning===!1&&Cs.warn("Unable to look up font label for font '"+F+"', '"+xe+"'. Refer to getFontList() for available fonts."),Mt||tt.noFallback||(Mt=Tn.times[xe])==null&&(Mt=Tn.times.normal),Mt},Wr=g.__private__.putInfo=function(){var F=qn(),xe=function(ft){return ft};for(var tt in h!==null&&(xe=Hi.encryptor(F,0)),le("<<"),le("/Producer ("+bn(xe("jsPDF "+Or.version))+")"),Qe)Qe.hasOwnProperty(tt)&&Qe[tt]&&le("/"+tt.substr(0,1).toUpperCase()+tt.substr(1)+" ("+bn(xe(Qe[tt]))+")");le("/CreationDate ("+bn(xe(B))+")"),le(">>"),le("endobj")},js=g.__private__.putCatalog=function(F){var xe=(F=F||{}).rootDictionaryObjId||En;switch(qn(),le("<<"),le("/Type /Catalog"),le("/Pages "+xe+" 0 R"),me||(me="fullwidth"),me){case"fullwidth":le("/OpenAction [3 0 R /FitH null]");break;case"fullheight":le("/OpenAction [3 0 R /FitV null]");break;case"fullpage":le("/OpenAction [3 0 R /Fit]");break;case"original":le("/OpenAction [3 0 R /XYZ null null 1]");break;default:var tt=""+me;tt.substr(tt.length-1)==="%"&&(me=parseInt(me)/100),typeof me=="number"&&le("/OpenAction [3 0 R /XYZ null null "+J(me)+"]")}switch(st||(st="continuous"),st){case"continuous":le("/PageLayout /OneColumn");break;case"single":le("/PageLayout /SinglePage");break;case"two":case"twoleft":le("/PageLayout /TwoColumnLeft");break;case"tworight":le("/PageLayout /TwoColumnRight")}pt&&le("/PageMode /"+pt),Jr.publish("putCatalog"),le(">>"),le("endobj")},as=g.__private__.putTrailer=function(){le("trailer"),le("<<"),le("/Size "+(de+1)),le("/Root "+de+" 0 R"),le("/Info "+(de-1)+" 0 R"),h!==null&&le("/Encrypt "+Hi.oid+" 0 R"),le("/ID [ <"+I+"> <"+I+"> ]"),le(">>")},ys=g.__private__.putHeader=function(){le("%PDF-"+x),le("%ºß¬à")},bi=g.__private__.putXRef=function(){var F="0000000000";le("xref"),le("0 "+(de+1)),le("0000000000 65535 f ");for(var xe=1;xe<=de;xe++)typeof ye[xe]=="function"?le((F+ye[xe]()).slice(-10)+" 00000 n "):ye[xe]!==void 0?le((F+ye[xe]).slice(-10)+" 00000 n "):le("0000000000 00000 n ")},Sn=g.__private__.buildDocument=function(){ee(),se(he),Jr.publish("buildDocument"),ys(),Yn(),kr(),Ni(),h!==null&&Pr(),Wr(),js();var F=X;return bi(),as(),le("startxref"),le(""+F),le("%%EOF"),se(De[K]),he.join(`
`)},pn=g.__private__.getBlob=function(F){return new Blob([$e(F)],{type:"application/pdf"})},pi=g.output=g.__private__.output=Pn(function(F,xe){switch(typeof(xe=xe||{})=="string"?xe={filename:xe}:xe.filename=xe.filename||"generated.pdf",F){case void 0:return Sn();case"save":g.save(xe.filename);break;case"arraybuffer":return $e(Sn());case"blob":return pn(Sn());case"bloburi":case"bloburl":if(Rr.URL!==void 0&&typeof Rr.URL.createObjectURL=="function")return Rr.URL&&Rr.URL.createObjectURL(pn(Sn()))||void 0;Cs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var tt="",ft=Sn();try{tt=Pb(ft)}catch{tt=Pb(unescape(encodeURIComponent(ft)))}return"data:application/pdf;filename="+xe.filename+";base64,"+tt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Rr)==="[object Window]"){var Mt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ht=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';xe.pdfObjectUrl&&(Mt=xe.pdfObjectUrl,Ht="");var hn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Mt+'"'+Ht+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(xe)+");<\/script></body></html>",Fn=Rr.open();return Fn!==null&&Fn.document.write(hn),Fn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Rr)==="[object Window]"){var Hn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(xe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+xe.filename+'" width="500px" height="400px" /></body></html>',cr=Rr.open();if(cr!==null){cr.document.write(Hn);var Er=this;cr.document.documentElement.querySelector("#pdfViewer").onload=function(){cr.document.title=xe.filename,cr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Er.output("bloburl"))}}return cr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Rr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Yr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",xe)+'"></iframe></body></html>',Yi=Rr.open();if(Yi!==null&&(Yi.document.write(Yr),Yi.document.title=xe.filename),Yi||typeof safari>"u")return Yi;break;case"datauri":case"dataurl":return Rr.document.location.href=this.output("datauristring",xe);default:return null}}),ro=function(F){return Array.isArray(Bs)===!0&&Bs.indexOf(F)>-1};switch(r){case"pt":it=1;break;case"mm":it=72/25.4;break;case"cm":it=72/2.54;break;case"in":it=72;break;case"px":it=ro("px_scaling")==1?.75:96/72;break;case"pc":case"em":it=12;break;case"ex":it=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);it=r}var Hi=null;qe(),G();var lu=function(F){return h!==null?Hi.encryptor(F,0):function(xe){return xe}},wl=g.__private__.getPageInfo=g.getPageInfo=function(F){if(isNaN(F)||F%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:lr[F].objId,pageNumber:F,pageContext:lr[F]}},vr=g.__private__.getPageInfoByObjId=function(F){if(isNaN(F)||F%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var xe in lr)if(lr[xe].objId===F)break;return wl(xe)},Mr=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:lr[K].objId,pageNumber:K,pageContext:lr[K]}};g.addPage=function(){return Ji.apply(this,arguments),this},g.setPage=function(){return ms.apply(this,arguments),se.call(this,De[K]),this},g.insertPage=function(F){return this.addPage(),this.movePage(K,F),this},g.movePage=function(F,xe){var tt,ft;if(F>xe){tt=De[F],ft=lr[F];for(var Mt=F;Mt>xe;Mt--)De[Mt]=De[Mt-1],lr[Mt]=lr[Mt-1];De[xe]=tt,lr[xe]=ft,this.setPage(xe)}else if(F<xe){tt=De[F],ft=lr[F];for(var Ht=F;Ht<xe;Ht++)De[Ht]=De[Ht+1],lr[Ht]=lr[Ht+1];De[xe]=tt,lr[xe]=ft,this.setPage(xe)}return this},g.deletePage=function(){return cs.apply(this,arguments),this},g.__private__.text=g.text=function(F,xe,tt,ft,Mt){var Ht,hn,Fn,Hn,cr,Er,Yr,Yi,_i,Pi=(ft=ft||{}).scope||this;if(typeof F=="number"&&typeof xe=="number"&&(typeof tt=="string"||Array.isArray(tt))){var xs=tt;tt=xe,xe=F,F=xs}if(arguments[3]instanceof tr?(O("The transform parameter of text() with a Matrix value"),_i=Mt):(Fn=arguments[4],Hn=arguments[5],ps(Yr=arguments[3])==="object"&&Yr!==null||(typeof Fn=="string"&&(Hn=Fn,Fn=null),typeof Yr=="string"&&(Hn=Yr,Yr=null),typeof Yr=="number"&&(Fn=Yr,Yr=null),ft={flags:Yr,angle:Fn,align:Hn})),isNaN(xe)||isNaN(tt)||F==null)throw new Error("Invalid arguments passed to jsPDF.text");if(F.length===0)return Pi;var Ms="",ia=!1,Kr=typeof ft.lineHeightFactor=="number"?ft.lineHeightFactor:$o,ao=Pi.internal.scaleFactor;function jl(ki){return ki=ki.split("	").join(Array(ft.TabLen||9).join(" ")),bn(ki,Yr)}function So(ki){for(var Fi,Ls=ki.concat(),Wi=[],aa=Ls.length;aa--;)typeof(Fi=Ls.shift())=="string"?Wi.push(Fi):Array.isArray(ki)&&(Fi.length===1||Fi[1]===void 0&&Fi[2]===void 0)?Wi.push(Fi[0]):Wi.push([Fi[0],Fi[1],Fi[2]]);return Wi}function Du(ki,Fi){var Ls;if(typeof ki=="string")Ls=Fi(ki)[0];else if(Array.isArray(ki)){for(var Wi,aa,Uo=ki.concat(),ha=[],ec=Uo.length;ec--;)typeof(Wi=Uo.shift())=="string"?ha.push(Fi(Wi)[0]):Array.isArray(Wi)&&typeof Wi[0]=="string"&&(aa=Fi(Wi[0],Wi[1],Wi[2]),ha.push([aa[0],aa[1],aa[2]]));Ls=ha}return Ls}var Ia=!1,Qu=!0;if(typeof F=="string")Ia=!0;else if(Array.isArray(F)){var xl=F.concat();hn=[];for(var Ll,ks=xl.length;ks--;)(typeof(Ll=xl.shift())!="string"||Array.isArray(Ll)&&typeof Ll[0]!="string")&&(Qu=!1);Ia=Qu}if(Ia===!1)throw new Error('Type of text must be string or Array. "'+F+'" is not recognized.');typeof F=="string"&&(F=F.match(/[\r?\n]/)?F.split(/\r\n|\r|\n/g):[F]);var Ba=Ee/Pi.internal.scaleFactor,sa=Ba*(Kr-1);switch(ft.baseline){case"bottom":tt-=sa;break;case"top":tt+=Ba-sa;break;case"hanging":tt+=Ba-2*sa;break;case"middle":tt+=Ba/2-sa}if((Er=ft.maxWidth||0)>0&&(typeof F=="string"?F=Pi.splitTextToSize(F,Er):Object.prototype.toString.call(F)==="[object Array]"&&(F=F.reduce(function(ki,Fi){return ki.concat(Pi.splitTextToSize(Fi,Er))},[]))),Ht={text:F,x:xe,y:tt,options:ft,mutex:{pdfEscape:bn,activeFontKey:lt,fonts:vn,activeFontSize:Ee}},Jr.publish("preProcessText",Ht),F=Ht.text,Fn=(ft=Ht.options).angle,!(_i instanceof tr)&&Fn&&typeof Fn=="number"){Fn*=Math.PI/180,ft.rotationDirection===0&&(Fn=-Fn),z===A.ADVANCED&&(Fn=-Fn);var Vo=Math.cos(Fn),zl=Math.sin(Fn);_i=new tr(Vo,zl,-zl,Vo,0,0)}else Fn&&Fn instanceof tr&&(_i=Fn);z!==A.ADVANCED||_i||(_i=jo),(cr=ft.charSpace||hu)!==void 0&&(Ms+=pe(R(cr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Yi=ft.horizontalScale)!==void 0&&(Ms+=pe(100*Yi)+` Tz
`),ft.lang;var lo=-1,Co=ft.renderingMode!==void 0?ft.renderingMode:ft.stroke,Eo=Pi.internal.getCurrentPageInfo().pageContext;switch(Co){case 0:case!1:case"fill":lo=0;break;case 1:case!0:case"stroke":lo=1;break;case 2:case"fillThenStroke":lo=2;break;case 3:case"invisible":lo=3;break;case 4:case"fillAndAddForClipping":lo=4;break;case 5:case"strokeAndAddPathForClipping":lo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":lo=6;break;case 7:case"addToPathForClipping":lo=7}var Ac=Eo.usedRenderingMode!==void 0?Eo.usedRenderingMode:-1;lo!==-1?Ms+=lo+` Tr
`:Ac!==-1&&(Ms+=`0 Tr
`),lo!==-1&&(Eo.usedRenderingMode=lo),Hn=ft.align||"left";var zs,Xa=Ee*Kr,uo=Pi.internal.pageSize.getWidth(),co=vn[lt];cr=ft.charSpace||hu,Er=ft.maxWidth||0,Yr=Object.assign({autoencode:!0,noBOM:!0},ft.flags);var Ja=[],Qa=function(ki){return Pi.getStringUnitWidth(ki,{font:co,charSpace:cr,fontSize:Ee,doKerning:!1})*Ee/ao};if(Object.prototype.toString.call(F)==="[object Array]"){var ho;hn=So(F),Hn!=="left"&&(zs=hn.map(Qa));var qs,Ra=0;if(Hn==="right"){xe-=zs[0],F=[],ks=hn.length;for(var oa=0;oa<ks;oa++)oa===0?(qs=hr(xe),ho=_s(tt)):(qs=R(Ra-zs[oa]),ho=-Xa),F.push([hn[oa],qs,ho]),Ra=zs[oa]}else if(Hn==="center"){xe-=zs[0]/2,F=[],ks=hn.length;for(var fo=0;fo<ks;fo++)fo===0?(qs=hr(xe),ho=_s(tt)):(qs=R((Ra-zs[fo])/2),ho=-Xa),F.push([hn[fo],qs,ho]),Ra=zs[fo]}else if(Hn==="left"){F=[],ks=hn.length;for(var St=0;St<ks;St++)F.push(hn[St])}else if(Hn==="justify"&&co.encoding==="Identity-H"){F=[],ks=hn.length,Er=Er!==0?Er:uo;for(var Yt=0,Ot=0;Ot<ks;Ot++)if(ho=Ot===0?_s(tt):-Xa,qs=Ot===0?hr(xe):Yt,Ot<ks-1){var Bn=R((Er-zs[Ot])/(hn[Ot].split(" ").length-1)),nr=hn[Ot].split(" ");F.push([nr[0]+" ",qs,ho]),Yt=0;for(var Ar=1;Ar<nr.length;Ar++){var es=(Qa(nr[Ar-1]+" "+nr[Ar])-Qa(nr[Ar]))*ao+Bn;Ar==nr.length-1?F.push([nr[Ar],es,0]):F.push([nr[Ar]+" ",es,0]),Yt-=es}}else F.push([hn[Ot],qs,ho]);F.push(["",Yt,0])}else{if(Hn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(F=[],ks=hn.length,Er=Er!==0?Er:uo,Ot=0;Ot<ks;Ot++)ho=Ot===0?_s(tt):-Xa,qs=Ot===0?hr(xe):0,Ot<ks-1?Ja.push(pe(R((Er-zs[Ot])/(hn[Ot].split(" ").length-1)))):Ja.push(0),F.push([hn[Ot],qs,ho])}}var Mi=typeof ft.R2L=="boolean"?ft.R2L:ct;Mi===!0&&(F=Du(F,function(ki,Fi,Ls){return[ki.split("").reverse().join(""),Fi,Ls]})),Ht={text:F,x:xe,y:tt,options:ft,mutex:{pdfEscape:bn,activeFontKey:lt,fonts:vn,activeFontSize:Ee}},Jr.publish("postProcessText",Ht),F=Ht.text,ia=Ht.mutex.isHex||!1;var gu=vn[lt].encoding;gu!=="WinAnsiEncoding"&&gu!=="StandardEncoding"||(F=Du(F,function(ki,Fi,Ls){return[jl(ki),Fi,Ls]})),hn=So(F),F=[];for(var Po,ts,Fa,el=0,ja=1,za=Array.isArray(hn[0])?ja:el,$a="",ai=function(ki,Fi,Ls){var Wi="";return Ls instanceof tr?(Ls=typeof ft.angle=="number"?Fs(Ls,new tr(1,0,0,1,ki,Fi)):Fs(new tr(1,0,0,1,ki,Fi),Ls),z===A.ADVANCED&&(Ls=Fs(new tr(1,0,0,-1,0,0),Ls)),Wi=Ls.join(" ")+` Tm
`):Wi=pe(ki)+" "+pe(Fi)+` Td
`,Wi},La=0;La<hn.length;La++){switch($a="",za){case ja:Fa=(ia?"<":"(")+hn[La][0]+(ia?">":")"),Po=parseFloat(hn[La][1]),ts=parseFloat(hn[La][2]);break;case el:Fa=(ia?"<":"(")+hn[La]+(ia?">":")"),Po=hr(xe),ts=_s(tt)}Ja!==void 0&&Ja[La]!==void 0&&($a=Ja[La]+` Tw
`),La===0?F.push($a+ai(Po,ts,_i)+Fa):za===el?F.push($a+Fa):za===ja&&F.push($a+ai(Po,ts,_i)+Fa)}F=za===el?F.join(` Tj
T* `):F.join(` Tj
`),F+=` Tj
`;var Ys=`BT
/`;return Ys+=lt+" "+Ee+` Tf
`,Ys+=pe(Ee*Kr)+` TL
`,Ys+=Oa+`
`,Ys+=Ms,Ys+=F,le(Ys+="ET"),v[lt]=!0,Pi};var Gr=g.__private__.clip=g.clip=function(F){return le(F==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Gr("evenodd")},g.__private__.discardPath=g.discardPath=function(){return le("n"),this};var qr=g.__private__.isValidStyle=function(F){var xe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(F)!==-1&&(xe=!0),xe};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(F){return qr(F)&&(c=F),this};var io=g.__private__.getStyle=g.getStyle=function(F){var xe=c;switch(F){case"D":case"S":xe="S";break;case"F":xe="f";break;case"FD":case"DF":xe="B";break;case"f":case"f*":case"B":case"B*":xe=F}return xe},so=g.close=function(){return le("h"),this};g.stroke=function(){return le("S"),this},g.fill=function(F){return oo("f",F),this},g.fillEvenOdd=function(F){return oo("f*",F),this},g.fillStroke=function(F){return oo("B",F),this},g.fillStrokeEvenOdd=function(F){return oo("B*",F),this};var oo=function(F,xe){ps(xe)==="object"?uu(xe,F):le(F)},zo=function(F){F===null||z===A.ADVANCED&&F===void 0||(F=io(F),le(F))};function _a(F,xe,tt,ft,Mt){var Ht=new cp(xe||this.boundingBox,tt||this.xStep,ft||this.yStep,this.gState,Mt||this.matrix);Ht.stream=this.stream;var hn=F+"$$"+this.cloneIndex+++"$$";return gs(hn,Ht),Ht}var uu=function(F,xe){var tt=xn[F.key],ft=en[tt];if(ft instanceof rf)le("q"),le(Da(xe)),ft.gState&&g.setGState(ft.gState),le(F.matrix.toString()+" cm"),le("/"+tt+" sh"),le("Q");else if(ft instanceof cp){var Mt=new tr(1,0,0,-1,0,Za());F.matrix&&(Mt=Mt.multiply(F.matrix||jo),tt=_a.call(ft,F.key,F.boundingBox,F.xStep,F.yStep,Mt).id),le("q"),le("/Pattern cs"),le("/"+tt+" scn"),ft.gState&&g.setGState(ft.gState),le(xe),le("Q")}},Da=function(F){switch(F){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Lr=g.moveTo=function(F,xe){return le(pe(R(F))+" "+pe($(xe))+" m"),this},jr=g.lineTo=function(F,xe){return le(pe(R(F))+" "+pe($(xe))+" l"),this},Na=g.curveTo=function(F,xe,tt,ft,Mt,Ht){return le([pe(R(F)),pe($(xe)),pe(R(tt)),pe($(ft)),pe(R(Mt)),pe($(Ht)),"c"].join(" ")),this};g.__private__.line=g.line=function(F,xe,tt,ft,Mt){if(isNaN(F)||isNaN(xe)||isNaN(tt)||isNaN(ft)||!qr(Mt))throw new Error("Invalid arguments passed to jsPDF.line");return z===A.COMPAT?this.lines([[tt-F,ft-xe]],F,xe,[1,1],Mt||"S"):this.lines([[tt-F,ft-xe]],F,xe,[1,1]).stroke()},g.__private__.lines=g.lines=function(F,xe,tt,ft,Mt,Ht){var hn,Fn,Hn,cr,Er,Yr,Yi,_i,Pi,xs,Ms,ia;if(typeof F=="number"&&(ia=tt,tt=xe,xe=F,F=ia),ft=ft||[1,1],Ht=Ht||!1,isNaN(xe)||isNaN(tt)||!Array.isArray(F)||!Array.isArray(ft)||!qr(Mt)||typeof Ht!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Lr(xe,tt),hn=ft[0],Fn=ft[1],cr=F.length,xs=xe,Ms=tt,Hn=0;Hn<cr;Hn++)(Er=F[Hn]).length===2?(xs=Er[0]*hn+xs,Ms=Er[1]*Fn+Ms,jr(xs,Ms)):(Yr=Er[0]*hn+xs,Yi=Er[1]*Fn+Ms,_i=Er[2]*hn+xs,Pi=Er[3]*Fn+Ms,xs=Er[4]*hn+xs,Ms=Er[5]*Fn+Ms,Na(Yr,Yi,_i,Pi,xs,Ms));return Ht&&so(),zo(Mt),this},g.path=function(F){for(var xe=0;xe<F.length;xe++){var tt=F[xe],ft=tt.c;switch(tt.op){case"m":Lr(ft[0],ft[1]);break;case"l":jr(ft[0],ft[1]);break;case"c":Na.apply(this,ft);break;case"h":so()}}return this},g.__private__.rect=g.rect=function(F,xe,tt,ft,Mt){if(isNaN(F)||isNaN(xe)||isNaN(tt)||isNaN(ft)||!qr(Mt))throw new Error("Invalid arguments passed to jsPDF.rect");return z===A.COMPAT&&(ft=-ft),le([pe(R(F)),pe($(xe)),pe(R(tt)),pe(R(ft)),"re"].join(" ")),zo(Mt),this},g.__private__.triangle=g.triangle=function(F,xe,tt,ft,Mt,Ht,hn){if(isNaN(F)||isNaN(xe)||isNaN(tt)||isNaN(ft)||isNaN(Mt)||isNaN(Ht)||!qr(hn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[tt-F,ft-xe],[Mt-tt,Ht-ft],[F-Mt,xe-Ht]],F,xe,[1,1],hn,!0),this},g.__private__.roundedRect=g.roundedRect=function(F,xe,tt,ft,Mt,Ht,hn){if(isNaN(F)||isNaN(xe)||isNaN(tt)||isNaN(ft)||isNaN(Mt)||isNaN(Ht)||!qr(hn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Fn=4/3*(Math.SQRT2-1);return Mt=Math.min(Mt,.5*tt),Ht=Math.min(Ht,.5*ft),this.lines([[tt-2*Mt,0],[Mt*Fn,0,Mt,Ht-Ht*Fn,Mt,Ht],[0,ft-2*Ht],[0,Ht*Fn,-Mt*Fn,Ht,-Mt,Ht],[2*Mt-tt,0],[-Mt*Fn,0,-Mt,-Ht*Fn,-Mt,-Ht],[0,2*Ht-ft],[0,-Ht*Fn,Mt*Fn,-Ht,Mt,-Ht]],F+Mt,xe,[1,1],hn,!0),this},g.__private__.ellipse=g.ellipse=function(F,xe,tt,ft,Mt){if(isNaN(F)||isNaN(xe)||isNaN(tt)||isNaN(ft)||!qr(Mt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ht=4/3*(Math.SQRT2-1)*tt,hn=4/3*(Math.SQRT2-1)*ft;return Lr(F+tt,xe),Na(F+tt,xe-hn,F+Ht,xe-ft,F,xe-ft),Na(F-Ht,xe-ft,F-tt,xe-hn,F-tt,xe),Na(F-tt,xe+hn,F-Ht,xe+ft,F,xe+ft),Na(F+Ht,xe+ft,F+tt,xe+hn,F+tt,xe),zo(Mt),this},g.__private__.circle=g.circle=function(F,xe,tt,ft){if(isNaN(F)||isNaN(xe)||isNaN(tt)||!qr(ft))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(F,xe,tt,tt,ft)},g.setFont=function(F,xe,tt){return tt&&(xe=ge(xe,tt)),lt=Ps(F,xe,{disableWarning:!1}),this};var Ri=g.__private__.getFont=g.getFont=function(){return vn[Ps.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var F,xe,tt={};for(F in Tn)if(Tn.hasOwnProperty(F))for(xe in tt[F]=[],Tn[F])Tn[F].hasOwnProperty(xe)&&tt[F].push(xe);return tt},g.addFont=function(F,xe,tt,ft,Mt){var Ht=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ht.indexOf(arguments[3])!==-1?Mt=arguments[3]:arguments[3]&&Ht.indexOf(arguments[3])==-1&&(tt=ge(tt,ft)),Mt=Mt||"Identity-H",no.call(this,F,xe,tt,Mt)};var $o,Ws=t.lineWidth||.200025,Il=g.__private__.getLineWidth=g.getLineWidth=function(){return Ws},cu=g.__private__.setLineWidth=g.setLineWidth=function(F){return Ws=F,le(pe(R(F))+" w"),this};g.__private__.setLineDash=Or.API.setLineDash=Or.API.setLineDashPattern=function(F,xe){if(F=F||[],xe=xe||0,isNaN(xe)||!Array.isArray(F))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return F=F.map(function(tt){return pe(R(tt))}).join(" "),xe=pe(R(xe)),le("["+F+"] "+xe+" d"),this};var Au=g.__private__.getLineHeight=g.getLineHeight=function(){return Ee*$o};g.__private__.getLineHeight=g.getLineHeight=function(){return Ee*$o};var oi=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(F){return typeof(F=F||1.15)=="number"&&($o=F),this},bs=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return $o};oi(t.lineHeight);var hr=g.__private__.getHorizontalCoordinate=function(F){return R(F)},_s=g.__private__.getVerticalCoordinate=function(F){return z===A.ADVANCED?F:lr[K].mediaBox.topRightY-lr[K].mediaBox.bottomLeftY-R(F)},Bl=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(F){return pe(hr(F))},Ka=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(F){return pe(_s(F))},Qi=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Ln(Qi)},g.__private__.setStrokeColor=g.setDrawColor=function(F,xe,tt,ft){return Qi=jt({ch1:F,ch2:xe,ch3:tt,ch4:ft,pdfColorType:"draw",precision:2}),le(Qi),this};var Tu=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Ln(Tu)},g.__private__.setFillColor=g.setFillColor=function(F,xe,tt,ft){return Tu=jt({ch1:F,ch2:xe,ch3:tt,ch4:ft,pdfColorType:"fill",precision:2}),le(Tu),this};var Oa=t.textColor||"0 g",du=g.__private__.getTextColor=g.getTextColor=function(){return Ln(Oa)};g.__private__.setTextColor=g.setTextColor=function(F,xe,tt,ft){return Oa=jt({ch1:F,ch2:xe,ch3:tt,ch4:ft,pdfColorType:"text",precision:3}),this};var hu=t.charSpace,da=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(hu||0)};g.__private__.setCharSpace=g.setCharSpace=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return hu=F,this};var fu=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(F){var xe=g.CapJoinStyles[F];if(xe===void 0)throw new Error("Line cap style of '"+F+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fu=xe,le(xe+" J"),this};var Ci=0;g.__private__.setLineJoin=g.setLineJoin=function(F){var xe=g.CapJoinStyles[F];if(xe===void 0)throw new Error("Line join style of '"+F+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ci=xe,le(xe+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(F){if(F=F||0,isNaN(F))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return le(pe(R(F))+" M"),this},g.GState=Yv,g.setGState=function(F){(F=typeof F=="string"?Cn[er[F]]:kc(null,F)).equals(pr)||(le("/"+F.id+" gs"),pr=F)};var kc=function(F,xe){if(!F||!er[F]){var tt=!1;for(var ft in Cn)if(Cn.hasOwnProperty(ft)&&Cn[ft].equals(xe)){tt=!0;break}if(tt)xe=Cn[ft];else{var Mt="GS"+(Object.keys(Cn).length+1).toString(10);Cn[Mt]=xe,xe.id=Mt}return F&&(er[F]=xe.id),Jr.publish("addGState",xe),xe}};g.addGState=function(F,xe){return kc(F,xe),this},g.saveGraphicsState=function(){return le("q"),Jn.push({key:lt,size:Ee,color:Oa}),this},g.restoreGraphicsState=function(){le("Q");var F=Jn.pop();return lt=F.key,Ee=F.size,Oa=F.color,pr=null,this},g.setCurrentTransformationMatrix=function(F){return le(F.toString()+" cm"),this},g.comment=function(F){return le("#"+F),this};var Gs=function(F,xe){var tt=F||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return tt},set:function(Ht){isNaN(Ht)||(tt=parseFloat(Ht))}});var ft=xe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ft},set:function(Ht){isNaN(Ht)||(ft=parseFloat(Ht))}});var Mt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Mt},set:function(Ht){Mt=Ht.toString()}}),this},wa=function(F,xe,tt,ft){Gs.call(this,F,xe),this.type="rect";var Mt=tt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Mt},set:function(hn){isNaN(hn)||(Mt=parseFloat(hn))}});var Ht=ft||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ht},set:function(hn){isNaN(hn)||(Ht=parseFloat(hn))}}),this},pu=function(){this.page=xr,this.currentPage=K,this.pages=De.slice(0),this.pagesContext=lr.slice(0),this.x=$t,this.y=Jt,this.matrix=Dn,this.width=Ei(K),this.height=Za(K),this.outputDestination=fe,this.id="",this.objectNumber=-1};pu.prototype.restore=function(){xr=this.page,K=this.currentPage,lr=this.pagesContext,De=this.pages,$t=this.x,Jt=this.y,Dn=this.matrix,ra(K,this.width),ws(K,this.height),fe=this.outputDestination};var xa=function(F,xe,tt,ft,Mt){Rs.push(new pu),xr=K=0,De=[],$t=F,Jt=xe,Dn=Mt,Ur([tt,ft])},Rl=function(F){if(Fo[F])Rs.pop().restore();else{var xe=new pu,tt="Xo"+(Object.keys(Di).length+1).toString(10);xe.id=tt,Fo[F]=tt,Di[tt]=xe,Jr.publish("addFormObject",xe),Rs.pop().restore()}};for(var Fl in g.beginFormObject=function(F,xe,tt,ft,Mt){return xa(F,xe,tt,ft,Mt),this},g.endFormObject=function(F){return Rl(F),this},g.doFormObject=function(F,xe){var tt=Di[Fo[F]];return le("q"),le(xe.toString()+" cm"),le("/"+tt.id+" Do"),le("Q"),this},g.getFormObject=function(F){var xe=Di[Fo[F]];return{x:xe.x,y:xe.y,width:xe.width,height:xe.height,matrix:xe.matrix}},g.save=function(F,xe){return F=F||"generated.pdf",(xe=xe||{}).returnPromise=xe.returnPromise||!1,xe.returnPromise===!1?(Jh(pn(Sn()),F),typeof Jh.unload=="function"&&Rr.setTimeout&&setTimeout(Jh.unload,911),this):new Promise(function(tt,ft){try{var Mt=Jh(pn(Sn()),F);typeof Jh.unload=="function"&&Rr.setTimeout&&setTimeout(Jh.unload,911),tt(Mt)}catch(Ht){ft(Ht.message)}})},Or.API)Or.API.hasOwnProperty(Fl)&&(Fl==="events"&&Or.API.events.length?function(F,xe){var tt,ft,Mt;for(Mt=xe.length-1;Mt!==-1;Mt--)tt=xe[Mt][0],ft=xe[Mt][1],F.subscribe.apply(F,[tt].concat(typeof ft=="function"?[ft]:ft))}(Jr,Or.API.events):g[Fl]=Or.API[Fl]);var Ei=g.getPageWidth=function(F){return(lr[F=F||K].mediaBox.topRightX-lr[F].mediaBox.bottomLeftX)/it},ra=g.setPageWidth=function(F,xe){lr[F].mediaBox.topRightX=xe*it+lr[F].mediaBox.bottomLeftX},Za=g.getPageHeight=function(F){return(lr[F=F||K].mediaBox.topRightY-lr[F].mediaBox.bottomLeftY)/it},ws=g.setPageHeight=function(F,xe){lr[F].mediaBox.topRightY=xe*it+lr[F].mediaBox.bottomLeftY};return g.internal={pdfEscape:bn,getStyle:io,getFont:Ri,getFontSize:We,getCharSpace:da,getTextColor:du,getLineHeight:Au,getLineHeightFactor:bs,getLineWidth:Il,write:je,getHorizontalCoordinate:hr,getVerticalCoordinate:_s,getCoordinateString:Bl,getVerticalCoordinateString:Ka,collections:{},newObject:qn,newAdditionalObject:Ut,newObjectDeferred:Ze,newObjectDeferredBegin:Ye,getFilters:$n,putStream:xt,events:Jr,scaleFactor:it,pageSize:{getWidth:function(){return Ei(K)},setWidth:function(F){ra(K,F)},getHeight:function(){return Za(K)},setHeight:function(F){ws(K,F)}},encryptionOptions:h,encryption:Hi,getEncryptor:lu,output:pi,getNumberOfPages:Si,pages:De,out:le,f2:J,f3:U,getPageInfo:wl,getPageInfoByObjId:vr,getCurrentPageInfo:Mr,getPDFVersion:E,Point:Gs,Rectangle:wa,Matrix:tr,hasHotfix:ro},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Ei(K)},set:function(F){ra(K,F)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Za(K)},set:function(F){ws(K,F)},enumerable:!0,configurable:!0}),Cr.call(g,et),lt="F1",Ji(i,n),Jr.publish("initialized"),g}op.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},op.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},op.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},op.prototype.processOwnerPassword=function(t,e){return kb(Mb(e).substr(0,5),t)},op.prototype.encryptor=function(t,e){var n=Mb(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return kb(n,r)}},Yv.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||ps(t)!==ps(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},Or.API={events:[]},Or.version="2.5.2";var Do=Or.API,$_=1,Sf=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},qf=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ni=function(t){return t.toFixed(2)},Jd=function(t){return t.toFixed(5)};Do.__acroform__={};var au=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},S5=function(t){return t*$_},jc=function(t){var e=new JE,n=rr.internal.getHeight(t)||0,r=rr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(ni(r)),Number(ni(n))],e},CH=Do.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},EH=Do.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},PH=Do.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Zo=Do.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return PH(t,e-1)},Xo=Do.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return CH(t,e-1)},Jo=Do.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return EH(t,e-1)},MH=Do.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(ni(l.lowerLeft_X)),Number(ni(l.lowerLeft_Y)),Number(ni(l.upperRight_X)),Number(ni(l.upperRight_Y))]},kH=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=Ab(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+ni(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=jc(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},Ab=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(U){return U.split(`
`)}):i.map(function(U){return[U]});var s=n,o=rr.internal.getHeight(t)||0;o=o<0?-o:o;var a=rr.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(U,R,V){if(U+1<i.length){var $=R+" "+i[U+1][0];return L0($,t,V).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,h,p=L0("3",t,s).height,v=t.multiline?o-s:(o-p)/2,g=v+=2,x=0,E=0,D=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+L0(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var M="",A=0,z=0;z<i.length;z++)if(i.hasOwnProperty(z)){var Y=!1;if(i[z].length!==1&&D!==i[z].length-1){if((p+2)*(A+2)+2>o)continue e;M+=i[z][D],Y=!0,E=z,z--}else{M=(M+=i[z][D]+" ").substr(M.length-1)==" "?M.substr(0,M.length-1):M;var ne=parseInt(z),ge=l(ne,M,s),pe=z>=i.length-1;if(ge&&!pe){M+=" ",D=0;continue}if(ge||pe){if(pe)E=ne;else if(t.multiline&&(p+2)*(A+2)+2>o)continue e}else{if(!t.multiline||(p+2)*(A+2)+2>o)continue e;E=ne}}for(var O="",j=x;j<=E;j++){var J=i[j];if(t.multiline){if(j===E){O+=J[D]+" ",D=(D+1)%J.length;continue}if(j===x){O+=J[J.length-1]+" ";continue}}O+=J[0]+" "}switch(O=O.substr(O.length-1)==" "?O.substr(0,O.length-1):O,h=L0(O,t,s).width,t.textAlign){case"right":c=a-h-2;break;case"center":c=(a-h)/2;break;case"left":default:c=2}e+=ni(c)+" "+ni(g)+` Td
`,e+="("+Sf(O)+`) Tj
`,e+=-ni(c)+` 0 Td
`,g=-(s+2),h=0,x=Y?E:E+1,A++,M=""}break}return r.text=e,r.fontSize=s,r},L0=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},AH={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},TH=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},DH=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),ps(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},NH=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Pc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(AH)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");$_=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new QE,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&TH(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=MH(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=rr.createDefaultAppearanceStream(a),ps(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var h=kH(a);l.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(a.appearanceStreamContent){var p="";for(var v in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(v)){var g=a.appearanceStreamContent[v];if(p+="/"+v+" ",p+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var o in g)if(g.hasOwnProperty(o)){var x=g[o];typeof x=="function"&&(x=x.call(i,a)),p+="/"+o+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=g)=="function"&&(x=x.call(i,a)),p+="/"+o+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&DH(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},XE=Do.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),ps(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Sf(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},o2=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Sf(r(t))+")"},Kc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Kc.prototype.toString=function(){return this.objId+" 0 R"},Kc.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Kc.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:XE(i,this.objId,this.scope)}):i instanceof Kc?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var JE=function(){Kc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};au(JE,Kc);var QE=function(){Kc.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Sf(n(t))+")"}},set:function(n){t=n}})};au(QE,Kc);var Pc=function t(){Kc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(M){if(isNaN(M))throw new Error('Invalid value "'+M+'" for attribute F supplied.');e=M}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Zo(e,3)},set:function(M){M?this.F=Xo(e,3):this.F=Jo(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(M){if(isNaN(M))throw new Error('Invalid value "'+M+'" for attribute Ff supplied.');n=M}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(M){r=M!==void 0?M:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(M){r[0]=M}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(M){r[1]=M}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(M){r[2]=M}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(M){r[3]=M}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(M){switch(M){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=M;break;default:throw new Error('Invalid value "'+M+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Kv)return;s="FieldObject"+t.FieldNum++}var M=function(A){return A};return this.scope&&(M=this.scope.internal.getEncryptor(this.objId)),"("+Sf(M(s))+")"},set:function(M){s=M.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(M){s=M}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(M){o=M}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(M){a=M}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(M){l=M}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/$_:c},set:function(M){c=M}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(M){h=M}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Kv||this instanceof hf))return o2(p,this.objId,this.scope)},set:function(M){M=M.toString(),p=M}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Ma?v:o2(v,this.objId,this.scope)},set:function(M){M=M.toString(),v=this instanceof Ma?M:M.substr(0,1)==="("?qf(M.substr(1,M.length-2)):qf(M)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ma?qf(v.substr(1,v.length-1)):v},set:function(M){M=M.toString(),v=this instanceof Ma?"/"+M:M}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(M){this.V=M}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Ma?g:o2(g,this.objId,this.scope)},set:function(M){M=M.toString(),g=this instanceof Ma?M:M.substr(0,1)==="("?qf(M.substr(1,M.length-2)):qf(M)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ma?qf(g.substr(1,g.length-1)):g},set:function(M){M=M.toString(),g=this instanceof Ma?"/"+M:M}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(M){M=!!M,E=M}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(M){x=M}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Zo(this.Ff,1)},set:function(M){M?this.Ff=Xo(this.Ff,1):this.Ff=Jo(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Zo(this.Ff,2)},set:function(M){M?this.Ff=Xo(this.Ff,2):this.Ff=Jo(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Zo(this.Ff,3)},set:function(M){M?this.Ff=Xo(this.Ff,3):this.Ff=Jo(this.Ff,3)}});var D=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(D!==null)return D},set:function(M){if([0,1,2].indexOf(M)===-1)throw new Error('Invalid value "'+M+'" for attribute Q supplied.');D=M}}),Object.defineProperty(this,"textAlign",{get:function(){var M;switch(D){case 0:default:M="left";break;case 1:M="center";break;case 2:M="right"}return M},configurable:!0,enumerable:!0,set:function(M){switch(M){case"right":case 2:D=2;break;case"center":case 1:D=1;break;case"left":case 0:default:D=0}}})};au(Pc,Kc);var yp=function(){Pc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return XE(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Zo(this.Ff,18)},set:function(n){n?this.Ff=Xo(this.Ff,18):this.Ff=Jo(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Zo(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Xo(this.Ff,19):this.Ff=Jo(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Zo(this.Ff,20)},set:function(n){n?(this.Ff=Xo(this.Ff,20),e.sort()):this.Ff=Jo(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Zo(this.Ff,22)},set:function(n){n?this.Ff=Xo(this.Ff,22):this.Ff=Jo(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Zo(this.Ff,23)},set:function(n){n?this.Ff=Xo(this.Ff,23):this.Ff=Jo(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Zo(this.Ff,27)},set:function(n){n?this.Ff=Xo(this.Ff,27):this.Ff=Jo(this.Ff,27)}}),this.hasAppearanceStream=!1};au(yp,Pc);var bp=function(){yp.call(this),this.fontName="helvetica",this.combo=!1};au(bp,yp);var _p=function(){bp.call(this),this.combo=!0};au(_p,bp);var sv=function(){_p.call(this),this.edit=!0};au(sv,_p);var Ma=function(){Pc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Zo(this.Ff,15)},set:function(n){n?this.Ff=Xo(this.Ff,15):this.Ff=Jo(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Zo(this.Ff,16)},set:function(n){n?this.Ff=Xo(this.Ff,16):this.Ff=Jo(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Zo(this.Ff,17)},set:function(n){n?this.Ff=Xo(this.Ff,17):this.Ff=Jo(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Zo(this.Ff,26)},set:function(n){n?this.Ff=Xo(this.Ff,26):this.Ff=Jo(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Sf(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){ps(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};au(Ma,Pc);var ov=function(){Ma.call(this),this.pushButton=!0};au(ov,Ma);var wp=function(){Ma.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};au(wp,Ma);var Kv=function(){var t,e;Pc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Sf(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){ps(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=rr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};au(Kv,Pc),wp.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},wp.prototype.createOption=function(t){var e=new Kv;return e.Parent=this,e.optionName=t,this.Kids.push(e),OH.call(this.scope,e),e};var av=function(){Ma.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=rr.CheckBox.createAppearanceStream()};au(av,Ma);var hf=function(){Pc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Zo(this.Ff,13)},set:function(e){e?this.Ff=Xo(this.Ff,13):this.Ff=Jo(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Zo(this.Ff,21)},set:function(e){e?this.Ff=Xo(this.Ff,21):this.Ff=Jo(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Zo(this.Ff,23)},set:function(e){e?this.Ff=Xo(this.Ff,23):this.Ff=Jo(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Zo(this.Ff,24)},set:function(e){e?this.Ff=Xo(this.Ff,24):this.Ff=Jo(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Zo(this.Ff,25)},set:function(e){e?this.Ff=Xo(this.Ff,25):this.Ff=Jo(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Zo(this.Ff,26)},set:function(e){e?this.Ff=Xo(this.Ff,26):this.Ff=Jo(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};au(hf,Pc);var lv=function(){hf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Zo(this.Ff,14)},set:function(t){t?this.Ff=Xo(this.Ff,14):this.Ff=Jo(this.Ff,14)}}),this.password=!0};au(lv,hf);var rr={CheckBox:{createAppearanceStream:function(){return{N:{On:rr.CheckBox.YesNormal},D:{On:rr.CheckBox.YesPushDown,Off:rr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=Ab(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+ni(rr.internal.getWidth(t))+" "+ni(rr.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+ni(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=jc(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=rr.internal.getHeight(t),o=rr.internal.getWidth(t),a=Ab(t,t.caption);return i.push("1 g"),i.push("0 0 "+ni(o)+" "+ni(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+ni(o-1)+" "+ni(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+ni(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ni(rr.internal.getWidth(t))+" "+ni(rr.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:rr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=rr.RadioButton.Circle.YesNormal,e.D[t]=rr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=rr.internal.getWidth(t)<=rr.internal.getHeight(t)?rr.internal.getWidth(t)/4:rr.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=rr.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Jd(rr.internal.getWidth(t)/2)+" "+Jd(rr.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=rr.internal.getWidth(t)<=rr.internal.getHeight(t)?rr.internal.getWidth(t)/4:rr.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*rr.internal.Bezier_C).toFixed(5)),o=Number((r*rr.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Jd(rr.internal.getWidth(t)/2)+" "+Jd(rr.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Jd(rr.internal.getWidth(t)/2)+" "+Jd(rr.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=rr.internal.getWidth(t)<=rr.internal.getHeight(t)?rr.internal.getWidth(t)/4:rr.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*rr.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Jd(rr.internal.getWidth(t)/2)+" "+Jd(rr.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:rr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=rr.RadioButton.Cross.YesNormal,e.D[t]=rr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=rr.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+ni(rr.internal.getWidth(t)-2)+" "+ni(rr.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(ni(r.x1.x)+" "+ni(r.x1.y)+" m"),n.push(ni(r.x2.x)+" "+ni(r.x2.y)+" l"),n.push(ni(r.x4.x)+" "+ni(r.x4.y)+" m"),n.push(ni(r.x3.x)+" "+ni(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=rr.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+ni(rr.internal.getWidth(t))+" "+ni(rr.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+ni(rr.internal.getWidth(t)-2)+" "+ni(rr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(ni(n.x1.x)+" "+ni(n.x1.y)+" m"),r.push(ni(n.x2.x)+" "+ni(n.x2.y)+" l"),r.push(ni(n.x4.x)+" "+ni(n.x4.y)+" m"),r.push(ni(n.x3.x)+" "+ni(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ni(rr.internal.getWidth(t))+" "+ni(rr.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};rr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=rr.internal.getWidth(t),n=rr.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},rr.internal.getWidth=function(t){var e=0;return ps(t)==="object"&&(e=S5(t.Rect[2])),e},rr.internal.getHeight=function(t){var e=0;return ps(t)==="object"&&(e=S5(t.Rect[3])),e};var OH=Do.addField=function(t){if(NH(this,t),!(t instanceof Pc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Do.AcroFormChoiceField=yp,Do.AcroFormListBox=bp,Do.AcroFormComboBox=_p,Do.AcroFormEditBox=sv,Do.AcroFormButton=Ma,Do.AcroFormPushButton=ov,Do.AcroFormRadioButton=wp,Do.AcroFormCheckBox=av,Do.AcroFormTextField=hf,Do.AcroFormPasswordField=lv,Do.AcroFormAppearance=rr,Do.AcroForm={ChoiceField:yp,ListBox:bp,ComboBox:_p,EditBox:sv,Button:Ma,PushButton:ov,RadioButton:wp,CheckBox:av,TextField:hf,PasswordField:lv,Appearance:rr},Or.AcroForm={ChoiceField:yp,ListBox:bp,ComboBox:_p,EditBox:sv,Button:Ma,PushButton:ov,RadioButton:wp,CheckBox:av,TextField:hf,PasswordField:lv,Appearance:rr};Or.AcroForm;function eP(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(U,R){var V,$,B,I,Q,G=e;if((R=R||e)==="RGBA"||U.data!==void 0&&U.data instanceof Uint8ClampedArray&&"height"in U&&"width"in U)return"RGBA";if(ge(U))for(Q in n)for(B=n[Q],V=0;V<B.length;V+=1){for(I=!0,$=0;$<B[V].length;$+=1)if(B[V][$]!==void 0&&B[V][$]!==U[$]){I=!1;break}if(I===!0){G=Q;break}}else for(Q in n)for(B=n[Q],V=0;V<B.length;V+=1){for(I=!0,$=0;$<B[V].length;$+=1)if(B[V][$]!==void 0&&B[V][$]!==U.charCodeAt($)){I=!1;break}if(I===!0){G=Q;break}}return G===e&&R!==e&&(G=R),G},i=function U(R){for(var V=this.internal.write,$=this.internal.putStream,B=(0,this.internal.getFilters)();B.indexOf("FlateEncode")!==-1;)B.splice(B.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var I=[];if(I.push({key:"Type",value:"/XObject"}),I.push({key:"Subtype",value:"/Image"}),I.push({key:"Width",value:R.width}),I.push({key:"Height",value:R.height}),R.colorSpace===D.INDEXED?I.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(I.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===D.DEVICE_CMYK&&I.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),I.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&I.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)){for(var Q="",G=0,_e=R.transparency.length;G<_e;G++)Q+=R.transparency[G]+" "+R.transparency[G]+" ";I.push({key:"Mask",value:"["+Q+"]"})}R.sMask!==void 0&&I.push({key:"SMask",value:R.objectId+1+" 0 R"});var ve=R.filter!==void 0?["/"+R.filter]:void 0;if($({data:R.data,additionalKeyValues:I,alreadyAppliedFilters:ve,objectId:R.objectId}),V("endobj"),"sMask"in R&&R.sMask!==void 0){var qe="/Predictor "+R.predictor+" /Colors 1 /BitsPerComponent "+R.bitsPerComponent+" /Columns "+R.width,re={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:R.bitsPerComponent,decodeParameters:qe,data:R.sMask};"filter"in R&&(re.filter=R.filter),U.call(this,re)}if(R.colorSpace===D.INDEXED){var K=this.internal.newObject();$({data:O(new Uint8Array(R.palette)),objectId:K}),V("endobj")}},s=function(){var U=this.internal.collections.addImage_images;for(var R in U)i.call(this,U[R])},o=function(){var U,R=this.internal.collections.addImage_images,V=this.internal.write;for(var $ in R)V("/I"+(U=R[$]).index,U.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var U=this.internal.collections.addImage_images;return a.call(this),U},c=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(U){return typeof t["process"+U.toUpperCase()]=="function"},p=function(U){return ps(U)==="object"&&U.nodeType===1},v=function(U,R){if(U.nodeName==="IMG"&&U.hasAttribute("src")){var V=""+U.getAttribute("src");if(V.indexOf("data:image/")===0)return Wg(unescape(V).split("base64,").pop());var $=t.loadFile(V,!0);if($!==void 0)return $}if(U.nodeName==="CANVAS"){if(U.width===0||U.height===0)throw new Error("Given canvas must have data. Canvas width: "+U.width+", height: "+U.height);var B;switch(R){case"PNG":B="image/png";break;case"WEBP":B="image/webp";break;case"JPEG":case"JPG":default:B="image/jpeg"}return Wg(U.toDataURL(B,1).split("base64,").pop())}},g=function(U){var R=this.internal.collections.addImage_images;if(R){for(var V in R)if(U===R[V].alias)return R[V]}},x=function(U,R,V){return U||R||(U=-96,R=-96),U<0&&(U=-1*V.width*72/U/this.internal.scaleFactor),R<0&&(R=-1*V.height*72/R/this.internal.scaleFactor),U===0&&(U=R*V.width/V.height),R===0&&(R=U*V.height/V.width),[U,R]},E=function(U,R,V,$,B,I){var Q=x.call(this,V,$,B),G=this.internal.getCoordinateString,_e=this.internal.getVerticalCoordinateString,ve=l.call(this);if(V=Q[0],$=Q[1],ve[B.index]=B,I){I*=Math.PI/180;var qe=Math.cos(I),re=Math.sin(I),K=function(oe){return oe.toFixed(4)},Z=[K(qe),K(re),K(-1*re),K(qe),0,0,"cm"]}this.internal.write("q"),I?(this.internal.write([1,"0","0",1,G(U),_e(R+$),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([G(V),"0","0",G($),"0","0","cm"].join(" "))):this.internal.write([G(V),"0","0",G($),G(U),_e(R+$),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+B.index+" Do"),this.internal.write("Q")},D=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var M=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},A=t.__addimage__.sHashCode=function(U){var R,V,$=0;if(typeof U=="string")for(V=U.length,R=0;R<V;R++)$=($<<5)-$+U.charCodeAt(R),$|=0;else if(ge(U))for(V=U.byteLength/2,R=0;R<V;R++)$=($<<5)-$+U[R],$|=0;return $},z=t.__addimage__.validateStringAsBase64=function(U){(U=U||"").toString().trim();var R=!0;return U.length===0&&(R=!1),U.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(U.substr(0,U.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(U.substr(-2))===!1&&(R=!1),R},Y=t.__addimage__.extractImageFromDataUrl=function(U){var R=(U=U||"").split("base64,"),V=null;if(R.length===2){var $=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(R[0]);Array.isArray($)&&(V={mimeType:$[1],charset:$[2],data:R[1]})}return V},ne=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(U){return ne()&&U instanceof ArrayBuffer};var ge=t.__addimage__.isArrayBufferView=function(U){return ne()&&typeof Uint32Array<"u"&&(U instanceof Int8Array||U instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&U instanceof Uint8ClampedArray||U instanceof Int16Array||U instanceof Uint16Array||U instanceof Int32Array||U instanceof Uint32Array||U instanceof Float32Array||U instanceof Float64Array)},pe=t.__addimage__.binaryStringToUint8Array=function(U){for(var R=U.length,V=new Uint8Array(R),$=0;$<R;$++)V[$]=U.charCodeAt($);return V},O=t.__addimage__.arrayBufferToBinaryString=function(U){for(var R="",V=ge(U)?U:new Uint8Array(U),$=0;$<V.length;$+=8192)R+=String.fromCharCode.apply(null,V.subarray($,$+8192));return R};t.addImage=function(){var U,R,V,$,B,I,Q,G,_e;if(typeof arguments[1]=="number"?(R=e,V=arguments[1],$=arguments[2],B=arguments[3],I=arguments[4],Q=arguments[5],G=arguments[6],_e=arguments[7]):(R=arguments[1],V=arguments[2],$=arguments[3],B=arguments[4],I=arguments[5],Q=arguments[6],G=arguments[7],_e=arguments[8]),ps(U=arguments[0])==="object"&&!p(U)&&"imageData"in U){var ve=U;U=ve.imageData,R=ve.format||R||e,V=ve.x||V||0,$=ve.y||$||0,B=ve.w||ve.width||B,I=ve.h||ve.height||I,Q=ve.alias||Q,G=ve.compression||G,_e=ve.rotation||ve.angle||_e}var qe=this.internal.getFilters();if(G===void 0&&qe.indexOf("FlateEncode")!==-1&&(G="SLOW"),isNaN(V)||isNaN($))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var re=j.call(this,U,R,Q,G);return E.call(this,V,$,B,I,re,_e),this};var j=function(U,R,V,$){var B,I,Q;if(typeof U=="string"&&r(U)===e){U=unescape(U);var G=J(U,!1);(G!==""||(G=t.loadFile(U,!0))!==void 0)&&(U=G)}if(p(U)&&(U=v(U,R)),R=r(U,R),!h(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((Q=V)==null||Q.length===0)&&(V=function(_e){return typeof _e=="string"||ge(_e)?A(_e):ge(_e.data)?A(_e.data):null}(U)),(B=g.call(this,V))||(ne()&&(U instanceof Uint8Array||R==="RGBA"||(I=U,U=pe(U))),B=this["process"+R.toUpperCase()](U,c.call(this),V,function(_e){return _e&&typeof _e=="string"&&(_e=_e.toUpperCase()),_e in t.image_compression?_e:M.NONE}($),I)),!B)throw new Error("An unknown error occurred whilst processing the image.");return B},J=t.__addimage__.convertBase64ToBinaryString=function(U,R){var V;R=typeof R!="boolean"||R;var $,B="";if(typeof U=="string"){$=(V=Y(U))!==null?V.data:U;try{B=Wg($)}catch(I){if(R)throw z($)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+I.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return B};t.getImageProperties=function(U){var R,V,$="";if(p(U)&&(U=v(U)),typeof U=="string"&&r(U)===e&&(($=J(U,!1))===""&&($=t.loadFile(U)||""),U=$),V=r(U),!h(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(!ne()||U instanceof Uint8Array||(U=pe(U)),!(R=this["process"+V.toUpperCase()](U)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=V,R}})(Or.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Or.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,h=!1,p=0;p<c.length&&!h;p++)switch((r=c[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var v=0;v<c.length;v++){r=c[v];var g=this.internal.pdfEscape,x=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),D=this.internal.newAdditionalObject(),M=this.internal.getEncryptor(E.objId),A=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+g(M(r.contents))+")",s+=" /Popup "+D.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+g(M(A))+") >>",E.content=s;var z=E.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+z,r.open&&(s+=" /Open true"),s+=" >>",D.content=s,this.internal.write(E.objId,"0 R",D.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var Y=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(x(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Y+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var ne=this.annotations._nameMap[r.options.name];r.options.pageNumber=ne.page,r.options.top=ne.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(x(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ge=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+ge+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var h=this.splitTextToSize(n,a).length;o=Math.ceil(c*h)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Or.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(E){return e[E.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},a=t.__arabicParser__.isArabicEndLetter=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(E){return o(E)&&i.indexOf(E.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=3};var h=t.__arabicParser__.arabicLetterHasMedialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(E){var D=0,M=n,A="",z=0;for(D=0;D<E.length;D+=1)M[E.charCodeAt(D)]!==void 0?(z++,typeof(M=M[E.charCodeAt(D)])=="number"&&(A+=String.fromCharCode(M),M=n,z=0),D===E.length-1&&(M=n,A+=E.charAt(D-(z-1)),D-=z-1,z=0)):(M=n,A+=E.charAt(D-z),D-=z,z=0);return A};t.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&r[E.charCodeAt(0)]!==void 0};var v=t.__arabicParser__.getCorrectForm=function(E,D,M){return o(E)?s(E)===!1?-1:!c(E)||!o(D)&&!o(M)||!o(M)&&a(D)||a(E)&&!o(D)||a(E)&&l(D)||a(E)&&a(D)?0:h(E)&&o(D)&&!a(D)&&o(M)&&c(M)?3:a(E)||!o(M)?1:2:-1},g=function(E){var D=0,M=0,A=0,z="",Y="",ne="",ge=(E=E||"").split("\\s+"),pe=[];for(D=0;D<ge.length;D+=1){for(pe.push(""),M=0;M<ge[D].length;M+=1)z=ge[D][M],Y=ge[D][M-1],ne=ge[D][M+1],o(z)?(A=v(z,Y,ne),pe[D]+=A!==-1?String.fromCharCode(e[z.charCodeAt(0)][A]):z):pe[D]+=z;pe[D]=p(pe[D])}return pe.join(" ")},x=t.__arabicParser__.processArabic=t.processArabic=function(){var E,D=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,M=[];if(Array.isArray(D)){var A=0;for(M=[],A=0;A<D.length;A+=1)Array.isArray(D[A])?M.push([g(D[A][0]),D[A][1],D[A][2]]):M.push([g(D[A])]);E=M}else E=g(D);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};t.events.push(["preProcessText",x])}(Or.API),Or.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Or.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(E){l=E}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(E){c=E}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(E){h=E}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(E){p=E}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(E){v=E}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(E){g=E}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(E){x=E}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var h=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),v=c.scaleFactor||this.internal.scaleFactor,g=0,x=0,E=0,D=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var M=c.maxWidth;M>0?typeof l=="string"?l=this.splitTextToSize(l,M):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(z,Y){return z.concat(D.splitTextToSize(Y,M))},[])):l=Array.isArray(l)?l:[l];for(var A=0;A<l.length;A++)g<(E=this.getStringUnitWidth(l[A],{font:p})*h)&&(g=E);return g!==0&&(x=l.length),{w:g/=v,h:Math.max((x*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/v,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,g&&v&&(this.printHeaderRow(l.lineNumber,!0),l.y+=v[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-h,l.y+h,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+h,{align:"center",baseline:"top",maxWidth:l.width-h-h}):this.text(l.text,l.x+h,l.y+h,{align:"left",baseline:"top",maxWidth:l.width-h-h})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,h,p,v){if(r.call(this),!h)throw new Error("No data for PDF table.");var g,x,E,D,M=[],A=[],z=[],Y={},ne={},ge=[],pe=[],O=(v=v||{}).autoSize||!1,j=v.printHeaders!==!1,J=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,U=v.margins||Object.assign({width:this.getPageWidth()},e),R=typeof v.padding=="number"?v.padding:3,V=v.headerBackgroundColor||"#c8c8c8",$=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=j,this.internal.__cell__.margins=U,this.internal.__cell__.table_font_size=J,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=V,this.internal.__cell__.headerTextColor=$,this.setFontSize(J),p==null)A=M=Object.keys(h[0]),z=M.map(function(){return"left"});else if(Array.isArray(p)&&ps(p[0])==="object")for(M=p.map(function(ve){return ve.name}),A=p.map(function(ve){return ve.prompt||ve.name||""}),z=p.map(function(ve){return ve.align||"left"}),g=0;g<p.length;g+=1)ne[p[g].name]=p[g].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(A=M=p,z=M.map(function(){return"left"}));if(O||Array.isArray(p)&&typeof p[0]=="string")for(g=0;g<M.length;g+=1){for(Y[D=M[g]]=h.map(function(ve){return ve[D]}),this.setFont(void 0,"bold"),ge.push(this.getTextDimensions(A[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=Y[D],this.setFont(void 0,"normal"),E=0;E<x.length;E+=1)ge.push(this.getTextDimensions(x[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ne[D]=Math.max.apply(null,ge)+R+R,ge=[]}if(j){var B={};for(g=0;g<M.length;g+=1)B[M[g]]={},B[M[g]].text=A[g],B[M[g]].align=z[g];var I=a.call(this,B,ne);pe=M.map(function(ve){return new s(l,c,ne[ve],I,B[ve].text,void 0,B[ve].align)}),this.setTableHeaderRow(pe),this.printHeaderRow(1,!1)}var Q=p.reduce(function(ve,qe){return ve[qe.name]=qe.align,ve},{});for(g=0;g<h.length;g+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:g,data:h[g]},this);var G=a.call(this,h[g],ne);for(E=0;E<M.length;E+=1){var _e=h[g][M[E]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:g,col:E,data:_e},this),o.call(this,new s(l,c,ne[M[E]],G,_e,g+2,Q[M[E]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var h=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(l).map(function(g){var x=l[g];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,c[g]-h-h)},this).map(function(g){return this.getLineHeightFactor()*g.length*p/v+h+h},this).reduce(function(g,x){return Math.max(g,x)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){h=this.internal.__cell__.tableHeaderRow[g].clone(),c&&(h.y=this.internal.__cell__.margins.top||0,v.push(h)),h.lineNumber=l;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(x)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),n=!1}}(Or.API);var tP={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},nP=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Tb=eP(nP),rP=[100,200,300,400,500,600,700,800,900],IH=eP(rP);function Db(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return tP[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof Tb[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function C5(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var BH={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},E5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function P5(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function RH(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},BH,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=Db(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+P5(s)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var h=Tb[l],p=h<=Tb.normal?-1:1,v=C5(c,nP,h,p);if(!v)throw new Error("Could not find a matching font-stretch value for "+l);return v}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var h=tP[l],p=0;p<h.length;++p)if(c[h[p]])return c[h[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var h=IH[l],p=C5(c,rP,h,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+P5(s)+"'.");return o}function M5(t){return t.trimLeft()}function FH(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function jH(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var S0,k5,A5,a2=["times"];(function(t){var e,n,r,i,s,o,a,l,c,h=function(re){return re=re||{},this.isStrokeTransparent=re.isStrokeTransparent||!1,this.strokeOpacity=re.strokeOpacity||1,this.strokeStyle=re.strokeStyle||"#000000",this.fillStyle=re.fillStyle||"#000000",this.isFillTransparent=re.isFillTransparent||!1,this.fillOpacity=re.fillOpacity||1,this.font=re.font||"10px sans-serif",this.textBaseline=re.textBaseline||"alphabetic",this.textAlign=re.textAlign||"left",this.lineWidth=re.lineWidth||1,this.lineJoin=re.lineJoin||"miter",this.lineCap=re.lineCap||"butt",this.path=re.path||[],this.transform=re.transform!==void 0?re.transform.clone():new l,this.globalCompositeOperation=re.globalCompositeOperation||"normal",this.globalAlpha=re.globalAlpha||1,this.clip_path=re.clip_path||[],this.currentPoint=re.currentPoint||new o,this.miterLimit=re.miterLimit||10,this.lastPoint=re.lastPoint||new o,this.lineDashOffset=re.lineDashOffset||0,this.lineDash=re.lineDash||[],this.margin=re.margin||[0,0,0,0],this.prevPageLastElemOffset=re.prevPageLastElemOffset||0,this.ignoreClearRect=typeof re.ignoreClearRect!="boolean"||re.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new h}]);var p=function(re){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var K=re;Object.defineProperty(this,"pdf",{get:function(){return K}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(se){Z=!!se}});var oe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return oe},set:function(se){oe=!!se}});var de=0;Object.defineProperty(this,"posX",{get:function(){return de},set:function(se){isNaN(se)||(de=se)}});var ye=0;Object.defineProperty(this,"posY",{get:function(){return ye},set:function(se){isNaN(se)||(ye=se)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(se){var le;typeof se=="number"?le=[se,se,se,se]:((le=new Array(4))[0]=se[0],le[1]=se.length>=2?se[1]:le[0],le[2]=se.length>=3?se[2]:le[0],le[3]=se.length>=4?se[3]:le[1]),c.margin=le}});var he=!1;Object.defineProperty(this,"autoPaging",{get:function(){return he},set:function(se){he=se}});var X=0;Object.defineProperty(this,"lastBreak",{get:function(){return X},set:function(se){X=se}});var Ae=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ae},set:function(se){Ae=se}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(se){se instanceof h&&(c=se)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(se){c.path=se}});var De=[];Object.defineProperty(this,"ctxStack",{get:function(){return De},set:function(se){De=se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(se){var le;le=v(se),this.ctx.fillStyle=le.style,this.ctx.isFillTransparent=le.a===0,this.ctx.fillOpacity=le.a,this.pdf.setFillColor(le.r,le.g,le.b,{a:le.a}),this.pdf.setTextColor(le.r,le.g,le.b,{a:le.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(se){var le=v(se);this.ctx.strokeStyle=le.style,this.ctx.isStrokeTransparent=le.a===0,this.ctx.strokeOpacity=le.a,le.a===0?this.pdf.setDrawColor(255,255,255):(le.a,this.pdf.setDrawColor(le.r,le.g,le.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(se){["butt","round","square"].indexOf(se)!==-1&&(this.ctx.lineCap=se,this.pdf.setLineCap(se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(se){isNaN(se)||(this.ctx.lineWidth=se,this.pdf.setLineWidth(se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(se){["bevel","round","miter"].indexOf(se)!==-1&&(this.ctx.lineJoin=se,this.pdf.setLineJoin(se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(se){isNaN(se)||(this.ctx.miterLimit=se,this.pdf.setMiterLimit(se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(se){this.ctx.textBaseline=se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(se){["right","end","center","left","start"].indexOf(se)!==-1&&(this.ctx.textAlign=se)}});var Xe=null;function fe(se,le){if(Xe===null){var je=function($e){var et=[];return Object.keys($e).forEach(function(Ee){$e[Ee].forEach(function(me){var We=null;switch(me){case"bold":We={family:Ee,weight:"bold"};break;case"italic":We={family:Ee,style:"italic"};break;case"bolditalic":We={family:Ee,weight:"bold",style:"italic"};break;case"":case"normal":We={family:Ee}}We!==null&&(We.ref={name:Ee,style:me},et.push(We))})}),et}(se.getFontList());Xe=function($e){for(var et={},Ee=0;Ee<$e.length;++Ee){var me=Db($e[Ee]),We=me.family,ct=me.stretch,pt=me.style,gt=me.weight;et[We]=et[We]||{},et[We][ct]=et[We][ct]||{},et[We][ct][pt]=et[We][ct][pt]||{},et[We][ct][pt][gt]=me}return et}(je.concat(le))}return Xe}var ee=null;Object.defineProperty(this,"fontFaces",{get:function(){return ee},set:function(se){Xe=null,ee=se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(se){var le;if(this.ctx.font=se,(le=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(se))!==null){var je=le[1],$e=(le[2],le[3]),et=le[4],Ee=(le[5],le[6]),me=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(et)[2];et=Math.floor(me==="px"?parseFloat(et)*this.pdf.internal.scaleFactor:me==="em"?parseFloat(et)*this.pdf.getFontSize():parseFloat(et)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(et);var We=function(Qe){var lt,it,$t=[],Jt=Qe.trim();if(Jt==="")return a2;if(Jt in E5)return[E5[Jt]];for(;Jt!=="";){switch(it=null,lt=(Jt=M5(Jt)).charAt(0)){case'"':case"'":it=FH(Jt.substring(1),lt);break;default:it=jH(Jt)}if(it===null||($t.push(it[0]),(Jt=M5(it[1]))!==""&&Jt.charAt(0)!==","))return a2;Jt=Jt.replace(/^,/,"")}return $t}(Ee);if(this.fontFaces){var ct=RH(fe(this.pdf,this.fontFaces),We.map(function(Qe){return{family:Qe,stretch:"normal",weight:$e,style:je}}));this.pdf.setFont(ct.ref.name,ct.ref.style)}else{var pt="";($e==="bold"||parseInt($e,10)>=700||je==="bold")&&(pt="bold"),je==="italic"&&(pt+="italic"),pt.length===0&&(pt="normal");for(var gt="",st={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},qt=0;qt<We.length;qt++){if(this.pdf.internal.getFont(We[qt],pt,{noFallback:!0,disableWarning:!0})!==void 0){gt=We[qt];break}if(pt==="bolditalic"&&this.pdf.internal.getFont(We[qt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)gt=We[qt],pt="bold";else if(this.pdf.internal.getFont(We[qt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){gt=We[qt],pt="normal";break}}if(gt===""){for(var gn=0;gn<We.length;gn++)if(st[We[gn]]){gt=st[We[gn]];break}}gt=gt===""?"Times":gt,this.pdf.setFont(gt,pt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(se){this.ctx.globalCompositeOperation=se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(se){this.ctx.globalAlpha=se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(se){this.ctx.lineDashOffset=se,qe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(se){this.ctx.lineDash=se,qe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(se){this.ctx.ignoreClearRect=!!se}})};p.prototype.setLineDash=function(re){this.lineDash=re},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){Y.call(this,"fill",!1)},p.prototype.stroke=function(){Y.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(re,K){if(isNaN(re)||isNaN(K))throw Cs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new o(re,K));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new o(re,K)},p.prototype.closePath=function(){var re=new o(0,0),K=0;for(K=this.path.length-1;K!==-1;K--)if(this.path[K].type==="begin"&&ps(this.path[K+1])==="object"&&typeof this.path[K+1].x=="number"){re=new o(this.path[K+1].x,this.path[K+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(re.x,re.y)},p.prototype.lineTo=function(re,K){if(isNaN(re)||isNaN(K))throw Cs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new o(re,K));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new o(Z.x,Z.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Y.call(this,null,!0)},p.prototype.quadraticCurveTo=function(re,K,Z,oe){if(isNaN(Z)||isNaN(oe)||isNaN(re)||isNaN(K))throw Cs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var de=this.ctx.transform.applyToPoint(new o(Z,oe)),ye=this.ctx.transform.applyToPoint(new o(re,K));this.path.push({type:"qct",x1:ye.x,y1:ye.y,x:de.x,y:de.y}),this.ctx.lastPoint=new o(de.x,de.y)},p.prototype.bezierCurveTo=function(re,K,Z,oe,de,ye){if(isNaN(de)||isNaN(ye)||isNaN(re)||isNaN(K)||isNaN(Z)||isNaN(oe))throw Cs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var he=this.ctx.transform.applyToPoint(new o(de,ye)),X=this.ctx.transform.applyToPoint(new o(re,K)),Ae=this.ctx.transform.applyToPoint(new o(Z,oe));this.path.push({type:"bct",x1:X.x,y1:X.y,x2:Ae.x,y2:Ae.y,x:he.x,y:he.y}),this.ctx.lastPoint=new o(he.x,he.y)},p.prototype.arc=function(re,K,Z,oe,de,ye){if(isNaN(re)||isNaN(K)||isNaN(Z)||isNaN(oe)||isNaN(de))throw Cs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ye=!!ye,!this.ctx.transform.isIdentity){var he=this.ctx.transform.applyToPoint(new o(re,K));re=he.x,K=he.y;var X=this.ctx.transform.applyToPoint(new o(0,Z)),Ae=this.ctx.transform.applyToPoint(new o(0,0));Z=Math.sqrt(Math.pow(X.x-Ae.x,2)+Math.pow(X.y-Ae.y,2))}Math.abs(de-oe)>=2*Math.PI&&(oe=0,de=2*Math.PI),this.path.push({type:"arc",x:re,y:K,radius:Z,startAngle:oe,endAngle:de,counterclockwise:ye})},p.prototype.arcTo=function(re,K,Z,oe,de){throw new Error("arcTo not implemented.")},p.prototype.rect=function(re,K,Z,oe){if(isNaN(re)||isNaN(K)||isNaN(Z)||isNaN(oe))throw Cs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(re,K),this.lineTo(re+Z,K),this.lineTo(re+Z,K+oe),this.lineTo(re,K+oe),this.lineTo(re,K),this.lineTo(re+Z,K),this.lineTo(re,K)},p.prototype.fillRect=function(re,K,Z,oe){if(isNaN(re)||isNaN(K)||isNaN(Z)||isNaN(oe))throw Cs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var de={};this.lineCap!=="butt"&&(de.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(de.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(re,K,Z,oe),this.fill(),de.hasOwnProperty("lineCap")&&(this.lineCap=de.lineCap),de.hasOwnProperty("lineJoin")&&(this.lineJoin=de.lineJoin)}},p.prototype.strokeRect=function(re,K,Z,oe){if(isNaN(re)||isNaN(K)||isNaN(Z)||isNaN(oe))throw Cs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(re,K,Z,oe),this.stroke())},p.prototype.clearRect=function(re,K,Z,oe){if(isNaN(re)||isNaN(K)||isNaN(Z)||isNaN(oe))throw Cs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(re,K,Z,oe))},p.prototype.save=function(re){re=typeof re!="boolean"||re;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(K),re){this.ctx.fontSize=this.pdf.internal.getFontSize();var oe=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=oe}},p.prototype.restore=function(re){re=typeof re!="boolean"||re;for(var K=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(K),re&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(re){var K,Z,oe,de;if(re.isCanvasGradient===!0&&(re=re.getColor()),!re)return{r:0,g:0,b:0,a:0,style:re};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(re))K=0,Z=0,oe=0,de=0;else{var ye=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(re);if(ye!==null)K=parseInt(ye[1]),Z=parseInt(ye[2]),oe=parseInt(ye[3]),de=1;else if((ye=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(re))!==null)K=parseInt(ye[1]),Z=parseInt(ye[2]),oe=parseInt(ye[3]),de=parseFloat(ye[4]);else{if(de=1,typeof re=="string"&&re.charAt(0)!=="#"){var he=new YE(re);re=he.ok?he.toHex():"#000000"}re.length===4?(K=re.substring(1,2),K+=K,Z=re.substring(2,3),Z+=Z,oe=re.substring(3,4),oe+=oe):(K=re.substring(1,3),Z=re.substring(3,5),oe=re.substring(5,7)),K=parseInt(K,16),Z=parseInt(Z,16),oe=parseInt(oe,16)}}return{r:K,g:Z,b:oe,a:de,style:re}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(re,K,Z,oe){if(isNaN(K)||isNaN(Z)||typeof re!="string")throw Cs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(oe=isNaN(oe)?void 0:oe,!g.call(this)){var de=G(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;R.call(this,{text:re,x:K,y:Z,scale:ye,angle:de,align:this.textAlign,maxWidth:oe})}},p.prototype.strokeText=function(re,K,Z,oe){if(isNaN(K)||isNaN(Z)||typeof re!="string")throw Cs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){oe=isNaN(oe)?void 0:oe;var de=G(this.ctx.transform.rotation),ye=this.ctx.transform.scaleX;R.call(this,{text:re,x:K,y:Z,scale:ye,renderingMode:"stroke",angle:de,align:this.textAlign,maxWidth:oe})}},p.prototype.measureText=function(re){if(typeof re!="string")throw Cs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var K=this.pdf,Z=this.pdf.internal.scaleFactor,oe=K.internal.getFontSize(),de=K.getStringUnitWidth(re)*oe/K.internal.scaleFactor,ye=function(he){var X=(he=he||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return X}}),this};return new ye({width:de*=Math.round(96*Z/72*1e4)/1e4})},p.prototype.scale=function(re,K){if(isNaN(re)||isNaN(K))throw Cs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new l(re,0,0,K,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},p.prototype.rotate=function(re){if(isNaN(re))throw Cs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var K=new l(Math.cos(re),Math.sin(re),-Math.sin(re),Math.cos(re),0,0);this.ctx.transform=this.ctx.transform.multiply(K)},p.prototype.translate=function(re,K){if(isNaN(re)||isNaN(K))throw Cs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new l(1,0,0,1,re,K);this.ctx.transform=this.ctx.transform.multiply(Z)},p.prototype.transform=function(re,K,Z,oe,de,ye){if(isNaN(re)||isNaN(K)||isNaN(Z)||isNaN(oe)||isNaN(de)||isNaN(ye))throw Cs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var he=new l(re,K,Z,oe,de,ye);this.ctx.transform=this.ctx.transform.multiply(he)},p.prototype.setTransform=function(re,K,Z,oe,de,ye){re=isNaN(re)?1:re,K=isNaN(K)?0:K,Z=isNaN(Z)?0:Z,oe=isNaN(oe)?1:oe,de=isNaN(de)?0:de,ye=isNaN(ye)?0:ye,this.ctx.transform=new l(re,K,Z,oe,de,ye)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(re,K,Z,oe,de,ye,he,X,Ae){var De=this.pdf.getImageProperties(re),Xe=1,fe=1,ee=1,se=1;oe!==void 0&&X!==void 0&&(ee=X/oe,se=Ae/de,Xe=De.width/oe*X/oe,fe=De.height/de*Ae/de),ye===void 0&&(ye=K,he=Z,K=0,Z=0),oe!==void 0&&X===void 0&&(X=oe,Ae=de),oe===void 0&&X===void 0&&(X=De.width,Ae=De.height);for(var le,je=this.ctx.transform.decompose(),$e=G(je.rotate.shx),et=new l,Ee=(et=(et=(et=et.multiply(je.translate)).multiply(je.skew)).multiply(je.scale)).applyToRectangle(new a(ye-K*ee,he-Z*se,oe*Xe,de*fe)),me=D.call(this,Ee),We=[],ct=0;ct<me.length;ct+=1)We.indexOf(me[ct])===-1&&We.push(me[ct]);if(z(We),this.autoPaging)for(var pt=We[0],gt=We[We.length-1],st=pt;st<gt+1;st++){this.pdf.setPage(st);var qt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],gn=st===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],it=st===1?0:Qe+(st-2)*lt;if(this.ctx.clip_path.length!==0){var $t=this.path;le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(le,this.posX+this.margin[3],-it+gn+this.ctx.prevPageLastElemOffset),ne.call(this,"fill",!0),this.path=$t}var Jt=JSON.parse(JSON.stringify(Ee));Jt=A([Jt],this.posX+this.margin[3],-it+gn+this.ctx.prevPageLastElemOffset)[0];var Dn=(st>pt||st<gt)&&E.call(this);Dn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qt,lt,null).clip().discardPath()),this.pdf.addImage(re,"JPEG",Jt.x,Jt.y,Jt.w,Jt.h,null,null,$e),Dn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(re,"JPEG",Ee.x,Ee.y,Ee.w,Ee.h,null,null,$e)};var D=function(re,K,Z){var oe=[];K=K||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var de=this.posY+this.ctx.prevPageLastElemOffset;switch(re.type){default:case"mt":case"lt":oe.push(Math.floor((re.y+de)/Z)+1);break;case"arc":oe.push(Math.floor((re.y+de-re.radius)/Z)+1),oe.push(Math.floor((re.y+de+re.radius)/Z)+1);break;case"qct":var ye=_e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,re.x1,re.y1,re.x,re.y);oe.push(Math.floor((ye.y+de)/Z)+1),oe.push(Math.floor((ye.y+ye.h+de)/Z)+1);break;case"bct":var he=ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,re.x1,re.y1,re.x2,re.y2,re.x,re.y);oe.push(Math.floor((he.y+de)/Z)+1),oe.push(Math.floor((he.y+he.h+de)/Z)+1);break;case"rect":oe.push(Math.floor((re.y+de)/Z)+1),oe.push(Math.floor((re.y+re.h+de)/Z)+1)}for(var X=0;X<oe.length;X+=1)for(;this.pdf.internal.getNumberOfPages()<oe[X];)M.call(this);return oe},M=function(){var re=this.fillStyle,K=this.strokeStyle,Z=this.font,oe=this.lineCap,de=this.lineWidth,ye=this.lineJoin;this.pdf.addPage(),this.fillStyle=re,this.strokeStyle=K,this.font=Z,this.lineCap=oe,this.lineWidth=de,this.lineJoin=ye},A=function(re,K,Z){for(var oe=0;oe<re.length;oe++)switch(re[oe].type){case"bct":re[oe].x2+=K,re[oe].y2+=Z;case"qct":re[oe].x1+=K,re[oe].y1+=Z;case"mt":case"lt":case"arc":default:re[oe].x+=K,re[oe].y+=Z}return re},z=function(re){return re.sort(function(K,Z){return K-Z})},Y=function(re,K){for(var Z,oe,de=this.fillStyle,ye=this.strokeStyle,he=this.lineCap,X=this.lineWidth,Ae=Math.abs(X*this.ctx.transform.scaleX),De=this.lineJoin,Xe=JSON.parse(JSON.stringify(this.path)),fe=JSON.parse(JSON.stringify(this.path)),ee=[],se=0;se<fe.length;se++)if(fe[se].x!==void 0)for(var le=D.call(this,fe[se]),je=0;je<le.length;je+=1)ee.indexOf(le[je])===-1&&ee.push(le[je]);for(var $e=0;$e<ee.length;$e++)for(;this.pdf.internal.getNumberOfPages()<ee[$e];)M.call(this);if(z(ee),this.autoPaging)for(var et=ee[0],Ee=ee[ee.length-1],me=et;me<Ee+1;me++){this.pdf.setPage(me),this.fillStyle=de,this.strokeStyle=ye,this.lineCap=he,this.lineWidth=Ae,this.lineJoin=De;var We=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ct=me===1?this.posY+this.margin[0]:this.margin[0],pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],gt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],st=me===1?0:pt+(me-2)*gt;if(this.ctx.clip_path.length!==0){var qt=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(Z,this.posX+this.margin[3],-st+ct+this.ctx.prevPageLastElemOffset),ne.call(this,re,!0),this.path=qt}if(oe=JSON.parse(JSON.stringify(Xe)),this.path=A(oe,this.posX+this.margin[3],-st+ct+this.ctx.prevPageLastElemOffset),K===!1||me===0){var gn=(me>et||me<Ee)&&E.call(this);gn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],We,gt,null).clip().discardPath()),ne.call(this,re,K),gn&&this.pdf.restoreGraphicsState()}this.lineWidth=X}else this.lineWidth=Ae,ne.call(this,re,K),this.lineWidth=X;this.path=Xe},ne=function(re,K){if((re!=="stroke"||K||!x.call(this))&&(re==="stroke"||K||!g.call(this))){for(var Z,oe,de=[],ye=this.path,he=0;he<ye.length;he++){var X=ye[he];switch(X.type){case"begin":de.push({begin:!0});break;case"close":de.push({close:!0});break;case"mt":de.push({start:X,deltas:[],abs:[]});break;case"lt":var Ae=de.length;if(ye[he-1]&&!isNaN(ye[he-1].x)&&(Z=[X.x-ye[he-1].x,X.y-ye[he-1].y],Ae>0)){for(;Ae>=0;Ae--)if(de[Ae-1].close!==!0&&de[Ae-1].begin!==!0){de[Ae-1].deltas.push(Z),de[Ae-1].abs.push(X);break}}break;case"bct":Z=[X.x1-ye[he-1].x,X.y1-ye[he-1].y,X.x2-ye[he-1].x,X.y2-ye[he-1].y,X.x-ye[he-1].x,X.y-ye[he-1].y],de[de.length-1].deltas.push(Z);break;case"qct":var De=ye[he-1].x+2/3*(X.x1-ye[he-1].x),Xe=ye[he-1].y+2/3*(X.y1-ye[he-1].y),fe=X.x+2/3*(X.x1-X.x),ee=X.y+2/3*(X.y1-X.y),se=X.x,le=X.y;Z=[De-ye[he-1].x,Xe-ye[he-1].y,fe-ye[he-1].x,ee-ye[he-1].y,se-ye[he-1].x,le-ye[he-1].y],de[de.length-1].deltas.push(Z);break;case"arc":de.push({deltas:[],abs:[],arc:!0}),Array.isArray(de[de.length-1].abs)&&de[de.length-1].abs.push(X)}}oe=K?null:re==="stroke"?"stroke":"fill";for(var je=!1,$e=0;$e<de.length;$e++)if(de[$e].arc)for(var et=de[$e].abs,Ee=0;Ee<et.length;Ee++){var me=et[Ee];me.type==="arc"?O.call(this,me.x,me.y,me.radius,me.startAngle,me.endAngle,me.counterclockwise,void 0,K,!je):V.call(this,me.x,me.y),je=!0}else if(de[$e].close===!0)this.pdf.internal.out("h"),je=!1;else if(de[$e].begin!==!0){var We=de[$e].start.x,ct=de[$e].start.y;$.call(this,de[$e].deltas,We,ct),je=!0}oe&&j.call(this,oe),K&&J.call(this)}},ge=function(re){var K=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=K*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return re-Z;case"top":return re+K-Z;case"hanging":return re+K-2*Z;case"middle":return re+K/2-Z;case"ideographic":return re;case"alphabetic":default:return re}},pe=function(re){return re+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var re=function(){};return re.colorStops=[],re.addColorStop=function(K,Z){this.colorStops.push([K,Z])},re.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},re.isCanvasGradient=!0,re},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var O=function(re,K,Z,oe,de,ye,he,X,Ae){for(var De=I.call(this,Z,oe,de,ye),Xe=0;Xe<De.length;Xe++){var fe=De[Xe];Xe===0&&(Ae?U.call(this,fe.x1+re,fe.y1+K):V.call(this,fe.x1+re,fe.y1+K)),B.call(this,re,K,fe.x2,fe.y2,fe.x3,fe.y3,fe.x4,fe.y4)}X?J.call(this):j.call(this,he)},j=function(re){switch(re){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},J=function(){this.pdf.clip(),this.pdf.discardPath()},U=function(re,K){this.pdf.internal.out(n(re)+" "+r(K)+" m")},R=function(re){var K;switch(re.align){case"right":case"end":K="right";break;case"center":K="center";break;case"left":case"start":default:K="left"}var Z=this.pdf.getTextDimensions(re.text),oe=ge.call(this,re.y),de=pe.call(this,oe)-Z.h,ye=this.ctx.transform.applyToPoint(new o(re.x,oe)),he=this.ctx.transform.decompose(),X=new l;X=(X=(X=X.multiply(he.translate)).multiply(he.skew)).multiply(he.scale);for(var Ae,De,Xe,fe=this.ctx.transform.applyToRectangle(new a(re.x,oe,Z.w,Z.h)),ee=X.applyToRectangle(new a(re.x,de,Z.w,Z.h)),se=D.call(this,ee),le=[],je=0;je<se.length;je+=1)le.indexOf(se[je])===-1&&le.push(se[je]);if(z(le),this.autoPaging)for(var $e=le[0],et=le[le.length-1],Ee=$e;Ee<et+1;Ee++){this.pdf.setPage(Ee);var me=Ee===1?this.posY+this.margin[0]:this.margin[0],We=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[2],pt=ct-this.margin[0],gt=this.pdf.internal.pageSize.width-this.margin[1],st=gt-this.margin[3],qt=Ee===1?0:We+(Ee-2)*pt;if(this.ctx.clip_path.length!==0){var gn=this.path;Ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(Ae,this.posX+this.margin[3],-1*qt+me),ne.call(this,"fill",!0),this.path=gn}var Qe=A([JSON.parse(JSON.stringify(ee))],this.posX+this.margin[3],-qt+me+this.ctx.prevPageLastElemOffset)[0];re.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*re.scale),Xe=this.lineWidth,this.lineWidth=Xe*re.scale);var lt=this.autoPaging!=="text";if(lt||Qe.y+Qe.h<=ct){if(lt||Qe.y>=me&&Qe.x<=gt){var it=lt?re.text:this.pdf.splitTextToSize(re.text,re.maxWidth||gt-Qe.x)[0],$t=A([JSON.parse(JSON.stringify(fe))],this.posX+this.margin[3],-qt+me+this.ctx.prevPageLastElemOffset)[0],Jt=lt&&(Ee>$e||Ee<et)&&E.call(this);Jt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,pt,null).clip().discardPath()),this.pdf.text(it,$t.x,$t.y,{angle:re.angle,align:K,renderingMode:re.renderingMode}),Jt&&this.pdf.restoreGraphicsState()}}else Qe.y<ct&&(this.ctx.prevPageLastElemOffset+=ct-Qe.y);re.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=Xe)}else re.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*re.scale),Xe=this.lineWidth,this.lineWidth=Xe*re.scale),this.pdf.text(re.text,ye.x+this.posX,ye.y+this.posY,{angle:re.angle,align:K,renderingMode:re.renderingMode,maxWidth:re.maxWidth}),re.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=Xe)},V=function(re,K,Z,oe){Z=Z||0,oe=oe||0,this.pdf.internal.out(n(re+Z)+" "+r(K+oe)+" l")},$=function(re,K,Z){return this.pdf.lines(re,K,Z,null,null)},B=function(re,K,Z,oe,de,ye,he,X){this.pdf.internal.out([e(i(Z+re)),e(s(oe+K)),e(i(de+re)),e(s(ye+K)),e(i(he+re)),e(s(X+K)),"c"].join(" "))},I=function(re,K,Z,oe){for(var de=2*Math.PI,ye=Math.PI/2;K>Z;)K-=de;var he=Math.abs(Z-K);he<de&&oe&&(he=de-he);for(var X=[],Ae=oe?-1:1,De=K;he>1e-5;){var Xe=De+Ae*Math.min(he,ye);X.push(Q.call(this,re,De,Xe)),he-=Math.abs(Xe-De),De=Xe}return X},Q=function(re,K,Z){var oe=(Z-K)/2,de=re*Math.cos(oe),ye=re*Math.sin(oe),he=de,X=-ye,Ae=he*he+X*X,De=Ae+he*de+X*ye,Xe=4/3*(Math.sqrt(2*Ae*De)-De)/(he*ye-X*de),fe=he-Xe*X,ee=X+Xe*he,se=fe,le=-ee,je=oe+K,$e=Math.cos(je),et=Math.sin(je);return{x1:re*Math.cos(K),y1:re*Math.sin(K),x2:fe*$e-ee*et,y2:fe*et+ee*$e,x3:se*$e-le*et,y3:se*et+le*$e,x4:re*Math.cos(Z),y4:re*Math.sin(Z)}},G=function(re){return 180*re/Math.PI},_e=function(re,K,Z,oe,de,ye){var he=re+.5*(Z-re),X=K+.5*(oe-K),Ae=de+.5*(Z-de),De=ye+.5*(oe-ye),Xe=Math.min(re,de,he,Ae),fe=Math.max(re,de,he,Ae),ee=Math.min(K,ye,X,De),se=Math.max(K,ye,X,De);return new a(Xe,ee,fe-Xe,se-ee)},ve=function(re,K,Z,oe,de,ye,he,X){var Ae,De,Xe,fe,ee,se,le,je,$e,et,Ee,me,We,ct,pt=Z-re,gt=oe-K,st=de-Z,qt=ye-oe,gn=he-de,Qe=X-ye;for(De=0;De<41;De++)$e=(le=(Xe=re+(Ae=De/40)*pt)+Ae*((ee=Z+Ae*st)-Xe))+Ae*(ee+Ae*(de+Ae*gn-ee)-le),et=(je=(fe=K+Ae*gt)+Ae*((se=oe+Ae*qt)-fe))+Ae*(se+Ae*(ye+Ae*Qe-se)-je),De==0?(Ee=$e,me=et,We=$e,ct=et):(Ee=Math.min(Ee,$e),me=Math.min(me,et),We=Math.max(We,$e),ct=Math.max(ct,et));return new a(Math.round(Ee),Math.round(me),Math.round(We-Ee),Math.round(ct-me))},qe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var re,K,Z=(re=this.ctx.lineDash,K=this.ctx.lineDashOffset,JSON.stringify({lineDash:re,lineDashOffset:K}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(Or.API),function(t){var e=function(s){var o,a,l,c,h,p,v,g,x,E;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(h=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(h=((h=((h=((h=(h-(E=h%85))/85)-(x=h%85))/85)-(g=h%85))/85)-(v=h%85))/85)%85,a.push(p+33,v+33,g+33,x+33,E+33)):a.push(122);return function(D,M){for(var A=M;A>0;A--)D.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,c,h,p=String,v="length",g=255,x="charCodeAt",E="slice",D="replace";for(s[E](-2),s=s[E](0,-2)[D](/\s/g,"")[D]("z","!!!!!"),l=[],c=0,h=(s+=o="uuuuu"[E](s[v]%5||5))[v];h>c;c+=5)a=52200625*(s[x](c)-33)+614125*(s[x](c+1)-33)+7225*(s[x](c+2)-33)+85*(s[x](c+3)-33)+(s[x](c+4)-33),l.push(g&a>>24,g&a>>16,g&a>>8,g&a);return function(M,A){for(var z=A;z>0;z--)M.pop()}(l,o[v]),p.fromCharCode.apply(p,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=Eb(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(Or.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,h){var p=new XMLHttpRequest,v=0,g=function(x){var E=x.length,D=[],M=String.fromCharCode;for(v=0;v<E;v+=1)D.push(M(255&x.charCodeAt(v)));return D.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?h(g(this.responseText)):h(void 0)}),p.send(null),c&&p.status===200)return g(p.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(Or.API),function(t){function e(){return(Rr.html2canvas?Promise.resolve(Rr.html2canvas):kd(()=>import("./html2canvas.esm.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Rr.DOMPurify?Promise.resolve(Rr.DOMPurify):kd(()=>import("./purify.es.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=ps(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,h){for(var p=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),v=c.firstChild;v;v=v.nextSibling)h!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||p.appendChild(l(v,h));return c.nodeType===1&&(c.nodeName==="CANVAS"?(p.width=c.width,p.height=c.height,p.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(p.value=c.value),p.addEventListener("load",function(){p.scrollTop=c.scrollTop,p.scrollLeft=c.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var v=0;v<c.length;++v){var g=c[v],x=g.src.find(function(E){return E.format==="truetype"});x&&l.addFont(x.url,g.ref.name,g.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||Or.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,h){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,c),p}).then(c,h).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),h=l.call(c,o,a);return s.convert(h,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Or.getPageSize=function(o,a,l){if(ps(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var h,p=(""+l).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+a}var g,x=0,E=0;if(v.hasOwnProperty(p))x=v[p][1]/h,E=v[p][0]/h;else try{x=l[1],E=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",E>x&&(g=E,E=x,x=g);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",x>E&&(g=E,E=x,x=g)}return{width:E,height:x,unit:a,k:h,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Db):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(Or.API),Or.API.addJS=function(t){return A5=t,this.internal.events.subscribe("postPutResources",function(){S0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(S0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),k5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+A5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){S0!==void 0&&k5!==void 0&&this.internal.out("/Names <</JavaScript "+S0+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,h=[];for(s=0;s<c;s++){var p=n.internal.newObject();h.push(p);var v=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var g=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<h.length;s++)n.internal.write("(page_"+(s+1)+")"+h[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+g+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Or.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,h=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(p){for(var v,g=256*p.charCodeAt(4)+p.charCodeAt(5),x=p.length,E={width:0,height:0,numcomponents:1},D=4;D<x;D+=2){if(D+=g,e.indexOf(p.charCodeAt(D+1))!==-1){v=256*p.charCodeAt(D+5)+p.charCodeAt(D+6),E={width:256*p.charCodeAt(D+7)+p.charCodeAt(D+8),height:v,numcomponents:p.charCodeAt(D+9)};break}g=256*p.charCodeAt(D+2)+p.charCodeAt(D+3)}return E}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}h={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return h}}(Or.API);var Yf,C0,T5,D5,N5,zH=function(){var t,e,n;function r(s){var o,a,l,c,h,p,v,g,x,E,D,M,A,z;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),x=(function(){var Y,ne;for(ne=[],Y=0;Y<4;++Y)ne.push(String.fromCharCode(this.data[this.pos++]));return ne}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),c=this.readUInt16()||100,p.delay=1e3*h/c,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,o-=4),s=(p!=null?p.data:void 0)||this.imgData,M=0;0<=o?M<o:M>o;0<=o?++M:--M)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((E=l-this.transparency.indexed.length)>0)for(A=0;0<=E?A<E:A>E;0<=E?++A:--A)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":v=(D=this.read(o)).indexOf(0),g=String.fromCharCode.apply(String,D.slice(0,v)),this.text[g]=String.fromCharCode.apply(String,D.slice(v+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(z=this.colorType)===4||z===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function h(p,v,g,x){var E,D,M,A,z,Y,ne,ge,pe,O,j,J,U,R,V,$,B,I,Q,G,_e,ve=Math.ceil((c.width-p)/g),qe=Math.ceil((c.height-v)/x),re=c.width==ve&&c.height==qe;for(R=o*ve,J=re?a:new Uint8Array(R*qe),Y=s.length,U=0,D=0;U<qe&&l<Y;){switch(s[l++]){case 0:for(A=B=0;B<R;A=B+=1)J[D++]=s[l++];break;case 1:for(A=I=0;I<R;A=I+=1)E=s[l++],z=A<o?0:J[D-o],J[D++]=(E+z)%256;break;case 2:for(A=Q=0;Q<R;A=Q+=1)E=s[l++],M=(A-A%o)/o,V=U&&J[(U-1)*R+M*o+A%o],J[D++]=(V+E)%256;break;case 3:for(A=G=0;G<R;A=G+=1)E=s[l++],M=(A-A%o)/o,z=A<o?0:J[D-o],V=U&&J[(U-1)*R+M*o+A%o],J[D++]=(E+Math.floor((z+V)/2))%256;break;case 4:for(A=_e=0;_e<R;A=_e+=1)E=s[l++],M=(A-A%o)/o,z=A<o?0:J[D-o],U===0?V=$=0:(V=J[(U-1)*R+M*o+A%o],$=M&&J[(U-1)*R+(M-1)*o+A%o]),ne=z+V-$,ge=Math.abs(ne-z),O=Math.abs(ne-V),j=Math.abs(ne-$),pe=ge<=O&&ge<=j?z:O<=j?V:$,J[D++]=(E+pe)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!re){var K=((v+U*x)*c.width+p)*o,Z=U*R;for(A=0;A<ve;A+=1){for(var oe=0;oe<o;oe+=1)a[K++]=J[Z++];K+=(g-1)*o}}U++}}return s=yH(s),c.interlaceMethod==1?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,c,h,p,v,g;for(a=this.palette,h=this.transparency.indexed||[],c=new Uint8Array((h.length||0)+a.length),l=0,s=0,o=p=0,v=a.length;p<v;o=p+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(g=h[s++])!=null?g:255;return c},r.prototype.copyToImageData=function(s,o){var a,l,c,h,p,v,g,x,E,D,M;if(l=this.colors,E=null,a=this.hasAlphaChannel,this.palette.length&&(E=(M=this._decodedPalette)!=null?M:this._decodedPalette=this.decodePalette(),l=4,a=!0),x=(c=s.data||s).length,p=E||o,h=v=0,l===1)for(;h<x;)g=E?4*o[h/4]:v,D=p[g++],c[h++]=D,c[h++]=D,c[h++]=D,c[h++]=a?p[g++]:255,v=g;else for(;h<x;)g=E?4*o[h/4]:v,c[h++]=p[g++],c[h++]=p[g++],c[h++]=p[g++],c[h++]=a?p[g++]:255,v=g},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Rr)==="[object Window]"){try{e=Rr.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,c,h,p,v,g;if(this.animation){for(g=[],a=h=0,p=(v=this.animation.frames).length;h<p;a=++h)o=v[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,g.push(o.image=t(l));return g}},r.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,c,h,p,v=this;return a=0,p=this.animation,c=p.numFrames,l=p.frames,h=p.numPlays,(o=function(){var g,x;if(g=a++%c,x=l[g],v.renderFrame(s,g),c>1&&a/c<h)return v.animation._timeout=setTimeout(o,x.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function $H(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,h=[],p=0,v=null,g=0,x=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,x=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((U=t[e++])>=0))throw Error("Invalid block size");if(U===0)break;e+=U}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var E=t[e++];p=t[e++]|t[e++]<<8,v=t[e++],!(1&E)&&(v=null),g=E>>2&7,e++;break;case 254:for(;;){if(!((U=t[e++])>=0))throw Error("Invalid block size");if(U===0)break;e+=U}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var D=t[e++]|t[e++]<<8,M=t[e++]|t[e++]<<8,A=t[e++]|t[e++]<<8,z=t[e++]|t[e++]<<8,Y=t[e++],ne=Y>>6&1,ge=1<<(7&Y)+1,pe=a,O=l,j=!1;Y>>7&&(j=!0,pe=e,O=ge,e+=3*ge);var J=e;for(e++;;){var U;if(!((U=t[e++])>=0))throw Error("Invalid block size");if(U===0)break;e+=U}h.push({x:D,y:M,width:A,height:z,has_local_palette:j,palette_offset:pe,palette_size:O,data_offset:J,data_length:e-J,transparent_index:v,interlaced:!!ne,delay:p,disposal:g});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return x},this.frameInfo=function(R){if(R<0||R>=h.length)throw new Error("Frame index out of range.");return h[R]},this.decodeAndBlitFrameBGRA=function(R,V){var $=this.frameInfo(R),B=$.width*$.height,I=new Uint8Array(B);O5(t,$.data_offset,I,B);var Q=$.palette_offset,G=$.transparent_index;G===null&&(G=256);var _e=$.width,ve=n-_e,qe=_e,re=4*($.y*n+$.x),K=4*(($.y+$.height)*n+$.x),Z=re,oe=4*ve;$.interlaced===!0&&(oe+=4*n*7);for(var de=8,ye=0,he=I.length;ye<he;++ye){var X=I[ye];if(qe===0&&(qe=_e,(Z+=oe)>=K&&(oe=4*ve+4*n*(de-1),Z=re+(_e+ve)*(de<<1),de>>=1)),X===G)Z+=4;else{var Ae=t[Q+3*X],De=t[Q+3*X+1],Xe=t[Q+3*X+2];V[Z++]=Xe,V[Z++]=De,V[Z++]=Ae,V[Z++]=255}--qe}},this.decodeAndBlitFrameRGBA=function(R,V){var $=this.frameInfo(R),B=$.width*$.height,I=new Uint8Array(B);O5(t,$.data_offset,I,B);var Q=$.palette_offset,G=$.transparent_index;G===null&&(G=256);var _e=$.width,ve=n-_e,qe=_e,re=4*($.y*n+$.x),K=4*(($.y+$.height)*n+$.x),Z=re,oe=4*ve;$.interlaced===!0&&(oe+=4*n*7);for(var de=8,ye=0,he=I.length;ye<he;++ye){var X=I[ye];if(qe===0&&(qe=_e,(Z+=oe)>=K&&(oe=4*ve+4*n*(de-1),Z=re+(_e+ve)*(de<<1),de>>=1)),X===G)Z+=4;else{var Ae=t[Q+3*X],De=t[Q+3*X+1],Xe=t[Q+3*X+2];V[Z++]=Ae,V[Z++]=De,V[Z++]=Xe,V[Z++]=255}--qe}}}function O5(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,h=0,p=0,v=0,g=t[e++],x=new Int32Array(4096),E=null;;){for(;h<16&&g!==0;)p|=t[e++]<<h,h+=8,g===1?g=t[e++]:--g;if(h<l)break;var D=p&c;if(p>>=l,h-=l,D!==s){if(D===o)break;for(var M=D<a?D:E,A=0,z=M;z>s;)z=x[z]>>8,++A;var Y=z;if(v+A+(M!==D?1:0)>r)return void Cs.log("Warning, gif stream longer than expected.");n[v++]=Y;var ne=v+=A;for(M!==D&&(n[v++]=Y),z=M;A--;)z=x[z],n[--ne]=255&z,z>>=8;E!==null&&a<4096&&(x[a++]=E<<8|Y,a>=c+1&&l<12&&(++l,c=c<<1|1)),E=D}else a=o+1,c=(1<<(l=i+1))-1,E=null}return v!==r&&Cs.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function l2(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),h=new Array(64),p=new Array(65535),v=new Array(65535),g=new Array(64),x=new Array(64),E=[],D=0,M=7,A=new Array(64),z=new Array(64),Y=new Array(64),ne=new Array(256),ge=new Array(2048),pe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],O=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],J=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],U=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],B=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function I(re,K){for(var Z=0,oe=0,de=new Array,ye=1;ye<=16;ye++){for(var he=1;he<=re[ye];he++)de[K[oe]]=[],de[K[oe]][0]=Z,de[K[oe]][1]=ye,oe++,Z++;Z*=2}return de}function Q(re){for(var K=re[0],Z=re[1]-1;Z>=0;)K&1<<Z&&(D|=1<<M),Z--,--M<0&&(D==255?(G(255),G(0)):G(D),M=7,D=0)}function G(re){E.push(re)}function _e(re){G(re>>8&255),G(255&re)}function ve(re,K,Z,oe,de){for(var ye,he=de[0],X=de[240],Ae=function(et,Ee){var me,We,ct,pt,gt,st,qt,gn,Qe,lt,it=0;for(Qe=0;Qe<8;++Qe){me=et[it],We=et[it+1],ct=et[it+2],pt=et[it+3],gt=et[it+4],st=et[it+5],qt=et[it+6];var $t=me+(gn=et[it+7]),Jt=me-gn,Dn=We+qt,vn=We-qt,Tn=ct+st,Jn=ct-st,en=pt+gt,xn=pt-gt,Cn=$t+en,er=$t-en,pr=Dn+Tn,xr=Dn-Tn;et[it]=Cn+pr,et[it+4]=Cn-pr;var lr=.707106781*(xr+er);et[it+2]=er+lr,et[it+6]=er-lr;var Jr=.382683433*((Cn=xn+Jn)-(xr=vn+Jt)),Bs=.5411961*Cn+Jr,Di=1.306562965*xr+Jr,Fo=.707106781*(pr=Jn+vn),Rs=Jt+Fo,tr=Jt-Fo;et[it+5]=tr+Bs,et[it+3]=tr-Bs,et[it+1]=Rs+Di,et[it+7]=Rs-Di,it+=8}for(it=0,Qe=0;Qe<8;++Qe){me=et[it],We=et[it+8],ct=et[it+16],pt=et[it+24],gt=et[it+32],st=et[it+40],qt=et[it+48];var Fs=me+(gn=et[it+56]),jo=me-gn,gs=We+qt,qn=We-qt,Ze=ct+st,Ye=ct-st,Ut=pt+gt,En=pt-gt,On=Fs+Ut,Ln=Fs-Ut,jt=gs+Ze,$n=gs-Ze;et[it]=On+jt,et[it+32]=On-jt;var xt=.707106781*($n+Ln);et[it+16]=Ln+xt,et[it+48]=Ln-xt;var Kt=.382683433*((On=En+Ye)-($n=qn+jo)),Yn=.5411961*On+Kt,gr=1.306562965*$n+Kt,Sr=.707106781*(jt=Ye+qn),an=jo+Sr,nn=jo-Sr;et[it+40]=nn+Yn,et[it+24]=nn-Yn,et[it+8]=an+gr,et[it+56]=an-gr,it++}for(Qe=0;Qe<64;++Qe)lt=et[Qe]*Ee[Qe],g[Qe]=lt>0?lt+.5|0:lt-.5|0;return g}(re,K),De=0;De<64;++De)x[pe[De]]=Ae[De];var Xe=x[0]-Z;Z=x[0],Xe==0?Q(oe[0]):(Q(oe[v[ye=32767+Xe]]),Q(p[ye]));for(var fe=63;fe>0&&x[fe]==0;)fe--;if(fe==0)return Q(he),Z;for(var ee,se=1;se<=fe;){for(var le=se;x[se]==0&&se<=fe;)++se;var je=se-le;if(je>=16){ee=je>>4;for(var $e=1;$e<=ee;++$e)Q(X);je&=15}ye=32767+x[se],Q(de[(je<<4)+v[ye]]),Q(p[ye]),se++}return fe!=63&&Q(he),Z}function qe(re){re=Math.min(Math.max(re,1),100),s!=re&&(function(K){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],oe=0;oe<64;oe++){var de=o((Z[oe]*K+50)/100);de=Math.min(Math.max(de,1),255),a[pe[oe]]=de}for(var ye=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],he=0;he<64;he++){var X=o((ye[he]*K+50)/100);X=Math.min(Math.max(X,1),255),l[pe[he]]=X}for(var Ae=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],De=0,Xe=0;Xe<8;Xe++)for(var fe=0;fe<8;fe++)c[De]=1/(a[pe[De]]*Ae[Xe]*Ae[fe]*8),h[De]=1/(l[pe[De]]*Ae[Xe]*Ae[fe]*8),De++}(re<50?Math.floor(5e3/re):Math.floor(200-2*re)),s=re)}this.encode=function(re,K){K&&qe(K),E=new Array,D=0,M=7,_e(65496),_e(65504),_e(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),_e(1),_e(1),G(0),G(0),function(){_e(65499),_e(132),G(0);for(var We=0;We<64;We++)G(a[We]);G(1);for(var ct=0;ct<64;ct++)G(l[ct])}(),function(We,ct){_e(65472),_e(17),G(8),_e(ct),_e(We),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)}(re.width,re.height),function(){_e(65476),_e(418),G(0);for(var We=0;We<16;We++)G(O[We+1]);for(var ct=0;ct<=11;ct++)G(j[ct]);G(16);for(var pt=0;pt<16;pt++)G(J[pt+1]);for(var gt=0;gt<=161;gt++)G(U[gt]);G(1);for(var st=0;st<16;st++)G(R[st+1]);for(var qt=0;qt<=11;qt++)G(V[qt]);G(17);for(var gn=0;gn<16;gn++)G($[gn+1]);for(var Qe=0;Qe<=161;Qe++)G(B[Qe])}(),_e(65498),_e(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var Z=0,oe=0,de=0;D=0,M=7,this.encode.displayName="_encode_";for(var ye,he,X,Ae,De,Xe,fe,ee,se,le=re.data,je=re.width,$e=re.height,et=4*je,Ee=0;Ee<$e;){for(ye=0;ye<et;){for(De=et*Ee+ye,fe=-1,ee=0,se=0;se<64;se++)Xe=De+(ee=se>>3)*et+(fe=4*(7&se)),Ee+ee>=$e&&(Xe-=et*(Ee+1+ee-$e)),ye+fe>=et&&(Xe-=ye+fe-et+4),he=le[Xe++],X=le[Xe++],Ae=le[Xe++],A[se]=(ge[he]+ge[X+256>>0]+ge[Ae+512>>0]>>16)-128,z[se]=(ge[he+768>>0]+ge[X+1024>>0]+ge[Ae+1280>>0]>>16)-128,Y[se]=(ge[he+1280>>0]+ge[X+1536>>0]+ge[Ae+1792>>0]>>16)-128;Z=ve(A,c,Z,e,r),oe=ve(z,h,oe,n,i),de=ve(Y,h,de,n,i),ye+=32}Ee+=8}if(M>=0){var me=[];me[1]=M+1,me[0]=(1<<M+1)-1,Q(me)}return _e(65497),new Uint8Array(E)},t=t||50,function(){for(var re=String.fromCharCode,K=0;K<256;K++)ne[K]=re(K)}(),e=I(O,j),n=I(R,V),r=I(J,U),i=I($,B),function(){for(var re=1,K=2,Z=1;Z<=15;Z++){for(var oe=re;oe<K;oe++)v[32767+oe]=Z,p[32767+oe]=[],p[32767+oe][1]=Z,p[32767+oe][0]=oe;for(var de=-(K-1);de<=-re;de++)v[32767+de]=Z,p[32767+de]=[],p[32767+de][1]=Z,p[32767+de][0]=K-1+de;re<<=1,K<<=1}}(),function(){for(var re=0;re<256;re++)ge[re]=19595*re,ge[re+256>>0]=38470*re,ge[re+512>>0]=7471*re+32768,ge[re+768>>0]=-11059*re,ge[re+1024>>0]=-21709*re,ge[re+1280>>0]=32768*re+8421375,ge[re+1536>>0]=-27439*re,ge[re+1792>>0]=-5329*re}(),qe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function dc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function I5(t){function e(O){if(!O)throw Error("assert :P")}function n(O,j,J){for(var U=0;4>U;U++)if(O[j+U]!=J.charCodeAt(U))return!0;return!1}function r(O,j,J,U,R){for(var V=0;V<R;V++)O[j+V]=J[U+V]}function i(O,j,J,U){for(var R=0;R<U;R++)O[j+R]=J}function s(O){return new Int32Array(O)}function o(O,j){for(var J=[],U=0;U<O;U++)J.push(new j);return J}function a(O,j){var J=[];return function U(R,V,$){for(var B=$[V],I=0;I<B&&(R.push($.length>V+1?[]:new j),!($.length<V+1));I++)U(R[I],V+1,$)}(J,0,O),J}var l=function(){var O=this;function j(w,T){for(var q=1<<T-1>>>0;w&q;)q>>>=1;return q?(w&q-1)+q:w}function J(w,T,q,ce,Le){e(!(ce%q));do w[T+(ce-=q)]=Le;while(0<ce)}function U(w,T,q,ce,Le){if(e(2328>=Le),512>=Le)var Me=s(512);else if((Me=s(Le))==null)return 0;return function(Te,Oe,Re,Ke,vt,Rt){var Ft,Pt,Xt=Oe,Gt=1<<Re,yt=s(16),Lt=s(16);for(e(vt!=0),e(Ke!=null),e(Te!=null),e(0<Re),Pt=0;Pt<vt;++Pt){if(15<Ke[Pt])return 0;++yt[Ke[Pt]]}if(yt[0]==vt)return 0;for(Lt[1]=0,Ft=1;15>Ft;++Ft){if(yt[Ft]>1<<Ft)return 0;Lt[Ft+1]=Lt[Ft]+yt[Ft]}for(Pt=0;Pt<vt;++Pt)Ft=Ke[Pt],0<Ke[Pt]&&(Rt[Lt[Ft]++]=Pt);if(Lt[15]==1)return(Ke=new R).g=0,Ke.value=Rt[0],J(Te,Xt,1,Gt,Ke),Gt;var rn,fn=-1,sn=Gt-1,Rn=0,Nn=1,sr=1,d=1<<Re;for(Pt=0,Ft=1,vt=2;Ft<=Re;++Ft,vt<<=1){if(Nn+=sr<<=1,0>(sr-=yt[Ft]))return 0;for(;0<yt[Ft];--yt[Ft])(Ke=new R).g=Ft,Ke.value=Rt[Pt++],J(Te,Xt+Rn,vt,d,Ke),Rn=j(Rn,Ft)}for(Ft=Re+1,vt=2;15>=Ft;++Ft,vt<<=1){if(Nn+=sr<<=1,0>(sr-=yt[Ft]))return 0;for(;0<yt[Ft];--yt[Ft]){if(Ke=new R,(Rn&sn)!=fn){for(Xt+=d,rn=1<<(fn=Ft)-Re;15>fn&&!(0>=(rn-=yt[fn]));)++fn,rn<<=1;Gt+=d=1<<(rn=fn-Re),Te[Oe+(fn=Rn&sn)].g=rn+Re,Te[Oe+fn].value=Xt-Oe-fn}Ke.g=Ft-Re,Ke.value=Rt[Pt++],J(Te,Xt+(Rn>>Re),vt,d,Ke),Rn=j(Rn,Ft)}}return Nn!=2*Lt[15]-1?0:Gt}(w,T,q,ce,Le,Me)}function R(){this.value=this.g=0}function V(){this.value=this.g=0}function $(){this.G=o(5,R),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ks,V)}function B(w,T,q,ce){e(w!=null),e(T!=null),e(2147483648>ce),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=T,w.pa=q,w.Jd=T,w.Yc=q+ce,w.Zc=4<=ce?q+ce-4+1:q,ye(w)}function I(w,T){for(var q=0;0<T--;)q|=X(w,128)<<T;return q}function Q(w,T){var q=I(w,T);return he(w)?-q:q}function G(w,T,q,ce){var Le,Me=0;for(e(w!=null),e(T!=null),e(4294967288>ce),w.Sb=ce,w.Ra=0,w.u=0,w.h=0,4<ce&&(ce=4),Le=0;Le<ce;++Le)Me+=T[q+Le]<<8*Le;w.Ra=Me,w.bb=ce,w.oa=T,w.pa=q}function _e(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Vo-8>>>0,++w.bb,w.u-=8;Z(w)&&(w.h=1,w.u=0)}function ve(w,T){if(e(0<=T),!w.h&&T<=sa){var q=K(w)&Ba[T];return w.u+=T,_e(w),q}return w.h=1,w.u=0}function qe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function re(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function K(w){return w.Ra>>>(w.u&Vo-1)>>>0}function Z(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Vo}function oe(w,T){w.u=T,w.h=Z(w)}function de(w){w.u>=zl&&(e(w.u>=zl),_e(w))}function ye(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function he(w){return I(w,1)}function X(w,T){var q=w.Ca;0>w.b&&ye(w);var ce=w.b,Le=q*T>>>8,Me=(w.I>>>ce>Le)+0;for(Me?(q-=Le,w.I-=Le+1<<ce>>>0):q=Le+1,ce=q,Le=0;256<=ce;)Le+=8,ce>>=8;return ce=7^Le+lo[ce],w.b-=ce,w.Ca=(q<<ce)-1,Me}function Ae(w,T,q){w[T+0]=q>>24&255,w[T+1]=q>>16&255,w[T+2]=q>>8&255,w[T+3]=q>>0&255}function De(w,T){return w[T+0]<<0|w[T+1]<<8}function Xe(w,T){return De(w,T)|w[T+2]<<16}function fe(w,T){return De(w,T)|De(w,T+2)<<16}function ee(w,T){var q=1<<T;return e(w!=null),e(0<T),w.X=s(q),w.X==null?0:(w.Mb=32-T,w.Xa=T,1)}function se(w,T){e(w!=null),e(T!=null),e(w.Xa==T.Xa),r(T.X,0,w.X,0,1<<T.Xa)}function le(){this.X=[],this.Xa=this.Mb=0}function je(w,T,q,ce){e(q!=null),e(ce!=null);var Le=q[0],Me=ce[0];return Le==0&&(Le=(w*Me+T/2)/T),Me==0&&(Me=(T*Le+w/2)/w),0>=Le||0>=Me?0:(q[0]=Le,ce[0]=Me,1)}function $e(w,T){return w+(1<<T)-1>>>T}function et(w,T){return((4278255360&w)+(4278255360&T)>>>0&4278255360)+((16711935&w)+(16711935&T)>>>0&16711935)>>>0}function Ee(w,T){O[T]=function(q,ce,Le,Me,Te,Oe,Re){var Ke;for(Ke=0;Ke<Te;++Ke){var vt=O[w](Oe[Re+Ke-1],Le,Me+Ke);Oe[Re+Ke]=et(q[ce+Ke],vt)}}}function me(){this.ud=this.hd=this.jd=0}function We(w,T){return((4278124286&(w^T))>>>1)+(w&T)>>>0}function ct(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function pt(w,T){return ct(w+(w-T+.5>>1))}function gt(w,T,q){return Math.abs(T-q)-Math.abs(w-q)}function st(w,T,q,ce,Le,Me,Te){for(ce=Me[Te-1],q=0;q<Le;++q)Me[Te+q]=ce=et(w[T+q],ce)}function qt(w,T,q,ce,Le){var Me;for(Me=0;Me<q;++Me){var Te=w[T+Me],Oe=Te>>8&255,Re=16711935&(Re=(Re=16711935&Te)+((Oe<<16)+Oe));ce[Le+Me]=(4278255360&Te)+Re>>>0}}function gn(w,T){T.jd=w>>0&255,T.hd=w>>8&255,T.ud=w>>16&255}function Qe(w,T,q,ce,Le,Me){var Te;for(Te=0;Te<ce;++Te){var Oe=T[q+Te],Re=Oe>>>8,Ke=Oe,vt=255&(vt=(vt=Oe>>>16)+((w.jd<<24>>24)*(Re<<24>>24)>>>5));Ke=255&(Ke=(Ke=Ke+((w.hd<<24>>24)*(Re<<24>>24)>>>5))+((w.ud<<24>>24)*(vt<<24>>24)>>>5)),Le[Me+Te]=(4278255360&Oe)+(vt<<16)+Ke}}function lt(w,T,q,ce,Le){O[T]=function(Me,Te,Oe,Re,Ke,vt,Rt,Ft,Pt){for(Re=Rt;Re<Ft;++Re)for(Rt=0;Rt<Pt;++Rt)Ke[vt++]=Le(Oe[ce(Me[Te++])])},O[w]=function(Me,Te,Oe,Re,Ke,vt,Rt){var Ft=8>>Me.b,Pt=Me.Ea,Xt=Me.K[0],Gt=Me.w;if(8>Ft)for(Me=(1<<Me.b)-1,Gt=(1<<Ft)-1;Te<Oe;++Te){var yt,Lt=0;for(yt=0;yt<Pt;++yt)yt&Me||(Lt=ce(Re[Ke++])),vt[Rt++]=Le(Xt[Lt&Gt]),Lt>>=Ft}else O["VP8LMapColor"+q](Re,Ke,Xt,Gt,vt,Rt,Te,Oe,Pt)}}function it(w,T,q,ce,Le){for(q=T+q;T<q;){var Me=w[T++];ce[Le++]=Me>>16&255,ce[Le++]=Me>>8&255,ce[Le++]=Me>>0&255}}function $t(w,T,q,ce,Le){for(q=T+q;T<q;){var Me=w[T++];ce[Le++]=Me>>16&255,ce[Le++]=Me>>8&255,ce[Le++]=Me>>0&255,ce[Le++]=Me>>24&255}}function Jt(w,T,q,ce,Le){for(q=T+q;T<q;){var Me=(Te=w[T++])>>16&240|Te>>12&15,Te=Te>>0&240|Te>>28&15;ce[Le++]=Me,ce[Le++]=Te}}function Dn(w,T,q,ce,Le){for(q=T+q;T<q;){var Me=(Te=w[T++])>>16&248|Te>>13&7,Te=Te>>5&224|Te>>3&31;ce[Le++]=Me,ce[Le++]=Te}}function vn(w,T,q,ce,Le){for(q=T+q;T<q;){var Me=w[T++];ce[Le++]=Me>>0&255,ce[Le++]=Me>>8&255,ce[Le++]=Me>>16&255}}function Tn(w,T,q,ce,Le,Me){if(Me==0)for(q=T+q;T<q;)Ae(ce,((Me=w[T++])[0]>>24|Me[1]>>8&65280|Me[2]<<8&16711680|Me[3]<<24)>>>0),Le+=32;else r(ce,Le,w,T,q)}function Jn(w,T){O[T][0]=O[w+"0"],O[T][1]=O[w+"1"],O[T][2]=O[w+"2"],O[T][3]=O[w+"3"],O[T][4]=O[w+"4"],O[T][5]=O[w+"5"],O[T][6]=O[w+"6"],O[T][7]=O[w+"7"],O[T][8]=O[w+"8"],O[T][9]=O[w+"9"],O[T][10]=O[w+"10"],O[T][11]=O[w+"11"],O[T][12]=O[w+"12"],O[T][13]=O[w+"13"],O[T][14]=O[w+"0"],O[T][15]=O[w+"0"]}function en(w){return w==Ks||w==Zs||w==Ca||w==u}function xn(){this.eb=[],this.size=this.A=this.fb=0}function Cn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function er(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new xn,this.f.kb=new Cn,this.sd=null}function pr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function xr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function lr(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function Jr(w,T){var q=w.T,ce=T.ba.f.RGBA,Le=ce.eb,Me=ce.fb+w.ka*ce.A,Te=go[T.ba.S],Oe=w.y,Re=w.O,Ke=w.f,vt=w.N,Rt=w.ea,Ft=w.W,Pt=T.cc,Xt=T.dc,Gt=T.Mc,yt=T.Nc,Lt=w.ka,rn=w.ka+w.T,fn=w.U,sn=fn+1>>1;for(Lt==0?Te(Oe,Re,null,null,Ke,vt,Rt,Ft,Ke,vt,Rt,Ft,Le,Me,null,null,fn):(Te(T.ec,T.fc,Oe,Re,Pt,Xt,Gt,yt,Ke,vt,Rt,Ft,Le,Me-ce.A,Le,Me,fn),++q);Lt+2<rn;Lt+=2)Pt=Ke,Xt=vt,Gt=Rt,yt=Ft,vt+=w.Rc,Ft+=w.Rc,Me+=2*ce.A,Te(Oe,(Re+=2*w.fa)-w.fa,Oe,Re,Pt,Xt,Gt,yt,Ke,vt,Rt,Ft,Le,Me-ce.A,Le,Me,fn);return Re+=w.fa,w.j+rn<w.o?(r(T.ec,T.fc,Oe,Re,fn),r(T.cc,T.dc,Ke,vt,sn),r(T.Mc,T.Nc,Rt,Ft,sn),q--):1&rn||Te(Oe,Re,null,null,Ke,vt,Rt,Ft,Ke,vt,Rt,Ft,Le,Me+ce.A,null,null,fn),q}function Bs(w,T,q){var ce=w.F,Le=[w.J];if(ce!=null){var Me=w.U,Te=T.ba.S,Oe=Te==Sa||Te==Ca;T=T.ba.f.RGBA;var Re=[0],Ke=w.ka;Re[0]=w.T,w.Kb&&(Ke==0?--Re[0]:(--Ke,Le[0]-=w.width),w.j+w.ka+w.T==w.o&&(Re[0]=w.o-w.j-Ke));var vt=T.eb;Ke=T.fb+Ke*T.A,w=Fi(ce,Le[0],w.width,Me,Re,vt,Ke+(Oe?0:3),T.A),e(q==Re),w&&en(Te)&&Ys(vt,Ke,Oe,Me,Re,T.A)}return 0}function Di(w){var T=w.ma,q=T.ba.S,ce=11>q,Le=q==wr||q==nl||q==Sa||q==Mo||q==12||en(q);if(T.memory=null,T.Ib=null,T.Jb=null,T.Nd=null,!Qu(T.Oa,w,Le?11:12))return 0;if(Le&&en(q)&&hn(),w.da)alert("todo:use_scaling");else{if(ce){if(T.Ib=lr,w.Kb){if(q=w.U+1>>1,T.memory=s(w.U+2*q),T.memory==null)return 0;T.ec=T.memory,T.fc=0,T.cc=T.ec,T.dc=T.fc+w.U,T.Mc=T.cc,T.Nc=T.dc+q,T.Ib=Jr,hn()}}else alert("todo:EmitYUV");Le&&(T.Jb=Bs,ce&&Mt())}if(ce&&!Tc){for(w=0;256>w;++w)Ud[w]=89858*(w-128)+Sl>>Vd,Hd[w]=-22014*(w-128)+Sl,Up[w]=-45773*(w-128),mu[w]=113618*(w-128)+Sl>>Vd;for(w=ad;w<Dh;++w)T=76283*(w-16)+Sl>>Vd,Wd[w-ad]=Kr(T,255),kf[w-ad]=Kr(T+8>>4,15);Tc=1}return 1}function Fo(w){var T=w.ma,q=w.U,ce=w.T;return e(!(1&w.ka)),0>=q||0>=ce?0:(q=T.Ib(w,T),T.Jb!=null&&T.Jb(w,T,q),T.Dc+=q,1)}function Rs(w){w.ma.memory=null}function tr(w,T,q,ce){return ve(w,8)!=47?0:(T[0]=ve(w,14)+1,q[0]=ve(w,14)+1,ce[0]=ve(w,1),ve(w,3)!=0?0:!w.h)}function Fs(w,T){if(4>w)return w+1;var q=w-2>>1;return(2+(1&w)<<q)+ve(T,q)+1}function jo(w,T){return 120<T?T-120:1<=(q=((q=ut[T-1])>>4)*w+(8-(15&q)))?q:1;var q}function gs(w,T,q){var ce=K(q),Le=w[T+=255&ce].g-8;return 0<Le&&(oe(q,q.u+8),ce=K(q),T+=w[T].value,T+=ce&(1<<Le)-1),oe(q,q.u+w[T].g),w[T].value}function qn(w,T,q){return q.g+=w.g,q.value+=w.value<<T>>>0,e(8>=q.g),w.g}function Ze(w,T,q){var ce=w.xc;return e((T=ce==0?0:w.vc[w.md*(q>>ce)+(T>>ce)])<w.Wb),w.Ya[T]}function Ye(w,T,q,ce){var Le=w.ab,Me=w.c*T,Te=w.C;T=Te+T;var Oe=q,Re=ce;for(ce=w.Ta,q=w.Ua;0<Le--;){var Ke=w.gc[Le],vt=Te,Rt=T,Ft=Oe,Pt=Re,Xt=(Re=ce,Oe=q,Ke.Ea);switch(e(vt<Rt),e(Rt<=Ke.nc),Ke.hc){case 2:Ac(Ft,Pt,(Rt-vt)*Xt,Re,Oe);break;case 0:var Gt=vt,yt=Rt,Lt=Re,rn=Oe,fn=(d=Ke).Ea;Gt==0&&(Co(Ft,Pt,null,null,1,Lt,rn),st(Ft,Pt+1,0,0,fn-1,Lt,rn+1),Pt+=fn,rn+=fn,++Gt);for(var sn=1<<d.b,Rn=sn-1,Nn=$e(fn,d.b),sr=d.K,d=d.w+(Gt>>d.b)*Nn;Gt<yt;){var m=sr,_=d,C=1;for(Eo(Ft,Pt,Lt,rn-fn,1,Lt,rn);C<fn;){var k=(C&~Rn)+sn;k>fn&&(k=fn),(0,Ja[m[_++]>>8&15])(Ft,Pt+ +C,Lt,rn+C-fn,k-C,Lt,rn+C),C=k}Pt+=fn,rn+=fn,++Gt&Rn||(d+=Nn)}Rt!=Ke.nc&&r(Re,Oe-Xt,Re,Oe+(Rt-vt-1)*Xt,Xt);break;case 1:for(Xt=Ft,yt=Pt,fn=(Ft=Ke.Ea)-(rn=Ft&~(Lt=(Pt=1<<Ke.b)-1)),Gt=$e(Ft,Ke.b),sn=Ke.K,Ke=Ke.w+(vt>>Ke.b)*Gt;vt<Rt;){for(Rn=sn,Nn=Ke,sr=new me,d=yt+rn,m=yt+Ft;yt<d;)gn(Rn[Nn++],sr),Qa(sr,Xt,yt,Pt,Re,Oe),yt+=Pt,Oe+=Pt;yt<m&&(gn(Rn[Nn++],sr),Qa(sr,Xt,yt,fn,Re,Oe),yt+=fn,Oe+=fn),++vt&Lt||(Ke+=Gt)}break;case 3:if(Ft==Re&&Pt==Oe&&0<Ke.b){for(yt=Re,Ft=Xt=Oe+(Rt-vt)*Xt-(rn=(Rt-vt)*$e(Ke.Ea,Ke.b)),Pt=Re,Lt=Oe,Gt=[],rn=(fn=rn)-1;0<=rn;--rn)Gt[rn]=Pt[Lt+rn];for(rn=fn-1;0<=rn;--rn)yt[Ft+rn]=Gt[rn];zs(Ke,vt,Rt,Re,Xt,Re,Oe)}else zs(Ke,vt,Rt,Ft,Pt,Re,Oe)}Oe=ce,Re=q}Re!=q&&r(ce,q,Oe,Re,Me)}function Ut(w,T){var q=w.V,ce=w.Ba+w.c*w.C,Le=T-w.C;if(e(T<=w.l.o),e(16>=Le),0<Le){var Me=w.l,Te=w.Ta,Oe=w.Ua,Re=Me.width;if(Ye(w,Le,q,ce),Le=Oe=[Oe],e((q=w.C)<(ce=T)),e(Me.v<Me.va),ce>Me.o&&(ce=Me.o),q<Me.j){var Ke=Me.j-q;q=Me.j,Le[0]+=Ke*Re}if(q>=ce?q=0:(Le[0]+=4*Me.v,Me.ka=q-Me.j,Me.U=Me.va-Me.v,Me.T=ce-q,q=1),q){if(Oe=Oe[0],11>(q=w.ca).S){var vt=q.f.RGBA,Rt=(ce=q.S,Le=Me.U,Me=Me.T,Ke=vt.eb,vt.A),Ft=Me;for(vt=vt.fb+w.Ma*vt.A;0<Ft--;){var Pt=Te,Xt=Oe,Gt=Le,yt=Ke,Lt=vt;switch(ce){case Ho:ho(Pt,Xt,Gt,yt,Lt);break;case wr:qs(Pt,Xt,Gt,yt,Lt);break;case Ks:qs(Pt,Xt,Gt,yt,Lt),Ys(yt,Lt,0,Gt,1,0);break;case tl:fo(Pt,Xt,Gt,yt,Lt);break;case nl:Tn(Pt,Xt,Gt,yt,Lt,1);break;case Zs:Tn(Pt,Xt,Gt,yt,Lt,1),Ys(yt,Lt,0,Gt,1,0);break;case Sa:Tn(Pt,Xt,Gt,yt,Lt,0);break;case Ca:Tn(Pt,Xt,Gt,yt,Lt,0),Ys(yt,Lt,1,Gt,1,0);break;case Mo:Ra(Pt,Xt,Gt,yt,Lt);break;case u:Ra(Pt,Xt,Gt,yt,Lt),ki(yt,Lt,Gt,1,0);break;case sd:oa(Pt,Xt,Gt,yt,Lt);break;default:e(0)}Oe+=Re,vt+=Rt}w.Ma+=Me}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=q.height)}}w.C=T,e(w.C<=w.i)}function En(w){var T;if(0<w.ua)return 0;for(T=0;T<w.Wb;++T){var q=w.Ya[T].G,ce=w.Ya[T].H;if(0<q[1][ce[1]+0].g||0<q[2][ce[2]+0].g||0<q[3][ce[3]+0].g)return 0}return 1}function On(w,T,q,ce,Le,Me){if(w.Z!=0){var Te=w.qd,Oe=w.rd;for(e(wi[w.Z]!=null);T<q;++T)wi[w.Z](Te,Oe,ce,Le,ce,Le,Me),Te=ce,Oe=Le,Le+=Me;w.qd=Te,w.rd=Oe}}function Ln(w,T){var q=w.l.ma,ce=q.Z==0||q.Z==1?w.l.j:w.C;if(ce=w.C<ce?ce:w.C,e(T<=w.l.o),T>ce){var Le=w.l.width,Me=q.ca,Te=q.tb+Le*ce,Oe=w.V,Re=w.Ba+w.c*ce,Ke=w.gc;e(w.ab==1),e(Ke[0].hc==3),uo(Ke[0],ce,T,Oe,Re,Me,Te),On(q,ce,T,Me,Te,Le)}w.C=w.Ma=T}function jt(w,T,q,ce,Le,Me,Te){var Oe=w.$/ce,Re=w.$%ce,Ke=w.m,vt=w.s,Rt=q+w.$,Ft=Rt;Le=q+ce*Le;var Pt=q+ce*Me,Xt=280+vt.ua,Gt=w.Pb?Oe:16777216,yt=0<vt.ua?vt.Wa:null,Lt=vt.wc,rn=Rt<Pt?Ze(vt,Re,Oe):null;e(w.C<Me),e(Pt<=Le);var fn=!1;e:for(;;){for(;fn||Rt<Pt;){var sn=0;if(Oe>=Gt){var Rn=Rt-q;e((Gt=w).Pb),Gt.wd=Gt.m,Gt.xd=Rn,0<Gt.s.ua&&se(Gt.s.Wa,Gt.s.vb),Gt=Oe+Wt}if(Re&Lt||(rn=Ze(vt,Re,Oe)),e(rn!=null),rn.Qb&&(T[Rt]=rn.qb,fn=!0),!fn)if(de(Ke),rn.jc){sn=Ke,Rn=T;var Nn=Rt,sr=rn.pd[K(sn)&ks-1];e(rn.jc),256>sr.g?(oe(sn,sn.u+sr.g),Rn[Nn]=sr.value,sn=0):(oe(sn,sn.u+sr.g-256),e(256<=sr.value),sn=sr.value),sn==0&&(fn=!0)}else sn=gs(rn.G[0],rn.H[0],Ke);if(Ke.h)break;if(fn||256>sn){if(!fn)if(rn.nd)T[Rt]=(rn.qb|sn<<8)>>>0;else{if(de(Ke),fn=gs(rn.G[1],rn.H[1],Ke),de(Ke),Rn=gs(rn.G[2],rn.H[2],Ke),Nn=gs(rn.G[3],rn.H[3],Ke),Ke.h)break;T[Rt]=(Nn<<24|fn<<16|sn<<8|Rn)>>>0}if(fn=!1,++Rt,++Re>=ce&&(Re=0,++Oe,Te!=null&&Oe<=Me&&!(Oe%16)&&Te(w,Oe),yt!=null))for(;Ft<Rt;)sn=T[Ft++],yt.X[(506832829*sn&4294967295)>>>yt.Mb]=sn}else if(280>sn){if(sn=Fs(sn-256,Ke),Rn=gs(rn.G[4],rn.H[4],Ke),de(Ke),Rn=jo(ce,Rn=Fs(Rn,Ke)),Ke.h)break;if(Rt-q<Rn||Le-Rt<sn)break e;for(Nn=0;Nn<sn;++Nn)T[Rt+Nn]=T[Rt+Nn-Rn];for(Rt+=sn,Re+=sn;Re>=ce;)Re-=ce,++Oe,Te!=null&&Oe<=Me&&!(Oe%16)&&Te(w,Oe);if(e(Rt<=Le),Re&Lt&&(rn=Ze(vt,Re,Oe)),yt!=null)for(;Ft<Rt;)sn=T[Ft++],yt.X[(506832829*sn&4294967295)>>>yt.Mb]=sn}else{if(!(sn<Xt))break e;for(fn=sn-280,e(yt!=null);Ft<Rt;)sn=T[Ft++],yt.X[(506832829*sn&4294967295)>>>yt.Mb]=sn;sn=Rt,e(!(fn>>>(Rn=yt).Xa)),T[sn]=Rn.X[fn],fn=!0}fn||e(Ke.h==Z(Ke))}if(w.Pb&&Ke.h&&Rt<Le)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&se(w.s.vb,w.s.Wa);else{if(Ke.h)break e;Te!=null&&Te(w,Oe>Me?Me:Oe),w.a=0,w.$=Rt-q}return 1}return w.a=3,0}function $n(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var T=w.Wa;T!=null&&(T.X=null),w.vb=null,e(w!=null)}function xt(){var w=new Rl;return w==null?null:(w.a=0,w.xb=Nu,Jn("Predictor","VP8LPredictors"),Jn("Predictor","VP8LPredictors_C"),Jn("PredictorAdd","VP8LPredictorsAdd"),Jn("PredictorAdd","VP8LPredictorsAdd_C"),Ac=qt,Qa=Qe,ho=it,qs=$t,Ra=Jt,oa=Dn,fo=vn,O.VP8LMapColor32b=Xa,O.VP8LMapColor8b=co,w)}function Kt(w,T,q,ce,Le){var Me=1,Te=[w],Oe=[T],Re=ce.m,Ke=ce.s,vt=null,Rt=0;e:for(;;){if(q)for(;Me&&ve(Re,1);){var Ft=Te,Pt=Oe,Xt=ce,Gt=1,yt=Xt.m,Lt=Xt.gc[Xt.ab],rn=ve(yt,2);if(Xt.Oc&1<<rn)Me=0;else{switch(Xt.Oc|=1<<rn,Lt.hc=rn,Lt.Ea=Ft[0],Lt.nc=Pt[0],Lt.K=[null],++Xt.ab,e(4>=Xt.ab),rn){case 0:case 1:Lt.b=ve(yt,3)+2,Gt=Kt($e(Lt.Ea,Lt.b),$e(Lt.nc,Lt.b),0,Xt,Lt.K),Lt.K=Lt.K[0];break;case 3:var fn,sn=ve(yt,8)+1,Rn=16<sn?0:4<sn?1:2<sn?2:3;if(Ft[0]=$e(Lt.Ea,Rn),Lt.b=Rn,fn=Gt=Kt(sn,1,0,Xt,Lt.K)){var Nn,sr=sn,d=Lt,m=1<<(8>>d.b),_=s(m);if(_==null)fn=0;else{var C=d.K[0],k=d.w;for(_[0]=d.K[0][0],Nn=1;Nn<1*sr;++Nn)_[Nn]=et(C[k+Nn],_[Nn-1]);for(;Nn<4*m;++Nn)_[Nn]=0;d.K[0]=null,d.K[0]=_,fn=1}}Gt=fn;break;case 2:break;default:e(0)}Me=Gt}}if(Te=Te[0],Oe=Oe[0],Me&&ve(Re,1)&&!(Me=1<=(Rt=ve(Re,4))&&11>=Rt)){ce.a=3;break e}var H;if(H=Me)t:{var te,ae,be,Ce=ce,rt=Te,Ge=Oe,wt=Rt,It=q,tn=Ce.m,_n=Ce.s,Mn=[null],yr=1,nt=0,ot=Nt[wt];n:for(;;){if(It&&ve(tn,1)){var mt=ve(tn,3)+2,zt=$e(rt,mt),Et=$e(Ge,mt),Bt=zt*Et;if(!Kt(zt,Et,0,Ce,Mn))break n;for(Mn=Mn[0],_n.xc=mt,te=0;te<Bt;++te){var we=Mn[te]>>8&65535;Mn[te]=we,we>=yr&&(yr=we+1)}}if(tn.h)break n;for(ae=0;5>ae;++ae){var ke=W[ae];!ae&&0<wt&&(ke+=1<<wt),nt<ke&&(nt=ke)}var ze=o(yr*ot,R),Fe=yr,Ue=o(Fe,$);if(Ue==null)var He=null;else e(65536>=Fe),He=Ue;var dt=s(nt);if(He==null||dt==null||ze==null){Ce.a=1;break n}var ht=ze;for(te=be=0;te<yr;++te){var bt=He[te],At=bt.G,Tt=bt.H,on=0,Wn=1,Kn=0;for(ae=0;5>ae;++ae){ke=W[ae],At[ae]=ht,Tt[ae]=be,!ae&&0<wt&&(ke+=1<<wt);i:{var or,xi=ke,ji=Ce,li=dt,Gi=ht,qo=be,nc=0,Ha=ji.m,Nh=ve(Ha,1);if(i(li,0,0,xi),Nh){var Cl=ve(Ha,1)+1,Dc=ve(Ha,1),Wa=ve(Ha,Dc==0?1:8);li[Wa]=1,Cl==2&&(li[Wa=ve(Ha,8)]=1);var mo=1}else{var Ss=s(19),Of=ve(Ha,4)+4;if(19<Of){ji.a=3;var Oh=0;break i}for(or=0;or<Of;++or)Ss[Pe[or]]=ve(Ha,3);var Ih=void 0,Bh=void 0,If=ji,gi=Ss,Bf=xi,$m=li,ld=0,rc=If.m,Vm=8,Um=o(128,R);r:for(;U(Um,0,7,gi,19);){if(ve(rc,1)){var $l=2+2*ve(rc,3);if((Ih=2+ve(rc,$l))>Bf)break r}else Ih=Bf;for(Bh=0;Bh<Bf&&Ih--;){de(rc);var Hm=Um[0+(127&K(rc))];oe(rc,rc.u+Hm.g);var ic=Hm.value;if(16>ic)$m[Bh++]=ic,ic!=0&&(Vm=ic);else{var Hp=ic==16,Wp=ic-16,Wm=P[Wp],il=ve(rc,y[Wp])+Wm;if(Bh+il>Bf)break r;for(var Nc=Hp?Vm:0;0<il--;)$m[Bh++]=Nc}}ld=1;break r}ld||(If.a=3),mo=ld}(mo=mo&&!Ha.h)&&(nc=U(Gi,qo,8,li,xi)),mo&&nc!=0?Oh=nc:(ji.a=3,Oh=0)}if(Oh==0)break n;if(Wn&&ue[ae]==1&&(Wn=ht[be].g==0),on+=ht[be].g,be+=Oh,3>=ae){var ud,Rf=dt[0];for(ud=1;ud<ke;++ud)dt[ud]>Rf&&(Rf=dt[ud]);Kn+=Rf}}if(bt.nd=Wn,bt.Qb=0,Wn&&(bt.qb=(At[3][Tt[3]+0].value<<24|At[1][Tt[1]+0].value<<16|At[2][Tt[2]+0].value)>>>0,on==0&&256>At[0][Tt[0]+0].value&&(bt.Qb=1,bt.qb+=At[0][Tt[0]+0].value<<8)),bt.jc=!bt.Qb&&6>Kn,bt.jc){var cd,Ou=bt;for(cd=0;cd<ks;++cd){var Iu=cd,sc=Ou.pd[Iu],Gd=Ou.G[0][Ou.H[0]+Iu];256<=Gd.value?(sc.g=Gd.g+256,sc.value=Gd.value):(sc.g=0,sc.value=0,Iu>>=qn(Gd,8,sc),Iu>>=qn(Ou.G[1][Ou.H[1]+Iu],16,sc),Iu>>=qn(Ou.G[2][Ou.H[2]+Iu],0,sc),qn(Ou.G[3][Ou.H[3]+Iu],24,sc))}}}_n.vc=Mn,_n.Wb=yr,_n.Ya=He,_n.yc=ze,H=1;break t}H=0}if(!(Me=H)){ce.a=3;break e}if(0<Rt){if(Ke.ua=1<<Rt,!ee(Ke.Wa,Rt)){ce.a=1,Me=0;break e}}else Ke.ua=0;var Rh=ce,oc=Te,Qy=Oe,Bu=Rh.s,Ff=Bu.xc;if(Rh.c=oc,Rh.i=Qy,Bu.md=$e(oc,Ff),Bu.wc=Ff==0?-1:(1<<Ff)-1,q){ce.xb=Th;break e}if((vt=s(Te*Oe))==null){ce.a=1,Me=0;break e}Me=(Me=jt(ce,vt,0,Te,Oe,Oe,null))&&!Re.h;break e}return Me?(Le!=null?Le[0]=vt:(e(vt==null),e(q)),ce.$=0,q||$n(Ke)):$n(Ke),Me}function Yn(w,T){var q=w.c*w.i,ce=q+T+16*T;return e(w.c<=T),w.V=s(ce),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+q+T,1)}function gr(w,T){var q=w.C,ce=T-q,Le=w.V,Me=w.Ba+w.c*q;for(e(T<=w.l.o);0<ce;){var Te=16<ce?16:ce,Oe=w.l.ma,Re=w.l.width,Ke=Re*Te,vt=Oe.ca,Rt=Oe.tb+Re*q,Ft=w.Ta,Pt=w.Ua;Ye(w,Te,Le,Me),Ls(Ft,Pt,vt,Rt,Ke),On(Oe,q,q+Te,vt,Rt,Re),ce-=Te,Le+=Te*w.c,q+=Te}e(q==T),w.C=w.Ma=T}function Sr(){this.ub=this.yd=this.td=this.Rb=0}function an(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function nn(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function $r(){this.Yb=function(){var w=[];return function T(q,ce,Le){for(var Me=Le[ce],Te=0;Te<Me&&(q.push(Le.length>ce+1?[]:0),!(Le.length<ce+1));Te++)T(q[Te],ce+1,Le)}(w,0,[3,11]),w}()}function Qr(){this.jb=s(3),this.Wc=a([4,8],$r),this.Xc=a([4,17],$r)}function os(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function si(){this.ld=this.La=this.dd=this.tc=0}function mr(){this.Na=this.la=0}function Fr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ei(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Pr(){this.uc=this.M=this.Nb=0,this.wa=Array(new si),this.Y=0,this.ya=Array(new ei),this.aa=0,this.l=new Vr}function cn(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Xi(){this.cb=this.a=0,this.sc="",this.m=new qe,this.Od=new Sr,this.Kc=new an,this.ed=new os,this.Qa=new nn,this.Ic=this.$c=this.Aa=0,this.D=new Pr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,qe),this.ia=0,this.pb=o(4,Fr),this.Pa=new Qr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new cn),this.Hd=0,this.rb=Array(new mr),this.sb=0,this.wa=Array(new si),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ei),this.L=this.aa=0,this.gd=a([4,2],si),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Vr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ur(){var w=new Xi;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,ir||(ir=br)),w}function Un(w,T,q){return w.a==0&&(w.a=T,w.sc=q,w.cb=0),0}function Ni(w,T,q){return 3<=q&&w[T+0]==157&&w[T+1]==1&&w[T+2]==42}function kr(w,T){if(w==null)return 0;if(w.a=0,w.sc="OK",T==null)return Un(w,2,"null VP8Io passed to VP8GetHeaders()");var q=T.data,ce=T.w,Le=T.ha;if(4>Le)return Un(w,7,"Truncated header.");var Me=q[ce+0]|q[ce+1]<<8|q[ce+2]<<16,Te=w.Od;if(Te.Rb=!(1&Me),Te.td=Me>>1&7,Te.yd=Me>>4&1,Te.ub=Me>>5,3<Te.td)return Un(w,3,"Incorrect keyframe parameters.");if(!Te.yd)return Un(w,4,"Frame not displayable.");ce+=3,Le-=3;var Oe=w.Kc;if(Te.Rb){if(7>Le)return Un(w,7,"cannot parse picture header");if(!Ni(q,ce,Le))return Un(w,3,"Bad code word");Oe.c=16383&(q[ce+4]<<8|q[ce+3]),Oe.Td=q[ce+4]>>6,Oe.i=16383&(q[ce+6]<<8|q[ce+5]),Oe.Ud=q[ce+6]>>6,ce+=7,Le-=7,w.za=Oe.c+15>>4,w.Ub=Oe.i+15>>4,T.width=Oe.c,T.height=Oe.i,T.Da=0,T.j=0,T.v=0,T.va=T.width,T.o=T.height,T.da=0,T.ib=T.width,T.hb=T.height,T.U=T.width,T.T=T.height,i((Me=w.Pa).jb,0,255,Me.jb.length),e((Me=w.Qa)!=null),Me.Cb=0,Me.Bb=0,Me.Fb=1,i(Me.Zb,0,0,Me.Zb.length),i(Me.Lb,0,0,Me.Lb)}if(Te.ub>Le)return Un(w,7,"bad partition length");B(Me=w.m,q,ce,Te.ub),ce+=Te.ub,Le-=Te.ub,Te.Rb&&(Oe.Ld=he(Me),Oe.Kd=he(Me)),Oe=w.Qa;var Re,Ke=w.Pa;if(e(Me!=null),e(Oe!=null),Oe.Cb=he(Me),Oe.Cb){if(Oe.Bb=he(Me),he(Me)){for(Oe.Fb=he(Me),Re=0;4>Re;++Re)Oe.Zb[Re]=he(Me)?Q(Me,7):0;for(Re=0;4>Re;++Re)Oe.Lb[Re]=he(Me)?Q(Me,6):0}if(Oe.Bb)for(Re=0;3>Re;++Re)Ke.jb[Re]=he(Me)?I(Me,8):255}else Oe.Bb=0;if(Me.Ka)return Un(w,3,"cannot parse segment header");if((Oe=w.ed).zd=he(Me),Oe.Tb=I(Me,6),Oe.wb=I(Me,3),Oe.Pc=he(Me),Oe.Pc&&he(Me)){for(Ke=0;4>Ke;++Ke)he(Me)&&(Oe.vd[Ke]=Q(Me,6));for(Ke=0;4>Ke;++Ke)he(Me)&&(Oe.od[Ke]=Q(Me,6))}if(w.L=Oe.Tb==0?0:Oe.zd?1:2,Me.Ka)return Un(w,3,"cannot parse filter header");var vt=Le;if(Le=Re=ce,ce=Re+vt,Oe=vt,w.Xb=(1<<I(w.m,2))-1,vt<3*(Ke=w.Xb))q=7;else{for(Re+=3*Ke,Oe-=3*Ke,vt=0;vt<Ke;++vt){var Rt=q[Le+0]|q[Le+1]<<8|q[Le+2]<<16;Rt>Oe&&(Rt=Oe),B(w.Jc[+vt],q,Re,Rt),Re+=Rt,Oe-=Rt,Le+=3}B(w.Jc[+Ke],q,Re,Oe),q=Re<ce?0:5}if(q!=0)return Un(w,q,"cannot parse partitions");for(q=I(Re=w.m,7),Le=he(Re)?Q(Re,4):0,ce=he(Re)?Q(Re,4):0,Oe=he(Re)?Q(Re,4):0,Ke=he(Re)?Q(Re,4):0,Re=he(Re)?Q(Re,4):0,vt=w.Qa,Rt=0;4>Rt;++Rt){if(vt.Cb){var Ft=vt.Zb[Rt];vt.Fb||(Ft+=q)}else{if(0<Rt){w.pb[Rt]=w.pb[0];continue}Ft=q}var Pt=w.pb[Rt];Pt.Sc[0]=ln[Kr(Ft+Le,127)],Pt.Sc[1]=jn[Kr(Ft+0,127)],Pt.Eb[0]=2*ln[Kr(Ft+ce,127)],Pt.Eb[1]=101581*jn[Kr(Ft+Oe,127)]>>16,8>Pt.Eb[1]&&(Pt.Eb[1]=8),Pt.Qc[0]=ln[Kr(Ft+Ke,117)],Pt.Qc[1]=jn[Kr(Ft+Re,127)],Pt.lc=Ft+Re}if(!Te.Rb)return Un(w,4,"Not a key frame.");for(he(Me),Te=w.Pa,q=0;4>q;++q){for(Le=0;8>Le;++Le)for(ce=0;3>ce;++ce)for(Oe=0;11>Oe;++Oe)Ke=X(Me,Wo[q][Le][ce][Oe])?I(Me,8):Xs[q][Le][ce][Oe],Te.Wc[q][Le].Yb[ce][Oe]=Ke;for(Le=0;17>Le;++Le)Te.Xc[q][Le]=Te.Wc[q][od[Le]]}return w.kc=he(Me),w.kc&&(w.Bd=I(Me,8)),w.cb=1}function br(w,T,q,ce,Le,Me,Te){var Oe=T[Le].Yb[q];for(q=0;16>Le;++Le){if(!X(w,Oe[q+0]))return Le;for(;!X(w,Oe[q+1]);)if(Oe=T[++Le].Yb[0],q=0,Le==16)return 16;var Re=T[Le+1].Yb;if(X(w,Oe[q+2])){var Ke=w,vt=0;if(X(Ke,(Ft=Oe)[(Rt=q)+3]))if(X(Ke,Ft[Rt+6])){for(Oe=0,Rt=2*(vt=X(Ke,Ft[Rt+8]))+(Ft=X(Ke,Ft[Rt+9+vt])),vt=0,Ft=Hr[Rt];Ft[Oe];++Oe)vt+=vt+X(Ke,Ft[Oe]);vt+=3+(8<<Rt)}else X(Ke,Ft[Rt+7])?(vt=7+2*X(Ke,165),vt+=X(Ke,145)):vt=5+X(Ke,159);else vt=X(Ke,Ft[Rt+4])?3+X(Ke,Ft[Rt+5]):2;Oe=Re[2]}else vt=1,Oe=Re[1];Re=Te+Ts[Le],0>(Ke=w).b&&ye(Ke);var Rt,Ft=Ke.b,Pt=(Rt=Ke.Ca>>1)-(Ke.I>>Ft)>>31;--Ke.b,Ke.Ca+=Pt,Ke.Ca|=1,Ke.I-=(Rt+1&Pt)<<Ft,Me[Re]=((vt^Pt)-Pt)*ce[(0<Le)+0]}return 16}function no(w){var T=w.rb[w.sb-1];T.la=0,T.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function Cr(w,T){if(w==null)return 0;if(T==null)return Un(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!kr(w,T))return 0;if(e(w.cb),T.ac==null||T.ac(T)){T.ob&&(w.L=0);var q=rl[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=T.v-q>>4,w.zb=T.j-q>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=T.o+15+q>>4,w.Hb=T.va+15+q>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var ce=w.ed;for(q=0;4>q;++q){var Le;if(w.Qa.Cb){var Me=w.Qa.Lb[q];w.Qa.Fb||(Me+=ce.Tb)}else Me=ce.Tb;for(Le=0;1>=Le;++Le){var Te=w.gd[q][Le],Oe=Me;if(ce.Pc&&(Oe+=ce.vd[0],Le&&(Oe+=ce.od[0])),0<(Oe=0>Oe?0:63<Oe?63:Oe)){var Re=Oe;0<ce.wb&&(Re=4<ce.wb?Re>>2:Re>>1)>9-ce.wb&&(Re=9-ce.wb),1>Re&&(Re=1),Te.dd=Re,Te.tc=2*Oe+Re,Te.ld=40<=Oe?2:15<=Oe?1:0}else Te.tc=0;Te.La=Le}}}q=0}else Un(w,6,"Frame setup failed"),q=w.a;if(q=q==0){if(q){w.$c=0,0<w.Aa||(w.Ic=Df);e:{q=w.Ic,ce=4*(Re=w.za);var Ke=32*Re,vt=Re+1,Rt=0<w.L?Re*(0<w.Aa?2:1):0,Ft=(w.Aa==2?2:1)*Re;if((Te=ce+832+(Le=3*(16*q+rl[w.L])/2*Ke)+(Me=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=Te)q=0;else{if(Te>w.Vb){if(w.Vb=0,w.Ec=s(Te),w.Fc=0,w.Ec==null){q=Un(w,1,"no memory during frame initialization.");break e}w.Vb=Te}Te=w.Ec,Oe=w.Fc,w.Ac=Te,w.Bc=Oe,Oe+=ce,w.Gd=o(Ke,cn),w.Hd=0,w.rb=o(vt+1,mr),w.sb=1,w.wa=Rt?o(Rt,si):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=Re),e(!0),w.oc=Te,w.pc=Oe,Oe+=832,w.ya=o(Ft,ei),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=Re),w.R=16*Re,w.B=8*Re,Re=(Ke=rl[w.L])*w.R,Ke=Ke/2*w.B,w.sa=Te,w.ta=Oe+Re,w.qa=w.sa,w.ra=w.ta+16*q*w.R+Ke,w.Ha=w.qa,w.Ia=w.ra+8*q*w.B+Ke,w.$c=0,Oe+=Le,w.mb=Me?Te:null,w.nb=Me?Oe:null,e(Oe+Me<=w.Fc+w.Vb),no(w),i(w.Ac,w.Bc,0,ce),q=1}}if(q){if(T.ka=0,T.y=w.sa,T.O=w.ta,T.f=w.qa,T.N=w.ra,T.ea=w.Ha,T.Vd=w.Ia,T.fa=w.R,T.Rc=w.B,T.F=null,T.J=0,!ec){for(q=-255;255>=q;++q)Wi[255+q]=0>q?-q:q;for(q=-1020;1020>=q;++q)aa[1020+q]=-128>q?-128:127<q?127:q;for(q=-112;112>=q;++q)Uo[112+q]=-16>q?-16:15<q?15:q;for(q=-255;510>=q;++q)ha[255+q]=0>q?0:255<q?255:q;ec=1}St=Wr,Yt=cs,Bn=ms,nr=Si,Ar=Ps,Ot=Ji,es=Tu,Mi=Oa,gu=da,Po=fu,ts=du,Fa=hu,el=Ci,ja=kc,za=bs,$a=hr,ai=_s,La=Bl,Ea[0]=qr,Ea[1]=as,Ea[2]=Mr,Ea[3]=Gr,Ea[4]=io,Ea[5]=oo,Ea[6]=so,Ea[7]=zo,Ea[8]=uu,Ea[9]=_a,Ua[0]=ro,Ua[1]=bi,Ua[2]=Sn,Ua[3]=pn,Ua[4]=Hi,Ua[5]=lu,Ua[6]=wl,fa[0]=Na,fa[1]=ys,fa[2]=Da,fa[3]=Lr,fa[4]=$o,fa[5]=Ri,fa[6]=Ws,q=1}else q=0}q&&(q=function(Pt,Xt){for(Pt.M=0;Pt.M<Pt.Va;++Pt.M){var Gt,yt=Pt.Jc[Pt.M&Pt.Xb],Lt=Pt.m,rn=Pt;for(Gt=0;Gt<rn.za;++Gt){var fn=Lt,sn=rn,Rn=sn.Ac,Nn=sn.Bc+4*Gt,sr=sn.zc,d=sn.ya[sn.aa+Gt];if(sn.Qa.Bb?d.$b=X(fn,sn.Pa.jb[0])?2+X(fn,sn.Pa.jb[2]):X(fn,sn.Pa.jb[1]):d.$b=0,sn.kc&&(d.Ad=X(fn,sn.Bd)),d.Za=!X(fn,145)+0,d.Za){var m=d.Ob,_=0;for(sn=0;4>sn;++sn){var C,k=sr[0+sn];for(C=0;4>C;++C){k=ns[Rn[Nn+C]][k];for(var H=ds[X(fn,k[0])];0<H;)H=ds[2*H+X(fn,k[H])];k=-H,Rn[Nn+C]=k}r(m,_,Rn,Nn,4),_+=4,sr[0+sn]=k}}else k=X(fn,156)?X(fn,128)?1:3:X(fn,163)?2:0,d.Ob[0]=k,i(Rn,Nn,k,4),i(sr,0,k,4);d.Dd=X(fn,142)?X(fn,114)?X(fn,183)?1:3:2:0}if(rn.m.Ka)return Un(Pt,7,"Premature end-of-partition0 encountered.");for(;Pt.ja<Pt.za;++Pt.ja){if(rn=yt,fn=(Lt=Pt).rb[Lt.sb-1],Rn=Lt.rb[Lt.sb+Lt.ja],Gt=Lt.ya[Lt.aa+Lt.ja],Nn=Lt.kc?Gt.Ad:0)fn.la=Rn.la=0,Gt.Za||(fn.Na=Rn.Na=0),Gt.Hc=0,Gt.Gc=0,Gt.ia=0;else{var te,ae;if(fn=Rn,Rn=rn,Nn=Lt.Pa.Xc,sr=Lt.ya[Lt.aa+Lt.ja],d=Lt.pb[sr.$b],sn=sr.ad,m=0,_=Lt.rb[Lt.sb-1],k=C=0,i(sn,m,0,384),sr.Za)var be=0,Ce=Nn[3];else{H=s(16);var rt=fn.Na+_.Na;if(rt=ir(Rn,Nn[1],rt,d.Eb,0,H,0),fn.Na=_.Na=(0<rt)+0,1<rt)St(H,0,sn,m);else{var Ge=H[0]+3>>3;for(H=0;256>H;H+=16)sn[m+H]=Ge}be=1,Ce=Nn[0]}var wt=15&fn.la,It=15&_.la;for(H=0;4>H;++H){var tn=1&It;for(Ge=ae=0;4>Ge;++Ge)wt=wt>>1|(tn=(rt=ir(Rn,Ce,rt=tn+(1&wt),d.Sc,be,sn,m))>be)<<7,ae=ae<<2|(3<rt?3:1<rt?2:sn[m+0]!=0),m+=16;wt>>=4,It=It>>1|tn<<7,C=(C<<8|ae)>>>0}for(Ce=wt,be=It>>4,te=0;4>te;te+=2){for(ae=0,wt=fn.la>>4+te,It=_.la>>4+te,H=0;2>H;++H){for(tn=1&It,Ge=0;2>Ge;++Ge)rt=tn+(1&wt),wt=wt>>1|(tn=0<(rt=ir(Rn,Nn[2],rt,d.Qc,0,sn,m)))<<3,ae=ae<<2|(3<rt?3:1<rt?2:sn[m+0]!=0),m+=16;wt>>=2,It=It>>1|tn<<5}k|=ae<<4*te,Ce|=wt<<4<<te,be|=(240&It)<<te}fn.la=Ce,_.la=be,sr.Hc=C,sr.Gc=k,sr.ia=43690&k?0:d.ia,Nn=!(C|k)}if(0<Lt.L&&(Lt.wa[Lt.Y+Lt.ja]=Lt.gd[Gt.$b][Gt.Za],Lt.wa[Lt.Y+Lt.ja].La|=!Nn),rn.Ka)return Un(Pt,7,"Premature end-of-file encountered.")}if(no(Pt),Lt=Xt,rn=1,Gt=(yt=Pt).D,fn=0<yt.L&&yt.M>=yt.zb&&yt.M<=yt.Va,yt.Aa==0)e:{if(Gt.M=yt.M,Gt.uc=fn,Du(yt,Gt),rn=1,Gt=(ae=yt.D).Nb,fn=(k=rl[yt.L])*yt.R,Rn=k/2*yt.B,H=16*Gt*yt.R,Ge=8*Gt*yt.B,Nn=yt.sa,sr=yt.ta-fn+H,d=yt.qa,sn=yt.ra-Rn+Ge,m=yt.Ha,_=yt.Ia-Rn+Ge,It=(wt=ae.M)==0,C=wt>=yt.Va-1,yt.Aa==2&&Du(yt,ae),ae.uc)for(tn=(rt=yt).D.M,e(rt.D.uc),ae=rt.yb;ae<rt.Hb;++ae){be=ae,Ce=tn;var _n=(Mn=(ke=rt).D).Nb;te=ke.R;var Mn=Mn.wa[Mn.Y+be],yr=ke.sa,nt=ke.ta+16*_n*te+16*be,ot=Mn.dd,mt=Mn.tc;if(mt!=0)if(e(3<=mt),ke.L==1)0<be&&$a(yr,nt,te,mt+4),Mn.La&&La(yr,nt,te,mt),0<Ce&&za(yr,nt,te,mt+4),Mn.La&&ai(yr,nt,te,mt);else{var zt=ke.B,Et=ke.qa,Bt=ke.ra+8*_n*zt+8*be,we=ke.Ha,ke=ke.Ia+8*_n*zt+8*be;_n=Mn.ld,0<be&&(Mi(yr,nt,te,mt+4,ot,_n),Po(Et,Bt,we,ke,zt,mt+4,ot,_n)),Mn.La&&(Fa(yr,nt,te,mt,ot,_n),ja(Et,Bt,we,ke,zt,mt,ot,_n)),0<Ce&&(es(yr,nt,te,mt+4,ot,_n),gu(Et,Bt,we,ke,zt,mt+4,ot,_n)),Mn.La&&(ts(yr,nt,te,mt,ot,_n),el(Et,Bt,we,ke,zt,mt,ot,_n))}}if(yt.ia&&alert("todo:DitherRow"),Lt.put!=null){if(ae=16*wt,wt=16*(wt+1),It?(Lt.y=yt.sa,Lt.O=yt.ta+H,Lt.f=yt.qa,Lt.N=yt.ra+Ge,Lt.ea=yt.Ha,Lt.W=yt.Ia+Ge):(ae-=k,Lt.y=Nn,Lt.O=sr,Lt.f=d,Lt.N=sn,Lt.ea=m,Lt.W=_),C||(wt-=k),wt>Lt.o&&(wt=Lt.o),Lt.F=null,Lt.J=null,yt.Fa!=null&&0<yt.Fa.length&&ae<wt&&(Lt.J=ws(yt,Lt,ae,wt-ae),Lt.F=yt.mb,Lt.F==null&&Lt.F.length==0)){rn=Un(yt,3,"Could not decode alpha data.");break e}ae<Lt.j&&(k=Lt.j-ae,ae=Lt.j,e(!(1&k)),Lt.O+=yt.R*k,Lt.N+=yt.B*(k>>1),Lt.W+=yt.B*(k>>1),Lt.F!=null&&(Lt.J+=Lt.width*k)),ae<wt&&(Lt.O+=Lt.v,Lt.N+=Lt.v>>1,Lt.W+=Lt.v>>1,Lt.F!=null&&(Lt.J+=Lt.v),Lt.ka=ae-Lt.j,Lt.U=Lt.va-Lt.v,Lt.T=wt-ae,rn=Lt.put(Lt))}Gt+1!=yt.Ic||C||(r(yt.sa,yt.ta-fn,Nn,sr+16*yt.R,fn),r(yt.qa,yt.ra-Rn,d,sn+8*yt.B,Rn),r(yt.Ha,yt.Ia-Rn,m,_+8*yt.B,Rn))}if(!rn)return Un(Pt,6,"Output aborted.")}return 1}(w,T)),T.bc!=null&&T.bc(T),q&=1}return q?(w.cb=0,q):0}function Pn(w,T,q,ce,Le){Le=w[T+q+32*ce]+(Le>>3),w[T+q+32*ce]=-256&Le?0>Le?0:255:Le}function _r(w,T,q,ce,Le,Me){Pn(w,T,0,q,ce+Le),Pn(w,T,1,q,ce+Me),Pn(w,T,2,q,ce-Me),Pn(w,T,3,q,ce-Le)}function bn(w){return(20091*w>>16)+w}function Ur(w,T,q,ce){var Le,Me=0,Te=s(16);for(Le=0;4>Le;++Le){var Oe=w[T+0]+w[T+8],Re=w[T+0]-w[T+8],Ke=(35468*w[T+4]>>16)-bn(w[T+12]),vt=bn(w[T+4])+(35468*w[T+12]>>16);Te[Me+0]=Oe+vt,Te[Me+1]=Re+Ke,Te[Me+2]=Re-Ke,Te[Me+3]=Oe-vt,Me+=4,T++}for(Le=Me=0;4>Le;++Le)Oe=(w=Te[Me+0]+4)+Te[Me+8],Re=w-Te[Me+8],Ke=(35468*Te[Me+4]>>16)-bn(Te[Me+12]),Pn(q,ce,0,0,Oe+(vt=bn(Te[Me+4])+(35468*Te[Me+12]>>16))),Pn(q,ce,1,0,Re+Ke),Pn(q,ce,2,0,Re-Ke),Pn(q,ce,3,0,Oe-vt),Me++,ce+=32}function Ji(w,T,q,ce){var Le=w[T+0]+4,Me=35468*w[T+4]>>16,Te=bn(w[T+4]),Oe=35468*w[T+1]>>16;_r(q,ce,0,Le+Te,w=bn(w[T+1]),Oe),_r(q,ce,1,Le+Me,w,Oe),_r(q,ce,2,Le-Me,w,Oe),_r(q,ce,3,Le-Te,w,Oe)}function cs(w,T,q,ce,Le){Ur(w,T,q,ce),Le&&Ur(w,T+16,q,ce+4)}function ms(w,T,q,ce){Yt(w,T+0,q,ce,1),Yt(w,T+32,q,ce+128,1)}function Si(w,T,q,ce){var Le;for(w=w[T+0]+4,Le=0;4>Le;++Le)for(T=0;4>T;++T)Pn(q,ce,T,Le,w)}function Ps(w,T,q,ce){w[T+0]&&nr(w,T+0,q,ce),w[T+16]&&nr(w,T+16,q,ce+4),w[T+32]&&nr(w,T+32,q,ce+128),w[T+48]&&nr(w,T+48,q,ce+128+4)}function Wr(w,T,q,ce){var Le,Me=s(16);for(Le=0;4>Le;++Le){var Te=w[T+0+Le]+w[T+12+Le],Oe=w[T+4+Le]+w[T+8+Le],Re=w[T+4+Le]-w[T+8+Le],Ke=w[T+0+Le]-w[T+12+Le];Me[0+Le]=Te+Oe,Me[8+Le]=Te-Oe,Me[4+Le]=Ke+Re,Me[12+Le]=Ke-Re}for(Le=0;4>Le;++Le)Te=(w=Me[0+4*Le]+3)+Me[3+4*Le],Oe=Me[1+4*Le]+Me[2+4*Le],Re=Me[1+4*Le]-Me[2+4*Le],Ke=w-Me[3+4*Le],q[ce+0]=Te+Oe>>3,q[ce+16]=Ke+Re>>3,q[ce+32]=Te-Oe>>3,q[ce+48]=Ke-Re>>3,ce+=64}function js(w,T,q){var ce,Le=T-32,Me=Ui,Te=255-w[Le-1];for(ce=0;ce<q;++ce){var Oe,Re=Me,Ke=Te+w[T-1];for(Oe=0;Oe<q;++Oe)w[T+Oe]=Re[Ke+w[Le+Oe]];T+=32}}function as(w,T){js(w,T,4)}function ys(w,T){js(w,T,8)}function bi(w,T){js(w,T,16)}function Sn(w,T){var q;for(q=0;16>q;++q)r(w,T+32*q,w,T-32,16)}function pn(w,T){var q;for(q=16;0<q;--q)i(w,T,w[T-1],16),T+=32}function pi(w,T,q){var ce;for(ce=0;16>ce;++ce)i(T,q+32*ce,w,16)}function ro(w,T){var q,ce=16;for(q=0;16>q;++q)ce+=w[T-1+32*q]+w[T+q-32];pi(ce>>5,w,T)}function Hi(w,T){var q,ce=8;for(q=0;16>q;++q)ce+=w[T-1+32*q];pi(ce>>4,w,T)}function lu(w,T){var q,ce=8;for(q=0;16>q;++q)ce+=w[T+q-32];pi(ce>>4,w,T)}function wl(w,T){pi(128,w,T)}function vr(w,T,q){return w+2*T+q+2>>2}function Mr(w,T){var q,ce=T-32;for(ce=new Uint8Array([vr(w[ce-1],w[ce+0],w[ce+1]),vr(w[ce+0],w[ce+1],w[ce+2]),vr(w[ce+1],w[ce+2],w[ce+3]),vr(w[ce+2],w[ce+3],w[ce+4])]),q=0;4>q;++q)r(w,T+32*q,ce,0,ce.length)}function Gr(w,T){var q=w[T-1],ce=w[T-1+32],Le=w[T-1+64],Me=w[T-1+96];Ae(w,T+0,16843009*vr(w[T-1-32],q,ce)),Ae(w,T+32,16843009*vr(q,ce,Le)),Ae(w,T+64,16843009*vr(ce,Le,Me)),Ae(w,T+96,16843009*vr(Le,Me,Me))}function qr(w,T){var q,ce=4;for(q=0;4>q;++q)ce+=w[T+q-32]+w[T-1+32*q];for(ce>>=3,q=0;4>q;++q)i(w,T+32*q,ce,4)}function io(w,T){var q=w[T-1+0],ce=w[T-1+32],Le=w[T-1+64],Me=w[T-1-32],Te=w[T+0-32],Oe=w[T+1-32],Re=w[T+2-32],Ke=w[T+3-32];w[T+0+96]=vr(ce,Le,w[T-1+96]),w[T+1+96]=w[T+0+64]=vr(q,ce,Le),w[T+2+96]=w[T+1+64]=w[T+0+32]=vr(Me,q,ce),w[T+3+96]=w[T+2+64]=w[T+1+32]=w[T+0+0]=vr(Te,Me,q),w[T+3+64]=w[T+2+32]=w[T+1+0]=vr(Oe,Te,Me),w[T+3+32]=w[T+2+0]=vr(Re,Oe,Te),w[T+3+0]=vr(Ke,Re,Oe)}function so(w,T){var q=w[T+1-32],ce=w[T+2-32],Le=w[T+3-32],Me=w[T+4-32],Te=w[T+5-32],Oe=w[T+6-32],Re=w[T+7-32];w[T+0+0]=vr(w[T+0-32],q,ce),w[T+1+0]=w[T+0+32]=vr(q,ce,Le),w[T+2+0]=w[T+1+32]=w[T+0+64]=vr(ce,Le,Me),w[T+3+0]=w[T+2+32]=w[T+1+64]=w[T+0+96]=vr(Le,Me,Te),w[T+3+32]=w[T+2+64]=w[T+1+96]=vr(Me,Te,Oe),w[T+3+64]=w[T+2+96]=vr(Te,Oe,Re),w[T+3+96]=vr(Oe,Re,Re)}function oo(w,T){var q=w[T-1+0],ce=w[T-1+32],Le=w[T-1+64],Me=w[T-1-32],Te=w[T+0-32],Oe=w[T+1-32],Re=w[T+2-32],Ke=w[T+3-32];w[T+0+0]=w[T+1+64]=Me+Te+1>>1,w[T+1+0]=w[T+2+64]=Te+Oe+1>>1,w[T+2+0]=w[T+3+64]=Oe+Re+1>>1,w[T+3+0]=Re+Ke+1>>1,w[T+0+96]=vr(Le,ce,q),w[T+0+64]=vr(ce,q,Me),w[T+0+32]=w[T+1+96]=vr(q,Me,Te),w[T+1+32]=w[T+2+96]=vr(Me,Te,Oe),w[T+2+32]=w[T+3+96]=vr(Te,Oe,Re),w[T+3+32]=vr(Oe,Re,Ke)}function zo(w,T){var q=w[T+0-32],ce=w[T+1-32],Le=w[T+2-32],Me=w[T+3-32],Te=w[T+4-32],Oe=w[T+5-32],Re=w[T+6-32],Ke=w[T+7-32];w[T+0+0]=q+ce+1>>1,w[T+1+0]=w[T+0+64]=ce+Le+1>>1,w[T+2+0]=w[T+1+64]=Le+Me+1>>1,w[T+3+0]=w[T+2+64]=Me+Te+1>>1,w[T+0+32]=vr(q,ce,Le),w[T+1+32]=w[T+0+96]=vr(ce,Le,Me),w[T+2+32]=w[T+1+96]=vr(Le,Me,Te),w[T+3+32]=w[T+2+96]=vr(Me,Te,Oe),w[T+3+64]=vr(Te,Oe,Re),w[T+3+96]=vr(Oe,Re,Ke)}function _a(w,T){var q=w[T-1+0],ce=w[T-1+32],Le=w[T-1+64],Me=w[T-1+96];w[T+0+0]=q+ce+1>>1,w[T+2+0]=w[T+0+32]=ce+Le+1>>1,w[T+2+32]=w[T+0+64]=Le+Me+1>>1,w[T+1+0]=vr(q,ce,Le),w[T+3+0]=w[T+1+32]=vr(ce,Le,Me),w[T+3+32]=w[T+1+64]=vr(Le,Me,Me),w[T+3+64]=w[T+2+64]=w[T+0+96]=w[T+1+96]=w[T+2+96]=w[T+3+96]=Me}function uu(w,T){var q=w[T-1+0],ce=w[T-1+32],Le=w[T-1+64],Me=w[T-1+96],Te=w[T-1-32],Oe=w[T+0-32],Re=w[T+1-32],Ke=w[T+2-32];w[T+0+0]=w[T+2+32]=q+Te+1>>1,w[T+0+32]=w[T+2+64]=ce+q+1>>1,w[T+0+64]=w[T+2+96]=Le+ce+1>>1,w[T+0+96]=Me+Le+1>>1,w[T+3+0]=vr(Oe,Re,Ke),w[T+2+0]=vr(Te,Oe,Re),w[T+1+0]=w[T+3+32]=vr(q,Te,Oe),w[T+1+32]=w[T+3+64]=vr(ce,q,Te),w[T+1+64]=w[T+3+96]=vr(Le,ce,q),w[T+1+96]=vr(Me,Le,ce)}function Da(w,T){var q;for(q=0;8>q;++q)r(w,T+32*q,w,T-32,8)}function Lr(w,T){var q;for(q=0;8>q;++q)i(w,T,w[T-1],8),T+=32}function jr(w,T,q){var ce;for(ce=0;8>ce;++ce)i(T,q+32*ce,w,8)}function Na(w,T){var q,ce=8;for(q=0;8>q;++q)ce+=w[T+q-32]+w[T-1+32*q];jr(ce>>4,w,T)}function Ri(w,T){var q,ce=4;for(q=0;8>q;++q)ce+=w[T+q-32];jr(ce>>3,w,T)}function $o(w,T){var q,ce=4;for(q=0;8>q;++q)ce+=w[T-1+32*q];jr(ce>>3,w,T)}function Ws(w,T){jr(128,w,T)}function Il(w,T,q){var ce=w[T-q],Le=w[T+0],Me=3*(Le-ce)+Va[1020+w[T-2*q]-w[T+q]],Te=As[112+(Me+4>>3)];w[T-q]=Ui[255+ce+As[112+(Me+3>>3)]],w[T+0]=Ui[255+Le-Te]}function cu(w,T,q,ce){var Le=w[T+0],Me=w[T+q];return po[255+w[T-2*q]-w[T-q]]>ce||po[255+Me-Le]>ce}function Au(w,T,q,ce){return 4*po[255+w[T-q]-w[T+0]]+po[255+w[T-2*q]-w[T+q]]<=ce}function oi(w,T,q,ce,Le){var Me=w[T-3*q],Te=w[T-2*q],Oe=w[T-q],Re=w[T+0],Ke=w[T+q],vt=w[T+2*q],Rt=w[T+3*q];return 4*po[255+Oe-Re]+po[255+Te-Ke]>ce?0:po[255+w[T-4*q]-Me]<=Le&&po[255+Me-Te]<=Le&&po[255+Te-Oe]<=Le&&po[255+Rt-vt]<=Le&&po[255+vt-Ke]<=Le&&po[255+Ke-Re]<=Le}function bs(w,T,q,ce){var Le=2*ce+1;for(ce=0;16>ce;++ce)Au(w,T+ce,q,Le)&&Il(w,T+ce,q)}function hr(w,T,q,ce){var Le=2*ce+1;for(ce=0;16>ce;++ce)Au(w,T+ce*q,1,Le)&&Il(w,T+ce*q,1)}function _s(w,T,q,ce){var Le;for(Le=3;0<Le;--Le)bs(w,T+=4*q,q,ce)}function Bl(w,T,q,ce){var Le;for(Le=3;0<Le;--Le)hr(w,T+=4,q,ce)}function Ka(w,T,q,ce,Le,Me,Te,Oe){for(Me=2*Me+1;0<Le--;){if(oi(w,T,q,Me,Te))if(cu(w,T,q,Oe))Il(w,T,q);else{var Re=w,Ke=T,vt=q,Rt=Re[Ke-2*vt],Ft=Re[Ke-vt],Pt=Re[Ke+0],Xt=Re[Ke+vt],Gt=Re[Ke+2*vt],yt=27*(rn=Va[1020+3*(Pt-Ft)+Va[1020+Rt-Xt]])+63>>7,Lt=18*rn+63>>7,rn=9*rn+63>>7;Re[Ke-3*vt]=Ui[255+Re[Ke-3*vt]+rn],Re[Ke-2*vt]=Ui[255+Rt+Lt],Re[Ke-vt]=Ui[255+Ft+yt],Re[Ke+0]=Ui[255+Pt-yt],Re[Ke+vt]=Ui[255+Xt-Lt],Re[Ke+2*vt]=Ui[255+Gt-rn]}T+=ce}}function Qi(w,T,q,ce,Le,Me,Te,Oe){for(Me=2*Me+1;0<Le--;){if(oi(w,T,q,Me,Te))if(cu(w,T,q,Oe))Il(w,T,q);else{var Re=w,Ke=T,vt=q,Rt=Re[Ke-vt],Ft=Re[Ke+0],Pt=Re[Ke+vt],Xt=As[112+((Gt=3*(Ft-Rt))+4>>3)],Gt=As[112+(Gt+3>>3)],yt=Xt+1>>1;Re[Ke-2*vt]=Ui[255+Re[Ke-2*vt]+yt],Re[Ke-vt]=Ui[255+Rt+Gt],Re[Ke+0]=Ui[255+Ft-Xt],Re[Ke+vt]=Ui[255+Pt-yt]}T+=ce}}function Tu(w,T,q,ce,Le,Me){Ka(w,T,q,1,16,ce,Le,Me)}function Oa(w,T,q,ce,Le,Me){Ka(w,T,1,q,16,ce,Le,Me)}function du(w,T,q,ce,Le,Me){var Te;for(Te=3;0<Te;--Te)Qi(w,T+=4*q,q,1,16,ce,Le,Me)}function hu(w,T,q,ce,Le,Me){var Te;for(Te=3;0<Te;--Te)Qi(w,T+=4,1,q,16,ce,Le,Me)}function da(w,T,q,ce,Le,Me,Te,Oe){Ka(w,T,Le,1,8,Me,Te,Oe),Ka(q,ce,Le,1,8,Me,Te,Oe)}function fu(w,T,q,ce,Le,Me,Te,Oe){Ka(w,T,1,Le,8,Me,Te,Oe),Ka(q,ce,1,Le,8,Me,Te,Oe)}function Ci(w,T,q,ce,Le,Me,Te,Oe){Qi(w,T+4*Le,Le,1,8,Me,Te,Oe),Qi(q,ce+4*Le,Le,1,8,Me,Te,Oe)}function kc(w,T,q,ce,Le,Me,Te,Oe){Qi(w,T+4,1,Le,8,Me,Te,Oe),Qi(q,ce+4,1,Le,8,Me,Te,Oe)}function Gs(){this.ba=new er,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new xr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function wa(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function pu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function xa(){this.ua=0,this.Wa=new le,this.vb=new le,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new $,this.yc=new R}function Rl(){this.xb=this.a=0,this.l=new Vr,this.ca=new er,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new re,this.Pb=0,this.wd=new re,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new xa,this.ab=0,this.gc=o(4,pu),this.Oc=0}function Fl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Vr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ei(w,T,q,ce,Le,Me,Te){for(w=w==null?0:w[T+0],T=0;T<Te;++T)Le[Me+T]=w+q[ce+T]&255,w=Le[Me+T]}function ra(w,T,q,ce,Le,Me,Te){var Oe;if(w==null)Ei(null,null,q,ce,Le,Me,Te);else for(Oe=0;Oe<Te;++Oe)Le[Me+Oe]=w[T+Oe]+q[ce+Oe]&255}function Za(w,T,q,ce,Le,Me,Te){if(w==null)Ei(null,null,q,ce,Le,Me,Te);else{var Oe,Re=w[T+0],Ke=Re,vt=Re;for(Oe=0;Oe<Te;++Oe)Ke=vt+(Re=w[T+Oe])-Ke,vt=q[ce+Oe]+(-256&Ke?0>Ke?0:255:Ke)&255,Ke=Re,Le[Me+Oe]=vt}}function ws(w,T,q,ce){var Le=T.width,Me=T.o;if(e(w!=null&&T!=null),0>q||0>=ce||q+ce>Me)return null;if(!w.Cc){if(w.ga==null){var Te;if(w.ga=new Fl,(Te=w.ga==null)||(Te=T.width*T.o,e(w.Gb.length==0),w.Gb=s(Te),w.Uc=0,w.Gb==null?Te=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Te=1),Te=!Te),!Te){Te=w.ga;var Oe=w.Fa,Re=w.P,Ke=w.qc,vt=w.mb,Rt=w.nb,Ft=Re+1,Pt=Ke-1,Xt=Te.l;if(e(Oe!=null&&vt!=null&&T!=null),wi[0]=null,wi[1]=Ei,wi[2]=ra,wi[3]=Za,Te.ca=vt,Te.tb=Rt,Te.c=T.width,Te.i=T.height,e(0<Te.c&&0<Te.i),1>=Ke)T=0;else if(Te.$a=Oe[Re+0]>>0&3,Te.Z=Oe[Re+0]>>2&3,Te.Lc=Oe[Re+0]>>4&3,Re=Oe[Re+0]>>6&3,0>Te.$a||1<Te.$a||4<=Te.Z||1<Te.Lc||Re)T=0;else if(Xt.put=Fo,Xt.ac=Di,Xt.bc=Rs,Xt.ma=Te,Xt.width=T.width,Xt.height=T.height,Xt.Da=T.Da,Xt.v=T.v,Xt.va=T.va,Xt.j=T.j,Xt.o=T.o,Te.$a)e:{e(Te.$a==1),T=xt();t:for(;;){if(T==null){T=0;break e}if(e(Te!=null),Te.mc=T,T.c=Te.c,T.i=Te.i,T.l=Te.l,T.l.ma=Te,T.l.width=Te.c,T.l.height=Te.i,T.a=0,G(T.m,Oe,Ft,Pt),!Kt(Te.c,Te.i,1,T,null)||(T.ab==1&&T.gc[0].hc==3&&En(T.s)?(Te.ic=1,Oe=T.c*T.i,T.Ta=null,T.Ua=0,T.V=s(Oe),T.Ba=0,T.V==null?(T.a=1,T=0):T=1):(Te.ic=0,T=Yn(T,Te.c)),!T))break t;T=1;break e}Te.mc=null,T=0}else T=Pt>=Te.c*Te.i;Te=!T}if(Te)return null;w.ga.Lc!=1?w.Ga=0:ce=Me-q}e(w.ga!=null),e(q+ce<=Me);e:{if(T=(Oe=w.ga).c,Me=Oe.l.o,Oe.$a==0){if(Ft=w.rc,Pt=w.Vc,Xt=w.Fa,Re=w.P+1+q*T,Ke=w.mb,vt=w.nb+q*T,e(Re<=w.P+w.qc),Oe.Z!=0)for(e(wi[Oe.Z]!=null),Te=0;Te<ce;++Te)wi[Oe.Z](Ft,Pt,Xt,Re,Ke,vt,T),Ft=Ke,Pt=vt,vt+=T,Re+=T;else for(Te=0;Te<ce;++Te)r(Ke,vt,Xt,Re,T),Ft=Ke,Pt=vt,vt+=T,Re+=T;w.rc=Ft,w.Vc=Pt}else{if(e(Oe.mc!=null),T=q+ce,e((Te=Oe.mc)!=null),e(T<=Te.i),Te.C>=T)T=1;else if(Oe.ic||Mt(),Oe.ic){Oe=Te.V,Ft=Te.Ba,Pt=Te.c;var Gt=Te.i,yt=(Xt=1,Re=Te.$/Pt,Ke=Te.$%Pt,vt=Te.m,Rt=Te.s,Te.$),Lt=Pt*Gt,rn=Pt*T,fn=Rt.wc,sn=yt<rn?Ze(Rt,Ke,Re):null;e(yt<=Lt),e(T<=Gt),e(En(Rt));t:for(;;){for(;!vt.h&&yt<rn;){if(Ke&fn||(sn=Ze(Rt,Ke,Re)),e(sn!=null),de(vt),256>(Gt=gs(sn.G[0],sn.H[0],vt)))Oe[Ft+yt]=Gt,++yt,++Ke>=Pt&&(Ke=0,++Re<=T&&!(Re%16)&&Ln(Te,Re));else{if(!(280>Gt)){Xt=0;break t}Gt=Fs(Gt-256,vt);var Rn,Nn=gs(sn.G[4],sn.H[4],vt);if(de(vt),!(yt>=(Nn=jo(Pt,Nn=Fs(Nn,vt)))&&Lt-yt>=Gt)){Xt=0;break t}for(Rn=0;Rn<Gt;++Rn)Oe[Ft+yt+Rn]=Oe[Ft+yt+Rn-Nn];for(yt+=Gt,Ke+=Gt;Ke>=Pt;)Ke-=Pt,++Re<=T&&!(Re%16)&&Ln(Te,Re);yt<rn&&Ke&fn&&(sn=Ze(Rt,Ke,Re))}e(vt.h==Z(vt))}Ln(Te,Re>T?T:Re);break t}!Xt||vt.h&&yt<Lt?(Xt=0,Te.a=vt.h?5:3):Te.$=yt,T=Xt}else T=jt(Te,Te.V,Te.Ba,Te.c,Te.i,T,gr);if(!T){ce=0;break e}}q+ce>=Me&&(w.Cc=1),ce=1}if(!ce)return null;if(w.Cc&&((ce=w.ga)!=null&&(ce.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+q*Le}function F(w,T,q,ce,Le,Me){for(;0<Le--;){var Te,Oe=w,Re=T+(q?1:0),Ke=w,vt=T+(q?0:3);for(Te=0;Te<ce;++Te){var Rt=Ke[vt+4*Te];Rt!=255&&(Rt*=32897,Oe[Re+4*Te+0]=Oe[Re+4*Te+0]*Rt>>23,Oe[Re+4*Te+1]=Oe[Re+4*Te+1]*Rt>>23,Oe[Re+4*Te+2]=Oe[Re+4*Te+2]*Rt>>23)}T+=Me}}function xe(w,T,q,ce,Le){for(;0<ce--;){var Me;for(Me=0;Me<q;++Me){var Te=w[T+2*Me+0],Oe=15&(Ke=w[T+2*Me+1]),Re=4369*Oe,Ke=(240&Ke|Ke>>4)*Re>>16;w[T+2*Me+0]=(240&Te|Te>>4)*Re>>16&240|(15&Te|Te<<4)*Re>>16>>4&15,w[T+2*Me+1]=240&Ke|Oe}T+=Le}}function tt(w,T,q,ce,Le,Me,Te,Oe){var Re,Ke,vt=255;for(Ke=0;Ke<Le;++Ke){for(Re=0;Re<ce;++Re){var Rt=w[T+Re];Me[Te+4*Re]=Rt,vt&=Rt}T+=q,Te+=Oe}return vt!=255}function ft(w,T,q,ce,Le){var Me;for(Me=0;Me<Le;++Me)q[ce+Me]=w[T+Me]>>8}function Mt(){Ys=F,ki=xe,Fi=tt,Ls=ft}function Ht(w,T,q){O[w]=function(ce,Le,Me,Te,Oe,Re,Ke,vt,Rt,Ft,Pt,Xt,Gt,yt,Lt,rn,fn){var sn,Rn=fn-1>>1,Nn=Oe[Re+0]|Ke[vt+0]<<16,sr=Rt[Ft+0]|Pt[Xt+0]<<16;e(ce!=null);var d=3*Nn+sr+131074>>2;for(T(ce[Le+0],255&d,d>>16,Gt,yt),Me!=null&&(d=3*sr+Nn+131074>>2,T(Me[Te+0],255&d,d>>16,Lt,rn)),sn=1;sn<=Rn;++sn){var m=Oe[Re+sn]|Ke[vt+sn]<<16,_=Rt[Ft+sn]|Pt[Xt+sn]<<16,C=Nn+m+sr+_+524296,k=C+2*(m+sr)>>3;d=k+Nn>>1,Nn=(C=C+2*(Nn+_)>>3)+m>>1,T(ce[Le+2*sn-1],255&d,d>>16,Gt,yt+(2*sn-1)*q),T(ce[Le+2*sn-0],255&Nn,Nn>>16,Gt,yt+(2*sn-0)*q),Me!=null&&(d=C+sr>>1,Nn=k+_>>1,T(Me[Te+2*sn-1],255&d,d>>16,Lt,rn+(2*sn-1)*q),T(Me[Te+2*sn+0],255&Nn,Nn>>16,Lt,rn+(2*sn+0)*q)),Nn=m,sr=_}1&fn||(d=3*Nn+sr+131074>>2,T(ce[Le+fn-1],255&d,d>>16,Gt,yt+(fn-1)*q),Me!=null&&(d=3*sr+Nn+131074>>2,T(Me[Te+fn-1],255&d,d>>16,Lt,rn+(fn-1)*q)))}}function hn(){go[Ho]=Ie,go[wr]=tc,go[tl]=Go,go[nl]=Js,go[Sa]=Zr,go[Mo]=$d,go[sd]=Mf,go[Ks]=tc,go[Zs]=Js,go[Ca]=Zr,go[u]=$d}function Fn(w){return w&-16384?0>w?0:255:w>>Vp}function Hn(w,T){return Fn((19077*w>>8)+(26149*T>>8)-14234)}function cr(w,T,q){return Fn((19077*w>>8)-(6419*T>>8)-(13320*q>>8)+8708)}function Er(w,T){return Fn((19077*w>>8)+(33050*T>>8)-17685)}function Yr(w,T,q,ce,Le){ce[Le+0]=Hn(w,q),ce[Le+1]=cr(w,T,q),ce[Le+2]=Er(w,T)}function Yi(w,T,q,ce,Le){ce[Le+0]=Er(w,T),ce[Le+1]=cr(w,T,q),ce[Le+2]=Hn(w,q)}function _i(w,T,q,ce,Le){var Me=cr(w,T,q);T=Me<<3&224|Er(w,T)>>3,ce[Le+0]=248&Hn(w,q)|Me>>5,ce[Le+1]=T}function Pi(w,T,q,ce,Le){var Me=240&Er(w,T)|15;ce[Le+0]=240&Hn(w,q)|cr(w,T,q)>>4,ce[Le+1]=Me}function xs(w,T,q,ce,Le){ce[Le+0]=255,Yr(w,T,q,ce,Le+1)}function Ms(w,T,q,ce,Le){Yi(w,T,q,ce,Le),ce[Le+3]=255}function ia(w,T,q,ce,Le){Yr(w,T,q,ce,Le),ce[Le+3]=255}function Kr(w,T){return 0>w?0:w>T?T:w}function ao(w,T,q){O[w]=function(ce,Le,Me,Te,Oe,Re,Ke,vt,Rt){for(var Ft=vt+(-2&Rt)*q;vt!=Ft;)T(ce[Le+0],Me[Te+0],Oe[Re+0],Ke,vt),T(ce[Le+1],Me[Te+0],Oe[Re+0],Ke,vt+q),Le+=2,++Te,++Re,vt+=2*q;1&Rt&&T(ce[Le+0],Me[Te+0],Oe[Re+0],Ke,vt)}}function jl(w,T,q){return q==0?w==0?T==0?6:5:T==0?4:0:q}function So(w,T,q,ce,Le){switch(w>>>30){case 3:Yt(T,q,ce,Le,0);break;case 2:Ot(T,q,ce,Le);break;case 1:nr(T,q,ce,Le)}}function Du(w,T){var q,ce,Le=T.M,Me=T.Nb,Te=w.oc,Oe=w.pc+40,Re=w.oc,Ke=w.pc+584,vt=w.oc,Rt=w.pc+600;for(q=0;16>q;++q)Te[Oe+32*q-1]=129;for(q=0;8>q;++q)Re[Ke+32*q-1]=129,vt[Rt+32*q-1]=129;for(0<Le?Te[Oe-1-32]=Re[Ke-1-32]=vt[Rt-1-32]=129:(i(Te,Oe-32-1,127,21),i(Re,Ke-32-1,127,9),i(vt,Rt-32-1,127,9)),ce=0;ce<w.za;++ce){var Ft=T.ya[T.aa+ce];if(0<ce){for(q=-1;16>q;++q)r(Te,Oe+32*q-4,Te,Oe+32*q+12,4);for(q=-1;8>q;++q)r(Re,Ke+32*q-4,Re,Ke+32*q+4,4),r(vt,Rt+32*q-4,vt,Rt+32*q+4,4)}var Pt=w.Gd,Xt=w.Hd+ce,Gt=Ft.ad,yt=Ft.Hc;if(0<Le&&(r(Te,Oe-32,Pt[Xt].y,0,16),r(Re,Ke-32,Pt[Xt].f,0,8),r(vt,Rt-32,Pt[Xt].ea,0,8)),Ft.Za){var Lt=Te,rn=Oe-32+16;for(0<Le&&(ce>=w.za-1?i(Lt,rn,Pt[Xt].y[15],4):r(Lt,rn,Pt[Xt+1].y,0,4)),q=0;4>q;q++)Lt[rn+128+q]=Lt[rn+256+q]=Lt[rn+384+q]=Lt[rn+0+q];for(q=0;16>q;++q,yt<<=2)Lt=Te,rn=Oe+Af[q],Ea[Ft.Ob[q]](Lt,rn),So(yt,Gt,16*+q,Lt,rn)}else if(Lt=jl(ce,Le,Ft.Ob[0]),Ua[Lt](Te,Oe),yt!=0)for(q=0;16>q;++q,yt<<=2)So(yt,Gt,16*+q,Te,Oe+Af[q]);for(q=Ft.Gc,Lt=jl(ce,Le,Ft.Dd),fa[Lt](Re,Ke),fa[Lt](vt,Rt),yt=Gt,Lt=Re,rn=Ke,255&(Ft=q>>0)&&(170&Ft?Bn(yt,256,Lt,rn):Ar(yt,256,Lt,rn)),Ft=vt,yt=Rt,255&(q>>=8)&&(170&q?Bn(Gt,320,Ft,yt):Ar(Gt,320,Ft,yt)),Le<w.Ub-1&&(r(Pt[Xt].y,0,Te,Oe+480,16),r(Pt[Xt].f,0,Re,Ke+224,8),r(Pt[Xt].ea,0,vt,Rt+224,8)),q=8*Me*w.B,Pt=w.sa,Xt=w.ta+16*ce+16*Me*w.R,Gt=w.qa,Ft=w.ra+8*ce+q,yt=w.Ha,Lt=w.Ia+8*ce+q,q=0;16>q;++q)r(Pt,Xt+q*w.R,Te,Oe+32*q,16);for(q=0;8>q;++q)r(Gt,Ft+q*w.B,Re,Ke+32*q,8),r(yt,Lt+q*w.B,vt,Rt+32*q,8)}}function Ia(w,T,q,ce,Le,Me,Te,Oe,Re){var Ke=[0],vt=[0],Rt=0,Ft=Re!=null?Re.kd:0,Pt=Re??new wa;if(w==null||12>q)return 7;Pt.data=w,Pt.w=T,Pt.ha=q,T=[T],q=[q],Pt.gb=[Pt.gb];e:{var Xt=T,Gt=q,yt=Pt.gb;if(e(w!=null),e(Gt!=null),e(yt!=null),yt[0]=0,12<=Gt[0]&&!n(w,Xt[0],"RIFF")){if(n(w,Xt[0]+8,"WEBP")){yt=3;break e}var Lt=fe(w,Xt[0]+4);if(12>Lt||4294967286<Lt){yt=3;break e}if(Ft&&Lt>Gt[0]-8){yt=7;break e}yt[0]=Lt,Xt[0]+=12,Gt[0]-=12}yt=0}if(yt!=0)return yt;for(Lt=0<Pt.gb[0],q=q[0];;){e:{var rn=w;Gt=T,yt=q;var fn=Ke,sn=vt,Rn=Xt=[0];if((d=Rt=[Rt])[0]=0,8>yt[0])yt=7;else{if(!n(rn,Gt[0],"VP8X")){if(fe(rn,Gt[0]+4)!=10){yt=3;break e}if(18>yt[0]){yt=7;break e}var Nn=fe(rn,Gt[0]+8),sr=1+Xe(rn,Gt[0]+12);if(2147483648<=sr*(rn=1+Xe(rn,Gt[0]+15))){yt=3;break e}Rn!=null&&(Rn[0]=Nn),fn!=null&&(fn[0]=sr),sn!=null&&(sn[0]=rn),Gt[0]+=18,yt[0]-=18,d[0]=1}yt=0}}if(Rt=Rt[0],Xt=Xt[0],yt!=0)return yt;if(Gt=!!(2&Xt),!Lt&&Rt)return 3;if(Me!=null&&(Me[0]=!!(16&Xt)),Te!=null&&(Te[0]=Gt),Oe!=null&&(Oe[0]=0),Te=Ke[0],Xt=vt[0],Rt&&Gt&&Re==null){yt=0;break}if(4>q){yt=7;break}if(Lt&&Rt||!Lt&&!Rt&&!n(w,T[0],"ALPH")){q=[q],Pt.na=[Pt.na],Pt.P=[Pt.P],Pt.Sa=[Pt.Sa];e:{Nn=w,yt=T,Lt=q;var d=Pt.gb;fn=Pt.na,sn=Pt.P,Rn=Pt.Sa,sr=22,e(Nn!=null),e(Lt!=null),rn=yt[0];var m=Lt[0];for(e(fn!=null),e(Rn!=null),fn[0]=null,sn[0]=null,Rn[0]=0;;){if(yt[0]=rn,Lt[0]=m,8>m){yt=7;break e}var _=fe(Nn,rn+4);if(4294967286<_){yt=3;break e}var C=8+_+1&-2;if(sr+=C,0<d&&sr>d){yt=3;break e}if(!n(Nn,rn,"VP8 ")||!n(Nn,rn,"VP8L")){yt=0;break e}if(m[0]<C){yt=7;break e}n(Nn,rn,"ALPH")||(fn[0]=Nn,sn[0]=rn+8,Rn[0]=_),rn+=C,m-=C}}if(q=q[0],Pt.na=Pt.na[0],Pt.P=Pt.P[0],Pt.Sa=Pt.Sa[0],yt!=0)break}q=[q],Pt.Ja=[Pt.Ja],Pt.xa=[Pt.xa];e:if(d=w,yt=T,Lt=q,fn=Pt.gb[0],sn=Pt.Ja,Rn=Pt.xa,Nn=yt[0],rn=!n(d,Nn,"VP8 "),sr=!n(d,Nn,"VP8L"),e(d!=null),e(Lt!=null),e(sn!=null),e(Rn!=null),8>Lt[0])yt=7;else{if(rn||sr){if(d=fe(d,Nn+4),12<=fn&&d>fn-12){yt=3;break e}if(Ft&&d>Lt[0]-8){yt=7;break e}sn[0]=d,yt[0]+=8,Lt[0]-=8,Rn[0]=sr}else Rn[0]=5<=Lt[0]&&d[Nn+0]==47&&!(d[Nn+4]>>5),sn[0]=Lt[0];yt=0}if(q=q[0],Pt.Ja=Pt.Ja[0],Pt.xa=Pt.xa[0],T=T[0],yt!=0)break;if(4294967286<Pt.Ja)return 3;if(Oe==null||Gt||(Oe[0]=Pt.xa?2:1),Te=[Te],Xt=[Xt],Pt.xa){if(5>q){yt=7;break}Oe=Te,Ft=Xt,Gt=Me,w==null||5>q?w=0:5<=q&&w[T+0]==47&&!(w[T+4]>>5)?(Lt=[0],d=[0],fn=[0],G(sn=new re,w,T,q),tr(sn,Lt,d,fn)?(Oe!=null&&(Oe[0]=Lt[0]),Ft!=null&&(Ft[0]=d[0]),Gt!=null&&(Gt[0]=fn[0]),w=1):w=0):w=0}else{if(10>q){yt=7;break}Oe=Xt,w==null||10>q||!Ni(w,T+3,q-3)?w=0:(Ft=w[T+0]|w[T+1]<<8|w[T+2]<<16,Gt=16383&(w[T+7]<<8|w[T+6]),w=16383&(w[T+9]<<8|w[T+8]),1&Ft||3<(Ft>>1&7)||!(Ft>>4&1)||Ft>>5>=Pt.Ja||!Gt||!w?w=0:(Te&&(Te[0]=Gt),Oe&&(Oe[0]=w),w=1))}if(!w||(Te=Te[0],Xt=Xt[0],Rt&&(Ke[0]!=Te||vt[0]!=Xt)))return 3;Re!=null&&(Re[0]=Pt,Re.offset=T-Re.w,e(4294967286>T-Re.w),e(Re.offset==Re.ha-q));break}return yt==0||yt==7&&Rt&&Re==null?(Me!=null&&(Me[0]|=Pt.na!=null&&0<Pt.na.length),ce!=null&&(ce[0]=Te),Le!=null&&(Le[0]=Xt),0):yt}function Qu(w,T,q){var ce=T.width,Le=T.height,Me=0,Te=0,Oe=ce,Re=Le;if(T.Da=w!=null&&0<w.Da,T.Da&&(Oe=w.cd,Re=w.bd,Me=w.v,Te=w.j,11>q||(Me&=-2,Te&=-2),0>Me||0>Te||0>=Oe||0>=Re||Me+Oe>ce||Te+Re>Le))return 0;if(T.v=Me,T.j=Te,T.va=Me+Oe,T.o=Te+Re,T.U=Oe,T.T=Re,T.da=w!=null&&0<w.da,T.da){if(!je(Oe,Re,q=[w.ib],Me=[w.hb]))return 0;T.ib=q[0],T.hb=Me[0]}return T.ob=w!=null&&w.ob,T.Kb=w==null||!w.Sd,T.da&&(T.ob=T.ib<3*ce/4&&T.hb<3*Le/4,T.Kb=0),1}function xl(w){if(w==null)return 2;if(11>w.S){var T=w.f.RGBA;T.fb+=(w.height-1)*T.A,T.A=-T.A}else T=w.f.kb,w=w.height,T.O+=(w-1)*T.fa,T.fa=-T.fa,T.N+=(w-1>>1)*T.Ab,T.Ab=-T.Ab,T.W+=(w-1>>1)*T.Db,T.Db=-T.Db,T.F!=null&&(T.J+=(w-1)*T.lb,T.lb=-T.lb);return 0}function Ll(w,T,q,ce){if(ce==null||0>=w||0>=T)return 2;if(q!=null){if(q.Da){var Le=q.cd,Me=q.bd,Te=-2&q.v,Oe=-2&q.j;if(0>Te||0>Oe||0>=Le||0>=Me||Te+Le>w||Oe+Me>T)return 2;w=Le,T=Me}if(q.da){if(!je(w,T,Le=[q.ib],Me=[q.hb]))return 2;w=Le[0],T=Me[0]}}ce.width=w,ce.height=T;e:{var Re=ce.width,Ke=ce.height;if(w=ce.S,0>=Re||0>=Ke||!(w>=Ho&&13>w))w=2;else{if(0>=ce.Rd&&ce.sd==null){Te=Me=Le=T=0;var vt=(Oe=Re*Nf[w])*Ke;if(11>w||(Me=(Ke+1)/2*(T=(Re+1)/2),w==12&&(Te=(Le=Re)*Ke)),(Ke=s(vt+2*Me+Te))==null){w=1;break e}ce.sd=Ke,11>w?((Re=ce.f.RGBA).eb=Ke,Re.fb=0,Re.A=Oe,Re.size=vt):((Re=ce.f.kb).y=Ke,Re.O=0,Re.fa=Oe,Re.Fd=vt,Re.f=Ke,Re.N=0+vt,Re.Ab=T,Re.Cd=Me,Re.ea=Ke,Re.W=0+vt+Me,Re.Db=T,Re.Ed=Me,w==12&&(Re.F=Ke,Re.J=0+vt+2*Me),Re.Tc=Te,Re.lb=Le)}if(T=1,Le=ce.S,Me=ce.width,Te=ce.height,Le>=Ho&&13>Le)if(11>Le)w=ce.f.RGBA,T&=(Oe=Math.abs(w.A))*(Te-1)+Me<=w.size,T&=Oe>=Me*Nf[Le],T&=w.eb!=null;else{w=ce.f.kb,Oe=(Me+1)/2,vt=(Te+1)/2,Re=Math.abs(w.fa),Ke=Math.abs(w.Ab);var Rt=Math.abs(w.Db),Ft=Math.abs(w.lb),Pt=Ft*(Te-1)+Me;T&=Re*(Te-1)+Me<=w.Fd,T&=Ke*(vt-1)+Oe<=w.Cd,T=(T&=Rt*(vt-1)+Oe<=w.Ed)&Re>=Me&Ke>=Oe&Rt>=Oe,T&=w.y!=null,T&=w.f!=null,T&=w.ea!=null,Le==12&&(T&=Ft>=Me,T&=Pt<=w.Tc,T&=w.F!=null)}else T=0;w=T?0:2}}return w!=0||q!=null&&q.fd&&(w=xl(ce)),w}var ks=64,Ba=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],sa=24,Vo=32,zl=8,lo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ee("Predictor0","PredictorAdd0"),O.Predictor0=function(){return 4278190080},O.Predictor1=function(w){return w},O.Predictor2=function(w,T,q){return T[q+0]},O.Predictor3=function(w,T,q){return T[q+1]},O.Predictor4=function(w,T,q){return T[q-1]},O.Predictor5=function(w,T,q){return We(We(w,T[q+1]),T[q+0])},O.Predictor6=function(w,T,q){return We(w,T[q-1])},O.Predictor7=function(w,T,q){return We(w,T[q+0])},O.Predictor8=function(w,T,q){return We(T[q-1],T[q+0])},O.Predictor9=function(w,T,q){return We(T[q+0],T[q+1])},O.Predictor10=function(w,T,q){return We(We(w,T[q-1]),We(T[q+0],T[q+1]))},O.Predictor11=function(w,T,q){var ce=T[q+0];return 0>=gt(ce>>24&255,w>>24&255,(T=T[q-1])>>24&255)+gt(ce>>16&255,w>>16&255,T>>16&255)+gt(ce>>8&255,w>>8&255,T>>8&255)+gt(255&ce,255&w,255&T)?ce:w},O.Predictor12=function(w,T,q){var ce=T[q+0];return(ct((w>>24&255)+(ce>>24&255)-((T=T[q-1])>>24&255))<<24|ct((w>>16&255)+(ce>>16&255)-(T>>16&255))<<16|ct((w>>8&255)+(ce>>8&255)-(T>>8&255))<<8|ct((255&w)+(255&ce)-(255&T)))>>>0},O.Predictor13=function(w,T,q){var ce=T[q-1];return(pt((w=We(w,T[q+0]))>>24&255,ce>>24&255)<<24|pt(w>>16&255,ce>>16&255)<<16|pt(w>>8&255,ce>>8&255)<<8|pt(w>>0&255,ce>>0&255))>>>0};var Co=O.PredictorAdd0;O.PredictorAdd1=st,Ee("Predictor2","PredictorAdd2"),Ee("Predictor3","PredictorAdd3"),Ee("Predictor4","PredictorAdd4"),Ee("Predictor5","PredictorAdd5"),Ee("Predictor6","PredictorAdd6"),Ee("Predictor7","PredictorAdd7"),Ee("Predictor8","PredictorAdd8"),Ee("Predictor9","PredictorAdd9"),Ee("Predictor10","PredictorAdd10"),Ee("Predictor11","PredictorAdd11"),Ee("Predictor12","PredictorAdd12"),Ee("Predictor13","PredictorAdd13");var Eo=O.PredictorAdd2;lt("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),lt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var Ac,zs=O.ColorIndexInverseTransform,Xa=O.MapARGB,uo=O.VP8LColorIndexInverseTransformAlpha,co=O.MapAlpha,Ja=O.VP8LPredictorsAdd=[];Ja.length=16,(O.VP8LPredictors=[]).length=16,(O.VP8LPredictorsAdd_C=[]).length=16,(O.VP8LPredictors_C=[]).length=16;var Qa,ho,qs,Ra,oa,fo,St,Yt,Ot,Bn,nr,Ar,es,Mi,gu,Po,ts,Fa,el,ja,za,$a,ai,La,Ys,ki,Fi,Ls,Wi=s(511),aa=s(2041),Uo=s(225),ha=s(767),ec=0,Va=aa,As=Uo,Ui=ha,po=Wi,Ho=0,wr=1,tl=2,nl=3,Sa=4,Mo=5,sd=6,Ks=7,Zs=8,Ca=9,u=10,y=[2,3,7],P=[3,3,11],W=[280,256,256,256,40],ue=[0,1,1,1,0],Pe=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ut=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Nt=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Wt=8,ln=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],jn=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ir=null,Hr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ts=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ds=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Xs=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ns=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Wo=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],od=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ua=[],Ea=[],fa=[],Th=1,Nu=2,wi=[],go=[];Ht("UpsampleRgbLinePair",Yr,3),Ht("UpsampleBgrLinePair",Yi,3),Ht("UpsampleRgbaLinePair",ia,4),Ht("UpsampleBgraLinePair",Ms,4),Ht("UpsampleArgbLinePair",xs,4),Ht("UpsampleRgba4444LinePair",Pi,2),Ht("UpsampleRgb565LinePair",_i,2);var Ie=O.UpsampleRgbLinePair,Go=O.UpsampleBgrLinePair,tc=O.UpsampleRgbaLinePair,Js=O.UpsampleBgraLinePair,Zr=O.UpsampleArgbLinePair,$d=O.UpsampleRgba4444LinePair,Mf=O.UpsampleRgb565LinePair,Vd=16,Sl=1<<Vd-1,ad=-227,Dh=482,Vp=6,Tc=0,Ud=s(256),mu=s(256),Up=s(256),Hd=s(256),Wd=s(Dh-ad),kf=s(Dh-ad);ao("YuvToRgbRow",Yr,3),ao("YuvToBgrRow",Yi,3),ao("YuvToRgbaRow",ia,4),ao("YuvToBgraRow",Ms,4),ao("YuvToArgbRow",xs,4),ao("YuvToRgba4444Row",Pi,2),ao("YuvToRgb565Row",_i,2);var Af=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],rl=[0,2,8],Tf=[8,7,6,4,4,2,2,2,1,1,1,1],Df=1;this.WebPDecodeRGBA=function(w,T,q,ce,Le){var Me=wr,Te=new Gs,Oe=new er;Te.ba=Oe,Oe.S=Me,Oe.width=[Oe.width],Oe.height=[Oe.height];var Re=Oe.width,Ke=Oe.height,vt=new pr;if(vt==null||w==null)var Rt=2;else e(vt!=null),Rt=Ia(w,T,q,vt.width,vt.height,vt.Pd,vt.Qd,vt.format,null);if(Rt!=0?Re=0:(Re!=null&&(Re[0]=vt.width[0]),Ke!=null&&(Ke[0]=vt.height[0]),Re=1),Re){Oe.width=Oe.width[0],Oe.height=Oe.height[0],ce!=null&&(ce[0]=Oe.width),Le!=null&&(Le[0]=Oe.height);e:{if(ce=new Vr,(Le=new wa).data=w,Le.w=T,Le.ha=q,Le.kd=1,T=[0],e(Le!=null),((w=Ia(Le.data,Le.w,Le.ha,null,null,null,T,null,Le))==0||w==7)&&T[0]&&(w=4),(T=w)==0){if(e(Te!=null),ce.data=Le.data,ce.w=Le.w+Le.offset,ce.ha=Le.ha-Le.offset,ce.put=Fo,ce.ac=Di,ce.bc=Rs,ce.ma=Te,Le.xa){if((w=xt())==null){Te=1;break e}if(function(Ft,Pt){var Xt=[0],Gt=[0],yt=[0];t:for(;;){if(Ft==null)return 0;if(Pt==null)return Ft.a=2,0;if(Ft.l=Pt,Ft.a=0,G(Ft.m,Pt.data,Pt.w,Pt.ha),!tr(Ft.m,Xt,Gt,yt)){Ft.a=3;break t}if(Ft.xb=Nu,Pt.width=Xt[0],Pt.height=Gt[0],!Kt(Xt[0],Gt[0],1,Ft,null))break t;return 1}return e(Ft.a!=0),0}(w,ce)){if(ce=(T=Ll(ce.width,ce.height,Te.Oa,Te.ba))==0){t:{ce=w;n:for(;;){if(ce==null){ce=0;break t}if(e(ce.s.yc!=null),e(ce.s.Ya!=null),e(0<ce.s.Wb),e((q=ce.l)!=null),e((Le=q.ma)!=null),ce.xb!=0){if(ce.ca=Le.ba,ce.tb=Le.tb,e(ce.ca!=null),!Qu(Le.Oa,q,nl)){ce.a=2;break n}if(!Yn(ce,q.width)||q.da)break n;if((q.da||en(ce.ca.S))&&Mt(),11>ce.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ce.ca.f.kb.F!=null&&Mt()),ce.Pb&&0<ce.s.ua&&ce.s.vb.X==null&&!ee(ce.s.vb,ce.s.Wa.Xa)){ce.a=1;break n}ce.xb=0}if(!jt(ce,ce.V,ce.Ba,ce.c,ce.i,q.o,Ut))break n;Le.Dc=ce.Ma,ce=1;break t}e(ce.a!=0),ce=0}ce=!ce}ce&&(T=w.a)}else T=w.a}else{if((w=new ur)==null){Te=1;break e}if(w.Fa=Le.na,w.P=Le.P,w.qc=Le.Sa,kr(w,ce)){if((T=Ll(ce.width,ce.height,Te.Oa,Te.ba))==0){if(w.Aa=0,q=Te.Oa,e((Le=w)!=null),q!=null){if(0<(Re=0>(Re=q.Md)?0:100<Re?255:255*Re/100)){for(Ke=vt=0;4>Ke;++Ke)12>(Rt=Le.pb[Ke]).lc&&(Rt.ia=Re*Tf[0>Rt.lc?0:Rt.lc]>>3),vt|=Rt.ia;vt&&(alert("todo:VP8InitRandom"),Le.ia=1)}Le.Ga=q.Id,100<Le.Ga?Le.Ga=100:0>Le.Ga&&(Le.Ga=0)}Cr(w,ce)||(T=w.a)}}else T=w.a}T==0&&Te.Oa!=null&&Te.Oa.fd&&(T=xl(Te.ba))}Te=T}Me=Te!=0?null:11>Me?Oe.f.RGBA.eb:Oe.f.kb.y}else Me=null;return Me};var Nf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(O,j){for(var J="",U=0;U<4;U++)J+=String.fromCharCode(O[j++]);return J}function h(O,j){return(O[j+0]<<0|O[j+1]<<8|O[j+2]<<16)>>>0}function p(O,j){return(O[j+0]<<0|O[j+1]<<8|O[j+2]<<16|O[j+3]<<24)>>>0}new l;var v=[0],g=[0],x=[],E=new l,D=t,M=function(O,j){var J={},U=0,R=!1,V=0,$=0;if(J.frames=[],!function(K,Z,oe,de){for(var ye=0;ye<de;ye++)if(K[Z+ye]!=oe.charCodeAt(ye))return!0;return!1}(O,j,"RIFF",4)){var B,I;for(p(O,j+=4),j+=8;j<O.length;){var Q=c(O,j),G=p(O,j+=4);j+=4;var _e=G+(1&G);switch(Q){case"VP8 ":case"VP8L":J.frames[U]===void 0&&(J.frames[U]={}),(re=J.frames[U]).src_off=R?$:j-8,re.src_size=V+G+8,U++,R&&(R=!1,V=0,$=0);break;case"VP8X":(re=J.header={}).feature_flags=O[j];var ve=j+4;re.canvas_width=1+h(O,ve),ve+=3,re.canvas_height=1+h(O,ve),ve+=3;break;case"ALPH":R=!0,V=_e+8,$=j-8;break;case"ANIM":(re=J.header).bgcolor=p(O,j),ve=j+4,re.loop_count=(B=O)[(I=ve)+0]<<0|B[I+1]<<8,ve+=2;break;case"ANMF":var qe,re;(re=J.frames[U]={}).offset_x=2*h(O,j),j+=3,re.offset_y=2*h(O,j),j+=3,re.width=1+h(O,j),j+=3,re.height=1+h(O,j),j+=3,re.duration=h(O,j),j+=3,qe=O[j++],re.dispose=1&qe,re.blend=qe>>1&1}Q!="ANMF"&&(j+=_e)}return J}}(D,0);M.response=D,M.rgbaoutput=!0,M.dataurl=!1;var A=M.header?M.header:null,z=M.frames?M.frames:null;if(A){A.loop_counter=A.loop_count,v=[A.canvas_height],g=[A.canvas_width];for(var Y=0;Y<z.length&&z[Y].blend!=0;Y++);}var ne=z[0],ge=E.WebPDecodeRGBA(D,ne.src_off,ne.src_size,g,v);ne.rgba=ge,ne.imgwidth=g[0],ne.imgheight=v[0];for(var pe=0;pe<g[0]*v[0]*4;pe++)x[pe]=ge[pe];return this.width=g,this.height=v,this.data=x,this}(function(t){var e=function(){return typeof Eb=="function"},n=function(v,g,x,E){var D=4,M=o;switch(E){case t.image_compression.FAST:D=1,M=s;break;case t.image_compression.MEDIUM:D=6,M=a;break;case t.image_compression.SLOW:D=9,M=l}v=r(v,g,x,M);var A=Eb(v,{level:D});return t.__addimage__.arrayBufferToBinaryString(A)},r=function(v,g,x,E){for(var D,M,A,z=v.length/g,Y=new Uint8Array(v.length+z),ne=h(),ge=0;ge<z;ge+=1){if(A=ge*g,D=v.subarray(A,A+g),E)Y.set(E(D,x,M),A+ge);else{for(var pe,O=ne.length,j=[];pe<O;pe+=1)j[pe]=ne[pe](D,x,M);var J=p(j.concat());Y.set(j[J],A+ge)}M=D}return Y},i=function(v){var g=Array.apply([],v);return g.unshift(0),g},s=function(v,g){var x,E=[],D=v.length;E[0]=1;for(var M=0;M<D;M+=1)x=v[M-g]||0,E[M+1]=v[M]-x+256&255;return E},o=function(v,g,x){var E,D=[],M=v.length;D[0]=2;for(var A=0;A<M;A+=1)E=x&&x[A]||0,D[A+1]=v[A]-E+256&255;return D},a=function(v,g,x){var E,D,M=[],A=v.length;M[0]=3;for(var z=0;z<A;z+=1)E=v[z-g]||0,D=x&&x[z]||0,M[z+1]=v[z]+256-(E+D>>>1)&255;return M},l=function(v,g,x){var E,D,M,A,z=[],Y=v.length;z[0]=4;for(var ne=0;ne<Y;ne+=1)E=v[ne-g]||0,D=x&&x[ne]||0,M=x&&x[ne-g]||0,A=c(E,D,M),z[ne+1]=v[ne]-A+256&255;return z},c=function(v,g,x){if(v===g&&g===x)return v;var E=Math.abs(g-x),D=Math.abs(v-x),M=Math.abs(v+g-x-x);return E<=D&&E<=M?v:D<=M?g:x},h=function(){return[i,s,o,a,l]},p=function(v){var g=v.map(function(x){return x.reduce(function(E,D){return E+Math.abs(D)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(v,g,x,E){var D,M,A,z,Y,ne,ge,pe,O,j,J,U,R,V,$,B=this.decode.FLATE_DECODE,I="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(A=new zH(v)).imgData,M=A.bits,D=A.colorSpace,Y=A.colors,[4,6].indexOf(A.colorType)!==-1){if(A.bits===8){O=(pe=A.pixelBitlength==32?new Uint32Array(A.decodePixels().buffer):A.pixelBitlength==16?new Uint16Array(A.decodePixels().buffer):new Uint8Array(A.decodePixels().buffer)).length,J=new Uint8Array(O*A.colors),j=new Uint8Array(O);var Q,G=A.pixelBitlength-A.bits;for(V=0,$=0;V<O;V++){for(R=pe[V],Q=0;Q<G;)J[$++]=R>>>Q&255,Q+=A.bits;j[V]=R>>>Q&255}}if(A.bits===16){O=(pe=new Uint32Array(A.decodePixels().buffer)).length,J=new Uint8Array(O*(32/A.pixelBitlength)*A.colors),j=new Uint8Array(O*(32/A.pixelBitlength)),U=A.colors>1,V=0,$=0;for(var _e=0;V<O;)R=pe[V++],J[$++]=R>>>0&255,U&&(J[$++]=R>>>16&255,R=pe[V++],J[$++]=R>>>0&255),j[_e++]=R>>>16&255;M=8}E!==t.image_compression.NONE&&e()?(v=n(J,A.width*A.colors,A.colors,E),ge=n(j,A.width,1,E)):(v=J,ge=j,B=void 0)}if(A.colorType===3&&(D=this.color_spaces.INDEXED,ne=A.palette,A.transparency.indexed)){var ve=A.transparency.indexed,qe=0;for(V=0,O=ve.length;V<O;++V)qe+=ve[V];if((qe/=255)===O-1&&ve.indexOf(0)!==-1)z=[ve.indexOf(0)];else if(qe!==O){for(pe=A.decodePixels(),j=new Uint8Array(pe.length),V=0,O=pe.length;V<O;V++)j[V]=ve[pe[V]];ge=n(j,A.width,1)}}var re=function(K){var Z;switch(K){case t.image_compression.FAST:Z=11;break;case t.image_compression.MEDIUM:Z=13;break;case t.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(E);return B===this.decode.FLATE_DECODE&&(I="/Predictor "+re+" "),I+="/Colors "+Y+" /BitsPerComponent "+M+" /Columns "+A.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(ge&&this.__addimage__.isArrayBuffer(ge)||this.__addimage__.isArrayBufferView(ge))&&(ge=this.__addimage__.arrayBufferToBinaryString(ge)),{alias:x,data:v,index:g,filter:B,decodeParameters:I,transparency:z,palette:ne,sMask:ge,predictor:re,width:A.width,height:A.height,bitsPerComponent:M,colorSpace:D}}}})(Or.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new $H(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},h=new l2(100).encode(c,100);return t.processJPEG.call(this,h,n,r,i)},t.processGIF87A=t.processGIF89A}(Or.API),dc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},dc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Cs.log("bit decode error:"+n)}},dc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},dc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},dc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},dc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,h=r*this.width*4+4*i;this.data[h]=l,this.data[h+1]=a,this.data[h+2]=o,this.data[h+3]=c}this.pos+=t}},dc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,h=i*this.width*4+4*s;this.data[h]=c,this.data[h+1]=l,this.data[h+2]=a,this.data[h+3]=255}this.pos+=t}},dc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},dc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},dc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new dc(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new l2(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(Or.API),I5.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new I5(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new l2(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(Or.API),Or.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var h=r[c],p=r[c+1],v=r[c+2],g=r[c+3];s[a++]=h,s[a++]=p,s[a++]=v,o[l++]=g}var x=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:x,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Or.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Yf=Or.API,C0=Yf.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,h=c.fof?c.fof:1,p=e.doKerning!==!1,v=0,g=t.length,x=0,E=a[0]||l,D=[];for(n=0;n<g;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?D.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(v=p&&ps(c[r])==="object"&&!isNaN(parseInt(c[r][x],10))?c[r][x]/h:0,D.push((a[r]||E)/l+v)),x=r;return D},T5=Yf.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Yf.processArabic&&(t=Yf.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:C0.apply(this,arguments).reduce(function(s,o){return s+o},0)},D5=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},N5=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,h=[],p=[h],v=n.textIndent||0,g=0,x=0,E=t.split(" "),D=C0.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?E[0].length+2:n.lineIndent||0){var M=Array(l).join(" "),A=[];E.map(function(Y){(Y=Y.split(/\s*\n/)).length>1?A=A.concat(Y.map(function(ne,ge){return(ge&&ne.length?`
`:"")+ne})):A.push(Y[0])}),E=A,l=T5.apply(this,[M,n])}for(s=0,o=E.length;s<o;s++){var z=0;if(r=E[s],l&&r[0]==`
`&&(r=r.substr(1),z=1),v+g+(x=(i=C0.apply(this,[r,n])).reduce(function(Y,ne){return Y+ne},0))>e||z){if(x>e){for(a=D5.apply(this,[r,i,e-(v+g),e]),h.push(a.shift()),h=[a.pop()];a.length;)p.push([a.shift()]);x=i.slice(r.length-(h[0]?h[0].length:0)).reduce(function(Y,ne){return Y+ne},0)}else h=[r];p.push(h),v=x+l,g=D}else h.push(r),v+=g+x,g=D}return c=l?function(Y,ne){return(ne?M:"")+Y.join(" ")}:function(Y){return Y.join(" ")},p.map(c)},Yf.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var p=this.internal.getFont(h.fontName,h.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(N5.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var v,g,x,E,D=["{"];for(var M in p){if(v=p[M],isNaN(parseInt(M,10))?g="'"+M+"'":(M=parseInt(M,10),g=(g=s(M).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof v=="number")v<0?(x=s(v).slice(3),E="-"):(x=s(v).slice(2),E=""),x=E+x.slice(0,-1)+r[x.slice(-1)];else{if(ps(v)!=="object")throw new Error("Don't know what to do with value type "+ps(v)+".");x=o(v)}D.push(g+x)}return D.push("}"),D.join("")},a=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,g,x,E,D={},M=1,A=D,z=[],Y="",ne="",ge=p.length-1,pe=1;pe<ge;pe+=1)(E=p[pe])=="'"?v?(x=v.join(""),v=void 0):v=[]:v?v.push(E):E=="{"?(z.push([A,x]),A={},x=void 0):E=="}"?((g=z.pop())[0][g[1]]=A,x=void 0,A=g[0]):E=="-"?M=-1:x===void 0?n.hasOwnProperty(E)?(Y+=n[E],x=parseInt(Y,16)*M,M=1,Y=""):Y+=E:n.hasOwnProperty(E)?(ne+=n[E],A[x]=parseInt(ne,16)*M,M=1,x=void 0,ne=""):ne+=E;return D},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},h={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var v=p.font,g=h.Unicode[v.postScriptName];g&&(v.metadata.Unicode={},v.metadata.Unicode.widths=g.widths,v.metadata.Unicode.kerning=g.kerning);var x=c.Unicode[v.postScriptName];x&&(v.metadata.Unicode.encoding=x,v.encoding=x.codePages[0])}])}(Or.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Wg(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Or),function(t){function e(){return(Rr.canvg?Promise.resolve(Rr.canvg):kd(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Or.API.addSvgAsImage=function(n,r,i,s,o,a,l,c){if(isNaN(r)||isNaN(i))throw Cs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Cs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=s,h.height=o;var p=h.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,h.width,h.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(x){return x.fromString(p,n,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(v)}).then(function(){g.addImage(h.toDataURL("image/jpeg",1),r,i,s,o,l,c)})}}(),Or.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},Or.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,h=0,p=0;function v(x,E){var D,M=!1;for(D=0;D<x.length;D+=1)x[D]===E&&(M=!0);return M}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=a.length;for(p=0;p<g;p+=1)n[a[p]].value=n[a[p]].defaultValue,n[a[p]].explicitSet=!1}if(ps(t)==="object"){for(i in t)if(s=t[i],v(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&v(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(h=0;h<s[c].length;h+=1)typeof s[c][h]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,E=[];for(x in n)n[x].explicitSet===!0&&(n[x].type==="name"?E.push("/"+x+" /"+n[x].value):E.push("/"+x+" "+n[x].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(Or.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],h=[""],p=0,v=s.length;p<v;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return h.join("");a=a.toString(16),h.push(c[4-a.length],a)}return h.join("")},r=function(s){var o,a,l,c,h,p,v;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,v=(a=Object.keys(s).sort(function(g,x){return g-x})).length;p<v;p++)o=a[p],l.length>=100&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),h+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,h=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,v=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),g="",x=0;x<v.length;x++)g+=String.fromCharCode(v[x]);var E=c();h({data:g,addLength1:!0,objectId:E}),l("endobj");var D=c();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:D}),l("endobj");var M=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+ap(a.fontName)),l("/FontFile2 "+E+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var A=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+ap(a.fontName)),l("/FontDescriptor "+M+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+D+" 0 R"),l("/BaseFont /"+ap(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+A+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,h=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,v="",g=0;g<p.length;g++)v+=String.fromCharCode(p[g]);var x=c();h({data:v,addLength1:!0,objectId:x}),l("endobj");var E=c();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:E}),l("endobj");var D=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+x+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+ap(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var M=0;M<a.metadata.hmtx.widths.length;M++)a.metadata.hmtx.widths[M]=parseInt(a.metadata.hmtx.widths[M]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+ap(a.fontName)+"/FontDescriptor "+D+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,h=s.options||{},p=s.mutex||{},v=p.pdfEscape,g=p.activeFontKey,x=p.fonts,E=g,D="",M=0,A="",z=x[E].encoding;if(x[E].encoding!=="Identity-H")return{text:a,x:l,y:c,options:h,mutex:p};for(A=a,E=g,Array.isArray(a)&&(A=a[0]),M=0;M<A.length;M+=1)x[E].metadata.hasOwnProperty("cmap")&&(o=x[E].metadata.cmap.unicode.codeMap[A[M].charCodeAt(0)]),o||A[M].charCodeAt(0)<256&&x[E].metadata.hasOwnProperty("Unicode")?D+=A[M]:D+="";var Y="";return parseInt(E.slice(1))<14||z==="WinAnsiEncoding"?Y=v(D,E).split("").map(function(ne){return ne.charCodeAt(0).toString(16)}).join(""):z==="Identity-H"&&(Y=n(D,x[E])),p.isHex=!0,{text:Y,x:l,y:c,options:h,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(Or),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Or.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,h,p=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},D=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],M=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),A=!1,z=0;this.__bidiEngine__={};var Y=function(U){var R=U.charCodeAt(),V=R>>8,$=E[V];return $!==void 0?p[256*$+(255&R)]:V===252||V===253?"AL":M.test(V)?"L":V===8?"R":"N"},ne=function(U){for(var R,V=0;V<U.length;V++){if((R=Y(U.charAt(V)))==="L")return!1;if(R==="R")return!0}return!1},ge=function(U,R,V,$){var B,I,Q,G,_e=R[$];switch(_e){case"L":case"R":A=!1;break;case"N":case"AN":break;case"EN":A&&(_e="AN");break;case"AL":A=!0,_e="R";break;case"WS":_e="N";break;case"CS":$<1||$+1>=R.length||(B=V[$-1])!=="EN"&&B!=="AN"||(I=R[$+1])!=="EN"&&I!=="AN"?_e="N":A&&(I="AN"),_e=I===B?I:"N";break;case"ES":_e=(B=$>0?V[$-1]:"B")==="EN"&&$+1<R.length&&R[$+1]==="EN"?"EN":"N";break;case"ET":if($>0&&V[$-1]==="EN"){_e="EN";break}if(A){_e="N";break}for(Q=$+1,G=R.length;Q<G&&R[Q]==="ET";)Q++;_e=Q<G&&R[Q]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(G=R.length,Q=$+1;Q<G&&R[Q]==="NSM";)Q++;if(Q<G){var ve=U[$],qe=ve>=1425&&ve<=2303||ve===64286;if(B=R[Q],qe&&(B==="R"||B==="AL")){_e="R";break}}}_e=$<1||(B=R[$-1])==="B"?"N":V[$-1];break;case"B":A=!1,i=!0,_e=z;break;case"S":s=!0,_e="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":A=!1;break;case"BN":_e="N"}return _e},pe=function(U,R,V){var $=U.split("");return V&&O($,V,{hiLevel:z}),$.reverse(),R&&R.reverse(),$.join("")},O=function(U,R,V){var $,B,I,Q,G,_e=-1,ve=U.length,qe=0,re=[],K=z?g:v,Z=[];for(A=!1,i=!1,s=!1,B=0;B<ve;B++)Z[B]=Y(U[B]);for(I=0;I<ve;I++){if(G=qe,re[I]=ge(U,Z,re,I),$=240&(qe=K[G][x[re[I]]]),qe&=15,R[I]=Q=K[qe][5],$>0)if($===16){for(B=_e;B<I;B++)R[B]=1;_e=-1}else _e=-1;if(K[qe][6])_e===-1&&(_e=I);else if(_e>-1){for(B=_e;B<I;B++)R[B]=Q;_e=-1}Z[I]==="B"&&(R[I]=0),V.hiLevel|=Q}s&&function(oe,de,ye){for(var he=0;he<ye;he++)if(oe[he]==="S"){de[he]=z;for(var X=he-1;X>=0&&oe[X]==="WS";X--)de[X]=z}}(Z,R,ve)},j=function(U,R,V,$,B){if(!(B.hiLevel<U)){if(U===1&&z===1&&!i)return R.reverse(),void(V&&V.reverse());for(var I,Q,G,_e,ve=R.length,qe=0;qe<ve;){if($[qe]>=U){for(G=qe+1;G<ve&&$[G]>=U;)G++;for(_e=qe,Q=G-1;_e<Q;_e++,Q--)I=R[_e],R[_e]=R[Q],R[Q]=I,V&&(I=V[_e],V[_e]=V[Q],V[Q]=I);qe=G}qe++}}},J=function(U,R,V){var $=U.split(""),B={hiLevel:z};return V||(V=[]),O($,V,B),function(I,Q,G){if(G.hiLevel!==0&&h)for(var _e,ve=0;ve<I.length;ve++)Q[ve]===1&&(_e=D.indexOf(I[ve]))>=0&&(I[ve]=D[_e+1])}($,V,B),j(2,$,R,V,B),j(1,$,R,V,B),$.join("")};return this.__bidiEngine__.doBidiReorder=function(U,R,V){if(function(B,I){if(I)for(var Q=0;Q<B.length;Q++)I[Q]=Q;a===void 0&&(a=ne(B)),c===void 0&&(c=ne(B))}(U,R),o||!l||c)if(o&&l&&a^c)z=a?1:0,U=pe(U,R,V);else if(!o&&l&&c)z=a?1:0,U=J(U,R,V),U=pe(U,R);else if(!o||a||l||c){if(o&&!l&&a^c)U=pe(U,R),a?(z=0,U=J(U,R,V)):(z=1,U=J(U,R,V),U=pe(U,R));else if(o&&a&&!l&&c)z=1,U=J(U,R,V),U=pe(U,R);else if(!o&&!l&&a^c){var $=h;a?(z=1,U=J(U,R,V),z=0,h=!1,U=J(U,R,V),h=$):(z=0,U=J(U,R,V),U=pe(U,R),z=1,h=!1,U=J(U,R,V),h=$,U=pe(U,R))}}else z=0,U=J(U,R,V);else z=a?1:0,U=J(U,R,V);return U},this.__bidiEngine__.setOptions=function(U){U&&(o=U.isInputVisual,l=U.isOutputVisual,a=U.isInputRtl,c=U.isOutputRtl,h=U.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(Or),Or.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Sh(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new nW(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new VH(this.contents),this.head=new HH(this),this.name=new KH(this),this.cmap=new iP(this),this.toUnicode={},this.hhea=new WH(this),this.maxp=new ZH(this),this.hmtx=new XH(this),this.post=new qH(this),this.os2=new GH(this),this.loca=new tW(this),this.glyf=new JH(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Mc,Sh=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),VH=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,h,p,v,g,x,E;for(E in g=Object.keys(n).length,l=Math.log(2),p=16*Math.floor(Math.log(g)/l),o=Math.floor(p/l),h=16*g-p,(i=new Sh).writeInt(this.scalarType),i.writeShort(g),i.writeShort(p),i.writeShort(o),i.writeShort(h),s=16*g,c=i.pos+s,a=null,x=[],n)for(v=n[E],i.writeString(E),i.writeInt(t(v)),i.writeInt(c),i.writeInt(v.length),x=x.concat(v),E==="head"&&(a=c),c+=v.length;c%4;)x.push(0),c++;return i.write(x),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=sP.call(n);n.length%4;)n.push(0);for(s=new Sh(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),UH={}.hasOwnProperty,id=function(t,e){for(var n in e)UH.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Mc=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var HH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Mc),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Sh).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),B5=function(){function t(e,n){var r,i,s,o,a,l,c,h,p,v,g,x,E,D,M,A,z;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(g=e.readUInt16(),v=g/2,e.pos+=6,s=function(){var Y,ne;for(ne=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)ne.push(e.readUInt16());return ne}(),e.pos+=2,E=function(){var Y,ne;for(ne=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)ne.push(e.readUInt16());return ne}(),c=function(){var Y,ne;for(ne=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)ne.push(e.readUInt16());return ne}(),h=function(){var Y,ne;for(ne=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)ne.push(e.readUInt16());return ne}(),i=(this.length-e.pos+this.offset)/2,a=function(){var Y,ne;for(ne=[],l=Y=0;0<=i?Y<i:Y>i;l=0<=i?++Y:--Y)ne.push(e.readUInt16());return ne}(),l=M=0,z=s.length;M<z;l=++M)for(D=s[l],r=A=x=E[l];x<=D?A<=D:A>=D;r=x<=D?++A:--A)h[l]===0?o=r+c[l]:(o=a[h[l]/2+(r-x)-(v-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=p}return t.encode=function(e,n){var r,i,s,o,a,l,c,h,p,v,g,x,E,D,M,A,z,Y,ne,ge,pe,O,j,J,U,R,V,$,B,I,Q,G,_e,ve,qe,re,K,Z,oe,de,ye,he,X,Ae,De,Xe;switch($=new Sh,o=Object.keys(e).sort(function(fe,ee){return fe-ee}),n){case"macroman":for(E=0,D=function(){var fe=[];for(x=0;x<256;++x)fe.push(0);return fe}(),A={0:0},s={},B=0,_e=o.length;B<_e;B++)A[X=e[i=o[B]]]==null&&(A[X]=++E),s[i]={old:e[i],new:A[e[i]]},D[i]=A[e[i]];return $.writeUInt16(1),$.writeUInt16(0),$.writeUInt32(12),$.writeUInt16(0),$.writeUInt16(262),$.writeUInt16(0),$.write(D),{charMap:s,subtable:$.data,maxGlyphID:E+1};case"unicode":for(R=[],p=[],z=0,A={},r={},M=c=null,I=0,ve=o.length;I<ve;I++)A[ne=e[i=o[I]]]==null&&(A[ne]=++z),r[i]={old:ne,new:A[ne]},a=A[ne]-i,M!=null&&a===c||(M&&p.push(M),R.push(i),c=a),M=i;for(M&&p.push(M),p.push(65535),R.push(65535),J=2*(j=R.length),O=2*Math.pow(Math.log(j)/Math.LN2,2),v=Math.log(O/2)/Math.LN2,pe=2*j-O,l=[],ge=[],g=[],x=Q=0,qe=R.length;Q<qe;x=++Q){if(U=R[x],h=p[x],U===65535){l.push(0),ge.push(0);break}if(U-(V=r[U].new)>=32768)for(l.push(0),ge.push(2*(g.length+j-x)),i=G=U;U<=h?G<=h:G>=h;i=U<=h?++G:--G)g.push(r[i].new);else l.push(V-U),ge.push(0)}for($.writeUInt16(3),$.writeUInt16(1),$.writeUInt32(12),$.writeUInt16(4),$.writeUInt16(16+8*j+2*g.length),$.writeUInt16(0),$.writeUInt16(J),$.writeUInt16(O),$.writeUInt16(v),$.writeUInt16(pe),ye=0,re=p.length;ye<re;ye++)i=p[ye],$.writeUInt16(i);for($.writeUInt16(0),he=0,K=R.length;he<K;he++)i=R[he],$.writeUInt16(i);for(Ae=0,Z=l.length;Ae<Z;Ae++)a=l[Ae],$.writeUInt16(a);for(De=0,oe=ge.length;De<oe;De++)Y=ge[De],$.writeUInt16(Y);for(Xe=0,de=g.length;Xe<de;Xe++)E=g[Xe],$.writeUInt16(E);return{charMap:r,subtable:$.data,maxGlyphID:z+1}}},t}(),iP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Mc),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new B5(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=B5.encode(n,r),(s=new Sh).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),WH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Mc),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),GH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Mc),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),qH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Mc),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e}(),YH=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},KH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Mc),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,c,h,p,v,g;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=p=0,v=i.length;p<v;o=++p)s=i[o],n.pos=s.offset,h=n.readString(s.length),a=new YH(h,s),c[g=s.nameID]==null&&(c[g]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),ZH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Mc),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),XH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Mc),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,p;for(p=[],r=h=0;0<=s?h<s:h>s;r=0<=s?++h:--h)p.push(n.readInt16());return p}(),this.widths=(function(){var h,p,v,g;for(g=[],h=0,p=(v=this.metrics).length;h<p;h++)o=v[h],g.push(o.advance);return g}).call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),sP=[].slice,JH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Mc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,c,h,p,v;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new Sh(r.read(s))).readShort(),h=l.readShort(),v=l.readShort(),c=l.readShort(),p=l.readShort(),this.cache[n]=a===-1?new eW(l,h,v,c,p):new QH(l,a,h,v,c,p),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),QH=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),eW=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Sh(sP.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),tW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Mc),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var h=new Array(4*i.length),p=0;p<i.length;++p)h[4*p+3]=255&i[p],h[4*p+2]=(65280&i[p])>>8,h[4*p+1]=(16711680&i[p])>>16,h[4*p]=(4278190080&i[p])>>24;return h},e}(),nW=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,h,p,v,g,x,E,D,M;for(i in r=iP.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),g={0:0},M=r.charMap)g[(l=M[i]).old]=l.new;for(x in v=r.maxGlyphID,o)x in g||(g[x]=v++);return h=function(A){var z,Y;for(z in Y={},A)Y[A[z]]=z;return Y}(g),p=Object.keys(h).sort(function(A,z){return A-z}),E=function(){var A,z,Y;for(Y=[],A=0,z=p.length;A<z;A++)a=p[A],Y.push(h[a]);return Y}(),s=this.font.glyf.encode(o,E,g),c=this.font.loca.encode(s.offsets,E),D={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(D["OS/2"]=this.font.os2.raw()),this.font.directory.encode(D)},t}();Or.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();const rW={class:"h-full flex"},iW={class:"flex-1 relative"},sW={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},oW={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},aW={class:"text-center max-w-lg mx-auto p-8"},lW={class:"space-y-4"},uW={class:"map-parent"},cW={class:"map-content flex flex-col h-full"},dW={class:"flex-1 flex flex-col md:flex-row relative"},hW={class:"flex-1 relative"},fW={key:0,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},pW={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-[9999] p-4 overflow-y-auto"},gW={class:"bg-white rounded-lg p-6 max-w-2xl w-full my-8 relative"},mW={class:"flex justify-between items-center mb-4 sticky top-0 bg-white pb-4 border-b"},vW={class:"overflow-y-auto max-h-[calc(100vh-12rem)]"},yW={key:0,class:"space-y-4"},bW={key:0,class:"space-y-2"},_W={class:"grid grid-cols-1 gap-2"},wW=["onClick"],xW={class:"font-medium text-gray-900"},LW={key:1,class:"space-y-2"},SW={class:"flex items-center mb-4"},CW={class:"text-sm text-gray-600"},EW={class:"grid grid-cols-1 gap-2"},PW=["onClick"],MW={class:"font-medium text-gray-900"},kW={key:2,class:"space-y-2"},AW={class:"flex items-center mb-4"},TW={class:"text-sm text-gray-600"},DW={class:"grid grid-cols-1 gap-2"},NW={key:0,class:"text-center py-4"},OW=["onClick"],IW={class:"font-medium text-gray-900"},BW={key:3,class:"space-y-2"},RW={class:"flex items-center mb-4"},FW={class:"text-sm text-gray-600"},jW={class:"grid grid-cols-1 gap-2"},zW=["onClick"],$W={class:"font-medium text-gray-900"},VW={class:"text-sm text-gray-500"},UW={class:"text-xs text-gray-400 mt-1"},HW=["onClick"],WW={key:1,class:"space-y-4"},GW={key:0,class:"space-y-2"},qW={class:"grid grid-cols-1 gap-2"},YW={key:0,class:"text-center py-8"},KW=["onClick"],ZW={class:"font-medium text-gray-900"},XW={key:1,class:"space-y-2"},JW={class:"flex items-center mb-4"},QW={class:"text-sm text-gray-600"},eG={class:"grid grid-cols-1 gap-2"},tG=["onClick"],nG={class:"font-medium text-gray-900"},rG={class:"text-sm text-gray-500"},iG={class:"text-xs text-gray-400 mt-1"},sG=["onClick"],oG={key:2,class:"space-y-4"},aG={key:0,class:"space-y-2"},lG={class:"grid grid-cols-1 gap-2"},uG=["onClick"],cG={class:"font-medium text-gray-900"},dG={key:1,class:"space-y-2"},hG={class:"flex items-center mb-4"},fG={class:"text-sm text-gray-600"},pG={class:"grid grid-cols-1 gap-2"},gG={key:0,class:"text-center py-4"},mG=["onClick"],vG={class:"font-medium text-gray-900"},yG={key:2,class:"space-y-2"},bG={class:"flex items-center mb-4"},_G={class:"text-sm text-gray-600"},wG={class:"grid grid-cols-1 gap-2"},xG=["onClick"],LG={class:"font-medium text-gray-900"},SG={class:"text-sm text-gray-500"},CG={class:"text-xs text-gray-400 mt-1"},EG=["onClick"],PG={key:3,class:"space-y-4"},MG={key:0,class:"text-center py-8"},kG={key:1,class:"space-y-2"},AG=["onClick"],TG={class:"font-medium text-gray-900"},DG={class:"text-sm text-gray-500"},NG={class:"text-xs text-gray-400 mt-1"},OG=["onClick"],IG={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4"},BG={class:"bg-white rounded-lg p-6 max-w-md w-full shadow-xl"},RG={class:"text-center mb-4"},FG={class:"mt-2 text-gray-600"},R5=Hs({__name:"MapView",emits:["shape-selected"],setup(t,{emit:e}){const n=JB(),r=Ct(null),i=Ct(!1),s=$y(),o=Ap(),a=bf(),l=su(),c=Ct([]),h=Ct({planId:n.query.planId?parseInt(n.query.planId):null,noteId:n.query.noteId?parseInt(n.query.noteId):null,lat:n.query.lat?parseFloat(n.query.lat):null,lng:n.query.lng?parseFloat(n.query.lng):null,tool:n.query.tool||null}),{currentTool:p,selectedShape:v,map:g,initMap:x,setDrawingTool:E,updateShapeStyle:D,updateShapeProperties:M,featureGroup:A,adjustView:z,clearActiveControlPoints:Y,calculateConnectedCoverageArea:ne,isDrawing:ge}=BU(),{initMap:pe,changeBaseMap:O}=RU(),j=Ct(!1),J=Ct(!1),U=Ct(!1),R=Ct(!1),V=Ct(null),$=Ct(null),B=Ct(null),I=Ct(!1),Q=Ct(null),G=xo(),_e=Ct([]),ve=Ct([]),qe=Ct([]),re=Ct(null),K=Ct(null),Z=Ct(null),oe=Ct(!1),de=Ct(!1),ye=Ct(!1),he=Ct(null),X=Xn(()=>{var Ze,Ye;return console.log("[MapView][filteredClients] Computing with:",{userType:(Ze=G.user)==null?void 0:Ze.user_type,selectedSalarie:re.value,salarieVisiteurs:ve.value,visiteurCount:((Ye=ve.value)==null?void 0:Ye.length)||0}),G.isSalarie||re.value?ve.value:[]}),Ae=Xn(()=>{var Ln,jt,$n;if(!v.value)return null;console.log("[MapView][selectedShape] Initial layer state:",{layer:v.value,hasName:"name"in v.value,name:v.value.name,hasProperties:"properties"in v.value,propertiesName:(Ln=v.value.properties)==null?void 0:Ln.name,allLayerKeys:Object.keys(v.value),allPropertiesKeys:v.value.properties?Object.keys(v.value.properties):[],_leaflet_id:v.value._leaflet_id,_dbId:v.value._dbId,descriptor:Object.getOwnPropertyDescriptor(v.value,"name")});const Ze=v.value.properties||{};let Ye="unknown";Ze.type?Ye=Ze.type:v.value instanceof Vt.Circle?Ye="Circle":v.value instanceof qa||v.value instanceof Vt.Rectangle?Ye="Rectangle":v.value instanceof uh||v.value instanceof Vt.Polygon?Ye="Polygon":(v.value instanceof pa||v.value instanceof Vt.Polyline&&!(v.value instanceof Vt.Polygon))&&(Ye="Line"),console.log(`[MapView][selectedShape] Type de forme détecté: ${Ye}`),Ze.type||(v.value.properties||(v.value.properties={}),v.value.properties.type=Ye);let Ut;if(Ze.style&&Ze.style.name)Ut=Ze.style.name,console.log("[MapView][selectedShape] Using name from style:",Ut);else if(Ze.name)Ut=Ze.name,console.log("[MapView][selectedShape] Using name from properties:",Ut);else if(v.value.name)Ut=v.value.name,console.log("[MapView][selectedShape] Using name from layer:",Ut);else{const xt=Object.getOwnPropertyDescriptor(v.value,"name");xt&&xt.value&&(Ut=xt.value,console.log("[MapView][selectedShape] Found name in non-enumerable layer property:",Ut));const Kt=["_name","displayName","title"];for(const Yn of Kt)if(v.value[Yn]){Ut=v.value[Yn],console.log(`[MapView][selectedShape] Found name in ${Yn}:`,Ut);break}}Ut&&(console.log(`[MapView][selectedShape] Ensuring name "${Ut}" is set everywhere`),v.value.properties||(v.value.properties={}),v.value.properties.name=Ut,v.value.properties.style||(v.value.properties.style={}),v.value.properties.style.name=Ut,v.value.name=Ut,typeof v.value.setName=="function"&&(v.value.setName(Ut),console.log(`[MapView][selectedShape] Used setName method to set name "${Ut}"`))),v.value.properties.category||(v.value.properties.category="forages"),v.value.properties.accessLevel||(v.value.properties.accessLevel="visitor"),console.log("[MapView][selectedShape] Preparing properties for DrawingTools:",{type:Ye,name:Ze.name,foundName:Ut,hasNameProperty:"name"in Ze,allPropertiesKeys:Object.keys(Ze),layerId:v.value._leaflet_id,rawProperties:Ze,layerName:v.value.name,layerPropertiesName:(jt=v.value.properties)==null?void 0:jt.name});const En={...Ze,type:Ye,name:Ut||v.value.name||Ze.name||void 0,category:v.value.properties.category||"forages",accessLevel:v.value.properties.accessLevel||"visitor"},On={type:Ye,properties:En,layer:v.value,options:v.value.options||{}};return console.log("[MapView][selectedShape] Final shape object for DrawingTools:",{type:On.type,hasName:"name"in On.properties,name:On.properties.name,layerName:On.layer.name,layerPropertiesName:($n=On.layer.properties)==null?void 0:$n.name}),On});function De(Ze){const Ye=Ze.getCenter(),Ut=Ze.getZoom(),En={lat:Ye.lat,lng:Ye.lng,zoom:Ut};document.cookie=`mapState=${JSON.stringify(En)};max-age=2592000;path=/`}function Xe(){const Ye=document.cookie.split(";").find(Ut=>Ut.trim().startsWith("mapState="));if(Ye)try{return JSON.parse(Ye.split("=")[1])}catch(Ut){return console.error("Erreur lors de la lecture du cookie de position:",Ut),null}return null}Lo(async()=>{var Ze,Ye;console.log("[MapView][onMounted] Initialisation du composant MapView"),window.addEventListener("resize",qn),console.log("[MapView][onMounted] État initial des filtres dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2));try{if(await s.fetchPlans(),(G.isAdmin||G.isEntreprise)&&await Tn(),G.isEntreprise){oe.value=!0;try{const xt=await In.get("/users/",{params:{role:"SALARIE",entreprise:(Ze=G.user)==null?void 0:Ze.id}});_e.value=xt.data}catch(xt){console.error("Error loading salaries:",xt),_e.value=[]}finally{oe.value=!1}}if(G.isSalarie){de.value=!0;try{const xt=await G.fetchSalarieVisiteurs(((Ye=G.user)==null?void 0:Ye.id)||0);ve.value=Array.isArray(xt)?xt:[xt]}catch(xt){console.error("Error loading clients:",xt)}finally{de.value=!1}}const Ut=Xe(),En=Ut?[Ut.lat,Ut.lng]:[46.603354,1.888334],On=(Ut==null?void 0:Ut.zoom)??6;if(r.value&&!g.value){const xt=x(r.value,En,On);xt.pm.setLang("fr"),xt.pm.addControls({rotateMode:!1}),pe(xt),xt.on("moveend",()=>{De(xt)}),window.addEventListener("map-set-location",Kt=>{if(xt&&Kt.detail){const{lat:Yn,lng:gr,zoom:Sr}=Kt.detail;xt.flyTo([Yn,gr],Sr,{duration:1.5,easeLinearity:.25})}}),A.value&&(A.value.on("layeradd",Kt=>{const Yn=Kt.layer;Yn&&Yn._leaflet_id&&c.value.findIndex(Sr=>Sr.layer&&Sr.layer._leaflet_id===Yn._leaflet_id)===-1&&(console.log(`[MapView][featureGroup.layeradd] Ajout de la couche ${Yn._leaflet_id} à shapes.value`),c.value.push({layer:Yn,id:Yn._dbId||Yn._leaflet_id}))}),A.value.on("layerremove",Kt=>{const Yn=Kt.layer;if(Yn&&Yn._leaflet_id)if(!Yn._dbId&&(!Yn.properties||Yn.properties&&!Yn.properties.type)){console.log(`[MapView][featureGroup.layerremove] Couche temporaire ${Yn._leaflet_id} supprimée définitivement`);const Sr=c.value.findIndex(an=>an.layer&&an.layer._leaflet_id===Yn._leaflet_id);Sr!==-1&&c.value.splice(Sr,1)}else console.log(`[MapView][featureGroup.layerremove] Couche ${Yn._leaflet_id} supprimée du featureGroup mais conservée dans shapes.value pour restauration ultérieure`)}))}if(h.value.planId)try{console.log("[MapView][onMounted] Chargement du plan depuis les paramètres d'URL:",h.value.planId),await je(h.value.planId);const xt=document.querySelector(".map-parent");xt instanceof HTMLElement&&(xt.style.display="block"),h.value.lat&&h.value.lng&&g.value&&(console.log("[MapView][onMounted] Centrage de la carte sur les coordonnées:",h.value.lat,h.value.lng),g.value.flyTo([h.value.lat,h.value.lng],16)),h.value.noteId&&A.value&&(console.log("[MapView][onMounted] Recherche de la note:",h.value.noteId),setTimeout(()=>{var Yn;const Kt=((Yn=A.value)==null?void 0:Yn.getLayers())||[];for(const gr of Kt)if(gr._dbId===h.value.noteId||gr.id===h.value.noteId){console.log("[MapView][onMounted] Note trouvée:",gr),typeof gr.fire=="function"&&gr.fire("click");break}},1e3)),h.value.tool&&(console.log("[MapView][onMounted] Activation de l'outil:",h.value.tool),E(h.value.tool))}catch(xt){console.error("[MapView][onMounted] Erreur chargement plan depuis URL:",xt),Ln()}else Ln();async function Ln(){const xt=localStorage.getItem("lastPlanId");if(xt)try{console.log("[MapView][loadLastPlan] Chargement du dernier plan:",xt),await je(parseInt(xt));const Kt=document.querySelector(".map-parent");Kt instanceof HTMLElement&&(Kt.style.display="block")}catch(Kt){console.error("[MapView][loadLastPlan] Erreur chargement dernier plan:",Kt),V.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se(),localStorage.removeItem("lastPlanId")}else console.log("[MapView][loadLastPlan] Aucun dernier plan à charger"),V.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se()}window.addEventListener("shape:created",xt=>{const{shape:Kt,type:Yn,properties:gr}=xt.detail;console.log("[MapView] Nouvelle forme créée",{shape:Kt,type:Yn,properties:gr}),o.addElement(Kt),E("")}),window.addEventListener("geonote:savePlan",()=>{console.log("[MapView] Événement geonote:savePlan reçu - Sauvegarde automatique du plan"),$e()}),window.addEventListener("geonote:select",xt=>{if(console.log("[MapView] Événement geonote:select reçu",xt.detail),xt.detail&&xt.detail.geoNote){const Kt=xt.detail.geoNote;v.value=Kt,ma(()=>{console.log("[MapView] Note géolocalisée sélectionnée:",Kt)})}}),window.addEventListener("categoriesReactivated",xt=>{console.log("[MapView][categoriesReactivated] Événement reçu:",xt.detail),Di()}),window.addEventListener("shapeTypesReactivated",xt=>{console.log("[MapView][shapeTypesReactivated] Événement reçu:",xt.detail),Di()});const jt=xt=>{if(console.log("[MapView] Édition de note via Leaflet",xt),console.log("[MapView] Type de e:",typeof xt,"Contenu de e:",JSON.stringify(xt)),!xt||!xt.note){console.error("[MapView] Erreur: e.note est undefined ou null",xt);return}const Kt=xt.note;console.log("[MapView] Note à éditer:",Kt),$.value={id:Kt.id,title:Kt.title||Kt.name,description:Kt.description,location:Kt.location,columnId:Kt.columnId||a.getDefaultColumn.id,accessLevel:Kt.accessLevel,style:Kt.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:Kt.createdAt||new Date().toISOString(),updatedAt:Kt.updatedAt||new Date().toISOString(),comments:Kt.comments||[],photos:Kt.photos||[]},console.log("[MapView] editingMapNote.value après conversion:",$.value),U.value=!0,console.log("[MapView] showNoteEditModal.value:",U.value)},$n=xt=>{if(console.log("[MapView] Édition de note via événement global",xt),!xt.detail||!xt.detail.note){console.error("[MapView] Erreur: event.detail.note est undefined ou null",xt);return}const Kt=xt.detail.note;console.log("[MapView] Note à éditer (global):",Kt);let gr=xt.detail.backendId||Kt.backendId;if(!gr){const Sr=c.value.find(an=>an.layer===xt.detail.source);gr=Sr?Sr.id:Kt.id}console.log("[MapView] ID backend de la note pour l'API:",gr,"Source:",xt.detail.source?"Couche Leaflet":"Autre"),$.value={id:gr,leafletId:Kt.id,title:Kt.title||Kt.name,description:Kt.description,location:Kt.location,columnId:Kt.columnId||a.getDefaultColumn.id,accessLevel:Kt.accessLevel,style:Kt.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:Kt.createdAt||new Date().toISOString(),updatedAt:Kt.updatedAt||new Date().toISOString(),comments:Kt.comments||[],photos:Kt.photos||[]},console.log("[MapView] Note préparée pour édition:",$.value),U.value=!0};window.addEventListener("geonote:edit",$n),A.value&&(A.value.off("note:edit"),A.value.on("note:edit",jt))}catch(Ut){console.error("Error during component mount:",Ut),V.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se(),localStorage.removeItem("lastPlanId")}}),Ti(()=>o.hasUnsavedChanges,Ze=>{console.log("[MapView][watch drawingStore.hasUnsavedChanges]",Ze),Ze&&V.value&&s.markUnsavedChanges()}),Ti(()=>s.plans,Ze=>{console.log("[MapView][watch irrigationStore.plans] Mise à jour de la liste des plans:",Ze.length),J.value&&(Z.value||console.log("[MapView][watch irrigationStore.plans] Mise à jour de l'interface client"))},{deep:!0}),Ti(()=>o.filters,(Ze,Ye)=>{if(console.log("[MapView][watch drawingStore.filters] Changement de filtres détecté:",JSON.stringify(Ze,null,2)),Ye){const Ut=JSON.stringify(Ye.accessLevels)!==JSON.stringify(Ze.accessLevels),En=JSON.stringify(Ye.categories)!==JSON.stringify(Ze.categories),On=JSON.stringify(Ye.shapeTypes)!==JSON.stringify(Ze.shapeTypes);console.log("[MapView][watch drawingStore.filters] Changements détectés:",{accessLevelsChanged:Ut,categoriesChanged:En,shapeTypesChanged:On}),Ut||En||On?(console.log("[MapView][watch drawingStore.filters] Mise à jour de l'affichage suite au changement de filtres"),Di()):console.log("[MapView][watch drawingStore.filters] Aucun changement réel, pas de mise à jour")}else console.log("[MapView][watch drawingStore.filters] Mise à jour de l'affichage suite au changement de filtres"),Di()},{deep:!0});const fe=Ze=>{console.log("[MapView][filtersChanged] Événement reçu:",Ze.detail),Di()};Lo(()=>{window.addEventListener("filtersChanged",fe)}),Zu(()=>{window.removeEventListener("filtersChanged",fe),console.log("[MapView][filtersChanged] Événement désactivé")}),Ti(()=>o.getFilteredElements,(Ze,Ye)=>{console.log("[MapView][watch drawingStore.getFilteredElements] Mise à jour de l'affichage, éléments filtrés:",{nouveaux:Ze.length,anciens:Ye?Ye.length:"aucun",ids:Ze.map(Ut=>Ut.id)}),console.log("[MapView][watch drawingStore.getFilteredElements] Mise à jour de l'affichage suite au changement d'elements filtrés"),Di()},{deep:!0}),Ti(g,async Ze=>{var Ye;console.log(`
[MapView][watch map] Nouvelle carte:`,!!Ze),Ze&&s.currentPlan&&!((Ye=A.value)!=null&&Ye.getLayers().length)&&(console.log("[MapView][watch map] Chargement initial des éléments du plan:",s.currentPlan.id),se(),await o.loadPlanElements(s.currentPlan.id))}),Ti(()=>s.currentPlan,async(Ze,Ye)=>{var Ut,En,On;if((Ze==null?void 0:Ze.id)===(Ye==null?void 0:Ye.id)){console.log("[MapView][watch currentPlan] Plan identique, pas de rechargement nécessaire");return}console.log(`
[MapView][watch currentPlan] ====== CHANGEMENT DE PLAN ======`),console.log("[MapView][watch currentPlan] Nouveau plan:",Ze==null?void 0:Ze.id);try{if(Ze){console.log("[MapView][watch currentPlan] Mise à jour du plan courant..."),V.value=Ze;const Ln=document.querySelector(".map-parent");Ln instanceof HTMLElement&&(Ln.style.display="block"),console.log("[MapView][watch currentPlan] Plan mis à jour avec succès")}else{console.log("[MapView][watch currentPlan] Nettoyage du plan courant..."),V.value=null,se();const Ln=document.querySelector(".map-parent");Ln instanceof HTMLElement&&(Ln.style.display="none")}}catch(Ln){console.error("[MapView][watch currentPlan] ERREUR:",Ln),V.value=null,se()}console.log("[MapView][watch currentPlan] État final:",{currentPlanId:(Ut=V.value)==null?void 0:Ut.id,storePlanId:(En=s.currentPlan)==null?void 0:En.id,mapVisible:g.value!==null,mapParentDisplay:(On=document.querySelector(".map-parent"))==null?void 0:On.getAttribute("style")}),console.log(`[MapView][watch currentPlan] ====== FIN CHANGEMENT ======
`)},{immediate:!0}),kh(()=>{g.value&&g.value.off("moveend"),window.removeEventListener("resize",qn),window.removeEventListener("shape:created",()=>{})});function ee(){i.value=!i.value}function se(){A.value&&(A.value.eachLayer(Ze=>{var Ye;((Ye=Ze.properties)==null?void 0:Ye.type)==="Note"&&typeof Ze.resetPlanSaveState=="function"&&Ze.resetPlanSaveState()}),A.value.clearLayers()),c.value=[],Y(),v.value=null,p.value=""}async function le(Ze){return await An.measureAsync("refreshMapWithPlan",async()=>{try{An.measure("refreshMapWithPlan:clearMap",()=>{se()},"MapView"),await An.measureAsync("refreshMapWithPlan:loadPlanElements",async()=>{await o.loadPlanElements(Ze)},"MapView");const Ye=An.measure("refreshMapWithPlan:getPlanById",()=>s.getPlanById(Ze),"MapView");Ye?(An.measure("refreshMapWithPlan:updateCurrentPlan",()=>{V.value=Ye,s.setCurrentPlan(Ye),o.setCurrentPlan(Ye.id),localStorage.setItem("lastPlanId",Ye.id.toString())},"MapView"),await An.measureAsync("refreshMapWithPlan:loadPlanNotes",async()=>{try{console.log("[MapView][refreshMapWithPlan] Chargement des notes géolocalisées associées au plan:",Ze);const En=(await ka.getNotesByPlan(Ze)).data;console.log(`[MapView][refreshMapWithPlan] ${En.length} notes géolocalisées récupérées`);const On=bf();g.value&&A.value&&En.forEach(Ln=>{try{if(On.addNote({...Ln,id:Ln.id,columnId:Ln.column,accessLevel:Ln.access_level}),Ln.location&&Ln.location.type==="Point"&&Array.isArray(Ln.location.coordinates)&&Ln.location.coordinates.length===2){const jt=Ad.fromBackendData({name:Ln.title,description:Ln.description,location:Ln.location,columnId:Ln.column,accessLevel:Ln.access_level,style:Ln.style||{color:Ln.color||"#3B82F6",weight:2,opacity:1,fillColor:Ln.color||"#3B82F6",fillOpacity:.6,radius:8},category:Ln.category||"forages",comments:Ln.comments||[],photos:Ln.photos||[]});jt._dbId=Ln.id,A.value.addLayer(jt),c.value.push({id:Ln.id,type:"Note",layer:jt,properties:jt.properties}),console.log("[MapView][refreshMapWithPlan] Note géolocalisée ajoutée à la carte:",{id:Ln.id,title:Ln.title,location:Ln.location})}}catch(jt){console.error("[MapView][refreshMapWithPlan] Erreur lors de l'ajout de la note géolocalisée:",jt)}})}catch(Ut){console.error("[MapView][refreshMapWithPlan] Erreur lors du chargement des notes géolocalisées:",Ut)}},"MapView"),g.value&&A.value&&await An.measureAsync("refreshMapWithPlan:addShapesToMap",async()=>{console.log("[MapView][refreshMapWithPlan] Éléments disponibles:",{count:o.getCurrentElements.length,elements:o.getCurrentElements.map(jt=>{var $n;return{id:jt.id,type:jt.type_forme,hasName:jt.data&&"name"in jt.data,name:($n=jt.data)==null?void 0:$n.name}})});const Ut=o.getCurrentElements.reduce((jt,$n)=>(jt[$n.type_forme]||(jt[$n.type_forme]=[]),jt[$n.type_forme].push($n),jt),{}),En=["Note","Polygon","Line","Circle","Rectangle"],On=Object.keys(Ut).sort((jt,$n)=>{const xt=En.indexOf(jt),Kt=En.indexOf($n);return(xt===-1?999:xt)-(Kt===-1?999:Kt)}),Ln=jt=>{switch(jt){case"Note":return 20;case"Circle":return 15;case"Rectangle":return 15;case"Line":return 10;case"Polygon":return 5;default:return 10}};for(const jt of On){const $n=Ut[jt],xt=Ln(jt);for(let Kt=0;Kt<$n.length;Kt+=xt){const Yn=$n.slice(Kt,Kt+xt);await Promise.all(Yn.map(async gr=>{await An.measureAsync(`refreshMapWithPlan:createElement:${gr.type_forme}`,async()=>{var an;if(!A.value||!gr.data)return;let Sr=null;switch(gr.type_forme){case"Circle":{const nn=gr.data;nn.center&&nn.radius&&(Sr=new sp(Vt.latLng(nn.center[1],nn.center[0]),{...nn.style,radius:nn.radius}),nn.name&&(Sr.properties={type:"Circle",name:nn.name,style:nn.style,radius:nn.radius,diameter:nn.radius*2,surface:Math.PI*nn.radius*nn.radius,perimeter:2*Math.PI*nn.radius},Sr.name=nn.name));break}case"Rectangle":{const nn=gr.data;if(nn.bounds){const $r=Vt.latLngBounds(Vt.latLng(nn.bounds.southWest[1],nn.bounds.southWest[0]),Vt.latLng(nn.bounds.northEast[1],nn.bounds.northEast[0]));Sr=new qa($r,nn.style),nn.name&&(Sr.properties={name:nn.name},Sr.name=nn.name)}break}case"Polygon":{const nn=gr.data;if(nn.points&&nn.points.length>0){const $r=nn.points.map(Qr=>Vt.latLng(Qr[1],Qr[0]));Sr=new uh($r,nn.style),nn.name&&(Sr.properties={name:nn.name},Sr.name=nn.name)}break}case"Line":{const nn=gr.data;if(nn.points&&nn.points.length>0){const $r=nn.points.map(Qr=>Vt.latLng(Qr[1],Qr[0]));Sr=new pa($r,nn.style),nn.name&&(Sr.properties={name:nn.name},Sr.name=nn.name)}break}case"Note":{console.log("[MapView][refreshMapWithPlan] Création d'une note:",gr.data);const nn=gr.data;if(nn.location&&Array.isArray(nn.location)&&nn.location.length===2||nn.location&&typeof nn.location=="object"&&nn.location.type==="Point"&&Array.isArray(nn.location.coordinates)&&nn.location.coordinates.length===2)try{nn.category||(nn.category="forages",console.log("[MapView][refreshMapWithPlan] Catégorie par défaut ajoutée:",nn.category)),nn.accessLevel||(nn.accessLevel="private",console.log("[MapView][refreshMapWithPlan] Niveau d'accès par défaut ajouté:",nn.accessLevel));const Qr=Ad.fromBackendData(nn);Qr._dbId=gr.id,Sr=Qr,console.log("[MapView][refreshMapWithPlan] Note créée:",{id:gr.id,location:nn.location,name:nn.name,category:nn.category,accessLevel:nn.accessLevel,type:Qr.properties.type})}catch(Qr){console.error("[MapView][refreshMapWithPlan] Erreur lors de la création de la Note:",Qr)}else console.error("[MapView][refreshMapWithPlan] Données invalides pour Note:",nn),console.log("[MapView][refreshMapWithPlan] Format de location attendu:",{formatArray:"[lat, lng]",formatGeoJSON:'{ type: "Point", coordinates: [lng, lat] }'});break}}Sr&&(Sr._dbId=gr.id,(an=A.value)==null||an.addLayer(Sr),c.value.push({id:gr.id,type:gr.type_forme,layer:Sr,properties:Sr.properties}))},"MapView")})),await new Promise(gr=>requestAnimationFrame(()=>setTimeout(gr,0)))}}An.measure("refreshMapWithPlan:adjustView",()=>{setTimeout(()=>{z(),g.value&&g.value.invalidateSize({animate:!1,pan:!1})},100)},"MapView")},"MapView"),console.log(`Plan ${Ze} chargé avec succès avec ${o.getCurrentElements.length} formes`)):console.error(`Plan ${Ze} introuvable après chargement`),J.value=!1}catch(Ye){throw console.error("Erreur lors du rafraîchissement de la carte:",Ye),Ye}},"MapView")}async function je(Ze){return await An.measureAsync("loadPlan",async()=>{var Ye;console.log(`
[MapView][loadPlan] ====== DÉBUT CHARGEMENT PLAN ======`),console.log("[MapView][loadPlan] Tentative de chargement du plan:",Ze);try{const Ut=await An.measureAsync("loadPlan:getPlanFromStore",async()=>s.getPlanById(Ze),"MapView");if(console.log("[MapView][loadPlan] Plan trouvé dans le store:",!!Ut),!Ut){console.log("[MapView][loadPlan] Plan non trouvé dans le store, vérification API...");try{await An.measureAsync("loadPlan:apiCheck",async()=>{await In.get(`/plans/${Ze}/`)},"MapView")}catch(En){throw((Ye=En.response)==null?void 0:Ye.status)===404&&(console.warn("[MapView][loadPlan] Plan non trouvé - Nettoyage du localStorage"),localStorage.removeItem("lastPlanId"),V.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se()),En}}console.log("[MapView][loadPlan] Rafraîchissement de la carte..."),await An.measureAsync("loadPlan:refreshMap",async()=>{await le(Ze)},"MapView"),J.value=!1,console.log("[MapView][loadPlan] Invalidation de la taille de la carte..."),lt(),console.log("[MapView][loadPlan] Plan chargé avec succès:",{planId:Ze,elementsCount:o.getCurrentElements.length})}catch(Ut){throw console.error("Erreur lors du chargement du plan:",Ut),An.measure("loadPlan:errorRecovery",()=>{V.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se(),localStorage.removeItem("lastPlanId")},"MapView"),Ut}},"MapView")}async function $e(){var Ze;if(!V.value||!A.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}I.value=!0,Q.value="saving";try{const Ye=[],Ut=new Set(o.getCurrentElements.filter(jt=>jt.id!==void 0).map(jt=>jt.id)),En=new Set;console.log("[savePlan] Début de la sauvegarde",{featureGroupLayers:A.value.getLayers().length,existingIds:Array.from(Ut),currentElements:o.getCurrentElements}),A.value.eachLayer(jt=>{var Yn,gr,Sr,an,nn,$r,Qr,os,si,mr,Fr,ei,Pr,cn,Xi,Vr,ur,Un,Ni,kr,br,no,Cr;console.log("[savePlan] Traitement de la couche",{type:(Yn=jt.properties)==null?void 0:Yn.type,name:(gr=jt.properties)==null?void 0:gr.name,isPolygon:jt instanceof Vt.Polygon,properties:jt.properties});let $n,xt;const Kt={color:jt.options.color||"#2b6451",weight:jt.options.weight||3,opacity:jt.options.opacity||1,fillColor:jt.options.fillColor||"#2b6451",fillOpacity:jt.options.fillOpacity||.2,dashArray:jt.options.dashArray||""};if(jt instanceof qa){$n="Rectangle";const Pn=jt.getBounds();xt={bounds:{southWest:[Pn.getSouthWest().lng,Pn.getSouthWest().lat],northEast:[Pn.getNorthEast().lng,Pn.getNorthEast().lat]},style:Kt,name:((Sr=jt.properties)==null?void 0:Sr.name)||"",rotation:jt.getRotation(),width:jt.getDimensions().width,height:jt.getDimensions().height,center:[jt.getCenter().lng,jt.getCenter().lat]}}else if(jt instanceof Vt.Circle)$n="Circle",xt={center:[jt.getLatLng().lng,jt.getLatLng().lat],radius:jt.getRadius(),name:((an=jt.properties)==null?void 0:an.name)||"",style:Kt};else if(jt instanceof Vt.Rectangle){$n="Rectangle";const Pn=jt.getBounds();xt={bounds:{southWest:[Pn.getSouthWest().lng,Pn.getSouthWest().lat],northEast:[Pn.getNorthEast().lng,Pn.getNorthEast().lat]},name:((nn=jt.properties)==null?void 0:nn.name)||"",style:Kt}}else if(jt instanceof Vt.Polyline&&!(jt instanceof Vt.Polygon))if((($r=jt.properties)==null?void 0:$r.type)==="ElevationLine"){$n="ElevationLine";const Pn=jt.getLatLngs(),_r=((Qr=jt.properties)==null?void 0:Qr.category)||"forages",bn=((os=jt.properties)==null?void 0:os.accessLevel)||"visitor";console.log("[savePlan] ElevationLine - Catégorie:",_r,"Niveau d'accès:",bn),xt={points:Pn.map(Ur=>[Ur.lng,Ur.lat]),style:{...Kt,color:((si=jt.properties.style)==null?void 0:si.color)||"#FF4500",weight:((mr=jt.properties.style)==null?void 0:mr.weight)||4,opacity:((Fr=jt.properties.style)==null?void 0:Fr.opacity)||.8,_accessLevel:bn,accessLevel:bn},name:((ei=jt.properties)==null?void 0:ei.name)||"",category:_r,accessLevel:bn,elevationData:jt.properties.elevationData,samplePointStyle:jt.properties.samplePointStyle,minMaxPointStyle:jt.properties.minMaxPointStyle,minElevation:jt.properties.minElevation,maxElevation:jt.properties.maxElevation,elevationGain:jt.properties.elevationGain,elevationLoss:jt.properties.elevationLoss,averageSlope:jt.properties.averageSlope,maxSlope:jt.properties.maxSlope}}else{$n="Line";const Pn=jt.getLatLngs(),_r=((Pr=jt.properties)==null?void 0:Pr.category)||"forages",bn=((cn=jt.properties)==null?void 0:cn.accessLevel)||"visitor";console.log("[savePlan] Line - Catégorie:",_r,"Niveau d'accès:",bn),xt={points:Pn.map(Ur=>[Ur.lng,Ur.lat]),name:((Xi=jt.properties)==null?void 0:Xi.name)||"",category:_r,accessLevel:bn,style:{...Kt,_accessLevel:bn,accessLevel:bn}}}else if(jt instanceof Vt.Polygon&&!(jt instanceof Vt.Rectangle)){$n="Polygon";const Pn=jt.getLatLngs()[0],_r=((Vr=jt.properties)==null?void 0:Vr.category)||"forages",bn=((ur=jt.properties)==null?void 0:ur.accessLevel)||"visitor";console.log("[savePlan] Polygon - Catégorie:",_r,"Niveau d'accès:",bn),xt={points:Pn.map(Ur=>[Ur.lng,Ur.lat]),name:((Un=jt.properties)==null?void 0:Un.name)||"",category:_r,accessLevel:bn,style:{...Kt,_accessLevel:bn,accessLevel:bn}}}else if(((Ni=jt.properties)==null?void 0:Ni.type)==="Note"){console.log("[savePlan] Note géolocalisée détectée - sauvegarde via API dédiée");const Pn=jt;if(Pn._dbId&&typeof Pn._dbId=="number"&&En.add(Pn._dbId),typeof Pn.saveNote=="function")try{if(Pn.properties&&(Pn.properties.style||(Pn.properties.style={}),Pn.properties.accessLevel&&(Pn.properties.style._accessLevel=Pn.properties.accessLevel,Pn.properties.style.accessLevel=Pn.properties.accessLevel),Pn.properties.style.color)){const _r=Pn.properties.style.color;console.log("[savePlan] Préservation de la couleur existante:",_r),Pn.properties.style.color=_r,Pn.properties.style.fillColor=_r}console.log("[savePlan] Sauvegarde de la note géolocalisée via API dédiée",{category:(kr=Pn.properties)==null?void 0:kr.category,accessLevel:(br=Pn.properties)==null?void 0:br.accessLevel,styleAccessLevel:(Cr=(no=Pn.properties)==null?void 0:no.style)==null?void 0:Cr.accessLevel}),V.value&&V.value.id?Pn.saveNote(V.value.id):Pn.saveNote()}catch(_r){console.error("[savePlan] Erreur lors de la sauvegarde de la note:",_r)}else console.warn("[savePlan] La note ne possède pas de méthode saveNote");$n=void 0,xt=void 0}if($n&&xt){let Pn=jt._elementId;jt._dbId&&(Pn=jt._dbId,typeof Pn=="number"&&En.add(Pn)),Ye.push({id:Pn,type_forme:$n,data:xt})}}),console.log("[savePlan] Éléments à sauvegarder",{totalElements:Ye.length,elements:Ye.map(jt=>({type:jt.type_forme,hasPoints:"points"in jt.data,hasStyle:"style"in jt.data}))});const On=Array.from(Ut).filter(jt=>!En.has(jt));console.log("[savePlan] Éléments supprimés:",{existingIds:Array.from(Ut),currentLayerIds:Array.from(En),elementsToDelete:On}),o.elements=Ye.filter(jt=>!jt.id||!On.includes(jt.id));const Ln=await o.saveToPlan(V.value.id,{elementsToDelete:On});if(Ln&&((Ze=V.value)!=null&&Ze.id)){const jt=V.value.id;V.value={...V.value,...Ln},s.updatePlanDetails(jt,Ln)}Q.value="success",A.value&&A.value.eachLayer(jt=>{var $n;(($n=jt.properties)==null?void 0:$n.type)==="Note"&&typeof jt.resetPlanSaveState=="function"&&jt.resetPlanSaveState()}),setTimeout(()=>{Q.value=null},3e3)}catch(Ye){console.error("Erreur lors de la sauvegarde du plan:",Ye),Q.value=null}finally{I.value=!1}}Zu(()=>{G.user||pt(),s.clearCurrentPlan(),o.clearCurrentPlan(),A.value&&A.value.off("note:edit"),window.removeEventListener("geonote:edit",()=>{}),window.removeEventListener("categoriesReactivated",()=>{}),window.removeEventListener("shapeTypesReactivated",()=>{}),window.removeEventListener("shape:created",()=>{}),window.removeEventListener("map-set-location",()=>{})});function et(Ze){var Ye,Ut,En;if(console.log("[MapView][updateShapeProperties] Mise à jour des propriétés:",Ze),M(Ze),v.value&&((Ye=v.value.properties)==null?void 0:Ye.type)==="Note")if(console.log("[MapView][updateShapeProperties] Note géolocalisée détectée, sauvegarde via API dédiée"),typeof v.value.saveNote=="function")try{if(Ze.category&&(v.value.properties.category=Ze.category),Ze.accessLevel&&(v.value.properties.accessLevel=Ze.accessLevel,v.value.properties.style||(v.value.properties.style={}),v.value.properties.style._accessLevel=Ze.accessLevel,v.value.properties.style.accessLevel=Ze.accessLevel),v.value.properties.style&&v.value.properties.style.color){const On=v.value.properties.style.color;console.log("[MapView][updateShapeProperties] Préservation de la couleur existante:",On),v.value.properties.style.color=On,v.value.properties.style.fillColor=On}console.log("[MapView][updateShapeProperties] Sauvegarde de la note géolocalisée via API dédiée",{category:(Ut=v.value.properties)==null?void 0:Ut.category,accessLevel:(En=v.value.properties)==null?void 0:En.accessLevel,updatedProperties:Ze}),V.value&&V.value.id?v.value.saveNote(V.value.id):v.value.saveNote(),v.value.bindPopup&&v.value.createPopupContent&&(console.log("[MapView][updateShapeProperties] Forçage de la mise à jour du popup après la sauvegarde"),v.value.bindPopup(v.value.createPopupContent()))}catch(On){console.error("[MapView][updateShapeProperties] Erreur lors de la sauvegarde de la note:",On)}else console.warn("[MapView][updateShapeProperties] La note ne possède pas de méthode saveNote");else if(Ze.category&&v.value&&v.value._dbId){const On=v.value._dbId,Ln=o.elements.find(jt=>jt.id===On);if(Ln){console.log(`[MapView][updateShapeProperties] Mise à jour de la catégorie dans le store: ${Ze.category} pour l'élément ${On}`);const jt=Ln;jt.data||(jt.data={}),jt.data.category=Ze.category,o.$patch({unsavedChanges:!0})}}}function Ee(Ze){try{const Ye=new Date(Ze);return isNaN(Ye.getTime())?(console.error("Date invalide reçue:",Ze),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(Ye)}catch(Ye){return console.error("Erreur lors du formatage de la date:",Ye),"Date invalide"}}const me=()=>{A.value&&z()},We=async()=>{var Ze;if(v.value&&A.value){const Ye=v.value._leaflet_id,Ut=v.value._dbId;if(((Ze=v.value.properties)==null?void 0:Ze.type)==="Note"&&Ut)try{console.log(`[MapView][deleteSelectedShape] Suppression de la note ${Ut} du backend...`),await ka.deleteNote(Ut),a.removeNote(Ut),console.log(`[MapView][deleteSelectedShape] Note ${Ut} supprimée avec succès du backend et du store`),l.success("Note supprimée avec succès")}catch(On){console.error(`[MapView][deleteSelectedShape] Erreur lors de la suppression de la note ${Ut} du backend:`,On),l.error("Erreur lors de la suppression de la note")}E(""),A.value.removeLayer(v.value),c.value=c.value.filter(On=>On.layer&&On.layer._leaflet_id!==Ye),console.log(`[MapView][deleteSelectedShape] Forme ${Ye} (dbId: ${Ut}) supprimée du featureGroup et de shapes.value`),v.value=null}};async function ct(Ze){console.log(`onPlanCreated - Tentative de chargement du plan ${Ze}`),await s.fetchPlans();const Ye=s.getPlanById(Ze);Ye?(console.log(`Plan ${Ze} trouvé, chargement en cours...`),localStorage.setItem("lastPlanId",Ze.toString()),V.value=Ye,s.setCurrentPlan(Ye),o.setCurrentPlan(Ye.id),j.value=!1,lt(),console.log(`Plan ${Ze} chargé avec succès`)):console.error(`Plan ${Ze} introuvable après création! Vérifiez les permissions.`)}Ti(re,async Ze=>{var Ye;if(Ze&&((Ye=G.user)==null?void 0:Ye.user_type)==="admin"){de.value=!0;try{const Ut=await G.fetchSalarieVisiteurs(Ze.id);ve.value=Array.isArray(Ut)?Ut:[Ut]}catch(Ut){console.error("[MapView][watch selectedSalarie] Error:",Ut),ve.value=[]}finally{de.value=!1}}});function pt(){localStorage.removeItem("lastPlanId")}function gt(Ze,Ye="m"){return Ye==="m²"?`${(Ze/1e4).toFixed(2)} ha`:Ye==="m"?Ze>=1e3?`${(Ze/1e3).toFixed(2)} km`:`${Ze.toFixed(2)} m`:`${Ze.toFixed(2)} ${Ye}`}const st=Ct(!1);function qt(Ze){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",TextRectangle:"Annotation",ElevationLine:"Profil altimétrique"}[Ze]||Ze}async function gn(){var Ye,Ut,En,On,Ln,jt,$n,xt,Kt,Yn;if(!V.value||!g.value||!A.value){console.error("[generateSynthesis] Plan, map ou featureGroup manquant");return}const Ze=V.value;try{console.log("[generateSynthesis] Début de la génération"),console.log("[generateSynthesis] Plan courant complet:",Ze),await $e();let mr=Ze;if(!Ze.salarie_details&&!Ze.entreprise_details&&!Ze.client_details){console.log("[generateSynthesis] Détails manquants, tentative de récupération...");try{const br=await In.get(`/plans/${Ze.id}/`);br.status===200&&(console.log("[generateSynthesis] Plan mis à jour:",br.data),V.value={...Ze,...br.data},mr=br.data,s.updatePlanDetails(Ze.id,br.data))}catch(br){console.error("[generateSynthesis] Erreur lors de la récupération des détails:",br)}}await new Promise(br=>setTimeout(br,1e3)),st.value=!0;const Fr=mr.salarie_details,ei=mr.client_details,Pr=(Fr==null?void 0:Fr.entreprise_details)||mr.entreprise_details;console.log("[generateSynthesis] Détails du plan utilisé:",mr),console.log("[generateSynthesis] Détails des utilisateurs:",{salarie:Fr?{id:Fr.id,nom:`${Fr.first_name} ${Fr.last_name}`,company:Fr.company_name,logo:Fr.logo}:null,entreprise:Pr?{id:Pr.id,nom:`${Pr.first_name} ${Pr.last_name}`,company:Pr.company_name,logo:Pr.logo}:null,client:ei?{id:ei.id,nom:`${ei.first_name} ${ei.last_name}`,company:ei.company_name}:null}),v.value&&(Y(),v.value=null);const cn=new Or("l","mm","a4");console.log("[generateSynthesis] Chargement du logo de l'application");const Xi=new Image;Xi.src=X4,await new Promise(br=>{Xi.onload=()=>{console.log("[generateSynthesis] Logo application chargé"),br()},Xi.onerror=no=>{console.error("[generateSynthesis] Erreur chargement logo application:",no),br()}}),console.log("[generateSynthesis] Tentative de chargement du logo entreprise:",Pr==null?void 0:Pr.logo);let Vr=null;Pr!=null&&Pr.logo&&(Vr=new Image,Vr.src=Pr.logo,await new Promise(br=>{Vr?(Vr.onload=()=>{console.log("[generateSynthesis] Logo entreprise chargé avec succès"),br()},Vr.onerror=no=>{console.error("[generateSynthesis] Erreur chargement logo entreprise:",no),br()}):br()})),console.log("[generateSynthesis] Tentative de chargement du logo salarie:",Fr==null?void 0:Fr.logo);let ur=null;Fr!=null&&Fr.logo&&(ur=new Image,ur.src=Fr.logo,await new Promise(br=>{ur?(ur.onload=()=>{console.log("[generateSynthesis] Logo salarie chargé avec succès"),br()},ur.onerror=no=>{console.error("[generateSynthesis] Erreur chargement logo salarie:",no),br()}):br()})),console.log("[generateSynthesis] Ajout des logos au PDF:",{logoApplication:!0,logoEntreprise:Vr!==null,logoSalarie:ur!==null}),Vr!==null&&cn.addImage(Vr,"JPEG",148.5-40-30,20,40,40),cn.addImage(Xi,"JPEG",148.5-40/2,20,40,40),ur!==null&&cn.addImage(ur,"JPEG",148.5+30,20,40,40),cn.setFontSize(24),cn.setTextColor(0),cn.text(Ze.nom||"Sans titre",297/2,100,{align:"center"});let Un=120;if(Pr&&(cn.setFontSize(14),cn.setFont("helvetica","bold"),cn.text("Entreprise:",20,Un),cn.setFont("helvetica","normal"),cn.text(`${Pr.first_name} ${Pr.last_name}${Pr.company_name?` (${Pr.company_name})`:""}`,20,Un+6),Un+=15),Fr&&(cn.setFontSize(14),cn.setFont("helvetica","bold"),cn.text("Salarie:",20,Un),cn.setFont("helvetica","normal"),cn.text(`${Fr.first_name} ${Fr.last_name}${Fr.company_name?` (${Fr.company_name})`:""}`,20,Un+6),Un+=15),ei&&(cn.setFontSize(14),cn.setFont("helvetica","bold"),cn.text("Client:",20,Un),cn.setFont("helvetica","normal"),cn.text(`${ei.first_name} ${ei.last_name}${ei.company_name?` (${ei.company_name})`:""}`,20,Un+6),Un+=15),Ze.description){cn.setFont("helvetica","bold"),cn.text("Description:",20,Un),cn.setFont("helvetica","normal");const br=cn.splitTextToSize(Ze.description,150);cn.text(br,20,Un+6),Un+=8*br.length+10}Un=Math.min(Un,180),cn.setFontSize(10),cn.setTextColor(100),cn.text(`Date de création: ${Ee(Ze.date_creation)}`,20,190),cn.text(`Dernière modification: ${Ee(Ze.date_modification)}`,277,190,{align:"right"});const Ni=[];A.value.eachLayer(br=>Ni.push(br));const kr=Vt.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar",".leaflet-grid-layer",".leaflet-grid-label"],preventDownload:!0}).addTo(g.value);await new Promise(br=>setTimeout(br,3e3));for(let br=0;br<Ni.length;br++){cn.addPage(),cn.setFillColor(248,250,252),cn.setDrawColor(226,232,240),cn.rect(0,0,297,25,"F"),cn.setFontSize(10),cn.setTextColor(50,50,50),cn.setFont("helvetica","bold"),cn.text(Ze.nom||"Sans titre",20,12);let Pn=297-20-(15*(1+(Vr!==null?1:0)+(ur!==null?1:0))+5*(1+(Vr!==null?1:0)));Vr!==null&&(cn.addImage(Vr,"JPEG",Pn,5,15,15),Pn+=20),cn.addImage(Xi,"JPEG",Pn,5,15,15),Pn+=20,ur!==null&&cn.addImage(ur,"JPEG",Pn,5,15,15),cn.setDrawColor(200,200,200),cn.setLineWidth(.5),cn.line(0,25,297,25);const _r=Ni[br],bn=_r.properties;if(bn){cn.setTextColor(0),cn.setFontSize(14),cn.setFont("helvetica","bold");const Ur=bn.name||qt(bn.type);let Ji="";if(bn.type!=="TextRectangle"){const ms=ne(Ni,_r);Ji=ms>0?` (surface totale d'irrigation : ${gt(ms,"m²")})`:""}const cs=`${Ur}${Ji}`;cn.text(cs,20,35)}if(bn&&bn.type==="ElevationLine")try{const Ur=((Ye=_r.getBounds)==null?void 0:Ye.call(_r))||((Ut=_r.getLatLng)==null?void 0:Ut.call(_r));Ur&&g.value.fitBounds(Ur instanceof Vt.LatLng?Vt.latLngBounds([Ur]):Ur,{padding:[50,50]});try{const Sn=((En=_r.getBounds)==null?void 0:En.call(_r))||((On=_r.getLatLng)==null?void 0:On.call(_r));if(!Sn||!g.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const pn=Sn instanceof Vt.LatLng?Vt.latLngBounds([Sn]):Sn;pn&&pn.isValid&&pn.isValid()&&g.value.getContainer()&&document.body.contains(g.value.getContainer())&&g.value.fitBounds(pn,{padding:[50,50],animate:!1})}}catch(Sn){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",Sn)}await new Promise(Sn=>setTimeout(Sn,2e3)),g.value.invalidateSize();try{g.value&&g.value.getContainer()&&document.body.contains(g.value.getContainer())?g.value.invalidateSize({animate:!1}):console.warn("[generateSynthesis] Carte non valide pour l'invalidation de taille")}catch(Sn){console.warn("[generateSynthesis] Erreur lors de l'invalidation de la taille de la carte:",Sn)}await new Promise(Sn=>setTimeout(Sn,500));const Ji=await kr.takeScreen("image"),cs=await new Promise((Sn,pn)=>{const pi=new Image;pi.onload=()=>Sn(pi),pi.onerror=ro=>pn(ro),pi.src=Ji}),ms=40,Si=237/2,Ps=Math.min(70,cs.height*Si/cs.width);if(cn.addImage(cs,"PNG",20,ms,Si,Ps),bn.elevationData&&bn.elevationData.length>0){const Sn=document.createElement("canvas");Sn.width=800,Sn.height=400;const pn=Sn.getContext("2d");if(pn){const pi=bn.elevationData,ro=bn.minElevation,Hi=bn.maxElevation,wl=(Hi-ro)*.05,vr=ro-wl,Mr=Hi+wl,Gr=40,qr=Sn.width-2*Gr,io=Sn.height-2*Gr,so=Ri=>Gr+Ri/pi[pi.length-1].distance*qr,oo=Ri=>Gr+io-(Ri-vr)/(Mr-vr)*io;pn.fillStyle="#f8fafc",pn.fillRect(0,0,Sn.width,Sn.height),pn.fillStyle="#334155",pn.font="bold 20px Arial",pn.textAlign="center",pn.fillText("Profil altimétrique",Sn.width/2,25),pn.strokeStyle="#e2e8f0",pn.lineWidth=1,pn.beginPath(),pn.moveTo(Gr,Gr),pn.lineTo(Gr,io+Gr),pn.lineTo(qr+Gr,io+Gr),pn.strokeStyle="#94a3b8",pn.stroke();const zo=5;for(let Ri=0;Ri<=zo;Ri++){const $o=vr+Ri/zo*(Mr-vr),Ws=oo($o);pn.beginPath(),pn.strokeStyle="#e2e8f0",pn.moveTo(Gr,Ws),pn.lineTo(qr+Gr,Ws),pn.stroke(),pn.beginPath(),pn.strokeStyle="#94a3b8",pn.moveTo(Gr-5,Ws),pn.lineTo(Gr,Ws),pn.stroke(),pn.fillStyle="#64748b",pn.font="12px Arial",pn.textAlign="right",pn.fillText(`${Math.round($o)}m`,Gr-8,Ws+4)}const _a=5,uu=pi[pi.length-1].distance;for(let Ri=0;Ri<=_a;Ri++){const $o=Ri/_a*uu,Ws=so($o);pn.beginPath(),pn.strokeStyle="#e2e8f0",pn.moveTo(Ws,Gr),pn.lineTo(Ws,io+Gr),pn.stroke(),pn.beginPath(),pn.strokeStyle="#94a3b8",pn.moveTo(Ws,io+Gr),pn.lineTo(Ws,io+Gr+5),pn.stroke(),pn.fillStyle="#64748b",pn.font="12px Arial",pn.textAlign="center",pn.fillText(`${Math.round($o)}m`,Ws,io+Gr+16)}const Da=pn.createLinearGradient(0,Gr,0,io+Gr);Da.addColorStop(0,"rgba(255, 69, 0, 0.8)"),Da.addColorStop(1,"rgba(255, 69, 0, 0.2)"),pn.beginPath(),pn.moveTo(so(pi[0].distance),oo(pi[0].elevation)),pi.forEach((Ri,$o)=>{$o>0&&pn.lineTo(so(Ri.distance),oo(Ri.elevation))}),pn.strokeStyle="#FF4500",pn.lineWidth=2,pn.stroke(),pn.lineTo(so(pi[pi.length-1].distance),oo(vr)),pn.lineTo(so(pi[0].distance),oo(vr)),pn.closePath(),pn.fillStyle=Da,pn.fill(),pi.forEach(Ri=>{pn.beginPath(),pn.arc(so(Ri.distance),oo(Ri.elevation),3,0,Math.PI*2),pn.fillStyle="#FF4500",pn.fill(),pn.strokeStyle="white",pn.lineWidth=1,pn.stroke()});let Lr=0,jr=0;for(let Ri=0;Ri<pi.length;Ri++)pi[Ri].elevation===ro&&(Lr=Ri),pi[Ri].elevation===Hi&&(jr=Ri);pn.beginPath(),pn.arc(so(pi[jr].distance),oo(pi[jr].elevation),6,0,Math.PI*2),pn.fillStyle="#059669",pn.fill(),pn.strokeStyle="white",pn.lineWidth=2,pn.stroke(),pn.beginPath(),pn.arc(so(pi[Lr].distance),oo(pi[Lr].elevation),6,0,Math.PI*2),pn.fillStyle="#DC2626",pn.fill(),pn.strokeStyle="white",pn.lineWidth=2,pn.stroke(),pn.font="12px Arial",pn.fillStyle="#059669",pn.textAlign="left",pn.fillText(`Point haut: ${gt(Hi,"m")}`,Gr,io+Gr+35),pn.fillStyle="#DC2626",pn.fillText(`Point bas: ${gt(ro,"m")}`,Gr+200,io+Gr+35);const Na=Sn.toDataURL("image/png");cn.addImage(Na,"PNG",20+Si+20,ms,Si,Ps)}}const Wr=ms+Ps+15;cn.setFillColor(248,250,252),cn.setDrawColor(226,232,240),cn.roundedRect(20,Wr,257,50,3,3,"FD"),cn.setFont("helvetica","bold"),cn.setFontSize(12),cn.setTextColor(51,65,85),cn.text("Caractéristiques",30,Wr+10);const js=[{label:"Distance totale",value:gt(bn.length||0)},{label:"Dénivelé positif",value:gt(bn.elevationGain||0,"m")},{label:"Dénivelé négatif",value:gt(bn.elevationLoss||0,"m")}],as=[{label:"Pente moyenne",value:`${(bn.averageSlope||0).toFixed(1)}%`},{label:"Pente maximale",value:`${(bn.maxSlope||0).toFixed(1)}%`},{label:"Altitude min/max",value:`${gt(bn.minElevation||0,"m")} / ${gt(bn.maxElevation||0,"m")}`}];let ys=Wr+20;cn.setFont("helvetica","normal"),cn.setFontSize(10),js.forEach(Sn=>{cn.setTextColor(100,116,139),cn.text(Sn.label,30,ys),cn.setTextColor(15,23,42),cn.setFont("helvetica","bold"),cn.text(Sn.value,110,ys),cn.setFont("helvetica","normal"),ys+=9}),ys=Wr+20;const bi=297/2;as.forEach(Sn=>{cn.setTextColor(100,116,139),cn.text(Sn.label,bi,ys),cn.setTextColor(15,23,42),cn.setFont("helvetica","bold"),cn.text(Sn.value,bi+80,ys),cn.setFont("helvetica","normal"),ys+=9})}catch(Ur){console.error("[generateSynthesis] Erreur traitement profil altimétrique:",Ur)}else{const Ur=((Ln=_r.getBounds)==null?void 0:Ln.call(_r))||((jt=_r.getLatLng)==null?void 0:jt.call(_r));Ur&&g.value.fitBounds(Ur instanceof Vt.LatLng?Vt.latLngBounds([Ur]):Ur,{padding:[50,50]});try{const Ji=(($n=_r.getBounds)==null?void 0:$n.call(_r))||((xt=_r.getLatLng)==null?void 0:xt.call(_r));if(!Ji||!g.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const cs=Ji instanceof Vt.LatLng?Vt.latLngBounds([Ji]):Ji;cs&&cs.isValid&&cs.isValid()&&g.value.getContainer()&&document.body.contains(g.value.getContainer())&&g.value.fitBounds(cs,{padding:[50,50],animate:!1})}}catch(Ji){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",Ji)}await new Promise(Ji=>setTimeout(Ji,2e3)),g.value.invalidateSize(),await new Promise(Ji=>setTimeout(Ji,500));try{const Ji=await kr.takeScreen("image"),cs=await new Promise((Wr,js)=>{const as=new Image;as.onload=()=>Wr(as),as.onerror=ys=>js(ys),as.src=Ji}),ms=45,Si=297*.6-30;let Ps=cs.height*Si/cs.width;if(Ps>210*.9&&(Ps=210*.9),cn.addImage(cs,"PNG",20,ms,Si,Ps),bn){let Wr=function(pn,pi,ro,Hi,lu){cn.setTextColor(100,116,139),cn.setFont("helvetica","normal"),cn.text(pn,ro+10,Hi),cn.setTextColor(15,23,42),cn.setFont("helvetica","bold"),cn.text(pi,ro+lu-10,Hi,{align:"right"})},as=0;if(bn.type==="Circle")as=4;else if(bn.type==="Rectangle")as=4;else if(bn.type==="Line")as=1,(Kt=bn.dimensions)!=null&&Kt.width&&as++,bn.surfaceInfluence&&as++;else if(bn.type==="Semicircle")as=6;else if(bn.type==="Polygon")as=2;else if(bn.type==="CircleWithSections"&&(as=3,bn.sections&&bn.sections.length>0)){const pn=Math.ceil(bn.sections.length/3);as+=pn*3}const ys=Math.max(15+as*12+30,60),bi=297-188.2-20;cn.setFillColor(248,250,252),cn.setDrawColor(226,232,240),cn.roundedRect(188.2,ms,bi,ys,3,3,"FD"),cn.setFont("helvetica","bold"),cn.setFontSize(12),cn.setTextColor(51,65,85),cn.text("Caractéristiques",188.2+10,ms+15);let Sn=ms+30;cn.setFontSize(10),bn.type==="Circle"?(Wr("Rayon",gt(bn.radius),188.2,Sn,bi),Sn+=12,Wr("Diamètre",gt(bn.radius*2),188.2,Sn,bi),Sn+=12,Wr("Surface",gt(bn.surface,"m²"),188.2,Sn,bi),Sn+=12,Wr("Périmètre",gt(bn.perimeter),188.2,Sn,bi)):bn.type==="Rectangle"?(Wr("Largeur",gt(bn.width),188.2,Sn,bi),Sn+=12,Wr("Hauteur",gt(bn.height),188.2,Sn,bi),Sn+=12,Wr("Surface",gt(bn.surface,"m²"),188.2,Sn,bi),Sn+=12,Wr("Périmètre",gt(bn.perimeter),188.2,Sn,bi)):bn.type==="Line"?(Wr("Longueur",gt(bn.length),188.2,Sn,bi),Sn+=12,(Yn=bn.dimensions)!=null&&Yn.width&&(Wr("Largeur d'influence",gt(bn.dimensions.width),188.2,Sn,bi),Sn+=12),bn.surfaceInfluence&&Wr("Surface d'influence",gt(bn.surfaceInfluence,"m²"),188.2,Sn,bi)):bn.type==="Semicircle"?(Wr("Rayon",gt(bn.radius),188.2,Sn,bi),Sn+=12,Wr("Diamètre",gt(bn.radius*2),188.2,Sn,bi),Sn+=12,Wr("Surface",gt(bn.surface,"m²"),188.2,Sn,bi),Sn+=12,Wr("Périmètre",gt(bn.perimeter),188.2,Sn,bi),Sn+=12,Wr("Longueur d'arc",gt(bn.arcLength),188.2,Sn,bi),Sn+=12,Wr("Angle d'ouverture",`${bn.openingAngle.toFixed(1)}°`,188.2,Sn,bi)):bn.type==="Polygon"?(Wr("Surface",gt(bn.surface,"m²"),188.2,Sn,bi),Sn+=12,Wr("Périmètre",gt(bn.perimeter),188.2,Sn,bi)):bn.type==="CircleWithSections"&&(Wr("Rayon",gt(bn.radius),188.2,Sn,bi),Sn+=12,Wr("Surface totale",gt(bn.surface,"m²"),188.2,Sn,bi),Sn+=12,Wr("Périmètre",gt(bn.perimeter),188.2,Sn,bi),Sn+=20,bn.sections&&bn.sections.length>0&&(Sn=jo(bn.sections,cn,188.2,Sn,bi)))}}catch(Ji){console.error(`[generateSynthesis] Erreur capture forme ${br+1}:`,Ji)}}}g.value.removeControl(kr),cn.save(`synthese_${Ze.nom}.pdf`)}catch(gr){console.error("[generateSynthesis] Erreur:",gr),alert("Une erreur est survenue lors de la génération de la synthèse. Veuillez réessayer.")}finally{st.value=!1}}const Qe=OE.debounce(()=>{const Ze=An.startMeasure("invalidateMapSize","MapView");if(!g.value){Ze();return}ma(()=>{An.measure("invalidateMapSize:nextTick",()=>{var Ye;try{if(g.value&&g.value.getContainer()&&document.body.contains(g.value.getContainer())){if(g.value.invalidateSize({animate:!1}),(Ye=A.value)!=null&&Ye.getLayers().length)try{z()}catch(Ut){console.warn("[invalidateMapSize] Erreur lors de l'ajustement de la vue:",Ut)}}else console.warn("[invalidateMapSize] Carte non valide pour l'invalidation")}catch(Ut){console.warn("[invalidateMapSize] Erreur lors de l'invalidation de la taille de la carte:",Ut)}Ze()},"MapView")})},250);function lt(){Qe()}Ti(V,(Ze,Ye)=>{Ze&&Ze.id!==(Ye==null?void 0:Ye.id)&&ma(()=>{lt()})});const it=Ct(null),$t=Ct(!1),Jt=Ct([]),Dn=Xn(()=>{if(console.log("[MapView][filteredSalaries] Computing with:",{selectedEntreprise:it.value,salaries:_e.value,salariesLength:_e.value.length}),!it.value)return[];const Ze=_e.value.filter(Ye=>{var On,Ln,jt;const Ut=Ye.entreprise,En=typeof Ut=="object"&&Ut!==null?Ut.id:Ut;return console.log("[MapView][filteredSalaries] Checking salarie:",{salarie:Ye,salarieEntreprise:Ut,salarieEntrepriseId:En,selectedEntrepriseId:(On=it.value)==null?void 0:On.id,matches:En===((Ln=it.value)==null?void 0:Ln.id)}),En===((jt=it.value)==null?void 0:jt.id)});return console.log("[MapView][filteredSalaries] Filtered result:",Ze),Ze});function vn(Ze){if(!Ze)return"";const Ye=Ze.first_name||"",Ut=Ze.last_name?Ze.last_name.toUpperCase():"",En=Ze.company_name||Ze.role||"";return`${Ye} ${Ut} (${En})`}async function Tn(){$t.value=!0;try{const Ze=await In.get("/users/",{params:{role:"ENTREPRISE"}});Jt.value=Ze.data}catch(Ze){console.error("[MapView] Error loading entreprises:",Ze),Jt.value=[]}finally{$t.value=!1}}async function Jn(Ze){console.log("[MapView][selectEntreprise] Sélection de l'entreprise:",Ze),it.value=Ze,oe.value=!0;try{console.log("[MapView][selectEntreprise] Envoi de la requête avec params:",{role:"SALARIE",entreprise:Ze.id});const Ye=await In.get("/users/",{params:{role:"SALARIE",entreprise:Ze.id}});console.log("[MapView][selectEntreprise] Réponse reçue:",Ye.data),_e.value=Ye.data,console.log("[MapView][selectEntreprise] Salaries mis à jour:",_e.value)}catch(Ye){console.error("[MapView] Error loading salaries for entreprise:",Ye),_e.value=[]}finally{oe.value=!1}}function en(){it.value=null,re.value=null,Z.value=null,_e.value=[],ve.value=[],qe.value=[]}function xn(){re.value=null,Z.value=null,ve.value=[],qe.value=[]}function Cn(){Z.value=null,qe.value=[]}async function er(Ze){var Ye,Ut,En,On,Ln,jt;console.log(`
[MapView][selectSalarie] ====== DÉBUT SÉLECTION SALARIE ======`),console.log("Informations du salarie:",{id:Ze.id,username:Ze.username,company:Ze.company_name,role:Ze.role}),console.log("Contexte utilisateur:",{userType:(Ye=G.user)==null?void 0:Ye.user_type,userId:(Ut=G.user)==null?void 0:Ut.id,userRole:(En=G.user)==null?void 0:En.role,selectedEntrepriseId:(On=it.value)==null?void 0:On.id}),re.value=Ze,de.value=!0;try{const $n={role:"VISITEUR",salarie:Ze.id};G.isEntreprise?(console.log("Ajout de l'ID de l'entreprise connectée:",(Ln=G.user)==null?void 0:Ln.id),$n.entreprise=(jt=G.user)==null?void 0:jt.id):it.value&&(console.log("Ajout de l'ID de l'entreprise sélectionnée:",it.value.id),$n.entreprise=it.value.id),console.log("Paramètres de la requête:",$n);const xt=await In.get("/users/",{params:$n});console.log("Réponse reçue du serveur:",{status:xt.status,dataLength:Array.isArray(xt.data)?xt.data.length:"non-array",data:xt.data}),Array.isArray(xt.data)?(ve.value=xt.data,console.log(`${xt.data.length} visiteurs chargés`),xt.data.forEach((Kt,Yn)=>{console.log(`Visiteur ${Yn+1}:`,{id:Kt.id,username:Kt.username,company:Kt.company_name,salarie:Kt.salarie})})):(console.warn("Format de réponse inattendu:",xt.data),ve.value=[]),ve.value.length===0&&console.warn("Aucun visiteur trouvé pour ce salarie")}catch($n){if(console.error("ERREUR lors du chargement des visiteurs:",$n),$n&&typeof $n=="object"&&"response"in $n){const xt=$n;console.error("Détails de l'erreur:",{status:xt.response.status,data:xt.response.data})}ve.value=[]}finally{de.value=!1,console.log(`[MapView][selectSalarie] ====== FIN SÉLECTION SALARIE ======
`)}}function pr(){U.value=!1,$.value=null}function xr(Ze){B.value=Ze,R.value=!0}async function lr(){var Ze,Ye,Ut;if((Ze=B.value)!=null&&Ze.id)try{const En=B.value.id,On={selectedClient:Z.value,selectedSalarie:re.value,isNoVisiteurView:Z.value&&Z.value.id===-1};if(await s.deletePlan(En),R.value=!1,B.value=null,await new Promise(Ln=>setTimeout(Ln,50)),On.isNoVisiteurView)console.log("[MapView][confirmDeletePlan] Rechargement des plans sans visiteur"),await tr();else if(On.selectedClient){console.log("[MapView][confirmDeletePlan] Rechargement des plans du client:",On.selectedClient.id);const Ln={visiteur:On.selectedClient.id};On.selectedSalarie&&(Ln.salarie=On.selectedSalarie.id),G.isEntreprise?Ln.entreprise=(Ye=G.user)==null?void 0:Ye.id:it.value&&(Ln.entreprise=it.value.id);const jt=await In.get("/plans/",{params:Ln});qe.value=jt.data}else console.log("[MapView][confirmDeletePlan] Rechargement de tous les plans"),await s.fetchPlans();((Ut=V.value)==null?void 0:Ut.id)===En&&(V.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se(),localStorage.removeItem("lastPlanId"))}catch(En){console.error("Erreur lors de la suppression du plan:",En),alert("Une erreur est survenue lors de la suppression du plan"),R.value=!1,B.value=null}}function Jr(){R.value=!1,B.value=null}function Bs(Ze){console.log("[MapView][handleFilterChange] Nouveaux filtres reçus:",JSON.stringify(Ze,null,2)),console.log("[MapView][handleFilterChange] Filtres actuels dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2)),console.log("[MapView][handleFilterChange] Mise à jour des filtres dans le store"),o.updateFilters(Ze),console.log("[MapView][handleFilterChange] Éléments dans le store:",{count:o.elements.length,ids:o.elements.map(Ye=>Ye.id)}),console.log("[MapView][handleFilterChange] Mise à jour de l'affichage de la carte"),Di(),setTimeout(()=>{console.log("[MapView][handleFilterChange] Mise à jour forcée de l'affichage"),Di()},100),console.log("[MapView][handleFilterChange] Traitement des filtres terminé")}function Di(){if(!A.value)return;const Ze=[];c.value.forEach((an,nn)=>{an.layer&&!an.id&&(!an.layer.properties||an.layer.properties&&!an.layer.properties.type)&&(console.log(`[MapView][updateMapDisplay] Nettoyage préventif de la couche temporaire ${an.layer._leaflet_id}`),Ze.push(nn))});for(let an=Ze.length-1;an>=0;an--)c.value.splice(Ze[an],1);const Ye={accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}};console.log("[MapView][updateMapDisplay] Mise à jour de l'affichage avec filtres:",JSON.stringify(Ye,null,2));const Ut={count:o.elements.length,elements:o.elements.map(an=>({id:an.id,type_forme:an.type_forme}))};console.log("[MapView][updateMapDisplay] Éléments dans le store:",JSON.stringify(Ut,null,2));const En=o.getFilteredElements;console.log("[MapView][updateMapDisplay] Éléments filtrés:",{total:o.elements.length,filtered:En.length,filteredIds:En.map(an=>an.id)});const On=A.value.getLayers();console.log("[MapView][updateMapDisplay] Couches actuelles:",On.length);const Ln=On.map(an=>({_leaflet_id:an._leaflet_id,_dbId:an._dbId,hasProperties:!!an.properties,propertyType:an.properties?an.properties.type:null,category:an.properties?an.properties.category:null}));console.log("[MapView][updateMapDisplay] Détails des couches:",JSON.stringify(Ln,null,2)),console.log("[MapView][updateMapDisplay] État des filtres pour les catégories:",{forages:o.filters.categories.forages,clients:o.filters.categories.clients,entrepots:o.filters.categories.entrepots,livraisons:o.filters.categories.livraisons,cultures:o.filters.categories.cultures,parcelles:o.filters.categories.parcelles});const jt=new Map;c.value.forEach(an=>{an.layer&&an.id&&jt.set(an.id,an.layer)});const $n=new Map;On.forEach(an=>{an._dbId&&$n.set(an,an._dbId)});const xt=new Set(En.map(an=>an.id));console.log("[MapView][updateMapDisplay] Début du traitement des couches");const Kt=Array.from(xt);console.log("[MapView][updateMapDisplay] IDs des éléments filtrés:",JSON.stringify(Kt));let Yn=0,gr=0,Sr=0;On.forEach(an=>{var ur,Un;const nn=an._dbId,$r=an._leaflet_id;if(!nn){if(!an.properties){Sr++,console.log(`[MapView][updateMapDisplay] Couche ${$r} sans dbId et sans propriétés, ignorée`);return}an._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[MapView][updateMapDisplay] Couche ${$r} sans dbId, ID temporaire assigné: ${an._dbId}`)}const Qr=an.properties||{},os=Qr.type||an.type_forme||"";let si=Qr.category;if(an._dbId){const Ni=o.elements.find(kr=>kr.id===an._dbId);if(Ni){const kr=Ni.data;kr&&kr.category&&(si!==kr.category&&(console.log(`[MapView][updateMapDisplay] Catégorie différente détectée - Propriétés: ${si}, Store: ${kr.category} pour la couche ${an._dbId}`),si=kr.category),an.properties||(an.properties={}),an.properties.category=si)}}si||(si="default");const mr=Qr.accessLevel||"visitor";console.log(`[MapView][updateMapDisplay] Couche ${$r} (dbId: ${an._dbId}): type=${os}, category=${si}, accessLevel=${mr}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify(o.filters));let Fr=!1;os?Fr=os in o.filters.shapeTypes&&o.filters.shapeTypes[os]===!0:Fr=o.filters.shapeTypes.Polygon===!0;let ei=!1;si?si in o.filters.categories?(ei=o.filters.categories[si]===!0,console.log(`[MapView][updateMapDisplay] Vérification de la catégorie ${si}: ${ei}`)):(ei=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie ${si} non trouvée dans les filtres, utilisation de 'forages': ${ei}`)):(ei=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie non spécifiée, utilisation de 'forages': ${ei}`));let Pr=!1;const cn={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let Xi="visitor";cn.company?Xi="company":cn.employee?Xi="employee":cn.visitor&&(Xi="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès sélectionné par l'utilisateur: ${Xi}`),Xi==="company"?Pr=!0:Xi==="employee"?Pr=mr==="employee"||mr==="visitor":Xi==="visitor"&&(Pr=mr==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès de la couche: ${mr}, visible: ${Pr}`);const Vr=Fr&&ei&&Pr;console.log(`[MapView][updateMapDisplay] Visibilité de la couche ${$r}: typeVisible=${Fr}, categoryVisible=${ei}, accessLevelVisible=${Pr}, isVisible=${Vr}`),console.log(`[MapView][updateMapDisplay] Détails de la couche ${$r}: type=${os}, category=${si}, accessLevel=${mr}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify({accessLevels:o.filters.accessLevels,categories:o.filters.categories,shapeTypes:o.filters.shapeTypes},null,2)),Vr?A.value.hasLayer(an)?(Yn++,console.log(`[MapView][updateMapDisplay] Couche ${an._dbId} (${os}) déjà visible avec catégorie ${((Un=an.properties)==null?void 0:Un.category)||"non définie"}`)):(si&&si!=="default"&&(!an.properties||!an.properties.category)&&(an.properties||(an.properties={}),an.properties.category=si,console.log(`[MapView][updateMapDisplay] Catégorie définie avant ajout: ${si} pour la couche ${an._dbId}`)),A.value.addLayer(an),Yn++,console.log(`[MapView][updateMapDisplay] Affichage de la couche ${an._dbId} (${os}) avec catégorie ${((ur=an.properties)==null?void 0:ur.category)||"non définie"}`)):A.value.hasLayer(an)?(A.value.removeLayer(an),gr++,console.log(`[MapView][updateMapDisplay] Masquage de la couche ${an._dbId} (${os}) - Filtres non respectés`)):(gr++,console.log(`[MapView][updateMapDisplay] Couche ${an._dbId} (${os}) déjà masquée`))}),console.log("[MapView][updateMapDisplay] Début de la restauration des couches filtrées"),console.log("[MapView][updateMapDisplay] Nombre de formes dans shapes.value:",c.value.length),c.value.forEach(an=>{var Un;if(!an.layer){console.log("[MapView][updateMapDisplay] Forme sans couche, ignorée");return}const nn=an.layer,$r=nn._leaflet_id,Qr=nn._dbId;if(console.log(`[MapView][updateMapDisplay] Traitement de la forme ${$r} (dbId: ${Qr})`),A.value.hasLayer(nn)){console.log(`[MapView][updateMapDisplay] La couche ${$r} est déjà dans le featureGroup, ignorée`);return}const os=nn.properties||{},si=os.type||nn.type_forme||"";let mr=null;if(nn._dbId){const Ni=o.elements.find(kr=>kr.id===nn._dbId);if(Ni){const kr=Ni.data;kr&&kr.category&&(mr=kr.category,console.log(`[MapView][updateMapDisplay] Catégorie récupérée depuis le store: ${mr} pour la couche ${nn._dbId}`))}}!mr&&os.category&&(mr=os.category,console.log(`[MapView][updateMapDisplay] Catégorie récupérée depuis les propriétés: ${mr} pour la couche ${$r}`)),mr||(mr="default");const Fr=os.accessLevel||"visitor";if(nn.properties||(nn.properties={}),mr&&mr!=="default"&&(nn.properties.category=mr,console.log(`[MapView][updateMapDisplay] Catégorie définie/restaurée: ${mr} pour la couche ${nn._dbId}`),nn._dbId)){const Ni=o.elements.find(kr=>kr.id===nn._dbId);if(Ni){const kr=Ni;kr.data||(kr.data={}),kr.data.category!==mr&&(console.log(`[MapView][updateMapDisplay] Mise à jour de la catégorie dans le store: ${mr} pour l'élément ${nn._dbId}`),kr.data.category=mr,o.$patch({unsavedChanges:!0}))}}nn.properties.accessLevel||(nn.properties.accessLevel="visitor"),console.log(`[MapView][updateMapDisplay] Propriétés de la couche ${$r}: type=${si}, category=${mr}, accessLevel=${Fr}`);let ei=!1;si?ei=si in o.filters.shapeTypes&&o.filters.shapeTypes[si]===!0:ei=o.filters.shapeTypes.Polygon===!0;let Pr=!1;if(mr)if(mr in o.filters.categories)Pr=o.filters.categories[mr]===!0,console.log(`[MapView][updateMapDisplay] Vérification de la catégorie ${mr}: ${Pr}`);else if(IE().getUniqueCategories.includes(mr)){console.log(`[MapView][updateMapDisplay] Catégorie personnalisée ${mr} trouvée dans mapFilterStore, ajout aux filtres`);const br={...o.filters.categories};br[mr]=!0,o.updateFilters({categories:br}),Pr=!0}else Pr=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie ${mr} non trouvée, utilisation de 'forages': ${Pr}`);else Pr=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Pas de catégorie, utilisation de 'forages': ${Pr}`);let cn=!1;const Xi={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let Vr="visitor";Xi.company?Vr="company":Xi.employee?Vr="employee":Xi.visitor&&(Vr="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès sélectionné par l'utilisateur (2ème étape): ${Vr}`),Vr==="company"?cn=!0:Vr==="employee"?cn=Fr==="employee"||Fr==="visitor":Vr==="visitor"&&(cn=Fr==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès de la couche (2ème étape): ${Fr}, visible: ${cn}`);const ur=ei&&Pr&&cn;if(console.log(`[MapView][updateMapDisplay] Visibilité de la couche ${$r}: typeVisible=${ei}, categoryVisible=${Pr}, accessLevelVisible=${cn}, isVisible=${ur}`),ur){if(mr&&mr!=="default"&&(nn.properties||(nn.properties={}),nn.properties.category=mr,console.log(`[MapView][updateMapDisplay] Catégorie définie avant restauration: ${mr} pour la couche ${$r}`),nn._dbId)){const Ni=o.elements.find(kr=>kr.id===nn._dbId);if(Ni){const kr=Ni;kr.data||(kr.data={}),kr.data.category!==mr&&(console.log(`[MapView][updateMapDisplay] Mise à jour de la catégorie dans le store avant restauration: ${mr} pour l'élément ${nn._dbId}`),kr.data.category=mr,o.$patch({unsavedChanges:!0}))}}A.value.addLayer(nn),Yn++,console.log(`[MapView][updateMapDisplay] Restauration de la couche ${$r} (${si}) avec catégorie ${((Un=nn.properties)==null?void 0:Un.category)||"non définie"} - Filtres respectés`)}else console.log(`[MapView][updateMapDisplay] La couche ${$r} (${si}) reste masquée - Filtres non respectés`)}),console.log(`[MapView][updateMapDisplay] Restauration terminée: ${Yn} couches visibles au total`),console.log(`[MapView][updateMapDisplay] Statistiques: ${Yn} couches visibles, ${gr} couches masquées, ${Sr} couches sans dbId`),console.log("[MapView][updateMapDisplay] Mise à jour terminée")}function Fo(Ze){if(A.value){const Ut=A.value.getLayers().find(En=>En._leaflet_id===Ze.id);Ut&&(Ut.properties.name=Ze.title,Ut.properties.description=Ze.description,Ut.properties.columnId=Ze.columnId,Ut.properties.accessLevel=Ze.accessLevel,Ut.properties.category||(Ut.properties.category="forages"),Ut.setNoteStyle({color:Ze.style.color,fillColor:Ze.style.fillColor,weight:Ze.style.weight,fillOpacity:Ze.style.fillOpacity,radius:Ze.style.radius}),Ut.closePopup(),Ut.unbindPopup(),Ut.bindPopup(Ut.createPopupContent()),console.log("[handleNoteSave] Note mise à jour:",{name:Ut.properties.name,category:Ut.properties.category,accessLevel:Ut.properties.accessLevel,columnId:Ut.properties.columnId}),a.notes.find(On=>On.id===Ze.id)?(a.updateNote(Ze.id,{title:Ze.title,description:Ze.description,columnId:Ze.columnId,accessLevel:Ze.accessLevel,style:Ze.style,updatedAt:new Date().toISOString()}),console.log("[handleNoteSave] Note mise à jour dans le store avec columnId:",Ze.columnId)):(a.addNote({title:Ze.title,description:Ze.description,location:[Ze.location[0],Ze.location[1]],columnId:Ze.columnId||"1",style:Ze.style,accessLevel:Ze.accessLevel}),console.log("[handleNoteSave] Note ajoutée au store avec columnId:",Ze.columnId||"1")))}l.success("Note enregistrée avec succès")}async function Rs(Ze){var Ye;Z.value=Ze,ye.value=!0;try{const Ut={visiteur:Ze.id};G.isEntreprise?Ut.entreprise=(Ye=G.user)==null?void 0:Ye.id:it.value&&(Ut.entreprise=it.value.id),re.value&&(Ut.salarie=re.value.id);const En=await In.get("/plans/",{params:Ut});qe.value=En.data}catch(Ut){console.error("[MapView] Error loading client plans:",Ut),qe.value=[]}finally{ye.value=!1}}async function tr(){var Ye;console.log("[MapView][loadPlansWithoutVisiteur] Chargement des plans sans visiteur");const Ze={id:-1,username:"sans_visiteur",first_name:"Sans",last_name:"Visiteur",company_name:"",role:"VISITEUR",display_name:"Plans sans visiteur"};Z.value=Ze,ye.value=!0;try{const Ut={visiteur_null:!0};G.isEntreprise?Ut.entreprise=(Ye=G.user)==null?void 0:Ye.id:it.value&&(Ut.entreprise=it.value.id),re.value&&(Ut.salarie=re.value.id),console.log("[MapView][loadPlansWithoutVisiteur] Paramètres de requête:",Ut);const En=await In.get("/plans/",{params:Ut});console.log("[MapView][loadPlansWithoutVisiteur] Plans reçus:",En.data),qe.value=En.data}catch(Ut){console.error("[MapView] Error loading plans without visiteur:",Ut),qe.value=[]}finally{ye.value=!1}}async function Fs(){var Ze;if(re.value=null,Z.value=null,qe.value=[],G.isEntreprise){oe.value=!0;try{const Ye=await In.get("/users/",{params:{role:"SALARIE",entreprise:(Ze=G.user)==null?void 0:Ze.id}});_e.value=Ye.data,console.log("[MapView][openLoadPlanModal] Salariés chargés:",_e.value.length)}catch(Ye){console.error("[MapView][openLoadPlanModal] Erreur lors du chargement des salariés:",Ye),_e.value=[]}finally{oe.value=!1}}J.value=!0}function jo(Ze,Ye,Ut,En,On){if(!Ze||Ze.length===0)return En;const Ln=[...Ze].sort((an,nn)=>(nn.surface||0)-(an.surface||0)),jt=On,$n=7,xt=6,Kt=2,Yn=[{header:"Nom",width:.3,align:"left"},{header:"Surface",width:.2,align:"right"},{header:"Angles",width:.25,align:"right"},{header:"Rayon",width:.15,align:"right"},{header:"Type",width:.1,align:"center"}],gr=$n+xt*Ln.length;Ye.setFillColor(248,250,252),Ye.setDrawColor(226,232,240),Ye.roundedRect(Ut,En,jt,gr+Kt*2,2,2,"FD"),Ye.setFillColor(241,245,249),Ye.rect(Ut+Kt,En+Kt,jt-Kt*2,$n,"F"),Ye.setFont("helvetica","bold"),Ye.setFontSize(7),Ye.setTextColor(51,65,85);let Sr=Ut+Kt;return Yn.forEach(an=>{const nn=an.width*(jt-Kt*2);an.align==="right"?Ye.text(an.header,Sr+nn-Kt,En+Kt+5,{align:"right"}):an.align==="center"?Ye.text(an.header,Sr+nn/2,En+Kt+5,{align:"center"}):Ye.text(an.header,Sr+Kt/2,En+Kt+5),Sr+=nn}),Ye.setFont("helvetica","normal"),Ye.setFontSize(6.5),Ye.setTextColor(71,85,105),Ln.forEach((an,nn)=>{const $r=En+$n+Kt+nn*xt;nn%2===0&&(Ye.setFillColor(250,252,254),Ye.rect(Ut+Kt,$r,jt-Kt*2,xt,"F"));let Qr=Ut+Kt;const os=an.name||`Section ${nn+1}`;Ye.text(os,Qr+Kt/2,$r+4),Qr+=Yn[0].width*(jt-Kt*2);const si=gt(an.surface||0,"m²");Ye.text(si,Qr+Yn[1].width*(jt-Kt*2)-Kt,$r+4,{align:"right"}),Qr+=Yn[1].width*(jt-Kt*2);const mr=an.startAngle===0&&an.endAngle===360?"Complet":`${an.startAngle}°-${an.endAngle}°`;Ye.text(mr,Qr+Yn[2].width*(jt-Kt*2)-Kt,$r+4,{align:"right"}),Qr+=Yn[2].width*(jt-Kt*2);const Fr=gt(an.radius||0);Ye.text(Fr,Qr+Yn[3].width*(jt-Kt*2)-Kt,$r+4,{align:"right"}),Qr+=Yn[3].width*(jt-Kt*2);const ei=an.startAngle===0&&an.endAngle===360?"C":"P";Ye.text(ei,Qr+Yn[4].width*(jt-Kt*2)/2,$r+4,{align:"center"})}),Ye.setDrawColor(226,232,240),Ye.setLineWidth(.05),Ye.line(Ut+Kt,En+$n+Kt,Ut+jt-Kt,En+$n+Kt),En+gr+Kt*2}const gs=Ct(window.innerWidth<768);function qn(){gs.value=window.innerWidth<768}return(Ze,Ye)=>{var Ut,En,On,Ln,jt,$n;return Ne(),Be(wn,null,[S("div",rW,[S("div",iW,[st.value?(Ne(),Be("div",sW,Ye[8]||(Ye[8]=[tu('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Génération de la synthèse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualité de vos captures pour un rendu parfait </p></div></div></div>',1)]))):Zt("",!0),V.value?Zt("",!0):(Ne(),Be("div",oW,[S("div",aW,[Ye[11]||(Ye[11]=tu('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+X4+'" alt="TagMap Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur TagMap</h1><p class="text-gray-600 mb-8">Pour commencer à dessiner, vous devez d&#39;abord créer un nouveau plan ou charger un plan existant.</p>',3)),S("div",lW,[S("button",{onClick:Ye[0]||(Ye[0]=xt=>j.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Ye[9]||(Ye[9]=[S("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),ri(" Créer un nouveau plan ")])),S("button",{onClick:Fs,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Ye[10]||(Ye[10]=[S("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),ri(" Charger un plan existant ")]))])])])),kn(S("div",uW,[S("div",cW,[V.value&&!st.value?(Ne(),ua(DV,{key:0,"last-save":(Ut=V.value)!=null&&Ut.date_modification?new Date(V.value.date_modification):void 0,"plan-name":(En=V.value)==null?void 0:En.nom,"plan-description":(On=V.value)==null?void 0:On.description,"save-status":Q.value,onChangeMapType:Vn(O),onCreateNewPlan:Ye[1]||(Ye[1]=xt=>j.value=!0),onLoadPlan:Fs,onSavePlan:$e,onAdjustView:me,onGenerateSummary:gn,class:"flex-shrink-0"},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])):Zt("",!0),S("div",dW,[i.value&&V.value&&!st.value?(Ne(),Be("div",{key:0,onClick:ee,class:"md:hidden fixed inset-0 bg-black/30 z-[1800] transition-opacity duration-300"})):Zt("",!0),S("div",hW,[S("div",{ref_key:"mapContainer",ref:r,class:"absolute inset-0 z-[1000]"},null,512)]),V.value&&!st.value?(Ne(),Be(wn,{key:1},[gs.value?(Ne(),ua(rp,{key:0,to:"body"},[yi(p5,{show:i.value,"onUpdate:show":Ye[2]||(Ye[2]=xt=>i.value=xt),"selected-tool":Vn(p),"selected-shape":Ae.value,"is-drawing":Vn(ge),onToolSelected:Vn(E),onFilterChange:Bs,onDeleteShape:We,onPropertiesUpdate:et,onStyleUpdate:Vn(D),class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected","onStyleUpdate"])])):(Ne(),ua(p5,{key:1,show:i.value,"onUpdate:show":Ye[3]||(Ye[3]=xt=>i.value=xt),"selected-tool":Vn(p),"selected-shape":Ae.value,"is-drawing":Vn(ge),onToolSelected:Vn(E),onFilterChange:Bs,onDeleteShape:We,onPropertiesUpdate:et,onStyleUpdate:Vn(D),class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected","onStyleUpdate"]))],64)):Zt("",!0),V.value&&!st.value?(Ne(),Be("div",{key:2,class:"md:hidden fixed left-0 right-0 z-[1900] bg-white py-3 px-3 shadow-lg border-t border-gray-200 flex items-center justify-between cursor-pointer",style:{height:"var(--mobile-bottom-toolbar-height)",bottom:"0"},onClick:ee},Ye[12]||(Ye[12]=[tu('<div class="flex items-center w-full justify-center"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg><span class="text-sm text-gray-500 font-medium">Outils</span></div></div>',1)]))):Zt("",!0)])]),st.value?(Ne(),Be("div",fW,Ye[13]||(Ye[13]=[tu('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Génération de la synthèse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):Zt("",!0)],512),[[ky,V.value]]),(Ne(),ua(rp,{to:"body"},[yi(FE,{ref_key:"newPlanModalRef",ref:he,modelValue:j.value,"onUpdate:modelValue":Ye[4]||(Ye[4]=xt=>j.value=xt),onCreated:ct,onSalarieSelected:Ye[5]||(Ye[5]=xt=>re.value=xt),onVisiteurSelected:Ye[6]||(Ye[6]=xt=>K.value=xt)},null,8,["modelValue"])])),(Ne(),ua(rp,{to:"body"},[J.value?(Ne(),Be("div",pW,[S("div",gW,[S("div",mW,[Ye[15]||(Ye[15]=S("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),S("button",{onClick:Ye[7]||(Ye[7]=xt=>J.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},Ye[14]||(Ye[14]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",vW,[Vn(G).isAdmin?(Ne(),Be("div",yW,[it.value?re.value?Z.value?(Ne(),Be("div",BW,[S("div",RW,[S("button",{onClick:Cn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ye[31]||(Ye[31]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ri(" Retour à la liste des clients ")])),Ye[32]||(Ye[32]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",FW,kt(vn(Z.value)),1)]),Ye[34]||(Ye[34]=S("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),S("div",jW,[ye.value?(Ne(),Be(wn,{key:0},Qn(3,xt=>S("div",{key:xt,class:"animate-pulse"},Ye[33]||(Ye[33]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),S("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ne(!0),Be(wn,{key:1},Qn(qe.value,xt=>(Ne(),Be("div",{key:xt.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[S("button",{onClick:Kt=>je(xt.id),class:"w-full text-left"},[S("div",$W,kt(xt.nom),1),S("div",VW,kt(xt.description),1),S("div",UW," Modifié le "+kt(Ee(xt.date_modification)),1)],8,zW),Vn(G).isAdmin||Vn(G).isEntreprise?(Ne(),Be("button",{key:0,onClick:nu(Kt=>xr(xt),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,HW)):Zt("",!0)]))),128))])])):(Ne(),Be("div",kW,[S("div",AW,[S("button",{onClick:xn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ye[24]||(Ye[24]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ri(" Retour à la liste des salaries ")])),Ye[25]||(Ye[25]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",TW,kt(vn(re.value)),1)]),Ye[30]||(Ye[30]=S("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),S("div",DW,[S("button",{onClick:tr,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},Ye[26]||(Ye[26]=[S("div",null,[S("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),S("div",{class:"text-xs text-primary-600"},"Afficher les plans créés sans visiteur associé")],-1),S("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),de.value?(Ne(),Be(wn,{key:0},Qn(3,xt=>S("div",{key:xt,class:"animate-pulse"},Ye[27]||(Ye[27]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(),Be(wn,{key:1},[X.value.length===0?(Ne(),Be("div",NW,Ye[28]||(Ye[28]=[S("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),S("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Ne(!0),Be(wn,{key:1},Qn(X.value,xt=>(Ne(),Be("button",{key:xt.id,onClick:Kt=>Rs(xt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",IW,kt(vn(xt)),1)]),Ye[29]||(Ye[29]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,OW))),128))],64))])])):(Ne(),Be("div",LW,[S("div",SW,[S("button",{onClick:en,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ye[19]||(Ye[19]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ri(" Retour à la liste des entreprises ")])),Ye[20]||(Ye[20]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",CW,kt(vn(it.value)),1)]),Ye[23]||(Ye[23]=S("h3",{class:"font-medium text-gray-700"},"Sélectionnez un salarie",-1)),S("div",EW,[oe.value?(Ne(),Be(wn,{key:0},Qn(3,xt=>S("div",{key:xt,class:"animate-pulse"},Ye[21]||(Ye[21]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(!0),Be(wn,{key:1},Qn(Dn.value,xt=>(Ne(),Be("button",{key:xt.id,onClick:Kt=>er(xt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",MW,kt(vn(xt)),1)]),Ye[22]||(Ye[22]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,PW))),128))])])):(Ne(),Be("div",bW,[Ye[18]||(Ye[18]=S("h3",{class:"font-medium text-gray-700"},"Sélectionnez une entreprise",-1)),S("div",_W,[$t.value?(Ne(),Be(wn,{key:0},Qn(3,xt=>S("div",{key:xt,class:"animate-pulse"},Ye[16]||(Ye[16]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(!0),Be(wn,{key:1},Qn(Jt.value,xt=>(Ne(),Be("button",{key:xt.id,onClick:Kt=>Jn(xt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",xW,kt(vn(xt)),1)]),Ye[17]||(Ye[17]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,wW))),128))])]))])):Vn(G).isSalarie?(Ne(),Be("div",WW,[Z.value?(Ne(),Be("div",XW,[S("div",JW,[S("button",{onClick:Cn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ye[39]||(Ye[39]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ri(" Retour à la liste des clients ")])),Ye[40]||(Ye[40]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",QW,kt(vn(Z.value)),1)]),Ye[42]||(Ye[42]=S("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),S("div",eG,[ye.value?(Ne(),Be(wn,{key:0},Qn(3,xt=>S("div",{key:xt,class:"animate-pulse"},Ye[41]||(Ye[41]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),S("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ne(!0),Be(wn,{key:1},Qn(qe.value,xt=>(Ne(),Be("div",{key:xt.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[S("button",{onClick:Kt=>je(xt.id),class:"w-full text-left"},[S("div",nG,kt(xt.nom),1),S("div",rG,kt(xt.description),1),S("div",iG," Modifié le "+kt(Ee(xt.date_modification)),1)],8,tG),Vn(G).isAdmin||Vn(G).isEntreprise?(Ne(),Be("button",{key:0,onClick:nu(Kt=>xr(xt),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,sG)):Zt("",!0)]))),128))])])):(Ne(),Be("div",GW,[Ye[38]||(Ye[38]=S("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),S("div",qW,[de.value?(Ne(),Be(wn,{key:0},Qn(3,xt=>S("div",{key:xt,class:"animate-pulse"},Ye[35]||(Ye[35]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(),Be(wn,{key:1},[X.value.length===0?(Ne(),Be("div",YW,Ye[36]||(Ye[36]=[S("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),S("div",{class:"text-sm text-gray-400"}," Veuillez vérifier que des visiteurs ont été assignés à ce salarie ",-1)]))):(Ne(!0),Be(wn,{key:1},Qn(X.value,xt=>(Ne(),Be("button",{key:xt.id,onClick:Kt=>Rs(xt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",ZW,kt(vn(xt)),1)]),Ye[37]||(Ye[37]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,KW))),128))],64))])]))])):Vn(G).isEntreprise?(Ne(),Be("div",oG,[re.value?Z.value?(Ne(),Be("div",yG,[S("div",bG,[S("button",{onClick:Cn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ye[53]||(Ye[53]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ri(" Retour à la liste des visiteurs ")])),Ye[54]||(Ye[54]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",_G,kt(vn(Z.value)),1)]),Ye[56]||(Ye[56]=S("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),S("div",wG,[ye.value?(Ne(),Be(wn,{key:0},Qn(3,xt=>S("div",{key:xt,class:"animate-pulse"},Ye[55]||(Ye[55]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),S("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Ne(!0),Be(wn,{key:1},Qn(qe.value,xt=>(Ne(),Be("div",{key:xt.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[S("button",{onClick:Kt=>je(xt.id),class:"w-full text-left"},[S("div",LG,kt(xt.nom),1),S("div",SG,kt(xt.description),1),S("div",CG," Modifié le "+kt(Ee(xt.date_modification)),1)],8,xG),Vn(G).isAdmin||Vn(G).isEntreprise?(Ne(),Be("button",{key:0,onClick:nu(Kt=>xr(xt),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,EG)):Zt("",!0)]))),128))])])):(Ne(),Be("div",dG,[S("div",hG,[S("button",{onClick:xn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Ye[46]||(Ye[46]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),ri(" Retour à la liste des salariés ")])),Ye[47]||(Ye[47]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",fG,kt(vn(re.value)),1)]),Ye[52]||(Ye[52]=S("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),S("div",pG,[S("button",{onClick:tr,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},Ye[48]||(Ye[48]=[S("div",null,[S("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),S("div",{class:"text-xs text-primary-600"},"Afficher les plans créés sans visiteur associé")],-1),S("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),de.value?(Ne(),Be(wn,{key:0},Qn(3,xt=>S("div",{key:xt,class:"animate-pulse"},Ye[49]||(Ye[49]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(),Be(wn,{key:1},[X.value.length===0?(Ne(),Be("div",gG,Ye[50]||(Ye[50]=[S("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarié",-1),S("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Ne(!0),Be(wn,{key:1},Qn(X.value,xt=>(Ne(),Be("button",{key:xt.id,onClick:Kt=>Rs(xt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",vG,kt(vn(xt)),1)]),Ye[51]||(Ye[51]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,mG))),128))],64))])])):(Ne(),Be("div",aG,[Ye[45]||(Ye[45]=S("h3",{class:"font-medium text-gray-700"},"Sélectionnez un salarié",-1)),S("div",lG,[oe.value?(Ne(),Be(wn,{key:0},Qn(3,xt=>S("div",{key:xt,class:"animate-pulse"},Ye[43]||(Ye[43]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Ne(!0),Be(wn,{key:1},Qn(_e.value,xt=>(Ne(),Be("button",{key:xt.id,onClick:Kt=>er(xt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",cG,kt(vn(xt)),1)]),Ye[44]||(Ye[44]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,uG))),128))])]))])):(Ne(),Be("div",PG,[Vn(s).plans.length===0?(Ne(),Be("div",MG,Ye[57]||(Ye[57]=[S("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(Ne(),Be("div",kG,[(Ne(!0),Be(wn,null,Qn(Vn(s).plans,xt=>(Ne(),Be("div",{key:xt.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[S("button",{onClick:Kt=>je(xt.id),class:"w-full text-left"},[S("div",TG,kt(xt.nom),1),S("div",DG,kt(xt.description),1),S("div",NG," Modifié le "+kt(Ee(xt.date_modification)),1)],8,AG),Vn(G).isAdmin||Vn(G).isEntreprise?(Ne(),Be("button",{key:0,onClick:nu(Kt=>xr(xt),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,OG)):Zt("",!0)]))),128))]))]))])])])):Zt("",!0)])),(Ne(),ua(rp,{to:"body"},[R.value?(Ne(),Be("div",IG,[S("div",BG,[S("div",RG,[Ye[58]||(Ye[58]=S("svg",{class:"h-12 w-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),Ye[59]||(Ye[59]=S("h3",{class:"text-xl font-semibold text-gray-900"},"Supprimer le plan",-1)),S("p",FG,' Êtes-vous sûr de vouloir supprimer le plan "'+kt((Ln=B.value)==null?void 0:Ln.nom)+'" ? Cette action est irréversible. ',1)]),S("div",{class:"flex justify-center space-x-4"},[S("button",{onClick:Jr,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-300"}," Annuler "),S("button",{onClick:lr,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"}," Supprimer ")])])])):Zt("",!0)]))])]),(Ne(),ua(rp,{to:"body"},[U.value?(Ne(),ua(BE,{key:0,note:$.value,"is-new-note":!((jt=$.value)!=null&&jt.id),location:($n=$.value)==null?void 0:$n.location,onClose:pr,onSave:Fo},null,8,["note","is-new-note","location"])):Zt("",!0)]))],64)}}}),jG={class:"fixed inset-0 z-[3001] overflow-y-auto"},zG={class:"flex items-center justify-center min-h-screen w-full p-0"},$G={class:"relative bg-white w-full h-full max-h-full overflow-y-auto md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},VG={class:"p-4 md:p-6"},UG={class:"flex justify-between items-center mb-4 border-b pb-4"},HG={class:"text-xl font-semibold text-gray-900",id:"modal-headline"},WG={class:"mt-4"},GG={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},qG={class:"flex"},YG={class:"ml-3"},KG={class:"text-sm font-medium text-red-800"},ZG={key:0},XG={key:1},JG=["value"],QG={key:2},eq={key:3},tq=["value"],nq={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2"},rq={key:0,class:"mt-2 text-sm text-red-600"},iq={key:0,class:"mt-2 text-sm text-red-600"},sq={key:4},oq={class:"flex items-center"},aq={key:5,class:"border-t pt-4 mt-4"},lq={class:"mb-4"},uq={class:"mb-4"},cq={key:6},dq={key:7},hq={key:0,class:"mt-2 text-sm text-red-600"},fq={class:"flex justify-end space-x-3"},pq=["disabled"],gq={key:0,class:"mr-2"},mq=Hs({__name:"UserFormModal",props:{user:{type:Object,default:()=>({})},salaries:{type:Array,default:()=>[]},entreprises:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isEntreprise:{type:Boolean,default:!1},currentSalarie:{type:String,default:void 0},currentEntreprise:{type:String,default:void 0},apiErrors:{type:Array,default:()=>[]},refreshKey:{type:Number,default:0}},emits:["close","save","refresh"],setup(t,{emit:e}){const n=t,r=e,i=Ct(!1),s=Ct(""),o=Ct(""),a=Ct(""),l=Ct(""),c=Ct(""),h=ou({id:void 0,first_name:"",last_name:"",username:"",email:"",password:"",company_name:"",role:n.isEntreprise?"SALARIE":n.isAdmin?"ADMIN":"VISITEUR",salarie:null,entreprise:null,is_active:!0,storage_quota:50,storage_used:0,ecowitt_api_key:"",ecowitt_application_key:""});Lo(()=>{var v;(v=n.user)!=null&&v.id?(h.id=n.user.id,h.first_name=n.user.first_name||"",h.last_name=n.user.last_name||"",h.username=n.user.username||"",h.email=n.user.email||"",h.company_name=n.user.company_name||"",h.role=n.user.role||"VISITEUR",h.is_active=n.user.is_active??!0,h.ecowitt_api_key=n.user.ecowitt_api_key||"",h.ecowitt_application_key=n.user.ecowitt_application_key||"",h.storage_quota=n.user.storage_quota||50,h.storage_used=n.user.storage_used||0,n.user.salarie?typeof n.user.salarie=="object"?h.salarie=n.user.salarie.id:h.salarie=n.user.salarie:n.user.salarie_id?h.salarie=n.user.salarie_id:n.currentSalarie&&(h.salarie=parseInt(n.currentSalarie)),n.user.entreprise?typeof n.user.entreprise=="object"?h.entreprise=n.user.entreprise.id:h.entreprise=n.user.entreprise:n.user.entreprise_id?h.entreprise=n.user.entreprise_id:n.currentEntreprise&&(h.entreprise=parseInt(n.currentEntreprise))):(n.currentSalarie&&(h.salarie=parseInt(n.currentSalarie)),n.currentEntreprise&&(h.entreprise=parseInt(n.currentEntreprise)),n.isEntreprise?h.role="SALARIE":n.isAdmin||(h.role="VISITEUR"))}),dm(()=>{h.role==="ADMIN"||h.role==="ENTREPRISE"?(h.salarie=null,h.entreprise=null):h.role==="SALARIE"&&(h.salarie=null,n.isEntreprise&&n.currentEntreprise&&(h.entreprise=parseInt(n.currentEntreprise)))}),dm(()=>{s.value="",o.value="",a.value="",l.value="",n.apiErrors&&n.apiErrors.length>0&&n.apiErrors.forEach(v=>{switch(v.field){case"email":s.value=v.message;break;case"username":o.value=v.message;break;case"password":a.value=v.message;break;case"non_field_error":default:l.value=v.message;break}})});async function p(){s.value="",o.value="",a.value="",l.value="";let v=!0;if(h.id||(h.password!==c.value?(a.value="Les mots de passe ne correspondent pas",v=!1):h.password.length<8&&(a.value="Le mot de passe doit contenir au moins 8 caractères",v=!1)),!!v){i.value=!0;try{const g={...h};h.id&&delete g.password,n.isEntreprise&&["SALARIE","VISITEUR"].includes(h.role)&&(g.entreprise_id=n.currentEntreprise?parseInt(n.currentEntreprise):void 0),g.salarie&&(g.salarie_id=g.salarie,delete g.salarie),n.currentSalarie&&h.role==="VISITEUR"&&(g.salarie_id=parseInt(n.currentSalarie)),await r("save",g),r("refresh")}catch(g){console.error("Erreur locale:",g)}finally{i.value=!1}}}return(v,g)=>(Ne(),Be("div",jG,[S("div",zG,[g[42]||(g[42]=S("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[S("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),S("div",$G,[S("div",null,[S("div",VG,[S("div",UG,[S("h3",HG,kt(t.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),S("button",{type:"button",onClick:g[0]||(g[0]=x=>v.$emit("close")),class:"text-gray-400 hover:text-gray-500"},g[16]||(g[16]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",WG,[l.value?(Ne(),Be("div",GG,[S("div",qG,[g[17]||(g[17]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",YG,[S("h3",KG,kt(l.value),1)])])])):Zt("",!0),S("form",{onSubmit:nu(p,["prevent"]),class:"space-y-6"},[t.isAdmin?(Ne(),Be("div",ZG,[g[19]||(g[19]=S("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),kn(S("select",{id:"role","onUpdate:modelValue":g[1]||(g[1]=x=>h.role=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},g[18]||(g[18]=[S("option",{value:"ADMIN"},"Administrateur",-1),S("option",{value:"ENTREPRISE"},"Entreprise",-1),S("option",{value:"SALARIE"},"Salarie",-1),S("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[Zi,h.role]])])):Zt("",!0),t.isAdmin&&h.role==="SALARIE"?(Ne(),Be("div",XG,[g[21]||(g[21]=S("label",{for:"entreprise",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),kn(S("select",{id:"entreprise","onUpdate:modelValue":g[2]||(g[2]=x=>h.entreprise=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[g[20]||(g[20]=S("option",{value:null},"-- Sélectionner une entreprise --",-1)),(Ne(!0),Be(wn,null,Qn(t.entreprises,x=>(Ne(),Be("option",{key:x.id,value:x.id},kt(x.first_name)+" "+kt(x.last_name)+" ("+kt(x.company_name||"Entreprise")+") ",9,JG))),128))],512),[[Zi,h.entreprise]])])):Zt("",!0),t.isEntreprise&&!h.id?(Ne(),Be("div",QG,[g[23]||(g[23]=S("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),kn(S("select",{id:"role","onUpdate:modelValue":g[3]||(g[3]=x=>h.role=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},g[22]||(g[22]=[S("option",{value:"SALARIE"},"Salarie",-1),S("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[Zi,h.role]])])):Zt("",!0),(t.isAdmin||t.isEntreprise)&&h.role==="VISITEUR"&&!t.currentSalarie?(Ne(),Be("div",eq,[g[25]||(g[25]=S("label",{for:"salarie",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),kn(S("select",{id:"salarie","onUpdate:modelValue":g[4]||(g[4]=x=>h.salarie=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},[g[24]||(g[24]=S("option",{value:null},"-- Sélectionner un salarie --",-1)),(Ne(!0),Be(wn,null,Qn(t.salaries,x=>(Ne(),Be("option",{key:x.id,value:x.id},kt(x.first_name)+" "+kt(x.last_name)+" ("+kt(x.company_name||"Salarie")+") ",9,tq))),128))],512),[[Zi,h.salarie]])])):Zt("",!0),S("div",nq,[S("div",null,[g[26]||(g[26]=S("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),kn(S("input",{type:"text",id:"first_name","onUpdate:modelValue":g[5]||(g[5]=x=>h.first_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[zr,h.first_name]])]),S("div",null,[g[27]||(g[27]=S("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),kn(S("input",{type:"text",id:"last_name","onUpdate:modelValue":g[6]||(g[6]=x=>h.last_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[zr,h.last_name]])])]),S("div",null,[g[28]||(g[28]=S("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),kn(S("input",{type:"email",id:"email","onUpdate:modelValue":g[7]||(g[7]=x=>h.email=x),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[zr,h.email]]),s.value?(Ne(),Be("div",rq,kt(s.value),1)):Zt("",!0)]),S("div",null,[g[29]||(g[29]=S("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),kn(S("input",{type:"text",id:"username","onUpdate:modelValue":g[8]||(g[8]=x=>h.username=x),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[zr,h.username]]),o.value?(Ne(),Be("div",iq,kt(o.value),1)):Zt("",!0)]),S("div",null,[g[30]||(g[30]=S("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),kn(S("input",{type:"text",id:"company_name","onUpdate:modelValue":g[9]||(g[9]=x=>h.company_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[zr,h.company_name]])]),h.role==="ENTREPRISE"||h.role==="SALARIE"?(Ne(),Be("div",sq,[g[32]||(g[32]=S("label",{for:"storage_quota",class:"block text-sm font-medium text-gray-700"},"Quota de stockage (MB)",-1)),S("div",oq,[kn(S("input",{type:"number",id:"storage_quota","onUpdate:modelValue":g[10]||(g[10]=x=>h.storage_quota=x),min:"1",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[zr,h.storage_quota]]),g[31]||(g[31]=S("span",{class:"ml-2 text-sm text-gray-500"},"MB",-1))]),g[33]||(g[33]=S("p",{class:"mt-1 text-sm text-gray-500"},"Espace de stockage maximum pour les photos des notes",-1))])):Zt("",!0),h.role==="ENTREPRISE"?(Ne(),Be("div",aq,[g[38]||(g[38]=S("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Configuration API",-1)),S("div",lq,[g[34]||(g[34]=S("label",{for:"ecowitt_api_key",class:"block text-sm font-medium text-gray-700"},"Clé API Ecowitt",-1)),kn(S("input",{type:"text",id:"ecowitt_api_key","onUpdate:modelValue":g[11]||(g[11]=x=>h.ecowitt_api_key=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la clé API Ecowitt"},null,512),[[zr,h.ecowitt_api_key]]),g[35]||(g[35]=S("p",{class:"mt-1 text-sm text-gray-500"},"Clé API pour accéder aux services météo Ecowitt",-1))]),S("div",uq,[g[36]||(g[36]=S("label",{for:"ecowitt_application_key",class:"block text-sm font-medium text-gray-700"},"Clé d'application Ecowitt",-1)),kn(S("input",{type:"text",id:"ecowitt_application_key","onUpdate:modelValue":g[12]||(g[12]=x=>h.ecowitt_application_key=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la clé d'application Ecowitt"},null,512),[[zr,h.ecowitt_application_key]]),g[37]||(g[37]=S("p",{class:"mt-1 text-sm text-gray-500"},"Clé d'application pour accéder aux services météo Ecowitt",-1))])])):Zt("",!0),h.id?Zt("",!0):(Ne(),Be("div",cq,[g[39]||(g[39]=S("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),kn(S("input",{type:"password",id:"password","onUpdate:modelValue":g[13]||(g[13]=x=>h.password=x),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[zr,h.password]])])),h.id?Zt("",!0):(Ne(),Be("div",dq,[g[40]||(g[40]=S("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),kn(S("input",{type:"password",id:"password_confirm","onUpdate:modelValue":g[14]||(g[14]=x=>c.value=x),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[zr,c.value]]),a.value?(Ne(),Be("div",hq,kt(a.value),1)):Zt("",!0)])),S("div",fq,[S("button",{type:"button",onClick:g[15]||(g[15]=x=>v.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Annuler "),S("button",{type:"submit",disabled:i.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[i.value?(Ne(),Be("span",gq,g[41]||(g[41]=[S("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):Zt("",!0),ri(" "+kt(h.id?"Enregistrer":"Créer"),1)],8,pq)])],32)])])])])])]))}}),vq={class:"fixed inset-0 z-[3001] overflow-y-auto"},yq={class:"flex items-center justify-center min-h-screen w-full"},bq={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},_q={class:"p-4 md:p-6"},wq={class:"flex items-start"},xq={class:"ml-4 flex-1"},Lq={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},Sq={class:"mt-2"},Cq={class:"text-sm text-gray-500"},Eq={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},oP=Hs({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(t){return(e,n)=>(Ne(),Be("div",vq,[S("div",yq,[n[3]||(n[3]=S("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[S("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),S("div",bq,[S("div",_q,[S("div",wq,[n[2]||(n[2]=S("div",{class:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[S("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),S("div",xq,[S("h3",Lq,kt(t.title),1),S("div",Sq,[S("p",Cq,kt(t.message),1)])])]),S("div",Eq,[S("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=r=>e.$emit("confirm"))}," Confirmer "),S("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=r=>e.$emit("cancel"))}," Annuler ")])])])])]))}}),Pq={class:"h-full bg-gray-50"},Mq={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},kq={class:"flex justify-between items-center mb-8"},Aq={class:"text-3xl font-extrabold text-gray-900"},Tq={key:0},Dq={key:1},Nq={key:2},Oq={key:0},Iq={key:1},Bq={key:2},Rq={class:"bg-white shadow rounded-lg mb-6 p-4"},Fq={class:"space-y-4"},jq={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},zq={key:0},$q={key:0,value:"ADMIN"},Vq={key:1,value:"ENTREPRISE"},Uq={key:1},Hq=["value"],Wq={key:2},Gq=["value"],qq={class:"w-full"},Yq={class:"bg-white shadow rounded-lg"},Kq={class:"overflow-x-auto"},Zq={class:"min-w-full divide-y divide-gray-200"},Xq={class:"bg-gray-50"},Jq={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Qq={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},eY={class:"bg-white divide-y divide-gray-200"},tY={key:0,class:"animate-pulse"},nY={key:1},rY={class:"px-6 py-4 whitespace-nowrap"},iY={class:"flex items-center"},sY={class:"flex-shrink-0 h-10 w-10"},oY={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},aY={class:"text-primary-600 font-medium"},lY={class:"ml-4"},uY={class:"text-sm font-medium text-gray-900"},cY={class:"text-sm text-gray-500"},dY={class:"px-6 py-4 whitespace-nowrap"},hY={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},fY={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},pY={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},gY={class:"px-6 py-4 whitespace-nowrap"},mY={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},vY=["onClick"],yY=["onClick"],bY={key:0,class:"fixed inset-0 z-[3001] overflow-y-auto"},_Y=Hs({__name:"UserListView",setup(t){const e=xo(),n=su(),r=Ct([]),i=Ct([]),s=Ct([]),o=Ct(!1),a=Ct(!1),l=Ct(null),c=Ct(null),h=Ct(!0),p=Ct([]),v=ou({role:"",search:"",salarie:"",entreprise:""}),g=Xn(()=>e.isAdmin),x=Xn(()=>e.isEntreprise),E=Xn(()=>e.isSalarie),D=Xn(()=>g.value?r.value.filter($=>$.role==="SALARIE"):x.value?r.value.filter($=>{var B,I;return $.role==="SALARIE"&&((B=$.entreprise)==null?void 0:B.id)===((I=e.user)==null?void 0:I.id)}):[]),M=Xn(()=>{let $=r.value;if(x.value&&($=$.filter(B=>{var I,Q,G,_e,ve;return B.role==="SALARIE"?((I=B.entreprise)==null?void 0:I.id)===((Q=e.user)==null?void 0:Q.id):B.role==="VISITEUR"?((_e=(G=B.salarie)==null?void 0:G.entreprise)==null?void 0:_e.id)===((ve=e.user)==null?void 0:ve.id):!1})),E.value&&($=$.filter(B=>{var I,Q;return B.role==="VISITEUR"&&(B.salarie_id===((I=e.user)==null?void 0:I.id)||B.salarie&&B.salarie.id===((Q=e.user)==null?void 0:Q.id))})),(g.value||x.value)&&(v.role&&($=$.filter(B=>B.role===v.role)),v.salarie&&($=$.filter(B=>{var Q;const I=((Q=B.salarie)==null?void 0:Q.id)||B.salarie_id;return(I==null?void 0:I.toString())===v.salarie.toString()})),v.entreprise&&g.value&&($=$.filter(B=>{var I,Q,G,_e,ve;return B.role==="SALARIE"?((Q=(I=B.entreprise)==null?void 0:I.id)==null?void 0:Q.toString())===v.entreprise.toString():B.role==="VISITEUR"?((ve=(_e=(G=B.salarie)==null?void 0:G.entreprise)==null?void 0:_e.id)==null?void 0:ve.toString())===v.entreprise.toString():!1}))),v.search){const B=v.search.toLowerCase();$=$.filter(I=>{var Q,G,_e,ve;return((Q=I.username)==null?void 0:Q.toLowerCase().includes(B))||((G=I.email)==null?void 0:G.toLowerCase().includes(B))||((_e=I.first_name)==null?void 0:_e.toLowerCase().includes(B))||((ve=I.last_name)==null?void 0:ve.toLowerCase().includes(B))||I.company_name&&I.company_name.toLowerCase().includes(B)})}return $});Lo(async()=>{await A(),await z()});async function A(){var $,B,I;h.value=!0;try{if(g.value)r.value=await e.fetchUsers();else if(x.value){const[Q,G]=await Promise.all([tv({role:"SALARIE",entrepriseId:($=e.user)==null?void 0:$.id}),tv({role:"VISITEUR",entrepriseId:(B=e.user)==null?void 0:B.id})]);r.value=[...Q,...G]}else E.value&&(r.value=await tv({role:"VISITEUR",salarieId:(I=e.user)==null?void 0:I.id,includeDetails:!0}),console.log("Visiteurs récupérés:",r.value))}catch(Q){console.error("Erreur lors de la récupération des utilisateurs:",Q),n.error("Erreur lors de la récupération des utilisateurs")}finally{h.value=!1}}async function z(){try{g.value?await Promise.all([Y(),ge()]):x.value&&await ne()}catch($){console.error("Erreur lors de la récupération des dépendances:",$)}}async function Y(){var $;try{g.value?i.value=await e.fetchUsersByRole({role:"SALARIE"}):x.value&&(i.value=await e.fetchEntrepriseSalaries(($=e.user)==null?void 0:$.id))}catch(B){console.error("Erreur lors de la récupération des salaries:",B)}}async function ne(){var $,B;if(!(!x.value||!(($=e.user)!=null&&$.id)))try{i.value=await e.fetchEntrepriseSalaries((B=e.user)==null?void 0:B.id)}catch(I){console.error("Erreur lors de la récupération des salaries de l'entreprise:",I)}}async function ge(){try{s.value=await e.fetchEnterprises()}catch($){console.error("Erreur lors de la récupération des entreprises:",$)}}function pe(){l.value=null,o.value=!0}function O($){l.value={...$},o.value=!0}function j(){o.value=!1,l.value=null,p.value=[]}async function J($){var I,Q,G,_e,ve,qe;p.value=[];const B=!!$.id;try{const re={...$};g.value?(re.entreprise&&typeof re.entreprise=="object"?re.entreprise_id=re.entreprise.id:typeof re.entreprise=="number"&&(re.entreprise_id=re.entreprise),re.salarie&&typeof re.salarie=="object"?re.salarie_id=re.salarie.id:typeof re.salarie=="number"&&(re.salarie_id=re.salarie)):x.value?(re.entreprise_id=(I=e.user)==null?void 0:I.id,re.role==="VISITEUR"&&(re.salarie&&typeof re.salarie=="object"?re.salarie_id=re.salarie.id:typeof re.salarie=="number"&&(re.salarie_id=re.salarie))):E.value&&(re.role="VISITEUR",re.salarie_id=(Q=e.user)==null?void 0:Q.id),re.role==="SALARIE"?((G=re.entreprise)!=null&&G.id?(re.entreprise_id=re.entreprise.id,delete re.entreprise):typeof re.entreprise=="number"&&(re.entreprise_id=re.entreprise,delete re.entreprise),delete re.salarie):re.role==="VISITEUR"&&((_e=re.salarie)!=null&&_e.id?(re.salarie_id=re.salarie.id,delete re.salarie):typeof re.salarie=="number"&&(re.salarie_id=re.salarie,delete re.salarie),delete re.entreprise,delete re.entreprise_id),B?(await e.updateUser($.id,re),n.success("Utilisateur modifié avec succès")):(await e.createUser(re),n.success("Utilisateur créé avec succès")),await Promise.all([A(),z()]),j()}catch(re){console.error("Error saving user:",((ve=re.response)==null?void 0:ve.data)||re),p.value=U7(re),n.error("Erreur lors de la sauvegarde de l'utilisateur");const K=((qe=re.response)==null?void 0:qe.data)||{};let Z="";throw typeof K=="object"&&(Z=Object.entries(K).map(([oe,de])=>Array.isArray(de)?`${oe}: ${de[0]}`:`${oe}: ${de}`).filter(oe=>oe).join(`
`)),Z||(Z="Une erreur est survenue lors de la sauvegarde"),new Error(Z)}}function U($){c.value=$,a.value=!0}async function R(){if(c.value)try{await e.deleteUser(c.value.id),n.success("Utilisateur supprimé avec succès"),await Promise.all([A(),z()]),a.value=!1,c.value=null}catch($){throw console.error("Erreur lors de la suppression de l'utilisateur:",$),n.error("Erreur lors de la suppression de l'utilisateur"),$}}function V($){var B,I,Q,G,_e,ve,qe,re;return g.value?!0:x.value?$.role==="SALARIE"?((B=$.entreprise)==null?void 0:B.id)===((I=e.user)==null?void 0:I.id):$.role==="VISITEUR"?((G=(Q=$.salarie)==null?void 0:Q.entreprise)==null?void 0:G.id)===((_e=e.user)==null?void 0:_e.id):!1:E.value?$.role==="VISITEUR"&&($.salarie_id===((ve=e.user)==null?void 0:ve.id)||((qe=$.salarie)==null?void 0:qe.id)===((re=e.user)==null?void 0:re.id)):!1}return($,B)=>{var I,Q,G,_e;return Ne(),Be("div",Pq,[S("div",Mq,[S("div",kq,[S("h1",Aq,[g.value?(Ne(),Be("span",Tq,"Gestion des utilisateurs")):x.value?(Ne(),Be("span",Dq,"Gestion des salaries et visiteurs")):E.value?(Ne(),Be("span",Nq,"Gestion des visiteurs")):Zt("",!0)]),S("button",{onClick:pe,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[B[5]||(B[5]=S("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),g.value?(Ne(),Be("span",Oq,"Nouvel utilisateur")):x.value?(Ne(),Be("span",Iq,"Nouveau salarie/visiteur")):E.value?(Ne(),Be("span",Bq,"Nouvel visiteur")):Zt("",!0)])]),S("div",Rq,[S("div",Fq,[S("div",jq,[g.value||x.value?(Ne(),Be("div",zq,[B[9]||(B[9]=S("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),kn(S("select",{id:"role-filter","onUpdate:modelValue":B[0]||(B[0]=ve=>v.role=ve),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[B[6]||(B[6]=S("option",{value:""},"Tous les rôles",-1)),g.value?(Ne(),Be("option",$q,"Administrateur")):Zt("",!0),g.value?(Ne(),Be("option",Vq,"Entreprise")):Zt("",!0),B[7]||(B[7]=S("option",{value:"SALARIE"},"Salarie",-1)),B[8]||(B[8]=S("option",{value:"VISITEUR"},"Visiteur",-1))],512),[[Zi,v.role]])])):Zt("",!0),g.value?(Ne(),Be("div",Uq,[B[11]||(B[11]=S("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),kn(S("select",{id:"entreprise-filter","onUpdate:modelValue":B[1]||(B[1]=ve=>v.entreprise=ve),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[B[10]||(B[10]=S("option",{value:""},"Toutes les entreprises",-1)),(Ne(!0),Be(wn,null,Qn(s.value,ve=>(Ne(),Be("option",{key:ve.id,value:ve.id},kt(Vn(Cu)(ve)),9,Hq))),128))],512),[[Zi,v.entreprise]])])):Zt("",!0),g.value||x.value?(Ne(),Be("div",Wq,[B[13]||(B[13]=S("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),kn(S("select",{id:"salarie-filter","onUpdate:modelValue":B[2]||(B[2]=ve=>v.salarie=ve),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[B[12]||(B[12]=S("option",{value:""},"Tous les salaries",-1)),(Ne(!0),Be(wn,null,Qn(D.value,ve=>(Ne(),Be("option",{key:ve.id,value:ve.id},kt(Vn(Cu)(ve)),9,Gq))),128))],512),[[Zi,v.salarie]])])):Zt("",!0)]),S("div",qq,[B[14]||(B[14]=S("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),kn(S("input",{type:"text",id:"search","onUpdate:modelValue":B[3]||(B[3]=ve=>v.search=ve),placeholder:"Rechercher par nom, email, entreprise...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[zr,v.search]])])])]),S("div",Yq,[S("div",Kq,[S("table",Zq,[S("thead",Xq,[S("tr",null,[B[15]||(B[15]=S("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur ",-1)),B[16]||(B[16]=S("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rôle ",-1)),B[17]||(B[17]=S("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),g.value||x.value?(Ne(),Be("th",Jq," Entreprise ")):Zt("",!0),g.value||x.value?(Ne(),Be("th",Qq," Salarie ")):Zt("",!0),B[18]||(B[18]=S("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),B[19]||(B[19]=S("th",{scope:"col",class:"relative px-6 py-3"},[S("span",{class:"sr-only"},"Actions")],-1))])]),S("tbody",eY,[h.value?(Ne(),Be("tr",tY,B[20]||(B[20]=[S("td",{colspan:"7",class:"py-4 px-6"},[S("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):M.value.length===0?(Ne(),Be("tr",nY,B[21]||(B[21]=[S("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun utilisateur trouvé ",-1)]))):Zt("",!0),(Ne(!0),Be(wn,null,Qn(M.value,ve=>{var qe;return Ne(),Be("tr",{key:ve.id},[S("td",rY,[S("div",iY,[S("div",sY,[S("div",oY,[S("span",aY,kt(Vn(W7)(ve.first_name,ve.last_name)),1)])]),S("div",lY,[S("div",uY,kt(Vn(Cu)(ve)),1),S("div",cY,kt(ve.username),1)])])]),S("td",dY,[S("span",{class:Ii(Vn(Y7)())},kt(Vn(q7)(ve.role)),3)]),S("td",hY,kt(ve.email),1),g.value||x.value?(Ne(),Be("td",fY,[ve.role==="ENTREPRISE"?(Ne(),Be(wn,{key:0},[ri(" - ")],64)):ve.role==="SALARIE"?(Ne(),Be(wn,{key:1},[ri(kt(ve.entreprise?Vn(Cu)(ve.entreprise):"Non assigné"),1)],64)):ve.role==="VISITEUR"?(Ne(),Be(wn,{key:2},[ri(kt((qe=ve.salarie)!=null&&qe.entreprise?Vn(Cu)(ve.salarie.entreprise):"Non assigné"),1)],64)):(Ne(),Be(wn,{key:3},[ri(" - ")],64))])):Zt("",!0),g.value||x.value?(Ne(),Be("td",pY,[ve.role==="ENTREPRISE"||ve.role==="ADMIN"?(Ne(),Be(wn,{key:0},[ri(" - ")],64)):ve.role==="SALARIE"?(Ne(),Be(wn,{key:1},[ri(" - ")],64)):(Ne(),Be(wn,{key:2},[ri(kt(ve.salarie?Vn(Cu)(ve.salarie):"Non assigné"),1)],64))])):Zt("",!0),S("td",gY,[S("span",{class:Ii(Vn(K7)(ve.is_active))},kt(ve.is_active?"Actif":"Inactif"),3)]),S("td",mY,[S("button",{onClick:re=>O(ve),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,vY),V(ve)?(Ne(),Be("button",{key:0,onClick:re=>U(ve),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,yY)):Zt("",!0)])])}),128))])])])])]),o.value?(Ne(),Be("div",bY,[yi(mq,{user:l.value,salaries:i.value,entreprises:s.value,"is-admin":g.value,"is-entreprise":x.value,"current-salarie":E.value?(Q=(I=Vn(e).user)==null?void 0:I.id)==null?void 0:Q.toString():void 0,"current-entreprise":x.value?(_e=(G=Vn(e).user)==null?void 0:G.id)==null?void 0:_e.toString():void 0,"api-errors":p.value,onClose:j,onSave:J},null,8,["user","salaries","entreprises","is-admin","is-entreprise","current-salarie","current-entreprise","api-errors"])])):Zt("",!0),a.value?(Ne(),ua(oP,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:R,onCancel:B[4]||(B[4]=ve=>a.value=!1)})):Zt("",!0)])}}}),wY={class:"h-full bg-gray-50"},xY={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},LY={class:"sm:flex sm:items-center"},SY={class:"sm:flex-auto"},CY={class:"text-2xl font-semibold text-gray-900"},EY={class:"mt-2 text-sm text-gray-700"},PY={key:0,class:"mt-8"},MY={class:"mb-6"},kY=["value"],AY={class:"mb-6"},TY={value:null},DY=["value"],NY={key:0,class:"mb-6"},OY={value:null},IY=["value"],BY={key:1,class:"mt-8"},RY={class:"mb-6"},FY=["value"],jY={class:"mt-8"},zY={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},$Y={class:"overflow-x-auto"},VY={class:"min-w-full divide-y divide-gray-300"},UY={class:"bg-gray-50"},HY={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},WY={class:"ml-2 flex-none rounded"},GY={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},qY={class:"ml-2 flex-none rounded"},YY={class:"divide-y divide-gray-200 bg-white"},KY={key:0},ZY={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},XY={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},JY={class:"px-3 py-4 text-sm text-gray-900"},QY={key:0,class:"flex items-center"},eK={class:"h-8 w-8 flex-shrink-0"},tK={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},nK={class:"text-primary-700 font-medium text-sm"},rK={class:"ml-3"},iK={class:"font-medium"},sK={key:1,class:"text-gray-500"},oK={class:"px-3 py-4 text-sm text-gray-900"},aK={key:0,class:"flex items-center"},lK={class:"h-8 w-8 flex-shrink-0"},uK={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},cK={class:"text-primary-700 font-medium text-sm"},dK={class:"ml-3"},hK={class:"font-medium"},fK={key:1,class:"text-gray-500"},pK={class:"px-3 py-4 text-sm text-gray-900"},gK={key:0,class:"flex items-center"},mK={class:"h-8 w-8 flex-shrink-0"},vK={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},yK={class:"text-primary-700 font-medium text-sm"},bK={class:"ml-3"},_K={class:"font-medium"},wK={key:1,class:"text-gray-500"},xK={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},LK={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},SK=["onClick"],CK=["onClick"],EK=["onClick"],PK={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},MK={class:"bg-white rounded-lg p-6 max-w-md w-full"},kK={class:"flex justify-between items-center mb-4"},AK=["disabled"],TK=["disabled"],DK={key:0,class:"space-y-4"},NK={key:0},OK=["disabled"],IK=["value"],BK=["disabled"],RK=["value"],FK={key:0,class:"mt-1 text-sm text-gray-500"},jK=["disabled"],zK=["value"],$K={key:0,class:"mt-1 text-sm text-gray-500"},VK={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},UK={class:"flex"},HK={class:"ml-3"},WK={class:"text-sm font-medium text-red-800"},GK={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},qK=["disabled"],YK={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},KK=Hs({__name:"PlansView",setup(t){const e=Nm(),n=$y(),r=xo(),i=Ct([]),s=Ct([]),o=Ct([]),a=Ct([]),l=Ct(!1),c=Ct(!1),h=Ct(!1),p=Ct(null),v=Ct({nom:"",description:"",client:null}),g=Ct({id:0,nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),x=Ct(!1),E=Ct(null),D=Ct(null),M=Ct(null),A=Ct("date_modification"),z=Ct("desc"),Y=Ct(null),ne=Xn(()=>D.value?a.value.filter(he=>typeof he.salarie=="object"&&he.salarie?he.salarie.id===D.value:he.salarie===D.value||he.salarie_id===D.value):a.value),ge=Xn(()=>{let he=i.value;console.log(`
[PlansView] Filtering plans:`,he.map(Ae=>({id:Ae.id,entreprise:Ae.entreprise,salarie:Ae.salarie,visiteur:Ae.visiteur}))),r.isAdmin?(Y.value&&(he=he.filter(Ae=>{var De;return typeof Ae.entreprise=="object"?((De=Ae.entreprise)==null?void 0:De.id)===Y.value:Ae.entreprise===Y.value})),D.value&&(he=he.filter(Ae=>{var De;return typeof Ae.salarie=="object"?((De=Ae.salarie)==null?void 0:De.id)===D.value:Ae.salarie===D.value}),M.value&&(he=he.filter(Ae=>{var De;return typeof Ae.visiteur=="object"?((De=Ae.visiteur)==null?void 0:De.id)===M.value:Ae.visiteur===M.value})))):r.isSalarie&&(he=he.filter(Ae=>{var De,Xe,fe;return typeof Ae.salarie=="object"?((De=Ae.salarie)==null?void 0:De.id)===((Xe=r.user)==null?void 0:Xe.id):Ae.salarie===((fe=r.user)==null?void 0:fe.id)}),M.value&&(he=he.filter(Ae=>{var De;return typeof Ae.visiteur=="object"?((De=Ae.visiteur)==null?void 0:De.id)===M.value:Ae.visiteur===M.value})));const X=[...he].sort((Ae,De)=>{if(A.value==="nom")return z.value==="asc"?Ae.nom.localeCompare(De.nom):De.nom.localeCompare(Ae.nom);{const Xe=new Date(Ae[A.value]).getTime(),fe=new Date(De[A.value]).getTime();return z.value==="asc"?Xe-fe:fe-Xe}});return console.log("[PlansView] Final filtered and sorted plans:",X.map(Ae=>({id:Ae.id,entreprise:Ae.entreprise,salarie:Ae.salarie,visiteur:Ae.visiteur}))),X}),pe=Xn(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complète des plans",plans:i.value}:r.isSalarie?{title:"Plans des visiteurs",description:"Plans où vous êtes assigné comme salarie",plans:i.value.filter(he=>{var X,Ae,De;return typeof he.salarie=="object"?((X=he.salarie)==null?void 0:X.id)===((Ae=r.user)==null?void 0:Ae.id):he.salarie===((De=r.user)==null?void 0:De.id)})}:{title:"Mes plans",description:"Plans qui vous sont assignés ou que vous avez créés",plans:i.value.filter(he=>{var De,Xe,fe,ee;const X=he.createur.id===((De=r.user)==null?void 0:De.id);let Ae=!1;return typeof he.visiteur=="object"?Ae=((Xe=he.visiteur)==null?void 0:Xe.id)===((fe=r.user)==null?void 0:fe.id):Ae=he.visiteur===((ee=r.user)==null?void 0:ee.id),Ae||X})}),O=Xn(()=>Y.value?s.value.filter(he=>{var X;return typeof he.entreprise=="object"?((X=he.entreprise)==null?void 0:X.id)===Y.value:he.entreprise_id===Y.value}):s.value),j=Xn(()=>g.value.entreprise?s.value.filter(he=>{var X;return typeof he.entreprise=="object"?((X=he.entreprise)==null?void 0:X.id)===g.value.entreprise:he.entreprise_id===g.value.entreprise}):[]),J=Xn(()=>!g.value.entreprise||!g.value.salarie?[]:a.value.filter(he=>typeof he.salarie=="object"&&he.salarie?he.salarie.id===g.value.salarie:he.salarie===g.value.salarie||he.salarie_id===g.value.salarie));Lo(async()=>{var he;await U(),r.isAdmin?await R():r.isSalarie&&await $(((he=r.user)==null?void 0:he.id)||0)});async function U(){try{const he=await n.fetchPlansWithDetails();i.value=he.data}catch(he){console.error("Erreur lors du chargement des plans:",he)}}async function R(){try{console.log("Chargement des entreprises..."),o.value=await r.fetchEnterprises(),console.log("Entreprises chargées:",o.value)}catch(he){console.error("Erreur lors du chargement des entreprises:",he)}}async function V(he){try{if(console.log("Chargement des salaries pour l'entreprise:",he),he===void 0){const X=await r.fetchUsersByRole({role:"SALARIE"});s.value=X}else s.value=await r.fetchEntrepriseSalaries(he);console.log("Salaries chargés:",s.value)}catch(X){console.error("Erreur lors du chargement des salaries:",X)}}async function $(he){try{console.log("Chargement des visiteurs pour le salarie:",he);const X=await tv({role:"VISITEUR",salarieId:he});a.value=X.map(Ae=>({...Ae,salarie_id:he})),console.log("Visiteurs chargés:",a.value)}catch(X){console.error("Erreur lors du chargement des visiteurs:",X)}}function B(){l.value=!0,v.value={nom:"",description:"",client:null}}async function I(he){console.log(`
[PlansView][editPlan] ====== DÉBUT ÉDITION PLAN ======`),console.log("[PlansView][editPlan] Plan reçu:",{id:he.id,nom:he.nom,entreprise:he.entreprise,salarie:he.salarie,visiteur:he.visiteur});try{console.log("[PlansView][editPlan] Définition du plan courant dans le store..."),n.setCurrentPlan(he),console.log("[PlansView][editPlan] Sauvegarde de l'ID dans localStorage:",he.id),localStorage.setItem("lastPlanId",he.id.toString()),console.log("[PlansView][editPlan] Redirection vers la vue carte..."),await e.push("/"),console.log(`[PlansView][editPlan] ====== FIN ÉDITION PLAN ======
`)}catch(X){console.error("[PlansView][editPlan] ERREUR:",X),X instanceof Error&&console.error("[PlansView][editPlan] Stack trace:",X.stack),alert("Une erreur est survenue lors du chargement du plan")}}async function Q(he){he!=null&&he.id&&(p.value=he,h.value=!0)}async function G(){var he,X;if((he=p.value)!=null&&he.id)try{await n.deletePlan(p.value.id),await U(),((X=n.currentPlan)==null?void 0:X.id)===p.value.id&&n.clearCurrentPlan()}catch(Ae){console.error("Erreur lors de la suppression du plan:",Ae),alert("Une erreur est survenue lors de la suppression du plan")}finally{h.value=!1,p.value=null}}function _e(){h.value=!1,p.value=null}function ve(he){return new Date(he).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function qe(he){if(!he)return"";const X=he.first_name||"",Ae=he.last_name||"";return(X.charAt(0)+Ae.charAt(0)).toUpperCase()}async function re(he){x.value=!0,E.value=null;try{r.isAdmin&&!o.value.length&&await R();const X=typeof he.entreprise=="object"&&he.entreprise?he.entreprise.id:he.entreprise,Ae=typeof he.salarie=="object"&&he.salarie?he.salarie.id:he.salarie,De=typeof he.visiteur=="object"&&he.visiteur?he.visiteur.id:he.visiteur;g.value={id:he.id,nom:he.nom,description:he.description,entreprise:X||null,salarie:Ae||null,visiteur:De||null},X&&await V(X),Ae&&await $(Ae),c.value=!0}catch(X){console.error("Erreur lors de l'ouverture du modal:",X),E.value="Erreur lors du chargement des données"}finally{x.value=!1}}async function K(){var he,X,Ae,De,Xe;E.value=null,x.value=!0;try{if(!g.value.nom.trim())throw new Error("Le nom du plan est requis");if(g.value.visiteur&&!g.value.salarie)throw new Error("Un salarie doit être sélectionné pour assigner un visiteur");if(g.value.salarie&&!g.value.entreprise)throw new Error("Une entreprise doit être sélectionnée pour assigner un salarie");console.log("Données envoyées pour la mise à jour:",{id:g.value.id,nom:g.value.nom.trim(),description:g.value.description.trim(),entreprise_id:g.value.entreprise,salarie_id:g.value.salarie,visiteur_id:g.value.visiteur});const fe=await n.updatePlanDetails(g.value.id,{nom:g.value.nom.trim(),description:g.value.description.trim(),entreprise_id:g.value.entreprise,salarie_id:g.value.salarie,visiteur_id:g.value.visiteur});console.log("Réponse de la mise à jour:",fe),fe&&(c.value=!1,await U())}catch(fe){if(console.error("Erreur lors de la mise à jour du plan:",fe),(X=(he=fe.response)==null?void 0:he.data)!=null&&X.detail)E.value=fe.response.data.detail;else if((De=(Ae=fe.response)==null?void 0:Ae.data)!=null&&De.non_field_errors)E.value=fe.response.data.non_field_errors[0];else if((Xe=fe.response)!=null&&Xe.data){const ee=Object.entries(fe.response.data).map(([se,le])=>`${se}: ${Array.isArray(le)?le[0]:le}`);E.value=ee.join(`
`)}else E.value=fe.message||"Une erreur est survenue lors de la mise à jour du plan"}finally{x.value=!1}}Ti(()=>Y.value,async he=>{D.value=null,M.value=null,he?await V(he):await V()}),Ti(()=>D.value,async he=>{M.value=null,he&&await $(he)}),Ti(()=>g.value.entreprise,async he=>{he===null?(g.value.salarie=null,g.value.visiteur=null):await V(he)}),Ti(()=>g.value.salarie,async he=>{g.value.visiteur=null,he&&await $(he)});function Z(he){var Xe,fe,ee;const X=r.user;if(!X)return!1;if(X.user_type==="admin")return!0;if(X.user_type==="entreprise")return typeof he.entreprise=="object"?((Xe=he.entreprise)==null?void 0:Xe.id)===X.id:he.entreprise===X.id;if(X.user_type==="salarie")return typeof he.salarie=="object"?((fe=he.salarie)==null?void 0:fe.id)===X.id:he.salarie===X.id;const Ae=he.createur.id===X.id;let De=!1;return typeof he.visiteur=="object"?De=((ee=he.visiteur)==null?void 0:ee.id)===X.id:De=he.visiteur===X.id,De||Ae}async function oe(he){await U(),localStorage.setItem("lastPlanId",he.toString()),console.log(`Plan ${he} créé et défini comme plan actif`),e.push("/")}function de(he){A.value===he?z.value=z.value==="asc"?"desc":"asc":(A.value=he,z.value="desc")}function ye(he){return he?Cu(he):""}return(he,X)=>{var Ae;return Ne(),Be("div",wY,[S("div",xY,[S("div",LY,[S("div",SY,[S("h1",CY,kt(pe.value.title),1),S("p",EY,kt(pe.value.description),1)]),S("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[S("button",{onClick:B,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),Vn(r).isAdmin?(Ne(),Be("div",PY,[S("div",MY,[X[15]||(X[15]=S("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par entreprise",-1)),kn(S("select",{id:"entreprise-filter","onUpdate:modelValue":X[0]||(X[0]=De=>Y.value=De),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[X[14]||(X[14]=S("option",{value:null},"Toutes les entreprises",-1)),(Ne(!0),Be(wn,null,Qn(o.value,De=>(Ne(),Be("option",{key:De.id,value:De.id},kt(ye(De)),9,kY))),128))],512),[[Zi,Y.value]])]),S("div",AY,[X[16]||(X[16]=S("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par salarie",-1)),kn(S("select",{id:"salarie-filter","onUpdate:modelValue":X[1]||(X[1]=De=>D.value=De),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[S("option",TY,kt(O.value.length?"Tous les salaries":"Aucun salarie disponible"),1),(Ne(!0),Be(wn,null,Qn(O.value,De=>(Ne(),Be("option",{key:De.id,value:De.id},kt(ye(De)),9,DY))),128))],512),[[Zi,D.value]])]),D.value?(Ne(),Be("div",NY,[X[17]||(X[17]=S("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),kn(S("select",{id:"visiteur-filter","onUpdate:modelValue":X[2]||(X[2]=De=>M.value=De),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[S("option",OY,kt(ne.value.length?"Tous les visiteurs":"Aucun visiteur disponible"),1),(Ne(!0),Be(wn,null,Qn(ne.value,De=>(Ne(),Be("option",{key:De.id,value:De.id},kt(ye(De)),9,IY))),128))],512),[[Zi,M.value]])])):Zt("",!0)])):Vn(r).isSalarie?(Ne(),Be("div",BY,[S("div",RY,[X[19]||(X[19]=S("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),kn(S("select",{id:"visiteur-filter","onUpdate:modelValue":X[3]||(X[3]=De=>M.value=De),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[X[18]||(X[18]=S("option",{value:null},"Tous les visiteurs",-1)),(Ne(!0),Be(wn,null,Qn(a.value,De=>(Ne(),Be("option",{key:De.id,value:De.id},kt(ye(De)),9,FY))),128))],512),[[Zi,M.value]])])])):Zt("",!0),S("div",jY,[S("div",zY,[S("div",$Y,[S("table",VY,[S("thead",UY,[S("tr",null,[S("th",HY,[S("button",{onClick:X[4]||(X[4]=De=>de("nom")),class:"group inline-flex items-center"},[X[21]||(X[21]=ri(" Nom ")),S("span",WY,[(Ne(),Be("svg",{class:Ii(["h-5 w-5",{"text-gray-900":A.value==="nom","text-gray-400":A.value!=="nom","rotate-180":A.value==="nom"&&z.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},X[20]||(X[20]=[S("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),X[24]||(X[24]=S("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),X[25]||(X[25]=S("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise ",-1)),X[26]||(X[26]=S("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Salarie ",-1)),X[27]||(X[27]=S("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Visiteur ",-1)),S("th",GY,[S("button",{onClick:X[5]||(X[5]=De=>de("date_modification")),class:"group inline-flex items-center"},[X[23]||(X[23]=ri(" Dernière modification ")),S("span",qY,[(Ne(),Be("svg",{class:Ii(["h-5 w-5",{"text-gray-900":A.value==="date_modification","text-gray-400":A.value!=="date_modification","rotate-180":A.value==="date_modification"&&z.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},X[22]||(X[22]=[S("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),X[28]||(X[28]=S("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[S("span",{class:"sr-only"},"Actions")],-1))])]),S("tbody",YY,[ge.value.length===0?(Ne(),Be("tr",KY,X[29]||(X[29]=[S("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):Zt("",!0),(Ne(!0),Be(wn,null,Qn(ge.value,De=>(Ne(),Be("tr",{key:De.id,class:"hover:bg-gray-50"},[S("td",ZY,kt(De.nom),1),S("td",XY,kt(De.description||"-"),1),S("td",JY,[De.entreprise&&typeof De.entreprise=="object"?(Ne(),Be("div",QY,[S("div",eK,[S("div",tK,[S("span",nK,kt(qe(De.entreprise)),1)])]),S("div",rK,[S("div",iK,kt(Vn(Cu)(De.entreprise)),1)])])):(Ne(),Be("div",sK," Non assigné "))]),S("td",oK,[De.salarie&&typeof De.salarie=="object"?(Ne(),Be("div",aK,[S("div",lK,[S("div",uK,[S("span",cK,kt(qe(De.salarie)),1)])]),S("div",dK,[S("div",hK,kt(Vn(Cu)(De.salarie)),1)])])):(Ne(),Be("div",fK," Non assigné "))]),S("td",pK,[De.visiteur&&typeof De.visiteur=="object"?(Ne(),Be("div",gK,[S("div",mK,[S("div",vK,[S("span",yK,kt(qe(De.visiteur)),1)])]),S("div",bK,[S("div",_K,kt(Vn(Cu)(De.visiteur)),1)])])):(Ne(),Be("div",wK," Non assigné "))]),S("td",xK,kt(ve(De.date_modification)),1),S("td",LK,[S("button",{onClick:Xe=>I(De),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,SK),S("button",{onClick:Xe=>re(De),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,CK),Z(De)?(Ne(),Be("button",{key:0,onClick:Xe=>Q(De),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,EK)):Zt("",!0)])]))),128))])])])])]),yi(FE,{modelValue:l.value,"onUpdate:modelValue":X[6]||(X[6]=De=>l.value=De),salaries:s.value,clients:a.value,onCreated:oe},null,8,["modelValue","salaries","clients"]),c.value?(Ne(),Be("div",PK,[S("div",MK,[S("div",kK,[X[31]||(X[31]=S("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),S("button",{onClick:X[7]||(X[7]=De=>c.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},X[30]||(X[30]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("form",{onSubmit:nu(K,["prevent"]),class:"space-y-4"},[S("div",null,[X[32]||(X[32]=S("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),kn(S("input",{type:"text",id:"edit-nom","onUpdate:modelValue":X[8]||(X[8]=De=>g.value.nom=De),disabled:x.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",required:""},null,8,AK),[[zr,g.value.nom]])]),S("div",null,[X[33]||(X[33]=S("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),kn(S("textarea",{id:"edit-description","onUpdate:modelValue":X[9]||(X[9]=De=>g.value.description=De),disabled:x.value,rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,TK),[[zr,g.value.description]])]),Vn(r).isAdmin||((Ae=Vn(r).user)==null?void 0:Ae.user_type)==="entreprise"?(Ne(),Be("div",DK,[Vn(r).isAdmin?(Ne(),Be("div",NK,[X[35]||(X[35]=S("label",{for:"edit-entreprise",class:"block text-sm font-medium text-gray-700"}," Entreprise ",-1)),kn(S("select",{id:"edit-entreprise","onUpdate:modelValue":X[10]||(X[10]=De=>g.value.entreprise=De),disabled:x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[X[34]||(X[34]=S("option",{value:null},"Sélectionner une entreprise",-1)),(Ne(!0),Be(wn,null,Qn(o.value,De=>(Ne(),Be("option",{key:De.id,value:De.id},kt(ye(De)),9,IK))),128))],8,OK),[[Zi,g.value.entreprise]])])):Zt("",!0),S("div",null,[X[37]||(X[37]=S("label",{for:"edit-salarie",class:"block text-sm font-medium text-gray-700"}," Salarie ",-1)),kn(S("select",{id:"edit-salarie","onUpdate:modelValue":X[11]||(X[11]=De=>g.value.salarie=De),disabled:Vn(r).isAdmin&&!g.value.entreprise||x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[X[36]||(X[36]=S("option",{value:null},"Sélectionner un salarie",-1)),(Ne(!0),Be(wn,null,Qn(j.value,De=>(Ne(),Be("option",{key:De.id,value:De.id},kt(ye(De)),9,RK))),128))],8,BK),[[Zi,g.value.salarie]]),Vn(r).isAdmin&&!g.value.entreprise?(Ne(),Be("p",FK," Veuillez d'abord sélectionner une entreprise ")):Zt("",!0)]),S("div",null,[X[39]||(X[39]=S("label",{for:"edit-visiteur",class:"block text-sm font-medium text-gray-700"}," Visiteur ",-1)),kn(S("select",{id:"edit-visiteur","onUpdate:modelValue":X[12]||(X[12]=De=>g.value.visiteur=De),disabled:!g.value.salarie||x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[X[38]||(X[38]=S("option",{value:null},"Sélectionner un visiteur",-1)),(Ne(!0),Be(wn,null,Qn(J.value,De=>(Ne(),Be("option",{key:De.id,value:De.id},kt(ye(De)),9,zK))),128))],8,jK),[[Zi,g.value.visiteur]]),g.value.salarie?Zt("",!0):(Ne(),Be("p",$K," Veuillez d'abord sélectionner un salarie "))])])):Zt("",!0),E.value?(Ne(),Be("div",VK,[S("div",UK,[X[40]||(X[40]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",HK,[S("p",WK,kt(E.value),1)])])])):Zt("",!0),S("div",GK,[S("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:X[13]||(X[13]=De=>c.value=!1)}," Annuler "),S("button",{type:"submit",disabled:x.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[x.value?(Ne(),Be("svg",YK,X[41]||(X[41]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Zt("",!0),ri(" "+kt(x.value?"Enregistrement...":"Enregistrer"),1)],8,qK)])],32)])])):Zt("",!0),h.value?(Ne(),ua(oP,{key:3,title:"Supprimer le plan",message:"Êtes-vous sûr de vouloir supprimer ce plan ? Cette action est irréversible.",onConfirm:G,onCancel:_e})):Zt("",!0)])])}}});var aP={exports:{}};const ZK=bE(rI);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function F5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function td(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F5(Object(n),!0).forEach(function(r){XK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uv(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?uv=function(e){return typeof e}:uv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uv(t)}function XK(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xu(){return Xu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xu.apply(this,arguments)}function JK(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function QK(t,e){if(t==null)return{};var n=JK(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function eZ(t){return tZ(t)||nZ(t)||rZ(t)||iZ()}function tZ(t){if(Array.isArray(t))return Nb(t)}function nZ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rZ(t,e){if(t){if(typeof t=="string")return Nb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nb(t,e)}}function Nb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function iZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var sZ="1.14.0";function Od(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var jd=Od(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Om=Od(/Edge/i),j5=Od(/firefox/i),Gg=Od(/safari/i)&&!Od(/chrome/i)&&!Od(/android/i),lP=Od(/iP(ad|od|hone)/i),oZ=Od(/chrome/i)&&Od(/android/i),uP={capture:!1,passive:!1};function Oi(t,e,n){t.addEventListener(e,n,!jd&&uP)}function Li(t,e,n){t.removeEventListener(e,n,!jd&&uP)}function Zv(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function aZ(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function vc(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Zv(t,e):Zv(t,e))||r&&t===n)return t;if(t===n)break}while(t=aZ(t))}return null}var z5=/\s+/g;function bo(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(z5," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(z5," ")}}function dr(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function ff(t,e){var n="";if(typeof t=="string")n=t;else do{var r=dr(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function cP(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function Jc(){var t=document.scrollingElement;return t||document.documentElement}function eo(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,c,h,p;if(t!==window&&t.parentNode&&t!==Jc()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,h=s.height,p=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,h=window.innerHeight,p=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!jd))do if(i&&i.getBoundingClientRect&&(dr(i,"transform")!=="none"||n&&dr(i,"position")!=="static")){var v=i.getBoundingClientRect();o-=v.top+parseInt(dr(i,"border-top-width")),a-=v.left+parseInt(dr(i,"border-left-width")),l=o+s.height,c=a+s.width;break}while(i=i.parentNode);if(r&&t!==window){var g=ff(i||t),x=g&&g.a,E=g&&g.d;g&&(o/=E,a/=x,p/=x,h/=E,l=o+h,c=a+p)}return{top:o,left:a,bottom:l,right:c,width:p,height:h}}}function $5(t,e,n){for(var r=dh(t,!0),i=eo(t)[e];r;){var s=eo(r)[n],o=void 0;if(o=i>=s,!o)return r;if(r===Jc())break;r=dh(r,!1)}return!1}function Tp(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Br.ghost&&(r||o[s]!==Br.dragged)&&vc(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function V_(t,e){for(var n=t.lastElementChild;n&&(n===Br.ghost||dr(n,"display")==="none"||e&&!Zv(n,e));)n=n.previousElementSibling;return n||null}function No(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Br.clone&&(!e||Zv(t,e))&&n++;return n}function V5(t){var e=0,n=0,r=Jc();if(t)do{var i=ff(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function lZ(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function dh(t,e){if(!t||!t.getBoundingClientRect)return Jc();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=dr(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Jc();if(r||e)return n;r=!0}}while(n=n.parentNode);return Jc()}function uZ(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function u2(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var qg;function dP(t,e){return function(){if(!qg){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),qg=setTimeout(function(){qg=void 0},e)}}}function cZ(){clearTimeout(qg),qg=void 0}function hP(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function U_(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function U5(t,e){dr(t,"position","absolute"),dr(t,"top",e.top),dr(t,"left",e.left),dr(t,"width",e.width),dr(t,"height",e.height)}function c2(t){dr(t,"position",""),dr(t,"top",""),dr(t,"left",""),dr(t,"width",""),dr(t,"height","")}var vl="Sortable"+new Date().getTime();function dZ(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(dr(i,"display")==="none"||i===Br.ghost)){t.push({target:i,rect:eo(i)});var s=td({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=ff(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(lZ(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,c=a.target,h=c.fromRect,p=eo(c),v=c.prevFromRect,g=c.prevToRect,x=a.rect,E=ff(c,!0);E&&(p.top-=E.f,p.left-=E.e),c.toRect=p,c.thisAnimationDuration&&u2(v,p)&&!u2(h,p)&&(x.top-p.top)/(x.left-p.left)===(h.top-p.top)/(h.left-p.left)&&(l=fZ(x,v,g,i.options)),u2(p,h)||(c.prevFromRect=h,c.prevToRect=p,l||(l=i.options.animation),i.animate(c,x,p,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){dr(r,"transition",""),dr(r,"transform","");var a=ff(this.el),l=a&&a.a,c=a&&a.d,h=(i.left-s.left)/(l||1),p=(i.top-s.top)/(c||1);r.animatingX=!!h,r.animatingY=!!p,dr(r,"transform","translate3d("+h+"px,"+p+"px,0)"),this.forRepaintDummy=hZ(r),dr(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),dr(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){dr(r,"transition",""),dr(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function hZ(t){return t.offsetWidth}function fZ(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var Kf=[],d2={initializeByDefault:!0},Im={mount:function(e){for(var n in d2)d2.hasOwnProperty(n)&&!(n in e)&&(e[n]=d2[n]);Kf.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Kf.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";Kf.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](td({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](td({sortable:n},r)))})},initializePlugins:function(e,n,r,i){Kf.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,Xu(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return Kf.forEach(function(i){typeof i.eventProperties=="function"&&Xu(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return Kf.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function Lg(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,h=t.oldDraggableIndex,p=t.newDraggableIndex,v=t.originalEvent,g=t.putSortable,x=t.extraEventProperties;if(e=e||n&&n[vl],!!e){var E,D=e.options,M="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!jd&&!Om?E=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(E=document.createEvent("Event"),E.initEvent(r,!0,!0)),E.to=o||n,E.from=a||n,E.item=i||n,E.clone=s,E.oldIndex=l,E.newIndex=c,E.oldDraggableIndex=h,E.newDraggableIndex=p,E.originalEvent=v,E.pullMode=g?g.lastPutMode:void 0;var A=td(td({},x),Im.getEventProperties(r,e));for(var z in A)E[z]=A[z];n&&n.dispatchEvent(E),D[M]&&D[M].call(e,E)}}var pZ=["evt"],ql=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=QK(r,pZ);Im.pluginEvent.bind(Br)(e,n,td({dragEl:zn,parentEl:Ao,ghostEl:di,rootEl:Qs,nextEl:Qh,lastDownEl:cv,cloneEl:To,cloneHidden:lh,dragStarted:Sg,putSortable:Ga,activeSortable:Br.active,originalEvent:i,oldIndex:dp,oldDraggableIndex:Yg,newIndex:xu,newDraggableIndex:ah,hideGhostForTarget:mP,unhideGhostForTarget:vP,cloneNowHidden:function(){lh=!0},cloneNowShown:function(){lh=!1},dispatchSortableEvent:function(a){kl({sortable:n,name:a,originalEvent:i})}},s))};function kl(t){Lg(td({putSortable:Ga,cloneEl:To,targetEl:zn,rootEl:Qs,oldIndex:dp,oldDraggableIndex:Yg,newIndex:xu,newDraggableIndex:ah},t))}var zn,Ao,di,Qs,Qh,cv,To,lh,dp,xu,Yg,ah,E0,Ga,lp=!1,Xv=!1,Jv=[],Gh,hc,h2,f2,H5,W5,Sg,Zf,Kg,Zg=!1,P0=!1,dv,cl,p2=[],Ob=!1,Qv=[],Wy=typeof document<"u",M0=lP,G5=Om||jd?"cssFloat":"float",gZ=Wy&&!oZ&&!lP&&"draggable"in document.createElement("div"),fP=function(){if(Wy){if(jd)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),pP=function(e,n){var r=dr(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=Tp(e,0,n),o=Tp(e,1,n),a=s&&dr(s),l=o&&dr(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+eo(s).width,h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+eo(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var p=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===p)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[G5]==="none"||o&&r[G5]==="none"&&c+h>i)?"vertical":"horizontal"},mZ=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?n.left:n.top,l=r?n.right:n.bottom,c=r?n.width:n.height;return i===a||s===l||i+o/2===a+c/2},vZ=function(e,n){var r;return Jv.some(function(i){var s=i[vl].options.emptyInsertThreshold;if(!(!s||V_(i))){var o=eo(i),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},gP=function(e){function n(s,o){return function(a,l,c,h){var p=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||p))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,h),o)(a,l,c,h);var v=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===v||s.join&&s.indexOf(v)>-1}}var r={},i=e.group;(!i||uv(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},mP=function(){!fP&&di&&dr(di,"display","none")},vP=function(){!fP&&di&&dr(di,"display","")};Wy&&document.addEventListener("click",function(t){if(Xv)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Xv=!1,!1},!0);var qh=function(e){if(zn){e=e.touches?e.touches[0]:e;var n=vZ(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[vl]._onDragOver(r)}}},yZ=function(e){zn&&zn.parentNode[vl]._isOutsideThisEl(e.target)};function Br(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Xu({},e),t[vl]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return pP(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Br.supportPointer!==!1&&"PointerEvent"in window&&!Gg,emptyInsertThreshold:5};Im.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);gP(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:gZ,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Oi(t,"pointerdown",this._onTapStart):(Oi(t,"mousedown",this._onTapStart),Oi(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Oi(t,"dragover",this),Oi(t,"dragenter",this)),Jv.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Xu(this,dZ())}Br.prototype={constructor:Br,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Zf=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,zn):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,h=i.filter;if(EZ(r),!zn&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Gg&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=vc(l,i.draggable,r,!1),!(l&&l.animated)&&cv!==l)){if(dp=No(l),Yg=No(l,i.draggable),typeof h=="function"){if(h.call(this,e,l,this)){kl({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),ql("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(h&&(h=h.split(",").some(function(p){if(p=vc(c,p.trim(),r,!1),p)return kl({sortable:n,rootEl:p,name:"filter",targetEl:l,fromEl:r,toEl:r}),ql("filter",n,{evt:e}),!0}),h)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!vc(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!zn&&r.parentNode===s){var c=eo(r);if(Qs=s,zn=r,Ao=zn.parentNode,Qh=zn.nextSibling,cv=r,E0=o.group,Br.dragged=zn,Gh={target:zn,clientX:(n||e).clientX,clientY:(n||e).clientY},H5=Gh.clientX-c.left,W5=Gh.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,zn.style["will-change"]="all",l=function(){if(ql("delayEnded",i,{evt:e}),Br.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!j5&&i.nativeDraggable&&(zn.draggable=!0),i._triggerDragStart(e,n),kl({sortable:i,name:"choose",originalEvent:e}),bo(zn,o.chosenClass,!0)},o.ignore.split(",").forEach(function(h){cP(zn,h.trim(),g2)}),Oi(a,"dragover",qh),Oi(a,"mousemove",qh),Oi(a,"touchmove",qh),Oi(a,"mouseup",i._onDrop),Oi(a,"touchend",i._onDrop),Oi(a,"touchcancel",i._onDrop),j5&&this.nativeDraggable&&(this.options.touchStartThreshold=4,zn.draggable=!0),ql("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Om||jd))){if(Br.eventCanceled){this._onDrop();return}Oi(a,"mouseup",i._disableDelayedDrag),Oi(a,"touchend",i._disableDelayedDrag),Oi(a,"touchcancel",i._disableDelayedDrag),Oi(a,"mousemove",i._delayedDragTouchMoveHandler),Oi(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&Oi(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){zn&&g2(zn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Li(e,"mouseup",this._disableDelayedDrag),Li(e,"touchend",this._disableDelayedDrag),Li(e,"touchcancel",this._disableDelayedDrag),Li(e,"mousemove",this._delayedDragTouchMoveHandler),Li(e,"touchmove",this._delayedDragTouchMoveHandler),Li(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?Oi(document,"pointermove",this._onTouchMove):n?Oi(document,"touchmove",this._onTouchMove):Oi(document,"mousemove",this._onTouchMove):(Oi(zn,"dragend",this),Oi(Qs,"dragstart",this._onDragStart));try{document.selection?hv(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(lp=!1,Qs&&zn){ql("dragStarted",this,{evt:n}),this.nativeDraggable&&Oi(document,"dragover",yZ);var r=this.options;!e&&bo(zn,r.dragClass,!1),bo(zn,r.ghostClass,!0),Br.active=this,e&&this._appendGhost(),kl({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(hc){this._lastX=hc.clientX,this._lastY=hc.clientY,mP();for(var e=document.elementFromPoint(hc.clientX,hc.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(hc.clientX,hc.clientY),e!==n);)n=e;if(zn.parentNode[vl]._isOutsideThisEl(e),n)do{if(n[vl]){var r=void 0;if(r=n[vl]._onDragOver({clientX:hc.clientX,clientY:hc.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);vP()}},_onTouchMove:function(e){if(Gh){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=di&&ff(di,!0),a=di&&o&&o.a,l=di&&o&&o.d,c=M0&&cl&&V5(cl),h=(s.clientX-Gh.clientX+i.x)/(a||1)+(c?c[0]-p2[0]:0)/(a||1),p=(s.clientY-Gh.clientY+i.y)/(l||1)+(c?c[1]-p2[1]:0)/(l||1);if(!Br.active&&!lp){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(di){o?(o.e+=h-(h2||0),o.f+=p-(f2||0)):o={a:1,b:0,c:0,d:1,e:h,f:p};var v="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");dr(di,"webkitTransform",v),dr(di,"mozTransform",v),dr(di,"msTransform",v),dr(di,"transform",v),h2=h,f2=p,hc=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!di){var e=this.options.fallbackOnBody?document.body:Qs,n=eo(zn,!0,M0,!0,e),r=this.options;if(M0){for(cl=e;dr(cl,"position")==="static"&&dr(cl,"transform")==="none"&&cl!==document;)cl=cl.parentNode;cl!==document.body&&cl!==document.documentElement?(cl===document&&(cl=Jc()),n.top+=cl.scrollTop,n.left+=cl.scrollLeft):cl=Jc(),p2=V5(cl)}di=zn.cloneNode(!0),bo(di,r.ghostClass,!1),bo(di,r.fallbackClass,!0),bo(di,r.dragClass,!0),dr(di,"transition",""),dr(di,"transform",""),dr(di,"box-sizing","border-box"),dr(di,"margin",0),dr(di,"top",n.top),dr(di,"left",n.left),dr(di,"width",n.width),dr(di,"height",n.height),dr(di,"opacity","0.8"),dr(di,"position",M0?"absolute":"fixed"),dr(di,"zIndex","100000"),dr(di,"pointerEvents","none"),Br.ghost=di,e.appendChild(di),dr(di,"transform-origin",H5/parseInt(di.style.width)*100+"% "+W5/parseInt(di.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(ql("dragStart",this,{evt:e}),Br.eventCanceled){this._onDrop();return}ql("setupClone",this),Br.eventCanceled||(To=U_(zn),To.draggable=!1,To.style["will-change"]="",this._hideClone(),bo(To,this.options.chosenClass,!1),Br.clone=To),r.cloneId=hv(function(){ql("clone",r),!Br.eventCanceled&&(r.options.removeCloneOnHide||Qs.insertBefore(To,zn),r._hideClone(),kl({sortable:r,name:"clone"}))}),!n&&bo(zn,s.dragClass,!0),n?(Xv=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Li(document,"mouseup",r._onDrop),Li(document,"touchend",r._onDrop),Li(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,zn)),Oi(document,"drop",r),dr(zn,"transform","translateZ(0)")),lp=!0,r._dragStartId=hv(r._dragStarted.bind(r,n,e)),Oi(document,"selectstart",r),Sg=!0,Gg&&dr(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,a=this.options,l=a.group,c=Br.active,h=E0===l,p=a.sort,v=Ga||c,g,x=this,E=!1;if(Ob)return;function D(G,_e){ql(G,x,td({evt:e,isOwner:h,axis:g?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:p,fromSortable:v,target:r,completed:A,onMove:function(qe,re){return k0(Qs,n,zn,i,qe,eo(qe),e,re)},changed:z},_e))}function M(){D("dragOverAnimationCapture"),x.captureAnimationState(),x!==v&&v.captureAnimationState()}function A(G){return D("dragOverCompleted",{insertion:G}),G&&(h?c._hideClone():c._showClone(x),x!==v&&(bo(zn,Ga?Ga.options.ghostClass:c.options.ghostClass,!1),bo(zn,a.ghostClass,!0)),Ga!==x&&x!==Br.active?Ga=x:x===Br.active&&Ga&&(Ga=null),v===x&&(x._ignoreWhileAnimating=r),x.animateAll(function(){D("dragOverAnimationComplete"),x._ignoreWhileAnimating=null}),x!==v&&(v.animateAll(),v._ignoreWhileAnimating=null)),(r===zn&&!zn.animated||r===n&&!r.animated)&&(Zf=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(zn.parentNode[vl]._isOutsideThisEl(e.target),!G&&qh(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),E=!0}function z(){xu=No(zn),ah=No(zn,a.draggable),kl({sortable:x,name:"change",toEl:n,newIndex:xu,newDraggableIndex:ah,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=vc(r,a.draggable,n,!0),D("dragOver"),Br.eventCanceled)return E;if(zn.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||x._ignoreWhileAnimating===r)return A(!1);if(Xv=!1,c&&!a.disabled&&(h?p||(o=Ao!==Qs):Ga===this||(this.lastPutMode=E0.checkPull(this,c,zn,e))&&l.checkPut(this,c,zn,e))){if(g=this._getDirection(e,r)==="vertical",i=eo(zn),D("dragOverValid"),Br.eventCanceled)return E;if(o)return Ao=Qs,M(),this._hideClone(),D("revert"),Br.eventCanceled||(Qh?Qs.insertBefore(zn,Qh):Qs.appendChild(zn)),A(!0);var Y=V_(n,a.draggable);if(!Y||xZ(e,g,this)&&!Y.animated){if(Y===zn)return A(!1);if(Y&&n===e.target&&(r=Y),r&&(s=eo(r)),k0(Qs,n,zn,i,r,s,e,!!r)!==!1)return M(),n.appendChild(zn),Ao=n,z(),A(!0)}else if(Y&&wZ(e,g,this)){var ne=Tp(n,0,a,!0);if(ne===zn)return A(!1);if(r=ne,s=eo(r),k0(Qs,n,zn,i,r,s,e,!1)!==!1)return M(),n.insertBefore(zn,ne),Ao=n,z(),A(!0)}else if(r.parentNode===n){s=eo(r);var ge=0,pe,O=zn.parentNode!==n,j=!mZ(zn.animated&&zn.toRect||i,r.animated&&r.toRect||s,g),J=g?"top":"left",U=$5(r,"top","top")||$5(zn,"top","top"),R=U?U.scrollTop:void 0;Zf!==r&&(pe=s[J],Zg=!1,P0=!j&&a.invertSwap||O),ge=LZ(e,r,s,g,j?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,P0,Zf===r);var V;if(ge!==0){var $=No(zn);do $-=ge,V=Ao.children[$];while(V&&(dr(V,"display")==="none"||V===di))}if(ge===0||V===r)return A(!1);Zf=r,Kg=ge;var B=r.nextElementSibling,I=!1;I=ge===1;var Q=k0(Qs,n,zn,i,r,s,e,I);if(Q!==!1)return(Q===1||Q===-1)&&(I=Q===1),Ob=!0,setTimeout(_Z,30),M(),I&&!B?n.appendChild(zn):r.parentNode.insertBefore(zn,I?B:r),U&&hP(U,0,R-U.scrollTop),Ao=zn.parentNode,pe!==void 0&&!P0&&(dv=Math.abs(pe-eo(r)[J])),z(),A(!0)}if(n.contains(zn))return A(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Li(document,"mousemove",this._onTouchMove),Li(document,"touchmove",this._onTouchMove),Li(document,"pointermove",this._onTouchMove),Li(document,"dragover",qh),Li(document,"mousemove",qh),Li(document,"touchmove",qh)},_offUpEvents:function(){var e=this.el.ownerDocument;Li(e,"mouseup",this._onDrop),Li(e,"touchend",this._onDrop),Li(e,"pointerup",this._onDrop),Li(e,"touchcancel",this._onDrop),Li(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(xu=No(zn),ah=No(zn,r.draggable),ql("drop",this,{evt:e}),Ao=zn&&zn.parentNode,xu=No(zn),ah=No(zn,r.draggable),Br.eventCanceled){this._nulling();return}lp=!1,P0=!1,Zg=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ib(this.cloneId),Ib(this._dragStartId),this.nativeDraggable&&(Li(document,"drop",this),Li(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Gg&&dr(document.body,"user-select",""),dr(zn,"transform",""),e&&(Sg&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),di&&di.parentNode&&di.parentNode.removeChild(di),(Qs===Ao||Ga&&Ga.lastPutMode!=="clone")&&To&&To.parentNode&&To.parentNode.removeChild(To),zn&&(this.nativeDraggable&&Li(zn,"dragend",this),g2(zn),zn.style["will-change"]="",Sg&&!lp&&bo(zn,Ga?Ga.options.ghostClass:this.options.ghostClass,!1),bo(zn,this.options.chosenClass,!1),kl({sortable:this,name:"unchoose",toEl:Ao,newIndex:null,newDraggableIndex:null,originalEvent:e}),Qs!==Ao?(xu>=0&&(kl({rootEl:Ao,name:"add",toEl:Ao,fromEl:Qs,originalEvent:e}),kl({sortable:this,name:"remove",toEl:Ao,originalEvent:e}),kl({rootEl:Ao,name:"sort",toEl:Ao,fromEl:Qs,originalEvent:e}),kl({sortable:this,name:"sort",toEl:Ao,originalEvent:e})),Ga&&Ga.save()):xu!==dp&&xu>=0&&(kl({sortable:this,name:"update",toEl:Ao,originalEvent:e}),kl({sortable:this,name:"sort",toEl:Ao,originalEvent:e})),Br.active&&((xu==null||xu===-1)&&(xu=dp,ah=Yg),kl({sortable:this,name:"end",toEl:Ao,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ql("nulling",this),Qs=zn=Ao=di=Qh=To=cv=lh=Gh=hc=Sg=xu=ah=dp=Yg=Zf=Kg=Ga=E0=Br.dragged=Br.ghost=Br.clone=Br.active=null,Qv.forEach(function(e){e.checked=!0}),Qv.length=h2=f2=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":zn&&(this._onDragOver(e),bZ(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],vc(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||CZ(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];vc(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return vc(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=Im.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&gP(r)},destroy:function(){ql("destroy",this);var e=this.el;e[vl]=null,Li(e,"mousedown",this._onTapStart),Li(e,"touchstart",this._onTapStart),Li(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Li(e,"dragover",this),Li(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Jv.splice(Jv.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!lh){if(ql("hideClone",this),Br.eventCanceled)return;dr(To,"display","none"),this.options.removeCloneOnHide&&To.parentNode&&To.parentNode.removeChild(To),lh=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(lh){if(ql("showClone",this),Br.eventCanceled)return;zn.parentNode==Qs&&!this.options.group.revertClone?Qs.insertBefore(To,zn):Qh?Qs.insertBefore(To,Qh):Qs.appendChild(To),this.options.group.revertClone&&this.animate(zn,To),dr(To,"display",""),lh=!1}}};function bZ(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function k0(t,e,n,r,i,s,o,a){var l,c=t[vl],h=c.options.onMove,p;return window.CustomEvent&&!jd&&!Om?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=s||eo(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),h&&(p=h.call(c,l,o)),p}function g2(t){t.draggable=!1}function _Z(){Ob=!1}function wZ(t,e,n){var r=eo(Tp(n.el,0,n.options,!0)),i=10;return e?t.clientX<r.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-i||t.clientY<r.bottom&&t.clientX<r.left}function xZ(t,e,n){var r=eo(V_(n.el,n.options.draggable)),i=10;return e?t.clientX>r.right+i||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+i}function LZ(t,e,n,r,i,s,o,a){var l=r?t.clientY:t.clientX,c=r?n.height:n.width,h=r?n.top:n.left,p=r?n.bottom:n.right,v=!1;if(!o){if(a&&dv<c*i){if(!Zg&&(Kg===1?l>h+c*s/2:l<p-c*s/2)&&(Zg=!0),Zg)v=!0;else if(Kg===1?l<h+dv:l>p-dv)return-Kg}else if(l>h+c*(1-i)/2&&l<p-c*(1-i)/2)return SZ(e)}return v=v||o,v&&(l<h+c*s/2||l>p-c*s/2)?l>h+c/2?1:-1:0}function SZ(t){return No(zn)<No(t)?1:-1}function CZ(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function EZ(t){Qv.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&Qv.push(r)}}function hv(t){return setTimeout(t,0)}function Ib(t){return clearTimeout(t)}Wy&&Oi(document,"touchmove",function(t){(Br.active||lp)&&t.cancelable&&t.preventDefault()});Br.utils={on:Oi,off:Li,css:dr,find:cP,is:function(e,n){return!!vc(e,n,e,!1)},extend:uZ,throttle:dP,closest:vc,toggleClass:bo,clone:U_,index:No,nextTick:hv,cancelNextTick:Ib,detectDirection:pP,getChild:Tp};Br.get=function(t){return t[vl]};Br.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Br.utils=td(td({},Br.utils),r.utils)),Im.mount(r)})};Br.create=function(t,e){return new Br(t,e)};Br.version=sZ;var la=[],Cg,Bb,Rb=!1,m2,v2,ey,Eg;function PZ(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?Oi(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Oi(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Oi(document,"touchmove",this._handleFallbackAutoScroll):Oi(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Li(document,"dragover",this._handleAutoScroll):(Li(document,"pointermove",this._handleFallbackAutoScroll),Li(document,"touchmove",this._handleFallbackAutoScroll),Li(document,"mousemove",this._handleFallbackAutoScroll)),q5(),fv(),cZ()},nulling:function(){ey=Bb=Cg=Rb=Eg=m2=v2=null,la.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(ey=n,r||this.options.forceAutoScrollFallback||Om||jd||Gg){y2(n,this.options,a,r);var l=dh(a,!0);Rb&&(!Eg||s!==m2||o!==v2)&&(Eg&&q5(),Eg=setInterval(function(){var c=dh(document.elementFromPoint(s,o),!0);c!==l&&(l=c,fv()),y2(n,i.options,c,r)},10),m2=s,v2=o)}else{if(!this.options.bubbleScroll||dh(a,!0)===Jc()){fv();return}y2(n,this.options,dh(a,!1),!1)}}},Xu(t,{pluginName:"scroll",initializeByDefault:!0})}function fv(){la.forEach(function(t){clearInterval(t.pid)}),la=[]}function q5(){clearInterval(Eg)}var y2=dP(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Jc(),c=!1,h;Bb!==n&&(Bb=n,fv(),Cg=e.scroll,h=e.scrollFn,Cg===!0&&(Cg=dh(n,!0)));var p=0,v=Cg;do{var g=v,x=eo(g),E=x.top,D=x.bottom,M=x.left,A=x.right,z=x.width,Y=x.height,ne=void 0,ge=void 0,pe=g.scrollWidth,O=g.scrollHeight,j=dr(g),J=g.scrollLeft,U=g.scrollTop;g===l?(ne=z<pe&&(j.overflowX==="auto"||j.overflowX==="scroll"||j.overflowX==="visible"),ge=Y<O&&(j.overflowY==="auto"||j.overflowY==="scroll"||j.overflowY==="visible")):(ne=z<pe&&(j.overflowX==="auto"||j.overflowX==="scroll"),ge=Y<O&&(j.overflowY==="auto"||j.overflowY==="scroll"));var R=ne&&(Math.abs(A-i)<=o&&J+z<pe)-(Math.abs(M-i)<=o&&!!J),V=ge&&(Math.abs(D-s)<=o&&U+Y<O)-(Math.abs(E-s)<=o&&!!U);if(!la[p])for(var $=0;$<=p;$++)la[$]||(la[$]={});(la[p].vx!=R||la[p].vy!=V||la[p].el!==g)&&(la[p].el=g,la[p].vx=R,la[p].vy=V,clearInterval(la[p].pid),(R!=0||V!=0)&&(c=!0,la[p].pid=setInterval((function(){r&&this.layer===0&&Br.active._onTouchMove(ey);var B=la[this.layer].vy?la[this.layer].vy*a:0,I=la[this.layer].vx?la[this.layer].vx*a:0;typeof h=="function"&&h.call(Br.dragged.parentNode[vl],I,B,t,ey,la[this.layer].el)!=="continue"||hP(la[this.layer].el,I,B)}).bind({layer:p}),24))),p++}while(e.bubbleScroll&&v!==l&&(v=dh(v,!1)));Rb=c}},30),yP=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=r||s;a();var h=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,p=document.elementFromPoint(h.clientX,h.clientY);l(),c&&!c.el.contains(p)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function H_(){}H_.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Tp(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:yP};Xu(H_,{pluginName:"revertOnSpill"});function W_(){}W_.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:yP};Xu(W_,{pluginName:"removeOnSpill"});var $u;function MZ(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(n){var r=n.dragEl;$u=r},dragOverValid:function(n){var r=n.completed,i=n.target,s=n.onMove,o=n.activeSortable,a=n.changed,l=n.cancel;if(o.options.swap){var c=this.sortable.el,h=this.options;if(i&&i!==c){var p=$u;s(i)!==!1?(bo(i,h.swapClass,!0),$u=i):$u=null,p&&p!==$u&&bo(p,h.swapClass,!1)}a(),r(!0),l()}},drop:function(n){var r=n.activeSortable,i=n.putSortable,s=n.dragEl,o=i||this.sortable,a=this.options;$u&&bo($u,a.swapClass,!1),$u&&(a.swap||i&&i.options.swap)&&s!==$u&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),kZ(s,$u),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){$u=null}},Xu(t,{pluginName:"swap",eventProperties:function(){return{swapItem:$u}}})}function kZ(t,e){var n=t.parentNode,r=e.parentNode,i,s;!n||!r||n.isEqualNode(e)||r.isEqualNode(t)||(i=No(t),s=No(e),n.isEqualNode(r)&&i<s&&s++,n.insertBefore(e,n.children[i]),r.insertBefore(t,r.children[s]))}var ti=[],wu=[],og,fc,ag=!1,Yl=!1,Xf=!1,Ds,lg,A0;function AZ(){function t(e){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));e.options.supportPointer?Oi(document,"pointerup",this._deselectMultiDrag):(Oi(document,"mouseup",this._deselectMultiDrag),Oi(document,"touchend",this._deselectMultiDrag)),Oi(document,"keydown",this._checkKeyDown),Oi(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";ti.length&&fc===e?ti.forEach(function(a,l){o+=(l?", ":"")+a.textContent}):o=s.textContent,i.setData("Text",o)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var r=n.dragEl;Ds=r},delayEnded:function(){this.isMultiDrag=~ti.indexOf(Ds)},setupClone:function(n){var r=n.sortable,i=n.cancel;if(this.isMultiDrag){for(var s=0;s<ti.length;s++)wu.push(U_(ti[s])),wu[s].sortableIndex=ti[s].sortableIndex,wu[s].draggable=!1,wu[s].style["will-change"]="",bo(wu[s],this.options.selectedClass,!1),ti[s]===Ds&&bo(wu[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(n){var r=n.sortable,i=n.rootEl,s=n.dispatchSortableEvent,o=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||ti.length&&fc===r&&(Y5(!0,i),s("clone"),o()))},showClone:function(n){var r=n.cloneNowShown,i=n.rootEl,s=n.cancel;this.isMultiDrag&&(Y5(!1,i),wu.forEach(function(o){dr(o,"display","")}),r(),A0=!1,s())},hideClone:function(n){var r=this;n.sortable;var i=n.cloneNowHidden,s=n.cancel;this.isMultiDrag&&(wu.forEach(function(o){dr(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),A0=!0,s())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&fc&&fc.multiDrag._deselectMultiDrag(),ti.forEach(function(r){r.sortableIndex=No(r)}),ti=ti.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),Xf=!0},dragStarted:function(n){var r=this,i=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){ti.forEach(function(o){o!==Ds&&dr(o,"position","absolute")});var s=eo(Ds,!1,!0,!0);ti.forEach(function(o){o!==Ds&&U5(o,s)}),Yl=!0,ag=!0}i.animateAll(function(){Yl=!1,ag=!1,r.options.animation&&ti.forEach(function(o){c2(o)}),r.options.sort&&T0()})}},dragOver:function(n){var r=n.target,i=n.completed,s=n.cancel;Yl&&~ti.indexOf(r)&&(i(!1),s())},revert:function(n){var r=n.fromSortable,i=n.rootEl,s=n.sortable,o=n.dragRect;ti.length>1&&(ti.forEach(function(a){s.addAnimationState({target:a,rect:Yl?eo(a):o}),c2(a),a.fromRect=o,r.removeAnimationState(a)}),Yl=!1,TZ(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(n){var r=n.sortable,i=n.isOwner,s=n.insertion,o=n.activeSortable,a=n.parentEl,l=n.putSortable,c=this.options;if(s){if(i&&o._hideClone(),ag=!1,c.animation&&ti.length>1&&(Yl||!i&&!o.options.sort&&!l)){var h=eo(Ds,!1,!0,!0);ti.forEach(function(v){v!==Ds&&(U5(v,h),a.appendChild(v))}),Yl=!0}if(!i)if(Yl||T0(),ti.length>1){var p=A0;o._showClone(r),o.options.animation&&!A0&&p&&wu.forEach(function(v){o.addAnimationState({target:v,rect:lg}),v.fromRect=lg,v.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(n){var r=n.dragRect,i=n.isOwner,s=n.activeSortable;if(ti.forEach(function(a){a.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){lg=Xu({},r);var o=ff(Ds,!0);lg.top-=o.f,lg.left-=o.e}},dragOverAnimationComplete:function(){Yl&&(Yl=!1,T0())},drop:function(n){var r=n.originalEvent,i=n.rootEl,s=n.parentEl,o=n.sortable,a=n.dispatchSortableEvent,l=n.oldIndex,c=n.putSortable,h=c||this.sortable;if(r){var p=this.options,v=s.children;if(!Xf)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),bo(Ds,p.selectedClass,!~ti.indexOf(Ds)),~ti.indexOf(Ds))ti.splice(ti.indexOf(Ds),1),og=null,Lg({sortable:o,rootEl:i,name:"deselect",targetEl:Ds});else{if(ti.push(Ds),Lg({sortable:o,rootEl:i,name:"select",targetEl:Ds}),r.shiftKey&&og&&o.el.contains(og)){var g=No(og),x=No(Ds);if(~g&&~x&&g!==x){var E,D;for(x>g?(D=g,E=x):(D=x,E=g+1);D<E;D++)~ti.indexOf(v[D])||(bo(v[D],p.selectedClass,!0),ti.push(v[D]),Lg({sortable:o,rootEl:i,name:"select",targetEl:v[D]}))}}else og=Ds;fc=h}if(Xf&&this.isMultiDrag){if(Yl=!1,(s[vl].options.sort||s!==i)&&ti.length>1){var M=eo(Ds),A=No(Ds,":not(."+this.options.selectedClass+")");if(!ag&&p.animation&&(Ds.thisAnimationDuration=null),h.captureAnimationState(),!ag&&(p.animation&&(Ds.fromRect=M,ti.forEach(function(Y){if(Y.thisAnimationDuration=null,Y!==Ds){var ne=Yl?eo(Y):M;Y.fromRect=ne,h.addAnimationState({target:Y,rect:ne})}})),T0(),ti.forEach(function(Y){v[A]?s.insertBefore(Y,v[A]):s.appendChild(Y),A++}),l===No(Ds))){var z=!1;ti.forEach(function(Y){if(Y.sortableIndex!==No(Y)){z=!0;return}}),z&&a("update")}ti.forEach(function(Y){c2(Y)}),h.animateAll()}fc=h}(i===s||c&&c.lastPutMode!=="clone")&&wu.forEach(function(Y){Y.parentNode&&Y.parentNode.removeChild(Y)})}},nullingGlobal:function(){this.isMultiDrag=Xf=!1,wu.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Li(document,"pointerup",this._deselectMultiDrag),Li(document,"mouseup",this._deselectMultiDrag),Li(document,"touchend",this._deselectMultiDrag),Li(document,"keydown",this._checkKeyDown),Li(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Xf<"u"&&Xf)&&fc===this.sortable&&!(n&&vc(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;ti.length;){var r=ti[0];bo(r,this.options.selectedClass,!1),ti.shift(),Lg({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Xu(t,{pluginName:"multiDrag",utils:{select:function(n){var r=n.parentNode[vl];!r||!r.options.multiDrag||~ti.indexOf(n)||(fc&&fc!==r&&(fc.multiDrag._deselectMultiDrag(),fc=r),bo(n,r.options.selectedClass,!0),ti.push(n))},deselect:function(n){var r=n.parentNode[vl],i=ti.indexOf(n);!r||!r.options.multiDrag||!~i||(bo(n,r.options.selectedClass,!1),ti.splice(i,1))}},eventProperties:function(){var n=this,r=[],i=[];return ti.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;Yl&&s!==Ds?o=-1:Yl?o=No(s,":not(."+n.options.selectedClass+")"):o=No(s),i.push({multiDragElement:s,index:o})}),{items:eZ(ti),clones:[].concat(wu),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function TZ(t,e){ti.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function Y5(t,e){wu.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function T0(){ti.forEach(function(t){t!==Ds&&t.parentNode&&t.parentNode.removeChild(t)})}Br.mount(new PZ);Br.mount(W_,H_);const DZ=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:AZ,Sortable:Br,Swap:MZ,default:Br},Symbol.toStringTag,{value:"Module"})),NZ=bE(DZ);(function(t,e){(function(r,i){t.exports=i(ZK,NZ)})(typeof self<"u"?self:Aa,function(n,r){return function(i){var s={};function o(a){if(s[a])return s[a].exports;var l=s[a]={i:a,l:!1,exports:{}};return i[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=i,o.c=s,o.d=function(a,l,c){o.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:c})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,l){if(l&1&&(a=o(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var h in a)o.d(c,h,(function(p){return a[p]}).bind(null,h));return c},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var a=o("b622"),l=a("toStringTag"),c={};c[l]="z",i.exports=String(c)==="[object z]"},"0366":function(i,s,o){var a=o("1c0b");i.exports=function(l,c,h){if(a(l),c===void 0)return l;switch(h){case 0:return function(){return l.call(c)};case 1:return function(p){return l.call(c,p)};case 2:return function(p,v){return l.call(c,p,v)};case 3:return function(p,v,g){return l.call(c,p,v,g)}}return function(){return l.apply(c,arguments)}}},"057f":function(i,s,o){var a=o("fc6a"),l=o("241c").f,c={}.toString,h=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],p=function(v){try{return l(v)}catch{return h.slice()}};i.exports.f=function(g){return h&&c.call(g)=="[object Window]"?p(g):l(a(g))}},"06cf":function(i,s,o){var a=o("83ab"),l=o("d1e7"),c=o("5c6c"),h=o("fc6a"),p=o("c04e"),v=o("5135"),g=o("0cfb"),x=Object.getOwnPropertyDescriptor;s.f=a?x:function(D,M){if(D=h(D),M=p(M,!0),g)try{return x(D,M)}catch{}if(v(D,M))return c(!l.f.call(D,M),D[M])}},"0cfb":function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("cc12");i.exports=!a&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var a=o("23e7"),l=o("d58f").left,c=o("a640"),h=o("ae40"),p=c("reduce"),v=h("reduce",{1:0});a({target:"Array",proto:!0,forced:!p||!v},{reduce:function(x){return l(this,x,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var a=o("c6b6"),l=o("9263");i.exports=function(c,h){var p=c.exec;if(typeof p=="function"){var v=p.call(c,h);if(typeof v!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return v}if(a(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,h)}},"159b":function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("17c2"),h=o("9112");for(var p in l){var v=a[p],g=v&&v.prototype;if(g&&g.forEach!==c)try{h(g,"forEach",c)}catch{g.forEach=c}}},"17c2":function(i,s,o){var a=o("b727").forEach,l=o("a640"),c=o("ae40"),h=l("forEach"),p=c("forEach");i.exports=!h||!p?function(g){return a(this,g,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var a=o("d066");i.exports=a("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var a=o("b622"),l=a("iterator"),c=!1;try{var h=0,p={next:function(){return{done:!!h++}},return:function(){c=!0}};p[l]=function(){return this},Array.from(p,function(){throw 2})}catch{}i.exports=function(v,g){if(!g&&!c)return!1;var x=!1;try{var E={};E[l]=function(){return{next:function(){return{done:x=!0}}}},v(E)}catch{}return x}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var a=o("d039"),l=o("b622"),c=o("2d00"),h=l("species");i.exports=function(p){return c>=51||!a(function(){var v=[],g=v.constructor={};return g[h]=function(){return{foo:1}},v[p](Boolean).foo!==1})}},"23cb":function(i,s,o){var a=o("a691"),l=Math.max,c=Math.min;i.exports=function(h,p){var v=a(h);return v<0?l(v+p,0):c(v,p)}},"23e7":function(i,s,o){var a=o("da84"),l=o("06cf").f,c=o("9112"),h=o("6eeb"),p=o("ce4e"),v=o("e893"),g=o("94ca");i.exports=function(x,E){var D=x.target,M=x.global,A=x.stat,z,Y,ne,ge,pe,O;if(M?Y=a:A?Y=a[D]||p(D,{}):Y=(a[D]||{}).prototype,Y)for(ne in E){if(pe=E[ne],x.noTargetGet?(O=l(Y,ne),ge=O&&O.value):ge=Y[ne],z=g(M?ne:D+(A?".":"#")+ne,x.forced),!z&&ge!==void 0){if(typeof pe==typeof ge)continue;v(pe,ge)}(x.sham||ge&&ge.sham)&&c(pe,"sham",!0),h(Y,ne,pe,x)}}},"241c":function(i,s,o){var a=o("ca84"),l=o("7839"),c=l.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(p){return a(p,c)}},"25f0":function(i,s,o){var a=o("6eeb"),l=o("825a"),c=o("d039"),h=o("ad6d"),p="toString",v=RegExp.prototype,g=v[p],x=c(function(){return g.call({source:"a",flags:"b"})!="/a/b"}),E=g.name!=p;(x||E)&&a(RegExp.prototype,p,function(){var M=l(this),A=String(M.source),z=M.flags,Y=String(z===void 0&&M instanceof RegExp&&!("flags"in v)?h.call(M):z);return"/"+A+"/"+Y},{unsafe:!0})},"2ca0":function(i,s,o){var a=o("23e7"),l=o("06cf").f,c=o("50c4"),h=o("5a34"),p=o("1d80"),v=o("ab13"),g=o("c430"),x="".startsWith,E=Math.min,D=v("startsWith"),M=!g&&!D&&!!function(){var A=l(String.prototype,"startsWith");return A&&!A.writable}();a({target:"String",proto:!0,forced:!M&&!D},{startsWith:function(z){var Y=String(p(this));h(z);var ne=c(E(arguments.length>1?arguments[1]:void 0,Y.length)),ge=String(z);return x?x.call(Y,ge,ne):Y.slice(ne,ne+ge.length)===ge}})},"2d00":function(i,s,o){var a=o("da84"),l=o("342f"),c=a.process,h=c&&c.versions,p=h&&h.v8,v,g;p?(v=p.split("."),g=v[0]+v[1]):l&&(v=l.match(/Edge\/(\d+)/),(!v||v[1]>=74)&&(v=l.match(/Chrome\/(\d+)/),v&&(g=v[1]))),i.exports=g&&+g},"342f":function(i,s,o){var a=o("d066");i.exports=a("navigator","userAgent")||""},"35a1":function(i,s,o){var a=o("f5df"),l=o("3f8c"),c=o("b622"),h=c("iterator");i.exports=function(p){if(p!=null)return p[h]||p["@@iterator"]||l[a(p)]}},"37e8":function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("825a"),h=o("df75");i.exports=a?Object.defineProperties:function(v,g){c(v);for(var x=h(g),E=x.length,D=0,M;E>D;)l.f(v,M=x[D++],g[M]);return v}},"3bbe":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(i,s,o){var a=o("6547").charAt,l=o("69f3"),c=o("7dd0"),h="String Iterator",p=l.set,v=l.getterFor(h);c(String,"String",function(g){p(this,{type:h,string:String(g),index:0})},function(){var x=v(this),E=x.string,D=x.index,M;return D>=E.length?{value:void 0,done:!0}:(M=a(E,D),x.index+=M.length,{value:M,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var a=o("23e7"),l=o("17c2");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(i,s,o){var a=o("da84");i.exports=a},"44ad":function(i,s,o){var a=o("d039"),l=o("c6b6"),c="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(h){return l(h)=="String"?c.call(h,""):Object(h)}:Object},"44d2":function(i,s,o){var a=o("b622"),l=o("7c73"),c=o("9bf2"),h=a("unscopables"),p=Array.prototype;p[h]==null&&c.f(p,h,{configurable:!0,value:l(null)}),i.exports=function(v){p[h][v]=!0}},"44e7":function(i,s,o){var a=o("861d"),l=o("c6b6"),c=o("b622"),h=c("match");i.exports=function(p){var v;return a(p)&&((v=p[h])!==void 0?!!v:l(p)=="RegExp")}},4930:function(i,s,o){var a=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},"4d64":function(i,s,o){var a=o("fc6a"),l=o("50c4"),c=o("23cb"),h=function(p){return function(v,g,x){var E=a(v),D=l(E.length),M=c(x,D),A;if(p&&g!=g){for(;D>M;)if(A=E[M++],A!=A)return!0}else for(;D>M;M++)if((p||M in E)&&E[M]===g)return p||M||0;return!p&&-1}};i.exports={includes:h(!0),indexOf:h(!1)}},"4de4":function(i,s,o){var a=o("23e7"),l=o("b727").filter,c=o("1dde"),h=o("ae40"),p=c("filter"),v=h("filter");a({target:"Array",proto:!0,forced:!p||!v},{filter:function(x){return l(this,x,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var a=o("0366"),l=o("7b0b"),c=o("9bdd"),h=o("e95a"),p=o("50c4"),v=o("8418"),g=o("35a1");i.exports=function(E){var D=l(E),M=typeof this=="function"?this:Array,A=arguments.length,z=A>1?arguments[1]:void 0,Y=z!==void 0,ne=g(D),ge=0,pe,O,j,J,U,R;if(Y&&(z=a(z,A>2?arguments[2]:void 0,2)),ne!=null&&!(M==Array&&h(ne)))for(J=ne.call(D),U=J.next,O=new M;!(j=U.call(J)).done;ge++)R=Y?c(J,z,[j.value,ge],!0):j.value,v(O,ge,R);else for(pe=p(D.length),O=new M(pe);pe>ge;ge++)R=Y?z(D[ge],ge):D[ge],v(O,ge,R);return O.length=ge,O}},"4fad":function(i,s,o){var a=o("23e7"),l=o("6f53").entries;a({target:"Object",stat:!0},{entries:function(h){return l(h)}})},"50c4":function(i,s,o){var a=o("a691"),l=Math.min;i.exports=function(c){return c>0?l(a(c),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(a,l){return o.call(a,l)}},5319:function(i,s,o){var a=o("d784"),l=o("825a"),c=o("7b0b"),h=o("50c4"),p=o("a691"),v=o("1d80"),g=o("8aa5"),x=o("14c3"),E=Math.max,D=Math.min,M=Math.floor,A=/\$([$&'`]|\d\d?|<[^>]*>)/g,z=/\$([$&'`]|\d\d?)/g,Y=function(ne){return ne===void 0?ne:String(ne)};a("replace",2,function(ne,ge,pe,O){var j=O.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,J=O.REPLACE_KEEPS_$0,U=j?"$":"$0";return[function($,B){var I=v(this),Q=$==null?void 0:$[ne];return Q!==void 0?Q.call($,I,B):ge.call(String(I),$,B)},function(V,$){if(!j&&J||typeof $=="string"&&$.indexOf(U)===-1){var B=pe(ge,V,this,$);if(B.done)return B.value}var I=l(V),Q=String(this),G=typeof $=="function";G||($=String($));var _e=I.global;if(_e){var ve=I.unicode;I.lastIndex=0}for(var qe=[];;){var re=x(I,Q);if(re===null||(qe.push(re),!_e))break;var K=String(re[0]);K===""&&(I.lastIndex=g(Q,h(I.lastIndex),ve))}for(var Z="",oe=0,de=0;de<qe.length;de++){re=qe[de];for(var ye=String(re[0]),he=E(D(p(re.index),Q.length),0),X=[],Ae=1;Ae<re.length;Ae++)X.push(Y(re[Ae]));var De=re.groups;if(G){var Xe=[ye].concat(X,he,Q);De!==void 0&&Xe.push(De);var fe=String($.apply(void 0,Xe))}else fe=R(ye,Q,he,X,De,$);he>=oe&&(Z+=Q.slice(oe,he)+fe,oe=he+ye.length)}return Z+Q.slice(oe)}];function R(V,$,B,I,Q,G){var _e=B+V.length,ve=I.length,qe=z;return Q!==void 0&&(Q=c(Q),qe=A),ge.call(G,qe,function(re,K){var Z;switch(K.charAt(0)){case"$":return"$";case"&":return V;case"`":return $.slice(0,B);case"'":return $.slice(_e);case"<":Z=Q[K.slice(1,-1)];break;default:var oe=+K;if(oe===0)return re;if(oe>ve){var de=M(oe/10);return de===0?re:de<=ve?I[de-1]===void 0?K.charAt(1):I[de-1]+K.charAt(1):re}Z=I[oe-1]}return Z===void 0?"":Z})}})},5692:function(i,s,o){var a=o("c430"),l=o("c6cd");(i.exports=function(c,h){return l[c]||(l[c]=h!==void 0?h:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var a=o("d066"),l=o("241c"),c=o("7418"),h=o("825a");i.exports=a("Reflect","ownKeys")||function(v){var g=l.f(h(v)),x=c.f;return x?g.concat(x(v)):g}},"5a34":function(i,s,o){var a=o("44e7");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(i,s){i.exports=function(o,a){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:a}}},"5db7":function(i,s,o){var a=o("23e7"),l=o("a2bf"),c=o("7b0b"),h=o("50c4"),p=o("1c0b"),v=o("65f0");a({target:"Array",proto:!0},{flatMap:function(x){var E=c(this),D=h(E.length),M;return p(x),M=v(E,0),M.length=l(M,E,E,D,0,1,x,arguments.length>1?arguments[1]:void 0),M}})},6547:function(i,s,o){var a=o("a691"),l=o("1d80"),c=function(h){return function(p,v){var g=String(l(p)),x=a(v),E=g.length,D,M;return x<0||x>=E?h?"":void 0:(D=g.charCodeAt(x),D<55296||D>56319||x+1===E||(M=g.charCodeAt(x+1))<56320||M>57343?h?g.charAt(x):D:h?g.slice(x,x+2):(D-55296<<10)+(M-56320)+65536)}};i.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(i,s,o){var a=o("861d"),l=o("e8b5"),c=o("b622"),h=c("species");i.exports=function(p,v){var g;return l(p)&&(g=p.constructor,typeof g=="function"&&(g===Array||l(g.prototype))?g=void 0:a(g)&&(g=g[h],g===null&&(g=void 0))),new(g===void 0?Array:g)(v===0?0:v)}},"69f3":function(i,s,o){var a=o("7f9a"),l=o("da84"),c=o("861d"),h=o("9112"),p=o("5135"),v=o("f772"),g=o("d012"),x=l.WeakMap,E,D,M,A=function(j){return M(j)?D(j):E(j,{})},z=function(j){return function(J){var U;if(!c(J)||(U=D(J)).type!==j)throw TypeError("Incompatible receiver, "+j+" required");return U}};if(a){var Y=new x,ne=Y.get,ge=Y.has,pe=Y.set;E=function(j,J){return pe.call(Y,j,J),J},D=function(j){return ne.call(Y,j)||{}},M=function(j){return ge.call(Y,j)}}else{var O=v("state");g[O]=!0,E=function(j,J){return h(j,O,J),J},D=function(j){return p(j,O)?j[O]:{}},M=function(j){return p(j,O)}}i.exports={set:E,get:D,has:M,enforce:A,getterFor:z}},"6eeb":function(i,s,o){var a=o("da84"),l=o("9112"),c=o("5135"),h=o("ce4e"),p=o("8925"),v=o("69f3"),g=v.get,x=v.enforce,E=String(String).split("String");(i.exports=function(D,M,A,z){var Y=z?!!z.unsafe:!1,ne=z?!!z.enumerable:!1,ge=z?!!z.noTargetGet:!1;if(typeof A=="function"&&(typeof M=="string"&&!c(A,"name")&&l(A,"name",M),x(A).source=E.join(typeof M=="string"?M:"")),D===a){ne?D[M]=A:h(M,A);return}else Y?!ge&&D[M]&&(ne=!0):delete D[M];ne?D[M]=A:l(D,M,A)})(Function.prototype,"toString",function(){return typeof this=="function"&&g(this).source||p(this)})},"6f53":function(i,s,o){var a=o("83ab"),l=o("df75"),c=o("fc6a"),h=o("d1e7").f,p=function(v){return function(g){for(var x=c(g),E=l(x),D=E.length,M=0,A=[],z;D>M;)z=E[M++],(!a||h.call(x,z))&&A.push(v?[z,x[z]]:x[z]);return A}};i.exports={entries:p(!0),values:p(!1)}},"73d9":function(i,s,o){var a=o("44d2");a("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var a=o("428f"),l=o("5135"),c=o("e538"),h=o("9bf2").f;i.exports=function(p){var v=a.Symbol||(a.Symbol={});l(v,p)||h(v,p,{value:c.f(p)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var a=o("1d80");i.exports=function(l){return Object(a(l))}},"7c73":function(i,s,o){var a=o("825a"),l=o("37e8"),c=o("7839"),h=o("d012"),p=o("1be4"),v=o("cc12"),g=o("f772"),x=">",E="<",D="prototype",M="script",A=g("IE_PROTO"),z=function(){},Y=function(j){return E+M+x+j+E+"/"+M+x},ne=function(j){j.write(Y("")),j.close();var J=j.parentWindow.Object;return j=null,J},ge=function(){var j=v("iframe"),J="java"+M+":",U;return j.style.display="none",p.appendChild(j),j.src=String(J),U=j.contentWindow.document,U.open(),U.write(Y("document.F=Object")),U.close(),U.F},pe,O=function(){try{pe=document.domain&&new ActiveXObject("htmlfile")}catch{}O=pe?ne(pe):ge();for(var j=c.length;j--;)delete O[D][c[j]];return O()};h[A]=!0,i.exports=Object.create||function(J,U){var R;return J!==null?(z[D]=a(J),R=new z,z[D]=null,R[A]=J):R=O(),U===void 0?R:l(R,U)}},"7dd0":function(i,s,o){var a=o("23e7"),l=o("9ed3"),c=o("e163"),h=o("d2bb"),p=o("d44e"),v=o("9112"),g=o("6eeb"),x=o("b622"),E=o("c430"),D=o("3f8c"),M=o("ae93"),A=M.IteratorPrototype,z=M.BUGGY_SAFARI_ITERATORS,Y=x("iterator"),ne="keys",ge="values",pe="entries",O=function(){return this};i.exports=function(j,J,U,R,V,$,B){l(U,J,R);var I=function(de){if(de===V&&qe)return qe;if(!z&&de in _e)return _e[de];switch(de){case ne:return function(){return new U(this,de)};case ge:return function(){return new U(this,de)};case pe:return function(){return new U(this,de)}}return function(){return new U(this)}},Q=J+" Iterator",G=!1,_e=j.prototype,ve=_e[Y]||_e["@@iterator"]||V&&_e[V],qe=!z&&ve||I(V),re=J=="Array"&&_e.entries||ve,K,Z,oe;if(re&&(K=c(re.call(new j)),A!==Object.prototype&&K.next&&(!E&&c(K)!==A&&(h?h(K,A):typeof K[Y]!="function"&&v(K,Y,O)),p(K,Q,!0,!0),E&&(D[Q]=O))),V==ge&&ve&&ve.name!==ge&&(G=!0,qe=function(){return ve.call(this)}),(!E||B)&&_e[Y]!==qe&&v(_e,Y,qe),D[J]=qe,V)if(Z={values:I(ge),keys:$?qe:I(ne),entries:I(pe)},B)for(oe in Z)(z||G||!(oe in _e))&&g(_e,oe,Z[oe]);else a({target:J,proto:!0,forced:z||G},Z);return Z}},"7f9a":function(i,s,o){var a=o("da84"),l=o("8925"),c=a.WeakMap;i.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(i,s,o){var a=o("d039");i.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var a=o("c04e"),l=o("9bf2"),c=o("5c6c");i.exports=function(h,p,v){var g=a(p);g in h?l.f(h,g,c(0,v)):h[g]=v}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var a,l,c;(function(h,p){l=[],a=p,c=typeof a=="function"?a.apply(s,l):a,c!==void 0&&(i.exports=c)})(typeof self<"u"?self:this,function(){function h(){var p=Object.getOwnPropertyDescriptor(document,"currentScript");if(!p&&"currentScript"in document&&document.currentScript||p&&p.get!==h&&document.currentScript)return document.currentScript;try{throw new Error}catch(pe){var v=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,g=/@([^@]*):(\d+):(\d+)\s*$/ig,x=v.exec(pe.stack)||g.exec(pe.stack),E=x&&x[1]||!1,D=x&&x[2]||!1,M=document.location.href.replace(document.location.hash,""),A,z,Y,ne=document.getElementsByTagName("script");E===M&&(A=document.documentElement.outerHTML,z=new RegExp("(?:[^\\n]+?\\n){0,"+(D-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),Y=A.replace(z,"$1").trim());for(var ge=0;ge<ne.length;ge++)if(ne[ge].readyState==="interactive"||ne[ge].src===E||E===M&&ne[ge].innerHTML&&ne[ge].innerHTML.trim()===Y)return ne[ge];return null}}return h})},8925:function(i,s,o){var a=o("c6cd"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(c){return l.call(c)}),i.exports=a.inspectSource},"8aa5":function(i,s,o){var a=o("6547").charAt;i.exports=function(l,c,h){return c+(h?a(l,c).length:1)}},"8bbf":function(i,s){i.exports=n},"90e3":function(i,s){var o=0,a=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+a).toString(36)}},9112:function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("5c6c");i.exports=a?function(h,p,v){return l.f(h,p,c(1,v))}:function(h,p,v){return h[p]=v,h}},9263:function(i,s,o){var a=o("ad6d"),l=o("9f7f"),c=RegExp.prototype.exec,h=String.prototype.replace,p=c,v=function(){var D=/a/,M=/b*/g;return c.call(D,"a"),c.call(M,"a"),D.lastIndex!==0||M.lastIndex!==0}(),g=l.UNSUPPORTED_Y||l.BROKEN_CARET,x=/()??/.exec("")[1]!==void 0,E=v||x||g;E&&(p=function(M){var A=this,z,Y,ne,ge,pe=g&&A.sticky,O=a.call(A),j=A.source,J=0,U=M;return pe&&(O=O.replace("y",""),O.indexOf("g")===-1&&(O+="g"),U=String(M).slice(A.lastIndex),A.lastIndex>0&&(!A.multiline||A.multiline&&M[A.lastIndex-1]!==`
`)&&(j="(?: "+j+")",U=" "+U,J++),Y=new RegExp("^(?:"+j+")",O)),x&&(Y=new RegExp("^"+j+"$(?!\\s)",O)),v&&(z=A.lastIndex),ne=c.call(pe?Y:A,U),pe?ne?(ne.input=ne.input.slice(J),ne[0]=ne[0].slice(J),ne.index=A.lastIndex,A.lastIndex+=ne[0].length):A.lastIndex=0:v&&ne&&(A.lastIndex=A.global?ne.index+ne[0].length:z),x&&ne&&ne.length>1&&h.call(ne[0],Y,function(){for(ge=1;ge<arguments.length-2;ge++)arguments[ge]===void 0&&(ne[ge]=void 0)}),ne}),i.exports=p},"94ca":function(i,s,o){var a=o("d039"),l=/#|\.prototype\./,c=function(x,E){var D=p[h(x)];return D==g?!0:D==v?!1:typeof E=="function"?a(E):!!E},h=c.normalize=function(x){return String(x).replace(l,".").toLowerCase()},p=c.data={},v=c.NATIVE="N",g=c.POLYFILL="P";i.exports=c},"99af":function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("e8b5"),h=o("861d"),p=o("7b0b"),v=o("50c4"),g=o("8418"),x=o("65f0"),E=o("1dde"),D=o("b622"),M=o("2d00"),A=D("isConcatSpreadable"),z=9007199254740991,Y="Maximum allowed index exceeded",ne=M>=51||!l(function(){var j=[];return j[A]=!1,j.concat()[0]!==j}),ge=E("concat"),pe=function(j){if(!h(j))return!1;var J=j[A];return J!==void 0?!!J:c(j)},O=!ne||!ge;a({target:"Array",proto:!0,forced:O},{concat:function(J){var U=p(this),R=x(U,0),V=0,$,B,I,Q,G;for($=-1,I=arguments.length;$<I;$++)if(G=$===-1?U:arguments[$],pe(G)){if(Q=v(G.length),V+Q>z)throw TypeError(Y);for(B=0;B<Q;B++,V++)B in G&&g(R,V,G[B])}else{if(V>=z)throw TypeError(Y);g(R,V++,G)}return R.length=V,R}})},"9bdd":function(i,s,o){var a=o("825a");i.exports=function(l,c,h,p){try{return p?c(a(h)[0],h[1]):c(h)}catch(g){var v=l.return;throw v!==void 0&&a(v.call(l)),g}}},"9bf2":function(i,s,o){var a=o("83ab"),l=o("0cfb"),c=o("825a"),h=o("c04e"),p=Object.defineProperty;s.f=a?p:function(g,x,E){if(c(g),x=h(x,!0),c(E),l)try{return p(g,x,E)}catch{}if("get"in E||"set"in E)throw TypeError("Accessors not supported");return"value"in E&&(g[x]=E.value),g}},"9ed3":function(i,s,o){var a=o("ae93").IteratorPrototype,l=o("7c73"),c=o("5c6c"),h=o("d44e"),p=o("3f8c"),v=function(){return this};i.exports=function(g,x,E){var D=x+" Iterator";return g.prototype=l(a,{next:c(1,E)}),h(g,D,!1,!0),p[D]=v,g}},"9f7f":function(i,s,o){var a=o("d039");function l(c,h){return RegExp(c,h)}s.UNSUPPORTED_Y=a(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),s.BROKEN_CARET=a(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(i,s,o){var a=o("e8b5"),l=o("50c4"),c=o("0366"),h=function(p,v,g,x,E,D,M,A){for(var z=E,Y=0,ne=M?c(M,A,3):!1,ge;Y<x;){if(Y in g){if(ge=ne?ne(g[Y],Y,v):g[Y],D>0&&a(ge))z=h(p,v,ge,l(ge.length),z,D-1)-1;else{if(z>=9007199254740991)throw TypeError("Exceed the acceptable array length");p[z]=ge}z++}Y++}return z};i.exports=h},a352:function(i,s){i.exports=r},a434:function(i,s,o){var a=o("23e7"),l=o("23cb"),c=o("a691"),h=o("50c4"),p=o("7b0b"),v=o("65f0"),g=o("8418"),x=o("1dde"),E=o("ae40"),D=x("splice"),M=E("splice",{ACCESSORS:!0,0:0,1:2}),A=Math.max,z=Math.min,Y=9007199254740991,ne="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!D||!M},{splice:function(pe,O){var j=p(this),J=h(j.length),U=l(pe,J),R=arguments.length,V,$,B,I,Q,G;if(R===0?V=$=0:R===1?(V=0,$=J-U):(V=R-2,$=z(A(c(O),0),J-U)),J+V-$>Y)throw TypeError(ne);for(B=v(j,$),I=0;I<$;I++)Q=U+I,Q in j&&g(B,I,j[Q]);if(B.length=$,V<$){for(I=U;I<J-$;I++)Q=I+$,G=I+V,Q in j?j[G]=j[Q]:delete j[G];for(I=J;I>J-$+V;I--)delete j[I-1]}else if(V>$)for(I=J-$;I>U;I--)Q=I+$-1,G=I+V-1,Q in j?j[G]=j[Q]:delete j[G];for(I=0;I<V;I++)j[I+U]=arguments[I+2];return j.length=J-$+V,B}})},a4d3:function(i,s,o){var a=o("23e7"),l=o("da84"),c=o("d066"),h=o("c430"),p=o("83ab"),v=o("4930"),g=o("fdbf"),x=o("d039"),E=o("5135"),D=o("e8b5"),M=o("861d"),A=o("825a"),z=o("7b0b"),Y=o("fc6a"),ne=o("c04e"),ge=o("5c6c"),pe=o("7c73"),O=o("df75"),j=o("241c"),J=o("057f"),U=o("7418"),R=o("06cf"),V=o("9bf2"),$=o("d1e7"),B=o("9112"),I=o("6eeb"),Q=o("5692"),G=o("f772"),_e=o("d012"),ve=o("90e3"),qe=o("b622"),re=o("e538"),K=o("746f"),Z=o("d44e"),oe=o("69f3"),de=o("b727").forEach,ye=G("hidden"),he="Symbol",X="prototype",Ae=qe("toPrimitive"),De=oe.set,Xe=oe.getterFor(he),fe=Object[X],ee=l.Symbol,se=c("JSON","stringify"),le=R.f,je=V.f,$e=J.f,et=$.f,Ee=Q("symbols"),me=Q("op-symbols"),We=Q("string-to-symbol-registry"),ct=Q("symbol-to-string-registry"),pt=Q("wks"),gt=l.QObject,st=!gt||!gt[X]||!gt[X].findChild,qt=p&&x(function(){return pe(je({},"a",{get:function(){return je(this,"a",{value:7}).a}})).a!=7})?function(en,xn,Cn){var er=le(fe,xn);er&&delete fe[xn],je(en,xn,Cn),er&&en!==fe&&je(fe,xn,er)}:je,gn=function(en,xn){var Cn=Ee[en]=pe(ee[X]);return De(Cn,{type:he,tag:en,description:xn}),p||(Cn.description=xn),Cn},Qe=g?function(en){return typeof en=="symbol"}:function(en){return Object(en)instanceof ee},lt=function(xn,Cn,er){xn===fe&&lt(me,Cn,er),A(xn);var pr=ne(Cn,!0);return A(er),E(Ee,pr)?(er.enumerable?(E(xn,ye)&&xn[ye][pr]&&(xn[ye][pr]=!1),er=pe(er,{enumerable:ge(0,!1)})):(E(xn,ye)||je(xn,ye,ge(1,{})),xn[ye][pr]=!0),qt(xn,pr,er)):je(xn,pr,er)},it=function(xn,Cn){A(xn);var er=Y(Cn),pr=O(er).concat(Tn(er));return de(pr,function(xr){(!p||Jt.call(er,xr))&&lt(xn,xr,er[xr])}),xn},$t=function(xn,Cn){return Cn===void 0?pe(xn):it(pe(xn),Cn)},Jt=function(xn){var Cn=ne(xn,!0),er=et.call(this,Cn);return this===fe&&E(Ee,Cn)&&!E(me,Cn)?!1:er||!E(this,Cn)||!E(Ee,Cn)||E(this,ye)&&this[ye][Cn]?er:!0},Dn=function(xn,Cn){var er=Y(xn),pr=ne(Cn,!0);if(!(er===fe&&E(Ee,pr)&&!E(me,pr))){var xr=le(er,pr);return xr&&E(Ee,pr)&&!(E(er,ye)&&er[ye][pr])&&(xr.enumerable=!0),xr}},vn=function(xn){var Cn=$e(Y(xn)),er=[];return de(Cn,function(pr){!E(Ee,pr)&&!E(_e,pr)&&er.push(pr)}),er},Tn=function(xn){var Cn=xn===fe,er=$e(Cn?me:Y(xn)),pr=[];return de(er,function(xr){E(Ee,xr)&&(!Cn||E(fe,xr))&&pr.push(Ee[xr])}),pr};if(v||(ee=function(){if(this instanceof ee)throw TypeError("Symbol is not a constructor");var xn=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),Cn=ve(xn),er=function(pr){this===fe&&er.call(me,pr),E(this,ye)&&E(this[ye],Cn)&&(this[ye][Cn]=!1),qt(this,Cn,ge(1,pr))};return p&&st&&qt(fe,Cn,{configurable:!0,set:er}),gn(Cn,xn)},I(ee[X],"toString",function(){return Xe(this).tag}),I(ee,"withoutSetter",function(en){return gn(ve(en),en)}),$.f=Jt,V.f=lt,R.f=Dn,j.f=J.f=vn,U.f=Tn,re.f=function(en){return gn(qe(en),en)},p&&(je(ee[X],"description",{configurable:!0,get:function(){return Xe(this).description}}),h||I(fe,"propertyIsEnumerable",Jt,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!v,sham:!v},{Symbol:ee}),de(O(pt),function(en){K(en)}),a({target:he,stat:!0,forced:!v},{for:function(en){var xn=String(en);if(E(We,xn))return We[xn];var Cn=ee(xn);return We[xn]=Cn,ct[Cn]=xn,Cn},keyFor:function(xn){if(!Qe(xn))throw TypeError(xn+" is not a symbol");if(E(ct,xn))return ct[xn]},useSetter:function(){st=!0},useSimple:function(){st=!1}}),a({target:"Object",stat:!0,forced:!v,sham:!p},{create:$t,defineProperty:lt,defineProperties:it,getOwnPropertyDescriptor:Dn}),a({target:"Object",stat:!0,forced:!v},{getOwnPropertyNames:vn,getOwnPropertySymbols:Tn}),a({target:"Object",stat:!0,forced:x(function(){U.f(1)})},{getOwnPropertySymbols:function(xn){return U.f(z(xn))}}),se){var Jn=!v||x(function(){var en=ee();return se([en])!="[null]"||se({a:en})!="{}"||se(Object(en))!="{}"});a({target:"JSON",stat:!0,forced:Jn},{stringify:function(xn,Cn,er){for(var pr=[xn],xr=1,lr;arguments.length>xr;)pr.push(arguments[xr++]);if(lr=Cn,!(!M(Cn)&&xn===void 0||Qe(xn)))return D(Cn)||(Cn=function(Jr,Bs){if(typeof lr=="function"&&(Bs=lr.call(this,Jr,Bs)),!Qe(Bs))return Bs}),pr[1]=Cn,se.apply(null,pr)}})}ee[X][Ae]||B(ee[X],Ae,ee[X].valueOf),Z(ee,he),_e[ye]=!0},a630:function(i,s,o){var a=o("23e7"),l=o("4df4"),c=o("1c7e"),h=!c(function(p){Array.from(p)});a({target:"Array",stat:!0,forced:h},{from:l})},a640:function(i,s,o){var a=o("d039");i.exports=function(l,c){var h=[][l];return!!h&&a(function(){h.call(null,c||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,a=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(l>0?a:o)(l)}},ab13:function(i,s,o){var a=o("b622"),l=a("match");i.exports=function(c){var h=/./;try{"/./"[c](h)}catch{try{return h[l]=!1,"/./"[c](h)}catch{}}return!1}},ac1f:function(i,s,o){var a=o("23e7"),l=o("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(i,s,o){var a=o("825a");i.exports=function(){var l=a(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("5135"),h=Object.defineProperty,p={},v=function(g){throw g};i.exports=function(g,x){if(c(p,g))return p[g];x||(x={});var E=[][g],D=c(x,"ACCESSORS")?x.ACCESSORS:!1,M=c(x,0)?x[0]:v,A=c(x,1)?x[1]:void 0;return p[g]=!!E&&!l(function(){if(D&&!a)return!0;var z={length:-1};D?h(z,1,{enumerable:!0,get:v}):z[1]=1,E.call(z,M,A)})}},ae93:function(i,s,o){var a=o("e163"),l=o("9112"),c=o("5135"),h=o("b622"),p=o("c430"),v=h("iterator"),g=!1,x=function(){return this},E,D,M;[].keys&&(M=[].keys(),"next"in M?(D=a(a(M)),D!==Object.prototype&&(E=D)):g=!0),E==null&&(E={}),!p&&!c(E,v)&&l(E,v,x),i.exports={IteratorPrototype:E,BUGGY_SAFARI_ITERATORS:g}},b041:function(i,s,o){var a=o("00ee"),l=o("f5df");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(i,s,o){var a=o("83ab"),l=o("9bf2").f,c=Function.prototype,h=c.toString,p=/^\s*function ([^ (]*)/,v="name";a&&!(v in c)&&l(c,v,{configurable:!0,get:function(){try{return h.call(this).match(p)[1]}catch{return""}}})},b622:function(i,s,o){var a=o("da84"),l=o("5692"),c=o("5135"),h=o("90e3"),p=o("4930"),v=o("fdbf"),g=l("wks"),x=a.Symbol,E=v?x:x&&x.withoutSetter||h;i.exports=function(D){return c(g,D)||(p&&c(x,D)?g[D]=x[D]:g[D]=E("Symbol."+D)),g[D]}},b64b:function(i,s,o){var a=o("23e7"),l=o("7b0b"),c=o("df75"),h=o("d039"),p=h(function(){c(1)});a({target:"Object",stat:!0,forced:p},{keys:function(g){return c(l(g))}})},b727:function(i,s,o){var a=o("0366"),l=o("44ad"),c=o("7b0b"),h=o("50c4"),p=o("65f0"),v=[].push,g=function(x){var E=x==1,D=x==2,M=x==3,A=x==4,z=x==6,Y=x==5||z;return function(ne,ge,pe,O){for(var j=c(ne),J=l(j),U=a(ge,pe,3),R=h(J.length),V=0,$=O||p,B=E?$(ne,R):D?$(ne,0):void 0,I,Q;R>V;V++)if((Y||V in J)&&(I=J[V],Q=U(I,V,j),x)){if(E)B[V]=Q;else if(Q)switch(x){case 3:return!0;case 5:return I;case 6:return V;case 2:v.call(B,I)}else if(A)return!1}return z?-1:M||A?A:B}};i.exports={forEach:g(0),map:g(1),filter:g(2),some:g(3),every:g(4),find:g(5),findIndex:g(6)}},c04e:function(i,s,o){var a=o("861d");i.exports=function(l,c){if(!a(l))return l;var h,p;if(c&&typeof(h=l.toString)=="function"&&!a(p=h.call(l))||typeof(h=l.valueOf)=="function"&&!a(p=h.call(l))||!c&&typeof(h=l.toString)=="function"&&!a(p=h.call(l)))return p;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(a){return o.call(a).slice(8,-1)}},c6cd:function(i,s,o){var a=o("da84"),l=o("ce4e"),c="__core-js_shared__",h=a[c]||l(c,{});i.exports=h},c740:function(i,s,o){var a=o("23e7"),l=o("b727").findIndex,c=o("44d2"),h=o("ae40"),p="findIndex",v=!0,g=h(p);p in[]&&Array(1)[p](function(){v=!1}),a({target:"Array",proto:!0,forced:v||!g},{findIndex:function(E){return l(this,E,arguments.length>1?arguments[1]:void 0)}}),c(p)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var a=o("23e7"),l=o("4d64").indexOf,c=o("a640"),h=o("ae40"),p=[].indexOf,v=!!p&&1/[1].indexOf(1,-0)<0,g=c("indexOf"),x=h("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:v||!g||!x},{indexOf:function(D){return v?p.apply(this,arguments)||0:l(this,D,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var a=o("5135"),l=o("fc6a"),c=o("4d64").indexOf,h=o("d012");i.exports=function(p,v){var g=l(p),x=0,E=[],D;for(D in g)!a(h,D)&&a(g,D)&&E.push(D);for(;v.length>x;)a(g,D=v[x++])&&(~c(E,D)||E.push(D));return E}},caad:function(i,s,o){var a=o("23e7"),l=o("4d64").includes,c=o("44d2"),h=o("ae40"),p=h("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!p},{includes:function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(i,s,o){var a=o("da84"),l=o("861d"),c=a.document,h=l(c)&&l(c.createElement);i.exports=function(p){return h?c.createElement(p):{}}},ce4e:function(i,s,o){var a=o("da84"),l=o("9112");i.exports=function(c,h){try{l(a,c,h)}catch{a[c]=h}return h}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var a=o("428f"),l=o("da84"),c=function(h){return typeof h=="function"?h:void 0};i.exports=function(h,p){return arguments.length<2?c(a[h])||c(l[h]):a[h]&&a[h][p]||l[h]&&l[h][p]}},d1e7:function(i,s,o){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!a.call({1:2},1);s.f=c?function(p){var v=l(this,p);return!!v&&v.enumerable}:a},d28b:function(i,s,o){var a=o("746f");a("iterator")},d2bb:function(i,s,o){var a=o("825a"),l=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,h={},p;try{p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,p.call(h,[]),c=h instanceof Array}catch{}return function(g,x){return a(g),l(x),c?p.call(g,x):g.__proto__=x,g}}():void 0)},d3b7:function(i,s,o){var a=o("00ee"),l=o("6eeb"),c=o("b041");a||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(i,s,o){var a=o("9bf2").f,l=o("5135"),c=o("b622"),h=c("toStringTag");i.exports=function(p,v,g){p&&!l(p=g?p:p.prototype,h)&&a(p,h,{configurable:!0,value:v})}},d58f:function(i,s,o){var a=o("1c0b"),l=o("7b0b"),c=o("44ad"),h=o("50c4"),p=function(v){return function(g,x,E,D){a(x);var M=l(g),A=c(M),z=h(M.length),Y=v?z-1:0,ne=v?-1:1;if(E<2)for(;;){if(Y in A){D=A[Y],Y+=ne;break}if(Y+=ne,v?Y<0:z<=Y)throw TypeError("Reduce of empty array with no initial value")}for(;v?Y>=0:z>Y;Y+=ne)Y in A&&(D=x(D,A[Y],Y,M));return D}};i.exports={left:p(!1),right:p(!0)}},d784:function(i,s,o){o("ac1f");var a=o("6eeb"),l=o("d039"),c=o("b622"),h=o("9263"),p=o("9112"),v=c("species"),g=!l(function(){var A=/./;return A.exec=function(){var z=[];return z.groups={a:"7"},z},"".replace(A,"$<a>")!=="7"}),x=function(){return"a".replace(/./,"$0")==="$0"}(),E=c("replace"),D=function(){return/./[E]?/./[E]("a","$0")==="":!1}(),M=!l(function(){var A=/(?:)/,z=A.exec;A.exec=function(){return z.apply(this,arguments)};var Y="ab".split(A);return Y.length!==2||Y[0]!=="a"||Y[1]!=="b"});i.exports=function(A,z,Y,ne){var ge=c(A),pe=!l(function(){var V={};return V[ge]=function(){return 7},""[A](V)!=7}),O=pe&&!l(function(){var V=!1,$=/a/;return A==="split"&&($={},$.constructor={},$.constructor[v]=function(){return $},$.flags="",$[ge]=/./[ge]),$.exec=function(){return V=!0,null},$[ge](""),!V});if(!pe||!O||A==="replace"&&!(g&&x&&!D)||A==="split"&&!M){var j=/./[ge],J=Y(ge,""[A],function(V,$,B,I,Q){return $.exec===h?pe&&!Q?{done:!0,value:j.call($,B,I)}:{done:!0,value:V.call(B,$,I)}:{done:!1}},{REPLACE_KEEPS_$0:x,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:D}),U=J[0],R=J[1];a(String.prototype,A,U),a(RegExp.prototype,ge,z==2?function(V,$){return R.call(V,this,$)}:function(V){return R.call(V,this)})}ne&&p(RegExp.prototype[ge],"sham",!0)}},d81d:function(i,s,o){var a=o("23e7"),l=o("b727").map,c=o("1dde"),h=o("ae40"),p=c("map"),v=h("map");a({target:"Array",proto:!0,forced:!p||!v},{map:function(x){return l(this,x,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(a){var l=function(c){return c&&c.Math==Math&&c};i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("56ef"),h=o("fc6a"),p=o("06cf"),v=o("8418");a({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(x){for(var E=h(x),D=p.f,M=c(E),A={},z=0,Y,ne;M.length>z;)ne=D(E,Y=M[z++]),ne!==void 0&&v(A,Y,ne);return A}})},dbf1:function(i,s,o){(function(a){o.d(s,"a",function(){return c});function l(){return typeof window<"u"?window.console:a.console}var c=l()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("e260"),h=o("9112"),p=o("b622"),v=p("iterator"),g=p("toStringTag"),x=c.values;for(var E in l){var D=a[E],M=D&&D.prototype;if(M){if(M[v]!==x)try{h(M,v,x)}catch{M[v]=x}if(M[g]||h(M,g,E),l[E]){for(var A in c)if(M[A]!==c[A])try{h(M,A,c[A])}catch{M[A]=c[A]}}}}},df75:function(i,s,o){var a=o("ca84"),l=o("7839");i.exports=Object.keys||function(h){return a(h,l)}},e01a:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("da84"),h=o("5135"),p=o("861d"),v=o("9bf2").f,g=o("e893"),x=c.Symbol;if(l&&typeof x=="function"&&(!("description"in x.prototype)||x().description!==void 0)){var E={},D=function(){var ge=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),pe=this instanceof D?new x(ge):ge===void 0?x():x(ge);return ge===""&&(E[pe]=!0),pe};g(D,x);var M=D.prototype=x.prototype;M.constructor=D;var A=M.toString,z=String(x("test"))=="Symbol(test)",Y=/^Symbol\((.*)\)[^)]+$/;v(M,"description",{configurable:!0,get:function(){var ge=p(this)?this.valueOf():this,pe=A.call(ge);if(h(E,ge))return"";var O=z?pe.slice(7,-1):pe.replace(Y,"$1");return O===""?void 0:O}}),a({global:!0,forced:!0},{Symbol:D})}},e163:function(i,s,o){var a=o("5135"),l=o("7b0b"),c=o("f772"),h=o("e177"),p=c("IE_PROTO"),v=Object.prototype;i.exports=h?Object.getPrototypeOf:function(g){return g=l(g),a(g,p)?g[p]:typeof g.constructor=="function"&&g instanceof g.constructor?g.constructor.prototype:g instanceof Object?v:null}},e177:function(i,s,o){var a=o("d039");i.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(i,s,o){var a=o("fc6a"),l=o("44d2"),c=o("3f8c"),h=o("69f3"),p=o("7dd0"),v="Array Iterator",g=h.set,x=h.getterFor(v);i.exports=p(Array,"Array",function(E,D){g(this,{type:v,target:a(E),index:0,kind:D})},function(){var E=x(this),D=E.target,M=E.kind,A=E.index++;return!D||A>=D.length?(E.target=void 0,{value:void 0,done:!0}):M=="keys"?{value:A,done:!1}:M=="values"?{value:D[A],done:!1}:{value:[A,D[A]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("fc6a"),h=o("06cf").f,p=o("83ab"),v=l(function(){h(1)}),g=!p||v;a({target:"Object",stat:!0,forced:g,sham:!p},{getOwnPropertyDescriptor:function(E,D){return h(c(E),D)}})},e538:function(i,s,o){var a=o("b622");s.f=a},e893:function(i,s,o){var a=o("5135"),l=o("56ef"),c=o("06cf"),h=o("9bf2");i.exports=function(p,v){for(var g=l(v),x=h.f,E=c.f,D=0;D<g.length;D++){var M=g[D];a(p,M)||x(p,M,E(v,M))}}},e8b5:function(i,s,o){var a=o("c6b6");i.exports=Array.isArray||function(c){return a(c)=="Array"}},e95a:function(i,s,o){var a=o("b622"),l=o("3f8c"),c=a("iterator"),h=Array.prototype;i.exports=function(p){return p!==void 0&&(l.Array===p||h[c]===p)}},f5df:function(i,s,o){var a=o("00ee"),l=o("c6b6"),c=o("b622"),h=c("toStringTag"),p=l(function(){return arguments}())=="Arguments",v=function(g,x){try{return g[x]}catch{}};i.exports=a?l:function(g){var x,E,D;return g===void 0?"Undefined":g===null?"Null":typeof(E=v(x=Object(g),h))=="string"?E:p?l(x):(D=l(x))=="Object"&&typeof x.callee=="function"?"Arguments":D}},f772:function(i,s,o){var a=o("5692"),l=o("90e3"),c=a("keys");i.exports=function(h){return c[h]||(c[h]=l(h))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var a=window.document.currentScript;{var l=o("8875");a=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(o.p=c[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function h(Qe,lt,it){return lt in Qe?Object.defineProperty(Qe,lt,{value:it,enumerable:!0,configurable:!0,writable:!0}):Qe[lt]=it,Qe}function p(Qe,lt){var it=Object.keys(Qe);if(Object.getOwnPropertySymbols){var $t=Object.getOwnPropertySymbols(Qe);lt&&($t=$t.filter(function(Jt){return Object.getOwnPropertyDescriptor(Qe,Jt).enumerable})),it.push.apply(it,$t)}return it}function v(Qe){for(var lt=1;lt<arguments.length;lt++){var it=arguments[lt]!=null?arguments[lt]:{};lt%2?p(Object(it),!0).forEach(function($t){h(Qe,$t,it[$t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Qe,Object.getOwnPropertyDescriptors(it)):p(Object(it)).forEach(function($t){Object.defineProperty(Qe,$t,Object.getOwnPropertyDescriptor(it,$t))})}return Qe}function g(Qe){if(Array.isArray(Qe))return Qe}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function x(Qe,lt){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Qe)))){var it=[],$t=!0,Jt=!1,Dn=void 0;try{for(var vn=Qe[Symbol.iterator](),Tn;!($t=(Tn=vn.next()).done)&&(it.push(Tn.value),!(lt&&it.length===lt));$t=!0);}catch(Jn){Jt=!0,Dn=Jn}finally{try{!$t&&vn.return!=null&&vn.return()}finally{if(Jt)throw Dn}}return it}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function E(Qe,lt){(lt==null||lt>Qe.length)&&(lt=Qe.length);for(var it=0,$t=new Array(lt);it<lt;it++)$t[it]=Qe[it];return $t}function D(Qe,lt){if(Qe){if(typeof Qe=="string")return E(Qe,lt);var it=Object.prototype.toString.call(Qe).slice(8,-1);if(it==="Object"&&Qe.constructor&&(it=Qe.constructor.name),it==="Map"||it==="Set")return Array.from(Qe);if(it==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(it))return E(Qe,lt)}}function M(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A(Qe,lt){return g(Qe)||x(Qe,lt)||D(Qe,lt)||M()}function z(Qe){if(Array.isArray(Qe))return E(Qe)}function Y(Qe){if(typeof Symbol<"u"&&Symbol.iterator in Object(Qe))return Array.from(Qe)}function ne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ge(Qe){return z(Qe)||Y(Qe)||D(Qe)||ne()}var pe=o("a352"),O=o.n(pe);function j(Qe){Qe.parentElement!==null&&Qe.parentElement.removeChild(Qe)}function J(Qe,lt,it){var $t=it===0?Qe.children[0]:Qe.children[it-1].nextSibling;Qe.insertBefore(lt,$t)}var U=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function R(Qe){var lt=Object.create(null);return function($t){var Jt=lt[$t];return Jt||(lt[$t]=Qe($t))}}var V=/-(\w)/g,$=R(function(Qe){return Qe.replace(V,function(lt,it){return it.toUpperCase()})});o("5db7"),o("73d9");var B=["Start","Add","Remove","Update","End"],I=["Choose","Unchoose","Sort","Filter","Clone"],Q=["Move"],G=[Q,B,I].flatMap(function(Qe){return Qe}).map(function(Qe){return"on".concat(Qe)}),_e={manage:Q,manageAndEmit:B,emit:I};function ve(Qe){return G.indexOf(Qe)!==-1}o("caad"),o("2ca0");var qe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function re(Qe){return qe.includes(Qe)}function K(Qe){return["transition-group","TransitionGroup"].includes(Qe)}function Z(Qe){return["id","class","role","style"].includes(Qe)||Qe.startsWith("data-")||Qe.startsWith("aria-")||Qe.startsWith("on")}function oe(Qe){return Qe.reduce(function(lt,it){var $t=A(it,2),Jt=$t[0],Dn=$t[1];return lt[Jt]=Dn,lt},{})}function de(Qe){var lt=Qe.$attrs,it=Qe.componentData,$t=it===void 0?{}:it,Jt=oe(Object.entries(lt).filter(function(Dn){var vn=A(Dn,2),Tn=vn[0];return vn[1],Z(Tn)}));return v(v({},Jt),$t)}function ye(Qe){var lt=Qe.$attrs,it=Qe.callBackBuilder,$t=oe(he(lt));Object.entries(it).forEach(function(Dn){var vn=A(Dn,2),Tn=vn[0],Jn=vn[1];_e[Tn].forEach(function(en){$t["on".concat(en)]=Jn(en)})});var Jt="[data-draggable]".concat($t.draggable||"");return v(v({},$t),{},{draggable:Jt})}function he(Qe){return Object.entries(Qe).filter(function(lt){var it=A(lt,2),$t=it[0];return it[1],!Z($t)}).map(function(lt){var it=A(lt,2),$t=it[0],Jt=it[1];return[$($t),Jt]}).filter(function(lt){var it=A(lt,2),$t=it[0];return it[1],!ve($t)})}o("c740");function X(Qe,lt){if(!(Qe instanceof lt))throw new TypeError("Cannot call a class as a function")}function Ae(Qe,lt){for(var it=0;it<lt.length;it++){var $t=lt[it];$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Qe,$t.key,$t)}}function De(Qe,lt,it){return lt&&Ae(Qe.prototype,lt),Qe}var Xe=function(lt){var it=lt.el;return it},fe=function(lt,it){return lt.__draggable_context=it},ee=function(lt){return lt.__draggable_context},se=function(){function Qe(lt){var it=lt.nodes,$t=it.header,Jt=it.default,Dn=it.footer,vn=lt.root,Tn=lt.realList;X(this,Qe),this.defaultNodes=Jt,this.children=[].concat(ge($t),ge(Jt),ge(Dn)),this.externalComponent=vn.externalComponent,this.rootTransition=vn.transition,this.tag=vn.tag,this.realList=Tn}return De(Qe,[{key:"render",value:function(it,$t){var Jt=this.tag,Dn=this.children,vn=this._isRootComponent,Tn=vn?{default:function(){return Dn}}:Dn;return it(Jt,$t,Tn)}},{key:"updated",value:function(){var it=this.defaultNodes,$t=this.realList;it.forEach(function(Jt,Dn){fe(Xe(Jt),{element:$t[Dn],index:Dn})})}},{key:"getUnderlyingVm",value:function(it){return ee(it)}},{key:"getVmIndexFromDomIndex",value:function(it,$t){var Jt=this.defaultNodes,Dn=Jt.length,vn=$t.children,Tn=vn.item(it);if(Tn===null)return Dn;var Jn=ee(Tn);if(Jn)return Jn.index;if(Dn===0)return 0;var en=Xe(Jt[0]),xn=ge(vn).findIndex(function(Cn){return Cn===en});return it<xn?0:Dn}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),Qe}(),le=o("8bbf");function je(Qe,lt){var it=Qe[lt];return it?it():[]}function $e(Qe){var lt=Qe.$slots,it=Qe.realList,$t=Qe.getKey,Jt=it||[],Dn=["header","footer"].map(function(Cn){return je(lt,Cn)}),vn=A(Dn,2),Tn=vn[0],Jn=vn[1],en=lt.item;if(!en)throw new Error("draggable element must have an item slot");var xn=Jt.flatMap(function(Cn,er){return en({element:Cn,index:er}).map(function(pr){return pr.key=$t(Cn),pr.props=v(v({},pr.props||{}),{},{"data-draggable":!0}),pr})});if(xn.length!==Jt.length)throw new Error("Item slot must have only one child");return{header:Tn,footer:Jn,default:xn}}function et(Qe){var lt=K(Qe),it=!re(Qe)&&!lt;return{transition:lt,externalComponent:it,tag:it?Object(le.resolveComponent)(Qe):lt?le.TransitionGroup:Qe}}function Ee(Qe){var lt=Qe.$slots,it=Qe.tag,$t=Qe.realList,Jt=Qe.getKey,Dn=$e({$slots:lt,realList:$t,getKey:Jt}),vn=et(it);return new se({nodes:Dn,root:vn,realList:$t})}function me(Qe,lt){var it=this;Object(le.nextTick)(function(){return it.$emit(Qe.toLowerCase(),lt)})}function We(Qe){var lt=this;return function(it,$t){if(lt.realList!==null)return lt["onDrag".concat(Qe)](it,$t)}}function ct(Qe){var lt=this,it=We.call(this,Qe);return function($t,Jt){it.call(lt,$t,Jt),me.call(lt,Qe,$t)}}var pt=null,gt={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(lt){return lt}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},st=["update:modelValue","change"].concat(ge([].concat(ge(_e.manageAndEmit),ge(_e.emit)).map(function(Qe){return Qe.toLowerCase()}))),qt=Object(le.defineComponent)({name:"draggable",inheritAttrs:!1,props:gt,emits:st,data:function(){return{error:!1}},render:function(){try{this.error=!1;var lt=this.$slots,it=this.$attrs,$t=this.tag,Jt=this.componentData,Dn=this.realList,vn=this.getKey,Tn=Ee({$slots:lt,tag:$t,realList:Dn,getKey:vn});this.componentStructure=Tn;var Jn=de({$attrs:it,componentData:Jt});return Tn.render(le.h,Jn)}catch(en){return this.error=!0,Object(le.h)("pre",{style:{color:"red"}},en.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&U.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var lt=this;if(!this.error){var it=this.$attrs,$t=this.$el,Jt=this.componentStructure;Jt.updated();var Dn=ye({$attrs:it,callBackBuilder:{manageAndEmit:function(Jn){return ct.call(lt,Jn)},emit:function(Jn){return me.bind(lt,Jn)},manage:function(Jn){return We.call(lt,Jn)}}}),vn=$t.nodeType===1?$t:$t.parentElement;this._sortable=new O.a(vn,Dn),this.targetDomElement=vn,vn.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var lt=this.list;return lt||this.modelValue},getKey:function(){var lt=this.itemKey;return typeof lt=="function"?lt:function(it){return it[lt]}}},watch:{$attrs:{handler:function(lt){var it=this._sortable;it&&he(lt).forEach(function($t){var Jt=A($t,2),Dn=Jt[0],vn=Jt[1];it.option(Dn,vn)})},deep:!0}},methods:{getUnderlyingVm:function(lt){return this.componentStructure.getUnderlyingVm(lt)||null},getUnderlyingPotencialDraggableComponent:function(lt){return lt.__draggable_component__},emitChanges:function(lt){var it=this;Object(le.nextTick)(function(){return it.$emit("change",lt)})},alterList:function(lt){if(this.list){lt(this.list);return}var it=ge(this.modelValue);lt(it),this.$emit("update:modelValue",it)},spliceList:function(){var lt=arguments,it=function(Jt){return Jt.splice.apply(Jt,ge(lt))};this.alterList(it)},updatePosition:function(lt,it){var $t=function(Dn){return Dn.splice(it,0,Dn.splice(lt,1)[0])};this.alterList($t)},getRelatedContextFromMoveEvent:function(lt){var it=lt.to,$t=lt.related,Jt=this.getUnderlyingPotencialDraggableComponent(it);if(!Jt)return{component:Jt};var Dn=Jt.realList,vn={list:Dn,component:Jt};if(it!==$t&&Dn){var Tn=Jt.getUnderlyingVm($t)||{};return v(v({},Tn),vn)}return vn},getVmIndexFromDomIndex:function(lt){return this.componentStructure.getVmIndexFromDomIndex(lt,this.targetDomElement)},onDragStart:function(lt){this.context=this.getUnderlyingVm(lt.item),lt.item._underlying_vm_=this.clone(this.context.element),pt=lt.item},onDragAdd:function(lt){var it=lt.item._underlying_vm_;if(it!==void 0){j(lt.item);var $t=this.getVmIndexFromDomIndex(lt.newIndex);this.spliceList($t,0,it);var Jt={element:it,newIndex:$t};this.emitChanges({added:Jt})}},onDragRemove:function(lt){if(J(this.$el,lt.item,lt.oldIndex),lt.pullMode==="clone"){j(lt.clone);return}var it=this.context,$t=it.index,Jt=it.element;this.spliceList($t,1);var Dn={element:Jt,oldIndex:$t};this.emitChanges({removed:Dn})},onDragUpdate:function(lt){j(lt.item),J(lt.from,lt.item,lt.oldIndex);var it=this.context.index,$t=this.getVmIndexFromDomIndex(lt.newIndex);this.updatePosition(it,$t);var Jt={element:this.context.element,oldIndex:it,newIndex:$t};this.emitChanges({moved:Jt})},computeFutureIndex:function(lt,it){if(!lt.element)return 0;var $t=ge(it.to.children).filter(function(Tn){return Tn.style.display!=="none"}),Jt=$t.indexOf(it.related),Dn=lt.component.getVmIndexFromDomIndex(Jt),vn=$t.indexOf(pt)!==-1;return vn||!it.willInsertAfter?Dn:Dn+1},onDragMove:function(lt,it){var $t=this.move,Jt=this.realList;if(!$t||!Jt)return!0;var Dn=this.getRelatedContextFromMoveEvent(lt),vn=this.computeFutureIndex(Dn,lt),Tn=v(v({},this.context),{},{futureIndex:vn}),Jn=v(v({},lt),{},{relatedContext:Dn,draggedContext:Tn});return $t(Jn,it)},onDragEnd:function(){pt=null}}}),gn=qt;s.default=gn},fb6a:function(i,s,o){var a=o("23e7"),l=o("861d"),c=o("e8b5"),h=o("23cb"),p=o("50c4"),v=o("fc6a"),g=o("8418"),x=o("b622"),E=o("1dde"),D=o("ae40"),M=E("slice"),A=D("slice",{ACCESSORS:!0,0:0,1:2}),z=x("species"),Y=[].slice,ne=Math.max;a({target:"Array",proto:!0,forced:!M||!A},{slice:function(pe,O){var j=v(this),J=p(j.length),U=h(pe,J),R=h(O===void 0?J:O,J),V,$,B;if(c(j)&&(V=j.constructor,typeof V=="function"&&(V===Array||c(V.prototype))?V=void 0:l(V)&&(V=V[z],V===null&&(V=void 0)),V===Array||V===void 0))return Y.call(j,U,R);for($=new(V===void 0?Array:V)(ne(R-U,0)),B=0;U<R;U++,B++)U in j&&g($,B,j[U]);return $.length=B,$}})},fc6a:function(i,s,o){var a=o("44ad"),l=o("1d80");i.exports=function(c){return a(l(c))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var a=o("4930");i.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(aP);var OZ=aP.exports;const IZ=B_(OZ),BZ={class:"h-full bg-gray-50"},RZ={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},FZ={class:"sm:flex sm:items-center"},jZ={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},zZ={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10"},$Z={class:"mt-6 bg-white shadow rounded-lg p-4"},VZ={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},UZ=["value"],HZ={key:0,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},WZ={key:1,class:"mt-6 overflow-x-auto pb-4"},GZ={key:0,class:"p-6 text-center bg-white shadow rounded-lg mb-4"},qZ={class:"flex space-x-4 min-w-max"},YZ={class:"bg-white rounded-lg shadow overflow-hidden"},KZ={class:"flex items-center"},ZZ={class:"flex items-center"},XZ={class:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full"},JZ={class:"p-2 max-h-[calc(100vh-250px)] overflow-y-auto"},QZ={class:"min-h-[100px] draggable-container"},eX={class:"note-container"},tX={class:"bg-white rounded-md shadow-sm border border-gray-200 overflow-hidden"},nX={class:"flex items-center"},rX={key:0,class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},iX={class:"text-sm font-medium text-gray-900 truncate"},sX={class:"px-3 py-2"},oX={class:"text-sm text-gray-500 line-clamp-2"},aX={class:"px-3 py-2 bg-gray-50 border-t border-gray-100 flex justify-between items-center"},lX={class:"text-xs text-gray-500"},uX={class:"flex space-x-1"},cX={key:0,class:"text-xs text-primary-500 flex items-center mr-1",title:"Note géolocalisée"},dX={key:1,class:"text-xs text-gray-400 flex items-center mr-1",title:"Note simple"},hX=["onClick"],fX=["onClick"],pX=["onClick"],gX=["onClick"],mX={key:0,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},vX={class:"flex items-center justify-center min-h-screen w-full"},yX={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},bX={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3 p-4 md:px-6"},_X=Hs({__name:"NotesView",setup(t){const e=Nm(),n=su(),r=bf(),i=xo(),s=Ap(),o=Ct(!0),a=Ct(!1),l=Ct(!1),c=Ct(null),h=Ct(null),p=Ct("info"),v=Ct(null),g=Ct(window.innerWidth<768),x=()=>{g.value=window.innerWidth<768},E=Xn(()=>{const Z=r.getSortedColumns;return console.log("[NotesView][columnsForDrag] Colonnes triées:",Z),Z}),D=[{id:Ki.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:Ki.COMPANY,title:"Entreprise",description:"Visible uniquement par l'entreprise"},{id:Ki.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et ses salariés"},{id:Ki.VISITOR,title:"Visiteurs",description:"Visible par tous (entreprise, salariés et visiteurs)"}],M=ou({search:"",date:"",accessLevel:""});function A(Z){if(!Z)return"Date non définie";try{const oe=new Date(Z);return isNaN(oe.getTime())?(console.warn("[safeFormatDate] Date invalide:",Z),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(oe)}catch(oe){return console.error("[safeFormatDate] Erreur lors du formatage de la date:",oe),"Date invalide"}}function z(Z){if(!Z)return null;try{const oe=new Date(Z);return isNaN(oe.getTime())?(console.warn("[safeDate] Date invalide:",Z),null):oe}catch(oe){return console.error("[safeDate] Erreur lors de la création de la date:",oe),null}}function Y(Z){return A(Z)}const ne=Xn(()=>{let Z=r.getAccessibleNotes;if(M.search){const oe=M.search.toLowerCase();Z=Z.filter(de=>de.title.toLowerCase().includes(oe)||de.description.toLowerCase().includes(oe))}if(M.accessLevel&&(Z=Z.filter(oe=>oe.accessLevel===M.accessLevel)),M.date){const oe=new Date;oe.setHours(0,0,0,0);const de=new Date(oe);de.setDate(oe.getDate()-oe.getDay());const ye=new Date(oe.getFullYear(),oe.getMonth(),1);Z=Z.filter(he=>{const X=z(he.createdAt);return X?M.date==="today"?X>=oe:M.date==="week"?X>=de:M.date==="month"?X>=ye:!0:!1})}return Z}),ge=Xn(()=>Z=>r.getNotesByColumn(Z));function pe(Z){if(Z==null)return"Non défini";switch(Z){case Ki.PRIVATE:return"Privé";case Ki.COMPANY:return"Entreprise";case Ki.EMPLOYEE:return"Salariés";case Ki.VISITOR:return"Visiteurs";default:return"Non défini"}}function O(Z){if(Z==null)return"#9CA3AF";switch(Z){case Ki.PRIVATE:return"#9CA3AF";case Ki.COMPANY:return"#EF4444";case Ki.EMPLOYEE:return"#F59E0B";case Ki.VISITOR:return"#10B981";default:return"#6B7280"}}Lo(()=>{console.log("[NotesView] Composant monté"),j().then(()=>{console.log("[NotesView] Données chargées avec succès")}).catch(Z=>{console.error("[NotesView] Erreur lors du chargement des données:",Z),n.error("Erreur lors du chargement des données")}),document.addEventListener("click",K),window.addEventListener("resize",x)});async function j(){var Z;console.log(`
[NotesView][loadInitialData] Début du chargement des données`);try{o.value=!0,console.log("[NotesView][loadInitialData] Chargement des colonnes..."),await r.loadColumns(),console.log("[NotesView][loadInitialData] Colonnes chargées:",r.columns),console.log("[NotesView][loadInitialData] Chargement des notes...");const oe={};!i.isAdmin&&((Z=i.user)!=null&&Z.enterprise_id)&&(oe.enterprise_id=i.user.enterprise_id,console.log(`[NotesView][loadInitialData] Filtrage des notes par entreprise: ${oe.enterprise_id}`));const de=await ka.getNotes(oe);console.log("[NotesView][loadInitialData] Notes reçues:",de.data),de.data.length>0?(console.log("[NotesView][loadInitialData] Détails des notes:"),de.data.forEach((Ae,De)=>{console.log(`Note ${De+1}:`,{id:Ae.id,title:Ae.title,columnId:Ae.column||Ae.column_id,access_level:Ae.access_level,column:Ae.column})})):console.warn("[NotesView][loadInitialData] Aucune note reçue du backend!");const ye=r.columns.map(Ae=>Ae.id),he=de.data.filter(Ae=>{const De=(Ae.column||Ae.column_id||"").toString();return De===""||!ye.includes(De)});if(he.length>0){console.warn(`[NotesView][loadInitialData] ${he.length} notes avec des colonnes invalides:`,he),console.log("[NotesView][loadInitialData] Assignation des notes à la colonne À faire (2)");for(const Ae of he)try{await ka.updateNote(Ae.id,{column:"2"})}catch(De){console.error(`[NotesView][loadInitialData] Erreur lors de l'assignation de la note ${Ae.id} à la colonne À faire:`,De)}}const X=de.data.map(Ae=>({id:Ae.id,title:Ae.title,description:Ae.description,location:Ae.location,columnId:(Ae.column||Ae.column_id||"2").toString(),access_level:Ae.access_level,style:Ae.style||{},comments:Ae.comments||[],photos:Ae.photos||[],order:Ae.order||0,createdAt:Ae.created_at,updatedAt:Ae.updated_at}));r.notes.length=0,X.forEach(Ae=>{r.addNote(Ae)}),console.log("[NotesView][loadInitialData] Notes chargées dans le store");for(const Ae of r.columns){const De=r.getNotesByColumn(Ae.id);console.log(`[NotesView][loadInitialData] Colonne ${Ae.title} (${Ae.id}): ${De.length} notes`),De.length>0&&De.forEach(Xe=>{console.log(`  - Note ID=${Xe.id}, Titre="${Xe.title}", Niveau d'accès=${Xe.accessLevel}, Colonne=${Xe.columnId}`)})}}catch(oe){console.error("[NotesView][loadInitialData] Erreur:",oe),n.error("Erreur lors du chargement des données")}finally{o.value=!1,console.log("[NotesView][loadInitialData] Chargement terminé")}}function J(){e.push({path:"/",query:{tool:"Note"}})}async function U(Z){if(!Z.location){n.warning("Cette note n'est pas géolocalisée");return}try{const de=(await ka.getNote(Z.id)).data,ye=de.plan;console.log("[NotesView][viewOnMap] Détails de la note récupérés:",de),e.push({path:"/",query:{lat:Array.isArray(Z.location)?Z.location[0].toString():Z.location.coordinates[1].toString(),lng:Array.isArray(Z.location)?Z.location[1].toString():Z.location.coordinates[0].toString(),noteId:Z.id.toString(),planId:ye?ye.toString():void 0}})}catch(oe){console.error("[NotesView][viewOnMap] Erreur lors de la récupération des détails de la note:",oe),n.error("Erreur lors de l'ouverture de la note sur la carte")}}function R(Z){if(!Z.location){n.warning("Cette note n'est pas géolocalisée");return}let oe,de;Array.isArray(Z.location)?(oe=Z.location[0],de=Z.location[1]):(oe=Z.location.coordinates[1],de=Z.location.coordinates[0]);const ye=`https://www.google.com/maps/dir/?api=1&destination=${oe},${de}`;window.open(ye,"_blank")}function V(Z){h.value=JSON.parse(JSON.stringify(Z)),p.value="info",l.value=!0}async function $(Z){if(console.log("[NotesView][handleNoteSave] Note sauvegardée:",Z),Z&&Z.id){const oe=r.notes.find(de=>de.id===Z.id);oe&&(!Z.comments&&oe.comments&&(Z.comments=oe.comments),!Z.photos&&oe.photos&&(Z.photos=oe.photos))}if(l.value=!1,v.value&&h.value)try{const oe={location:h.value.location,name:h.value.title,description:h.value.description,columnId:h.value.columnId,accessLevel:h.value.accessLevel,style:h.value.style,comments:h.value.comments||[],photos:h.value.photos||[],order:h.value.order,createdAt:h.value.createdAt,updatedAt:new Date().toISOString()},de=s.elements.findIndex(ye=>{var he;return ye.type_forme==="Note"&&ye.id===((he=h.value)==null?void 0:he.id)});de!==-1?s.elements[de].data=oe:s.elements.push({id:h.value.id,type_forme:"Note",data:oe}),await s.saveToPlan(v.value),n.success("Note sauvegardée et plan mis à jour avec succès")}catch(oe){console.error("Erreur lors de la sauvegarde de la note:",oe),n.error("Erreur lors de la sauvegarde de la note")}}function B(Z){c.value=Z,a.value=!0}async function I(){if(c.value)try{try{await ka.deleteNote(c.value.id)}catch(Z){if(Z.response&&Z.response.status===404)console.log("[NotesView][deleteNote] Note non trouvée dans le backend (404), suppression locale uniquement");else throw Z}r.removeNote(c.value.id),n.success("Note supprimée avec succès")}catch(Z){console.error("Erreur lors de la suppression de la note:",Z),n.error("Erreur lors de la suppression de la note")}finally{a.value=!1,c.value=null}}async function Q(Z,oe){console.log("[NotesView][onDragChange] Événement:",Z),console.log("[NotesView][onDragChange] Colonne cible:",oe);try{if(Z.added){const{element:de}=Z.added;console.log("[NotesView][onDragChange] Note à déplacer:",de);const ye=typeof de=="object"&&de.id?de.id:null;if(!ye)throw console.error("[NotesView][onDragChange] ID de note invalide:",de),new Error("ID de note invalide");r.moveNote(ye,oe);const X=ge.value(oe).map(De=>De.id);r.reorderNotes(oe,X);const Ae=r.getColumnById(oe);n.success(`Note déplacée vers ${(Ae==null?void 0:Ae.title)||"une autre colonne"}`),await G(ye,{columnId:oe})}if(Z.moved){const de=ge.value(oe),ye=de.map(he=>he.id);r.reorderNotes(oe,ye),n.success("Ordre des notes mis à jour");for(const[he,X]of de.entries())await G(X.id,{order:he})}}catch(de){console.error("[NotesView][onDragChange] Erreur:",de),n.error("Une erreur est survenue lors du déplacement de la note")}}async function G(Z,oe){console.log("[NotesView][updateNoteInBackend] Mise à jour de la note:",Z,oe);try{const de=r.notes.find(X=>X.id===Z);if(!de){console.error("[NotesView][updateNoteInBackend] Note non trouvée:",Z);return}const ye={...oe};if(oe.columnId){const X=r.getColumnById(oe.columnId);X?(console.log(`[NotesView][updateNoteInBackend] Mise à jour de la colonne: ${X.id} (${X.title})`),ye.column=X.id,delete ye.columnId,delete ye.column_id):console.warn(`[NotesView][updateNoteInBackend] Colonne non trouvée: ${oe.columnId}`)}const he={...de,...ye,updatedAt:new Date().toISOString()};console.log("[NotesView][updateNoteInBackend] Données envoyées au backend:",he),await ka.updateNote(Z,he),console.log("[NotesView][updateNoteInBackend] Note mise à jour avec succès")}catch(de){throw console.error("[NotesView][updateNoteInBackend] Erreur:",de),de}}function _e(){var Z;h.value={id:"",title:"Nouvelle note",description:"",location:null,columnId:r.getDefaultColumn.id,accessLevel:Ki.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:[],photos:[],enterprise_id:!i.isAdmin&&((Z=i.user)!=null&&Z.enterprise_id)?i.user.enterprise_id:null},l.value=!0,p.value="info"}const ve=Ct(null),qe=Ct(!1);function re(){qe.value=!qe.value}function K(Z){ve.value&&!ve.value.contains(Z.target)&&(qe.value=!1)}return Lo(()=>{document.addEventListener("click",K),window.addEventListener("resize",x)}),kh(()=>{document.removeEventListener("click",K),window.removeEventListener("resize",x)}),(Z,oe)=>{var de,ye;return Ne(),Be("div",BZ,[S("div",RZ,[S("div",FZ,[oe[6]||(oe[6]=S("div",{class:"sm:flex-auto"},[S("h1",{class:"text-2xl font-semibold text-gray-900"},"Notes"),S("p",{class:"mt-2 text-sm text-gray-700"}," Liste de toutes vos notes. ")],-1)),S("div",jZ,[S("div",{class:"relative",ref_key:"dropdownRef",ref:ve},[S("button",{onClick:re,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},oe[5]||(oe[5]=[ri(" Créer "),S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])),qe.value?(Ne(),Be("div",zZ,[S("div",{class:"py-1"},[S("button",{onClick:_e,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note simple "),S("button",{onClick:J,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note géolocalisée ")])])):Zt("",!0)],512)])]),S("div",$Z,[S("div",VZ,[S("div",null,[oe[7]||(oe[7]=S("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),kn(S("input",{type:"text",id:"search","onUpdate:modelValue":oe[0]||(oe[0]=he=>M.search=he),placeholder:"Rechercher par titre ou description...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[zr,M.search]])]),S("div",null,[oe[9]||(oe[9]=S("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),kn(S("select",{id:"date","onUpdate:modelValue":oe[1]||(oe[1]=he=>M.date=he),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},oe[8]||(oe[8]=[S("option",{value:""},"Toutes les dates",-1),S("option",{value:"today"},"Aujourd'hui",-1),S("option",{value:"week"},"Cette semaine",-1),S("option",{value:"month"},"Ce mois",-1)]),512),[[Zi,M.date]])]),S("div",null,[oe[11]||(oe[11]=S("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accès",-1)),kn(S("select",{id:"accessLevel","onUpdate:modelValue":oe[2]||(oe[2]=he=>M.accessLevel=he),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[oe[10]||(oe[10]=S("option",{value:""},"Tous les niveaux",-1)),(Ne(),Be(wn,null,Qn(D,he=>S("option",{key:he.id,value:he.id},kt(he.title),9,UZ)),64))],512),[[Zi,M.accessLevel]])])])]),o.value?(Ne(),Be("div",HZ,oe[12]||(oe[12]=[S("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),S("p",{class:"mt-2 text-sm text-gray-500"},"Chargement des notes...",-1)]))):(Ne(),Be("div",WZ,[ne.value.length===0&&E.value.length===0?(Ne(),Be("div",GZ,oe[13]||(oe[13]=[S("p",{class:"text-sm text-gray-500"},"Aucune note ni colonne trouvée",-1)]))):Zt("",!0),S("div",qZ,[(Ne(!0),Be(wn,null,Qn(E.value,he=>(Ne(),Be("div",{key:he.id,class:"column-wrapper w-80 flex-shrink-0"},[S("div",YZ,[S("div",{class:"p-3 flex items-center justify-between no-select",style:ru({backgroundColor:he.color+"20",borderBottom:"2px solid "+he.color})},[S("div",KZ,[S("h3",{class:"text-sm font-semibold",style:ru({color:he.color})},kt(he.title),5)]),S("div",ZZ,[S("span",XZ,kt(ge.value(he.id).length),1)])],4),S("div",JZ,[S("div",QZ,[yi(Vn(IZ),{list:ge.value(he.id),class:"space-y-2 empty-column-drop-zone",group:"notes","item-key":"id",handle:g.value?null:".note-drag-handle",onChange:X=>Q(X,he.id),animation:150,"ghost-class":"ghost-card","chosen-class":"chosen","drag-class":"dragging",disabled:g.value},{item:Gu(({element:X})=>[S("div",eX,[S("div",tX,[S("div",{class:Ii(["p-3 flex items-center justify-between",{"note-drag-handle cursor-move":!g.value,"no-select":!0}])},[S("div",nX,[g.value?Zt("",!0):(Ne(),Be("svg",rX,oe[14]||(oe[14]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"},null,-1)]))),S("h4",iX,kt(X.title),1)]),S("div",null,[S("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:ru({backgroundColor:O(X.accessLevel)+"20",color:O(X.accessLevel)})},kt(pe(X.accessLevel)||"Non défini"),5)])],2),S("div",sX,[S("p",oX,kt(X.description||"Aucune description"),1)]),S("div",aX,[S("span",lX,kt(X.updatedAt?Y(X.updatedAt):X.createdAt?Y(X.createdAt):"Date non définie"),1),S("div",uX,[X.location?(Ne(),Be("span",cX,oe[15]||(oe[15]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))):(Ne(),Be("span",dX,oe[16]||(oe[16]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]))),X.location?(Ne(),Be(wn,{key:2},[S("button",{onClick:Ae=>R(X),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Ouvrir dans Google Maps"},oe[17]||(oe[17]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),8,hX),S("button",{onClick:Ae=>U(X),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Voir sur la carte"},oe[18]||(oe[18]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)]),8,fX)],64)):Zt("",!0),S("button",{onClick:Ae=>V(X),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Éditer la note"},oe[19]||(oe[19]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,pX),S("button",{onClick:Ae=>B(X),class:"p-1 text-gray-400 hover:text-red-500 focus:outline-none",title:"Supprimer la note"},oe[20]||(oe[20]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,gX)])])])])]),"empty-content":Gu(()=>oe[21]||(oe[21]=[S("div",{class:"p-4 text-center text-gray-400 text-sm italic"}," Aucune note dans cette colonne ",-1)])),_:2},1032,["list","handle","onChange","disabled"])])])])]))),128))])]))]),a.value?(Ne(),Be("div",mX,[S("div",vX,[oe[23]||(oe[23]=S("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),S("div",yX,[oe[22]||(oe[22]=tu('<div class="p-4 md:p-6" data-v-57cf2c11><div class="flex items-start" data-v-57cf2c11><div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100" data-v-57cf2c11><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-57cf2c11><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-57cf2c11></path></svg></div><div class="ml-4 flex-1" data-v-57cf2c11><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title" data-v-57cf2c11> Supprimer la note </h3><div class="mt-2" data-v-57cf2c11><p class="text-sm text-gray-500" data-v-57cf2c11> Êtes-vous sûr de vouloir supprimer cette note ? Cette action est irréversible. </p></div></div></div></div>',1)),S("div",bX,[S("button",{onClick:I,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm"}," Supprimer "),S("button",{onClick:oe[3]||(oe[3]=he=>a.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])])])])):Zt("",!0),l.value?(Ne(),ua(BE,{key:1,note:h.value,"is-new-note":!((de=h.value)!=null&&de.id),location:(ye=h.value)==null?void 0:ye.location,onClose:oe[4]||(oe[4]=he=>l.value=!1),onSave:$},null,8,["note","is-new-note","location"])):Zt("",!0)])}}}),wX=rd(_X,[["__scopeId","data-v-57cf2c11"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Bm(t){return t+.5|0}const hh=(t,e,n)=>Math.max(Math.min(t,n),e);function Pg(t){return hh(Bm(t*2.55),0,255)}function bh(t){return hh(Bm(t*255),0,255)}function Cd(t){return hh(Bm(t/2.55)/100,0,1)}function K5(t){return hh(Bm(t*100),0,100)}const Vu={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Fb=[..."0123456789ABCDEF"],xX=t=>Fb[t&15],LX=t=>Fb[(t&240)>>4]+Fb[t&15],D0=t=>(t&240)>>4===(t&15),SX=t=>D0(t.r)&&D0(t.g)&&D0(t.b)&&D0(t.a);function CX(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Vu[t[1]]*17,g:255&Vu[t[2]]*17,b:255&Vu[t[3]]*17,a:e===5?Vu[t[4]]*17:255}:(e===7||e===9)&&(n={r:Vu[t[1]]<<4|Vu[t[2]],g:Vu[t[3]]<<4|Vu[t[4]],b:Vu[t[5]]<<4|Vu[t[6]],a:e===9?Vu[t[7]]<<4|Vu[t[8]]:255})),n}const EX=(t,e)=>t<255?e(t):"";function PX(t){var e=SX(t)?xX:LX;return t?"#"+e(t.r)+e(t.g)+e(t.b)+EX(t.a,e):void 0}const MX=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function bP(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function kX(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function AX(t,e,n){const r=bP(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function TX(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function G_(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=TX(n,r,i,h,s),l=l*60+.5),[l|0,c||0,a]}function q_(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(bh)}function Y_(t,e,n){return q_(bP,t,e,n)}function DX(t,e,n){return q_(AX,t,e,n)}function NX(t,e,n){return q_(kX,t,e,n)}function _P(t){return(t%360+360)%360}function OX(t){const e=MX.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Pg(+e[5]):bh(+e[5]));const i=_P(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=DX(i,s,o):e[1]==="hsv"?r=NX(i,s,o):r=Y_(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function IX(t,e){var n=G_(t);n[0]=_P(n[0]+e),n=Y_(n),t.r=n[0],t.g=n[1],t.b=n[2]}function BX(t){if(!t)return;const e=G_(t),n=e[0],r=K5(e[1]),i=K5(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Cd(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const Z5={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},X5={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function RX(){const t={},e=Object.keys(X5),n=Object.keys(Z5);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,Z5[s]);s=parseInt(X5[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let N0;function FX(t){N0||(N0=RX(),N0.transparent=[0,0,0,0]);const e=N0[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const jX=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function zX(t){const e=jX.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Pg(o):hh(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Pg(r):hh(r,0,255)),i=255&(e[4]?Pg(i):hh(i,0,255)),s=255&(e[6]?Pg(s):hh(s,0,255)),{r,g:i,b:s,a:n}}}function $X(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Cd(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const b2=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Jf=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function VX(t,e,n){const r=Jf(Cd(t.r)),i=Jf(Cd(t.g)),s=Jf(Cd(t.b));return{r:bh(b2(r+n*(Jf(Cd(e.r))-r))),g:bh(b2(i+n*(Jf(Cd(e.g))-i))),b:bh(b2(s+n*(Jf(Cd(e.b))-s))),a:t.a+n*(e.a-t.a)}}function O0(t,e,n){if(t){let r=G_(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Y_(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function wP(t,e){return t&&Object.assign(e||{},t)}function J5(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=bh(t[3]))):(e=wP(t,{r:0,g:0,b:0,a:1}),e.a=bh(e.a)),e}function UX(t){return t.charAt(0)==="r"?zX(t):OX(t)}class ym{constructor(e){if(e instanceof ym)return e;const n=typeof e;let r;n==="object"?r=J5(e):n==="string"&&(r=CX(e)||FX(e)||UX(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=wP(this._rgb);return e&&(e.a=Cd(e.a)),e}set rgb(e){this._rgb=J5(e)}rgbString(){return this._valid?$X(this._rgb):void 0}hexString(){return this._valid?PX(this._rgb):void 0}hslString(){return this._valid?BX(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=VX(this._rgb,e._rgb,n)),this}clone(){return new ym(this.rgb)}alpha(e){return this._rgb.a=bh(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Bm(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return O0(this._rgb,2,e),this}darken(e){return O0(this._rgb,2,-e),this}saturate(e){return O0(this._rgb,1,e),this}desaturate(e){return O0(this._rgb,1,-e),this}rotate(e){return IX(this._rgb,e),this}}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function wd(){}const HX=(()=>{let t=0;return()=>t++})();function qi(t){return t===null||typeof t>"u"}function to(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Bi(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Oo(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Lu(t,e){return Oo(t)?t:e}function fi(t,e){return typeof t>"u"?e:t}const WX=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,xP=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Os(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function fs(t,e,n,r){let i,s,o;if(to(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(Bi(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function ty(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function ny(t){if(to(t))return t.map(ny);if(Bi(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=ny(t[n[i]]);return e}return t}function LP(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function GX(t,e,n,r){if(!LP(t))return;const i=e[t],s=n[t];Bi(i)&&Bi(s)?bm(i,s,r):e[t]=ny(s)}function bm(t,e,n){const r=to(e)?e:[e],i=r.length;if(!Bi(t))return t;n=n||{};const s=n.merger||GX;let o;for(let a=0;a<i;++a){if(o=r[a],!Bi(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],t,o,n)}return t}function Xg(t,e){return bm(t,e,{merger:qX})}function qX(t,e,n){if(!LP(t))return;const r=e[t],i=n[t];Bi(r)&&Bi(i)?Xg(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ny(i))}const Q5={"":t=>t,x:t=>t.x,y:t=>t.y};function YX(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function KX(t){const e=YX(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Ch(t,e){return(Q5[e]||(Q5[e]=KX(e)))(t)}function K_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const _m=t=>typeof t<"u",Eh=t=>typeof t=="function",e3=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function ZX(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Us=Math.PI,Vs=2*Us,XX=Vs+Us,ry=Number.POSITIVE_INFINITY,JX=Us/180,Qo=Us/2,Yh=Us/4,t3=Us*2/3,fh=Math.log10,Qc=Math.sign;function Jg(t,e,n){return Math.abs(t-e)<n}function n3(t){const e=Math.round(t);t=Jg(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(fh(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function QX(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function Dp(t){return!isNaN(parseFloat(t))&&isFinite(t)}function eJ(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function SP(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function _c(t){return t*(Us/180)}function Z_(t){return t*(180/Us)}function r3(t){if(!Oo(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function CP(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Us&&(s+=Vs),{angle:s,distance:i}}function jb(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function tJ(t,e){return(t-e+XX)%Vs-Us}function Su(t){return(t%Vs+Vs)%Vs}function wm(t,e,n,r){const i=Su(t),s=Su(e),o=Su(n),a=Su(s-i),l=Su(o-i),c=Su(i-s),h=Su(i-o);return i===s||i===o||r&&s===o||a>l&&c<h}function Ta(t,e,n){return Math.max(e,Math.min(n,t))}function nJ(t){return Ta(t,-32768,32767)}function Td(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function X_(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const Dd=(t,e,n,r)=>X_(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),rJ=(t,e,n)=>X_(t,n,r=>t[r][e]>=n);function iJ(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const EP=["push","pop","shift","splice","unshift"];function sJ(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),EP.forEach(n=>{const r="_onData"+K_(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function i3(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(EP.forEach(s=>{delete t[s]}),delete t._chartjs)}function PP(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const MP=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function kP(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,MP.call(window,()=>{r=!1,t.apply(e,n)}))}}function oJ(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const J_=t=>t==="start"?"left":t==="end"?"right":"center",dl=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,aJ=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function AP(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:h,minDefined:p,maxDefined:v}=o.getUserBounds();p&&(i=Ta(Math.min(Dd(a,l,c).lo,n?r:Dd(e,l,o.getPixelForValue(c)).lo),0,r-1)),v?s=Ta(Math.max(Dd(a,o.axis,h,!0).hi+1,n?0:Dd(e,l,o.getPixelForValue(h),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function TP(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const I0=t=>t===0||t===1,s3=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Vs/n)),o3=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Vs/n)+1,Qg={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Qo)+1,easeOutSine:t=>Math.sin(t*Qo),easeInOutSine:t=>-.5*(Math.cos(Us*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>I0(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>I0(t)?t:s3(t,.075,.3),easeOutElastic:t=>I0(t)?t:o3(t,.075,.3),easeInOutElastic(t){return I0(t)?t:t<.5?.5*s3(t*2,.1125,.45):.5+.5*o3(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Qg.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Qg.easeInBounce(t*2)*.5:Qg.easeOutBounce(t*2-1)*.5+.5};function Q_(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function a3(t){return Q_(t)?t:new ym(t)}function _2(t){return Q_(t)?t:new ym(t).saturate(.5).darken(.1).hexString()}const lJ=["x","y","borderWidth","radius","tension"],uJ=["color","borderColor","backgroundColor"];function cJ(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:uJ},numbers:{type:"number",properties:lJ}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function dJ(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const l3=new Map;function hJ(t,e){e=e||{};const n=t+JSON.stringify(e);let r=l3.get(n);return r||(r=new Intl.NumberFormat(t,e),l3.set(n,r)),r}function Rm(t,e,n){return hJ(e,n).format(t)}const DP={values(t){return to(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=fJ(t,n)}const o=fh(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Rm(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(fh(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?DP.numeric.call(this,t,e,n):""}};function fJ(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Gy={formatters:DP};function pJ(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Gy.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const _f=Object.create(null),zb=Object.create(null);function em(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function w2(t,e,n){return typeof e=="string"?bm(em(t,e),n):bm(em(t,""),e)}class gJ{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>_2(i.backgroundColor),this.hoverBorderColor=(r,i)=>_2(i.borderColor),this.hoverColor=(r,i)=>_2(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return w2(this,e,n)}get(e){return em(this,e)}describe(e,n){return w2(zb,e,n)}override(e,n){return w2(_f,e,n)}route(e,n,r,i){const s=em(this,e),o=em(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Bi(l)?Object.assign({},c,l):fi(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Io=new gJ({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[cJ,dJ,pJ]);function mJ(t){return!t||qi(t.size)||qi(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function iy(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function vJ(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,h,p,v;for(l=0;l<a;l++)if(p=n[l],p!=null&&!to(p))o=iy(t,i,s,o,p);else if(to(p))for(c=0,h=p.length;c<h;c++)v=p[c],v!=null&&!to(v)&&(o=iy(t,i,s,o,v));t.restore();const g=s.length/2;if(g>n.length){for(l=0;l<g;l++)delete i[s[l]];s.splice(0,g)}return o}function Kh(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function u3(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function $b(t,e,n,r){NP(t,e,n,r,null)}function NP(t,e,n,r,i){let s,o,a,l,c,h,p,v;const g=e.pointStyle,x=e.rotation,E=e.radius;let D=(x||0)*JX;if(g&&typeof g=="object"&&(s=g.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(D),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(E)||E<=0)){switch(t.beginPath(),g){default:i?t.ellipse(n,r,i/2,E,0,0,Vs):t.arc(n,r,E,0,Vs),t.closePath();break;case"triangle":h=i?i/2:E,t.moveTo(n+Math.sin(D)*h,r-Math.cos(D)*E),D+=t3,t.lineTo(n+Math.sin(D)*h,r-Math.cos(D)*E),D+=t3,t.lineTo(n+Math.sin(D)*h,r-Math.cos(D)*E),t.closePath();break;case"rectRounded":c=E*.516,l=E-c,o=Math.cos(D+Yh)*l,p=Math.cos(D+Yh)*(i?i/2-c:l),a=Math.sin(D+Yh)*l,v=Math.sin(D+Yh)*(i?i/2-c:l),t.arc(n-p,r-a,c,D-Us,D-Qo),t.arc(n+v,r-o,c,D-Qo,D),t.arc(n+p,r+a,c,D,D+Qo),t.arc(n-v,r+o,c,D+Qo,D+Us),t.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*E,h=i?i/2:l,t.rect(n-h,r-l,2*h,2*l);break}D+=Yh;case"rectRot":p=Math.cos(D)*(i?i/2:E),o=Math.cos(D)*E,a=Math.sin(D)*E,v=Math.sin(D)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+v,r-o),t.lineTo(n+p,r+a),t.lineTo(n-v,r+o),t.closePath();break;case"crossRot":D+=Yh;case"cross":p=Math.cos(D)*(i?i/2:E),o=Math.cos(D)*E,a=Math.sin(D)*E,v=Math.sin(D)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o);break;case"star":p=Math.cos(D)*(i?i/2:E),o=Math.cos(D)*E,a=Math.sin(D)*E,v=Math.sin(D)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o),D+=Yh,p=Math.cos(D)*(i?i/2:E),o=Math.cos(D)*E,a=Math.sin(D)*E,v=Math.sin(D)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o);break;case"line":o=i?i/2:Math.cos(D)*E,a=Math.sin(D)*E,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(D)*(i?i/2:E),r+Math.sin(D)*E);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Nd(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function qy(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Yy(t){t.restore()}function yJ(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function bJ(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function _J(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),qi(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function wJ(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function xJ(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function wf(t,e,n,r,i,s={}){const o=to(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,_J(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&xJ(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),qi(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),wJ(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function xm(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Us,Us,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Us,Qo,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Qo,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Qo,!0),t.lineTo(n+o.topLeft,r)}const LJ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,SJ=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function CJ(t,e){const n=(""+t).match(LJ);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const EJ=t=>+t||0;function ew(t,e){const n={},r=Bi(e),i=r?Object.keys(e):e,s=Bi(t)?r?o=>fi(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=EJ(s(o));return n}function OP(t){return ew(t,{top:"y",right:"x",bottom:"y",left:"x"})}function pf(t){return ew(t,["topLeft","topRight","bottomLeft","bottomRight"])}function _l(t){const e=OP(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ba(t,e){t=t||{},e=e||Io.font;let n=fi(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=fi(t.style,e.style);r&&!(""+r).match(SJ)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:fi(t.family,e.family),lineHeight:CJ(fi(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:fi(t.weight,e.weight),string:""};return i.string=mJ(i),i}function Mg(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function PJ(t,e,n){const{min:r,max:i}=t,s=xP(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Ah(t,e){return Object.assign(Object.create(t),e)}function tw(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=FP("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>tw([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return BP(a,l,()=>IJ(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return d3(a).includes(l)},ownKeys(a){return d3(a)},set(a,l,c){const h=a._storage||(a._storage=i());return a[l]=h[l]=c,delete a._keys,!0}})}function Np(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:IP(t,r),setContext:s=>Np(t,s,n,r),override:s=>Np(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return BP(s,o,()=>kJ(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function IP(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Eh(n)?n:()=>n,isIndexable:Eh(r)?r:()=>r}}const MJ=(t,e)=>t?t+K_(e):e,nw=(t,e)=>Bi(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function BP(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=n();return t[e]=r,r}function kJ(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return Eh(a)&&o.isScriptable(e)&&(a=AJ(e,a,t,n)),to(a)&&a.length&&(a=TJ(e,a,t,o.isIndexable)),nw(e,a)&&(a=Np(a,i,s&&s[e],o)),a}function AJ(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),nw(t,l)&&(l=rw(i._scopes,i,t,l)),l}function TJ(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(Bi(e[0])){const l=e,c=i._scopes.filter(h=>h!==l);e=[];for(const h of l){const p=rw(c,i,t,h);e.push(Np(p,s,o&&o[t],a))}}return e}function RP(t,e,n){return Eh(t)?t(e,n):t}const DJ=(t,e)=>t===!0?e:typeof t=="string"?Ch(e,t):void 0;function NJ(t,e,n,r,i){for(const s of e){const o=DJ(n,s);if(o){t.add(o);const a=RP(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function rw(t,e,n,r){const i=e._rootScopes,s=RP(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=c3(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=c3(a,o,s,l,r),l===null)?!1:tw(Array.from(a),[""],i,s,()=>OJ(e,n,r))}function c3(t,e,n,r,i){for(;n;)n=NJ(t,e,n,r,i);return n}function OJ(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return to(i)&&Bi(n)?n:i||{}}function IJ(t,e,n,r){let i;for(const s of e)if(i=FP(MJ(s,t),n),typeof i<"u")return nw(t,i)?rw(n,r,t,i):i}function FP(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function d3(t){let e=t._keys;return e||(e=t._keys=BJ(t._scopes)),e}function BJ(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function jP(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,h;for(a=0,l=r;a<l;++a)c=a+n,h=e[c],o[a]={r:i.parse(Ch(h,s),c)};return o}const RJ=Number.EPSILON||1e-14,Op=(t,e)=>e<t.length&&!t[e].skip&&t[e],zP=t=>t==="x"?"y":"x";function FJ(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=jb(s,i),l=jb(o,s);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const p=r*c,v=r*h;return{previous:{x:s.x-p*(o.x-i.x),y:s.y-p*(o.y-i.y)},next:{x:s.x+v*(o.x-i.x),y:s.y+v*(o.y-i.y)}}}function jJ(t,e,n){const r=t.length;let i,s,o,a,l,c=Op(t,0);for(let h=0;h<r-1;++h)if(l=c,c=Op(t,h+1),!(!l||!c)){if(Jg(e[h],0,RJ)){n[h]=n[h+1]=0;continue}i=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=i*o*e[h],n[h+1]=s*o*e[h])}}function zJ(t,e,n="x"){const r=zP(n),i=t.length;let s,o,a,l=Op(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Op(t,c+1),!a)continue;const h=a[n],p=a[r];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${r}`]=p-s*e[c]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${r}`]=p+s*e[c])}}function $J(t,e="x"){const n=zP(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=Op(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Op(t,o+1),!!l){if(c){const h=c[e]-l[e];i[o]=h!==0?(c[n]-l[n])/h:0}s[o]=a?c?Qc(i[o-1])!==Qc(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}jJ(t,i,s),zJ(t,s,e)}function B0(t,e,n){return Math.max(Math.min(t,n),e)}function VJ(t,e){let n,r,i,s,o,a=Nd(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&Nd(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=B0(i.cp1x,e.left,e.right),i.cp1y=B0(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=B0(i.cp2x,e.left,e.right),i.cp2y=B0(i.cp2y,e.top,e.bottom)))}function UJ(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")$J(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=FJ(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&VJ(t,n)}function iw(){return typeof window<"u"&&typeof document<"u"}function sw(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function sy(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Ky=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function HJ(t,e){return Ky(t).getPropertyValue(e)}const WJ=["top","right","bottom","left"];function gf(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=WJ[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const GJ=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function qJ(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(GJ(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function ef(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Ky(n),s=i.boxSizing==="border-box",o=gf(i,"padding"),a=gf(i,"border","width"),{x:l,y:c,box:h}=qJ(t,n),p=o.left+(h&&a.left),v=o.top+(h&&a.top);let{width:g,height:x}=e;return s&&(g-=o.width+a.width,x-=o.height+a.height),{x:Math.round((l-p)/g*n.width/r),y:Math.round((c-v)/x*n.height/r)}}function YJ(t,e,n){let r,i;if(e===void 0||n===void 0){const s=sw(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Ky(s),l=gf(a,"border","width"),c=gf(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=sy(a.maxWidth,s,"clientWidth"),i=sy(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||ry,maxHeight:i||ry}}const R0=t=>Math.round(t*10)/10;function KJ(t,e,n,r){const i=Ky(t),s=gf(i,"margin"),o=sy(i.maxWidth,t,"clientWidth")||ry,a=sy(i.maxHeight,t,"clientHeight")||ry,l=YJ(t,e,n);let{width:c,height:h}=l;if(i.boxSizing==="content-box"){const v=gf(i,"border","width"),g=gf(i,"padding");c-=g.width+v.width,h-=g.height+v.height}return c=Math.max(0,c-s.width),h=Math.max(0,r?c/r:h-s.height),c=R0(Math.min(c,o,l.maxWidth)),h=R0(Math.min(h,a,l.maxHeight)),c&&!h&&(h=R0(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,c=R0(Math.floor(h*r))),{width:c,height:h}}function h3(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const ZJ=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};iw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function f3(t,e){const n=HJ(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function tf(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function XJ(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function JJ(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=tf(t,i,n),a=tf(i,s,n),l=tf(s,e,n),c=tf(o,a,n),h=tf(a,l,n);return tf(c,h,n)}const QJ=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},eQ=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function xp(t,e,n){return t?QJ(e,n):eQ()}function $P(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function VP(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function UP(t){return t==="angle"?{between:wm,compare:tJ,normalize:Su}:{between:Td,compare:(e,n)=>e-n,normalize:e=>e}}function p3({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function tQ(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=UP(r),l=e.length;let{start:c,end:h,loop:p}=t,v,g;if(p){for(c+=l,h+=l,v=0,g=l;v<g&&o(a(e[c%l][r]),i,s);++v)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:p,style:t.style}}function HP(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=UP(r),{start:h,end:p,loop:v,style:g}=tQ(t,e,n),x=[];let E=!1,D=null,M,A,z;const Y=()=>l(i,z,M)&&a(i,z)!==0,ne=()=>a(s,M)===0||l(s,z,M),ge=()=>E||Y(),pe=()=>!E||ne();for(let O=h,j=h;O<=p;++O)A=e[O%o],!A.skip&&(M=c(A[r]),M!==z&&(E=l(M,i,s),D===null&&ge()&&(D=a(M,i)===0?O:j),D!==null&&pe()&&(x.push(p3({start:D,end:O,loop:v,count:o,style:g})),D=null),j=O,z=M));return D!==null&&x.push(p3({start:D,end:p,loop:v,count:o,style:g})),x}function WP(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=HP(r[i],t.points,e);s.length&&n.push(...s)}return n}function nQ(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function rQ(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function iQ(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=nQ(n,i,s,r);if(r===!0)return g3(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return g3(t,rQ(n,o,l,c),n,e)}function g3(t,e,n,r){return!r||!r.setContext||!n?e:sQ(t,e,n,r)}function sQ(t,e,n,r){const i=t._chart.getContext(),s=m3(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=s,p=e[0].start,v=p;function g(x,E,D,M){const A=a?-1:1;if(x!==E){for(x+=l;n[x%l].skip;)x-=A;for(;n[E%l].skip;)E+=A;x%l!==E%l&&(c.push({start:x%l,end:E%l,loop:D,style:M}),h=M,p=E%l)}}for(const x of e){p=a?p:x.start;let E=n[p%l],D;for(v=p+1;v<=x.end;v++){const M=n[v%l];D=m3(r.setContext(Ah(i,{type:"segment",p0:E,p1:M,p0DataIndex:(v-1)%l,p1DataIndex:v%l,datasetIndex:o}))),oQ(D,h)&&g(p,v-1,x.loop,h),E=M,h=D}p<v-1&&g(p,v-1,x.loop,h)}return c}function m3(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function oQ(t,e){if(!e)return!1;const n=[],r=function(i,s){return Q_(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class aQ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=MP.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var xd=new aQ;const v3="transparent",lQ={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=a3(t||v3),i=r.valid&&a3(e||v3);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class uQ{constructor(e,n,r,i){const s=n[r];i=Mg([e.to,i,s,e.from]);const o=Mg([e.from,s,i]);this._active=!0,this._fn=e.fn||lQ[e.type||typeof o],this._easing=Qg[e.easing]||Qg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Mg([e.to,n,i,e.from]),this._from=Mg([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class GP{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Bi(e))return;const n=Object.keys(Io.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Bi(s))return;const o={};for(const a of n)o[a]=s[a];(to(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=dQ(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&cQ(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const h=n[c];let p=s[c];const v=r.get(c);if(p)if(v&&p.active()){p.update(v,h,a);continue}else p.cancel();if(!v||!v.duration){e[c]=h;continue}s[c]=p=new uQ(v,e,c,h),i.push(p)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return xd.add(this._chart,r),!0}}function cQ(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function dQ(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function y3(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function hQ(t,e,n){if(n===!1)return!1;const r=y3(t,n),i=y3(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function fQ(t){let e,n,r,i;return Bi(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function qP(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function b3(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(r.all)continue;break}c=t.values[l],Oo(c)&&(s||e===0||Qc(e)===Qc(c))&&(e+=c)}return e}}function pQ(t){const e=Object.keys(t),n=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],n[r]={x:s,y:t[s]};return n}function _3(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function gQ(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function mQ(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function vQ(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function w3(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function x3(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,h=gQ(s,o,r),p=e.length;let v;for(let g=0;g<p;++g){const x=e[g],{[l]:E,[c]:D}=x,M=x._stacks||(x._stacks={});v=M[c]=vQ(i,h,E),v[a]=D,v._top=w3(v,o,!0,r.type),v._bottom=w3(v,o,!1,r.type);const A=v._visualValues||(v._visualValues={});A[a]=D}}function x2(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function yQ(t,e){return Ah(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function bQ(t,e,n){return Ah(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function ug(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const L2=t=>t==="reset"||t==="none",L3=(t,e)=>e?t:Object.assign({},t),_Q=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:qP(n,!0),values:null};class xc{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=_3(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ug(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(p,v,g,x)=>p==="x"?v:p==="r"?x:g,s=n.xAxisID=fi(r.xAxisID,x2(e,"x")),o=n.yAxisID=fi(r.yAxisID,x2(e,"y")),a=n.rAxisID=fi(r.rAxisID,x2(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),h=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&i3(this._data,this),e._stacked&&ug(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Bi(n))this._data=pQ(n);else if(r!==n){if(r){i3(r,this);const i=this._cachedMeta;ug(i),i._parsed=[]}n&&Object.isExtensible(n)&&sJ(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=_3(n.vScale,n),n.stack!==r.stack&&(i=!0,ug(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&x3(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],h,p,v;if(this._parsing===!1)r._parsed=i,r._sorted=!0,v=i;else{to(i[e])?v=this.parseArrayData(r,i,e,n):Bi(i[e])?v=this.parseObjectData(r,i,e,n):v=this.parsePrimitiveData(r,i,e,n);const g=()=>p[a]===null||c&&p[a]<c[a];for(h=0;h<n;++h)r._parsed[h+e]=p=v[h],l&&(g()&&(l=!1),c=p);r._sorted=l}o&&x3(this,v)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,p=new Array(i);let v,g,x;for(v=0,g=i;v<g;++v)x=v+r,p[v]={[a]:h||s.parse(c[x],x),[l]:o.parse(n[x],x)};return p}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,h,p;for(l=0,c=i;l<c;++l)h=l+r,p=n[h],a[l]={x:s.parse(p[0],h),y:o.parse(p[1],h)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let h,p,v,g;for(h=0,p=i;h<p;++h)v=h+r,g=n[v],c[h]={x:s.parse(Ch(g,a),v),y:o.parse(Ch(g,l),v)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:qP(i,!0),values:n._stacks[e.axis]._visualValues};return b3(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=b3(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=_Q(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:p}=mQ(a);let v,g;function x(){g=i[v];const E=g[a.axis];return!Oo(g[e.axis])||h>E||p<E}for(v=0;v<o&&!(!x()&&(this.updateRangeFromParsed(c,e,g,l),s));++v);if(s){for(v=o-1;v>=0;--v)if(!x()){this.updateRangeFromParsed(c,e,g,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],Oo(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=fQ(fi(this.options.clip,hQ(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const p=i[h];p.hidden||(p.active&&c?o.push(p):p.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=bQ(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=yQ(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&_m(r);if(a)return L3(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],v=c.getOptionScopes(this.getDataset(),h),g=Object.keys(Io.elements[e]),x=()=>this.getContext(r,i,n),E=c.resolveNamedOptions(v,g,x,p);return E.$shared&&(E.$shared=l,s[o]=Object.freeze(L3(E,l))),E}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const h=this.chart.config,p=h.datasetAnimationScopeKeys(this._type,n),v=h.getOptionScopes(this.getDataset(),p);l=h.createResolver(v,this.getContext(e,r,n))}const c=new GP(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||L2(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){L2(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!L2(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&ug(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Je(xc,"defaults",{}),Je(xc,"datasetElementType",null),Je(xc,"dataElementType",null);function wQ(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=PP(r.sort((i,s)=>i-s))}return t._cache.$bar}function xQ(t){const e=t.iScale,n=wQ(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(_m(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function LQ(t,e,n,r){const i=n.barThickness;let s,o;return qi(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function SQ(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function CQ(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function YP(t,e,n,r){return to(t)?CQ(t,e,n,r):e[n.axis]=n.parse(t,r),e}function S3(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,h,p,v;for(c=n,h=n+r;c<h;++c)v=e[c],p={},p[i.axis]=a||i.parse(o[c],c),l.push(YP(v,p,s,c));return l}function S2(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function EQ(t,e,n){return t!==0?Qc(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function PQ(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function MQ(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=PQ(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=h:(s[C3(h,o,a,l)]=!0,i=c)),s[C3(i,o,a,l)]=!0,t.borderSkipped=s}function C3(t,e,n,r){return r?(t=kQ(t,e,n),t=E3(t,n,e)):t=E3(t,e,n),t}function kQ(t,e,n){return t===e?n:t===n?e:t}function E3(t,e,n){return t==="start"?e:t==="end"?n:t}function AQ(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class pv extends xc{parsePrimitiveData(e,n,r,i){return S3(e,n,r,i)}parseArrayData(e,n,r,i){return S3(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,h=o.axis==="x"?a:l,p=[];let v,g,x,E;for(v=r,g=r+i;v<g;++v)E=n[v],x={},x[s.axis]=s.parse(Ch(E,c),v),p.push(YP(Ch(E,h),x,o,v));return p}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=S2(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:p,includeOptions:v}=this._getSharedOptions(n,i);for(let g=n;g<n+r;g++){const x=this.getParsed(g),E=s||qi(x[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),D=this._calculateBarIndexPixels(g,h),M=(x._stacks||{})[a.axis],A={horizontal:c,base:E.base,enableBorderRadius:!M||S2(x._custom)||o===M._top||o===M._bottom,x:c?E.head:D.center,y:c?D.center:E.head,height:c?D.size:Math.abs(E.size),width:c?Math.abs(E.size):D.size};v&&(A.options=p||this.resolveDataElementOptions(g,e[g].active?"active":i));const z=A.options||e[g].options;MQ(A,z,M,o),AQ(A,z,h.ratio),this.updateElement(e[g],g,A,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=r.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),h=c&&c[l.vScale.axis];if(qi(h)||isNaN(h))return!0};for(const l of i)if(!(n!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||xQ(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,h=S2(c);let p=l[n.axis],v=0,g=r?this.applyStack(n,l,r):p,x,E;g!==p&&(v=g-p,g=p),h&&(p=c.barStart,g=c.barEnd-c.barStart,p!==0&&Qc(p)!==Qc(c.barEnd)&&(v=0),v+=p);const D=!qi(s)&&!h?s:v;let M=n.getPixelForValue(D);if(this.chart.getDataVisibility(e)?x=n.getPixelForValue(v+g):x=M,E=x-M,Math.abs(E)<o){E=EQ(E,n,a)*o,p===a&&(M-=E/2);const A=n.getPixelForDecimal(0),z=n.getPixelForDecimal(1),Y=Math.min(A,z),ne=Math.max(A,z);M=Math.max(Math.min(M,ne),Y),x=M+E,r&&!h&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(x)-n.getValueForPixel(M))}if(M===n.getPixelForValue(a)){const A=Qc(E)*n.getLineWidthForValue(a)/2;M+=A,E-=A}return{size:E,base:M,head:x,center:x+E/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=fi(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,h=i.barThickness==="flex"?SQ(e,n,i,c):LQ(e,n,i,c),p=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=h.start+h.chunk*p+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&r[s].draw(this._ctx)}}Je(pv,"id","bar"),Je(pv,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Je(pv,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class gv extends xc{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,i){const s=super.parsePrimitiveData(e,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,n,r,i){const s=super.parseArrayData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=fi(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,n,r,i){const s=super.parseObjectData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=fi(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),h=o.axis,p=a.axis;for(let v=n;v<n+r;v++){const g=e[v],x=!s&&this.getParsed(v),E={},D=E[h]=s?o.getPixelForDecimal(.5):o.getPixelForValue(x[h]),M=E[p]=s?a.getBasePixel():a.getPixelForValue(x[p]);E.skip=isNaN(D)||isNaN(M),c&&(E.options=l||this.resolveDataElementOptions(v,g.active?"active":i),s&&(E.options.radius=0)),this.updateElement(g,v,E,i)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=fi(r&&r._custom,s),i}}Je(gv,"id","bubble"),Je(gv,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Je(gv,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function TQ(t,e,n){let r=1,i=1,s=0,o=0;if(e<Vs){const a=t,l=a+e,c=Math.cos(a),h=Math.sin(a),p=Math.cos(l),v=Math.sin(l),g=(z,Y,ne)=>wm(z,a,l,!0)?1:Math.max(Y,Y*n,ne,ne*n),x=(z,Y,ne)=>wm(z,a,l,!0)?-1:Math.min(Y,Y*n,ne,ne*n),E=g(0,c,p),D=g(Qo,h,v),M=x(Us,c,p),A=x(Us+Qo,h,v);r=(E-M)/2,i=(D-A)/2,s=-(E+M)/2,o=-(D+A)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class af extends xc{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(Bi(r[e])){const{key:l="value"}=this._parsing;s=c=>+Ch(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return _c(this.options.rotation-90)}_getCircumference(){return _c(this.options.circumference)}_getRotationExtents(){let e=Vs,n=-Vs;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(WX(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:p}=this._getRotationExtents(),{ratioX:v,ratioY:g,offsetX:x,offsetY:E}=TQ(p,h,l),D=(r.width-o)/v,M=(r.height-o)/g,A=Math.max(Math.min(D,M)/2,0),z=xP(this.options.radius,A),Y=Math.max(z*l,0),ne=(z-Y)/this._getVisibleDatasetWeightTotal();this.offsetX=x*z,this.offsetY=E*z,i.total=this.calculateTotal(),this.outerRadius=z-ne*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-ne*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/Vs)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,h=(a.left+a.right)/2,p=(a.top+a.bottom)/2,v=s&&c.animateScale,g=v?0:this.innerRadius,x=v?0:this.outerRadius,{sharedOptions:E,includeOptions:D}=this._getSharedOptions(n,i);let M=this._getRotation(),A;for(A=0;A<n;++A)M+=this._circumference(A,s);for(A=n;A<n+r;++A){const z=this._circumference(A,s),Y=e[A],ne={x:h+this.offsetX,y:p+this.offsetY,startAngle:M,endAngle:M+z,circumference:z,outerRadius:x,innerRadius:g};D&&(ne.options=E||this.resolveDataElementOptions(A,Y.active?"active":i)),M+=z,this.updateElement(Y,A,ne,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Vs*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Rm(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(fi(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Je(af,"id","doughnut"),Je(af,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Je(af,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Je(af,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class mv extends xc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=AP(n,i,o);this._drawStart=a,this._drawCount=l,TP(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:p}=this._getSharedOptions(n,i),v=o.axis,g=a.axis,{spanGaps:x,segment:E}=this.options,D=Dp(x)?x:Number.POSITIVE_INFINITY,M=this.chart._animationsDisabled||s||i==="none",A=n+r,z=e.length;let Y=n>0&&this.getParsed(n-1);for(let ne=0;ne<z;++ne){const ge=e[ne],pe=M?ge:{};if(ne<n||ne>=A){pe.skip=!0;continue}const O=this.getParsed(ne),j=qi(O[g]),J=pe[v]=o.getPixelForValue(O[v],ne),U=pe[g]=s||j?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,O,l):O[g],ne);pe.skip=isNaN(J)||isNaN(U)||j,pe.stop=ne>0&&Math.abs(O[v]-Y[v])>D,E&&(pe.parsed=O,pe.raw=c.data[ne]),p&&(pe.options=h||this.resolveDataElementOptions(ne,ge.active?"active":i)),M||this.updateElement(ge,ne,pe,i),Y=O}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Je(mv,"id","line"),Je(mv,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Je(mv,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class tm extends xc{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Rm(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return jP.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,p=c.yCenter,v=c.getIndexAngle(0)-.5*Us;let g=v,x;const E=360/this.countVisibleElements();for(x=0;x<n;++x)g+=this._computeAngle(x,i,E);for(x=n;x<n+r;x++){const D=e[x];let M=g,A=g+this._computeAngle(x,i,E),z=o.getDataVisibility(x)?c.getDistanceFromCenterForValue(this.getParsed(x).r):0;g=A,s&&(l.animateScale&&(z=0),l.animateRotate&&(M=A=v));const Y={x:h,y:p,innerRadius:0,outerRadius:z,startAngle:M,endAngle:A,options:this.resolveDataElementOptions(x,D.active?"active":i)};this.updateElement(D,x,Y,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?_c(this.resolveDataElementOptions(e,n).angle||r):0}}Je(tm,"id","polarArea"),Je(tm,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Je(tm,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Vb extends af{}Je(Vb,"id","pie"),Je(Vb,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class vv extends xc{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return jP.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),h=s.getPointPositionForValue(a,this.getParsed(a).r),p=o?s.xCenter:h.x,v=o?s.yCenter:h.y,g={x:p,y:v,angle:h.angle,skip:isNaN(p)||isNaN(v),options:c};this.updateElement(l,a,g,i)}}}Je(vv,"id","radar"),Je(vv,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Je(vv,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class yv extends xc{getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=AP(n,r,i);if(this._drawStart=s,this._drawCount=o,TP(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,h=this.resolveDataElementOptions(n,i),p=this.getSharedOptions(h),v=this.includeOptions(i,p),g=o.axis,x=a.axis,{spanGaps:E,segment:D}=this.options,M=Dp(E)?E:Number.POSITIVE_INFINITY,A=this.chart._animationsDisabled||s||i==="none";let z=n>0&&this.getParsed(n-1);for(let Y=n;Y<n+r;++Y){const ne=e[Y],ge=this.getParsed(Y),pe=A?ne:{},O=qi(ge[x]),j=pe[g]=o.getPixelForValue(ge[g],Y),J=pe[x]=s||O?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,ge,l):ge[x],Y);pe.skip=isNaN(j)||isNaN(J)||O,pe.stop=Y>0&&Math.abs(ge[g]-z[g])>M,D&&(pe.parsed=ge,pe.raw=c.data[Y]),v&&(pe.options=p||this.resolveDataElementOptions(Y,ne.active?"active":i)),A||this.updateElement(ne,Y,pe,i),z=ge}this.updateSharedOptions(p,i,h)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}Je(yv,"id","scatter"),Je(yv,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Je(yv,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var DQ=Object.freeze({__proto__:null,BarController:pv,BubbleController:gv,DoughnutController:af,LineController:mv,PieController:Vb,PolarAreaController:tm,RadarController:vv,ScatterController:yv});function Zh(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ow{constructor(e){Je(this,"options");this.options=e||{}}static override(e){Object.assign(ow.prototype,e)}init(){}formats(){return Zh()}parse(){return Zh()}format(){return Zh()}add(){return Zh()}diff(){return Zh()}startOf(){return Zh()}endOf(){return Zh()}}var KP={_date:ow};function NQ(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?rJ:Dd;if(r){if(i._sharedOptions){const c=s[0],h=typeof c.getRange=="function"&&c.getRange(e);if(h){const p=l(s,e,n-h),v=l(s,e,n+h);return{lo:p.lo,hi:v.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function Zy(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:p,hi:v}=NQ(s[a],e,o,i);for(let g=p;g<=v;++g){const x=h[g];x.skip||r(x,c,g)}}}function OQ(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function C2(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||Zy(t,n,e,function(a,l,c){!i&&!Nd(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function IQ(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:p}=CP(o,{x:e.x,y:e.y});wm(p,c,h)&&i.push({element:o,datasetIndex:a,index:l})}return Zy(t,n,e,s),i}function BQ(t,e,n,r,i,s){let o=[];const a=OQ(n);let l=Number.POSITIVE_INFINITY;function c(h,p,v){const g=h.inRange(e.x,e.y,i);if(r&&!g)return;const x=h.getCenterPoint(i);if(!(!!s||t.isPointInArea(x))&&!g)return;const D=a(e,x);D<l?(o=[{element:h,datasetIndex:p,index:v}],l=D):D===l&&o.push({element:h,datasetIndex:p,index:v})}return Zy(t,n,e,c),o}function E2(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?IQ(t,e,n,i):BQ(t,e,n,r,i,s)}function P3(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Zy(t,n,e,(l,c,h)=>{l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var RQ={modes:{index(t,e,n,r){const i=ef(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?C2(t,i,s,r,o):E2(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,p=c.data[h];p&&!p.skip&&l.push({element:p,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,r){const i=ef(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?C2(t,i,s,r,o):E2(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,r){const i=ef(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return C2(t,i,s,r,o)},nearest(t,e,n,r){const i=ef(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return E2(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=ef(e,t);return P3(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=ef(e,t);return P3(t,i,"y",n.intersect,r)}}};const ZP=["left","top","right","bottom"];function cg(t,e){return t.filter(n=>n.pos===e)}function M3(t,e){return t.filter(n=>ZP.indexOf(n.pos)===-1&&n.box.axis===e)}function dg(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function FQ(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function jQ(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!ZP.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function zQ(t,e){const n=jQ(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=h?h*i:l&&e.availableHeight)}return n}function $Q(t){const e=FQ(t),n=dg(e.filter(c=>c.box.fullSize),!0),r=dg(cg(e,"left"),!0),i=dg(cg(e,"right")),s=dg(cg(e,"top"),!0),o=dg(cg(e,"bottom")),a=M3(e,"x"),l=M3(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:cg(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function k3(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function XP(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function VQ(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!Bi(i)){n.size&&(t[i]-=n.size);const p=r[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?s.height:s.width),n.size=p.size/p.count,t[i]+=n.size}s.getPadding&&XP(o,s.getPadding());const a=Math.max(0,e.outerWidth-k3(o,t,"left","right")),l=Math.max(0,e.outerHeight-k3(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function UQ(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function HQ(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function kg(t,e,n,r){const i=[];let s,o,a,l,c,h;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,HQ(a.horizontal,e));const{same:p,other:v}=VQ(e,n,a,r);c|=p&&i.length,h=h||v,l.fullSize||i.push(a)}return c&&kg(i,e,n,r)||h}function F0(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function A3(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const p=e.w*h,v=c.size||l.height;_m(c.start)&&(o=c.start),l.fullSize?F0(l,i.left,o,n.outerWidth-i.right-i.left,v):F0(l,e.left+c.placed,o,p,v),c.start=o,c.placed+=p,o=l.bottom}else{const p=e.h*h,v=c.size||l.width;_m(c.start)&&(s=c.start),l.fullSize?F0(l,s,i.top,v,n.outerHeight-i.bottom-i.top):F0(l,s,e.top+c.placed,v,p),c.start=s,c.placed+=p,s=l.right}}e.x=s,e.y=o}var bl={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=_l(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=$Q(t.boxes),l=a.vertical,c=a.horizontal;fs(t.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const h=l.reduce((E,D)=>D.box.options&&D.box.options.display===!1?E:E+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),v=Object.assign({},i);XP(v,_l(r));const g=Object.assign({maxPadding:v,w:s,h:o,x:i.left,y:i.top},i),x=zQ(l.concat(c),p);kg(a.fullSize,g,p,x),kg(l,g,p,x),kg(c,g,p,x)&&kg(l,g,p,x),UQ(g),A3(a.leftAndTop,g,p,x),g.x+=g.w,g.y+=g.h,A3(a.rightAndBottom,g,p,x),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},fs(a.chartArea,E=>{const D=E.box;Object.assign(D,t.chartArea),D.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class JP{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class WQ extends JP{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const bv="$chartjs",GQ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},T3=t=>t===null||t==="";function qQ(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[bv]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",T3(i)){const s=f3(t,"width");s!==void 0&&(t.width=s)}if(T3(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=f3(t,"height");s!==void 0&&(t.height=s)}return t}const QP=ZJ?{passive:!0}:!1;function YQ(t,e,n){t.addEventListener(e,n,QP)}function KQ(t,e,n){t.canvas.removeEventListener(e,n,QP)}function ZQ(t,e){const n=GQ[t.type]||t.type,{x:r,y:i}=ef(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function oy(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function XQ(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||oy(a.addedNodes,r),o=o&&!oy(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function JQ(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||oy(a.removedNodes,r),o=o&&!oy(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Lm=new Map;let D3=0;function eM(){const t=window.devicePixelRatio;t!==D3&&(D3=t,Lm.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function QQ(t,e){Lm.size||window.addEventListener("resize",eM),Lm.set(t,e)}function eee(t){Lm.delete(t),Lm.size||window.removeEventListener("resize",eM)}function tee(t,e,n){const r=t.canvas,i=r&&sw(r);if(!i)return;const s=kP((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(i),QQ(t,s),o}function P2(t,e,n){n&&n.disconnect(),e==="resize"&&eee(t)}function nee(t,e,n){const r=t.canvas,i=kP(s=>{t.ctx!==null&&n(ZQ(s,t))},t);return YQ(r,e,i),i}class ree extends JP{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(qQ(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[bv])return!1;const r=n[bv].initial;["height","width"].forEach(s=>{const o=r[s];qi(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[bv],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:XQ,detach:JQ,resize:tee}[n]||nee;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:P2,detach:P2,resize:P2}[n]||KQ)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return KJ(e,n,r,i)}isAttached(e){const n=sw(e);return!!(n&&n.isConnected)}}function iee(t){return!iw()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?WQ:ree}var q0;let zd=(q0=class{constructor(){Je(this,"x");Je(this,"y");Je(this,"active",!1);Je(this,"options");Je(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Dp(this.x)&&Dp(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},Je(q0,"defaults",{}),Je(q0,"defaultRoutes"),q0);function see(t,e){const n=t.options.ticks,r=oee(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?lee(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return uee(e,c,s,o/i),c;const h=aee(s,e,i);if(o>0){let p,v;const g=o>1?Math.round((l-a)/(o-1)):null;for(j0(e,c,h,qi(g)?0:a-g,a),p=0,v=o-1;p<v;p++)j0(e,c,h,s[p],s[p+1]);return j0(e,c,h,l,qi(g)?e.length:l+g),c}return j0(e,c,h),c}function oee(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function aee(t,e,n){const r=cee(t),i=e.length/n;if(!r)return Math.max(i,1);const s=QX(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function lee(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function uee(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function j0(t,e,n,r,i){const s=fi(r,0),o=Math.min(fi(i,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(s+a*n))}function cee(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const dee=t=>t==="left"?"right":t==="right"?"left":t,N3=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,O3=(t,e)=>Math.min(e||t,t);function I3(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function hee(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function fee(t,e){fs(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function hg(t){return t.drawTicks?t.tickLength:0}function B3(t,e){if(!t.display)return 0;const n=ba(t.font,e),r=_l(t.padding);return(to(t.text)?t.text.length:1)*n.lineHeight+r.height}function pee(t,e){return Ah(t,{scale:e,type:"scale"})}function gee(t,e,n){return Ah(t,{tick:n,index:e,type:"tick"})}function mee(t,e,n){let r=J_(t);return(n&&e!=="right"||!n&&e==="right")&&(r=dee(r)),r}function vee(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let p=0,v,g,x;const E=o-i,D=a-s;if(t.isHorizontal()){if(g=dl(r,s,a),Bi(n)){const M=Object.keys(n)[0],A=n[M];x=h[M].getPixelForValue(A)+E-e}else n==="center"?x=(c.bottom+c.top)/2+E-e:x=N3(t,n,e);v=a-s}else{if(Bi(n)){const M=Object.keys(n)[0],A=n[M];g=h[M].getPixelForValue(A)-D+e}else n==="center"?g=(c.left+c.right)/2-D+e:g=N3(t,n,e);x=dl(r,o,i),p=n==="left"?-Qo:Qo}return{titleX:g,titleY:x,maxWidth:v,rotation:p}}class Cf extends zd{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=Lu(e,Number.POSITIVE_INFINITY),n=Lu(n,Number.NEGATIVE_INFINITY),r=Lu(r,Number.POSITIVE_INFINITY),i=Lu(i,Number.NEGATIVE_INFINITY),{min:Lu(e,r),max:Lu(n,i),minDefined:Oo(e),maxDefined:Oo(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Lu(n,Lu(r,n)),max:Lu(r,Lu(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Os(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=PJ(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?I3(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=see(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Os(this.options.afterUpdate,[this])}beforeSetDimensions(){Os(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Os(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Os(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Os(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Os(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Os(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Os(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=O3(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),p=h.widest.width,v=h.highest.height,g=Ta(this.chart.width-p,0,this.maxWidth);a=e.offset?this.maxWidth/r:g/(r-1),p+6>a&&(a=g/(r-(e.offset?.5:1)),l=this.maxHeight-hg(e.grid)-n.padding-B3(e.title,this.chart.options.font),c=Math.sqrt(p*p+v*v),o=Z_(Math.min(Math.asin(Ta((h.highest.height+6)/a,-1,1)),Math.asin(Ta(l/c,-1,1))-Math.asin(Ta(v/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Os(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Os(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=B3(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=hg(s)+l):(e.height=this.maxHeight,e.width=hg(s)+l),r.display&&this.ticks.length){const{first:c,last:h,widest:p,highest:v}=this._getLabelSizes(),g=r.padding*2,x=_c(this.labelRotation),E=Math.cos(x),D=Math.sin(x);if(a){const M=r.mirror?0:D*p.width+E*v.height;e.height=Math.min(this.maxHeight,e.height+M+g)}else{const M=r.mirror?0:E*p.width+D*v.height;e.width=Math.min(this.maxWidth,e.width+M+g)}this._calculatePadding(c,h,D,E)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,g=0;l?c?(v=i*e.width,g=r*n.height):(v=r*e.height,g=i*n.width):s==="start"?g=n.width:s==="end"?v=e.width:s!=="inner"&&(v=e.width/2,g=n.width/2),this.paddingLeft=Math.max((v-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-p+o)*this.width/(this.width-p),0)}else{let h=n.height/2,p=e.height/2;s==="start"?(h=0,p=e.height):s==="end"&&(h=n.height,p=0),this.paddingTop=h+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Os(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)qi(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=I3(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/O3(n,r));let c=0,h=0,p,v,g,x,E,D,M,A,z,Y,ne;for(p=0;p<n;p+=l){if(x=e[p].label,E=this._resolveTickFontOptions(p),i.font=D=E.string,M=s[D]=s[D]||{data:{},gc:[]},A=E.lineHeight,z=Y=0,!qi(x)&&!to(x))z=iy(i,M.data,M.gc,z,x),Y=A;else if(to(x))for(v=0,g=x.length;v<g;++v)ne=x[v],!qi(ne)&&!to(ne)&&(z=iy(i,M.data,M.gc,z,ne),Y+=A);o.push(z),a.push(Y),c=Math.max(z,c),h=Math.max(Y,h)}fee(s,n);const ge=o.indexOf(c),pe=a.indexOf(h),O=j=>({width:o[j]||0,height:a[j]||0});return{first:O(0),last:O(n-1),widest:O(ge),highest:O(pe),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return nJ(this._alignToPixels?Kh(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=gee(this.getContext(),e,r))}return this.$context||(this.$context=pee(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=_c(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),p=this.ticks.length+(l?1:0),v=hg(s),g=[],x=a.setContext(this.getContext()),E=x.display?x.width:0,D=E/2,M=function(I){return Kh(r,I,E)};let A,z,Y,ne,ge,pe,O,j,J,U,R,V;if(o==="top")A=M(this.bottom),pe=this.bottom-v,j=A-D,U=M(e.top)+D,V=e.bottom;else if(o==="bottom")A=M(this.top),U=e.top,V=M(e.bottom)-D,pe=A+D,j=this.top+v;else if(o==="left")A=M(this.right),ge=this.right-v,O=A-D,J=M(e.left)+D,R=e.right;else if(o==="right")A=M(this.left),J=e.left,R=M(e.right)-D,ge=A+D,O=this.left+v;else if(n==="x"){if(o==="center")A=M((e.top+e.bottom)/2+.5);else if(Bi(o)){const I=Object.keys(o)[0],Q=o[I];A=M(this.chart.scales[I].getPixelForValue(Q))}U=e.top,V=e.bottom,pe=A+D,j=pe+v}else if(n==="y"){if(o==="center")A=M((e.left+e.right)/2);else if(Bi(o)){const I=Object.keys(o)[0],Q=o[I];A=M(this.chart.scales[I].getPixelForValue(Q))}ge=A-D,O=ge-v,J=e.left,R=e.right}const $=fi(i.ticks.maxTicksLimit,p),B=Math.max(1,Math.ceil(p/$));for(z=0;z<p;z+=B){const I=this.getContext(z),Q=s.setContext(I),G=a.setContext(I),_e=Q.lineWidth,ve=Q.color,qe=G.dash||[],re=G.dashOffset,K=Q.tickWidth,Z=Q.tickColor,oe=Q.tickBorderDash||[],de=Q.tickBorderDashOffset;Y=hee(this,z,l),Y!==void 0&&(ne=Kh(r,Y,_e),c?ge=O=J=R=ne:pe=j=U=V=ne,g.push({tx1:ge,ty1:pe,tx2:O,ty2:j,x1:J,y1:U,x2:R,y2:V,width:_e,color:ve,borderDash:qe,borderDashOffset:re,tickWidth:K,tickColor:Z,tickBorderDash:oe,tickBorderDashOffset:de}))}return this._ticksLength=p,this._borderValue=A,g}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:p}=s,v=hg(r.grid),g=v+h,x=p?-h:g,E=-_c(this.labelRotation),D=[];let M,A,z,Y,ne,ge,pe,O,j,J,U,R,V="middle";if(i==="top")ge=this.bottom-x,pe=this._getXAxisLabelAlignment();else if(i==="bottom")ge=this.top+x,pe=this._getXAxisLabelAlignment();else if(i==="left"){const B=this._getYAxisLabelAlignment(v);pe=B.textAlign,ne=B.x}else if(i==="right"){const B=this._getYAxisLabelAlignment(v);pe=B.textAlign,ne=B.x}else if(n==="x"){if(i==="center")ge=(e.top+e.bottom)/2+g;else if(Bi(i)){const B=Object.keys(i)[0],I=i[B];ge=this.chart.scales[B].getPixelForValue(I)+g}pe=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")ne=(e.left+e.right)/2-g;else if(Bi(i)){const B=Object.keys(i)[0],I=i[B];ne=this.chart.scales[B].getPixelForValue(I)}pe=this._getYAxisLabelAlignment(v).textAlign}n==="y"&&(l==="start"?V="top":l==="end"&&(V="bottom"));const $=this._getLabelSizes();for(M=0,A=a.length;M<A;++M){z=a[M],Y=z.label;const B=s.setContext(this.getContext(M));O=this.getPixelForTick(M)+s.labelOffset,j=this._resolveTickFontOptions(M),J=j.lineHeight,U=to(Y)?Y.length:1;const I=U/2,Q=B.color,G=B.textStrokeColor,_e=B.textStrokeWidth;let ve=pe;o?(ne=O,pe==="inner"&&(M===A-1?ve=this.options.reverse?"left":"right":M===0?ve=this.options.reverse?"right":"left":ve="center"),i==="top"?c==="near"||E!==0?R=-U*J+J/2:c==="center"?R=-$.highest.height/2-I*J+J:R=-$.highest.height+J/2:c==="near"||E!==0?R=J/2:c==="center"?R=$.highest.height/2-I*J:R=$.highest.height-U*J,p&&(R*=-1),E!==0&&!B.showLabelBackdrop&&(ne+=J/2*Math.sin(E))):(ge=O,R=(1-U)*J/2);let qe;if(B.showLabelBackdrop){const re=_l(B.backdropPadding),K=$.heights[M],Z=$.widths[M];let oe=R-re.top,de=0-re.left;switch(V){case"middle":oe-=K/2;break;case"bottom":oe-=K;break}switch(pe){case"center":de-=Z/2;break;case"right":de-=Z;break;case"inner":M===A-1?de-=Z:M>0&&(de-=Z/2);break}qe={left:de,top:oe,width:Z+re.width,height:K+re.height,color:B.backdropColor}}D.push({label:Y,font:j,textOffset:R,options:{rotation:E,color:Q,strokeColor:G,strokeWidth:_e,textAlign:ve,textBaseline:V,translation:[ne,ge],backdrop:qe}})}return D}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-_c(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,h;return n==="left"?i?(h=this.right+s,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?i?(h=this.left+s,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,p,v;this.isHorizontal()?(c=Kh(e,this.left,o)-o/2,h=Kh(e,this.right,a)+a/2,p=v=l):(p=Kh(e,this.top,o)-o/2,v=Kh(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,p),n.lineTo(h,v),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&qy(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;wf(r,c,0,h,l,a)}i&&Yy(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=ba(r.font),o=_l(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Bi(n)?(l+=o.bottom,to(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:p,rotation:v}=vee(this,l,n,a);wf(e,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:v,textAlign:mee(a,n,i),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=fi(e.grid&&e.grid.z,-1),i=fi(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Cf.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return ba(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class z0{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;_ee(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,yee(e,o,r),this.override&&Io.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Io[i]&&(delete Io[i][r],this.override&&delete _f[r])}}function yee(t,e,n){const r=bm(Object.create(null),[n?Io.get(n):{},Io.get(e),t.defaults]);Io.set(e,r),t.defaultRoutes&&bee(e,t.defaultRoutes),t.descriptors&&Io.describe(e,t.descriptors)}function bee(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Io.route(s,i,l,a)})}function _ee(t){return"id"in t&&"defaults"in t}class wee{constructor(){this.controllers=new z0(xc,"datasets",!0),this.elements=new z0(zd,"elements"),this.plugins=new z0(Object,"plugins"),this.scales=new z0(Cf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):fs(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=K_(e);Os(r["before"+i],[],r),n[e](r),Os(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Vc=new wee;class xee{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(Os(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){qi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=fi(r.options&&r.options.plugins,{}),s=Lee(r);return i===!1&&!n?[]:Cee(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function Lee(t){const e={},n=[],r=Object.keys(Vc.plugins.items);for(let s=0;s<r.length;s++)n.push(Vc.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function See(t,e){return!e&&t===!1?null:t===!0?{}:t}function Cee(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=See(r[l],i);c!==null&&s.push({plugin:a,options:Eee(t.config,{plugin:a,local:n[l]},c,o)})}return s}function Eee(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ub(t,e){const n=Io.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Pee(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Mee(t,e){return t===e?"_index_":"_value_"}function R3(t){if(t==="x"||t==="y"||t==="r")return t}function kee(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Hb(t,...e){if(R3(t))return t;for(const n of e){const r=n.axis||kee(n.position)||t.length>1&&R3(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function F3(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Aee(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return F3(t,"x",n[0])||F3(t,"y",n[0])}return{}}function Tee(t,e){const n=_f[t.type]||{scales:{}},r=e.scales||{},i=Ub(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Bi(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Hb(o,a,Aee(o,t),Io.scales[a.type]),c=Mee(l,i),h=n.scales||{};s[o]=Xg(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Ub(a,e),h=(_f[a]||{}).scales||{};Object.keys(h).forEach(p=>{const v=Pee(p,l),g=o[v+"AxisID"]||v;s[g]=s[g]||Object.create(null),Xg(s[g],[{axis:v},r[g],h[p]])})}),Object.keys(s).forEach(o=>{const a=s[o];Xg(a,[Io.scales[a.type],Io.scale])}),s}function tM(t){const e=t.options||(t.options={});e.plugins=fi(e.plugins,{}),e.scales=Tee(t,e)}function nM(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Dee(t){return t=t||{},t.data=nM(t.data),tM(t),t}const j3=new Map,rM=new Set;function $0(t,e){let n=j3.get(t);return n||(n=e(),j3.set(t,n),rM.add(n)),n}const fg=(t,e,n)=>{const r=Ch(e,n);r!==void 0&&t.add(r)};class Nee{constructor(e){this._config=Dee(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=nM(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),tM(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return $0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return $0(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return $0(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return $0(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(p=>fg(l,e,p))),h.forEach(p=>fg(l,i,p)),h.forEach(p=>fg(l,_f[s]||{},p)),h.forEach(p=>fg(l,Io,p)),h.forEach(p=>fg(l,zb,p))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),rM.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,_f[n]||{},Io.datasets[n]||{},{type:n},Io,zb]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=z3(this._resolverCache,e,i);let l=o;if(Iee(o,n)){s.$shared=!1,r=Eh(r)?r():r;const c=this.createResolver(e,r,a);l=Np(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=z3(this._resolverCache,e,r);return Bi(n)?Np(s,n,void 0,i):s}}function z3(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:tw(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const Oee=t=>Bi(t)&&Object.getOwnPropertyNames(t).some(e=>Eh(t[e]));function Iee(t,e){const{isScriptable:n,isIndexable:r}=IP(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(Eh(a)||Oee(a))||o&&to(a))return!0}return!1}var Bee="4.4.1";const Ree=["top","bottom","left","right","chartArea"];function $3(t,e){return t==="top"||t==="bottom"||Ree.indexOf(t)===-1&&e==="x"}function V3(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function U3(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Os(n&&n.onComplete,[t],e)}function Fee(t){const e=t.chart,n=e.options.animation;Os(n&&n.onProgress,[t],e)}function iM(t){return iw()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const _v={},H3=t=>{const e=iM(t);return Object.values(_v).filter(n=>n.canvas===e).pop()};function jee(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function zee(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function V0(t,e,n){return t.options.clip?t[n]:e[n]}function $ee(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:V0(n,e,"left"),right:V0(n,e,"right"),top:V0(r,e,"top"),bottom:V0(r,e,"bottom")}:e}class Wc{static register(...e){Vc.add(...e),W3()}static unregister(...e){Vc.remove(...e),W3()}constructor(e,n){const r=this.config=new Nee(n),i=iM(e),s=H3(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||iee(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=HX(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new xee,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=oJ(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],_v[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}xd.listen(this,"complete",U3),xd.listen(this,"progress",Fee),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return qi(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Vc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():h3(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return u3(this.canvas,this.ctx),this}stop(){return xd.stop(this),this}resize(e,n){xd.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,h3(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Os(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};fs(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Hb(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),fs(s,o=>{const a=o.options,l=a.id,c=Hb(l,a),h=fi(a.type,o.dtype);(a.position===void 0||$3(a.position,c)!==$3(o.dposition))&&(a.position=o.dposition),i[l]=!0;let p=null;if(l in r&&r[l].type===h)p=r[l];else{const v=Vc.getScale(h);p=new v({id:l,type:h,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(a,e)}),fs(i,(o,a)=>{o||delete r[a]}),fs(r,o=>{bl.configure(this,o,o.options),bl.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(V3("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||Ub(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Vc.getController(a),{datasetElementType:c,dataElementType:h}=Io.datasets[a];Object.assign(l,{dataElementType:Vc.getElement(h),datasetElementType:c&&Vc.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){fs(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:p}=this.getDatasetMeta(c),v=!i&&s.indexOf(p)===-1;p.buildOrUpdateElements(v),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||fs(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(V3("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){fs(this.scales,e=>{bl.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!e3(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;jee(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!e3(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;bl.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],fs(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Eh(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(xd.has(this)?this.attached&&!xd.running(this)&&xd.start(this):(this.draw(),U3({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=$ee(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&qy(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&Yy(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Nd(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=RQ.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Ah(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);_m(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),xd.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),u3(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete _v[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};fs(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){fs(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},fs(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!ty(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(p=>h.datasetIndex===p.datasetIndex&&h.index===p.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=ZX(e),c=zee(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Os(s.onHover,[e,a,this],this),l&&Os(s.onClick,[e,a,this],this));const h=!ty(a,i);return(h||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,h}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}Je(Wc,"defaults",Io),Je(Wc,"instances",_v),Je(Wc,"overrides",_f),Je(Wc,"registry",Vc),Je(Wc,"version",Bee),Je(Wc,"getChart",H3);function W3(){return fs(Wc.instances,t=>t._plugins.invalidate())}function Vee(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+Qo,r-Qo),t.closePath(),t.clip()}function Uee(t){return ew(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Hee(t,e,n,r){const i=Uee(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return Ta(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Ta(i.innerStart,0,o),innerEnd:Ta(i.innerEnd,0,o)}}function Qf(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function ay(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=e,p=Math.max(e.outerRadius+r+n-c,0),v=h>0?h+r+n+c:0;let g=0;const x=i-l;if(r){const B=h>0?h-r:0,I=p>0?p-r:0,Q=(B+I)/2,G=Q!==0?x*Q/(Q+r):x;g=(x-G)/2}const E=Math.max(.001,x*p-n/Us)/p,D=(x-E)/2,M=l+D+g,A=i-D-g,{outerStart:z,outerEnd:Y,innerStart:ne,innerEnd:ge}=Hee(e,v,p,A-M),pe=p-z,O=p-Y,j=M+z/pe,J=A-Y/O,U=v+ne,R=v+ge,V=M+ne/U,$=A-ge/R;if(t.beginPath(),s){const B=(j+J)/2;if(t.arc(o,a,p,j,B),t.arc(o,a,p,B,J),Y>0){const _e=Qf(O,J,o,a);t.arc(_e.x,_e.y,Y,J,A+Qo)}const I=Qf(R,A,o,a);if(t.lineTo(I.x,I.y),ge>0){const _e=Qf(R,$,o,a);t.arc(_e.x,_e.y,ge,A+Qo,$+Math.PI)}const Q=(A-ge/v+(M+ne/v))/2;if(t.arc(o,a,v,A-ge/v,Q,!0),t.arc(o,a,v,Q,M+ne/v,!0),ne>0){const _e=Qf(U,V,o,a);t.arc(_e.x,_e.y,ne,V+Math.PI,M-Qo)}const G=Qf(pe,M,o,a);if(t.lineTo(G.x,G.y),z>0){const _e=Qf(pe,j,o,a);t.arc(_e.x,_e.y,z,M-Qo,j)}}else{t.moveTo(o,a);const B=Math.cos(j)*p+o,I=Math.sin(j)*p+a;t.lineTo(B,I);const Q=Math.cos(J)*p+o,G=Math.sin(J)*p+a;t.lineTo(Q,G)}t.closePath()}function Wee(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){ay(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%Vs||Vs))}return ay(t,e,n,r,l,i),t.fill(),l}function Gee(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:h,borderDash:p,borderDashOffset:v}=l,g=l.borderAlign==="inner";if(!c)return;t.setLineDash(p||[]),t.lineDashOffset=v,g?(t.lineWidth=c*2,t.lineJoin=h||"round"):(t.lineWidth=c,t.lineJoin=h||"bevel");let x=e.endAngle;if(s){ay(t,e,n,r,x,i);for(let E=0;E<s;++E)t.stroke();isNaN(a)||(x=o+(a%Vs||Vs))}g&&Vee(t,e,x),s||(ay(t,e,n,r,x,i),t.stroke())}class Ag extends zd{constructor(n){super();Je(this,"circumference");Je(this,"endAngle");Je(this,"fullCircles");Je(this,"innerRadius");Je(this,"outerRadius");Je(this,"pixelMargin");Je(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=CP(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:p,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),g=(this.options.spacing+this.options.borderWidth)/2,E=fi(v,c-l)>=Vs||wm(o,l,c),D=Td(a,h+g,p+g);return E&&D}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:h}=this.options,p=(s+o)/2,v=(a+l+h+c)/2;return{x:r+Math.cos(p)*v,y:i+Math.sin(p)*v}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>Vs?Math.floor(i/Vs):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Us,i||0)),h=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,Wee(n,this,h,o,a),Gee(n,this,h,o,a),n.restore()}}Je(Ag,"id","arc"),Je(Ag,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Je(Ag,"defaultRoutes",{backgroundColor:"backgroundColor"}),Je(Ag,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function sM(t,e,n=e){t.lineCap=fi(n.borderCapStyle,e.borderCapStyle),t.setLineDash(fi(n.borderDash,e.borderDash)),t.lineDashOffset=fi(n.borderDashOffset,e.borderDashOffset),t.lineJoin=fi(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=fi(n.borderWidth,e.borderWidth),t.strokeStyle=fi(n.borderColor,e.borderColor)}function qee(t,e,n){t.lineTo(n.x,n.y)}function Yee(t){return t.stepped?yJ:t.tension||t.cubicInterpolationMode==="monotone"?bJ:qee}function oM(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),h=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!h?r+c-l:c-l}}function Kee(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=oM(i,n,r),h=Yee(s);let{move:p=!0,reverse:v}=r||{},g,x,E;for(g=0;g<=c;++g)x=i[(a+(v?c-g:g))%o],!x.skip&&(p?(t.moveTo(x.x,x.y),p=!1):h(t,E,x,v,s.stepped),E=x);return l&&(x=i[(a+(v?c:0))%o],h(t,E,x,v,s.stepped)),!!l}function Zee(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=oM(i,n,r),{move:l=!0,reverse:c}=r||{};let h=0,p=0,v,g,x,E,D,M;const A=Y=>(o+(c?a-Y:Y))%s,z=()=>{E!==D&&(t.lineTo(h,D),t.lineTo(h,E),t.lineTo(h,M))};for(l&&(g=i[A(0)],t.moveTo(g.x,g.y)),v=0;v<=a;++v){if(g=i[A(v)],g.skip)continue;const Y=g.x,ne=g.y,ge=Y|0;ge===x?(ne<E?E=ne:ne>D&&(D=ne),h=(p*h+Y)/++p):(z(),t.lineTo(Y,ne),x=ge,p=0,E=D=ne),M=ne}z()}function Wb(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?Zee:Kee}function Xee(t){return t.stepped?XJ:t.tension||t.cubicInterpolationMode==="monotone"?JJ:tf}function Jee(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),sM(t,e.options),t.stroke(i)}function Qee(t,e,n,r){const{segments:i,options:s}=e,o=Wb(e);for(const a of i)sM(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const ete=typeof Path2D=="function";function tte(t,e,n,r){ete&&!e.options.segment?Jee(t,e,n,r):Qee(t,e,n,r)}class ph extends zd{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;UJ(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=iQ(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=WP(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=Xee(r);let c,h;for(c=0,h=o.length;c<h;++c){const{start:p,end:v}=o[c],g=s[p],x=s[v];if(g===x){a.push(g);continue}const E=Math.abs((i-g[n])/(x[n]-g[n])),D=l(g,x,E,r.stepped);D[n]=e[n],a.push(D)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Wb(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=Wb(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),tte(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Je(ph,"id","line"),Je(ph,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Je(ph,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Je(ph,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function G3(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class wv extends zd{constructor(n){super();Je(this,"parsed");Je(this,"skip");Je(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return G3(this,n,"x",r)}inYRange(n,r){return G3(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!Nd(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,$b(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Je(wv,"id","point"),Je(wv,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Je(wv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function aM(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,h,p;return t.horizontal?(p=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-p,h=r+p):(p=s/2,a=n-p,l=n+p,c=Math.min(r,i),h=Math.max(r,i)),{left:a,top:c,right:l,bottom:h}}function gh(t,e,n,r){return t?0:Ta(e,n,r)}function nte(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=OP(r);return{t:gh(i.top,s.top,0,n),r:gh(i.right,s.right,0,e),b:gh(i.bottom,s.bottom,0,n),l:gh(i.left,s.left,0,e)}}function rte(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=pf(i),o=Math.min(e,n),a=t.borderSkipped,l=r||Bi(i);return{topLeft:gh(!l||a.top||a.left,s.topLeft,0,o),topRight:gh(!l||a.top||a.right,s.topRight,0,o),bottomLeft:gh(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:gh(!l||a.bottom||a.right,s.bottomRight,0,o)}}function ite(t){const e=aM(t),n=e.right-e.left,r=e.bottom-e.top,i=nte(t,n/2,r/2),s=rte(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function M2(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&aM(t,r);return a&&(i||Td(e,a.left,a.right))&&(s||Td(n,a.top,a.bottom))}function ste(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function ote(t,e){t.rect(e.x,e.y,e.w,e.h)}function k2(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class xv extends zd{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=ite(this),a=ste(o.radius)?xm:ote;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,k2(o,n,s)),e.clip(),a(e,k2(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,k2(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return M2(this,e,n,r)}inXRange(e,n){return M2(this,e,null,n)}inYRange(e,n){return M2(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Je(xv,"id","bar"),Je(xv,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Je(xv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var ate=Object.freeze({__proto__:null,ArcElement:Ag,BarElement:xv,LineElement:ph,PointElement:wv});const Gb=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],q3=Gb.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function lM(t){return Gb[t%Gb.length]}function uM(t){return q3[t%q3.length]}function lte(t,e){return t.borderColor=lM(e),t.backgroundColor=uM(e),++e}function ute(t,e){return t.backgroundColor=t.data.map(()=>lM(e++)),e}function cte(t,e){return t.backgroundColor=t.data.map(()=>uM(e++)),e}function dte(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof af?e=ute(n,e):i instanceof tm?e=cte(n,e):i&&(e=lte(n,e))}}function Y3(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function hte(t){return t&&(t.borderColor||t.backgroundColor)}var fte={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i;if(!n.forceOverride&&(Y3(r)||hte(i)||s&&Y3(s)))return;const o=dte(t);r.forEach(o)}};function pte(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let h=e,p,v,g,x,E;for(o[l++]=t[h],p=0;p<s-2;p++){let D=0,M=0,A;const z=Math.floor((p+1)*a)+1+e,Y=Math.min(Math.floor((p+2)*a)+1,n)+e,ne=Y-z;for(A=z;A<Y;A++)D+=t[A].x,M+=t[A].y;D/=ne,M/=ne;const ge=Math.floor(p*a)+1+e,pe=Math.min(Math.floor((p+1)*a)+1,n)+e,{x:O,y:j}=t[h];for(g=x=-1,A=ge;A<pe;A++)x=.5*Math.abs((O-D)*(t[A].y-j)-(O-t[A].x)*(M-j)),x>g&&(g=x,v=t[A],E=A);o[l++]=v,h=E}return o[l++]=t[c],o}function gte(t,e,n,r){let i=0,s=0,o,a,l,c,h,p,v,g,x,E;const D=[],M=e+n-1,A=t[e].x,Y=t[M].x-A;for(o=e;o<e+n;++o){a=t[o],l=(a.x-A)/Y*r,c=a.y;const ne=l|0;if(ne===h)c<x?(x=c,p=o):c>E&&(E=c,v=o),i=(s*i+a.x)/++s;else{const ge=o-1;if(!qi(p)&&!qi(v)){const pe=Math.min(p,v),O=Math.max(p,v);pe!==g&&pe!==ge&&D.push({...t[pe],x:i}),O!==g&&O!==ge&&D.push({...t[O],x:i})}o>0&&ge!==g&&D.push(t[ge]),D.push(a),h=ne,s=0,x=E=c,p=v=g=o}}return D}function cM(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function K3(t){t.data.datasets.forEach(e=>{cM(e)})}function mte(t,e){const n=e.length;let r=0,i;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=Ta(Dd(e,s.axis,o).lo,0,n-1)),c?i=Ta(Dd(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var vte={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){K3(t);return}const r=t.width;t.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=t.getDatasetMeta(s),c=o||i.data;if(Mg([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=t.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||t.options.parsing)return;let{start:p,count:v}=mte(l,c);const g=n.threshold||4*r;if(v<=g){cM(i);return}qi(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(E){this._data=E}}));let x;switch(n.algorithm){case"lttb":x=pte(c,p,v,r,n);break;case"min-max":x=gte(c,p,v,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=x})},destroy(t){K3(t)}};function yte(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=aw(l,c,i);const h=qb(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:h,start:i[l],end:i[c]});continue}const p=WP(e,h);for(const v of p){const g=qb(n,s[v.start],s[v.end],v.loop),x=HP(a,i,g);for(const E of x)o.push({source:E,target:v,start:{[n]:Z3(h,g,"start",Math.max)},end:{[n]:Z3(h,g,"end",Math.min)}})}}return o}function qb(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=Su(i),s=Su(s)),{property:t,start:i,end:s}}function bte(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=aw(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function aw(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function Z3(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function dM(t,e){let n=[],r=!1;return to(t)?(r=!0,n=t):n=bte(t,e),n.length?new ph({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function X3(t){return t&&t.fill!==!1}function _te(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Oo(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function wte(t,e,n){const r=Cte(t);if(Bi(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Oo(i)&&Math.floor(i)===i?xte(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function xte(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function Lte(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Bi(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function Ste(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Bi(t)?r=t.value:r=e.getBaseValue(),r}function Cte(t){const e=t.options,n=e.fill;let r=fi(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function Ete(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=Pte(e,n);a.push(dM({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let h=c.start;h<=c.end;h++)Mte(i,o[h],a)}return new ph({points:i,options:{}})}function Pte(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function Mte(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=kte(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function kte(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const h=s[c],p=o[h.start][n],v=o[h.end][n];if(Td(i,p,v)){a=i===p,l=i===v;break}}return{first:a,last:l,point:r}}class hM{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:Vs},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function Ate(t){const{chart:e,fill:n,line:r}=t;if(Oo(n))return Tte(e,n);if(n==="stack")return Ete(t);if(n==="shape")return!0;const i=Dte(t);return i instanceof hM?i:dM(i,r)}function Tte(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function Dte(t){return(t.scale||{}).getPointPositionForValue?Ote(t):Nte(t)}function Nte(t){const{scale:e={},fill:n}=t,r=Lte(n,e);if(Oo(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function Ote(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=Ste(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new hM({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function A2(t,e,n){const r=Ate(e),{line:i,scale:s,axis:o}=e,a=i.options,l=a.fill,c=a.backgroundColor,{above:h=c,below:p=c}=l||{};r&&i.points.length&&(qy(t,n),Ite(t,{line:i,target:r,above:h,below:p,area:n,scale:s,axis:o}),Yy(t))}function Ite(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==i&&(J3(t,r,o.top),Q3(t,{line:n,target:r,color:i,scale:a,property:l}),t.restore(),t.save(),J3(t,r,o.bottom)),Q3(t,{line:n,target:r,color:s,scale:a,property:l}),t.restore()}function J3(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,h=i[l],p=i[aw(l,c,i)];s?(t.moveTo(h.x,h.y),s=!1):(t.lineTo(h.x,n),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(p.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Q3(t,e){const{line:n,target:r,property:i,color:s,scale:o}=e,a=yte(n,r,i);for(const{source:l,target:c,start:h,end:p}of a){const{style:{backgroundColor:v=s}={}}=l,g=r!==!0;t.save(),t.fillStyle=v,Bte(t,o,g&&qb(i,h,p)),t.beginPath();const x=!!n.pathSegment(t,l);let E;if(g){x?t.closePath():eL(t,r,p,i);const D=!!r.pathSegment(t,c,{move:x,reverse:!0});E=x&&D,E||eL(t,r,h,i)}t.closePath(),t.fill(E?"evenodd":"nonzero"),t.restore()}}function Bte(t,e,n){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,r,a-o,i-r),t.clip())}function eL(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var Rte={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof ph&&(l={visible:t.isDatasetVisible(o),index:o,fill:wte(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=_te(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&A2(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;X3(s)&&A2(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!X3(r)||n.drawTime!=="beforeDatasetDraw"||A2(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const tL=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},Fte=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class nL extends zd{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Os(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=ba(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=tL(r,s);let c,h;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=i+a;let p=e;s.textAlign="left",s.textBaseline="middle";let v=-1,g=-h;return this.legendItems.forEach((x,E)=>{const D=r+n/2+s.measureText(x.text).width;(E===0||c[c.length-1]+D+2*a>o)&&(p+=h,c[c.length-(E>0?0:1)]=0,g+=h,v++),l[E]={left:0,top:g,row:v,width:D,height:i},c[c.length-1]+=D+a}),p}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let p=a,v=0,g=0,x=0,E=0;return this.legendItems.forEach((D,M)=>{const{itemWidth:A,itemHeight:z}=jte(r,n,s,D,i);M>0&&g+z+2*a>h&&(p+=v+a,c.push({width:v,height:g}),x+=v+a,E++,v=g=0),l[M]={left:x,top:g,col:E,width:A,height:z},v=Math.max(v,A),g+=z+a}),p+=v,c.push({width:v,height:g}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=xp(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=dl(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=dl(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=dl(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=dl(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;qy(e,this),this._draw(),Yy(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Io.color,l=xp(e.rtl,this.left,this.width),c=ba(o.font),{padding:h}=o,p=c.size,v=p/2;let g;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:x,boxHeight:E,itemHeight:D}=tL(o,p),M=function(ge,pe,O){if(isNaN(x)||x<=0||isNaN(E)||E<0)return;i.save();const j=fi(O.lineWidth,1);if(i.fillStyle=fi(O.fillStyle,a),i.lineCap=fi(O.lineCap,"butt"),i.lineDashOffset=fi(O.lineDashOffset,0),i.lineJoin=fi(O.lineJoin,"miter"),i.lineWidth=j,i.strokeStyle=fi(O.strokeStyle,a),i.setLineDash(fi(O.lineDash,[])),o.usePointStyle){const J={radius:E*Math.SQRT2/2,pointStyle:O.pointStyle,rotation:O.rotation,borderWidth:j},U=l.xPlus(ge,x/2),R=pe+v;NP(i,J,U,R,o.pointStyleWidth&&x)}else{const J=pe+Math.max((p-E)/2,0),U=l.leftForLtr(ge,x),R=pf(O.borderRadius);i.beginPath(),Object.values(R).some(V=>V!==0)?xm(i,{x:U,y:J,w:x,h:E,radius:R}):i.rect(U,J,x,E),i.fill(),j!==0&&i.stroke()}i.restore()},A=function(ge,pe,O){wf(i,O.text,ge,pe+D/2,c,{strikethrough:O.hidden,textAlign:l.textAlign(O.textAlign)})},z=this.isHorizontal(),Y=this._computeTitleHeight();z?g={x:dl(s,this.left+h,this.right-r[0]),y:this.top+h+Y,line:0}:g={x:this.left+h,y:dl(s,this.top+Y+h,this.bottom-n[0].height),line:0},$P(this.ctx,e.textDirection);const ne=D+h;this.legendItems.forEach((ge,pe)=>{i.strokeStyle=ge.fontColor,i.fillStyle=ge.fontColor;const O=i.measureText(ge.text).width,j=l.textAlign(ge.textAlign||(ge.textAlign=o.textAlign)),J=x+v+O;let U=g.x,R=g.y;l.setWidth(this.width),z?pe>0&&U+J+h>this.right&&(R=g.y+=ne,g.line++,U=g.x=dl(s,this.left+h,this.right-r[g.line])):pe>0&&R+ne>this.bottom&&(U=g.x=U+n[g.line].width+h,g.line++,R=g.y=dl(s,this.top+Y+h,this.bottom-n[g.line].height));const V=l.x(U);if(M(V,R,ge),U=aJ(j,U+x+v,z?U+J:this.right,e.rtl),A(l.x(U),R,ge),z)g.x+=J+h;else if(typeof ge.text!="string"){const $=c.lineHeight;g.y+=fM(ge,$)+h}else g.y+=ne}),VP(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=ba(n.font),i=_l(n.padding);if(!n.display)return;const s=xp(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let h,p=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),h=this.top+c,p=dl(e.align,p,this.right-v);else{const x=this.columnSizes.reduce((E,D)=>Math.max(E,D.height),0);h=c+dl(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const g=dl(a,p,p+v);o.textAlign=s.textAlign(J_(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,wf(o,n.text,g,h,r)}_computeTitleHeight(){const e=this.options.title,n=ba(e.font),r=_l(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(Td(e,this.left,this.right)&&Td(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Td(e,i.left,i.left+i.width)&&Td(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!Vte(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=Fte(i,r);i&&!s&&Os(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Os(n.onHover,[e,r,this],this)}else r&&Os(n.onClick,[e,r,this],this)}}function jte(t,e,n,r,i){const s=zte(r,t,e,n),o=$te(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function zte(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function $te(t,e,n){let r=t;return typeof e.text!="string"&&(r=fM(e,n)),r}function fM(t,e){const n=t.text?t.text.length:0;return e*n}function Vte(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Ute={id:"legend",_element:nL,start(t,e,n){const r=t.legend=new nL({ctx:t.ctx,options:n,chart:t});bl.configure(t,r,n),bl.addBox(t,r)},stop(t){bl.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;bl.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=_l(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class lw extends zd{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=to(r.text)?r.text.length:1;this._padding=_l(r.padding);const s=i*ba(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,h,p;return this.isHorizontal()?(h=dl(a,r,s),p=n+e,c=s-r):(o.position==="left"?(h=r+e,p=dl(a,i,n),l=Us*-.5):(h=s-e,p=dl(a,n,i),l=Us*.5),c=i-n),{titleX:h,titleY:p,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=ba(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);wf(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:J_(n.align),textBaseline:"middle",translation:[o,a]})}}function Hte(t,e){const n=new lw({ctx:t.ctx,options:e,chart:t});bl.configure(t,n,e),bl.addBox(t,n),t.titleBlock=n}var Wte={id:"title",_element:lw,start(t,e,n){Hte(t,n)},stop(t){const e=t.titleBlock;bl.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;bl.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const U0=new WeakMap;var Gte={id:"subtitle",start(t,e,n){const r=new lw({ctx:t.ctx,options:n,chart:t});bl.configure(t,r,n),bl.addBox(t,r),U0.set(t,r)},stop(t){bl.removeBox(t,U0.get(t)),U0.delete(t)},beforeUpdate(t,e,n){const r=U0.get(t);bl.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Tg={average(t){if(!t.length)return!1;let e,n,r=0,i=0,s=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();r+=a.x,i+=a.y,++s}}return{x:r/s,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=jb(e,c);h<i&&(i=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function zc(t,e){return e&&(to(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ld(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function qte(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function rL(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=ba(e.bodyFont),c=ba(e.titleFont),h=ba(e.footerFont),p=s.length,v=i.length,g=r.length,x=_l(e.padding);let E=x.height,D=0,M=r.reduce((Y,ne)=>Y+ne.before.length+ne.lines.length+ne.after.length,0);if(M+=t.beforeBody.length+t.afterBody.length,p&&(E+=p*c.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),M){const Y=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;E+=g*Y+(M-g)*l.lineHeight+(M-1)*e.bodySpacing}v&&(E+=e.footerMarginTop+v*h.lineHeight+(v-1)*e.footerSpacing);let A=0;const z=function(Y){D=Math.max(D,n.measureText(Y).width+A)};return n.save(),n.font=c.string,fs(t.title,z),n.font=l.string,fs(t.beforeBody.concat(t.afterBody),z),A=e.displayColors?o+2+e.boxPadding:0,fs(r,Y=>{fs(Y.before,z),fs(Y.lines,z),fs(Y.after,z)}),A=0,n.font=h.string,fs(t.footer,z),n.restore(),D+=x.width,{width:D,height:E}}function Yte(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function Kte(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function Zte(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),Kte(c,t,e,n)&&(c="center"),c}function iL(t,e,n){const r=n.yAlign||e.yAlign||Yte(t,n);return{xAlign:n.xAlign||e.xAlign||Zte(t,e,n,r),yAlign:r}}function Xte(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function Jte(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function sL(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:h,topRight:p,bottomLeft:v,bottomRight:g}=pf(o);let x=Xte(e,a);const E=Jte(e,l,c);return l==="center"?a==="left"?x+=c:a==="right"&&(x-=c):a==="left"?x-=Math.max(h,v)+i:a==="right"&&(x+=Math.max(p,g)+i),{x:Ta(x,0,r.width-e.width),y:Ta(E,0,r.height-e.height)}}function H0(t,e,n){const r=_l(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function oL(t){return zc([],Ld(t))}function Qte(t,e,n){return Ah(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function aL(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const pM={beforeTitle:wd,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:wd,beforeBody:wd,beforeLabel:wd,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return qi(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:wd,afterBody:wd,beforeFooter:wd,footer:wd,afterFooter:wd};function Kl(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?pM[e].call(n,r):i}class Yb extends zd{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new GP(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=Qte(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Kl(r,"beforeTitle",this,e),s=Kl(r,"title",this,e),o=Kl(r,"afterTitle",this,e);let a=[];return a=zc(a,Ld(i)),a=zc(a,Ld(s)),a=zc(a,Ld(o)),a}getBeforeBody(e,n){return oL(Kl(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return fs(e,s=>{const o={before:[],lines:[],after:[]},a=aL(r,s);zc(o.before,Ld(Kl(a,"beforeLabel",this,s))),zc(o.lines,Kl(a,"label",this,s)),zc(o.after,Ld(Kl(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return oL(Kl(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Kl(r,"beforeFooter",this,e),s=Kl(r,"footer",this,e),o=Kl(r,"afterFooter",this,e);let a=[];return a=zc(a,Ld(i)),a=zc(a,Ld(s)),a=zc(a,Ld(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(qte(this.chart,n[l]));return e.filter&&(a=a.filter((h,p,v)=>e.filter(h,p,v,r))),e.itemSort&&(a=a.sort((h,p)=>e.itemSort(h,p,r))),fs(a,h=>{const p=aL(e.callbacks,h);i.push(Kl(p,"labelColor",this,h)),s.push(Kl(p,"labelPointStyle",this,h)),o.push(Kl(p,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Tg[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=rL(this,r),c=Object.assign({},a,l),h=iL(this.chart,r,c),p=sL(r,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:p}=pf(a),{x:v,y:g}=e,{width:x,height:E}=n;let D,M,A,z,Y,ne;return s==="center"?(Y=g+E/2,i==="left"?(D=v,M=D-o,z=Y+o,ne=Y-o):(D=v+x,M=D+o,z=Y-o,ne=Y+o),A=D):(i==="left"?M=v+Math.max(l,h)+o:i==="right"?M=v+x-Math.max(c,p)-o:M=this.caretX,s==="top"?(z=g,Y=z-o,D=M-o,A=M+o):(z=g+E,Y=z+o,D=M+o,A=M-o),ne=z),{x1:D,x2:M,x3:A,y1:z,y2:Y,y3:ne}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=xp(r.rtl,this.x,this.width);for(e.x=H0(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=ba(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,h=ba(s.bodyFont),p=H0(this,"left",s),v=i.x(p),g=l<h.lineHeight?(h.lineHeight-l)/2:0,x=n.y+g;if(s.usePointStyle){const E={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},D=i.leftForLtr(v,c)+c/2,M=x+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,$b(e,E,D,M),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,$b(e,E,D,M)}else{e.lineWidth=Bi(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const E=i.leftForLtr(v,c),D=i.leftForLtr(i.xPlus(v,1),c-2),M=pf(o.borderRadius);Object.values(M).some(A=>A!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,xm(e,{x:E,y:x,w:c,h:l,radius:M}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),xm(e,{x:D,y:x+1,w:c-2,h:l-2,radius:M}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(E,x,c,l),e.strokeRect(E,x,c,l),e.fillStyle=o.backgroundColor,e.fillRect(D,x+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=r,p=ba(r.bodyFont);let v=p.lineHeight,g=0;const x=xp(r.rtl,this.x,this.width),E=function(O){n.fillText(O,x.x(e.x+g),e.y+v/2),e.y+=v+s},D=x.textAlign(o);let M,A,z,Y,ne,ge,pe;for(n.textAlign=o,n.textBaseline="middle",n.font=p.string,e.x=H0(this,D,r),n.fillStyle=r.bodyColor,fs(this.beforeBody,E),g=a&&D!=="right"?o==="center"?c/2+h:c+2+h:0,Y=0,ge=i.length;Y<ge;++Y){for(M=i[Y],A=this.labelTextColors[Y],n.fillStyle=A,fs(M.before,E),z=M.lines,a&&z.length&&(this._drawColorBox(n,e,Y,x,r),v=Math.max(p.lineHeight,l)),ne=0,pe=z.length;ne<pe;++ne)E(z[ne]),v=p.lineHeight;fs(M.after,E)}g=0,v=p.lineHeight,fs(this.afterBody,E),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=xp(r.rtl,this.x,this.width);for(e.x=H0(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=ba(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=r,{topLeft:p,topRight:v,bottomLeft:g,bottomRight:x}=pf(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+p,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-v,l),n.quadraticCurveTo(a+c,l,a+c,l+v),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+h-x),n.quadraticCurveTo(a+c,l+h,a+c-x,l+h),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+g,l+h),n.quadraticCurveTo(a,l+h,a,l+h-g),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+p),n.quadraticCurveTo(a,l,a+p,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Tg[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=rL(this,e),l=Object.assign({},o,this._size),c=iL(n,e,l),h=sL(e,l,c,n);(i._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=_l(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),$P(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),VP(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!ty(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!ty(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Tg[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}Je(Yb,"positioners",Tg);var ene={id:"tooltip",_element:Yb,positioners:Tg,afterInit(t,e,n){n&&(t.tooltip=new Yb({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:pM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},tne=Object.freeze({__proto__:null,Colors:fte,Decimation:vte,Filler:Rte,Legend:Ute,SubTitle:Gte,Title:Wte,Tooltip:ene});const nne=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function rne(t,e,n,r){const i=t.indexOf(e);if(i===-1)return nne(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const ine=(t,e)=>t===null?null:Ta(Math.round(t),0,e);function lL(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Kb extends Cf{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(qi(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:rne(r,e,fi(n,e),this._addedLabels),ine(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return lL.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Je(Kb,"id","category"),Je(Kb,"defaults",{ticks:{callback:lL}});function sne(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:p,includeBounds:v}=t,g=s||1,x=h-1,{min:E,max:D}=e,M=!qi(o),A=!qi(a),z=!qi(c),Y=(D-E)/(p+1);let ne=n3((D-E)/x/g)*g,ge,pe,O,j;if(ne<1e-14&&!M&&!A)return[{value:E},{value:D}];j=Math.ceil(D/ne)-Math.floor(E/ne),j>x&&(ne=n3(j*ne/x/g)*g),qi(l)||(ge=Math.pow(10,l),ne=Math.ceil(ne*ge)/ge),i==="ticks"?(pe=Math.floor(E/ne)*ne,O=Math.ceil(D/ne)*ne):(pe=E,O=D),M&&A&&s&&eJ((a-o)/s,ne/1e3)?(j=Math.round(Math.min((a-o)/ne,h)),ne=(a-o)/j,pe=o,O=a):z?(pe=M?o:pe,O=A?a:O,j=c-1,ne=(O-pe)/j):(j=(O-pe)/ne,Jg(j,Math.round(j),ne/1e3)?j=Math.round(j):j=Math.ceil(j));const J=Math.max(r3(ne),r3(pe));ge=Math.pow(10,qi(l)?J:l),pe=Math.round(pe*ge)/ge,O=Math.round(O*ge)/ge;let U=0;for(M&&(v&&pe!==o?(n.push({value:o}),pe<o&&U++,Jg(Math.round((pe+U*ne)*ge)/ge,o,uL(o,Y,t))&&U++):pe<o&&U++);U<j;++U){const R=Math.round((pe+U*ne)*ge)/ge;if(A&&R>a)break;n.push({value:R})}return A&&v&&O!==a?n.length&&Jg(n[n.length-1].value,a,uL(a,Y,t))?n[n.length-1].value=a:n.push({value:a}):(!A||O===a)&&n.push({value:O}),n}function uL(t,e,{horizontal:n,minRotation:r}){const i=_c(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class ly extends Cf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return qi(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=Qc(i),c=Qc(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=sne(i,s);return e.bounds==="ticks"&&SP(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Rm(e,this.chart.options.locale,this.options.ticks.format)}}class Zb extends ly{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Oo(e)?e:0,this.max=Oo(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=_c(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Je(Zb,"id","linear"),Je(Zb,"defaults",{ticks:{callback:Gy.formatters.numeric}});const Sm=t=>Math.floor(fh(t)),Xh=(t,e)=>Math.pow(10,Sm(t)+e);function cL(t){return t/Math.pow(10,Sm(t))===1}function dL(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function one(t,e){const n=e-t;let r=Sm(n);for(;dL(t,e,r)>10;)r++;for(;dL(t,e,r)<10;)r--;return Math.min(r,Sm(t))}function ane(t,{min:e,max:n}){e=Lu(t.min,e);const r=[],i=Sm(e);let s=one(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,h=Math.floor((e-l)/a/10)*a*10;let p=Math.floor((c-h)/Math.pow(10,s)),v=Lu(t.min,Math.round((l+h+p*Math.pow(10,s))*o)/o);for(;v<n;)r.push({value:v,major:cL(v),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(s++,p=2,o=s>=0?1:o),v=Math.round((l+h+p*Math.pow(10,s))*o)/o;const g=Lu(t.max,v);return r.push({value:g,major:cL(g),significand:p}),r}class Xb extends Cf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=ly.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return Oo(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Oo(e)?Math.max(0,e):null,this.max=Oo(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Oo(this._userMin)&&(this.min=e===Xh(this.min,0)?Xh(this.min,-1):Xh(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(Xh(r,-1)),o(Xh(i,1)))),r<=0&&s(Xh(i,-1)),i<=0&&o(Xh(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=ane(n,this);return e.bounds==="ticks"&&SP(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":Rm(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=fh(e),this._valueRange=fh(this.max)-fh(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(fh(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}Je(Xb,"id","logarithmic"),Je(Xb,"defaults",{ticks:{callback:Gy.formatters.logarithmic,major:{enabled:!0}}});function Jb(t){const e=t.ticks;if(e.display&&t.display){const n=_l(e.backdropPadding);return fi(e.font&&e.font.size,Io.font.size)+n.height}return 0}function lne(t,e,n){return n=to(n)?n:[n],{w:vJ(t,e.string,n),h:n.length*e.lineHeight}}function hL(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function une(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Us/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const h=t.getPointPosition(l,t.drawingArea+i[l],a),p=ba(c.font),v=lne(t.ctx,p,t._pointLabels[l]);r[l]=v;const g=Su(t.getIndexAngle(l)+a),x=Math.round(Z_(g)),E=hL(x,h.x,v.w,0,180),D=hL(x,h.y,v.h,90,270);cne(n,e,g,E,D)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=fne(t,r,i)}function cne(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function dne(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(Z_(Su(l.angle+Qo))),h=mne(l.y,a.h,c),p=pne(c),v=gne(l.x,a.w,p);return{visible:!0,x:l.x,y:h,textAlign:p,left:v,top:h,right:v+a.w,bottom:h+a.h}}function hne(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(Nd({x:n,y:r},e)||Nd({x:n,y:s},e)||Nd({x:i,y:r},e)||Nd({x:i,y:s},e))}function fne(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:Jb(s)/2,additionalAngle:o?Us/i:0};let c;for(let h=0;h<i;h++){l.padding=n[h],l.size=e[h];const p=dne(t,h,l);r.push(p),a==="auto"&&(p.visible=hne(p,c),p.visible&&(c=p))}return r}function pne(t){return t===0||t===180?"center":t<180?"left":"right"}function gne(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function mne(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function vne(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!qi(a)){const l=pf(e.borderRadius),c=_l(e.backdropPadding);t.fillStyle=a;const h=r-c.left,p=i-c.top,v=s-r+c.width,g=o-i+c.height;Object.values(l).some(x=>x!==0)?(t.beginPath(),xm(t,{x:h,y:p,w:v,h:g,radius:l}),t.fill()):t.fillRect(h,p,v,g)}}function yne(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));vne(n,o,s);const a=ba(o.font),{x:l,y:c,textAlign:h}=s;wf(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function gM(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,Vs);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function bne(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),gM(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function _ne(t,e,n){return Ah(t,{label:n,index:e,type:"pointLabel"})}class Dg extends ly{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=_l(Jb(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Oo(e)&&!isNaN(e)?e:0,this.max=Oo(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Jb(this.options))}generateTickLabels(e){ly.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=Os(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?une(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=Vs/(this._pointLabels.length||1),r=this.options.startAngle||0;return Su(e*n+_c(r))}getDistanceFromCenterForValue(e){if(qi(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(qi(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return _ne(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-Qo+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),gM(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&yne(this,o),i.display&&this.ticks.forEach((h,p)=>{if(p!==0){l=this.getDistanceFromCenterForValue(h.value);const v=this.getContext(p),g=i.setContext(v),x=s.setContext(v);bne(this,g,l,o,x)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const h=r.setContext(this.getPointLabelContext(a)),{color:p,lineWidth:v}=h;!v||!p||(e.lineWidth=v,e.strokeStyle=p,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),h=ba(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=h.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const p=_l(c.backdropPadding);e.fillRect(-o/2-p.left,-s-h.size/2-p.top,o+p.width,h.size+p.height)}wf(e,a.label,0,-s,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Je(Dg,"id","radialLinear"),Je(Dg,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Gy.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Je(Dg,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Je(Dg,"descriptors",{angleLines:{_fallback:"grid"}});const Xy={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},eu=Object.keys(Xy);function fL(t,e){return t-e}function pL(t,e){if(qi(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Oo(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Dp(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function gL(t,e,n,r){const i=eu.length;for(let s=eu.indexOf(t);s<i-1;++s){const o=Xy[eu[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return eu[s]}return eu[i-1]}function wne(t,e,n,r,i){for(let s=eu.length-1;s>=eu.indexOf(n);s--){const o=eu[s];if(Xy[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return eu[n?eu.indexOf(n):0]}function xne(t){for(let e=eu.indexOf(t)+1,n=eu.length;e<n;++e)if(Xy[eu[e]].common)return eu[e]}function mL(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=X_(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function Lne(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function vL(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:Lne(t,r,i,n)}class Cm extends Cf{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new KP._date(e.adapters.date);i.init(n),Xg(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:pL(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Oo(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Oo(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=iJ(i,s,o);return this._unit=n.unit||(r.autoSkip?gL(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):wne(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:xne(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),vL(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Ta(n,0,o),r=Ta(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||gL(s.minUnit,n,r,this._getLabelCapacity(n)),a=fi(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Dp(l)||l===!0,h={};let p=n,v,g;if(c&&(p=+e.startOf(p,"isoWeek",l)),p=+e.startOf(p,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const x=i.ticks.source==="data"&&this.getDataTimestamps();for(v=p,g=0;v<r;v=+e.add(v,a,o),g++)mL(h,v,x);return(v===r||i.bounds==="ticks"||g===1)&&mL(h,v,x),Object.keys(h).sort(fL).map(E=>+E)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return Os(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],p=c&&a[c],v=r[n],g=c&&p&&v&&v.major;return this._adapter.format(e,i||(g?p:h))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=_c(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,vL(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(pL(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return PP(e.sort(fL))}}Je(Cm,"id","time"),Je(Cm,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function W0(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Dd(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Dd(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class Qb extends Cm{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=W0(n,this.min),this._tableRange=W0(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)h=i[o+1],l=i[o-1],c=i[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(W0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return W0(this._table,r*this._tableRange+this._minPos,!0)}}Je(Qb,"id","timeseries"),Je(Qb,"defaults",Cm.defaults);var Sne=Object.freeze({__proto__:null,CategoryScale:Kb,LinearScale:Zb,LogarithmicScale:Xb,RadialLinearScale:Dg,TimeScale:Cm,TimeSeriesScale:Qb});const Cne=[DQ,ate,tne,Sne];Wc.register(...Cne);const mM=6048e5,Ene=864e5,Fm=6e4,jm=36e5,Pne=1e3,yL=Symbol.for("constructDateFrom");function Bo(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&yL in t?t[yL](e):t instanceof Date?new t.constructor(e):new Date(e)}function ii(t,e){return Bo(e||t,t)}function Jy(t,e,n){const r=ii(t,n==null?void 0:n.in);return isNaN(e)?Bo((n==null?void 0:n.in)||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function uw(t,e,n){const r=ii(t,n==null?void 0:n.in);if(isNaN(e))return Bo(t,NaN);if(!e)return r;const i=r.getDate(),s=Bo(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function cw(t,e,n){return Bo(t,+ii(t)+e)}function Mne(t,e,n){return cw(t,e*jm)}let kne={};function Ef(){return kne}function nd(t,e){var a,l,c,h;const n=Ef(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((h=(c=n.locale)==null?void 0:c.options)==null?void 0:h.weekStartsOn)??0,i=ii(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Ip(t,e){return nd(t,{...e,weekStartsOn:1})}function vM(t,e){const n=ii(t,e==null?void 0:e.in),r=n.getFullYear(),i=Bo(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=Ip(i),o=Bo(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Ip(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function uy(t){const e=ii(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Pf(t,...e){const n=Bo.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function e_(t,e){const n=ii(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function yM(t,e,n){const[r,i]=Pf(n==null?void 0:n.in,t,e),s=e_(r),o=e_(i),a=+s-uy(s),l=+o-uy(o);return Math.round((a-l)/Ene)}function Ane(t,e){const n=vM(t,e),r=Bo(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Ip(r)}function Tne(t,e,n){const r=ii(t,n==null?void 0:n.in);return r.setTime(r.getTime()+e*Fm),r}function Dne(t,e,n){return uw(t,e*3,n)}function Nne(t,e,n){return cw(t,e*1e3)}function One(t,e,n){return Jy(t,e*7,n)}function Ine(t,e,n){return uw(t,e*12,n)}function nm(t,e){const n=+ii(t)-+ii(e);return n<0?-1:n>0?1:n}function Bne(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function bM(t){return!(!Bne(t)&&typeof t!="number"||isNaN(+ii(t)))}function Rne(t,e,n){const[r,i]=Pf(n==null?void 0:n.in,t,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function Fne(t,e,n){const[r,i]=Pf(n==null?void 0:n.in,t,e);return r.getFullYear()-i.getFullYear()}function _M(t,e,n){const[r,i]=Pf(n==null?void 0:n.in,t,e),s=bL(r,i),o=Math.abs(yM(r,i));r.setDate(r.getDate()-s*o);const a=+(bL(r,i)===-s),l=s*(o-a);return l===0?0:l}function bL(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function zm(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function jne(t,e,n){const[r,i]=Pf(n==null?void 0:n.in,t,e),s=(+r-+i)/jm;return zm(n==null?void 0:n.roundingMethod)(s)}function dw(t,e){return+ii(t)-+ii(e)}function zne(t,e,n){const r=dw(t,e)/Fm;return zm(n==null?void 0:n.roundingMethod)(r)}function wM(t,e){const n=ii(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function xM(t,e){const n=ii(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function $ne(t,e){const n=ii(t,e==null?void 0:e.in);return+wM(n,e)==+xM(n,e)}function LM(t,e,n){const[r,i,s]=Pf(n==null?void 0:n.in,t,t,e),o=nm(i,s),a=Math.abs(Rne(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let l=nm(i,s)===-o;$ne(r)&&a===1&&nm(r,s)===1&&(l=!1);const c=o*(a-+l);return c===0?0:c}function Vne(t,e,n){const r=LM(t,e,n)/3;return zm(n==null?void 0:n.roundingMethod)(r)}function Une(t,e,n){const r=dw(t,e)/1e3;return zm(n==null?void 0:n.roundingMethod)(r)}function Hne(t,e,n){const r=_M(t,e,n)/7;return zm(n==null?void 0:n.roundingMethod)(r)}function Wne(t,e,n){const[r,i]=Pf(n==null?void 0:n.in,t,e),s=nm(r,i),o=Math.abs(Fne(r,i));r.setFullYear(1584),i.setFullYear(1584);const a=nm(r,i)===-s,l=s*(o-+a);return l===0?0:l}function Gne(t,e){const n=ii(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3;return n.setMonth(i,1),n.setHours(0,0,0,0),n}function qne(t,e){const n=ii(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function Yne(t,e){const n=ii(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function SM(t,e){const n=ii(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Kne(t,e){const n=ii(t,e==null?void 0:e.in);return n.setMinutes(59,59,999),n}function Zne(t,e){var a,l;const n=Ef(),r=n.weekStartsOn??((l=(a=n.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,i=ii(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function Xne(t,e){const n=ii(t,e==null?void 0:e.in);return n.setSeconds(59,999),n}function Jne(t,e){const n=ii(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3+3;return n.setMonth(i,0),n.setHours(23,59,59,999),n}function Qne(t,e){const n=ii(t,e==null?void 0:e.in);return n.setMilliseconds(999),n}const ere={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},tre=(t,e,n)=>{let r;const i=ere[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function T2(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const nre={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rre={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ire={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},sre={date:T2({formats:nre,defaultWidth:"full"}),time:T2({formats:rre,defaultWidth:"full"}),dateTime:T2({formats:ire,defaultWidth:"full"})},ore={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},are=(t,e,n,r)=>ore[t];function pg(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const lre={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ure={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},cre={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dre={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},hre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},fre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},pre=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},gre={ordinalNumber:pre,era:pg({values:lre,defaultWidth:"wide"}),quarter:pg({values:ure,defaultWidth:"wide",argumentCallback:t=>t-1}),month:pg({values:cre,defaultWidth:"wide"}),day:pg({values:dre,defaultWidth:"wide"}),dayPeriod:pg({values:hre,defaultWidth:"wide",formattingValues:fre,defaultFormattingWidth:"wide"})};function gg(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?vre(a,p=>p.test(o)):mre(a,p=>p.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const h=e.slice(o.length);return{value:c,rest:h}}}function mre(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function vre(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function yre(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const bre=/^(\d+)(th|st|nd|rd)?/i,_re=/\d+/i,wre={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},xre={any:[/^b/i,/^(a|c)/i]},Lre={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Sre={any:[/1/i,/2/i,/3/i,/4/i]},Cre={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ere={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Pre={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Mre={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},kre={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Are={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Tre={ordinalNumber:yre({matchPattern:bre,parsePattern:_re,valueCallback:t=>parseInt(t,10)}),era:gg({matchPatterns:wre,defaultMatchWidth:"wide",parsePatterns:xre,defaultParseWidth:"any"}),quarter:gg({matchPatterns:Lre,defaultMatchWidth:"wide",parsePatterns:Sre,defaultParseWidth:"any",valueCallback:t=>t+1}),month:gg({matchPatterns:Cre,defaultMatchWidth:"wide",parsePatterns:Ere,defaultParseWidth:"any"}),day:gg({matchPatterns:Pre,defaultMatchWidth:"wide",parsePatterns:Mre,defaultParseWidth:"any"}),dayPeriod:gg({matchPatterns:kre,defaultMatchWidth:"any",parsePatterns:Are,defaultParseWidth:"any"})},CM={code:"en-US",formatDistance:tre,formatLong:sre,formatRelative:are,localize:gre,match:Tre,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Dre(t,e){const n=ii(t,e==null?void 0:e.in);return yM(n,SM(n))+1}function EM(t,e){const n=ii(t,e==null?void 0:e.in),r=+Ip(n)-+Ane(n);return Math.round(r/mM)+1}function hw(t,e){var h,p,v,g;const n=ii(t,e==null?void 0:e.in),r=n.getFullYear(),i=Ef(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(v=i.locale)==null?void 0:v.options)==null?void 0:g.firstWeekContainsDate)??1,o=Bo((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=nd(o,e),l=Bo((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=nd(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function Nre(t,e){var a,l,c,h;const n=Ef(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(c=n.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)??1,i=hw(t,e),s=Bo((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),nd(s,e)}function PM(t,e){const n=ii(t,e==null?void 0:e.in),r=+nd(n,e)-+Nre(n,e);return Math.round(r/mM)+1}function hs(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Qd={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return hs(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):hs(n+1,2)},d(t,e){return hs(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return hs(t.getHours()%12||12,e.length)},H(t,e){return hs(t.getHours(),e.length)},m(t,e){return hs(t.getMinutes(),e.length)},s(t,e){return hs(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return hs(i,e.length)}},ep={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_L={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Qd.y(t,e)},Y:function(t,e,n,r){const i=hw(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return hs(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):hs(s,e.length)},R:function(t,e){const n=vM(t);return hs(n,e.length)},u:function(t,e){const n=t.getFullYear();return hs(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return hs(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return hs(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Qd.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return hs(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=PM(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):hs(i,e.length)},I:function(t,e,n){const r=EM(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):hs(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Qd.d(t,e)},D:function(t,e,n){const r=Dre(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):hs(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return hs(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return hs(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return hs(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=ep.noon:r===0?i=ep.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=ep.evening:r>=12?i=ep.afternoon:r>=4?i=ep.morning:i=ep.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Qd.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Qd.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):hs(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):hs(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Qd.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Qd.s(t,e)},S:function(t,e){return Qd.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return xL(r);case"XXXX":case"XX":return nf(r);case"XXXXX":case"XXX":default:return nf(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return xL(r);case"xxxx":case"xx":return nf(r);case"xxxxx":case"xxx":default:return nf(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+wL(r,":");case"OOOO":default:return"GMT"+nf(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+wL(r,":");case"zzzz":default:return"GMT"+nf(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return hs(r,e.length)},T:function(t,e,n){return hs(+t,e.length)}};function wL(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+hs(s,2)}function xL(t,e){return t%60===0?(t>0?"-":"+")+hs(Math.abs(t)/60,2):nf(t,e)}function nf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=hs(Math.trunc(r/60),2),s=hs(r%60,2);return n+i+e+s}const LL=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},MM=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Ore=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return LL(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",LL(r,e)).replace("{{time}}",MM(i,e))},t_={p:MM,P:Ore},Ire=/^D+$/,Bre=/^Y+$/,Rre=["D","DD","YY","YYYY"];function kM(t){return Ire.test(t)}function AM(t){return Bre.test(t)}function n_(t,e,n){const r=Fre(t,e,n);if(console.warn(r),Rre.includes(t))throw new RangeError(r)}function Fre(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const jre=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,zre=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$re=/^'([^]*?)'?$/,Vre=/''/g,Ure=/[a-zA-Z]/;function Hre(t,e,n){var h,p,v,g,x,E,D,M;const r=Ef(),i=(n==null?void 0:n.locale)??r.locale??CM,s=(n==null?void 0:n.firstWeekContainsDate)??((p=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(v=r.locale)==null?void 0:v.options)==null?void 0:g.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((E=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:E.weekStartsOn)??r.weekStartsOn??((M=(D=r.locale)==null?void 0:D.options)==null?void 0:M.weekStartsOn)??0,a=ii(t,n==null?void 0:n.in);if(!bM(a))throw new RangeError("Invalid time value");let l=e.match(zre).map(A=>{const z=A[0];if(z==="p"||z==="P"){const Y=t_[z];return Y(A,i.formatLong)}return A}).join("").match(jre).map(A=>{if(A==="''")return{isToken:!1,value:"'"};const z=A[0];if(z==="'")return{isToken:!1,value:Wre(A)};if(_L[z])return{isToken:!0,value:A};if(z.match(Ure))throw new RangeError("Format string contains an unescaped latin alphabet character `"+z+"`");return{isToken:!1,value:A}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(A=>{if(!A.isToken)return A.value;const z=A.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&AM(z)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&kM(z))&&n_(z,e,String(t));const Y=_L[z[0]];return Y(a,z,i.localize,c)}).join("")}function Wre(t){const e=t.match($re);return e?e[1].replace(Vre,"'"):t}function Gre(){return Object.assign({},Ef())}function qre(t,e){const n=ii(t,e==null?void 0:e.in).getDay();return n===0?7:n}function Yre(t,e){const n=Kre(e)?new e(0):Bo(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function Kre(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const Zre=10;class TM{constructor(){Je(this,"subPriority",0)}validate(e,n){return!0}}class Xre extends TM{constructor(e,n,r,i,s){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class Jre extends TM{constructor(n,r){super();Je(this,"priority",Zre);Je(this,"subPriority",-1);this.context=n||(i=>Bo(r,i))}set(n,r){return r.timestampIsSet?n:Bo(n,Yre(n,this.context))}}class ss{run(e,n,r,i){const s=this.parse(e,n,r,i);return s?{setter:new Xre(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,n,r){return!0}}class Qre extends ss{constructor(){super(...arguments);Je(this,"priority",140);Je(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,r,i){return r.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const ea={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Gc={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ta(t,e){return t&&{value:e(t.value),rest:t.rest}}function _o(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function qc(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(i*jm+s*Fm+o*Pne),rest:e.slice(n[0].length)}}function DM(t){return _o(ea.anyDigitsSigned,t)}function Ro(t,e){switch(t){case 1:return _o(ea.singleDigit,e);case 2:return _o(ea.twoDigits,e);case 3:return _o(ea.threeDigits,e);case 4:return _o(ea.fourDigits,e);default:return _o(new RegExp("^\\d{1,"+t+"}"),e)}}function cy(t,e){switch(t){case 1:return _o(ea.singleDigitSigned,e);case 2:return _o(ea.twoDigitsSigned,e);case 3:return _o(ea.threeDigitsSigned,e);case 4:return _o(ea.fourDigitsSigned,e);default:return _o(new RegExp("^-?\\d{1,"+t+"}"),e)}}function fw(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function NM(t,e){const n=e>0,r=n?e:1-e;let i;if(r<=50)i=t||100;else{const s=r+50,o=Math.trunc(s/100)*100,a=t>=s%100;i=t+o-(a?100:0)}return n?i:1-i}function OM(t){return t%400===0||t%4===0&&t%100!==0}class eie extends ss{constructor(){super(...arguments);Je(this,"priority",130);Je(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return ta(Ro(4,n),s);case"yo":return ta(i.ordinalNumber(n,{unit:"year"}),s);default:return ta(Ro(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i){const s=n.getFullYear();if(i.isTwoDigitYear){const a=NM(i.year,s);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class tie extends ss{constructor(){super(...arguments);Je(this,"priority",130);Je(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return ta(Ro(4,n),s);case"Yo":return ta(i.ordinalNumber(n,{unit:"year"}),s);default:return ta(Ro(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i,s){const o=hw(n,s);if(i.isTwoDigitYear){const l=NM(i.year,o);return n.setFullYear(l,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),nd(n,s)}const a=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(a,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),nd(n,s)}}class nie extends ss{constructor(){super(...arguments);Je(this,"priority",130);Je(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return cy(r==="R"?4:r.length,n)}set(n,r,i){const s=Bo(n,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),Ip(s)}}class rie extends ss{constructor(){super(...arguments);Je(this,"priority",130);Je(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return cy(r==="u"?4:r.length,n)}set(n,r,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class iie extends ss{constructor(){super(...arguments);Je(this,"priority",120);Je(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"Q":case"QQ":return Ro(r.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class sie extends ss{constructor(){super(...arguments);Je(this,"priority",120);Je(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"q":case"qq":return Ro(r.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class oie extends ss{constructor(){super(...arguments);Je(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Je(this,"priority",110)}parse(n,r,i){const s=o=>o-1;switch(r){case"M":return ta(_o(ea.month,n),s);case"MM":return ta(Ro(2,n),s);case"Mo":return ta(i.ordinalNumber(n,{unit:"month"}),s);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class aie extends ss{constructor(){super(...arguments);Je(this,"priority",110);Je(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,i){const s=o=>o-1;switch(r){case"L":return ta(_o(ea.month,n),s);case"LL":return ta(Ro(2,n),s);case"Lo":return ta(i.ordinalNumber(n,{unit:"month"}),s);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function lie(t,e,n){const r=ii(t,n==null?void 0:n.in),i=PM(r,n)-e;return r.setDate(r.getDate()-i*7),ii(r,n==null?void 0:n.in)}class uie extends ss{constructor(){super(...arguments);Je(this,"priority",100);Je(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,i){switch(r){case"w":return _o(ea.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return Ro(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i,s){return nd(lie(n,i,s),s)}}function cie(t,e,n){const r=ii(t,n==null?void 0:n.in),i=EM(r,n)-e;return r.setDate(r.getDate()-i*7),r}class die extends ss{constructor(){super(...arguments);Je(this,"priority",100);Je(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,i){switch(r){case"I":return _o(ea.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return Ro(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i){return Ip(cie(n,i))}}const hie=[31,28,31,30,31,30,31,31,30,31,30,31],fie=[31,29,31,30,31,30,31,31,30,31,30,31];class pie extends ss{constructor(){super(...arguments);Je(this,"priority",90);Je(this,"subPriority",1);Je(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"d":return _o(ea.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return Ro(r.length,n)}}validate(n,r){const i=n.getFullYear(),s=OM(i),o=n.getMonth();return s?r>=1&&r<=fie[o]:r>=1&&r<=hie[o]}set(n,r,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class gie extends ss{constructor(){super(...arguments);Je(this,"priority",90);Je(this,"subpriority",1);Je(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,i){switch(r){case"D":case"DD":return _o(ea.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return Ro(r.length,n)}}validate(n,r){const i=n.getFullYear();return OM(i)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function pw(t,e,n){var p,v,g,x;const r=Ef(),i=(n==null?void 0:n.weekStartsOn)??((v=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((x=(g=r.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,s=ii(t,n==null?void 0:n.in),o=s.getDay(),l=(e%7+7)%7,c=7-i,h=e<0||e>6?e-(o+c)%7:(l+c)%7-(o+c)%7;return Jy(s,h,n)}class mie extends ss{constructor(){super(...arguments);Je(this,"priority",90);Je(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=pw(n,i,s),n.setHours(0,0,0,0),n}}class vie extends ss{constructor(){super(...arguments);Je(this,"priority",90);Je(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return ta(Ro(r.length,n),o);case"eo":return ta(i.ordinalNumber(n,{unit:"day"}),o);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=pw(n,i,s),n.setHours(0,0,0,0),n}}class yie extends ss{constructor(){super(...arguments);Je(this,"priority",90);Je(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return ta(Ro(r.length,n),o);case"co":return ta(i.ordinalNumber(n,{unit:"day"}),o);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=pw(n,i,s),n.setHours(0,0,0,0),n}}function bie(t,e,n){const r=ii(t,n==null?void 0:n.in),i=qre(r,n),s=e-i;return Jy(r,s,n)}class _ie extends ss{constructor(){super(...arguments);Je(this,"priority",90);Je(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,i){const s=o=>o===0?7:o;switch(r){case"i":case"ii":return Ro(r.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return ta(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiii":return ta(i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiiii":return ta(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiii":default:return ta(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s)}}validate(n,r){return r>=1&&r<=7}set(n,r,i){return n=bie(n,i),n.setHours(0,0,0,0),n}}class wie extends ss{constructor(){super(...arguments);Je(this,"priority",80);Je(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(fw(i),0,0,0),n}}class xie extends ss{constructor(){super(...arguments);Je(this,"priority",80);Je(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(fw(i),0,0,0),n}}class Lie extends ss{constructor(){super(...arguments);Je(this,"priority",80);Je(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(fw(i),0,0,0),n}}class Sie extends ss{constructor(){super(...arguments);Je(this,"priority",70);Je(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,i){switch(r){case"h":return _o(ea.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return Ro(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,i){const s=n.getHours()>=12;return s&&i<12?n.setHours(i+12,0,0,0):!s&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class Cie extends ss{constructor(){super(...arguments);Je(this,"priority",70);Je(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,i){switch(r){case"H":return _o(ea.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return Ro(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,i){return n.setHours(i,0,0,0),n}}class Eie extends ss{constructor(){super(...arguments);Je(this,"priority",70);Je(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,i){switch(r){case"K":return _o(ea.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return Ro(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class Pie extends ss{constructor(){super(...arguments);Je(this,"priority",70);Je(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,i){switch(r){case"k":return _o(ea.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return Ro(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,i){const s=i<=24?i%24:i;return n.setHours(s,0,0,0),n}}class Mie extends ss{constructor(){super(...arguments);Je(this,"priority",60);Je(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"m":return _o(ea.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return Ro(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setMinutes(i,0,0),n}}class kie extends ss{constructor(){super(...arguments);Je(this,"priority",50);Je(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"s":return _o(ea.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return Ro(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setSeconds(i,0),n}}class Aie extends ss{constructor(){super(...arguments);Je(this,"priority",30);Je(this,"incompatibleTokens",["t","T"])}parse(n,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return ta(Ro(r.length,n),i)}set(n,r,i){return n.setMilliseconds(i),n}}class Tie extends ss{constructor(){super(...arguments);Je(this,"priority",10);Je(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return qc(Gc.basicOptionalMinutes,n);case"XX":return qc(Gc.basic,n);case"XXXX":return qc(Gc.basicOptionalSeconds,n);case"XXXXX":return qc(Gc.extendedOptionalSeconds,n);case"XXX":default:return qc(Gc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:Bo(n,n.getTime()-uy(n)-i)}}class Die extends ss{constructor(){super(...arguments);Je(this,"priority",10);Je(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return qc(Gc.basicOptionalMinutes,n);case"xx":return qc(Gc.basic,n);case"xxxx":return qc(Gc.basicOptionalSeconds,n);case"xxxxx":return qc(Gc.extendedOptionalSeconds,n);case"xxx":default:return qc(Gc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:Bo(n,n.getTime()-uy(n)-i)}}class Nie extends ss{constructor(){super(...arguments);Je(this,"priority",40);Je(this,"incompatibleTokens","*")}parse(n){return DM(n)}set(n,r,i){return[Bo(n,i*1e3),{timestampIsSet:!0}]}}class Oie extends ss{constructor(){super(...arguments);Je(this,"priority",20);Je(this,"incompatibleTokens","*")}parse(n){return DM(n)}set(n,r,i){return[Bo(n,i),{timestampIsSet:!0}]}}const Iie={G:new Qre,y:new eie,Y:new tie,R:new nie,u:new rie,Q:new iie,q:new sie,M:new oie,L:new aie,w:new uie,I:new die,d:new pie,D:new gie,E:new mie,e:new vie,c:new yie,i:new _ie,a:new wie,b:new xie,B:new Lie,h:new Sie,H:new Cie,K:new Eie,k:new Pie,m:new Mie,s:new kie,S:new Aie,X:new Tie,x:new Die,t:new Nie,T:new Oie},Bie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Rie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Fie=/^'([^]*?)'?$/,jie=/''/g,zie=/\S/,$ie=/[a-zA-Z]/;function Vie(t,e,n,r){var D,M,A,z,Y,ne,ge,pe;const i=()=>Bo((r==null?void 0:r.in)||n,NaN),s=Gre(),o=(r==null?void 0:r.locale)??s.locale??CM,a=(r==null?void 0:r.firstWeekContainsDate)??((M=(D=r==null?void 0:r.locale)==null?void 0:D.options)==null?void 0:M.firstWeekContainsDate)??s.firstWeekContainsDate??((z=(A=s.locale)==null?void 0:A.options)==null?void 0:z.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((ne=(Y=r==null?void 0:r.locale)==null?void 0:Y.options)==null?void 0:ne.weekStartsOn)??s.weekStartsOn??((pe=(ge=s.locale)==null?void 0:ge.options)==null?void 0:pe.weekStartsOn)??0;if(!e)return t?i():ii(n,r==null?void 0:r.in);const c={firstWeekContainsDate:a,weekStartsOn:l,locale:o},h=[new Jre(r==null?void 0:r.in,n)],p=e.match(Rie).map(O=>{const j=O[0];if(j in t_){const J=t_[j];return J(O,o.formatLong)}return O}).join("").match(Bie),v=[];for(let O of p){!(r!=null&&r.useAdditionalWeekYearTokens)&&AM(O)&&n_(O,e,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&kM(O)&&n_(O,e,t);const j=O[0],J=Iie[j];if(J){const{incompatibleTokens:U}=J;if(Array.isArray(U)){const V=v.find($=>U.includes($.token)||$.token===j);if(V)throw new RangeError(`The format string mustn't contain \`${V.fullToken}\` and \`${O}\` at the same time`)}else if(J.incompatibleTokens==="*"&&v.length>0)throw new RangeError(`The format string mustn't contain \`${O}\` and any other token at the same time`);v.push({token:j,fullToken:O});const R=J.run(t,O,o.match,c);if(!R)return i();h.push(R.setter),t=R.rest}else{if(j.match($ie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");if(O==="''"?O="'":j==="'"&&(O=Uie(O)),t.indexOf(O)===0)t=t.slice(O.length);else return i()}}if(t.length>0&&zie.test(t))return i();const g=h.map(O=>O.priority).sort((O,j)=>j-O).filter((O,j,J)=>J.indexOf(O)===j).map(O=>h.filter(j=>j.priority===O).sort((j,J)=>J.subPriority-j.subPriority)).map(O=>O[0]);let x=ii(n,r==null?void 0:r.in);if(isNaN(+x))return i();const E={};for(const O of g){if(!O.validate(x,c))return i();const j=O.set(x,E,c);Array.isArray(j)?(x=j[0],Object.assign(E,j[1])):x=j}return x}function Uie(t){return t.match(Fie)[1].replace(jie,"'")}function Hie(t,e){const n=ii(t,e==null?void 0:e.in);return n.setMinutes(0,0,0),n}function Wie(t,e){const n=ii(t,e==null?void 0:e.in);return n.setSeconds(0,0),n}function Gie(t,e){const n=ii(t,e==null?void 0:e.in);return n.setMilliseconds(0),n}function qie(t,e){const n=()=>Bo(e==null?void 0:e.in,NaN),r=(e==null?void 0:e.additionalDigits)??2,i=Xie(t);let s;if(i.date){const c=Jie(i.date,r);s=Qie(c.restDateString,c.year)}if(!s||isNaN(+s))return n();const o=+s;let a=0,l;if(i.time&&(a=ese(i.time),isNaN(a)))return n();if(i.timezone){if(l=tse(i.timezone),isNaN(l))return n()}else{const c=new Date(o+a),h=ii(0,e==null?void 0:e.in);return h.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),h.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),h}return ii(o+a+l,e==null?void 0:e.in)}const G0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Yie=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Kie=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Zie=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Xie(t){const e={},n=t.split(G0.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],G0.timeZoneDelimiter.test(e.date)&&(e.date=t.split(G0.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=G0.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function Jie(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function Qie(t,e){if(e===null)return new Date(NaN);const n=t.match(Yie);if(!n)return new Date(NaN);const r=!!n[4],i=mg(n[1]),s=mg(n[2])-1,o=mg(n[3]),a=mg(n[4]),l=mg(n[5])-1;if(r)return ose(e,a,l)?nse(e,a,l):new Date(NaN);{const c=new Date(0);return!ise(e,s,o)||!sse(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function mg(t){return t?parseInt(t):1}function ese(t){const e=t.match(Kie);if(!e)return NaN;const n=D2(e[1]),r=D2(e[2]),i=D2(e[3]);return ase(n,r,i)?n*jm+r*Fm+i*1e3:NaN}function D2(t){return t&&parseFloat(t.replace(",","."))||0}function tse(t){if(t==="Z")return 0;const e=t.match(Zie);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return lse(r,i)?n*(r*jm+i*Fm):NaN}function nse(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const rse=[31,null,31,30,31,30,31,31,30,31,30,31];function IM(t){return t%400===0||t%4===0&&t%100!==0}function ise(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(rse[e]||(IM(t)?29:28))}function sse(t,e){return e>=1&&e<=(IM(t)?366:365)}function ose(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function ase(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function lse(t,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const use={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};KP._date.override({_id:"date-fns",formats:function(){return use},parse:function(t,e){if(t===null||typeof t>"u")return null;const n=typeof t;return n==="number"||t instanceof Date?t=ii(t):n==="string"&&(typeof e=="string"?t=Vie(t,e,new Date,this.options):t=qie(t,this.options)),bM(t)?t.getTime():null},format:function(t,e){return Hre(t,e,this.options)},add:function(t,e,n){switch(n){case"millisecond":return cw(t,e);case"second":return Nne(t,e);case"minute":return Tne(t,e);case"hour":return Mne(t,e);case"day":return Jy(t,e);case"week":return One(t,e);case"month":return uw(t,e);case"quarter":return Dne(t,e);case"year":return Ine(t,e);default:return t}},diff:function(t,e,n){switch(n){case"millisecond":return dw(t,e);case"second":return Une(t,e);case"minute":return zne(t,e);case"hour":return jne(t,e);case"day":return _M(t,e);case"week":return Hne(t,e);case"month":return LM(t,e);case"quarter":return Vne(t,e);case"year":return Wne(t,e);default:return 0}},startOf:function(t,e,n){switch(e){case"second":return Gie(t);case"minute":return Wie(t);case"hour":return Hie(t);case"day":return e_(t);case"week":return nd(t);case"isoWeek":return nd(t,{weekStartsOn:+n});case"month":return qne(t);case"quarter":return Gne(t);case"year":return SM(t);default:return t}},endOf:function(t,e){switch(e){case"second":return Qne(t);case"minute":return Xne(t);case"hour":return Kne(t);case"day":return wM(t);case"week":return Zne(t);case"month":return xM(t);case"quarter":return Jne(t);case"year":return Yne(t);default:return t}}});const cse={class:"container mx-auto px-4 py-8"},dse={class:"mb-8"},hse={key:0,class:"mb-6"},fse={class:"flex gap-4"},pse=["disabled"],gse={key:0,value:""},mse=["value"],vse={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},yse={class:"flex"},bse={class:"ml-3"},_se={class:"text-sm font-medium text-red-800"},wse={class:"mb-6"},xse={class:"flex gap-4"},Lse=["disabled"],Sse={key:0,value:""},Cse={key:1,value:""},Ese=["value"],Pse=["disabled"],Mse={key:0,class:"mt-4 bg-white rounded-lg shadow-md p-4"},kse={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},Ase={class:"font-medium"},Tse={class:"font-medium"},Dse={class:"font-medium"},Nse={class:"font-medium"},Ose={class:"font-medium"},Ise={class:"font-medium"},Bse={class:"md:col-span-2 lg:col-span-3 flex items-center"},Rse=["href"],Fse={class:"mb-6"},jse={class:"border-b border-gray-200"},zse={class:"-mb-px flex space-x-8","aria-label":"Tabs"},$se=["onClick"],Vse={key:2,class:"mb-8"},Use={class:"text-sm text-gray-600 mb-4"},Hse={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Wse={class:"bg-white rounded-lg shadow-md p-6"},Gse={class:"text-4xl font-bold text-primary-600 mb-2"},qse={class:"text-sm text-gray-600"},Yse={class:"bg-white rounded-lg shadow-md p-6"},Kse={class:"text-4xl font-bold text-primary-600 mb-2"},Zse={class:"mt-4"},Xse={class:"w-full bg-gray-200 rounded-full h-2.5"},Jse={class:"bg-white rounded-lg shadow-md p-6"},Qse={class:"text-4xl font-bold text-primary-600 mb-2"},eoe={class:"text-sm text-gray-600"},toe={class:"bg-white rounded-lg shadow-md p-6"},noe={class:"text-4xl font-bold text-primary-600 mb-2"},roe={class:"text-sm text-gray-600"},ioe={class:"bg-white rounded-lg shadow-md p-6"},soe={class:"text-4xl font-bold text-primary-600 mb-2"},ooe={class:"text-sm text-gray-600"},aoe={class:"bg-white rounded-lg shadow-md p-6"},loe={class:"text-4xl font-bold text-primary-600 mb-2"},uoe={class:"text-sm text-gray-600"},coe={key:3,class:"mb-8"},doe={class:"flex justify-between items-center mb-4"},hoe={class:"flex items-center gap-4"},foe={key:0,class:"text-sm text-gray-600"},poe=["disabled"],goe={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},moe={key:0,class:"md:col-span-2 grid grid-cols-2 gap-4"},voe=["value"],yoe={key:0,class:"mt-1 text-sm text-red-600"},boe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},_oe={class:"bg-white rounded-lg shadow-md p-6"},woe={class:"chart-container"},xoe={class:"bg-white rounded-lg shadow-md p-6"},Loe={class:"chart-container"},Soe={class:"bg-white rounded-lg shadow-md p-6"},Coe={class:"chart-container"},Eoe={class:"bg-white rounded-lg shadow-md p-6"},Poe={class:"chart-container"},Moe={class:"bg-white rounded-lg shadow-md p-6"},koe={class:"chart-container"},Aoe={class:"bg-white rounded-lg shadow-md p-6"},Toe={class:"chart-container"},Doe=Hs({__name:"MeteoView",setup(t){const e=su(),n=xo(),r=Ct({}),i=Ct(new Date),s=Ct(""),o=Ct([]),a=Ct(""),l=Ct([]),c=Ct(null),h=Ct(""),p=Ct(""),v=Xn(()=>n.isAdmin);let g=null;const x=Xn(()=>!a.value||!o.value.length?null:o.value.find(ee=>ee.mac===a.value));function E(ee){return ee?ee.latitude&&ee.longitude&&ee.latitude!==0&&ee.longitude!==0:!1}function D(ee){return E(ee)?`${ee.latitude.toFixed(6)}, ${ee.longitude.toFixed(6)}`:""}function M(ee){if(!E(ee))return"#";const se=ee.latitude,le=ee.longitude,je=encodeURIComponent(ee.name||"Station météo");return`https://www.google.com/maps/search/?api=1&query=${se},${le}&query_place_id=${je}`}async function A(){try{h.value="";const ee={};v.value&&c.value&&(ee.entreprise=c.value),console.log("[fetchDevices] Appel API avec params:",ee);const se=await H1.getDevices(ee);console.log("[fetchDevices] Réponse API:",se.data);let le;if(se.data&&se.data.devices)le=se.data.devices;else if(Array.isArray(se.data))le=se.data;else if(le=[],typeof se.data=="object"&&se.data!==null){for(const je in se.data)if(Array.isArray(se.data[je])){le=se.data[je];break}}o.value=le.map(je=>{var $e,et;return{id:je.id,name:je.name||`Station ${je.mac}`,mac:je.mac,model:(($e=je.stationtype)==null?void 0:$e.split("_")[0])||"Inconnu",firmware_version:(et=je.stationtype)!=null&&et.includes("_V")?je.stationtype.split("_V")[1]:"1.0",timezone:je.date_zone_id||"UTC",created_at:je.createtime?new Date(je.createtime*1e3).toISOString():new Date().toISOString(),latitude:je.latitude||0,longitude:je.longitude||0}}),console.log("[fetchDevices] Appareils normalisés:",o.value),o.value.length>0?(a.value=o.value[0].mac,await z()):console.warn("[fetchDevices] Aucun appareil disponible")}catch(ee){console.error("[fetchDevices] Erreur lors de la récupération des appareils:",ee),ee.response&&ee.response.data&&ee.response.data.error?h.value=ee.response.data.error:(h.value="Erreur lors de la récupération des stations météo",e.error("Erreur lors de la récupération des stations météo")),o.value=[],a.value="",r.value={}}}async function z(){if(a.value)try{h.value="";const ee={mac:a.value};v.value&&c.value&&(ee.entreprise=c.value),console.log("[fetchWeatherData] Appel API avec params:",ee);const se=await H1.getRealTimeData(ee);console.log("[fetchWeatherData] Réponse API:",se.data),console.log("[fetchWeatherData] Structure de la réponse:",{hasData:se.data&&"data"in se.data,hasCode:se.data&&"code"in se.data,topLevelKeys:se.data?Object.keys(se.data):[]});let le;se.data&&"data"in se.data?le=se.data.data:se.data&&("outdoor"in se.data||"indoor"in se.data)?le=se.data:(le={},console.warn("[fetchWeatherData] Format de réponse non reconnu")),r.value=le,i.value=new Date,console.log("[fetchWeatherData] Données météo extraites:",r.value)}catch(ee){console.error("[fetchWeatherData] Erreur:",ee),ee.response&&ee.response.data&&ee.response.data.error?h.value=ee.response.data.error:(h.value="Erreur lors de la récupération des données météo",e.error("Erreur lors de la récupération des données météo")),r.value={}}}function Y(ee){if(ee==null)return"0";const se=typeof ee=="string"?parseFloat(ee):ee;return isNaN(se)?"0":((se-32)*5/9).toFixed(1)}function ne(ee){if(ee==null)return"0";const se=typeof ee=="string"?parseFloat(ee):ee;return isNaN(se)?"0":(se*1.60934).toFixed(1)}function ge(ee){if(ee==null)return"0";const se=typeof ee=="string"?parseFloat(ee):ee;return isNaN(se)?"0":(se*25.4).toFixed(1)}function pe(ee){if(ee==null)return"0";const se=typeof ee=="string"?parseFloat(ee):ee;return isNaN(se)?"0":(se*33.8639).toFixed(1)}function O(ee){if(!ee)return"N/A";const se=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSO","SO","OSO","O","ONO","NO","NNO"],le=Math.round(ee/22.5)%16;return se[le]}function j(ee){return ee?ee>0?"En hausse":"En baisse":"Stable"}async function J(){if(v.value)try{const ee=await hl.getUsers({role:"ENTREPRISE"});l.value=ee.data,l.value.length>0&&!c.value&&(c.value=l.value[0].id)}catch(ee){console.error("Erreur lors de la récupération des entreprises:",ee),e.error("Erreur lors de la récupération des entreprises")}}async function U(){try{o.value=[],a.value="",r.value={},h.value="",Object.values(ye).forEach(ee=>{try{ee.destroy()}catch(se){console.error("Erreur lors de la destruction d'un graphique:",se)}}),ye={},await A()}catch(ee){console.error("Erreur lors de la récupération des appareils avec l'entreprise:",ee),e.error("Erreur lors du changement d'entreprise")}}const R=[{id:"realtime",name:"Temps réel"},{id:"history",name:"Historique"}],V=Ct("realtime"),$=Ct("today"),B=Ct("5min"),I=Ct(""),Q=Ct(""),G=()=>{const ee=new Date,se=new Date(ee);se.setDate(ee.getDate()-1),I.value=se.toISOString().split("T")[0],Q.value=se.toISOString().split("T")[0]},_e=[{value:"5min",label:"5 minutes",maxDays:1,maxPastDays:90},{value:"30min",label:"30 minutes",maxDays:7,maxPastDays:365},{value:"4hour",label:"4 heures",maxDays:31,maxPastDays:730},{value:"1day",label:"1 jour",maxDays:365,maxPastDays:1460}],ve=Xn(()=>{const ee=he(),se=new Date(ee.start),le=new Date(ee.end);le.setHours(23,59,59,999);const je=Math.abs(le.getTime()-se.getTime()),$e=Math.ceil(je/(1e3*60*60*24)),Ee=Math.abs(new Date().getTime()-se.getTime()),me=Math.ceil(Ee/(1e3*60*60*24));return _e.filter(We=>$e<=We.maxDays&&me<=We.maxPastDays)});Ti($,ee=>{ee==="custom"&&G(),!ve.value.some(le=>le.value===B.value)&&ve.value.length>0&&(B.value=ve.value[0].value)}),Ti([I,Q],()=>{$.value==="custom"&&!ve.value.some(se=>se.value===B.value)&&ve.value.length>0&&(B.value=ve.value[0].value)});const qe=Ct(null),re=Ct(null),K=Ct(null),Z=Ct(null),oe=Ct(null),de=Ct(null);let ye={};const he=()=>{let ee=new Date,se=new Date;switch($.value){case"today":ee.setHours(0,0,0,0);break;case"yesterday":ee.setDate(ee.getDate()-1),ee.setHours(0,0,0,0),se.setDate(se.getDate()-1),se.setHours(23,59,59,999);break;case"week":ee.setDate(ee.getDate()-7);break;case"month":ee.setDate(ee.getDate()-30);break;case"custom":ee=new Date(I.value),se=new Date(Q.value);break}return{start:ee.toISOString().split("T")[0],end:se.toISOString().split("T")[0]}},X=async()=>{try{if(Ae.value){console.log("[updateAllCharts] Mise à jour déjà en cours, annulation");return}if(Ae.value=!0,ve.value.length===0){e.warning("Aucun intervalle disponible pour cette période"),Ae.value=!1;return}ve.value.some(je=>je.value===B.value)||(B.value=ve.value[0].value),console.log("[updateAllCharts] Début de la mise à jour des graphiques");const se=he(),le={mac:a.value,start_date:se.start,end_date:se.end,cycle_type:B.value};v.value&&c.value&&(le.entreprise=c.value),console.log("[updateAllCharts] Récupération des données historiques:",le);try{const $e=(await H1.getHistoryData(le)).data;console.log("[updateAllCharts] Données historiques reçues:",$e);const et=[{type:"temp",ref:qe},{type:"humidity",ref:re},{type:"pressure",ref:K},{type:"wind",ref:Z},{type:"rain",ref:oe},{type:"solar",ref:de}];for(const Ee of et)if(console.log(`[updateAllCharts] Mise à jour du graphique ${Ee.type}`),Ee.ref.value){const me=fe($e,Ee.type);De(Ee.type,Ee.ref.value,me)}s.value=new Date().toLocaleString()}catch(je){console.error("[updateAllCharts] Erreur lors de la récupération des données:",je),e.error("Erreur lors de la récupération des données historiques")}finally{Ae.value=!1}}catch(ee){console.error("[updateAllCharts] Erreur lors de la mise à jour des graphiques:",ee),e.error("Erreur lors de la mise à jour des graphiques"),Ae.value=!1}},Ae=Ct(!1),De=(ee,se,le)=>{try{if(ye[ee]&&(ye[ee].destroy(),delete ye[ee]),console.log(`[updateChart] Données reçues pour ${ee}:`,le),!le.datasets||!le.datasets.length){console.warn(`[updateChart] Pas de datasets pour ${ee}`),ye[ee]=new Wc(se,{type:"line",data:{labels:[],datasets:[]},options:{plugins:{title:{display:!0,text:"Aucune donnée disponible"}}}});return}let je="hour";B.value==="5min"||B.value==="30min"?je="hour":(B.value==="4hour"||B.value==="1day")&&(je="day");const $e=he(),et=new Date($e.start),Ee=new Date($e.end);Ee.setHours(23,59,59,999);const me={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{title:function(We){return We.length>0?new Date(We[0].parsed.x).toLocaleString():""}}}},scales:{x:{type:"time",time:{unit:je,displayFormats:{hour:"HH:mm",day:"dd/MM",week:"dd/MM",month:"MM/yyyy"}},min:et.getTime(),max:Ee.getTime(),title:{display:!0,text:"Date/Heure"}},y:{beginAtZero:!0,title:{display:!0,text:Xe(ee)},ticks:{callback:function(We){const ct=typeof We=="string"?parseFloat(We):We;switch(ee){case"temp":return ct.toFixed(1)+"°C";case"humidity":return ct.toFixed(0)+"%";case"pressure":return ct.toFixed(0)+" hPa";case"wind":case"rain":return ct.toFixed(1)+(ee==="wind"?" km/h":" mm");case"solar":return ct.toFixed(0)+" W/m²";default:return ct}}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};ye[ee]=new Wc(se,{type:"line",data:{datasets:le.datasets||[]},options:me}),console.log(`[updateChart] Graphique ${ee} créé avec ${le.datasets.length} datasets`)}catch(je){console.error(`[updateChart] Erreur lors de la mise à jour du graphique ${ee}:`,je)}},Xe=ee=>{switch(ee){case"temp":return"Température (°C)";case"humidity":return"Humidité (%)";case"pressure":return"Pression (hPa)";case"wind":return"Vitesse (km/h)";case"rain":return"Précipitations (mm)";case"solar":return"Rayonnement (W/m²)";default:return""}},fe=(ee,se)=>{var et,Ee,me,We,ct,pt,gt,st,qt,gn,Qe,lt,it,$t,Jt,Dn,vn,Tn,Jn;if(console.log(`[formatHistoryDataForChart] Données reçues pour ${se}:`,ee),!ee)return console.warn(`[formatHistoryDataForChart] Pas de données pour ${se}`),null;let le;if("data"in ee)le=ee.data;else if(se in ee)le=ee;else return console.warn(`[formatHistoryDataForChart] Structure de données non reconnue pour ${se}`),null;console.log(`[formatHistoryDataForChart] Données extraites pour ${se}:`,le);const je=[],$e=(en,xn,Cn,er)=>{if(!Array.isArray(en)){console.warn(`[formatHistoryDataForChart] Les données pour ${xn} ne sont pas un tableau`);return}const pr=en.map(xr=>{const lr=parseFloat(String(xr.value));return{x:xr.time,y:er?er(lr):lr}}).filter(xr=>!isNaN(xr.y));pr.length>0&&je.push({label:xn,data:pr,borderColor:Cn,fill:!1,tension:.4})};switch(se){case"temp":(Ee=(et=le.outdoor)==null?void 0:et.temperature)!=null&&Ee.list?$e(Object.entries(le.outdoor.temperature.list).map(([en,xn])=>({time:parseInt(en)*1e3,value:xn})),"Température","#FF6384",en=>(en-32)*5/9):(me=le.outdoor)!=null&&me.temperature&&$e(le.outdoor.temperature,"Température","#FF6384",en=>(en-32)*5/9);break;case"humidity":(ct=(We=le.outdoor)==null?void 0:We.humidity)!=null&&ct.list?$e(Object.entries(le.outdoor.humidity.list).map(([en,xn])=>({time:parseInt(en)*1e3,value:xn})),"Humidité","#36A2EB"):(pt=le.outdoor)!=null&&pt.humidity&&$e(le.outdoor.humidity,"Humidité","#36A2EB");break;case"pressure":(st=(gt=le.pressure)==null?void 0:gt.absolute)!=null&&st.list?$e(Object.entries(le.pressure.absolute.list).map(([en,xn])=>({time:parseInt(en)*1e3,value:xn})),"Pression","#4BC0C0",en=>en*33.8639):(qt=le.pressure)!=null&&qt.absolute&&$e(le.pressure.absolute,"Pression","#4BC0C0",en=>en*33.8639);break;case"wind":(Qe=(gn=le.wind)==null?void 0:gn.wind_speed)!=null&&Qe.list?($e(Object.entries(le.wind.wind_speed.list).map(([en,xn])=>({time:parseInt(en)*1e3,value:xn})),"Vitesse du vent","#FFCE56",en=>en*1.60934),(lt=le.wind.wind_gust)!=null&&lt.list&&$e(Object.entries(le.wind.wind_gust.list).map(([en,xn])=>({time:parseInt(en)*1e3,value:xn})),"Rafales","#FF9F40",en=>en*1.60934)):(it=le.wind)!=null&&it.wind_speed&&($e(le.wind.wind_speed,"Vitesse du vent","#FFCE56",en=>en*1.60934),le.wind.wind_gust&&$e(le.wind.wind_gust,"Rafales","#FF9F40",en=>en*1.60934));break;case"rain":(Jt=($t=le.rainfall)==null?void 0:$t.daily)!=null&&Jt.list?$e(Object.entries(le.rainfall.daily.list).map(([en,xn])=>({time:parseInt(en)*1e3,value:xn})),"Précipitations journalières","#9966FF",en=>en*25.4):(Dn=le.rainfall)!=null&&Dn.daily&&$e(le.rainfall.daily,"Précipitations journalières","#9966FF",en=>en*25.4);break;case"solar":(Tn=(vn=le.solar_and_uvi)==null?void 0:vn.solar)!=null&&Tn.list?$e(Object.entries(le.solar_and_uvi.solar.list).map(([en,xn])=>({time:parseInt(en)*1e3,value:xn})),"Rayonnement solaire","#FF9F40"):(Jn=le.solar_and_uvi)!=null&&Jn.solar&&$e(le.solar_and_uvi.solar,"Rayonnement solaire","#FF9F40");break}return console.log(`[formatHistoryDataForChart] Datasets générés pour ${se}:`,je),{datasets:je}};return Zu(()=>{Object.values(ye).forEach(ee=>ee.destroy())}),Ti([$,B,I,Q],()=>{V.value==="history"&&a.value&&X()}),Lo(async()=>{const ee=[];v.value&&ee.push(J()),await Promise.all(ee),await A(),g=window.setInterval(z,5*60*1e3)}),Ti(c,ee=>{v.value&&ee&&U()}),Ti(a,ee=>{ee&&V.value==="history"&&X()}),Ti(V,ee=>{ee==="history"&&a.value&&X()}),Zu(()=>{g&&clearInterval(g)}),(ee,se)=>{var le,je,$e,et,Ee,me,We,ct,pt,gt,st,qt,gn,Qe,lt,it,$t,Jt,Dn,vn,Tn,Jn,en,xn,Cn,er,pr,xr,lr,Jr,Bs,Di,Fo,Rs,tr,Fs,jo,gs;return Ne(),Be("div",cse,[S("div",dse,[se[38]||(se[38]=S("h1",{class:"text-3xl font-bold mb-4"},"Météo",-1)),v.value?(Ne(),Be("div",hse,[se[6]||(se[6]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sélectionner une entreprise ",-1)),S("div",fse,[kn(S("select",{"onUpdate:modelValue":se[0]||(se[0]=qn=>c.value=qn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!l.value.length,onChange:U},[l.value.length?Zt("",!0):(Ne(),Be("option",gse,"Chargement des entreprises...")),(Ne(!0),Be(wn,null,Qn(l.value,qn=>(Ne(),Be("option",{key:qn.id,value:qn.id},kt(qn.company_name||`${qn.first_name} ${qn.last_name}`),9,mse))),128))],40,pse),[[Zi,c.value]])])])):Zt("",!0),h.value?(Ne(),Be("div",vse,[S("div",yse,[se[7]||(se[7]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",bse,[S("h3",_se,kt(h.value),1)])])])):Zt("",!0),S("div",wse,[se[17]||(se[17]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sélectionner une station ",-1)),S("div",xse,[kn(S("select",{"onUpdate:modelValue":se[1]||(se[1]=qn=>a.value=qn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!!(!o.value.length||h.value)},[!o.value.length&&!h.value?(Ne(),Be("option",Sse,"Chargement des stations...")):Zt("",!0),h.value?(Ne(),Be("option",Cse,"Aucune station disponible")):Zt("",!0),(Ne(!0),Be(wn,null,Qn(o.value,qn=>(Ne(),Be("option",{key:qn.mac,value:qn.mac},kt(qn.name)+" ("+kt(qn.model)+" - v"+kt(qn.firmware_version)+") ",9,Ese))),128))],8,Lse),[[Zi,a.value]]),S("button",{onClick:z,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!!(!a.value||h.value)}," Actualiser ",8,Pse)]),x.value?(Ne(),Be("div",Mse,[se[16]||(se[16]=S("h3",{class:"text-lg font-semibold mb-2"},"Informations sur la station",-1)),S("div",kse,[S("div",null,[se[8]||(se[8]=S("span",{class:"text-gray-500"},"Modèle:",-1)),S("p",Ase,kt(x.value.model),1)]),S("div",null,[se[9]||(se[9]=S("span",{class:"text-gray-500"},"Version:",-1)),S("p",Tse,kt(x.value.firmware_version),1)]),S("div",null,[se[10]||(se[10]=S("span",{class:"text-gray-500"},"ID:",-1)),S("p",Dse,kt(x.value.id),1)]),S("div",null,[se[11]||(se[11]=S("span",{class:"text-gray-500"},"MAC:",-1)),S("p",Nse,kt(x.value.mac),1)]),S("div",null,[se[12]||(se[12]=S("span",{class:"text-gray-500"},"Fuseau horaire:",-1)),S("p",Ose,kt(x.value.timezone),1)]),S("div",null,[se[13]||(se[13]=S("span",{class:"text-gray-500"},"Installation:",-1)),S("p",Ise,kt(new Date(x.value.created_at).toLocaleDateString()),1)]),S("div",Bse,[se[15]||(se[15]=S("span",{class:"text-gray-500 mr-2"},"Position:",-1)),E(x.value)?(Ne(),Be("a",{key:0,href:M(x.value),target:"_blank",class:"text-primary-600 hover:text-primary-800 flex items-center",title:"Ouvrir dans Google Maps"},[se[14]||(se[14]=S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),ri(" "+kt(D(x.value)),1)],8,Rse)):Zt("",!0)])])])):Zt("",!0)]),S("div",Fse,[S("div",jse,[S("nav",zse,[(Ne(),Be(wn,null,Qn(R,qn=>S("button",{key:qn.id,onClick:Ze=>V.value=qn.id,class:Ii([V.value===qn.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},kt(qn.name),11,$se)),64))])])]),V.value==="realtime"?(Ne(),Be("div",Vse,[S("p",Use," Dernière mise à jour : "+kt(i.value?new Date(i.value).toLocaleString():"Jamais"),1),S("div",Hse,[S("div",Wse,[se[18]||(se[18]=S("h2",{class:"text-xl font-semibold mb-4"},"Température Extérieure",-1)),S("div",Gse,kt(Y((je=(le=r.value.outdoor)==null?void 0:le.temperature)==null?void 0:je.value))+"°C ",1),S("div",qse," Min: "+kt(Y(((et=($e=r.value.outdoor)==null?void 0:$e.temperature)==null?void 0:et.min)||"0"))+"°C Max: "+kt(Y(((me=(Ee=r.value.outdoor)==null?void 0:Ee.temperature)==null?void 0:me.max)||"0"))+"°C ",1)]),S("div",Yse,[se[19]||(se[19]=S("h2",{class:"text-xl font-semibold mb-4"},"Humidité",-1)),S("div",Kse,kt(((ct=(We=r.value.outdoor)==null?void 0:We.humidity)==null?void 0:ct.value)||"0")+"% ",1),S("div",Zse,[S("div",Xse,[S("div",{class:"bg-primary-600 h-2.5 rounded-full",style:ru({width:`${((gt=(pt=r.value.outdoor)==null?void 0:pt.humidity)==null?void 0:gt.value)||0}%`})},null,4)])])]),S("div",Jse,[se[20]||(se[20]=S("h2",{class:"text-xl font-semibold mb-4"},"Pression Atmosphérique",-1)),S("div",Qse,kt(pe((qt=(st=r.value.pressure)==null?void 0:st.absolute)==null?void 0:qt.value))+" hPa ",1),S("div",eoe," Tendance: "+kt(j((Qe=(gn=r.value.pressure)==null?void 0:gn.absolute)==null?void 0:Qe.trend)),1)]),S("div",toe,[se[22]||(se[22]=S("h2",{class:"text-xl font-semibold mb-4"},"Vent",-1)),S("div",noe,kt(ne(((it=(lt=r.value.wind)==null?void 0:lt.speed)==null?void 0:it.value)||((Jt=($t=r.value.wind)==null?void 0:$t.wind_speed)==null?void 0:Jt.value)))+" km/h ",1),S("div",roe,[ri(" Direction: "+kt(O(((vn=(Dn=r.value.wind)==null?void 0:Dn.direction)==null?void 0:vn.value)||((Jn=(Tn=r.value.wind)==null?void 0:Tn.wind_direction)==null?void 0:Jn.value)))+" ",1),se[21]||(se[21]=S("br",null,null,-1)),ri(" Rafales: "+kt(ne(((xn=(en=r.value.wind)==null?void 0:en.gust)==null?void 0:xn.value)||((er=(Cn=r.value.wind)==null?void 0:Cn.wind_gust)==null?void 0:er.value)))+" km/h ",1)])]),S("div",ioe,[se[24]||(se[24]=S("h2",{class:"text-xl font-semibold mb-4"},"Précipitations",-1)),S("div",soe,kt(ge((xr=(pr=r.value.rainfall)==null?void 0:pr.daily)==null?void 0:xr.value))+" mm ",1),S("div",ooe,[ri(" Taux: "+kt(ge(((Jr=(lr=r.value.rainfall)==null?void 0:lr.rate)==null?void 0:Jr.value)||((Di=(Bs=r.value.rainfall)==null?void 0:Bs.rain_rate)==null?void 0:Di.value)))+" mm/h ",1),se[23]||(se[23]=S("br",null,null,-1)),ri(" Mensuel: "+kt(ge((Rs=(Fo=r.value.rainfall)==null?void 0:Fo.monthly)==null?void 0:Rs.value))+" mm ",1)])]),S("div",aoe,[se[25]||(se[25]=S("h2",{class:"text-xl font-semibold mb-4"},"Rayonnement",-1)),S("div",loe,kt(((Fs=(tr=r.value.solar_and_uvi)==null?void 0:tr.solar)==null?void 0:Fs.value)||"0")+" W/m² ",1),S("div",uoe," UV: "+kt(((gs=(jo=r.value.solar_and_uvi)==null?void 0:jo.uvi)==null?void 0:gs.value)||"0"),1)])])])):V.value==="history"?(Ne(),Be("div",coe,[S("div",doe,[se[26]||(se[26]=S("h2",{class:"text-xl font-semibold"},"Données historiques",-1)),S("div",hoe,[s.value?(Ne(),Be("div",foe," Dernière mise à jour: "+kt(s.value),1)):Zt("",!0),S("button",{onClick:X,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!a.value}," Actualiser ",8,poe)])]),S("div",goe,[S("div",null,[se[28]||(se[28]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Période ",-1)),kn(S("select",{"onUpdate:modelValue":se[2]||(se[2]=qn=>$.value=qn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},se[27]||(se[27]=[tu('<option value="today" data-v-9a089f70>Aujourd&#39;hui</option><option value="yesterday" data-v-9a089f70>Hier</option><option value="week" data-v-9a089f70>7 derniers jours</option><option value="month" data-v-9a089f70>30 derniers jours</option><option value="custom" data-v-9a089f70>Période personnalisée</option>',5)]),512),[[Zi,$.value]])]),$.value==="custom"?(Ne(),Be("div",moe,[S("div",null,[se[29]||(se[29]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de début ",-1)),kn(S("input",{type:"date","onUpdate:modelValue":se[3]||(se[3]=qn=>I.value=qn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[zr,I.value]])]),S("div",null,[se[30]||(se[30]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de fin ",-1)),kn(S("input",{type:"date","onUpdate:modelValue":se[4]||(se[4]=qn=>Q.value=qn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[zr,Q.value]])])])):Zt("",!0),S("div",null,[se[31]||(se[31]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Intervalle ",-1)),kn(S("select",{"onUpdate:modelValue":se[5]||(se[5]=qn=>B.value=qn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},[(Ne(!0),Be(wn,null,Qn(ve.value,qn=>(Ne(),Be("option",{key:qn.value,value:qn.value},kt(qn.label),9,voe))),128))],512),[[Zi,B.value]]),p.value?(Ne(),Be("div",yoe,kt(p.value),1)):Zt("",!0)])]),S("div",boe,[S("div",_oe,[se[32]||(se[32]=S("h3",{class:"text-lg font-semibold mb-4"},"Température",-1)),S("div",woe,[S("canvas",{ref_key:"tempChart",ref:qe},null,512)])]),S("div",xoe,[se[33]||(se[33]=S("h3",{class:"text-lg font-semibold mb-4"},"Humidité",-1)),S("div",Loe,[S("canvas",{ref_key:"humidityChart",ref:re},null,512)])]),S("div",Soe,[se[34]||(se[34]=S("h3",{class:"text-lg font-semibold mb-4"},"Pression",-1)),S("div",Coe,[S("canvas",{ref_key:"pressureChart",ref:K},null,512)])]),S("div",Eoe,[se[35]||(se[35]=S("h3",{class:"text-lg font-semibold mb-4"},"Vent",-1)),S("div",Poe,[S("canvas",{ref_key:"windChart",ref:Z},null,512)])]),S("div",Moe,[se[36]||(se[36]=S("h3",{class:"text-lg font-semibold mb-4"},"Précipitations",-1)),S("div",koe,[S("canvas",{ref_key:"rainChart",ref:oe},null,512)])]),S("div",Aoe,[se[37]||(se[37]=S("h3",{class:"text-lg font-semibold mb-4"},"Rayonnement",-1)),S("div",Toe,[S("canvas",{ref_key:"solarChart",ref:de},null,512)])])])])):Zt("",!0)])])}}}),Noe=rd(Doe,[["__scopeId","data-v-9a089f70"]]),BM=ZB({history:PB("/"),routes:[{path:"/",name:"home",component:R5,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/meteo",name:"meteo",component:Noe,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/plans",name:"plans",component:KK,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/users",name:"users",component:_Y,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie"]}},{path:"/profile",name:"profile",component:()=>kd(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/login",name:"login",component:Oj,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>kd(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>kd(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:nj,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/notes",name:"notes",component:wX,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/map",name:"map",component:R5,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>kd(()=>import("./NotFoundView.js"),[])}]});BM.beforeEach(async(t,e,n)=>{var a,l;const r=xo();if(console.log("Route:",t.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(c){console.error("Error initializing auth store:",c)}const i=r.isAuthenticated,s=(a=r.user)==null?void 0:a.must_change_password,o=(l=r.user)==null?void 0:l.user_type;if(t.meta.requiresAuth&&!i){n("/login");return}if(i&&s&&t.name!=="changePassword"){n({name:"changePassword"});return}if(t.name==="changePassword"&&!s){n({name:"home"});return}if(t.meta.allowedRoles&&o&&!t.meta.allowedRoles.includes(o)){n({name:"home"});return}if(t.meta.requiresGuest&&i){n({name:"home"});return}n()});function Ooe(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(p=!0)=>{await l};async function h(){if("serviceWorker"in navigator){if(a=await kd(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/static/frontend/sw.js",{scope:"/static/frontend/",type:"classic"})).catch(p=>{o==null||o(p)}),!a)return;a.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),a.addEventListener("installed",p=>{p.isUpdate||r==null||r()}),a.register({immediate:e}).then(p=>{s?s("/static/frontend/sw.js",p):i==null||i(p)}).catch(p=>{o==null||o(p)})}}return l=h(),c}const gw=Rv(O9),RM=iI();gw.use(RM);gw.use(BM);const Ioe=xo(RM);window.INITIAL_STATE&&Ioe.initialize(window.INITIAL_STATE);gw.mount("#app");Ooe({immediate:!0,onRegistered(t){t&&console.log("SW enregistré:",t)},onRegisterError(t){console.error("Erreur d'enregistrement du SW:",t)},onOfflineReady(){console.log("L'application est prête à être utilisée hors ligne")}});export{ps as _,ou as a,S as b,Be as c,Hs as d,Zt as e,Vn as f,ri as g,kn as h,Ne as i,tu as j,yi as k,Gu as l,bS as m,Ii as n,Lo as o,JB as p,Nm as q,Ct as r,Aa as s,kt as t,xo as u,zr as v,nu as w,B_ as x};

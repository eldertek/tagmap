var aD=Object.defineProperty;var lD=(t,e,n)=>e in t?aD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Xe=(t,e,n)=>lD(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ny(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const vi={},ip=[],zu=()=>{},uD=()=>!1,ym=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Hb=t=>t.startsWith("onUpdate:"),ts=Object.assign,Gb=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},cD=Object.prototype.hasOwnProperty,Ii=(t,e)=>cD.call(t,e),Jn=Array.isArray,sp=t=>Pp(t)==="[object Map]",pf=t=>Pp(t)==="[object Set]",mx=t=>Pp(t)==="[object Date]",hD=t=>Pp(t)==="[object RegExp]",Lr=t=>typeof t=="function",hs=t=>typeof t=="string",yc=t=>typeof t=="symbol",Hi=t=>t!==null&&typeof t=="object",Wb=t=>(Hi(t)||Lr(t))&&Lr(t.then)&&Lr(t.catch),pL=Object.prototype.toString,Pp=t=>pL.call(t),dD=t=>Pp(t).slice(8,-1),ry=t=>Pp(t)==="[object Object]",qb=t=>hs(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,op=ny(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),iy=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},fD=/-(\w)/g,La=iy(t=>t.replace(fD,(e,n)=>n?n.toUpperCase():"")),pD=/\B([A-Z])/g,Gl=iy(t=>t.replace(pD,"-$1").toLowerCase()),bm=iy(t=>t.charAt(0).toUpperCase()+t.slice(1)),Sg=iy(t=>t?`on${bm(t)}`:""),vl=(t,e)=>!Object.is(t,e),ap=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},gL=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},gv=t=>{const e=parseFloat(t);return isNaN(e)?t:e},mv=t=>{const e=hs(t)?Number(t):NaN;return isNaN(e)?t:e};let vx;const sy=()=>vx||(vx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),gD="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",mD=ny(gD);function Yl(t){if(Jn(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=hs(r)?_D(r):Yl(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(hs(t)||Hi(t))return t}const vD=/;(?![^(]*\))/g,yD=/:([^]+)/,bD=/\/\*[^]*?\*\//g;function _D(t){const e={};return t.replace(bD,"").split(vD).forEach(n=>{if(n){const r=n.split(yD);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function xi(t){let e="";if(hs(t))e=t;else if(Jn(t))for(let n=0;n<t.length;n++){const r=xi(t[n]);r&&(e+=r+" ")}else if(Hi(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function wD(t){if(!t)return null;let{class:e,style:n}=t;return e&&!hs(e)&&(t.class=xi(e)),n&&(t.style=Yl(n)),t}const xD="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",LD=ny(xD);function mL(t){return!!t||t===""}function SD(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=pd(t[r],e[r]);return n}function pd(t,e){if(t===e)return!0;let n=mx(t),r=mx(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=yc(t),r=yc(e),n||r)return t===e;if(n=Jn(t),r=Jn(e),n||r)return n&&r?SD(t,e):!1;if(n=Hi(t),r=Hi(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!pd(t[o],e[o]))return!1}}return String(t)===String(e)}function oy(t,e){return t.findIndex(n=>pd(n,e))}const vL=t=>!!(t&&t.__v_isRef===!0),Tt=t=>hs(t)?t:t==null?"":Jn(t)||Hi(t)&&(t.toString===pL||!Lr(t.toString))?vL(t)?Tt(t.value):JSON.stringify(t,yL,2):String(t),yL=(t,e)=>vL(e)?yL(t,e.value):sp(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[m1(r,s)+" =>"]=i,n),{})}:pf(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>m1(n))}:yc(e)?m1(e):Hi(e)&&!Jn(e)&&!ry(e)?String(e):e,m1=(t,e="")=>{var n;return yc(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ml;class Yb{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ml,!e&&ml&&(this.index=(ml.scopes||(ml.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=ml;try{return ml=this,e()}finally{ml=n}}}on(){ml=this}off(){ml=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Kb(t){return new Yb(t)}function Zb(){return ml}function bL(t,e=!1){ml&&ml.cleanups.push(t)}let us;const v1=new WeakSet;class Yg{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ml&&ml.active&&ml.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,v1.has(this)&&(v1.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||wL(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,yx(this),xL(this);const e=us,n=mc;us=this,mc=!0;try{return this.fn()}finally{LL(this),us=e,mc=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Qb(e);this.deps=this.depsTail=void 0,yx(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?v1.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){x2(this)&&this.run()}get dirty(){return x2(this)}}let _L=0,Cg,Eg;function wL(t,e=!1){if(t.flags|=8,e){t.next=Eg,Eg=t;return}t.next=Cg,Cg=t}function Xb(){_L++}function Jb(){if(--_L>0)return;if(Eg){let e=Eg;for(Eg=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Cg;){let e=Cg;for(Cg=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function xL(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function LL(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),Qb(r),CD(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function x2(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(SL(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function SL(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Kg))return;t.globalVersion=Kg;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!x2(t)){t.flags&=-3;return}const n=us,r=mc;us=t,mc=!0;try{xL(t);const i=t.fn(t._value);(e.version===0||vl(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{us=n,mc=r,LL(t),t.flags&=-3}}function Qb(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)Qb(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function CD(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}function ED(t,e){t.effect instanceof Yg&&(t=t.effect.fn);const n=new Yg(t);e&&ts(n,e);try{n.run()}catch(i){throw n.stop(),i}const r=n.run.bind(n);return r.effect=n,r}function MD(t){t.effect.stop()}let mc=!0;const CL=[];function wd(){CL.push(mc),mc=!1}function xd(){const t=CL.pop();mc=t===void 0?!0:t}function yx(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=us;us=void 0;try{e()}finally{us=n}}}let Kg=0;class PD{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ay{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!us||!mc||us===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==us)n=this.activeLink=new PD(us,this),us.deps?(n.prevDep=us.depsTail,us.depsTail.nextDep=n,us.depsTail=n):us.deps=us.depsTail=n,EL(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=us.depsTail,n.nextDep=void 0,us.depsTail.nextDep=n,us.depsTail=n,us.deps===n&&(us.deps=r)}return n}trigger(e){this.version++,Kg++,this.notify(e)}notify(e){Xb();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Jb()}}}function EL(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)EL(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const vv=new WeakMap,Qd=Symbol(""),L2=Symbol(""),Zg=Symbol("");function Ga(t,e,n){if(mc&&us){let r=vv.get(t);r||vv.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new ay),i.map=r,i.key=n),i.track()}}function xh(t,e,n,r,i,s){const o=vv.get(t);if(!o){Kg++;return}const a=l=>{l&&l.trigger()};if(Xb(),e==="clear")o.forEach(a);else{const l=Jn(t),c=l&&qb(n);if(l&&n==="length"){const d=Number(r);o.forEach((p,v)=>{(v==="length"||v===Zg||!yc(v)&&v>=d)&&a(p)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(Zg)),e){case"add":l?c&&a(o.get("length")):(a(o.get(Qd)),sp(t)&&a(o.get(L2)));break;case"delete":l||(a(o.get(Qd)),sp(t)&&a(o.get(L2)));break;case"set":sp(t)&&a(o.get(Qd));break}}Jb()}function kD(t,e){const n=vv.get(t);return n&&n.get(e)}function Bf(t){const e=mi(t);return e===t?e:(Ga(e,"iterate",Zg),yu(t)?e:e.map(Wa))}function ly(t){return Ga(t=mi(t),"iterate",Zg),t}const AD={__proto__:null,[Symbol.iterator](){return y1(this,Symbol.iterator,Wa)},concat(...t){return Bf(this).concat(...t.map(e=>Jn(e)?Bf(e):e))},entries(){return y1(this,"entries",t=>(t[1]=Wa(t[1]),t))},every(t,e){return fh(this,"every",t,e,void 0,arguments)},filter(t,e){return fh(this,"filter",t,e,n=>n.map(Wa),arguments)},find(t,e){return fh(this,"find",t,e,Wa,arguments)},findIndex(t,e){return fh(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return fh(this,"findLast",t,e,Wa,arguments)},findLastIndex(t,e){return fh(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return fh(this,"forEach",t,e,void 0,arguments)},includes(...t){return b1(this,"includes",t)},indexOf(...t){return b1(this,"indexOf",t)},join(t){return Bf(this).join(t)},lastIndexOf(...t){return b1(this,"lastIndexOf",t)},map(t,e){return fh(this,"map",t,e,void 0,arguments)},pop(){return $p(this,"pop")},push(...t){return $p(this,"push",t)},reduce(t,...e){return bx(this,"reduce",t,e)},reduceRight(t,...e){return bx(this,"reduceRight",t,e)},shift(){return $p(this,"shift")},some(t,e){return fh(this,"some",t,e,void 0,arguments)},splice(...t){return $p(this,"splice",t)},toReversed(){return Bf(this).toReversed()},toSorted(t){return Bf(this).toSorted(t)},toSpliced(...t){return Bf(this).toSpliced(...t)},unshift(...t){return $p(this,"unshift",t)},values(){return y1(this,"values",Wa)}};function y1(t,e,n){const r=ly(t),i=r[e]();return r!==t&&!yu(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const TD=Array.prototype;function fh(t,e,n,r,i,s){const o=ly(t),a=o!==t&&!yu(t),l=o[e];if(l!==TD[e]){const p=l.apply(t,s);return a?Wa(p):p}let c=n;o!==t&&(a?c=function(p,v){return n.call(this,Wa(p),v,t)}:n.length>2&&(c=function(p,v){return n.call(this,p,v,t)}));const d=l.call(o,c,r);return a&&i?i(d):d}function bx(t,e,n,r){const i=ly(t);let s=n;return i!==t&&(yu(t)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,t)}):s=function(o,a,l){return n.call(this,o,Wa(a),l,t)}),i[e](s,...r)}function b1(t,e,n){const r=mi(t);Ga(r,"iterate",Zg);const i=r[e](...n);return(i===-1||i===!1)&&hy(n[0])?(n[0]=mi(n[0]),r[e](...n)):i}function $p(t,e,n=[]){wd(),Xb();const r=mi(t)[e].apply(t,n);return Jb(),xd(),r}const DD=ny("__proto__,__v_isRef,__isVue"),ML=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(yc));function ID(t){yc(t)||(t=String(t));const e=mi(this);return Ga(e,"has",t),e.hasOwnProperty(t)}class PL{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?OL:IL:s?DL:TL).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=Jn(e);if(!i){let l;if(o&&(l=AD[n]))return l;if(n==="hasOwnProperty")return ID}const a=Reflect.get(e,n,Zs(e)?e:r);return(yc(n)?ML.has(n):DD(n))||(i||Ga(e,"get",n),s)?a:Zs(a)?o&&qb(n)?a:a.value:Hi(a)?i?t_(a):wu(a):a}}class kL extends PL{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=gd(s);if(!yu(r)&&!gd(r)&&(s=mi(s),r=mi(r)),!Jn(e)&&Zs(s)&&!Zs(r))return l?!1:(s.value=r,!0)}const o=Jn(e)&&qb(n)?Number(n)<e.length:Ii(e,n),a=Reflect.set(e,n,r,Zs(e)?e:i);return e===mi(i)&&(o?vl(r,s)&&xh(e,"set",n,r):xh(e,"add",n,r)),a}deleteProperty(e,n){const r=Ii(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&xh(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!yc(n)||!ML.has(n))&&Ga(e,"has",n),r}ownKeys(e){return Ga(e,"iterate",Jn(e)?"length":Qd),Reflect.ownKeys(e)}}class AL extends PL{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const OD=new kL,ND=new AL,BD=new kL(!0),RD=new AL(!0),S2=t=>t,e0=t=>Reflect.getPrototypeOf(t);function FD(t,e,n){return function(...r){const i=this.__v_raw,s=mi(i),o=sp(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),d=n?S2:e?C2:Wa;return!e&&Ga(s,"iterate",l?L2:Qd),{next(){const{value:p,done:v}=c.next();return v?{value:p,done:v}:{value:a?[d(p[0]),d(p[1])]:d(p),done:v}},[Symbol.iterator](){return this}}}}function t0(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function jD(t,e){const n={get(i){const s=this.__v_raw,o=mi(s),a=mi(i);t||(vl(i,a)&&Ga(o,"get",i),Ga(o,"get",a));const{has:l}=e0(o),c=e?S2:t?C2:Wa;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&Ga(mi(i),"iterate",Qd),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=mi(s),a=mi(i);return t||(vl(i,a)&&Ga(o,"has",i),Ga(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=mi(a),c=e?S2:t?C2:Wa;return!t&&Ga(l,"iterate",Qd),a.forEach((d,p)=>i.call(s,c(d),c(p),o))}};return ts(n,t?{add:t0("add"),set:t0("set"),delete:t0("delete"),clear:t0("clear")}:{add(i){!e&&!yu(i)&&!gd(i)&&(i=mi(i));const s=mi(this);return e0(s).has.call(s,i)||(s.add(i),xh(s,"add",i,i)),this},set(i,s){!e&&!yu(s)&&!gd(s)&&(s=mi(s));const o=mi(this),{has:a,get:l}=e0(o);let c=a.call(o,i);c||(i=mi(i),c=a.call(o,i));const d=l.call(o,i);return o.set(i,s),c?vl(s,d)&&xh(o,"set",i,s):xh(o,"add",i,s),this},delete(i){const s=mi(this),{has:o,get:a}=e0(s);let l=o.call(s,i);l||(i=mi(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&xh(s,"delete",i,void 0),c},clear(){const i=mi(this),s=i.size!==0,o=i.clear();return s&&xh(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=FD(i,t,e)}),n}function uy(t,e){const n=jD(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Ii(n,i)&&i in r?n:r,i,s)}const zD={get:uy(!1,!1)},$D={get:uy(!1,!0)},UD={get:uy(!0,!1)},VD={get:uy(!0,!0)},TL=new WeakMap,DL=new WeakMap,IL=new WeakMap,OL=new WeakMap;function HD(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function GD(t){return t.__v_skip||!Object.isExtensible(t)?0:HD(dD(t))}function wu(t){return gd(t)?t:cy(t,!1,OD,zD,TL)}function e_(t){return cy(t,!1,BD,$D,DL)}function t_(t){return cy(t,!0,ND,UD,IL)}function WD(t){return cy(t,!0,RD,VD,OL)}function cy(t,e,n,r,i){if(!Hi(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=GD(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Wc(t){return gd(t)?Wc(t.__v_raw):!!(t&&t.__v_isReactive)}function gd(t){return!!(t&&t.__v_isReadonly)}function yu(t){return!!(t&&t.__v_isShallow)}function hy(t){return t?!!t.__v_raw:!1}function mi(t){const e=t&&t.__v_raw;return e?mi(e):t}function dy(t){return!Ii(t,"__v_skip")&&Object.isExtensible(t)&&gL(t,"__v_skip",!0),t}const Wa=t=>Hi(t)?wu(t):t,C2=t=>Hi(t)?t_(t):t;function Zs(t){return t?t.__v_isRef===!0:!1}function _t(t){return NL(t,!1)}function n_(t){return NL(t,!0)}function NL(t,e){return Zs(t)?t:new qD(t,e)}class qD{constructor(e,n){this.dep=new ay,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:mi(e),this._value=n?e:Wa(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||yu(e)||gd(e);e=r?e:mi(e),vl(e,n)&&(this._rawValue=e,this._value=r?e:Wa(e),this.dep.trigger())}}function YD(t){t.dep&&t.dep.trigger()}function bn(t){return Zs(t)?t.value:t}function KD(t){return Lr(t)?t():bn(t)}const ZD={get:(t,e,n)=>e==="__v_raw"?t:bn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return Zs(i)&&!Zs(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function r_(t){return Wc(t)?t:new Proxy(t,ZD)}class XD{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new ay,{get:r,set:i}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function BL(t){return new XD(t)}function i_(t){const e=Jn(t)?new Array(t.length):{};for(const n in t)e[n]=RL(t,n);return e}class JD{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return kD(mi(this._object),this._key)}}class QD{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function e8(t,e,n){return Zs(t)?t:Lr(t)?new QD(t):Hi(t)&&arguments.length>1?RL(t,e,n):_t(t)}function RL(t,e,n){const r=t[e];return Zs(r)?r:new JD(t,e,n)}class t8{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new ay(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Kg-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&us!==this)return wL(this,!0),!0}get value(){const e=this.dep.track();return SL(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function n8(t,e,n=!1){let r,i;return Lr(t)?r=t:(r=t.get,i=t.set),new t8(r,i,n)}const r8={GET:"get",HAS:"has",ITERATE:"iterate"},i8={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},n0={},yv=new WeakMap;let Jh;function s8(){return Jh}function FL(t,e=!1,n=Jh){if(n){let r=yv.get(n);r||yv.set(n,r=[]),r.push(t)}}function o8(t,e,n=vi){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,c=W=>i?W:yu(W)||i===!1||i===0?Lh(W,1):Lh(W);let d,p,v,m,x=!1,E=!1;if(Zs(t)?(p=()=>t.value,x=yu(t)):Wc(t)?(p=()=>c(t),x=!0):Jn(t)?(E=!0,x=t.some(W=>Wc(W)||yu(W)),p=()=>t.map(W=>{if(Zs(W))return W.value;if(Wc(W))return c(W);if(Lr(W))return l?l(W,2):W()})):Lr(t)?e?p=l?()=>l(t,2):t:p=()=>{if(v){wd();try{v()}finally{xd()}}const W=Jh;Jh=d;try{return l?l(t,3,[m]):t(m)}finally{Jh=W}}:p=zu,e&&i){const W=p,Q=i===!0?1/0:i;p=()=>Lh(W(),Q)}const T=Zb(),D=()=>{d.stop(),T&&T.active&&Gb(T.effects,d)};if(s&&e){const W=e;e=(...Q)=>{W(...Q),D()}}let k=E?new Array(t.length).fill(n0):n0;const B=W=>{if(!(!(d.flags&1)||!d.dirty&&!W))if(e){const Q=d.run();if(i||x||(E?Q.some((pe,fe)=>vl(pe,k[fe])):vl(Q,k))){v&&v();const pe=Jh;Jh=d;try{const fe=[Q,k===n0?void 0:E&&k[0]===n0?[]:k,m];l?l(e,3,fe):e(...fe),k=Q}finally{Jh=pe}}}else d.run()};return a&&a(B),d=new Yg(p),d.scheduler=o?()=>o(B,!1):B,m=W=>FL(W,!1,d),v=d.onStop=()=>{const W=yv.get(d);if(W){if(l)l(W,4);else for(const Q of W)Q();yv.delete(d)}},e?r?B(!0):k=d.run():o?o(B.bind(null,!0),!0):d.run(),D.pause=d.pause.bind(d),D.resume=d.resume.bind(d),D.stop=D,D}function Lh(t,e=1/0,n){if(e<=0||!Hi(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Zs(t))Lh(t.value,e,n);else if(Jn(t))for(let r=0;r<t.length;r++)Lh(t[r],e,n);else if(pf(t)||sp(t))t.forEach(r=>{Lh(r,e,n)});else if(ry(t)){for(const r in t)Lh(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Lh(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const jL=[];function a8(t){jL.push(t)}function l8(){jL.pop()}function u8(t,e){}const c8={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},h8={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function kp(t,e,n,r){try{return r?t(...r):t()}catch(i){gf(i,e,n)}}function Vu(t,e,n,r){if(Lr(t)){const i=kp(t,e,n,r);return i&&Wb(i)&&i.catch(s=>{gf(s,e,n)}),i}if(Jn(t)){const i=[];for(let s=0;s<t.length;s++)i.push(Vu(t[s],e,n,r));return i}}function gf(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||vi;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const d=a.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](t,l,c)===!1)return}a=a.parent}if(s){wd(),kp(s,null,10,[t,l,c]),xd();return}}d8(t,n,i,r,o)}function d8(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const yl=[];let Bc=-1;const lp=[];let Qh=null,Yf=0;const zL=Promise.resolve();let bv=null;function _l(t){const e=bv||zL;return t?e.then(this?t.bind(this):t):e}function f8(t){let e=Bc+1,n=yl.length;for(;e<n;){const r=e+n>>>1,i=yl[r],s=Jg(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function s_(t){if(!(t.flags&1)){const e=Jg(t),n=yl[yl.length-1];!n||!(t.flags&2)&&e>=Jg(n)?yl.push(t):yl.splice(f8(e),0,t),t.flags|=1,$L()}}function $L(){bv||(bv=zL.then(UL))}function Xg(t){Jn(t)?lp.push(...t):Qh&&t.id===-1?Qh.splice(Yf+1,0,t):t.flags&1||(lp.push(t),t.flags|=1),$L()}function _x(t,e,n=Bc+1){for(;n<yl.length;n++){const r=yl[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;yl.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function _v(t){if(lp.length){const e=[...new Set(lp)].sort((n,r)=>Jg(n)-Jg(r));if(lp.length=0,Qh){Qh.push(...e);return}for(Qh=e,Yf=0;Yf<Qh.length;Yf++){const n=Qh[Yf];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Qh=null,Yf=0}}const Jg=t=>t.id==null?t.flags&2?-1:1/0:t.id;function UL(t){try{for(Bc=0;Bc<yl.length;Bc++){const e=yl[Bc];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),kp(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Bc<yl.length;Bc++){const e=yl[Bc];e&&(e.flags&=-2)}Bc=-1,yl.length=0,_v(),bv=null,(yl.length||lp.length)&&UL()}}let Kf,r0=[];function VL(t,e){var n,r;Kf=t,Kf?(Kf.enabled=!0,r0.forEach(({event:i,args:s})=>Kf.emit(i,...s)),r0=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{VL(s,e)}),setTimeout(()=>{Kf||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,r0=[])},3e3)):r0=[]}let Vo=null,fy=null;function Qg(t){const e=Vo;return Vo=t,fy=t&&t.type.__scopeId||null,e}function p8(t){fy=t}function g8(){fy=null}const m8=t=>Wl;function Wl(t,e=Vo,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&I2(-1);const s=Qg(e);let o;try{o=t(...i)}finally{Qg(s),r._d&&I2(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function On(t,e){if(Vo===null)return t;const n=xm(Vo),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=vi]=e[i];s&&(Lr(s)&&(s={mounted:s,updated:s}),s.deep&&Lh(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Fc(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(wd(),Vu(l,n,8,[t.el,a,t,e]),xd())}}const HL=Symbol("_vte"),GL=t=>t.__isTeleport,Mg=t=>t&&(t.disabled||t.disabled===""),wx=t=>t&&(t.defer||t.defer===""),xx=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Lx=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,E2=(t,e)=>{const n=t&&t.to;return hs(n)?e?e(n):null:n},WL={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:d,pc:p,pbc:v,o:{insert:m,querySelector:x,createText:E,createComment:T}}=c,D=Mg(e.props);let{shapeFlag:k,children:B,dynamicChildren:W}=e;if(t==null){const Q=e.el=E(""),pe=e.anchor=E("");m(Q,n,r),m(pe,n,r);const fe=(U,q)=>{k&16&&(i&&i.isCE&&(i.ce._teleportTarget=U),d(B,U,q,i,s,o,a,l))},O=()=>{const U=e.target=E2(e.props,x),q=qL(U,e,E,m);U&&(o!=="svg"&&xx(U)?o="svg":o!=="mathml"&&Lx(U)&&(o="mathml"),D||(fe(U,q),z0(e,!1)))};D&&(fe(n,pe),z0(e,!0)),wx(e.props)?$o(()=>{O(),e.el.__isMounted=!0},s):O()}else{if(wx(e.props)&&!t.el.__isMounted){$o(()=>{WL.process(t,e,n,r,i,s,o,a,l,c),delete t.el.__isMounted},s);return}e.el=t.el,e.targetStart=t.targetStart;const Q=e.anchor=t.anchor,pe=e.target=t.target,fe=e.targetAnchor=t.targetAnchor,O=Mg(t.props),U=O?n:pe,q=O?Q:fe;if(o==="svg"||xx(pe)?o="svg":(o==="mathml"||Lx(pe))&&(o="mathml"),W?(v(t.dynamicChildren,W,U,i,s,o,a),m_(t,e,!0)):l||p(t,e,U,q,i,s,o,a,!1),D)O?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):i0(e,n,Q,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const R=e.target=E2(e.props,x);R&&i0(e,R,null,c,0)}else O&&i0(e,pe,fe,c,1);z0(e,D)}},remove(t,e,n,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:d,target:p,props:v}=t;if(p&&(i(c),i(d)),s&&i(l),o&16){const m=s||!Mg(v);for(let x=0;x<a.length;x++){const E=a[x];r(E,e,n,m,!!E.dynamicChildren)}}},move:i0,hydrate:v8};function i0(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:d}=t,p=s===2;if(p&&r(o,e,n),(!p||Mg(d))&&l&16)for(let v=0;v<c.length;v++)i(c[v],e,n,2);p&&r(a,e,n)}function v8(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:d}},p){const v=e.target=E2(e.props,l);if(v){const m=Mg(e.props),x=v._lpa||v.firstChild;if(e.shapeFlag&16)if(m)e.anchor=p(o(t),e,a(t),n,r,i,s),e.targetStart=x,e.targetAnchor=x&&o(x);else{e.anchor=o(t);let E=x;for(;E;){if(E&&E.nodeType===8){if(E.data==="teleport start anchor")e.targetStart=E;else if(E.data==="teleport anchor"){e.targetAnchor=E,v._lpa=e.targetAnchor&&o(e.targetAnchor);break}}E=o(E)}e.targetAnchor||qL(v,e,d,c),p(x&&o(x),e,v,n,r,i,s)}z0(e,m)}return e.anchor&&o(e.anchor)}const Zf=WL;function z0(t,e){const n=t.ctx;if(n&&n.ut){let r,i;for(e?(r=t.el,i=t.anchor):(r=t.targetStart,i=t.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function qL(t,e,n,r){const i=e.targetStart=n(""),s=e.targetAnchor=n("");return i[HL]=s,t&&(r(i,t),r(s,t)),s}const ed=Symbol("_leaveCb"),s0=Symbol("_enterCb");function o_(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ds(()=>{t.isMounted=!0}),Ld(()=>{t.isUnmounting=!0}),t}const Ou=[Function,Array],a_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ou,onEnter:Ou,onAfterEnter:Ou,onEnterCancelled:Ou,onBeforeLeave:Ou,onLeave:Ou,onAfterLeave:Ou,onLeaveCancelled:Ou,onBeforeAppear:Ou,onAppear:Ou,onAfterAppear:Ou,onAppearCancelled:Ou},YL=t=>{const e=t.subTree;return e.component?YL(e.component):e},y8={name:"BaseTransition",props:a_,setup(t,{slots:e}){const n=Gu(),r=o_();return()=>{const i=e.default&&py(e.default(),!0);if(!i||!i.length)return;const s=KL(i),o=mi(t),{mode:a}=o;if(r.isLeaving)return _1(s);const l=Sx(s);if(!l)return _1(s);let c=gp(l,o,r,n,p=>c=p);l.type!==Ro&&Ah(l,c);let d=n.subTree&&Sx(n.subTree);if(d&&d.type!==Ro&&!fc(l,d)&&YL(n).type!==Ro){let p=gp(d,o,r,n);if(Ah(d,p),a==="out-in"&&l.type!==Ro)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,d=void 0},_1(s);a==="in-out"&&l.type!==Ro?p.delayLeave=(v,m,x)=>{const E=XL(r,d);E[String(d.key)]=d,v[ed]=()=>{m(),v[ed]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{x(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return s}}};function KL(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Ro){e=n;break}}return e}const ZL=y8;function XL(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function gp(t,e,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:v,onLeave:m,onAfterLeave:x,onLeaveCancelled:E,onBeforeAppear:T,onAppear:D,onAfterAppear:k,onAppearCancelled:B}=e,W=String(t.key),Q=XL(n,t),pe=(U,q)=>{U&&Vu(U,r,9,q)},fe=(U,q)=>{const R=q[1];pe(U,q),Jn(U)?U.every($=>$.length<=1)&&R():U.length<=1&&R()},O={mode:o,persisted:a,beforeEnter(U){let q=l;if(!n.isMounted)if(s)q=T||l;else return;U[ed]&&U[ed](!0);const R=Q[W];R&&fc(t,R)&&R.el[ed]&&R.el[ed](),pe(q,[U])},enter(U){let q=c,R=d,$=p;if(!n.isMounted)if(s)q=D||c,R=k||d,$=B||p;else return;let X=!1;const K=U[s0]=F=>{X||(X=!0,F?pe($,[U]):pe(R,[U]),O.delayedLeave&&O.delayedLeave(),U[s0]=void 0)};q?fe(q,[U,K]):K()},leave(U,q){const R=String(t.key);if(U[s0]&&U[s0](!0),n.isUnmounting)return q();pe(v,[U]);let $=!1;const X=U[ed]=K=>{$||($=!0,q(),K?pe(E,[U]):pe(x,[U]),U[ed]=void 0,Q[R]===t&&delete Q[R])};Q[R]=t,m?fe(m,[U,X]):X()},clone(U){const q=gp(U,e,n,r,i);return i&&i(q),q}};return O}function _1(t){if(_m(t))return t=Zc(t),t.children=null,t}function Sx(t){if(!_m(t))return GL(t.type)&&t.children?KL(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Lr(n.default))return n.default()}}function Ah(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ah(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function py(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===_n?(o.patchFlag&128&&i++,r=r.concat(py(o.children,e,a))):(e||o.type!==Ro)&&r.push(a!=null?Zc(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function _s(t,e){return Lr(t)?ts({name:t.name},e,{setup:t}):t}function b8(){const t=Gu();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function l_(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function _8(t){const e=Gu(),n=n_(null);if(e){const i=e.refs===vi?e.refs={}:e.refs;Object.defineProperty(i,t,{enumerable:!0,get:()=>n.value,set:s=>n.value=s})}return n}function em(t,e,n,r,i=!1){if(Jn(t)){t.forEach((x,E)=>em(x,e&&(Jn(e)?e[E]:e),n,r,i));return}if(hd(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&em(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?xm(r.component):r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,d=a.refs===vi?a.refs={}:a.refs,p=a.setupState,v=mi(p),m=p===vi?()=>!1:x=>Ii(v,x);if(c!=null&&c!==l&&(hs(c)?(d[c]=null,m(c)&&(p[c]=null)):Zs(c)&&(c.value=null)),Lr(l))kp(l,a,12,[o,d]);else{const x=hs(l),E=Zs(l);if(x||E){const T=()=>{if(t.f){const D=x?m(l)?p[l]:d[l]:l.value;i?Jn(D)&&Gb(D,s):Jn(D)?D.includes(s)||D.push(s):x?(d[l]=[s],m(l)&&(p[l]=d[l])):(l.value=[s],t.k&&(d[t.k]=l.value))}else x?(d[l]=o,m(l)&&(p[l]=o)):E&&(l.value=o,t.k&&(d[t.k]=o))};o?(T.id=-1,$o(T,n)):T()}}}let Cx=!1;const Rf=()=>{Cx||(console.error("Hydration completed but contains mismatches."),Cx=!0)},w8=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",x8=t=>t.namespaceURI.includes("MathML"),o0=t=>{if(t.nodeType===1){if(w8(t))return"svg";if(x8(t))return"mathml"}},tp=t=>t.nodeType===8;function L8(t){const{mt:e,p:n,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:a,insert:l,createComment:c}}=t,d=(B,W)=>{if(!W.hasChildNodes()){n(null,B,W),_v(),W._vnode=B;return}p(W.firstChild,B,null,null,null),_v(),W._vnode=B},p=(B,W,Q,pe,fe,O=!1)=>{O=O||!!W.dynamicChildren;const U=tp(B)&&B.data==="[",q=()=>E(B,W,Q,pe,fe,U),{type:R,ref:$,shapeFlag:X,patchFlag:K}=W;let F=B.nodeType;W.el=B,K===-2&&(O=!1,W.dynamicChildren=null);let N=null;switch(R){case dd:F!==3?W.children===""?(l(W.el=i(""),o(B),B),N=B):N=q():(B.data!==W.children&&(Rf(),B.data=W.children),N=s(B));break;case Ro:k(B)?(N=s(B),D(W.el=B.content.firstChild,B,Q)):F!==8||U?N=q():N=s(B);break;case tf:if(U&&(B=s(B),F=B.nodeType),F===1||F===3){N=B;const J=!W.children.length;for(let Y=0;Y<W.staticCount;Y++)J&&(W.children+=N.nodeType===1?N.outerHTML:N.data),Y===W.staticCount-1&&(W.anchor=N),N=s(N);return U?s(N):N}else q();break;case _n:U?N=x(B,W,Q,pe,fe,O):N=q();break;default:if(X&1)(F!==1||W.type.toLowerCase()!==B.tagName.toLowerCase())&&!k(B)?N=q():N=v(B,W,Q,pe,fe,O);else if(X&6){W.slotScopeIds=fe;const J=o(B);if(U?N=T(B):tp(B)&&B.data==="teleport start"?N=T(B,B.data,"teleport end"):N=s(B),e(W,J,null,Q,pe,o0(J),O),hd(W)&&!W.type.__asyncResolved){let Y;U?(Y=Xr(_n),Y.anchor=N?N.previousSibling:J.lastChild):Y=B.nodeType===3?Ir(""):Xr("div"),Y.el=B,W.component.subTree=Y}}else X&64?F!==8?N=q():N=W.type.hydrate(B,W,Q,pe,fe,O,t,m):X&128&&(N=W.type.hydrate(B,W,Q,pe,o0(o(B)),fe,O,t,p))}return $!=null&&em($,null,pe,W),N},v=(B,W,Q,pe,fe,O)=>{O=O||!!W.dynamicChildren;const{type:U,props:q,patchFlag:R,shapeFlag:$,dirs:X,transition:K}=W,F=U==="input"||U==="option";if(F||R!==-1){X&&Fc(W,null,Q,"created");let N=!1;if(k(B)){N=SS(null,K)&&Q&&Q.vnode.props&&Q.vnode.props.appear;const Y=B.content.firstChild;N&&K.beforeEnter(Y),D(Y,B,Q),W.el=B=Y}if($&16&&!(q&&(q.innerHTML||q.textContent))){let Y=m(B.firstChild,W,B,Q,pe,fe,O);for(;Y;){a0(B,1)||Rf();const ye=Y;Y=Y.nextSibling,a(ye)}}else if($&8){let Y=W.children;Y[0]===`
`&&(B.tagName==="PRE"||B.tagName==="TEXTAREA")&&(Y=Y.slice(1)),B.textContent!==Y&&(a0(B,0)||Rf(),B.textContent=W.children)}if(q){if(F||!O||R&48){const Y=B.tagName.includes("-");for(const ye in q)(F&&(ye.endsWith("value")||ye==="indeterminate")||ym(ye)&&!op(ye)||ye[0]==="."||Y)&&r(B,ye,null,q[ye],void 0,Q)}else if(q.onClick)r(B,"onClick",null,q.onClick,void 0,Q);else if(R&4&&Wc(q.style))for(const Y in q.style)q.style[Y]}let J;(J=q&&q.onVnodeBeforeMount)&&$l(J,Q,W),X&&Fc(W,null,Q,"beforeMount"),((J=q&&q.onVnodeMounted)||X||N)&&IS(()=>{J&&$l(J,Q,W),N&&K.enter(B),X&&Fc(W,null,Q,"mounted")},pe)}return B.nextSibling},m=(B,W,Q,pe,fe,O,U)=>{U=U||!!W.dynamicChildren;const q=W.children,R=q.length;for(let $=0;$<R;$++){const X=U?q[$]:q[$]=Hl(q[$]),K=X.type===dd;B?(K&&!U&&$+1<R&&Hl(q[$+1]).type===dd&&(l(i(B.data.slice(X.children.length)),Q,s(B)),B.data=X.children),B=p(B,X,pe,fe,O,U)):K&&!X.children?l(X.el=i(""),Q):(a0(Q,1)||Rf(),n(null,X,Q,null,pe,fe,o0(Q),O))}return B},x=(B,W,Q,pe,fe,O)=>{const{slotScopeIds:U}=W;U&&(fe=fe?fe.concat(U):U);const q=o(B),R=m(s(B),W,q,Q,pe,fe,O);return R&&tp(R)&&R.data==="]"?s(W.anchor=R):(Rf(),l(W.anchor=c("]"),q,R),R)},E=(B,W,Q,pe,fe,O)=>{if(a0(B.parentElement,1)||Rf(),W.el=null,O){const R=T(B);for(;;){const $=s(B);if($&&$!==R)a($);else break}}const U=s(B),q=o(B);return a(B),n(null,W,q,U,Q,pe,o0(q),fe),Q&&(Q.vnode.el=W.el,yy(Q,W.el)),U},T=(B,W="[",Q="]")=>{let pe=0;for(;B;)if(B=s(B),B&&tp(B)&&(B.data===W&&pe++,B.data===Q)){if(pe===0)return s(B);pe--}return B},D=(B,W,Q)=>{const pe=W.parentNode;pe&&pe.replaceChild(B,W);let fe=Q;for(;fe;)fe.vnode.el===W&&(fe.vnode.el=fe.subTree.el=B),fe=fe.parent},k=B=>B.nodeType===1&&B.tagName==="TEMPLATE";return[d,p]}const Ex="data-allow-mismatch",S8={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function a0(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Ex);)t=t.parentElement;const n=t&&t.getAttribute(Ex);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:n.split(",").includes(S8[e])}}const C8=sy().requestIdleCallback||(t=>setTimeout(t,1)),E8=sy().cancelIdleCallback||(t=>clearTimeout(t)),M8=(t=1e4)=>e=>{const n=C8(e,{timeout:t});return()=>E8(n)};function P8(t){const{top:e,left:n,bottom:r,right:i}=t.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(e>0&&e<s||r>0&&r<s)&&(n>0&&n<o||i>0&&i<o)}const k8=t=>(e,n)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),e();break}},t);return n(i=>{if(i instanceof Element){if(P8(i))return e(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},A8=t=>e=>{if(t){const n=matchMedia(t);if(n.matches)e();else return n.addEventListener("change",e,{once:!0}),()=>n.removeEventListener("change",e)}},T8=(t=[])=>(e,n)=>{hs(t)&&(t=[t]);let r=!1;const i=o=>{r||(r=!0,s(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{n(o=>{for(const a of t)o.removeEventListener(a,i)})};return n(o=>{for(const a of t)o.addEventListener(a,i,{once:!0})}),s};function D8(t,e){if(tp(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(tp(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const hd=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function I8(t){Lr(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:a=!0,onError:l}=t;let c=null,d,p=0;const v=()=>(p++,c=null,m()),m=()=>{let x;return c||(x=c=e().catch(E=>{if(E=E instanceof Error?E:new Error(String(E)),l)return new Promise((T,D)=>{l(E,()=>T(v()),()=>D(E),p+1)});throw E}).then(E=>x!==c&&c?c:(E&&(E.__esModule||E[Symbol.toStringTag]==="Module")&&(E=E.default),d=E,E)))};return _s({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(x,E,T){const D=s?()=>{const k=s(T,B=>D8(x,B));k&&(E.bum||(E.bum=[])).push(k)}:T;d?D():m().then(()=>!E.isUnmounted&&D())},get __asyncResolved(){return d},setup(){const x=Uo;if(l_(x),d)return()=>w1(d,x);const E=B=>{c=null,gf(B,x,13,!r)};if(a&&x.suspense||mp)return m().then(B=>()=>w1(B,x)).catch(B=>(E(B),()=>r?Xr(r,{error:B}):null));const T=_t(!1),D=_t(),k=_t(!!i);return i&&setTimeout(()=>{k.value=!1},i),o!=null&&setTimeout(()=>{if(!T.value&&!D.value){const B=new Error(`Async component timed out after ${o}ms.`);E(B),D.value=B}},o),m().then(()=>{T.value=!0,x.parent&&_m(x.parent.vnode)&&x.parent.update()}).catch(B=>{E(B),D.value=B}),()=>{if(T.value&&d)return w1(d,x);if(D.value&&r)return Xr(r,{error:D.value});if(n&&!k.value)return Xr(n)}}})}function w1(t,e){const{ref:n,props:r,children:i,ce:s}=e.vnode,o=Xr(t,r,i);return o.ref=n,o.ce=s,delete e.vnode.ce,o}const _m=t=>t.type.__isKeepAlive,O8={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Gu(),r=n.ctx;if(!r.renderer)return()=>{const k=e.default&&e.default();return k&&k.length===1?k[0]:k};const i=new Map,s=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:c,um:d,o:{createElement:p}}}=r,v=p("div");r.activate=(k,B,W,Q,pe)=>{const fe=k.component;c(k,B,W,0,a),l(fe.vnode,k,B,W,fe,a,Q,k.slotScopeIds,pe),$o(()=>{fe.isDeactivated=!1,fe.a&&ap(fe.a);const O=k.props&&k.props.onVnodeMounted;O&&$l(O,fe.parent,k)},a)},r.deactivate=k=>{const B=k.component;xv(B.m),xv(B.a),c(k,v,null,1,a),$o(()=>{B.da&&ap(B.da);const W=k.props&&k.props.onVnodeUnmounted;W&&$l(W,B.parent,k),B.isDeactivated=!0},a)};function m(k){x1(k),d(k,n,a,!0)}function x(k){i.forEach((B,W)=>{const Q=F2(B.type);Q&&!k(Q)&&E(W)})}function E(k){const B=i.get(k);B&&(!o||!fc(B,o))?m(B):o&&x1(o),i.delete(k),s.delete(k)}ni(()=>[t.include,t.exclude],([k,B])=>{k&&x(W=>lg(k,W)),B&&x(W=>!lg(B,W))},{flush:"post",deep:!0});let T=null;const D=()=>{T!=null&&(Lv(n.subTree.type)?$o(()=>{i.set(T,l0(n.subTree))},n.subTree.suspense):i.set(T,l0(n.subTree)))};return Ds(D),my(D),Ld(()=>{i.forEach(k=>{const{subTree:B,suspense:W}=n,Q=l0(B);if(k.type===Q.type&&k.key===Q.key){x1(Q);const pe=Q.component.da;pe&&$o(pe,W);return}m(k)})}),()=>{if(T=null,!e.default)return o=null;const k=e.default(),B=k[0];if(k.length>1)return o=null,k;if(!Th(B)||!(B.shapeFlag&4)&&!(B.shapeFlag&128))return o=null,B;let W=l0(B);if(W.type===Ro)return o=null,W;const Q=W.type,pe=F2(hd(W)?W.type.__asyncResolved||{}:Q),{include:fe,exclude:O,max:U}=t;if(fe&&(!pe||!lg(fe,pe))||O&&pe&&lg(O,pe))return W.shapeFlag&=-257,o=W,B;const q=W.key==null?Q:W.key,R=i.get(q);return W.el&&(W=Zc(W),B.shapeFlag&128&&(B.ssContent=W)),T=q,R?(W.el=R.el,W.component=R.component,W.transition&&Ah(W,W.transition),W.shapeFlag|=512,s.delete(q),s.add(q)):(s.add(q),U&&s.size>parseInt(U,10)&&E(s.values().next().value)),W.shapeFlag|=256,o=W,Lv(B.type)?B:W}}},N8=O8;function lg(t,e){return Jn(t)?t.some(n=>lg(n,e)):hs(t)?t.split(",").includes(e):hD(t)?(t.lastIndex=0,t.test(e)):!1}function JL(t,e){eS(t,"a",e)}function QL(t,e){eS(t,"da",e)}function eS(t,e,n=Uo){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(gy(e,r,n),n){let i=n.parent;for(;i&&i.parent;)_m(i.parent.vnode)&&B8(r,e,n,i),i=i.parent}}function B8(t,e,n,r){const i=gy(e,t,r,!0);$u(()=>{Gb(r[e],i)},n)}function x1(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function l0(t){return t.shapeFlag&128?t.ssContent:t}function gy(t,e,n=Uo,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{wd();const a=uf(n),l=Vu(e,n,t,o);return a(),xd(),l});return r?i.unshift(s):i.push(s),s}}const Ih=t=>(e,n=Uo)=>{(!mp||t==="sp")&&gy(t,(...r)=>e(...r),n)},tS=Ih("bm"),Ds=Ih("m"),u_=Ih("bu"),my=Ih("u"),Ld=Ih("bum"),$u=Ih("um"),nS=Ih("sp"),rS=Ih("rtg"),iS=Ih("rtc");function sS(t,e=Uo){gy("ec",t,e)}const c_="components",R8="directives";function h_(t,e){return d_(c_,t,!0,e)||t}const oS=Symbol.for("v-ndc");function aS(t){return hs(t)?d_(c_,t,!1)||t:t||oS}function F8(t){return d_(R8,t)}function d_(t,e,n=!0,r=!1){const i=Vo||Uo;if(i){const s=i.type;if(t===c_){const a=F2(s,!1);if(a&&(a===e||a===La(e)||a===bm(La(e))))return s}const o=Mx(i[t]||s[t],e)||Mx(i.appContext[t],e);return!o&&r?s:o}}function Mx(t,e){return t&&(t[e]||t[La(e)]||t[bm(La(e))])}function Wn(t,e,n,r){let i;const s=n&&n[r],o=Jn(t);if(o||hs(t)){const a=o&&Wc(t);let l=!1;a&&(l=!yu(t),t=ly(t)),i=new Array(t.length);for(let c=0,d=t.length;c<d;c++)i[c]=e(l?Wa(t[c]):t[c],c,void 0,s&&s[c])}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s&&s[a])}else if(Hi(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s&&s[l]));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const d=a[l];i[l]=e(t[d],d,l,s&&s[l])}}else i=[];return n&&(n[r]=i),i}function j8(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(Jn(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return t}function z8(t,e,n={},r,i){if(Vo.ce||Vo.parent&&hd(Vo.parent)&&Vo.parent.ce)return e!=="default"&&(n.name=e),De(),xo(_n,null,[Xr("slot",n,r&&r())],64);let s=t[e];s&&s._c&&(s._d=!1),De();const o=s&&f_(s(n)),a=n.key||o&&o.key,l=xo(_n,{key:(a&&!yc(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function f_(t){return t.some(e=>Th(e)?!(e.type===Ro||e.type===_n&&!f_(e.children)):!0)?t:null}function $8(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:Sg(r)]=t[r];return n}const M2=t=>t?zS(t)?xm(t):M2(t.parent):null,Pg=ts(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>M2(t.parent),$root:t=>M2(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>p_(t),$forceUpdate:t=>t.f||(t.f=()=>{s_(t.update)}),$nextTick:t=>t.n||(t.n=_l.bind(t.proxy)),$watch:t=>vI.bind(t)}),L1=(t,e)=>t!==vi&&!t.__isScriptSetup&&Ii(t,e),P2={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(L1(r,e))return o[e]=1,r[e];if(i!==vi&&Ii(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&Ii(c,e))return o[e]=3,s[e];if(n!==vi&&Ii(n,e))return o[e]=4,n[e];k2&&(o[e]=0)}}const d=Pg[e];let p,v;if(d)return e==="$attrs"&&Ga(t.attrs,"get",""),d(t);if((p=a.__cssModules)&&(p=p[e]))return p;if(n!==vi&&Ii(n,e))return o[e]=4,n[e];if(v=l.config.globalProperties,Ii(v,e))return v[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return L1(i,e)?(i[e]=n,!0):r!==vi&&Ii(r,e)?(r[e]=n,!0):Ii(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==vi&&Ii(t,o)||L1(e,o)||(a=s[0])&&Ii(a,o)||Ii(r,o)||Ii(Pg,o)||Ii(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ii(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},U8=ts({},P2,{get(t,e){if(e!==Symbol.unscopables)return P2.get(t,e,t)},has(t,e){return e[0]!=="_"&&!mD(e)}});function V8(){return null}function H8(){return null}function G8(t){}function W8(t){}function q8(){return null}function Y8(){}function K8(t,e){return null}function Z8(){return lS().slots}function X8(){return lS().attrs}function lS(){const t=Gu();return t.setupContext||(t.setupContext=VS(t))}function tm(t){return Jn(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function J8(t,e){const n=tm(t);for(const r in e){if(r.startsWith("__skip"))continue;let i=n[r];i?Jn(i)||Lr(i)?i=n[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=n[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function Q8(t,e){return!t||!e?t||e:Jn(t)&&Jn(e)?t.concat(e):ts({},tm(t),tm(e))}function eI(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function tI(t){const e=Gu();let n=t();return N2(),Wb(n)&&(n=n.catch(r=>{throw uf(e),r})),[n,()=>uf(e)]}let k2=!0;function nI(t){const e=p_(t),n=t.proxy,r=t.ctx;k2=!1,e.beforeCreate&&Px(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:d,beforeMount:p,mounted:v,beforeUpdate:m,updated:x,activated:E,deactivated:T,beforeDestroy:D,beforeUnmount:k,destroyed:B,unmounted:W,render:Q,renderTracked:pe,renderTriggered:fe,errorCaptured:O,serverPrefetch:U,expose:q,inheritAttrs:R,components:$,directives:X,filters:K}=e;if(c&&rI(c,r,null),o)for(const J in o){const Y=o[J];Lr(Y)&&(r[J]=Y.bind(n))}if(i){const J=i.call(n,n);Hi(J)&&(t.data=wu(J))}if(k2=!0,s)for(const J in s){const Y=s[J],ye=Lr(Y)?Y.bind(n,n):Lr(Y.get)?Y.get.bind(n,n):zu,Ce=!Lr(Y)&&Lr(Y.set)?Y.set.bind(n):zu,He=qn({get:ye,set:Ce});Object.defineProperty(r,J,{enumerable:!0,configurable:!0,get:()=>He.value,set:j=>He.value=j})}if(a)for(const J in a)uS(a[J],r,n,J);if(l){const J=Lr(l)?l.call(n):l;Reflect.ownKeys(J).forEach(Y=>{kg(Y,J[Y])})}d&&Px(d,t,"c");function N(J,Y){Jn(Y)?Y.forEach(ye=>J(ye.bind(n))):Y&&J(Y.bind(n))}if(N(tS,p),N(Ds,v),N(u_,m),N(my,x),N(JL,E),N(QL,T),N(sS,O),N(iS,pe),N(rS,fe),N(Ld,k),N($u,W),N(nS,U),Jn(q))if(q.length){const J=t.exposed||(t.exposed={});q.forEach(Y=>{Object.defineProperty(J,Y,{get:()=>n[Y],set:ye=>n[Y]=ye})})}else t.exposed||(t.exposed={});Q&&t.render===zu&&(t.render=Q),R!=null&&(t.inheritAttrs=R),$&&(t.components=$),X&&(t.directives=X),U&&l_(t)}function rI(t,e,n=zu){Jn(t)&&(t=A2(t));for(const r in t){const i=t[r];let s;Hi(i)?"default"in i?s=bu(i.from||r,i.default,!0):s=bu(i.from||r):s=bu(i),Zs(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Px(t,e,n){Vu(Jn(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function uS(t,e,n,r){let i=r.includes(".")?kS(n,r):()=>n[r];if(hs(t)){const s=e[t];Lr(s)&&ni(i,s)}else if(Lr(t))ni(i,t.bind(n));else if(Hi(t))if(Jn(t))t.forEach(s=>uS(s,e,n,r));else{const s=Lr(t.handler)?t.handler.bind(n):e[t.handler];Lr(s)&&ni(i,s,t)}}function p_(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>wv(l,c,o,!0)),wv(l,e,o)),Hi(e)&&s.set(e,l),l}function wv(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&wv(t,s,n,!0),i&&i.forEach(o=>wv(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=iI[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const iI={data:kx,props:Ax,emits:Ax,methods:ug,computed:ug,beforeCreate:dl,created:dl,beforeMount:dl,mounted:dl,beforeUpdate:dl,updated:dl,beforeDestroy:dl,beforeUnmount:dl,destroyed:dl,unmounted:dl,activated:dl,deactivated:dl,errorCaptured:dl,serverPrefetch:dl,components:ug,directives:ug,watch:oI,provide:kx,inject:sI};function kx(t,e){return e?t?function(){return ts(Lr(t)?t.call(this,this):t,Lr(e)?e.call(this,this):e)}:e:t}function sI(t,e){return ug(A2(t),A2(e))}function A2(t){if(Jn(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function dl(t,e){return t?[...new Set([].concat(t,e))]:e}function ug(t,e){return t?ts(Object.create(null),t,e):e}function Ax(t,e){return t?Jn(t)&&Jn(e)?[...new Set([...t,...e])]:ts(Object.create(null),tm(t),tm(e??{})):e}function oI(t,e){if(!t)return e;if(!e)return t;const n=ts(Object.create(null),t);for(const r in e)n[r]=dl(t[r],e[r]);return n}function cS(){return{app:null,config:{isNativeTag:uD,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let aI=0;function lI(t,e){return function(r,i=null){Lr(r)||(r=ts({},r)),i!=null&&!Hi(i)&&(i=null);const s=cS(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:aI++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:GS,get config(){return s.config},set config(d){},use(d,...p){return o.has(d)||(d&&Lr(d.install)?(o.add(d),d.install(c,...p)):Lr(d)&&(o.add(d),d(c,...p))),c},mixin(d){return s.mixins.includes(d)||s.mixins.push(d),c},component(d,p){return p?(s.components[d]=p,c):s.components[d]},directive(d,p){return p?(s.directives[d]=p,c):s.directives[d]},mount(d,p,v){if(!l){const m=c._ceVNode||Xr(r,i);return m.appContext=s,v===!0?v="svg":v===!1&&(v=void 0),p&&e?e(m,d):t(m,d,v),l=!0,c._container=d,d.__vue_app__=c,xm(m.component)}},onUnmount(d){a.push(d)},unmount(){l&&(Vu(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(d,p){return s.provides[d]=p,c},runWithContext(d){const p=ef;ef=c;try{return d()}finally{ef=p}}};return c}}let ef=null;function kg(t,e){if(Uo){let n=Uo.provides;const r=Uo.parent&&Uo.parent.provides;r===n&&(n=Uo.provides=Object.create(r)),n[t]=e}}function bu(t,e,n=!1){const r=Uo||Vo;if(r||ef){const i=ef?ef._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Lr(e)?e.call(r&&r.proxy):e}}function hS(){return!!(Uo||Vo||ef)}const dS={},fS=()=>Object.create(dS),pS=t=>Object.getPrototypeOf(t)===dS;function uI(t,e,n,r=!1){const i={},s=fS();t.propsDefaults=Object.create(null),gS(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:e_(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function cI(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=mi(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let p=0;p<d.length;p++){let v=d[p];if(vy(t.emitsOptions,v))continue;const m=e[v];if(l)if(Ii(s,v))m!==s[v]&&(s[v]=m,c=!0);else{const x=La(v);i[x]=T2(l,a,x,m,t,!1)}else m!==s[v]&&(s[v]=m,c=!0)}}}else{gS(t,e,i,s)&&(c=!0);let d;for(const p in a)(!e||!Ii(e,p)&&((d=Gl(p))===p||!Ii(e,d)))&&(l?n&&(n[p]!==void 0||n[d]!==void 0)&&(i[p]=T2(l,a,p,void 0,t,!0)):delete i[p]);if(s!==a)for(const p in s)(!e||!Ii(e,p))&&(delete s[p],c=!0)}c&&xh(t.attrs,"set","")}function gS(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(op(l))continue;const c=e[l];let d;i&&Ii(i,d=La(l))?!s||!s.includes(d)?n[d]=c:(a||(a={}))[d]=c:vy(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=mi(n),c=a||vi;for(let d=0;d<s.length;d++){const p=s[d];n[p]=T2(i,l,p,c[p],t,!Ii(c,p))}}return o}function T2(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=Ii(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Lr(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const d=uf(i);r=c[n]=l.call(null,e),d()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Gl(n))&&(r=!0))}return r}const hI=new WeakMap;function mS(t,e,n=!1){const r=n?hI:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!Lr(t)){const d=p=>{l=!0;const[v,m]=mS(p,e,!0);ts(o,v),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!s&&!l)return Hi(t)&&r.set(t,ip),ip;if(Jn(s))for(let d=0;d<s.length;d++){const p=La(s[d]);Tx(p)&&(o[p]=vi)}else if(s)for(const d in s){const p=La(d);if(Tx(p)){const v=s[d],m=o[p]=Jn(v)||Lr(v)?{type:v}:ts({},v),x=m.type;let E=!1,T=!0;if(Jn(x))for(let D=0;D<x.length;++D){const k=x[D],B=Lr(k)&&k.name;if(B==="Boolean"){E=!0;break}else B==="String"&&(T=!1)}else E=Lr(x)&&x.name==="Boolean";m[0]=E,m[1]=T,(E||Ii(m,"default"))&&a.push(p)}}const c=[o,a];return Hi(t)&&r.set(t,c),c}function Tx(t){return t[0]!=="$"&&!op(t)}const vS=t=>t[0]==="_"||t==="$stable",g_=t=>Jn(t)?t.map(Hl):[Hl(t)],dI=(t,e,n)=>{if(e._n)return e;const r=Wl((...i)=>g_(e(...i)),n);return r._c=!1,r},yS=(t,e,n)=>{const r=t._ctx;for(const i in t){if(vS(i))continue;const s=t[i];if(Lr(s))e[i]=dI(i,s,r);else if(s!=null){const o=g_(s);e[i]=()=>o}}},bS=(t,e)=>{const n=g_(e);t.slots.default=()=>n},_S=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},fI=(t,e,n)=>{const r=t.slots=fS();if(t.vnode.shapeFlag&32){const i=e._;i?(_S(r,e,n),n&&gL(r,"_",i,!0)):yS(e,r)}else e&&bS(t,e)},pI=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=vi;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:_S(i,e,n):(s=!e.$stable,yS(e,i)),o=e}else e&&(bS(t,e),o={default:1});if(s)for(const a in i)!vS(a)&&o[a]==null&&delete i[a]},$o=IS;function wS(t){return LS(t)}function xS(t){return LS(t,L8)}function LS(t,e){const n=sy();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:d,parentNode:p,nextSibling:v,setScopeId:m=zu,insertStaticContent:x}=t,E=(se,le,he,ee=null,be=null,je=null,We=void 0,Qe=null,Je=!!le.dynamicChildren)=>{if(se===le)return;se&&!fc(se,le)&&(ee=me(se),j(se,be,je,!0),se=null),le.patchFlag===-2&&(Je=!1,le.dynamicChildren=null);const{type:st,ref:Pt,shapeFlag:Bt}=le;switch(st){case dd:T(se,le,he,ee);break;case Ro:D(se,le,he,ee);break;case tf:se==null&&k(le,he,ee,We);break;case _n:$(se,le,he,ee,be,je,We,Qe,Je);break;default:Bt&1?Q(se,le,he,ee,be,je,We,Qe,Je):Bt&6?X(se,le,he,ee,be,je,We,Qe,Je):(Bt&64||Bt&128)&&st.process(se,le,he,ee,be,je,We,Qe,Je,Te)}Pt!=null&&be&&em(Pt,se&&se.ref,je,le||se,!le)},T=(se,le,he,ee)=>{if(se==null)r(le.el=a(le.children),he,ee);else{const be=le.el=se.el;le.children!==se.children&&c(be,le.children)}},D=(se,le,he,ee)=>{se==null?r(le.el=l(le.children||""),he,ee):le.el=se.el},k=(se,le,he,ee)=>{[se.el,se.anchor]=x(se.children,le,he,ee,se.el,se.anchor)},B=({el:se,anchor:le},he,ee)=>{let be;for(;se&&se!==le;)be=v(se),r(se,he,ee),se=be;r(le,he,ee)},W=({el:se,anchor:le})=>{let he;for(;se&&se!==le;)he=v(se),i(se),se=he;i(le)},Q=(se,le,he,ee,be,je,We,Qe,Je)=>{le.type==="svg"?We="svg":le.type==="math"&&(We="mathml"),se==null?pe(le,he,ee,be,je,We,Qe,Je):U(se,le,be,je,We,Qe,Je)},pe=(se,le,he,ee,be,je,We,Qe)=>{let Je,st;const{props:Pt,shapeFlag:Bt,transition:Ht,dirs:Jt}=se;if(Je=se.el=o(se.type,je,Pt&&Pt.is,Pt),Bt&8?d(Je,se.children):Bt&16&&O(se.children,Je,null,ee,be,S1(se,je),We,Qe),Jt&&Fc(se,null,ee,"created"),fe(Je,se,se.scopeId,We,ee),Pt){for(const pn in Pt)pn!=="value"&&!op(pn)&&s(Je,pn,null,Pt[pn],je,ee);"value"in Pt&&s(Je,"value",null,Pt.value,je),(st=Pt.onVnodeBeforeMount)&&$l(st,ee,se)}Jt&&Fc(se,null,ee,"beforeMount");const fn=SS(be,Ht);fn&&Ht.beforeEnter(Je),r(Je,le,he),((st=Pt&&Pt.onVnodeMounted)||fn||Jt)&&$o(()=>{st&&$l(st,ee,se),fn&&Ht.enter(Je),Jt&&Fc(se,null,ee,"mounted")},be)},fe=(se,le,he,ee,be)=>{if(he&&m(se,he),ee)for(let je=0;je<ee.length;je++)m(se,ee[je]);if(be){let je=be.subTree;if(le===je||Lv(je.type)&&(je.ssContent===le||je.ssFallback===le)){const We=be.vnode;fe(se,We,We.scopeId,We.slotScopeIds,be.parent)}}},O=(se,le,he,ee,be,je,We,Qe,Je=0)=>{for(let st=Je;st<se.length;st++){const Pt=se[st]=Qe?td(se[st]):Hl(se[st]);E(null,Pt,le,he,ee,be,je,We,Qe)}},U=(se,le,he,ee,be,je,We)=>{const Qe=le.el=se.el;let{patchFlag:Je,dynamicChildren:st,dirs:Pt}=le;Je|=se.patchFlag&16;const Bt=se.props||vi,Ht=le.props||vi;let Jt;if(he&&Nd(he,!1),(Jt=Ht.onVnodeBeforeUpdate)&&$l(Jt,he,le,se),Pt&&Fc(le,se,he,"beforeUpdate"),he&&Nd(he,!0),(Bt.innerHTML&&Ht.innerHTML==null||Bt.textContent&&Ht.textContent==null)&&d(Qe,""),st?q(se.dynamicChildren,st,Qe,he,ee,S1(le,be),je):We||Y(se,le,Qe,null,he,ee,S1(le,be),je,!1),Je>0){if(Je&16)R(Qe,Bt,Ht,he,be);else if(Je&2&&Bt.class!==Ht.class&&s(Qe,"class",null,Ht.class,be),Je&4&&s(Qe,"style",Bt.style,Ht.style,be),Je&8){const fn=le.dynamicProps;for(let pn=0;pn<fn.length;pn++){const et=fn[pn],ot=Bt[et],rt=Ht[et];(rt!==ot||et==="value")&&s(Qe,et,ot,rt,be,he)}}Je&1&&se.children!==le.children&&d(Qe,le.children)}else!We&&st==null&&R(Qe,Bt,Ht,he,be);((Jt=Ht.onVnodeUpdated)||Pt)&&$o(()=>{Jt&&$l(Jt,he,le,se),Pt&&Fc(le,se,he,"updated")},ee)},q=(se,le,he,ee,be,je,We)=>{for(let Qe=0;Qe<le.length;Qe++){const Je=se[Qe],st=le[Qe],Pt=Je.el&&(Je.type===_n||!fc(Je,st)||Je.shapeFlag&70)?p(Je.el):he;E(Je,st,Pt,null,ee,be,je,We,!0)}},R=(se,le,he,ee,be)=>{if(le!==he){if(le!==vi)for(const je in le)!op(je)&&!(je in he)&&s(se,je,le[je],null,be,ee);for(const je in he){if(op(je))continue;const We=he[je],Qe=le[je];We!==Qe&&je!=="value"&&s(se,je,Qe,We,be,ee)}"value"in he&&s(se,"value",le.value,he.value,be)}},$=(se,le,he,ee,be,je,We,Qe,Je)=>{const st=le.el=se?se.el:a(""),Pt=le.anchor=se?se.anchor:a("");let{patchFlag:Bt,dynamicChildren:Ht,slotScopeIds:Jt}=le;Jt&&(Qe=Qe?Qe.concat(Jt):Jt),se==null?(r(st,he,ee),r(Pt,he,ee),O(le.children||[],he,Pt,be,je,We,Qe,Je)):Bt>0&&Bt&64&&Ht&&se.dynamicChildren?(q(se.dynamicChildren,Ht,he,be,je,We,Qe),(le.key!=null||be&&le===be.subTree)&&m_(se,le,!0)):Y(se,le,he,Pt,be,je,We,Qe,Je)},X=(se,le,he,ee,be,je,We,Qe,Je)=>{le.slotScopeIds=Qe,se==null?le.shapeFlag&512?be.ctx.activate(le,he,ee,We,Je):K(le,he,ee,be,je,We,Je):F(se,le,Je)},K=(se,le,he,ee,be,je,We)=>{const Qe=se.component=jS(se,ee,be);if(_m(se)&&(Qe.ctx.renderer=Te),$S(Qe,!1,We),Qe.asyncDep){if(be&&be.registerDep(Qe,N,We),!se.el){const Je=Qe.subTree=Xr(Ro);D(null,Je,le,he)}}else N(Qe,se,le,he,be,je,We)},F=(se,le,he)=>{const ee=le.component=se.component;if(LI(se,le,he))if(ee.asyncDep&&!ee.asyncResolved){J(ee,le,he);return}else ee.next=le,ee.update();else le.el=se.el,ee.vnode=le},N=(se,le,he,ee,be,je,We)=>{const Qe=()=>{if(se.isMounted){let{next:Bt,bu:Ht,u:Jt,parent:fn,vnode:pn}=se;{const Xt=CS(se);if(Xt){Bt&&(Bt.el=pn.el,J(se,Bt,We)),Xt.asyncDep.then(()=>{se.isUnmounted||Qe()});return}}let et=Bt,ot;Nd(se,!1),Bt?(Bt.el=pn.el,J(se,Bt,We)):Bt=pn,Ht&&ap(Ht),(ot=Bt.props&&Bt.props.onVnodeBeforeUpdate)&&$l(ot,fn,Bt,pn),Nd(se,!0);const rt=$0(se),Ft=se.subTree;se.subTree=rt,E(Ft,rt,p(Ft.el),me(Ft),se,be,je),Bt.el=rt.el,et===null&&yy(se,rt.el),Jt&&$o(Jt,be),(ot=Bt.props&&Bt.props.onVnodeUpdated)&&$o(()=>$l(ot,fn,Bt,pn),be)}else{let Bt;const{el:Ht,props:Jt}=le,{bm:fn,m:pn,parent:et,root:ot,type:rt}=se,Ft=hd(le);if(Nd(se,!1),fn&&ap(fn),!Ft&&(Bt=Jt&&Jt.onVnodeBeforeMount)&&$l(Bt,et,le),Nd(se,!0),Ht&&qe){const Xt=()=>{se.subTree=$0(se),qe(Ht,se.subTree,se,be,null)};Ft&&rt.__asyncHydrate?rt.__asyncHydrate(Ht,se,Xt):Xt()}else{ot.ce&&ot.ce._injectChildStyle(rt);const Xt=se.subTree=$0(se);E(null,Xt,he,ee,se,be,je),le.el=Xt.el}if(pn&&$o(pn,be),!Ft&&(Bt=Jt&&Jt.onVnodeMounted)){const Xt=le;$o(()=>$l(Bt,et,Xt),be)}(le.shapeFlag&256||et&&hd(et.vnode)&&et.vnode.shapeFlag&256)&&se.a&&$o(se.a,be),se.isMounted=!0,le=he=ee=null}};se.scope.on();const Je=se.effect=new Yg(Qe);se.scope.off();const st=se.update=Je.run.bind(Je),Pt=se.job=Je.runIfDirty.bind(Je);Pt.i=se,Pt.id=se.uid,Je.scheduler=()=>s_(Pt),Nd(se,!0),st()},J=(se,le,he)=>{le.component=se;const ee=se.vnode.props;se.vnode=le,se.next=null,cI(se,le.props,ee,he),pI(se,le.children,he),wd(),_x(se),xd()},Y=(se,le,he,ee,be,je,We,Qe,Je=!1)=>{const st=se&&se.children,Pt=se?se.shapeFlag:0,Bt=le.children,{patchFlag:Ht,shapeFlag:Jt}=le;if(Ht>0){if(Ht&128){Ce(st,Bt,he,ee,be,je,We,Qe,Je);return}else if(Ht&256){ye(st,Bt,he,ee,be,je,We,Qe,Je);return}}Jt&8?(Pt&16&&ge(st,be,je),Bt!==st&&d(he,Bt)):Pt&16?Jt&16?Ce(st,Bt,he,ee,be,je,We,Qe,Je):ge(st,be,je,!0):(Pt&8&&d(he,""),Jt&16&&O(Bt,he,ee,be,je,We,Qe,Je))},ye=(se,le,he,ee,be,je,We,Qe,Je)=>{se=se||ip,le=le||ip;const st=se.length,Pt=le.length,Bt=Math.min(st,Pt);let Ht;for(Ht=0;Ht<Bt;Ht++){const Jt=le[Ht]=Je?td(le[Ht]):Hl(le[Ht]);E(se[Ht],Jt,he,null,be,je,We,Qe,Je)}st>Pt?ge(se,be,je,!0,!1,Bt):O(le,he,ee,be,je,We,Qe,Je,Bt)},Ce=(se,le,he,ee,be,je,We,Qe,Je)=>{let st=0;const Pt=le.length;let Bt=se.length-1,Ht=Pt-1;for(;st<=Bt&&st<=Ht;){const Jt=se[st],fn=le[st]=Je?td(le[st]):Hl(le[st]);if(fc(Jt,fn))E(Jt,fn,he,null,be,je,We,Qe,Je);else break;st++}for(;st<=Bt&&st<=Ht;){const Jt=se[Bt],fn=le[Ht]=Je?td(le[Ht]):Hl(le[Ht]);if(fc(Jt,fn))E(Jt,fn,he,null,be,je,We,Qe,Je);else break;Bt--,Ht--}if(st>Bt){if(st<=Ht){const Jt=Ht+1,fn=Jt<Pt?le[Jt].el:ee;for(;st<=Ht;)E(null,le[st]=Je?td(le[st]):Hl(le[st]),he,fn,be,je,We,Qe,Je),st++}}else if(st>Ht)for(;st<=Bt;)j(se[st],be,je,!0),st++;else{const Jt=st,fn=st,pn=new Map;for(st=fn;st<=Ht;st++){const Cn=le[st]=Je?td(le[st]):Hl(le[st]);Cn.key!=null&&pn.set(Cn.key,st)}let et,ot=0;const rt=Ht-fn+1;let Ft=!1,Xt=0;const Mn=new Array(rt);for(st=0;st<rt;st++)Mn[st]=0;for(st=Jt;st<=Bt;st++){const Cn=se[st];if(ot>=rt){j(Cn,be,je,!0);continue}let Vn;if(Cn.key!=null)Vn=pn.get(Cn.key);else for(et=fn;et<=Ht;et++)if(Mn[et-fn]===0&&fc(Cn,le[et])){Vn=et;break}Vn===void 0?j(Cn,be,je,!0):(Mn[Vn-fn]=st+1,Vn>=Xt?Xt=Vn:Ft=!0,E(Cn,le[Vn],he,null,be,je,We,Qe,Je),ot++)}const xn=Ft?gI(Mn):ip;for(et=xn.length-1,st=rt-1;st>=0;st--){const Cn=fn+st,Vn=le[Cn],wn=Cn+1<Pt?le[Cn+1].el:ee;Mn[st]===0?E(null,Vn,he,wn,be,je,We,Qe,Je):Ft&&(et<0||st!==xn[et]?He(Vn,he,wn,2):et--)}}},He=(se,le,he,ee,be=null)=>{const{el:je,type:We,transition:Qe,children:Je,shapeFlag:st}=se;if(st&6){He(se.component.subTree,le,he,ee);return}if(st&128){se.suspense.move(le,he,ee);return}if(st&64){We.move(se,le,he,Te);return}if(We===_n){r(je,le,he);for(let Bt=0;Bt<Je.length;Bt++)He(Je[Bt],le,he,ee);r(se.anchor,le,he);return}if(We===tf){B(se,le,he);return}if(ee!==2&&st&1&&Qe)if(ee===0)Qe.beforeEnter(je),r(je,le,he),$o(()=>Qe.enter(je),be);else{const{leave:Bt,delayLeave:Ht,afterLeave:Jt}=Qe,fn=()=>r(je,le,he),pn=()=>{Bt(je,()=>{fn(),Jt&&Jt()})};Ht?Ht(je,fn,pn):pn()}else r(je,le,he)},j=(se,le,he,ee=!1,be=!1)=>{const{type:je,props:We,ref:Qe,children:Je,dynamicChildren:st,shapeFlag:Pt,patchFlag:Bt,dirs:Ht,cacheIndex:Jt}=se;if(Bt===-2&&(be=!1),Qe!=null&&em(Qe,null,he,se,!0),Jt!=null&&(le.renderCache[Jt]=void 0),Pt&256){le.ctx.deactivate(se);return}const fn=Pt&1&&Ht,pn=!hd(se);let et;if(pn&&(et=We&&We.onVnodeBeforeUnmount)&&$l(et,le,se),Pt&6)de(se.component,he,ee);else{if(Pt&128){se.suspense.unmount(he,ee);return}fn&&Fc(se,null,le,"beforeUnmount"),Pt&64?se.type.remove(se,le,he,Te,ee):st&&!st.hasOnce&&(je!==_n||Bt>0&&Bt&64)?ge(st,le,he,!1,!0):(je===_n&&Bt&384||!be&&Pt&16)&&ge(Je,le,he),ee&&Z(se)}(pn&&(et=We&&We.onVnodeUnmounted)||fn)&&$o(()=>{et&&$l(et,le,se),fn&&Fc(se,null,le,"unmounted")},he)},Z=se=>{const{type:le,el:he,anchor:ee,transition:be}=se;if(le===_n){ae(he,ee);return}if(le===tf){W(se);return}const je=()=>{i(he),be&&!be.persisted&&be.afterLeave&&be.afterLeave()};if(se.shapeFlag&1&&be&&!be.persisted){const{leave:We,delayLeave:Qe}=be,Je=()=>We(he,je);Qe?Qe(se.el,je,Je):Je()}else je()},ae=(se,le)=>{let he;for(;se!==le;)he=v(se),i(se),se=he;i(le)},de=(se,le,he)=>{const{bum:ee,scope:be,job:je,subTree:We,um:Qe,m:Je,a:st}=se;xv(Je),xv(st),ee&&ap(ee),be.stop(),je&&(je.flags|=8,j(We,se,le,he)),Qe&&$o(Qe,le),$o(()=>{se.isUnmounted=!0},le),le&&le.pendingBranch&&!le.isUnmounted&&se.asyncDep&&!se.asyncResolved&&se.suspenseId===le.pendingId&&(le.deps--,le.deps===0&&le.resolve())},ge=(se,le,he,ee=!1,be=!1,je=0)=>{for(let We=je;We<se.length;We++)j(se[We],le,he,ee,be)},me=se=>{if(se.shapeFlag&6)return me(se.component.subTree);if(se.shapeFlag&128)return se.suspense.next();const le=v(se.anchor||se.el),he=le&&le[HL];return he?v(he):le};let oe=!1;const re=(se,le,he)=>{se==null?le._vnode&&j(le._vnode,null,null,!0):E(le._vnode||null,se,le,null,null,null,he),le._vnode=se,oe||(oe=!0,_x(),_v(),oe=!1)},Te={p:E,um:j,m:He,r:Z,mt:K,mc:O,pc:Y,pbc:q,n:me,o:t};let Le,qe;return e&&([Le,qe]=e(Te)),{render:re,hydrate:Le,createApp:lI(re,Le)}}function S1({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Nd({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function SS(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function m_(t,e,n=!1){const r=t.children,i=e.children;if(Jn(r)&&Jn(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=td(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&m_(o,a)),a.type===dd&&(a.el=o.el)}}function gI(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function CS(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:CS(e)}function xv(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const ES=Symbol.for("v-scx"),MS=()=>bu(ES);function nm(t,e){return wm(t,null,e)}function mI(t,e){return wm(t,null,{flush:"post"})}function PS(t,e){return wm(t,null,{flush:"sync"})}function ni(t,e,n){return wm(t,e,n)}function wm(t,e,n=vi){const{immediate:r,deep:i,flush:s,once:o}=n,a=ts({},n),l=e&&r||!e&&s!=="post";let c;if(mp){if(s==="sync"){const m=MS();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=zu,m.resume=zu,m.pause=zu,m}}const d=Uo;a.call=(m,x,E)=>Vu(m,d,x,E);let p=!1;s==="post"?a.scheduler=m=>{$o(m,d&&d.suspense)}:s!=="sync"&&(p=!0,a.scheduler=(m,x)=>{x?m():s_(m)}),a.augmentJob=m=>{e&&(m.flags|=4),p&&(m.flags|=2,d&&(m.id=d.uid,m.i=d))};const v=o8(t,e,a);return mp&&(c?c.push(v):l&&v()),v}function vI(t,e,n){const r=this.proxy,i=hs(t)?t.includes(".")?kS(r,t):()=>r[t]:t.bind(r,r);let s;Lr(e)?s=e:(s=e.handler,n=e);const o=uf(this),a=wm(i,s.bind(r),n);return o(),a}function kS(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function yI(t,e,n=vi){const r=Gu(),i=La(e),s=Gl(e),o=AS(t,i),a=BL((l,c)=>{let d,p=vi,v;return PS(()=>{const m=t[i];vl(d,m)&&(d=m,c())}),{get(){return l(),n.get?n.get(d):d},set(m){const x=n.set?n.set(m):m;if(!vl(x,d)&&!(p!==vi&&vl(m,p)))return;const E=r.vnode.props;E&&(e in E||i in E||s in E)&&(`onUpdate:${e}`in E||`onUpdate:${i}`in E||`onUpdate:${s}`in E)||(d=m,c()),r.emit(`update:${e}`,x),vl(m,x)&&vl(m,p)&&!vl(x,v)&&c(),p=m,v=x}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||vi:a,done:!1}:{done:!0}}}},a}const AS=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${La(e)}Modifiers`]||t[`${Gl(e)}Modifiers`];function bI(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||vi;let i=n;const s=e.startsWith("update:"),o=s&&AS(r,e.slice(7));o&&(o.trim&&(i=n.map(d=>hs(d)?d.trim():d)),o.number&&(i=n.map(gv)));let a,l=r[a=Sg(e)]||r[a=Sg(La(e))];!l&&s&&(l=r[a=Sg(Gl(e))]),l&&Vu(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Vu(c,t,6,i)}}function TS(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Lr(t)){const l=c=>{const d=TS(c,e,!0);d&&(a=!0,ts(o,d))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(Hi(t)&&r.set(t,null),null):(Jn(s)?s.forEach(l=>o[l]=null):ts(o,s),Hi(t)&&r.set(t,o),o)}function vy(t,e){return!t||!ym(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ii(t,e[0].toLowerCase()+e.slice(1))||Ii(t,Gl(e))||Ii(t,e))}function $0(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:d,props:p,data:v,setupState:m,ctx:x,inheritAttrs:E}=t,T=Qg(t);let D,k;try{if(n.shapeFlag&4){const W=i||r,Q=W;D=Hl(c.call(Q,W,d,p,m,v,x)),k=a}else{const W=e;D=Hl(W.length>1?W(p,{attrs:a,slots:o,emit:l}):W(p,null)),k=e.props?a:wI(a)}}catch(W){Ag.length=0,gf(W,t,1),D=Xr(Ro)}let B=D;if(k&&E!==!1){const W=Object.keys(k),{shapeFlag:Q}=B;W.length&&Q&7&&(s&&W.some(Hb)&&(k=xI(k,s)),B=Zc(B,k,!1,!0))}return n.dirs&&(B=Zc(B,null,!1,!0),B.dirs=B.dirs?B.dirs.concat(n.dirs):n.dirs),n.transition&&Ah(B,n.transition),D=B,Qg(T),D}function _I(t,e=!0){let n;for(let r=0;r<t.length;r++){const i=t[r];if(Th(i)){if(i.type!==Ro||i.children==="v-if"){if(n)return;n=i}}else return}return n}const wI=t=>{let e;for(const n in t)(n==="class"||n==="style"||ym(n))&&((e||(e={}))[n]=t[n]);return e},xI=(t,e)=>{const n={};for(const r in t)(!Hb(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function LI(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Dx(r,o,c):!!o;if(l&8){const d=e.dynamicProps;for(let p=0;p<d.length;p++){const v=d[p];if(o[v]!==r[v]&&!vy(c,v))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Dx(r,o,c):!0:!!o;return!1}function Dx(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!vy(n,s))return!0}return!1}function yy({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Lv=t=>t.__isSuspense;let D2=0;const SI={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,c){if(t==null)EI(e,n,r,i,s,o,a,l,c);else{if(s&&s.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}MI(t,e,n,r,i,o,a,l,c)}},hydrate:PI,normalize:kI},CI=SI;function rm(t,e){const n=t.props&&t.props[e];Lr(n)&&n()}function EI(t,e,n,r,i,s,o,a,l){const{p:c,o:{createElement:d}}=l,p=d("div"),v=t.suspense=DS(t,i,r,e,p,n,s,o,a,l);c(null,v.pendingBranch=t.ssContent,p,null,r,v,s,o),v.deps>0?(rm(t,"onPending"),rm(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,s,o),up(v,t.ssFallback)):v.resolve(!1,!0)}function MI(t,e,n,r,i,s,o,a,{p:l,um:c,o:{createElement:d}}){const p=e.suspense=t.suspense;p.vnode=e,e.el=t.el;const v=e.ssContent,m=e.ssFallback,{activeBranch:x,pendingBranch:E,isInFallback:T,isHydrating:D}=p;if(E)p.pendingBranch=v,fc(v,E)?(l(E,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():T&&(D||(l(x,m,n,r,i,null,s,o,a),up(p,m)))):(p.pendingId=D2++,D?(p.isHydrating=!1,p.activeBranch=E):c(E,i,p),p.deps=0,p.effects.length=0,p.hiddenContainer=d("div"),T?(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():(l(x,m,n,r,i,null,s,o,a),up(p,m))):x&&fc(v,x)?(l(x,v,n,r,i,p,s,o,a),p.resolve(!0)):(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0&&p.resolve()));else if(x&&fc(v,x))l(x,v,n,r,i,p,s,o,a),up(p,v);else if(rm(e,"onPending"),p.pendingBranch=v,v.shapeFlag&512?p.pendingId=v.component.suspenseId:p.pendingId=D2++,l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0)p.resolve();else{const{timeout:k,pendingId:B}=p;k>0?setTimeout(()=>{p.pendingId===B&&p.fallback(m)},k):k===0&&p.fallback(m)}}function DS(t,e,n,r,i,s,o,a,l,c,d=!1){const{p,m:v,um:m,n:x,o:{parentNode:E,remove:T}}=c;let D;const k=AI(t);k&&e&&e.pendingBranch&&(D=e.pendingId,e.deps++);const B=t.props?mv(t.props.timeout):void 0,W=s,Q={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:D2++,timeout:typeof B=="number"?B:-1,activeBranch:null,pendingBranch:null,isInFallback:!d,isHydrating:d,isUnmounted:!1,effects:[],resolve(pe=!1,fe=!1){const{vnode:O,activeBranch:U,pendingBranch:q,pendingId:R,effects:$,parentComponent:X,container:K}=Q;let F=!1;Q.isHydrating?Q.isHydrating=!1:pe||(F=U&&q.transition&&q.transition.mode==="out-in",F&&(U.transition.afterLeave=()=>{R===Q.pendingId&&(v(q,K,s===W?x(U):s,0),Xg($))}),U&&(E(U.el)===K&&(s=x(U)),m(U,X,Q,!0)),F||v(q,K,s,0)),up(Q,q),Q.pendingBranch=null,Q.isInFallback=!1;let N=Q.parent,J=!1;for(;N;){if(N.pendingBranch){N.effects.push(...$),J=!0;break}N=N.parent}!J&&!F&&Xg($),Q.effects=[],k&&e&&e.pendingBranch&&D===e.pendingId&&(e.deps--,e.deps===0&&!fe&&e.resolve()),rm(O,"onResolve")},fallback(pe){if(!Q.pendingBranch)return;const{vnode:fe,activeBranch:O,parentComponent:U,container:q,namespace:R}=Q;rm(fe,"onFallback");const $=x(O),X=()=>{Q.isInFallback&&(p(null,pe,q,$,U,null,R,a,l),up(Q,pe))},K=pe.transition&&pe.transition.mode==="out-in";K&&(O.transition.afterLeave=X),Q.isInFallback=!0,m(O,U,null,!0),K||X()},move(pe,fe,O){Q.activeBranch&&v(Q.activeBranch,pe,fe,O),Q.container=pe},next(){return Q.activeBranch&&x(Q.activeBranch)},registerDep(pe,fe,O){const U=!!Q.pendingBranch;U&&Q.deps++;const q=pe.vnode.el;pe.asyncDep.catch(R=>{gf(R,pe,0)}).then(R=>{if(pe.isUnmounted||Q.isUnmounted||Q.pendingId!==pe.suspenseId)return;pe.asyncResolved=!0;const{vnode:$}=pe;B2(pe,R,!1),q&&($.el=q);const X=!q&&pe.subTree.el;fe(pe,$,E(q||pe.subTree.el),q?null:x(pe.subTree),Q,o,O),X&&T(X),yy(pe,$.el),U&&--Q.deps===0&&Q.resolve()})},unmount(pe,fe){Q.isUnmounted=!0,Q.activeBranch&&m(Q.activeBranch,n,pe,fe),Q.pendingBranch&&m(Q.pendingBranch,n,pe,fe)}};return Q}function PI(t,e,n,r,i,s,o,a,l){const c=e.suspense=DS(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),d=l(t,c.pendingBranch=e.ssContent,n,c,s,o);return c.deps===0&&c.resolve(!1,!0),d}function kI(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=Ix(r?n.default:n),t.ssFallback=r?Ix(n.fallback):Xr(Ro)}function Ix(t){let e;if(Lr(t)){const n=lf&&t._c;n&&(t._d=!1,De()),t=t(),n&&(t._d=!0,e=Za,OS())}return Jn(t)&&(t=_I(t)),t=Hl(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function IS(t,e){e&&e.pendingBranch?Jn(t)?e.effects.push(...t):e.effects.push(t):Xg(t)}function up(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,yy(r,i))}function AI(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const _n=Symbol.for("v-fgt"),dd=Symbol.for("v-txt"),Ro=Symbol.for("v-cmt"),tf=Symbol.for("v-stc"),Ag=[];let Za=null;function De(t=!1){Ag.push(Za=t?null:[])}function OS(){Ag.pop(),Za=Ag[Ag.length-1]||null}let lf=1;function I2(t,e=!1){lf+=t,t<0&&Za&&e&&(Za.hasOnce=!0)}function NS(t){return t.dynamicChildren=lf>0?Za||ip:null,OS(),lf>0&&Za&&Za.push(t),t}function Ne(t,e,n,r,i,s){return NS(C(t,e,n,r,i,s,!0))}function xo(t,e,n,r,i){return NS(Xr(t,e,n,r,i,!0))}function Th(t){return t?t.__v_isVNode===!0:!1}function fc(t,e){return t.type===e.type&&t.key===e.key}function TI(t){}const BS=({key:t})=>t??null,U0=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?hs(t)||Zs(t)||Lr(t)?{i:Vo,r:t,k:e,f:!!n}:t:null);function C(t,e=null,n=null,r=0,i=null,s=t===_n?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&BS(e),ref:e&&U0(e),scopeId:fy,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Vo};return a?(v_(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=hs(n)?8:16),lf>0&&!o&&Za&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Za.push(l),l}const Xr=DI;function DI(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===oS)&&(t=Ro),Th(t)){const a=Zc(t,e,!0);return n&&v_(a,n),lf>0&&!s&&Za&&(a.shapeFlag&6?Za[Za.indexOf(t)]=a:Za.push(a)),a.patchFlag=-2,a}if(jI(t)&&(t=t.__vccOpts),e){e=RS(e);let{class:a,style:l}=e;a&&!hs(a)&&(e.class=xi(a)),Hi(l)&&(hy(l)&&!Jn(l)&&(l=ts({},l)),e.style=Yl(l))}const o=hs(t)?1:Lv(t)?128:GL(t)?64:Hi(t)?4:Lr(t)?2:0;return C(t,e,n,r,i,o,s,!0)}function RS(t){return t?hy(t)||pS(t)?ts({},t):t:null}function Zc(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,c=e?FS(i||{},e):i,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&BS(c),ref:e&&e.ref?n&&s?Jn(s)?s.concat(U0(e)):[s,U0(e)]:U0(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==_n?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Zc(t.ssContent),ssFallback:t.ssFallback&&Zc(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Ah(d,l.clone(d)),d}function Ir(t=" ",e=0){return Xr(dd,null,t,e)}function wl(t,e){const n=Xr(tf,null,t);return n.staticCount=e,n}function Wt(t="",e=!1){return e?(De(),xo(Ro,null,t)):Xr(Ro,null,t)}function Hl(t){return t==null||typeof t=="boolean"?Xr(Ro):Jn(t)?Xr(_n,null,t.slice()):Th(t)?td(t):Xr(dd,null,String(t))}function td(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Zc(t)}function v_(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Jn(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),v_(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!pS(e)?e._ctx=Vo:i===3&&Vo&&(Vo.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Lr(e)?(e={default:e,_ctx:Vo},n=32):(e=String(e),r&64?(n=16,e=[Ir(e)]):n=8);t.children=e,t.shapeFlag|=n}function FS(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=xi([e.class,r.class]));else if(i==="style")e.style=Yl([e.style,r.style]);else if(ym(i)){const s=e[i],o=r[i];o&&s!==o&&!(Jn(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function $l(t,e,n,r=null){Vu(t,e,7,[n,r])}const II=cS();let OI=0;function jS(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||II,s={uid:OI++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Yb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:mS(r,i),emitsOptions:TS(r,i),emit:null,emitted:null,propsDefaults:vi,inheritAttrs:r.inheritAttrs,ctx:vi,data:vi,props:vi,attrs:vi,slots:vi,refs:vi,setupState:vi,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=bI.bind(null,s),t.ce&&t.ce(s),s}let Uo=null;const Gu=()=>Uo||Vo;let Sv,O2;{const t=sy(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Sv=e("__VUE_INSTANCE_SETTERS__",n=>Uo=n),O2=e("__VUE_SSR_SETTERS__",n=>mp=n)}const uf=t=>{const e=Uo;return Sv(t),t.scope.on(),()=>{t.scope.off(),Sv(e)}},N2=()=>{Uo&&Uo.scope.off(),Sv(null)};function zS(t){return t.vnode.shapeFlag&4}let mp=!1;function $S(t,e=!1,n=!1){e&&O2(e);const{props:r,children:i}=t.vnode,s=zS(t);uI(t,r,s,e),fI(t,i,n);const o=s?NI(t,e):void 0;return e&&O2(!1),o}function NI(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,P2);const{setup:r}=n;if(r){wd();const i=t.setupContext=r.length>1?VS(t):null,s=uf(t),o=kp(r,t,0,[t.props,i]),a=Wb(o);if(xd(),s(),(a||t.sp)&&!hd(t)&&l_(t),a){if(o.then(N2,N2),e)return o.then(l=>{B2(t,l,e)}).catch(l=>{gf(l,t,0)});t.asyncDep=o}else B2(t,o,e)}else US(t,e)}function B2(t,e,n){Lr(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Hi(e)&&(t.setupState=r_(e)),US(t,n)}let Cv,R2;function BI(t){Cv=t,R2=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,U8))}}const RI=()=>!Cv;function US(t,e,n){const r=t.type;if(!t.render){if(!e&&Cv&&!r.render){const i=r.template||p_(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=ts(ts({isCustomElement:s,delimiters:a},o),l);r.render=Cv(i,c)}}t.render=r.render||zu,R2&&R2(t)}{const i=uf(t);wd();try{nI(t)}finally{xd(),i()}}}const FI={get(t,e){return Ga(t,"get",""),t[e]}};function VS(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,FI),slots:t.slots,emit:t.emit,expose:e}}function xm(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(r_(dy(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Pg)return Pg[n](t)},has(e,n){return n in e||n in Pg}})):t.proxy}function F2(t,e=!0){return Lr(t)?t.displayName||t.name:t.name||e&&t.__name}function jI(t){return Lr(t)&&"__vccOpts"in t}const qn=(t,e)=>n8(t,e,mp);function by(t,e,n){const r=arguments.length;return r===2?Hi(e)&&!Jn(e)?Th(e)?Xr(t,null,[e]):Xr(t,e):Xr(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Th(n)&&(n=[n]),Xr(t,e,n))}function zI(){}function $I(t,e,n,r){const i=n[r];if(i&&HS(i,t))return i;const s=e();return s.memo=t.slice(),s.cacheIndex=r,n[r]=s}function HS(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(vl(n[r],e[r]))return!1;return lf>0&&Za&&Za.push(t),!0}const GS="3.5.13",UI=zu,VI=h8,HI=Kf,GI=VL,WI={createComponentInstance:jS,setupComponent:$S,renderComponentRoot:$0,setCurrentRenderingInstance:Qg,isVNode:Th,normalizeVNode:Hl,getComponentPublicInstance:xm,ensureValidVNode:f_,pushWarningContext:a8,popWarningContext:l8},qI=WI,YI=null,KI=null,ZI=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let j2;const Ox=typeof window<"u"&&window.trustedTypes;if(Ox)try{j2=Ox.createPolicy("vue",{createHTML:t=>t})}catch{}const WS=j2?t=>j2.createHTML(t):t=>t,XI="http://www.w3.org/2000/svg",JI="http://www.w3.org/1998/Math/MathML",_h=typeof document<"u"?document:null,Nx=_h&&_h.createElement("template"),QI={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?_h.createElementNS(XI,t):e==="mathml"?_h.createElementNS(JI,t):n?_h.createElement(t,{is:n}):_h.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>_h.createTextNode(t),createComment:t=>_h.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>_h.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{Nx.innerHTML=WS(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=Nx.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Vh="transition",Up="animation",vp=Symbol("_vtc"),qS={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},YS=ts({},a_,qS),eO=t=>(t.displayName="Transition",t.props=YS,t),z2=eO((t,{slots:e})=>by(ZL,KS(t),e)),Bd=(t,e=[])=>{Jn(t)?t.forEach(n=>n(...e)):t&&t(...e)},Bx=t=>t?Jn(t)?t.some(e=>e.length>1):t.length>1:!1;function KS(t){const e={};for(const $ in t)$ in qS||(e[$]=t[$]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:d=a,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:v=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,x=tO(i),E=x&&x[0],T=x&&x[1],{onBeforeEnter:D,onEnter:k,onEnterCancelled:B,onLeave:W,onLeaveCancelled:Q,onBeforeAppear:pe=D,onAppear:fe=k,onAppearCancelled:O=B}=e,U=($,X,K,F)=>{$._enterCancelled=F,Zh($,X?d:a),Zh($,X?c:o),K&&K()},q=($,X)=>{$._isLeaving=!1,Zh($,p),Zh($,m),Zh($,v),X&&X()},R=$=>(X,K)=>{const F=$?fe:k,N=()=>U(X,$,K);Bd(F,[X,N]),Rx(()=>{Zh(X,$?l:s),Ic(X,$?d:a),Bx(F)||Fx(X,r,E,N)})};return ts(e,{onBeforeEnter($){Bd(D,[$]),Ic($,s),Ic($,o)},onBeforeAppear($){Bd(pe,[$]),Ic($,l),Ic($,c)},onEnter:R(!1),onAppear:R(!0),onLeave($,X){$._isLeaving=!0;const K=()=>q($,X);Ic($,p),$._enterCancelled?(Ic($,v),$2()):($2(),Ic($,v)),Rx(()=>{$._isLeaving&&(Zh($,p),Ic($,m),Bx(W)||Fx($,r,T,K))}),Bd(W,[$,K])},onEnterCancelled($){U($,!1,void 0,!0),Bd(B,[$])},onAppearCancelled($){U($,!0,void 0,!0),Bd(O,[$])},onLeaveCancelled($){q($),Bd(Q,[$])}})}function tO(t){if(t==null)return null;if(Hi(t))return[C1(t.enter),C1(t.leave)];{const e=C1(t);return[e,e]}}function C1(t){return mv(t)}function Ic(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[vp]||(t[vp]=new Set)).add(e)}function Zh(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[vp];n&&(n.delete(e),n.size||(t[vp]=void 0))}function Rx(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let nO=0;function Fx(t,e,n,r){const i=t._endId=++nO,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=ZS(t,e);if(!o)return r();const c=o+"end";let d=0;const p=()=>{t.removeEventListener(c,v),s()},v=m=>{m.target===t&&++d>=l&&p()};setTimeout(()=>{d<l&&p()},a+1),t.addEventListener(c,v)}function ZS(t,e){const n=window.getComputedStyle(t),r=x=>(n[x]||"").split(", "),i=r(`${Vh}Delay`),s=r(`${Vh}Duration`),o=jx(i,s),a=r(`${Up}Delay`),l=r(`${Up}Duration`),c=jx(a,l);let d=null,p=0,v=0;e===Vh?o>0&&(d=Vh,p=o,v=s.length):e===Up?c>0&&(d=Up,p=c,v=l.length):(p=Math.max(o,c),d=p>0?o>c?Vh:Up:null,v=d?d===Vh?s.length:l.length:0);const m=d===Vh&&/\b(transform|all)(,|$)/.test(r(`${Vh}Property`).toString());return{type:d,timeout:p,propCount:v,hasTransform:m}}function jx(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>zx(n)+zx(t[r])))}function zx(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function $2(){return document.body.offsetHeight}function rO(t,e,n){const r=t[vp];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Ev=Symbol("_vod"),XS=Symbol("_vsh"),y_={beforeMount(t,{value:e},{transition:n}){t[Ev]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Vp(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Vp(t,!0),r.enter(t)):r.leave(t,()=>{Vp(t,!1)}):Vp(t,e))},beforeUnmount(t,{value:e}){Vp(t,e)}};function Vp(t,e){t.style.display=e?t[Ev]:"none",t[XS]=!e}function iO(){y_.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const JS=Symbol("");function sO(t){const e=Gu();if(!e)return;const n=e.ut=(i=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>Mv(s,i))},r=()=>{const i=t(e.proxy);e.ce?Mv(e.ce,i):U2(e.subTree,i),n(i)};u_(()=>{Xg(r)}),Ds(()=>{ni(r,zu,{flush:"post"});const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),$u(()=>i.disconnect())})}function U2(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{U2(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)Mv(t.el,e);else if(t.type===_n)t.children.forEach(n=>U2(n,e));else if(t.type===tf){let{el:n,anchor:r}=t;for(;n&&(Mv(n,e),n!==r);)n=n.nextSibling}}function Mv(t,e){if(t.nodeType===1){const n=t.style;let r="";for(const i in e)n.setProperty(`--${i}`,e[i]),r+=`--${i}: ${e[i]};`;n[JS]=r}}const oO=/(^|;)\s*display\s*:/;function aO(t,e,n){const r=t.style,i=hs(n);let s=!1;if(n&&!i){if(e)if(hs(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&V0(r,a,"")}else for(const o in e)n[o]==null&&V0(r,o,"");for(const o in n)o==="display"&&(s=!0),V0(r,o,n[o])}else if(i){if(e!==n){const o=r[JS];o&&(n+=";"+o),r.cssText=n,s=oO.test(n)}}else e&&t.removeAttribute("style");Ev in t&&(t[Ev]=s?r.display:"",t[XS]&&(r.display="none"))}const $x=/\s*!important$/;function V0(t,e,n){if(Jn(n))n.forEach(r=>V0(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=lO(t,e);$x.test(n)?t.setProperty(Gl(r),n.replace($x,""),"important"):t[r]=n}}const Ux=["Webkit","Moz","ms"],E1={};function lO(t,e){const n=E1[e];if(n)return n;let r=La(e);if(r!=="filter"&&r in t)return E1[e]=r;r=bm(r);for(let i=0;i<Ux.length;i++){const s=Ux[i]+r;if(s in t)return E1[e]=s}return e}const Vx="http://www.w3.org/1999/xlink";function Hx(t,e,n,r,i,s=LD(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Vx,e.slice(6,e.length)):t.setAttributeNS(Vx,e,n):n==null||s&&!mL(n)?t.removeAttribute(e):t.setAttribute(e,s?"":yc(n)?String(n):n)}function Gx(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?WS(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=mL(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function Sh(t,e,n,r){t.addEventListener(e,n,r)}function uO(t,e,n,r){t.removeEventListener(e,n,r)}const Wx=Symbol("_vei");function cO(t,e,n,r,i=null){const s=t[Wx]||(t[Wx]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=hO(e);if(r){const c=s[e]=pO(r,i);Sh(t,a,c,l)}else o&&(uO(t,a,o,l),s[e]=void 0)}}const qx=/(?:Once|Passive|Capture)$/;function hO(t){let e;if(qx.test(t)){e={};let r;for(;r=t.match(qx);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Gl(t.slice(2)),e]}let M1=0;const dO=Promise.resolve(),fO=()=>M1||(dO.then(()=>M1=0),M1=Date.now());function pO(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Vu(gO(r,n.value),e,5,[r])};return n.value=t,n.attached=fO(),n}function gO(t,e){if(Jn(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Yx=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,mO=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?rO(t,r,o):e==="style"?aO(t,n,r):ym(e)?Hb(e)||cO(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):vO(t,e,r,o))?(Gx(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Hx(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!hs(r))?Gx(t,La(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Hx(t,e,r,o))};function vO(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Yx(e)&&Lr(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Yx(e)&&hs(n)?!1:e in t}const Kx={};/*! #__NO_SIDE_EFFECTS__ */function QS(t,e,n){const r=_s(t,e);ry(r)&&ts(r,e);class i extends _y{constructor(o){super(r,o,n)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const yO=(t,e)=>QS(t,e,uC),bO=typeof HTMLElement<"u"?HTMLElement:class{};class _y extends bO{constructor(e,n={},r=kv){super(),this._def=e,this._props=n,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==kv?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof _y){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,_l(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=r;let a;if(s&&!Jn(s))for(const l in s){const c=s[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=mv(this._props[l])),(a||(a=Object.create(null)))[La(l)]=!0)}this._numberProps=a,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(r=>e(this._def=r,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const r in n)Ii(this,r)||Object.defineProperty(this,r,{get:()=>bn(n[r])})}_resolveProps(e){const{props:n}=e,r=Jn(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(La))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const n=this.hasAttribute(e);let r=n?this.getAttribute(e):Kx;const i=La(e);n&&this._numberProps&&this._numberProps[i]&&(r=mv(r)),this._setProp(i,r,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,n,r=!0,i=!1){if(n!==this._props[e]&&(n===Kx?delete this._props[e]:(this._props[e]=n,e==="key"&&this._app&&(this._app._ceVNode.key=n)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),n===!0?this.setAttribute(Gl(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Gl(e),n+""):n||this.removeAttribute(Gl(e)),s&&s.observe(this,{attributes:!0})}}_update(){lC(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const n=Xr(this._def,ts(e,this._props));return this._instance||(n.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,ry(o[0])?ts({detail:o},o[0]):{detail:o}))};r.emit=(s,...o)=>{i(s,o),Gl(s)!==s&&i(Gl(s),o)},this._setParent()}),n}_applyStyles(e,n){if(!e)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const r=this._nonce;for(let i=e.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=e[i],this.shadowRoot.prepend(s)}}_parseSlots(){const e=this._slots={};let n;for(;n=this.firstChild;){const r=n.nodeType===1&&n.getAttribute("slot")||"default";(e[r]||(e[r]=[])).push(n),this.removeChild(n)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),n=this._instance.type.__scopeId;for(let r=0;r<e.length;r++){const i=e[r],s=i.getAttribute("name")||"default",o=this._slots[s],a=i.parentNode;if(o)for(const l of o){if(n&&l.nodeType===1){const c=n+"-s",d=document.createTreeWalker(l,1);l.setAttribute(c,"");let p;for(;p=d.nextNode();)p.setAttribute(c,"")}a.insertBefore(l,i)}else for(;i.firstChild;)a.insertBefore(i.firstChild,i);a.removeChild(i)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function eC(t){const e=Gu(),n=e&&e.ce;return n||null}function _O(){const t=eC();return t&&t.shadowRoot}function wO(t="$style"){{const e=Gu();if(!e)return vi;const n=e.type.__cssModules;if(!n)return vi;const r=n[t];return r||vi}}const tC=new WeakMap,nC=new WeakMap,Pv=Symbol("_moveCb"),Zx=Symbol("_enterCb"),xO=t=>(delete t.props.mode,t),LO=xO({name:"TransitionGroup",props:ts({},YS,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Gu(),r=o_();let i,s;return my(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!PO(i[0].el,n.vnode.el,o))return;i.forEach(CO),i.forEach(EO);const a=i.filter(MO);$2(),a.forEach(l=>{const c=l.el,d=c.style;Ic(c,o),d.transform=d.webkitTransform=d.transitionDuration="";const p=c[Pv]=v=>{v&&v.target!==c||(!v||/transform$/.test(v.propertyName))&&(c.removeEventListener("transitionend",p),c[Pv]=null,Zh(c,o))};c.addEventListener("transitionend",p)})}),()=>{const o=mi(t),a=KS(o);let l=o.tag||_n;if(i=[],s)for(let c=0;c<s.length;c++){const d=s[c];d.el&&d.el instanceof Element&&(i.push(d),Ah(d,gp(d,a,r,n)),tC.set(d,d.el.getBoundingClientRect()))}s=e.default?py(e.default()):[];for(let c=0;c<s.length;c++){const d=s[c];d.key!=null&&Ah(d,gp(d,a,r,n))}return Xr(l,null,s)}}}),SO=LO;function CO(t){const e=t.el;e[Pv]&&e[Pv](),e[Zx]&&e[Zx]()}function EO(t){nC.set(t,t.el.getBoundingClientRect())}function MO(t){const e=tC.get(t),n=nC.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function PO(t,e,n){const r=t.cloneNode(),i=t[vp];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=ZS(r);return s.removeChild(r),o}const md=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Jn(e)?n=>ap(e,n):e};function kO(t){t.target.composing=!0}function Xx(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Uu=Symbol("_assign"),ui={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Uu]=md(i);const s=r||i.props&&i.props.type==="number";Sh(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=gv(a)),t[Uu](a)}),n&&Sh(t,"change",()=>{t.value=t.value.trim()}),e||(Sh(t,"compositionstart",kO),Sh(t,"compositionend",Xx),Sh(t,"change",Xx))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(t[Uu]=md(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?gv(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===l)||(t.value=l))}},Ul={deep:!0,created(t,e,n){t[Uu]=md(n),Sh(t,"change",()=>{const r=t._modelValue,i=yp(t),s=t.checked,o=t[Uu];if(Jn(r)){const a=oy(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(pf(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(rC(t,s))})},mounted:Jx,beforeUpdate(t,e,n){t[Uu]=md(n),Jx(t,e,n)}};function Jx(t,{value:e,oldValue:n},r){t._modelValue=e;let i;if(Jn(e))i=oy(e,r.props.value)>-1;else if(pf(e))i=e.has(r.props.value);else{if(e===n)return;i=pd(e,rC(t,!0))}t.checked!==i&&(t.checked=i)}const b_={created(t,{value:e},n){t.checked=pd(e,n.props.value),t[Uu]=md(n),Sh(t,"change",()=>{t[Uu](yp(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Uu]=md(r),e!==n&&(t.checked=pd(e,r.props.value))}},Mi={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=pf(e);Sh(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?gv(yp(o)):yp(o));t[Uu](t.multiple?i?new Set(s):s:s[0]),t._assigning=!0,_l(()=>{t._assigning=!1})}),t[Uu]=md(r)},mounted(t,{value:e}){Qx(t,e)},beforeUpdate(t,e,n){t[Uu]=md(n)},updated(t,{value:e}){t._assigning||Qx(t,e)}};function Qx(t,e){const n=t.multiple,r=Jn(e);if(!(n&&!r&&!pf(e))){for(let i=0,s=t.options.length;i<s;i++){const o=t.options[i],a=yp(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=oy(e,a)>-1}else o.selected=e.has(a);else if(pd(yp(o),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function yp(t){return"_value"in t?t._value:t.value}function rC(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const __={created(t,e,n){u0(t,e,n,null,"created")},mounted(t,e,n){u0(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){u0(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){u0(t,e,n,r,"updated")}};function iC(t,e){switch(t){case"SELECT":return Mi;case"TEXTAREA":return ui;default:switch(e){case"checkbox":return Ul;case"radio":return b_;default:return ui}}}function u0(t,e,n,r,i){const o=iC(t.tagName,n.props&&n.props.type)[i];o&&o(t,e,n,r)}function AO(){ui.getSSRProps=({value:t})=>({value:t}),b_.getSSRProps=({value:t},e)=>{if(e.props&&pd(e.props.value,t))return{checked:!0}},Ul.getSSRProps=({value:t},e)=>{if(Jn(t)){if(e.props&&oy(t,e.props.value)>-1)return{checked:!0}}else if(pf(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},__.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=iC(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const TO=["ctrl","shift","alt","meta"],DO={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>TO.some(n=>t[`${n}Key`]&&!e.includes(n))},xl=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=DO[e[o]];if(a&&a(i,e))return}return t(i,...s)})},IO={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},OO=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=Gl(i.key);if(e.some(o=>o===s||IO[o]===s))return t(i)})},sC=ts({patchProp:mO},QI);let Tg,e4=!1;function oC(){return Tg||(Tg=wS(sC))}function aC(){return Tg=e4?Tg:xS(sC),e4=!0,Tg}const lC=(...t)=>{oC().render(...t)},NO=(...t)=>{aC().hydrate(...t)},kv=(...t)=>{const e=oC().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=hC(r);if(!i)return;const s=e._component;!Lr(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,cC(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e},uC=(...t)=>{const e=aC().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=hC(r);if(i)return n(i,!0,cC(i))},e};function cC(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function hC(t){return hs(t)?document.querySelector(t):t}let t4=!1;const BO=()=>{t4||(t4=!0,AO(),iO())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const RO=()=>{},FO=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:ZL,BaseTransitionPropsValidators:a_,Comment:Ro,DeprecationTypes:ZI,EffectScope:Yb,ErrorCodes:c8,ErrorTypeStrings:VI,Fragment:_n,KeepAlive:N8,ReactiveEffect:Yg,Static:tf,Suspense:CI,Teleport:Zf,Text:dd,TrackOpTypes:r8,Transition:z2,TransitionGroup:SO,TriggerOpTypes:i8,VueElement:_y,assertNumber:u8,callWithAsyncErrorHandling:Vu,callWithErrorHandling:kp,camelize:La,capitalize:bm,cloneVNode:Zc,compatUtils:KI,compile:RO,computed:qn,createApp:kv,createBlock:xo,createCommentVNode:Wt,createElementBlock:Ne,createElementVNode:C,createHydrationRenderer:xS,createPropsRestProxy:eI,createRenderer:wS,createSSRApp:uC,createSlots:j8,createStaticVNode:wl,createTextVNode:Ir,createVNode:Xr,customRef:BL,defineAsyncComponent:I8,defineComponent:_s,defineCustomElement:QS,defineEmits:H8,defineExpose:G8,defineModel:Y8,defineOptions:W8,defineProps:V8,defineSSRCustomElement:yO,defineSlots:q8,devtools:HI,effect:ED,effectScope:Kb,getCurrentInstance:Gu,getCurrentScope:Zb,getCurrentWatcher:s8,getTransitionRawChildren:py,guardReactiveProps:RS,h:by,handleError:gf,hasInjectionContext:hS,hydrate:NO,hydrateOnIdle:M8,hydrateOnInteraction:T8,hydrateOnMediaQuery:A8,hydrateOnVisible:k8,initCustomFormatter:zI,initDirectivesForSSR:BO,inject:bu,isMemoSame:HS,isProxy:hy,isReactive:Wc,isReadonly:gd,isRef:Zs,isRuntimeOnly:RI,isShallow:yu,isVNode:Th,markRaw:dy,mergeDefaults:J8,mergeModels:Q8,mergeProps:FS,nextTick:_l,normalizeClass:xi,normalizeProps:wD,normalizeStyle:Yl,onActivated:JL,onBeforeMount:tS,onBeforeUnmount:Ld,onBeforeUpdate:u_,onDeactivated:QL,onErrorCaptured:sS,onMounted:Ds,onRenderTracked:iS,onRenderTriggered:rS,onScopeDispose:bL,onServerPrefetch:nS,onUnmounted:$u,onUpdated:my,onWatcherCleanup:FL,openBlock:De,popScopeId:g8,provide:kg,proxyRefs:r_,pushScopeId:p8,queuePostFlushCb:Xg,reactive:wu,readonly:t_,ref:_t,registerRuntimeCompiler:BI,render:lC,renderList:Wn,renderSlot:z8,resolveComponent:h_,resolveDirective:F8,resolveDynamicComponent:aS,resolveFilter:YI,resolveTransitionHooks:gp,setBlockTracking:I2,setDevtoolsHook:GI,setTransitionHooks:Ah,shallowReactive:e_,shallowReadonly:WD,shallowRef:n_,ssrContextKey:ES,ssrUtils:qI,stop:MD,toDisplayString:Tt,toHandlerKey:Sg,toHandlers:$8,toRaw:mi,toRef:e8,toRefs:i_,toValue:KD,transformVNodeArgs:TI,triggerRef:YD,unref:bn,useAttrs:X8,useCssModule:wO,useCssVars:sO,useHost:eC,useId:b8,useModel:yI,useSSRContext:MS,useShadowRoot:_O,useSlots:Z8,useTemplateRef:_8,useTransitionState:o_,vModelCheckbox:Ul,vModelDynamic:__,vModelRadio:b_,vModelSelect:Mi,vModelText:ui,vShow:y_,version:GS,warn:UI,watch:ni,watchEffect:nm,watchPostEffect:mI,watchSyncEffect:PS,withAsyncContext:tI,withCtx:Wl,withDefaults:K8,withDirectives:On,withKeys:OO,withMemo:$I,withModifiers:xl,withScopeId:m8},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let dC;const wy=t=>dC=t,fC=Symbol();function V2(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Dg;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Dg||(Dg={}));function jO(){const t=Kb(!0),e=t.run(()=>_t({}));let n=[],r=[];const i=dy({install(s){wy(i),i._a=s,s.provide(fC,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const pC=()=>{};function n4(t,e,n,r=pC){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&Zb()&&bL(i),i}function Ff(t,...e){t.slice().forEach(n=>{n(...e)})}const zO=t=>t(),r4=Symbol(),P1=Symbol();function H2(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];V2(i)&&V2(r)&&t.hasOwnProperty(n)&&!Zs(r)&&!Wc(r)?t[n]=H2(i,r):t[n]=r}return t}const $O=Symbol();function UO(t){return!V2(t)||!t.hasOwnProperty($O)}const{assign:Xh}=Object;function VO(t){return!!(Zs(t)&&t.effect)}function HO(t,e,n,r){const{state:i,actions:s,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=i?i():{});const d=i_(n.state.value[t]);return Xh(d,s,Object.keys(o||{}).reduce((p,v)=>(p[v]=dy(qn(()=>{wy(n);const m=n._s.get(t);return o[v].call(m,m)})),p),{}))}return l=gC(t,c,e,n,r,!0),l}function gC(t,e,n={},r,i,s){let o;const a=Xh({actions:{}},n),l={deep:!0};let c,d,p=[],v=[],m;const x=r.state.value[t];!s&&!x&&(r.state.value[t]={}),_t({});let E;function T(O){let U;c=d=!1,typeof O=="function"?(O(r.state.value[t]),U={type:Dg.patchFunction,storeId:t,events:m}):(H2(r.state.value[t],O),U={type:Dg.patchObject,payload:O,storeId:t,events:m});const q=E=Symbol();_l().then(()=>{E===q&&(c=!0)}),d=!0,Ff(p,U,r.state.value[t])}const D=s?function(){const{state:U}=n,q=U?U():{};this.$patch(R=>{Xh(R,q)})}:pC;function k(){o.stop(),p=[],v=[],r._s.delete(t)}const B=(O,U="")=>{if(r4 in O)return O[P1]=U,O;const q=function(){wy(r);const R=Array.from(arguments),$=[],X=[];function K(J){$.push(J)}function F(J){X.push(J)}Ff(v,{args:R,name:q[P1],store:Q,after:K,onError:F});let N;try{N=O.apply(this&&this.$id===t?this:Q,R)}catch(J){throw Ff(X,J),J}return N instanceof Promise?N.then(J=>(Ff($,J),J)).catch(J=>(Ff(X,J),Promise.reject(J))):(Ff($,N),N)};return q[r4]=!0,q[P1]=U,q},W={_p:r,$id:t,$onAction:n4.bind(null,v),$patch:T,$reset:D,$subscribe(O,U={}){const q=n4(p,O,U.detached,()=>R()),R=o.run(()=>ni(()=>r.state.value[t],$=>{(U.flush==="sync"?d:c)&&O({storeId:t,type:Dg.direct,events:m},$)},Xh({},l,U)));return q},$dispose:k},Q=wu(W);r._s.set(t,Q);const fe=(r._a&&r._a.runWithContext||zO)(()=>r._e.run(()=>(o=Kb()).run(()=>e({action:B}))));for(const O in fe){const U=fe[O];if(Zs(U)&&!VO(U)||Wc(U))s||(x&&UO(U)&&(Zs(U)?U.value=x[O]:H2(U,x[O])),r.state.value[t][O]=U);else if(typeof U=="function"){const q=B(U,O);fe[O]=q,a.actions[O]=U}}return Xh(Q,fe),Xh(mi(Q),fe),Object.defineProperty(Q,"$state",{get:()=>r.state.value[t],set:O=>{T(U=>{Xh(U,O)})}}),r._p.forEach(O=>{Xh(Q,o.run(()=>O({store:Q,app:r._a,pinia:r,options:a})))}),x&&s&&n.hydrate&&n.hydrate(Q.$state,x),c=!0,d=!0,Q}/*! #__NO_SIDE_EFFECTS__ */function Ap(t,e,n){let r,i;const s=typeof e=="function";typeof t=="string"?(r=t,i=s?n:e):(i=t,r=t.id);function o(a,l){const c=hS();return a=a||(c?bu(fC,null):null),a&&wy(a),a=dC,a._s.has(r)||(s?gC(r,e,i,a):HO(r,i,a)),a._s.get(r)}return o.$id=r,o}function mC(t,e){return function(){return t.apply(e,arguments)}}const{toString:GO}=Object.prototype,{getPrototypeOf:w_}=Object,xy=(t=>e=>{const n=GO.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),_c=t=>(t=t.toLowerCase(),e=>xy(e)===t),Ly=t=>e=>typeof e===t,{isArray:Tp}=Array,im=Ly("undefined");function WO(t){return t!==null&&!im(t)&&t.constructor!==null&&!im(t.constructor)&&_u(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const vC=_c("ArrayBuffer");function qO(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&vC(t.buffer),e}const YO=Ly("string"),_u=Ly("function"),yC=Ly("number"),Sy=t=>t!==null&&typeof t=="object",KO=t=>t===!0||t===!1,H0=t=>{if(xy(t)!=="object")return!1;const e=w_(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ZO=_c("Date"),XO=_c("File"),JO=_c("Blob"),QO=_c("FileList"),eN=t=>Sy(t)&&_u(t.pipe),tN=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||_u(t.append)&&((e=xy(t))==="formdata"||e==="object"&&_u(t.toString)&&t.toString()==="[object FormData]"))},nN=_c("URLSearchParams"),[rN,iN,sN,oN]=["ReadableStream","Request","Response","Headers"].map(_c),aN=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Lm(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Tp(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function bC(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Xd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_C=t=>!im(t)&&t!==Xd;function G2(){const{caseless:t}=_C(this)&&this||{},e={},n=(r,i)=>{const s=t&&bC(e,i)||i;H0(e[s])&&H0(r)?e[s]=G2(e[s],r):H0(r)?e[s]=G2({},r):Tp(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Lm(arguments[r],n);return e}const lN=(t,e,n,{allOwnKeys:r}={})=>(Lm(e,(i,s)=>{n&&_u(i)?t[s]=mC(i,n):t[s]=i},{allOwnKeys:r}),t),uN=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),cN=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},hN=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&w_(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},dN=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},fN=t=>{if(!t)return null;if(Tp(t))return t;let e=t.length;if(!yC(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},pN=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&w_(Uint8Array)),gN=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},mN=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},vN=_c("HTMLFormElement"),yN=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),i4=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),bN=_c("RegExp"),wC=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Lm(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},_N=t=>{wC(t,(e,n)=>{if(_u(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(_u(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},wN=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Tp(t)?r(t):r(String(t).split(e)),n},xN=()=>{},LN=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function SN(t){return!!(t&&_u(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const CN=t=>{const e=new Array(10),n=(r,i)=>{if(Sy(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Tp(r)?[]:{};return Lm(r,(o,a)=>{const l=n(o,i+1);!im(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},EN=_c("AsyncFunction"),MN=t=>t&&(Sy(t)||_u(t))&&_u(t.then)&&_u(t.catch),xC=((t,e)=>t?setImmediate:e?((n,r)=>(Xd.addEventListener("message",({source:i,data:s})=>{i===Xd&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Xd.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",_u(Xd.postMessage)),PN=typeof queueMicrotask<"u"?queueMicrotask.bind(Xd):typeof process<"u"&&process.nextTick||xC,Yt={isArray:Tp,isArrayBuffer:vC,isBuffer:WO,isFormData:tN,isArrayBufferView:qO,isString:YO,isNumber:yC,isBoolean:KO,isObject:Sy,isPlainObject:H0,isReadableStream:rN,isRequest:iN,isResponse:sN,isHeaders:oN,isUndefined:im,isDate:ZO,isFile:XO,isBlob:JO,isRegExp:bN,isFunction:_u,isStream:eN,isURLSearchParams:nN,isTypedArray:pN,isFileList:QO,forEach:Lm,merge:G2,extend:lN,trim:aN,stripBOM:uN,inherits:cN,toFlatObject:hN,kindOf:xy,kindOfTest:_c,endsWith:dN,toArray:fN,forEachEntry:gN,matchAll:mN,isHTMLForm:vN,hasOwnProperty:i4,hasOwnProp:i4,reduceDescriptors:wC,freezeMethods:_N,toObjectSet:wN,toCamelCase:yN,noop:xN,toFiniteNumber:LN,findKey:bC,global:Xd,isContextDefined:_C,isSpecCompliantForm:SN,toJSONObject:CN,isAsyncFn:EN,isThenable:MN,setImmediate:xC,asap:PN};function Hr(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Yt.inherits(Hr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Yt.toJSONObject(this.config),code:this.code,status:this.status}}});const LC=Hr.prototype,SC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{SC[t]={value:t}});Object.defineProperties(Hr,SC);Object.defineProperty(LC,"isAxiosError",{value:!0});Hr.from=(t,e,n,r,i,s)=>{const o=Object.create(LC);return Yt.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Hr.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const kN=null;function W2(t){return Yt.isPlainObject(t)||Yt.isArray(t)}function CC(t){return Yt.endsWith(t,"[]")?t.slice(0,-2):t}function s4(t,e,n){return t?t.concat(e).map(function(i,s){return i=CC(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function AN(t){return Yt.isArray(t)&&!t.some(W2)}const TN=Yt.toFlatObject(Yt,{},null,function(e){return/^is[A-Z]/.test(e)});function Cy(t,e,n){if(!Yt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Yt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,T){return!Yt.isUndefined(T[E])});const r=n.metaTokens,i=n.visitor||d,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Yt.isSpecCompliantForm(e);if(!Yt.isFunction(i))throw new TypeError("visitor must be a function");function c(x){if(x===null)return"";if(Yt.isDate(x))return x.toISOString();if(!l&&Yt.isBlob(x))throw new Hr("Blob is not supported. Use a Buffer instead.");return Yt.isArrayBuffer(x)||Yt.isTypedArray(x)?l&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function d(x,E,T){let D=x;if(x&&!T&&typeof x=="object"){if(Yt.endsWith(E,"{}"))E=r?E:E.slice(0,-2),x=JSON.stringify(x);else if(Yt.isArray(x)&&AN(x)||(Yt.isFileList(x)||Yt.endsWith(E,"[]"))&&(D=Yt.toArray(x)))return E=CC(E),D.forEach(function(B,W){!(Yt.isUndefined(B)||B===null)&&e.append(o===!0?s4([E],W,s):o===null?E:E+"[]",c(B))}),!1}return W2(x)?!0:(e.append(s4(T,E,s),c(x)),!1)}const p=[],v=Object.assign(TN,{defaultVisitor:d,convertValue:c,isVisitable:W2});function m(x,E){if(!Yt.isUndefined(x)){if(p.indexOf(x)!==-1)throw Error("Circular reference detected in "+E.join("."));p.push(x),Yt.forEach(x,function(D,k){(!(Yt.isUndefined(D)||D===null)&&i.call(e,D,Yt.isString(k)?k.trim():k,E,v))===!0&&m(D,E?E.concat(k):[k])}),p.pop()}}if(!Yt.isObject(t))throw new TypeError("data must be an object");return m(t),e}function o4(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function x_(t,e){this._pairs=[],t&&Cy(t,this,e)}const EC=x_.prototype;EC.append=function(e,n){this._pairs.push([e,n])};EC.toString=function(e){const n=e?function(r){return e.call(this,r,o4)}:o4;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function DN(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function MC(t,e,n){if(!e)return t;const r=n&&n.encode||DN;Yt.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Yt.isURLSearchParams(e)?e.toString():new x_(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class a4{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Yt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const PC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},IN=typeof URLSearchParams<"u"?URLSearchParams:x_,ON=typeof FormData<"u"?FormData:null,NN=typeof Blob<"u"?Blob:null,BN={isBrowser:!0,classes:{URLSearchParams:IN,FormData:ON,Blob:NN},protocols:["http","https","file","blob","url","data"]},L_=typeof window<"u"&&typeof document<"u",q2=typeof navigator=="object"&&navigator||void 0,RN=L_&&(!q2||["ReactNative","NativeScript","NS"].indexOf(q2.product)<0),FN=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",jN=L_&&window.location.href||"http://localhost",zN=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:L_,hasStandardBrowserEnv:RN,hasStandardBrowserWebWorkerEnv:FN,navigator:q2,origin:jN},Symbol.toStringTag,{value:"Module"})),qa={...zN,...BN};function $N(t,e){return Cy(t,new qa.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return qa.isNode&&Yt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function UN(t){return Yt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function VN(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function kC(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&Yt.isArray(i)?i.length:o,l?(Yt.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Yt.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Yt.isArray(i[o])&&(i[o]=VN(i[o])),!a)}if(Yt.isFormData(t)&&Yt.isFunction(t.entries)){const n={};return Yt.forEachEntry(t,(r,i)=>{e(UN(r),i,n,0)}),n}return null}function HN(t,e,n){if(Yt.isString(t))try{return(e||JSON.parse)(t),Yt.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Sm={transitional:PC,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Yt.isObject(e);if(s&&Yt.isHTMLForm(e)&&(e=new FormData(e)),Yt.isFormData(e))return i?JSON.stringify(kC(e)):e;if(Yt.isArrayBuffer(e)||Yt.isBuffer(e)||Yt.isStream(e)||Yt.isFile(e)||Yt.isBlob(e)||Yt.isReadableStream(e))return e;if(Yt.isArrayBufferView(e))return e.buffer;if(Yt.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return $N(e,this.formSerializer).toString();if((a=Yt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Cy(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),HN(e)):e}],transformResponse:[function(e){const n=this.transitional||Sm.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Yt.isResponse(e)||Yt.isReadableStream(e))return e;if(e&&Yt.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Hr.from(a,Hr.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qa.classes.FormData,Blob:qa.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Yt.forEach(["delete","get","head","post","put","patch"],t=>{Sm.headers[t]={}});const GN=Yt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),WN=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&GN[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},l4=Symbol("internals");function Hp(t){return t&&String(t).trim().toLowerCase()}function G0(t){return t===!1||t==null?t:Yt.isArray(t)?t.map(G0):String(t)}function qN(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const YN=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function k1(t,e,n,r,i){if(Yt.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Yt.isString(e)){if(Yt.isString(r))return e.indexOf(r)!==-1;if(Yt.isRegExp(r))return r.test(e)}}function KN(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function ZN(t,e){const n=Yt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let Kl=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const d=Hp(l);if(!d)throw new Error("header name must be a non-empty string");const p=Yt.findKey(i,d);(!p||i[p]===void 0||c===!0||c===void 0&&i[p]!==!1)&&(i[p||l]=G0(a))}const o=(a,l)=>Yt.forEach(a,(c,d)=>s(c,d,l));if(Yt.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Yt.isString(e)&&(e=e.trim())&&!YN(e))o(WN(e),n);else if(Yt.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=Hp(e),e){const r=Yt.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return qN(i);if(Yt.isFunction(n))return n.call(this,i,r);if(Yt.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Hp(e),e){const r=Yt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||k1(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Hp(o),o){const a=Yt.findKey(r,o);a&&(!n||k1(r,r[a],a,n))&&(delete r[a],i=!0)}}return Yt.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||k1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Yt.forEach(this,(i,s)=>{const o=Yt.findKey(r,s);if(o){n[o]=G0(i),delete n[s];return}const a=e?KN(s):String(s).trim();a!==s&&delete n[s],n[a]=G0(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Yt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Yt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[l4]=this[l4]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Hp(o);r[a]||(ZN(i,o),r[a]=!0)}return Yt.isArray(e)?e.forEach(s):s(e),this}};Kl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Yt.reduceDescriptors(Kl.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Yt.freezeMethods(Kl);function A1(t,e){const n=this||Sm,r=e||n,i=Kl.from(r.headers);let s=r.data;return Yt.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function AC(t){return!!(t&&t.__CANCEL__)}function Dp(t,e,n){Hr.call(this,t??"canceled",Hr.ERR_CANCELED,e,n),this.name="CanceledError"}Yt.inherits(Dp,Hr,{__CANCEL__:!0});function TC(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Hr("Request failed with status code "+n.status,[Hr.ERR_BAD_REQUEST,Hr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function XN(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function JN(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[s];o||(o=c),n[i]=l,r[i]=c;let p=s,v=0;for(;p!==i;)v+=n[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const m=d&&c-d;return m?Math.round(v*1e3/m):void 0}}function QN(t,e){let n=0,r=1e3/e,i,s;const o=(c,d=Date.now())=>{n=d,i=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const d=Date.now(),p=d-n;p>=r?o(c,d):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-p)))},()=>i&&o(i)]}const Av=(t,e,n=3)=>{let r=0;const i=JN(50,250);return QN(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),d=o<=a;r=o;const p={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&d?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(p)},n)},u4=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},c4=t=>(...e)=>Yt.asap(()=>t(...e)),e7=qa.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,qa.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(qa.origin),qa.navigator&&/(msie|trident)/i.test(qa.navigator.userAgent)):()=>!0,t7=qa.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Yt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Yt.isString(r)&&o.push("path="+r),Yt.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function n7(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function r7(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function DC(t,e,n){let r=!n7(e);return t&&(r||n==!1)?r7(t,e):e}const h4=t=>t instanceof Kl?{...t}:t;function cf(t,e){e=e||{};const n={};function r(c,d,p,v){return Yt.isPlainObject(c)&&Yt.isPlainObject(d)?Yt.merge.call({caseless:v},c,d):Yt.isPlainObject(d)?Yt.merge({},d):Yt.isArray(d)?d.slice():d}function i(c,d,p,v){if(Yt.isUndefined(d)){if(!Yt.isUndefined(c))return r(void 0,c,p,v)}else return r(c,d,p,v)}function s(c,d){if(!Yt.isUndefined(d))return r(void 0,d)}function o(c,d){if(Yt.isUndefined(d)){if(!Yt.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,p){if(p in e)return r(c,d);if(p in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d,p)=>i(h4(c),h4(d),p,!0)};return Yt.forEach(Object.keys(Object.assign({},t,e)),function(d){const p=l[d]||i,v=p(t[d],e[d],d);Yt.isUndefined(v)&&p!==a||(n[d]=v)}),n}const IC=t=>{const e=cf({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=Kl.from(o),e.url=MC(DC(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Yt.isFormData(n)){if(qa.hasStandardBrowserEnv||qa.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...d]=l?l.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...d].join("; "))}}if(qa.hasStandardBrowserEnv&&(r&&Yt.isFunction(r)&&(r=r(e)),r||r!==!1&&e7(e.url))){const c=i&&s&&t7.read(s);c&&o.set(i,c)}return e},i7=typeof XMLHttpRequest<"u",s7=i7&&function(t){return new Promise(function(n,r){const i=IC(t);let s=i.data;const o=Kl.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,d,p,v,m,x;function E(){m&&m(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let T=new XMLHttpRequest;T.open(i.method.toUpperCase(),i.url,!0),T.timeout=i.timeout;function D(){if(!T)return;const B=Kl.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),Q={data:!a||a==="text"||a==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:B,config:t,request:T};TC(function(fe){n(fe),E()},function(fe){r(fe),E()},Q),T=null}"onloadend"in T?T.onloadend=D:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(D)},T.onabort=function(){T&&(r(new Hr("Request aborted",Hr.ECONNABORTED,t,T)),T=null)},T.onerror=function(){r(new Hr("Network Error",Hr.ERR_NETWORK,t,T)),T=null},T.ontimeout=function(){let W=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const Q=i.transitional||PC;i.timeoutErrorMessage&&(W=i.timeoutErrorMessage),r(new Hr(W,Q.clarifyTimeoutError?Hr.ETIMEDOUT:Hr.ECONNABORTED,t,T)),T=null},s===void 0&&o.setContentType(null),"setRequestHeader"in T&&Yt.forEach(o.toJSON(),function(W,Q){T.setRequestHeader(Q,W)}),Yt.isUndefined(i.withCredentials)||(T.withCredentials=!!i.withCredentials),a&&a!=="json"&&(T.responseType=i.responseType),c&&([v,x]=Av(c,!0),T.addEventListener("progress",v)),l&&T.upload&&([p,m]=Av(l),T.upload.addEventListener("progress",p),T.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(d=B=>{T&&(r(!B||B.type?new Dp(null,t,T):B),T.abort(),T=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const k=XN(i.url);if(k&&qa.protocols.indexOf(k)===-1){r(new Hr("Unsupported protocol "+k+":",Hr.ERR_BAD_REQUEST,t));return}T.send(s||null)})},o7=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const d=c instanceof Error?c:this.reason;r.abort(d instanceof Hr?d:new Dp(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new Hr(`timeout ${e} of ms exceeded`,Hr.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>Yt.asap(a),l}},a7=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},l7=async function*(t,e){for await(const n of u7(t))yield*a7(n,e)},u7=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},d4=(t,e,n,r)=>{const i=l7(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await i.next();if(c){a(),l.close();return}let p=d.byteLength;if(n){let v=s+=p;n(v)}l.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},Ey=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",OC=Ey&&typeof ReadableStream=="function",c7=Ey&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),NC=(t,...e)=>{try{return!!t(...e)}catch{return!1}},h7=OC&&NC(()=>{let t=!1;const e=new Request(qa.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),f4=64*1024,Y2=OC&&NC(()=>Yt.isReadableStream(new Response("").body)),Tv={stream:Y2&&(t=>t.body)};Ey&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Tv[e]&&(Tv[e]=Yt.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Hr(`Response type '${e}' is not supported`,Hr.ERR_NOT_SUPPORT,r)})})})(new Response);const d7=async t=>{if(t==null)return 0;if(Yt.isBlob(t))return t.size;if(Yt.isSpecCompliantForm(t))return(await new Request(qa.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Yt.isArrayBufferView(t)||Yt.isArrayBuffer(t))return t.byteLength;if(Yt.isURLSearchParams(t)&&(t=t+""),Yt.isString(t))return(await c7(t)).byteLength},f7=async(t,e)=>{const n=Yt.toFiniteNumber(t.getContentLength());return n??d7(e)},p7=Ey&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:d,withCredentials:p="same-origin",fetchOptions:v}=IC(t);c=c?(c+"").toLowerCase():"text";let m=o7([i,s&&s.toAbortSignal()],o),x;const E=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let T;try{if(l&&h7&&n!=="get"&&n!=="head"&&(T=await f7(d,r))!==0){let Q=new Request(e,{method:"POST",body:r,duplex:"half"}),pe;if(Yt.isFormData(r)&&(pe=Q.headers.get("content-type"))&&d.setContentType(pe),Q.body){const[fe,O]=u4(T,Av(c4(l)));r=d4(Q.body,f4,fe,O)}}Yt.isString(p)||(p=p?"include":"omit");const D="credentials"in Request.prototype;x=new Request(e,{...v,signal:m,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:D?p:void 0});let k=await fetch(x);const B=Y2&&(c==="stream"||c==="response");if(Y2&&(a||B&&E)){const Q={};["status","statusText","headers"].forEach(U=>{Q[U]=k[U]});const pe=Yt.toFiniteNumber(k.headers.get("content-length")),[fe,O]=a&&u4(pe,Av(c4(a),!0))||[];k=new Response(d4(k.body,f4,fe,()=>{O&&O(),E&&E()}),Q)}c=c||"text";let W=await Tv[Yt.findKey(Tv,c)||"text"](k,t);return!B&&E&&E(),await new Promise((Q,pe)=>{TC(Q,pe,{data:W,headers:Kl.from(k.headers),status:k.status,statusText:k.statusText,config:t,request:x})})}catch(D){throw E&&E(),D&&D.name==="TypeError"&&/fetch/i.test(D.message)?Object.assign(new Hr("Network Error",Hr.ERR_NETWORK,t,x),{cause:D.cause||D}):Hr.from(D,D&&D.code,t,x)}}),K2={http:kN,xhr:s7,fetch:p7};Yt.forEach(K2,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const p4=t=>`- ${t}`,g7=t=>Yt.isFunction(t)||t===null||t===!1,BC={getAdapter:t=>{t=Yt.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!g7(n)&&(r=K2[(o=String(n)).toLowerCase()],r===void 0))throw new Hr(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(p4).join(`
`):" "+p4(s[0]):"as no adapter specified";throw new Hr("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:K2};function T1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Dp(null,t)}function g4(t){return T1(t),t.headers=Kl.from(t.headers),t.data=A1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),BC.getAdapter(t.adapter||Sm.adapter)(t).then(function(r){return T1(t),r.data=A1.call(t,t.transformResponse,r),r.headers=Kl.from(r.headers),r},function(r){return AC(r)||(T1(t),r&&r.response&&(r.response.data=A1.call(t,t.transformResponse,r.response),r.response.headers=Kl.from(r.response.headers))),Promise.reject(r)})}const RC="1.8.4",My={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{My[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const m4={};My.transitional=function(e,n,r){function i(s,o){return"[Axios v"+RC+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new Hr(i(o," has been removed"+(n?" in "+n:"")),Hr.ERR_DEPRECATED);return n&&!m4[o]&&(m4[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};My.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function m7(t,e,n){if(typeof t!="object")throw new Hr("options must be an object",Hr.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new Hr("option "+s+" must be "+l,Hr.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Hr("Unknown option "+s,Hr.ERR_BAD_OPTION)}}const W0={assertOptions:m7,validators:My},Dc=W0.validators;let nf=class{constructor(e){this.defaults=e,this.interceptors={request:new a4,response:new a4}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=cf(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&W0.assertOptions(r,{silentJSONParsing:Dc.transitional(Dc.boolean),forcedJSONParsing:Dc.transitional(Dc.boolean),clarifyTimeoutError:Dc.transitional(Dc.boolean)},!1),i!=null&&(Yt.isFunction(i)?n.paramsSerializer={serialize:i}:W0.assertOptions(i,{encode:Dc.function,serialize:Dc.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),W0.assertOptions(n,{baseUrl:Dc.spelling("baseURL"),withXsrfToken:Dc.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Yt.merge(s.common,s[n.method]);s&&Yt.forEach(["delete","get","head","post","put","patch","common"],x=>{delete s[x]}),n.headers=Kl.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(l=l&&E.synchronous,a.unshift(E.fulfilled,E.rejected))});const c=[];this.interceptors.response.forEach(function(E){c.push(E.fulfilled,E.rejected)});let d,p=0,v;if(!l){const x=[g4.bind(this),void 0];for(x.unshift.apply(x,a),x.push.apply(x,c),v=x.length,d=Promise.resolve(n);p<v;)d=d.then(x[p++],x[p++]);return d}v=a.length;let m=n;for(p=0;p<v;){const x=a[p++],E=a[p++];try{m=x(m)}catch(T){E.call(this,T);break}}try{d=g4.call(this,m)}catch(x){return Promise.reject(x)}for(p=0,v=c.length;p<v;)d=d.then(c[p++],c[p++]);return d}getUri(e){e=cf(this.defaults,e);const n=DC(e.baseURL,e.url,e.allowAbsoluteUrls);return MC(n,e.params,e.paramsSerializer)}};Yt.forEach(["delete","get","head","options"],function(e){nf.prototype[e]=function(n,r){return this.request(cf(r||{},{method:e,url:n,data:(r||{}).data}))}});Yt.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(cf(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}nf.prototype[e]=n(),nf.prototype[e+"Form"]=n(!0)});let v7=class FC{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new Dp(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new FC(function(i){e=i}),cancel:e}}};function y7(t){return function(n){return t.apply(null,n)}}function b7(t){return Yt.isObject(t)&&t.isAxiosError===!0}const Z2={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Z2).forEach(([t,e])=>{Z2[e]=t});function jC(t){const e=new nf(t),n=mC(nf.prototype.request,e);return Yt.extend(n,nf.prototype,e,{allOwnKeys:!0}),Yt.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return jC(cf(t,i))},n}const ko=jC(Sm);ko.Axios=nf;ko.CanceledError=Dp;ko.CancelToken=v7;ko.isCancel=AC;ko.VERSION=RC;ko.toFormData=Cy;ko.AxiosError=Hr;ko.Cancel=ko.CanceledError;ko.all=function(e){return Promise.all(e)};ko.spread=y7;ko.isAxiosError=b7;ko.mergeConfig=cf;ko.AxiosHeaders=Kl;ko.formToJSON=t=>kC(Yt.isHTMLForm(t)?new FormData(t):t);ko.getAdapter=BC.getAdapter;ko.HttpStatusCode=Z2;ko.default=ko;const{Axios:Gse,AxiosError:Wse,CanceledError:qse,isCancel:Yse,CancelToken:Kse,VERSION:Zse,all:Xse,Cancel:Jse,isAxiosError:Qse,spread:eoe,toFormData:toe,AxiosHeaders:noe,HttpStatusCode:roe,formToJSON:ioe,getAdapter:soe,mergeConfig:ooe}=ko,Pn=ko.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0});function zC(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Pn.interceptors.request.use(async t=>{try{const e=zC("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),console.log("Request config:",{url:t.url,method:t.method,headers:t.headers,withCredentials:t.withCredentials}),t}catch(e){return console.error("Error in request interceptor:",e),t}},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));Pn.interceptors.response.use(t=>t,async t=>{var n,r;const e=t.config;try{if(((n=t.response)==null?void 0:n.status)===401&&!e._retry&&!((r=e.url)!=null&&r.includes("/token/refresh/"))){e._retry=!0;const i=co();try{await i.refreshToken();const s=zC("access_token");if(s)return e.headers.Authorization=`Bearer ${s}`,Pn(e)}catch(s){return await i.logout(),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(s)}}return Promise.reject(t)}catch(i){return console.error("Error in response interceptor:",i),Promise.reject(i)}});function _7(t){var n;const e=[];if((n=t.response)!=null&&n.data){const r=t.response.data;typeof r=="object"&&!Array.isArray(r)?Object.entries(r).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>{e.push({field:i,message:o})}):typeof s=="string"&&e.push({field:i,message:s})}):typeof r=="string"?e.push({field:"non_field_error",message:r}):r.detail&&e.push({field:"non_field_error",message:r.detail})}else t.message&&e.push({field:"non_field_error",message:`Erreur de connexion: ${t.message}`});return e.length===0&&e.push({field:"non_field_error",message:"Une erreur inconnue s'est produite"}),e}async function q0(t){console.log("[fetchUsersByHierarchy] Récupération des utilisateurs:",t);const e={role:t.role};t.entrepriseId&&(e.entreprise=t.entrepriseId),t.salarieId&&(e.salarie=t.salarieId),t.includeDetails&&(e.include_plans=!0),t.search&&(e.search=t.search),console.log("[fetchUsersByHierarchy] Filtres appliqués:",e);try{const n=await xa.getUsers(e);return console.log(`[fetchUsersByHierarchy] Résultat (${n.data.length} utilisateurs):`,n.data),n.data}catch(n){throw console.error("[fetchUsersByHierarchy] Erreur lors de la récupération des utilisateurs:",n),n}}const xa={async getUsers(t={}){try{return await Pn.get("/users/",{params:t})}catch(e){throw console.error("Error getting users:",e),e}},async getUser(t){return await Pn.get(`/users/${t}/`)},async createUser(t){return await Pn.post("/users/",t)},async updateUser(t,e){return await Pn.patch(`/users/${t}/`,e)},async deleteUser(t){return await Pn.delete(`/users/${t}/`)},async getEntreprises(){return await Pn.get("/users/",{params:{role:"ENTREPRISE"}})},async getSalaries(t){const e={role:"SALARIE"};return t&&(e.entreprise=t),await Pn.get("/users/",{params:e})},async getSalarieVisiteurs(t){return await Pn.get("/users/",{params:{role:"VISITEUR",salarie:t}})},async getEntrepriseVisiteurs(t){return await Pn.get("/users/",{params:{role:"VISITEUR",entreprise:t}})},async getUsersByHierarchy(t){const e={role:t.role};return t.entrepriseId&&(e.entreprise=t.entrepriseId),t.salarieId&&(e.salarie=t.salarieId),t.includeDetails&&(e.include_plans=!0),t.search&&(e.search=t.search),await Pn.get("/users/",{params:e})},async getEntrepriseSalaries(t){return await Pn.get("/users/",{params:{role:"SALARIE",entreprise:t}})},async getVisiteurs(t,e){const n={role:"VISITEUR"};return t&&(n.salarie=t),e&&(n.entreprise=e),await Pn.get("/users/",{params:n})},async assignEntrepriseToSalarie(t,e){return await Pn.patch(`/users/${t}/`,{entreprise:e})},async assignSalarieToVisiteur(t,e){return await Pn.patch(`/users/${t}/`,{salarie:e})},formatLogoFileName(t){var i;const e=new Date().getTime(),n=((i=t.name.split(".").pop())==null?void 0:i.toLowerCase())||"";return`${t.name.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${e}.${n}`},async uploadLogo(t){try{const e=new FormData,n=this.formatLogoFileName(t),r=new File([t],n,{type:t.type});return e.append("logo",r),await Pn.post("/users/upload_logo/",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(e){throw console.error("Error uploading logo:",e),e}}};async function D1(t,e=3,n=1e3,r=1e4){let i=0;for(;;)try{return await t()}catch(s){if(i++,i>=e)throw s;const o=Math.min(n*Math.pow(2,i-1),r),a=Math.random()*200;console.log(`Tentative ${i}/${e} échouée, nouvelle tentative dans ${o+a}ms`),await new Promise(l=>setTimeout(l,o+a))}}const c0={async getPlans(){try{return await Pn.get("/plans/")}catch(t){throw console.error("Error getting plans:",t),t}},async createPlan(t){try{const e={...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null};return await Pn.post("/plans/",e)}catch(e){throw console.error("Error creating plan:",e),e}},async updatePlan(t,e){try{return await Pn.put(`/plans/${t}/`,e)}catch(n){throw console.error("Error updating plan:",n),n}},async deletePlan(t){try{return await Pn.delete(`/plans/${t}/`)}catch(e){throw console.error("Error deleting plan:",e),e}},async getVisiteurPlans(t){return await Pn.get("/plans/",{params:{visiteur:t}})},async createPlanForVisiteur(t){return await Pn.post("/plans/",t)},async getEntreprisePlans(t){return await Pn.get("/plans/",{params:{entreprise:t}})},async getSalariePlans(t){return await Pn.get("/plans/",{params:{salarie:t}})},async createPlanForSalarie(t,e){const n={...t,salarie:e};return await Pn.post("/plans/",n)},async createPlanForEntreprise(t,e){const n={...t,entreprise:e};return await Pn.post("/plans/",n)}},sa={async getNotes(t={}){try{return await Pn.get("/notes/",{params:t})}catch(e){throw console.error("Error getting notes:",e),e}},async getNotesByPlan(t){try{return await Pn.get("/notes/",{params:{plan:t}})}catch(e){throw console.error("Error getting notes for plan:",e),e}},async getNote(t){try{return await Pn.get(`/notes/${t}/`)}catch(e){throw console.error("Error getting note:",e),e}},async createNote(t){try{const e={...t};return e.location&&Object.keys(e.location).length===0&&delete e.location,await Pn.post("/notes/",e)}catch(e){throw console.error("Error creating note:",e),e}},async updateNote(t,e){console.log("[noteService][updateNote] Mise à jour de la note:",{noteId:t,noteData:e});try{const n=e.backendId||t,r={...e};r.location&&Object.keys(r.location).length===0&&delete r.location,e.column!==void 0?r.column=e.column:e.columnId!==void 0&&(r.column=e.columnId),delete r.columnId,delete r.column_id,delete r.column_details,delete r.backendId,delete r.leafletId;const i=r.enterprise_id;delete r.enterprise_name,console.log("[noteService][updateNote] Données formatées:",r),console.log(`[noteService][updateNote] Utilisation de l'ID backend ${n} pour la mise à jour`);const s=await Pn.patch(`/notes/${n}/`,r);return console.log("[noteService][updateNote] Réponse du serveur:",s.data),i!==void 0&&(s.data.enterprise_id=i),s}catch(n){throw console.error("[noteService][updateNote] Erreur lors de la mise à jour:",n),n}},async deleteNote(t){try{return await Pn.delete(`/notes/${t}/`)}catch(e){throw console.error("Error deleting note:",e),e}},async getComments(t){return await Pn.get(`/notes/${t}/comments/`)},async addComment(t,e){const n=typeof e=="string"?{text:e}:e;return console.log(`[noteService][addComment] Envoi du commentaire pour la note ${t}:`,n),await Pn.post(`/notes/${t}/comments/`,n)},async updateComment(t,e,n){return await Pn.patch(`/notes/${t}/comments/${e}/`,n)},async deleteComment(t,e){return await Pn.delete(`/notes/${t}/comments/${e}/`)},async getPhotos(t){return await Pn.get(`/notes/${t}/photos/`)},async addPhoto(t,e){return await Pn.post(`/notes/${t}/photos/`,e,{headers:{"Content-Type":"multipart/form-data"}})},async updatePhoto(t,e,n){return await Pn.patch(`/notes/${t}/photos/${e}/`,n)},async deletePhoto(t,e){return await Pn.delete(`/notes/${t}/photos/${e}/`)}},I1={async getDevices(t={}){try{return await D1(()=>Pn.get("/weather/devices/",{params:t}),3,1e3,1e4)}catch(e){throw console.error("Error getting weather devices:",e),e}},async getRealTimeData(t){try{const e=typeof t=="string"?{mac:t}:t;return await D1(()=>Pn.get("/weather/",{params:e}),3,1e3,1e4)}catch(e){throw console.error("Error getting real-time weather data:",e),e}},async getHistoryData(t){try{return await D1(()=>Pn.get("/weather/history/",{params:t}),3,1e3,1e4)}catch(e){throw console.error("Error getting weather history data:",e),e}}},h0={async getFilters(){try{return await Pn.get("/map-filters/")}catch(t){throw console.error("Error getting map filters:",t),t}},async getFilter(t){try{return await Pn.get(`/map-filters/${t}/`)}catch(e){throw console.error("Error getting map filter:",e),e}},async createFilter(t){try{return await Pn.post("/map-filters/",t)}catch(e){throw console.error("Error creating map filter:",e),e}},async updateFilter(t,e){try{return await Pn.patch(`/map-filters/${t}/`,e)}catch(n){throw console.error("Error updating map filter:",n),n}},async deleteFilter(t){try{return await Pn.delete(`/map-filters/${t}/`)}catch(e){throw console.error("Error deleting map filter:",e),e}}},X2={async getGoogleMapsApiKey(){try{return await Pn.get("/settings/get_google_maps_api_key/")}catch(t){throw console.error("Error getting Google Maps API key:",t),t}},async setGoogleMapsApiKey(t){try{return await Pn.post("/settings/set_google_maps_api_key/",{key:t})}catch(e){throw console.error("Error setting Google Maps API key:",e),e}}};Pn.defaults.baseURL="/api";Pn.defaults.headers.common["Content-Type"]="application/json";Pn.defaults.withCredentials=!0;function sm(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Pn.interceptors.request.use(t=>{const e=sm("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));Pn.interceptors.response.use(t=>t,async t=>{var r,i;const e=co(),n=t.config;if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;try{if(!sm("access_token"))throw new Error("No token available");await e.refreshToken();const o=sm("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,Pn(n)}catch(s){console.error("Token refresh failed:",s),await e.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(t)});function w7(t,e,n=1){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${t}=${e};${i};path=/;secure;samesite=Strict`}function bl(t){if(!t)return"-";const e=t.first_name||"",n=t.last_name?t.last_name.toUpperCase():"",r=`${e} ${n}`.trim(),i=t.company_name||t.role||"";return!r&&!i?"-":r?i?`${r} (${i})`:r:`(${i})`}function x7(t="",e=""){return`${(t==null?void 0:t.charAt(0))||""}${(e==null?void 0:e.charAt(0))||""}`.toUpperCase()}const L7={ADMIN:"Administrateur",ENTREPRISE:"Entreprise",SALARIE:"Salarie",VISITEUR:"Visiteur"};function S7(t){return L7[t]||t}function C7(){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function E7(t){return t?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}async function M7({role:t,entrepriseId:e,salarieId:n,includeDetails:r=!1}){const i={role:t};return e&&(i.entreprise=e),n&&(i.salarie=n),r&&(i.include_plans=!0),(await xa.getUsers(i)).data}const co=Ap("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,enterprises:[],employees:[],visitors:[]}),getters:{isAdmin:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="admin"},isEntreprise:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="entreprise"},isSalarie:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="salarie"},isVisiteur:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="visiteur"},currentUser:t=>t.user,hasEnterprise:t=>{var e;return!!((e=t.user)!=null&&e.enterprise_id)},hasEmployee:t=>{var e;return!!((e=t.user)!=null&&e.employee_id)}},actions:{async initialize(t){if(!t){const n=await this.restoreSession();return this.initialized=!0,n}if(t.isAuthenticated&&t.user)return this.user=t.user,this.isAuthenticated=!0,this.mustChangePassword=t.user.must_change_password||!1,this.initialized=!0,!0;const e=await this.restoreSession();return this.initialized=!0,e},async restoreSession(){try{if(!sm("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const e=await Pn.post("/token/refresh/");return e.data.user?(this.user=e.data.user,this.isAuthenticated=!0,this.mustChangePassword=e.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(t){return console.error("Failed to restore session:",t),this.isAuthenticated=!1,this.user=null,!1}},async login(t,e){var n,r,i;try{const s=await Pn.post("/token/",{username:t,password:e});if(!s.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${s.data.access}; path=/; secure; samesite=Strict`;const o=await this.fetchUserProfile();return this.user=o,this.isAuthenticated=!0,!0}catch(s){throw this.isAuthenticated=!1,this.user=null,((n=s.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(i=(r=s.response)==null?void 0:r.data)!=null&&i.detail?new Error(s.response.data.detail):s}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const t=await Pn.get("/users/me/");return this.user=t.data,this.isAuthenticated=!0,this.mustChangePassword=t.data.must_change_password||!1,t.data}catch(t){throw this.isAuthenticated=!1,this.user=null,t}},async changePassword(t,e){try{const n=await Pn.post("/users/change_password/",{old_password:t,password:e});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var t,e;try{if(!sm("refresh_token"))throw new Error("No refresh token available");const r=await Pn.post("/token/refresh/",{},{withCredentials:!0,_retry:!0}),{access:i}=r.data;if(!i)throw new Error("No access token received");return w7("access_token",i,1),this.isAuthenticated=!0,i}catch(n){throw console.error("Error refreshing token:",{status:(t=n.response)==null?void 0:t.status,data:(e=n.response)==null?void 0:e.data}),this.isAuthenticated=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",n}},async fetchUsers(t={}){this.loading=!0;try{return(await xa.getUsers(t)).data}catch(e){throw this.error="Erreur lors de la récupération des utilisateurs",e}finally{this.loading=!1}},async fetchEnterprises(){this.loading=!0;try{const t=await xa.getUsers({role:"ENTREPRISE"});return this.enterprises=t.data,this.enterprises}catch(t){throw this.error="Erreur lors de la récupération des entreprises",t}finally{this.loading=!1}},async fetchEnterpriseEmployees(t){this.loading=!0;try{const e=await xa.getUsers({role:"SALARIE",entreprise:t});return this.employees=e.data,this.employees}catch(e){throw this.error="Erreur lors de la récupération des salaries",e}finally{this.loading=!1}},async fetchEnterpriseVisitors(t){this.loading=!0;try{const e=await xa.getUsers({role:"VISITEUR",entreprise:t});return this.visitors=e.data,this.visitors}catch(e){throw this.error="Erreur lors de la récupération des visiteurs",e}finally{this.loading=!1}},async createUser(t){this.loading=!0;try{return(await xa.createUser(t)).data}catch(e){throw this.error="Erreur lors de la création de l'utilisateur",e}finally{this.loading=!1}},async updateUser(t,e){this.loading=!0;try{return(await xa.updateUser(t,e)).data}catch(n){throw this.error="Erreur lors de la mise à jour de l'utilisateur",n}finally{this.loading=!1}},async deleteUser(t){this.loading=!0;try{return await xa.deleteUser(t),!0}catch(e){throw this.error="Erreur lors de la suppression de l'utilisateur",e}finally{this.loading=!1}},async fetchEnterprisesLegacy(){this.loading=!0;try{const t=await Pn.get("/users/",{params:{role:"entreprise"}});this.enterprises=t.data}catch(t){throw this.error="Erreur lors de la récupération des entreprises",t}finally{this.loading=!1}},async setEnterprise(t,e){this.loading=!0;try{await Pn.patch(`/users/${t}/`,{enterprise:e}),this.user&&this.user.id===t&&(this.user.enterprise_id=e)}catch(n){throw this.error="Erreur lors de la mise à jour de l'entreprise",n}finally{this.loading=!1}},async updateUserRole(t,e){this.loading=!0;try{const n=await Pn.patch(`/users/${t}/`,{role:e});return this.user&&this.user.id===t&&(this.user.user_type=e),n.data}catch(n){throw this.error="Erreur lors de la mise à jour du rôle",n}finally{this.loading=!1}},async updateUserEmail(t){var e;this.loading=!0;try{const n=await Pn.patch(`/users/${(e=this.user)==null?void 0:e.id}/`,{email:t});return this.user&&(this.user.email=t),n.data}catch(n){throw this.error="Erreur lors de la mise à jour de l'email",n}finally{this.loading=!1}},async uploadLogo(t){this.loading=!0;try{const e=await xa.uploadLogo(t);return this.user&&e.data.logo&&(this.user.logo=e.data.logo),e.data}catch(e){throw this.error="Erreur lors du téléversement du logo",e}finally{this.loading=!1}},checkAccess(t){return this.user?t.includes(this.user.user_type):!1},async fetchUsersByRole(t){this.loading=!0;try{return await M7(t)}catch(e){throw console.error(`Error fetching ${t.role}:`,e),e}finally{this.loading=!1}},async fetchEntrepriseSalaries(t){this.loading=!0;try{return(await xa.getUsers({role:"SALARIE",entreprise:t})).data}catch(e){throw this.error="Erreur lors de la récupération des salaries",e}finally{this.loading=!1}},async fetchSalarieVisiteurs(t){this.loading=!0;try{return(await xa.getUsers({role:"VISITEUR",salarie:t})).data}catch(e){throw this.error="Erreur lors de la récupération des visiteurs",e}finally{this.loading=!1}}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Xf=typeof document<"u";function $C(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function P7(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&$C(t.default)}const Bi=Object.assign;function O1(t,e){const n={};for(const r in e){const i=e[r];n[r]=bc(i)?i.map(t):t(i)}return n}const Ig=()=>{},bc=Array.isArray,UC=/#/g,k7=/&/g,A7=/\//g,T7=/=/g,D7=/\?/g,VC=/\+/g,I7=/%5B/g,O7=/%5D/g,HC=/%5E/g,N7=/%60/g,GC=/%7B/g,B7=/%7C/g,WC=/%7D/g,R7=/%20/g;function S_(t){return encodeURI(""+t).replace(B7,"|").replace(I7,"[").replace(O7,"]")}function F7(t){return S_(t).replace(GC,"{").replace(WC,"}").replace(HC,"^")}function J2(t){return S_(t).replace(VC,"%2B").replace(R7,"+").replace(UC,"%23").replace(k7,"%26").replace(N7,"`").replace(GC,"{").replace(WC,"}").replace(HC,"^")}function j7(t){return J2(t).replace(T7,"%3D")}function z7(t){return S_(t).replace(UC,"%23").replace(D7,"%3F")}function $7(t){return t==null?"":z7(t).replace(A7,"%2F")}function om(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const U7=/\/$/,V7=t=>t.replace(U7,"");function N1(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=q7(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:om(o)}}function H7(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function v4(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function G7(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&bp(e.matched[r],n.matched[i])&&qC(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function bp(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function qC(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!W7(t[n],e[n]))return!1;return!0}function W7(t,e){return bc(t)?y4(t,e):bc(e)?y4(e,t):t===e}function y4(t,e){return bc(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function q7(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Hh={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var am;(function(t){t.pop="pop",t.push="push"})(am||(am={}));var Og;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Og||(Og={}));function Y7(t){if(!t)if(Xf){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),V7(t)}const K7=/^[^#]+#/;function Z7(t,e){return t.replace(K7,"#")+e}function X7(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Py=()=>({left:window.scrollX,top:window.scrollY});function J7(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=X7(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function b4(t,e){return(history.state?history.state.position-e:-1)+t}const Q2=new Map;function Q7(t,e){Q2.set(t,e)}function eB(t){const e=Q2.get(t);return Q2.delete(t),e}let tB=()=>location.protocol+"//"+location.host;function YC(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),v4(l,"")}return v4(n,t)+r+i}function nB(t,e,n,r){let i=[],s=[],o=null;const a=({state:v})=>{const m=YC(t,location),x=n.value,E=e.value;let T=0;if(v){if(n.value=m,e.value=v,o&&o===x){o=null;return}T=E?v.position-E.position:0}else r(m);i.forEach(D=>{D(n.value,x,{delta:T,type:am.pop,direction:T?T>0?Og.forward:Og.back:Og.unknown})})};function l(){o=n.value}function c(v){i.push(v);const m=()=>{const x=i.indexOf(v);x>-1&&i.splice(x,1)};return s.push(m),m}function d(){const{history:v}=window;v.state&&v.replaceState(Bi({},v.state,{scroll:Py()}),"")}function p(){for(const v of s)v();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:l,listen:c,destroy:p}}function _4(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?Py():null}}function rB(t){const{history:e,location:n}=window,r={value:YC(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,d){const p=t.indexOf("#"),v=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:tB()+t+l;try{e[d?"replaceState":"pushState"](c,"",v),i.value=c}catch(m){console.error(m),n[d?"replace":"assign"](v)}}function o(l,c){const d=Bi({},e.state,_4(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,d,!0),r.value=l}function a(l,c){const d=Bi({},i.value,e.state,{forward:l,scroll:Py()});s(d.current,d,!0);const p=Bi({},_4(r.value,l,null),{position:d.position+1},c);s(l,p,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function iB(t){t=Y7(t);const e=rB(t),n=nB(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=Bi({location:"",base:t,go:r,createHref:Z7.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function sB(t){return typeof t=="string"||t&&typeof t=="object"}function KC(t){return typeof t=="string"||typeof t=="symbol"}const ZC=Symbol("");var w4;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(w4||(w4={}));function _p(t,e){return Bi(new Error,{type:t,[ZC]:!0},e)}function ph(t,e){return t instanceof Error&&ZC in t&&(e==null||!!(t.type&e))}const x4="[^/]+?",oB={sensitive:!1,strict:!1,start:!0,end:!0},aB=/[.+*?^${}()[\]/\\]/g;function lB(t,e){const n=Bi({},oB,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const d=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let p=0;p<c.length;p++){const v=c[p];let m=40+(n.sensitive?.25:0);if(v.type===0)p||(i+="/"),i+=v.value.replace(aB,"\\$&"),m+=40;else if(v.type===1){const{value:x,repeatable:E,optional:T,regexp:D}=v;s.push({name:x,repeatable:E,optional:T});const k=D||x4;if(k!==x4){m+=10;try{new RegExp(`(${k})`)}catch(W){throw new Error(`Invalid custom RegExp for param "${x}" (${k}): `+W.message)}}let B=E?`((?:${k})(?:/(?:${k}))*)`:`(${k})`;p||(B=T&&c.length<2?`(?:/${B})`:"/"+B),T&&(B+="?"),i+=B,m+=20,T&&(m+=-8),E&&(m+=-20),k===".*"&&(m+=-50)}d.push(m)}r.push(d)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const d=c.match(o),p={};if(!d)return null;for(let v=1;v<d.length;v++){const m=d[v]||"",x=s[v-1];p[x.name]=m&&x.repeatable?m.split("/"):m}return p}function l(c){let d="",p=!1;for(const v of t){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const m of v)if(m.type===0)d+=m.value;else if(m.type===1){const{value:x,repeatable:E,optional:T}=m,D=x in c?c[x]:"";if(bc(D)&&!E)throw new Error(`Provided param "${x}" is an array but it is not repeatable (* or + modifiers)`);const k=bc(D)?D.join("/"):D;if(!k)if(T)v.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${x}"`);d+=k}}return d||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function uB(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function XC(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=uB(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(L4(r))return 1;if(L4(i))return-1}return i.length-r.length}function L4(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const cB={type:0,value:""},hB=/[a-zA-Z0-9_]/;function dB(t){if(!t)return[[]];if(t==="/")return[[cB]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",d="";function p(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function v(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&p(),o()):l===":"?(p(),n=1):v();break;case 4:v(),n=r;break;case 1:l==="("?n=2:hB.test(l)?v():(p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:n=3:d+=l;break;case 3:p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),p(),o(),i}function fB(t,e,n){const r=lB(dB(t.path),n),i=Bi(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function pB(t,e){const n=[],r=new Map;e=M4({strict:!1,end:!0,sensitive:!1},e);function i(p){return r.get(p)}function s(p,v,m){const x=!m,E=C4(p);E.aliasOf=m&&m.record;const T=M4(e,p),D=[E];if("alias"in p){const W=typeof p.alias=="string"?[p.alias]:p.alias;for(const Q of W)D.push(C4(Bi({},E,{components:m?m.record.components:E.components,path:Q,aliasOf:m?m.record:E})))}let k,B;for(const W of D){const{path:Q}=W;if(v&&Q[0]!=="/"){const pe=v.record.path,fe=pe[pe.length-1]==="/"?"":"/";W.path=v.record.path+(Q&&fe+Q)}if(k=fB(W,v,T),m?m.alias.push(k):(B=B||k,B!==k&&B.alias.push(k),x&&p.name&&!E4(k)&&o(p.name)),JC(k)&&l(k),E.children){const pe=E.children;for(let fe=0;fe<pe.length;fe++)s(pe[fe],k,m&&m.children[fe])}m=m||k}return B?()=>{o(B)}:Ig}function o(p){if(KC(p)){const v=r.get(p);v&&(r.delete(p),n.splice(n.indexOf(v),1),v.children.forEach(o),v.alias.forEach(o))}else{const v=n.indexOf(p);v>-1&&(n.splice(v,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function a(){return n}function l(p){const v=vB(p,n);n.splice(v,0,p),p.record.name&&!E4(p)&&r.set(p.record.name,p)}function c(p,v){let m,x={},E,T;if("name"in p&&p.name){if(m=r.get(p.name),!m)throw _p(1,{location:p});T=m.record.name,x=Bi(S4(v.params,m.keys.filter(B=>!B.optional).concat(m.parent?m.parent.keys.filter(B=>B.optional):[]).map(B=>B.name)),p.params&&S4(p.params,m.keys.map(B=>B.name))),E=m.stringify(x)}else if(p.path!=null)E=p.path,m=n.find(B=>B.re.test(E)),m&&(x=m.parse(E),T=m.record.name);else{if(m=v.name?r.get(v.name):n.find(B=>B.re.test(v.path)),!m)throw _p(1,{location:p,currentLocation:v});T=m.record.name,x=Bi({},v.params,p.params),E=m.stringify(x)}const D=[];let k=m;for(;k;)D.unshift(k.record),k=k.parent;return{name:T,path:E,params:x,matched:D,meta:mB(D)}}t.forEach(p=>s(p));function d(){n.length=0,r.clear()}return{addRoute:s,resolve:c,removeRoute:o,clearRoutes:d,getRoutes:a,getRecordMatcher:i}}function S4(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function C4(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:gB(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function gB(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function E4(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function mB(t){return t.reduce((e,n)=>Bi(e,n.meta),{})}function M4(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function vB(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;XC(t,e[s])<0?r=s:n=s+1}const i=yB(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function yB(t){let e=t;for(;e=e.parent;)if(JC(e)&&XC(t,e)===0)return e}function JC({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function bB(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(VC," "),o=s.indexOf("="),a=om(o<0?s:s.slice(0,o)),l=o<0?null:om(s.slice(o+1));if(a in e){let c=e[a];bc(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function P4(t){let e="";for(let n in t){const r=t[n];if(n=j7(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(bc(r)?r.map(s=>s&&J2(s)):[r&&J2(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function _B(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=bc(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const wB=Symbol(""),k4=Symbol(""),ky=Symbol(""),C_=Symbol(""),eb=Symbol("");function Gp(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function nd(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=v=>{v===!1?l(_p(4,{from:n,to:e})):v instanceof Error?l(v):sB(v)?l(_p(2,{from:e,to:v})):(o&&r.enterCallbacks[i]===o&&typeof v=="function"&&o.push(v),a())},d=s(()=>t.call(r&&r.instances[i],e,n,c));let p=Promise.resolve(d);t.length<3&&(p=p.then(c)),p.catch(v=>l(v))})}function B1(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if($C(l)){const d=(l.__vccOpts||l)[e];d&&s.push(nd(d,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const p=P7(d)?d.default:d;o.mods[a]=d,o.components[a]=p;const m=(p.__vccOpts||p)[e];return m&&nd(m,n,r,o,a,i)()}))}}return s}function A4(t){const e=bu(ky),n=bu(C_),r=qn(()=>{const l=bn(t.to);return e.resolve(l)}),i=qn(()=>{const{matched:l}=r.value,{length:c}=l,d=l[c-1],p=n.matched;if(!d||!p.length)return-1;const v=p.findIndex(bp.bind(null,d));if(v>-1)return v;const m=T4(l[c-2]);return c>1&&T4(d)===m&&p[p.length-1].path!==m?p.findIndex(bp.bind(null,l[c-2])):v}),s=qn(()=>i.value>-1&&CB(n.params,r.value.params)),o=qn(()=>i.value>-1&&i.value===n.matched.length-1&&qC(n.params,r.value.params));function a(l={}){if(SB(l)){const c=e[bn(t.replace)?"replace":"push"](bn(t.to)).catch(Ig);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:qn(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function xB(t){return t.length===1?t[0]:t}const LB=_s({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:A4,setup(t,{slots:e}){const n=wu(A4(t)),{options:r}=bu(ky),i=qn(()=>({[D4(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[D4(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&xB(e.default(n));return t.custom?s:by("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),cg=LB;function SB(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function CB(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!bc(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function T4(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const D4=(t,e,n)=>t??e??n,EB=_s({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=bu(eb),i=qn(()=>t.route||r.value),s=bu(k4,0),o=qn(()=>{let c=bn(s);const{matched:d}=i.value;let p;for(;(p=d[c])&&!p.components;)c++;return c}),a=qn(()=>i.value.matched[o.value]);kg(k4,qn(()=>o.value+1)),kg(wB,a),kg(eb,i);const l=_t();return ni(()=>[l.value,a.value,t.name],([c,d,p],[v,m,x])=>{d&&(d.instances[p]=c,m&&m!==d&&c&&c===v&&(d.leaveGuards.size||(d.leaveGuards=m.leaveGuards),d.updateGuards.size||(d.updateGuards=m.updateGuards))),c&&d&&(!m||!bp(d,m)||!v)&&(d.enterCallbacks[p]||[]).forEach(E=>E(c))},{flush:"post"}),()=>{const c=i.value,d=t.name,p=a.value,v=p&&p.components[d];if(!v)return I4(n.default,{Component:v,route:c});const m=p.props[d],x=m?m===!0?c.params:typeof m=="function"?m(c):m:null,T=by(v,Bi({},x,e,{onVnodeUnmounted:D=>{D.component.isUnmounted&&(p.instances[d]=null)},ref:l}));return I4(n.default,{Component:T,route:c})||T}}});function I4(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const QC=EB;function MB(t){const e=pB(t.routes,t),n=t.parseQuery||bB,r=t.stringifyQuery||P4,i=t.history,s=Gp(),o=Gp(),a=Gp(),l=n_(Hh);let c=Hh;Xf&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=O1.bind(null,me=>""+me),p=O1.bind(null,$7),v=O1.bind(null,om);function m(me,oe){let re,Te;return KC(me)?(re=e.getRecordMatcher(me),Te=oe):Te=me,e.addRoute(Te,re)}function x(me){const oe=e.getRecordMatcher(me);oe&&e.removeRoute(oe)}function E(){return e.getRoutes().map(me=>me.record)}function T(me){return!!e.getRecordMatcher(me)}function D(me,oe){if(oe=Bi({},oe||l.value),typeof me=="string"){const le=N1(n,me,oe.path),he=e.resolve({path:le.path},oe),ee=i.createHref(le.fullPath);return Bi(le,he,{params:v(he.params),hash:om(le.hash),redirectedFrom:void 0,href:ee})}let re;if(me.path!=null)re=Bi({},me,{path:N1(n,me.path,oe.path).path});else{const le=Bi({},me.params);for(const he in le)le[he]==null&&delete le[he];re=Bi({},me,{params:p(le)}),oe.params=p(oe.params)}const Te=e.resolve(re,oe),Le=me.hash||"";Te.params=d(v(Te.params));const qe=H7(r,Bi({},me,{hash:F7(Le),path:Te.path})),se=i.createHref(qe);return Bi({fullPath:qe,hash:Le,query:r===P4?_B(me.query):me.query||{}},Te,{redirectedFrom:void 0,href:se})}function k(me){return typeof me=="string"?N1(n,me,l.value.path):Bi({},me)}function B(me,oe){if(c!==me)return _p(8,{from:oe,to:me})}function W(me){return fe(me)}function Q(me){return W(Bi(k(me),{replace:!0}))}function pe(me){const oe=me.matched[me.matched.length-1];if(oe&&oe.redirect){const{redirect:re}=oe;let Te=typeof re=="function"?re(me):re;return typeof Te=="string"&&(Te=Te.includes("?")||Te.includes("#")?Te=k(Te):{path:Te},Te.params={}),Bi({query:me.query,hash:me.hash,params:Te.path!=null?{}:me.params},Te)}}function fe(me,oe){const re=c=D(me),Te=l.value,Le=me.state,qe=me.force,se=me.replace===!0,le=pe(re);if(le)return fe(Bi(k(le),{state:typeof le=="object"?Bi({},Le,le.state):Le,force:qe,replace:se}),oe||re);const he=re;he.redirectedFrom=oe;let ee;return!qe&&G7(r,Te,re)&&(ee=_p(16,{to:he,from:Te}),He(Te,Te,!0,!1)),(ee?Promise.resolve(ee):q(he,Te)).catch(be=>ph(be)?ph(be,2)?be:Ce(be):Y(be,he,Te)).then(be=>{if(be){if(ph(be,2))return fe(Bi({replace:se},k(be.to),{state:typeof be.to=="object"?Bi({},Le,be.to.state):Le,force:qe}),oe||he)}else be=$(he,Te,!0,se,Le);return R(he,Te,be),be})}function O(me,oe){const re=B(me,oe);return re?Promise.reject(re):Promise.resolve()}function U(me){const oe=ae.values().next().value;return oe&&typeof oe.runWithContext=="function"?oe.runWithContext(me):me()}function q(me,oe){let re;const[Te,Le,qe]=PB(me,oe);re=B1(Te.reverse(),"beforeRouteLeave",me,oe);for(const le of Te)le.leaveGuards.forEach(he=>{re.push(nd(he,me,oe))});const se=O.bind(null,me,oe);return re.push(se),ge(re).then(()=>{re=[];for(const le of s.list())re.push(nd(le,me,oe));return re.push(se),ge(re)}).then(()=>{re=B1(Le,"beforeRouteUpdate",me,oe);for(const le of Le)le.updateGuards.forEach(he=>{re.push(nd(he,me,oe))});return re.push(se),ge(re)}).then(()=>{re=[];for(const le of qe)if(le.beforeEnter)if(bc(le.beforeEnter))for(const he of le.beforeEnter)re.push(nd(he,me,oe));else re.push(nd(le.beforeEnter,me,oe));return re.push(se),ge(re)}).then(()=>(me.matched.forEach(le=>le.enterCallbacks={}),re=B1(qe,"beforeRouteEnter",me,oe,U),re.push(se),ge(re))).then(()=>{re=[];for(const le of o.list())re.push(nd(le,me,oe));return re.push(se),ge(re)}).catch(le=>ph(le,8)?le:Promise.reject(le))}function R(me,oe,re){a.list().forEach(Te=>U(()=>Te(me,oe,re)))}function $(me,oe,re,Te,Le){const qe=B(me,oe);if(qe)return qe;const se=oe===Hh,le=Xf?history.state:{};re&&(Te||se?i.replace(me.fullPath,Bi({scroll:se&&le&&le.scroll},Le)):i.push(me.fullPath,Le)),l.value=me,He(me,oe,re,se),Ce()}let X;function K(){X||(X=i.listen((me,oe,re)=>{if(!de.listening)return;const Te=D(me),Le=pe(Te);if(Le){fe(Bi(Le,{replace:!0,force:!0}),Te).catch(Ig);return}c=Te;const qe=l.value;Xf&&Q7(b4(qe.fullPath,re.delta),Py()),q(Te,qe).catch(se=>ph(se,12)?se:ph(se,2)?(fe(Bi(k(se.to),{force:!0}),Te).then(le=>{ph(le,20)&&!re.delta&&re.type===am.pop&&i.go(-1,!1)}).catch(Ig),Promise.reject()):(re.delta&&i.go(-re.delta,!1),Y(se,Te,qe))).then(se=>{se=se||$(Te,qe,!1),se&&(re.delta&&!ph(se,8)?i.go(-re.delta,!1):re.type===am.pop&&ph(se,20)&&i.go(-1,!1)),R(Te,qe,se)}).catch(Ig)}))}let F=Gp(),N=Gp(),J;function Y(me,oe,re){Ce(me);const Te=N.list();return Te.length?Te.forEach(Le=>Le(me,oe,re)):console.error(me),Promise.reject(me)}function ye(){return J&&l.value!==Hh?Promise.resolve():new Promise((me,oe)=>{F.add([me,oe])})}function Ce(me){return J||(J=!me,K(),F.list().forEach(([oe,re])=>me?re(me):oe()),F.reset()),me}function He(me,oe,re,Te){const{scrollBehavior:Le}=t;if(!Xf||!Le)return Promise.resolve();const qe=!re&&eB(b4(me.fullPath,0))||(Te||!re)&&history.state&&history.state.scroll||null;return _l().then(()=>Le(me,oe,qe)).then(se=>se&&J7(se)).catch(se=>Y(se,me,oe))}const j=me=>i.go(me);let Z;const ae=new Set,de={currentRoute:l,listening:!0,addRoute:m,removeRoute:x,clearRoutes:e.clearRoutes,hasRoute:T,getRoutes:E,resolve:D,options:t,push:W,replace:Q,go:j,back:()=>j(-1),forward:()=>j(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:N.add,isReady:ye,install(me){const oe=this;me.component("RouterLink",cg),me.component("RouterView",QC),me.config.globalProperties.$router=oe,Object.defineProperty(me.config.globalProperties,"$route",{enumerable:!0,get:()=>bn(l)}),Xf&&!Z&&l.value===Hh&&(Z=!0,W(i.location).catch(Le=>{}));const re={};for(const Le in Hh)Object.defineProperty(re,Le,{get:()=>l.value[Le],enumerable:!0});me.provide(ky,oe),me.provide(C_,e_(re)),me.provide(eb,l);const Te=me.unmount;ae.add(me),me.unmount=function(){ae.delete(me),ae.size<1&&(c=Hh,X&&X(),X=null,l.value=Hh,Z=!1,J=!1),Te()}}};function ge(me){return me.reduce((oe,re)=>oe.then(()=>U(re)),Promise.resolve())}return de}function PB(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>bp(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>bp(c,l))||i.push(l))}return[n,r,i]}function Cm(){return bu(ky)}function kB(t){return bu(C_)}const Zl=Ap("notification",()=>{const t=_t([]),e=_t(0),n=_t(null),r=qn(()=>[...t.value].sort((p,v)=>v.timestamp-p.timestamp));function i({type:p,message:v,duration:m=5e3}){const x=++e.value,E=Date.now(),T={id:x,type:p,message:v,duration:m,timestamp:E};return t.value.push(T),n.value=x,m>0&&setTimeout(()=>{c(x)},m),x}const s=(p,v=5e3)=>i({type:"success",message:p,duration:v}),o=(p,v=5e3)=>i({type:"error",message:p,duration:v}),a=(p,v=5e3)=>i({type:"info",message:p,duration:v}),l=(p,v=5e3)=>i({type:"warning",message:p,duration:v});function c(p){const v=t.value.findIndex(m=>m.id===p);v!==-1&&t.value.splice(v,1),n.value===p&&(n.value=null)}function d(){t.value=[],n.value=null}return{notifications:r,lastAddedId:n,addNotification:i,removeNotification:c,clearAll:d,success:s,error:o,info:a,warning:l}}),AB=Object.freeze(Object.defineProperty({__proto__:null,useNotificationStore:Zl},Symbol.toStringTag,{value:"Module"}));var oa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function E_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function eE(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}function TB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var tE=TB,DB=typeof oa=="object"&&oa&&oa.Object===Object&&oa,IB=DB,OB=IB,NB=typeof self=="object"&&self&&self.Object===Object&&self,BB=OB||NB||Function("return this")(),nE=BB,RB=nE,FB=function(){return RB.Date.now()},jB=FB,zB=/\s/;function $B(t){for(var e=t.length;e--&&zB.test(t.charAt(e)););return e}var UB=$B,VB=UB,HB=/^\s+/;function GB(t){return t&&t.slice(0,VB(t)+1).replace(HB,"")}var WB=GB,qB=nE,YB=qB.Symbol,rE=YB,O4=rE,iE=Object.prototype,KB=iE.hasOwnProperty,ZB=iE.toString,Wp=O4?O4.toStringTag:void 0;function XB(t){var e=KB.call(t,Wp),n=t[Wp];try{t[Wp]=void 0;var r=!0}catch{}var i=ZB.call(t);return r&&(e?t[Wp]=n:delete t[Wp]),i}var JB=XB,QB=Object.prototype,eR=QB.toString;function tR(t){return eR.call(t)}var nR=tR,N4=rE,rR=JB,iR=nR,sR="[object Null]",oR="[object Undefined]",B4=N4?N4.toStringTag:void 0;function aR(t){return t==null?t===void 0?oR:sR:B4&&B4 in Object(t)?rR(t):iR(t)}var lR=aR;function uR(t){return t!=null&&typeof t=="object"}var cR=uR,hR=lR,dR=cR,fR="[object Symbol]";function pR(t){return typeof t=="symbol"||dR(t)&&hR(t)==fR}var gR=pR,mR=WB,R4=tE,vR=gR,F4=NaN,yR=/^[-+]0x[0-9a-f]+$/i,bR=/^0b[01]+$/i,_R=/^0o[0-7]+$/i,wR=parseInt;function xR(t){if(typeof t=="number")return t;if(vR(t))return F4;if(R4(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=R4(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=mR(t);var n=bR.test(t);return n||_R.test(t)?wR(t.slice(2),n?2:8):yR.test(t)?F4:+t}var LR=xR,SR=tE,R1=jB,j4=LR,CR="Expected a function",ER=Math.max,MR=Math.min;function PR(t,e,n){var r,i,s,o,a,l,c=0,d=!1,p=!1,v=!0;if(typeof t!="function")throw new TypeError(CR);e=j4(e)||0,SR(n)&&(d=!!n.leading,p="maxWait"in n,s=p?ER(j4(n.maxWait)||0,e):s,v="trailing"in n?!!n.trailing:v);function m(pe){var fe=r,O=i;return r=i=void 0,c=pe,o=t.apply(O,fe),o}function x(pe){return c=pe,a=setTimeout(D,e),d?m(pe):o}function E(pe){var fe=pe-l,O=pe-c,U=e-fe;return p?MR(U,s-O):U}function T(pe){var fe=pe-l,O=pe-c;return l===void 0||fe>=e||fe<0||p&&O>=s}function D(){var pe=R1();if(T(pe))return k(pe);a=setTimeout(D,E(pe))}function k(pe){return a=void 0,v&&r?m(pe):(r=i=void 0,o)}function B(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function W(){return a===void 0?o:k(R1())}function Q(){var pe=R1(),fe=T(pe);if(r=arguments,i=this,l=pe,fe){if(a===void 0)return x(l);if(p)return clearTimeout(a),a=setTimeout(D,e),m(l)}return a===void 0&&(a=setTimeout(D,e)),o}return Q.cancel=B,Q.flush=W,Q}var kR=PR;const AR=E_(kR),TR={class:"relative w-full"},DR={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},IR=["onClick"],z4=_s({__name:"SearchBar",emits:["select-location"],setup(t,{emit:e}){const n=_t(""),r=_t([]),i=e,s=AR(async l=>{if(l.length<3){r.value=[];return}try{const d=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(l)}`)).json();r.value=d}catch(c){console.error("Erreur lors de la recherche d'adresse:",c),r.value=[]}},300);function o(){s(n.value)}function a(l){n.value=l.display_name,r.value=[],i("select-location",{lat:parseFloat(l.lat),lng:parseFloat(l.lon)})}return(l,c)=>(De(),Ne("div",TR,[On(C("input",{"onUpdate:modelValue":c[0]||(c[0]=d=>n.value=d),onInput:o,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[ui,n.value]]),r.value.length>0?(De(),Ne("div",DR,[(De(!0),Ne(_n,null,Wn(r.value,d=>(De(),Ne("div",{key:d.place_id,onClick:p=>a(d),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Tt(d.display_name),9,IR))),128))])):Wt("",!0)]))}}),OR={key:0,class:"pwa-update-notification"},NR=_s({__name:"PWAUpdateNotification",setup(t,{expose:e}){const n=_t(!1),r=async()=>{window.location.reload(),n.value=!1},i=()=>{n.value=!1};return e({showUpdateNotification:n,refreshApp:r,closeNotification:i}),(s,o)=>n.value?(De(),Ne("div",OR,[C("div",{class:"pwa-update-content"},[o[0]||(o[0]=C("p",null,"Une nouvelle version est disponible",-1)),C("div",{class:"pwa-update-actions"},[C("button",{onClick:r,class:"pwa-update-button"},"Mettre à jour"),C("button",{onClick:i,class:"pwa-close-button"},"Plus tard")])])])):Wt("",!0)}}),Qc=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},BR=Qc(NR,[["__scopeId","data-v-aa687693"]]),RR="/static/frontend/img/icons/android-chrome-192x192.png",FR={class:"prompt-content"},jR={class:"prompt-body"},zR={key:0,class:"install-instructions ios"},$R={key:1,class:"install-instructions android"},UR={key:2,class:"install-instructions desktop"},VR={key:3,class:"install-instructions desktop"},HR=_s({__name:"PWAInstallPrompt",setup(t){const e=_t(!1),n=_t(!1),r=_t(null);_t(null);const i=_t(!1),s=_t(!1),o=_t(!1),a=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,l=()=>{const m=localStorage.getItem("pwaPromptLastClosed");if(!m)return!1;const x=3*24*60*60*1e3;return Date.now()-parseInt(m)<x},c=()=>{i.value=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,s.value=/Android/.test(navigator.userAgent),o.value=!i.value&&!s.value,window.addEventListener("beforeinstallprompt",m=>{m.preventDefault(),r.value=m,e.value=!0,n.value=!0}),window.addEventListener("appinstalled",m=>{console.log("Application installée avec succès",m),e.value=!1}),!a()&&(l()||setTimeout(()=>{e.value=!0,n.value=!0},3e3))},d=()=>{window.removeEventListener("beforeinstallprompt",()=>{}),window.removeEventListener("appinstalled",()=>{})};Ds(()=>{c()}),Ld(()=>{d()});const p=async()=>{if(!r.value){console.log("Installation non disponible");return}try{r.value.prompt();const m=await r.value.userChoice;r.value=null,m.outcome==="accepted"?(console.log("Installation acceptée"),e.value=!1):console.log("Installation refusée")}catch(m){console.error("Erreur lors de l'installation:",m)}},v=()=>{e.value=!1,localStorage.setItem("pwaPromptLastClosed",Date.now().toString())};return(m,x)=>e.value?(De(),Ne("div",{key:0,class:xi(["pwa-install-prompt",{fullscreen:n.value}])},[C("div",FR,[C("div",{class:"prompt-header"},[x[1]||(x[1]=C("div",{class:"app-info"},[C("img",{src:RR,alt:"TagMap Logo",class:"app-logo"}),C("div",{class:"app-details"},[C("h2",null,"Installer TagMap"),C("p",null,"Solution innovante de cartographie et gestion de projets")])],-1)),C("button",{onClick:v,class:"close-button","aria-label":"Fermer"},x[0]||(x[0]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[C("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),C("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),C("div",jR,[i.value?(De(),Ne("div",zR,x[2]||(x[2]=[wl('<h3 data-v-48772823>Pour installer l&#39;application sur votre iPhone :</h3><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>1</div><div class="step-content" data-v-48772823><p data-v-48772823>Appuyez sur <strong data-v-48772823>Partager</strong> <span class="ios-share-icon" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" data-v-48772823></path><polyline points="16 6 12 2 8 6" data-v-48772823></polyline><line x1="12" y1="2" x2="12" y2="15" data-v-48772823></line></svg></span></p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>2</div><div class="step-content" data-v-48772823><p data-v-48772823>Faites défiler et appuyez sur <strong data-v-48772823>Sur l&#39;écran d&#39;accueil</strong></p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>3</div><div class="step-content" data-v-48772823><p data-v-48772823>Appuyez sur <strong data-v-48772823>Ajouter</strong> en haut à droite</p></div></div>',4)]))):s.value?(De(),Ne("div",$R,[x[3]||(x[3]=C("h3",null,"Pour installer l'application sur votre appareil :",-1)),x[4]||(x[4]=C("div",{class:"instruction-step"},[C("div",{class:"step-number"},"1"),C("div",{class:"step-content"},[C("p",null,"Appuyez sur le bouton ci-dessous")])],-1)),C("button",{onClick:p,class:"install-button"}," Installer l'application ")])):o.value?(De(),Ne("div",UR,[x[5]||(x[5]=C("h3",null,"Pour installer l'application sur votre ordinateur :",-1)),x[6]||(x[6]=C("div",{class:"instruction-step"},[C("div",{class:"step-number"},"1"),C("div",{class:"step-content"},[C("p",null,"Cliquez sur le bouton ci-dessous pour installer l'application")])],-1)),C("button",{onClick:p,class:"install-button"}," Installer l'application ")])):(De(),Ne("div",VR,x[7]||(x[7]=[wl('<h3 data-v-48772823>Pour installer l&#39;application sur votre ordinateur :</h3><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>1</div><div class="step-content" data-v-48772823><p data-v-48772823>Cliquez sur l&#39;icône d&#39;installation dans la barre d&#39;adresse</p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>2</div><div class="step-content" data-v-48772823><p data-v-48772823>Cliquez sur &quot;Installer&quot;</p></div></div>',3)])))]),C("div",{class:"prompt-footer"},[x[8]||(x[8]=wl('<div class="benefits" data-v-48772823><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" data-v-48772823></path></svg><span data-v-48772823>Sécurisé</span></div><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><circle cx="12" cy="12" r="10" data-v-48772823></circle><polyline points="12 6 12 12 16 14" data-v-48772823></polyline></svg><span data-v-48772823>Rapide</span></div><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" data-v-48772823></path></svg><span data-v-48772823>Hors ligne</span></div></div>',1)),C("button",{onClick:v,class:"remind-later"},"Me le rappeler plus tard")])])],2)):Wt("",!0)}}),GR=Qc(HR,[["__scopeId","data-v-48772823"]]),WR={class:"app-container"},qR={key:0,class:"app-header bg-white shadow-sm z-[2500] flex-shrink-0"},YR={class:"mx-auto px-4 sm:px-6 lg:px-8"},KR={class:"flex h-16 items-center justify-between"},ZR={class:"flex items-center"},XR={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},JR={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},QR={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},eF={class:"hidden md:flex md:ml-6 space-x-8"},tF={key:0,class:"flex-1 mx-2"},nF={class:"hidden md:block"},rF={class:"md:hidden"},iF={key:1,class:"flex-1"},sF={class:"flex items-center space-x-2 md:space-x-4"},oF={class:"relative"},aF={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},lF={class:"flex items-center justify-between w-full"},uF={class:"flex items-center space-x-3"},cF={class:"max-h-72 overflow-y-auto"},hF={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},dF={class:"flex items-start"},fF={class:"flex-shrink-0 mr-3"},pF={key:0,class:"h-6 w-6 md:h-5 md:w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},gF={key:1,class:"h-6 w-6 md:h-5 md:w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},mF={key:2,class:"h-6 w-6 md:h-5 md:w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},vF={key:3,class:"h-6 w-6 md:h-5 md:w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},yF={class:"flex-1"},bF={class:"text-sm md:text-sm text-gray-800"},_F=["onClick"],wF={class:"relative"},xF={class:"hidden md:flex flex-col items-end"},LF={class:"text-sm font-medium text-gray-700"},SF={key:0,class:"text-xs text-gray-500"},CF=["src","alt"],EF={class:"md:hidden px-4 py-2 border-b border-gray-100 flex justify-between items-center"},MF={class:"text-sm font-semibold text-gray-700"},PF={class:"text-xs text-gray-500"},kF={key:0,class:"md:hidden fixed inset-0 bg-white shadow-lg z-[3000] border-t border-gray-200",style:{top:"var(--header-height)"}},AF={class:"space-y-1 px-2 pb-3 pt-2"},TF={class:"app-main"},DF=_s({__name:"App",setup(t){const e=Cm(),n=co(),r=Zl(),i=_t(!1),s=_t(!1),o=_t(!1),a=_t(!1),l=_t(null),c=_t(!1),d=_t(!1),p=_t(null),v=_t("13px"),m=_t("65px"),x=_t(null),E=_t(null),T=_t(!1);function D(){d.value=window.innerWidth<768}Ds(()=>{D(),window.addEventListener("resize",D),window.addEventListener("resize",k),window.addEventListener("pwa-update-available",()=>{T.value=!0})}),Ld(()=>{window.removeEventListener("resize",D),window.removeEventListener("resize",k),window.removeEventListener("pwa-update-available",()=>{})});function k(){if(!p.value)return;const F=p.value.getBoundingClientRect();v.value=`${F.top+window.scrollY+5}px`;const N=F.left+F.width/2;m.value=`${window.innerWidth-N-22}px`}const B=qn(()=>{const F=n.user;if(!F)return"";const N=`${F.first_name} ${F.last_name.toUpperCase()}`;return F.company_name?`${N} (${F.company_name})`:N}),W=qn(()=>{var N;switch((N=n.user)==null?void 0:N.user_type){case"admin":return"Accès administrateur";case"entreprise":return"Accès entreprise";case"salarie":return"Accès salarie";case"visiteur":return"Accès visiteur";default:return""}}),Q=qn(()=>{var F;return((F=n.user)==null?void 0:F.user_type)==="admin"}),pe=qn(()=>n.isAuthenticated),fe=[{name:"Carte",to:"/"},{name:"Météo",to:"/meteo"},{name:"Notes",to:"/notes"}],O=qn(()=>{var N,J;if(!pe.value)return[];const F=[...fe];return(Q.value||((N=n.user)==null?void 0:N.user_type)==="entreprise"||((J=n.user)==null?void 0:J.user_type)==="salarie")&&F.push({name:"Utilisateurs",to:"/users"}),Q.value&&F.push({name:"Paramètres",to:"/parametres"}),F}),U=qn(()=>pe.value?[{name:"Mon profil",to:"/profile"}]:[]);async function q(){try{await n.logout(),e.push("/login")}catch(F){console.error("Erreur lors de la déconnexion:",F)}}function R(F){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:F.lat,lng:F.lng,zoom:16}}))}Ds(async()=>{console.log("App mounted, checking auth...");try{if(localStorage.getItem("token")){console.log("Token found, checking auth..."),await n.checkAuth(),await n.fetchUserProfile();const N=localStorage.getItem("lastPlanId");N&&window.dispatchEvent(new CustomEvent("load-last-plan",{detail:{planId:N}}))}else console.log("No token found")}catch(F){console.error("Auth check error:",F),e.push("/login")}});const $=qn(()=>{const F="TagMap";if(!pe.value)return`${F} - Connexion`;const N=e.currentRoute.value,Y={home:"Carte",meteo:"Météo",notes:"Notes",users:"Utilisateurs",profile:"Mon profil",changePassword:"Changement de mot de passe",map:"Carte"}[N.name]||"";return Y?`${F} - ${Y}`:F});ni($,F=>{document.title=F},{immediate:!0});const X=qn(()=>r.notifications.length);function K(){r.clearAll(),o.value=!1}return nm(()=>{if(r.lastAddedId!==null){const F=r.notifications.find(N=>N.id===r.lastAddedId);F&&_l(()=>{k(),a.value=!0,l.value={id:F.id,message:F.message,type:F.type},requestAnimationFrame(()=>{setTimeout(()=>{c.value=!0,setTimeout(()=>{c.value=!1,setTimeout(()=>{var N;((N=l.value)==null?void 0:N.id)===F.id&&(l.value=null,a.value=!1)},300)},4e3)},50)})})}}),(F,N)=>{var J;return De(),Ne("div",WR,[pe.value?(De(),Ne("header",qR,[C("nav",YR,[C("div",KR,[C("div",ZR,[C("button",{onClick:N[0]||(N[0]=Y=>s.value=!s.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden"},[N[7]||(N[7]=C("span",{class:"sr-only"},"Ouvrir le menu",-1)),(De(),Ne("svg",XR,[s.value?(De(),Ne("path",QR)):(De(),Ne("path",JR))]))]),Xr(bn(cg),{to:"/",class:"text-xl font-semibold text-primary-600 truncate ml-2 md:ml-0"},{default:Wl(()=>N[8]||(N[8]=[C("span",{class:"md:inline hidden"},"TagMap",-1),C("span",{class:"md:hidden inline"},"TM",-1)])),_:1}),C("div",eF,[(De(!0),Ne(_n,null,Wn(O.value,Y=>(De(),xo(bn(cg),{key:Y.name,to:Y.to,class:xi(["text-sm font-medium transition-colors duration-200",[F.$route.path===Y.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Wl(()=>[Ir(Tt(Y.name),1)]),_:2},1032,["to","class"]))),128))])]),F.$route.path==="/"?(De(),Ne("div",tF,[C("div",nF,[Xr(z4,{onSelectLocation:R})]),C("div",rF,[Xr(z4,{onSelectLocation:R,class:"max-w-full"})])])):(De(),Ne("div",iF)),C("div",sF,[C("div",oF,[C("button",{ref_key:"bellButtonRef",ref:p,onClick:N[1]||(N[1]=Y=>o.value=!o.value),class:xi(["relative flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"animate-bell":a.value}])},N[9]||(N[9]=[C("span",{class:"sr-only"},"Voir les notifications",-1),C("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)]),2),o.value?(De(),Ne("div",{key:0,class:"absolute right-0 mt-2 md:w-80 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:Yl(d.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[C("div",aF,[C("div",lF,[N[11]||(N[11]=C("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),C("div",uF,[X.value>0?(De(),Ne("button",{key:0,onClick:K,class:"text-xs text-primary-600 hover:text-primary-800"}," Tout effacer ")):Wt("",!0),C("button",{onClick:N[2]||(N[2]=Y=>o.value=!1),class:"md:hidden p-1 rounded-full hover:bg-gray-100"},N[10]||(N[10]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),C("div",cF,[X.value===0?(De(),Ne("div",hF," Aucune notification ")):Wt("",!0),(De(!0),Ne(_n,null,Wn(bn(r).notifications,Y=>(De(),Ne("div",{key:Y.id,class:"px-4 py-3 md:py-3 py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50"},[C("div",dF,[C("div",fF,[Y.type==="success"?(De(),Ne("svg",pF,N[12]||(N[12]=[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Y.type==="error"?(De(),Ne("svg",gF,N[13]||(N[13]=[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):Y.type==="warning"?(De(),Ne("svg",mF,N[14]||(N[14]=[C("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(De(),Ne("svg",vF,N[15]||(N[15]=[C("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))]),C("div",yF,[C("p",bF,Tt(Y.message),1),C("button",{onClick:ye=>bn(r).removeNotification(Y.id),class:"text-xs md:text-xs text-primary-600 hover:text-primary-800 mt-2 md:mt-1 py-1 md:py-0"}," Fermer ",8,_F)])])]))),128))])],4)):Wt("",!0)]),C("div",wF,[C("button",{onClick:N[3]||(N[3]=Y=>i.value=!i.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[C("div",xF,[C("span",LF,Tt(B.value),1),W.value?(De(),Ne("span",SF,Tt(W.value),1)):Wt("",!0)]),C("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:((J=bn(n).user)==null?void 0:J.logo)||"https://ui-avatars.com/api/?name="+encodeURIComponent(B.value),alt:B.value},null,8,CF)]),i.value?(De(),Ne("div",{key:0,class:"absolute right-0 mt-2 md:w-48 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:Yl(d.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[C("div",EF,[C("div",null,[C("div",MF,Tt(B.value),1),C("div",PF,Tt(W.value),1)]),C("button",{onClick:N[4]||(N[4]=Y=>i.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},N[16]||(N[16]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),(De(!0),Ne(_n,null,Wn(U.value,Y=>(De(),xo(bn(cg),{key:Y.name,to:Y.to,class:"block px-4 md:py-2 py-3 text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",onClick:N[5]||(N[5]=ye=>i.value=!1)},{default:Wl(()=>[Ir(Tt(Y.name),1)]),_:2},1032,["to"]))),128)),C("button",{onClick:q,class:"block w-full px-4 md:py-2 py-3 text-left text-sm text-red-600 hover:bg-gray-50 font-medium"}," Déconnexion ")],4)):Wt("",!0)])])]),s.value?(De(),Ne("div",kF,[C("div",AF,[(De(!0),Ne(_n,null,Wn(O.value,Y=>(De(),xo(bn(cg),{key:Y.name,to:Y.to,class:xi(["block px-3 py-2 rounded-md text-base font-medium",[F.$route.path===Y.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:N[6]||(N[6]=ye=>s.value=!1)},{default:Wl(()=>[Ir(Tt(Y.name),1)]),_:2},1032,["to","class"]))),128))])])):Wt("",!0)])])):Wt("",!0),C("main",TF,[Xr(bn(QC),null,{default:Wl(({Component:Y,route:ye})=>[(De(),xo(aS(Y),{class:xi({"router-view-map":ye.meta.isMapRoute})},null,8,["class"]))]),_:1})]),Xr(BR,{ref_key:"pwaUpdateNotification",ref:x},null,512),Xr(GR,{ref_key:"pwaInstallPrompt",ref:E},null,512)])}}}),IF="modulepreload",OF=function(t){return"/static/frontend/"+t},$4={},Ch=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=OF(l),l in $4)return;$4[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":IF,c||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),c)return new Promise((v,m)=>{p.addEventListener("load",v),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},NF={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},BF={class:"max-w-md w-full space-y-8"},RF={class:"space-y-4"},FF={class:"mt-1"},jF={class:"mt-1"},zF={class:"mt-1"},$F={key:0,class:"rounded-md bg-red-50 p-4"},UF={class:"flex"},VF={class:"ml-3"},HF={class:"text-sm font-medium text-red-800"},GF={key:1,class:"rounded-md bg-yellow-50 p-4"},WF={class:"flex"},qF={class:"ml-3"},YF={class:"mt-2 text-sm text-yellow-700"},KF={class:"list-disc pl-5 space-y-1"},ZF=["disabled"],XF={class:"absolute left-0 inset-y-0 flex items-center pl-3"},JF={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},QF={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e9=_s({__name:"ChangePasswordForm",setup(t){const e=Cm(),n=co(),r=wu({oldPassword:"",newPassword:"",confirmPassword:""}),i=_t(!1),s=_t("");Ds(()=>{var c,d;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:n.isAuthenticated,userId:(c=n.user)==null?void 0:c.id,mustChangePassword:(d=n.user)==null?void 0:d.must_change_password})});const o=qn(()=>{const c=[];return r.newPassword&&r.newPassword.length<8&&c.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&c.push("Les mots de passe ne correspondent pas"),c}),a=qn(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function l(){var c,d,p,v,m,x,E,T;if(!a.value){s.value="Veuillez corriger les erreurs avant de continuer";return}if(!((c=n.user)!=null&&c.id)){s.value="Erreur : utilisateur non identifié";return}i.value=!0,s.value="";try{console.log("Submitting password change..."),await n.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),e.push("/")}catch(D){console.error("Password change failed:",D),(p=(d=D.response)==null?void 0:d.data)!=null&&p.detail?s.value=D.response.data.detail:(m=(v=D.response)==null?void 0:v.data)!=null&&m.old_password?s.value=D.response.data.old_password[0]:(E=(x=D.response)==null?void 0:x.data)!=null&&E.password?s.value=D.response.data.password[0]:((T=D.response)==null?void 0:T.status)===401?(s.value="Session expirée, veuillez vous reconnecter",await n.logout(),e.push("/login")):s.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(c,d)=>(De(),Ne("div",NF,[C("div",BF,[d[12]||(d[12]=C("div",null,[C("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),C("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),C("form",{class:"mt-8 space-y-6",onSubmit:xl(l,["prevent"])},[C("div",RF,[C("div",null,[d[3]||(d[3]=C("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),C("div",FF,[On(C("input",{id:"old-password","onUpdate:modelValue":d[0]||(d[0]=p=>r.oldPassword=p),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[ui,r.oldPassword]])])]),C("div",null,[d[4]||(d[4]=C("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),C("div",jF,[On(C("input",{id:"new-password","onUpdate:modelValue":d[1]||(d[1]=p=>r.newPassword=p),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[ui,r.newPassword]])]),d[5]||(d[5]=C("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),C("div",null,[d[6]||(d[6]=C("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),C("div",zF,[On(C("input",{id:"confirm-password","onUpdate:modelValue":d[2]||(d[2]=p=>r.confirmPassword=p),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[ui,r.confirmPassword]])])])]),s.value?(De(),Ne("div",$F,[C("div",UF,[d[7]||(d[7]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",VF,[C("h3",HF,Tt(s.value),1)])])])):Wt("",!0),o.value.length>0?(De(),Ne("div",GF,[C("div",WF,[d[9]||(d[9]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),C("div",qF,[d[8]||(d[8]=C("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),C("div",YF,[C("ul",KF,[(De(!0),Ne(_n,null,Wn(o.value,(p,v)=>(De(),Ne("li",{key:v},Tt(p),1))),128))])])])])])):Wt("",!0),C("div",null,[C("button",{type:"submit",disabled:i.value||!a.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[C("span",XF,[i.value?(De(),Ne("svg",QF,d[11]||(d[11]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(De(),Ne("svg",JF,d[10]||(d[10]=[C("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),Ir(" "+Tt(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,ZF)])],32)])]))}}),t9="/static/frontend/assets/background.svg",n9={class:"min-h-screen overflow-auto relative py-12 sm:px-6 lg:px-8"},r9={class:"container mx-auto relative z-10"},i9={class:"sm:mx-auto sm:w-full sm:max-w-md"},s9={class:"bg-white/95 backdrop-blur-sm py-8 px-6 shadow-xl rounded-xl sm:px-10 border border-white/20"},o9={key:0,class:"rounded-md bg-red-50 p-4"},a9={class:"flex"},l9={class:"ml-3"},u9={class:"text-sm font-medium text-red-800"},c9={class:"mt-1"},h9={class:"mt-1 relative"},d9=["type"],f9={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},p9={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},g9={class:"flex items-center justify-between"},m9={class:"flex items-center"},v9={class:"text-sm"},y9=["disabled"],b9={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},_9={class:"mt-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},w9={class:"mt-12"},x9={class:"flex flex-wrap justify-center gap-2 mb-8"},L9=["onClick"],S9={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},C9={class:"flex items-center mb-4"},E9={class:"text-2xl mr-2"},M9={class:"text-xl font-semibold text-gray-900"},P9={class:"text-gray-600 text-sm"},k9={key:0,class:"flex justify-center mt-8 gap-2"},A9=["onClick"],F1=6,T9=_s({__name:"LoginView",setup(t){const e=Cm(),n=co(),r=_t(!1),i=_t(null),s=_t(!1),o=_t("Tous"),a=_t(1),l=wu({username:"",password:"",rememberMe:!1}),c=[{type:"Liniculteur",sector:"Agriculture",icon:"🌾",text:"En tant qu'entreprise, j'ai mis en place un sous-compte « agriculteur » permettant la géolocalisation des parcelles. Cela offre à nos salariés et prestataires une visibilité complète sur l'ensemble des parcelles et facilite leur accès. De plus, ils peuvent y ajouter des notes et des photos si nécessaire. Grâce aux trackers, nous renforçons également la sécurité de nos machines contre le vol."},{type:"Agro industriel",sector:"Industrie",icon:"🏭",text:"La gestion des comptes et sous-comptes est un atout majeur pour limiter, filtrer et contrôler l'accès de nos salariés aux différentes tâches."},{type:"Agence de voyage",sector:"Tourisme",icon:"✈️",text:"L'outil nous permet de créer gratuitement et sans limite des sous-comptes clients, d'établir des itinéraires personnalisés avec des points d'intérêt."},{type:"Industriel agroalimentaire",sector:"Industrie",icon:"🌱",text:"Nous disposons d'un compte entreprise avec des sous-comptes dédiés à chaque culture. Nos techniciens et agriculteurs partenaires peuvent ainsi ajouter des annotations et photo sur les parcelles. Grâce aux stations météo connectées, nous optimisons la gestion des tours d'irrigation par secteur géographique en fonction des précipitations."},{type:"Conseil municipal",sector:"Collectivité",icon:"🏛️",text:"Cette solution nous permet de gagner en efficacité dans la gestion des tâches à réaliser, en les géolocalisant et en offrant à nos employés communaux la possibilité d'ajouter des commentaires et des photos sur chaque tâche géoréférencée."},{type:"Location de matériel",sector:"Services",icon:"🚜",text:"Cette solution nous permet de géolocaliser notre flotte grâce à des trackers sans abonnement, avec uniquement un abonnement à la plateforme."},{type:"Agriculteur",sector:"Agriculture",icon:"👨‍🌾",text:"J'ai équipé tous mes canons d'enrouleurs de trackers et de caméras pour dissuader le vol de batteries."},{type:"Semencier",sector:"Agriculture",icon:"🌱",text:"Nous assurons la géolocalisation de l'ensemble de nos parcelles en France."},{type:"Concessionnaire irrigation",sector:"Services",icon:"💧",text:"Nous avons géolocalisé tous les forages de nos clients et ajouté en commentaire la procédure d'entrée, facilitant ainsi le travail de nos techniciens et agriculteurs lors des interventions."},{type:"Entreprise paysagiste",sector:"Services",icon:"🌳",text:"Nous géolocalisons tous nos chantiers et ajoutons une photo du chantier terminé en commentaire, servant de preuve en cas de litige."}],d=qn(()=>["Tous",...new Set(c.map(E=>E.sector))]),p=qn(()=>{let x=o.value==="Tous"?c:c.filter(D=>D.sector===o.value);const E=(a.value-1)*F1,T=E+F1;return x.slice(E,T)}),v=qn(()=>{const x=o.value==="Tous"?c:c.filter(E=>E.sector===o.value);return Math.ceil(x.length/F1)});Ds(async()=>{var x;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE);try{if((x=window.INITIAL_STATE)!=null&&x.isAuthenticated){console.log("User is authenticated, redirecting to home"),e.push("/");return}await n.restoreSession()&&(console.log("Session restored, redirecting to home"),e.push("/"))}catch(E){console.error("Error during initialization:",E),i.value=null}});async function m(){var x,E,T,D,k,B,W,Q,pe;r.value=!0,i.value=null;try{if(!l.username||!l.password){i.value="Veuillez remplir tous les champs";return}await n.login(l.username,l.password),(x=n.user)!=null&&x.must_change_password?e.push("/change-password"):e.push("/")}catch(fe){console.error("Login error:",fe),((E=fe==null?void 0:fe.response)==null?void 0:E.status)===500?i.value="Le service est temporairement indisponible. Veuillez réessayer dans quelques instants.":((T=fe==null?void 0:fe.response)==null?void 0:T.status)===401||((D=fe==null?void 0:fe.response)==null?void 0:D.status)===403?i.value="Identifiants incorrects. Veuillez vérifier votre nom d'utilisateur et mot de passe.":(B=(k=fe==null?void 0:fe.response)==null?void 0:k.data)!=null&&B.detail?i.value=fe.response.data.detail:(pe=(Q=(W=fe==null?void 0:fe.response)==null?void 0:W.data)==null?void 0:Q.non_field_errors)!=null&&pe[0]?i.value=fe.response.data.non_field_errors[0]:(fe==null?void 0:fe.message)==="Network Error"?i.value="Impossible de se connecter au serveur. Veuillez vérifier votre connexion internet.":i.value="Une erreur est survenue lors de la connexion. Veuillez réessayer."}finally{r.value=!1}}return(x,E)=>{const T=h_("router-link");return De(),Ne("div",n9,[C("div",{class:"fixed inset-0 z-0",style:Yl({backgroundImage:`url(${bn(t9)})`,backgroundSize:"400px",backgroundRepeat:"repeat",filter:"blur(1px) opacity(0.15)"})},null,4),E[16]||(E[16]=C("div",{class:"fixed inset-0 z-0 bg-gradient-to-br from-white/40 via-transparent to-primary-900/10"},null,-1)),C("div",r9,[C("div",i9,[C("div",s9,[E[12]||(E[12]=C("div",{class:"text-center mb-8"},[C("h2",{class:"text-3xl font-bold text-gray-900 mb-2"}," TagMap "),C("p",{class:"text-sm text-gray-600"}," Solution innovante de cartographie et gestion de projets ")],-1)),C("form",{class:"space-y-6",onSubmit:xl(m,["prevent"])},[i.value?(De(),Ne("div",o9,[C("div",a9,[E[4]||(E[4]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",l9,[C("h3",u9,Tt(i.value),1)])])])):Wt("",!0),C("div",null,[E[5]||(E[5]=C("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),C("div",c9,[On(C("input",{id:"username","onUpdate:modelValue":E[0]||(E[0]=D=>l.username=D),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[ui,l.username]])])]),C("div",null,[E[8]||(E[8]=C("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),C("div",h9,[On(C("input",{id:"password","onUpdate:modelValue":E[1]||(E[1]=D=>l.password=D),type:s.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,d9),[[__,l.password]]),C("button",{type:"button",onClick:E[2]||(E[2]=D=>s.value=!s.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[s.value?(De(),Ne("svg",f9,E[6]||(E[6]=[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(De(),Ne("svg",p9,E[7]||(E[7]=[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),C("div",g9,[C("div",m9,[On(C("input",{id:"remember-me","onUpdate:modelValue":E[3]||(E[3]=D=>l.rememberMe=D),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Ul,l.rememberMe]]),E[9]||(E[9]=C("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),C("div",v9,[Xr(T,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Wl(()=>E[10]||(E[10]=[Ir(" Mot de passe oublié ? ")])),_:1})])]),C("div",null,[C("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(De(),Ne("svg",b9,E[11]||(E[11]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Wt("",!0),Ir(" "+Tt(r.value?"Connexion en cours...":"Se connecter"),1)],8,y9)])],32)])]),C("div",_9,[E[14]||(E[14]=wl('<div class="mb-12 bg-white/90 backdrop-blur-sm p-8 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-6" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>💡</span><h3 class="text-xl font-bold text-gray-900" data-v-9ff7ee32>Équipements Connectés sans Abonnement</h3></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-v-9ff7ee32><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32>📍</div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Tracker GPS solaire</h4><p class="text-gray-600" data-v-9ff7ee32>Géolocalisez et sécurisez votre matériel</p></div></div><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32>🌤️</div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Station météo</h4><p class="text-gray-600" data-v-9ff7ee32>Optimisez vos décisions avec des données en temps réel</p></div></div></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8" data-v-9ff7ee32><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>👀📌</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Carte Interactive</h3></div><p class="text-gray-600" data-v-9ff7ee32>Imaginez... Une carte interactive où tout est sous contrôle ! Tout est centralisé, organisé et accessible en un clin d&#39;œil !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>👥💻🔄</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Collaboration en Temps Réel</h3></div><p class="text-gray-600" data-v-9ff7ee32>Travail d&#39;équipe simplifié : Collaborez en temps réel sur une interface ultra-intuitive. Vos équipes restent synchronisées et efficaces !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>🚜📸</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Cerveau Cartographique</h3></div><p class="text-gray-600" data-v-9ff7ee32>Un cerveau cartographique : Dessinez, annotez, planifiez, suivez !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>🔐🔑</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Accès Sécurisé</h3></div><p class="text-gray-600" data-v-9ff7ee32>Accès sécurisé et intelligent : Gérez les droits d&#39;accès de vos salariés et prestataires en un clic.</p></div></div>',2)),C("div",w9,[E[13]||(E[13]=C("h3",{class:"text-2xl font-bold text-center text-gray-900 mb-8"},"Ils utilisent TagMap",-1)),C("div",x9,[(De(!0),Ne(_n,null,Wn(d.value,D=>(De(),Ne("button",{key:D,onClick:k=>o.value=D,class:xi(["px-4 py-2 rounded-full text-sm font-medium transition-all duration-200",o.value===D?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},Tt(D),11,L9))),128))]),C("div",S9,[(De(!0),Ne(_n,null,Wn(p.value,D=>(De(),Ne("div",{key:D.type,class:"bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20 transition-all duration-300 hover:shadow-xl"},[C("div",C9,[C("span",E9,Tt(D.icon),1),C("span",M9,Tt(D.type),1)]),C("p",P9,Tt(D.text),1)]))),128))]),v.value>1?(De(),Ne("div",k9,[(De(!0),Ne(_n,null,Wn(v.value,D=>(De(),Ne("button",{key:D,onClick:k=>a.value=D,class:xi(["w-8 h-8 rounded-full text-sm font-medium transition-all duration-200",a.value===D?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},Tt(D),11,A9))),128))])):Wt("",!0)])]),E[15]||(E[15]=C("div",{class:"h-16"},null,-1))])])}}}),D9=Qc(T9,[["__scopeId","data-v-9ff7ee32"]]),I9="/static/frontend/assets/logo.svg";var tb={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(oa,function(n){var r="1.9.4";function i(u){var y,M,H,ue;for(M=1,H=arguments.length;M<H;M++){ue=arguments[M];for(y in ue)u[y]=ue[y]}return u}var s=Object.create||function(){function u(){}return function(y){return u.prototype=y,new u}}();function o(u,y){var M=Array.prototype.slice;if(u.bind)return u.bind.apply(u,M.call(arguments,1));var H=M.call(arguments,2);return function(){return u.apply(y,H.length?H.concat(M.call(arguments)):arguments)}}var a=0;function l(u){return"_leaflet_id"in u||(u._leaflet_id=++a),u._leaflet_id}function c(u,y,M){var H,ue,Me,at;return at=function(){H=!1,ue&&(Me.apply(M,ue),ue=!1)},Me=function(){H?ue=arguments:(u.apply(M,arguments),setTimeout(at,y),H=!0)},Me}function d(u,y,M){var H=y[1],ue=y[0],Me=H-ue;return u===H&&M?u:((u-ue)%Me+Me)%Me+ue}function p(){return!1}function v(u,y){if(y===!1)return u;var M=Math.pow(10,y===void 0?6:y);return Math.round(u*M)/M}function m(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function x(u){return m(u).split(/\s+/)}function E(u,y){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?s(u.options):{});for(var M in y)u.options[M]=y[M];return u.options}function T(u,y,M){var H=[];for(var ue in u)H.push(encodeURIComponent(M?ue.toUpperCase():ue)+"="+encodeURIComponent(u[ue]));return(!y||y.indexOf("?")===-1?"?":"&")+H.join("&")}var D=/\{ *([\w_ -]+) *\}/g;function k(u,y){return u.replace(D,function(M,H){var ue=y[H];if(ue===void 0)throw new Error("No value provided for variable "+M);return typeof ue=="function"&&(ue=ue(y)),ue})}var B=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function W(u,y){for(var M=0;M<u.length;M++)if(u[M]===y)return M;return-1}var Q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function pe(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var fe=0;function O(u){var y=+new Date,M=Math.max(0,16-(y-fe));return fe=y+M,window.setTimeout(u,M)}var U=window.requestAnimationFrame||pe("RequestAnimationFrame")||O,q=window.cancelAnimationFrame||pe("CancelAnimationFrame")||pe("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function R(u,y,M){if(M&&U===O)u.call(y);else return U.call(window,o(u,y))}function $(u){u&&q.call(window,u)}var X={__proto__:null,extend:i,create:s,bind:o,get lastId(){return a},stamp:l,throttle:c,wrapNum:d,falseFn:p,formatNum:v,trim:m,splitWords:x,setOptions:E,getParamString:T,template:k,isArray:B,indexOf:W,emptyImageUrl:Q,requestFn:U,cancelFn:q,requestAnimFrame:R,cancelAnimFrame:$};function K(){}K.extend=function(u){var y=function(){E(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},M=y.__super__=this.prototype,H=s(M);H.constructor=y,y.prototype=H;for(var ue in this)Object.prototype.hasOwnProperty.call(this,ue)&&ue!=="prototype"&&ue!=="__super__"&&(y[ue]=this[ue]);return u.statics&&i(y,u.statics),u.includes&&(F(u.includes),i.apply(null,[H].concat(u.includes))),i(H,u),delete H.statics,delete H.includes,H.options&&(H.options=M.options?s(M.options):{},i(H.options,u.options)),H._initHooks=[],H.callInitHooks=function(){if(!this._initHooksCalled){M.callInitHooks&&M.callInitHooks.call(this),this._initHooksCalled=!0;for(var Me=0,at=H._initHooks.length;Me<at;Me++)H._initHooks[Me].call(this)}},y},K.include=function(u){var y=this.prototype.options;return i(this.prototype,u),u.options&&(this.prototype.options=y,this.mergeOptions(u.options)),this},K.mergeOptions=function(u){return i(this.prototype.options,u),this},K.addInitHook=function(u){var y=Array.prototype.slice.call(arguments,1),M=typeof u=="function"?u:function(){this[u].apply(this,y)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(M),this};function F(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=B(u)?u:[u];for(var y=0;y<u.length;y++)u[y]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var N={on:function(u,y,M){if(typeof u=="object")for(var H in u)this._on(H,u[H],y);else{u=x(u);for(var ue=0,Me=u.length;ue<Me;ue++)this._on(u[ue],y,M)}return this},off:function(u,y,M){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var H in u)this._off(H,u[H],y);else{u=x(u);for(var ue=arguments.length===1,Me=0,at=u.length;Me<at;Me++)ue?this._off(u[Me]):this._off(u[Me],y,M)}return this},_on:function(u,y,M,H){if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}if(this._listens(u,y,M)===!1){M===this&&(M=void 0);var ue={fn:y,ctx:M};H&&(ue.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(ue)}},_off:function(u,y,M){var H,ue,Me;if(this._events&&(H=this._events[u],!!H)){if(arguments.length===1){if(this._firingCount)for(ue=0,Me=H.length;ue<Me;ue++)H[ue].fn=p;delete this._events[u];return}if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}var at=this._listens(u,y,M);if(at!==!1){var Mt=H[at];this._firingCount&&(Mt.fn=p,this._events[u]=H=H.slice()),H.splice(at,1)}}},fire:function(u,y,M){if(!this.listens(u,M))return this;var H=i({},y,{type:u,target:this,sourceTarget:y&&y.sourceTarget||this});if(this._events){var ue=this._events[u];if(ue){this._firingCount=this._firingCount+1||1;for(var Me=0,at=ue.length;Me<at;Me++){var Mt=ue[Me],zt=Mt.fn;Mt.once&&this.off(u,zt,Mt.ctx),zt.call(Mt.ctx||this,H)}this._firingCount--}}return M&&this._propagateEvent(H),this},listens:function(u,y,M,H){typeof u!="string"&&console.warn('"string" type argument expected');var ue=y;typeof y!="function"&&(H=!!y,ue=void 0,M=void 0);var Me=this._events&&this._events[u];if(Me&&Me.length&&this._listens(u,ue,M)!==!1)return!0;if(H){for(var at in this._eventParents)if(this._eventParents[at].listens(u,y,M,H))return!0}return!1},_listens:function(u,y,M){if(!this._events)return!1;var H=this._events[u]||[];if(!y)return!!H.length;M===this&&(M=void 0);for(var ue=0,Me=H.length;ue<Me;ue++)if(H[ue].fn===y&&H[ue].ctx===M)return ue;return!1},once:function(u,y,M){if(typeof u=="object")for(var H in u)this._on(H,u[H],y,!0);else{u=x(u);for(var ue=0,Me=u.length;ue<Me;ue++)this._on(u[ue],y,M,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[l(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[l(u)],this},_propagateEvent:function(u){for(var y in this._eventParents)this._eventParents[y].fire(u.type,i({layer:u.target,propagatedFrom:u.target},u),!0)}};N.addEventListener=N.on,N.removeEventListener=N.clearAllEventListeners=N.off,N.addOneTimeEventListener=N.once,N.fireEvent=N.fire,N.hasEventListeners=N.listens;var J=K.extend(N);function Y(u,y,M){this.x=M?Math.round(u):u,this.y=M?Math.round(y):y}var ye=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};Y.prototype={clone:function(){return new Y(this.x,this.y)},add:function(u){return this.clone()._add(Ce(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(Ce(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new Y(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new Y(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ye(this.x),this.y=ye(this.y),this},distanceTo:function(u){u=Ce(u);var y=u.x-this.x,M=u.y-this.y;return Math.sqrt(y*y+M*M)},equals:function(u){return u=Ce(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=Ce(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function Ce(u,y,M){return u instanceof Y?u:B(u)?new Y(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new Y(u.x,u.y):new Y(u,y,M)}function He(u,y){if(u)for(var M=y?[u,y]:u,H=0,ue=M.length;H<ue;H++)this.extend(M[H])}He.prototype={extend:function(u){var y,M;if(!u)return this;if(u instanceof Y||typeof u[0]=="number"||"x"in u)y=M=Ce(u);else if(u=j(u),y=u.min,M=u.max,!y||!M)return this;return!this.min&&!this.max?(this.min=y.clone(),this.max=M.clone()):(this.min.x=Math.min(y.x,this.min.x),this.max.x=Math.max(M.x,this.max.x),this.min.y=Math.min(y.y,this.min.y),this.max.y=Math.max(M.y,this.max.y)),this},getCenter:function(u){return Ce((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return Ce(this.min.x,this.max.y)},getTopRight:function(){return Ce(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var y,M;return typeof u[0]=="number"||u instanceof Y?u=Ce(u):u=j(u),u instanceof He?(y=u.min,M=u.max):y=M=u,y.x>=this.min.x&&M.x<=this.max.x&&y.y>=this.min.y&&M.y<=this.max.y},intersects:function(u){u=j(u);var y=this.min,M=this.max,H=u.min,ue=u.max,Me=ue.x>=y.x&&H.x<=M.x,at=ue.y>=y.y&&H.y<=M.y;return Me&&at},overlaps:function(u){u=j(u);var y=this.min,M=this.max,H=u.min,ue=u.max,Me=ue.x>y.x&&H.x<M.x,at=ue.y>y.y&&H.y<M.y;return Me&&at},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var y=this.min,M=this.max,H=Math.abs(y.x-M.x)*u,ue=Math.abs(y.y-M.y)*u;return j(Ce(y.x-H,y.y-ue),Ce(M.x+H,M.y+ue))},equals:function(u){return u?(u=j(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function j(u,y){return!u||u instanceof He?u:new He(u,y)}function Z(u,y){if(u)for(var M=y?[u,y]:u,H=0,ue=M.length;H<ue;H++)this.extend(M[H])}Z.prototype={extend:function(u){var y=this._southWest,M=this._northEast,H,ue;if(u instanceof de)H=u,ue=u;else if(u instanceof Z){if(H=u._southWest,ue=u._northEast,!H||!ue)return this}else return u?this.extend(ge(u)||ae(u)):this;return!y&&!M?(this._southWest=new de(H.lat,H.lng),this._northEast=new de(ue.lat,ue.lng)):(y.lat=Math.min(H.lat,y.lat),y.lng=Math.min(H.lng,y.lng),M.lat=Math.max(ue.lat,M.lat),M.lng=Math.max(ue.lng,M.lng)),this},pad:function(u){var y=this._southWest,M=this._northEast,H=Math.abs(y.lat-M.lat)*u,ue=Math.abs(y.lng-M.lng)*u;return new Z(new de(y.lat-H,y.lng-ue),new de(M.lat+H,M.lng+ue))},getCenter:function(){return new de((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new de(this.getNorth(),this.getWest())},getSouthEast:function(){return new de(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof de||"lat"in u?u=ge(u):u=ae(u);var y=this._southWest,M=this._northEast,H,ue;return u instanceof Z?(H=u.getSouthWest(),ue=u.getNorthEast()):H=ue=u,H.lat>=y.lat&&ue.lat<=M.lat&&H.lng>=y.lng&&ue.lng<=M.lng},intersects:function(u){u=ae(u);var y=this._southWest,M=this._northEast,H=u.getSouthWest(),ue=u.getNorthEast(),Me=ue.lat>=y.lat&&H.lat<=M.lat,at=ue.lng>=y.lng&&H.lng<=M.lng;return Me&&at},overlaps:function(u){u=ae(u);var y=this._southWest,M=this._northEast,H=u.getSouthWest(),ue=u.getNorthEast(),Me=ue.lat>y.lat&&H.lat<M.lat,at=ue.lng>y.lng&&H.lng<M.lng;return Me&&at},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,y){return u?(u=ae(u),this._southWest.equals(u.getSouthWest(),y)&&this._northEast.equals(u.getNorthEast(),y)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ae(u,y){return u instanceof Z?u:new Z(u,y)}function de(u,y,M){if(isNaN(u)||isNaN(y))throw new Error("Invalid LatLng object: ("+u+", "+y+")");this.lat=+u,this.lng=+y,M!==void 0&&(this.alt=+M)}de.prototype={equals:function(u,y){if(!u)return!1;u=ge(u);var M=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return M<=(y===void 0?1e-9:y)},toString:function(u){return"LatLng("+v(this.lat,u)+", "+v(this.lng,u)+")"},distanceTo:function(u){return oe.distance(this,ge(u))},wrap:function(){return oe.wrapLatLng(this)},toBounds:function(u){var y=180*u/40075017,M=y/Math.cos(Math.PI/180*this.lat);return ae([this.lat-y,this.lng-M],[this.lat+y,this.lng+M])},clone:function(){return new de(this.lat,this.lng,this.alt)}};function ge(u,y,M){return u instanceof de?u:B(u)&&typeof u[0]!="object"?u.length===3?new de(u[0],u[1],u[2]):u.length===2?new de(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new de(u.lat,"lng"in u?u.lng:u.lon,u.alt):y===void 0?null:new de(u,y,M)}var me={latLngToPoint:function(u,y){var M=this.projection.project(u),H=this.scale(y);return this.transformation._transform(M,H)},pointToLatLng:function(u,y){var M=this.scale(y),H=this.transformation.untransform(u,M);return this.projection.unproject(H)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var y=this.projection.bounds,M=this.scale(u),H=this.transformation.transform(y.min,M),ue=this.transformation.transform(y.max,M);return new He(H,ue)},infinite:!1,wrapLatLng:function(u){var y=this.wrapLng?d(u.lng,this.wrapLng,!0):u.lng,M=this.wrapLat?d(u.lat,this.wrapLat,!0):u.lat,H=u.alt;return new de(M,y,H)},wrapLatLngBounds:function(u){var y=u.getCenter(),M=this.wrapLatLng(y),H=y.lat-M.lat,ue=y.lng-M.lng;if(H===0&&ue===0)return u;var Me=u.getSouthWest(),at=u.getNorthEast(),Mt=new de(Me.lat-H,Me.lng-ue),zt=new de(at.lat-H,at.lng-ue);return new Z(Mt,zt)}},oe=i({},me,{wrapLng:[-180,180],R:6371e3,distance:function(u,y){var M=Math.PI/180,H=u.lat*M,ue=y.lat*M,Me=Math.sin((y.lat-u.lat)*M/2),at=Math.sin((y.lng-u.lng)*M/2),Mt=Me*Me+Math.cos(H)*Math.cos(ue)*at*at,zt=2*Math.atan2(Math.sqrt(Mt),Math.sqrt(1-Mt));return this.R*zt}}),re=6378137,Te={R:re,MAX_LATITUDE:85.0511287798,project:function(u){var y=Math.PI/180,M=this.MAX_LATITUDE,H=Math.max(Math.min(M,u.lat),-M),ue=Math.sin(H*y);return new Y(this.R*u.lng*y,this.R*Math.log((1+ue)/(1-ue))/2)},unproject:function(u){var y=180/Math.PI;return new de((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*y,u.x*y/this.R)},bounds:function(){var u=re*Math.PI;return new He([-u,-u],[u,u])}()};function Le(u,y,M,H){if(B(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=y,this._c=M,this._d=H}Le.prototype={transform:function(u,y){return this._transform(u.clone(),y)},_transform:function(u,y){return y=y||1,u.x=y*(this._a*u.x+this._b),u.y=y*(this._c*u.y+this._d),u},untransform:function(u,y){return y=y||1,new Y((u.x/y-this._b)/this._a,(u.y/y-this._d)/this._c)}};function qe(u,y,M,H){return new Le(u,y,M,H)}var se=i({},oe,{code:"EPSG:3857",projection:Te,transformation:function(){var u=.5/(Math.PI*Te.R);return qe(u,.5,-u,.5)}()}),le=i({},se,{code:"EPSG:900913"});function he(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function ee(u,y){var M="",H,ue,Me,at,Mt,zt;for(H=0,Me=u.length;H<Me;H++){for(Mt=u[H],ue=0,at=Mt.length;ue<at;ue++)zt=Mt[ue],M+=(ue?"L":"M")+zt.x+" "+zt.y;M+=y?Vt.svg?"z":"x":""}return M||"M0 0"}var be=document.documentElement.style,je="ActiveXObject"in window,We=je&&!document.addEventListener,Qe="msLaunchUri"in navigator&&!("documentMode"in document),Je=mn("webkit"),st=mn("android"),Pt=mn("android 2")||mn("android 3"),Bt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ht=st&&mn("Google")&&Bt<537&&!("AudioNode"in window),Jt=!!window.opera,fn=!Qe&&mn("chrome"),pn=mn("gecko")&&!Je&&!Jt&&!je,et=!fn&&mn("safari"),ot=mn("phantom"),rt="OTransition"in be,Ft=navigator.platform.indexOf("Win")===0,Xt=je&&"transition"in be,Mn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Pt,xn="MozPerspective"in be,Cn=!window.L_DISABLE_3D&&(Xt||Mn||xn)&&!rt&&!ot,Vn=typeof orientation<"u"||mn("mobile"),wn=Vn&&Je,sn=Vn&&Mn,hn=!window.PointerEvent&&window.MSPointerEvent,Qn=!!(window.PointerEvent||hn),ir="ontouchstart"in window||!!window.TouchEvent,dr=!window.L_NO_TOUCH&&(ir||Qn),Fn=Vn&&Jt,Mr=Vn&&pn,ns=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Pi=function(){var u=!1;try{var y=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",p,y),window.removeEventListener("testPassiveEventSupport",p,y)}catch{}return u}(),Xs=function(){return!!document.createElement("canvas").getContext}(),ds=!!(document.createElementNS&&he("svg").createSVGRect),Yn=!!ds&&function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),mt=!ds&&function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var y=u.firstChild;return y.style.behavior="url(#default#VML)",y&&typeof y.adj=="object"}catch{return!1}}(),tt=navigator.platform.indexOf("Mac")===0,Dt=navigator.platform.indexOf("Linux")===0;function mn(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var Vt={ie:je,ielt9:We,edge:Qe,webkit:Je,android:st,android23:Pt,androidStock:Ht,opera:Jt,chrome:fn,gecko:pn,safari:et,phantom:ot,opera12:rt,win:Ft,ie3d:Xt,webkit3d:Mn,gecko3d:xn,any3d:Cn,mobile:Vn,mobileWebkit:wn,mobileWebkit3d:sn,msPointer:hn,pointer:Qn,touch:dr,touchNative:ir,mobileOpera:Fn,mobileGecko:Mr,retina:ns,passiveEvents:Pi,canvas:Xs,svg:ds,vml:mt,inlineSvg:Yn,mac:tt,linux:Dt},jn=Vt.msPointer?"MSPointerDown":"pointerdown",vn=Vt.msPointer?"MSPointerMove":"pointermove",Ut=Vt.msPointer?"MSPointerUp":"pointerup",tn=Vt.msPointer?"MSPointerCancel":"pointercancel",Ln={touchstart:jn,touchmove:vn,touchend:Ut,touchcancel:tn},zn={touchstart:Ri,touchmove:Gi,touchend:Gi,touchcancel:Gi},dn={},Zt=!1;function $n(u,y,M){return y==="touchstart"&&ar(),zn[y]?(M=zn[y].bind(this,M),u.addEventListener(Ln[y],M,!1),M):(console.warn("wrong event specified:",y),p)}function yi(u,y,M){if(!Ln[y]){console.warn("wrong event specified:",y);return}u.removeEventListener(Ln[y],M,!1)}function or(u){dn[u.pointerId]=u}function di(u){dn[u.pointerId]&&(dn[u.pointerId]=u)}function ur(u){delete dn[u.pointerId]}function ar(){Zt||(document.addEventListener(jn,or,!0),document.addEventListener(vn,di,!0),document.addEventListener(Ut,ur,!0),document.addEventListener(tn,ur,!0),Zt=!0)}function Gi(u,y){if(y.pointerType!==(y.MSPOINTER_TYPE_MOUSE||"mouse")){y.touches=[];for(var M in dn)y.touches.push(dn[M]);y.changedTouches=[y],u(y)}}function Ri(u,y){y.MSPOINTER_TYPE_TOUCH&&y.pointerType===y.MSPOINTER_TYPE_TOUCH&&vr(y),Gi(u,y)}function Fi(u){var y={},M,H;for(H in u)M=u[H],y[H]=M&&M.bind?M.bind(u):M;return u=y,y.type="dblclick",y.detail=2,y.isTrusted=!1,y._simulated=!0,y}var rs=200;function fs(u,y){u.addEventListener("dblclick",y);var M=0,H;function ue(Me){if(Me.detail!==1){H=Me.detail;return}if(!(Me.pointerType==="mouse"||Me.sourceCapabilities&&!Me.sourceCapabilities.firesTouchEvents)){var at=sl(Me);if(!(at.some(function(zt){return zt instanceof HTMLLabelElement&&zt.attributes.for})&&!at.some(function(zt){return zt instanceof HTMLInputElement||zt instanceof HTMLSelectElement}))){var Mt=Date.now();Mt-M<=rs?(H++,H===2&&y(Fi(Me))):H=1,M=Mt}}}return u.addEventListener("click",ue),{dblclick:y,simDblclick:ue}}function ws(u,y){u.removeEventListener("dblclick",y.dblclick),u.removeEventListener("click",y.simDblclick)}var Is=Ll(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Os=Ll(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),cr=Os==="webkitTransition"||Os==="OTransition"?Os+"End":"transitionend";function gr(u){return typeof u=="string"?document.getElementById(u):u}function Si(u,y){var M=u.style[y]||u.currentStyle&&u.currentStyle[y];if((!M||M==="auto")&&document.defaultView){var H=document.defaultView.getComputedStyle(u,null);M=H?H[y]:null}return M==="auto"?null:M}function Pr(u,y,M){var H=document.createElement(u);return H.className=y||"",M&&M.appendChild(H),H}function mr(u){var y=u.parentNode;y&&y.removeChild(u)}function Qa(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function Sa(u){var y=u.parentNode;y&&y.lastChild!==u&&y.appendChild(u)}function Go(u){var y=u.parentNode;y&&y.firstChild!==u&&y.insertBefore(u,y.firstChild)}function Jl(u,y){if(u.classList!==void 0)return u.classList.contains(y);var M=Ns(u);return M.length>0&&new RegExp("(^|\\s)"+y+"(\\s|$)").test(M)}function br(u,y){if(u.classList!==void 0)for(var M=x(y),H=0,ue=M.length;H<ue;H++)u.classList.add(M[H]);else if(!Jl(u,y)){var Me=Ns(u);el(u,(Me?Me+" ":"")+y)}}function Kr(u,y){u.classList!==void 0?u.classList.remove(y):el(u,m((" "+Ns(u)+" ").replace(" "+y+" "," ")))}function el(u,y){u.className.baseVal===void 0?u.className=y:u.className.baseVal=y}function Ns(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function Bs(u,y){"opacity"in u.style?u.style.opacity=y:"filter"in u.style&&Wu(u,y)}function Wu(u,y){var M=!1,H="DXImageTransform.Microsoft.Alpha";try{M=u.filters.item(H)}catch{if(y===1)return}y=Math.round(y*100),M?(M.Enabled=y!==100,M.Opacity=y):u.style.filter+=" progid:"+H+"(opacity="+y+")"}function Ll(u){for(var y=document.documentElement.style,M=0;M<u.length;M++)if(u[M]in y)return u[M];return!1}function Ca(u,y,M){var H=y||new Y(0,0);u.style[Is]=(Vt.ie3d?"translate("+H.x+"px,"+H.y+"px)":"translate3d("+H.x+"px,"+H.y+"px,0)")+(M?" scale("+M+")":"")}function ji(u,y){u._leaflet_pos=y,Vt.any3d?Ca(u,y):(u.style.left=y.x+"px",u.style.top=y.y+"px")}function Wo(u){return u._leaflet_pos||new Y(0,0)}var tl,Ao,xu;if("onselectstart"in document)tl=function(){_r(window,"selectstart",vr)},Ao=function(){Wr(window,"selectstart",vr)};else{var nl=Ll(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);tl=function(){if(nl){var u=document.documentElement.style;xu=u[nl],u[nl]="none"}},Ao=function(){nl&&(document.documentElement.style[nl]=xu,xu=void 0)}}function qu(){_r(window,"dragstart",vr)}function qo(){Wr(window,"dragstart",vr)}var Ea,rl;function Ql(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(ps(),Ea=u,rl=u.style.outlineStyle,u.style.outlineStyle="none",_r(window,"keydown",ps))}function ps(){Ea&&(Ea.style.outlineStyle=rl,Ea=void 0,rl=void 0,Wr(window,"keydown",ps))}function Lc(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function Lu(u){var y=u.getBoundingClientRect();return{x:y.width/u.offsetWidth||1,y:y.height/u.offsetHeight||1,boundingClientRect:y}}var fr={__proto__:null,TRANSFORM:Is,TRANSITION:Os,TRANSITION_END:cr,get:gr,getStyle:Si,create:Pr,remove:mr,empty:Qa,toFront:Sa,toBack:Go,hasClass:Jl,addClass:br,removeClass:Kr,setClass:el,getClass:Ns,setOpacity:Bs,testProp:Ll,setTransform:Ca,setPosition:ji,getPosition:Wo,get disableTextSelection(){return tl},get enableTextSelection(){return Ao},disableImageDrag:qu,enableImageDrag:qo,preventOutline:Ql,restoreOutline:ps,getSizedParentNode:Lc,getScale:Lu};function _r(u,y,M,H){if(y&&typeof y=="object")for(var ue in y)Cl(u,ue,y[ue],M);else{y=x(y);for(var Me=0,at=y.length;Me<at;Me++)Cl(u,y[Me],M,H)}return this}var Yo="_leaflet_events";function Wr(u,y,M,H){if(arguments.length===1)Yu(u),delete u[Yo];else if(y&&typeof y=="object")for(var ue in y)Ko(u,ue,y[ue],M);else if(y=x(y),arguments.length===2)Yu(u,function(Mt){return W(y,Mt)!==-1});else for(var Me=0,at=y.length;Me<at;Me++)Ko(u,y[Me],M,H);return this}function Yu(u,y){for(var M in u[Yo]){var H=M.split(/\d/)[0];(!y||y(H))&&Ko(u,H,null,null,M)}}var Sl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Cl(u,y,M,H){var ue=y+l(M)+(H?"_"+l(H):"");if(u[Yo]&&u[Yo][ue])return this;var Me=function(Mt){return M.call(H||u,Mt||window.event)},at=Me;!Vt.touchNative&&Vt.pointer&&y.indexOf("touch")===0?Me=$n(u,y,Me):Vt.touch&&y==="dblclick"?Me=fs(u,Me):"addEventListener"in u?y==="touchstart"||y==="touchmove"||y==="wheel"||y==="mousewheel"?u.addEventListener(Sl[y]||y,Me,Vt.passiveEvents?{passive:!1}:!1):y==="mouseenter"||y==="mouseleave"?(Me=function(Mt){Mt=Mt||window.event,El(u,Mt)&&at(Mt)},u.addEventListener(Sl[y],Me,!1)):u.addEventListener(y,at,!1):u.attachEvent("on"+y,Me),u[Yo]=u[Yo]||{},u[Yo][ue]=Me}function Ko(u,y,M,H,ue){ue=ue||y+l(M)+(H?"_"+l(H):"");var Me=u[Yo]&&u[Yo][ue];if(!Me)return this;!Vt.touchNative&&Vt.pointer&&y.indexOf("touch")===0?yi(u,y,Me):Vt.touch&&y==="dblclick"?ws(u,Me):"removeEventListener"in u?u.removeEventListener(Sl[y]||y,Me,!1):u.detachEvent("on"+y,Me),u[Yo][ue]=null}function il(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function Ku(u){return Cl(u,"wheel",il),this}function eu(u){return _r(u,"mousedown touchstart dblclick contextmenu",il),u._leaflet_disable_click=!0,this}function vr(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function Or(u){return vr(u),il(u),this}function sl(u){if(u.composedPath)return u.composedPath();for(var y=[],M=u.target;M;)y.push(M),M=M.parentNode;return y}function Sc(u,y){if(!y)return new Y(u.clientX,u.clientY);var M=Lu(y),H=M.boundingClientRect;return new Y((u.clientX-H.left)/M.x-y.clientLeft,(u.clientY-H.top)/M.y-y.clientTop)}var tu=Vt.linux&&Vt.chrome?window.devicePixelRatio:Vt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Su(u){return Vt.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/tu:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function El(u,y){var M=y.relatedTarget;if(!M)return!0;try{for(;M&&M!==u;)M=M.parentNode}catch{return!1}return M!==u}var nu={__proto__:null,on:_r,off:Wr,stopPropagation:il,disableScrollPropagation:Ku,disableClickPropagation:eu,preventDefault:vr,stop:Or,getPropagationPath:sl,getMousePosition:Sc,getWheelDelta:Su,isExternalTarget:El,addListener:_r,removeListener:Wr},Cu=J.extend({run:function(u,y,M,H){this.stop(),this._el=u,this._inProgress=!0,this._duration=M||.25,this._easeOutPower=1/Math.max(H||.5,.2),this._startPos=Wo(u),this._offset=y.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=R(this._animate,this),this._step()},_step:function(u){var y=+new Date-this._startTime,M=this._duration*1e3;y<M?this._runFrame(this._easeOut(y/M),u):(this._runFrame(1),this._complete())},_runFrame:function(u,y){var M=this._startPos.add(this._offset.multiplyBy(u));y&&M._round(),ji(this._el,M),this.fire("step")},_complete:function(){$(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),Fr=J.extend({options:{crs:se,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,y){y=E(this,y),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),y.maxBounds&&this.setMaxBounds(y.maxBounds),y.zoom!==void 0&&(this._zoom=this._limitZoom(y.zoom)),y.center&&y.zoom!==void 0&&this.setView(ge(y.center),y.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Os&&Vt.any3d&&!Vt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),_r(this._proxy,cr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,y,M){if(y=y===void 0?this._zoom:this._limitZoom(y),u=this._limitCenter(ge(u),y,this.options.maxBounds),M=M||{},this._stop(),this._loaded&&!M.reset&&M!==!0){M.animate!==void 0&&(M.zoom=i({animate:M.animate},M.zoom),M.pan=i({animate:M.animate,duration:M.duration},M.pan));var H=this._zoom!==y?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,y,M.zoom):this._tryAnimatedPan(u,M.pan);if(H)return clearTimeout(this._sizeTimer),this}return this._resetView(u,y,M.pan&&M.pan.noMoveStart),this},setZoom:function(u,y){return this._loaded?this.setView(this.getCenter(),u,{zoom:y}):(this._zoom=u,this)},zoomIn:function(u,y){return u=u||(Vt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,y)},zoomOut:function(u,y){return u=u||(Vt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,y)},setZoomAround:function(u,y,M){var H=this.getZoomScale(y),ue=this.getSize().divideBy(2),Me=u instanceof Y?u:this.latLngToContainerPoint(u),at=Me.subtract(ue).multiplyBy(1-1/H),Mt=this.containerPointToLatLng(ue.add(at));return this.setView(Mt,y,{zoom:M})},_getBoundsCenterZoom:function(u,y){y=y||{},u=u.getBounds?u.getBounds():ae(u);var M=Ce(y.paddingTopLeft||y.padding||[0,0]),H=Ce(y.paddingBottomRight||y.padding||[0,0]),ue=this.getBoundsZoom(u,!1,M.add(H));if(ue=typeof y.maxZoom=="number"?Math.min(y.maxZoom,ue):ue,ue===1/0)return{center:u.getCenter(),zoom:ue};var Me=H.subtract(M).divideBy(2),at=this.project(u.getSouthWest(),ue),Mt=this.project(u.getNorthEast(),ue),zt=this.unproject(at.add(Mt).divideBy(2).add(Me),ue);return{center:zt,zoom:ue}},fitBounds:function(u,y){if(u=ae(u),!u.isValid())throw new Error("Bounds are not valid.");var M=this._getBoundsCenterZoom(u,y);return this.setView(M.center,M.zoom,y)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,y){return this.setView(u,this._zoom,{pan:y})},panBy:function(u,y){if(u=Ce(u).round(),y=y||{},!u.x&&!u.y)return this.fire("moveend");if(y.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Cu,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),y.noMoveStart||this.fire("movestart"),y.animate!==!1){br(this._mapPane,"leaflet-pan-anim");var M=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,M,y.duration||.25,y.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,y,M){if(M=M||{},M.animate===!1||!Vt.any3d)return this.setView(u,y,M);this._stop();var H=this.project(this.getCenter()),ue=this.project(u),Me=this.getSize(),at=this._zoom;u=ge(u),y=y===void 0?at:y;var Mt=Math.max(Me.x,Me.y),zt=Mt*this.getZoomScale(at,y),on=ue.distanceTo(H)||1,Dn=1.42,Kn=Dn*Dn;function kr(Qr){var Hs=Qr?-1:1,Oe=Qr?zt:Mt,yo=zt*zt-Mt*Mt+Hs*Kn*Kn*on*on,Ju=2*Oe*Kn*on,Ps=yo/Ju,Dr=Math.sqrt(Ps*Ps+1)-Ps,Bh=Dr<1e-9?-18:Math.log(Dr);return Bh}function as(Qr){return(Math.exp(Qr)-Math.exp(-Qr))/2}function zi(Qr){return(Math.exp(Qr)+Math.exp(-Qr))/2}function Ms(Qr){return as(Qr)/zi(Qr)}var Di=kr(0);function vo(Qr){return Mt*(zi(Di)/zi(Di+Dn*Qr))}function nh(Qr){return Mt*(zi(Di)*Ms(Di+Dn*Qr)-as(Di))/Kn}function va(Qr){return 1-Math.pow(1-Qr,1.5)}var ta=Date.now(),zo=(kr(1)-Di)/Dn,Cd=M.duration?1e3*M.duration:1e3*zo*.8;function Pu(){var Qr=(Date.now()-ta)/Cd,Hs=va(Qr)*zo;Qr<=1?(this._flyToFrame=R(Pu,this),this._move(this.unproject(H.add(ue.subtract(H).multiplyBy(nh(Hs)/on)),at),this.getScaleZoom(Mt/vo(Hs),at),{flyTo:!0})):this._move(u,y)._moveEnd(!0)}return this._moveStart(!0,M.noMoveStart),Pu.call(this),this},flyToBounds:function(u,y){var M=this._getBoundsCenterZoom(u,y);return this.flyTo(M.center,M.zoom,y)},setMaxBounds:function(u){return u=ae(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var y=this.options.minZoom;return this.options.minZoom=u,this._loaded&&y!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var y=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&y!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,y){this._enforcingBounds=!0;var M=this.getCenter(),H=this._limitCenter(M,this._zoom,ae(u));return M.equals(H)||this.panTo(H,y),this._enforcingBounds=!1,this},panInside:function(u,y){y=y||{};var M=Ce(y.paddingTopLeft||y.padding||[0,0]),H=Ce(y.paddingBottomRight||y.padding||[0,0]),ue=this.project(this.getCenter()),Me=this.project(u),at=this.getPixelBounds(),Mt=j([at.min.add(M),at.max.subtract(H)]),zt=Mt.getSize();if(!Mt.contains(Me)){this._enforcingBounds=!0;var on=Me.subtract(Mt.getCenter()),Dn=Mt.extend(Me).getSize().subtract(zt);ue.x+=on.x<0?-Dn.x:Dn.x,ue.y+=on.y<0?-Dn.y:Dn.y,this.panTo(this.unproject(ue),y),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=i({animate:!1,pan:!0},u===!0?{animate:!0}:u);var y=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var M=this.getSize(),H=y.divideBy(2).round(),ue=M.divideBy(2).round(),Me=H.subtract(ue);return!Me.x&&!Me.y?this:(u.animate&&u.pan?this.panBy(Me):(u.pan&&this._rawPanBy(Me),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:y,newSize:M}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=i({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var y=o(this._handleGeolocationResponse,this),M=o(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(y,M,u):navigator.geolocation.getCurrentPosition(y,M,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var y=u.code,M=u.message||(y===1?"permission denied":y===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:y,message:"Geolocation error: "+M+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var y=u.coords.latitude,M=u.coords.longitude,H=new de(y,M),ue=H.toBounds(u.coords.accuracy*2),Me=this._locateOptions;if(Me.setView){var at=this.getBoundsZoom(ue);this.setView(H,Me.maxZoom?Math.min(at,Me.maxZoom):at)}var Mt={latlng:H,bounds:ue,timestamp:u.timestamp};for(var zt in u.coords)typeof u.coords[zt]=="number"&&(Mt[zt]=u.coords[zt]);this.fire("locationfound",Mt)}},addHandler:function(u,y){if(!y)return this;var M=this[u]=new y(this);return this._handlers.push(M),this.options[u]&&M.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),mr(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&($(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)mr(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,y){var M="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),H=Pr("div",M,y||this._mapPane);return u&&(this._panes[u]=H),H},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),y=this.unproject(u.getBottomLeft()),M=this.unproject(u.getTopRight());return new Z(y,M)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,y,M){u=ae(u),M=Ce(M||[0,0]);var H=this.getZoom()||0,ue=this.getMinZoom(),Me=this.getMaxZoom(),at=u.getNorthWest(),Mt=u.getSouthEast(),zt=this.getSize().subtract(M),on=j(this.project(Mt,H),this.project(at,H)).getSize(),Dn=Vt.any3d?this.options.zoomSnap:1,Kn=zt.x/on.x,kr=zt.y/on.y,as=y?Math.max(Kn,kr):Math.min(Kn,kr);return H=this.getScaleZoom(as,H),Dn&&(H=Math.round(H/(Dn/100))*(Dn/100),H=y?Math.ceil(H/Dn)*Dn:Math.floor(H/Dn)*Dn),Math.max(ue,Math.min(Me,H))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Y(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,y){var M=this._getTopLeftPoint(u,y);return new He(M,M.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,y){var M=this.options.crs;return y=y===void 0?this._zoom:y,M.scale(u)/M.scale(y)},getScaleZoom:function(u,y){var M=this.options.crs;y=y===void 0?this._zoom:y;var H=M.zoom(u*M.scale(y));return isNaN(H)?1/0:H},project:function(u,y){return y=y===void 0?this._zoom:y,this.options.crs.latLngToPoint(ge(u),y)},unproject:function(u,y){return y=y===void 0?this._zoom:y,this.options.crs.pointToLatLng(Ce(u),y)},layerPointToLatLng:function(u){var y=Ce(u).add(this.getPixelOrigin());return this.unproject(y)},latLngToLayerPoint:function(u){var y=this.project(ge(u))._round();return y._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(ge(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(ae(u))},distance:function(u,y){return this.options.crs.distance(ge(u),ge(y))},containerPointToLayerPoint:function(u){return Ce(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return Ce(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var y=this.containerPointToLayerPoint(Ce(u));return this.layerPointToLatLng(y)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ge(u)))},mouseEventToContainerPoint:function(u){return Sc(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var y=this._container=gr(u);if(y){if(y._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");_r(y,"scroll",this._onScroll,this),this._containerId=l(y)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&Vt.any3d,br(u,"leaflet-container"+(Vt.touch?" leaflet-touch":"")+(Vt.retina?" leaflet-retina":"")+(Vt.ielt9?" leaflet-oldie":"")+(Vt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var y=Si(u,"position");y!=="absolute"&&y!=="relative"&&y!=="fixed"&&y!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ji(this._mapPane,new Y(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(br(u.markerPane,"leaflet-zoom-hide"),br(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,y,M){ji(this._mapPane,new Y(0,0));var H=!this._loaded;this._loaded=!0,y=this._limitZoom(y),this.fire("viewprereset");var ue=this._zoom!==y;this._moveStart(ue,M)._move(u,y)._moveEnd(ue),this.fire("viewreset"),H&&this.fire("load")},_moveStart:function(u,y){return u&&this.fire("zoomstart"),y||this.fire("movestart"),this},_move:function(u,y,M,H){y===void 0&&(y=this._zoom);var ue=this._zoom!==y;return this._zoom=y,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),H?M&&M.pinch&&this.fire("zoom",M):((ue||M&&M.pinch)&&this.fire("zoom",M),this.fire("move",M)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return $(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){ji(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[l(this._container)]=this;var y=u?Wr:_r;y(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&y(window,"resize",this._onResize,this),Vt.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){$(this._resizeRequest),this._resizeRequest=R(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,y){for(var M=[],H,ue=y==="mouseout"||y==="mouseover",Me=u.target||u.srcElement,at=!1;Me;){if(H=this._targets[l(Me)],H&&(y==="click"||y==="preclick")&&this._draggableMoved(H)){at=!0;break}if(H&&H.listens(y,!0)&&(ue&&!El(Me,u)||(M.push(H),ue))||Me===this._container)break;Me=Me.parentNode}return!M.length&&!at&&!ue&&this.listens(y,!0)&&(M=[this]),M},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var y=u.target||u.srcElement;if(!(!this._loaded||y._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(y))){var M=u.type;M==="mousedown"&&Ql(y),this._fireDOMEvent(u,M)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,y,M){if(u.type==="click"){var H=i({},u);H.type="preclick",this._fireDOMEvent(H,H.type,M)}var ue=this._findEventTargets(u,y);if(M){for(var Me=[],at=0;at<M.length;at++)M[at].listens(y,!0)&&Me.push(M[at]);ue=Me.concat(ue)}if(ue.length){y==="contextmenu"&&vr(u);var Mt=ue[0],zt={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var on=Mt.getLatLng&&(!Mt._radius||Mt._radius<=10);zt.containerPoint=on?this.latLngToContainerPoint(Mt.getLatLng()):this.mouseEventToContainerPoint(u),zt.layerPoint=this.containerPointToLayerPoint(zt.containerPoint),zt.latlng=on?Mt.getLatLng():this.layerPointToLatLng(zt.layerPoint)}for(at=0;at<ue.length;at++)if(ue[at].fire(y,zt,!0),zt.originalEvent._stopped||ue[at].options.bubblingMouseEvents===!1&&W(this._mouseEvents,y)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,y=this._handlers.length;u<y;u++)this._handlers[u].disable()},whenReady:function(u,y){return this._loaded?u.call(y||this,{target:this}):this.on("load",u,y),this},_getMapPanePos:function(){return Wo(this._mapPane)||new Y(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,y){var M=u&&y!==void 0?this._getNewPixelOrigin(u,y):this.getPixelOrigin();return M.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,y){var M=this.getSize()._divideBy(2);return this.project(u,y)._subtract(M)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,y,M){var H=this._getNewPixelOrigin(M,y);return this.project(u,y)._subtract(H)},_latLngBoundsToNewLayerBounds:function(u,y,M){var H=this._getNewPixelOrigin(M,y);return j([this.project(u.getSouthWest(),y)._subtract(H),this.project(u.getNorthWest(),y)._subtract(H),this.project(u.getSouthEast(),y)._subtract(H),this.project(u.getNorthEast(),y)._subtract(H)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,y,M){if(!M)return u;var H=this.project(u,y),ue=this.getSize().divideBy(2),Me=new He(H.subtract(ue),H.add(ue)),at=this._getBoundsOffset(Me,M,y);return Math.abs(at.x)<=1&&Math.abs(at.y)<=1?u:this.unproject(H.add(at),y)},_limitOffset:function(u,y){if(!y)return u;var M=this.getPixelBounds(),H=new He(M.min.add(u),M.max.add(u));return u.add(this._getBoundsOffset(H,y))},_getBoundsOffset:function(u,y,M){var H=j(this.project(y.getNorthEast(),M),this.project(y.getSouthWest(),M)),ue=H.min.subtract(u.min),Me=H.max.subtract(u.max),at=this._rebound(ue.x,-Me.x),Mt=this._rebound(ue.y,-Me.y);return new Y(at,Mt)},_rebound:function(u,y){return u+y>0?Math.round(u-y)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(y))},_limitZoom:function(u){var y=this.getMinZoom(),M=this.getMaxZoom(),H=Vt.any3d?this.options.zoomSnap:1;return H&&(u=Math.round(u/H)*H),Math.max(y,Math.min(M,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Kr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,y){var M=this._getCenterOffset(u)._trunc();return(y&&y.animate)!==!0&&!this.getSize().contains(M)?!1:(this.panBy(M,y),!0)},_createAnimProxy:function(){var u=this._proxy=Pr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(y){var M=Is,H=this._proxy.style[M];Ca(this._proxy,this.project(y.center,y.zoom),this.getZoomScale(y.zoom,1)),H===this._proxy.style[M]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){mr(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),y=this.getZoom();Ca(this._proxy,this.project(u,y),this.getZoomScale(y,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,y,M){if(this._animatingZoom)return!0;if(M=M||{},!this._zoomAnimated||M.animate===!1||this._nothingToAnimate()||Math.abs(y-this._zoom)>this.options.zoomAnimationThreshold)return!1;var H=this.getZoomScale(y),ue=this._getCenterOffset(u)._divideBy(1-1/H);return M.animate!==!0&&!this.getSize().contains(ue)?!1:(R(function(){this._moveStart(!0,M.noMoveStart||!1)._animateZoom(u,y,!0)},this),!0)},_animateZoom:function(u,y,M,H){this._mapPane&&(M&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=y,br(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:y,noUpdate:H}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Kr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Wi(u,y){return new Fr(u,y)}var nr=K.extend({options:{position:"topright"},initialize:function(u){E(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var y=this._map;return y&&y.removeControl(this),this.options.position=u,y&&y.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var y=this._container=this.onAdd(u),M=this.getPosition(),H=u._controlCorners[M];return br(y,"leaflet-control"),M.indexOf("bottom")!==-1?H.insertBefore(y,H.firstChild):H.appendChild(y),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(mr(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),qi=function(u){return new nr(u)};Fr.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},y="leaflet-",M=this._controlContainer=Pr("div",y+"control-container",this._container);function H(ue,Me){var at=y+ue+" "+y+Me;u[ue+Me]=Pr("div",at,M)}H("top","left"),H("top","right"),H("bottom","left"),H("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)mr(this._controlCorners[u]);mr(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ml=nr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,y,M,H){return M<H?-1:H<M?1:0}},initialize:function(u,y,M){E(this,M),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var H in u)this._addLayer(u[H],H);for(H in y)this._addLayer(y[H],H,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return nr.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,y){return this._addLayer(u,y),this._map?this._update():this},addOverlay:function(u,y){return this._addLayer(u,y,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var y=this._getLayer(l(u));return y&&this._layers.splice(this._layers.indexOf(y),1),this._map?this._update():this},expand:function(){br(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(br(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):Kr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Kr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",y=this._container=Pr("div",u),M=this.options.collapsed;y.setAttribute("aria-haspopup",!0),eu(y),Ku(y);var H=this._section=Pr("section",u+"-list");M&&(this._map.on("click",this.collapse,this),_r(y,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ue=this._layersLink=Pr("a",u+"-toggle",y);ue.href="#",ue.title="Layers",ue.setAttribute("role","button"),_r(ue,{keydown:function(Me){Me.keyCode===13&&this._expandSafely()},click:function(Me){vr(Me),this._expandSafely()}},this),M||this.expand(),this._baseLayersList=Pr("div",u+"-base",H),this._separator=Pr("div",u+"-separator",H),this._overlaysList=Pr("div",u+"-overlays",H),y.appendChild(H)},_getLayer:function(u){for(var y=0;y<this._layers.length;y++)if(this._layers[y]&&l(this._layers[y].layer)===u)return this._layers[y]},_addLayer:function(u,y,M){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:y,overlay:M}),this.options.sortLayers&&this._layers.sort(o(function(H,ue){return this.options.sortFunction(H.layer,ue.layer,H.name,ue.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Qa(this._baseLayersList),Qa(this._overlaysList),this._layerControlInputs=[];var u,y,M,H,ue=0;for(M=0;M<this._layers.length;M++)H=this._layers[M],this._addItem(H),y=y||H.overlay,u=u||!H.overlay,ue+=H.overlay?0:1;return this.options.hideSingleBase&&(u=u&&ue>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=y&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var y=this._getLayer(l(u.target)),M=y.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;M&&this._map.fire(M,y)},_createRadioElement:function(u,y){var M='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(y?' checked="checked"':"")+"/>",H=document.createElement("div");return H.innerHTML=M,H.firstChild},_addItem:function(u){var y=document.createElement("label"),M=this._map.hasLayer(u.layer),H;u.overlay?(H=document.createElement("input"),H.type="checkbox",H.className="leaflet-control-layers-selector",H.defaultChecked=M):H=this._createRadioElement("leaflet-base-layers_"+l(this),M),this._layerControlInputs.push(H),H.layerId=l(u.layer),_r(H,"click",this._onInputClick,this);var ue=document.createElement("span");ue.innerHTML=" "+u.name;var Me=document.createElement("span");y.appendChild(Me),Me.appendChild(H),Me.appendChild(ue);var at=u.overlay?this._overlaysList:this._baseLayersList;return at.appendChild(y),this._checkDisabledLayers(),y},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,y,M,H=[],ue=[];this._handlingClick=!0;for(var Me=u.length-1;Me>=0;Me--)y=u[Me],M=this._getLayer(y.layerId).layer,y.checked?H.push(M):y.checked||ue.push(M);for(Me=0;Me<ue.length;Me++)this._map.hasLayer(ue[Me])&&this._map.removeLayer(ue[Me]);for(Me=0;Me<H.length;Me++)this._map.hasLayer(H[Me])||this._map.addLayer(H[Me]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,y,M,H=this._map.getZoom(),ue=u.length-1;ue>=0;ue--)y=u[ue],M=this._getLayer(y.layerId).layer,y.disabled=M.options.minZoom!==void 0&&H<M.options.minZoom||M.options.maxZoom!==void 0&&H>M.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,_r(u,"click",vr),this.expand();var y=this;setTimeout(function(){Wr(u,"click",vr),y._preventClick=!1})}}),Ma=function(u,y,M){return new Ml(u,y,M)},ki=nr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var y="leaflet-control-zoom",M=Pr("div",y+" leaflet-bar"),H=this.options;return this._zoomInButton=this._createButton(H.zoomInText,H.zoomInTitle,y+"-in",M,this._zoomIn),this._zoomOutButton=this._createButton(H.zoomOutText,H.zoomOutTitle,y+"-out",M,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),M},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,y,M,H,ue){var Me=Pr("a",M,H);return Me.innerHTML=u,Me.href="#",Me.title=y,Me.setAttribute("role","button"),Me.setAttribute("aria-label",y),eu(Me),_r(Me,"click",Or),_r(Me,"click",ue,this),_r(Me,"click",this._refocusOnMap,this),Me},_updateDisabled:function(){var u=this._map,y="leaflet-disabled";Kr(this._zoomInButton,y),Kr(this._zoomOutButton,y),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(br(this._zoomOutButton,y),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(br(this._zoomInButton,y),this._zoomInButton.setAttribute("aria-disabled","true"))}});Fr.mergeOptions({zoomControl:!0}),Fr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ki,this.addControl(this.zoomControl))});var Eu=function(u){return new ki(u)},la=nr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var y="leaflet-control-scale",M=Pr("div",y),H=this.options;return this._addScales(H,y+"-line",M),u.on(H.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),M},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,y,M){u.metric&&(this._mScale=Pr("div",y,M)),u.imperial&&(this._iScale=Pr("div",y,M))},_update:function(){var u=this._map,y=u.getSize().y/2,M=u.distance(u.containerPointToLatLng([0,y]),u.containerPointToLatLng([this.options.maxWidth,y]));this._updateScales(M)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var y=this._getRoundNum(u),M=y<1e3?y+" m":y/1e3+" km";this._updateScale(this._mScale,M,y/u)},_updateImperial:function(u){var y=u*3.2808399,M,H,ue;y>5280?(M=y/5280,H=this._getRoundNum(M),this._updateScale(this._iScale,H+" mi",H/M)):(ue=this._getRoundNum(y),this._updateScale(this._iScale,ue+" ft",ue/y))},_updateScale:function(u,y,M){u.style.width=Math.round(this.options.maxWidth*M)+"px",u.innerHTML=y},_getRoundNum:function(u){var y=Math.pow(10,(Math.floor(u)+"").length-1),M=u/y;return M=M>=10?10:M>=5?5:M>=3?3:M>=2?2:1,y*M}}),ru=function(u){return new la(u)},iu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Fo=nr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Vt.inlineSvg?iu+" ":"")+"Leaflet</a>"},initialize:function(u){E(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=Pr("div","leaflet-control-attribution"),eu(this._container);for(var y in u._layers)u._layers[y].getAttribution&&this.addAttribution(u._layers[y].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var y in this._attributions)this._attributions[y]&&u.push(y);var M=[];this.options.prefix&&M.push(this.options.prefix),u.length&&M.push(u.join(", ")),this._container.innerHTML=M.join(' <span aria-hidden="true">|</span> ')}}});Fr.mergeOptions({attributionControl:!0}),Fr.addInitHook(function(){this.options.attributionControl&&new Fo().addTo(this)});var su=function(u){return new Fo(u)};nr.Layers=Ml,nr.Zoom=ki,nr.Scale=la,nr.Attribution=Fo,qi.layers=Ma,qi.zoom=Eu,qi.scale=ru,qi.attribution=su;var ri=K.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ri.addTo=function(u,y){return u.addHandler(y,this),this};var Cc={Events:N},xs=Vt.touch?"touchstart mousedown":"mousedown",Zo=J.extend({options:{clickTolerance:3},initialize:function(u,y,M,H){E(this,H),this._element=u,this._dragStartTarget=y||u,this._preventOutline=M},enable:function(){this._enabled||(_r(this._dragStartTarget,xs,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Zo._dragging===this&&this.finishDrag(!0),Wr(this._dragStartTarget,xs,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!Jl(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){Zo._dragging===this&&this.finishDrag();return}if(!(Zo._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(Zo._dragging=this,this._preventOutline&&Ql(this._element),qu(),tl(),!this._moving)){this.fire("down");var y=u.touches?u.touches[0]:u,M=Lc(this._element);this._startPoint=new Y(y.clientX,y.clientY),this._startPos=Wo(this._element),this._parentScale=Lu(M);var H=u.type==="mousedown";_r(document,H?"mousemove":"touchmove",this._onMove,this),_r(document,H?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var y=u.touches&&u.touches.length===1?u.touches[0]:u,M=new Y(y.clientX,y.clientY)._subtract(this._startPoint);!M.x&&!M.y||Math.abs(M.x)+Math.abs(M.y)<this.options.clickTolerance||(M.x/=this._parentScale.x,M.y/=this._parentScale.y,vr(u),this._moved||(this.fire("dragstart"),this._moved=!0,br(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),br(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(M),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),ji(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){Kr(document.body,"leaflet-dragging"),this._lastTarget&&(Kr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Wr(document,"mousemove touchmove",this._onMove,this),Wr(document,"mouseup touchend touchcancel",this._onUp,this),qo(),Ao();var y=this._moved&&this._moving;this._moving=!1,Zo._dragging=!1,y&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function ou(u,y,M){var H,ue=[1,4,2,8],Me,at,Mt,zt,on,Dn,Kn,kr;for(Me=0,Dn=u.length;Me<Dn;Me++)u[Me]._code=jt(u[Me],y);for(Mt=0;Mt<4;Mt++){for(Kn=ue[Mt],H=[],Me=0,Dn=u.length,at=Dn-1;Me<Dn;at=Me++)zt=u[Me],on=u[at],zt._code&Kn?on._code&Kn||(kr=Lt(on,zt,Kn,y,M),kr._code=jt(kr,y),H.push(kr)):(on._code&Kn&&(kr=Lt(on,zt,Kn,y,M),kr._code=jt(kr,y),H.push(kr)),H.push(zt));u=H}return u}function Xo(u,y){var M,H,ue,Me,at,Mt,zt,on,Dn;if(!u||u.length===0)throw new Error("latlngs not passed");Nn(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var Kn=ge([0,0]),kr=ae(u),as=kr.getNorthWest().distanceTo(kr.getSouthWest())*kr.getNorthEast().distanceTo(kr.getNorthWest());as<1700&&(Kn=Pl(u));var zi=u.length,Ms=[];for(M=0;M<zi;M++){var Di=ge(u[M]);Ms.push(y.project(ge([Di.lat-Kn.lat,Di.lng-Kn.lng])))}for(Mt=zt=on=0,M=0,H=zi-1;M<zi;H=M++)ue=Ms[M],Me=Ms[H],at=ue.y*Me.x-Me.y*ue.x,zt+=(ue.x+Me.x)*at,on+=(ue.y+Me.y)*at,Mt+=at*3;Mt===0?Dn=Ms[0]:Dn=[zt/Mt,on/Mt];var vo=y.unproject(Ce(Dn));return ge([vo.lat+Kn.lat,vo.lng+Kn.lng])}function Pl(u){for(var y=0,M=0,H=0,ue=0;ue<u.length;ue++){var Me=ge(u[ue]);y+=Me.lat,M+=Me.lng,H++}return ge([y/H,M/H])}var kl={__proto__:null,clipPolygon:ou,polygonCenter:Xo,centroid:Pl};function ii(u,y){if(!y||!u.length)return u.slice();var M=y*y;return u=we(u,M),u=Yi(u,M),u}function To(u,y,M){return Math.sqrt(Tn(u,y,M,!0))}function Pa(u,y,M){return Tn(u,y,M)}function Yi(u,y){var M=u.length,H=typeof Uint8Array<"u"?Uint8Array:Array,ue=new H(M);ue[0]=ue[M-1]=1,z(u,ue,y,0,M-1);var Me,at=[];for(Me=0;Me<M;Me++)ue[Me]&&at.push(u[Me]);return at}function z(u,y,M,H,ue){var Me=0,at,Mt,zt;for(Mt=H+1;Mt<=ue-1;Mt++)zt=Tn(u[Mt],u[H],u[ue],!0),zt>Me&&(at=Mt,Me=zt);Me>M&&(y[at]=1,z(u,y,M,H,at),z(u,y,M,at,ue))}function we(u,y){for(var M=[u[0]],H=1,ue=0,Me=u.length;H<Me;H++)un(u[H],u[ue])>y&&(M.push(u[H]),ue=H);return ue<Me-1&&M.push(u[Me-1]),M}var Ye;function ct(u,y,M,H,ue){var Me=H?Ye:jt(u,M),at=jt(y,M),Mt,zt,on;for(Ye=at;;){if(!(Me|at))return[u,y];if(Me&at)return!1;Mt=Me||at,zt=Lt(u,y,Mt,M,ue),on=jt(zt,M),Mt===Me?(u=zt,Me=on):(y=zt,at=on)}}function Lt(u,y,M,H,ue){var Me=y.x-u.x,at=y.y-u.y,Mt=H.min,zt=H.max,on,Dn;return M&8?(on=u.x+Me*(zt.y-u.y)/at,Dn=zt.y):M&4?(on=u.x+Me*(Mt.y-u.y)/at,Dn=Mt.y):M&2?(on=zt.x,Dn=u.y+at*(zt.x-u.x)/Me):M&1&&(on=Mt.x,Dn=u.y+at*(Mt.x-u.x)/Me),new Y(on,Dn,ue)}function jt(u,y){var M=0;return u.x<y.min.x?M|=1:u.x>y.max.x&&(M|=2),u.y<y.min.y?M|=4:u.y>y.max.y&&(M|=8),M}function un(u,y){var M=y.x-u.x,H=y.y-u.y;return M*M+H*H}function Tn(u,y,M,H){var ue=y.x,Me=y.y,at=M.x-ue,Mt=M.y-Me,zt=at*at+Mt*Mt,on;return zt>0&&(on=((u.x-ue)*at+(u.y-Me)*Mt)/zt,on>1?(ue=M.x,Me=M.y):on>0&&(ue+=at*on,Me+=Mt*on)),at=u.x-ue,Mt=u.y-Me,H?at*at+Mt*Mt:new Y(ue,Me)}function Nn(u){return!B(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function er(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Nn(u)}function hr(u,y){var M,H,ue,Me,at,Mt,zt,on;if(!u||u.length===0)throw new Error("latlngs not passed");Nn(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var Dn=ge([0,0]),Kn=ae(u),kr=Kn.getNorthWest().distanceTo(Kn.getSouthWest())*Kn.getNorthEast().distanceTo(Kn.getNorthWest());kr<1700&&(Dn=Pl(u));var as=u.length,zi=[];for(M=0;M<as;M++){var Ms=ge(u[M]);zi.push(y.project(ge([Ms.lat-Dn.lat,Ms.lng-Dn.lng])))}for(M=0,H=0;M<as-1;M++)H+=zi[M].distanceTo(zi[M+1])/2;if(H===0)on=zi[0];else for(M=0,Me=0;M<as-1;M++)if(at=zi[M],Mt=zi[M+1],ue=at.distanceTo(Mt),Me+=ue,Me>H){zt=(Me-H)/ue,on=[Mt.x-zt*(Mt.x-at.x),Mt.y-zt*(Mt.y-at.y)];break}var Di=y.unproject(Ce(on));return ge([Di.lat+Dn.lat,Di.lng+Dn.lng])}var Ar={__proto__:null,simplify:ii,pointToSegmentDistance:To,closestPointOnSegment:Pa,clipSegment:ct,_getEdgeIntersection:Lt,_getBitCode:jt,_sqClosestPointOnSegment:Tn,isFlat:Nn,_flat:er,polylineCenter:hr},Ci={project:function(u){return new Y(u.lng,u.lat)},unproject:function(u){return new de(u.y,u.x)},bounds:new He([-180,-90],[180,90])},Jr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new He([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var y=Math.PI/180,M=this.R,H=u.lat*y,ue=this.R_MINOR/M,Me=Math.sqrt(1-ue*ue),at=Me*Math.sin(H),Mt=Math.tan(Math.PI/4-H/2)/Math.pow((1-at)/(1+at),Me/2);return H=-M*Math.log(Math.max(Mt,1e-10)),new Y(u.lng*y*M,H)},unproject:function(u){for(var y=180/Math.PI,M=this.R,H=this.R_MINOR/M,ue=Math.sqrt(1-H*H),Me=Math.exp(-u.y/M),at=Math.PI/2-2*Math.atan(Me),Mt=0,zt=.1,on;Mt<15&&Math.abs(zt)>1e-7;Mt++)on=ue*Math.sin(at),on=Math.pow((1-on)/(1+on),ue/2),zt=Math.PI/2-2*Math.atan(Me*on)-at,at+=zt;return new de(at*y,u.x*y/M)}},si={__proto__:null,LonLat:Ci,Mercator:Jr,SphericalMercator:Te},Ki=i({},oe,{code:"EPSG:3395",projection:Jr,transformation:function(){var u=.5/(Math.PI*Jr.R);return qe(u,.5,-u,.5)}()}),is=i({},oe,{code:"EPSG:4326",projection:Ci,transformation:qe(1/180,1,-1/180,.5)}),Do=i({},me,{projection:Ci,transformation:qe(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,y){var M=y.lng-u.lng,H=y.lat-u.lat;return Math.sqrt(M*M+H*H)},infinite:!0});me.Earth=oe,me.EPSG3395=Ki,me.EPSG3857=se,me.EPSG900913=le,me.EPSG4326=is,me.Simple=Do;var Tr=J.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[l(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[l(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var y=u.target;if(y.hasLayer(this)){if(this._map=y,this._zoomAnimated=y._zoomAnimated,this.getEvents){var M=this.getEvents();y.on(M,this),this.once("remove",function(){y.off(M,this)},this)}this.onAdd(y),this.fire("add"),y.fire("layeradd",{layer:this})}}});Fr.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var y=l(u);return this._layers[y]?this:(this._layers[y]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var y=l(u);return this._layers[y]?(this._loaded&&u.onRemove(this),delete this._layers[y],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return l(u)in this._layers},eachLayer:function(u,y){for(var M in this._layers)u.call(y,this._layers[M]);return this},_addLayers:function(u){u=u?B(u)?u:[u]:[];for(var y=0,M=u.length;y<M;y++)this.addLayer(u[y])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[l(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var y=l(u);this._zoomBoundLayers[y]&&(delete this._zoomBoundLayers[y],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,y=-1/0,M=this._getZoomSpan();for(var H in this._zoomBoundLayers){var ue=this._zoomBoundLayers[H].options;u=ue.minZoom===void 0?u:Math.min(u,ue.minZoom),y=ue.maxZoom===void 0?y:Math.max(y,ue.maxZoom)}this._layersMaxZoom=y===-1/0?void 0:y,this._layersMinZoom=u===1/0?void 0:u,M!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Rs=Tr.extend({initialize:function(u,y){E(this,y),this._layers={};var M,H;if(u)for(M=0,H=u.length;M<H;M++)this.addLayer(u[M])},addLayer:function(u){var y=this.getLayerId(u);return this._layers[y]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var y=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[y]&&this._map.removeLayer(this._layers[y]),delete this._layers[y],this},hasLayer:function(u){var y=typeof u=="number"?u:this.getLayerId(u);return y in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var y=Array.prototype.slice.call(arguments,1),M,H;for(M in this._layers)H=this._layers[M],H[u]&&H[u].apply(H,y);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,y){for(var M in this._layers)u.call(y,this._layers[M]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return l(u)}}),Al=function(u,y){return new Rs(u,y)},Js=Rs.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),Rs.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),Rs.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new Z;for(var y in this._layers){var M=this._layers[y];u.extend(M.getBounds?M.getBounds():M.getLatLng())}return u}}),Mu=function(u,y){return new Js(u,y)},ua=K.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){E(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,y){var M=this._getIconUrl(u);if(!M){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var H=this._createImg(M,y&&y.tagName==="IMG"?y:null);return this._setIconStyles(H,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(H.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),H},_setIconStyles:function(u,y){var M=this.options,H=M[y+"Size"];typeof H=="number"&&(H=[H,H]);var ue=Ce(H),Me=Ce(y==="shadow"&&M.shadowAnchor||M.iconAnchor||ue&&ue.divideBy(2,!0));u.className="leaflet-marker-"+y+" "+(M.className||""),Me&&(u.style.marginLeft=-Me.x+"px",u.style.marginTop=-Me.y+"px"),ue&&(u.style.width=ue.x+"px",u.style.height=ue.y+"px")},_createImg:function(u,y){return y=y||document.createElement("img"),y.src=u,y},_getIconUrl:function(u){return Vt.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function Zu(u){return new ua(u)}var ol=ua.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof ol.imagePath!="string"&&(ol.imagePath=this._detectIconPath()),(this.options.imagePath||ol.imagePath)+ua.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var y=function(M,H,ue){var Me=H.exec(M);return Me&&Me[ue]};return u=y(u,/^url\((['"])?(.+)\1\)$/,2),u&&y(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=Pr("div","leaflet-default-icon-path",document.body),y=Si(u,"background-image")||Si(u,"backgroundImage");if(document.body.removeChild(u),y=this._stripUrl(y),y)return y;var M=document.querySelector('link[href$="leaflet.css"]');return M?M.href.substring(0,M.href.length-11-1):""}}),al=ri.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new Zo(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),br(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Kr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var y=this._marker,M=y._map,H=this._marker.options.autoPanSpeed,ue=this._marker.options.autoPanPadding,Me=Wo(y._icon),at=M.getPixelBounds(),Mt=M.getPixelOrigin(),zt=j(at.min._subtract(Mt).add(ue),at.max._subtract(Mt).subtract(ue));if(!zt.contains(Me)){var on=Ce((Math.max(zt.max.x,Me.x)-zt.max.x)/(at.max.x-zt.max.x)-(Math.min(zt.min.x,Me.x)-zt.min.x)/(at.min.x-zt.min.x),(Math.max(zt.max.y,Me.y)-zt.max.y)/(at.max.y-zt.max.y)-(Math.min(zt.min.y,Me.y)-zt.min.y)/(at.min.y-zt.min.y)).multiplyBy(H);M.panBy(on,{animate:!1}),this._draggable._newPos._add(on),this._draggable._startPos._add(on),ji(y._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=R(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&($(this._panRequest),this._panRequest=R(this._adjustPan.bind(this,u)))},_onDrag:function(u){var y=this._marker,M=y._shadow,H=Wo(y._icon),ue=y._map.layerPointToLatLng(H);M&&ji(M,H),y._latlng=ue,u.latlng=ue,u.oldLatLng=this._oldLatLng,y.fire("move",u).fire("drag",u)},_onDragEnd:function(u){$(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),ss=Tr.extend({options:{icon:new ol,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,y){E(this,y),this._latlng=ge(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var y=this._latlng;return this._latlng=ge(u),this.update(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,y="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),M=u.icon.createIcon(this._icon),H=!1;M!==this._icon&&(this._icon&&this._removeIcon(),H=!0,u.title&&(M.title=u.title),M.tagName==="IMG"&&(M.alt=u.alt||"")),br(M,y),u.keyboard&&(M.tabIndex="0",M.setAttribute("role","button")),this._icon=M,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_r(M,"focus",this._panOnFocus,this);var ue=u.icon.createShadow(this._shadow),Me=!1;ue!==this._shadow&&(this._removeShadow(),Me=!0),ue&&(br(ue,y),ue.alt=""),this._shadow=ue,u.opacity<1&&this._updateOpacity(),H&&this.getPane().appendChild(this._icon),this._initInteraction(),ue&&Me&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Wr(this._icon,"focus",this._panOnFocus,this),mr(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&mr(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&ji(this._icon,u),this._shadow&&ji(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(y)},_initInteraction:function(){if(this.options.interactive&&(br(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),al)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new al(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&Bs(this._icon,u),this._shadow&&Bs(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var y=this.options.icon.options,M=y.iconSize?Ce(y.iconSize):Ce(0,0),H=y.iconAnchor?Ce(y.iconAnchor):Ce(0,0);u.panInside(this._latlng,{paddingTopLeft:H,paddingBottomRight:M.subtract(H)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ca(u,y){return new ss(u,y)}var Io=Tr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return E(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),po=Io.extend({options:{fill:!0,radius:10},initialize:function(u,y){E(this,y),this._latlng=ge(u),this._radius=this.options.radius},setLatLng:function(u){var y=this._latlng;return this._latlng=ge(u),this.redraw(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var y=u&&u.radius||this._radius;return Io.prototype.setStyle.call(this,u),this.setRadius(y),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,y=this._radiusY||u,M=this._clickTolerance(),H=[u+M,y+M];this._pxBounds=new He(this._point.subtract(H),this._point.add(H))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Tl(u,y){return new po(u,y)}var Fs=po.extend({initialize:function(u,y,M){if(typeof y=="number"&&(y=i({},M,{radius:y})),E(this,y),this._latlng=ge(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new Z(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:Io.prototype.setStyle,_project:function(){var u=this._latlng.lng,y=this._latlng.lat,M=this._map,H=M.options.crs;if(H.distance===oe.distance){var ue=Math.PI/180,Me=this._mRadius/oe.R/ue,at=M.project([y+Me,u]),Mt=M.project([y-Me,u]),zt=at.add(Mt).divideBy(2),on=M.unproject(zt).lat,Dn=Math.acos((Math.cos(Me*ue)-Math.sin(y*ue)*Math.sin(on*ue))/(Math.cos(y*ue)*Math.cos(on*ue)))/ue;(isNaN(Dn)||Dn===0)&&(Dn=Me/Math.cos(Math.PI/180*y)),this._point=zt.subtract(M.getPixelOrigin()),this._radius=isNaN(Dn)?0:zt.x-M.project([on,u-Dn]).x,this._radiusY=zt.y-at.y}else{var Kn=H.unproject(H.project(this._latlng).subtract([this._mRadius,0]));this._point=M.latLngToLayerPoint(this._latlng),this._radius=this._point.x-M.latLngToLayerPoint(Kn).x}this._updateBounds()}});function Qs(u,y,M){return new Fs(u,y,M)}var eo=Io.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,y){E(this,y),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var y=1/0,M=null,H=Tn,ue,Me,at=0,Mt=this._parts.length;at<Mt;at++)for(var zt=this._parts[at],on=1,Dn=zt.length;on<Dn;on++){ue=zt[on-1],Me=zt[on];var Kn=H(u,ue,Me,!0);Kn<y&&(y=Kn,M=H(u,ue,Me))}return M&&(M.distance=Math.sqrt(y)),M},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return hr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,y){return y=y||this._defaultShape(),u=ge(u),y.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new Z,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return Nn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var y=[],M=Nn(u),H=0,ue=u.length;H<ue;H++)M?(y[H]=ge(u[H]),this._bounds.extend(y[H])):y[H]=this._convertLatLngs(u[H]);return y},_project:function(){var u=new He;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),y=new Y(u,u);this._rawPxBounds&&(this._pxBounds=new He([this._rawPxBounds.min.subtract(y),this._rawPxBounds.max.add(y)]))},_projectLatlngs:function(u,y,M){var H=u[0]instanceof de,ue=u.length,Me,at;if(H){for(at=[],Me=0;Me<ue;Me++)at[Me]=this._map.latLngToLayerPoint(u[Me]),M.extend(at[Me]);y.push(at)}else for(Me=0;Me<ue;Me++)this._projectLatlngs(u[Me],y,M)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var y=this._parts,M,H,ue,Me,at,Mt,zt;for(M=0,ue=0,Me=this._rings.length;M<Me;M++)for(zt=this._rings[M],H=0,at=zt.length;H<at-1;H++)Mt=ct(zt[H],zt[H+1],u,H,!0),Mt&&(y[ue]=y[ue]||[],y[ue].push(Mt[0]),(Mt[1]!==zt[H+1]||H===at-2)&&(y[ue].push(Mt[1]),ue++))}},_simplifyPoints:function(){for(var u=this._parts,y=this.options.smoothFactor,M=0,H=u.length;M<H;M++)u[M]=ii(u[M],y)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,y){var M,H,ue,Me,at,Mt,zt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(M=0,Me=this._parts.length;M<Me;M++)for(Mt=this._parts[M],H=0,at=Mt.length,ue=at-1;H<at;ue=H++)if(!(!y&&H===0)&&To(u,Mt[ue],Mt[H])<=zt)return!0;return!1}});function Ec(u,y){return new eo(u,y)}eo._flat=er;var gs=eo.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Xo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var y=eo.prototype._convertLatLngs.call(this,u),M=y.length;return M>=2&&y[0]instanceof de&&y[0].equals(y[M-1])&&y.pop(),y},_setLatLngs:function(u){eo.prototype._setLatLngs.call(this,u),Nn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Nn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,y=this.options.weight,M=new Y(y,y);if(u=new He(u.min.subtract(M),u.max.add(M)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var H=0,ue=this._rings.length,Me;H<ue;H++)Me=ou(this._rings[H],u,!0),Me.length&&this._parts.push(Me)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var y=!1,M,H,ue,Me,at,Mt,zt,on;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(Me=0,zt=this._parts.length;Me<zt;Me++)for(M=this._parts[Me],at=0,on=M.length,Mt=on-1;at<on;Mt=at++)H=M[at],ue=M[Mt],H.y>u.y!=ue.y>u.y&&u.x<(ue.x-H.x)*(u.y-H.y)/(ue.y-H.y)+H.x&&(y=!y);return y||eo.prototype._containsPoint.call(this,u,!0)}});function ka(u,y){return new gs(u,y)}var js=Js.extend({initialize:function(u,y){E(this,y),this._layers={},u&&this.addData(u)},addData:function(u){var y=B(u)?u:u.features,M,H,ue;if(y){for(M=0,H=y.length;M<H;M++)ue=y[M],(ue.geometries||ue.geometry||ue.features||ue.coordinates)&&this.addData(ue);return this}var Me=this.options;if(Me.filter&&!Me.filter(u))return this;var at=zs(u,Me);return at?(at.feature=Us(u),at.defaultOptions=at.options,this.resetStyle(at),Me.onEachFeature&&Me.onEachFeature(u,at),this.addLayer(at)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=i({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(y){this._setLayerStyle(y,u)},this)},_setLayerStyle:function(u,y){u.setStyle&&(typeof y=="function"&&(y=y(u.feature)),u.setStyle(y))}});function zs(u,y){var M=u.type==="Feature"?u.geometry:u,H=M?M.coordinates:null,ue=[],Me=y&&y.pointToLayer,at=y&&y.coordsToLatLng||Ta,Mt,zt,on,Dn;if(!H&&!M)return null;switch(M.type){case"Point":return Mt=at(H),Aa(Me,u,Mt,y);case"MultiPoint":for(on=0,Dn=H.length;on<Dn;on++)Mt=at(H[on]),ue.push(Aa(Me,u,Mt,y));return new Js(ue);case"LineString":case"MultiLineString":return zt=$s(H,M.type==="LineString"?0:1,at),new eo(zt,y);case"Polygon":case"MultiPolygon":return zt=$s(H,M.type==="Polygon"?1:2,at),new gs(zt,y);case"GeometryCollection":for(on=0,Dn=M.geometries.length;on<Dn;on++){var Kn=zs({geometry:M.geometries[on],type:"Feature",properties:u.properties},y);Kn&&ue.push(Kn)}return new Js(ue);case"FeatureCollection":for(on=0,Dn=M.features.length;on<Dn;on++){var kr=zs(M.features[on],y);kr&&ue.push(kr)}return new Js(ue);default:throw new Error("Invalid GeoJSON object.")}}function Aa(u,y,M,H){return u?u(y,M):new ss(M,H&&H.markersInheritOptions&&H)}function Ta(u){return new de(u[1],u[0],u[2])}function $s(u,y,M){for(var H=[],ue=0,Me=u.length,at;ue<Me;ue++)at=y?$s(u[ue],y-1,M):(M||Ta)(u[ue]),H.push(at);return H}function Ls(u,y){return u=ge(u),u.alt!==void 0?[v(u.lng,y),v(u.lat,y),v(u.alt,y)]:[v(u.lng,y),v(u.lat,y)]}function ha(u,y,M,H){for(var ue=[],Me=0,at=u.length;Me<at;Me++)ue.push(y?ha(u[Me],Nn(u[Me])?0:y-1,M,H):Ls(u[Me],H));return!y&&M&&ue.length>0&&ue.push(ue[0].slice()),ue}function Oo(u,y){return u.feature?i({},u.feature,{geometry:y}):Us(y)}function Us(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var bt={toGeoJSON:function(u){return Oo(this,{type:"Point",coordinates:Ls(this.getLatLng(),u)})}};ss.include(bt),Fs.include(bt),po.include(bt),eo.include({toGeoJSON:function(u){var y=!Nn(this._latlngs),M=ha(this._latlngs,y?1:0,!1,u);return Oo(this,{type:(y?"Multi":"")+"LineString",coordinates:M})}}),gs.include({toGeoJSON:function(u){var y=!Nn(this._latlngs),M=y&&!Nn(this._latlngs[0]),H=ha(this._latlngs,M?2:y?1:0,!0,u);return y||(H=[H]),Oo(this,{type:(M?"Multi":"")+"Polygon",coordinates:H})}}),Rs.include({toMultiPoint:function(u){var y=[];return this.eachLayer(function(M){y.push(M.toGeoJSON(u).geometry.coordinates)}),Oo(this,{type:"MultiPoint",coordinates:y})},toGeoJSON:function(u){var y=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(y==="MultiPoint")return this.toMultiPoint(u);var M=y==="GeometryCollection",H=[];return this.eachLayer(function(ue){if(ue.toGeoJSON){var Me=ue.toGeoJSON(u);if(M)H.push(Me.geometry);else{var at=Us(Me);at.type==="FeatureCollection"?H.push.apply(H,at.features):H.push(at)}}}),M?Oo(this,{geometries:H,type:"GeometryCollection"}):{type:"FeatureCollection",features:H}}});function Gt(u,y){return new js(u,y)}var kt=Gt,kn=Tr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,y,M){this._url=u,this._bounds=ae(y),E(this,M)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(br(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){mr(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&Sa(this._image),this},bringToBack:function(){return this._map&&Go(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=ae(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",y=this._image=u?this._url:Pr("img");if(br(y,"leaflet-image-layer"),this._zoomAnimated&&br(y,"leaflet-zoom-animated"),this.options.className&&br(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onload=o(this.fire,this,"load"),y.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=y.src;return}y.src=this._url,y.alt=this.options.alt},_animateZoom:function(u){var y=this._map.getZoomScale(u.zoom),M=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;Ca(this._image,M,y)},_reset:function(){var u=this._image,y=new He(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),M=y.getSize();ji(u,y.min),u.style.width=M.x+"px",u.style.height=M.y+"px"},_updateOpacity:function(){Bs(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),Hn=function(u,y,M){return new kn(u,y,M)},pr=kn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",y=this._image=u?this._url:Pr("video");if(br(y,"leaflet-image-layer"),this._zoomAnimated&&br(y,"leaflet-zoom-animated"),this.options.className&&br(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onloadeddata=o(this.fire,this,"load"),u){for(var M=y.getElementsByTagName("source"),H=[],ue=0;ue<M.length;ue++)H.push(M[ue].src);this._url=M.length>0?H:[y.src];return}B(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(y.style,"objectFit")&&(y.style.objectFit="fill"),y.autoplay=!!this.options.autoplay,y.loop=!!this.options.loop,y.muted=!!this.options.muted,y.playsInline=!!this.options.playsInline;for(var Me=0;Me<this._url.length;Me++){var at=Pr("source");at.src=this._url[Me],y.appendChild(at)}}});function Ai(u,y,M){return new pr(u,y,M)}var oi=kn.extend({_initImage:function(){var u=this._image=this._url;br(u,"leaflet-image-layer"),this._zoomAnimated&&br(u,"leaflet-zoom-animated"),this.options.className&&br(u,this.options.className),u.onselectstart=p,u.onmousemove=p}});function au(u,y,M){return new oi(u,y,M)}var to=Tr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,y){u&&(u instanceof de||B(u))?(this._latlng=ge(u),E(this,y)):(E(this,u),this._source=y),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&Bs(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&Bs(this._container,1),this.bringToFront(),this.options.interactive&&(br(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(Bs(this._container,0),this._removeTimeout=setTimeout(o(mr,void 0,this._container),200)):mr(this._container),this.options.interactive&&(Kr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=ge(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Sa(this._container),this},bringToBack:function(){return this._map&&Go(this._container),this},_prepareOpen:function(u){var y=this._source;if(!y._map)return!1;if(y instanceof Js){y=null;var M=this._source._layers;for(var H in M)if(M[H]._map){y=M[H];break}if(!y)return!1;this._source=y}if(!u)if(y.getCenter)u=y.getCenter();else if(y.getLatLng)u=y.getLatLng();else if(y.getBounds)u=y.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,y=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof y=="string")u.innerHTML=y;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(y)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),y=Ce(this.options.offset),M=this._getAnchor();this._zoomAnimated?ji(this._container,u.add(M)):y=y.add(u).add(M);var H=this._containerBottom=-y.y,ue=this._containerLeft=-Math.round(this._containerWidth/2)+y.x;this._container.style.bottom=H+"px",this._container.style.left=ue+"px"}},_getAnchor:function(){return[0,0]}});Fr.include({_initOverlay:function(u,y,M,H){var ue=y;return ue instanceof u||(ue=new u(H).setContent(y)),M&&ue.setLatLng(M),ue}}),Tr.include({_initOverlay:function(u,y,M,H){var ue=M;return ue instanceof u?(E(ue,H),ue._source=this):(ue=y&&!H?y:new u(H,this),ue.setContent(M)),ue}});var Ti=to.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,to.prototype.openOn.call(this,u)},onAdd:function(u){to.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Io||this._source.on("preclick",il))},onRemove:function(u){to.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Io||this._source.off("preclick",il))},getEvents:function(){var u=to.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",y=this._container=Pr("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),M=this._wrapper=Pr("div",u+"-content-wrapper",y);if(this._contentNode=Pr("div",u+"-content",M),eu(y),Ku(this._contentNode),_r(y,"contextmenu",il),this._tipContainer=Pr("div",u+"-tip-container",y),this._tip=Pr("div",u+"-tip",this._tipContainer),this.options.closeButton){var H=this._closeButton=Pr("a",u+"-close-button",y);H.setAttribute("role","button"),H.setAttribute("aria-label","Close popup"),H.href="#close",H.innerHTML='<span aria-hidden="true">&#215;</span>',_r(H,"click",function(ue){vr(ue),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,y=u.style;y.width="",y.whiteSpace="nowrap";var M=u.offsetWidth;M=Math.min(M,this.options.maxWidth),M=Math.max(M,this.options.minWidth),y.width=M+1+"px",y.whiteSpace="",y.height="";var H=u.offsetHeight,ue=this.options.maxHeight,Me="leaflet-popup-scrolled";ue&&H>ue?(y.height=ue+"px",br(u,Me)):Kr(u,Me),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),M=this._getAnchor();ji(this._container,y.add(M))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,y=parseInt(Si(this._container,"marginBottom"),10)||0,M=this._container.offsetHeight+y,H=this._containerWidth,ue=new Y(this._containerLeft,-M-this._containerBottom);ue._add(Wo(this._container));var Me=u.layerPointToContainerPoint(ue),at=Ce(this.options.autoPanPadding),Mt=Ce(this.options.autoPanPaddingTopLeft||at),zt=Ce(this.options.autoPanPaddingBottomRight||at),on=u.getSize(),Dn=0,Kn=0;Me.x+H+zt.x>on.x&&(Dn=Me.x+H-on.x+zt.x),Me.x-Dn-Mt.x<0&&(Dn=Me.x-Mt.x),Me.y+M+zt.y>on.y&&(Kn=Me.y+M-on.y+zt.y),Me.y-Kn-Mt.y<0&&(Kn=Me.y-Mt.y),(Dn||Kn)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([Dn,Kn]))}},_getAnchor:function(){return Ce(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),da=function(u,y){return new Ti(u,y)};Fr.mergeOptions({closePopupOnClick:!0}),Fr.include({openPopup:function(u,y,M){return this._initOverlay(Ti,u,y,M).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),Tr.include({bindPopup:function(u,y){return this._popup=this._initOverlay(Ti,this._popup,u,y),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof Js||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){Or(u);var y=u.layer||u.target;if(this._popup._source===y&&!(y instanceof Io)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=y,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var Da=to.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){to.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){to.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=to.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",y=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Pr("div",y),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var y,M,H=this._map,ue=this._container,Me=H.latLngToContainerPoint(H.getCenter()),at=H.layerPointToContainerPoint(u),Mt=this.options.direction,zt=ue.offsetWidth,on=ue.offsetHeight,Dn=Ce(this.options.offset),Kn=this._getAnchor();Mt==="top"?(y=zt/2,M=on):Mt==="bottom"?(y=zt/2,M=0):Mt==="center"?(y=zt/2,M=on/2):Mt==="right"?(y=0,M=on/2):Mt==="left"?(y=zt,M=on/2):at.x<Me.x?(Mt="right",y=0,M=on/2):(Mt="left",y=zt+(Dn.x+Kn.x)*2,M=on/2),u=u.subtract(Ce(y,M,!0)).add(Dn).add(Kn),Kr(ue,"leaflet-tooltip-right"),Kr(ue,"leaflet-tooltip-left"),Kr(ue,"leaflet-tooltip-top"),Kr(ue,"leaflet-tooltip-bottom"),br(ue,"leaflet-tooltip-"+Mt),ji(ue,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&Bs(this._container,u)},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(y)},_getAnchor:function(){return Ce(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),fa=function(u,y){return new Da(u,y)};Fr.include({openTooltip:function(u,y,M){return this._initOverlay(Da,u,y,M).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),Tr.include({bindTooltip:function(u,y){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Da,this._tooltip,u,y),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var y=u?"off":"on",M={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?M.add=this._openTooltip:(M.mouseover=this._openTooltip,M.mouseout=this.closeTooltip,M.click=this._openTooltip,this._map?this._addFocusListeners():M.add=this._addFocusListeners),this._tooltip.options.sticky&&(M.mousemove=this._moveTooltip),this[y](M),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof Js||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var y=typeof u.getElement=="function"&&u.getElement();y&&(_r(y,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),_r(y,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var y=typeof u.getElement=="function"&&u.getElement();y&&y.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var y=this;this._map.once("moveend",function(){y._openOnceFlag=!1,y._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var y=u.latlng,M,H;this._tooltip.options.sticky&&u.originalEvent&&(M=this._map.mouseEventToContainerPoint(u.originalEvent),H=this._map.containerPointToLayerPoint(M),y=this._map.layerPointToLatLng(H)),this._tooltip.setLatLng(y)}});var pa=ua.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var y=u&&u.tagName==="DIV"?u:document.createElement("div"),M=this.options;if(M.html instanceof Element?(Qa(y),y.appendChild(M.html)):y.innerHTML=M.html!==!1?M.html:"",M.bgPos){var H=Ce(M.bgPos);y.style.backgroundPosition=-H.x+"px "+-H.y+"px"}return this._setIconStyles(y,"icon"),y},createShadow:function(){return null}});function ga(u){return new pa(u)}ua.Default=ol;var jr=Tr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Vt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){E(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),mr(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Sa(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Go(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof Y?u:new Y(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var y=this.getPane().children,M=-u(-1/0,1/0),H=0,ue=y.length,Me;H<ue;H++)Me=y[H].style.zIndex,y[H]!==this._container&&Me&&(M=u(M,+Me));isFinite(M)&&(this.options.zIndex=M+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Vt.ielt9){Bs(this._container,this.options.opacity);var u=+new Date,y=!1,M=!1;for(var H in this._tiles){var ue=this._tiles[H];if(!(!ue.current||!ue.loaded)){var Me=Math.min(1,(u-ue.loaded)/200);Bs(ue.el,Me),Me<1?y=!0:(ue.active?M=!0:this._onOpaqueTile(ue),ue.active=!0)}}M&&!this._noPrune&&this._pruneTiles(),y&&($(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=Pr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,y=this.options.maxZoom;if(u!==void 0){for(var M in this._levels)M=Number(M),this._levels[M].el.children.length||M===u?(this._levels[M].el.style.zIndex=y-Math.abs(u-M),this._onUpdateLevel(M)):(mr(this._levels[M].el),this._removeTilesAtZoom(M),this._onRemoveLevel(M),delete this._levels[M]);var H=this._levels[u],ue=this._map;return H||(H=this._levels[u]={},H.el=Pr("div","leaflet-tile-container leaflet-zoom-animated",this._container),H.el.style.zIndex=y,H.origin=ue.project(ue.unproject(ue.getPixelOrigin()),u).round(),H.zoom=u,this._setZoomTransform(H,ue.getCenter(),ue.getZoom()),p(H.el.offsetWidth),this._onCreateLevel(H)),this._level=H,H}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var u,y,M=this._map.getZoom();if(M>this.options.maxZoom||M<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)y=this._tiles[u],y.retain=y.current;for(u in this._tiles)if(y=this._tiles[u],y.current&&!y.active){var H=y.coords;this._retainParent(H.x,H.y,H.z,H.z-5)||this._retainChildren(H.x,H.y,H.z,H.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var y in this._tiles)this._tiles[y].coords.z===u&&this._removeTile(y)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)mr(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,y,M,H){var ue=Math.floor(u/2),Me=Math.floor(y/2),at=M-1,Mt=new Y(+ue,+Me);Mt.z=+at;var zt=this._tileCoordsToKey(Mt),on=this._tiles[zt];return on&&on.active?(on.retain=!0,!0):(on&&on.loaded&&(on.retain=!0),at>H?this._retainParent(ue,Me,at,H):!1)},_retainChildren:function(u,y,M,H){for(var ue=2*u;ue<2*u+2;ue++)for(var Me=2*y;Me<2*y+2;Me++){var at=new Y(ue,Me);at.z=M+1;var Mt=this._tileCoordsToKey(at),zt=this._tiles[Mt];if(zt&&zt.active){zt.retain=!0;continue}else zt&&zt.loaded&&(zt.retain=!0);M+1<H&&this._retainChildren(ue,Me,M+1,H)}},_resetView:function(u){var y=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),y,y)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var y=this.options;return y.minNativeZoom!==void 0&&u<y.minNativeZoom?y.minNativeZoom:y.maxNativeZoom!==void 0&&y.maxNativeZoom<u?y.maxNativeZoom:u},_setView:function(u,y,M,H){var ue=Math.round(y);this.options.maxZoom!==void 0&&ue>this.options.maxZoom||this.options.minZoom!==void 0&&ue<this.options.minZoom?ue=void 0:ue=this._clampZoom(ue);var Me=this.options.updateWhenZooming&&ue!==this._tileZoom;(!H||Me)&&(this._tileZoom=ue,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ue!==void 0&&this._update(u),M||this._pruneTiles(),this._noPrune=!!M),this._setZoomTransforms(u,y)},_setZoomTransforms:function(u,y){for(var M in this._levels)this._setZoomTransform(this._levels[M],u,y)},_setZoomTransform:function(u,y,M){var H=this._map.getZoomScale(M,u.zoom),ue=u.origin.multiplyBy(H).subtract(this._map._getNewPixelOrigin(y,M)).round();Vt.any3d?Ca(u.el,ue,H):ji(u.el,ue)},_resetGrid:function(){var u=this._map,y=u.options.crs,M=this._tileSize=this.getTileSize(),H=this._tileZoom,ue=this._map.getPixelWorldBounds(this._tileZoom);ue&&(this._globalTileRange=this._pxBoundsToTileRange(ue)),this._wrapX=y.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,y.wrapLng[0]],H).x/M.x),Math.ceil(u.project([0,y.wrapLng[1]],H).x/M.y)],this._wrapY=y.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([y.wrapLat[0],0],H).y/M.x),Math.ceil(u.project([y.wrapLat[1],0],H).y/M.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var y=this._map,M=y._animatingZoom?Math.max(y._animateToZoom,y.getZoom()):y.getZoom(),H=y.getZoomScale(M,this._tileZoom),ue=y.project(u,this._tileZoom).floor(),Me=y.getSize().divideBy(H*2);return new He(ue.subtract(Me),ue.add(Me))},_update:function(u){var y=this._map;if(y){var M=this._clampZoom(y.getZoom());if(u===void 0&&(u=y.getCenter()),this._tileZoom!==void 0){var H=this._getTiledPixelBounds(u),ue=this._pxBoundsToTileRange(H),Me=ue.getCenter(),at=[],Mt=this.options.keepBuffer,zt=new He(ue.getBottomLeft().subtract([Mt,-Mt]),ue.getTopRight().add([Mt,-Mt]));if(!(isFinite(ue.min.x)&&isFinite(ue.min.y)&&isFinite(ue.max.x)&&isFinite(ue.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var on in this._tiles){var Dn=this._tiles[on].coords;(Dn.z!==this._tileZoom||!zt.contains(new Y(Dn.x,Dn.y)))&&(this._tiles[on].current=!1)}if(Math.abs(M-this._tileZoom)>1){this._setView(u,M);return}for(var Kn=ue.min.y;Kn<=ue.max.y;Kn++)for(var kr=ue.min.x;kr<=ue.max.x;kr++){var as=new Y(kr,Kn);if(as.z=this._tileZoom,!!this._isValidTile(as)){var zi=this._tiles[this._tileCoordsToKey(as)];zi?zi.current=!0:at.push(as)}}if(at.sort(function(Di,vo){return Di.distanceTo(Me)-vo.distanceTo(Me)}),at.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ms=document.createDocumentFragment();for(kr=0;kr<at.length;kr++)this._addTile(at[kr],Ms);this._level.el.appendChild(Ms)}}}},_isValidTile:function(u){var y=this._map.options.crs;if(!y.infinite){var M=this._globalTileRange;if(!y.wrapLng&&(u.x<M.min.x||u.x>M.max.x)||!y.wrapLat&&(u.y<M.min.y||u.y>M.max.y))return!1}if(!this.options.bounds)return!0;var H=this._tileCoordsToBounds(u);return ae(this.options.bounds).overlaps(H)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var y=this._map,M=this.getTileSize(),H=u.scaleBy(M),ue=H.add(M),Me=y.unproject(H,u.z),at=y.unproject(ue,u.z);return[Me,at]},_tileCoordsToBounds:function(u){var y=this._tileCoordsToNwSe(u),M=new Z(y[0],y[1]);return this.options.noWrap||(M=this._map.wrapLatLngBounds(M)),M},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var y=u.split(":"),M=new Y(+y[0],+y[1]);return M.z=+y[2],M},_removeTile:function(u){var y=this._tiles[u];y&&(mr(y.el),delete this._tiles[u],this.fire("tileunload",{tile:y.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){br(u,"leaflet-tile");var y=this.getTileSize();u.style.width=y.x+"px",u.style.height=y.y+"px",u.onselectstart=p,u.onmousemove=p,Vt.ielt9&&this.options.opacity<1&&Bs(u,this.options.opacity)},_addTile:function(u,y){var M=this._getTilePos(u),H=this._tileCoordsToKey(u),ue=this.createTile(this._wrapCoords(u),o(this._tileReady,this,u));this._initTile(ue),this.createTile.length<2&&R(o(this._tileReady,this,u,null,ue)),ji(ue,M),this._tiles[H]={el:ue,coords:u,current:!0},y.appendChild(ue),this.fire("tileloadstart",{tile:ue,coords:u})},_tileReady:function(u,y,M){y&&this.fire("tileerror",{error:y,tile:M,coords:u});var H=this._tileCoordsToKey(u);M=this._tiles[H],M&&(M.loaded=+new Date,this._map._fadeAnimated?(Bs(M.el,0),$(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this)):(M.active=!0,this._pruneTiles()),y||(br(M.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:M.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Vt.ielt9||!this._map._fadeAnimated?R(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var y=new Y(this._wrapX?d(u.x,this._wrapX):u.x,this._wrapY?d(u.y,this._wrapY):u.y);return y.z=u.z,y},_pxBoundsToTileRange:function(u){var y=this.getTileSize();return new He(u.min.unscaleBy(y).floor(),u.max.unscaleBy(y).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function Jo(u){return new jr(u)}var Ss=jr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,y){this._url=u,y=E(this,y),y.detectRetina&&Vt.retina&&y.maxZoom>0?(y.tileSize=Math.floor(y.tileSize/2),y.zoomReverse?(y.zoomOffset--,y.minZoom=Math.min(y.maxZoom,y.minZoom+1)):(y.zoomOffset++,y.maxZoom=Math.max(y.minZoom,y.maxZoom-1)),y.minZoom=Math.max(0,y.minZoom)):y.zoomReverse?y.minZoom=Math.min(y.maxZoom,y.minZoom):y.maxZoom=Math.max(y.minZoom,y.maxZoom),typeof y.subdomains=="string"&&(y.subdomains=y.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,y){return this._url===u&&y===void 0&&(y=!0),this._url=u,y||this.redraw(),this},createTile:function(u,y){var M=document.createElement("img");return _r(M,"load",o(this._tileOnLoad,this,y,M)),_r(M,"error",o(this._tileOnError,this,y,M)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(M.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(M.referrerPolicy=this.options.referrerPolicy),M.alt="",M.src=this.getTileUrl(u),M},getTileUrl:function(u){var y={r:Vt.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var M=this._globalTileRange.max.y-u.y;this.options.tms&&(y.y=M),y["-y"]=M}return k(this._url,i(y,this.options))},_tileOnLoad:function(u,y){Vt.ielt9?setTimeout(o(u,this,null,y),0):u(null,y)},_tileOnError:function(u,y,M){var H=this.options.errorTileUrl;H&&y.getAttribute("src")!==H&&(y.src=H),u(M,y)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,y=this.options.maxZoom,M=this.options.zoomReverse,H=this.options.zoomOffset;return M&&(u=y-u),u+H},_getSubdomain:function(u){var y=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[y]},_abortLoading:function(){var u,y;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(y=this._tiles[u].el,y.onload=p,y.onerror=p,!y.complete)){y.src=Q;var M=this._tiles[u].coords;mr(y),delete this._tiles[u],this.fire("tileabort",{tile:y,coords:M})}},_removeTile:function(u){var y=this._tiles[u];if(y)return y.el.setAttribute("src",Q),jr.prototype._removeTile.call(this,u)},_tileReady:function(u,y,M){if(!(!this._map||M&&M.getAttribute("src")===Q))return jr.prototype._tileReady.call(this,u,y,M)}});function ai(u,y){return new Ss(u,y)}var fi=Ss.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,y){this._url=u;var M=i({},this.defaultWmsParams);for(var H in y)H in this.options||(M[H]=y[H]);y=E(this,y);var ue=y.detectRetina&&Vt.retina?2:1,Me=this.getTileSize();M.width=Me.x*ue,M.height=Me.y*ue,this.wmsParams=M},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var y=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[y]=this._crs.code,Ss.prototype.onAdd.call(this,u)},getTileUrl:function(u){var y=this._tileCoordsToNwSe(u),M=this._crs,H=j(M.project(y[0]),M.project(y[1])),ue=H.min,Me=H.max,at=(this._wmsVersion>=1.3&&this._crs===is?[ue.y,ue.x,Me.y,Me.x]:[ue.x,ue.y,Me.x,Me.y]).join(","),Mt=Ss.prototype.getTileUrl.call(this,u);return Mt+T(this.wmsParams,Mt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+at},setParams:function(u,y){return i(this.wmsParams,u),y||this.redraw(),this}});function Zi(u,y){return new fi(u,y)}Ss.WMS=fi,ai.wms=Zi;var _i=Tr.extend({options:{padding:.1},initialize:function(u){E(this,u),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),br(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,y){var M=this._map.getZoomScale(y,this._zoom),H=this._map.getSize().multiplyBy(.5+this.options.padding),ue=this._map.project(this._center,y),Me=H.multiplyBy(-M).add(ue).subtract(this._map._getNewPixelOrigin(u,y));Vt.any3d?Ca(this._container,Me,M):ji(this._container,Me)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,y=this._map.getSize(),M=this._map.containerPointToLayerPoint(y.multiplyBy(-u)).round();this._bounds=new He(M,M.add(y.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),No=_i.extend({options:{tolerance:0},getEvents:function(){var u=_i.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){_i.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");_r(u,"mousemove",this._onMouseMove,this),_r(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),_r(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){$(this._redrawRequest),delete this._ctx,mr(this._container),Wr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var y in this._layers)u=this._layers[y],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){_i.prototype._update.call(this);var u=this._bounds,y=this._container,M=u.getSize(),H=Vt.retina?2:1;ji(y,u.min),y.width=H*M.x,y.height=H*M.y,y.style.width=M.x+"px",y.style.height=M.y+"px",Vt.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){_i.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[l(u)]=u;var y=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=y),this._drawLast=y,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var y=u._order,M=y.next,H=y.prev;M?M.prev=H:this._drawLast=H,H?H.next=M:this._drawFirst=M,delete u._order,delete this._layers[l(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var y=u.options.dashArray.split(/[, ]+/),M=[],H,ue;for(ue=0;ue<y.length;ue++){if(H=Number(y[ue]),isNaN(H))return;M.push(H)}u.options._dashArray=M}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||R(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var y=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new He,this._redrawBounds.extend(u._pxBounds.min.subtract([y,y])),this._redrawBounds.extend(u._pxBounds.max.add([y,y]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var y=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,y.x,y.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,y=this._redrawBounds;if(this._ctx.save(),y){var M=y.getSize();this._ctx.beginPath(),this._ctx.rect(y.min.x,y.min.y,M.x,M.y),this._ctx.clip()}this._drawing=!0;for(var H=this._drawFirst;H;H=H.next)u=H.layer,(!y||u._pxBounds&&u._pxBounds.intersects(y))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,y){if(this._drawing){var M,H,ue,Me,at=u._parts,Mt=at.length,zt=this._ctx;if(Mt){for(zt.beginPath(),M=0;M<Mt;M++){for(H=0,ue=at[M].length;H<ue;H++)Me=at[M][H],zt[H?"lineTo":"moveTo"](Me.x,Me.y);y&&zt.closePath()}this._fillStroke(zt,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var y=u._point,M=this._ctx,H=Math.max(Math.round(u._radius),1),ue=(Math.max(Math.round(u._radiusY),1)||H)/H;ue!==1&&(M.save(),M.scale(1,ue)),M.beginPath(),M.arc(y.x,y.y/ue,H,0,Math.PI*2,!1),ue!==1&&M.restore(),this._fillStroke(M,u)}},_fillStroke:function(u,y){var M=y.options;M.fill&&(u.globalAlpha=M.fillOpacity,u.fillStyle=M.fillColor||M.color,u.fill(M.fillRule||"evenodd")),M.stroke&&M.weight!==0&&(u.setLineDash&&u.setLineDash(y.options&&y.options._dashArray||[]),u.globalAlpha=M.opacity,u.lineWidth=M.weight,u.strokeStyle=M.color,u.lineCap=M.lineCap,u.lineJoin=M.lineJoin,u.stroke())},_onClick:function(u){for(var y=this._map.mouseEventToLayerPoint(u),M,H,ue=this._drawFirst;ue;ue=ue.next)M=ue.layer,M.options.interactive&&M._containsPoint(y)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(M))&&(H=M);this._fireEvent(H?[H]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var y=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,y)}},_handleMouseOut:function(u){var y=this._hoveredLayer;y&&(Kr(this._container,"leaflet-interactive"),this._fireEvent([y],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,y){if(!this._mouseHoverThrottled){for(var M,H,ue=this._drawFirst;ue;ue=ue.next)M=ue.layer,M.options.interactive&&M._containsPoint(y)&&(H=M);H!==this._hoveredLayer&&(this._handleMouseOut(u),H&&(br(this._container,"leaflet-interactive"),this._fireEvent([H],u,"mouseover"),this._hoveredLayer=H)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,y,M){this._map._fireDOMEvent(y,M||y.type,u)},_bringToFront:function(u){var y=u._order;if(y){var M=y.next,H=y.prev;if(M)M.prev=H;else return;H?H.next=M:M&&(this._drawFirst=M),y.prev=this._drawLast,this._drawLast.next=y,y.next=null,this._drawLast=y,this._requestRedraw(u)}},_bringToBack:function(u){var y=u._order;if(y){var M=y.next,H=y.prev;if(H)H.next=M;else return;M?M.prev=H:H&&(this._drawLast=H),y.prev=null,y.next=this._drawFirst,this._drawFirst.prev=y,this._drawFirst=y,this._requestRedraw(u)}}});function go(u){return Vt.canvas?new No(u):null}var jo=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Xu={_initContainer:function(){this._container=Pr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(_i.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var y=u._container=jo("shape");br(y,"leaflet-vml-shape "+(this.options.className||"")),y.coordsize="1 1",u._path=jo("path"),y.appendChild(u._path),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){var y=u._container;this._container.appendChild(y),u.options.interactive&&u.addInteractiveTarget(y)},_removePath:function(u){var y=u._container;mr(y),u.removeInteractiveTarget(y),delete this._layers[l(u)]},_updateStyle:function(u){var y=u._stroke,M=u._fill,H=u.options,ue=u._container;ue.stroked=!!H.stroke,ue.filled=!!H.fill,H.stroke?(y||(y=u._stroke=jo("stroke")),ue.appendChild(y),y.weight=H.weight+"px",y.color=H.color,y.opacity=H.opacity,H.dashArray?y.dashStyle=B(H.dashArray)?H.dashArray.join(" "):H.dashArray.replace(/( *, *)/g," "):y.dashStyle="",y.endcap=H.lineCap.replace("butt","flat"),y.joinstyle=H.lineJoin):y&&(ue.removeChild(y),u._stroke=null),H.fill?(M||(M=u._fill=jo("fill")),ue.appendChild(M),M.color=H.fillColor||H.color,M.opacity=H.fillOpacity):M&&(ue.removeChild(M),u._fill=null)},_updateCircle:function(u){var y=u._point.round(),M=Math.round(u._radius),H=Math.round(u._radiusY||M);this._setPath(u,u._empty()?"M0 0":"AL "+y.x+","+y.y+" "+M+","+H+" 0,"+65535*360)},_setPath:function(u,y){u._path.v=y},_bringToFront:function(u){Sa(u._container)},_bringToBack:function(u){Go(u._container)}},ma=Vt.vml?jo:he,os=_i.extend({_initContainer:function(){this._container=ma("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ma("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){mr(this._container),Wr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){_i.prototype._update.call(this);var u=this._bounds,y=u.getSize(),M=this._container;(!this._svgSize||!this._svgSize.equals(y))&&(this._svgSize=y,M.setAttribute("width",y.x),M.setAttribute("height",y.y)),ji(M,u.min),M.setAttribute("viewBox",[u.min.x,u.min.y,y.x,y.y].join(" ")),this.fire("update")}},_initPath:function(u){var y=u._path=ma("path");u.options.className&&br(y,u.options.className),u.options.interactive&&br(y,"leaflet-interactive"),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){mr(u._path),u.removeInteractiveTarget(u._path),delete this._layers[l(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var y=u._path,M=u.options;y&&(M.stroke?(y.setAttribute("stroke",M.color),y.setAttribute("stroke-opacity",M.opacity),y.setAttribute("stroke-width",M.weight),y.setAttribute("stroke-linecap",M.lineCap),y.setAttribute("stroke-linejoin",M.lineJoin),M.dashArray?y.setAttribute("stroke-dasharray",M.dashArray):y.removeAttribute("stroke-dasharray"),M.dashOffset?y.setAttribute("stroke-dashoffset",M.dashOffset):y.removeAttribute("stroke-dashoffset")):y.setAttribute("stroke","none"),M.fill?(y.setAttribute("fill",M.fillColor||M.color),y.setAttribute("fill-opacity",M.fillOpacity),y.setAttribute("fill-rule",M.fillRule||"evenodd")):y.setAttribute("fill","none"))},_updatePoly:function(u,y){this._setPath(u,ee(u._parts,y))},_updateCircle:function(u){var y=u._point,M=Math.max(Math.round(u._radius),1),H=Math.max(Math.round(u._radiusY),1)||M,ue="a"+M+","+H+" 0 1,0 ",Me=u._empty()?"M0 0":"M"+(y.x-M)+","+y.y+ue+M*2+",0 "+ue+-M*2+",0 ";this._setPath(u,Me)},_setPath:function(u,y){u._path.setAttribute("d",y)},_bringToFront:function(u){Sa(u._path)},_bringToBack:function(u){Go(u._path)}});Vt.vml&&os.include(Xu);function bi(u){return Vt.svg||Vt.vml?new os(u):null}Fr.include({getRenderer:function(u){var y=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return y||(y=this._renderer=this._createRenderer()),this.hasLayer(y)||this.addLayer(y),y},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var y=this._paneRenderers[u];return y===void 0&&(y=this._createRenderer({pane:u}),this._paneRenderers[u]=y),y},_createRenderer:function(u){return this.options.preferCanvas&&go(u)||bi(u)}});var Vs=gs.extend({initialize:function(u,y){gs.prototype.initialize.call(this,this._boundsToLatLngs(u),y)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=ae(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function mo(u,y){return new Vs(u,y)}os.create=ma,os.pointsToPath=ee,js.geometryToLayer=zs,js.coordsToLatLng=Ta,js.coordsToLatLngs=$s,js.latLngToCoords=Ls,js.latLngsToCoords=ha,js.getFeature=Oo,js.asFeature=Us,Fr.mergeOptions({boxZoom:!0});var lr=ri.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){_r(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Wr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){mr(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),tl(),qu(),this._startPoint=this._map.mouseEventToContainerPoint(u),_r(document,{contextmenu:Or,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=Pr("div","leaflet-zoom-box",this._container),br(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var y=new He(this._point,this._startPoint),M=y.getSize();ji(this._box,y.min),this._box.style.width=M.x+"px",this._box.style.height=M.y+"px"},_finish:function(){this._moved&&(mr(this._box),Kr(this._container,"leaflet-crosshair")),Ao(),qo(),Wr(document,{contextmenu:Or,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var y=new Z(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(y).fire("boxzoomend",{boxZoomBounds:y})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Fr.addInitHook("addHandler","boxZoom",lr),Fr.mergeOptions({doubleClickZoom:!0});var Ia=ri.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var y=this._map,M=y.getZoom(),H=y.options.zoomDelta,ue=u.originalEvent.shiftKey?M-H:M+H;y.options.doubleClickZoom==="center"?y.setZoom(ue):y.setZoomAround(u.containerPoint,ue)}});Fr.addInitHook("addHandler","doubleClickZoom",Ia),Fr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Oa=ri.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new Zo(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}br(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Kr(this._map._container,"leaflet-grab"),Kr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var y=ae(this._map.options.maxBounds);this._offsetLimit=j(this._map.latLngToContainerPoint(y.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(y.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var y=this._lastTime=+new Date,M=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(M),this._times.push(y),this._prunePositions(y)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),y=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=y.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,y){return u-(u-y)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),y=this._offsetLimit;u.x<y.min.x&&(u.x=this._viscousLimit(u.x,y.min.x)),u.y<y.min.y&&(u.y=this._viscousLimit(u.y,y.min.y)),u.x>y.max.x&&(u.x=this._viscousLimit(u.x,y.max.x)),u.y>y.max.y&&(u.y=this._viscousLimit(u.y,y.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,y=Math.round(u/2),M=this._initialWorldOffset,H=this._draggable._newPos.x,ue=(H-y+M)%u+y-M,Me=(H+y+M)%u-y-M,at=Math.abs(ue+M)<Math.abs(Me+M)?ue:Me;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=at},_onDragEnd:function(u){var y=this._map,M=y.options,H=!M.inertia||u.noInertia||this._times.length<2;if(y.fire("dragend",u),H)y.fire("moveend");else{this._prunePositions(+new Date);var ue=this._lastPos.subtract(this._positions[0]),Me=(this._lastTime-this._times[0])/1e3,at=M.easeLinearity,Mt=ue.multiplyBy(at/Me),zt=Mt.distanceTo([0,0]),on=Math.min(M.inertiaMaxSpeed,zt),Dn=Mt.multiplyBy(on/zt),Kn=on/(M.inertiaDeceleration*at),kr=Dn.multiplyBy(-Kn/2).round();!kr.x&&!kr.y?y.fire("moveend"):(kr=y._limitOffset(kr,y.options.maxBounds),R(function(){y.panBy(kr,{duration:Kn,easeLinearity:at,noMoveStart:!0,animate:!0})}))}}});Fr.addInitHook("addHandler","dragging",Oa),Fr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Qo=ri.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),_r(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Wr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,y=document.documentElement,M=u.scrollTop||y.scrollTop,H=u.scrollLeft||y.scrollLeft;this._map._container.focus(),window.scrollTo(H,M)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var y=this._panKeys={},M=this.keyCodes,H,ue;for(H=0,ue=M.left.length;H<ue;H++)y[M.left[H]]=[-1*u,0];for(H=0,ue=M.right.length;H<ue;H++)y[M.right[H]]=[u,0];for(H=0,ue=M.down.length;H<ue;H++)y[M.down[H]]=[0,u];for(H=0,ue=M.up.length;H<ue;H++)y[M.up[H]]=[0,-1*u]},_setZoomDelta:function(u){var y=this._zoomKeys={},M=this.keyCodes,H,ue;for(H=0,ue=M.zoomIn.length;H<ue;H++)y[M.zoomIn[H]]=u;for(H=0,ue=M.zoomOut.length;H<ue;H++)y[M.zoomOut[H]]=-u},_addHooks:function(){_r(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Wr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var y=u.keyCode,M=this._map,H;if(y in this._panKeys){if(!M._panAnim||!M._panAnim._inProgress)if(H=this._panKeys[y],u.shiftKey&&(H=Ce(H).multiplyBy(3)),M.options.maxBounds&&(H=M._limitOffset(Ce(H),M.options.maxBounds)),M.options.worldCopyJump){var ue=M.wrapLatLng(M.unproject(M.project(M.getCenter()).add(H)));M.panTo(ue)}else M.panBy(H)}else if(y in this._zoomKeys)M.setZoom(M.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[y]);else if(y===27&&M._popup&&M._popup.options.closeOnEscapeKey)M.closePopup();else return;Or(u)}}});Fr.addInitHook("addHandler","keyboard",Qo),Fr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var no=ri.extend({addHooks:function(){_r(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Wr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var y=Su(u),M=this._map.options.wheelDebounceTime;this._delta+=y,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var H=Math.max(M-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),H),Or(u)},_performZoom:function(){var u=this._map,y=u.getZoom(),M=this._map.options.zoomSnap||0;u._stop();var H=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ue=4*Math.log(2/(1+Math.exp(-Math.abs(H))))/Math.LN2,Me=M?Math.ceil(ue/M)*M:ue,at=u._limitZoom(y+(this._delta>0?Me:-Me))-y;this._delta=0,this._startTime=null,at&&(u.options.scrollWheelZoom==="center"?u.setZoom(y+at):u.setZoomAround(this._lastMousePos,y+at))}});Fr.addInitHook("addHandler","scrollWheelZoom",no);var th=600;Fr.mergeOptions({tapHold:Vt.touchNative&&Vt.safari&&Vt.mobile,tapTolerance:15});var Cs=ri.extend({addHooks:function(){_r(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Wr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var y=u.touches[0];this._startPos=this._newPos=new Y(y.clientX,y.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(_r(document,"touchend",vr),_r(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",y))},this),th),_r(document,"touchend touchcancel contextmenu",this._cancel,this),_r(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){Wr(document,"touchend",vr),Wr(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),Wr(document,"touchend touchcancel contextmenu",this._cancel,this),Wr(document,"touchmove",this._onMove,this)},_onMove:function(u){var y=u.touches[0];this._newPos=new Y(y.clientX,y.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,y){var M=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:y.screenX,screenY:y.screenY,clientX:y.clientX,clientY:y.clientY});M._simulated=!0,y.target.dispatchEvent(M)}});Fr.addInitHook("addHandler","tapHold",Cs),Fr.mergeOptions({touchZoom:Vt.touch,bounceAtZoomLimits:!0});var Es=ri.extend({addHooks:function(){br(this._map._container,"leaflet-touch-zoom"),_r(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Kr(this._map._container,"leaflet-touch-zoom"),Wr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var y=this._map;if(!(!u.touches||u.touches.length!==2||y._animatingZoom||this._zooming)){var M=y.mouseEventToContainerPoint(u.touches[0]),H=y.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=y.getSize()._divideBy(2),this._startLatLng=y.containerPointToLatLng(this._centerPoint),y.options.touchZoom!=="center"&&(this._pinchStartLatLng=y.containerPointToLatLng(M.add(H)._divideBy(2))),this._startDist=M.distanceTo(H),this._startZoom=y.getZoom(),this._moved=!1,this._zooming=!0,y._stop(),_r(document,"touchmove",this._onTouchMove,this),_r(document,"touchend touchcancel",this._onTouchEnd,this),vr(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var y=this._map,M=y.mouseEventToContainerPoint(u.touches[0]),H=y.mouseEventToContainerPoint(u.touches[1]),ue=M.distanceTo(H)/this._startDist;if(this._zoom=y.getScaleZoom(ue,this._startZoom),!y.options.bounceAtZoomLimits&&(this._zoom<y.getMinZoom()&&ue<1||this._zoom>y.getMaxZoom()&&ue>1)&&(this._zoom=y._limitZoom(this._zoom)),y.options.touchZoom==="center"){if(this._center=this._startLatLng,ue===1)return}else{var Me=M._add(H)._divideBy(2)._subtract(this._centerPoint);if(ue===1&&Me.x===0&&Me.y===0)return;this._center=y.unproject(y.project(this._pinchStartLatLng,this._zoom).subtract(Me),this._zoom)}this._moved||(y._moveStart(!0,!1),this._moved=!0),$(this._animRequest);var at=o(y._move,y,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=R(at,this,!0),vr(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,$(this._animRequest),Wr(document,"touchmove",this._onTouchMove,this),Wr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Fr.addInitHook("addHandler","touchZoom",Es),Fr.BoxZoom=lr,Fr.DoubleClickZoom=Ia,Fr.Drag=Oa,Fr.Keyboard=Qo,Fr.ScrollWheelZoom=no,Fr.TapHold=Cs,Fr.TouchZoom=Es,n.Bounds=He,n.Browser=Vt,n.CRS=me,n.Canvas=No,n.Circle=Fs,n.CircleMarker=po,n.Class=K,n.Control=nr,n.DivIcon=pa,n.DivOverlay=to,n.DomEvent=nu,n.DomUtil=fr,n.Draggable=Zo,n.Evented=J,n.FeatureGroup=Js,n.GeoJSON=js,n.GridLayer=jr,n.Handler=ri,n.Icon=ua,n.ImageOverlay=kn,n.LatLng=de,n.LatLngBounds=Z,n.Layer=Tr,n.LayerGroup=Rs,n.LineUtil=Ar,n.Map=Fr,n.Marker=ss,n.Mixin=Cc,n.Path=Io,n.Point=Y,n.PolyUtil=kl,n.Polygon=gs,n.Polyline=eo,n.Popup=Ti,n.PosAnimation=Cu,n.Projection=si,n.Rectangle=Vs,n.Renderer=_i,n.SVG=os,n.SVGOverlay=oi,n.TileLayer=Ss,n.Tooltip=Da,n.Transformation=Le,n.Util=X,n.VideoOverlay=pr,n.bind=o,n.bounds=j,n.canvas=go,n.circle=Qs,n.circleMarker=Tl,n.control=qi,n.divIcon=ga,n.extend=i,n.featureGroup=Mu,n.geoJSON=Gt,n.geoJson=kt,n.gridLayer=Jo,n.icon=Zu,n.imageOverlay=Hn,n.latLng=ge,n.latLngBounds=ae,n.layerGroup=Al,n.map=Wi,n.marker=ca,n.point=Ce,n.polygon=ka,n.polyline=Ec,n.popup=da,n.rectangle=mo,n.setOptions=E,n.stamp=l,n.svg=bi,n.svgOverlay=au,n.tileLayer=ai,n.tooltip=fa,n.transformation=qe,n.version=r,n.videoOverlay=Ai;var ea=window.L;n.noConflict=function(){return window.L=ea,this},window.L=n})})(tb,tb.exports);var en=tb.exports;const es=E_(en);var U4={exports:{}};(function(t,e){(function(n,r){r(e)})(oa,function(n){var r=typeof window<"u"?window:typeof oa<"u"?oa:typeof self<"u"?self:{};function i(c,d){return c(d={exports:{}},d.exports),d.exports}var s=i(function(c,d){(function(p){const v={escape:function(F){return F.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:m,mimeType:function(F){return F=m(F).toLowerCase(),function(){var N="application/font-woff",J="image/jpeg";return{woff:N,woff2:N,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:J,jpeg:J,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[F]||""},dataAsUrl:function(F,N){return`data:${N};base64,`+F},isDataUrl:function(F){return F.search(/^(data:)/)!==-1},canvasToBlob:function(F){return F.toBlob?new Promise(function(J){F.toBlob(J)}):(N=F,new Promise(function(J){const Y=fe(N.toDataURL().split(",")[1]);var ye=Y.length;const Ce=new Uint8Array(ye);for(let He=0;He<ye;He++)Ce[He]=Y.charCodeAt(He);J(new Blob([Ce],{type:"image/png"}))}));var N},resolveUrl:function(F,N){const J=document.implementation.createHTMLDocument(),Y=J.createElement("base"),ye=(J.head.appendChild(Y),J.createElement("a"));return J.body.appendChild(ye),Y.href=N,ye.href=F,ye.href},getAndEncode:function(F){let N=Q.impl.urlCache.find(function(J){return J.url===F});return N||(N={url:F,promise:null},Q.impl.urlCache.push(N)),N.promise===null&&(Q.impl.options.cacheBust&&(F+=(/\?/.test(F)?"&":"?")+new Date().getTime()),N.promise=new Promise(function(J){const Y=Q.impl.options.httpTimeout,ye=new XMLHttpRequest;let Ce;var He;function j(Z){console.error(Z),J("")}ye.onreadystatechange=function(){if(ye.readyState===4)if(ye.status!==200)Ce?J(Ce):j(`cannot fetch resource: ${F}, status: `+ye.status);else{const Z=new FileReader;Z.onloadend=function(){var ae=Z.result.split(/,/)[1];J(ae)},Z.readAsDataURL(ye.response)}},ye.ontimeout=function(){Ce?J(Ce):j(`timeout of ${Y}ms occured while fetching resource: `+F)},ye.responseType="blob",ye.timeout=Y,Q.impl.options.useCredentials&&(ye.withCredentials=!0),ye.open("GET",F,!0),ye.send(),Q.impl.options.imagePlaceholder&&(He=Q.impl.options.imagePlaceholder.split(/,/))&&He[1]&&(Ce=He[1])})),N.promise},uid:function(){let F=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+F++}}(),delay:function(F){return function(N){return new Promise(function(J){setTimeout(function(){J(N)},F)})}},asArray:function(F){const N=[],J=F.length;for(let Y=0;Y<J;Y++)N.push(F[Y]);return N},escapeXhtml:function(F){return F.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(F){return F!=="data:,"?new Promise(function(N,J){const Y=new Image;Q.impl.options.useCredentials&&(Y.crossOrigin="use-credentials"),Y.onload=function(){N(Y)},Y.onerror=J,Y.src=F}):Promise.resolve()},width:function(F){var N=x(F,"border-left-width"),J=x(F,"border-right-width");return F.scrollWidth+N+J},height:function(F){var N=x(F,"border-top-width"),J=x(F,"border-bottom-width");return F.scrollHeight+N+J}};function m(F){return(F=/\.([^\.\/]*?)(\?|$)/g.exec(F))?F[1]:""}function x(F,N){const J=pe(F).getPropertyValue(N);return parseFloat(J.replace("px",""))}const E=function(){const F=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(ye,Ce,He){return N(ye)?Promise.resolve(ye).then(J).then(function(j){let Z=Promise.resolve(ye);return j.forEach(function(ae){Z=Z.then(function(de){return Y(de,ae,Ce,He)})}),Z}):Promise.resolve(ye)},shouldProcess:N,impl:{readUrls:J,inline:Y}};function N(ye){return ye.search(F)!==-1}function J(ye){const Ce=[];for(var He;(He=F.exec(ye))!==null;)Ce.push(He[1]);return Ce.filter(function(j){return!v.isDataUrl(j)})}function Y(ye,Ce,He,j){return Promise.resolve(Ce).then(function(Z){return He?v.resolveUrl(Z,He):Z}).then(j||v.getAndEncode).then(function(Z){return v.dataAsUrl(Z,v.mimeType(Ce))}).then(function(Z){return ye.replace((ae=Ce,new RegExp(`(url\\(['"]?)(${v.escape(ae)})(['"]?\\))`,"g")),`$1${Z}$3`);var ae})}}(),T={resolveAll:function(){return D().then(function(F){return Promise.all(F.map(function(N){return N.resolve()}))}).then(function(F){return F.join(`
`)})},impl:{readAll:D}};function D(){return Promise.resolve(v.asArray(document.styleSheets)).then(function(N){const J=[];return N.forEach(function(Y){if(Object.getPrototypeOf(Y).hasOwnProperty("cssRules"))try{v.asArray(Y.cssRules||[]).forEach(J.push.bind(J))}catch(ye){console.log("Error while reading CSS rules from "+Y.href,ye.toString())}}),J}).then(function(N){return N.filter(function(J){return J.type===CSSRule.FONT_FACE_RULE}).filter(function(J){return E.shouldProcess(J.style.getPropertyValue("src"))})}).then(function(N){return N.map(F)});function F(N){return{resolve:function(){var J=(N.parentStyleSheet||{}).href;return E.inlineAll(N.cssText,J)},src:function(){return N.style.getPropertyValue("src")}}}}const k={inlineAll:function F(N){return N instanceof Element?function(J){const Y=J.style.getPropertyValue("background");return Y?E.inlineAll(Y).then(function(ye){J.style.setProperty("background",ye,Y)}).then(function(){return J}):Promise.resolve(J)}(N).then(function(){return N instanceof HTMLImageElement?B(N).inline():Promise.all(v.asArray(N.childNodes).map(function(J){return F(J)}))}):Promise.resolve(N)},impl:{newImage:B}};function B(F){return{inline:function(N){return v.isDataUrl(F.src)?Promise.resolve():Promise.resolve(F.src).then(N||v.getAndEncode).then(function(J){return v.dataAsUrl(J,v.mimeType(F.src))}).then(function(J){return new Promise(function(Y){F.onload=Y,F.onerror=Y,F.src=J})})}}}const W={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},Q={toSvg:O,toPng:function(F,N){return(N=N||{}).raster=!0,U(F,N).then(function(J){return J.toDataURL()})},toJpeg:function(F,N){return(N=N||{}).raster=!0,U(F,N).then(function(J){return J.toDataURL("image/jpeg",N.quality||1)})},toBlob:function(F,N){return(N=N||{}).raster=!0,U(F,N).then(v.canvasToBlob)},toPixelData:function(F,N){return(N=N||{}).raster=!0,U(F,N).then(function(J){return J.getContext("2d").getImageData(0,0,v.width(F),v.height(F)).data})},toCanvas:function(F,N){return(N=N||{}).raster=!0,U(F,N||{})},impl:{fontFaces:T,images:k,util:v,inliner:E,urlCache:[],options:{}}},pe=(c.exports=Q,p.getComputedStyle||window.getComputedStyle),fe=p.atob||window.atob;function O(F,N){var J=N=N||{};return J.imagePlaceholder===void 0?Q.impl.options.imagePlaceholder=W.imagePlaceholder:Q.impl.options.imagePlaceholder=J.imagePlaceholder,J.cacheBust===void 0?Q.impl.options.cacheBust=W.cacheBust:Q.impl.options.cacheBust=J.cacheBust,J.useCredentials===void 0?Q.impl.options.useCredentials=W.useCredentials:Q.impl.options.useCredentials=J.useCredentials,Promise.resolve(F).then(function(Y){return function ye(Ce,He,j,Z,ae=null){return j||!He||He(Ce)?Promise.resolve(Ce).then(function(de){return de instanceof HTMLCanvasElement?v.makeImage(de.toDataURL()):de.nodeName==="IFRAME"?html2canvas(de.contentDocument.body).then(ge=>ge.toDataURL()).then(v.makeImage):de.cloneNode(!1)}).then(function(de){return function(ge,me){const oe=ge.childNodes;return oe.length===0?Promise.resolve(me):function(re,Te){const Le=pe(ge);let qe=Promise.resolve();return Te.forEach(function(se){qe=qe.then(function(){return ye(se,He,!1,Z,Le)}).then(function(le){le&&re.appendChild(le)})}),qe}(me,v.asArray(oe)).then(function(){return me})}(Ce,de)}).then(function(de){return function(ge,me,oe){return me instanceof Element?Promise.resolve().then(function(){(function(re,Te){const Le=pe(re);Le.cssText?(Te.style.cssText=Le.cssText,function(qe,se){se.font=qe.font,se.fontFamily=qe.fontFamily,se.fontFeatureSettings=qe.fontFeatureSettings,se.fontKerning=qe.fontKerning,se.fontSize=qe.fontSize,se.fontStretch=qe.fontStretch,se.fontStyle=qe.fontStyle,se.fontVariant=qe.fontVariant,se.fontVariantCaps=qe.fontVariantCaps,se.fontVariantEastAsian=qe.fontVariantEastAsian,se.fontVariantLigatures=qe.fontVariantLigatures,se.fontVariantNumeric=qe.fontVariantNumeric,se.fontVariationSettings=qe.fontVariationSettings,se.fontWeight=qe.fontWeight}(Le,Te.style)):(oe?function(qe,se,le,he){const ee=le.style,be=qe.style;for(var je of se){var We=se.getPropertyValue(je),Qe=be.getPropertyValue(je),Je=(be.setProperty(je,he?"initial":"unset"),se.getPropertyValue(je));Je!==We?ee.setProperty(je,We):ee.removeProperty(je),be.setProperty(je,Qe)}}(re,Le,Te,j):function(qe,se,le){const he=function(be){if(K[be])return K[be];X||((X=document.createElement("iframe")).style.visibility="hidden",X.style.position="fixed",document.body.appendChild(X),X.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const je=document.createElement(be),We=(X.contentWindow.document.body.appendChild(je),je.textContent=".",X.contentWindow.getComputedStyle(je)),Qe={};return v.asArray(We).forEach(function(Je){Qe[Je]=Je==="width"||Je==="height"?"auto":We.getPropertyValue(Je)}),X.contentWindow.document.body.removeChild(je),K[be]=Qe}(le.tagName),ee=le.style;v.asArray(qe).forEach(function(be){var je=qe.getPropertyValue(be);(je!==he[be]||se&&je!==se.getPropertyValue(be))&&ee.setProperty(be,je,qe.getPropertyPriority(be))})}(Le,ae,Te),j&&(["inset-block","inset-block-start","inset-block-end"].forEach(qe=>Te.style.removeProperty(qe)),["left","right","top","bottom"].forEach(qe=>{Te.style.getPropertyValue(qe)&&Te.style.setProperty(qe,"0px")})))})(ge,me)}).then(function(){[":before",":after"].forEach(function(re){(function(Te){const Le=pe(ge,Te),qe=Le.getPropertyValue("content");if(qe!==""&&qe!=="none"){const se=v.uid(),le=me.getAttribute("class"),he=(le&&me.setAttribute("class",le+" "+se),document.createElement("style"));he.appendChild(function(){const ee=`.${se}:`+Te,be=(Le.cssText?function(){return`${Le.cssText} content: ${Le.getPropertyValue("content")};`}:function(){return v.asArray(Le).map(function(je){return je+": "+Le.getPropertyValue(je)+(Le.getPropertyPriority(je)?" !important":"")}).join("; ")+";"})();return document.createTextNode(ee+`{${be}}`)}()),me.appendChild(he)}})(re)})}).then(function(){ge instanceof HTMLTextAreaElement&&(me.innerHTML=ge.value),ge instanceof HTMLInputElement&&me.setAttribute("value",ge.value)}).then(function(){me instanceof SVGElement&&(me.setAttribute("xmlns","http://www.w3.org/2000/svg"),me instanceof SVGRectElement&&["width","height"].forEach(function(re){const Te=me.getAttribute(re);Te&&me.style.setProperty(re,Te)}))}).then(function(){return me}):me}(Ce,de,Z)}):Promise.resolve()}(Y,N.filter,!0,!N.raster)}).then(q).then(R).then(function(Y){N.bgcolor&&(Y.style.backgroundColor=N.bgcolor),N.width&&(Y.style.width=N.width+"px"),N.height&&(Y.style.height=N.height+"px"),N.style&&Object.keys(N.style).forEach(function(Ce){Y.style[Ce]=N.style[Ce]});let ye=null;return typeof N.onclone=="function"&&(ye=N.onclone(Y)),Promise.resolve(ye).then(function(){return Y})}).then(function(Y){return Y=Y,ye=N.width||v.width(F),Ce=N.height||v.height(F),Promise.resolve(Y).then(function(He){return He.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(He)}).then(v.escapeXhtml).then(function(He){return`<foreignObject x="0" y="0" width="100%" height="100%">${He}</foreignObject>`}).then(function(He){return`<svg xmlns="http://www.w3.org/2000/svg" width="${ye}" height="${Ce}">${He}</svg>`}).then(function(He){return"data:image/svg+xml;charset=utf-8,"+He});var ye,Ce}).then(function(Y){return Q.impl.urlCache=[],Y})}function U(F,N){return O(F,N).then(v.makeImage).then(v.delay(0)).then(function(J){var Y=typeof N.scale!="number"?1:N.scale;const ye=function(He,j){const Z=document.createElement("canvas");if(Z.width=(N.width||v.width(He))*j,Z.height=(N.height||v.height(He))*j,N.bgcolor){const ae=Z.getContext("2d");ae.fillStyle=N.bgcolor,ae.fillRect(0,0,Z.width,Z.height)}return Z}(F,Y),Ce=ye.getContext("2d");return Ce.mozImageSmoothingEnabled=!1,Ce.msImageSmoothingEnabled=!1,Ce.imageSmoothingEnabled=!1,J&&(Ce.scale(Y,Y),Ce.drawImage(J,0,0)),X&&(document.body.removeChild(X),X=null,$&&clearTimeout($),$=setTimeout(()=>{$=null,K={}},2e4)),ye})}function q(F){return T.resolveAll().then(function(N){const J=document.createElement("style");return F.appendChild(J),J.appendChild(document.createTextNode(N)),F})}function R(F){return k.inlineAll(F).then(function(){return F})}let $=null,X=null,K={}})(r)}),o=i(function(c,d){(function(){function p(T,D,k){var B=new XMLHttpRequest;B.open("GET",T),B.responseType="blob",B.onload=function(){E(B.response,D,k)},B.onerror=function(){console.error("could not download file")},B.send()}function v(T){var D=new XMLHttpRequest;D.open("HEAD",T,!1);try{D.send()}catch{}return 200<=D.status&&299>=D.status}function m(T){try{T.dispatchEvent(new MouseEvent("click"))}catch{var D=document.createEvent("MouseEvents");D.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),T.dispatchEvent(D)}}var x=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,E=x.saveAs||(typeof window!="object"||window!==x?function(){}:"download"in HTMLAnchorElement.prototype?function(T,D,k){var B=x.URL||x.webkitURL,W=document.createElement("a");D=D||T.name||"download",W.download=D,W.rel="noopener",typeof T=="string"?(W.href=T,W.origin===location.origin?m(W):v(W.href)?p(T,D,k):m(W,W.target="_blank")):(W.href=B.createObjectURL(T),setTimeout(function(){B.revokeObjectURL(W.href)},4e4),setTimeout(function(){m(W)},0))}:"msSaveOrOpenBlob"in navigator?function(T,D,k){if(D=D||T.name||"download",typeof T!="string")navigator.msSaveOrOpenBlob(function(W,Q){return Q===void 0?Q={autoBom:!1}:typeof Q!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),Q={autoBom:!Q}),Q.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(W.type)?new Blob(["\uFEFF",W],{type:W.type}):W}(T,k),D);else if(v(T))p(T,D,k);else{var B=document.createElement("a");B.href=T,B.target="_blank",setTimeout(function(){m(B)})}}:function(T,D,k,B){if((B=B||open("","_blank"))&&(B.document.title=B.document.body.innerText="downloading..."),typeof T=="string")return p(T,D,k);var W=T.type==="application/octet-stream",Q=/constructor/i.test(x.HTMLElement)||x.safari,pe=/CriOS\/[\d]+/.test(navigator.userAgent);if((pe||W&&Q)&&typeof FileReader=="object"){var fe=new FileReader;fe.onloadend=function(){var q=fe.result;q=pe?q:q.replace(/^data:[^;]*;/,"data:attachment/file;"),B?B.location.href=q:location=q,B=null},fe.readAsDataURL(T)}else{var O=x.URL||x.webkitURL,U=O.createObjectURL(T);B?B.location=U:location.href=U,B=null,setTimeout(function(){O.revokeObjectURL(U)},4e4)}});x.saveAs=E.saveAs=E,c.exports=E})()}),a=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(c){var d=c.node,p=c.error;return console.warn("Map node is very big "+d.scrollWidth+"x"+d.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(p)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var c=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v={};for(var m in this.options)p.hasOwnProperty(m)?v[m]=p[m]:v[m]=this.options[m];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return c._getPixelData(v)}).then(function(x){return c._setElementsVisible(!0),c._toCanvas(x,v)}).then(function(x){return d==="image"?c._canvasToImage(x,v):d==="canvas"?x:c._canvasToBlob(x,v)}).then(function(x){return c._screenState.status=1,c._map.fire("simpleMapScreenshoter.done"),x}).catch(function(x){return c._setElementsVisible(!0),c._screenState.status=1,c._map.fire("simpleMapScreenshoter.error",{e:x}),Promise.reject(x)}),this._screenState.promise)},_setElementsVisible:function(){var c=this,d=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(p){var v=c._map._container.querySelectorAll(p),m=!0,x=!1,E=void 0;try{for(var T,D=v[Symbol.iterator]();!(m=(T=D.next()).done);m=!0)T.value.style.opacity=d===!1?0:1}catch(k){x=!0,E=k}finally{try{!m&&D.return&&D.return()}finally{if(x)throw E}}})},_canvasToImage:function(c,d){var p=d.mimeType,v=c.toDataURL(p);return v.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(v)},_canvasToBlob:function(c,d){var p=d.mimeType;return new Promise(function(v,m){c.toBlob(function(x){v(x)},p)})},_toCanvas:function(c,d){var p=d.captionOffset,v=d.caption,m=d.captionFontSize,x=d.captionFont,E=d.captionColor,T=d.captionBgColor,D=this._node,k=D.screenHeight,B=D.screenWidth,W=document.createElement("canvas");W.width=B,W.height=k;for(var Q=W.getContext("2d"),pe=Q.createImageData(B,k),fe=0;fe<c.length;++fe)pe.data[fe]=c[fe];Q.putImageData(pe,0,0),pe=null;var O=document.createElement("canvas"),U=O.getContext("2d"),q=0,R=0,$=k,X=B;if(this.options.cropImageByInnerWH===!0){for(var K=[],F=0,N=0;N<k;++N){F=0;for(var J=0;J<B;++J)c[4*N*B+4*J+4]===0&&F++;F===B&&K.push(N)}var Y=this._getMinAndMaxOnValuesBreak(K);q=Y.min;for(var ye=B,Ce=Y.max,He=[],j=0,Z=R;Z<ye;++Z){j=0;for(var ae=0;ae<k;++ae)c[4*ae*B+4*Z+4]===0&&j++;j===k&&He.push(Z)}var de=this._getMinAndMaxOnValuesBreak(He);R=de.min,ye=de.max,(R===0&&ye===0||ye===null)&&(ye=B),(q===0&&Ce===0||Ce===null)&&(Ce=k),this.options.debugMode===!0&&(console.log("emptyYLine",K),console.log("minMaxY",Y),console.log("emptyXLine",He),console.log("minMaxX",de),console.log("debugX",{}),console.log("debugY",{})),q===0&&Ce===k&&R===0&&ye===B||(q+=this.options.onCropBorderSize,Ce-=this.options.onCropBorderSize,R+=this.options.onCropBorderSize,ye-=this.options.onCropBorderSize),$=Ce-q,X=ye-R,O.width=X,O.height=$}else O.width=X,O.height=$;var ge=null;return v&&(ge=typeof v=="function"?v.call(this):v),ge!==null&&(O.height=O.height+(p+m+p),U.beginPath(),U.rect(0,0,O.width,O.height),U.fillStyle=T,U.fill(),U.save()),U.drawImage(W,R,q,X,$,0,0,X,$),ge!==null&&(U.font=m+"px "+x,U.fillStyle=E,U.fillText(ge,p,$+p+m)),Promise.resolve(O)},_getMinAndMaxOnValuesBreak:function(c){for(var d=0,p=0,v=!1,m=1;m<c.length;m++){if(c[m]-1!==c[m-1]){p=c[m],v=!0;break}d=c[m]}return v===!1&&c[0]>1?(d=0,p=c[0]):v===!1&&(d=c[c.length-1]||0,p=null),{min:d,max:p}},_getPixelData:function(c){var d=this,p=c.domtoimageOptions,v=p===void 0?{}:p;return this._getPixelDataOfNormalMap(v).catch(function(m){return console.warn("May be map size very big on that zoom level, we have error:",m.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),d._getPixelDataOfBigMap(v)})},_getPixelDataOfNormalMap:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=this._map.getContainer();return this._node={node:d,screenHeight:d.scrollHeight,screenWidth:d.scrollWidth},s.toPixelData(d,c)},_getPixelDataOfBigMap:function(){var c=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=this._map.getContainer(),v=this._map.getPane("mapPane");v.style.width=2*p.clientWidth+"px",v.style.height=2*p.clientHeight+"px",v.style.overflow="hidden";var m=function(){v.style.width="initial",v.style.height="initial",v.style.overflow="initial"};return this._node={node:p,screenHeight:p.scrollHeight,screenWidth:p.scrollWidth},s.toPixelData(p,d).then(function(x){return m(),x}).catch(function(x){return m(),p.scrollHeight>=4e3||p.scrollWidth>=4e3?c.options.onPixelDataFail({plugin:c,node:p,mapPane:v,error:x,domtoimageOptions:d}):Promise.reject(x)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var c=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,d=document.head||document.getElementsByTagName("head")[0],p=document.createElement("style");p.appendChild(document.createTextNode(c)),d.appendChild(p)},_onScreenBtn:function(){var c=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(d){var p=typeof c.options.screenName=="function"?c.options.screenName.call(c):c.options.screenName;o.saveAs(d,p+".png")}).catch(function(d){c._map.fire("simpleMapScreenshoter.error",{e:d})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var c=this;return new Promise(function(d){var p=setInterval(function(){c._interaction||(d(),clearInterval(p))},100)})}}),l=(L.Control.SimpleMapScreenshoter=a,L.simpleMapScreenshoter=function(c){return new L.Control.SimpleMapScreenshoter(c)},a);n.default=l,n.SimpleMapScreenshoter=a,Object.defineProperty(n,"__esModule",{value:!0})})})(U4,U4.exports);var pl=63710088e-1,sE={centimeters:pl*100,centimetres:pl*100,degrees:360/(2*Math.PI),feet:pl*3.28084,inches:pl*39.37,kilometers:pl/1e3,kilometres:pl/1e3,meters:pl,metres:pl,miles:pl/1609.344,millimeters:pl*1e3,millimetres:pl*1e3,nauticalmiles:pl/1852,radians:1,yards:pl*1.0936};function wp(t,e,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function Dv(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!V4(t[0])||!V4(t[1]))throw new Error("coordinates must contain numbers");return wp({type:"Point",coordinates:t},e,n)}function zc(t,e,n={}){for(const i of t){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return wp({type:"Polygon",coordinates:t},e,n)}function lm(t,e,n={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return wp({type:"LineString",coordinates:t},e,n)}function O9(t,e={}){const n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function N9(t,e,n={}){return wp({type:"MultiPolygon",coordinates:t},e,n)}function B9(t,e="kilometers"){const n=sE[e];if(!n)throw new Error(e+" units is invalid");return t*n}function R9(t,e="kilometers"){const n=sE[e];if(!n)throw new Error(e+" units is invalid");return t/n}function nb(t){return t%(2*Math.PI)*180/Math.PI}function pc(t){return t%360*Math.PI/180}function V4(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function H4(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function F9(t){return t.type==="Feature"?t.geometry:t}function oE(t,e,n={}){if(n.final===!0)return j9(t,e);const r=H4(t),i=H4(e),s=pc(r[0]),o=pc(i[0]),a=pc(r[1]),l=pc(i[1]),c=Math.sin(o-s)*Math.cos(l),d=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(o-s);return nb(Math.atan2(c,d))}function j9(t,e){let n=oE(e,t);return n=(n+180)%360,n}function z9(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function aE(t,e,n,r={}){const i=z9(t),s=pc(i[0]),o=pc(i[1]),a=pc(n),l=R9(e,r.units),c=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(a)),d=s+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(c)),p=nb(d),v=nb(c);return Dv([p,v],r.properties)}function G4(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function lE(t,e,n={}){var r=G4(t),i=G4(e),s=pc(i[1]-r[1]),o=pc(i[0]-r[0]),a=pc(r[1]),l=pc(i[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return B9(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}function $9(t,e,n={}){const i=F9(t).coordinates;let s=0;for(let o=0;o<i.length&&!(e>=s&&o===i.length-1);o++)if(s>=e){const a=e-s;if(a){const l=oE(i[o],i[o-1])-180;return aE(i[o],a,l,n)}else return Dv(i[o])}else s+=lE(i[o],i[o+1],n);return Dv(i[i.length-1])}var W4=$9;function U9(t,e){var n,r,i,s,o,a,l,c,d,p,v=0,m=t.type==="FeatureCollection",x=t.type==="Feature",E=m?t.features.length:1;for(n=0;n<E;n++){for(a=m?t.features[n].geometry:x?t.geometry:t,c=m?t.features[n].properties:x?t.properties:{},d=m?t.features[n].bbox:x?t.bbox:void 0,p=m?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,d,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,d,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,d,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function V9(t,e,n){var r=n;return U9(t,function(i,s,o,a,l){s===0&&n===void 0?r=i:r=e(r,i,s,o,a,l)}),r}function uE(t){return V9(t,(e,n)=>e+H9(n),0)}function H9(t){let e=0,n;switch(t.type){case"Polygon":return q4(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=q4(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function q4(t){let e=0;if(t&&t.length>0){e+=Math.abs(Y4(t[0]));for(let n=1;n<t.length;n++)e-=Math.abs(Y4(t[n]))}return e}var G9=pl*pl/2,j1=Math.PI/180;function Y4(t){const e=t.length-1;if(e<=2)return 0;let n=0,r=0;for(;r<e;){const i=t[r],s=t[r+1===e?0:r+1],o=t[r+2>=e?(r+2)%e:r+2],a=i[0]*j1,l=s[1]*j1,c=o[0]*j1;n+=(c-a)*Math.sin(l),r++}return n*G9}var Gh=uE;function cE(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,d=0,p=0,v,m=t.type,x=m==="FeatureCollection",E=m==="Feature",T=x?t.features.length:1,D=0;D<T;D++){c=x?t.features[D].geometry:E?t.geometry:t,v=c?c.type==="GeometryCollection":!1,a=v?c.geometries.length:1;for(var k=0;k<a;k++){var B=0,W=0;if(o=v?c.geometries[k]:c,o!==null){l=o.coordinates;var Q=o.type;switch(d=Q==="Polygon"||Q==="MultiPolygon"?1:0,Q){case null:break;case"Point":if(e(l,p,D,B,W)===!1)return!1;p++,B++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,D,B,W)===!1)return!1;p++,Q==="MultiPoint"&&B++}Q==="LineString"&&B++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-d;i++){if(e(l[r][i],p,D,B,W)===!1)return!1;p++}Q==="MultiLineString"&&B++,Q==="Polygon"&&W++}Q==="Polygon"&&B++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(W=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-d;s++){if(e(l[r][i][s],p,D,B,W)===!1)return!1;p++}W++}B++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(cE(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function W9(t,e={}){let n=0,r=0,i=0;return cE(t,function(s){n+=s[0],r+=s[1],i++}),Dv([n/i,r/i],e.properties)}var Ng=W9;function q9(t,e,n={}){const r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&t.type==="Feature"&&t.properties?t.properties:{},s=[];for(let o=0;o<r;o++)s.push(aE(t,e,o*-360/r,n).geometry.coordinates);return s.push(s[0]),zc([s],i)}var Y9=q9,K9=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,z1=Math.ceil,Fu=Math.floor,zl="[BigNumber Error] ",K4=zl+"Number primitive has more than 15 significant digits: ",oc=1e14,Ur=14,Z4=9007199254740991,$1=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Wh=1e7,du=1e9;function hE(t){var e,n,r,i=k.prototype={constructor:k,toString:null,valueOf:null},s=new k(1),o=20,a=4,l=-7,c=21,d=-1e7,p=1e7,v=!1,m=1,x=0,E={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},T="0123456789abcdefghijklmnopqrstuvwxyz",D=!0;function k(O,U){var q,R,$,X,K,F,N,J,Y=this;if(!(Y instanceof k))return new k(O,U);if(U==null){if(O&&O._isBigNumber===!0){Y.s=O.s,!O.c||O.e>p?Y.c=Y.e=null:O.e<d?Y.c=[Y.e=0]:(Y.e=O.e,Y.c=O.c.slice());return}if((F=typeof O=="number")&&O*0==0){if(Y.s=1/O<0?(O=-O,-1):1,O===~~O){for(X=0,K=O;K>=10;K/=10,X++);X>p?Y.c=Y.e=null:(Y.e=X,Y.c=[O]);return}J=String(O)}else{if(!K9.test(J=String(O)))return r(Y,J,F);Y.s=J.charCodeAt(0)==45?(J=J.slice(1),-1):1}(X=J.indexOf("."))>-1&&(J=J.replace(".","")),(K=J.search(/e/i))>0?(X<0&&(X=K),X+=+J.slice(K+1),J=J.substring(0,K)):X<0&&(X=J.length)}else{if(qs(U,2,T.length,"Base"),U==10&&D)return Y=new k(O),pe(Y,o+Y.e+1,a);if(J=String(O),F=typeof O=="number"){if(O*0!=0)return r(Y,J,F,U);if(Y.s=1/O<0?(J=J.slice(1),-1):1,k.DEBUG&&J.replace(/^0\.0*|\./,"").length>15)throw Error(K4+O)}else Y.s=J.charCodeAt(0)===45?(J=J.slice(1),-1):1;for(q=T.slice(0,U),X=K=0,N=J.length;K<N;K++)if(q.indexOf(R=J.charAt(K))<0){if(R=="."){if(K>X){X=N;continue}}else if(!$&&(J==J.toUpperCase()&&(J=J.toLowerCase())||J==J.toLowerCase()&&(J=J.toUpperCase()))){$=!0,K=-1,X=0;continue}return r(Y,String(O),F,U)}F=!1,J=n(J,U,10,Y.s),(X=J.indexOf("."))>-1?J=J.replace(".",""):X=J.length}for(K=0;J.charCodeAt(K)===48;K++);for(N=J.length;J.charCodeAt(--N)===48;);if(J=J.slice(K,++N)){if(N-=K,F&&k.DEBUG&&N>15&&(O>Z4||O!==Fu(O)))throw Error(K4+Y.s*O);if((X=X-K-1)>p)Y.c=Y.e=null;else if(X<d)Y.c=[Y.e=0];else{if(Y.e=X,Y.c=[],K=(X+1)%Ur,X<0&&(K+=Ur),K<N){for(K&&Y.c.push(+J.slice(0,K)),N-=Ur;K<N;)Y.c.push(+J.slice(K,K+=Ur));K=Ur-(J=J.slice(K)).length}else K-=N;for(;K--;J+="0");Y.c.push(+J)}}else Y.c=[Y.e=0]}k.clone=hE,k.ROUND_UP=0,k.ROUND_DOWN=1,k.ROUND_CEIL=2,k.ROUND_FLOOR=3,k.ROUND_HALF_UP=4,k.ROUND_HALF_DOWN=5,k.ROUND_HALF_EVEN=6,k.ROUND_HALF_CEIL=7,k.ROUND_HALF_FLOOR=8,k.EUCLID=9,k.config=k.set=function(O){var U,q;if(O!=null)if(typeof O=="object"){if(O.hasOwnProperty(U="DECIMAL_PLACES")&&(q=O[U],qs(q,0,du,U),o=q),O.hasOwnProperty(U="ROUNDING_MODE")&&(q=O[U],qs(q,0,8,U),a=q),O.hasOwnProperty(U="EXPONENTIAL_AT")&&(q=O[U],q&&q.pop?(qs(q[0],-1e9,0,U),qs(q[1],0,du,U),l=q[0],c=q[1]):(qs(q,-1e9,du,U),l=-(c=q<0?-q:q))),O.hasOwnProperty(U="RANGE"))if(q=O[U],q&&q.pop)qs(q[0],-1e9,-1,U),qs(q[1],1,du,U),d=q[0],p=q[1];else if(qs(q,-1e9,du,U),q)d=-(p=q<0?-q:q);else throw Error(zl+U+" cannot be zero: "+q);if(O.hasOwnProperty(U="CRYPTO"))if(q=O[U],q===!!q)if(q)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))v=q;else throw v=!q,Error(zl+"crypto unavailable");else v=q;else throw Error(zl+U+" not true or false: "+q);if(O.hasOwnProperty(U="MODULO_MODE")&&(q=O[U],qs(q,0,9,U),m=q),O.hasOwnProperty(U="POW_PRECISION")&&(q=O[U],qs(q,0,du,U),x=q),O.hasOwnProperty(U="FORMAT"))if(q=O[U],typeof q=="object")E=q;else throw Error(zl+U+" not an object: "+q);if(O.hasOwnProperty(U="ALPHABET"))if(q=O[U],typeof q=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(q))D=q.slice(0,10)=="0123456789",T=q;else throw Error(zl+U+" invalid: "+q)}else throw Error(zl+"Object expected: "+O);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[l,c],RANGE:[d,p],CRYPTO:v,MODULO_MODE:m,POW_PRECISION:x,FORMAT:E,ALPHABET:T}},k.isBigNumber=function(O){if(!O||O._isBigNumber!==!0)return!1;if(!k.DEBUG)return!0;var U,q,R=O.c,$=O.e,X=O.s;e:if({}.toString.call(R)=="[object Array]"){if((X===1||X===-1)&&$>=-1e9&&$<=du&&$===Fu($)){if(R[0]===0){if($===0&&R.length===1)return!0;break e}if(U=($+1)%Ur,U<1&&(U+=Ur),String(R[0]).length==U){for(U=0;U<R.length;U++)if(q=R[U],q<0||q>=oc||q!==Fu(q))break e;if(q!==0)return!0}}}else if(R===null&&$===null&&(X===null||X===1||X===-1))return!0;throw Error(zl+"Invalid BigNumber: "+O)},k.maximum=k.max=function(){return W(arguments,-1)},k.minimum=k.min=function(){return W(arguments,1)},k.random=function(){var O=9007199254740992,U=Math.random()*O&2097151?function(){return Fu(Math.random()*O)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(q){var R,$,X,K,F,N=0,J=[],Y=new k(s);if(q==null?q=o:qs(q,0,du),K=z1(q/Ur),v)if(crypto.getRandomValues){for(R=crypto.getRandomValues(new Uint32Array(K*=2));N<K;)F=R[N]*131072+(R[N+1]>>>11),F>=9e15?($=crypto.getRandomValues(new Uint32Array(2)),R[N]=$[0],R[N+1]=$[1]):(J.push(F%1e14),N+=2);N=K/2}else if(crypto.randomBytes){for(R=crypto.randomBytes(K*=7);N<K;)F=(R[N]&31)*281474976710656+R[N+1]*1099511627776+R[N+2]*4294967296+R[N+3]*16777216+(R[N+4]<<16)+(R[N+5]<<8)+R[N+6],F>=9e15?crypto.randomBytes(7).copy(R,N):(J.push(F%1e14),N+=7);N=K/7}else throw v=!1,Error(zl+"crypto unavailable");if(!v)for(;N<K;)F=U(),F<9e15&&(J[N++]=F%1e14);for(K=J[--N],q%=Ur,K&&q&&(F=$1[Ur-q],J[N]=Fu(K/F)*F);J[N]===0;J.pop(),N--);if(N<0)J=[X=0];else{for(X=-1;J[0]===0;J.splice(0,1),X-=Ur);for(N=1,F=J[0];F>=10;F/=10,N++);N<Ur&&(X-=Ur-N)}return Y.e=X,Y.c=J,Y}}(),k.sum=function(){for(var O=1,U=arguments,q=new k(U[0]);O<U.length;)q=q.plus(U[O++]);return q},n=function(){var O="0123456789";function U(q,R,$,X){for(var K,F=[0],N,J=0,Y=q.length;J<Y;){for(N=F.length;N--;F[N]*=R);for(F[0]+=X.indexOf(q.charAt(J++)),K=0;K<F.length;K++)F[K]>$-1&&(F[K+1]==null&&(F[K+1]=0),F[K+1]+=F[K]/$|0,F[K]%=$)}return F.reverse()}return function(q,R,$,X,K){var F,N,J,Y,ye,Ce,He,j,Z=q.indexOf("."),ae=o,de=a;for(Z>=0&&(Y=x,x=0,q=q.replace(".",""),j=new k(R),Ce=j.pow(q.length-Z),x=Y,j.c=U(gh(Nu(Ce.c),Ce.e,"0"),10,$,O),j.e=j.c.length),He=U(q,R,$,K?(F=T,O):(F=O,T)),J=Y=He.length;He[--Y]==0;He.pop());if(!He[0])return F.charAt(0);if(Z<0?--J:(Ce.c=He,Ce.e=J,Ce.s=X,Ce=e(Ce,j,ae,de,$),He=Ce.c,ye=Ce.r,J=Ce.e),N=J+ae+1,Z=He[N],Y=$/2,ye=ye||N<0||He[N+1]!=null,ye=de<4?(Z!=null||ye)&&(de==0||de==(Ce.s<0?3:2)):Z>Y||Z==Y&&(de==4||ye||de==6&&He[N-1]&1||de==(Ce.s<0?8:7)),N<1||!He[0])q=ye?gh(F.charAt(1),-ae,F.charAt(0)):F.charAt(0);else{if(He.length=N,ye)for(--$;++He[--N]>$;)He[N]=0,N||(++J,He=[1].concat(He));for(Y=He.length;!He[--Y];);for(Z=0,q="";Z<=Y;q+=F.charAt(He[Z++]));q=gh(q,J,F.charAt(0))}return q}}(),e=function(){function O(R,$,X){var K,F,N,J,Y=0,ye=R.length,Ce=$%Wh,He=$/Wh|0;for(R=R.slice();ye--;)N=R[ye]%Wh,J=R[ye]/Wh|0,K=He*N+J*Ce,F=Ce*N+K%Wh*Wh+Y,Y=(F/X|0)+(K/Wh|0)+He*J,R[ye]=F%X;return Y&&(R=[Y].concat(R)),R}function U(R,$,X,K){var F,N;if(X!=K)N=X>K?1:-1;else for(F=N=0;F<X;F++)if(R[F]!=$[F]){N=R[F]>$[F]?1:-1;break}return N}function q(R,$,X,K){for(var F=0;X--;)R[X]-=F,F=R[X]<$[X]?1:0,R[X]=F*K+R[X]-$[X];for(;!R[0]&&R.length>1;R.splice(0,1));}return function(R,$,X,K,F){var N,J,Y,ye,Ce,He,j,Z,ae,de,ge,me,oe,re,Te,Le,qe,se=R.s==$.s?1:-1,le=R.c,he=$.c;if(!le||!le[0]||!he||!he[0])return new k(!R.s||!$.s||(le?he&&le[0]==he[0]:!he)?NaN:le&&le[0]==0||!he?se*0:se/0);for(Z=new k(se),ae=Z.c=[],J=R.e-$.e,se=X+J+1,F||(F=oc,J=ju(R.e/Ur)-ju($.e/Ur),se=se/Ur|0),Y=0;he[Y]==(le[Y]||0);Y++);if(he[Y]>(le[Y]||0)&&J--,se<0)ae.push(1),ye=!0;else{for(re=le.length,Le=he.length,Y=0,se+=2,Ce=Fu(F/(he[0]+1)),Ce>1&&(he=O(he,Ce,F),le=O(le,Ce,F),Le=he.length,re=le.length),oe=Le,de=le.slice(0,Le),ge=de.length;ge<Le;de[ge++]=0);qe=he.slice(),qe=[0].concat(qe),Te=he[0],he[1]>=F/2&&Te++;do{if(Ce=0,N=U(he,de,Le,ge),N<0){if(me=de[0],Le!=ge&&(me=me*F+(de[1]||0)),Ce=Fu(me/Te),Ce>1)for(Ce>=F&&(Ce=F-1),He=O(he,Ce,F),j=He.length,ge=de.length;U(He,de,j,ge)==1;)Ce--,q(He,Le<j?qe:he,j,F),j=He.length,N=1;else Ce==0&&(N=Ce=1),He=he.slice(),j=He.length;if(j<ge&&(He=[0].concat(He)),q(de,He,ge,F),ge=de.length,N==-1)for(;U(he,de,Le,ge)<1;)Ce++,q(de,Le<ge?qe:he,ge,F),ge=de.length}else N===0&&(Ce++,de=[0]);ae[Y++]=Ce,de[0]?de[ge++]=le[oe]||0:(de=[le[oe]],ge=1)}while((oe++<re||de[0]!=null)&&se--);ye=de[0]!=null,ae[0]||ae.splice(0,1)}if(F==oc){for(Y=1,se=ae[0];se>=10;se/=10,Y++);pe(Z,X+(Z.e=Y+J*Ur-1)+1,K,ye)}else Z.e=J,Z.r=+ye;return Z}}();function B(O,U,q,R){var $,X,K,F,N;if(q==null?q=a:qs(q,0,8),!O.c)return O.toString();if($=O.c[0],K=O.e,U==null)N=Nu(O.c),N=R==1||R==2&&(K<=l||K>=c)?f0(N,K):gh(N,K,"0");else if(O=pe(new k(O),U,q),X=O.e,N=Nu(O.c),F=N.length,R==1||R==2&&(U<=X||X<=l)){for(;F<U;N+="0",F++);N=f0(N,X)}else if(U-=K,N=gh(N,X,"0"),X+1>F){if(--U>0)for(N+=".";U--;N+="0");}else if(U+=X-F,U>0)for(X+1==F&&(N+=".");U--;N+="0");return O.s<0&&$?"-"+N:N}function W(O,U){for(var q,R,$=1,X=new k(O[0]);$<O.length;$++)R=new k(O[$]),(!R.s||(q=Rd(X,R))===U||q===0&&X.s===U)&&(X=R);return X}function Q(O,U,q){for(var R=1,$=U.length;!U[--$];U.pop());for($=U[0];$>=10;$/=10,R++);return(q=R+q*Ur-1)>p?O.c=O.e=null:q<d?O.c=[O.e=0]:(O.e=q,O.c=U),O}r=function(){var O=/^(-?)0([xbo])(?=\w[\w.]*$)/i,U=/^([^.]+)\.$/,q=/^\.([^.]+)$/,R=/^-?(Infinity|NaN)$/,$=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(X,K,F,N){var J,Y=F?K:K.replace($,"");if(R.test(Y))X.s=isNaN(Y)?null:Y<0?-1:1;else{if(!F&&(Y=Y.replace(O,function(ye,Ce,He){return J=(He=He.toLowerCase())=="x"?16:He=="b"?2:8,!N||N==J?Ce:ye}),N&&(J=N,Y=Y.replace(U,"$1").replace(q,"0.$1")),K!=Y))return new k(Y,J);if(k.DEBUG)throw Error(zl+"Not a"+(N?" base "+N:"")+" number: "+K);X.s=null}X.c=X.e=null}}();function pe(O,U,q,R){var $,X,K,F,N,J,Y,ye=O.c,Ce=$1;if(ye){e:{for($=1,F=ye[0];F>=10;F/=10,$++);if(X=U-$,X<0)X+=Ur,K=U,N=ye[J=0],Y=Fu(N/Ce[$-K-1]%10);else if(J=z1((X+1)/Ur),J>=ye.length)if(R){for(;ye.length<=J;ye.push(0));N=Y=0,$=1,X%=Ur,K=X-Ur+1}else break e;else{for(N=F=ye[J],$=1;F>=10;F/=10,$++);X%=Ur,K=X-Ur+$,Y=K<0?0:Fu(N/Ce[$-K-1]%10)}if(R=R||U<0||ye[J+1]!=null||(K<0?N:N%Ce[$-K-1]),R=q<4?(Y||R)&&(q==0||q==(O.s<0?3:2)):Y>5||Y==5&&(q==4||R||q==6&&(X>0?K>0?N/Ce[$-K]:0:ye[J-1])%10&1||q==(O.s<0?8:7)),U<1||!ye[0])return ye.length=0,R?(U-=O.e+1,ye[0]=Ce[(Ur-U%Ur)%Ur],O.e=-U||0):ye[0]=O.e=0,O;if(X==0?(ye.length=J,F=1,J--):(ye.length=J+1,F=Ce[Ur-X],ye[J]=K>0?Fu(N/Ce[$-K]%Ce[K])*F:0),R)for(;;)if(J==0){for(X=1,K=ye[0];K>=10;K/=10,X++);for(K=ye[0]+=F,F=1;K>=10;K/=10,F++);X!=F&&(O.e++,ye[0]==oc&&(ye[0]=1));break}else{if(ye[J]+=F,ye[J]!=oc)break;ye[J--]=0,F=1}for(X=ye.length;ye[--X]===0;ye.pop());}O.e>p?O.c=O.e=null:O.e<d&&(O.c=[O.e=0])}return O}function fe(O){var U,q=O.e;return q===null?O.toString():(U=Nu(O.c),U=q<=l||q>=c?f0(U,q):gh(U,q,"0"),O.s<0?"-"+U:U)}return i.absoluteValue=i.abs=function(){var O=new k(this);return O.s<0&&(O.s=1),O},i.comparedTo=function(O,U){return Rd(this,new k(O,U))},i.decimalPlaces=i.dp=function(O,U){var q,R,$,X=this;if(O!=null)return qs(O,0,du),U==null?U=a:qs(U,0,8),pe(new k(X),O+X.e+1,U);if(!(q=X.c))return null;if(R=(($=q.length-1)-ju(this.e/Ur))*Ur,$=q[$])for(;$%10==0;$/=10,R--);return R<0&&(R=0),R},i.dividedBy=i.div=function(O,U){return e(this,new k(O,U),o,a)},i.dividedToIntegerBy=i.idiv=function(O,U){return e(this,new k(O,U),0,1)},i.exponentiatedBy=i.pow=function(O,U){var q,R,$,X,K,F,N,J,Y,ye=this;if(O=new k(O),O.c&&!O.isInteger())throw Error(zl+"Exponent not an integer: "+fe(O));if(U!=null&&(U=new k(U)),F=O.e>14,!ye.c||!ye.c[0]||ye.c[0]==1&&!ye.e&&ye.c.length==1||!O.c||!O.c[0])return Y=new k(Math.pow(+fe(ye),F?O.s*(2-d0(O)):+fe(O))),U?Y.mod(U):Y;if(N=O.s<0,U){if(U.c?!U.c[0]:!U.s)return new k(NaN);R=!N&&ye.isInteger()&&U.isInteger(),R&&(ye=ye.mod(U))}else{if(O.e>9&&(ye.e>0||ye.e<-1||(ye.e==0?ye.c[0]>1||F&&ye.c[1]>=24e7:ye.c[0]<8e13||F&&ye.c[0]<=9999975e7)))return X=ye.s<0&&d0(O)?-0:0,ye.e>-1&&(X=1/X),new k(N?1/X:X);x&&(X=z1(x/Ur+2))}for(F?(q=new k(.5),N&&(O.s=1),J=d0(O)):($=Math.abs(+fe(O)),J=$%2),Y=new k(s);;){if(J){if(Y=Y.times(ye),!Y.c)break;X?Y.c.length>X&&(Y.c.length=X):R&&(Y=Y.mod(U))}if($){if($=Fu($/2),$===0)break;J=$%2}else if(O=O.times(q),pe(O,O.e+1,1),O.e>14)J=d0(O);else{if($=+fe(O),$===0)break;J=$%2}ye=ye.times(ye),X?ye.c&&ye.c.length>X&&(ye.c.length=X):R&&(ye=ye.mod(U))}return R?Y:(N&&(Y=s.div(Y)),U?Y.mod(U):X?pe(Y,x,a,K):Y)},i.integerValue=function(O){var U=new k(this);return O==null?O=a:qs(O,0,8),pe(U,U.e+1,O)},i.isEqualTo=i.eq=function(O,U){return Rd(this,new k(O,U))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(O,U){return Rd(this,new k(O,U))>0},i.isGreaterThanOrEqualTo=i.gte=function(O,U){return(U=Rd(this,new k(O,U)))===1||U===0},i.isInteger=function(){return!!this.c&&ju(this.e/Ur)>this.c.length-2},i.isLessThan=i.lt=function(O,U){return Rd(this,new k(O,U))<0},i.isLessThanOrEqualTo=i.lte=function(O,U){return(U=Rd(this,new k(O,U)))===-1||U===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(O,U){var q,R,$,X,K=this,F=K.s;if(O=new k(O,U),U=O.s,!F||!U)return new k(NaN);if(F!=U)return O.s=-U,K.plus(O);var N=K.e/Ur,J=O.e/Ur,Y=K.c,ye=O.c;if(!N||!J){if(!Y||!ye)return Y?(O.s=-U,O):new k(ye?K:NaN);if(!Y[0]||!ye[0])return ye[0]?(O.s=-U,O):new k(Y[0]?K:a==3?-0:0)}if(N=ju(N),J=ju(J),Y=Y.slice(),F=N-J){for((X=F<0)?(F=-F,$=Y):(J=N,$=ye),$.reverse(),U=F;U--;$.push(0));$.reverse()}else for(R=(X=(F=Y.length)<(U=ye.length))?F:U,F=U=0;U<R;U++)if(Y[U]!=ye[U]){X=Y[U]<ye[U];break}if(X&&($=Y,Y=ye,ye=$,O.s=-O.s),U=(R=ye.length)-(q=Y.length),U>0)for(;U--;Y[q++]=0);for(U=oc-1;R>F;){if(Y[--R]<ye[R]){for(q=R;q&&!Y[--q];Y[q]=U);--Y[q],Y[R]+=oc}Y[R]-=ye[R]}for(;Y[0]==0;Y.splice(0,1),--J);return Y[0]?Q(O,Y,J):(O.s=a==3?-1:1,O.c=[O.e=0],O)},i.modulo=i.mod=function(O,U){var q,R,$=this;return O=new k(O,U),!$.c||!O.s||O.c&&!O.c[0]?new k(NaN):!O.c||$.c&&!$.c[0]?new k($):(m==9?(R=O.s,O.s=1,q=e($,O,0,3),O.s=R,q.s*=R):q=e($,O,0,m),O=$.minus(q.times(O)),!O.c[0]&&m==1&&(O.s=$.s),O)},i.multipliedBy=i.times=function(O,U){var q,R,$,X,K,F,N,J,Y,ye,Ce,He,j,Z,ae,de=this,ge=de.c,me=(O=new k(O,U)).c;if(!ge||!me||!ge[0]||!me[0])return!de.s||!O.s||ge&&!ge[0]&&!me||me&&!me[0]&&!ge?O.c=O.e=O.s=null:(O.s*=de.s,!ge||!me?O.c=O.e=null:(O.c=[0],O.e=0)),O;for(R=ju(de.e/Ur)+ju(O.e/Ur),O.s*=de.s,N=ge.length,ye=me.length,N<ye&&(j=ge,ge=me,me=j,$=N,N=ye,ye=$),$=N+ye,j=[];$--;j.push(0));for(Z=oc,ae=Wh,$=ye;--$>=0;){for(q=0,Ce=me[$]%ae,He=me[$]/ae|0,K=N,X=$+K;X>$;)J=ge[--K]%ae,Y=ge[K]/ae|0,F=He*J+Y*Ce,J=Ce*J+F%ae*ae+j[X]+q,q=(J/Z|0)+(F/ae|0)+He*Y,j[X--]=J%Z;j[X]=q}return q?++R:j.splice(0,1),Q(O,j,R)},i.negated=function(){var O=new k(this);return O.s=-O.s||null,O},i.plus=function(O,U){var q,R=this,$=R.s;if(O=new k(O,U),U=O.s,!$||!U)return new k(NaN);if($!=U)return O.s=-U,R.minus(O);var X=R.e/Ur,K=O.e/Ur,F=R.c,N=O.c;if(!X||!K){if(!F||!N)return new k($/0);if(!F[0]||!N[0])return N[0]?O:new k(F[0]?R:$*0)}if(X=ju(X),K=ju(K),F=F.slice(),$=X-K){for($>0?(K=X,q=N):($=-$,q=F),q.reverse();$--;q.push(0));q.reverse()}for($=F.length,U=N.length,$-U<0&&(q=N,N=F,F=q,U=$),$=0;U;)$=(F[--U]=F[U]+N[U]+$)/oc|0,F[U]=oc===F[U]?0:F[U]%oc;return $&&(F=[$].concat(F),++K),Q(O,F,K)},i.precision=i.sd=function(O,U){var q,R,$,X=this;if(O!=null&&O!==!!O)return qs(O,1,du),U==null?U=a:qs(U,0,8),pe(new k(X),O,U);if(!(q=X.c))return null;if($=q.length-1,R=$*Ur+1,$=q[$]){for(;$%10==0;$/=10,R--);for($=q[0];$>=10;$/=10,R++);}return O&&X.e+1>R&&(R=X.e+1),R},i.shiftedBy=function(O){return qs(O,-9007199254740991,Z4),this.times("1e"+O)},i.squareRoot=i.sqrt=function(){var O,U,q,R,$,X=this,K=X.c,F=X.s,N=X.e,J=o+4,Y=new k("0.5");if(F!==1||!K||!K[0])return new k(!F||F<0&&(!K||K[0])?NaN:K?X:1/0);if(F=Math.sqrt(+fe(X)),F==0||F==1/0?(U=Nu(K),(U.length+N)%2==0&&(U+="0"),F=Math.sqrt(+U),N=ju((N+1)/2)-(N<0||N%2),F==1/0?U="5e"+N:(U=F.toExponential(),U=U.slice(0,U.indexOf("e")+1)+N),q=new k(U)):q=new k(F+""),q.c[0]){for(N=q.e,F=N+J,F<3&&(F=0);;)if($=q,q=Y.times($.plus(e(X,$,J,1))),Nu($.c).slice(0,F)===(U=Nu(q.c)).slice(0,F))if(q.e<N&&--F,U=U.slice(F-3,F+1),U=="9999"||!R&&U=="4999"){if(!R&&(pe($,$.e+o+2,0),$.times($).eq(X))){q=$;break}J+=4,F+=4,R=1}else{(!+U||!+U.slice(1)&&U.charAt(0)=="5")&&(pe(q,q.e+o+2,1),O=!q.times(q).eq(X));break}}return pe(q,q.e+o+1,a,O)},i.toExponential=function(O,U){return O!=null&&(qs(O,0,du),O++),B(this,O,U,1)},i.toFixed=function(O,U){return O!=null&&(qs(O,0,du),O=O+this.e+1),B(this,O,U)},i.toFormat=function(O,U,q){var R,$=this;if(q==null)O!=null&&U&&typeof U=="object"?(q=U,U=null):O&&typeof O=="object"?(q=O,O=U=null):q=E;else if(typeof q!="object")throw Error(zl+"Argument not an object: "+q);if(R=$.toFixed(O,U),$.c){var X,K=R.split("."),F=+q.groupSize,N=+q.secondaryGroupSize,J=q.groupSeparator||"",Y=K[0],ye=K[1],Ce=$.s<0,He=Ce?Y.slice(1):Y,j=He.length;if(N&&(X=F,F=N,N=X,j-=X),F>0&&j>0){for(X=j%F||F,Y=He.substr(0,X);X<j;X+=F)Y+=J+He.substr(X,F);N>0&&(Y+=J+He.slice(X)),Ce&&(Y="-"+Y)}R=ye?Y+(q.decimalSeparator||"")+((N=+q.fractionGroupSize)?ye.replace(new RegExp("\\d{"+N+"}\\B","g"),"$&"+(q.fractionGroupSeparator||"")):ye):Y}return(q.prefix||"")+R+(q.suffix||"")},i.toFraction=function(O){var U,q,R,$,X,K,F,N,J,Y,ye,Ce,He=this,j=He.c;if(O!=null&&(F=new k(O),!F.isInteger()&&(F.c||F.s!==1)||F.lt(s)))throw Error(zl+"Argument "+(F.isInteger()?"out of range: ":"not an integer: ")+fe(F));if(!j)return new k(He);for(U=new k(s),J=q=new k(s),R=N=new k(s),Ce=Nu(j),X=U.e=Ce.length-He.e-1,U.c[0]=$1[(K=X%Ur)<0?Ur+K:K],O=!O||F.comparedTo(U)>0?X>0?U:J:F,K=p,p=1/0,F=new k(Ce),N.c[0]=0;Y=e(F,U,0,1),$=q.plus(Y.times(R)),$.comparedTo(O)!=1;)q=R,R=$,J=N.plus(Y.times($=J)),N=$,U=F.minus(Y.times($=U)),F=$;return $=e(O.minus(q),R,0,1),N=N.plus($.times(J)),q=q.plus($.times(R)),N.s=J.s=He.s,X=X*2,ye=e(J,R,X,a).minus(He).abs().comparedTo(e(N,q,X,a).minus(He).abs())<1?[J,R]:[N,q],p=K,ye},i.toNumber=function(){return+fe(this)},i.toPrecision=function(O,U){return O!=null&&qs(O,1,du),B(this,O,U,2)},i.toString=function(O){var U,q=this,R=q.s,$=q.e;return $===null?R?(U="Infinity",R<0&&(U="-"+U)):U="NaN":(O==null?U=$<=l||$>=c?f0(Nu(q.c),$):gh(Nu(q.c),$,"0"):O===10&&D?(q=pe(new k(q),o+$+1,a),U=gh(Nu(q.c),q.e,"0")):(qs(O,2,T.length,"Base"),U=n(gh(Nu(q.c),$,"0"),10,O,R,!0)),R<0&&q.c[0]&&(U="-"+U)),U},i.valueOf=i.toJSON=function(){return fe(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,t!=null&&k.set(t),k}function ju(t){var e=t|0;return t>0||t===e?e:e-1}function Nu(t){for(var e,n,r=1,i=t.length,s=t[0]+"";r<i;){for(e=t[r++]+"",n=Ur-e.length;n--;e="0"+e);s+=e}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function Rd(t,e){var n,r,i=t.c,s=e.c,o=t.s,a=e.s,l=t.e,c=e.e;if(!o||!a)return null;if(n=i&&!i[0],r=s&&!s[0],n||r)return n?r?0:-a:o;if(o!=a)return o;if(n=o<0,r=l==c,!i||!s)return r?0:!i^n?1:-1;if(!r)return l>c^n?1:-1;for(a=(l=i.length)<(c=s.length)?l:c,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^n?1:-1;return l==c?0:l>c^n?1:-1}function qs(t,e,n,r){if(t<e||t>n||t!==Fu(t))throw Error(zl+(r||"Argument")+(typeof t=="number"?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function d0(t){var e=t.c.length-1;return ju(t.e/Ur)==e&&t.c[e]%2!=0}function f0(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function gh(t,e,n){var r,i;if(e<0){for(i=n+".";++e;i+=n);t=i+t}else if(r=t.length,++e>r){for(i=n,e-=r;--e;i+=n);t+=i}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}var Hc=hE(),Z9=class{constructor(t){Xe(this,"key");Xe(this,"left",null);Xe(this,"right",null);this.key=t}},qp=class extends Z9{constructor(t){super(t)}},X9=class{constructor(){Xe(this,"size",0);Xe(this,"modificationCount",0);Xe(this,"splayCount",0)}splay(t){const e=this.root;if(e==null)return this.compare(t,t),-1;let n=null,r=null,i=null,s=null,o=e;const a=this.compare;let l;for(;;)if(l=a(o.key,t),l>0){let c=o.left;if(c==null||(l=a(c.key,t),l>0&&(o.left=c.right,c.right=o,o=c,c=o.left,c==null)))break;n==null?r=o:n.left=o,n=o,o=c}else if(l<0){let c=o.right;if(c==null||(l=a(c.key,t),l<0&&(o.right=c.left,c.left=o,o=c,c=o.right,c==null)))break;i==null?s=o:i.right=o,i=o,o=c}else break;return i!=null&&(i.right=o.left,o.left=s),n!=null&&(n.left=o.right,o.right=r),this.root!==o&&(this.root=o,this.splayCount++),l}splayMin(t){let e=t,n=e.left;for(;n!=null;){const r=n;e.left=r.right,r.right=e,e=r,n=e.left}return e}splayMax(t){let e=t,n=e.right;for(;n!=null;){const r=n;e.right=r.left,r.left=e,e=r,n=e.right}return e}_delete(t){if(this.root==null||this.splay(t)!=0)return null;let n=this.root;const r=n,i=n.left;if(this.size--,i==null)this.root=n.right;else{const s=n.right;n=this.splayMax(i),n.right=s,this.root=n}return this.modificationCount++,r}addNewRoot(t,e){this.size++,this.modificationCount++;const n=this.root;if(n==null){this.root=t;return}e<0?(t.left=n,t.right=n.right,n.right=null):(t.right=n,t.left=n.left,n.left=null),this.root=t}_first(){const t=this.root;return t==null?null:(this.root=this.splayMin(t),this.root)}_last(){const t=this.root;return t==null?null:(this.root=this.splayMax(t),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(t){return this.validKey(t)&&this.splay(t)==0}defaultCompare(){return(t,e)=>t<e?-1:t>e?1:0}wrap(){return{getRoot:()=>this.root,setRoot:t=>{this.root=t},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:t=>{this.splayCount=t},splay:t=>this.splay(t),has:t=>this.has(t)}}},dL,fL,Iv=class hg extends X9{constructor(n,r){super();Xe(this,"root",null);Xe(this,"compare");Xe(this,"validKey");Xe(this,dL,"[object Set]");this.compare=n??this.defaultCompare(),this.validKey=r??(i=>i!=null&&i!=null)}delete(n){return this.validKey(n)?this._delete(n)!=null:!1}deleteAll(n){for(const r of n)this.delete(r)}forEach(n){const r=this[Symbol.iterator]();let i;for(;i=r.next(),!i.done;)n(i.value,i.value,this)}add(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new qp(n),r),this}addAndReturn(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new qp(n),r),this.root.key}addAll(n){for(const r of n)this.add(r)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let s=i.right;for(;s!=null;)i=s,s=i.right;return i.key}firstAfter(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let s=i.left;for(;s!=null;)i=s,s=i.left;return i.key}retainAll(n){const r=new hg(this.compare,this.validKey),i=this.modificationCount;for(const s of n){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(s)&&this.splay(s)==0&&r.add(this.root.key)}r.size!=this.size&&(this.root=r.root,this.size=r.size,this.modificationCount++)}lookup(n){return!this.validKey(n)||this.splay(n)!=0?null:this.root.key}intersection(n){const r=new hg(this.compare,this.validKey);for(const i of this)n.has(i)&&r.add(i);return r}difference(n){const r=new hg(this.compare,this.validKey);for(const i of this)n.has(i)||r.add(i);return r}union(n){const r=this.clone();return r.addAll(n),r}clone(){const n=new hg(this.compare,this.validKey);return n.size=this.size,n.root=this.copyNode(this.root),n}copyNode(n){if(n==null)return null;function r(s,o){let a,l;do{if(a=s.left,l=s.right,a!=null){const c=new qp(a.key);o.left=c,r(a,c)}if(l!=null){const c=new qp(l.key);o.right=c,s=l,o=c}}while(l!=null)}const i=new qp(n.key);return r(n,i),i}toSet(){return this.clone()}entries(){return new Q9(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(fL=Symbol.iterator,dL=Symbol.toStringTag,fL)](){return new J9(this.wrap())}},dE=class{constructor(t){Xe(this,"tree");Xe(this,"path",new Array);Xe(this,"modificationCount",null);Xe(this,"splayCount");this.tree=t,this.splayCount=t.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const t=this.path[this.path.length-1];return this.getValue(t)}rebuildPath(t){this.path.splice(0,this.path.length),this.tree.splay(t),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(t){for(;t!=null;)this.path.push(t),t=t.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let n=this.tree.getRoot();for(;n!=null;)this.path.push(n),n=n.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let t=this.path[this.path.length-1],e=t.right;if(e!=null){for(;e!=null;)this.path.push(e),e=e.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===t;)t=this.path.pop();return this.path.length>0}},J9=class extends dE{getValue(t){return t.key}},Q9=class extends dE{getValue(t){return[t.key,t.key]}},fE=t=>()=>t,rb=t=>{const e=t?(n,r)=>r.minus(n).abs().isLessThanOrEqualTo(t):fE(!1);return(n,r)=>e(n,r)?0:n.comparedTo(r)};function ej(t){const e=t?(n,r,i,s,o)=>n.exponentiatedBy(2).isLessThanOrEqualTo(s.minus(r).exponentiatedBy(2).plus(o.minus(i).exponentiatedBy(2)).times(t)):fE(!1);return(n,r,i)=>{const s=n.x,o=n.y,a=i.x,l=i.y,c=o.minus(l).times(r.x.minus(a)).minus(s.minus(a).times(r.y.minus(l)));return e(c,s,o,a,l)?0:c.comparedTo(0)}}var tj=t=>t,nj=t=>{if(t){const e=new Iv(rb(t)),n=new Iv(rb(t)),r=(s,o)=>o.addAndReturn(s),i=s=>({x:r(s.x,e),y:r(s.y,n)});return i({x:new Hc(0),y:new Hc(0)}),i}return tj},ib=t=>({set:e=>{Dh=ib(e)},reset:()=>ib(t),compare:rb(t),snap:nj(t),orient:ej(t)}),Dh=ib(),Yp=(t,e)=>t.ll.x.isLessThanOrEqualTo(e.x)&&e.x.isLessThanOrEqualTo(t.ur.x)&&t.ll.y.isLessThanOrEqualTo(e.y)&&e.y.isLessThanOrEqualTo(t.ur.y),sb=(t,e)=>{if(e.ur.x.isLessThan(t.ll.x)||t.ur.x.isLessThan(e.ll.x)||e.ur.y.isLessThan(t.ll.y)||t.ur.y.isLessThan(e.ll.y))return null;const n=t.ll.x.isLessThan(e.ll.x)?e.ll.x:t.ll.x,r=t.ur.x.isLessThan(e.ur.x)?t.ur.x:e.ur.x,i=t.ll.y.isLessThan(e.ll.y)?e.ll.y:t.ll.y,s=t.ur.y.isLessThan(e.ur.y)?t.ur.y:e.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:s}}},Y0=(t,e)=>t.x.times(e.y).minus(t.y.times(e.x)),pE=(t,e)=>t.x.times(e.x).plus(t.y.times(e.y)),Ov=t=>pE(t,t).sqrt(),rj=(t,e,n)=>{const r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return Y0(i,r).div(Ov(i)).div(Ov(r))},ij=(t,e,n)=>{const r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return pE(i,r).div(Ov(i)).div(Ov(r))},X4=(t,e,n)=>e.y.isZero()?null:{x:t.x.plus(e.x.div(e.y).times(n.minus(t.y))),y:n},J4=(t,e,n)=>e.x.isZero()?null:{x:n,y:t.y.plus(e.y.div(e.x).times(n.minus(t.x)))},sj=(t,e,n,r)=>{if(e.x.isZero())return J4(n,r,t.x);if(r.x.isZero())return J4(t,e,n.x);if(e.y.isZero())return X4(n,r,t.y);if(r.y.isZero())return X4(t,e,n.y);const i=Y0(e,r);if(i.isZero())return null;const s={x:n.x.minus(t.x),y:n.y.minus(t.y)},o=Y0(s,e).div(i),a=Y0(s,r).div(i),l=t.x.plus(a.times(e.x)),c=n.x.plus(o.times(r.x)),d=t.y.plus(a.times(e.y)),p=n.y.plus(o.times(r.y)),v=l.plus(c).div(2),m=d.plus(p).div(2);return{x:v,y:m}},jc=class gE{constructor(e,n){Xe(this,"point");Xe(this,"isLeft");Xe(this,"segment");Xe(this,"otherSE");Xe(this,"consumedBy");e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}static compare(e,n){const r=gE.comparePoints(e.point,n.point);return r!==0?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:Nv.compare(e.segment,n.segment))}static comparePoints(e,n){return e.x.isLessThan(n.x)?-1:e.x.isGreaterThan(n.x)?1:e.y.isLessThan(n.y)?-1:e.y.isGreaterThan(n.y)?1:0}link(e){if(e.point===this.point)throw new Error("Tried to link already linked events");const n=e.point.events;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}checkForConsuming(){const e=this.point.events.length;for(let n=0;n<e;n++){const r=this.point.events[n];if(r.segment.consumedBy===void 0)for(let i=n+1;i<e;i++){const s=this.point.events[i];s.consumedBy===void 0&&r.otherSE.point.events===s.otherSE.point.events&&r.segment.consume(s.segment)}}}getAvailableLinkedEvents(){const e=[];for(let n=0,r=this.point.events.length;n<r;n++){const i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&e.push(i)}return e}getLeftmostComparator(e){const n=new Map,r=i=>{const s=i.otherSE;n.set(i,{sine:rj(this.point,e.point,s.point),cosine:ij(this.point,e.point,s.point)})};return(i,s)=>{n.has(i)||r(i),n.has(s)||r(s);const{sine:o,cosine:a}=n.get(i),{sine:l,cosine:c}=n.get(s);return o.isGreaterThanOrEqualTo(0)&&l.isGreaterThanOrEqualTo(0)?a.isLessThan(c)?1:a.isGreaterThan(c)?-1:0:o.isLessThan(0)&&l.isLessThan(0)?a.isLessThan(c)?-1:a.isGreaterThan(c)?1:0:l.isLessThan(o)?-1:l.isGreaterThan(o)?1:0}}},oj=class ob{constructor(e){Xe(this,"events");Xe(this,"poly");Xe(this,"_isExteriorRing");Xe(this,"_enclosingRing");this.events=e;for(let n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}static factory(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];if(!s.isInResult()||s.ringOut)continue;let o=null,a=s.leftSE,l=s.rightSE;const c=[a],d=a.point,p=[];for(;o=a,a=l,c.push(a),a.point!==d;)for(;;){const v=a.getAvailableLinkedEvents();if(v.length===0){const E=c[0].point,T=c[c.length-1].point;throw new Error(`Unable to complete output ring starting at [${E.x}, ${E.y}]. Last matching segment found ends at [${T.x}, ${T.y}].`)}if(v.length===1){l=v[0].otherSE;break}let m=null;for(let E=0,T=p.length;E<T;E++)if(p[E].point===a.point){m=E;break}if(m!==null){const E=p.splice(m)[0],T=c.splice(E.index);T.unshift(T[0].otherSE),n.push(new ob(T.reverse()));continue}p.push({index:c.length,point:a.point});const x=a.getLeftmostComparator(o);l=v.sort(x)[0].otherSE;break}n.push(new ob(c))}return n}getGeom(){let e=this.events[0].point;const n=[e];for(let c=1,d=this.events.length-1;c<d;c++){const p=this.events[c].point,v=this.events[c+1].point;Dh.orient(p,e,v)!==0&&(n.push(p),e=p)}if(n.length===1)return null;const r=n[0],i=n[1];Dh.orient(r,e,i)===0&&n.shift(),n.push(n[0]);const s=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:n.length-1,a=this.isExteriorRing()?n.length:-1,l=[];for(let c=o;c!=a;c+=s)l.push([n[c].x.toNumber(),n[c].y.toNumber()]);return l}isExteriorRing(){if(this._isExteriorRing===void 0){const e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var i,s;let e=this.events[0];for(let o=1,a=this.events.length;o<a;o++){const l=this.events[o];jc.compare(e,l)>0&&(e=l)}let n=e.segment.prevInResult(),r=n?n.prevInResult():null;for(;;){if(!n)return null;if(!r)return n.ringOut;if(r.ringOut!==n.ringOut)return((i=r.ringOut)==null?void 0:i.enclosingRing())!==n.ringOut?n.ringOut:(s=n.ringOut)==null?void 0:s.enclosingRing();n=r.prevInResult(),r=n?n.prevInResult():null}}},Q4=class{constructor(t){Xe(this,"exteriorRing");Xe(this,"interiorRings");this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=this.exteriorRing.getGeom();if(t===null)return null;const e=[t];for(let n=0,r=this.interiorRings.length;n<r;n++){const i=this.interiorRings[n].getGeom();i!==null&&e.push(i)}return e}},aj=class{constructor(t){Xe(this,"rings");Xe(this,"polys");this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const r=this.polys[e].getGeom();r!==null&&t.push(r)}return t}_composePolys(t){var n;const e=[];for(let r=0,i=t.length;r<i;r++){const s=t[r];if(!s.poly)if(s.isExteriorRing())e.push(new Q4(s));else{const o=s.enclosingRing();o!=null&&o.poly||e.push(new Q4(o)),(n=o==null?void 0:o.poly)==null||n.addInterior(s)}}return e}},lj=class{constructor(t,e=Nv.compare){Xe(this,"queue");Xe(this,"tree");Xe(this,"segments");this.queue=t,this.tree=new Iv(e),this.segments=[]}process(t){const e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.delete(t.otherSE):this.tree.delete(e),n;t.isLeft&&this.tree.add(e);let r=e,i=e;do r=this.tree.lastBefore(r);while(r!=null&&r.consumedBy!=null);do i=this.tree.firstAfter(i);while(i!=null&&i.consumedBy!=null);if(t.isLeft){let s=null;if(r){const a=r.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(s=a),!r.isAnEndpoint(a))){const l=this._splitSafely(r,a);for(let c=0,d=l.length;c<d;c++)n.push(l[c])}}let o=null;if(i){const a=i.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(o=a),!i.isAnEndpoint(a))){const l=this._splitSafely(i,a);for(let c=0,d=l.length;c<d;c++)n.push(l[c])}}if(s!==null||o!==null){let a=null;s===null?a=o:o===null?a=s:a=jc.comparePoints(s,o)<=0?s:o,this.queue.delete(e.rightSE),n.push(e.rightSE);const l=e.split(a);for(let c=0,d=l.length;c<d;c++)n.push(l[c])}n.length>0?(this.tree.delete(e),n.push(t)):(this.segments.push(e),e.prev=r)}else{if(r&&i){const s=r.getIntersection(i);if(s!==null){if(!r.isAnEndpoint(s)){const o=this._splitSafely(r,s);for(let a=0,l=o.length;a<l;a++)n.push(o[a])}if(!i.isAnEndpoint(s)){const o=this._splitSafely(i,s);for(let a=0,l=o.length;a<l;a++)n.push(o[a])}}}this.tree.delete(e)}return n}_splitSafely(t,e){this.tree.delete(t);const n=t.rightSE;this.queue.delete(n);const r=t.split(e);return r.push(n),t.consumedBy===void 0&&this.tree.add(t),r}},uj=class{constructor(){Xe(this,"type");Xe(this,"numMultiPolys")}run(t,e,n){dg.type=t;const r=[new t5(e,!0)];for(let c=0,d=n.length;c<d;c++)r.push(new t5(n[c],!1));if(dg.numMultiPolys=r.length,dg.type==="difference"){const c=r[0];let d=1;for(;d<r.length;)sb(r[d].bbox,c.bbox)!==null?d++:r.splice(d,1)}if(dg.type==="intersection")for(let c=0,d=r.length;c<d;c++){const p=r[c];for(let v=c+1,m=r.length;v<m;v++)if(sb(p.bbox,r[v].bbox)===null)return[]}const i=new Iv(jc.compare);for(let c=0,d=r.length;c<d;c++){const p=r[c].getSweepEvents();for(let v=0,m=p.length;v<m;v++)i.add(p[v])}const s=new lj(i);let o=null;for(i.size!=0&&(o=i.first(),i.delete(o));o;){const c=s.process(o);for(let d=0,p=c.length;d<p;d++){const v=c[d];v.consumedBy===void 0&&i.add(v)}i.size!=0?(o=i.first(),i.delete(o)):o=null}Dh.reset();const a=oj.factory(s.segments);return new aj(a).getGeom()}},dg=new uj,ab=dg,cj=0,Nv=class K0{constructor(e,n,r,i){Xe(this,"id");Xe(this,"leftSE");Xe(this,"rightSE");Xe(this,"rings");Xe(this,"windings");Xe(this,"ringOut");Xe(this,"consumedBy");Xe(this,"prev");Xe(this,"_prevInResult");Xe(this,"_beforeState");Xe(this,"_afterState");Xe(this,"_isInResult");this.id=++cj,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}static compare(e,n){const r=e.leftSE.point.x,i=n.leftSE.point.x,s=e.rightSE.point.x,o=n.rightSE.point.x;if(o.isLessThan(r))return 1;if(s.isLessThan(i))return-1;const a=e.leftSE.point.y,l=n.leftSE.point.y,c=e.rightSE.point.y,d=n.rightSE.point.y;if(r.isLessThan(i)){if(l.isLessThan(a)&&l.isLessThan(c))return 1;if(l.isGreaterThan(a)&&l.isGreaterThan(c))return-1;const p=e.comparePoint(n.leftSE.point);if(p<0)return 1;if(p>0)return-1;const v=n.comparePoint(e.rightSE.point);return v!==0?v:-1}if(r.isGreaterThan(i)){if(a.isLessThan(l)&&a.isLessThan(d))return-1;if(a.isGreaterThan(l)&&a.isGreaterThan(d))return 1;const p=n.comparePoint(e.leftSE.point);if(p!==0)return p;const v=e.comparePoint(n.rightSE.point);return v<0?1:v>0?-1:1}if(a.isLessThan(l))return-1;if(a.isGreaterThan(l))return 1;if(s.isLessThan(o)){const p=n.comparePoint(e.rightSE.point);if(p!==0)return p}if(s.isGreaterThan(o)){const p=e.comparePoint(n.rightSE.point);if(p<0)return 1;if(p>0)return-1}if(!s.eq(o)){const p=c.minus(a),v=s.minus(r),m=d.minus(l),x=o.minus(i);if(p.isGreaterThan(v)&&m.isLessThan(x))return 1;if(p.isLessThan(v)&&m.isGreaterThan(x))return-1}return s.isGreaterThan(o)?1:s.isLessThan(o)||c.isLessThan(d)?-1:c.isGreaterThan(d)?1:e.id<n.id?-1:e.id>n.id?1:0}static fromRing(e,n,r){let i,s,o;const a=jc.comparePoints(e,n);if(a<0)i=e,s=n,o=1;else if(a>0)i=n,s=e,o=-1;else throw new Error(`Tried to create degenerate segment at [${e.x}, ${e.y}]`);const l=new jc(i,!0),c=new jc(s,!1);return new K0(l,c,[r],[o])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const e=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e.isLessThan(n)?e:n},ur:{x:this.rightSE.point.x,y:e.isGreaterThan(n)?e:n}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(e){return e.x.eq(this.leftSE.point.x)&&e.y.eq(this.leftSE.point.y)||e.x.eq(this.rightSE.point.x)&&e.y.eq(this.rightSE.point.y)}comparePoint(e){return Dh.orient(this.leftSE.point,e,this.rightSE.point)}getIntersection(e){const n=this.bbox(),r=e.bbox(),i=sb(n,r);if(i===null)return null;const s=this.leftSE.point,o=this.rightSE.point,a=e.leftSE.point,l=e.rightSE.point,c=Yp(n,a)&&this.comparePoint(a)===0,d=Yp(r,s)&&e.comparePoint(s)===0,p=Yp(n,l)&&this.comparePoint(l)===0,v=Yp(r,o)&&e.comparePoint(o)===0;if(d&&c)return v&&!p?o:!v&&p?l:null;if(d)return p&&s.x.eq(l.x)&&s.y.eq(l.y)?null:s;if(c)return v&&o.x.eq(a.x)&&o.y.eq(a.y)?null:a;if(v&&p)return null;if(v)return o;if(p)return l;const m=sj(s,this.vector(),a,e.vector());return m===null||!Yp(i,m)?null:Dh.snap(m)}split(e){const n=[],r=e.events!==void 0,i=new jc(e,!0),s=new jc(e,!1),o=this.rightSE;this.replaceRightSE(s),n.push(s),n.push(i);const a=new K0(i,o,this.rings.slice(),this.windings.slice());return jc.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),jc.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),s.checkForConsuming()),n}swapEvents(){const e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}consume(e){let n=this,r=e;for(;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const i=K0.compare(n,r);if(i!==0){if(i>0){const s=n;n=r,r=s}if(n.prev===r){const s=n;n=r,r=s}for(let s=0,o=r.rings.length;s<o;s++){const a=r.rings[s],l=r.windings[s],c=n.rings.indexOf(a);c===-1?(n.rings.push(a),n.windings.push(l)):n.windings[c]+=l}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys;for(let a=0,l=this.rings.length;a<l;a++){const c=this.rings[a],d=this.windings[a],p=n.indexOf(c);p===-1?(n.push(c),r.push(d)):r[p]+=d}const s=[],o=[];for(let a=0,l=n.length;a<l;a++){if(r[a]===0)continue;const c=n[a],d=c.poly;if(o.indexOf(d)===-1)if(c.isExterior)s.push(d);else{o.indexOf(d)===-1&&o.push(d);const p=s.indexOf(c.poly);p!==-1&&s.splice(p,1)}}for(let a=0,l=s.length;a<l;a++){const c=s[a].multiPoly;i.indexOf(c)===-1&&i.push(c)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const e=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(ab.type){case"union":{const r=e.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{let r,i;e.length<n.length?(r=e.length,i=n.length):(r=n.length,i=e.length),this._isInResult=i===ab.numMultiPolys&&r<i;break}case"xor":{const r=Math.abs(e.length-n.length);this._isInResult=r%2===1;break}case"difference":{const r=i=>i.length===1&&i[0].isSubject;this._isInResult=r(e)!==r(n);break}}return this._isInResult}},e5=class{constructor(t,e,n){Xe(this,"poly");Xe(this,"isExterior");Xe(this,"segments");Xe(this,"bbox");if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=n,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=Dh.snap({x:new Hc(t[0][0]),y:new Hc(t[0][1])});this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let i=r;for(let s=1,o=t.length;s<o;s++){if(typeof t[s][0]!="number"||typeof t[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const a=Dh.snap({x:new Hc(t[s][0]),y:new Hc(t[s][1])});a.x.eq(i.x)&&a.y.eq(i.y)||(this.segments.push(Nv.fromRing(i,a,this)),a.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=a.x),a.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=a.y),a.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=a.x),a.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=a.y),i=a)}(!r.x.eq(i.x)||!r.y.eq(i.y))&&this.segments.push(Nv.fromRing(i,r,this))}getSweepEvents(){const t=[];for(let e=0,n=this.segments.length;e<n;e++){const r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}},hj=class{constructor(t,e){Xe(this,"multiPoly");Xe(this,"exteriorRing");Xe(this,"interiorRings");Xe(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new e5(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let n=1,r=t.length;n<r;n++){const i=new e5(t[n],this,!1);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=e}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let e=0,n=this.interiorRings.length;e<n;e++){const r=this.interiorRings[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)t.push(r[i])}return t}},t5=class{constructor(t,e){Xe(this,"isSubject");Xe(this,"polys");Xe(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:new Hc(Number.POSITIVE_INFINITY),y:new Hc(Number.POSITIVE_INFINITY)},ur:{x:new Hc(Number.NEGATIVE_INFINITY),y:new Hc(Number.NEGATIVE_INFINITY)}};for(let n=0,r=t.length;n<r;n++){const i=new hj(t[n],this);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=e}getSweepEvents(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const r=this.polys[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)t.push(r[i])}return t}},dj=(t,...e)=>ab.run("intersection",t,e);Dh.set;function fj(t,e){var n,r,i,s,o,a,l,c,d,p,v=0,m=t.type==="FeatureCollection",x=t.type==="Feature",E=m?t.features.length:1;for(n=0;n<E;n++){for(a=m?t.features[n].geometry:x?t.geometry:t,c=m?t.features[n].properties:x?t.properties:{},d=m?t.features[n].bbox:x?t.bbox:void 0,p=m?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,d,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,d,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,d,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function pj(t,e={}){const n=[];if(fj(t,i=>{n.push(i.coordinates)}),n.length<2)throw new Error("Must specify at least 2 geometries");const r=dj(n[0],...n.slice(1));return r.length===0?null:r.length===1?zc(r[0],e.properties):N9(r,e.properties)}var gj=pj;function mE(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,d=0,p=0,v,m=t.type,x=m==="FeatureCollection",E=m==="Feature",T=x?t.features.length:1,D=0;D<T;D++){c=x?t.features[D].geometry:E?t.geometry:t,v=c?c.type==="GeometryCollection":!1,a=v?c.geometries.length:1;for(var k=0;k<a;k++){var B=0,W=0;if(o=v?c.geometries[k]:c,o!==null){l=o.coordinates;var Q=o.type;switch(d=0,Q){case null:break;case"Point":if(e(l,p,D,B,W)===!1)return!1;p++,B++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,D,B,W)===!1)return!1;p++,Q==="MultiPoint"&&B++}Q==="LineString"&&B++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-d;i++){if(e(l[r][i],p,D,B,W)===!1)return!1;p++}Q==="MultiLineString"&&B++,Q==="Polygon"&&W++}Q==="Polygon"&&B++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(W=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-d;s++){if(e(l[r][i][s],p,D,B,W)===!1)return!1;p++}W++}B++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(mE(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function mj(t,e){var n,r,i,s,o,a,l,c,d,p,v=0,m=t.type==="FeatureCollection",x=t.type==="Feature",E=m?t.features.length:1;for(n=0;n<E;n++){for(a=m?t.features[n].geometry:x?t.geometry:t,c=m?t.features[n].properties:x?t.properties:{},d=m?t.features[n].bbox:x?t.bbox:void 0,p=m?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,d,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,d,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,d,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function vj(t,e){mj(t,function(n,r,i,s,o){var a=n===null?null:n.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(wp(n,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<n.coordinates.length;c++){var d=n.coordinates[c],p={type:l,coordinates:d};if(e(wp(p,i),r,c)===!1)return!1}})}function yj(t,e){vj(t,function(n,r,i){var s=0;if(n.geometry){var o=n.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,c=0,d=0;if(mE(n,function(p,v,m,x,E){if(a===void 0||r>l||x>c||E>d){a=p,l=r,c=x,d=E,s=0;return}var T=lm([a,p],n.properties);if(e(T,r,i,E,s)===!1)return!1;s++,a=p})===!1)return!1}}})}function bj(t,e,n){var r=n,i=!1;return yj(t,function(s,o,a,l,c){i===!1&&n===void 0?r=s:r=e(r,s,o,a,l,c),i=!0}),r}function Bv(t,e={}){return bj(t,(n,r)=>{const i=r.geometry.coordinates;return n+lE(i[0],i[1],e)},0)}var _j=Bv;class Vl extends es.Polygon{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Xe(this,"properties");Xe(this,"_originalStyle");Xe(this,"_path");this.properties={type:"Polygon",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{color:r.color||"#2b6451",weight:r.weight||3,opacity:r.opacity||1,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity||.2,dashArray:r.dashArray||"",name:r.name||""}},this.on("mouseover",this.highlight),this.on("mouseout",this.unhighlight),this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){var n,r,i,s,o;try{const a=this.getLatLngs()[0];if(!a||a.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const l=a.map(D=>[D.lng,D.lat]);l.push(l[0]);const c=zc([l]),d=uE(c),p=Bv(lm([...l]),{units:"meters"}),v=Ng(c),m=es.latLng(v.geometry.coordinates[1],v.geometry.coordinates[0]),x=((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||"",E=((i=this.properties)==null?void 0:i.category)||"forages",T=((s=this.properties)==null?void 0:s.accessLevel)||"visitor";this.properties={type:"Polygon",coordinates:a.map(D=>({lat:D.lat,lng:D.lng})),surface:d,perimeter:p,center:{lat:m.lat,lng:m.lng},vertices:a.length,category:E,accessLevel:T,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:x}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate polygon properties",a)}}setName(n){this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})}getName(){var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""}setLatLngs(n){return super.setLatLngs(n),this.updateProperties(),this}getMidPoints(){const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(es.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return r}moveVertex(n,r){const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i[n]=r,es.Polygon.prototype.setLatLngs.call(this,[i]))}addVertex(n,r){const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i.splice((n+1)%i.length,0,r),es.Polygon.prototype.setLatLngs.call(this,[i]))}move(n){const i=this.getLatLngs()[0].map(s=>es.latLng(s.lat+n.lat,s.lng+n.lng));return es.Polygon.prototype.setLatLngs.call(this,[i]),this}getCenter(){const n=this.getLatLngs()[0];if(!n||n.length===0)return new es.LatLng(0,0);try{const r=n.filter(c=>c&&typeof c.lat=="number"&&typeof c.lng=="number"&&!isNaN(c.lat)&&!isNaN(c.lng)&&Math.abs(c.lat)<=90&&Math.abs(c.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new es.LatLng(0,0);const i=r.map(c=>[c.lng,c.lat]);i.push(i[0]);const s=zc([i]),o=Ng(s),a=o.geometry.coordinates[1],l=o.geometry.coordinates[0];if(typeof a!="number"||typeof l!="number"||isNaN(a)||isNaN(l)||Math.abs(a)>90||Math.abs(l)>180)throw new Error("Centroid calculé invalide");return es.latLng(a,l)}catch(r){console.warn("Erreur lors du calcul du centroïde avec turf.js, utilisation de la méthode simple",r);let i=0,s=0,o=0;for(const a of n)a&&typeof a.lat=="number"&&typeof a.lng=="number"&&!isNaN(a.lat)&&!isNaN(a.lng)&&Math.abs(a.lat)<=90&&Math.abs(a.lng)<=180&&(i+=a.lat,s+=a.lng,o++);return o===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new es.LatLng(0,0)):new es.LatLng(i/o,s/o)}}getSegmentLengths(){const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(s.distanceTo(o))}return r}highlight(){if(!this._originalStyle){this._originalStyle={...this.options};const n=(this._originalStyle.weight||3)*1.5;this.setStyle({weight:n,opacity:1,fillOpacity:Math.min((this._originalStyle.fillOpacity||.2)+.1,.4),className:"polygon-hover-effect"});try{this._path&&(this._path.style.filter="drop-shadow(0 0 3px rgba(43, 100, 81, 0.7))",this._path.style.transition="all 0.2s ease-in-out")}catch(r){console.warn("Impossible d'appliquer l'effet de lueur au polygone",r)}}}unhighlight(){if(this._originalStyle){this.setStyle(this._originalStyle),this._originalStyle=void 0;try{this._path&&(this._path.style.filter="",this._path.style.transition="")}catch(n){console.warn("Impossible de restaurer le style du polygone",n)}}}}class ms extends es.Polyline{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Xe(this,"properties");Xe(this,"cachedProperties",{});Xe(this,"needsUpdate",!0);Xe(this,"_originalStyle");Xe(this,"_path");this.properties={type:"Line",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...r||{},name:r.name||""}},this.updateProperties(),this.on("add",()=>{this.updateProperties()}),this.on("mouseover",this.highlight),this.on("mouseout",this.unhighlight)}highlight(){if(!this._originalStyle){this._originalStyle={...this.options};const n=(this._originalStyle.weight||3)*1.75,r=this._originalStyle.color||"#2b6451";this.setStyle({weight:n,opacity:1,className:"line-hover-effect"});try{this._path&&(this._path.style.filter=`drop-shadow(0 0 4px ${r})`,this._path.style.transition="all 0.2s ease-in-out")}catch{console.warn("Impossible d'appliquer l'effet de lueur à la ligne")}}}unhighlight(){if(this._originalStyle){this.setStyle(this._originalStyle),this._originalStyle=void 0;try{this._path&&(this._path.style.filter="",this._path.style.transition="")}catch{console.warn("Impossible de retirer l'effet de lueur de la ligne")}}}isPointNearLine(n,r=10){if(!this._map)return!1;const i=this.getLatLngs();if(i.length<2)return!1;for(let s=0;s<i.length-1;s++){const o=this._map.latLngToLayerPoint(i[s]),a=this._map.latLngToLayerPoint(i[s+1]),l=this._map.latLngToLayerPoint(n);if(es.LineUtil.pointToSegmentDistance(l,o,a)<=r)return!0}return!1}updateProperties(){var i,s,o,a,l;const n=this.getLatLngs();if(!n||n.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=n.map(c=>[c.lng,c.lat]);try{const c=lm(r),d=Bv(c,{units:"meters"});let p;if(n.length===2)p=es.latLng((n[0].lat+n[1].lat)/2,(n[0].lng+n[1].lng)/2);else{const T=W4(c,d/2,{units:"meters"});p=es.latLng(T.geometry.coordinates[1],T.geometry.coordinates[0])}const v=10,m=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"",x=((o=this.properties)==null?void 0:o.category)||"forages",E=((a=this.properties)==null?void 0:a.accessLevel)||"visitor";this.properties={type:"Line",length:d,coordinates:n.map(T=>({lat:T.lat,lng:T.lng})),center:{lat:p.lat,lng:p.lng},vertices:n.length,surfaceInfluence:d*v,dimensions:{width:v},category:x,accessLevel:E,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((l=this.options)==null?void 0:l.dashArray)||"",name:m}},this.cachedProperties.length=d,this.cachedProperties.center=p,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(c){console.error("Failed to calculate line properties",c)}}setName(n){this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})}getName(){var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""}invalidateCache(){this.needsUpdate=!0,this.cachedProperties={}}setLatLngs(n){return super.setLatLngs(n),this.needsUpdate=!0,this.cachedProperties={},this.fire("latlngs:updated",{latlngs:this.getLatLngs()}),this}getMidPoints(){if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];if(!s||!o){console.warn("Points invalides détectés pour le segment",i);continue}r.push(es.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return this.cachedProperties.midPoints=r,r}getMidPointAt(n){const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return null;const i=r[n],s=r[n+1];return!i||!s?(console.warn("Points invalides pour calcul du midpoint au segment",n),null):es.latLng((i.lat+s.lat)/2,(i.lng+s.lng)/2)}moveVertex(n,r,i=!1){const s=this.getLatLngs();n>=0&&n<s.length&&(s[n]=r,this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("vertex:moved",{index:n,latlng:r,allPoints:s}),i&&this.updateProperties())}addVertex(n,r,i=!1){const s=this.getLatLngs();n>=0&&n<s.length-1&&(s.splice(n+1,0,r),es.Polyline.prototype.setLatLngs.call(this,s),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,i&&this.updateProperties())}move(n,r=!0){this.fire("move:start");const i=this.getLatLngs(),s=i.map(o=>es.latLng(o.lat+n.lat,o.lng+n.lng));return this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("move",{delta:n,newPositions:s,oldPositions:i}),r&&(this.updateProperties(),this.fire("properties:updated",{shape:this,properties:this.properties}),this.fire("move:end")),this}getCenter(){if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const n=this.getLatLngs();if(n.length<2)return n[0]||new es.LatLng(0,0);try{const r=n.map(l=>[l.lng,l.lat]),i=lm(r),s=Bv(i,{units:"meters"}),o=W4(i,s/2,{units:"meters"}),a=es.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0]);return this.cachedProperties.center=a,a}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const i=n.reduce((a,l)=>a+l.lat,0)/n.length,s=n.reduce((a,l)=>a+l.lng,0)/n.length,o=new es.LatLng(i,s);return this.cachedProperties.center=o,o}}getSegmentLengths(){if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];r.push(s.distanceTo(o))}return this.cachedProperties.segmentLengths=r,r}getSegmentLengthAt(n){const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return 0;const i=r[n],s=r[n+1];return i.distanceTo(s)}getLengthToVertex(n){const r=this.getLatLngs();let i=0;if(n<=0||r.length<2)return 0;for(let s=0;s<Math.min(n,r.length-1);s++)i+=r[s].distanceTo(r[s+1]);return i}getLength(){if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const n=this.getLatLngs();let r=0;for(let i=0;i<n.length-1;i++)r+=n[i].distanceTo(n[i+1]);return this.cachedProperties.length=r,r}}var Ei=(t=>(t.PRIVATE="private",t.COMPANY="company",t.EMPLOYEE="employee",t.VISITOR="visitor",t))(Ei||{});const hf=Ap("notes",()=>{const t=_t([]),e=_t([]),n=qn(()=>q=>t.value.find(R=>R.id===q)),r=qn(()=>q=>{const R=t.value.find($=>$.id===q);return R?R.color:"#6B7280"}),i=qn(()=>q=>e.value.filter(R=>R.columnId===q).sort((R,$)=>R.order-$.order)),s=qn(()=>t.value.find(q=>q.isDefault)||t.value[0]),o=qn(()=>[...t.value].sort((q,R)=>q.order-R.order)),a=qn(()=>e.value),l=qn(()=>q=>a.value.filter(R=>R.columnId===q).sort((R,$)=>R.order-$.order));async function c(){console.log(`
[NotesStore][loadColumns] Initialisation des colonnes fixes...`);try{const q=[{id:"1",title:"Idées",color:"#8B5CF6",order:0,isDefault:!1},{id:"2",title:"À faire",color:"#F59E0B",order:1,isDefault:!0},{id:"3",title:"En cours",color:"#3B82F6",order:2,isDefault:!1},{id:"4",title:"Terminées",color:"#10B981",order:3,isDefault:!1},{id:"5",title:"Autres",color:"#6B7280",order:4,isDefault:!1}];t.value=q,console.log("[NotesStore][loadColumns] Colonnes fixes initialisées:",t.value)}catch(q){throw console.error("[NotesStore][loadColumns] Erreur:",q),q}}async function d(q){console.log(`
[NotesStore][addColumn] Fonction désactivée - Utilisation de colonnes fixes`)}async function p(q,R){console.log(`
[NotesStore][updateColumn] Mise à jour locale de la colonne:`,q,R);try{const $=t.value.findIndex(X=>X.id===q);$!==-1&&(t.value[$]={...t.value[$],...R},console.log("[NotesStore][updateColumn] État des colonnes après mise à jour:",t.value))}catch($){throw console.error("[NotesStore][updateColumn] Erreur:",$),$}}async function v(q){console.log(`
[NotesStore][removeColumn] Fonction désactivée - Utilisation de colonnes fixes`)}async function m(q){console.log(`
[NotesStore][reorderColumns] FONCTION DÉSACTIVÉE - Le déplacement des colonnes n'est plus possible`)}function x(q){if(!q)return"private";switch(q.toLowerCase()){case"private":return"private";case"company":return"company";case"employee":return"employee";case"visitor":return"visitor";default:return console.warn(`[NotesStore] Niveau d'accès inconnu: ${q}, utilisation de PRIVATE par défaut`),"private"}}function E(q){var J,Y,ye,Ce;if(!q.id)throw console.error("[NotesStore][addNote] Erreur: ID du backend manquant"),new Error("L'ID du backend est requis pour ajouter une note");const R=new Date().toISOString(),$=e.value.filter(He=>He.columnId===q.columnId),X=$.length>0?Math.max(...$.map(He=>He.order))+1:0,K=x(q.access_level);console.log("[NotesStore][addNote] Ajout d'une note avec ID backend:",q.id,"et niveau d'accès:",K);const F=co();let N=q.enterprise_id;return N==null&&(F.isAdmin?N=null:F.isEntreprise&&F.user?N=F.user.id:F.isSalarie&&((J=F.user)!=null&&J.enterprise_id)?N=F.user.enterprise_id:F.isVisiteur&&((ye=(Y=F.user)==null?void 0:Y.salarie)!=null&&ye.enterprise_id)?N=F.user.salarie.enterprise_id:!F.isAdmin&&((Ce=F.user)!=null&&Ce.enterprise_id)&&(N=F.user.enterprise_id)),console.log("[NotesStore][addNote] Enterprise ID final:",N),e.value.push({...q,id:q.id,order:X,accessLevel:K,createdAt:q.createdAt||q.created_at||R,updatedAt:q.updatedAt||q.updated_at||R,comments:[],photos:[],enterprise_id:N}),q.id}function T(q,R){console.log(`
[NotesStore][updateNote] Mise à jour de la note:`,q,R);try{const $=e.value.findIndex(X=>X.id===q);$!==-1&&(R.color&&(R.style={...e.value[$].style,color:R.color,fillColor:R.color}),R.access_level&&(R.accessLevel=x(R.access_level),delete R.access_level),e.value[$]={...e.value[$],...R},console.log("[NotesStore][updateNote] Note mise à jour:",e.value[$]))}catch($){throw console.error("[NotesStore][updateNote] Erreur:",$),$}}function D(q){e.value.findIndex($=>$.id===q)!==-1?(console.log("[NotesStore][removeNote] Suppression de la note avec ID:",q),e.value=e.value.filter($=>$.id!==q)):console.warn("[NotesStore][removeNote] Tentative de suppression d'une note inexistante avec ID:",q)}function k(q,R){const $=e.value.findIndex(X=>X.id===q);if($!==-1){const X=e.value[$];if(X.columnId!==R){const F=e.value.filter(Y=>Y.columnId===R),N=F.length>0?Math.max(...F.map(Y=>Y.order))+1:0,J={...X,columnId:R,order:N,updatedAt:new Date().toISOString()};e.value[$]=J}else e.value[$]={...e.value[$],updatedAt:new Date().toISOString()}}}function B(q,R){R.forEach(($,X)=>{const K=e.value.findIndex(F=>F.id===$&&F.columnId===q);K!==-1&&(e.value[K]={...e.value[K],order:X,updatedAt:new Date().toISOString()})})}function W(q){switch(q){case"private":return"Privé";case"company":return"Entreprise";case"employee":return"Salariés";case"visitor":return"Visiteurs";default:return"Inconnu"}}async function Q(q,R){try{const $=co();if(!$.user)throw new Error("Vous devez être connecté pour ajouter un commentaire");if(!$.isEntreprise&&!$.isAdmin)throw new Error("Seules les entreprises peuvent ajouter des commentaires");if(!e.value.some(ye=>ye.id===q))throw new Error(`La note avec l'ID ${q} n'existe pas`);const F=(await sa.addComment(q,R)).data,N=e.value.findIndex(ye=>ye.id===q);if(N===-1)return;const J=e.value[N];J.comments||(J.comments=[]);const Y={id:F.id,text:F.text,createdAt:F.created_at,userId:F.user,userName:F.user_name,userRole:F.user_role};return J.comments.push(Y),J.updatedAt=new Date().toISOString(),e.value[N]={...J},Y.id}catch($){throw console.error("Erreur lors de l'ajout du commentaire:",$),$}}async function pe(q,R){try{const $=e.value.findIndex(F=>F.id===q);if($===-1)throw new Error(`La note avec l'ID ${q} n'existe pas`);const X=e.value[$];if(!X.comments||X.comments.length===0)throw new Error("Aucun commentaire trouvé pour cette note");if(!X.comments.some(F=>F.id===R))throw new Error(`Le commentaire avec l'ID ${R} n'existe pas`);await sa.deleteComment(q,R),X.comments=X.comments.filter(F=>F.id!==R),X.updatedAt=new Date().toISOString(),e.value[$]={...X}}catch($){throw console.error("Erreur lors de la suppression du commentaire:",$),$}}async function fe(q,R){try{if(R.id&&R.image){const $=e.value.findIndex(F=>F.id===q);if($===-1)return;const X=e.value[$];X.photos||(X.photos=[]);const K={id:R.id,url:R.image,caption:R.caption,createdAt:R.created_at};return X.photos.push(K),X.updatedAt=new Date().toISOString(),e.value[$]={...X},K.id}else{const $=new FormData;$.append("image",R.url),R.caption&&$.append("caption",R.caption);const K=(await sa.addPhoto(q,$)).data,F=e.value.findIndex(Y=>Y.id===q);if(F===-1)return;const N=e.value[F];N.photos||(N.photos=[]);const J={id:K.id,url:K.image,caption:K.caption,createdAt:K.created_at};return N.photos.push(J),N.updatedAt=new Date().toISOString(),e.value[F]={...N},J.id}}catch($){throw console.error("Erreur lors de l'ajout de la photo:",$),$}}async function O(q,R){try{await sa.deletePhoto(q,R);const $=e.value.findIndex(F=>F.id===q);if($===-1){console.error("[NotesStore] Note non trouvée pour la suppression de la photo");return}e.value[$].photos||(e.value[$].photos=[]);const X=e.value[$],K=(X.photos||[]).filter(F=>F.id!==R);e.value[$]={...X,photos:K,updatedAt:new Date().toISOString()},console.log("[NotesStore] Photo supprimée avec succès, photos restantes:",K.length)}catch($){throw console.error("Erreur lors de la suppression de la photo:",$),$}}async function U(q,R,$){try{await sa.updatePhoto(q,R,{caption:$});const X=e.value.findIndex(N=>N.id===q);if(X===-1||!e.value[X].photos)return;const K=e.value[X],F=K.photos.findIndex(N=>N.id===R);if(F===-1)return;K.photos[F].caption=$,K.updatedAt=new Date().toISOString(),e.value[X]={...K}}catch(X){throw console.error("Erreur lors de la mise à jour de la légende:",X),X}}return{columns:t,notes:e,getColumnById:n,getColumnColor:r,getNotesByColumn:i,getDefaultColumn:s,getSortedColumns:o,getAccessibleNotes:a,getAccessibleNotesByColumn:l,getAccessLevelLabel:W,loadColumns:c,addColumn:d,updateColumn:p,removeColumn:v,reorderColumns:m,addNote:E,updateNote:T,removeNote:D,moveNote:k,reorderNotes:B,addComment:Q,removeComment:pe,addPhoto:fe,removePhoto:O,updatePhoto:U}});class gl extends en.Marker{constructor(n,r={}){const s=`
      <div class="geo-note-marker">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
          <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${r.color||"#2b6451"}" />
        </svg>
      </div>
    `,o=en.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36]});if(!document.getElementById("geo-note-style")){const l=document.createElement("style");l.id="geo-note-style",l.textContent=`
        .geo-note-icon {
          background: none !important;
          border: none !important;
        }
        .geo-note-marker {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
          position: relative;
          transition: filter 0.2s ease-in-out;
        }
        .geo-note-marker.hover {
          filter: brightness(1.2) drop-shadow(0 0 4px rgba(59, 130, 246, 0.7));
        }
      `,document.head.appendChild(l)}super(n,{icon:o,draggable:!1,autoPan:!0,riseOnHover:!0,bubblingMouseEvents:!1,interactive:!0,keyboard:!1});Xe(this,"properties");Xe(this,"_planSaved",!1);Xe(this,"_isMoving",!1);Xe(this,"_animateZoom",()=>{});this.properties={type:"Note",name:r.name||"Note géolocalisée",description:r.description||"",columnId:r.columnId||"1",accessLevel:r.accessLevel||Ei.PRIVATE,category:r.category||"forages",style:{color:r.color||"#2b6451",weight:r.weight||2,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity!==void 0?r.fillOpacity:.8,radius:r.radius||12},comments:[],photos:[],order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),enterprise_id:r.enterprise_id||null},console.log("[GeoNote][constructor] Note créée avec columnId:",this.properties.columnId),this.on("dblclick",this.onDoubleClick),this.on("add",l=>{if(l.target&&l.target._map){const c=l.target._map;this._protectFromZoomAnimationErrors(c),c.on("zoomend",()=>{this.updatePosition(),this.refreshIconStyle(),this.forceVisible()}),c.on("moveend",()=>{this.updatePosition(),this.refreshIconStyle(),this.forceVisible()}),setTimeout(()=>this.forceVisible(),100)}}),window.addEventListener("geonote:updateStyle",l=>{const c=l.detail.noteId,d=this._dbId||this.properties.id;console.log("[GeoNote][updateStyle] Événement reçu pour noteId:",c,"Comparaison avec ID backend:",d),c===d&&(console.log("[GeoNote][updateStyle] Correspondance trouvée, mise à jour du style:",l.detail.style),this.setNoteStyle(l.detail.style),this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,...l.detail.style}))}),window.addEventListener("geonote:update",l=>{const c=l.detail.noteId,d=this._dbId||this.properties.id;console.log("[GeoNote][update] Événement reçu pour noteId:",c,"Comparaison avec ID backend:",d),c===d&&(console.log("[GeoNote][update] Correspondance trouvée, mise à jour des propriétés:",l.detail.properties),this.properties={...this.properties,name:l.detail.properties.name,description:l.detail.properties.description,columnId:l.detail.properties.columnId,accessLevel:l.detail.properties.accessLevel,style:l.detail.properties.style},this.setNoteStyle(l.detail.properties.style),console.log("[GeoNote][update] Propriétés mises à jour:",this.properties))}),console.log("[GeoNote][constructor] Note créée:",{location:n,name:this.properties.name,type:this.properties.type,style:this.properties.style}),this.on("mouseover",this.highlight),this.on("mouseout",this.unhighlight)}forceVisible(){try{const n=this.getElement();if(!n){console.warn("[GeoNote][forceVisible] Élément DOM introuvable, recréation de l'icône"),this.recreateIcon();return}console.log("[GeoNote][forceVisible] Forçage de la visibilité de la note"),n.style.display="block",n.style.visibility="visible",n.style.opacity="1";const r=n.querySelector(".geo-note-marker");r&&(r.style.display="flex",r.style.visibility="visible",r.style.opacity="1");const i=n.querySelector("svg");i&&(i.style.display="block",i.style.visibility="visible",i.style.opacity="1"),n.offsetHeight,console.log("[GeoNote][forceVisible] Note maintenant visible")}catch(n){console.error("[GeoNote][forceVisible] Erreur:",n),this.recreateIcon()}}recreateIcon(){var n,r;try{console.log("[GeoNote][recreateIcon] Recréation de l'icône");const i=this.getLatLng(),o=`
        <div class="geo-note-marker" style="display: flex; visibility: visible; opacity: 1;">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" style="display: block; visibility: visible; opacity: 1;">
            <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${((n=this.properties.style)==null?void 0:n.fillColor)||((r=this.properties.style)==null?void 0:r.color)||"#2b6451"}" />
          </svg>
        </div>
      `,a=en.divIcon({html:o,className:"geo-note-icon forced-visible",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});if(this.setIcon(a),this._map){const l=this._map.latLngToLayerPoint(i),c=this.getElement();c&&en.DomUtil.setPosition(c,l)}if(!document.getElementById("geo-note-forced-style")){const l=document.createElement("style");l.id="geo-note-forced-style",l.textContent=`
          .forced-visible {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            pointer-events: auto !important;
          }
          .forced-visible * {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
          }
          .geo-note-marker {
            display: flex !important;
            visibility: visible !important;
            opacity: 1 !important;
          }
        `,document.head.appendChild(l)}console.log("[GeoNote][recreateIcon] Icône recréée avec succès")}catch(i){console.error("[GeoNote][recreateIcon] Erreur lors de la recréation de l'icône:",i)}}highlight(){const n=this.getElement();if(n){console.log("[GeoNote][highlight] Avant application de l'effet:",{element:n,display:n.style.display,visibility:n.style.visibility,opacity:n.style.opacity}),this.forceVisible(),n.style.visibility="visible",n.style.display="",n.style.opacity="1",n.style.zIndex="1000";const r=n.querySelector(".geo-note-marker");r&&r.classList.add("hover"),console.log("[GeoNote][highlight] Après application de l'effet:",{element:n,display:n.style.display,visibility:n.style.visibility,opacity:n.style.opacity})}}unhighlight(){const n=this.getElement();if(n){console.log("[GeoNote][unhighlight] Avant retrait de l'effet:",{element:n,display:n.style.display,visibility:n.style.visibility,opacity:n.style.opacity}),this.forceVisible();const r=n.querySelector(".geo-note-marker");r&&r.classList.remove("hover"),n.style.zIndex="",n.style.visibility="visible",n.style.display="",n.style.opacity="1",console.log("[GeoNote][unhighlight] Après retrait de l'effet:",{element:n,display:n.style.display,visibility:n.style.visibility,opacity:n.style.opacity})}}getColumnColor(n){return{1:"#8B5CF6",2:"#F59E0B",3:"#3B82F6",4:"#10B981",5:"#6B7280"}[n]||"#6B7280"}getColumnLabel(n){return{1:"Idées",2:"À faire",3:"En cours",4:"Terminées",5:"Autres"}[n]||"Colonne "+n}getAccessLevelLabel(n){switch(n){case Ei.PRIVATE:return"Privé";case Ei.COMPANY:return"Entreprise";case Ei.EMPLOYEE:return"Salariés";case Ei.VISITOR:return"Visiteurs";default:return"Inconnu"}}getAccessLevelColor(n){switch(n){case Ei.PRIVATE:return"#9CA3AF";case Ei.COMPANY:return"#EF4444";case Ei.EMPLOYEE:return"#F59E0B";case Ei.VISITOR:return"#10B981";default:return"#6B7280"}}onDoubleClick(n){en.DomEvent.stopPropagation(n),this.editNote()}editNote(){const n=this._dbId,r=this._leaflet_id;console.log(`[GeoNote][editNote] Édition de note - ID backend: ${n}, ID properties: ${this.properties.id}, ID Leaflet: ${r}`);const i={id:r,backendId:n,title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},columnId:this.properties.columnId||"1",accessLevel:this.properties.accessLevel||"company",style:this.properties.style||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:this.properties.comments||[],photos:this.properties.photos||[]};console.log("[GeoNote][editNote] Édition de note avec columnId:",i.columnId),console.log("[GeoNote] Émission de l'événement note:edit avec",i);const s=new CustomEvent("geonote:edit",{detail:{note:i,source:this,backendId:n}});window.dispatchEvent(s),this.fire("note:edit",{note:i,source:this,backendId:n})}openInGoogleMaps(){const n=this.getLatLng().lat,r=this.getLatLng().lng,i=`https://www.google.com/maps/dir/?api=1&destination=${n},${r}`;window.open(i,"_blank")}updateProperties(){var s;this.properties.type="Note",this.properties.category||(this.properties.category="forages"),this.properties.accessLevel||(this.properties.accessLevel=Ei.PRIVATE);const n=this.properties.style||{};let r=n.color||n.fillColor;if(!r){const o=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker svg path");if(o){const a=o.getAttribute("fill");a&&(r=a,console.log("[GeoNote][updateProperties] Couleur récupérée depuis SVG:",r))}}r||(r="#2b6451",console.log("[GeoNote][updateProperties] Utilisation de la couleur par défaut:",r)),console.log("[GeoNote][updateProperties] Couleur finale utilisée:",r);const i=n.radius||12;this.properties.style={...n,color:r,weight:n.weight||2,fillColor:r,fillOpacity:n.fillOpacity||.8,radius:i,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category},console.log("[GeoNote][updateProperties] Style mis à jour:",this.properties.style)}setNoteStyle(n){console.log("[GeoNote][setNoteStyle] Mise à jour du style:",n);const r=n.color||n.fillColor||"#2b6451",i=n.fillColor||n.color||"#2b6451";console.log("[GeoNote][setNoteStyle] Nouvelles couleurs - stroke:",r,"fill:",i);const s=this.getElement();if(s)try{const l=s.querySelector("svg path");l?(l.setAttribute("fill",i),console.log("[GeoNote][setNoteStyle] Couleur mise à jour directement sur le SVG existant")):(console.warn("[GeoNote][setNoteStyle] Impossible de trouver le path SVG dans l'élément"),this._updateIconWithNewColor(i))}catch(l){console.warn("[GeoNote][setNoteStyle] Erreur lors de la mise à jour directe du SVG:",l),this._updateIconWithNewColor(i)}else this._updateIconWithNewColor(i);const o=n._accessLevel||n.accessLevel||this.properties.accessLevel,a=n.category||this.properties.category;this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,color:r,weight:n.weight||this.properties.style.weight||2,fillColor:i,fillOpacity:n.fillOpacity!==void 0?n.fillOpacity:this.properties.style.fillOpacity||.8,radius:n.radius||this.properties.style.radius||12,_accessLevel:o,accessLevel:o,category:a}),o&&this.properties.accessLevel!==o&&(this.properties.accessLevel=o,console.log("[GeoNote][setNoteStyle] Niveau d'accès mis à jour:",o)),a&&this.properties.category!==a&&(this.properties.category=a,console.log("[GeoNote][setNoteStyle] Catégorie mise à jour:",a)),this.refreshIconStyle(),console.log("[GeoNote][setNoteStyle] Mise à jour du popup")}refreshIconStyle(){const n=this.getElement();if(n&&(n.style.display="none",n.offsetHeight,n.style.display="",en.DomUtil.setTransform(n,new en.Point(0,0),1),this._map))try{const r=this._map.latLngToLayerPoint(this.getLatLng());en.DomUtil.setPosition(n,r),n.style.opacity="1",n.style.transition="opacity 0.2s"}catch(r){console.warn("[GeoNote][refreshIconStyle] Erreur lors de la mise à jour de la position:",r)}}_protectFromZoomAnimationErrors(n){try{const r=this._animateZoom;this._animateZoom=function(i){try{if(!this._map||!i.center||!i.zoom){console.warn("[GeoNote][_animateZoom] Animation de zoom ignorée: propriétés manquantes");return}typeof this.updatePositionDuringZoom=="function"?this.updatePositionDuringZoom(i):r.call(this,i)}catch(s){console.warn("[GeoNote][_animateZoom] Erreur lors de l'animation de zoom:",s);try{const o=this.getElement();if(o&&this._map){const a=this._map.latLngToLayerPoint(this.getLatLng());en.DomUtil.setPosition(o,a)}}catch(o){console.error("[GeoNote][_animateZoom] Erreur lors de la récupération:",o)}}},n.on("zoomanim",i=>{this.updatePositionDuringZoom(i)}),console.log("[GeoNote][_protectFromZoomAnimationErrors] Protection contre les erreurs d'animation de zoom activée")}catch(r){console.error("[GeoNote][_protectFromZoomAnimationErrors] Erreur lors de la mise en place de la protection:",r)}}_updateIconWithNewColor(n){try{const r=this._map;let i=!1;r&&(i=r.options.zoomAnimation||!1,r.options.zoomAnimation=!1);const s=`
        <div class="geo-note-marker">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${n}" />
          </svg>
        </div>
      `,o=en.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});this.setIcon(o),r&&i&&setTimeout(()=>{r.options.zoomAnimation=!0},100),console.log("[GeoNote][_updateIconWithNewColor] Icône mise à jour avec la nouvelle couleur")}catch(r){console.error("[GeoNote][_updateIconWithNewColor] Erreur lors de la mise à jour de l'icône:",r)}}toBackendFormat(n){this.updateProperties();const r=this.getLatLng(),s={...{...this.properties.style,radius:this.properties.style.radius||12},_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel},o=this.properties.columnId||"1";return console.log("[GeoNote][toBackendFormat] Sauvegarde de note avec columnId:",o),{id:n,type_forme:"Note",data:{location:{type:"Point",coordinates:[r.lng,r.lat]},name:this.properties.name,description:this.properties.description,columnId:o,accessLevel:this.properties.accessLevel,category:this.properties.category||"forages",style:s,comments:this.properties.comments||[],photos:this.properties.photos||[],order:this.properties.order||0,createdAt:this.properties.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}}}updateFromBackendData(n){var l,c,d,p,v;console.log("[GeoNote][updateFromBackendData] Début de la mise à jour avec les données:",n),console.log("[GeoNote][updateFromBackendData] Couleur dans les données reçues:",{styleColor:(l=n.style)==null?void 0:l.color,styleFillColor:(c=n.style)==null?void 0:c.fillColor,styleObject:n.style}),this.properties.type="Note";const r=n.style?{...n.style,radius:n.style.radius||12}:this.properties.style;console.log("[GeoNote][updateFromBackendData] Style après traitement initial:",r);const i=((d=n.style)==null?void 0:d._accessLevel)||((p=n.style)==null?void 0:p.accessLevel)||n.accessLevel||this.properties.accessLevel||Ei.PRIVATE;console.log("[GeoNote][updateFromBackendData] Niveau d'accès récupéré:",i);const s=((v=n.style)==null?void 0:v.category)||n.category||this.properties.category||"forages";console.log("[GeoNote][updateFromBackendData] Catégorie récupérée:",s);const o=n.columnId||this.properties.columnId||"1";console.log("[GeoNote][updateFromBackendData] Mise à jour de note avec columnId:",o);const a={...r,_accessLevel:i,accessLevel:i,category:s};this.properties={...this.properties,name:n.name||this.properties.name,description:n.description||this.properties.description,columnId:o,accessLevel:i,category:s,style:a,comments:n.comments||this.properties.comments||[],photos:n.photos||this.properties.photos||[],order:n.order||this.properties.order||0,createdAt:n.createdAt||this.properties.createdAt,updatedAt:n.updatedAt||new Date().toISOString()},this.setNoteStyle(a),console.log("[GeoNote][updateFromBackendData] Note mise à jour:",{name:this.properties.name,type:this.properties.type,category:this.properties.category,accessLevel:this.properties.accessLevel,style:this.properties.style})}static fromBackendData(n){var l,c,d,p,v,m,x,E;let r;if(typeof n.location=="object"&&!Array.isArray(n.location)&&n.location.type==="Point"){const T=n.location.coordinates;console.log("[GeoNote][fromBackendData] Coordonnées GeoJSON reçues:",T),r=[T[1],T[0]]}else if(Array.isArray(n.location)&&n.location.length===2)r=n.location;else throw new Error("Les données de la note ne contiennent pas de position valide");console.log("[GeoNote][fromBackendData] Création d'une note à partir des données:",n),console.log("[GeoNote][fromBackendData] Position utilisée:",r);const i=((l=n.style)==null?void 0:l._accessLevel)||((c=n.style)==null?void 0:c.accessLevel)||n.accessLevel||Ei.PRIVATE;console.log("[GeoNote][fromBackendData] Niveau d'accès récupéré:",i,"Style:",n.style);const s=((d=n.style)==null?void 0:d.category)||n.category||"forages";console.log("[GeoNote][fromBackendData] Catégorie récupérée:",s),n.accessLevel=i,n.category=s;const o=n.columnId||"1";console.log("[GeoNote][fromBackendData] Création de note avec columnId:",o);const a=new gl(r,{name:n.name,description:n.description,columnId:o,accessLevel:i,category:n.category||"forages",color:(p=n.style)==null?void 0:p.color,weight:(v=n.style)==null?void 0:v.weight,fillColor:(m=n.style)==null?void 0:m.fillColor,fillOpacity:(x=n.style)==null?void 0:x.fillOpacity,radius:(E=n.style)==null?void 0:E.radius});return a.properties.type="Note",a.properties.comments=n.comments||[],a.properties.photos=n.photos||[],a.properties.order=n.order||0,a.properties.createdAt=n.createdAt||new Date().toISOString(),a.properties.updatedAt=n.updatedAt||new Date().toISOString(),n.style&&a.setNoteStyle(n.style),console.log("[GeoNote][fromBackendData] Note créée:",{location:r,name:a.properties.name,type:a.properties.type,category:a.properties.category,accessLevel:a.properties.accessLevel,style:a.properties.style}),a}async saveNote(n){var r,i,s,o,a,l,c,d,p,v,m;if(this._planSaved)return this._dbId||0;console.log("[GeoNote][saveNote] Sauvegarde directe de la note via l'API");try{this.updateProperties(),console.log("[GeoNote][saveNote] Couleur avant sauvegarde:",{styleColor:(r=this.properties.style)==null?void 0:r.color,styleFillColor:(i=this.properties.style)==null?void 0:i.fillColor,iconColor:((o=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker svg path"))==null?void 0:o.getAttribute("fill"))||"non disponible"});let x=((a=this.properties.style)==null?void 0:a.color)||"#2b6451";if(x.startsWith("rgb")){const k=(l=this.getElement())==null?void 0:l.querySelector(".geo-note-marker svg path");if(k){const B=k.getAttribute("fill");B&&(x=B,console.log("[GeoNote][saveNote] Couleur récupérée depuis SVG pour remplacer RGB:",x))}}const E={...this.properties.style,color:x,fillColor:x,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category};console.log("[GeoNote][saveNote] Style final pour l'envoi:",E);const T={title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},column:this.properties.columnId||"1",access_level:this.properties.accessLevel||"company",style:E,category:this.properties.category||"forages",comments:this.properties.comments||[],photos:this.properties.photos||[]};if(this.properties.enterprise_id)T.enterprise_id=this.properties.enterprise_id;else{const k=co();!k.isAdmin&&((c=k.user)!=null&&c.enterprise_id)&&(T.enterprise_id=k.user.enterprise_id)}n&&(T.plan=n),console.log("[GeoNote][saveNote] Données à envoyer:",T),console.log("[GeoNote][saveNote] Couleur dans les données envoyées:",{styleColor:T.style.color,styleFillColor:T.style.fillColor});let D;return this._dbId?(D=(await sa.updateNote(this._dbId,T)).data,console.log("[GeoNote][saveNote] Note mise à jour avec succès:",D),console.log("[GeoNote][saveNote] Couleur dans la réponse du backend (update):",{styleColor:(d=D.style)==null?void 0:d.color,styleFillColor:(p=D.style)==null?void 0:p.fillColor,styleObject:D.style})):(D=(await sa.createNote(T)).data,console.log("[GeoNote][saveNote] Note créée avec succès:",D),console.log("[GeoNote][saveNote] Couleur dans la réponse du backend (create):",{styleColor:(v=D.style)==null?void 0:v.color,styleFillColor:(m=D.style)==null?void 0:m.fillColor,styleObject:D.style}),this._dbId=D.id,hf().addNote({...D,id:D.id,columnId:D.column,accessLevel:D.access_level})),this._planSaved=!0,D.id}catch(x){return console.error("[GeoNote][saveNote] Erreur lors de la sauvegarde de la note:",x),Zl().error("Erreur lors de la sauvegarde de la note"),0}}triggerPlanSave(){const n=localStorage.getItem("lastPlanId");n?(console.log(`[GeoNote][triggerPlanSave] Sauvegarde de la note avec le plan ${n}`),this.saveNote(parseInt(n))):(console.log("[GeoNote][triggerPlanSave] Aucun plan courant, sauvegarde sans association"),this.saveNote());const r=new CustomEvent("geonote:savePlan");window.dispatchEvent(r)}resetPlanSaveState(){this._planSaved=!1}moveTo(n){this.setLatLng(n),this.fire("note:moved",{latlng:n,note:this}),this.triggerPlanSave()}startMoving(){this._isMoving=!0,this.fire("note:movestart",{latlng:this.getLatLng(),note:this})}finishMoving(){this._isMoving=!1,this.fire("note:moveend",{latlng:this.getLatLng(),note:this}),this.triggerPlanSave()}isMoving(){return this._isMoving}updatePositionDuringZoom(n){try{if(!this._map||!n.center||n.zoom===void 0)return;const r=this.getElement();if(!r)return;r.style.opacity="0",r.style.transition="opacity 0.01s"}catch(r){console.warn("[GeoNote][updatePositionDuringZoom] Erreur lors de la gestion de l'animation de zoom:",r)}}updatePosition(){try{if(!this._map)return;const n=this.getElement();if(!n){console.warn("[GeoNote][updatePosition] Élément DOM introuvable, recréation de l'icône"),this.recreateIcon();return}const r=this._map.latLngToLayerPoint(this.getLatLng());en.DomUtil.setPosition(n,r),n.style.opacity="1",n.style.transition="opacity 0.2s",n.style.visibility="visible",n.style.display="block",console.log("[GeoNote][updatePosition] Position mise à jour:",{latLng:this.getLatLng(),pixelPosition:r,element:n});const i=n.getBoundingClientRect();i.width===0||i.height===0?(console.warn("[GeoNote][updatePosition] L'élément a une taille nulle, recréation de l'icône"),this.recreateIcon()):setTimeout(()=>this.forceVisible(),50)}catch(n){console.warn("[GeoNote][updatePosition] Erreur lors de la mise à jour de la position:",n),this.recreateIcon()}}}function wj(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function xj(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function n5(t){var e,n,r,i,s,o,a,l,c,d,p,v,m,x,E,T,D,k,B,W,Q,pe;if(console.log("[DrawingStore] Conversion de la forme en élément",{type:(e=t.properties)==null?void 0:e.type,name:(r=(n=t.properties)==null?void 0:n.style)==null?void 0:r.name,properties:t.properties}),((i=t.properties)==null?void 0:i.type)==="Note"){const fe=t.getLatLng();return{type_forme:"Note",data:{points:[[fe.lng,fe.lat]],style:{color:((s=t.properties.style)==null?void 0:s.color)||"#2b6451",weight:((o=t.properties.style)==null?void 0:o.weight)||3,opacity:((a=t.properties.style)==null?void 0:a.opacity)||1,fillColor:((l=t.properties.style)==null?void 0:l.fillColor)||"#2b6451",fillOpacity:((c=t.properties.style)==null?void 0:c.fillOpacity)||.2,name:((d=t.properties.style)==null?void 0:d.name)||""}}}}if(t instanceof Vl||((p=t.properties)==null?void 0:p.type)==="Polygon")return{type_forme:"Polygon",data:{points:t.getLatLngs()[0].map(U=>[U.lng,U.lat]),style:{color:((v=t.properties.style)==null?void 0:v.color)||"#2b6451",weight:((m=t.properties.style)==null?void 0:m.weight)||3,opacity:((x=t.properties.style)==null?void 0:x.opacity)||1,fillColor:((E=t.properties.style)==null?void 0:E.fillColor)||"#2b6451",fillOpacity:((T=t.properties.style)==null?void 0:T.fillOpacity)||.2,name:((D=t.properties.style)==null?void 0:D.name)||""},category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor"}};if(t instanceof ms||((k=t.properties)==null?void 0:k.type)==="Line")return{type_forme:"Line",data:{points:t.getLatLngs().map(U=>[U.lng,U.lat]),category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor",style:{color:((B=t.properties.style)==null?void 0:B.color)||"#2b6451",weight:((W=t.properties.style)==null?void 0:W.weight)||3,opacity:((Q=t.properties.style)==null?void 0:Q.opacity)||1,name:((pe=t.properties.style)==null?void 0:pe.name)||""}}};throw new Error("Type de forme non reconnu")}function Lj(t){var e,n,r,i,s,o,a,l,c,d,p,v,m,x,E,T,D;switch(console.log("[DrawingStore] Conversion de l'élément stocké en forme",{element:t}),t.type_forme){case"Polygon":{const k=t.data;if(!wj(k))return console.error("[DrawingStore] Données invalides pour Polygon"),null;const B=k.points.map(pe=>es.latLng(pe[1],pe[0])),W=((e=k.style)==null?void 0:e._accessLevel)||((n=k.style)==null?void 0:n.accessLevel)||k.accessLevel||"visitor";console.log("[DrawingStore] Polygon - Niveau d'accès récupéré:",W,"Style:",k.style),k.accessLevel=W;const Q=new Vl([B],{color:((r=k.style)==null?void 0:r.color)||"#2b6451",weight:((i=k.style)==null?void 0:i.weight)||3,opacity:((s=k.style)==null?void 0:s.opacity)||1,fillColor:((o=k.style)==null?void 0:o.fillColor)||"#2b6451",fillOpacity:((a=k.style)==null?void 0:a.fillOpacity)||.2,dashArray:((l=k.style)==null?void 0:l.dashArray)||"",name:((c=k.style)==null?void 0:c.name)||"",category:k.category||"forages",accessLevel:W});return Q.updateProperties(),Q}case"Line":{const k=t.data;if(!xj(k))return console.error("[DrawingStore] Données invalides pour Ligne"),null;const B=k.points.map(pe=>es.latLng(pe[1],pe[0])),W=((d=k.style)==null?void 0:d._accessLevel)||((p=k.style)==null?void 0:p.accessLevel)||k.accessLevel||"visitor";console.log("[DrawingStore] Line - Niveau d'accès récupéré:",W,"Style:",k.style),k.accessLevel=W;const Q=new ms(B,{...k.style||{},name:((v=k.style)==null?void 0:v.name)||"",category:k.category||"forages",accessLevel:W});return Q.updateProperties(),Q}case"Note":{console.log("[DrawingStore] Traitement d'une Note à partir de l'API",{id:t.id,data:t.data});const k=t.data;if(!k.location)return console.error("[DrawingStore] Données invalides pour Note"),null;try{const B={location:k.location,name:k.name||"Note géolocalisée",description:k.description||"",columnId:k.columnId||"en-cours",accessLevel:k.accessLevel||"private",category:k.category||"forages",style:{color:((m=k.style)==null?void 0:m.color)||"#2b6451",weight:((x=k.style)==null?void 0:x.weight)||2,fillColor:((E=k.style)==null?void 0:E.fillColor)||"#2b6451",fillOpacity:((T=k.style)==null?void 0:T.fillOpacity)||.8,radius:((D=k.style)==null?void 0:D.radius)||12},comments:k.comments||[],photos:k.photos||[],order:k.order||0,createdAt:k.createdAt||new Date().toISOString(),updatedAt:k.updatedAt||new Date().toISOString()};console.log("[DrawingStore] Données préparées pour la note:",B);const W=gl.fromBackendData(B);return W._dbId=t.id,console.log("[DrawingStore] Note créée:",{id:t.id,location:B.location,name:B.name,type:W.properties.type}),W}catch(B){return console.error("[DrawingStore] Erreur lors de la création de la Note:",B),null}}default:return console.warn("[DrawingStore] Type non géré pour la restauration:",t.type_forme),null}}const xp=Ap("drawing",{state:()=>({currentMapId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",filters:{accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,Note:!0}},currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null}),getters:{hasUnsavedChanges:t=>t.unsavedChanges,getCurrentElements:t=>t.elements,getSelectedElement:t=>t.selectedElement,getCurrentTool:t=>t.currentTool,getCurrentStyle:t=>t.currentStyle,getLastUsedType:t=>t.lastUsedType,getFilters:t=>t.filters,getFilteredElements:t=>{if(t.elements.length===0)return console.log("[DrawingStore][getFilteredElements] Aucun élément dans le store, retour d'un tableau vide"),[];console.log("[DrawingStore][getFilteredElements] Début du filtrage avec",{totalElements:t.elements.length,filters:JSON.stringify({accessLevels:t.filters.accessLevels,categories:t.filters.categories,shapeTypes:t.filters.shapeTypes})}),console.log("[DrawingStore][getFilteredElements] Éléments dans le store:",t.elements.map(n=>({id:n.id,type_forme:n.type_forme,data:n.data?JSON.stringify(n.data):null})));const e=t.elements.filter(n=>{var l,c;if(console.log(`[DrawingStore][getFilteredElements] Vérification de l'élément ${n.id} (${n.type_forme})`),!(n.type_forme in t.filters.shapeTypes?t.filters.shapeTypes[n.type_forme]:!0))return console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} filtré par type: ${n.type_forme} (non visible)`),!1;const i=((l=n.data)==null?void 0:l.category)||"default";if(!(i in t.filters.categories?t.filters.categories[i]:!0))return console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} filtré par catégorie: ${i} (non visible)`),!1;const o=((c=n.data)==null?void 0:c.accessLevel)||"visitor";let a=!0;return o==="company"?a=t.filters.accessLevels.company:o==="employee"?a=t.filters.accessLevels.employee:o==="visitor"&&(a=t.filters.accessLevels.visitor),a?(console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} visible: type=${n.type_forme}, catégorie=${i}, accès=${o}`),!0):(console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} filtré par niveau d'accès: ${o} (non visible)`),!1)});return console.log("[DrawingStore][getFilteredElements] Résultat du filtrage:",{total:t.elements.length,filtered:e.length,filteredIds:e.map(n=>n.id)}),e}},actions:{setCurrentPlan(t){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentMapId=t,t===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},this.filters={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,Note:!0}}},clearCurrentPlan(){(this.currentMapId!==null||this.elements.length>0)&&(this.currentMapId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null)},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(t){var e;if(console.log("[DrawingStore] Ajout d'un élément",{element:t,isLeafletLayer:t instanceof es.Layer,hasProperties:!!t.properties,properties:t.properties,type:(e=t.properties)==null?void 0:e.type}),t instanceof es.Layer&&t.properties){const n=n5(t);console.log("[DrawingStore] Élément converti avant ajout",{original:t,converted:n,type:n.type_forme,data:n.data}),this.elements.push(n)}else!t.type_forme&&this.lastUsedType&&(t.type_forme=this.lastUsedType),this.elements.push(t);this.unsavedChanges=!0},updateElement(t){const e=this.elements.findIndex(n=>n.id===t.id);if(e!==-1){const n=this.elements[e].type_forme;this.elements[e]={...t,type_forme:n},this.unsavedChanges=!0}},removeElement(t){const e=this.elements.findIndex(n=>n.id===t);e!==-1&&(this.elements.splice(e,1),this.unsavedChanges=!0)},selectElement(t){this.selectedElement=t},setCurrentTool(t){this.currentTool=t,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(t)&&(this.lastUsedType=t)},setCurrentStyle(t){if(!t||Object.keys(t).length===0){this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2};return}this.currentStyle={...this.currentStyle,...t}},updateFilters(t){if(t.accessLevels&&({...this.filters.accessLevels},this.filters.accessLevels={...this.filters.accessLevels,...t.accessLevels}),t.categories){const e={...this.filters.categories};this.filters.categories={...this.filters.categories,...t.categories};const n=Object.keys(t.categories).filter(r=>e[r]!==this.filters.categories[r]);if(n.length>0){const r=n.filter(i=>e[i]===!1&&this.filters.categories[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("categoriesReactivated",{detail:{categories:r}}))}}if(t.shapeTypes){const e={...this.filters.shapeTypes};this.filters.shapeTypes={...this.filters.shapeTypes,...t.shapeTypes};const n=Object.keys(t.shapeTypes).filter(r=>e[r]!==this.filters.shapeTypes[r]);if(n.length>0){const r=n.filter(i=>e[i]===!1&&this.filters.shapeTypes[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("shapeTypesReactivated",{detail:{shapeTypes:r}}))}}window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:this.filters}}))},async loadPlanElements(t){var e;if(this.currentMapId===t&&this.elements.length>0)return console.log(`[ISSUE01][DrawingStore] Plan ${t} déjà chargé avec ${this.elements.length} éléments, ne pas recharger`),this.elements;this.loading=!0;try{console.log("[ISSUE01][DrawingStore] Début du chargement du plan",{planId:t,currentMapId:this.currentMapId,currentElements:this.elements.length});const r=(await Pn.get(`/plans/${t}/`)).data;return console.log("[ISSUE01][DrawingStore] Données du plan reçues",{formesCount:((e=r.formes)==null?void 0:e.length)||0,preferences:r.preferences}),r.formes&&Array.isArray(r.formes)&&r.formes.forEach((i,s)=>{var o;console.log(`[ISSUE01][DrawingStore] Analyse détaillée forme ${s}:`,{id:i.id,type_forme:i.type_forme,hasData:!!i.data,dataKeys:i.data?Object.keys(i.data):[],name:(o=i.data)==null?void 0:o.name})}),this.elements=r.formes.map(i=>{if(console.log("[ISSUE01][DrawingStore] Traitement de la forme stockée",{id:i.id,type_forme:i.type_forme}),i.type_forme)return console.log("[ISSUE01][DrawingStore] Forme déjà au format élément",{type_forme:i.type_forme,id:i.id}),{id:i.id,type_forme:i.type_forme,data:i.data||{}};try{const s=Lj(i);if(s)return console.log("[ISSUE01][DrawingStore] Forme convertie avec succès",{originalType:i.type_forme,convertedType:s.type,id:i.id}),n5(s)}catch(s){console.error("[ISSUE01][DrawingStore] Erreur lors de la conversion de la forme",{error:s,id:i.id,type:i.type_forme})}return console.warn("[ISSUE01][DrawingStore] Utilisation de la forme sans conversion",{type_forme:i.type_forme,id:i.id}),i}),console.log(`[ISSUE01][DrawingStore] Plan ${t} - Chargé ${this.elements.length} éléments`,{elementsIds:this.elements.map(i=>i.id)}),this.currentMapId=t,this.unsavedChanges=!1,r.preferences&&(console.log("[ISSUE01][DrawingStore] Chargement des préférences",r.preferences),r.preferences.currentTool&&this.setCurrentTool(r.preferences.currentTool),r.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...r.preferences.currentStyle}),r.preferences.lastUsedType&&(this.lastUsedType=r.preferences.lastUsedType)),this.elements}catch(n){throw console.error("[ISSUE01][DrawingStore] Erreur lors du chargement des éléments:",n),this.error="Erreur lors du chargement des éléments du plan",n}finally{this.loading=!1}},async saveToPlan(t,e){var n,r,i,s,o;this.loading=!0;try{const a=t||this.currentMapId;if(console.log("[ISSUE01][DrawingStore][saveToPlan] Début de la sauvegarde",{targetPlanId:a,currentPlanId:this.currentMapId,elementsCount:this.elements.length,elementsIds:this.elements.map(m=>m.id),elementsToDelete:e==null?void 0:e.elementsToDelete}),!a)throw new Error("Aucun plan sélectionné pour la sauvegarde");const l=this.elements.map(m=>({...m,type_forme:m.type_forme||this.lastUsedType}));console.log("[ISSUE01][DrawingStore][saveToPlan] Formes préparées pour sauvegarde:",{formesCount:l.length,formesIds:l.map(m=>m.id)});const c=(e==null?void 0:e.elementsToDelete)||[],d=`/plans/${a}/save_with_elements/`,p=await Pn.post(d,{formes:l,connexions:[],annotations:[],elementsToDelete:c,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}});console.log("[ISSUE01][DrawingStore][saveToPlan] Réponse reçue du serveur:",{formesCount:((n=p.data.formes)==null?void 0:n.length)||0,formesIds:((r=p.data.formes)==null?void 0:r.map(m=>m.id))||[]}),console.log("[ISSUE01][DrawingStore][saveToPlan] Détail de la réponse du serveur:",{requestFormeCount:l.length,responseFormeCount:((i=p.data.formes)==null?void 0:i.length)||0,formesDuplicates:(s=p.data.formes)==null?void 0:s.map(m=>m.id).filter((m,x,E)=>E.indexOf(m)!==x),detailedResponseFormes:(o=p.data.formes)==null?void 0:o.map(m=>({id:m.id,type:m.type_forme,pointCount:m.data&&m.data.points?m.data.points.length:"N/A"})),requestBody:{formesCount:l.length,formesTypes:l.map(m=>m.type_forme),formesIds:l.map(m=>m.id),elementsToDelete:c}});const v=new Set(c);return this.elements=p.data.formes.filter(m=>!v.has(m.id)).map(m=>({...m,type_forme:m.type_forme})),console.log("[ISSUE01][DrawingStore][saveToPlan] Éléments après filtrage:",{totalElements:this.elements.length,elementsIds:this.elements.map(m=>m.id),elementsToDelete:c}),this.unsavedChanges=!1,p.data}catch(a){throw console.error("[ISSUE01][DrawingStore][saveToPlan] ERREUR:",a),console.error("[ISSUE01][DrawingStore][saveToPlan] Stack trace:",a instanceof Error?a.stack:"No stack trace"),this.error="Erreur lors de la sauvegarde du plan",a}finally{this.loading=!1}}}}),vE=Ap("mapFilters",{state:()=>({filters:[],loading:!1,error:null}),getters:{getFilterById:t=>e=>t.filters.find(n=>n.id===e),getFiltersByCategory:t=>e=>t.filters.filter(n=>n.category===e),getUniqueCategories:t=>{const e=new Set;return t.filters.forEach(n=>e.add(n.category)),Array.from(e)}},actions:{async initializeStore(){await this.fetchFilters()},async fetchFilters(){const t=Zl();this.loading=!0,this.error=null;try{const e=await h0.getFilters();return this.filters=e.data,this.filters}catch(e){throw this.error="Erreur lors du chargement des filtres",t.error("Impossible de charger les filtres de carte"),console.error("[MapFilterStore] Erreur lors du chargement des filtres:",e),e}finally{this.loading=!1}},async createFilter(t){this.loading=!0,this.error=null;try{const e=await h0.createFilter(t);return this.filters.push(e.data),console.log("[MapFilterStore] Filtre créé avec succès:",e.data),e.data}catch(e){throw this.error="Erreur lors de la création du filtre",console.error("[MapFilterStore] Erreur lors de la création du filtre:",e),e}finally{this.loading=!1}},async updateFilter(t,e){this.loading=!0,this.error=null;try{const n=await h0.updateFilter(t,e),r=this.filters.findIndex(i=>i.id===t);return r!==-1&&(this.filters[r]=n.data),console.log("[MapFilterStore] Filtre mis à jour avec succès:",n.data),n.data}catch(n){throw this.error="Erreur lors de la mise à jour du filtre",console.error("[MapFilterStore] Erreur lors de la mise à jour du filtre:",n),n}finally{this.loading=!1}},async deleteFilter(t){this.loading=!0,this.error=null;try{return await h0.deleteFilter(t),this.filters=this.filters.filter(e=>e.id!==t),console.log("[MapFilterStore] Filtre supprimé avec succès:",t),!0}catch(e){throw this.error="Erreur lors de la suppression du filtre",console.error("[MapFilterStore] Erreur lors de la suppression du filtre:",e),e}finally{this.loading=!1}}}}),Ay=Ap("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[]}),getters:{getPlanById:t=>e=>t.plans.find(n=>n.id===e),hasUnsavedChanges:t=>t.unsavedChanges,getCurrentPlanHistory:t=>t.planHistory},actions:{async fetchPlans(){var e,n;const t=co();this.loading=!0;try{let r="/plans/";const i={};t.isSalarie?i.salarie=(e=t.user)==null?void 0:e.id:t.isVisiteur&&(i.visiteur=(n=t.user)==null?void 0:n.id);const s=await Pn.get(r,{params:i});this.plans=s.data}catch(r){throw this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async fetchPlansWithDetails(){var e,n;const t=co();this.loading=!0;try{let r="/plans/";const i={include_details:!0};t.isSalarie?i.salarie=(e=t.user)==null?void 0:e.id:t.isVisiteur&&(i.visiteur=(n=t.user)==null?void 0:n.id);const o=(await Pn.get(r,{params:i})).data.map(a=>({...a,entreprise:typeof a.entreprise=="object"?a.entreprise:null,salarie:typeof a.salarie=="object"?a.salarie:null,visiteur:typeof a.visiteur=="object"?a.visiteur:null}));return this.plans=o,{data:o}}catch(r){throw console.error("[IrrigationStore] Error fetching plans:",r),this.error="Erreur lors du chargement des plans",r}finally{this.loading=!1}},async fetchClientPlans(t){this.loading=!0;try{return(await c0.getVisiteurPlans(t)).data}catch(e){throw this.error="Erreur lors du chargement des plans du client",e}finally{this.loading=!1}},async createPlan(t){var n;this.clearCurrentPlan(),this.loading=!0;const e=Zl();try{const r=co();((n=r.user)==null?void 0:n.user_type)==="visiteur"&&(t={...t,visiteur:r.user.id,salarie_id:r.user.enterprise_id,entreprise_id:r.user.enterprise_id});const i={...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&t.entreprise&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&t.salarie&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&t.visiteur&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null},s=await c0.createPlan(i);return this.plans.push(s.data),e.success(`Le plan "${s.data.nom}" a été créé avec succès`),s.data}catch(r){const i=r instanceof Error?r.message:String(r);throw console.error("Error creating plan:",i),this.error=i,e.error(`Erreur lors de la création du plan : ${i}`),r}finally{this.loading=!1}},async createPlanForClient(t,e){this.clearCurrentPlan(),this.loading=!0;try{const n={...t,visiteur:e},r=await c0.createPlanForVisiteur(n);return this.plans.push(r.data),r.data}catch(n){const r=n instanceof Error?n.message:String(n);throw console.error("Error creating plan for client:",r),this.error="Erreur lors de la création du plan pour le client",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(t){var e,n;if(!this.unsavedChanges){console.log("[IrrigationStore][savePlan] Aucun changement à sauvegarder");return}this.loading=!0;try{const r=await Pn.patch(`/plans/${t}/`,{...this.currentPlan,version:((e=this.currentPlan)==null?void 0:e.version)||1}),i=this.plans.findIndex(s=>s.id===t);return i!==-1&&(this.plans[i]=r.data),((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=r.data),this.unsavedChanges=!1,r.data}catch(r){throw console.error("[IrrigationStore][savePlan] ERREUR:",r),this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1}},async updatePlanDetails(t,e){const n=Zl();try{const{visiteur_id:r,salarie_id:i,entreprise_id:s,...o}=e,a={...o};r!==void 0&&(a.visiteur_id=r),i!==void 0&&(a.salarie_id=i),s!==void 0&&(a.entreprise_id=s);const l=await Pn.patch(`/plans/${t}/`,a);this.currentPlan&&this.currentPlan.id===t&&(this.currentPlan={...this.currentPlan,...l.data});const c=this.plans.findIndex(d=>d.id===t);return c!==-1&&(this.plans[c]={...this.plans[c],...l.data}),l.data}catch(r){throw console.error("Erreur lors de la mise à jour du plan:",r),n.error(`Erreur lors de la mise à jour du plan : ${r instanceof Error?r.message:String(r)}`),r}},async fetchPlanHistory(t){this.loading=!0;try{const e=await Pn.get(`/plans/${t}/historique/`);return this.planHistory=e.data,e.data}catch(e){throw this.error="Erreur lors de la récupération de l'historique",e}finally{this.loading=!1}},async restorePlanVersion(t,e){var n;this.loading=!0;try{const r=await Pn.post(`/plans/${t}/restaurer/`,{version_id:e});((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=r.data);const i=this.plans.findIndex(s=>s.id===t);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(t){this.currentPlan=t,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(t){var n;this.loading=!0;const e=Zl();try{const r=this.plans.find(i=>i.id===t);await c0.deletePlan(t),this.plans=this.plans.filter(i=>i.id!==t),((n=this.currentPlan)==null?void 0:n.id)===t&&this.clearCurrentPlan(),e.success(`Le plan "${(r==null?void 0:r.nom)||""}" a été supprimé avec succès`)}catch(r){throw this.error="Erreur lors de la suppression du plan",e.error(`Erreur lors de la suppression du plan : ${r instanceof Error?r.message:String(r)}`),r}finally{this.loading=!1}}}}),Sj={class:"hidden md:hidden flex-mobile items-center justify-between p-4 border-b border-gray-200"},Cj={class:"flex-1 flex flex-col overflow-hidden"},Ej={class:"border-b border-gray-200"},Mj={class:"flex -mb-px"},Pj={class:"flex-1 overflow-hidden flex flex-col"},kj={key:0,class:"tab-content"},Aj={class:"grid grid-cols-3 gap-1.5 mb-4"},Tj=["onClick","title"],Dj=["innerHTML"],Ij={key:0,class:"grid grid-cols-2 gap-2 mt-2 mb-2"},Oj={key:2,class:"my-4 border-t border-gray-200"},Nj={key:3,class:"mt-4"},Bj={key:0,class:"mb-4"},Rj={class:"mb-4"},Fj=["value"],jj={class:"mb-4"},zj={class:"grid grid-cols-1 gap-4"},$j={key:0,class:"space-y-1"},Uj={class:"flex justify-between items-center"},Vj={class:"text-sm font-medium text-gray-500"},Hj={class:"flex justify-between items-center"},Gj={class:"text-sm font-medium text-gray-500"},Wj={class:"text-sm font-medium text-gray-500"},qj={key:1,class:"tab-content"},Yj={class:"grid grid-cols-6 gap-2 mb-4"},Kj=["onClick","title"],Zj={class:"space-y-4"},Xj={class:"flex items-center gap-4"},Jj={class:"flex items-center gap-2"},Qj={class:"flex items-center gap-4"},ez=["value"],tz={key:0,class:"flex items-center gap-4"},nz={class:"flex items-center gap-2"},rz={key:2,class:"tab-content filters-tab"},iz={class:"filters-content"},sz={class:"space-y-2"},oz={class:"space-y-2 mt-4"},az={class:"space-y-1"},lz={class:"flex items-center"},uz={class:"flex items-center"},cz={class:"flex items-center"},hz={class:"flex items-center"},dz={class:"flex items-center"},fz={class:"flex items-center"},pz={key:0,class:"flex items-center"},gz=["onUpdate:modelValue"],mz={class:"ml-2 text-sm text-gray-700"},vz={key:0,class:"mt-2 pt-2 border-t border-gray-200"},yz={class:"flex space-x-2"},bz=["disabled"],_z={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},wz={key:1,class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},xz={class:"space-y-2 mt-4"},Lz={class:"space-y-1"},Sz={class:"flex items-center"},Cz={class:"flex items-center"},Ez={class:"flex items-center"},Mz=_s({__name:"DrawingTools",props:{show:{type:Boolean,default:!1},selectedTool:{type:String,default:""},selectedShape:{type:Object,default:null},allLayers:{type:Array,default:()=>[]},isDrawing:{type:Boolean,default:!1}},emits:["update:show","tool-selected","style-update","properties-update","delete-shape","filter-change","close-drawer"],setup(t,{emit:e}){const n=t,r=xp(),i=co(),s=qn(()=>i.isAdmin),o=qn(()=>i.isEntreprise),a=vE(),l=Ay(),c=wu({name:""}),d=_t(!1),p=_t(["forages","clients","entrepots","livraisons","cultures","parcelles"]),v=[{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"Note",label:"Note géolocalisée"}],m=se=>{switch(se){case"Polygon":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5l16 0l0 14l-16 0l0 -14z"/></svg>';case"Line":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20l16 -16"/></svg>';case"Note":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11c1.38 0 2.5-1.12 2.5-2.5S13.38 6 12 6s-2.5 1.12-2.5 2.5S10.62 11 12 11z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/><ellipse cx="12" cy="22" rx="4" ry="1.5" stroke-width="2.5" fill="currentColor" fill-opacity="0.2"/></svg>';default:return""}},x=_t("tools");ni(()=>n.selectedTool,(se,le)=>{console.log("[DrawingTools][watch selectedTool] Changement d'outil:",{newTool:se,oldTool:le})}),ni(x,(se,le)=>{console.log("[DrawingTools][watch activeTab] Changement d'onglet:",{newTab:se,oldTab:le}),se==="filters"&&le!=="filters"&&(console.log("[DrawingTools][watch activeTab] Passage à l'onglet filtres"),console.log("[DrawingTools][watch activeTab] État actuel des filtres dans le store:",JSON.stringify({accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}},null,2)),console.log("[DrawingTools][watch activeTab] État actuel des filtres locaux:",JSON.stringify({accessLevels:{...R.accessLevels},categories:{...R.categories},shapeTypes:{...R.shapeTypes}},null,2)),n.selectedShape&&(console.log("[DrawingTools][watch activeTab] Désélection de la forme actuelle lors du passage à l'onglet filtres"),re("tool-selected","")),setTimeout(()=>{j()},0)),le==="filters"&&se!=="filters"&&(console.log("[DrawingTools][watch activeTab] Sortie de l'onglet filtres, application des changements"),console.log("[DrawingTools][watch activeTab] État des filtres locaux avant application:",JSON.stringify({accessLevels:{...R.accessLevels},categories:{...R.categories},shapeTypes:{...R.shapeTypes}},null,2)),j())}),_t({samplePoints:!0,circleSections:!0});const E=_t("#2b6451"),T=_t(2),D=_t("solid"),k=_t("#2b6451"),B=_t(.2),W=_t(!0),Q=_t(""),pe=_t("default"),fe=_t("visitor"),O=["#2b6451","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],U=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillés"}],q=_t("company"),R=wu({accessLevels:{company:!0,employee:!1,visitor:!1},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,Note:!0}}),$=se=>{console.log(`[DrawingTools][updateAccessLevelFilter] Changement du niveau d'accès: ${se}`),q.value=se,se==="company"?(R.accessLevels.company=!0,R.accessLevels.employee=!1,R.accessLevels.visitor=!1):se==="employee"?(R.accessLevels.company=!1,R.accessLevels.employee=!0,R.accessLevels.visitor=!1):se==="visitor"&&(R.accessLevels.company=!1,R.accessLevels.employee=!1,R.accessLevels.visitor=!0),j()},X=se=>{console.log(`[DrawingTools][updateAccessLevelFilterAndDeselect] Changement du niveau d'accès: ${se}`),n.selectedShape&&(console.log("[DrawingTools][updateAccessLevelFilterAndDeselect] Désélection de la forme actuelle"),re("tool-selected","")),$(se)};console.log("[DrawingTools] Initialisation des filtres:",JSON.stringify({local:{accessLevels:{...R.accessLevels},categories:{...R.categories},shapeTypes:{...R.shapeTypes}},store:{accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}}},null,2));const K=qn(()=>n.selectedShape&&n.selectedShape.properties||null),F=se=>{E.value=se,k.value=se,N({strokeColor:se,fillColor:se})},N=se=>{n.selectedShape&&re("style-update",se)},J=()=>{n.selectedShape&&re("properties-update",{name:Q.value})},Y=()=>{n.selectedShape&&re("properties-update",{category:pe.value})},ye=()=>{n.selectedShape&&re("properties-update",{accessLevel:fe.value})},Ce=()=>{console.log("[DrawingTools][resetFilters] Début de la réinitialisation des filtres"),console.log("[DrawingTools][resetFilters] État actuel des filtres:",JSON.stringify({accessLevels:{...R.accessLevels},categories:{...R.categories},shapeTypes:{...R.shapeTypes}},null,2));const se={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,Note:!0}};console.log("[DrawingTools][resetFilters] Nouveaux filtres à appliquer:",JSON.stringify(se,null,2)),console.log("[DrawingTools][resetFilters] Mise à jour des filtres locaux"),R.accessLevels.company=!0,R.accessLevels.employee=!0,R.accessLevels.visitor=!0,R.categories.forages=!0,R.categories.clients=!0,R.categories.entrepots=!0,R.categories.livraisons=!0,R.categories.cultures=!0,R.categories.parcelles=!0,R.shapeTypes.Polygon=!0,R.shapeTypes.Line=!0,R.shapeTypes.Note=!0,console.log("[DrawingTools][resetFilters] Filtres locaux après mise à jour:",JSON.stringify({accessLevels:{...R.accessLevels},categories:{...R.categories},shapeTypes:{...R.shapeTypes}},null,2)),console.log("[DrawingTools][resetFilters] Mise à jour des filtres dans le store"),r.updateFilters(se),console.log("[DrawingTools][resetFilters] Émission de l'event filter-change"),re("filter-change",se),console.log("[DrawingTools][resetFilters] Mise à jour forcée de l'affichage"),console.log("[DrawingTools][resetFilters] Filtres réinitialisés avec succès")},He=()=>{console.log("[DrawingTools][resetFiltersAndDeselect] Début de la réinitialisation des filtres avec désélection"),ge(),Ce(),console.log("[DrawingTools][resetFiltersAndDeselect] Filtres réinitialisés et forme désélectionnée avec succès")},j=()=>{const se={...R.accessLevels},le={...R.categories},he={...R.shapeTypes};console.log("[DrawingTools][applyFilters] Application des filtres:",JSON.stringify({accessLevels:se,categories:le,shapeTypes:he},null,2));const ee={accessLevels:se,categories:le,shapeTypes:he};console.log("[DrawingTools][applyFilters] Envoi des filtres au store:",JSON.stringify(ee,null,2)),r.updateFilters(ee),console.log("[DrawingTools][applyFilters] Émission de l'event filter-change"),re("filter-change",ee),setTimeout(()=>{console.log("[DrawingTools][applyFilters] Mise à jour forcée de l'affichage"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:ee}}))},0),console.log("[DrawingTools][applyFilters] Filtres appliqués avec succès")},Z=se=>`${Math.round(se)} m`,ae=se=>se>=1e4?`${(se/1e4).toFixed(2)} ha`:`${Math.round(se)} m²`,de=se=>p.value.includes(se)?se:se.split("_").map(le=>le.charAt(0).toUpperCase()+le.slice(1)).join(" "),ge=()=>{n.selectedShape&&(console.log("[DrawingTools][deselectCurrentShape] Désélection de la forme actuelle"),re("tool-selected",""))};async function me(){var se,le;if(!(!c.name||d.value)){d.value=!0;try{const he=c.name.toLowerCase().replace(/\s+/g,"_"),ee=l.currentPlan;let be=null;if(ee!=null&&ee.entreprise_id?be=ee.entreprise_id:ee!=null&&ee.entreprise&&typeof ee.entreprise=="object"&&"id"in ee.entreprise?be=ee.entreprise.id:(se=i.user)!=null&&se.enterprise_id?be=i.user.enterprise_id:i.isEntreprise&&((le=i.user)!=null&&le.id)&&(be=i.user.id),!be){console.error("[DrawingTools] Impossible de créer un filtre: ID d'entreprise non disponible");return}console.log("[DrawingTools] Création d'un filtre pour l'entreprise:",be);const je=await a.createFilter({name:c.name,category:he,entreprise:be});console.log("[DrawingTools] Filtre créé avec succès:",je),R.categories[he]||(console.log(`[DrawingTools] Ajout de la catégorie ${he} aux filtres locaux`),R.categories[he]=!0),console.log(`[DrawingTools] Mise à jour du DrawingStore avec la catégorie ${he}`);const We={...r.filters.categories};We[he]=!0,r.updateFilters({categories:We}),console.log("[DrawingTools] Émission de l'événement filter-change"),re("filter-change",R),c.name=""}catch(he){console.error("[DrawingTools] Erreur lors de la création du filtre:",he)}finally{d.value=!1}}}const oe=()=>{ge(),x.value="filters"},re=e;nm(()=>{var se,le,he,ee,be;if(n.selectedShape){console.log("[DrawingTools][watchEffect] Mise à jour des propriétés pour la forme sélectionnée:",{type:n.selectedShape.type,properties:n.selectedShape.properties,options:n.selectedShape.options,layer:(se=n.selectedShape.layer)==null?void 0:se._leaflet_id});const je=n.selectedShape.options||{};E.value=je.color||"#2b6451",T.value=je.weight||3,D.value=je.dashArray?"dashed":"solid",k.value=je.fillColor||"#2b6451",B.value=je.fillOpacity||.2;const We=n.selectedShape.type||((le=n.selectedShape.properties)==null?void 0:le.type)||"";W.value=We!=="Line",console.log("[DrawingTools][watchEffect] Type de forme détecté:",We),Q.value=((he=n.selectedShape.properties)==null?void 0:he.name)||"",pe.value=((ee=n.selectedShape.properties)==null?void 0:ee.category)||"forages",fe.value=((be=n.selectedShape.properties)==null?void 0:be.accessLevel)||"visitor",console.log("[DrawingTools][watchEffect] Propriétés mises à jour avec succès")}}),Ds(async()=>{console.log("[DrawingTools][onMounted] Initialisation des filtres depuis le store");const se=r.filters;console.log("[DrawingTools][onMounted] Filtres du store:",JSON.stringify({accessLevels:{...se.accessLevels},categories:{...se.categories},shapeTypes:{...se.shapeTypes}},null,2)),R.accessLevels.company=se.accessLevels.company,R.accessLevels.employee=se.accessLevels.employee,R.accessLevels.visitor=se.accessLevels.visitor,R.categories.forages=se.categories.forages,R.categories.clients=se.categories.clients,R.categories.entrepots=se.categories.entrepots,R.categories.livraisons=se.categories.livraisons,R.categories.cultures=se.categories.cultures,R.categories.parcelles=se.categories.parcelles,R.shapeTypes.Polygon=se.shapeTypes.Polygon,R.shapeTypes.Line=se.shapeTypes.Line,R.shapeTypes.Note=se.shapeTypes.Note;try{console.log("[DrawingTools][onMounted] Chargement des filtres personnalisés"),await a.fetchFilters();const le=a.getUniqueCategories;console.log("[DrawingTools][onMounted] Catégories personnalisées trouvées:",le);const he=[];le.forEach(ee=>{!p.value.includes(ee)&&!R.categories[ee]&&(console.log(`[DrawingTools][onMounted] Ajout de la catégorie personnalisée: ${ee}`),R.categories[ee]=!0,he.push(ee))}),he.length>0&&(console.log("[DrawingTools][onMounted] Mise à jour du store avec les catégories personnalisées:",he),r.updateFilters({categories:R.categories}),re("filter-change",R))}catch(le){console.error("[DrawingTools][onMounted] Erreur lors du chargement des filtres personnalisés:",le)}console.log("[DrawingTools][onMounted] Filtres locaux après initialisation:",JSON.stringify({accessLevels:{...R.accessLevels},categories:{...R.categories},shapeTypes:{...R.shapeTypes}},null,2))}),ni(R,(se,le)=>{console.log("[DrawingTools][watch filters] Changement détecté:",{activeTab:x.value,newFilters:JSON.stringify({accessLevels:se.accessLevels,categories:se.categories,shapeTypes:se.shapeTypes}),oldFilters:JSON.stringify({accessLevels:le.accessLevels,categories:le.categories,shapeTypes:le.shapeTypes})});const he=Object.keys(se.accessLevels).filter(We=>le.accessLevels[We]!==se.accessLevels[We]),ee=Object.keys(se.categories).filter(We=>le.categories[We]!==se.categories[We]),be=Object.keys(se.shapeTypes).filter(We=>le.shapeTypes[We]!==se.shapeTypes[We]),je=he.length>0||ee.length>0||be.length>0;console.log("[DrawingTools][watch filters] Différences détectées:",{accessLevelsDiff:he,categoriesDiff:ee,shapeTypesDiff:be,hasChanges:je}),x.value==="filters"?(console.log("[DrawingTools][watch filters] Onglet filtres actif, application des filtres"),j()):console.log("[DrawingTools][watch filters] Onglet filtres non actif, pas d'application automatique")},{deep:!0});const Te=se=>{console.log("[DrawingTools][handleToolClick] Outil cliqué:",se,"Outil actuel:",n.selectedTool),re("tool-selected",n.selectedTool===se?"":se),window.innerWidth<768&&re("update:show",!1)},Le=()=>{var se;if(console.log("[DrawingTools][editGeoNote] Édition de la GeoNote"),re("update:show",!1),n.selectedShape&&((se=n.selectedShape.properties)==null?void 0:se.type)==="Note"){const le=n.selectedShape.layer;le&&typeof le.editNote=="function"?(le.editNote(),console.log("[DrawingTools][editGeoNote] Méthode editNote appelée avec succès")):console.error("[DrawingTools][editGeoNote] La méthode editNote n'est pas disponible sur la couche")}},qe=()=>{var se;if(console.log("[DrawingTools][openGeoNoteRoute] Ouverture de l'itinéraire pour la GeoNote"),re("update:show",!1),n.selectedShape&&((se=n.selectedShape.properties)==null?void 0:se.type)==="Note"){const le=n.selectedShape.layer;le&&typeof le.openInGoogleMaps=="function"?(le.openInGoogleMaps(),console.log("[DrawingTools][openGeoNoteRoute] Méthode openInGoogleMaps appelée avec succès")):console.error("[DrawingTools][openGeoNoteRoute] La méthode openInGoogleMaps n'est pas disponible sur la couche")}};return(se,le)=>{var he,ee;return De(),Ne("div",{class:xi(["drawing-tools-panel",{open:t.show}])},[C("div",Sj,[le[30]||(le[30]=C("div",{class:"flex items-center"},[C("div",{class:"w-10 h-1.5 bg-gray-300 rounded-full mr-3"}),C("h3",{class:"text-sm font-semibold text-gray-700"},"Outils")],-1)),C("button",{onClick:le[0]||(le[0]=be=>se.$emit("update:show",!1)),class:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},le[29]||(le[29]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",Cj,[C("div",Ej,[C("nav",Mj,[C("button",{onClick:le[1]||(le[1]=be=>x.value="tools"),class:xi([x.value==="tools"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},le[31]||(le[31]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),C("span",null,"Outils",-1)]),2),t.selectedShape&&((he=t.selectedShape.properties)==null?void 0:he.type)!=="Note"?(De(),Ne("button",{key:0,onClick:le[2]||(le[2]=be=>x.value="style"),class:xi([x.value==="style"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},le[32]||(le[32]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1),C("span",null,"Style",-1)]),2)):Wt("",!0),C("button",{onClick:oe,class:xi([x.value==="filters"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},le[33]||(le[33]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),C("span",null,"Filtres",-1)]),2)])]),C("div",Pj,[x.value==="tools"?(De(),Ne("div",kj,[C("div",Aj,[(De(!0),Ne(_n,null,Wn(v.filter(be=>be.type!=="delete"),be=>(De(),Ne("button",{key:be.type,class:xi(["flex items-center justify-center p-2 rounded-md border transition-all duration-200",{"bg-primary-50 border-primary-500 text-primary-600":n.selectedTool===be.type,"hover:bg-gray-50 border-gray-300 text-gray-700":n.selectedTool!==be.type}]),onClick:je=>Te(be.type),title:be.label},[C("span",{class:"icon",innerHTML:m(be.type)},null,8,Dj)],10,Tj))),128))]),t.selectedShape&&K.value&&K.value.type==="Note"?(De(),Ne("div",Ij,[C("button",{class:"p-2 rounded-md border border-primary-200 bg-primary-50 text-primary-600 hover:bg-primary-100 flex items-center justify-center",onClick:Le,title:"Éditer la note"},le[34]||(le[34]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),C("span",{class:"text-sm"},"Éditer",-1)])),C("button",{class:"p-2 rounded-md border border-blue-200 bg-blue-50 text-blue-600 hover:bg-blue-100 flex items-center justify-center",onClick:qe,title:"Obtenir l'itinéraire"},le[35]||(le[35]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1),C("span",{class:"text-sm"},"Itinéraire",-1)]))])):Wt("",!0),t.selectedShape?(De(),Ne("button",{key:1,class:xi(["w-full mt-2 p-2 rounded-md border border-red-200 bg-red-50 text-red-600 hover:bg-red-100 flex items-center justify-center",{"bg-red-100":n.selectedTool==="delete"}]),onClick:le[3]||(le[3]=be=>se.$emit("delete-shape")),title:"Supprimer la forme"},le[36]||(le[36]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),C("span",{class:"text-sm"},"Supprimer",-1)]),2)):Wt("",!0),t.selectedShape&&K.value?(De(),Ne("div",Oj)):Wt("",!0),t.selectedShape&&K.value?(De(),Ne("div",Nj,[K.value.type!=="Note"?(De(),Ne("div",Bj,[le[37]||(le[37]=C("label",{for:"shapeName",class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de la forme",-1)),On(C("input",{type:"text",id:"shapeName","onUpdate:modelValue":le[4]||(le[4]=be=>Q.value=be),onChange:J,placeholder:"Donnez un nom à cette forme",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,544),[[ui,Q.value]])])):Wt("",!0),C("div",Rj,[le[40]||(le[40]=C("label",{for:"shapeCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Catégorie",-1)),On(C("select",{id:"shapeCategory","onUpdate:modelValue":le[5]||(le[5]=be=>pe.value=be),onChange:Y,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},[le[38]||(le[38]=wl('<option value="forages" data-v-f9e746a1>Forages</option><option value="clients" data-v-f9e746a1>Clients</option><option value="entrepots" data-v-f9e746a1>Entrepôts</option><option value="livraisons" data-v-f9e746a1>Lieux de livraison</option><option value="cultures" data-v-f9e746a1>Cultures</option><option value="parcelles" data-v-f9e746a1>Noms des parcelles</option>',6)),(De(!0),Ne(_n,null,Wn(R.categories,(be,je)=>(De(),Ne(_n,{key:je},[p.value.includes(String(je))?Wt("",!0):(De(),Ne("option",{key:0,value:String(je)},Tt(de(String(je))),9,Fj))],64))),128)),le[39]||(le[39]=C("option",{value:"default"},"Autre",-1))],544),[[Mi,pe.value]])]),C("div",jj,[le[42]||(le[42]=C("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700 mb-1"},"Niveau d'accès",-1)),le[43]||(le[43]=C("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Définit qui peut voir cet élément sur la carte. ",-1)),On(C("select",{id:"accessLevel","onUpdate:modelValue":le[6]||(le[6]=be=>fe.value=be),onChange:ye,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},le[41]||(le[41]=[C("option",{value:"company"},"Entreprise uniquement",-1),C("option",{value:"employee"},"Entreprise et salariés",-1),C("option",{value:"visitor"},"Tous (visiteurs inclus)",-1)]),544),[[Mi,fe.value]])]),C("div",zj,[K.value.type==="Polygon"?(De(),Ne("div",$j,[C("div",Uj,[le[44]||(le[44]=C("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),C("span",Vj,Tt(ae(K.value.surface||0)),1)]),C("div",Hj,[le[45]||(le[45]=C("span",{class:"text-sm font-semibold text-gray-700"},"Périmètre :",-1)),C("span",Gj,Tt(Z(K.value.perimeter||0)),1)])])):K.value.type==="Line"?(De(),Ne(_n,{key:1},[le[46]||(le[46]=C("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),C("span",Wj,Tt(Z(K.value.length||0)),1)],64)):Wt("",!0)])])):Wt("",!0)])):Wt("",!0),x.value==="style"&&t.selectedShape&&((ee=t.selectedShape.properties)==null?void 0:ee.type)!=="Note"?(De(),Ne("div",qj,[C("div",Yj,[(De(),Ne(_n,null,Wn(O,be=>C("button",{key:be,class:"w-8 h-8 rounded-full",style:Yl({backgroundColor:be}),onClick:je=>F(be),title:be},null,12,Kj)),64))]),C("div",Zj,[C("div",Xj,[le[47]||(le[47]=C("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),C("div",Jj,[On(C("input",{type:"color","onUpdate:modelValue":le[7]||(le[7]=be=>E.value=be),class:"w-16 h-8 rounded border",onChange:le[8]||(le[8]=be=>N({strokeColor:E.value})),title:"Couleur du contour"},null,544),[[ui,E.value]]),On(C("input",{type:"range","onUpdate:modelValue":le[9]||(le[9]=be=>T.value=be),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:le[10]||(le[10]=be=>N({strokeWidth:T.value})),title:"Épaisseur du contour"},null,544),[[ui,T.value]])])]),C("div",Qj,[le[48]||(le[48]=C("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),On(C("select",{"onUpdate:modelValue":le[11]||(le[11]=be=>D.value=be),class:"w-full rounded border",onChange:le[12]||(le[12]=be=>N({strokeStyle:D.value}))},[(De(),Ne(_n,null,Wn(U,be=>C("option",{key:be.value,value:be.value},Tt(be.label),9,ez)),64))],544),[[Mi,D.value]])]),W.value?(De(),Ne("div",tz,[le[49]||(le[49]=C("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),C("div",nz,[On(C("input",{type:"color","onUpdate:modelValue":le[13]||(le[13]=be=>k.value=be),class:"w-16 h-8 rounded border",onChange:le[14]||(le[14]=be=>N({fillColor:k.value})),title:"Couleur de remplissage"},null,544),[[ui,k.value]]),On(C("input",{type:"range","onUpdate:modelValue":le[15]||(le[15]=be=>B.value=be),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:le[16]||(le[16]=be=>N({fillOpacity:B.value})),title:"Opacité du remplissage"},null,544),[[ui,B.value]])])])):Wt("",!0)])])):Wt("",!0),x.value==="filters"?(De(),Ne("div",rz,[C("div",iz,[C("div",sz,[le[52]||(le[52]=C("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Niveau d'accès",-1)),le[53]||(le[53]=C("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Sélectionnez votre niveau d'accès pour filtrer les éléments visibles sur la carte. ",-1)),C("div",null,[On(C("select",{"onUpdate:modelValue":le[17]||(le[17]=be=>q.value=be),onChange:le[18]||(le[18]=be=>X(q.value)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm"},le[50]||(le[50]=[C("option",{value:"company"},"Entreprise (accès à tout)",-1),C("option",{value:"employee"},"Salariés (accès niveau salariés et visiteurs)",-1),C("option",{value:"visitor"},"Visiteurs (accès niveau visiteurs uniquement)",-1)]),544),[[Mi,q.value]]),le[51]||(le[51]=C("div",{class:"mt-2 text-xs text-gray-500"},[C("p",null,[C("strong",null,"Entreprise"),Ir(" : Vous verrez tous les éléments (entreprise, salariés, visiteurs)")]),C("p",null,[C("strong",null,"Salariés"),Ir(" : Vous verrez les éléments pour salariés et visiteurs")]),C("p",null,[C("strong",null,"Visiteurs"),Ir(" : Vous ne verrez que les éléments pour visiteurs")])],-1))])]),C("div",oz,[le[62]||(le[62]=C("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Catégories",-1)),C("div",az,[C("label",lz,[On(C("input",{type:"checkbox","onUpdate:modelValue":le[19]||(le[19]=be=>R.categories.forages=be),onChange:ge,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ul,R.categories.forages]]),le[54]||(le[54]=C("span",{class:"ml-2 text-sm text-gray-700"},"Forages",-1))]),C("label",uz,[On(C("input",{type:"checkbox","onUpdate:modelValue":le[20]||(le[20]=be=>R.categories.clients=be),onChange:ge,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ul,R.categories.clients]]),le[55]||(le[55]=C("span",{class:"ml-2 text-sm text-gray-700"},"Clients",-1))]),C("label",cz,[On(C("input",{type:"checkbox","onUpdate:modelValue":le[21]||(le[21]=be=>R.categories.entrepots=be),onChange:ge,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ul,R.categories.entrepots]]),le[56]||(le[56]=C("span",{class:"ml-2 text-sm text-gray-700"},"Entrepôts",-1))]),C("label",hz,[On(C("input",{type:"checkbox","onUpdate:modelValue":le[22]||(le[22]=be=>R.categories.livraisons=be),onChange:ge,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ul,R.categories.livraisons]]),le[57]||(le[57]=C("span",{class:"ml-2 text-sm text-gray-700"},"Lieux de livraison",-1))]),C("label",dz,[On(C("input",{type:"checkbox","onUpdate:modelValue":le[23]||(le[23]=be=>R.categories.cultures=be),onChange:ge,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ul,R.categories.cultures]]),le[58]||(le[58]=C("span",{class:"ml-2 text-sm text-gray-700"},"Cultures",-1))]),C("label",fz,[On(C("input",{type:"checkbox","onUpdate:modelValue":le[24]||(le[24]=be=>R.categories.parcelles=be),onChange:ge,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ul,R.categories.parcelles]]),le[59]||(le[59]=C("span",{class:"ml-2 text-sm text-gray-700"},"Noms des parcelles",-1))]),(De(!0),Ne(_n,null,Wn(R.categories,(be,je)=>(De(),Ne(_n,{key:je},[p.value.includes(String(je))?Wt("",!0):(De(),Ne("label",pz,[On(C("input",{type:"checkbox","onUpdate:modelValue":We=>R.categories[je]=We,onChange:ge,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,40,gz),[[Ul,R.categories[je]]]),C("span",mz,Tt(je),1)]))],64))),128)),s.value||o.value?(De(),Ne("div",vz,[C("div",yz,[On(C("input",{type:"text","onUpdate:modelValue":le[25]||(le[25]=be=>c.name=be),placeholder:"Nouveau filtre...",class:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-primary-500 focus:border-primary-500"},null,512),[[ui,c.name]]),C("button",{onClick:me,disabled:!c.name||d.value,class:"px-2 py-1 bg-primary-600 text-white text-sm rounded hover:bg-primary-700 transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"},[d.value?(De(),Ne("svg",wz,le[61]||(le[61]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(De(),Ne("svg",_z,le[60]||(le[60]=[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1)])))],8,bz)])])):Wt("",!0)])]),C("div",xz,[le[66]||(le[66]=C("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Types de formes",-1)),C("div",Lz,[C("label",Sz,[On(C("input",{type:"checkbox","onUpdate:modelValue":le[26]||(le[26]=be=>R.shapeTypes.Polygon=be),onChange:ge,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ul,R.shapeTypes.Polygon]]),le[63]||(le[63]=C("span",{class:"ml-2 text-sm text-gray-700"},"Polygones",-1))]),C("label",Cz,[On(C("input",{type:"checkbox","onUpdate:modelValue":le[27]||(le[27]=be=>R.shapeTypes.Line=be),onChange:ge,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ul,R.shapeTypes.Line]]),le[64]||(le[64]=C("span",{class:"ml-2 text-sm text-gray-700"},"Lignes",-1))]),C("label",Ez,[On(C("input",{type:"checkbox","onUpdate:modelValue":le[28]||(le[28]=be=>R.shapeTypes.Note=be),onChange:ge,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Ul,R.shapeTypes.Note]]),le[65]||(le[65]=C("span",{class:"ml-2 text-sm text-gray-700"},"Notes",-1))])])]),C("div",{class:"pt-4 mb-4"},[C("button",{onClick:He,class:"w-full px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200 transition-colors"}," Réinitialiser ")])])])):Wt("",!0)])])],2)}}}),r5=Qc(Mz,[["__scopeId","data-v-f9e746a1"]]),Pz={class:"map-toolbar w-full"},kz={class:"hidden md:flex items-center space-x-2"},Az={class:"dropdown"},Tz={class:"dropdown-menu"},Dz=["onClick"],Iz={key:0,class:"border-l pl-2 flex-1"},Oz={class:"flex items-center"},Nz={class:"plan-info"},Bz={class:"plan-name"},Rz={key:0,class:"plan-description"},Fz={class:"border-l pl-2 ml-auto"},jz={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},zz={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},$z={key:"saving"},Uz={key:"success",class:"save-success-text"},Vz={key:"default"},Hz={class:"md:hidden"},Gz={class:"flex justify-between items-center"},Wz={key:0,class:"truncate mx-2 text-sm font-medium"},qz={key:0,class:"mobile-menu mt-0 bg-white shadow-lg p-4 z-[1900] fixed left-0 right-0 w-full"},Yz={class:"flex justify-between items-center mb-3 border-b pb-2"},Kz={class:"flex flex-col space-y-4"},Zz={key:0,class:"flex flex-col pb-3 border-b"},Xz={class:"text-sm font-semibold text-gray-800"},Jz={key:0,class:"text-xs text-gray-600 mt-1"},Qz={class:"flex flex-col"},e$={class:"grid grid-cols-3 gap-2"},t$=["onClick"],n$={key:0,class:"animate-spin h-4 w-4 mr-2 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},r$={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},i$={key:"saving"},s$={key:"success",class:"save-success-text"},o$={key:"default"},a$=_s({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view"],setup(t,{emit:e}){const n=t,r=e,{lastSave:i,planName:s,planDescription:o,saveStatus:a}=i_(n),l=_t("Hybride"),c=_t(!1),d=k=>{const B=k.currentTarget,W=B.nextElementSibling;if(W&&W.classList.contains("dropdown-menu")){const Q=B.getBoundingClientRect();W.style.top=`${Q.bottom}px`,W.style.left=`${Q.left}px`}},p={Hybride:"Hybride",Cadastre:"Cadastre",IGN:"IGN"},v=qn(()=>i.value?new Date(i.value).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),m=k=>{l.value=k,r("change-map-type",k),c.value=!1},x=()=>{r("create-new-plan"),c.value=!1},E=()=>{r("load-plan"),c.value=!1},T=()=>{r("save-plan"),c.value=!1},D=()=>{r("adjust-view"),c.value=!1};return Ds(()=>{const k=setInterval(()=>{window.dispatchEvent(new CustomEvent("geonote:savePlan"))},6e4);$u(()=>{clearInterval(k)})}),ni(a,k=>{k==="saving"&&window.dispatchEvent(new CustomEvent("geonote:savePlan"))}),(k,B)=>(De(),Ne("div",Pz,[C("div",kz,[C("div",Az,[C("button",{class:"btn-toolbar dropdown-toggle",onMouseover:d},[B[2]||(B[2]=C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),C("span",null,Tt(p[l.value]),1)],32),C("div",Tz,[(De(),Ne(_n,null,Wn(p,(W,Q)=>C("button",{key:Q,class:xi(["dropdown-item",{active:Q===l.value}]),onClick:pe=>m(Q)},Tt(W),11,Dz)),64))])]),bn(s)?(De(),Ne("div",Iz,[C("div",Oz,[C("div",Nz,[C("h2",Bz,Tt(bn(s)),1),bn(o)?(De(),Ne("p",Rz,Tt(bn(o)),1)):Wt("",!0)])])])):Wt("",!0),C("div",{class:"border-l pl-2"},[C("div",{class:"flex items-center space-x-1"},[C("button",{onClick:x,class:"btn-toolbar",title:"Nouveau plan"},B[3]||(B[3]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),C("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),C("button",{onClick:E,class:"btn-toolbar",title:"Charger un plan"},B[4]||(B[4]=[wl('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-f1cdc164><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-f1cdc164></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-f1cdc164></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-f1cdc164></path></svg><span class="hidden lg:inline ml-1" data-v-f1cdc164>Charger</span>',2)])),C("button",{onClick:T,class:"btn-toolbar",title:"Enregistrer le plan"},B[5]||(B[5]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),C("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),C("div",{class:"border-l pl-2"},[C("div",{class:"flex items-center space-x-1"},[C("button",{onClick:D,class:"btn-toolbar",title:"Ajuster la vue"},B[6]||(B[6]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),C("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)]))])]),C("div",Fz,[C("div",{class:xi(["text-xs hidden lg:flex items-center",{"text-gray-500":!bn(a),"text-primary-600 font-medium":bn(a)==="success","text-blue-600 font-medium":bn(a)==="saving"}])},[bn(a)==="saving"?(De(),Ne("svg",jz,B[7]||(B[7]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Wt("",!0),bn(a)==="success"?(De(),Ne("svg",zz,B[8]||(B[8]=[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Wt("",!0),Xr(z2,{name:"fade-slide",mode:"out-in"},{default:Wl(()=>[bn(a)==="saving"?(De(),Ne("span",$z," Sauvegarde en cours... ")):bn(a)==="success"?(De(),Ne("span",Uz," Sauvegarde réussie ! ")):(De(),Ne("span",Vz," Dernière modification : "+Tt(v.value),1))]),_:1})],2)])]),C("div",Hz,[C("div",Gz,[C("button",{onClick:B[0]||(B[0]=W=>c.value=!c.value),class:"p-2 rounded-md border bg-white shadow-sm"},B[9]||(B[9]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})],-1)])),bn(s)?(De(),Ne("div",Wz,Tt(bn(s)),1)):Wt("",!0),C("div",{class:"flex space-x-2"},[C("button",{onClick:x,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},B[10]||(B[10]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),C("button",{onClick:T,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},B[11]||(B[11]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),C("button",{onClick:D,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},B[12]||(B[12]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),c.value?(De(),Ne("div",qz,[C("div",Yz,[B[14]||(B[14]=C("h3",{class:"text-base font-semibold text-gray-800"},"Menu",-1)),C("button",{onClick:B[1]||(B[1]=W=>c.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},B[13]||(B[13]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",Kz,[bn(s)?(De(),Ne("div",Zz,[C("h3",Xz,Tt(bn(s)),1),bn(o)?(De(),Ne("p",Jz,Tt(bn(o)),1)):Wt("",!0)])):Wt("",!0),C("div",Qz,[B[15]||(B[15]=C("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Type de carte",-1)),C("div",e$,[(De(),Ne(_n,null,Wn(p,(W,Q)=>C("button",{key:Q,class:xi(["px-3 py-2 text-sm rounded-md border shadow-sm",{"bg-blue-50 border-blue-300 text-blue-700 font-medium":Q===l.value}]),onClick:pe=>m(Q)},Tt(W),11,t$)),64))])]),C("div",{class:"flex flex-col"},[B[18]||(B[18]=C("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Outils de plan",-1)),C("div",{class:"grid grid-cols-2 gap-2"},[C("button",{onClick:x,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},B[16]||(B[16]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),Ir(" Nouveau ")])),C("button",{onClick:E,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},B[17]||(B[17]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),C("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),C("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),Ir(" Charger ")]))])]),C("div",{class:xi(["text-sm text-center pt-3 border-t flex items-center justify-center space-x-1 mt-2",{"text-gray-500":!bn(a),"text-primary-600 font-medium":bn(a)==="success","text-blue-600 font-medium":bn(a)==="saving"}])},[bn(a)==="saving"?(De(),Ne("svg",n$,B[19]||(B[19]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Wt("",!0),bn(a)==="success"?(De(),Ne("svg",r$,B[20]||(B[20]=[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Wt("",!0),Xr(z2,{name:"fade-slide",mode:"out-in"},{default:Wl(()=>[bn(a)==="saving"?(De(),Ne("span",i$," Sauvegarde en cours... ")):bn(a)==="success"?(De(),Ne("span",s$," Sauvegarde réussie ! ")):(De(),Ne("span",o$," Dernière modification : "+Tt(v.value),1))]),_:1})],2)])])):Wt("",!0)])]))}}),l$=Qc(a$,[["__scopeId","data-v-f1cdc164"]]),u$={class:"comment-thread"},c$={key:0,class:"space-y-3 mb-4"},h$={class:"flex justify-between items-start"},d$={class:"flex items-center"},f$={class:"font-medium text-sm text-gray-900"},p$={class:"flex items-center"},g$={class:"text-xs text-gray-500"},m$=["onClick"],v$={class:"mt-1 text-sm text-gray-700 whitespace-pre-wrap"},y$={key:1,class:"text-center text-sm text-gray-500 italic my-4"},b$={key:2,class:"mt-3"},_$={class:"flex justify-end mt-2"},w$=["disabled"],x$={key:3,class:"text-center text-sm text-gray-500 italic mt-2"},L$=_s({__name:"CommentThread",props:{noteId:{},comments:{}},emits:["update:comments","comment-added","comment-deleted"],setup(t,{emit:e}){const n=t;console.log("[CommentThread] Commentaires reçus initialement:",n.comments),ni(()=>n.comments,E=>{console.log("[CommentThread] Commentaires mis à jour:",E)},{deep:!0});const r=e,i=co(),s=hf(),o=Zl(),a=_t(""),l=qn(()=>i.isEntreprise||i.isAdmin);function c(E){return i.user&&E.userId===i.user.id||i.isAdmin}async function d(){var E;if(a.value.trim())try{await s.addComment(n.noteId,a.value.trim()),a.value="",o.success("Commentaire ajouté avec succès"),r("comment-added")}catch(T){if(console.error("Erreur lors de l'ajout du commentaire:",T),(E=T.response)!=null&&E.data){const D=T.response.data;D.note?o.error(`Erreur: ${D.note[0]}`):D.user?o.error(`Erreur: ${D.user[0]}`):D.text?o.error(`Erreur: ${D.text[0]}`):o.error("Erreur lors de l'ajout du commentaire")}else o.error("Erreur lors de l'ajout du commentaire")}}async function p(E){var T;if(confirm("Voulez-vous vraiment supprimer ce commentaire ?"))try{await s.removeComment(n.noteId,E),o.success("Commentaire supprimé"),r("comment-deleted")}catch(D){if(console.error("Erreur lors de la suppression du commentaire:",D),(T=D.response)!=null&&T.data){const k=D.response.data;k.detail?o.error(`Erreur: ${k.detail}`):o.error("Erreur lors de la suppression du commentaire")}else o.error("Erreur lors de la suppression du commentaire")}}function v(E){try{if(!E)return"Date inconnue";const T=new Date(E);return isNaN(T.getTime())?(console.warn(`Date invalide: ${E}`),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(T)}catch(T){return console.error(`Erreur lors du formatage de la date: ${E}`,T),"Date invalide"}}function m(E){switch(E){case"admin":return"bg-purple-100 text-purple-800";case"entreprise":return"bg-blue-100 text-blue-800";case"salarie":return"bg-green-100 text-green-800";case"visiteur":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function x(E){switch(E){case"admin":return"Admin";case"entreprise":return"Entreprise";case"salarie":return"Salarié";case"visiteur":return"Visiteur";default:return E}}return(E,T)=>(De(),Ne("div",u$,[E.comments&&E.comments.length>0?(De(),Ne("div",c$,[(De(!0),Ne(_n,null,Wn(E.comments,D=>(De(),Ne("div",{key:D.id,class:"bg-gray-50 rounded-lg p-3"},[C("div",h$,[C("div",d$,[C("div",f$,Tt(D.userName),1),C("span",{class:xi(["ml-2 text-xs px-2 py-0.5 rounded-full",m(D.userRole)])},Tt(x(D.userRole)),3)]),C("div",p$,[C("span",g$,Tt(v(D.createdAt)),1),c(D)?(De(),Ne("button",{key:0,onClick:xl(k=>p(D.id),["prevent"]),class:"ml-2 text-gray-400 hover:text-red-500"},T[1]||(T[1]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,m$)):Wt("",!0)])]),C("p",v$,Tt(D.text),1)]))),128))])):(De(),Ne("div",y$," Aucun commentaire pour le moment ")),l.value?(De(),Ne("div",b$,[On(C("textarea",{"onUpdate:modelValue":T[0]||(T[0]=D=>a.value=D),placeholder:"Ajouter un commentaire...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"2"},null,512),[[ui,a.value]]),C("div",_$,[C("button",{type:"button",onClick:xl(d,["prevent"]),disabled:!a.value.trim(),class:"px-3 py-1 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"}," Ajouter ",8,w$)])])):(De(),Ne("div",x$," Seuls les utilisateurs de l'entreprise peuvent ajouter des commentaires "))]))}}),S$={class:"photo-gallery"},C$={key:0,class:"grid grid-cols-2 gap-2 mb-4"},E$=["src","onClick"],M$={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center"},P$={class:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2"},k$=["onClick"],A$={key:1,class:"text-center text-sm text-gray-500 italic my-4"},T$={class:"flex space-x-2 mt-3"},D$={key:2,class:"mt-4 border border-gray-300 rounded-lg overflow-hidden bg-white"},I$={class:"relative bg-gray-900",style:{height:"300px"}},O$=["src"],N$={class:"p-3 bg-gray-50 border-t border-gray-300 flex justify-center"},B$={key:1,class:"flex space-x-3"},R$={key:3,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},F$={class:"relative max-w-3xl max-h-[90vh] bg-white rounded-lg overflow-hidden"},j$=["src"],z$=_s({__name:"PhotoGallery",props:{noteId:{},photos:{}},emits:["update:photos","photo-added","photo-deleted"],setup(t,{emit:e}){const n=t,r=e,i=hf(),s=Zl(),o=_t(null),a=_t(null),l=_t(null);let c=null;const d=_t(!1),p=_t(!1),v=_t(null),m=_t(null);function x(fe){v.value=fe,d.value=!0}async function E(fe){var O;if(confirm("Êtes-vous sûr de vouloir supprimer cette photo ?"))try{await i.removePhoto(n.noteId,fe),s.success("Photo supprimée"),r("photo-deleted"),d.value&&((O=v.value)==null?void 0:O.id)===fe&&(d.value=!1,v.value=null)}catch(U){console.error("Erreur lors de la suppression de la photo:",U),s.error("Erreur lors de la suppression de la photo")}}function T(){l.value&&l.value.click()}async function D(fe){const O=fe.target;if(!O.files||O.files.length===0)return;const U=O.files[0];if(!U.type.startsWith("image/")){s.error("Le fichier doit être une image");return}if(U.size>5*1024*1024){s.error("L'image est trop volumineuse (max 5MB)");return}try{const q=await k(U);await i.addPhoto(n.noteId,{url:q}),O.value="",s.success("Photo ajoutée"),r("photo-added")}catch(q){console.error("Erreur lors de l'ajout de la photo:",q),s.error("Erreur lors de l'ajout de la photo")}}function k(fe){return new Promise((O,U)=>{const q=new FileReader;q.onload=()=>O(q.result),q.onerror=U,q.readAsDataURL(fe)})}ni(p,async fe=>{if(fe){m.value=null;try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("API de caméra non supportée sur ce navigateur");const O={video:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}};c=await navigator.mediaDevices.getUserMedia(O),o.value&&(o.value.srcObject=c,await new Promise(U=>{o.value.onloadedmetadata=()=>{o.value.play().then(U)}}))}catch(O){console.error("Erreur lors de l'accès à la caméra:",O);let U="Impossible d'accéder à la caméra";O.name==="NotAllowedError"?U="L'accès à la caméra a été refusé. Veuillez vérifier vos permissions.":O.name==="NotFoundError"?U="Aucune caméra n'a été trouvée sur votre appareil.":O.name==="NotSupportedError"&&(U="Votre navigateur ne supporte pas l'accès à la caméra."),s.error(U),p.value=!1}}else c&&(c.getTracks().forEach(O=>O.stop()),c=null)});function B(){if(!o.value||!a.value)return;const fe=o.value,O=a.value;O.width=fe.videoWidth,O.height=fe.videoHeight;const U=O.getContext("2d");U&&(U.drawImage(fe,0,0,O.width,O.height),m.value=O.toDataURL("image/jpeg"))}function W(){m.value=null}async function Q(){if(m.value)try{await i.addPhoto(n.noteId,{url:m.value}),p.value=!1,s.success("Photo ajoutée"),r("photo-added")}catch(fe){console.error("Erreur lors de l'ajout de la photo:",fe),s.error("Erreur lors de l'ajout de la photo")}}function pe(){p.value=!1}return $u(()=>{c&&(c.getTracks().forEach(fe=>fe.stop()),c=null)}),(fe,O)=>(De(),Ne("div",S$,[fe.photos&&fe.photos.length>0?(De(),Ne("div",C$,[(De(!0),Ne(_n,null,Wn(fe.photos,U=>(De(),Ne("div",{key:U.id,class:"relative group"},[C("img",{src:U.url,alt:"Photo",class:"w-full h-32 object-cover rounded-lg cursor-pointer",onClick:q=>x(U)},null,8,E$),C("div",M$,[C("div",P$,[C("button",{onClick:xl(q=>E(U.id),["stop","prevent"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-red-600",title:"Supprimer la photo"},O[2]||(O[2]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,k$)])])]))),128))])):(De(),Ne("div",A$," Aucune photo pour le moment ")),C("div",T$,[C("button",{type:"button",onClick:O[0]||(O[0]=U=>p.value=!0),class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},O[3]||(O[3]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),Ir(" Prendre une photo ")])),C("button",{type:"button",onClick:T,class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer"},O[4]||(O[4]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})],-1),Ir(" Téléverser ")])),C("input",{id:"photo-upload",ref_key:"fileInput",ref:l,type:"file",accept:"image/*",class:"hidden",onChange:D},null,544)]),p.value?(De(),Ne("div",D$,[C("div",{class:"p-3 bg-gray-50 border-b border-gray-300 flex justify-between items-center"},[O[6]||(O[6]=C("h3",{class:"text-sm font-medium text-gray-700"},"Mode caméra",-1)),C("button",{type:"button",onClick:pe,class:"text-gray-400 hover:text-gray-500"},O[5]||(O[5]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",I$,[m.value?(De(),Ne("img",{key:1,src:m.value,class:"w-full h-full object-contain",alt:"Captured"},null,8,O$)):(De(),Ne("video",{key:0,ref_key:"videoElement",ref:o,autoplay:"",class:"w-full h-full object-contain"},null,512)),C("canvas",{ref_key:"canvasElement",ref:a,class:"hidden"},null,512)]),C("div",N$,[m.value?(De(),Ne("div",B$,[C("button",{type:"button",onClick:W,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Reprendre "),C("button",{type:"button",onClick:Q,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Utiliser ")])):(De(),Ne("button",{key:0,type:"button",onClick:B,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-full w-12 h-12 flex items-center justify-center hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},O[7]||(O[7]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})],-1)])))])])):Wt("",!0),d.value?(De(),Ne("div",R$,[C("div",F$,[C("button",{type:"button",onClick:O[1]||(O[1]=U=>d.value=!1),class:"absolute top-2 right-2 z-10 p-1 bg-white rounded-full text-gray-700 hover:text-red-600 shadow-md"},O[8]||(O[8]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),v.value?(De(),Ne("img",{key:0,src:v.value.url,alt:"Photo",class:"max-h-[80vh] max-w-full object-contain"},null,8,j$)):Wt("",!0)])])):Wt("",!0)]))}}),$$=Qc(z$,[["__scopeId","data-v-f87156b4"]]),U$={class:"modal-header"},V$={class:"modal-title"},H$={class:"modal-tabs"},G$={key:0,class:"badge"},W$={key:0,class:"badge"},q$={class:"modal-content"},Y$={key:0,class:"tab-content"},K$={class:"form-group"},Z$={class:"form-group"},X$={key:0,class:"location-indicator"},J$={class:"form-group"},Q$=["value"],eU={key:1,class:"form-group"},tU=["value"],nU={class:"form-group"},rU=["value"],iU={class:"form-group"},sU={class:"color-picker"},oU=["onClick"],aU={key:1,class:"tab-content"},lU={key:2,class:"tab-content"},uU=_s({__name:"NoteEditModal",props:{note:{},isNewNote:{type:Boolean},location:{}},emits:["close","save"],setup(t,{emit:e}){const n=t,r=e,i=hf(),s=Zl(),o=co(),a=_t("info"),l=_t([]),c=_t(null),d=window.console;ni(a,async F=>{d.log("[NoteEditModal] Onglet actif changé:",F),F==="comments"&&n.note&&n.note.id&&(d.log("[NoteEditModal] Onglet Commentaires sélectionné, commentaires actuels:",p.value.comments),await x(n.note.id)),F==="photos"&&n.note&&n.note.id&&(d.log("[NoteEditModal] Onglet Photos sélectionné, photos actuelles:",p.value.photos),await E(n.note.id))});const p=_t({title:"",description:"",columnId:"",accessLevel:Ei.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[],enterprise_id:null});function v(F){return Array.isArray(F)?F:typeof F=="object"&&"type"in F&&"coordinates"in F?[F.coordinates[1],F.coordinates[0]]:(d.error("[NoteEditModal] Format de localisation non reconnu:",F),[0,0])}function m(F){if(!F)return new Date().toISOString();try{const N=new Date(F);return isNaN(N.getTime())?(d.warn("[NoteEditModal] Date invalide:",F),new Date().toISOString()):N.toISOString()}catch(N){return d.error("[NoteEditModal] Erreur lors de la création de la date:",N),new Date().toISOString()}}async function x(F){try{d.log(`[NoteEditModal] Chargement des commentaires pour la note ${F}`);const N=await sa.getComments(F);d.log("[NoteEditModal] Commentaires reçus:",N.data);const J=N.data.map(Y=>({id:Y.id,text:Y.text,createdAt:Y.created_at,userId:Y.user,userName:Y.user_name,userRole:Y.user_role}));return d.log("[NoteEditModal] Commentaires transformés:",J),n.note&&(i.updateNote(n.note.id,{comments:J}),p.value.comments=J,d.log("[NoteEditModal] Commentaires mis à jour dans le store et localement"),d.log("[NoteEditModal] editingNote.comments après mise à jour:",p.value.comments)),J}catch(N){return d.error("[NoteEditModal] Erreur lors du chargement des commentaires:",N),s.error("Erreur lors du chargement des commentaires"),[]}}async function E(F){try{d.log(`[NoteEditModal] Chargement des photos pour la note ${F}`);const N=await sa.getPhotos(F);d.log("[NoteEditModal] Photos reçues:",N.data);const J=N.data.map(Y=>({id:Y.id,url:Y.image,createdAt:Y.created_at,caption:Y.caption}));return n.note&&(i.updateNote(n.note.id,{photos:J}),p.value.photos=J,d.log("[NoteEditModal] Photos mises à jour dans le store et localement")),J}catch(N){return d.error("[NoteEditModal] Erreur lors du chargement des photos:",N),s.error("Erreur lors du chargement des photos"),[]}}async function T(){if(o.isAdmin)try{const F=await xa.getEntreprises();l.value=F.data,d.log("[NoteEditModal] Entreprises chargées:",l.value)}catch(F){d.error("[NoteEditModal] Erreur lors du chargement des entreprises:",F),s.error("Erreur lors du chargement des entreprises")}}Ds(async()=>{var F,N,J;if(d.log("[NoteEditModal] onMounted - props:",n),await i.loadColumns(),d.log("[NoteEditModal] Colonnes chargées:",i.columns),await T(),n.note){d.log("[NoteEditModal] Édition d'une note existante:",n.note);const Y=JSON.parse(JSON.stringify(n.note));Y.createdAt=m(Y.createdAt),Y.updatedAt=m(Y.updatedAt),p.value=Y,o.isAdmin&&Y.enterprise_id&&(c.value=Y.enterprise_id),n.note.id&&(d.log("[NoteEditModal] Chargement des commentaires et photos..."),await Promise.all([x(n.note.id),E(n.note.id)]),d.log("[NoteEditModal] Après chargement - Commentaires:",((F=p.value.comments)==null?void 0:F.length)||0),d.log("[NoteEditModal] Après chargement - Photos:",((N=p.value.photos)==null?void 0:N.length)||0),setTimeout(()=>{d.log("[NoteEditModal] Compteurs après timeout - Commentaires:",k.value),d.log("[NoteEditModal] Compteurs après timeout - Photos:",B.value)},0))}else if(n.isNewNote){if(d.log("[NoteEditModal] Création d'une nouvelle note"),p.value={title:"Nouvelle note",description:"",columnId:i.getDefaultColumn.id||"1",accessLevel:Ei.PRIVATE,style:{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},comments:[],photos:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),enterprise_id:null},!o.isAdmin&&((J=o.user)!=null&&J.enterprise_id)&&(p.value.enterprise_id=o.user.enterprise_id),n.location){d.log("[NoteEditModal] Ajout de la localisation:",n.location);const Y=v(n.location);p.value.location=Y}d.log("[NoteEditModal] Niveau d'accès initial:",p.value.accessLevel)}else d.error("[NoteEditModal] Erreur: Ni note existante ni nouvelle note");d.log("[NoteEditModal] editingNote.value après initialisation:",p.value)});const D=qn(()=>i.getSortedColumns),k=qn(()=>{var N;const F=((N=p.value.comments)==null?void 0:N.length)||0;return d.log("[NoteEditModal] Computed commentsCount recalculé:",F),F}),B=qn(()=>{var N;const F=((N=p.value.photos)==null?void 0:N.length)||0;return d.log("[NoteEditModal] Computed photosCount recalculé:",F),F}),W=[{id:Ei.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:Ei.COMPANY,title:"Entreprise",description:"Visible par l'entreprise uniquement"},{id:Ei.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et les salariés"},{id:Ei.VISITOR,title:"Visiteurs",description:"Visible par tous"}],Q=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"],pe=F=>{var N;if(p.value.style?(p.value.style.color=F,p.value.style.fillColor=F):p.value.style={color:F,weight:2,opacity:1,fillColor:F,fillOpacity:.6,radius:8},p.value.color=F,(N=n.note)!=null&&N.id){d.log("[NoteEditModal] Émission de l'événement de mise à jour de couleur:",F);const J=new CustomEvent("geonote:updateStyle",{detail:{noteId:n.note.id,style:{color:F,fillColor:F}}});window.dispatchEvent(J);const Y=new CustomEvent("geonote:update",{detail:{noteId:n.note.id,properties:{name:p.value.title,description:p.value.description,columnId:p.value.columnId,accessLevel:p.value.accessLevel,style:p.value.style}}});window.dispatchEvent(Y)}},fe=()=>{var F,N,J,Y,ye,Ce,He,j,Z,ae,de;p.value={title:((F=n.note)==null?void 0:F.title)||"",description:((N=n.note)==null?void 0:N.description)||"",columnId:((J=n.note)==null?void 0:J.columnId)||"",accessLevel:((Y=n.note)==null?void 0:Y.accessLevel)||"private",style:((ye=n.note)==null?void 0:ye.style)||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},location:n.location||((Ce=n.note)==null?void 0:Ce.location)||null,comments:((He=n.note)==null?void 0:He.comments)||[],photos:((j=n.note)==null?void 0:j.photos)||[],enterprise_id:((Z=n.note)==null?void 0:Z.enterprise_id)||null},o.isAdmin&&((ae=n.note)!=null&&ae.enterprise_id)&&(c.value=n.note.enterprise_id),!o.isAdmin&&!p.value.enterprise_id&&((de=o.user)!=null&&de.enterprise_id)&&(p.value.enterprise_id=o.user.enterprise_id)};Ds(()=>{fe()}),ni(()=>n.note,()=>{fe()},{deep:!0});function O(){r("close")}async function U(){d.log("[NoteEditModal] Commentaire ajouté, le modal reste ouvert"),n.note&&n.note.id&&await x(n.note.id)}async function q(){d.log("[NoteEditModal] Photo ajoutée, le modal reste ouvert"),n.note&&n.note.id&&await E(n.note.id)}async function R(){d.log("[NoteEditModal] Commentaire supprimé, mise à jour de la liste"),n.note&&n.note.id&&await x(n.note.id)}async function $(){d.log("[NoteEditModal] Photo supprimée, mise à jour de la liste"),n.note&&n.note.id&&await E(n.note.id)}async function X(){var F,N;try{const J=p.value.style.color;p.value.style={...p.value.style,color:J,fillColor:J,weight:2,opacity:1,fillOpacity:.6,radius:8};const Y={title:p.value.title,description:p.value.description,columnId:p.value.columnId,style:p.value.style,access_level:p.value.accessLevel,comments:p.value.comments||[],photos:p.value.photos||[],color:J,enterprise_id:o.isAdmin?c.value:p.value.enterprise_id};!o.isAdmin&&((F=o.user)!=null&&F.enterprise_id)&&(Y.enterprise_id=o.user.enterprise_id),p.value.location&&(Y.location=Array.isArray(p.value.location)?{type:"Point",coordinates:[p.value.location[1],p.value.location[0]]}:p.value.location),d.log("[NoteEditModal] Données de note à sauvegarder:",Y);let ye;if((N=n.note)!=null&&N.id){const Ce=n.note.backendId||n.note.id;d.log(`[NoteEditModal] Mise à jour de la note avec ID backend: ${Ce}`),Y.backendId=n.note.backendId,ye=(await sa.updateNote(Ce,Y)).data,i.updateNote(Ce,{...p.value,...ye,accessLevel:p.value.accessLevel,style:p.value.style,color:J,updatedAt:new Date().toISOString(),enterprise_id:Y.enterprise_id,enterprise_name:p.value.enterprise_name});const j=n.note.leafletId||n.note.id,Z=new CustomEvent("geonote:update",{detail:{noteId:j,properties:{name:p.value.title,description:p.value.description,columnId:p.value.columnId,accessLevel:p.value.accessLevel,style:p.value.style,color:J}}});window.dispatchEvent(Z),s.success("Note mise à jour avec succès")}else{if(ye=(await sa.createNote(Y)).data,!ye.id)throw new Error("Le backend n'a pas fourni d'ID pour la nouvelle note");const He=i.getDefaultColumn,j={...Y,id:ye.id,columnId:Y.columnId||He.id,accessLevel:p.value.accessLevel,style:Y.style,color:J};d.log("[NoteEditModal] Note à ajouter au store avec ID backend:",ye.id),i.addNote(j),s.success("Note créée avec succès")}ye&&(!ye.comments&&p.value.comments&&(ye.comments=p.value.comments),!ye.photos&&p.value.photos&&(ye.photos=p.value.photos),ye.color=J,ye.style={...ye.style,color:J,fillColor:J}),r("save",ye),r("close")}catch(J){d.error("[NoteEditModal] Erreur lors de la sauvegarde de la note:",J),s.error("Erreur lors de la sauvegarde de la note")}}function K(F){F.stopPropagation()}return(F,N)=>{var J;return De(),Ne("div",{class:"modal-overlay",onClick:K},[C("div",{class:"modal-container",onClick:N[8]||(N[8]=xl(()=>{},["stop"]))},[C("form",{onSubmit:xl(X,["prevent"]),class:"modal-form"},[C("div",U$,[C("h3",V$,Tt((J=F.note)!=null&&J.id?"Modifier la note":"Nouvelle note"),1),C("button",{type:"button",onClick:O,class:"close-button"},N[9]||(N[9]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",H$,[C("button",{type:"button",onClick:N[0]||(N[0]=Y=>a.value="info"),class:xi(["tab-button",{active:a.value==="info"}])}," Informations ",2),C("button",{type:"button",onClick:N[1]||(N[1]=Y=>a.value="comments"),class:xi(["tab-button",{active:a.value==="comments"}])},[N[10]||(N[10]=Ir(" Commentaires ")),k.value>0?(De(),Ne("span",G$,Tt(k.value),1)):Wt("",!0)],2),C("button",{type:"button",onClick:N[2]||(N[2]=Y=>a.value="photos"),class:xi(["tab-button",{active:a.value==="photos"}])},[N[11]||(N[11]=Ir(" Photos ")),B.value>0?(De(),Ne("span",W$,Tt(B.value),1)):Wt("",!0)],2)]),C("div",q$,[a.value==="info"?(De(),Ne("div",Y$,[C("div",K$,[N[12]||(N[12]=C("label",{for:"title"},"Titre",-1)),On(C("input",{type:"text",id:"title","onUpdate:modelValue":N[3]||(N[3]=Y=>p.value.title=Y),required:""},null,512),[[ui,p.value.title]])]),C("div",Z$,[N[13]||(N[13]=C("label",{for:"description"},"Description",-1)),On(C("textarea",{id:"description","onUpdate:modelValue":N[4]||(N[4]=Y=>p.value.description=Y),rows:"3"},null,512),[[ui,p.value.description]])]),p.value.location?(De(),Ne("div",X$,N[14]||(N[14]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"icon",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1),C("span",null,"Note géolocalisée",-1)]))):Wt("",!0),C("div",J$,[N[15]||(N[15]=C("label",{for:"column"},"État",-1)),On(C("select",{id:"column","onUpdate:modelValue":N[5]||(N[5]=Y=>p.value.columnId=Y)},[(De(!0),Ne(_n,null,Wn(D.value,Y=>(De(),Ne("option",{key:Y.id,value:Y.id},Tt(Y.title),9,Q$))),128))],512),[[Mi,p.value.columnId]])]),bn(o).isAdmin?(De(),Ne("div",eU,[N[17]||(N[17]=C("label",{for:"enterprise"},"Entreprise",-1)),On(C("select",{id:"enterprise","onUpdate:modelValue":N[6]||(N[6]=Y=>c.value=Y)},[N[16]||(N[16]=C("option",{value:null},"Sélectionner une entreprise",-1)),(De(!0),Ne(_n,null,Wn(l.value,Y=>(De(),Ne("option",{key:Y.id,value:Y.id},Tt(Y.company_name||`${Y.first_name} ${Y.last_name}`),9,tU))),128))],512),[[Mi,c.value]])])):Wt("",!0),C("div",nU,[N[18]||(N[18]=C("label",{for:"accessLevel"},"Niveau d'accès",-1)),On(C("select",{id:"accessLevel","onUpdate:modelValue":N[7]||(N[7]=Y=>p.value.accessLevel=Y)},[(De(),Ne(_n,null,Wn(W,Y=>C("option",{key:Y.id,value:Y.id},Tt(Y.title)+" - "+Tt(Y.description),9,rU)),64))],512),[[Mi,p.value.accessLevel]])]),C("div",iU,[N[19]||(N[19]=C("label",null,"Couleur",-1)),C("div",sU,[(De(),Ne(_n,null,Wn(Q,Y=>C("div",{key:Y,class:xi(["color-option",{selected:p.value.style.color===Y}]),style:Yl({backgroundColor:Y}),onClick:ye=>pe(Y)},null,14,oU)),64))])])])):a.value==="comments"?(De(),Ne("div",aU,[F.note?(De(),xo(L$,{key:0,noteId:F.note.id,comments:p.value.comments||[],onCommentAdded:U,onCommentDeleted:R},null,8,["noteId","comments"])):Wt("",!0)])):a.value==="photos"?(De(),Ne("div",lU,[F.note?(De(),xo($$,{key:0,noteId:F.note.id,photos:p.value.photos||[],onPhotoAdded:q,onPhotoDeleted:$},null,8,["noteId","photos"])):Wt("",!0)])):Wt("",!0)]),C("div",{class:"modal-footer"},[N[20]||(N[20]=C("button",{type:"submit",class:"primary-button"},"Enregistrer",-1)),C("button",{type:"button",onClick:O,class:"secondary-button"},"Annuler")])],32)])])}}}),yE=Qc(uU,[["__scopeId","data-v-a9b914c4"]]);(()=>{var En,Zn;var t=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(h,g)=>()=>(g||h((g={exports:{}}).exports,g),g.exports),a=(h,g,_,S)=>{if(g&&typeof g=="object"||typeof g=="function")for(let P of r(g))!s.call(h,P)&&P!==_&&e(h,P,{get:()=>g[P],enumerable:!(S=n(g,P))||S.enumerable});return h},l=(h,g,_)=>(_=h!=null?t(i(h)):{},a(g||!h||!h.__esModule?e(_,"default",{value:h,enumerable:!0}):_,h)),c=o((h,g)=>{function _(){this.__data__=[],this.size=0}g.exports=_}),d=o((h,g)=>{function _(S,P){return S===P||S!==S&&P!==P}g.exports=_}),p=o((h,g)=>{var _=d();function S(P,V){for(var te=P.length;te--;)if(_(P[te][0],V))return te;return-1}g.exports=S}),v=o((h,g)=>{var _=p(),S=Array.prototype,P=S.splice;function V(te){var ie=this.__data__,ve=_(ie,te);if(ve<0)return!1;var Ee=ie.length-1;return ve==Ee?ie.pop():P.call(ie,ve,1),--this.size,!0}g.exports=V}),m=o((h,g)=>{var _=p();function S(P){var V=this.__data__,te=_(V,P);return te<0?void 0:V[te][1]}g.exports=S}),x=o((h,g)=>{var _=p();function S(P){return _(this.__data__,P)>-1}g.exports=S}),E=o((h,g)=>{var _=p();function S(P,V){var te=this.__data__,ie=_(te,P);return ie<0?(++this.size,te.push([P,V])):te[ie][1]=V,this}g.exports=S}),T=o((h,g)=>{var _=c(),S=v(),P=m(),V=x(),te=E();function ie(ve){var Ee=-1,Ze=ve==null?0:ve.length;for(this.clear();++Ee<Ze;){var Ve=ve[Ee];this.set(Ve[0],Ve[1])}}ie.prototype.clear=_,ie.prototype.delete=S,ie.prototype.get=P,ie.prototype.has=V,ie.prototype.set=te,g.exports=ie}),D=o((h,g)=>{var _=T();function S(){this.__data__=new _,this.size=0}g.exports=S}),k=o((h,g)=>{function _(S){var P=this.__data__,V=P.delete(S);return this.size=P.size,V}g.exports=_}),B=o((h,g)=>{function _(S){return this.__data__.get(S)}g.exports=_}),W=o((h,g)=>{function _(S){return this.__data__.has(S)}g.exports=_}),Q=o((h,g)=>{var _=typeof oa=="object"&&oa&&oa.Object===Object&&oa;g.exports=_}),pe=o((h,g)=>{var _=Q(),S=typeof self=="object"&&self&&self.Object===Object&&self,P=_||S||Function("return this")();g.exports=P}),fe=o((h,g)=>{var _=pe(),S=_.Symbol;g.exports=S}),O=o((h,g)=>{var _=fe(),S=Object.prototype,P=S.hasOwnProperty,V=S.toString,te=_?_.toStringTag:void 0;function ie(ve){var Ee=P.call(ve,te),Ze=ve[te];try{ve[te]=void 0;var Ve=!0}catch{}var vt=V.call(ve);return Ve&&(Ee?ve[te]=Ze:delete ve[te]),vt}g.exports=ie}),U=o((h,g)=>{var _=Object.prototype,S=_.toString;function P(V){return S.call(V)}g.exports=P}),q=o((h,g)=>{var _=fe(),S=O(),P=U(),V="[object Null]",te="[object Undefined]",ie=_?_.toStringTag:void 0;function ve(Ee){return Ee==null?Ee===void 0?te:V:ie&&ie in Object(Ee)?S(Ee):P(Ee)}g.exports=ve}),R=o((h,g)=>{function _(S){var P=typeof S;return S!=null&&(P=="object"||P=="function")}g.exports=_}),$=o((h,g)=>{var _=q(),S=R(),P="[object AsyncFunction]",V="[object Function]",te="[object GeneratorFunction]",ie="[object Proxy]";function ve(Ee){if(!S(Ee))return!1;var Ze=_(Ee);return Ze==V||Ze==te||Ze==P||Ze==ie}g.exports=ve}),X=o((h,g)=>{var _=pe(),S=_["__core-js_shared__"];g.exports=S}),K=o((h,g)=>{var _=X(),S=function(){var V=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||"");return V?"Symbol(src)_1."+V:""}();function P(V){return!!S&&S in V}g.exports=P}),F=o((h,g)=>{var _=Function.prototype,S=_.toString;function P(V){if(V!=null){try{return S.call(V)}catch{}try{return V+""}catch{}}return""}g.exports=P}),N=o((h,g)=>{var _=$(),S=K(),P=R(),V=F(),te=/[\\^$.*+?()[\]{}|]/g,ie=/^\[object .+?Constructor\]$/,ve=Function.prototype,Ee=Object.prototype,Ze=ve.toString,Ve=Ee.hasOwnProperty,vt=RegExp("^"+Ze.call(Ve).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function At(Kt){if(!P(Kt)||S(Kt))return!1;var yn=_(Kt)?vt:ie;return yn.test(V(Kt))}g.exports=At}),J=o((h,g)=>{function _(S,P){return S==null?void 0:S[P]}g.exports=_}),Y=o((h,g)=>{var _=N(),S=J();function P(V,te){var ie=S(V,te);return _(ie)?ie:void 0}g.exports=P}),ye=o((h,g)=>{var _=Y(),S=pe(),P=_(S,"Map");g.exports=P}),Ce=o((h,g)=>{var _=Y(),S=_(Object,"create");g.exports=S}),He=o((h,g)=>{var _=Ce();function S(){this.__data__=_?_(null):{},this.size=0}g.exports=S}),j=o((h,g)=>{function _(S){var P=this.has(S)&&delete this.__data__[S];return this.size-=P?1:0,P}g.exports=_}),Z=o((h,g)=>{var _=Ce(),S="__lodash_hash_undefined__",P=Object.prototype,V=P.hasOwnProperty;function te(ie){var ve=this.__data__;if(_){var Ee=ve[ie];return Ee===S?void 0:Ee}return V.call(ve,ie)?ve[ie]:void 0}g.exports=te}),ae=o((h,g)=>{var _=Ce(),S=Object.prototype,P=S.hasOwnProperty;function V(te){var ie=this.__data__;return _?ie[te]!==void 0:P.call(ie,te)}g.exports=V}),de=o((h,g)=>{var _=Ce(),S="__lodash_hash_undefined__";function P(V,te){var ie=this.__data__;return this.size+=this.has(V)?0:1,ie[V]=_&&te===void 0?S:te,this}g.exports=P}),ge=o((h,g)=>{var _=He(),S=j(),P=Z(),V=ae(),te=de();function ie(ve){var Ee=-1,Ze=ve==null?0:ve.length;for(this.clear();++Ee<Ze;){var Ve=ve[Ee];this.set(Ve[0],Ve[1])}}ie.prototype.clear=_,ie.prototype.delete=S,ie.prototype.get=P,ie.prototype.has=V,ie.prototype.set=te,g.exports=ie}),me=o((h,g)=>{var _=ge(),S=T(),P=ye();function V(){this.size=0,this.__data__={hash:new _,map:new(P||S),string:new _}}g.exports=V}),oe=o((h,g)=>{function _(S){var P=typeof S;return P=="string"||P=="number"||P=="symbol"||P=="boolean"?S!=="__proto__":S===null}g.exports=_}),re=o((h,g)=>{var _=oe();function S(P,V){var te=P.__data__;return _(V)?te[typeof V=="string"?"string":"hash"]:te.map}g.exports=S}),Te=o((h,g)=>{var _=re();function S(P){var V=_(this,P).delete(P);return this.size-=V?1:0,V}g.exports=S}),Le=o((h,g)=>{var _=re();function S(P){return _(this,P).get(P)}g.exports=S}),qe=o((h,g)=>{var _=re();function S(P){return _(this,P).has(P)}g.exports=S}),se=o((h,g)=>{var _=re();function S(P,V){var te=_(this,P),ie=te.size;return te.set(P,V),this.size+=te.size==ie?0:1,this}g.exports=S}),le=o((h,g)=>{var _=me(),S=Te(),P=Le(),V=qe(),te=se();function ie(ve){var Ee=-1,Ze=ve==null?0:ve.length;for(this.clear();++Ee<Ze;){var Ve=ve[Ee];this.set(Ve[0],Ve[1])}}ie.prototype.clear=_,ie.prototype.delete=S,ie.prototype.get=P,ie.prototype.has=V,ie.prototype.set=te,g.exports=ie}),he=o((h,g)=>{var _=T(),S=ye(),P=le(),V=200;function te(ie,ve){var Ee=this.__data__;if(Ee instanceof _){var Ze=Ee.__data__;if(!S||Ze.length<V-1)return Ze.push([ie,ve]),this.size=++Ee.size,this;Ee=this.__data__=new P(Ze)}return Ee.set(ie,ve),this.size=Ee.size,this}g.exports=te}),ee=o((h,g)=>{var _=T(),S=D(),P=k(),V=B(),te=W(),ie=he();function ve(Ee){var Ze=this.__data__=new _(Ee);this.size=Ze.size}ve.prototype.clear=S,ve.prototype.delete=P,ve.prototype.get=V,ve.prototype.has=te,ve.prototype.set=ie,g.exports=ve}),be=o((h,g)=>{var _=Y(),S=function(){try{var P=_(Object,"defineProperty");return P({},"",{}),P}catch{}}();g.exports=S}),je=o((h,g)=>{var _=be();function S(P,V,te){V=="__proto__"&&_?_(P,V,{configurable:!0,enumerable:!0,value:te,writable:!0}):P[V]=te}g.exports=S}),We=o((h,g)=>{var _=je(),S=d();function P(V,te,ie){(ie!==void 0&&!S(V[te],ie)||ie===void 0&&!(te in V))&&_(V,te,ie)}g.exports=P}),Qe=o((h,g)=>{function _(S){return function(P,V,te){for(var ie=-1,ve=Object(P),Ee=te(P),Ze=Ee.length;Ze--;){var Ve=Ee[S?Ze:++ie];if(V(ve[Ve],Ve,ve)===!1)break}return P}}g.exports=_}),Je=o((h,g)=>{var _=Qe(),S=_();g.exports=S}),st=o((h,g)=>{var _=pe(),S=typeof h=="object"&&h&&!h.nodeType&&h,P=S&&typeof g=="object"&&g&&!g.nodeType&&g,V=P&&P.exports===S,te=V?_.Buffer:void 0,ie=te?te.allocUnsafe:void 0;function ve(Ee,Ze){if(Ze)return Ee.slice();var Ve=Ee.length,vt=ie?ie(Ve):new Ee.constructor(Ve);return Ee.copy(vt),vt}g.exports=ve}),Pt=o((h,g)=>{var _=pe(),S=_.Uint8Array;g.exports=S}),Bt=o((h,g)=>{var _=Pt();function S(P){var V=new P.constructor(P.byteLength);return new _(V).set(new _(P)),V}g.exports=S}),Ht=o((h,g)=>{var _=Bt();function S(P,V){var te=V?_(P.buffer):P.buffer;return new P.constructor(te,P.byteOffset,P.length)}g.exports=S}),Jt=o((h,g)=>{function _(S,P){var V=-1,te=S.length;for(P||(P=Array(te));++V<te;)P[V]=S[V];return P}g.exports=_}),fn=o((h,g)=>{var _=R(),S=Object.create,P=function(){function V(){}return function(te){if(!_(te))return{};if(S)return S(te);V.prototype=te;var ie=new V;return V.prototype=void 0,ie}}();g.exports=P}),pn=o((h,g)=>{function _(S,P){return function(V){return S(P(V))}}g.exports=_}),et=o((h,g)=>{var _=pn(),S=_(Object.getPrototypeOf,Object);g.exports=S}),ot=o((h,g)=>{var _=Object.prototype;function S(P){var V=P&&P.constructor,te=typeof V=="function"&&V.prototype||_;return P===te}g.exports=S}),rt=o((h,g)=>{var _=fn(),S=et(),P=ot();function V(te){return typeof te.constructor=="function"&&!P(te)?_(S(te)):{}}g.exports=V}),Ft=o((h,g)=>{function _(S){return S!=null&&typeof S=="object"}g.exports=_}),Xt=o((h,g)=>{var _=q(),S=Ft(),P="[object Arguments]";function V(te){return S(te)&&_(te)==P}g.exports=V}),Mn=o((h,g)=>{var _=Xt(),S=Ft(),P=Object.prototype,V=P.hasOwnProperty,te=P.propertyIsEnumerable,ie=_(function(){return arguments}())?_:function(ve){return S(ve)&&V.call(ve,"callee")&&!te.call(ve,"callee")};g.exports=ie}),xn=o((h,g)=>{var _=Array.isArray;g.exports=_}),Cn=o((h,g)=>{var _=9007199254740991;function S(P){return typeof P=="number"&&P>-1&&P%1==0&&P<=_}g.exports=S}),Vn=o((h,g)=>{var _=$(),S=Cn();function P(V){return V!=null&&S(V.length)&&!_(V)}g.exports=P}),wn=o((h,g)=>{var _=Vn(),S=Ft();function P(V){return S(V)&&_(V)}g.exports=P}),sn=o((h,g)=>{function _(){return!1}g.exports=_}),hn=o((h,g)=>{var _=pe(),S=sn(),P=typeof h=="object"&&h&&!h.nodeType&&h,V=P&&typeof g=="object"&&g&&!g.nodeType&&g,te=V&&V.exports===P,ie=te?_.Buffer:void 0,ve=ie?ie.isBuffer:void 0,Ee=ve||S;g.exports=Ee}),Qn=o((h,g)=>{var _=q(),S=et(),P=Ft(),V="[object Object]",te=Function.prototype,ie=Object.prototype,ve=te.toString,Ee=ie.hasOwnProperty,Ze=ve.call(Object);function Ve(vt){if(!P(vt)||_(vt)!=V)return!1;var At=S(vt);if(At===null)return!0;var Kt=Ee.call(At,"constructor")&&At.constructor;return typeof Kt=="function"&&Kt instanceof Kt&&ve.call(Kt)==Ze}g.exports=Ve}),ir=o((h,g)=>{var _=q(),S=Cn(),P=Ft(),V="[object Arguments]",te="[object Array]",ie="[object Boolean]",ve="[object Date]",Ee="[object Error]",Ze="[object Function]",Ve="[object Map]",vt="[object Number]",At="[object Object]",Kt="[object RegExp]",yn="[object Set]",Sn="[object String]",sr="[object WeakMap]",Ke="[object ArrayBuffer]",nt="[object DataView]",ht="[object Float32Array]",Rt="[object Float64Array]",wt="[object Int8Array]",It="[object Int16Array]",_e="[object Int32Array]",ke="[object Uint8Array]",Fe="[object Uint8ClampedArray]",Re="[object Uint16Array]",$e="[object Uint32Array]",Ue={};Ue[ht]=Ue[Rt]=Ue[wt]=Ue[It]=Ue[_e]=Ue[ke]=Ue[Fe]=Ue[Re]=Ue[$e]=!0,Ue[V]=Ue[te]=Ue[Ke]=Ue[ie]=Ue[nt]=Ue[ve]=Ue[Ee]=Ue[Ze]=Ue[Ve]=Ue[vt]=Ue[At]=Ue[Kt]=Ue[yn]=Ue[Sn]=Ue[sr]=!1;function lt(ut){return P(ut)&&S(ut.length)&&!!Ue[_(ut)]}g.exports=lt}),dr=o((h,g)=>{function _(S){return function(P){return S(P)}}g.exports=_}),Fn=o((h,g)=>{var _=Q(),S=typeof h=="object"&&h&&!h.nodeType&&h,P=S&&typeof g=="object"&&g&&!g.nodeType&&g,V=P&&P.exports===S,te=V&&_.process,ie=function(){try{var ve=P&&P.require&&P.require("util").types;return ve||te&&te.binding&&te.binding("util")}catch{}}();g.exports=ie}),Mr=o((h,g)=>{var _=ir(),S=dr(),P=Fn(),V=P&&P.isTypedArray,te=V?S(V):_;g.exports=te}),ns=o((h,g)=>{function _(S,P){if(!(P==="constructor"&&typeof S[P]=="function")&&P!="__proto__")return S[P]}g.exports=_}),Pi=o((h,g)=>{var _=je(),S=d(),P=Object.prototype,V=P.hasOwnProperty;function te(ie,ve,Ee){var Ze=ie[ve];(!(V.call(ie,ve)&&S(Ze,Ee))||Ee===void 0&&!(ve in ie))&&_(ie,ve,Ee)}g.exports=te}),Xs=o((h,g)=>{var _=Pi(),S=je();function P(V,te,ie,ve){var Ee=!ie;ie||(ie={});for(var Ze=-1,Ve=te.length;++Ze<Ve;){var vt=te[Ze],At=ve?ve(ie[vt],V[vt],vt,ie,V):void 0;At===void 0&&(At=V[vt]),Ee?S(ie,vt,At):_(ie,vt,At)}return ie}g.exports=P}),ds=o((h,g)=>{function _(S,P){for(var V=-1,te=Array(S);++V<S;)te[V]=P(V);return te}g.exports=_}),Yn=o((h,g)=>{var _=9007199254740991,S=/^(?:0|[1-9]\d*)$/;function P(V,te){var ie=typeof V;return te=te??_,!!te&&(ie=="number"||ie!="symbol"&&S.test(V))&&V>-1&&V%1==0&&V<te}g.exports=P}),mt=o((h,g)=>{var _=ds(),S=Mn(),P=xn(),V=hn(),te=Yn(),ie=Mr(),ve=Object.prototype,Ee=ve.hasOwnProperty;function Ze(Ve,vt){var At=P(Ve),Kt=!At&&S(Ve),yn=!At&&!Kt&&V(Ve),Sn=!At&&!Kt&&!yn&&ie(Ve),sr=At||Kt||yn||Sn,Ke=sr?_(Ve.length,String):[],nt=Ke.length;for(var ht in Ve)(vt||Ee.call(Ve,ht))&&!(sr&&(ht=="length"||yn&&(ht=="offset"||ht=="parent")||Sn&&(ht=="buffer"||ht=="byteLength"||ht=="byteOffset")||te(ht,nt)))&&Ke.push(ht);return Ke}g.exports=Ze}),tt=o((h,g)=>{function _(S){var P=[];if(S!=null)for(var V in Object(S))P.push(V);return P}g.exports=_}),Dt=o((h,g)=>{var _=R(),S=ot(),P=tt(),V=Object.prototype,te=V.hasOwnProperty;function ie(ve){if(!_(ve))return P(ve);var Ee=S(ve),Ze=[];for(var Ve in ve)Ve=="constructor"&&(Ee||!te.call(ve,Ve))||Ze.push(Ve);return Ze}g.exports=ie}),mn=o((h,g)=>{var _=mt(),S=Dt(),P=Vn();function V(te){return P(te)?_(te,!0):S(te)}g.exports=V}),Vt=o((h,g)=>{var _=Xs(),S=mn();function P(V){return _(V,S(V))}g.exports=P}),jn=o((h,g)=>{var _=We(),S=st(),P=Ht(),V=Jt(),te=rt(),ie=Mn(),ve=xn(),Ee=wn(),Ze=hn(),Ve=$(),vt=R(),At=Qn(),Kt=Mr(),yn=ns(),Sn=Vt();function sr(Ke,nt,ht,Rt,wt,It,_e){var ke=yn(Ke,ht),Fe=yn(nt,ht),Re=_e.get(Fe);if(Re){_(Ke,ht,Re);return}var $e=It?It(ke,Fe,ht+"",Ke,nt,_e):void 0,Ue=$e===void 0;if(Ue){var lt=ve(Fe),ut=!lt&&Ze(Fe),pt=!lt&&!ut&&Kt(Fe);$e=Fe,lt||ut||pt?ve(ke)?$e=ke:Ee(ke)?$e=V(ke):ut?(Ue=!1,$e=S(Fe,!0)):pt?(Ue=!1,$e=P(Fe,!0)):$e=[]:At(Fe)||ie(Fe)?($e=ke,ie(ke)?$e=Sn(ke):(!vt(ke)||Ve(ke))&&($e=te(Fe))):Ue=!1}Ue&&(_e.set(Fe,$e),wt($e,Fe,Rt,It,_e),_e.delete(Fe)),_(Ke,ht,$e)}g.exports=sr}),vn=o((h,g)=>{var _=ee(),S=We(),P=Je(),V=jn(),te=R(),ie=mn(),ve=ns();function Ee(Ze,Ve,vt,At,Kt){Ze!==Ve&&P(Ve,function(yn,Sn){if(Kt||(Kt=new _),te(yn))V(Ze,Ve,Sn,vt,Ee,At,Kt);else{var sr=At?At(ve(Ze,Sn),yn,Sn+"",Ze,Ve,Kt):void 0;sr===void 0&&(sr=yn),S(Ze,Sn,sr)}},ie)}g.exports=Ee}),Ut=o((h,g)=>{function _(S){return S}g.exports=_}),tn=o((h,g)=>{function _(S,P,V){switch(V.length){case 0:return S.call(P);case 1:return S.call(P,V[0]);case 2:return S.call(P,V[0],V[1]);case 3:return S.call(P,V[0],V[1],V[2])}return S.apply(P,V)}g.exports=_}),Ln=o((h,g)=>{var _=tn(),S=Math.max;function P(V,te,ie){return te=S(te===void 0?V.length-1:te,0),function(){for(var ve=arguments,Ee=-1,Ze=S(ve.length-te,0),Ve=Array(Ze);++Ee<Ze;)Ve[Ee]=ve[te+Ee];Ee=-1;for(var vt=Array(te+1);++Ee<te;)vt[Ee]=ve[Ee];return vt[te]=ie(Ve),_(V,this,vt)}}g.exports=P}),zn=o((h,g)=>{function _(S){return function(){return S}}g.exports=_}),dn=o((h,g)=>{var _=zn(),S=be(),P=Ut(),V=S?function(te,ie){return S(te,"toString",{configurable:!0,enumerable:!1,value:_(ie),writable:!0})}:P;g.exports=V}),Zt=o((h,g)=>{var _=800,S=16,P=Date.now;function V(te){var ie=0,ve=0;return function(){var Ee=P(),Ze=S-(Ee-ve);if(ve=Ee,Ze>0){if(++ie>=_)return arguments[0]}else ie=0;return te.apply(void 0,arguments)}}g.exports=V}),$n=o((h,g)=>{var _=dn(),S=Zt(),P=S(_);g.exports=P}),yi=o((h,g)=>{var _=Ut(),S=Ln(),P=$n();function V(te,ie){return P(S(te,ie,_),te+"")}g.exports=V}),or=o((h,g)=>{var _=d(),S=Vn(),P=Yn(),V=R();function te(ie,ve,Ee){if(!V(Ee))return!1;var Ze=typeof ve;return(Ze=="number"?S(Ee)&&P(ve,Ee.length):Ze=="string"&&ve in Ee)?_(Ee[ve],ie):!1}g.exports=te}),di=o((h,g)=>{var _=yi(),S=or();function P(V){return _(function(te,ie){var ve=-1,Ee=ie.length,Ze=Ee>1?ie[Ee-1]:void 0,Ve=Ee>2?ie[2]:void 0;for(Ze=V.length>3&&typeof Ze=="function"?(Ee--,Ze):void 0,Ve&&S(ie[0],ie[1],Ve)&&(Ze=Ee<3?void 0:Ze,Ee=1),te=Object(te);++ve<Ee;){var vt=ie[ve];vt&&V(te,vt,ve,Ze)}return te})}g.exports=P}),ur=o((h,g)=>{var _=vn(),S=di(),P=S(function(V,te,ie){_(V,te,ie)});g.exports=P}),ar=o((h,g)=>{var _=q(),S=Ft(),P="[object Symbol]";function V(te){return typeof te=="symbol"||S(te)&&_(te)==P}g.exports=V}),Gi=o((h,g)=>{var _=xn(),S=ar(),P=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,V=/^\w*$/;function te(ie,ve){if(_(ie))return!1;var Ee=typeof ie;return Ee=="number"||Ee=="symbol"||Ee=="boolean"||ie==null||S(ie)?!0:V.test(ie)||!P.test(ie)||ve!=null&&ie in Object(ve)}g.exports=te}),Ri=o((h,g)=>{var _=le(),S="Expected a function";function P(V,te){if(typeof V!="function"||te!=null&&typeof te!="function")throw new TypeError(S);var ie=function(){var ve=arguments,Ee=te?te.apply(this,ve):ve[0],Ze=ie.cache;if(Ze.has(Ee))return Ze.get(Ee);var Ve=V.apply(this,ve);return ie.cache=Ze.set(Ee,Ve)||Ze,Ve};return ie.cache=new(P.Cache||_),ie}P.Cache=_,g.exports=P}),Fi=o((h,g)=>{var _=Ri(),S=500;function P(V){var te=_(V,function(ve){return ie.size===S&&ie.clear(),ve}),ie=te.cache;return te}g.exports=P}),rs=o((h,g)=>{var _=Fi(),S=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,P=/\\(\\)?/g,V=_(function(te){var ie=[];return te.charCodeAt(0)===46&&ie.push(""),te.replace(S,function(ve,Ee,Ze,Ve){ie.push(Ze?Ve.replace(P,"$1"):Ee||ve)}),ie});g.exports=V}),fs=o((h,g)=>{function _(S,P){for(var V=-1,te=S==null?0:S.length,ie=Array(te);++V<te;)ie[V]=P(S[V],V,S);return ie}g.exports=_}),ws=o((h,g)=>{var _=fe(),S=fs(),P=xn(),V=ar(),te=_?_.prototype:void 0,ie=te?te.toString:void 0;function ve(Ee){if(typeof Ee=="string")return Ee;if(P(Ee))return S(Ee,ve)+"";if(V(Ee))return ie?ie.call(Ee):"";var Ze=Ee+"";return Ze=="0"&&1/Ee==-1/0?"-0":Ze}g.exports=ve}),Is=o((h,g)=>{var _=ws();function S(P){return P==null?"":_(P)}g.exports=S}),Os=o((h,g)=>{var _=xn(),S=Gi(),P=rs(),V=Is();function te(ie,ve){return _(ie)?ie:S(ie,ve)?[ie]:P(V(ie))}g.exports=te}),cr=o((h,g)=>{var _=ar();function S(P){if(typeof P=="string"||_(P))return P;var V=P+"";return V=="0"&&1/P==-1/0?"-0":V}g.exports=S}),gr=o((h,g)=>{var _=Os(),S=cr();function P(V,te){te=_(te,V);for(var ie=0,ve=te.length;V!=null&&ie<ve;)V=V[S(te[ie++])];return ie&&ie==ve?V:void 0}g.exports=P}),Si=o((h,g)=>{var _=gr();function S(P,V,te){var ie=P==null?void 0:_(P,V);return ie===void 0?te:ie}g.exports=S}),Pr=o((h,g)=>{(function(_,S){typeof h=="object"&&typeof g<"u"?g.exports=S():(_=_||self).RBush=S()})(h,function(){function _(Ke,nt,ht,Rt,wt){(function It(_e,ke,Fe,Re,$e){for(;Re>Fe;){if(Re-Fe>600){var Ue=Re-Fe+1,lt=ke-Fe+1,ut=Math.log(Ue),pt=.5*Math.exp(2*ut/3),St=.5*Math.sqrt(ut*pt*(Ue-pt)/Ue)*(lt-Ue/2<0?-1:1),Ct=Math.max(Fe,Math.floor(ke-lt*pt/Ue+St)),rn=Math.min(Re,Math.floor(ke+(Ue-lt)*pt/Ue+St));It(_e,ke,Ct,rn,$e)}var Bn=_e[ke],Un=Fe,Xn=Re;for(S(_e,Fe,ke),$e(_e[Re],Bn)>0&&S(_e,Fe,Re);Un<Xn;){for(S(_e,Un,Xn),Un++,Xn--;$e(_e[Un],Bn)<0;)Un++;for(;$e(_e[Xn],Bn)>0;)Xn--}$e(_e[Fe],Bn)===0?S(_e,Fe,Xn):S(_e,++Xn,Re),Xn<=ke&&(Fe=Xn+1),ke<=Xn&&(Re=Xn-1)}})(Ke,nt,ht||0,Rt||Ke.length-1,wt||P)}function S(Ke,nt,ht){var Rt=Ke[nt];Ke[nt]=Ke[ht],Ke[ht]=Rt}function P(Ke,nt){return Ke<nt?-1:Ke>nt?1:0}var V=function(Ke){Ke===void 0&&(Ke=9),this._maxEntries=Math.max(4,Ke),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function te(Ke,nt,ht){if(!ht)return nt.indexOf(Ke);for(var Rt=0;Rt<nt.length;Rt++)if(ht(Ke,nt[Rt]))return Rt;return-1}function ie(Ke,nt){ve(Ke,0,Ke.children.length,nt,Ke)}function ve(Ke,nt,ht,Rt,wt){wt||(wt=Sn(null)),wt.minX=1/0,wt.minY=1/0,wt.maxX=-1/0,wt.maxY=-1/0;for(var It=nt;It<ht;It++){var _e=Ke.children[It];Ee(wt,Ke.leaf?Rt(_e):_e)}return wt}function Ee(Ke,nt){return Ke.minX=Math.min(Ke.minX,nt.minX),Ke.minY=Math.min(Ke.minY,nt.minY),Ke.maxX=Math.max(Ke.maxX,nt.maxX),Ke.maxY=Math.max(Ke.maxY,nt.maxY),Ke}function Ze(Ke,nt){return Ke.minX-nt.minX}function Ve(Ke,nt){return Ke.minY-nt.minY}function vt(Ke){return(Ke.maxX-Ke.minX)*(Ke.maxY-Ke.minY)}function At(Ke){return Ke.maxX-Ke.minX+(Ke.maxY-Ke.minY)}function Kt(Ke,nt){return Ke.minX<=nt.minX&&Ke.minY<=nt.minY&&nt.maxX<=Ke.maxX&&nt.maxY<=Ke.maxY}function yn(Ke,nt){return nt.minX<=Ke.maxX&&nt.minY<=Ke.maxY&&nt.maxX>=Ke.minX&&nt.maxY>=Ke.minY}function Sn(Ke){return{children:Ke,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function sr(Ke,nt,ht,Rt,wt){for(var It=[nt,ht];It.length;)if(!((ht=It.pop())-(nt=It.pop())<=Rt)){var _e=nt+Math.ceil((ht-nt)/Rt/2)*Rt;_(Ke,_e,nt,ht,wt),It.push(nt,_e,_e,ht)}}return V.prototype.all=function(){return this._all(this.data,[])},V.prototype.search=function(Ke){var nt=this.data,ht=[];if(!yn(Ke,nt))return ht;for(var Rt=this.toBBox,wt=[];nt;){for(var It=0;It<nt.children.length;It++){var _e=nt.children[It],ke=nt.leaf?Rt(_e):_e;yn(Ke,ke)&&(nt.leaf?ht.push(_e):Kt(Ke,ke)?this._all(_e,ht):wt.push(_e))}nt=wt.pop()}return ht},V.prototype.collides=function(Ke){var nt=this.data;if(!yn(Ke,nt))return!1;for(var ht=[];nt;){for(var Rt=0;Rt<nt.children.length;Rt++){var wt=nt.children[Rt],It=nt.leaf?this.toBBox(wt):wt;if(yn(Ke,It)){if(nt.leaf||Kt(Ke,It))return!0;ht.push(wt)}}nt=ht.pop()}return!1},V.prototype.load=function(Ke){if(!Ke||!Ke.length)return this;if(Ke.length<this._minEntries){for(var nt=0;nt<Ke.length;nt++)this.insert(Ke[nt]);return this}var ht=this._build(Ke.slice(),0,Ke.length-1,0);if(this.data.children.length)if(this.data.height===ht.height)this._splitRoot(this.data,ht);else{if(this.data.height<ht.height){var Rt=this.data;this.data=ht,ht=Rt}this._insert(ht,this.data.height-ht.height-1,!0)}else this.data=ht;return this},V.prototype.insert=function(Ke){return Ke&&this._insert(Ke,this.data.height-1),this},V.prototype.clear=function(){return this.data=Sn([]),this},V.prototype.remove=function(Ke,nt){if(!Ke)return this;for(var ht,Rt,wt,It=this.data,_e=this.toBBox(Ke),ke=[],Fe=[];It||ke.length;){if(It||(It=ke.pop(),Rt=ke[ke.length-1],ht=Fe.pop(),wt=!0),It.leaf){var Re=te(Ke,It.children,nt);if(Re!==-1)return It.children.splice(Re,1),ke.push(It),this._condense(ke),this}wt||It.leaf||!Kt(It,_e)?Rt?(ht++,It=Rt.children[ht],wt=!1):It=null:(ke.push(It),Fe.push(ht),ht=0,Rt=It,It=It.children[0])}return this},V.prototype.toBBox=function(Ke){return Ke},V.prototype.compareMinX=function(Ke,nt){return Ke.minX-nt.minX},V.prototype.compareMinY=function(Ke,nt){return Ke.minY-nt.minY},V.prototype.toJSON=function(){return this.data},V.prototype.fromJSON=function(Ke){return this.data=Ke,this},V.prototype._all=function(Ke,nt){for(var ht=[];Ke;)Ke.leaf?nt.push.apply(nt,Ke.children):ht.push.apply(ht,Ke.children),Ke=ht.pop();return nt},V.prototype._build=function(Ke,nt,ht,Rt){var wt,It=ht-nt+1,_e=this._maxEntries;if(It<=_e)return ie(wt=Sn(Ke.slice(nt,ht+1)),this.toBBox),wt;Rt||(Rt=Math.ceil(Math.log(It)/Math.log(_e)),_e=Math.ceil(It/Math.pow(_e,Rt-1))),(wt=Sn([])).leaf=!1,wt.height=Rt;var ke=Math.ceil(It/_e),Fe=ke*Math.ceil(Math.sqrt(_e));sr(Ke,nt,ht,Fe,this.compareMinX);for(var Re=nt;Re<=ht;Re+=Fe){var $e=Math.min(Re+Fe-1,ht);sr(Ke,Re,$e,ke,this.compareMinY);for(var Ue=Re;Ue<=$e;Ue+=ke){var lt=Math.min(Ue+ke-1,$e);wt.children.push(this._build(Ke,Ue,lt,Rt-1))}}return ie(wt,this.toBBox),wt},V.prototype._chooseSubtree=function(Ke,nt,ht,Rt){for(;Rt.push(nt),!nt.leaf&&Rt.length-1!==ht;){for(var wt=1/0,It=1/0,_e=void 0,ke=0;ke<nt.children.length;ke++){var Fe=nt.children[ke],Re=vt(Fe),$e=(Ue=Ke,lt=Fe,(Math.max(lt.maxX,Ue.maxX)-Math.min(lt.minX,Ue.minX))*(Math.max(lt.maxY,Ue.maxY)-Math.min(lt.minY,Ue.minY))-Re);$e<It?(It=$e,wt=Re<wt?Re:wt,_e=Fe):$e===It&&Re<wt&&(wt=Re,_e=Fe)}nt=_e||nt.children[0]}var Ue,lt;return nt},V.prototype._insert=function(Ke,nt,ht){var Rt=ht?Ke:this.toBBox(Ke),wt=[],It=this._chooseSubtree(Rt,this.data,nt,wt);for(It.children.push(Ke),Ee(It,Rt);nt>=0&&wt[nt].children.length>this._maxEntries;)this._split(wt,nt),nt--;this._adjustParentBBoxes(Rt,wt,nt)},V.prototype._split=function(Ke,nt){var ht=Ke[nt],Rt=ht.children.length,wt=this._minEntries;this._chooseSplitAxis(ht,wt,Rt);var It=this._chooseSplitIndex(ht,wt,Rt),_e=Sn(ht.children.splice(It,ht.children.length-It));_e.height=ht.height,_e.leaf=ht.leaf,ie(ht,this.toBBox),ie(_e,this.toBBox),nt?Ke[nt-1].children.push(_e):this._splitRoot(ht,_e)},V.prototype._splitRoot=function(Ke,nt){this.data=Sn([Ke,nt]),this.data.height=Ke.height+1,this.data.leaf=!1,ie(this.data,this.toBBox)},V.prototype._chooseSplitIndex=function(Ke,nt,ht){for(var Rt,wt,It,_e,ke,Fe,Re,$e=1/0,Ue=1/0,lt=nt;lt<=ht-nt;lt++){var ut=ve(Ke,0,lt,this.toBBox),pt=ve(Ke,lt,ht,this.toBBox),St=(wt=ut,It=pt,_e=void 0,ke=void 0,Fe=void 0,Re=void 0,_e=Math.max(wt.minX,It.minX),ke=Math.max(wt.minY,It.minY),Fe=Math.min(wt.maxX,It.maxX),Re=Math.min(wt.maxY,It.maxY),Math.max(0,Fe-_e)*Math.max(0,Re-ke)),Ct=vt(ut)+vt(pt);St<$e?($e=St,Rt=lt,Ue=Ct<Ue?Ct:Ue):St===$e&&Ct<Ue&&(Ue=Ct,Rt=lt)}return Rt||ht-nt},V.prototype._chooseSplitAxis=function(Ke,nt,ht){var Rt=Ke.leaf?this.compareMinX:Ze,wt=Ke.leaf?this.compareMinY:Ve;this._allDistMargin(Ke,nt,ht,Rt)<this._allDistMargin(Ke,nt,ht,wt)&&Ke.children.sort(Rt)},V.prototype._allDistMargin=function(Ke,nt,ht,Rt){Ke.children.sort(Rt);for(var wt=this.toBBox,It=ve(Ke,0,nt,wt),_e=ve(Ke,ht-nt,ht,wt),ke=At(It)+At(_e),Fe=nt;Fe<ht-nt;Fe++){var Re=Ke.children[Fe];Ee(It,Ke.leaf?wt(Re):Re),ke+=At(It)}for(var $e=ht-nt-1;$e>=nt;$e--){var Ue=Ke.children[$e];Ee(_e,Ke.leaf?wt(Ue):Ue),ke+=At(_e)}return ke},V.prototype._adjustParentBBoxes=function(Ke,nt,ht){for(var Rt=ht;Rt>=0;Rt--)Ee(nt[Rt],Ke)},V.prototype._condense=function(Ke){for(var nt=Ke.length-1,ht=void 0;nt>=0;nt--)Ke[nt].children.length===0?nt>0?(ht=Ke[nt-1].children).splice(ht.indexOf(Ke[nt]),1):this.clear():ie(Ke[nt],this.toBBox)},V})}),mr=o(h=>{Object.defineProperty(h,"__esModule",{value:!0}),h.earthRadius=63710088e-1,h.factors={centimeters:h.earthRadius*100,centimetres:h.earthRadius*100,degrees:h.earthRadius/111325,feet:h.earthRadius*3.28084,inches:h.earthRadius*39.37,kilometers:h.earthRadius/1e3,kilometres:h.earthRadius/1e3,meters:h.earthRadius,metres:h.earthRadius,miles:h.earthRadius/1609.344,millimeters:h.earthRadius*1e3,millimetres:h.earthRadius*1e3,nauticalmiles:h.earthRadius/1852,radians:1,yards:h.earthRadius*1.0936},h.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/h.earthRadius,yards:1.0936133},h.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function g(Re,$e,Ue){Ue===void 0&&(Ue={});var lt={type:"Feature"};return(Ue.id===0||Ue.id)&&(lt.id=Ue.id),Ue.bbox&&(lt.bbox=Ue.bbox),lt.properties=$e||{},lt.geometry=Re,lt}h.feature=g;function _(Re,$e,Ue){switch(Re){case"Point":return S($e).geometry;case"LineString":return ie($e).geometry;case"Polygon":return V($e).geometry;case"MultiPoint":return Ve($e).geometry;case"MultiLineString":return Ze($e).geometry;case"MultiPolygon":return vt($e).geometry;default:throw new Error(Re+" is invalid")}}h.geometry=_;function S(Re,$e,Ue){if(Ue===void 0&&(Ue={}),!Re)throw new Error("coordinates is required");if(!Array.isArray(Re))throw new Error("coordinates must be an Array");if(Re.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!It(Re[0])||!It(Re[1]))throw new Error("coordinates must contain numbers");var lt={type:"Point",coordinates:Re};return g(lt,$e,Ue)}h.point=S;function P(Re,$e,Ue){return Ue===void 0&&(Ue={}),Ee(Re.map(function(lt){return S(lt,$e)}),Ue)}h.points=P;function V(Re,$e,Ue){Ue===void 0&&(Ue={});for(var lt=0,ut=Re;lt<ut.length;lt++){var pt=ut[lt];if(pt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var St=0;St<pt[pt.length-1].length;St++)if(pt[pt.length-1][St]!==pt[0][St])throw new Error("First and last Position are not equivalent.")}var Ct={type:"Polygon",coordinates:Re};return g(Ct,$e,Ue)}h.polygon=V;function te(Re,$e,Ue){return Ue===void 0&&(Ue={}),Ee(Re.map(function(lt){return V(lt,$e)}),Ue)}h.polygons=te;function ie(Re,$e,Ue){if(Ue===void 0&&(Ue={}),Re.length<2)throw new Error("coordinates must be an array of two or more positions");var lt={type:"LineString",coordinates:Re};return g(lt,$e,Ue)}h.lineString=ie;function ve(Re,$e,Ue){return Ue===void 0&&(Ue={}),Ee(Re.map(function(lt){return ie(lt,$e)}),Ue)}h.lineStrings=ve;function Ee(Re,$e){$e===void 0&&($e={});var Ue={type:"FeatureCollection"};return $e.id&&(Ue.id=$e.id),$e.bbox&&(Ue.bbox=$e.bbox),Ue.features=Re,Ue}h.featureCollection=Ee;function Ze(Re,$e,Ue){Ue===void 0&&(Ue={});var lt={type:"MultiLineString",coordinates:Re};return g(lt,$e,Ue)}h.multiLineString=Ze;function Ve(Re,$e,Ue){Ue===void 0&&(Ue={});var lt={type:"MultiPoint",coordinates:Re};return g(lt,$e,Ue)}h.multiPoint=Ve;function vt(Re,$e,Ue){Ue===void 0&&(Ue={});var lt={type:"MultiPolygon",coordinates:Re};return g(lt,$e,Ue)}h.multiPolygon=vt;function At(Re,$e,Ue){Ue===void 0&&(Ue={});var lt={type:"GeometryCollection",geometries:Re};return g(lt,$e,Ue)}h.geometryCollection=At;function Kt(Re,$e){if($e===void 0&&($e=0),$e&&!($e>=0))throw new Error("precision must be a positive number");var Ue=Math.pow(10,$e||0);return Math.round(Re*Ue)/Ue}h.round=Kt;function yn(Re,$e){$e===void 0&&($e="kilometers");var Ue=h.factors[$e];if(!Ue)throw new Error($e+" units is invalid");return Re*Ue}h.radiansToLength=yn;function Sn(Re,$e){$e===void 0&&($e="kilometers");var Ue=h.factors[$e];if(!Ue)throw new Error($e+" units is invalid");return Re/Ue}h.lengthToRadians=Sn;function sr(Re,$e){return nt(Sn(Re,$e))}h.lengthToDegrees=sr;function Ke(Re){var $e=Re%360;return $e<0&&($e+=360),$e}h.bearingToAzimuth=Ke;function nt(Re){var $e=Re%(2*Math.PI);return $e*180/Math.PI}h.radiansToDegrees=nt;function ht(Re){var $e=Re%360;return $e*Math.PI/180}h.degreesToRadians=ht;function Rt(Re,$e,Ue){if($e===void 0&&($e="kilometers"),Ue===void 0&&(Ue="kilometers"),!(Re>=0))throw new Error("length must be a positive number");return yn(Sn(Re,$e),Ue)}h.convertLength=Rt;function wt(Re,$e,Ue){if($e===void 0&&($e="meters"),Ue===void 0&&(Ue="kilometers"),!(Re>=0))throw new Error("area must be a positive number");var lt=h.areaFactors[$e];if(!lt)throw new Error("invalid original units");var ut=h.areaFactors[Ue];if(!ut)throw new Error("invalid final units");return Re/lt*ut}h.convertArea=wt;function It(Re){return!isNaN(Re)&&Re!==null&&!Array.isArray(Re)}h.isNumber=It;function _e(Re){return!!Re&&Re.constructor===Object}h.isObject=_e;function ke(Re){if(!Re)throw new Error("bbox is required");if(!Array.isArray(Re))throw new Error("bbox must be an Array");if(Re.length!==4&&Re.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");Re.forEach(function($e){if(!It($e))throw new Error("bbox must only contain numbers")})}h.validateBBox=ke;function Fe(Re){if(!Re)throw new Error("id is required");if(["string","number"].indexOf(typeof Re)===-1)throw new Error("id must be a number or a string")}h.validateId=Fe}),Qa=o(h=>{Object.defineProperty(h,"__esModule",{value:!0});var g=mr();function _(nt,ht,Rt){if(nt!==null)for(var wt,It,_e,ke,Fe,Re,$e,Ue=0,lt=0,ut,pt=nt.type,St=pt==="FeatureCollection",Ct=pt==="Feature",rn=St?nt.features.length:1,Bn=0;Bn<rn;Bn++){$e=St?nt.features[Bn].geometry:Ct?nt.geometry:nt,ut=$e?$e.type==="GeometryCollection":!1,Fe=ut?$e.geometries.length:1;for(var Un=0;Un<Fe;Un++){var Xn=0,ei=0;if(ke=ut?$e.geometries[Un]:$e,ke!==null){Re=ke.coordinates;var pi=ke.type;switch(Ue=Rt&&(pi==="Polygon"||pi==="MultiPolygon")?1:0,pi){case null:break;case"Point":if(ht(Re,lt,Bn,Xn,ei)===!1)return!1;lt++,Xn++;break;case"LineString":case"MultiPoint":for(wt=0;wt<Re.length;wt++){if(ht(Re[wt],lt,Bn,Xn,ei)===!1)return!1;lt++,pi==="MultiPoint"&&Xn++}pi==="LineString"&&Xn++;break;case"Polygon":case"MultiLineString":for(wt=0;wt<Re.length;wt++){for(It=0;It<Re[wt].length-Ue;It++){if(ht(Re[wt][It],lt,Bn,Xn,ei)===!1)return!1;lt++}pi==="MultiLineString"&&Xn++,pi==="Polygon"&&ei++}pi==="Polygon"&&Xn++;break;case"MultiPolygon":for(wt=0;wt<Re.length;wt++){for(ei=0,It=0;It<Re[wt].length;It++){for(_e=0;_e<Re[wt][It].length-Ue;_e++){if(ht(Re[wt][It][_e],lt,Bn,Xn,ei)===!1)return!1;lt++}ei++}Xn++}break;case"GeometryCollection":for(wt=0;wt<ke.geometries.length;wt++)if(_(ke.geometries[wt],ht,Rt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function S(nt,ht,Rt,wt){var It=Rt;return _(nt,function(_e,ke,Fe,Re,$e){ke===0&&Rt===void 0?It=_e:It=ht(It,_e,ke,Fe,Re,$e)},wt),It}function P(nt,ht){var Rt;switch(nt.type){case"FeatureCollection":for(Rt=0;Rt<nt.features.length&&ht(nt.features[Rt].properties,Rt)!==!1;Rt++);break;case"Feature":ht(nt.properties,0);break}}function V(nt,ht,Rt){var wt=Rt;return P(nt,function(It,_e){_e===0&&Rt===void 0?wt=It:wt=ht(wt,It,_e)}),wt}function te(nt,ht){if(nt.type==="Feature")ht(nt,0);else if(nt.type==="FeatureCollection")for(var Rt=0;Rt<nt.features.length&&ht(nt.features[Rt],Rt)!==!1;Rt++);}function ie(nt,ht,Rt){var wt=Rt;return te(nt,function(It,_e){_e===0&&Rt===void 0?wt=It:wt=ht(wt,It,_e)}),wt}function ve(nt){var ht=[];return _(nt,function(Rt){ht.push(Rt)}),ht}function Ee(nt,ht){var Rt,wt,It,_e,ke,Fe,Re,$e,Ue,lt,ut=0,pt=nt.type==="FeatureCollection",St=nt.type==="Feature",Ct=pt?nt.features.length:1;for(Rt=0;Rt<Ct;Rt++){for(Fe=pt?nt.features[Rt].geometry:St?nt.geometry:nt,$e=pt?nt.features[Rt].properties:St?nt.properties:{},Ue=pt?nt.features[Rt].bbox:St?nt.bbox:void 0,lt=pt?nt.features[Rt].id:St?nt.id:void 0,Re=Fe?Fe.type==="GeometryCollection":!1,ke=Re?Fe.geometries.length:1,It=0;It<ke;It++){if(_e=Re?Fe.geometries[It]:Fe,_e===null){if(ht(null,ut,$e,Ue,lt)===!1)return!1;continue}switch(_e.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(ht(_e,ut,$e,Ue,lt)===!1)return!1;break}case"GeometryCollection":{for(wt=0;wt<_e.geometries.length;wt++)if(ht(_e.geometries[wt],ut,$e,Ue,lt)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ut++}}function Ze(nt,ht,Rt){var wt=Rt;return Ee(nt,function(It,_e,ke,Fe,Re){_e===0&&Rt===void 0?wt=It:wt=ht(wt,It,_e,ke,Fe,Re)}),wt}function Ve(nt,ht){Ee(nt,function(Rt,wt,It,_e,ke){var Fe=Rt===null?null:Rt.type;switch(Fe){case null:case"Point":case"LineString":case"Polygon":return ht(g.feature(Rt,It,{bbox:_e,id:ke}),wt,0)===!1?!1:void 0}var Re;switch(Fe){case"MultiPoint":Re="Point";break;case"MultiLineString":Re="LineString";break;case"MultiPolygon":Re="Polygon";break}for(var $e=0;$e<Rt.coordinates.length;$e++){var Ue=Rt.coordinates[$e],lt={type:Re,coordinates:Ue};if(ht(g.feature(lt,It),wt,$e)===!1)return!1}})}function vt(nt,ht,Rt){var wt=Rt;return Ve(nt,function(It,_e,ke){_e===0&&ke===0&&Rt===void 0?wt=It:wt=ht(wt,It,_e,ke)}),wt}function At(nt,ht){Ve(nt,function(Rt,wt,It){var _e=0;if(Rt.geometry){var ke=Rt.geometry.type;if(!(ke==="Point"||ke==="MultiPoint")){var Fe,Re=0,$e=0,Ue=0;if(_(Rt,function(lt,ut,pt,St,Ct){if(Fe===void 0||wt>Re||St>$e||Ct>Ue){Fe=lt,Re=wt,$e=St,Ue=Ct,_e=0;return}var rn=g.lineString([Fe,lt],Rt.properties);if(ht(rn,wt,It,Ct,_e)===!1)return!1;_e++,Fe=lt})===!1)return!1}}})}function Kt(nt,ht,Rt){var wt=Rt,It=!1;return At(nt,function(_e,ke,Fe,Re,$e){It===!1&&Rt===void 0?wt=_e:wt=ht(wt,_e,ke,Fe,Re,$e),It=!0}),wt}function yn(nt,ht){if(!nt)throw new Error("geojson is required");Ve(nt,function(Rt,wt,It){if(Rt.geometry!==null){var _e=Rt.geometry.type,ke=Rt.geometry.coordinates;switch(_e){case"LineString":if(ht(Rt,wt,It,0,0)===!1)return!1;break;case"Polygon":for(var Fe=0;Fe<ke.length;Fe++)if(ht(g.lineString(ke[Fe],Rt.properties),wt,It,Fe)===!1)return!1;break}}})}function Sn(nt,ht,Rt){var wt=Rt;return yn(nt,function(It,_e,ke,Fe){_e===0&&Rt===void 0?wt=It:wt=ht(wt,It,_e,ke,Fe)}),wt}function sr(nt,ht){if(ht=ht||{},!g.isObject(ht))throw new Error("options is invalid");var Rt=ht.featureIndex||0,wt=ht.multiFeatureIndex||0,It=ht.geometryIndex||0,_e=ht.segmentIndex||0,ke=ht.properties,Fe;switch(nt.type){case"FeatureCollection":Rt<0&&(Rt=nt.features.length+Rt),ke=ke||nt.features[Rt].properties,Fe=nt.features[Rt].geometry;break;case"Feature":ke=ke||nt.properties,Fe=nt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Fe=nt;break;default:throw new Error("geojson is invalid")}if(Fe===null)return null;var Re=Fe.coordinates;switch(Fe.type){case"Point":case"MultiPoint":return null;case"LineString":return _e<0&&(_e=Re.length+_e-1),g.lineString([Re[_e],Re[_e+1]],ke,ht);case"Polygon":return It<0&&(It=Re.length+It),_e<0&&(_e=Re[It].length+_e-1),g.lineString([Re[It][_e],Re[It][_e+1]],ke,ht);case"MultiLineString":return wt<0&&(wt=Re.length+wt),_e<0&&(_e=Re[wt].length+_e-1),g.lineString([Re[wt][_e],Re[wt][_e+1]],ke,ht);case"MultiPolygon":return wt<0&&(wt=Re.length+wt),It<0&&(It=Re[wt].length+It),_e<0&&(_e=Re[wt][It].length-_e-1),g.lineString([Re[wt][It][_e],Re[wt][It][_e+1]],ke,ht)}throw new Error("geojson is invalid")}function Ke(nt,ht){if(ht=ht||{},!g.isObject(ht))throw new Error("options is invalid");var Rt=ht.featureIndex||0,wt=ht.multiFeatureIndex||0,It=ht.geometryIndex||0,_e=ht.coordIndex||0,ke=ht.properties,Fe;switch(nt.type){case"FeatureCollection":Rt<0&&(Rt=nt.features.length+Rt),ke=ke||nt.features[Rt].properties,Fe=nt.features[Rt].geometry;break;case"Feature":ke=ke||nt.properties,Fe=nt.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":Fe=nt;break;default:throw new Error("geojson is invalid")}if(Fe===null)return null;var Re=Fe.coordinates;switch(Fe.type){case"Point":return g.point(Re,ke,ht);case"MultiPoint":return wt<0&&(wt=Re.length+wt),g.point(Re[wt],ke,ht);case"LineString":return _e<0&&(_e=Re.length+_e),g.point(Re[_e],ke,ht);case"Polygon":return It<0&&(It=Re.length+It),_e<0&&(_e=Re[It].length+_e),g.point(Re[It][_e],ke,ht);case"MultiLineString":return wt<0&&(wt=Re.length+wt),_e<0&&(_e=Re[wt].length+_e),g.point(Re[wt][_e],ke,ht);case"MultiPolygon":return wt<0&&(wt=Re.length+wt),It<0&&(It=Re[wt].length+It),_e<0&&(_e=Re[wt][It].length-_e),g.point(Re[wt][It][_e],ke,ht)}throw new Error("geojson is invalid")}h.coordAll=ve,h.coordEach=_,h.coordReduce=S,h.featureEach=te,h.featureReduce=ie,h.findPoint=Ke,h.findSegment=sr,h.flattenEach=Ve,h.flattenReduce=vt,h.geomEach=Ee,h.geomReduce=Ze,h.lineEach=yn,h.lineReduce=Sn,h.propEach=P,h.propReduce=V,h.segmentEach=At,h.segmentReduce=Kt}),Sa=o(h=>{Object.defineProperty(h,"__esModule",{value:!0});var g=Qa();function _(S){var P=[1/0,1/0,-1/0,-1/0];return g.coordEach(S,function(V){P[0]>V[0]&&(P[0]=V[0]),P[1]>V[1]&&(P[1]=V[1]),P[2]<V[0]&&(P[2]=V[0]),P[3]<V[1]&&(P[3]=V[1])}),P}_.default=_,h.default=_}),Go=o((h,g)=>{var _=Pr(),S=mr(),P=Qa(),V=Sa().default,te=P.featureEach;P.coordEach,S.polygon;var ie=S.featureCollection;function ve(Ee){var Ze=new _(Ee);return Ze.insert=function(Ve){if(Ve.type!=="Feature")throw new Error("invalid feature");return Ve.bbox=Ve.bbox?Ve.bbox:V(Ve),_.prototype.insert.call(this,Ve)},Ze.load=function(Ve){var vt=[];return Array.isArray(Ve)?Ve.forEach(function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:V(At),vt.push(At)}):te(Ve,function(At){if(At.type!=="Feature")throw new Error("invalid features");At.bbox=At.bbox?At.bbox:V(At),vt.push(At)}),_.prototype.load.call(this,vt)},Ze.remove=function(Ve,vt){if(Ve.type!=="Feature")throw new Error("invalid feature");return Ve.bbox=Ve.bbox?Ve.bbox:V(Ve),_.prototype.remove.call(this,Ve,vt)},Ze.clear=function(){return _.prototype.clear.call(this)},Ze.search=function(Ve){var vt=_.prototype.search.call(this,this.toBBox(Ve));return ie(vt)},Ze.collides=function(Ve){return _.prototype.collides.call(this,this.toBBox(Ve))},Ze.all=function(){var Ve=_.prototype.all.call(this);return ie(Ve)},Ze.toJSON=function(){return _.prototype.toJSON.call(this)},Ze.fromJSON=function(Ve){return _.prototype.fromJSON.call(this,Ve)},Ze.toBBox=function(Ve){var vt;if(Ve.bbox)vt=Ve.bbox;else if(Array.isArray(Ve)&&Ve.length===4)vt=Ve;else if(Array.isArray(Ve)&&Ve.length===6)vt=[Ve[0],Ve[1],Ve[3],Ve[4]];else if(Ve.type==="Feature")vt=V(Ve);else if(Ve.type==="FeatureCollection")vt=V(Ve);else throw new Error("invalid geojson");return{minX:vt[0],minY:vt[1],maxX:vt[2],maxY:vt[3]}},Ze}g.exports=ve,g.exports.default=ve});Array.prototype.findIndex=Array.prototype.findIndex||function(h){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var g=Object(this),_=g.length>>>0,S=arguments[1],P=0;P<_;P++)if(h.call(S,g[P],P,g))return P;return-1},Array.prototype.find=Array.prototype.find||function(h){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var g=Object(this),_=g.length>>>0,S=arguments[1],P=0;P<_;P++){var V=g[P];if(h.call(S,V,P,g))return V}},typeof Object.assign!="function"&&(Object.assign=function(h){if(h==null)throw new TypeError("Cannot convert undefined or null to object");h=Object(h);for(var g=1;g<arguments.length;g++){var _=arguments[g];if(_!=null)for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(h[S]=_[S])}return h}),function(h){h.forEach(function(g){g.hasOwnProperty("remove")||Object.defineProperty(g,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(h,g){if(this==null)throw new TypeError('"this" is null or not defined');var _=Object(this),S=_.length>>>0;if(S===0)return!1;var P=g|0,V=Math.max(P>=0?P:S-Math.abs(P),0);function te(ie,ve){return ie===ve||typeof ie=="number"&&typeof ve=="number"&&isNaN(ie)&&isNaN(ve)}for(;V<S;){if(te(_[V],h))return!0;V++}return!1}});var Jl={version:"2.18.3"},br=l(ur()),Kr={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},el={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},Ns={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},Bs={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},Wu={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},Ll={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},Ca={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},ji={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Wo={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},tl={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},Ao={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},xu={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},nl={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},qu={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},qo={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},Ea={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},rl={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},Ql={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},ps={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},Lc={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},Lu={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},fr={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},_r={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},Yo={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},Wr={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},Yu={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},Sl={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},Cl=nl,Ko={en:Kr,de:el,it:Ns,id:Bs,ro:Wu,ru:Ll,es:Ca,nl:ji,fr:Wo,pt:Cl,pt_br:xu,pt_pt:nl,zh:tl,zh_tw:Ao,pl:qu,sv:qo,el:Ea,hu:rl,da:Ql,no:ps,fa:Lc,ua:Lu,tr:fr,cz:_r,ja:Yo,fi:Wr,ko:Yu,ky:Sl},il={_globalEditModeEnabled:!1,enableGlobalEditMode(h){let g={...h};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(_=>{this._isRelevantForEdit(_)&&_.pm.enable(g)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(h=>{h.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(h=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(h)},handleLayerAdditionInGlobalEditMode(){let h=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let g in h){let _=h[g];this._isRelevantForEdit(_)&&_.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:h}){this._addedLayersEdit[L.stamp(h)]=h},_isRelevantForEdit(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowEditing}},Ku=il,eu={_globalDragModeEnabled:!1,enableGlobalDragMode(){let h=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},h.forEach(g=>{this._isRelevantForDrag(g)&&g.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let h=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,h.forEach(g=>{g.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let h=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let g in h){let _=h[g];this._isRelevantForDrag(_)&&_.pm.enableLayerDrag()}},_layerAddedDrag({layer:h}){this._addedLayersDrag[L.stamp(h)]=h},_isRelevantForDrag(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.draggable}},vr=eu,Or={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(h=>{this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(h=>{h.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(h){let g=h.target;this._isRelevantForRemoval(g)&&!g.pm.dragging()&&(g.removeFrom(this.map.pm._getContainingLayer()),g.remove(),g instanceof L.LayerGroup?(this._fireRemoveLayerGroup(g),this._fireRemoveLayerGroup(this.map,g)):(g.pm._fireRemove(g),g.pm._fireRemove(this.map,g)))},_isRelevantForRemoval(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let h=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let g in h){let _=h[g];this._isRelevantForRemoval(_)&&(_.pm.enabled()&&_.pm.disable(),_.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:h}){this._addedLayersRemoval[L.stamp(h)]=h}},sl=Or,Sc={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(h=>h instanceof L.Polyline).forEach(h=>{this._isRelevantForRotate(h)&&h.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(h=>h instanceof L.Polyline).forEach(h=>{h.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(h){return h.pm&&h instanceof L.Polyline&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let h=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let g in h){let _=h[g];this._isRelevantForRemoval(_)&&_.pm.enableRotate()}},_layerAddedRotate({layer:h}){this._addedLayersRotate[L.stamp(h)]=h}},tu=Sc,Su=l(ur()),El={_fireDrawStart(h="Draw",g={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},h,g)},_fireDrawEnd(h="Draw",g={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},h,g)},_fireCreate(h,g="Draw",_={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:h,layer:h},g,_)},_fireCenterPlaced(h="Draw",g={}){let _=h==="Draw"?this._layer:void 0,S=h!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:_,layer:S,latlng:this._layer.getLatLng()},h,g)},_fireCut(h,g,_,S="Draw",P={}){this.__fire(h,"pm:cut",{shape:this._shape,layer:g,originalLayer:_},S,P)},_fireEdit(h=this._layer,g="Edit",_={}){this.__fire(h,"pm:edit",{layer:this._layer,shape:this.getShape()},g,_)},_fireEnable(h="Edit",g={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},h,g)},_fireDisable(h="Edit",g={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},h,g)},_fireUpdate(h="Edit",g={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},h,g)},_fireMarkerDragStart(h,g=void 0,_="Edit",S={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g},_,S)},_fireMarkerDrag(h,g=void 0,_="Edit",S={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g},_,S)},_fireMarkerDragEnd(h,g=void 0,_=void 0,S="Edit",P={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g,intersectionReset:_},S,P)},_fireDragStart(h="Edit",g={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},h,g)},_fireDrag(h,g="Edit",_={}){this.__fire(this._layer,"pm:drag",{...h,shape:this.getShape()},g,_)},_fireDragEnd(h="Edit",g={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},h,g)},_fireDragEnable(h="Edit",g={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},h,g)},_fireDragDisable(h="Edit",g={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},h,g)},_fireRemove(h,g=h,_="Edit",S={}){this.__fire(h,"pm:remove",{layer:g,shape:this.getShape()},_,S)},_fireVertexAdded(h,g,_,S="Edit",P={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:h,indexPath:g,latlng:_,shape:this.getShape()},S,P)},_fireVertexRemoved(h,g,_="Edit",S={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:h,indexPath:g,shape:this.getShape()},_,S)},_fireVertexClick(h,g,_="Edit",S={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:h,indexPath:g,shape:this.getShape()},_,S)},_fireIntersect(h,g=this._layer,_="Edit",S={}){this.__fire(g,"pm:intersect",{layer:this._layer,intersection:h,shape:this.getShape()},_,S)},_fireLayerReset(h,g,_="Edit",S={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:h,indexPath:g,shape:this.getShape()},_,S)},_fireChange(h,g="Edit",_={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:h,shape:this.getShape()},g,_)},_fireTextChange(h,g="Edit",_={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:h,shape:this.getShape()},g,_)},_fireTextFocus(h="Edit",g={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},h,g)},_fireTextBlur(h="Edit",g={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},h,g)},_fireSnapDrag(h,g,_="Snapping",S={}){this.__fire(h,"pm:snapdrag",g,_,S)},_fireSnap(h,g,_="Snapping",S={}){this.__fire(h,"pm:snap",g,_,S)},_fireUnsnap(h,g,_="Snapping",S={}){this.__fire(h,"pm:unsnap",g,_,S)},_fireRotationEnable(h,g,_="Rotation",S={}){this.__fire(h,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},_,S)},_fireRotationDisable(h,g="Rotation",_={}){this.__fire(h,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},g,_)},_fireRotationStart(h,g,_="Rotation",S={}){this.__fire(h,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:g},_,S)},_fireRotation(h,g,_,S=this._rotationLayer,P="Rotation",V={}){this.__fire(h,"pm:rotate",{layer:S,helpLayer:this._layer,startAngle:this._startAngle,angle:S.pm.getAngle(),angleDiff:g,oldLatLngs:_,newLatLngs:S.getLatLngs()},P,V)},_fireRotationEnd(h,g,_,S="Rotation",P={}){this.__fire(h,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:g,angle:this._rotationLayer.pm.getAngle(),originLatLngs:_,newLatLngs:this._rotationLayer.getLatLngs()},S,P)},_fireActionClick(h,g,_,S="Toolbar",P={}){this.__fire(this._map,"pm:actionclick",{text:h.text,action:h,btnName:g,button:_},S,P)},_fireButtonClick(h,g,_="Toolbar",S={}){this.__fire(this._map,"pm:buttonclick",{btnName:h,button:g},_,S)},_fireLangChange(h,g,_,S,P="Global",V={}){this.__fire(this.map,"pm:langchange",{oldLang:h,activeLang:g,fallback:_,translations:S},P,V)},_fireGlobalDragModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalEditModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalRemovalModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalCutModeToggled(h="Global",g={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},h,g)},_fireGlobalDrawModeToggled(h="Global",g={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},h,g)},_fireGlobalRotateModeToggled(h="Global",g={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},h,g)},_fireRemoveLayerGroup(h,g=h,_="Edit",S={}){this.__fire(h,"pm:remove",{layer:g,shape:void 0},_,S)},_fireKeyeventEvent(h,g,_,S="Global",P={}){this.__fire(this.map,"pm:keyevent",{event:h,eventType:g,focusOn:_},S,P)},__fire(h,g,_,S,P={}){_=(0,Su.default)(_,P,{source:S}),L.PM.Utils._fireEvent(h,g,_)}},nu=El,Cu=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(h){this.map=h,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),h.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(h){let g="document";this.map.getContainer().contains(h.target)&&(g="map");let _={event:h,eventType:h.type,focusOn:g};this._lastEvents[h.type]=_,this._lastEvents.current=_,this.map.pm._fireKeyeventEvent(h,h.type,g)},_onBlur(h){h.altKey=!1;let g={event:h,eventType:h.type,focusOn:"document"};this._lastEvents[h.type]=g,this._lastEvents.current=g},getLastKeyEvent(h="current"){return this._lastEvents[h]},isShiftKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.shiftKey},isAltKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.altKey},isCtrlKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.ctrlKey},isMetaKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.metaKey},getPressedKey(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.key}}),Fr=Cu,Wi=l(Si());function nr(h){let g=L.PM.activeLang;return(0,Wi.default)(Ko[g],h)||(0,Wi.default)(Ko.en,h)||h}function qi(h){for(let g=0;g<h.length;g+=1){let _=h[g];if(Array.isArray(_)){if(qi(_))return!0}else if(_!=null&&_!=="")return!0}return!1}function Ml(h){return h.reduce((g,_)=>{if(_.length!==0){let S=Array.isArray(_)?Ml(_):_;Array.isArray(S)?S.length!==0&&g.push(S):g.push(S)}return g},[])}function Ma(h,g,_){let S={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:P,b:V,f:te}=S,ie=h.lng,ve=h.lat,Ee=_,Ze=Math.PI,Ve=g*Ze/180,vt=Math.sin(Ve),At=Math.cos(Ve),Kt=(1-te)*Math.tan(ve*Ze/180),yn=1/Math.sqrt(1+Kt*Kt),Sn=Kt*yn,sr=Math.atan2(Kt,At),Ke=yn*vt,nt=1-Ke*Ke,ht=nt*(P*P-V*V)/(V*V),Rt=1+ht/16384*(4096+ht*(-768+ht*(320-175*ht))),wt=ht/1024*(256+ht*(-128+ht*(74-47*ht))),It=Ee/(V*Rt),_e=2*Math.PI,ke,Fe,Re;for(;Math.abs(It-_e)>1e-12;){ke=Math.cos(2*sr+It),Fe=Math.sin(It),Re=Math.cos(It);let rn=wt*Fe*(ke+wt/4*(Re*(-1+2*ke*ke)-wt/6*ke*(-3+4*Fe*Fe)*(-3+4*ke*ke)));_e=It,It=Ee/(V*Rt)+rn}let $e=Sn*Fe-yn*Re*At,Ue=Math.atan2(Sn*Re+yn*Fe*At,(1-te)*Math.sqrt(Ke*Ke+$e*$e)),lt=Math.atan2(Fe*vt,yn*Re-Sn*Fe*At),ut=te/16*nt*(4+te*(4-3*nt)),pt=lt-(1-ut)*te*Ke*(It+ut*Fe*(ke+ut*Re*(-1+2*ke*ke))),St=ie+pt*180/Ze,Ct=Ue*180/Ze;return L.latLng(St,Ct)}function ki(h,g,_,S,P=!0){let V,te,ie,ve=[];for(let Ee=0;Ee<_;Ee+=1){if(P)V=Ee*360/_+S,te=Ma(h,V,g),ie=L.latLng(te.lng,te.lat);else{let Ze=h.lat+Math.cos(2*Ee*Math.PI/_)*g,Ve=h.lng+Math.sin(2*Ee*Math.PI/_)*g;ie=L.latLng(Ze,Ve)}ve.push(ie)}return ve}function Eu(h,g,_){g=(g+360)%360;let S=Math.PI/180,P=180/Math.PI,{R:V}=L.CRS.Earth,te=h.lng*S,ie=h.lat*S,ve=g*S,Ee=Math.sin(ie),Ze=Math.cos(ie),Ve=Math.cos(_/V),vt=Math.sin(_/V),At=Math.asin(Ee*Ve+Ze*vt*Math.cos(ve)),Kt=te+Math.atan2(Math.sin(ve)*vt*Ze,Ve-Ee*Math.sin(At));Kt*=P;let yn=Kt-360,Sn=Kt<-180?Kt+360:Kt;return Kt=Kt>180?yn:Sn,L.latLng([At*P,Kt])}function la(h,g,_){let S=h.latLngToContainerPoint(g),P=h.latLngToContainerPoint(_),V=Math.atan2(P.y-S.y,P.x-S.x)*180/Math.PI+90;return V+=V<0?360:0,V}function ru(h,g,_,S){let P=la(h,g,_);return Eu(g,P,S)}function iu(h,g,_="asc"){if(!g||Object.keys(g).length===0)return(ve,Ee)=>ve-Ee;let S=Object.keys(g),P,V=S.length-1,te={};for(;V>=0;)P=S[V],te[P.toLowerCase()]=g[P],V-=1;function ie(ve){if(ve instanceof L.Marker)return"Marker";if(ve instanceof L.Circle)return"Circle";if(ve instanceof L.CircleMarker)return"CircleMarker";if(ve instanceof L.Rectangle)return"Rectangle";if(ve instanceof L.Polygon)return"Polygon";if(ve instanceof L.Polyline)return"Line"}return(ve,Ee)=>{let Ze,Ve;if(Ze=ie(ve.layer).toLowerCase(),Ve=ie(Ee.layer).toLowerCase(),!Ze||!Ve)return 0;let vt=Ze in te?te[Ze]:Number.MAX_SAFE_INTEGER,At=Ve in te?te[Ve]:Number.MAX_SAFE_INTEGER,Kt=0;return vt<At?Kt=-1:vt>At&&(Kt=1),_==="desc"?Kt*-1:Kt}}function Fo(h,g=h.getLatLngs()){return h instanceof L.Polygon?L.polygon(g).getLatLngs():L.polyline(g).getLatLngs()}function su(h,g){var _,S,P,V;if((S=(_=g.options.crs)==null?void 0:_.projection)!=null&&S.MAX_LATITUDE){let te=(V=(P=g.options.crs)==null?void 0:P.projection)==null?void 0:V.MAX_LATITUDE;h.lat=Math.max(Math.min(te,h.lat),-te)}return h}function ri(h){return h.options.renderer||h._map&&(h._map._getPaneRenderer(h.options.pane)||h._map.options.renderer||h._map._renderer)||h._renderer}var Cc=L.Class.extend({includes:[Ku,vr,sl,tu,nu],initialize(h){this.map=h,this.Draw=new L.PM.Draw(h),this.Toolbar=new L.PM.Toolbar(h),this.Keyboard=Fr(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(h)},setLang(h="en",g,_="en"){if(h=h.trim().toLowerCase(),!/^[a-z]{2}$/.test(h)){let P=h.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(P){let V=[`${P[1]}_${P[2]}`,`${P[1]}`];for(let te of V)if(Ko[te]){h=te;break}}}let S=L.PM.activeLang;g&&(Ko[h]=(0,br.default)(Ko[_],g)),L.PM.activeLang=h,this.map.pm.Toolbar.reinit(),this._fireLangChange(S,h,_,Ko[h])},addControls(h){this.Toolbar.addControls(h)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(h="Polygon",g){h==="Poly"&&(h="Polygon"),this.Draw.enable(h,g)},disableDraw(h="Polygon"){h==="Poly"&&(h="Polygon"),this.Draw.disable(h)},setPathOptions(h,g={}){let _=g.ignoreShapes||[],S=g.merge||!1;this.map.pm.Draw.shapes.forEach(P=>{_.indexOf(P)===-1&&this.map.pm.Draw[P].setPathOptions(h,S)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(h){let g=(0,br.default)(this.globalOptions,h);g.editable&&(g.resizeableCircleMarker=g.editable,delete g.editable);let _=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!g.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),_=!0);let S=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!g.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),S=!0),this.map.pm.Draw.shapes.forEach(P=>{this.map.pm.Draw[P].setOptions(g)}),_&&this.map.pm.Draw.CircleMarker.enable(),S&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(P=>{P.pm.setOptions(g)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=g,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(h=>{h.pm.enabled()&&h.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(h){return this.Draw.Cut.enable(h)},toggleGlobalCutMode(h){return this.Draw.Cut.toggle(h)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(h=!1){let g=L.PM.Utils.findLayers(this.map);if(!h)return g;let _=L.featureGroup();return _._pmTempLayer=!0,g.forEach(S=>{_.addLayer(S)}),_},getGeomanDrawLayers(h=!1){let g=L.PM.Utils.findLayers(this.map).filter(S=>S._drawnByGeoman===!0);if(!h)return g;let _=L.featureGroup();return _._pmTempLayer=!0,g.forEach(S=>{_.addLayer(S)}),_},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(h){this._touchEventCounter===0&&(L.DomEvent.on(h,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(h,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(h){this._touchEventCounter===1&&(L.DomEvent.off(h,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(h,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(h){ri(this.map)._onMouseMove(this._createMouseEvent("mousemove",h))},_canvasTouchClick(h){let g="";h.type==="touchstart"||h.type==="pointerdown"?g="mousedown":(h.type==="touchend"||h.type==="pointerup"||h.type==="touchcancel"||h.type==="pointercancel")&&(g="mouseup"),g&&ri(this.map)._onClick(this._createMouseEvent(g,h))},_createMouseEvent(h,g){let _,S=g.touches[0]||g.changedTouches[0];try{_=new MouseEvent(h,{bubbles:g.bubbles,cancelable:g.cancelable,view:g.view,detail:S.detail,screenX:S.screenX,screenY:S.screenY,clientX:S.clientX,clientY:S.clientY,ctrlKey:g.ctrlKey,altKey:g.altKey,shiftKey:g.shiftKey,metaKey:g.metaKey,button:g.button,relatedTarget:g.relatedTarget})}catch{_=document.createEvent("MouseEvents"),_.initMouseEvent(h,g.bubbles,g.cancelable,g.view,S.detail,S.screenX,S.screenY,S.clientX,S.clientY,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,g.button,g.relatedTarget)}return _}}),xs=Cc,Zo=L.Control.extend({includes:[nu],options:{position:"topleft",disableByOtherButtons:!0},initialize(h){this._button=L.Util.extend({},this.options,h)},onAdd(h){return this._map=h,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let h=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),h?h.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(h){return typeof h=="boolean"?this._button.toggleStatus=h:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(h){h&&h.preventDefault(),!this._button.disabled&&(this._button.onClick(h,{button:this,event:h}),this._clicked(h),this._button.afterClick(h,{button:this,event:h}))},_makeButton(h){let g=this.options.position.indexOf("right")>-1?"pos-right":"",_=L.DomUtil.create("div",`button-container  ${g}`,this._container);h.title&&_.setAttribute("title",h.title);let S=L.DomUtil.create("a","leaflet-buttons-control-button",_);S.setAttribute("role","button"),S.setAttribute("tabindex","0"),S.href="#";let P=L.DomUtil.create("div",`leaflet-pm-actions-container ${g}`,_),V=h.actions,te={cancel:{text:nr("actions.cancel"),title:nr("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:nr("actions.finish"),title:nr("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:nr("actions.removeLastVertex"),title:nr("actions.removeLastVertex"),onClick(){this._map.pm.Draw[h.jsClass]._removeLastVertex()}},finish:{text:nr("actions.finish"),title:nr("actions.finish"),onClick(ve){this._map.pm.Draw[h.jsClass]._finishShape(ve)}}};h._preparedActions=V.map(ve=>{let Ee=typeof ve=="string"?ve:ve.name,Ze;if(te[Ee])Ze=te[Ee];else if(ve.text)Ze=ve;else return Ze;let Ve=L.DomUtil.create("a",`leaflet-pm-action ${g} action-${Ee}`,P);if(Ve.setAttribute("role","button"),Ve.setAttribute("tabindex","0"),Ve.href="#",Ze.title&&(Ve.title=Ze.title),Ve.innerHTML=Ze.text,L.DomEvent.disableClickPropagation(Ve),L.DomEvent.on(Ve,"click",L.DomEvent.stop),Ze._node=Ve,!h.disabled&&Ze.onClick){let vt=At=>{At.preventDefault();let Kt="",{buttons:yn}=this._map.pm.Toolbar;for(let Sn in yn)if(yn[Sn]._button===h){Kt=Sn;break}this._fireActionClick(Ze,Kt,h)};L.DomEvent.addListener(Ve,"click",vt,this),L.DomEvent.addListener(Ve,"click",Ze.onClick,this),L.DomEvent.addListener(Ve,"click",()=>this._updateActiveAction(h))}return Ze}),this._updateActiveAction(h),h.toggleStatus&&L.DomUtil.addClass(_,"active");let ie=L.DomUtil.create("div","control-icon",S);return h.iconUrl&&ie.setAttribute("src",h.iconUrl),h.className&&L.DomUtil.addClass(ie,h.className),L.DomEvent.disableClickPropagation(S),L.DomEvent.on(S,"click",L.DomEvent.stop),h.disabled||(L.DomEvent.addListener(S,"click",this._onBtnClick,this),L.DomEvent.addListener(S,"click",this._triggerClick,this)),h.disabled&&(L.DomUtil.addClass(S,"pm-disabled"),S.setAttribute("aria-disabled","true")),_},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let h="",{buttons:g}=this._map.pm.Toolbar;for(let _ in g)if(g[_]._button===this._button){h=_;break}this._fireButtonClick(h,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let h="pm-disabled",g=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(g,h),g.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(g,h),g.setAttribute("aria-disabled","false"))},_updateActiveAction(h){var g;(g=h._preparedActions)==null||g.forEach(_=>{_!=null&&_._node&&(_.isActive&&_.isActive.call(this)?L.DomUtil.addClass(_._node,"active-action"):L.DomUtil.removeClass(_._node,"active-action"))})}}),ou=Zo;L.Control.PMButton=ou;var Xo=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(h){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(h)},reinit(){let h=this.isVisible;this.removeControls(),this._defineButtons(),h&&this.addControls()},init(h){this.map=h,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(h){let g=`${h}Container`;return this[g]||(this[g]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${h} leaflet-bar leaflet-control`)),this[g]},getButtons(){return this.buttons},addControls(h=this.options){typeof h.editPolygon<"u"&&(h.editMode=h.editPolygon),typeof h.deleteLayer<"u"&&(h.removalMode=h.deleteLayer),L.Util.setOptions(this,h),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let h=this.getButtons(),g={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let _ in h){let S=h[_];L.Util.setOptions(S,{className:g.geomanIcons[_]})}},removeControls(){let h=this.getButtons();for(let g in h)h[g].remove();this.isVisible=!1},toggleControls(h=this.options){this.isVisible?this.removeControls():this.addControls(h)},_addButton(h,g){return this.buttons[h]=g,this.options[h]=!!this.options[h]||!1,this.buttons[h]},triggerClickOnToggledButtons(h){for(let g in this.buttons){let _=this.buttons[g];_._button.disableByOtherButtons&&_!==h&&_.toggled()&&_._triggerClick()}},toggleButton(h,g,_=!0){h==="editPolygon"&&(h="editMode"),h==="deleteLayer"&&(h="removalMode");let S=h;return _&&this.triggerClickOnToggledButtons(this.buttons[S]),this.buttons[S]?this.buttons[S].toggle(g):!1},_defineButtons(){let h={className:"control-icon leaflet-pm-icon-marker",title:nr("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},g={title:nr("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},_={className:"control-icon leaflet-pm-icon-polyline",title:nr("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},S={title:nr("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},P={title:nr("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},V={title:nr("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},te={title:nr("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ie={title:nr("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ve={title:nr("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Ee={title:nr("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Ze={title:nr("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},Ve={className:"control-icon leaflet-pm-icon-text",title:nr("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(vt,At)=>{this.map.pm.Draw[At.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(h)),this._addButton("drawPolyline",new L.Control.PMButton(_)),this._addButton("drawRectangle",new L.Control.PMButton(V)),this._addButton("drawPolygon",new L.Control.PMButton(g)),this._addButton("drawCircle",new L.Control.PMButton(S)),this._addButton("drawCircleMarker",new L.Control.PMButton(P)),this._addButton("drawText",new L.Control.PMButton(Ve)),this._addButton("editMode",new L.Control.PMButton(te)),this._addButton("dragMode",new L.Control.PMButton(ie)),this._addButton("cutPolygon",new L.Control.PMButton(ve)),this._addButton("removalMode",new L.Control.PMButton(Ee)),this._addButton("rotateMode",new L.Control.PMButton(Ze))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let h=this.getButtons(),g=[];this.options.drawControls===!1&&(g=g.concat(Object.keys(h).filter(_=>!h[_]._button.tool))),this.options.editControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="edit"))),this.options.optionsControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="options"))),this.options.customControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="custom")));for(let _ in h)if(this.options[_]&&g.indexOf(_)===-1){let S=h[_]._button.tool;S||(S="draw"),h[_].setPosition(this._getBtnPosition(S)),h[_].addTo(this.map)}},_getBtnPosition(h){return this.options.positions&&this.options.positions[h]?this.options.positions[h]:this.options.position},setBlockPosition(h,g){this.options.positions[h]=g,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(h,g){if(g)typeof g!="object"&&(g={name:g});else throw new TypeError("Button has no name");let _=this._btnNameMapping(h);if(!g.name)throw new TypeError("Button has no name");if(this.buttons[g.name])throw new TypeError("Button with this name already exists");let S=this.map.pm.Draw.createNewDrawInstance(g.name,_);g={...this.buttons[_]._button,...g};let P=this.createCustomControl(g);return{drawInstance:S,control:P}},createCustomControl(h){if(!h.name)throw new TypeError("Button has no name");if(this.buttons[h.name])throw new TypeError("Button with this name already exists");h.onClick||(h.onClick=()=>{}),h.afterClick||(h.afterClick=()=>{}),h.toggle!==!1&&(h.toggle=!0),h.block&&(h.block=h.block.toLowerCase()),(!h.block||h.block==="draw")&&(h.block=""),h.className?h.className.indexOf("control-icon")===-1&&(h.className=`control-icon ${h.className}`):h.className="control-icon";let g={tool:h.block,className:h.className,title:h.title||"",jsClass:h.name,onClick:h.onClick,afterClick:h.afterClick,doToggle:h.toggle,toggleStatus:!1,disableOtherButtons:h.disableOtherButtons??!0,disableByOtherButtons:h.disableByOtherButtons??!0,cssToggle:h.toggle,position:this.options.position,actions:h.actions||[],disabled:!!h.disabled};this.options[h.name]!==!1&&(this.options[h.name]=!0);let _=this._addButton(h.name,new L.Control.PMButton(g));return this.changeControlOrder(),_},controlExists(h){return!!this.getButton(h)},getButton(h){return this.getButtons()[h]},getButtonsInBlock(h){let g={};if(h)for(let _ in this.getButtons()){let S=this.getButtons()[_];(S._button.tool===h||h==="draw"&&!S._button.tool)&&(g[_]=S)}return g},changeControlOrder(h=[]){let g=this._shapeMapping(),_=[];h.forEach(V=>{g[V]?_.push(g[V]):_.push(V)});let S=this.getButtons(),P={};_.forEach(V=>{S[V]&&(P[V]=S[V])}),Object.keys(S).filter(V=>!S[V]._button.tool||S[V]._button.tool==="draw").forEach(V=>{_.indexOf(V)===-1&&(P[V]=S[V])}),Object.keys(S).filter(V=>S[V]._button.tool==="edit").forEach(V=>{_.indexOf(V)===-1&&(P[V]=S[V])}),Object.keys(S).filter(V=>S[V]._button.tool==="options").forEach(V=>{_.indexOf(V)===-1&&(P[V]=S[V])}),Object.keys(S).filter(V=>S[V]._button.tool==="custom").forEach(V=>{_.indexOf(V)===-1&&(P[V]=S[V])}),Object.keys(S).forEach(V=>{_.indexOf(V)===-1&&(P[V]=S[V])}),this.map.pm.Toolbar.buttons=P,this._showHideButtons()},getControlOrder(){let h=this.getButtons(),g=[];for(let _ in h)g.push(_);return g},changeActionsOfControl(h,g){let _=this._btnNameMapping(h);if(!_)throw new TypeError("No name passed");if(!g)throw new TypeError("No actions passed");if(!this.buttons[_])throw new TypeError("Button with this name not exists");this.buttons[_]._button.actions=g,this.changeControlOrder()},setButtonDisabled(h,g){let _=this._btnNameMapping(h);g?this.buttons[_].disable():this.buttons[_].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(h){let g=this._shapeMapping();return g[h]?g[h]:h}}),Pl=Xo,kl=l(ur()),ii={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(h){h.forEach(g=>{if(Array.isArray(g)){this._assignEvents(g);return}g.off("drag",this._handleSnapping,this),g.on("drag",this._handleSnapping,this),g.off("dragend",this._cleanupSnapping,this),g.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(h){if(h){let g=h.target;g._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(g=>{g.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(h){var ie,ve,Ee;let g=h.target;if(g._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((ie=h==null?void 0:h.originalEvent)==null?void 0:ie.altKey)||((Ee=(ve=this._map)==null?void 0:ve.pm)==null?void 0:Ee.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let _=this._calcClosestLayer(g.getLatLng(),this._snapList);if(Object.keys(_).length===0)return!1;let S=_.layer instanceof L.Marker||_.layer instanceof L.CircleMarker||!this.options.snapSegment,P;S?P=_.latlng:P=this._checkPrioritiySnapping(_);let V=this.options.snapDistance,te={marker:g,shape:this._shape,snapLatLng:P,segment:_.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:_.layer,distance:_.distance};if(this._fireSnapDrag(te.marker,te),this._fireSnapDrag(this._layer,te),_.distance<V){g._orgLatLng=g.getLatLng(),g.setLatLng(P),g._snapped=!0,g._snapInfo=te;let Ze=()=>{this._snapLatLng=P,this._fireSnap(g,te),this._fireSnap(this._layer,te)},Ve=this._snapLatLng||{},vt=P||{};(Ve.lat!==vt.lat||Ve.lng!==vt.lng)&&Ze()}else this._snapLatLng&&(this._unsnap(te),g._snapped=!1,g._snapInfo=void 0,this._fireUnsnap(te.marker,te),this._fireUnsnap(this._layer,te));return!0},_createSnapList(){let h=[],g=[],_=this._map;_.off("layerremove",this._handleSnapLayerRemoval,this),_.on("layerremove",this._handleSnapLayerRemoval,this),_.eachLayer(S=>{if((S instanceof L.Polyline||S instanceof L.Marker||S instanceof L.CircleMarker||S instanceof L.ImageOverlay)&&S.options.snapIgnore!==!0){if(S.options.snapIgnore===void 0&&(!L.PM.optIn&&S.options.pmIgnore===!0||L.PM.optIn&&S.options.pmIgnore!==!1))return;(S instanceof L.Circle||S instanceof L.CircleMarker)&&S.pm&&S.pm._hiddenPolyCircle?h.push(S.pm._hiddenPolyCircle):S instanceof L.ImageOverlay&&(S=L.rectangle(S.getBounds())),h.push(S);let P=L.polyline([],{color:"red",pmIgnore:!0});P._pmTempLayer=!0,g.push(P),(S instanceof L.Circle||S instanceof L.CircleMarker)&&g.push(P)}}),h=h.filter(S=>this._layer!==S),h=h.filter(S=>S._latlng||S._latlngs&&qi(S._latlngs)),h=h.filter(S=>!S._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let S=L.polyline([],{color:"red",pmIgnore:!0});S._pmTempLayer=!0,g.push(S)}),this._snapList=h.concat(this._otherSnapLayers)):this._snapList=h,this.debugIndicatorLines=g},_handleSnapLayerRemoval({layer:h}){if(!h._leaflet_id)return;let g=this._snapList.findIndex(_=>_._leaflet_id===h._leaflet_id);g>-1&&this._snapList.splice(g,1)},_calcClosestLayer(h,g){return this._calcClosestLayers(h,g,1)[0]},_calcClosestLayers(h,g,_=1){let S=[],P={};g.forEach((te,ie)=>{var Ee;if(te._parentCopy&&te._parentCopy===this._layer||((Ee=te.getLatLngs)==null?void 0:Ee.call(te).flat(5).length)<2)return;let ve=this._calcLayerDistances(h,te);if(ve.distance=Math.floor(ve.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[ie]){let Ze=L.polyline([],{color:"red",pmIgnore:!0});Ze._pmTempLayer=!0,this.debugIndicatorLines[ie]=Ze}this.debugIndicatorLines[ie].setLatLngs([h,ve.latlng])}_===1&&(P.distance===void 0||ve.distance-5<=P.distance)?(ve.distance+5<P.distance&&(S=[]),P=ve,P.layer=te,S.push(P)):_!==1&&(P={},P=ve,P.layer=te,S.push(P))}),_!==1&&(S=S.sort((te,ie)=>te.distance-ie.distance)),_===-1&&(_=S.length);let V=this._getClosestLayerByPriority(S,_);return L.Util.isArray(V)?V:[V]},_calcLayerDistances(h,g){let _=this._map,S=g instanceof L.Marker||g instanceof L.CircleMarker,P=g instanceof L.Polygon,V=h;if(S){let te=g.getLatLng();return{latlng:{...te},distance:this._getDistance(_,te,V)}}return this._calcLatLngDistances(V,g.getLatLngs(),_,P)},_calcLatLngDistances(h,g,_,S=!1){let P,V,te,ie=ve=>{ve.forEach((Ee,Ze)=>{if(Array.isArray(Ee)){ie(Ee);return}if(this.options.snapSegment){let Ve=Ee,vt;S?vt=Ze+1===ve.length?0:Ze+1:vt=Ze+1===ve.length?void 0:Ze+1;let At=ve[vt];if(At){let Kt=this._getDistanceToSegment(_,h,Ve,At);(V===void 0||Kt<V)&&(V=Kt,te=[Ve,At])}}else{let Ve=this._getDistance(_,h,Ee);(V===void 0||Ve<V)&&(V=Ve,P=Ee)}})};return ie(g),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(_,h,te[0],te[1])},segment:te,distance:V}:{latlng:P,distance:V}},_getClosestLayerByPriority(h,g=1){h=h.sort((te,ie)=>te._leaflet_id-ie._leaflet_id);let _=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],S=this._map.pm.globalOptions.snappingOrder||[],P=0,V={};return S.concat(_).forEach(te=>{V[te]||(P+=1,V[te]=P)}),h.sort(iu("instanceofShape",V)),g===1?h[0]||{}:h.slice(0,g)},_checkPrioritiySnapping(h){let g=this._map,_=h.segment[0],S=h.segment[1],P=h.latlng,V=P;if(this.options.snapVertex){let te=this._getDistance(g,_,P),ie=this._getDistance(g,S,P),ve=te<ie?_:S,Ee=te<ie?te:ie;if(this.options.snapMiddle){let Ve=L.PM.Utils.calcMiddleLatLng(g,_,S),vt=this._getDistance(g,Ve,P);vt<te&&vt<ie&&(ve=Ve,Ee=vt)}let Ze=this.options.snapDistance;Ee<Ze&&(V=ve)}return{...V}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(h,g,_,S){let P=h.getMaxZoom();P===1/0&&(P=h.getZoom());let V=h.project(g,P),te=h.project(_,P),ie=h.project(S,P),ve=L.LineUtil.closestPointOnSegment(V,te,ie);return h.unproject(ve,P)},_getDistanceToSegment(h,g,_,S){let P=h.latLngToContainerPoint(g),V=h.latLngToContainerPoint(_),te=h.latLngToContainerPoint(S);return L.LineUtil.pointToSegmentDistance(P,V,te)},_getDistance(h,g,_){return h.latLngToContainerPoint(g).distanceTo(h.latLngToContainerPoint(_))}},To=ii,Pa=L.Class.extend({includes:[To,nu],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(h){L.Util.setOptions(this,h),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(h){let g=new L.Icon.Default;g.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=g,this._map=h,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(_=>{this[_]=new L.PM.Draw[_](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(h,g=!1){g?this.options.pathOptions=(0,kl.default)(this.options.pathOptions,h):this.options.pathOptions=h},getShapes(){return this.shapes},getShape(){return this._shape},enable(h,g){if(!h)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[h].enable(g)},disable(){this.shapes.forEach(h=>{this[h].disable()})},addControls(){this.shapes.forEach(h=>{this[h].addButton()})},getActiveShape(){let h;return this.shapes.forEach(g=>{this[g]._enabled&&(h=g)}),h},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let h=[];this._map.eachLayer(g=>{(g instanceof L.Polyline||g instanceof L.Marker||g instanceof L.Circle||g instanceof L.CircleMarker||g instanceof L.ImageOverlay)&&(g._pmTempLayer||h.push(g))}),this._enabled?h.forEach(g=>{L.PM.Utils.disablePopup(g)}):h.forEach(g=>{L.PM.Utils.enablePopup(g)})},createNewDrawInstance(h,g){let _=this._getShapeFromBtnName(g);if(this[h])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[_])throw new TypeError(`There is no class L.PM.Draw.${_}`);return this[h]=new L.PM.Draw[_](this._map),this[h].toolbarButtonName=h,this[h]._shape=h,this.shapes.push(h),this[g]&&this[h].setOptions(this[g].options),this[h].setOptions(this[h].options),this[h]},_getShapeFromBtnName(h){let g={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return g[h]?g[h]:this[h]?this[h]._shape:h},_finishLayer(h){h.pm&&(h.pm.setOptions(this.options),h.pm._shape=this._shape,h.pm._map=this._map),this._addDrawnLayerProp(h)},_addDrawnLayerProp(h){h._drawnByGeoman=!0},_setPane(h,g){g==="layerPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":g==="vertexPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":g==="markerPane"&&(h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),Yi=Pa;Yi.Marker=Yi.extend({initialize(h){this._map=h,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(nr("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(g=>{this.isRelevantMarker(g)&&g.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},isRelevantMarker(h){return h instanceof L.Marker&&h.pm&&!h._pmTempLayer&&!h.pm._initTextMarker},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let g=h;g.target=this._hintMarker,this._handleSnapping(g)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(h){if(!h.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=new L.Marker(g,this.options.markerStyle);this._setPane(_,"markerPane"),this._finishLayer(_),_.pm||(_.options.draggable=!1),_.addTo(this._map.pm._getContainingLayer()),_.pm&&this.options.markerEditable?_.pm.enable():_.dragging&&_.dragging.disable(),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var h,g;(h=this.options.markerStyle)!=null&&h.icon&&((g=this._hintMarker)==null||g.setIcon(this.options.markerStyle.icon))}});var z=63710088e-1,we={centimeters:z*100,centimetres:z*100,degrees:z/111325,feet:z*3.28084,inches:z*39.37,kilometers:z/1e3,kilometres:z/1e3,meters:z,metres:z,miles:z/1609.344,millimeters:z*1e3,millimetres:z*1e3,nauticalmiles:z/1852,radians:1,yards:z*1.0936};function Ye(h,g,_){_===void 0&&(_={});var S={type:"Feature"};return(_.id===0||_.id)&&(S.id=_.id),_.bbox&&(S.bbox=_.bbox),S.properties=g||{},S.geometry=h,S}function ct(h,g,_){if(_===void 0&&(_={}),!h)throw new Error("coordinates is required");if(!Array.isArray(h))throw new Error("coordinates must be an Array");if(h.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!hr(h[0])||!hr(h[1]))throw new Error("coordinates must contain numbers");var S={type:"Point",coordinates:h};return Ye(S,g,_)}function Lt(h,g,_){if(_===void 0&&(_={}),h.length<2)throw new Error("coordinates must be an array of two or more positions");var S={type:"LineString",coordinates:h};return Ye(S,g,_)}function jt(h,g){g===void 0&&(g={});var _={type:"FeatureCollection"};return g.id&&(_.id=g.id),g.bbox&&(_.bbox=g.bbox),_.features=h,_}function un(h,g){g===void 0&&(g="kilometers");var _=we[g];if(!_)throw new Error(g+" units is invalid");return h*_}function Tn(h,g){g===void 0&&(g="kilometers");var _=we[g];if(!_)throw new Error(g+" units is invalid");return h/_}function Nn(h){var g=h%(2*Math.PI);return g*180/Math.PI}function er(h){var g=h%360;return g*Math.PI/180}function hr(h){return!isNaN(h)&&h!==null&&!Array.isArray(h)}function Ar(h){var g,_,S={type:"FeatureCollection",features:[]};if(h.type==="Feature"?_=h.geometry:_=h,_.type==="LineString")g=[_.coordinates];else if(_.type==="MultiLineString")g=_.coordinates;else if(_.type==="MultiPolygon")g=[].concat.apply([],_.coordinates);else if(_.type==="Polygon")g=_.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return g.forEach(function(P){g.forEach(function(V){for(var te=0;te<P.length-1;te++)for(var ie=te;ie<V.length-1;ie++)if(!(P===V&&(Math.abs(te-ie)===1||te===0&&ie===P.length-2&&P[te][0]===P[P.length-1][0]&&P[te][1]===P[P.length-1][1]))){var ve=Ci(P[te][0],P[te][1],P[te+1][0],P[te+1][1],V[ie][0],V[ie][1],V[ie+1][0],V[ie+1][1]);ve&&S.features.push(ct([ve[0],ve[1]]))}})}),S}function Ci(h,g,_,S,P,V,te,ie){var ve,Ee,Ze,Ve,vt,At={x:null,y:null,onLine1:!1,onLine2:!1};return ve=(ie-V)*(_-h)-(te-P)*(S-g),ve===0?At.x!==null&&At.y!==null?At:!1:(Ee=g-V,Ze=h-P,Ve=(te-P)*Ee-(ie-V)*Ze,vt=(_-h)*Ee-(S-g)*Ze,Ee=Ve/ve,Ze=vt/ve,At.x=h+Ee*(_-h),At.y=g+Ee*(S-g),Ee>=0&&Ee<=1&&(At.onLine1=!0),Ze>=0&&Ze<=1&&(At.onLine2=!0),At.onLine1&&At.onLine2?[At.x,At.y]:!1)}Yi.Line=Yi.extend({initialize(h){this._map=h,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(nr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_syncHintLine(){let h=this._layer.getLatLngs();if(h.length>0){let g=h[h.length-1];this._hintline.setLatLngs([g,this._hintMarker.getLatLng()])}},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let g=this._layer._defaultShape().slice();g.push(this._hintMarker.getLatLng()),this._change(g)},hasSelfIntersection(){return Ar(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(h,g){let _=L.polyline(this._layer.getLatLngs());h&&(g||(g=this._hintMarker.getLatLng()),_.addLatLng(g));let S=Ar(_.toGeoJSON(15));this._doesSelfIntersect=S.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(S,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(h){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,h.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=this._layer.getLatLngs(),S=_[_.length-1];if(g.equals(_[0])||_.length>0&&g.equals(S)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:g,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(g);let P=this._createMarker(g);this._setTooltipText(),this._setHintLineAfterNewVertex(g),this._fireVertexAdded(P,void 0,g,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(h)},_setHintLineAfterNewVertex(h){this._hintline.setLatLngs([h,h])},_removeLastVertex(){let h=this._markers;if(h.length<=1){this.disable();return}let g=this._layer.getLatLngs(),_=h[h.length-1],{indexPath:S}=L.PM.Utils.findDeepMarkerIndex(h,_);h.pop(),this._layerGroup.removeLayer(_);let P=h[h.length-1],V=g.indexOf(P.getLatLng());g=g.slice(0,V+1),this._layer.setLatLngs(g),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(_,S,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=1)return;let g=L.polyline(h,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this.options.snappable&&this._cleanupSnapping();let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},_createMarker(h){let g=new L.Marker(h,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),g.on("click",this._finishShape,this),g},_setTooltipText(){let{length:h}=this._layer.getLatLngs().flat(),g="";h<=1?g=nr("tooltips.continueLine"):g=nr("tooltips.finishLine"),this._hintMarker.setTooltipContent(g)},_change(h){this._fireChange(h,"Draw")},setStyle(){var h,g;(h=this._layer)==null||h.setStyle(this.options.templineStyle),(g=this._hintline)==null||g.setStyle(this.options.hintlineStyle)}}),Yi.Polygon=Yi.Line.extend({initialize(h){this._map=h,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(h){L.PM.Draw.Line.prototype.enable.call(this,h),this._layer.pm._shape="Polygon"},_createMarker(h){let g=new L.Marker(h,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),this._layer.getLatLngs().flat().length===1?(g.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(g)-1,this.options.snappable&&this._cleanupSnapping()):g.on("click",()=>1),g},_setTooltipText(){let{length:h}=this._layer.getLatLngs().flat(),g="";h<=2?g=nr("tooltips.continueLine"):g=nr("tooltips.finishPoly"),this._hintMarker.setTooltipContent(g)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=2)return;let g=L.polygon(h,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))}}),Yi.Rectangle=Yi.extend({initialize(h){this._map=h,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(h){if(L.Util.setOptions(this,h),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(nr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let g=0;g<2;g+=1){let _=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(_,"vertexPane"),_._pmTempLayer=!0,this._layerGroup.addLayer(_),this._styleMarkers.push(_)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_placeStartingMarkers(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(g),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(_=>{L.DomUtil.addClass(_._icon,"visible"),_.setLatLng(g)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(nr("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let h=this._startMarker.getLatLng();h&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([h,h]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}let g=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(g,"Draw")},_syncRectangleSize(){let h=su(this._startMarker.getLatLng(),this._map),g=su(this._hintMarker.getLatLng(),this._map),_=L.PM.Utils._getRotatedRectangle(h,g,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(_),this.options.cursorMarker&&this._styleMarkers){let S=[];_.forEach(P=>{!P.equals(h,1e-8)&&!P.equals(g,1e-8)&&S.push(P)}),S.forEach((P,V)=>{try{this._styleMarkers[V].setLatLng(P)}catch{}})}},_findCorners(){let h=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(h[0],h[2],this.options.rectangleAngle||0,this._map)},_finishShape(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||_.equals(g))return;let S=L.rectangle([_,g],this.options.pathOptions);if(this.options.rectangleAngle){let V=L.PM.Utils._getRotatedRectangle(_,g,this.options.rectangleAngle||0,this._map);S.setLatLngs(V),S.pm&&S.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(S,"layerPane"),this._finishLayer(S),S.addTo(this._map.pm._getContainingLayer()),this._fireCreate(S);let P=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(P))},setStyle(){var h;(h=this._layer)==null||h.setStyle(this.options.pathOptions)}}),Yi.CircleMarker=Yi.extend({initialize(h){this._map=h,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(h){if(L.Util.setOptions(this,h),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let g={};L.extend(g,this.options.templineStyle),g.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),g),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(nr("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(nr("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.disable()})},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_placeCenterMarker(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let g=this._hintMarker.getLatLng();this._centerMarker.setLatLng(g),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let h=this._centerMarker.getLatLng();h&&(this._layer.setLatLng(h),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(nr("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let h=this._centerMarker.getLatLng(),g=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([h,g])},_syncCircleRadius(){let h=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_)},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}this._handleHintMarkerSnapping();let g=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(g,"Draw")},isRelevantMarker(h){return h instanceof L.CircleMarker&&!(h instanceof L.Circle)&&h.pm&&!h._pmTempLayer},_createMarker(h){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!h.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=new this._BaseCircleClass(g,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(_,"layerPane"),this._finishLayer(_),_.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(_),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(h){h.pm&&this.options.markerEditable&&h.pm.enable()},_finishShape(h){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._centerMarker.getLatLng(),_=this._defaultRadius;if(this.options[this._editableOption]){let te=this._hintMarker.getLatLng();_=this._distanceCalculation(g,te),this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?_=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(_=this.options[this._maxRadiusOption])}let S={...this.options.pathOptions,radius:_},P=new this._BaseCircleClass(g,S);this._setPane(P,"layerPane"),this._finishLayer(P),P.addTo(this._map.pm._getContainingLayer()),P.pm&&P.pm._updateHiddenPolyCircle(),this._fireCreate(P);let V=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(V))},_getNewDestinationOfHintMarker(){let h=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return h;let g=this._centerMarker.getLatLng(),_=this._distanceCalculation(g,h);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?h=ru(this._map,g,h,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(h=ru(this._map,g,h,this._getMaxDistanceInMeter()))}return h},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let h=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),_=this._distanceCalculation(h,g);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var g,_;let h={};L.extend(h,this.options.templineStyle),this.options[this._editableOption]&&(h.radius=0),(g=this._layer)==null||g.setStyle(h),(_=this._hintline)==null||_.setStyle(this.options.hintlineStyle)},_distanceCalculation(h,g){return this._map.project(h).distanceTo(this._map.project(g))}}),Yi.Circle=Yi.CircleMarker.extend({initialize(h){this._map=h,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(h,g){return this._map.distance(h,g)}});function Jr(h){if(!h)throw new Error("coord is required");if(!Array.isArray(h)){if(h.type==="Feature"&&h.geometry!==null&&h.geometry.type==="Point")return h.geometry.coordinates;if(h.type==="Point")return h.coordinates}if(Array.isArray(h)&&h.length>=2&&!Array.isArray(h[0])&&!Array.isArray(h[1]))return h;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function si(h){if(Array.isArray(h))return h;if(h.type==="Feature"){if(h.geometry!==null)return h.geometry.coordinates}else if(h.coordinates)return h.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Ki(h){return h.type==="Feature"?h.geometry:h}function is(h,g){return h.type==="FeatureCollection"?"FeatureCollection":h.type==="GeometryCollection"?"GeometryCollection":h.type==="Feature"&&h.geometry!==null?h.geometry.type:h.type}function Do(h,g,_){if(h!==null)for(var S,P,V,te,ie,ve,Ee,Ze=0,Ve=0,vt,At=h.type,Kt=At==="FeatureCollection",yn=At==="Feature",Sn=Kt?h.features.length:1,sr=0;sr<Sn;sr++){Ee=Kt?h.features[sr].geometry:yn?h.geometry:h,vt=Ee?Ee.type==="GeometryCollection":!1,ie=vt?Ee.geometries.length:1;for(var Ke=0;Ke<ie;Ke++){var nt=0,ht=0;if(te=vt?Ee.geometries[Ke]:Ee,te!==null){ve=te.coordinates;var Rt=te.type;switch(Ze=0,Rt){case null:break;case"Point":if(g(ve,Ve,sr,nt,ht)===!1)return!1;Ve++,nt++;break;case"LineString":case"MultiPoint":for(S=0;S<ve.length;S++){if(g(ve[S],Ve,sr,nt,ht)===!1)return!1;Ve++,Rt==="MultiPoint"&&nt++}Rt==="LineString"&&nt++;break;case"Polygon":case"MultiLineString":for(S=0;S<ve.length;S++){for(P=0;P<ve[S].length-Ze;P++){if(g(ve[S][P],Ve,sr,nt,ht)===!1)return!1;Ve++}Rt==="MultiLineString"&&nt++,Rt==="Polygon"&&ht++}Rt==="Polygon"&&nt++;break;case"MultiPolygon":for(S=0;S<ve.length;S++){for(ht=0,P=0;P<ve[S].length;P++){for(V=0;V<ve[S][P].length-Ze;V++){if(g(ve[S][P][V],Ve,sr,nt,ht)===!1)return!1;Ve++}ht++}nt++}break;case"GeometryCollection":for(S=0;S<te.geometries.length;S++)if(Do(te.geometries[S],g)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Tr(h,g){if(h.type==="Feature")g(h,0);else if(h.type==="FeatureCollection")for(var _=0;_<h.features.length&&g(h.features[_],_)!==!1;_++);}function Rs(h,g,_){var S=_;return Tr(h,function(P,V){V===0&&_===void 0?S=P:S=g(S,P,V)}),S}function Al(h,g){var _,S,P,V,te,ie,ve,Ee,Ze,Ve,vt=0,At=h.type==="FeatureCollection",Kt=h.type==="Feature",yn=At?h.features.length:1;for(_=0;_<yn;_++){for(ie=At?h.features[_].geometry:Kt?h.geometry:h,Ee=At?h.features[_].properties:Kt?h.properties:{},Ze=At?h.features[_].bbox:Kt?h.bbox:void 0,Ve=At?h.features[_].id:Kt?h.id:void 0,ve=ie?ie.type==="GeometryCollection":!1,te=ve?ie.geometries.length:1,P=0;P<te;P++){if(V=ve?ie.geometries[P]:ie,V===null){if(g(null,vt,Ee,Ze,Ve)===!1)return!1;continue}switch(V.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(g(V,vt,Ee,Ze,Ve)===!1)return!1;break}case"GeometryCollection":{for(S=0;S<V.geometries.length;S++)if(g(V.geometries[S],vt,Ee,Ze,Ve)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}vt++}}function Js(h,g){Al(h,function(_,S,P,V,te){var ie=_===null?null:_.type;switch(ie){case null:case"Point":case"LineString":case"Polygon":return g(Ye(_,P,{bbox:V,id:te}),S,0)===!1?!1:void 0}var ve;switch(ie){case"MultiPoint":ve="Point";break;case"MultiLineString":ve="LineString";break;case"MultiPolygon":ve="Polygon";break}for(var Ee=0;Ee<_.coordinates.length;Ee++){var Ze=_.coordinates[Ee],Ve={type:ve,coordinates:Ze};if(g(Ye(Ve,P),S,Ee)===!1)return!1}})}function Mu(h){if(!h)throw new Error("geojson is required");var g=[];return Js(h,function(_){ua(_,g)}),jt(g)}function ua(h,g){var _=[],S=h.geometry;if(S!==null){switch(S.type){case"Polygon":_=si(S);break;case"LineString":_=[si(S)]}_.forEach(function(P){var V=Zu(P,h.properties);V.forEach(function(te){te.id=g.length,g.push(te)})})}}function Zu(h,g){var _=[];return h.reduce(function(S,P){var V=Lt([S,P],g);return V.bbox=ol(S,P),_.push(V),P}),_}function ol(h,g){var _=h[0],S=h[1],P=g[0],V=g[1],te=_<P?_:P,ie=S<V?S:V,ve=_>P?_:P,Ee=S>V?S:V;return[te,ie,ve,Ee]}var al=Mu,ss=l(Go(),1);function ca(h,g){var _={},S=[];if(h.type==="LineString"&&(h=Ye(h)),g.type==="LineString"&&(g=Ye(g)),h.type==="Feature"&&g.type==="Feature"&&h.geometry!==null&&g.geometry!==null&&h.geometry.type==="LineString"&&g.geometry.type==="LineString"&&h.geometry.coordinates.length===2&&g.geometry.coordinates.length===2){var P=Io(h,g);return P&&S.push(P),jt(S)}var V=(0,ss.default)();return V.load(al(g)),Tr(al(h),function(te){Tr(V.search(te),function(ie){var ve=Io(te,ie);if(ve){var Ee=si(ve).join(",");_[Ee]||(_[Ee]=!0,S.push(ve))}})}),jt(S)}function Io(h,g){var _=si(h),S=si(g);if(_.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(S.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var P=_[0][0],V=_[0][1],te=_[1][0],ie=_[1][1],ve=S[0][0],Ee=S[0][1],Ze=S[1][0],Ve=S[1][1],vt=(Ve-Ee)*(te-P)-(Ze-ve)*(ie-V),At=(Ze-ve)*(V-Ee)-(Ve-Ee)*(P-ve),Kt=(te-P)*(V-Ee)-(ie-V)*(P-ve);if(vt===0)return null;var yn=At/vt,Sn=Kt/vt;if(yn>=0&&yn<=1&&Sn>=0&&Sn<=1){var sr=P+yn*(te-P),Ke=V+yn*(ie-V);return ct([sr,Ke])}return null}var po=ca,Tl=l(Go(),1);function Fs(h,g,_){_===void 0&&(_={});var S=Jr(h),P=Jr(g),V=er(P[1]-S[1]),te=er(P[0]-S[0]),ie=er(S[1]),ve=er(P[1]),Ee=Math.pow(Math.sin(V/2),2)+Math.pow(Math.sin(te/2),2)*Math.cos(ie)*Math.cos(ve);return un(2*Math.atan2(Math.sqrt(Ee),Math.sqrt(1-Ee)),_.units)}var Qs=Fs;function eo(h){var g=h[0],_=h[1],S=h[2],P=h[3],V=Qs(h.slice(0,2),[S,_]),te=Qs(h.slice(0,2),[g,P]);if(V>=te){var ie=(_+P)/2;return[g,ie-(S-g)/2,S,ie+(S-g)/2]}else{var ve=(g+S)/2;return[ve-(P-_)/2,_,ve+(P-_)/2,P]}}var Ec=eo;function gs(h){var g=[1/0,1/0,-1/0,-1/0];return Do(h,function(_){g[0]>_[0]&&(g[0]=_[0]),g[1]>_[1]&&(g[1]=_[1]),g[2]<_[0]&&(g[2]=_[0]),g[3]<_[1]&&(g[3]=_[1])}),g}gs.default=gs;var ka=gs;function js(h,g){g===void 0&&(g={});var _=g.precision,S=g.coordinates,P=g.mutate;if(_=_==null||isNaN(_)?6:_,S=S==null||isNaN(S)?3:S,!h)throw new Error("<geojson> is required");if(typeof _!="number")throw new Error("<precision> must be a number");if(typeof S!="number")throw new Error("<coordinates> must be a number");(P===!1||P===void 0)&&(h=JSON.parse(JSON.stringify(h)));var V=Math.pow(10,_);return Do(h,function(te){zs(te,V,S)}),h}function zs(h,g,_){h.length>_&&h.splice(_,h.length);for(var S=0;S<h.length;S++)h[S]=Math.round(h[S]*g)/g;return h}var Aa=js;function Ta(h,g,_){if(_===void 0&&(_={}),_.final===!0)return $s(h,g);var S=Jr(h),P=Jr(g),V=er(S[0]),te=er(P[0]),ie=er(S[1]),ve=er(P[1]),Ee=Math.sin(te-V)*Math.cos(ve),Ze=Math.cos(ie)*Math.sin(ve)-Math.sin(ie)*Math.cos(ve)*Math.cos(te-V);return Nn(Math.atan2(Ee,Ze))}function $s(h,g){var _=Ta(g,h);return _=(_+180)%360,_}function Ls(h,g,_,S){S===void 0&&(S={});var P=Jr(h),V=er(P[0]),te=er(P[1]),ie=er(_),ve=Tn(g,S.units),Ee=Math.asin(Math.sin(te)*Math.cos(ve)+Math.cos(te)*Math.sin(ve)*Math.cos(ie)),Ze=V+Math.atan2(Math.sin(ie)*Math.sin(ve)*Math.cos(te),Math.cos(ve)-Math.sin(te)*Math.sin(Ee)),Ve=Nn(Ze),vt=Nn(Ee);return ct([Ve,vt],S.properties)}function ha(h,g,_){_===void 0&&(_={});var S=ct([1/0,1/0],{dist:1/0}),P=0;return Js(h,function(V){for(var te=si(V),ie=0;ie<te.length-1;ie++){var ve=ct(te[ie]);ve.properties.dist=Qs(g,ve,_);var Ee=ct(te[ie+1]);Ee.properties.dist=Qs(g,Ee,_);var Ze=Qs(ve,Ee,_),Ve=Math.max(ve.properties.dist,Ee.properties.dist),vt=Ta(ve,Ee),At=Ls(g,Ve,vt+90,_),Kt=Ls(g,Ve,vt-90,_),yn=po(Lt([At.geometry.coordinates,Kt.geometry.coordinates]),Lt([ve.geometry.coordinates,Ee.geometry.coordinates])),Sn=null;yn.features.length>0&&(Sn=yn.features[0],Sn.properties.dist=Qs(g,Sn,_),Sn.properties.location=P+Qs(ve,Sn,_)),ve.properties.dist<S.properties.dist&&(S=ve,S.properties.index=ie,S.properties.location=P),Ee.properties.dist<S.properties.dist&&(S=Ee,S.properties.index=ie+1,S.properties.location=P+Ze),Sn&&Sn.properties.dist<S.properties.dist&&(S=Sn,S.properties.index=ie),P+=Ze}}),S}var Oo=ha;function Us(h,g){if(!h)throw new Error("line is required");if(!g)throw new Error("splitter is required");var _=is(h),S=is(g);if(_!=="LineString")throw new Error("line must be LineString");if(S==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(S==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var P=Aa(g,{precision:7});switch(S){case"Point":return Gt(h,P);case"MultiPoint":return bt(h,P);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return bt(h,po(h,P))}}function bt(h,g){var _=[],S=(0,Tl.default)();return Js(g,function(P){if(_.forEach(function(ie,ve){ie.id=ve}),!_.length)_=Gt(h,P).features,_.forEach(function(ie){ie.bbox||(ie.bbox=Ec(ka(ie)))}),S.load(jt(_));else{var V=S.search(P);if(V.features.length){var te=kt(P,V);_=_.filter(function(ie){return ie.id!==te.id}),S.remove(te),Tr(Gt(te,P),function(ie){_.push(ie),S.insert(ie)})}}}),jt(_)}function Gt(h,g){var _=[],S=si(h)[0],P=si(h)[h.geometry.coordinates.length-1];if(kn(S,Jr(g))||kn(P,Jr(g)))return jt([h]);var V=(0,Tl.default)(),te=al(h);V.load(te);var ie=V.search(g);if(!ie.features.length)return jt([h]);var ve=kt(g,ie),Ee=[S],Ze=Rs(te,function(Ve,vt,At){var Kt=si(vt)[1],yn=Jr(g);return At===ve.id?(Ve.push(yn),_.push(Lt(Ve)),kn(yn,Kt)?[yn]:[yn,Kt]):(Ve.push(Kt),Ve)},Ee);return Ze.length>1&&_.push(Lt(Ze)),jt(_)}function kt(h,g){if(!g.features.length)throw new Error("lines must contain features");if(g.features.length===1)return g.features[0];var _,S=1/0;return Tr(g,function(P){var V=Oo(P,h),te=V.properties.dist;te<S&&(_=P,S=te)}),_}function kn(h,g){return h[0]===g[0]&&h[1]===g[1]}var Hn=Us;function pr(h,g,_){if(_===void 0&&(_={}),!h)throw new Error("point is required");if(!g)throw new Error("polygon is required");var S=Jr(h),P=Ki(g),V=P.type,te=g.bbox,ie=P.coordinates;if(te&&oi(S,te)===!1)return!1;V==="Polygon"&&(ie=[ie]);for(var ve=!1,Ee=0;Ee<ie.length&&!ve;Ee++)if(Ai(S,ie[Ee][0],_.ignoreBoundary)){for(var Ze=!1,Ve=1;Ve<ie[Ee].length&&!Ze;)Ai(S,ie[Ee][Ve],!_.ignoreBoundary)&&(Ze=!0),Ve++;Ze||(ve=!0)}return ve}function Ai(h,g,_){var S=!1;g[0][0]===g[g.length-1][0]&&g[0][1]===g[g.length-1][1]&&(g=g.slice(0,g.length-1));for(var P=0,V=g.length-1;P<g.length;V=P++){var te=g[P][0],ie=g[P][1],ve=g[V][0],Ee=g[V][1],Ze=h[1]*(te-ve)+ie*(ve-h[0])+Ee*(h[0]-te)===0&&(te-h[0])*(ve-h[0])<=0&&(ie-h[1])*(Ee-h[1])<=0;if(Ze)return!_;var Ve=ie>h[1]!=Ee>h[1]&&h[0]<(ve-te)*(h[1]-ie)/(Ee-ie)+te;Ve&&(S=!S)}return S}function oi(h,g){return g[0]<=h[0]&&g[1]<=h[1]&&g[2]>=h[0]&&g[3]>=h[1]}function au(h,g,_){_===void 0&&(_={});for(var S=Jr(h),P=si(g),V=0;V<P.length-1;V++){var te=!1;if(_.ignoreEndVertices&&(V===0&&(te="start"),V===P.length-2&&(te="end"),V===0&&V+1===P.length-1&&(te="both")),to(P[V],P[V+1],S,te,typeof _.epsilon>"u"?null:_.epsilon))return!0}return!1}function to(h,g,_,S,P){var V=_[0],te=_[1],ie=h[0],ve=h[1],Ee=g[0],Ze=g[1],Ve=_[0]-ie,vt=_[1]-ve,At=Ee-ie,Kt=Ze-ve,yn=Ve*Kt-vt*At;if(P!==null){if(Math.abs(yn)>P)return!1}else if(yn!==0)return!1;if(S){if(S==="start")return Math.abs(At)>=Math.abs(Kt)?At>0?ie<V&&V<=Ee:Ee<=V&&V<ie:Kt>0?ve<te&&te<=Ze:Ze<=te&&te<ve;if(S==="end")return Math.abs(At)>=Math.abs(Kt)?At>0?ie<=V&&V<Ee:Ee<V&&V<=ie:Kt>0?ve<=te&&te<Ze:Ze<te&&te<=ve;if(S==="both")return Math.abs(At)>=Math.abs(Kt)?At>0?ie<V&&V<Ee:Ee<V&&V<ie:Kt>0?ve<te&&te<Ze:Ze<te&&te<ve}else return Math.abs(At)>=Math.abs(Kt)?At>0?ie<=V&&V<=Ee:Ee<=V&&V<=ie:Kt>0?ve<=te&&te<=Ze:Ze<=te&&te<=ve;return!1}var Ti=au;function da(h,g){var _=Ki(h),S=Ki(g),P=_.type,V=S.type,te=_.coordinates,ie=S.coordinates;switch(P){case"Point":switch(V){case"Point":return fi(te,ie);default:throw new Error("feature2 "+V+" geometry not supported")}case"MultiPoint":switch(V){case"Point":return Da(_,S);case"MultiPoint":return fa(_,S);default:throw new Error("feature2 "+V+" geometry not supported")}case"LineString":switch(V){case"Point":return Ti(S,_,{ignoreEndVertices:!0});case"LineString":return jr(_,S);case"MultiPoint":return pa(_,S);default:throw new Error("feature2 "+V+" geometry not supported")}case"Polygon":switch(V){case"Point":return pr(S,_,{ignoreBoundary:!0});case"LineString":return Jo(_,S);case"Polygon":return Ss(_,S);case"MultiPoint":return ga(_,S);default:throw new Error("feature2 "+V+" geometry not supported")}default:throw new Error("feature1 "+P+" geometry not supported")}}function Da(h,g){var _,S=!1;for(_=0;_<h.coordinates.length;_++)if(fi(h.coordinates[_],g.coordinates)){S=!0;break}return S}function fa(h,g){for(var _=0,S=g.coordinates;_<S.length;_++){for(var P=S[_],V=!1,te=0,ie=h.coordinates;te<ie.length;te++){var ve=ie[te];if(fi(P,ve)){V=!0;break}}if(!V)return!1}return!0}function pa(h,g){for(var _=!1,S=0,P=g.coordinates;S<P.length;S++){var V=P[S];if(Ti(V,h,{ignoreEndVertices:!0})&&(_=!0),!Ti(V,h))return!1}return!!_}function ga(h,g){for(var _=0,S=g.coordinates;_<S.length;_++){var P=S[_];if(!pr(P,h,{ignoreBoundary:!0}))return!1}return!0}function jr(h,g){for(var _=!1,S=0,P=g.coordinates;S<P.length;S++){var V=P[S];if(Ti({type:"Point",coordinates:V},h,{ignoreEndVertices:!0})&&(_=!0),!Ti({type:"Point",coordinates:V},h,{ignoreEndVertices:!1}))return!1}return _}function Jo(h,g){var _=!1,S=0,P=ka(h),V=ka(g);if(!ai(P,V))return!1;for(S;S<g.coordinates.length-1;S++){var te=Zi(g.coordinates[S],g.coordinates[S+1]);if(pr({type:"Point",coordinates:te},h,{ignoreBoundary:!0})){_=!0;break}}return _}function Ss(h,g){if(h.type==="Feature"&&h.geometry===null||g.type==="Feature"&&g.geometry===null)return!1;var _=ka(h),S=ka(g);if(!ai(_,S))return!1;for(var P=Ki(g).coordinates,V=0,te=P;V<te.length;V++)for(var ie=te[V],ve=0,Ee=ie;ve<Ee.length;ve++){var Ze=Ee[ve];if(!pr(Ze,h))return!1}return!0}function ai(h,g){return!(h[0]>g[0]||h[2]<g[2]||h[1]>g[1]||h[3]<g[3])}function fi(h,g){return h[0]===g[0]&&h[1]===g[1]}function Zi(h,g){return[(h[0]+g[0])/2,(h[1]+g[1])/2]}var _i=l(Si()),No=h=>()=>h,go=h=>{let g=h?(_,S)=>S.minus(_).abs().isLessThanOrEqualTo(h):No(!1);return(_,S)=>g(_,S)?0:_.comparedTo(S)};function jo(h){let g=h?(_,S,P,V,te)=>_.exponentiatedBy(2).isLessThanOrEqualTo(V.minus(S).exponentiatedBy(2).plus(te.minus(P).exponentiatedBy(2)).times(h)):No(!1);return(_,S,P)=>{let V=_.x,te=_.y,ie=P.x,ve=P.y,Ee=te.minus(ve).times(S.x.minus(ie)).minus(V.minus(ie).times(S.y.minus(ve)));return g(Ee,V,te,ie,ve)?0:Ee.comparedTo(0)}}var Xu=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ma=Math.ceil,os=Math.floor,bi="[BigNumber Error] ",Vs=bi+"Number primitive has more than 15 significant digits: ",mo=1e14,lr=14,Ia=9007199254740991,Oa=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Qo=1e7,no=1e9;function th(h){var g,_,S,P=Ke.prototype={constructor:Ke,toString:null,valueOf:null},V=new Ke(1),te=20,ie=4,ve=-7,Ee=21,Ze=-1e7,Ve=1e7,vt=!1,At=1,Kt=0,yn={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Sn="0123456789abcdefghijklmnopqrstuvwxyz",sr=!0;function Ke(_e,ke){var Fe,Re,$e,Ue,lt,ut,pt,St,Ct=this;if(!(Ct instanceof Ke))return new Ke(_e,ke);if(ke==null){if(_e&&_e._isBigNumber===!0){Ct.s=_e.s,!_e.c||_e.e>Ve?Ct.c=Ct.e=null:_e.e<Ze?Ct.c=[Ct.e=0]:(Ct.e=_e.e,Ct.c=_e.c.slice());return}if((ut=typeof _e=="number")&&_e*0==0){if(Ct.s=1/_e<0?(_e=-_e,-1):1,_e===~~_e){for(Ue=0,lt=_e;lt>=10;lt/=10,Ue++);Ue>Ve?Ct.c=Ct.e=null:(Ct.e=Ue,Ct.c=[_e]);return}St=String(_e)}else{if(!Xu.test(St=String(_e)))return S(Ct,St,ut);Ct.s=St.charCodeAt(0)==45?(St=St.slice(1),-1):1}(Ue=St.indexOf("."))>-1&&(St=St.replace(".","")),(lt=St.search(/e/i))>0?(Ue<0&&(Ue=lt),Ue+=+St.slice(lt+1),St=St.substring(0,lt)):Ue<0&&(Ue=St.length)}else{if(u(ke,2,Sn.length,"Base"),ke==10&&sr)return Ct=new Ke(_e),wt(Ct,te+Ct.e+1,ie);if(St=String(_e),ut=typeof _e=="number"){if(_e*0!=0)return S(Ct,St,ut,ke);if(Ct.s=1/_e<0?(St=St.slice(1),-1):1,Ke.DEBUG&&St.replace(/^0\.0*|\./,"").length>15)throw Error(Vs+_e)}else Ct.s=St.charCodeAt(0)===45?(St=St.slice(1),-1):1;for(Fe=Sn.slice(0,ke),Ue=lt=0,pt=St.length;lt<pt;lt++)if(Fe.indexOf(Re=St.charAt(lt))<0){if(Re=="."){if(lt>Ue){Ue=pt;continue}}else if(!$e&&(St==St.toUpperCase()&&(St=St.toLowerCase())||St==St.toLowerCase()&&(St=St.toUpperCase()))){$e=!0,lt=-1,Ue=0;continue}return S(Ct,String(_e),ut,ke)}ut=!1,St=_(St,ke,10,Ct.s),(Ue=St.indexOf("."))>-1?St=St.replace(".",""):Ue=St.length}for(lt=0;St.charCodeAt(lt)===48;lt++);for(pt=St.length;St.charCodeAt(--pt)===48;);if(St=St.slice(lt,++pt)){if(pt-=lt,ut&&Ke.DEBUG&&pt>15&&(_e>Ia||_e!==os(_e)))throw Error(Vs+Ct.s*_e);if((Ue=Ue-lt-1)>Ve)Ct.c=Ct.e=null;else if(Ue<Ze)Ct.c=[Ct.e=0];else{if(Ct.e=Ue,Ct.c=[],lt=(Ue+1)%lr,Ue<0&&(lt+=lr),lt<pt){for(lt&&Ct.c.push(+St.slice(0,lt)),pt-=lr;lt<pt;)Ct.c.push(+St.slice(lt,lt+=lr));lt=lr-(St=St.slice(lt)).length}else lt-=pt;for(;lt--;St+="0");Ct.c.push(+St)}}else Ct.c=[Ct.e=0]}Ke.clone=th,Ke.ROUND_UP=0,Ke.ROUND_DOWN=1,Ke.ROUND_CEIL=2,Ke.ROUND_FLOOR=3,Ke.ROUND_HALF_UP=4,Ke.ROUND_HALF_DOWN=5,Ke.ROUND_HALF_EVEN=6,Ke.ROUND_HALF_CEIL=7,Ke.ROUND_HALF_FLOOR=8,Ke.EUCLID=9,Ke.config=Ke.set=function(_e){var ke,Fe;if(_e!=null)if(typeof _e=="object"){if(_e.hasOwnProperty(ke="DECIMAL_PLACES")&&(Fe=_e[ke],u(Fe,0,no,ke),te=Fe),_e.hasOwnProperty(ke="ROUNDING_MODE")&&(Fe=_e[ke],u(Fe,0,8,ke),ie=Fe),_e.hasOwnProperty(ke="EXPONENTIAL_AT")&&(Fe=_e[ke],Fe&&Fe.pop?(u(Fe[0],-1e9,0,ke),u(Fe[1],0,no,ke),ve=Fe[0],Ee=Fe[1]):(u(Fe,-1e9,no,ke),ve=-(Ee=Fe<0?-Fe:Fe))),_e.hasOwnProperty(ke="RANGE"))if(Fe=_e[ke],Fe&&Fe.pop)u(Fe[0],-1e9,-1,ke),u(Fe[1],1,no,ke),Ze=Fe[0],Ve=Fe[1];else if(u(Fe,-1e9,no,ke),Fe)Ze=-(Ve=Fe<0?-Fe:Fe);else throw Error(bi+ke+" cannot be zero: "+Fe);if(_e.hasOwnProperty(ke="CRYPTO"))if(Fe=_e[ke],Fe===!!Fe)if(Fe)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))vt=Fe;else throw vt=!Fe,Error(bi+"crypto unavailable");else vt=Fe;else throw Error(bi+ke+" not true or false: "+Fe);if(_e.hasOwnProperty(ke="MODULO_MODE")&&(Fe=_e[ke],u(Fe,0,9,ke),At=Fe),_e.hasOwnProperty(ke="POW_PRECISION")&&(Fe=_e[ke],u(Fe,0,no,ke),Kt=Fe),_e.hasOwnProperty(ke="FORMAT"))if(Fe=_e[ke],typeof Fe=="object")yn=Fe;else throw Error(bi+ke+" not an object: "+Fe);if(_e.hasOwnProperty(ke="ALPHABET"))if(Fe=_e[ke],typeof Fe=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Fe))sr=Fe.slice(0,10)=="0123456789",Sn=Fe;else throw Error(bi+ke+" invalid: "+Fe)}else throw Error(bi+"Object expected: "+_e);return{DECIMAL_PLACES:te,ROUNDING_MODE:ie,EXPONENTIAL_AT:[ve,Ee],RANGE:[Ze,Ve],CRYPTO:vt,MODULO_MODE:At,POW_PRECISION:Kt,FORMAT:yn,ALPHABET:Sn}},Ke.isBigNumber=function(_e){if(!_e||_e._isBigNumber!==!0)return!1;if(!Ke.DEBUG)return!0;var ke,Fe,Re=_e.c,$e=_e.e,Ue=_e.s;e:if({}.toString.call(Re)=="[object Array]"){if((Ue===1||Ue===-1)&&$e>=-1e9&&$e<=no&&$e===os($e)){if(Re[0]===0){if($e===0&&Re.length===1)return!0;break e}if(ke=($e+1)%lr,ke<1&&(ke+=lr),String(Re[0]).length==ke){for(ke=0;ke<Re.length;ke++)if(Fe=Re[ke],Fe<0||Fe>=mo||Fe!==os(Fe))break e;if(Fe!==0)return!0}}}else if(Re===null&&$e===null&&(Ue===null||Ue===1||Ue===-1))return!0;throw Error(bi+"Invalid BigNumber: "+_e)},Ke.maximum=Ke.max=function(){return ht(arguments,-1)},Ke.minimum=Ke.min=function(){return ht(arguments,1)},Ke.random=function(){var _e=9007199254740992,ke=Math.random()*_e&2097151?function(){return os(Math.random()*_e)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Fe){var Re,$e,Ue,lt,ut,pt=0,St=[],Ct=new Ke(V);if(Fe==null?Fe=te:u(Fe,0,no),lt=ma(Fe/lr),vt)if(crypto.getRandomValues){for(Re=crypto.getRandomValues(new Uint32Array(lt*=2));pt<lt;)ut=Re[pt]*131072+(Re[pt+1]>>>11),ut>=9e15?($e=crypto.getRandomValues(new Uint32Array(2)),Re[pt]=$e[0],Re[pt+1]=$e[1]):(St.push(ut%1e14),pt+=2);pt=lt/2}else if(crypto.randomBytes){for(Re=crypto.randomBytes(lt*=7);pt<lt;)ut=(Re[pt]&31)*281474976710656+Re[pt+1]*1099511627776+Re[pt+2]*4294967296+Re[pt+3]*16777216+(Re[pt+4]<<16)+(Re[pt+5]<<8)+Re[pt+6],ut>=9e15?crypto.randomBytes(7).copy(Re,pt):(St.push(ut%1e14),pt+=7);pt=lt/7}else throw vt=!1,Error(bi+"crypto unavailable");if(!vt)for(;pt<lt;)ut=ke(),ut<9e15&&(St[pt++]=ut%1e14);for(lt=St[--pt],Fe%=lr,lt&&Fe&&(ut=Oa[lr-Fe],St[pt]=os(lt/ut)*ut);St[pt]===0;St.pop(),pt--);if(pt<0)St=[Ue=0];else{for(Ue=-1;St[0]===0;St.splice(0,1),Ue-=lr);for(pt=1,ut=St[0];ut>=10;ut/=10,pt++);pt<lr&&(Ue-=lr-pt)}return Ct.e=Ue,Ct.c=St,Ct}}(),Ke.sum=function(){for(var _e=1,ke=arguments,Fe=new Ke(ke[0]);_e<ke.length;)Fe=Fe.plus(ke[_e++]);return Fe},_=function(){var _e="0123456789";function ke(Fe,Re,$e,Ue){for(var lt,ut=[0],pt,St=0,Ct=Fe.length;St<Ct;){for(pt=ut.length;pt--;ut[pt]*=Re);for(ut[0]+=Ue.indexOf(Fe.charAt(St++)),lt=0;lt<ut.length;lt++)ut[lt]>$e-1&&(ut[lt+1]==null&&(ut[lt+1]=0),ut[lt+1]+=ut[lt]/$e|0,ut[lt]%=$e)}return ut.reverse()}return function(Fe,Re,$e,Ue,lt){var ut,pt,St,Ct,rn,Bn,Un,Xn,ei=Fe.indexOf("."),pi=te,zr=ie;for(ei>=0&&(Ct=Kt,Kt=0,Fe=Fe.replace(".",""),Xn=new Ke(Re),Bn=Xn.pow(Fe.length-ei),Kt=Ct,Xn.c=ke(H(Es(Bn.c),Bn.e,"0"),10,$e,_e),Xn.e=Xn.c.length),Un=ke(Fe,Re,$e,lt?(ut=Sn,_e):(ut=_e,Sn)),St=Ct=Un.length;Un[--Ct]==0;Un.pop());if(!Un[0])return ut.charAt(0);if(ei<0?--St:(Bn.c=Un,Bn.e=St,Bn.s=Ue,Bn=g(Bn,Xn,pi,zr,$e),Un=Bn.c,rn=Bn.r,St=Bn.e),pt=St+pi+1,ei=Un[pt],Ct=$e/2,rn=rn||pt<0||Un[pt+1]!=null,rn=zr<4?(ei!=null||rn)&&(zr==0||zr==(Bn.s<0?3:2)):ei>Ct||ei==Ct&&(zr==4||rn||zr==6&&Un[pt-1]&1||zr==(Bn.s<0?8:7)),pt<1||!Un[0])Fe=rn?H(ut.charAt(1),-pi,ut.charAt(0)):ut.charAt(0);else{if(Un.length=pt,rn)for(--$e;++Un[--pt]>$e;)Un[pt]=0,pt||(++St,Un=[1].concat(Un));for(Ct=Un.length;!Un[--Ct];);for(ei=0,Fe="";ei<=Ct;Fe+=ut.charAt(Un[ei++]));Fe=H(Fe,St,ut.charAt(0))}return Fe}}(),g=function(){function _e(Re,$e,Ue){var lt,ut,pt,St,Ct=0,rn=Re.length,Bn=$e%Qo,Un=$e/Qo|0;for(Re=Re.slice();rn--;)pt=Re[rn]%Qo,St=Re[rn]/Qo|0,lt=Un*pt+St*Bn,ut=Bn*pt+lt%Qo*Qo+Ct,Ct=(ut/Ue|0)+(lt/Qo|0)+Un*St,Re[rn]=ut%Ue;return Ct&&(Re=[Ct].concat(Re)),Re}function ke(Re,$e,Ue,lt){var ut,pt;if(Ue!=lt)pt=Ue>lt?1:-1;else for(ut=pt=0;ut<Ue;ut++)if(Re[ut]!=$e[ut]){pt=Re[ut]>$e[ut]?1:-1;break}return pt}function Fe(Re,$e,Ue,lt){for(var ut=0;Ue--;)Re[Ue]-=ut,ut=Re[Ue]<$e[Ue]?1:0,Re[Ue]=ut*lt+Re[Ue]-$e[Ue];for(;!Re[0]&&Re.length>1;Re.splice(0,1));}return function(Re,$e,Ue,lt,ut){var pt,St,Ct,rn,Bn,Un,Xn,ei,pi,zr,wi,bo,Qu,ya,Md,ul,Pc,ba=Re.s==$e.s?1:-1,Gs=Re.c,Xi=$e.c;if(!Gs||!Gs[0]||!Xi||!Xi[0])return new Ke(!Re.s||!$e.s||(Gs?Xi&&Gs[0]==Xi[0]:!Xi)?NaN:Gs&&Gs[0]==0||!Xi?ba*0:ba/0);for(ei=new Ke(ba),pi=ei.c=[],St=Re.e-$e.e,ba=Ue+St+1,ut||(ut=mo,St=Cs(Re.e/lr)-Cs($e.e/lr),ba=ba/lr|0),Ct=0;Xi[Ct]==(Gs[Ct]||0);Ct++);if(Xi[Ct]>(Gs[Ct]||0)&&St--,ba<0)pi.push(1),rn=!0;else{for(ya=Gs.length,ul=Xi.length,Ct=0,ba+=2,Bn=os(ut/(Xi[0]+1)),Bn>1&&(Xi=_e(Xi,Bn,ut),Gs=_e(Gs,Bn,ut),ul=Xi.length,ya=Gs.length),Qu=ul,zr=Gs.slice(0,ul),wi=zr.length;wi<ul;zr[wi++]=0);Pc=Xi.slice(),Pc=[0].concat(Pc),Md=Xi[0],Xi[1]>=ut/2&&Md++;do{if(Bn=0,pt=ke(Xi,zr,ul,wi),pt<0){if(bo=zr[0],ul!=wi&&(bo=bo*ut+(zr[1]||0)),Bn=os(bo/Md),Bn>1)for(Bn>=ut&&(Bn=ut-1),Un=_e(Xi,Bn,ut),Xn=Un.length,wi=zr.length;ke(Un,zr,Xn,wi)==1;)Bn--,Fe(Un,ul<Xn?Pc:Xi,Xn,ut),Xn=Un.length,pt=1;else Bn==0&&(pt=Bn=1),Un=Xi.slice(),Xn=Un.length;if(Xn<wi&&(Un=[0].concat(Un)),Fe(zr,Un,wi,ut),wi=zr.length,pt==-1)for(;ke(Xi,zr,ul,wi)<1;)Bn++,Fe(zr,ul<wi?Pc:Xi,wi,ut),wi=zr.length}else pt===0&&(Bn++,zr=[0]);pi[Ct++]=Bn,zr[0]?zr[wi++]=Gs[Qu]||0:(zr=[Gs[Qu]],wi=1)}while((Qu++<ya||zr[0]!=null)&&ba--);rn=zr[0]!=null,pi[0]||pi.splice(0,1)}if(ut==mo){for(Ct=1,ba=pi[0];ba>=10;ba/=10,Ct++);wt(ei,Ue+(ei.e=Ct+St*lr-1)+1,lt,rn)}else ei.e=St,ei.r=+rn;return ei}}();function nt(_e,ke,Fe,Re){var $e,Ue,lt,ut,pt;if(Fe==null?Fe=ie:u(Fe,0,8),!_e.c)return _e.toString();if($e=_e.c[0],lt=_e.e,ke==null)pt=Es(_e.c),pt=Re==1||Re==2&&(lt<=ve||lt>=Ee)?M(pt,lt):H(pt,lt,"0");else if(_e=wt(new Ke(_e),ke,Fe),Ue=_e.e,pt=Es(_e.c),ut=pt.length,Re==1||Re==2&&(ke<=Ue||Ue<=ve)){for(;ut<ke;pt+="0",ut++);pt=M(pt,Ue)}else if(ke-=lt,pt=H(pt,Ue,"0"),Ue+1>ut){if(--ke>0)for(pt+=".";ke--;pt+="0");}else if(ke+=Ue-ut,ke>0)for(Ue+1==ut&&(pt+=".");ke--;pt+="0");return _e.s<0&&$e?"-"+pt:pt}function ht(_e,ke){for(var Fe,Re,$e=1,Ue=new Ke(_e[0]);$e<_e.length;$e++)Re=new Ke(_e[$e]),(!Re.s||(Fe=ea(Ue,Re))===ke||Fe===0&&Ue.s===ke)&&(Ue=Re);return Ue}function Rt(_e,ke,Fe){for(var Re=1,$e=ke.length;!ke[--$e];ke.pop());for($e=ke[0];$e>=10;$e/=10,Re++);return(Fe=Re+Fe*lr-1)>Ve?_e.c=_e.e=null:Fe<Ze?_e.c=[_e.e=0]:(_e.e=Fe,_e.c=ke),_e}S=function(){var _e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,ke=/^([^.]+)\.$/,Fe=/^\.([^.]+)$/,Re=/^-?(Infinity|NaN)$/,$e=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Ue,lt,ut,pt){var St,Ct=ut?lt:lt.replace($e,"");if(Re.test(Ct))Ue.s=isNaN(Ct)?null:Ct<0?-1:1;else{if(!ut&&(Ct=Ct.replace(_e,function(rn,Bn,Un){return St=(Un=Un.toLowerCase())=="x"?16:Un=="b"?2:8,!pt||pt==St?Bn:rn}),pt&&(St=pt,Ct=Ct.replace(ke,"$1").replace(Fe,"0.$1")),lt!=Ct))return new Ke(Ct,St);if(Ke.DEBUG)throw Error(bi+"Not a"+(pt?" base "+pt:"")+" number: "+lt);Ue.s=null}Ue.c=Ue.e=null}}();function wt(_e,ke,Fe,Re){var $e,Ue,lt,ut,pt,St,Ct,rn=_e.c,Bn=Oa;if(rn){e:{for($e=1,ut=rn[0];ut>=10;ut/=10,$e++);if(Ue=ke-$e,Ue<0)Ue+=lr,lt=ke,pt=rn[St=0],Ct=os(pt/Bn[$e-lt-1]%10);else if(St=ma((Ue+1)/lr),St>=rn.length)if(Re){for(;rn.length<=St;rn.push(0));pt=Ct=0,$e=1,Ue%=lr,lt=Ue-lr+1}else break e;else{for(pt=ut=rn[St],$e=1;ut>=10;ut/=10,$e++);Ue%=lr,lt=Ue-lr+$e,Ct=lt<0?0:os(pt/Bn[$e-lt-1]%10)}if(Re=Re||ke<0||rn[St+1]!=null||(lt<0?pt:pt%Bn[$e-lt-1]),Re=Fe<4?(Ct||Re)&&(Fe==0||Fe==(_e.s<0?3:2)):Ct>5||Ct==5&&(Fe==4||Re||Fe==6&&(Ue>0?lt>0?pt/Bn[$e-lt]:0:rn[St-1])%10&1||Fe==(_e.s<0?8:7)),ke<1||!rn[0])return rn.length=0,Re?(ke-=_e.e+1,rn[0]=Bn[(lr-ke%lr)%lr],_e.e=-ke||0):rn[0]=_e.e=0,_e;if(Ue==0?(rn.length=St,ut=1,St--):(rn.length=St+1,ut=Bn[lr-Ue],rn[St]=lt>0?os(pt/Bn[$e-lt]%Bn[lt])*ut:0),Re)for(;;)if(St==0){for(Ue=1,lt=rn[0];lt>=10;lt/=10,Ue++);for(lt=rn[0]+=ut,ut=1;lt>=10;lt/=10,ut++);Ue!=ut&&(_e.e++,rn[0]==mo&&(rn[0]=1));break}else{if(rn[St]+=ut,rn[St]!=mo)break;rn[St--]=0,ut=1}for(Ue=rn.length;rn[--Ue]===0;rn.pop());}_e.e>Ve?_e.c=_e.e=null:_e.e<Ze&&(_e.c=[_e.e=0])}return _e}function It(_e){var ke,Fe=_e.e;return Fe===null?_e.toString():(ke=Es(_e.c),ke=Fe<=ve||Fe>=Ee?M(ke,Fe):H(ke,Fe,"0"),_e.s<0?"-"+ke:ke)}return P.absoluteValue=P.abs=function(){var _e=new Ke(this);return _e.s<0&&(_e.s=1),_e},P.comparedTo=function(_e,ke){return ea(this,new Ke(_e,ke))},P.decimalPlaces=P.dp=function(_e,ke){var Fe,Re,$e,Ue=this;if(_e!=null)return u(_e,0,no),ke==null?ke=ie:u(ke,0,8),wt(new Ke(Ue),_e+Ue.e+1,ke);if(!(Fe=Ue.c))return null;if(Re=(($e=Fe.length-1)-Cs(this.e/lr))*lr,$e=Fe[$e])for(;$e%10==0;$e/=10,Re--);return Re<0&&(Re=0),Re},P.dividedBy=P.div=function(_e,ke){return g(this,new Ke(_e,ke),te,ie)},P.dividedToIntegerBy=P.idiv=function(_e,ke){return g(this,new Ke(_e,ke),0,1)},P.exponentiatedBy=P.pow=function(_e,ke){var Fe,Re,$e,Ue,lt,ut,pt,St,Ct,rn=this;if(_e=new Ke(_e),_e.c&&!_e.isInteger())throw Error(bi+"Exponent not an integer: "+It(_e));if(ke!=null&&(ke=new Ke(ke)),ut=_e.e>14,!rn.c||!rn.c[0]||rn.c[0]==1&&!rn.e&&rn.c.length==1||!_e.c||!_e.c[0])return Ct=new Ke(Math.pow(+It(rn),ut?_e.s*(2-y(_e)):+It(_e))),ke?Ct.mod(ke):Ct;if(pt=_e.s<0,ke){if(ke.c?!ke.c[0]:!ke.s)return new Ke(NaN);Re=!pt&&rn.isInteger()&&ke.isInteger(),Re&&(rn=rn.mod(ke))}else{if(_e.e>9&&(rn.e>0||rn.e<-1||(rn.e==0?rn.c[0]>1||ut&&rn.c[1]>=24e7:rn.c[0]<8e13||ut&&rn.c[0]<=9999975e7)))return Ue=rn.s<0&&y(_e)?-0:0,rn.e>-1&&(Ue=1/Ue),new Ke(pt?1/Ue:Ue);Kt&&(Ue=ma(Kt/lr+2))}for(ut?(Fe=new Ke(.5),pt&&(_e.s=1),St=y(_e)):($e=Math.abs(+It(_e)),St=$e%2),Ct=new Ke(V);;){if(St){if(Ct=Ct.times(rn),!Ct.c)break;Ue?Ct.c.length>Ue&&(Ct.c.length=Ue):Re&&(Ct=Ct.mod(ke))}if($e){if($e=os($e/2),$e===0)break;St=$e%2}else if(_e=_e.times(Fe),wt(_e,_e.e+1,1),_e.e>14)St=y(_e);else{if($e=+It(_e),$e===0)break;St=$e%2}rn=rn.times(rn),Ue?rn.c&&rn.c.length>Ue&&(rn.c.length=Ue):Re&&(rn=rn.mod(ke))}return Re?Ct:(pt&&(Ct=V.div(Ct)),ke?Ct.mod(ke):Ue?wt(Ct,Kt,ie,lt):Ct)},P.integerValue=function(_e){var ke=new Ke(this);return _e==null?_e=ie:u(_e,0,8),wt(ke,ke.e+1,_e)},P.isEqualTo=P.eq=function(_e,ke){return ea(this,new Ke(_e,ke))===0},P.isFinite=function(){return!!this.c},P.isGreaterThan=P.gt=function(_e,ke){return ea(this,new Ke(_e,ke))>0},P.isGreaterThanOrEqualTo=P.gte=function(_e,ke){return(ke=ea(this,new Ke(_e,ke)))===1||ke===0},P.isInteger=function(){return!!this.c&&Cs(this.e/lr)>this.c.length-2},P.isLessThan=P.lt=function(_e,ke){return ea(this,new Ke(_e,ke))<0},P.isLessThanOrEqualTo=P.lte=function(_e,ke){return(ke=ea(this,new Ke(_e,ke)))===-1||ke===0},P.isNaN=function(){return!this.s},P.isNegative=function(){return this.s<0},P.isPositive=function(){return this.s>0},P.isZero=function(){return!!this.c&&this.c[0]==0},P.minus=function(_e,ke){var Fe,Re,$e,Ue,lt=this,ut=lt.s;if(_e=new Ke(_e,ke),ke=_e.s,!ut||!ke)return new Ke(NaN);if(ut!=ke)return _e.s=-ke,lt.plus(_e);var pt=lt.e/lr,St=_e.e/lr,Ct=lt.c,rn=_e.c;if(!pt||!St){if(!Ct||!rn)return Ct?(_e.s=-ke,_e):new Ke(rn?lt:NaN);if(!Ct[0]||!rn[0])return rn[0]?(_e.s=-ke,_e):new Ke(Ct[0]?lt:ie==3?-0:0)}if(pt=Cs(pt),St=Cs(St),Ct=Ct.slice(),ut=pt-St){for((Ue=ut<0)?(ut=-ut,$e=Ct):(St=pt,$e=rn),$e.reverse(),ke=ut;ke--;$e.push(0));$e.reverse()}else for(Re=(Ue=(ut=Ct.length)<(ke=rn.length))?ut:ke,ut=ke=0;ke<Re;ke++)if(Ct[ke]!=rn[ke]){Ue=Ct[ke]<rn[ke];break}if(Ue&&($e=Ct,Ct=rn,rn=$e,_e.s=-_e.s),ke=(Re=rn.length)-(Fe=Ct.length),ke>0)for(;ke--;Ct[Fe++]=0);for(ke=mo-1;Re>ut;){if(Ct[--Re]<rn[Re]){for(Fe=Re;Fe&&!Ct[--Fe];Ct[Fe]=ke);--Ct[Fe],Ct[Re]+=mo}Ct[Re]-=rn[Re]}for(;Ct[0]==0;Ct.splice(0,1),--St);return Ct[0]?Rt(_e,Ct,St):(_e.s=ie==3?-1:1,_e.c=[_e.e=0],_e)},P.modulo=P.mod=function(_e,ke){var Fe,Re,$e=this;return _e=new Ke(_e,ke),!$e.c||!_e.s||_e.c&&!_e.c[0]?new Ke(NaN):!_e.c||$e.c&&!$e.c[0]?new Ke($e):(At==9?(Re=_e.s,_e.s=1,Fe=g($e,_e,0,3),_e.s=Re,Fe.s*=Re):Fe=g($e,_e,0,At),_e=$e.minus(Fe.times(_e)),!_e.c[0]&&At==1&&(_e.s=$e.s),_e)},P.multipliedBy=P.times=function(_e,ke){var Fe,Re,$e,Ue,lt,ut,pt,St,Ct,rn,Bn,Un,Xn,ei,pi,zr=this,wi=zr.c,bo=(_e=new Ke(_e,ke)).c;if(!wi||!bo||!wi[0]||!bo[0])return!zr.s||!_e.s||wi&&!wi[0]&&!bo||bo&&!bo[0]&&!wi?_e.c=_e.e=_e.s=null:(_e.s*=zr.s,!wi||!bo?_e.c=_e.e=null:(_e.c=[0],_e.e=0)),_e;for(Re=Cs(zr.e/lr)+Cs(_e.e/lr),_e.s*=zr.s,pt=wi.length,rn=bo.length,pt<rn&&(Xn=wi,wi=bo,bo=Xn,$e=pt,pt=rn,rn=$e),$e=pt+rn,Xn=[];$e--;Xn.push(0));for(ei=mo,pi=Qo,$e=rn;--$e>=0;){for(Fe=0,Bn=bo[$e]%pi,Un=bo[$e]/pi|0,lt=pt,Ue=$e+lt;Ue>$e;)St=wi[--lt]%pi,Ct=wi[lt]/pi|0,ut=Un*St+Ct*Bn,St=Bn*St+ut%pi*pi+Xn[Ue]+Fe,Fe=(St/ei|0)+(ut/pi|0)+Un*Ct,Xn[Ue--]=St%ei;Xn[Ue]=Fe}return Fe?++Re:Xn.splice(0,1),Rt(_e,Xn,Re)},P.negated=function(){var _e=new Ke(this);return _e.s=-_e.s||null,_e},P.plus=function(_e,ke){var Fe,Re=this,$e=Re.s;if(_e=new Ke(_e,ke),ke=_e.s,!$e||!ke)return new Ke(NaN);if($e!=ke)return _e.s=-ke,Re.minus(_e);var Ue=Re.e/lr,lt=_e.e/lr,ut=Re.c,pt=_e.c;if(!Ue||!lt){if(!ut||!pt)return new Ke($e/0);if(!ut[0]||!pt[0])return pt[0]?_e:new Ke(ut[0]?Re:$e*0)}if(Ue=Cs(Ue),lt=Cs(lt),ut=ut.slice(),$e=Ue-lt){for($e>0?(lt=Ue,Fe=pt):($e=-$e,Fe=ut),Fe.reverse();$e--;Fe.push(0));Fe.reverse()}for($e=ut.length,ke=pt.length,$e-ke<0&&(Fe=pt,pt=ut,ut=Fe,ke=$e),$e=0;ke;)$e=(ut[--ke]=ut[ke]+pt[ke]+$e)/mo|0,ut[ke]=mo===ut[ke]?0:ut[ke]%mo;return $e&&(ut=[$e].concat(ut),++lt),Rt(_e,ut,lt)},P.precision=P.sd=function(_e,ke){var Fe,Re,$e,Ue=this;if(_e!=null&&_e!==!!_e)return u(_e,1,no),ke==null?ke=ie:u(ke,0,8),wt(new Ke(Ue),_e,ke);if(!(Fe=Ue.c))return null;if($e=Fe.length-1,Re=$e*lr+1,$e=Fe[$e]){for(;$e%10==0;$e/=10,Re--);for($e=Fe[0];$e>=10;$e/=10,Re++);}return _e&&Ue.e+1>Re&&(Re=Ue.e+1),Re},P.shiftedBy=function(_e){return u(_e,-9007199254740991,Ia),this.times("1e"+_e)},P.squareRoot=P.sqrt=function(){var _e,ke,Fe,Re,$e,Ue=this,lt=Ue.c,ut=Ue.s,pt=Ue.e,St=te+4,Ct=new Ke("0.5");if(ut!==1||!lt||!lt[0])return new Ke(!ut||ut<0&&(!lt||lt[0])?NaN:lt?Ue:1/0);if(ut=Math.sqrt(+It(Ue)),ut==0||ut==1/0?(ke=Es(lt),(ke.length+pt)%2==0&&(ke+="0"),ut=Math.sqrt(+ke),pt=Cs((pt+1)/2)-(pt<0||pt%2),ut==1/0?ke="5e"+pt:(ke=ut.toExponential(),ke=ke.slice(0,ke.indexOf("e")+1)+pt),Fe=new Ke(ke)):Fe=new Ke(ut+""),Fe.c[0]){for(pt=Fe.e,ut=pt+St,ut<3&&(ut=0);;)if($e=Fe,Fe=Ct.times($e.plus(g(Ue,$e,St,1))),Es($e.c).slice(0,ut)===(ke=Es(Fe.c)).slice(0,ut))if(Fe.e<pt&&--ut,ke=ke.slice(ut-3,ut+1),ke=="9999"||!Re&&ke=="4999"){if(!Re&&(wt($e,$e.e+te+2,0),$e.times($e).eq(Ue))){Fe=$e;break}St+=4,ut+=4,Re=1}else{(!+ke||!+ke.slice(1)&&ke.charAt(0)=="5")&&(wt(Fe,Fe.e+te+2,1),_e=!Fe.times(Fe).eq(Ue));break}}return wt(Fe,Fe.e+te+1,ie,_e)},P.toExponential=function(_e,ke){return _e!=null&&(u(_e,0,no),_e++),nt(this,_e,ke,1)},P.toFixed=function(_e,ke){return _e!=null&&(u(_e,0,no),_e=_e+this.e+1),nt(this,_e,ke)},P.toFormat=function(_e,ke,Fe){var Re,$e=this;if(Fe==null)_e!=null&&ke&&typeof ke=="object"?(Fe=ke,ke=null):_e&&typeof _e=="object"?(Fe=_e,_e=ke=null):Fe=yn;else if(typeof Fe!="object")throw Error(bi+"Argument not an object: "+Fe);if(Re=$e.toFixed(_e,ke),$e.c){var Ue,lt=Re.split("."),ut=+Fe.groupSize,pt=+Fe.secondaryGroupSize,St=Fe.groupSeparator||"",Ct=lt[0],rn=lt[1],Bn=$e.s<0,Un=Bn?Ct.slice(1):Ct,Xn=Un.length;if(pt&&(Ue=ut,ut=pt,pt=Ue,Xn-=Ue),ut>0&&Xn>0){for(Ue=Xn%ut||ut,Ct=Un.substr(0,Ue);Ue<Xn;Ue+=ut)Ct+=St+Un.substr(Ue,ut);pt>0&&(Ct+=St+Un.slice(Ue)),Bn&&(Ct="-"+Ct)}Re=rn?Ct+(Fe.decimalSeparator||"")+((pt=+Fe.fractionGroupSize)?rn.replace(new RegExp("\\d{"+pt+"}\\B","g"),"$&"+(Fe.fractionGroupSeparator||"")):rn):Ct}return(Fe.prefix||"")+Re+(Fe.suffix||"")},P.toFraction=function(_e){var ke,Fe,Re,$e,Ue,lt,ut,pt,St,Ct,rn,Bn,Un=this,Xn=Un.c;if(_e!=null&&(ut=new Ke(_e),!ut.isInteger()&&(ut.c||ut.s!==1)||ut.lt(V)))throw Error(bi+"Argument "+(ut.isInteger()?"out of range: ":"not an integer: ")+It(ut));if(!Xn)return new Ke(Un);for(ke=new Ke(V),St=Fe=new Ke(V),Re=pt=new Ke(V),Bn=Es(Xn),Ue=ke.e=Bn.length-Un.e-1,ke.c[0]=Oa[(lt=Ue%lr)<0?lr+lt:lt],_e=!_e||ut.comparedTo(ke)>0?Ue>0?ke:St:ut,lt=Ve,Ve=1/0,ut=new Ke(Bn),pt.c[0]=0;Ct=g(ut,ke,0,1),$e=Fe.plus(Ct.times(Re)),$e.comparedTo(_e)!=1;)Fe=Re,Re=$e,St=pt.plus(Ct.times($e=St)),pt=$e,ke=ut.minus(Ct.times($e=ke)),ut=$e;return $e=g(_e.minus(Fe),Re,0,1),pt=pt.plus($e.times(St)),Fe=Fe.plus($e.times(Re)),pt.s=St.s=Un.s,Ue=Ue*2,rn=g(St,Re,Ue,ie).minus(Un).abs().comparedTo(g(pt,Fe,Ue,ie).minus(Un).abs())<1?[St,Re]:[pt,Fe],Ve=lt,rn},P.toNumber=function(){return+It(this)},P.toPrecision=function(_e,ke){return _e!=null&&u(_e,1,no),nt(this,_e,ke,2)},P.toString=function(_e){var ke,Fe=this,Re=Fe.s,$e=Fe.e;return $e===null?Re?(ke="Infinity",Re<0&&(ke="-"+ke)):ke="NaN":(_e==null?ke=$e<=ve||$e>=Ee?M(Es(Fe.c),$e):H(Es(Fe.c),$e,"0"):_e===10&&sr?(Fe=wt(new Ke(Fe),te+$e+1,ie),ke=H(Es(Fe.c),Fe.e,"0")):(u(_e,2,Sn.length,"Base"),ke=_(H(Es(Fe.c),$e,"0"),10,_e,Re,!0)),Re<0&&Fe.c[0]&&(ke="-"+ke)),ke},P.valueOf=P.toJSON=function(){return It(this)},P._isBigNumber=!0,P[Symbol.toStringTag]="BigNumber",P[Symbol.for("nodejs.util.inspect.custom")]=P.valueOf,h!=null&&Ke.set(h),Ke}function Cs(h){var g=h|0;return h>0||h===g?g:g-1}function Es(h){for(var g,_,S=1,P=h.length,V=h[0]+"";S<P;){for(g=h[S++]+"",_=lr-g.length;_--;g="0"+g);V+=g}for(P=V.length;V.charCodeAt(--P)===48;);return V.slice(0,P+1||1)}function ea(h,g){var _,S,P=h.c,V=g.c,te=h.s,ie=g.s,ve=h.e,Ee=g.e;if(!te||!ie)return null;if(_=P&&!P[0],S=V&&!V[0],_||S)return _?S?0:-ie:te;if(te!=ie)return te;if(_=te<0,S=ve==Ee,!P||!V)return S?0:!P^_?1:-1;if(!S)return ve>Ee^_?1:-1;for(ie=(ve=P.length)<(Ee=V.length)?ve:Ee,te=0;te<ie;te++)if(P[te]!=V[te])return P[te]>V[te]^_?1:-1;return ve==Ee?0:ve>Ee^_?1:-1}function u(h,g,_,S){if(h<g||h>_||h!==os(h))throw Error(bi+(S||"Argument")+(typeof h=="number"?h<g||h>_?" out of range: ":" not an integer: ":" not a primitive number: ")+String(h))}function y(h){var g=h.c.length-1;return Cs(h.e/lr)==g&&h.c[g]%2!=0}function M(h,g){return(h.length>1?h.charAt(0)+"."+h.slice(1):h)+(g<0?"e":"e+")+g}function H(h,g,_){var S,P;if(g<0){for(P=_+".";++g;P+=_);h=P+h}else if(S=h.length,++g>S){for(P=_,g-=S;--g;P+=_);h+=P}else g<S&&(h=h.slice(0,g)+"."+h.slice(g));return h}var ue=th(),Me=ue,at=class{constructor(h){Xe(this,"key");Xe(this,"left",null);Xe(this,"right",null);this.key=h}},Mt=class extends at{constructor(h){super(h)}},zt=class{constructor(){Xe(this,"size",0);Xe(this,"modificationCount",0);Xe(this,"splayCount",0)}splay(h){let g=this.root;if(g==null)return this.compare(h,h),-1;let _=null,S=null,P=null,V=null,te=g,ie=this.compare,ve;for(;;)if(ve=ie(te.key,h),ve>0){let Ee=te.left;if(Ee==null||(ve=ie(Ee.key,h),ve>0&&(te.left=Ee.right,Ee.right=te,te=Ee,Ee=te.left,Ee==null)))break;_==null?S=te:_.left=te,_=te,te=Ee}else if(ve<0){let Ee=te.right;if(Ee==null||(ve=ie(Ee.key,h),ve<0&&(te.right=Ee.left,Ee.left=te,te=Ee,Ee=te.right,Ee==null)))break;P==null?V=te:P.right=te,P=te,te=Ee}else break;return P!=null&&(P.right=te.left,te.left=V),_!=null&&(_.left=te.right,te.right=S),this.root!==te&&(this.root=te,this.splayCount++),ve}splayMin(h){let g=h,_=g.left;for(;_!=null;){let S=_;g.left=S.right,S.right=g,g=S,_=g.left}return g}splayMax(h){let g=h,_=g.right;for(;_!=null;){let S=_;g.right=S.left,S.left=g,g=S,_=g.right}return g}_delete(h){if(this.root==null||this.splay(h)!=0)return null;let g=this.root,_=g,S=g.left;if(this.size--,S==null)this.root=g.right;else{let P=g.right;g=this.splayMax(S),g.right=P,this.root=g}return this.modificationCount++,_}addNewRoot(h,g){this.size++,this.modificationCount++;let _=this.root;if(_==null){this.root=h;return}g<0?(h.left=_,h.right=_.right,_.right=null):(h.right=_,h.left=_.left,_.left=null),this.root=h}_first(){let h=this.root;return h==null?null:(this.root=this.splayMin(h),this.root)}_last(){let h=this.root;return h==null?null:(this.root=this.splayMax(h),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(h){return this.validKey(h)&&this.splay(h)==0}defaultCompare(){return(h,g)=>h<g?-1:h>g?1:0}wrap(){return{getRoot:()=>this.root,setRoot:h=>{this.root=h},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:h=>{this.splayCount=h},splay:h=>this.splay(h),has:h=>this.has(h)}}},on=class fg extends zt{constructor(_,S){super();Xe(this,"root",null);Xe(this,"compare");Xe(this,"validKey");Xe(this,En,"[object Set]");this.compare=_??this.defaultCompare(),this.validKey=S??(P=>P!=null&&P!=null)}delete(_){return this.validKey(_)?this._delete(_)!=null:!1}deleteAll(_){for(let S of _)this.delete(S)}forEach(_){let S=this[Symbol.iterator](),P;for(;P=S.next(),!P.done;)_(P.value,P.value,this)}add(_){let S=this.splay(_);return S!=0&&this.addNewRoot(new Mt(_),S),this}addAndReturn(_){let S=this.splay(_);return S!=0&&this.addNewRoot(new Mt(_),S),this.root.key}addAll(_){for(let S of _)this.add(S)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)<0)return this.root.key;let S=this.root.left;if(S==null)return null;let P=S.right;for(;P!=null;)S=P,P=S.right;return S.key}firstAfter(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)>0)return this.root.key;let S=this.root.right;if(S==null)return null;let P=S.left;for(;P!=null;)S=P,P=S.left;return S.key}retainAll(_){let S=new fg(this.compare,this.validKey),P=this.modificationCount;for(let V of _){if(P!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(V)&&this.splay(V)==0&&S.add(this.root.key)}S.size!=this.size&&(this.root=S.root,this.size=S.size,this.modificationCount++)}lookup(_){return!this.validKey(_)||this.splay(_)!=0?null:this.root.key}intersection(_){let S=new fg(this.compare,this.validKey);for(let P of this)_.has(P)&&S.add(P);return S}difference(_){let S=new fg(this.compare,this.validKey);for(let P of this)_.has(P)||S.add(P);return S}union(_){let S=this.clone();return S.addAll(_),S}clone(){let _=new fg(this.compare,this.validKey);return _.size=this.size,_.root=this.copyNode(this.root),_}copyNode(_){if(_==null)return null;function S(V,te){let ie,ve;do{if(ie=V.left,ve=V.right,ie!=null){let Ee=new Mt(ie.key);te.left=Ee,S(ie,Ee)}if(ve!=null){let Ee=new Mt(ve.key);te.right=Ee,V=ve,te=Ee}}while(ve!=null)}let P=new Mt(_.key);return S(_,P),P}toSet(){return this.clone()}entries(){return new kr(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(Zn=Symbol.iterator,En=Symbol.toStringTag,Zn)](){return new Kn(this.wrap())}},Dn=class{constructor(h){Xe(this,"tree");Xe(this,"path",new Array);Xe(this,"modificationCount",null);Xe(this,"splayCount");this.tree=h,this.splayCount=h.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let h=this.path[this.path.length-1];return this.getValue(h)}rebuildPath(h){this.path.splice(0,this.path.length),this.tree.splay(h),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(h){for(;h!=null;)this.path.push(h),h=h.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let _=this.tree.getRoot();for(;_!=null;)this.path.push(_),_=_.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let h=this.path[this.path.length-1],g=h.right;if(g!=null){for(;g!=null;)this.path.push(g),g=g.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===h;)h=this.path.pop();return this.path.length>0}},Kn=class extends Dn{getValue(h){return h.key}},kr=class extends Dn{getValue(h){return[h.key,h.key]}},as=h=>h,zi=h=>{if(h){let g=new on(go(h)),_=new on(go(h)),S=(V,te)=>te.addAndReturn(V),P=V=>({x:S(V.x,g),y:S(V.y,_)});return P({x:new Me(0),y:new Me(0)}),P}return as},Ms=h=>({set:g=>{Di=Ms(g)},reset:()=>Ms(h),compare:go(h),snap:zi(h),orient:jo(h)}),Di=Ms(),vo=(h,g)=>h.ll.x.isLessThanOrEqualTo(g.x)&&g.x.isLessThanOrEqualTo(h.ur.x)&&h.ll.y.isLessThanOrEqualTo(g.y)&&g.y.isLessThanOrEqualTo(h.ur.y),nh=(h,g)=>{if(g.ur.x.isLessThan(h.ll.x)||h.ur.x.isLessThan(g.ll.x)||g.ur.y.isLessThan(h.ll.y)||h.ur.y.isLessThan(g.ll.y))return null;let _=h.ll.x.isLessThan(g.ll.x)?g.ll.x:h.ll.x,S=h.ur.x.isLessThan(g.ur.x)?h.ur.x:g.ur.x,P=h.ll.y.isLessThan(g.ll.y)?g.ll.y:h.ll.y,V=h.ur.y.isLessThan(g.ur.y)?h.ur.y:g.ur.y;return{ll:{x:_,y:P},ur:{x:S,y:V}}},va=(h,g)=>h.x.times(g.y).minus(h.y.times(g.x)),ta=(h,g)=>h.x.times(g.x).plus(h.y.times(g.y)),zo=h=>ta(h,h).sqrt(),Cd=(h,g,_)=>{let S={x:g.x.minus(h.x),y:g.y.minus(h.y)},P={x:_.x.minus(h.x),y:_.y.minus(h.y)};return va(P,S).div(zo(P)).div(zo(S))},Pu=(h,g,_)=>{let S={x:g.x.minus(h.x),y:g.y.minus(h.y)},P={x:_.x.minus(h.x),y:_.y.minus(h.y)};return ta(P,S).div(zo(P)).div(zo(S))},Qr=(h,g,_)=>g.y.isZero()?null:{x:h.x.plus(g.x.div(g.y).times(_.minus(h.y))),y:_},Hs=(h,g,_)=>g.x.isZero()?null:{x:_,y:h.y.plus(g.y.div(g.x).times(_.minus(h.x)))},Oe=(h,g,_,S)=>{if(g.x.isZero())return Hs(_,S,h.x);if(S.x.isZero())return Hs(h,g,_.x);if(g.y.isZero())return Qr(_,S,h.y);if(S.y.isZero())return Qr(h,g,_.y);let P=va(g,S);if(P.isZero())return null;let V={x:_.x.minus(h.x),y:_.y.minus(h.y)},te=va(V,g).div(P),ie=va(V,S).div(P),ve=h.x.plus(ie.times(g.x)),Ee=_.x.plus(te.times(S.x)),Ze=h.y.plus(ie.times(g.y)),Ve=_.y.plus(te.times(S.y)),vt=ve.plus(Ee).div(2),At=Ze.plus(Ve).div(2);return{x:vt,y:At}},yo=class bE{constructor(g,_){Xe(this,"point");Xe(this,"isLeft");Xe(this,"segment");Xe(this,"otherSE");Xe(this,"consumedBy");g.events===void 0?g.events=[this]:g.events.push(this),this.point=g,this.isLeft=_}static compare(g,_){let S=bE.comparePoints(g.point,_.point);return S!==0?S:(g.point!==_.point&&g.link(_),g.isLeft!==_.isLeft?g.isLeft?1:-1:Ps.compare(g.segment,_.segment))}static comparePoints(g,_){return g.x.isLessThan(_.x)?-1:g.x.isGreaterThan(_.x)?1:g.y.isLessThan(_.y)?-1:g.y.isGreaterThan(_.y)?1:0}link(g){if(g.point===this.point)throw new Error("Tried to link already linked events");let _=g.point.events;for(let S=0,P=_.length;S<P;S++){let V=_[S];this.point.events.push(V),V.point=this.point}this.checkForConsuming()}checkForConsuming(){let g=this.point.events.length;for(let _=0;_<g;_++){let S=this.point.events[_];if(S.segment.consumedBy===void 0)for(let P=_+1;P<g;P++){let V=this.point.events[P];V.consumedBy===void 0&&S.otherSE.point.events===V.otherSE.point.events&&S.segment.consume(V.segment)}}}getAvailableLinkedEvents(){let g=[];for(let _=0,S=this.point.events.length;_<S;_++){let P=this.point.events[_];P!==this&&!P.segment.ringOut&&P.segment.isInResult()&&g.push(P)}return g}getLeftmostComparator(g){let _=new Map,S=P=>{let V=P.otherSE;_.set(P,{sine:Cd(this.point,g.point,V.point),cosine:Pu(this.point,g.point,V.point)})};return(P,V)=>{_.has(P)||S(P),_.has(V)||S(V);let{sine:te,cosine:ie}=_.get(P),{sine:ve,cosine:Ee}=_.get(V);return te.isGreaterThanOrEqualTo(0)&&ve.isGreaterThanOrEqualTo(0)?ie.isLessThan(Ee)?1:ie.isGreaterThan(Ee)?-1:0:te.isLessThan(0)&&ve.isLessThan(0)?ie.isLessThan(Ee)?-1:ie.isGreaterThan(Ee)?1:0:ve.isLessThan(te)?-1:ve.isGreaterThan(te)?1:0}}},Ju=0,Ps=class Z0{constructor(g,_,S,P){Xe(this,"id");Xe(this,"leftSE");Xe(this,"rightSE");Xe(this,"rings");Xe(this,"windings");Xe(this,"ringOut");Xe(this,"consumedBy");Xe(this,"prev");Xe(this,"_prevInResult");Xe(this,"_beforeState");Xe(this,"_afterState");Xe(this,"_isInResult");this.id=++Ju,this.leftSE=g,g.segment=this,g.otherSE=_,this.rightSE=_,_.segment=this,_.otherSE=g,this.rings=S,this.windings=P}static compare(g,_){let S=g.leftSE.point.x,P=_.leftSE.point.x,V=g.rightSE.point.x,te=_.rightSE.point.x;if(te.isLessThan(S))return 1;if(V.isLessThan(P))return-1;let ie=g.leftSE.point.y,ve=_.leftSE.point.y,Ee=g.rightSE.point.y,Ze=_.rightSE.point.y;if(S.isLessThan(P)){if(ve.isLessThan(ie)&&ve.isLessThan(Ee))return 1;if(ve.isGreaterThan(ie)&&ve.isGreaterThan(Ee))return-1;let Ve=g.comparePoint(_.leftSE.point);if(Ve<0)return 1;if(Ve>0)return-1;let vt=_.comparePoint(g.rightSE.point);return vt!==0?vt:-1}if(S.isGreaterThan(P)){if(ie.isLessThan(ve)&&ie.isLessThan(Ze))return-1;if(ie.isGreaterThan(ve)&&ie.isGreaterThan(Ze))return 1;let Ve=_.comparePoint(g.leftSE.point);if(Ve!==0)return Ve;let vt=g.comparePoint(_.rightSE.point);return vt<0?1:vt>0?-1:1}if(ie.isLessThan(ve))return-1;if(ie.isGreaterThan(ve))return 1;if(V.isLessThan(te)){let Ve=_.comparePoint(g.rightSE.point);if(Ve!==0)return Ve}if(V.isGreaterThan(te)){let Ve=g.comparePoint(_.rightSE.point);if(Ve<0)return 1;if(Ve>0)return-1}if(!V.eq(te)){let Ve=Ee.minus(ie),vt=V.minus(S),At=Ze.minus(ve),Kt=te.minus(P);if(Ve.isGreaterThan(vt)&&At.isLessThan(Kt))return 1;if(Ve.isLessThan(vt)&&At.isGreaterThan(Kt))return-1}return V.isGreaterThan(te)?1:V.isLessThan(te)||Ee.isLessThan(Ze)?-1:Ee.isGreaterThan(Ze)?1:g.id<_.id?-1:g.id>_.id?1:0}static fromRing(g,_,S){let P,V,te,ie=yo.comparePoints(g,_);if(ie<0)P=g,V=_,te=1;else if(ie>0)P=_,V=g,te=-1;else throw new Error(`Tried to create degenerate segment at [${g.x}, ${g.y}]`);let ve=new yo(P,!0),Ee=new yo(V,!1);return new Z0(ve,Ee,[S],[te])}replaceRightSE(g){this.rightSE=g,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let g=this.leftSE.point.y,_=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:g.isLessThan(_)?g:_},ur:{x:this.rightSE.point.x,y:g.isGreaterThan(_)?g:_}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(g){return g.x.eq(this.leftSE.point.x)&&g.y.eq(this.leftSE.point.y)||g.x.eq(this.rightSE.point.x)&&g.y.eq(this.rightSE.point.y)}comparePoint(g){return Di.orient(this.leftSE.point,g,this.rightSE.point)}getIntersection(g){let _=this.bbox(),S=g.bbox(),P=nh(_,S);if(P===null)return null;let V=this.leftSE.point,te=this.rightSE.point,ie=g.leftSE.point,ve=g.rightSE.point,Ee=vo(_,ie)&&this.comparePoint(ie)===0,Ze=vo(S,V)&&g.comparePoint(V)===0,Ve=vo(_,ve)&&this.comparePoint(ve)===0,vt=vo(S,te)&&g.comparePoint(te)===0;if(Ze&&Ee)return vt&&!Ve?te:!vt&&Ve?ve:null;if(Ze)return Ve&&V.x.eq(ve.x)&&V.y.eq(ve.y)?null:V;if(Ee)return vt&&te.x.eq(ie.x)&&te.y.eq(ie.y)?null:ie;if(vt&&Ve)return null;if(vt)return te;if(Ve)return ve;let At=Oe(V,this.vector(),ie,g.vector());return At===null||!vo(P,At)?null:Di.snap(At)}split(g){let _=[],S=g.events!==void 0,P=new yo(g,!0),V=new yo(g,!1),te=this.rightSE;this.replaceRightSE(V),_.push(V),_.push(P);let ie=new Z0(P,te,this.rings.slice(),this.windings.slice());return yo.comparePoints(ie.leftSE.point,ie.rightSE.point)>0&&ie.swapEvents(),yo.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),S&&(P.checkForConsuming(),V.checkForConsuming()),_}swapEvents(){let g=this.rightSE;this.rightSE=this.leftSE,this.leftSE=g,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let _=0,S=this.windings.length;_<S;_++)this.windings[_]*=-1}consume(g){let _=this,S=g;for(;_.consumedBy;)_=_.consumedBy;for(;S.consumedBy;)S=S.consumedBy;let P=Z0.compare(_,S);if(P!==0){if(P>0){let V=_;_=S,S=V}if(_.prev===S){let V=_;_=S,S=V}for(let V=0,te=S.rings.length;V<te;V++){let ie=S.rings[V],ve=S.windings[V],Ee=_.rings.indexOf(ie);Ee===-1?(_.rings.push(ie),_.windings.push(ve)):_.windings[Ee]+=ve}S.rings=null,S.windings=null,S.consumedBy=_,S.leftSE.consumedBy=_.leftSE,S.rightSE.consumedBy=_.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let g=this.prev.consumedBy||this.prev;this._beforeState=g.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let g=this.beforeState();this._afterState={rings:g.rings.slice(0),windings:g.windings.slice(0),multiPolys:[]};let _=this._afterState.rings,S=this._afterState.windings,P=this._afterState.multiPolys;for(let ie=0,ve=this.rings.length;ie<ve;ie++){let Ee=this.rings[ie],Ze=this.windings[ie],Ve=_.indexOf(Ee);Ve===-1?(_.push(Ee),S.push(Ze)):S[Ve]+=Ze}let V=[],te=[];for(let ie=0,ve=_.length;ie<ve;ie++){if(S[ie]===0)continue;let Ee=_[ie],Ze=Ee.poly;if(te.indexOf(Ze)===-1)if(Ee.isExterior)V.push(Ze);else{te.indexOf(Ze)===-1&&te.push(Ze);let Ve=V.indexOf(Ee.poly);Ve!==-1&&V.splice(Ve,1)}}for(let ie=0,ve=V.length;ie<ve;ie++){let Ee=V[ie].multiPoly;P.indexOf(Ee)===-1&&P.push(Ee)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let g=this.beforeState().multiPolys,_=this.afterState().multiPolys;switch(Fh.type){case"union":{let S=g.length===0,P=_.length===0;this._isInResult=S!==P;break}case"intersection":{let S,P;g.length<_.length?(S=g.length,P=_.length):(S=_.length,P=g.length),this._isInResult=P===Fh.numMultiPolys&&S<P;break}case"xor":{let S=Math.abs(g.length-_.length);this._isInResult=S%2===1;break}case"difference":{let S=P=>P.length===1&&P[0].isSubject;this._isInResult=S(g)!==S(_);break}}return this._isInResult}},Dr=class{constructor(h,g,_){Xe(this,"poly");Xe(this,"isExterior");Xe(this,"segments");Xe(this,"bbox");if(!Array.isArray(h)||h.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=g,this.isExterior=_,this.segments=[],typeof h[0][0]!="number"||typeof h[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let S=Di.snap({x:new Me(h[0][0]),y:new Me(h[0][1])});this.bbox={ll:{x:S.x,y:S.y},ur:{x:S.x,y:S.y}};let P=S;for(let V=1,te=h.length;V<te;V++){if(typeof h[V][0]!="number"||typeof h[V][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let ie=Di.snap({x:new Me(h[V][0]),y:new Me(h[V][1])});ie.x.eq(P.x)&&ie.y.eq(P.y)||(this.segments.push(Ps.fromRing(P,ie,this)),ie.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=ie.x),ie.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=ie.y),ie.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=ie.x),ie.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=ie.y),P=ie)}(!S.x.eq(P.x)||!S.y.eq(P.y))&&this.segments.push(Ps.fromRing(P,S,this))}getSweepEvents(){let h=[];for(let g=0,_=this.segments.length;g<_;g++){let S=this.segments[g];h.push(S.leftSE),h.push(S.rightSE)}return h}},Bh=class{constructor(h,g){Xe(this,"multiPoly");Xe(this,"exteriorRing");Xe(this,"interiorRings");Xe(this,"bbox");if(!Array.isArray(h))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Dr(h[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let _=1,S=h.length;_<S;_++){let P=new Dr(h[_],this,!1);P.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=P.bbox.ll.x),P.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=P.bbox.ll.y),P.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=P.bbox.ur.x),P.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=P.bbox.ur.y),this.interiorRings.push(P)}this.multiPoly=g}getSweepEvents(){let h=this.exteriorRing.getSweepEvents();for(let g=0,_=this.interiorRings.length;g<_;g++){let S=this.interiorRings[g].getSweepEvents();for(let P=0,V=S.length;P<V;P++)h.push(S[P])}return h}},_f=class{constructor(h,g){Xe(this,"isSubject");Xe(this,"polys");Xe(this,"bbox");if(!Array.isArray(h))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof h[0][0][0]=="number"&&(h=[h])}catch{}this.polys=[],this.bbox={ll:{x:new Me(Number.POSITIVE_INFINITY),y:new Me(Number.POSITIVE_INFINITY)},ur:{x:new Me(Number.NEGATIVE_INFINITY),y:new Me(Number.NEGATIVE_INFINITY)}};for(let _=0,S=h.length;_<S;_++){let P=new Bh(h[_],this);P.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=P.bbox.ll.x),P.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=P.bbox.ll.y),P.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=P.bbox.ur.x),P.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=P.bbox.ur.y),this.polys.push(P)}this.isSubject=g}getSweepEvents(){let h=[];for(let g=0,_=this.polys.length;g<_;g++){let S=this.polys[g].getSweepEvents();for(let P=0,V=S.length;P<V;P++)h.push(S[P])}return h}},Rh=class lb{constructor(g){Xe(this,"events");Xe(this,"poly");Xe(this,"_isExteriorRing");Xe(this,"_enclosingRing");this.events=g;for(let _=0,S=g.length;_<S;_++)g[_].segment.ringOut=this;this.poly=null}static factory(g){let _=[];for(let S=0,P=g.length;S<P;S++){let V=g[S];if(!V.isInResult()||V.ringOut)continue;let te=null,ie=V.leftSE,ve=V.rightSE,Ee=[ie],Ze=ie.point,Ve=[];for(;te=ie,ie=ve,Ee.push(ie),ie.point!==Ze;)for(;;){let vt=ie.getAvailableLinkedEvents();if(vt.length===0){let yn=Ee[0].point,Sn=Ee[Ee.length-1].point;throw new Error(`Unable to complete output ring starting at [${yn.x}, ${yn.y}]. Last matching segment found ends at [${Sn.x}, ${Sn.y}].`)}if(vt.length===1){ve=vt[0].otherSE;break}let At=null;for(let yn=0,Sn=Ve.length;yn<Sn;yn++)if(Ve[yn].point===ie.point){At=yn;break}if(At!==null){let yn=Ve.splice(At)[0],Sn=Ee.splice(yn.index);Sn.unshift(Sn[0].otherSE),_.push(new lb(Sn.reverse()));continue}Ve.push({index:Ee.length,point:ie.point});let Kt=ie.getLeftmostComparator(te);ve=vt.sort(Kt)[0].otherSE;break}_.push(new lb(Ee))}return _}getGeom(){let g=this.events[0].point,_=[g];for(let Ee=1,Ze=this.events.length-1;Ee<Ze;Ee++){let Ve=this.events[Ee].point,vt=this.events[Ee+1].point;Di.orient(Ve,g,vt)!==0&&(_.push(Ve),g=Ve)}if(_.length===1)return null;let S=_[0],P=_[1];Di.orient(S,g,P)===0&&_.shift(),_.push(_[0]);let V=this.isExteriorRing()?1:-1,te=this.isExteriorRing()?0:_.length-1,ie=this.isExteriorRing()?_.length:-1,ve=[];for(let Ee=te;Ee!=ie;Ee+=V)ve.push([_[Ee].x.toNumber(),_[Ee].y.toNumber()]);return ve}isExteriorRing(){if(this._isExteriorRing===void 0){let g=this.enclosingRing();this._isExteriorRing=g?!g.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var P,V;let g=this.events[0];for(let te=1,ie=this.events.length;te<ie;te++){let ve=this.events[te];yo.compare(g,ve)>0&&(g=ve)}let _=g.segment.prevInResult(),S=_?_.prevInResult():null;for(;;){if(!_)return null;if(!S)return _.ringOut;if(S.ringOut!==_.ringOut)return((P=S.ringOut)==null?void 0:P.enclosingRing())!==_.ringOut?_.ringOut:(V=_.ringOut)==null?void 0:V.enclosingRing();_=S.prevInResult(),S=_?_.prevInResult():null}}},ll=class{constructor(h){Xe(this,"exteriorRing");Xe(this,"interiorRings");this.exteriorRing=h,h.poly=this,this.interiorRings=[]}addInterior(h){this.interiorRings.push(h),h.poly=this}getGeom(){let h=this.exteriorRing.getGeom();if(h===null)return null;let g=[h];for(let _=0,S=this.interiorRings.length;_<S;_++){let P=this.interiorRings[_].getGeom();P!==null&&g.push(P)}return g}},rh=class{constructor(h){Xe(this,"rings");Xe(this,"polys");this.rings=h,this.polys=this._composePolys(h)}getGeom(){let h=[];for(let g=0,_=this.polys.length;g<_;g++){let S=this.polys[g].getGeom();S!==null&&h.push(S)}return h}_composePolys(h){var _;let g=[];for(let S=0,P=h.length;S<P;S++){let V=h[S];if(!V.poly)if(V.isExteriorRing())g.push(new ll(V));else{let te=V.enclosingRing();te!=null&&te.poly||g.push(new ll(te)),(_=te==null?void 0:te.poly)==null||_.addInterior(V)}}return g}},Ed=class{constructor(h,g=Ps.compare){Xe(this,"queue");Xe(this,"tree");Xe(this,"segments");this.queue=h,this.tree=new on(g),this.segments=[]}process(h){let g=h.segment,_=[];if(h.consumedBy)return h.isLeft?this.queue.delete(h.otherSE):this.tree.delete(g),_;h.isLeft&&this.tree.add(g);let S=g,P=g;do S=this.tree.lastBefore(S);while(S!=null&&S.consumedBy!=null);do P=this.tree.firstAfter(P);while(P!=null&&P.consumedBy!=null);if(h.isLeft){let V=null;if(S){let ie=S.getIntersection(g);if(ie!==null&&(g.isAnEndpoint(ie)||(V=ie),!S.isAnEndpoint(ie))){let ve=this._splitSafely(S,ie);for(let Ee=0,Ze=ve.length;Ee<Ze;Ee++)_.push(ve[Ee])}}let te=null;if(P){let ie=P.getIntersection(g);if(ie!==null&&(g.isAnEndpoint(ie)||(te=ie),!P.isAnEndpoint(ie))){let ve=this._splitSafely(P,ie);for(let Ee=0,Ze=ve.length;Ee<Ze;Ee++)_.push(ve[Ee])}}if(V!==null||te!==null){let ie=null;V===null?ie=te:te===null?ie=V:ie=yo.comparePoints(V,te)<=0?V:te,this.queue.delete(g.rightSE),_.push(g.rightSE);let ve=g.split(ie);for(let Ee=0,Ze=ve.length;Ee<Ze;Ee++)_.push(ve[Ee])}_.length>0?(this.tree.delete(g),_.push(h)):(this.segments.push(g),g.prev=S)}else{if(S&&P){let V=S.getIntersection(P);if(V!==null){if(!S.isAnEndpoint(V)){let te=this._splitSafely(S,V);for(let ie=0,ve=te.length;ie<ve;ie++)_.push(te[ie])}if(!P.isAnEndpoint(V)){let te=this._splitSafely(P,V);for(let ie=0,ve=te.length;ie<ve;ie++)_.push(te[ie])}}}this.tree.delete(g)}return _}_splitSafely(h,g){this.tree.delete(h);let _=h.rightSE;this.queue.delete(_);let S=h.split(g);return S.push(_),h.consumedBy===void 0&&this.tree.add(h),S}},Ip=class{constructor(){Xe(this,"type");Xe(this,"numMultiPolys")}run(h,g,_){Mc.type=h;let S=[new _f(g,!0)];for(let ve=0,Ee=_.length;ve<Ee;ve++)S.push(new _f(_[ve],!1));if(Mc.numMultiPolys=S.length,Mc.type==="difference"){let ve=S[0],Ee=1;for(;Ee<S.length;)nh(S[Ee].bbox,ve.bbox)!==null?Ee++:S.splice(Ee,1)}if(Mc.type==="intersection")for(let ve=0,Ee=S.length;ve<Ee;ve++){let Ze=S[ve];for(let Ve=ve+1,vt=S.length;Ve<vt;Ve++)if(nh(Ze.bbox,S[Ve].bbox)===null)return[]}let P=new on(yo.compare);for(let ve=0,Ee=S.length;ve<Ee;ve++){let Ze=S[ve].getSweepEvents();for(let Ve=0,vt=Ze.length;Ve<vt;Ve++)P.add(Ze[Ve])}let V=new Ed(P),te=null;for(P.size!=0&&(te=P.first(),P.delete(te));te;){let ve=V.process(te);for(let Ee=0,Ze=ve.length;Ee<Ze;Ee++){let Ve=ve[Ee];Ve.consumedBy===void 0&&P.add(Ve)}P.size!=0?(te=P.first(),P.delete(te)):te=null}Di.reset();let ie=Rh.factory(V.segments);return new rh(ie).getGeom()}},Mc=new Ip,Fh=Mc,lu=(h,...g)=>Fh.run("intersection",h,g),Op=(h,...g)=>Fh.run("difference",h,g);Di.set;function jh(h){let g={type:"Feature"};return g.geometry=h,g}function zh(h){return h.type==="Feature"?h.geometry:h}function wf(h){return h&&h.geometry&&h.geometry.coordinates?h.geometry.coordinates:h}function xf(h){return jh({type:"LineString",coordinates:h})}function Na(h){return jh({type:"MultiLineString",coordinates:h})}function Lf(h){return jh({type:"Polygon",coordinates:h})}function Sf(h){return jh({type:"MultiPolygon",coordinates:h})}function Cf(h,g){let _=zh(h),S=zh(g),P=lu(_.coordinates,S.coordinates);return P.length===0?null:P.length===1?Lf(P[0]):Sf(P)}function w(h,g){let _=zh(h),S=zh(g),P=Op(_.coordinates,S.coordinates);return P.length===0?null:P.length===1?Lf(P[0]):Sf(P)}function A(h){return Array.isArray(h)?1+A(h[0]):-1}function G(h){h instanceof L.Polyline&&(h=h.toGeoJSON(15));let g=wf(h),_=A(g),S=[];return _>1?g.forEach(P=>{S.push(xf(P))}):S.push(h),S}function ce(h){let g=[];return h.eachLayer(_=>{g.push(wf(_.toGeoJSON(15)))}),Na(g)}Yi.Cut=Yi.Polygon.extend({initialize(h){this._map=h,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=2)return;let g=L.polygon(h,this.options.pathOptions);g._latlngInfos=this._layer._latlngInfo,this.cut(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:S,originalLayer:P})=>{this._fireCut(P,S,P),this._fireCut(this._map,S,P),P.pm._fireEdit()}),this._editedLayers=[];let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},cut(h){let g=this._map._layers,_=h._latlngInfos||[];Object.keys(g).map(S=>g[S]).filter(S=>S.pm).filter(S=>!S._pmTempLayer).filter(S=>!L.PM.optIn&&!S.options.pmIgnore||L.PM.optIn&&S.options.pmIgnore===!1).filter(S=>S instanceof L.Polyline).filter(S=>S!==h).filter(S=>S.pm.options.allowCutting).filter(S=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(S)>-1:!0).filter(S=>!this._layerGroup.hasLayer(S)).filter(S=>{try{let P=!!po(h.toGeoJSON(15),S.toGeoJSON(15)).features.length>0;return P||S instanceof L.Polyline&&!(S instanceof L.Polygon)?P:!!Cf(h.toGeoJSON(15),S.toGeoJSON(15))}catch{return S instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(S=>{let P;if(S instanceof L.Polygon){P=L.polygon(S.getLatLngs());let ve=P.getLatLngs();_.forEach(Ee=>{if(Ee&&Ee.snapInfo){let{latlng:Ze}=Ee,Ve=this._calcClosestLayer(Ze,[P]);if(Ve&&Ve.segment&&Ve.distance<this.options.snapDistance){let{segment:vt}=Ve;if(vt&&vt.length===2){let{indexPath:At,parentPath:Kt,newIndex:yn}=L.PM.Utils._getIndexFromSegment(ve,vt);(At.length>1?(0,_i.default)(ve,Kt):ve).splice(yn,0,Ze)}}}})}else P=S;let V=this._cutLayer(h,P),te=L.geoJSON(V,S.options);te.getLayers().length===1&&([te]=te.getLayers()),this._setPane(te,"layerPane");let ie=te.addTo(this._map.pm._getContainingLayer());if(ie.pm.enable(S.pm.options),ie.pm.disable(),S._pmTempLayer=!0,h._pmTempLayer=!0,S.remove(),S.removeFrom(this._map.pm._getContainingLayer()),h.remove(),h.removeFrom(this._map.pm._getContainingLayer()),ie.getLayers&&ie.getLayers().length===0&&this._map.pm.removeLayer({target:ie}),ie instanceof L.LayerGroup?(ie.eachLayer(ve=>{this._addDrawnLayerProp(ve)}),this._addDrawnLayerProp(ie)):this._addDrawnLayerProp(ie),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let ve=this.options.layersToCut.indexOf(S);ve>-1&&this.options.layersToCut.splice(ve,1)}this._editedLayers.push({layer:ie,originalLayer:S})})},_cutLayer(h,g){let _=L.geoJSON(),S;if(g instanceof L.Polygon)S=w(g.toGeoJSON(15),h.toGeoJSON(15));else{let P=G(g);P.forEach(V=>{let te=Hn(V,h.toGeoJSON(15)),ie;te&&te.features.length>0?ie=L.geoJSON(te):ie=L.geoJSON(V),ie.getLayers().forEach(ve=>{da(h.toGeoJSON(15),ve.toGeoJSON(15))||ve.addTo(_)})}),P.length>1?S=ce(_):S=_.toGeoJSON(15)}return S},_change:L.Util.falseFn}),Yi.Text=Yi.extend({initialize(h){this._map=h,this._shape="Text",this.toolbarButtonName="drawText"},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(nr("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var h;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(h=this._hintMarker)==null||h.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let g=h;g.target=this._hintMarker,this._handleSnapping(g)}},_createMarker(h){var P,V,te,ie;if(!h.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(P=this.options.textOptions)==null?void 0:P.className){let ve=this.options.textOptions.className.split(" ");this.textArea.classList.add(...ve)}let _=this._createTextIcon(this.textArea),S=new L.Marker(g,{textMarker:!0,_textMarkerOverPM:!0,icon:_});if(this._setPane(S,"markerPane"),this._finishLayer(S),S.pm||(S.options.draggable=!1),S.addTo(this._map.pm._getContainingLayer()),S.pm){S.pm.textArea=this.textArea,L.setOptions(S.pm,{removeIfEmpty:((V=this.options.textOptions)==null?void 0:V.removeIfEmpty)??!0});let ve=((te=this.options.textOptions)==null?void 0:te.focusAfterDraw)??!0;S.pm._createTextMarker(ve),(ie=this.options.textOptions)!=null&&ie.text&&S.pm.setText(this.options.textOptions.text)}this._fireCreate(S),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(h){this.enable(),this._hintMarker.setLatLng(h.latlng)},_createTextArea(){let h=document.createElement("textarea");return h.readOnly=!0,h.classList.add("pm-textarea","pm-disabled"),h},_createTextIcon(h){return L.divIcon({className:"pm-text-marker",html:h})}});var xe={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,ri(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let h=this._getDOMElem();h&&(ri(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(h)):L.DomEvent.on(h,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,ri(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let h=this._getDOMElem();h&&(ri(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(h)):L.DomEvent.off(h,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(h){let g=h.touches?h.touches[0]:h,_={originalEvent:g,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(g),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseDown(_),!1},_simulateMouseMoveEvent(h){let g=h.touches?h.touches[0]:h,_={originalEvent:g,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(g),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseMove(_),!1},_simulateMouseUpEvent(h){let g={originalEvent:h.touches?h.touches[0]:h,target:this._layer};return h.type.indexOf("touch")===-1&&(g.containerPoint=this._map.mouseEventToContainerPoint(h),g.latlng=this._map.containerPointToLatLng(g.containerPoint)),this._dragMixinOnMouseUp(g),!1},_dragMixinOnMouseDown(h){if(h.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(h);let g=h._fromLayerSync,_=this._syncLayers("_dragMixinOnMouseDown",h);if(this._layer instanceof L.Marker&&(this.options.snappable&&!g&&!_?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let S="resizeableCircleMarker";this._layer instanceof L.Circle&&(S="resizeableCircle"),this.options.snappable&&!g&&!_?this._layer.pm.options[S]||this._initSnappableMarkersDrag():this._layer.pm.options[S]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=h.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(h){this._overwriteEventIfItComesFromMarker(h);let g=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",h),this._dragging||(this._dragging=!0,L.DomUtil.addClass(g,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=h.latlng),this._onLayerDrag(h),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(h){let g=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",h),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,g&&L.DomUtil.removeClass(g,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(h){let{latlng:g}=h,_={lat:g.lat-this._tempDragCoord.lat,lng:g.lng-this._tempDragCoord.lng},S=P=>P.map(V=>{if(Array.isArray(V))return S(V);let te={lat:V.lat+_.lat,lng:V.lng+_.lng};return(V.alt||V.alt===0)&&(te.alt=V.alt),te});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let P=S([this._layer.getLatLng()]);this._layer.setLatLng(P[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let P=this._layer.getLatLng();this._layer._snapped&&(P=this._layer._orgLatLng);let V=S([P]);this._layer.setLatLng(V[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let P=S([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(P),this._fireChange(this._layer.getBounds(),"Edit")}else{let P=S(this._layer.getLatLngs());this._layer.setLatLngs(P),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=g,h.layer=this._layer,this._fireDrag(h)},addDraggingClass(){let h=this._getDOMElem();h&&L.DomUtil.addClass(h,"leaflet-pm-draggable")},removeDraggingClass(){let h=this._getDOMElem();h&&L.DomUtil.removeClass(h,"leaflet-pm-draggable")},_getDOMElem(){let h=null;return this._layer._path?h=this._layer._path:this._layer._renderer&&this._layer._renderer._container?h=this._layer._renderer._container:this._layer._image?h=this._layer._image:this._layer._icon&&(h=this._layer._icon),h},_overwriteEventIfItComesFromMarker(h){h.target.getLatLng&&(!h.target._radius||h.target._radius<=10)&&(h.containerPoint=this._map.mouseEventToContainerPoint(h.originalEvent),h.latlng=this._map.containerPointToLatLng(h.containerPoint))},_syncLayers(h,g){if(this.enabled())return!1;if(!g._fromLayerSync&&this._layer===g.target&&this.options.syncLayersOnDrag){g._fromLayerSync=!0;let _=[];if(L.Util.isArray(this.options.syncLayersOnDrag))_=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(S=>{S instanceof L.LayerGroup&&(_=_.concat(S.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let S in this._parentLayerGroup){let P=this._parentLayerGroup[S];P.pm&&(_=P.pm.getLayers(!0))}return L.Util.isArray(_)&&_.length>0&&(_=_.filter(S=>!!S.pm).filter(S=>!!S.pm.options.draggable),_.forEach(S=>{S!==this._layer&&S.pm[h]&&(S._snapped=!1,S.pm[h](g))})),_.length>0}return!1},_stopDOMImageDrag(h){return h.preventDefault(),!1}},Pe=xe,Ae=l(Si());function Ie(h,g,_,S){return _.unproject(g.transform(_.project(h,S)),S)}function Be(h,g,_){let S=_.getMaxZoom();if(S===1/0&&(S=_.getZoom()),L.Util.isArray(h)){let P=[];return h.forEach(V=>{P.push(Be(V,g,_))}),P}return h instanceof L.LatLng?Ie(h,g,_,S):null}function Ge(h,g){g instanceof L.Layer&&(g=g.getLatLng());let _=h.getMaxZoom();return _===1/0&&(_=h.getZoom()),h.project(g,_)}function dt(h,g){let _=h.getMaxZoom();return _===1/0&&(_=h.getZoom()),h.unproject(g,_)}var Ot={_onRotateStart(h){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Ge(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Ge(this._map,h.target.getLatLng()),this._initialRotateLatLng=Fo(this._layer),this._startAngle=this.getAngle();let g=Fo(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,g),this._fireRotationStart(this._map,g)},_onRotate(h){let g=Ge(this._map,h.target.getLatLng()),_=this._rotationStartPoint,S=this._rotationOriginPoint,P=Math.atan2(g.y-S.y,g.x-S.x)-Math.atan2(_.y-S.y,_.x-S.x);this._layer.setLatLngs(this._rotateLayer(P,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let V=this;function te(Ze,Ve=[],vt=-1){if(vt>-1&&Ve.push(vt),L.Util.isArray(Ze[0]))Ze.forEach((At,Kt)=>te(At,Ve.slice(),Kt));else{let At=Ve.length>0?(0,Ae.default)(V._markers,Ve):V._markers[0];Ze.forEach((Kt,yn)=>{At[yn].setLatLng(Kt)})}}te(this._layer.getLatLngs());let ie=Fo(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(P,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let ve=P*180/Math.PI;ve=ve<0?ve+360:ve;let Ee=ve+this._startAngle;this._setAngle(Ee),this._rotationLayer.pm._setAngle(Ee),this._fireRotation(this._rotationLayer,ve,ie),this._fireRotation(this._map,ve,ie),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let h=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let g=Fo(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Fo(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,h,g),this._fireRotationEnd(this._map,h,g),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(h,g,_,S,P){let V=Ge(P,_);return this._matrix=S.clone().rotate(h,V).flip(),Be(g,this._matrix,P)},_setAngle(h){h=h<0?h+360:h,this._angle=h%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let h=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),g=h.getCenter();return h.removeFrom(this._layer._map),g},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(la(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let h={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),h),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Fo(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(h){let g=this.getAngle(),_=this._layer.getLatLngs(),S=h*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(S,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+h),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(S,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let P=this.getAngle()-g;P=P<0?P+360:P,this._startAngle=g,this._fireRotation(this._layer,P,_,this._layer),this._fireRotation(this._map||this._layer._map,P,_,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(h){let g=h-this.getAngle();this.rotateLayer(g)},getAngle(){return this._angle||0},setInitAngle(h){this._setAngle(h)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(h){this._rotationCenter=h,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(h)}},Nt=Ot,xt=L.Class.extend({includes:[Pe,To,Nt,nu],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(h){L.Util.setOptions(this,h)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(h,g){g==="layerPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":g==="vertexPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":g==="markerPane"&&(h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(h,g){let _=g.target,S={layer:this._layer,marker:_,event:g},P="";return h==="move"?P="moveVertexValidation":h==="add"?P="addVertexValidation":h==="remove"&&(P="removeVertexValidation"),this.options[P]&&typeof this.options[P]=="function"&&!this.options[P](S)?(h==="move"&&(_._cancelDragEventChain=_.getLatLng()),!1):(_._cancelDragEventChain=null,!0)},_vertexValidationDrag(h){return h._cancelDragEventChain?(h._latlng=h._cancelDragEventChain,h.update(),!1):!0},_vertexValidationDragEnd(h){return h._cancelDragEventChain?(h._cancelDragEventChain=null,!1):!0}}),qt=xt;qt.LayerGroup=L.Class.extend({initialize(h){this._layerGroup=h,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(S=>this._initLayer(S));let g=S=>{if(S.layer._pmTempLayer)return;this._layers=this.getLayers();let P=this._layers.filter(V=>!V.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in V.pm._parentLayerGroup));P.forEach(V=>{this._initLayer(V)}),P.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(g,100,this),this),this._layerGroup.on("layerremove",S=>{this._removeLayerFromGroup(S.target)},this);let _=S=>{S.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(_,100,this),this)},enable(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this._options=h,this._layers.forEach(_=>{_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.enable(h,g)):_.pm.enable(h)})},disable(h=[]){h.length===0&&(this._layers=this.getLayers()),this._layers.forEach(g=>{g instanceof L.LayerGroup?h.indexOf(g._leaflet_id)===-1&&(h.push(g._leaflet_id),g.pm.disable(h)):g.pm.disable()})},enabled(h=[]){return h.length===0&&(this._layers=this.getLayers()),!!this._layers.find(g=>g instanceof L.LayerGroup?h.indexOf(g._leaflet_id)===-1?(h.push(g._leaflet_id),g.pm.enabled(h)):!1:g.pm.enabled())},toggleEdit(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this._options=h,this._layers.forEach(_=>{_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.toggleEdit(h,g)):_.pm.toggleEdit(h)})},_initLayer(h){let g=L.Util.stamp(this._layerGroup);h.pm._parentLayerGroup||(h.pm._parentLayerGroup={}),h.pm._parentLayerGroup[g]=this._layerGroup},_removeLayerFromGroup(h){if(h.pm&&h.pm._layerGroup){let g=L.Util.stamp(this._layerGroup);delete h.pm._layerGroup[g]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(h=>h.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var h;return this._map||((h=this._layers.find(g=>!!g._map))==null?void 0:h._map)||null},getLayers(h=!1,g=!0,_=!0,S=[]){let P=[];return h?this._layerGroup.getLayers().forEach(V=>{P.push(V),V instanceof L.LayerGroup&&S.indexOf(V._leaflet_id)===-1&&(S.push(V._leaflet_id),P=P.concat(V.pm.getLayers(!0,!0,!0,S)))}):P=this._layerGroup.getLayers(),_&&(P=P.filter(V=>!(V instanceof L.LayerGroup))),g&&(P=P.filter(V=>!!V.pm),P=P.filter(V=>!V._pmTempLayer),P=P.filter(V=>!L.PM.optIn&&!V.options.pmIgnore||L.PM.optIn&&V.options.pmIgnore===!1)),P},setOptions(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this.options=h,this._layers.forEach(_=>{_.pm&&(_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.setOptions(h,g)):_.pm.setOptions(h))})}}),qt.Marker=qt.extend({_shape:"Marker",initialize(h){this._layer=h,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(h={draggable:!0}){if(L.Util.setOptions(this,h),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(h){let g=h.target;g.remove(),this._fireRemove(g),this._fireRemove(this._map,g)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)}});var $t=l(Si()),ft={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let h=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=h.filter((g,_,S)=>S.indexOf(g)===_)},_removeFromCache(h){let g=this.markerCache.indexOf(h);g>-1&&this.markerCache.splice(g,1)},renderLimits(h){this.markerCache.forEach(g=>{h.includes(g)?this._markerGroup.addLayer(g):this._markerGroup.removeLayer(g)})},applyLimitFilters({latlng:h={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let g=[...this._filterClosestMarkers(h)];this.renderLimits(g)},_filterClosestMarkers(h){let g=[...this.markerCache],_=this.options.limitMarkersToCount;return _===-1?g:(g.sort((S,P)=>{let V=S._latlng.distanceTo(h),te=P._latlng.distanceTo(h);return V-te}),g.filter((S,P)=>_>-1?P<_:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(h){this._preventRenderMarkers=!!h}},yt=ft;qt.Line=qt.extend({includes:[yt],_shape:"Line",initialize(h){this._layer=h,this._enabled=!1},enable(h){if(L.Util.setOptions(this,h),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let h=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(h,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(h){return this.enabled()?this.disable():this.enable(h),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let h=this._map,g=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(h),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let _=S=>{if(Array.isArray(S[0]))return S.map(_,this);let P=S.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&S.map((V,te)=>{let ie=this.isPolygon()?(te+1)%S.length:te+1;return this._createMiddleMarker(P[te],P[ie])}),P};this._markers=_(g),this.filterMarkerGroup(),h.addLayer(this._markerGroup)},_createMarker(h){let g=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this.options.rotate?(g.on("dragstart",this._onRotateStart,this),g.on("drag",this._onRotate,this),g.on("dragend",this._onRotateEnd,this)):(g.on("click",this._onVertexClick,this),g.on("dragstart",this._onMarkerDragStart,this),g.on("move",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||g.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(g),g},_createMiddleMarker(h,g){if(!h||!g)return!1;let _=L.PM.Utils.calcMiddleLatLng(this._map,h.getLatLng(),g.getLatLng()),S=this._createMarker(_),P=L.divIcon({className:"marker-icon marker-icon-middle"});return S.setIcon(P),S.leftM=h,S.rightM=g,h._middleMarkerNext=S,g._middleMarkerPrev=S,S.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),S.on("movestart",this._onMiddleMarkerMoveStart,this),S},_onMiddleMarkerClick(h){let g=h.target;if(!this._vertexValidation("add",h))return;let _=L.divIcon({className:"marker-icon"});g.setIcon(_),this._addMarker(g,g.leftM,g.rightM)},_onMiddleMarkerMoveStart(h){let g=h.target;if(g.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",h)){g.on("move",this._onMiddleMarkerMovePrevent,this);return}g._dragging=!0,this._addMarker(g,g.leftM,g.rightM)},_onMiddleMarkerMovePrevent(h){let g=h.target;this._vertexValidationDrag(g)},_onMiddleMarkerMoveEnd(h){let g=h.target;if(g.off("move",this._onMiddleMarkerMovePrevent,this),g.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(g))return;let _=L.divIcon({className:"marker-icon"});g.setIcon(_),setTimeout(()=>{delete g._dragging},100)},_addMarker(h,g,_){h.off("movestart",this._onMiddleMarkerMoveStart,this),h.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let S=h.getLatLng(),P=this._layer._latlngs;delete h.leftM,delete h.rightM;let{indexPath:V,index:te,parentPath:ie}=L.PM.Utils.findDeepMarkerIndex(this._markers,g),ve=V.length>1?(0,$t.default)(P,ie):P,Ee=V.length>1?(0,$t.default)(this._markers,ie):this._markers;ve.splice(te+1,0,S),Ee.splice(te+1,0,h),this._layer.setLatLngs(P),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(g,h),this._createMiddleMarker(h,_)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(h,L.PM.Utils.findDeepMarkerIndex(this._markers,h).indexPath,S),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Ar(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(h){let g=this._layer,_,S;if(this.options.allowSelfIntersection?_=!1:(S=Ar(this._layer.toGeoJSON(15)),_=S.features.length>0),_){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return _;h?this._flashLayer():(g.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(S)}else g.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return _},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(h,g){h.forEach(_=>{Array.isArray(_)?this._updateDisabledMarkerStyle(_,g):_._icon&&(g&&!this._checkMarkerAllowedToDrag(_)?L.DomUtil.addClass(_._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(_._icon,"vertexmarker-disabled"))})},_removeMarker(h){let g=h.target;if(!this._vertexValidation("remove",h))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Fo(this._layer,this._layer.getLatLngs()));let _=this._layer.getLatLngs(),{indexPath:S,index:P,parentPath:V}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);if(!S)return;let te=S.length>1?(0,$t.default)(_,V):_,ie=S.length>1?(0,$t.default)(this._markers,V):this._markers,ve=V[V.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!ve&&(te.length<=2||this.isPolygon()&&te.length<=3)){this._flashLayer();return}te.splice(P,1),this._layer.setLatLngs(_),this.isPolygon()&&te.length<=2&&te.splice(0,te.length);let Ee=!1;if(te.length<=1&&(te.splice(0,te.length),V.length>1&&S.length>1&&(_=Ml(_)),this._layer.setLatLngs(_),this._initMarkers(),Ee=!0),qi(_)||this._layer.remove(),_=Ml(_),this._layer.setLatLngs(_),this._markers=Ml(this._markers),!Ee&&(ie=S.length>1?(0,$t.default)(this._markers,V):this._markers,g._middleMarkerPrev&&(this._markerGroup.removeLayer(g._middleMarkerPrev),this._removeFromCache(g._middleMarkerPrev)),g._middleMarkerNext&&(this._markerGroup.removeLayer(g._middleMarkerNext),this._removeFromCache(g._middleMarkerNext)),this._markerGroup.removeLayer(g),this._removeFromCache(g),ie)){let Ze,Ve;if(this.isPolygon()?(Ze=(P+1)%ie.length,Ve=(P+(ie.length-1))%ie.length):(Ve=P-1<0?void 0:P-1,Ze=P+1>=ie.length?void 0:P+1),Ze!==Ve){let vt=ie[Ve],At=ie[Ze];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(vt,At)}ie.splice(P,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(g,S),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(h){let g=this._layer.getLatLngs(),_=h.getLatLng(),{indexPath:S,index:P,parentPath:V}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);(S.length>1?(0,$t.default)(g,V):g).splice(P,1,_),this._layer.setLatLngs(g)},_getNeighborMarkers(h){let{indexPath:g,index:_,parentPath:S}=L.PM.Utils.findDeepMarkerIndex(this._markers,h),P=g.length>1?(0,$t.default)(this._markers,S):this._markers,V=(_+1)%P.length,te=(_+(P.length-1))%P.length,ie=P[te],ve=P[V];return{prevMarker:ie,nextMarker:ve}},_checkMarkerAllowedToDrag(h){let{prevMarker:g,nextMarker:_}=this._getNeighborMarkers(h),S=L.polyline([g.getLatLng(),h.getLatLng()]),P=L.polyline([h.getLatLng(),_.getLatLng()]),V=po(this._layer.toGeoJSON(15),S.toGeoJSON(15)).features.length,te=po(this._layer.toGeoJSON(15),P.toGeoJSON(15)).features.length;return h.getLatLng()===this._markers[0][0].getLatLng()?te+=1:h.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(V+=1),!(V<=2&&te<=2)},_onMarkerDragStart(h){let g=h.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",h))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragStart(h,_),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Fo(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(g):this._markerAllowedToDrag=null},_onMarkerDrag(h){let g=h.target;if(!this._vertexValidationDrag(g))return;let{indexPath:_,index:S,parentPath:P}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);if(!_)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(g);let V=_.length>1?(0,$t.default)(this._markers,P):this._markers,te=(S+1)%V.length,ie=(S+(V.length-1))%V.length,ve=g.getLatLng(),Ee=V[ie].getLatLng(),Ze=V[te].getLatLng();if(g._middleMarkerNext){let Ve=L.PM.Utils.calcMiddleLatLng(this._map,ve,Ze);g._middleMarkerNext.setLatLng(Ve)}if(g._middleMarkerPrev){let Ve=L.PM.Utils.calcMiddleLatLng(this._map,ve,Ee);g._middleMarkerPrev.setLatLng(Ve)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(h,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(h){let g=h.target;if(!this._vertexValidationDragEnd(g))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g),S=!this.options.allowSelfIntersection&&this.hasSelfIntersection();S&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(S=!1);let P=!this.options.allowSelfIntersection&&S;if(this._fireMarkerDragEnd(h,_,P),P){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(h,_);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(h){let g=h.target;if(g._dragging)return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireVertexClick(h,_)}}),qt.Polygon=qt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(h){let{prevMarker:g,nextMarker:_}=this._getNeighborMarkers(h),S=L.polyline([g.getLatLng(),h.getLatLng()]),P=L.polyline([h.getLatLng(),_.getLatLng()]),V=po(this._layer.toGeoJSON(15),S.toGeoJSON(15)).features.length,te=po(this._layer.toGeoJSON(15),P.toGeoJSON(15)).features.length;return!(V<=2&&te<=2)}}),qt.Rectangle=qt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let h=this._map,g=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,h.addLayer(this._markerGroup),this._markers=[],this._markers[0]=g.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((_,S)=>{let P=this._cornerMarkers.find(V=>V._index===S);P&&P.setLatLng(_)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(h,g){let _=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(_,"vertexPane"),_._origLatLng=h,_._index=g,_._pmTempLayer=!0,_.on("click",this._onVertexClick,this),this._markerGroup.addLayer(_),_},_addMarkerEvents(){this._markers[0].forEach(h=>{h.on("dragstart",this._onMarkerDragStart,this),h.on("drag",this._onMarkerDrag,this),h.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||h.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(h){if(!this._vertexValidation("move",h))return;let g=h.target,_=this._cornerMarkers;g._oppositeCornerLatLng=_.find(P=>P._index===(g._index+2)%4).getLatLng(),g._snapped=!1;let{indexPath:S}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragStart(h,S)},_onMarkerDrag(h){let g=h.target;if(!this._vertexValidationDrag(g)||g._index===void 0)return;this._adjustRectangleForMarkerMove(g);let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDrag(h,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(h){let g=h.target;if(!this._vertexValidationDragEnd(g))return;this._cornerMarkers.forEach(S=>{delete S._oppositeCornerLatLng});let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragEnd(h,_),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(h){L.extend(h._origLatLng,h._latlng);let g=L.PM.Utils._getRotatedRectangle(h.getLatLng(),h._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(g),this._adjustAllMarkers(h),this._layer.redraw()},_adjustAllMarkers(h){let g=this._layer.getLatLngs()[0];if(g&&g.length!==4&&g.length>0)g.forEach((_,S)=>{this._cornerMarkers[S].setLatLng(_)}),this._cornerMarkers.slice(g.length).forEach(_=>{_.setLatLng(g[0])});else if(!g||!g.length)console.error("The layer has no LatLngs");else{let _=g.findIndex(S=>h.getLatLng().equals(S));_>-1?(this._cornerMarkers[(h._index+1)%4].setLatLng(g[(_+1)%4]),this._cornerMarkers[(h._index+2)%4].setLatLng(g[(_+2)%4]),this._cornerMarkers[(h._index+3)%4].setLatLng(g[(_+3)%4])):this._cornerMarkers.forEach(S=>{S.setLatLng(g[S._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(la(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let h=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(h[0],h[2],this.getAngle(),this._map||this)}}),qt.CircleMarker=qt.extend({_shape:"CircleMarker",initialize(h){this._layer=h,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(h={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,h),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let h=this._map;this._helperLayers&&(this._helperLayers.removeFrom(h),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(h);let g=this._layer.getLatLng(),_=this._layer._radius,S=this._getLatLngOnCircle(g,_);this._centerMarker=this._createCenterMarker(g),this._outerMarker=this._createOuterMarker(S),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(h,g){let _=this._map.project(h),S=L.point(_.x+g,_.y);return this._map.unproject(S)},_createHintLine(h,g){let _=h.getLatLng(),S=g.getLatLng();this._hintline=L.polyline([_,S],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(h){let g=this._createMarker(h);return this.options.draggable?(L.DomUtil.addClass(g._icon,"leaflet-pm-draggable"),g.on("move",this._moveCircle,this)):g.dragging.disable(),g},_createOuterMarker(h){let g=this._createMarker(h);return g.on("drag",this._resizeCircle,this),g},_createMarker(h){let g=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._origLatLng=h,g._pmTempLayer=!0,g.on("dragstart",this._onMarkerDragStart,this),g.on("drag",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),g.on("click",this._onVertexClick,this),this._helperLayers.addLayer(g),g},_moveCircle(h){if(h.target._cancelDragEventChain)return;let g=this._centerMarker.getLatLng();this._layer.setLatLng(g);let _=this._layer._radius,S=this._getLatLngOnCircle(g,_);this._outerMarker._latlng=S,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let h=this._layer.getLatLng(),g=this._layer._radius,_=this._getLatLngOnCircle(h,g);this._outerMarker.setLatLng(_),this._centerMarker.setLatLng(h),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng();this._hintline.setLatLngs([h,g])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(h){this._vertexValidation("move",h)&&this._fireMarkerDragStart(h)},_onMarkerDrag(h){let g=h.target;g instanceof L.Marker&&!this._vertexValidationDrag(g)||this._fireMarkerDrag(h)},_onMarkerDragEnd(h){this._extedingMarkerDragEnd();let g=h.target;this._vertexValidationDragEnd(g)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(h))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let h=this._layer._map||this._map;if(h){let g=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),h,this._layer.getLatLng()),_=L.circle(this._layer.getLatLng(),this._layer.options);_.setRadius(g);let S=h&&h.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(_,200,!S).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(_,200,!S),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);return this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?g=ru(this._map,h,g,this._getMinDistanceInMeter(h)):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(g=ru(this._map,h,g,this._getMaxDistanceInMeter(h))),g},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(h,g){return this._map.project(h).distanceTo(this._map.project(g))},_getMinDistanceInMeter(h){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,h)},_getMaxDistanceInMeter(h){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,h)},_onVertexClick(h){h.target._dragging||this._fireVertexClick(h,void 0)}}),qt.Circle=qt.CircleMarker.extend({_shape:"Circle",initialize(h){this._layer=h,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(h){L.PM.Edit.CircleMarker.prototype.enable.call(this,h||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let h=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(h,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let h=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!h).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!h),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(h,g){return this._map.distance(h,g)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(h){h.target._dragging||this._fireVertexClick(h,void 0)}}),qt.ImageOverlay=qt.extend({_shape:"ImageOverlay",initialize(h){this._layer=h,this._enabled=!1},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},enabled(){return this._enabled},enable(h={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,h),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let h=this._layer.getBounds(),g=h.getNorthWest(),_=h.getNorthEast(),S=h.getSouthEast(),P=h.getSouthWest();return[g,_,S,P]}}),qt.Text=qt.extend({_shape:"Text",initialize(h){this._layer=h,this._enabled=!1},enable(h){if(L.Util.setOptions(this,h),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let h=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),h.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let h=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,g=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${h}px`,this.textArea.style.width=`${g}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(h){h.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(h={}){let g=this._hasFocus;this._hasFocus=h.type==="focus",!g!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(h){h&&(this.textArea.value=h),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let g=this.options.className.split(" ");this.textArea.classList.add(...g)}let h=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(h),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(h=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),h===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(h){h.preventDefault()}});var Qt=function(h,g,_,S,P,V){this._matrix=[h,g,_,S,P,V]};Qt.init=()=>new L.PM.Matrix(1,0,0,1,0,0),Qt.prototype={transform(h){return this._transform(h.clone())},_transform(h){let g=this._matrix,{x:_,y:S}=h;return h.x=g[0]*_+g[1]*S+g[4],h.y=g[2]*_+g[3]*S+g[5],h},untransform(h){let g=this._matrix;return new L.Point((h.x/g[0]-g[4])/g[0],(h.y/g[2]-g[5])/g[2])},clone(){let h=this._matrix;return new L.PM.Matrix(h[0],h[1],h[2],h[3],h[4],h[5])},translate(h){if(h===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let g,_;return typeof h=="number"?(g=h,_=h):(g=h.x,_=h.y),this._add(1,0,0,1,g,_)},scale(h,g){if(h===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let _,S;return g=g||L.point(0,0),typeof h=="number"?(_=h,S=h):(_=h.x,S=h.y),this._add(_,0,0,S,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},rotate(h,g){let _=Math.cos(h),S=Math.sin(h);return g=g||new L.Point(0,0),this._add(_,S,-S,_,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(h,g,_,S,P,V){let te=[[],[],[]],ie=this._matrix,ve=[[ie[0],ie[2],ie[4]],[ie[1],ie[3],ie[5]],[0,0,1]],Ee=[[h,_,P],[g,S,V],[0,0,1]],Ze;h&&h instanceof L.PM.Matrix&&(ie=h._matrix,Ee=[[ie[0],ie[2],ie[4]],[ie[1],ie[3],ie[5]],[0,0,1]]);for(let Ve=0;Ve<3;Ve+=1)for(let vt=0;vt<3;vt+=1){Ze=0;for(let At=0;At<3;At+=1)Ze+=ve[Ve][At]*Ee[At][vt];te[Ve][vt]=Ze}return this._matrix=[te[0][0],te[1][0],te[0][1],te[1][1],te[0][2],te[1][2]],this}};var cn=Qt,nn={calcMiddleLatLng(h,g,_){let S=h.project(g),P=h.project(_);return h.unproject(S._add(P)._divideBy(2))},findLayers(h){let g=[];return h.eachLayer(_=>{(_ instanceof L.Polyline||_ instanceof L.Marker||_ instanceof L.Circle||_ instanceof L.CircleMarker||_ instanceof L.ImageOverlay)&&g.push(_)}),g=g.filter(_=>!!_.pm),g=g.filter(_=>!_._pmTempLayer),g=g.filter(_=>!L.PM.optIn&&!_.options.pmIgnore||L.PM.optIn&&_.options.pmIgnore===!1),g},circleToPolygon(h,g=60,_=!0){let S=h.getLatLng(),P=h.getRadius(),V=ki(S,P,g,0,_),te=[];for(let ie=0;ie<V.length;ie+=1){let ve=[V[ie].lat,V[ie].lng];te.push(ve)}return L.polygon(te,h.options)},disablePopup(h){h.getPopup()&&(h._tempPopupCopy=h.getPopup(),h.unbindPopup())},enablePopup(h){h._tempPopupCopy&&(h.bindPopup(h._tempPopupCopy),delete h._tempPopupCopy)},_fireEvent(h,g,_,S=!1){h.fire(g,_,S);let{groups:P}=this.getAllParentGroups(h);P.forEach(V=>{V.fire(g,_,S)})},getAllParentGroups(h){let g=[],_=[],S=P=>{for(let V in P._eventParents)if(g.indexOf(V)===-1){g.push(V);let te=P._eventParents[V];_.push(te),S(te)}};return!h._pmLastGroupFetch||!h._pmLastGroupFetch.time||new Date().getTime()-h._pmLastGroupFetch.time>1e3?(S(h),h._pmLastGroupFetch={time:new Date().getTime(),groups:_,groupIds:g},{groupIds:g,groups:_}):{groups:h._pmLastGroupFetch.groups,groupIds:h._pmLastGroupFetch.groupIds}},createGeodesicPolygon:ki,getTranslation:nr,findDeepCoordIndex(h,g,_=!0){let S,P=te=>(ie,ve)=>{let Ee=te.concat(ve);if(_){if(ie.lat&&ie.lat===g.lat&&ie.lng===g.lng)return S=Ee,!0}else if(ie.lat&&L.latLng(ie).equals(g))return S=Ee,!0;return Array.isArray(ie)&&ie.some(P(Ee))};h.some(P([]));let V={};return S&&(V={indexPath:S,index:S[S.length-1],parentPath:S.slice(0,S.length-1)}),V},findDeepMarkerIndex(h,g){let _,S=V=>(te,ie)=>{let ve=V.concat(ie);return te._leaflet_id===g._leaflet_id?(_=ve,!0):Array.isArray(te)&&te.some(S(ve))};h.some(S([]));let P={};return _&&(P={indexPath:_,index:_[_.length-1],parentPath:_.slice(0,_.length-1)}),P},_getIndexFromSegment(h,g){if(g&&g.length===2){let _=this.findDeepCoordIndex(h,g[0]),S=this.findDeepCoordIndex(h,g[1]),P=Math.max(_.index,S.index);return(_.index===0||S.index===0)&&P!==1&&(P+=1),{indexA:_,indexB:S,newIndex:P,indexPath:_.indexPath,parentPath:_.parentPath}}return null},_getRotatedRectangle(h,g,_,S){let P=Ge(S,h),V=Ge(S,g),te=_*Math.PI/180,ie=Math.cos(te),ve=Math.sin(te),Ee=(V.x-P.x)*ie+(V.y-P.y)*ve,Ze=(V.y-P.y)*ie-(V.x-P.x)*ve,Ve=Ee*ie+P.x,vt=Ee*ve+P.y,At=-Ze*ve+P.x,Kt=Ze*ie+P.y,yn=dt(S,P),Sn=dt(S,{x:Ve,y:vt}),sr=dt(S,V),Ke=dt(S,{x:At,y:Kt});return[yn,Sn,sr,Ke]},pxRadiusToMeterRadius(h,g,_){let S=g.project(_),P=L.point(S.x+h,S.y);return g.distance(g.unproject(P),_)}},An=nn;L.PM=L.PM||{version:Jl.version,Map:xs,Toolbar:Pl,Draw:Yi,Edit:qt,Utils:An,Matrix:cn,activeLang:"en",optIn:!1,initialize(h){this.addInitHooks(h)},setOptIn(h){this.optIn=!!h},addInitHooks(){function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(h);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(g);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(_);function S(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(S);function P(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(P);function V(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(V);function te(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(te);function ie(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(ie);function ve(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(ve)},reInitLayer(h){h instanceof L.LayerGroup&&h.eachLayer(g=>{this.reInitLayer(g)}),h.pm||L.PM.optIn&&h.options.pmIgnore!==!1||h.options.pmIgnore||(h instanceof L.Map?h.pm=new L.PM.Map(h):h instanceof L.Marker?h.options.textMarker?(h.pm=new L.PM.Edit.Text(h),h.pm._initTextMarker(),h.pm._createTextMarker(!1)):h.pm=new L.PM.Edit.Marker(h):h instanceof L.Circle?h.pm=new L.PM.Edit.Circle(h):h instanceof L.CircleMarker?h.pm=new L.PM.Edit.CircleMarker(h):h instanceof L.Rectangle?h.pm=new L.PM.Edit.Rectangle(h):h instanceof L.Polygon?h.pm=new L.PM.Edit.Polygon(h):h instanceof L.Polyline?h.pm=new L.PM.Edit.Line(h):h instanceof L.LayerGroup?h.pm=new L.PM.Edit.LayerGroup(h):h instanceof L.ImageOverlay&&(h.pm=new L.PM.Edit.ImageOverlay(h)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(h){let g=this._map.mouseEventToLayerPoint(h),_,S;for(let P=this._drawFirst;P;P=P.next)_=P.layer,_.options.interactive&&_._containsPoint(g)&&(!(h.type==="click"||h.type==="preclick")||!this._map._draggableMoved(_))&&(S=_);S&&(L.DomEvent.fakeStop(h),this._fireEvent([S],h))}}),L.PM.initialize()})();var cU={exports:{}};(function(t){(function(e){var n;n=en,t.exports=e(n)})(function(e){return e.Polyline._flat=e.LineUtil.isFlat||e.Polyline._flat||function(n){return!e.Util.isArray(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"},e.GeometryUtil=e.extend(e.GeometryUtil||{},{distance:function(n,r,i){return n.latLngToLayerPoint(r).distanceTo(n.latLngToLayerPoint(i))},distanceSegment:function(n,r,i,s){var o=n.latLngToLayerPoint(r),a=n.latLngToLayerPoint(i),l=n.latLngToLayerPoint(s);return e.LineUtil.pointToSegmentDistance(o,a,l)},readableDistance:function(n,r){var i=r!=="imperial",s;return i?n>1e3?s=(n/1e3).toFixed(2)+" km":s=n.toFixed(1)+" m":(n*=1.09361,n>1760?s=(n/1760).toFixed(2)+" miles":s=n.toFixed(1)+" yd"),s},belongsSegment:function(n,r,i,s){s=s===void 0?.2:s;var o=r.distanceTo(i),a=r.distanceTo(n)+n.distanceTo(i)-o;return a/o<s},length:function(n){var r=e.GeometryUtil.accumulatedLengths(n);return r.length>0?r[r.length-1]:0},accumulatedLengths:function(n){if(typeof n.getLatLngs=="function"&&(n=n.getLatLngs()),n.length===0)return[];for(var r=0,i=[0],s=0,o=n.length-1;s<o;s++)r+=n[s].distanceTo(n[s+1]),i.push(r);return i},closestOnSegment:function(n,r,i,s){var o=n.getMaxZoom();o===1/0&&(o=n.getZoom());var a=n.project(r,o),l=n.project(i,o),c=n.project(s,o),d=e.LineUtil.closestPointOnSegment(a,l,c);return n.unproject(d,o)},closestOnCircle:function(n,r){const i=n.getLatLng(),s=n.getRadius(),o=typeof s=="number"?s:s.radius,a=r.lng,l=r.lat,c=i.lng,d=i.lat,p=a-c,v=l-d,m=Math.sqrt(p*p+v*v),x=c+p/m*o,E=d+v/m*o;return new e.LatLng(E,x)},closest:function(n,r,i,s){var o,a=1/0,l=null,c,d,p,v;if(r instanceof Array)if(r[0]instanceof Array&&typeof r[0][0]!="number"){for(c=0;c<r.length;c++)v=e.GeometryUtil.closest(n,r[c],i,s),v&&v.distance<a&&(a=v.distance,l=v);return l}else if(r[0]instanceof e.LatLng||typeof r[0][0]=="number"||typeof r[0].lat=="number")r=e.polyline(r);else return l;if(!(r instanceof e.Polyline))return l;if(o=JSON.parse(JSON.stringify(r.getLatLngs().slice(0))),r instanceof e.Polygon){var m=function(D){if(e.Polyline._flat(D))D.push(D[0]);else for(var k=0;k<D.length;k++)m(D[k])};m(o)}if(e.Polyline._flat(o)){if(s){for(c=0,d=o.length;c<d;c++){var x=o[c];p=e.GeometryUtil.distance(n,i,x),p<a&&(a=p,l=x,l.distance=p)}return l}for(c=0,d=o.length;c<d-1;c++){var E=o[c],T=o[c+1];p=e.GeometryUtil.distanceSegment(n,i,E,T),p<=a&&(a=p,l=e.GeometryUtil.closestOnSegment(n,i,E,T),l.distance=p)}return l}else{for(c=0;c<o.length;c++)v=e.GeometryUtil.closest(n,o[c],i,s),v.distance<a&&(a=v.distance,l=v);return l}},closestLayer:function(n,r,i){for(var s=1/0,o=null,a=null,l=1/0,c=0,d=r.length;c<d;c++){var p=r[c];if(p instanceof e.LayerGroup){var v=e.GeometryUtil.closestLayer(n,p.getLayers(),i);v.distance<s&&(s=v.distance,o=v)}else p instanceof e.Circle?(a=this.closestOnCircle(p,i),l=e.GeometryUtil.distance(n,i,a)):typeof p.getLatLng=="function"?(a=p.getLatLng(),l=e.GeometryUtil.distance(n,i,a)):(a=e.GeometryUtil.closest(n,p,i),a&&(l=a.distance)),l<s&&(s=l,o={layer:p,latlng:a,distance:l})}return o},nClosestLayers:function(n,r,i,s){if(s=typeof s=="number"?s:r.length,s<1||r.length<1)return null;for(var o=[],a,l,c=0,d=r.length;c<d;c++){var p=r[c];if(p instanceof e.LayerGroup){var v=e.GeometryUtil.closestLayer(n,p.getLayers(),i);o.push(v)}else p instanceof e.Circle?(l=this.closestOnCircle(p,i),a=e.GeometryUtil.distance(n,i,l)):typeof p.getLatLng=="function"?(l=p.getLatLng(),a=e.GeometryUtil.distance(n,i,l)):(l=e.GeometryUtil.closest(n,p,i),l&&(a=l.distance)),o.push({layer:p,latlng:l,distance:a})}return o.sort(function(m,x){return m.distance-x.distance}),o.length>s?o.slice(0,s):o},layersWithin:function(n,r,i,s){s=typeof s=="number"?s:1/0;for(var o=[],a=null,l=0,c=0,d=r.length;c<d;c++){var p=r[c];typeof p.getLatLng=="function"?(a=p.getLatLng(),l=e.GeometryUtil.distance(n,i,a)):(a=e.GeometryUtil.closest(n,p,i),a&&(l=a.distance)),a&&l<s&&o.push({layer:p,latlng:a,distance:l})}var v=o.sort(function(m,x){return m.distance-x.distance});return v},closestLayerSnap:function(n,r,i,s,o){s=typeof s=="number"?s:1/0,o=typeof o=="boolean"?o:!0;var a=e.GeometryUtil.closestLayer(n,r,i);if(!a||a.distance>s)return null;if(o&&typeof a.layer.getLatLngs=="function"){var l=e.GeometryUtil.closest(n,a.layer,a.latlng,!0);l.distance<s&&(a.latlng=l,a.distance=e.GeometryUtil.distance(n,l,i))}return a},interpolateOnPointSegment:function(n,r,i){return e.point(n.x*(1-i)+i*r.x,n.y*(1-i)+i*r.y)},interpolateOnLine:function(n,r,i){r=r instanceof e.Polyline?r.getLatLngs():r;var s=r.length;if(s<2)return null;if(i=Math.max(Math.min(i,1),0),i===0)return{latLng:r[0]instanceof e.LatLng?r[0]:e.latLng(r[0]),predecessor:-1};if(i==1)return{latLng:r[r.length-1]instanceof e.LatLng?r[r.length-1]:e.latLng(r[r.length-1]),predecessor:r.length-2};var o=n.getMaxZoom();o===1/0&&(o=n.getZoom());for(var a=[],l=0,c=0;c<s;c++)a[c]=n.project(r[c],o),c>0&&(l+=a[c-1].distanceTo(a[c]));for(var d=l*i,p=0,v=0,c=0;v<d;c++){var m=a[c],x=a[c+1];p=v,v+=m.distanceTo(x)}if(m==null&&x==null)var m=a[0],x=a[1],c=1;var E=v-p!==0?(d-p)/(v-p):0,T=e.GeometryUtil.interpolateOnPointSegment(m,x,E);return{latLng:n.unproject(T,o),predecessor:c-1}},locateOnLine:function(n,r,i){var s=r.getLatLngs();if(i.equals(s[0]))return 0;if(i.equals(s[s.length-1]))return 1;for(var o=e.GeometryUtil.closest(n,r,i,!1),a=e.GeometryUtil.accumulatedLengths(s),l=a[a.length-1],c=0,d=!1,p=0,v=s.length-1;p<v;p++){var m=s[p],x=s[p+1];if(c=a[p],e.GeometryUtil.belongsSegment(o,m,x,.001)){c+=m.distanceTo(o),d=!0;break}}if(!d)throw"Could not interpolate "+i.toString()+" within "+r.toString();return c/l},reverse:function(n){return e.polyline(n.getLatLngs().slice(0).reverse())},extract:function(n,r,i,s){if(i>s)return e.GeometryUtil.extract(n,e.GeometryUtil.reverse(r),1-i,1-s);i=Math.max(Math.min(i,1),0),s=Math.max(Math.min(s,1),0);var o=r.getLatLngs(),a=e.GeometryUtil.interpolateOnLine(n,r,i),l=e.GeometryUtil.interpolateOnLine(n,r,s);if(i==s){var c=e.GeometryUtil.interpolateOnLine(n,r,s);return[c.latLng]}a.predecessor==-1&&(a.predecessor=0),l.predecessor==-1&&(l.predecessor=0);var d=o.slice(a.predecessor+1,l.predecessor+1);return d.unshift(a.latLng),d.push(l.latLng),d},isBefore:function(n,r){if(!r)return!1;var i=n.getLatLngs(),s=r.getLatLngs();return i[i.length-1].equals(s[0])},isAfter:function(n,r){if(!r)return!1;var i=n.getLatLngs(),s=r.getLatLngs();return i[0].equals(s[s.length-1])},startsAtExtremity:function(n,r){if(!r)return!1;var i=n.getLatLngs(),s=r.getLatLngs(),o=i[0];return o.equals(s[0])||o.equals(s[s.length-1])},computeAngle:function(n,r){return Math.atan2(r.y-n.y,r.x-n.x)*180/Math.PI},computeSlope:function(n,r){var i=(r.y-n.y)/(r.x-n.x),s=n.y-i*n.x;return{a:i,b:s}},rotatePoint:function(n,r,i,s){var o=n.getMaxZoom();o===1/0&&(o=n.getZoom());var a=i*Math.PI/180,l=n.project(r,o),c=n.project(s,o),d=Math.cos(a)*(l.x-c.x)-Math.sin(a)*(l.y-c.y)+c.x,p=Math.sin(a)*(l.x-c.x)+Math.cos(a)*(l.y-c.y)+c.y;return n.unproject(new e.Point(d,p),o)},bearing:function(n,r){var i=Math.PI/180,s=n.lat*i,o=r.lat*i,a=n.lng*i,l=r.lng*i,c=Math.sin(l-a)*Math.cos(o),d=Math.cos(s)*Math.sin(o)-Math.sin(s)*Math.cos(o)*Math.cos(l-a),p=(Math.atan2(c,d)*180/Math.PI+360)%360;return p>=180?p-360:p},destination:function(n,r,i){r=(r+360)%360;var s=Math.PI/180,o=180/Math.PI,a=e.CRS.Earth.R,l=n.lng*s,c=n.lat*s,d=r*s,p=Math.sin(c),v=Math.cos(c),m=Math.cos(i/a),x=Math.sin(i/a),E=Math.asin(p*m+v*x*Math.cos(d)),T=l+Math.atan2(Math.sin(d)*x*v,m-p*Math.sin(E));return T=T*o,T=T>180?T-360:T<-180?T+360:T,e.latLng([E*o,T])},angle:function(n,r,i){var s=n.latLngToContainerPoint(r),o=n.latLngToContainerPoint(i),a=Math.atan2(o.y-s.y,o.x-s.x)*180/Math.PI+90;return a+=a<0?360:0,a},destinationOnSegment:function(n,r,i,s){var o=e.GeometryUtil.angle(n,r,i),a=e.GeometryUtil.destination(r,o,s);return e.GeometryUtil.closestOnSegment(n,a,r,i)}}),e.GeometryUtil})})(cU);L.Map.mergeOptions({almostOver:!0,almostDistance:25,almostSamplingPeriod:50,almostOnMouseMove:!0});L.Handler.AlmostOver=L.Handler.extend({includes:L.Evented||L.Mixin.Events,initialize:function(t){this._map=t,this._layers=[],this._previous=null,this._marker=null,this._buffer=0,this.__mouseMoveSampling=function(){var e=new Date;return function(n){var r=new Date,i=r-e<this._map.options.almostSamplingPeriod;i||this._layers.length===0||(e=r,this._map.fire("mousemovesample",{latlng:n.latlng}))}}()},addHooks:function(){this._map.options.almostOnMouseMove&&(this._map.on("mousemove",this.__mouseMoveSampling,this),this._map.on("mousemovesample",this._onMouseMove,this)),this._map.on("click dblclick",this._onMouseClick,this),this._map;function t(){this._buffer=this._map.layerPointToLatLng([0,0]).lat-this._map.layerPointToLatLng([this._map.options.almostDistance,this._map.options.almostDistance]).lat}this._map.on("viewreset zoomend",t,this),this._map.whenReady(t,this)},removeHooks:function(){this._map.off("mousemovesample"),this._map.off("mousemove",this.__mouseMoveSampling,this),this._map.off("click dblclick",this._onMouseClick,this)},addLayer:function(t){typeof t.eachLayer=="function"?t.eachLayer(function(e){this.addLayer(e)},this):(typeof this.indexLayer=="function"&&this.indexLayer(t),this._layers.push(t))},removeLayer:function(t){if(typeof t.eachLayer=="function")t.eachLayer(function(n){this.removeLayer(n)},this);else{typeof this.unindexLayer=="function"&&this.unindexLayer(t);var e=this._layers.indexOf(t);0<=e&&this._layers.splice(e,1)}this._previous=null},getClosest:function(t){var e=L.GeometryUtil.closestLayerSnap,n=this._map.options.almostDistance,r=[];return typeof this.searchBuffer=="function"?r=this.searchBuffer(t,this._buffer):r=this._layers,e(this._map,r,t,n,!1)},_onMouseMove:function(t){var e=this.getClosest(t.latlng);e?(this._previous?L.stamp(this._previous.layer)!=L.stamp(e.layer)&&(this._map.fire("almost:out",{layer:this._previous.layer}),this._map.fire("almost:over",{layer:e.layer,latlng:e.latlng})):this._map.fire("almost:over",{layer:e.layer,latlng:e.latlng}),this._map.fire("almost:move",{layer:e.layer,latlng:e.latlng})):this._previous&&this._map.fire("almost:out",{layer:this._previous.layer}),this._previous=e},_onMouseClick:function(t){var e=this.getClosest(t.latlng);e&&this._map.fire("almost:"+t.type,{layer:e.layer,latlng:e.latlng})}});L.LayerIndexMixin!==void 0&&L.Handler.AlmostOver.include(L.LayerIndexMixin);L.Map.addInitHook("addHandler","almostOver",L.Handler.AlmostOver);const Rv=(t,e)=>{if(!t||typeof t!="string"||!t.startsWith("#"))return`rgba(0, 0, 0, ${e})`;const n=parseInt(t.slice(1,3),16),r=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return`rgba(${n}, ${r}, ${i}, ${e})`},hU=(t,e)=>{t.style.fontSize=e.fontSize,t.style.color=e.color,t.style.backgroundColor=Rv(e.backgroundColor,e.backgroundOpacity),e.hasBorder?t.style.border=`${e.borderWidth} solid ${Rv(e.borderColor,e.borderOpacity)}`:t.style.border="none",t.style.padding=e.padding,t.style.borderRadius=e.borderRadius},_a=t=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const n=en.DomUtil.create("div","drawing-help-message");return n.innerHTML=t,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n};function dU(t,e,n){const r=156543.03392*Math.cos(e*Math.PI/180)/Math.pow(2,n);return t/r}const Fa=(t,e="m",n="")=>{let r,i;return e==="m²"?t>=1e4?(r=(t/1e4).toFixed(2),i="ha"):(r=t.toFixed(2),i="m²"):e==="m"?t>=1e3?(r=(t/1e3).toFixed(2),i="km"):(r=t.toFixed(2),i="m"):(r=t.toFixed(2),i=e),n?`${n}: ${r} ${i}`:`${r} ${i}`},fU=t=>({...t,clientX:t.clientX,clientY:t.clientY,button:t.button||0,buttons:t.buttons||0,altKey:t.altKey||!1}),pU=(t,e)=>{let n;return function(...r){window.clearTimeout(n),n=window.setTimeout(()=>t.apply(this,r),e)}},jf=(t,e)=>{let n=0;return function(...r){const i=Date.now();if(!(i-n<e))return n=i,t.apply(this,r)}};function gU(){const t=_t(null),e=_t(null),n=_t(null),r=_t(null),i=_t(""),s=_t(null),o=_t(!1),a=_t(null);window.addEventListener("clearControlPoints",()=>{s.value=null,n.value&&n.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(j=>j.remove()),document.querySelectorAll(".drawing-help-message").forEach(j=>j.remove())}),$u(()=>{window.removeEventListener("clearControlPoints",()=>{}),t.value&&(t.value.remove(),t.value=null)});const l=(j,Z="Double-cliquez pour éditer")=>{const ae={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},de=(ee,be)=>{var Je;const je=((Je=t.value)==null?void 0:Je.getZoom())||14,We=j.lat,Qe=dU(be.physicalSize,We,je);return`<div class="text-container" style="width:${Qe}px;height:${Qe}px;transform:rotate(${be.rotation}deg)">
        <div class="text-annotation" style="font-size:${Qe*.2}px;color:${be.color};background-color:${Rv(be.backgroundColor,be.backgroundOpacity)};border:${be.hasBorder?be.borderWidth+" solid "+Rv(be.borderColor,be.borderOpacity):"none"};padding:${be.padding};border-radius:${be.borderRadius}">${ee}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},ge=()=>{if(!t.value)return;const ee=oe.getIcon(),be={html:de(oe.properties.text,oe.properties.style),className:ee.options.className};oe.setIcon(en.divIcon(be))},me=en.divIcon({html:de(Z,ae),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),oe=en.marker(j,{icon:me,draggable:!1,pmIgnore:!0});oe.properties={type:"text",text:Z,style:{...ae}},t.value&&(t.value.on("zoomend",ge),oe.on("remove",()=>{var ee;(ee=t.value)==null||ee.off("zoomend",ge)})),ge();let re=!1,Te=!1,Le=0,qe=0;const se=ee=>{if(!t.value)return;const be=ee.target;if(be.classList.contains("rotate")){re=!0;const je=oe.getLatLng(),We=t.value.mouseEventToLatLng(ee);Le=Math.atan2(We.lat-je.lat,We.lng-je.lng)*180/Math.PI,qe=oe.properties.style.rotation||0}else be.classList.contains("move")&&(Te=!0);document.addEventListener("mousemove",le),document.addEventListener("mouseup",he)},le=ee=>{if(!(!Te||!t.value)){if(re){const be=oe.getLatLng(),je=t.value.mouseEventToLatLng(ee),We=Math.atan2(je.lat-be.lat,je.lng-be.lng)*180/Math.PI,Qe=(qe+(We-Le))%360;oe.properties.style.rotation=Qe;const Je=oe.getIcon(),st={html:de(oe.properties.text,oe.properties.style),className:Je.options.className};oe.setIcon(en.divIcon(st))}else if(Te){const be=fU(ee),je=t.value.mouseEventToLatLng(be);oe.setLatLng(je)}}},he=()=>{re=!1,Te=!1,document.removeEventListener("mousemove",le),document.removeEventListener("mouseup",he)};return oe.on("add",()=>{const ee=oe.getElement();ee&&ee.querySelectorAll(".control-button").forEach(je=>{je.addEventListener("mousedown",se)})}),oe.on("remove",()=>{const ee=oe.getElement();ee&&ee.querySelectorAll(".control-button").forEach(je=>{je.removeEventListener("mousedown",se)})}),oe.on("dblclick",ee=>{var st;en.DomEvent.stopPropagation(ee);const be=(st=oe.getElement())==null?void 0:st.querySelector(".text-annotation");if(!be)return;be.contentEditable="true",be.focus(),be.classList.add("editing");const je=window.getSelection(),We=document.createRange();We.selectNodeContents(be),je==null||je.removeAllRanges(),je==null||je.addRange(We);const Qe=()=>{be.contentEditable="false",be.classList.remove("editing");const Pt=be.innerText.trim();if(Pt){oe.properties.text=Pt;const Bt=oe.getIcon(),Ht={html:de(Pt,oe.properties.style),className:Bt.options.className};oe.setIcon(en.divIcon(Ht))}be.removeEventListener("blur",Qe),be.removeEventListener("keydown",Je)},Je=Pt=>{Pt.key==="Enter"&&!Pt.shiftKey&&(Pt.preventDefault(),Qe())};be.addEventListener("blur",Qe),be.addEventListener("keydown",Je)}),oe},c=(j,Z)=>{const ae=en.DomUtil.create("div","measure-tooltip");if(ae.innerHTML=Z,ae.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(ae),t.value){const de=t.value.latLngToContainerPoint(j);ae.style.left=`${de.x+10}px`,ae.style.top=`${de.y-25}px`}return ae},d=jf((j,Z,ae)=>{if(j&&(j.innerHTML=ae,t.value)){const de=t.value.latLngToContainerPoint(Z);j.style.left=`${de.x+10}px`,j.style.top=`${de.y-25}px`}},100),p=(j,Z,ae)=>{j.on("mouseover",()=>{const de=c(j.getLatLng(),ae());j.measureDiv=de}),j.on("mousemove",de=>{j.measureDiv&&t.value&&d(j.measureDiv,de.latlng,ae())}),j.on("mouseout",()=>{j.measureDiv&&(j.measureDiv.remove(),j.measureDiv=void 0)})};let v=[];const m=()=>{var j;v.cleanup&&v.cleanup(),n.value&&n.value.clearLayers(),v=[],(j=r.value)==null||j.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(Z=>Z.remove())},x=(j,Z="#2563EB")=>{const ae=typeof window<"u"&&window.innerWidth<768,de=en.circleMarker(j,{radius:ae?14:6,color:Z,fillColor:Z,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(de),de},E=(j,Z)=>{var de,ge,me,oe,re,Te;console.log("Input layer:",{type:Z,instanceof:{Polygon:j instanceof en.Polygon,Polyline:j instanceof en.Polyline,Line:j instanceof ms},options:j.options});const ae={type:Z,style:j.options||{}};try{if(j instanceof en.Polygon)try{const qe=j.getLatLngs()[0].map(le=>[le.lng,le.lat]);qe.push(qe[0]);const se=zc([qe]);ae.surface=Gh(se),ae.perimeter=_j(lm(qe),{units:"meters"})}catch(Le){console.error("Erreur lors du calcul des propriétés du polygone",Le)}else if(j instanceof en.Polyline&&!(j instanceof en.Polygon))try{const Le=j.getLatLngs();let qe=0;for(let se=1;se<Le.length;se++)qe+=Le[se].distanceTo(Le[se-1]);ae.length=qe}catch(Le){console.error("Erreur lors du calcul de la longueur de la ligne",Le)}ae.style={...ae.style,color:((de=j.options)==null?void 0:de.color)||"#3388ff",weight:((ge=j.options)==null?void 0:ge.weight)||3,opacity:((me=j.options)==null?void 0:me.opacity)||1,fillColor:((oe=j.options)==null?void 0:oe.fillColor)||"#3388ff",fillOpacity:((re=j.options)==null?void 0:re.fillOpacity)||.2,dashArray:((Te=j.options)==null?void 0:Te.dashArray)||""}}catch(Le){console.error("Error calculating shape properties:",Le)}return ae},T=()=>{if(!t.value||!t.value.almostOver||!e.value)return;const j=e.value.getLayers().filter(Z=>Z instanceof ms||Z instanceof en.Polyline&&!(Z instanceof en.Polygon)||Z instanceof Vl||Z instanceof gl);j.forEach(Z=>{var ae;(ae=t.value)==null||ae.almostOver.addLayer(Z),console.log("[useMapDrawing] Couche ajoutée à almostOver:",Z)}),console.log(`[useMapDrawing] ${j.length} couches ajoutées à almostOver`)},D=(j,Z,ae)=>{const de={almostOnMouseMove:!0,zoomAnimation:!0,fadeAnimation:!0,markerZoomAnimation:!0},ge=en.map(j,de).setView(Z,ae);t.value=ge,en.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:5}).addTo(ge);const me=new en.FeatureGroup;return me.addTo(ge),e.value=me,ge.almostOver?ge.almostOver.options.tolerance=25:console.warn("Leaflet.AlmostOver plugin not loaded properly"),n.value=en.featureGroup().addTo(ge),r.value=en.featureGroup().addTo(ge),ge.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:me,snapLayers:[me,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),setTimeout(T,500),ge.on("pm:drawstart",oe=>{o.value=!0,oe.shape==="Circle"&&i.value==="Semicircle"&&(ge.getContainer().style.cursor="crosshair")}),ge.on("pm:drawend",()=>{o.value=!1,ge.getContainer().style.cursor="",s.value&&_a("Cliquez sur la forme pour afficher les points de contrôle")}),ge.on("pm:create",ye),me.on("click",oe=>{var Te,Le,qe,se;en.DomEvent.stopPropagation(oe);const re=oe.layer;re.name&&!((Te=re.properties)!=null&&Te.name)?(re.properties||(re.properties={}),re.properties.name=re.name):(Le=re.properties)!=null&&Le.name&&!re.name&&(re.name=re.properties.name),console.log("[featureGroup click] État du nom:",{directName:re.name,propertiesName:(qe=re.properties)==null?void 0:qe.name,fullProperties:re.properties}),(se=r.value)==null||se.clearLayers(),m(),s.value=re,re instanceof en.Polygon?q(re):re instanceof ms||re instanceof en.Polyline?U(re):re instanceof gl&&R(re)}),ge.on("pm:edit",oe=>{var Te;console.log("[pm:edit] Début",{layer:oe.layer,currentProperties:oe.layer.properties});const re=oe.layer;if(re){const Le=((Te=re.properties)==null?void 0:Te.type)||"unknown";fe(re,Le),console.log("[pm:edit] Après updateLayerProperties",{updatedProperties:re.properties,selectedShape:s.value}),re instanceof en.Polygon?q(re):re instanceof ms?(re.updateProperties(),fe(re,"Line"),U(re)):re instanceof en.Polyline?U(re):re instanceof gl&&(re.updateProperties(),R(re))}}),ge.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(oe=>oe.remove()),_a("Déplacez la forme à l'endroit souhaité")}),ge.on("pm:dragend",oe=>{var Te;console.log("[pm:dragend] Début",{layer:oe.layer,currentProperties:oe.layer.properties});const re=oe.layer;if(re){const Le=((Te=re.properties)==null?void 0:Te.type)||"unknown";re instanceof ms?(re.updateProperties(),fe(re,"Line"),U(re)):fe(re,Le),console.log("[pm:dragend] Après updateLayerProperties",{updatedProperties:re.properties,selectedShape:s.value})}setTimeout(()=>{_a("Cliquez sur la forme pour afficher les points de contrôle")},100)}),ge.on("pm:remove",()=>{var oe;(oe=document.querySelector(".drawing-help-message"))==null||oe.remove()}),ge.on("pm:select",()=>{document.querySelectorAll(".drawing-help-message").forEach(oe=>oe.remove()),_a("Utilisez les points de contrôle pour modifier la forme")}),ge.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(oe=>oe.remove())}),ge.on("zoomstart",()=>{s.value&&(m(),s.value=null,document.querySelectorAll(".drawing-help-message").forEach(oe=>oe.remove()))}),ge.on("almost:over",function(oe){const Te=oe.layer;if(Te){if(s.value===Te)return;if(Te instanceof ms){const Le={...Te.options};Te._originalStyle=Le,Te.setStyle({weight:(Le.weight||3)+2,opacity:Math.min((Le.opacity||1)+.2,1)}),document.querySelectorAll(".drawing-help-message").forEach(qe=>qe.remove()),_a("Cliquez pour sélectionner cette ligne"),ge.getContainer()&&(ge.getContainer().style.cursor="pointer")}else if(Te instanceof Vl){const Le={...Te.options};Te._originalStyle=Le,Te.setStyle({weight:(Le.weight||3)+2,opacity:Math.min((Le.opacity||1)+.2,1),fillOpacity:Math.min((Le.fillOpacity||.2)+.1,.4)}),document.querySelectorAll(".drawing-help-message").forEach(qe=>qe.remove()),_a("Cliquez pour sélectionner ce polygone"),ge.getContainer()&&(ge.getContainer().style.cursor="pointer")}else if(Te instanceof gl){const Le=Te.getElement();Le&&(console.log("[almost:over] État initial de la GeoNote",{display:Le.style.display,visibility:Le.style.visibility,opacity:Le.style.opacity,filter:Le.style.filter}),Le.classList.add("geo-note-pulse"),Le.style.zIndex="1000",Le.style.visibility="visible",Le.style.display="flex",Le.style.opacity="1",Le.style.filter="drop-shadow(0 0 5px rgba(59, 130, 246, 0.7))",console.log("[almost:over] GeoNote après application de l'effet",Le)),document.querySelectorAll(".drawing-help-message").forEach(qe=>qe.remove()),_a("Cliquez pour sélectionner cette note"),ge.getContainer()&&(ge.getContainer().style.cursor="pointer")}}}),ge.on("almost:out",function(oe){const Te=oe.layer;if(Te){if(s.value===Te)return;if(Te instanceof ms&&Te._originalStyle)Te.setStyle(Te._originalStyle),Te._originalStyle=void 0;else if(Te instanceof Vl)Te._originalStyle&&(Te.setStyle(Te._originalStyle),Te._originalStyle=void 0);else if(Te instanceof gl){const Le=Te.getElement();Le?(console.log("[almost:out] État de la GeoNote avant réinitialisation",{display:Le.style.display,visibility:Le.style.visibility,opacity:Le.style.opacity,filter:Le.style.filter}),Le.classList.remove("geo-note-pulse"),Le.style.zIndex="",Le.style.filter="none",Le.style.opacity="1",Le.style.display="block",Le.style.visibility="visible",Array.from(Le.querySelectorAll("*")).forEach(qe=>{qe.style.visibility="visible",qe.style.display="block",qe.style.opacity="1"}),console.log("[almost:out] GeoNote après réinitialisation",Le),setTimeout(()=>{try{const qe=Le.getBoundingClientRect();(qe.width===0||qe.height===0)&&(console.warn("[almost:out] L'élément a une taille nulle après sortie, recréation de l'icône"),Te.recreateIcon())}catch(qe){console.error("[almost:out] Erreur lors de la vérification de la taille:",qe),Te.recreateIcon()}},100)):(console.warn("[almost:out] Élément DOM introuvable, recréation de l'icône"),Te.recreateIcon())}(!s.value||s.value&&s.value!==Te)&&document.querySelectorAll(".drawing-help-message").forEach(Le=>Le.remove()),ge.getContainer()&&!document.querySelectorAll(".geo-note-pulse").length&&!document.querySelectorAll(".line-hover-effect").length&&(ge.getContainer().style.cursor="")}}),ge.on("almost:click",function(oe){var Le,qe;const re=oe;console.log("[almost:click] Clic à proximité d'une couche",re);const Te=re.layer;Te&&s.value===Te||(s.value&&m(),Te&&Te instanceof ms?(s.value=Te,(Le=r.value)==null||Le.clearLayers(),m(),U(Te),_a("Utilisez les points de contrôle pour modifier la ligne")):Te&&Te instanceof Vl?(s.value=Te,(qe=r.value)==null||qe.clearLayers(),m(),q(Te),_a("Utilisez les points de contrôle pour modifier le polygone")):Te&&Te instanceof gl&&(s.value=Te,Te.editNote()))}),me.on("layeradd",function(oe){ge.almostOver&&(oe.layer instanceof ms||oe.layer instanceof en.Polyline&&!(oe.layer instanceof en.Polygon)||oe.layer instanceof Vl||oe.layer instanceof gl)&&(ge.almostOver.addLayer(oe.layer),console.log("[useMapDrawing] Nouvelle couche ajoutée à almostOver"))}),me.on("layerremove",function(oe){ge.almostOver&&(oe.layer instanceof ms||oe.layer instanceof en.Polyline&&!(oe.layer instanceof en.Polygon)||oe.layer instanceof Vl||oe.layer instanceof gl)&&(ge.almostOver.removeLayer(oe.layer),console.log("[useMapDrawing] Couche supprimée de almostOver"))}),ge},k=()=>{if(!(!t.value||!e.value||!e.value.getLayers().length))try{const j=e.value.getBounds();if(j.isValid()){const Z={zoomAnimation:t.value.options.zoomAnimation,fadeAnimation:t.value.options.fadeAnimation,markerZoomAnimation:t.value.options.markerZoomAnimation};t.value.options.zoomAnimation=!1,t.value.options.fadeAnimation=!1,t.value.options.markerZoomAnimation=!1,t.value.fitBounds(j,{padding:[50,50],maxZoom:18,animate:!1,duration:0,noMoveStart:!0}),t.value.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{try{t.value.options.fadeAnimation=Z.fadeAnimation,setTimeout(()=>{try{t.value.options.zoomAnimation=Z.zoomAnimation,t.value.options.markerZoomAnimation=Z.markerZoomAnimation}catch(ae){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",ae)}},500)}catch(ae){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",ae)}},500)}}catch(j){if(console.warn("[useMapDrawing] Error adjusting view:",j),t.value)try{t.value.options.zoomAnimation=!0,t.value.options.fadeAnimation=!0,t.value.options.markerZoomAnimation=!0,t.value.invalidateSize({animate:!1,pan:!1})}catch(Z){console.error("[useMapDrawing] Erreur lors de la restauration après échec:",Z)}}},B=j=>{var ae;if(!t.value)return;document.querySelectorAll(".drawing-help-message").forEach(de=>de.remove());try{const de=t.value.pm;de.globalEditModeEnabled()&&de.disableGlobalEditMode(),de.globalRemovalModeEnabled()&&de.disableGlobalRemovalMode(),de.disableDraw(),m(),(ae=r.value)==null||ae.clearLayers()}catch(de){console.error("Error disabling modes:",de)}if(window.dispatchEvent(new CustomEvent("tool:changed",{detail:{previousTool:i.value,newTool:j}})),i.value=j,!j){m(),T();return}let Z=j;switch(j){case"Note":Z="GeoNote";break;case"Polygon":Z="Polygon";break;case"Line":Z="Line";break;default:Z=j}j=Z,Ce(),setTimeout(()=>{var de,ge,me,oe,re,Te,Le,qe,se,le,he,ee;try{switch(j){case"Polygon":_a("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(de=t.value)==null||de.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(ge=t.value)==null||ge.off("pm:create"),(me=t.value)==null||me.on("pm:create",be=>{var je,We,Qe;if(be.shape==="Polygon"&&be.layer){const Je=be.layer.getLatLngs()[0];(je=t.value)==null||je.removeLayer(be.layer),(We=e.value)!=null&&We.hasLayer(be.layer)&&e.value.removeLayer(be.layer);const st=new Vl(Je,{color:"#3B82F6",weight:3,fillColor:"#3B82F6",fillOpacity:.2});e.value&&(e.value.addLayer(st),s.value=st,st.updateProperties()),(Qe=t.value)==null||Qe.pm.disableDraw(),Ce()}});break;case"Polygon":_a("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(oe=t.value)==null||oe.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":_a("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(re=t.value)==null||re.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(Te=t.value)==null||Te.off("pm:create"),(Le=t.value)==null||Le.on("pm:create",be=>{var je,We,Qe;if(be.shape==="Line"&&be.layer){const Je=be.layer.getLatLngs();(je=t.value)==null||je.removeLayer(be.layer),(We=e.value)!=null&&We.hasLayer(be.layer)&&e.value.removeLayer(be.layer);const st=new ms(Je,{color:"#3B82F6",weight:3,opacity:.8});e.value&&(e.value.addLayer(st),s.value=st,st.updateProperties()),(Qe=t.value)==null||Qe.pm.disableDraw(),Ce()}});break;case"Text":if(_a("Cliquez pour ajouter du texte, double-cliquez pour éditer"),t.value){const be=je=>{if(!t.value||!e.value)return;const We=l(je.latlng);e.value.addLayer(We),s.value=We,t.value.off("click",be),B("")};t.value.on("click",be)}break;case"GeoNote":if(_a("Cliquez pour ajouter une note géolocalisée, double-cliquez pour éditer"),t.value){const be=async We=>{if(!t.value||!e.value)return null;try{const Qe=xp(),Je=new gl(We,{color:"#3B82F6",name:"Note géolocalisée",description:"",columnId:"1"});e.value.addLayer(Je),s.value=Je,Je.updateProperties();try{const st=Qe.currentMapId||void 0,Pt=await Je.saveNote(st);console.log(`[useMapDrawing] Note sauvegardée avec succès, ID backend: ${Pt}`);const Bt=Je._leaflet_id;return console.log(`[useMapDrawing] ID Leaflet: ${Bt}, ID backend: ${Pt}`),window.dispatchEvent(new CustomEvent("note:created",{detail:{geoNote:Je,leafletId:Bt,backendId:Pt}})),Je.openPopup(),Je}catch(st){return console.error("[useMapDrawing] Erreur lors de la sauvegarde de la note:",st),Ch(async()=>{const{useNotificationStore:Pt}=await Promise.resolve().then(()=>AB);return{useNotificationStore:Pt}},void 0).then(({useNotificationStore:Pt})=>{Pt().error("Erreur lors de la création de la note")}),null}}catch(Qe){return console.error("[useMapDrawing] Erreur lors de la création de la note:",Qe),null}},je=async We=>{en.DomEvent.stopPropagation(We),en.DomEvent.preventDefault(We);const Qe=await be(We.latlng);Qe&&(t.value.off("click",je),e.value&&e.value.getLayers().forEach(Je=>{if(Je.off&&typeof Je.off=="function")try{Je.off("click")}catch(st){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",st)}}),B(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:Qe,leafletId:Qe._leaflet_id}})))};if(t.value.on("click",je),e.value){const We=async Je=>{en.DomEvent.stopPropagation(Je),en.DomEvent.preventDefault(Je),console.log("[useMapDrawing] Clic sur une forme existante en mode GeoNote");const st=await be(Je.latlng);return st&&(t.value.off("click",je),e.value&&e.value.getLayers().forEach(Pt=>{if(Pt.off&&typeof Pt.off=="function")try{Pt.off("click")}catch(Bt){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",Bt)}}),B(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:st,leafletId:st._leaflet_id}}))),!1};e.value.getLayers().forEach(Je=>{Je.on("click",We)});const Qe=()=>{e.value&&e.value.getLayers().forEach(Je=>{if(Je.off&&typeof Je.off=="function")try{Je.off("click")}catch(st){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",st)}}),window.removeEventListener("tool:changed",Qe),console.log("[useMapDrawing] Nettoyage des gestionnaires d'événements pour les formes existantes")};window.addEventListener("tool:changed",Qe)}}break;case"delete":_a("Cliquez sur une forme pour la supprimer"),(qe=t.value)==null||qe.pm.enableGlobalRemovalMode();break}}catch(be){console.error("[setDrawingTool] Erreur lors de la configuration de l'outil:",be)}},100)},W=j=>{var ae;if(!s.value)return;const Z=s.value;if(Z.properties=Z.properties||{},Z.properties.style=Z.properties.style||{},Z.properties.style={...Z.properties.style,...j},Z.properties.type==="text"){const de=Z.properties._textLayer,ge=(ae=de==null?void 0:de.getElement())==null?void 0:ae.querySelector(".text-annotation");ge&&hU(ge,Z.properties.style);const me={color:j.borderColor||Z.properties.style.borderColor,weight:parseInt(j.borderWidth||Z.properties.style.borderWidth),opacity:j.borderOpacity??Z.properties.style.borderOpacity};"setStyle"in Z&&Z.setStyle(me)}else{const de={};j.fillColor&&(de.fillColor=j.fillColor),j.fillOpacity!==void 0&&(de.fillOpacity=j.fillOpacity),j.strokeColor&&(de.color=j.strokeColor),j.strokeOpacity!==void 0&&(de.opacity=j.strokeOpacity),j.strokeWidth!==void 0&&(de.weight=j.strokeWidth),j.dashArray&&(de.dashArray=j.dashArray),"setStyle"in Z&&Z.setStyle(de)}},Q=j=>{var oe,re,Te,Le;if(!s.value){console.warn("[useMapDrawing] Cannot update properties: no shape selected");return}console.log("[useMapDrawing] Updating shape properties",{before:s.value.properties,newProps:j,layerType:(oe=s.value.properties)==null?void 0:oe.type,beforeName:s.value.name,beforePropertiesName:(re=s.value.properties)==null?void 0:re.name,beforeCategory:(Te=s.value.properties)==null?void 0:Te.category,nameIsDirectProperty:"name"in s.value,dbId:s.value._dbId}),s.value.properties||(s.value.properties={});const Z=s.value.properties.type;console.log(`[useMapDrawing] Type actuel de la forme: ${Z}`),s.value.properties.category||(s.value.properties.category="forages"),s.value.properties.accessLevel||(s.value.properties.accessLevel="visitor"),s.value._dbId||(s.value._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[useMapDrawing] Assigned temporary dbId: ${s.value._dbId}`));const ae=s.value.properties.type;console.log(`[useMapDrawing] Type original avant mise à jour: ${ae}`);const de=s.value.properties.category;console.log(`[useMapDrawing] Catégorie existante: ${de}`);const ge="category"in j&&j.category!==de;if(Object.keys(j).forEach(qe=>{qe==="type"&&ae?console.log(`[useMapDrawing] Préservation du type original: ${ae}`):s.value.properties[qe]=j[qe],qe==="name"&&(console.log(`[useMapDrawing] Setting name "${j[qe]}" directly on layer`),s.value.name=j[qe]),qe==="category"&&console.log(`[useMapDrawing] Mise à jour de la catégorie: ${de} -> ${j[qe]}`)}),ae&&(s.value.properties.type=ae),de&&!ge&&(console.log(`[useMapDrawing] Restauration de la catégorie originale: ${de}`),s.value.properties.category=de),s.value._dbId&&ge){const qe=xp(),se=qe.elements.find(le=>le.id===s.value._dbId);if(se){console.log(`[useMapDrawing] Mise à jour de la catégorie dans le store: ${s.value.properties.category} pour l'élément ${s.value._dbId}`);const le=se;le.data||(le.data={}),le.data.category=s.value.properties.category,qe.$patch({unsavedChanges:!0})}}const me=new CustomEvent("shape:propertiesUpdated",{detail:{shape:s.value,properties:s.value.properties,categoryUpdated:ge}});window.dispatchEvent(me),console.log("[useMapDrawing] Updated shape properties",{after:s.value.properties,name:s.value.name,propertiesName:(Le=s.value.properties)==null?void 0:Le.name,allLayerKeys:Object.keys(s.value),allPropertiesKeys:Object.keys(s.value.properties||{})})},pe=j=>{console.log("[forceShapeUpdate] Début",{currentProperties:j.properties,selectedShapeRef:s.value}),s.value=null,_l(()=>{s.value=j,console.log("[forceShapeUpdate] Après mise à jour",{selectedShape:s.value,properties:s.value.properties})})},fe=(j,Z)=>{console.log("[updateLayerProperties] Début",{layer:j,shapeType:Z,currentProperties:j.properties}),pU((de,ge)=>{const me=E(de,ge);console.log("[updateLayerProperties] Nouvelles propriétés calculées",{newProperties:me}),de.properties={...me},pe(de),de.fire("properties:updated",{shape:de,properties:de.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:de.properties,selectedShape:s.value})},100)(j,Z)},O=(j,Z)=>en.latLng((j.lat+Z.lat)/2,(j.lng+Z.lng)/2),U=j=>{if(!t.value||!e.value)return;m();const Z=j.getLatLngs();if(!Z||Z.length===0){console.warn("Pas de points pour la ligne");return}let ae=null;if(j instanceof ms){const de=j.getCenter();ae=x(de,"#059669"),v.push(ae),p(ae,j,()=>{const ge=j.getLength()||0;return Fa(ge,"m","Longueur totale")}),ae.on("mousedown",ge=>{if(!t.value)return;en.DomEvent.stopPropagation(ge),t.value.dragging.disable();let me=!0;const oe=j.getLatLngs().map(se=>en.latLng(se.lat,se.lng)),re=ge.latlng;j instanceof ms&&(j.off("move:end"),j.off("vertex:moved"),j.off("latlngs:updated"),j.off("properties:updated")),v.forEach((se,le)=>{le>0&&(se.setStyle({opacity:0,fillOpacity:0}),se.measureDiv&&(se.measureDiv.style.display="none"))});const Le=jf(se=>{if(!me)return;const le=se.latlng.lng-re.lng,he=se.latlng.lat-re.lat,ee=oe.map(be=>en.latLng(be.lat+he,be.lng+le));en.Polyline.prototype.setLatLngs.call(j,ee),ae==null||ae.setLatLng(se.latlng)},16),qe=()=>{if(me=!1,!!t.value){if(t.value.off("mousemove",Le),document.removeEventListener("mouseup",qe),t.value.dragging.enable(),j instanceof ms){const se=()=>{m(),U(j)};j.on("move:end",se),j.on("vertex:moved",se),j.on("latlngs:updated",se),j.on("properties:updated",se),j.updateProperties(),fe(j,"Line")}m(),U(j)}};t.value.on("mousemove",Le),document.addEventListener("mouseup",qe)})}if(Z.forEach((de,ge)=>{const me=x(de,"#DC2626");v.push(me),p(me,j,()=>{if(j instanceof ms){const oe=j.getLength()||0,re=j.getLengthToVertex(ge);return[Fa(re,"m","Distance depuis le début"),Fa(oe,"m","Longueur totale")].join("<br>")}return""}),me.on("mousedown",oe=>{if(!t.value)return;en.DomEvent.stopPropagation(oe),t.value.dragging.disable();let re=!0;j instanceof ms&&(j.off("move:end"),j.off("vertex:moved"),j.off("latlngs:updated"),j.off("properties:updated")),v.forEach((qe,se)=>{se!==ge+1&&(qe.setStyle({opacity:0,fillOpacity:0}),qe.measureDiv&&(qe.measureDiv.style.display="none"))});const Te=jf(qe=>{if(!re)return;const se=j.getLatLngs();se[ge]=qe.latlng,en.Polyline.prototype.setLatLngs.call(j,se),me.setLatLng(qe.latlng)},16),Le=()=>{if(re=!1,!!t.value){if(t.value.off("mousemove",Te),document.removeEventListener("mouseup",Le),t.value.dragging.enable(),j instanceof ms){const qe=()=>{m(),U(j)};j.on("move:end",qe),j.on("vertex:moved",qe),j.on("latlngs:updated",qe),j.on("properties:updated",qe),j.updateProperties(),fe(j,"Line")}m(),U(j)}};t.value.on("mousemove",Te),document.addEventListener("mouseup",Le)})}),Z.length>=2)for(let de=0;de<Z.length-1;de++){const ge=Z[de],me=Z[de+1],oe=en.latLng((ge.lat+me.lat)/2,(ge.lng+me.lng)/2),re=x(oe,"#2b6451");v.push(re),p(re,j,()=>{if(j instanceof ms){const Te=j.getSegmentLengthAt(de),Le=j.getLength()||0,qe=j.getLengthToVertex(de)+Te/2;return[Fa(Te,"m","Longueur du segment"),Fa(Te/2,"m","Demi-segment"),Fa(qe,"m","Distance depuis le début"),Fa(Le,"m","Longueur totale")].join("<br>")}return""})}if(j instanceof ms){const de=()=>{m(),U(j)};j.on("move:start",()=>{v.forEach((ge,me)=>{me>0&&(ge.setStyle({opacity:0,fillOpacity:0}),ge.measureDiv&&(ge.measureDiv.style.display="none"))})}),j.on("move:end",de),j.on("vertex:moved",de),j.on("latlngs:updated",de),j.on("properties:updated",de),v.cleanup=()=>{j.off("move:start",()=>{}),j.off("move:end",de),j.off("vertex:moved",de),j.off("latlngs:updated",de),j.off("properties:updated",de)}}},q=j=>{if(!t.value||!e.value)return;m();const Z=j.getLatLngs()[0],ae=Z.map(Le=>[Le.lng,Le.lat]);ae.push(ae[0]);const de=zc([ae]),ge=Gh(de),me=Z.reduce((Le,qe,se)=>{const le=Z[(se+1)%Z.length];return Le+qe.distanceTo(le)},0);let oe;if(typeof j.getCenter=="function")try{oe=j.getCenter()}catch(Le){console.warn("Erreur lors de la récupération du centre du polygone via getCenter(), utilisation de la méthode alternative",Le);const qe=Ng(de);oe=en.latLng(qe.geometry.coordinates[1],qe.geometry.coordinates[0])}else{const Le=Ng(de);oe=en.latLng(Le.geometry.coordinates[1],Le.geometry.coordinates[0])}const re=x(oe,"#059669");v.push(re),p(re,j,()=>[Fa(me,"m","Périmètre"),Fa(ge,"m²","Surface")].join("<br>")),re.on("mousedown",Le=>{if(!t.value)return;en.DomEvent.stopPropagation(Le),t.value.dragging.disable();let qe=!0;const se=Le.latlng,le=[...Z];v.forEach((je,We)=>{We>0&&je.setStyle({opacity:0,fillOpacity:0})});const he=jf(je=>{if(!qe)return;const We=je.latlng.lng-se.lng,Qe=je.latlng.lat-se.lat,Je=le.map(st=>en.latLng(st.lat+Qe,st.lng+We));en.Polygon.prototype.setLatLngs.call(j,[Je]),re.setLatLng(je.latlng)},16),ee=je=>{qe&&he(je)},be=()=>{if(qe=!1,!!t.value){if(t.value.off("mousemove",ee),document.removeEventListener("mouseup",be),t.value.dragging.enable(),j.properties){const je=j.getLatLngs()[0],We=je.map(Je=>[Je.lng,Je.lat]);We.push(We[0]);const Qe=zc([We]);j.properties.area=Gh(Qe),j.properties.perimeter=je.reduce((Je,st,Pt)=>{const Bt=je[(Pt+1)%je.length];return Je+st.distanceTo(Bt)},0),j.properties.surface=j.properties.area}m(),q(j),s.value=null,_l(()=>{s.value=j})}};t.value.on("mousemove",ee),document.addEventListener("mouseup",be)}),Z.forEach((Le,qe)=>{const se=x(Le,"#DC2626");v.push(se),p(se,j,()=>{const le=Z[(qe-1+Z.length)%Z.length],he=Z[(qe+1)%Z.length],ee=Le.distanceTo(le),be=Le.distanceTo(he);return[Fa(ee,"m","Distance au point précédent"),Fa(be,"m","Distance au point suivant"),Fa(me,"m","Périmètre total"),Fa(ge,"m²","Surface")].join("<br>")}),se.on("mousedown",le=>{if(en.DomEvent.stopPropagation(le),!t.value)return;t.value.dragging.disable();let he=!0;re&&(re.setStyle({opacity:0,fillOpacity:0}),re.measureDiv&&(re.measureDiv.style.display="none"));const ee=jf(We=>{if(!he)return;Z[qe]=We.latlng,en.Polygon.prototype.setLatLngs.call(j,[Z]),se.setLatLng(We.latlng);const Qe=v.slice(Z.length+1),Je=(qe-1+Z.length)%Z.length,st=Qe[Je];if(st){const Bt=Z[Je],Ht=Z[qe],Jt=en.latLng((Bt.lat+Ht.lat)/2,(Bt.lng+Ht.lng)/2);st.setLatLng(Jt)}const Pt=Qe[qe];if(Pt){const Bt=Z[qe],Ht=Z[(qe+1)%Z.length],Jt=en.latLng((Bt.lat+Ht.lat)/2,(Bt.lng+Ht.lng)/2);Pt.setLatLng(Jt)}},16),be=We=>{he&&ee(We)},je=()=>{if(he=!1,!!t.value){if(t.value.off("mousemove",be),document.removeEventListener("mouseup",je),t.value.dragging.enable(),j.properties){const We=j.getLatLngs()[0].map(Je=>[Je.lng,Je.lat]);We.push(We[0]);const Qe=zc([We]);j.properties.area=Gh(Qe),j.properties.perimeter=Z.reduce((Je,st,Pt)=>{const Bt=Z[(Pt+1)%Z.length];return Je+st.distanceTo(Bt)},0),j.properties.surface=j.properties.area}m(),q(j),s.value=null,_l(()=>{s.value=j})}};t.value.on("mousemove",be),document.addEventListener("mouseup",je)})}),(()=>{const Le=j.getLatLngs()[0];v.slice(Le.length+1).forEach(se=>{n.value&&n.value.removeLayer(se)}),v=v.slice(0,Le.length+1);const qe=new Array(Le.length);for(let se=0;se<Le.length;se++){const le=Le[se],he=Le[(se+1)%Le.length];qe[se]=O(le,he)}qe.forEach((se,le)=>{const he=x(se,"#2b6451");v.push(he),p(he,j,()=>{const ee=Le[le],be=Le[(le+1)%Le.length],je=ee.distanceTo(be);return[Fa(je,"m","Longueur du segment"),Fa(me,"m","Périmètre total"),Fa(ge,"m²","Surface")].join("<br>")}),he.on("mousedown",ee=>{if(!t.value)return;en.DomEvent.stopPropagation(ee),t.value.dragging.disable();let be=!0;const je=le;re&&(re.setStyle({opacity:0,fillOpacity:0}),re.measureDiv&&(re.measureDiv.style.display="none"));const We=[...j.getLatLngs()[0]];We.splice((je+1)%We.length,0,se),j.setLatLngs([We]),m(),q(j);const Qe=je+1,Je=1+Qe,st=Qe<v.length-1?v[Je]:null;if(st){const Pt=Ht=>{if(!be)return;const Jt=j.getLatLngs()[0];Jt[Qe]=Ht.latlng,j.setLatLngs([Jt]),st.setLatLng(Ht.latlng);const fn=v.slice(1+Jt.length),pn=(Qe-1+Jt.length)%Jt.length,et=Qe;if(fn[pn]){const ot=Jt[pn],rt=Jt[Qe],Ft=en.latLng((ot.lat+rt.lat)/2,(ot.lng+rt.lng)/2);fn[pn].setLatLng(Ft)}if(fn[et]){const ot=Jt[Qe],rt=Jt[(Qe+1)%Jt.length],Ft=en.latLng((ot.lat+rt.lat)/2,(ot.lng+rt.lng)/2);fn[et].setLatLng(Ft)}},Bt=()=>{if(be=!1,!!t.value){if(t.value.off("mousemove",Pt),document.removeEventListener("mouseup",Bt),t.value.dragging.enable(),j.properties){const Ht=j.getLatLngs()[0].map(fn=>[fn.lng,fn.lat]);Ht.push(Ht[0]);const Jt=zc([Ht]);j.properties.area=Gh(Jt),j.properties.perimeter=j.getLatLngs()[0].reduce((fn,pn,et,ot)=>{const rt=ot[(et+1)%ot.length];return fn+pn.distanceTo(rt)},0)}m(),q(j),s.value=null,_l(()=>{s.value=j})}};t.value.on("mousemove",Pt),document.addEventListener("mouseup",Bt)}else t.value.dragging.enable(),m(),q(j)})})})()},R=j=>{if(!t.value||!e.value)return;m();const Z=j.getLatLng(),ae=x(Z,"#059669");v.push(ae),p(ae,j,()=>`Position: ${Z.lat.toFixed(6)}, ${Z.lng.toFixed(6)}`),ae.on("mousedown",de=>{if(!t.value)return;en.DomEvent.stopPropagation(de),t.value.dragging.disable(),j.startMoving();let ge=!0;const oe=jf(Te=>{ge&&(ae.setLatLng(Te.latlng),j.setLatLng(Te.latlng))},16),re=()=>{t.value&&(t.value.off("mousemove",oe),document.removeEventListener("mouseup",re),t.value.dragging.enable(),ge=!1,j.finishMoving(),j.updateProperties(),s.value=null,_l(()=>{s.value=j,m(),R(j)}))};t.value.on("mousemove",oe),document.addEventListener("mouseup",re)}),s.value=j},$=j=>{if(!(!t.value||!r.value)){console.log("[generateTempControlPoints] Génération des points temporaires pour",{layerType:j.constructor.name,properties:j.properties}),r.value.clearLayers();try{if(j instanceof gl){const Z=j.getLatLng();if(Z){const ae=en.circleMarker(Z,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ae)}}else if(j instanceof Vl||j instanceof en.Polygon){let Z=[];if("getLatLngs"in j){const de=j.getLatLngs();if(Array.isArray(de)&&de.length>0){const ge=de[0];Array.isArray(ge)?Z=ge:ge instanceof en.LatLng&&(Z=de)}}let ae=null;if(j instanceof Vl&&typeof j.getCenter=="function")ae=j.getCenter();else if(Z.length>0){const de=Z.map(oe=>[oe.lng,oe.lat]);de.push(de[0]);const ge=zc([de]),me=Ng(ge);ae=en.latLng(me.geometry.coordinates[1],me.geometry.coordinates[0])}if(ae){const de=en.circleMarker(ae,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(de)}Z.forEach(de=>{if(de){const ge=en.circleMarker(de,{radius:5,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ge)}});for(let de=0;de<Z.length;de++){const ge=Z[de],me=Z[(de+1)%Z.length];if(ge&&me){const oe=en.latLng((ge.lat+me.lat)/2,(ge.lng+me.lng)/2),re=en.circleMarker(oe,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(re)}}}console.log("[generateTempControlPoints] Points temporaires générés",{count:r.value.getLayers().length})}catch(Z){console.error("[generateTempControlPoints] Erreur lors de la génération des points temporaires:",Z)}}},X=j=>{console.log("Nombre total de couches:",j.length);const Z=j.filter(oe=>oe?0>0:!1);if(Z.length===0)return 0;const ae=new Set,de=[];for(const oe of Z)if(!ae.has(oe)){const re=N(Z,oe);re.length>0&&(de.push(re),re.forEach(Te=>ae.add(Te)))}console.log(`
Nombre de groupes de formes connectées: ${de.length}`);const ge=de.map((oe,re)=>{console.log(`
Calcul pour le groupe ${re+1} (${oe.length} formes):`);const Te=oe.map(he=>{var ee;try{let be;if(he instanceof en.Circle){const je=he.getLatLng(),We=he.getRadius();be=Y9([je.lng,je.lat],We/1e3,{units:"kilometers",steps:256});const Qe=Gh(be),Je=((ee=he.properties)==null?void 0:ee.surface)||0;return console.log(`
Conversion Cercle -> GeoJSON`),console.log(`- Rayon: ${We.toFixed(2)}m`),console.log(`- Surface propriété: ${Je.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${Qe.toFixed(2)}m²`),be}return null}catch(be){return console.error("[useMapDrawing] Erreur lors de la conversion en GeoJSON:",be),null}}).filter(he=>he!==null);if(Te.length===0)return 0;const Le=Te.map(he=>{const ee=Gh(he);return console.log(`Surface individuelle: ${ee.toFixed(2)}m²`),ee});let qe=0;for(let he=0;he<Te.length;he++)for(let ee=he+1;ee<Te.length;ee++)try{const be=O9([Te[he],Te[ee]]),je=gj(be);if(je){const We=Gh(je);qe+=We,console.log(`Intersection entre formes ${he+1} et ${ee+1}: ${We.toFixed(2)}m²`)}}catch(be){console.error(`Erreur lors du calcul d'intersection entre les formes ${he+1} et ${ee+1}:`,be)}const se=Le.reduce((he,ee)=>he+ee,0),le=se-qe;return console.log(`
Calcul de la surface d'irrigation pour le groupe ${re+1}:`),console.log(`- Surface totale (somme): ${se.toFixed(2)}m²`),console.log(`- Surface d'intersection: ${qe.toFixed(2)}m²`),console.log(`- Surface d'irrigation finale: ${le.toFixed(2)}m²`),le}),me=Math.max(...ge);return console.log(`
Surface d'irrigation maximale parmi les groupes: ${me.toFixed(2)}m²`),me},K=()=>{a.value&&(t.value.removeLayer(a.value),a.value=null)},F=(j,Z)=>{if(!t.value)return;K();const ae=Z?N(j,Z):j;if(a.value||(a.value=en.layerGroup().addTo(t.value)),ae.forEach(de=>{var me;const ge=(me=de.properties)==null?void 0:me.type;if(ge==="Circle"||ge==="Semicircle"){const oe=de.getLatLng(),re=de.getRadius(),Te=en.circle(oe,{radius:re,fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:en.canvas({padding:.5})}),Le=en.circle(oe,{radius:re,fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:en.canvas({padding:.5})});a.value&&(a.value.addLayer(Le),a.value.addLayer(Te))}else if(ge==="Rectangle"||ge==="Polygon"){const oe=de.getLatLngs(),re=en.polygon(oe,{fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:en.canvas({padding:.5})}),Te=en.polygon(oe,{fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:en.canvas({padding:.5})});a.value&&(a.value.addLayer(Te),a.value.addLayer(re))}}),Z&&ae.length>1&&t.value){const de=en.latLngBounds([]);ae.forEach(oe=>{oe.getBounds?de.extend(oe.getBounds()):oe.getLatLng&&de.extend(oe.getLatLng())});const ge=de.getCenter(),me=en.tooltip({permanent:!0,direction:"center",className:"connected-group-tooltip"}).setContent("<div>Groupe connecté</div>").setLatLng(ge);a.value&&a.value.addLayer(en.marker(ge,{opacity:0,interactive:!1}).bindTooltip(me).openTooltip())}},N=(j,Z)=>{if(!Z)return[];const ae=new Set,de=[Z],ge=[Z];for(Z._leaflet_id!==void 0&&ae.add(Z._leaflet_id);de.length>0;){const me=de.shift();for(const oe of j){if(oe===me||ae.has(oe._leaflet_id))continue;J(me,oe)&&(ge.push(oe),de.push(oe),ae.add(oe._leaflet_id))}}return ge},J=(j,Z)=>{let ae=null,de=null;if(j.getBounds&&typeof j.getBounds=="function")ae=j.getBounds();else if(j.getLatLng&&j.getRadius){const ge=j.getLatLng(),me=j.getRadius();ae=en.latLngBounds([ge.lat-me/111e3,ge.lng-me/(111e3*Math.cos(ge.lat*Math.PI/180))],[ge.lat+me/111e3,ge.lng+me/(111e3*Math.cos(ge.lat*Math.PI/180))])}if(Z.getBounds&&typeof Z.getBounds=="function")de=Z.getBounds();else if(Z.getLatLng&&Z.getRadius){const ge=Z.getLatLng(),me=Z.getRadius();de=en.latLngBounds([ge.lat-me/111e3,ge.lng-me/(111e3*Math.cos(ge.lat*Math.PI/180))],[ge.lat+me/111e3,ge.lng+me/(111e3*Math.cos(ge.lat*Math.PI/180))])}return!(!ae||!de||!ae.intersects(de))},Y=(j,Z)=>{var de;const ae=N(j,Z);return ae.length===1&&(de=Z.properties)!=null&&de.surface?Z.properties.surface:X(ae)},ye=j=>{var de,ge,me,oe,re;const Z=j.layer;(de=e.value)==null||de.addLayer(Z);let ae="unknown";if(Z instanceof en.Polygon?ae="Polygon":Z instanceof en.Polyline&&!(Z instanceof en.Polygon)&&(ae="Line"),Z.properties=E(Z,ae),Z.properties||(Z.properties={}),Z.properties.category||(Z.properties.category="forages"),Z.properties.accessLevel||(Z.properties.accessLevel="visitor"),Z._dbId=Date.now()+Math.floor(Math.random()*1e3),s.value=Z,console.log("[useMapDrawing] Input layer:",{type:ae,instanceof:{Polygon:Z instanceof en.Polygon,Polyline:Z instanceof en.Polyline},options:Z.options,properties:Z.properties,_dbId:Z._dbId}),window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:Z,type:ae,properties:Z.properties}})),Z.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:ae,isSelected:s.value===Z}),(!s.value||s.value!==Z)&&$(Z)}),Z.on("mouseout",()=>{var Te;console.log("[mouseout] Sortie de la forme",{type:ae,isSelected:s.value===Z}),(!s.value||s.value!==Z)&&((Te=r.value)==null||Te.clearLayers())}),Z instanceof en.Polygon){const Te=Z.getLatLngs()[0],Le=new Vl([Te],{...Z.options});Le.updateProperties(),(ge=e.value)==null||ge.removeLayer(Z),(me=e.value)==null||me.addLayer(Le),s.value=Le,q(Le)}else if(Z instanceof ms)U(Z),t.value&&t.value.almostOver&&t.value.almostOver.addLayer(Z);else if(Z instanceof en.Polyline&&!(Z instanceof en.Polygon)){const Te=Z.getLatLngs(),Le=new ms(Te,{...Z.options});Le.updateProperties(),(oe=e.value)==null||oe.removeLayer(Z),(re=e.value)==null||re.addLayer(Le),s.value=Le,U(Le),t.value&&t.value.almostOver&&t.value.almostOver.addLayer(Le)}_a("Cliquez sur la forme pour afficher les points de contrôle")},Ce=()=>{t.value&&(t.value.off("pm:create"),t.value.on("pm:create",ye))},He=()=>{if(t.value&&t.value.almostOver){const j=t.value.almostOver.options.tolerance;return t.value.almostOver.options.tolerance=0,()=>{t.value&&t.value.almostOver&&(t.value.almostOver.options.tolerance=j)}}return()=>{}};return window.addEventListener("edit:start",()=>{const j=He(),Z=()=>{j(),window.removeEventListener("edit:end",Z)};window.addEventListener("edit:end",Z)}),{map:t,featureGroup:e,controlPointsGroup:n,tempControlPointsGroup:r,currentTool:i,selectedShape:s,isDrawing:o,initMap:D,setDrawingTool:B,updateShapeStyle:W,updateShapeProperties:Q,adjustView:k,clearActiveControlPoints:m,calculateTotalCoverageArea:X,showCoverageOverlay:F,hideCoverageOverlay:K,calculateConnectedCoverageArea:Y,getConnectedShapes:N,disableAlmostOver:He,addLinesToAlmostOver:T}}const Ji=Symbol("newer"),ra=Symbol("older");class mU{constructor(e,n){typeof e!="number"&&(n=e,e=0),this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap=new Map,n&&(this.assign(n),e<1&&(this.limit=this.size))}_markEntryAsUsed(e){e!==this.newest&&(e[Ji]&&(e===this.oldest&&(this.oldest=e[Ji]),e[Ji][ra]=e[ra]),e[ra]&&(e[ra][Ji]=e[Ji]),e[Ji]=void 0,e[ra]=this.newest,this.newest&&(this.newest[Ji]=e),this.newest=e)}assign(e){let n,r=this.limit||Number.MAX_VALUE;this._keymap.clear();let i=e[Symbol.iterator]();for(let s=i.next();!s.done;s=i.next()){let o=new i5(s.value[0],s.value[1]);if(this._keymap.set(o.key,o),n?(n[Ji]=o,o[ra]=n):this.oldest=o,n=o,r--==0)throw new Error("overflow")}this.newest=n,this.size=this._keymap.size}get(e){var n=this._keymap.get(e);if(n)return this._markEntryAsUsed(n),n.value}set(e,n){var r=this._keymap.get(e);return r?(r.value=n,this._markEntryAsUsed(r),this):(this._keymap.set(e,r=new i5(e,n)),this.newest?(this.newest[Ji]=r,r[ra]=this.newest):this.oldest=r,this.newest=r,++this.size,this.size>this.limit&&this.shift(),this)}shift(){var e=this.oldest;if(e)return this.oldest[Ji]?(this.oldest=this.oldest[Ji],this.oldest[ra]=void 0):(this.oldest=void 0,this.newest=void 0),e[Ji]=e[ra]=void 0,this._keymap.delete(e.key),--this.size,[e.key,e.value]}find(e){let n=this._keymap.get(e);return n?n.value:void 0}has(e){return this._keymap.has(e)}delete(e){var n=this._keymap.get(e);if(n)return this._keymap.delete(n.key),n[Ji]&&n[ra]?(n[ra][Ji]=n[Ji],n[Ji][ra]=n[ra]):n[Ji]?(n[Ji][ra]=void 0,this.oldest=n[Ji]):n[ra]?(n[ra][Ji]=void 0,this.newest=n[ra]):this.oldest=this.newest=void 0,this.size--,n.value}clear(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()}keys(){return new P_(this.oldest)}values(){return new k_(this.oldest)}entries(){return this}[Symbol.iterator](){return new M_(this.oldest)}forEach(e,n){typeof n!="object"&&(n=this);let r=this.oldest;for(;r;)e.call(n,r.value,r.key,this),r=r[Ji]}toJSON(){for(var e=new Array(this.size),n=0,r=this.oldest;r;)e[n++]={key:r.key,value:r.value},r=r[Ji];return e}toString(){for(var e="",n=this.oldest;n;)e+=String(n.key)+":"+n.value,n=n[Ji],n&&(e+=" < ");return e}}function i5(t,e){this.key=t,this.value=e,this[Ji]=void 0,this[ra]=void 0}function M_(t){this.entry=t}M_.prototype[Symbol.iterator]=function(){return this};M_.prototype.next=function(){let t=this.entry;return t?(this.entry=t[Ji],{done:!1,value:[t.key,t.value]}):{done:!0,value:void 0}};function P_(t){this.entry=t}P_.prototype[Symbol.iterator]=function(){return this};P_.prototype.next=function(){let t=this.entry;return t?(this.entry=t[Ji],{done:!1,value:t.key}):{done:!0,value:void 0}};function k_(t){this.entry=t}k_.prototype[Symbol.iterator]=function(){return this};k_.prototype.next=function(){let t=this.entry;return t?(this.entry=t[Ji],{done:!1,value:t.value}):{done:!0,value:void 0}};function vU(t,e){let n=0,r=null;r=setInterval(function(){if(n>=20)throw clearInterval(r),new Error("window.google not found after 10 seconds");window.google&&window.google.maps&&window.google.maps.Map&&(clearInterval(r),t.call(e)),++n},500)}L.GridLayer.GoogleMutant=L.GridLayer.extend({options:{maxZoom:21,type:"roadmap",maxNativeZoom:21},initialize:function(t){L.GridLayer.prototype.initialize.call(this,t),this._tileCallbacks={},this._lru=new mU(100),this._imagesPerTile=1,this._boundOnMutatedImage=this._onMutatedImage.bind(this)},onAdd:function(t){L.GridLayer.prototype.onAdd.call(this,t),this._initMutantContainer(),this._logoContainer&&t._controlCorners.bottomleft.appendChild(this._logoContainer),this._attributionContainer&&t._controlCorners.bottomright.appendChild(this._attributionContainer),vU(()=>{this._map&&(this._initMutant(),google.maps.event.addListenerOnce(this._mutant,"idle",()=>{this._map&&(this._checkZoomLevels(),this._mutantIsReady=!0)}))})},onRemove:function(t){L.GridLayer.prototype.onRemove.call(this,t),this._observer.disconnect(),t._container.removeChild(this._mutantContainer),this._logoContainer&&L.DomUtil.remove(this._logoContainer),this._attributionContainer&&L.DomUtil.remove(this._attributionContainer),this._mutant&&google.maps.event.clearListeners(this._mutant,"idle")},addGoogleLayer:function(t,e){return this._subLayers||(this._subLayers={}),this.whenReady(()=>{var n=google.maps[t],r=new n(e);r.setMap(this._mutant),this._subLayers[t]=r}),this},removeGoogleLayer:function(t){return this.whenReady(()=>{var e=this._subLayers&&this._subLayers[t];e&&(e.setMap(null),delete this._subLayers[t])}),this},_initMutantContainer:function(){this._mutantContainer||(this._mutantContainer=L.DomUtil.create("div","leaflet-google-mutant leaflet-top leaflet-left"),this._mutantContainer.id="_MutantContainer_"+L.Util.stamp(this._mutantContainer),this._mutantContainer.style.pointerEvents="none",this._mutantContainer.style.visibility="hidden",L.DomEvent.off(this._mutantContainer)),this._map.getContainer().appendChild(this._mutantContainer),this.setOpacity(this.options.opacity);const t=this._mutantContainer.style;this._map.options.zoomSnap<1?(t.width="180%",t.height="180%"):(t.width="100%",t.height="100%"),t.zIndex=-1,this._attachObserver(this._mutantContainer)},_initMutant:function(){if(!this._mutant){var t={center:{lat:0,lng:0},zoom:0,tilt:0,mapTypeId:this.options.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,styles:this.options.styles||[],backgroundColor:"transparent"};this.options.mapId!=null&&(t.mapId=this.options.mapId);var e=new google.maps.Map(this._mutantContainer,t);this._mutant=e,this._update(),this.fire("spawned",{mapObject:e}),this._waitControls(),this.once("controls_ready",this._setupAttribution)}},_attachObserver:function(e){this._observer||(this._observer=new MutationObserver(this._onMutations.bind(this))),this._observer.observe(e,{childList:!0,subtree:!0}),Array.prototype.forEach.call(e.querySelectorAll("img"),this._boundOnMutatedImage)},_waitControls:function(){const t=setInterval(()=>{const e=this._mutant.__gm.layoutManager;if(!e)return;clearInterval(t);let n;Object.keys(e).forEach(function(r){const i=e[r];i.get&&i.get(1)instanceof Node&&(n=i)}),this.fire("controls_ready",{positions:n})},50)},_setupAttribution:function(t){if(!this._map)return;const e=google.maps.ControlPosition,n=this._attributionContainer=t.positions.get(e.BOTTOM_RIGHT);L.DomUtil.addClass(n,"leaflet-control leaflet-control-attribution"),L.DomEvent.disableClickPropagation(n),n.style.height="14px",this._map._controlCorners.bottomright.appendChild(n),this._logoContainer=t.positions.get(e.BOTTOM_LEFT),this._logoContainer.style.pointerEvents="auto",this._map._controlCorners.bottomleft.appendChild(this._logoContainer)},_onMutations:function(e){for(var n=0;n<e.length;++n)for(var r=e[n],i=0;i<r.addedNodes.length;++i){var s=r.addedNodes[i];s instanceof HTMLImageElement?this._onMutatedImage(s):s instanceof HTMLElement&&Array.prototype.forEach.call(s.querySelectorAll("img"),this._boundOnMutatedImage)}},_roadRegexp:/!1i(\d+)!2i(\d+)!3i(\d+|VinaFnapurmBegrtn)!/,_satRegexp:/x=(\d+)&y=(\d+)&z=(\d+|VinaFnapurmBegrtn)/,_onMutatedImage:function(e){let n,r=e.src.match(this._roadRegexp),i=0;if(r?(n={z:r[1],x:r[2],y:r[3]},this._imagesPerTile>1&&(e.style.zIndex=1,i=1)):(r=e.src.match(this._satRegexp),r&&(n={x:r[1],y:r[2],z:r[3]}),i=0),n){var s=this._tileCoordsToKey(n);e.style.position="absolute";var o=s+"/"+i;this._lru.set(o,e),o in this._tileCallbacks&&this._tileCallbacks[o]&&(this._tileCallbacks[o].forEach(a=>a(e)),delete this._tileCallbacks[o])}},createTile:function(t,e){const n=this._tileCoordsToKey(t),r=L.DomUtil.create("div");r.style.textAlign="left",r.dataset.pending=this._imagesPerTile,e=e.bind(this,null,r);for(var i=0;i<this._imagesPerTile;++i){const s=n+"/"+i,o=this._lru.get(s);o?(r.appendChild(this._clone(o)),--r.dataset.pending):(this._tileCallbacks[s]=this._tileCallbacks[s]||[],this._tileCallbacks[s].push((function(a){return(function(l){a.appendChild(this._clone(l)),--a.dataset.pending,parseInt(a.dataset.pending)||e()}).bind(this)}).bind(this)(r)))}return parseInt(r.dataset.pending)||L.Util.requestAnimFrame(e),r},_clone:function(t){const e=t.cloneNode(!0);return e.style.visibility="visible",e},_checkZoomLevels:function(){const t=this._map.getZoom(),e=this._mutant.getZoom();!t||!e||(e!==t||e>this.options.maxNativeZoom)&&this._setMaxNativeZoom(e)},_setMaxNativeZoom:function(t){t!==this.options.maxNativeZoom&&(this.options.maxNativeZoom=t,this._resetView())},_update:function(t){if(this._mutant){t=t||this._map.getCenter();const e=new google.maps.LatLng(t.lat,t.lng),n=Math.round(this._map.getZoom()),r=this._mutant.getZoom();this._mutant.setCenter(e),n!==r&&(this._mutant.setZoom(n),this._mutantIsReady&&this._checkZoomLevels())}L.GridLayer.prototype._update.call(this,t)},whenReady:function(t,e){return this._mutant?t.call(e||this,{target:this}):this.on("spawned",t,e),this}});L.gridLayer.googleMutant=function(t){return new L.GridLayer.GoogleMutant(t)};let U1=!1,Fd=null;function yU(){return U1?Promise.resolve():Fd||(Fd=new Promise(async(t,e)=>{var n;try{if(window.google&&window.google.maps){U1=!0,t();return}try{const r=await X2.getGoogleMapsApiKey(),i=((n=r==null?void 0:r.data)==null?void 0:n.url)||"https://maps.googleapis.com/maps/api/js?libraries=places",s=document.createElement("script");s.type="text/javascript",s.src=i,s.async=!0,s.defer=!0,s.onload=()=>{U1=!0,t()},s.onerror=()=>{Fd=null,e(new Error("Failed to load Google Maps API"))},document.head.appendChild(s)}catch(r){console.warn("Error loading Google Maps API:",r),Fd=null,e(r)}}catch(r){Fd=null,e(r)}}),Fd)}function bU(){const t=_t(null),e=_t(""),n=_t("Hybride"),r=_t(null),i=_t(!1),s={maxZoom:19,updateWhenZooming:!0,updateWhenIdle:!0,noWrap:!0,keepBuffer:2,maxNativeZoom:19,tileSize:256,zoomOffset:0,bounds:en.latLngBounds(en.latLng(41.333,-5.566),en.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,useCache:!0,priorityLevels:3},o={Hybride:en.layerGroup([en.gridLayer.googleMutant({type:"hybrid",maxZoom:s.maxZoom})]),Cadastre:en.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...s,attribution:"Cadastre - Carte © IGN/Geoportail",maxNativeZoom:18}),IGN:en.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...s,attribution:"Carte IGN © IGN/Geoportail",maxNativeZoom:18})},a=async()=>{try{await yU(),i.value=!0}catch(v){console.error("Failed to load Google Maps API:",v),i.value=!1,n.value==="Hybride"&&(n.value="IGN")}};return{map:t,searchQuery:e,currentBaseMap:n,baseMaps:o,initMap:async v=>{i.value||await a(),t.value=v,v.options.zoomSnap=.5,v.options.zoomDelta=.5,v.options.wheelPxPerZoomLevel=120,v.options.zoomAnimation=!0,v.options.fadeAnimation=!0,v.options.markerZoomAnimation=!0,v.options.preferCanvas=!0,v.options.renderer=en.canvas(),v.options.minZoom=2,v.options.maxZoom=19,v.options.scrollWheelZoom=!0,v.options.doubleClickZoom=!0;const m=en.latLngBounds(en.latLng(-90,-180),en.latLng(90,180));v.setMaxBounds(m),v.options.maxBoundsViscosity=1,v.options.trackResize=!0;let x=null;v.getZoom(),v.on("zoomstart",()=>{v.getZoom(),v.options.zoomAnimation=!1,v.options.markerZoomAnimation=!1}),v.on("zoomend",()=>{x&&clearTimeout(x),x=setTimeout(()=>{setTimeout(()=>{v.options.zoomAnimation=!0,v.options.markerZoomAnimation=!0,v.invalidateSize({animate:!1,pan:!1});const T=v.getBounds(),D=v.options.maxBounds;D&&!T.intersects(D)&&v.panInsideBounds(D,{animate:!1}),v.eachLayer(k=>{k.properties&&k.properties.type==="Note"&&typeof k.updatePosition=="function"&&k.updatePosition()})},250)},250)});const E=v._zoomAnimation;E&&(v._zoomAnimation=function(T){try{this._animatingZoom||E.call(this,T)}catch{console.warn("Animation de zoom interrompue, restauration de la vue..."),this._resetView(this.getCenter(),this.getZoom())}}),v.on("zoomanim",T=>{v.eachLayer(D=>{D.properties&&D.properties.type==="Note"&&typeof D.updatePositionDuringZoom=="function"&&D.updatePositionDuringZoom(T)})}),v&&(v.whenReady(()=>{const T=n.value;if(o[T]){if(console.log(`Initialisation de la couche de base: ${T}`),r.value&&v.hasLayer(r.value))try{v.removeLayer(r.value),console.log("Couche active précédente supprimée")}catch(D){console.warn("Erreur lors de la suppression de la couche active précédente:",D)}r.value=o[T];try{r.value.addTo(v),console.log(`Couche ${T} ajoutée à la carte`)}catch(D){console.error(`Erreur lors de l'ajout de la couche ${T}:`,D)}}else console.warn(`Couche de base non disponible: ${T}`)}),v.on("baselayerchange",T=>{n.value=T.name,r.value=T.layer}))},searchLocation:async()=>{if(!(!t.value||!e.value))try{const m=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e.value)}`)).json();if(m&&m.length>0){const{lat:x,lon:E}=m[0];t.value.setView([x,E],13,{animate:!0})}}catch(v){console.error("Erreur lors de la recherche de localisation:",v)}},changeBaseMap:async v=>{if(v==="Hybride"&&!i.value&&(await a(),!i.value)){console.warn("Cannot switch to Hybride: Google Maps API not loaded");return}if(!t.value||!o[v]){console.warn(`Impossible de changer la carte de base: ${t.value?"type de carte non disponible":"carte non initialisée"}`);return}try{if(n.value===v)return;console.log(`Changement de carte: ${n.value} -> ${v}`);const m=t.value,x=m.getCenter(),E=m.getZoom();m.options.zoomAnimation=!1,m.options.fadeAnimation=!1,m.options.markerZoomAnimation=!1;const T=o[v];if(r.value&&m.hasLayer(r.value))try{m.removeLayer(r.value),console.log(`Couche précédente ${n.value} supprimée`)}catch(D){console.warn("Erreur lors de la suppression de la couche active:",D)}try{T instanceof en.LayerGroup,T.addTo(m),console.log(`Nouvelle couche ${v} ajoutée`)}catch(D){console.error("Erreur lors de l'ajout de la nouvelle couche:",D);try{m.hasLayer(T)&&m.removeLayer(T),T.addTo(m),console.log(`Récupération: couche ${v} réajoutée`)}catch(k){throw console.error("Échec de la récupération:",k),new Error("Impossible d'ajouter la nouvelle couche")}}r.value=T,n.value=v;try{m.setView(x,E,{animate:!1,duration:0,noMoveStart:!0}),console.log(`Vue réinitialisée: centre=${x}, zoom=${E}`)}catch(D){console.warn("Erreur lors de la réinitialisation de la vue:",D)}try{m.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{m.eachLayer(D=>{D.properties&&D.properties.type==="Note"&&typeof D.updatePosition=="function"&&D.updatePosition()})},100)}catch(D){console.warn("Erreur lors du rafraîchissement de la carte:",D)}setTimeout(()=>{m.options.zoomAnimation=!0,m.options.fadeAnimation=!0,m.options.markerZoomAnimation=!0,console.log("Animations restaurées")},500)}catch(m){if(console.error("Erreur lors du changement de carte de base:",m),t.value)try{const x=t.value;x.eachLayer(T=>{(T instanceof en.TileLayer||T instanceof en.LayerGroup)&&x.removeLayer(T)});const E=o[v];E.addTo(x),r.value=E,n.value=v,x.options.zoomAnimation=!0,x.options.fadeAnimation=!0,x.options.markerZoomAnimation=!0,x.invalidateSize({animate:!1,pan:!1}),console.log("Récupération effectuée après erreur")}catch(x){console.error("Erreur lors de la récupération après échec:",x)}}},cleanup:()=>{t.value&&(t.value.remove(),t.value=null),r.value&&(r.value=null)},isGoogleMapsLoaded:i}}const _U={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3001] overflow-y-auto"},wU={class:"bg-white w-full h-full md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 relative overflow-y-auto"},xU={class:"p-4 md:p-6 pt-0 overflow-y-auto max-h-[calc(100vh-80px)] md:max-h-[calc(90vh-80px)]"},LU={key:0,class:"mb-4"},SU={key:0,class:"animate-pulse"},CU=["value"],EU={key:1,class:"mb-4"},MU={key:0,class:"animate-pulse"},PU=["disabled"],kU={value:null},AU=["value"],TU={key:2,class:"mb-4"},DU={key:0,class:"animate-pulse"},IU=["disabled"],OU={value:null},NU=["value"],BU={class:"mb-4"},RU={class:"mb-6"},FU={class:"flex justify-end space-x-3"},jU=["disabled"],zU={key:0},$U={key:1},_E=_s({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","salarieSelected","visiteurSelected"],setup(t,{expose:e,emit:n}){function r(X){return X?typeof X=="object"?X.id:X:null}function i(X){if(X===null)throw new Error("Invalid ID");return X}const s=t,o=n,a=co(),l=Ay(),c=xp(),d=_t(!1),p=_t(null),v=_t([]),m=_t([]),x=_t([]),E=_t(null),T=_t(null),D=_t(!1),k=_t(!1),B=_t(!1),W=_t({nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),Q=qn(()=>{var X,K,F;return((X=a.user)==null?void 0:X.user_type)==="admin"?W.value.nom.trim()&&W.value.entreprise&&W.value.salarie:((K=a.user)==null?void 0:K.user_type)==="entreprise"?W.value.nom.trim()&&W.value.salarie:(((F=a.user)==null?void 0:F.user_type)==="salarie",W.value.nom.trim())});ni(()=>W.value.entreprise,async X=>{if(!s.modelValue)return;W.value.salarie=null,W.value.visiteur=null,m.value=[];const K=r(X);console.log("[NewPlanModal] Entreprise sélectionnée:",K),K?await pe(K):v.value=[]}),ni(()=>W.value.salarie,async X=>{if(!s.modelValue)return;W.value.visiteur=null;const K=r(X);K?await fe(K):m.value=[]}),ni(()=>s.modelValue,X=>{var K,F,N;X?((K=a.user)==null?void 0:K.user_type)==="admin"?R():((F=a.user)==null?void 0:F.user_type)==="entreprise"?pe(a.user.id):((N=a.user)==null?void 0:N.user_type)==="salarie"&&fe(a.user.id):(W.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},E.value=null,T.value=null,m.value=[],v.value=[],x.value=[],p.value=null)});async function pe(X){D.value=!0;try{console.log("[NewPlanModal] Chargement des salaries pour entreprise:",X);const K=await xa.getUsers({role:"SALARIE",entreprise:X});console.log("[NewPlanModal] Réponse salaries:",K.data),v.value=K.data}catch(K){console.error("[NewPlanModal] Error loading salaries:",K),v.value=[]}finally{D.value=!1}}async function fe(X){k.value=!0;try{const K=await xa.getUsers({role:"VISITEUR",salarie:X});m.value=K.data}catch(K){console.error("[NewPlanModal] Error loading visiteurs:",K),m.value=[]}finally{k.value=!1}}async function O(X){s.modelValue&&(E.value=X,W.value.salarie=X.id,await fe(X.id),o("salarieSelected",X))}function U(X){s.modelValue&&(T.value=X,W.value.visiteur=X.id,o("visiteurSelected",X))}function q(){o("update:modelValue",!1),W.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},E.value=null,T.value=null,m.value=[],p.value=null}async function R(){B.value=!0;try{const X=await a.fetchEnterprises();x.value=X}catch(X){console.error("[NewPlanModal] Error loading entreprises:",X),x.value=[]}finally{B.value=!1}}async function $(){var X,K;p.value=null,d.value=!0;try{const F={nom:W.value.nom.trim(),description:W.value.description.trim()},N=a.user;if(!N)throw new Error("User not found");if(N.user_type==="admin"){if(!W.value.entreprise||!W.value.salarie)throw new Error("Missing required fields");F.entreprise=i(r(W.value.entreprise)),F.salarie=i(r(W.value.salarie)),W.value.visiteur&&(F.visiteur=W.value.visiteur)}else if(N.user_type==="entreprise"){if(!W.value.salarie)throw new Error("Missing required fields");F.entreprise=N.id,F.salarie=i(r(W.value.salarie)),W.value.visiteur&&(F.visiteur=W.value.visiteur)}else if(N.user_type==="salarie"){if(!N.entreprise)throw new Error("Missing required fields");F.entreprise=N.entreprise.id,F.salarie=N.id,W.value.visiteur&&(F.visiteur=W.value.visiteur)}else if(N.user_type==="visiteur"){if(!N.entreprise||!N.salarie)throw new Error("Missing required fields");F.entreprise=N.entreprise.id,F.salarie=N.salarie.id,F.visiteur=N.id}console.log("Données du plan à créer:",F),l.clearCurrentPlan(),c.setCurrentPlan(null);const J=await l.createPlan(F);o("created",J.id),q()}catch(F){console.error("[NewPlanModal] Error creating plan:",F),console.error("Response data:",(X=F.response)==null?void 0:X.data);let N="Une erreur est survenue lors de la création du plan";(K=F.response)!=null&&K.data&&(typeof F.response.data=="object"?N=Object.entries(F.response.data).map(([J,Y])=>Array.isArray(Y)?`${J}: ${Y.join(", ")}`:`${J}: ${Y}`).join(`
`):typeof F.response.data=="string"&&(N=F.response.data)),p.value=N}finally{d.value=!1}}return e({salaries:v,visiteurs:m,selectedSalarie:E,selectedVisiteur:T,loadSalaries:pe,loadVisiteurs:fe,selectSalarie:O,selectVisiteur:U}),(X,K)=>{var F,N,J,Y;return X.modelValue?(De(),Ne("div",_U,[C("div",wU,[C("div",{class:"flex justify-between items-center mb-4 sticky top-0 bg-white p-4 md:p-6 pb-4 border-b z-10"},[K[6]||(K[6]=C("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),C("button",{onClick:q,class:"text-gray-400 hover:text-gray-500"},K[5]||(K[5]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",xU,[bn(a).isAdmin?(De(),Ne("div",LU,[K[9]||(K[9]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Entreprise",-1)),B.value?(De(),Ne("div",SU,K[7]||(K[7]=[C("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):On((De(),Ne("select",{key:1,"onUpdate:modelValue":K[0]||(K[0]=ye=>W.value.entreprise=ye),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[K[8]||(K[8]=C("option",{value:null},"Sélectionnez une entreprise",-1)),(De(!0),Ne(_n,null,Wn(x.value,ye=>(De(),Ne("option",{key:ye.id,value:ye.id},Tt(bn(bl)(ye)),9,CU))),128))],512)),[[Mi,W.value.entreprise]])])):Wt("",!0),((F=bn(a).user)==null?void 0:F.user_type)==="admin"||((N=bn(a).user)==null?void 0:N.user_type)==="entreprise"?(De(),Ne("div",EU,[K[11]||(K[11]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salarie",-1)),D.value?(De(),Ne("div",MU,K[10]||(K[10]=[C("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):On((De(),Ne("select",{key:1,id:"edit-salarie","onUpdate:modelValue":K[1]||(K[1]=ye=>W.value.salarie=ye),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:bn(a).isAdmin&&!W.value.entreprise},[C("option",kU,Tt(v.value.length?"Sélectionnez un salarie":"Aucun salarie disponible"),1),(De(!0),Ne(_n,null,Wn(v.value,ye=>(De(),Ne("option",{key:ye.id,value:ye.id},Tt(bn(bl)(ye)),9,AU))),128))],8,PU)),[[Mi,W.value.salarie]])])):Wt("",!0),((J=bn(a).user)==null?void 0:J.user_type)!=="visiteur"?(De(),Ne("div",TU,[K[13]||(K[13]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visiteur",-1)),k.value?(De(),Ne("div",DU,K[12]||(K[12]=[C("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):On((De(),Ne("select",{key:1,id:"edit-visiteur","onUpdate:modelValue":K[2]||(K[2]=ye=>W.value.visiteur=ye),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!m.value.length||((Y=bn(a).user)==null?void 0:Y.user_type)!=="salarie"&&!W.value.salarie},[C("option",OU,Tt(m.value.length?"Sélectionnez un visiteur":"Aucun visiteur disponible"),1),(De(!0),Ne(_n,null,Wn(m.value,ye=>(De(),Ne("option",{key:ye.id,value:ye.id},Tt(bn(bl)(ye)),9,NU))),128))],8,IU)),[[Mi,W.value.visiteur]])])):Wt("",!0),C("div",BU,[K[14]||(K[14]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),On(C("input",{id:"edit-nom","onUpdate:modelValue":K[3]||(K[3]=ye=>W.value.nom=ye),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[ui,W.value.nom]])]),C("div",RU,[K[15]||(K[15]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),On(C("textarea",{id:"edit-description","onUpdate:modelValue":K[4]||(K[4]=ye=>W.value.description=ye),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[ui,W.value.description]])]),C("div",FU,[C("button",{onClick:q,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),C("button",{onClick:$,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!Q.value||d.value},[d.value?(De(),Ne("span",zU,"Création en cours...")):(De(),Ne("span",$U,"Créer"))],8,jU)])])])])):Wt("",!0)}}});function Vi(t){"@babel/helpers - typeof";return Vi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vi(t)}var Ya=Uint8Array,vu=Uint16Array,A_=Int32Array,Ty=new Ya([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Dy=new Ya([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ub=new Ya([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),wE=function(t,e){for(var n=new vu(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new A_(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},xE=wE(Ty,2),LE=xE.b,cb=xE.r;LE[28]=258,cb[258]=28;var SE=wE(Dy,0),UU=SE.b,s5=SE.r,hb=new vu(32768);for(var vs=0;vs<32768;++vs){var qh=(vs&43690)>>1|(vs&21845)<<1;qh=(qh&52428)>>2|(qh&13107)<<2,qh=(qh&61680)>>4|(qh&3855)<<4,hb[vs]=((qh&65280)>>8|(qh&255)<<8)>>1}var qc=function(t,e,n){for(var r=t.length,i=0,s=new vu(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new vu(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new vu(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],d=e-t[i],p=o[t[i]-1]++<<d,v=p|(1<<d)-1;p<=v;++p)a[hb[p]>>l]=c}else for(a=new vu(r),i=0;i<r;++i)t[i]&&(a[i]=hb[o[t[i]-1]++]>>15-t[i]);return a},vd=new Ya(288);for(var vs=0;vs<144;++vs)vd[vs]=8;for(var vs=144;vs<256;++vs)vd[vs]=9;for(var vs=256;vs<280;++vs)vd[vs]=7;for(var vs=280;vs<288;++vs)vd[vs]=8;var um=new Ya(32);for(var vs=0;vs<32;++vs)um[vs]=5;var VU=qc(vd,9,0),HU=qc(vd,9,1),GU=qc(um,5,0),WU=qc(um,5,1),V1=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},ac=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},H1=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},T_=function(t){return(t+7)/8|0},CE=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Ya(t.subarray(e,n))},qU=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],hc=function(t,e,n){var r=new Error(e||qU[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,hc),!n)throw r;return r},YU=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new Ya(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new Ya(i*3));var c=function(Le){var qe=n.length;if(Le>qe){var se=new Ya(Math.max(qe*2,Le));se.set(n),n=se}},d=e.f||0,p=e.p||0,v=e.b||0,m=e.l,x=e.d,E=e.m,T=e.n,D=i*8;do{if(!m){d=ac(t,p,1);var k=ac(t,p+1,3);if(p+=3,k)if(k==1)m=HU,x=WU,E=9,T=5;else if(k==2){var pe=ac(t,p,31)+257,fe=ac(t,p+10,15)+4,O=pe+ac(t,p+5,31)+1;p+=14;for(var U=new Ya(O),q=new Ya(19),R=0;R<fe;++R)q[ub[R]]=ac(t,p+R*3,7);p+=fe*3;for(var $=V1(q),X=(1<<$)-1,K=qc(q,$,1),R=0;R<O;){var F=K[ac(t,p,X)];p+=F&15;var B=F>>4;if(B<16)U[R++]=B;else{var N=0,J=0;for(B==16?(J=3+ac(t,p,3),p+=2,N=U[R-1]):B==17?(J=3+ac(t,p,7),p+=3):B==18&&(J=11+ac(t,p,127),p+=7);J--;)U[R++]=N}}var Y=U.subarray(0,pe),ye=U.subarray(pe);E=V1(Y),T=V1(ye),m=qc(Y,E,1),x=qc(ye,T,1)}else hc(1);else{var B=T_(p)+4,W=t[B-4]|t[B-3]<<8,Q=B+W;if(Q>i){l&&hc(0);break}a&&c(v+W),n.set(t.subarray(B,Q),v),e.b=v+=W,e.p=p=Q*8,e.f=d;continue}if(p>D){l&&hc(0);break}}a&&c(v+131072);for(var Ce=(1<<E)-1,He=(1<<T)-1,j=p;;j=p){var N=m[H1(t,p)&Ce],Z=N>>4;if(p+=N&15,p>D){l&&hc(0);break}if(N||hc(2),Z<256)n[v++]=Z;else if(Z==256){j=p,m=null;break}else{var ae=Z-254;if(Z>264){var R=Z-257,de=Ty[R];ae=ac(t,p,(1<<de)-1)+LE[R],p+=de}var ge=x[H1(t,p)&He],me=ge>>4;ge||hc(3),p+=ge&15;var ye=UU[me];if(me>3){var de=Dy[me];ye+=H1(t,p)&(1<<de)-1,p+=de}if(p>D){l&&hc(0);break}a&&c(v+131072);var oe=v+ae;if(v<ye){var re=s-ye,Te=Math.min(ye,oe);for(re+v<0&&hc(3);v<Te;++v)n[v]=r[re+v]}for(;v<oe;++v)n[v]=n[v-ye]}}e.l=m,e.p=j,e.b=v,e.f=d,m&&(d=1,e.m=E,e.d=x,e.n=T)}while(!d);return v!=n.length&&o?CE(n,0,v):n.subarray(0,v)},mh=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Kp=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},G1=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:ME,l:0};if(i==1){var o=new Ya(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(Q,pe){return Q.f-pe.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,d=1,p=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=i-1;)a=n[n[c].f<n[p].f?c++:p++],l=n[c!=d&&n[c].f<n[p].f?c++:p++],n[d++]={s:-1,f:a.f+l.f,l:a,r:l};for(var v=s[0].s,r=1;r<i;++r)s[r].s>v&&(v=s[r].s);var m=new vu(v+1),x=db(n[d-1],m,0);if(x>e){var r=0,E=0,T=x-e,D=1<<T;for(s.sort(function(pe,fe){return m[fe.s]-m[pe.s]||pe.f-fe.f});r<i;++r){var k=s[r].s;if(m[k]>e)E+=D-(1<<x-m[k]),m[k]=e;else break}for(E>>=T;E>0;){var B=s[r].s;m[B]<e?E-=1<<e-m[B]++-1:++r}for(;r>=0&&E;--r){var W=s[r].s;m[W]==e&&(--m[W],++E)}x=e}return{t:new Ya(m),l:x}},db=function(t,e,n){return t.s==-1?Math.max(db(t.l,e,n+1),db(t.r,e,n+1)):e[t.s]=n},o5=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new vu(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},Zp=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},EE=function(t,e,n){var r=n.length,i=T_(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},a5=function(t,e,n,r,i,s,o,a,l,c,d){mh(e,d++,n),++i[256];for(var p=G1(i,15),v=p.t,m=p.l,x=G1(s,15),E=x.t,T=x.l,D=o5(v),k=D.c,B=D.n,W=o5(E),Q=W.c,pe=W.n,fe=new vu(19),O=0;O<k.length;++O)++fe[k[O]&31];for(var O=0;O<Q.length;++O)++fe[Q[O]&31];for(var U=G1(fe,7),q=U.t,R=U.l,$=19;$>4&&!q[ub[$-1]];--$);var X=c+5<<3,K=Zp(i,vd)+Zp(s,um)+o,F=Zp(i,v)+Zp(s,E)+o+14+3*$+Zp(fe,q)+2*fe[16]+3*fe[17]+7*fe[18];if(l>=0&&X<=K&&X<=F)return EE(e,d,t.subarray(l,l+c));var N,J,Y,ye;if(mh(e,d,1+(F<K)),d+=2,F<K){N=qc(v,m,0),J=v,Y=qc(E,T,0),ye=E;var Ce=qc(q,R,0);mh(e,d,B-257),mh(e,d+5,pe-1),mh(e,d+10,$-4),d+=14;for(var O=0;O<$;++O)mh(e,d+3*O,q[ub[O]]);d+=3*$;for(var He=[k,Q],j=0;j<2;++j)for(var Z=He[j],O=0;O<Z.length;++O){var ae=Z[O]&31;mh(e,d,Ce[ae]),d+=q[ae],ae>15&&(mh(e,d,Z[O]>>5&127),d+=Z[O]>>12)}}else N=VU,J=vd,Y=GU,ye=um;for(var O=0;O<a;++O){var de=r[O];if(de>255){var ae=de>>18&31;Kp(e,d,N[ae+257]),d+=J[ae+257],ae>7&&(mh(e,d,de>>23&31),d+=Ty[ae]);var ge=de&31;Kp(e,d,Y[ge]),d+=ye[ge],ge>3&&(Kp(e,d,de>>5&8191),d+=Dy[ge])}else Kp(e,d,N[de]),d+=J[de]}return Kp(e,d,N[256]),d+J[256]},KU=new A_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ME=new Ya(0),ZU=function(t,e,n,r,i,s){var o=s.z||t.length,a=new Ya(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,d=(s.r||0)&7;if(e){d&&(l[0]=s.r>>3);for(var p=KU[e-1],v=p>>13,m=p&8191,x=(1<<n)-1,E=s.p||new vu(32768),T=s.h||new vu(x+1),D=Math.ceil(n/3),k=2*D,B=function(le){return(t[le]^t[le+1]<<D^t[le+2]<<k)&x},W=new A_(25e3),Q=new vu(288),pe=new vu(32),fe=0,O=0,U=s.i||0,q=0,R=s.w||0,$=0;U+2<o;++U){var X=B(U),K=U&32767,F=T[X];if(E[K]=F,T[X]=K,R<=U){var N=o-U;if((fe>7e3||q>24576)&&(N>423||!c)){d=a5(t,l,0,W,Q,pe,O,q,$,U-$,d),q=fe=O=0,$=U;for(var J=0;J<286;++J)Q[J]=0;for(var J=0;J<30;++J)pe[J]=0}var Y=2,ye=0,Ce=m,He=K-F&32767;if(N>2&&X==B(U-He))for(var j=Math.min(v,N)-1,Z=Math.min(32767,U),ae=Math.min(258,N);He<=Z&&--Ce&&K!=F;){if(t[U+Y]==t[U+Y-He]){for(var de=0;de<ae&&t[U+de]==t[U+de-He];++de);if(de>Y){if(Y=de,ye=He,de>j)break;for(var ge=Math.min(He,de-2),me=0,J=0;J<ge;++J){var oe=U-He+J&32767,re=E[oe],Te=oe-re&32767;Te>me&&(me=Te,F=oe)}}}K=F,F=E[K],He+=K-F&32767}if(ye){W[q++]=268435456|cb[Y]<<18|s5[ye];var Le=cb[Y]&31,qe=s5[ye]&31;O+=Ty[Le]+Dy[qe],++Q[257+Le],++pe[qe],R=U+Y,++fe}else W[q++]=t[U],++Q[t[U]]}}for(U=Math.max(U,R);U<o;++U)W[q++]=t[U],++Q[t[U]];d=a5(t,l,c,W,Q,pe,O,q,$,U-$,d),c||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=T,s.p=E,s.i=U,s.w=R)}else{for(var U=s.w||0;U<o+c;U+=65535){var se=U+65535;se>=o&&(l[d/8|0]=c,se=o),d=EE(l,d+1,t.subarray(U,se))}s.i=o}return CE(a,0,r+T_(d)+i)},PE=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},XU=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Ya(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return ZU(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},kE=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},JU=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=PE();i.p(e.dictionary),kE(t,2,i.d())}},QU=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&hc(6,"invalid zlib data"),(t[1]>>5&1)==1&&hc(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function fb(t,e){e||(e={});var n=PE();n.p(t);var r=XU(t,e,e.dictionary?6:2,4);return JU(r,e),kE(r,r.length-4,n.d()),r}function eV(t,e){return YU(t.subarray(QU(t),-4),{i:2},e,e)}var tV=typeof TextDecoder<"u"&&new TextDecoder,nV=0;try{tV.decode(ME,{stream:!0}),nV=1}catch{}var Er=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function W1(){Er.console&&typeof Er.console.log=="function"&&Er.console.log.apply(Er.console,arguments)}var Qi={log:W1,warn:function(t){Er.console&&(typeof Er.console.warn=="function"?Er.console.warn.apply(Er.console,arguments):W1.call(null,arguments))},error:function(t){Er.console&&(typeof Er.console.error=="function"?Er.console.error.apply(Er.console,arguments):W1(t))}};function q1(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Gd(r.response,e,n)},r.onerror=function(){Qi.error("could not download file")},r.send()}function l5(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function p0(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Bg,pb,Gd=Er.saveAs||((typeof window>"u"?"undefined":Vi(window))!=="object"||window!==Er?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Er.URL||Er.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?l5(i.href)?q1(t,e,n):p0(i,i.target="_blank"):p0(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){p0(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(l5(t))q1(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){p0(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Vi(s)!=="object"&&(Qi.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return q1(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(Er.HTMLElement)||Er.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Vi(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var d=a.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},a.readAsDataURL(t)}else{var l=Er.URL||Er.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function AE(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Y1(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=ja(n,r,i,s,e[0],7,-680876936),s=ja(s,n,r,i,e[1],12,-389564586),i=ja(i,s,n,r,e[2],17,606105819),r=ja(r,i,s,n,e[3],22,-1044525330),n=ja(n,r,i,s,e[4],7,-176418897),s=ja(s,n,r,i,e[5],12,1200080426),i=ja(i,s,n,r,e[6],17,-1473231341),r=ja(r,i,s,n,e[7],22,-45705983),n=ja(n,r,i,s,e[8],7,1770035416),s=ja(s,n,r,i,e[9],12,-1958414417),i=ja(i,s,n,r,e[10],17,-42063),r=ja(r,i,s,n,e[11],22,-1990404162),n=ja(n,r,i,s,e[12],7,1804603682),s=ja(s,n,r,i,e[13],12,-40341101),i=ja(i,s,n,r,e[14],17,-1502002290),n=za(n,r=ja(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=za(s,n,r,i,e[6],9,-1069501632),i=za(i,s,n,r,e[11],14,643717713),r=za(r,i,s,n,e[0],20,-373897302),n=za(n,r,i,s,e[5],5,-701558691),s=za(s,n,r,i,e[10],9,38016083),i=za(i,s,n,r,e[15],14,-660478335),r=za(r,i,s,n,e[4],20,-405537848),n=za(n,r,i,s,e[9],5,568446438),s=za(s,n,r,i,e[14],9,-1019803690),i=za(i,s,n,r,e[3],14,-187363961),r=za(r,i,s,n,e[8],20,1163531501),n=za(n,r,i,s,e[13],5,-1444681467),s=za(s,n,r,i,e[2],9,-51403784),i=za(i,s,n,r,e[7],14,1735328473),n=$a(n,r=za(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=$a(s,n,r,i,e[8],11,-2022574463),i=$a(i,s,n,r,e[11],16,1839030562),r=$a(r,i,s,n,e[14],23,-35309556),n=$a(n,r,i,s,e[1],4,-1530992060),s=$a(s,n,r,i,e[4],11,1272893353),i=$a(i,s,n,r,e[7],16,-155497632),r=$a(r,i,s,n,e[10],23,-1094730640),n=$a(n,r,i,s,e[13],4,681279174),s=$a(s,n,r,i,e[0],11,-358537222),i=$a(i,s,n,r,e[3],16,-722521979),r=$a(r,i,s,n,e[6],23,76029189),n=$a(n,r,i,s,e[9],4,-640364487),s=$a(s,n,r,i,e[12],11,-421815835),i=$a(i,s,n,r,e[15],16,530742520),n=Ua(n,r=$a(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Ua(s,n,r,i,e[7],10,1126891415),i=Ua(i,s,n,r,e[14],15,-1416354905),r=Ua(r,i,s,n,e[5],21,-57434055),n=Ua(n,r,i,s,e[12],6,1700485571),s=Ua(s,n,r,i,e[3],10,-1894986606),i=Ua(i,s,n,r,e[10],15,-1051523),r=Ua(r,i,s,n,e[1],21,-2054922799),n=Ua(n,r,i,s,e[8],6,1873313359),s=Ua(s,n,r,i,e[15],10,-30611744),i=Ua(i,s,n,r,e[6],15,-1560198380),r=Ua(r,i,s,n,e[13],21,1309151649),n=Ua(n,r,i,s,e[4],6,-145523070),s=Ua(s,n,r,i,e[11],10,-1120210379),i=Ua(i,s,n,r,e[2],15,718787259),r=Ua(r,i,s,n,e[9],21,-343485551),t[0]=sd(n,t[0]),t[1]=sd(r,t[1]),t[2]=sd(i,t[2]),t[3]=sd(s,t[3])}function Iy(t,e,n,r,i,s){return e=sd(sd(e,t),sd(r,s)),sd(e<<i|e>>>32-i,n)}function ja(t,e,n,r,i,s,o){return Iy(e&n|~e&r,t,e,i,s,o)}function za(t,e,n,r,i,s,o){return Iy(e&r|n&~r,t,e,i,s,o)}function $a(t,e,n,r,i,s,o){return Iy(e^n^r,t,e,i,s,o)}function Ua(t,e,n,r,i,s,o){return Iy(n^(e|~r),t,e,i,s,o)}function TE(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Y1(r,rV(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Y1(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,Y1(r,i),r}function rV(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Bg=Er.atob.bind(Er),pb=Er.btoa.bind(Er);var u5="0123456789abcdef".split("");function iV(t){for(var e="",n=0;n<4;n++)e+=u5[t>>8*n+4&15]+u5[t>>8*n&15];return e}function sV(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function gb(t){return TE(t).map(sV).join("")}var oV=function(t){for(var e=0;e<t.length;e++)t[e]=iV(t[e]);return t.join("")}(TE("hello"))!="5d41402abc4b2a76b9719d911017c592";function sd(t,e){if(oV){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function mb(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var d=a[l];c=(c+d+o.charCodeAt(l))%256,a[l]=a[c],a[c]=d}n=t,r=a}else a=r;var p=e.length,v=0,m=0,x="";for(l=0;l<p;l++)m=(m+(d=a[v=(v+1)%256]))%256,a[v]=a[m],a[m]=d,o=a[(a[v]+a[m])%256],x+=String.fromCharCode(e.charCodeAt(l)^o);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var c5={print:4,modify:8,copy:16,"annot-forms":32};function Jf(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(c5.perm!==void 0)throw new Error("Invalid permission: "+a);i+=c5[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=gb(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=mb(this.encryptionKey,this.padding)}function Qf(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function h5(t){if(Vi(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){Er.console&&Qi.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Fv(t){if(!(this instanceof Fv))return new Fv(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function DE(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Zd(t,e,n,r,i){if(!(this instanceof Zd))return new Zd(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,DE.call(this,r,i)}function np(t,e,n,r,i){if(!(this instanceof np))return new np(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,DE.call(this,r,i)}function Cr(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",d=null;Vi(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,v={},m={internal:{},__private__:{}};m.__private__.PubSub=h5;var x="1.3",E=m.__private__.getPdfVersion=function(){return x};m.__private__.setPdfVersion=function(z){x=z};var T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return T};var D=m.__private__.getPageFormat=function(z){return T[z]};i=i||"a4";var k={COMPAT:"compat",ADVANCED:"advanced"},B=k.COMPAT;function W(){this.saveGraphicsState(),ee(new Yn(rt,0,0,-rt,0,Pa()*rt).toString()+" cm"),this.setFontSize(this.getFontSize()/rt),c="n",B=k.ADVANCED}function Q(){this.restoreGraphicsState(),c="S",B=k.COMPAT}var pe=m.__private__.combineFontStyleAndFontWeight=function(z,we){if(z=="bold"&&we=="normal"||z=="bold"&&we==400||z=="normal"&&we=="italic"||z=="bold"&&we=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return we&&(z=we==400||we==="normal"?z==="italic"?"italic":"normal":we!=700&&we!=="bold"||z!=="normal"?(we==700?"bold":we)+""+z:"bold"),z};m.advancedAPI=function(z){var we=B===k.COMPAT;return we&&W.call(this),typeof z!="function"||(z(this),we&&Q.call(this)),this},m.compatAPI=function(z){var we=B===k.ADVANCED;return we&&Q.call(this),typeof z!="function"||(z(this),we&&W.call(this)),this},m.isAdvancedAPI=function(){return B===k.ADVANCED};var fe,O=function(z){if(B!==k.ADVANCED)throw new Error(z+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},U=m.roundToPrecision=m.__private__.roundToPrecision=function(z,we){var Ye=e||we;if(isNaN(z)||isNaN(Ye))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return z.toFixed(Ye).replace(/0+$/,"")};fe=m.hpf=m.__private__.hpf=typeof l=="number"?function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.hpf");return U(z,l)}:l==="smart"?function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.hpf");return U(z,z>-1&&z<1?16:5)}:function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.hpf");return U(z,16)};var q=m.f2=m.__private__.f2=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.f2");return U(z,2)},R=m.__private__.f3=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.f3");return U(z,3)},$=m.scale=m.__private__.scale=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.scale");return B===k.COMPAT?z*rt:B===k.ADVANCED?z:void 0},X=function(z){return B===k.COMPAT?Pa()-z:B===k.ADVANCED?z:void 0},K=function(z){return $(X(z))};m.__private__.setPrecision=m.setPrecision=function(z){typeof parseInt(z,10)=="number"&&(e=parseInt(z,10))};var F,N="00000000000000000000000000000000",J=m.__private__.getFileId=function(){return N},Y=m.__private__.setFileId=function(z){return N=z!==void 0&&/^[a-fA-F0-9]{32}$/.test(z)?z.toUpperCase():N.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ps=new Jf(d.userPermissions,d.userPassword,d.ownerPassword,N)),N};m.setFileId=function(z){return Y(z),this},m.getFileId=function(){return J()};var ye=m.__private__.convertDateToPDFDate=function(z){var we=z.getTimezoneOffset(),Ye=we<0?"+":"-",ct=Math.floor(Math.abs(we/60)),Lt=Math.abs(we%60),jt=[Ye,ae(ct),"'",ae(Lt),"'"].join("");return["D:",z.getFullYear(),ae(z.getMonth()+1),ae(z.getDate()),ae(z.getHours()),ae(z.getMinutes()),ae(z.getSeconds()),jt].join("")},Ce=m.__private__.convertPDFDateToDate=function(z){var we=parseInt(z.substr(2,4),10),Ye=parseInt(z.substr(6,2),10)-1,ct=parseInt(z.substr(8,2),10),Lt=parseInt(z.substr(10,2),10),jt=parseInt(z.substr(12,2),10),un=parseInt(z.substr(14,2),10);return new Date(we,Ye,ct,Lt,jt,un,0)},He=m.__private__.setCreationDate=function(z){var we;if(z===void 0&&(z=new Date),z instanceof Date)we=ye(z);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(z))throw new Error("Invalid argument passed to jsPDF.setCreationDate");we=z}return F=we},j=m.__private__.getCreationDate=function(z){var we=F;return z==="jsDate"&&(we=Ce(F)),we};m.setCreationDate=function(z){return He(z),this},m.getCreationDate=function(z){return j(z)};var Z,ae=m.__private__.padd2=function(z){return("0"+parseInt(z)).slice(-2)},de=m.__private__.padd2Hex=function(z){return("00"+(z=z.toString())).substr(z.length)},ge=0,me=[],oe=[],re=0,Te=[],Le=[],qe=!1,se=oe,le=function(){ge=0,re=0,oe=[],me=[],Te=[],Ut=Vt(),tn=Vt()};m.__private__.setCustomOutputDestination=function(z){qe=!0,se=z};var he=function(z){qe||(se=z)};m.__private__.resetCustomOutputDestination=function(){qe=!1,se=oe};var ee=m.__private__.out=function(z){return z=z.toString(),re+=z.length+1,se.push(z),se},be=m.__private__.write=function(z){return ee(arguments.length===1?z.toString():Array.prototype.join.call(arguments," "))},je=m.__private__.getArrayBuffer=function(z){for(var we=z.length,Ye=new ArrayBuffer(we),ct=new Uint8Array(Ye);we--;)ct[we]=z.charCodeAt(we);return Ye},We=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return We};var Qe=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(z){return Qe=B===k.ADVANCED?z/rt:z,this};var Je,st=m.__private__.getFontSize=m.getFontSize=function(){return B===k.COMPAT?Qe:Qe*rt},Pt=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(z){return Pt=z,this},m.__private__.getR2L=m.getR2L=function(){return Pt};var Bt,Ht=m.__private__.setZoomMode=function(z){var we=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(z))Je=z;else if(isNaN(z)){if(we.indexOf(z)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+z+'" is not recognized.');Je=z}else Je=parseInt(z,10)};m.__private__.getZoomMode=function(){return Je};var Jt,fn=m.__private__.setPageMode=function(z){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(z)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+z+'" is not recognized.');Bt=z};m.__private__.getPageMode=function(){return Bt};var pn=m.__private__.setLayoutMode=function(z){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(z)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+z+'" is not recognized.');Jt=z};m.__private__.getLayoutMode=function(){return Jt},m.__private__.setDisplayMode=m.setDisplayMode=function(z,we,Ye){return Ht(z),pn(we),fn(Ye),this};var et={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(z){if(Object.keys(et).indexOf(z)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return et[z]},m.__private__.getDocumentProperties=function(){return et},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(z){for(var we in et)et.hasOwnProperty(we)&&z[we]&&(et[we]=z[we]);return this},m.__private__.setDocumentProperty=function(z,we){if(Object.keys(et).indexOf(z)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return et[z]=we};var ot,rt,Ft,Xt,Mn,xn={},Cn={},Vn=[],wn={},sn={},hn={},Qn={},ir=null,dr=0,Fn=[],Mr=new h5(m),ns=t.hotfixes||[],Pi={},Xs={},ds=[],Yn=function z(we,Ye,ct,Lt,jt,un){if(!(this instanceof z))return new z(we,Ye,ct,Lt,jt,un);isNaN(we)&&(we=1),isNaN(Ye)&&(Ye=0),isNaN(ct)&&(ct=0),isNaN(Lt)&&(Lt=1),isNaN(jt)&&(jt=0),isNaN(un)&&(un=0),this._matrix=[we,Ye,ct,Lt,jt,un]};Object.defineProperty(Yn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(z){this._matrix[0]=z}}),Object.defineProperty(Yn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(z){this._matrix[1]=z}}),Object.defineProperty(Yn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(z){this._matrix[2]=z}}),Object.defineProperty(Yn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(z){this._matrix[3]=z}}),Object.defineProperty(Yn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(z){this._matrix[4]=z}}),Object.defineProperty(Yn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(z){this._matrix[5]=z}}),Object.defineProperty(Yn.prototype,"a",{get:function(){return this._matrix[0]},set:function(z){this._matrix[0]=z}}),Object.defineProperty(Yn.prototype,"b",{get:function(){return this._matrix[1]},set:function(z){this._matrix[1]=z}}),Object.defineProperty(Yn.prototype,"c",{get:function(){return this._matrix[2]},set:function(z){this._matrix[2]=z}}),Object.defineProperty(Yn.prototype,"d",{get:function(){return this._matrix[3]},set:function(z){this._matrix[3]=z}}),Object.defineProperty(Yn.prototype,"e",{get:function(){return this._matrix[4]},set:function(z){this._matrix[4]=z}}),Object.defineProperty(Yn.prototype,"f",{get:function(){return this._matrix[5]},set:function(z){this._matrix[5]=z}}),Object.defineProperty(Yn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Yn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Yn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Yn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Yn.prototype.join=function(z){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(fe).join(z)},Yn.prototype.multiply=function(z){var we=z.sx*this.sx+z.shy*this.shx,Ye=z.sx*this.shy+z.shy*this.sy,ct=z.shx*this.sx+z.sy*this.shx,Lt=z.shx*this.shy+z.sy*this.sy,jt=z.tx*this.sx+z.ty*this.shx+this.tx,un=z.tx*this.shy+z.ty*this.sy+this.ty;return new Yn(we,Ye,ct,Lt,jt,un)},Yn.prototype.decompose=function(){var z=this.sx,we=this.shy,Ye=this.shx,ct=this.sy,Lt=this.tx,jt=this.ty,un=Math.sqrt(z*z+we*we),Tn=(z/=un)*Ye+(we/=un)*ct;Ye-=z*Tn,ct-=we*Tn;var Nn=Math.sqrt(Ye*Ye+ct*ct);return Tn/=Nn,z*(ct/=Nn)<we*(Ye/=Nn)&&(z=-z,we=-we,Tn=-Tn,un=-un),{scale:new Yn(un,0,0,Nn,0,0),translate:new Yn(1,0,0,1,Lt,jt),rotate:new Yn(z,we,-we,z,0,0),skew:new Yn(1,0,Tn,1,0,0)}},Yn.prototype.toString=function(z){return this.join(" ")},Yn.prototype.inversed=function(){var z=this.sx,we=this.shy,Ye=this.shx,ct=this.sy,Lt=this.tx,jt=this.ty,un=1/(z*ct-we*Ye),Tn=ct*un,Nn=-we*un,er=-Ye*un,hr=z*un;return new Yn(Tn,Nn,er,hr,-Tn*Lt-er*jt,-Nn*Lt-hr*jt)},Yn.prototype.applyToPoint=function(z){var we=z.x*this.sx+z.y*this.shx+this.tx,Ye=z.x*this.shy+z.y*this.sy+this.ty;return new xs(we,Ye)},Yn.prototype.applyToRectangle=function(z){var we=this.applyToPoint(z),Ye=this.applyToPoint(new xs(z.x+z.w,z.y+z.h));return new Zo(we.x,we.y,Ye.x-we.x,Ye.y-we.y)},Yn.prototype.clone=function(){var z=this.sx,we=this.shy,Ye=this.shx,ct=this.sy,Lt=this.tx,jt=this.ty;return new Yn(z,we,Ye,ct,Lt,jt)},m.Matrix=Yn;var mt=m.matrixMult=function(z,we){return we.multiply(z)},tt=new Yn(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=tt;var Dt=function(z,we){if(!sn[z]){var Ye=(we instanceof Zd?"Sh":"P")+(Object.keys(wn).length+1).toString(10);we.id=Ye,sn[z]=Ye,wn[Ye]=we,Mr.publish("addPattern",we)}};m.ShadingPattern=Zd,m.TilingPattern=np,m.addShadingPattern=function(z,we){return O("addShadingPattern()"),Dt(z,we),this},m.beginTilingPattern=function(z){O("beginTilingPattern()"),Xo(z.boundingBox[0],z.boundingBox[1],z.boundingBox[2]-z.boundingBox[0],z.boundingBox[3]-z.boundingBox[1],z.matrix)},m.endTilingPattern=function(z,we){O("endTilingPattern()"),we.stream=Le[Z].join(`
`),Dt(z,we),Mr.publish("endTilingPattern",we),ds.pop().restore()};var mn=m.__private__.newObject=function(){var z=Vt();return jn(z,!0),z},Vt=m.__private__.newObjectDeferred=function(){return ge++,me[ge]=function(){return re},ge},jn=function(z,we){return we=typeof we=="boolean"&&we,me[z]=re,we&&ee(z+" 0 obj"),z},vn=m.__private__.newAdditionalObject=function(){var z={objId:Vt(),content:""};return Te.push(z),z},Ut=Vt(),tn=Vt(),Ln=m.__private__.decodeColorString=function(z){var we=z.split(" ");if(we.length!==2||we[1]!=="g"&&we[1]!=="G")we.length===5&&(we[4]==="k"||we[4]==="K")&&(we=[(1-we[0])*(1-we[3]),(1-we[1])*(1-we[3]),(1-we[2])*(1-we[3]),"r"]);else{var Ye=parseFloat(we[0]);we=[Ye,Ye,Ye,"r"]}for(var ct="#",Lt=0;Lt<3;Lt++)ct+=("0"+Math.floor(255*parseFloat(we[Lt])).toString(16)).slice(-2);return ct},zn=m.__private__.encodeColorString=function(z){var we;typeof z=="string"&&(z={ch1:z});var Ye=z.ch1,ct=z.ch2,Lt=z.ch3,jt=z.ch4,un=z.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ye=="string"&&Ye.charAt(0)!=="#"){var Tn=new AE(Ye);if(Tn.ok)Ye=Tn.toHex();else if(!/^\d*\.?\d*$/.test(Ye))throw new Error('Invalid color "'+Ye+'" passed to jsPDF.encodeColorString.')}if(typeof Ye=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ye)&&(Ye="#"+Ye[1]+Ye[1]+Ye[2]+Ye[2]+Ye[3]+Ye[3]),typeof Ye=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ye)){var Nn=parseInt(Ye.substr(1),16);Ye=Nn>>16&255,ct=Nn>>8&255,Lt=255&Nn}if(ct===void 0||jt===void 0&&Ye===ct&&ct===Lt)if(typeof Ye=="string")we=Ye+" "+un[0];else switch(z.precision){case 2:we=q(Ye/255)+" "+un[0];break;case 3:default:we=R(Ye/255)+" "+un[0]}else if(jt===void 0||Vi(jt)==="object"){if(jt&&!isNaN(jt.a)&&jt.a===0)return we=["1.","1.","1.",un[1]].join(" ");if(typeof Ye=="string")we=[Ye,ct,Lt,un[1]].join(" ");else switch(z.precision){case 2:we=[q(Ye/255),q(ct/255),q(Lt/255),un[1]].join(" ");break;default:case 3:we=[R(Ye/255),R(ct/255),R(Lt/255),un[1]].join(" ")}}else if(typeof Ye=="string")we=[Ye,ct,Lt,jt,un[2]].join(" ");else switch(z.precision){case 2:we=[q(Ye),q(ct),q(Lt),q(jt),un[2]].join(" ");break;case 3:default:we=[R(Ye),R(ct),R(Lt),R(jt),un[2]].join(" ")}return we},dn=m.__private__.getFilters=function(){return o},Zt=m.__private__.putStream=function(z){var we=(z=z||{}).data||"",Ye=z.filters||dn(),ct=z.alreadyAppliedFilters||[],Lt=z.addLength1||!1,jt=we.length,un=z.objectId,Tn=function(Ki){return Ki};if(d!==null&&un===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Tn=ps.encryptor(un,0));var Nn={};Ye===!0&&(Ye=["FlateEncode"]);var er=z.additionalKeyValues||[],hr=(Nn=Cr.API.processDataByFilters!==void 0?Cr.API.processDataByFilters(we,Ye):{data:we,reverseChain:[]}).reverseChain+(Array.isArray(ct)?ct.join(" "):ct.toString());if(Nn.data.length!==0&&(er.push({key:"Length",value:Nn.data.length}),Lt===!0&&er.push({key:"Length1",value:jt})),hr.length!=0)if(hr.split("/").length-1==1)er.push({key:"Filter",value:hr});else{er.push({key:"Filter",value:"["+hr+"]"});for(var Ar=0;Ar<er.length;Ar+=1)if(er[Ar].key==="DecodeParms"){for(var Ci=[],Jr=0;Jr<Nn.reverseChain.split("/").length-1;Jr+=1)Ci.push("null");Ci.push(er[Ar].value),er[Ar].value="["+Ci.join(" ")+"]"}}ee("<<");for(var si=0;si<er.length;si++)ee("/"+er[si].key+" "+er[si].value);ee(">>"),Nn.data.length!==0&&(ee("stream"),ee(Tn(Nn.data)),ee("endstream"))},$n=m.__private__.putPage=function(z){var we=z.number,Ye=z.data,ct=z.objId,Lt=z.contentsObjId;jn(ct,!0),ee("<</Type /Page"),ee("/Parent "+z.rootDictionaryObjId+" 0 R"),ee("/Resources "+z.resourceDictionaryObjId+" 0 R"),ee("/MediaBox ["+parseFloat(fe(z.mediaBox.bottomLeftX))+" "+parseFloat(fe(z.mediaBox.bottomLeftY))+" "+fe(z.mediaBox.topRightX)+" "+fe(z.mediaBox.topRightY)+"]"),z.cropBox!==null&&ee("/CropBox ["+fe(z.cropBox.bottomLeftX)+" "+fe(z.cropBox.bottomLeftY)+" "+fe(z.cropBox.topRightX)+" "+fe(z.cropBox.topRightY)+"]"),z.bleedBox!==null&&ee("/BleedBox ["+fe(z.bleedBox.bottomLeftX)+" "+fe(z.bleedBox.bottomLeftY)+" "+fe(z.bleedBox.topRightX)+" "+fe(z.bleedBox.topRightY)+"]"),z.trimBox!==null&&ee("/TrimBox ["+fe(z.trimBox.bottomLeftX)+" "+fe(z.trimBox.bottomLeftY)+" "+fe(z.trimBox.topRightX)+" "+fe(z.trimBox.topRightY)+"]"),z.artBox!==null&&ee("/ArtBox ["+fe(z.artBox.bottomLeftX)+" "+fe(z.artBox.bottomLeftY)+" "+fe(z.artBox.topRightX)+" "+fe(z.artBox.topRightY)+"]"),typeof z.userUnit=="number"&&z.userUnit!==1&&ee("/UserUnit "+z.userUnit),Mr.publish("putPage",{objId:ct,pageContext:Fn[we],pageNumber:we,page:Ye}),ee("/Contents "+Lt+" 0 R"),ee(">>"),ee("endobj");var jt=Ye.join(`
`);return B===k.ADVANCED&&(jt+=`
Q`),jn(Lt,!0),Zt({data:jt,filters:dn(),objectId:Lt}),ee("endobj"),ct},yi=m.__private__.putPages=function(){var z,we,Ye=[];for(z=1;z<=dr;z++)Fn[z].objId=Vt(),Fn[z].contentsObjId=Vt();for(z=1;z<=dr;z++)Ye.push($n({number:z,data:Le[z],objId:Fn[z].objId,contentsObjId:Fn[z].contentsObjId,mediaBox:Fn[z].mediaBox,cropBox:Fn[z].cropBox,bleedBox:Fn[z].bleedBox,trimBox:Fn[z].trimBox,artBox:Fn[z].artBox,userUnit:Fn[z].userUnit,rootDictionaryObjId:Ut,resourceDictionaryObjId:tn}));jn(Ut,!0),ee("<</Type /Pages");var ct="/Kids [";for(we=0;we<dr;we++)ct+=Ye[we]+" 0 R ";ee(ct+"]"),ee("/Count "+dr),ee(">>"),ee("endobj"),Mr.publish("postPutPages")},or=function(z){Mr.publish("putFont",{font:z,out:ee,newObject:mn,putStream:Zt}),z.isAlreadyPutted!==!0&&(z.objectNumber=mn(),ee("<<"),ee("/Type /Font"),ee("/BaseFont /"+Qf(z.postScriptName)),ee("/Subtype /Type1"),typeof z.encoding=="string"&&ee("/Encoding /"+z.encoding),ee("/FirstChar 32"),ee("/LastChar 255"),ee(">>"),ee("endobj"))},di=function(){for(var z in xn)xn.hasOwnProperty(z)&&(p===!1||p===!0&&v.hasOwnProperty(z))&&or(xn[z])},ur=function(z){z.objectNumber=mn();var we=[];we.push({key:"Type",value:"/XObject"}),we.push({key:"Subtype",value:"/Form"}),we.push({key:"BBox",value:"["+[fe(z.x),fe(z.y),fe(z.x+z.width),fe(z.y+z.height)].join(" ")+"]"}),we.push({key:"Matrix",value:"["+z.matrix.toString()+"]"});var Ye=z.pages[1].join(`
`);Zt({data:Ye,additionalKeyValues:we,objectId:z.objectNumber}),ee("endobj")},ar=function(){for(var z in Pi)Pi.hasOwnProperty(z)&&ur(Pi[z])},Gi=function(z,we){var Ye,ct=[],Lt=1/(we-1);for(Ye=0;Ye<1;Ye+=Lt)ct.push(Ye);if(ct.push(1),z[0].offset!=0){var jt={offset:0,color:z[0].color};z.unshift(jt)}if(z[z.length-1].offset!=1){var un={offset:1,color:z[z.length-1].color};z.push(un)}for(var Tn="",Nn=0,er=0;er<ct.length;er++){for(Ye=ct[er];Ye>z[Nn+1].offset;)Nn++;var hr=z[Nn].offset,Ar=(Ye-hr)/(z[Nn+1].offset-hr),Ci=z[Nn].color,Jr=z[Nn+1].color;Tn+=de(Math.round((1-Ar)*Ci[0]+Ar*Jr[0]).toString(16))+de(Math.round((1-Ar)*Ci[1]+Ar*Jr[1]).toString(16))+de(Math.round((1-Ar)*Ci[2]+Ar*Jr[2]).toString(16))}return Tn.trim()},Ri=function(z,we){we||(we=21);var Ye=mn(),ct=Gi(z.colors,we),Lt=[];Lt.push({key:"FunctionType",value:"0"}),Lt.push({key:"Domain",value:"[0.0 1.0]"}),Lt.push({key:"Size",value:"["+we+"]"}),Lt.push({key:"BitsPerSample",value:"8"}),Lt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Lt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Zt({data:ct,additionalKeyValues:Lt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ye}),ee("endobj"),z.objectNumber=mn(),ee("<< /ShadingType "+z.type),ee("/ColorSpace /DeviceRGB");var jt="/Coords ["+fe(parseFloat(z.coords[0]))+" "+fe(parseFloat(z.coords[1]))+" ";z.type===2?jt+=fe(parseFloat(z.coords[2]))+" "+fe(parseFloat(z.coords[3])):jt+=fe(parseFloat(z.coords[2]))+" "+fe(parseFloat(z.coords[3]))+" "+fe(parseFloat(z.coords[4]))+" "+fe(parseFloat(z.coords[5])),ee(jt+="]"),z.matrix&&ee("/Matrix ["+z.matrix.toString()+"]"),ee("/Function "+Ye+" 0 R"),ee("/Extend [true true]"),ee(">>"),ee("endobj")},Fi=function(z,we){var Ye=Vt(),ct=mn();we.push({resourcesOid:Ye,objectOid:ct}),z.objectNumber=ct;var Lt=[];Lt.push({key:"Type",value:"/Pattern"}),Lt.push({key:"PatternType",value:"1"}),Lt.push({key:"PaintType",value:"1"}),Lt.push({key:"TilingType",value:"1"}),Lt.push({key:"BBox",value:"["+z.boundingBox.map(fe).join(" ")+"]"}),Lt.push({key:"XStep",value:fe(z.xStep)}),Lt.push({key:"YStep",value:fe(z.yStep)}),Lt.push({key:"Resources",value:Ye+" 0 R"}),z.matrix&&Lt.push({key:"Matrix",value:"["+z.matrix.toString()+"]"}),Zt({data:z.stream,additionalKeyValues:Lt,objectId:z.objectNumber}),ee("endobj")},rs=function(z){var we;for(we in wn)wn.hasOwnProperty(we)&&(wn[we]instanceof Zd?Ri(wn[we]):wn[we]instanceof np&&Fi(wn[we],z))},fs=function(z){for(var we in z.objectNumber=mn(),ee("<<"),z)switch(we){case"opacity":ee("/ca "+q(z[we]));break;case"stroke-opacity":ee("/CA "+q(z[we]))}ee(">>"),ee("endobj")},ws=function(){var z;for(z in hn)hn.hasOwnProperty(z)&&fs(hn[z])},Is=function(){for(var z in ee("/XObject <<"),Pi)Pi.hasOwnProperty(z)&&Pi[z].objectNumber>=0&&ee("/"+z+" "+Pi[z].objectNumber+" 0 R");Mr.publish("putXobjectDict"),ee(">>")},Os=function(){ps.oid=mn(),ee("<<"),ee("/Filter /Standard"),ee("/V "+ps.v),ee("/R "+ps.r),ee("/U <"+ps.toHexString(ps.U)+">"),ee("/O <"+ps.toHexString(ps.O)+">"),ee("/P "+ps.P),ee(">>"),ee("endobj")},cr=function(){for(var z in ee("/Font <<"),xn)xn.hasOwnProperty(z)&&(p===!1||p===!0&&v.hasOwnProperty(z))&&ee("/"+z+" "+xn[z].objectNumber+" 0 R");ee(">>")},gr=function(){if(Object.keys(wn).length>0){for(var z in ee("/Shading <<"),wn)wn.hasOwnProperty(z)&&wn[z]instanceof Zd&&wn[z].objectNumber>=0&&ee("/"+z+" "+wn[z].objectNumber+" 0 R");Mr.publish("putShadingPatternDict"),ee(">>")}},Si=function(z){if(Object.keys(wn).length>0){for(var we in ee("/Pattern <<"),wn)wn.hasOwnProperty(we)&&wn[we]instanceof m.TilingPattern&&wn[we].objectNumber>=0&&wn[we].objectNumber<z&&ee("/"+we+" "+wn[we].objectNumber+" 0 R");Mr.publish("putTilingPatternDict"),ee(">>")}},Pr=function(){if(Object.keys(hn).length>0){var z;for(z in ee("/ExtGState <<"),hn)hn.hasOwnProperty(z)&&hn[z].objectNumber>=0&&ee("/"+z+" "+hn[z].objectNumber+" 0 R");Mr.publish("putGStateDict"),ee(">>")}},mr=function(z){jn(z.resourcesOid,!0),ee("<<"),ee("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),cr(),gr(),Si(z.objectOid),Pr(),Is(),ee(">>"),ee("endobj")},Qa=function(){var z=[];di(),ws(),ar(),rs(z),Mr.publish("putResources"),z.forEach(mr),mr({resourcesOid:tn,objectOid:Number.MAX_SAFE_INTEGER}),Mr.publish("postPutResources")},Sa=function(){Mr.publish("putAdditionalObjects");for(var z=0;z<Te.length;z++){var we=Te[z];jn(we.objId,!0),ee(we.content),ee("endobj")}Mr.publish("postPutAdditionalObjects")},Go=function(z){Cn[z.fontName]=Cn[z.fontName]||{},Cn[z.fontName][z.fontStyle]=z.id},Jl=function(z,we,Ye,ct,Lt){var jt={id:"F"+(Object.keys(xn).length+1).toString(10),postScriptName:z,fontName:we,fontStyle:Ye,encoding:ct,isStandardFont:Lt||!1,metadata:{}};return Mr.publish("addFont",{font:jt,instance:this}),xn[jt.id]=jt,Go(jt),jt.id},br=function(z){for(var we=0,Ye=We.length;we<Ye;we++){var ct=Jl.call(this,z[we][0],z[we][1],z[we][2],We[we][3],!0);p===!1&&(v[ct]=!0);var Lt=z[we][0].split("-");Go({id:ct,fontName:Lt[0],fontStyle:Lt[1]||""})}Mr.publish("addFonts",{fonts:xn,dictionary:Cn})},Kr=function(z){return z.foo=function(){try{return z.apply(this,arguments)}catch(ct){var we=ct.stack||"";~we.indexOf(" at ")&&(we=we.split(" at ")[1]);var Ye="Error in function "+we.split(`
`)[0].split("<")[0]+": "+ct.message;if(!Er.console)throw new Error(Ye);Er.console.error(Ye,ct),Er.alert&&alert(Ye)}},z.foo.bar=z,z.foo},el=function(z,we){var Ye,ct,Lt,jt,un,Tn,Nn,er,hr;if(Lt=(we=we||{}).sourceEncoding||"Unicode",un=we.outputEncoding,(we.autoencode||un)&&xn[ot].metadata&&xn[ot].metadata[Lt]&&xn[ot].metadata[Lt].encoding&&(jt=xn[ot].metadata[Lt].encoding,!un&&xn[ot].encoding&&(un=xn[ot].encoding),!un&&jt.codePages&&(un=jt.codePages[0]),typeof un=="string"&&(un=jt[un]),un)){for(Nn=!1,Tn=[],Ye=0,ct=z.length;Ye<ct;Ye++)(er=un[z.charCodeAt(Ye)])?Tn.push(String.fromCharCode(er)):Tn.push(z[Ye]),Tn[Ye].charCodeAt(0)>>8&&(Nn=!0);z=Tn.join("")}for(Ye=z.length;Nn===void 0&&Ye!==0;)z.charCodeAt(Ye-1)>>8&&(Nn=!0),Ye--;if(!Nn)return z;for(Tn=we.noBOM?[]:[254,255],Ye=0,ct=z.length;Ye<ct;Ye++){if((hr=(er=z.charCodeAt(Ye))>>8)>>8)throw new Error("Character at position "+Ye+" of string '"+z+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Tn.push(hr),Tn.push(er-(hr<<8))}return String.fromCharCode.apply(void 0,Tn)},Ns=m.__private__.pdfEscape=m.pdfEscape=function(z,we){return el(z,we).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Bs=m.__private__.beginPage=function(z){Le[++dr]=[],Fn[dr]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(z[0]),topRightY:Number(z[1])}},Ca(dr),he(Le[Z])},Wu=function(z,we){var Ye,ct,Lt;switch(n=we||n,typeof z=="string"&&(Ye=D(z.toLowerCase()),Array.isArray(Ye)&&(ct=Ye[0],Lt=Ye[1])),Array.isArray(z)&&(ct=z[0]*rt,Lt=z[1]*rt),isNaN(ct)&&(ct=i[0],Lt=i[1]),(ct>14400||Lt>14400)&&(Qi.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ct=Math.min(14400,ct),Lt=Math.min(14400,Lt)),i=[ct,Lt],n.substr(0,1)){case"l":Lt>ct&&(i=[Lt,ct]);break;case"p":ct>Lt&&(i=[Lt,ct])}Bs(i),nu(Su),ee(ki),su!==0&&ee(su+" J"),ri!==0&&ee(ri+" j"),Mr.publish("addPage",{pageNumber:dr})},Ll=function(z){z>0&&z<=dr&&(Le.splice(z,1),Fn.splice(z,1),dr--,Z>dr&&(Z=dr),this.setPage(Z))},Ca=function(z){z>0&&z<=dr&&(Z=z)},ji=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Le.length-1},Wo=function(z,we,Ye){var ct,Lt=void 0;return Ye=Ye||{},z=z!==void 0?z:xn[ot].fontName,we=we!==void 0?we:xn[ot].fontStyle,ct=z.toLowerCase(),Cn[ct]!==void 0&&Cn[ct][we]!==void 0?Lt=Cn[ct][we]:Cn[z]!==void 0&&Cn[z][we]!==void 0?Lt=Cn[z][we]:Ye.disableWarning===!1&&Qi.warn("Unable to look up font label for font '"+z+"', '"+we+"'. Refer to getFontList() for available fonts."),Lt||Ye.noFallback||(Lt=Cn.times[we])==null&&(Lt=Cn.times.normal),Lt},tl=m.__private__.putInfo=function(){var z=mn(),we=function(ct){return ct};for(var Ye in d!==null&&(we=ps.encryptor(z,0)),ee("<<"),ee("/Producer ("+Ns(we("jsPDF "+Cr.version))+")"),et)et.hasOwnProperty(Ye)&&et[Ye]&&ee("/"+Ye.substr(0,1).toUpperCase()+Ye.substr(1)+" ("+Ns(we(et[Ye]))+")");ee("/CreationDate ("+Ns(we(F))+")"),ee(">>"),ee("endobj")},Ao=m.__private__.putCatalog=function(z){var we=(z=z||{}).rootDictionaryObjId||Ut;switch(mn(),ee("<<"),ee("/Type /Catalog"),ee("/Pages "+we+" 0 R"),Je||(Je="fullwidth"),Je){case"fullwidth":ee("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ee("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ee("/OpenAction [3 0 R /Fit]");break;case"original":ee("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ye=""+Je;Ye.substr(Ye.length-1)==="%"&&(Je=parseInt(Je)/100),typeof Je=="number"&&ee("/OpenAction [3 0 R /XYZ null null "+q(Je)+"]")}switch(Jt||(Jt="continuous"),Jt){case"continuous":ee("/PageLayout /OneColumn");break;case"single":ee("/PageLayout /SinglePage");break;case"two":case"twoleft":ee("/PageLayout /TwoColumnLeft");break;case"tworight":ee("/PageLayout /TwoColumnRight")}Bt&&ee("/PageMode /"+Bt),Mr.publish("putCatalog"),ee(">>"),ee("endobj")},xu=m.__private__.putTrailer=function(){ee("trailer"),ee("<<"),ee("/Size "+(ge+1)),ee("/Root "+ge+" 0 R"),ee("/Info "+(ge-1)+" 0 R"),d!==null&&ee("/Encrypt "+ps.oid+" 0 R"),ee("/ID [ <"+N+"> <"+N+"> ]"),ee(">>")},nl=m.__private__.putHeader=function(){ee("%PDF-"+x),ee("%ºß¬à")},qu=m.__private__.putXRef=function(){var z="0000000000";ee("xref"),ee("0 "+(ge+1)),ee("0000000000 65535 f ");for(var we=1;we<=ge;we++)typeof me[we]=="function"?ee((z+me[we]()).slice(-10)+" 00000 n "):me[we]!==void 0?ee((z+me[we]).slice(-10)+" 00000 n "):ee("0000000000 00000 n ")},qo=m.__private__.buildDocument=function(){le(),he(oe),Mr.publish("buildDocument"),nl(),yi(),Sa(),Qa(),d!==null&&Os(),tl(),Ao();var z=re;return qu(),xu(),ee("startxref"),ee(""+z),ee("%%EOF"),he(Le[Z]),oe.join(`
`)},Ea=m.__private__.getBlob=function(z){return new Blob([je(z)],{type:"application/pdf"})},rl=m.output=m.__private__.output=Kr(function(z,we){switch(typeof(we=we||{})=="string"?we={filename:we}:we.filename=we.filename||"generated.pdf",z){case void 0:return qo();case"save":m.save(we.filename);break;case"arraybuffer":return je(qo());case"blob":return Ea(qo());case"bloburi":case"bloburl":if(Er.URL!==void 0&&typeof Er.URL.createObjectURL=="function")return Er.URL&&Er.URL.createObjectURL(Ea(qo()))||void 0;Qi.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ye="",ct=qo();try{Ye=pb(ct)}catch{Ye=pb(unescape(encodeURIComponent(ct)))}return"data:application/pdf;filename="+we.filename+";base64,"+Ye;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Er)==="[object Window]"){var Lt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",jt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';we.pdfObjectUrl&&(Lt=we.pdfObjectUrl,jt="");var un='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Lt+'"'+jt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(we)+");<\/script></body></html>",Tn=Er.open();return Tn!==null&&Tn.document.write(un),Tn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Er)==="[object Window]"){var Nn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(we.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+we.filename+'" width="500px" height="400px" /></body></html>',er=Er.open();if(er!==null){er.document.write(Nn);var hr=this;er.document.documentElement.querySelector("#pdfViewer").onload=function(){er.document.title=we.filename,er.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(hr.output("bloburl"))}}return er}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Er)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ar='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",we)+'"></iframe></body></html>',Ci=Er.open();if(Ci!==null&&(Ci.document.write(Ar),Ci.document.title=we.filename),Ci||typeof safari>"u")return Ci;break;case"datauri":case"dataurl":return Er.document.location.href=this.output("datauristring",we);default:return null}}),Ql=function(z){return Array.isArray(ns)===!0&&ns.indexOf(z)>-1};switch(r){case"pt":rt=1;break;case"mm":rt=72/25.4;break;case"cm":rt=72/2.54;break;case"in":rt=72;break;case"px":rt=Ql("px_scaling")==1?.75:96/72;break;case"pc":case"em":rt=12;break;case"ex":rt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);rt=r}var ps=null;He(),Y();var Lc=function(z){return d!==null?ps.encryptor(z,0):function(we){return we}},Lu=m.__private__.getPageInfo=m.getPageInfo=function(z){if(isNaN(z)||z%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Fn[z].objId,pageNumber:z,pageContext:Fn[z]}},fr=m.__private__.getPageInfoByObjId=function(z){if(isNaN(z)||z%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var we in Fn)if(Fn[we].objId===z)break;return Lu(we)},_r=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Fn[Z].objId,pageNumber:Z,pageContext:Fn[Z]}};m.addPage=function(){return Wu.apply(this,arguments),this},m.setPage=function(){return Ca.apply(this,arguments),he.call(this,Le[Z]),this},m.insertPage=function(z){return this.addPage(),this.movePage(Z,z),this},m.movePage=function(z,we){var Ye,ct;if(z>we){Ye=Le[z],ct=Fn[z];for(var Lt=z;Lt>we;Lt--)Le[Lt]=Le[Lt-1],Fn[Lt]=Fn[Lt-1];Le[we]=Ye,Fn[we]=ct,this.setPage(we)}else if(z<we){Ye=Le[z],ct=Fn[z];for(var jt=z;jt<we;jt++)Le[jt]=Le[jt+1],Fn[jt]=Fn[jt+1];Le[we]=Ye,Fn[we]=ct,this.setPage(we)}return this},m.deletePage=function(){return Ll.apply(this,arguments),this},m.__private__.text=m.text=function(z,we,Ye,ct,Lt){var jt,un,Tn,Nn,er,hr,Ar,Ci,Jr,si=(ct=ct||{}).scope||this;if(typeof z=="number"&&typeof we=="number"&&(typeof Ye=="string"||Array.isArray(Ye))){var Ki=Ye;Ye=we,we=z,z=Ki}if(arguments[3]instanceof Yn?(O("The transform parameter of text() with a Matrix value"),Jr=Lt):(Tn=arguments[4],Nn=arguments[5],Vi(Ar=arguments[3])==="object"&&Ar!==null||(typeof Tn=="string"&&(Nn=Tn,Tn=null),typeof Ar=="string"&&(Nn=Ar,Ar=null),typeof Ar=="number"&&(Tn=Ar,Ar=null),ct={flags:Ar,angle:Tn,align:Nn})),isNaN(we)||isNaN(Ye)||z==null)throw new Error("Invalid arguments passed to jsPDF.text");if(z.length===0)return si;var is="",Do=!1,Tr=typeof ct.lineHeightFactor=="number"?ct.lineHeightFactor:tu,Rs=si.internal.scaleFactor;function Al(ai){return ai=ai.split("	").join(Array(ct.TabLen||9).join(" ")),Ns(ai,Ar)}function Js(ai){for(var fi,Zi=ai.concat(),_i=[],No=Zi.length;No--;)typeof(fi=Zi.shift())=="string"?_i.push(fi):Array.isArray(ai)&&(fi.length===1||fi[1]===void 0&&fi[2]===void 0)?_i.push(fi[0]):_i.push([fi[0],fi[1],fi[2]]);return _i}function Mu(ai,fi){var Zi;if(typeof ai=="string")Zi=fi(ai)[0];else if(Array.isArray(ai)){for(var _i,No,go=ai.concat(),jo=[],Xu=go.length;Xu--;)typeof(_i=go.shift())=="string"?jo.push(fi(_i)[0]):Array.isArray(_i)&&typeof _i[0]=="string"&&(No=fi(_i[0],_i[1],_i[2]),jo.push([No[0],No[1],No[2]]));Zi=jo}return Zi}var ua=!1,Zu=!0;if(typeof z=="string")ua=!0;else if(Array.isArray(z)){var ol=z.concat();un=[];for(var al,ss=ol.length;ss--;)(typeof(al=ol.shift())!="string"||Array.isArray(al)&&typeof al[0]!="string")&&(Zu=!1);ua=Zu}if(ua===!1)throw new Error('Type of text must be string or Array. "'+z+'" is not recognized.');typeof z=="string"&&(z=z.match(/[\r?\n]/)?z.split(/\r\n|\r|\n/g):[z]);var ca=Qe/si.internal.scaleFactor,Io=ca*(Tr-1);switch(ct.baseline){case"bottom":Ye-=Io;break;case"top":Ye+=ca-Io;break;case"hanging":Ye+=ca-2*Io;break;case"middle":Ye+=ca/2-Io}if((hr=ct.maxWidth||0)>0&&(typeof z=="string"?z=si.splitTextToSize(z,hr):Object.prototype.toString.call(z)==="[object Array]"&&(z=z.reduce(function(ai,fi){return ai.concat(si.splitTextToSize(fi,hr))},[]))),jt={text:z,x:we,y:Ye,options:ct,mutex:{pdfEscape:Ns,activeFontKey:ot,fonts:xn,activeFontSize:Qe}},Mr.publish("preProcessText",jt),z=jt.text,Tn=(ct=jt.options).angle,!(Jr instanceof Yn)&&Tn&&typeof Tn=="number"){Tn*=Math.PI/180,ct.rotationDirection===0&&(Tn=-Tn),B===k.ADVANCED&&(Tn=-Tn);var po=Math.cos(Tn),Tl=Math.sin(Tn);Jr=new Yn(po,Tl,-Tl,po,0,0)}else Tn&&Tn instanceof Yn&&(Jr=Tn);B!==k.ADVANCED||Jr||(Jr=tt),(er=ct.charSpace||iu)!==void 0&&(is+=fe($(er))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ci=ct.horizontalScale)!==void 0&&(is+=fe(100*Ci)+` Tz
`),ct.lang;var Fs=-1,Qs=ct.renderingMode!==void 0?ct.renderingMode:ct.stroke,eo=si.internal.getCurrentPageInfo().pageContext;switch(Qs){case 0:case!1:case"fill":Fs=0;break;case 1:case!0:case"stroke":Fs=1;break;case 2:case"fillThenStroke":Fs=2;break;case 3:case"invisible":Fs=3;break;case 4:case"fillAndAddForClipping":Fs=4;break;case 5:case"strokeAndAddPathForClipping":Fs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Fs=6;break;case 7:case"addToPathForClipping":Fs=7}var Ec=eo.usedRenderingMode!==void 0?eo.usedRenderingMode:-1;Fs!==-1?is+=Fs+` Tr
`:Ec!==-1&&(is+=`0 Tr
`),Fs!==-1&&(eo.usedRenderingMode=Fs),Nn=ct.align||"left";var gs,ka=Qe*Tr,js=si.internal.pageSize.getWidth(),zs=xn[ot];er=ct.charSpace||iu,hr=ct.maxWidth||0,Ar=Object.assign({autoencode:!0,noBOM:!0},ct.flags);var Aa=[],Ta=function(ai){return si.getStringUnitWidth(ai,{font:zs,charSpace:er,fontSize:Qe,doKerning:!1})*Qe/Rs};if(Object.prototype.toString.call(z)==="[object Array]"){var $s;un=Js(z),Nn!=="left"&&(gs=un.map(Ta));var Ls,ha=0;if(Nn==="right"){we-=gs[0],z=[],ss=un.length;for(var Oo=0;Oo<ss;Oo++)Oo===0?(Ls=nr(we),$s=qi(Ye)):(Ls=$(ha-gs[Oo]),$s=-ka),z.push([un[Oo],Ls,$s]),ha=gs[Oo]}else if(Nn==="center"){we-=gs[0]/2,z=[],ss=un.length;for(var Us=0;Us<ss;Us++)Us===0?(Ls=nr(we),$s=qi(Ye)):(Ls=$((ha-gs[Us])/2),$s=-ka),z.push([un[Us],Ls,$s]),ha=gs[Us]}else if(Nn==="left"){z=[],ss=un.length;for(var bt=0;bt<ss;bt++)z.push(un[bt])}else if(Nn==="justify"&&zs.encoding==="Identity-H"){z=[],ss=un.length,hr=hr!==0?hr:js;for(var Gt=0,kt=0;kt<ss;kt++)if($s=kt===0?qi(Ye):-ka,Ls=kt===0?nr(we):Gt,kt<ss-1){var kn=$((hr-gs[kt])/(un[kt].split(" ").length-1)),Hn=un[kt].split(" ");z.push([Hn[0]+" ",Ls,$s]),Gt=0;for(var pr=1;pr<Hn.length;pr++){var Ai=(Ta(Hn[pr-1]+" "+Hn[pr])-Ta(Hn[pr]))*Rs+kn;pr==Hn.length-1?z.push([Hn[pr],Ai,0]):z.push([Hn[pr]+" ",Ai,0]),Gt-=Ai}}else z.push([un[kt],Ls,$s]);z.push(["",Gt,0])}else{if(Nn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(z=[],ss=un.length,hr=hr!==0?hr:js,kt=0;kt<ss;kt++)$s=kt===0?qi(Ye):-ka,Ls=kt===0?nr(we):0,kt<ss-1?Aa.push(fe($((hr-gs[kt])/(un[kt].split(" ").length-1)))):Aa.push(0),z.push([un[kt],Ls,$s])}}var oi=typeof ct.R2L=="boolean"?ct.R2L:Pt;oi===!0&&(z=Mu(z,function(ai,fi,Zi){return[ai.split("").reverse().join(""),fi,Zi]})),jt={text:z,x:we,y:Ye,options:ct,mutex:{pdfEscape:Ns,activeFontKey:ot,fonts:xn,activeFontSize:Qe}},Mr.publish("postProcessText",jt),z=jt.text,Do=jt.mutex.isHex||!1;var au=xn[ot].encoding;au!=="WinAnsiEncoding"&&au!=="StandardEncoding"||(z=Mu(z,function(ai,fi,Zi){return[Al(ai),fi,Zi]})),un=Js(z),z=[];for(var to,Ti,da,Da=0,fa=1,pa=Array.isArray(un[0])?fa:Da,ga="",jr=function(ai,fi,Zi){var _i="";return Zi instanceof Yn?(Zi=typeof ct.angle=="number"?mt(Zi,new Yn(1,0,0,1,ai,fi)):mt(new Yn(1,0,0,1,ai,fi),Zi),B===k.ADVANCED&&(Zi=mt(new Yn(1,0,0,-1,0,0),Zi)),_i=Zi.join(" ")+` Tm
`):_i=fe(ai)+" "+fe(fi)+` Td
`,_i},Jo=0;Jo<un.length;Jo++){switch(ga="",pa){case fa:da=(Do?"<":"(")+un[Jo][0]+(Do?">":")"),to=parseFloat(un[Jo][1]),Ti=parseFloat(un[Jo][2]);break;case Da:da=(Do?"<":"(")+un[Jo]+(Do?">":")"),to=nr(we),Ti=qi(Ye)}Aa!==void 0&&Aa[Jo]!==void 0&&(ga=Aa[Jo]+` Tw
`),Jo===0?z.push(ga+jr(to,Ti,Jr)+da):pa===Da?z.push(ga+da):pa===fa&&z.push(ga+jr(to,Ti,Jr)+da)}z=pa===Da?z.join(` Tj
T* `):z.join(` Tj
`),z+=` Tj
`;var Ss=`BT
/`;return Ss+=ot+" "+Qe+` Tf
`,Ss+=fe(Qe*Tr)+` TL
`,Ss+=la+`
`,Ss+=is,Ss+=z,ee(Ss+="ET"),v[ot]=!0,si};var Yo=m.__private__.clip=m.clip=function(z){return ee(z==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Yo("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ee("n"),this};var Wr=m.__private__.isValidStyle=function(z){var we=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(z)!==-1&&(we=!0),we};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(z){return Wr(z)&&(c=z),this};var Yu=m.__private__.getStyle=m.getStyle=function(z){var we=c;switch(z){case"D":case"S":we="S";break;case"F":we="f";break;case"FD":case"DF":we="B";break;case"f":case"f*":case"B":case"B*":we=z}return we},Sl=m.close=function(){return ee("h"),this};m.stroke=function(){return ee("S"),this},m.fill=function(z){return Cl("f",z),this},m.fillEvenOdd=function(z){return Cl("f*",z),this},m.fillStroke=function(z){return Cl("B",z),this},m.fillStrokeEvenOdd=function(z){return Cl("B*",z),this};var Cl=function(z,we){Vi(we)==="object"?Ku(we,z):ee(z)},Ko=function(z){z===null||B===k.ADVANCED&&z===void 0||(z=Yu(z),ee(z))};function il(z,we,Ye,ct,Lt){var jt=new np(we||this.boundingBox,Ye||this.xStep,ct||this.yStep,this.gState,Lt||this.matrix);jt.stream=this.stream;var un=z+"$$"+this.cloneIndex+++"$$";return Dt(un,jt),jt}var Ku=function(z,we){var Ye=sn[z.key],ct=wn[Ye];if(ct instanceof Zd)ee("q"),ee(eu(we)),ct.gState&&m.setGState(ct.gState),ee(z.matrix.toString()+" cm"),ee("/"+Ye+" sh"),ee("Q");else if(ct instanceof np){var Lt=new Yn(1,0,0,-1,0,Pa());z.matrix&&(Lt=Lt.multiply(z.matrix||tt),Ye=il.call(ct,z.key,z.boundingBox,z.xStep,z.yStep,Lt).id),ee("q"),ee("/Pattern cs"),ee("/"+Ye+" scn"),ct.gState&&m.setGState(ct.gState),ee(we),ee("Q")}},eu=function(z){switch(z){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},vr=m.moveTo=function(z,we){return ee(fe($(z))+" "+fe(K(we))+" m"),this},Or=m.lineTo=function(z,we){return ee(fe($(z))+" "+fe(K(we))+" l"),this},sl=m.curveTo=function(z,we,Ye,ct,Lt,jt){return ee([fe($(z)),fe(K(we)),fe($(Ye)),fe(K(ct)),fe($(Lt)),fe(K(jt)),"c"].join(" ")),this};m.__private__.line=m.line=function(z,we,Ye,ct,Lt){if(isNaN(z)||isNaN(we)||isNaN(Ye)||isNaN(ct)||!Wr(Lt))throw new Error("Invalid arguments passed to jsPDF.line");return B===k.COMPAT?this.lines([[Ye-z,ct-we]],z,we,[1,1],Lt||"S"):this.lines([[Ye-z,ct-we]],z,we,[1,1]).stroke()},m.__private__.lines=m.lines=function(z,we,Ye,ct,Lt,jt){var un,Tn,Nn,er,hr,Ar,Ci,Jr,si,Ki,is,Do;if(typeof z=="number"&&(Do=Ye,Ye=we,we=z,z=Do),ct=ct||[1,1],jt=jt||!1,isNaN(we)||isNaN(Ye)||!Array.isArray(z)||!Array.isArray(ct)||!Wr(Lt)||typeof jt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(vr(we,Ye),un=ct[0],Tn=ct[1],er=z.length,Ki=we,is=Ye,Nn=0;Nn<er;Nn++)(hr=z[Nn]).length===2?(Ki=hr[0]*un+Ki,is=hr[1]*Tn+is,Or(Ki,is)):(Ar=hr[0]*un+Ki,Ci=hr[1]*Tn+is,Jr=hr[2]*un+Ki,si=hr[3]*Tn+is,Ki=hr[4]*un+Ki,is=hr[5]*Tn+is,sl(Ar,Ci,Jr,si,Ki,is));return jt&&Sl(),Ko(Lt),this},m.path=function(z){for(var we=0;we<z.length;we++){var Ye=z[we],ct=Ye.c;switch(Ye.op){case"m":vr(ct[0],ct[1]);break;case"l":Or(ct[0],ct[1]);break;case"c":sl.apply(this,ct);break;case"h":Sl()}}return this},m.__private__.rect=m.rect=function(z,we,Ye,ct,Lt){if(isNaN(z)||isNaN(we)||isNaN(Ye)||isNaN(ct)||!Wr(Lt))throw new Error("Invalid arguments passed to jsPDF.rect");return B===k.COMPAT&&(ct=-ct),ee([fe($(z)),fe(K(we)),fe($(Ye)),fe($(ct)),"re"].join(" ")),Ko(Lt),this},m.__private__.triangle=m.triangle=function(z,we,Ye,ct,Lt,jt,un){if(isNaN(z)||isNaN(we)||isNaN(Ye)||isNaN(ct)||isNaN(Lt)||isNaN(jt)||!Wr(un))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ye-z,ct-we],[Lt-Ye,jt-ct],[z-Lt,we-jt]],z,we,[1,1],un,!0),this},m.__private__.roundedRect=m.roundedRect=function(z,we,Ye,ct,Lt,jt,un){if(isNaN(z)||isNaN(we)||isNaN(Ye)||isNaN(ct)||isNaN(Lt)||isNaN(jt)||!Wr(un))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Tn=4/3*(Math.SQRT2-1);return Lt=Math.min(Lt,.5*Ye),jt=Math.min(jt,.5*ct),this.lines([[Ye-2*Lt,0],[Lt*Tn,0,Lt,jt-jt*Tn,Lt,jt],[0,ct-2*jt],[0,jt*Tn,-Lt*Tn,jt,-Lt,jt],[2*Lt-Ye,0],[-Lt*Tn,0,-Lt,-jt*Tn,-Lt,-jt],[0,2*jt-ct],[0,-jt*Tn,Lt*Tn,-jt,Lt,-jt]],z+Lt,we,[1,1],un,!0),this},m.__private__.ellipse=m.ellipse=function(z,we,Ye,ct,Lt){if(isNaN(z)||isNaN(we)||isNaN(Ye)||isNaN(ct)||!Wr(Lt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var jt=4/3*(Math.SQRT2-1)*Ye,un=4/3*(Math.SQRT2-1)*ct;return vr(z+Ye,we),sl(z+Ye,we-un,z+jt,we-ct,z,we-ct),sl(z-jt,we-ct,z-Ye,we-un,z-Ye,we),sl(z-Ye,we+un,z-jt,we+ct,z,we+ct),sl(z+jt,we+ct,z+Ye,we+un,z+Ye,we),Ko(Lt),this},m.__private__.circle=m.circle=function(z,we,Ye,ct){if(isNaN(z)||isNaN(we)||isNaN(Ye)||!Wr(ct))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(z,we,Ye,Ye,ct)},m.setFont=function(z,we,Ye){return Ye&&(we=pe(we,Ye)),ot=Wo(z,we,{disableWarning:!1}),this};var Sc=m.__private__.getFont=m.getFont=function(){return xn[Wo.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var z,we,Ye={};for(z in Cn)if(Cn.hasOwnProperty(z))for(we in Ye[z]=[],Cn[z])Cn[z].hasOwnProperty(we)&&Ye[z].push(we);return Ye},m.addFont=function(z,we,Ye,ct,Lt){var jt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&jt.indexOf(arguments[3])!==-1?Lt=arguments[3]:arguments[3]&&jt.indexOf(arguments[3])==-1&&(Ye=pe(Ye,ct)),Lt=Lt||"Identity-H",Jl.call(this,z,we,Ye,Lt)};var tu,Su=t.lineWidth||.200025,El=m.__private__.getLineWidth=m.getLineWidth=function(){return Su},nu=m.__private__.setLineWidth=m.setLineWidth=function(z){return Su=z,ee(fe($(z))+" w"),this};m.__private__.setLineDash=Cr.API.setLineDash=Cr.API.setLineDashPattern=function(z,we){if(z=z||[],we=we||0,isNaN(we)||!Array.isArray(z))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return z=z.map(function(Ye){return fe($(Ye))}).join(" "),we=fe($(we)),ee("["+z+"] "+we+" d"),this};var Cu=m.__private__.getLineHeight=m.getLineHeight=function(){return Qe*tu};m.__private__.getLineHeight=m.getLineHeight=function(){return Qe*tu};var Fr=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(z){return typeof(z=z||1.15)=="number"&&(tu=z),this},Wi=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return tu};Fr(t.lineHeight);var nr=m.__private__.getHorizontalCoordinate=function(z){return $(z)},qi=m.__private__.getVerticalCoordinate=function(z){return B===k.ADVANCED?z:Fn[Z].mediaBox.topRightY-Fn[Z].mediaBox.bottomLeftY-$(z)},Ml=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(z){return fe(nr(z))},Ma=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(z){return fe(qi(z))},ki=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Ln(ki)},m.__private__.setStrokeColor=m.setDrawColor=function(z,we,Ye,ct){return ki=zn({ch1:z,ch2:we,ch3:Ye,ch4:ct,pdfColorType:"draw",precision:2}),ee(ki),this};var Eu=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Ln(Eu)},m.__private__.setFillColor=m.setFillColor=function(z,we,Ye,ct){return Eu=zn({ch1:z,ch2:we,ch3:Ye,ch4:ct,pdfColorType:"fill",precision:2}),ee(Eu),this};var la=t.textColor||"0 g",ru=m.__private__.getTextColor=m.getTextColor=function(){return Ln(la)};m.__private__.setTextColor=m.setTextColor=function(z,we,Ye,ct){return la=zn({ch1:z,ch2:we,ch3:Ye,ch4:ct,pdfColorType:"text",precision:3}),this};var iu=t.charSpace,Fo=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(iu||0)};m.__private__.setCharSpace=m.setCharSpace=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return iu=z,this};var su=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(z){var we=m.CapJoinStyles[z];if(we===void 0)throw new Error("Line cap style of '"+z+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return su=we,ee(we+" J"),this};var ri=0;m.__private__.setLineJoin=m.setLineJoin=function(z){var we=m.CapJoinStyles[z];if(we===void 0)throw new Error("Line join style of '"+z+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ri=we,ee(we+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(z){if(z=z||0,isNaN(z))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ee(fe($(z))+" M"),this},m.GState=Fv,m.setGState=function(z){(z=typeof z=="string"?hn[Qn[z]]:Cc(null,z)).equals(ir)||(ee("/"+z.id+" gs"),ir=z)};var Cc=function(z,we){if(!z||!Qn[z]){var Ye=!1;for(var ct in hn)if(hn.hasOwnProperty(ct)&&hn[ct].equals(we)){Ye=!0;break}if(Ye)we=hn[ct];else{var Lt="GS"+(Object.keys(hn).length+1).toString(10);hn[Lt]=we,we.id=Lt}return z&&(Qn[z]=we.id),Mr.publish("addGState",we),we}};m.addGState=function(z,we){return Cc(z,we),this},m.saveGraphicsState=function(){return ee("q"),Vn.push({key:ot,size:Qe,color:la}),this},m.restoreGraphicsState=function(){ee("Q");var z=Vn.pop();return ot=z.key,Qe=z.size,la=z.color,ir=null,this},m.setCurrentTransformationMatrix=function(z){return ee(z.toString()+" cm"),this},m.comment=function(z){return ee("#"+z),this};var xs=function(z,we){var Ye=z||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ye},set:function(jt){isNaN(jt)||(Ye=parseFloat(jt))}});var ct=we||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ct},set:function(jt){isNaN(jt)||(ct=parseFloat(jt))}});var Lt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Lt},set:function(jt){Lt=jt.toString()}}),this},Zo=function(z,we,Ye,ct){xs.call(this,z,we),this.type="rect";var Lt=Ye||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Lt},set:function(un){isNaN(un)||(Lt=parseFloat(un))}});var jt=ct||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return jt},set:function(un){isNaN(un)||(jt=parseFloat(un))}}),this},ou=function(){this.page=dr,this.currentPage=Z,this.pages=Le.slice(0),this.pagesContext=Fn.slice(0),this.x=Ft,this.y=Xt,this.matrix=Mn,this.width=ii(Z),this.height=Pa(Z),this.outputDestination=se,this.id="",this.objectNumber=-1};ou.prototype.restore=function(){dr=this.page,Z=this.currentPage,Fn=this.pagesContext,Le=this.pages,Ft=this.x,Xt=this.y,Mn=this.matrix,To(Z,this.width),Yi(Z,this.height),se=this.outputDestination};var Xo=function(z,we,Ye,ct,Lt){ds.push(new ou),dr=Z=0,Le=[],Ft=z,Xt=we,Mn=Lt,Bs([Ye,ct])},Pl=function(z){if(Xs[z])ds.pop().restore();else{var we=new ou,Ye="Xo"+(Object.keys(Pi).length+1).toString(10);we.id=Ye,Xs[z]=Ye,Pi[Ye]=we,Mr.publish("addFormObject",we),ds.pop().restore()}};for(var kl in m.beginFormObject=function(z,we,Ye,ct,Lt){return Xo(z,we,Ye,ct,Lt),this},m.endFormObject=function(z){return Pl(z),this},m.doFormObject=function(z,we){var Ye=Pi[Xs[z]];return ee("q"),ee(we.toString()+" cm"),ee("/"+Ye.id+" Do"),ee("Q"),this},m.getFormObject=function(z){var we=Pi[Xs[z]];return{x:we.x,y:we.y,width:we.width,height:we.height,matrix:we.matrix}},m.save=function(z,we){return z=z||"generated.pdf",(we=we||{}).returnPromise=we.returnPromise||!1,we.returnPromise===!1?(Gd(Ea(qo()),z),typeof Gd.unload=="function"&&Er.setTimeout&&setTimeout(Gd.unload,911),this):new Promise(function(Ye,ct){try{var Lt=Gd(Ea(qo()),z);typeof Gd.unload=="function"&&Er.setTimeout&&setTimeout(Gd.unload,911),Ye(Lt)}catch(jt){ct(jt.message)}})},Cr.API)Cr.API.hasOwnProperty(kl)&&(kl==="events"&&Cr.API.events.length?function(z,we){var Ye,ct,Lt;for(Lt=we.length-1;Lt!==-1;Lt--)Ye=we[Lt][0],ct=we[Lt][1],z.subscribe.apply(z,[Ye].concat(typeof ct=="function"?[ct]:ct))}(Mr,Cr.API.events):m[kl]=Cr.API[kl]);var ii=m.getPageWidth=function(z){return(Fn[z=z||Z].mediaBox.topRightX-Fn[z].mediaBox.bottomLeftX)/rt},To=m.setPageWidth=function(z,we){Fn[z].mediaBox.topRightX=we*rt+Fn[z].mediaBox.bottomLeftX},Pa=m.getPageHeight=function(z){return(Fn[z=z||Z].mediaBox.topRightY-Fn[z].mediaBox.bottomLeftY)/rt},Yi=m.setPageHeight=function(z,we){Fn[z].mediaBox.topRightY=we*rt+Fn[z].mediaBox.bottomLeftY};return m.internal={pdfEscape:Ns,getStyle:Yu,getFont:Sc,getFontSize:st,getCharSpace:Fo,getTextColor:ru,getLineHeight:Cu,getLineHeightFactor:Wi,getLineWidth:El,write:be,getHorizontalCoordinate:nr,getVerticalCoordinate:qi,getCoordinateString:Ml,getVerticalCoordinateString:Ma,collections:{},newObject:mn,newAdditionalObject:vn,newObjectDeferred:Vt,newObjectDeferredBegin:jn,getFilters:dn,putStream:Zt,events:Mr,scaleFactor:rt,pageSize:{getWidth:function(){return ii(Z)},setWidth:function(z){To(Z,z)},getHeight:function(){return Pa(Z)},setHeight:function(z){Yi(Z,z)}},encryptionOptions:d,encryption:ps,getEncryptor:Lc,output:rl,getNumberOfPages:ji,pages:Le,out:ee,f2:q,f3:R,getPageInfo:Lu,getPageInfoByObjId:fr,getCurrentPageInfo:_r,getPDFVersion:E,Point:xs,Rectangle:Zo,Matrix:Yn,hasHotfix:Ql},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return ii(Z)},set:function(z){To(Z,z)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Pa(Z)},set:function(z){Yi(Z,z)},enumerable:!0,configurable:!0}),br.call(m,We),ot="F1",Wu(i,n),Mr.publish("initialized"),m}Jf.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Jf.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Jf.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Jf.prototype.processOwnerPassword=function(t,e){return mb(gb(e).substr(0,5),t)},Jf.prototype.encryptor=function(t,e){var n=gb(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return mb(n,r)}},Fv.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Vi(t)!==Vi(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},Cr.API={events:[]},Cr.version="2.5.2";var oo=Cr.API,D_=1,mf=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},zf=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Br=function(t){return t.toFixed(2)},Yh=function(t){return t.toFixed(5)};oo.__acroform__={};var Xl=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},d5=function(t){return t*D_},Oc=function(t){var e=new OE,n=Gn.internal.getHeight(t)||0,r=Gn.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Br(r)),Number(Br(n))],e},aV=oo.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},lV=oo.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},uV=oo.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Lo=oo.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return uV(t,e-1)},So=oo.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return aV(t,e-1)},Co=oo.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return lV(t,e-1)},cV=oo.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(Br(l.lowerLeft_X)),Number(Br(l.lowerLeft_Y)),Number(Br(l.upperRight_X)),Number(Br(l.upperRight_Y))]},hV=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=vb(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Br(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Oc(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},vb=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(R){return R.split(`
`)}):i.map(function(R){return[R]});var s=n,o=Gn.internal.getHeight(t)||0;o=o<0?-o:o;var a=Gn.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(R,$,X){if(R+1<i.length){var K=$+" "+i[R+1][0];return g0(K,t,X).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,d,p=g0("3",t,s).height,v=t.multiline?o-s:(o-p)/2,m=v+=2,x=0,E=0,T=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+g0(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var D="",k=0,B=0;B<i.length;B++)if(i.hasOwnProperty(B)){var W=!1;if(i[B].length!==1&&T!==i[B].length-1){if((p+2)*(k+2)+2>o)continue e;D+=i[B][T],W=!0,E=B,B--}else{D=(D+=i[B][T]+" ").substr(D.length-1)==" "?D.substr(0,D.length-1):D;var Q=parseInt(B),pe=l(Q,D,s),fe=B>=i.length-1;if(pe&&!fe){D+=" ",T=0;continue}if(pe||fe){if(fe)E=Q;else if(t.multiline&&(p+2)*(k+2)+2>o)continue e}else{if(!t.multiline||(p+2)*(k+2)+2>o)continue e;E=Q}}for(var O="",U=x;U<=E;U++){var q=i[U];if(t.multiline){if(U===E){O+=q[T]+" ",T=(T+1)%q.length;continue}if(U===x){O+=q[q.length-1]+" ";continue}}O+=q[0]+" "}switch(O=O.substr(O.length-1)==" "?O.substr(0,O.length-1):O,d=g0(O,t,s).width,t.textAlign){case"right":c=a-d-2;break;case"center":c=(a-d)/2;break;case"left":default:c=2}e+=Br(c)+" "+Br(m)+` Td
`,e+="("+mf(O)+`) Tj
`,e+=-Br(c)+` 0 Td
`,m=-(s+2),d=0,x=W?E:E+1,k++,D=""}break}return r.text=e,r.fontSize=s,r},g0=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},dV={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},fV=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},pV=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Vi(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},gV=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(wc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(dV)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D_=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new NE,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&fV(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=cV(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Gn.createDefaultAppearanceStream(a),Vi(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var d=hV(a);l.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(a.appearanceStreamContent){var p="";for(var v in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(v)){var m=a.appearanceStreamContent[v];if(p+="/"+v+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var x=m[o];typeof x=="function"&&(x=x.call(i,a)),p+="/"+o+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=m)=="function"&&(x=x.call(i,a)),p+="/"+o+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&pV(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},IE=oo.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Vi(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+mf(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},K1=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+mf(r(t))+")"},Gc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Gc.prototype.toString=function(){return this.objId+" 0 R"},Gc.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Gc.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:IE(i,this.objId,this.scope)}):i instanceof Gc?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var OE=function(){Gc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Xl(OE,Gc);var NE=function(){Gc.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+mf(n(t))+")"}},set:function(n){t=n}})};Xl(NE,Gc);var wc=function t(){Gc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(D){if(isNaN(D))throw new Error('Invalid value "'+D+'" for attribute F supplied.');e=D}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Lo(e,3)},set:function(D){D?this.F=So(e,3):this.F=Co(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(D){if(isNaN(D))throw new Error('Invalid value "'+D+'" for attribute Ff supplied.');n=D}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(D){r=D!==void 0?D:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(D){r[0]=D}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(D){r[1]=D}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(D){r[2]=D}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(D){r[3]=D}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(D){switch(D){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=D;break;default:throw new Error('Invalid value "'+D+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof jv)return;s="FieldObject"+t.FieldNum++}var D=function(k){return k};return this.scope&&(D=this.scope.internal.getEncryptor(this.objId)),"("+mf(D(s))+")"},set:function(D){s=D.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(D){s=D}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(D){o=D}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(D){a=D}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(D){l=D}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/D_:c},set:function(D){c=D}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(D){d=D}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof jv||this instanceof rf))return K1(p,this.objId,this.scope)},set:function(D){D=D.toString(),p=D}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof ia?v:K1(v,this.objId,this.scope)},set:function(D){D=D.toString(),v=this instanceof ia?D:D.substr(0,1)==="("?zf(D.substr(1,D.length-2)):zf(D)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ia?zf(v.substr(1,v.length-1)):v},set:function(D){D=D.toString(),v=this instanceof ia?"/"+D:D}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(D){this.V=D}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof ia?m:K1(m,this.objId,this.scope)},set:function(D){D=D.toString(),m=this instanceof ia?D:D.substr(0,1)==="("?zf(D.substr(1,D.length-2)):zf(D)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ia?zf(m.substr(1,m.length-1)):m},set:function(D){D=D.toString(),m=this instanceof ia?"/"+D:D}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(D){D=!!D,E=D}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(D){x=D}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,1)},set:function(D){D?this.Ff=So(this.Ff,1):this.Ff=Co(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,2)},set:function(D){D?this.Ff=So(this.Ff,2):this.Ff=Co(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,3)},set:function(D){D?this.Ff=So(this.Ff,3):this.Ff=Co(this.Ff,3)}});var T=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(T!==null)return T},set:function(D){if([0,1,2].indexOf(D)===-1)throw new Error('Invalid value "'+D+'" for attribute Q supplied.');T=D}}),Object.defineProperty(this,"textAlign",{get:function(){var D;switch(T){case 0:default:D="left";break;case 1:D="center";break;case 2:D="right"}return D},configurable:!0,enumerable:!0,set:function(D){switch(D){case"right":case 2:T=2;break;case"center":case 1:T=1;break;case"left":case 0:default:T=0}}})};Xl(wc,Gc);var cp=function(){wc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return IE(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,18)},set:function(n){n?this.Ff=So(this.Ff,18):this.Ff=Co(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=So(this.Ff,19):this.Ff=Co(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,20)},set:function(n){n?(this.Ff=So(this.Ff,20),e.sort()):this.Ff=Co(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,22)},set:function(n){n?this.Ff=So(this.Ff,22):this.Ff=Co(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,23)},set:function(n){n?this.Ff=So(this.Ff,23):this.Ff=Co(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,27)},set:function(n){n?this.Ff=So(this.Ff,27):this.Ff=Co(this.Ff,27)}}),this.hasAppearanceStream=!1};Xl(cp,wc);var hp=function(){cp.call(this),this.fontName="helvetica",this.combo=!1};Xl(hp,cp);var dp=function(){hp.call(this),this.combo=!0};Xl(dp,hp);var X0=function(){dp.call(this),this.edit=!0};Xl(X0,dp);var ia=function(){wc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,15)},set:function(n){n?this.Ff=So(this.Ff,15):this.Ff=Co(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,16)},set:function(n){n?this.Ff=So(this.Ff,16):this.Ff=Co(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,17)},set:function(n){n?this.Ff=So(this.Ff,17):this.Ff=Co(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,26)},set:function(n){n?this.Ff=So(this.Ff,26):this.Ff=Co(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+mf(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Vi(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Xl(ia,wc);var J0=function(){ia.call(this),this.pushButton=!0};Xl(J0,ia);var fp=function(){ia.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Xl(fp,ia);var jv=function(){var t,e;wc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+mf(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Vi(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Gn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Xl(jv,wc),fp.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},fp.prototype.createOption=function(t){var e=new jv;return e.Parent=this,e.optionName=t,this.Kids.push(e),mV.call(this.scope,e),e};var Q0=function(){ia.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Gn.CheckBox.createAppearanceStream()};Xl(Q0,ia);var rf=function(){wc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,13)},set:function(e){e?this.Ff=So(this.Ff,13):this.Ff=Co(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,21)},set:function(e){e?this.Ff=So(this.Ff,21):this.Ff=Co(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,23)},set:function(e){e?this.Ff=So(this.Ff,23):this.Ff=Co(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,24)},set:function(e){e?this.Ff=So(this.Ff,24):this.Ff=Co(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,25)},set:function(e){e?this.Ff=So(this.Ff,25):this.Ff=Co(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,26)},set:function(e){e?this.Ff=So(this.Ff,26):this.Ff=Co(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Xl(rf,wc);var ev=function(){rf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Lo(this.Ff,14)},set:function(t){t?this.Ff=So(this.Ff,14):this.Ff=Co(this.Ff,14)}}),this.password=!0};Xl(ev,rf);var Gn={CheckBox:{createAppearanceStream:function(){return{N:{On:Gn.CheckBox.YesNormal},D:{On:Gn.CheckBox.YesPushDown,Off:Gn.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Oc(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=vb(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Br(Gn.internal.getWidth(t))+" "+Br(Gn.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Br(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Oc(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=Gn.internal.getHeight(t),o=Gn.internal.getWidth(t),a=vb(t,t.caption);return i.push("1 g"),i.push("0 0 "+Br(o)+" "+Br(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Br(o-1)+" "+Br(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Br(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Oc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Br(Gn.internal.getWidth(t))+" "+Br(Gn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Gn.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Gn.RadioButton.Circle.YesNormal,e.D[t]=Gn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Oc(t);e.scope=t.scope;var n=[],r=Gn.internal.getWidth(t)<=Gn.internal.getHeight(t)?Gn.internal.getWidth(t)/4:Gn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Gn.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Yh(Gn.internal.getWidth(t)/2)+" "+Yh(Gn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Oc(t);e.scope=t.scope;var n=[],r=Gn.internal.getWidth(t)<=Gn.internal.getHeight(t)?Gn.internal.getWidth(t)/4:Gn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Gn.internal.Bezier_C).toFixed(5)),o=Number((r*Gn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Yh(Gn.internal.getWidth(t)/2)+" "+Yh(Gn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Yh(Gn.internal.getWidth(t)/2)+" "+Yh(Gn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Oc(t);e.scope=t.scope;var n=[],r=Gn.internal.getWidth(t)<=Gn.internal.getHeight(t)?Gn.internal.getWidth(t)/4:Gn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Gn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Yh(Gn.internal.getWidth(t)/2)+" "+Yh(Gn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Gn.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Gn.RadioButton.Cross.YesNormal,e.D[t]=Gn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Oc(t);e.scope=t.scope;var n=[],r=Gn.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Br(Gn.internal.getWidth(t)-2)+" "+Br(Gn.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Br(r.x1.x)+" "+Br(r.x1.y)+" m"),n.push(Br(r.x2.x)+" "+Br(r.x2.y)+" l"),n.push(Br(r.x4.x)+" "+Br(r.x4.y)+" m"),n.push(Br(r.x3.x)+" "+Br(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Oc(t);e.scope=t.scope;var n=Gn.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Br(Gn.internal.getWidth(t))+" "+Br(Gn.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Br(Gn.internal.getWidth(t)-2)+" "+Br(Gn.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Br(n.x1.x)+" "+Br(n.x1.y)+" m"),r.push(Br(n.x2.x)+" "+Br(n.x2.y)+" l"),r.push(Br(n.x4.x)+" "+Br(n.x4.y)+" m"),r.push(Br(n.x3.x)+" "+Br(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Oc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Br(Gn.internal.getWidth(t))+" "+Br(Gn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Gn.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Gn.internal.getWidth(t),n=Gn.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Gn.internal.getWidth=function(t){var e=0;return Vi(t)==="object"&&(e=d5(t.Rect[2])),e},Gn.internal.getHeight=function(t){var e=0;return Vi(t)==="object"&&(e=d5(t.Rect[3])),e};var mV=oo.addField=function(t){if(gV(this,t),!(t instanceof wc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};oo.AcroFormChoiceField=cp,oo.AcroFormListBox=hp,oo.AcroFormComboBox=dp,oo.AcroFormEditBox=X0,oo.AcroFormButton=ia,oo.AcroFormPushButton=J0,oo.AcroFormRadioButton=fp,oo.AcroFormCheckBox=Q0,oo.AcroFormTextField=rf,oo.AcroFormPasswordField=ev,oo.AcroFormAppearance=Gn,oo.AcroForm={ChoiceField:cp,ListBox:hp,ComboBox:dp,EditBox:X0,Button:ia,PushButton:J0,RadioButton:fp,CheckBox:Q0,TextField:rf,PasswordField:ev,Appearance:Gn},Cr.AcroForm={ChoiceField:cp,ListBox:hp,ComboBox:dp,EditBox:X0,Button:ia,PushButton:J0,RadioButton:fp,CheckBox:Q0,TextField:rf,PasswordField:ev,Appearance:Gn};Cr.AcroForm;function BE(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(R,$){var X,K,F,N,J,Y=e;if(($=$||e)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(pe(R))for(J in n)for(F=n[J],X=0;X<F.length;X+=1){for(N=!0,K=0;K<F[X].length;K+=1)if(F[X][K]!==void 0&&F[X][K]!==R[K]){N=!1;break}if(N===!0){Y=J;break}}else for(J in n)for(F=n[J],X=0;X<F.length;X+=1){for(N=!0,K=0;K<F[X].length;K+=1)if(F[X][K]!==void 0&&F[X][K]!==R.charCodeAt(K)){N=!1;break}if(N===!0){Y=J;break}}return Y===e&&$!==e&&(Y=$),Y},i=function R($){for(var X=this.internal.write,K=this.internal.putStream,F=(0,this.internal.getFilters)();F.indexOf("FlateEncode")!==-1;)F.splice(F.indexOf("FlateEncode"),1);$.objectId=this.internal.newObject();var N=[];if(N.push({key:"Type",value:"/XObject"}),N.push({key:"Subtype",value:"/Image"}),N.push({key:"Width",value:$.width}),N.push({key:"Height",value:$.height}),$.colorSpace===T.INDEXED?N.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+($.palette.length/3-1)+" "+("sMask"in $&&$.sMask!==void 0?$.objectId+2:$.objectId+1)+" 0 R]"}):(N.push({key:"ColorSpace",value:"/"+$.colorSpace}),$.colorSpace===T.DEVICE_CMYK&&N.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),N.push({key:"BitsPerComponent",value:$.bitsPerComponent}),"decodeParameters"in $&&$.decodeParameters!==void 0&&N.push({key:"DecodeParms",value:"<<"+$.decodeParameters+">>"}),"transparency"in $&&Array.isArray($.transparency)){for(var J="",Y=0,ye=$.transparency.length;Y<ye;Y++)J+=$.transparency[Y]+" "+$.transparency[Y]+" ";N.push({key:"Mask",value:"["+J+"]"})}$.sMask!==void 0&&N.push({key:"SMask",value:$.objectId+1+" 0 R"});var Ce=$.filter!==void 0?["/"+$.filter]:void 0;if(K({data:$.data,additionalKeyValues:N,alreadyAppliedFilters:Ce,objectId:$.objectId}),X("endobj"),"sMask"in $&&$.sMask!==void 0){var He="/Predictor "+$.predictor+" /Colors 1 /BitsPerComponent "+$.bitsPerComponent+" /Columns "+$.width,j={width:$.width,height:$.height,colorSpace:"DeviceGray",bitsPerComponent:$.bitsPerComponent,decodeParameters:He,data:$.sMask};"filter"in $&&(j.filter=$.filter),R.call(this,j)}if($.colorSpace===T.INDEXED){var Z=this.internal.newObject();K({data:O(new Uint8Array($.palette)),objectId:Z}),X("endobj")}},s=function(){var R=this.internal.collections.addImage_images;for(var $ in R)i.call(this,R[$])},o=function(){var R,$=this.internal.collections.addImage_images,X=this.internal.write;for(var K in $)X("/I"+(R=$[K]).index,R.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var R=this.internal.collections.addImage_images;return a.call(this),R},c=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(R){return typeof t["process"+R.toUpperCase()]=="function"},p=function(R){return Vi(R)==="object"&&R.nodeType===1},v=function(R,$){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var X=""+R.getAttribute("src");if(X.indexOf("data:image/")===0)return Bg(unescape(X).split("base64,").pop());var K=t.loadFile(X,!0);if(K!==void 0)return K}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var F;switch($){case"PNG":F="image/png";break;case"WEBP":F="image/webp";break;case"JPEG":case"JPG":default:F="image/jpeg"}return Bg(R.toDataURL(F,1).split("base64,").pop())}},m=function(R){var $=this.internal.collections.addImage_images;if($){for(var X in $)if(R===$[X].alias)return $[X]}},x=function(R,$,X){return R||$||(R=-96,$=-96),R<0&&(R=-1*X.width*72/R/this.internal.scaleFactor),$<0&&($=-1*X.height*72/$/this.internal.scaleFactor),R===0&&(R=$*X.width/X.height),$===0&&($=R*X.height/X.width),[R,$]},E=function(R,$,X,K,F,N){var J=x.call(this,X,K,F),Y=this.internal.getCoordinateString,ye=this.internal.getVerticalCoordinateString,Ce=l.call(this);if(X=J[0],K=J[1],Ce[F.index]=F,N){N*=Math.PI/180;var He=Math.cos(N),j=Math.sin(N),Z=function(de){return de.toFixed(4)},ae=[Z(He),Z(j),Z(-1*j),Z(He),0,0,"cm"]}this.internal.write("q"),N?(this.internal.write([1,"0","0",1,Y(R),ye($+K),"cm"].join(" ")),this.internal.write(ae.join(" ")),this.internal.write([Y(X),"0","0",Y(K),"0","0","cm"].join(" "))):this.internal.write([Y(X),"0","0",Y(K),Y(R),ye($+K),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+F.index+" Do"),this.internal.write("Q")},T=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var D=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=t.__addimage__.sHashCode=function(R){var $,X,K=0;if(typeof R=="string")for(X=R.length,$=0;$<X;$++)K=(K<<5)-K+R.charCodeAt($),K|=0;else if(pe(R))for(X=R.byteLength/2,$=0;$<X;$++)K=(K<<5)-K+R[$],K|=0;return K},B=t.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var $=!0;return R.length===0&&($=!1),R.length%4!=0&&($=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&($=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&($=!1),$},W=t.__addimage__.extractImageFromDataUrl=function(R){var $=(R=R||"").split("base64,"),X=null;if($.length===2){var K=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec($[0]);Array.isArray(K)&&(X={mimeType:K[1],charset:K[2],data:$[1]})}return X},Q=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(R){return Q()&&R instanceof ArrayBuffer};var pe=t.__addimage__.isArrayBufferView=function(R){return Q()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},fe=t.__addimage__.binaryStringToUint8Array=function(R){for(var $=R.length,X=new Uint8Array($),K=0;K<$;K++)X[K]=R.charCodeAt(K);return X},O=t.__addimage__.arrayBufferToBinaryString=function(R){for(var $="",X=pe(R)?R:new Uint8Array(R),K=0;K<X.length;K+=8192)$+=String.fromCharCode.apply(null,X.subarray(K,K+8192));return $};t.addImage=function(){var R,$,X,K,F,N,J,Y,ye;if(typeof arguments[1]=="number"?($=e,X=arguments[1],K=arguments[2],F=arguments[3],N=arguments[4],J=arguments[5],Y=arguments[6],ye=arguments[7]):($=arguments[1],X=arguments[2],K=arguments[3],F=arguments[4],N=arguments[5],J=arguments[6],Y=arguments[7],ye=arguments[8]),Vi(R=arguments[0])==="object"&&!p(R)&&"imageData"in R){var Ce=R;R=Ce.imageData,$=Ce.format||$||e,X=Ce.x||X||0,K=Ce.y||K||0,F=Ce.w||Ce.width||F,N=Ce.h||Ce.height||N,J=Ce.alias||J,Y=Ce.compression||Y,ye=Ce.rotation||Ce.angle||ye}var He=this.internal.getFilters();if(Y===void 0&&He.indexOf("FlateEncode")!==-1&&(Y="SLOW"),isNaN(X)||isNaN(K))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var j=U.call(this,R,$,J,Y);return E.call(this,X,K,F,N,j,ye),this};var U=function(R,$,X,K){var F,N,J;if(typeof R=="string"&&r(R)===e){R=unescape(R);var Y=q(R,!1);(Y!==""||(Y=t.loadFile(R,!0))!==void 0)&&(R=Y)}if(p(R)&&(R=v(R,$)),$=r(R,$),!d($))throw new Error("addImage does not support files of type '"+$+"', please ensure that a plugin for '"+$+"' support is added.");if(((J=X)==null||J.length===0)&&(X=function(ye){return typeof ye=="string"||pe(ye)?k(ye):pe(ye.data)?k(ye.data):null}(R)),(F=m.call(this,X))||(Q()&&(R instanceof Uint8Array||$==="RGBA"||(N=R,R=fe(R))),F=this["process"+$.toUpperCase()](R,c.call(this),X,function(ye){return ye&&typeof ye=="string"&&(ye=ye.toUpperCase()),ye in t.image_compression?ye:D.NONE}(K),N)),!F)throw new Error("An unknown error occurred whilst processing the image.");return F},q=t.__addimage__.convertBase64ToBinaryString=function(R,$){var X;$=typeof $!="boolean"||$;var K,F="";if(typeof R=="string"){K=(X=W(R))!==null?X.data:R;try{F=Bg(K)}catch(N){if($)throw B(K)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+N.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return F};t.getImageProperties=function(R){var $,X,K="";if(p(R)&&(R=v(R)),typeof R=="string"&&r(R)===e&&((K=q(R,!1))===""&&(K=t.loadFile(R)||""),R=K),X=r(R),!d(X))throw new Error("addImage does not support files of type '"+X+"', please ensure that a plugin for '"+X+"' support is added.");if(!Q()||R instanceof Uint8Array||(R=fe(R)),!($=this["process"+X.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return $.fileType=X,$}})(Cr.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Cr.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,d=!1,p=0;p<c.length&&!d;p++)switch((r=c[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var v=0;v<c.length;v++){r=c[v];var m=this.internal.pdfEscape,x=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),T=this.internal.newAdditionalObject(),D=this.internal.getEncryptor(E.objId),k=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+m(D(r.contents))+")",s+=" /Popup "+T.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+m(D(k))+") >>",E.content=s;var B=E.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+B,r.open&&(s+=" /Open true"),s+=" >>",T.content=s,this.internal.write(E.objId,"0 R",T.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var W=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(x(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+W+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var Q=this.annotations._nameMap[r.options.name];r.options.pageNumber=Q.page,r.options.top=Q.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(x(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var pe=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+pe+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var d=this.splitTextToSize(n,a).length;o=Math.ceil(c*d)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Cr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(E){return e[E.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},a=t.__arabicParser__.isArabicEndLetter=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(E){return o(E)&&i.indexOf(E.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(E){var T=0,D=n,k="",B=0;for(T=0;T<E.length;T+=1)D[E.charCodeAt(T)]!==void 0?(B++,typeof(D=D[E.charCodeAt(T)])=="number"&&(k+=String.fromCharCode(D),D=n,B=0),T===E.length-1&&(D=n,k+=E.charAt(T-(B-1)),T-=B-1,B=0)):(D=n,k+=E.charAt(T-B),T-=B,B=0);return k};t.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&r[E.charCodeAt(0)]!==void 0};var v=t.__arabicParser__.getCorrectForm=function(E,T,D){return o(E)?s(E)===!1?-1:!c(E)||!o(T)&&!o(D)||!o(D)&&a(T)||a(E)&&!o(T)||a(E)&&l(T)||a(E)&&a(T)?0:d(E)&&o(T)&&!a(T)&&o(D)&&c(D)?3:a(E)||!o(D)?1:2:-1},m=function(E){var T=0,D=0,k=0,B="",W="",Q="",pe=(E=E||"").split("\\s+"),fe=[];for(T=0;T<pe.length;T+=1){for(fe.push(""),D=0;D<pe[T].length;D+=1)B=pe[T][D],W=pe[T][D-1],Q=pe[T][D+1],o(B)?(k=v(B,W,Q),fe[T]+=k!==-1?String.fromCharCode(e[B.charCodeAt(0)][k]):B):fe[T]+=B;fe[T]=p(fe[T])}return fe.join(" ")},x=t.__arabicParser__.processArabic=t.processArabic=function(){var E,T=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,D=[];if(Array.isArray(T)){var k=0;for(D=[],k=0;k<T.length;k+=1)Array.isArray(T[k])?D.push([m(T[k][0]),T[k][1],T[k][2]]):D.push([m(T[k])]);E=D}else E=m(T);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};t.events.push(["preProcessText",x])}(Cr.API),Cr.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Cr.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(E){l=E}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(E){c=E}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(E){d=E}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(E){p=E}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(E){v=E}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(E){m=E}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(E){x=E}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),v=c.scaleFactor||this.internal.scaleFactor,m=0,x=0,E=0,T=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var D=c.maxWidth;D>0?typeof l=="string"?l=this.splitTextToSize(l,D):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(B,W){return B.concat(T.splitTextToSize(W,D))},[])):l=Array.isArray(l)?l:[l];for(var k=0;k<l.length;k++)m<(E=this.getStringUnitWidth(l[k],{font:p})*d)&&(m=E);return m!==0&&(x=l.length),{w:m/=v,h:Math.max((x*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/v,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,m&&v&&(this.printHeaderRow(l.lineNumber,!0),l.y+=v[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,d,p,v){if(r.call(this),!d)throw new Error("No data for PDF table.");var m,x,E,T,D=[],k=[],B=[],W={},Q={},pe=[],fe=[],O=(v=v||{}).autoSize||!1,U=v.printHeaders!==!1,q=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,R=v.margins||Object.assign({width:this.getPageWidth()},e),$=typeof v.padding=="number"?v.padding:3,X=v.headerBackgroundColor||"#c8c8c8",K=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=U,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=q,this.internal.__cell__.padding=$,this.internal.__cell__.headerBackgroundColor=X,this.internal.__cell__.headerTextColor=K,this.setFontSize(q),p==null)k=D=Object.keys(d[0]),B=D.map(function(){return"left"});else if(Array.isArray(p)&&Vi(p[0])==="object")for(D=p.map(function(Ce){return Ce.name}),k=p.map(function(Ce){return Ce.prompt||Ce.name||""}),B=p.map(function(Ce){return Ce.align||"left"}),m=0;m<p.length;m+=1)Q[p[m].name]=p[m].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(k=D=p,B=D.map(function(){return"left"}));if(O||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<D.length;m+=1){for(W[T=D[m]]=d.map(function(Ce){return Ce[T]}),this.setFont(void 0,"bold"),pe.push(this.getTextDimensions(k[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=W[T],this.setFont(void 0,"normal"),E=0;E<x.length;E+=1)pe.push(this.getTextDimensions(x[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Q[T]=Math.max.apply(null,pe)+$+$,pe=[]}if(U){var F={};for(m=0;m<D.length;m+=1)F[D[m]]={},F[D[m]].text=k[m],F[D[m]].align=B[m];var N=a.call(this,F,Q);fe=D.map(function(Ce){return new s(l,c,Q[Ce],N,F[Ce].text,void 0,F[Ce].align)}),this.setTableHeaderRow(fe),this.printHeaderRow(1,!1)}var J=p.reduce(function(Ce,He){return Ce[He.name]=He.align,Ce},{});for(m=0;m<d.length;m+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:m,data:d[m]},this);var Y=a.call(this,d[m],Q);for(E=0;E<D.length;E+=1){var ye=d[m][D[E]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:m,col:E,data:ye},this),o.call(this,new s(l,c,Q[D[E]],Y,ye,m+2,J[D[E]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(l).map(function(m){var x=l[m];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,c[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/v+d+d},this).reduce(function(m,x){return Math.max(m,x)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,v.push(d)),d.lineNumber=l;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(x)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),n=!1}}(Cr.API);var RE={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},FE=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],yb=BE(FE),jE=[100,200,300,400,500,600,700,800,900],vV=BE(jE);function bb(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return RE[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof yb[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function f5(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var yV={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},p5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function g5(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function bV(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},yV,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=bb(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+g5(s)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var d=yb[l],p=d<=yb.normal?-1:1,v=f5(c,FE,d,p);if(!v)throw new Error("Could not find a matching font-stretch value for "+l);return v}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var d=RE[l],p=0;p<d.length;++p)if(c[d[p]])return c[d[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var d=vV[l],p=f5(c,jE,d,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+g5(s)+"'.");return o}function m5(t){return t.trimLeft()}function _V(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function wV(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var m0,v5,y5,Z1=["times"];(function(t){var e,n,r,i,s,o,a,l,c,d=function(j){return j=j||{},this.isStrokeTransparent=j.isStrokeTransparent||!1,this.strokeOpacity=j.strokeOpacity||1,this.strokeStyle=j.strokeStyle||"#000000",this.fillStyle=j.fillStyle||"#000000",this.isFillTransparent=j.isFillTransparent||!1,this.fillOpacity=j.fillOpacity||1,this.font=j.font||"10px sans-serif",this.textBaseline=j.textBaseline||"alphabetic",this.textAlign=j.textAlign||"left",this.lineWidth=j.lineWidth||1,this.lineJoin=j.lineJoin||"miter",this.lineCap=j.lineCap||"butt",this.path=j.path||[],this.transform=j.transform!==void 0?j.transform.clone():new l,this.globalCompositeOperation=j.globalCompositeOperation||"normal",this.globalAlpha=j.globalAlpha||1,this.clip_path=j.clip_path||[],this.currentPoint=j.currentPoint||new o,this.miterLimit=j.miterLimit||10,this.lastPoint=j.lastPoint||new o,this.lineDashOffset=j.lineDashOffset||0,this.lineDash=j.lineDash||[],this.margin=j.margin||[0,0,0,0],this.prevPageLastElemOffset=j.prevPageLastElemOffset||0,this.ignoreClearRect=typeof j.ignoreClearRect!="boolean"||j.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var p=function(j){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Z=j;Object.defineProperty(this,"pdf",{get:function(){return Z}});var ae=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ae},set:function(he){ae=!!he}});var de=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return de},set:function(he){de=!!he}});var ge=0;Object.defineProperty(this,"posX",{get:function(){return ge},set:function(he){isNaN(he)||(ge=he)}});var me=0;Object.defineProperty(this,"posY",{get:function(){return me},set:function(he){isNaN(he)||(me=he)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(he){var ee;typeof he=="number"?ee=[he,he,he,he]:((ee=new Array(4))[0]=he[0],ee[1]=he.length>=2?he[1]:ee[0],ee[2]=he.length>=3?he[2]:ee[0],ee[3]=he.length>=4?he[3]:ee[1]),c.margin=ee}});var oe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return oe},set:function(he){oe=he}});var re=0;Object.defineProperty(this,"lastBreak",{get:function(){return re},set:function(he){re=he}});var Te=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Te},set:function(he){Te=he}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(he){he instanceof d&&(c=he)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(he){c.path=he}});var Le=[];Object.defineProperty(this,"ctxStack",{get:function(){return Le},set:function(he){Le=he}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(he){var ee;ee=v(he),this.ctx.fillStyle=ee.style,this.ctx.isFillTransparent=ee.a===0,this.ctx.fillOpacity=ee.a,this.pdf.setFillColor(ee.r,ee.g,ee.b,{a:ee.a}),this.pdf.setTextColor(ee.r,ee.g,ee.b,{a:ee.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(he){var ee=v(he);this.ctx.strokeStyle=ee.style,this.ctx.isStrokeTransparent=ee.a===0,this.ctx.strokeOpacity=ee.a,ee.a===0?this.pdf.setDrawColor(255,255,255):(ee.a,this.pdf.setDrawColor(ee.r,ee.g,ee.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(he){["butt","round","square"].indexOf(he)!==-1&&(this.ctx.lineCap=he,this.pdf.setLineCap(he))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(he){isNaN(he)||(this.ctx.lineWidth=he,this.pdf.setLineWidth(he))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(he){["bevel","round","miter"].indexOf(he)!==-1&&(this.ctx.lineJoin=he,this.pdf.setLineJoin(he))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(he){isNaN(he)||(this.ctx.miterLimit=he,this.pdf.setMiterLimit(he))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(he){this.ctx.textBaseline=he}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(he){["right","end","center","left","start"].indexOf(he)!==-1&&(this.ctx.textAlign=he)}});var qe=null;function se(he,ee){if(qe===null){var be=function(je){var We=[];return Object.keys(je).forEach(function(Qe){je[Qe].forEach(function(Je){var st=null;switch(Je){case"bold":st={family:Qe,weight:"bold"};break;case"italic":st={family:Qe,style:"italic"};break;case"bolditalic":st={family:Qe,weight:"bold",style:"italic"};break;case"":case"normal":st={family:Qe}}st!==null&&(st.ref={name:Qe,style:Je},We.push(st))})}),We}(he.getFontList());qe=function(je){for(var We={},Qe=0;Qe<je.length;++Qe){var Je=bb(je[Qe]),st=Je.family,Pt=Je.stretch,Bt=Je.style,Ht=Je.weight;We[st]=We[st]||{},We[st][Pt]=We[st][Pt]||{},We[st][Pt][Bt]=We[st][Pt][Bt]||{},We[st][Pt][Bt][Ht]=Je}return We}(be.concat(ee))}return qe}var le=null;Object.defineProperty(this,"fontFaces",{get:function(){return le},set:function(he){qe=null,le=he}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(he){var ee;if(this.ctx.font=he,(ee=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(he))!==null){var be=ee[1],je=(ee[2],ee[3]),We=ee[4],Qe=(ee[5],ee[6]),Je=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(We)[2];We=Math.floor(Je==="px"?parseFloat(We)*this.pdf.internal.scaleFactor:Je==="em"?parseFloat(We)*this.pdf.getFontSize():parseFloat(We)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(We);var st=function(et){var ot,rt,Ft=[],Xt=et.trim();if(Xt==="")return Z1;if(Xt in p5)return[p5[Xt]];for(;Xt!=="";){switch(rt=null,ot=(Xt=m5(Xt)).charAt(0)){case'"':case"'":rt=_V(Xt.substring(1),ot);break;default:rt=wV(Xt)}if(rt===null||(Ft.push(rt[0]),(Xt=m5(rt[1]))!==""&&Xt.charAt(0)!==","))return Z1;Xt=Xt.replace(/^,/,"")}return Ft}(Qe);if(this.fontFaces){var Pt=bV(se(this.pdf,this.fontFaces),st.map(function(et){return{family:et,stretch:"normal",weight:je,style:be}}));this.pdf.setFont(Pt.ref.name,Pt.ref.style)}else{var Bt="";(je==="bold"||parseInt(je,10)>=700||be==="bold")&&(Bt="bold"),be==="italic"&&(Bt+="italic"),Bt.length===0&&(Bt="normal");for(var Ht="",Jt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},fn=0;fn<st.length;fn++){if(this.pdf.internal.getFont(st[fn],Bt,{noFallback:!0,disableWarning:!0})!==void 0){Ht=st[fn];break}if(Bt==="bolditalic"&&this.pdf.internal.getFont(st[fn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ht=st[fn],Bt="bold";else if(this.pdf.internal.getFont(st[fn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ht=st[fn],Bt="normal";break}}if(Ht===""){for(var pn=0;pn<st.length;pn++)if(Jt[st[pn]]){Ht=Jt[st[pn]];break}}Ht=Ht===""?"Times":Ht,this.pdf.setFont(Ht,Bt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(he){this.ctx.globalCompositeOperation=he}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(he){this.ctx.globalAlpha=he}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(he){this.ctx.lineDashOffset=he,He.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(he){this.ctx.lineDash=he,He.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(he){this.ctx.ignoreClearRect=!!he}})};p.prototype.setLineDash=function(j){this.lineDash=j},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){W.call(this,"fill",!1)},p.prototype.stroke=function(){W.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(j,Z){if(isNaN(j)||isNaN(Z))throw Qi.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ae=this.ctx.transform.applyToPoint(new o(j,Z));this.path.push({type:"mt",x:ae.x,y:ae.y}),this.ctx.lastPoint=new o(j,Z)},p.prototype.closePath=function(){var j=new o(0,0),Z=0;for(Z=this.path.length-1;Z!==-1;Z--)if(this.path[Z].type==="begin"&&Vi(this.path[Z+1])==="object"&&typeof this.path[Z+1].x=="number"){j=new o(this.path[Z+1].x,this.path[Z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(j.x,j.y)},p.prototype.lineTo=function(j,Z){if(isNaN(j)||isNaN(Z))throw Qi.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ae=this.ctx.transform.applyToPoint(new o(j,Z));this.path.push({type:"lt",x:ae.x,y:ae.y}),this.ctx.lastPoint=new o(ae.x,ae.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),W.call(this,null,!0)},p.prototype.quadraticCurveTo=function(j,Z,ae,de){if(isNaN(ae)||isNaN(de)||isNaN(j)||isNaN(Z))throw Qi.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ge=this.ctx.transform.applyToPoint(new o(ae,de)),me=this.ctx.transform.applyToPoint(new o(j,Z));this.path.push({type:"qct",x1:me.x,y1:me.y,x:ge.x,y:ge.y}),this.ctx.lastPoint=new o(ge.x,ge.y)},p.prototype.bezierCurveTo=function(j,Z,ae,de,ge,me){if(isNaN(ge)||isNaN(me)||isNaN(j)||isNaN(Z)||isNaN(ae)||isNaN(de))throw Qi.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var oe=this.ctx.transform.applyToPoint(new o(ge,me)),re=this.ctx.transform.applyToPoint(new o(j,Z)),Te=this.ctx.transform.applyToPoint(new o(ae,de));this.path.push({type:"bct",x1:re.x,y1:re.y,x2:Te.x,y2:Te.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new o(oe.x,oe.y)},p.prototype.arc=function(j,Z,ae,de,ge,me){if(isNaN(j)||isNaN(Z)||isNaN(ae)||isNaN(de)||isNaN(ge))throw Qi.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(me=!!me,!this.ctx.transform.isIdentity){var oe=this.ctx.transform.applyToPoint(new o(j,Z));j=oe.x,Z=oe.y;var re=this.ctx.transform.applyToPoint(new o(0,ae)),Te=this.ctx.transform.applyToPoint(new o(0,0));ae=Math.sqrt(Math.pow(re.x-Te.x,2)+Math.pow(re.y-Te.y,2))}Math.abs(ge-de)>=2*Math.PI&&(de=0,ge=2*Math.PI),this.path.push({type:"arc",x:j,y:Z,radius:ae,startAngle:de,endAngle:ge,counterclockwise:me})},p.prototype.arcTo=function(j,Z,ae,de,ge){throw new Error("arcTo not implemented.")},p.prototype.rect=function(j,Z,ae,de){if(isNaN(j)||isNaN(Z)||isNaN(ae)||isNaN(de))throw Qi.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(j,Z),this.lineTo(j+ae,Z),this.lineTo(j+ae,Z+de),this.lineTo(j,Z+de),this.lineTo(j,Z),this.lineTo(j+ae,Z),this.lineTo(j,Z)},p.prototype.fillRect=function(j,Z,ae,de){if(isNaN(j)||isNaN(Z)||isNaN(ae)||isNaN(de))throw Qi.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ge={};this.lineCap!=="butt"&&(ge.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ge.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(j,Z,ae,de),this.fill(),ge.hasOwnProperty("lineCap")&&(this.lineCap=ge.lineCap),ge.hasOwnProperty("lineJoin")&&(this.lineJoin=ge.lineJoin)}},p.prototype.strokeRect=function(j,Z,ae,de){if(isNaN(j)||isNaN(Z)||isNaN(ae)||isNaN(de))throw Qi.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(j,Z,ae,de),this.stroke())},p.prototype.clearRect=function(j,Z,ae,de){if(isNaN(j)||isNaN(Z)||isNaN(ae)||isNaN(de))throw Qi.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(j,Z,ae,de))},p.prototype.save=function(j){j=typeof j!="boolean"||j;for(var Z=this.pdf.internal.getCurrentPageInfo().pageNumber,ae=0;ae<this.pdf.internal.getNumberOfPages();ae++)this.pdf.setPage(ae+1),this.pdf.internal.out("q");if(this.pdf.setPage(Z),j){this.ctx.fontSize=this.pdf.internal.getFontSize();var de=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=de}},p.prototype.restore=function(j){j=typeof j!="boolean"||j;for(var Z=this.pdf.internal.getCurrentPageInfo().pageNumber,ae=0;ae<this.pdf.internal.getNumberOfPages();ae++)this.pdf.setPage(ae+1),this.pdf.internal.out("Q");this.pdf.setPage(Z),j&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(j){var Z,ae,de,ge;if(j.isCanvasGradient===!0&&(j=j.getColor()),!j)return{r:0,g:0,b:0,a:0,style:j};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(j))Z=0,ae=0,de=0,ge=0;else{var me=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(j);if(me!==null)Z=parseInt(me[1]),ae=parseInt(me[2]),de=parseInt(me[3]),ge=1;else if((me=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(j))!==null)Z=parseInt(me[1]),ae=parseInt(me[2]),de=parseInt(me[3]),ge=parseFloat(me[4]);else{if(ge=1,typeof j=="string"&&j.charAt(0)!=="#"){var oe=new AE(j);j=oe.ok?oe.toHex():"#000000"}j.length===4?(Z=j.substring(1,2),Z+=Z,ae=j.substring(2,3),ae+=ae,de=j.substring(3,4),de+=de):(Z=j.substring(1,3),ae=j.substring(3,5),de=j.substring(5,7)),Z=parseInt(Z,16),ae=parseInt(ae,16),de=parseInt(de,16)}}return{r:Z,g:ae,b:de,a:ge,style:j}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(j,Z,ae,de){if(isNaN(Z)||isNaN(ae)||typeof j!="string")throw Qi.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(de=isNaN(de)?void 0:de,!m.call(this)){var ge=Y(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;$.call(this,{text:j,x:Z,y:ae,scale:me,angle:ge,align:this.textAlign,maxWidth:de})}},p.prototype.strokeText=function(j,Z,ae,de){if(isNaN(Z)||isNaN(ae)||typeof j!="string")throw Qi.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){de=isNaN(de)?void 0:de;var ge=Y(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;$.call(this,{text:j,x:Z,y:ae,scale:me,renderingMode:"stroke",angle:ge,align:this.textAlign,maxWidth:de})}},p.prototype.measureText=function(j){if(typeof j!="string")throw Qi.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Z=this.pdf,ae=this.pdf.internal.scaleFactor,de=Z.internal.getFontSize(),ge=Z.getStringUnitWidth(j)*de/Z.internal.scaleFactor,me=function(oe){var re=(oe=oe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return re}}),this};return new me({width:ge*=Math.round(96*ae/72*1e4)/1e4})},p.prototype.scale=function(j,Z){if(isNaN(j)||isNaN(Z))throw Qi.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ae=new l(j,0,0,Z,0,0);this.ctx.transform=this.ctx.transform.multiply(ae)},p.prototype.rotate=function(j){if(isNaN(j))throw Qi.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Z=new l(Math.cos(j),Math.sin(j),-Math.sin(j),Math.cos(j),0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},p.prototype.translate=function(j,Z){if(isNaN(j)||isNaN(Z))throw Qi.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ae=new l(1,0,0,1,j,Z);this.ctx.transform=this.ctx.transform.multiply(ae)},p.prototype.transform=function(j,Z,ae,de,ge,me){if(isNaN(j)||isNaN(Z)||isNaN(ae)||isNaN(de)||isNaN(ge)||isNaN(me))throw Qi.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var oe=new l(j,Z,ae,de,ge,me);this.ctx.transform=this.ctx.transform.multiply(oe)},p.prototype.setTransform=function(j,Z,ae,de,ge,me){j=isNaN(j)?1:j,Z=isNaN(Z)?0:Z,ae=isNaN(ae)?0:ae,de=isNaN(de)?1:de,ge=isNaN(ge)?0:ge,me=isNaN(me)?0:me,this.ctx.transform=new l(j,Z,ae,de,ge,me)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(j,Z,ae,de,ge,me,oe,re,Te){var Le=this.pdf.getImageProperties(j),qe=1,se=1,le=1,he=1;de!==void 0&&re!==void 0&&(le=re/de,he=Te/ge,qe=Le.width/de*re/de,se=Le.height/ge*Te/ge),me===void 0&&(me=Z,oe=ae,Z=0,ae=0),de!==void 0&&re===void 0&&(re=de,Te=ge),de===void 0&&re===void 0&&(re=Le.width,Te=Le.height);for(var ee,be=this.ctx.transform.decompose(),je=Y(be.rotate.shx),We=new l,Qe=(We=(We=(We=We.multiply(be.translate)).multiply(be.skew)).multiply(be.scale)).applyToRectangle(new a(me-Z*le,oe-ae*he,de*qe,ge*se)),Je=T.call(this,Qe),st=[],Pt=0;Pt<Je.length;Pt+=1)st.indexOf(Je[Pt])===-1&&st.push(Je[Pt]);if(B(st),this.autoPaging)for(var Bt=st[0],Ht=st[st.length-1],Jt=Bt;Jt<Ht+1;Jt++){this.pdf.setPage(Jt);var fn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pn=Jt===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],rt=Jt===1?0:et+(Jt-2)*ot;if(this.ctx.clip_path.length!==0){var Ft=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(ee,this.posX+this.margin[3],-rt+pn+this.ctx.prevPageLastElemOffset),Q.call(this,"fill",!0),this.path=Ft}var Xt=JSON.parse(JSON.stringify(Qe));Xt=k([Xt],this.posX+this.margin[3],-rt+pn+this.ctx.prevPageLastElemOffset)[0];var Mn=(Jt>Bt||Jt<Ht)&&E.call(this);Mn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],fn,ot,null).clip().discardPath()),this.pdf.addImage(j,"JPEG",Xt.x,Xt.y,Xt.w,Xt.h,null,null,je),Mn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(j,"JPEG",Qe.x,Qe.y,Qe.w,Qe.h,null,null,je)};var T=function(j,Z,ae){var de=[];Z=Z||this.pdf.internal.pageSize.width,ae=ae||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ge=this.posY+this.ctx.prevPageLastElemOffset;switch(j.type){default:case"mt":case"lt":de.push(Math.floor((j.y+ge)/ae)+1);break;case"arc":de.push(Math.floor((j.y+ge-j.radius)/ae)+1),de.push(Math.floor((j.y+ge+j.radius)/ae)+1);break;case"qct":var me=ye(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x,j.y);de.push(Math.floor((me.y+ge)/ae)+1),de.push(Math.floor((me.y+me.h+ge)/ae)+1);break;case"bct":var oe=Ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x2,j.y2,j.x,j.y);de.push(Math.floor((oe.y+ge)/ae)+1),de.push(Math.floor((oe.y+oe.h+ge)/ae)+1);break;case"rect":de.push(Math.floor((j.y+ge)/ae)+1),de.push(Math.floor((j.y+j.h+ge)/ae)+1)}for(var re=0;re<de.length;re+=1)for(;this.pdf.internal.getNumberOfPages()<de[re];)D.call(this);return de},D=function(){var j=this.fillStyle,Z=this.strokeStyle,ae=this.font,de=this.lineCap,ge=this.lineWidth,me=this.lineJoin;this.pdf.addPage(),this.fillStyle=j,this.strokeStyle=Z,this.font=ae,this.lineCap=de,this.lineWidth=ge,this.lineJoin=me},k=function(j,Z,ae){for(var de=0;de<j.length;de++)switch(j[de].type){case"bct":j[de].x2+=Z,j[de].y2+=ae;case"qct":j[de].x1+=Z,j[de].y1+=ae;case"mt":case"lt":case"arc":default:j[de].x+=Z,j[de].y+=ae}return j},B=function(j){return j.sort(function(Z,ae){return Z-ae})},W=function(j,Z){for(var ae,de,ge=this.fillStyle,me=this.strokeStyle,oe=this.lineCap,re=this.lineWidth,Te=Math.abs(re*this.ctx.transform.scaleX),Le=this.lineJoin,qe=JSON.parse(JSON.stringify(this.path)),se=JSON.parse(JSON.stringify(this.path)),le=[],he=0;he<se.length;he++)if(se[he].x!==void 0)for(var ee=T.call(this,se[he]),be=0;be<ee.length;be+=1)le.indexOf(ee[be])===-1&&le.push(ee[be]);for(var je=0;je<le.length;je++)for(;this.pdf.internal.getNumberOfPages()<le[je];)D.call(this);if(B(le),this.autoPaging)for(var We=le[0],Qe=le[le.length-1],Je=We;Je<Qe+1;Je++){this.pdf.setPage(Je),this.fillStyle=ge,this.strokeStyle=me,this.lineCap=oe,this.lineWidth=Te,this.lineJoin=Le;var st=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Pt=Je===1?this.posY+this.margin[0]:this.margin[0],Bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ht=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Jt=Je===1?0:Bt+(Je-2)*Ht;if(this.ctx.clip_path.length!==0){var fn=this.path;ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(ae,this.posX+this.margin[3],-Jt+Pt+this.ctx.prevPageLastElemOffset),Q.call(this,j,!0),this.path=fn}if(de=JSON.parse(JSON.stringify(qe)),this.path=k(de,this.posX+this.margin[3],-Jt+Pt+this.ctx.prevPageLastElemOffset),Z===!1||Je===0){var pn=(Je>We||Je<Qe)&&E.call(this);pn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,Ht,null).clip().discardPath()),Q.call(this,j,Z),pn&&this.pdf.restoreGraphicsState()}this.lineWidth=re}else this.lineWidth=Te,Q.call(this,j,Z),this.lineWidth=re;this.path=qe},Q=function(j,Z){if((j!=="stroke"||Z||!x.call(this))&&(j==="stroke"||Z||!m.call(this))){for(var ae,de,ge=[],me=this.path,oe=0;oe<me.length;oe++){var re=me[oe];switch(re.type){case"begin":ge.push({begin:!0});break;case"close":ge.push({close:!0});break;case"mt":ge.push({start:re,deltas:[],abs:[]});break;case"lt":var Te=ge.length;if(me[oe-1]&&!isNaN(me[oe-1].x)&&(ae=[re.x-me[oe-1].x,re.y-me[oe-1].y],Te>0)){for(;Te>=0;Te--)if(ge[Te-1].close!==!0&&ge[Te-1].begin!==!0){ge[Te-1].deltas.push(ae),ge[Te-1].abs.push(re);break}}break;case"bct":ae=[re.x1-me[oe-1].x,re.y1-me[oe-1].y,re.x2-me[oe-1].x,re.y2-me[oe-1].y,re.x-me[oe-1].x,re.y-me[oe-1].y],ge[ge.length-1].deltas.push(ae);break;case"qct":var Le=me[oe-1].x+2/3*(re.x1-me[oe-1].x),qe=me[oe-1].y+2/3*(re.y1-me[oe-1].y),se=re.x+2/3*(re.x1-re.x),le=re.y+2/3*(re.y1-re.y),he=re.x,ee=re.y;ae=[Le-me[oe-1].x,qe-me[oe-1].y,se-me[oe-1].x,le-me[oe-1].y,he-me[oe-1].x,ee-me[oe-1].y],ge[ge.length-1].deltas.push(ae);break;case"arc":ge.push({deltas:[],abs:[],arc:!0}),Array.isArray(ge[ge.length-1].abs)&&ge[ge.length-1].abs.push(re)}}de=Z?null:j==="stroke"?"stroke":"fill";for(var be=!1,je=0;je<ge.length;je++)if(ge[je].arc)for(var We=ge[je].abs,Qe=0;Qe<We.length;Qe++){var Je=We[Qe];Je.type==="arc"?O.call(this,Je.x,Je.y,Je.radius,Je.startAngle,Je.endAngle,Je.counterclockwise,void 0,Z,!be):X.call(this,Je.x,Je.y),be=!0}else if(ge[je].close===!0)this.pdf.internal.out("h"),be=!1;else if(ge[je].begin!==!0){var st=ge[je].start.x,Pt=ge[je].start.y;K.call(this,ge[je].deltas,st,Pt),be=!0}de&&U.call(this,de),Z&&q.call(this)}},pe=function(j){var Z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ae=Z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return j-ae;case"top":return j+Z-ae;case"hanging":return j+Z-2*ae;case"middle":return j+Z/2-ae;case"ideographic":return j;case"alphabetic":default:return j}},fe=function(j){return j+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var j=function(){};return j.colorStops=[],j.addColorStop=function(Z,ae){this.colorStops.push([Z,ae])},j.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},j.isCanvasGradient=!0,j},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var O=function(j,Z,ae,de,ge,me,oe,re,Te){for(var Le=N.call(this,ae,de,ge,me),qe=0;qe<Le.length;qe++){var se=Le[qe];qe===0&&(Te?R.call(this,se.x1+j,se.y1+Z):X.call(this,se.x1+j,se.y1+Z)),F.call(this,j,Z,se.x2,se.y2,se.x3,se.y3,se.x4,se.y4)}re?q.call(this):U.call(this,oe)},U=function(j){switch(j){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},q=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(j,Z){this.pdf.internal.out(n(j)+" "+r(Z)+" m")},$=function(j){var Z;switch(j.align){case"right":case"end":Z="right";break;case"center":Z="center";break;case"left":case"start":default:Z="left"}var ae=this.pdf.getTextDimensions(j.text),de=pe.call(this,j.y),ge=fe.call(this,de)-ae.h,me=this.ctx.transform.applyToPoint(new o(j.x,de)),oe=this.ctx.transform.decompose(),re=new l;re=(re=(re=re.multiply(oe.translate)).multiply(oe.skew)).multiply(oe.scale);for(var Te,Le,qe,se=this.ctx.transform.applyToRectangle(new a(j.x,de,ae.w,ae.h)),le=re.applyToRectangle(new a(j.x,ge,ae.w,ae.h)),he=T.call(this,le),ee=[],be=0;be<he.length;be+=1)ee.indexOf(he[be])===-1&&ee.push(he[be]);if(B(ee),this.autoPaging)for(var je=ee[0],We=ee[ee.length-1],Qe=je;Qe<We+1;Qe++){this.pdf.setPage(Qe);var Je=Qe===1?this.posY+this.margin[0]:this.margin[0],st=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pt=this.pdf.internal.pageSize.height-this.margin[2],Bt=Pt-this.margin[0],Ht=this.pdf.internal.pageSize.width-this.margin[1],Jt=Ht-this.margin[3],fn=Qe===1?0:st+(Qe-2)*Bt;if(this.ctx.clip_path.length!==0){var pn=this.path;Te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Te,this.posX+this.margin[3],-1*fn+Je),Q.call(this,"fill",!0),this.path=pn}var et=k([JSON.parse(JSON.stringify(le))],this.posX+this.margin[3],-fn+Je+this.ctx.prevPageLastElemOffset)[0];j.scale>=.01&&(Le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Le*j.scale),qe=this.lineWidth,this.lineWidth=qe*j.scale);var ot=this.autoPaging!=="text";if(ot||et.y+et.h<=Pt){if(ot||et.y>=Je&&et.x<=Ht){var rt=ot?j.text:this.pdf.splitTextToSize(j.text,j.maxWidth||Ht-et.x)[0],Ft=k([JSON.parse(JSON.stringify(se))],this.posX+this.margin[3],-fn+Je+this.ctx.prevPageLastElemOffset)[0],Xt=ot&&(Qe>je||Qe<We)&&E.call(this);Xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Jt,Bt,null).clip().discardPath()),this.pdf.text(rt,Ft.x,Ft.y,{angle:j.angle,align:Z,renderingMode:j.renderingMode}),Xt&&this.pdf.restoreGraphicsState()}}else et.y<Pt&&(this.ctx.prevPageLastElemOffset+=Pt-et.y);j.scale>=.01&&(this.pdf.setFontSize(Le),this.lineWidth=qe)}else j.scale>=.01&&(Le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Le*j.scale),qe=this.lineWidth,this.lineWidth=qe*j.scale),this.pdf.text(j.text,me.x+this.posX,me.y+this.posY,{angle:j.angle,align:Z,renderingMode:j.renderingMode,maxWidth:j.maxWidth}),j.scale>=.01&&(this.pdf.setFontSize(Le),this.lineWidth=qe)},X=function(j,Z,ae,de){ae=ae||0,de=de||0,this.pdf.internal.out(n(j+ae)+" "+r(Z+de)+" l")},K=function(j,Z,ae){return this.pdf.lines(j,Z,ae,null,null)},F=function(j,Z,ae,de,ge,me,oe,re){this.pdf.internal.out([e(i(ae+j)),e(s(de+Z)),e(i(ge+j)),e(s(me+Z)),e(i(oe+j)),e(s(re+Z)),"c"].join(" "))},N=function(j,Z,ae,de){for(var ge=2*Math.PI,me=Math.PI/2;Z>ae;)Z-=ge;var oe=Math.abs(ae-Z);oe<ge&&de&&(oe=ge-oe);for(var re=[],Te=de?-1:1,Le=Z;oe>1e-5;){var qe=Le+Te*Math.min(oe,me);re.push(J.call(this,j,Le,qe)),oe-=Math.abs(qe-Le),Le=qe}return re},J=function(j,Z,ae){var de=(ae-Z)/2,ge=j*Math.cos(de),me=j*Math.sin(de),oe=ge,re=-me,Te=oe*oe+re*re,Le=Te+oe*ge+re*me,qe=4/3*(Math.sqrt(2*Te*Le)-Le)/(oe*me-re*ge),se=oe-qe*re,le=re+qe*oe,he=se,ee=-le,be=de+Z,je=Math.cos(be),We=Math.sin(be);return{x1:j*Math.cos(Z),y1:j*Math.sin(Z),x2:se*je-le*We,y2:se*We+le*je,x3:he*je-ee*We,y3:he*We+ee*je,x4:j*Math.cos(ae),y4:j*Math.sin(ae)}},Y=function(j){return 180*j/Math.PI},ye=function(j,Z,ae,de,ge,me){var oe=j+.5*(ae-j),re=Z+.5*(de-Z),Te=ge+.5*(ae-ge),Le=me+.5*(de-me),qe=Math.min(j,ge,oe,Te),se=Math.max(j,ge,oe,Te),le=Math.min(Z,me,re,Le),he=Math.max(Z,me,re,Le);return new a(qe,le,se-qe,he-le)},Ce=function(j,Z,ae,de,ge,me,oe,re){var Te,Le,qe,se,le,he,ee,be,je,We,Qe,Je,st,Pt,Bt=ae-j,Ht=de-Z,Jt=ge-ae,fn=me-de,pn=oe-ge,et=re-me;for(Le=0;Le<41;Le++)je=(ee=(qe=j+(Te=Le/40)*Bt)+Te*((le=ae+Te*Jt)-qe))+Te*(le+Te*(ge+Te*pn-le)-ee),We=(be=(se=Z+Te*Ht)+Te*((he=de+Te*fn)-se))+Te*(he+Te*(me+Te*et-he)-be),Le==0?(Qe=je,Je=We,st=je,Pt=We):(Qe=Math.min(Qe,je),Je=Math.min(Je,We),st=Math.max(st,je),Pt=Math.max(Pt,We));return new a(Math.round(Qe),Math.round(Je),Math.round(st-Qe),Math.round(Pt-Je))},He=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var j,Z,ae=(j=this.ctx.lineDash,Z=this.ctx.lineDashOffset,JSON.stringify({lineDash:j,lineDashOffset:Z}));this.prevLineDash!==ae&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ae)}}})(Cr.API),function(t){var e=function(s){var o,a,l,c,d,p,v,m,x,E;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(d=((d=((d=((d=(d-(E=d%85))/85)-(x=d%85))/85)-(m=d%85))/85)-(v=d%85))/85)%85,a.push(p+33,v+33,m+33,x+33,E+33)):a.push(122);return function(T,D){for(var k=D;k>0;k--)T.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,c,d,p=String,v="length",m=255,x="charCodeAt",E="slice",T="replace";for(s[E](-2),s=s[E](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),l=[],c=0,d=(s+=o="uuuuu"[E](s[v]%5||5))[v];d>c;c+=5)a=52200625*(s[x](c)-33)+614125*(s[x](c+1)-33)+7225*(s[x](c+2)-33)+85*(s[x](c+3)-33)+(s[x](c+4)-33),l.push(m&a>>24,m&a>>16,m&a>>8,m&a);return function(D,k){for(var B=k;B>0;B--)D.pop()}(l,o[v]),p.fromCharCode.apply(p,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=fb(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(Cr.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,d){var p=new XMLHttpRequest,v=0,m=function(x){var E=x.length,T=[],D=String.fromCharCode;for(v=0;v<E;v+=1)T.push(D(255&x.charCodeAt(v)));return T.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?d(m(this.responseText)):d(void 0)}),p.send(null),c&&p.status===200)return m(p.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(Cr.API),function(t){function e(){return(Er.html2canvas?Promise.resolve(Er.html2canvas):Ch(()=>import("./html2canvas.esm.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Er.DOMPurify?Promise.resolve(Er.DOMPurify):Ch(()=>import("./purify.es.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Vi(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,d){for(var p=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),v=c.firstChild;v;v=v.nextSibling)d!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||p.appendChild(l(v,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(p.width=c.width,p.height=c.height,p.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(p.value=c.value),p.addEventListener("load",function(){p.scrollTop=c.scrollTop,p.scrollLeft=c.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var v=0;v<c.length;++v){var m=c[v],x=m.src.find(function(E){return E.format==="truetype"});x&&l.addFont(x.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||Cr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,d){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,c),p}).then(c,d).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(c,o,a);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Cr.getPageSize=function(o,a,l){if(Vi(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var d,p=(""+l).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+a}var m,x=0,E=0;if(v.hasOwnProperty(p))x=v[p][1]/d,E=v[p][0]/d;else try{x=l[1],E=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",E>x&&(m=E,E=x,x=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",x>E&&(m=E,E=x,x=m)}return{width:E,height:x,unit:a,k:d,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(bb):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(Cr.API),Cr.API.addJS=function(t){return y5=t,this.internal.events.subscribe("postPutResources",function(){m0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(m0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),v5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+y5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){m0!==void 0&&v5!==void 0&&this.internal.out("/Names <</JavaScript "+m0+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(s=0;s<c;s++){var p=n.internal.newObject();d.push(p);var v=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<d.length;s++)n.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Cr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(p){for(var v,m=256*p.charCodeAt(4)+p.charCodeAt(5),x=p.length,E={width:0,height:0,numcomponents:1},T=4;T<x;T+=2){if(T+=m,e.indexOf(p.charCodeAt(T+1))!==-1){v=256*p.charCodeAt(T+5)+p.charCodeAt(T+6),E={width:256*p.charCodeAt(T+7)+p.charCodeAt(T+8),height:v,numcomponents:p.charCodeAt(T+9)};break}m=256*p.charCodeAt(T+2)+p.charCodeAt(T+3)}return E}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}d={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return d}}(Cr.API);var $f,v0,b5,_5,w5,xV=function(){var t,e,n;function r(s){var o,a,l,c,d,p,v,m,x,E,T,D,k,B;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),x=(function(){var W,Q;for(Q=[],W=0;W<4;++W)Q.push(String.fromCharCode(this.data[this.pos++]));return Q}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),c=this.readUInt16()||100,p.delay=1e3*d/c,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,o-=4),s=(p!=null?p.data:void 0)||this.imgData,D=0;0<=o?D<o:D>o;0<=o?++D:--D)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((E=l-this.transparency.indexed.length)>0)for(k=0;0<=E?k<E:k>E;0<=E?++k:--k)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":v=(T=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,T.slice(0,v)),this.text[m]=String.fromCharCode.apply(String,T.slice(v+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(B=this.colorType)===4||B===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(p,v,m,x){var E,T,D,k,B,W,Q,pe,fe,O,U,q,R,$,X,K,F,N,J,Y,ye,Ce=Math.ceil((c.width-p)/m),He=Math.ceil((c.height-v)/x),j=c.width==Ce&&c.height==He;for($=o*Ce,q=j?a:new Uint8Array($*He),W=s.length,R=0,T=0;R<He&&l<W;){switch(s[l++]){case 0:for(k=F=0;F<$;k=F+=1)q[T++]=s[l++];break;case 1:for(k=N=0;N<$;k=N+=1)E=s[l++],B=k<o?0:q[T-o],q[T++]=(E+B)%256;break;case 2:for(k=J=0;J<$;k=J+=1)E=s[l++],D=(k-k%o)/o,X=R&&q[(R-1)*$+D*o+k%o],q[T++]=(X+E)%256;break;case 3:for(k=Y=0;Y<$;k=Y+=1)E=s[l++],D=(k-k%o)/o,B=k<o?0:q[T-o],X=R&&q[(R-1)*$+D*o+k%o],q[T++]=(E+Math.floor((B+X)/2))%256;break;case 4:for(k=ye=0;ye<$;k=ye+=1)E=s[l++],D=(k-k%o)/o,B=k<o?0:q[T-o],R===0?X=K=0:(X=q[(R-1)*$+D*o+k%o],K=D&&q[(R-1)*$+(D-1)*o+k%o]),Q=B+X-K,pe=Math.abs(Q-B),O=Math.abs(Q-X),U=Math.abs(Q-K),fe=pe<=O&&pe<=U?B:O<=U?X:K,q[T++]=(E+fe)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!j){var Z=((v+R*x)*c.width+p)*o,ae=R*$;for(k=0;k<Ce;k+=1){for(var de=0;de<o;de+=1)a[Z++]=q[ae++];Z+=(m-1)*o}}R++}}return s=eV(s),c.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,c,d,p,v,m;for(a=this.palette,d=this.transparency.indexed||[],c=new Uint8Array((d.length||0)+a.length),l=0,s=0,o=p=0,v=a.length;p<v;o=p+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(m=d[s++])!=null?m:255;return c},r.prototype.copyToImageData=function(s,o){var a,l,c,d,p,v,m,x,E,T,D;if(l=this.colors,E=null,a=this.hasAlphaChannel,this.palette.length&&(E=(D=this._decodedPalette)!=null?D:this._decodedPalette=this.decodePalette(),l=4,a=!0),x=(c=s.data||s).length,p=E||o,d=v=0,l===1)for(;d<x;)m=E?4*o[d/4]:v,T=p[m++],c[d++]=T,c[d++]=T,c[d++]=T,c[d++]=a?p[m++]:255,v=m;else for(;d<x;)m=E?4*o[d/4]:v,c[d++]=p[m++],c[d++]=p[m++],c[d++]=p[m++],c[d++]=a?p[m++]:255,v=m},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Er)==="[object Window]"){try{e=Er.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,c,d,p,v,m;if(this.animation){for(m=[],a=d=0,p=(v=this.animation.frames).length;d<p;a=++d)o=v[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,m.push(o.image=t(l));return m}},r.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,c,d,p,v=this;return a=0,p=this.animation,c=p.numFrames,l=p.frames,d=p.numPlays,(o=function(){var m,x;if(m=a++%c,x=l[m],v.renderFrame(s,m),c>1&&a/c<d)return v.animation._timeout=setTimeout(o,x.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function LV(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,d=[],p=0,v=null,m=0,x=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,x=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var E=t[e++];p=t[e++]|t[e++]<<8,v=t[e++],!(1&E)&&(v=null),m=E>>2&7,e++;break;case 254:for(;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var T=t[e++]|t[e++]<<8,D=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,B=t[e++]|t[e++]<<8,W=t[e++],Q=W>>6&1,pe=1<<(7&W)+1,fe=a,O=l,U=!1;W>>7&&(U=!0,fe=e,O=pe,e+=3*pe);var q=e;for(e++;;){var R;if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}d.push({x:T,y:D,width:k,height:B,has_local_palette:U,palette_offset:fe,palette_size:O,data_offset:q,data_length:e-q,transparent_index:v,interlaced:!!Q,delay:p,disposal:m});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return x},this.frameInfo=function($){if($<0||$>=d.length)throw new Error("Frame index out of range.");return d[$]},this.decodeAndBlitFrameBGRA=function($,X){var K=this.frameInfo($),F=K.width*K.height,N=new Uint8Array(F);x5(t,K.data_offset,N,F);var J=K.palette_offset,Y=K.transparent_index;Y===null&&(Y=256);var ye=K.width,Ce=n-ye,He=ye,j=4*(K.y*n+K.x),Z=4*((K.y+K.height)*n+K.x),ae=j,de=4*Ce;K.interlaced===!0&&(de+=4*n*7);for(var ge=8,me=0,oe=N.length;me<oe;++me){var re=N[me];if(He===0&&(He=ye,(ae+=de)>=Z&&(de=4*Ce+4*n*(ge-1),ae=j+(ye+Ce)*(ge<<1),ge>>=1)),re===Y)ae+=4;else{var Te=t[J+3*re],Le=t[J+3*re+1],qe=t[J+3*re+2];X[ae++]=qe,X[ae++]=Le,X[ae++]=Te,X[ae++]=255}--He}},this.decodeAndBlitFrameRGBA=function($,X){var K=this.frameInfo($),F=K.width*K.height,N=new Uint8Array(F);x5(t,K.data_offset,N,F);var J=K.palette_offset,Y=K.transparent_index;Y===null&&(Y=256);var ye=K.width,Ce=n-ye,He=ye,j=4*(K.y*n+K.x),Z=4*((K.y+K.height)*n+K.x),ae=j,de=4*Ce;K.interlaced===!0&&(de+=4*n*7);for(var ge=8,me=0,oe=N.length;me<oe;++me){var re=N[me];if(He===0&&(He=ye,(ae+=de)>=Z&&(de=4*Ce+4*n*(ge-1),ae=j+(ye+Ce)*(ge<<1),ge>>=1)),re===Y)ae+=4;else{var Te=t[J+3*re],Le=t[J+3*re+1],qe=t[J+3*re+2];X[ae++]=Te,X[ae++]=Le,X[ae++]=qe,X[ae++]=255}--He}}}function x5(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,d=0,p=0,v=0,m=t[e++],x=new Int32Array(4096),E=null;;){for(;d<16&&m!==0;)p|=t[e++]<<d,d+=8,m===1?m=t[e++]:--m;if(d<l)break;var T=p&c;if(p>>=l,d-=l,T!==s){if(T===o)break;for(var D=T<a?T:E,k=0,B=D;B>s;)B=x[B]>>8,++k;var W=B;if(v+k+(D!==T?1:0)>r)return void Qi.log("Warning, gif stream longer than expected.");n[v++]=W;var Q=v+=k;for(D!==T&&(n[v++]=W),B=D;k--;)B=x[B],n[--Q]=255&B,B>>=8;E!==null&&a<4096&&(x[a++]=E<<8|W,a>=c+1&&l<12&&(++l,c=c<<1|1)),E=T}else a=o+1,c=(1<<(l=i+1))-1,E=null}return v!==r&&Qi.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function X1(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),p=new Array(65535),v=new Array(65535),m=new Array(64),x=new Array(64),E=[],T=0,D=7,k=new Array(64),B=new Array(64),W=new Array(64),Q=new Array(256),pe=new Array(2048),fe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],O=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],$=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],X=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],F=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function N(j,Z){for(var ae=0,de=0,ge=new Array,me=1;me<=16;me++){for(var oe=1;oe<=j[me];oe++)ge[Z[de]]=[],ge[Z[de]][0]=ae,ge[Z[de]][1]=me,de++,ae++;ae*=2}return ge}function J(j){for(var Z=j[0],ae=j[1]-1;ae>=0;)Z&1<<ae&&(T|=1<<D),ae--,--D<0&&(T==255?(Y(255),Y(0)):Y(T),D=7,T=0)}function Y(j){E.push(j)}function ye(j){Y(j>>8&255),Y(255&j)}function Ce(j,Z,ae,de,ge){for(var me,oe=ge[0],re=ge[240],Te=function(We,Qe){var Je,st,Pt,Bt,Ht,Jt,fn,pn,et,ot,rt=0;for(et=0;et<8;++et){Je=We[rt],st=We[rt+1],Pt=We[rt+2],Bt=We[rt+3],Ht=We[rt+4],Jt=We[rt+5],fn=We[rt+6];var Ft=Je+(pn=We[rt+7]),Xt=Je-pn,Mn=st+fn,xn=st-fn,Cn=Pt+Jt,Vn=Pt-Jt,wn=Bt+Ht,sn=Bt-Ht,hn=Ft+wn,Qn=Ft-wn,ir=Mn+Cn,dr=Mn-Cn;We[rt]=hn+ir,We[rt+4]=hn-ir;var Fn=.707106781*(dr+Qn);We[rt+2]=Qn+Fn,We[rt+6]=Qn-Fn;var Mr=.382683433*((hn=sn+Vn)-(dr=xn+Xt)),ns=.5411961*hn+Mr,Pi=1.306562965*dr+Mr,Xs=.707106781*(ir=Vn+xn),ds=Xt+Xs,Yn=Xt-Xs;We[rt+5]=Yn+ns,We[rt+3]=Yn-ns,We[rt+1]=ds+Pi,We[rt+7]=ds-Pi,rt+=8}for(rt=0,et=0;et<8;++et){Je=We[rt],st=We[rt+8],Pt=We[rt+16],Bt=We[rt+24],Ht=We[rt+32],Jt=We[rt+40],fn=We[rt+48];var mt=Je+(pn=We[rt+56]),tt=Je-pn,Dt=st+fn,mn=st-fn,Vt=Pt+Jt,jn=Pt-Jt,vn=Bt+Ht,Ut=Bt-Ht,tn=mt+vn,Ln=mt-vn,zn=Dt+Vt,dn=Dt-Vt;We[rt]=tn+zn,We[rt+32]=tn-zn;var Zt=.707106781*(dn+Ln);We[rt+16]=Ln+Zt,We[rt+48]=Ln-Zt;var $n=.382683433*((tn=Ut+jn)-(dn=mn+tt)),yi=.5411961*tn+$n,or=1.306562965*dn+$n,di=.707106781*(zn=jn+mn),ur=tt+di,ar=tt-di;We[rt+40]=ar+yi,We[rt+24]=ar-yi,We[rt+8]=ur+or,We[rt+56]=ur-or,rt++}for(et=0;et<64;++et)ot=We[et]*Qe[et],m[et]=ot>0?ot+.5|0:ot-.5|0;return m}(j,Z),Le=0;Le<64;++Le)x[fe[Le]]=Te[Le];var qe=x[0]-ae;ae=x[0],qe==0?J(de[0]):(J(de[v[me=32767+qe]]),J(p[me]));for(var se=63;se>0&&x[se]==0;)se--;if(se==0)return J(oe),ae;for(var le,he=1;he<=se;){for(var ee=he;x[he]==0&&he<=se;)++he;var be=he-ee;if(be>=16){le=be>>4;for(var je=1;je<=le;++je)J(re);be&=15}me=32767+x[he],J(ge[(be<<4)+v[me]]),J(p[me]),he++}return se!=63&&J(oe),ae}function He(j){j=Math.min(Math.max(j,1),100),s!=j&&(function(Z){for(var ae=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],de=0;de<64;de++){var ge=o((ae[de]*Z+50)/100);ge=Math.min(Math.max(ge,1),255),a[fe[de]]=ge}for(var me=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],oe=0;oe<64;oe++){var re=o((me[oe]*Z+50)/100);re=Math.min(Math.max(re,1),255),l[fe[oe]]=re}for(var Te=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Le=0,qe=0;qe<8;qe++)for(var se=0;se<8;se++)c[Le]=1/(a[fe[Le]]*Te[qe]*Te[se]*8),d[Le]=1/(l[fe[Le]]*Te[qe]*Te[se]*8),Le++}(j<50?Math.floor(5e3/j):Math.floor(200-2*j)),s=j)}this.encode=function(j,Z){Z&&He(Z),E=new Array,T=0,D=7,ye(65496),ye(65504),ye(16),Y(74),Y(70),Y(73),Y(70),Y(0),Y(1),Y(1),Y(0),ye(1),ye(1),Y(0),Y(0),function(){ye(65499),ye(132),Y(0);for(var st=0;st<64;st++)Y(a[st]);Y(1);for(var Pt=0;Pt<64;Pt++)Y(l[Pt])}(),function(st,Pt){ye(65472),ye(17),Y(8),ye(Pt),ye(st),Y(3),Y(1),Y(17),Y(0),Y(2),Y(17),Y(1),Y(3),Y(17),Y(1)}(j.width,j.height),function(){ye(65476),ye(418),Y(0);for(var st=0;st<16;st++)Y(O[st+1]);for(var Pt=0;Pt<=11;Pt++)Y(U[Pt]);Y(16);for(var Bt=0;Bt<16;Bt++)Y(q[Bt+1]);for(var Ht=0;Ht<=161;Ht++)Y(R[Ht]);Y(1);for(var Jt=0;Jt<16;Jt++)Y($[Jt+1]);for(var fn=0;fn<=11;fn++)Y(X[fn]);Y(17);for(var pn=0;pn<16;pn++)Y(K[pn+1]);for(var et=0;et<=161;et++)Y(F[et])}(),ye(65498),ye(12),Y(3),Y(1),Y(0),Y(2),Y(17),Y(3),Y(17),Y(0),Y(63),Y(0);var ae=0,de=0,ge=0;T=0,D=7,this.encode.displayName="_encode_";for(var me,oe,re,Te,Le,qe,se,le,he,ee=j.data,be=j.width,je=j.height,We=4*be,Qe=0;Qe<je;){for(me=0;me<We;){for(Le=We*Qe+me,se=-1,le=0,he=0;he<64;he++)qe=Le+(le=he>>3)*We+(se=4*(7&he)),Qe+le>=je&&(qe-=We*(Qe+1+le-je)),me+se>=We&&(qe-=me+se-We+4),oe=ee[qe++],re=ee[qe++],Te=ee[qe++],k[he]=(pe[oe]+pe[re+256>>0]+pe[Te+512>>0]>>16)-128,B[he]=(pe[oe+768>>0]+pe[re+1024>>0]+pe[Te+1280>>0]>>16)-128,W[he]=(pe[oe+1280>>0]+pe[re+1536>>0]+pe[Te+1792>>0]>>16)-128;ae=Ce(k,c,ae,e,r),de=Ce(B,d,de,n,i),ge=Ce(W,d,ge,n,i),me+=32}Qe+=8}if(D>=0){var Je=[];Je[1]=D+1,Je[0]=(1<<D+1)-1,J(Je)}return ye(65497),new Uint8Array(E)},t=t||50,function(){for(var j=String.fromCharCode,Z=0;Z<256;Z++)Q[Z]=j(Z)}(),e=N(O,U),n=N($,X),r=N(q,R),i=N(K,F),function(){for(var j=1,Z=2,ae=1;ae<=15;ae++){for(var de=j;de<Z;de++)v[32767+de]=ae,p[32767+de]=[],p[32767+de][1]=ae,p[32767+de][0]=de;for(var ge=-(Z-1);ge<=-j;ge++)v[32767+ge]=ae,p[32767+ge]=[],p[32767+ge][1]=ae,p[32767+ge][0]=Z-1+ge;j<<=1,Z<<=1}}(),function(){for(var j=0;j<256;j++)pe[j]=19595*j,pe[j+256>>0]=38470*j,pe[j+512>>0]=7471*j+32768,pe[j+768>>0]=-11059*j,pe[j+1024>>0]=-21709*j,pe[j+1280>>0]=32768*j+8421375,pe[j+1536>>0]=-27439*j,pe[j+1792>>0]=-5329*j}(),He(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function lc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function L5(t){function e(O){if(!O)throw Error("assert :P")}function n(O,U,q){for(var R=0;4>R;R++)if(O[U+R]!=q.charCodeAt(R))return!0;return!1}function r(O,U,q,R,$){for(var X=0;X<$;X++)O[U+X]=q[R+X]}function i(O,U,q,R){for(var $=0;$<R;$++)O[U+$]=q}function s(O){return new Int32Array(O)}function o(O,U){for(var q=[],R=0;R<O;R++)q.push(new U);return q}function a(O,U){var q=[];return function R($,X,K){for(var F=K[X],N=0;N<F&&($.push(K.length>X+1?[]:new U),!(K.length<X+1));N++)R($[N],X+1,K)}(q,0,O),q}var l=function(){var O=this;function U(w,A){for(var G=1<<A-1>>>0;w&G;)G>>>=1;return G?(w&G-1)+G:w}function q(w,A,G,ce,xe){e(!(ce%G));do w[A+(ce-=G)]=xe;while(0<ce)}function R(w,A,G,ce,xe){if(e(2328>=xe),512>=xe)var Pe=s(512);else if((Pe=s(xe))==null)return 0;return function(Ae,Ie,Be,Ge,dt,Ot){var Nt,xt,qt=Ie,$t=1<<Be,ft=s(16),yt=s(16);for(e(dt!=0),e(Ge!=null),e(Ae!=null),e(0<Be),xt=0;xt<dt;++xt){if(15<Ge[xt])return 0;++ft[Ge[xt]]}if(ft[0]==dt)return 0;for(yt[1]=0,Nt=1;15>Nt;++Nt){if(ft[Nt]>1<<Nt)return 0;yt[Nt+1]=yt[Nt]+ft[Nt]}for(xt=0;xt<dt;++xt)Nt=Ge[xt],0<Ge[xt]&&(Ot[yt[Nt]++]=xt);if(yt[15]==1)return(Ge=new $).g=0,Ge.value=Ot[0],q(Ae,qt,1,$t,Ge),$t;var Qt,cn=-1,nn=$t-1,An=0,En=1,Zn=1,h=1<<Be;for(xt=0,Nt=1,dt=2;Nt<=Be;++Nt,dt<<=1){if(En+=Zn<<=1,0>(Zn-=ft[Nt]))return 0;for(;0<ft[Nt];--ft[Nt])(Ge=new $).g=Nt,Ge.value=Ot[xt++],q(Ae,qt+An,dt,h,Ge),An=U(An,Nt)}for(Nt=Be+1,dt=2;15>=Nt;++Nt,dt<<=1){if(En+=Zn<<=1,0>(Zn-=ft[Nt]))return 0;for(;0<ft[Nt];--ft[Nt]){if(Ge=new $,(An&nn)!=cn){for(qt+=h,Qt=1<<(cn=Nt)-Be;15>cn&&!(0>=(Qt-=ft[cn]));)++cn,Qt<<=1;$t+=h=1<<(Qt=cn-Be),Ae[Ie+(cn=An&nn)].g=Qt+Be,Ae[Ie+cn].value=qt-Ie-cn}Ge.g=Nt-Be,Ge.value=Ot[xt++],q(Ae,qt+(An>>Be),dt,h,Ge),An=U(An,Nt)}}return En!=2*yt[15]-1?0:$t}(w,A,G,ce,xe,Pe)}function $(){this.value=this.g=0}function X(){this.value=this.g=0}function K(){this.G=o(5,$),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ss,X)}function F(w,A,G,ce){e(w!=null),e(A!=null),e(2147483648>ce),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=A,w.pa=G,w.Jd=A,w.Yc=G+ce,w.Zc=4<=ce?G+ce-4+1:G,me(w)}function N(w,A){for(var G=0;0<A--;)G|=re(w,128)<<A;return G}function J(w,A){var G=N(w,A);return oe(w)?-G:G}function Y(w,A,G,ce){var xe,Pe=0;for(e(w!=null),e(A!=null),e(4294967288>ce),w.Sb=ce,w.Ra=0,w.u=0,w.h=0,4<ce&&(ce=4),xe=0;xe<ce;++xe)Pe+=A[G+xe]<<8*xe;w.Ra=Pe,w.bb=ce,w.oa=A,w.pa=G}function ye(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<po-8>>>0,++w.bb,w.u-=8;ae(w)&&(w.h=1,w.u=0)}function Ce(w,A){if(e(0<=A),!w.h&&A<=Io){var G=Z(w)&ca[A];return w.u+=A,ye(w),G}return w.h=1,w.u=0}function He(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function j(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Z(w){return w.Ra>>>(w.u&po-1)>>>0}function ae(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>po}function de(w,A){w.u=A,w.h=ae(w)}function ge(w){w.u>=Tl&&(e(w.u>=Tl),ye(w))}function me(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function oe(w){return N(w,1)}function re(w,A){var G=w.Ca;0>w.b&&me(w);var ce=w.b,xe=G*A>>>8,Pe=(w.I>>>ce>xe)+0;for(Pe?(G-=xe,w.I-=xe+1<<ce>>>0):G=xe+1,ce=G,xe=0;256<=ce;)xe+=8,ce>>=8;return ce=7^xe+Fs[ce],w.b-=ce,w.Ca=(G<<ce)-1,Pe}function Te(w,A,G){w[A+0]=G>>24&255,w[A+1]=G>>16&255,w[A+2]=G>>8&255,w[A+3]=G>>0&255}function Le(w,A){return w[A+0]<<0|w[A+1]<<8}function qe(w,A){return Le(w,A)|w[A+2]<<16}function se(w,A){return Le(w,A)|Le(w,A+2)<<16}function le(w,A){var G=1<<A;return e(w!=null),e(0<A),w.X=s(G),w.X==null?0:(w.Mb=32-A,w.Xa=A,1)}function he(w,A){e(w!=null),e(A!=null),e(w.Xa==A.Xa),r(A.X,0,w.X,0,1<<A.Xa)}function ee(){this.X=[],this.Xa=this.Mb=0}function be(w,A,G,ce){e(G!=null),e(ce!=null);var xe=G[0],Pe=ce[0];return xe==0&&(xe=(w*Pe+A/2)/A),Pe==0&&(Pe=(A*xe+w/2)/w),0>=xe||0>=Pe?0:(G[0]=xe,ce[0]=Pe,1)}function je(w,A){return w+(1<<A)-1>>>A}function We(w,A){return((4278255360&w)+(4278255360&A)>>>0&4278255360)+((16711935&w)+(16711935&A)>>>0&16711935)>>>0}function Qe(w,A){O[A]=function(G,ce,xe,Pe,Ae,Ie,Be){var Ge;for(Ge=0;Ge<Ae;++Ge){var dt=O[w](Ie[Be+Ge-1],xe,Pe+Ge);Ie[Be+Ge]=We(G[ce+Ge],dt)}}}function Je(){this.ud=this.hd=this.jd=0}function st(w,A){return((4278124286&(w^A))>>>1)+(w&A)>>>0}function Pt(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function Bt(w,A){return Pt(w+(w-A+.5>>1))}function Ht(w,A,G){return Math.abs(A-G)-Math.abs(w-G)}function Jt(w,A,G,ce,xe,Pe,Ae){for(ce=Pe[Ae-1],G=0;G<xe;++G)Pe[Ae+G]=ce=We(w[A+G],ce)}function fn(w,A,G,ce,xe){var Pe;for(Pe=0;Pe<G;++Pe){var Ae=w[A+Pe],Ie=Ae>>8&255,Be=16711935&(Be=(Be=16711935&Ae)+((Ie<<16)+Ie));ce[xe+Pe]=(4278255360&Ae)+Be>>>0}}function pn(w,A){A.jd=w>>0&255,A.hd=w>>8&255,A.ud=w>>16&255}function et(w,A,G,ce,xe,Pe){var Ae;for(Ae=0;Ae<ce;++Ae){var Ie=A[G+Ae],Be=Ie>>>8,Ge=Ie,dt=255&(dt=(dt=Ie>>>16)+((w.jd<<24>>24)*(Be<<24>>24)>>>5));Ge=255&(Ge=(Ge=Ge+((w.hd<<24>>24)*(Be<<24>>24)>>>5))+((w.ud<<24>>24)*(dt<<24>>24)>>>5)),xe[Pe+Ae]=(4278255360&Ie)+(dt<<16)+Ge}}function ot(w,A,G,ce,xe){O[A]=function(Pe,Ae,Ie,Be,Ge,dt,Ot,Nt,xt){for(Be=Ot;Be<Nt;++Be)for(Ot=0;Ot<xt;++Ot)Ge[dt++]=xe(Ie[ce(Pe[Ae++])])},O[w]=function(Pe,Ae,Ie,Be,Ge,dt,Ot){var Nt=8>>Pe.b,xt=Pe.Ea,qt=Pe.K[0],$t=Pe.w;if(8>Nt)for(Pe=(1<<Pe.b)-1,$t=(1<<Nt)-1;Ae<Ie;++Ae){var ft,yt=0;for(ft=0;ft<xt;++ft)ft&Pe||(yt=ce(Be[Ge++])),dt[Ot++]=xe(qt[yt&$t]),yt>>=Nt}else O["VP8LMapColor"+G](Be,Ge,qt,$t,dt,Ot,Ae,Ie,xt)}}function rt(w,A,G,ce,xe){for(G=A+G;A<G;){var Pe=w[A++];ce[xe++]=Pe>>16&255,ce[xe++]=Pe>>8&255,ce[xe++]=Pe>>0&255}}function Ft(w,A,G,ce,xe){for(G=A+G;A<G;){var Pe=w[A++];ce[xe++]=Pe>>16&255,ce[xe++]=Pe>>8&255,ce[xe++]=Pe>>0&255,ce[xe++]=Pe>>24&255}}function Xt(w,A,G,ce,xe){for(G=A+G;A<G;){var Pe=(Ae=w[A++])>>16&240|Ae>>12&15,Ae=Ae>>0&240|Ae>>28&15;ce[xe++]=Pe,ce[xe++]=Ae}}function Mn(w,A,G,ce,xe){for(G=A+G;A<G;){var Pe=(Ae=w[A++])>>16&248|Ae>>13&7,Ae=Ae>>5&224|Ae>>3&31;ce[xe++]=Pe,ce[xe++]=Ae}}function xn(w,A,G,ce,xe){for(G=A+G;A<G;){var Pe=w[A++];ce[xe++]=Pe>>0&255,ce[xe++]=Pe>>8&255,ce[xe++]=Pe>>16&255}}function Cn(w,A,G,ce,xe,Pe){if(Pe==0)for(G=A+G;A<G;)Te(ce,((Pe=w[A++])[0]>>24|Pe[1]>>8&65280|Pe[2]<<8&16711680|Pe[3]<<24)>>>0),xe+=32;else r(ce,xe,w,A,G)}function Vn(w,A){O[A][0]=O[w+"0"],O[A][1]=O[w+"1"],O[A][2]=O[w+"2"],O[A][3]=O[w+"3"],O[A][4]=O[w+"4"],O[A][5]=O[w+"5"],O[A][6]=O[w+"6"],O[A][7]=O[w+"7"],O[A][8]=O[w+"8"],O[A][9]=O[w+"9"],O[A][10]=O[w+"10"],O[A][11]=O[w+"11"],O[A][12]=O[w+"12"],O[A][13]=O[w+"13"],O[A][14]=O[w+"0"],O[A][15]=O[w+"0"]}function wn(w){return w==Cs||w==Es||w==ea||w==u}function sn(){this.eb=[],this.size=this.A=this.fb=0}function hn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Qn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new sn,this.f.kb=new hn,this.sd=null}function ir(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function dr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Fn(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function Mr(w,A){var G=w.T,ce=A.ba.f.RGBA,xe=ce.eb,Pe=ce.fb+w.ka*ce.A,Ae=Hs[A.ba.S],Ie=w.y,Be=w.O,Ge=w.f,dt=w.N,Ot=w.ea,Nt=w.W,xt=A.cc,qt=A.dc,$t=A.Mc,ft=A.Nc,yt=w.ka,Qt=w.ka+w.T,cn=w.U,nn=cn+1>>1;for(yt==0?Ae(Ie,Be,null,null,Ge,dt,Ot,Nt,Ge,dt,Ot,Nt,xe,Pe,null,null,cn):(Ae(A.ec,A.fc,Ie,Be,xt,qt,$t,ft,Ge,dt,Ot,Nt,xe,Pe-ce.A,xe,Pe,cn),++G);yt+2<Qt;yt+=2)xt=Ge,qt=dt,$t=Ot,ft=Nt,dt+=w.Rc,Nt+=w.Rc,Pe+=2*ce.A,Ae(Ie,(Be+=2*w.fa)-w.fa,Ie,Be,xt,qt,$t,ft,Ge,dt,Ot,Nt,xe,Pe-ce.A,xe,Pe,cn);return Be+=w.fa,w.j+Qt<w.o?(r(A.ec,A.fc,Ie,Be,cn),r(A.cc,A.dc,Ge,dt,nn),r(A.Mc,A.Nc,Ot,Nt,nn),G--):1&Qt||Ae(Ie,Be,null,null,Ge,dt,Ot,Nt,Ge,dt,Ot,Nt,xe,Pe+ce.A,null,null,cn),G}function ns(w,A,G){var ce=w.F,xe=[w.J];if(ce!=null){var Pe=w.U,Ae=A.ba.S,Ie=Ae==Qo||Ae==ea;A=A.ba.f.RGBA;var Be=[0],Ge=w.ka;Be[0]=w.T,w.Kb&&(Ge==0?--Be[0]:(--Ge,xe[0]-=w.width),w.j+w.ka+w.T==w.o&&(Be[0]=w.o-w.j-Ge));var dt=A.eb;Ge=A.fb+Ge*A.A,w=fi(ce,xe[0],w.width,Pe,Be,dt,Ge+(Ie?0:3),A.A),e(G==Be),w&&wn(Ae)&&Ss(dt,Ge,Ie,Pe,Be,A.A)}return 0}function Pi(w){var A=w.ma,G=A.ba.S,ce=11>G,xe=G==lr||G==Oa||G==Qo||G==no||G==12||wn(G);if(A.memory=null,A.Ib=null,A.Jb=null,A.Nd=null,!Zu(A.Oa,w,xe?11:12))return 0;if(xe&&wn(G)&&un(),w.da)alert("todo:use_scaling");else{if(ce){if(A.Ib=Fn,w.Kb){if(G=w.U+1>>1,A.memory=s(w.U+2*G),A.memory==null)return 0;A.ec=A.memory,A.fc=0,A.cc=A.ec,A.dc=A.fc+w.U,A.Mc=A.cc,A.Nc=A.dc+G,A.Ib=Mr,un()}}else alert("todo:EmitYUV");xe&&(A.Jb=ns,ce&&Lt())}if(ce&&!Mc){for(w=0;256>w;++w)Fh[w]=89858*(w-128)+ll>>Rh,jh[w]=-22014*(w-128)+ll,Op[w]=-45773*(w-128),lu[w]=113618*(w-128)+ll>>Rh;for(w=rh;w<Ed;++w)A=76283*(w-16)+ll>>Rh,zh[w-rh]=Tr(A,255),wf[w-rh]=Tr(A+8>>4,15);Mc=1}return 1}function Xs(w){var A=w.ma,G=w.U,ce=w.T;return e(!(1&w.ka)),0>=G||0>=ce?0:(G=A.Ib(w,A),A.Jb!=null&&A.Jb(w,A,G),A.Dc+=G,1)}function ds(w){w.ma.memory=null}function Yn(w,A,G,ce){return Ce(w,8)!=47?0:(A[0]=Ce(w,14)+1,G[0]=Ce(w,14)+1,ce[0]=Ce(w,1),Ce(w,3)!=0?0:!w.h)}function mt(w,A){if(4>w)return w+1;var G=w-2>>1;return(2+(1&w)<<G)+Ce(A,G)+1}function tt(w,A){return 120<A?A-120:1<=(G=((G=at[A-1])>>4)*w+(8-(15&G)))?G:1;var G}function Dt(w,A,G){var ce=Z(G),xe=w[A+=255&ce].g-8;return 0<xe&&(de(G,G.u+8),ce=Z(G),A+=w[A].value,A+=ce&(1<<xe)-1),de(G,G.u+w[A].g),w[A].value}function mn(w,A,G){return G.g+=w.g,G.value+=w.value<<A>>>0,e(8>=G.g),w.g}function Vt(w,A,G){var ce=w.xc;return e((A=ce==0?0:w.vc[w.md*(G>>ce)+(A>>ce)])<w.Wb),w.Ya[A]}function jn(w,A,G,ce){var xe=w.ab,Pe=w.c*A,Ae=w.C;A=Ae+A;var Ie=G,Be=ce;for(ce=w.Ta,G=w.Ua;0<xe--;){var Ge=w.gc[xe],dt=Ae,Ot=A,Nt=Ie,xt=Be,qt=(Be=ce,Ie=G,Ge.Ea);switch(e(dt<Ot),e(Ot<=Ge.nc),Ge.hc){case 2:Ec(Nt,xt,(Ot-dt)*qt,Be,Ie);break;case 0:var $t=dt,ft=Ot,yt=Be,Qt=Ie,cn=(h=Ge).Ea;$t==0&&(Qs(Nt,xt,null,null,1,yt,Qt),Jt(Nt,xt+1,0,0,cn-1,yt,Qt+1),xt+=cn,Qt+=cn,++$t);for(var nn=1<<h.b,An=nn-1,En=je(cn,h.b),Zn=h.K,h=h.w+($t>>h.b)*En;$t<ft;){var g=Zn,_=h,S=1;for(eo(Nt,xt,yt,Qt-cn,1,yt,Qt);S<cn;){var P=(S&~An)+nn;P>cn&&(P=cn),(0,Aa[g[_++]>>8&15])(Nt,xt+ +S,yt,Qt+S-cn,P-S,yt,Qt+S),S=P}xt+=cn,Qt+=cn,++$t&An||(h+=En)}Ot!=Ge.nc&&r(Be,Ie-qt,Be,Ie+(Ot-dt-1)*qt,qt);break;case 1:for(qt=Nt,ft=xt,cn=(Nt=Ge.Ea)-(Qt=Nt&~(yt=(xt=1<<Ge.b)-1)),$t=je(Nt,Ge.b),nn=Ge.K,Ge=Ge.w+(dt>>Ge.b)*$t;dt<Ot;){for(An=nn,En=Ge,Zn=new Je,h=ft+Qt,g=ft+Nt;ft<h;)pn(An[En++],Zn),Ta(Zn,qt,ft,xt,Be,Ie),ft+=xt,Ie+=xt;ft<g&&(pn(An[En++],Zn),Ta(Zn,qt,ft,cn,Be,Ie),ft+=cn,Ie+=cn),++dt&yt||(Ge+=$t)}break;case 3:if(Nt==Be&&xt==Ie&&0<Ge.b){for(ft=Be,Nt=qt=Ie+(Ot-dt)*qt-(Qt=(Ot-dt)*je(Ge.Ea,Ge.b)),xt=Be,yt=Ie,$t=[],Qt=(cn=Qt)-1;0<=Qt;--Qt)$t[Qt]=xt[yt+Qt];for(Qt=cn-1;0<=Qt;--Qt)ft[Nt+Qt]=$t[Qt];gs(Ge,dt,Ot,Be,qt,Be,Ie)}else gs(Ge,dt,Ot,Nt,xt,Be,Ie)}Ie=ce,Be=G}Be!=G&&r(ce,G,Ie,Be,Pe)}function vn(w,A){var G=w.V,ce=w.Ba+w.c*w.C,xe=A-w.C;if(e(A<=w.l.o),e(16>=xe),0<xe){var Pe=w.l,Ae=w.Ta,Ie=w.Ua,Be=Pe.width;if(jn(w,xe,G,ce),xe=Ie=[Ie],e((G=w.C)<(ce=A)),e(Pe.v<Pe.va),ce>Pe.o&&(ce=Pe.o),G<Pe.j){var Ge=Pe.j-G;G=Pe.j,xe[0]+=Ge*Be}if(G>=ce?G=0:(xe[0]+=4*Pe.v,Pe.ka=G-Pe.j,Pe.U=Pe.va-Pe.v,Pe.T=ce-G,G=1),G){if(Ie=Ie[0],11>(G=w.ca).S){var dt=G.f.RGBA,Ot=(ce=G.S,xe=Pe.U,Pe=Pe.T,Ge=dt.eb,dt.A),Nt=Pe;for(dt=dt.fb+w.Ma*dt.A;0<Nt--;){var xt=Ae,qt=Ie,$t=xe,ft=Ge,yt=dt;switch(ce){case mo:$s(xt,qt,$t,ft,yt);break;case lr:Ls(xt,qt,$t,ft,yt);break;case Cs:Ls(xt,qt,$t,ft,yt),Ss(ft,yt,0,$t,1,0);break;case Ia:Us(xt,qt,$t,ft,yt);break;case Oa:Cn(xt,qt,$t,ft,yt,1);break;case Es:Cn(xt,qt,$t,ft,yt,1),Ss(ft,yt,0,$t,1,0);break;case Qo:Cn(xt,qt,$t,ft,yt,0);break;case ea:Cn(xt,qt,$t,ft,yt,0),Ss(ft,yt,1,$t,1,0);break;case no:ha(xt,qt,$t,ft,yt);break;case u:ha(xt,qt,$t,ft,yt),ai(ft,yt,$t,1,0);break;case th:Oo(xt,qt,$t,ft,yt);break;default:e(0)}Ie+=Be,dt+=Ot}w.Ma+=Pe}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=G.height)}}w.C=A,e(w.C<=w.i)}function Ut(w){var A;if(0<w.ua)return 0;for(A=0;A<w.Wb;++A){var G=w.Ya[A].G,ce=w.Ya[A].H;if(0<G[1][ce[1]+0].g||0<G[2][ce[2]+0].g||0<G[3][ce[3]+0].g)return 0}return 1}function tn(w,A,G,ce,xe,Pe){if(w.Z!=0){var Ae=w.qd,Ie=w.rd;for(e(Qr[w.Z]!=null);A<G;++A)Qr[w.Z](Ae,Ie,ce,xe,ce,xe,Pe),Ae=ce,Ie=xe,xe+=Pe;w.qd=Ae,w.rd=Ie}}function Ln(w,A){var G=w.l.ma,ce=G.Z==0||G.Z==1?w.l.j:w.C;if(ce=w.C<ce?ce:w.C,e(A<=w.l.o),A>ce){var xe=w.l.width,Pe=G.ca,Ae=G.tb+xe*ce,Ie=w.V,Be=w.Ba+w.c*ce,Ge=w.gc;e(w.ab==1),e(Ge[0].hc==3),js(Ge[0],ce,A,Ie,Be,Pe,Ae),tn(G,ce,A,Pe,Ae,xe)}w.C=w.Ma=A}function zn(w,A,G,ce,xe,Pe,Ae){var Ie=w.$/ce,Be=w.$%ce,Ge=w.m,dt=w.s,Ot=G+w.$,Nt=Ot;xe=G+ce*xe;var xt=G+ce*Pe,qt=280+dt.ua,$t=w.Pb?Ie:16777216,ft=0<dt.ua?dt.Wa:null,yt=dt.wc,Qt=Ot<xt?Vt(dt,Be,Ie):null;e(w.C<Pe),e(xt<=xe);var cn=!1;e:for(;;){for(;cn||Ot<xt;){var nn=0;if(Ie>=$t){var An=Ot-G;e(($t=w).Pb),$t.wd=$t.m,$t.xd=An,0<$t.s.ua&&he($t.s.Wa,$t.s.vb),$t=Ie+zt}if(Be&yt||(Qt=Vt(dt,Be,Ie)),e(Qt!=null),Qt.Qb&&(A[Ot]=Qt.qb,cn=!0),!cn)if(ge(Ge),Qt.jc){nn=Ge,An=A;var En=Ot,Zn=Qt.pd[Z(nn)&ss-1];e(Qt.jc),256>Zn.g?(de(nn,nn.u+Zn.g),An[En]=Zn.value,nn=0):(de(nn,nn.u+Zn.g-256),e(256<=Zn.value),nn=Zn.value),nn==0&&(cn=!0)}else nn=Dt(Qt.G[0],Qt.H[0],Ge);if(Ge.h)break;if(cn||256>nn){if(!cn)if(Qt.nd)A[Ot]=(Qt.qb|nn<<8)>>>0;else{if(ge(Ge),cn=Dt(Qt.G[1],Qt.H[1],Ge),ge(Ge),An=Dt(Qt.G[2],Qt.H[2],Ge),En=Dt(Qt.G[3],Qt.H[3],Ge),Ge.h)break;A[Ot]=(En<<24|cn<<16|nn<<8|An)>>>0}if(cn=!1,++Ot,++Be>=ce&&(Be=0,++Ie,Ae!=null&&Ie<=Pe&&!(Ie%16)&&Ae(w,Ie),ft!=null))for(;Nt<Ot;)nn=A[Nt++],ft.X[(506832829*nn&4294967295)>>>ft.Mb]=nn}else if(280>nn){if(nn=mt(nn-256,Ge),An=Dt(Qt.G[4],Qt.H[4],Ge),ge(Ge),An=tt(ce,An=mt(An,Ge)),Ge.h)break;if(Ot-G<An||xe-Ot<nn)break e;for(En=0;En<nn;++En)A[Ot+En]=A[Ot+En-An];for(Ot+=nn,Be+=nn;Be>=ce;)Be-=ce,++Ie,Ae!=null&&Ie<=Pe&&!(Ie%16)&&Ae(w,Ie);if(e(Ot<=xe),Be&yt&&(Qt=Vt(dt,Be,Ie)),ft!=null)for(;Nt<Ot;)nn=A[Nt++],ft.X[(506832829*nn&4294967295)>>>ft.Mb]=nn}else{if(!(nn<qt))break e;for(cn=nn-280,e(ft!=null);Nt<Ot;)nn=A[Nt++],ft.X[(506832829*nn&4294967295)>>>ft.Mb]=nn;nn=Ot,e(!(cn>>>(An=ft).Xa)),A[nn]=An.X[cn],cn=!0}cn||e(Ge.h==ae(Ge))}if(w.Pb&&Ge.h&&Ot<xe)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&he(w.s.vb,w.s.Wa);else{if(Ge.h)break e;Ae!=null&&Ae(w,Ie>Pe?Pe:Ie),w.a=0,w.$=Ot-G}return 1}return w.a=3,0}function dn(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var A=w.Wa;A!=null&&(A.X=null),w.vb=null,e(w!=null)}function Zt(){var w=new Pl;return w==null?null:(w.a=0,w.xb=Pu,Vn("Predictor","VP8LPredictors"),Vn("Predictor","VP8LPredictors_C"),Vn("PredictorAdd","VP8LPredictorsAdd"),Vn("PredictorAdd","VP8LPredictorsAdd_C"),Ec=fn,Ta=et,$s=rt,Ls=Ft,ha=Xt,Oo=Mn,Us=xn,O.VP8LMapColor32b=ka,O.VP8LMapColor8b=zs,w)}function $n(w,A,G,ce,xe){var Pe=1,Ae=[w],Ie=[A],Be=ce.m,Ge=ce.s,dt=null,Ot=0;e:for(;;){if(G)for(;Pe&&Ce(Be,1);){var Nt=Ae,xt=Ie,qt=ce,$t=1,ft=qt.m,yt=qt.gc[qt.ab],Qt=Ce(ft,2);if(qt.Oc&1<<Qt)Pe=0;else{switch(qt.Oc|=1<<Qt,yt.hc=Qt,yt.Ea=Nt[0],yt.nc=xt[0],yt.K=[null],++qt.ab,e(4>=qt.ab),Qt){case 0:case 1:yt.b=Ce(ft,3)+2,$t=$n(je(yt.Ea,yt.b),je(yt.nc,yt.b),0,qt,yt.K),yt.K=yt.K[0];break;case 3:var cn,nn=Ce(ft,8)+1,An=16<nn?0:4<nn?1:2<nn?2:3;if(Nt[0]=je(yt.Ea,An),yt.b=An,cn=$t=$n(nn,1,0,qt,yt.K)){var En,Zn=nn,h=yt,g=1<<(8>>h.b),_=s(g);if(_==null)cn=0;else{var S=h.K[0],P=h.w;for(_[0]=h.K[0][0],En=1;En<1*Zn;++En)_[En]=We(S[P+En],_[En-1]);for(;En<4*g;++En)_[En]=0;h.K[0]=null,h.K[0]=_,cn=1}}$t=cn;break;case 2:break;default:e(0)}Pe=$t}}if(Ae=Ae[0],Ie=Ie[0],Pe&&Ce(Be,1)&&!(Pe=1<=(Ot=Ce(Be,4))&&11>=Ot)){ce.a=3;break e}var V;if(V=Pe)t:{var te,ie,ve,Ee=ce,Ze=Ae,Ve=Ie,vt=Ot,At=G,Kt=Ee.m,yn=Ee.s,Sn=[null],sr=1,Ke=0,nt=Mt[vt];n:for(;;){if(At&&Ce(Kt,1)){var ht=Ce(Kt,3)+2,Rt=je(Ze,ht),wt=je(Ve,ht),It=Rt*wt;if(!$n(Rt,wt,0,Ee,Sn))break n;for(Sn=Sn[0],yn.xc=ht,te=0;te<It;++te){var _e=Sn[te]>>8&65535;Sn[te]=_e,_e>=sr&&(sr=_e+1)}}if(Kt.h)break n;for(ie=0;5>ie;++ie){var ke=H[ie];!ie&&0<vt&&(ke+=1<<vt),Ke<ke&&(Ke=ke)}var Fe=o(sr*nt,$),Re=sr,$e=o(Re,K);if($e==null)var Ue=null;else e(65536>=Re),Ue=$e;var lt=s(Ke);if(Ue==null||lt==null||Fe==null){Ee.a=1;break n}var ut=Fe;for(te=ve=0;te<sr;++te){var pt=Ue[te],St=pt.G,Ct=pt.H,rn=0,Bn=1,Un=0;for(ie=0;5>ie;++ie){ke=H[ie],St[ie]=ut,Ct[ie]=ve,!ie&&0<vt&&(ke+=1<<vt);i:{var Xn,ei=ke,pi=Ee,zr=lt,wi=ut,bo=ve,Qu=0,ya=pi.m,Md=Ce(ya,1);if(i(zr,0,0,ei),Md){var ul=Ce(ya,1)+1,Pc=Ce(ya,1),ba=Ce(ya,Pc==0?1:8);zr[ba]=1,ul==2&&(zr[ba=Ce(ya,8)]=1);var Gs=1}else{var Xi=s(19),Ef=Ce(ya,4)+4;if(19<Ef){pi.a=3;var Pd=0;break i}for(Xn=0;Xn<Ef;++Xn)Xi[Me[Xn]]=Ce(ya,3);var kd=void 0,Ad=void 0,Mf=pi,qr=Xi,Pf=ei,Im=zr,ih=0,ec=Mf.m,Om=8,Nm=o(128,$);r:for(;R(Nm,0,7,qr,19);){if(Ce(ec,1)){var Dl=2+2*Ce(ec,3);if((kd=2+Ce(ec,Dl))>Pf)break r}else kd=Pf;for(Ad=0;Ad<Pf&&kd--;){ge(ec);var Bm=Nm[0+(127&Z(ec))];de(ec,ec.u+Bm.g);var tc=Bm.value;if(16>tc)Im[Ad++]=tc,tc!=0&&(Om=tc);else{var Np=tc==16,Bp=tc-16,Rm=M[Bp],Ba=Ce(ec,y[Bp])+Rm;if(Ad+Ba>Pf)break r;for(var kc=Np?Om:0;0<Ba--;)Im[Ad++]=kc}}ih=1;break r}ih||(Mf.a=3),Gs=ih}(Gs=Gs&&!ya.h)&&(Qu=R(wi,bo,8,zr,ei)),Gs&&Qu!=0?Pd=Qu:(pi.a=3,Pd=0)}if(Pd==0)break n;if(Bn&&ue[ie]==1&&(Bn=ut[ve].g==0),rn+=ut[ve].g,ve+=Pd,3>=ie){var sh,kf=lt[0];for(sh=1;sh<ke;++sh)lt[sh]>kf&&(kf=lt[sh]);Un+=kf}}if(pt.nd=Bn,pt.Qb=0,Bn&&(pt.qb=(St[3][Ct[3]+0].value<<24|St[1][Ct[1]+0].value<<16|St[2][Ct[2]+0].value)>>>0,rn==0&&256>St[0][Ct[0]+0].value&&(pt.Qb=1,pt.qb+=St[0][Ct[0]+0].value<<8)),pt.jc=!pt.Qb&&6>Un,pt.jc){var oh,ku=pt;for(oh=0;oh<ss;++oh){var Au=oh,nc=ku.pd[Au],$h=ku.G[0][ku.H[0]+Au];256<=$h.value?(nc.g=$h.g+256,nc.value=$h.value):(nc.g=0,nc.value=0,Au>>=mn($h,8,nc),Au>>=mn(ku.G[1][ku.H[1]+Au],16,nc),Au>>=mn(ku.G[2][ku.H[2]+Au],0,nc),mn(ku.G[3][ku.H[3]+Au],24,nc))}}}yn.vc=Sn,yn.Wb=sr,yn.Ya=Ue,yn.yc=Fe,V=1;break t}V=0}if(!(Pe=V)){ce.a=3;break e}if(0<Ot){if(Ge.ua=1<<Ot,!le(Ge.Wa,Ot)){ce.a=1,Pe=0;break e}}else Ge.ua=0;var Td=ce,rc=Ae,Uy=Ie,Tu=Td.s,Af=Tu.xc;if(Td.c=rc,Td.i=Uy,Tu.md=je(rc,Af),Tu.wc=Af==0?-1:(1<<Af)-1,G){ce.xb=Cd;break e}if((dt=s(Ae*Ie))==null){ce.a=1,Pe=0;break e}Pe=(Pe=zn(ce,dt,0,Ae,Ie,Ie,null))&&!Be.h;break e}return Pe?(xe!=null?xe[0]=dt:(e(dt==null),e(G)),ce.$=0,G||dn(Ge)):dn(Ge),Pe}function yi(w,A){var G=w.c*w.i,ce=G+A+16*A;return e(w.c<=A),w.V=s(ce),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+G+A,1)}function or(w,A){var G=w.C,ce=A-G,xe=w.V,Pe=w.Ba+w.c*G;for(e(A<=w.l.o);0<ce;){var Ae=16<ce?16:ce,Ie=w.l.ma,Be=w.l.width,Ge=Be*Ae,dt=Ie.ca,Ot=Ie.tb+Be*G,Nt=w.Ta,xt=w.Ua;jn(w,Ae,xe,Pe),Zi(Nt,xt,dt,Ot,Ge),tn(Ie,G,G+Ae,dt,Ot,Be),ce-=Ae,xe+=Ae*w.c,G+=Ae}e(G==A),w.C=w.Ma=A}function di(){this.ub=this.yd=this.td=this.Rb=0}function ur(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ar(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Gi(){this.Yb=function(){var w=[];return function A(G,ce,xe){for(var Pe=xe[ce],Ae=0;Ae<Pe&&(G.push(xe.length>ce+1?[]:0),!(xe.length<ce+1));Ae++)A(G[Ae],ce+1,xe)}(w,0,[3,11]),w}()}function Ri(){this.jb=s(3),this.Wc=a([4,8],Gi),this.Xc=a([4,17],Gi)}function Fi(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function rs(){this.ld=this.La=this.dd=this.tc=0}function fs(){this.Na=this.la=0}function ws(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Is(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Os(){this.uc=this.M=this.Nb=0,this.wa=Array(new rs),this.Y=0,this.ya=Array(new Is),this.aa=0,this.l=new Si}function cr(){this.y=s(16),this.f=s(8),this.ea=s(8)}function gr(){this.cb=this.a=0,this.sc="",this.m=new He,this.Od=new di,this.Kc=new ur,this.ed=new Fi,this.Qa=new ar,this.Ic=this.$c=this.Aa=0,this.D=new Os,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,He),this.ia=0,this.pb=o(4,ws),this.Pa=new Ri,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new cr),this.Hd=0,this.rb=Array(new fs),this.sb=0,this.wa=Array(new rs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Is),this.L=this.aa=0,this.gd=a([4,2],rs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Si(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Pr(){var w=new gr;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,Kn||(Kn=Go)),w}function mr(w,A,G){return w.a==0&&(w.a=A,w.sc=G,w.cb=0),0}function Qa(w,A,G){return 3<=G&&w[A+0]==157&&w[A+1]==1&&w[A+2]==42}function Sa(w,A){if(w==null)return 0;if(w.a=0,w.sc="OK",A==null)return mr(w,2,"null VP8Io passed to VP8GetHeaders()");var G=A.data,ce=A.w,xe=A.ha;if(4>xe)return mr(w,7,"Truncated header.");var Pe=G[ce+0]|G[ce+1]<<8|G[ce+2]<<16,Ae=w.Od;if(Ae.Rb=!(1&Pe),Ae.td=Pe>>1&7,Ae.yd=Pe>>4&1,Ae.ub=Pe>>5,3<Ae.td)return mr(w,3,"Incorrect keyframe parameters.");if(!Ae.yd)return mr(w,4,"Frame not displayable.");ce+=3,xe-=3;var Ie=w.Kc;if(Ae.Rb){if(7>xe)return mr(w,7,"cannot parse picture header");if(!Qa(G,ce,xe))return mr(w,3,"Bad code word");Ie.c=16383&(G[ce+4]<<8|G[ce+3]),Ie.Td=G[ce+4]>>6,Ie.i=16383&(G[ce+6]<<8|G[ce+5]),Ie.Ud=G[ce+6]>>6,ce+=7,xe-=7,w.za=Ie.c+15>>4,w.Ub=Ie.i+15>>4,A.width=Ie.c,A.height=Ie.i,A.Da=0,A.j=0,A.v=0,A.va=A.width,A.o=A.height,A.da=0,A.ib=A.width,A.hb=A.height,A.U=A.width,A.T=A.height,i((Pe=w.Pa).jb,0,255,Pe.jb.length),e((Pe=w.Qa)!=null),Pe.Cb=0,Pe.Bb=0,Pe.Fb=1,i(Pe.Zb,0,0,Pe.Zb.length),i(Pe.Lb,0,0,Pe.Lb)}if(Ae.ub>xe)return mr(w,7,"bad partition length");F(Pe=w.m,G,ce,Ae.ub),ce+=Ae.ub,xe-=Ae.ub,Ae.Rb&&(Ie.Ld=oe(Pe),Ie.Kd=oe(Pe)),Ie=w.Qa;var Be,Ge=w.Pa;if(e(Pe!=null),e(Ie!=null),Ie.Cb=oe(Pe),Ie.Cb){if(Ie.Bb=oe(Pe),oe(Pe)){for(Ie.Fb=oe(Pe),Be=0;4>Be;++Be)Ie.Zb[Be]=oe(Pe)?J(Pe,7):0;for(Be=0;4>Be;++Be)Ie.Lb[Be]=oe(Pe)?J(Pe,6):0}if(Ie.Bb)for(Be=0;3>Be;++Be)Ge.jb[Be]=oe(Pe)?N(Pe,8):255}else Ie.Bb=0;if(Pe.Ka)return mr(w,3,"cannot parse segment header");if((Ie=w.ed).zd=oe(Pe),Ie.Tb=N(Pe,6),Ie.wb=N(Pe,3),Ie.Pc=oe(Pe),Ie.Pc&&oe(Pe)){for(Ge=0;4>Ge;++Ge)oe(Pe)&&(Ie.vd[Ge]=J(Pe,6));for(Ge=0;4>Ge;++Ge)oe(Pe)&&(Ie.od[Ge]=J(Pe,6))}if(w.L=Ie.Tb==0?0:Ie.zd?1:2,Pe.Ka)return mr(w,3,"cannot parse filter header");var dt=xe;if(xe=Be=ce,ce=Be+dt,Ie=dt,w.Xb=(1<<N(w.m,2))-1,dt<3*(Ge=w.Xb))G=7;else{for(Be+=3*Ge,Ie-=3*Ge,dt=0;dt<Ge;++dt){var Ot=G[xe+0]|G[xe+1]<<8|G[xe+2]<<16;Ot>Ie&&(Ot=Ie),F(w.Jc[+dt],G,Be,Ot),Be+=Ot,Ie-=Ot,xe+=3}F(w.Jc[+Ge],G,Be,Ie),G=Be<ce?0:5}if(G!=0)return mr(w,G,"cannot parse partitions");for(G=N(Be=w.m,7),xe=oe(Be)?J(Be,4):0,ce=oe(Be)?J(Be,4):0,Ie=oe(Be)?J(Be,4):0,Ge=oe(Be)?J(Be,4):0,Be=oe(Be)?J(Be,4):0,dt=w.Qa,Ot=0;4>Ot;++Ot){if(dt.Cb){var Nt=dt.Zb[Ot];dt.Fb||(Nt+=G)}else{if(0<Ot){w.pb[Ot]=w.pb[0];continue}Nt=G}var xt=w.pb[Ot];xt.Sc[0]=on[Tr(Nt+xe,127)],xt.Sc[1]=Dn[Tr(Nt+0,127)],xt.Eb[0]=2*on[Tr(Nt+ce,127)],xt.Eb[1]=101581*Dn[Tr(Nt+Ie,127)]>>16,8>xt.Eb[1]&&(xt.Eb[1]=8),xt.Qc[0]=on[Tr(Nt+Ge,117)],xt.Qc[1]=Dn[Tr(Nt+Be,127)],xt.lc=Nt+Be}if(!Ae.Rb)return mr(w,4,"Not a key frame.");for(oe(Pe),Ae=w.Pa,G=0;4>G;++G){for(xe=0;8>xe;++xe)for(ce=0;3>ce;++ce)for(Ie=0;11>Ie;++Ie)Ge=re(Pe,vo[G][xe][ce][Ie])?N(Pe,8):Ms[G][xe][ce][Ie],Ae.Wc[G][xe].Yb[ce][Ie]=Ge;for(xe=0;17>xe;++xe)Ae.Xc[G][xe]=Ae.Wc[G][nh[xe]]}return w.kc=oe(Pe),w.kc&&(w.Bd=N(Pe,8)),w.cb=1}function Go(w,A,G,ce,xe,Pe,Ae){var Ie=A[xe].Yb[G];for(G=0;16>xe;++xe){if(!re(w,Ie[G+0]))return xe;for(;!re(w,Ie[G+1]);)if(Ie=A[++xe].Yb[0],G=0,xe==16)return 16;var Be=A[xe+1].Yb;if(re(w,Ie[G+2])){var Ge=w,dt=0;if(re(Ge,(Nt=Ie)[(Ot=G)+3]))if(re(Ge,Nt[Ot+6])){for(Ie=0,Ot=2*(dt=re(Ge,Nt[Ot+8]))+(Nt=re(Ge,Nt[Ot+9+dt])),dt=0,Nt=kr[Ot];Nt[Ie];++Ie)dt+=dt+re(Ge,Nt[Ie]);dt+=3+(8<<Ot)}else re(Ge,Nt[Ot+7])?(dt=7+2*re(Ge,165),dt+=re(Ge,145)):dt=5+re(Ge,159);else dt=re(Ge,Nt[Ot+4])?3+re(Ge,Nt[Ot+5]):2;Ie=Be[2]}else dt=1,Ie=Be[1];Be=Ae+as[xe],0>(Ge=w).b&&me(Ge);var Ot,Nt=Ge.b,xt=(Ot=Ge.Ca>>1)-(Ge.I>>Nt)>>31;--Ge.b,Ge.Ca+=xt,Ge.Ca|=1,Ge.I-=(Ot+1&xt)<<Nt,Pe[Be]=((dt^xt)-xt)*ce[(0<xe)+0]}return 16}function Jl(w){var A=w.rb[w.sb-1];A.la=0,A.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function br(w,A){if(w==null)return 0;if(A==null)return mr(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!Sa(w,A))return 0;if(e(w.cb),A.ac==null||A.ac(A)){A.ob&&(w.L=0);var G=Na[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=A.v-G>>4,w.zb=A.j-G>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=A.o+15+G>>4,w.Hb=A.va+15+G>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var ce=w.ed;for(G=0;4>G;++G){var xe;if(w.Qa.Cb){var Pe=w.Qa.Lb[G];w.Qa.Fb||(Pe+=ce.Tb)}else Pe=ce.Tb;for(xe=0;1>=xe;++xe){var Ae=w.gd[G][xe],Ie=Pe;if(ce.Pc&&(Ie+=ce.vd[0],xe&&(Ie+=ce.od[0])),0<(Ie=0>Ie?0:63<Ie?63:Ie)){var Be=Ie;0<ce.wb&&(Be=4<ce.wb?Be>>2:Be>>1)>9-ce.wb&&(Be=9-ce.wb),1>Be&&(Be=1),Ae.dd=Be,Ae.tc=2*Ie+Be,Ae.ld=40<=Ie?2:15<=Ie?1:0}else Ae.tc=0;Ae.La=xe}}}G=0}else mr(w,6,"Frame setup failed"),G=w.a;if(G=G==0){if(G){w.$c=0,0<w.Aa||(w.Ic=Sf);e:{G=w.Ic,ce=4*(Be=w.za);var Ge=32*Be,dt=Be+1,Ot=0<w.L?Be*(0<w.Aa?2:1):0,Nt=(w.Aa==2?2:1)*Be;if((Ae=ce+832+(xe=3*(16*G+Na[w.L])/2*Ge)+(Pe=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=Ae)G=0;else{if(Ae>w.Vb){if(w.Vb=0,w.Ec=s(Ae),w.Fc=0,w.Ec==null){G=mr(w,1,"no memory during frame initialization.");break e}w.Vb=Ae}Ae=w.Ec,Ie=w.Fc,w.Ac=Ae,w.Bc=Ie,Ie+=ce,w.Gd=o(Ge,cr),w.Hd=0,w.rb=o(dt+1,fs),w.sb=1,w.wa=Ot?o(Ot,rs):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=Be),e(!0),w.oc=Ae,w.pc=Ie,Ie+=832,w.ya=o(Nt,Is),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=Be),w.R=16*Be,w.B=8*Be,Be=(Ge=Na[w.L])*w.R,Ge=Ge/2*w.B,w.sa=Ae,w.ta=Ie+Be,w.qa=w.sa,w.ra=w.ta+16*G*w.R+Ge,w.Ha=w.qa,w.Ia=w.ra+8*G*w.B+Ge,w.$c=0,Ie+=xe,w.mb=Pe?Ae:null,w.nb=Pe?Ie:null,e(Ie+Pe<=w.Fc+w.Vb),Jl(w),i(w.Ac,w.Bc,0,ce),G=1}}if(G){if(A.ka=0,A.y=w.sa,A.O=w.ta,A.f=w.qa,A.N=w.ra,A.ea=w.Ha,A.Vd=w.Ia,A.fa=w.R,A.Rc=w.B,A.F=null,A.J=0,!Xu){for(G=-255;255>=G;++G)_i[255+G]=0>G?-G:G;for(G=-1020;1020>=G;++G)No[1020+G]=-128>G?-128:127<G?127:G;for(G=-112;112>=G;++G)go[112+G]=-16>G?-16:15<G?15:G;for(G=-255;510>=G;++G)jo[255+G]=0>G?0:255<G?255:G;Xu=1}bt=tl,Gt=Ll,kn=Ca,Hn=ji,pr=Wo,kt=Wu,Ai=Eu,oi=la,au=Fo,to=su,Ti=ru,da=iu,Da=ri,fa=Cc,pa=Wi,ga=nr,jr=qi,Jo=Ml,ta[0]=Wr,ta[1]=xu,ta[2]=_r,ta[3]=Yo,ta[4]=Yu,ta[5]=Cl,ta[6]=Sl,ta[7]=Ko,ta[8]=Ku,ta[9]=il,va[0]=Ql,va[1]=qu,va[2]=qo,va[3]=Ea,va[4]=ps,va[5]=Lc,va[6]=Lu,zo[0]=sl,zo[1]=nl,zo[2]=eu,zo[3]=vr,zo[4]=tu,zo[5]=Sc,zo[6]=Su,G=1}else G=0}G&&(G=function(xt,qt){for(xt.M=0;xt.M<xt.Va;++xt.M){var $t,ft=xt.Jc[xt.M&xt.Xb],yt=xt.m,Qt=xt;for($t=0;$t<Qt.za;++$t){var cn=yt,nn=Qt,An=nn.Ac,En=nn.Bc+4*$t,Zn=nn.zc,h=nn.ya[nn.aa+$t];if(nn.Qa.Bb?h.$b=re(cn,nn.Pa.jb[0])?2+re(cn,nn.Pa.jb[2]):re(cn,nn.Pa.jb[1]):h.$b=0,nn.kc&&(h.Ad=re(cn,nn.Bd)),h.Za=!re(cn,145)+0,h.Za){var g=h.Ob,_=0;for(nn=0;4>nn;++nn){var S,P=Zn[0+nn];for(S=0;4>S;++S){P=Di[An[En+S]][P];for(var V=zi[re(cn,P[0])];0<V;)V=zi[2*V+re(cn,P[V])];P=-V,An[En+S]=P}r(g,_,An,En,4),_+=4,Zn[0+nn]=P}}else P=re(cn,156)?re(cn,128)?1:3:re(cn,163)?2:0,h.Ob[0]=P,i(An,En,P,4),i(Zn,0,P,4);h.Dd=re(cn,142)?re(cn,114)?re(cn,183)?1:3:2:0}if(Qt.m.Ka)return mr(xt,7,"Premature end-of-partition0 encountered.");for(;xt.ja<xt.za;++xt.ja){if(Qt=ft,cn=(yt=xt).rb[yt.sb-1],An=yt.rb[yt.sb+yt.ja],$t=yt.ya[yt.aa+yt.ja],En=yt.kc?$t.Ad:0)cn.la=An.la=0,$t.Za||(cn.Na=An.Na=0),$t.Hc=0,$t.Gc=0,$t.ia=0;else{var te,ie;if(cn=An,An=Qt,En=yt.Pa.Xc,Zn=yt.ya[yt.aa+yt.ja],h=yt.pb[Zn.$b],nn=Zn.ad,g=0,_=yt.rb[yt.sb-1],P=S=0,i(nn,g,0,384),Zn.Za)var ve=0,Ee=En[3];else{V=s(16);var Ze=cn.Na+_.Na;if(Ze=Kn(An,En[1],Ze,h.Eb,0,V,0),cn.Na=_.Na=(0<Ze)+0,1<Ze)bt(V,0,nn,g);else{var Ve=V[0]+3>>3;for(V=0;256>V;V+=16)nn[g+V]=Ve}ve=1,Ee=En[0]}var vt=15&cn.la,At=15&_.la;for(V=0;4>V;++V){var Kt=1&At;for(Ve=ie=0;4>Ve;++Ve)vt=vt>>1|(Kt=(Ze=Kn(An,Ee,Ze=Kt+(1&vt),h.Sc,ve,nn,g))>ve)<<7,ie=ie<<2|(3<Ze?3:1<Ze?2:nn[g+0]!=0),g+=16;vt>>=4,At=At>>1|Kt<<7,S=(S<<8|ie)>>>0}for(Ee=vt,ve=At>>4,te=0;4>te;te+=2){for(ie=0,vt=cn.la>>4+te,At=_.la>>4+te,V=0;2>V;++V){for(Kt=1&At,Ve=0;2>Ve;++Ve)Ze=Kt+(1&vt),vt=vt>>1|(Kt=0<(Ze=Kn(An,En[2],Ze,h.Qc,0,nn,g)))<<3,ie=ie<<2|(3<Ze?3:1<Ze?2:nn[g+0]!=0),g+=16;vt>>=2,At=At>>1|Kt<<5}P|=ie<<4*te,Ee|=vt<<4<<te,ve|=(240&At)<<te}cn.la=Ee,_.la=ve,Zn.Hc=S,Zn.Gc=P,Zn.ia=43690&P?0:h.ia,En=!(S|P)}if(0<yt.L&&(yt.wa[yt.Y+yt.ja]=yt.gd[$t.$b][$t.Za],yt.wa[yt.Y+yt.ja].La|=!En),Qt.Ka)return mr(xt,7,"Premature end-of-file encountered.")}if(Jl(xt),yt=qt,Qt=1,$t=(ft=xt).D,cn=0<ft.L&&ft.M>=ft.zb&&ft.M<=ft.Va,ft.Aa==0)e:{if($t.M=ft.M,$t.uc=cn,Mu(ft,$t),Qt=1,$t=(ie=ft.D).Nb,cn=(P=Na[ft.L])*ft.R,An=P/2*ft.B,V=16*$t*ft.R,Ve=8*$t*ft.B,En=ft.sa,Zn=ft.ta-cn+V,h=ft.qa,nn=ft.ra-An+Ve,g=ft.Ha,_=ft.Ia-An+Ve,At=(vt=ie.M)==0,S=vt>=ft.Va-1,ft.Aa==2&&Mu(ft,ie),ie.uc)for(Kt=(Ze=ft).D.M,e(Ze.D.uc),ie=Ze.yb;ie<Ze.Hb;++ie){ve=ie,Ee=Kt;var yn=(Sn=(ke=Ze).D).Nb;te=ke.R;var Sn=Sn.wa[Sn.Y+ve],sr=ke.sa,Ke=ke.ta+16*yn*te+16*ve,nt=Sn.dd,ht=Sn.tc;if(ht!=0)if(e(3<=ht),ke.L==1)0<ve&&ga(sr,Ke,te,ht+4),Sn.La&&Jo(sr,Ke,te,ht),0<Ee&&pa(sr,Ke,te,ht+4),Sn.La&&jr(sr,Ke,te,ht);else{var Rt=ke.B,wt=ke.qa,It=ke.ra+8*yn*Rt+8*ve,_e=ke.Ha,ke=ke.Ia+8*yn*Rt+8*ve;yn=Sn.ld,0<ve&&(oi(sr,Ke,te,ht+4,nt,yn),to(wt,It,_e,ke,Rt,ht+4,nt,yn)),Sn.La&&(da(sr,Ke,te,ht,nt,yn),fa(wt,It,_e,ke,Rt,ht,nt,yn)),0<Ee&&(Ai(sr,Ke,te,ht+4,nt,yn),au(wt,It,_e,ke,Rt,ht+4,nt,yn)),Sn.La&&(Ti(sr,Ke,te,ht,nt,yn),Da(wt,It,_e,ke,Rt,ht,nt,yn))}}if(ft.ia&&alert("todo:DitherRow"),yt.put!=null){if(ie=16*vt,vt=16*(vt+1),At?(yt.y=ft.sa,yt.O=ft.ta+V,yt.f=ft.qa,yt.N=ft.ra+Ve,yt.ea=ft.Ha,yt.W=ft.Ia+Ve):(ie-=P,yt.y=En,yt.O=Zn,yt.f=h,yt.N=nn,yt.ea=g,yt.W=_),S||(vt-=P),vt>yt.o&&(vt=yt.o),yt.F=null,yt.J=null,ft.Fa!=null&&0<ft.Fa.length&&ie<vt&&(yt.J=Yi(ft,yt,ie,vt-ie),yt.F=ft.mb,yt.F==null&&yt.F.length==0)){Qt=mr(ft,3,"Could not decode alpha data.");break e}ie<yt.j&&(P=yt.j-ie,ie=yt.j,e(!(1&P)),yt.O+=ft.R*P,yt.N+=ft.B*(P>>1),yt.W+=ft.B*(P>>1),yt.F!=null&&(yt.J+=yt.width*P)),ie<vt&&(yt.O+=yt.v,yt.N+=yt.v>>1,yt.W+=yt.v>>1,yt.F!=null&&(yt.J+=yt.v),yt.ka=ie-yt.j,yt.U=yt.va-yt.v,yt.T=vt-ie,Qt=yt.put(yt))}$t+1!=ft.Ic||S||(r(ft.sa,ft.ta-cn,En,Zn+16*ft.R,cn),r(ft.qa,ft.ra-An,h,nn+8*ft.B,An),r(ft.Ha,ft.Ia-An,g,_+8*ft.B,An))}if(!Qt)return mr(xt,6,"Output aborted.")}return 1}(w,A)),A.bc!=null&&A.bc(A),G&=1}return G?(w.cb=0,G):0}function Kr(w,A,G,ce,xe){xe=w[A+G+32*ce]+(xe>>3),w[A+G+32*ce]=-256&xe?0>xe?0:255:xe}function el(w,A,G,ce,xe,Pe){Kr(w,A,0,G,ce+xe),Kr(w,A,1,G,ce+Pe),Kr(w,A,2,G,ce-Pe),Kr(w,A,3,G,ce-xe)}function Ns(w){return(20091*w>>16)+w}function Bs(w,A,G,ce){var xe,Pe=0,Ae=s(16);for(xe=0;4>xe;++xe){var Ie=w[A+0]+w[A+8],Be=w[A+0]-w[A+8],Ge=(35468*w[A+4]>>16)-Ns(w[A+12]),dt=Ns(w[A+4])+(35468*w[A+12]>>16);Ae[Pe+0]=Ie+dt,Ae[Pe+1]=Be+Ge,Ae[Pe+2]=Be-Ge,Ae[Pe+3]=Ie-dt,Pe+=4,A++}for(xe=Pe=0;4>xe;++xe)Ie=(w=Ae[Pe+0]+4)+Ae[Pe+8],Be=w-Ae[Pe+8],Ge=(35468*Ae[Pe+4]>>16)-Ns(Ae[Pe+12]),Kr(G,ce,0,0,Ie+(dt=Ns(Ae[Pe+4])+(35468*Ae[Pe+12]>>16))),Kr(G,ce,1,0,Be+Ge),Kr(G,ce,2,0,Be-Ge),Kr(G,ce,3,0,Ie-dt),Pe++,ce+=32}function Wu(w,A,G,ce){var xe=w[A+0]+4,Pe=35468*w[A+4]>>16,Ae=Ns(w[A+4]),Ie=35468*w[A+1]>>16;el(G,ce,0,xe+Ae,w=Ns(w[A+1]),Ie),el(G,ce,1,xe+Pe,w,Ie),el(G,ce,2,xe-Pe,w,Ie),el(G,ce,3,xe-Ae,w,Ie)}function Ll(w,A,G,ce,xe){Bs(w,A,G,ce),xe&&Bs(w,A+16,G,ce+4)}function Ca(w,A,G,ce){Gt(w,A+0,G,ce,1),Gt(w,A+32,G,ce+128,1)}function ji(w,A,G,ce){var xe;for(w=w[A+0]+4,xe=0;4>xe;++xe)for(A=0;4>A;++A)Kr(G,ce,A,xe,w)}function Wo(w,A,G,ce){w[A+0]&&Hn(w,A+0,G,ce),w[A+16]&&Hn(w,A+16,G,ce+4),w[A+32]&&Hn(w,A+32,G,ce+128),w[A+48]&&Hn(w,A+48,G,ce+128+4)}function tl(w,A,G,ce){var xe,Pe=s(16);for(xe=0;4>xe;++xe){var Ae=w[A+0+xe]+w[A+12+xe],Ie=w[A+4+xe]+w[A+8+xe],Be=w[A+4+xe]-w[A+8+xe],Ge=w[A+0+xe]-w[A+12+xe];Pe[0+xe]=Ae+Ie,Pe[8+xe]=Ae-Ie,Pe[4+xe]=Ge+Be,Pe[12+xe]=Ge-Be}for(xe=0;4>xe;++xe)Ae=(w=Pe[0+4*xe]+3)+Pe[3+4*xe],Ie=Pe[1+4*xe]+Pe[2+4*xe],Be=Pe[1+4*xe]-Pe[2+4*xe],Ge=w-Pe[3+4*xe],G[ce+0]=Ae+Ie>>3,G[ce+16]=Ge+Be>>3,G[ce+32]=Ae-Ie>>3,G[ce+48]=Ge-Be>>3,ce+=64}function Ao(w,A,G){var ce,xe=A-32,Pe=bi,Ae=255-w[xe-1];for(ce=0;ce<G;++ce){var Ie,Be=Pe,Ge=Ae+w[A-1];for(Ie=0;Ie<G;++Ie)w[A+Ie]=Be[Ge+w[xe+Ie]];A+=32}}function xu(w,A){Ao(w,A,4)}function nl(w,A){Ao(w,A,8)}function qu(w,A){Ao(w,A,16)}function qo(w,A){var G;for(G=0;16>G;++G)r(w,A+32*G,w,A-32,16)}function Ea(w,A){var G;for(G=16;0<G;--G)i(w,A,w[A-1],16),A+=32}function rl(w,A,G){var ce;for(ce=0;16>ce;++ce)i(A,G+32*ce,w,16)}function Ql(w,A){var G,ce=16;for(G=0;16>G;++G)ce+=w[A-1+32*G]+w[A+G-32];rl(ce>>5,w,A)}function ps(w,A){var G,ce=8;for(G=0;16>G;++G)ce+=w[A-1+32*G];rl(ce>>4,w,A)}function Lc(w,A){var G,ce=8;for(G=0;16>G;++G)ce+=w[A+G-32];rl(ce>>4,w,A)}function Lu(w,A){rl(128,w,A)}function fr(w,A,G){return w+2*A+G+2>>2}function _r(w,A){var G,ce=A-32;for(ce=new Uint8Array([fr(w[ce-1],w[ce+0],w[ce+1]),fr(w[ce+0],w[ce+1],w[ce+2]),fr(w[ce+1],w[ce+2],w[ce+3]),fr(w[ce+2],w[ce+3],w[ce+4])]),G=0;4>G;++G)r(w,A+32*G,ce,0,ce.length)}function Yo(w,A){var G=w[A-1],ce=w[A-1+32],xe=w[A-1+64],Pe=w[A-1+96];Te(w,A+0,16843009*fr(w[A-1-32],G,ce)),Te(w,A+32,16843009*fr(G,ce,xe)),Te(w,A+64,16843009*fr(ce,xe,Pe)),Te(w,A+96,16843009*fr(xe,Pe,Pe))}function Wr(w,A){var G,ce=4;for(G=0;4>G;++G)ce+=w[A+G-32]+w[A-1+32*G];for(ce>>=3,G=0;4>G;++G)i(w,A+32*G,ce,4)}function Yu(w,A){var G=w[A-1+0],ce=w[A-1+32],xe=w[A-1+64],Pe=w[A-1-32],Ae=w[A+0-32],Ie=w[A+1-32],Be=w[A+2-32],Ge=w[A+3-32];w[A+0+96]=fr(ce,xe,w[A-1+96]),w[A+1+96]=w[A+0+64]=fr(G,ce,xe),w[A+2+96]=w[A+1+64]=w[A+0+32]=fr(Pe,G,ce),w[A+3+96]=w[A+2+64]=w[A+1+32]=w[A+0+0]=fr(Ae,Pe,G),w[A+3+64]=w[A+2+32]=w[A+1+0]=fr(Ie,Ae,Pe),w[A+3+32]=w[A+2+0]=fr(Be,Ie,Ae),w[A+3+0]=fr(Ge,Be,Ie)}function Sl(w,A){var G=w[A+1-32],ce=w[A+2-32],xe=w[A+3-32],Pe=w[A+4-32],Ae=w[A+5-32],Ie=w[A+6-32],Be=w[A+7-32];w[A+0+0]=fr(w[A+0-32],G,ce),w[A+1+0]=w[A+0+32]=fr(G,ce,xe),w[A+2+0]=w[A+1+32]=w[A+0+64]=fr(ce,xe,Pe),w[A+3+0]=w[A+2+32]=w[A+1+64]=w[A+0+96]=fr(xe,Pe,Ae),w[A+3+32]=w[A+2+64]=w[A+1+96]=fr(Pe,Ae,Ie),w[A+3+64]=w[A+2+96]=fr(Ae,Ie,Be),w[A+3+96]=fr(Ie,Be,Be)}function Cl(w,A){var G=w[A-1+0],ce=w[A-1+32],xe=w[A-1+64],Pe=w[A-1-32],Ae=w[A+0-32],Ie=w[A+1-32],Be=w[A+2-32],Ge=w[A+3-32];w[A+0+0]=w[A+1+64]=Pe+Ae+1>>1,w[A+1+0]=w[A+2+64]=Ae+Ie+1>>1,w[A+2+0]=w[A+3+64]=Ie+Be+1>>1,w[A+3+0]=Be+Ge+1>>1,w[A+0+96]=fr(xe,ce,G),w[A+0+64]=fr(ce,G,Pe),w[A+0+32]=w[A+1+96]=fr(G,Pe,Ae),w[A+1+32]=w[A+2+96]=fr(Pe,Ae,Ie),w[A+2+32]=w[A+3+96]=fr(Ae,Ie,Be),w[A+3+32]=fr(Ie,Be,Ge)}function Ko(w,A){var G=w[A+0-32],ce=w[A+1-32],xe=w[A+2-32],Pe=w[A+3-32],Ae=w[A+4-32],Ie=w[A+5-32],Be=w[A+6-32],Ge=w[A+7-32];w[A+0+0]=G+ce+1>>1,w[A+1+0]=w[A+0+64]=ce+xe+1>>1,w[A+2+0]=w[A+1+64]=xe+Pe+1>>1,w[A+3+0]=w[A+2+64]=Pe+Ae+1>>1,w[A+0+32]=fr(G,ce,xe),w[A+1+32]=w[A+0+96]=fr(ce,xe,Pe),w[A+2+32]=w[A+1+96]=fr(xe,Pe,Ae),w[A+3+32]=w[A+2+96]=fr(Pe,Ae,Ie),w[A+3+64]=fr(Ae,Ie,Be),w[A+3+96]=fr(Ie,Be,Ge)}function il(w,A){var G=w[A-1+0],ce=w[A-1+32],xe=w[A-1+64],Pe=w[A-1+96];w[A+0+0]=G+ce+1>>1,w[A+2+0]=w[A+0+32]=ce+xe+1>>1,w[A+2+32]=w[A+0+64]=xe+Pe+1>>1,w[A+1+0]=fr(G,ce,xe),w[A+3+0]=w[A+1+32]=fr(ce,xe,Pe),w[A+3+32]=w[A+1+64]=fr(xe,Pe,Pe),w[A+3+64]=w[A+2+64]=w[A+0+96]=w[A+1+96]=w[A+2+96]=w[A+3+96]=Pe}function Ku(w,A){var G=w[A-1+0],ce=w[A-1+32],xe=w[A-1+64],Pe=w[A-1+96],Ae=w[A-1-32],Ie=w[A+0-32],Be=w[A+1-32],Ge=w[A+2-32];w[A+0+0]=w[A+2+32]=G+Ae+1>>1,w[A+0+32]=w[A+2+64]=ce+G+1>>1,w[A+0+64]=w[A+2+96]=xe+ce+1>>1,w[A+0+96]=Pe+xe+1>>1,w[A+3+0]=fr(Ie,Be,Ge),w[A+2+0]=fr(Ae,Ie,Be),w[A+1+0]=w[A+3+32]=fr(G,Ae,Ie),w[A+1+32]=w[A+3+64]=fr(ce,G,Ae),w[A+1+64]=w[A+3+96]=fr(xe,ce,G),w[A+1+96]=fr(Pe,xe,ce)}function eu(w,A){var G;for(G=0;8>G;++G)r(w,A+32*G,w,A-32,8)}function vr(w,A){var G;for(G=0;8>G;++G)i(w,A,w[A-1],8),A+=32}function Or(w,A,G){var ce;for(ce=0;8>ce;++ce)i(A,G+32*ce,w,8)}function sl(w,A){var G,ce=8;for(G=0;8>G;++G)ce+=w[A+G-32]+w[A-1+32*G];Or(ce>>4,w,A)}function Sc(w,A){var G,ce=4;for(G=0;8>G;++G)ce+=w[A+G-32];Or(ce>>3,w,A)}function tu(w,A){var G,ce=4;for(G=0;8>G;++G)ce+=w[A-1+32*G];Or(ce>>3,w,A)}function Su(w,A){Or(128,w,A)}function El(w,A,G){var ce=w[A-G],xe=w[A+0],Pe=3*(xe-ce)+ma[1020+w[A-2*G]-w[A+G]],Ae=os[112+(Pe+4>>3)];w[A-G]=bi[255+ce+os[112+(Pe+3>>3)]],w[A+0]=bi[255+xe-Ae]}function nu(w,A,G,ce){var xe=w[A+0],Pe=w[A+G];return Vs[255+w[A-2*G]-w[A-G]]>ce||Vs[255+Pe-xe]>ce}function Cu(w,A,G,ce){return 4*Vs[255+w[A-G]-w[A+0]]+Vs[255+w[A-2*G]-w[A+G]]<=ce}function Fr(w,A,G,ce,xe){var Pe=w[A-3*G],Ae=w[A-2*G],Ie=w[A-G],Be=w[A+0],Ge=w[A+G],dt=w[A+2*G],Ot=w[A+3*G];return 4*Vs[255+Ie-Be]+Vs[255+Ae-Ge]>ce?0:Vs[255+w[A-4*G]-Pe]<=xe&&Vs[255+Pe-Ae]<=xe&&Vs[255+Ae-Ie]<=xe&&Vs[255+Ot-dt]<=xe&&Vs[255+dt-Ge]<=xe&&Vs[255+Ge-Be]<=xe}function Wi(w,A,G,ce){var xe=2*ce+1;for(ce=0;16>ce;++ce)Cu(w,A+ce,G,xe)&&El(w,A+ce,G)}function nr(w,A,G,ce){var xe=2*ce+1;for(ce=0;16>ce;++ce)Cu(w,A+ce*G,1,xe)&&El(w,A+ce*G,1)}function qi(w,A,G,ce){var xe;for(xe=3;0<xe;--xe)Wi(w,A+=4*G,G,ce)}function Ml(w,A,G,ce){var xe;for(xe=3;0<xe;--xe)nr(w,A+=4,G,ce)}function Ma(w,A,G,ce,xe,Pe,Ae,Ie){for(Pe=2*Pe+1;0<xe--;){if(Fr(w,A,G,Pe,Ae))if(nu(w,A,G,Ie))El(w,A,G);else{var Be=w,Ge=A,dt=G,Ot=Be[Ge-2*dt],Nt=Be[Ge-dt],xt=Be[Ge+0],qt=Be[Ge+dt],$t=Be[Ge+2*dt],ft=27*(Qt=ma[1020+3*(xt-Nt)+ma[1020+Ot-qt]])+63>>7,yt=18*Qt+63>>7,Qt=9*Qt+63>>7;Be[Ge-3*dt]=bi[255+Be[Ge-3*dt]+Qt],Be[Ge-2*dt]=bi[255+Ot+yt],Be[Ge-dt]=bi[255+Nt+ft],Be[Ge+0]=bi[255+xt-ft],Be[Ge+dt]=bi[255+qt-yt],Be[Ge+2*dt]=bi[255+$t-Qt]}A+=ce}}function ki(w,A,G,ce,xe,Pe,Ae,Ie){for(Pe=2*Pe+1;0<xe--;){if(Fr(w,A,G,Pe,Ae))if(nu(w,A,G,Ie))El(w,A,G);else{var Be=w,Ge=A,dt=G,Ot=Be[Ge-dt],Nt=Be[Ge+0],xt=Be[Ge+dt],qt=os[112+(($t=3*(Nt-Ot))+4>>3)],$t=os[112+($t+3>>3)],ft=qt+1>>1;Be[Ge-2*dt]=bi[255+Be[Ge-2*dt]+ft],Be[Ge-dt]=bi[255+Ot+$t],Be[Ge+0]=bi[255+Nt-qt],Be[Ge+dt]=bi[255+xt-ft]}A+=ce}}function Eu(w,A,G,ce,xe,Pe){Ma(w,A,G,1,16,ce,xe,Pe)}function la(w,A,G,ce,xe,Pe){Ma(w,A,1,G,16,ce,xe,Pe)}function ru(w,A,G,ce,xe,Pe){var Ae;for(Ae=3;0<Ae;--Ae)ki(w,A+=4*G,G,1,16,ce,xe,Pe)}function iu(w,A,G,ce,xe,Pe){var Ae;for(Ae=3;0<Ae;--Ae)ki(w,A+=4,1,G,16,ce,xe,Pe)}function Fo(w,A,G,ce,xe,Pe,Ae,Ie){Ma(w,A,xe,1,8,Pe,Ae,Ie),Ma(G,ce,xe,1,8,Pe,Ae,Ie)}function su(w,A,G,ce,xe,Pe,Ae,Ie){Ma(w,A,1,xe,8,Pe,Ae,Ie),Ma(G,ce,1,xe,8,Pe,Ae,Ie)}function ri(w,A,G,ce,xe,Pe,Ae,Ie){ki(w,A+4*xe,xe,1,8,Pe,Ae,Ie),ki(G,ce+4*xe,xe,1,8,Pe,Ae,Ie)}function Cc(w,A,G,ce,xe,Pe,Ae,Ie){ki(w,A+4,1,xe,8,Pe,Ae,Ie),ki(G,ce+4,1,xe,8,Pe,Ae,Ie)}function xs(){this.ba=new Qn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new dr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Zo(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ou(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Xo(){this.ua=0,this.Wa=new ee,this.vb=new ee,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new K,this.yc=new $}function Pl(){this.xb=this.a=0,this.l=new Si,this.ca=new Qn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new j,this.Pb=0,this.wd=new j,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Xo,this.ab=0,this.gc=o(4,ou),this.Oc=0}function kl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Si,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ii(w,A,G,ce,xe,Pe,Ae){for(w=w==null?0:w[A+0],A=0;A<Ae;++A)xe[Pe+A]=w+G[ce+A]&255,w=xe[Pe+A]}function To(w,A,G,ce,xe,Pe,Ae){var Ie;if(w==null)ii(null,null,G,ce,xe,Pe,Ae);else for(Ie=0;Ie<Ae;++Ie)xe[Pe+Ie]=w[A+Ie]+G[ce+Ie]&255}function Pa(w,A,G,ce,xe,Pe,Ae){if(w==null)ii(null,null,G,ce,xe,Pe,Ae);else{var Ie,Be=w[A+0],Ge=Be,dt=Be;for(Ie=0;Ie<Ae;++Ie)Ge=dt+(Be=w[A+Ie])-Ge,dt=G[ce+Ie]+(-256&Ge?0>Ge?0:255:Ge)&255,Ge=Be,xe[Pe+Ie]=dt}}function Yi(w,A,G,ce){var xe=A.width,Pe=A.o;if(e(w!=null&&A!=null),0>G||0>=ce||G+ce>Pe)return null;if(!w.Cc){if(w.ga==null){var Ae;if(w.ga=new kl,(Ae=w.ga==null)||(Ae=A.width*A.o,e(w.Gb.length==0),w.Gb=s(Ae),w.Uc=0,w.Gb==null?Ae=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Ae=1),Ae=!Ae),!Ae){Ae=w.ga;var Ie=w.Fa,Be=w.P,Ge=w.qc,dt=w.mb,Ot=w.nb,Nt=Be+1,xt=Ge-1,qt=Ae.l;if(e(Ie!=null&&dt!=null&&A!=null),Qr[0]=null,Qr[1]=ii,Qr[2]=To,Qr[3]=Pa,Ae.ca=dt,Ae.tb=Ot,Ae.c=A.width,Ae.i=A.height,e(0<Ae.c&&0<Ae.i),1>=Ge)A=0;else if(Ae.$a=Ie[Be+0]>>0&3,Ae.Z=Ie[Be+0]>>2&3,Ae.Lc=Ie[Be+0]>>4&3,Be=Ie[Be+0]>>6&3,0>Ae.$a||1<Ae.$a||4<=Ae.Z||1<Ae.Lc||Be)A=0;else if(qt.put=Xs,qt.ac=Pi,qt.bc=ds,qt.ma=Ae,qt.width=A.width,qt.height=A.height,qt.Da=A.Da,qt.v=A.v,qt.va=A.va,qt.j=A.j,qt.o=A.o,Ae.$a)e:{e(Ae.$a==1),A=Zt();t:for(;;){if(A==null){A=0;break e}if(e(Ae!=null),Ae.mc=A,A.c=Ae.c,A.i=Ae.i,A.l=Ae.l,A.l.ma=Ae,A.l.width=Ae.c,A.l.height=Ae.i,A.a=0,Y(A.m,Ie,Nt,xt),!$n(Ae.c,Ae.i,1,A,null)||(A.ab==1&&A.gc[0].hc==3&&Ut(A.s)?(Ae.ic=1,Ie=A.c*A.i,A.Ta=null,A.Ua=0,A.V=s(Ie),A.Ba=0,A.V==null?(A.a=1,A=0):A=1):(Ae.ic=0,A=yi(A,Ae.c)),!A))break t;A=1;break e}Ae.mc=null,A=0}else A=xt>=Ae.c*Ae.i;Ae=!A}if(Ae)return null;w.ga.Lc!=1?w.Ga=0:ce=Pe-G}e(w.ga!=null),e(G+ce<=Pe);e:{if(A=(Ie=w.ga).c,Pe=Ie.l.o,Ie.$a==0){if(Nt=w.rc,xt=w.Vc,qt=w.Fa,Be=w.P+1+G*A,Ge=w.mb,dt=w.nb+G*A,e(Be<=w.P+w.qc),Ie.Z!=0)for(e(Qr[Ie.Z]!=null),Ae=0;Ae<ce;++Ae)Qr[Ie.Z](Nt,xt,qt,Be,Ge,dt,A),Nt=Ge,xt=dt,dt+=A,Be+=A;else for(Ae=0;Ae<ce;++Ae)r(Ge,dt,qt,Be,A),Nt=Ge,xt=dt,dt+=A,Be+=A;w.rc=Nt,w.Vc=xt}else{if(e(Ie.mc!=null),A=G+ce,e((Ae=Ie.mc)!=null),e(A<=Ae.i),Ae.C>=A)A=1;else if(Ie.ic||Lt(),Ie.ic){Ie=Ae.V,Nt=Ae.Ba,xt=Ae.c;var $t=Ae.i,ft=(qt=1,Be=Ae.$/xt,Ge=Ae.$%xt,dt=Ae.m,Ot=Ae.s,Ae.$),yt=xt*$t,Qt=xt*A,cn=Ot.wc,nn=ft<Qt?Vt(Ot,Ge,Be):null;e(ft<=yt),e(A<=$t),e(Ut(Ot));t:for(;;){for(;!dt.h&&ft<Qt;){if(Ge&cn||(nn=Vt(Ot,Ge,Be)),e(nn!=null),ge(dt),256>($t=Dt(nn.G[0],nn.H[0],dt)))Ie[Nt+ft]=$t,++ft,++Ge>=xt&&(Ge=0,++Be<=A&&!(Be%16)&&Ln(Ae,Be));else{if(!(280>$t)){qt=0;break t}$t=mt($t-256,dt);var An,En=Dt(nn.G[4],nn.H[4],dt);if(ge(dt),!(ft>=(En=tt(xt,En=mt(En,dt)))&&yt-ft>=$t)){qt=0;break t}for(An=0;An<$t;++An)Ie[Nt+ft+An]=Ie[Nt+ft+An-En];for(ft+=$t,Ge+=$t;Ge>=xt;)Ge-=xt,++Be<=A&&!(Be%16)&&Ln(Ae,Be);ft<Qt&&Ge&cn&&(nn=Vt(Ot,Ge,Be))}e(dt.h==ae(dt))}Ln(Ae,Be>A?A:Be);break t}!qt||dt.h&&ft<yt?(qt=0,Ae.a=dt.h?5:3):Ae.$=ft,A=qt}else A=zn(Ae,Ae.V,Ae.Ba,Ae.c,Ae.i,A,or);if(!A){ce=0;break e}}G+ce>=Pe&&(w.Cc=1),ce=1}if(!ce)return null;if(w.Cc&&((ce=w.ga)!=null&&(ce.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+G*xe}function z(w,A,G,ce,xe,Pe){for(;0<xe--;){var Ae,Ie=w,Be=A+(G?1:0),Ge=w,dt=A+(G?0:3);for(Ae=0;Ae<ce;++Ae){var Ot=Ge[dt+4*Ae];Ot!=255&&(Ot*=32897,Ie[Be+4*Ae+0]=Ie[Be+4*Ae+0]*Ot>>23,Ie[Be+4*Ae+1]=Ie[Be+4*Ae+1]*Ot>>23,Ie[Be+4*Ae+2]=Ie[Be+4*Ae+2]*Ot>>23)}A+=Pe}}function we(w,A,G,ce,xe){for(;0<ce--;){var Pe;for(Pe=0;Pe<G;++Pe){var Ae=w[A+2*Pe+0],Ie=15&(Ge=w[A+2*Pe+1]),Be=4369*Ie,Ge=(240&Ge|Ge>>4)*Be>>16;w[A+2*Pe+0]=(240&Ae|Ae>>4)*Be>>16&240|(15&Ae|Ae<<4)*Be>>16>>4&15,w[A+2*Pe+1]=240&Ge|Ie}A+=xe}}function Ye(w,A,G,ce,xe,Pe,Ae,Ie){var Be,Ge,dt=255;for(Ge=0;Ge<xe;++Ge){for(Be=0;Be<ce;++Be){var Ot=w[A+Be];Pe[Ae+4*Be]=Ot,dt&=Ot}A+=G,Ae+=Ie}return dt!=255}function ct(w,A,G,ce,xe){var Pe;for(Pe=0;Pe<xe;++Pe)G[ce+Pe]=w[A+Pe]>>8}function Lt(){Ss=z,ai=we,fi=Ye,Zi=ct}function jt(w,A,G){O[w]=function(ce,xe,Pe,Ae,Ie,Be,Ge,dt,Ot,Nt,xt,qt,$t,ft,yt,Qt,cn){var nn,An=cn-1>>1,En=Ie[Be+0]|Ge[dt+0]<<16,Zn=Ot[Nt+0]|xt[qt+0]<<16;e(ce!=null);var h=3*En+Zn+131074>>2;for(A(ce[xe+0],255&h,h>>16,$t,ft),Pe!=null&&(h=3*Zn+En+131074>>2,A(Pe[Ae+0],255&h,h>>16,yt,Qt)),nn=1;nn<=An;++nn){var g=Ie[Be+nn]|Ge[dt+nn]<<16,_=Ot[Nt+nn]|xt[qt+nn]<<16,S=En+g+Zn+_+524296,P=S+2*(g+Zn)>>3;h=P+En>>1,En=(S=S+2*(En+_)>>3)+g>>1,A(ce[xe+2*nn-1],255&h,h>>16,$t,ft+(2*nn-1)*G),A(ce[xe+2*nn-0],255&En,En>>16,$t,ft+(2*nn-0)*G),Pe!=null&&(h=S+Zn>>1,En=P+_>>1,A(Pe[Ae+2*nn-1],255&h,h>>16,yt,Qt+(2*nn-1)*G),A(Pe[Ae+2*nn+0],255&En,En>>16,yt,Qt+(2*nn+0)*G)),En=g,Zn=_}1&cn||(h=3*En+Zn+131074>>2,A(ce[xe+cn-1],255&h,h>>16,$t,ft+(cn-1)*G),Pe!=null&&(h=3*Zn+En+131074>>2,A(Pe[Ae+cn-1],255&h,h>>16,yt,Qt+(cn-1)*G)))}}function un(){Hs[mo]=Oe,Hs[lr]=Ju,Hs[Ia]=yo,Hs[Oa]=Ps,Hs[Qo]=Dr,Hs[no]=Bh,Hs[th]=_f,Hs[Cs]=Ju,Hs[Es]=Ps,Hs[ea]=Dr,Hs[u]=Bh}function Tn(w){return w&-16384?0>w?0:255:w>>Ip}function Nn(w,A){return Tn((19077*w>>8)+(26149*A>>8)-14234)}function er(w,A,G){return Tn((19077*w>>8)-(6419*A>>8)-(13320*G>>8)+8708)}function hr(w,A){return Tn((19077*w>>8)+(33050*A>>8)-17685)}function Ar(w,A,G,ce,xe){ce[xe+0]=Nn(w,G),ce[xe+1]=er(w,A,G),ce[xe+2]=hr(w,A)}function Ci(w,A,G,ce,xe){ce[xe+0]=hr(w,A),ce[xe+1]=er(w,A,G),ce[xe+2]=Nn(w,G)}function Jr(w,A,G,ce,xe){var Pe=er(w,A,G);A=Pe<<3&224|hr(w,A)>>3,ce[xe+0]=248&Nn(w,G)|Pe>>5,ce[xe+1]=A}function si(w,A,G,ce,xe){var Pe=240&hr(w,A)|15;ce[xe+0]=240&Nn(w,G)|er(w,A,G)>>4,ce[xe+1]=Pe}function Ki(w,A,G,ce,xe){ce[xe+0]=255,Ar(w,A,G,ce,xe+1)}function is(w,A,G,ce,xe){Ci(w,A,G,ce,xe),ce[xe+3]=255}function Do(w,A,G,ce,xe){Ar(w,A,G,ce,xe),ce[xe+3]=255}function Tr(w,A){return 0>w?0:w>A?A:w}function Rs(w,A,G){O[w]=function(ce,xe,Pe,Ae,Ie,Be,Ge,dt,Ot){for(var Nt=dt+(-2&Ot)*G;dt!=Nt;)A(ce[xe+0],Pe[Ae+0],Ie[Be+0],Ge,dt),A(ce[xe+1],Pe[Ae+0],Ie[Be+0],Ge,dt+G),xe+=2,++Ae,++Be,dt+=2*G;1&Ot&&A(ce[xe+0],Pe[Ae+0],Ie[Be+0],Ge,dt)}}function Al(w,A,G){return G==0?w==0?A==0?6:5:A==0?4:0:G}function Js(w,A,G,ce,xe){switch(w>>>30){case 3:Gt(A,G,ce,xe,0);break;case 2:kt(A,G,ce,xe);break;case 1:Hn(A,G,ce,xe)}}function Mu(w,A){var G,ce,xe=A.M,Pe=A.Nb,Ae=w.oc,Ie=w.pc+40,Be=w.oc,Ge=w.pc+584,dt=w.oc,Ot=w.pc+600;for(G=0;16>G;++G)Ae[Ie+32*G-1]=129;for(G=0;8>G;++G)Be[Ge+32*G-1]=129,dt[Ot+32*G-1]=129;for(0<xe?Ae[Ie-1-32]=Be[Ge-1-32]=dt[Ot-1-32]=129:(i(Ae,Ie-32-1,127,21),i(Be,Ge-32-1,127,9),i(dt,Ot-32-1,127,9)),ce=0;ce<w.za;++ce){var Nt=A.ya[A.aa+ce];if(0<ce){for(G=-1;16>G;++G)r(Ae,Ie+32*G-4,Ae,Ie+32*G+12,4);for(G=-1;8>G;++G)r(Be,Ge+32*G-4,Be,Ge+32*G+4,4),r(dt,Ot+32*G-4,dt,Ot+32*G+4,4)}var xt=w.Gd,qt=w.Hd+ce,$t=Nt.ad,ft=Nt.Hc;if(0<xe&&(r(Ae,Ie-32,xt[qt].y,0,16),r(Be,Ge-32,xt[qt].f,0,8),r(dt,Ot-32,xt[qt].ea,0,8)),Nt.Za){var yt=Ae,Qt=Ie-32+16;for(0<xe&&(ce>=w.za-1?i(yt,Qt,xt[qt].y[15],4):r(yt,Qt,xt[qt+1].y,0,4)),G=0;4>G;G++)yt[Qt+128+G]=yt[Qt+256+G]=yt[Qt+384+G]=yt[Qt+0+G];for(G=0;16>G;++G,ft<<=2)yt=Ae,Qt=Ie+xf[G],ta[Nt.Ob[G]](yt,Qt),Js(ft,$t,16*+G,yt,Qt)}else if(yt=Al(ce,xe,Nt.Ob[0]),va[yt](Ae,Ie),ft!=0)for(G=0;16>G;++G,ft<<=2)Js(ft,$t,16*+G,Ae,Ie+xf[G]);for(G=Nt.Gc,yt=Al(ce,xe,Nt.Dd),zo[yt](Be,Ge),zo[yt](dt,Ot),ft=$t,yt=Be,Qt=Ge,255&(Nt=G>>0)&&(170&Nt?kn(ft,256,yt,Qt):pr(ft,256,yt,Qt)),Nt=dt,ft=Ot,255&(G>>=8)&&(170&G?kn($t,320,Nt,ft):pr($t,320,Nt,ft)),xe<w.Ub-1&&(r(xt[qt].y,0,Ae,Ie+480,16),r(xt[qt].f,0,Be,Ge+224,8),r(xt[qt].ea,0,dt,Ot+224,8)),G=8*Pe*w.B,xt=w.sa,qt=w.ta+16*ce+16*Pe*w.R,$t=w.qa,Nt=w.ra+8*ce+G,ft=w.Ha,yt=w.Ia+8*ce+G,G=0;16>G;++G)r(xt,qt+G*w.R,Ae,Ie+32*G,16);for(G=0;8>G;++G)r($t,Nt+G*w.B,Be,Ge+32*G,8),r(ft,yt+G*w.B,dt,Ot+32*G,8)}}function ua(w,A,G,ce,xe,Pe,Ae,Ie,Be){var Ge=[0],dt=[0],Ot=0,Nt=Be!=null?Be.kd:0,xt=Be??new Zo;if(w==null||12>G)return 7;xt.data=w,xt.w=A,xt.ha=G,A=[A],G=[G],xt.gb=[xt.gb];e:{var qt=A,$t=G,ft=xt.gb;if(e(w!=null),e($t!=null),e(ft!=null),ft[0]=0,12<=$t[0]&&!n(w,qt[0],"RIFF")){if(n(w,qt[0]+8,"WEBP")){ft=3;break e}var yt=se(w,qt[0]+4);if(12>yt||4294967286<yt){ft=3;break e}if(Nt&&yt>$t[0]-8){ft=7;break e}ft[0]=yt,qt[0]+=12,$t[0]-=12}ft=0}if(ft!=0)return ft;for(yt=0<xt.gb[0],G=G[0];;){e:{var Qt=w;$t=A,ft=G;var cn=Ge,nn=dt,An=qt=[0];if((h=Ot=[Ot])[0]=0,8>ft[0])ft=7;else{if(!n(Qt,$t[0],"VP8X")){if(se(Qt,$t[0]+4)!=10){ft=3;break e}if(18>ft[0]){ft=7;break e}var En=se(Qt,$t[0]+8),Zn=1+qe(Qt,$t[0]+12);if(2147483648<=Zn*(Qt=1+qe(Qt,$t[0]+15))){ft=3;break e}An!=null&&(An[0]=En),cn!=null&&(cn[0]=Zn),nn!=null&&(nn[0]=Qt),$t[0]+=18,ft[0]-=18,h[0]=1}ft=0}}if(Ot=Ot[0],qt=qt[0],ft!=0)return ft;if($t=!!(2&qt),!yt&&Ot)return 3;if(Pe!=null&&(Pe[0]=!!(16&qt)),Ae!=null&&(Ae[0]=$t),Ie!=null&&(Ie[0]=0),Ae=Ge[0],qt=dt[0],Ot&&$t&&Be==null){ft=0;break}if(4>G){ft=7;break}if(yt&&Ot||!yt&&!Ot&&!n(w,A[0],"ALPH")){G=[G],xt.na=[xt.na],xt.P=[xt.P],xt.Sa=[xt.Sa];e:{En=w,ft=A,yt=G;var h=xt.gb;cn=xt.na,nn=xt.P,An=xt.Sa,Zn=22,e(En!=null),e(yt!=null),Qt=ft[0];var g=yt[0];for(e(cn!=null),e(An!=null),cn[0]=null,nn[0]=null,An[0]=0;;){if(ft[0]=Qt,yt[0]=g,8>g){ft=7;break e}var _=se(En,Qt+4);if(4294967286<_){ft=3;break e}var S=8+_+1&-2;if(Zn+=S,0<h&&Zn>h){ft=3;break e}if(!n(En,Qt,"VP8 ")||!n(En,Qt,"VP8L")){ft=0;break e}if(g[0]<S){ft=7;break e}n(En,Qt,"ALPH")||(cn[0]=En,nn[0]=Qt+8,An[0]=_),Qt+=S,g-=S}}if(G=G[0],xt.na=xt.na[0],xt.P=xt.P[0],xt.Sa=xt.Sa[0],ft!=0)break}G=[G],xt.Ja=[xt.Ja],xt.xa=[xt.xa];e:if(h=w,ft=A,yt=G,cn=xt.gb[0],nn=xt.Ja,An=xt.xa,En=ft[0],Qt=!n(h,En,"VP8 "),Zn=!n(h,En,"VP8L"),e(h!=null),e(yt!=null),e(nn!=null),e(An!=null),8>yt[0])ft=7;else{if(Qt||Zn){if(h=se(h,En+4),12<=cn&&h>cn-12){ft=3;break e}if(Nt&&h>yt[0]-8){ft=7;break e}nn[0]=h,ft[0]+=8,yt[0]-=8,An[0]=Zn}else An[0]=5<=yt[0]&&h[En+0]==47&&!(h[En+4]>>5),nn[0]=yt[0];ft=0}if(G=G[0],xt.Ja=xt.Ja[0],xt.xa=xt.xa[0],A=A[0],ft!=0)break;if(4294967286<xt.Ja)return 3;if(Ie==null||$t||(Ie[0]=xt.xa?2:1),Ae=[Ae],qt=[qt],xt.xa){if(5>G){ft=7;break}Ie=Ae,Nt=qt,$t=Pe,w==null||5>G?w=0:5<=G&&w[A+0]==47&&!(w[A+4]>>5)?(yt=[0],h=[0],cn=[0],Y(nn=new j,w,A,G),Yn(nn,yt,h,cn)?(Ie!=null&&(Ie[0]=yt[0]),Nt!=null&&(Nt[0]=h[0]),$t!=null&&($t[0]=cn[0]),w=1):w=0):w=0}else{if(10>G){ft=7;break}Ie=qt,w==null||10>G||!Qa(w,A+3,G-3)?w=0:(Nt=w[A+0]|w[A+1]<<8|w[A+2]<<16,$t=16383&(w[A+7]<<8|w[A+6]),w=16383&(w[A+9]<<8|w[A+8]),1&Nt||3<(Nt>>1&7)||!(Nt>>4&1)||Nt>>5>=xt.Ja||!$t||!w?w=0:(Ae&&(Ae[0]=$t),Ie&&(Ie[0]=w),w=1))}if(!w||(Ae=Ae[0],qt=qt[0],Ot&&(Ge[0]!=Ae||dt[0]!=qt)))return 3;Be!=null&&(Be[0]=xt,Be.offset=A-Be.w,e(4294967286>A-Be.w),e(Be.offset==Be.ha-G));break}return ft==0||ft==7&&Ot&&Be==null?(Pe!=null&&(Pe[0]|=xt.na!=null&&0<xt.na.length),ce!=null&&(ce[0]=Ae),xe!=null&&(xe[0]=qt),0):ft}function Zu(w,A,G){var ce=A.width,xe=A.height,Pe=0,Ae=0,Ie=ce,Be=xe;if(A.Da=w!=null&&0<w.Da,A.Da&&(Ie=w.cd,Be=w.bd,Pe=w.v,Ae=w.j,11>G||(Pe&=-2,Ae&=-2),0>Pe||0>Ae||0>=Ie||0>=Be||Pe+Ie>ce||Ae+Be>xe))return 0;if(A.v=Pe,A.j=Ae,A.va=Pe+Ie,A.o=Ae+Be,A.U=Ie,A.T=Be,A.da=w!=null&&0<w.da,A.da){if(!be(Ie,Be,G=[w.ib],Pe=[w.hb]))return 0;A.ib=G[0],A.hb=Pe[0]}return A.ob=w!=null&&w.ob,A.Kb=w==null||!w.Sd,A.da&&(A.ob=A.ib<3*ce/4&&A.hb<3*xe/4,A.Kb=0),1}function ol(w){if(w==null)return 2;if(11>w.S){var A=w.f.RGBA;A.fb+=(w.height-1)*A.A,A.A=-A.A}else A=w.f.kb,w=w.height,A.O+=(w-1)*A.fa,A.fa=-A.fa,A.N+=(w-1>>1)*A.Ab,A.Ab=-A.Ab,A.W+=(w-1>>1)*A.Db,A.Db=-A.Db,A.F!=null&&(A.J+=(w-1)*A.lb,A.lb=-A.lb);return 0}function al(w,A,G,ce){if(ce==null||0>=w||0>=A)return 2;if(G!=null){if(G.Da){var xe=G.cd,Pe=G.bd,Ae=-2&G.v,Ie=-2&G.j;if(0>Ae||0>Ie||0>=xe||0>=Pe||Ae+xe>w||Ie+Pe>A)return 2;w=xe,A=Pe}if(G.da){if(!be(w,A,xe=[G.ib],Pe=[G.hb]))return 2;w=xe[0],A=Pe[0]}}ce.width=w,ce.height=A;e:{var Be=ce.width,Ge=ce.height;if(w=ce.S,0>=Be||0>=Ge||!(w>=mo&&13>w))w=2;else{if(0>=ce.Rd&&ce.sd==null){Ae=Pe=xe=A=0;var dt=(Ie=Be*Cf[w])*Ge;if(11>w||(Pe=(Ge+1)/2*(A=(Be+1)/2),w==12&&(Ae=(xe=Be)*Ge)),(Ge=s(dt+2*Pe+Ae))==null){w=1;break e}ce.sd=Ge,11>w?((Be=ce.f.RGBA).eb=Ge,Be.fb=0,Be.A=Ie,Be.size=dt):((Be=ce.f.kb).y=Ge,Be.O=0,Be.fa=Ie,Be.Fd=dt,Be.f=Ge,Be.N=0+dt,Be.Ab=A,Be.Cd=Pe,Be.ea=Ge,Be.W=0+dt+Pe,Be.Db=A,Be.Ed=Pe,w==12&&(Be.F=Ge,Be.J=0+dt+2*Pe),Be.Tc=Ae,Be.lb=xe)}if(A=1,xe=ce.S,Pe=ce.width,Ae=ce.height,xe>=mo&&13>xe)if(11>xe)w=ce.f.RGBA,A&=(Ie=Math.abs(w.A))*(Ae-1)+Pe<=w.size,A&=Ie>=Pe*Cf[xe],A&=w.eb!=null;else{w=ce.f.kb,Ie=(Pe+1)/2,dt=(Ae+1)/2,Be=Math.abs(w.fa),Ge=Math.abs(w.Ab);var Ot=Math.abs(w.Db),Nt=Math.abs(w.lb),xt=Nt*(Ae-1)+Pe;A&=Be*(Ae-1)+Pe<=w.Fd,A&=Ge*(dt-1)+Ie<=w.Cd,A=(A&=Ot*(dt-1)+Ie<=w.Ed)&Be>=Pe&Ge>=Ie&Ot>=Ie,A&=w.y!=null,A&=w.f!=null,A&=w.ea!=null,xe==12&&(A&=Nt>=Pe,A&=xt<=w.Tc,A&=w.F!=null)}else A=0;w=A?0:2}}return w!=0||G!=null&&G.fd&&(w=ol(ce)),w}var ss=64,ca=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Io=24,po=32,Tl=8,Fs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Qe("Predictor0","PredictorAdd0"),O.Predictor0=function(){return 4278190080},O.Predictor1=function(w){return w},O.Predictor2=function(w,A,G){return A[G+0]},O.Predictor3=function(w,A,G){return A[G+1]},O.Predictor4=function(w,A,G){return A[G-1]},O.Predictor5=function(w,A,G){return st(st(w,A[G+1]),A[G+0])},O.Predictor6=function(w,A,G){return st(w,A[G-1])},O.Predictor7=function(w,A,G){return st(w,A[G+0])},O.Predictor8=function(w,A,G){return st(A[G-1],A[G+0])},O.Predictor9=function(w,A,G){return st(A[G+0],A[G+1])},O.Predictor10=function(w,A,G){return st(st(w,A[G-1]),st(A[G+0],A[G+1]))},O.Predictor11=function(w,A,G){var ce=A[G+0];return 0>=Ht(ce>>24&255,w>>24&255,(A=A[G-1])>>24&255)+Ht(ce>>16&255,w>>16&255,A>>16&255)+Ht(ce>>8&255,w>>8&255,A>>8&255)+Ht(255&ce,255&w,255&A)?ce:w},O.Predictor12=function(w,A,G){var ce=A[G+0];return(Pt((w>>24&255)+(ce>>24&255)-((A=A[G-1])>>24&255))<<24|Pt((w>>16&255)+(ce>>16&255)-(A>>16&255))<<16|Pt((w>>8&255)+(ce>>8&255)-(A>>8&255))<<8|Pt((255&w)+(255&ce)-(255&A)))>>>0},O.Predictor13=function(w,A,G){var ce=A[G-1];return(Bt((w=st(w,A[G+0]))>>24&255,ce>>24&255)<<24|Bt(w>>16&255,ce>>16&255)<<16|Bt(w>>8&255,ce>>8&255)<<8|Bt(w>>0&255,ce>>0&255))>>>0};var Qs=O.PredictorAdd0;O.PredictorAdd1=Jt,Qe("Predictor2","PredictorAdd2"),Qe("Predictor3","PredictorAdd3"),Qe("Predictor4","PredictorAdd4"),Qe("Predictor5","PredictorAdd5"),Qe("Predictor6","PredictorAdd6"),Qe("Predictor7","PredictorAdd7"),Qe("Predictor8","PredictorAdd8"),Qe("Predictor9","PredictorAdd9"),Qe("Predictor10","PredictorAdd10"),Qe("Predictor11","PredictorAdd11"),Qe("Predictor12","PredictorAdd12"),Qe("Predictor13","PredictorAdd13");var eo=O.PredictorAdd2;ot("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),ot("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var Ec,gs=O.ColorIndexInverseTransform,ka=O.MapARGB,js=O.VP8LColorIndexInverseTransformAlpha,zs=O.MapAlpha,Aa=O.VP8LPredictorsAdd=[];Aa.length=16,(O.VP8LPredictors=[]).length=16,(O.VP8LPredictorsAdd_C=[]).length=16,(O.VP8LPredictors_C=[]).length=16;var Ta,$s,Ls,ha,Oo,Us,bt,Gt,kt,kn,Hn,pr,Ai,oi,au,to,Ti,da,Da,fa,pa,ga,jr,Jo,Ss,ai,fi,Zi,_i=s(511),No=s(2041),go=s(225),jo=s(767),Xu=0,ma=No,os=go,bi=jo,Vs=_i,mo=0,lr=1,Ia=2,Oa=3,Qo=4,no=5,th=6,Cs=7,Es=8,ea=9,u=10,y=[2,3,7],M=[3,3,11],H=[280,256,256,256,40],ue=[0,1,1,1,0],Me=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],at=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Mt=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],zt=8,on=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Dn=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Kn=null,kr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],as=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],zi=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ms=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Di=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],vo=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],nh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],va=[],ta=[],zo=[],Cd=1,Pu=2,Qr=[],Hs=[];jt("UpsampleRgbLinePair",Ar,3),jt("UpsampleBgrLinePair",Ci,3),jt("UpsampleRgbaLinePair",Do,4),jt("UpsampleBgraLinePair",is,4),jt("UpsampleArgbLinePair",Ki,4),jt("UpsampleRgba4444LinePair",si,2),jt("UpsampleRgb565LinePair",Jr,2);var Oe=O.UpsampleRgbLinePair,yo=O.UpsampleBgrLinePair,Ju=O.UpsampleRgbaLinePair,Ps=O.UpsampleBgraLinePair,Dr=O.UpsampleArgbLinePair,Bh=O.UpsampleRgba4444LinePair,_f=O.UpsampleRgb565LinePair,Rh=16,ll=1<<Rh-1,rh=-227,Ed=482,Ip=6,Mc=0,Fh=s(256),lu=s(256),Op=s(256),jh=s(256),zh=s(Ed-rh),wf=s(Ed-rh);Rs("YuvToRgbRow",Ar,3),Rs("YuvToBgrRow",Ci,3),Rs("YuvToRgbaRow",Do,4),Rs("YuvToBgraRow",is,4),Rs("YuvToArgbRow",Ki,4),Rs("YuvToRgba4444Row",si,2),Rs("YuvToRgb565Row",Jr,2);var xf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Na=[0,2,8],Lf=[8,7,6,4,4,2,2,2,1,1,1,1],Sf=1;this.WebPDecodeRGBA=function(w,A,G,ce,xe){var Pe=lr,Ae=new xs,Ie=new Qn;Ae.ba=Ie,Ie.S=Pe,Ie.width=[Ie.width],Ie.height=[Ie.height];var Be=Ie.width,Ge=Ie.height,dt=new ir;if(dt==null||w==null)var Ot=2;else e(dt!=null),Ot=ua(w,A,G,dt.width,dt.height,dt.Pd,dt.Qd,dt.format,null);if(Ot!=0?Be=0:(Be!=null&&(Be[0]=dt.width[0]),Ge!=null&&(Ge[0]=dt.height[0]),Be=1),Be){Ie.width=Ie.width[0],Ie.height=Ie.height[0],ce!=null&&(ce[0]=Ie.width),xe!=null&&(xe[0]=Ie.height);e:{if(ce=new Si,(xe=new Zo).data=w,xe.w=A,xe.ha=G,xe.kd=1,A=[0],e(xe!=null),((w=ua(xe.data,xe.w,xe.ha,null,null,null,A,null,xe))==0||w==7)&&A[0]&&(w=4),(A=w)==0){if(e(Ae!=null),ce.data=xe.data,ce.w=xe.w+xe.offset,ce.ha=xe.ha-xe.offset,ce.put=Xs,ce.ac=Pi,ce.bc=ds,ce.ma=Ae,xe.xa){if((w=Zt())==null){Ae=1;break e}if(function(Nt,xt){var qt=[0],$t=[0],ft=[0];t:for(;;){if(Nt==null)return 0;if(xt==null)return Nt.a=2,0;if(Nt.l=xt,Nt.a=0,Y(Nt.m,xt.data,xt.w,xt.ha),!Yn(Nt.m,qt,$t,ft)){Nt.a=3;break t}if(Nt.xb=Pu,xt.width=qt[0],xt.height=$t[0],!$n(qt[0],$t[0],1,Nt,null))break t;return 1}return e(Nt.a!=0),0}(w,ce)){if(ce=(A=al(ce.width,ce.height,Ae.Oa,Ae.ba))==0){t:{ce=w;n:for(;;){if(ce==null){ce=0;break t}if(e(ce.s.yc!=null),e(ce.s.Ya!=null),e(0<ce.s.Wb),e((G=ce.l)!=null),e((xe=G.ma)!=null),ce.xb!=0){if(ce.ca=xe.ba,ce.tb=xe.tb,e(ce.ca!=null),!Zu(xe.Oa,G,Oa)){ce.a=2;break n}if(!yi(ce,G.width)||G.da)break n;if((G.da||wn(ce.ca.S))&&Lt(),11>ce.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ce.ca.f.kb.F!=null&&Lt()),ce.Pb&&0<ce.s.ua&&ce.s.vb.X==null&&!le(ce.s.vb,ce.s.Wa.Xa)){ce.a=1;break n}ce.xb=0}if(!zn(ce,ce.V,ce.Ba,ce.c,ce.i,G.o,vn))break n;xe.Dc=ce.Ma,ce=1;break t}e(ce.a!=0),ce=0}ce=!ce}ce&&(A=w.a)}else A=w.a}else{if((w=new Pr)==null){Ae=1;break e}if(w.Fa=xe.na,w.P=xe.P,w.qc=xe.Sa,Sa(w,ce)){if((A=al(ce.width,ce.height,Ae.Oa,Ae.ba))==0){if(w.Aa=0,G=Ae.Oa,e((xe=w)!=null),G!=null){if(0<(Be=0>(Be=G.Md)?0:100<Be?255:255*Be/100)){for(Ge=dt=0;4>Ge;++Ge)12>(Ot=xe.pb[Ge]).lc&&(Ot.ia=Be*Lf[0>Ot.lc?0:Ot.lc]>>3),dt|=Ot.ia;dt&&(alert("todo:VP8InitRandom"),xe.ia=1)}xe.Ga=G.Id,100<xe.Ga?xe.Ga=100:0>xe.Ga&&(xe.Ga=0)}br(w,ce)||(A=w.a)}}else A=w.a}A==0&&Ae.Oa!=null&&Ae.Oa.fd&&(A=ol(Ae.ba))}Ae=A}Pe=Ae!=0?null:11>Pe?Ie.f.RGBA.eb:Ie.f.kb.y}else Pe=null;return Pe};var Cf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(O,U){for(var q="",R=0;R<4;R++)q+=String.fromCharCode(O[U++]);return q}function d(O,U){return(O[U+0]<<0|O[U+1]<<8|O[U+2]<<16)>>>0}function p(O,U){return(O[U+0]<<0|O[U+1]<<8|O[U+2]<<16|O[U+3]<<24)>>>0}new l;var v=[0],m=[0],x=[],E=new l,T=t,D=function(O,U){var q={},R=0,$=!1,X=0,K=0;if(q.frames=[],!function(Z,ae,de,ge){for(var me=0;me<ge;me++)if(Z[ae+me]!=de.charCodeAt(me))return!0;return!1}(O,U,"RIFF",4)){var F,N;for(p(O,U+=4),U+=8;U<O.length;){var J=c(O,U),Y=p(O,U+=4);U+=4;var ye=Y+(1&Y);switch(J){case"VP8 ":case"VP8L":q.frames[R]===void 0&&(q.frames[R]={}),(j=q.frames[R]).src_off=$?K:U-8,j.src_size=X+Y+8,R++,$&&($=!1,X=0,K=0);break;case"VP8X":(j=q.header={}).feature_flags=O[U];var Ce=U+4;j.canvas_width=1+d(O,Ce),Ce+=3,j.canvas_height=1+d(O,Ce),Ce+=3;break;case"ALPH":$=!0,X=ye+8,K=U-8;break;case"ANIM":(j=q.header).bgcolor=p(O,U),Ce=U+4,j.loop_count=(F=O)[(N=Ce)+0]<<0|F[N+1]<<8,Ce+=2;break;case"ANMF":var He,j;(j=q.frames[R]={}).offset_x=2*d(O,U),U+=3,j.offset_y=2*d(O,U),U+=3,j.width=1+d(O,U),U+=3,j.height=1+d(O,U),U+=3,j.duration=d(O,U),U+=3,He=O[U++],j.dispose=1&He,j.blend=He>>1&1}J!="ANMF"&&(U+=ye)}return q}}(T,0);D.response=T,D.rgbaoutput=!0,D.dataurl=!1;var k=D.header?D.header:null,B=D.frames?D.frames:null;if(k){k.loop_counter=k.loop_count,v=[k.canvas_height],m=[k.canvas_width];for(var W=0;W<B.length&&B[W].blend!=0;W++);}var Q=B[0],pe=E.WebPDecodeRGBA(T,Q.src_off,Q.src_size,m,v);Q.rgba=pe,Q.imgwidth=m[0],Q.imgheight=v[0];for(var fe=0;fe<m[0]*v[0]*4;fe++)x[fe]=pe[fe];return this.width=m,this.height=v,this.data=x,this}(function(t){var e=function(){return typeof fb=="function"},n=function(v,m,x,E){var T=4,D=o;switch(E){case t.image_compression.FAST:T=1,D=s;break;case t.image_compression.MEDIUM:T=6,D=a;break;case t.image_compression.SLOW:T=9,D=l}v=r(v,m,x,D);var k=fb(v,{level:T});return t.__addimage__.arrayBufferToBinaryString(k)},r=function(v,m,x,E){for(var T,D,k,B=v.length/m,W=new Uint8Array(v.length+B),Q=d(),pe=0;pe<B;pe+=1){if(k=pe*m,T=v.subarray(k,k+m),E)W.set(E(T,x,D),k+pe);else{for(var fe,O=Q.length,U=[];fe<O;fe+=1)U[fe]=Q[fe](T,x,D);var q=p(U.concat());W.set(U[q],k+pe)}D=T}return W},i=function(v){var m=Array.apply([],v);return m.unshift(0),m},s=function(v,m){var x,E=[],T=v.length;E[0]=1;for(var D=0;D<T;D+=1)x=v[D-m]||0,E[D+1]=v[D]-x+256&255;return E},o=function(v,m,x){var E,T=[],D=v.length;T[0]=2;for(var k=0;k<D;k+=1)E=x&&x[k]||0,T[k+1]=v[k]-E+256&255;return T},a=function(v,m,x){var E,T,D=[],k=v.length;D[0]=3;for(var B=0;B<k;B+=1)E=v[B-m]||0,T=x&&x[B]||0,D[B+1]=v[B]+256-(E+T>>>1)&255;return D},l=function(v,m,x){var E,T,D,k,B=[],W=v.length;B[0]=4;for(var Q=0;Q<W;Q+=1)E=v[Q-m]||0,T=x&&x[Q]||0,D=x&&x[Q-m]||0,k=c(E,T,D),B[Q+1]=v[Q]-k+256&255;return B},c=function(v,m,x){if(v===m&&m===x)return v;var E=Math.abs(m-x),T=Math.abs(v-x),D=Math.abs(v+m-x-x);return E<=T&&E<=D?v:T<=D?m:x},d=function(){return[i,s,o,a,l]},p=function(v){var m=v.map(function(x){return x.reduce(function(E,T){return E+Math.abs(T)},0)});return m.indexOf(Math.min.apply(null,m))};t.processPNG=function(v,m,x,E){var T,D,k,B,W,Q,pe,fe,O,U,q,R,$,X,K,F=this.decode.FLATE_DECODE,N="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(k=new xV(v)).imgData,D=k.bits,T=k.colorSpace,W=k.colors,[4,6].indexOf(k.colorType)!==-1){if(k.bits===8){O=(fe=k.pixelBitlength==32?new Uint32Array(k.decodePixels().buffer):k.pixelBitlength==16?new Uint16Array(k.decodePixels().buffer):new Uint8Array(k.decodePixels().buffer)).length,q=new Uint8Array(O*k.colors),U=new Uint8Array(O);var J,Y=k.pixelBitlength-k.bits;for(X=0,K=0;X<O;X++){for($=fe[X],J=0;J<Y;)q[K++]=$>>>J&255,J+=k.bits;U[X]=$>>>J&255}}if(k.bits===16){O=(fe=new Uint32Array(k.decodePixels().buffer)).length,q=new Uint8Array(O*(32/k.pixelBitlength)*k.colors),U=new Uint8Array(O*(32/k.pixelBitlength)),R=k.colors>1,X=0,K=0;for(var ye=0;X<O;)$=fe[X++],q[K++]=$>>>0&255,R&&(q[K++]=$>>>16&255,$=fe[X++],q[K++]=$>>>0&255),U[ye++]=$>>>16&255;D=8}E!==t.image_compression.NONE&&e()?(v=n(q,k.width*k.colors,k.colors,E),pe=n(U,k.width,1,E)):(v=q,pe=U,F=void 0)}if(k.colorType===3&&(T=this.color_spaces.INDEXED,Q=k.palette,k.transparency.indexed)){var Ce=k.transparency.indexed,He=0;for(X=0,O=Ce.length;X<O;++X)He+=Ce[X];if((He/=255)===O-1&&Ce.indexOf(0)!==-1)B=[Ce.indexOf(0)];else if(He!==O){for(fe=k.decodePixels(),U=new Uint8Array(fe.length),X=0,O=fe.length;X<O;X++)U[X]=Ce[fe[X]];pe=n(U,k.width,1)}}var j=function(Z){var ae;switch(Z){case t.image_compression.FAST:ae=11;break;case t.image_compression.MEDIUM:ae=13;break;case t.image_compression.SLOW:ae=14;break;default:ae=12}return ae}(E);return F===this.decode.FLATE_DECODE&&(N="/Predictor "+j+" "),N+="/Colors "+W+" /BitsPerComponent "+D+" /Columns "+k.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(pe&&this.__addimage__.isArrayBuffer(pe)||this.__addimage__.isArrayBufferView(pe))&&(pe=this.__addimage__.arrayBufferToBinaryString(pe)),{alias:x,data:v,index:m,filter:F,decodeParameters:N,transparency:B,palette:Q,sMask:pe,predictor:j,width:k.width,height:k.height,bitsPerComponent:D,colorSpace:T}}}})(Cr.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new LV(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},d=new X1(100).encode(c,100);return t.processJPEG.call(this,d,n,r,i)},t.processGIF87A=t.processGIF89A}(Cr.API),lc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},lc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Qi.log("bit decode error:"+n)}},lc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},lc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},lc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},lc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,d=r*this.width*4+4*i;this.data[d]=l,this.data[d+1]=a,this.data[d+2]=o,this.data[d+3]=c}this.pos+=t}},lc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,d=i*this.width*4+4*s;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=a,this.data[d+3]=255}this.pos+=t}},lc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},lc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},lc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new lc(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new X1(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(Cr.API),L5.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new L5(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new X1(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(Cr.API),Cr.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var d=r[c],p=r[c+1],v=r[c+2],m=r[c+3];s[a++]=d,s[a++]=p,s[a++]=v,o[l++]=m}var x=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:x,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Cr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},$f=Cr.API,v0=$f.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=c.fof?c.fof:1,p=e.doKerning!==!1,v=0,m=t.length,x=0,E=a[0]||l,T=[];for(n=0;n<m;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?T.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(v=p&&Vi(c[r])==="object"&&!isNaN(parseInt(c[r][x],10))?c[r][x]/d:0,T.push((a[r]||E)/l+v)),x=r;return T},b5=$f.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return $f.processArabic&&(t=$f.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:v0.apply(this,arguments).reduce(function(s,o){return s+o},0)},_5=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},w5=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,d=[],p=[d],v=n.textIndent||0,m=0,x=0,E=t.split(" "),T=v0.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?E[0].length+2:n.lineIndent||0){var D=Array(l).join(" "),k=[];E.map(function(W){(W=W.split(/\s*\n/)).length>1?k=k.concat(W.map(function(Q,pe){return(pe&&Q.length?`
`:"")+Q})):k.push(W[0])}),E=k,l=b5.apply(this,[D,n])}for(s=0,o=E.length;s<o;s++){var B=0;if(r=E[s],l&&r[0]==`
`&&(r=r.substr(1),B=1),v+m+(x=(i=v0.apply(this,[r,n])).reduce(function(W,Q){return W+Q},0))>e||B){if(x>e){for(a=_5.apply(this,[r,i,e-(v+m),e]),d.push(a.shift()),d=[a.pop()];a.length;)p.push([a.shift()]);x=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(W,Q){return W+Q},0)}else d=[r];p.push(d),v=x+l,m=T}else d.push(r),v+=m+x,m=T}return c=l?function(W,Q){return(Q?D:"")+W.join(" ")}:function(W){return W.join(" ")},p.map(c)},$f.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(w5.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var v,m,x,E,T=["{"];for(var D in p){if(v=p[D],isNaN(parseInt(D,10))?m="'"+D+"'":(D=parseInt(D,10),m=(m=s(D).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof v=="number")v<0?(x=s(v).slice(3),E="-"):(x=s(v).slice(2),E=""),x=E+x.slice(0,-1)+r[x.slice(-1)];else{if(Vi(v)!=="object")throw new Error("Don't know what to do with value type "+Vi(v)+".");x=o(v)}T.push(m+x)}return T.push("}"),T.join("")},a=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,m,x,E,T={},D=1,k=T,B=[],W="",Q="",pe=p.length-1,fe=1;fe<pe;fe+=1)(E=p[fe])=="'"?v?(x=v.join(""),v=void 0):v=[]:v?v.push(E):E=="{"?(B.push([k,x]),k={},x=void 0):E=="}"?((m=B.pop())[0][m[1]]=k,x=void 0,k=m[0]):E=="-"?D=-1:x===void 0?n.hasOwnProperty(E)?(W+=n[E],x=parseInt(W,16)*D,D=1,W=""):W+=E:n.hasOwnProperty(E)?(Q+=n[E],k[x]=parseInt(Q,16)*D,D=1,x=void 0,Q=""):Q+=E;return T},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var v=p.font,m=d.Unicode[v.postScriptName];m&&(v.metadata.Unicode={},v.metadata.Unicode.widths=m.widths,v.metadata.Unicode.kerning=m.kerning);var x=c.Unicode[v.postScriptName];x&&(v.metadata.Unicode.encoding=x,v.encoding=x.codePages[0])}])}(Cr.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Bg(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Cr),function(t){function e(){return(Er.canvg?Promise.resolve(Er.canvg):Ch(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Cr.API.addSvgAsImage=function(n,r,i,s,o,a,l,c){if(isNaN(r)||isNaN(i))throw Qi.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Qi.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=o;var p=d.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,d.width,d.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(x){return x.fromString(p,n,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(v)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),r,i,s,o,l,c)})}}(),Cr.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},Cr.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,d=0,p=0;function v(x,E){var T,D=!1;for(T=0;T<x.length;T+=1)x[T]===E&&(D=!0);return D}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=a.length;for(p=0;p<m;p+=1)n[a[p]].value=n[a[p]].defaultValue,n[a[p]].explicitSet=!1}if(Vi(t)==="object"){for(i in t)if(s=t[i],v(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&v(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(d=0;d<s[c].length;d+=1)typeof s[c][d]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,E=[];for(x in n)n[x].explicitSet===!0&&(n[x].type==="name"?E.push("/"+x+" /"+n[x].value):E.push("/"+x+" "+n[x].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(Cr.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],p=0,v=s.length;p<v;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return d.join("");a=a.toString(16),d.push(c[4-a.length],a)}return d.join("")},r=function(s){var o,a,l,c,d,p,v;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,v=(a=Object.keys(s).sort(function(m,x){return m-x})).length;p<v;p++)o=a[p],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,d=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,v=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),m="",x=0;x<v.length;x++)m+=String.fromCharCode(v[x]);var E=c();d({data:m,addLength1:!0,objectId:E}),l("endobj");var T=c();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:T}),l("endobj");var D=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Qf(a.fontName)),l("/FontFile2 "+E+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var k=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+Qf(a.fontName)),l("/FontDescriptor "+D+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+T+" 0 R"),l("/BaseFont /"+Qf(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+k+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,d=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,v="",m=0;m<p.length;m++)v+=String.fromCharCode(p[m]);var x=c();d({data:v,addLength1:!0,objectId:x}),l("endobj");var E=c();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:E}),l("endobj");var T=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+x+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Qf(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var D=0;D<a.metadata.hmtx.widths.length;D++)a.metadata.hmtx.widths[D]=parseInt(a.metadata.hmtx.widths[D]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+Qf(a.fontName)+"/FontDescriptor "+T+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,d=s.options||{},p=s.mutex||{},v=p.pdfEscape,m=p.activeFontKey,x=p.fonts,E=m,T="",D=0,k="",B=x[E].encoding;if(x[E].encoding!=="Identity-H")return{text:a,x:l,y:c,options:d,mutex:p};for(k=a,E=m,Array.isArray(a)&&(k=a[0]),D=0;D<k.length;D+=1)x[E].metadata.hasOwnProperty("cmap")&&(o=x[E].metadata.cmap.unicode.codeMap[k[D].charCodeAt(0)]),o||k[D].charCodeAt(0)<256&&x[E].metadata.hasOwnProperty("Unicode")?T+=k[D]:T+="";var W="";return parseInt(E.slice(1))<14||B==="WinAnsiEncoding"?W=v(T,E).split("").map(function(Q){return Q.charCodeAt(0).toString(16)}).join(""):B==="Identity-H"&&(W=n(T,x[E])),p.isHex=!0,{text:W,x:l,y:c,options:d,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(Cr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Cr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,d,p=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},T=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],D=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),k=!1,B=0;this.__bidiEngine__={};var W=function(R){var $=R.charCodeAt(),X=$>>8,K=E[X];return K!==void 0?p[256*K+(255&$)]:X===252||X===253?"AL":D.test(X)?"L":X===8?"R":"N"},Q=function(R){for(var $,X=0;X<R.length;X++){if(($=W(R.charAt(X)))==="L")return!1;if($==="R")return!0}return!1},pe=function(R,$,X,K){var F,N,J,Y,ye=$[K];switch(ye){case"L":case"R":k=!1;break;case"N":case"AN":break;case"EN":k&&(ye="AN");break;case"AL":k=!0,ye="R";break;case"WS":ye="N";break;case"CS":K<1||K+1>=$.length||(F=X[K-1])!=="EN"&&F!=="AN"||(N=$[K+1])!=="EN"&&N!=="AN"?ye="N":k&&(N="AN"),ye=N===F?N:"N";break;case"ES":ye=(F=K>0?X[K-1]:"B")==="EN"&&K+1<$.length&&$[K+1]==="EN"?"EN":"N";break;case"ET":if(K>0&&X[K-1]==="EN"){ye="EN";break}if(k){ye="N";break}for(J=K+1,Y=$.length;J<Y&&$[J]==="ET";)J++;ye=J<Y&&$[J]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(Y=$.length,J=K+1;J<Y&&$[J]==="NSM";)J++;if(J<Y){var Ce=R[K],He=Ce>=1425&&Ce<=2303||Ce===64286;if(F=$[J],He&&(F==="R"||F==="AL")){ye="R";break}}}ye=K<1||(F=$[K-1])==="B"?"N":X[K-1];break;case"B":k=!1,i=!0,ye=B;break;case"S":s=!0,ye="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":k=!1;break;case"BN":ye="N"}return ye},fe=function(R,$,X){var K=R.split("");return X&&O(K,X,{hiLevel:B}),K.reverse(),$&&$.reverse(),K.join("")},O=function(R,$,X){var K,F,N,J,Y,ye=-1,Ce=R.length,He=0,j=[],Z=B?m:v,ae=[];for(k=!1,i=!1,s=!1,F=0;F<Ce;F++)ae[F]=W(R[F]);for(N=0;N<Ce;N++){if(Y=He,j[N]=pe(R,ae,j,N),K=240&(He=Z[Y][x[j[N]]]),He&=15,$[N]=J=Z[He][5],K>0)if(K===16){for(F=ye;F<N;F++)$[F]=1;ye=-1}else ye=-1;if(Z[He][6])ye===-1&&(ye=N);else if(ye>-1){for(F=ye;F<N;F++)$[F]=J;ye=-1}ae[N]==="B"&&($[N]=0),X.hiLevel|=J}s&&function(de,ge,me){for(var oe=0;oe<me;oe++)if(de[oe]==="S"){ge[oe]=B;for(var re=oe-1;re>=0&&de[re]==="WS";re--)ge[re]=B}}(ae,$,Ce)},U=function(R,$,X,K,F){if(!(F.hiLevel<R)){if(R===1&&B===1&&!i)return $.reverse(),void(X&&X.reverse());for(var N,J,Y,ye,Ce=$.length,He=0;He<Ce;){if(K[He]>=R){for(Y=He+1;Y<Ce&&K[Y]>=R;)Y++;for(ye=He,J=Y-1;ye<J;ye++,J--)N=$[ye],$[ye]=$[J],$[J]=N,X&&(N=X[ye],X[ye]=X[J],X[J]=N);He=Y}He++}}},q=function(R,$,X){var K=R.split(""),F={hiLevel:B};return X||(X=[]),O(K,X,F),function(N,J,Y){if(Y.hiLevel!==0&&d)for(var ye,Ce=0;Ce<N.length;Ce++)J[Ce]===1&&(ye=T.indexOf(N[Ce]))>=0&&(N[Ce]=T[ye+1])}(K,X,F),U(2,K,$,X,F),U(1,K,$,X,F),K.join("")};return this.__bidiEngine__.doBidiReorder=function(R,$,X){if(function(F,N){if(N)for(var J=0;J<F.length;J++)N[J]=J;a===void 0&&(a=Q(F)),c===void 0&&(c=Q(F))}(R,$),o||!l||c)if(o&&l&&a^c)B=a?1:0,R=fe(R,$,X);else if(!o&&l&&c)B=a?1:0,R=q(R,$,X),R=fe(R,$);else if(!o||a||l||c){if(o&&!l&&a^c)R=fe(R,$),a?(B=0,R=q(R,$,X)):(B=1,R=q(R,$,X),R=fe(R,$));else if(o&&a&&!l&&c)B=1,R=q(R,$,X),R=fe(R,$);else if(!o&&!l&&a^c){var K=d;a?(B=1,R=q(R,$,X),B=0,d=!1,R=q(R,$,X),d=K):(B=0,R=q(R,$,X),R=fe(R,$),B=1,d=!1,R=q(R,$,X),d=K,R=fe(R,$))}}else B=0,R=q(R,$,X);else B=a?1:0,R=q(R,$,X);return R},this.__bidiEngine__.setOptions=function(R){R&&(o=R.isInputVisual,l=R.isOutputVisual,a=R.isInputRtl,c=R.isOutputRtl,d=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(Cr),Cr.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new yd(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new FV(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new SV(this.contents),this.head=new EV(this),this.name=new TV(this),this.cmap=new zE(this),this.toUnicode={},this.hhea=new MV(this),this.maxp=new DV(this),this.hmtx=new IV(this),this.post=new kV(this),this.os2=new PV(this),this.loca=new RV(this),this.glyf=new OV(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var xc,yd=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),SV=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,d,p,v,m,x,E;for(E in m=Object.keys(n).length,l=Math.log(2),p=16*Math.floor(Math.log(m)/l),o=Math.floor(p/l),d=16*m-p,(i=new yd).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(o),i.writeShort(d),s=16*m,c=i.pos+s,a=null,x=[],n)for(v=n[E],i.writeString(E),i.writeInt(t(v)),i.writeInt(c),i.writeInt(v.length),x=x.concat(v),E==="head"&&(a=c),c+=v.length;c%4;)x.push(0),c++;return i.write(x),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=$E.call(n);n.length%4;)n.push(0);for(s=new yd(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),CV={}.hasOwnProperty,eh=function(t,e){for(var n in e)CV.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};xc=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var EV=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,xc),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new yd).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),S5=function(){function t(e,n){var r,i,s,o,a,l,c,d,p,v,m,x,E,T,D,k,B;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),v=m/2,e.pos+=6,s=function(){var W,Q;for(Q=[],l=W=0;0<=v?W<v:W>v;l=0<=v?++W:--W)Q.push(e.readUInt16());return Q}(),e.pos+=2,E=function(){var W,Q;for(Q=[],l=W=0;0<=v?W<v:W>v;l=0<=v?++W:--W)Q.push(e.readUInt16());return Q}(),c=function(){var W,Q;for(Q=[],l=W=0;0<=v?W<v:W>v;l=0<=v?++W:--W)Q.push(e.readUInt16());return Q}(),d=function(){var W,Q;for(Q=[],l=W=0;0<=v?W<v:W>v;l=0<=v?++W:--W)Q.push(e.readUInt16());return Q}(),i=(this.length-e.pos+this.offset)/2,a=function(){var W,Q;for(Q=[],l=W=0;0<=i?W<i:W>i;l=0<=i?++W:--W)Q.push(e.readUInt16());return Q}(),l=D=0,B=s.length;D<B;l=++D)for(T=s[l],r=k=x=E[l];x<=T?k<=T:k>=T;r=x<=T?++k:--k)d[l]===0?o=r+c[l]:(o=a[d[l]/2+(r-x)-(v-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=p}return t.encode=function(e,n){var r,i,s,o,a,l,c,d,p,v,m,x,E,T,D,k,B,W,Q,pe,fe,O,U,q,R,$,X,K,F,N,J,Y,ye,Ce,He,j,Z,ae,de,ge,me,oe,re,Te,Le,qe;switch(K=new yd,o=Object.keys(e).sort(function(se,le){return se-le}),n){case"macroman":for(E=0,T=function(){var se=[];for(x=0;x<256;++x)se.push(0);return se}(),k={0:0},s={},F=0,ye=o.length;F<ye;F++)k[re=e[i=o[F]]]==null&&(k[re]=++E),s[i]={old:e[i],new:k[e[i]]},T[i]=k[e[i]];return K.writeUInt16(1),K.writeUInt16(0),K.writeUInt32(12),K.writeUInt16(0),K.writeUInt16(262),K.writeUInt16(0),K.write(T),{charMap:s,subtable:K.data,maxGlyphID:E+1};case"unicode":for($=[],p=[],B=0,k={},r={},D=c=null,N=0,Ce=o.length;N<Ce;N++)k[Q=e[i=o[N]]]==null&&(k[Q]=++B),r[i]={old:Q,new:k[Q]},a=k[Q]-i,D!=null&&a===c||(D&&p.push(D),$.push(i),c=a),D=i;for(D&&p.push(D),p.push(65535),$.push(65535),q=2*(U=$.length),O=2*Math.pow(Math.log(U)/Math.LN2,2),v=Math.log(O/2)/Math.LN2,fe=2*U-O,l=[],pe=[],m=[],x=J=0,He=$.length;J<He;x=++J){if(R=$[x],d=p[x],R===65535){l.push(0),pe.push(0);break}if(R-(X=r[R].new)>=32768)for(l.push(0),pe.push(2*(m.length+U-x)),i=Y=R;R<=d?Y<=d:Y>=d;i=R<=d?++Y:--Y)m.push(r[i].new);else l.push(X-R),pe.push(0)}for(K.writeUInt16(3),K.writeUInt16(1),K.writeUInt32(12),K.writeUInt16(4),K.writeUInt16(16+8*U+2*m.length),K.writeUInt16(0),K.writeUInt16(q),K.writeUInt16(O),K.writeUInt16(v),K.writeUInt16(fe),me=0,j=p.length;me<j;me++)i=p[me],K.writeUInt16(i);for(K.writeUInt16(0),oe=0,Z=$.length;oe<Z;oe++)i=$[oe],K.writeUInt16(i);for(Te=0,ae=l.length;Te<ae;Te++)a=l[Te],K.writeUInt16(a);for(Le=0,de=pe.length;Le<de;Le++)W=pe[Le],K.writeUInt16(W);for(qe=0,ge=m.length;qe<ge;qe++)E=m[qe],K.writeUInt16(E);return{charMap:r,subtable:K.data,maxGlyphID:B+1}}},t}(),zE=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,xc),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new S5(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=S5.encode(n,r),(s=new yd).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),MV=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,xc),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),PV=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,xc),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),kV=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,xc),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e}(),AV=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},TV=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,xc),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,c,d,p,v,m;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=p=0,v=i.length;p<v;o=++p)s=i[o],n.pos=s.offset,d=n.readString(s.length),a=new AV(d,s),c[m=s.nameID]==null&&(c[m]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),DV=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,xc),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),IV=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,xc),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,p;for(p=[],r=d=0;0<=s?d<s:d>s;r=0<=s?++d:--d)p.push(n.readInt16());return p}(),this.widths=(function(){var d,p,v,m;for(m=[],d=0,p=(v=this.metrics).length;d<p;d++)o=v[d],m.push(o.advance);return m}).call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),$E=[].slice,OV=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,xc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,c,d,p,v;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new yd(r.read(s))).readShort(),d=l.readShort(),v=l.readShort(),c=l.readShort(),p=l.readShort(),this.cache[n]=a===-1?new BV(l,d,v,c,p):new NV(l,a,d,v,c,p),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),NV=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),BV=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new yd($E.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),RV=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return eh(e,xc),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var d=new Array(4*i.length),p=0;p<i.length;++p)d[4*p+3]=255&i[p],d[4*p+2]=(65280&i[p])>>8,d[4*p+1]=(16711680&i[p])>>16,d[4*p]=(4278190080&i[p])>>24;return d},e}(),FV=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,d,p,v,m,x,E,T,D;for(i in r=zE.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},D=r.charMap)m[(l=D[i]).old]=l.new;for(x in v=r.maxGlyphID,o)x in m||(m[x]=v++);return d=function(k){var B,W;for(B in W={},k)W[k[B]]=B;return W}(m),p=Object.keys(d).sort(function(k,B){return k-B}),E=function(){var k,B,W;for(W=[],k=0,B=p.length;k<B;k++)a=p[k],W.push(d[a]);return W}(),s=this.font.glyf.encode(o,E,m),c=this.font.loca.encode(s.offsets,E),T={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(T["OS/2"]=this.font.os2.raw()),this.font.directory.encode(T)},t}();Cr.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();var zv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */zv.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,d="__lodash_placeholder__",p=1,v=2,m=4,x=1,E=2,T=1,D=2,k=4,B=8,W=16,Q=32,pe=64,fe=128,O=256,U=512,q=30,R="...",$=800,X=16,K=1,F=2,N=3,J=1/0,Y=9007199254740991,ye=17976931348623157e292,Ce=NaN,He=4294967295,j=He-1,Z=He>>>1,ae=[["ary",fe],["bind",T],["bindKey",D],["curry",B],["curryRight",W],["flip",U],["partial",Q],["partialRight",pe],["rearg",O]],de="[object Arguments]",ge="[object Array]",me="[object AsyncFunction]",oe="[object Boolean]",re="[object Date]",Te="[object DOMException]",Le="[object Error]",qe="[object Function]",se="[object GeneratorFunction]",le="[object Map]",he="[object Number]",ee="[object Null]",be="[object Object]",je="[object Promise]",We="[object Proxy]",Qe="[object RegExp]",Je="[object Set]",st="[object String]",Pt="[object Symbol]",Bt="[object Undefined]",Ht="[object WeakMap]",Jt="[object WeakSet]",fn="[object ArrayBuffer]",pn="[object DataView]",et="[object Float32Array]",ot="[object Float64Array]",rt="[object Int8Array]",Ft="[object Int16Array]",Xt="[object Int32Array]",Mn="[object Uint8Array]",xn="[object Uint8ClampedArray]",Cn="[object Uint16Array]",Vn="[object Uint32Array]",wn=/\b__p \+= '';/g,sn=/\b(__p \+=) '' \+/g,hn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Qn=/&(?:amp|lt|gt|quot|#39);/g,ir=/[&<>"']/g,dr=RegExp(Qn.source),Fn=RegExp(ir.source),Mr=/<%-([\s\S]+?)%>/g,ns=/<%([\s\S]+?)%>/g,Pi=/<%=([\s\S]+?)%>/g,Xs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ds=/^\w*$/,Yn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mt=/[\\^$.*+?()[\]{}|]/g,tt=RegExp(mt.source),Dt=/^\s+/,mn=/\s/,Vt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,jn=/\{\n\/\* \[wrapped with (.+)\] \*/,vn=/,? & /,Ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,tn=/[()=,{}\[\]\/\s]/,Ln=/\\(\\)?/g,zn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dn=/\w*$/,Zt=/^[-+]0x[0-9a-f]+$/i,$n=/^0b[01]+$/i,yi=/^\[object .+?Constructor\]$/,or=/^0o[0-7]+$/i,di=/^(?:0|[1-9]\d*)$/,ur=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ar=/($^)/,Gi=/['\n\r\u2028\u2029\\]/g,Ri="\\ud800-\\udfff",Fi="\\u0300-\\u036f",rs="\\ufe20-\\ufe2f",fs="\\u20d0-\\u20ff",ws=Fi+rs+fs,Is="\\u2700-\\u27bf",Os="a-z\\xdf-\\xf6\\xf8-\\xff",cr="\\xac\\xb1\\xd7\\xf7",gr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Si="\\u2000-\\u206f",Pr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",mr="A-Z\\xc0-\\xd6\\xd8-\\xde",Qa="\\ufe0e\\ufe0f",Sa=cr+gr+Si+Pr,Go="['’]",Jl="["+Ri+"]",br="["+Sa+"]",Kr="["+ws+"]",el="\\d+",Ns="["+Is+"]",Bs="["+Os+"]",Wu="[^"+Ri+Sa+el+Is+Os+mr+"]",Ll="\\ud83c[\\udffb-\\udfff]",Ca="(?:"+Kr+"|"+Ll+")",ji="[^"+Ri+"]",Wo="(?:\\ud83c[\\udde6-\\uddff]){2}",tl="[\\ud800-\\udbff][\\udc00-\\udfff]",Ao="["+mr+"]",xu="\\u200d",nl="(?:"+Bs+"|"+Wu+")",qu="(?:"+Ao+"|"+Wu+")",qo="(?:"+Go+"(?:d|ll|m|re|s|t|ve))?",Ea="(?:"+Go+"(?:D|LL|M|RE|S|T|VE))?",rl=Ca+"?",Ql="["+Qa+"]?",ps="(?:"+xu+"(?:"+[ji,Wo,tl].join("|")+")"+Ql+rl+")*",Lc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Lu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",fr=Ql+rl+ps,_r="(?:"+[Ns,Wo,tl].join("|")+")"+fr,Yo="(?:"+[ji+Kr+"?",Kr,Wo,tl,Jl].join("|")+")",Wr=RegExp(Go,"g"),Yu=RegExp(Kr,"g"),Sl=RegExp(Ll+"(?="+Ll+")|"+Yo+fr,"g"),Cl=RegExp([Ao+"?"+Bs+"+"+qo+"(?="+[br,Ao,"$"].join("|")+")",qu+"+"+Ea+"(?="+[br,Ao+nl,"$"].join("|")+")",Ao+"?"+nl+"+"+qo,Ao+"+"+Ea,Lu,Lc,el,_r].join("|"),"g"),Ko=RegExp("["+xu+Ri+ws+Qa+"]"),il=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ku=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],eu=-1,vr={};vr[et]=vr[ot]=vr[rt]=vr[Ft]=vr[Xt]=vr[Mn]=vr[xn]=vr[Cn]=vr[Vn]=!0,vr[de]=vr[ge]=vr[fn]=vr[oe]=vr[pn]=vr[re]=vr[Le]=vr[qe]=vr[le]=vr[he]=vr[be]=vr[Qe]=vr[Je]=vr[st]=vr[Ht]=!1;var Or={};Or[de]=Or[ge]=Or[fn]=Or[pn]=Or[oe]=Or[re]=Or[et]=Or[ot]=Or[rt]=Or[Ft]=Or[Xt]=Or[le]=Or[he]=Or[be]=Or[Qe]=Or[Je]=Or[st]=Or[Pt]=Or[Mn]=Or[xn]=Or[Cn]=Or[Vn]=!0,Or[Le]=Or[qe]=Or[Ht]=!1;var sl={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Sc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Su={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},El=parseFloat,nu=parseInt,Cu=typeof oa=="object"&&oa&&oa.Object===Object&&oa,Fr=typeof self=="object"&&self&&self.Object===Object&&self,Wi=Cu||Fr||Function("return this")(),nr=e&&!e.nodeType&&e,qi=nr&&!0&&t&&!t.nodeType&&t,Ml=qi&&qi.exports===nr,Ma=Ml&&Cu.process,ki=function(){try{var bt=qi&&qi.require&&qi.require("util").types;return bt||Ma&&Ma.binding&&Ma.binding("util")}catch{}}(),Eu=ki&&ki.isArrayBuffer,la=ki&&ki.isDate,ru=ki&&ki.isMap,iu=ki&&ki.isRegExp,Fo=ki&&ki.isSet,su=ki&&ki.isTypedArray;function ri(bt,Gt,kt){switch(kt.length){case 0:return bt.call(Gt);case 1:return bt.call(Gt,kt[0]);case 2:return bt.call(Gt,kt[0],kt[1]);case 3:return bt.call(Gt,kt[0],kt[1],kt[2])}return bt.apply(Gt,kt)}function Cc(bt,Gt,kt,kn){for(var Hn=-1,pr=bt==null?0:bt.length;++Hn<pr;){var Ai=bt[Hn];Gt(kn,Ai,kt(Ai),bt)}return kn}function xs(bt,Gt){for(var kt=-1,kn=bt==null?0:bt.length;++kt<kn&&Gt(bt[kt],kt,bt)!==!1;);return bt}function Zo(bt,Gt){for(var kt=bt==null?0:bt.length;kt--&&Gt(bt[kt],kt,bt)!==!1;);return bt}function ou(bt,Gt){for(var kt=-1,kn=bt==null?0:bt.length;++kt<kn;)if(!Gt(bt[kt],kt,bt))return!1;return!0}function Xo(bt,Gt){for(var kt=-1,kn=bt==null?0:bt.length,Hn=0,pr=[];++kt<kn;){var Ai=bt[kt];Gt(Ai,kt,bt)&&(pr[Hn++]=Ai)}return pr}function Pl(bt,Gt){var kt=bt==null?0:bt.length;return!!kt&&un(bt,Gt,0)>-1}function kl(bt,Gt,kt){for(var kn=-1,Hn=bt==null?0:bt.length;++kn<Hn;)if(kt(Gt,bt[kn]))return!0;return!1}function ii(bt,Gt){for(var kt=-1,kn=bt==null?0:bt.length,Hn=Array(kn);++kt<kn;)Hn[kt]=Gt(bt[kt],kt,bt);return Hn}function To(bt,Gt){for(var kt=-1,kn=Gt.length,Hn=bt.length;++kt<kn;)bt[Hn+kt]=Gt[kt];return bt}function Pa(bt,Gt,kt,kn){var Hn=-1,pr=bt==null?0:bt.length;for(kn&&pr&&(kt=bt[++Hn]);++Hn<pr;)kt=Gt(kt,bt[Hn],Hn,bt);return kt}function Yi(bt,Gt,kt,kn){var Hn=bt==null?0:bt.length;for(kn&&Hn&&(kt=bt[--Hn]);Hn--;)kt=Gt(kt,bt[Hn],Hn,bt);return kt}function z(bt,Gt){for(var kt=-1,kn=bt==null?0:bt.length;++kt<kn;)if(Gt(bt[kt],kt,bt))return!0;return!1}var we=hr("length");function Ye(bt){return bt.split("")}function ct(bt){return bt.match(Ut)||[]}function Lt(bt,Gt,kt){var kn;return kt(bt,function(Hn,pr,Ai){if(Gt(Hn,pr,Ai))return kn=pr,!1}),kn}function jt(bt,Gt,kt,kn){for(var Hn=bt.length,pr=kt+(kn?1:-1);kn?pr--:++pr<Hn;)if(Gt(bt[pr],pr,bt))return pr;return-1}function un(bt,Gt,kt){return Gt===Gt?gs(bt,Gt,kt):jt(bt,Nn,kt)}function Tn(bt,Gt,kt,kn){for(var Hn=kt-1,pr=bt.length;++Hn<pr;)if(kn(bt[Hn],Gt))return Hn;return-1}function Nn(bt){return bt!==bt}function er(bt,Gt){var kt=bt==null?0:bt.length;return kt?si(bt,Gt)/kt:Ce}function hr(bt){return function(Gt){return Gt==null?n:Gt[bt]}}function Ar(bt){return function(Gt){return bt==null?n:bt[Gt]}}function Ci(bt,Gt,kt,kn,Hn){return Hn(bt,function(pr,Ai,oi){kt=kn?(kn=!1,pr):Gt(kt,pr,Ai,oi)}),kt}function Jr(bt,Gt){var kt=bt.length;for(bt.sort(Gt);kt--;)bt[kt]=bt[kt].value;return bt}function si(bt,Gt){for(var kt,kn=-1,Hn=bt.length;++kn<Hn;){var pr=Gt(bt[kn]);pr!==n&&(kt=kt===n?pr:kt+pr)}return kt}function Ki(bt,Gt){for(var kt=-1,kn=Array(bt);++kt<bt;)kn[kt]=Gt(kt);return kn}function is(bt,Gt){return ii(Gt,function(kt){return[kt,bt[kt]]})}function Do(bt){return bt&&bt.slice(0,Aa(bt)+1).replace(Dt,"")}function Tr(bt){return function(Gt){return bt(Gt)}}function Rs(bt,Gt){return ii(Gt,function(kt){return bt[kt]})}function Al(bt,Gt){return bt.has(Gt)}function Js(bt,Gt){for(var kt=-1,kn=bt.length;++kt<kn&&un(Gt,bt[kt],0)>-1;);return kt}function Mu(bt,Gt){for(var kt=bt.length;kt--&&un(Gt,bt[kt],0)>-1;);return kt}function ua(bt,Gt){for(var kt=bt.length,kn=0;kt--;)bt[kt]===Gt&&++kn;return kn}var Zu=Ar(sl),ol=Ar(Sc);function al(bt){return"\\"+Su[bt]}function ss(bt,Gt){return bt==null?n:bt[Gt]}function ca(bt){return Ko.test(bt)}function Io(bt){return il.test(bt)}function po(bt){for(var Gt,kt=[];!(Gt=bt.next()).done;)kt.push(Gt.value);return kt}function Tl(bt){var Gt=-1,kt=Array(bt.size);return bt.forEach(function(kn,Hn){kt[++Gt]=[Hn,kn]}),kt}function Fs(bt,Gt){return function(kt){return bt(Gt(kt))}}function Qs(bt,Gt){for(var kt=-1,kn=bt.length,Hn=0,pr=[];++kt<kn;){var Ai=bt[kt];(Ai===Gt||Ai===d)&&(bt[kt]=d,pr[Hn++]=kt)}return pr}function eo(bt){var Gt=-1,kt=Array(bt.size);return bt.forEach(function(kn){kt[++Gt]=kn}),kt}function Ec(bt){var Gt=-1,kt=Array(bt.size);return bt.forEach(function(kn){kt[++Gt]=[kn,kn]}),kt}function gs(bt,Gt,kt){for(var kn=kt-1,Hn=bt.length;++kn<Hn;)if(bt[kn]===Gt)return kn;return-1}function ka(bt,Gt,kt){for(var kn=kt+1;kn--;)if(bt[kn]===Gt)return kn;return kn}function js(bt){return ca(bt)?$s(bt):we(bt)}function zs(bt){return ca(bt)?Ls(bt):Ye(bt)}function Aa(bt){for(var Gt=bt.length;Gt--&&mn.test(bt.charAt(Gt)););return Gt}var Ta=Ar(tu);function $s(bt){for(var Gt=Sl.lastIndex=0;Sl.test(bt);)++Gt;return Gt}function Ls(bt){return bt.match(Sl)||[]}function ha(bt){return bt.match(Cl)||[]}var Oo=function bt(Gt){Gt=Gt==null?Wi:Us.defaults(Wi.Object(),Gt,Us.pick(Wi,Ku));var kt=Gt.Array,kn=Gt.Date,Hn=Gt.Error,pr=Gt.Function,Ai=Gt.Math,oi=Gt.Object,au=Gt.RegExp,to=Gt.String,Ti=Gt.TypeError,da=kt.prototype,Da=pr.prototype,fa=oi.prototype,pa=Gt["__core-js_shared__"],ga=Da.toString,jr=fa.hasOwnProperty,Jo=0,Ss=function(){var f=/[^.]+$/.exec(pa&&pa.keys&&pa.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),ai=fa.toString,fi=ga.call(oi),Zi=Wi._,_i=au("^"+ga.call(jr).replace(mt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),No=Ml?Gt.Buffer:n,go=Gt.Symbol,jo=Gt.Uint8Array,Xu=No?No.allocUnsafe:n,ma=Fs(oi.getPrototypeOf,oi),os=oi.create,bi=fa.propertyIsEnumerable,Vs=da.splice,mo=go?go.isConcatSpreadable:n,lr=go?go.iterator:n,Ia=go?go.toStringTag:n,Oa=function(){try{var f=Dd(oi,"defineProperty");return f({},"",{}),f}catch{}}(),Qo=Gt.clearTimeout!==Wi.clearTimeout&&Gt.clearTimeout,no=kn&&kn.now!==Wi.Date.now&&kn.now,th=Gt.setTimeout!==Wi.setTimeout&&Gt.setTimeout,Cs=Ai.ceil,Es=Ai.floor,ea=oi.getOwnPropertySymbols,u=No?No.isBuffer:n,y=Gt.isFinite,M=da.join,H=Fs(oi.keys,oi),ue=Ai.max,Me=Ai.min,at=kn.now,Mt=Gt.parseInt,zt=Ai.random,on=da.reverse,Dn=Dd(Gt,"DataView"),Kn=Dd(Gt,"Map"),kr=Dd(Gt,"Promise"),as=Dd(Gt,"Set"),zi=Dd(Gt,"WeakMap"),Ms=Dd(oi,"create"),Di=zi&&new zi,vo={},nh=Id(Dn),va=Id(Kn),ta=Id(kr),zo=Id(as),Cd=Id(zi),Pu=go?go.prototype:n,Qr=Pu?Pu.valueOf:n,Hs=Pu?Pu.toString:n;function Oe(f){if(ro(f)&&!$r(f)&&!(f instanceof Dr)){if(f instanceof Ps)return f;if(jr.call(f,"__wrapped__"))return Nw(f)}return new Ps(f)}var yo=function(){function f(){}return function(b){if(!Ws(b))return{};if(os)return os(b);f.prototype=b;var I=new f;return f.prototype=n,I}}();function Ju(){}function Ps(f,b){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=n}Oe.templateSettings={escape:Mr,evaluate:ns,interpolate:Pi,variable:"",imports:{_:Oe}},Oe.prototype=Ju.prototype,Oe.prototype.constructor=Oe,Ps.prototype=yo(Ju.prototype),Ps.prototype.constructor=Ps;function Dr(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=He,this.__views__=[]}function Bh(){var f=new Dr(this.__wrapped__);return f.__actions__=Il(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=Il(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=Il(this.__views__),f}function _f(){if(this.__filtered__){var f=new Dr(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function Rh(){var f=this.__wrapped__.value(),b=this.__dir__,I=$r(f),ne=b<0,Se=I?f.length:0,ze=OP(0,Se,this.__views__),it=ze.start,gt=ze.end,Et=gt-it,an=ne?gt:it-1,ln=this.__iteratees__,gn=ln.length,Rn=0,rr=Me(Et,this.__takeCount__);if(!I||!ne&&Se==Et&&rr==Et)return ku(f,this.__actions__);var wr=[];e:for(;Et--&&Rn<rr;){an+=b;for(var Zr=-1,xr=f[an];++Zr<gn;){var li=ln[Zr],gi=li.iteratee,cu=li.type,hl=gi(xr);if(cu==F)xr=hl;else if(!hl){if(cu==K)continue e;break e}}wr[Rn++]=xr}return wr}Dr.prototype=yo(Ju.prototype),Dr.prototype.constructor=Dr;function ll(f){var b=-1,I=f==null?0:f.length;for(this.clear();++b<I;){var ne=f[b];this.set(ne[0],ne[1])}}function rh(){this.__data__=Ms?Ms(null):{},this.size=0}function Ed(f){var b=this.has(f)&&delete this.__data__[f];return this.size-=b?1:0,b}function Ip(f){var b=this.__data__;if(Ms){var I=b[f];return I===l?n:I}return jr.call(b,f)?b[f]:n}function Mc(f){var b=this.__data__;return Ms?b[f]!==n:jr.call(b,f)}function Fh(f,b){var I=this.__data__;return this.size+=this.has(f)?0:1,I[f]=Ms&&b===n?l:b,this}ll.prototype.clear=rh,ll.prototype.delete=Ed,ll.prototype.get=Ip,ll.prototype.has=Mc,ll.prototype.set=Fh;function lu(f){var b=-1,I=f==null?0:f.length;for(this.clear();++b<I;){var ne=f[b];this.set(ne[0],ne[1])}}function Op(){this.__data__=[],this.size=0}function jh(f){var b=this.__data__,I=yt(b,f);if(I<0)return!1;var ne=b.length-1;return I==ne?b.pop():Vs.call(b,I,1),--this.size,!0}function zh(f){var b=this.__data__,I=yt(b,f);return I<0?n:b[I][1]}function wf(f){return yt(this.__data__,f)>-1}function xf(f,b){var I=this.__data__,ne=yt(I,f);return ne<0?(++this.size,I.push([f,b])):I[ne][1]=b,this}lu.prototype.clear=Op,lu.prototype.delete=jh,lu.prototype.get=zh,lu.prototype.has=wf,lu.prototype.set=xf;function Na(f){var b=-1,I=f==null?0:f.length;for(this.clear();++b<I;){var ne=f[b];this.set(ne[0],ne[1])}}function Lf(){this.size=0,this.__data__={hash:new ll,map:new(Kn||lu),string:new ll}}function Sf(f){var b=Hm(this,f).delete(f);return this.size-=b?1:0,b}function Cf(f){return Hm(this,f).get(f)}function w(f){return Hm(this,f).has(f)}function A(f,b){var I=Hm(this,f),ne=I.size;return I.set(f,b),this.size+=I.size==ne?0:1,this}Na.prototype.clear=Lf,Na.prototype.delete=Sf,Na.prototype.get=Cf,Na.prototype.has=w,Na.prototype.set=A;function G(f){var b=-1,I=f==null?0:f.length;for(this.__data__=new Na;++b<I;)this.add(f[b])}function ce(f){return this.__data__.set(f,l),this}function xe(f){return this.__data__.has(f)}G.prototype.add=G.prototype.push=ce,G.prototype.has=xe;function Pe(f){var b=this.__data__=new lu(f);this.size=b.size}function Ae(){this.__data__=new lu,this.size=0}function Ie(f){var b=this.__data__,I=b.delete(f);return this.size=b.size,I}function Be(f){return this.__data__.get(f)}function Ge(f){return this.__data__.has(f)}function dt(f,b){var I=this.__data__;if(I instanceof lu){var ne=I.__data__;if(!Kn||ne.length<i-1)return ne.push([f,b]),this.size=++I.size,this;I=this.__data__=new Na(ne)}return I.set(f,b),this.size=I.size,this}Pe.prototype.clear=Ae,Pe.prototype.delete=Ie,Pe.prototype.get=Be,Pe.prototype.has=Ge,Pe.prototype.set=dt;function Ot(f,b){var I=$r(f),ne=!I&&Od(f),Se=!I&&!ne&&Uh(f),ze=!I&&!ne&&!Se&&Of(f),it=I||ne||Se||ze,gt=it?Ki(f.length,to):[],Et=gt.length;for(var an in f)(b||jr.call(f,an))&&!(it&&(an=="length"||Se&&(an=="offset"||an=="parent")||ze&&(an=="buffer"||an=="byteLength"||an=="byteOffset")||uh(an,Et)))&&gt.push(an);return gt}function Nt(f){var b=f.length;return b?f[kd(0,b-1)]:n}function xt(f,b){return Gm(Il(f),Zn(b,0,f.length))}function qt(f){return Gm(Il(f))}function $t(f,b,I){(I!==n&&!ic(f[b],I)||I===n&&!(b in f))&&An(f,b,I)}function ft(f,b,I){var ne=f[b];(!(jr.call(f,b)&&ic(ne,I))||I===n&&!(b in f))&&An(f,b,I)}function yt(f,b){for(var I=f.length;I--;)if(ic(f[I][0],b))return I;return-1}function Qt(f,b,I,ne){return V(f,function(Se,ze,it){b(ne,Se,I(Se),it)}),ne}function cn(f,b){return f&&Ac(b,na(b),f)}function nn(f,b){return f&&Ac(b,Nl(b),f)}function An(f,b,I){b=="__proto__"&&Oa?Oa(f,b,{configurable:!0,enumerable:!0,value:I,writable:!0}):f[b]=I}function En(f,b){for(var I=-1,ne=b.length,Se=kt(ne),ze=f==null;++I<ne;)Se[I]=ze?n:a1(f,b[I]);return Se}function Zn(f,b,I){return f===f&&(I!==n&&(f=f<=I?f:I),b!==n&&(f=f>=b?f:b)),f}function h(f,b,I,ne,Se,ze){var it,gt=b&p,Et=b&v,an=b&m;if(I&&(it=Se?I(f,ne,Se,ze):I(f)),it!==n)return it;if(!Ws(f))return f;var ln=$r(f);if(ln){if(it=BP(f),!gt)return Il(f,it)}else{var gn=Ra(f),Rn=gn==qe||gn==se;if(Uh(f))return aw(f,gt);if(gn==be||gn==de||Rn&&!Se){if(it=Et||Rn?{}:Ew(f),!gt)return Et?CP(f,nn(it,f)):SP(f,cn(it,f))}else{if(!Or[gn])return Se?f:{};it=RP(f,gn,gt)}}ze||(ze=new Pe);var rr=ze.get(f);if(rr)return rr;ze.set(f,it),tx(f)?f.forEach(function(xr){it.add(h(xr,b,I,xr,f,ze))}):Qw(f)&&f.forEach(function(xr,li){it.set(li,h(xr,b,I,li,f,ze))});var wr=an?Et?qy:Wy:Et?Nl:na,Zr=ln?n:wr(f);return xs(Zr||f,function(xr,li){Zr&&(li=xr,xr=f[li]),ft(it,li,h(xr,b,I,li,f,ze))}),it}function g(f){var b=na(f);return function(I){return _(I,f,b)}}function _(f,b,I){var ne=I.length;if(f==null)return!ne;for(f=oi(f);ne--;){var Se=I[ne],ze=b[Se],it=f[Se];if(it===n&&!(Se in f)||!ze(it))return!1}return!0}function S(f,b,I){if(typeof f!="function")throw new Ti(o);return jp(function(){f.apply(n,I)},b)}function P(f,b,I,ne){var Se=-1,ze=Pl,it=!0,gt=f.length,Et=[],an=b.length;if(!gt)return Et;I&&(b=ii(b,Tr(I))),ne?(ze=kl,it=!1):b.length>=i&&(ze=Al,it=!1,b=new G(b));e:for(;++Se<gt;){var ln=f[Se],gn=I==null?ln:I(ln);if(ln=ne||ln!==0?ln:0,it&&gn===gn){for(var Rn=an;Rn--;)if(b[Rn]===gn)continue e;Et.push(ln)}else ze(b,gn,ne)||Et.push(ln)}return Et}var V=dw(Kt),te=dw(yn,!0);function ie(f,b){var I=!0;return V(f,function(ne,Se,ze){return I=!!b(ne,Se,ze),I}),I}function ve(f,b,I){for(var ne=-1,Se=f.length;++ne<Se;){var ze=f[ne],it=b(ze);if(it!=null&&(gt===n?it===it&&!uu(it):I(it,gt)))var gt=it,Et=ze}return Et}function Ee(f,b,I,ne){var Se=f.length;for(I=Yr(I),I<0&&(I=-I>Se?0:Se+I),ne=ne===n||ne>Se?Se:Yr(ne),ne<0&&(ne+=Se),ne=I>ne?0:rx(ne);I<ne;)f[I++]=b;return f}function Ze(f,b){var I=[];return V(f,function(ne,Se,ze){b(ne,Se,ze)&&I.push(ne)}),I}function Ve(f,b,I,ne,Se){var ze=-1,it=f.length;for(I||(I=jP),Se||(Se=[]);++ze<it;){var gt=f[ze];b>0&&I(gt)?b>1?Ve(gt,b-1,I,ne,Se):To(Se,gt):ne||(Se[Se.length]=gt)}return Se}var vt=fw(),At=fw(!0);function Kt(f,b){return f&&vt(f,b,na)}function yn(f,b){return f&&At(f,b,na)}function Sn(f,b){return Xo(b,function(I){return ch(f[I])})}function sr(f,b){b=rc(b,f);for(var I=0,ne=b.length;f!=null&&I<ne;)f=f[Tc(b[I++])];return I&&I==ne?f:n}function Ke(f,b,I){var ne=b(f);return $r(f)?ne:To(ne,I(f))}function nt(f){return f==null?f===n?Bt:ee:Ia&&Ia in oi(f)?IP(f):WP(f)}function ht(f,b){return f>b}function Rt(f,b){return f!=null&&jr.call(f,b)}function wt(f,b){return f!=null&&b in oi(f)}function It(f,b,I){return f>=Me(b,I)&&f<ue(b,I)}function _e(f,b,I){for(var ne=I?kl:Pl,Se=f[0].length,ze=f.length,it=ze,gt=kt(ze),Et=1/0,an=[];it--;){var ln=f[it];it&&b&&(ln=ii(ln,Tr(b))),Et=Me(ln.length,Et),gt[it]=!I&&(b||Se>=120&&ln.length>=120)?new G(it&&ln):n}ln=f[0];var gn=-1,Rn=gt[0];e:for(;++gn<Se&&an.length<Et;){var rr=ln[gn],wr=b?b(rr):rr;if(rr=I||rr!==0?rr:0,!(Rn?Al(Rn,wr):ne(an,wr,I))){for(it=ze;--it;){var Zr=gt[it];if(!(Zr?Al(Zr,wr):ne(f[it],wr,I)))continue e}Rn&&Rn.push(wr),an.push(rr)}}return an}function ke(f,b,I,ne){return Kt(f,function(Se,ze,it){b(ne,I(Se),ze,it)}),ne}function Fe(f,b,I){b=rc(b,f),f=Aw(f,b);var ne=f==null?f:f[Tc(Du(b))];return ne==null?n:ri(ne,f,I)}function Re(f){return ro(f)&&nt(f)==de}function $e(f){return ro(f)&&nt(f)==fn}function Ue(f){return ro(f)&&nt(f)==re}function lt(f,b,I,ne,Se){return f===b?!0:f==null||b==null||!ro(f)&&!ro(b)?f!==f&&b!==b:ut(f,b,I,ne,lt,Se)}function ut(f,b,I,ne,Se,ze){var it=$r(f),gt=$r(b),Et=it?ge:Ra(f),an=gt?ge:Ra(b);Et=Et==de?be:Et,an=an==de?be:an;var ln=Et==be,gn=an==be,Rn=Et==an;if(Rn&&Uh(f)){if(!Uh(b))return!1;it=!0,ln=!1}if(Rn&&!ln)return ze||(ze=new Pe),it||Of(f)?Lw(f,b,I,ne,Se,ze):TP(f,b,Et,I,ne,Se,ze);if(!(I&x)){var rr=ln&&jr.call(f,"__wrapped__"),wr=gn&&jr.call(b,"__wrapped__");if(rr||wr){var Zr=rr?f.value():f,xr=wr?b.value():b;return ze||(ze=new Pe),Se(Zr,xr,I,ne,ze)}}return Rn?(ze||(ze=new Pe),DP(f,b,I,ne,Se,ze)):!1}function pt(f){return ro(f)&&Ra(f)==le}function St(f,b,I,ne){var Se=I.length,ze=Se,it=!ne;if(f==null)return!ze;for(f=oi(f);Se--;){var gt=I[Se];if(it&&gt[2]?gt[1]!==f[gt[0]]:!(gt[0]in f))return!1}for(;++Se<ze;){gt=I[Se];var Et=gt[0],an=f[Et],ln=gt[1];if(it&&gt[2]){if(an===n&&!(Et in f))return!1}else{var gn=new Pe;if(ne)var Rn=ne(an,ln,Et,f,b,gn);if(!(Rn===n?lt(ln,an,x|E,ne,gn):Rn))return!1}}return!0}function Ct(f){if(!Ws(f)||$P(f))return!1;var b=ch(f)?_i:yi;return b.test(Id(f))}function rn(f){return ro(f)&&nt(f)==Qe}function Bn(f){return ro(f)&&Ra(f)==Je}function Un(f){return ro(f)&&Xm(f.length)&&!!vr[nt(f)]}function Xn(f){return typeof f=="function"?f:f==null?Bl:typeof f=="object"?$r(f)?Qu(f[0],f[1]):bo(f):px(f)}function ei(f){if(!Fp(f))return H(f);var b=[];for(var I in oi(f))jr.call(f,I)&&I!="constructor"&&b.push(I);return b}function pi(f){if(!Ws(f))return GP(f);var b=Fp(f),I=[];for(var ne in f)ne=="constructor"&&(b||!jr.call(f,ne))||I.push(ne);return I}function zr(f,b){return f<b}function wi(f,b){var I=-1,ne=Ol(f)?kt(f.length):[];return V(f,function(Se,ze,it){ne[++I]=b(Se,ze,it)}),ne}function bo(f){var b=Ky(f);return b.length==1&&b[0][2]?Pw(b[0][0],b[0][1]):function(I){return I===f||St(I,f,b)}}function Qu(f,b){return Xy(f)&&Mw(b)?Pw(Tc(f),b):function(I){var ne=a1(I,f);return ne===n&&ne===b?l1(I,f):lt(b,ne,x|E)}}function ya(f,b,I,ne,Se){f!==b&&vt(b,function(ze,it){if(Se||(Se=new Pe),Ws(ze))Md(f,b,it,I,ya,ne,Se);else{var gt=ne?ne(Qy(f,it),ze,it+"",f,b,Se):n;gt===n&&(gt=ze),$t(f,it,gt)}},Nl)}function Md(f,b,I,ne,Se,ze,it){var gt=Qy(f,I),Et=Qy(b,I),an=it.get(Et);if(an){$t(f,I,an);return}var ln=ze?ze(gt,Et,I+"",f,b,it):n,gn=ln===n;if(gn){var Rn=$r(Et),rr=!Rn&&Uh(Et),wr=!Rn&&!rr&&Of(Et);ln=Et,Rn||rr||wr?$r(gt)?ln=gt:_o(gt)?ln=Il(gt):rr?(gn=!1,ln=aw(Et,!0)):wr?(gn=!1,ln=lw(Et,!0)):ln=[]:zp(Et)||Od(Et)?(ln=gt,Od(gt)?ln=ix(gt):(!Ws(gt)||ch(gt))&&(ln=Ew(Et))):gn=!1}gn&&(it.set(Et,ln),Se(ln,Et,ne,ze,it),it.delete(Et)),$t(f,I,ln)}function ul(f,b){var I=f.length;if(I)return b+=b<0?I:0,uh(b,I)?f[b]:n}function Pc(f,b,I){b.length?b=ii(b,function(ze){return $r(ze)?function(it){return sr(it,ze.length===1?ze[0]:ze)}:ze}):b=[Bl];var ne=-1;b=ii(b,Tr(yr()));var Se=wi(f,function(ze,it,gt){var Et=ii(b,function(an){return an(ze)});return{criteria:Et,index:++ne,value:ze}});return Jr(Se,function(ze,it){return LP(ze,it,I)})}function ba(f,b){return Gs(f,b,function(I,ne){return l1(f,ne)})}function Gs(f,b,I){for(var ne=-1,Se=b.length,ze={};++ne<Se;){var it=b[ne],gt=sr(f,it);I(gt,it)&&ih(ze,rc(it,f),gt)}return ze}function Xi(f){return function(b){return sr(b,f)}}function Ef(f,b,I,ne){var Se=ne?Tn:un,ze=-1,it=b.length,gt=f;for(f===b&&(b=Il(b)),I&&(gt=ii(f,Tr(I)));++ze<it;)for(var Et=0,an=b[ze],ln=I?I(an):an;(Et=Se(gt,ln,Et,ne))>-1;)gt!==f&&Vs.call(gt,Et,1),Vs.call(f,Et,1);return f}function Pd(f,b){for(var I=f?b.length:0,ne=I-1;I--;){var Se=b[I];if(I==ne||Se!==ze){var ze=Se;uh(Se)?Vs.call(f,Se,1):sh(f,Se)}}return f}function kd(f,b){return f+Es(zt()*(b-f+1))}function Ad(f,b,I,ne){for(var Se=-1,ze=ue(Cs((b-f)/(I||1)),0),it=kt(ze);ze--;)it[ne?ze:++Se]=f,f+=I;return it}function Mf(f,b){var I="";if(!f||b<1||b>Y)return I;do b%2&&(I+=f),b=Es(b/2),b&&(f+=f);while(b);return I}function qr(f,b){return e1(kw(f,b,Bl),f+"")}function Pf(f){return Nt(Nf(f))}function Im(f,b){var I=Nf(f);return Gm(I,Zn(b,0,I.length))}function ih(f,b,I,ne){if(!Ws(f))return f;b=rc(b,f);for(var Se=-1,ze=b.length,it=ze-1,gt=f;gt!=null&&++Se<ze;){var Et=Tc(b[Se]),an=I;if(Et==="__proto__"||Et==="constructor"||Et==="prototype")return f;if(Se!=it){var ln=gt[Et];an=ne?ne(ln,Et,gt):n,an===n&&(an=Ws(ln)?ln:uh(b[Se+1])?[]:{})}ft(gt,Et,an),gt=gt[Et]}return f}var ec=Di?function(f,b){return Di.set(f,b),f}:Bl,Om=Oa?function(f,b){return Oa(f,"toString",{configurable:!0,enumerable:!1,value:c1(b),writable:!0})}:Bl;function Nm(f){return Gm(Nf(f))}function Dl(f,b,I){var ne=-1,Se=f.length;b<0&&(b=-b>Se?0:Se+b),I=I>Se?Se:I,I<0&&(I+=Se),Se=b>I?0:I-b>>>0,b>>>=0;for(var ze=kt(Se);++ne<Se;)ze[ne]=f[ne+b];return ze}function Bm(f,b){var I;return V(f,function(ne,Se,ze){return I=b(ne,Se,ze),!I}),!!I}function tc(f,b,I){var ne=0,Se=f==null?ne:f.length;if(typeof b=="number"&&b===b&&Se<=Z){for(;ne<Se;){var ze=ne+Se>>>1,it=f[ze];it!==null&&!uu(it)&&(I?it<=b:it<b)?ne=ze+1:Se=ze}return Se}return Np(f,b,Bl,I)}function Np(f,b,I,ne){var Se=0,ze=f==null?0:f.length;if(ze===0)return 0;b=I(b);for(var it=b!==b,gt=b===null,Et=uu(b),an=b===n;Se<ze;){var ln=Es((Se+ze)/2),gn=I(f[ln]),Rn=gn!==n,rr=gn===null,wr=gn===gn,Zr=uu(gn);if(it)var xr=ne||wr;else an?xr=wr&&(ne||Rn):gt?xr=wr&&Rn&&(ne||!rr):Et?xr=wr&&Rn&&!rr&&(ne||!Zr):rr||Zr?xr=!1:xr=ne?gn<=b:gn<b;xr?Se=ln+1:ze=ln}return Me(ze,j)}function Bp(f,b){for(var I=-1,ne=f.length,Se=0,ze=[];++I<ne;){var it=f[I],gt=b?b(it):it;if(!I||!ic(gt,Et)){var Et=gt;ze[Se++]=it===0?0:it}}return ze}function Rm(f){return typeof f=="number"?f:uu(f)?Ce:+f}function Ba(f){if(typeof f=="string")return f;if($r(f))return ii(f,Ba)+"";if(uu(f))return Hs?Hs.call(f):"";var b=f+"";return b=="0"&&1/f==-1/0?"-0":b}function kc(f,b,I){var ne=-1,Se=Pl,ze=f.length,it=!0,gt=[],Et=gt;if(I)it=!1,Se=kl;else if(ze>=i){var an=b?null:kP(f);if(an)return eo(an);it=!1,Se=Al,Et=new G}else Et=b?[]:gt;e:for(;++ne<ze;){var ln=f[ne],gn=b?b(ln):ln;if(ln=I||ln!==0?ln:0,it&&gn===gn){for(var Rn=Et.length;Rn--;)if(Et[Rn]===gn)continue e;b&&Et.push(gn),gt.push(ln)}else Se(Et,gn,I)||(Et!==gt&&Et.push(gn),gt.push(ln))}return gt}function sh(f,b){return b=rc(b,f),f=Aw(f,b),f==null||delete f[Tc(Du(b))]}function kf(f,b,I,ne){return ih(f,b,I(sr(f,b)),ne)}function oh(f,b,I,ne){for(var Se=f.length,ze=ne?Se:-1;(ne?ze--:++ze<Se)&&b(f[ze],ze,f););return I?Dl(f,ne?0:ze,ne?ze+1:Se):Dl(f,ne?ze+1:0,ne?Se:ze)}function ku(f,b){var I=f;return I instanceof Dr&&(I=I.value()),Pa(b,function(ne,Se){return Se.func.apply(Se.thisArg,To([ne],Se.args))},I)}function Au(f,b,I){var ne=f.length;if(ne<2)return ne?kc(f[0]):[];for(var Se=-1,ze=kt(ne);++Se<ne;)for(var it=f[Se],gt=-1;++gt<ne;)gt!=Se&&(ze[Se]=P(ze[Se]||it,f[gt],b,I));return kc(Ve(ze,1),b,I)}function nc(f,b,I){for(var ne=-1,Se=f.length,ze=b.length,it={};++ne<Se;){var gt=ne<ze?b[ne]:n;I(it,f[ne],gt)}return it}function $h(f){return _o(f)?f:[]}function Td(f){return typeof f=="function"?f:Bl}function rc(f,b){return $r(f)?f:Xy(f,b)?[f]:Ow(Ni(f))}var Uy=qr;function Tu(f,b,I){var ne=f.length;return I=I===n?ne:I,!b&&I>=ne?f:Dl(f,b,I)}var Af=Qo||function(f){return Wi.clearTimeout(f)};function aw(f,b){if(b)return f.slice();var I=f.length,ne=Xu?Xu(I):new f.constructor(I);return f.copy(ne),ne}function Vy(f){var b=new f.constructor(f.byteLength);return new jo(b).set(new jo(f)),b}function _P(f,b){var I=b?Vy(f.buffer):f.buffer;return new f.constructor(I,f.byteOffset,f.byteLength)}function wP(f){var b=new f.constructor(f.source,dn.exec(f));return b.lastIndex=f.lastIndex,b}function xP(f){return Qr?oi(Qr.call(f)):{}}function lw(f,b){var I=b?Vy(f.buffer):f.buffer;return new f.constructor(I,f.byteOffset,f.length)}function uw(f,b){if(f!==b){var I=f!==n,ne=f===null,Se=f===f,ze=uu(f),it=b!==n,gt=b===null,Et=b===b,an=uu(b);if(!gt&&!an&&!ze&&f>b||ze&&it&&Et&&!gt&&!an||ne&&it&&Et||!I&&Et||!Se)return 1;if(!ne&&!ze&&!an&&f<b||an&&I&&Se&&!ne&&!ze||gt&&I&&Se||!it&&Se||!Et)return-1}return 0}function LP(f,b,I){for(var ne=-1,Se=f.criteria,ze=b.criteria,it=Se.length,gt=I.length;++ne<it;){var Et=uw(Se[ne],ze[ne]);if(Et){if(ne>=gt)return Et;var an=I[ne];return Et*(an=="desc"?-1:1)}}return f.index-b.index}function cw(f,b,I,ne){for(var Se=-1,ze=f.length,it=I.length,gt=-1,Et=b.length,an=ue(ze-it,0),ln=kt(Et+an),gn=!ne;++gt<Et;)ln[gt]=b[gt];for(;++Se<it;)(gn||Se<ze)&&(ln[I[Se]]=f[Se]);for(;an--;)ln[gt++]=f[Se++];return ln}function hw(f,b,I,ne){for(var Se=-1,ze=f.length,it=-1,gt=I.length,Et=-1,an=b.length,ln=ue(ze-gt,0),gn=kt(ln+an),Rn=!ne;++Se<ln;)gn[Se]=f[Se];for(var rr=Se;++Et<an;)gn[rr+Et]=b[Et];for(;++it<gt;)(Rn||Se<ze)&&(gn[rr+I[it]]=f[Se++]);return gn}function Il(f,b){var I=-1,ne=f.length;for(b||(b=kt(ne));++I<ne;)b[I]=f[I];return b}function Ac(f,b,I,ne){var Se=!I;I||(I={});for(var ze=-1,it=b.length;++ze<it;){var gt=b[ze],Et=ne?ne(I[gt],f[gt],gt,I,f):n;Et===n&&(Et=f[gt]),Se?An(I,gt,Et):ft(I,gt,Et)}return I}function SP(f,b){return Ac(f,Zy(f),b)}function CP(f,b){return Ac(f,Sw(f),b)}function Fm(f,b){return function(I,ne){var Se=$r(I)?Cc:Qt,ze=b?b():{};return Se(I,f,yr(ne,2),ze)}}function Tf(f){return qr(function(b,I){var ne=-1,Se=I.length,ze=Se>1?I[Se-1]:n,it=Se>2?I[2]:n;for(ze=f.length>3&&typeof ze=="function"?(Se--,ze):n,it&&cl(I[0],I[1],it)&&(ze=Se<3?n:ze,Se=1),b=oi(b);++ne<Se;){var gt=I[ne];gt&&f(b,gt,ne,ze)}return b})}function dw(f,b){return function(I,ne){if(I==null)return I;if(!Ol(I))return f(I,ne);for(var Se=I.length,ze=b?Se:-1,it=oi(I);(b?ze--:++ze<Se)&&ne(it[ze],ze,it)!==!1;);return I}}function fw(f){return function(b,I,ne){for(var Se=-1,ze=oi(b),it=ne(b),gt=it.length;gt--;){var Et=it[f?gt:++Se];if(I(ze[Et],Et,ze)===!1)break}return b}}function EP(f,b,I){var ne=b&T,Se=Rp(f);function ze(){var it=this&&this!==Wi&&this instanceof ze?Se:f;return it.apply(ne?I:this,arguments)}return ze}function pw(f){return function(b){b=Ni(b);var I=ca(b)?zs(b):n,ne=I?I[0]:b.charAt(0),Se=I?Tu(I,1).join(""):b.slice(1);return ne[f]()+Se}}function Df(f){return function(b){return Pa(dx(hx(b).replace(Wr,"")),f,"")}}function Rp(f){return function(){var b=arguments;switch(b.length){case 0:return new f;case 1:return new f(b[0]);case 2:return new f(b[0],b[1]);case 3:return new f(b[0],b[1],b[2]);case 4:return new f(b[0],b[1],b[2],b[3]);case 5:return new f(b[0],b[1],b[2],b[3],b[4]);case 6:return new f(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new f(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var I=yo(f.prototype),ne=f.apply(I,b);return Ws(ne)?ne:I}}function MP(f,b,I){var ne=Rp(f);function Se(){for(var ze=arguments.length,it=kt(ze),gt=ze,Et=If(Se);gt--;)it[gt]=arguments[gt];var an=ze<3&&it[0]!==Et&&it[ze-1]!==Et?[]:Qs(it,Et);if(ze-=an.length,ze<I)return bw(f,b,jm,Se.placeholder,n,it,an,n,n,I-ze);var ln=this&&this!==Wi&&this instanceof Se?ne:f;return ri(ln,this,it)}return Se}function gw(f){return function(b,I,ne){var Se=oi(b);if(!Ol(b)){var ze=yr(I,3);b=na(b),I=function(gt){return ze(Se[gt],gt,Se)}}var it=f(b,I,ne);return it>-1?Se[ze?b[it]:it]:n}}function mw(f){return lh(function(b){var I=b.length,ne=I,Se=Ps.prototype.thru;for(f&&b.reverse();ne--;){var ze=b[ne];if(typeof ze!="function")throw new Ti(o);if(Se&&!it&&Vm(ze)=="wrapper")var it=new Ps([],!0)}for(ne=it?ne:I;++ne<I;){ze=b[ne];var gt=Vm(ze),Et=gt=="wrapper"?Yy(ze):n;Et&&Jy(Et[0])&&Et[1]==(fe|B|Q|O)&&!Et[4].length&&Et[9]==1?it=it[Vm(Et[0])].apply(it,Et[3]):it=ze.length==1&&Jy(ze)?it[gt]():it.thru(ze)}return function(){var an=arguments,ln=an[0];if(it&&an.length==1&&$r(ln))return it.plant(ln).value();for(var gn=0,Rn=I?b[gn].apply(this,an):ln;++gn<I;)Rn=b[gn].call(this,Rn);return Rn}})}function jm(f,b,I,ne,Se,ze,it,gt,Et,an){var ln=b&fe,gn=b&T,Rn=b&D,rr=b&(B|W),wr=b&U,Zr=Rn?n:Rp(f);function xr(){for(var li=arguments.length,gi=kt(li),cu=li;cu--;)gi[cu]=arguments[cu];if(rr)var hl=If(xr),hu=ua(gi,hl);if(ne&&(gi=cw(gi,ne,Se,rr)),ze&&(gi=hw(gi,ze,it,rr)),li-=hu,rr&&li<an){var wo=Qs(gi,hl);return bw(f,b,jm,xr.placeholder,I,gi,wo,gt,Et,an-li)}var sc=gn?I:this,dh=Rn?sc[f]:f;return li=gi.length,gt?gi=qP(gi,gt):wr&&li>1&&gi.reverse(),ln&&Et<li&&(gi.length=Et),this&&this!==Wi&&this instanceof xr&&(dh=Zr||Rp(dh)),dh.apply(sc,gi)}return xr}function vw(f,b){return function(I,ne){return ke(I,f,b(ne),{})}}function zm(f,b){return function(I,ne){var Se;if(I===n&&ne===n)return b;if(I!==n&&(Se=I),ne!==n){if(Se===n)return ne;typeof I=="string"||typeof ne=="string"?(I=Ba(I),ne=Ba(ne)):(I=Rm(I),ne=Rm(ne)),Se=f(I,ne)}return Se}}function Hy(f){return lh(function(b){return b=ii(b,Tr(yr())),qr(function(I){var ne=this;return f(b,function(Se){return ri(Se,ne,I)})})})}function $m(f,b){b=b===n?" ":Ba(b);var I=b.length;if(I<2)return I?Mf(b,f):b;var ne=Mf(b,Cs(f/js(b)));return ca(b)?Tu(zs(ne),0,f).join(""):ne.slice(0,f)}function PP(f,b,I,ne){var Se=b&T,ze=Rp(f);function it(){for(var gt=-1,Et=arguments.length,an=-1,ln=ne.length,gn=kt(ln+Et),Rn=this&&this!==Wi&&this instanceof it?ze:f;++an<ln;)gn[an]=ne[an];for(;Et--;)gn[an++]=arguments[++gt];return ri(Rn,Se?I:this,gn)}return it}function yw(f){return function(b,I,ne){return ne&&typeof ne!="number"&&cl(b,I,ne)&&(I=ne=n),b=hh(b),I===n?(I=b,b=0):I=hh(I),ne=ne===n?b<I?1:-1:hh(ne),Ad(b,I,ne,f)}}function Um(f){return function(b,I){return typeof b=="string"&&typeof I=="string"||(b=Iu(b),I=Iu(I)),f(b,I)}}function bw(f,b,I,ne,Se,ze,it,gt,Et,an){var ln=b&B,gn=ln?it:n,Rn=ln?n:it,rr=ln?ze:n,wr=ln?n:ze;b|=ln?Q:pe,b&=~(ln?pe:Q),b&k||(b&=-4);var Zr=[f,b,Se,rr,gn,wr,Rn,gt,Et,an],xr=I.apply(n,Zr);return Jy(f)&&Tw(xr,Zr),xr.placeholder=ne,Dw(xr,f,b)}function Gy(f){var b=Ai[f];return function(I,ne){if(I=Iu(I),ne=ne==null?0:Me(Yr(ne),292),ne&&y(I)){var Se=(Ni(I)+"e").split("e"),ze=b(Se[0]+"e"+(+Se[1]+ne));return Se=(Ni(ze)+"e").split("e"),+(Se[0]+"e"+(+Se[1]-ne))}return b(I)}}var kP=as&&1/eo(new as([,-0]))[1]==J?function(f){return new as(f)}:f1;function _w(f){return function(b){var I=Ra(b);return I==le?Tl(b):I==Je?Ec(b):is(b,f(b))}}function ah(f,b,I,ne,Se,ze,it,gt){var Et=b&D;if(!Et&&typeof f!="function")throw new Ti(o);var an=ne?ne.length:0;if(an||(b&=-97,ne=Se=n),it=it===n?it:ue(Yr(it),0),gt=gt===n?gt:Yr(gt),an-=Se?Se.length:0,b&pe){var ln=ne,gn=Se;ne=Se=n}var Rn=Et?n:Yy(f),rr=[f,b,I,ne,Se,ln,gn,ze,it,gt];if(Rn&&HP(rr,Rn),f=rr[0],b=rr[1],I=rr[2],ne=rr[3],Se=rr[4],gt=rr[9]=rr[9]===n?Et?0:f.length:ue(rr[9]-an,0),!gt&&b&(B|W)&&(b&=-25),!b||b==T)var wr=EP(f,b,I);else b==B||b==W?wr=MP(f,b,gt):(b==Q||b==(T|Q))&&!Se.length?wr=PP(f,b,I,ne):wr=jm.apply(n,rr);var Zr=Rn?ec:Tw;return Dw(Zr(wr,rr),f,b)}function ww(f,b,I,ne){return f===n||ic(f,fa[I])&&!jr.call(ne,I)?b:f}function xw(f,b,I,ne,Se,ze){return Ws(f)&&Ws(b)&&(ze.set(b,f),ya(f,b,n,xw,ze),ze.delete(b)),f}function AP(f){return zp(f)?n:f}function Lw(f,b,I,ne,Se,ze){var it=I&x,gt=f.length,Et=b.length;if(gt!=Et&&!(it&&Et>gt))return!1;var an=ze.get(f),ln=ze.get(b);if(an&&ln)return an==b&&ln==f;var gn=-1,Rn=!0,rr=I&E?new G:n;for(ze.set(f,b),ze.set(b,f);++gn<gt;){var wr=f[gn],Zr=b[gn];if(ne)var xr=it?ne(Zr,wr,gn,b,f,ze):ne(wr,Zr,gn,f,b,ze);if(xr!==n){if(xr)continue;Rn=!1;break}if(rr){if(!z(b,function(li,gi){if(!Al(rr,gi)&&(wr===li||Se(wr,li,I,ne,ze)))return rr.push(gi)})){Rn=!1;break}}else if(!(wr===Zr||Se(wr,Zr,I,ne,ze))){Rn=!1;break}}return ze.delete(f),ze.delete(b),Rn}function TP(f,b,I,ne,Se,ze,it){switch(I){case pn:if(f.byteLength!=b.byteLength||f.byteOffset!=b.byteOffset)return!1;f=f.buffer,b=b.buffer;case fn:return!(f.byteLength!=b.byteLength||!ze(new jo(f),new jo(b)));case oe:case re:case he:return ic(+f,+b);case Le:return f.name==b.name&&f.message==b.message;case Qe:case st:return f==b+"";case le:var gt=Tl;case Je:var Et=ne&x;if(gt||(gt=eo),f.size!=b.size&&!Et)return!1;var an=it.get(f);if(an)return an==b;ne|=E,it.set(f,b);var ln=Lw(gt(f),gt(b),ne,Se,ze,it);return it.delete(f),ln;case Pt:if(Qr)return Qr.call(f)==Qr.call(b)}return!1}function DP(f,b,I,ne,Se,ze){var it=I&x,gt=Wy(f),Et=gt.length,an=Wy(b),ln=an.length;if(Et!=ln&&!it)return!1;for(var gn=Et;gn--;){var Rn=gt[gn];if(!(it?Rn in b:jr.call(b,Rn)))return!1}var rr=ze.get(f),wr=ze.get(b);if(rr&&wr)return rr==b&&wr==f;var Zr=!0;ze.set(f,b),ze.set(b,f);for(var xr=it;++gn<Et;){Rn=gt[gn];var li=f[Rn],gi=b[Rn];if(ne)var cu=it?ne(gi,li,Rn,b,f,ze):ne(li,gi,Rn,f,b,ze);if(!(cu===n?li===gi||Se(li,gi,I,ne,ze):cu)){Zr=!1;break}xr||(xr=Rn=="constructor")}if(Zr&&!xr){var hl=f.constructor,hu=b.constructor;hl!=hu&&"constructor"in f&&"constructor"in b&&!(typeof hl=="function"&&hl instanceof hl&&typeof hu=="function"&&hu instanceof hu)&&(Zr=!1)}return ze.delete(f),ze.delete(b),Zr}function lh(f){return e1(kw(f,n,Fw),f+"")}function Wy(f){return Ke(f,na,Zy)}function qy(f){return Ke(f,Nl,Sw)}var Yy=Di?function(f){return Di.get(f)}:f1;function Vm(f){for(var b=f.name+"",I=vo[b],ne=jr.call(vo,b)?I.length:0;ne--;){var Se=I[ne],ze=Se.func;if(ze==null||ze==f)return Se.name}return b}function If(f){var b=jr.call(Oe,"placeholder")?Oe:f;return b.placeholder}function yr(){var f=Oe.iteratee||h1;return f=f===h1?Xn:f,arguments.length?f(arguments[0],arguments[1]):f}function Hm(f,b){var I=f.__data__;return zP(b)?I[typeof b=="string"?"string":"hash"]:I.map}function Ky(f){for(var b=na(f),I=b.length;I--;){var ne=b[I],Se=f[ne];b[I]=[ne,Se,Mw(Se)]}return b}function Dd(f,b){var I=ss(f,b);return Ct(I)?I:n}function IP(f){var b=jr.call(f,Ia),I=f[Ia];try{f[Ia]=n;var ne=!0}catch{}var Se=ai.call(f);return ne&&(b?f[Ia]=I:delete f[Ia]),Se}var Zy=ea?function(f){return f==null?[]:(f=oi(f),Xo(ea(f),function(b){return bi.call(f,b)}))}:p1,Sw=ea?function(f){for(var b=[];f;)To(b,Zy(f)),f=ma(f);return b}:p1,Ra=nt;(Dn&&Ra(new Dn(new ArrayBuffer(1)))!=pn||Kn&&Ra(new Kn)!=le||kr&&Ra(kr.resolve())!=je||as&&Ra(new as)!=Je||zi&&Ra(new zi)!=Ht)&&(Ra=function(f){var b=nt(f),I=b==be?f.constructor:n,ne=I?Id(I):"";if(ne)switch(ne){case nh:return pn;case va:return le;case ta:return je;case zo:return Je;case Cd:return Ht}return b});function OP(f,b,I){for(var ne=-1,Se=I.length;++ne<Se;){var ze=I[ne],it=ze.size;switch(ze.type){case"drop":f+=it;break;case"dropRight":b-=it;break;case"take":b=Me(b,f+it);break;case"takeRight":f=ue(f,b-it);break}}return{start:f,end:b}}function NP(f){var b=f.match(jn);return b?b[1].split(vn):[]}function Cw(f,b,I){b=rc(b,f);for(var ne=-1,Se=b.length,ze=!1;++ne<Se;){var it=Tc(b[ne]);if(!(ze=f!=null&&I(f,it)))break;f=f[it]}return ze||++ne!=Se?ze:(Se=f==null?0:f.length,!!Se&&Xm(Se)&&uh(it,Se)&&($r(f)||Od(f)))}function BP(f){var b=f.length,I=new f.constructor(b);return b&&typeof f[0]=="string"&&jr.call(f,"index")&&(I.index=f.index,I.input=f.input),I}function Ew(f){return typeof f.constructor=="function"&&!Fp(f)?yo(ma(f)):{}}function RP(f,b,I){var ne=f.constructor;switch(b){case fn:return Vy(f);case oe:case re:return new ne(+f);case pn:return _P(f,I);case et:case ot:case rt:case Ft:case Xt:case Mn:case xn:case Cn:case Vn:return lw(f,I);case le:return new ne;case he:case st:return new ne(f);case Qe:return wP(f);case Je:return new ne;case Pt:return xP(f)}}function FP(f,b){var I=b.length;if(!I)return f;var ne=I-1;return b[ne]=(I>1?"& ":"")+b[ne],b=b.join(I>2?", ":" "),f.replace(Vt,`{
/* [wrapped with `+b+`] */
`)}function jP(f){return $r(f)||Od(f)||!!(mo&&f&&f[mo])}function uh(f,b){var I=typeof f;return b=b??Y,!!b&&(I=="number"||I!="symbol"&&di.test(f))&&f>-1&&f%1==0&&f<b}function cl(f,b,I){if(!Ws(I))return!1;var ne=typeof b;return(ne=="number"?Ol(I)&&uh(b,I.length):ne=="string"&&b in I)?ic(I[b],f):!1}function Xy(f,b){if($r(f))return!1;var I=typeof f;return I=="number"||I=="symbol"||I=="boolean"||f==null||uu(f)?!0:ds.test(f)||!Xs.test(f)||b!=null&&f in oi(b)}function zP(f){var b=typeof f;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?f!=="__proto__":f===null}function Jy(f){var b=Vm(f),I=Oe[b];if(typeof I!="function"||!(b in Dr.prototype))return!1;if(f===I)return!0;var ne=Yy(I);return!!ne&&f===ne[0]}function $P(f){return!!Ss&&Ss in f}var UP=pa?ch:g1;function Fp(f){var b=f&&f.constructor,I=typeof b=="function"&&b.prototype||fa;return f===I}function Mw(f){return f===f&&!Ws(f)}function Pw(f,b){return function(I){return I==null?!1:I[f]===b&&(b!==n||f in oi(I))}}function VP(f){var b=Km(f,function(ne){return I.size===c&&I.clear(),ne}),I=b.cache;return b}function HP(f,b){var I=f[1],ne=b[1],Se=I|ne,ze=Se<(T|D|fe),it=ne==fe&&I==B||ne==fe&&I==O&&f[7].length<=b[8]||ne==(fe|O)&&b[7].length<=b[8]&&I==B;if(!(ze||it))return f;ne&T&&(f[2]=b[2],Se|=I&T?0:k);var gt=b[3];if(gt){var Et=f[3];f[3]=Et?cw(Et,gt,b[4]):gt,f[4]=Et?Qs(f[3],d):b[4]}return gt=b[5],gt&&(Et=f[5],f[5]=Et?hw(Et,gt,b[6]):gt,f[6]=Et?Qs(f[5],d):b[6]),gt=b[7],gt&&(f[7]=gt),ne&fe&&(f[8]=f[8]==null?b[8]:Me(f[8],b[8])),f[9]==null&&(f[9]=b[9]),f[0]=b[0],f[1]=Se,f}function GP(f){var b=[];if(f!=null)for(var I in oi(f))b.push(I);return b}function WP(f){return ai.call(f)}function kw(f,b,I){return b=ue(b===n?f.length-1:b,0),function(){for(var ne=arguments,Se=-1,ze=ue(ne.length-b,0),it=kt(ze);++Se<ze;)it[Se]=ne[b+Se];Se=-1;for(var gt=kt(b+1);++Se<b;)gt[Se]=ne[Se];return gt[b]=I(it),ri(f,this,gt)}}function Aw(f,b){return b.length<2?f:sr(f,Dl(b,0,-1))}function qP(f,b){for(var I=f.length,ne=Me(b.length,I),Se=Il(f);ne--;){var ze=b[ne];f[ne]=uh(ze,I)?Se[ze]:n}return f}function Qy(f,b){if(!(b==="constructor"&&typeof f[b]=="function")&&b!="__proto__")return f[b]}var Tw=Iw(ec),jp=th||function(f,b){return Wi.setTimeout(f,b)},e1=Iw(Om);function Dw(f,b,I){var ne=b+"";return e1(f,FP(ne,YP(NP(ne),I)))}function Iw(f){var b=0,I=0;return function(){var ne=at(),Se=X-(ne-I);if(I=ne,Se>0){if(++b>=$)return arguments[0]}else b=0;return f.apply(n,arguments)}}function Gm(f,b){var I=-1,ne=f.length,Se=ne-1;for(b=b===n?ne:b;++I<b;){var ze=kd(I,Se),it=f[ze];f[ze]=f[I],f[I]=it}return f.length=b,f}var Ow=VP(function(f){var b=[];return f.charCodeAt(0)===46&&b.push(""),f.replace(Yn,function(I,ne,Se,ze){b.push(Se?ze.replace(Ln,"$1"):ne||I)}),b});function Tc(f){if(typeof f=="string"||uu(f))return f;var b=f+"";return b=="0"&&1/f==-1/0?"-0":b}function Id(f){if(f!=null){try{return ga.call(f)}catch{}try{return f+""}catch{}}return""}function YP(f,b){return xs(ae,function(I){var ne="_."+I[0];b&I[1]&&!Pl(f,ne)&&f.push(ne)}),f.sort()}function Nw(f){if(f instanceof Dr)return f.clone();var b=new Ps(f.__wrapped__,f.__chain__);return b.__actions__=Il(f.__actions__),b.__index__=f.__index__,b.__values__=f.__values__,b}function KP(f,b,I){(I?cl(f,b,I):b===n)?b=1:b=ue(Yr(b),0);var ne=f==null?0:f.length;if(!ne||b<1)return[];for(var Se=0,ze=0,it=kt(Cs(ne/b));Se<ne;)it[ze++]=Dl(f,Se,Se+=b);return it}function ZP(f){for(var b=-1,I=f==null?0:f.length,ne=0,Se=[];++b<I;){var ze=f[b];ze&&(Se[ne++]=ze)}return Se}function XP(){var f=arguments.length;if(!f)return[];for(var b=kt(f-1),I=arguments[0],ne=f;ne--;)b[ne-1]=arguments[ne];return To($r(I)?Il(I):[I],Ve(b,1))}var JP=qr(function(f,b){return _o(f)?P(f,Ve(b,1,_o,!0)):[]}),QP=qr(function(f,b){var I=Du(b);return _o(I)&&(I=n),_o(f)?P(f,Ve(b,1,_o,!0),yr(I,2)):[]}),ek=qr(function(f,b){var I=Du(b);return _o(I)&&(I=n),_o(f)?P(f,Ve(b,1,_o,!0),n,I):[]});function tk(f,b,I){var ne=f==null?0:f.length;return ne?(b=I||b===n?1:Yr(b),Dl(f,b<0?0:b,ne)):[]}function nk(f,b,I){var ne=f==null?0:f.length;return ne?(b=I||b===n?1:Yr(b),b=ne-b,Dl(f,0,b<0?0:b)):[]}function rk(f,b){return f&&f.length?oh(f,yr(b,3),!0,!0):[]}function ik(f,b){return f&&f.length?oh(f,yr(b,3),!0):[]}function sk(f,b,I,ne){var Se=f==null?0:f.length;return Se?(I&&typeof I!="number"&&cl(f,b,I)&&(I=0,ne=Se),Ee(f,b,I,ne)):[]}function Bw(f,b,I){var ne=f==null?0:f.length;if(!ne)return-1;var Se=I==null?0:Yr(I);return Se<0&&(Se=ue(ne+Se,0)),jt(f,yr(b,3),Se)}function Rw(f,b,I){var ne=f==null?0:f.length;if(!ne)return-1;var Se=ne-1;return I!==n&&(Se=Yr(I),Se=I<0?ue(ne+Se,0):Me(Se,ne-1)),jt(f,yr(b,3),Se,!0)}function Fw(f){var b=f==null?0:f.length;return b?Ve(f,1):[]}function ok(f){var b=f==null?0:f.length;return b?Ve(f,J):[]}function ak(f,b){var I=f==null?0:f.length;return I?(b=b===n?1:Yr(b),Ve(f,b)):[]}function lk(f){for(var b=-1,I=f==null?0:f.length,ne={};++b<I;){var Se=f[b];ne[Se[0]]=Se[1]}return ne}function jw(f){return f&&f.length?f[0]:n}function uk(f,b,I){var ne=f==null?0:f.length;if(!ne)return-1;var Se=I==null?0:Yr(I);return Se<0&&(Se=ue(ne+Se,0)),un(f,b,Se)}function ck(f){var b=f==null?0:f.length;return b?Dl(f,0,-1):[]}var hk=qr(function(f){var b=ii(f,$h);return b.length&&b[0]===f[0]?_e(b):[]}),dk=qr(function(f){var b=Du(f),I=ii(f,$h);return b===Du(I)?b=n:I.pop(),I.length&&I[0]===f[0]?_e(I,yr(b,2)):[]}),fk=qr(function(f){var b=Du(f),I=ii(f,$h);return b=typeof b=="function"?b:n,b&&I.pop(),I.length&&I[0]===f[0]?_e(I,n,b):[]});function pk(f,b){return f==null?"":M.call(f,b)}function Du(f){var b=f==null?0:f.length;return b?f[b-1]:n}function gk(f,b,I){var ne=f==null?0:f.length;if(!ne)return-1;var Se=ne;return I!==n&&(Se=Yr(I),Se=Se<0?ue(ne+Se,0):Me(Se,ne-1)),b===b?ka(f,b,Se):jt(f,Nn,Se,!0)}function mk(f,b){return f&&f.length?ul(f,Yr(b)):n}var vk=qr(zw);function zw(f,b){return f&&f.length&&b&&b.length?Ef(f,b):f}function yk(f,b,I){return f&&f.length&&b&&b.length?Ef(f,b,yr(I,2)):f}function bk(f,b,I){return f&&f.length&&b&&b.length?Ef(f,b,n,I):f}var _k=lh(function(f,b){var I=f==null?0:f.length,ne=En(f,b);return Pd(f,ii(b,function(Se){return uh(Se,I)?+Se:Se}).sort(uw)),ne});function wk(f,b){var I=[];if(!(f&&f.length))return I;var ne=-1,Se=[],ze=f.length;for(b=yr(b,3);++ne<ze;){var it=f[ne];b(it,ne,f)&&(I.push(it),Se.push(ne))}return Pd(f,Se),I}function t1(f){return f==null?f:on.call(f)}function xk(f,b,I){var ne=f==null?0:f.length;return ne?(I&&typeof I!="number"&&cl(f,b,I)?(b=0,I=ne):(b=b==null?0:Yr(b),I=I===n?ne:Yr(I)),Dl(f,b,I)):[]}function Lk(f,b){return tc(f,b)}function Sk(f,b,I){return Np(f,b,yr(I,2))}function Ck(f,b){var I=f==null?0:f.length;if(I){var ne=tc(f,b);if(ne<I&&ic(f[ne],b))return ne}return-1}function Ek(f,b){return tc(f,b,!0)}function Mk(f,b,I){return Np(f,b,yr(I,2),!0)}function Pk(f,b){var I=f==null?0:f.length;if(I){var ne=tc(f,b,!0)-1;if(ic(f[ne],b))return ne}return-1}function kk(f){return f&&f.length?Bp(f):[]}function Ak(f,b){return f&&f.length?Bp(f,yr(b,2)):[]}function Tk(f){var b=f==null?0:f.length;return b?Dl(f,1,b):[]}function Dk(f,b,I){return f&&f.length?(b=I||b===n?1:Yr(b),Dl(f,0,b<0?0:b)):[]}function Ik(f,b,I){var ne=f==null?0:f.length;return ne?(b=I||b===n?1:Yr(b),b=ne-b,Dl(f,b<0?0:b,ne)):[]}function Ok(f,b){return f&&f.length?oh(f,yr(b,3),!1,!0):[]}function Nk(f,b){return f&&f.length?oh(f,yr(b,3)):[]}var Bk=qr(function(f){return kc(Ve(f,1,_o,!0))}),Rk=qr(function(f){var b=Du(f);return _o(b)&&(b=n),kc(Ve(f,1,_o,!0),yr(b,2))}),Fk=qr(function(f){var b=Du(f);return b=typeof b=="function"?b:n,kc(Ve(f,1,_o,!0),n,b)});function jk(f){return f&&f.length?kc(f):[]}function zk(f,b){return f&&f.length?kc(f,yr(b,2)):[]}function $k(f,b){return b=typeof b=="function"?b:n,f&&f.length?kc(f,n,b):[]}function n1(f){if(!(f&&f.length))return[];var b=0;return f=Xo(f,function(I){if(_o(I))return b=ue(I.length,b),!0}),Ki(b,function(I){return ii(f,hr(I))})}function $w(f,b){if(!(f&&f.length))return[];var I=n1(f);return b==null?I:ii(I,function(ne){return ri(b,n,ne)})}var Uk=qr(function(f,b){return _o(f)?P(f,b):[]}),Vk=qr(function(f){return Au(Xo(f,_o))}),Hk=qr(function(f){var b=Du(f);return _o(b)&&(b=n),Au(Xo(f,_o),yr(b,2))}),Gk=qr(function(f){var b=Du(f);return b=typeof b=="function"?b:n,Au(Xo(f,_o),n,b)}),Wk=qr(n1);function qk(f,b){return nc(f||[],b||[],ft)}function Yk(f,b){return nc(f||[],b||[],ih)}var Kk=qr(function(f){var b=f.length,I=b>1?f[b-1]:n;return I=typeof I=="function"?(f.pop(),I):n,$w(f,I)});function Uw(f){var b=Oe(f);return b.__chain__=!0,b}function Zk(f,b){return b(f),f}function Wm(f,b){return b(f)}var Xk=lh(function(f){var b=f.length,I=b?f[0]:0,ne=this.__wrapped__,Se=function(ze){return En(ze,f)};return b>1||this.__actions__.length||!(ne instanceof Dr)||!uh(I)?this.thru(Se):(ne=ne.slice(I,+I+(b?1:0)),ne.__actions__.push({func:Wm,args:[Se],thisArg:n}),new Ps(ne,this.__chain__).thru(function(ze){return b&&!ze.length&&ze.push(n),ze}))});function Jk(){return Uw(this)}function Qk(){return new Ps(this.value(),this.__chain__)}function eA(){this.__values__===n&&(this.__values__=nx(this.value()));var f=this.__index__>=this.__values__.length,b=f?n:this.__values__[this.__index__++];return{done:f,value:b}}function tA(){return this}function nA(f){for(var b,I=this;I instanceof Ju;){var ne=Nw(I);ne.__index__=0,ne.__values__=n,b?Se.__wrapped__=ne:b=ne;var Se=ne;I=I.__wrapped__}return Se.__wrapped__=f,b}function rA(){var f=this.__wrapped__;if(f instanceof Dr){var b=f;return this.__actions__.length&&(b=new Dr(this)),b=b.reverse(),b.__actions__.push({func:Wm,args:[t1],thisArg:n}),new Ps(b,this.__chain__)}return this.thru(t1)}function iA(){return ku(this.__wrapped__,this.__actions__)}var sA=Fm(function(f,b,I){jr.call(f,I)?++f[I]:An(f,I,1)});function oA(f,b,I){var ne=$r(f)?ou:ie;return I&&cl(f,b,I)&&(b=n),ne(f,yr(b,3))}function aA(f,b){var I=$r(f)?Xo:Ze;return I(f,yr(b,3))}var lA=gw(Bw),uA=gw(Rw);function cA(f,b){return Ve(qm(f,b),1)}function hA(f,b){return Ve(qm(f,b),J)}function dA(f,b,I){return I=I===n?1:Yr(I),Ve(qm(f,b),I)}function Vw(f,b){var I=$r(f)?xs:V;return I(f,yr(b,3))}function Hw(f,b){var I=$r(f)?Zo:te;return I(f,yr(b,3))}var fA=Fm(function(f,b,I){jr.call(f,I)?f[I].push(b):An(f,I,[b])});function pA(f,b,I,ne){f=Ol(f)?f:Nf(f),I=I&&!ne?Yr(I):0;var Se=f.length;return I<0&&(I=ue(Se+I,0)),Jm(f)?I<=Se&&f.indexOf(b,I)>-1:!!Se&&un(f,b,I)>-1}var gA=qr(function(f,b,I){var ne=-1,Se=typeof b=="function",ze=Ol(f)?kt(f.length):[];return V(f,function(it){ze[++ne]=Se?ri(b,it,I):Fe(it,b,I)}),ze}),mA=Fm(function(f,b,I){An(f,I,b)});function qm(f,b){var I=$r(f)?ii:wi;return I(f,yr(b,3))}function vA(f,b,I,ne){return f==null?[]:($r(b)||(b=b==null?[]:[b]),I=ne?n:I,$r(I)||(I=I==null?[]:[I]),Pc(f,b,I))}var yA=Fm(function(f,b,I){f[I?0:1].push(b)},function(){return[[],[]]});function bA(f,b,I){var ne=$r(f)?Pa:Ci,Se=arguments.length<3;return ne(f,yr(b,4),I,Se,V)}function _A(f,b,I){var ne=$r(f)?Yi:Ci,Se=arguments.length<3;return ne(f,yr(b,4),I,Se,te)}function wA(f,b){var I=$r(f)?Xo:Ze;return I(f,Zm(yr(b,3)))}function xA(f){var b=$r(f)?Nt:Pf;return b(f)}function LA(f,b,I){(I?cl(f,b,I):b===n)?b=1:b=Yr(b);var ne=$r(f)?xt:Im;return ne(f,b)}function SA(f){var b=$r(f)?qt:Nm;return b(f)}function CA(f){if(f==null)return 0;if(Ol(f))return Jm(f)?js(f):f.length;var b=Ra(f);return b==le||b==Je?f.size:ei(f).length}function EA(f,b,I){var ne=$r(f)?z:Bm;return I&&cl(f,b,I)&&(b=n),ne(f,yr(b,3))}var MA=qr(function(f,b){if(f==null)return[];var I=b.length;return I>1&&cl(f,b[0],b[1])?b=[]:I>2&&cl(b[0],b[1],b[2])&&(b=[b[0]]),Pc(f,Ve(b,1),[])}),Ym=no||function(){return Wi.Date.now()};function PA(f,b){if(typeof b!="function")throw new Ti(o);return f=Yr(f),function(){if(--f<1)return b.apply(this,arguments)}}function Gw(f,b,I){return b=I?n:b,b=f&&b==null?f.length:b,ah(f,fe,n,n,n,n,b)}function Ww(f,b){var I;if(typeof b!="function")throw new Ti(o);return f=Yr(f),function(){return--f>0&&(I=b.apply(this,arguments)),f<=1&&(b=n),I}}var r1=qr(function(f,b,I){var ne=T;if(I.length){var Se=Qs(I,If(r1));ne|=Q}return ah(f,ne,b,I,Se)}),qw=qr(function(f,b,I){var ne=T|D;if(I.length){var Se=Qs(I,If(qw));ne|=Q}return ah(b,ne,f,I,Se)});function Yw(f,b,I){b=I?n:b;var ne=ah(f,B,n,n,n,n,n,b);return ne.placeholder=Yw.placeholder,ne}function Kw(f,b,I){b=I?n:b;var ne=ah(f,W,n,n,n,n,n,b);return ne.placeholder=Kw.placeholder,ne}function Zw(f,b,I){var ne,Se,ze,it,gt,Et,an=0,ln=!1,gn=!1,Rn=!0;if(typeof f!="function")throw new Ti(o);b=Iu(b)||0,Ws(I)&&(ln=!!I.leading,gn="maxWait"in I,ze=gn?ue(Iu(I.maxWait)||0,b):ze,Rn="trailing"in I?!!I.trailing:Rn);function rr(wo){var sc=ne,dh=Se;return ne=Se=n,an=wo,it=f.apply(dh,sc),it}function wr(wo){return an=wo,gt=jp(li,b),ln?rr(wo):it}function Zr(wo){var sc=wo-Et,dh=wo-an,gx=b-sc;return gn?Me(gx,ze-dh):gx}function xr(wo){var sc=wo-Et,dh=wo-an;return Et===n||sc>=b||sc<0||gn&&dh>=ze}function li(){var wo=Ym();if(xr(wo))return gi(wo);gt=jp(li,Zr(wo))}function gi(wo){return gt=n,Rn&&ne?rr(wo):(ne=Se=n,it)}function cu(){gt!==n&&Af(gt),an=0,ne=Et=Se=gt=n}function hl(){return gt===n?it:gi(Ym())}function hu(){var wo=Ym(),sc=xr(wo);if(ne=arguments,Se=this,Et=wo,sc){if(gt===n)return wr(Et);if(gn)return Af(gt),gt=jp(li,b),rr(Et)}return gt===n&&(gt=jp(li,b)),it}return hu.cancel=cu,hu.flush=hl,hu}var kA=qr(function(f,b){return S(f,1,b)}),AA=qr(function(f,b,I){return S(f,Iu(b)||0,I)});function TA(f){return ah(f,U)}function Km(f,b){if(typeof f!="function"||b!=null&&typeof b!="function")throw new Ti(o);var I=function(){var ne=arguments,Se=b?b.apply(this,ne):ne[0],ze=I.cache;if(ze.has(Se))return ze.get(Se);var it=f.apply(this,ne);return I.cache=ze.set(Se,it)||ze,it};return I.cache=new(Km.Cache||Na),I}Km.Cache=Na;function Zm(f){if(typeof f!="function")throw new Ti(o);return function(){var b=arguments;switch(b.length){case 0:return!f.call(this);case 1:return!f.call(this,b[0]);case 2:return!f.call(this,b[0],b[1]);case 3:return!f.call(this,b[0],b[1],b[2])}return!f.apply(this,b)}}function DA(f){return Ww(2,f)}var IA=Uy(function(f,b){b=b.length==1&&$r(b[0])?ii(b[0],Tr(yr())):ii(Ve(b,1),Tr(yr()));var I=b.length;return qr(function(ne){for(var Se=-1,ze=Me(ne.length,I);++Se<ze;)ne[Se]=b[Se].call(this,ne[Se]);return ri(f,this,ne)})}),i1=qr(function(f,b){var I=Qs(b,If(i1));return ah(f,Q,n,b,I)}),Xw=qr(function(f,b){var I=Qs(b,If(Xw));return ah(f,pe,n,b,I)}),OA=lh(function(f,b){return ah(f,O,n,n,n,b)});function NA(f,b){if(typeof f!="function")throw new Ti(o);return b=b===n?b:Yr(b),qr(f,b)}function BA(f,b){if(typeof f!="function")throw new Ti(o);return b=b==null?0:ue(Yr(b),0),qr(function(I){var ne=I[b],Se=Tu(I,0,b);return ne&&To(Se,ne),ri(f,this,Se)})}function RA(f,b,I){var ne=!0,Se=!0;if(typeof f!="function")throw new Ti(o);return Ws(I)&&(ne="leading"in I?!!I.leading:ne,Se="trailing"in I?!!I.trailing:Se),Zw(f,b,{leading:ne,maxWait:b,trailing:Se})}function FA(f){return Gw(f,1)}function jA(f,b){return i1(Td(b),f)}function zA(){if(!arguments.length)return[];var f=arguments[0];return $r(f)?f:[f]}function $A(f){return h(f,m)}function UA(f,b){return b=typeof b=="function"?b:n,h(f,m,b)}function VA(f){return h(f,p|m)}function HA(f,b){return b=typeof b=="function"?b:n,h(f,p|m,b)}function GA(f,b){return b==null||_(f,b,na(b))}function ic(f,b){return f===b||f!==f&&b!==b}var WA=Um(ht),qA=Um(function(f,b){return f>=b}),Od=Re(function(){return arguments}())?Re:function(f){return ro(f)&&jr.call(f,"callee")&&!bi.call(f,"callee")},$r=kt.isArray,YA=Eu?Tr(Eu):$e;function Ol(f){return f!=null&&Xm(f.length)&&!ch(f)}function _o(f){return ro(f)&&Ol(f)}function KA(f){return f===!0||f===!1||ro(f)&&nt(f)==oe}var Uh=u||g1,ZA=la?Tr(la):Ue;function XA(f){return ro(f)&&f.nodeType===1&&!zp(f)}function JA(f){if(f==null)return!0;if(Ol(f)&&($r(f)||typeof f=="string"||typeof f.splice=="function"||Uh(f)||Of(f)||Od(f)))return!f.length;var b=Ra(f);if(b==le||b==Je)return!f.size;if(Fp(f))return!ei(f).length;for(var I in f)if(jr.call(f,I))return!1;return!0}function QA(f,b){return lt(f,b)}function e6(f,b,I){I=typeof I=="function"?I:n;var ne=I?I(f,b):n;return ne===n?lt(f,b,n,I):!!ne}function s1(f){if(!ro(f))return!1;var b=nt(f);return b==Le||b==Te||typeof f.message=="string"&&typeof f.name=="string"&&!zp(f)}function t6(f){return typeof f=="number"&&y(f)}function ch(f){if(!Ws(f))return!1;var b=nt(f);return b==qe||b==se||b==me||b==We}function Jw(f){return typeof f=="number"&&f==Yr(f)}function Xm(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=Y}function Ws(f){var b=typeof f;return f!=null&&(b=="object"||b=="function")}function ro(f){return f!=null&&typeof f=="object"}var Qw=ru?Tr(ru):pt;function n6(f,b){return f===b||St(f,b,Ky(b))}function r6(f,b,I){return I=typeof I=="function"?I:n,St(f,b,Ky(b),I)}function i6(f){return ex(f)&&f!=+f}function s6(f){if(UP(f))throw new Hn(s);return Ct(f)}function o6(f){return f===null}function a6(f){return f==null}function ex(f){return typeof f=="number"||ro(f)&&nt(f)==he}function zp(f){if(!ro(f)||nt(f)!=be)return!1;var b=ma(f);if(b===null)return!0;var I=jr.call(b,"constructor")&&b.constructor;return typeof I=="function"&&I instanceof I&&ga.call(I)==fi}var o1=iu?Tr(iu):rn;function l6(f){return Jw(f)&&f>=-9007199254740991&&f<=Y}var tx=Fo?Tr(Fo):Bn;function Jm(f){return typeof f=="string"||!$r(f)&&ro(f)&&nt(f)==st}function uu(f){return typeof f=="symbol"||ro(f)&&nt(f)==Pt}var Of=su?Tr(su):Un;function u6(f){return f===n}function c6(f){return ro(f)&&Ra(f)==Ht}function h6(f){return ro(f)&&nt(f)==Jt}var d6=Um(zr),f6=Um(function(f,b){return f<=b});function nx(f){if(!f)return[];if(Ol(f))return Jm(f)?zs(f):Il(f);if(lr&&f[lr])return po(f[lr]());var b=Ra(f),I=b==le?Tl:b==Je?eo:Nf;return I(f)}function hh(f){if(!f)return f===0?f:0;if(f=Iu(f),f===J||f===-1/0){var b=f<0?-1:1;return b*ye}return f===f?f:0}function Yr(f){var b=hh(f),I=b%1;return b===b?I?b-I:b:0}function rx(f){return f?Zn(Yr(f),0,He):0}function Iu(f){if(typeof f=="number")return f;if(uu(f))return Ce;if(Ws(f)){var b=typeof f.valueOf=="function"?f.valueOf():f;f=Ws(b)?b+"":b}if(typeof f!="string")return f===0?f:+f;f=Do(f);var I=$n.test(f);return I||or.test(f)?nu(f.slice(2),I?2:8):Zt.test(f)?Ce:+f}function ix(f){return Ac(f,Nl(f))}function p6(f){return f?Zn(Yr(f),-9007199254740991,Y):f===0?f:0}function Ni(f){return f==null?"":Ba(f)}var g6=Tf(function(f,b){if(Fp(b)||Ol(b)){Ac(b,na(b),f);return}for(var I in b)jr.call(b,I)&&ft(f,I,b[I])}),sx=Tf(function(f,b){Ac(b,Nl(b),f)}),Qm=Tf(function(f,b,I,ne){Ac(b,Nl(b),f,ne)}),m6=Tf(function(f,b,I,ne){Ac(b,na(b),f,ne)}),v6=lh(En);function y6(f,b){var I=yo(f);return b==null?I:cn(I,b)}var b6=qr(function(f,b){f=oi(f);var I=-1,ne=b.length,Se=ne>2?b[2]:n;for(Se&&cl(b[0],b[1],Se)&&(ne=1);++I<ne;)for(var ze=b[I],it=Nl(ze),gt=-1,Et=it.length;++gt<Et;){var an=it[gt],ln=f[an];(ln===n||ic(ln,fa[an])&&!jr.call(f,an))&&(f[an]=ze[an])}return f}),_6=qr(function(f){return f.push(n,xw),ri(ox,n,f)});function w6(f,b){return Lt(f,yr(b,3),Kt)}function x6(f,b){return Lt(f,yr(b,3),yn)}function L6(f,b){return f==null?f:vt(f,yr(b,3),Nl)}function S6(f,b){return f==null?f:At(f,yr(b,3),Nl)}function C6(f,b){return f&&Kt(f,yr(b,3))}function E6(f,b){return f&&yn(f,yr(b,3))}function M6(f){return f==null?[]:Sn(f,na(f))}function P6(f){return f==null?[]:Sn(f,Nl(f))}function a1(f,b,I){var ne=f==null?n:sr(f,b);return ne===n?I:ne}function k6(f,b){return f!=null&&Cw(f,b,Rt)}function l1(f,b){return f!=null&&Cw(f,b,wt)}var A6=vw(function(f,b,I){b!=null&&typeof b.toString!="function"&&(b=ai.call(b)),f[b]=I},c1(Bl)),T6=vw(function(f,b,I){b!=null&&typeof b.toString!="function"&&(b=ai.call(b)),jr.call(f,b)?f[b].push(I):f[b]=[I]},yr),D6=qr(Fe);function na(f){return Ol(f)?Ot(f):ei(f)}function Nl(f){return Ol(f)?Ot(f,!0):pi(f)}function I6(f,b){var I={};return b=yr(b,3),Kt(f,function(ne,Se,ze){An(I,b(ne,Se,ze),ne)}),I}function O6(f,b){var I={};return b=yr(b,3),Kt(f,function(ne,Se,ze){An(I,Se,b(ne,Se,ze))}),I}var N6=Tf(function(f,b,I){ya(f,b,I)}),ox=Tf(function(f,b,I,ne){ya(f,b,I,ne)}),B6=lh(function(f,b){var I={};if(f==null)return I;var ne=!1;b=ii(b,function(ze){return ze=rc(ze,f),ne||(ne=ze.length>1),ze}),Ac(f,qy(f),I),ne&&(I=h(I,p|v|m,AP));for(var Se=b.length;Se--;)sh(I,b[Se]);return I});function R6(f,b){return ax(f,Zm(yr(b)))}var F6=lh(function(f,b){return f==null?{}:ba(f,b)});function ax(f,b){if(f==null)return{};var I=ii(qy(f),function(ne){return[ne]});return b=yr(b),Gs(f,I,function(ne,Se){return b(ne,Se[0])})}function j6(f,b,I){b=rc(b,f);var ne=-1,Se=b.length;for(Se||(Se=1,f=n);++ne<Se;){var ze=f==null?n:f[Tc(b[ne])];ze===n&&(ne=Se,ze=I),f=ch(ze)?ze.call(f):ze}return f}function z6(f,b,I){return f==null?f:ih(f,b,I)}function $6(f,b,I,ne){return ne=typeof ne=="function"?ne:n,f==null?f:ih(f,b,I,ne)}var lx=_w(na),ux=_w(Nl);function U6(f,b,I){var ne=$r(f),Se=ne||Uh(f)||Of(f);if(b=yr(b,4),I==null){var ze=f&&f.constructor;Se?I=ne?new ze:[]:Ws(f)?I=ch(ze)?yo(ma(f)):{}:I={}}return(Se?xs:Kt)(f,function(it,gt,Et){return b(I,it,gt,Et)}),I}function V6(f,b){return f==null?!0:sh(f,b)}function H6(f,b,I){return f==null?f:kf(f,b,Td(I))}function G6(f,b,I,ne){return ne=typeof ne=="function"?ne:n,f==null?f:kf(f,b,Td(I),ne)}function Nf(f){return f==null?[]:Rs(f,na(f))}function W6(f){return f==null?[]:Rs(f,Nl(f))}function q6(f,b,I){return I===n&&(I=b,b=n),I!==n&&(I=Iu(I),I=I===I?I:0),b!==n&&(b=Iu(b),b=b===b?b:0),Zn(Iu(f),b,I)}function Y6(f,b,I){return b=hh(b),I===n?(I=b,b=0):I=hh(I),f=Iu(f),It(f,b,I)}function K6(f,b,I){if(I&&typeof I!="boolean"&&cl(f,b,I)&&(b=I=n),I===n&&(typeof b=="boolean"?(I=b,b=n):typeof f=="boolean"&&(I=f,f=n)),f===n&&b===n?(f=0,b=1):(f=hh(f),b===n?(b=f,f=0):b=hh(b)),f>b){var ne=f;f=b,b=ne}if(I||f%1||b%1){var Se=zt();return Me(f+Se*(b-f+El("1e-"+((Se+"").length-1))),b)}return kd(f,b)}var Z6=Df(function(f,b,I){return b=b.toLowerCase(),f+(I?cx(b):b)});function cx(f){return u1(Ni(f).toLowerCase())}function hx(f){return f=Ni(f),f&&f.replace(ur,Zu).replace(Yu,"")}function X6(f,b,I){f=Ni(f),b=Ba(b);var ne=f.length;I=I===n?ne:Zn(Yr(I),0,ne);var Se=I;return I-=b.length,I>=0&&f.slice(I,Se)==b}function J6(f){return f=Ni(f),f&&Fn.test(f)?f.replace(ir,ol):f}function Q6(f){return f=Ni(f),f&&tt.test(f)?f.replace(mt,"\\$&"):f}var eT=Df(function(f,b,I){return f+(I?"-":"")+b.toLowerCase()}),tT=Df(function(f,b,I){return f+(I?" ":"")+b.toLowerCase()}),nT=pw("toLowerCase");function rT(f,b,I){f=Ni(f),b=Yr(b);var ne=b?js(f):0;if(!b||ne>=b)return f;var Se=(b-ne)/2;return $m(Es(Se),I)+f+$m(Cs(Se),I)}function iT(f,b,I){f=Ni(f),b=Yr(b);var ne=b?js(f):0;return b&&ne<b?f+$m(b-ne,I):f}function sT(f,b,I){f=Ni(f),b=Yr(b);var ne=b?js(f):0;return b&&ne<b?$m(b-ne,I)+f:f}function oT(f,b,I){return I||b==null?b=0:b&&(b=+b),Mt(Ni(f).replace(Dt,""),b||0)}function aT(f,b,I){return(I?cl(f,b,I):b===n)?b=1:b=Yr(b),Mf(Ni(f),b)}function lT(){var f=arguments,b=Ni(f[0]);return f.length<3?b:b.replace(f[1],f[2])}var uT=Df(function(f,b,I){return f+(I?"_":"")+b.toLowerCase()});function cT(f,b,I){return I&&typeof I!="number"&&cl(f,b,I)&&(b=I=n),I=I===n?He:I>>>0,I?(f=Ni(f),f&&(typeof b=="string"||b!=null&&!o1(b))&&(b=Ba(b),!b&&ca(f))?Tu(zs(f),0,I):f.split(b,I)):[]}var hT=Df(function(f,b,I){return f+(I?" ":"")+u1(b)});function dT(f,b,I){return f=Ni(f),I=I==null?0:Zn(Yr(I),0,f.length),b=Ba(b),f.slice(I,I+b.length)==b}function fT(f,b,I){var ne=Oe.templateSettings;I&&cl(f,b,I)&&(b=n),f=Ni(f),b=Qm({},b,ne,ww);var Se=Qm({},b.imports,ne.imports,ww),ze=na(Se),it=Rs(Se,ze),gt,Et,an=0,ln=b.interpolate||ar,gn="__p += '",Rn=au((b.escape||ar).source+"|"+ln.source+"|"+(ln===Pi?zn:ar).source+"|"+(b.evaluate||ar).source+"|$","g"),rr="//# sourceURL="+(jr.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++eu+"]")+`
`;f.replace(Rn,function(xr,li,gi,cu,hl,hu){return gi||(gi=cu),gn+=f.slice(an,hu).replace(Gi,al),li&&(gt=!0,gn+=`' +
__e(`+li+`) +
'`),hl&&(Et=!0,gn+=`';
`+hl+`;
__p += '`),gi&&(gn+=`' +
((__t = (`+gi+`)) == null ? '' : __t) +
'`),an=hu+xr.length,xr}),gn+=`';
`;var wr=jr.call(b,"variable")&&b.variable;if(!wr)gn=`with (obj) {
`+gn+`
}
`;else if(tn.test(wr))throw new Hn(a);gn=(Et?gn.replace(wn,""):gn).replace(sn,"$1").replace(hn,"$1;"),gn="function("+(wr||"obj")+`) {
`+(wr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(gt?", __e = _.escape":"")+(Et?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+gn+`return __p
}`;var Zr=fx(function(){return pr(ze,rr+"return "+gn).apply(n,it)});if(Zr.source=gn,s1(Zr))throw Zr;return Zr}function pT(f){return Ni(f).toLowerCase()}function gT(f){return Ni(f).toUpperCase()}function mT(f,b,I){if(f=Ni(f),f&&(I||b===n))return Do(f);if(!f||!(b=Ba(b)))return f;var ne=zs(f),Se=zs(b),ze=Js(ne,Se),it=Mu(ne,Se)+1;return Tu(ne,ze,it).join("")}function vT(f,b,I){if(f=Ni(f),f&&(I||b===n))return f.slice(0,Aa(f)+1);if(!f||!(b=Ba(b)))return f;var ne=zs(f),Se=Mu(ne,zs(b))+1;return Tu(ne,0,Se).join("")}function yT(f,b,I){if(f=Ni(f),f&&(I||b===n))return f.replace(Dt,"");if(!f||!(b=Ba(b)))return f;var ne=zs(f),Se=Js(ne,zs(b));return Tu(ne,Se).join("")}function bT(f,b){var I=q,ne=R;if(Ws(b)){var Se="separator"in b?b.separator:Se;I="length"in b?Yr(b.length):I,ne="omission"in b?Ba(b.omission):ne}f=Ni(f);var ze=f.length;if(ca(f)){var it=zs(f);ze=it.length}if(I>=ze)return f;var gt=I-js(ne);if(gt<1)return ne;var Et=it?Tu(it,0,gt).join(""):f.slice(0,gt);if(Se===n)return Et+ne;if(it&&(gt+=Et.length-gt),o1(Se)){if(f.slice(gt).search(Se)){var an,ln=Et;for(Se.global||(Se=au(Se.source,Ni(dn.exec(Se))+"g")),Se.lastIndex=0;an=Se.exec(ln);)var gn=an.index;Et=Et.slice(0,gn===n?gt:gn)}}else if(f.indexOf(Ba(Se),gt)!=gt){var Rn=Et.lastIndexOf(Se);Rn>-1&&(Et=Et.slice(0,Rn))}return Et+ne}function _T(f){return f=Ni(f),f&&dr.test(f)?f.replace(Qn,Ta):f}var wT=Df(function(f,b,I){return f+(I?" ":"")+b.toUpperCase()}),u1=pw("toUpperCase");function dx(f,b,I){return f=Ni(f),b=I?n:b,b===n?Io(f)?ha(f):ct(f):f.match(b)||[]}var fx=qr(function(f,b){try{return ri(f,n,b)}catch(I){return s1(I)?I:new Hn(I)}}),xT=lh(function(f,b){return xs(b,function(I){I=Tc(I),An(f,I,r1(f[I],f))}),f});function LT(f){var b=f==null?0:f.length,I=yr();return f=b?ii(f,function(ne){if(typeof ne[1]!="function")throw new Ti(o);return[I(ne[0]),ne[1]]}):[],qr(function(ne){for(var Se=-1;++Se<b;){var ze=f[Se];if(ri(ze[0],this,ne))return ri(ze[1],this,ne)}})}function ST(f){return g(h(f,p))}function c1(f){return function(){return f}}function CT(f,b){return f==null||f!==f?b:f}var ET=mw(),MT=mw(!0);function Bl(f){return f}function h1(f){return Xn(typeof f=="function"?f:h(f,p))}function PT(f){return bo(h(f,p))}function kT(f,b){return Qu(f,h(b,p))}var AT=qr(function(f,b){return function(I){return Fe(I,f,b)}}),TT=qr(function(f,b){return function(I){return Fe(f,I,b)}});function d1(f,b,I){var ne=na(b),Se=Sn(b,ne);I==null&&!(Ws(b)&&(Se.length||!ne.length))&&(I=b,b=f,f=this,Se=Sn(b,na(b)));var ze=!(Ws(I)&&"chain"in I)||!!I.chain,it=ch(f);return xs(Se,function(gt){var Et=b[gt];f[gt]=Et,it&&(f.prototype[gt]=function(){var an=this.__chain__;if(ze||an){var ln=f(this.__wrapped__),gn=ln.__actions__=Il(this.__actions__);return gn.push({func:Et,args:arguments,thisArg:f}),ln.__chain__=an,ln}return Et.apply(f,To([this.value()],arguments))})}),f}function DT(){return Wi._===this&&(Wi._=Zi),this}function f1(){}function IT(f){return f=Yr(f),qr(function(b){return ul(b,f)})}var OT=Hy(ii),NT=Hy(ou),BT=Hy(z);function px(f){return Xy(f)?hr(Tc(f)):Xi(f)}function RT(f){return function(b){return f==null?n:sr(f,b)}}var FT=yw(),jT=yw(!0);function p1(){return[]}function g1(){return!1}function zT(){return{}}function $T(){return""}function UT(){return!0}function VT(f,b){if(f=Yr(f),f<1||f>Y)return[];var I=He,ne=Me(f,He);b=yr(b),f-=He;for(var Se=Ki(ne,b);++I<f;)b(I);return Se}function HT(f){return $r(f)?ii(f,Tc):uu(f)?[f]:Il(Ow(Ni(f)))}function GT(f){var b=++Jo;return Ni(f)+b}var WT=zm(function(f,b){return f+b},0),qT=Gy("ceil"),YT=zm(function(f,b){return f/b},1),KT=Gy("floor");function ZT(f){return f&&f.length?ve(f,Bl,ht):n}function XT(f,b){return f&&f.length?ve(f,yr(b,2),ht):n}function JT(f){return er(f,Bl)}function QT(f,b){return er(f,yr(b,2))}function eD(f){return f&&f.length?ve(f,Bl,zr):n}function tD(f,b){return f&&f.length?ve(f,yr(b,2),zr):n}var nD=zm(function(f,b){return f*b},1),rD=Gy("round"),iD=zm(function(f,b){return f-b},0);function sD(f){return f&&f.length?si(f,Bl):0}function oD(f,b){return f&&f.length?si(f,yr(b,2)):0}return Oe.after=PA,Oe.ary=Gw,Oe.assign=g6,Oe.assignIn=sx,Oe.assignInWith=Qm,Oe.assignWith=m6,Oe.at=v6,Oe.before=Ww,Oe.bind=r1,Oe.bindAll=xT,Oe.bindKey=qw,Oe.castArray=zA,Oe.chain=Uw,Oe.chunk=KP,Oe.compact=ZP,Oe.concat=XP,Oe.cond=LT,Oe.conforms=ST,Oe.constant=c1,Oe.countBy=sA,Oe.create=y6,Oe.curry=Yw,Oe.curryRight=Kw,Oe.debounce=Zw,Oe.defaults=b6,Oe.defaultsDeep=_6,Oe.defer=kA,Oe.delay=AA,Oe.difference=JP,Oe.differenceBy=QP,Oe.differenceWith=ek,Oe.drop=tk,Oe.dropRight=nk,Oe.dropRightWhile=rk,Oe.dropWhile=ik,Oe.fill=sk,Oe.filter=aA,Oe.flatMap=cA,Oe.flatMapDeep=hA,Oe.flatMapDepth=dA,Oe.flatten=Fw,Oe.flattenDeep=ok,Oe.flattenDepth=ak,Oe.flip=TA,Oe.flow=ET,Oe.flowRight=MT,Oe.fromPairs=lk,Oe.functions=M6,Oe.functionsIn=P6,Oe.groupBy=fA,Oe.initial=ck,Oe.intersection=hk,Oe.intersectionBy=dk,Oe.intersectionWith=fk,Oe.invert=A6,Oe.invertBy=T6,Oe.invokeMap=gA,Oe.iteratee=h1,Oe.keyBy=mA,Oe.keys=na,Oe.keysIn=Nl,Oe.map=qm,Oe.mapKeys=I6,Oe.mapValues=O6,Oe.matches=PT,Oe.matchesProperty=kT,Oe.memoize=Km,Oe.merge=N6,Oe.mergeWith=ox,Oe.method=AT,Oe.methodOf=TT,Oe.mixin=d1,Oe.negate=Zm,Oe.nthArg=IT,Oe.omit=B6,Oe.omitBy=R6,Oe.once=DA,Oe.orderBy=vA,Oe.over=OT,Oe.overArgs=IA,Oe.overEvery=NT,Oe.overSome=BT,Oe.partial=i1,Oe.partialRight=Xw,Oe.partition=yA,Oe.pick=F6,Oe.pickBy=ax,Oe.property=px,Oe.propertyOf=RT,Oe.pull=vk,Oe.pullAll=zw,Oe.pullAllBy=yk,Oe.pullAllWith=bk,Oe.pullAt=_k,Oe.range=FT,Oe.rangeRight=jT,Oe.rearg=OA,Oe.reject=wA,Oe.remove=wk,Oe.rest=NA,Oe.reverse=t1,Oe.sampleSize=LA,Oe.set=z6,Oe.setWith=$6,Oe.shuffle=SA,Oe.slice=xk,Oe.sortBy=MA,Oe.sortedUniq=kk,Oe.sortedUniqBy=Ak,Oe.split=cT,Oe.spread=BA,Oe.tail=Tk,Oe.take=Dk,Oe.takeRight=Ik,Oe.takeRightWhile=Ok,Oe.takeWhile=Nk,Oe.tap=Zk,Oe.throttle=RA,Oe.thru=Wm,Oe.toArray=nx,Oe.toPairs=lx,Oe.toPairsIn=ux,Oe.toPath=HT,Oe.toPlainObject=ix,Oe.transform=U6,Oe.unary=FA,Oe.union=Bk,Oe.unionBy=Rk,Oe.unionWith=Fk,Oe.uniq=jk,Oe.uniqBy=zk,Oe.uniqWith=$k,Oe.unset=V6,Oe.unzip=n1,Oe.unzipWith=$w,Oe.update=H6,Oe.updateWith=G6,Oe.values=Nf,Oe.valuesIn=W6,Oe.without=Uk,Oe.words=dx,Oe.wrap=jA,Oe.xor=Vk,Oe.xorBy=Hk,Oe.xorWith=Gk,Oe.zip=Wk,Oe.zipObject=qk,Oe.zipObjectDeep=Yk,Oe.zipWith=Kk,Oe.entries=lx,Oe.entriesIn=ux,Oe.extend=sx,Oe.extendWith=Qm,d1(Oe,Oe),Oe.add=WT,Oe.attempt=fx,Oe.camelCase=Z6,Oe.capitalize=cx,Oe.ceil=qT,Oe.clamp=q6,Oe.clone=$A,Oe.cloneDeep=VA,Oe.cloneDeepWith=HA,Oe.cloneWith=UA,Oe.conformsTo=GA,Oe.deburr=hx,Oe.defaultTo=CT,Oe.divide=YT,Oe.endsWith=X6,Oe.eq=ic,Oe.escape=J6,Oe.escapeRegExp=Q6,Oe.every=oA,Oe.find=lA,Oe.findIndex=Bw,Oe.findKey=w6,Oe.findLast=uA,Oe.findLastIndex=Rw,Oe.findLastKey=x6,Oe.floor=KT,Oe.forEach=Vw,Oe.forEachRight=Hw,Oe.forIn=L6,Oe.forInRight=S6,Oe.forOwn=C6,Oe.forOwnRight=E6,Oe.get=a1,Oe.gt=WA,Oe.gte=qA,Oe.has=k6,Oe.hasIn=l1,Oe.head=jw,Oe.identity=Bl,Oe.includes=pA,Oe.indexOf=uk,Oe.inRange=Y6,Oe.invoke=D6,Oe.isArguments=Od,Oe.isArray=$r,Oe.isArrayBuffer=YA,Oe.isArrayLike=Ol,Oe.isArrayLikeObject=_o,Oe.isBoolean=KA,Oe.isBuffer=Uh,Oe.isDate=ZA,Oe.isElement=XA,Oe.isEmpty=JA,Oe.isEqual=QA,Oe.isEqualWith=e6,Oe.isError=s1,Oe.isFinite=t6,Oe.isFunction=ch,Oe.isInteger=Jw,Oe.isLength=Xm,Oe.isMap=Qw,Oe.isMatch=n6,Oe.isMatchWith=r6,Oe.isNaN=i6,Oe.isNative=s6,Oe.isNil=a6,Oe.isNull=o6,Oe.isNumber=ex,Oe.isObject=Ws,Oe.isObjectLike=ro,Oe.isPlainObject=zp,Oe.isRegExp=o1,Oe.isSafeInteger=l6,Oe.isSet=tx,Oe.isString=Jm,Oe.isSymbol=uu,Oe.isTypedArray=Of,Oe.isUndefined=u6,Oe.isWeakMap=c6,Oe.isWeakSet=h6,Oe.join=pk,Oe.kebabCase=eT,Oe.last=Du,Oe.lastIndexOf=gk,Oe.lowerCase=tT,Oe.lowerFirst=nT,Oe.lt=d6,Oe.lte=f6,Oe.max=ZT,Oe.maxBy=XT,Oe.mean=JT,Oe.meanBy=QT,Oe.min=eD,Oe.minBy=tD,Oe.stubArray=p1,Oe.stubFalse=g1,Oe.stubObject=zT,Oe.stubString=$T,Oe.stubTrue=UT,Oe.multiply=nD,Oe.nth=mk,Oe.noConflict=DT,Oe.noop=f1,Oe.now=Ym,Oe.pad=rT,Oe.padEnd=iT,Oe.padStart=sT,Oe.parseInt=oT,Oe.random=K6,Oe.reduce=bA,Oe.reduceRight=_A,Oe.repeat=aT,Oe.replace=lT,Oe.result=j6,Oe.round=rD,Oe.runInContext=bt,Oe.sample=xA,Oe.size=CA,Oe.snakeCase=uT,Oe.some=EA,Oe.sortedIndex=Lk,Oe.sortedIndexBy=Sk,Oe.sortedIndexOf=Ck,Oe.sortedLastIndex=Ek,Oe.sortedLastIndexBy=Mk,Oe.sortedLastIndexOf=Pk,Oe.startCase=hT,Oe.startsWith=dT,Oe.subtract=iD,Oe.sum=sD,Oe.sumBy=oD,Oe.template=fT,Oe.times=VT,Oe.toFinite=hh,Oe.toInteger=Yr,Oe.toLength=rx,Oe.toLower=pT,Oe.toNumber=Iu,Oe.toSafeInteger=p6,Oe.toString=Ni,Oe.toUpper=gT,Oe.trim=mT,Oe.trimEnd=vT,Oe.trimStart=yT,Oe.truncate=bT,Oe.unescape=_T,Oe.uniqueId=GT,Oe.upperCase=wT,Oe.upperFirst=u1,Oe.each=Vw,Oe.eachRight=Hw,Oe.first=jw,d1(Oe,function(){var f={};return Kt(Oe,function(b,I){jr.call(Oe.prototype,I)||(f[I]=b)}),f}(),{chain:!1}),Oe.VERSION=r,xs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){Oe[f].placeholder=Oe}),xs(["drop","take"],function(f,b){Dr.prototype[f]=function(I){I=I===n?1:ue(Yr(I),0);var ne=this.__filtered__&&!b?new Dr(this):this.clone();return ne.__filtered__?ne.__takeCount__=Me(I,ne.__takeCount__):ne.__views__.push({size:Me(I,He),type:f+(ne.__dir__<0?"Right":"")}),ne},Dr.prototype[f+"Right"]=function(I){return this.reverse()[f](I).reverse()}}),xs(["filter","map","takeWhile"],function(f,b){var I=b+1,ne=I==K||I==N;Dr.prototype[f]=function(Se){var ze=this.clone();return ze.__iteratees__.push({iteratee:yr(Se,3),type:I}),ze.__filtered__=ze.__filtered__||ne,ze}}),xs(["head","last"],function(f,b){var I="take"+(b?"Right":"");Dr.prototype[f]=function(){return this[I](1).value()[0]}}),xs(["initial","tail"],function(f,b){var I="drop"+(b?"":"Right");Dr.prototype[f]=function(){return this.__filtered__?new Dr(this):this[I](1)}}),Dr.prototype.compact=function(){return this.filter(Bl)},Dr.prototype.find=function(f){return this.filter(f).head()},Dr.prototype.findLast=function(f){return this.reverse().find(f)},Dr.prototype.invokeMap=qr(function(f,b){return typeof f=="function"?new Dr(this):this.map(function(I){return Fe(I,f,b)})}),Dr.prototype.reject=function(f){return this.filter(Zm(yr(f)))},Dr.prototype.slice=function(f,b){f=Yr(f);var I=this;return I.__filtered__&&(f>0||b<0)?new Dr(I):(f<0?I=I.takeRight(-f):f&&(I=I.drop(f)),b!==n&&(b=Yr(b),I=b<0?I.dropRight(-b):I.take(b-f)),I)},Dr.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},Dr.prototype.toArray=function(){return this.take(He)},Kt(Dr.prototype,function(f,b){var I=/^(?:filter|find|map|reject)|While$/.test(b),ne=/^(?:head|last)$/.test(b),Se=Oe[ne?"take"+(b=="last"?"Right":""):b],ze=ne||/^find/.test(b);Se&&(Oe.prototype[b]=function(){var it=this.__wrapped__,gt=ne?[1]:arguments,Et=it instanceof Dr,an=gt[0],ln=Et||$r(it),gn=function(li){var gi=Se.apply(Oe,To([li],gt));return ne&&Rn?gi[0]:gi};ln&&I&&typeof an=="function"&&an.length!=1&&(Et=ln=!1);var Rn=this.__chain__,rr=!!this.__actions__.length,wr=ze&&!Rn,Zr=Et&&!rr;if(!ze&&ln){it=Zr?it:new Dr(this);var xr=f.apply(it,gt);return xr.__actions__.push({func:Wm,args:[gn],thisArg:n}),new Ps(xr,Rn)}return wr&&Zr?f.apply(this,gt):(xr=this.thru(gn),wr?ne?xr.value()[0]:xr.value():xr)})}),xs(["pop","push","shift","sort","splice","unshift"],function(f){var b=da[f],I=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",ne=/^(?:pop|shift)$/.test(f);Oe.prototype[f]=function(){var Se=arguments;if(ne&&!this.__chain__){var ze=this.value();return b.apply($r(ze)?ze:[],Se)}return this[I](function(it){return b.apply($r(it)?it:[],Se)})}}),Kt(Dr.prototype,function(f,b){var I=Oe[b];if(I){var ne=I.name+"";jr.call(vo,ne)||(vo[ne]=[]),vo[ne].push({name:b,func:I})}}),vo[jm(n,D).name]=[{name:"wrapper",func:n}],Dr.prototype.clone=Bh,Dr.prototype.reverse=_f,Dr.prototype.value=Rh,Oe.prototype.at=Xk,Oe.prototype.chain=Jk,Oe.prototype.commit=Qk,Oe.prototype.next=eA,Oe.prototype.plant=nA,Oe.prototype.reverse=rA,Oe.prototype.toJSON=Oe.prototype.valueOf=Oe.prototype.value=iA,Oe.prototype.first=Oe.prototype.head,lr&&(Oe.prototype[lr]=tA),Oe},Us=Oo();qi?((qi.exports=Us)._=Us,nr._=Us):Wi._=Us}).call(oa)})(zv,zv.exports);var jV=zv.exports;const zV={class:"h-full flex"},$V={class:"flex-1 relative"},UV={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},VV={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},HV={class:"text-center max-w-lg mx-auto p-8"},GV={class:"space-y-4"},WV={class:"map-parent"},qV={class:"map-content flex flex-col h-full"},YV={class:"flex-1 flex flex-col md:flex-row relative"},KV={class:"flex-1 relative"},ZV={key:0,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},XV={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-[9999] p-4 overflow-y-auto"},JV={class:"bg-white rounded-lg p-6 max-w-2xl w-full my-8 relative"},QV={class:"flex justify-between items-center mb-4 sticky top-0 bg-white pb-4 border-b"},eH={class:"overflow-y-auto max-h-[calc(100vh-12rem)]"},tH={key:0,class:"space-y-4"},nH={key:0,class:"space-y-2"},rH={class:"grid grid-cols-1 gap-2"},iH=["onClick"],sH={class:"font-medium text-gray-900"},oH={key:1,class:"space-y-2"},aH={class:"flex items-center mb-4"},lH={class:"text-sm text-gray-600"},uH={class:"grid grid-cols-1 gap-2"},cH=["onClick"],hH={class:"font-medium text-gray-900"},dH={key:2,class:"space-y-2"},fH={class:"flex items-center mb-4"},pH={class:"text-sm text-gray-600"},gH={class:"grid grid-cols-1 gap-2"},mH={key:0,class:"text-center py-4"},vH=["onClick"],yH={class:"font-medium text-gray-900"},bH={key:3,class:"space-y-2"},_H={class:"flex items-center mb-4"},wH={class:"text-sm text-gray-600"},xH={class:"grid grid-cols-1 gap-2"},LH=["onClick"],SH={class:"font-medium text-gray-900"},CH={class:"text-sm text-gray-500"},EH={class:"text-xs text-gray-400 mt-1"},MH=["onClick"],PH={key:1,class:"space-y-4"},kH={key:0,class:"space-y-2"},AH={class:"grid grid-cols-1 gap-2"},TH={key:0,class:"text-center py-8"},DH=["onClick"],IH={class:"font-medium text-gray-900"},OH={key:1,class:"space-y-2"},NH={class:"flex items-center mb-4"},BH={class:"text-sm text-gray-600"},RH={class:"grid grid-cols-1 gap-2"},FH=["onClick"],jH={class:"font-medium text-gray-900"},zH={class:"text-sm text-gray-500"},$H={class:"text-xs text-gray-400 mt-1"},UH=["onClick"],VH={key:2,class:"space-y-4"},HH={key:0,class:"space-y-2"},GH={class:"grid grid-cols-1 gap-2"},WH=["onClick"],qH={class:"font-medium text-gray-900"},YH={key:1,class:"space-y-2"},KH={class:"flex items-center mb-4"},ZH={class:"text-sm text-gray-600"},XH={class:"grid grid-cols-1 gap-2"},JH={key:0,class:"text-center py-4"},QH=["onClick"],eG={class:"font-medium text-gray-900"},tG={key:2,class:"space-y-2"},nG={class:"flex items-center mb-4"},rG={class:"text-sm text-gray-600"},iG={class:"grid grid-cols-1 gap-2"},sG=["onClick"],oG={class:"font-medium text-gray-900"},aG={class:"text-sm text-gray-500"},lG={class:"text-xs text-gray-400 mt-1"},uG=["onClick"],cG={key:3,class:"space-y-4"},hG={key:0,class:"text-center py-8"},dG={key:1,class:"space-y-2"},fG=["onClick"],pG={class:"font-medium text-gray-900"},gG={class:"text-sm text-gray-500"},mG={class:"text-xs text-gray-400 mt-1"},vG=["onClick"],yG={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4"},bG={class:"bg-white rounded-lg p-6 max-w-md w-full shadow-xl"},_G={class:"text-center mb-4"},wG={class:"mt-2 text-gray-600"},C5=_s({__name:"MapView",emits:["shape-selected"],setup(t,{emit:e}){const n=kB(),r=_t(null),i=_t(!1),s=Ay(),o=xp(),a=hf(),l=Zl(),c=_t([]),d=_t({planId:n.query.planId?parseInt(n.query.planId):null,noteId:n.query.noteId?parseInt(n.query.noteId):null,lat:n.query.lat?parseFloat(n.query.lat):null,lng:n.query.lng?parseFloat(n.query.lng):null,tool:n.query.tool||null}),{currentTool:p,selectedShape:v,map:m,initMap:x,setDrawingTool:E,updateShapeStyle:T,updateShapeProperties:D,featureGroup:k,adjustView:B,clearActiveControlPoints:W,isDrawing:Q}=gU(),{initMap:pe,changeBaseMap:fe}=bU(),O=_t(!1),U=_t(!1),q=_t(!1),R=_t(!1),$=_t(null),X=_t(null),K=_t(null),F=_t(!1),N=_t(null),J=co(),Y=_t([]),ye=_t([]),Ce=_t([]),He=_t(null),j=_t(null),Z=_t(null),ae=_t(!1),de=_t(!1),ge=_t(!1),me=_t(null),oe=qn(()=>{var mt,tt;return console.log("[MapView][filteredClients] Computing with:",{userType:(mt=J.user)==null?void 0:mt.user_type,selectedSalarie:He.value,salarieVisiteurs:ye.value,visiteurCount:((tt=ye.value)==null?void 0:tt.length)||0}),J.isSalarie||He.value?ye.value:[]}),re=qn(()=>{var jn,vn,Ut;if(!v.value)return null;console.log("[MapView][selectedShape] Initial layer state:",{layer:v.value,hasName:"name"in v.value,name:v.value.name,hasProperties:"properties"in v.value,propertiesName:(jn=v.value.properties)==null?void 0:jn.name,allLayerKeys:Object.keys(v.value),allPropertiesKeys:v.value.properties?Object.keys(v.value.properties):[],_leaflet_id:v.value._leaflet_id,_dbId:v.value._dbId,descriptor:Object.getOwnPropertyDescriptor(v.value,"name")});const mt=v.value.properties||{};let tt="unknown";mt.type?tt=mt.type:v.value instanceof Vl||v.value instanceof en.Polygon?tt="Polygon":(v.value instanceof ms||v.value instanceof en.Polyline&&!(v.value instanceof en.Polygon))&&(tt="Line"),console.log(`[MapView][selectedShape] Type de forme détecté: ${tt}`),mt.type||(v.value.properties||(v.value.properties={}),v.value.properties.type=tt);let Dt;if(mt.style&&mt.style.name)Dt=mt.style.name,console.log("[MapView][selectedShape] Using name from style:",Dt);else if(mt.name)Dt=mt.name,console.log("[MapView][selectedShape] Using name from properties:",Dt);else if(v.value.name)Dt=v.value.name,console.log("[MapView][selectedShape] Using name from layer:",Dt);else{const tn=Object.getOwnPropertyDescriptor(v.value,"name");tn&&tn.value&&(Dt=tn.value,console.log("[MapView][selectedShape] Found name in non-enumerable layer property:",Dt));const Ln=["_name","displayName","title"];for(const zn of Ln)if(v.value[zn]){Dt=v.value[zn],console.log(`[MapView][selectedShape] Found name in ${zn}:`,Dt);break}}Dt&&(console.log(`[MapView][selectedShape] Ensuring name "${Dt}" is set everywhere`),v.value.properties||(v.value.properties={}),v.value.properties.name=Dt,v.value.properties.style||(v.value.properties.style={}),v.value.properties.style.name=Dt,v.value.name=Dt,typeof v.value.setName=="function"&&(v.value.setName(Dt),console.log(`[MapView][selectedShape] Used setName method to set name "${Dt}"`))),v.value.properties.category||(v.value.properties.category="forages"),v.value.properties.accessLevel||(v.value.properties.accessLevel="visitor"),console.log("[MapView][selectedShape] Preparing properties for DrawingTools:",{type:tt,name:mt.name,foundName:Dt,hasNameProperty:"name"in mt,allPropertiesKeys:Object.keys(mt),layerId:v.value._leaflet_id,rawProperties:mt,layerName:v.value.name,layerPropertiesName:(vn=v.value.properties)==null?void 0:vn.name});const mn={...mt,type:tt,name:Dt||v.value.name||mt.name||void 0,category:v.value.properties.category||"forages",accessLevel:v.value.properties.accessLevel||"visitor"},Vt={type:tt,properties:mn,layer:v.value,options:v.value.options||{}};return console.log("[MapView][selectedShape] Final shape object for DrawingTools:",{type:Vt.type,hasName:"name"in Vt.properties,name:Vt.properties.name,layerName:Vt.layer.name,layerPropertiesName:(Ut=Vt.layer.properties)==null?void 0:Ut.name}),Vt});function Te(mt){const tt=mt.getCenter(),Dt=mt.getZoom(),mn={lat:tt.lat,lng:tt.lng,zoom:Dt};document.cookie=`mapState=${JSON.stringify(mn)};max-age=2592000;path=/`}function Le(){const tt=document.cookie.split(";").find(Dt=>Dt.trim().startsWith("mapState="));if(tt)try{return JSON.parse(tt.split("=")[1])}catch(Dt){return console.error("Erreur lors de la lecture du cookie de position:",Dt),null}return null}Ds(async()=>{var mt,tt;console.log("[MapView][onMounted] Initialisation du composant MapView"),window.addEventListener("resize",Yn),console.log("[MapView][onMounted] État initial des filtres dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2));try{if(await s.fetchPlans(),(J.isAdmin||J.isEntreprise)&&await Xt(),J.isEntreprise){ae.value=!0;try{const tn=await Pn.get("/users/",{params:{role:"SALARIE",entreprise:(mt=J.user)==null?void 0:mt.id}});Y.value=tn.data}catch(tn){console.error("Error loading salaries:",tn),Y.value=[]}finally{ae.value=!1}}if(J.isSalarie){de.value=!0;try{const tn=await J.fetchSalarieVisiteurs(((tt=J.user)==null?void 0:tt.id)||0);ye.value=Array.isArray(tn)?tn:[tn]}catch(tn){console.error("Error loading clients:",tn)}finally{de.value=!1}}const Dt=Le(),mn=Dt?[Dt.lat,Dt.lng]:[46.603354,1.888334],Vt=(Dt==null?void 0:Dt.zoom)??6;if(r.value&&!m.value){const tn=x(r.value,mn,Vt);tn.pm.setLang("fr"),tn.pm.addControls({rotateMode:!1}),pe(tn),tn.on("moveend",()=>{Te(tn)}),window.addEventListener("map-set-location",Ln=>{if(tn&&Ln.detail){const{lat:zn,lng:dn,zoom:Zt}=Ln.detail;tn.flyTo([zn,dn],Zt,{duration:1.5,easeLinearity:.25})}}),k.value&&(k.value.on("layeradd",Ln=>{const zn=Ln.layer;zn&&zn._leaflet_id&&c.value.findIndex(Zt=>Zt.layer&&Zt.layer._leaflet_id===zn._leaflet_id)===-1&&(console.log(`[MapView][featureGroup.layeradd] Ajout de la couche ${zn._leaflet_id} à shapes.value`),c.value.push({layer:zn,id:zn._dbId||zn._leaflet_id}))}),k.value.on("layerremove",Ln=>{const zn=Ln.layer;if(zn&&zn._leaflet_id)if(!zn._dbId&&(!zn.properties||zn.properties&&!zn.properties.type)){console.log(`[MapView][featureGroup.layerremove] Couche temporaire ${zn._leaflet_id} supprimée définitivement`);const Zt=c.value.findIndex($n=>$n.layer&&$n.layer._leaflet_id===zn._leaflet_id);Zt!==-1&&c.value.splice(Zt,1)}else console.log(`[MapView][featureGroup.layerremove] Couche ${zn._leaflet_id} supprimée du featureGroup mais conservée dans shapes.value pour restauration ultérieure`)}))}if(d.value.planId)try{console.log("[MapView][onMounted] Chargement du plan depuis les paramètres d'URL:",d.value.planId),await be(d.value.planId);const tn=document.querySelector(".map-parent");tn instanceof HTMLElement&&(tn.style.display="block"),d.value.lat&&d.value.lng&&m.value&&(console.log("[MapView][onMounted] Centrage de la carte sur les coordonnées:",d.value.lat,d.value.lng),m.value.flyTo([d.value.lat,d.value.lng],30)),d.value.noteId&&k.value&&(console.log("[MapView][onMounted] Recherche de la note:",d.value.noteId),setTimeout(()=>{var zn;const Ln=((zn=k.value)==null?void 0:zn.getLayers())||[];for(const dn of Ln)if(dn._dbId===d.value.noteId||dn.id===d.value.noteId){if(console.log("[MapView][onMounted] Note trouvée:",dn),typeof dn.fire=="function"&&dn.fire("click"),typeof dn.bringToFront=="function"&&dn.bringToFront(),m.value){const Zt=typeof dn.getLatLng=="function"?dn.getLatLng():[d.value.lat,d.value.lng];m.value.flyTo(Zt,18)}break}},1e3)),d.value.tool&&(console.log("[MapView][onMounted] Activation de l'outil:",d.value.tool),E(d.value.tool))}catch(tn){console.error("[MapView][onMounted] Erreur chargement plan depuis URL:",tn),await jn()}else await jn();async function jn(){const tn=localStorage.getItem("lastPlanId");if(tn)try{console.log("[MapView][loadLastPlan] Chargement du dernier plan:",tn),await be(parseInt(tn));const Ln=document.querySelector(".map-parent");Ln instanceof HTMLElement&&(Ln.style.display="block")}catch(Ln){console.error("[MapView][loadLastPlan] Erreur chargement dernier plan:",Ln),$.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),he(),localStorage.removeItem("lastPlanId")}else console.log("[MapView][loadLastPlan] Aucun dernier plan à charger"),$.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),he()}window.addEventListener("shape:created",tn=>{const{shape:Ln,type:zn,properties:dn}=tn.detail;console.log("[MapView] Nouvelle forme créée",{shape:Ln,type:zn,properties:dn}),o.addElement(Ln),E("")}),window.addEventListener("geonote:savePlan",()=>{console.log("[ISSUE01][MapView] Événement geonote:savePlan reçu - Sauvegarde automatique du plan"),je()}),window.addEventListener("geonote:select",tn=>{if(console.log("[MapView] Événement geonote:select reçu",tn.detail),tn.detail&&tn.detail.geoNote){const Ln=tn.detail.geoNote;v.value=Ln,_l(()=>{console.log("[MapView] Note géolocalisée sélectionnée:",Ln)})}}),window.addEventListener("categoriesReactivated",tn=>{console.log("[MapView][categoriesReactivated] Événement reçu:",tn.detail),Fn()}),window.addEventListener("shapeTypesReactivated",tn=>{console.log("[MapView][shapeTypesReactivated] Événement reçu:",tn.detail),Fn()});const vn=tn=>{if(console.log("[MapView] Édition de note via Leaflet",tn),console.log("[MapView] Type de e:",typeof tn,"Contenu de e:",JSON.stringify(tn)),!tn||!tn.note){console.error("[MapView] Erreur: e.note est undefined ou null",tn);return}const Ln=tn.note;console.log("[MapView] Note à éditer:",Ln),X.value={id:Ln.id,title:Ln.title||Ln.name,description:Ln.description,location:Ln.location,columnId:Ln.columnId||a.getDefaultColumn.id,accessLevel:Ln.accessLevel,style:Ln.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:Ln.createdAt||new Date().toISOString(),updatedAt:Ln.updatedAt||new Date().toISOString(),comments:Ln.comments||[],photos:Ln.photos||[]},console.log("[MapView] editingMapNote.value après conversion:",X.value),q.value=!0,console.log("[MapView] showNoteEditModal.value:",q.value)},Ut=tn=>{if(console.log("[MapView] Édition de note via événement global",tn),!tn.detail||!tn.detail.note){console.error("[MapView] Erreur: event.detail.note est undefined ou null",tn);return}const Ln=tn.detail.note;console.log("[MapView] Note à éditer (global):",Ln);let dn=tn.detail.backendId||Ln.backendId;if(!dn){const Zt=c.value.find($n=>$n.layer===tn.detail.source);dn=Zt?Zt.id:Ln.id}console.log("[MapView] ID backend de la note pour l'API:",dn,"Source:",tn.detail.source?"Couche Leaflet":"Autre"),X.value={id:dn,leafletId:Ln.id,title:Ln.title||Ln.name,description:Ln.description,location:Ln.location,columnId:Ln.columnId||a.getDefaultColumn.id,accessLevel:Ln.accessLevel,style:Ln.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:Ln.createdAt||new Date().toISOString(),updatedAt:Ln.updatedAt||new Date().toISOString(),comments:Ln.comments||[],photos:Ln.photos||[]},console.log("[MapView] Note préparée pour édition:",X.value),q.value=!0};window.addEventListener("geonote:edit",Ut),k.value&&(k.value.off("note:edit"),k.value.on("note:edit",vn))}catch(Dt){console.error("Error during component mount:",Dt),$.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),he(),localStorage.removeItem("lastPlanId")}}),ni(()=>o.hasUnsavedChanges,mt=>{console.log("[ISSUE01][MapView][watch drawingStore.hasUnsavedChanges]",mt),mt&&$.value&&(s.markUnsavedChanges(),je())});let qe;Ds(()=>{qe=setInterval(()=>{o.hasUnsavedChanges&&$.value&&(console.log("[ISSUE01][MapView] Sauvegarde déclenchée par intervalle"),je())},6e4)}),$u(()=>{clearInterval(qe)}),ni(()=>s.plans,mt=>{console.log("[MapView][watch irrigationStore.plans] Mise à jour de la liste des plans:",mt.length),U.value&&(Z.value||console.log("[MapView][watch irrigationStore.plans] Mise à jour de l'interface client"))},{deep:!0}),ni(()=>o.filters,(mt,tt)=>{if(console.log("[MapView][watch drawingStore.filters] Changement de filtres détecté:",JSON.stringify(mt,null,2)),tt){const Dt=JSON.stringify(tt.accessLevels)!==JSON.stringify(mt.accessLevels),mn=JSON.stringify(tt.categories)!==JSON.stringify(mt.categories),Vt=JSON.stringify(tt.shapeTypes)!==JSON.stringify(mt.shapeTypes);console.log("[MapView][watch drawingStore.filters] Changements détectés:",{accessLevelsChanged:Dt,categoriesChanged:mn,shapeTypesChanged:Vt}),Dt||mn||Vt?(console.log("[MapView][watch drawingStore.filters] Mise à jour de l'affichage suite au changement de filtres"),Fn()):console.log("[MapView][watch drawingStore.filters] Aucun changement réel, pas de mise à jour")}else console.log("[MapView][watch drawingStore.filters] Mise à jour de l'affichage suite au changement de filtres"),Fn()},{deep:!0});const se=mt=>{console.log("[MapView][filtersChanged] Événement reçu:",mt.detail),Fn()};Ds(()=>{window.addEventListener("filtersChanged",se)}),$u(()=>{window.removeEventListener("filtersChanged",se),console.log("[MapView][filtersChanged] Événement désactivé")}),ni(()=>o.getFilteredElements,(mt,tt)=>{console.log("[MapView][watch drawingStore.getFilteredElements] Mise à jour de l'affichage, éléments filtrés:",{nouveaux:mt.length,anciens:tt?tt.length:"aucun",ids:mt.map(Dt=>Dt.id)}),console.log("[MapView][watch drawingStore.getFilteredElements] Mise à jour de l'affichage suite au changement d'elements filtrés"),Fn()},{deep:!0}),ni(m,async mt=>{var tt;console.log(`
[MapView][watch map] Nouvelle carte:`,!!mt),mt&&s.currentPlan&&!((tt=k.value)!=null&&tt.getLayers().length)&&(console.log("[MapView][watch map] Chargement initial des éléments du plan:",s.currentPlan.id),he(),await o.loadPlanElements(s.currentPlan.id))}),ni(()=>s.currentPlan,async(mt,tt)=>{var Dt,mn,Vt;if((mt==null?void 0:mt.id)===(tt==null?void 0:tt.id)){console.log("[MapView][watch currentPlan] Plan identique, pas de rechargement nécessaire");return}console.log(`
[MapView][watch currentPlan] ====== CHANGEMENT DE PLAN ======`),console.log("[MapView][watch currentPlan] Nouveau plan:",mt==null?void 0:mt.id);try{if(mt){console.log("[MapView][watch currentPlan] Mise à jour du plan courant..."),$.value=mt;const jn=document.querySelector(".map-parent");jn instanceof HTMLElement&&(jn.style.display="block"),console.log("[MapView][watch currentPlan] Plan mis à jour avec succès")}else{console.log("[MapView][watch currentPlan] Nettoyage du plan courant..."),$.value=null,he();const jn=document.querySelector(".map-parent");jn instanceof HTMLElement&&(jn.style.display="none")}}catch(jn){console.error("[MapView][watch currentPlan] ERREUR:",jn),$.value=null,he()}console.log("[MapView][watch currentPlan] État final:",{currentPlanId:(Dt=$.value)==null?void 0:Dt.id,storePlanId:(mn=s.currentPlan)==null?void 0:mn.id,mapVisible:m.value!==null,mapParentDisplay:(Vt=document.querySelector(".map-parent"))==null?void 0:Vt.getAttribute("style")}),console.log(`[MapView][watch currentPlan] ====== FIN CHANGEMENT ======
`)},{immediate:!0}),Ld(()=>{m.value&&m.value.off("moveend"),window.removeEventListener("resize",Yn),window.removeEventListener("shape:created",()=>{})});function le(){i.value=!i.value}function he(){var mt,tt;console.log("[ISSUE01][MapView][clearMap] Début du nettoyage de la carte",{featureGroupExists:!!k.value,featureGroupLayersCount:((mt=k.value)==null?void 0:mt.getLayers().length)||0,shapesCount:c.value.length,shapesIds:c.value.map(Dt=>Dt.id)}),k.value&&(k.value.eachLayer(Dt=>{var mn;((mn=Dt.properties)==null?void 0:mn.type)==="Note"&&typeof Dt.resetPlanSaveState=="function"&&Dt.resetPlanSaveState()}),k.value.clearLayers(),console.log("[ISSUE01][MapView][clearMap] Toutes les couches ont été supprimées")),c.value=[],W(),v.value=null,p.value="",console.log("[ISSUE01][MapView][clearMap] Fin du nettoyage de la carte",{featureGroupLayersCount:((tt=k.value)==null?void 0:tt.getLayers().length)||0,shapesCount:c.value.length})}async function ee(mt){var tt;try{console.log("[ISSUE01][MapView][refreshMapWithPlan] Début du refreshMapWithPlan",{planId:mt,currentPlanId:$.value?$.value.id:null,mapInitialized:!!m.value,featureGroupExists:!!k.value,featureGroupLayersCount:k.value&&k.value.getLayers().length||0}),console.log("[ISSUE01][MapView][refreshMapWithPlan] Nettoyage de la carte avant chargement"),he(),console.log("[ISSUE01][MapView][refreshMapWithPlan] Chargement des éléments du plan"),await o.loadPlanElements(mt);const Dt=s.getPlanById(mt);if(console.log("[ISSUE01][MapView][refreshMapWithPlan] Plan chargé depuis le store",{planFound:!!Dt,planId:Dt==null?void 0:Dt.id,drawingElementsCount:o.getCurrentElements.length,drawingElementsIds:o.getCurrentElements.map(mn=>mn.id)}),Dt){console.log("[ISSUE01][MapView][refreshMapWithPlan] Mise à jour du plan courant",{oldPlanId:(tt=$.value)==null?void 0:tt.id,newPlanId:Dt.id}),$.value=Dt,s.setCurrentPlan(Dt),o.setCurrentPlan(Dt.id),localStorage.setItem("lastPlanId",Dt.id.toString());try{console.log("[MapView][refreshMapWithPlan] Chargement des notes géolocalisées associées au plan:",mt);const Vt=(await sa.getNotesByPlan(mt)).data;console.log(`[MapView][refreshMapWithPlan] ${Vt.length} notes géolocalisées récupérées`);const jn=hf();m.value&&k.value&&Vt.forEach(vn=>{try{if(jn.addNote({...vn,id:vn.id,columnId:vn.column,accessLevel:vn.access_level}),vn.location&&vn.location.type==="Point"&&Array.isArray(vn.location.coordinates)&&vn.location.coordinates.length===2){const Ut=gl.fromBackendData({name:vn.title,description:vn.description,location:vn.location,columnId:vn.column,accessLevel:vn.access_level,style:vn.style||{color:vn.color||"#3B82F6",weight:2,opacity:1,fillColor:vn.color||"#3B82F6",fillOpacity:.6,radius:8},category:vn.category||"forages",comments:vn.comments||[],photos:vn.photos||[]});Ut._dbId=vn.id,k.value.addLayer(Ut),c.value.push({id:vn.id,type:"Note",layer:Ut,properties:Ut.properties}),console.log("[MapView][refreshMapWithPlan] Note géolocalisée ajoutée à la carte:",{id:vn.id,title:vn.title,location:vn.location})}}catch(Ut){console.error("[MapView][refreshMapWithPlan] Erreur lors de l'ajout de la note géolocalisée:",Ut)}})}catch(mn){console.error("[MapView][refreshMapWithPlan] Erreur lors du chargement des notes géolocalisées:",mn)}if(m.value&&k.value){console.log("[ISSUE01][MapView][refreshMapWithPlan:addShapesToMap] Éléments disponibles:",{count:o.getCurrentElements.length,elements:o.getCurrentElements.map(Ut=>({id:Ut.id,type:Ut.type_forme}))});const mn=o.getCurrentElements.reduce((Ut,tn)=>(Ut[tn.type_forme]||(Ut[tn.type_forme]=[]),Ut[tn.type_forme].push(tn),Ut),{}),Vt=["Note","Polygon","Line"],jn=Object.keys(mn).sort((Ut,tn)=>{const Ln=Vt.indexOf(Ut),zn=Vt.indexOf(tn);return(Ln===-1?999:Ln)-(zn===-1?999:zn)}),vn=Ut=>{switch(Ut){case"Note":return 20;case"Line":return 10;case"Polygon":return 5;default:return 10}};for(const Ut of jn){const tn=mn[Ut],Ln=vn(Ut);for(let zn=0;zn<tn.length;zn+=Ln){const dn=tn.slice(zn,zn+Ln);await Promise.all(dn.map(async Zt=>{var yi;if(!k.value||!Zt.data)return;console.log(`[ISSUE01][MapView][refreshMapWithPlan:createElement] Création d'un élément de type ${Zt.type_forme}`,{id:Zt.id,hasFeatureGroup:!!k.value,hasData:!!Zt.data});let $n=null;switch(Zt.type_forme){case"Polygon":{const or=Zt.data;if(or.points&&or.points.length>0){const di=or.points.map(ur=>en.latLng(ur[1],ur[0]));$n=new Vl(di,or.style),or.name&&($n.properties={name:or.name},$n.name=or.name)}break}case"Line":{const or=Zt.data;if(or.points&&or.points.length>0){const di=or.points.map(ur=>en.latLng(ur[1],ur[0]));$n=new ms(di,or.style),or.name&&($n.properties={name:or.name},$n.name=or.name)}break}case"Note":{console.log("[MapView][refreshMapWithPlan] Création d'une note:",Zt.data);const or=Zt.data;if(or.location&&Array.isArray(or.location)&&or.location.length===2||or.location&&typeof or.location=="object"&&or.location.type==="Point"&&Array.isArray(or.location.coordinates)&&or.location.coordinates.length===2)try{or.category||(or.category="forages",console.log("[MapView][refreshMapWithPlan] Catégorie par défaut ajoutée:",or.category)),or.accessLevel||(or.accessLevel="private",console.log("[MapView][refreshMapWithPlan] Niveau d'accès par défaut ajouté:",or.accessLevel));const ur=gl.fromBackendData(or);ur._dbId=Zt.id,$n=ur,console.log("[MapView][refreshMapWithPlan] Note créée:",{id:Zt.id,location:or.location,name:or.name,category:or.category,accessLevel:or.accessLevel,type:ur.properties.type})}catch(ur){console.error("[MapView][refreshMapWithPlan] Erreur lors de la création de la Note:",ur)}else console.error("[MapView][refreshMapWithPlan] Données invalides pour Note:",or),console.log("[MapView][refreshMapWithPlan] Format de location attendu:",{formatArray:"[lat, lng]",formatGeoJSON:'{ type: "Point", coordinates: [lng, lat] }'});break}}$n&&($n._dbId=Zt.id,(yi=k.value)==null||yi.addLayer($n),c.value.push({id:Zt.id,type:Zt.type_forme,layer:$n,properties:$n.properties}))})),await new Promise(Zt=>requestAnimationFrame(()=>setTimeout(Zt,0)))}}setTimeout(()=>{B(),m.value&&m.value.invalidateSize({animate:!1,pan:!1})},100)}console.log(`Plan ${mt} chargé avec succès avec ${o.getCurrentElements.length} formes`)}else console.error(`Plan ${mt} introuvable après chargement`);U.value=!1}catch(Dt){throw console.error("Erreur lors du rafraîchissement de la carte:",Dt),Dt}}async function be(mt){var tt;console.log(`
[MapView][loadPlan] ====== DÉBUT CHARGEMENT PLAN ======`),console.log("[MapView][loadPlan] Tentative de chargement du plan:",mt);try{const Dt=s.getPlanById(mt);if(console.log("[MapView][loadPlan] Plan trouvé dans le store:",!!Dt),!Dt){console.log("[MapView][loadPlan] Plan non trouvé dans le store, vérification API...");try{await Pn.get(`/plans/${mt}/`)}catch(mn){throw((tt=mn.response)==null?void 0:tt.status)===404&&(console.warn("[MapView][loadPlan] Plan non trouvé - conservation de lastPlanId pour fallback"),$.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),he()),mn}}console.log("[MapView][loadPlan] Rafraîchissement de la carte..."),await ee(mt),U.value=!1,console.log("[MapView][loadPlan] Invalidation de la taille de la carte..."),fn(),console.log("[MapView][loadPlan] Plan chargé avec succès:",{planId:mt,elementsCount:o.getCurrentElements.length})}catch(Dt){throw console.error("Erreur lors du chargement du plan:",Dt),$.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),he(),Dt}}async function je(){var mt,tt,Dt,mn,Vt;if(console.log("[ISSUE01][MapView][savePlan] POINT D'ENTRÉE - Call Stack:",new Error().stack),F.value){console.log("[ISSUE01][MapView][savePlan] Sauvegarde déjà en cours, ignorer l'appel");return}if(!$.value||!k.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}F.value=!0,N.value="saving";try{const jn=[],vn=new Set(o.getCurrentElements.filter(dn=>dn.id!==void 0).map(dn=>dn.id)),Ut=new Set;console.log("[ISSUE01][MapView][savePlan] Début de la sauvegarde",{featureGroupLayers:k.value.getLayers().length,existingIds:Array.from(vn),currentElements:o.getCurrentElements.length,currentElementsIds:o.getCurrentElements.map(dn=>dn.id)}),k.value.eachLayer(dn=>{var or,di,ur,ar,Gi,Ri,Fi,rs,fs,ws,Is,Os;console.log("[ISSUE01][MapView][savePlan] Traitement de la couche",{type:(or=dn.properties)==null?void 0:or.type,id:dn._dbId||dn._elementId,isPolygon:dn instanceof en.Polygon,properties:dn.properties});let Zt,$n;const yi={color:dn.options.color||"#2b6451",weight:dn.options.weight||3,opacity:dn.options.opacity||1,fillColor:dn.options.fillColor||"#2b6451",fillOpacity:dn.options.fillOpacity||.2,dashArray:dn.options.dashArray||""};if(dn instanceof en.Polyline&&!(dn instanceof en.Polygon)){Zt="Line";const cr=dn.getLatLngs(),gr=((di=dn.properties)==null?void 0:di.category)||"forages",Si=((ur=dn.properties)==null?void 0:ur.accessLevel)||"visitor";console.log("[savePlan] Line - Catégorie:",gr,"Niveau d'accès:",Si),$n={points:cr.map(Pr=>[Pr.lng,Pr.lat]),name:((ar=dn.properties)==null?void 0:ar.name)||"",category:gr,accessLevel:Si,style:{...yi,_accessLevel:Si,accessLevel:Si}}}else if(dn instanceof en.Polygon){Zt="Polygon";const cr=dn.getLatLngs()[0],gr=((Gi=dn.properties)==null?void 0:Gi.category)||"forages",Si=((Ri=dn.properties)==null?void 0:Ri.accessLevel)||"visitor";console.log("[savePlan] Polygon - Catégorie:",gr,"Niveau d'accès:",Si),$n={points:cr.map(Pr=>[Pr.lng,Pr.lat]),name:((Fi=dn.properties)==null?void 0:Fi.name)||"",category:gr,accessLevel:Si,style:{...yi,_accessLevel:Si,accessLevel:Si}}}else if(((rs=dn.properties)==null?void 0:rs.type)==="Note"){console.log("[savePlan] Note géolocalisée détectée - sauvegarde via API dédiée");const cr=dn;if(cr._dbId&&typeof cr._dbId=="number"&&Ut.add(cr._dbId),typeof cr.saveNote=="function")try{if(cr.properties&&(cr.properties.style||(cr.properties.style={}),cr.properties.accessLevel&&(cr.properties.style._accessLevel=cr.properties.accessLevel,cr.properties.style.accessLevel=cr.properties.accessLevel),cr.properties.style.color)){const gr=cr.properties.style.color;console.log("[savePlan] Préservation de la couleur existante:",gr),cr.properties.style.color=gr,cr.properties.style.fillColor=gr}console.log("[savePlan] Sauvegarde de la note géolocalisée via API dédiée",{category:(fs=cr.properties)==null?void 0:fs.category,accessLevel:(ws=cr.properties)==null?void 0:ws.accessLevel,styleAccessLevel:(Os=(Is=cr.properties)==null?void 0:Is.style)==null?void 0:Os.accessLevel}),$.value&&$.value.id?cr.saveNote($.value.id):cr.saveNote()}catch(gr){console.error("[savePlan] Erreur lors de la sauvegarde de la note:",gr)}else console.warn("[savePlan] La note ne possède pas de méthode saveNote");Zt=void 0,$n=void 0}if(Zt&&$n){let cr=dn._elementId;dn._dbId&&(cr=dn._dbId,typeof cr=="number"&&Ut.add(cr)),jn.push({id:cr,type_forme:Zt,data:$n})}}),console.log("[ISSUE01][MapView][savePlan] Éléments à sauvegarder",{totalElements:jn.length,elementsIds:jn.map(dn=>dn.id),elementTypes:jn.map(dn=>dn.type_forme)});const tn=Array.from(vn).filter(dn=>!Ut.has(dn));console.log("[ISSUE01][MapView][savePlan] Éléments supprimés:",{existingIds:Array.from(vn),currentLayerIds:Array.from(Ut),elementsToDelete:tn});const Ln=jn.filter(dn=>!dn.id||!tn.includes(dn.id));console.log("[ISSUE01][MapView][savePlan] Elements après filtrage:",{totalBefore:jn.length,totalAfter:Ln.length,elementsIdsAfter:Ln.map(dn=>dn.id)}),o.elements=Ln;const zn=await o.saveToPlan($.value.id,{elementsToDelete:tn});if(console.log("[ISSUE01][MapView][savePlan] Plan mis à jour par le serveur:",{formesCount:((mt=zn.formes)==null?void 0:mt.length)||0,formesIds:((tt=zn.formes)==null?void 0:tt.map(dn=>dn.id))||[]}),console.log("[ISSUE01][MapView][savePlan] Vérification du contenu détaillé des formes:",{currentLayerCount:k.value.getLayers().length,currentElements:o.getCurrentElements.length,serverElementCount:((Dt=zn.formes)==null?void 0:Dt.length)||0,detailedFormes:(mn=zn.formes)==null?void 0:mn.map(dn=>({id:dn.id,type:dn.type_forme,dataSize:dn.data?Object.keys(dn.data).length:0}))}),zn&&((Vt=$.value)!=null&&Vt.id)){const dn=$.value.id;$.value={...$.value,...zn},s.updatePlanDetails(dn,zn)}N.value="success",k.value&&k.value.eachLayer(dn=>{var Zt;((Zt=dn.properties)==null?void 0:Zt.type)==="Note"&&typeof dn.resetPlanSaveState=="function"&&dn.resetPlanSaveState()}),setTimeout(()=>{N.value=null},3e3)}catch(jn){console.error("Erreur lors de la sauvegarde du plan:",jn),N.value=null}finally{F.value=!1}}$u(()=>{J.user||Bt(),s.clearCurrentPlan(),o.clearCurrentPlan(),k.value&&k.value.off("note:edit"),window.removeEventListener("geonote:edit",()=>{}),window.removeEventListener("categoriesReactivated",()=>{}),window.removeEventListener("shapeTypesReactivated",()=>{}),window.removeEventListener("shape:created",()=>{}),window.removeEventListener("map-set-location",()=>{})});function We(mt){var tt,Dt,mn;if(console.log("[MapView][updateShapeProperties] Mise à jour des propriétés:",mt),D(mt),v.value&&((tt=v.value.properties)==null?void 0:tt.type)==="Note")if(console.log("[MapView][updateShapeProperties] Note géolocalisée détectée, sauvegarde via API dédiée"),typeof v.value.saveNote=="function")try{if(mt.category&&(v.value.properties.category=mt.category),mt.accessLevel&&(v.value.properties.accessLevel=mt.accessLevel,v.value.properties.style||(v.value.properties.style={}),v.value.properties.style._accessLevel=mt.accessLevel,v.value.properties.style.accessLevel=mt.accessLevel),v.value.properties.style&&v.value.properties.style.color){const Vt=v.value.properties.style.color;console.log("[MapView][updateShapeProperties] Préservation de la couleur existante:",Vt),v.value.properties.style.color=Vt,v.value.properties.style.fillColor=Vt}console.log("[MapView][updateShapeProperties] Sauvegarde de la note géolocalisée via API dédiée",{category:(Dt=v.value.properties)==null?void 0:Dt.category,accessLevel:(mn=v.value.properties)==null?void 0:mn.accessLevel,updatedProperties:mt}),$.value&&$.value.id?v.value.saveNote($.value.id):v.value.saveNote(),v.value.bindPopup&&v.value.createPopupContent&&(console.log("[MapView][updateShapeProperties] Forçage de la mise à jour du popup après la sauvegarde"),v.value.bindPopup(v.value.createPopupContent()))}catch(Vt){console.error("[MapView][updateShapeProperties] Erreur lors de la sauvegarde de la note:",Vt)}else console.warn("[MapView][updateShapeProperties] La note ne possède pas de méthode saveNote");else if(mt.category&&v.value&&v.value._dbId){const Vt=v.value._dbId,jn=o.elements.find(vn=>vn.id===Vt);if(jn){console.log(`[MapView][updateShapeProperties] Mise à jour de la catégorie dans le store: ${mt.category} pour l'élément ${Vt}`);const vn=jn;vn.data||(vn.data={}),vn.data.category=mt.category,o.$patch({unsavedChanges:!0})}}}function Qe(mt){try{const tt=new Date(mt);return isNaN(tt.getTime())?(console.error("Date invalide reçue:",mt),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(tt)}catch(tt){return console.error("Erreur lors du formatage de la date:",tt),"Date invalide"}}const Je=()=>{k.value&&B()},st=async()=>{var mt;if(v.value&&k.value){const tt=v.value._leaflet_id,Dt=v.value._dbId;if(((mt=v.value.properties)==null?void 0:mt.type)==="Note"&&Dt)try{console.log(`[MapView][deleteSelectedShape] Suppression de la note ${Dt} du backend...`),await sa.deleteNote(Dt),a.removeNote(Dt),console.log(`[MapView][deleteSelectedShape] Note ${Dt} supprimée avec succès du backend et du store`),l.success("Note supprimée avec succès")}catch(Vt){console.error(`[MapView][deleteSelectedShape] Erreur lors de la suppression de la note ${Dt} du backend:`,Vt),l.error("Erreur lors de la suppression de la note")}E(""),k.value.removeLayer(v.value),c.value=c.value.filter(Vt=>Vt.layer&&Vt.layer._leaflet_id!==tt),console.log(`[MapView][deleteSelectedShape] Forme ${tt} (dbId: ${Dt}) supprimée du featureGroup et de shapes.value`),v.value=null}};async function Pt(mt){console.log(`onPlanCreated - Tentative de chargement du plan ${mt}`),await s.fetchPlans();const tt=s.getPlanById(mt);tt?(console.log(`Plan ${mt} trouvé, chargement en cours...`),localStorage.setItem("lastPlanId",mt.toString()),$.value=tt,s.setCurrentPlan(tt),o.setCurrentPlan(tt.id),O.value=!1,fn(),console.log(`Plan ${mt} chargé avec succès`)):console.error(`Plan ${mt} introuvable après création! Vérifiez les permissions.`)}ni(He,async mt=>{var tt;if(mt&&((tt=J.user)==null?void 0:tt.user_type)==="admin"){de.value=!0;try{const Dt=await J.fetchSalarieVisiteurs(mt.id);ye.value=Array.isArray(Dt)?Dt:[Dt]}catch(Dt){console.error("[MapView][watch selectedSalarie] Error:",Dt),ye.value=[]}finally{de.value=!1}}});function Bt(){localStorage.removeItem("lastPlanId")}const Ht=_t(!1),Jt=jV.debounce(()=>{m.value&&_l(()=>{var mt;try{if(m.value&&m.value.getContainer()&&document.body.contains(m.value.getContainer())){if(m.value.invalidateSize({animate:!1}),(mt=k.value)!=null&&mt.getLayers().length)try{B()}catch(tt){console.warn("[invalidateMapSize] Erreur lors de l'ajustement de la vue:",tt)}}else console.warn("[invalidateMapSize] Carte non valide pour l'invalidation")}catch(tt){console.warn("[invalidateMapSize] Erreur lors de l'invalidation de la taille de la carte:",tt)}})},250);function fn(){Jt()}ni($,(mt,tt)=>{mt&&mt.id!==(tt==null?void 0:tt.id)&&_l(()=>{fn()})});const pn=_t(null),et=_t(!1),ot=_t([]),rt=qn(()=>{if(console.log("[MapView][filteredSalaries] Computing with:",{selectedEntreprise:pn.value,salaries:Y.value,salariesLength:Y.value.length}),!pn.value)return[];const mt=Y.value.filter(tt=>{var Vt,jn,vn;const Dt=tt.entreprise,mn=typeof Dt=="object"&&Dt!==null?Dt.id:Dt;return console.log("[MapView][filteredSalaries] Checking salarie:",{salarie:tt,salarieEntreprise:Dt,salarieEntrepriseId:mn,selectedEntrepriseId:(Vt=pn.value)==null?void 0:Vt.id,matches:mn===((jn=pn.value)==null?void 0:jn.id)}),mn===((vn=pn.value)==null?void 0:vn.id)});return console.log("[MapView][filteredSalaries] Filtered result:",mt),mt});function Ft(mt){if(!mt)return"";const tt=mt.first_name||"",Dt=mt.last_name?mt.last_name.toUpperCase():"",mn=mt.company_name||mt.role||"";return`${tt} ${Dt} (${mn})`}async function Xt(){et.value=!0;try{const mt=await Pn.get("/users/",{params:{role:"ENTREPRISE"}});ot.value=mt.data}catch(mt){console.error("[MapView] Error loading entreprises:",mt),ot.value=[]}finally{et.value=!1}}async function Mn(mt){console.log("[MapView][selectEntreprise] Sélection de l'entreprise:",mt),pn.value=mt,ae.value=!0;try{console.log("[MapView][selectEntreprise] Envoi de la requête avec params:",{role:"SALARIE",entreprise:mt.id});const tt=await Pn.get("/users/",{params:{role:"SALARIE",entreprise:mt.id}});console.log("[MapView][selectEntreprise] Réponse reçue:",tt.data),Y.value=tt.data,console.log("[MapView][selectEntreprise] Salaries mis à jour:",Y.value)}catch(tt){console.error("[MapView] Error loading salaries for entreprise:",tt),Y.value=[]}finally{ae.value=!1}}function xn(){pn.value=null,He.value=null,Z.value=null,Y.value=[],ye.value=[],Ce.value=[]}function Cn(){He.value=null,Z.value=null,ye.value=[],Ce.value=[]}function Vn(){Z.value=null,Ce.value=[]}async function wn(mt){var tt,Dt,mn,Vt,jn,vn;console.log(`
[MapView][selectSalarie] ====== DÉBUT SÉLECTION SALARIE ======`),console.log("Informations du salarie:",{id:mt.id,username:mt.username,company:mt.company_name,role:mt.role}),console.log("Contexte utilisateur:",{userType:(tt=J.user)==null?void 0:tt.user_type,userId:(Dt=J.user)==null?void 0:Dt.id,userRole:(mn=J.user)==null?void 0:mn.role,selectedEntrepriseId:(Vt=pn.value)==null?void 0:Vt.id}),He.value=mt,de.value=!0;try{const Ut={role:"VISITEUR",salarie:mt.id};J.isEntreprise?(console.log("Ajout de l'ID de l'entreprise connectée:",(jn=J.user)==null?void 0:jn.id),Ut.entreprise=(vn=J.user)==null?void 0:vn.id):pn.value&&(console.log("Ajout de l'ID de l'entreprise sélectionnée:",pn.value.id),Ut.entreprise=pn.value.id),console.log("Paramètres de la requête:",Ut);const tn=await Pn.get("/users/",{params:Ut});console.log("Réponse reçue du serveur:",{status:tn.status,dataLength:Array.isArray(tn.data)?tn.data.length:"non-array",data:tn.data}),Array.isArray(tn.data)?(ye.value=tn.data,console.log(`${tn.data.length} visiteurs chargés`),tn.data.forEach((Ln,zn)=>{console.log(`Visiteur ${zn+1}:`,{id:Ln.id,username:Ln.username,company:Ln.company_name,salarie:Ln.salarie})})):(console.warn("Format de réponse inattendu:",tn.data),ye.value=[]),ye.value.length===0&&console.warn("Aucun visiteur trouvé pour ce salarie")}catch(Ut){if(console.error("ERREUR lors du chargement des visiteurs:",Ut),Ut&&typeof Ut=="object"&&"response"in Ut){const tn=Ut;console.error("Détails de l'erreur:",{status:tn.response.status,data:tn.response.data})}ye.value=[]}finally{de.value=!1,console.log(`[MapView][selectSalarie] ====== FIN SÉLECTION SALARIE ======
`)}}function sn(){q.value=!1,X.value=null}function hn(mt){K.value=mt,R.value=!0}async function Qn(){var mt,tt,Dt;if((mt=K.value)!=null&&mt.id)try{const mn=K.value.id,Vt={selectedClient:Z.value,selectedSalarie:He.value,isNoVisiteurView:Z.value&&Z.value.id===-1};if(await s.deletePlan(mn),R.value=!1,K.value=null,await new Promise(jn=>setTimeout(jn,50)),Vt.isNoVisiteurView)console.log("[MapView][confirmDeletePlan] Rechargement des plans sans visiteur"),await Pi();else if(Vt.selectedClient){console.log("[MapView][confirmDeletePlan] Rechargement des plans du client:",Vt.selectedClient.id);const jn={visiteur:Vt.selectedClient.id};Vt.selectedSalarie&&(jn.salarie=Vt.selectedSalarie.id),J.isEntreprise?jn.entreprise=(tt=J.user)==null?void 0:tt.id:pn.value&&(jn.entreprise=pn.value.id);const vn=await Pn.get("/plans/",{params:jn});Ce.value=vn.data}else console.log("[MapView][confirmDeletePlan] Rechargement de tous les plans"),await s.fetchPlans();((Dt=$.value)==null?void 0:Dt.id)===mn&&($.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),he(),localStorage.removeItem("lastPlanId"))}catch(mn){console.error("Erreur lors de la suppression du plan:",mn),alert("Une erreur est survenue lors de la suppression du plan"),R.value=!1,K.value=null}}function ir(){R.value=!1,K.value=null}function dr(mt){console.log("[MapView][handleFilterChange] Mise à jour des filtres dans le store"),o.updateFilters(mt),console.log("[MapView][handleFilterChange] Éléments dans le store:",{count:o.elements.length,ids:o.elements.map(tt=>tt.id)}),console.log("[MapView][handleFilterChange] Mise à jour de l'affichage de la carte"),Fn(),setTimeout(()=>{console.log("[MapView][handleFilterChange] Mise à jour forcée de l'affichage"),Fn()},100),console.log("[MapView][handleFilterChange] Traitement des filtres terminé")}function Fn(){if(!k.value)return;const mt=[];c.value.forEach((Zt,$n)=>{Zt.layer&&!Zt.id&&(!Zt.layer.properties||Zt.layer.properties&&!Zt.layer.properties.type)&&(console.log(`[MapView][updateMapDisplay] Nettoyage préventif de la couche temporaire ${Zt.layer._leaflet_id}`),mt.push($n))});for(let Zt=mt.length-1;Zt>=0;Zt--)c.value.splice(mt[Zt],1);({...o.filters.accessLevels},{...o.filters.categories}),{...o.filters.shapeTypes};const tt={count:o.elements.length,elements:o.elements.map(Zt=>({id:Zt.id,type_forme:Zt.type_forme}))};console.log("[MapView][updateMapDisplay] Éléments dans le store:",JSON.stringify(tt,null,2));const Dt=o.getFilteredElements;console.log("[MapView][updateMapDisplay] Éléments filtrés:",{total:o.elements.length,filtered:Dt.length,filteredIds:Dt.map(Zt=>Zt.id)});const mn=k.value.getLayers();console.log("[MapView][updateMapDisplay] Couches actuelles:",mn.length);const Vt=mn.map(Zt=>({_leaflet_id:Zt._leaflet_id,_dbId:Zt._dbId,hasProperties:!!Zt.properties,propertyType:Zt.properties?Zt.properties.type:null,category:Zt.properties?Zt.properties.category:null}));console.log("[MapView][updateMapDisplay] Détails des couches:",JSON.stringify(Vt,null,2)),console.log("[MapView][updateMapDisplay] État des filtres pour les catégories:",{forages:o.filters.categories.forages,clients:o.filters.categories.clients,entrepots:o.filters.categories.entrepots,livraisons:o.filters.categories.livraisons,cultures:o.filters.categories.cultures,parcelles:o.filters.categories.parcelles});const jn=new Map;c.value.forEach(Zt=>{Zt.layer&&Zt.id&&jn.set(Zt.id,Zt.layer)});const vn=new Map;mn.forEach(Zt=>{Zt._dbId&&vn.set(Zt,Zt._dbId)});const Ut=new Set(Dt.map(Zt=>Zt.id));console.log("[MapView][updateMapDisplay] Début du traitement des couches");const tn=Array.from(Ut);console.log("[MapView][updateMapDisplay] IDs des éléments filtrés:",JSON.stringify(tn));let Ln=0,zn=0,dn=0;mn.forEach(Zt=>{var Is,Os;const $n=Zt._dbId,yi=Zt._leaflet_id;if(!$n){if(!Zt.properties){dn++,console.log(`[MapView][updateMapDisplay] Couche ${yi} sans dbId et sans propriétés, ignorée`);return}Zt._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[MapView][updateMapDisplay] Couche ${yi} sans dbId, ID temporaire assigné: ${Zt._dbId}`)}const or=Zt.properties||{},di=or.type||Zt.type_forme||"";let ur=or.category;if(Zt._dbId){const cr=o.elements.find(gr=>gr.id===Zt._dbId);if(cr){const gr=cr.data;gr&&gr.category&&(ur!==gr.category&&(console.log(`[MapView][updateMapDisplay] Catégorie différente détectée - Propriétés: ${ur}, Store: ${gr.category} pour la couche ${Zt._dbId}`),ur=gr.category),Zt.properties||(Zt.properties={}),Zt.properties.category=ur)}}ur||(ur="default");const ar=or.accessLevel||"visitor";console.log(`[MapView][updateMapDisplay] Couche ${yi} (dbId: ${Zt._dbId}): type=${di}, category=${ur}, accessLevel=${ar}`);let Gi=!1;di?Gi=di in o.filters.shapeTypes&&o.filters.shapeTypes[di]===!0:Gi=o.filters.shapeTypes.Polygon===!0;let Ri=!1;ur?ur in o.filters.categories?(Ri=o.filters.categories[ur]===!0,console.log(`[MapView][updateMapDisplay] Vérification de la catégorie ${ur}: ${Ri}`)):(Ri=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie ${ur} non trouvée dans les filtres, utilisation de 'forages': ${Ri}`)):(Ri=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie non spécifiée, utilisation de 'forages': ${Ri}`));let Fi=!1;const rs={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let fs="visitor";rs.company?fs="company":rs.employee?fs="employee":rs.visitor&&(fs="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès sélectionné par l'utilisateur: ${fs}`),fs==="company"?Fi=!0:fs==="employee"?Fi=ar==="employee"||ar==="visitor":fs==="visitor"&&(Fi=ar==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès de la couche: ${ar}, visible: ${Fi}`);const ws=Gi&&Ri&&Fi;console.log(`[MapView][updateMapDisplay] Visibilité de la couche ${yi}: typeVisible=${Gi}, categoryVisible=${Ri}, accessLevelVisible=${Fi}, isVisible=${ws}`),console.log(`[MapView][updateMapDisplay] Détails de la couche ${yi}: type=${di}, category=${ur}, accessLevel=${ar}`),ws?k.value.hasLayer(Zt)?(Ln++,console.log(`[MapView][updateMapDisplay] Couche ${Zt._dbId} (${di}) déjà visible avec catégorie ${((Os=Zt.properties)==null?void 0:Os.category)||"non définie"}`)):(ur&&ur!=="default"&&(!Zt.properties||!Zt.properties.category)&&(Zt.properties||(Zt.properties={}),Zt.properties.category=ur,console.log(`[MapView][updateMapDisplay] Catégorie définie avant ajout: ${ur} pour la couche ${Zt._dbId}`)),k.value.addLayer(Zt),Ln++,console.log(`[MapView][updateMapDisplay] Affichage de la couche ${Zt._dbId} (${di}) avec catégorie ${((Is=Zt.properties)==null?void 0:Is.category)||"non définie"}`)):k.value.hasLayer(Zt)?(k.value.removeLayer(Zt),zn++,console.log(`[MapView][updateMapDisplay] Masquage de la couche ${Zt._dbId} (${di}) - Filtres non respectés`)):(zn++,console.log(`[MapView][updateMapDisplay] Couche ${Zt._dbId} (${di}) déjà masquée`))}),console.log("[MapView][updateMapDisplay] Début de la restauration des couches filtrées"),console.log("[MapView][updateMapDisplay] Nombre de formes dans shapes.value:",c.value.length),c.value.forEach(Zt=>{var Os;if(!Zt.layer){console.log("[MapView][updateMapDisplay] Forme sans couche, ignorée");return}const $n=Zt.layer,yi=$n._leaflet_id,or=$n._dbId;if(console.log(`[MapView][updateMapDisplay] Traitement de la forme ${yi} (dbId: ${or})`),k.value.hasLayer($n)){console.log(`[MapView][updateMapDisplay] La couche ${yi} est déjà dans le featureGroup, ignorée`);return}const di=$n.properties||{},ur=di.type||$n.type_forme||"";let ar=null;if($n._dbId){const cr=o.elements.find(gr=>gr.id===$n._dbId);if(cr){const gr=cr.data;gr&&gr.category&&(ar=gr.category,console.log(`[MapView][updateMapDisplay] Catégorie récupérée depuis le store: ${ar} pour la couche ${$n._dbId}`))}}!ar&&di.category&&(ar=di.category,console.log(`[MapView][updateMapDisplay] Catégorie récupérée depuis les propriétés: ${ar} pour la couche ${yi}`)),ar||(ar="default");const Gi=di.accessLevel||"visitor";if($n.properties||($n.properties={}),ar&&ar!=="default"&&($n.properties.category=ar,console.log(`[MapView][updateMapDisplay] Catégorie définie/restaurée: ${ar} pour la couche ${$n._dbId}`),$n._dbId)){const cr=o.elements.find(gr=>gr.id===$n._dbId);if(cr){const gr=cr;gr.data||(gr.data={}),gr.data.category!==ar&&(console.log(`[MapView][updateMapDisplay] Mise à jour de la catégorie dans le store: ${ar} pour l'élément ${$n._dbId}`),gr.data.category=ar,o.$patch({unsavedChanges:!0}))}}$n.properties.accessLevel||($n.properties.accessLevel="visitor"),console.log(`[MapView][updateMapDisplay] Propriétés de la couche ${yi}: type=${ur}, category=${ar}, accessLevel=${Gi}`);let Ri=!1;ur?Ri=ur in o.filters.shapeTypes&&o.filters.shapeTypes[ur]===!0:Ri=o.filters.shapeTypes.Polygon===!0;let Fi=!1;if(ar)if(ar in o.filters.categories)Fi=o.filters.categories[ar]===!0,console.log(`[MapView][updateMapDisplay] Vérification de la catégorie ${ar}: ${Fi}`);else if(vE().getUniqueCategories.includes(ar)){console.log(`[MapView][updateMapDisplay] Catégorie personnalisée ${ar} trouvée dans mapFilterStore, ajout aux filtres`);const Si={...o.filters.categories};Si[ar]=!0,o.updateFilters({categories:Si}),Fi=!0}else Fi=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie ${ar} non trouvée, utilisation de 'forages': ${Fi}`);else Fi=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Pas de catégorie, utilisation de 'forages': ${Fi}`);let rs=!1;const fs={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let ws="visitor";fs.company?ws="company":fs.employee?ws="employee":fs.visitor&&(ws="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès sélectionné par l'utilisateur (2ème étape): ${ws}`),ws==="company"?rs=!0:ws==="employee"?rs=Gi==="employee"||Gi==="visitor":ws==="visitor"&&(rs=Gi==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès de la couche (2ème étape): ${Gi}, visible: ${rs}`);const Is=Ri&&Fi&&rs;if(console.log(`[MapView][updateMapDisplay] Visibilité de la couche ${yi}: typeVisible=${Ri}, categoryVisible=${Fi}, accessLevelVisible=${rs}, isVisible=${Is}`),Is){if(ar&&ar!=="default"&&($n.properties||($n.properties={}),$n.properties.category=ar,console.log(`[MapView][updateMapDisplay] Catégorie définie avant restauration: ${ar} pour la couche ${yi}`),$n._dbId)){const cr=o.elements.find(gr=>gr.id===$n._dbId);if(cr){const gr=cr;gr.data||(gr.data={}),gr.data.category!==ar&&(console.log(`[MapView][updateMapDisplay] Mise à jour de la catégorie dans le store avant restauration: ${ar} pour l'élément ${$n._dbId}`),gr.data.category=ar,o.$patch({unsavedChanges:!0}))}}k.value.addLayer($n),Ln++,console.log(`[MapView][updateMapDisplay] Restauration de la couche ${yi} (${ur}) avec catégorie ${((Os=$n.properties)==null?void 0:Os.category)||"non définie"} - Filtres respectés`)}else console.log(`[MapView][updateMapDisplay] La couche ${yi} (${ur}) reste masquée - Filtres non respectés`)}),console.log(`[MapView][updateMapDisplay] Restauration terminée: ${Ln} couches visibles au total`),console.log(`[MapView][updateMapDisplay] Statistiques: ${Ln} couches visibles, ${zn} couches masquées, ${dn} couches sans dbId`),console.log("[MapView][updateMapDisplay] Mise à jour terminée")}function Mr(mt){if(k.value){const Dt=k.value.getLayers().find(mn=>mn._leaflet_id===mt.id);Dt&&(Dt.properties.name=mt.title,Dt.properties.description=mt.description,Dt.properties.columnId=mt.columnId,Dt.properties.accessLevel=mt.accessLevel,Dt.properties.category||(Dt.properties.category="forages"),Dt.setNoteStyle({color:mt.style.color,fillColor:mt.style.fillColor,weight:mt.style.weight,fillOpacity:mt.style.fillOpacity,radius:mt.style.radius}),Dt.closePopup(),Dt.unbindPopup(),Dt.bindPopup(Dt.createPopupContent()),console.log("[handleNoteSave] Note mise à jour:",{name:Dt.properties.name,category:Dt.properties.category,accessLevel:Dt.properties.accessLevel,columnId:Dt.properties.columnId}),a.notes.find(Vt=>Vt.id===mt.id)?(a.updateNote(mt.id,{title:mt.title,description:mt.description,columnId:mt.columnId,accessLevel:mt.accessLevel,style:mt.style,updatedAt:new Date().toISOString()}),console.log("[handleNoteSave] Note mise à jour dans le store avec columnId:",mt.columnId)):(a.addNote({title:mt.title,description:mt.description,location:[mt.location[0],mt.location[1]],columnId:mt.columnId||"1",style:mt.style,accessLevel:mt.accessLevel}),console.log("[handleNoteSave] Note ajoutée au store avec columnId:",mt.columnId||"1")))}l.success("Note enregistrée avec succès")}async function ns(mt){var tt;Z.value=mt,ge.value=!0;try{const Dt={visiteur:mt.id};J.isEntreprise?Dt.entreprise=(tt=J.user)==null?void 0:tt.id:pn.value&&(Dt.entreprise=pn.value.id),He.value&&(Dt.salarie=He.value.id);const mn=await Pn.get("/plans/",{params:Dt});Ce.value=mn.data}catch(Dt){console.error("[MapView] Error loading client plans:",Dt),Ce.value=[]}finally{ge.value=!1}}async function Pi(){var tt;console.log("[MapView][loadPlansWithoutVisiteur] Chargement des plans sans visiteur");const mt={id:-1,username:"sans_visiteur",first_name:"Sans",last_name:"Visiteur",company_name:"",role:"VISITEUR",display_name:"Plans sans visiteur"};Z.value=mt,ge.value=!0;try{const Dt={visiteur_null:!0};J.isEntreprise?Dt.entreprise=(tt=J.user)==null?void 0:tt.id:pn.value&&(Dt.entreprise=pn.value.id),He.value&&(Dt.salarie=He.value.id),console.log("[MapView][loadPlansWithoutVisiteur] Paramètres de requête:",Dt);const mn=await Pn.get("/plans/",{params:Dt});console.log("[MapView][loadPlansWithoutVisiteur] Plans reçus:",mn.data),Ce.value=mn.data}catch(Dt){console.error("[MapView] Error loading plans without visiteur:",Dt),Ce.value=[]}finally{ge.value=!1}}async function Xs(){var mt;if(He.value=null,Z.value=null,Ce.value=[],J.isEntreprise){ae.value=!0;try{const tt=await Pn.get("/users/",{params:{role:"SALARIE",entreprise:(mt=J.user)==null?void 0:mt.id}});Y.value=tt.data,console.log("[MapView][openLoadPlanModal] Salariés chargés:",Y.value.length)}catch(tt){console.error("[MapView][openLoadPlanModal] Erreur lors du chargement des salariés:",tt),Y.value=[]}finally{ae.value=!1}}U.value=!0}const ds=_t(window.innerWidth<768);function Yn(){ds.value,ds.value=window.innerWidth<768}return(mt,tt)=>{var Dt,mn,Vt,jn,vn;return De(),Ne(_n,null,[C("div",zV,[C("div",$V,[Ht.value?(De(),Ne("div",UV,tt[8]||(tt[8]=[wl('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Génération de la synthèse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualité de vos captures pour un rendu parfait </p></div></div></div>',1)]))):Wt("",!0),$.value?Wt("",!0):(De(),Ne("div",VV,[C("div",HV,[tt[11]||(tt[11]=wl('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+I9+'" alt="TagMap Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur TagMap</h1><p class="text-gray-600 mb-8">Pour commencer à dessiner, vous devez d&#39;abord créer un nouveau plan ou charger un plan existant.</p>',3)),C("div",GV,[C("button",{onClick:tt[0]||(tt[0]=Ut=>O.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},tt[9]||(tt[9]=[C("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Ir(" Créer un nouveau plan ")])),C("button",{onClick:Xs,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},tt[10]||(tt[10]=[C("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),Ir(" Charger un plan existant ")]))])])])),On(C("div",WV,[C("div",qV,[$.value&&!Ht.value?(De(),xo(l$,{key:0,"last-save":(Dt=$.value)!=null&&Dt.date_modification?new Date($.value.date_modification):void 0,"plan-name":(mn=$.value)==null?void 0:mn.nom,"plan-description":(Vt=$.value)==null?void 0:Vt.description,"save-status":N.value,onChangeMapType:bn(fe),onCreateNewPlan:tt[1]||(tt[1]=Ut=>O.value=!0),onLoadPlan:Xs,onSavePlan:je,onAdjustView:Je,class:"flex-shrink-0"},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])):Wt("",!0),C("div",YV,[i.value&&$.value&&!Ht.value?(De(),Ne("div",{key:0,onClick:le,class:"md:hidden fixed inset-0 bg-black/30 z-[1800] transition-opacity duration-300"})):Wt("",!0),C("div",KV,[C("div",{ref_key:"mapContainer",ref:r,class:"absolute inset-0 z-[1000]"},null,512)]),$.value&&!Ht.value?(De(),Ne(_n,{key:1},[ds.value?(De(),xo(Zf,{key:0,to:"body"},[Xr(r5,{show:i.value,"onUpdate:show":tt[2]||(tt[2]=Ut=>i.value=Ut),"selected-tool":bn(p),"selected-shape":re.value,"is-drawing":bn(Q),onToolSelected:bn(E),onFilterChange:dr,onDeleteShape:st,onPropertiesUpdate:We,onStyleUpdate:bn(T),class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected","onStyleUpdate"])])):(De(),xo(r5,{key:1,show:i.value,"onUpdate:show":tt[3]||(tt[3]=Ut=>i.value=Ut),"selected-tool":bn(p),"selected-shape":re.value,"is-drawing":bn(Q),onToolSelected:bn(E),onFilterChange:dr,onDeleteShape:st,onPropertiesUpdate:We,onStyleUpdate:bn(T),class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected","onStyleUpdate"]))],64)):Wt("",!0),$.value&&!Ht.value?(De(),Ne("div",{key:2,class:"md:hidden fixed left-0 right-0 z-[1900] bg-white py-3 px-3 shadow-lg border-t border-gray-200 flex items-center justify-between cursor-pointer",style:{height:"var(--mobile-bottom-toolbar-height)",bottom:"0"},onClick:le},tt[12]||(tt[12]=[wl('<div class="flex items-center w-full justify-center"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg><span class="text-sm text-gray-500 font-medium">Outils</span></div></div>',1)]))):Wt("",!0)])]),Ht.value?(De(),Ne("div",ZV,tt[13]||(tt[13]=[wl('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Génération de la synthèse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):Wt("",!0)],512),[[y_,$.value]]),(De(),xo(Zf,{to:"body"},[Xr(_E,{ref_key:"newPlanModalRef",ref:me,modelValue:O.value,"onUpdate:modelValue":tt[4]||(tt[4]=Ut=>O.value=Ut),onCreated:Pt,onSalarieSelected:tt[5]||(tt[5]=Ut=>He.value=Ut),onVisiteurSelected:tt[6]||(tt[6]=Ut=>j.value=Ut)},null,8,["modelValue"])])),(De(),xo(Zf,{to:"body"},[U.value?(De(),Ne("div",XV,[C("div",JV,[C("div",QV,[tt[15]||(tt[15]=C("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),C("button",{onClick:tt[7]||(tt[7]=Ut=>U.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},tt[14]||(tt[14]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",eH,[bn(J).isAdmin?(De(),Ne("div",tH,[pn.value?He.value?Z.value?(De(),Ne("div",bH,[C("div",_H,[C("button",{onClick:Vn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},tt[31]||(tt[31]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Ir(" Retour à la liste des clients ")])),tt[32]||(tt[32]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",wH,Tt(Ft(Z.value)),1)]),tt[34]||(tt[34]=C("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),C("div",xH,[ge.value?(De(),Ne(_n,{key:0},Wn(3,Ut=>C("div",{key:Ut,class:"animate-pulse"},tt[33]||(tt[33]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),C("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(De(!0),Ne(_n,{key:1},Wn(Ce.value,Ut=>(De(),Ne("div",{key:Ut.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[C("button",{onClick:tn=>be(Ut.id),class:"w-full text-left"},[C("div",SH,Tt(Ut.nom),1),C("div",CH,Tt(Ut.description),1),C("div",EH," Modifié le "+Tt(Qe(Ut.date_modification)),1)],8,LH),bn(J).isAdmin||bn(J).isEntreprise?(De(),Ne("button",{key:0,onClick:xl(tn=>hn(Ut),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,MH)):Wt("",!0)]))),128))])])):(De(),Ne("div",dH,[C("div",fH,[C("button",{onClick:Cn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},tt[24]||(tt[24]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Ir(" Retour à la liste des salaries ")])),tt[25]||(tt[25]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",pH,Tt(Ft(He.value)),1)]),tt[30]||(tt[30]=C("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),C("div",gH,[C("button",{onClick:Pi,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},tt[26]||(tt[26]=[C("div",null,[C("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),C("div",{class:"text-xs text-primary-600"},"Afficher les plans créés sans visiteur associé")],-1),C("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),de.value?(De(),Ne(_n,{key:0},Wn(3,Ut=>C("div",{key:Ut,class:"animate-pulse"},tt[27]||(tt[27]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(De(),Ne(_n,{key:1},[oe.value.length===0?(De(),Ne("div",mH,tt[28]||(tt[28]=[C("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),C("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(De(!0),Ne(_n,{key:1},Wn(oe.value,Ut=>(De(),Ne("button",{key:Ut.id,onClick:tn=>ns(Ut),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",yH,Tt(Ft(Ut)),1)]),tt[29]||(tt[29]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,vH))),128))],64))])])):(De(),Ne("div",oH,[C("div",aH,[C("button",{onClick:xn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},tt[19]||(tt[19]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Ir(" Retour à la liste des entreprises ")])),tt[20]||(tt[20]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",lH,Tt(Ft(pn.value)),1)]),tt[23]||(tt[23]=C("h3",{class:"font-medium text-gray-700"},"Sélectionnez un salarie",-1)),C("div",uH,[ae.value?(De(),Ne(_n,{key:0},Wn(3,Ut=>C("div",{key:Ut,class:"animate-pulse"},tt[21]||(tt[21]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(De(!0),Ne(_n,{key:1},Wn(rt.value,Ut=>(De(),Ne("button",{key:Ut.id,onClick:tn=>wn(Ut),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",hH,Tt(Ft(Ut)),1)]),tt[22]||(tt[22]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,cH))),128))])])):(De(),Ne("div",nH,[tt[18]||(tt[18]=C("h3",{class:"font-medium text-gray-700"},"Sélectionnez une entreprise",-1)),C("div",rH,[et.value?(De(),Ne(_n,{key:0},Wn(3,Ut=>C("div",{key:Ut,class:"animate-pulse"},tt[16]||(tt[16]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(De(!0),Ne(_n,{key:1},Wn(ot.value,Ut=>(De(),Ne("button",{key:Ut.id,onClick:tn=>Mn(Ut),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",sH,Tt(Ft(Ut)),1)]),tt[17]||(tt[17]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,iH))),128))])]))])):bn(J).isSalarie?(De(),Ne("div",PH,[Z.value?(De(),Ne("div",OH,[C("div",NH,[C("button",{onClick:Vn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},tt[39]||(tt[39]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Ir(" Retour à la liste des clients ")])),tt[40]||(tt[40]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",BH,Tt(Ft(Z.value)),1)]),tt[42]||(tt[42]=C("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),C("div",RH,[ge.value?(De(),Ne(_n,{key:0},Wn(3,Ut=>C("div",{key:Ut,class:"animate-pulse"},tt[41]||(tt[41]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),C("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(De(!0),Ne(_n,{key:1},Wn(Ce.value,Ut=>(De(),Ne("div",{key:Ut.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[C("button",{onClick:tn=>be(Ut.id),class:"w-full text-left"},[C("div",jH,Tt(Ut.nom),1),C("div",zH,Tt(Ut.description),1),C("div",$H," Modifié le "+Tt(Qe(Ut.date_modification)),1)],8,FH),bn(J).isAdmin||bn(J).isEntreprise?(De(),Ne("button",{key:0,onClick:xl(tn=>hn(Ut),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,UH)):Wt("",!0)]))),128))])])):(De(),Ne("div",kH,[tt[38]||(tt[38]=C("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),C("div",AH,[de.value?(De(),Ne(_n,{key:0},Wn(3,Ut=>C("div",{key:Ut,class:"animate-pulse"},tt[35]||(tt[35]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(De(),Ne(_n,{key:1},[oe.value.length===0?(De(),Ne("div",TH,tt[36]||(tt[36]=[C("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),C("div",{class:"text-sm text-gray-400"}," Veuillez vérifier que des visiteurs ont été assignés à ce salarie ",-1)]))):(De(!0),Ne(_n,{key:1},Wn(oe.value,Ut=>(De(),Ne("button",{key:Ut.id,onClick:tn=>ns(Ut),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",IH,Tt(Ft(Ut)),1)]),tt[37]||(tt[37]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,DH))),128))],64))])]))])):bn(J).isEntreprise?(De(),Ne("div",VH,[He.value?Z.value?(De(),Ne("div",tG,[C("div",nG,[C("button",{onClick:Vn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},tt[53]||(tt[53]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Ir(" Retour à la liste des visiteurs ")])),tt[54]||(tt[54]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",rG,Tt(Ft(Z.value)),1)]),tt[56]||(tt[56]=C("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),C("div",iG,[ge.value?(De(),Ne(_n,{key:0},Wn(3,Ut=>C("div",{key:Ut,class:"animate-pulse"},tt[55]||(tt[55]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),C("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(De(!0),Ne(_n,{key:1},Wn(Ce.value,Ut=>(De(),Ne("div",{key:Ut.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[C("button",{onClick:tn=>be(Ut.id),class:"w-full text-left"},[C("div",oG,Tt(Ut.nom),1),C("div",aG,Tt(Ut.description),1),C("div",lG," Modifié le "+Tt(Qe(Ut.date_modification)),1)],8,sG),bn(J).isAdmin||bn(J).isEntreprise?(De(),Ne("button",{key:0,onClick:xl(tn=>hn(Ut),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,uG)):Wt("",!0)]))),128))])])):(De(),Ne("div",YH,[C("div",KH,[C("button",{onClick:Cn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},tt[46]||(tt[46]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Ir(" Retour à la liste des salariés ")])),tt[47]||(tt[47]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",ZH,Tt(Ft(He.value)),1)]),tt[52]||(tt[52]=C("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),C("div",XH,[C("button",{onClick:Pi,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},tt[48]||(tt[48]=[C("div",null,[C("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),C("div",{class:"text-xs text-primary-600"},"Afficher les plans créés sans visiteur associé")],-1),C("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),de.value?(De(),Ne(_n,{key:0},Wn(3,Ut=>C("div",{key:Ut,class:"animate-pulse"},tt[49]||(tt[49]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(De(),Ne(_n,{key:1},[oe.value.length===0?(De(),Ne("div",JH,tt[50]||(tt[50]=[C("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarié",-1),C("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(De(!0),Ne(_n,{key:1},Wn(oe.value,Ut=>(De(),Ne("button",{key:Ut.id,onClick:tn=>ns(Ut),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",eG,Tt(Ft(Ut)),1)]),tt[51]||(tt[51]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,QH))),128))],64))])])):(De(),Ne("div",HH,[tt[45]||(tt[45]=C("h3",{class:"font-medium text-gray-700"},"Sélectionnez un salarié",-1)),C("div",GH,[ae.value?(De(),Ne(_n,{key:0},Wn(3,Ut=>C("div",{key:Ut,class:"animate-pulse"},tt[43]||(tt[43]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(De(!0),Ne(_n,{key:1},Wn(Y.value,Ut=>(De(),Ne("button",{key:Ut.id,onClick:tn=>wn(Ut),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",qH,Tt(Ft(Ut)),1)]),tt[44]||(tt[44]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,WH))),128))])]))])):(De(),Ne("div",cG,[bn(s).plans.length===0?(De(),Ne("div",hG,tt[57]||(tt[57]=[C("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(De(),Ne("div",dG,[(De(!0),Ne(_n,null,Wn(bn(s).plans,Ut=>(De(),Ne("div",{key:Ut.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[C("button",{onClick:tn=>be(Ut.id),class:"w-full text-left"},[C("div",pG,Tt(Ut.nom),1),C("div",gG,Tt(Ut.description),1),C("div",mG," Modifié le "+Tt(Qe(Ut.date_modification)),1)],8,fG),bn(J).isAdmin||bn(J).isEntreprise?(De(),Ne("button",{key:0,onClick:xl(tn=>hn(Ut),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,vG)):Wt("",!0)]))),128))]))]))])])])):Wt("",!0)])),(De(),xo(Zf,{to:"body"},[R.value?(De(),Ne("div",yG,[C("div",bG,[C("div",_G,[tt[58]||(tt[58]=C("svg",{class:"h-12 w-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),tt[59]||(tt[59]=C("h3",{class:"text-xl font-semibold text-gray-900"},"Supprimer le plan",-1)),C("p",wG,' Êtes-vous sûr de vouloir supprimer le plan "'+Tt(K.value?K.value.nom:"")+'" ? Cette action est irréversible. ',1)]),C("div",{class:"flex justify-center space-x-4"},[C("button",{onClick:ir,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-300"}," Annuler "),C("button",{onClick:Qn,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"}," Supprimer ")])])])):Wt("",!0)]))])]),(De(),xo(Zf,{to:"body"},[q.value?(De(),xo(yE,{key:0,note:X.value,"is-new-note":!((jn=X.value)!=null&&jn.id),location:(vn=X.value)==null?void 0:vn.location,onClose:sn,onSave:Mr},null,8,["note","is-new-note","location"])):Wt("",!0)]))],64)}}}),xG={class:"fixed inset-0 z-[3001] overflow-y-auto"},LG={class:"flex items-center justify-center min-h-screen w-full p-0"},SG={class:"relative bg-white w-full h-full max-h-full overflow-y-auto md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},CG={class:"p-4 md:p-6"},EG={class:"flex justify-between items-center mb-4 border-b pb-4"},MG={class:"text-xl font-semibold text-gray-900",id:"modal-headline"},PG={class:"mt-4"},kG={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},AG={class:"flex"},TG={class:"ml-3"},DG={class:"text-sm font-medium text-red-800"},IG={key:0},OG={key:1},NG=["value"],BG={key:2},RG={key:3},FG=["value"],jG={key:4,class:"bg-blue-50 p-3 rounded-md mb-4"},zG={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2"},$G={key:0,class:"mt-2 text-sm text-red-600"},UG={key:0,class:"mt-2 text-sm text-red-600"},VG={key:5},HG={class:"flex items-center"},GG={key:6,class:"border-t pt-4 mt-4"},WG={class:"mb-4"},qG={class:"mb-4"},YG={key:7},KG={key:8},ZG={key:0,class:"mt-2 text-sm text-red-600"},XG={class:"flex justify-end space-x-3"},JG=["disabled"],QG={key:0,class:"mr-2"},eW=_s({__name:"UserFormModal",props:{user:{type:Object,default:()=>({})},salaries:{type:Array,default:()=>[]},entreprises:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isEntreprise:{type:Boolean,default:!1},currentSalarie:{type:String,default:void 0},currentEntreprise:{type:String,default:void 0},apiErrors:{type:Array,default:()=>[]},refreshKey:{type:Number,default:0}},emits:["close","save","refresh"],setup(t,{emit:e}){const n=t,r=e,i=_t(!1),s=_t(""),o=_t(""),a=_t(""),l=_t(""),c=_t(""),d=wu({id:void 0,first_name:"",last_name:"",username:"",email:"",password:"",company_name:"",role:n.isEntreprise?"SALARIE":n.isAdmin?"ADMIN":"VISITEUR",salarie:null,entreprise:null,is_active:!0,storage_quota:50,storage_used:0,ecowitt_api_key:"",ecowitt_application_key:""});Ds(()=>{var v;(v=n.user)!=null&&v.id?(d.id=n.user.id,d.first_name=n.user.first_name||"",d.last_name=n.user.last_name||"",d.username=n.user.username||"",d.email=n.user.email||"",d.company_name=n.user.company_name||"",d.role=n.user.role||"VISITEUR",d.is_active=n.user.is_active??!0,d.ecowitt_api_key=n.user.ecowitt_api_key||"",d.ecowitt_application_key=n.user.ecowitt_application_key||"",d.storage_quota=n.user.storage_quota||50,d.storage_used=n.user.storage_used||0,n.user.salarie?typeof n.user.salarie=="object"?d.salarie=n.user.salarie.id:d.salarie=n.user.salarie:n.user.salarie_id?d.salarie=n.user.salarie_id:n.currentSalarie&&(d.salarie=parseInt(n.currentSalarie)),n.user.entreprise?typeof n.user.entreprise=="object"?d.entreprise=n.user.entreprise.id:d.entreprise=n.user.entreprise:n.user.entreprise_id?d.entreprise=n.user.entreprise_id:n.currentEntreprise&&(d.entreprise=parseInt(n.currentEntreprise))):(n.currentSalarie&&(d.salarie=parseInt(n.currentSalarie)),n.currentEntreprise&&(d.entreprise=parseInt(n.currentEntreprise)),n.isEntreprise?d.role="SALARIE":n.isAdmin||(d.role="VISITEUR"))}),nm(()=>{d.role==="ADMIN"||d.role==="ENTREPRISE"?(d.salarie=null,d.entreprise=null):d.role==="SALARIE"&&(d.salarie=null,n.isEntreprise&&n.currentEntreprise&&(d.entreprise=parseInt(n.currentEntreprise)))}),nm(()=>{s.value="",o.value="",a.value="",l.value="",n.apiErrors&&n.apiErrors.length>0&&n.apiErrors.forEach(v=>{switch(v.field){case"email":s.value=v.message;break;case"username":o.value=v.message;break;case"password":a.value=v.message;break;case"non_field_error":default:l.value=v.message;break}})});async function p(){s.value="",o.value="",a.value="",l.value="";let v=!0;if(d.id||(d.password!==c.value?(a.value="Les mots de passe ne correspondent pas",v=!1):d.password.length<8&&(a.value="Le mot de passe doit contenir au moins 8 caractères",v=!1)),!!v){i.value=!0;try{const m={...d};d.id&&delete m.password,n.isEntreprise&&["SALARIE","VISITEUR"].includes(d.role)&&(m.entreprise_id=n.currentEntreprise?parseInt(n.currentEntreprise):void 0),m.salarie&&(m.salarie_id=m.salarie,delete m.salarie),n.currentSalarie&&d.role==="VISITEUR"&&(m.salarie_id=parseInt(n.currentSalarie)),await r("save",m),r("refresh")}catch(m){console.error("Erreur locale:",m)}finally{i.value=!1}}}return(v,m)=>(De(),Ne("div",xG,[C("div",LG,[m[43]||(m[43]=C("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[C("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),C("div",SG,[C("div",null,[C("div",CG,[C("div",EG,[C("h3",MG,Tt(t.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),C("button",{type:"button",onClick:m[0]||(m[0]=x=>v.$emit("close")),class:"text-gray-400 hover:text-gray-500"},m[16]||(m[16]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",PG,[l.value?(De(),Ne("div",kG,[C("div",AG,[m[17]||(m[17]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",TG,[C("h3",DG,Tt(l.value),1)])])])):Wt("",!0),C("form",{onSubmit:xl(p,["prevent"]),class:"space-y-6"},[t.isAdmin?(De(),Ne("div",IG,[m[19]||(m[19]=C("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),On(C("select",{id:"role","onUpdate:modelValue":m[1]||(m[1]=x=>d.role=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},m[18]||(m[18]=[C("option",{value:"ADMIN"},"Administrateur",-1),C("option",{value:"ENTREPRISE"},"Entreprise",-1),C("option",{value:"SALARIE"},"Salarie",-1),C("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[Mi,d.role]])])):Wt("",!0),t.isAdmin&&d.role==="SALARIE"?(De(),Ne("div",OG,[m[21]||(m[21]=C("label",{for:"entreprise",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),On(C("select",{id:"entreprise","onUpdate:modelValue":m[2]||(m[2]=x=>d.entreprise=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[m[20]||(m[20]=C("option",{value:null},"-- Sélectionner une entreprise --",-1)),(De(!0),Ne(_n,null,Wn(t.entreprises,x=>(De(),Ne("option",{key:x.id,value:x.id},Tt(x.first_name)+" "+Tt(x.last_name)+" ("+Tt(x.company_name||"Entreprise")+") ",9,NG))),128))],512),[[Mi,d.entreprise]])])):Wt("",!0),t.isEntreprise&&!d.id?(De(),Ne("div",BG,[m[23]||(m[23]=C("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),On(C("select",{id:"role","onUpdate:modelValue":m[3]||(m[3]=x=>d.role=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},m[22]||(m[22]=[C("option",{value:"SALARIE"},"Salarie",-1),C("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[Mi,d.role]])])):Wt("",!0),(t.isAdmin||t.isEntreprise)&&d.role==="VISITEUR"&&!t.currentSalarie?(De(),Ne("div",RG,[m[25]||(m[25]=C("label",{for:"salarie",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),On(C("select",{id:"salarie","onUpdate:modelValue":m[4]||(m[4]=x=>d.salarie=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},[m[24]||(m[24]=C("option",{value:null},"-- Sélectionner un salarie --",-1)),(De(!0),Ne(_n,null,Wn(t.salaries,x=>(De(),Ne("option",{key:x.id,value:x.id},Tt(x.first_name)+" "+Tt(x.last_name)+" ("+Tt(x.company_name||"Salarie")+") ",9,FG))),128))],512),[[Mi,d.salarie]])])):Wt("",!0),t.currentSalarie&&!t.isAdmin&&!t.isEntreprise?(De(),Ne("div",jG,m[26]||(m[26]=[wl('<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-blue-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><p class="text-sm text-blue-700"> Vous êtes en train de créer un visiteur qui sera automatiquement associé à votre compte. </p></div></div>',1)]))):Wt("",!0),C("div",zG,[C("div",null,[m[27]||(m[27]=C("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),On(C("input",{type:"text",id:"first_name","onUpdate:modelValue":m[5]||(m[5]=x=>d.first_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ui,d.first_name]])]),C("div",null,[m[28]||(m[28]=C("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),On(C("input",{type:"text",id:"last_name","onUpdate:modelValue":m[6]||(m[6]=x=>d.last_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ui,d.last_name]])])]),C("div",null,[m[29]||(m[29]=C("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),On(C("input",{type:"email",id:"email","onUpdate:modelValue":m[7]||(m[7]=x=>d.email=x),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ui,d.email]]),s.value?(De(),Ne("div",$G,Tt(s.value),1)):Wt("",!0)]),C("div",null,[m[30]||(m[30]=C("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),On(C("input",{type:"text",id:"username","onUpdate:modelValue":m[8]||(m[8]=x=>d.username=x),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ui,d.username]]),o.value?(De(),Ne("div",UG,Tt(o.value),1)):Wt("",!0)]),C("div",null,[m[31]||(m[31]=C("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),On(C("input",{type:"text",id:"company_name","onUpdate:modelValue":m[9]||(m[9]=x=>d.company_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ui,d.company_name]])]),d.role==="ENTREPRISE"||d.role==="SALARIE"?(De(),Ne("div",VG,[m[33]||(m[33]=C("label",{for:"storage_quota",class:"block text-sm font-medium text-gray-700"},"Quota de stockage (MB)",-1)),C("div",HG,[On(C("input",{type:"number",id:"storage_quota","onUpdate:modelValue":m[10]||(m[10]=x=>d.storage_quota=x),min:"1",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ui,d.storage_quota]]),m[32]||(m[32]=C("span",{class:"ml-2 text-sm text-gray-500"},"MB",-1))]),m[34]||(m[34]=C("p",{class:"mt-1 text-sm text-gray-500"},"Espace de stockage maximum pour les photos des notes",-1))])):Wt("",!0),d.role==="ENTREPRISE"?(De(),Ne("div",GG,[m[39]||(m[39]=C("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Configuration API",-1)),C("div",WG,[m[35]||(m[35]=C("label",{for:"ecowitt_api_key",class:"block text-sm font-medium text-gray-700"},"Clé API Ecowitt",-1)),On(C("input",{type:"text",id:"ecowitt_api_key","onUpdate:modelValue":m[11]||(m[11]=x=>d.ecowitt_api_key=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la clé API Ecowitt"},null,512),[[ui,d.ecowitt_api_key]]),m[36]||(m[36]=C("p",{class:"mt-1 text-sm text-gray-500"},"Clé API pour accéder aux services météo Ecowitt",-1))]),C("div",qG,[m[37]||(m[37]=C("label",{for:"ecowitt_application_key",class:"block text-sm font-medium text-gray-700"},"Clé d'application Ecowitt",-1)),On(C("input",{type:"text",id:"ecowitt_application_key","onUpdate:modelValue":m[12]||(m[12]=x=>d.ecowitt_application_key=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la clé d'application Ecowitt"},null,512),[[ui,d.ecowitt_application_key]]),m[38]||(m[38]=C("p",{class:"mt-1 text-sm text-gray-500"},"Clé d'application pour accéder aux services météo Ecowitt",-1))])])):Wt("",!0),d.id?Wt("",!0):(De(),Ne("div",YG,[m[40]||(m[40]=C("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),On(C("input",{type:"password",id:"password","onUpdate:modelValue":m[13]||(m[13]=x=>d.password=x),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ui,d.password]])])),d.id?Wt("",!0):(De(),Ne("div",KG,[m[41]||(m[41]=C("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),On(C("input",{type:"password",id:"password_confirm","onUpdate:modelValue":m[14]||(m[14]=x=>c.value=x),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[ui,c.value]]),a.value?(De(),Ne("div",ZG,Tt(a.value),1)):Wt("",!0)])),C("div",XG,[C("button",{type:"button",onClick:m[15]||(m[15]=x=>v.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Annuler "),C("button",{type:"submit",disabled:i.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[i.value?(De(),Ne("span",QG,m[42]||(m[42]=[C("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):Wt("",!0),Ir(" "+Tt(d.id?"Enregistrer":"Créer"),1)],8,JG)])],32)])])])])])]))}}),tW={class:"fixed inset-0 z-[3001] overflow-y-auto"},nW={class:"flex items-center justify-center min-h-screen w-full"},rW={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},iW={class:"p-4 md:p-6"},sW={class:"flex items-start"},oW={class:"ml-4 flex-1"},aW={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},lW={class:"mt-2"},uW={class:"text-sm text-gray-500"},cW={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},UE=_s({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(t){return(e,n)=>(De(),Ne("div",tW,[C("div",nW,[n[3]||(n[3]=C("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[C("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),C("div",rW,[C("div",iW,[C("div",sW,[n[2]||(n[2]=C("div",{class:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[C("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),C("div",oW,[C("h3",aW,Tt(t.title),1),C("div",lW,[C("p",uW,Tt(t.message),1)])])]),C("div",cW,[C("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=r=>e.$emit("confirm"))}," Confirmer "),C("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=r=>e.$emit("cancel"))}," Annuler ")])])])])]))}}),hW={class:"min-h-full bg-gray-50"},dW={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},fW={class:"flex justify-between items-center mb-8"},pW={class:"text-3xl font-extrabold text-gray-900"},gW={key:0},mW={key:1},vW={key:2},yW={key:0},bW={key:1},_W={key:2},wW={class:"bg-white shadow rounded-lg mb-6 p-4"},xW={class:"space-y-4"},LW={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},SW={key:0},CW={key:0,value:"ADMIN"},EW={key:1,value:"ENTREPRISE"},MW={key:1},PW=["value"],kW={key:2},AW=["value"],TW={class:"w-full"},DW={class:"bg-white shadow rounded-lg"},IW={class:"overflow-x-auto"},OW={class:"min-w-full divide-y divide-gray-200"},NW={class:"bg-gray-50"},BW={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},RW={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},FW={class:"bg-white divide-y divide-gray-200"},jW={key:0,class:"animate-pulse"},zW={key:1},$W={class:"px-6 py-4 whitespace-nowrap"},UW={class:"flex items-center"},VW={class:"flex-shrink-0 h-10 w-10"},HW={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},GW={class:"text-primary-600 font-medium"},WW={class:"ml-4"},qW={class:"text-sm font-medium text-gray-900"},YW={class:"text-sm text-gray-500"},KW={class:"px-6 py-4 whitespace-nowrap"},ZW={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},XW={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},JW={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},QW={class:"px-6 py-4 whitespace-nowrap"},eq={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},tq=["onClick"],nq=["onClick"],rq={key:0,class:"fixed inset-0 z-[3001] overflow-y-auto"},iq=_s({__name:"UserListView",setup(t){const e=co(),n=Zl(),r=_t([]),i=_t([]),s=_t([]),o=_t(!1),a=_t(!1),l=_t(null),c=_t(null),d=_t(!0),p=_t([]),v=wu({role:"",search:"",salarie:"",entreprise:""}),m=qn(()=>e.isAdmin),x=qn(()=>e.isEntreprise),E=qn(()=>e.isSalarie),T=qn(()=>m.value?r.value.filter(K=>K.role==="SALARIE"):x.value?r.value.filter(K=>{var F,N;return K.role==="SALARIE"&&((F=K.entreprise)==null?void 0:F.id)===((N=e.user)==null?void 0:N.id)}):[]),D=qn(()=>{let K=r.value;if(x.value&&(K=K.filter(F=>{var N,J,Y,ye,Ce;return F.role==="SALARIE"?((N=F.entreprise)==null?void 0:N.id)===((J=e.user)==null?void 0:J.id):F.role==="VISITEUR"?((ye=(Y=F.salarie)==null?void 0:Y.entreprise)==null?void 0:ye.id)===((Ce=e.user)==null?void 0:Ce.id):!1})),E.value&&(K=K.filter(F=>{var N,J;return F.role==="VISITEUR"&&(F.salarie_id===((N=e.user)==null?void 0:N.id)||F.salarie&&F.salarie.id===((J=e.user)==null?void 0:J.id))})),(m.value||x.value)&&(v.role&&(K=K.filter(F=>F.role===v.role)),v.salarie&&(K=K.filter(F=>{var J;const N=((J=F.salarie)==null?void 0:J.id)||F.salarie_id;return(N==null?void 0:N.toString())===v.salarie.toString()})),v.entreprise&&m.value&&(K=K.filter(F=>{var N,J,Y,ye,Ce;return F.role==="SALARIE"?((J=(N=F.entreprise)==null?void 0:N.id)==null?void 0:J.toString())===v.entreprise.toString():F.role==="VISITEUR"?((Ce=(ye=(Y=F.salarie)==null?void 0:Y.entreprise)==null?void 0:ye.id)==null?void 0:Ce.toString())===v.entreprise.toString():!1}))),v.search){const F=v.search.toLowerCase();K=K.filter(N=>{var J,Y,ye,Ce;return((J=N.username)==null?void 0:J.toLowerCase().includes(F))||((Y=N.email)==null?void 0:Y.toLowerCase().includes(F))||((ye=N.first_name)==null?void 0:ye.toLowerCase().includes(F))||((Ce=N.last_name)==null?void 0:Ce.toLowerCase().includes(F))||N.company_name&&N.company_name.toLowerCase().includes(F)})}return K});Ds(async()=>{await k(),await B()});async function k(){var K,F,N;d.value=!0;try{if(m.value)r.value=await e.fetchUsers();else if(x.value){const[J,Y]=await Promise.all([q0({role:"SALARIE",entrepriseId:(K=e.user)==null?void 0:K.id}),q0({role:"VISITEUR",entrepriseId:(F=e.user)==null?void 0:F.id})]);r.value=[...J,...Y]}else E.value&&(r.value=await q0({role:"VISITEUR",salarieId:(N=e.user)==null?void 0:N.id,includeDetails:!0}),console.log("Visiteurs récupérés:",r.value))}catch(J){console.error("Erreur lors de la récupération des utilisateurs:",J),n.error("Erreur lors de la récupération des utilisateurs")}finally{d.value=!1}}async function B(){try{m.value?await Promise.all([W(),pe()]):x.value&&await Q()}catch(K){console.error("Erreur lors de la récupération des dépendances:",K)}}async function W(){var K;try{m.value?i.value=await e.fetchUsersByRole({role:"SALARIE"}):x.value?i.value=await e.fetchEntrepriseSalaries((K=e.user)==null?void 0:K.id):E.value&&e.user&&(i.value=[{id:e.user.id,first_name:e.user.first_name,last_name:e.user.last_name,username:e.user.username,role:"SALARIE",company_name:e.user.company_name}])}catch(F){console.error("Erreur lors de la récupération des salaries:",F)}}async function Q(){var K,F;if(!(!x.value||!((K=e.user)!=null&&K.id)))try{i.value=await e.fetchEntrepriseSalaries((F=e.user)==null?void 0:F.id)}catch(N){console.error("Erreur lors de la récupération des salaries de l'entreprise:",N)}}async function pe(){try{s.value=await e.fetchEnterprises()}catch(K){console.error("Erreur lors de la récupération des entreprises:",K)}}function fe(){l.value=null,o.value=!0}function O(K){l.value={...K},o.value=!0}function U(){o.value=!1,l.value=null,p.value=[]}async function q(K){var N,J,Y,ye,Ce,He;p.value=[];const F=!!K.id;try{const j={...K};m.value?(j.entreprise&&typeof j.entreprise=="object"?j.entreprise_id=j.entreprise.id:typeof j.entreprise=="number"&&(j.entreprise_id=j.entreprise),j.salarie&&typeof j.salarie=="object"?j.salarie_id=j.salarie.id:typeof j.salarie=="number"&&(j.salarie_id=j.salarie)):x.value?(j.entreprise_id=(N=e.user)==null?void 0:N.id,j.role==="VISITEUR"&&(j.salarie&&typeof j.salarie=="object"?j.salarie_id=j.salarie.id:typeof j.salarie=="number"&&(j.salarie_id=j.salarie))):E.value&&(j.role="VISITEUR",j.salarie_id=(J=e.user)==null?void 0:J.id),j.role==="SALARIE"?((Y=j.entreprise)!=null&&Y.id?(j.entreprise_id=j.entreprise.id,delete j.entreprise):typeof j.entreprise=="number"&&(j.entreprise_id=j.entreprise,delete j.entreprise),delete j.salarie):j.role==="VISITEUR"&&((ye=j.salarie)!=null&&ye.id?(j.salarie_id=j.salarie.id,delete j.salarie):typeof j.salarie=="number"&&(j.salarie_id=j.salarie,delete j.salarie),delete j.entreprise,delete j.entreprise_id),F?(await e.updateUser(K.id,j),n.success("Utilisateur modifié avec succès")):(await e.createUser(j),n.success("Utilisateur créé avec succès")),await Promise.all([k(),B()]),U()}catch(j){console.error("Error saving user:",((Ce=j.response)==null?void 0:Ce.data)||j),p.value=_7(j),n.error("Erreur lors de la sauvegarde de l'utilisateur");const Z=((He=j.response)==null?void 0:He.data)||{};let ae="";throw typeof Z=="object"&&(ae=Object.entries(Z).map(([de,ge])=>Array.isArray(ge)?`${de}: ${ge[0]}`:`${de}: ${ge}`).filter(de=>de).join(`
`)),ae||(ae="Une erreur est survenue lors de la sauvegarde"),new Error(ae)}}function R(K){c.value=K,a.value=!0}async function $(){if(c.value)try{await e.deleteUser(c.value.id),n.success("Utilisateur supprimé avec succès"),await Promise.all([k(),B()]),a.value=!1,c.value=null}catch(K){throw console.error("Erreur lors de la suppression de l'utilisateur:",K),n.error("Erreur lors de la suppression de l'utilisateur"),K}}function X(K){var F,N,J,Y,ye,Ce,He,j;return m.value?!0:x.value?K.role==="SALARIE"?((F=K.entreprise)==null?void 0:F.id)===((N=e.user)==null?void 0:N.id):K.role==="VISITEUR"?((Y=(J=K.salarie)==null?void 0:J.entreprise)==null?void 0:Y.id)===((ye=e.user)==null?void 0:ye.id):!1:E.value?K.role==="VISITEUR"&&(K.salarie_id===((Ce=e.user)==null?void 0:Ce.id)||((He=K.salarie)==null?void 0:He.id)===((j=e.user)==null?void 0:j.id)):!1}return(K,F)=>{var N,J,Y,ye;return De(),Ne("div",hW,[C("div",dW,[C("div",fW,[C("h1",pW,[m.value?(De(),Ne("span",gW,"Gestion des utilisateurs")):x.value?(De(),Ne("span",mW,"Gestion des salaries et visiteurs")):E.value?(De(),Ne("span",vW,"Gestion des visiteurs")):Wt("",!0)]),C("button",{onClick:fe,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[F[5]||(F[5]=C("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),m.value?(De(),Ne("span",yW,"Nouvel utilisateur")):x.value?(De(),Ne("span",bW,"Nouveau salarie/visiteur")):E.value?(De(),Ne("span",_W,"Nouvel visiteur")):Wt("",!0)])]),C("div",wW,[C("div",xW,[C("div",LW,[m.value||x.value?(De(),Ne("div",SW,[F[9]||(F[9]=C("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),On(C("select",{id:"role-filter","onUpdate:modelValue":F[0]||(F[0]=Ce=>v.role=Ce),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[F[6]||(F[6]=C("option",{value:""},"Tous les rôles",-1)),m.value?(De(),Ne("option",CW,"Administrateur")):Wt("",!0),m.value?(De(),Ne("option",EW,"Entreprise")):Wt("",!0),F[7]||(F[7]=C("option",{value:"SALARIE"},"Salarie",-1)),F[8]||(F[8]=C("option",{value:"VISITEUR"},"Visiteur",-1))],512),[[Mi,v.role]])])):Wt("",!0),m.value?(De(),Ne("div",MW,[F[11]||(F[11]=C("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),On(C("select",{id:"entreprise-filter","onUpdate:modelValue":F[1]||(F[1]=Ce=>v.entreprise=Ce),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[F[10]||(F[10]=C("option",{value:""},"Toutes les entreprises",-1)),(De(!0),Ne(_n,null,Wn(s.value,Ce=>(De(),Ne("option",{key:Ce.id,value:Ce.id},Tt(bn(bl)(Ce)),9,PW))),128))],512),[[Mi,v.entreprise]])])):Wt("",!0),m.value||x.value?(De(),Ne("div",kW,[F[13]||(F[13]=C("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),On(C("select",{id:"salarie-filter","onUpdate:modelValue":F[2]||(F[2]=Ce=>v.salarie=Ce),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[F[12]||(F[12]=C("option",{value:""},"Tous les salaries",-1)),(De(!0),Ne(_n,null,Wn(T.value,Ce=>(De(),Ne("option",{key:Ce.id,value:Ce.id},Tt(bn(bl)(Ce)),9,AW))),128))],512),[[Mi,v.salarie]])])):Wt("",!0)]),C("div",TW,[F[14]||(F[14]=C("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),On(C("input",{type:"text",id:"search","onUpdate:modelValue":F[3]||(F[3]=Ce=>v.search=Ce),placeholder:"Rechercher par nom, email, entreprise...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[ui,v.search]])])])]),C("div",DW,[C("div",IW,[C("table",OW,[C("thead",NW,[C("tr",null,[F[15]||(F[15]=C("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur ",-1)),F[16]||(F[16]=C("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rôle ",-1)),F[17]||(F[17]=C("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),m.value||x.value?(De(),Ne("th",BW," Entreprise ")):Wt("",!0),m.value||x.value?(De(),Ne("th",RW," Salarie ")):Wt("",!0),F[18]||(F[18]=C("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),F[19]||(F[19]=C("th",{scope:"col",class:"relative px-6 py-3"},[C("span",{class:"sr-only"},"Actions")],-1))])]),C("tbody",FW,[d.value?(De(),Ne("tr",jW,F[20]||(F[20]=[C("td",{colspan:"7",class:"py-4 px-6"},[C("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):D.value.length===0?(De(),Ne("tr",zW,F[21]||(F[21]=[C("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun utilisateur trouvé ",-1)]))):Wt("",!0),(De(!0),Ne(_n,null,Wn(D.value,Ce=>{var He;return De(),Ne("tr",{key:Ce.id},[C("td",$W,[C("div",UW,[C("div",VW,[C("div",HW,[C("span",GW,Tt(bn(x7)(Ce.first_name,Ce.last_name)),1)])]),C("div",WW,[C("div",qW,Tt(bn(bl)(Ce)),1),C("div",YW,Tt(Ce.username),1)])])]),C("td",KW,[C("span",{class:xi(bn(C7)())},Tt(bn(S7)(Ce.role)),3)]),C("td",ZW,Tt(Ce.email),1),m.value||x.value?(De(),Ne("td",XW,[Ce.role==="ENTREPRISE"?(De(),Ne(_n,{key:0},[Ir(" - ")],64)):Ce.role==="SALARIE"?(De(),Ne(_n,{key:1},[Ir(Tt(Ce.entreprise?bn(bl)(Ce.entreprise):"Non assigné"),1)],64)):Ce.role==="VISITEUR"?(De(),Ne(_n,{key:2},[Ir(Tt((He=Ce.salarie)!=null&&He.entreprise?bn(bl)(Ce.salarie.entreprise):"Non assigné"),1)],64)):(De(),Ne(_n,{key:3},[Ir(" - ")],64))])):Wt("",!0),m.value||x.value?(De(),Ne("td",JW,[Ce.role==="ENTREPRISE"||Ce.role==="ADMIN"?(De(),Ne(_n,{key:0},[Ir(" - ")],64)):Ce.role==="SALARIE"?(De(),Ne(_n,{key:1},[Ir(" - ")],64)):(De(),Ne(_n,{key:2},[Ir(Tt(Ce.salarie?bn(bl)(Ce.salarie):"Non assigné"),1)],64))])):Wt("",!0),C("td",QW,[C("span",{class:xi(bn(E7)(Ce.is_active))},Tt(Ce.is_active?"Actif":"Inactif"),3)]),C("td",eq,[C("button",{onClick:j=>O(Ce),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,tq),X(Ce)?(De(),Ne("button",{key:0,onClick:j=>R(Ce),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,nq)):Wt("",!0)])])}),128))])])])])]),o.value?(De(),Ne("div",rq,[Xr(eW,{user:l.value,salaries:i.value,entreprises:s.value,"is-admin":m.value,"is-entreprise":x.value,"current-salarie":E.value?(J=(N=bn(e).user)==null?void 0:N.id)==null?void 0:J.toString():void 0,"current-entreprise":x.value?(ye=(Y=bn(e).user)==null?void 0:Y.id)==null?void 0:ye.toString():void 0,"api-errors":p.value,onClose:U,onSave:q},null,8,["user","salaries","entreprises","is-admin","is-entreprise","current-salarie","current-entreprise","api-errors"])])):Wt("",!0),a.value?(De(),xo(UE,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:$,onCancel:F[4]||(F[4]=Ce=>a.value=!1)})):Wt("",!0)])}}}),sq={class:"h-full bg-gray-50"},oq={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},aq={class:"sm:flex sm:items-center"},lq={class:"sm:flex-auto"},uq={class:"text-2xl font-semibold text-gray-900"},cq={class:"mt-2 text-sm text-gray-700"},hq={key:0,class:"mt-8"},dq={class:"mb-6"},fq=["value"],pq={class:"mb-6"},gq={value:null},mq=["value"],vq={key:0,class:"mb-6"},yq={value:null},bq=["value"],_q={key:1,class:"mt-8"},wq={class:"mb-6"},xq=["value"],Lq={class:"mt-8"},Sq={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},Cq={class:"overflow-x-auto"},Eq={class:"min-w-full divide-y divide-gray-300"},Mq={class:"bg-gray-50"},Pq={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},kq={class:"ml-2 flex-none rounded"},Aq={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},Tq={class:"ml-2 flex-none rounded"},Dq={class:"divide-y divide-gray-200 bg-white"},Iq={key:0},Oq={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},Nq={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Bq={class:"px-3 py-4 text-sm text-gray-900"},Rq={key:0,class:"flex items-center"},Fq={class:"h-8 w-8 flex-shrink-0"},jq={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},zq={class:"text-primary-700 font-medium text-sm"},$q={class:"ml-3"},Uq={class:"font-medium"},Vq={key:1,class:"text-gray-500"},Hq={class:"px-3 py-4 text-sm text-gray-900"},Gq={key:0,class:"flex items-center"},Wq={class:"h-8 w-8 flex-shrink-0"},qq={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},Yq={class:"text-primary-700 font-medium text-sm"},Kq={class:"ml-3"},Zq={class:"font-medium"},Xq={key:1,class:"text-gray-500"},Jq={class:"px-3 py-4 text-sm text-gray-900"},Qq={key:0,class:"flex items-center"},eY={class:"h-8 w-8 flex-shrink-0"},tY={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},nY={class:"text-primary-700 font-medium text-sm"},rY={class:"ml-3"},iY={class:"font-medium"},sY={key:1,class:"text-gray-500"},oY={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},aY={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},lY=["onClick"],uY=["onClick"],cY=["onClick"],hY={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},dY={class:"bg-white rounded-lg p-6 max-w-md w-full"},fY={class:"flex justify-between items-center mb-4"},pY=["disabled"],gY=["disabled"],mY={key:0,class:"space-y-4"},vY={key:0},yY=["disabled"],bY=["value"],_Y=["disabled"],wY=["value"],xY={key:0,class:"mt-1 text-sm text-gray-500"},LY=["disabled"],SY=["value"],CY={key:0,class:"mt-1 text-sm text-gray-500"},EY={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},MY={class:"flex"},PY={class:"ml-3"},kY={class:"text-sm font-medium text-red-800"},AY={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},TY=["disabled"],DY={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},IY=_s({__name:"PlansView",setup(t){const e=Cm(),n=Ay(),r=co(),i=_t([]),s=_t([]),o=_t([]),a=_t([]),l=_t(!1),c=_t(!1),d=_t(!1),p=_t(null),v=_t({nom:"",description:"",client:null}),m=_t({id:0,nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),x=_t(!1),E=_t(null),T=_t(null),D=_t(null),k=_t("date_modification"),B=_t("desc"),W=_t(null),Q=qn(()=>T.value?a.value.filter(oe=>typeof oe.salarie=="object"&&oe.salarie?oe.salarie.id===T.value:oe.salarie===T.value||oe.salarie_id===T.value):a.value),pe=qn(()=>{let oe=i.value;console.log(`
[PlansView] Filtering plans:`,oe.map(Te=>({id:Te.id,entreprise:Te.entreprise,salarie:Te.salarie,visiteur:Te.visiteur}))),r.isAdmin?(W.value&&(oe=oe.filter(Te=>{var Le;return typeof Te.entreprise=="object"?((Le=Te.entreprise)==null?void 0:Le.id)===W.value:Te.entreprise===W.value})),T.value&&(oe=oe.filter(Te=>{var Le;return typeof Te.salarie=="object"?((Le=Te.salarie)==null?void 0:Le.id)===T.value:Te.salarie===T.value}),D.value&&(oe=oe.filter(Te=>{var Le;return typeof Te.visiteur=="object"?((Le=Te.visiteur)==null?void 0:Le.id)===D.value:Te.visiteur===D.value})))):r.isSalarie&&(oe=oe.filter(Te=>{var Le,qe,se;return typeof Te.salarie=="object"?((Le=Te.salarie)==null?void 0:Le.id)===((qe=r.user)==null?void 0:qe.id):Te.salarie===((se=r.user)==null?void 0:se.id)}),D.value&&(oe=oe.filter(Te=>{var Le;return typeof Te.visiteur=="object"?((Le=Te.visiteur)==null?void 0:Le.id)===D.value:Te.visiteur===D.value})));const re=[...oe].sort((Te,Le)=>{if(k.value==="nom")return B.value==="asc"?Te.nom.localeCompare(Le.nom):Le.nom.localeCompare(Te.nom);{const qe=new Date(Te[k.value]).getTime(),se=new Date(Le[k.value]).getTime();return B.value==="asc"?qe-se:se-qe}});return console.log("[PlansView] Final filtered and sorted plans:",re.map(Te=>({id:Te.id,entreprise:Te.entreprise,salarie:Te.salarie,visiteur:Te.visiteur}))),re}),fe=qn(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complète des plans",plans:i.value}:r.isSalarie?{title:"Plans des visiteurs",description:"Plans où vous êtes assigné comme salarie",plans:i.value.filter(oe=>{var re,Te,Le;return typeof oe.salarie=="object"?((re=oe.salarie)==null?void 0:re.id)===((Te=r.user)==null?void 0:Te.id):oe.salarie===((Le=r.user)==null?void 0:Le.id)})}:{title:"Mes plans",description:"Plans qui vous sont assignés ou que vous avez créés",plans:i.value.filter(oe=>{var Le,qe,se,le;const re=oe.createur.id===((Le=r.user)==null?void 0:Le.id);let Te=!1;return typeof oe.visiteur=="object"?Te=((qe=oe.visiteur)==null?void 0:qe.id)===((se=r.user)==null?void 0:se.id):Te=oe.visiteur===((le=r.user)==null?void 0:le.id),Te||re})}),O=qn(()=>W.value?s.value.filter(oe=>{var re;return typeof oe.entreprise=="object"?((re=oe.entreprise)==null?void 0:re.id)===W.value:oe.entreprise_id===W.value}):s.value),U=qn(()=>m.value.entreprise?s.value.filter(oe=>{var re;return typeof oe.entreprise=="object"?((re=oe.entreprise)==null?void 0:re.id)===m.value.entreprise:oe.entreprise_id===m.value.entreprise}):[]),q=qn(()=>!m.value.entreprise||!m.value.salarie?[]:a.value.filter(oe=>typeof oe.salarie=="object"&&oe.salarie?oe.salarie.id===m.value.salarie:oe.salarie===m.value.salarie||oe.salarie_id===m.value.salarie));Ds(async()=>{var oe;await R(),r.isAdmin?await $():r.isSalarie&&await K(((oe=r.user)==null?void 0:oe.id)||0)});async function R(){try{const oe=await n.fetchPlansWithDetails();i.value=oe.data}catch(oe){console.error("Erreur lors du chargement des plans:",oe)}}async function $(){try{console.log("Chargement des entreprises..."),o.value=await r.fetchEnterprises(),console.log("Entreprises chargées:",o.value)}catch(oe){console.error("Erreur lors du chargement des entreprises:",oe)}}async function X(oe){try{if(console.log("Chargement des salaries pour l'entreprise:",oe),oe===void 0){const re=await r.fetchUsersByRole({role:"SALARIE"});s.value=re}else s.value=await r.fetchEntrepriseSalaries(oe);console.log("Salaries chargés:",s.value)}catch(re){console.error("Erreur lors du chargement des salaries:",re)}}async function K(oe){try{console.log("Chargement des visiteurs pour le salarie:",oe);const re=await q0({role:"VISITEUR",salarieId:oe});a.value=re.map(Te=>({...Te,salarie_id:oe})),console.log("Visiteurs chargés:",a.value)}catch(re){console.error("Erreur lors du chargement des visiteurs:",re)}}function F(){l.value=!0,v.value={nom:"",description:"",client:null}}async function N(oe){console.log(`
[PlansView][editPlan] ====== DÉBUT ÉDITION PLAN ======`),console.log("[PlansView][editPlan] Plan reçu:",{id:oe.id,nom:oe.nom,entreprise:oe.entreprise,salarie:oe.salarie,visiteur:oe.visiteur});try{console.log("[PlansView][editPlan] Définition du plan courant dans le store..."),n.setCurrentPlan(oe),console.log("[PlansView][editPlan] Sauvegarde de l'ID dans localStorage:",oe.id),localStorage.setItem("lastPlanId",oe.id.toString()),console.log("[PlansView][editPlan] Redirection vers la vue carte..."),await e.push("/"),console.log(`[PlansView][editPlan] ====== FIN ÉDITION PLAN ======
`)}catch(re){console.error("[PlansView][editPlan] ERREUR:",re),re instanceof Error&&console.error("[PlansView][editPlan] Stack trace:",re.stack),alert("Une erreur est survenue lors du chargement du plan")}}async function J(oe){oe!=null&&oe.id&&(p.value=oe,d.value=!0)}async function Y(){var oe,re;if((oe=p.value)!=null&&oe.id)try{await n.deletePlan(p.value.id),await R(),((re=n.currentPlan)==null?void 0:re.id)===p.value.id&&n.clearCurrentPlan()}catch(Te){console.error("Erreur lors de la suppression du plan:",Te),alert("Une erreur est survenue lors de la suppression du plan")}finally{d.value=!1,p.value=null}}function ye(){d.value=!1,p.value=null}function Ce(oe){return new Date(oe).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function He(oe){if(!oe)return"";const re=oe.first_name||"",Te=oe.last_name||"";return(re.charAt(0)+Te.charAt(0)).toUpperCase()}async function j(oe){x.value=!0,E.value=null;try{r.isAdmin&&!o.value.length&&await $();const re=typeof oe.entreprise=="object"&&oe.entreprise?oe.entreprise.id:oe.entreprise,Te=typeof oe.salarie=="object"&&oe.salarie?oe.salarie.id:oe.salarie,Le=typeof oe.visiteur=="object"&&oe.visiteur?oe.visiteur.id:oe.visiteur;m.value={id:oe.id,nom:oe.nom,description:oe.description,entreprise:re||null,salarie:Te||null,visiteur:Le||null},re&&await X(re),Te&&await K(Te),c.value=!0}catch(re){console.error("Erreur lors de l'ouverture du modal:",re),E.value="Erreur lors du chargement des données"}finally{x.value=!1}}async function Z(){var oe,re,Te,Le,qe;E.value=null,x.value=!0;try{if(!m.value.nom.trim())throw new Error("Le nom du plan est requis");if(m.value.visiteur&&!m.value.salarie)throw new Error("Un salarie doit être sélectionné pour assigner un visiteur");if(m.value.salarie&&!m.value.entreprise)throw new Error("Une entreprise doit être sélectionnée pour assigner un salarie");console.log("Données envoyées pour la mise à jour:",{id:m.value.id,nom:m.value.nom.trim(),description:m.value.description.trim(),entreprise_id:m.value.entreprise,salarie_id:m.value.salarie,visiteur_id:m.value.visiteur});const se=await n.updatePlanDetails(m.value.id,{nom:m.value.nom.trim(),description:m.value.description.trim(),entreprise_id:m.value.entreprise,salarie_id:m.value.salarie,visiteur_id:m.value.visiteur});console.log("Réponse de la mise à jour:",se),se&&(c.value=!1,await R())}catch(se){if(console.error("Erreur lors de la mise à jour du plan:",se),(re=(oe=se.response)==null?void 0:oe.data)!=null&&re.detail)E.value=se.response.data.detail;else if((Le=(Te=se.response)==null?void 0:Te.data)!=null&&Le.non_field_errors)E.value=se.response.data.non_field_errors[0];else if((qe=se.response)!=null&&qe.data){const le=Object.entries(se.response.data).map(([he,ee])=>`${he}: ${Array.isArray(ee)?ee[0]:ee}`);E.value=le.join(`
`)}else E.value=se.message||"Une erreur est survenue lors de la mise à jour du plan"}finally{x.value=!1}}ni(()=>W.value,async oe=>{T.value=null,D.value=null,oe?await X(oe):await X()}),ni(()=>T.value,async oe=>{D.value=null,oe&&await K(oe)}),ni(()=>m.value.entreprise,async oe=>{oe===null?(m.value.salarie=null,m.value.visiteur=null):await X(oe)}),ni(()=>m.value.salarie,async oe=>{m.value.visiteur=null,oe&&await K(oe)});function ae(oe){var qe,se,le;const re=r.user;if(!re)return!1;if(re.user_type==="admin")return!0;if(re.user_type==="entreprise")return typeof oe.entreprise=="object"?((qe=oe.entreprise)==null?void 0:qe.id)===re.id:oe.entreprise===re.id;if(re.user_type==="salarie")return typeof oe.salarie=="object"?((se=oe.salarie)==null?void 0:se.id)===re.id:oe.salarie===re.id;const Te=oe.createur.id===re.id;let Le=!1;return typeof oe.visiteur=="object"?Le=((le=oe.visiteur)==null?void 0:le.id)===re.id:Le=oe.visiteur===re.id,Le||Te}async function de(oe){await R(),localStorage.setItem("lastPlanId",oe.toString()),console.log(`Plan ${oe} créé et défini comme plan actif`),e.push("/")}function ge(oe){k.value===oe?B.value=B.value==="asc"?"desc":"asc":(k.value=oe,B.value="desc")}function me(oe){return oe?bl(oe):""}return(oe,re)=>{var Te;return De(),Ne("div",sq,[C("div",oq,[C("div",aq,[C("div",lq,[C("h1",uq,Tt(fe.value.title),1),C("p",cq,Tt(fe.value.description),1)]),C("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[C("button",{onClick:F,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),bn(r).isAdmin?(De(),Ne("div",hq,[C("div",dq,[re[15]||(re[15]=C("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par entreprise",-1)),On(C("select",{id:"entreprise-filter","onUpdate:modelValue":re[0]||(re[0]=Le=>W.value=Le),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[re[14]||(re[14]=C("option",{value:null},"Toutes les entreprises",-1)),(De(!0),Ne(_n,null,Wn(o.value,Le=>(De(),Ne("option",{key:Le.id,value:Le.id},Tt(me(Le)),9,fq))),128))],512),[[Mi,W.value]])]),C("div",pq,[re[16]||(re[16]=C("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par salarie",-1)),On(C("select",{id:"salarie-filter","onUpdate:modelValue":re[1]||(re[1]=Le=>T.value=Le),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[C("option",gq,Tt(O.value.length?"Tous les salaries":"Aucun salarie disponible"),1),(De(!0),Ne(_n,null,Wn(O.value,Le=>(De(),Ne("option",{key:Le.id,value:Le.id},Tt(me(Le)),9,mq))),128))],512),[[Mi,T.value]])]),T.value?(De(),Ne("div",vq,[re[17]||(re[17]=C("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),On(C("select",{id:"visiteur-filter","onUpdate:modelValue":re[2]||(re[2]=Le=>D.value=Le),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[C("option",yq,Tt(Q.value.length?"Tous les visiteurs":"Aucun visiteur disponible"),1),(De(!0),Ne(_n,null,Wn(Q.value,Le=>(De(),Ne("option",{key:Le.id,value:Le.id},Tt(me(Le)),9,bq))),128))],512),[[Mi,D.value]])])):Wt("",!0)])):bn(r).isSalarie?(De(),Ne("div",_q,[C("div",wq,[re[19]||(re[19]=C("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),On(C("select",{id:"visiteur-filter","onUpdate:modelValue":re[3]||(re[3]=Le=>D.value=Le),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[re[18]||(re[18]=C("option",{value:null},"Tous les visiteurs",-1)),(De(!0),Ne(_n,null,Wn(a.value,Le=>(De(),Ne("option",{key:Le.id,value:Le.id},Tt(me(Le)),9,xq))),128))],512),[[Mi,D.value]])])])):Wt("",!0),C("div",Lq,[C("div",Sq,[C("div",Cq,[C("table",Eq,[C("thead",Mq,[C("tr",null,[C("th",Pq,[C("button",{onClick:re[4]||(re[4]=Le=>ge("nom")),class:"group inline-flex items-center"},[re[21]||(re[21]=Ir(" Nom ")),C("span",kq,[(De(),Ne("svg",{class:xi(["h-5 w-5",{"text-gray-900":k.value==="nom","text-gray-400":k.value!=="nom","rotate-180":k.value==="nom"&&B.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},re[20]||(re[20]=[C("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),re[24]||(re[24]=C("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),re[25]||(re[25]=C("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise ",-1)),re[26]||(re[26]=C("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Salarie ",-1)),re[27]||(re[27]=C("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Visiteur ",-1)),C("th",Aq,[C("button",{onClick:re[5]||(re[5]=Le=>ge("date_modification")),class:"group inline-flex items-center"},[re[23]||(re[23]=Ir(" Dernière modification ")),C("span",Tq,[(De(),Ne("svg",{class:xi(["h-5 w-5",{"text-gray-900":k.value==="date_modification","text-gray-400":k.value!=="date_modification","rotate-180":k.value==="date_modification"&&B.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},re[22]||(re[22]=[C("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),re[28]||(re[28]=C("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[C("span",{class:"sr-only"},"Actions")],-1))])]),C("tbody",Dq,[pe.value.length===0?(De(),Ne("tr",Iq,re[29]||(re[29]=[C("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):Wt("",!0),(De(!0),Ne(_n,null,Wn(pe.value,Le=>(De(),Ne("tr",{key:Le.id,class:"hover:bg-gray-50"},[C("td",Oq,Tt(Le.nom),1),C("td",Nq,Tt(Le.description||"-"),1),C("td",Bq,[Le.entreprise&&typeof Le.entreprise=="object"?(De(),Ne("div",Rq,[C("div",Fq,[C("div",jq,[C("span",zq,Tt(He(Le.entreprise)),1)])]),C("div",$q,[C("div",Uq,Tt(bn(bl)(Le.entreprise)),1)])])):(De(),Ne("div",Vq," Non assigné "))]),C("td",Hq,[Le.salarie&&typeof Le.salarie=="object"?(De(),Ne("div",Gq,[C("div",Wq,[C("div",qq,[C("span",Yq,Tt(He(Le.salarie)),1)])]),C("div",Kq,[C("div",Zq,Tt(bn(bl)(Le.salarie)),1)])])):(De(),Ne("div",Xq," Non assigné "))]),C("td",Jq,[Le.visiteur&&typeof Le.visiteur=="object"?(De(),Ne("div",Qq,[C("div",eY,[C("div",tY,[C("span",nY,Tt(He(Le.visiteur)),1)])]),C("div",rY,[C("div",iY,Tt(bn(bl)(Le.visiteur)),1)])])):(De(),Ne("div",sY," Non assigné "))]),C("td",oY,Tt(Ce(Le.date_modification)),1),C("td",aY,[C("button",{onClick:qe=>N(Le),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,lY),C("button",{onClick:qe=>j(Le),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,uY),ae(Le)?(De(),Ne("button",{key:0,onClick:qe=>J(Le),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,cY)):Wt("",!0)])]))),128))])])])])]),Xr(_E,{modelValue:l.value,"onUpdate:modelValue":re[6]||(re[6]=Le=>l.value=Le),salaries:s.value,clients:a.value,onCreated:de},null,8,["modelValue","salaries","clients"]),c.value?(De(),Ne("div",hY,[C("div",dY,[C("div",fY,[re[31]||(re[31]=C("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),C("button",{onClick:re[7]||(re[7]=Le=>c.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},re[30]||(re[30]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("form",{onSubmit:xl(Z,["prevent"]),class:"space-y-4"},[C("div",null,[re[32]||(re[32]=C("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),On(C("input",{type:"text",id:"edit-nom","onUpdate:modelValue":re[8]||(re[8]=Le=>m.value.nom=Le),disabled:x.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",required:""},null,8,pY),[[ui,m.value.nom]])]),C("div",null,[re[33]||(re[33]=C("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),On(C("textarea",{id:"edit-description","onUpdate:modelValue":re[9]||(re[9]=Le=>m.value.description=Le),disabled:x.value,rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,gY),[[ui,m.value.description]])]),bn(r).isAdmin||((Te=bn(r).user)==null?void 0:Te.user_type)==="entreprise"?(De(),Ne("div",mY,[bn(r).isAdmin?(De(),Ne("div",vY,[re[35]||(re[35]=C("label",{for:"edit-entreprise",class:"block text-sm font-medium text-gray-700"}," Entreprise ",-1)),On(C("select",{id:"edit-entreprise","onUpdate:modelValue":re[10]||(re[10]=Le=>m.value.entreprise=Le),disabled:x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[re[34]||(re[34]=C("option",{value:null},"Sélectionner une entreprise",-1)),(De(!0),Ne(_n,null,Wn(o.value,Le=>(De(),Ne("option",{key:Le.id,value:Le.id},Tt(me(Le)),9,bY))),128))],8,yY),[[Mi,m.value.entreprise]])])):Wt("",!0),C("div",null,[re[37]||(re[37]=C("label",{for:"edit-salarie",class:"block text-sm font-medium text-gray-700"}," Salarie ",-1)),On(C("select",{id:"edit-salarie","onUpdate:modelValue":re[11]||(re[11]=Le=>m.value.salarie=Le),disabled:bn(r).isAdmin&&!m.value.entreprise||x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[re[36]||(re[36]=C("option",{value:null},"Sélectionner un salarie",-1)),(De(!0),Ne(_n,null,Wn(U.value,Le=>(De(),Ne("option",{key:Le.id,value:Le.id},Tt(me(Le)),9,wY))),128))],8,_Y),[[Mi,m.value.salarie]]),bn(r).isAdmin&&!m.value.entreprise?(De(),Ne("p",xY," Veuillez d'abord sélectionner une entreprise ")):Wt("",!0)]),C("div",null,[re[39]||(re[39]=C("label",{for:"edit-visiteur",class:"block text-sm font-medium text-gray-700"}," Visiteur ",-1)),On(C("select",{id:"edit-visiteur","onUpdate:modelValue":re[12]||(re[12]=Le=>m.value.visiteur=Le),disabled:!m.value.salarie||x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[re[38]||(re[38]=C("option",{value:null},"Sélectionner un visiteur",-1)),(De(!0),Ne(_n,null,Wn(q.value,Le=>(De(),Ne("option",{key:Le.id,value:Le.id},Tt(me(Le)),9,SY))),128))],8,LY),[[Mi,m.value.visiteur]]),m.value.salarie?Wt("",!0):(De(),Ne("p",CY," Veuillez d'abord sélectionner un salarie "))])])):Wt("",!0),E.value?(De(),Ne("div",EY,[C("div",MY,[re[40]||(re[40]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",PY,[C("p",kY,Tt(E.value),1)])])])):Wt("",!0),C("div",AY,[C("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:re[13]||(re[13]=Le=>c.value=!1)}," Annuler "),C("button",{type:"submit",disabled:x.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[x.value?(De(),Ne("svg",DY,re[41]||(re[41]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Wt("",!0),Ir(" "+Tt(x.value?"Enregistrement...":"Enregistrer"),1)],8,TY)])],32)])])):Wt("",!0),d.value?(De(),xo(UE,{key:3,title:"Supprimer le plan",message:"Êtes-vous sûr de vouloir supprimer ce plan ? Cette action est irréversible.",onConfirm:Y,onCancel:ye})):Wt("",!0)])])}}});var VE={exports:{}};const OY=eE(FO);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function E5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E5(Object(n),!0).forEach(function(r){NY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tv(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?tv=function(e){return typeof e}:tv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tv(t)}function NY(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hu(){return Hu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hu.apply(this,arguments)}function BY(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function RY(t,e){if(t==null)return{};var n=BY(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function FY(t){return jY(t)||zY(t)||$Y(t)||UY()}function jY(t){if(Array.isArray(t))return _b(t)}function zY(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $Y(t,e){if(t){if(typeof t=="string")return _b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _b(t,e)}}function _b(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function UY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var VY="1.14.0";function kh(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Oh=kh(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Em=kh(/Edge/i),M5=kh(/firefox/i),Rg=kh(/safari/i)&&!kh(/chrome/i)&&!kh(/android/i),HE=kh(/iP(ad|od|hone)/i),HY=kh(/chrome/i)&&kh(/android/i),GE={capture:!1,passive:!1};function ci(t,e,n){t.addEventListener(e,n,!Oh&&GE)}function ti(t,e,n){t.removeEventListener(e,n,!Oh&&GE)}function $v(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function GY(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function dc(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&$v(t,e):$v(t,e))||r&&t===n)return t;if(t===n)break}while(t=GY(t))}return null}var P5=/\s+/g;function Ys(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(P5," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(P5," ")}}function tr(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function sf(t,e){var n="";if(typeof t=="string")n=t;else do{var r=tr(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function WE(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function Yc(){var t=document.scrollingElement;return t||document.documentElement}function As(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,c,d,p;if(t!==window&&t.parentNode&&t!==Yc()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,d=s.height,p=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,p=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!Oh))do if(i&&i.getBoundingClientRect&&(tr(i,"transform")!=="none"||n&&tr(i,"position")!=="static")){var v=i.getBoundingClientRect();o-=v.top+parseInt(tr(i,"border-top-width")),a-=v.left+parseInt(tr(i,"border-left-width")),l=o+s.height,c=a+s.width;break}while(i=i.parentNode);if(r&&t!==window){var m=sf(i||t),x=m&&m.a,E=m&&m.d;m&&(o/=E,a/=x,p/=x,d/=E,l=o+d,c=a+p)}return{top:o,left:a,bottom:l,right:c,width:p,height:d}}}function k5(t,e,n){for(var r=od(t,!0),i=As(t)[e];r;){var s=As(r)[n],o=void 0;if(o=i>=s,!o)return r;if(r===Yc())break;r=od(r,!1)}return!1}function Lp(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Sr.ghost&&(r||o[s]!==Sr.dragged)&&dc(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function I_(t,e){for(var n=t.lastElementChild;n&&(n===Sr.ghost||tr(n,"display")==="none"||e&&!$v(n,e));)n=n.previousElementSibling;return n||null}function ao(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Sr.clone&&(!e||$v(t,e))&&n++;return n}function A5(t){var e=0,n=0,r=Yc();if(t)do{var i=sf(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function WY(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function od(t,e){if(!t||!t.getBoundingClientRect)return Yc();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=tr(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Yc();if(r||e)return n;r=!0}}while(n=n.parentNode);return Yc()}function qY(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function J1(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Fg;function qE(t,e){return function(){if(!Fg){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),Fg=setTimeout(function(){Fg=void 0},e)}}}function YY(){clearTimeout(Fg),Fg=void 0}function YE(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function O_(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function T5(t,e){tr(t,"position","absolute"),tr(t,"top",e.top),tr(t,"left",e.left),tr(t,"width",e.width),tr(t,"height",e.height)}function Q1(t){tr(t,"position",""),tr(t,"top",""),tr(t,"left",""),tr(t,"width",""),tr(t,"height","")}var Ka="Sortable"+new Date().getTime();function KY(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(tr(i,"display")==="none"||i===Sr.ghost)){t.push({target:i,rect:As(i)});var s=Xc({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=sf(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(WY(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,c=a.target,d=c.fromRect,p=As(c),v=c.prevFromRect,m=c.prevToRect,x=a.rect,E=sf(c,!0);E&&(p.top-=E.f,p.left-=E.e),c.toRect=p,c.thisAnimationDuration&&J1(v,p)&&!J1(d,p)&&(x.top-p.top)/(x.left-p.left)===(d.top-p.top)/(d.left-p.left)&&(l=XY(x,v,m,i.options)),J1(p,d)||(c.prevFromRect=d,c.prevToRect=p,l||(l=i.options.animation),i.animate(c,x,p,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){tr(r,"transition",""),tr(r,"transform","");var a=sf(this.el),l=a&&a.a,c=a&&a.d,d=(i.left-s.left)/(l||1),p=(i.top-s.top)/(c||1);r.animatingX=!!d,r.animatingY=!!p,tr(r,"transform","translate3d("+d+"px,"+p+"px,0)"),this.forRepaintDummy=ZY(r),tr(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),tr(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){tr(r,"transition",""),tr(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function ZY(t){return t.offsetWidth}function XY(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var Uf=[],e2={initializeByDefault:!0},Mm={mount:function(e){for(var n in e2)e2.hasOwnProperty(n)&&!(n in e)&&(e[n]=e2[n]);Uf.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Uf.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";Uf.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](Xc({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](Xc({sortable:n},r)))})},initializePlugins:function(e,n,r,i){Uf.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,Hu(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return Uf.forEach(function(i){typeof i.eventProperties=="function"&&Hu(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return Uf.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function pg(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,d=t.oldDraggableIndex,p=t.newDraggableIndex,v=t.originalEvent,m=t.putSortable,x=t.extraEventProperties;if(e=e||n&&n[Ka],!!e){var E,T=e.options,D="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Oh&&!Em?E=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(E=document.createEvent("Event"),E.initEvent(r,!0,!0)),E.to=o||n,E.from=a||n,E.item=i||n,E.clone=s,E.oldIndex=l,E.newIndex=c,E.oldDraggableIndex=d,E.newDraggableIndex=p,E.originalEvent=v,E.pullMode=m?m.lastPutMode:void 0;var k=Xc(Xc({},x),Mm.getEventProperties(r,e));for(var B in k)E[B]=k[B];n&&n.dispatchEvent(E),T[D]&&T[D].call(e,E)}}var JY=["evt"],Rl=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=RY(r,JY);Mm.pluginEvent.bind(Sr)(e,n,Xc({dragEl:In,parentEl:io,ghostEl:Vr,rootEl:ks,nextEl:Wd,lastDownEl:nv,cloneEl:so,cloneHidden:id,dragStarted:gg,putSortable:wa,activeSortable:Sr.active,originalEvent:i,oldIndex:rp,oldDraggableIndex:jg,newIndex:pu,newDraggableIndex:rd,hideGhostForTarget:JE,unhideGhostForTarget:QE,cloneNowHidden:function(){id=!0},cloneNowShown:function(){id=!1},dispatchSortableEvent:function(a){fl({sortable:n,name:a,originalEvent:i})}},s))};function fl(t){pg(Xc({putSortable:wa,cloneEl:so,targetEl:In,rootEl:ks,oldIndex:rp,oldDraggableIndex:jg,newIndex:pu,newDraggableIndex:rd},t))}var In,io,Vr,ks,Wd,nv,so,id,rp,pu,jg,rd,y0,wa,ep=!1,Uv=!1,Vv=[],jd,uc,t2,n2,D5,I5,gg,Vf,zg,$g=!1,b0=!1,rv,Va,r2=[],wb=!1,Hv=[],Oy=typeof document<"u",_0=HE,O5=Em||Oh?"cssFloat":"float",QY=Oy&&!HY&&!HE&&"draggable"in document.createElement("div"),KE=function(){if(Oy){if(Oh)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),ZE=function(e,n){var r=tr(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=Lp(e,0,n),o=Lp(e,1,n),a=s&&tr(s),l=o&&tr(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+As(s).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+As(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var p=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===p)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[O5]==="none"||o&&r[O5]==="none"&&c+d>i)?"vertical":"horizontal"},eK=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?n.left:n.top,l=r?n.right:n.bottom,c=r?n.width:n.height;return i===a||s===l||i+o/2===a+c/2},tK=function(e,n){var r;return Vv.some(function(i){var s=i[Ka].options.emptyInsertThreshold;if(!(!s||I_(i))){var o=As(i),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},XE=function(e){function n(s,o){return function(a,l,c,d){var p=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||p))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,d),o)(a,l,c,d);var v=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===v||s.join&&s.indexOf(v)>-1}}var r={},i=e.group;(!i||tv(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},JE=function(){!KE&&Vr&&tr(Vr,"display","none")},QE=function(){!KE&&Vr&&tr(Vr,"display","")};Oy&&document.addEventListener("click",function(t){if(Uv)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Uv=!1,!1},!0);var zd=function(e){if(In){e=e.touches?e.touches[0]:e;var n=tK(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[Ka]._onDragOver(r)}}},nK=function(e){In&&In.parentNode[Ka]._isOutsideThisEl(e.target)};function Sr(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Hu({},e),t[Ka]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ZE(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Sr.supportPointer!==!1&&"PointerEvent"in window&&!Rg,emptyInsertThreshold:5};Mm.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);XE(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:QY,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?ci(t,"pointerdown",this._onTapStart):(ci(t,"mousedown",this._onTapStart),ci(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(ci(t,"dragover",this),ci(t,"dragenter",this)),Vv.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Hu(this,KY())}Sr.prototype={constructor:Sr,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Vf=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,In):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,d=i.filter;if(cK(r),!In&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Rg&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=dc(l,i.draggable,r,!1),!(l&&l.animated)&&nv!==l)){if(rp=ao(l),jg=ao(l,i.draggable),typeof d=="function"){if(d.call(this,e,l,this)){fl({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Rl("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(p){if(p=dc(c,p.trim(),r,!1),p)return fl({sortable:n,rootEl:p,name:"filter",targetEl:l,fromEl:r,toEl:r}),Rl("filter",n,{evt:e}),!0}),d)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!dc(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!In&&r.parentNode===s){var c=As(r);if(ks=s,In=r,io=In.parentNode,Wd=In.nextSibling,nv=r,y0=o.group,Sr.dragged=In,jd={target:In,clientX:(n||e).clientX,clientY:(n||e).clientY},D5=jd.clientX-c.left,I5=jd.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,In.style["will-change"]="all",l=function(){if(Rl("delayEnded",i,{evt:e}),Sr.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!M5&&i.nativeDraggable&&(In.draggable=!0),i._triggerDragStart(e,n),fl({sortable:i,name:"choose",originalEvent:e}),Ys(In,o.chosenClass,!0)},o.ignore.split(",").forEach(function(d){WE(In,d.trim(),i2)}),ci(a,"dragover",zd),ci(a,"mousemove",zd),ci(a,"touchmove",zd),ci(a,"mouseup",i._onDrop),ci(a,"touchend",i._onDrop),ci(a,"touchcancel",i._onDrop),M5&&this.nativeDraggable&&(this.options.touchStartThreshold=4,In.draggable=!0),Rl("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Em||Oh))){if(Sr.eventCanceled){this._onDrop();return}ci(a,"mouseup",i._disableDelayedDrag),ci(a,"touchend",i._disableDelayedDrag),ci(a,"touchcancel",i._disableDelayedDrag),ci(a,"mousemove",i._delayedDragTouchMoveHandler),ci(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&ci(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){In&&i2(In),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;ti(e,"mouseup",this._disableDelayedDrag),ti(e,"touchend",this._disableDelayedDrag),ti(e,"touchcancel",this._disableDelayedDrag),ti(e,"mousemove",this._delayedDragTouchMoveHandler),ti(e,"touchmove",this._delayedDragTouchMoveHandler),ti(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?ci(document,"pointermove",this._onTouchMove):n?ci(document,"touchmove",this._onTouchMove):ci(document,"mousemove",this._onTouchMove):(ci(In,"dragend",this),ci(ks,"dragstart",this._onDragStart));try{document.selection?iv(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(ep=!1,ks&&In){Rl("dragStarted",this,{evt:n}),this.nativeDraggable&&ci(document,"dragover",nK);var r=this.options;!e&&Ys(In,r.dragClass,!1),Ys(In,r.ghostClass,!0),Sr.active=this,e&&this._appendGhost(),fl({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(uc){this._lastX=uc.clientX,this._lastY=uc.clientY,JE();for(var e=document.elementFromPoint(uc.clientX,uc.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(uc.clientX,uc.clientY),e!==n);)n=e;if(In.parentNode[Ka]._isOutsideThisEl(e),n)do{if(n[Ka]){var r=void 0;if(r=n[Ka]._onDragOver({clientX:uc.clientX,clientY:uc.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);QE()}},_onTouchMove:function(e){if(jd){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=Vr&&sf(Vr,!0),a=Vr&&o&&o.a,l=Vr&&o&&o.d,c=_0&&Va&&A5(Va),d=(s.clientX-jd.clientX+i.x)/(a||1)+(c?c[0]-r2[0]:0)/(a||1),p=(s.clientY-jd.clientY+i.y)/(l||1)+(c?c[1]-r2[1]:0)/(l||1);if(!Sr.active&&!ep){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(Vr){o?(o.e+=d-(t2||0),o.f+=p-(n2||0)):o={a:1,b:0,c:0,d:1,e:d,f:p};var v="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");tr(Vr,"webkitTransform",v),tr(Vr,"mozTransform",v),tr(Vr,"msTransform",v),tr(Vr,"transform",v),t2=d,n2=p,uc=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Vr){var e=this.options.fallbackOnBody?document.body:ks,n=As(In,!0,_0,!0,e),r=this.options;if(_0){for(Va=e;tr(Va,"position")==="static"&&tr(Va,"transform")==="none"&&Va!==document;)Va=Va.parentNode;Va!==document.body&&Va!==document.documentElement?(Va===document&&(Va=Yc()),n.top+=Va.scrollTop,n.left+=Va.scrollLeft):Va=Yc(),r2=A5(Va)}Vr=In.cloneNode(!0),Ys(Vr,r.ghostClass,!1),Ys(Vr,r.fallbackClass,!0),Ys(Vr,r.dragClass,!0),tr(Vr,"transition",""),tr(Vr,"transform",""),tr(Vr,"box-sizing","border-box"),tr(Vr,"margin",0),tr(Vr,"top",n.top),tr(Vr,"left",n.left),tr(Vr,"width",n.width),tr(Vr,"height",n.height),tr(Vr,"opacity","0.8"),tr(Vr,"position",_0?"absolute":"fixed"),tr(Vr,"zIndex","100000"),tr(Vr,"pointerEvents","none"),Sr.ghost=Vr,e.appendChild(Vr),tr(Vr,"transform-origin",D5/parseInt(Vr.style.width)*100+"% "+I5/parseInt(Vr.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(Rl("dragStart",this,{evt:e}),Sr.eventCanceled){this._onDrop();return}Rl("setupClone",this),Sr.eventCanceled||(so=O_(In),so.draggable=!1,so.style["will-change"]="",this._hideClone(),Ys(so,this.options.chosenClass,!1),Sr.clone=so),r.cloneId=iv(function(){Rl("clone",r),!Sr.eventCanceled&&(r.options.removeCloneOnHide||ks.insertBefore(so,In),r._hideClone(),fl({sortable:r,name:"clone"}))}),!n&&Ys(In,s.dragClass,!0),n?(Uv=!0,r._loopId=setInterval(r._emulateDragOver,50)):(ti(document,"mouseup",r._onDrop),ti(document,"touchend",r._onDrop),ti(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,In)),ci(document,"drop",r),tr(In,"transform","translateZ(0)")),ep=!0,r._dragStartId=iv(r._dragStarted.bind(r,n,e)),ci(document,"selectstart",r),gg=!0,Rg&&tr(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,a=this.options,l=a.group,c=Sr.active,d=y0===l,p=a.sort,v=wa||c,m,x=this,E=!1;if(wb)return;function T(Y,ye){Rl(Y,x,Xc({evt:e,isOwner:d,axis:m?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:p,fromSortable:v,target:r,completed:k,onMove:function(He,j){return w0(ks,n,In,i,He,As(He),e,j)},changed:B},ye))}function D(){T("dragOverAnimationCapture"),x.captureAnimationState(),x!==v&&v.captureAnimationState()}function k(Y){return T("dragOverCompleted",{insertion:Y}),Y&&(d?c._hideClone():c._showClone(x),x!==v&&(Ys(In,wa?wa.options.ghostClass:c.options.ghostClass,!1),Ys(In,a.ghostClass,!0)),wa!==x&&x!==Sr.active?wa=x:x===Sr.active&&wa&&(wa=null),v===x&&(x._ignoreWhileAnimating=r),x.animateAll(function(){T("dragOverAnimationComplete"),x._ignoreWhileAnimating=null}),x!==v&&(v.animateAll(),v._ignoreWhileAnimating=null)),(r===In&&!In.animated||r===n&&!r.animated)&&(Vf=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(In.parentNode[Ka]._isOutsideThisEl(e.target),!Y&&zd(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),E=!0}function B(){pu=ao(In),rd=ao(In,a.draggable),fl({sortable:x,name:"change",toEl:n,newIndex:pu,newDraggableIndex:rd,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=dc(r,a.draggable,n,!0),T("dragOver"),Sr.eventCanceled)return E;if(In.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||x._ignoreWhileAnimating===r)return k(!1);if(Uv=!1,c&&!a.disabled&&(d?p||(o=io!==ks):wa===this||(this.lastPutMode=y0.checkPull(this,c,In,e))&&l.checkPut(this,c,In,e))){if(m=this._getDirection(e,r)==="vertical",i=As(In),T("dragOverValid"),Sr.eventCanceled)return E;if(o)return io=ks,D(),this._hideClone(),T("revert"),Sr.eventCanceled||(Wd?ks.insertBefore(In,Wd):ks.appendChild(In)),k(!0);var W=I_(n,a.draggable);if(!W||oK(e,m,this)&&!W.animated){if(W===In)return k(!1);if(W&&n===e.target&&(r=W),r&&(s=As(r)),w0(ks,n,In,i,r,s,e,!!r)!==!1)return D(),n.appendChild(In),io=n,B(),k(!0)}else if(W&&sK(e,m,this)){var Q=Lp(n,0,a,!0);if(Q===In)return k(!1);if(r=Q,s=As(r),w0(ks,n,In,i,r,s,e,!1)!==!1)return D(),n.insertBefore(In,Q),io=n,B(),k(!0)}else if(r.parentNode===n){s=As(r);var pe=0,fe,O=In.parentNode!==n,U=!eK(In.animated&&In.toRect||i,r.animated&&r.toRect||s,m),q=m?"top":"left",R=k5(r,"top","top")||k5(In,"top","top"),$=R?R.scrollTop:void 0;Vf!==r&&(fe=s[q],$g=!1,b0=!U&&a.invertSwap||O),pe=aK(e,r,s,m,U?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,b0,Vf===r);var X;if(pe!==0){var K=ao(In);do K-=pe,X=io.children[K];while(X&&(tr(X,"display")==="none"||X===Vr))}if(pe===0||X===r)return k(!1);Vf=r,zg=pe;var F=r.nextElementSibling,N=!1;N=pe===1;var J=w0(ks,n,In,i,r,s,e,N);if(J!==!1)return(J===1||J===-1)&&(N=J===1),wb=!0,setTimeout(iK,30),D(),N&&!F?n.appendChild(In):r.parentNode.insertBefore(In,N?F:r),R&&YE(R,0,$-R.scrollTop),io=In.parentNode,fe!==void 0&&!b0&&(rv=Math.abs(fe-As(r)[q])),B(),k(!0)}if(n.contains(In))return k(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ti(document,"mousemove",this._onTouchMove),ti(document,"touchmove",this._onTouchMove),ti(document,"pointermove",this._onTouchMove),ti(document,"dragover",zd),ti(document,"mousemove",zd),ti(document,"touchmove",zd)},_offUpEvents:function(){var e=this.el.ownerDocument;ti(e,"mouseup",this._onDrop),ti(e,"touchend",this._onDrop),ti(e,"pointerup",this._onDrop),ti(e,"touchcancel",this._onDrop),ti(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(pu=ao(In),rd=ao(In,r.draggable),Rl("drop",this,{evt:e}),io=In&&In.parentNode,pu=ao(In),rd=ao(In,r.draggable),Sr.eventCanceled){this._nulling();return}ep=!1,b0=!1,$g=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),xb(this.cloneId),xb(this._dragStartId),this.nativeDraggable&&(ti(document,"drop",this),ti(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Rg&&tr(document.body,"user-select",""),tr(In,"transform",""),e&&(gg&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),Vr&&Vr.parentNode&&Vr.parentNode.removeChild(Vr),(ks===io||wa&&wa.lastPutMode!=="clone")&&so&&so.parentNode&&so.parentNode.removeChild(so),In&&(this.nativeDraggable&&ti(In,"dragend",this),i2(In),In.style["will-change"]="",gg&&!ep&&Ys(In,wa?wa.options.ghostClass:this.options.ghostClass,!1),Ys(In,this.options.chosenClass,!1),fl({sortable:this,name:"unchoose",toEl:io,newIndex:null,newDraggableIndex:null,originalEvent:e}),ks!==io?(pu>=0&&(fl({rootEl:io,name:"add",toEl:io,fromEl:ks,originalEvent:e}),fl({sortable:this,name:"remove",toEl:io,originalEvent:e}),fl({rootEl:io,name:"sort",toEl:io,fromEl:ks,originalEvent:e}),fl({sortable:this,name:"sort",toEl:io,originalEvent:e})),wa&&wa.save()):pu!==rp&&pu>=0&&(fl({sortable:this,name:"update",toEl:io,originalEvent:e}),fl({sortable:this,name:"sort",toEl:io,originalEvent:e})),Sr.active&&((pu==null||pu===-1)&&(pu=rp,rd=jg),fl({sortable:this,name:"end",toEl:io,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Rl("nulling",this),ks=In=io=Vr=Wd=so=nv=id=jd=uc=gg=pu=rd=rp=jg=Vf=zg=wa=y0=Sr.dragged=Sr.ghost=Sr.clone=Sr.active=null,Hv.forEach(function(e){e.checked=!0}),Hv.length=t2=n2=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":In&&(this._onDragOver(e),rK(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],dc(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||uK(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];dc(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return dc(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=Mm.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&XE(r)},destroy:function(){Rl("destroy",this);var e=this.el;e[Ka]=null,ti(e,"mousedown",this._onTapStart),ti(e,"touchstart",this._onTapStart),ti(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(ti(e,"dragover",this),ti(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Vv.splice(Vv.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!id){if(Rl("hideClone",this),Sr.eventCanceled)return;tr(so,"display","none"),this.options.removeCloneOnHide&&so.parentNode&&so.parentNode.removeChild(so),id=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(id){if(Rl("showClone",this),Sr.eventCanceled)return;In.parentNode==ks&&!this.options.group.revertClone?ks.insertBefore(so,In):Wd?ks.insertBefore(so,Wd):ks.appendChild(so),this.options.group.revertClone&&this.animate(In,so),tr(so,"display",""),id=!1}}};function rK(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function w0(t,e,n,r,i,s,o,a){var l,c=t[Ka],d=c.options.onMove,p;return window.CustomEvent&&!Oh&&!Em?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=s||As(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),d&&(p=d.call(c,l,o)),p}function i2(t){t.draggable=!1}function iK(){wb=!1}function sK(t,e,n){var r=As(Lp(n.el,0,n.options,!0)),i=10;return e?t.clientX<r.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-i||t.clientY<r.bottom&&t.clientX<r.left}function oK(t,e,n){var r=As(I_(n.el,n.options.draggable)),i=10;return e?t.clientX>r.right+i||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+i}function aK(t,e,n,r,i,s,o,a){var l=r?t.clientY:t.clientX,c=r?n.height:n.width,d=r?n.top:n.left,p=r?n.bottom:n.right,v=!1;if(!o){if(a&&rv<c*i){if(!$g&&(zg===1?l>d+c*s/2:l<p-c*s/2)&&($g=!0),$g)v=!0;else if(zg===1?l<d+rv:l>p-rv)return-zg}else if(l>d+c*(1-i)/2&&l<p-c*(1-i)/2)return lK(e)}return v=v||o,v&&(l<d+c*s/2||l>p-c*s/2)?l>d+c/2?1:-1:0}function lK(t){return ao(In)<ao(t)?1:-1}function uK(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function cK(t){Hv.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&Hv.push(r)}}function iv(t){return setTimeout(t,0)}function xb(t){return clearTimeout(t)}Oy&&ci(document,"touchmove",function(t){(Sr.active||ep)&&t.cancelable&&t.preventDefault()});Sr.utils={on:ci,off:ti,css:tr,find:WE,is:function(e,n){return!!dc(e,n,e,!1)},extend:qY,throttle:qE,closest:dc,toggleClass:Ys,clone:O_,index:ao,nextTick:iv,cancelNextTick:xb,detectDirection:ZE,getChild:Lp};Sr.get=function(t){return t[Ka]};Sr.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Sr.utils=Xc(Xc({},Sr.utils),r.utils)),Mm.mount(r)})};Sr.create=function(t,e){return new Sr(t,e)};Sr.version=VY;var Bo=[],mg,Lb,Sb=!1,s2,o2,Gv,vg;function hK(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?ci(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ci(document,"pointermove",this._handleFallbackAutoScroll):r.touches?ci(document,"touchmove",this._handleFallbackAutoScroll):ci(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?ti(document,"dragover",this._handleAutoScroll):(ti(document,"pointermove",this._handleFallbackAutoScroll),ti(document,"touchmove",this._handleFallbackAutoScroll),ti(document,"mousemove",this._handleFallbackAutoScroll)),N5(),sv(),YY()},nulling:function(){Gv=Lb=mg=Sb=vg=s2=o2=null,Bo.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(Gv=n,r||this.options.forceAutoScrollFallback||Em||Oh||Rg){a2(n,this.options,a,r);var l=od(a,!0);Sb&&(!vg||s!==s2||o!==o2)&&(vg&&N5(),vg=setInterval(function(){var c=od(document.elementFromPoint(s,o),!0);c!==l&&(l=c,sv()),a2(n,i.options,c,r)},10),s2=s,o2=o)}else{if(!this.options.bubbleScroll||od(a,!0)===Yc()){sv();return}a2(n,this.options,od(a,!1),!1)}}},Hu(t,{pluginName:"scroll",initializeByDefault:!0})}function sv(){Bo.forEach(function(t){clearInterval(t.pid)}),Bo=[]}function N5(){clearInterval(vg)}var a2=qE(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Yc(),c=!1,d;Lb!==n&&(Lb=n,sv(),mg=e.scroll,d=e.scrollFn,mg===!0&&(mg=od(n,!0)));var p=0,v=mg;do{var m=v,x=As(m),E=x.top,T=x.bottom,D=x.left,k=x.right,B=x.width,W=x.height,Q=void 0,pe=void 0,fe=m.scrollWidth,O=m.scrollHeight,U=tr(m),q=m.scrollLeft,R=m.scrollTop;m===l?(Q=B<fe&&(U.overflowX==="auto"||U.overflowX==="scroll"||U.overflowX==="visible"),pe=W<O&&(U.overflowY==="auto"||U.overflowY==="scroll"||U.overflowY==="visible")):(Q=B<fe&&(U.overflowX==="auto"||U.overflowX==="scroll"),pe=W<O&&(U.overflowY==="auto"||U.overflowY==="scroll"));var $=Q&&(Math.abs(k-i)<=o&&q+B<fe)-(Math.abs(D-i)<=o&&!!q),X=pe&&(Math.abs(T-s)<=o&&R+W<O)-(Math.abs(E-s)<=o&&!!R);if(!Bo[p])for(var K=0;K<=p;K++)Bo[K]||(Bo[K]={});(Bo[p].vx!=$||Bo[p].vy!=X||Bo[p].el!==m)&&(Bo[p].el=m,Bo[p].vx=$,Bo[p].vy=X,clearInterval(Bo[p].pid),($!=0||X!=0)&&(c=!0,Bo[p].pid=setInterval((function(){r&&this.layer===0&&Sr.active._onTouchMove(Gv);var F=Bo[this.layer].vy?Bo[this.layer].vy*a:0,N=Bo[this.layer].vx?Bo[this.layer].vx*a:0;typeof d=="function"&&d.call(Sr.dragged.parentNode[Ka],N,F,t,Gv,Bo[this.layer].el)!=="continue"||YE(Bo[this.layer].el,N,F)}).bind({layer:p}),24))),p++}while(e.bubbleScroll&&v!==l&&(v=od(v,!1)));Sb=c}},30),eM=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=r||s;a();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,p=document.elementFromPoint(d.clientX,d.clientY);l(),c&&!c.el.contains(p)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function N_(){}N_.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Lp(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:eM};Hu(N_,{pluginName:"revertOnSpill"});function B_(){}B_.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:eM};Hu(B_,{pluginName:"removeOnSpill"});var Bu;function dK(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(n){var r=n.dragEl;Bu=r},dragOverValid:function(n){var r=n.completed,i=n.target,s=n.onMove,o=n.activeSortable,a=n.changed,l=n.cancel;if(o.options.swap){var c=this.sortable.el,d=this.options;if(i&&i!==c){var p=Bu;s(i)!==!1?(Ys(i,d.swapClass,!0),Bu=i):Bu=null,p&&p!==Bu&&Ys(p,d.swapClass,!1)}a(),r(!0),l()}},drop:function(n){var r=n.activeSortable,i=n.putSortable,s=n.dragEl,o=i||this.sortable,a=this.options;Bu&&Ys(Bu,a.swapClass,!1),Bu&&(a.swap||i&&i.options.swap)&&s!==Bu&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),fK(s,Bu),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){Bu=null}},Hu(t,{pluginName:"swap",eventProperties:function(){return{swapItem:Bu}}})}function fK(t,e){var n=t.parentNode,r=e.parentNode,i,s;!n||!r||n.isEqualNode(e)||r.isEqualNode(t)||(i=ao(t),s=ao(e),n.isEqualNode(r)&&i<s&&s++,n.insertBefore(e,n.children[i]),r.insertBefore(t,r.children[s]))}var Nr=[],fu=[],Xp,cc,Jp=!1,Fl=!1,Hf=!1,ls,Qp,x0;function pK(){function t(e){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));e.options.supportPointer?ci(document,"pointerup",this._deselectMultiDrag):(ci(document,"mouseup",this._deselectMultiDrag),ci(document,"touchend",this._deselectMultiDrag)),ci(document,"keydown",this._checkKeyDown),ci(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";Nr.length&&cc===e?Nr.forEach(function(a,l){o+=(l?", ":"")+a.textContent}):o=s.textContent,i.setData("Text",o)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var r=n.dragEl;ls=r},delayEnded:function(){this.isMultiDrag=~Nr.indexOf(ls)},setupClone:function(n){var r=n.sortable,i=n.cancel;if(this.isMultiDrag){for(var s=0;s<Nr.length;s++)fu.push(O_(Nr[s])),fu[s].sortableIndex=Nr[s].sortableIndex,fu[s].draggable=!1,fu[s].style["will-change"]="",Ys(fu[s],this.options.selectedClass,!1),Nr[s]===ls&&Ys(fu[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(n){var r=n.sortable,i=n.rootEl,s=n.dispatchSortableEvent,o=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Nr.length&&cc===r&&(B5(!0,i),s("clone"),o()))},showClone:function(n){var r=n.cloneNowShown,i=n.rootEl,s=n.cancel;this.isMultiDrag&&(B5(!1,i),fu.forEach(function(o){tr(o,"display","")}),r(),x0=!1,s())},hideClone:function(n){var r=this;n.sortable;var i=n.cloneNowHidden,s=n.cancel;this.isMultiDrag&&(fu.forEach(function(o){tr(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),x0=!0,s())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&cc&&cc.multiDrag._deselectMultiDrag(),Nr.forEach(function(r){r.sortableIndex=ao(r)}),Nr=Nr.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),Hf=!0},dragStarted:function(n){var r=this,i=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Nr.forEach(function(o){o!==ls&&tr(o,"position","absolute")});var s=As(ls,!1,!0,!0);Nr.forEach(function(o){o!==ls&&T5(o,s)}),Fl=!0,Jp=!0}i.animateAll(function(){Fl=!1,Jp=!1,r.options.animation&&Nr.forEach(function(o){Q1(o)}),r.options.sort&&L0()})}},dragOver:function(n){var r=n.target,i=n.completed,s=n.cancel;Fl&&~Nr.indexOf(r)&&(i(!1),s())},revert:function(n){var r=n.fromSortable,i=n.rootEl,s=n.sortable,o=n.dragRect;Nr.length>1&&(Nr.forEach(function(a){s.addAnimationState({target:a,rect:Fl?As(a):o}),Q1(a),a.fromRect=o,r.removeAnimationState(a)}),Fl=!1,gK(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(n){var r=n.sortable,i=n.isOwner,s=n.insertion,o=n.activeSortable,a=n.parentEl,l=n.putSortable,c=this.options;if(s){if(i&&o._hideClone(),Jp=!1,c.animation&&Nr.length>1&&(Fl||!i&&!o.options.sort&&!l)){var d=As(ls,!1,!0,!0);Nr.forEach(function(v){v!==ls&&(T5(v,d),a.appendChild(v))}),Fl=!0}if(!i)if(Fl||L0(),Nr.length>1){var p=x0;o._showClone(r),o.options.animation&&!x0&&p&&fu.forEach(function(v){o.addAnimationState({target:v,rect:Qp}),v.fromRect=Qp,v.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(n){var r=n.dragRect,i=n.isOwner,s=n.activeSortable;if(Nr.forEach(function(a){a.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){Qp=Hu({},r);var o=sf(ls,!0);Qp.top-=o.f,Qp.left-=o.e}},dragOverAnimationComplete:function(){Fl&&(Fl=!1,L0())},drop:function(n){var r=n.originalEvent,i=n.rootEl,s=n.parentEl,o=n.sortable,a=n.dispatchSortableEvent,l=n.oldIndex,c=n.putSortable,d=c||this.sortable;if(r){var p=this.options,v=s.children;if(!Hf)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Ys(ls,p.selectedClass,!~Nr.indexOf(ls)),~Nr.indexOf(ls))Nr.splice(Nr.indexOf(ls),1),Xp=null,pg({sortable:o,rootEl:i,name:"deselect",targetEl:ls});else{if(Nr.push(ls),pg({sortable:o,rootEl:i,name:"select",targetEl:ls}),r.shiftKey&&Xp&&o.el.contains(Xp)){var m=ao(Xp),x=ao(ls);if(~m&&~x&&m!==x){var E,T;for(x>m?(T=m,E=x):(T=x,E=m+1);T<E;T++)~Nr.indexOf(v[T])||(Ys(v[T],p.selectedClass,!0),Nr.push(v[T]),pg({sortable:o,rootEl:i,name:"select",targetEl:v[T]}))}}else Xp=ls;cc=d}if(Hf&&this.isMultiDrag){if(Fl=!1,(s[Ka].options.sort||s!==i)&&Nr.length>1){var D=As(ls),k=ao(ls,":not(."+this.options.selectedClass+")");if(!Jp&&p.animation&&(ls.thisAnimationDuration=null),d.captureAnimationState(),!Jp&&(p.animation&&(ls.fromRect=D,Nr.forEach(function(W){if(W.thisAnimationDuration=null,W!==ls){var Q=Fl?As(W):D;W.fromRect=Q,d.addAnimationState({target:W,rect:Q})}})),L0(),Nr.forEach(function(W){v[k]?s.insertBefore(W,v[k]):s.appendChild(W),k++}),l===ao(ls))){var B=!1;Nr.forEach(function(W){if(W.sortableIndex!==ao(W)){B=!0;return}}),B&&a("update")}Nr.forEach(function(W){Q1(W)}),d.animateAll()}cc=d}(i===s||c&&c.lastPutMode!=="clone")&&fu.forEach(function(W){W.parentNode&&W.parentNode.removeChild(W)})}},nullingGlobal:function(){this.isMultiDrag=Hf=!1,fu.length=0},destroyGlobal:function(){this._deselectMultiDrag(),ti(document,"pointerup",this._deselectMultiDrag),ti(document,"mouseup",this._deselectMultiDrag),ti(document,"touchend",this._deselectMultiDrag),ti(document,"keydown",this._checkKeyDown),ti(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Hf<"u"&&Hf)&&cc===this.sortable&&!(n&&dc(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;Nr.length;){var r=Nr[0];Ys(r,this.options.selectedClass,!1),Nr.shift(),pg({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Hu(t,{pluginName:"multiDrag",utils:{select:function(n){var r=n.parentNode[Ka];!r||!r.options.multiDrag||~Nr.indexOf(n)||(cc&&cc!==r&&(cc.multiDrag._deselectMultiDrag(),cc=r),Ys(n,r.options.selectedClass,!0),Nr.push(n))},deselect:function(n){var r=n.parentNode[Ka],i=Nr.indexOf(n);!r||!r.options.multiDrag||!~i||(Ys(n,r.options.selectedClass,!1),Nr.splice(i,1))}},eventProperties:function(){var n=this,r=[],i=[];return Nr.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;Fl&&s!==ls?o=-1:Fl?o=ao(s,":not(."+n.options.selectedClass+")"):o=ao(s),i.push({multiDragElement:s,index:o})}),{items:FY(Nr),clones:[].concat(fu),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function gK(t,e){Nr.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function B5(t,e){fu.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function L0(){Nr.forEach(function(t){t!==ls&&t.parentNode&&t.parentNode.removeChild(t)})}Sr.mount(new hK);Sr.mount(B_,N_);const mK=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:pK,Sortable:Sr,Swap:dK,default:Sr},Symbol.toStringTag,{value:"Module"})),vK=eE(mK);(function(t,e){(function(r,i){t.exports=i(OY,vK)})(typeof self<"u"?self:oa,function(n,r){return function(i){var s={};function o(a){if(s[a])return s[a].exports;var l=s[a]={i:a,l:!1,exports:{}};return i[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=i,o.c=s,o.d=function(a,l,c){o.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:c})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,l){if(l&1&&(a=o(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var d in a)o.d(c,d,(function(p){return a[p]}).bind(null,d));return c},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var a=o("b622"),l=a("toStringTag"),c={};c[l]="z",i.exports=String(c)==="[object z]"},"0366":function(i,s,o){var a=o("1c0b");i.exports=function(l,c,d){if(a(l),c===void 0)return l;switch(d){case 0:return function(){return l.call(c)};case 1:return function(p){return l.call(c,p)};case 2:return function(p,v){return l.call(c,p,v)};case 3:return function(p,v,m){return l.call(c,p,v,m)}}return function(){return l.apply(c,arguments)}}},"057f":function(i,s,o){var a=o("fc6a"),l=o("241c").f,c={}.toString,d=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],p=function(v){try{return l(v)}catch{return d.slice()}};i.exports.f=function(m){return d&&c.call(m)=="[object Window]"?p(m):l(a(m))}},"06cf":function(i,s,o){var a=o("83ab"),l=o("d1e7"),c=o("5c6c"),d=o("fc6a"),p=o("c04e"),v=o("5135"),m=o("0cfb"),x=Object.getOwnPropertyDescriptor;s.f=a?x:function(T,D){if(T=d(T),D=p(D,!0),m)try{return x(T,D)}catch{}if(v(T,D))return c(!l.f.call(T,D),T[D])}},"0cfb":function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("cc12");i.exports=!a&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var a=o("23e7"),l=o("d58f").left,c=o("a640"),d=o("ae40"),p=c("reduce"),v=d("reduce",{1:0});a({target:"Array",proto:!0,forced:!p||!v},{reduce:function(x){return l(this,x,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var a=o("c6b6"),l=o("9263");i.exports=function(c,d){var p=c.exec;if(typeof p=="function"){var v=p.call(c,d);if(typeof v!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return v}if(a(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,d)}},"159b":function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("17c2"),d=o("9112");for(var p in l){var v=a[p],m=v&&v.prototype;if(m&&m.forEach!==c)try{d(m,"forEach",c)}catch{m.forEach=c}}},"17c2":function(i,s,o){var a=o("b727").forEach,l=o("a640"),c=o("ae40"),d=l("forEach"),p=c("forEach");i.exports=!d||!p?function(m){return a(this,m,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var a=o("d066");i.exports=a("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var a=o("b622"),l=a("iterator"),c=!1;try{var d=0,p={next:function(){return{done:!!d++}},return:function(){c=!0}};p[l]=function(){return this},Array.from(p,function(){throw 2})}catch{}i.exports=function(v,m){if(!m&&!c)return!1;var x=!1;try{var E={};E[l]=function(){return{next:function(){return{done:x=!0}}}},v(E)}catch{}return x}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var a=o("d039"),l=o("b622"),c=o("2d00"),d=l("species");i.exports=function(p){return c>=51||!a(function(){var v=[],m=v.constructor={};return m[d]=function(){return{foo:1}},v[p](Boolean).foo!==1})}},"23cb":function(i,s,o){var a=o("a691"),l=Math.max,c=Math.min;i.exports=function(d,p){var v=a(d);return v<0?l(v+p,0):c(v,p)}},"23e7":function(i,s,o){var a=o("da84"),l=o("06cf").f,c=o("9112"),d=o("6eeb"),p=o("ce4e"),v=o("e893"),m=o("94ca");i.exports=function(x,E){var T=x.target,D=x.global,k=x.stat,B,W,Q,pe,fe,O;if(D?W=a:k?W=a[T]||p(T,{}):W=(a[T]||{}).prototype,W)for(Q in E){if(fe=E[Q],x.noTargetGet?(O=l(W,Q),pe=O&&O.value):pe=W[Q],B=m(D?Q:T+(k?".":"#")+Q,x.forced),!B&&pe!==void 0){if(typeof fe==typeof pe)continue;v(fe,pe)}(x.sham||pe&&pe.sham)&&c(fe,"sham",!0),d(W,Q,fe,x)}}},"241c":function(i,s,o){var a=o("ca84"),l=o("7839"),c=l.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(p){return a(p,c)}},"25f0":function(i,s,o){var a=o("6eeb"),l=o("825a"),c=o("d039"),d=o("ad6d"),p="toString",v=RegExp.prototype,m=v[p],x=c(function(){return m.call({source:"a",flags:"b"})!="/a/b"}),E=m.name!=p;(x||E)&&a(RegExp.prototype,p,function(){var D=l(this),k=String(D.source),B=D.flags,W=String(B===void 0&&D instanceof RegExp&&!("flags"in v)?d.call(D):B);return"/"+k+"/"+W},{unsafe:!0})},"2ca0":function(i,s,o){var a=o("23e7"),l=o("06cf").f,c=o("50c4"),d=o("5a34"),p=o("1d80"),v=o("ab13"),m=o("c430"),x="".startsWith,E=Math.min,T=v("startsWith"),D=!m&&!T&&!!function(){var k=l(String.prototype,"startsWith");return k&&!k.writable}();a({target:"String",proto:!0,forced:!D&&!T},{startsWith:function(B){var W=String(p(this));d(B);var Q=c(E(arguments.length>1?arguments[1]:void 0,W.length)),pe=String(B);return x?x.call(W,pe,Q):W.slice(Q,Q+pe.length)===pe}})},"2d00":function(i,s,o){var a=o("da84"),l=o("342f"),c=a.process,d=c&&c.versions,p=d&&d.v8,v,m;p?(v=p.split("."),m=v[0]+v[1]):l&&(v=l.match(/Edge\/(\d+)/),(!v||v[1]>=74)&&(v=l.match(/Chrome\/(\d+)/),v&&(m=v[1]))),i.exports=m&&+m},"342f":function(i,s,o){var a=o("d066");i.exports=a("navigator","userAgent")||""},"35a1":function(i,s,o){var a=o("f5df"),l=o("3f8c"),c=o("b622"),d=c("iterator");i.exports=function(p){if(p!=null)return p[d]||p["@@iterator"]||l[a(p)]}},"37e8":function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("825a"),d=o("df75");i.exports=a?Object.defineProperties:function(v,m){c(v);for(var x=d(m),E=x.length,T=0,D;E>T;)l.f(v,D=x[T++],m[D]);return v}},"3bbe":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(i,s,o){var a=o("6547").charAt,l=o("69f3"),c=o("7dd0"),d="String Iterator",p=l.set,v=l.getterFor(d);c(String,"String",function(m){p(this,{type:d,string:String(m),index:0})},function(){var x=v(this),E=x.string,T=x.index,D;return T>=E.length?{value:void 0,done:!0}:(D=a(E,T),x.index+=D.length,{value:D,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var a=o("23e7"),l=o("17c2");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(i,s,o){var a=o("da84");i.exports=a},"44ad":function(i,s,o){var a=o("d039"),l=o("c6b6"),c="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(d){return l(d)=="String"?c.call(d,""):Object(d)}:Object},"44d2":function(i,s,o){var a=o("b622"),l=o("7c73"),c=o("9bf2"),d=a("unscopables"),p=Array.prototype;p[d]==null&&c.f(p,d,{configurable:!0,value:l(null)}),i.exports=function(v){p[d][v]=!0}},"44e7":function(i,s,o){var a=o("861d"),l=o("c6b6"),c=o("b622"),d=c("match");i.exports=function(p){var v;return a(p)&&((v=p[d])!==void 0?!!v:l(p)=="RegExp")}},4930:function(i,s,o){var a=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},"4d64":function(i,s,o){var a=o("fc6a"),l=o("50c4"),c=o("23cb"),d=function(p){return function(v,m,x){var E=a(v),T=l(E.length),D=c(x,T),k;if(p&&m!=m){for(;T>D;)if(k=E[D++],k!=k)return!0}else for(;T>D;D++)if((p||D in E)&&E[D]===m)return p||D||0;return!p&&-1}};i.exports={includes:d(!0),indexOf:d(!1)}},"4de4":function(i,s,o){var a=o("23e7"),l=o("b727").filter,c=o("1dde"),d=o("ae40"),p=c("filter"),v=d("filter");a({target:"Array",proto:!0,forced:!p||!v},{filter:function(x){return l(this,x,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var a=o("0366"),l=o("7b0b"),c=o("9bdd"),d=o("e95a"),p=o("50c4"),v=o("8418"),m=o("35a1");i.exports=function(E){var T=l(E),D=typeof this=="function"?this:Array,k=arguments.length,B=k>1?arguments[1]:void 0,W=B!==void 0,Q=m(T),pe=0,fe,O,U,q,R,$;if(W&&(B=a(B,k>2?arguments[2]:void 0,2)),Q!=null&&!(D==Array&&d(Q)))for(q=Q.call(T),R=q.next,O=new D;!(U=R.call(q)).done;pe++)$=W?c(q,B,[U.value,pe],!0):U.value,v(O,pe,$);else for(fe=p(T.length),O=new D(fe);fe>pe;pe++)$=W?B(T[pe],pe):T[pe],v(O,pe,$);return O.length=pe,O}},"4fad":function(i,s,o){var a=o("23e7"),l=o("6f53").entries;a({target:"Object",stat:!0},{entries:function(d){return l(d)}})},"50c4":function(i,s,o){var a=o("a691"),l=Math.min;i.exports=function(c){return c>0?l(a(c),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(a,l){return o.call(a,l)}},5319:function(i,s,o){var a=o("d784"),l=o("825a"),c=o("7b0b"),d=o("50c4"),p=o("a691"),v=o("1d80"),m=o("8aa5"),x=o("14c3"),E=Math.max,T=Math.min,D=Math.floor,k=/\$([$&'`]|\d\d?|<[^>]*>)/g,B=/\$([$&'`]|\d\d?)/g,W=function(Q){return Q===void 0?Q:String(Q)};a("replace",2,function(Q,pe,fe,O){var U=O.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,q=O.REPLACE_KEEPS_$0,R=U?"$":"$0";return[function(K,F){var N=v(this),J=K==null?void 0:K[Q];return J!==void 0?J.call(K,N,F):pe.call(String(N),K,F)},function(X,K){if(!U&&q||typeof K=="string"&&K.indexOf(R)===-1){var F=fe(pe,X,this,K);if(F.done)return F.value}var N=l(X),J=String(this),Y=typeof K=="function";Y||(K=String(K));var ye=N.global;if(ye){var Ce=N.unicode;N.lastIndex=0}for(var He=[];;){var j=x(N,J);if(j===null||(He.push(j),!ye))break;var Z=String(j[0]);Z===""&&(N.lastIndex=m(J,d(N.lastIndex),Ce))}for(var ae="",de=0,ge=0;ge<He.length;ge++){j=He[ge];for(var me=String(j[0]),oe=E(T(p(j.index),J.length),0),re=[],Te=1;Te<j.length;Te++)re.push(W(j[Te]));var Le=j.groups;if(Y){var qe=[me].concat(re,oe,J);Le!==void 0&&qe.push(Le);var se=String(K.apply(void 0,qe))}else se=$(me,J,oe,re,Le,K);oe>=de&&(ae+=J.slice(de,oe)+se,de=oe+me.length)}return ae+J.slice(de)}];function $(X,K,F,N,J,Y){var ye=F+X.length,Ce=N.length,He=B;return J!==void 0&&(J=c(J),He=k),pe.call(Y,He,function(j,Z){var ae;switch(Z.charAt(0)){case"$":return"$";case"&":return X;case"`":return K.slice(0,F);case"'":return K.slice(ye);case"<":ae=J[Z.slice(1,-1)];break;default:var de=+Z;if(de===0)return j;if(de>Ce){var ge=D(de/10);return ge===0?j:ge<=Ce?N[ge-1]===void 0?Z.charAt(1):N[ge-1]+Z.charAt(1):j}ae=N[de-1]}return ae===void 0?"":ae})}})},5692:function(i,s,o){var a=o("c430"),l=o("c6cd");(i.exports=function(c,d){return l[c]||(l[c]=d!==void 0?d:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var a=o("d066"),l=o("241c"),c=o("7418"),d=o("825a");i.exports=a("Reflect","ownKeys")||function(v){var m=l.f(d(v)),x=c.f;return x?m.concat(x(v)):m}},"5a34":function(i,s,o){var a=o("44e7");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(i,s){i.exports=function(o,a){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:a}}},"5db7":function(i,s,o){var a=o("23e7"),l=o("a2bf"),c=o("7b0b"),d=o("50c4"),p=o("1c0b"),v=o("65f0");a({target:"Array",proto:!0},{flatMap:function(x){var E=c(this),T=d(E.length),D;return p(x),D=v(E,0),D.length=l(D,E,E,T,0,1,x,arguments.length>1?arguments[1]:void 0),D}})},6547:function(i,s,o){var a=o("a691"),l=o("1d80"),c=function(d){return function(p,v){var m=String(l(p)),x=a(v),E=m.length,T,D;return x<0||x>=E?d?"":void 0:(T=m.charCodeAt(x),T<55296||T>56319||x+1===E||(D=m.charCodeAt(x+1))<56320||D>57343?d?m.charAt(x):T:d?m.slice(x,x+2):(T-55296<<10)+(D-56320)+65536)}};i.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(i,s,o){var a=o("861d"),l=o("e8b5"),c=o("b622"),d=c("species");i.exports=function(p,v){var m;return l(p)&&(m=p.constructor,typeof m=="function"&&(m===Array||l(m.prototype))?m=void 0:a(m)&&(m=m[d],m===null&&(m=void 0))),new(m===void 0?Array:m)(v===0?0:v)}},"69f3":function(i,s,o){var a=o("7f9a"),l=o("da84"),c=o("861d"),d=o("9112"),p=o("5135"),v=o("f772"),m=o("d012"),x=l.WeakMap,E,T,D,k=function(U){return D(U)?T(U):E(U,{})},B=function(U){return function(q){var R;if(!c(q)||(R=T(q)).type!==U)throw TypeError("Incompatible receiver, "+U+" required");return R}};if(a){var W=new x,Q=W.get,pe=W.has,fe=W.set;E=function(U,q){return fe.call(W,U,q),q},T=function(U){return Q.call(W,U)||{}},D=function(U){return pe.call(W,U)}}else{var O=v("state");m[O]=!0,E=function(U,q){return d(U,O,q),q},T=function(U){return p(U,O)?U[O]:{}},D=function(U){return p(U,O)}}i.exports={set:E,get:T,has:D,enforce:k,getterFor:B}},"6eeb":function(i,s,o){var a=o("da84"),l=o("9112"),c=o("5135"),d=o("ce4e"),p=o("8925"),v=o("69f3"),m=v.get,x=v.enforce,E=String(String).split("String");(i.exports=function(T,D,k,B){var W=B?!!B.unsafe:!1,Q=B?!!B.enumerable:!1,pe=B?!!B.noTargetGet:!1;if(typeof k=="function"&&(typeof D=="string"&&!c(k,"name")&&l(k,"name",D),x(k).source=E.join(typeof D=="string"?D:"")),T===a){Q?T[D]=k:d(D,k);return}else W?!pe&&T[D]&&(Q=!0):delete T[D];Q?T[D]=k:l(T,D,k)})(Function.prototype,"toString",function(){return typeof this=="function"&&m(this).source||p(this)})},"6f53":function(i,s,o){var a=o("83ab"),l=o("df75"),c=o("fc6a"),d=o("d1e7").f,p=function(v){return function(m){for(var x=c(m),E=l(x),T=E.length,D=0,k=[],B;T>D;)B=E[D++],(!a||d.call(x,B))&&k.push(v?[B,x[B]]:x[B]);return k}};i.exports={entries:p(!0),values:p(!1)}},"73d9":function(i,s,o){var a=o("44d2");a("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var a=o("428f"),l=o("5135"),c=o("e538"),d=o("9bf2").f;i.exports=function(p){var v=a.Symbol||(a.Symbol={});l(v,p)||d(v,p,{value:c.f(p)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var a=o("1d80");i.exports=function(l){return Object(a(l))}},"7c73":function(i,s,o){var a=o("825a"),l=o("37e8"),c=o("7839"),d=o("d012"),p=o("1be4"),v=o("cc12"),m=o("f772"),x=">",E="<",T="prototype",D="script",k=m("IE_PROTO"),B=function(){},W=function(U){return E+D+x+U+E+"/"+D+x},Q=function(U){U.write(W("")),U.close();var q=U.parentWindow.Object;return U=null,q},pe=function(){var U=v("iframe"),q="java"+D+":",R;return U.style.display="none",p.appendChild(U),U.src=String(q),R=U.contentWindow.document,R.open(),R.write(W("document.F=Object")),R.close(),R.F},fe,O=function(){try{fe=document.domain&&new ActiveXObject("htmlfile")}catch{}O=fe?Q(fe):pe();for(var U=c.length;U--;)delete O[T][c[U]];return O()};d[k]=!0,i.exports=Object.create||function(q,R){var $;return q!==null?(B[T]=a(q),$=new B,B[T]=null,$[k]=q):$=O(),R===void 0?$:l($,R)}},"7dd0":function(i,s,o){var a=o("23e7"),l=o("9ed3"),c=o("e163"),d=o("d2bb"),p=o("d44e"),v=o("9112"),m=o("6eeb"),x=o("b622"),E=o("c430"),T=o("3f8c"),D=o("ae93"),k=D.IteratorPrototype,B=D.BUGGY_SAFARI_ITERATORS,W=x("iterator"),Q="keys",pe="values",fe="entries",O=function(){return this};i.exports=function(U,q,R,$,X,K,F){l(R,q,$);var N=function(ge){if(ge===X&&He)return He;if(!B&&ge in ye)return ye[ge];switch(ge){case Q:return function(){return new R(this,ge)};case pe:return function(){return new R(this,ge)};case fe:return function(){return new R(this,ge)}}return function(){return new R(this)}},J=q+" Iterator",Y=!1,ye=U.prototype,Ce=ye[W]||ye["@@iterator"]||X&&ye[X],He=!B&&Ce||N(X),j=q=="Array"&&ye.entries||Ce,Z,ae,de;if(j&&(Z=c(j.call(new U)),k!==Object.prototype&&Z.next&&(!E&&c(Z)!==k&&(d?d(Z,k):typeof Z[W]!="function"&&v(Z,W,O)),p(Z,J,!0,!0),E&&(T[J]=O))),X==pe&&Ce&&Ce.name!==pe&&(Y=!0,He=function(){return Ce.call(this)}),(!E||F)&&ye[W]!==He&&v(ye,W,He),T[q]=He,X)if(ae={values:N(pe),keys:K?He:N(Q),entries:N(fe)},F)for(de in ae)(B||Y||!(de in ye))&&m(ye,de,ae[de]);else a({target:q,proto:!0,forced:B||Y},ae);return ae}},"7f9a":function(i,s,o){var a=o("da84"),l=o("8925"),c=a.WeakMap;i.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(i,s,o){var a=o("d039");i.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var a=o("c04e"),l=o("9bf2"),c=o("5c6c");i.exports=function(d,p,v){var m=a(p);m in d?l.f(d,m,c(0,v)):d[m]=v}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var a,l,c;(function(d,p){l=[],a=p,c=typeof a=="function"?a.apply(s,l):a,c!==void 0&&(i.exports=c)})(typeof self<"u"?self:this,function(){function d(){var p=Object.getOwnPropertyDescriptor(document,"currentScript");if(!p&&"currentScript"in document&&document.currentScript||p&&p.get!==d&&document.currentScript)return document.currentScript;try{throw new Error}catch(fe){var v=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,m=/@([^@]*):(\d+):(\d+)\s*$/ig,x=v.exec(fe.stack)||m.exec(fe.stack),E=x&&x[1]||!1,T=x&&x[2]||!1,D=document.location.href.replace(document.location.hash,""),k,B,W,Q=document.getElementsByTagName("script");E===D&&(k=document.documentElement.outerHTML,B=new RegExp("(?:[^\\n]+?\\n){0,"+(T-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),W=k.replace(B,"$1").trim());for(var pe=0;pe<Q.length;pe++)if(Q[pe].readyState==="interactive"||Q[pe].src===E||E===D&&Q[pe].innerHTML&&Q[pe].innerHTML.trim()===W)return Q[pe];return null}}return d})},8925:function(i,s,o){var a=o("c6cd"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(c){return l.call(c)}),i.exports=a.inspectSource},"8aa5":function(i,s,o){var a=o("6547").charAt;i.exports=function(l,c,d){return c+(d?a(l,c).length:1)}},"8bbf":function(i,s){i.exports=n},"90e3":function(i,s){var o=0,a=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+a).toString(36)}},9112:function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("5c6c");i.exports=a?function(d,p,v){return l.f(d,p,c(1,v))}:function(d,p,v){return d[p]=v,d}},9263:function(i,s,o){var a=o("ad6d"),l=o("9f7f"),c=RegExp.prototype.exec,d=String.prototype.replace,p=c,v=function(){var T=/a/,D=/b*/g;return c.call(T,"a"),c.call(D,"a"),T.lastIndex!==0||D.lastIndex!==0}(),m=l.UNSUPPORTED_Y||l.BROKEN_CARET,x=/()??/.exec("")[1]!==void 0,E=v||x||m;E&&(p=function(D){var k=this,B,W,Q,pe,fe=m&&k.sticky,O=a.call(k),U=k.source,q=0,R=D;return fe&&(O=O.replace("y",""),O.indexOf("g")===-1&&(O+="g"),R=String(D).slice(k.lastIndex),k.lastIndex>0&&(!k.multiline||k.multiline&&D[k.lastIndex-1]!==`
`)&&(U="(?: "+U+")",R=" "+R,q++),W=new RegExp("^(?:"+U+")",O)),x&&(W=new RegExp("^"+U+"$(?!\\s)",O)),v&&(B=k.lastIndex),Q=c.call(fe?W:k,R),fe?Q?(Q.input=Q.input.slice(q),Q[0]=Q[0].slice(q),Q.index=k.lastIndex,k.lastIndex+=Q[0].length):k.lastIndex=0:v&&Q&&(k.lastIndex=k.global?Q.index+Q[0].length:B),x&&Q&&Q.length>1&&d.call(Q[0],W,function(){for(pe=1;pe<arguments.length-2;pe++)arguments[pe]===void 0&&(Q[pe]=void 0)}),Q}),i.exports=p},"94ca":function(i,s,o){var a=o("d039"),l=/#|\.prototype\./,c=function(x,E){var T=p[d(x)];return T==m?!0:T==v?!1:typeof E=="function"?a(E):!!E},d=c.normalize=function(x){return String(x).replace(l,".").toLowerCase()},p=c.data={},v=c.NATIVE="N",m=c.POLYFILL="P";i.exports=c},"99af":function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("e8b5"),d=o("861d"),p=o("7b0b"),v=o("50c4"),m=o("8418"),x=o("65f0"),E=o("1dde"),T=o("b622"),D=o("2d00"),k=T("isConcatSpreadable"),B=9007199254740991,W="Maximum allowed index exceeded",Q=D>=51||!l(function(){var U=[];return U[k]=!1,U.concat()[0]!==U}),pe=E("concat"),fe=function(U){if(!d(U))return!1;var q=U[k];return q!==void 0?!!q:c(U)},O=!Q||!pe;a({target:"Array",proto:!0,forced:O},{concat:function(q){var R=p(this),$=x(R,0),X=0,K,F,N,J,Y;for(K=-1,N=arguments.length;K<N;K++)if(Y=K===-1?R:arguments[K],fe(Y)){if(J=v(Y.length),X+J>B)throw TypeError(W);for(F=0;F<J;F++,X++)F in Y&&m($,X,Y[F])}else{if(X>=B)throw TypeError(W);m($,X++,Y)}return $.length=X,$}})},"9bdd":function(i,s,o){var a=o("825a");i.exports=function(l,c,d,p){try{return p?c(a(d)[0],d[1]):c(d)}catch(m){var v=l.return;throw v!==void 0&&a(v.call(l)),m}}},"9bf2":function(i,s,o){var a=o("83ab"),l=o("0cfb"),c=o("825a"),d=o("c04e"),p=Object.defineProperty;s.f=a?p:function(m,x,E){if(c(m),x=d(x,!0),c(E),l)try{return p(m,x,E)}catch{}if("get"in E||"set"in E)throw TypeError("Accessors not supported");return"value"in E&&(m[x]=E.value),m}},"9ed3":function(i,s,o){var a=o("ae93").IteratorPrototype,l=o("7c73"),c=o("5c6c"),d=o("d44e"),p=o("3f8c"),v=function(){return this};i.exports=function(m,x,E){var T=x+" Iterator";return m.prototype=l(a,{next:c(1,E)}),d(m,T,!1,!0),p[T]=v,m}},"9f7f":function(i,s,o){var a=o("d039");function l(c,d){return RegExp(c,d)}s.UNSUPPORTED_Y=a(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),s.BROKEN_CARET=a(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(i,s,o){var a=o("e8b5"),l=o("50c4"),c=o("0366"),d=function(p,v,m,x,E,T,D,k){for(var B=E,W=0,Q=D?c(D,k,3):!1,pe;W<x;){if(W in m){if(pe=Q?Q(m[W],W,v):m[W],T>0&&a(pe))B=d(p,v,pe,l(pe.length),B,T-1)-1;else{if(B>=9007199254740991)throw TypeError("Exceed the acceptable array length");p[B]=pe}B++}W++}return B};i.exports=d},a352:function(i,s){i.exports=r},a434:function(i,s,o){var a=o("23e7"),l=o("23cb"),c=o("a691"),d=o("50c4"),p=o("7b0b"),v=o("65f0"),m=o("8418"),x=o("1dde"),E=o("ae40"),T=x("splice"),D=E("splice",{ACCESSORS:!0,0:0,1:2}),k=Math.max,B=Math.min,W=9007199254740991,Q="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!T||!D},{splice:function(fe,O){var U=p(this),q=d(U.length),R=l(fe,q),$=arguments.length,X,K,F,N,J,Y;if($===0?X=K=0:$===1?(X=0,K=q-R):(X=$-2,K=B(k(c(O),0),q-R)),q+X-K>W)throw TypeError(Q);for(F=v(U,K),N=0;N<K;N++)J=R+N,J in U&&m(F,N,U[J]);if(F.length=K,X<K){for(N=R;N<q-K;N++)J=N+K,Y=N+X,J in U?U[Y]=U[J]:delete U[Y];for(N=q;N>q-K+X;N--)delete U[N-1]}else if(X>K)for(N=q-K;N>R;N--)J=N+K-1,Y=N+X-1,J in U?U[Y]=U[J]:delete U[Y];for(N=0;N<X;N++)U[N+R]=arguments[N+2];return U.length=q-K+X,F}})},a4d3:function(i,s,o){var a=o("23e7"),l=o("da84"),c=o("d066"),d=o("c430"),p=o("83ab"),v=o("4930"),m=o("fdbf"),x=o("d039"),E=o("5135"),T=o("e8b5"),D=o("861d"),k=o("825a"),B=o("7b0b"),W=o("fc6a"),Q=o("c04e"),pe=o("5c6c"),fe=o("7c73"),O=o("df75"),U=o("241c"),q=o("057f"),R=o("7418"),$=o("06cf"),X=o("9bf2"),K=o("d1e7"),F=o("9112"),N=o("6eeb"),J=o("5692"),Y=o("f772"),ye=o("d012"),Ce=o("90e3"),He=o("b622"),j=o("e538"),Z=o("746f"),ae=o("d44e"),de=o("69f3"),ge=o("b727").forEach,me=Y("hidden"),oe="Symbol",re="prototype",Te=He("toPrimitive"),Le=de.set,qe=de.getterFor(oe),se=Object[re],le=l.Symbol,he=c("JSON","stringify"),ee=$.f,be=X.f,je=q.f,We=K.f,Qe=J("symbols"),Je=J("op-symbols"),st=J("string-to-symbol-registry"),Pt=J("symbol-to-string-registry"),Bt=J("wks"),Ht=l.QObject,Jt=!Ht||!Ht[re]||!Ht[re].findChild,fn=p&&x(function(){return fe(be({},"a",{get:function(){return be(this,"a",{value:7}).a}})).a!=7})?function(wn,sn,hn){var Qn=ee(se,sn);Qn&&delete se[sn],be(wn,sn,hn),Qn&&wn!==se&&be(se,sn,Qn)}:be,pn=function(wn,sn){var hn=Qe[wn]=fe(le[re]);return Le(hn,{type:oe,tag:wn,description:sn}),p||(hn.description=sn),hn},et=m?function(wn){return typeof wn=="symbol"}:function(wn){return Object(wn)instanceof le},ot=function(sn,hn,Qn){sn===se&&ot(Je,hn,Qn),k(sn);var ir=Q(hn,!0);return k(Qn),E(Qe,ir)?(Qn.enumerable?(E(sn,me)&&sn[me][ir]&&(sn[me][ir]=!1),Qn=fe(Qn,{enumerable:pe(0,!1)})):(E(sn,me)||be(sn,me,pe(1,{})),sn[me][ir]=!0),fn(sn,ir,Qn)):be(sn,ir,Qn)},rt=function(sn,hn){k(sn);var Qn=W(hn),ir=O(Qn).concat(Cn(Qn));return ge(ir,function(dr){(!p||Xt.call(Qn,dr))&&ot(sn,dr,Qn[dr])}),sn},Ft=function(sn,hn){return hn===void 0?fe(sn):rt(fe(sn),hn)},Xt=function(sn){var hn=Q(sn,!0),Qn=We.call(this,hn);return this===se&&E(Qe,hn)&&!E(Je,hn)?!1:Qn||!E(this,hn)||!E(Qe,hn)||E(this,me)&&this[me][hn]?Qn:!0},Mn=function(sn,hn){var Qn=W(sn),ir=Q(hn,!0);if(!(Qn===se&&E(Qe,ir)&&!E(Je,ir))){var dr=ee(Qn,ir);return dr&&E(Qe,ir)&&!(E(Qn,me)&&Qn[me][ir])&&(dr.enumerable=!0),dr}},xn=function(sn){var hn=je(W(sn)),Qn=[];return ge(hn,function(ir){!E(Qe,ir)&&!E(ye,ir)&&Qn.push(ir)}),Qn},Cn=function(sn){var hn=sn===se,Qn=je(hn?Je:W(sn)),ir=[];return ge(Qn,function(dr){E(Qe,dr)&&(!hn||E(se,dr))&&ir.push(Qe[dr])}),ir};if(v||(le=function(){if(this instanceof le)throw TypeError("Symbol is not a constructor");var sn=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),hn=Ce(sn),Qn=function(ir){this===se&&Qn.call(Je,ir),E(this,me)&&E(this[me],hn)&&(this[me][hn]=!1),fn(this,hn,pe(1,ir))};return p&&Jt&&fn(se,hn,{configurable:!0,set:Qn}),pn(hn,sn)},N(le[re],"toString",function(){return qe(this).tag}),N(le,"withoutSetter",function(wn){return pn(Ce(wn),wn)}),K.f=Xt,X.f=ot,$.f=Mn,U.f=q.f=xn,R.f=Cn,j.f=function(wn){return pn(He(wn),wn)},p&&(be(le[re],"description",{configurable:!0,get:function(){return qe(this).description}}),d||N(se,"propertyIsEnumerable",Xt,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!v,sham:!v},{Symbol:le}),ge(O(Bt),function(wn){Z(wn)}),a({target:oe,stat:!0,forced:!v},{for:function(wn){var sn=String(wn);if(E(st,sn))return st[sn];var hn=le(sn);return st[sn]=hn,Pt[hn]=sn,hn},keyFor:function(sn){if(!et(sn))throw TypeError(sn+" is not a symbol");if(E(Pt,sn))return Pt[sn]},useSetter:function(){Jt=!0},useSimple:function(){Jt=!1}}),a({target:"Object",stat:!0,forced:!v,sham:!p},{create:Ft,defineProperty:ot,defineProperties:rt,getOwnPropertyDescriptor:Mn}),a({target:"Object",stat:!0,forced:!v},{getOwnPropertyNames:xn,getOwnPropertySymbols:Cn}),a({target:"Object",stat:!0,forced:x(function(){R.f(1)})},{getOwnPropertySymbols:function(sn){return R.f(B(sn))}}),he){var Vn=!v||x(function(){var wn=le();return he([wn])!="[null]"||he({a:wn})!="{}"||he(Object(wn))!="{}"});a({target:"JSON",stat:!0,forced:Vn},{stringify:function(sn,hn,Qn){for(var ir=[sn],dr=1,Fn;arguments.length>dr;)ir.push(arguments[dr++]);if(Fn=hn,!(!D(hn)&&sn===void 0||et(sn)))return T(hn)||(hn=function(Mr,ns){if(typeof Fn=="function"&&(ns=Fn.call(this,Mr,ns)),!et(ns))return ns}),ir[1]=hn,he.apply(null,ir)}})}le[re][Te]||F(le[re],Te,le[re].valueOf),ae(le,oe),ye[me]=!0},a630:function(i,s,o){var a=o("23e7"),l=o("4df4"),c=o("1c7e"),d=!c(function(p){Array.from(p)});a({target:"Array",stat:!0,forced:d},{from:l})},a640:function(i,s,o){var a=o("d039");i.exports=function(l,c){var d=[][l];return!!d&&a(function(){d.call(null,c||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,a=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(l>0?a:o)(l)}},ab13:function(i,s,o){var a=o("b622"),l=a("match");i.exports=function(c){var d=/./;try{"/./"[c](d)}catch{try{return d[l]=!1,"/./"[c](d)}catch{}}return!1}},ac1f:function(i,s,o){var a=o("23e7"),l=o("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(i,s,o){var a=o("825a");i.exports=function(){var l=a(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("5135"),d=Object.defineProperty,p={},v=function(m){throw m};i.exports=function(m,x){if(c(p,m))return p[m];x||(x={});var E=[][m],T=c(x,"ACCESSORS")?x.ACCESSORS:!1,D=c(x,0)?x[0]:v,k=c(x,1)?x[1]:void 0;return p[m]=!!E&&!l(function(){if(T&&!a)return!0;var B={length:-1};T?d(B,1,{enumerable:!0,get:v}):B[1]=1,E.call(B,D,k)})}},ae93:function(i,s,o){var a=o("e163"),l=o("9112"),c=o("5135"),d=o("b622"),p=o("c430"),v=d("iterator"),m=!1,x=function(){return this},E,T,D;[].keys&&(D=[].keys(),"next"in D?(T=a(a(D)),T!==Object.prototype&&(E=T)):m=!0),E==null&&(E={}),!p&&!c(E,v)&&l(E,v,x),i.exports={IteratorPrototype:E,BUGGY_SAFARI_ITERATORS:m}},b041:function(i,s,o){var a=o("00ee"),l=o("f5df");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(i,s,o){var a=o("83ab"),l=o("9bf2").f,c=Function.prototype,d=c.toString,p=/^\s*function ([^ (]*)/,v="name";a&&!(v in c)&&l(c,v,{configurable:!0,get:function(){try{return d.call(this).match(p)[1]}catch{return""}}})},b622:function(i,s,o){var a=o("da84"),l=o("5692"),c=o("5135"),d=o("90e3"),p=o("4930"),v=o("fdbf"),m=l("wks"),x=a.Symbol,E=v?x:x&&x.withoutSetter||d;i.exports=function(T){return c(m,T)||(p&&c(x,T)?m[T]=x[T]:m[T]=E("Symbol."+T)),m[T]}},b64b:function(i,s,o){var a=o("23e7"),l=o("7b0b"),c=o("df75"),d=o("d039"),p=d(function(){c(1)});a({target:"Object",stat:!0,forced:p},{keys:function(m){return c(l(m))}})},b727:function(i,s,o){var a=o("0366"),l=o("44ad"),c=o("7b0b"),d=o("50c4"),p=o("65f0"),v=[].push,m=function(x){var E=x==1,T=x==2,D=x==3,k=x==4,B=x==6,W=x==5||B;return function(Q,pe,fe,O){for(var U=c(Q),q=l(U),R=a(pe,fe,3),$=d(q.length),X=0,K=O||p,F=E?K(Q,$):T?K(Q,0):void 0,N,J;$>X;X++)if((W||X in q)&&(N=q[X],J=R(N,X,U),x)){if(E)F[X]=J;else if(J)switch(x){case 3:return!0;case 5:return N;case 6:return X;case 2:v.call(F,N)}else if(k)return!1}return B?-1:D||k?k:F}};i.exports={forEach:m(0),map:m(1),filter:m(2),some:m(3),every:m(4),find:m(5),findIndex:m(6)}},c04e:function(i,s,o){var a=o("861d");i.exports=function(l,c){if(!a(l))return l;var d,p;if(c&&typeof(d=l.toString)=="function"&&!a(p=d.call(l))||typeof(d=l.valueOf)=="function"&&!a(p=d.call(l))||!c&&typeof(d=l.toString)=="function"&&!a(p=d.call(l)))return p;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(a){return o.call(a).slice(8,-1)}},c6cd:function(i,s,o){var a=o("da84"),l=o("ce4e"),c="__core-js_shared__",d=a[c]||l(c,{});i.exports=d},c740:function(i,s,o){var a=o("23e7"),l=o("b727").findIndex,c=o("44d2"),d=o("ae40"),p="findIndex",v=!0,m=d(p);p in[]&&Array(1)[p](function(){v=!1}),a({target:"Array",proto:!0,forced:v||!m},{findIndex:function(E){return l(this,E,arguments.length>1?arguments[1]:void 0)}}),c(p)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var a=o("23e7"),l=o("4d64").indexOf,c=o("a640"),d=o("ae40"),p=[].indexOf,v=!!p&&1/[1].indexOf(1,-0)<0,m=c("indexOf"),x=d("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:v||!m||!x},{indexOf:function(T){return v?p.apply(this,arguments)||0:l(this,T,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var a=o("5135"),l=o("fc6a"),c=o("4d64").indexOf,d=o("d012");i.exports=function(p,v){var m=l(p),x=0,E=[],T;for(T in m)!a(d,T)&&a(m,T)&&E.push(T);for(;v.length>x;)a(m,T=v[x++])&&(~c(E,T)||E.push(T));return E}},caad:function(i,s,o){var a=o("23e7"),l=o("4d64").includes,c=o("44d2"),d=o("ae40"),p=d("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!p},{includes:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(i,s,o){var a=o("da84"),l=o("861d"),c=a.document,d=l(c)&&l(c.createElement);i.exports=function(p){return d?c.createElement(p):{}}},ce4e:function(i,s,o){var a=o("da84"),l=o("9112");i.exports=function(c,d){try{l(a,c,d)}catch{a[c]=d}return d}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var a=o("428f"),l=o("da84"),c=function(d){return typeof d=="function"?d:void 0};i.exports=function(d,p){return arguments.length<2?c(a[d])||c(l[d]):a[d]&&a[d][p]||l[d]&&l[d][p]}},d1e7:function(i,s,o){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!a.call({1:2},1);s.f=c?function(p){var v=l(this,p);return!!v&&v.enumerable}:a},d28b:function(i,s,o){var a=o("746f");a("iterator")},d2bb:function(i,s,o){var a=o("825a"),l=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,d={},p;try{p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,p.call(d,[]),c=d instanceof Array}catch{}return function(m,x){return a(m),l(x),c?p.call(m,x):m.__proto__=x,m}}():void 0)},d3b7:function(i,s,o){var a=o("00ee"),l=o("6eeb"),c=o("b041");a||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(i,s,o){var a=o("9bf2").f,l=o("5135"),c=o("b622"),d=c("toStringTag");i.exports=function(p,v,m){p&&!l(p=m?p:p.prototype,d)&&a(p,d,{configurable:!0,value:v})}},d58f:function(i,s,o){var a=o("1c0b"),l=o("7b0b"),c=o("44ad"),d=o("50c4"),p=function(v){return function(m,x,E,T){a(x);var D=l(m),k=c(D),B=d(D.length),W=v?B-1:0,Q=v?-1:1;if(E<2)for(;;){if(W in k){T=k[W],W+=Q;break}if(W+=Q,v?W<0:B<=W)throw TypeError("Reduce of empty array with no initial value")}for(;v?W>=0:B>W;W+=Q)W in k&&(T=x(T,k[W],W,D));return T}};i.exports={left:p(!1),right:p(!0)}},d784:function(i,s,o){o("ac1f");var a=o("6eeb"),l=o("d039"),c=o("b622"),d=o("9263"),p=o("9112"),v=c("species"),m=!l(function(){var k=/./;return k.exec=function(){var B=[];return B.groups={a:"7"},B},"".replace(k,"$<a>")!=="7"}),x=function(){return"a".replace(/./,"$0")==="$0"}(),E=c("replace"),T=function(){return/./[E]?/./[E]("a","$0")==="":!1}(),D=!l(function(){var k=/(?:)/,B=k.exec;k.exec=function(){return B.apply(this,arguments)};var W="ab".split(k);return W.length!==2||W[0]!=="a"||W[1]!=="b"});i.exports=function(k,B,W,Q){var pe=c(k),fe=!l(function(){var X={};return X[pe]=function(){return 7},""[k](X)!=7}),O=fe&&!l(function(){var X=!1,K=/a/;return k==="split"&&(K={},K.constructor={},K.constructor[v]=function(){return K},K.flags="",K[pe]=/./[pe]),K.exec=function(){return X=!0,null},K[pe](""),!X});if(!fe||!O||k==="replace"&&!(m&&x&&!T)||k==="split"&&!D){var U=/./[pe],q=W(pe,""[k],function(X,K,F,N,J){return K.exec===d?fe&&!J?{done:!0,value:U.call(K,F,N)}:{done:!0,value:X.call(F,K,N)}:{done:!1}},{REPLACE_KEEPS_$0:x,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:T}),R=q[0],$=q[1];a(String.prototype,k,R),a(RegExp.prototype,pe,B==2?function(X,K){return $.call(X,this,K)}:function(X){return $.call(X,this)})}Q&&p(RegExp.prototype[pe],"sham",!0)}},d81d:function(i,s,o){var a=o("23e7"),l=o("b727").map,c=o("1dde"),d=o("ae40"),p=c("map"),v=d("map");a({target:"Array",proto:!0,forced:!p||!v},{map:function(x){return l(this,x,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(a){var l=function(c){return c&&c.Math==Math&&c};i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("56ef"),d=o("fc6a"),p=o("06cf"),v=o("8418");a({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(x){for(var E=d(x),T=p.f,D=c(E),k={},B=0,W,Q;D.length>B;)Q=T(E,W=D[B++]),Q!==void 0&&v(k,W,Q);return k}})},dbf1:function(i,s,o){(function(a){o.d(s,"a",function(){return c});function l(){return typeof window<"u"?window.console:a.console}var c=l()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("e260"),d=o("9112"),p=o("b622"),v=p("iterator"),m=p("toStringTag"),x=c.values;for(var E in l){var T=a[E],D=T&&T.prototype;if(D){if(D[v]!==x)try{d(D,v,x)}catch{D[v]=x}if(D[m]||d(D,m,E),l[E]){for(var k in c)if(D[k]!==c[k])try{d(D,k,c[k])}catch{D[k]=c[k]}}}}},df75:function(i,s,o){var a=o("ca84"),l=o("7839");i.exports=Object.keys||function(d){return a(d,l)}},e01a:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("da84"),d=o("5135"),p=o("861d"),v=o("9bf2").f,m=o("e893"),x=c.Symbol;if(l&&typeof x=="function"&&(!("description"in x.prototype)||x().description!==void 0)){var E={},T=function(){var pe=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),fe=this instanceof T?new x(pe):pe===void 0?x():x(pe);return pe===""&&(E[fe]=!0),fe};m(T,x);var D=T.prototype=x.prototype;D.constructor=T;var k=D.toString,B=String(x("test"))=="Symbol(test)",W=/^Symbol\((.*)\)[^)]+$/;v(D,"description",{configurable:!0,get:function(){var pe=p(this)?this.valueOf():this,fe=k.call(pe);if(d(E,pe))return"";var O=B?fe.slice(7,-1):fe.replace(W,"$1");return O===""?void 0:O}}),a({global:!0,forced:!0},{Symbol:T})}},e163:function(i,s,o){var a=o("5135"),l=o("7b0b"),c=o("f772"),d=o("e177"),p=c("IE_PROTO"),v=Object.prototype;i.exports=d?Object.getPrototypeOf:function(m){return m=l(m),a(m,p)?m[p]:typeof m.constructor=="function"&&m instanceof m.constructor?m.constructor.prototype:m instanceof Object?v:null}},e177:function(i,s,o){var a=o("d039");i.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(i,s,o){var a=o("fc6a"),l=o("44d2"),c=o("3f8c"),d=o("69f3"),p=o("7dd0"),v="Array Iterator",m=d.set,x=d.getterFor(v);i.exports=p(Array,"Array",function(E,T){m(this,{type:v,target:a(E),index:0,kind:T})},function(){var E=x(this),T=E.target,D=E.kind,k=E.index++;return!T||k>=T.length?(E.target=void 0,{value:void 0,done:!0}):D=="keys"?{value:k,done:!1}:D=="values"?{value:T[k],done:!1}:{value:[k,T[k]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("fc6a"),d=o("06cf").f,p=o("83ab"),v=l(function(){d(1)}),m=!p||v;a({target:"Object",stat:!0,forced:m,sham:!p},{getOwnPropertyDescriptor:function(E,T){return d(c(E),T)}})},e538:function(i,s,o){var a=o("b622");s.f=a},e893:function(i,s,o){var a=o("5135"),l=o("56ef"),c=o("06cf"),d=o("9bf2");i.exports=function(p,v){for(var m=l(v),x=d.f,E=c.f,T=0;T<m.length;T++){var D=m[T];a(p,D)||x(p,D,E(v,D))}}},e8b5:function(i,s,o){var a=o("c6b6");i.exports=Array.isArray||function(c){return a(c)=="Array"}},e95a:function(i,s,o){var a=o("b622"),l=o("3f8c"),c=a("iterator"),d=Array.prototype;i.exports=function(p){return p!==void 0&&(l.Array===p||d[c]===p)}},f5df:function(i,s,o){var a=o("00ee"),l=o("c6b6"),c=o("b622"),d=c("toStringTag"),p=l(function(){return arguments}())=="Arguments",v=function(m,x){try{return m[x]}catch{}};i.exports=a?l:function(m){var x,E,T;return m===void 0?"Undefined":m===null?"Null":typeof(E=v(x=Object(m),d))=="string"?E:p?l(x):(T=l(x))=="Object"&&typeof x.callee=="function"?"Arguments":T}},f772:function(i,s,o){var a=o("5692"),l=o("90e3"),c=a("keys");i.exports=function(d){return c[d]||(c[d]=l(d))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var a=window.document.currentScript;{var l=o("8875");a=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(o.p=c[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function d(et,ot,rt){return ot in et?Object.defineProperty(et,ot,{value:rt,enumerable:!0,configurable:!0,writable:!0}):et[ot]=rt,et}function p(et,ot){var rt=Object.keys(et);if(Object.getOwnPropertySymbols){var Ft=Object.getOwnPropertySymbols(et);ot&&(Ft=Ft.filter(function(Xt){return Object.getOwnPropertyDescriptor(et,Xt).enumerable})),rt.push.apply(rt,Ft)}return rt}function v(et){for(var ot=1;ot<arguments.length;ot++){var rt=arguments[ot]!=null?arguments[ot]:{};ot%2?p(Object(rt),!0).forEach(function(Ft){d(et,Ft,rt[Ft])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(rt)):p(Object(rt)).forEach(function(Ft){Object.defineProperty(et,Ft,Object.getOwnPropertyDescriptor(rt,Ft))})}return et}function m(et){if(Array.isArray(et))return et}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function x(et,ot){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(et)))){var rt=[],Ft=!0,Xt=!1,Mn=void 0;try{for(var xn=et[Symbol.iterator](),Cn;!(Ft=(Cn=xn.next()).done)&&(rt.push(Cn.value),!(ot&&rt.length===ot));Ft=!0);}catch(Vn){Xt=!0,Mn=Vn}finally{try{!Ft&&xn.return!=null&&xn.return()}finally{if(Xt)throw Mn}}return rt}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function E(et,ot){(ot==null||ot>et.length)&&(ot=et.length);for(var rt=0,Ft=new Array(ot);rt<ot;rt++)Ft[rt]=et[rt];return Ft}function T(et,ot){if(et){if(typeof et=="string")return E(et,ot);var rt=Object.prototype.toString.call(et).slice(8,-1);if(rt==="Object"&&et.constructor&&(rt=et.constructor.name),rt==="Map"||rt==="Set")return Array.from(et);if(rt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(rt))return E(et,ot)}}function D(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k(et,ot){return m(et)||x(et,ot)||T(et,ot)||D()}function B(et){if(Array.isArray(et))return E(et)}function W(et){if(typeof Symbol<"u"&&Symbol.iterator in Object(et))return Array.from(et)}function Q(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pe(et){return B(et)||W(et)||T(et)||Q()}var fe=o("a352"),O=o.n(fe);function U(et){et.parentElement!==null&&et.parentElement.removeChild(et)}function q(et,ot,rt){var Ft=rt===0?et.children[0]:et.children[rt-1].nextSibling;et.insertBefore(ot,Ft)}var R=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function $(et){var ot=Object.create(null);return function(Ft){var Xt=ot[Ft];return Xt||(ot[Ft]=et(Ft))}}var X=/-(\w)/g,K=$(function(et){return et.replace(X,function(ot,rt){return rt.toUpperCase()})});o("5db7"),o("73d9");var F=["Start","Add","Remove","Update","End"],N=["Choose","Unchoose","Sort","Filter","Clone"],J=["Move"],Y=[J,F,N].flatMap(function(et){return et}).map(function(et){return"on".concat(et)}),ye={manage:J,manageAndEmit:F,emit:N};function Ce(et){return Y.indexOf(et)!==-1}o("caad"),o("2ca0");var He=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function j(et){return He.includes(et)}function Z(et){return["transition-group","TransitionGroup"].includes(et)}function ae(et){return["id","class","role","style"].includes(et)||et.startsWith("data-")||et.startsWith("aria-")||et.startsWith("on")}function de(et){return et.reduce(function(ot,rt){var Ft=k(rt,2),Xt=Ft[0],Mn=Ft[1];return ot[Xt]=Mn,ot},{})}function ge(et){var ot=et.$attrs,rt=et.componentData,Ft=rt===void 0?{}:rt,Xt=de(Object.entries(ot).filter(function(Mn){var xn=k(Mn,2),Cn=xn[0];return xn[1],ae(Cn)}));return v(v({},Xt),Ft)}function me(et){var ot=et.$attrs,rt=et.callBackBuilder,Ft=de(oe(ot));Object.entries(rt).forEach(function(Mn){var xn=k(Mn,2),Cn=xn[0],Vn=xn[1];ye[Cn].forEach(function(wn){Ft["on".concat(wn)]=Vn(wn)})});var Xt="[data-draggable]".concat(Ft.draggable||"");return v(v({},Ft),{},{draggable:Xt})}function oe(et){return Object.entries(et).filter(function(ot){var rt=k(ot,2),Ft=rt[0];return rt[1],!ae(Ft)}).map(function(ot){var rt=k(ot,2),Ft=rt[0],Xt=rt[1];return[K(Ft),Xt]}).filter(function(ot){var rt=k(ot,2),Ft=rt[0];return rt[1],!Ce(Ft)})}o("c740");function re(et,ot){if(!(et instanceof ot))throw new TypeError("Cannot call a class as a function")}function Te(et,ot){for(var rt=0;rt<ot.length;rt++){var Ft=ot[rt];Ft.enumerable=Ft.enumerable||!1,Ft.configurable=!0,"value"in Ft&&(Ft.writable=!0),Object.defineProperty(et,Ft.key,Ft)}}function Le(et,ot,rt){return ot&&Te(et.prototype,ot),et}var qe=function(ot){var rt=ot.el;return rt},se=function(ot,rt){return ot.__draggable_context=rt},le=function(ot){return ot.__draggable_context},he=function(){function et(ot){var rt=ot.nodes,Ft=rt.header,Xt=rt.default,Mn=rt.footer,xn=ot.root,Cn=ot.realList;re(this,et),this.defaultNodes=Xt,this.children=[].concat(pe(Ft),pe(Xt),pe(Mn)),this.externalComponent=xn.externalComponent,this.rootTransition=xn.transition,this.tag=xn.tag,this.realList=Cn}return Le(et,[{key:"render",value:function(rt,Ft){var Xt=this.tag,Mn=this.children,xn=this._isRootComponent,Cn=xn?{default:function(){return Mn}}:Mn;return rt(Xt,Ft,Cn)}},{key:"updated",value:function(){var rt=this.defaultNodes,Ft=this.realList;rt.forEach(function(Xt,Mn){se(qe(Xt),{element:Ft[Mn],index:Mn})})}},{key:"getUnderlyingVm",value:function(rt){return le(rt)}},{key:"getVmIndexFromDomIndex",value:function(rt,Ft){var Xt=this.defaultNodes,Mn=Xt.length,xn=Ft.children,Cn=xn.item(rt);if(Cn===null)return Mn;var Vn=le(Cn);if(Vn)return Vn.index;if(Mn===0)return 0;var wn=qe(Xt[0]),sn=pe(xn).findIndex(function(hn){return hn===wn});return rt<sn?0:Mn}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),et}(),ee=o("8bbf");function be(et,ot){var rt=et[ot];return rt?rt():[]}function je(et){var ot=et.$slots,rt=et.realList,Ft=et.getKey,Xt=rt||[],Mn=["header","footer"].map(function(hn){return be(ot,hn)}),xn=k(Mn,2),Cn=xn[0],Vn=xn[1],wn=ot.item;if(!wn)throw new Error("draggable element must have an item slot");var sn=Xt.flatMap(function(hn,Qn){return wn({element:hn,index:Qn}).map(function(ir){return ir.key=Ft(hn),ir.props=v(v({},ir.props||{}),{},{"data-draggable":!0}),ir})});if(sn.length!==Xt.length)throw new Error("Item slot must have only one child");return{header:Cn,footer:Vn,default:sn}}function We(et){var ot=Z(et),rt=!j(et)&&!ot;return{transition:ot,externalComponent:rt,tag:rt?Object(ee.resolveComponent)(et):ot?ee.TransitionGroup:et}}function Qe(et){var ot=et.$slots,rt=et.tag,Ft=et.realList,Xt=et.getKey,Mn=je({$slots:ot,realList:Ft,getKey:Xt}),xn=We(rt);return new he({nodes:Mn,root:xn,realList:Ft})}function Je(et,ot){var rt=this;Object(ee.nextTick)(function(){return rt.$emit(et.toLowerCase(),ot)})}function st(et){var ot=this;return function(rt,Ft){if(ot.realList!==null)return ot["onDrag".concat(et)](rt,Ft)}}function Pt(et){var ot=this,rt=st.call(this,et);return function(Ft,Xt){rt.call(ot,Ft,Xt),Je.call(ot,et,Ft)}}var Bt=null,Ht={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(ot){return ot}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Jt=["update:modelValue","change"].concat(pe([].concat(pe(ye.manageAndEmit),pe(ye.emit)).map(function(et){return et.toLowerCase()}))),fn=Object(ee.defineComponent)({name:"draggable",inheritAttrs:!1,props:Ht,emits:Jt,data:function(){return{error:!1}},render:function(){try{this.error=!1;var ot=this.$slots,rt=this.$attrs,Ft=this.tag,Xt=this.componentData,Mn=this.realList,xn=this.getKey,Cn=Qe({$slots:ot,tag:Ft,realList:Mn,getKey:xn});this.componentStructure=Cn;var Vn=ge({$attrs:rt,componentData:Xt});return Cn.render(ee.h,Vn)}catch(wn){return this.error=!0,Object(ee.h)("pre",{style:{color:"red"}},wn.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&R.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var ot=this;if(!this.error){var rt=this.$attrs,Ft=this.$el,Xt=this.componentStructure;Xt.updated();var Mn=me({$attrs:rt,callBackBuilder:{manageAndEmit:function(Vn){return Pt.call(ot,Vn)},emit:function(Vn){return Je.bind(ot,Vn)},manage:function(Vn){return st.call(ot,Vn)}}}),xn=Ft.nodeType===1?Ft:Ft.parentElement;this._sortable=new O.a(xn,Mn),this.targetDomElement=xn,xn.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var ot=this.list;return ot||this.modelValue},getKey:function(){var ot=this.itemKey;return typeof ot=="function"?ot:function(rt){return rt[ot]}}},watch:{$attrs:{handler:function(ot){var rt=this._sortable;rt&&oe(ot).forEach(function(Ft){var Xt=k(Ft,2),Mn=Xt[0],xn=Xt[1];rt.option(Mn,xn)})},deep:!0}},methods:{getUnderlyingVm:function(ot){return this.componentStructure.getUnderlyingVm(ot)||null},getUnderlyingPotencialDraggableComponent:function(ot){return ot.__draggable_component__},emitChanges:function(ot){var rt=this;Object(ee.nextTick)(function(){return rt.$emit("change",ot)})},alterList:function(ot){if(this.list){ot(this.list);return}var rt=pe(this.modelValue);ot(rt),this.$emit("update:modelValue",rt)},spliceList:function(){var ot=arguments,rt=function(Xt){return Xt.splice.apply(Xt,pe(ot))};this.alterList(rt)},updatePosition:function(ot,rt){var Ft=function(Mn){return Mn.splice(rt,0,Mn.splice(ot,1)[0])};this.alterList(Ft)},getRelatedContextFromMoveEvent:function(ot){var rt=ot.to,Ft=ot.related,Xt=this.getUnderlyingPotencialDraggableComponent(rt);if(!Xt)return{component:Xt};var Mn=Xt.realList,xn={list:Mn,component:Xt};if(rt!==Ft&&Mn){var Cn=Xt.getUnderlyingVm(Ft)||{};return v(v({},Cn),xn)}return xn},getVmIndexFromDomIndex:function(ot){return this.componentStructure.getVmIndexFromDomIndex(ot,this.targetDomElement)},onDragStart:function(ot){this.context=this.getUnderlyingVm(ot.item),ot.item._underlying_vm_=this.clone(this.context.element),Bt=ot.item},onDragAdd:function(ot){var rt=ot.item._underlying_vm_;if(rt!==void 0){U(ot.item);var Ft=this.getVmIndexFromDomIndex(ot.newIndex);this.spliceList(Ft,0,rt);var Xt={element:rt,newIndex:Ft};this.emitChanges({added:Xt})}},onDragRemove:function(ot){if(q(this.$el,ot.item,ot.oldIndex),ot.pullMode==="clone"){U(ot.clone);return}var rt=this.context,Ft=rt.index,Xt=rt.element;this.spliceList(Ft,1);var Mn={element:Xt,oldIndex:Ft};this.emitChanges({removed:Mn})},onDragUpdate:function(ot){U(ot.item),q(ot.from,ot.item,ot.oldIndex);var rt=this.context.index,Ft=this.getVmIndexFromDomIndex(ot.newIndex);this.updatePosition(rt,Ft);var Xt={element:this.context.element,oldIndex:rt,newIndex:Ft};this.emitChanges({moved:Xt})},computeFutureIndex:function(ot,rt){if(!ot.element)return 0;var Ft=pe(rt.to.children).filter(function(Cn){return Cn.style.display!=="none"}),Xt=Ft.indexOf(rt.related),Mn=ot.component.getVmIndexFromDomIndex(Xt),xn=Ft.indexOf(Bt)!==-1;return xn||!rt.willInsertAfter?Mn:Mn+1},onDragMove:function(ot,rt){var Ft=this.move,Xt=this.realList;if(!Ft||!Xt)return!0;var Mn=this.getRelatedContextFromMoveEvent(ot),xn=this.computeFutureIndex(Mn,ot),Cn=v(v({},this.context),{},{futureIndex:xn}),Vn=v(v({},ot),{},{relatedContext:Mn,draggedContext:Cn});return Ft(Vn,rt)},onDragEnd:function(){Bt=null}}}),pn=fn;s.default=pn},fb6a:function(i,s,o){var a=o("23e7"),l=o("861d"),c=o("e8b5"),d=o("23cb"),p=o("50c4"),v=o("fc6a"),m=o("8418"),x=o("b622"),E=o("1dde"),T=o("ae40"),D=E("slice"),k=T("slice",{ACCESSORS:!0,0:0,1:2}),B=x("species"),W=[].slice,Q=Math.max;a({target:"Array",proto:!0,forced:!D||!k},{slice:function(fe,O){var U=v(this),q=p(U.length),R=d(fe,q),$=d(O===void 0?q:O,q),X,K,F;if(c(U)&&(X=U.constructor,typeof X=="function"&&(X===Array||c(X.prototype))?X=void 0:l(X)&&(X=X[B],X===null&&(X=void 0)),X===Array||X===void 0))return W.call(U,R,$);for(K=new(X===void 0?Array:X)(Q($-R,0)),F=0;R<$;R++,F++)R in U&&m(K,F,U[R]);return K.length=F,K}})},fc6a:function(i,s,o){var a=o("44ad"),l=o("1d80");i.exports=function(c){return a(l(c))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var a=o("4930");i.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(VE);var yK=VE.exports;const bK=E_(yK),_K={class:"min-h-full bg-gray-50"},wK={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},xK={class:"sm:flex sm:items-center"},LK={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},SK={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10"},CK={class:"mt-6 bg-white shadow rounded-lg p-4"},EK={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},MK=["value"],PK={key:0,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},kK={key:1,class:"mt-6 pb-4"},AK={key:0,class:"p-6 text-center bg-white shadow rounded-lg mb-4"},TK={key:1,class:"md:flex md:space-x-4 md:overflow-x-auto gap-4 grid grid-cols-1"},DK={class:"bg-white rounded-lg shadow overflow-hidden"},IK={class:"flex items-center"},OK={class:"flex items-center"},NK={class:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full"},BK={class:"p-2"},RK={class:"min-h-[100px] draggable-container"},FK={class:"note-container"},jK={class:"bg-white rounded-md shadow-sm border border-gray-200 overflow-hidden"},zK={class:"flex items-center"},$K={key:0,class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},UK={class:"text-sm font-medium text-gray-900 truncate"},VK={class:"px-3 py-2"},HK={class:"text-sm text-gray-500 line-clamp-2"},GK={class:"px-3 py-2 bg-gray-50 border-t border-gray-100 flex items-center space-x-2"},WK={class:"text-xs text-gray-500"},qK={key:0,class:"text-xs text-gray-700"},YK={class:"flex space-x-1 ml-auto"},KK={key:0,class:"text-xs text-primary-500 flex items-center mr-1",title:"Note géolocalisée"},ZK={key:1,class:"text-xs text-gray-400 flex items-center mr-1",title:"Note simple"},XK=["onClick"],JK=["onClick"],QK=["onClick"],eZ=["onClick"],tZ={key:0,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},nZ={class:"flex items-center justify-center min-h-screen w-full"},rZ={class:"relative bg-white w-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden mx-auto my-auto"},iZ={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3 p-4 md:px-6"},sZ=_s({__name:"NotesView",setup(t){const e=_t([]),n=Cm(),r=Zl(),i=hf(),s=co();xp();const o=_t(!0),a=_t(!1),l=_t(!1),c=_t(null),d=_t(null),p=_t("info");_t(null);const v=_t(window.innerWidth<768),m=()=>{v.value=window.innerWidth<768},x=qn(()=>{const Z=i.getSortedColumns;return console.log("[NotesView][columnsForDrag] Colonnes triées:",Z),Z}),E=[{id:Ei.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:Ei.COMPANY,title:"Entreprise",description:"Visible uniquement par l'entreprise"},{id:Ei.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et ses salariés"},{id:Ei.VISITOR,title:"Visiteurs",description:"Visible par tous (entreprise, salariés et visiteurs)"}],T=wu({search:"",date:"",accessLevel:""});function D(Z){if(!Z)return"Date non définie";try{const ae=new Date(Z);return isNaN(ae.getTime())?(console.warn("[safeFormatDate] Date invalide:",Z),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(ae)}catch(ae){return console.error("[safeFormatDate] Erreur lors du formatage de la date:",ae),"Date invalide"}}function k(Z){if(!Z)return null;try{const ae=new Date(Z);return isNaN(ae.getTime())?(console.warn("[safeDate] Date invalide:",Z),null):ae}catch(ae){return console.error("[safeDate] Erreur lors de la création de la date:",ae),null}}function B(Z){return D(Z)}const W=qn(()=>{let Z=i.getAccessibleNotes;if(T.search){const ae=T.search.toLowerCase();Z=Z.filter(de=>de.title.toLowerCase().includes(ae)||de.description.toLowerCase().includes(ae))}if(T.accessLevel&&(Z=Z.filter(ae=>ae.accessLevel===T.accessLevel)),T.date){const ae=new Date;ae.setHours(0,0,0,0);const de=new Date(ae);de.setDate(ae.getDate()-ae.getDay());const ge=new Date(ae.getFullYear(),ae.getMonth(),1);Z=Z.filter(me=>{const oe=k(me.createdAt);return oe?T.date==="today"?oe>=ae:T.date==="week"?oe>=de:T.date==="month"?oe>=ge:!0:!1})}return Z}),Q=qn(()=>Z=>W.value.filter(ae=>ae.columnId===Z));function pe(Z){if(Z==null)return"Non défini";switch(Z){case Ei.PRIVATE:return"Privé";case Ei.COMPANY:return"Entreprise";case Ei.EMPLOYEE:return"Salariés";case Ei.VISITOR:return"Visiteurs";default:return"Non défini"}}function fe(Z){if(Z==null)return"#9CA3AF";switch(Z){case Ei.PRIVATE:return"#9CA3AF";case Ei.COMPANY:return"#EF4444";case Ei.EMPLOYEE:return"#F59E0B";case Ei.VISITOR:return"#10B981";default:return"#6B7280"}}Ds(()=>{console.log("[NotesView] Composant monté"),O().then(()=>{console.log("[NotesView] Données chargées avec succès")}).catch(Z=>{console.error("[NotesView] Erreur lors du chargement des données:",Z),r.error("Erreur lors du chargement des données")}),document.addEventListener("click",j),window.addEventListener("resize",m)});async function O(){var Z;console.log(`
[NotesView][loadInitialData] Début du chargement des données`);try{if(o.value=!0,console.log("[NotesView][loadInitialData] Chargement des colonnes..."),await i.loadColumns(),console.log("[NotesView][loadInitialData] Colonnes chargées:",i.columns),s.isAdmin)try{const re=await xa.getEntreprises();e.value=re.data,console.log("[NotesView][loadInitialData] Entreprises chargées:",e.value)}catch(re){console.error("[NotesView][loadInitialData] Erreur chargement entreprises:",re)}console.log("[NotesView][loadInitialData] Chargement des notes...");const ae={};!s.isAdmin&&((Z=s.user)!=null&&Z.enterprise_id)&&(ae.enterprise_id=s.user.enterprise_id,console.log(`[NotesView][loadInitialData] Filtrage des notes par entreprise: ${ae.enterprise_id}`));const de=await sa.getNotes(ae);console.log("[NotesView][loadInitialData] Notes reçues:",de.data),de.data.length>0?(console.log("[NotesView][loadInitialData] Détails des notes:"),de.data.forEach((re,Te)=>{console.log(`Note ${Te+1}:`,{id:re.id,title:re.title,columnId:re.column||re.column_id,access_level:re.access_level,column:re.column})})):console.warn("[NotesView][loadInitialData] Aucune note reçue du backend!");const ge=i.columns.map(re=>re.id),me=de.data.filter(re=>{const Te=(re.column||re.column_id||"").toString();return Te===""||!ge.includes(Te)});if(me.length>0){console.warn(`[NotesView][loadInitialData] ${me.length} notes avec des colonnes invalides:`,me),console.log("[NotesView][loadInitialData] Assignation des notes à la colonne À faire (2)");for(const re of me)try{await sa.updateNote(re.id,{column:"2"})}catch(Te){console.error(`[NotesView][loadInitialData] Erreur lors de l'assignation de la note ${re.id} à la colonne À faire:`,Te)}}const oe=de.data.map(re=>{let Te;if(s.isAdmin&&re.enterprise_id!=null)if(re.enterprise_name)Te=re.enterprise_name;else{const Le=e.value.find(qe=>qe.id===re.enterprise_id);Te=Le?bl(Le):void 0}return{id:re.id,title:re.title,description:re.description,location:re.location,columnId:(re.column||re.column_id||"2").toString(),access_level:re.access_level,style:re.style||{},comments:re.comments||[],photos:re.photos||[],order:re.order||0,createdAt:re.created_at,updatedAt:re.updated_at,enterprise_id:re.enterprise_id,enterprise_name:Te}});i.notes.length=0,oe.forEach(re=>{i.addNote(re)}),console.log("[NotesView][loadInitialData] Notes chargées dans le store");for(const re of i.columns){const Te=i.getNotesByColumn(re.id);console.log(`[NotesView][loadInitialData] Colonne ${re.title} (${re.id}): ${Te.length} notes`),Te.length>0&&Te.forEach(Le=>{console.log(`  - Note ID=${Le.id}, Titre="${Le.title}", Niveau d'accès=${Le.accessLevel}, Colonne=${Le.columnId}`)})}}catch(ae){console.error("[NotesView][loadInitialData] Erreur:",ae),r.error("Erreur lors du chargement des données")}finally{o.value=!1,console.log("[NotesView][loadInitialData] Chargement terminé")}}function U(){n.push({path:"/",query:{tool:"Note"}})}async function q(Z){if(!Z.location){r.warning("Cette note n'est pas géolocalisée");return}try{const de=(await sa.getNote(Z.id)).data,ge=de.plan;console.log("[NotesView][viewOnMap] Détails de la note récupérés:",de),n.push({path:"/",query:{lat:Array.isArray(Z.location)?Z.location[0].toString():Z.location.coordinates[1].toString(),lng:Array.isArray(Z.location)?Z.location[1].toString():Z.location.coordinates[0].toString(),noteId:Z.id.toString(),planId:ge?ge.toString():void 0}})}catch(ae){console.error("[NotesView][viewOnMap] Erreur lors de la récupération des détails de la note:",ae),r.error("Erreur lors de l'ouverture de la note sur la carte")}}function R(Z){if(!Z.location){r.warning("Cette note n'est pas géolocalisée");return}let ae,de;Array.isArray(Z.location)?(ae=Z.location[0],de=Z.location[1]):(ae=Z.location.coordinates[1],de=Z.location.coordinates[0]);const ge=`https://www.google.com/maps/dir/?api=1&destination=${ae},${de}`;window.open(ge,"_blank")}function $(Z){d.value=JSON.parse(JSON.stringify(Z)),p.value="info",l.value=!0}async function X(Z){var de,ge;console.log("[NotesView][handleNoteSave] Note sauvegardée:",Z);let ae=Z.enterprise_id;if(ae==null&&(s.isAdmin?ae=null:s.isEntreprise&&s.user?ae=s.user.id:s.isSalarie&&((de=s.user)!=null&&de.enterprise_id)?ae=s.user.enterprise_id:s.isVisiteur&&s.user?ae=s.user.enterprise_id??null:!s.isAdmin&&((ge=s.user)!=null&&ge.enterprise_id)&&(ae=s.user.enterprise_id),console.log("[NotesView][handleNoteSave] Enterprise ID déterminé automatiquement:",ae),ae!==null&&Z.id&&i.updateNote(Z.id,{enterprise_id:ae})),ae!==null&&Z.id){const me=i.notes.findIndex(oe=>oe.id===Z.id);if(me!==-1&&!Z.enterprise_name){const oe=e.value.find(re=>re.id===ae);oe&&(i.notes[me].enterprise_name=bl(oe))}}}function K(Z){c.value=Z,a.value=!0}async function F(){if(c.value)try{try{await sa.deleteNote(c.value.id)}catch(Z){if(Z.response&&Z.response.status===404)console.log("[NotesView][deleteNote] Note non trouvée dans le backend (404), suppression locale uniquement");else throw Z}i.removeNote(c.value.id),r.success("Note supprimée avec succès")}catch(Z){console.error("Erreur lors de la suppression de la note:",Z),r.error("Erreur lors de la suppression de la note")}finally{a.value=!1,c.value=null}}async function N(Z,ae){console.log("[NotesView][onDragChange] Événement:",Z),console.log("[NotesView][onDragChange] Colonne cible:",ae);try{if(Z.added){const{element:de}=Z.added;console.log("[NotesView][onDragChange] Note à déplacer:",de);const ge=typeof de=="object"&&de.id?de.id:null;if(!ge)throw console.error("[NotesView][onDragChange] ID de note invalide:",de),new Error("ID de note invalide");i.moveNote(ge,ae);const oe=Q.value(ae).map(Te=>Te.id);i.reorderNotes(ae,oe);const re=i.getColumnById(ae);r.success(`Note déplacée vers ${(re==null?void 0:re.title)||"une autre colonne"}`),await J(ge,{columnId:ae})}if(Z.moved){const de=Q.value(ae),ge=de.map(me=>me.id);i.reorderNotes(ae,ge),r.success("Ordre des notes mis à jour");for(const[me,oe]of de.entries())await J(oe.id,{order:me})}}catch(de){console.error("[NotesView][onDragChange] Erreur:",de),r.error("Une erreur est survenue lors du déplacement de la note")}}async function J(Z,ae){console.log("[NotesView][updateNoteInBackend] Mise à jour de la note:",Z,ae);try{const de=i.notes.find(oe=>oe.id===Z);if(!de){console.error("[NotesView][updateNoteInBackend] Note non trouvée:",Z);return}const ge={...ae};if(ae.columnId){const oe=i.getColumnById(ae.columnId);oe?(console.log(`[NotesView][updateNoteInBackend] Mise à jour de la colonne: ${oe.id} (${oe.title})`),ge.column=oe.id,delete ge.columnId,delete ge.column_id):console.warn(`[NotesView][updateNoteInBackend] Colonne non trouvée: ${ae.columnId}`)}const me={...de,...ge,updatedAt:new Date().toISOString()};console.log("[NotesView][updateNoteInBackend] Données envoyées au backend:",me),await sa.updateNote(Z,me),console.log("[NotesView][updateNoteInBackend] Note mise à jour avec succès")}catch(de){throw console.error("[NotesView][updateNoteInBackend] Erreur:",de),de}}function Y(){var ae;let Z=null;s.isAdmin?Z=null:s.isEntreprise&&s.user?Z=s.user.id:s.isSalarie&&((ae=s.user)!=null&&ae.enterprise_id)?Z=s.user.enterprise_id:s.isVisiteur&&s.user&&(console.log("[NotesView][createSimpleNote] Utilisateur visiteur - recherche ID entreprise"),Z=s.user.enterprise_id??null),console.log("[NotesView][createSimpleNote] Enterprise ID déterminé:",Z),d.value={id:"",title:"Nouvelle note",description:"",location:null,columnId:i.getDefaultColumn.id,accessLevel:Ei.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:[],photos:[],enterprise_id:Z},l.value=!0,p.value="info"}const ye=_t(null),Ce=_t(!1);function He(){Ce.value=!Ce.value}function j(Z){ye.value&&!ye.value.contains(Z.target)&&(Ce.value=!1)}return Ds(()=>{document.addEventListener("click",j),window.addEventListener("resize",m)}),Ld(()=>{document.removeEventListener("click",j),window.removeEventListener("resize",m)}),(Z,ae)=>{var de,ge;return De(),Ne("div",_K,[C("div",wK,[C("div",xK,[ae[6]||(ae[6]=C("div",{class:"sm:flex-auto"},[C("h1",{class:"text-2xl font-semibold text-gray-900"},"Notes"),C("p",{class:"mt-2 text-sm text-gray-700"}," Liste de toutes vos notes. ")],-1)),C("div",LK,[C("div",{class:"relative",ref_key:"dropdownRef",ref:ye},[C("button",{onClick:He,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},ae[5]||(ae[5]=[Ir(" Créer "),C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])),Ce.value?(De(),Ne("div",SK,[C("div",{class:"py-1"},[C("button",{onClick:Y,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note simple "),C("button",{onClick:U,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note géolocalisée ")])])):Wt("",!0)],512)])]),C("div",CK,[C("div",EK,[C("div",null,[ae[7]||(ae[7]=C("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),On(C("input",{type:"text",id:"search","onUpdate:modelValue":ae[0]||(ae[0]=me=>T.search=me),placeholder:"Rechercher par titre ou description...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[ui,T.search]])]),C("div",null,[ae[9]||(ae[9]=C("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),On(C("select",{id:"date","onUpdate:modelValue":ae[1]||(ae[1]=me=>T.date=me),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},ae[8]||(ae[8]=[C("option",{value:""},"Toutes les dates",-1),C("option",{value:"today"},"Aujourd'hui",-1),C("option",{value:"week"},"Cette semaine",-1),C("option",{value:"month"},"Ce mois",-1)]),512),[[Mi,T.date]])]),C("div",null,[ae[11]||(ae[11]=C("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accès",-1)),On(C("select",{id:"accessLevel","onUpdate:modelValue":ae[2]||(ae[2]=me=>T.accessLevel=me),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[ae[10]||(ae[10]=C("option",{value:""},"Tous les niveaux",-1)),(De(),Ne(_n,null,Wn(E,me=>C("option",{key:me.id,value:me.id},Tt(me.title),9,MK)),64))],512),[[Mi,T.accessLevel]])])])]),o.value?(De(),Ne("div",PK,ae[12]||(ae[12]=[C("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),C("p",{class:"mt-2 text-sm text-gray-500"},"Chargement des notes...",-1)]))):(De(),Ne("div",kK,[W.value.length===0?(De(),Ne("div",AK,ae[13]||(ae[13]=[C("p",{class:"text-sm text-gray-500"},"Aucune note trouvée",-1)]))):Wt("",!0),W.value.length>0?(De(),Ne("div",TK,[(De(!0),Ne(_n,null,Wn(x.value,me=>(De(),Ne("div",{key:me.id,class:"column-wrapper md:w-80 md:flex-shrink-0 mb-4 md:mb-0"},[C("div",DK,[C("div",{class:"p-3 flex items-center justify-between no-select",style:Yl({backgroundColor:me.color+"20",borderBottom:"2px solid "+me.color})},[C("div",IK,[C("h3",{class:"text-sm font-semibold",style:Yl({color:me.color})},Tt(me.title),5)]),C("div",OK,[C("span",NK,Tt(Q.value(me.id).length),1)])],4),C("div",BK,[C("div",RK,[Xr(bn(bK),{list:Q.value(me.id),class:"space-y-2 empty-column-drop-zone",group:"notes","item-key":"id",handle:v.value?null:".note-drag-handle",onChange:oe=>N(oe,me.id),animation:150,"ghost-class":"ghost-card","chosen-class":"chosen","drag-class":"dragging",disabled:v.value},{item:Wl(({element:oe})=>[C("div",FK,[C("div",jK,[C("div",{class:xi(["p-3 flex items-center justify-between",{"note-drag-handle cursor-move":!v.value,"no-select":!0}])},[C("div",zK,[v.value?Wt("",!0):(De(),Ne("svg",$K,ae[14]||(ae[14]=[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"},null,-1)]))),C("h4",UK,Tt(oe.title),1)]),C("div",null,[C("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:Yl({backgroundColor:fe(oe.accessLevel)+"20",color:fe(oe.accessLevel)})},Tt(pe(oe.accessLevel)||"Non défini"),5)])],2),C("div",VK,[C("p",HK,Tt(oe.description||"Aucune description"),1)]),C("div",GK,[C("span",WK,Tt(oe.updatedAt?B(oe.updatedAt):oe.createdAt?B(oe.createdAt):"Date non définie"),1),bn(s).isAdmin?(De(),Ne("span",qK,Tt(oe.enterprise_name||"Non assignée"),1)):Wt("",!0),C("div",YK,[oe.location?(De(),Ne("span",KK,ae[15]||(ae[15]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))):(De(),Ne("span",ZK,ae[16]||(ae[16]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]))),oe.location?(De(),Ne(_n,{key:2},[C("button",{onClick:re=>R(oe),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Ouvrir dans Google Maps"},ae[17]||(ae[17]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),8,XK),C("button",{onClick:re=>q(oe),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Voir sur la carte"},ae[18]||(ae[18]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)]),8,JK)],64)):Wt("",!0),C("button",{onClick:re=>$(oe),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Éditer la note"},ae[19]||(ae[19]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,QK),C("button",{onClick:re=>K(oe),class:"p-1 text-gray-400 hover:text-red-500 focus:outline-none",title:"Supprimer la note"},ae[20]||(ae[20]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,eZ)])])])])]),"empty-content":Wl(()=>ae[21]||(ae[21]=[C("div",{class:"p-4 text-center text-gray-400 text-sm italic"}," Aucune note dans cette colonne ",-1)])),_:2},1032,["list","handle","onChange","disabled"])])])])]))),128))])):Wt("",!0)]))]),a.value?(De(),Ne("div",tZ,[C("div",nZ,[ae[23]||(ae[23]=C("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),C("div",rZ,[ae[22]||(ae[22]=wl('<div class="p-4 md:p-6" data-v-00a50585><div class="flex items-start" data-v-00a50585><div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100" data-v-00a50585><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-00a50585><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-00a50585></path></svg></div><div class="ml-4 flex-1" data-v-00a50585><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title" data-v-00a50585> Supprimer la note </h3><div class="mt-2" data-v-00a50585><p class="text-sm text-gray-500" data-v-00a50585> Êtes-vous sûr de vouloir supprimer cette note ? Cette action est irréversible. </p></div></div></div></div>',1)),C("div",iZ,[C("button",{onClick:F,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm"}," Supprimer "),C("button",{onClick:ae[3]||(ae[3]=me=>a.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])])])])):Wt("",!0),l.value?(De(),xo(yE,{key:1,note:d.value,"is-new-note":!((de=d.value)!=null&&de.id),location:(ge=d.value)==null?void 0:ge.location,onClose:ae[4]||(ae[4]=me=>l.value=!1),onSave:X},null,8,["note","is-new-note","location"])):Wt("",!0)])}}}),oZ=Qc(sZ,[["__scopeId","data-v-00a50585"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Pm(t){return t+.5|0}const ad=(t,e,n)=>Math.max(Math.min(t,n),e);function yg(t){return ad(Pm(t*2.55),0,255)}function fd(t){return ad(Pm(t*255),0,255)}function wh(t){return ad(Pm(t/2.55)/100,0,1)}function R5(t){return ad(Pm(t*100),0,100)}const Ru={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Cb=[..."0123456789ABCDEF"],aZ=t=>Cb[t&15],lZ=t=>Cb[(t&240)>>4]+Cb[t&15],S0=t=>(t&240)>>4===(t&15),uZ=t=>S0(t.r)&&S0(t.g)&&S0(t.b)&&S0(t.a);function cZ(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Ru[t[1]]*17,g:255&Ru[t[2]]*17,b:255&Ru[t[3]]*17,a:e===5?Ru[t[4]]*17:255}:(e===7||e===9)&&(n={r:Ru[t[1]]<<4|Ru[t[2]],g:Ru[t[3]]<<4|Ru[t[4]],b:Ru[t[5]]<<4|Ru[t[6]],a:e===9?Ru[t[7]]<<4|Ru[t[8]]:255})),n}const hZ=(t,e)=>t<255?e(t):"";function dZ(t){var e=uZ(t)?aZ:lZ;return t?"#"+e(t.r)+e(t.g)+e(t.b)+hZ(t.a,e):void 0}const fZ=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function tM(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function pZ(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function gZ(t,e,n){const r=tM(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function mZ(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function R_(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,d;return s!==o&&(d=s-o,c=a>.5?d/(2-s-o):d/(s+o),l=mZ(n,r,i,d,s),l=l*60+.5),[l|0,c||0,a]}function F_(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(fd)}function j_(t,e,n){return F_(tM,t,e,n)}function vZ(t,e,n){return F_(gZ,t,e,n)}function yZ(t,e,n){return F_(pZ,t,e,n)}function nM(t){return(t%360+360)%360}function bZ(t){const e=fZ.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?yg(+e[5]):fd(+e[5]));const i=nM(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=vZ(i,s,o):e[1]==="hsv"?r=yZ(i,s,o):r=j_(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function _Z(t,e){var n=R_(t);n[0]=nM(n[0]+e),n=j_(n),t.r=n[0],t.g=n[1],t.b=n[2]}function wZ(t){if(!t)return;const e=R_(t),n=e[0],r=R5(e[1]),i=R5(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${wh(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const F5={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},j5={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function xZ(){const t={},e=Object.keys(j5),n=Object.keys(F5);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,F5[s]);s=parseInt(j5[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let C0;function LZ(t){C0||(C0=xZ(),C0.transparent=[0,0,0,0]);const e=C0[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const SZ=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function CZ(t){const e=SZ.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?yg(o):ad(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?yg(r):ad(r,0,255)),i=255&(e[4]?yg(i):ad(i,0,255)),s=255&(e[6]?yg(s):ad(s,0,255)),{r,g:i,b:s,a:n}}}function EZ(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${wh(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const l2=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Gf=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function MZ(t,e,n){const r=Gf(wh(t.r)),i=Gf(wh(t.g)),s=Gf(wh(t.b));return{r:fd(l2(r+n*(Gf(wh(e.r))-r))),g:fd(l2(i+n*(Gf(wh(e.g))-i))),b:fd(l2(s+n*(Gf(wh(e.b))-s))),a:t.a+n*(e.a-t.a)}}function E0(t,e,n){if(t){let r=R_(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=j_(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function rM(t,e){return t&&Object.assign(e||{},t)}function z5(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=fd(t[3]))):(e=rM(t,{r:0,g:0,b:0,a:1}),e.a=fd(e.a)),e}function PZ(t){return t.charAt(0)==="r"?CZ(t):bZ(t)}class cm{constructor(e){if(e instanceof cm)return e;const n=typeof e;let r;n==="object"?r=z5(e):n==="string"&&(r=cZ(e)||LZ(e)||PZ(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=rM(this._rgb);return e&&(e.a=wh(e.a)),e}set rgb(e){this._rgb=z5(e)}rgbString(){return this._valid?EZ(this._rgb):void 0}hexString(){return this._valid?dZ(this._rgb):void 0}hslString(){return this._valid?wZ(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=MZ(this._rgb,e._rgb,n)),this}clone(){return new cm(this.rgb)}alpha(e){return this._rgb.a=fd(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Pm(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return E0(this._rgb,2,e),this}darken(e){return E0(this._rgb,2,-e),this}saturate(e){return E0(this._rgb,1,e),this}desaturate(e){return E0(this._rgb,1,-e),this}rotate(e){return _Z(this._rgb,e),this}}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function vh(){}const kZ=(()=>{let t=0;return()=>t++})();function Li(t){return t===null||typeof t>"u"}function Ts(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function hi(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function lo(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function gu(t,e){return lo(t)?t:e}function Gr(t,e){return typeof t>"u"?e:t}const AZ=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,iM=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function cs(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ui(t,e,n,r){let i,s,o;if(Ts(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(hi(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function Wv(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function qv(t){if(Ts(t))return t.map(qv);if(hi(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=qv(t[n[i]]);return e}return t}function sM(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function TZ(t,e,n,r){if(!sM(t))return;const i=e[t],s=n[t];hi(i)&&hi(s)?hm(i,s,r):e[t]=qv(s)}function hm(t,e,n){const r=Ts(e)?e:[e],i=r.length;if(!hi(t))return t;n=n||{};const s=n.merger||TZ;let o;for(let a=0;a<i;++a){if(o=r[a],!hi(o))continue;const l=Object.keys(o);for(let c=0,d=l.length;c<d;++c)s(l[c],t,o,n)}return t}function Ug(t,e){return hm(t,e,{merger:DZ})}function DZ(t,e,n){if(!sM(t))return;const r=e[t],i=n[t];hi(r)&&hi(i)?Ug(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=qv(i))}const $5={"":t=>t,x:t=>t.x,y:t=>t.y};function IZ(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function OZ(t){const e=IZ(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function bd(t,e){return($5[e]||($5[e]=OZ(e)))(t)}function z_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const dm=t=>typeof t<"u",_d=t=>typeof t=="function",U5=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function NZ(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const bs=Math.PI,ys=2*bs,BZ=ys+bs,Yv=Number.POSITIVE_INFINITY,RZ=bs/180,Eo=bs/2,$d=bs/4,V5=bs*2/3,ld=Math.log10,Kc=Math.sign;function Vg(t,e,n){return Math.abs(t-e)<n}function H5(t){const e=Math.round(t);t=Vg(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(ld(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function FZ(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function Sp(t){return!isNaN(parseFloat(t))&&isFinite(t)}function jZ(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function oM(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function gc(t){return t*(bs/180)}function $_(t){return t*(180/bs)}function G5(t){if(!lo(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function aM(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*bs&&(s+=ys),{angle:s,distance:i}}function Eb(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function zZ(t,e){return(t-e+BZ)%ys-bs}function mu(t){return(t%ys+ys)%ys}function fm(t,e,n,r){const i=mu(t),s=mu(e),o=mu(n),a=mu(s-i),l=mu(o-i),c=mu(i-s),d=mu(i-o);return i===s||i===o||r&&s===o||a>l&&c<d}function aa(t,e,n){return Math.max(e,Math.min(n,t))}function $Z(t){return aa(t,-32768,32767)}function Eh(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function U_(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const Mh=(t,e,n,r)=>U_(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),UZ=(t,e,n)=>U_(t,n,r=>t[r][e]>=n);function VZ(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const lM=["push","pop","shift","splice","unshift"];function HZ(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),lM.forEach(n=>{const r="_onData"+z_(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function W5(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(lM.forEach(s=>{delete t[s]}),delete t._chartjs)}function uM(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const cM=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function hM(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,cM.call(window,()=>{r=!1,t.apply(e,n)}))}}function GZ(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const V_=t=>t==="start"?"left":t==="end"?"right":"center",Ha=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,WZ=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function dM(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:d,minDefined:p,maxDefined:v}=o.getUserBounds();p&&(i=aa(Math.min(Mh(a,l,c).lo,n?r:Mh(e,l,o.getPixelForValue(c)).lo),0,r-1)),v?s=aa(Math.max(Mh(a,o.axis,d,!0).hi+1,n?0:Mh(e,l,o.getPixelForValue(d),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function fM(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const M0=t=>t===0||t===1,q5=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*ys/n)),Y5=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*ys/n)+1,Hg={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Eo)+1,easeOutSine:t=>Math.sin(t*Eo),easeInOutSine:t=>-.5*(Math.cos(bs*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>M0(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>M0(t)?t:q5(t,.075,.3),easeOutElastic:t=>M0(t)?t:Y5(t,.075,.3),easeInOutElastic(t){return M0(t)?t:t<.5?.5*q5(t*2,.1125,.45):.5+.5*Y5(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Hg.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Hg.easeInBounce(t*2)*.5:Hg.easeOutBounce(t*2-1)*.5+.5};function H_(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function K5(t){return H_(t)?t:new cm(t)}function u2(t){return H_(t)?t:new cm(t).saturate(.5).darken(.1).hexString()}const qZ=["x","y","borderWidth","radius","tension"],YZ=["color","borderColor","backgroundColor"];function KZ(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:YZ},numbers:{type:"number",properties:qZ}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function ZZ(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Z5=new Map;function XZ(t,e){e=e||{};const n=t+JSON.stringify(e);let r=Z5.get(n);return r||(r=new Intl.NumberFormat(t,e),Z5.set(n,r)),r}function km(t,e,n){return XZ(e,n).format(t)}const pM={values(t){return Ts(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=JZ(t,n)}const o=ld(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),km(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(ld(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?pM.numeric.call(this,t,e,n):""}};function JZ(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Ny={formatters:pM};function QZ(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ny.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const df=Object.create(null),Mb=Object.create(null);function Gg(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function c2(t,e,n){return typeof e=="string"?hm(Gg(t,e),n):hm(Gg(t,""),e)}class eX{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>u2(i.backgroundColor),this.hoverBorderColor=(r,i)=>u2(i.borderColor),this.hoverColor=(r,i)=>u2(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return c2(this,e,n)}get(e){return Gg(this,e)}describe(e,n){return c2(Mb,e,n)}override(e,n){return c2(df,e,n)}route(e,n,r,i){const s=Gg(this,e),o=Gg(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return hi(l)?Object.assign({},c,l):Gr(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var uo=new eX({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[KZ,ZZ,QZ]);function tX(t){return!t||Li(t.size)||Li(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Kv(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function nX(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,d,p,v;for(l=0;l<a;l++)if(p=n[l],p!=null&&!Ts(p))o=Kv(t,i,s,o,p);else if(Ts(p))for(c=0,d=p.length;c<d;c++)v=p[c],v!=null&&!Ts(v)&&(o=Kv(t,i,s,o,v));t.restore();const m=s.length/2;if(m>n.length){for(l=0;l<m;l++)delete i[s[l]];s.splice(0,m)}return o}function Ud(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function X5(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Pb(t,e,n,r){gM(t,e,n,r,null)}function gM(t,e,n,r,i){let s,o,a,l,c,d,p,v;const m=e.pointStyle,x=e.rotation,E=e.radius;let T=(x||0)*RZ;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(T),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(E)||E<=0)){switch(t.beginPath(),m){default:i?t.ellipse(n,r,i/2,E,0,0,ys):t.arc(n,r,E,0,ys),t.closePath();break;case"triangle":d=i?i/2:E,t.moveTo(n+Math.sin(T)*d,r-Math.cos(T)*E),T+=V5,t.lineTo(n+Math.sin(T)*d,r-Math.cos(T)*E),T+=V5,t.lineTo(n+Math.sin(T)*d,r-Math.cos(T)*E),t.closePath();break;case"rectRounded":c=E*.516,l=E-c,o=Math.cos(T+$d)*l,p=Math.cos(T+$d)*(i?i/2-c:l),a=Math.sin(T+$d)*l,v=Math.sin(T+$d)*(i?i/2-c:l),t.arc(n-p,r-a,c,T-bs,T-Eo),t.arc(n+v,r-o,c,T-Eo,T),t.arc(n+p,r+a,c,T,T+Eo),t.arc(n-v,r+o,c,T+Eo,T+bs),t.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*E,d=i?i/2:l,t.rect(n-d,r-l,2*d,2*l);break}T+=$d;case"rectRot":p=Math.cos(T)*(i?i/2:E),o=Math.cos(T)*E,a=Math.sin(T)*E,v=Math.sin(T)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+v,r-o),t.lineTo(n+p,r+a),t.lineTo(n-v,r+o),t.closePath();break;case"crossRot":T+=$d;case"cross":p=Math.cos(T)*(i?i/2:E),o=Math.cos(T)*E,a=Math.sin(T)*E,v=Math.sin(T)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o);break;case"star":p=Math.cos(T)*(i?i/2:E),o=Math.cos(T)*E,a=Math.sin(T)*E,v=Math.sin(T)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o),T+=$d,p=Math.cos(T)*(i?i/2:E),o=Math.cos(T)*E,a=Math.sin(T)*E,v=Math.sin(T)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o);break;case"line":o=i?i/2:Math.cos(T)*E,a=Math.sin(T)*E,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(T)*(i?i/2:E),r+Math.sin(T)*E);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Ph(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function By(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ry(t){t.restore()}function rX(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function iX(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function sX(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Li(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function oX(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,d=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,d),t.lineTo(a,d),t.stroke()}}function aX(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function ff(t,e,n,r,i,s={}){const o=Ts(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,sX(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&aX(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Li(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),oX(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function pm(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*bs,bs,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,bs,Eo,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Eo,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Eo,!0),t.lineTo(n+o.topLeft,r)}const lX=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,uX=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function cX(t,e){const n=(""+t).match(lX);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const hX=t=>+t||0;function G_(t,e){const n={},r=hi(e),i=r?Object.keys(e):e,s=hi(t)?r?o=>Gr(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=hX(s(o));return n}function mM(t){return G_(t,{top:"y",right:"x",bottom:"y",left:"x"})}function of(t){return G_(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ja(t){const e=mM(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ho(t,e){t=t||{},e=e||uo.font;let n=Gr(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=Gr(t.style,e.style);r&&!(""+r).match(uX)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Gr(t.family,e.family),lineHeight:cX(Gr(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Gr(t.weight,e.weight),string:""};return i.string=tX(i),i}function bg(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function dX(t,e,n){const{min:r,max:i}=t,s=iM(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Sd(t,e){return Object.assign(Object.create(t),e)}function W_(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=_M("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>W_([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return yM(a,l,()=>_X(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Q5(a).includes(l)},ownKeys(a){return Q5(a)},set(a,l,c){const d=a._storage||(a._storage=i());return a[l]=d[l]=c,delete a._keys,!0}})}function Cp(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:vM(t,r),setContext:s=>Cp(t,s,n,r),override:s=>Cp(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return yM(s,o,()=>pX(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function vM(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:_d(n)?n:()=>n,isIndexable:_d(r)?r:()=>r}}const fX=(t,e)=>t?t+z_(e):e,q_=(t,e)=>hi(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function yM(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=n();return t[e]=r,r}function pX(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return _d(a)&&o.isScriptable(e)&&(a=gX(e,a,t,n)),Ts(a)&&a.length&&(a=mX(e,a,t,o.isIndexable)),q_(e,a)&&(a=Cp(a,i,s&&s[e],o)),a}function gX(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),q_(t,l)&&(l=Y_(i._scopes,i,t,l)),l}function mX(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(hi(e[0])){const l=e,c=i._scopes.filter(d=>d!==l);e=[];for(const d of l){const p=Y_(c,i,t,d);e.push(Cp(p,s,o&&o[t],a))}}return e}function bM(t,e,n){return _d(t)?t(e,n):t}const vX=(t,e)=>t===!0?e:typeof t=="string"?bd(e,t):void 0;function yX(t,e,n,r,i){for(const s of e){const o=vX(n,s);if(o){t.add(o);const a=bM(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function Y_(t,e,n,r){const i=e._rootScopes,s=bM(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=J5(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=J5(a,o,s,l,r),l===null)?!1:W_(Array.from(a),[""],i,s,()=>bX(e,n,r))}function J5(t,e,n,r,i){for(;n;)n=yX(t,e,n,r,i);return n}function bX(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Ts(i)&&hi(n)?n:i||{}}function _X(t,e,n,r){let i;for(const s of e)if(i=_M(fX(s,t),n),typeof i<"u")return q_(t,i)?Y_(n,r,t,i):i}function _M(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function Q5(t){let e=t._keys;return e||(e=t._keys=wX(t._scopes)),e}function wX(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function wM(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,d;for(a=0,l=r;a<l;++a)c=a+n,d=e[c],o[a]={r:i.parse(bd(d,s),c)};return o}const xX=Number.EPSILON||1e-14,Ep=(t,e)=>e<t.length&&!t[e].skip&&t[e],xM=t=>t==="x"?"y":"x";function LX(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=Eb(s,i),l=Eb(o,s);let c=a/(a+l),d=l/(a+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const p=r*c,v=r*d;return{previous:{x:s.x-p*(o.x-i.x),y:s.y-p*(o.y-i.y)},next:{x:s.x+v*(o.x-i.x),y:s.y+v*(o.y-i.y)}}}function SX(t,e,n){const r=t.length;let i,s,o,a,l,c=Ep(t,0);for(let d=0;d<r-1;++d)if(l=c,c=Ep(t,d+1),!(!l||!c)){if(Vg(e[d],0,xX)){n[d]=n[d+1]=0;continue}i=n[d]/e[d],s=n[d+1]/e[d],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[d]=i*o*e[d],n[d+1]=s*o*e[d])}}function CX(t,e,n="x"){const r=xM(n),i=t.length;let s,o,a,l=Ep(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Ep(t,c+1),!a)continue;const d=a[n],p=a[r];o&&(s=(d-o[n])/3,a[`cp1${n}`]=d-s,a[`cp1${r}`]=p-s*e[c]),l&&(s=(l[n]-d)/3,a[`cp2${n}`]=d+s,a[`cp2${r}`]=p+s*e[c])}}function EX(t,e="x"){const n=xM(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=Ep(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Ep(t,o+1),!!l){if(c){const d=c[e]-l[e];i[o]=d!==0?(c[n]-l[n])/d:0}s[o]=a?c?Kc(i[o-1])!==Kc(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}SX(t,i,s),CX(t,s,e)}function P0(t,e,n){return Math.max(Math.min(t,n),e)}function MX(t,e){let n,r,i,s,o,a=Ph(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&Ph(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=P0(i.cp1x,e.left,e.right),i.cp1y=P0(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=P0(i.cp2x,e.left,e.right),i.cp2y=P0(i.cp2y,e.top,e.bottom)))}function PX(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")EX(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=LX(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&MX(t,n)}function K_(){return typeof window<"u"&&typeof document<"u"}function Z_(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Zv(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Fy=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function kX(t,e){return Fy(t).getPropertyValue(e)}const AX=["top","right","bottom","left"];function af(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=AX[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const TX=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function DX(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(TX(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function qd(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Fy(n),s=i.boxSizing==="border-box",o=af(i,"padding"),a=af(i,"border","width"),{x:l,y:c,box:d}=DX(t,n),p=o.left+(d&&a.left),v=o.top+(d&&a.top);let{width:m,height:x}=e;return s&&(m-=o.width+a.width,x-=o.height+a.height),{x:Math.round((l-p)/m*n.width/r),y:Math.round((c-v)/x*n.height/r)}}function IX(t,e,n){let r,i;if(e===void 0||n===void 0){const s=Z_(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Fy(s),l=af(a,"border","width"),c=af(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Zv(a.maxWidth,s,"clientWidth"),i=Zv(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||Yv,maxHeight:i||Yv}}const k0=t=>Math.round(t*10)/10;function OX(t,e,n,r){const i=Fy(t),s=af(i,"margin"),o=Zv(i.maxWidth,t,"clientWidth")||Yv,a=Zv(i.maxHeight,t,"clientHeight")||Yv,l=IX(t,e,n);let{width:c,height:d}=l;if(i.boxSizing==="content-box"){const v=af(i,"border","width"),m=af(i,"padding");c-=m.width+v.width,d-=m.height+v.height}return c=Math.max(0,c-s.width),d=Math.max(0,r?c/r:d-s.height),c=k0(Math.min(c,o,l.maxWidth)),d=k0(Math.min(d,a,l.maxHeight)),c&&!d&&(d=k0(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&d>l.height&&(d=l.height,c=k0(Math.floor(d*r))),{width:c,height:d}}function e3(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const NX=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};K_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function t3(t,e){const n=kX(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Yd(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function BX(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function RX(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Yd(t,i,n),a=Yd(i,s,n),l=Yd(s,e,n),c=Yd(o,a,n),d=Yd(a,l,n);return Yd(c,d,n)}const FX=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},jX=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function pp(t,e,n){return t?FX(e,n):jX()}function LM(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function SM(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function CM(t){return t==="angle"?{between:fm,compare:zZ,normalize:mu}:{between:Eh,compare:(e,n)=>e-n,normalize:e=>e}}function n3({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function zX(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=CM(r),l=e.length;let{start:c,end:d,loop:p}=t,v,m;if(p){for(c+=l,d+=l,v=0,m=l;v<m&&o(a(e[c%l][r]),i,s);++v)c--,d--;c%=l,d%=l}return d<c&&(d+=l),{start:c,end:d,loop:p,style:t.style}}function EM(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=CM(r),{start:d,end:p,loop:v,style:m}=zX(t,e,n),x=[];let E=!1,T=null,D,k,B;const W=()=>l(i,B,D)&&a(i,B)!==0,Q=()=>a(s,D)===0||l(s,B,D),pe=()=>E||W(),fe=()=>!E||Q();for(let O=d,U=d;O<=p;++O)k=e[O%o],!k.skip&&(D=c(k[r]),D!==B&&(E=l(D,i,s),T===null&&pe()&&(T=a(D,i)===0?O:U),T!==null&&fe()&&(x.push(n3({start:T,end:O,loop:v,count:o,style:m})),T=null),U=O,B=D));return T!==null&&x.push(n3({start:T,end:p,loop:v,count:o,style:m})),x}function MM(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=EM(r[i],t.points,e);s.length&&n.push(...s)}return n}function $X(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function UX(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function VX(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=$X(n,i,s,r);if(r===!0)return r3(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return r3(t,UX(n,o,l,c),n,e)}function r3(t,e,n,r){return!r||!r.setContext||!n?e:HX(t,e,n,r)}function HX(t,e,n,r){const i=t._chart.getContext(),s=i3(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let d=s,p=e[0].start,v=p;function m(x,E,T,D){const k=a?-1:1;if(x!==E){for(x+=l;n[x%l].skip;)x-=k;for(;n[E%l].skip;)E+=k;x%l!==E%l&&(c.push({start:x%l,end:E%l,loop:T,style:D}),d=D,p=E%l)}}for(const x of e){p=a?p:x.start;let E=n[p%l],T;for(v=p+1;v<=x.end;v++){const D=n[v%l];T=i3(r.setContext(Sd(i,{type:"segment",p0:E,p1:D,p0DataIndex:(v-1)%l,p1DataIndex:v%l,datasetIndex:o}))),GX(T,d)&&m(p,v-1,x.loop,d),E=D,d=T}p<v-1&&m(p,v-1,x.loop,d)}return c}function i3(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function GX(t,e){if(!e)return!1;const n=[],r=function(i,s){return H_(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class WX{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=cM.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var yh=new WX;const s3="transparent",qX={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=K5(t||s3),i=r.valid&&K5(e||s3);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class YX{constructor(e,n,r,i){const s=n[r];i=bg([e.to,i,s,e.from]);const o=bg([e.from,s,i]);this._active=!0,this._fn=e.fn||qX[e.type||typeof o],this._easing=Hg[e.easing]||Hg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=bg([e.to,n,i,e.from]),this._from=bg([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class PM{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!hi(e))return;const n=Object.keys(uo.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!hi(s))return;const o={};for(const a of n)o[a]=s[a];(Ts(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=ZX(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&KX(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const d=n[c];let p=s[c];const v=r.get(c);if(p)if(v&&p.active()){p.update(v,d,a);continue}else p.cancel();if(!v||!v.duration){e[c]=d;continue}s[c]=p=new YX(v,e,c,d),i.push(p)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return yh.add(this._chart,r),!0}}function KX(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function ZX(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function o3(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function XX(t,e,n){if(n===!1)return!1;const r=o3(t,n),i=o3(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function JX(t){let e,n,r,i;return hi(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function kM(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function a3(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(r.all)continue;break}c=t.values[l],lo(c)&&(s||e===0||Kc(e)===Kc(c))&&(e+=c)}return e}}function QX(t){const e=Object.keys(t),n=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],n[r]={x:s,y:t[s]};return n}function l3(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function eJ(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function tJ(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function nJ(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function u3(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function c3(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,d=eJ(s,o,r),p=e.length;let v;for(let m=0;m<p;++m){const x=e[m],{[l]:E,[c]:T}=x,D=x._stacks||(x._stacks={});v=D[c]=nJ(i,d,E),v[a]=T,v._top=u3(v,o,!0,r.type),v._bottom=u3(v,o,!1,r.type);const k=v._visualValues||(v._visualValues={});k[a]=T}}function h2(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function rJ(t,e){return Sd(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function iJ(t,e,n){return Sd(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function eg(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const d2=t=>t==="reset"||t==="none",h3=(t,e)=>e?t:Object.assign({},t),sJ=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:kM(n,!0),values:null};class vc{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=l3(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&eg(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(p,v,m,x)=>p==="x"?v:p==="r"?x:m,s=n.xAxisID=Gr(r.xAxisID,h2(e,"x")),o=n.yAxisID=Gr(r.yAxisID,h2(e,"y")),a=n.rAxisID=Gr(r.rAxisID,h2(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),d=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&W5(this._data,this),e._stacked&&eg(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(hi(n))this._data=QX(n);else if(r!==n){if(r){W5(r,this);const i=this._cachedMeta;eg(i),i._parsed=[]}n&&Object.isExtensible(n)&&HZ(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=l3(n.vScale,n),n.stack!==r.stack&&(i=!0,eg(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&c3(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],d,p,v;if(this._parsing===!1)r._parsed=i,r._sorted=!0,v=i;else{Ts(i[e])?v=this.parseArrayData(r,i,e,n):hi(i[e])?v=this.parseObjectData(r,i,e,n):v=this.parsePrimitiveData(r,i,e,n);const m=()=>p[a]===null||c&&p[a]<c[a];for(d=0;d<n;++d)r._parsed[d+e]=p=v[d],l&&(m()&&(l=!1),c=p);r._sorted=l}o&&c3(this,v)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),d=s===o,p=new Array(i);let v,m,x;for(v=0,m=i;v<m;++v)x=v+r,p[v]={[a]:d||s.parse(c[x],x),[l]:o.parse(n[x],x)};return p}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,d,p;for(l=0,c=i;l<c;++l)d=l+r,p=n[d],a[l]={x:s.parse(p[0],d),y:o.parse(p[1],d)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let d,p,v,m;for(d=0,p=i;d<p;++d)v=d+r,m=n[v],c[d]={x:s.parse(bd(m,a),v),y:o.parse(bd(m,l),v)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:kM(i,!0),values:n._stacks[e.axis]._visualValues};return a3(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=a3(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=sJ(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:p}=tJ(a);let v,m;function x(){m=i[v];const E=m[a.axis];return!lo(m[e.axis])||d>E||p<E}for(v=0;v<o&&!(!x()&&(this.updateRangeFromParsed(c,e,m,l),s));++v);if(s){for(v=o-1;v>=0;--v)if(!x()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],lo(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=JX(Gr(this.options.clip,XX(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let d;for(r.dataset&&r.dataset.draw(e,s,a,l),d=a;d<a+l;++d){const p=i[d];p.hidden||(p.active&&c?o.push(p):p.draw(e,s))}for(d=0;d<o.length;++d)o[d].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=iJ(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=rJ(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&dm(r);if(a)return h3(a,l);const c=this.chart.config,d=c.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],v=c.getOptionScopes(this.getDataset(),d),m=Object.keys(uo.elements[e]),x=()=>this.getContext(r,i,n),E=c.resolveNamedOptions(v,m,x,p);return E.$shared&&(E.$shared=l,s[o]=Object.freeze(h3(E,l))),E}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const d=this.chart.config,p=d.datasetAnimationScopeKeys(this._type,n),v=d.getOptionScopes(this.getDataset(),p);l=d.createResolver(v,this.getContext(e,r,n))}const c=new PM(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||d2(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){d2(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!d2(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&eg(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Xe(vc,"defaults",{}),Xe(vc,"datasetElementType",null),Xe(vc,"dataElementType",null);function oJ(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=uM(r.sort((i,s)=>i-s))}return t._cache.$bar}function aJ(t){const e=t.iScale,n=oJ(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(dm(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function lJ(t,e,n,r){const i=n.barThickness;let s,o;return Li(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function uJ(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function cJ(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function AM(t,e,n,r){return Ts(t)?cJ(t,e,n,r):e[n.axis]=n.parse(t,r),e}function d3(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,d,p,v;for(c=n,d=n+r;c<d;++c)v=e[c],p={},p[i.axis]=a||i.parse(o[c],c),l.push(AM(v,p,s,c));return l}function f2(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function hJ(t,e,n){return t!==0?Kc(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function dJ(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function fJ(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:d}=dJ(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=d:(s[f3(d,o,a,l)]=!0,i=c)),s[f3(i,o,a,l)]=!0,t.borderSkipped=s}function f3(t,e,n,r){return r?(t=pJ(t,e,n),t=p3(t,n,e)):t=p3(t,e,n),t}function pJ(t,e,n){return t===e?n:t===n?e:t}function p3(t,e,n){return t==="start"?e:t==="end"?n:t}function gJ(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class ov extends vc{parsePrimitiveData(e,n,r,i){return d3(e,n,r,i)}parseArrayData(e,n,r,i){return d3(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,d=o.axis==="x"?a:l,p=[];let v,m,x,E;for(v=r,m=r+i;v<m;++v)E=n[v],x={},x[s.axis]=s.parse(bd(E,c),v),p.push(AM(bd(E,d),x,o,v));return p}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=f2(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),d=this._getRuler(),{sharedOptions:p,includeOptions:v}=this._getSharedOptions(n,i);for(let m=n;m<n+r;m++){const x=this.getParsed(m),E=s||Li(x[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),T=this._calculateBarIndexPixels(m,d),D=(x._stacks||{})[a.axis],k={horizontal:c,base:E.base,enableBorderRadius:!D||f2(x._custom)||o===D._top||o===D._bottom,x:c?E.head:T.center,y:c?T.center:E.head,height:c?T.size:Math.abs(E.size),width:c?Math.abs(E.size):T.size};v&&(k.options=p||this.resolveDataElementOptions(m,e[m].active?"active":i));const B=k.options||e[m].options;fJ(k,B,D,o),gJ(k,B,d.ratio),this.updateElement(e[m],m,k,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=r.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),d=c&&c[l.vScale.axis];if(Li(d)||isNaN(d))return!0};for(const l of i)if(!(n!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||aJ(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,d=f2(c);let p=l[n.axis],v=0,m=r?this.applyStack(n,l,r):p,x,E;m!==p&&(v=m-p,m=p),d&&(p=c.barStart,m=c.barEnd-c.barStart,p!==0&&Kc(p)!==Kc(c.barEnd)&&(v=0),v+=p);const T=!Li(s)&&!d?s:v;let D=n.getPixelForValue(T);if(this.chart.getDataVisibility(e)?x=n.getPixelForValue(v+m):x=D,E=x-D,Math.abs(E)<o){E=hJ(E,n,a)*o,p===a&&(D-=E/2);const k=n.getPixelForDecimal(0),B=n.getPixelForDecimal(1),W=Math.min(k,B),Q=Math.max(k,B);D=Math.max(Math.min(D,Q),W),x=D+E,r&&!d&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(x)-n.getValueForPixel(D))}if(D===n.getPixelForValue(a)){const k=Kc(E)*n.getLineWidthForValue(a)/2;D+=k,E-=k}return{size:E,base:D,head:x,center:x+E/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=Gr(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,d=i.barThickness==="flex"?uJ(e,n,i,c):lJ(e,n,i,c),p=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=d.start+d.chunk*p+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&r[s].draw(this._ctx)}}Xe(ov,"id","bar"),Xe(ov,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Xe(ov,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class av extends vc{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,i){const s=super.parsePrimitiveData(e,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,n,r,i){const s=super.parseArrayData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=Gr(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,n,r,i){const s=super.parseObjectData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=Gr(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),d=o.axis,p=a.axis;for(let v=n;v<n+r;v++){const m=e[v],x=!s&&this.getParsed(v),E={},T=E[d]=s?o.getPixelForDecimal(.5):o.getPixelForValue(x[d]),D=E[p]=s?a.getBasePixel():a.getPixelForValue(x[p]);E.skip=isNaN(T)||isNaN(D),c&&(E.options=l||this.resolveDataElementOptions(v,m.active?"active":i),s&&(E.options.radius=0)),this.updateElement(m,v,E,i)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=Gr(r&&r._custom,s),i}}Xe(av,"id","bubble"),Xe(av,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Xe(av,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function mJ(t,e,n){let r=1,i=1,s=0,o=0;if(e<ys){const a=t,l=a+e,c=Math.cos(a),d=Math.sin(a),p=Math.cos(l),v=Math.sin(l),m=(B,W,Q)=>fm(B,a,l,!0)?1:Math.max(W,W*n,Q,Q*n),x=(B,W,Q)=>fm(B,a,l,!0)?-1:Math.min(W,W*n,Q,Q*n),E=m(0,c,p),T=m(Eo,d,v),D=x(bs,c,p),k=x(bs+Eo,d,v);r=(E-D)/2,i=(T-k)/2,s=-(E+D)/2,o=-(T+k)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class Jd extends vc{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(hi(r[e])){const{key:l="value"}=this._parsing;s=c=>+bd(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return gc(this.options.rotation-90)}_getCircumference(){return gc(this.options.circumference)}_getRotationExtents(){let e=ys,n=-ys;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(AZ(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:d,rotation:p}=this._getRotationExtents(),{ratioX:v,ratioY:m,offsetX:x,offsetY:E}=mJ(p,d,l),T=(r.width-o)/v,D=(r.height-o)/m,k=Math.max(Math.min(T,D)/2,0),B=iM(this.options.radius,k),W=Math.max(B*l,0),Q=(B-W)/this._getVisibleDatasetWeightTotal();this.offsetX=x*B,this.offsetY=E*B,i.total=this.calculateTotal(),this.outerRadius=B-Q*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-Q*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/ys)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,d=(a.left+a.right)/2,p=(a.top+a.bottom)/2,v=s&&c.animateScale,m=v?0:this.innerRadius,x=v?0:this.outerRadius,{sharedOptions:E,includeOptions:T}=this._getSharedOptions(n,i);let D=this._getRotation(),k;for(k=0;k<n;++k)D+=this._circumference(k,s);for(k=n;k<n+r;++k){const B=this._circumference(k,s),W=e[k],Q={x:d+this.offsetX,y:p+this.offsetY,startAngle:D,endAngle:D+B,circumference:B,outerRadius:x,innerRadius:m};T&&(Q.options=E||this.resolveDataElementOptions(k,W.active?"active":i)),D+=B,this.updateElement(W,k,Q,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?ys*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=km(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(Gr(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Xe(Jd,"id","doughnut"),Xe(Jd,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Xe(Jd,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Xe(Jd,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class lv extends vc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=dM(n,i,o);this._drawStart=a,this._drawCount=l,fM(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:d,includeOptions:p}=this._getSharedOptions(n,i),v=o.axis,m=a.axis,{spanGaps:x,segment:E}=this.options,T=Sp(x)?x:Number.POSITIVE_INFINITY,D=this.chart._animationsDisabled||s||i==="none",k=n+r,B=e.length;let W=n>0&&this.getParsed(n-1);for(let Q=0;Q<B;++Q){const pe=e[Q],fe=D?pe:{};if(Q<n||Q>=k){fe.skip=!0;continue}const O=this.getParsed(Q),U=Li(O[m]),q=fe[v]=o.getPixelForValue(O[v],Q),R=fe[m]=s||U?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,O,l):O[m],Q);fe.skip=isNaN(q)||isNaN(R)||U,fe.stop=Q>0&&Math.abs(O[v]-W[v])>T,E&&(fe.parsed=O,fe.raw=c.data[Q]),p&&(fe.options=d||this.resolveDataElementOptions(Q,pe.active?"active":i)),D||this.updateElement(pe,Q,fe,i),W=O}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Xe(lv,"id","line"),Xe(lv,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Xe(lv,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Wg extends vc{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=km(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return wM.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,d=c.xCenter,p=c.yCenter,v=c.getIndexAngle(0)-.5*bs;let m=v,x;const E=360/this.countVisibleElements();for(x=0;x<n;++x)m+=this._computeAngle(x,i,E);for(x=n;x<n+r;x++){const T=e[x];let D=m,k=m+this._computeAngle(x,i,E),B=o.getDataVisibility(x)?c.getDistanceFromCenterForValue(this.getParsed(x).r):0;m=k,s&&(l.animateScale&&(B=0),l.animateRotate&&(D=k=v));const W={x:d,y:p,innerRadius:0,outerRadius:B,startAngle:D,endAngle:k,options:this.resolveDataElementOptions(x,T.active?"active":i)};this.updateElement(T,x,W,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?gc(this.resolveDataElementOptions(e,n).angle||r):0}}Xe(Wg,"id","polarArea"),Xe(Wg,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Xe(Wg,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class kb extends Jd{}Xe(kb,"id","pie"),Xe(kb,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class uv extends vc{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return wM.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),d=s.getPointPositionForValue(a,this.getParsed(a).r),p=o?s.xCenter:d.x,v=o?s.yCenter:d.y,m={x:p,y:v,angle:d.angle,skip:isNaN(p)||isNaN(v),options:c};this.updateElement(l,a,m,i)}}}Xe(uv,"id","radar"),Xe(uv,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Xe(uv,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class cv extends vc{getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=dM(n,r,i);if(this._drawStart=s,this._drawCount=o,fM(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,d=this.resolveDataElementOptions(n,i),p=this.getSharedOptions(d),v=this.includeOptions(i,p),m=o.axis,x=a.axis,{spanGaps:E,segment:T}=this.options,D=Sp(E)?E:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||s||i==="none";let B=n>0&&this.getParsed(n-1);for(let W=n;W<n+r;++W){const Q=e[W],pe=this.getParsed(W),fe=k?Q:{},O=Li(pe[x]),U=fe[m]=o.getPixelForValue(pe[m],W),q=fe[x]=s||O?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,pe,l):pe[x],W);fe.skip=isNaN(U)||isNaN(q)||O,fe.stop=W>0&&Math.abs(pe[m]-B[m])>D,T&&(fe.parsed=pe,fe.raw=c.data[W]),v&&(fe.options=p||this.resolveDataElementOptions(W,Q.active?"active":i)),k||this.updateElement(Q,W,fe,i),B=pe}this.updateSharedOptions(p,i,d)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}Xe(cv,"id","scatter"),Xe(cv,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Xe(cv,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var vJ=Object.freeze({__proto__:null,BarController:ov,BubbleController:av,DoughnutController:Jd,LineController:lv,PieController:kb,PolarAreaController:Wg,RadarController:uv,ScatterController:cv});function Vd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class X_{constructor(e){Xe(this,"options");this.options=e||{}}static override(e){Object.assign(X_.prototype,e)}init(){}formats(){return Vd()}parse(){return Vd()}format(){return Vd()}add(){return Vd()}diff(){return Vd()}startOf(){return Vd()}endOf(){return Vd()}}var TM={_date:X_};function yJ(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?UZ:Mh;if(r){if(i._sharedOptions){const c=s[0],d=typeof c.getRange=="function"&&c.getRange(e);if(d){const p=l(s,e,n-d),v=l(s,e,n+d);return{lo:p.lo,hi:v.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function jy(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:d}=s[a],{lo:p,hi:v}=yJ(s[a],e,o,i);for(let m=p;m<=v;++m){const x=d[m];x.skip||r(x,c,m)}}}function bJ(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function p2(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||jy(t,n,e,function(a,l,c){!i&&!Ph(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function _J(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:d}=o.getProps(["startAngle","endAngle"],r),{angle:p}=aM(o,{x:e.x,y:e.y});fm(p,c,d)&&i.push({element:o,datasetIndex:a,index:l})}return jy(t,n,e,s),i}function wJ(t,e,n,r,i,s){let o=[];const a=bJ(n);let l=Number.POSITIVE_INFINITY;function c(d,p,v){const m=d.inRange(e.x,e.y,i);if(r&&!m)return;const x=d.getCenterPoint(i);if(!(!!s||t.isPointInArea(x))&&!m)return;const T=a(e,x);T<l?(o=[{element:d,datasetIndex:p,index:v}],l=T):T===l&&o.push({element:d,datasetIndex:p,index:v})}return jy(t,n,e,c),o}function g2(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?_J(t,e,n,i):wJ(t,e,n,r,i,s)}function g3(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return jy(t,n,e,(l,c,d)=>{l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:d}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var xJ={modes:{index(t,e,n,r){const i=qd(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?p2(t,i,s,r,o):g2(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const d=a[0].index,p=c.data[d];p&&!p.skip&&l.push({element:p,datasetIndex:c.index,index:d})}),l):[]},dataset(t,e,n,r){const i=qd(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?p2(t,i,s,r,o):g2(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let d=0;d<c.length;++d)a.push({element:c[d],datasetIndex:l,index:d})}return a},point(t,e,n,r){const i=qd(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return p2(t,i,s,r,o)},nearest(t,e,n,r){const i=qd(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return g2(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=qd(e,t);return g3(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=qd(e,t);return g3(t,i,"y",n.intersect,r)}}};const DM=["left","top","right","bottom"];function tg(t,e){return t.filter(n=>n.pos===e)}function m3(t,e){return t.filter(n=>DM.indexOf(n.pos)===-1&&n.box.axis===e)}function ng(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function LJ(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function SJ(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!DM.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function CJ(t,e){const n=SJ(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],d=c&&a.stackWeight/c.weight;a.horizontal?(a.width=d?d*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=d?d*i:l&&e.availableHeight)}return n}function EJ(t){const e=LJ(t),n=ng(e.filter(c=>c.box.fullSize),!0),r=ng(tg(e,"left"),!0),i=ng(tg(e,"right")),s=ng(tg(e,"top"),!0),o=ng(tg(e,"bottom")),a=m3(e,"x"),l=m3(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:tg(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function v3(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function IM(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function MJ(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!hi(i)){n.size&&(t[i]-=n.size);const p=r[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?s.height:s.width),n.size=p.size/p.count,t[i]+=n.size}s.getPadding&&IM(o,s.getPadding());const a=Math.max(0,e.outerWidth-v3(o,t,"left","right")),l=Math.max(0,e.outerHeight-v3(o,t,"top","bottom")),c=a!==t.w,d=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:d}:{same:d,other:c}}function PJ(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function kJ(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function _g(t,e,n,r){const i=[];let s,o,a,l,c,d;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,kJ(a.horizontal,e));const{same:p,other:v}=MJ(e,n,a,r);c|=p&&i.length,d=d||v,l.fullSize||i.push(a)}return c&&_g(i,e,n,r)||d}function A0(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function y3(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},d=a.stackWeight/c.weight||1;if(a.horizontal){const p=e.w*d,v=c.size||l.height;dm(c.start)&&(o=c.start),l.fullSize?A0(l,i.left,o,n.outerWidth-i.right-i.left,v):A0(l,e.left+c.placed,o,p,v),c.start=o,c.placed+=p,o=l.bottom}else{const p=e.h*d,v=c.size||l.width;dm(c.start)&&(s=c.start),l.fullSize?A0(l,s,i.top,v,n.outerHeight-i.bottom-i.top):A0(l,s,e.top+c.placed,v,p),c.start=s,c.placed+=p,s=l.right}}e.x=s,e.y=o}var Xa={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Ja(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=EJ(t.boxes),l=a.vertical,c=a.horizontal;Ui(t.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const d=l.reduce((E,T)=>T.box.options&&T.box.options.display===!1?E:E+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/d,hBoxMaxHeight:o/2}),v=Object.assign({},i);IM(v,Ja(r));const m=Object.assign({maxPadding:v,w:s,h:o,x:i.left,y:i.top},i),x=CJ(l.concat(c),p);_g(a.fullSize,m,p,x),_g(l,m,p,x),_g(c,m,p,x)&&_g(l,m,p,x),PJ(m),y3(a.leftAndTop,m,p,x),m.x+=m.w,m.y+=m.h,y3(a.rightAndBottom,m,p,x),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Ui(a.chartArea,E=>{const T=E.box;Object.assign(T,t.chartArea),T.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class OM{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class AJ extends OM{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const hv="$chartjs",TJ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},b3=t=>t===null||t==="";function DJ(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[hv]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",b3(i)){const s=t3(t,"width");s!==void 0&&(t.width=s)}if(b3(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=t3(t,"height");s!==void 0&&(t.height=s)}return t}const NM=NX?{passive:!0}:!1;function IJ(t,e,n){t.addEventListener(e,n,NM)}function OJ(t,e,n){t.canvas.removeEventListener(e,n,NM)}function NJ(t,e){const n=TJ[t.type]||t.type,{x:r,y:i}=qd(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Xv(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function BJ(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Xv(a.addedNodes,r),o=o&&!Xv(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function RJ(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Xv(a.removedNodes,r),o=o&&!Xv(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const gm=new Map;let _3=0;function BM(){const t=window.devicePixelRatio;t!==_3&&(_3=t,gm.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function FJ(t,e){gm.size||window.addEventListener("resize",BM),gm.set(t,e)}function jJ(t){gm.delete(t),gm.size||window.removeEventListener("resize",BM)}function zJ(t,e,n){const r=t.canvas,i=r&&Z_(r);if(!i)return;const s=hM((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,d=l.contentRect.height;c===0&&d===0||s(c,d)});return o.observe(i),FJ(t,s),o}function m2(t,e,n){n&&n.disconnect(),e==="resize"&&jJ(t)}function $J(t,e,n){const r=t.canvas,i=hM(s=>{t.ctx!==null&&n(NJ(s,t))},t);return IJ(r,e,i),i}class UJ extends OM{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(DJ(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[hv])return!1;const r=n[hv].initial;["height","width"].forEach(s=>{const o=r[s];Li(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[hv],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:BJ,detach:RJ,resize:zJ}[n]||$J;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:m2,detach:m2,resize:m2}[n]||OJ)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return OX(e,n,r,i)}isAttached(e){const n=Z_(e);return!!(n&&n.isConnected)}}function VJ(t){return!K_()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?AJ:UJ}var j0;let Nh=(j0=class{constructor(){Xe(this,"x");Xe(this,"y");Xe(this,"active",!1);Xe(this,"options");Xe(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Sp(this.x)&&Sp(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},Xe(j0,"defaults",{}),Xe(j0,"defaultRoutes"),j0);function HJ(t,e){const n=t.options.ticks,r=GJ(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?qJ(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return YJ(e,c,s,o/i),c;const d=WJ(s,e,i);if(o>0){let p,v;const m=o>1?Math.round((l-a)/(o-1)):null;for(T0(e,c,d,Li(m)?0:a-m,a),p=0,v=o-1;p<v;p++)T0(e,c,d,s[p],s[p+1]);return T0(e,c,d,l,Li(m)?e.length:l+m),c}return T0(e,c,d),c}function GJ(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function WJ(t,e,n){const r=KJ(t),i=e.length/n;if(!r)return Math.max(i,1);const s=FZ(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function qJ(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function YJ(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function T0(t,e,n,r,i){const s=Gr(r,0),o=Math.min(Gr(i,t.length),t.length);let a=0,l,c,d;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),d=s;d<0;)a++,d=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===d&&(e.push(t[c]),a++,d=Math.round(s+a*n))}function KJ(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const ZJ=t=>t==="left"?"right":t==="right"?"left":t,w3=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,x3=(t,e)=>Math.min(e||t,t);function L3(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function XJ(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function JJ(t,e){Ui(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function rg(t){return t.drawTicks?t.tickLength:0}function S3(t,e){if(!t.display)return 0;const n=Ho(t.font,e),r=Ja(t.padding);return(Ts(t.text)?t.text.length:1)*n.lineHeight+r.height}function QJ(t,e){return Sd(t,{scale:e,type:"scale"})}function eQ(t,e,n){return Sd(t,{tick:n,index:e,type:"tick"})}function tQ(t,e,n){let r=V_(t);return(n&&e!=="right"||!n&&e==="right")&&(r=ZJ(r)),r}function nQ(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:d}=l;let p=0,v,m,x;const E=o-i,T=a-s;if(t.isHorizontal()){if(m=Ha(r,s,a),hi(n)){const D=Object.keys(n)[0],k=n[D];x=d[D].getPixelForValue(k)+E-e}else n==="center"?x=(c.bottom+c.top)/2+E-e:x=w3(t,n,e);v=a-s}else{if(hi(n)){const D=Object.keys(n)[0],k=n[D];m=d[D].getPixelForValue(k)-T+e}else n==="center"?m=(c.left+c.right)/2-T+e:m=w3(t,n,e);x=Ha(r,o,i),p=n==="left"?-Eo:Eo}return{titleX:m,titleY:x,maxWidth:v,rotation:p}}class vf extends Nh{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=gu(e,Number.POSITIVE_INFINITY),n=gu(n,Number.NEGATIVE_INFINITY),r=gu(r,Number.POSITIVE_INFINITY),i=gu(i,Number.NEGATIVE_INFINITY),{min:gu(e,r),max:gu(n,i),minDefined:lo(e),maxDefined:lo(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:gu(n,gu(r,n)),max:gu(r,gu(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){cs(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=dX(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?L3(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=HJ(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){cs(this.options.afterUpdate,[this])}beforeSetDimensions(){cs(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){cs(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),cs(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){cs(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=cs(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){cs(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){cs(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=x3(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const d=this._getLabelSizes(),p=d.widest.width,v=d.highest.height,m=aa(this.chart.width-p,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),p+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-rg(e.grid)-n.padding-S3(e.title,this.chart.options.font),c=Math.sqrt(p*p+v*v),o=$_(Math.min(Math.asin(aa((d.highest.height+6)/a,-1,1)),Math.asin(aa(l/c,-1,1))-Math.asin(aa(v/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){cs(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){cs(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=S3(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=rg(s)+l):(e.height=this.maxHeight,e.width=rg(s)+l),r.display&&this.ticks.length){const{first:c,last:d,widest:p,highest:v}=this._getLabelSizes(),m=r.padding*2,x=gc(this.labelRotation),E=Math.cos(x),T=Math.sin(x);if(a){const D=r.mirror?0:T*p.width+E*v.height;e.height=Math.min(this.maxHeight,e.height+D+m)}else{const D=r.mirror?0:E*p.width+T*v.height;e.width=Math.min(this.maxWidth,e.width+D+m)}this._calculatePadding(c,d,T,E)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,m=0;l?c?(v=i*e.width,m=r*n.height):(v=r*e.height,m=i*n.width):s==="start"?m=n.width:s==="end"?v=e.width:s!=="inner"&&(v=e.width/2,m=n.width/2),this.paddingLeft=Math.max((v-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((m-p+o)*this.width/(this.width-p),0)}else{let d=n.height/2,p=e.height/2;s==="start"?(d=0,p=e.height):s==="end"&&(d=n.height,p=0),this.paddingTop=d+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){cs(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Li(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=L3(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/x3(n,r));let c=0,d=0,p,v,m,x,E,T,D,k,B,W,Q;for(p=0;p<n;p+=l){if(x=e[p].label,E=this._resolveTickFontOptions(p),i.font=T=E.string,D=s[T]=s[T]||{data:{},gc:[]},k=E.lineHeight,B=W=0,!Li(x)&&!Ts(x))B=Kv(i,D.data,D.gc,B,x),W=k;else if(Ts(x))for(v=0,m=x.length;v<m;++v)Q=x[v],!Li(Q)&&!Ts(Q)&&(B=Kv(i,D.data,D.gc,B,Q),W+=k);o.push(B),a.push(W),c=Math.max(B,c),d=Math.max(W,d)}JJ(s,n);const pe=o.indexOf(c),fe=a.indexOf(d),O=U=>({width:o[U]||0,height:a[U]||0});return{first:O(0),last:O(n-1),widest:O(pe),highest:O(fe),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return $Z(this._alignToPixels?Ud(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=eQ(this.getContext(),e,r))}return this.$context||(this.$context=QJ(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=gc(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),p=this.ticks.length+(l?1:0),v=rg(s),m=[],x=a.setContext(this.getContext()),E=x.display?x.width:0,T=E/2,D=function(N){return Ud(r,N,E)};let k,B,W,Q,pe,fe,O,U,q,R,$,X;if(o==="top")k=D(this.bottom),fe=this.bottom-v,U=k-T,R=D(e.top)+T,X=e.bottom;else if(o==="bottom")k=D(this.top),R=e.top,X=D(e.bottom)-T,fe=k+T,U=this.top+v;else if(o==="left")k=D(this.right),pe=this.right-v,O=k-T,q=D(e.left)+T,$=e.right;else if(o==="right")k=D(this.left),q=e.left,$=D(e.right)-T,pe=k+T,O=this.left+v;else if(n==="x"){if(o==="center")k=D((e.top+e.bottom)/2+.5);else if(hi(o)){const N=Object.keys(o)[0],J=o[N];k=D(this.chart.scales[N].getPixelForValue(J))}R=e.top,X=e.bottom,fe=k+T,U=fe+v}else if(n==="y"){if(o==="center")k=D((e.left+e.right)/2);else if(hi(o)){const N=Object.keys(o)[0],J=o[N];k=D(this.chart.scales[N].getPixelForValue(J))}pe=k-T,O=pe-v,q=e.left,$=e.right}const K=Gr(i.ticks.maxTicksLimit,p),F=Math.max(1,Math.ceil(p/K));for(B=0;B<p;B+=F){const N=this.getContext(B),J=s.setContext(N),Y=a.setContext(N),ye=J.lineWidth,Ce=J.color,He=Y.dash||[],j=Y.dashOffset,Z=J.tickWidth,ae=J.tickColor,de=J.tickBorderDash||[],ge=J.tickBorderDashOffset;W=XJ(this,B,l),W!==void 0&&(Q=Ud(r,W,ye),c?pe=O=q=$=Q:fe=U=R=X=Q,m.push({tx1:pe,ty1:fe,tx2:O,ty2:U,x1:q,y1:R,x2:$,y2:X,width:ye,color:Ce,borderDash:He,borderDashOffset:j,tickWidth:Z,tickColor:ae,tickBorderDash:de,tickBorderDashOffset:ge}))}return this._ticksLength=p,this._borderValue=k,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:d,mirror:p}=s,v=rg(r.grid),m=v+d,x=p?-d:m,E=-gc(this.labelRotation),T=[];let D,k,B,W,Q,pe,fe,O,U,q,R,$,X="middle";if(i==="top")pe=this.bottom-x,fe=this._getXAxisLabelAlignment();else if(i==="bottom")pe=this.top+x,fe=this._getXAxisLabelAlignment();else if(i==="left"){const F=this._getYAxisLabelAlignment(v);fe=F.textAlign,Q=F.x}else if(i==="right"){const F=this._getYAxisLabelAlignment(v);fe=F.textAlign,Q=F.x}else if(n==="x"){if(i==="center")pe=(e.top+e.bottom)/2+m;else if(hi(i)){const F=Object.keys(i)[0],N=i[F];pe=this.chart.scales[F].getPixelForValue(N)+m}fe=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")Q=(e.left+e.right)/2-m;else if(hi(i)){const F=Object.keys(i)[0],N=i[F];Q=this.chart.scales[F].getPixelForValue(N)}fe=this._getYAxisLabelAlignment(v).textAlign}n==="y"&&(l==="start"?X="top":l==="end"&&(X="bottom"));const K=this._getLabelSizes();for(D=0,k=a.length;D<k;++D){B=a[D],W=B.label;const F=s.setContext(this.getContext(D));O=this.getPixelForTick(D)+s.labelOffset,U=this._resolveTickFontOptions(D),q=U.lineHeight,R=Ts(W)?W.length:1;const N=R/2,J=F.color,Y=F.textStrokeColor,ye=F.textStrokeWidth;let Ce=fe;o?(Q=O,fe==="inner"&&(D===k-1?Ce=this.options.reverse?"left":"right":D===0?Ce=this.options.reverse?"right":"left":Ce="center"),i==="top"?c==="near"||E!==0?$=-R*q+q/2:c==="center"?$=-K.highest.height/2-N*q+q:$=-K.highest.height+q/2:c==="near"||E!==0?$=q/2:c==="center"?$=K.highest.height/2-N*q:$=K.highest.height-R*q,p&&($*=-1),E!==0&&!F.showLabelBackdrop&&(Q+=q/2*Math.sin(E))):(pe=O,$=(1-R)*q/2);let He;if(F.showLabelBackdrop){const j=Ja(F.backdropPadding),Z=K.heights[D],ae=K.widths[D];let de=$-j.top,ge=0-j.left;switch(X){case"middle":de-=Z/2;break;case"bottom":de-=Z;break}switch(fe){case"center":ge-=ae/2;break;case"right":ge-=ae;break;case"inner":D===k-1?ge-=ae:D>0&&(ge-=ae/2);break}He={left:ge,top:de,width:ae+j.width,height:Z+j.height,color:F.backdropColor}}T.push({label:W,font:U,textOffset:$,options:{rotation:E,color:J,strokeColor:Y,strokeWidth:ye,textAlign:Ce,textBaseline:X,translation:[Q,pe],backdrop:He}})}return T}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-gc(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,d;return n==="left"?i?(d=this.right+s,r==="near"?c="left":r==="center"?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-a,r==="near"?c="right":r==="center"?(c="center",d-=l/2):(c="left",d=this.left)):n==="right"?i?(d=this.left+s,r==="near"?c="right":r==="center"?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+a,r==="near"?c="left":r==="center"?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,d,p,v;this.isHorizontal()?(c=Ud(e,this.left,o)-o/2,d=Ud(e,this.right,a)+a/2,p=v=l):(p=Ud(e,this.top,o)-o/2,v=Ud(e,this.bottom,a)+a/2,c=d=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,p),n.lineTo(d,v),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&By(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,d=o.textOffset;ff(r,c,0,d,l,a)}i&&Ry(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=Ho(r.font),o=Ja(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||hi(n)?(l+=o.bottom,Ts(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:d,maxWidth:p,rotation:v}=nQ(this,l,n,a);ff(e,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:v,textAlign:tQ(a,n,i),textBaseline:"middle",translation:[c,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=Gr(e.grid&&e.grid.z,-1),i=Gr(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==vf.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Ho(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class D0{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;sQ(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,rQ(e,o,r),this.override&&uo.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in uo[i]&&(delete uo[i][r],this.override&&delete df[r])}}function rQ(t,e,n){const r=hm(Object.create(null),[n?uo.get(n):{},uo.get(e),t.defaults]);uo.set(e,r),t.defaultRoutes&&iQ(e,t.defaultRoutes),t.descriptors&&uo.describe(e,t.descriptors)}function iQ(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");uo.route(s,i,l,a)})}function sQ(t){return"id"in t&&"defaults"in t}class oQ{constructor(){this.controllers=new D0(vc,"datasets",!0),this.elements=new D0(Nh,"elements"),this.plugins=new D0(Object,"plugins"),this.scales=new D0(vf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Ui(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=z_(e);cs(r["before"+i],[],r),n[e](r),cs(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Rc=new oQ;class aQ{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(cs(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Li(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=Gr(r.options&&r.options.plugins,{}),s=lQ(r);return i===!1&&!n?[]:cQ(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function lQ(t){const e={},n=[],r=Object.keys(Rc.plugins.items);for(let s=0;s<r.length;s++)n.push(Rc.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function uQ(t,e){return!e&&t===!1?null:t===!0?{}:t}function cQ(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=uQ(r[l],i);c!==null&&s.push({plugin:a,options:hQ(t.config,{plugin:a,local:n[l]},c,o)})}return s}function hQ(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ab(t,e){const n=uo.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function dQ(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function fQ(t,e){return t===e?"_index_":"_value_"}function C3(t){if(t==="x"||t==="y"||t==="r")return t}function pQ(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Tb(t,...e){if(C3(t))return t;for(const n of e){const r=n.axis||pQ(n.position)||t.length>1&&C3(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function E3(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function gQ(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return E3(t,"x",n[0])||E3(t,"y",n[0])}return{}}function mQ(t,e){const n=df[t.type]||{scales:{}},r=e.scales||{},i=Ab(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!hi(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Tb(o,a,gQ(o,t),uo.scales[a.type]),c=fQ(l,i),d=n.scales||{};s[o]=Ug(Object.create(null),[{axis:l},a,d[l],d[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Ab(a,e),d=(df[a]||{}).scales||{};Object.keys(d).forEach(p=>{const v=dQ(p,l),m=o[v+"AxisID"]||v;s[m]=s[m]||Object.create(null),Ug(s[m],[{axis:v},r[m],d[p]])})}),Object.keys(s).forEach(o=>{const a=s[o];Ug(a,[uo.scales[a.type],uo.scale])}),s}function RM(t){const e=t.options||(t.options={});e.plugins=Gr(e.plugins,{}),e.scales=mQ(t,e)}function FM(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function vQ(t){return t=t||{},t.data=FM(t.data),RM(t),t}const M3=new Map,jM=new Set;function I0(t,e){let n=M3.get(t);return n||(n=e(),M3.set(t,n),jM.add(n)),n}const ig=(t,e,n)=>{const r=bd(e,n);r!==void 0&&t.add(r)};class yQ{constructor(e){this._config=vQ(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=FM(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),RM(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return I0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return I0(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return I0(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return I0(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(d=>{e&&(l.add(e),d.forEach(p=>ig(l,e,p))),d.forEach(p=>ig(l,i,p)),d.forEach(p=>ig(l,df[s]||{},p)),d.forEach(p=>ig(l,uo,p)),d.forEach(p=>ig(l,Mb,p))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),jM.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,df[n]||{},uo.datasets[n]||{},{type:n},uo,Mb]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=P3(this._resolverCache,e,i);let l=o;if(_Q(o,n)){s.$shared=!1,r=_d(r)?r():r;const c=this.createResolver(e,r,a);l=Cp(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=P3(this._resolverCache,e,r);return hi(n)?Cp(s,n,void 0,i):s}}function P3(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:W_(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const bQ=t=>hi(t)&&Object.getOwnPropertyNames(t).some(e=>_d(t[e]));function _Q(t,e){const{isScriptable:n,isIndexable:r}=vM(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(_d(a)||bQ(a))||o&&Ts(a))return!0}return!1}var wQ="4.4.1";const xQ=["top","bottom","left","right","chartArea"];function k3(t,e){return t==="top"||t==="bottom"||xQ.indexOf(t)===-1&&e==="x"}function A3(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function T3(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),cs(n&&n.onComplete,[t],e)}function LQ(t){const e=t.chart,n=e.options.animation;cs(n&&n.onProgress,[t],e)}function zM(t){return K_()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const dv={},D3=t=>{const e=zM(t);return Object.values(dv).filter(n=>n.canvas===e).pop()};function SQ(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function CQ(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function O0(t,e,n){return t.options.clip?t[n]:e[n]}function EQ(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:O0(n,e,"left"),right:O0(n,e,"right"),top:O0(r,e,"top"),bottom:O0(r,e,"bottom")}:e}class $c{static register(...e){Rc.add(...e),I3()}static unregister(...e){Rc.remove(...e),I3()}constructor(e,n){const r=this.config=new yQ(n),i=zM(e),s=D3(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||VJ(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,d=l&&l.width;if(this.id=kZ(),this.ctx=a,this.canvas=l,this.width=d,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new aQ,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=GZ(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],dv[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}yh.listen(this,"complete",T3),yh.listen(this,"progress",LQ),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return Li(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Rc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():e3(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return X5(this.canvas,this.ctx),this}stop(){return yh.stop(this),this}resize(e,n){yh.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,e3(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),cs(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ui(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Tb(o,a),c=l==="r",d=l==="x";return{options:a,dposition:c?"chartArea":d?"bottom":"left",dtype:c?"radialLinear":d?"category":"linear"}}))),Ui(s,o=>{const a=o.options,l=a.id,c=Tb(l,a),d=Gr(a.type,o.dtype);(a.position===void 0||k3(a.position,c)!==k3(o.dposition))&&(a.position=o.dposition),i[l]=!0;let p=null;if(l in r&&r[l].type===d)p=r[l];else{const v=Rc.getScale(d);p=new v({id:l,type:d,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(a,e)}),Ui(i,(o,a)=>{o||delete r[a]}),Ui(r,o=>{Xa.configure(this,o,o.options),Xa.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(A3("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||Ab(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Rc.getController(a),{datasetElementType:c,dataElementType:d}=uo.datasets[a];Object.assign(l,{dataElementType:Rc.getElement(d),datasetElementType:c&&Rc.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ui(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,d=this.data.datasets.length;c<d;c++){const{controller:p}=this.getDatasetMeta(c),v=!i&&s.indexOf(p)===-1;p.buildOrUpdateElements(v),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||Ui(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(A3("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ui(this.scales,e=>{Xa.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!U5(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;SQ(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!U5(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Xa.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Ui(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,_d(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(yh.has(this)?this.attached&&!yh.running(this)&&yh.start(this):(this.draw(),T3({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=EQ(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&By(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&Ry(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Ph(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=xJ.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Sd(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);dm(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),yh.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),X5(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete dv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Ui(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ui(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ui(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Wv(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(d=>!c.some(p=>d.datasetIndex===p.datasetIndex&&d.index===p.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=NZ(e),c=CQ(e,this._lastEvent,r,l);r&&(this._lastEvent=null,cs(s.onHover,[e,a,this],this),l&&cs(s.onClick,[e,a,this],this));const d=!Wv(a,i);return(d||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,d}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}Xe($c,"defaults",uo),Xe($c,"instances",dv),Xe($c,"overrides",df),Xe($c,"registry",Rc),Xe($c,"version",wQ),Xe($c,"getChart",D3);function I3(){return Ui($c.instances,t=>t._plugins.invalidate())}function MQ(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+Eo,r-Eo),t.closePath(),t.clip()}function PQ(t){return G_(t,["outerStart","outerEnd","innerStart","innerEnd"])}function kQ(t,e,n,r){const i=PQ(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return aa(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:aa(i.innerStart,0,o),innerEnd:aa(i.innerEnd,0,o)}}function Wf(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function Jv(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:d}=e,p=Math.max(e.outerRadius+r+n-c,0),v=d>0?d+r+n+c:0;let m=0;const x=i-l;if(r){const F=d>0?d-r:0,N=p>0?p-r:0,J=(F+N)/2,Y=J!==0?x*J/(J+r):x;m=(x-Y)/2}const E=Math.max(.001,x*p-n/bs)/p,T=(x-E)/2,D=l+T+m,k=i-T-m,{outerStart:B,outerEnd:W,innerStart:Q,innerEnd:pe}=kQ(e,v,p,k-D),fe=p-B,O=p-W,U=D+B/fe,q=k-W/O,R=v+Q,$=v+pe,X=D+Q/R,K=k-pe/$;if(t.beginPath(),s){const F=(U+q)/2;if(t.arc(o,a,p,U,F),t.arc(o,a,p,F,q),W>0){const ye=Wf(O,q,o,a);t.arc(ye.x,ye.y,W,q,k+Eo)}const N=Wf($,k,o,a);if(t.lineTo(N.x,N.y),pe>0){const ye=Wf($,K,o,a);t.arc(ye.x,ye.y,pe,k+Eo,K+Math.PI)}const J=(k-pe/v+(D+Q/v))/2;if(t.arc(o,a,v,k-pe/v,J,!0),t.arc(o,a,v,J,D+Q/v,!0),Q>0){const ye=Wf(R,X,o,a);t.arc(ye.x,ye.y,Q,X+Math.PI,D-Eo)}const Y=Wf(fe,D,o,a);if(t.lineTo(Y.x,Y.y),B>0){const ye=Wf(fe,U,o,a);t.arc(ye.x,ye.y,B,D-Eo,U)}}else{t.moveTo(o,a);const F=Math.cos(U)*p+o,N=Math.sin(U)*p+a;t.lineTo(F,N);const J=Math.cos(q)*p+o,Y=Math.sin(q)*p+a;t.lineTo(J,Y)}t.closePath()}function AQ(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){Jv(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%ys||ys))}return Jv(t,e,n,r,l,i),t.fill(),l}function TQ(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:d,borderDash:p,borderDashOffset:v}=l,m=l.borderAlign==="inner";if(!c)return;t.setLineDash(p||[]),t.lineDashOffset=v,m?(t.lineWidth=c*2,t.lineJoin=d||"round"):(t.lineWidth=c,t.lineJoin=d||"bevel");let x=e.endAngle;if(s){Jv(t,e,n,r,x,i);for(let E=0;E<s;++E)t.stroke();isNaN(a)||(x=o+(a%ys||ys))}m&&MQ(t,e,x),s||(Jv(t,e,n,r,x,i),t.stroke())}class wg extends Nh{constructor(n){super();Xe(this,"circumference");Xe(this,"endAngle");Xe(this,"fullCircles");Xe(this,"innerRadius");Xe(this,"outerRadius");Xe(this,"pixelMargin");Xe(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=aM(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:p,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),m=(this.options.spacing+this.options.borderWidth)/2,E=Gr(v,c-l)>=ys||fm(o,l,c),T=Eh(a,d+m,p+m);return E&&T}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:d}=this.options,p=(s+o)/2,v=(a+l+d+c)/2;return{x:r+Math.cos(p)*v,y:i+Math.sin(p)*v}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>ys?Math.floor(i/ys):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(bs,i||0)),d=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,AQ(n,this,d,o,a),TQ(n,this,d,o,a),n.restore()}}Xe(wg,"id","arc"),Xe(wg,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Xe(wg,"defaultRoutes",{backgroundColor:"backgroundColor"}),Xe(wg,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function $M(t,e,n=e){t.lineCap=Gr(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Gr(n.borderDash,e.borderDash)),t.lineDashOffset=Gr(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Gr(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Gr(n.borderWidth,e.borderWidth),t.strokeStyle=Gr(n.borderColor,e.borderColor)}function DQ(t,e,n){t.lineTo(n.x,n.y)}function IQ(t){return t.stepped?rX:t.tension||t.cubicInterpolationMode==="monotone"?iX:DQ}function UM(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),d=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!d?r+c-l:c-l}}function OQ(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=UM(i,n,r),d=IQ(s);let{move:p=!0,reverse:v}=r||{},m,x,E;for(m=0;m<=c;++m)x=i[(a+(v?c-m:m))%o],!x.skip&&(p?(t.moveTo(x.x,x.y),p=!1):d(t,E,x,v,s.stepped),E=x);return l&&(x=i[(a+(v?c:0))%o],d(t,E,x,v,s.stepped)),!!l}function NQ(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=UM(i,n,r),{move:l=!0,reverse:c}=r||{};let d=0,p=0,v,m,x,E,T,D;const k=W=>(o+(c?a-W:W))%s,B=()=>{E!==T&&(t.lineTo(d,T),t.lineTo(d,E),t.lineTo(d,D))};for(l&&(m=i[k(0)],t.moveTo(m.x,m.y)),v=0;v<=a;++v){if(m=i[k(v)],m.skip)continue;const W=m.x,Q=m.y,pe=W|0;pe===x?(Q<E?E=Q:Q>T&&(T=Q),d=(p*d+W)/++p):(B(),t.lineTo(W,Q),x=pe,p=0,E=T=Q),D=Q}B()}function Db(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?NQ:OQ}function BQ(t){return t.stepped?BX:t.tension||t.cubicInterpolationMode==="monotone"?RX:Yd}function RQ(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),$M(t,e.options),t.stroke(i)}function FQ(t,e,n,r){const{segments:i,options:s}=e,o=Db(e);for(const a of i)$M(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const jQ=typeof Path2D=="function";function zQ(t,e,n,r){jQ&&!e.options.segment?RQ(t,e,n,r):FQ(t,e,n,r)}class ud extends Nh{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;PX(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=VX(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=MM(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=BQ(r);let c,d;for(c=0,d=o.length;c<d;++c){const{start:p,end:v}=o[c],m=s[p],x=s[v];if(m===x){a.push(m);continue}const E=Math.abs((i-m[n])/(x[n]-m[n])),T=l(m,x,E,r.stepped);T[n]=e[n],a.push(T)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Db(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=Db(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),zQ(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Xe(ud,"id","line"),Xe(ud,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Xe(ud,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Xe(ud,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function O3(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class fv extends Nh{constructor(n){super();Xe(this,"parsed");Xe(this,"skip");Xe(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return O3(this,n,"x",r)}inYRange(n,r){return O3(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!Ph(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Pb(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Xe(fv,"id","point"),Xe(fv,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Xe(fv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function VM(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,d,p;return t.horizontal?(p=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-p,d=r+p):(p=s/2,a=n-p,l=n+p,c=Math.min(r,i),d=Math.max(r,i)),{left:a,top:c,right:l,bottom:d}}function cd(t,e,n,r){return t?0:aa(e,n,r)}function $Q(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=mM(r);return{t:cd(i.top,s.top,0,n),r:cd(i.right,s.right,0,e),b:cd(i.bottom,s.bottom,0,n),l:cd(i.left,s.left,0,e)}}function UQ(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=of(i),o=Math.min(e,n),a=t.borderSkipped,l=r||hi(i);return{topLeft:cd(!l||a.top||a.left,s.topLeft,0,o),topRight:cd(!l||a.top||a.right,s.topRight,0,o),bottomLeft:cd(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:cd(!l||a.bottom||a.right,s.bottomRight,0,o)}}function VQ(t){const e=VM(t),n=e.right-e.left,r=e.bottom-e.top,i=$Q(t,n/2,r/2),s=UQ(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function v2(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&VM(t,r);return a&&(i||Eh(e,a.left,a.right))&&(s||Eh(n,a.top,a.bottom))}function HQ(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function GQ(t,e){t.rect(e.x,e.y,e.w,e.h)}function y2(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class pv extends Nh{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=VQ(this),a=HQ(o.radius)?pm:GQ;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,y2(o,n,s)),e.clip(),a(e,y2(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,y2(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return v2(this,e,n,r)}inXRange(e,n){return v2(this,e,null,n)}inYRange(e,n){return v2(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Xe(pv,"id","bar"),Xe(pv,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Xe(pv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var WQ=Object.freeze({__proto__:null,ArcElement:wg,BarElement:pv,LineElement:ud,PointElement:fv});const Ib=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],N3=Ib.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function HM(t){return Ib[t%Ib.length]}function GM(t){return N3[t%N3.length]}function qQ(t,e){return t.borderColor=HM(e),t.backgroundColor=GM(e),++e}function YQ(t,e){return t.backgroundColor=t.data.map(()=>HM(e++)),e}function KQ(t,e){return t.backgroundColor=t.data.map(()=>GM(e++)),e}function ZQ(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof Jd?e=YQ(n,e):i instanceof Wg?e=KQ(n,e):i&&(e=qQ(n,e))}}function B3(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function XQ(t){return t&&(t.borderColor||t.backgroundColor)}var JQ={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i;if(!n.forceOverride&&(B3(r)||XQ(i)||s&&B3(s)))return;const o=ZQ(t);r.forEach(o)}};function QQ(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let d=e,p,v,m,x,E;for(o[l++]=t[d],p=0;p<s-2;p++){let T=0,D=0,k;const B=Math.floor((p+1)*a)+1+e,W=Math.min(Math.floor((p+2)*a)+1,n)+e,Q=W-B;for(k=B;k<W;k++)T+=t[k].x,D+=t[k].y;T/=Q,D/=Q;const pe=Math.floor(p*a)+1+e,fe=Math.min(Math.floor((p+1)*a)+1,n)+e,{x:O,y:U}=t[d];for(m=x=-1,k=pe;k<fe;k++)x=.5*Math.abs((O-T)*(t[k].y-U)-(O-t[k].x)*(D-U)),x>m&&(m=x,v=t[k],E=k);o[l++]=v,d=E}return o[l++]=t[c],o}function eee(t,e,n,r){let i=0,s=0,o,a,l,c,d,p,v,m,x,E;const T=[],D=e+n-1,k=t[e].x,W=t[D].x-k;for(o=e;o<e+n;++o){a=t[o],l=(a.x-k)/W*r,c=a.y;const Q=l|0;if(Q===d)c<x?(x=c,p=o):c>E&&(E=c,v=o),i=(s*i+a.x)/++s;else{const pe=o-1;if(!Li(p)&&!Li(v)){const fe=Math.min(p,v),O=Math.max(p,v);fe!==m&&fe!==pe&&T.push({...t[fe],x:i}),O!==m&&O!==pe&&T.push({...t[O],x:i})}o>0&&pe!==m&&T.push(t[pe]),T.push(a),d=Q,s=0,x=E=c,p=v=m=o}}return T}function WM(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function R3(t){t.data.datasets.forEach(e=>{WM(e)})}function tee(t,e){const n=e.length;let r=0,i;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=aa(Mh(e,s.axis,o).lo,0,n-1)),c?i=aa(Mh(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var nee={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){R3(t);return}const r=t.width;t.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=t.getDatasetMeta(s),c=o||i.data;if(bg([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const d=t.scales[l.xAxisID];if(d.type!=="linear"&&d.type!=="time"||t.options.parsing)return;let{start:p,count:v}=tee(l,c);const m=n.threshold||4*r;if(v<=m){WM(i);return}Li(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(E){this._data=E}}));let x;switch(n.algorithm){case"lttb":x=QQ(c,p,v,r,n);break;case"min-max":x=eee(c,p,v,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=x})},destroy(t){R3(t)}};function ree(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=J_(l,c,i);const d=Ob(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:d,start:i[l],end:i[c]});continue}const p=MM(e,d);for(const v of p){const m=Ob(n,s[v.start],s[v.end],v.loop),x=EM(a,i,m);for(const E of x)o.push({source:E,target:v,start:{[n]:F3(d,m,"start",Math.max)},end:{[n]:F3(d,m,"end",Math.min)}})}}return o}function Ob(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=mu(i),s=mu(s)),{property:t,start:i,end:s}}function iee(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=J_(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function J_(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function F3(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function qM(t,e){let n=[],r=!1;return Ts(t)?(r=!0,n=t):n=iee(t,e),n.length?new ud({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function j3(t){return t&&t.fill!==!1}function see(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!lo(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function oee(t,e,n){const r=cee(t);if(hi(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return lo(i)&&Math.floor(i)===i?aee(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function aee(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function lee(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:hi(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function uee(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:hi(t)?r=t.value:r=e.getBaseValue(),r}function cee(t){const e=t.options,n=e.fill;let r=Gr(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function hee(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=dee(e,n);a.push(qM({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let d=c.start;d<=c.end;d++)fee(i,o[d],a)}return new ud({points:i,options:{}})}function dee(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function fee(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=pee(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function pee(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const d=s[c],p=o[d.start][n],v=o[d.end][n];if(Eh(i,p,v)){a=i===p,l=i===v;break}}return{first:a,last:l,point:r}}class YM{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:ys},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function gee(t){const{chart:e,fill:n,line:r}=t;if(lo(n))return mee(e,n);if(n==="stack")return hee(t);if(n==="shape")return!0;const i=vee(t);return i instanceof YM?i:qM(i,r)}function mee(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function vee(t){return(t.scale||{}).getPointPositionForValue?bee(t):yee(t)}function yee(t){const{scale:e={},fill:n}=t,r=lee(n,e);if(lo(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function bee(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=uee(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new YM({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function b2(t,e,n){const r=gee(e),{line:i,scale:s,axis:o}=e,a=i.options,l=a.fill,c=a.backgroundColor,{above:d=c,below:p=c}=l||{};r&&i.points.length&&(By(t,n),_ee(t,{line:i,target:r,above:d,below:p,area:n,scale:s,axis:o}),Ry(t))}function _ee(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==i&&(z3(t,r,o.top),$3(t,{line:n,target:r,color:i,scale:a,property:l}),t.restore(),t.save(),z3(t,r,o.bottom)),$3(t,{line:n,target:r,color:s,scale:a,property:l}),t.restore()}function z3(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,d=i[l],p=i[J_(l,c,i)];s?(t.moveTo(d.x,d.y),s=!1):(t.lineTo(d.x,n),t.lineTo(d.x,d.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(p.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function $3(t,e){const{line:n,target:r,property:i,color:s,scale:o}=e,a=ree(n,r,i);for(const{source:l,target:c,start:d,end:p}of a){const{style:{backgroundColor:v=s}={}}=l,m=r!==!0;t.save(),t.fillStyle=v,wee(t,o,m&&Ob(i,d,p)),t.beginPath();const x=!!n.pathSegment(t,l);let E;if(m){x?t.closePath():U3(t,r,p,i);const T=!!r.pathSegment(t,c,{move:x,reverse:!0});E=x&&T,E||U3(t,r,d,i)}t.closePath(),t.fill(E?"evenodd":"nonzero"),t.restore()}}function wee(t,e,n){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,r,a-o,i-r),t.clip())}function U3(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var xee={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof ud&&(l={visible:t.isDatasetVisible(o),index:o,fill:oee(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=see(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&b2(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;j3(s)&&b2(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!j3(r)||n.drawTime!=="beforeDatasetDraw"||b2(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const V3=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},Lee=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class H3 extends Nh{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=cs(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Ho(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=V3(r,s);let c,d;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(o,s,a,l)+10):(d=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=i+a;let p=e;s.textAlign="left",s.textBaseline="middle";let v=-1,m=-d;return this.legendItems.forEach((x,E)=>{const T=r+n/2+s.measureText(x.text).width;(E===0||c[c.length-1]+T+2*a>o)&&(p+=d,c[c.length-(E>0?0:1)]=0,m+=d,v++),l[E]={left:0,top:m,row:v,width:T,height:i},c[c.length-1]+=T+a}),p}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=o-e;let p=a,v=0,m=0,x=0,E=0;return this.legendItems.forEach((T,D)=>{const{itemWidth:k,itemHeight:B}=See(r,n,s,T,i);D>0&&m+B+2*a>d&&(p+=v+a,c.push({width:v,height:m}),x+=v+a,E++,v=m=0),l[D]={left:x,top:m,col:E,width:k,height:B},v=Math.max(v,k),m+=B+a}),p+=v,c.push({width:v,height:m}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=pp(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ha(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Ha(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=Ha(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Ha(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;By(e,this),this._draw(),Ry(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=uo.color,l=pp(e.rtl,this.left,this.width),c=Ho(o.font),{padding:d}=o,p=c.size,v=p/2;let m;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:x,boxHeight:E,itemHeight:T}=V3(o,p),D=function(pe,fe,O){if(isNaN(x)||x<=0||isNaN(E)||E<0)return;i.save();const U=Gr(O.lineWidth,1);if(i.fillStyle=Gr(O.fillStyle,a),i.lineCap=Gr(O.lineCap,"butt"),i.lineDashOffset=Gr(O.lineDashOffset,0),i.lineJoin=Gr(O.lineJoin,"miter"),i.lineWidth=U,i.strokeStyle=Gr(O.strokeStyle,a),i.setLineDash(Gr(O.lineDash,[])),o.usePointStyle){const q={radius:E*Math.SQRT2/2,pointStyle:O.pointStyle,rotation:O.rotation,borderWidth:U},R=l.xPlus(pe,x/2),$=fe+v;gM(i,q,R,$,o.pointStyleWidth&&x)}else{const q=fe+Math.max((p-E)/2,0),R=l.leftForLtr(pe,x),$=of(O.borderRadius);i.beginPath(),Object.values($).some(X=>X!==0)?pm(i,{x:R,y:q,w:x,h:E,radius:$}):i.rect(R,q,x,E),i.fill(),U!==0&&i.stroke()}i.restore()},k=function(pe,fe,O){ff(i,O.text,pe,fe+T/2,c,{strikethrough:O.hidden,textAlign:l.textAlign(O.textAlign)})},B=this.isHorizontal(),W=this._computeTitleHeight();B?m={x:Ha(s,this.left+d,this.right-r[0]),y:this.top+d+W,line:0}:m={x:this.left+d,y:Ha(s,this.top+W+d,this.bottom-n[0].height),line:0},LM(this.ctx,e.textDirection);const Q=T+d;this.legendItems.forEach((pe,fe)=>{i.strokeStyle=pe.fontColor,i.fillStyle=pe.fontColor;const O=i.measureText(pe.text).width,U=l.textAlign(pe.textAlign||(pe.textAlign=o.textAlign)),q=x+v+O;let R=m.x,$=m.y;l.setWidth(this.width),B?fe>0&&R+q+d>this.right&&($=m.y+=Q,m.line++,R=m.x=Ha(s,this.left+d,this.right-r[m.line])):fe>0&&$+Q>this.bottom&&(R=m.x=R+n[m.line].width+d,m.line++,$=m.y=Ha(s,this.top+W+d,this.bottom-n[m.line].height));const X=l.x(R);if(D(X,$,pe),R=WZ(U,R+x+v,B?R+q:this.right,e.rtl),k(l.x(R),$,pe),B)m.x+=q+d;else if(typeof pe.text!="string"){const K=c.lineHeight;m.y+=KM(pe,K)+d}else m.y+=Q}),SM(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Ho(n.font),i=Ja(n.padding);if(!n.display)return;const s=pp(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let d,p=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),d=this.top+c,p=Ha(e.align,p,this.right-v);else{const x=this.columnSizes.reduce((E,T)=>Math.max(E,T.height),0);d=c+Ha(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const m=Ha(a,p,p+v);o.textAlign=s.textAlign(V_(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,ff(o,n.text,m,d,r)}_computeTitleHeight(){const e=this.options.title,n=Ho(e.font),r=Ja(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(Eh(e,this.left,this.right)&&Eh(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Eh(e,i.left,i.left+i.width)&&Eh(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!Mee(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=Lee(i,r);i&&!s&&cs(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&cs(n.onHover,[e,r,this],this)}else r&&cs(n.onClick,[e,r,this],this)}}function See(t,e,n,r,i){const s=Cee(r,t,e,n),o=Eee(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function Cee(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function Eee(t,e,n){let r=t;return typeof e.text!="string"&&(r=KM(e,n)),r}function KM(t,e){const n=t.text?t.text.length:0;return e*n}function Mee(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Pee={id:"legend",_element:H3,start(t,e,n){const r=t.legend=new H3({ctx:t.ctx,options:n,chart:t});Xa.configure(t,r,n),Xa.addBox(t,r)},stop(t){Xa.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Xa.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),d=Ja(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Q_ extends Nh{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Ts(r.text)?r.text.length:1;this._padding=Ja(r.padding);const s=i*Ho(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,d,p;return this.isHorizontal()?(d=Ha(a,r,s),p=n+e,c=s-r):(o.position==="left"?(d=r+e,p=Ha(a,i,n),l=bs*-.5):(d=s-e,p=Ha(a,n,i),l=bs*.5),c=i-n),{titleX:d,titleY:p,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Ho(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);ff(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:V_(n.align),textBaseline:"middle",translation:[o,a]})}}function kee(t,e){const n=new Q_({ctx:t.ctx,options:e,chart:t});Xa.configure(t,n,e),Xa.addBox(t,n),t.titleBlock=n}var Aee={id:"title",_element:Q_,start(t,e,n){kee(t,n)},stop(t){const e=t.titleBlock;Xa.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Xa.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const N0=new WeakMap;var Tee={id:"subtitle",start(t,e,n){const r=new Q_({ctx:t.ctx,options:n,chart:t});Xa.configure(t,r,n),Xa.addBox(t,r),N0.set(t,r)},stop(t){Xa.removeBox(t,N0.get(t)),N0.delete(t)},beforeUpdate(t,e,n){const r=N0.get(t);Xa.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const xg={average(t){if(!t.length)return!1;let e,n,r=0,i=0,s=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();r+=a.x,i+=a.y,++s}}return{x:r/s,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),d=Eb(e,c);d<i&&(i=d,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function Nc(t,e){return e&&(Ts(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function bh(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Dee(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function G3(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Ho(e.bodyFont),c=Ho(e.titleFont),d=Ho(e.footerFont),p=s.length,v=i.length,m=r.length,x=Ja(e.padding);let E=x.height,T=0,D=r.reduce((W,Q)=>W+Q.before.length+Q.lines.length+Q.after.length,0);if(D+=t.beforeBody.length+t.afterBody.length,p&&(E+=p*c.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),D){const W=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;E+=m*W+(D-m)*l.lineHeight+(D-1)*e.bodySpacing}v&&(E+=e.footerMarginTop+v*d.lineHeight+(v-1)*e.footerSpacing);let k=0;const B=function(W){T=Math.max(T,n.measureText(W).width+k)};return n.save(),n.font=c.string,Ui(t.title,B),n.font=l.string,Ui(t.beforeBody.concat(t.afterBody),B),k=e.displayColors?o+2+e.boxPadding:0,Ui(r,W=>{Ui(W.before,B),Ui(W.lines,B),Ui(W.after,B)}),k=0,n.font=d.string,Ui(t.footer,B),n.restore(),T+=x.width,{width:T,height:E}}function Iee(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function Oee(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function Nee(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),Oee(c,t,e,n)&&(c="center"),c}function W3(t,e,n){const r=n.yAlign||e.yAlign||Iee(t,n);return{xAlign:n.xAlign||e.xAlign||Nee(t,e,n,r),yAlign:r}}function Bee(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function Ree(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function q3(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:d,topRight:p,bottomLeft:v,bottomRight:m}=of(o);let x=Bee(e,a);const E=Ree(e,l,c);return l==="center"?a==="left"?x+=c:a==="right"&&(x-=c):a==="left"?x-=Math.max(d,v)+i:a==="right"&&(x+=Math.max(p,m)+i),{x:aa(x,0,r.width-e.width),y:aa(E,0,r.height-e.height)}}function B0(t,e,n){const r=Ja(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Y3(t){return Nc([],bh(t))}function Fee(t,e,n){return Sd(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function K3(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const ZM={beforeTitle:vh,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:vh,beforeBody:vh,beforeLabel:vh,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Li(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:vh,afterBody:vh,beforeFooter:vh,footer:vh,afterFooter:vh};function jl(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?ZM[e].call(n,r):i}class Nb extends Nh{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new PM(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=Fee(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=jl(r,"beforeTitle",this,e),s=jl(r,"title",this,e),o=jl(r,"afterTitle",this,e);let a=[];return a=Nc(a,bh(i)),a=Nc(a,bh(s)),a=Nc(a,bh(o)),a}getBeforeBody(e,n){return Y3(jl(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return Ui(e,s=>{const o={before:[],lines:[],after:[]},a=K3(r,s);Nc(o.before,bh(jl(a,"beforeLabel",this,s))),Nc(o.lines,jl(a,"label",this,s)),Nc(o.after,bh(jl(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return Y3(jl(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=jl(r,"beforeFooter",this,e),s=jl(r,"footer",this,e),o=jl(r,"afterFooter",this,e);let a=[];return a=Nc(a,bh(i)),a=Nc(a,bh(s)),a=Nc(a,bh(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(Dee(this.chart,n[l]));return e.filter&&(a=a.filter((d,p,v)=>e.filter(d,p,v,r))),e.itemSort&&(a=a.sort((d,p)=>e.itemSort(d,p,r))),Ui(a,d=>{const p=K3(e.callbacks,d);i.push(jl(p,"labelColor",this,d)),s.push(jl(p,"labelPointStyle",this,d)),o.push(jl(p,"labelTextColor",this,d))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=xg[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=G3(this,r),c=Object.assign({},a,l),d=W3(this.chart,r,c),p=q3(r,c,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:d,bottomRight:p}=of(a),{x:v,y:m}=e,{width:x,height:E}=n;let T,D,k,B,W,Q;return s==="center"?(W=m+E/2,i==="left"?(T=v,D=T-o,B=W+o,Q=W-o):(T=v+x,D=T+o,B=W-o,Q=W+o),k=T):(i==="left"?D=v+Math.max(l,d)+o:i==="right"?D=v+x-Math.max(c,p)-o:D=this.caretX,s==="top"?(B=m,W=B-o,T=D-o,k=D+o):(B=m+E,W=B+o,T=D+o,k=D-o),Q=B),{x1:T,x2:D,x3:k,y1:B,y2:W,y3:Q}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=pp(r.rtl,this.x,this.width);for(e.x=B0(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Ho(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,d=Ho(s.bodyFont),p=B0(this,"left",s),v=i.x(p),m=l<d.lineHeight?(d.lineHeight-l)/2:0,x=n.y+m;if(s.usePointStyle){const E={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},T=i.leftForLtr(v,c)+c/2,D=x+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Pb(e,E,T,D),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Pb(e,E,T,D)}else{e.lineWidth=hi(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const E=i.leftForLtr(v,c),T=i.leftForLtr(i.xPlus(v,1),c-2),D=of(o.borderRadius);Object.values(D).some(k=>k!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,pm(e,{x:E,y:x,w:c,h:l,radius:D}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),pm(e,{x:T,y:x+1,w:c-2,h:l-2,radius:D}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(E,x,c,l),e.strokeRect(E,x,c,l),e.fillStyle=o.backgroundColor,e.fillRect(T,x+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:d}=r,p=Ho(r.bodyFont);let v=p.lineHeight,m=0;const x=pp(r.rtl,this.x,this.width),E=function(O){n.fillText(O,x.x(e.x+m),e.y+v/2),e.y+=v+s},T=x.textAlign(o);let D,k,B,W,Q,pe,fe;for(n.textAlign=o,n.textBaseline="middle",n.font=p.string,e.x=B0(this,T,r),n.fillStyle=r.bodyColor,Ui(this.beforeBody,E),m=a&&T!=="right"?o==="center"?c/2+d:c+2+d:0,W=0,pe=i.length;W<pe;++W){for(D=i[W],k=this.labelTextColors[W],n.fillStyle=k,Ui(D.before,E),B=D.lines,a&&B.length&&(this._drawColorBox(n,e,W,x,r),v=Math.max(p.lineHeight,l)),Q=0,fe=B.length;Q<fe;++Q)E(B[Q]),v=p.lineHeight;Ui(D.after,E)}m=0,v=p.lineHeight,Ui(this.afterBody,E),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=pp(r.rtl,this.x,this.width);for(e.x=B0(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Ho(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:d}=r,{topLeft:p,topRight:v,bottomLeft:m,bottomRight:x}=of(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+p,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-v,l),n.quadraticCurveTo(a+c,l,a+c,l+v),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+d-x),n.quadraticCurveTo(a+c,l+d,a+c-x,l+d),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+m,l+d),n.quadraticCurveTo(a,l+d,a,l+d-m),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+p),n.quadraticCurveTo(a,l,a+p,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=xg[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=G3(this,e),l=Object.assign({},o,this._size),c=W3(n,e,l),d=q3(e,l,c,n);(i._to!==d.x||s._to!==d.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=Ja(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),LM(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),SM(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Wv(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!Wv(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=xg[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}Xe(Nb,"positioners",xg);var jee={id:"tooltip",_element:Nb,positioners:xg,afterInit(t,e,n){n&&(t.tooltip=new Nb({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ZM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},zee=Object.freeze({__proto__:null,Colors:JQ,Decimation:nee,Filler:xee,Legend:Pee,SubTitle:Tee,Title:Aee,Tooltip:jee});const $ee=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Uee(t,e,n,r){const i=t.indexOf(e);if(i===-1)return $ee(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const Vee=(t,e)=>t===null?null:aa(Math.round(t),0,e);function Z3(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Bb extends vf{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Li(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:Uee(r,e,Gr(n,e),this._addedLabels),Vee(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return Z3.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Xe(Bb,"id","category"),Xe(Bb,"defaults",{ticks:{callback:Z3}});function Hee(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:d,maxDigits:p,includeBounds:v}=t,m=s||1,x=d-1,{min:E,max:T}=e,D=!Li(o),k=!Li(a),B=!Li(c),W=(T-E)/(p+1);let Q=H5((T-E)/x/m)*m,pe,fe,O,U;if(Q<1e-14&&!D&&!k)return[{value:E},{value:T}];U=Math.ceil(T/Q)-Math.floor(E/Q),U>x&&(Q=H5(U*Q/x/m)*m),Li(l)||(pe=Math.pow(10,l),Q=Math.ceil(Q*pe)/pe),i==="ticks"?(fe=Math.floor(E/Q)*Q,O=Math.ceil(T/Q)*Q):(fe=E,O=T),D&&k&&s&&jZ((a-o)/s,Q/1e3)?(U=Math.round(Math.min((a-o)/Q,d)),Q=(a-o)/U,fe=o,O=a):B?(fe=D?o:fe,O=k?a:O,U=c-1,Q=(O-fe)/U):(U=(O-fe)/Q,Vg(U,Math.round(U),Q/1e3)?U=Math.round(U):U=Math.ceil(U));const q=Math.max(G5(Q),G5(fe));pe=Math.pow(10,Li(l)?q:l),fe=Math.round(fe*pe)/pe,O=Math.round(O*pe)/pe;let R=0;for(D&&(v&&fe!==o?(n.push({value:o}),fe<o&&R++,Vg(Math.round((fe+R*Q)*pe)/pe,o,X3(o,W,t))&&R++):fe<o&&R++);R<U;++R){const $=Math.round((fe+R*Q)*pe)/pe;if(k&&$>a)break;n.push({value:$})}return k&&v&&O!==a?n.length&&Vg(n[n.length-1].value,a,X3(a,W,t))?n[n.length-1].value=a:n.push({value:a}):(!k||O===a)&&n.push({value:O}),n}function X3(t,e,{horizontal:n,minRotation:r}){const i=gc(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class Qv extends vf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Li(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=Kc(i),c=Kc(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=Hee(i,s);return e.bounds==="ticks"&&oM(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return km(e,this.chart.options.locale,this.options.ticks.format)}}class Rb extends Qv{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=lo(e)?e:0,this.max=lo(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=gc(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Xe(Rb,"id","linear"),Xe(Rb,"defaults",{ticks:{callback:Ny.formatters.numeric}});const mm=t=>Math.floor(ld(t)),Hd=(t,e)=>Math.pow(10,mm(t)+e);function J3(t){return t/Math.pow(10,mm(t))===1}function Q3(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function Gee(t,e){const n=e-t;let r=mm(n);for(;Q3(t,e,r)>10;)r++;for(;Q3(t,e,r)<10;)r--;return Math.min(r,mm(t))}function Wee(t,{min:e,max:n}){e=gu(t.min,e);const r=[],i=mm(e);let s=Gee(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,d=Math.floor((e-l)/a/10)*a*10;let p=Math.floor((c-d)/Math.pow(10,s)),v=gu(t.min,Math.round((l+d+p*Math.pow(10,s))*o)/o);for(;v<n;)r.push({value:v,major:J3(v),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(s++,p=2,o=s>=0?1:o),v=Math.round((l+d+p*Math.pow(10,s))*o)/o;const m=gu(t.max,v);return r.push({value:m,major:J3(m),significand:p}),r}class Fb extends vf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=Qv.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return lo(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=lo(e)?Math.max(0,e):null,this.max=lo(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!lo(this._userMin)&&(this.min=e===Hd(this.min,0)?Hd(this.min,-1):Hd(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(Hd(r,-1)),o(Hd(i,1)))),r<=0&&s(Hd(i,-1)),i<=0&&o(Hd(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=Wee(n,this);return e.bounds==="ticks"&&oM(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":km(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=ld(e),this._valueRange=ld(this.max)-ld(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(ld(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}Xe(Fb,"id","logarithmic"),Xe(Fb,"defaults",{ticks:{callback:Ny.formatters.logarithmic,major:{enabled:!0}}});function jb(t){const e=t.ticks;if(e.display&&t.display){const n=Ja(e.backdropPadding);return Gr(e.font&&e.font.size,uo.font.size)+n.height}return 0}function qee(t,e,n){return n=Ts(n)?n:[n],{w:nX(t,e.string,n),h:n.length*e.lineHeight}}function eL(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function Yee(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?bs/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const d=t.getPointPosition(l,t.drawingArea+i[l],a),p=Ho(c.font),v=qee(t.ctx,p,t._pointLabels[l]);r[l]=v;const m=mu(t.getIndexAngle(l)+a),x=Math.round($_(m)),E=eL(x,d.x,v.w,0,180),T=eL(x,d.y,v.h,90,270);Kee(n,e,m,E,T)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=Jee(t,r,i)}function Kee(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function Zee(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round($_(mu(l.angle+Eo))),d=tte(l.y,a.h,c),p=Qee(c),v=ete(l.x,a.w,p);return{visible:!0,x:l.x,y:d,textAlign:p,left:v,top:d,right:v+a.w,bottom:d+a.h}}function Xee(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(Ph({x:n,y:r},e)||Ph({x:n,y:s},e)||Ph({x:i,y:r},e)||Ph({x:i,y:s},e))}function Jee(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:jb(s)/2,additionalAngle:o?bs/i:0};let c;for(let d=0;d<i;d++){l.padding=n[d],l.size=e[d];const p=Zee(t,d,l);r.push(p),a==="auto"&&(p.visible=Xee(p,c),p.visible&&(c=p))}return r}function Qee(t){return t===0||t===180?"center":t<180?"left":"right"}function ete(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function tte(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function nte(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!Li(a)){const l=of(e.borderRadius),c=Ja(e.backdropPadding);t.fillStyle=a;const d=r-c.left,p=i-c.top,v=s-r+c.width,m=o-i+c.height;Object.values(l).some(x=>x!==0)?(t.beginPath(),pm(t,{x:d,y:p,w:v,h:m,radius:l}),t.fill()):t.fillRect(d,p,v,m)}}function rte(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));nte(n,o,s);const a=Ho(o.font),{x:l,y:c,textAlign:d}=s;ff(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:d,textBaseline:"middle"})}}function XM(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,ys);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function ite(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),XM(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function ste(t,e,n){return Sd(t,{label:n,index:e,type:"pointLabel"})}class Lg extends Qv{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Ja(jb(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=lo(e)&&!isNaN(e)?e:0,this.max=lo(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/jb(this.options))}generateTickLabels(e){Qv.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=cs(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?Yee(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=ys/(this._pointLabels.length||1),r=this.options.startAngle||0;return mu(e*n+gc(r))}getDistanceFromCenterForValue(e){if(Li(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(Li(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return ste(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-Eo+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),XM(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&rte(this,o),i.display&&this.ticks.forEach((d,p)=>{if(p!==0){l=this.getDistanceFromCenterForValue(d.value);const v=this.getContext(p),m=i.setContext(v),x=s.setContext(v);ite(this,m,l,o,x)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const d=r.setContext(this.getPointLabelContext(a)),{color:p,lineWidth:v}=d;!v||!p||(e.lineWidth=v,e.strokeStyle=p,e.setLineDash(d.borderDash),e.lineDashOffset=d.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),d=Ho(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=d.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const p=Ja(c.backdropPadding);e.fillRect(-o/2-p.left,-s-d.size/2-p.top,o+p.width,d.size+p.height)}ff(e,a.label,0,-s,d,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Xe(Lg,"id","radialLinear"),Xe(Lg,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ny.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Xe(Lg,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Xe(Lg,"descriptors",{angleLines:{_fallback:"grid"}});const zy={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ql=Object.keys(zy);function tL(t,e){return t-e}function nL(t,e){if(Li(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),lo(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Sp(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function rL(t,e,n,r){const i=ql.length;for(let s=ql.indexOf(t);s<i-1;++s){const o=zy[ql[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return ql[s]}return ql[i-1]}function ote(t,e,n,r,i){for(let s=ql.length-1;s>=ql.indexOf(n);s--){const o=ql[s];if(zy[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return ql[n?ql.indexOf(n):0]}function ate(t){for(let e=ql.indexOf(t)+1,n=ql.length;e<n;++e)if(zy[ql[e]].common)return ql[e]}function iL(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=U_(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function lte(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function sL(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:lte(t,r,i,n)}class vm extends vf{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new TM._date(e.adapters.date);i.init(n),Ug(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:nL(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=lo(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=lo(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=VZ(i,s,o);return this._unit=n.unit||(r.autoSkip?rL(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):ote(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:ate(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),sL(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=aa(n,0,o),r=aa(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||rL(s.minUnit,n,r,this._getLabelCapacity(n)),a=Gr(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Sp(l)||l===!0,d={};let p=n,v,m;if(c&&(p=+e.startOf(p,"isoWeek",l)),p=+e.startOf(p,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const x=i.ticks.source==="data"&&this.getDataTimestamps();for(v=p,m=0;v<r;v=+e.add(v,a,o),m++)iL(d,v,x);return(v===r||i.bounds==="ticks"||m===1)&&iL(d,v,x),Object.keys(d).sort(tL).map(E=>+E)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return cs(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,d=l&&a[l],p=c&&a[c],v=r[n],m=c&&p&&v&&v.major;return this._adapter.format(e,i||(m?p:d))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=gc(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,sL(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(nL(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return uM(e.sort(tL))}}Xe(vm,"id","time"),Xe(vm,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function R0(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Mh(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Mh(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class zb extends vm{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=R0(n,this.min),this._tableRange=R0(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,d;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)d=i[o+1],l=i[o-1],c=i[o],Math.round((d+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(R0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return R0(this._table,r*this._tableRange+this._minPos,!0)}}Xe(zb,"id","timeseries"),Xe(zb,"defaults",vm.defaults);var ute=Object.freeze({__proto__:null,CategoryScale:Bb,LinearScale:Rb,LogarithmicScale:Fb,RadialLinearScale:Lg,TimeScale:vm,TimeSeriesScale:zb});const cte=[vJ,WQ,zee,ute];$c.register(...cte);const JM=6048e5,hte=864e5,Am=6e4,Tm=36e5,dte=1e3,oL=Symbol.for("constructDateFrom");function ho(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&oL in t?t[oL](e):t instanceof Date?new t.constructor(e):new Date(e)}function Rr(t,e){return ho(e||t,t)}function $y(t,e,n){const r=Rr(t,n==null?void 0:n.in);return isNaN(e)?ho((n==null?void 0:n.in)||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function ew(t,e,n){const r=Rr(t,n==null?void 0:n.in);if(isNaN(e))return ho(t,NaN);if(!e)return r;const i=r.getDate(),s=ho(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function tw(t,e,n){return ho(t,+Rr(t)+e)}function fte(t,e,n){return tw(t,e*Tm)}let pte={};function yf(){return pte}function Jc(t,e){var a,l,c,d;const n=yf(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,i=Rr(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Mp(t,e){return Jc(t,{...e,weekStartsOn:1})}function QM(t,e){const n=Rr(t,e==null?void 0:e.in),r=n.getFullYear(),i=ho(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=Mp(i),o=ho(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Mp(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function ey(t){const e=Rr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function bf(t,...e){const n=ho.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function $b(t,e){const n=Rr(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function eP(t,e,n){const[r,i]=bf(n==null?void 0:n.in,t,e),s=$b(r),o=$b(i),a=+s-ey(s),l=+o-ey(o);return Math.round((a-l)/hte)}function gte(t,e){const n=QM(t,e),r=ho(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Mp(r)}function mte(t,e,n){const r=Rr(t,n==null?void 0:n.in);return r.setTime(r.getTime()+e*Am),r}function vte(t,e,n){return ew(t,e*3,n)}function yte(t,e,n){return tw(t,e*1e3)}function bte(t,e,n){return $y(t,e*7,n)}function _te(t,e,n){return ew(t,e*12,n)}function qg(t,e){const n=+Rr(t)-+Rr(e);return n<0?-1:n>0?1:n}function wte(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function tP(t){return!(!wte(t)&&typeof t!="number"||isNaN(+Rr(t)))}function xte(t,e,n){const[r,i]=bf(n==null?void 0:n.in,t,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function Lte(t,e,n){const[r,i]=bf(n==null?void 0:n.in,t,e);return r.getFullYear()-i.getFullYear()}function nP(t,e,n){const[r,i]=bf(n==null?void 0:n.in,t,e),s=aL(r,i),o=Math.abs(eP(r,i));r.setDate(r.getDate()-s*o);const a=+(aL(r,i)===-s),l=s*(o-a);return l===0?0:l}function aL(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function Dm(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function Ste(t,e,n){const[r,i]=bf(n==null?void 0:n.in,t,e),s=(+r-+i)/Tm;return Dm(n==null?void 0:n.roundingMethod)(s)}function nw(t,e){return+Rr(t)-+Rr(e)}function Cte(t,e,n){const r=nw(t,e)/Am;return Dm(n==null?void 0:n.roundingMethod)(r)}function rP(t,e){const n=Rr(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function iP(t,e){const n=Rr(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Ete(t,e){const n=Rr(t,e==null?void 0:e.in);return+rP(n,e)==+iP(n,e)}function sP(t,e,n){const[r,i,s]=bf(n==null?void 0:n.in,t,t,e),o=qg(i,s),a=Math.abs(xte(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let l=qg(i,s)===-o;Ete(r)&&a===1&&qg(r,s)===1&&(l=!1);const c=o*(a-+l);return c===0?0:c}function Mte(t,e,n){const r=sP(t,e,n)/3;return Dm(n==null?void 0:n.roundingMethod)(r)}function Pte(t,e,n){const r=nw(t,e)/1e3;return Dm(n==null?void 0:n.roundingMethod)(r)}function kte(t,e,n){const r=nP(t,e,n)/7;return Dm(n==null?void 0:n.roundingMethod)(r)}function Ate(t,e,n){const[r,i]=bf(n==null?void 0:n.in,t,e),s=qg(r,i),o=Math.abs(Lte(r,i));r.setFullYear(1584),i.setFullYear(1584);const a=qg(r,i)===-s,l=s*(o-+a);return l===0?0:l}function Tte(t,e){const n=Rr(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3;return n.setMonth(i,1),n.setHours(0,0,0,0),n}function Dte(t,e){const n=Rr(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function Ite(t,e){const n=Rr(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function oP(t,e){const n=Rr(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Ote(t,e){const n=Rr(t,e==null?void 0:e.in);return n.setMinutes(59,59,999),n}function Nte(t,e){var a,l;const n=yf(),r=n.weekStartsOn??((l=(a=n.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,i=Rr(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function Bte(t,e){const n=Rr(t,e==null?void 0:e.in);return n.setSeconds(59,999),n}function Rte(t,e){const n=Rr(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3+3;return n.setMonth(i,0),n.setHours(23,59,59,999),n}function Fte(t,e){const n=Rr(t,e==null?void 0:e.in);return n.setMilliseconds(999),n}const jte={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},zte=(t,e,n)=>{let r;const i=jte[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function _2(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const $te={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ute={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Vte={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Hte={date:_2({formats:$te,defaultWidth:"full"}),time:_2({formats:Ute,defaultWidth:"full"}),dateTime:_2({formats:Vte,defaultWidth:"full"})},Gte={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Wte=(t,e,n,r)=>Gte[t];function sg(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const qte={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Yte={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Kte={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Zte={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Xte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Jte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Qte=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},ene={ordinalNumber:Qte,era:sg({values:qte,defaultWidth:"wide"}),quarter:sg({values:Yte,defaultWidth:"wide",argumentCallback:t=>t-1}),month:sg({values:Kte,defaultWidth:"wide"}),day:sg({values:Zte,defaultWidth:"wide"}),dayPeriod:sg({values:Xte,defaultWidth:"wide",formattingValues:Jte,defaultFormattingWidth:"wide"})};function og(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?nne(a,p=>p.test(o)):tne(a,p=>p.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function tne(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function nne(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function rne(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const ine=/^(\d+)(th|st|nd|rd)?/i,sne=/\d+/i,one={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ane={any:[/^b/i,/^(a|c)/i]},lne={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},une={any:[/1/i,/2/i,/3/i,/4/i]},cne={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},hne={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},dne={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},fne={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},pne={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},gne={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mne={ordinalNumber:rne({matchPattern:ine,parsePattern:sne,valueCallback:t=>parseInt(t,10)}),era:og({matchPatterns:one,defaultMatchWidth:"wide",parsePatterns:ane,defaultParseWidth:"any"}),quarter:og({matchPatterns:lne,defaultMatchWidth:"wide",parsePatterns:une,defaultParseWidth:"any",valueCallback:t=>t+1}),month:og({matchPatterns:cne,defaultMatchWidth:"wide",parsePatterns:hne,defaultParseWidth:"any"}),day:og({matchPatterns:dne,defaultMatchWidth:"wide",parsePatterns:fne,defaultParseWidth:"any"}),dayPeriod:og({matchPatterns:pne,defaultMatchWidth:"any",parsePatterns:gne,defaultParseWidth:"any"})},aP={code:"en-US",formatDistance:zte,formatLong:Hte,formatRelative:Wte,localize:ene,match:mne,options:{weekStartsOn:0,firstWeekContainsDate:1}};function vne(t,e){const n=Rr(t,e==null?void 0:e.in);return eP(n,oP(n))+1}function lP(t,e){const n=Rr(t,e==null?void 0:e.in),r=+Mp(n)-+gte(n);return Math.round(r/JM)+1}function rw(t,e){var d,p,v,m;const n=Rr(t,e==null?void 0:e.in),r=n.getFullYear(),i=yf(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(v=i.locale)==null?void 0:v.options)==null?void 0:m.firstWeekContainsDate)??1,o=ho((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=Jc(o,e),l=ho((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=Jc(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function yne(t,e){var a,l,c,d;const n=yf(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,i=rw(t,e),s=ho((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Jc(s,e)}function uP(t,e){const n=Rr(t,e==null?void 0:e.in),r=+Jc(n,e)-+yne(n,e);return Math.round(r/JM)+1}function $i(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Kh={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return $i(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):$i(n+1,2)},d(t,e){return $i(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return $i(t.getHours()%12||12,e.length)},H(t,e){return $i(t.getHours(),e.length)},m(t,e){return $i(t.getMinutes(),e.length)},s(t,e){return $i(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return $i(i,e.length)}},qf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},lL={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Kh.y(t,e)},Y:function(t,e,n,r){const i=rw(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return $i(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):$i(s,e.length)},R:function(t,e){const n=QM(t);return $i(n,e.length)},u:function(t,e){const n=t.getFullYear();return $i(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return $i(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return $i(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Kh.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return $i(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=uP(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):$i(i,e.length)},I:function(t,e,n){const r=lP(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):$i(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Kh.d(t,e)},D:function(t,e,n){const r=vne(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):$i(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return $i(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return $i(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return $i(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=qf.noon:r===0?i=qf.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=qf.evening:r>=12?i=qf.afternoon:r>=4?i=qf.morning:i=qf.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Kh.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Kh.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):$i(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):$i(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Kh.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Kh.s(t,e)},S:function(t,e){return Kh.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return cL(r);case"XXXX":case"XX":return Kd(r);case"XXXXX":case"XXX":default:return Kd(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return cL(r);case"xxxx":case"xx":return Kd(r);case"xxxxx":case"xxx":default:return Kd(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+uL(r,":");case"OOOO":default:return"GMT"+Kd(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+uL(r,":");case"zzzz":default:return"GMT"+Kd(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return $i(r,e.length)},T:function(t,e,n){return $i(+t,e.length)}};function uL(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+$i(s,2)}function cL(t,e){return t%60===0?(t>0?"-":"+")+$i(Math.abs(t)/60,2):Kd(t,e)}function Kd(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=$i(Math.trunc(r/60),2),s=$i(r%60,2);return n+i+e+s}const hL=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},cP=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},bne=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return hL(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",hL(r,e)).replace("{{time}}",cP(i,e))},Ub={p:cP,P:bne},_ne=/^D+$/,wne=/^Y+$/,xne=["D","DD","YY","YYYY"];function hP(t){return _ne.test(t)}function dP(t){return wne.test(t)}function Vb(t,e,n){const r=Lne(t,e,n);if(console.warn(r),xne.includes(t))throw new RangeError(r)}function Lne(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Sne=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Cne=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ene=/^'([^]*?)'?$/,Mne=/''/g,Pne=/[a-zA-Z]/;function kne(t,e,n){var d,p,v,m,x,E,T,D;const r=yf(),i=(n==null?void 0:n.locale)??r.locale??aP,s=(n==null?void 0:n.firstWeekContainsDate)??((p=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(v=r.locale)==null?void 0:v.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((E=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:E.weekStartsOn)??r.weekStartsOn??((D=(T=r.locale)==null?void 0:T.options)==null?void 0:D.weekStartsOn)??0,a=Rr(t,n==null?void 0:n.in);if(!tP(a))throw new RangeError("Invalid time value");let l=e.match(Cne).map(k=>{const B=k[0];if(B==="p"||B==="P"){const W=Ub[B];return W(k,i.formatLong)}return k}).join("").match(Sne).map(k=>{if(k==="''")return{isToken:!1,value:"'"};const B=k[0];if(B==="'")return{isToken:!1,value:Ane(k)};if(lL[B])return{isToken:!0,value:k};if(B.match(Pne))throw new RangeError("Format string contains an unescaped latin alphabet character `"+B+"`");return{isToken:!1,value:k}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(k=>{if(!k.isToken)return k.value;const B=k.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&dP(B)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&hP(B))&&Vb(B,e,String(t));const W=lL[B[0]];return W(a,B,i.localize,c)}).join("")}function Ane(t){const e=t.match(Ene);return e?e[1].replace(Mne,"'"):t}function Tne(){return Object.assign({},yf())}function Dne(t,e){const n=Rr(t,e==null?void 0:e.in).getDay();return n===0?7:n}function Ine(t,e){const n=One(e)?new e(0):ho(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function One(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const Nne=10;class fP{constructor(){Xe(this,"subPriority",0)}validate(e,n){return!0}}class Bne extends fP{constructor(e,n,r,i,s){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class Rne extends fP{constructor(n,r){super();Xe(this,"priority",Nne);Xe(this,"subPriority",-1);this.context=n||(i=>ho(r,i))}set(n,r){return r.timestampIsSet?n:ho(n,Ine(n,this.context))}}class Oi{run(e,n,r,i){const s=this.parse(e,n,r,i);return s?{setter:new Bne(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,n,r){return!0}}class Fne extends Oi{constructor(){super(...arguments);Xe(this,"priority",140);Xe(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,r,i){return r.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const Mo={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Uc={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Po(t,e){return t&&{value:e(t.value),rest:t.rest}}function Ks(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function Vc(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(i*Tm+s*Am+o*dte),rest:e.slice(n[0].length)}}function pP(t){return Ks(Mo.anyDigitsSigned,t)}function fo(t,e){switch(t){case 1:return Ks(Mo.singleDigit,e);case 2:return Ks(Mo.twoDigits,e);case 3:return Ks(Mo.threeDigits,e);case 4:return Ks(Mo.fourDigits,e);default:return Ks(new RegExp("^\\d{1,"+t+"}"),e)}}function ty(t,e){switch(t){case 1:return Ks(Mo.singleDigitSigned,e);case 2:return Ks(Mo.twoDigitsSigned,e);case 3:return Ks(Mo.threeDigitsSigned,e);case 4:return Ks(Mo.fourDigitsSigned,e);default:return Ks(new RegExp("^-?\\d{1,"+t+"}"),e)}}function iw(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function gP(t,e){const n=e>0,r=n?e:1-e;let i;if(r<=50)i=t||100;else{const s=r+50,o=Math.trunc(s/100)*100,a=t>=s%100;i=t+o-(a?100:0)}return n?i:1-i}function mP(t){return t%400===0||t%4===0&&t%100!==0}class jne extends Oi{constructor(){super(...arguments);Xe(this,"priority",130);Xe(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return Po(fo(4,n),s);case"yo":return Po(i.ordinalNumber(n,{unit:"year"}),s);default:return Po(fo(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i){const s=n.getFullYear();if(i.isTwoDigitYear){const a=gP(i.year,s);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class zne extends Oi{constructor(){super(...arguments);Xe(this,"priority",130);Xe(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Po(fo(4,n),s);case"Yo":return Po(i.ordinalNumber(n,{unit:"year"}),s);default:return Po(fo(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i,s){const o=rw(n,s);if(i.isTwoDigitYear){const l=gP(i.year,o);return n.setFullYear(l,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),Jc(n,s)}const a=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(a,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),Jc(n,s)}}class $ne extends Oi{constructor(){super(...arguments);Xe(this,"priority",130);Xe(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return ty(r==="R"?4:r.length,n)}set(n,r,i){const s=ho(n,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),Mp(s)}}class Une extends Oi{constructor(){super(...arguments);Xe(this,"priority",130);Xe(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return ty(r==="u"?4:r.length,n)}set(n,r,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class Vne extends Oi{constructor(){super(...arguments);Xe(this,"priority",120);Xe(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"Q":case"QQ":return fo(r.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class Hne extends Oi{constructor(){super(...arguments);Xe(this,"priority",120);Xe(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"q":case"qq":return fo(r.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class Gne extends Oi{constructor(){super(...arguments);Xe(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Xe(this,"priority",110)}parse(n,r,i){const s=o=>o-1;switch(r){case"M":return Po(Ks(Mo.month,n),s);case"MM":return Po(fo(2,n),s);case"Mo":return Po(i.ordinalNumber(n,{unit:"month"}),s);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class Wne extends Oi{constructor(){super(...arguments);Xe(this,"priority",110);Xe(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,i){const s=o=>o-1;switch(r){case"L":return Po(Ks(Mo.month,n),s);case"LL":return Po(fo(2,n),s);case"Lo":return Po(i.ordinalNumber(n,{unit:"month"}),s);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function qne(t,e,n){const r=Rr(t,n==null?void 0:n.in),i=uP(r,n)-e;return r.setDate(r.getDate()-i*7),Rr(r,n==null?void 0:n.in)}class Yne extends Oi{constructor(){super(...arguments);Xe(this,"priority",100);Xe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,i){switch(r){case"w":return Ks(Mo.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return fo(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i,s){return Jc(qne(n,i,s),s)}}function Kne(t,e,n){const r=Rr(t,n==null?void 0:n.in),i=lP(r,n)-e;return r.setDate(r.getDate()-i*7),r}class Zne extends Oi{constructor(){super(...arguments);Xe(this,"priority",100);Xe(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,i){switch(r){case"I":return Ks(Mo.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return fo(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i){return Mp(Kne(n,i))}}const Xne=[31,28,31,30,31,30,31,31,30,31,30,31],Jne=[31,29,31,30,31,30,31,31,30,31,30,31];class Qne extends Oi{constructor(){super(...arguments);Xe(this,"priority",90);Xe(this,"subPriority",1);Xe(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"d":return Ks(Mo.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return fo(r.length,n)}}validate(n,r){const i=n.getFullYear(),s=mP(i),o=n.getMonth();return s?r>=1&&r<=Jne[o]:r>=1&&r<=Xne[o]}set(n,r,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class ere extends Oi{constructor(){super(...arguments);Xe(this,"priority",90);Xe(this,"subpriority",1);Xe(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,i){switch(r){case"D":case"DD":return Ks(Mo.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return fo(r.length,n)}}validate(n,r){const i=n.getFullYear();return mP(i)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function sw(t,e,n){var p,v,m,x;const r=yf(),i=(n==null?void 0:n.weekStartsOn)??((v=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((x=(m=r.locale)==null?void 0:m.options)==null?void 0:x.weekStartsOn)??0,s=Rr(t,n==null?void 0:n.in),o=s.getDay(),l=(e%7+7)%7,c=7-i,d=e<0||e>6?e-(o+c)%7:(l+c)%7-(o+c)%7;return $y(s,d,n)}class tre extends Oi{constructor(){super(...arguments);Xe(this,"priority",90);Xe(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=sw(n,i,s),n.setHours(0,0,0,0),n}}class nre extends Oi{constructor(){super(...arguments);Xe(this,"priority",90);Xe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return Po(fo(r.length,n),o);case"eo":return Po(i.ordinalNumber(n,{unit:"day"}),o);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=sw(n,i,s),n.setHours(0,0,0,0),n}}class rre extends Oi{constructor(){super(...arguments);Xe(this,"priority",90);Xe(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return Po(fo(r.length,n),o);case"co":return Po(i.ordinalNumber(n,{unit:"day"}),o);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=sw(n,i,s),n.setHours(0,0,0,0),n}}function ire(t,e,n){const r=Rr(t,n==null?void 0:n.in),i=Dne(r,n),s=e-i;return $y(r,s,n)}class sre extends Oi{constructor(){super(...arguments);Xe(this,"priority",90);Xe(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,i){const s=o=>o===0?7:o;switch(r){case"i":case"ii":return fo(r.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return Po(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiii":return Po(i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Po(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Po(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s)}}validate(n,r){return r>=1&&r<=7}set(n,r,i){return n=ire(n,i),n.setHours(0,0,0,0),n}}class ore extends Oi{constructor(){super(...arguments);Xe(this,"priority",80);Xe(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(iw(i),0,0,0),n}}class are extends Oi{constructor(){super(...arguments);Xe(this,"priority",80);Xe(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(iw(i),0,0,0),n}}class lre extends Oi{constructor(){super(...arguments);Xe(this,"priority",80);Xe(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(iw(i),0,0,0),n}}class ure extends Oi{constructor(){super(...arguments);Xe(this,"priority",70);Xe(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,i){switch(r){case"h":return Ks(Mo.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return fo(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,i){const s=n.getHours()>=12;return s&&i<12?n.setHours(i+12,0,0,0):!s&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class cre extends Oi{constructor(){super(...arguments);Xe(this,"priority",70);Xe(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,i){switch(r){case"H":return Ks(Mo.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return fo(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,i){return n.setHours(i,0,0,0),n}}class hre extends Oi{constructor(){super(...arguments);Xe(this,"priority",70);Xe(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,i){switch(r){case"K":return Ks(Mo.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return fo(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class dre extends Oi{constructor(){super(...arguments);Xe(this,"priority",70);Xe(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,i){switch(r){case"k":return Ks(Mo.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return fo(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,i){const s=i<=24?i%24:i;return n.setHours(s,0,0,0),n}}class fre extends Oi{constructor(){super(...arguments);Xe(this,"priority",60);Xe(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"m":return Ks(Mo.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return fo(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setMinutes(i,0,0),n}}class pre extends Oi{constructor(){super(...arguments);Xe(this,"priority",50);Xe(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"s":return Ks(Mo.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return fo(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setSeconds(i,0),n}}class gre extends Oi{constructor(){super(...arguments);Xe(this,"priority",30);Xe(this,"incompatibleTokens",["t","T"])}parse(n,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return Po(fo(r.length,n),i)}set(n,r,i){return n.setMilliseconds(i),n}}class mre extends Oi{constructor(){super(...arguments);Xe(this,"priority",10);Xe(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return Vc(Uc.basicOptionalMinutes,n);case"XX":return Vc(Uc.basic,n);case"XXXX":return Vc(Uc.basicOptionalSeconds,n);case"XXXXX":return Vc(Uc.extendedOptionalSeconds,n);case"XXX":default:return Vc(Uc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:ho(n,n.getTime()-ey(n)-i)}}class vre extends Oi{constructor(){super(...arguments);Xe(this,"priority",10);Xe(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return Vc(Uc.basicOptionalMinutes,n);case"xx":return Vc(Uc.basic,n);case"xxxx":return Vc(Uc.basicOptionalSeconds,n);case"xxxxx":return Vc(Uc.extendedOptionalSeconds,n);case"xxx":default:return Vc(Uc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:ho(n,n.getTime()-ey(n)-i)}}class yre extends Oi{constructor(){super(...arguments);Xe(this,"priority",40);Xe(this,"incompatibleTokens","*")}parse(n){return pP(n)}set(n,r,i){return[ho(n,i*1e3),{timestampIsSet:!0}]}}class bre extends Oi{constructor(){super(...arguments);Xe(this,"priority",20);Xe(this,"incompatibleTokens","*")}parse(n){return pP(n)}set(n,r,i){return[ho(n,i),{timestampIsSet:!0}]}}const _re={G:new Fne,y:new jne,Y:new zne,R:new $ne,u:new Une,Q:new Vne,q:new Hne,M:new Gne,L:new Wne,w:new Yne,I:new Zne,d:new Qne,D:new ere,E:new tre,e:new nre,c:new rre,i:new sre,a:new ore,b:new are,B:new lre,h:new ure,H:new cre,K:new hre,k:new dre,m:new fre,s:new pre,S:new gre,X:new mre,x:new vre,t:new yre,T:new bre},wre=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,xre=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Lre=/^'([^]*?)'?$/,Sre=/''/g,Cre=/\S/,Ere=/[a-zA-Z]/;function Mre(t,e,n,r){var T,D,k,B,W,Q,pe,fe;const i=()=>ho((r==null?void 0:r.in)||n,NaN),s=Tne(),o=(r==null?void 0:r.locale)??s.locale??aP,a=(r==null?void 0:r.firstWeekContainsDate)??((D=(T=r==null?void 0:r.locale)==null?void 0:T.options)==null?void 0:D.firstWeekContainsDate)??s.firstWeekContainsDate??((B=(k=s.locale)==null?void 0:k.options)==null?void 0:B.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((Q=(W=r==null?void 0:r.locale)==null?void 0:W.options)==null?void 0:Q.weekStartsOn)??s.weekStartsOn??((fe=(pe=s.locale)==null?void 0:pe.options)==null?void 0:fe.weekStartsOn)??0;if(!e)return t?i():Rr(n,r==null?void 0:r.in);const c={firstWeekContainsDate:a,weekStartsOn:l,locale:o},d=[new Rne(r==null?void 0:r.in,n)],p=e.match(xre).map(O=>{const U=O[0];if(U in Ub){const q=Ub[U];return q(O,o.formatLong)}return O}).join("").match(wre),v=[];for(let O of p){!(r!=null&&r.useAdditionalWeekYearTokens)&&dP(O)&&Vb(O,e,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&hP(O)&&Vb(O,e,t);const U=O[0],q=_re[U];if(q){const{incompatibleTokens:R}=q;if(Array.isArray(R)){const X=v.find(K=>R.includes(K.token)||K.token===U);if(X)throw new RangeError(`The format string mustn't contain \`${X.fullToken}\` and \`${O}\` at the same time`)}else if(q.incompatibleTokens==="*"&&v.length>0)throw new RangeError(`The format string mustn't contain \`${O}\` and any other token at the same time`);v.push({token:U,fullToken:O});const $=q.run(t,O,o.match,c);if(!$)return i();d.push($.setter),t=$.rest}else{if(U.match(Ere))throw new RangeError("Format string contains an unescaped latin alphabet character `"+U+"`");if(O==="''"?O="'":U==="'"&&(O=Pre(O)),t.indexOf(O)===0)t=t.slice(O.length);else return i()}}if(t.length>0&&Cre.test(t))return i();const m=d.map(O=>O.priority).sort((O,U)=>U-O).filter((O,U,q)=>q.indexOf(O)===U).map(O=>d.filter(U=>U.priority===O).sort((U,q)=>q.subPriority-U.subPriority)).map(O=>O[0]);let x=Rr(n,r==null?void 0:r.in);if(isNaN(+x))return i();const E={};for(const O of m){if(!O.validate(x,c))return i();const U=O.set(x,E,c);Array.isArray(U)?(x=U[0],Object.assign(E,U[1])):x=U}return x}function Pre(t){return t.match(Lre)[1].replace(Sre,"'")}function kre(t,e){const n=Rr(t,e==null?void 0:e.in);return n.setMinutes(0,0,0),n}function Are(t,e){const n=Rr(t,e==null?void 0:e.in);return n.setSeconds(0,0),n}function Tre(t,e){const n=Rr(t,e==null?void 0:e.in);return n.setMilliseconds(0),n}function Dre(t,e){const n=()=>ho(e==null?void 0:e.in,NaN),r=(e==null?void 0:e.additionalDigits)??2,i=Bre(t);let s;if(i.date){const c=Rre(i.date,r);s=Fre(c.restDateString,c.year)}if(!s||isNaN(+s))return n();const o=+s;let a=0,l;if(i.time&&(a=jre(i.time),isNaN(a)))return n();if(i.timezone){if(l=zre(i.timezone),isNaN(l))return n()}else{const c=new Date(o+a),d=Rr(0,e==null?void 0:e.in);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return Rr(o+a+l,e==null?void 0:e.in)}const F0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Ire=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Ore=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Nre=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Bre(t){const e={},n=t.split(F0.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],F0.timeZoneDelimiter.test(e.date)&&(e.date=t.split(F0.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=F0.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function Rre(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function Fre(t,e){if(e===null)return new Date(NaN);const n=t.match(Ire);if(!n)return new Date(NaN);const r=!!n[4],i=ag(n[1]),s=ag(n[2])-1,o=ag(n[3]),a=ag(n[4]),l=ag(n[5])-1;if(r)return Gre(e,a,l)?$re(e,a,l):new Date(NaN);{const c=new Date(0);return!Vre(e,s,o)||!Hre(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function ag(t){return t?parseInt(t):1}function jre(t){const e=t.match(Ore);if(!e)return NaN;const n=w2(e[1]),r=w2(e[2]),i=w2(e[3]);return Wre(n,r,i)?n*Tm+r*Am+i*1e3:NaN}function w2(t){return t&&parseFloat(t.replace(",","."))||0}function zre(t){if(t==="Z")return 0;const e=t.match(Nre);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return qre(r,i)?n*(r*Tm+i*Am):NaN}function $re(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const Ure=[31,null,31,30,31,30,31,31,30,31,30,31];function vP(t){return t%400===0||t%4===0&&t%100!==0}function Vre(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(Ure[e]||(vP(t)?29:28))}function Hre(t,e){return e>=1&&e<=(vP(t)?366:365)}function Gre(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function Wre(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function qre(t,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const Yre={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};TM._date.override({_id:"date-fns",formats:function(){return Yre},parse:function(t,e){if(t===null||typeof t>"u")return null;const n=typeof t;return n==="number"||t instanceof Date?t=Rr(t):n==="string"&&(typeof e=="string"?t=Mre(t,e,new Date,this.options):t=Dre(t,this.options)),tP(t)?t.getTime():null},format:function(t,e){return kne(t,e,this.options)},add:function(t,e,n){switch(n){case"millisecond":return tw(t,e);case"second":return yte(t,e);case"minute":return mte(t,e);case"hour":return fte(t,e);case"day":return $y(t,e);case"week":return bte(t,e);case"month":return ew(t,e);case"quarter":return vte(t,e);case"year":return _te(t,e);default:return t}},diff:function(t,e,n){switch(n){case"millisecond":return nw(t,e);case"second":return Pte(t,e);case"minute":return Cte(t,e);case"hour":return Ste(t,e);case"day":return nP(t,e);case"week":return kte(t,e);case"month":return sP(t,e);case"quarter":return Mte(t,e);case"year":return Ate(t,e);default:return 0}},startOf:function(t,e,n){switch(e){case"second":return Tre(t);case"minute":return Are(t);case"hour":return kre(t);case"day":return $b(t);case"week":return Jc(t);case"isoWeek":return Jc(t,{weekStartsOn:+n});case"month":return Dte(t);case"quarter":return Tte(t);case"year":return oP(t);default:return t}},endOf:function(t,e){switch(e){case"second":return Fte(t);case"minute":return Bte(t);case"hour":return Ote(t);case"day":return rP(t);case"week":return Nte(t);case"month":return iP(t);case"quarter":return Rte(t);case"year":return Ite(t);default:return t}}});const Kre={class:"container mx-auto px-4 py-8 min-h-full"},Zre={class:"mb-8"},Xre={key:0,class:"mb-6"},Jre={class:"flex gap-4"},Qre=["disabled"],eie={key:0,value:""},tie=["value"],nie={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},rie={class:"flex"},iie={class:"ml-3"},sie={class:"text-sm font-medium text-red-800"},oie={key:2,class:"mb-6 p-6 bg-gray-100 border border-gray-300 rounded-md text-center"},aie={class:"flex flex-col items-center"},lie={class:"text-gray-600 mb-4"},uie={key:0,class:"mt-2"},cie={key:3,class:"mb-6"},hie={class:"flex gap-4"},die=["disabled"],fie={key:0,value:""},pie={key:1,value:""},gie=["value"],mie=["disabled"],vie={key:0,class:"mt-4 bg-white rounded-lg shadow-md p-4"},yie={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},bie={class:"font-medium"},_ie={class:"font-medium"},wie={class:"font-medium"},xie={class:"text-gray-500"},Lie={class:"font-medium"},Sie={class:"font-medium"},Cie={class:"font-medium"},Eie={class:"md:col-span-2 lg:col-span-3 flex items-center"},Mie=["href"],Pie={key:4,class:"mb-6"},kie={class:"border-b border-gray-200"},Aie={class:"-mb-px flex space-x-8","aria-label":"Tabs"},Tie=["onClick"],Die={key:5,class:"mb-8"},Iie={class:"flex justify-between items-center mb-4"},Oie={class:"text-sm text-gray-600"},Nie={key:0,class:"flex items-center"},Bie={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Rie={class:"bg-white rounded-lg shadow-md p-6"},Fie={class:"text-4xl font-bold text-primary-600 mb-2"},jie={class:"text-sm text-gray-600"},zie={class:"bg-white rounded-lg shadow-md p-6"},$ie={class:"text-4xl font-bold text-primary-600 mb-2"},Uie={class:"mt-4"},Vie={class:"w-full bg-gray-200 rounded-full h-2.5"},Hie={class:"bg-white rounded-lg shadow-md p-6"},Gie={class:"text-4xl font-bold text-primary-600 mb-2"},Wie={class:"text-sm text-gray-600"},qie={class:"bg-white rounded-lg shadow-md p-6"},Yie={class:"text-4xl font-bold text-primary-600 mb-2"},Kie={class:"text-sm text-gray-600"},Zie={class:"bg-white rounded-lg shadow-md p-6"},Xie={class:"text-4xl font-bold text-primary-600 mb-2"},Jie={class:"text-sm text-gray-600"},Qie={class:"bg-white rounded-lg shadow-md p-6"},ese={class:"text-4xl font-bold text-primary-600 mb-2"},tse={class:"text-sm text-gray-600"},nse={key:6,class:"mb-8"},rse={class:"flex justify-between items-center mb-4"},ise={class:"text-sm text-gray-600"},sse={class:"flex items-center"},ose={key:0,class:"flex items-center mr-3"},ase=["disabled"],lse={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},use={key:0,class:"md:col-span-2 grid grid-cols-2 gap-4"},cse=["value"],hse={key:0,class:"mt-1 text-sm text-red-600"},dse={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},fse={class:"bg-white rounded-lg shadow-md p-6"},pse={class:"chart-container"},gse={class:"bg-white rounded-lg shadow-md p-6"},mse={class:"chart-container"},vse={class:"bg-white rounded-lg shadow-md p-6"},yse={class:"chart-container"},bse={class:"bg-white rounded-lg shadow-md p-6"},_se={class:"chart-container"},wse={class:"bg-white rounded-lg shadow-md p-6"},xse={class:"chart-container"},Lse={class:"bg-white rounded-lg shadow-md p-6"},Sse={class:"chart-container"},Cse=_s({__name:"MeteoView",setup(t){const e=Zl(),n=co(),r=_t({}),i=_t(new Date),s=_t(""),o=_t([]),a=_t(""),l=_t([]),c=_t(null),d=_t(""),p=_t(""),v=_t(!1);qn(()=>{var he;return((he=n.user)==null?void 0:he.user_type)||""});const m=qn(()=>n.isAdmin);let x=null;const E=qn(()=>!a.value||!o.value.length?null:o.value.find(he=>he.mac===a.value));function T(he){return he?he.latitude&&he.longitude&&he.latitude!==0&&he.longitude!==0:!1}function D(he){return T(he)?`${he.latitude.toFixed(6)}, ${he.longitude.toFixed(6)}`:""}function k(he){if(!T(he))return"#";const ee=he.latitude,be=he.longitude,je=encodeURIComponent(he.name||"Station météo");return`https://www.google.com/maps/search/?api=1&query=${ee},${be}&query_place_id=${je}`}async function B(){try{d.value="";const he={};m.value&&c.value&&(he.entreprise=c.value),console.log("[fetchDevices] Appel API avec params:",he);const ee=await I1.getDevices(he);console.log("[fetchDevices] Réponse API:",ee.data);let be=[];if(ee.data&&ee.data.devices&&Array.isArray(ee.data.devices)&&ee.data.devices.length>0&&typeof ee.data.devices[1]=="string"){let je=ee.data.devices[1];d.value=je,console.warn("[fetchDevices] Message d'erreur API reçu:",d.value);return}if(ee.data&&ee.data.devices&&Array.isArray(ee.data.devices))be=ee.data.devices;else if(Array.isArray(ee.data))be=ee.data;else if(typeof ee.data=="object"&&ee.data!==null){for(const je in ee.data)if(Array.isArray(ee.data[je])){be=ee.data[je];break}}o.value=be.filter(je=>je!==null&&typeof je=="object").map(je=>{var Qe,Je;const We=je.mac||je.imei;return{id:je.id,name:je.name||`Station ${We}`,mac:We,model:((Qe=je.stationtype)==null?void 0:Qe.split("_")[0])||"Inconnu",firmware_version:(Je=je.stationtype)!=null&&Je.includes("_V")?je.stationtype.split("_V")[1]:"1.0",timezone:je.date_zone_id||"UTC",created_at:je.createtime?new Date(je.createtime*1e3).toISOString():new Date().toISOString(),latitude:je.latitude||0,longitude:je.longitude||0}}),console.log("[fetchDevices] Appareils normalisés:",o.value),o.value.length>0?a.value=o.value[0].mac:(console.warn("[fetchDevices] Aucun appareil disponible"),r.value={})}catch(he){console.error("[fetchDevices] Erreur lors de la récupération des appareils:",he),he.response&&he.response.data&&he.response.data.error?d.value=he.response.data.error:(d.value="Erreur lors de la récupération des stations météo",e.error("Erreur lors de la récupération des stations météo")),o.value=[],a.value="",r.value={}}}async function W(){try{if(!a.value){console.warn("[fetchWeatherData] Aucun appareil sélectionné");return}d.value="",v.value=!0;const he={mac:a.value};m.value&&c.value&&(he.entreprise=c.value),console.log("[fetchWeatherData] Appel API avec params:",he);const ee=await I1.getRealTimeData(he);console.log("[fetchWeatherData] Réponse API:",ee.data),console.log("[fetchWeatherData] Structure de la réponse:",{hasData:ee.data&&"data"in ee.data,hasCode:ee.data&&"code"in ee.data,topLevelKeys:ee.data?Object.keys(ee.data):[]});let be;ee.data&&"data"in ee.data?be=ee.data.data:ee.data&&("outdoor"in ee.data||"indoor"in ee.data)?be=ee.data:(be={},console.warn("[fetchWeatherData] Format de réponse non reconnu")),r.value=be,i.value=new Date,s.value=new Date().toLocaleString(),d.value=""}catch(he){console.error("[fetchWeatherData] Erreur lors de la récupération des données météo:",he),he.response&&he.response.data&&he.response.data.error?d.value=he.response.data.error:(d.value="Erreur lors de la récupération des données météo",e.error("Erreur lors de la récupération des données météo")),r.value={}}finally{v.value=!1}}function Q(he){if(he==null)return"0";const ee=typeof he=="string"?parseFloat(he):he;return isNaN(ee)?"0":((ee-32)*5/9).toFixed(1)}function pe(he){if(he==null)return"0";const ee=typeof he=="string"?parseFloat(he):he;return isNaN(ee)?"0":(ee*1.60934).toFixed(1)}function fe(he){if(he==null)return"0";const ee=typeof he=="string"?parseFloat(he):he;return isNaN(ee)?"0":(ee*25.4).toFixed(1)}function O(he){if(he==null)return"0";const ee=typeof he=="string"?parseFloat(he):he;return isNaN(ee)?"0":(ee*33.8639).toFixed(1)}function U(he){if(!he)return"N/A";const ee=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSO","SO","OSO","O","ONO","NO","NNO"],be=Math.round(he/22.5)%16;return ee[be]}function q(he){return he?he>0?"En hausse":"En baisse":"Stable"}async function R(){if(m.value)try{const he=await xa.getUsers({role:"ENTREPRISE"});l.value=he.data,l.value.length>0&&!c.value&&(c.value=l.value[0].id)}catch(he){console.error("Erreur lors de la récupération des entreprises:",he),e.error("Erreur lors de la récupération des entreprises")}}async function $(){try{o.value=[],a.value="",r.value={},d.value="",Object.values(oe).forEach(he=>{try{he.destroy()}catch(ee){console.error("Erreur lors de la destruction d'un graphique:",ee)}}),oe={},await B()}catch(he){console.error("Erreur lors de la récupération des appareils avec l'entreprise:",he),e.error("Erreur lors du changement d'entreprise")}}const X=[{id:"realtime",name:"Temps réel"},{id:"history",name:"Historique"}],K=_t("realtime"),F=_t("today"),N=_t("5min"),J=_t(""),Y=_t(""),ye=()=>{const he=new Date,ee=new Date(he);ee.setDate(he.getDate()-1),J.value=ee.toISOString().split("T")[0],Y.value=ee.toISOString().split("T")[0]},Ce=[{value:"5min",label:"5 minutes",maxDays:1,maxPastDays:90},{value:"30min",label:"30 minutes",maxDays:7,maxPastDays:365},{value:"4hour",label:"4 heures",maxDays:31,maxPastDays:730},{value:"1day",label:"1 jour",maxDays:365,maxPastDays:1460}],He=qn(()=>{const he=re(),ee=new Date(he.start),be=new Date(he.end);be.setHours(23,59,59,999);const je=Math.abs(be.getTime()-ee.getTime()),We=Math.ceil(je/(1e3*60*60*24)),Je=Math.abs(new Date().getTime()-ee.getTime()),st=Math.ceil(Je/(1e3*60*60*24));return Ce.filter(Pt=>We<=Pt.maxDays&&st<=Pt.maxPastDays)});ni(F,he=>{he==="custom"&&ye(),!He.value.some(be=>be.value===N.value)&&He.value.length>0&&(N.value=He.value[0].value)}),ni([J,Y],()=>{F.value==="custom"&&!He.value.some(ee=>ee.value===N.value)&&He.value.length>0&&(N.value=He.value[0].value)});const j=_t(null),Z=_t(null),ae=_t(null),de=_t(null),ge=_t(null),me=_t(null);let oe={};const re=()=>{let he=new Date,ee=new Date;switch(F.value){case"today":he.setHours(0,0,0,0);break;case"yesterday":he.setDate(he.getDate()-1),he.setHours(0,0,0,0),ee.setDate(ee.getDate()-1),ee.setHours(23,59,59,999);break;case"week":he.setDate(he.getDate()-7);break;case"month":he.setDate(he.getDate()-30);break;case"custom":he=new Date(J.value),ee=new Date(Y.value);break}return{start:he.toISOString().split("T")[0],end:ee.toISOString().split("T")[0]}},Te=async()=>{try{if(Le.value){console.log("[updateAllCharts] Mise à jour déjà en cours, annulation");return}if(Le.value=!0,He.value.length===0){e.warning("Aucun intervalle disponible pour cette période"),Le.value=!1;return}He.value.some(je=>je.value===N.value)||(N.value=He.value[0].value),console.log("[updateAllCharts] Début de la mise à jour des graphiques");const ee=re(),be={mac:a.value,start_date:ee.start,end_date:ee.end,cycle_type:N.value};m.value&&c.value&&(be.entreprise=c.value),console.log("[updateAllCharts] Récupération des données historiques:",be);try{const We=(await I1.getHistoryData(be)).data;console.log("[updateAllCharts] Données historiques reçues:",We);const Qe=[{type:"temp",ref:j},{type:"humidity",ref:Z},{type:"pressure",ref:ae},{type:"wind",ref:de},{type:"rain",ref:ge},{type:"solar",ref:me}];for(const Je of Qe)if(console.log(`[updateAllCharts] Mise à jour du graphique ${Je.type}`),Je.ref.value){const st=le(We,Je.type);qe(Je.type,Je.ref.value,st)}s.value=new Date().toLocaleString()}catch(je){console.error("[updateAllCharts] Erreur lors de la récupération des données:",je),e.error("Erreur lors de la récupération des données historiques")}finally{Le.value=!1}}catch(he){console.error("[updateAllCharts] Erreur lors de la mise à jour des graphiques:",he),e.error("Erreur lors de la mise à jour des graphiques"),Le.value=!1}},Le=_t(!1),qe=(he,ee,be)=>{try{if(oe[he]&&(oe[he].destroy(),delete oe[he]),console.log(`[updateChart] Données reçues pour ${he}:`,be),!be.datasets||!be.datasets.length){console.warn(`[updateChart] Pas de datasets pour ${he}`),oe[he]=new $c(ee,{type:"line",data:{labels:[],datasets:[]},options:{plugins:{title:{display:!0,text:"Aucune donnée disponible"}}}});return}let je="hour";N.value==="5min"||N.value==="30min"?je="hour":(N.value==="4hour"||N.value==="1day")&&(je="day");const We=re(),Qe=new Date(We.start),Je=new Date(We.end);Je.setHours(23,59,59,999);const st={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{title:function(Pt){return Pt.length>0?new Date(Pt[0].parsed.x).toLocaleString():""}}}},scales:{x:{type:"time",time:{unit:je,displayFormats:{hour:"HH:mm",day:"dd/MM",week:"dd/MM",month:"MM/yyyy"}},min:Qe.getTime(),max:Je.getTime(),title:{display:!0,text:"Date/Heure"}},y:{beginAtZero:!0,title:{display:!0,text:se(he)},ticks:{callback:function(Pt){const Bt=typeof Pt=="string"?parseFloat(Pt):Pt;switch(he){case"temp":return Bt.toFixed(1)+"°C";case"humidity":return Bt.toFixed(0)+"%";case"pressure":return Bt.toFixed(0)+" hPa";case"wind":case"rain":return Bt.toFixed(1)+(he==="wind"?" km/h":" mm");case"solar":return Bt.toFixed(0)+" W/m²";default:return Bt}}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};oe[he]=new $c(ee,{type:"line",data:{datasets:be.datasets||[]},options:st}),console.log(`[updateChart] Graphique ${he} créé avec ${be.datasets.length} datasets`)}catch(je){console.error(`[updateChart] Erreur lors de la mise à jour du graphique ${he}:`,je)}},se=he=>{switch(he){case"temp":return"Température (°C)";case"humidity":return"Humidité (%)";case"pressure":return"Pression (hPa)";case"wind":return"Vitesse (km/h)";case"rain":return"Précipitations (mm)";case"solar":return"Rayonnement (W/m²)";default:return""}},le=(he,ee)=>{var Qe,Je,st,Pt,Bt,Ht,Jt,fn,pn,et,ot,rt,Ft,Xt,Mn,xn,Cn,Vn,wn;if(console.log(`[formatHistoryDataForChart] Données reçues pour ${ee}:`,he),!he)return console.warn(`[formatHistoryDataForChart] Pas de données pour ${ee}`),null;let be;if("data"in he)be=he.data;else if(ee in he)be=he;else return console.warn(`[formatHistoryDataForChart] Structure de données non reconnue pour ${ee}`),null;console.log(`[formatHistoryDataForChart] Données extraites pour ${ee}:`,be);const je=[],We=(sn,hn,Qn,ir)=>{if(!Array.isArray(sn)){console.warn(`[formatHistoryDataForChart] Les données pour ${hn} ne sont pas un tableau`);return}const dr=sn.map(Fn=>{const Mr=parseFloat(String(Fn.value));return{x:Fn.time,y:ir?ir(Mr):Mr}}).filter(Fn=>!isNaN(Fn.y));dr.length>0&&je.push({label:hn,data:dr,borderColor:Qn,fill:!1,tension:.4})};switch(ee){case"temp":(Je=(Qe=be.outdoor)==null?void 0:Qe.temperature)!=null&&Je.list?We(Object.entries(be.outdoor.temperature.list).map(([sn,hn])=>({time:parseInt(sn)*1e3,value:hn})),"Température","#FF6384",sn=>(sn-32)*5/9):(st=be.outdoor)!=null&&st.temperature&&We(be.outdoor.temperature,"Température","#FF6384",sn=>(sn-32)*5/9);break;case"humidity":(Bt=(Pt=be.outdoor)==null?void 0:Pt.humidity)!=null&&Bt.list?We(Object.entries(be.outdoor.humidity.list).map(([sn,hn])=>({time:parseInt(sn)*1e3,value:hn})),"Humidité","#36A2EB"):(Ht=be.outdoor)!=null&&Ht.humidity&&We(be.outdoor.humidity,"Humidité","#36A2EB");break;case"pressure":(fn=(Jt=be.pressure)==null?void 0:Jt.absolute)!=null&&fn.list?We(Object.entries(be.pressure.absolute.list).map(([sn,hn])=>({time:parseInt(sn)*1e3,value:hn})),"Pression","#4BC0C0",sn=>sn*33.8639):(pn=be.pressure)!=null&&pn.absolute&&We(be.pressure.absolute,"Pression","#4BC0C0",sn=>sn*33.8639);break;case"wind":(ot=(et=be.wind)==null?void 0:et.wind_speed)!=null&&ot.list?(We(Object.entries(be.wind.wind_speed.list).map(([sn,hn])=>({time:parseInt(sn)*1e3,value:hn})),"Vitesse du vent","#FFCE56",sn=>sn*1.60934),(rt=be.wind.wind_gust)!=null&&rt.list&&We(Object.entries(be.wind.wind_gust.list).map(([sn,hn])=>({time:parseInt(sn)*1e3,value:hn})),"Rafales","#FF9F40",sn=>sn*1.60934)):(Ft=be.wind)!=null&&Ft.wind_speed&&(We(be.wind.wind_speed,"Vitesse du vent","#FFCE56",sn=>sn*1.60934),be.wind.wind_gust&&We(be.wind.wind_gust,"Rafales","#FF9F40",sn=>sn*1.60934));break;case"rain":(Mn=(Xt=be.rainfall)==null?void 0:Xt.daily)!=null&&Mn.list?We(Object.entries(be.rainfall.daily.list).map(([sn,hn])=>({time:parseInt(sn)*1e3,value:hn})),"Précipitations journalières","#9966FF",sn=>sn*25.4):(xn=be.rainfall)!=null&&xn.daily&&We(be.rainfall.daily,"Précipitations journalières","#9966FF",sn=>sn*25.4);break;case"solar":(Vn=(Cn=be.solar_and_uvi)==null?void 0:Cn.solar)!=null&&Vn.list?We(Object.entries(be.solar_and_uvi.solar.list).map(([sn,hn])=>({time:parseInt(sn)*1e3,value:hn})),"Rayonnement solaire","#FF9F40"):(wn=be.solar_and_uvi)!=null&&wn.solar&&We(be.solar_and_uvi.solar,"Rayonnement solaire","#FF9F40");break}return console.log(`[formatHistoryDataForChart] Datasets générés pour ${ee}:`,je),{datasets:je}};return $u(()=>{Object.values(oe).forEach(he=>he.destroy())}),ni([F,N,J,Y],()=>{K.value==="history"&&a.value&&Te()}),Ds(async()=>{const he=[];m.value&&he.push(R()),await Promise.all(he),await B(),x=window.setInterval(W,5*60*1e3)}),ni(c,async he=>{m.value&&(console.log("[watch selectedCompany] Nouvelle entreprise sélectionnée:",he),await B())}),ni(a,he=>{he?(console.log("[watch selectedDevice] Nouvelle station sélectionnée:",he),W(),K.value==="history"&&Te()):(console.log("[watch selectedDevice] Aucune station sélectionnée"),r.value={})}),ni(K,he=>{he==="history"&&a.value&&Te()}),$u(()=>{x&&clearInterval(x)}),(he,ee)=>{var je,We,Qe,Je,st,Pt,Bt,Ht,Jt,fn,pn,et,ot,rt,Ft,Xt,Mn,xn,Cn,Vn,wn,sn,hn,Qn,ir,dr,Fn,Mr,ns,Pi,Xs,ds,Yn,mt,tt,Dt,mn,Vt,jn;const be=h_("router-link");return De(),Ne("div",Kre,[C("div",Zre,[ee[41]||(ee[41]=C("h1",{class:"text-3xl font-bold mb-4"},"Météo",-1)),m.value?(De(),Ne("div",Xre,[ee[6]||(ee[6]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sélectionner une entreprise ",-1)),C("div",Jre,[On(C("select",{"onUpdate:modelValue":ee[0]||(ee[0]=vn=>c.value=vn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!l.value.length,onChange:$},[l.value.length?Wt("",!0):(De(),Ne("option",eie,"Chargement des entreprises...")),(De(!0),Ne(_n,null,Wn(l.value,vn=>(De(),Ne("option",{key:vn.id,value:vn.id},Tt(vn.company_name||`${vn.first_name} ${vn.last_name}`),9,tie))),128))],40,Qre),[[Mi,c.value]])])])):Wt("",!0),d.value?(De(),Ne("div",nie,[C("div",rie,[ee[7]||(ee[7]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",iie,[C("h3",sie,Tt(d.value),1)])])])):Wt("",!0),d.value&&(d.value.includes("clés API")||d.value.includes("Ecowitt"))?(De(),Ne("div",oie,[C("div",aie,[ee[9]||(ee[9]=C("svg",{class:"h-12 w-12 text-gray-400 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})],-1)),ee[10]||(ee[10]=C("h2",{class:"text-xl font-bold text-gray-700 mb-2"},"Configuration requise",-1)),C("p",lie,Tt(d.value),1),d.value.includes("ajouter dans la gestion")?(De(),Ne("div",uie,[Xr(be,{to:"/users",class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},{default:Wl(()=>ee[8]||(ee[8]=[Ir(" Configurer les clés API ")])),_:1})])):Wt("",!0)])])):Wt("",!0),!d.value||!(d.value.includes("clés API")||d.value.includes("Ecowitt"))?(De(),Ne("div",cie,[ee[19]||(ee[19]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sélectionner une station ",-1)),C("div",hie,[On(C("select",{"onUpdate:modelValue":ee[1]||(ee[1]=vn=>a.value=vn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!!(!o.value.length||d.value)},[!o.value.length&&!d.value?(De(),Ne("option",fie,"Chargement des stations...")):Wt("",!0),d.value?(De(),Ne("option",pie,"Aucune station disponible")):Wt("",!0),(De(!0),Ne(_n,null,Wn(o.value,vn=>(De(),Ne("option",{key:vn.mac,value:vn.mac},Tt(vn.name)+" ("+Tt(vn.model)+" - v"+Tt(vn.firmware_version)+") ",9,gie))),128))],8,die),[[Mi,a.value]]),C("button",{onClick:W,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!!(!a.value||d.value)}," Actualiser ",8,mie)]),E.value?(De(),Ne("div",vie,[ee[18]||(ee[18]=C("h3",{class:"text-lg font-semibold mb-2"},"Informations sur la station",-1)),C("div",yie,[C("div",null,[ee[11]||(ee[11]=C("span",{class:"text-gray-500"},"Modèle:",-1)),C("p",bie,Tt(E.value.model),1)]),C("div",null,[ee[12]||(ee[12]=C("span",{class:"text-gray-500"},"Version:",-1)),C("p",_ie,Tt(E.value.firmware_version),1)]),C("div",null,[ee[13]||(ee[13]=C("span",{class:"text-gray-500"},"ID:",-1)),C("p",wie,Tt(E.value.id),1)]),C("div",null,[C("span",xie,Tt((je=E.value.mac)!=null&&je.includes(":")?"MAC:":"IMEI:"),1),C("p",Lie,Tt(E.value.mac),1)]),C("div",null,[ee[14]||(ee[14]=C("span",{class:"text-gray-500"},"Fuseau horaire:",-1)),C("p",Sie,Tt(E.value.timezone),1)]),C("div",null,[ee[15]||(ee[15]=C("span",{class:"text-gray-500"},"Installation:",-1)),C("p",Cie,Tt(new Date(E.value.created_at).toLocaleDateString()),1)]),C("div",Eie,[ee[17]||(ee[17]=C("span",{class:"text-gray-500 mr-2"},"Position:",-1)),T(E.value)?(De(),Ne("a",{key:0,href:k(E.value),target:"_blank",class:"text-primary-600 hover:text-primary-800 flex items-center",title:"Ouvrir dans Google Maps"},[ee[16]||(ee[16]=C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),Ir(" "+Tt(D(E.value)),1)],8,Mie)):Wt("",!0)])])])):Wt("",!0)])):Wt("",!0),!d.value||!(d.value.includes("clés API")||d.value.includes("Ecowitt"))?(De(),Ne("div",Pie,[C("div",kie,[C("nav",Aie,[(De(),Ne(_n,null,Wn(X,vn=>C("button",{key:vn.id,onClick:Ut=>K.value=vn.id,class:xi([K.value===vn.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},Tt(vn.name),11,Tie)),64))])])])):Wt("",!0),(!d.value||!(d.value.includes("clés API")||d.value.includes("Ecowitt")))&&K.value==="realtime"?(De(),Ne("div",Die,[C("div",Iie,[C("p",Oie," Dernière mise à jour : "+Tt(i.value?new Date(i.value).toLocaleString():"Jamais"),1),v.value?(De(),Ne("div",Nie,ee[20]||(ee[20]=[C("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),C("span",{class:"text-primary-600"},"Chargement des données...",-1)]))):Wt("",!0)]),C("div",Bie,[C("div",Rie,[ee[21]||(ee[21]=C("h2",{class:"text-xl font-semibold mb-4"},"Température Extérieure",-1)),C("div",Fie,Tt(Q((Qe=(We=r.value.outdoor)==null?void 0:We.temperature)==null?void 0:Qe.value))+"°C ",1),C("div",jie," Min: "+Tt(Q(((st=(Je=r.value.outdoor)==null?void 0:Je.temperature)==null?void 0:st.min)||"0"))+"°C Max: "+Tt(Q(((Bt=(Pt=r.value.outdoor)==null?void 0:Pt.temperature)==null?void 0:Bt.max)||"0"))+"°C ",1)]),C("div",zie,[ee[22]||(ee[22]=C("h2",{class:"text-xl font-semibold mb-4"},"Humidité",-1)),C("div",$ie,Tt(((Jt=(Ht=r.value.outdoor)==null?void 0:Ht.humidity)==null?void 0:Jt.value)||"0")+"% ",1),C("div",Uie,[C("div",Vie,[C("div",{class:"bg-primary-600 h-2.5 rounded-full",style:Yl({width:`${((pn=(fn=r.value.outdoor)==null?void 0:fn.humidity)==null?void 0:pn.value)||0}%`})},null,4)])])]),C("div",Hie,[ee[23]||(ee[23]=C("h2",{class:"text-xl font-semibold mb-4"},"Pression Atmosphérique",-1)),C("div",Gie,Tt(O((ot=(et=r.value.pressure)==null?void 0:et.absolute)==null?void 0:ot.value))+" hPa ",1),C("div",Wie," Tendance: "+Tt(q((Ft=(rt=r.value.pressure)==null?void 0:rt.absolute)==null?void 0:Ft.trend)),1)]),C("div",qie,[ee[25]||(ee[25]=C("h2",{class:"text-xl font-semibold mb-4"},"Vent",-1)),C("div",Yie,Tt(pe(((Mn=(Xt=r.value.wind)==null?void 0:Xt.speed)==null?void 0:Mn.value)||((Cn=(xn=r.value.wind)==null?void 0:xn.wind_speed)==null?void 0:Cn.value)))+" km/h ",1),C("div",Kie,[Ir(" Direction: "+Tt(U(((wn=(Vn=r.value.wind)==null?void 0:Vn.direction)==null?void 0:wn.value)||((hn=(sn=r.value.wind)==null?void 0:sn.wind_direction)==null?void 0:hn.value)))+" ",1),ee[24]||(ee[24]=C("br",null,null,-1)),Ir(" Rafales: "+Tt(pe(((ir=(Qn=r.value.wind)==null?void 0:Qn.gust)==null?void 0:ir.value)||((Fn=(dr=r.value.wind)==null?void 0:dr.wind_gust)==null?void 0:Fn.value)))+" km/h ",1)])]),C("div",Zie,[ee[27]||(ee[27]=C("h2",{class:"text-xl font-semibold mb-4"},"Précipitations",-1)),C("div",Xie,Tt(fe((ns=(Mr=r.value.rainfall)==null?void 0:Mr.daily)==null?void 0:ns.value))+" mm ",1),C("div",Jie,[Ir(" Taux: "+Tt(fe(((Xs=(Pi=r.value.rainfall)==null?void 0:Pi.rate)==null?void 0:Xs.value)||((Yn=(ds=r.value.rainfall)==null?void 0:ds.rain_rate)==null?void 0:Yn.value)))+" mm/h ",1),ee[26]||(ee[26]=C("br",null,null,-1)),Ir(" Mensuel: "+Tt(fe((tt=(mt=r.value.rainfall)==null?void 0:mt.monthly)==null?void 0:tt.value))+" mm ",1)])]),C("div",Qie,[ee[28]||(ee[28]=C("h2",{class:"text-xl font-semibold mb-4"},"Rayonnement",-1)),C("div",ese,Tt(((mn=(Dt=r.value.solar_and_uvi)==null?void 0:Dt.solar)==null?void 0:mn.value)||"0")+" W/m² ",1),C("div",tse," UV: "+Tt(((jn=(Vt=r.value.solar_and_uvi)==null?void 0:Vt.uvi)==null?void 0:jn.value)||"0"),1)])])])):(!d.value||!(d.value.includes("clés API")||d.value.includes("Ecowitt")))&&K.value==="history"?(De(),Ne("div",nse,[C("div",rse,[C("p",ise," Dernière mise à jour : "+Tt(s.value?s.value:"Jamais"),1),C("div",sse,[Le.value?(De(),Ne("div",ose,ee[29]||(ee[29]=[C("svg",{class:"animate-spin -ml-1 mr-2 h-5 w-5 text-primary-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),C("span",{class:"text-sm text-primary-600"},"Chargement des données...",-1)]))):Wt("",!0),C("button",{onClick:Te,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!a.value||Le.value}," Actualiser ",8,ase)])]),C("div",lse,[C("div",null,[ee[31]||(ee[31]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Période ",-1)),On(C("select",{"onUpdate:modelValue":ee[2]||(ee[2]=vn=>F.value=vn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},ee[30]||(ee[30]=[wl('<option value="today" data-v-6836463c>Aujourd&#39;hui</option><option value="yesterday" data-v-6836463c>Hier</option><option value="week" data-v-6836463c>7 derniers jours</option><option value="month" data-v-6836463c>30 derniers jours</option><option value="custom" data-v-6836463c>Période personnalisée</option>',5)]),512),[[Mi,F.value]])]),F.value==="custom"?(De(),Ne("div",use,[C("div",null,[ee[32]||(ee[32]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de début ",-1)),On(C("input",{type:"date","onUpdate:modelValue":ee[3]||(ee[3]=vn=>J.value=vn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[ui,J.value]])]),C("div",null,[ee[33]||(ee[33]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de fin ",-1)),On(C("input",{type:"date","onUpdate:modelValue":ee[4]||(ee[4]=vn=>Y.value=vn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[ui,Y.value]])])])):Wt("",!0),C("div",null,[ee[34]||(ee[34]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Intervalle ",-1)),On(C("select",{"onUpdate:modelValue":ee[5]||(ee[5]=vn=>N.value=vn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},[(De(!0),Ne(_n,null,Wn(He.value,vn=>(De(),Ne("option",{key:vn.value,value:vn.value},Tt(vn.label),9,cse))),128))],512),[[Mi,N.value]]),p.value?(De(),Ne("div",hse,Tt(p.value),1)):Wt("",!0)])]),C("div",dse,[C("div",fse,[ee[35]||(ee[35]=C("h3",{class:"text-lg font-semibold mb-4"},"Température",-1)),C("div",pse,[C("canvas",{ref_key:"tempChart",ref:j},null,512)])]),C("div",gse,[ee[36]||(ee[36]=C("h3",{class:"text-lg font-semibold mb-4"},"Humidité",-1)),C("div",mse,[C("canvas",{ref_key:"humidityChart",ref:Z},null,512)])]),C("div",vse,[ee[37]||(ee[37]=C("h3",{class:"text-lg font-semibold mb-4"},"Pression",-1)),C("div",yse,[C("canvas",{ref_key:"pressureChart",ref:ae},null,512)])]),C("div",bse,[ee[38]||(ee[38]=C("h3",{class:"text-lg font-semibold mb-4"},"Vent",-1)),C("div",_se,[C("canvas",{ref_key:"windChart",ref:de},null,512)])]),C("div",wse,[ee[39]||(ee[39]=C("h3",{class:"text-lg font-semibold mb-4"},"Précipitations",-1)),C("div",xse,[C("canvas",{ref_key:"rainChart",ref:ge},null,512)])]),C("div",Lse,[ee[40]||(ee[40]=C("h3",{class:"text-lg font-semibold mb-4"},"Rayonnement",-1)),C("div",Sse,[C("canvas",{ref_key:"solarChart",ref:me},null,512)])])])])):Wt("",!0)])])}}}),Ese=Qc(Cse,[["__scopeId","data-v-6836463c"]]),Mse={class:"settings-page max-w-xl mx-auto py-10 px-4 min-h-full"},Pse={key:0,class:"mb-6"},kse={key:1,class:"bg-red-50 border-l-4 border-red-500 p-4 mb-6"},Ase={class:"flex"},Tse={class:"ml-3"},Dse={class:"text-sm text-red-700"},Ise={class:"bg-white shadow rounded-lg p-6"},Ose=["disabled"],Nse=["disabled"],Bse={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Rse={key:0,class:"text-green-600 mt-2"},Fse=_s({__name:"ParametresView",setup(t){const e=_t(""),n=_t(""),r=_t(!1),i=_t("");Ds(async()=>{await s()});async function s(){r.value=!0,i.value="";try{const a=await X2.getGoogleMapsApiKey();a.data&&a.data.key_status==="configured"?e.value="••••••••••••••••••••••••••":e.value=""}catch(a){console.error("Erreur lors de la récupération de la clé API:",a),i.value="Impossible de récupérer la clé API. Veuillez réessayer plus tard."}finally{r.value=!1}}async function o(){if(!e.value){i.value="La clé API est requise.";return}r.value=!0,i.value="",n.value="";try{await X2.setGoogleMapsApiKey(e.value),n.value="Clé API sauvegardée avec succès.",setTimeout(()=>{n.value=""},3e3)}catch(a){console.error("Erreur lors de la sauvegarde de la clé API:",a),i.value="Impossible de sauvegarder la clé API. Veuillez réessayer plus tard."}finally{r.value=!1}}return(a,l)=>(De(),Ne("div",Mse,[l[6]||(l[6]=C("h1",{class:"text-2xl font-bold mb-6"},"Paramètres de l'application",-1)),r.value?(De(),Ne("div",Pse,l[1]||(l[1]=[wl('<div class="animate-pulse flex space-x-4" data-v-097ea248><div class="flex-1 space-y-4 py-1" data-v-097ea248><div class="h-4 bg-gray-200 rounded w-3/4" data-v-097ea248></div><div class="space-y-2" data-v-097ea248><div class="h-4 bg-gray-200 rounded" data-v-097ea248></div><div class="h-4 bg-gray-200 rounded w-5/6" data-v-097ea248></div></div></div></div>',1)]))):Wt("",!0),i.value?(De(),Ne("div",kse,[C("div",Ase,[l[2]||(l[2]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",Tse,[C("p",Dse,Tt(i.value),1)])])])):Wt("",!0),C("div",Ise,[C("form",{onSubmit:xl(o,["prevent"]),class:"space-y-4"},[C("div",null,[l[3]||(l[3]=C("label",{for:"google-maps-api-key",class:"block text-sm font-medium text-gray-700"},"Clé API Google Maps",-1)),On(C("input",{id:"google-maps-api-key","onUpdate:modelValue":l[0]||(l[0]=c=>e.value=c),type:"password",class:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre clé API Google Maps",autocomplete:"off",disabled:r.value},null,8,Ose),[[ui,e.value]])]),C("button",{type:"submit",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",disabled:r.value},[r.value?(De(),Ne("svg",Bse,l[4]||(l[4]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Wt("",!0),l[5]||(l[5]=Ir(" Sauvegarder "))],8,Nse),n.value?(De(),Ne("p",Rse,Tt(n.value),1)):Wt("",!0)],32)])]))}}),jse=Qc(Fse,[["__scopeId","data-v-097ea248"]]),yP=MB({history:iB("/"),routes:[{path:"/",name:"home",component:C5,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"],isMapRoute:!0}},{path:"/meteo",name:"meteo",component:Ese,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/plans",name:"plans",component:IY,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/users",name:"users",component:iq,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie"]}},{path:"/profile",name:"profile",component:()=>Ch(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/login",name:"login",component:D9,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Ch(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Ch(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:e9,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/notes",name:"notes",component:oZ,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/map",name:"map",component:C5,meta:{requiresAuth:!0,isMapRoute:!0}},{path:"/parametres",name:"parametres",component:jse,meta:{requiresAuth:!0,allowedRoles:["admin"]}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Ch(()=>import("./NotFoundView.js"),[])}]});yP.beforeEach(async(t,e,n)=>{var a,l;const r=co();if(console.log("Route:",t.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(c){console.error("Error initializing auth store:",c)}const i=r.isAuthenticated,s=(a=r.user)==null?void 0:a.must_change_password,o=(l=r.user)==null?void 0:l.user_type;if(t.meta.requiresAuth&&!i){n("/login");return}if(i&&s&&t.name!=="changePassword"){n({name:"changePassword"});return}if(t.name==="changePassword"&&!s){n({name:"home"});return}if(t.meta.allowedRoles&&o&&!t.meta.allowedRoles.includes(o)){n({name:"home"});return}if(t.meta.requiresGuest&&i){n({name:"home"});return}n()});function zse(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(p=!0)=>{await l};async function d(){if("serviceWorker"in navigator){if(a=await Ch(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/static/frontend/sw.js",{scope:"/static/frontend/",type:"classic"})).catch(p=>{o==null||o(p)}),!a)return;a.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),a.addEventListener("installed",p=>{p.isUpdate||r==null||r()}),a.register({immediate:e}).then(p=>{s?s("/static/frontend/sw.js",p):i==null||i(p)}).catch(p=>{o==null||o(p)})}}return l=d(),c}const ow=kv(DF),bP=jO();ow.use(bP);ow.use(yP);const $se=co(bP);window.INITIAL_STATE&&$se.initialize(window.INITIAL_STATE);ow.mount("#app");zse({immediate:!0,onRegistered(t){t&&console.log("SW enregistré:",t)},onRegisterError(t){console.error("Erreur d'enregistrement du SW:",t)},onOfflineReady(){console.log("L'application est prête à être utilisée hors ligne")}});export{Vi as _,wu as a,C as b,Ne as c,_s as d,Wt as e,bn as f,Ir as g,On as h,De as i,wl as j,Xr as k,Wl as l,h_ as m,xi as n,Ds as o,kB as p,Cm as q,_t as r,oa as s,Tt as t,co as u,ui as v,xl as w,E_ as x};

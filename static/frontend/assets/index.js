var CD=Object.defineProperty;var ED=(t,e,n)=>e in t?CD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ze=(t,e,n)=>ED(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function dy(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const zi={},fp=[],Gu=()=>{},PD=()=>!1,Pm=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),o_=t=>t.startsWith("onUpdate:"),Ss=Object.assign,a_=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},MD=Object.prototype.hasOwnProperty,rs=(t,e)=>MD.call(t,e),ir=Array.isArray,pp=t=>Rp(t)==="[object Map]",Sf=t=>Rp(t)==="[object Set]",Mx=t=>Rp(t)==="[object Date]",kD=t=>Rp(t)==="[object RegExp]",Dr=t=>typeof t=="function",Os=t=>typeof t=="string",xc=t=>typeof t=="symbol",gs=t=>t!==null&&typeof t=="object",l_=t=>(gs(t)||Dr(t))&&Dr(t.then)&&Dr(t.catch),PL=Object.prototype.toString,Rp=t=>PL.call(t),AD=t=>Rp(t).slice(8,-1),fy=t=>Rp(t)==="[object Object]",u_=t=>Os(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,gp=dy(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),py=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},TD=/-(\w)/g,Va=py(t=>t.replace(TD,(e,n)=>n?n.toUpperCase():"")),DD=/\B([A-Z])/g,Zl=py(t=>t.replace(DD,"-$1").toLowerCase()),Mm=py(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ng=py(t=>t?`on${Mm(t)}`:""),kl=(t,e)=>!Object.is(t,e),mp=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},ML=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Sv=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Cv=t=>{const e=Os(t)?Number(t):NaN;return isNaN(e)?t:e};let kx;const gy=()=>kx||(kx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),OD="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",ND=dy(OD);function Ql(t){if(ir(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Os(r)?FD(r):Ql(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Os(t)||gs(t))return t}const ID=/;(?![^(]*\))/g,BD=/:([^]+)/,RD=/\/\*[^]*?\*\//g;function FD(t){const e={};return t.replace(RD,"").split(ID).forEach(n=>{if(n){const r=n.split(BD);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function $i(t){let e="";if(Os(t))e=t;else if(ir(t))for(let n=0;n<t.length;n++){const r=$i(t[n]);r&&(e+=r+" ")}else if(gs(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function jD(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Os(e)&&(t.class=$i(e)),n&&(t.style=Ql(n)),t}const zD="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",$D=dy(zD);function kL(t){return!!t||t===""}function VD(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=wd(t[r],e[r]);return n}function wd(t,e){if(t===e)return!0;let n=Mx(t),r=Mx(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=xc(t),r=xc(e),n||r)return t===e;if(n=ir(t),r=ir(e),n||r)return n&&r?VD(t,e):!1;if(n=gs(t),r=gs(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!wd(t[o],e[o]))return!1}}return String(t)===String(e)}function my(t,e){return t.findIndex(n=>wd(n,e))}const AL=t=>!!(t&&t.__v_isRef===!0),Tt=t=>Os(t)?t:t==null?"":ir(t)||gs(t)&&(t.toString===PL||!Dr(t.toString))?AL(t)?Tt(t.value):JSON.stringify(t,TL,2):String(t),TL=(t,e)=>AL(e)?TL(t,e.value):pp(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[M1(r,s)+" =>"]=i,n),{})}:Sf(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>M1(n))}:xc(e)?M1(e):gs(e)&&!ir(e)&&!fy(e)?String(e):e,M1=(t,e="")=>{var n;return xc(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ml;class c_{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ml,!e&&Ml&&(this.index=(Ml.scopes||(Ml.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ml;try{return Ml=this,e()}finally{Ml=n}}}on(){Ml=this}off(){Ml=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function h_(t){return new c_(t)}function d_(){return Ml}function DL(t,e=!1){Ml&&Ml.cleanups.push(t)}let Ts;const k1=new WeakSet;class im{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ml&&Ml.active&&Ml.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,k1.has(this)&&(k1.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||NL(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ax(this),IL(this);const e=Ts,n=_c;Ts=this,_c=!0;try{return this.fn()}finally{BL(this),Ts=e,_c=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)g_(e);this.deps=this.depsTail=void 0,Ax(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?k1.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){N2(this)&&this.run()}get dirty(){return N2(this)}}let OL=0,Ig,Bg;function NL(t,e=!1){if(t.flags|=8,e){t.next=Bg,Bg=t;return}t.next=Ig,Ig=t}function f_(){OL++}function p_(){if(--OL>0)return;if(Bg){let e=Bg;for(Bg=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Ig;){let e=Ig;for(Ig=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function IL(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function BL(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),g_(r),UD(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function N2(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(RL(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function RL(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===sm))return;t.globalVersion=sm;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!N2(t)){t.flags&=-3;return}const n=Ts,r=_c;Ts=t,_c=!0;try{IL(t);const i=t.fn(t._value);(e.version===0||kl(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{Ts=n,_c=r,BL(t),t.flags&=-3}}function g_(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)g_(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function UD(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}function HD(t,e){t.effect instanceof im&&(t=t.effect.fn);const n=new im(t);e&&Ss(n,e);try{n.run()}catch(i){throw n.stop(),i}const r=n.run.bind(n);return r.effect=n,r}function WD(t){t.effect.stop()}let _c=!0;const FL=[];function kd(){FL.push(_c),_c=!1}function Ad(){const t=FL.pop();_c=t===void 0?!0:t}function Ax(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ts;Ts=void 0;try{e()}finally{Ts=n}}}let sm=0;class GD{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class vy{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Ts||!_c||Ts===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ts)n=this.activeLink=new GD(Ts,this),Ts.deps?(n.prevDep=Ts.depsTail,Ts.depsTail.nextDep=n,Ts.depsTail=n):Ts.deps=Ts.depsTail=n,jL(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ts.depsTail,n.nextDep=void 0,Ts.depsTail.nextDep=n,Ts.depsTail=n,Ts.deps===n&&(Ts.deps=r)}return n}trigger(e){this.version++,sm++,this.notify(e)}notify(e){f_();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{p_()}}}function jL(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)jL(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Ev=new WeakMap,cf=Symbol(""),I2=Symbol(""),om=Symbol("");function ol(t,e,n){if(_c&&Ts){let r=Ev.get(t);r||Ev.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new vy),i.map=r,i.key=n),i.track()}}function Ch(t,e,n,r,i,s){const o=Ev.get(t);if(!o){sm++;return}const a=l=>{l&&l.trigger()};if(f_(),e==="clear")o.forEach(a);else{const l=ir(t),c=l&&u_(n);if(l&&n==="length"){const d=Number(r);o.forEach((p,v)=>{(v==="length"||v===om||!xc(v)&&v>=d)&&a(p)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(om)),e){case"add":l?c&&a(o.get("length")):(a(o.get(cf)),pp(t)&&a(o.get(I2)));break;case"delete":l||(a(o.get(cf)),pp(t)&&a(o.get(I2)));break;case"set":pp(t)&&a(o.get(cf));break}}p_()}function qD(t,e){const n=Ev.get(t);return n&&n.get(e)}function Gf(t){const e=ji(t);return e===t?e:(ol(e,"iterate",om),Su(t)?e:e.map(al))}function yy(t){return ol(t=ji(t),"iterate",om),t}const YD={__proto__:null,[Symbol.iterator](){return A1(this,Symbol.iterator,al)},concat(...t){return Gf(this).concat(...t.map(e=>ir(e)?Gf(e):e))},entries(){return A1(this,"entries",t=>(t[1]=al(t[1]),t))},every(t,e){return mh(this,"every",t,e,void 0,arguments)},filter(t,e){return mh(this,"filter",t,e,n=>n.map(al),arguments)},find(t,e){return mh(this,"find",t,e,al,arguments)},findIndex(t,e){return mh(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return mh(this,"findLast",t,e,al,arguments)},findLastIndex(t,e){return mh(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return mh(this,"forEach",t,e,void 0,arguments)},includes(...t){return T1(this,"includes",t)},indexOf(...t){return T1(this,"indexOf",t)},join(t){return Gf(this).join(t)},lastIndexOf(...t){return T1(this,"lastIndexOf",t)},map(t,e){return mh(this,"map",t,e,void 0,arguments)},pop(){return Xp(this,"pop")},push(...t){return Xp(this,"push",t)},reduce(t,...e){return Tx(this,"reduce",t,e)},reduceRight(t,...e){return Tx(this,"reduceRight",t,e)},shift(){return Xp(this,"shift")},some(t,e){return mh(this,"some",t,e,void 0,arguments)},splice(...t){return Xp(this,"splice",t)},toReversed(){return Gf(this).toReversed()},toSorted(t){return Gf(this).toSorted(t)},toSpliced(...t){return Gf(this).toSpliced(...t)},unshift(...t){return Xp(this,"unshift",t)},values(){return A1(this,"values",al)}};function A1(t,e,n){const r=yy(t),i=r[e]();return r!==t&&!Su(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const KD=Array.prototype;function mh(t,e,n,r,i,s){const o=yy(t),a=o!==t&&!Su(t),l=o[e];if(l!==KD[e]){const p=l.apply(t,s);return a?al(p):p}let c=n;o!==t&&(a?c=function(p,v){return n.call(this,al(p),v,t)}:n.length>2&&(c=function(p,v){return n.call(this,p,v,t)}));const d=l.call(o,c,r);return a&&i?i(d):d}function Tx(t,e,n,r){const i=yy(t);let s=n;return i!==t&&(Su(t)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,t)}):s=function(o,a,l){return n.call(this,o,al(a),l,t)}),i[e](s,...r)}function T1(t,e,n){const r=ji(t);ol(r,"iterate",om);const i=r[e](...n);return(i===-1||i===!1)&&wy(n[0])?(n[0]=ji(n[0]),r[e](...n)):i}function Xp(t,e,n=[]){kd(),f_();const r=ji(t)[e].apply(t,n);return p_(),Ad(),r}const ZD=dy("__proto__,__v_isRef,__isVue"),zL=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(xc));function XD(t){xc(t)||(t=String(t));const e=ji(this);return ol(e,"has",t),e.hasOwnProperty(t)}class $L{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?qL:GL:s?WL:HL).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ir(e);if(!i){let l;if(o&&(l=YD[n]))return l;if(n==="hasOwnProperty")return XD}const a=Reflect.get(e,n,ho(e)?e:r);return(xc(n)?zL.has(n):ZD(n))||(i||ol(e,"get",n),s)?a:ho(a)?o&&u_(n)?a:a.value:gs(a)?i?pc(a):nu(a):a}}class VL extends $L{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=xd(s);if(!Su(r)&&!xd(r)&&(s=ji(s),r=ji(r)),!ir(e)&&ho(s)&&!ho(r))return l?!1:(s.value=r,!0)}const o=ir(e)&&u_(n)?Number(n)<e.length:rs(e,n),a=Reflect.set(e,n,r,ho(e)?e:i);return e===ji(i)&&(o?kl(r,s)&&Ch(e,"set",n,r):Ch(e,"add",n,r)),a}deleteProperty(e,n){const r=rs(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Ch(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!xc(n)||!zL.has(n))&&ol(e,"has",n),r}ownKeys(e){return ol(e,"iterate",ir(e)?"length":cf),Reflect.ownKeys(e)}}class UL extends $L{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const JD=new VL,QD=new UL,e8=new VL(!0),t8=new UL(!0),B2=t=>t,u0=t=>Reflect.getPrototypeOf(t);function n8(t,e,n){return function(...r){const i=this.__v_raw,s=ji(i),o=pp(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),d=n?B2:e?R2:al;return!e&&ol(s,"iterate",l?I2:cf),{next(){const{value:p,done:v}=c.next();return v?{value:p,done:v}:{value:a?[d(p[0]),d(p[1])]:d(p),done:v}},[Symbol.iterator](){return this}}}}function c0(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function r8(t,e){const n={get(i){const s=this.__v_raw,o=ji(s),a=ji(i);t||(kl(i,a)&&ol(o,"get",i),ol(o,"get",a));const{has:l}=u0(o),c=e?B2:t?R2:al;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&ol(ji(i),"iterate",cf),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=ji(s),a=ji(i);return t||(kl(i,a)&&ol(o,"has",i),ol(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=ji(a),c=e?B2:t?R2:al;return!t&&ol(l,"iterate",cf),a.forEach((d,p)=>i.call(s,c(d),c(p),o))}};return Ss(n,t?{add:c0("add"),set:c0("set"),delete:c0("delete"),clear:c0("clear")}:{add(i){!e&&!Su(i)&&!xd(i)&&(i=ji(i));const s=ji(this);return u0(s).has.call(s,i)||(s.add(i),Ch(s,"add",i,i)),this},set(i,s){!e&&!Su(s)&&!xd(s)&&(s=ji(s));const o=ji(this),{has:a,get:l}=u0(o);let c=a.call(o,i);c||(i=ji(i),c=a.call(o,i));const d=l.call(o,i);return o.set(i,s),c?kl(s,d)&&Ch(o,"set",i,s):Ch(o,"add",i,s),this},delete(i){const s=ji(this),{has:o,get:a}=u0(s);let l=o.call(s,i);l||(i=ji(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&Ch(s,"delete",i,void 0),c},clear(){const i=ji(this),s=i.size!==0,o=i.clear();return s&&Ch(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=n8(i,t,e)}),n}function by(t,e){const n=r8(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(rs(n,i)&&i in r?n:r,i,s)}const i8={get:by(!1,!1)},s8={get:by(!1,!0)},o8={get:by(!0,!1)},a8={get:by(!0,!0)},HL=new WeakMap,WL=new WeakMap,GL=new WeakMap,qL=new WeakMap;function l8(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function u8(t){return t.__v_skip||!Object.isExtensible(t)?0:l8(AD(t))}function nu(t){return xd(t)?t:_y(t,!1,JD,i8,HL)}function m_(t){return _y(t,!1,e8,s8,WL)}function pc(t){return _y(t,!0,QD,o8,GL)}function c8(t){return _y(t,!0,t8,a8,qL)}function _y(t,e,n,r,i){if(!gs(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=u8(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Zc(t){return xd(t)?Zc(t.__v_raw):!!(t&&t.__v_isReactive)}function xd(t){return!!(t&&t.__v_isReadonly)}function Su(t){return!!(t&&t.__v_isShallow)}function wy(t){return t?!!t.__v_raw:!1}function ji(t){const e=t&&t.__v_raw;return e?ji(e):t}function xy(t){return!rs(t,"__v_skip")&&Object.isExtensible(t)&&ML(t,"__v_skip",!0),t}const al=t=>gs(t)?nu(t):t,R2=t=>gs(t)?pc(t):t;function ho(t){return t?t.__v_isRef===!0:!1}function xt(t){return YL(t,!1)}function v_(t){return YL(t,!0)}function YL(t,e){return ho(t)?t:new h8(t,e)}class h8{constructor(e,n){this.dep=new vy,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:ji(e),this._value=n?e:al(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Su(e)||xd(e);e=r?e:ji(e),kl(e,n)&&(this._rawValue=e,this._value=r?e:al(e),this.dep.trigger())}}function d8(t){t.dep&&t.dep.trigger()}function er(t){return ho(t)?t.value:t}function f8(t){return Dr(t)?t():er(t)}const p8={get:(t,e,n)=>e==="__v_raw"?t:er(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return ho(i)&&!ho(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function y_(t){return Zc(t)?t:new Proxy(t,p8)}class g8{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new vy,{get:r,set:i}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function KL(t){return new g8(t)}function ZL(t){const e=ir(t)?new Array(t.length):{};for(const n in t)e[n]=XL(t,n);return e}class m8{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return qD(ji(this._object),this._key)}}class v8{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function y8(t,e,n){return ho(t)?t:Dr(t)?new v8(t):gs(t)&&arguments.length>1?XL(t,e,n):xt(t)}function XL(t,e,n){const r=t[e];return ho(r)?r:new m8(t,e,n)}class b8{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new vy(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=sm-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ts!==this)return NL(this,!0),!0}get value(){const e=this.dep.track();return RL(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function _8(t,e,n=!1){let r,i;return Dr(t)?r=t:(r=t.get,i=t.set),new b8(r,i,n)}const w8={GET:"get",HAS:"has",ITERATE:"iterate"},x8={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},h0={},Pv=new WeakMap;let rd;function L8(){return rd}function JL(t,e=!1,n=rd){if(n){let r=Pv.get(n);r||Pv.set(n,r=[]),r.push(t)}}function S8(t,e,n=zi){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,c=K=>i?K:Su(K)||i===!1||i===0?Eh(K,1):Eh(K);let d,p,v,m,x=!1,E=!1;if(ho(t)?(p=()=>t.value,x=Su(t)):Zc(t)?(p=()=>c(t),x=!0):ir(t)?(E=!0,x=t.some(K=>Zc(K)||Su(K)),p=()=>t.map(K=>{if(ho(K))return K.value;if(Zc(K))return c(K);if(Dr(K))return l?l(K,2):K()})):Dr(t)?e?p=l?()=>l(t,2):t:p=()=>{if(v){kd();try{v()}finally{Ad()}}const K=rd;rd=d;try{return l?l(t,3,[m]):t(m)}finally{rd=K}}:p=Gu,e&&i){const K=p,ne=i===!0?1/0:i;p=()=>Eh(K(),ne)}const M=d_(),A=()=>{d.stop(),M&&M.active&&a_(M.effects,d)};if(s&&e){const K=e;e=(...ne)=>{K(...ne),A()}}let O=E?new Array(t.length).fill(h0):h0;const z=K=>{if(!(!(d.flags&1)||!d.dirty&&!K))if(e){const ne=d.run();if(i||x||(E?ne.some((me,pe)=>kl(me,O[pe])):kl(ne,O))){v&&v();const me=rd;rd=d;try{const pe=[ne,O===h0?void 0:E&&O[0]===h0?[]:O,m];l?l(e,3,pe):e(...pe),O=ne}finally{rd=me}}}else d.run()};return a&&a(z),d=new im(p),d.scheduler=o?()=>o(z,!1):z,m=K=>JL(K,!1,d),v=d.onStop=()=>{const K=Pv.get(d);if(K){if(l)l(K,4);else for(const ne of K)ne();Pv.delete(d)}},e?r?z(!0):O=d.run():o?o(z.bind(null,!0),!0):d.run(),A.pause=d.pause.bind(d),A.resume=d.resume.bind(d),A.stop=A,A}function Eh(t,e=1/0,n){if(e<=0||!gs(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,ho(t))Eh(t.value,e,n);else if(ir(t))for(let r=0;r<t.length;r++)Eh(t[r],e,n);else if(Sf(t)||pp(t))t.forEach(r=>{Eh(r,e,n)});else if(fy(t)){for(const r in t)Eh(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Eh(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const QL=[];function C8(t){QL.push(t)}function E8(){QL.pop()}function P8(t,e){}const M8={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},k8={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Fp(t,e,n,r){try{return r?t(...r):t()}catch(i){Cf(i,e,n)}}function Yu(t,e,n,r){if(Dr(t)){const i=Fp(t,e,n,r);return i&&l_(i)&&i.catch(s=>{Cf(s,e,n)}),i}if(ir(t)){const i=[];for(let s=0;s<t.length;s++)i.push(Yu(t[s],e,n,r));return i}}function Cf(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||zi;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const d=a.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](t,l,c)===!1)return}a=a.parent}if(s){kd(),Fp(s,null,10,[t,l,c]),Ad();return}}A8(t,n,i,r,o)}function A8(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const Al=[];let $c=-1;const vp=[];let id=null,rp=0;const eS=Promise.resolve();let Mv=null;function la(t){const e=Mv||eS;return t?e.then(this?t.bind(this):t):e}function T8(t){let e=$c+1,n=Al.length;for(;e<n;){const r=e+n>>>1,i=Al[r],s=lm(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function b_(t){if(!(t.flags&1)){const e=lm(t),n=Al[Al.length-1];!n||!(t.flags&2)&&e>=lm(n)?Al.push(t):Al.splice(T8(e),0,t),t.flags|=1,tS()}}function tS(){Mv||(Mv=eS.then(nS))}function am(t){ir(t)?vp.push(...t):id&&t.id===-1?id.splice(rp+1,0,t):t.flags&1||(vp.push(t),t.flags|=1),tS()}function Dx(t,e,n=$c+1){for(;n<Al.length;n++){const r=Al[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Al.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function kv(t){if(vp.length){const e=[...new Set(vp)].sort((n,r)=>lm(n)-lm(r));if(vp.length=0,id){id.push(...e);return}for(id=e,rp=0;rp<id.length;rp++){const n=id[rp];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}id=null,rp=0}}const lm=t=>t.id==null?t.flags&2?-1:1/0:t.id;function nS(t){try{for($c=0;$c<Al.length;$c++){const e=Al[$c];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Fp(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;$c<Al.length;$c++){const e=Al[$c];e&&(e.flags&=-2)}$c=-1,Al.length=0,kv(),Mv=null,(Al.length||vp.length)&&nS()}}let ip,d0=[];function rS(t,e){var n,r;ip=t,ip?(ip.enabled=!0,d0.forEach(({event:i,args:s})=>ip.emit(i,...s)),d0=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{rS(s,e)}),setTimeout(()=>{ip||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,d0=[])},3e3)):d0=[]}let ca=null,Ly=null;function um(t){const e=ca;return ca=t,Ly=t&&t.type.__scopeId||null,e}function D8(t){Ly=t}function O8(){Ly=null}const N8=t=>Wu;function Wu(t,e=ca,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&G2(-1);const s=um(e);let o;try{o=t(...i)}finally{um(s),r._d&&G2(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Pn(t,e){if(ca===null)return t;const n=Tm(ca),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=zi]=e[i];s&&(Dr(s)&&(s={mounted:s,updated:s}),s.deep&&Eh(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Uc(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(kd(),Yu(l,n,8,[t.el,a,t,e]),Ad())}}const iS=Symbol("_vte"),sS=t=>t.__isTeleport,Rg=t=>t&&(t.disabled||t.disabled===""),Ox=t=>t&&(t.defer||t.defer===""),Nx=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Ix=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,F2=(t,e)=>{const n=t&&t.to;return Os(n)?e?e(n):null:n},oS={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:d,pc:p,pbc:v,o:{insert:m,querySelector:x,createText:E,createComment:M}}=c,A=Rg(e.props);let{shapeFlag:O,children:z,dynamicChildren:K}=e;if(t==null){const ne=e.el=E(""),me=e.anchor=E("");m(ne,n,r),m(me,n,r);const pe=(j,q)=>{O&16&&(i&&i.isCE&&(i.ce._teleportTarget=j),d(z,j,q,i,s,o,a,l))},N=()=>{const j=e.target=F2(e.props,x),q=aS(j,e,E,m);j&&(o!=="svg"&&Nx(j)?o="svg":o!=="mathml"&&Ix(j)&&(o="mathml"),A||(pe(j,q),K0(e,!1)))};A&&(pe(n,me),K0(e,!0)),Ox(e.props)?aa(()=>{N(),e.el.__isMounted=!0},s):N()}else{if(Ox(e.props)&&!t.el.__isMounted){aa(()=>{oS.process(t,e,n,r,i,s,o,a,l,c),delete t.el.__isMounted},s);return}e.el=t.el,e.targetStart=t.targetStart;const ne=e.anchor=t.anchor,me=e.target=t.target,pe=e.targetAnchor=t.targetAnchor,N=Rg(t.props),j=N?n:me,q=N?ne:pe;if(o==="svg"||Nx(me)?o="svg":(o==="mathml"||Ix(me))&&(o="mathml"),K?(v(t.dynamicChildren,K,j,i,s,o,a),k_(t,e,!0)):l||p(t,e,j,q,i,s,o,a,!1),A)N?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):f0(e,n,ne,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const I=e.target=F2(e.props,x);I&&f0(e,I,null,c,0)}else N&&f0(e,me,pe,c,1);K0(e,A)}},remove(t,e,n,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:d,target:p,props:v}=t;if(p&&(i(c),i(d)),s&&i(l),o&16){const m=s||!Rg(v);for(let x=0;x<a.length;x++){const E=a[x];r(E,e,n,m,!!E.dynamicChildren)}}},move:f0,hydrate:I8};function f0(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:d}=t,p=s===2;if(p&&r(o,e,n),(!p||Rg(d))&&l&16)for(let v=0;v<c.length;v++)i(c[v],e,n,2);p&&r(a,e,n)}function I8(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:d}},p){const v=e.target=F2(e.props,l);if(v){const m=Rg(e.props),x=v._lpa||v.firstChild;if(e.shapeFlag&16)if(m)e.anchor=p(o(t),e,a(t),n,r,i,s),e.targetStart=x,e.targetAnchor=x&&o(x);else{e.anchor=o(t);let E=x;for(;E;){if(E&&E.nodeType===8){if(E.data==="teleport start anchor")e.targetStart=E;else if(E.data==="teleport anchor"){e.targetAnchor=E,v._lpa=e.targetAnchor&&o(e.targetAnchor);break}}E=o(E)}e.targetAnchor||aS(v,e,d,c),p(x&&o(x),e,v,n,r,i,s)}K0(e,m)}return e.anchor&&o(e.anchor)}const j2=oS;function K0(t,e){const n=t.ctx;if(n&&n.ut){let r,i;for(e?(r=t.el,i=t.anchor):(r=t.targetStart,i=t.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function aS(t,e,n,r){const i=e.targetStart=n(""),s=e.targetAnchor=n("");return i[iS]=s,t&&(r(i,t),r(s,t)),s}const sd=Symbol("_leaveCb"),p0=Symbol("_enterCb");function __(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return fo(()=>{t.isMounted=!0}),Td(()=>{t.isUnmounting=!0}),t}const Ru=[Function,Array],w_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ru,onEnter:Ru,onAfterEnter:Ru,onEnterCancelled:Ru,onBeforeLeave:Ru,onLeave:Ru,onAfterLeave:Ru,onLeaveCancelled:Ru,onBeforeAppear:Ru,onAppear:Ru,onAfterAppear:Ru,onAppearCancelled:Ru},lS=t=>{const e=t.subTree;return e.component?lS(e.component):e},B8={name:"BaseTransition",props:w_,setup(t,{slots:e}){const n=Xu(),r=__();return()=>{const i=e.default&&Sy(e.default(),!0);if(!i||!i.length)return;const s=uS(i),o=ji(t),{mode:a}=o;if(r.isLeaving)return D1(s);const l=Bx(s);if(!l)return D1(s);let c=Sp(l,o,r,n,p=>c=p);l.type!==na&&Nh(l,c);let d=n.subTree&&Bx(n.subTree);if(d&&d.type!==na&&!vc(l,d)&&lS(n).type!==na){let p=Sp(d,o,r,n);if(Nh(d,p),a==="out-in"&&l.type!==na)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,d=void 0},D1(s);a==="in-out"&&l.type!==na?p.delayLeave=(v,m,x)=>{const E=hS(r,d);E[String(d.key)]=d,v[sd]=()=>{m(),v[sd]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{x(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return s}}};function uS(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==na){e=n;break}}return e}const cS=B8;function hS(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Sp(t,e,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:v,onLeave:m,onAfterLeave:x,onLeaveCancelled:E,onBeforeAppear:M,onAppear:A,onAfterAppear:O,onAppearCancelled:z}=e,K=String(t.key),ne=hS(n,t),me=(j,q)=>{j&&Yu(j,r,9,q)},pe=(j,q)=>{const I=q[1];me(j,q),ir(j)?j.every(B=>B.length<=1)&&I():j.length<=1&&I()},N={mode:o,persisted:a,beforeEnter(j){let q=l;if(!n.isMounted)if(s)q=M||l;else return;j[sd]&&j[sd](!0);const I=ne[K];I&&vc(t,I)&&I.el[sd]&&I.el[sd](),me(q,[j])},enter(j){let q=c,I=d,B=p;if(!n.isMounted)if(s)q=A||c,I=O||d,B=z||p;else return;let $=!1;const R=j[p0]=U=>{$||($=!0,U?me(B,[j]):me(I,[j]),N.delayedLeave&&N.delayedLeave(),j[p0]=void 0)};q?pe(q,[j,R]):R()},leave(j,q){const I=String(t.key);if(j[p0]&&j[p0](!0),n.isUnmounting)return q();me(v,[j]);let B=!1;const $=j[sd]=R=>{B||(B=!0,q(),R?me(E,[j]):me(x,[j]),j[sd]=void 0,ne[I]===t&&delete ne[I])};ne[I]=t,m?pe(m,[j,$]):$()},clone(j){const q=Sp(j,e,n,r,i);return i&&i(q),q}};return N}function D1(t){if(km(t))return t=eh(t),t.children=null,t}function Bx(t){if(!km(t))return sS(t.type)&&t.children?uS(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Dr(n.default))return n.default()}}function Nh(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Nh(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Sy(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===Cn?(o.patchFlag&128&&i++,r=r.concat(Sy(o.children,e,a))):(e||o.type!==na)&&r.push(a!=null?eh(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Fs(t,e){return Dr(t)?Ss({name:t.name},e,{setup:t}):t}function R8(){const t=Xu();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function x_(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function F8(t){const e=Xu(),n=v_(null);if(e){const i=e.refs===zi?e.refs={}:e.refs;Object.defineProperty(i,t,{enumerable:!0,get:()=>n.value,set:s=>n.value=s})}return n}function cm(t,e,n,r,i=!1){if(ir(t)){t.forEach((x,E)=>cm(x,e&&(ir(e)?e[E]:e),n,r,i));return}if(vd(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&cm(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?Tm(r.component):r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,d=a.refs===zi?a.refs={}:a.refs,p=a.setupState,v=ji(p),m=p===zi?()=>!1:x=>rs(v,x);if(c!=null&&c!==l&&(Os(c)?(d[c]=null,m(c)&&(p[c]=null)):ho(c)&&(c.value=null)),Dr(l))Fp(l,a,12,[o,d]);else{const x=Os(l),E=ho(l);if(x||E){const M=()=>{if(t.f){const A=x?m(l)?p[l]:d[l]:l.value;i?ir(A)&&a_(A,s):ir(A)?A.includes(s)||A.push(s):x?(d[l]=[s],m(l)&&(p[l]=d[l])):(l.value=[s],t.k&&(d[t.k]=l.value))}else x?(d[l]=o,m(l)&&(p[l]=o)):E&&(l.value=o,t.k&&(d[t.k]=o))};o?(M.id=-1,aa(M,n)):M()}}}let Rx=!1;const qf=()=>{Rx||(console.error("Hydration completed but contains mismatches."),Rx=!0)},j8=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",z8=t=>t.namespaceURI.includes("MathML"),g0=t=>{if(t.nodeType===1){if(j8(t))return"svg";if(z8(t))return"mathml"}},cp=t=>t.nodeType===8;function $8(t){const{mt:e,p:n,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:a,insert:l,createComment:c}}=t,d=(z,K)=>{if(!K.hasChildNodes()){n(null,z,K),kv(),K._vnode=z;return}p(K.firstChild,z,null,null,null),kv(),K._vnode=z},p=(z,K,ne,me,pe,N=!1)=>{N=N||!!K.dynamicChildren;const j=cp(z)&&z.data==="[",q=()=>E(z,K,ne,me,pe,j),{type:I,ref:B,shapeFlag:$,patchFlag:R}=K;let U=z.nodeType;K.el=z,R===-2&&(N=!1,K.dynamicChildren=null);let V=null;switch(I){case yd:U!==3?K.children===""?(l(K.el=i(""),o(z),z),V=z):V=q():(z.data!==K.children&&(qf(),z.data=K.children),V=s(z));break;case na:O(z)?(V=s(z),A(K.el=z.content.firstChild,z,ne)):U!==8||j?V=q():V=s(z);break;case df:if(j&&(z=s(z),U=z.nodeType),U===1||U===3){V=z;const re=!K.children.length;for(let J=0;J<K.staticCount;J++)re&&(K.children+=V.nodeType===1?V.outerHTML:V.data),J===K.staticCount-1&&(K.anchor=V),V=s(V);return j?s(V):V}else q();break;case Cn:j?V=x(z,K,ne,me,pe,N):V=q();break;default:if($&1)(U!==1||K.type.toLowerCase()!==z.tagName.toLowerCase())&&!O(z)?V=q():V=v(z,K,ne,me,pe,N);else if($&6){K.slotScopeIds=pe;const re=o(z);if(j?V=M(z):cp(z)&&z.data==="teleport start"?V=M(z,z.data,"teleport end"):V=s(z),e(K,re,null,ne,me,g0(re),N),vd(K)&&!K.type.__asyncResolved){let J;j?(J=pi(Cn),J.anchor=V?V.previousSibling:re.lastChild):J=z.nodeType===3?si(""):pi("div"),J.el=z,K.component.subTree=J}}else $&64?U!==8?V=q():V=K.type.hydrate(z,K,ne,me,pe,N,t,m):$&128&&(V=K.type.hydrate(z,K,ne,me,g0(o(z)),pe,N,t,p))}return B!=null&&cm(B,null,me,K),V},v=(z,K,ne,me,pe,N)=>{N=N||!!K.dynamicChildren;const{type:j,props:q,patchFlag:I,shapeFlag:B,dirs:$,transition:R}=K,U=j==="input"||j==="option";if(U||I!==-1){$&&Uc(K,null,ne,"created");let V=!1;if(O(z)){V=FS(null,R)&&ne&&ne.vnode.props&&ne.vnode.props.appear;const J=z.content.firstChild;V&&R.beforeEnter(J),A(J,z,ne),K.el=z=J}if(B&16&&!(q&&(q.innerHTML||q.textContent))){let J=m(z.firstChild,K,z,ne,me,pe,N);for(;J;){m0(z,1)||qf();const _e=J;J=J.nextSibling,a(_e)}}else if(B&8){let J=K.children;J[0]===`
`&&(z.tagName==="PRE"||z.tagName==="TEXTAREA")&&(J=J.slice(1)),z.textContent!==J&&(m0(z,0)||qf(),z.textContent=K.children)}if(q){if(U||!N||I&48){const J=z.tagName.includes("-");for(const _e in q)(U&&(_e.endsWith("value")||_e==="indeterminate")||Pm(_e)&&!gp(_e)||_e[0]==="."||J)&&r(z,_e,null,q[_e],void 0,ne)}else if(q.onClick)r(z,"onClick",null,q.onClick,void 0,ne);else if(I&4&&Zc(q.style))for(const J in q.style)q.style[J]}let re;(re=q&&q.onVnodeBeforeMount)&&Yl(re,ne,K),$&&Uc(K,null,ne,"beforeMount"),((re=q&&q.onVnodeMounted)||$||V)&&qS(()=>{re&&Yl(re,ne,K),V&&R.enter(z),$&&Uc(K,null,ne,"mounted")},me)}return z.nextSibling},m=(z,K,ne,me,pe,N,j)=>{j=j||!!K.dynamicChildren;const q=K.children,I=q.length;for(let B=0;B<I;B++){const $=j?q[B]:q[B]=Kl(q[B]),R=$.type===yd;z?(R&&!j&&B+1<I&&Kl(q[B+1]).type===yd&&(l(i(z.data.slice($.children.length)),ne,s(z)),z.data=$.children),z=p(z,$,me,pe,N,j)):R&&!$.children?l($.el=i(""),ne):(m0(ne,1)||qf(),n(null,$,ne,null,me,pe,g0(ne),N))}return z},x=(z,K,ne,me,pe,N)=>{const{slotScopeIds:j}=K;j&&(pe=pe?pe.concat(j):j);const q=o(z),I=m(s(z),K,q,ne,me,pe,N);return I&&cp(I)&&I.data==="]"?s(K.anchor=I):(qf(),l(K.anchor=c("]"),q,I),I)},E=(z,K,ne,me,pe,N)=>{if(m0(z.parentElement,1)||qf(),K.el=null,N){const I=M(z);for(;;){const B=s(z);if(B&&B!==I)a(B);else break}}const j=s(z),q=o(z);return a(z),n(null,K,q,j,ne,me,g0(q),pe),ne&&(ne.vnode.el=K.el,My(ne,K.el)),j},M=(z,K="[",ne="]")=>{let me=0;for(;z;)if(z=s(z),z&&cp(z)&&(z.data===K&&me++,z.data===ne)){if(me===0)return s(z);me--}return z},A=(z,K,ne)=>{const me=K.parentNode;me&&me.replaceChild(z,K);let pe=ne;for(;pe;)pe.vnode.el===K&&(pe.vnode.el=pe.subTree.el=z),pe=pe.parent},O=z=>z.nodeType===1&&z.tagName==="TEMPLATE";return[d,p]}const Fx="data-allow-mismatch",V8={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function m0(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Fx);)t=t.parentElement;const n=t&&t.getAttribute(Fx);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:n.split(",").includes(V8[e])}}const U8=gy().requestIdleCallback||(t=>setTimeout(t,1)),H8=gy().cancelIdleCallback||(t=>clearTimeout(t)),W8=(t=1e4)=>e=>{const n=U8(e,{timeout:t});return()=>H8(n)};function G8(t){const{top:e,left:n,bottom:r,right:i}=t.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(e>0&&e<s||r>0&&r<s)&&(n>0&&n<o||i>0&&i<o)}const q8=t=>(e,n)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),e();break}},t);return n(i=>{if(i instanceof Element){if(G8(i))return e(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},Y8=t=>e=>{if(t){const n=matchMedia(t);if(n.matches)e();else return n.addEventListener("change",e,{once:!0}),()=>n.removeEventListener("change",e)}},K8=(t=[])=>(e,n)=>{Os(t)&&(t=[t]);let r=!1;const i=o=>{r||(r=!0,s(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{n(o=>{for(const a of t)o.removeEventListener(a,i)})};return n(o=>{for(const a of t)o.addEventListener(a,i,{once:!0})}),s};function Z8(t,e){if(cp(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(cp(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const vd=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function X8(t){Dr(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:a=!0,onError:l}=t;let c=null,d,p=0;const v=()=>(p++,c=null,m()),m=()=>{let x;return c||(x=c=e().catch(E=>{if(E=E instanceof Error?E:new Error(String(E)),l)return new Promise((M,A)=>{l(E,()=>M(v()),()=>A(E),p+1)});throw E}).then(E=>x!==c&&c?c:(E&&(E.__esModule||E[Symbol.toStringTag]==="Module")&&(E=E.default),d=E,E)))};return Fs({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(x,E,M){const A=s?()=>{const O=s(M,z=>Z8(x,z));O&&(E.bum||(E.bum=[])).push(O)}:M;d?A():m().then(()=>!E.isUnmounted&&A())},get __asyncResolved(){return d},setup(){const x=ua;if(x_(x),d)return()=>O1(d,x);const E=z=>{c=null,Cf(z,x,13,!r)};if(a&&x.suspense||Cp)return m().then(z=>()=>O1(z,x)).catch(z=>(E(z),()=>r?pi(r,{error:z}):null));const M=xt(!1),A=xt(),O=xt(!!i);return i&&setTimeout(()=>{O.value=!1},i),o!=null&&setTimeout(()=>{if(!M.value&&!A.value){const z=new Error(`Async component timed out after ${o}ms.`);E(z),A.value=z}},o),m().then(()=>{M.value=!0,x.parent&&km(x.parent.vnode)&&x.parent.update()}).catch(z=>{E(z),A.value=z}),()=>{if(M.value&&d)return O1(d,x);if(A.value&&r)return pi(r,{error:A.value});if(n&&!O.value)return pi(n)}}})}function O1(t,e){const{ref:n,props:r,children:i,ce:s}=e.vnode,o=pi(t,r,i);return o.ref=n,o.ce=s,delete e.vnode.ce,o}const km=t=>t.type.__isKeepAlive,J8={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Xu(),r=n.ctx;if(!r.renderer)return()=>{const O=e.default&&e.default();return O&&O.length===1?O[0]:O};const i=new Map,s=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:c,um:d,o:{createElement:p}}}=r,v=p("div");r.activate=(O,z,K,ne,me)=>{const pe=O.component;c(O,z,K,0,a),l(pe.vnode,O,z,K,pe,a,ne,O.slotScopeIds,me),aa(()=>{pe.isDeactivated=!1,pe.a&&mp(pe.a);const N=O.props&&O.props.onVnodeMounted;N&&Yl(N,pe.parent,O)},a)},r.deactivate=O=>{const z=O.component;Tv(z.m),Tv(z.a),c(O,v,null,1,a),aa(()=>{z.da&&mp(z.da);const K=O.props&&O.props.onVnodeUnmounted;K&&Yl(K,z.parent,O),z.isDeactivated=!0},a)};function m(O){N1(O),d(O,n,a,!0)}function x(O){i.forEach((z,K)=>{const ne=X2(z.type);ne&&!O(ne)&&E(K)})}function E(O){const z=i.get(O);z&&(!o||!vc(z,o))?m(z):o&&N1(o),i.delete(O),s.delete(O)}Di(()=>[t.include,t.exclude],([O,z])=>{O&&x(K=>yg(O,K)),z&&x(K=>!yg(z,K))},{flush:"post",deep:!0});let M=null;const A=()=>{M!=null&&(Dv(n.subTree.type)?aa(()=>{i.set(M,v0(n.subTree))},n.subTree.suspense):i.set(M,v0(n.subTree)))};return fo(A),Ey(A),Td(()=>{i.forEach(O=>{const{subTree:z,suspense:K}=n,ne=v0(z);if(O.type===ne.type&&O.key===ne.key){N1(ne);const me=ne.component.da;me&&aa(me,K);return}m(O)})}),()=>{if(M=null,!e.default)return o=null;const O=e.default(),z=O[0];if(O.length>1)return o=null,O;if(!Ih(z)||!(z.shapeFlag&4)&&!(z.shapeFlag&128))return o=null,z;let K=v0(z);if(K.type===na)return o=null,K;const ne=K.type,me=X2(vd(K)?K.type.__asyncResolved||{}:ne),{include:pe,exclude:N,max:j}=t;if(pe&&(!me||!yg(pe,me))||N&&me&&yg(N,me))return K.shapeFlag&=-257,o=K,z;const q=K.key==null?ne:K.key,I=i.get(q);return K.el&&(K=eh(K),z.shapeFlag&128&&(z.ssContent=K)),M=q,I?(K.el=I.el,K.component=I.component,K.transition&&Nh(K,K.transition),K.shapeFlag|=512,s.delete(q),s.add(q)):(s.add(q),j&&s.size>parseInt(j,10)&&E(s.values().next().value)),K.shapeFlag|=256,o=K,Dv(z.type)?z:K}}},Q8=J8;function yg(t,e){return ir(t)?t.some(n=>yg(n,e)):Os(t)?t.split(",").includes(e):kD(t)?(t.lastIndex=0,t.test(e)):!1}function dS(t,e){pS(t,"a",e)}function fS(t,e){pS(t,"da",e)}function pS(t,e,n=ua){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Cy(e,r,n),n){let i=n.parent;for(;i&&i.parent;)km(i.parent.vnode)&&eO(r,e,n,i),i=i.parent}}function eO(t,e,n,r){const i=Cy(e,t,r,!0);Ku(()=>{a_(r[e],i)},n)}function N1(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function v0(t){return t.shapeFlag&128?t.ssContent:t}function Cy(t,e,n=ua,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{kd();const a=bf(n),l=Yu(e,n,t,o);return a(),Ad(),l});return r?i.unshift(s):i.push(s),s}}const Fh=t=>(e,n=ua)=>{(!Cp||t==="sp")&&Cy(t,(...r)=>e(...r),n)},gS=Fh("bm"),fo=Fh("m"),L_=Fh("bu"),Ey=Fh("u"),Td=Fh("bum"),Ku=Fh("um"),mS=Fh("sp"),vS=Fh("rtg"),yS=Fh("rtc");function bS(t,e=ua){Cy("ec",t,e)}const S_="components",tO="directives";function _S(t,e){return C_(S_,t,!0,e)||t}const wS=Symbol.for("v-ndc");function nO(t){return Os(t)?C_(S_,t,!1)||t:t||wS}function rO(t){return C_(tO,t)}function C_(t,e,n=!0,r=!1){const i=ca||ua;if(i){const s=i.type;if(t===S_){const a=X2(s,!1);if(a&&(a===e||a===Va(e)||a===Mm(Va(e))))return s}const o=jx(i[t]||s[t],e)||jx(i.appContext[t],e);return!o&&r?s:o}}function jx(t,e){return t&&(t[e]||t[Va(e)]||t[Mm(Va(e))])}function pr(t,e,n,r){let i;const s=n&&n[r],o=ir(t);if(o||Os(t)){const a=o&&Zc(t);let l=!1;a&&(l=!Su(t),t=yy(t)),i=new Array(t.length);for(let c=0,d=t.length;c<d;c++)i[c]=e(l?al(t[c]):t[c],c,void 0,s&&s[c])}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s&&s[a])}else if(gs(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s&&s[l]));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const d=a[l];i[l]=e(t[d],d,l,s&&s[l])}}else i=[];return n&&(n[r]=i),i}function iO(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(ir(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return t}function sO(t,e,n={},r,i){if(ca.ce||ca.parent&&vd(ca.parent)&&ca.parent.ce)return e!=="default"&&(n.name=e),Re(),$a(Cn,null,[pi("slot",n,r&&r())],64);let s=t[e];s&&s._c&&(s._d=!1),Re();const o=s&&E_(s(n)),a=n.key||o&&o.key,l=$a(Cn,{key:(a&&!xc(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function E_(t){return t.some(e=>Ih(e)?!(e.type===na||e.type===Cn&&!E_(e.children)):!0)?t:null}function oO(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:Ng(r)]=t[r];return n}const z2=t=>t?eC(t)?Tm(t):z2(t.parent):null,Fg=Ss(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>z2(t.parent),$root:t=>z2(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>P_(t),$forceUpdate:t=>t.f||(t.f=()=>{b_(t.update)}),$nextTick:t=>t.n||(t.n=la.bind(t.proxy)),$watch:t=>BO.bind(t)}),I1=(t,e)=>t!==zi&&!t.__isScriptSetup&&rs(t,e),$2={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(I1(r,e))return o[e]=1,r[e];if(i!==zi&&rs(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&rs(c,e))return o[e]=3,s[e];if(n!==zi&&rs(n,e))return o[e]=4,n[e];V2&&(o[e]=0)}}const d=Fg[e];let p,v;if(d)return e==="$attrs"&&ol(t.attrs,"get",""),d(t);if((p=a.__cssModules)&&(p=p[e]))return p;if(n!==zi&&rs(n,e))return o[e]=4,n[e];if(v=l.config.globalProperties,rs(v,e))return v[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return I1(i,e)?(i[e]=n,!0):r!==zi&&rs(r,e)?(r[e]=n,!0):rs(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==zi&&rs(t,o)||I1(e,o)||(a=s[0])&&rs(a,o)||rs(r,o)||rs(Fg,o)||rs(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:rs(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},aO=Ss({},$2,{get(t,e){if(e!==Symbol.unscopables)return $2.get(t,e,t)},has(t,e){return e[0]!=="_"&&!ND(e)}});function lO(){return null}function uO(){return null}function cO(t){}function hO(t){}function dO(){return null}function fO(){}function pO(t,e){return null}function gO(){return xS().slots}function mO(){return xS().attrs}function xS(){const t=Xu();return t.setupContext||(t.setupContext=rC(t))}function hm(t){return ir(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function vO(t,e){const n=hm(t);for(const r in e){if(r.startsWith("__skip"))continue;let i=n[r];i?ir(i)||Dr(i)?i=n[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=n[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function yO(t,e){return!t||!e?t||e:ir(t)&&ir(e)?t.concat(e):Ss({},hm(t),hm(e))}function bO(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function _O(t){const e=Xu();let n=t();return Y2(),l_(n)&&(n=n.catch(r=>{throw bf(e),r})),[n,()=>bf(e)]}let V2=!0;function wO(t){const e=P_(t),n=t.proxy,r=t.ctx;V2=!1,e.beforeCreate&&zx(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:d,beforeMount:p,mounted:v,beforeUpdate:m,updated:x,activated:E,deactivated:M,beforeDestroy:A,beforeUnmount:O,destroyed:z,unmounted:K,render:ne,renderTracked:me,renderTriggered:pe,errorCaptured:N,serverPrefetch:j,expose:q,inheritAttrs:I,components:B,directives:$,filters:R}=e;if(c&&xO(c,r,null),o)for(const re in o){const J=o[re];Dr(J)&&(r[re]=J.bind(n))}if(i){const re=i.call(n,n);gs(re)&&(t.data=nu(re))}if(V2=!0,s)for(const re in s){const J=s[re],_e=Dr(J)?J.bind(n,n):Dr(J.get)?J.get.bind(n,n):Gu,Le=!Dr(J)&&Dr(J.set)?J.set.bind(n):Gu,Oe=Kn({get:_e,set:Le});Object.defineProperty(r,re,{enumerable:!0,configurable:!0,get:()=>Oe.value,set:Z=>Oe.value=Z})}if(a)for(const re in a)LS(a[re],r,n,re);if(l){const re=Dr(l)?l.call(n):l;Reflect.ownKeys(re).forEach(J=>{jg(J,re[J])})}d&&zx(d,t,"c");function V(re,J){ir(J)?J.forEach(_e=>re(_e.bind(n))):J&&re(J.bind(n))}if(V(gS,p),V(fo,v),V(L_,m),V(Ey,x),V(dS,E),V(fS,M),V(bS,N),V(yS,me),V(vS,pe),V(Td,O),V(Ku,K),V(mS,j),ir(q))if(q.length){const re=t.exposed||(t.exposed={});q.forEach(J=>{Object.defineProperty(re,J,{get:()=>n[J],set:_e=>n[J]=_e})})}else t.exposed||(t.exposed={});ne&&t.render===Gu&&(t.render=ne),I!=null&&(t.inheritAttrs=I),B&&(t.components=B),$&&(t.directives=$),j&&x_(t)}function xO(t,e,n=Gu){ir(t)&&(t=U2(t));for(const r in t){const i=t[r];let s;gs(i)?"default"in i?s=Cu(i.from||r,i.default,!0):s=Cu(i.from||r):s=Cu(i),ho(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function zx(t,e,n){Yu(ir(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function LS(t,e,n,r){let i=r.includes(".")?US(n,r):()=>n[r];if(Os(t)){const s=e[t];Dr(s)&&Di(i,s)}else if(Dr(t))Di(i,t.bind(n));else if(gs(t))if(ir(t))t.forEach(s=>LS(s,e,n,r));else{const s=Dr(t.handler)?t.handler.bind(n):e[t.handler];Dr(s)&&Di(i,s,t)}}function P_(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>Av(l,c,o,!0)),Av(l,e,o)),gs(e)&&s.set(e,l),l}function Av(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Av(t,s,n,!0),i&&i.forEach(o=>Av(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=LO[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const LO={data:$x,props:Vx,emits:Vx,methods:bg,computed:bg,beforeCreate:xl,created:xl,beforeMount:xl,mounted:xl,beforeUpdate:xl,updated:xl,beforeDestroy:xl,beforeUnmount:xl,destroyed:xl,unmounted:xl,activated:xl,deactivated:xl,errorCaptured:xl,serverPrefetch:xl,components:bg,directives:bg,watch:CO,provide:$x,inject:SO};function $x(t,e){return e?t?function(){return Ss(Dr(t)?t.call(this,this):t,Dr(e)?e.call(this,this):e)}:e:t}function SO(t,e){return bg(U2(t),U2(e))}function U2(t){if(ir(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function xl(t,e){return t?[...new Set([].concat(t,e))]:e}function bg(t,e){return t?Ss(Object.create(null),t,e):e}function Vx(t,e){return t?ir(t)&&ir(e)?[...new Set([...t,...e])]:Ss(Object.create(null),hm(t),hm(e??{})):e}function CO(t,e){if(!t)return e;if(!e)return t;const n=Ss(Object.create(null),t);for(const r in e)n[r]=xl(t[r],e[r]);return n}function SS(){return{app:null,config:{isNativeTag:PD,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let EO=0;function PO(t,e){return function(r,i=null){Dr(r)||(r=Ss({},r)),i!=null&&!gs(i)&&(i=null);const s=SS(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:EO++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:sC,get config(){return s.config},set config(d){},use(d,...p){return o.has(d)||(d&&Dr(d.install)?(o.add(d),d.install(c,...p)):Dr(d)&&(o.add(d),d(c,...p))),c},mixin(d){return s.mixins.includes(d)||s.mixins.push(d),c},component(d,p){return p?(s.components[d]=p,c):s.components[d]},directive(d,p){return p?(s.directives[d]=p,c):s.directives[d]},mount(d,p,v){if(!l){const m=c._ceVNode||pi(r,i);return m.appContext=s,v===!0?v="svg":v===!1&&(v=void 0),p&&e?e(m,d):t(m,d,v),l=!0,c._container=d,d.__vue_app__=c,Tm(m.component)}},onUnmount(d){a.push(d)},unmount(){l&&(Yu(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(d,p){return s.provides[d]=p,c},runWithContext(d){const p=hf;hf=c;try{return d()}finally{hf=p}}};return c}}let hf=null;function jg(t,e){if(ua){let n=ua.provides;const r=ua.parent&&ua.parent.provides;r===n&&(n=ua.provides=Object.create(r)),n[t]=e}}function Cu(t,e,n=!1){const r=ua||ca;if(r||hf){const i=hf?hf._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Dr(e)?e.call(r&&r.proxy):e}}function CS(){return!!(ua||ca||hf)}const ES={},PS=()=>Object.create(ES),MS=t=>Object.getPrototypeOf(t)===ES;function MO(t,e,n,r=!1){const i={},s=PS();t.propsDefaults=Object.create(null),kS(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:m_(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function kO(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=ji(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let p=0;p<d.length;p++){let v=d[p];if(Py(t.emitsOptions,v))continue;const m=e[v];if(l)if(rs(s,v))m!==s[v]&&(s[v]=m,c=!0);else{const x=Va(v);i[x]=H2(l,a,x,m,t,!1)}else m!==s[v]&&(s[v]=m,c=!0)}}}else{kS(t,e,i,s)&&(c=!0);let d;for(const p in a)(!e||!rs(e,p)&&((d=Zl(p))===p||!rs(e,d)))&&(l?n&&(n[p]!==void 0||n[d]!==void 0)&&(i[p]=H2(l,a,p,void 0,t,!0)):delete i[p]);if(s!==a)for(const p in s)(!e||!rs(e,p))&&(delete s[p],c=!0)}c&&Ch(t.attrs,"set","")}function kS(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(gp(l))continue;const c=e[l];let d;i&&rs(i,d=Va(l))?!s||!s.includes(d)?n[d]=c:(a||(a={}))[d]=c:Py(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=ji(n),c=a||zi;for(let d=0;d<s.length;d++){const p=s[d];n[p]=H2(i,l,p,c[p],t,!rs(c,p))}}return o}function H2(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=rs(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Dr(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const d=bf(i);r=c[n]=l.call(null,e),d()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Zl(n))&&(r=!0))}return r}const AO=new WeakMap;function AS(t,e,n=!1){const r=n?AO:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!Dr(t)){const d=p=>{l=!0;const[v,m]=AS(p,e,!0);Ss(o,v),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!s&&!l)return gs(t)&&r.set(t,fp),fp;if(ir(s))for(let d=0;d<s.length;d++){const p=Va(s[d]);Ux(p)&&(o[p]=zi)}else if(s)for(const d in s){const p=Va(d);if(Ux(p)){const v=s[d],m=o[p]=ir(v)||Dr(v)?{type:v}:Ss({},v),x=m.type;let E=!1,M=!0;if(ir(x))for(let A=0;A<x.length;++A){const O=x[A],z=Dr(O)&&O.name;if(z==="Boolean"){E=!0;break}else z==="String"&&(M=!1)}else E=Dr(x)&&x.name==="Boolean";m[0]=E,m[1]=M,(E||rs(m,"default"))&&a.push(p)}}const c=[o,a];return gs(t)&&r.set(t,c),c}function Ux(t){return t[0]!=="$"&&!gp(t)}const TS=t=>t[0]==="_"||t==="$stable",M_=t=>ir(t)?t.map(Kl):[Kl(t)],TO=(t,e,n)=>{if(e._n)return e;const r=Wu((...i)=>M_(e(...i)),n);return r._c=!1,r},DS=(t,e,n)=>{const r=t._ctx;for(const i in t){if(TS(i))continue;const s=t[i];if(Dr(s))e[i]=TO(i,s,r);else if(s!=null){const o=M_(s);e[i]=()=>o}}},OS=(t,e)=>{const n=M_(e);t.slots.default=()=>n},NS=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},DO=(t,e,n)=>{const r=t.slots=PS();if(t.vnode.shapeFlag&32){const i=e._;i?(NS(r,e,n),n&&ML(r,"_",i,!0)):DS(e,r)}else e&&OS(t,e)},OO=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=zi;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:NS(i,e,n):(s=!e.$stable,DS(e,i)),o=e}else e&&(OS(t,e),o={default:1});if(s)for(const a in i)!TS(a)&&o[a]==null&&delete i[a]},aa=qS;function IS(t){return RS(t)}function BS(t){return RS(t,$8)}function RS(t,e){const n=gy();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:d,parentNode:p,nextSibling:v,setScopeId:m=Gu,insertStaticContent:x}=t,E=(ge,Q,ie,fe=null,Ce=null,de=null,Xe=void 0,Ie=null,Ye=!!Q.dynamicChildren)=>{if(ge===Q)return;ge&&!vc(ge,Q)&&(fe=ve(ge),Z(ge,Ce,de,!0),ge=null),Q.patchFlag===-2&&(Ye=!1,Q.dynamicChildren=null);const{type:Je,ref:Ge,shapeFlag:wt}=Q;switch(Je){case yd:M(ge,Q,ie,fe);break;case na:A(ge,Q,ie,fe);break;case df:ge==null&&O(Q,ie,fe,Xe);break;case Cn:B(ge,Q,ie,fe,Ce,de,Xe,Ie,Ye);break;default:wt&1?ne(ge,Q,ie,fe,Ce,de,Xe,Ie,Ye):wt&6?$(ge,Q,ie,fe,Ce,de,Xe,Ie,Ye):(wt&64||wt&128)&&Je.process(ge,Q,ie,fe,Ce,de,Xe,Ie,Ye,De)}Ge!=null&&Ce&&cm(Ge,ge&&ge.ref,de,Q||ge,!Q)},M=(ge,Q,ie,fe)=>{if(ge==null)r(Q.el=a(Q.children),ie,fe);else{const Ce=Q.el=ge.el;Q.children!==ge.children&&c(Ce,Q.children)}},A=(ge,Q,ie,fe)=>{ge==null?r(Q.el=l(Q.children||""),ie,fe):Q.el=ge.el},O=(ge,Q,ie,fe)=>{[ge.el,ge.anchor]=x(ge.children,Q,ie,fe,ge.el,ge.anchor)},z=({el:ge,anchor:Q},ie,fe)=>{let Ce;for(;ge&&ge!==Q;)Ce=v(ge),r(ge,ie,fe),ge=Ce;r(Q,ie,fe)},K=({el:ge,anchor:Q})=>{let ie;for(;ge&&ge!==Q;)ie=v(ge),i(ge),ge=ie;i(Q)},ne=(ge,Q,ie,fe,Ce,de,Xe,Ie,Ye)=>{Q.type==="svg"?Xe="svg":Q.type==="math"&&(Xe="mathml"),ge==null?me(Q,ie,fe,Ce,de,Xe,Ie,Ye):j(ge,Q,Ce,de,Xe,Ie,Ye)},me=(ge,Q,ie,fe,Ce,de,Xe,Ie)=>{let Ye,Je;const{props:Ge,shapeFlag:wt,transition:Ct,dirs:Wt}=ge;if(Ye=ge.el=o(ge.type,de,Ge&&Ge.is,Ge),wt&8?d(Ye,ge.children):wt&16&&N(ge.children,Ye,null,fe,Ce,B1(ge,de),Xe,Ie),Wt&&Uc(ge,null,fe,"created"),pe(Ye,ge,ge.scopeId,Xe,fe),Ge){for(const bn in Ge)bn!=="value"&&!gp(bn)&&s(Ye,bn,null,Ge[bn],de,fe);"value"in Ge&&s(Ye,"value",null,Ge.value,de),(Je=Ge.onVnodeBeforeMount)&&Yl(Je,fe,ge)}Wt&&Uc(ge,null,fe,"beforeMount");const sn=FS(Ce,Ct);sn&&Ct.beforeEnter(Ye),r(Ye,Q,ie),((Je=Ge&&Ge.onVnodeMounted)||sn||Wt)&&aa(()=>{Je&&Yl(Je,fe,ge),sn&&Ct.enter(Ye),Wt&&Uc(ge,null,fe,"mounted")},Ce)},pe=(ge,Q,ie,fe,Ce)=>{if(ie&&m(ge,ie),fe)for(let de=0;de<fe.length;de++)m(ge,fe[de]);if(Ce){let de=Ce.subTree;if(Q===de||Dv(de.type)&&(de.ssContent===Q||de.ssFallback===Q)){const Xe=Ce.vnode;pe(ge,Xe,Xe.scopeId,Xe.slotScopeIds,Ce.parent)}}},N=(ge,Q,ie,fe,Ce,de,Xe,Ie,Ye=0)=>{for(let Je=Ye;Je<ge.length;Je++){const Ge=ge[Je]=Ie?od(ge[Je]):Kl(ge[Je]);E(null,Ge,Q,ie,fe,Ce,de,Xe,Ie)}},j=(ge,Q,ie,fe,Ce,de,Xe)=>{const Ie=Q.el=ge.el;let{patchFlag:Ye,dynamicChildren:Je,dirs:Ge}=Q;Ye|=ge.patchFlag&16;const wt=ge.props||zi,Ct=Q.props||zi;let Wt;if(ie&&Ud(ie,!1),(Wt=Ct.onVnodeBeforeUpdate)&&Yl(Wt,ie,Q,ge),Ge&&Uc(Q,ge,ie,"beforeUpdate"),ie&&Ud(ie,!0),(wt.innerHTML&&Ct.innerHTML==null||wt.textContent&&Ct.textContent==null)&&d(Ie,""),Je?q(ge.dynamicChildren,Je,Ie,ie,fe,B1(Q,Ce),de):Xe||J(ge,Q,Ie,null,ie,fe,B1(Q,Ce),de,!1),Ye>0){if(Ye&16)I(Ie,wt,Ct,ie,Ce);else if(Ye&2&&wt.class!==Ct.class&&s(Ie,"class",null,Ct.class,Ce),Ye&4&&s(Ie,"style",wt.style,Ct.style,Ce),Ye&8){const sn=Q.dynamicProps;for(let bn=0;bn<sn.length;bn++){const Qe=sn[bn],ot=wt[Qe],it=Ct[Qe];(it!==ot||Qe==="value")&&s(Ie,Qe,ot,it,Ce,ie)}}Ye&1&&ge.children!==Q.children&&d(Ie,Q.children)}else!Xe&&Je==null&&I(Ie,wt,Ct,ie,Ce);((Wt=Ct.onVnodeUpdated)||Ge)&&aa(()=>{Wt&&Yl(Wt,ie,Q,ge),Ge&&Uc(Q,ge,ie,"updated")},fe)},q=(ge,Q,ie,fe,Ce,de,Xe)=>{for(let Ie=0;Ie<Q.length;Ie++){const Ye=ge[Ie],Je=Q[Ie],Ge=Ye.el&&(Ye.type===Cn||!vc(Ye,Je)||Ye.shapeFlag&70)?p(Ye.el):ie;E(Ye,Je,Ge,null,fe,Ce,de,Xe,!0)}},I=(ge,Q,ie,fe,Ce)=>{if(Q!==ie){if(Q!==zi)for(const de in Q)!gp(de)&&!(de in ie)&&s(ge,de,Q[de],null,Ce,fe);for(const de in ie){if(gp(de))continue;const Xe=ie[de],Ie=Q[de];Xe!==Ie&&de!=="value"&&s(ge,de,Ie,Xe,Ce,fe)}"value"in ie&&s(ge,"value",Q.value,ie.value,Ce)}},B=(ge,Q,ie,fe,Ce,de,Xe,Ie,Ye)=>{const Je=Q.el=ge?ge.el:a(""),Ge=Q.anchor=ge?ge.anchor:a("");let{patchFlag:wt,dynamicChildren:Ct,slotScopeIds:Wt}=Q;Wt&&(Ie=Ie?Ie.concat(Wt):Wt),ge==null?(r(Je,ie,fe),r(Ge,ie,fe),N(Q.children||[],ie,Ge,Ce,de,Xe,Ie,Ye)):wt>0&&wt&64&&Ct&&ge.dynamicChildren?(q(ge.dynamicChildren,Ct,ie,Ce,de,Xe,Ie),(Q.key!=null||Ce&&Q===Ce.subTree)&&k_(ge,Q,!0)):J(ge,Q,ie,Ge,Ce,de,Xe,Ie,Ye)},$=(ge,Q,ie,fe,Ce,de,Xe,Ie,Ye)=>{Q.slotScopeIds=Ie,ge==null?Q.shapeFlag&512?Ce.ctx.activate(Q,ie,fe,Xe,Ye):R(Q,ie,fe,Ce,de,Xe,Ye):U(ge,Q,Ye)},R=(ge,Q,ie,fe,Ce,de,Xe)=>{const Ie=ge.component=QS(ge,fe,Ce);if(km(ge)&&(Ie.ctx.renderer=De),tC(Ie,!1,Xe),Ie.asyncDep){if(Ce&&Ce.registerDep(Ie,V,Xe),!ge.el){const Ye=Ie.subTree=pi(na);A(null,Ye,Q,ie)}}else V(Ie,ge,Q,ie,Ce,de,Xe)},U=(ge,Q,ie)=>{const fe=Q.component=ge.component;if(VO(ge,Q,ie))if(fe.asyncDep&&!fe.asyncResolved){re(fe,Q,ie);return}else fe.next=Q,fe.update();else Q.el=ge.el,fe.vnode=Q},V=(ge,Q,ie,fe,Ce,de,Xe)=>{const Ie=()=>{if(ge.isMounted){let{next:wt,bu:Ct,u:Wt,parent:sn,vnode:bn}=ge;{const Qt=jS(ge);if(Qt){wt&&(wt.el=bn.el,re(ge,wt,Xe)),Qt.asyncDep.then(()=>{ge.isUnmounted||Ie()});return}}let Qe=wt,ot;Ud(ge,!1),wt?(wt.el=bn.el,re(ge,wt,Xe)):wt=bn,Ct&&mp(Ct),(ot=wt.props&&wt.props.onVnodeBeforeUpdate)&&Yl(ot,sn,wt,bn),Ud(ge,!0);const it=Z0(ge),Vt=ge.subTree;ge.subTree=it,E(Vt,it,p(Vt.el),ve(Vt),ge,Ce,de),wt.el=it.el,Qe===null&&My(ge,it.el),Wt&&aa(Wt,Ce),(ot=wt.props&&wt.props.onVnodeUpdated)&&aa(()=>Yl(ot,sn,wt,bn),Ce)}else{let wt;const{el:Ct,props:Wt}=Q,{bm:sn,m:bn,parent:Qe,root:ot,type:it}=ge,Vt=vd(Q);if(Ud(ge,!1),sn&&mp(sn),!Vt&&(wt=Wt&&Wt.onVnodeBeforeMount)&&Yl(wt,Qe,Q),Ud(ge,!0),Ct&&qe){const Qt=()=>{ge.subTree=Z0(ge),qe(Ct,ge.subTree,ge,Ce,null)};Vt&&it.__asyncHydrate?it.__asyncHydrate(Ct,ge,Qt):Qt()}else{ot.ce&&ot.ce._injectChildStyle(it);const Qt=ge.subTree=Z0(ge);E(null,Qt,ie,fe,ge,Ce,de),Q.el=Qt.el}if(bn&&aa(bn,Ce),!Vt&&(wt=Wt&&Wt.onVnodeMounted)){const Qt=Q;aa(()=>Yl(wt,Qe,Qt),Ce)}(Q.shapeFlag&256||Qe&&vd(Qe.vnode)&&Qe.vnode.shapeFlag&256)&&ge.a&&aa(ge.a,Ce),ge.isMounted=!0,Q=ie=fe=null}};ge.scope.on();const Ye=ge.effect=new im(Ie);ge.scope.off();const Je=ge.update=Ye.run.bind(Ye),Ge=ge.job=Ye.runIfDirty.bind(Ye);Ge.i=ge,Ge.id=ge.uid,Ye.scheduler=()=>b_(Ge),Ud(ge,!0),Je()},re=(ge,Q,ie)=>{Q.component=ge;const fe=ge.vnode.props;ge.vnode=Q,ge.next=null,kO(ge,Q.props,fe,ie),OO(ge,Q.children,ie),kd(),Dx(ge),Ad()},J=(ge,Q,ie,fe,Ce,de,Xe,Ie,Ye=!1)=>{const Je=ge&&ge.children,Ge=ge?ge.shapeFlag:0,wt=Q.children,{patchFlag:Ct,shapeFlag:Wt}=Q;if(Ct>0){if(Ct&128){Le(Je,wt,ie,fe,Ce,de,Xe,Ie,Ye);return}else if(Ct&256){_e(Je,wt,ie,fe,Ce,de,Xe,Ie,Ye);return}}Wt&8?(Ge&16&&he(Je,Ce,de),wt!==Je&&d(ie,wt)):Ge&16?Wt&16?Le(Je,wt,ie,fe,Ce,de,Xe,Ie,Ye):he(Je,Ce,de,!0):(Ge&8&&d(ie,""),Wt&16&&N(wt,ie,fe,Ce,de,Xe,Ie,Ye))},_e=(ge,Q,ie,fe,Ce,de,Xe,Ie,Ye)=>{ge=ge||fp,Q=Q||fp;const Je=ge.length,Ge=Q.length,wt=Math.min(Je,Ge);let Ct;for(Ct=0;Ct<wt;Ct++){const Wt=Q[Ct]=Ye?od(Q[Ct]):Kl(Q[Ct]);E(ge[Ct],Wt,ie,null,Ce,de,Xe,Ie,Ye)}Je>Ge?he(ge,Ce,de,!0,!1,wt):N(Q,ie,fe,Ce,de,Xe,Ie,Ye,wt)},Le=(ge,Q,ie,fe,Ce,de,Xe,Ie,Ye)=>{let Je=0;const Ge=Q.length;let wt=ge.length-1,Ct=Ge-1;for(;Je<=wt&&Je<=Ct;){const Wt=ge[Je],sn=Q[Je]=Ye?od(Q[Je]):Kl(Q[Je]);if(vc(Wt,sn))E(Wt,sn,ie,null,Ce,de,Xe,Ie,Ye);else break;Je++}for(;Je<=wt&&Je<=Ct;){const Wt=ge[wt],sn=Q[Ct]=Ye?od(Q[Ct]):Kl(Q[Ct]);if(vc(Wt,sn))E(Wt,sn,ie,null,Ce,de,Xe,Ie,Ye);else break;wt--,Ct--}if(Je>wt){if(Je<=Ct){const Wt=Ct+1,sn=Wt<Ge?Q[Wt].el:fe;for(;Je<=Ct;)E(null,Q[Je]=Ye?od(Q[Je]):Kl(Q[Je]),ie,sn,Ce,de,Xe,Ie,Ye),Je++}}else if(Je>Ct)for(;Je<=wt;)Z(ge[Je],Ce,de,!0),Je++;else{const Wt=Je,sn=Je,bn=new Map;for(Je=sn;Je<=Ct;Je++){const Mn=Q[Je]=Ye?od(Q[Je]):Kl(Q[Je]);Mn.key!=null&&bn.set(Mn.key,Je)}let Qe,ot=0;const it=Ct-sn+1;let Vt=!1,Qt=0;const kn=new Array(it);for(Je=0;Je<it;Je++)kn[Je]=0;for(Je=Wt;Je<=wt;Je++){const Mn=ge[Je];if(ot>=it){Z(Mn,Ce,de,!0);continue}let Zn;if(Mn.key!=null)Zn=bn.get(Mn.key);else for(Qe=sn;Qe<=Ct;Qe++)if(kn[Qe-sn]===0&&vc(Mn,Q[Qe])){Zn=Qe;break}Zn===void 0?Z(Mn,Ce,de,!0):(kn[Zn-sn]=Je+1,Zn>=Qt?Qt=Zn:Vt=!0,E(Mn,Q[Zn],ie,null,Ce,de,Xe,Ie,Ye),ot++)}const Ln=Vt?NO(kn):fp;for(Qe=Ln.length-1,Je=it-1;Je>=0;Je--){const Mn=sn+Je,Zn=Q[Mn],en=Mn+1<Ge?Q[Mn+1].el:fe;kn[Je]===0?E(null,Zn,ie,en,Ce,de,Xe,Ie,Ye):Vt&&(Qe<0||Je!==Ln[Qe]?Oe(Zn,ie,en,2):Qe--)}}},Oe=(ge,Q,ie,fe,Ce=null)=>{const{el:de,type:Xe,transition:Ie,children:Ye,shapeFlag:Je}=ge;if(Je&6){Oe(ge.component.subTree,Q,ie,fe);return}if(Je&128){ge.suspense.move(Q,ie,fe);return}if(Je&64){Xe.move(ge,Q,ie,De);return}if(Xe===Cn){r(de,Q,ie);for(let wt=0;wt<Ye.length;wt++)Oe(Ye[wt],Q,ie,fe);r(ge.anchor,Q,ie);return}if(Xe===df){z(ge,Q,ie);return}if(fe!==2&&Je&1&&Ie)if(fe===0)Ie.beforeEnter(de),r(de,Q,ie),aa(()=>Ie.enter(de),Ce);else{const{leave:wt,delayLeave:Ct,afterLeave:Wt}=Ie,sn=()=>r(de,Q,ie),bn=()=>{wt(de,()=>{sn(),Wt&&Wt()})};Ct?Ct(de,sn,bn):bn()}else r(de,Q,ie)},Z=(ge,Q,ie,fe=!1,Ce=!1)=>{const{type:de,props:Xe,ref:Ie,children:Ye,dynamicChildren:Je,shapeFlag:Ge,patchFlag:wt,dirs:Ct,cacheIndex:Wt}=ge;if(wt===-2&&(Ce=!1),Ie!=null&&cm(Ie,null,ie,ge,!0),Wt!=null&&(Q.renderCache[Wt]=void 0),Ge&256){Q.ctx.deactivate(ge);return}const sn=Ge&1&&Ct,bn=!vd(ge);let Qe;if(bn&&(Qe=Xe&&Xe.onVnodeBeforeUnmount)&&Yl(Qe,Q,ge),Ge&6)ce(ge.component,ie,fe);else{if(Ge&128){ge.suspense.unmount(ie,fe);return}sn&&Uc(ge,null,Q,"beforeUnmount"),Ge&64?ge.type.remove(ge,Q,ie,De,fe):Je&&!Je.hasOnce&&(de!==Cn||wt>0&&wt&64)?he(Je,Q,ie,!1,!0):(de===Cn&&wt&384||!Ce&&Ge&16)&&he(Ye,Q,ie),fe&&G(ge)}(bn&&(Qe=Xe&&Xe.onVnodeUnmounted)||sn)&&aa(()=>{Qe&&Yl(Qe,Q,ge),sn&&Uc(ge,null,Q,"unmounted")},ie)},G=ge=>{const{type:Q,el:ie,anchor:fe,transition:Ce}=ge;if(Q===Cn){se(ie,fe);return}if(Q===df){K(ge);return}const de=()=>{i(ie),Ce&&!Ce.persisted&&Ce.afterLeave&&Ce.afterLeave()};if(ge.shapeFlag&1&&Ce&&!Ce.persisted){const{leave:Xe,delayLeave:Ie}=Ce,Ye=()=>Xe(ie,de);Ie?Ie(ge.el,de,Ye):Ye()}else de()},se=(ge,Q)=>{let ie;for(;ge!==Q;)ie=v(ge),i(ge),ge=ie;i(Q)},ce=(ge,Q,ie)=>{const{bum:fe,scope:Ce,job:de,subTree:Xe,um:Ie,m:Ye,a:Je}=ge;Tv(Ye),Tv(Je),fe&&mp(fe),Ce.stop(),de&&(de.flags|=8,Z(Xe,ge,Q,ie)),Ie&&aa(Ie,Q),aa(()=>{ge.isUnmounted=!0},Q),Q&&Q.pendingBranch&&!Q.isUnmounted&&ge.asyncDep&&!ge.asyncResolved&&ge.suspenseId===Q.pendingId&&(Q.deps--,Q.deps===0&&Q.resolve())},he=(ge,Q,ie,fe=!1,Ce=!1,de=0)=>{for(let Xe=de;Xe<ge.length;Xe++)Z(ge[Xe],Q,ie,fe,Ce)},ve=ge=>{if(ge.shapeFlag&6)return ve(ge.component.subTree);if(ge.shapeFlag&128)return ge.suspense.next();const Q=v(ge.anchor||ge.el),ie=Q&&Q[iS];return ie?v(ie):Q};let ee=!1;const X=(ge,Q,ie)=>{ge==null?Q._vnode&&Z(Q._vnode,null,null,!0):E(Q._vnode||null,ge,Q,null,null,null,ie),Q._vnode=ge,ee||(ee=!0,Dx(),kv(),ee=!1)},De={p:E,um:Z,m:Oe,r:G,mt:R,mc:N,pc:J,pbc:q,n:ve,o:t};let Te,qe;return e&&([Te,qe]=e(De)),{render:X,hydrate:Te,createApp:PO(X,Te)}}function B1({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ud({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function FS(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function k_(t,e,n=!1){const r=t.children,i=e.children;if(ir(r)&&ir(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=od(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&k_(o,a)),a.type===yd&&(a.el=o.el)}}function NO(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function jS(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:jS(e)}function Tv(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const zS=Symbol.for("v-scx"),$S=()=>Cu(zS);function dm(t,e){return Am(t,null,e)}function IO(t,e){return Am(t,null,{flush:"post"})}function VS(t,e){return Am(t,null,{flush:"sync"})}function Di(t,e,n){return Am(t,e,n)}function Am(t,e,n=zi){const{immediate:r,deep:i,flush:s,once:o}=n,a=Ss({},n),l=e&&r||!e&&s!=="post";let c;if(Cp){if(s==="sync"){const m=$S();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=Gu,m.resume=Gu,m.pause=Gu,m}}const d=ua;a.call=(m,x,E)=>Yu(m,d,x,E);let p=!1;s==="post"?a.scheduler=m=>{aa(m,d&&d.suspense)}:s!=="sync"&&(p=!0,a.scheduler=(m,x)=>{x?m():b_(m)}),a.augmentJob=m=>{e&&(m.flags|=4),p&&(m.flags|=2,d&&(m.id=d.uid,m.i=d))};const v=S8(t,e,a);return Cp&&(c?c.push(v):l&&v()),v}function BO(t,e,n){const r=this.proxy,i=Os(t)?t.includes(".")?US(r,t):()=>r[t]:t.bind(r,r);let s;Dr(e)?s=e:(s=e.handler,n=e);const o=bf(this),a=Am(i,s.bind(r),n);return o(),a}function US(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function RO(t,e,n=zi){const r=Xu(),i=Va(e),s=Zl(e),o=HS(t,i),a=KL((l,c)=>{let d,p=zi,v;return VS(()=>{const m=t[i];kl(d,m)&&(d=m,c())}),{get(){return l(),n.get?n.get(d):d},set(m){const x=n.set?n.set(m):m;if(!kl(x,d)&&!(p!==zi&&kl(m,p)))return;const E=r.vnode.props;E&&(e in E||i in E||s in E)&&(`onUpdate:${e}`in E||`onUpdate:${i}`in E||`onUpdate:${s}`in E)||(d=m,c()),r.emit(`update:${e}`,x),kl(m,x)&&kl(m,p)&&!kl(x,v)&&c(),p=m,v=x}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||zi:a,done:!1}:{done:!0}}}},a}const HS=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Va(e)}Modifiers`]||t[`${Zl(e)}Modifiers`];function FO(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||zi;let i=n;const s=e.startsWith("update:"),o=s&&HS(r,e.slice(7));o&&(o.trim&&(i=n.map(d=>Os(d)?d.trim():d)),o.number&&(i=n.map(Sv)));let a,l=r[a=Ng(e)]||r[a=Ng(Va(e))];!l&&s&&(l=r[a=Ng(Zl(e))]),l&&Yu(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Yu(c,t,6,i)}}function WS(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Dr(t)){const l=c=>{const d=WS(c,e,!0);d&&(a=!0,Ss(o,d))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(gs(t)&&r.set(t,null),null):(ir(s)?s.forEach(l=>o[l]=null):Ss(o,s),gs(t)&&r.set(t,o),o)}function Py(t,e){return!t||!Pm(e)?!1:(e=e.slice(2).replace(/Once$/,""),rs(t,e[0].toLowerCase()+e.slice(1))||rs(t,Zl(e))||rs(t,e))}function Z0(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:d,props:p,data:v,setupState:m,ctx:x,inheritAttrs:E}=t,M=um(t);let A,O;try{if(n.shapeFlag&4){const K=i||r,ne=K;A=Kl(c.call(ne,K,d,p,m,v,x)),O=a}else{const K=e;A=Kl(K.length>1?K(p,{attrs:a,slots:o,emit:l}):K(p,null)),O=e.props?a:zO(a)}}catch(K){zg.length=0,Cf(K,t,1),A=pi(na)}let z=A;if(O&&E!==!1){const K=Object.keys(O),{shapeFlag:ne}=z;K.length&&ne&7&&(s&&K.some(o_)&&(O=$O(O,s)),z=eh(z,O,!1,!0))}return n.dirs&&(z=eh(z,null,!1,!0),z.dirs=z.dirs?z.dirs.concat(n.dirs):n.dirs),n.transition&&Nh(z,n.transition),A=z,um(M),A}function jO(t,e=!0){let n;for(let r=0;r<t.length;r++){const i=t[r];if(Ih(i)){if(i.type!==na||i.children==="v-if"){if(n)return;n=i}}else return}return n}const zO=t=>{let e;for(const n in t)(n==="class"||n==="style"||Pm(n))&&((e||(e={}))[n]=t[n]);return e},$O=(t,e)=>{const n={};for(const r in t)(!o_(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function VO(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Hx(r,o,c):!!o;if(l&8){const d=e.dynamicProps;for(let p=0;p<d.length;p++){const v=d[p];if(o[v]!==r[v]&&!Py(c,v))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Hx(r,o,c):!0:!!o;return!1}function Hx(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Py(n,s))return!0}return!1}function My({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Dv=t=>t.__isSuspense;let W2=0;const UO={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,c){if(t==null)WO(e,n,r,i,s,o,a,l,c);else{if(s&&s.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}GO(t,e,n,r,i,o,a,l,c)}},hydrate:qO,normalize:YO},HO=UO;function fm(t,e){const n=t.props&&t.props[e];Dr(n)&&n()}function WO(t,e,n,r,i,s,o,a,l){const{p:c,o:{createElement:d}}=l,p=d("div"),v=t.suspense=GS(t,i,r,e,p,n,s,o,a,l);c(null,v.pendingBranch=t.ssContent,p,null,r,v,s,o),v.deps>0?(fm(t,"onPending"),fm(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,s,o),yp(v,t.ssFallback)):v.resolve(!1,!0)}function GO(t,e,n,r,i,s,o,a,{p:l,um:c,o:{createElement:d}}){const p=e.suspense=t.suspense;p.vnode=e,e.el=t.el;const v=e.ssContent,m=e.ssFallback,{activeBranch:x,pendingBranch:E,isInFallback:M,isHydrating:A}=p;if(E)p.pendingBranch=v,vc(v,E)?(l(E,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():M&&(A||(l(x,m,n,r,i,null,s,o,a),yp(p,m)))):(p.pendingId=W2++,A?(p.isHydrating=!1,p.activeBranch=E):c(E,i,p),p.deps=0,p.effects.length=0,p.hiddenContainer=d("div"),M?(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():(l(x,m,n,r,i,null,s,o,a),yp(p,m))):x&&vc(v,x)?(l(x,v,n,r,i,p,s,o,a),p.resolve(!0)):(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0&&p.resolve()));else if(x&&vc(v,x))l(x,v,n,r,i,p,s,o,a),yp(p,v);else if(fm(e,"onPending"),p.pendingBranch=v,v.shapeFlag&512?p.pendingId=v.component.suspenseId:p.pendingId=W2++,l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0)p.resolve();else{const{timeout:O,pendingId:z}=p;O>0?setTimeout(()=>{p.pendingId===z&&p.fallback(m)},O):O===0&&p.fallback(m)}}function GS(t,e,n,r,i,s,o,a,l,c,d=!1){const{p,m:v,um:m,n:x,o:{parentNode:E,remove:M}}=c;let A;const O=KO(t);O&&e&&e.pendingBranch&&(A=e.pendingId,e.deps++);const z=t.props?Cv(t.props.timeout):void 0,K=s,ne={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:W2++,timeout:typeof z=="number"?z:-1,activeBranch:null,pendingBranch:null,isInFallback:!d,isHydrating:d,isUnmounted:!1,effects:[],resolve(me=!1,pe=!1){const{vnode:N,activeBranch:j,pendingBranch:q,pendingId:I,effects:B,parentComponent:$,container:R}=ne;let U=!1;ne.isHydrating?ne.isHydrating=!1:me||(U=j&&q.transition&&q.transition.mode==="out-in",U&&(j.transition.afterLeave=()=>{I===ne.pendingId&&(v(q,R,s===K?x(j):s,0),am(B))}),j&&(E(j.el)===R&&(s=x(j)),m(j,$,ne,!0)),U||v(q,R,s,0)),yp(ne,q),ne.pendingBranch=null,ne.isInFallback=!1;let V=ne.parent,re=!1;for(;V;){if(V.pendingBranch){V.effects.push(...B),re=!0;break}V=V.parent}!re&&!U&&am(B),ne.effects=[],O&&e&&e.pendingBranch&&A===e.pendingId&&(e.deps--,e.deps===0&&!pe&&e.resolve()),fm(N,"onResolve")},fallback(me){if(!ne.pendingBranch)return;const{vnode:pe,activeBranch:N,parentComponent:j,container:q,namespace:I}=ne;fm(pe,"onFallback");const B=x(N),$=()=>{ne.isInFallback&&(p(null,me,q,B,j,null,I,a,l),yp(ne,me))},R=me.transition&&me.transition.mode==="out-in";R&&(N.transition.afterLeave=$),ne.isInFallback=!0,m(N,j,null,!0),R||$()},move(me,pe,N){ne.activeBranch&&v(ne.activeBranch,me,pe,N),ne.container=me},next(){return ne.activeBranch&&x(ne.activeBranch)},registerDep(me,pe,N){const j=!!ne.pendingBranch;j&&ne.deps++;const q=me.vnode.el;me.asyncDep.catch(I=>{Cf(I,me,0)}).then(I=>{if(me.isUnmounted||ne.isUnmounted||ne.pendingId!==me.suspenseId)return;me.asyncResolved=!0;const{vnode:B}=me;K2(me,I,!1),q&&(B.el=q);const $=!q&&me.subTree.el;pe(me,B,E(q||me.subTree.el),q?null:x(me.subTree),ne,o,N),$&&M($),My(me,B.el),j&&--ne.deps===0&&ne.resolve()})},unmount(me,pe){ne.isUnmounted=!0,ne.activeBranch&&m(ne.activeBranch,n,me,pe),ne.pendingBranch&&m(ne.pendingBranch,n,me,pe)}};return ne}function qO(t,e,n,r,i,s,o,a,l){const c=e.suspense=GS(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),d=l(t,c.pendingBranch=e.ssContent,n,c,s,o);return c.deps===0&&c.resolve(!1,!0),d}function YO(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=Wx(r?n.default:n),t.ssFallback=r?Wx(n.fallback):pi(na)}function Wx(t){let e;if(Dr(t)){const n=yf&&t._c;n&&(t._d=!1,Re()),t=t(),n&&(t._d=!0,e=hl,YS())}return ir(t)&&(t=jO(t)),t=Kl(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function qS(t,e){e&&e.pendingBranch?ir(t)?e.effects.push(...t):e.effects.push(t):am(t)}function yp(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,My(r,i))}function KO(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Cn=Symbol.for("v-fgt"),yd=Symbol.for("v-txt"),na=Symbol.for("v-cmt"),df=Symbol.for("v-stc"),zg=[];let hl=null;function Re(t=!1){zg.push(hl=t?null:[])}function YS(){zg.pop(),hl=zg[zg.length-1]||null}let yf=1;function G2(t,e=!1){yf+=t,t<0&&hl&&e&&(hl.hasOnce=!0)}function KS(t){return t.dynamicChildren=yf>0?hl||fp:null,YS(),yf>0&&hl&&hl.push(t),t}function $e(t,e,n,r,i,s){return KS(C(t,e,n,r,i,s,!0))}function $a(t,e,n,r,i){return KS(pi(t,e,n,r,i,!0))}function Ih(t){return t?t.__v_isVNode===!0:!1}function vc(t,e){return t.type===e.type&&t.key===e.key}function ZO(t){}const ZS=({key:t})=>t??null,X0=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Os(t)||ho(t)||Dr(t)?{i:ca,r:t,k:e,f:!!n}:t:null);function C(t,e=null,n=null,r=0,i=null,s=t===Cn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ZS(e),ref:e&&X0(e),scopeId:Ly,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ca};return a?(A_(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=Os(n)?8:16),yf>0&&!o&&hl&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&hl.push(l),l}const pi=XO;function XO(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===wS)&&(t=na),Ih(t)){const a=eh(t,e,!0);return n&&A_(a,n),yf>0&&!s&&hl&&(a.shapeFlag&6?hl[hl.indexOf(t)]=a:hl.push(a)),a.patchFlag=-2,a}if(iN(t)&&(t=t.__vccOpts),e){e=XS(e);let{class:a,style:l}=e;a&&!Os(a)&&(e.class=$i(a)),gs(l)&&(wy(l)&&!ir(l)&&(l=Ss({},l)),e.style=Ql(l))}const o=Os(t)?1:Dv(t)?128:sS(t)?64:gs(t)?4:Dr(t)?2:0;return C(t,e,n,r,i,o,s,!0)}function XS(t){return t?wy(t)||MS(t)?Ss({},t):t:null}function eh(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,c=e?JS(i||{},e):i,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&ZS(c),ref:e&&e.ref?n&&s?ir(s)?s.concat(X0(e)):[s,X0(e)]:X0(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Cn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&eh(t.ssContent),ssFallback:t.ssFallback&&eh(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Nh(d,l.clone(d)),d}function si(t=" ",e=0){return pi(yd,null,t,e)}function Jl(t,e){const n=pi(df,null,t);return n.staticCount=e,n}function rn(t="",e=!1){return e?(Re(),$a(na,null,t)):pi(na,null,t)}function Kl(t){return t==null||typeof t=="boolean"?pi(na):ir(t)?pi(Cn,null,t.slice()):Ih(t)?od(t):pi(yd,null,String(t))}function od(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:eh(t)}function A_(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ir(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),A_(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!MS(e)?e._ctx=ca:i===3&&ca&&(ca.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Dr(e)?(e={default:e,_ctx:ca},n=32):(e=String(e),r&64?(n=16,e=[si(e)]):n=8);t.children=e,t.shapeFlag|=n}function JS(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=$i([e.class,r.class]));else if(i==="style")e.style=Ql([e.style,r.style]);else if(Pm(i)){const s=e[i],o=r[i];o&&s!==o&&!(ir(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Yl(t,e,n,r=null){Yu(t,e,7,[n,r])}const JO=SS();let QO=0;function QS(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||JO,s={uid:QO++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new c_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:AS(r,i),emitsOptions:WS(r,i),emit:null,emitted:null,propsDefaults:zi,inheritAttrs:r.inheritAttrs,ctx:zi,data:zi,props:zi,attrs:zi,slots:zi,refs:zi,setupState:zi,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=FO.bind(null,s),t.ce&&t.ce(s),s}let ua=null;const Xu=()=>ua||ca;let Ov,q2;{const t=gy(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Ov=e("__VUE_INSTANCE_SETTERS__",n=>ua=n),q2=e("__VUE_SSR_SETTERS__",n=>Cp=n)}const bf=t=>{const e=ua;return Ov(t),t.scope.on(),()=>{t.scope.off(),Ov(e)}},Y2=()=>{ua&&ua.scope.off(),Ov(null)};function eC(t){return t.vnode.shapeFlag&4}let Cp=!1;function tC(t,e=!1,n=!1){e&&q2(e);const{props:r,children:i}=t.vnode,s=eC(t);MO(t,r,s,e),DO(t,i,n);const o=s?eN(t,e):void 0;return e&&q2(!1),o}function eN(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,$2);const{setup:r}=n;if(r){kd();const i=t.setupContext=r.length>1?rC(t):null,s=bf(t),o=Fp(r,t,0,[t.props,i]),a=l_(o);if(Ad(),s(),(a||t.sp)&&!vd(t)&&x_(t),a){if(o.then(Y2,Y2),e)return o.then(l=>{K2(t,l,e)}).catch(l=>{Cf(l,t,0)});t.asyncDep=o}else K2(t,o,e)}else nC(t,e)}function K2(t,e,n){Dr(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:gs(e)&&(t.setupState=y_(e)),nC(t,n)}let Nv,Z2;function tN(t){Nv=t,Z2=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,aO))}}const nN=()=>!Nv;function nC(t,e,n){const r=t.type;if(!t.render){if(!e&&Nv&&!r.render){const i=r.template||P_(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Ss(Ss({isCustomElement:s,delimiters:a},o),l);r.render=Nv(i,c)}}t.render=r.render||Gu,Z2&&Z2(t)}{const i=bf(t);kd();try{wO(t)}finally{Ad(),i()}}}const rN={get(t,e){return ol(t,"get",""),t[e]}};function rC(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,rN),slots:t.slots,emit:t.emit,expose:e}}function Tm(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(y_(xy(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Fg)return Fg[n](t)},has(e,n){return n in e||n in Fg}})):t.proxy}function X2(t,e=!0){return Dr(t)?t.displayName||t.name:t.name||e&&t.__name}function iN(t){return Dr(t)&&"__vccOpts"in t}const Kn=(t,e)=>_8(t,e,Cp);function ky(t,e,n){const r=arguments.length;return r===2?gs(e)&&!ir(e)?Ih(e)?pi(t,null,[e]):pi(t,e):pi(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ih(n)&&(n=[n]),pi(t,e,n))}function sN(){}function oN(t,e,n,r){const i=n[r];if(i&&iC(i,t))return i;const s=e();return s.memo=t.slice(),s.cacheIndex=r,n[r]=s}function iC(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(kl(n[r],e[r]))return!1;return yf>0&&hl&&hl.push(t),!0}const sC="3.5.13",aN=Gu,lN=k8,uN=ip,cN=rS,hN={createComponentInstance:QS,setupComponent:tC,renderComponentRoot:Z0,setCurrentRenderingInstance:um,isVNode:Ih,normalizeVNode:Kl,getComponentPublicInstance:Tm,ensureValidVNode:E_,pushWarningContext:C8,popWarningContext:E8},dN=hN,fN=null,pN=null,gN=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let J2;const Gx=typeof window<"u"&&window.trustedTypes;if(Gx)try{J2=Gx.createPolicy("vue",{createHTML:t=>t})}catch{}const oC=J2?t=>J2.createHTML(t):t=>t,mN="http://www.w3.org/2000/svg",vN="http://www.w3.org/1998/Math/MathML",Lh=typeof document<"u"?document:null,qx=Lh&&Lh.createElement("template"),yN={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Lh.createElementNS(mN,t):e==="mathml"?Lh.createElementNS(vN,t):n?Lh.createElement(t,{is:n}):Lh.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Lh.createTextNode(t),createComment:t=>Lh.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Lh.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{qx.innerHTML=oC(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=qx.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Kh="transition",Jp="animation",Ep=Symbol("_vtc"),aC={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},lC=Ss({},w_,aC),bN=t=>(t.displayName="Transition",t.props=lC,t),Q2=bN((t,{slots:e})=>ky(cS,uC(t),e)),Hd=(t,e=[])=>{ir(t)?t.forEach(n=>n(...e)):t&&t(...e)},Yx=t=>t?ir(t)?t.some(e=>e.length>1):t.length>1:!1;function uC(t){const e={};for(const B in t)B in aC||(e[B]=t[B]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:d=a,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:v=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,x=_N(i),E=x&&x[0],M=x&&x[1],{onBeforeEnter:A,onEnter:O,onEnterCancelled:z,onLeave:K,onLeaveCancelled:ne,onBeforeAppear:me=A,onAppear:pe=O,onAppearCancelled:N=z}=e,j=(B,$,R,U)=>{B._enterCancelled=U,td(B,$?d:a),td(B,$?c:o),R&&R()},q=(B,$)=>{B._isLeaving=!1,td(B,p),td(B,m),td(B,v),$&&$()},I=B=>($,R)=>{const U=B?pe:O,V=()=>j($,B,R);Hd(U,[$,V]),Kx(()=>{td($,B?l:s),Fc($,B?d:a),Yx(U)||Zx($,r,E,V)})};return Ss(e,{onBeforeEnter(B){Hd(A,[B]),Fc(B,s),Fc(B,o)},onBeforeAppear(B){Hd(me,[B]),Fc(B,l),Fc(B,c)},onEnter:I(!1),onAppear:I(!0),onLeave(B,$){B._isLeaving=!0;const R=()=>q(B,$);Fc(B,p),B._enterCancelled?(Fc(B,v),eb()):(eb(),Fc(B,v)),Kx(()=>{B._isLeaving&&(td(B,p),Fc(B,m),Yx(K)||Zx(B,r,M,R))}),Hd(K,[B,R])},onEnterCancelled(B){j(B,!1,void 0,!0),Hd(z,[B])},onAppearCancelled(B){j(B,!0,void 0,!0),Hd(N,[B])},onLeaveCancelled(B){q(B),Hd(ne,[B])}})}function _N(t){if(t==null)return null;if(gs(t))return[R1(t.enter),R1(t.leave)];{const e=R1(t);return[e,e]}}function R1(t){return Cv(t)}function Fc(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Ep]||(t[Ep]=new Set)).add(e)}function td(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Ep];n&&(n.delete(e),n.size||(t[Ep]=void 0))}function Kx(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let wN=0;function Zx(t,e,n,r){const i=t._endId=++wN,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=cC(t,e);if(!o)return r();const c=o+"end";let d=0;const p=()=>{t.removeEventListener(c,v),s()},v=m=>{m.target===t&&++d>=l&&p()};setTimeout(()=>{d<l&&p()},a+1),t.addEventListener(c,v)}function cC(t,e){const n=window.getComputedStyle(t),r=x=>(n[x]||"").split(", "),i=r(`${Kh}Delay`),s=r(`${Kh}Duration`),o=Xx(i,s),a=r(`${Jp}Delay`),l=r(`${Jp}Duration`),c=Xx(a,l);let d=null,p=0,v=0;e===Kh?o>0&&(d=Kh,p=o,v=s.length):e===Jp?c>0&&(d=Jp,p=c,v=l.length):(p=Math.max(o,c),d=p>0?o>c?Kh:Jp:null,v=d?d===Kh?s.length:l.length:0);const m=d===Kh&&/\b(transform|all)(,|$)/.test(r(`${Kh}Property`).toString());return{type:d,timeout:p,propCount:v,hasTransform:m}}function Xx(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Jx(n)+Jx(t[r])))}function Jx(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function eb(){return document.body.offsetHeight}function xN(t,e,n){const r=t[Ep];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Iv=Symbol("_vod"),hC=Symbol("_vsh"),Ay={beforeMount(t,{value:e},{transition:n}){t[Iv]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Qp(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Qp(t,!0),r.enter(t)):r.leave(t,()=>{Qp(t,!1)}):Qp(t,e))},beforeUnmount(t,{value:e}){Qp(t,e)}};function Qp(t,e){t.style.display=e?t[Iv]:"none",t[hC]=!e}function LN(){Ay.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const dC=Symbol("");function SN(t){const e=Xu();if(!e)return;const n=e.ut=(i=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>Bv(s,i))},r=()=>{const i=t(e.proxy);e.ce?Bv(e.ce,i):tb(e.subTree,i),n(i)};L_(()=>{am(r)}),fo(()=>{Di(r,Gu,{flush:"post"});const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),Ku(()=>i.disconnect())})}function tb(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{tb(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)Bv(t.el,e);else if(t.type===Cn)t.children.forEach(n=>tb(n,e));else if(t.type===df){let{el:n,anchor:r}=t;for(;n&&(Bv(n,e),n!==r);)n=n.nextSibling}}function Bv(t,e){if(t.nodeType===1){const n=t.style;let r="";for(const i in e)n.setProperty(`--${i}`,e[i]),r+=`--${i}: ${e[i]};`;n[dC]=r}}const CN=/(^|;)\s*display\s*:/;function EN(t,e,n){const r=t.style,i=Os(n);let s=!1;if(n&&!i){if(e)if(Os(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&J0(r,a,"")}else for(const o in e)n[o]==null&&J0(r,o,"");for(const o in n)o==="display"&&(s=!0),J0(r,o,n[o])}else if(i){if(e!==n){const o=r[dC];o&&(n+=";"+o),r.cssText=n,s=CN.test(n)}}else e&&t.removeAttribute("style");Iv in t&&(t[Iv]=s?r.display:"",t[hC]&&(r.display="none"))}const Qx=/\s*!important$/;function J0(t,e,n){if(ir(n))n.forEach(r=>J0(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=PN(t,e);Qx.test(n)?t.setProperty(Zl(r),n.replace(Qx,""),"important"):t[r]=n}}const e4=["Webkit","Moz","ms"],F1={};function PN(t,e){const n=F1[e];if(n)return n;let r=Va(e);if(r!=="filter"&&r in t)return F1[e]=r;r=Mm(r);for(let i=0;i<e4.length;i++){const s=e4[i]+r;if(s in t)return F1[e]=s}return e}const t4="http://www.w3.org/1999/xlink";function n4(t,e,n,r,i,s=$D(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(t4,e.slice(6,e.length)):t.setAttributeNS(t4,e,n):n==null||s&&!kL(n)?t.removeAttribute(e):t.setAttribute(e,s?"":xc(n)?String(n):n)}function r4(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?oC(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=kL(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function Ph(t,e,n,r){t.addEventListener(e,n,r)}function MN(t,e,n,r){t.removeEventListener(e,n,r)}const i4=Symbol("_vei");function kN(t,e,n,r,i=null){const s=t[i4]||(t[i4]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=AN(e);if(r){const c=s[e]=ON(r,i);Ph(t,a,c,l)}else o&&(MN(t,a,o,l),s[e]=void 0)}}const s4=/(?:Once|Passive|Capture)$/;function AN(t){let e;if(s4.test(t)){e={};let r;for(;r=t.match(s4);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Zl(t.slice(2)),e]}let j1=0;const TN=Promise.resolve(),DN=()=>j1||(TN.then(()=>j1=0),j1=Date.now());function ON(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Yu(NN(r,n.value),e,5,[r])};return n.value=t,n.attached=DN(),n}function NN(t,e){if(ir(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const o4=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,IN=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?xN(t,r,o):e==="style"?EN(t,n,r):Pm(e)?o_(e)||kN(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):BN(t,e,r,o))?(r4(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&n4(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Os(r))?r4(t,Va(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),n4(t,e,r,o))};function BN(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&o4(e)&&Dr(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return o4(e)&&Os(n)?!1:e in t}const a4={};/*! #__NO_SIDE_EFFECTS__ */function fC(t,e,n){const r=Fs(t,e);fy(r)&&Ss(r,e);class i extends Ty{constructor(o){super(r,o,n)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const RN=(t,e)=>fC(t,e,LC),FN=typeof HTMLElement<"u"?HTMLElement:class{};class Ty extends FN{constructor(e,n={},r=Fv){super(),this._def=e,this._props=n,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==Fv?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof Ty){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,la(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=r;let a;if(s&&!ir(s))for(const l in s){const c=s[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=Cv(this._props[l])),(a||(a=Object.create(null)))[Va(l)]=!0)}this._numberProps=a,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(r=>e(this._def=r,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const r in n)rs(this,r)||Object.defineProperty(this,r,{get:()=>er(n[r])})}_resolveProps(e){const{props:n}=e,r=ir(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(Va))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const n=this.hasAttribute(e);let r=n?this.getAttribute(e):a4;const i=Va(e);n&&this._numberProps&&this._numberProps[i]&&(r=Cv(r)),this._setProp(i,r,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,n,r=!0,i=!1){if(n!==this._props[e]&&(n===a4?delete this._props[e]:(this._props[e]=n,e==="key"&&this._app&&(this._app._ceVNode.key=n)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),n===!0?this.setAttribute(Zl(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Zl(e),n+""):n||this.removeAttribute(Zl(e)),s&&s.observe(this,{attributes:!0})}}_update(){xC(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const n=pi(this._def,Ss(e,this._props));return this._instance||(n.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,fy(o[0])?Ss({detail:o},o[0]):{detail:o}))};r.emit=(s,...o)=>{i(s,o),Zl(s)!==s&&i(Zl(s),o)},this._setParent()}),n}_applyStyles(e,n){if(!e)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const r=this._nonce;for(let i=e.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=e[i],this.shadowRoot.prepend(s)}}_parseSlots(){const e=this._slots={};let n;for(;n=this.firstChild;){const r=n.nodeType===1&&n.getAttribute("slot")||"default";(e[r]||(e[r]=[])).push(n),this.removeChild(n)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),n=this._instance.type.__scopeId;for(let r=0;r<e.length;r++){const i=e[r],s=i.getAttribute("name")||"default",o=this._slots[s],a=i.parentNode;if(o)for(const l of o){if(n&&l.nodeType===1){const c=n+"-s",d=document.createTreeWalker(l,1);l.setAttribute(c,"");let p;for(;p=d.nextNode();)p.setAttribute(c,"")}a.insertBefore(l,i)}else for(;i.firstChild;)a.insertBefore(i.firstChild,i);a.removeChild(i)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function pC(t){const e=Xu(),n=e&&e.ce;return n||null}function jN(){const t=pC();return t&&t.shadowRoot}function zN(t="$style"){{const e=Xu();if(!e)return zi;const n=e.type.__cssModules;if(!n)return zi;const r=n[t];return r||zi}}const gC=new WeakMap,mC=new WeakMap,Rv=Symbol("_moveCb"),l4=Symbol("_enterCb"),$N=t=>(delete t.props.mode,t),VN=$N({name:"TransitionGroup",props:Ss({},lC,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Xu(),r=__();let i,s;return Ey(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!qN(i[0].el,n.vnode.el,o))return;i.forEach(HN),i.forEach(WN);const a=i.filter(GN);eb(),a.forEach(l=>{const c=l.el,d=c.style;Fc(c,o),d.transform=d.webkitTransform=d.transitionDuration="";const p=c[Rv]=v=>{v&&v.target!==c||(!v||/transform$/.test(v.propertyName))&&(c.removeEventListener("transitionend",p),c[Rv]=null,td(c,o))};c.addEventListener("transitionend",p)})}),()=>{const o=ji(t),a=uC(o);let l=o.tag||Cn;if(i=[],s)for(let c=0;c<s.length;c++){const d=s[c];d.el&&d.el instanceof Element&&(i.push(d),Nh(d,Sp(d,a,r,n)),gC.set(d,d.el.getBoundingClientRect()))}s=e.default?Sy(e.default()):[];for(let c=0;c<s.length;c++){const d=s[c];d.key!=null&&Nh(d,Sp(d,a,r,n))}return pi(l,null,s)}}}),UN=VN;function HN(t){const e=t.el;e[Rv]&&e[Rv](),e[l4]&&e[l4]()}function WN(t){mC.set(t,t.el.getBoundingClientRect())}function GN(t){const e=gC.get(t),n=mC.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function qN(t,e,n){const r=t.cloneNode(),i=t[Ep];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=cC(r);return s.removeChild(r),o}const Ld=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ir(e)?n=>mp(e,n):e};function YN(t){t.target.composing=!0}function u4(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const qu=Symbol("_assign"),Rr={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[qu]=Ld(i);const s=r||i.props&&i.props.type==="number";Ph(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=Sv(a)),t[qu](a)}),n&&Ph(t,"change",()=>{t.value=t.value.trim()}),e||(Ph(t,"compositionstart",YN),Ph(t,"compositionend",u4),Ph(t,"change",u4))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(t[qu]=Ld(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?Sv(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===l)||(t.value=l))}},El={deep:!0,created(t,e,n){t[qu]=Ld(n),Ph(t,"change",()=>{const r=t._modelValue,i=Pp(t),s=t.checked,o=t[qu];if(ir(r)){const a=my(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(Sf(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(vC(t,s))})},mounted:c4,beforeUpdate(t,e,n){t[qu]=Ld(n),c4(t,e,n)}};function c4(t,{value:e,oldValue:n},r){t._modelValue=e;let i;if(ir(e))i=my(e,r.props.value)>-1;else if(Sf(e))i=e.has(r.props.value);else{if(e===n)return;i=wd(e,vC(t,!0))}t.checked!==i&&(t.checked=i)}const T_={created(t,{value:e},n){t.checked=wd(e,n.props.value),t[qu]=Ld(n),Ph(t,"change",()=>{t[qu](Pp(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[qu]=Ld(r),e!==n&&(t.checked=wd(e,r.props.value))}},is={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=Sf(e);Ph(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Sv(Pp(o)):Pp(o));t[qu](t.multiple?i?new Set(s):s:s[0]),t._assigning=!0,la(()=>{t._assigning=!1})}),t[qu]=Ld(r)},mounted(t,{value:e}){h4(t,e)},beforeUpdate(t,e,n){t[qu]=Ld(n)},updated(t,{value:e}){t._assigning||h4(t,e)}};function h4(t,e){const n=t.multiple,r=ir(e);if(!(n&&!r&&!Sf(e))){for(let i=0,s=t.options.length;i<s;i++){const o=t.options[i],a=Pp(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=my(e,a)>-1}else o.selected=e.has(a);else if(wd(Pp(o),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Pp(t){return"_value"in t?t._value:t.value}function vC(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const D_={created(t,e,n){y0(t,e,n,null,"created")},mounted(t,e,n){y0(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){y0(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){y0(t,e,n,r,"updated")}};function yC(t,e){switch(t){case"SELECT":return is;case"TEXTAREA":return Rr;default:switch(e){case"checkbox":return El;case"radio":return T_;default:return Rr}}}function y0(t,e,n,r,i){const o=yC(t.tagName,n.props&&n.props.type)[i];o&&o(t,e,n,r)}function KN(){Rr.getSSRProps=({value:t})=>({value:t}),T_.getSSRProps=({value:t},e)=>{if(e.props&&wd(e.props.value,t))return{checked:!0}},El.getSSRProps=({value:t},e)=>{if(ir(t)){if(e.props&&my(t,e.props.value)>-1)return{checked:!0}}else if(Sf(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},D_.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=yC(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const ZN=["ctrl","shift","alt","meta"],XN={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>ZN.some(n=>t[`${n}Key`]&&!e.includes(n))},Bh=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=XN[e[o]];if(a&&a(i,e))return}return t(i,...s)})},JN={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},QN=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=Zl(i.key);if(e.some(o=>o===s||JN[o]===s))return t(i)})},bC=Ss({patchProp:IN},yN);let $g,d4=!1;function _C(){return $g||($g=IS(bC))}function wC(){return $g=d4?$g:BS(bC),d4=!0,$g}const xC=(...t)=>{_C().render(...t)},eI=(...t)=>{wC().hydrate(...t)},Fv=(...t)=>{const e=_C().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=CC(r);if(!i)return;const s=e._component;!Dr(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,SC(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e},LC=(...t)=>{const e=wC().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=CC(r);if(i)return n(i,!0,SC(i))},e};function SC(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function CC(t){return Os(t)?document.querySelector(t):t}let f4=!1;const tI=()=>{f4||(f4=!0,KN(),LN())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const nI=()=>{},rI=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:cS,BaseTransitionPropsValidators:w_,Comment:na,DeprecationTypes:gN,EffectScope:c_,ErrorCodes:M8,ErrorTypeStrings:lN,Fragment:Cn,KeepAlive:Q8,ReactiveEffect:im,Static:df,Suspense:HO,Teleport:j2,Text:yd,TrackOpTypes:w8,Transition:Q2,TransitionGroup:UN,TriggerOpTypes:x8,VueElement:Ty,assertNumber:P8,callWithAsyncErrorHandling:Yu,callWithErrorHandling:Fp,camelize:Va,capitalize:Mm,cloneVNode:eh,compatUtils:pN,compile:nI,computed:Kn,createApp:Fv,createBlock:$a,createCommentVNode:rn,createElementBlock:$e,createElementVNode:C,createHydrationRenderer:BS,createPropsRestProxy:bO,createRenderer:IS,createSSRApp:LC,createSlots:iO,createStaticVNode:Jl,createTextVNode:si,createVNode:pi,customRef:KL,defineAsyncComponent:X8,defineComponent:Fs,defineCustomElement:fC,defineEmits:uO,defineExpose:cO,defineModel:fO,defineOptions:hO,defineProps:lO,defineSSRCustomElement:RN,defineSlots:dO,devtools:uN,effect:HD,effectScope:h_,getCurrentInstance:Xu,getCurrentScope:d_,getCurrentWatcher:L8,getTransitionRawChildren:Sy,guardReactiveProps:XS,h:ky,handleError:Cf,hasInjectionContext:CS,hydrate:eI,hydrateOnIdle:W8,hydrateOnInteraction:K8,hydrateOnMediaQuery:Y8,hydrateOnVisible:q8,initCustomFormatter:sN,initDirectivesForSSR:tI,inject:Cu,isMemoSame:iC,isProxy:wy,isReactive:Zc,isReadonly:xd,isRef:ho,isRuntimeOnly:nN,isShallow:Su,isVNode:Ih,markRaw:xy,mergeDefaults:vO,mergeModels:yO,mergeProps:JS,nextTick:la,normalizeClass:$i,normalizeProps:jD,normalizeStyle:Ql,onActivated:dS,onBeforeMount:gS,onBeforeUnmount:Td,onBeforeUpdate:L_,onDeactivated:fS,onErrorCaptured:bS,onMounted:fo,onRenderTracked:yS,onRenderTriggered:vS,onScopeDispose:DL,onServerPrefetch:mS,onUnmounted:Ku,onUpdated:Ey,onWatcherCleanup:JL,openBlock:Re,popScopeId:O8,provide:jg,proxyRefs:y_,pushScopeId:D8,queuePostFlushCb:am,reactive:nu,readonly:pc,ref:xt,registerRuntimeCompiler:tN,render:xC,renderList:pr,renderSlot:sO,resolveComponent:_S,resolveDirective:rO,resolveDynamicComponent:nO,resolveFilter:fN,resolveTransitionHooks:Sp,setBlockTracking:G2,setDevtoolsHook:cN,setTransitionHooks:Nh,shallowReactive:m_,shallowReadonly:c8,shallowRef:v_,ssrContextKey:zS,ssrUtils:dN,stop:WD,toDisplayString:Tt,toHandlerKey:Ng,toHandlers:oO,toRaw:ji,toRef:y8,toRefs:ZL,toValue:f8,transformVNodeArgs:ZO,triggerRef:d8,unref:er,useAttrs:mO,useCssModule:zN,useCssVars:SN,useHost:pC,useId:R8,useModel:RO,useSSRContext:$S,useShadowRoot:jN,useSlots:gO,useTemplateRef:F8,useTransitionState:__,vModelCheckbox:El,vModelDynamic:D_,vModelRadio:T_,vModelSelect:is,vModelText:Rr,vShow:Ay,version:sC,warn:aN,watch:Di,watchEffect:dm,watchPostEffect:IO,watchSyncEffect:VS,withAsyncContext:_O,withCtx:Wu,withDefaults:pO,withDirectives:Pn,withKeys:QN,withMemo:oN,withModifiers:Bh,withScopeId:N8},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let EC;const Dy=t=>EC=t,PC=Symbol();function nb(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Vg;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Vg||(Vg={}));function iI(){const t=h_(!0),e=t.run(()=>xt({}));let n=[],r=[];const i=xy({install(s){Dy(i),i._a=s,s.provide(PC,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const MC=()=>{};function p4(t,e,n,r=MC){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&d_()&&DL(i),i}function Yf(t,...e){t.slice().forEach(n=>{n(...e)})}const sI=t=>t(),g4=Symbol(),z1=Symbol();function rb(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];nb(i)&&nb(r)&&t.hasOwnProperty(n)&&!ho(r)&&!Zc(r)?t[n]=rb(i,r):t[n]=r}return t}const oI=Symbol();function aI(t){return!nb(t)||!t.hasOwnProperty(oI)}const{assign:nd}=Object;function lI(t){return!!(ho(t)&&t.effect)}function uI(t,e,n,r){const{state:i,actions:s,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=i?i():{});const d=ZL(n.state.value[t]);return nd(d,s,Object.keys(o||{}).reduce((p,v)=>(p[v]=xy(Kn(()=>{Dy(n);const m=n._s.get(t);return o[v].call(m,m)})),p),{}))}return l=kC(t,c,e,n,r,!0),l}function kC(t,e,n={},r,i,s){let o;const a=nd({actions:{}},n),l={deep:!0};let c,d,p=[],v=[],m;const x=r.state.value[t];!s&&!x&&(r.state.value[t]={}),xt({});let E;function M(N){let j;c=d=!1,typeof N=="function"?(N(r.state.value[t]),j={type:Vg.patchFunction,storeId:t,events:m}):(rb(r.state.value[t],N),j={type:Vg.patchObject,payload:N,storeId:t,events:m});const q=E=Symbol();la().then(()=>{E===q&&(c=!0)}),d=!0,Yf(p,j,r.state.value[t])}const A=s?function(){const{state:j}=n,q=j?j():{};this.$patch(I=>{nd(I,q)})}:MC;function O(){o.stop(),p=[],v=[],r._s.delete(t)}const z=(N,j="")=>{if(g4 in N)return N[z1]=j,N;const q=function(){Dy(r);const I=Array.from(arguments),B=[],$=[];function R(re){B.push(re)}function U(re){$.push(re)}Yf(v,{args:I,name:q[z1],store:ne,after:R,onError:U});let V;try{V=N.apply(this&&this.$id===t?this:ne,I)}catch(re){throw Yf($,re),re}return V instanceof Promise?V.then(re=>(Yf(B,re),re)).catch(re=>(Yf($,re),Promise.reject(re))):(Yf(B,V),V)};return q[g4]=!0,q[z1]=j,q},K={_p:r,$id:t,$onAction:p4.bind(null,v),$patch:M,$reset:A,$subscribe(N,j={}){const q=p4(p,N,j.detached,()=>I()),I=o.run(()=>Di(()=>r.state.value[t],B=>{(j.flush==="sync"?d:c)&&N({storeId:t,type:Vg.direct,events:m},B)},nd({},l,j)));return q},$dispose:O},ne=nu(K);r._s.set(t,ne);const pe=(r._a&&r._a.runWithContext||sI)(()=>r._e.run(()=>(o=h_()).run(()=>e({action:z}))));for(const N in pe){const j=pe[N];if(ho(j)&&!lI(j)||Zc(j))s||(x&&aI(j)&&(ho(j)?j.value=x[N]:rb(j,x[N])),r.state.value[t][N]=j);else if(typeof j=="function"){const q=z(j,N);pe[N]=q,a.actions[N]=j}}return nd(ne,pe),nd(ji(ne),pe),Object.defineProperty(ne,"$state",{get:()=>r.state.value[t],set:N=>{M(j=>{nd(j,N)})}}),r._p.forEach(N=>{nd(ne,o.run(()=>N({store:ne,app:r._a,pinia:r,options:a})))}),x&&s&&n.hydrate&&n.hydrate(ne.$state,x),c=!0,d=!0,ne}/*! #__NO_SIDE_EFFECTS__ */function jp(t,e,n){let r,i;const s=typeof e=="function";typeof t=="string"?(r=t,i=s?n:e):(i=t,r=t.id);function o(a,l){const c=CS();return a=a||(c?Cu(PC,null):null),a&&Dy(a),a=EC,a._s.has(r)||(s?kC(r,e,i,a):uI(r,i,a)),a._s.get(r)}return o.$id=r,o}function AC(t,e){return function(){return t.apply(e,arguments)}}const{toString:cI}=Object.prototype,{getPrototypeOf:O_}=Object,Oy=(t=>e=>{const n=cI.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Cc=t=>(t=t.toLowerCase(),e=>Oy(e)===t),Ny=t=>e=>typeof e===t,{isArray:zp}=Array,pm=Ny("undefined");function hI(t){return t!==null&&!pm(t)&&t.constructor!==null&&!pm(t.constructor)&&Eu(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const TC=Cc("ArrayBuffer");function dI(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&TC(t.buffer),e}const fI=Ny("string"),Eu=Ny("function"),DC=Ny("number"),Iy=t=>t!==null&&typeof t=="object",pI=t=>t===!0||t===!1,Q0=t=>{if(Oy(t)!=="object")return!1;const e=O_(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},gI=Cc("Date"),mI=Cc("File"),vI=Cc("Blob"),yI=Cc("FileList"),bI=t=>Iy(t)&&Eu(t.pipe),_I=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Eu(t.append)&&((e=Oy(t))==="formdata"||e==="object"&&Eu(t.toString)&&t.toString()==="[object FormData]"))},wI=Cc("URLSearchParams"),[xI,LI,SI,CI]=["ReadableStream","Request","Response","Headers"].map(Cc),EI=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Dm(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),zp(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function OC(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const af=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,NC=t=>!pm(t)&&t!==af;function ib(){const{caseless:t}=NC(this)&&this||{},e={},n=(r,i)=>{const s=t&&OC(e,i)||i;Q0(e[s])&&Q0(r)?e[s]=ib(e[s],r):Q0(r)?e[s]=ib({},r):zp(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Dm(arguments[r],n);return e}const PI=(t,e,n,{allOwnKeys:r}={})=>(Dm(e,(i,s)=>{n&&Eu(i)?t[s]=AC(i,n):t[s]=i},{allOwnKeys:r}),t),MI=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),kI=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},AI=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&O_(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},TI=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},DI=t=>{if(!t)return null;if(zp(t))return t;let e=t.length;if(!DC(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},OI=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&O_(Uint8Array)),NI=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},II=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},BI=Cc("HTMLFormElement"),RI=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),m4=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),FI=Cc("RegExp"),IC=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Dm(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},jI=t=>{IC(t,(e,n)=>{if(Eu(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Eu(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},zI=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return zp(t)?r(t):r(String(t).split(e)),n},$I=()=>{},VI=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function UI(t){return!!(t&&Eu(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const HI=t=>{const e=new Array(10),n=(r,i)=>{if(Iy(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=zp(r)?[]:{};return Dm(r,(o,a)=>{const l=n(o,i+1);!pm(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},WI=Cc("AsyncFunction"),GI=t=>t&&(Iy(t)||Eu(t))&&Eu(t.then)&&Eu(t.catch),BC=((t,e)=>t?setImmediate:e?((n,r)=>(af.addEventListener("message",({source:i,data:s})=>{i===af&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),af.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Eu(af.postMessage)),qI=typeof queueMicrotask<"u"?queueMicrotask.bind(af):typeof process<"u"&&process.nextTick||BC,Xt={isArray:zp,isArrayBuffer:TC,isBuffer:hI,isFormData:_I,isArrayBufferView:dI,isString:fI,isNumber:DC,isBoolean:pI,isObject:Iy,isPlainObject:Q0,isReadableStream:xI,isRequest:LI,isResponse:SI,isHeaders:CI,isUndefined:pm,isDate:gI,isFile:mI,isBlob:vI,isRegExp:FI,isFunction:Eu,isStream:bI,isURLSearchParams:wI,isTypedArray:OI,isFileList:yI,forEach:Dm,merge:ib,extend:PI,trim:EI,stripBOM:MI,inherits:kI,toFlatObject:AI,kindOf:Oy,kindOfTest:Cc,endsWith:TI,toArray:DI,forEachEntry:NI,matchAll:II,isHTMLForm:BI,hasOwnProperty:m4,hasOwnProp:m4,reduceDescriptors:IC,freezeMethods:jI,toObjectSet:zI,toCamelCase:RI,noop:$I,toFiniteNumber:VI,findKey:OC,global:af,isContextDefined:NC,isSpecCompliantForm:UI,toJSONObject:HI,isAsyncFn:WI,isThenable:GI,setImmediate:BC,asap:qI};function ii(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Xt.inherits(ii,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Xt.toJSONObject(this.config),code:this.code,status:this.status}}});const RC=ii.prototype,FC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{FC[t]={value:t}});Object.defineProperties(ii,FC);Object.defineProperty(RC,"isAxiosError",{value:!0});ii.from=(t,e,n,r,i,s)=>{const o=Object.create(RC);return Xt.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),ii.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const YI=null;function sb(t){return Xt.isPlainObject(t)||Xt.isArray(t)}function jC(t){return Xt.endsWith(t,"[]")?t.slice(0,-2):t}function v4(t,e,n){return t?t.concat(e).map(function(i,s){return i=jC(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function KI(t){return Xt.isArray(t)&&!t.some(sb)}const ZI=Xt.toFlatObject(Xt,{},null,function(e){return/^is[A-Z]/.test(e)});function By(t,e,n){if(!Xt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Xt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,M){return!Xt.isUndefined(M[E])});const r=n.metaTokens,i=n.visitor||d,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Xt.isSpecCompliantForm(e);if(!Xt.isFunction(i))throw new TypeError("visitor must be a function");function c(x){if(x===null)return"";if(Xt.isDate(x))return x.toISOString();if(!l&&Xt.isBlob(x))throw new ii("Blob is not supported. Use a Buffer instead.");return Xt.isArrayBuffer(x)||Xt.isTypedArray(x)?l&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function d(x,E,M){let A=x;if(x&&!M&&typeof x=="object"){if(Xt.endsWith(E,"{}"))E=r?E:E.slice(0,-2),x=JSON.stringify(x);else if(Xt.isArray(x)&&KI(x)||(Xt.isFileList(x)||Xt.endsWith(E,"[]"))&&(A=Xt.toArray(x)))return E=jC(E),A.forEach(function(z,K){!(Xt.isUndefined(z)||z===null)&&e.append(o===!0?v4([E],K,s):o===null?E:E+"[]",c(z))}),!1}return sb(x)?!0:(e.append(v4(M,E,s),c(x)),!1)}const p=[],v=Object.assign(ZI,{defaultVisitor:d,convertValue:c,isVisitable:sb});function m(x,E){if(!Xt.isUndefined(x)){if(p.indexOf(x)!==-1)throw Error("Circular reference detected in "+E.join("."));p.push(x),Xt.forEach(x,function(A,O){(!(Xt.isUndefined(A)||A===null)&&i.call(e,A,Xt.isString(O)?O.trim():O,E,v))===!0&&m(A,E?E.concat(O):[O])}),p.pop()}}if(!Xt.isObject(t))throw new TypeError("data must be an object");return m(t),e}function y4(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function N_(t,e){this._pairs=[],t&&By(t,this,e)}const zC=N_.prototype;zC.append=function(e,n){this._pairs.push([e,n])};zC.toString=function(e){const n=e?function(r){return e.call(this,r,y4)}:y4;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function XI(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function $C(t,e,n){if(!e)return t;const r=n&&n.encode||XI;Xt.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Xt.isURLSearchParams(e)?e.toString():new N_(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class b4{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Xt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const VC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},JI=typeof URLSearchParams<"u"?URLSearchParams:N_,QI=typeof FormData<"u"?FormData:null,e7=typeof Blob<"u"?Blob:null,t7={isBrowser:!0,classes:{URLSearchParams:JI,FormData:QI,Blob:e7},protocols:["http","https","file","blob","url","data"]},I_=typeof window<"u"&&typeof document<"u",ob=typeof navigator=="object"&&navigator||void 0,n7=I_&&(!ob||["ReactNative","NativeScript","NS"].indexOf(ob.product)<0),r7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",i7=I_&&window.location.href||"http://localhost",s7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:I_,hasStandardBrowserEnv:n7,hasStandardBrowserWebWorkerEnv:r7,navigator:ob,origin:i7},Symbol.toStringTag,{value:"Module"})),ll={...s7,...t7};function o7(t,e){return By(t,new ll.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return ll.isNode&&Xt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function a7(t){return Xt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function l7(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function UC(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&Xt.isArray(i)?i.length:o,l?(Xt.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Xt.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Xt.isArray(i[o])&&(i[o]=l7(i[o])),!a)}if(Xt.isFormData(t)&&Xt.isFunction(t.entries)){const n={};return Xt.forEachEntry(t,(r,i)=>{e(a7(r),i,n,0)}),n}return null}function u7(t,e,n){if(Xt.isString(t))try{return(e||JSON.parse)(t),Xt.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Om={transitional:VC,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Xt.isObject(e);if(s&&Xt.isHTMLForm(e)&&(e=new FormData(e)),Xt.isFormData(e))return i?JSON.stringify(UC(e)):e;if(Xt.isArrayBuffer(e)||Xt.isBuffer(e)||Xt.isStream(e)||Xt.isFile(e)||Xt.isBlob(e)||Xt.isReadableStream(e))return e;if(Xt.isArrayBufferView(e))return e.buffer;if(Xt.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return o7(e,this.formSerializer).toString();if((a=Xt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return By(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),u7(e)):e}],transformResponse:[function(e){const n=this.transitional||Om.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Xt.isResponse(e)||Xt.isReadableStream(e))return e;if(e&&Xt.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?ii.from(a,ii.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ll.classes.FormData,Blob:ll.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Xt.forEach(["delete","get","head","post","put","patch"],t=>{Om.headers[t]={}});const c7=Xt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),h7=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&c7[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},_4=Symbol("internals");function eg(t){return t&&String(t).trim().toLowerCase()}function ev(t){return t===!1||t==null?t:Xt.isArray(t)?t.map(ev):String(t)}function d7(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const f7=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function $1(t,e,n,r,i){if(Xt.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Xt.isString(e)){if(Xt.isString(r))return e.indexOf(r)!==-1;if(Xt.isRegExp(r))return r.test(e)}}function p7(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function g7(t,e){const n=Xt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let eu=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const d=eg(l);if(!d)throw new Error("header name must be a non-empty string");const p=Xt.findKey(i,d);(!p||i[p]===void 0||c===!0||c===void 0&&i[p]!==!1)&&(i[p||l]=ev(a))}const o=(a,l)=>Xt.forEach(a,(c,d)=>s(c,d,l));if(Xt.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Xt.isString(e)&&(e=e.trim())&&!f7(e))o(h7(e),n);else if(Xt.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=eg(e),e){const r=Xt.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return d7(i);if(Xt.isFunction(n))return n.call(this,i,r);if(Xt.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=eg(e),e){const r=Xt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||$1(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=eg(o),o){const a=Xt.findKey(r,o);a&&(!n||$1(r,r[a],a,n))&&(delete r[a],i=!0)}}return Xt.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||$1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Xt.forEach(this,(i,s)=>{const o=Xt.findKey(r,s);if(o){n[o]=ev(i),delete n[s];return}const a=e?p7(s):String(s).trim();a!==s&&delete n[s],n[a]=ev(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Xt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Xt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[_4]=this[_4]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=eg(o);r[a]||(g7(i,o),r[a]=!0)}return Xt.isArray(e)?e.forEach(s):s(e),this}};eu.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Xt.reduceDescriptors(eu.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Xt.freezeMethods(eu);function V1(t,e){const n=this||Om,r=e||n,i=eu.from(r.headers);let s=r.data;return Xt.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function HC(t){return!!(t&&t.__CANCEL__)}function $p(t,e,n){ii.call(this,t??"canceled",ii.ERR_CANCELED,e,n),this.name="CanceledError"}Xt.inherits($p,ii,{__CANCEL__:!0});function WC(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new ii("Request failed with status code "+n.status,[ii.ERR_BAD_REQUEST,ii.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function m7(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function v7(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[s];o||(o=c),n[i]=l,r[i]=c;let p=s,v=0;for(;p!==i;)v+=n[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const m=d&&c-d;return m?Math.round(v*1e3/m):void 0}}function y7(t,e){let n=0,r=1e3/e,i,s;const o=(c,d=Date.now())=>{n=d,i=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const d=Date.now(),p=d-n;p>=r?o(c,d):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-p)))},()=>i&&o(i)]}const jv=(t,e,n=3)=>{let r=0;const i=v7(50,250);return y7(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),d=o<=a;r=o;const p={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&d?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(p)},n)},w4=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},x4=t=>(...e)=>Xt.asap(()=>t(...e)),b7=ll.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,ll.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(ll.origin),ll.navigator&&/(msie|trident)/i.test(ll.navigator.userAgent)):()=>!0,_7=ll.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Xt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Xt.isString(r)&&o.push("path="+r),Xt.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function w7(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function x7(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function GC(t,e,n){let r=!w7(e);return t&&(r||n==!1)?x7(t,e):e}const L4=t=>t instanceof eu?{...t}:t;function _f(t,e){e=e||{};const n={};function r(c,d,p,v){return Xt.isPlainObject(c)&&Xt.isPlainObject(d)?Xt.merge.call({caseless:v},c,d):Xt.isPlainObject(d)?Xt.merge({},d):Xt.isArray(d)?d.slice():d}function i(c,d,p,v){if(Xt.isUndefined(d)){if(!Xt.isUndefined(c))return r(void 0,c,p,v)}else return r(c,d,p,v)}function s(c,d){if(!Xt.isUndefined(d))return r(void 0,d)}function o(c,d){if(Xt.isUndefined(d)){if(!Xt.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,p){if(p in e)return r(c,d);if(p in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d,p)=>i(L4(c),L4(d),p,!0)};return Xt.forEach(Object.keys(Object.assign({},t,e)),function(d){const p=l[d]||i,v=p(t[d],e[d],d);Xt.isUndefined(v)&&p!==a||(n[d]=v)}),n}const qC=t=>{const e=_f({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=eu.from(o),e.url=$C(GC(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Xt.isFormData(n)){if(ll.hasStandardBrowserEnv||ll.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...d]=l?l.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...d].join("; "))}}if(ll.hasStandardBrowserEnv&&(r&&Xt.isFunction(r)&&(r=r(e)),r||r!==!1&&b7(e.url))){const c=i&&s&&_7.read(s);c&&o.set(i,c)}return e},L7=typeof XMLHttpRequest<"u",S7=L7&&function(t){return new Promise(function(n,r){const i=qC(t);let s=i.data;const o=eu.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,d,p,v,m,x;function E(){m&&m(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let M=new XMLHttpRequest;M.open(i.method.toUpperCase(),i.url,!0),M.timeout=i.timeout;function A(){if(!M)return;const z=eu.from("getAllResponseHeaders"in M&&M.getAllResponseHeaders()),ne={data:!a||a==="text"||a==="json"?M.responseText:M.response,status:M.status,statusText:M.statusText,headers:z,config:t,request:M};WC(function(pe){n(pe),E()},function(pe){r(pe),E()},ne),M=null}"onloadend"in M?M.onloadend=A:M.onreadystatechange=function(){!M||M.readyState!==4||M.status===0&&!(M.responseURL&&M.responseURL.indexOf("file:")===0)||setTimeout(A)},M.onabort=function(){M&&(r(new ii("Request aborted",ii.ECONNABORTED,t,M)),M=null)},M.onerror=function(){r(new ii("Network Error",ii.ERR_NETWORK,t,M)),M=null},M.ontimeout=function(){let K=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const ne=i.transitional||VC;i.timeoutErrorMessage&&(K=i.timeoutErrorMessage),r(new ii(K,ne.clarifyTimeoutError?ii.ETIMEDOUT:ii.ECONNABORTED,t,M)),M=null},s===void 0&&o.setContentType(null),"setRequestHeader"in M&&Xt.forEach(o.toJSON(),function(K,ne){M.setRequestHeader(ne,K)}),Xt.isUndefined(i.withCredentials)||(M.withCredentials=!!i.withCredentials),a&&a!=="json"&&(M.responseType=i.responseType),c&&([v,x]=jv(c,!0),M.addEventListener("progress",v)),l&&M.upload&&([p,m]=jv(l),M.upload.addEventListener("progress",p),M.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(d=z=>{M&&(r(!z||z.type?new $p(null,t,M):z),M.abort(),M=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const O=m7(i.url);if(O&&ll.protocols.indexOf(O)===-1){r(new ii("Unsupported protocol "+O+":",ii.ERR_BAD_REQUEST,t));return}M.send(s||null)})},C7=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const d=c instanceof Error?c:this.reason;r.abort(d instanceof ii?d:new $p(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new ii(`timeout ${e} of ms exceeded`,ii.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>Xt.asap(a),l}},E7=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},P7=async function*(t,e){for await(const n of M7(t))yield*E7(n,e)},M7=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},S4=(t,e,n,r)=>{const i=P7(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await i.next();if(c){a(),l.close();return}let p=d.byteLength;if(n){let v=s+=p;n(v)}l.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},Ry=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",YC=Ry&&typeof ReadableStream=="function",k7=Ry&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),KC=(t,...e)=>{try{return!!t(...e)}catch{return!1}},A7=YC&&KC(()=>{let t=!1;const e=new Request(ll.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),C4=64*1024,ab=YC&&KC(()=>Xt.isReadableStream(new Response("").body)),zv={stream:ab&&(t=>t.body)};Ry&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!zv[e]&&(zv[e]=Xt.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new ii(`Response type '${e}' is not supported`,ii.ERR_NOT_SUPPORT,r)})})})(new Response);const T7=async t=>{if(t==null)return 0;if(Xt.isBlob(t))return t.size;if(Xt.isSpecCompliantForm(t))return(await new Request(ll.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Xt.isArrayBufferView(t)||Xt.isArrayBuffer(t))return t.byteLength;if(Xt.isURLSearchParams(t)&&(t=t+""),Xt.isString(t))return(await k7(t)).byteLength},D7=async(t,e)=>{const n=Xt.toFiniteNumber(t.getContentLength());return n??T7(e)},O7=Ry&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:d,withCredentials:p="same-origin",fetchOptions:v}=qC(t);c=c?(c+"").toLowerCase():"text";let m=C7([i,s&&s.toAbortSignal()],o),x;const E=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let M;try{if(l&&A7&&n!=="get"&&n!=="head"&&(M=await D7(d,r))!==0){let ne=new Request(e,{method:"POST",body:r,duplex:"half"}),me;if(Xt.isFormData(r)&&(me=ne.headers.get("content-type"))&&d.setContentType(me),ne.body){const[pe,N]=w4(M,jv(x4(l)));r=S4(ne.body,C4,pe,N)}}Xt.isString(p)||(p=p?"include":"omit");const A="credentials"in Request.prototype;x=new Request(e,{...v,signal:m,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:A?p:void 0});let O=await fetch(x);const z=ab&&(c==="stream"||c==="response");if(ab&&(a||z&&E)){const ne={};["status","statusText","headers"].forEach(j=>{ne[j]=O[j]});const me=Xt.toFiniteNumber(O.headers.get("content-length")),[pe,N]=a&&w4(me,jv(x4(a),!0))||[];O=new Response(S4(O.body,C4,pe,()=>{N&&N(),E&&E()}),ne)}c=c||"text";let K=await zv[Xt.findKey(zv,c)||"text"](O,t);return!z&&E&&E(),await new Promise((ne,me)=>{WC(ne,me,{data:K,headers:eu.from(O.headers),status:O.status,statusText:O.statusText,config:t,request:x})})}catch(A){throw E&&E(),A&&A.name==="TypeError"&&/fetch/i.test(A.message)?Object.assign(new ii("Network Error",ii.ERR_NETWORK,t,x),{cause:A.cause||A}):ii.from(A,A&&A.code,t,x)}}),lb={http:YI,xhr:S7,fetch:O7};Xt.forEach(lb,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const E4=t=>`- ${t}`,N7=t=>Xt.isFunction(t)||t===null||t===!1,ZC={getAdapter:t=>{t=Xt.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!N7(n)&&(r=lb[(o=String(n)).toLowerCase()],r===void 0))throw new ii(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(E4).join(`
`):" "+E4(s[0]):"as no adapter specified";throw new ii("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:lb};function U1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new $p(null,t)}function P4(t){return U1(t),t.headers=eu.from(t.headers),t.data=V1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ZC.getAdapter(t.adapter||Om.adapter)(t).then(function(r){return U1(t),r.data=V1.call(t,t.transformResponse,r),r.headers=eu.from(r.headers),r},function(r){return HC(r)||(U1(t),r&&r.response&&(r.response.data=V1.call(t,t.transformResponse,r.response),r.response.headers=eu.from(r.response.headers))),Promise.reject(r)})}const XC="1.8.4",Fy={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Fy[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const M4={};Fy.transitional=function(e,n,r){function i(s,o){return"[Axios v"+XC+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new ii(i(o," has been removed"+(n?" in "+n:"")),ii.ERR_DEPRECATED);return n&&!M4[o]&&(M4[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};Fy.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function I7(t,e,n){if(typeof t!="object")throw new ii("options must be an object",ii.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new ii("option "+s+" must be "+l,ii.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ii("Unknown option "+s,ii.ERR_BAD_OPTION)}}const tv={assertOptions:I7,validators:Fy},Bc=tv.validators;let ff=class{constructor(e){this.defaults=e,this.interceptors={request:new b4,response:new b4}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=_f(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&tv.assertOptions(r,{silentJSONParsing:Bc.transitional(Bc.boolean),forcedJSONParsing:Bc.transitional(Bc.boolean),clarifyTimeoutError:Bc.transitional(Bc.boolean)},!1),i!=null&&(Xt.isFunction(i)?n.paramsSerializer={serialize:i}:tv.assertOptions(i,{encode:Bc.function,serialize:Bc.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),tv.assertOptions(n,{baseUrl:Bc.spelling("baseURL"),withXsrfToken:Bc.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Xt.merge(s.common,s[n.method]);s&&Xt.forEach(["delete","get","head","post","put","patch","common"],x=>{delete s[x]}),n.headers=eu.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(l=l&&E.synchronous,a.unshift(E.fulfilled,E.rejected))});const c=[];this.interceptors.response.forEach(function(E){c.push(E.fulfilled,E.rejected)});let d,p=0,v;if(!l){const x=[P4.bind(this),void 0];for(x.unshift.apply(x,a),x.push.apply(x,c),v=x.length,d=Promise.resolve(n);p<v;)d=d.then(x[p++],x[p++]);return d}v=a.length;let m=n;for(p=0;p<v;){const x=a[p++],E=a[p++];try{m=x(m)}catch(M){E.call(this,M);break}}try{d=P4.call(this,m)}catch(x){return Promise.reject(x)}for(p=0,v=c.length;p<v;)d=d.then(c[p++],c[p++]);return d}getUri(e){e=_f(this.defaults,e);const n=GC(e.baseURL,e.url,e.allowAbsoluteUrls);return $C(n,e.params,e.paramsSerializer)}};Xt.forEach(["delete","get","head","options"],function(e){ff.prototype[e]=function(n,r){return this.request(_f(r||{},{method:e,url:n,data:(r||{}).data}))}});Xt.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(_f(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ff.prototype[e]=n(),ff.prototype[e+"Form"]=n(!0)});let B7=class JC{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new $p(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new JC(function(i){e=i}),cancel:e}}};function R7(t){return function(n){return t.apply(null,n)}}function F7(t){return Xt.isObject(t)&&t.isAxiosError===!0}const ub={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ub).forEach(([t,e])=>{ub[e]=t});function QC(t){const e=new ff(t),n=AC(ff.prototype.request,e);return Xt.extend(n,ff.prototype,e,{allOwnKeys:!0}),Xt.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return QC(_f(t,i))},n}const Yo=QC(Om);Yo.Axios=ff;Yo.CanceledError=$p;Yo.CancelToken=B7;Yo.isCancel=HC;Yo.VERSION=XC;Yo.toFormData=By;Yo.AxiosError=ii;Yo.Cancel=Yo.CanceledError;Yo.all=function(e){return Promise.all(e)};Yo.spread=R7;Yo.isAxiosError=F7;Yo.mergeConfig=_f;Yo.AxiosHeaders=eu;Yo.formToJSON=t=>UC(Xt.isHTMLForm(t)?new FormData(t):t);Yo.getAdapter=ZC.getAdapter;Yo.HttpStatusCode=ub;Yo.default=Yo;const{Axios:xoe,AxiosError:Loe,CanceledError:Soe,isCancel:Coe,CancelToken:Eoe,VERSION:Poe,all:Moe,Cancel:koe,isAxiosError:Aoe,spread:Toe,toFormData:Doe,AxiosHeaders:Ooe,HttpStatusCode:Noe,formToJSON:Ioe,getAdapter:Boe,mergeConfig:Roe}=Yo,yn=nu({measures:[],longTasks:[],memorySnapshots:[],framesPerSecond:0,lastFpsUpdate:0,frameCount:0,isRecording:!1,isEnabled:!1,startTime:0,currentOperation:null,operationStack:[],operationHistory:[]});let bd=null,lf=null;const j7=1e3;function jy(){if(yn.isEnabled){yn.isRecording=!0,yn.startTime=performance.now(),yn.frameCount=0,yn.lastFpsUpdate=performance.now();try{window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&(bd=new PerformanceObserver(t=>{t.getEntries().forEach(n=>{yn.longTasks.push({duration:n.duration,startTime:n.startTime,name:n.name,component:Lc()})})}),bd.observe({entryTypes:["longtask"]}))}catch(t){console.warn("PerformanceObserver pour longues tches non support",t)}z7(),B_()}}function $v(){yn.isRecording=!1,bd&&(bd.disconnect(),bd=null),rE()}function cb(){bd&&(bd.disconnect(),bd=null),rE(),yn.measures=[],yn.longTasks=[],yn.memorySnapshots=[],yn.operationHistory=[],yn.frameCount=0,yn.framesPerSecond=0,yn.lastFpsUpdate=0,yn.isEnabled&&jy()}function eE(t,e,n){if(!yn.isEnabled||!yn.isRecording)return()=>{};const r=performance.now(),i=yn.currentOperation;return yn.currentOperation=t,yn.operationStack.push(t),()=>{const s=performance.now()-r;yn.operationStack.pop(),yn.currentOperation=yn.operationStack[yn.operationStack.length-1]||null,yn.measures.push({name:t,startTime:r,duration:s,component:e||Lc(),info:n,parentOperation:i||void 0}),s>10&&yn.operationHistory.push({operation:t,component:e||Lc()||"unknown",durationMs:s,timestamp:Date.now()})}}async function tE(t,e,n,r){if(!yn.isEnabled||!yn.isRecording)return e();const i=performance.now(),s=yn.currentOperation;yn.currentOperation=t,yn.operationStack.push(t);try{return await e()}finally{const o=performance.now()-i;yn.operationStack.pop(),yn.currentOperation=yn.operationStack[yn.operationStack.length-1]||null,yn.measures.push({name:t,startTime:i,duration:o,component:n||Lc(),info:r,parentOperation:s||void 0}),o>10&&yn.operationHistory.push({operation:t,component:n||Lc()||"unknown",durationMs:o,timestamp:Date.now()})}}function nE(t,e,n,r){if(!yn.isEnabled||!yn.isRecording)return e();const i=performance.now(),s=yn.currentOperation;yn.currentOperation=t,yn.operationStack.push(t);try{return e()}finally{const o=performance.now()-i;yn.operationStack.pop(),yn.currentOperation=yn.operationStack[yn.operationStack.length-1]||null,yn.measures.push({name:t,startTime:i,duration:o,component:n||Lc(),info:r,parentOperation:s||void 0}),o>10&&yn.operationHistory.push({operation:t,component:n||Lc()||"unknown",durationMs:o,timestamp:Date.now()})}}function B_(){!yn.isEnabled||!yn.isRecording||(performance.memory?yn.memorySnapshots.push({jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize,timestamp:performance.now()}):yn.memorySnapshots.push({timestamp:performance.now()}))}function z7(){lf!==null&&cancelAnimationFrame(lf),yn.frameCount=0,yn.lastFpsUpdate=performance.now();function t(){yn.frameCount++;const e=performance.now();e-yn.lastFpsUpdate>=j7&&(yn.framesPerSecond=Math.round(yn.frameCount*1e3/(e-yn.lastFpsUpdate)),yn.frameCount=0,yn.lastFpsUpdate=e),yn.isRecording&&(lf=requestAnimationFrame(t))}lf=requestAnimationFrame(t)}function rE(){lf!==null&&(cancelAnimationFrame(lf),lf=null)}function Lc(){return""}function hb(t){yn.isEnabled=t,t&&!yn.isRecording?jy():!t&&yn.isRecording&&$v()}function iE(t,e,n){return(...r)=>{if(!yn.isEnabled||!yn.isRecording)return t(...r);const i=performance.now();try{return t(...r)}finally{const s=performance.now()-i;yn.measures.push({name:e,startTime:i,duration:s,component:n||Lc(),info:{args:r}}),s>10&&yn.operationHistory.push({operation:e,component:n||Lc()||"unknown",durationMs:s,timestamp:Date.now()})}}}function sE(t,e,n){return async(...r)=>{if(!yn.isEnabled||!yn.isRecording)return await t(...r);const i=performance.now();try{return await t(...r)}finally{const s=performance.now()-i;yn.measures.push({name:e,startTime:i,duration:s,component:n||Lc(),info:{args:r}}),s>10&&yn.operationHistory.push({operation:e,component:n||Lc()||"unknown",durationMs:s,timestamp:Date.now()})}}}function $7(t,e){const n=yn.measures.filter(o=>o.startTime>=t&&o.startTime+o.duration<=e),r=new Map,i=[];n.forEach(o=>{o.parentOperation?(r.has(o.parentOperation)||r.set(o.parentOperation,[]),r.get(o.parentOperation).push(o)):i.push(o)});function s(o){const a=r.get(o.name)||[];return{operation:o.name,duration:o.duration,component:o.component,children:a.sort((l,c)=>c.duration-l.duration).map(l=>s(l))}}return i.sort((o,a)=>a.duration-o.duration).map(o=>s(o))}function db(t,e){const n=t||yn.startTime,r=e||performance.now(),i=$7(n,r),s=r-n,o=new Map;function a(c){const d=o.get(c.operation)||{duration:0,component:c.component};d.duration+=c.duration,o.set(c.operation,d),c.children.forEach(p=>a(p))}i.forEach(c=>a(c));const l=Array.from(o.entries()).map(([c,{duration:d,component:p}])=>({operation:c,duration:d,component:p,impact:d/s*100})).sort((c,d)=>d.impact-c.impact).slice(0,10);return{criticalPaths:i,totalTime:s,bottlenecks:l}}function Vp(){const t=xt(!1);fo(()=>{try{const r=new URL(window.location.href).searchParams.get("perf")==="true";t.value=r,hb(r),cb()}catch(n){console.warn("Erreur lors de la vrification du paramtre perf:",n),t.value=!1,hb(!1)}}),Ku(()=>{yn.isRecording&&$v()});const e=(n,r)=>{if(!yn.isEnabled||!yn.isRecording)return null;const i=yn.measures.find(c=>c.name===n&&c.startTime===r);if(!i)return null;const s=i.startTime+i.duration,o=yn.measures.filter(c=>c.startTime>=i.startTime&&c.startTime<=s&&c!==i),a=yn.longTasks.filter(c=>c.startTime>=i.startTime&&c.startTime<=s),l=yn.memorySnapshots.filter(c=>c.timestamp>=i.startTime&&c.timestamp<=s);return{operation:{name:i.name,component:i.component,startTime:i.startTime,duration:i.duration,info:i.info},context:{relatedOperations:o.map(c=>({name:c.name,component:c.component,startTime:c.startTime-i.startTime,duration:c.duration,info:c.info})),longTasks:a.map(c=>({duration:c.duration,startTime:c.startTime-i.startTime,name:c.name,component:c.component})),memorySnapshots:l.map(c=>({...c,timestamp:c.timestamp-i.startTime}))},summary:{totalRelatedOperations:o.length,totalLongTasks:a.length,maxLongTaskDuration:Math.max(...a.map(c=>c.duration),0),memoryDelta:l.length>1?(l[l.length-1].usedJSHeapSize||0)-(l[0].usedJSHeapSize||0):0}}};return{isEnabled:pc(xt(yn.isEnabled)),isQueryParamEnabled:pc(t),isRecording:pc(xt(yn.isRecording)),measures:pc(xt(yn.measures)),longTasks:pc(xt(yn.longTasks)),memorySnapshots:pc(xt(yn.memorySnapshots)),framesPerSecond:pc(xt(yn.framesPerSecond)),operationHistory:pc(xt(yn.operationHistory)),startRecording:jy,stopRecording:$v,clearRecording:cb,startMeasure:eE,measure:nE,measureAsync:tE,captureMemorySnapshot:B_,createPerformanceTracker:iE,createAsyncPerformanceTracker:sE,getOperationDetails:e,getSlowOperations:()=>!yn.isEnabled||!yn.isRecording?[]:[...yn.measures].sort((n,r)=>r.duration-n.duration).slice(0,10),getLongTasks:()=>!yn.isEnabled||!yn.isRecording?[]:[...yn.longTasks].sort((n,r)=>r.duration-n.duration),getPerformanceReport:()=>{if(!yn.isEnabled||!yn.isRecording)return null;const n=db();return{totalMeasures:yn.measures.length,totalLongTasks:yn.longTasks.length,slowestOperations:[...yn.measures].sort((r,i)=>i.duration-r.duration).slice(0,10),averageFps:yn.framesPerSecond,memoryUsage:yn.memorySnapshots.length>0?yn.memorySnapshots[yn.memorySnapshots.length-1]:null,operationsByComponent:V7(yn.measures),criticalPaths:n.criticalPaths,bottlenecks:n.bottlenecks,recordingDuration:yn.isRecording?performance.now()-yn.startTime:null}},analyzeCriticalPaths:db}}function V7(t){if(!yn.isEnabled||!yn.isRecording)return{};const e={};return t.forEach(n=>{const r=n.component||"unknown";e[r]||(e[r]={totalTime:0,callCount:0,operations:{}}),e[r].totalTime+=n.duration,e[r].callCount++,e[r].operations[n.name]||(e[r].operations[n.name]={totalTime:0,callCount:0}),e[r].operations[n.name].totalTime+=n.duration,e[r].operations[n.name].callCount++}),e}const gn={startRecording:jy,stopRecording:$v,clearRecording:cb,startMeasure:eE,measure:nE,measureAsync:tE,captureMemorySnapshot:B_,createPerformanceTracker:iE,createAsyncPerformanceTracker:sE,setEnabled:hb,analyzeCriticalPaths:db},zn=Yo.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0}),Wr=Vp();function oE(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}zn.interceptors.request.use(async t=>{const e=Wr.startMeasure("api_request_interceptor","ApiService");try{const n=oE("access_token");return n&&(t.headers.Authorization=`Bearer ${n}`),console.log("Request config:",{url:t.url,method:t.method,headers:t.headers,withCredentials:t.withCredentials}),t}finally{e()}},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));zn.interceptors.response.use(t=>t,async t=>{var r,i;const e=Wr.startMeasure("api_response_interceptor","ApiService"),n=t.config;try{if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;const s=da();try{await Wr.measureAsync("token_refresh",()=>s.refreshToken(),"ApiService");const o=oE("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,zn(n)}catch(o){return await s.logout(),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(o)}}return Promise.reject(t)}finally{e()}});function U7(t){var n;const e=[];if((n=t.response)!=null&&n.data){const r=t.response.data;typeof r=="object"&&!Array.isArray(r)?Object.entries(r).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>{e.push({field:i,message:o})}):typeof s=="string"&&e.push({field:i,message:s})}):typeof r=="string"?e.push({field:"non_field_error",message:r}):r.detail&&e.push({field:"non_field_error",message:r.detail})}else t.message&&e.push({field:"non_field_error",message:`Erreur de connexion: ${t.message}`});return e.length===0&&e.push({field:"non_field_error",message:"Une erreur inconnue s'est produite"}),e}async function nv(t){console.log("[fetchUsersByHierarchy] Rcupration des utilisateurs:",t);const e={role:t.role};t.entrepriseId&&(e.entreprise=t.entrepriseId),t.salarieId&&(e.salarie=t.salarieId),t.includeDetails&&(e.include_plans=!0),t.search&&(e.search=t.search),console.log("[fetchUsersByHierarchy] Filtres appliqus:",e);try{const n=await Pl.getUsers(e);return console.log(`[fetchUsersByHierarchy] Rsultat (${n.data.length} utilisateurs):`,n.data),n.data}catch(n){throw console.error("[fetchUsersByHierarchy] Erreur lors de la rcupration des utilisateurs:",n),n}}const Pl={async getUsers(t={}){const e=Wr.startMeasure("get_users","UserService");try{return await Wr.measureAsync("get_users_request",()=>zn.get("/users/",{params:t}),"UserService")}finally{e()}},async getUser(t){return await zn.get(`/users/${t}/`)},async createUser(t){return await zn.post("/users/",t)},async updateUser(t,e){return await zn.patch(`/users/${t}/`,e)},async deleteUser(t){return await zn.delete(`/users/${t}/`)},async getEntreprises(){return await zn.get("/users/",{params:{role:"ENTREPRISE"}})},async getSalaries(t){const e={role:"SALARIE"};return t&&(e.entreprise=t),await zn.get("/users/",{params:e})},async getSalarieVisiteurs(t){return await zn.get("/users/",{params:{role:"VISITEUR",salarie:t}})},async getEntrepriseVisiteurs(t){return await zn.get("/users/",{params:{role:"VISITEUR",entreprise:t}})},async getUsersByHierarchy(t){const e=Wr.startMeasure("get_users_hierarchy","UserService");try{const n=Wr.measure("prepare_hierarchy_filters",()=>{const r={role:t.role};return t.entrepriseId&&(r.entreprise=t.entrepriseId),t.salarieId&&(r.salarie=t.salarieId),t.includeDetails&&(r.include_plans=!0),t.search&&(r.search=t.search),r},"UserService");return await Wr.measureAsync("get_users_hierarchy_request",()=>zn.get("/users/",{params:n}),"UserService")}finally{e()}},async getEntrepriseSalaries(t){return await zn.get("/users/",{params:{role:"SALARIE",entreprise:t}})},async getVisiteurs(t,e){const n={role:"VISITEUR"};return t&&(n.salarie=t),e&&(n.entreprise=e),await zn.get("/users/",{params:n})},async assignEntrepriseToSalarie(t,e){return await zn.patch(`/users/${t}/`,{entreprise:e})},async assignSalarieToVisiteur(t,e){return await zn.patch(`/users/${t}/`,{salarie:e})},formatLogoFileName(t){return Wr.measure("format_logo_filename",()=>{var i;const e=new Date().getTime(),n=((i=t.name.split(".").pop())==null?void 0:i.toLowerCase())||"";return`${t.name.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${e}.${n}`},"UserService")},async uploadLogo(t){const e=Wr.startMeasure("upload_logo","UserService");try{const n=new FormData,r=this.formatLogoFileName(t),i=new File([t],r,{type:t.type});return n.append("logo",i),await Wr.measureAsync("upload_logo_request",()=>zn.post("/users/upload_logo/",n,{headers:{"Content-Type":"multipart/form-data"}}),"UserService")}finally{e()}}};async function H1(t,e=3,n=1e3,r=1e4){let i=0;for(;;)try{return await t()}catch(s){if(i++,i>=e)throw s;const o=Math.min(n*Math.pow(2,i-1),r),a=Math.random()*200;console.log(`Tentative ${i}/${e} choue, nouvelle tentative dans ${o+a}ms`),await new Promise(l=>setTimeout(l,o+a))}}const b0={async getPlans(){const t=Wr.startMeasure("get_plans","IrrigationService");try{return await Wr.measureAsync("get_plans_request",()=>zn.get("/plans/"),"IrrigationService")}finally{t()}},async createPlan(t){const e=Wr.startMeasure("create_plan","IrrigationService");try{const n=Wr.measure("format_plan_data",()=>({...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null}),"IrrigationService");return await Wr.measureAsync("create_plan_request",()=>zn.post("/plans/",n),"IrrigationService")}finally{e()}},async updatePlan(t,e){const n=Wr.startMeasure("update_plan","IrrigationService");try{return await Wr.measureAsync("update_plan_request",()=>zn.put(`/plans/${t}/`,e),"IrrigationService")}finally{n()}},async deletePlan(t){const e=Wr.startMeasure("delete_plan","IrrigationService");try{return await Wr.measureAsync("delete_plan_request",()=>zn.delete(`/plans/${t}/`),"IrrigationService")}finally{e()}},async getVisiteurPlans(t){return await zn.get("/plans/",{params:{visiteur:t}})},async createPlanForVisiteur(t){return await zn.post("/plans/",t)},async getEntreprisePlans(t){return await zn.get("/plans/",{params:{entreprise:t}})},async getSalariePlans(t){return await zn.get("/plans/",{params:{salarie:t}})},async createPlanForSalarie(t,e){const n={...t,salarie:e};return await zn.post("/plans/",n)},async createPlanForEntreprise(t,e){const n={...t,entreprise:e};return await zn.post("/plans/",n)}},La={async getNotes(t={}){const e=Wr.startMeasure("get_notes","NoteService");try{return await Wr.measureAsync("get_notes_request",()=>zn.get("/notes/",{params:t}),"NoteService")}finally{e()}},async getNotesByPlan(t){const e=Wr.startMeasure("get_notes_by_plan","NoteService");try{return await Wr.measureAsync("get_notes_by_plan_request",()=>zn.get("/notes/",{params:{plan:t}}),"NoteService")}finally{e()}},async getNote(t){const e=Wr.startMeasure("get_note","NoteService");try{return await Wr.measureAsync("get_note_request",()=>zn.get(`/notes/${t}/`),"NoteService")}finally{e()}},async createNote(t){const e=Wr.startMeasure("create_note","NoteService");try{const n={...t};return n.location&&Object.keys(n.location).length===0&&delete n.location,await Wr.measureAsync("create_note_request",()=>zn.post("/notes/",n),"NoteService")}finally{e()}},async updateNote(t,e){console.log("[noteService][updateNote] Mise  jour de la note:",{noteId:t,noteData:e});const n=Wr.startMeasure("update_note","NoteService");try{const r={...e};r.location&&Object.keys(r.location).length===0&&delete r.location,e.column!==void 0?r.column=e.column:e.columnId!==void 0&&(r.column=e.columnId),delete r.columnId,delete r.column_id,delete r.column_details,console.log("[noteService][updateNote] Donnes formates:",r);const i=await Wr.measureAsync("update_note_request",()=>zn.patch(`/notes/${t}/`,r),"NoteService");return console.log("[noteService][updateNote] Rponse du serveur:",i.data),i}catch(r){throw console.error("[noteService][updateNote] Erreur lors de la mise  jour:",r),r}finally{n()}},async deleteNote(t){const e=Wr.startMeasure("delete_note","NoteService");try{return await Wr.measureAsync("delete_note_request",()=>zn.delete(`/notes/${t}/`),"NoteService")}finally{e()}},async getComments(t){return await zn.get(`/notes/${t}/comments/`)},async addComment(t,e){const n=typeof e=="string"?{text:e}:e;return console.log(`[noteService][addComment] Envoi du commentaire pour la note ${t}:`,n),await zn.post(`/notes/${t}/comments/`,n)},async updateComment(t,e,n){return await zn.patch(`/notes/${t}/comments/${e}/`,n)},async deleteComment(t,e){return await zn.delete(`/notes/${t}/comments/${e}/`)},async getPhotos(t){return await zn.get(`/notes/${t}/photos/`)},async addPhoto(t,e){return await zn.post(`/notes/${t}/photos/`,e,{headers:{"Content-Type":"multipart/form-data"}})},async updatePhoto(t,e,n){return await zn.patch(`/notes/${t}/photos/${e}/`,n)},async deletePhoto(t,e){return await zn.delete(`/notes/${t}/photos/${e}/`)}},W1={async getDevices(t={}){const e=Wr.startMeasure("get_weather_devices","WeatherService");try{return await H1(()=>zn.get("/weather/devices/",{params:t}),3,1e3,1e4)}finally{e()}},async getRealTimeData(t){const e=Wr.startMeasure("get_weather_data","WeatherService");try{const n=typeof t=="string"?{mac:t}:t;return await H1(()=>zn.get("/weather/",{params:n}),3,1e3,1e4)}finally{e()}},async getHistoryData(t){const e=Wr.startMeasure("get_history_data","WeatherService");try{return await H1(()=>zn.get("/weather/history/",{params:t}),3,1e3,1e4)}finally{e()}}},_0={async getFilters(){const t=Wr.startMeasure("get_map_filters","MapFilterService");try{return await Wr.measureAsync("get_map_filters_request",()=>zn.get("/map-filters/"),"MapFilterService")}finally{t()}},async getFilter(t){const e=Wr.startMeasure("get_map_filter","MapFilterService");try{return await Wr.measureAsync("get_map_filter_request",()=>zn.get(`/map-filters/${t}/`),"MapFilterService")}finally{e()}},async createFilter(t){const e=Wr.startMeasure("create_map_filter","MapFilterService");try{return await Wr.measureAsync("create_map_filter_request",()=>zn.post("/map-filters/",t),"MapFilterService")}finally{e()}},async updateFilter(t,e){const n=Wr.startMeasure("update_map_filter","MapFilterService");try{return await Wr.measureAsync("update_map_filter_request",()=>zn.patch(`/map-filters/${t}/`,e),"MapFilterService")}finally{n()}},async deleteFilter(t){const e=Wr.startMeasure("delete_map_filter","MapFilterService");try{return await Wr.measureAsync("delete_map_filter_request",()=>zn.delete(`/map-filters/${t}/`),"MapFilterService")}finally{e()}}};zn.defaults.baseURL="/api";zn.defaults.headers.common["Content-Type"]="application/json";zn.defaults.withCredentials=!0;function gm(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}zn.interceptors.request.use(t=>{const e=gm("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));zn.interceptors.response.use(t=>t,async t=>{var r,i;const e=da(),n=t.config;if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;try{if(!gm("access_token"))throw new Error("No token available");await e.refreshToken();const o=gm("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,zn(n)}catch(s){console.error("Token refresh failed:",s),await e.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(t)});function H7(t,e,n=1){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${t}=${e};${i};path=/;secure;samesite=Strict`}function xu(t){if(!t)return"-";const e=t.first_name||"",n=t.last_name?t.last_name.toUpperCase():"",r=`${e} ${n}`.trim(),i=t.company_name||t.role||"";return!r&&!i?"-":r?i?`${r} (${i})`:r:`(${i})`}function W7(t="",e=""){return`${(t==null?void 0:t.charAt(0))||""}${(e==null?void 0:e.charAt(0))||""}`.toUpperCase()}const G7={ADMIN:"Administrateur",ENTREPRISE:"Entreprise",SALARIE:"Salarie",VISITEUR:"Visiteur"};function q7(t){return G7[t]||t}function Y7(){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function K7(t){return t?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}async function Z7({role:t,entrepriseId:e,salarieId:n,includeDetails:r=!1}){const i={role:t};return e&&(i.entreprise=e),n&&(i.salarie=n),r&&(i.include_plans=!0),(await Pl.getUsers(i)).data}const da=jp("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,enterprises:[],employees:[],visitors:[]}),getters:{isAdmin:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="admin"},isEntreprise:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="entreprise"},isSalarie:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="salarie"},isVisiteur:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="visiteur"},currentUser:t=>t.user,hasEnterprise:t=>{var e;return!!((e=t.user)!=null&&e.enterprise_id)},hasEmployee:t=>{var e;return!!((e=t.user)!=null&&e.employee_id)}},actions:{async initialize(t){if(!t){const n=await this.restoreSession();return this.initialized=!0,n}if(t.isAuthenticated&&t.user)return this.user=t.user,this.isAuthenticated=!0,this.mustChangePassword=t.user.must_change_password||!1,this.initialized=!0,!0;const e=await this.restoreSession();return this.initialized=!0,e},async restoreSession(){try{if(!gm("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const e=await zn.post("/token/refresh/");return e.data.user?(this.user=e.data.user,this.isAuthenticated=!0,this.mustChangePassword=e.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(t){return console.error("Failed to restore session:",t),this.isAuthenticated=!1,this.user=null,!1}},async login(t,e){var n,r,i;try{const s=await zn.post("/token/",{username:t,password:e});if(!s.data.access)throw new Error("Token d'accs non reu");document.cookie=`access_token=${s.data.access}; path=/; secure; samesite=Strict`;const o=await this.fetchUserProfile();return this.user=o,this.isAuthenticated=!0,!0}catch(s){throw this.isAuthenticated=!1,this.user=null,((n=s.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(i=(r=s.response)==null?void 0:r.data)!=null&&i.detail?new Error(s.response.data.detail):s}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const t=await zn.get("/users/me/");return this.user=t.data,this.isAuthenticated=!0,this.mustChangePassword=t.data.must_change_password||!1,t.data}catch(t){throw this.isAuthenticated=!1,this.user=null,t}},async changePassword(t,e){try{const n=await zn.post("/users/change_password/",{old_password:t,password:e});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var t,e;try{if(!gm("refresh_token"))throw new Error("No refresh token available");const r=await zn.post("/token/refresh/",{},{withCredentials:!0,_retry:!0}),{access:i}=r.data;if(!i)throw new Error("No access token received");return H7("access_token",i,1),this.isAuthenticated=!0,i}catch(n){throw console.error("Error refreshing token:",{status:(t=n.response)==null?void 0:t.status,data:(e=n.response)==null?void 0:e.data}),this.isAuthenticated=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",n}},async fetchUsers(t={}){this.loading=!0;try{return(await Pl.getUsers(t)).data}catch(e){throw this.error="Erreur lors de la rcupration des utilisateurs",e}finally{this.loading=!1}},async fetchEnterprises(){this.loading=!0;try{const t=await Pl.getUsers({role:"ENTREPRISE"});return this.enterprises=t.data,this.enterprises}catch(t){throw this.error="Erreur lors de la rcupration des entreprises",t}finally{this.loading=!1}},async fetchEnterpriseEmployees(t){this.loading=!0;try{const e=await Pl.getUsers({role:"SALARIE",entreprise:t});return this.employees=e.data,this.employees}catch(e){throw this.error="Erreur lors de la rcupration des salaries",e}finally{this.loading=!1}},async fetchEnterpriseVisitors(t){this.loading=!0;try{const e=await Pl.getUsers({role:"VISITEUR",entreprise:t});return this.visitors=e.data,this.visitors}catch(e){throw this.error="Erreur lors de la rcupration des visiteurs",e}finally{this.loading=!1}},async createUser(t){this.loading=!0;try{return(await Pl.createUser(t)).data}catch(e){throw this.error="Erreur lors de la cration de l'utilisateur",e}finally{this.loading=!1}},async updateUser(t,e){this.loading=!0;try{return(await Pl.updateUser(t,e)).data}catch(n){throw this.error="Erreur lors de la mise  jour de l'utilisateur",n}finally{this.loading=!1}},async deleteUser(t){this.loading=!0;try{return await Pl.deleteUser(t),!0}catch(e){throw this.error="Erreur lors de la suppression de l'utilisateur",e}finally{this.loading=!1}},async fetchEnterprisesLegacy(){this.loading=!0;try{const t=await zn.get("/users/",{params:{role:"entreprise"}});this.enterprises=t.data}catch(t){throw this.error="Erreur lors de la rcupration des entreprises",t}finally{this.loading=!1}},async setEnterprise(t,e){this.loading=!0;try{await zn.patch(`/users/${t}/`,{enterprise:e}),this.user&&this.user.id===t&&(this.user.enterprise_id=e)}catch(n){throw this.error="Erreur lors de la mise  jour de l'entreprise",n}finally{this.loading=!1}},async updateUserRole(t,e){this.loading=!0;try{const n=await zn.patch(`/users/${t}/`,{role:e});return this.user&&this.user.id===t&&(this.user.user_type=e),n.data}catch(n){throw this.error="Erreur lors de la mise  jour du rle",n}finally{this.loading=!1}},async updateUserEmail(t){var e;this.loading=!0;try{const n=await zn.patch(`/users/${(e=this.user)==null?void 0:e.id}/`,{email:t});return this.user&&(this.user.email=t),n.data}catch(n){throw this.error="Erreur lors de la mise  jour de l'email",n}finally{this.loading=!1}},async uploadLogo(t){this.loading=!0;try{const e=await Pl.uploadLogo(t);return this.user&&e.data.logo&&(this.user.logo=e.data.logo),e.data}catch(e){throw this.error="Erreur lors du tlversement du logo",e}finally{this.loading=!1}},checkAccess(t){return this.user?t.includes(this.user.user_type):!1},async fetchUsersByRole(t){this.loading=!0;try{return await Z7(t)}catch(e){throw console.error(`Error fetching ${t.role}:`,e),e}finally{this.loading=!1}},async fetchEntrepriseSalaries(t){this.loading=!0;try{return(await Pl.getUsers({role:"SALARIE",entreprise:t})).data}catch(e){throw this.error="Erreur lors de la rcupration des salaries",e}finally{this.loading=!1}},async fetchSalarieVisiteurs(t){this.loading=!0;try{return(await Pl.getUsers({role:"VISITEUR",salarie:t})).data}catch(e){throw this.error="Erreur lors de la rcupration des visiteurs",e}finally{this.loading=!1}}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const sp=typeof document<"u";function aE(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function X7(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&aE(t.default)}const as=Object.assign;function G1(t,e){const n={};for(const r in e){const i=e[r];n[r]=Sc(i)?i.map(t):t(i)}return n}const Ug=()=>{},Sc=Array.isArray,lE=/#/g,J7=/&/g,Q7=/\//g,eB=/=/g,tB=/\?/g,uE=/\+/g,nB=/%5B/g,rB=/%5D/g,cE=/%5E/g,iB=/%60/g,hE=/%7B/g,sB=/%7C/g,dE=/%7D/g,oB=/%20/g;function R_(t){return encodeURI(""+t).replace(sB,"|").replace(nB,"[").replace(rB,"]")}function aB(t){return R_(t).replace(hE,"{").replace(dE,"}").replace(cE,"^")}function fb(t){return R_(t).replace(uE,"%2B").replace(oB,"+").replace(lE,"%23").replace(J7,"%26").replace(iB,"`").replace(hE,"{").replace(dE,"}").replace(cE,"^")}function lB(t){return fb(t).replace(eB,"%3D")}function uB(t){return R_(t).replace(lE,"%23").replace(tB,"%3F")}function cB(t){return t==null?"":uB(t).replace(Q7,"%2F")}function mm(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const hB=/\/$/,dB=t=>t.replace(hB,"");function q1(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=mB(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:mm(o)}}function fB(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function k4(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function pB(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Mp(e.matched[r],n.matched[i])&&fE(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Mp(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function fE(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!gB(t[n],e[n]))return!1;return!0}function gB(t,e){return Sc(t)?A4(t,e):Sc(e)?A4(e,t):t===e}function A4(t,e){return Sc(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function mB(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Zh={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var vm;(function(t){t.pop="pop",t.push="push"})(vm||(vm={}));var Hg;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Hg||(Hg={}));function vB(t){if(!t)if(sp){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),dB(t)}const yB=/^[^#]+#/;function bB(t,e){return t.replace(yB,"#")+e}function _B(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const zy=()=>({left:window.scrollX,top:window.scrollY});function wB(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=_B(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function T4(t,e){return(history.state?history.state.position-e:-1)+t}const pb=new Map;function xB(t,e){pb.set(t,e)}function LB(t){const e=pb.get(t);return pb.delete(t),e}let SB=()=>location.protocol+"//"+location.host;function pE(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),k4(l,"")}return k4(n,t)+r+i}function CB(t,e,n,r){let i=[],s=[],o=null;const a=({state:v})=>{const m=pE(t,location),x=n.value,E=e.value;let M=0;if(v){if(n.value=m,e.value=v,o&&o===x){o=null;return}M=E?v.position-E.position:0}else r(m);i.forEach(A=>{A(n.value,x,{delta:M,type:vm.pop,direction:M?M>0?Hg.forward:Hg.back:Hg.unknown})})};function l(){o=n.value}function c(v){i.push(v);const m=()=>{const x=i.indexOf(v);x>-1&&i.splice(x,1)};return s.push(m),m}function d(){const{history:v}=window;v.state&&v.replaceState(as({},v.state,{scroll:zy()}),"")}function p(){for(const v of s)v();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:l,listen:c,destroy:p}}function D4(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?zy():null}}function EB(t){const{history:e,location:n}=window,r={value:pE(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,d){const p=t.indexOf("#"),v=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:SB()+t+l;try{e[d?"replaceState":"pushState"](c,"",v),i.value=c}catch(m){console.error(m),n[d?"replace":"assign"](v)}}function o(l,c){const d=as({},e.state,D4(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,d,!0),r.value=l}function a(l,c){const d=as({},i.value,e.state,{forward:l,scroll:zy()});s(d.current,d,!0);const p=as({},D4(r.value,l,null),{position:d.position+1},c);s(l,p,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function PB(t){t=vB(t);const e=EB(t),n=CB(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=as({location:"",base:t,go:r,createHref:bB.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function MB(t){return typeof t=="string"||t&&typeof t=="object"}function gE(t){return typeof t=="string"||typeof t=="symbol"}const mE=Symbol("");var O4;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(O4||(O4={}));function kp(t,e){return as(new Error,{type:t,[mE]:!0},e)}function vh(t,e){return t instanceof Error&&mE in t&&(e==null||!!(t.type&e))}const N4="[^/]+?",kB={sensitive:!1,strict:!1,start:!0,end:!0},AB=/[.+*?^${}()[\]/\\]/g;function TB(t,e){const n=as({},kB,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const d=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let p=0;p<c.length;p++){const v=c[p];let m=40+(n.sensitive?.25:0);if(v.type===0)p||(i+="/"),i+=v.value.replace(AB,"\\$&"),m+=40;else if(v.type===1){const{value:x,repeatable:E,optional:M,regexp:A}=v;s.push({name:x,repeatable:E,optional:M});const O=A||N4;if(O!==N4){m+=10;try{new RegExp(`(${O})`)}catch(K){throw new Error(`Invalid custom RegExp for param "${x}" (${O}): `+K.message)}}let z=E?`((?:${O})(?:/(?:${O}))*)`:`(${O})`;p||(z=M&&c.length<2?`(?:/${z})`:"/"+z),M&&(z+="?"),i+=z,m+=20,M&&(m+=-8),E&&(m+=-20),O===".*"&&(m+=-50)}d.push(m)}r.push(d)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const d=c.match(o),p={};if(!d)return null;for(let v=1;v<d.length;v++){const m=d[v]||"",x=s[v-1];p[x.name]=m&&x.repeatable?m.split("/"):m}return p}function l(c){let d="",p=!1;for(const v of t){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const m of v)if(m.type===0)d+=m.value;else if(m.type===1){const{value:x,repeatable:E,optional:M}=m,A=x in c?c[x]:"";if(Sc(A)&&!E)throw new Error(`Provided param "${x}" is an array but it is not repeatable (* or + modifiers)`);const O=Sc(A)?A.join("/"):A;if(!O)if(M)v.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${x}"`);d+=O}}return d||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function DB(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function vE(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=DB(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(I4(r))return 1;if(I4(i))return-1}return i.length-r.length}function I4(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const OB={type:0,value:""},NB=/[a-zA-Z0-9_]/;function IB(t){if(!t)return[[]];if(t==="/")return[[OB]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",d="";function p(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function v(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&p(),o()):l===":"?(p(),n=1):v();break;case 4:v(),n=r;break;case 1:l==="("?n=2:NB.test(l)?v():(p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:n=3:d+=l;break;case 3:p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),p(),o(),i}function BB(t,e,n){const r=TB(IB(t.path),n),i=as(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function RB(t,e){const n=[],r=new Map;e=j4({strict:!1,end:!0,sensitive:!1},e);function i(p){return r.get(p)}function s(p,v,m){const x=!m,E=R4(p);E.aliasOf=m&&m.record;const M=j4(e,p),A=[E];if("alias"in p){const K=typeof p.alias=="string"?[p.alias]:p.alias;for(const ne of K)A.push(R4(as({},E,{components:m?m.record.components:E.components,path:ne,aliasOf:m?m.record:E})))}let O,z;for(const K of A){const{path:ne}=K;if(v&&ne[0]!=="/"){const me=v.record.path,pe=me[me.length-1]==="/"?"":"/";K.path=v.record.path+(ne&&pe+ne)}if(O=BB(K,v,M),m?m.alias.push(O):(z=z||O,z!==O&&z.alias.push(O),x&&p.name&&!F4(O)&&o(p.name)),yE(O)&&l(O),E.children){const me=E.children;for(let pe=0;pe<me.length;pe++)s(me[pe],O,m&&m.children[pe])}m=m||O}return z?()=>{o(z)}:Ug}function o(p){if(gE(p)){const v=r.get(p);v&&(r.delete(p),n.splice(n.indexOf(v),1),v.children.forEach(o),v.alias.forEach(o))}else{const v=n.indexOf(p);v>-1&&(n.splice(v,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function a(){return n}function l(p){const v=zB(p,n);n.splice(v,0,p),p.record.name&&!F4(p)&&r.set(p.record.name,p)}function c(p,v){let m,x={},E,M;if("name"in p&&p.name){if(m=r.get(p.name),!m)throw kp(1,{location:p});M=m.record.name,x=as(B4(v.params,m.keys.filter(z=>!z.optional).concat(m.parent?m.parent.keys.filter(z=>z.optional):[]).map(z=>z.name)),p.params&&B4(p.params,m.keys.map(z=>z.name))),E=m.stringify(x)}else if(p.path!=null)E=p.path,m=n.find(z=>z.re.test(E)),m&&(x=m.parse(E),M=m.record.name);else{if(m=v.name?r.get(v.name):n.find(z=>z.re.test(v.path)),!m)throw kp(1,{location:p,currentLocation:v});M=m.record.name,x=as({},v.params,p.params),E=m.stringify(x)}const A=[];let O=m;for(;O;)A.unshift(O.record),O=O.parent;return{name:M,path:E,params:x,matched:A,meta:jB(A)}}t.forEach(p=>s(p));function d(){n.length=0,r.clear()}return{addRoute:s,resolve:c,removeRoute:o,clearRoutes:d,getRoutes:a,getRecordMatcher:i}}function B4(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function R4(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:FB(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function FB(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function F4(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function jB(t){return t.reduce((e,n)=>as(e,n.meta),{})}function j4(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function zB(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;vE(t,e[s])<0?r=s:n=s+1}const i=$B(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function $B(t){let e=t;for(;e=e.parent;)if(yE(e)&&vE(t,e)===0)return e}function yE({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function VB(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(uE," "),o=s.indexOf("="),a=mm(o<0?s:s.slice(0,o)),l=o<0?null:mm(s.slice(o+1));if(a in e){let c=e[a];Sc(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function z4(t){let e="";for(let n in t){const r=t[n];if(n=lB(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Sc(r)?r.map(s=>s&&fb(s)):[r&&fb(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function UB(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Sc(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const HB=Symbol(""),$4=Symbol(""),$y=Symbol(""),F_=Symbol(""),gb=Symbol("");function tg(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ad(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=v=>{v===!1?l(kp(4,{from:n,to:e})):v instanceof Error?l(v):MB(v)?l(kp(2,{from:e,to:v})):(o&&r.enterCallbacks[i]===o&&typeof v=="function"&&o.push(v),a())},d=s(()=>t.call(r&&r.instances[i],e,n,c));let p=Promise.resolve(d);t.length<3&&(p=p.then(c)),p.catch(v=>l(v))})}function Y1(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(aE(l)){const d=(l.__vccOpts||l)[e];d&&s.push(ad(d,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const p=X7(d)?d.default:d;o.mods[a]=d,o.components[a]=p;const m=(p.__vccOpts||p)[e];return m&&ad(m,n,r,o,a,i)()}))}}return s}function V4(t){const e=Cu($y),n=Cu(F_),r=Kn(()=>{const l=er(t.to);return e.resolve(l)}),i=Kn(()=>{const{matched:l}=r.value,{length:c}=l,d=l[c-1],p=n.matched;if(!d||!p.length)return-1;const v=p.findIndex(Mp.bind(null,d));if(v>-1)return v;const m=U4(l[c-2]);return c>1&&U4(d)===m&&p[p.length-1].path!==m?p.findIndex(Mp.bind(null,l[c-2])):v}),s=Kn(()=>i.value>-1&&YB(n.params,r.value.params)),o=Kn(()=>i.value>-1&&i.value===n.matched.length-1&&fE(n.params,r.value.params));function a(l={}){if(qB(l)){const c=e[er(t.replace)?"replace":"push"](er(t.to)).catch(Ug);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:Kn(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function WB(t){return t.length===1?t[0]:t}const GB=Fs({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:V4,setup(t,{slots:e}){const n=nu(V4(t)),{options:r}=Cu($y),i=Kn(()=>({[H4(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[H4(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&WB(e.default(n));return t.custom?s:ky("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),_g=GB;function qB(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function YB(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Sc(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function U4(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const H4=(t,e,n)=>t??e??n,KB=Fs({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Cu(gb),i=Kn(()=>t.route||r.value),s=Cu($4,0),o=Kn(()=>{let c=er(s);const{matched:d}=i.value;let p;for(;(p=d[c])&&!p.components;)c++;return c}),a=Kn(()=>i.value.matched[o.value]);jg($4,Kn(()=>o.value+1)),jg(HB,a),jg(gb,i);const l=xt();return Di(()=>[l.value,a.value,t.name],([c,d,p],[v,m,x])=>{d&&(d.instances[p]=c,m&&m!==d&&c&&c===v&&(d.leaveGuards.size||(d.leaveGuards=m.leaveGuards),d.updateGuards.size||(d.updateGuards=m.updateGuards))),c&&d&&(!m||!Mp(d,m)||!v)&&(d.enterCallbacks[p]||[]).forEach(E=>E(c))},{flush:"post"}),()=>{const c=i.value,d=t.name,p=a.value,v=p&&p.components[d];if(!v)return W4(n.default,{Component:v,route:c});const m=p.props[d],x=m?m===!0?c.params:typeof m=="function"?m(c):m:null,M=ky(v,as({},x,e,{onVnodeUnmounted:A=>{A.component.isUnmounted&&(p.instances[d]=null)},ref:l}));return W4(n.default,{Component:M,route:c})||M}}});function W4(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const bE=KB;function ZB(t){const e=RB(t.routes,t),n=t.parseQuery||VB,r=t.stringifyQuery||z4,i=t.history,s=tg(),o=tg(),a=tg(),l=v_(Zh);let c=Zh;sp&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=G1.bind(null,ve=>""+ve),p=G1.bind(null,cB),v=G1.bind(null,mm);function m(ve,ee){let X,De;return gE(ve)?(X=e.getRecordMatcher(ve),De=ee):De=ve,e.addRoute(De,X)}function x(ve){const ee=e.getRecordMatcher(ve);ee&&e.removeRoute(ee)}function E(){return e.getRoutes().map(ve=>ve.record)}function M(ve){return!!e.getRecordMatcher(ve)}function A(ve,ee){if(ee=as({},ee||l.value),typeof ve=="string"){const Q=q1(n,ve,ee.path),ie=e.resolve({path:Q.path},ee),fe=i.createHref(Q.fullPath);return as(Q,ie,{params:v(ie.params),hash:mm(Q.hash),redirectedFrom:void 0,href:fe})}let X;if(ve.path!=null)X=as({},ve,{path:q1(n,ve.path,ee.path).path});else{const Q=as({},ve.params);for(const ie in Q)Q[ie]==null&&delete Q[ie];X=as({},ve,{params:p(Q)}),ee.params=p(ee.params)}const De=e.resolve(X,ee),Te=ve.hash||"";De.params=d(v(De.params));const qe=fB(r,as({},ve,{hash:aB(Te),path:De.path})),ge=i.createHref(qe);return as({fullPath:qe,hash:Te,query:r===z4?UB(ve.query):ve.query||{}},De,{redirectedFrom:void 0,href:ge})}function O(ve){return typeof ve=="string"?q1(n,ve,l.value.path):as({},ve)}function z(ve,ee){if(c!==ve)return kp(8,{from:ee,to:ve})}function K(ve){return pe(ve)}function ne(ve){return K(as(O(ve),{replace:!0}))}function me(ve){const ee=ve.matched[ve.matched.length-1];if(ee&&ee.redirect){const{redirect:X}=ee;let De=typeof X=="function"?X(ve):X;return typeof De=="string"&&(De=De.includes("?")||De.includes("#")?De=O(De):{path:De},De.params={}),as({query:ve.query,hash:ve.hash,params:De.path!=null?{}:ve.params},De)}}function pe(ve,ee){const X=c=A(ve),De=l.value,Te=ve.state,qe=ve.force,ge=ve.replace===!0,Q=me(X);if(Q)return pe(as(O(Q),{state:typeof Q=="object"?as({},Te,Q.state):Te,force:qe,replace:ge}),ee||X);const ie=X;ie.redirectedFrom=ee;let fe;return!qe&&pB(r,De,X)&&(fe=kp(16,{to:ie,from:De}),Oe(De,De,!0,!1)),(fe?Promise.resolve(fe):q(ie,De)).catch(Ce=>vh(Ce)?vh(Ce,2)?Ce:Le(Ce):J(Ce,ie,De)).then(Ce=>{if(Ce){if(vh(Ce,2))return pe(as({replace:ge},O(Ce.to),{state:typeof Ce.to=="object"?as({},Te,Ce.to.state):Te,force:qe}),ee||ie)}else Ce=B(ie,De,!0,ge,Te);return I(ie,De,Ce),Ce})}function N(ve,ee){const X=z(ve,ee);return X?Promise.reject(X):Promise.resolve()}function j(ve){const ee=se.values().next().value;return ee&&typeof ee.runWithContext=="function"?ee.runWithContext(ve):ve()}function q(ve,ee){let X;const[De,Te,qe]=XB(ve,ee);X=Y1(De.reverse(),"beforeRouteLeave",ve,ee);for(const Q of De)Q.leaveGuards.forEach(ie=>{X.push(ad(ie,ve,ee))});const ge=N.bind(null,ve,ee);return X.push(ge),he(X).then(()=>{X=[];for(const Q of s.list())X.push(ad(Q,ve,ee));return X.push(ge),he(X)}).then(()=>{X=Y1(Te,"beforeRouteUpdate",ve,ee);for(const Q of Te)Q.updateGuards.forEach(ie=>{X.push(ad(ie,ve,ee))});return X.push(ge),he(X)}).then(()=>{X=[];for(const Q of qe)if(Q.beforeEnter)if(Sc(Q.beforeEnter))for(const ie of Q.beforeEnter)X.push(ad(ie,ve,ee));else X.push(ad(Q.beforeEnter,ve,ee));return X.push(ge),he(X)}).then(()=>(ve.matched.forEach(Q=>Q.enterCallbacks={}),X=Y1(qe,"beforeRouteEnter",ve,ee,j),X.push(ge),he(X))).then(()=>{X=[];for(const Q of o.list())X.push(ad(Q,ve,ee));return X.push(ge),he(X)}).catch(Q=>vh(Q,8)?Q:Promise.reject(Q))}function I(ve,ee,X){a.list().forEach(De=>j(()=>De(ve,ee,X)))}function B(ve,ee,X,De,Te){const qe=z(ve,ee);if(qe)return qe;const ge=ee===Zh,Q=sp?history.state:{};X&&(De||ge?i.replace(ve.fullPath,as({scroll:ge&&Q&&Q.scroll},Te)):i.push(ve.fullPath,Te)),l.value=ve,Oe(ve,ee,X,ge),Le()}let $;function R(){$||($=i.listen((ve,ee,X)=>{if(!ce.listening)return;const De=A(ve),Te=me(De);if(Te){pe(as(Te,{replace:!0,force:!0}),De).catch(Ug);return}c=De;const qe=l.value;sp&&xB(T4(qe.fullPath,X.delta),zy()),q(De,qe).catch(ge=>vh(ge,12)?ge:vh(ge,2)?(pe(as(O(ge.to),{force:!0}),De).then(Q=>{vh(Q,20)&&!X.delta&&X.type===vm.pop&&i.go(-1,!1)}).catch(Ug),Promise.reject()):(X.delta&&i.go(-X.delta,!1),J(ge,De,qe))).then(ge=>{ge=ge||B(De,qe,!1),ge&&(X.delta&&!vh(ge,8)?i.go(-X.delta,!1):X.type===vm.pop&&vh(ge,20)&&i.go(-1,!1)),I(De,qe,ge)}).catch(Ug)}))}let U=tg(),V=tg(),re;function J(ve,ee,X){Le(ve);const De=V.list();return De.length?De.forEach(Te=>Te(ve,ee,X)):console.error(ve),Promise.reject(ve)}function _e(){return re&&l.value!==Zh?Promise.resolve():new Promise((ve,ee)=>{U.add([ve,ee])})}function Le(ve){return re||(re=!ve,R(),U.list().forEach(([ee,X])=>ve?X(ve):ee()),U.reset()),ve}function Oe(ve,ee,X,De){const{scrollBehavior:Te}=t;if(!sp||!Te)return Promise.resolve();const qe=!X&&LB(T4(ve.fullPath,0))||(De||!X)&&history.state&&history.state.scroll||null;return la().then(()=>Te(ve,ee,qe)).then(ge=>ge&&wB(ge)).catch(ge=>J(ge,ve,ee))}const Z=ve=>i.go(ve);let G;const se=new Set,ce={currentRoute:l,listening:!0,addRoute:m,removeRoute:x,clearRoutes:e.clearRoutes,hasRoute:M,getRoutes:E,resolve:A,options:t,push:K,replace:ne,go:Z,back:()=>Z(-1),forward:()=>Z(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:V.add,isReady:_e,install(ve){const ee=this;ve.component("RouterLink",_g),ve.component("RouterView",bE),ve.config.globalProperties.$router=ee,Object.defineProperty(ve.config.globalProperties,"$route",{enumerable:!0,get:()=>er(l)}),sp&&!G&&l.value===Zh&&(G=!0,K(i.location).catch(Te=>{}));const X={};for(const Te in Zh)Object.defineProperty(X,Te,{get:()=>l.value[Te],enumerable:!0});ve.provide($y,ee),ve.provide(F_,m_(X)),ve.provide(gb,l);const De=ve.unmount;se.add(ve),ve.unmount=function(){se.delete(ve),se.size<1&&(c=Zh,$&&$(),$=null,l.value=Zh,G=!1,re=!1),De()}}};function he(ve){return ve.reduce((ee,X)=>ee.then(()=>j(X)),Promise.resolve())}return ce}function XB(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>Mp(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Mp(c,l))||i.push(l))}return[n,r,i]}function Nm(){return Cu($y)}function JB(t){return Cu(F_)}const tu=jp("notification",()=>{const t=xt([]),e=xt(0),n=xt(null),r=Kn(()=>[...t.value].sort((p,v)=>v.timestamp-p.timestamp));function i({type:p,message:v,duration:m=5e3}){const x=++e.value,E=Date.now(),M={id:x,type:p,message:v,duration:m,timestamp:E};return t.value.push(M),n.value=x,m>0&&setTimeout(()=>{c(x)},m),x}const s=(p,v=5e3)=>i({type:"success",message:p,duration:v}),o=(p,v=5e3)=>i({type:"error",message:p,duration:v}),a=(p,v=5e3)=>i({type:"info",message:p,duration:v}),l=(p,v=5e3)=>i({type:"warning",message:p,duration:v});function c(p){const v=t.value.findIndex(m=>m.id===p);v!==-1&&t.value.splice(v,1),n.value===p&&(n.value=null)}function d(){t.value=[],n.value=null}return{notifications:r,lastAddedId:n,addNotification:i,removeNotification:c,clearAll:d,success:s,error:o,info:a,warning:l}}),QB=Object.freeze(Object.defineProperty({__proto__:null,useNotificationStore:tu},Symbol.toStringTag,{value:"Module"}));var Sa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function j_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _E(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}function eR(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var wE=eR,tR=typeof Sa=="object"&&Sa&&Sa.Object===Object&&Sa,nR=tR,rR=nR,iR=typeof self=="object"&&self&&self.Object===Object&&self,sR=rR||iR||Function("return this")(),xE=sR,oR=xE,aR=function(){return oR.Date.now()},lR=aR,uR=/\s/;function cR(t){for(var e=t.length;e--&&uR.test(t.charAt(e)););return e}var hR=cR,dR=hR,fR=/^\s+/;function pR(t){return t&&t.slice(0,dR(t)+1).replace(fR,"")}var gR=pR,mR=xE,vR=mR.Symbol,LE=vR,G4=LE,SE=Object.prototype,yR=SE.hasOwnProperty,bR=SE.toString,ng=G4?G4.toStringTag:void 0;function _R(t){var e=yR.call(t,ng),n=t[ng];try{t[ng]=void 0;var r=!0}catch{}var i=bR.call(t);return r&&(e?t[ng]=n:delete t[ng]),i}var wR=_R,xR=Object.prototype,LR=xR.toString;function SR(t){return LR.call(t)}var CR=SR,q4=LE,ER=wR,PR=CR,MR="[object Null]",kR="[object Undefined]",Y4=q4?q4.toStringTag:void 0;function AR(t){return t==null?t===void 0?kR:MR:Y4&&Y4 in Object(t)?ER(t):PR(t)}var TR=AR;function DR(t){return t!=null&&typeof t=="object"}var OR=DR,NR=TR,IR=OR,BR="[object Symbol]";function RR(t){return typeof t=="symbol"||IR(t)&&NR(t)==BR}var FR=RR,jR=gR,K4=wE,zR=FR,Z4=NaN,$R=/^[-+]0x[0-9a-f]+$/i,VR=/^0b[01]+$/i,UR=/^0o[0-7]+$/i,HR=parseInt;function WR(t){if(typeof t=="number")return t;if(zR(t))return Z4;if(K4(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=K4(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=jR(t);var n=VR.test(t);return n||UR.test(t)?HR(t.slice(2),n?2:8):$R.test(t)?Z4:+t}var GR=WR,qR=wE,K1=lR,X4=GR,YR="Expected a function",KR=Math.max,ZR=Math.min;function XR(t,e,n){var r,i,s,o,a,l,c=0,d=!1,p=!1,v=!0;if(typeof t!="function")throw new TypeError(YR);e=X4(e)||0,qR(n)&&(d=!!n.leading,p="maxWait"in n,s=p?KR(X4(n.maxWait)||0,e):s,v="trailing"in n?!!n.trailing:v);function m(me){var pe=r,N=i;return r=i=void 0,c=me,o=t.apply(N,pe),o}function x(me){return c=me,a=setTimeout(A,e),d?m(me):o}function E(me){var pe=me-l,N=me-c,j=e-pe;return p?ZR(j,s-N):j}function M(me){var pe=me-l,N=me-c;return l===void 0||pe>=e||pe<0||p&&N>=s}function A(){var me=K1();if(M(me))return O(me);a=setTimeout(A,E(me))}function O(me){return a=void 0,v&&r?m(me):(r=i=void 0,o)}function z(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function K(){return a===void 0?o:O(K1())}function ne(){var me=K1(),pe=M(me);if(r=arguments,i=this,l=me,pe){if(a===void 0)return x(l);if(p)return clearTimeout(a),a=setTimeout(A,e),m(l)}return a===void 0&&(a=setTimeout(A,e)),o}return ne.cancel=z,ne.flush=K,ne}var JR=XR;const QR=j_(JR),eF={class:"relative w-full"},tF={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},nF=["onClick"],J4=Fs({__name:"SearchBar",emits:["select-location"],setup(t,{emit:e}){const n=xt(""),r=xt([]),i=e,s=QR(async l=>{if(l.length<3){r.value=[];return}try{const d=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(l)}`)).json();r.value=d}catch(c){console.error("Erreur lors de la recherche d'adresse:",c),r.value=[]}},300);function o(){s(n.value)}function a(l){n.value=l.display_name,r.value=[],i("select-location",{lat:parseFloat(l.lat),lng:parseFloat(l.lon)})}return(l,c)=>(Re(),$e("div",eF,[Pn(C("input",{"onUpdate:modelValue":c[0]||(c[0]=d=>n.value=d),onInput:o,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[Rr,n.value]]),r.value.length>0?(Re(),$e("div",tF,[(Re(!0),$e(Cn,null,pr(r.value,d=>(Re(),$e("div",{key:d.place_id,onClick:p=>a(d),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Tt(d.display_name),9,nF))),128))])):rn("",!0)]))}}),rF={class:"perf-title"},iF={class:"perf-basic-stats"},sF={class:"perf-stat"},oF={class:"perf-stat"},aF={class:"perf-expand-btn"},lF={key:0,class:"perf-content"},uF={class:"perf-section"},cF={class:"perf-metrics"},hF={class:"perf-metric"},dF={class:"perf-metric-value"},fF={class:"perf-metric"},pF={class:"perf-metric-value"},gF={class:"perf-metric"},mF={class:"perf-metric-value"},vF={class:"perf-metric"},yF={class:"perf-metric-value"},bF={class:"perf-section"},_F={class:"perf-metrics"},wF={key:0,class:"perf-metric"},xF={class:"perf-metric-value"},LF={key:1,class:"perf-metric"},SF={class:"perf-metric-value"},CF={key:2,class:"perf-metric"},EF={class:"perf-metric-value"},PF={class:"perf-section"},MF={class:"perf-table"},kF={class:"perf-table-cell"},AF={class:"perf-table-cell"},TF={class:"perf-table-cell"},DF={class:"perf-table-cell"},OF=["onClick"],NF={key:0,class:"perf-empty"},IF=Fs({__name:"PerformancePanel",props:{position:{}},setup(t){const n=t.position||"bottom-left",r=xt(!1),{isQueryParamEnabled:i,isRecording:s,measures:o,longTasks:a,memorySnapshots:l,framesPerSecond:c,operationHistory:d,startRecording:p,stopRecording:v,clearRecording:m,captureMemorySnapshot:x,getSlowOperations:E,getPerformanceReport:M,getOperationDetails:A}=Vp(),O=Kn(()=>{const B=M()??{totalMeasures:0,totalLongTasks:0,slowestOperations:[],averageFps:0,memoryUsage:null};return{totalMeasures:B.totalMeasures,totalLongTasks:B.totalLongTasks,averageDuration:B.slowestOperations.length>0?B.slowestOperations.reduce(($,R)=>$+R.duration,0)/B.slowestOperations.length:0,fps:B.averageFps,slowestOperations:B.slowestOperations,memoryUsage:B.memoryUsage}}),z=Kn(()=>(M()??{slowestOperations:[]}).slowestOperations.slice(0,5).map($=>({operation:$.name,component:$.component||"unknown",durationMs:$.duration,timestamp:$.startTime}))),K=xt(null);fo(()=>{i.value&&(K.value=window.setInterval(()=>{x()},1e3))}),Ku(()=>{K.value!==null&&clearInterval(K.value)});function ne(B){return B===void 0?"N/A":B<1024?B+" B":B<1024*1024?(B/1024).toFixed(2)+" KB":B<1024*1024*1024?(B/(1024*1024)).toFixed(2)+" MB":(B/(1024*1024*1024)).toFixed(2)+" GB"}function me(B){return B.toFixed(2)}const pe=()=>{x()};function N(){const B=M(),$="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(B,null,2)),R=document.createElement("a");R.setAttribute("href",$),R.setAttribute("download","performance_report.json"),document.body.appendChild(R),R.click(),R.remove()}function j(){m(),pe()}function q(){const B=M();navigator.clipboard.writeText(JSON.stringify(B,null,2)).then(()=>{alert("Donnes de performance copies dans le presse-papiers")}).catch($=>{console.error("Erreur lors de la copie des donnes",$),alert("Erreur lors de la copie des donnes")})}async function I(B){const $=A(B.operation,B.timestamp);if(!$){alert("Impossible de trouver les dtails de cette opration");return}const R={operation:{...$.operation,startTimeRelative:"0ms",startTimeAbsolute:new Date($.operation.startTime).toISOString()},context:{...$.context,relatedOperations:$.context.relatedOperations.map(U=>({...U,startTime:`+${U.startTime.toFixed(2)}ms`})),longTasks:$.context.longTasks.map(U=>({...U,startTime:`+${U.startTime.toFixed(2)}ms`})),memorySnapshots:$.context.memorySnapshots.map(U=>({...U,timestamp:`+${U.timestamp.toFixed(2)}ms`,usedJSHeapSize:U.usedJSHeapSize?ne(U.usedJSHeapSize):"N/A",totalJSHeapSize:U.totalJSHeapSize?ne(U.totalJSHeapSize):"N/A"}))},summary:{...$.summary,memoryDelta:ne($.summary.memoryDelta),maxLongTaskDuration:`${$.summary.maxLongTaskDuration.toFixed(2)}ms`}};try{await navigator.clipboard.writeText(JSON.stringify(R,null,2)),alert("Dtails de l'opration copis dans le presse-papiers")}catch(U){console.error("Erreur lors de la copie des dtails",U),alert("Erreur lors de la copie des dtails")}}return(B,$)=>{var R,U,V,re,J,_e;return er(i)?(Re(),$e("div",{key:0,class:$i(["performance-panel",`position-${er(n)}`,{expanded:r.value}])},[C("div",{class:"perf-header",onClick:$[0]||($[0]=Le=>r.value=!r.value)},[C("div",rF,[C("div",{class:$i(["perf-indicator",{active:er(s)}])},null,2),$[1]||($[1]=C("span",null,"Performance",-1))]),C("div",iF,[C("span",sF,Tt(O.value.fps)+" FPS",1),C("span",oF,Tt(me(O.value.averageDuration))+"ms",1)]),C("button",aF,Tt(r.value?"":""),1)]),r.value?(Re(),$e("div",lF,[C("div",uF,[$[6]||($[6]=C("h3",null,"Mtriques gnrales",-1)),C("div",cF,[C("div",hF,[$[2]||($[2]=C("span",{class:"perf-metric-label"},"Mesures",-1)),C("span",dF,Tt(O.value.totalMeasures),1)]),C("div",fF,[$[3]||($[3]=C("span",{class:"perf-metric-label"},"Tches longues",-1)),C("span",pF,Tt(O.value.totalLongTasks),1)]),C("div",gF,[$[4]||($[4]=C("span",{class:"perf-metric-label"},"Dure moyenne",-1)),C("span",mF,Tt(me(O.value.averageDuration))+"ms",1)]),C("div",vF,[$[5]||($[5]=C("span",{class:"perf-metric-label"},"FPS",-1)),C("span",yF,Tt(O.value.fps),1)])])]),C("div",bF,[$[10]||($[10]=C("h3",null,"Mmoire",-1)),C("div",_F,[((R=O.value.memoryUsage)==null?void 0:R.usedJSHeapSize)!==void 0?(Re(),$e("div",wF,[$[7]||($[7]=C("span",{class:"perf-metric-label"},"Utilise",-1)),C("span",xF,Tt(ne((U=O.value.memoryUsage)==null?void 0:U.usedJSHeapSize)),1)])):rn("",!0),((V=O.value.memoryUsage)==null?void 0:V.totalJSHeapSize)!==void 0?(Re(),$e("div",LF,[$[8]||($[8]=C("span",{class:"perf-metric-label"},"Totale",-1)),C("span",SF,Tt(ne((re=O.value.memoryUsage)==null?void 0:re.totalJSHeapSize)),1)])):rn("",!0),((J=O.value.memoryUsage)==null?void 0:J.jsHeapSizeLimit)!==void 0?(Re(),$e("div",CF,[$[9]||($[9]=C("span",{class:"perf-metric-label"},"Limite",-1)),C("span",EF,Tt(ne((_e=O.value.memoryUsage)==null?void 0:_e.jsHeapSizeLimit)),1)])):rn("",!0)])]),C("div",PF,[$[13]||($[13]=C("h3",null,"Oprations les plus lentes",-1)),C("div",MF,[$[12]||($[12]=Jl('<div class="perf-table-header" data-v-fefe39b0><div class="perf-table-cell" data-v-fefe39b0>Opration</div><div class="perf-table-cell" data-v-fefe39b0>Composant</div><div class="perf-table-cell" data-v-fefe39b0>Dure</div><div class="perf-table-cell" data-v-fefe39b0>Actions</div></div>',1)),(Re(!0),$e(Cn,null,pr(z.value,Le=>(Re(),$e("div",{class:"perf-table-row",key:Le.timestamp},[C("div",kF,Tt(Le.operation),1),C("div",AF,Tt(Le.component),1),C("div",TF,Tt(me(Le.durationMs))+"ms",1),C("div",DF,[C("button",{onClick:Oe=>I(Le),class:"perf-action-button",title:"Copier les dtails"},$[11]||($[11]=[C("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,OF)])]))),128)),z.value.length===0?(Re(),$e("div",NF," Aucune opration enregistre ")):rn("",!0)])]),C("div",{class:"perf-actions"},[C("button",{onClick:j,class:"perf-button"}," Rinitialiser "),C("button",{onClick:N,class:"perf-button"}," Tlcharger "),C("button",{onClick:q,class:"perf-button"}," Copier ")])])):rn("",!0)],2)):rn("",!0)}}}),jh=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},BF=jh(IF,[["__scopeId","data-v-fefe39b0"]]),RF={key:0,class:"pwa-update-notification"},FF=Fs({__name:"PWAUpdateNotification",setup(t,{expose:e}){const n=xt(!1),r=async()=>{window.location.reload(),n.value=!1},i=()=>{n.value=!1};return e({showUpdateNotification:n,refreshApp:r,closeNotification:i}),(s,o)=>n.value?(Re(),$e("div",RF,[C("div",{class:"pwa-update-content"},[o[0]||(o[0]=C("p",null,"Une nouvelle version est disponible",-1)),C("div",{class:"pwa-update-actions"},[C("button",{onClick:r,class:"pwa-update-button"},"Mettre  jour"),C("button",{onClick:i,class:"pwa-close-button"},"Plus tard")])])])):rn("",!0)}}),jF=jh(FF,[["__scopeId","data-v-aa687693"]]),zF="/static/frontend/img/icons/android-chrome-192x192.png",$F={class:"prompt-content"},VF={class:"prompt-body"},UF={key:0,class:"install-instructions ios"},HF={key:1,class:"install-instructions android"},WF={key:2,class:"install-instructions desktop"},GF={key:3,class:"install-instructions desktop"},qF=Fs({__name:"PWAInstallPrompt",setup(t){const e=xt(!1),n=xt(!1),r=xt(null);xt(null);const i=xt(!1),s=xt(!1),o=xt(!1),a=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,l=()=>{const m=localStorage.getItem("pwaPromptLastClosed");if(!m)return!1;const x=3*24*60*60*1e3;return Date.now()-parseInt(m)<x},c=()=>{i.value=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,s.value=/Android/.test(navigator.userAgent),o.value=!i.value&&!s.value,window.addEventListener("beforeinstallprompt",m=>{m.preventDefault(),r.value=m,e.value=!0,n.value=!0}),window.addEventListener("appinstalled",m=>{console.log("Application installe avec succs",m),e.value=!1}),!a()&&(l()||setTimeout(()=>{e.value=!0,n.value=!0},3e3))},d=()=>{window.removeEventListener("beforeinstallprompt",()=>{}),window.removeEventListener("appinstalled",()=>{})};fo(()=>{c()}),Td(()=>{d()});const p=async()=>{if(!r.value){console.log("Installation non disponible");return}try{r.value.prompt();const m=await r.value.userChoice;r.value=null,m.outcome==="accepted"?(console.log("Installation accepte"),e.value=!1):console.log("Installation refuse")}catch(m){console.error("Erreur lors de l'installation:",m)}},v=()=>{e.value=!1,localStorage.setItem("pwaPromptLastClosed",Date.now().toString())};return(m,x)=>e.value?(Re(),$e("div",{key:0,class:$i(["pwa-install-prompt",{fullscreen:n.value}])},[C("div",$F,[C("div",{class:"prompt-header"},[x[1]||(x[1]=C("div",{class:"app-info"},[C("img",{src:zF,alt:"TagMap Logo",class:"app-logo"}),C("div",{class:"app-details"},[C("h2",null,"Installer TagMap"),C("p",null,"Solution innovante de cartographie et gestion de projets")])],-1)),C("button",{onClick:v,class:"close-button","aria-label":"Fermer"},x[0]||(x[0]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[C("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),C("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),C("div",VF,[i.value?(Re(),$e("div",UF,x[2]||(x[2]=[Jl('<h3 data-v-48772823>Pour installer l&#39;application sur votre iPhone :</h3><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>1</div><div class="step-content" data-v-48772823><p data-v-48772823>Appuyez sur <strong data-v-48772823>Partager</strong> <span class="ios-share-icon" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" data-v-48772823></path><polyline points="16 6 12 2 8 6" data-v-48772823></polyline><line x1="12" y1="2" x2="12" y2="15" data-v-48772823></line></svg></span></p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>2</div><div class="step-content" data-v-48772823><p data-v-48772823>Faites dfiler et appuyez sur <strong data-v-48772823>Sur l&#39;cran d&#39;accueil</strong></p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>3</div><div class="step-content" data-v-48772823><p data-v-48772823>Appuyez sur <strong data-v-48772823>Ajouter</strong> en haut  droite</p></div></div>',4)]))):s.value?(Re(),$e("div",HF,[x[3]||(x[3]=C("h3",null,"Pour installer l'application sur votre appareil :",-1)),x[4]||(x[4]=C("div",{class:"instruction-step"},[C("div",{class:"step-number"},"1"),C("div",{class:"step-content"},[C("p",null,"Appuyez sur le bouton ci-dessous")])],-1)),C("button",{onClick:p,class:"install-button"}," Installer l'application ")])):o.value?(Re(),$e("div",WF,[x[5]||(x[5]=C("h3",null,"Pour installer l'application sur votre ordinateur :",-1)),x[6]||(x[6]=C("div",{class:"instruction-step"},[C("div",{class:"step-number"},"1"),C("div",{class:"step-content"},[C("p",null,"Cliquez sur le bouton ci-dessous pour installer l'application")])],-1)),C("button",{onClick:p,class:"install-button"}," Installer l'application ")])):(Re(),$e("div",GF,x[7]||(x[7]=[Jl('<h3 data-v-48772823>Pour installer l&#39;application sur votre ordinateur :</h3><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>1</div><div class="step-content" data-v-48772823><p data-v-48772823>Cliquez sur l&#39;icne d&#39;installation dans la barre d&#39;adresse</p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>2</div><div class="step-content" data-v-48772823><p data-v-48772823>Cliquez sur &quot;Installer&quot;</p></div></div>',3)])))]),C("div",{class:"prompt-footer"},[x[8]||(x[8]=Jl('<div class="benefits" data-v-48772823><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" data-v-48772823></path></svg><span data-v-48772823>Scuris</span></div><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><circle cx="12" cy="12" r="10" data-v-48772823></circle><polyline points="12 6 12 12 16 14" data-v-48772823></polyline></svg><span data-v-48772823>Rapide</span></div><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" data-v-48772823></path></svg><span data-v-48772823>Hors ligne</span></div></div>',1)),C("button",{onClick:v,class:"remind-later"},"Me le rappeler plus tard")])])],2)):rn("",!0)}}),YF=jh(qF,[["__scopeId","data-v-48772823"]]),KF={class:"h-screen flex flex-col"},ZF={key:0,class:"bg-white shadow-sm z-[2500] flex-shrink-0"},XF={class:"mx-auto px-4 sm:px-6 lg:px-8"},JF={class:"flex h-16 items-center justify-between"},QF={class:"flex items-center"},e9={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},t9={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},n9={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},r9={class:"hidden md:flex md:ml-6 space-x-8"},i9={key:0,class:"flex-1 mx-2"},s9={class:"hidden md:block"},o9={class:"md:hidden"},a9={key:1,class:"flex-1"},l9={class:"flex items-center space-x-2 md:space-x-4"},u9={class:"relative"},c9={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},h9={class:"flex items-center justify-between w-full"},d9={class:"flex items-center space-x-3"},f9={class:"max-h-72 overflow-y-auto"},p9={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},g9={class:"flex items-start"},m9={class:"flex-shrink-0 mr-3"},v9={key:0,class:"h-6 w-6 md:h-5 md:w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},y9={key:1,class:"h-6 w-6 md:h-5 md:w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},b9={key:2,class:"h-6 w-6 md:h-5 md:w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},_9={key:3,class:"h-6 w-6 md:h-5 md:w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},w9={class:"flex-1"},x9={class:"text-sm md:text-sm text-gray-800"},L9=["onClick"],S9={class:"relative"},C9={class:"hidden md:flex flex-col items-end"},E9={class:"text-sm font-medium text-gray-700"},P9={key:0,class:"text-xs text-gray-500"},M9=["src","alt"],k9={class:"md:hidden px-4 py-2 border-b border-gray-100 flex justify-between items-center"},A9={class:"text-sm font-semibold text-gray-700"},T9={class:"text-xs text-gray-500"},D9={key:0,class:"md:hidden fixed inset-0 bg-white shadow-lg z-[3000] border-t border-gray-200",style:{top:"var(--header-height)"}},O9={class:"space-y-1 px-2 pb-3 pt-2"},N9=Fs({__name:"App",setup(t){const e=Nm(),n=da(),r=tu(),i=xt(!1),s=xt(!1),o=xt(!1),a=xt(!1),l=xt(null),c=xt(!1),d=xt(!1),p=xt(null),v=xt("13px"),m=xt("65px"),x=xt(null),E=xt(null),M=xt(!1);function A(){d.value=window.innerWidth<768}fo(()=>{A(),window.addEventListener("resize",A),window.addEventListener("resize",O),window.addEventListener("pwa-update-available",()=>{M.value=!0})}),Td(()=>{window.removeEventListener("resize",A),window.removeEventListener("resize",O),window.removeEventListener("pwa-update-available",()=>{})});function O(){if(!p.value)return;const U=p.value.getBoundingClientRect();v.value=`${U.top+window.scrollY+5}px`;const V=U.left+U.width/2;m.value=`${window.innerWidth-V-22}px`}const z=Kn(()=>{const U=n.user;if(!U)return"";const V=`${U.first_name} ${U.last_name.toUpperCase()}`;return U.company_name?`${V} (${U.company_name})`:V}),K=Kn(()=>{var V;switch((V=n.user)==null?void 0:V.user_type){case"admin":return"Accs administrateur";case"entreprise":return"Accs entreprise";case"salarie":return"Accs salarie";case"visiteur":return"Accs visiteur";default:return""}}),ne=Kn(()=>{var U;return((U=n.user)==null?void 0:U.user_type)==="admin"}),me=Kn(()=>n.isAuthenticated),pe=[{name:"Carte",to:"/"},{name:"Mto",to:"/meteo"},{name:"Notes",to:"/notes"}],N=Kn(()=>{var V;if(!me.value)return[];const U=[...pe];return(ne.value||((V=n.user)==null?void 0:V.user_type)==="entreprise")&&U.push({name:"Utilisateurs",to:"/users"}),U}),j=Kn(()=>me.value?[{name:"Mon profil",to:"/profile"}]:[]);async function q(){try{await n.logout(),e.push("/login")}catch(U){console.error("Erreur lors de la dconnexion:",U)}}function I(U){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:U.lat,lng:U.lng,zoom:16}}))}fo(async()=>{console.log("App mounted, checking auth...");try{if(localStorage.getItem("token")){console.log("Token found, checking auth..."),await n.checkAuth(),await n.fetchUserProfile();const V=localStorage.getItem("lastPlanId");V&&window.dispatchEvent(new CustomEvent("load-last-plan",{detail:{planId:V}}))}else console.log("No token found")}catch(U){console.error("Auth check error:",U),e.push("/login")}});const B=Kn(()=>{const U="TagMap";if(!me.value)return`${U} - Connexion`;const V=e.currentRoute.value,J={home:"Carte",meteo:"Mto",notes:"Notes",users:"Utilisateurs",profile:"Mon profil",changePassword:"Changement de mot de passe",map:"Carte"}[V.name]||"";return J?`${U} - ${J}`:U});Di(B,U=>{document.title=U},{immediate:!0});const $=Kn(()=>r.notifications.length);function R(){r.clearAll(),o.value=!1}return dm(()=>{if(r.lastAddedId!==null){const U=r.notifications.find(V=>V.id===r.lastAddedId);U&&la(()=>{O(),a.value=!0,l.value={id:U.id,message:U.message,type:U.type},requestAnimationFrame(()=>{setTimeout(()=>{c.value=!0,setTimeout(()=>{c.value=!1,setTimeout(()=>{var V;((V=l.value)==null?void 0:V.id)===U.id&&(l.value=null,a.value=!1)},300)},4e3)},50)})})}}),(U,V)=>{var re;return Re(),$e("div",KF,[me.value?(Re(),$e("header",ZF,[C("nav",XF,[C("div",JF,[C("div",QF,[C("button",{onClick:V[0]||(V[0]=J=>s.value=!s.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden"},[V[7]||(V[7]=C("span",{class:"sr-only"},"Ouvrir le menu",-1)),(Re(),$e("svg",e9,[s.value?(Re(),$e("path",n9)):(Re(),$e("path",t9))]))]),pi(er(_g),{to:"/",class:"text-xl font-semibold text-primary-600 truncate ml-2 md:ml-0"},{default:Wu(()=>V[8]||(V[8]=[C("span",{class:"md:inline hidden"},"TagMap",-1),C("span",{class:"md:hidden inline"},"TM",-1)])),_:1}),C("div",r9,[(Re(!0),$e(Cn,null,pr(N.value,J=>(Re(),$a(er(_g),{key:J.name,to:J.to,class:$i(["text-sm font-medium transition-colors duration-200",[U.$route.path===J.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Wu(()=>[si(Tt(J.name),1)]),_:2},1032,["to","class"]))),128))])]),U.$route.path==="/"?(Re(),$e("div",i9,[C("div",s9,[pi(J4,{onSelectLocation:I})]),C("div",o9,[pi(J4,{onSelectLocation:I,class:"max-w-full"})])])):(Re(),$e("div",a9)),C("div",l9,[C("div",u9,[C("button",{ref_key:"bellButtonRef",ref:p,onClick:V[1]||(V[1]=J=>o.value=!o.value),class:$i(["relative flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"animate-bell":a.value}])},V[9]||(V[9]=[C("span",{class:"sr-only"},"Voir les notifications",-1),C("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)]),2),o.value?(Re(),$e("div",{key:0,class:"absolute right-0 mt-2 md:w-80 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:Ql(d.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[C("div",c9,[C("div",h9,[V[11]||(V[11]=C("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),C("div",d9,[$.value>0?(Re(),$e("button",{key:0,onClick:R,class:"text-xs text-primary-600 hover:text-primary-800"}," Tout effacer ")):rn("",!0),C("button",{onClick:V[2]||(V[2]=J=>o.value=!1),class:"md:hidden p-1 rounded-full hover:bg-gray-100"},V[10]||(V[10]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),C("div",f9,[$.value===0?(Re(),$e("div",p9," Aucune notification ")):rn("",!0),(Re(!0),$e(Cn,null,pr(er(r).notifications,J=>(Re(),$e("div",{key:J.id,class:"px-4 py-3 md:py-3 py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50"},[C("div",g9,[C("div",m9,[J.type==="success"?(Re(),$e("svg",v9,V[12]||(V[12]=[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):J.type==="error"?(Re(),$e("svg",y9,V[13]||(V[13]=[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):J.type==="warning"?(Re(),$e("svg",b9,V[14]||(V[14]=[C("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(Re(),$e("svg",_9,V[15]||(V[15]=[C("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))]),C("div",w9,[C("p",x9,Tt(J.message),1),C("button",{onClick:_e=>er(r).removeNotification(J.id),class:"text-xs md:text-xs text-primary-600 hover:text-primary-800 mt-2 md:mt-1 py-1 md:py-0"}," Fermer ",8,L9)])])]))),128))])],4)):rn("",!0)]),C("div",S9,[C("button",{onClick:V[3]||(V[3]=J=>i.value=!i.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[C("div",C9,[C("span",E9,Tt(z.value),1),K.value?(Re(),$e("span",P9,Tt(K.value),1)):rn("",!0)]),C("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:((re=er(n).user)==null?void 0:re.logo)||"https://ui-avatars.com/api/?name="+encodeURIComponent(z.value),alt:z.value},null,8,M9)]),i.value?(Re(),$e("div",{key:0,class:"absolute right-0 mt-2 md:w-48 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:Ql(d.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[C("div",k9,[C("div",null,[C("div",A9,Tt(z.value),1),C("div",T9,Tt(K.value),1)]),C("button",{onClick:V[4]||(V[4]=J=>i.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},V[16]||(V[16]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),(Re(!0),$e(Cn,null,pr(j.value,J=>(Re(),$a(er(_g),{key:J.name,to:J.to,class:"block px-4 md:py-2 py-3 text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",onClick:V[5]||(V[5]=_e=>i.value=!1)},{default:Wu(()=>[si(Tt(J.name),1)]),_:2},1032,["to"]))),128)),C("button",{onClick:q,class:"block w-full px-4 md:py-2 py-3 text-left text-sm text-red-600 hover:bg-gray-50 font-medium"}," Dconnexion ")],4)):rn("",!0)])])]),s.value?(Re(),$e("div",D9,[C("div",O9,[(Re(!0),$e(Cn,null,pr(N.value,J=>(Re(),$a(er(_g),{key:J.name,to:J.to,class:$i(["block px-3 py-2 rounded-md text-base font-medium",[U.$route.path===J.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:V[6]||(V[6]=_e=>s.value=!1)},{default:Wu(()=>[si(Tt(J.name),1)]),_:2},1032,["to","class"]))),128))])])):rn("",!0)])])):rn("",!0),C("main",{class:$i([U.$route.path==="/"&&!d.value?"overflow-hidden":"overflow-auto","flex-1 flex flex-col","md:h-[calc(100vh-64px)]"])},[pi(er(bE))],2),pi(BF,{position:"bottom-left"}),pi(jF,{ref_key:"pwaUpdateNotification",ref:x},null,512),pi(YF,{ref_key:"pwaInstallPrompt",ref:E},null,512)])}}}),I9="modulepreload",B9=function(t){return"/static/frontend/"+t},Q4={},Mh=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=B9(l),l in Q4)return;Q4[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":I9,c||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),c)return new Promise((v,m)=>{p.addEventListener("load",v),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},R9={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},F9={class:"max-w-md w-full space-y-8"},j9={class:"space-y-4"},z9={class:"mt-1"},$9={class:"mt-1"},V9={class:"mt-1"},U9={key:0,class:"rounded-md bg-red-50 p-4"},H9={class:"flex"},W9={class:"ml-3"},G9={class:"text-sm font-medium text-red-800"},q9={key:1,class:"rounded-md bg-yellow-50 p-4"},Y9={class:"flex"},K9={class:"ml-3"},Z9={class:"mt-2 text-sm text-yellow-700"},X9={class:"list-disc pl-5 space-y-1"},J9=["disabled"],Q9={class:"absolute left-0 inset-y-0 flex items-center pl-3"},ej={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},tj={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},nj=Fs({__name:"ChangePasswordForm",setup(t){const e=Nm(),n=da(),r=nu({oldPassword:"",newPassword:"",confirmPassword:""}),i=xt(!1),s=xt("");fo(()=>{var c,d;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:n.isAuthenticated,userId:(c=n.user)==null?void 0:c.id,mustChangePassword:(d=n.user)==null?void 0:d.must_change_password})});const o=Kn(()=>{const c=[];return r.newPassword&&r.newPassword.length<8&&c.push("Le nouveau mot de passe doit contenir au moins 8 caractres"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&c.push("Les mots de passe ne correspondent pas"),c}),a=Kn(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function l(){var c,d,p,v,m,x,E,M;if(!a.value){s.value="Veuillez corriger les erreurs avant de continuer";return}if(!((c=n.user)!=null&&c.id)){s.value="Erreur : utilisateur non identifi";return}i.value=!0,s.value="";try{console.log("Submitting password change..."),await n.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),e.push("/")}catch(A){console.error("Password change failed:",A),(p=(d=A.response)==null?void 0:d.data)!=null&&p.detail?s.value=A.response.data.detail:(m=(v=A.response)==null?void 0:v.data)!=null&&m.old_password?s.value=A.response.data.old_password[0]:(E=(x=A.response)==null?void 0:x.data)!=null&&E.password?s.value=A.response.data.password[0]:((M=A.response)==null?void 0:M.status)===401?(s.value="Session expire, veuillez vous reconnecter",await n.logout(),e.push("/login")):s.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(c,d)=>(Re(),$e("div",R9,[C("div",F9,[d[12]||(d[12]=C("div",null,[C("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),C("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de scurit, vous devez changer votre mot de passe. ")],-1)),C("form",{class:"mt-8 space-y-6",onSubmit:Bh(l,["prevent"])},[C("div",j9,[C("div",null,[d[3]||(d[3]=C("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),C("div",z9,[Pn(C("input",{id:"old-password","onUpdate:modelValue":d[0]||(d[0]=p=>r.oldPassword=p),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[Rr,r.oldPassword]])])]),C("div",null,[d[4]||(d[4]=C("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),C("div",$9,[Pn(C("input",{id:"new-password","onUpdate:modelValue":d[1]||(d[1]=p=>r.newPassword=p),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[Rr,r.newPassword]])]),d[5]||(d[5]=C("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractres ",-1))]),C("div",null,[d[6]||(d[6]=C("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),C("div",V9,[Pn(C("input",{id:"confirm-password","onUpdate:modelValue":d[2]||(d[2]=p=>r.confirmPassword=p),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[Rr,r.confirmPassword]])])])]),s.value?(Re(),$e("div",U9,[C("div",H9,[d[7]||(d[7]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",W9,[C("h3",G9,Tt(s.value),1)])])])):rn("",!0),o.value.length>0?(Re(),$e("div",q9,[C("div",Y9,[d[9]||(d[9]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),C("div",K9,[d[8]||(d[8]=C("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),C("div",Z9,[C("ul",X9,[(Re(!0),$e(Cn,null,pr(o.value,(p,v)=>(Re(),$e("li",{key:v},Tt(p),1))),128))])])])])])):rn("",!0),C("div",null,[C("button",{type:"submit",disabled:i.value||!a.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[C("span",Q9,[i.value?(Re(),$e("svg",tj,d[11]||(d[11]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Re(),$e("svg",ej,d[10]||(d[10]=[C("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),si(" "+Tt(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,J9)])],32)])]))}}),rj="/static/frontend/assets/background.svg",ij={class:"min-h-screen overflow-auto relative py-12 sm:px-6 lg:px-8"},sj={class:"container mx-auto relative z-10"},oj={class:"sm:mx-auto sm:w-full sm:max-w-md"},aj={class:"bg-white/95 backdrop-blur-sm py-8 px-6 shadow-xl rounded-xl sm:px-10 border border-white/20"},lj={key:0,class:"rounded-md bg-red-50 p-4"},uj={class:"flex"},cj={class:"ml-3"},hj={class:"text-sm font-medium text-red-800"},dj={class:"mt-1"},fj={class:"mt-1 relative"},pj=["type"],gj={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},mj={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},vj={class:"flex items-center justify-between"},yj={class:"flex items-center"},bj={class:"text-sm"},_j=["disabled"],wj={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},xj={class:"mt-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Lj={class:"mt-12"},Sj={class:"flex flex-wrap justify-center gap-2 mb-8"},Cj=["onClick"],Ej={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Pj={class:"flex items-center mb-4"},Mj={class:"text-2xl mr-2"},kj={class:"text-xl font-semibold text-gray-900"},Aj={class:"text-gray-600 text-sm"},Tj={key:0,class:"flex justify-center mt-8 gap-2"},Dj=["onClick"],Z1=6,Oj=Fs({__name:"LoginView",setup(t){const e=Nm(),n=da(),r=xt(!1),i=xt(null),s=xt(!1),o=xt("Tous"),a=xt(1),l=nu({username:"",password:"",rememberMe:!1}),c=[{type:"Liniculteur",sector:"Agriculture",icon:"",text:"En tant qu'entreprise, j'ai mis en place un sous-compte  agriculteur  permettant la golocalisation des parcelles. Cela offre  nos salaris et prestataires une visibilit complte sur l'ensemble des parcelles et facilite leur accs. De plus, ils peuvent y ajouter des notes et des photos si ncessaire. Grce aux trackers, nous renforons galement la scurit de nos machines contre le vol."},{type:"Agro industriel",sector:"Industrie",icon:"",text:"La gestion des comptes et sous-comptes est un atout majeur pour limiter, filtrer et contrler l'accs de nos salaris aux diffrentes tches."},{type:"Agence de voyage",sector:"Tourisme",icon:"",text:"L'outil nous permet de crer gratuitement et sans limite des sous-comptes clients, d'tablir des itinraires personnaliss avec des points d'intrt."},{type:"Industriel agroalimentaire",sector:"Industrie",icon:"",text:"Nous disposons d'un compte entreprise avec des sous-comptes ddis  chaque culture. Nos techniciens et agriculteurs partenaires peuvent ainsi ajouter des annotations et photo sur les parcelles. Grce aux stations mto connectes, nous optimisons la gestion des tours d'irrigation par secteur gographique en fonction des prcipitations."},{type:"Conseil municipal",sector:"Collectivit",icon:"",text:"Cette solution nous permet de gagner en efficacit dans la gestion des tches  raliser, en les golocalisant et en offrant  nos employs communaux la possibilit d'ajouter des commentaires et des photos sur chaque tche gorfrence."},{type:"Location de matriel",sector:"Services",icon:"",text:"Cette solution nous permet de golocaliser notre flotte grce  des trackers sans abonnement, avec uniquement un abonnement  la plateforme."},{type:"Agriculteur",sector:"Agriculture",icon:"",text:"J'ai quip tous mes canons d'enrouleurs de trackers et de camras pour dissuader le vol de batteries."},{type:"Semencier",sector:"Agriculture",icon:"",text:"Nous assurons la golocalisation de l'ensemble de nos parcelles en France."},{type:"Concessionnaire irrigation",sector:"Services",icon:"",text:"Nous avons golocalis tous les forages de nos clients et ajout en commentaire la procdure d'entre, facilitant ainsi le travail de nos techniciens et agriculteurs lors des interventions."},{type:"Entreprise paysagiste",sector:"Services",icon:"",text:"Nous golocalisons tous nos chantiers et ajoutons une photo du chantier termin en commentaire, servant de preuve en cas de litige."}],d=Kn(()=>["Tous",...new Set(c.map(E=>E.sector))]),p=Kn(()=>{let x=o.value==="Tous"?c:c.filter(A=>A.sector===o.value);const E=(a.value-1)*Z1,M=E+Z1;return x.slice(E,M)}),v=Kn(()=>{const x=o.value==="Tous"?c:c.filter(E=>E.sector===o.value);return Math.ceil(x.length/Z1)});fo(async()=>{var x;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE);try{if((x=window.INITIAL_STATE)!=null&&x.isAuthenticated){console.log("User is authenticated, redirecting to home"),e.push("/");return}await n.restoreSession()&&(console.log("Session restored, redirecting to home"),e.push("/"))}catch(E){console.error("Error during initialization:",E),i.value=null}});async function m(){var x,E,M,A,O,z,K,ne,me;r.value=!0,i.value=null;try{if(!l.username||!l.password){i.value="Veuillez remplir tous les champs";return}await n.login(l.username,l.password),(x=n.user)!=null&&x.must_change_password?e.push("/change-password"):e.push("/")}catch(pe){console.error("Login error:",pe),((E=pe==null?void 0:pe.response)==null?void 0:E.status)===500?i.value="Le service est temporairement indisponible. Veuillez ressayer dans quelques instants.":((M=pe==null?void 0:pe.response)==null?void 0:M.status)===401||((A=pe==null?void 0:pe.response)==null?void 0:A.status)===403?i.value="Identifiants incorrects. Veuillez vrifier votre nom d'utilisateur et mot de passe.":(z=(O=pe==null?void 0:pe.response)==null?void 0:O.data)!=null&&z.detail?i.value=pe.response.data.detail:(me=(ne=(K=pe==null?void 0:pe.response)==null?void 0:K.data)==null?void 0:ne.non_field_errors)!=null&&me[0]?i.value=pe.response.data.non_field_errors[0]:(pe==null?void 0:pe.message)==="Network Error"?i.value="Impossible de se connecter au serveur. Veuillez vrifier votre connexion internet.":i.value="Une erreur est survenue lors de la connexion. Veuillez ressayer."}finally{r.value=!1}}return(x,E)=>{const M=_S("router-link");return Re(),$e("div",ij,[C("div",{class:"fixed inset-0 z-0",style:Ql({backgroundImage:`url(${er(rj)})`,backgroundSize:"400px",backgroundRepeat:"repeat",filter:"blur(1px) opacity(0.15)"})},null,4),E[16]||(E[16]=C("div",{class:"fixed inset-0 z-0 bg-gradient-to-br from-white/40 via-transparent to-primary-900/10"},null,-1)),C("div",sj,[C("div",oj,[C("div",aj,[E[12]||(E[12]=C("div",{class:"text-center mb-8"},[C("h2",{class:"text-3xl font-bold text-gray-900 mb-2"}," TagMap "),C("p",{class:"text-sm text-gray-600"}," Solution innovante de cartographie et gestion de projets ")],-1)),C("form",{class:"space-y-6",onSubmit:Bh(m,["prevent"])},[i.value?(Re(),$e("div",lj,[C("div",uj,[E[4]||(E[4]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",cj,[C("h3",hj,Tt(i.value),1)])])])):rn("",!0),C("div",null,[E[5]||(E[5]=C("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),C("div",dj,[Pn(C("input",{id:"username","onUpdate:modelValue":E[0]||(E[0]=A=>l.username=A),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[Rr,l.username]])])]),C("div",null,[E[8]||(E[8]=C("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),C("div",fj,[Pn(C("input",{id:"password","onUpdate:modelValue":E[1]||(E[1]=A=>l.password=A),type:s.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,pj),[[D_,l.password]]),C("button",{type:"button",onClick:E[2]||(E[2]=A=>s.value=!s.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[s.value?(Re(),$e("svg",gj,E[6]||(E[6]=[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(Re(),$e("svg",mj,E[7]||(E[7]=[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),C("div",vj,[C("div",yj,[Pn(C("input",{id:"remember-me","onUpdate:modelValue":E[3]||(E[3]=A=>l.rememberMe=A),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[El,l.rememberMe]]),E[9]||(E[9]=C("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),C("div",bj,[pi(M,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Wu(()=>E[10]||(E[10]=[si(" Mot de passe oubli ? ")])),_:1})])]),C("div",null,[C("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(Re(),$e("svg",wj,E[11]||(E[11]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):rn("",!0),si(" "+Tt(r.value?"Connexion en cours...":"Se connecter"),1)],8,_j)])],32)])]),C("div",xj,[E[14]||(E[14]=Jl('<div class="mb-12 bg-white/90 backdrop-blur-sm p-8 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-6" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-xl font-bold text-gray-900" data-v-9ff7ee32>quipements Connects sans Abonnement</h3></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-v-9ff7ee32><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32></div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Tracker GPS solaire</h4><p class="text-gray-600" data-v-9ff7ee32>Golocalisez et scurisez votre matriel</p></div></div><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32></div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Station mto</h4><p class="text-gray-600" data-v-9ff7ee32>Optimisez vos dcisions avec des donnes en temps rel</p></div></div></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8" data-v-9ff7ee32><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Carte Interactive</h3></div><p class="text-gray-600" data-v-9ff7ee32>Imaginez... Une carte interactive o tout est sous contrle ! Tout est centralis, organis et accessible en un clin d&#39;il !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Collaboration en Temps Rel</h3></div><p class="text-gray-600" data-v-9ff7ee32>Travail d&#39;quipe simplifi : Collaborez en temps rel sur une interface ultra-intuitive. Vos quipes restent synchronises et efficaces !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Cerveau Cartographique</h3></div><p class="text-gray-600" data-v-9ff7ee32>Un cerveau cartographique : Dessinez, annotez, planifiez, suivez !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Accs Scuris</h3></div><p class="text-gray-600" data-v-9ff7ee32>Accs scuris et intelligent : Grez les droits d&#39;accs de vos salaris et prestataires en un clic.</p></div></div>',2)),C("div",Lj,[E[13]||(E[13]=C("h3",{class:"text-2xl font-bold text-center text-gray-900 mb-8"},"Ils utilisent TagMap",-1)),C("div",Sj,[(Re(!0),$e(Cn,null,pr(d.value,A=>(Re(),$e("button",{key:A,onClick:O=>o.value=A,class:$i(["px-4 py-2 rounded-full text-sm font-medium transition-all duration-200",o.value===A?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},Tt(A),11,Cj))),128))]),C("div",Ej,[(Re(!0),$e(Cn,null,pr(p.value,A=>(Re(),$e("div",{key:A.type,class:"bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20 transition-all duration-300 hover:shadow-xl"},[C("div",Pj,[C("span",Mj,Tt(A.icon),1),C("span",kj,Tt(A.type),1)]),C("p",Aj,Tt(A.text),1)]))),128))]),v.value>1?(Re(),$e("div",Tj,[(Re(!0),$e(Cn,null,pr(v.value,A=>(Re(),$e("button",{key:A,onClick:O=>a.value=A,class:$i(["w-8 h-8 rounded-full text-sm font-medium transition-all duration-200",a.value===A?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},Tt(A),11,Dj))),128))])):rn("",!0)])]),E[15]||(E[15]=C("div",{class:"h-16"},null,-1))])])}}}),Nj=jh(Oj,[["__scopeId","data-v-9ff7ee32"]]),e5="/static/frontend/assets/logo.svg";var mb={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Sa,function(n){var r="1.9.4";function i(u){var y,P,W,le;for(P=1,W=arguments.length;P<W;P++){le=arguments[P];for(y in le)u[y]=le[y]}return u}var s=Object.create||function(){function u(){}return function(y){return u.prototype=y,new u}}();function o(u,y){var P=Array.prototype.slice;if(u.bind)return u.bind.apply(u,P.call(arguments,1));var W=P.call(arguments,2);return function(){return u.apply(y,W.length?W.concat(P.call(arguments)):arguments)}}var a=0;function l(u){return"_leaflet_id"in u||(u._leaflet_id=++a),u._leaflet_id}function c(u,y,P){var W,le,Pe,lt;return lt=function(){W=!1,le&&(Pe.apply(P,le),le=!1)},Pe=function(){W?le=arguments:(u.apply(P,arguments),setTimeout(lt,y),W=!0)},Pe}function d(u,y,P){var W=y[1],le=y[0],Pe=W-le;return u===W&&P?u:((u-le)%Pe+Pe)%Pe+le}function p(){return!1}function v(u,y){if(y===!1)return u;var P=Math.pow(10,y===void 0?6:y);return Math.round(u*P)/P}function m(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function x(u){return m(u).split(/\s+/)}function E(u,y){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?s(u.options):{});for(var P in y)u.options[P]=y[P];return u.options}function M(u,y,P){var W=[];for(var le in u)W.push(encodeURIComponent(P?le.toUpperCase():le)+"="+encodeURIComponent(u[le]));return(!y||y.indexOf("?")===-1?"?":"&")+W.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function O(u,y){return u.replace(A,function(P,W){var le=y[W];if(le===void 0)throw new Error("No value provided for variable "+P);return typeof le=="function"&&(le=le(y)),le})}var z=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function K(u,y){for(var P=0;P<u.length;P++)if(u[P]===y)return P;return-1}var ne="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function me(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var pe=0;function N(u){var y=+new Date,P=Math.max(0,16-(y-pe));return pe=y+P,window.setTimeout(u,P)}var j=window.requestAnimationFrame||me("RequestAnimationFrame")||N,q=window.cancelAnimationFrame||me("CancelAnimationFrame")||me("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function I(u,y,P){if(P&&j===N)u.call(y);else return j.call(window,o(u,y))}function B(u){u&&q.call(window,u)}var $={__proto__:null,extend:i,create:s,bind:o,get lastId(){return a},stamp:l,throttle:c,wrapNum:d,falseFn:p,formatNum:v,trim:m,splitWords:x,setOptions:E,getParamString:M,template:O,isArray:z,indexOf:K,emptyImageUrl:ne,requestFn:j,cancelFn:q,requestAnimFrame:I,cancelAnimFrame:B};function R(){}R.extend=function(u){var y=function(){E(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},P=y.__super__=this.prototype,W=s(P);W.constructor=y,y.prototype=W;for(var le in this)Object.prototype.hasOwnProperty.call(this,le)&&le!=="prototype"&&le!=="__super__"&&(y[le]=this[le]);return u.statics&&i(y,u.statics),u.includes&&(U(u.includes),i.apply(null,[W].concat(u.includes))),i(W,u),delete W.statics,delete W.includes,W.options&&(W.options=P.options?s(P.options):{},i(W.options,u.options)),W._initHooks=[],W.callInitHooks=function(){if(!this._initHooksCalled){P.callInitHooks&&P.callInitHooks.call(this),this._initHooksCalled=!0;for(var Pe=0,lt=W._initHooks.length;Pe<lt;Pe++)W._initHooks[Pe].call(this)}},y},R.include=function(u){var y=this.prototype.options;return i(this.prototype,u),u.options&&(this.prototype.options=y,this.mergeOptions(u.options)),this},R.mergeOptions=function(u){return i(this.prototype.options,u),this},R.addInitHook=function(u){var y=Array.prototype.slice.call(arguments,1),P=typeof u=="function"?u:function(){this[u].apply(this,y)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(P),this};function U(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=z(u)?u:[u];for(var y=0;y<u.length;y++)u[y]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var V={on:function(u,y,P){if(typeof u=="object")for(var W in u)this._on(W,u[W],y);else{u=x(u);for(var le=0,Pe=u.length;le<Pe;le++)this._on(u[le],y,P)}return this},off:function(u,y,P){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var W in u)this._off(W,u[W],y);else{u=x(u);for(var le=arguments.length===1,Pe=0,lt=u.length;Pe<lt;Pe++)le?this._off(u[Pe]):this._off(u[Pe],y,P)}return this},_on:function(u,y,P,W){if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}if(this._listens(u,y,P)===!1){P===this&&(P=void 0);var le={fn:y,ctx:P};W&&(le.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(le)}},_off:function(u,y,P){var W,le,Pe;if(this._events&&(W=this._events[u],!!W)){if(arguments.length===1){if(this._firingCount)for(le=0,Pe=W.length;le<Pe;le++)W[le].fn=p;delete this._events[u];return}if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}var lt=this._listens(u,y,P);if(lt!==!1){var Dt=W[lt];this._firingCount&&(Dt.fn=p,this._events[u]=W=W.slice()),W.splice(lt,1)}}},fire:function(u,y,P){if(!this.listens(u,P))return this;var W=i({},y,{type:u,target:this,sourceTarget:y&&y.sourceTarget||this});if(this._events){var le=this._events[u];if(le){this._firingCount=this._firingCount+1||1;for(var Pe=0,lt=le.length;Pe<lt;Pe++){var Dt=le[Pe],qt=Dt.fn;Dt.once&&this.off(u,qt,Dt.ctx),qt.call(Dt.ctx||this,W)}this._firingCount--}}return P&&this._propagateEvent(W),this},listens:function(u,y,P,W){typeof u!="string"&&console.warn('"string" type argument expected');var le=y;typeof y!="function"&&(W=!!y,le=void 0,P=void 0);var Pe=this._events&&this._events[u];if(Pe&&Pe.length&&this._listens(u,le,P)!==!1)return!0;if(W){for(var lt in this._eventParents)if(this._eventParents[lt].listens(u,y,P,W))return!0}return!1},_listens:function(u,y,P){if(!this._events)return!1;var W=this._events[u]||[];if(!y)return!!W.length;P===this&&(P=void 0);for(var le=0,Pe=W.length;le<Pe;le++)if(W[le].fn===y&&W[le].ctx===P)return le;return!1},once:function(u,y,P){if(typeof u=="object")for(var W in u)this._on(W,u[W],y,!0);else{u=x(u);for(var le=0,Pe=u.length;le<Pe;le++)this._on(u[le],y,P,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[l(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[l(u)],this},_propagateEvent:function(u){for(var y in this._eventParents)this._eventParents[y].fire(u.type,i({layer:u.target,propagatedFrom:u.target},u),!0)}};V.addEventListener=V.on,V.removeEventListener=V.clearAllEventListeners=V.off,V.addOneTimeEventListener=V.once,V.fireEvent=V.fire,V.hasEventListeners=V.listens;var re=R.extend(V);function J(u,y,P){this.x=P?Math.round(u):u,this.y=P?Math.round(y):y}var _e=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};J.prototype={clone:function(){return new J(this.x,this.y)},add:function(u){return this.clone()._add(Le(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(Le(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new J(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new J(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=_e(this.x),this.y=_e(this.y),this},distanceTo:function(u){u=Le(u);var y=u.x-this.x,P=u.y-this.y;return Math.sqrt(y*y+P*P)},equals:function(u){return u=Le(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=Le(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function Le(u,y,P){return u instanceof J?u:z(u)?new J(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new J(u.x,u.y):new J(u,y,P)}function Oe(u,y){if(u)for(var P=y?[u,y]:u,W=0,le=P.length;W<le;W++)this.extend(P[W])}Oe.prototype={extend:function(u){var y,P;if(!u)return this;if(u instanceof J||typeof u[0]=="number"||"x"in u)y=P=Le(u);else if(u=Z(u),y=u.min,P=u.max,!y||!P)return this;return!this.min&&!this.max?(this.min=y.clone(),this.max=P.clone()):(this.min.x=Math.min(y.x,this.min.x),this.max.x=Math.max(P.x,this.max.x),this.min.y=Math.min(y.y,this.min.y),this.max.y=Math.max(P.y,this.max.y)),this},getCenter:function(u){return Le((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return Le(this.min.x,this.max.y)},getTopRight:function(){return Le(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var y,P;return typeof u[0]=="number"||u instanceof J?u=Le(u):u=Z(u),u instanceof Oe?(y=u.min,P=u.max):y=P=u,y.x>=this.min.x&&P.x<=this.max.x&&y.y>=this.min.y&&P.y<=this.max.y},intersects:function(u){u=Z(u);var y=this.min,P=this.max,W=u.min,le=u.max,Pe=le.x>=y.x&&W.x<=P.x,lt=le.y>=y.y&&W.y<=P.y;return Pe&&lt},overlaps:function(u){u=Z(u);var y=this.min,P=this.max,W=u.min,le=u.max,Pe=le.x>y.x&&W.x<P.x,lt=le.y>y.y&&W.y<P.y;return Pe&&lt},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var y=this.min,P=this.max,W=Math.abs(y.x-P.x)*u,le=Math.abs(y.y-P.y)*u;return Z(Le(y.x-W,y.y-le),Le(P.x+W,P.y+le))},equals:function(u){return u?(u=Z(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function Z(u,y){return!u||u instanceof Oe?u:new Oe(u,y)}function G(u,y){if(u)for(var P=y?[u,y]:u,W=0,le=P.length;W<le;W++)this.extend(P[W])}G.prototype={extend:function(u){var y=this._southWest,P=this._northEast,W,le;if(u instanceof ce)W=u,le=u;else if(u instanceof G){if(W=u._southWest,le=u._northEast,!W||!le)return this}else return u?this.extend(he(u)||se(u)):this;return!y&&!P?(this._southWest=new ce(W.lat,W.lng),this._northEast=new ce(le.lat,le.lng)):(y.lat=Math.min(W.lat,y.lat),y.lng=Math.min(W.lng,y.lng),P.lat=Math.max(le.lat,P.lat),P.lng=Math.max(le.lng,P.lng)),this},pad:function(u){var y=this._southWest,P=this._northEast,W=Math.abs(y.lat-P.lat)*u,le=Math.abs(y.lng-P.lng)*u;return new G(new ce(y.lat-W,y.lng-le),new ce(P.lat+W,P.lng+le))},getCenter:function(){return new ce((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ce(this.getNorth(),this.getWest())},getSouthEast:function(){return new ce(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof ce||"lat"in u?u=he(u):u=se(u);var y=this._southWest,P=this._northEast,W,le;return u instanceof G?(W=u.getSouthWest(),le=u.getNorthEast()):W=le=u,W.lat>=y.lat&&le.lat<=P.lat&&W.lng>=y.lng&&le.lng<=P.lng},intersects:function(u){u=se(u);var y=this._southWest,P=this._northEast,W=u.getSouthWest(),le=u.getNorthEast(),Pe=le.lat>=y.lat&&W.lat<=P.lat,lt=le.lng>=y.lng&&W.lng<=P.lng;return Pe&&lt},overlaps:function(u){u=se(u);var y=this._southWest,P=this._northEast,W=u.getSouthWest(),le=u.getNorthEast(),Pe=le.lat>y.lat&&W.lat<P.lat,lt=le.lng>y.lng&&W.lng<P.lng;return Pe&&lt},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,y){return u?(u=se(u),this._southWest.equals(u.getSouthWest(),y)&&this._northEast.equals(u.getNorthEast(),y)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function se(u,y){return u instanceof G?u:new G(u,y)}function ce(u,y,P){if(isNaN(u)||isNaN(y))throw new Error("Invalid LatLng object: ("+u+", "+y+")");this.lat=+u,this.lng=+y,P!==void 0&&(this.alt=+P)}ce.prototype={equals:function(u,y){if(!u)return!1;u=he(u);var P=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return P<=(y===void 0?1e-9:y)},toString:function(u){return"LatLng("+v(this.lat,u)+", "+v(this.lng,u)+")"},distanceTo:function(u){return ee.distance(this,he(u))},wrap:function(){return ee.wrapLatLng(this)},toBounds:function(u){var y=180*u/40075017,P=y/Math.cos(Math.PI/180*this.lat);return se([this.lat-y,this.lng-P],[this.lat+y,this.lng+P])},clone:function(){return new ce(this.lat,this.lng,this.alt)}};function he(u,y,P){return u instanceof ce?u:z(u)&&typeof u[0]!="object"?u.length===3?new ce(u[0],u[1],u[2]):u.length===2?new ce(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new ce(u.lat,"lng"in u?u.lng:u.lon,u.alt):y===void 0?null:new ce(u,y,P)}var ve={latLngToPoint:function(u,y){var P=this.projection.project(u),W=this.scale(y);return this.transformation._transform(P,W)},pointToLatLng:function(u,y){var P=this.scale(y),W=this.transformation.untransform(u,P);return this.projection.unproject(W)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var y=this.projection.bounds,P=this.scale(u),W=this.transformation.transform(y.min,P),le=this.transformation.transform(y.max,P);return new Oe(W,le)},infinite:!1,wrapLatLng:function(u){var y=this.wrapLng?d(u.lng,this.wrapLng,!0):u.lng,P=this.wrapLat?d(u.lat,this.wrapLat,!0):u.lat,W=u.alt;return new ce(P,y,W)},wrapLatLngBounds:function(u){var y=u.getCenter(),P=this.wrapLatLng(y),W=y.lat-P.lat,le=y.lng-P.lng;if(W===0&&le===0)return u;var Pe=u.getSouthWest(),lt=u.getNorthEast(),Dt=new ce(Pe.lat-W,Pe.lng-le),qt=new ce(lt.lat-W,lt.lng-le);return new G(Dt,qt)}},ee=i({},ve,{wrapLng:[-180,180],R:6371e3,distance:function(u,y){var P=Math.PI/180,W=u.lat*P,le=y.lat*P,Pe=Math.sin((y.lat-u.lat)*P/2),lt=Math.sin((y.lng-u.lng)*P/2),Dt=Pe*Pe+Math.cos(W)*Math.cos(le)*lt*lt,qt=2*Math.atan2(Math.sqrt(Dt),Math.sqrt(1-Dt));return this.R*qt}}),X=6378137,De={R:X,MAX_LATITUDE:85.0511287798,project:function(u){var y=Math.PI/180,P=this.MAX_LATITUDE,W=Math.max(Math.min(P,u.lat),-P),le=Math.sin(W*y);return new J(this.R*u.lng*y,this.R*Math.log((1+le)/(1-le))/2)},unproject:function(u){var y=180/Math.PI;return new ce((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*y,u.x*y/this.R)},bounds:function(){var u=X*Math.PI;return new Oe([-u,-u],[u,u])}()};function Te(u,y,P,W){if(z(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=y,this._c=P,this._d=W}Te.prototype={transform:function(u,y){return this._transform(u.clone(),y)},_transform:function(u,y){return y=y||1,u.x=y*(this._a*u.x+this._b),u.y=y*(this._c*u.y+this._d),u},untransform:function(u,y){return y=y||1,new J((u.x/y-this._b)/this._a,(u.y/y-this._d)/this._c)}};function qe(u,y,P,W){return new Te(u,y,P,W)}var ge=i({},ee,{code:"EPSG:3857",projection:De,transformation:function(){var u=.5/(Math.PI*De.R);return qe(u,.5,-u,.5)}()}),Q=i({},ge,{code:"EPSG:900913"});function ie(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function fe(u,y){var P="",W,le,Pe,lt,Dt,qt;for(W=0,Pe=u.length;W<Pe;W++){for(Dt=u[W],le=0,lt=Dt.length;le<lt;le++)qt=Dt[le],P+=(le?"L":"M")+qt.x+" "+qt.y;P+=y?Ut.svg?"z":"x":""}return P||"M0 0"}var Ce=document.documentElement.style,de="ActiveXObject"in window,Xe=de&&!document.addEventListener,Ie="msLaunchUri"in navigator&&!("documentMode"in document),Ye=St("webkit"),Je=St("android"),Ge=St("android 2")||St("android 3"),wt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ct=Je&&St("Google")&&wt<537&&!("AudioNode"in window),Wt=!!window.opera,sn=!Ie&&St("chrome"),bn=St("gecko")&&!Ye&&!Wt&&!de,Qe=!sn&&St("safari"),ot=St("phantom"),it="OTransition"in Ce,Vt=navigator.platform.indexOf("Win")===0,Qt=de&&"transition"in Ce,kn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ge,Ln="MozPerspective"in Ce,Mn=!window.L_DISABLE_3D&&(Qt||kn||Ln)&&!it&&!ot,Zn=typeof orientation<"u"||St("mobile"),en=Zn&&Ye,wn=Zn&&kn,En=!window.PointerEvent&&window.MSPointerEvent,Xn=!!(window.PointerEvent||En),dr="ontouchstart"in window||!!window.TouchEvent,vr=!window.L_NO_TOUCH&&(dr||Xn),sr=Zn&&Wt,ut=Zn&&bn,rt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,jt=function(){var u=!1;try{var y=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",p,y),window.removeEventListener("testPassiveEventSupport",p,y)}catch{}return u}(),Tn=function(){return!!document.createElement("canvas").getContext}(),Yn=!!(document.createElementNS&&ie("svg").createSVGRect),Jt=!!Yn&&function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ht=!Yn&&function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var y=u.firstChild;return y.style.behavior="url(#default#VML)",y&&typeof y.adj=="object"}catch{return!1}}(),nn=navigator.platform.indexOf("Mac")===0,an=navigator.platform.indexOf("Linux")===0;function St(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var Ut={ie:de,ielt9:Xe,edge:Ie,webkit:Ye,android:Je,android23:Ge,androidStock:Ct,opera:Wt,chrome:sn,gecko:bn,safari:Qe,phantom:ot,opera12:it,win:Vt,ie3d:Qt,webkit3d:kn,gecko3d:Ln,any3d:Mn,mobile:Zn,mobileWebkit:en,mobileWebkit3d:wn,msPointer:En,pointer:Xn,touch:vr,touchNative:dr,mobileOpera:sr,mobileGecko:ut,retina:rt,passiveEvents:jt,canvas:Tn,svg:Yn,vml:Ht,inlineSvg:Jt,mac:nn,linux:an},Lr=Ut.msPointer?"MSPointerDown":"pointerdown",Ot=Ut.msPointer?"MSPointerMove":"pointermove",$n=Ut.msPointer?"MSPointerUp":"pointerup",or=Ut.msPointer?"MSPointerCancel":"pointercancel",Mi={touchstart:Lr,touchmove:Ot,touchend:$n,touchcancel:or},Br={touchstart:Ui,touchmove:Ni,touchend:Ni,touchcancel:Ni},xr={},ur=!1;function gi(u,y,P){return y==="touchstart"&&_i(),Br[y]?(P=Br[y].bind(this,P),u.addEventListener(Mi[y],P,!1),P):(console.warn("wrong event specified:",y),p)}function yr(u,y,P){if(!Mi[y]){console.warn("wrong event specified:",y);return}u.removeEventListener(Mi[y],P,!1)}function Gr(u){xr[u.pointerId]=u}function zr(u){xr[u.pointerId]&&(xr[u.pointerId]=u)}function ln(u){delete xr[u.pointerId]}function _i(){ur||(document.addEventListener(Lr,Gr,!0),document.addEventListener(Ot,zr,!0),document.addEventListener($n,ln,!0),document.addEventListener(or,ln,!0),ur=!0)}function Ni(u,y){if(y.pointerType!==(y.MSPOINTER_TYPE_MOUSE||"mouse")){y.touches=[];for(var P in xr)y.touches.push(xr[P]);y.changedTouches=[y],u(y)}}function Ui(u,y){y.MSPOINTER_TYPE_TOUCH&&y.pointerType===y.MSPOINTER_TYPE_TOUCH&&Pr(y),Ni(u,y)}function hi(u){var y={},P,W;for(W in u)P=u[W],y[W]=P&&P.bind?P.bind(u):P;return u=y,y.type="dblclick",y.detail=2,y.isTrusted=!1,y._simulated=!0,y}var Ir=200;function di(u,y){u.addEventListener("dblclick",y);var P=0,W;function le(Pe){if(Pe.detail!==1){W=Pe.detail;return}if(!(Pe.pointerType==="mouse"||Pe.sourceCapabilities&&!Pe.sourceCapabilities.firesTouchEvents)){var lt=gl(Pe);if(!(lt.some(function(qt){return qt instanceof HTMLLabelElement&&qt.attributes.for})&&!lt.some(function(qt){return qt instanceof HTMLInputElement||qt instanceof HTMLSelectElement}))){var Dt=Date.now();Dt-P<=Ir?(W++,W===2&&y(hi(Pe))):W=1,P=Dt}}}return u.addEventListener("click",le),{dblclick:y,simDblclick:le}}function Sr(u,y){u.removeEventListener("dblclick",y.dblclick),u.removeEventListener("click",y.simDblclick)}var ki=mn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),js=mn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ea=js==="webkitTransition"||js==="OTransition"?js+"End":"transitionend";function wi(u){return typeof u=="string"?document.getElementById(u):u}function On(u,y){var P=u.style[y]||u.currentStyle&&u.currentStyle[y];if((!P||P==="auto")&&document.defaultView){var W=document.defaultView.getComputedStyle(u,null);P=W?W[y]:null}return P==="auto"?null:P}function br(u,y,P){var W=document.createElement(u);return W.className=y||"",P&&P.appendChild(W),W}function Wn(u){var y=u.parentNode;y&&y.removeChild(u)}function Hi(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function Ki(u){var y=u.parentNode;y&&y.lastChild!==u&&y.appendChild(u)}function ds(u){var y=u.parentNode;y&&y.firstChild!==u&&y.insertBefore(u,y.firstChild)}function po(u,y){if(u.classList!==void 0)return u.classList.contains(y);var P=Ii(u);return P.length>0&&new RegExp("(^|\\s)"+y+"(\\s|$)").test(P)}function Nn(u,y){if(u.classList!==void 0)for(var P=x(y),W=0,le=P.length;W<le;W++)u.classList.add(P[W]);else if(!po(u,y)){var Pe=Ii(u);Wi(u,(Pe?Pe+" ":"")+y)}}function $r(u,y){u.classList!==void 0?u.classList.remove(y):Wi(u,m((" "+Ii(u)+" ").replace(" "+y+" "," ")))}function Wi(u,y){u.className.baseVal===void 0?u.className=y:u.className.baseVal=y}function Ii(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function Er(u,y){"opacity"in u.style?u.style.opacity=y:"filter"in u.style&&Dn(u,y)}function Dn(u,y){var P=!1,W="DXImageTransform.Microsoft.Alpha";try{P=u.filters.item(W)}catch{if(y===1)return}y=Math.round(y*100),P?(P.Enabled=y!==100,P.Opacity=y):u.style.filter+=" progid:"+W+"(opacity="+y+")"}function mn(u){for(var y=document.documentElement.style,P=0;P<u.length;P++)if(u[P]in y)return u[P];return!1}function Fr(u,y,P){var W=y||new J(0,0);u.style[ki]=(Ut.ie3d?"translate("+W.x+"px,"+W.y+"px)":"translate3d("+W.x+"px,"+W.y+"px,0)")+(P?" scale("+P+")":"")}function ai(u,y){u._leaflet_pos=y,Ut.any3d?Fr(u,y):(u.style.left=y.x+"px",u.style.top=y.y+"px")}function ms(u){return u._leaflet_pos||new J(0,0)}var Oo,Xs,ra;if("onselectstart"in document)Oo=function(){_r(window,"selectstart",Pr)},Xs=function(){Xr(window,"selectstart",Pr)};else{var fa=mn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Oo=function(){if(fa){var u=document.documentElement.style;ra=u[fa],u[fa]="none"}},Xs=function(){fa&&(document.documentElement.style[fa]=ra,ra=void 0)}}function mi(){_r(window,"dragstart",Pr)}function go(){Xr(window,"dragstart",Pr)}var fs,zs;function mo(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(ps(),fs=u,zs=u.style.outlineStyle,u.style.outlineStyle="none",_r(window,"keydown",ps))}function ps(){fs&&(fs.style.outlineStyle=zs,fs=void 0,zs=void 0,Xr(window,"keydown",ps))}function iu(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function Tl(u){var y=u.getBoundingClientRect();return{x:y.width/u.offsetWidth||1,y:y.height/u.offsetHeight||1,boundingClientRect:y}}var mr={__proto__:null,TRANSFORM:ki,TRANSITION:js,TRANSITION_END:Ea,get:wi,getStyle:On,create:br,remove:Wn,empty:Hi,toFront:Ki,toBack:ds,hasClass:po,addClass:Nn,removeClass:$r,setClass:Wi,getClass:Ii,setOpacity:Er,testProp:mn,setTransform:Fr,setPosition:ai,getPosition:ms,get disableTextSelection(){return Oo},get enableTextSelection(){return Xs},disableImageDrag:mi,enableImageDrag:go,preventOutline:mo,restoreOutline:ps,getSizedParentNode:iu,getScale:Tl};function _r(u,y,P,W){if(y&&typeof y=="object")for(var le in y)Cs(u,le,y[le],P);else{y=x(y);for(var Pe=0,lt=y.length;Pe<lt;Pe++)Cs(u,y[Pe],P,W)}return this}var vo="_leaflet_events";function Xr(u,y,P,W){if(arguments.length===1)Ai(u),delete u[vo];else if(y&&typeof y=="object")for(var le in y)pa(u,le,y[le],P);else if(y=x(y),arguments.length===2)Ai(u,function(Dt){return K(y,Dt)!==-1});else for(var Pe=0,lt=y.length;Pe<lt;Pe++)pa(u,y[Pe],P,W);return this}function Ai(u,y){for(var P in u[vo]){var W=P.split(/\d/)[0];(!y||y(W))&&pa(u,W,null,null,P)}}var yo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Cs(u,y,P,W){var le=y+l(P)+(W?"_"+l(W):"");if(u[vo]&&u[vo][le])return this;var Pe=function(Dt){return P.call(W||u,Dt||window.event)},lt=Pe;!Ut.touchNative&&Ut.pointer&&y.indexOf("touch")===0?Pe=gi(u,y,Pe):Ut.touch&&y==="dblclick"?Pe=di(u,Pe):"addEventListener"in u?y==="touchstart"||y==="touchmove"||y==="wheel"||y==="mousewheel"?u.addEventListener(yo[y]||y,Pe,Ut.passiveEvents?{passive:!1}:!1):y==="mouseenter"||y==="mouseleave"?(Pe=function(Dt){Dt=Dt||window.event,Dl(u,Dt)&&lt(Dt)},u.addEventListener(yo[y],Pe,!1)):u.addEventListener(y,lt,!1):u.attachEvent("on"+y,Pe),u[vo]=u[vo]||{},u[vo][le]=Pe}function pa(u,y,P,W,le){le=le||y+l(P)+(W?"_"+l(W):"");var Pe=u[vo]&&u[vo][le];if(!Pe)return this;!Ut.touchNative&&Ut.pointer&&y.indexOf("touch")===0?yr(u,y,Pe):Ut.touch&&y==="dblclick"?Sr(u,Pe):"removeEventListener"in u?u.removeEventListener(yo[y]||y,Pe,!1):u.detachEvent("on"+y,Pe),u[vo][le]=null}function pl(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function Ju(u){return Cs(u,"wheel",pl),this}function su(u){return _r(u,"mousedown touchstart dblclick contextmenu",pl),u._leaflet_disable_click=!0,this}function Pr(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function qr(u){return Pr(u),pl(u),this}function gl(u){if(u.composedPath)return u.composedPath();for(var y=[],P=u.target;P;)y.push(P),P=P.parentNode;return y}function Mc(u,y){if(!y)return new J(u.clientX,u.clientY);var P=Tl(y),W=P.boundingClientRect;return new J((u.clientX-W.left)/P.x-y.clientLeft,(u.clientY-W.top)/P.y-y.clientTop)}var ou=Ut.linux&&Ut.chrome?window.devicePixelRatio:Ut.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Pu(u){return Ut.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/ou:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function Dl(u,y){var P=y.relatedTarget;if(!P)return!0;try{for(;P&&P!==u;)P=P.parentNode}catch{return!1}return P!==u}var au={__proto__:null,on:_r,off:Xr,stopPropagation:pl,disableScrollPropagation:Ju,disableClickPropagation:su,preventDefault:Pr,stop:qr,getPropagationPath:gl,getMousePosition:Mc,getWheelDelta:Pu,isExternalTarget:Dl,addListener:_r,removeListener:Xr},Mu=re.extend({run:function(u,y,P,W){this.stop(),this._el=u,this._inProgress=!0,this._duration=P||.25,this._easeOutPower=1/Math.max(W||.5,.2),this._startPos=ms(u),this._offset=y.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=I(this._animate,this),this._step()},_step:function(u){var y=+new Date-this._startTime,P=this._duration*1e3;y<P?this._runFrame(this._easeOut(y/P),u):(this._runFrame(1),this._complete())},_runFrame:function(u,y){var P=this._startPos.add(this._offset.multiplyBy(u));y&&P._round(),ai(this._el,P),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),Jr=re.extend({options:{crs:ge,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,y){y=E(this,y),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),y.maxBounds&&this.setMaxBounds(y.maxBounds),y.zoom!==void 0&&(this._zoom=this._limitZoom(y.zoom)),y.center&&y.zoom!==void 0&&this.setView(he(y.center),y.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=js&&Ut.any3d&&!Ut.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),_r(this._proxy,Ea,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,y,P){if(y=y===void 0?this._zoom:this._limitZoom(y),u=this._limitCenter(he(u),y,this.options.maxBounds),P=P||{},this._stop(),this._loaded&&!P.reset&&P!==!0){P.animate!==void 0&&(P.zoom=i({animate:P.animate},P.zoom),P.pan=i({animate:P.animate,duration:P.duration},P.pan));var W=this._zoom!==y?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,y,P.zoom):this._tryAnimatedPan(u,P.pan);if(W)return clearTimeout(this._sizeTimer),this}return this._resetView(u,y,P.pan&&P.pan.noMoveStart),this},setZoom:function(u,y){return this._loaded?this.setView(this.getCenter(),u,{zoom:y}):(this._zoom=u,this)},zoomIn:function(u,y){return u=u||(Ut.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,y)},zoomOut:function(u,y){return u=u||(Ut.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,y)},setZoomAround:function(u,y,P){var W=this.getZoomScale(y),le=this.getSize().divideBy(2),Pe=u instanceof J?u:this.latLngToContainerPoint(u),lt=Pe.subtract(le).multiplyBy(1-1/W),Dt=this.containerPointToLatLng(le.add(lt));return this.setView(Dt,y,{zoom:P})},_getBoundsCenterZoom:function(u,y){y=y||{},u=u.getBounds?u.getBounds():se(u);var P=Le(y.paddingTopLeft||y.padding||[0,0]),W=Le(y.paddingBottomRight||y.padding||[0,0]),le=this.getBoundsZoom(u,!1,P.add(W));if(le=typeof y.maxZoom=="number"?Math.min(y.maxZoom,le):le,le===1/0)return{center:u.getCenter(),zoom:le};var Pe=W.subtract(P).divideBy(2),lt=this.project(u.getSouthWest(),le),Dt=this.project(u.getNorthEast(),le),qt=this.unproject(lt.add(Dt).divideBy(2).add(Pe),le);return{center:qt,zoom:le}},fitBounds:function(u,y){if(u=se(u),!u.isValid())throw new Error("Bounds are not valid.");var P=this._getBoundsCenterZoom(u,y);return this.setView(P.center,P.zoom,y)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,y){return this.setView(u,this._zoom,{pan:y})},panBy:function(u,y){if(u=Le(u).round(),y=y||{},!u.x&&!u.y)return this.fire("moveend");if(y.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Mu,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),y.noMoveStart||this.fire("movestart"),y.animate!==!1){Nn(this._mapPane,"leaflet-pan-anim");var P=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,P,y.duration||.25,y.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,y,P){if(P=P||{},P.animate===!1||!Ut.any3d)return this.setView(u,y,P);this._stop();var W=this.project(this.getCenter()),le=this.project(u),Pe=this.getSize(),lt=this._zoom;u=he(u),y=y===void 0?lt:y;var Dt=Math.max(Pe.x,Pe.y),qt=Dt*this.getZoomScale(lt,y),hn=le.distanceTo(W)||1,Fn=1.42,tr=Fn*Fn;function jr(vi){var so=vi?-1:1,Be=vi?qt:Dt,Fo=qt*qt-Dt*Dt+so*tr*tr*hn*hn,tc=2*Be*tr*hn,qs=Fo/tc,Hr=Math.sqrt(qs*qs+1)-qs,Vh=Hr<1e-9?-18:Math.log(Hr);return Vh}function ks(vi){return(Math.exp(vi)-Math.exp(-vi))/2}function ls(vi){return(Math.exp(vi)+Math.exp(-vi))/2}function Gs(vi){return ks(vi)/ls(vi)}var ts=jr(0);function Ro(vi){return Dt*(ls(ts)/ls(ts+Fn*vi))}function sh(vi){return Dt*(ls(ts)*Gs(ts+Fn*vi)-ks(ts))/tr}function Ba(vi){return 1-Math.pow(1-vi,1.5)}var _a=Date.now(),oa=(jr(1)-ts)/Fn,Od=P.duration?1e3*P.duration:1e3*oa*.8;function Tu(){var vi=(Date.now()-_a)/Od,so=Ba(vi)*oa;vi<=1?(this._flyToFrame=I(Tu,this),this._move(this.unproject(W.add(le.subtract(W).multiplyBy(sh(so)/hn)),lt),this.getScaleZoom(Dt/Ro(so),lt),{flyTo:!0})):this._move(u,y)._moveEnd(!0)}return this._moveStart(!0,P.noMoveStart),Tu.call(this),this},flyToBounds:function(u,y){var P=this._getBoundsCenterZoom(u,y);return this.flyTo(P.center,P.zoom,y)},setMaxBounds:function(u){return u=se(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var y=this.options.minZoom;return this.options.minZoom=u,this._loaded&&y!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var y=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&y!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,y){this._enforcingBounds=!0;var P=this.getCenter(),W=this._limitCenter(P,this._zoom,se(u));return P.equals(W)||this.panTo(W,y),this._enforcingBounds=!1,this},panInside:function(u,y){y=y||{};var P=Le(y.paddingTopLeft||y.padding||[0,0]),W=Le(y.paddingBottomRight||y.padding||[0,0]),le=this.project(this.getCenter()),Pe=this.project(u),lt=this.getPixelBounds(),Dt=Z([lt.min.add(P),lt.max.subtract(W)]),qt=Dt.getSize();if(!Dt.contains(Pe)){this._enforcingBounds=!0;var hn=Pe.subtract(Dt.getCenter()),Fn=Dt.extend(Pe).getSize().subtract(qt);le.x+=hn.x<0?-Fn.x:Fn.x,le.y+=hn.y<0?-Fn.y:Fn.y,this.panTo(this.unproject(le),y),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=i({animate:!1,pan:!0},u===!0?{animate:!0}:u);var y=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var P=this.getSize(),W=y.divideBy(2).round(),le=P.divideBy(2).round(),Pe=W.subtract(le);return!Pe.x&&!Pe.y?this:(u.animate&&u.pan?this.panBy(Pe):(u.pan&&this._rawPanBy(Pe),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:y,newSize:P}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=i({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var y=o(this._handleGeolocationResponse,this),P=o(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(y,P,u):navigator.geolocation.getCurrentPosition(y,P,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var y=u.code,P=u.message||(y===1?"permission denied":y===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:y,message:"Geolocation error: "+P+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var y=u.coords.latitude,P=u.coords.longitude,W=new ce(y,P),le=W.toBounds(u.coords.accuracy*2),Pe=this._locateOptions;if(Pe.setView){var lt=this.getBoundsZoom(le);this.setView(W,Pe.maxZoom?Math.min(lt,Pe.maxZoom):lt)}var Dt={latlng:W,bounds:le,timestamp:u.timestamp};for(var qt in u.coords)typeof u.coords[qt]=="number"&&(Dt[qt]=u.coords[qt]);this.fire("locationfound",Dt)}},addHandler:function(u,y){if(!y)return this;var P=this[u]=new y(this);return this._handlers.push(P),this.options[u]&&P.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Wn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)Wn(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,y){var P="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),W=br("div",P,y||this._mapPane);return u&&(this._panes[u]=W),W},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),y=this.unproject(u.getBottomLeft()),P=this.unproject(u.getTopRight());return new G(y,P)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,y,P){u=se(u),P=Le(P||[0,0]);var W=this.getZoom()||0,le=this.getMinZoom(),Pe=this.getMaxZoom(),lt=u.getNorthWest(),Dt=u.getSouthEast(),qt=this.getSize().subtract(P),hn=Z(this.project(Dt,W),this.project(lt,W)).getSize(),Fn=Ut.any3d?this.options.zoomSnap:1,tr=qt.x/hn.x,jr=qt.y/hn.y,ks=y?Math.max(tr,jr):Math.min(tr,jr);return W=this.getScaleZoom(ks,W),Fn&&(W=Math.round(W/(Fn/100))*(Fn/100),W=y?Math.ceil(W/Fn)*Fn:Math.floor(W/Fn)*Fn),Math.max(le,Math.min(Pe,W))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new J(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,y){var P=this._getTopLeftPoint(u,y);return new Oe(P,P.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,y){var P=this.options.crs;return y=y===void 0?this._zoom:y,P.scale(u)/P.scale(y)},getScaleZoom:function(u,y){var P=this.options.crs;y=y===void 0?this._zoom:y;var W=P.zoom(u*P.scale(y));return isNaN(W)?1/0:W},project:function(u,y){return y=y===void 0?this._zoom:y,this.options.crs.latLngToPoint(he(u),y)},unproject:function(u,y){return y=y===void 0?this._zoom:y,this.options.crs.pointToLatLng(Le(u),y)},layerPointToLatLng:function(u){var y=Le(u).add(this.getPixelOrigin());return this.unproject(y)},latLngToLayerPoint:function(u){var y=this.project(he(u))._round();return y._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(he(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(se(u))},distance:function(u,y){return this.options.crs.distance(he(u),he(y))},containerPointToLayerPoint:function(u){return Le(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return Le(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var y=this.containerPointToLayerPoint(Le(u));return this.layerPointToLatLng(y)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(he(u)))},mouseEventToContainerPoint:function(u){return Mc(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var y=this._container=wi(u);if(y){if(y._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");_r(y,"scroll",this._onScroll,this),this._containerId=l(y)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ut.any3d,Nn(u,"leaflet-container"+(Ut.touch?" leaflet-touch":"")+(Ut.retina?" leaflet-retina":"")+(Ut.ielt9?" leaflet-oldie":"")+(Ut.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var y=On(u,"position");y!=="absolute"&&y!=="relative"&&y!=="fixed"&&y!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ai(this._mapPane,new J(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Nn(u.markerPane,"leaflet-zoom-hide"),Nn(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,y,P){ai(this._mapPane,new J(0,0));var W=!this._loaded;this._loaded=!0,y=this._limitZoom(y),this.fire("viewprereset");var le=this._zoom!==y;this._moveStart(le,P)._move(u,y)._moveEnd(le),this.fire("viewreset"),W&&this.fire("load")},_moveStart:function(u,y){return u&&this.fire("zoomstart"),y||this.fire("movestart"),this},_move:function(u,y,P,W){y===void 0&&(y=this._zoom);var le=this._zoom!==y;return this._zoom=y,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),W?P&&P.pinch&&this.fire("zoom",P):((le||P&&P.pinch)&&this.fire("zoom",P),this.fire("move",P)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){ai(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[l(this._container)]=this;var y=u?Xr:_r;y(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&y(window,"resize",this._onResize,this),Ut.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=I(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,y){for(var P=[],W,le=y==="mouseout"||y==="mouseover",Pe=u.target||u.srcElement,lt=!1;Pe;){if(W=this._targets[l(Pe)],W&&(y==="click"||y==="preclick")&&this._draggableMoved(W)){lt=!0;break}if(W&&W.listens(y,!0)&&(le&&!Dl(Pe,u)||(P.push(W),le))||Pe===this._container)break;Pe=Pe.parentNode}return!P.length&&!lt&&!le&&this.listens(y,!0)&&(P=[this]),P},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var y=u.target||u.srcElement;if(!(!this._loaded||y._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(y))){var P=u.type;P==="mousedown"&&mo(y),this._fireDOMEvent(u,P)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,y,P){if(u.type==="click"){var W=i({},u);W.type="preclick",this._fireDOMEvent(W,W.type,P)}var le=this._findEventTargets(u,y);if(P){for(var Pe=[],lt=0;lt<P.length;lt++)P[lt].listens(y,!0)&&Pe.push(P[lt]);le=Pe.concat(le)}if(le.length){y==="contextmenu"&&Pr(u);var Dt=le[0],qt={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var hn=Dt.getLatLng&&(!Dt._radius||Dt._radius<=10);qt.containerPoint=hn?this.latLngToContainerPoint(Dt.getLatLng()):this.mouseEventToContainerPoint(u),qt.layerPoint=this.containerPointToLayerPoint(qt.containerPoint),qt.latlng=hn?Dt.getLatLng():this.layerPointToLatLng(qt.layerPoint)}for(lt=0;lt<le.length;lt++)if(le[lt].fire(y,qt,!0),qt.originalEvent._stopped||le[lt].options.bubblingMouseEvents===!1&&K(this._mouseEvents,y)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,y=this._handlers.length;u<y;u++)this._handlers[u].disable()},whenReady:function(u,y){return this._loaded?u.call(y||this,{target:this}):this.on("load",u,y),this},_getMapPanePos:function(){return ms(this._mapPane)||new J(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,y){var P=u&&y!==void 0?this._getNewPixelOrigin(u,y):this.getPixelOrigin();return P.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,y){var P=this.getSize()._divideBy(2);return this.project(u,y)._subtract(P)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,y,P){var W=this._getNewPixelOrigin(P,y);return this.project(u,y)._subtract(W)},_latLngBoundsToNewLayerBounds:function(u,y,P){var W=this._getNewPixelOrigin(P,y);return Z([this.project(u.getSouthWest(),y)._subtract(W),this.project(u.getNorthWest(),y)._subtract(W),this.project(u.getSouthEast(),y)._subtract(W),this.project(u.getNorthEast(),y)._subtract(W)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,y,P){if(!P)return u;var W=this.project(u,y),le=this.getSize().divideBy(2),Pe=new Oe(W.subtract(le),W.add(le)),lt=this._getBoundsOffset(Pe,P,y);return Math.abs(lt.x)<=1&&Math.abs(lt.y)<=1?u:this.unproject(W.add(lt),y)},_limitOffset:function(u,y){if(!y)return u;var P=this.getPixelBounds(),W=new Oe(P.min.add(u),P.max.add(u));return u.add(this._getBoundsOffset(W,y))},_getBoundsOffset:function(u,y,P){var W=Z(this.project(y.getNorthEast(),P),this.project(y.getSouthWest(),P)),le=W.min.subtract(u.min),Pe=W.max.subtract(u.max),lt=this._rebound(le.x,-Pe.x),Dt=this._rebound(le.y,-Pe.y);return new J(lt,Dt)},_rebound:function(u,y){return u+y>0?Math.round(u-y)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(y))},_limitZoom:function(u){var y=this.getMinZoom(),P=this.getMaxZoom(),W=Ut.any3d?this.options.zoomSnap:1;return W&&(u=Math.round(u/W)*W),Math.max(y,Math.min(P,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){$r(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,y){var P=this._getCenterOffset(u)._trunc();return(y&&y.animate)!==!0&&!this.getSize().contains(P)?!1:(this.panBy(P,y),!0)},_createAnimProxy:function(){var u=this._proxy=br("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(y){var P=ki,W=this._proxy.style[P];Fr(this._proxy,this.project(y.center,y.zoom),this.getZoomScale(y.zoom,1)),W===this._proxy.style[P]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Wn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),y=this.getZoom();Fr(this._proxy,this.project(u,y),this.getZoomScale(y,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,y,P){if(this._animatingZoom)return!0;if(P=P||{},!this._zoomAnimated||P.animate===!1||this._nothingToAnimate()||Math.abs(y-this._zoom)>this.options.zoomAnimationThreshold)return!1;var W=this.getZoomScale(y),le=this._getCenterOffset(u)._divideBy(1-1/W);return P.animate!==!0&&!this.getSize().contains(le)?!1:(I(function(){this._moveStart(!0,P.noMoveStart||!1)._animateZoom(u,y,!0)},this),!0)},_animateZoom:function(u,y,P,W){this._mapPane&&(P&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=y,Nn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:y,noUpdate:W}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&$r(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function vs(u,y){return new Jr(u,y)}var cr=R.extend({options:{position:"topright"},initialize:function(u){E(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var y=this._map;return y&&y.removeControl(this),this.options.position=u,y&&y.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var y=this._container=this.onAdd(u),P=this.getPosition(),W=u._controlCorners[P];return Nn(y,"leaflet-control"),P.indexOf("bottom")!==-1?W.insertBefore(y,W.firstChild):W.appendChild(y),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Wn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),ys=function(u){return new cr(u)};Jr.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},y="leaflet-",P=this._controlContainer=br("div",y+"control-container",this._container);function W(le,Pe){var lt=y+le+" "+y+Pe;u[le+Pe]=br("div",lt,P)}W("top","left"),W("top","right"),W("bottom","left"),W("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)Wn(this._controlCorners[u]);Wn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ol=cr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,y,P,W){return P<W?-1:W<P?1:0}},initialize:function(u,y,P){E(this,P),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var W in u)this._addLayer(u[W],W);for(W in y)this._addLayer(y[W],W,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return cr.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,y){return this._addLayer(u,y),this._map?this._update():this},addOverlay:function(u,y){return this._addLayer(u,y,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var y=this._getLayer(l(u));return y&&this._layers.splice(this._layers.indexOf(y),1),this._map?this._update():this},expand:function(){Nn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(Nn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):$r(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return $r(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",y=this._container=br("div",u),P=this.options.collapsed;y.setAttribute("aria-haspopup",!0),su(y),Ju(y);var W=this._section=br("section",u+"-list");P&&(this._map.on("click",this.collapse,this),_r(y,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var le=this._layersLink=br("a",u+"-toggle",y);le.href="#",le.title="Layers",le.setAttribute("role","button"),_r(le,{keydown:function(Pe){Pe.keyCode===13&&this._expandSafely()},click:function(Pe){Pr(Pe),this._expandSafely()}},this),P||this.expand(),this._baseLayersList=br("div",u+"-base",W),this._separator=br("div",u+"-separator",W),this._overlaysList=br("div",u+"-overlays",W),y.appendChild(W)},_getLayer:function(u){for(var y=0;y<this._layers.length;y++)if(this._layers[y]&&l(this._layers[y].layer)===u)return this._layers[y]},_addLayer:function(u,y,P){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:y,overlay:P}),this.options.sortLayers&&this._layers.sort(o(function(W,le){return this.options.sortFunction(W.layer,le.layer,W.name,le.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Hi(this._baseLayersList),Hi(this._overlaysList),this._layerControlInputs=[];var u,y,P,W,le=0;for(P=0;P<this._layers.length;P++)W=this._layers[P],this._addItem(W),y=y||W.overlay,u=u||!W.overlay,le+=W.overlay?0:1;return this.options.hideSingleBase&&(u=u&&le>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=y&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var y=this._getLayer(l(u.target)),P=y.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;P&&this._map.fire(P,y)},_createRadioElement:function(u,y){var P='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(y?' checked="checked"':"")+"/>",W=document.createElement("div");return W.innerHTML=P,W.firstChild},_addItem:function(u){var y=document.createElement("label"),P=this._map.hasLayer(u.layer),W;u.overlay?(W=document.createElement("input"),W.type="checkbox",W.className="leaflet-control-layers-selector",W.defaultChecked=P):W=this._createRadioElement("leaflet-base-layers_"+l(this),P),this._layerControlInputs.push(W),W.layerId=l(u.layer),_r(W,"click",this._onInputClick,this);var le=document.createElement("span");le.innerHTML=" "+u.name;var Pe=document.createElement("span");y.appendChild(Pe),Pe.appendChild(W),Pe.appendChild(le);var lt=u.overlay?this._overlaysList:this._baseLayersList;return lt.appendChild(y),this._checkDisabledLayers(),y},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,y,P,W=[],le=[];this._handlingClick=!0;for(var Pe=u.length-1;Pe>=0;Pe--)y=u[Pe],P=this._getLayer(y.layerId).layer,y.checked?W.push(P):y.checked||le.push(P);for(Pe=0;Pe<le.length;Pe++)this._map.hasLayer(le[Pe])&&this._map.removeLayer(le[Pe]);for(Pe=0;Pe<W.length;Pe++)this._map.hasLayer(W[Pe])||this._map.addLayer(W[Pe]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,y,P,W=this._map.getZoom(),le=u.length-1;le>=0;le--)y=u[le],P=this._getLayer(y.layerId).layer,y.disabled=P.options.minZoom!==void 0&&W<P.options.minZoom||P.options.maxZoom!==void 0&&W>P.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,_r(u,"click",Pr),this.expand();var y=this;setTimeout(function(){Xr(u,"click",Pr),y._preventClick=!1})}}),Ua=function(u,y,P){return new Ol(u,y,P)},Ji=cr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var y="leaflet-control-zoom",P=br("div",y+" leaflet-bar"),W=this.options;return this._zoomInButton=this._createButton(W.zoomInText,W.zoomInTitle,y+"-in",P,this._zoomIn),this._zoomOutButton=this._createButton(W.zoomOutText,W.zoomOutTitle,y+"-out",P,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),P},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,y,P,W,le){var Pe=br("a",P,W);return Pe.innerHTML=u,Pe.href="#",Pe.title=y,Pe.setAttribute("role","button"),Pe.setAttribute("aria-label",y),su(Pe),_r(Pe,"click",qr),_r(Pe,"click",le,this),_r(Pe,"click",this._refocusOnMap,this),Pe},_updateDisabled:function(){var u=this._map,y="leaflet-disabled";$r(this._zoomInButton,y),$r(this._zoomOutButton,y),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(Nn(this._zoomOutButton,y),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(Nn(this._zoomInButton,y),this._zoomInButton.setAttribute("aria-disabled","true"))}});Jr.mergeOptions({zoomControl:!0}),Jr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ji,this.addControl(this.zoomControl))});var ku=function(u){return new Ji(u)},Pa=cr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var y="leaflet-control-scale",P=br("div",y),W=this.options;return this._addScales(W,y+"-line",P),u.on(W.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),P},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,y,P){u.metric&&(this._mScale=br("div",y,P)),u.imperial&&(this._iScale=br("div",y,P))},_update:function(){var u=this._map,y=u.getSize().y/2,P=u.distance(u.containerPointToLatLng([0,y]),u.containerPointToLatLng([this.options.maxWidth,y]));this._updateScales(P)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var y=this._getRoundNum(u),P=y<1e3?y+" m":y/1e3+" km";this._updateScale(this._mScale,P,y/u)},_updateImperial:function(u){var y=u*3.2808399,P,W,le;y>5280?(P=y/5280,W=this._getRoundNum(P),this._updateScale(this._iScale,W+" mi",W/P)):(le=this._getRoundNum(y),this._updateScale(this._iScale,le+" ft",le/y))},_updateScale:function(u,y,P){u.style.width=Math.round(this.options.maxWidth*P)+"px",u.innerHTML=y},_getRoundNum:function(u){var y=Math.pow(10,(Math.floor(u)+"").length-1),P=u/y;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:1,y*P}}),lu=function(u){return new Pa(u)},uu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ia=cr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ut.inlineSvg?uu+" ":"")+"Leaflet</a>"},initialize:function(u){E(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=br("div","leaflet-control-attribution"),su(this._container);for(var y in u._layers)u._layers[y].getAttribution&&this.addAttribution(u._layers[y].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var y in this._attributions)this._attributions[y]&&u.push(y);var P=[];this.options.prefix&&P.push(this.options.prefix),u.length&&P.push(u.join(", ")),this._container.innerHTML=P.join(' <span aria-hidden="true">|</span> ')}}});Jr.mergeOptions({attributionControl:!0}),Jr.addInitHook(function(){this.options.attributionControl&&new ia().addTo(this)});var cu=function(u){return new ia(u)};cr.Layers=Ol,cr.Zoom=Ji,cr.Scale=Pa,cr.Attribution=ia,ys.layers=Ua,ys.zoom=ku,ys.scale=lu,ys.attribution=cu;var xi=R.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});xi.addTo=function(u,y){return u.addHandler(y,this),this};var kc={Events:V},$s=Ut.touch?"touchstart mousedown":"mousedown",ga=re.extend({options:{clickTolerance:3},initialize:function(u,y,P,W){E(this,W),this._element=u,this._dragStartTarget=y||u,this._preventOutline=P},enable:function(){this._enabled||(_r(this._dragStartTarget,$s,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ga._dragging===this&&this.finishDrag(!0),Xr(this._dragStartTarget,$s,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!po(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){ga._dragging===this&&this.finishDrag();return}if(!(ga._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(ga._dragging=this,this._preventOutline&&mo(this._element),mi(),Oo(),!this._moving)){this.fire("down");var y=u.touches?u.touches[0]:u,P=iu(this._element);this._startPoint=new J(y.clientX,y.clientY),this._startPos=ms(this._element),this._parentScale=Tl(P);var W=u.type==="mousedown";_r(document,W?"mousemove":"touchmove",this._onMove,this),_r(document,W?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var y=u.touches&&u.touches.length===1?u.touches[0]:u,P=new J(y.clientX,y.clientY)._subtract(this._startPoint);!P.x&&!P.y||Math.abs(P.x)+Math.abs(P.y)<this.options.clickTolerance||(P.x/=this._parentScale.x,P.y/=this._parentScale.y,Pr(u),this._moved||(this.fire("dragstart"),this._moved=!0,Nn(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Nn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(P),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),ai(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){$r(document.body,"leaflet-dragging"),this._lastTarget&&($r(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Xr(document,"mousemove touchmove",this._onMove,this),Xr(document,"mouseup touchend touchcancel",this._onUp,this),go(),Xs();var y=this._moved&&this._moving;this._moving=!1,ga._dragging=!1,y&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function hu(u,y,P){var W,le=[1,4,2,8],Pe,lt,Dt,qt,hn,Fn,tr,jr;for(Pe=0,Fn=u.length;Pe<Fn;Pe++)u[Pe]._code=Gt(u[Pe],y);for(Dt=0;Dt<4;Dt++){for(tr=le[Dt],W=[],Pe=0,Fn=u.length,lt=Fn-1;Pe<Fn;lt=Pe++)qt=u[Pe],hn=u[lt],qt._code&tr?hn._code&tr||(jr=Pt(hn,qt,tr,y,P),jr._code=Gt(jr,y),W.push(jr)):(hn._code&tr&&(jr=Pt(hn,qt,tr,y,P),jr._code=Gt(jr,y),W.push(jr)),W.push(qt));u=W}return u}function ma(u,y){var P,W,le,Pe,lt,Dt,qt,hn,Fn;if(!u||u.length===0)throw new Error("latlngs not passed");Vn(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var tr=he([0,0]),jr=se(u),ks=jr.getNorthWest().distanceTo(jr.getSouthWest())*jr.getNorthEast().distanceTo(jr.getNorthWest());ks<1700&&(tr=Nl(u));var ls=u.length,Gs=[];for(P=0;P<ls;P++){var ts=he(u[P]);Gs.push(y.project(he([ts.lat-tr.lat,ts.lng-tr.lng])))}for(Dt=qt=hn=0,P=0,W=ls-1;P<ls;W=P++)le=Gs[P],Pe=Gs[W],lt=le.y*Pe.x-Pe.y*le.x,qt+=(le.x+Pe.x)*lt,hn+=(le.y+Pe.y)*lt,Dt+=lt*3;Dt===0?Fn=Gs[0]:Fn=[qt/Dt,hn/Dt];var Ro=y.unproject(Le(Fn));return he([Ro.lat+tr.lat,Ro.lng+tr.lng])}function Nl(u){for(var y=0,P=0,W=0,le=0;le<u.length;le++){var Pe=he(u[le]);y+=Pe.lat,P+=Pe.lng,W++}return he([y/W,P/W])}var Il={__proto__:null,clipPolygon:hu,polygonCenter:ma,centroid:Nl};function Li(u,y){if(!y||!u.length)return u.slice();var P=y*y;return u=we(u,P),u=bs(u,P),u}function Ko(u,y,P){return Math.sqrt(Rn(u,y,P,!0))}function Ha(u,y,P){return Rn(u,y,P)}function bs(u,y){var P=u.length,W=typeof Uint8Array<"u"?Uint8Array:Array,le=new W(P);le[0]=le[P-1]=1,F(u,le,y,0,P-1);var Pe,lt=[];for(Pe=0;Pe<P;Pe++)le[Pe]&&lt.push(u[Pe]);return lt}function F(u,y,P,W,le){var Pe=0,lt,Dt,qt;for(Dt=W+1;Dt<=le-1;Dt++)qt=Rn(u[Dt],u[W],u[le],!0),qt>Pe&&(lt=Dt,Pe=qt);Pe>P&&(y[lt]=1,F(u,y,P,W,lt),F(u,y,P,lt,le))}function we(u,y){for(var P=[u[0]],W=1,le=0,Pe=u.length;W<Pe;W++)pn(u[W],u[le])>y&&(P.push(u[W]),le=W);return le<Pe-1&&P.push(u[Pe-1]),P}var et;function dt(u,y,P,W,le){var Pe=W?et:Gt(u,P),lt=Gt(y,P),Dt,qt,hn;for(et=lt;;){if(!(Pe|lt))return[u,y];if(Pe&lt)return!1;Dt=Pe||lt,qt=Pt(u,y,Dt,P,le),hn=Gt(qt,P),Dt===Pe?(u=qt,Pe=hn):(y=qt,lt=hn)}}function Pt(u,y,P,W,le){var Pe=y.x-u.x,lt=y.y-u.y,Dt=W.min,qt=W.max,hn,Fn;return P&8?(hn=u.x+Pe*(qt.y-u.y)/lt,Fn=qt.y):P&4?(hn=u.x+Pe*(Dt.y-u.y)/lt,Fn=Dt.y):P&2?(hn=qt.x,Fn=u.y+lt*(qt.x-u.x)/Pe):P&1&&(hn=Dt.x,Fn=u.y+lt*(Dt.x-u.x)/Pe),new J(hn,Fn,le)}function Gt(u,y){var P=0;return u.x<y.min.x?P|=1:u.x>y.max.x&&(P|=2),u.y<y.min.y?P|=4:u.y>y.max.y&&(P|=8),P}function pn(u,y){var P=y.x-u.x,W=y.y-u.y;return P*P+W*W}function Rn(u,y,P,W){var le=y.x,Pe=y.y,lt=P.x-le,Dt=P.y-Pe,qt=lt*lt+Dt*Dt,hn;return qt>0&&(hn=((u.x-le)*lt+(u.y-Pe)*Dt)/qt,hn>1?(le=P.x,Pe=P.y):hn>0&&(le+=lt*hn,Pe+=Dt*hn)),lt=u.x-le,Dt=u.y-Pe,W?lt*lt+Dt*Dt:new J(le,Pe)}function Vn(u){return!z(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function ar(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Vn(u)}function wr(u,y){var P,W,le,Pe,lt,Dt,qt,hn;if(!u||u.length===0)throw new Error("latlngs not passed");Vn(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var Fn=he([0,0]),tr=se(u),jr=tr.getNorthWest().distanceTo(tr.getSouthWest())*tr.getNorthEast().distanceTo(tr.getNorthWest());jr<1700&&(Fn=Nl(u));var ks=u.length,ls=[];for(P=0;P<ks;P++){var Gs=he(u[P]);ls.push(y.project(he([Gs.lat-Fn.lat,Gs.lng-Fn.lng])))}for(P=0,W=0;P<ks-1;P++)W+=ls[P].distanceTo(ls[P+1])/2;if(W===0)hn=ls[0];else for(P=0,Pe=0;P<ks-1;P++)if(lt=ls[P],Dt=ls[P+1],le=lt.distanceTo(Dt),Pe+=le,Pe>W){qt=(Pe-W)/le,hn=[Dt.x-qt*(Dt.x-lt.x),Dt.y-qt*(Dt.y-lt.y)];break}var ts=y.unproject(Le(hn));return he([ts.lat+Fn.lat,ts.lng+Fn.lng])}var Vr={__proto__:null,simplify:Li,pointToSegmentDistance:Ko,closestPointOnSegment:Ha,clipSegment:dt,_getEdgeIntersection:Pt,_getBitCode:Gt,_sqClosestPointOnSegment:Rn,isFlat:Vn,_flat:ar,polylineCenter:wr},Zi={project:function(u){return new J(u.lng,u.lat)},unproject:function(u){return new ce(u.y,u.x)},bounds:new Oe([-180,-90],[180,90])},fi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Oe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var y=Math.PI/180,P=this.R,W=u.lat*y,le=this.R_MINOR/P,Pe=Math.sqrt(1-le*le),lt=Pe*Math.sin(W),Dt=Math.tan(Math.PI/4-W/2)/Math.pow((1-lt)/(1+lt),Pe/2);return W=-P*Math.log(Math.max(Dt,1e-10)),new J(u.lng*y*P,W)},unproject:function(u){for(var y=180/Math.PI,P=this.R,W=this.R_MINOR/P,le=Math.sqrt(1-W*W),Pe=Math.exp(-u.y/P),lt=Math.PI/2-2*Math.atan(Pe),Dt=0,qt=.1,hn;Dt<15&&Math.abs(qt)>1e-7;Dt++)hn=le*Math.sin(lt),hn=Math.pow((1-hn)/(1+hn),le/2),qt=Math.PI/2-2*Math.atan(Pe*hn)-lt,lt+=qt;return new ce(lt*y,u.x*y/P)}},Si={__proto__:null,LonLat:Zi,Mercator:fi,SphericalMercator:De},_s=i({},ee,{code:"EPSG:3395",projection:fi,transformation:function(){var u=.5/(Math.PI*fi.R);return qe(u,.5,-u,.5)}()}),Es=i({},ee,{code:"EPSG:4326",projection:Zi,transformation:qe(1/180,1,-1/180,.5)}),Zo=i({},ve,{projection:Zi,transformation:qe(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,y){var P=y.lng-u.lng,W=y.lat-u.lat;return Math.sqrt(P*P+W*W)},infinite:!0});ve.Earth=ee,ve.EPSG3395=_s,ve.EPSG3857=ge,ve.EPSG900913=Q,ve.EPSG4326=Es,ve.Simple=Zo;var Ur=re.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[l(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[l(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var y=u.target;if(y.hasLayer(this)){if(this._map=y,this._zoomAnimated=y._zoomAnimated,this.getEvents){var P=this.getEvents();y.on(P,this),this.once("remove",function(){y.off(P,this)},this)}this.onAdd(y),this.fire("add"),y.fire("layeradd",{layer:this})}}});Jr.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var y=l(u);return this._layers[y]?this:(this._layers[y]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var y=l(u);return this._layers[y]?(this._loaded&&u.onRemove(this),delete this._layers[y],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return l(u)in this._layers},eachLayer:function(u,y){for(var P in this._layers)u.call(y,this._layers[P]);return this},_addLayers:function(u){u=u?z(u)?u:[u]:[];for(var y=0,P=u.length;y<P;y++)this.addLayer(u[y])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[l(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var y=l(u);this._zoomBoundLayers[y]&&(delete this._zoomBoundLayers[y],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,y=-1/0,P=this._getZoomSpan();for(var W in this._zoomBoundLayers){var le=this._zoomBoundLayers[W].options;u=le.minZoom===void 0?u:Math.min(u,le.minZoom),y=le.maxZoom===void 0?y:Math.max(y,le.maxZoom)}this._layersMaxZoom=y===-1/0?void 0:y,this._layersMinZoom=u===1/0?void 0:u,P!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Js=Ur.extend({initialize:function(u,y){E(this,y),this._layers={};var P,W;if(u)for(P=0,W=u.length;P<W;P++)this.addLayer(u[P])},addLayer:function(u){var y=this.getLayerId(u);return this._layers[y]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var y=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[y]&&this._map.removeLayer(this._layers[y]),delete this._layers[y],this},hasLayer:function(u){var y=typeof u=="number"?u:this.getLayerId(u);return y in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var y=Array.prototype.slice.call(arguments,1),P,W;for(P in this._layers)W=this._layers[P],W[u]&&W[u].apply(W,y);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,y){for(var P in this._layers)u.call(y,this._layers[P]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return l(u)}}),Bl=function(u,y){return new Js(u,y)},bo=Js.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),Js.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),Js.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new G;for(var y in this._layers){var P=this._layers[y];u.extend(P.getBounds?P.getBounds():P.getLatLng())}return u}}),Au=function(u,y){return new bo(u,y)},Ma=R.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){E(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,y){var P=this._getIconUrl(u);if(!P){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var W=this._createImg(P,y&&y.tagName==="IMG"?y:null);return this._setIconStyles(W,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(W.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),W},_setIconStyles:function(u,y){var P=this.options,W=P[y+"Size"];typeof W=="number"&&(W=[W,W]);var le=Le(W),Pe=Le(y==="shadow"&&P.shadowAnchor||P.iconAnchor||le&&le.divideBy(2,!0));u.className="leaflet-marker-"+y+" "+(P.className||""),Pe&&(u.style.marginLeft=-Pe.x+"px",u.style.marginTop=-Pe.y+"px"),le&&(u.style.width=le.x+"px",u.style.height=le.y+"px")},_createImg:function(u,y){return y=y||document.createElement("img"),y.src=u,y},_getIconUrl:function(u){return Ut.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function Qu(u){return new Ma(u)}var ml=Ma.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof ml.imagePath!="string"&&(ml.imagePath=this._detectIconPath()),(this.options.imagePath||ml.imagePath)+Ma.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var y=function(P,W,le){var Pe=W.exec(P);return Pe&&Pe[le]};return u=y(u,/^url\((['"])?(.+)\1\)$/,2),u&&y(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=br("div","leaflet-default-icon-path",document.body),y=On(u,"background-image")||On(u,"backgroundImage");if(document.body.removeChild(u),y=this._stripUrl(y),y)return y;var P=document.querySelector('link[href$="leaflet.css"]');return P?P.href.substring(0,P.href.length-11-1):""}}),vl=xi.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new ga(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Nn(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&$r(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var y=this._marker,P=y._map,W=this._marker.options.autoPanSpeed,le=this._marker.options.autoPanPadding,Pe=ms(y._icon),lt=P.getPixelBounds(),Dt=P.getPixelOrigin(),qt=Z(lt.min._subtract(Dt).add(le),lt.max._subtract(Dt).subtract(le));if(!qt.contains(Pe)){var hn=Le((Math.max(qt.max.x,Pe.x)-qt.max.x)/(lt.max.x-qt.max.x)-(Math.min(qt.min.x,Pe.x)-qt.min.x)/(lt.min.x-qt.min.x),(Math.max(qt.max.y,Pe.y)-qt.max.y)/(lt.max.y-qt.max.y)-(Math.min(qt.min.y,Pe.y)-qt.min.y)/(lt.min.y-qt.min.y)).multiplyBy(W);P.panBy(hn,{animate:!1}),this._draggable._newPos._add(hn),this._draggable._startPos._add(hn),ai(y._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=I(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=I(this._adjustPan.bind(this,u)))},_onDrag:function(u){var y=this._marker,P=y._shadow,W=ms(y._icon),le=y._map.layerPointToLatLng(W);P&&ai(P,W),y._latlng=le,u.latlng=le,u.oldLatLng=this._oldLatLng,y.fire("move",u).fire("drag",u)},_onDragEnd:function(u){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),Ps=Ur.extend({options:{icon:new ml,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,y){E(this,y),this._latlng=he(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var y=this._latlng;return this._latlng=he(u),this.update(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,y="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),P=u.icon.createIcon(this._icon),W=!1;P!==this._icon&&(this._icon&&this._removeIcon(),W=!0,u.title&&(P.title=u.title),P.tagName==="IMG"&&(P.alt=u.alt||"")),Nn(P,y),u.keyboard&&(P.tabIndex="0",P.setAttribute("role","button")),this._icon=P,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_r(P,"focus",this._panOnFocus,this);var le=u.icon.createShadow(this._shadow),Pe=!1;le!==this._shadow&&(this._removeShadow(),Pe=!0),le&&(Nn(le,y),le.alt=""),this._shadow=le,u.opacity<1&&this._updateOpacity(),W&&this.getPane().appendChild(this._icon),this._initInteraction(),le&&Pe&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Xr(this._icon,"focus",this._panOnFocus,this),Wn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Wn(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&ai(this._icon,u),this._shadow&&ai(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(y)},_initInteraction:function(){if(this.options.interactive&&(Nn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),vl)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new vl(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&Er(this._icon,u),this._shadow&&Er(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var y=this.options.icon.options,P=y.iconSize?Le(y.iconSize):Le(0,0),W=y.iconAnchor?Le(y.iconAnchor):Le(0,0);u.panInside(this._latlng,{paddingTopLeft:W,paddingBottomRight:P.subtract(W)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ka(u,y){return new Ps(u,y)}var Xo=Ur.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return E(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),No=Xo.extend({options:{fill:!0,radius:10},initialize:function(u,y){E(this,y),this._latlng=he(u),this._radius=this.options.radius},setLatLng:function(u){var y=this._latlng;return this._latlng=he(u),this.redraw(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var y=u&&u.radius||this._radius;return Xo.prototype.setStyle.call(this,u),this.setRadius(y),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,y=this._radiusY||u,P=this._clickTolerance(),W=[u+P,y+P];this._pxBounds=new Oe(this._point.subtract(W),this._point.add(W))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Rl(u,y){return new No(u,y)}var Qs=No.extend({initialize:function(u,y,P){if(typeof y=="number"&&(y=i({},P,{radius:y})),E(this,y),this._latlng=he(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new G(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:Xo.prototype.setStyle,_project:function(){var u=this._latlng.lng,y=this._latlng.lat,P=this._map,W=P.options.crs;if(W.distance===ee.distance){var le=Math.PI/180,Pe=this._mRadius/ee.R/le,lt=P.project([y+Pe,u]),Dt=P.project([y-Pe,u]),qt=lt.add(Dt).divideBy(2),hn=P.unproject(qt).lat,Fn=Math.acos((Math.cos(Pe*le)-Math.sin(y*le)*Math.sin(hn*le))/(Math.cos(y*le)*Math.cos(hn*le)))/le;(isNaN(Fn)||Fn===0)&&(Fn=Pe/Math.cos(Math.PI/180*y)),this._point=qt.subtract(P.getPixelOrigin()),this._radius=isNaN(Fn)?0:qt.x-P.project([hn,u-Fn]).x,this._radiusY=qt.y-lt.y}else{var tr=W.unproject(W.project(this._latlng).subtract([this._mRadius,0]));this._point=P.latLngToLayerPoint(this._latlng),this._radius=this._point.x-P.latLngToLayerPoint(tr).x}this._updateBounds()}});function _o(u,y,P){return new Qs(u,y,P)}var wo=Xo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,y){E(this,y),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var y=1/0,P=null,W=Rn,le,Pe,lt=0,Dt=this._parts.length;lt<Dt;lt++)for(var qt=this._parts[lt],hn=1,Fn=qt.length;hn<Fn;hn++){le=qt[hn-1],Pe=qt[hn];var tr=W(u,le,Pe,!0);tr<y&&(y=tr,P=W(u,le,Pe))}return P&&(P.distance=Math.sqrt(y)),P},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return wr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,y){return y=y||this._defaultShape(),u=he(u),y.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new G,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return Vn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var y=[],P=Vn(u),W=0,le=u.length;W<le;W++)P?(y[W]=he(u[W]),this._bounds.extend(y[W])):y[W]=this._convertLatLngs(u[W]);return y},_project:function(){var u=new Oe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),y=new J(u,u);this._rawPxBounds&&(this._pxBounds=new Oe([this._rawPxBounds.min.subtract(y),this._rawPxBounds.max.add(y)]))},_projectLatlngs:function(u,y,P){var W=u[0]instanceof ce,le=u.length,Pe,lt;if(W){for(lt=[],Pe=0;Pe<le;Pe++)lt[Pe]=this._map.latLngToLayerPoint(u[Pe]),P.extend(lt[Pe]);y.push(lt)}else for(Pe=0;Pe<le;Pe++)this._projectLatlngs(u[Pe],y,P)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var y=this._parts,P,W,le,Pe,lt,Dt,qt;for(P=0,le=0,Pe=this._rings.length;P<Pe;P++)for(qt=this._rings[P],W=0,lt=qt.length;W<lt-1;W++)Dt=dt(qt[W],qt[W+1],u,W,!0),Dt&&(y[le]=y[le]||[],y[le].push(Dt[0]),(Dt[1]!==qt[W+1]||W===lt-2)&&(y[le].push(Dt[1]),le++))}},_simplifyPoints:function(){for(var u=this._parts,y=this.options.smoothFactor,P=0,W=u.length;P<W;P++)u[P]=Li(u[P],y)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,y){var P,W,le,Pe,lt,Dt,qt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(P=0,Pe=this._parts.length;P<Pe;P++)for(Dt=this._parts[P],W=0,lt=Dt.length,le=lt-1;W<lt;le=W++)if(!(!y&&W===0)&&Ko(u,Dt[le],Dt[W])<=qt)return!0;return!1}});function Ac(u,y){return new wo(u,y)}wo._flat=ar;var Ns=wo.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ma(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var y=wo.prototype._convertLatLngs.call(this,u),P=y.length;return P>=2&&y[0]instanceof ce&&y[0].equals(y[P-1])&&y.pop(),y},_setLatLngs:function(u){wo.prototype._setLatLngs.call(this,u),Vn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Vn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,y=this.options.weight,P=new J(y,y);if(u=new Oe(u.min.subtract(P),u.max.add(P)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var W=0,le=this._rings.length,Pe;W<le;W++)Pe=hu(this._rings[W],u,!0),Pe.length&&this._parts.push(Pe)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var y=!1,P,W,le,Pe,lt,Dt,qt,hn;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(Pe=0,qt=this._parts.length;Pe<qt;Pe++)for(P=this._parts[Pe],lt=0,hn=P.length,Dt=hn-1;lt<hn;Dt=lt++)W=P[lt],le=P[Dt],W.y>u.y!=le.y>u.y&&u.x<(le.x-W.x)*(u.y-W.y)/(le.y-W.y)+W.x&&(y=!y);return y||wo.prototype._containsPoint.call(this,u,!0)}});function Wa(u,y){return new Ns(u,y)}var eo=bo.extend({initialize:function(u,y){E(this,y),this._layers={},u&&this.addData(u)},addData:function(u){var y=z(u)?u:u.features,P,W,le;if(y){for(P=0,W=y.length;P<W;P++)le=y[P],(le.geometries||le.geometry||le.features||le.coordinates)&&this.addData(le);return this}var Pe=this.options;if(Pe.filter&&!Pe.filter(u))return this;var lt=to(u,Pe);return lt?(lt.feature=ro(u),lt.defaultOptions=lt.options,this.resetStyle(lt),Pe.onEachFeature&&Pe.onEachFeature(u,lt),this.addLayer(lt)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=i({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(y){this._setLayerStyle(y,u)},this)},_setLayerStyle:function(u,y){u.setStyle&&(typeof y=="function"&&(y=y(u.feature)),u.setStyle(y))}});function to(u,y){var P=u.type==="Feature"?u.geometry:u,W=P?P.coordinates:null,le=[],Pe=y&&y.pointToLayer,lt=y&&y.coordsToLatLng||qa,Dt,qt,hn,Fn;if(!W&&!P)return null;switch(P.type){case"Point":return Dt=lt(W),Ga(Pe,u,Dt,y);case"MultiPoint":for(hn=0,Fn=W.length;hn<Fn;hn++)Dt=lt(W[hn]),le.push(Ga(Pe,u,Dt,y));return new bo(le);case"LineString":case"MultiLineString":return qt=no(W,P.type==="LineString"?0:1,lt),new wo(qt,y);case"Polygon":case"MultiPolygon":return qt=no(W,P.type==="Polygon"?1:2,lt),new Ns(qt,y);case"GeometryCollection":for(hn=0,Fn=P.geometries.length;hn<Fn;hn++){var tr=to({geometry:P.geometries[hn],type:"Feature",properties:u.properties},y);tr&&le.push(tr)}return new bo(le);case"FeatureCollection":for(hn=0,Fn=P.features.length;hn<Fn;hn++){var jr=to(P.features[hn],y);jr&&le.push(jr)}return new bo(le);default:throw new Error("Invalid GeoJSON object.")}}function Ga(u,y,P,W){return u?u(y,P):new Ps(P,W&&W.markersInheritOptions&&W)}function qa(u){return new ce(u[1],u[0],u[2])}function no(u,y,P){for(var W=[],le=0,Pe=u.length,lt;le<Pe;le++)lt=y?no(u[le],y-1,P):(P||qa)(u[le]),W.push(lt);return W}function Vs(u,y){return u=he(u),u.alt!==void 0?[v(u.lng,y),v(u.lat,y),v(u.alt,y)]:[v(u.lng,y),v(u.lat,y)]}function Aa(u,y,P,W){for(var le=[],Pe=0,lt=u.length;Pe<lt;Pe++)le.push(y?Aa(u[Pe],Vn(u[Pe])?0:y-1,P,W):Vs(u[Pe],W));return!y&&P&&le.length>0&&le.push(le[0].slice()),le}function Jo(u,y){return u.feature?i({},u.feature,{geometry:y}):ro(y)}function ro(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var _t={toGeoJSON:function(u){return Jo(this,{type:"Point",coordinates:Vs(this.getLatLng(),u)})}};Ps.include(_t),Qs.include(_t),No.include(_t),wo.include({toGeoJSON:function(u){var y=!Vn(this._latlngs),P=Aa(this._latlngs,y?1:0,!1,u);return Jo(this,{type:(y?"Multi":"")+"LineString",coordinates:P})}}),Ns.include({toGeoJSON:function(u){var y=!Vn(this._latlngs),P=y&&!Vn(this._latlngs[0]),W=Aa(this._latlngs,P?2:y?1:0,!0,u);return y||(W=[W]),Jo(this,{type:(P?"Multi":"")+"Polygon",coordinates:W})}}),Js.include({toMultiPoint:function(u){var y=[];return this.eachLayer(function(P){y.push(P.toGeoJSON(u).geometry.coordinates)}),Jo(this,{type:"MultiPoint",coordinates:y})},toGeoJSON:function(u){var y=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(y==="MultiPoint")return this.toMultiPoint(u);var P=y==="GeometryCollection",W=[];return this.eachLayer(function(le){if(le.toGeoJSON){var Pe=le.toGeoJSON(u);if(P)W.push(Pe.geometry);else{var lt=ro(Pe);lt.type==="FeatureCollection"?W.push.apply(W,lt.features):W.push(lt)}}}),P?Jo(this,{geometries:W,type:"GeometryCollection"}):{type:"FeatureCollection",features:W}}});function Kt(u,y){return new eo(u,y)}var Nt=Kt,In=Ur.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,y,P){this._url=u,this._bounds=se(y),E(this,P)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Nn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Wn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&Ki(this._image),this},bringToBack:function(){return this._map&&ds(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=se(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",y=this._image=u?this._url:br("img");if(Nn(y,"leaflet-image-layer"),this._zoomAnimated&&Nn(y,"leaflet-zoom-animated"),this.options.className&&Nn(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onload=o(this.fire,this,"load"),y.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=y.src;return}y.src=this._url,y.alt=this.options.alt},_animateZoom:function(u){var y=this._map.getZoomScale(u.zoom),P=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;Fr(this._image,P,y)},_reset:function(){var u=this._image,y=new Oe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),P=y.getSize();ai(u,y.min),u.style.width=P.x+"px",u.style.height=P.y+"px"},_updateOpacity:function(){Er(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),Jn=function(u,y,P){return new In(u,y,P)},Cr=In.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",y=this._image=u?this._url:br("video");if(Nn(y,"leaflet-image-layer"),this._zoomAnimated&&Nn(y,"leaflet-zoom-animated"),this.options.className&&Nn(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onloadeddata=o(this.fire,this,"load"),u){for(var P=y.getElementsByTagName("source"),W=[],le=0;le<P.length;le++)W.push(P[le].src);this._url=P.length>0?W:[y.src];return}z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(y.style,"objectFit")&&(y.style.objectFit="fill"),y.autoplay=!!this.options.autoplay,y.loop=!!this.options.loop,y.muted=!!this.options.muted,y.playsInline=!!this.options.playsInline;for(var Pe=0;Pe<this._url.length;Pe++){var lt=br("source");lt.src=this._url[Pe],y.appendChild(lt)}}});function Qi(u,y,P){return new Cr(u,y,P)}var Ci=In.extend({_initImage:function(){var u=this._image=this._url;Nn(u,"leaflet-image-layer"),this._zoomAnimated&&Nn(u,"leaflet-zoom-animated"),this.options.className&&Nn(u,this.options.className),u.onselectstart=p,u.onmousemove=p}});function du(u,y,P){return new Ci(u,y,P)}var xo=Ur.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,y){u&&(u instanceof ce||z(u))?(this._latlng=he(u),E(this,y)):(E(this,u),this._source=y),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&Er(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&Er(this._container,1),this.bringToFront(),this.options.interactive&&(Nn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(Er(this._container,0),this._removeTimeout=setTimeout(o(Wn,void 0,this._container),200)):Wn(this._container),this.options.interactive&&($r(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=he(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ki(this._container),this},bringToBack:function(){return this._map&&ds(this._container),this},_prepareOpen:function(u){var y=this._source;if(!y._map)return!1;if(y instanceof bo){y=null;var P=this._source._layers;for(var W in P)if(P[W]._map){y=P[W];break}if(!y)return!1;this._source=y}if(!u)if(y.getCenter)u=y.getCenter();else if(y.getLatLng)u=y.getLatLng();else if(y.getBounds)u=y.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,y=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof y=="string")u.innerHTML=y;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(y)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),y=Le(this.options.offset),P=this._getAnchor();this._zoomAnimated?ai(this._container,u.add(P)):y=y.add(u).add(P);var W=this._containerBottom=-y.y,le=this._containerLeft=-Math.round(this._containerWidth/2)+y.x;this._container.style.bottom=W+"px",this._container.style.left=le+"px"}},_getAnchor:function(){return[0,0]}});Jr.include({_initOverlay:function(u,y,P,W){var le=y;return le instanceof u||(le=new u(W).setContent(y)),P&&le.setLatLng(P),le}}),Ur.include({_initOverlay:function(u,y,P,W){var le=P;return le instanceof u?(E(le,W),le._source=this):(le=y&&!W?y:new u(W,this),le.setContent(P)),le}});var es=xo.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,xo.prototype.openOn.call(this,u)},onAdd:function(u){xo.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Xo||this._source.on("preclick",pl))},onRemove:function(u){xo.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Xo||this._source.off("preclick",pl))},getEvents:function(){var u=xo.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",y=this._container=br("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),P=this._wrapper=br("div",u+"-content-wrapper",y);if(this._contentNode=br("div",u+"-content",P),su(y),Ju(this._contentNode),_r(y,"contextmenu",pl),this._tipContainer=br("div",u+"-tip-container",y),this._tip=br("div",u+"-tip",this._tipContainer),this.options.closeButton){var W=this._closeButton=br("a",u+"-close-button",y);W.setAttribute("role","button"),W.setAttribute("aria-label","Close popup"),W.href="#close",W.innerHTML='<span aria-hidden="true">&#215;</span>',_r(W,"click",function(le){Pr(le),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,y=u.style;y.width="",y.whiteSpace="nowrap";var P=u.offsetWidth;P=Math.min(P,this.options.maxWidth),P=Math.max(P,this.options.minWidth),y.width=P+1+"px",y.whiteSpace="",y.height="";var W=u.offsetHeight,le=this.options.maxHeight,Pe="leaflet-popup-scrolled";le&&W>le?(y.height=le+"px",Nn(u,Pe)):$r(u,Pe),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),P=this._getAnchor();ai(this._container,y.add(P))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,y=parseInt(On(this._container,"marginBottom"),10)||0,P=this._container.offsetHeight+y,W=this._containerWidth,le=new J(this._containerLeft,-P-this._containerBottom);le._add(ms(this._container));var Pe=u.layerPointToContainerPoint(le),lt=Le(this.options.autoPanPadding),Dt=Le(this.options.autoPanPaddingTopLeft||lt),qt=Le(this.options.autoPanPaddingBottomRight||lt),hn=u.getSize(),Fn=0,tr=0;Pe.x+W+qt.x>hn.x&&(Fn=Pe.x+W-hn.x+qt.x),Pe.x-Fn-Dt.x<0&&(Fn=Pe.x-Dt.x),Pe.y+P+qt.y>hn.y&&(tr=Pe.y+P-hn.y+qt.y),Pe.y-tr-Dt.y<0&&(tr=Pe.y-Dt.y),(Fn||tr)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([Fn,tr]))}},_getAnchor:function(){return Le(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ta=function(u,y){return new es(u,y)};Jr.mergeOptions({closePopupOnClick:!0}),Jr.include({openPopup:function(u,y,P){return this._initOverlay(es,u,y,P).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),Ur.include({bindPopup:function(u,y){return this._popup=this._initOverlay(es,this._popup,u,y),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof bo||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){qr(u);var y=u.layer||u.target;if(this._popup._source===y&&!(y instanceof Xo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=y,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var Ya=xo.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){xo.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){xo.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=xo.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",y=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=br("div",y),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var y,P,W=this._map,le=this._container,Pe=W.latLngToContainerPoint(W.getCenter()),lt=W.layerPointToContainerPoint(u),Dt=this.options.direction,qt=le.offsetWidth,hn=le.offsetHeight,Fn=Le(this.options.offset),tr=this._getAnchor();Dt==="top"?(y=qt/2,P=hn):Dt==="bottom"?(y=qt/2,P=0):Dt==="center"?(y=qt/2,P=hn/2):Dt==="right"?(y=0,P=hn/2):Dt==="left"?(y=qt,P=hn/2):lt.x<Pe.x?(Dt="right",y=0,P=hn/2):(Dt="left",y=qt+(Fn.x+tr.x)*2,P=hn/2),u=u.subtract(Le(y,P,!0)).add(Fn).add(tr),$r(le,"leaflet-tooltip-right"),$r(le,"leaflet-tooltip-left"),$r(le,"leaflet-tooltip-top"),$r(le,"leaflet-tooltip-bottom"),Nn(le,"leaflet-tooltip-"+Dt),ai(le,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&Er(this._container,u)},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(y)},_getAnchor:function(){return Le(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Da=function(u,y){return new Ya(u,y)};Jr.include({openTooltip:function(u,y,P){return this._initOverlay(Ya,u,y,P).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),Ur.include({bindTooltip:function(u,y){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ya,this._tooltip,u,y),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var y=u?"off":"on",P={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?P.add=this._openTooltip:(P.mouseover=this._openTooltip,P.mouseout=this.closeTooltip,P.click=this._openTooltip,this._map?this._addFocusListeners():P.add=this._addFocusListeners),this._tooltip.options.sticky&&(P.mousemove=this._moveTooltip),this[y](P),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof bo||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var y=typeof u.getElement=="function"&&u.getElement();y&&(_r(y,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),_r(y,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var y=typeof u.getElement=="function"&&u.getElement();y&&y.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var y=this;this._map.once("moveend",function(){y._openOnceFlag=!1,y._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var y=u.latlng,P,W;this._tooltip.options.sticky&&u.originalEvent&&(P=this._map.mouseEventToContainerPoint(u.originalEvent),W=this._map.containerPointToLayerPoint(P),y=this._map.layerPointToLatLng(W)),this._tooltip.setLatLng(y)}});var Oa=Ma.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var y=u&&u.tagName==="DIV"?u:document.createElement("div"),P=this.options;if(P.html instanceof Element?(Hi(y),y.appendChild(P.html)):y.innerHTML=P.html!==!1?P.html:"",P.bgPos){var W=Le(P.bgPos);y.style.backgroundPosition=-W.x+"px "+-W.y+"px"}return this._setIconStyles(y,"icon"),y},createShadow:function(){return null}});function Na(u){return new Oa(u)}Ma.Default=ml;var Qr=Ur.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ut.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){E(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),Wn(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ki(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ds(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof J?u:new J(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var y=this.getPane().children,P=-u(-1/0,1/0),W=0,le=y.length,Pe;W<le;W++)Pe=y[W].style.zIndex,y[W]!==this._container&&Pe&&(P=u(P,+Pe));isFinite(P)&&(this.options.zIndex=P+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ut.ielt9){Er(this._container,this.options.opacity);var u=+new Date,y=!1,P=!1;for(var W in this._tiles){var le=this._tiles[W];if(!(!le.current||!le.loaded)){var Pe=Math.min(1,(u-le.loaded)/200);Er(le.el,Pe),Pe<1?y=!0:(le.active?P=!0:this._onOpaqueTile(le),le.active=!0)}}P&&!this._noPrune&&this._pruneTiles(),y&&(B(this._fadeFrame),this._fadeFrame=I(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=br("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,y=this.options.maxZoom;if(u!==void 0){for(var P in this._levels)P=Number(P),this._levels[P].el.children.length||P===u?(this._levels[P].el.style.zIndex=y-Math.abs(u-P),this._onUpdateLevel(P)):(Wn(this._levels[P].el),this._removeTilesAtZoom(P),this._onRemoveLevel(P),delete this._levels[P]);var W=this._levels[u],le=this._map;return W||(W=this._levels[u]={},W.el=br("div","leaflet-tile-container leaflet-zoom-animated",this._container),W.el.style.zIndex=y,W.origin=le.project(le.unproject(le.getPixelOrigin()),u).round(),W.zoom=u,this._setZoomTransform(W,le.getCenter(),le.getZoom()),p(W.el.offsetWidth),this._onCreateLevel(W)),this._level=W,W}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var u,y,P=this._map.getZoom();if(P>this.options.maxZoom||P<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)y=this._tiles[u],y.retain=y.current;for(u in this._tiles)if(y=this._tiles[u],y.current&&!y.active){var W=y.coords;this._retainParent(W.x,W.y,W.z,W.z-5)||this._retainChildren(W.x,W.y,W.z,W.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var y in this._tiles)this._tiles[y].coords.z===u&&this._removeTile(y)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)Wn(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,y,P,W){var le=Math.floor(u/2),Pe=Math.floor(y/2),lt=P-1,Dt=new J(+le,+Pe);Dt.z=+lt;var qt=this._tileCoordsToKey(Dt),hn=this._tiles[qt];return hn&&hn.active?(hn.retain=!0,!0):(hn&&hn.loaded&&(hn.retain=!0),lt>W?this._retainParent(le,Pe,lt,W):!1)},_retainChildren:function(u,y,P,W){for(var le=2*u;le<2*u+2;le++)for(var Pe=2*y;Pe<2*y+2;Pe++){var lt=new J(le,Pe);lt.z=P+1;var Dt=this._tileCoordsToKey(lt),qt=this._tiles[Dt];if(qt&&qt.active){qt.retain=!0;continue}else qt&&qt.loaded&&(qt.retain=!0);P+1<W&&this._retainChildren(le,Pe,P+1,W)}},_resetView:function(u){var y=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),y,y)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var y=this.options;return y.minNativeZoom!==void 0&&u<y.minNativeZoom?y.minNativeZoom:y.maxNativeZoom!==void 0&&y.maxNativeZoom<u?y.maxNativeZoom:u},_setView:function(u,y,P,W){var le=Math.round(y);this.options.maxZoom!==void 0&&le>this.options.maxZoom||this.options.minZoom!==void 0&&le<this.options.minZoom?le=void 0:le=this._clampZoom(le);var Pe=this.options.updateWhenZooming&&le!==this._tileZoom;(!W||Pe)&&(this._tileZoom=le,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),le!==void 0&&this._update(u),P||this._pruneTiles(),this._noPrune=!!P),this._setZoomTransforms(u,y)},_setZoomTransforms:function(u,y){for(var P in this._levels)this._setZoomTransform(this._levels[P],u,y)},_setZoomTransform:function(u,y,P){var W=this._map.getZoomScale(P,u.zoom),le=u.origin.multiplyBy(W).subtract(this._map._getNewPixelOrigin(y,P)).round();Ut.any3d?Fr(u.el,le,W):ai(u.el,le)},_resetGrid:function(){var u=this._map,y=u.options.crs,P=this._tileSize=this.getTileSize(),W=this._tileZoom,le=this._map.getPixelWorldBounds(this._tileZoom);le&&(this._globalTileRange=this._pxBoundsToTileRange(le)),this._wrapX=y.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,y.wrapLng[0]],W).x/P.x),Math.ceil(u.project([0,y.wrapLng[1]],W).x/P.y)],this._wrapY=y.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([y.wrapLat[0],0],W).y/P.x),Math.ceil(u.project([y.wrapLat[1],0],W).y/P.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var y=this._map,P=y._animatingZoom?Math.max(y._animateToZoom,y.getZoom()):y.getZoom(),W=y.getZoomScale(P,this._tileZoom),le=y.project(u,this._tileZoom).floor(),Pe=y.getSize().divideBy(W*2);return new Oe(le.subtract(Pe),le.add(Pe))},_update:function(u){var y=this._map;if(y){var P=this._clampZoom(y.getZoom());if(u===void 0&&(u=y.getCenter()),this._tileZoom!==void 0){var W=this._getTiledPixelBounds(u),le=this._pxBoundsToTileRange(W),Pe=le.getCenter(),lt=[],Dt=this.options.keepBuffer,qt=new Oe(le.getBottomLeft().subtract([Dt,-Dt]),le.getTopRight().add([Dt,-Dt]));if(!(isFinite(le.min.x)&&isFinite(le.min.y)&&isFinite(le.max.x)&&isFinite(le.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var hn in this._tiles){var Fn=this._tiles[hn].coords;(Fn.z!==this._tileZoom||!qt.contains(new J(Fn.x,Fn.y)))&&(this._tiles[hn].current=!1)}if(Math.abs(P-this._tileZoom)>1){this._setView(u,P);return}for(var tr=le.min.y;tr<=le.max.y;tr++)for(var jr=le.min.x;jr<=le.max.x;jr++){var ks=new J(jr,tr);if(ks.z=this._tileZoom,!!this._isValidTile(ks)){var ls=this._tiles[this._tileCoordsToKey(ks)];ls?ls.current=!0:lt.push(ks)}}if(lt.sort(function(ts,Ro){return ts.distanceTo(Pe)-Ro.distanceTo(Pe)}),lt.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Gs=document.createDocumentFragment();for(jr=0;jr<lt.length;jr++)this._addTile(lt[jr],Gs);this._level.el.appendChild(Gs)}}}},_isValidTile:function(u){var y=this._map.options.crs;if(!y.infinite){var P=this._globalTileRange;if(!y.wrapLng&&(u.x<P.min.x||u.x>P.max.x)||!y.wrapLat&&(u.y<P.min.y||u.y>P.max.y))return!1}if(!this.options.bounds)return!0;var W=this._tileCoordsToBounds(u);return se(this.options.bounds).overlaps(W)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var y=this._map,P=this.getTileSize(),W=u.scaleBy(P),le=W.add(P),Pe=y.unproject(W,u.z),lt=y.unproject(le,u.z);return[Pe,lt]},_tileCoordsToBounds:function(u){var y=this._tileCoordsToNwSe(u),P=new G(y[0],y[1]);return this.options.noWrap||(P=this._map.wrapLatLngBounds(P)),P},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var y=u.split(":"),P=new J(+y[0],+y[1]);return P.z=+y[2],P},_removeTile:function(u){var y=this._tiles[u];y&&(Wn(y.el),delete this._tiles[u],this.fire("tileunload",{tile:y.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){Nn(u,"leaflet-tile");var y=this.getTileSize();u.style.width=y.x+"px",u.style.height=y.y+"px",u.onselectstart=p,u.onmousemove=p,Ut.ielt9&&this.options.opacity<1&&Er(u,this.options.opacity)},_addTile:function(u,y){var P=this._getTilePos(u),W=this._tileCoordsToKey(u),le=this.createTile(this._wrapCoords(u),o(this._tileReady,this,u));this._initTile(le),this.createTile.length<2&&I(o(this._tileReady,this,u,null,le)),ai(le,P),this._tiles[W]={el:le,coords:u,current:!0},y.appendChild(le),this.fire("tileloadstart",{tile:le,coords:u})},_tileReady:function(u,y,P){y&&this.fire("tileerror",{error:y,tile:P,coords:u});var W=this._tileCoordsToKey(u);P=this._tiles[W],P&&(P.loaded=+new Date,this._map._fadeAnimated?(Er(P.el,0),B(this._fadeFrame),this._fadeFrame=I(this._updateOpacity,this)):(P.active=!0,this._pruneTiles()),y||(Nn(P.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:P.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ut.ielt9||!this._map._fadeAnimated?I(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var y=new J(this._wrapX?d(u.x,this._wrapX):u.x,this._wrapY?d(u.y,this._wrapY):u.y);return y.z=u.z,y},_pxBoundsToTileRange:function(u){var y=this.getTileSize();return new Oe(u.min.unscaleBy(y).floor(),u.max.unscaleBy(y).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function va(u){return new Qr(u)}var Us=Qr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,y){this._url=u,y=E(this,y),y.detectRetina&&Ut.retina&&y.maxZoom>0?(y.tileSize=Math.floor(y.tileSize/2),y.zoomReverse?(y.zoomOffset--,y.minZoom=Math.min(y.maxZoom,y.minZoom+1)):(y.zoomOffset++,y.maxZoom=Math.max(y.minZoom,y.maxZoom-1)),y.minZoom=Math.max(0,y.minZoom)):y.zoomReverse?y.minZoom=Math.min(y.maxZoom,y.minZoom):y.maxZoom=Math.max(y.minZoom,y.maxZoom),typeof y.subdomains=="string"&&(y.subdomains=y.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,y){return this._url===u&&y===void 0&&(y=!0),this._url=u,y||this.redraw(),this},createTile:function(u,y){var P=document.createElement("img");return _r(P,"load",o(this._tileOnLoad,this,y,P)),_r(P,"error",o(this._tileOnError,this,y,P)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(P.referrerPolicy=this.options.referrerPolicy),P.alt="",P.src=this.getTileUrl(u),P},getTileUrl:function(u){var y={r:Ut.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var P=this._globalTileRange.max.y-u.y;this.options.tms&&(y.y=P),y["-y"]=P}return O(this._url,i(y,this.options))},_tileOnLoad:function(u,y){Ut.ielt9?setTimeout(o(u,this,null,y),0):u(null,y)},_tileOnError:function(u,y,P){var W=this.options.errorTileUrl;W&&y.getAttribute("src")!==W&&(y.src=W),u(P,y)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,y=this.options.maxZoom,P=this.options.zoomReverse,W=this.options.zoomOffset;return P&&(u=y-u),u+W},_getSubdomain:function(u){var y=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[y]},_abortLoading:function(){var u,y;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(y=this._tiles[u].el,y.onload=p,y.onerror=p,!y.complete)){y.src=ne;var P=this._tiles[u].coords;Wn(y),delete this._tiles[u],this.fire("tileabort",{tile:y,coords:P})}},_removeTile:function(u){var y=this._tiles[u];if(y)return y.el.setAttribute("src",ne),Qr.prototype._removeTile.call(this,u)},_tileReady:function(u,y,P){if(!(!this._map||P&&P.getAttribute("src")===ne))return Qr.prototype._tileReady.call(this,u,y,P)}});function Ei(u,y){return new Us(u,y)}var Bi=Us.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,y){this._url=u;var P=i({},this.defaultWmsParams);for(var W in y)W in this.options||(P[W]=y[W]);y=E(this,y);var le=y.detectRetina&&Ut.retina?2:1,Pe=this.getTileSize();P.width=Pe.x*le,P.height=Pe.y*le,this.wmsParams=P},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var y=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[y]=this._crs.code,Us.prototype.onAdd.call(this,u)},getTileUrl:function(u){var y=this._tileCoordsToNwSe(u),P=this._crs,W=Z(P.project(y[0]),P.project(y[1])),le=W.min,Pe=W.max,lt=(this._wmsVersion>=1.3&&this._crs===Es?[le.y,le.x,Pe.y,Pe.x]:[le.x,le.y,Pe.x,Pe.y]).join(","),Dt=Us.prototype.getTileUrl.call(this,u);return Dt+M(this.wmsParams,Dt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+lt},setParams:function(u,y){return i(this.wmsParams,u),y||this.redraw(),this}});function ws(u,y){return new Bi(u,y)}Us.WMS=Bi,Ei.wms=ws;var Gi=Ur.extend({options:{padding:.1},initialize:function(u){E(this,u),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Nn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,y){var P=this._map.getZoomScale(y,this._zoom),W=this._map.getSize().multiplyBy(.5+this.options.padding),le=this._map.project(this._center,y),Pe=W.multiplyBy(-P).add(le).subtract(this._map._getNewPixelOrigin(u,y));Ut.any3d?Fr(this._container,Pe,P):ai(this._container,Pe)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,y=this._map.getSize(),P=this._map.containerPointToLayerPoint(y.multiplyBy(-u)).round();this._bounds=new Oe(P,P.add(y.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Qo=Gi.extend({options:{tolerance:0},getEvents:function(){var u=Gi.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Gi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");_r(u,"mousemove",this._onMouseMove,this),_r(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),_r(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,Wn(this._container),Xr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var y in this._layers)u=this._layers[y],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Gi.prototype._update.call(this);var u=this._bounds,y=this._container,P=u.getSize(),W=Ut.retina?2:1;ai(y,u.min),y.width=W*P.x,y.height=W*P.y,y.style.width=P.x+"px",y.style.height=P.y+"px",Ut.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){Gi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[l(u)]=u;var y=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=y),this._drawLast=y,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var y=u._order,P=y.next,W=y.prev;P?P.prev=W:this._drawLast=W,W?W.next=P:this._drawFirst=P,delete u._order,delete this._layers[l(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var y=u.options.dashArray.split(/[, ]+/),P=[],W,le;for(le=0;le<y.length;le++){if(W=Number(y[le]),isNaN(W))return;P.push(W)}u.options._dashArray=P}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||I(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var y=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Oe,this._redrawBounds.extend(u._pxBounds.min.subtract([y,y])),this._redrawBounds.extend(u._pxBounds.max.add([y,y]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var y=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,y.x,y.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,y=this._redrawBounds;if(this._ctx.save(),y){var P=y.getSize();this._ctx.beginPath(),this._ctx.rect(y.min.x,y.min.y,P.x,P.y),this._ctx.clip()}this._drawing=!0;for(var W=this._drawFirst;W;W=W.next)u=W.layer,(!y||u._pxBounds&&u._pxBounds.intersects(y))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,y){if(this._drawing){var P,W,le,Pe,lt=u._parts,Dt=lt.length,qt=this._ctx;if(Dt){for(qt.beginPath(),P=0;P<Dt;P++){for(W=0,le=lt[P].length;W<le;W++)Pe=lt[P][W],qt[W?"lineTo":"moveTo"](Pe.x,Pe.y);y&&qt.closePath()}this._fillStroke(qt,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var y=u._point,P=this._ctx,W=Math.max(Math.round(u._radius),1),le=(Math.max(Math.round(u._radiusY),1)||W)/W;le!==1&&(P.save(),P.scale(1,le)),P.beginPath(),P.arc(y.x,y.y/le,W,0,Math.PI*2,!1),le!==1&&P.restore(),this._fillStroke(P,u)}},_fillStroke:function(u,y){var P=y.options;P.fill&&(u.globalAlpha=P.fillOpacity,u.fillStyle=P.fillColor||P.color,u.fill(P.fillRule||"evenodd")),P.stroke&&P.weight!==0&&(u.setLineDash&&u.setLineDash(y.options&&y.options._dashArray||[]),u.globalAlpha=P.opacity,u.lineWidth=P.weight,u.strokeStyle=P.color,u.lineCap=P.lineCap,u.lineJoin=P.lineJoin,u.stroke())},_onClick:function(u){for(var y=this._map.mouseEventToLayerPoint(u),P,W,le=this._drawFirst;le;le=le.next)P=le.layer,P.options.interactive&&P._containsPoint(y)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(P))&&(W=P);this._fireEvent(W?[W]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var y=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,y)}},_handleMouseOut:function(u){var y=this._hoveredLayer;y&&($r(this._container,"leaflet-interactive"),this._fireEvent([y],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,y){if(!this._mouseHoverThrottled){for(var P,W,le=this._drawFirst;le;le=le.next)P=le.layer,P.options.interactive&&P._containsPoint(y)&&(W=P);W!==this._hoveredLayer&&(this._handleMouseOut(u),W&&(Nn(this._container,"leaflet-interactive"),this._fireEvent([W],u,"mouseover"),this._hoveredLayer=W)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,y,P){this._map._fireDOMEvent(y,P||y.type,u)},_bringToFront:function(u){var y=u._order;if(y){var P=y.next,W=y.prev;if(P)P.prev=W;else return;W?W.next=P:P&&(this._drawFirst=P),y.prev=this._drawLast,this._drawLast.next=y,y.next=null,this._drawLast=y,this._requestRedraw(u)}},_bringToBack:function(u){var y=u._order;if(y){var P=y.next,W=y.prev;if(W)W.next=P;else return;P?P.prev=W:W&&(this._drawLast=W),y.prev=null,y.next=this._drawFirst,this._drawFirst.prev=y,this._drawFirst=y,this._requestRedraw(u)}}});function Io(u){return Ut.canvas?new Qo(u):null}var sa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ec={_initContainer:function(){this._container=br("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Gi.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var y=u._container=sa("shape");Nn(y,"leaflet-vml-shape "+(this.options.className||"")),y.coordsize="1 1",u._path=sa("path"),y.appendChild(u._path),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){var y=u._container;this._container.appendChild(y),u.options.interactive&&u.addInteractiveTarget(y)},_removePath:function(u){var y=u._container;Wn(y),u.removeInteractiveTarget(y),delete this._layers[l(u)]},_updateStyle:function(u){var y=u._stroke,P=u._fill,W=u.options,le=u._container;le.stroked=!!W.stroke,le.filled=!!W.fill,W.stroke?(y||(y=u._stroke=sa("stroke")),le.appendChild(y),y.weight=W.weight+"px",y.color=W.color,y.opacity=W.opacity,W.dashArray?y.dashStyle=z(W.dashArray)?W.dashArray.join(" "):W.dashArray.replace(/( *, *)/g," "):y.dashStyle="",y.endcap=W.lineCap.replace("butt","flat"),y.joinstyle=W.lineJoin):y&&(le.removeChild(y),u._stroke=null),W.fill?(P||(P=u._fill=sa("fill")),le.appendChild(P),P.color=W.fillColor||W.color,P.opacity=W.fillOpacity):P&&(le.removeChild(P),u._fill=null)},_updateCircle:function(u){var y=u._point.round(),P=Math.round(u._radius),W=Math.round(u._radiusY||P);this._setPath(u,u._empty()?"M0 0":"AL "+y.x+","+y.y+" "+P+","+W+" 0,"+65535*360)},_setPath:function(u,y){u._path.v=y},_bringToFront:function(u){Ki(u._container)},_bringToBack:function(u){ds(u._container)}},Ia=Ut.vml?sa:ie,Ms=Gi.extend({_initContainer:function(){this._container=Ia("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ia("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Wn(this._container),Xr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Gi.prototype._update.call(this);var u=this._bounds,y=u.getSize(),P=this._container;(!this._svgSize||!this._svgSize.equals(y))&&(this._svgSize=y,P.setAttribute("width",y.x),P.setAttribute("height",y.y)),ai(P,u.min),P.setAttribute("viewBox",[u.min.x,u.min.y,y.x,y.y].join(" ")),this.fire("update")}},_initPath:function(u){var y=u._path=Ia("path");u.options.className&&Nn(y,u.options.className),u.options.interactive&&Nn(y,"leaflet-interactive"),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){Wn(u._path),u.removeInteractiveTarget(u._path),delete this._layers[l(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var y=u._path,P=u.options;y&&(P.stroke?(y.setAttribute("stroke",P.color),y.setAttribute("stroke-opacity",P.opacity),y.setAttribute("stroke-width",P.weight),y.setAttribute("stroke-linecap",P.lineCap),y.setAttribute("stroke-linejoin",P.lineJoin),P.dashArray?y.setAttribute("stroke-dasharray",P.dashArray):y.removeAttribute("stroke-dasharray"),P.dashOffset?y.setAttribute("stroke-dashoffset",P.dashOffset):y.removeAttribute("stroke-dashoffset")):y.setAttribute("stroke","none"),P.fill?(y.setAttribute("fill",P.fillColor||P.color),y.setAttribute("fill-opacity",P.fillOpacity),y.setAttribute("fill-rule",P.fillRule||"evenodd")):y.setAttribute("fill","none"))},_updatePoly:function(u,y){this._setPath(u,fe(u._parts,y))},_updateCircle:function(u){var y=u._point,P=Math.max(Math.round(u._radius),1),W=Math.max(Math.round(u._radiusY),1)||P,le="a"+P+","+W+" 0 1,0 ",Pe=u._empty()?"M0 0":"M"+(y.x-P)+","+y.y+le+P*2+",0 "+le+-P*2+",0 ";this._setPath(u,Pe)},_setPath:function(u,y){u._path.setAttribute("d",y)},_bringToFront:function(u){Ki(u._path)},_bringToBack:function(u){ds(u._path)}});Ut.vml&&Ms.include(ec);function Vi(u){return Ut.svg||Ut.vml?new Ms(u):null}Jr.include({getRenderer:function(u){var y=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return y||(y=this._renderer=this._createRenderer()),this.hasLayer(y)||this.addLayer(y),y},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var y=this._paneRenderers[u];return y===void 0&&(y=this._createRenderer({pane:u}),this._paneRenderers[u]=y),y},_createRenderer:function(u){return this.options.preferCanvas&&Io(u)||Vi(u)}});var io=Ns.extend({initialize:function(u,y){Ns.prototype.initialize.call(this,this._boundsToLatLngs(u),y)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=se(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function Bo(u,y){return new io(u,y)}Ms.create=Ia,Ms.pointsToPath=fe,eo.geometryToLayer=to,eo.coordsToLatLng=qa,eo.coordsToLatLngs=no,eo.latLngToCoords=Vs,eo.latLngsToCoords=Aa,eo.getFeature=Jo,eo.asFeature=ro,Jr.mergeOptions({boxZoom:!0});var gr=xi.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){_r(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Xr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Wn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Oo(),mi(),this._startPoint=this._map.mouseEventToContainerPoint(u),_r(document,{contextmenu:qr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=br("div","leaflet-zoom-box",this._container),Nn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var y=new Oe(this._point,this._startPoint),P=y.getSize();ai(this._box,y.min),this._box.style.width=P.x+"px",this._box.style.height=P.y+"px"},_finish:function(){this._moved&&(Wn(this._box),$r(this._container,"leaflet-crosshair")),Xs(),go(),Xr(document,{contextmenu:qr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var y=new G(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(y).fire("boxzoomend",{boxZoomBounds:y})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Jr.addInitHook("addHandler","boxZoom",gr),Jr.mergeOptions({doubleClickZoom:!0});var Ka=xi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var y=this._map,P=y.getZoom(),W=y.options.zoomDelta,le=u.originalEvent.shiftKey?P-W:P+W;y.options.doubleClickZoom==="center"?y.setZoom(le):y.setZoomAround(u.containerPoint,le)}});Jr.addInitHook("addHandler","doubleClickZoom",Ka),Jr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Za=xi.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new ga(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}Nn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){$r(this._map._container,"leaflet-grab"),$r(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var y=se(this._map.options.maxBounds);this._offsetLimit=Z(this._map.latLngToContainerPoint(y.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(y.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var y=this._lastTime=+new Date,P=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(P),this._times.push(y),this._prunePositions(y)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),y=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=y.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,y){return u-(u-y)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),y=this._offsetLimit;u.x<y.min.x&&(u.x=this._viscousLimit(u.x,y.min.x)),u.y<y.min.y&&(u.y=this._viscousLimit(u.y,y.min.y)),u.x>y.max.x&&(u.x=this._viscousLimit(u.x,y.max.x)),u.y>y.max.y&&(u.y=this._viscousLimit(u.y,y.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,y=Math.round(u/2),P=this._initialWorldOffset,W=this._draggable._newPos.x,le=(W-y+P)%u+y-P,Pe=(W+y+P)%u-y-P,lt=Math.abs(le+P)<Math.abs(Pe+P)?le:Pe;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=lt},_onDragEnd:function(u){var y=this._map,P=y.options,W=!P.inertia||u.noInertia||this._times.length<2;if(y.fire("dragend",u),W)y.fire("moveend");else{this._prunePositions(+new Date);var le=this._lastPos.subtract(this._positions[0]),Pe=(this._lastTime-this._times[0])/1e3,lt=P.easeLinearity,Dt=le.multiplyBy(lt/Pe),qt=Dt.distanceTo([0,0]),hn=Math.min(P.inertiaMaxSpeed,qt),Fn=Dt.multiplyBy(hn/qt),tr=hn/(P.inertiaDeceleration*lt),jr=Fn.multiplyBy(-tr/2).round();!jr.x&&!jr.y?y.fire("moveend"):(jr=y._limitOffset(jr,y.options.maxBounds),I(function(){y.panBy(jr,{duration:tr,easeLinearity:lt,noMoveStart:!0,animate:!0})}))}}});Jr.addInitHook("addHandler","dragging",Za),Jr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ya=xi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),_r(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Xr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,y=document.documentElement,P=u.scrollTop||y.scrollTop,W=u.scrollLeft||y.scrollLeft;this._map._container.focus(),window.scrollTo(W,P)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var y=this._panKeys={},P=this.keyCodes,W,le;for(W=0,le=P.left.length;W<le;W++)y[P.left[W]]=[-1*u,0];for(W=0,le=P.right.length;W<le;W++)y[P.right[W]]=[u,0];for(W=0,le=P.down.length;W<le;W++)y[P.down[W]]=[0,u];for(W=0,le=P.up.length;W<le;W++)y[P.up[W]]=[0,-1*u]},_setZoomDelta:function(u){var y=this._zoomKeys={},P=this.keyCodes,W,le;for(W=0,le=P.zoomIn.length;W<le;W++)y[P.zoomIn[W]]=u;for(W=0,le=P.zoomOut.length;W<le;W++)y[P.zoomOut[W]]=-u},_addHooks:function(){_r(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Xr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var y=u.keyCode,P=this._map,W;if(y in this._panKeys){if(!P._panAnim||!P._panAnim._inProgress)if(W=this._panKeys[y],u.shiftKey&&(W=Le(W).multiplyBy(3)),P.options.maxBounds&&(W=P._limitOffset(Le(W),P.options.maxBounds)),P.options.worldCopyJump){var le=P.wrapLatLng(P.unproject(P.project(P.getCenter()).add(W)));P.panTo(le)}else P.panBy(W)}else if(y in this._zoomKeys)P.setZoom(P.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[y]);else if(y===27&&P._popup&&P._popup.options.closeOnEscapeKey)P.closePopup();else return;qr(u)}}});Jr.addInitHook("addHandler","keyboard",ya),Jr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Lo=xi.extend({addHooks:function(){_r(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Xr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var y=Pu(u),P=this._map.options.wheelDebounceTime;this._delta+=y,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var W=Math.max(P-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),W),qr(u)},_performZoom:function(){var u=this._map,y=u.getZoom(),P=this._map.options.zoomSnap||0;u._stop();var W=this._delta/(this._map.options.wheelPxPerZoomLevel*4),le=4*Math.log(2/(1+Math.exp(-Math.abs(W))))/Math.LN2,Pe=P?Math.ceil(le/P)*P:le,lt=u._limitZoom(y+(this._delta>0?Pe:-Pe))-y;this._delta=0,this._startTime=null,lt&&(u.options.scrollWheelZoom==="center"?u.setZoom(y+lt):u.setZoomAround(this._lastMousePos,y+lt))}});Jr.addInitHook("addHandler","scrollWheelZoom",Lo);var ih=600;Jr.mergeOptions({tapHold:Ut.touchNative&&Ut.safari&&Ut.mobile,tapTolerance:15});var Hs=xi.extend({addHooks:function(){_r(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Xr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var y=u.touches[0];this._startPos=this._newPos=new J(y.clientX,y.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(_r(document,"touchend",Pr),_r(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",y))},this),ih),_r(document,"touchend touchcancel contextmenu",this._cancel,this),_r(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){Xr(document,"touchend",Pr),Xr(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),Xr(document,"touchend touchcancel contextmenu",this._cancel,this),Xr(document,"touchmove",this._onMove,this)},_onMove:function(u){var y=u.touches[0];this._newPos=new J(y.clientX,y.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,y){var P=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:y.screenX,screenY:y.screenY,clientX:y.clientX,clientY:y.clientY});P._simulated=!0,y.target.dispatchEvent(P)}});Jr.addInitHook("addHandler","tapHold",Hs),Jr.mergeOptions({touchZoom:Ut.touch,bounceAtZoomLimits:!0});var Ws=xi.extend({addHooks:function(){Nn(this._map._container,"leaflet-touch-zoom"),_r(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){$r(this._map._container,"leaflet-touch-zoom"),Xr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var y=this._map;if(!(!u.touches||u.touches.length!==2||y._animatingZoom||this._zooming)){var P=y.mouseEventToContainerPoint(u.touches[0]),W=y.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=y.getSize()._divideBy(2),this._startLatLng=y.containerPointToLatLng(this._centerPoint),y.options.touchZoom!=="center"&&(this._pinchStartLatLng=y.containerPointToLatLng(P.add(W)._divideBy(2))),this._startDist=P.distanceTo(W),this._startZoom=y.getZoom(),this._moved=!1,this._zooming=!0,y._stop(),_r(document,"touchmove",this._onTouchMove,this),_r(document,"touchend touchcancel",this._onTouchEnd,this),Pr(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var y=this._map,P=y.mouseEventToContainerPoint(u.touches[0]),W=y.mouseEventToContainerPoint(u.touches[1]),le=P.distanceTo(W)/this._startDist;if(this._zoom=y.getScaleZoom(le,this._startZoom),!y.options.bounceAtZoomLimits&&(this._zoom<y.getMinZoom()&&le<1||this._zoom>y.getMaxZoom()&&le>1)&&(this._zoom=y._limitZoom(this._zoom)),y.options.touchZoom==="center"){if(this._center=this._startLatLng,le===1)return}else{var Pe=P._add(W)._divideBy(2)._subtract(this._centerPoint);if(le===1&&Pe.x===0&&Pe.y===0)return;this._center=y.unproject(y.project(this._pinchStartLatLng,this._zoom).subtract(Pe),this._zoom)}this._moved||(y._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var lt=o(y._move,y,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=I(lt,this,!0),Pr(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),Xr(document,"touchmove",this._onTouchMove,this),Xr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Jr.addInitHook("addHandler","touchZoom",Ws),Jr.BoxZoom=gr,Jr.DoubleClickZoom=Ka,Jr.Drag=Za,Jr.Keyboard=ya,Jr.ScrollWheelZoom=Lo,Jr.TapHold=Hs,Jr.TouchZoom=Ws,n.Bounds=Oe,n.Browser=Ut,n.CRS=ve,n.Canvas=Qo,n.Circle=Qs,n.CircleMarker=No,n.Class=R,n.Control=cr,n.DivIcon=Oa,n.DivOverlay=xo,n.DomEvent=au,n.DomUtil=mr,n.Draggable=ga,n.Evented=re,n.FeatureGroup=bo,n.GeoJSON=eo,n.GridLayer=Qr,n.Handler=xi,n.Icon=Ma,n.ImageOverlay=In,n.LatLng=ce,n.LatLngBounds=G,n.Layer=Ur,n.LayerGroup=Js,n.LineUtil=Vr,n.Map=Jr,n.Marker=Ps,n.Mixin=kc,n.Path=Xo,n.Point=J,n.PolyUtil=Il,n.Polygon=Ns,n.Polyline=wo,n.Popup=es,n.PosAnimation=Mu,n.Projection=Si,n.Rectangle=io,n.Renderer=Gi,n.SVG=Ms,n.SVGOverlay=Ci,n.TileLayer=Us,n.Tooltip=Ya,n.Transformation=Te,n.Util=$,n.VideoOverlay=Cr,n.bind=o,n.bounds=Z,n.canvas=Io,n.circle=_o,n.circleMarker=Rl,n.control=ys,n.divIcon=Na,n.extend=i,n.featureGroup=Au,n.geoJSON=Kt,n.geoJson=Nt,n.gridLayer=va,n.icon=Qu,n.imageOverlay=Jn,n.latLng=he,n.latLngBounds=se,n.layerGroup=Bl,n.map=vs,n.marker=ka,n.point=Le,n.polygon=Wa,n.polyline=Ac,n.popup=Ta,n.rectangle=Bo,n.setOptions=E,n.stamp=l,n.svg=Vi,n.svgOverlay=du,n.tileLayer=Ei,n.tooltip=Da,n.transformation=qe,n.version=r,n.videoOverlay=Qi;var ba=window.L;n.noConflict=function(){return window.L=ba,this},window.L=n})})(mb,mb.exports);var $t=mb.exports;const Gn=j_($t);var t5={exports:{}};(function(t,e){(function(n,r){r(e)})(Sa,function(n){var r=typeof window<"u"?window:typeof Sa<"u"?Sa:typeof self<"u"?self:{};function i(c,d){return c(d={exports:{}},d.exports),d.exports}var s=i(function(c,d){(function(p){const v={escape:function(U){return U.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:m,mimeType:function(U){return U=m(U).toLowerCase(),function(){var V="application/font-woff",re="image/jpeg";return{woff:V,woff2:V,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:re,jpeg:re,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[U]||""},dataAsUrl:function(U,V){return`data:${V};base64,`+U},isDataUrl:function(U){return U.search(/^(data:)/)!==-1},canvasToBlob:function(U){return U.toBlob?new Promise(function(re){U.toBlob(re)}):(V=U,new Promise(function(re){const J=pe(V.toDataURL().split(",")[1]);var _e=J.length;const Le=new Uint8Array(_e);for(let Oe=0;Oe<_e;Oe++)Le[Oe]=J.charCodeAt(Oe);re(new Blob([Le],{type:"image/png"}))}));var V},resolveUrl:function(U,V){const re=document.implementation.createHTMLDocument(),J=re.createElement("base"),_e=(re.head.appendChild(J),re.createElement("a"));return re.body.appendChild(_e),J.href=V,_e.href=U,_e.href},getAndEncode:function(U){let V=ne.impl.urlCache.find(function(re){return re.url===U});return V||(V={url:U,promise:null},ne.impl.urlCache.push(V)),V.promise===null&&(ne.impl.options.cacheBust&&(U+=(/\?/.test(U)?"&":"?")+new Date().getTime()),V.promise=new Promise(function(re){const J=ne.impl.options.httpTimeout,_e=new XMLHttpRequest;let Le;var Oe;function Z(G){console.error(G),re("")}_e.onreadystatechange=function(){if(_e.readyState===4)if(_e.status!==200)Le?re(Le):Z(`cannot fetch resource: ${U}, status: `+_e.status);else{const G=new FileReader;G.onloadend=function(){var se=G.result.split(/,/)[1];re(se)},G.readAsDataURL(_e.response)}},_e.ontimeout=function(){Le?re(Le):Z(`timeout of ${J}ms occured while fetching resource: `+U)},_e.responseType="blob",_e.timeout=J,ne.impl.options.useCredentials&&(_e.withCredentials=!0),_e.open("GET",U,!0),_e.send(),ne.impl.options.imagePlaceholder&&(Oe=ne.impl.options.imagePlaceholder.split(/,/))&&Oe[1]&&(Le=Oe[1])})),V.promise},uid:function(){let U=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+U++}}(),delay:function(U){return function(V){return new Promise(function(re){setTimeout(function(){re(V)},U)})}},asArray:function(U){const V=[],re=U.length;for(let J=0;J<re;J++)V.push(U[J]);return V},escapeXhtml:function(U){return U.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(U){return U!=="data:,"?new Promise(function(V,re){const J=new Image;ne.impl.options.useCredentials&&(J.crossOrigin="use-credentials"),J.onload=function(){V(J)},J.onerror=re,J.src=U}):Promise.resolve()},width:function(U){var V=x(U,"border-left-width"),re=x(U,"border-right-width");return U.scrollWidth+V+re},height:function(U){var V=x(U,"border-top-width"),re=x(U,"border-bottom-width");return U.scrollHeight+V+re}};function m(U){return(U=/\.([^\.\/]*?)(\?|$)/g.exec(U))?U[1]:""}function x(U,V){const re=me(U).getPropertyValue(V);return parseFloat(re.replace("px",""))}const E=function(){const U=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(_e,Le,Oe){return V(_e)?Promise.resolve(_e).then(re).then(function(Z){let G=Promise.resolve(_e);return Z.forEach(function(se){G=G.then(function(ce){return J(ce,se,Le,Oe)})}),G}):Promise.resolve(_e)},shouldProcess:V,impl:{readUrls:re,inline:J}};function V(_e){return _e.search(U)!==-1}function re(_e){const Le=[];for(var Oe;(Oe=U.exec(_e))!==null;)Le.push(Oe[1]);return Le.filter(function(Z){return!v.isDataUrl(Z)})}function J(_e,Le,Oe,Z){return Promise.resolve(Le).then(function(G){return Oe?v.resolveUrl(G,Oe):G}).then(Z||v.getAndEncode).then(function(G){return v.dataAsUrl(G,v.mimeType(Le))}).then(function(G){return _e.replace((se=Le,new RegExp(`(url\\(['"]?)(${v.escape(se)})(['"]?\\))`,"g")),`$1${G}$3`);var se})}}(),M={resolveAll:function(){return A().then(function(U){return Promise.all(U.map(function(V){return V.resolve()}))}).then(function(U){return U.join(`
`)})},impl:{readAll:A}};function A(){return Promise.resolve(v.asArray(document.styleSheets)).then(function(V){const re=[];return V.forEach(function(J){if(Object.getPrototypeOf(J).hasOwnProperty("cssRules"))try{v.asArray(J.cssRules||[]).forEach(re.push.bind(re))}catch(_e){console.log("Error while reading CSS rules from "+J.href,_e.toString())}}),re}).then(function(V){return V.filter(function(re){return re.type===CSSRule.FONT_FACE_RULE}).filter(function(re){return E.shouldProcess(re.style.getPropertyValue("src"))})}).then(function(V){return V.map(U)});function U(V){return{resolve:function(){var re=(V.parentStyleSheet||{}).href;return E.inlineAll(V.cssText,re)},src:function(){return V.style.getPropertyValue("src")}}}}const O={inlineAll:function U(V){return V instanceof Element?function(re){const J=re.style.getPropertyValue("background");return J?E.inlineAll(J).then(function(_e){re.style.setProperty("background",_e,J)}).then(function(){return re}):Promise.resolve(re)}(V).then(function(){return V instanceof HTMLImageElement?z(V).inline():Promise.all(v.asArray(V.childNodes).map(function(re){return U(re)}))}):Promise.resolve(V)},impl:{newImage:z}};function z(U){return{inline:function(V){return v.isDataUrl(U.src)?Promise.resolve():Promise.resolve(U.src).then(V||v.getAndEncode).then(function(re){return v.dataAsUrl(re,v.mimeType(U.src))}).then(function(re){return new Promise(function(J){U.onload=J,U.onerror=J,U.src=re})})}}}const K={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},ne={toSvg:N,toPng:function(U,V){return(V=V||{}).raster=!0,j(U,V).then(function(re){return re.toDataURL()})},toJpeg:function(U,V){return(V=V||{}).raster=!0,j(U,V).then(function(re){return re.toDataURL("image/jpeg",V.quality||1)})},toBlob:function(U,V){return(V=V||{}).raster=!0,j(U,V).then(v.canvasToBlob)},toPixelData:function(U,V){return(V=V||{}).raster=!0,j(U,V).then(function(re){return re.getContext("2d").getImageData(0,0,v.width(U),v.height(U)).data})},toCanvas:function(U,V){return(V=V||{}).raster=!0,j(U,V||{})},impl:{fontFaces:M,images:O,util:v,inliner:E,urlCache:[],options:{}}},me=(c.exports=ne,p.getComputedStyle||window.getComputedStyle),pe=p.atob||window.atob;function N(U,V){var re=V=V||{};return re.imagePlaceholder===void 0?ne.impl.options.imagePlaceholder=K.imagePlaceholder:ne.impl.options.imagePlaceholder=re.imagePlaceholder,re.cacheBust===void 0?ne.impl.options.cacheBust=K.cacheBust:ne.impl.options.cacheBust=re.cacheBust,re.useCredentials===void 0?ne.impl.options.useCredentials=K.useCredentials:ne.impl.options.useCredentials=re.useCredentials,Promise.resolve(U).then(function(J){return function _e(Le,Oe,Z,G,se=null){return Z||!Oe||Oe(Le)?Promise.resolve(Le).then(function(ce){return ce instanceof HTMLCanvasElement?v.makeImage(ce.toDataURL()):ce.nodeName==="IFRAME"?html2canvas(ce.contentDocument.body).then(he=>he.toDataURL()).then(v.makeImage):ce.cloneNode(!1)}).then(function(ce){return function(he,ve){const ee=he.childNodes;return ee.length===0?Promise.resolve(ve):function(X,De){const Te=me(he);let qe=Promise.resolve();return De.forEach(function(ge){qe=qe.then(function(){return _e(ge,Oe,!1,G,Te)}).then(function(Q){Q&&X.appendChild(Q)})}),qe}(ve,v.asArray(ee)).then(function(){return ve})}(Le,ce)}).then(function(ce){return function(he,ve,ee){return ve instanceof Element?Promise.resolve().then(function(){(function(X,De){const Te=me(X);Te.cssText?(De.style.cssText=Te.cssText,function(qe,ge){ge.font=qe.font,ge.fontFamily=qe.fontFamily,ge.fontFeatureSettings=qe.fontFeatureSettings,ge.fontKerning=qe.fontKerning,ge.fontSize=qe.fontSize,ge.fontStretch=qe.fontStretch,ge.fontStyle=qe.fontStyle,ge.fontVariant=qe.fontVariant,ge.fontVariantCaps=qe.fontVariantCaps,ge.fontVariantEastAsian=qe.fontVariantEastAsian,ge.fontVariantLigatures=qe.fontVariantLigatures,ge.fontVariantNumeric=qe.fontVariantNumeric,ge.fontVariationSettings=qe.fontVariationSettings,ge.fontWeight=qe.fontWeight}(Te,De.style)):(ee?function(qe,ge,Q,ie){const fe=Q.style,Ce=qe.style;for(var de of ge){var Xe=ge.getPropertyValue(de),Ie=Ce.getPropertyValue(de),Ye=(Ce.setProperty(de,ie?"initial":"unset"),ge.getPropertyValue(de));Ye!==Xe?fe.setProperty(de,Xe):fe.removeProperty(de),Ce.setProperty(de,Ie)}}(X,Te,De,Z):function(qe,ge,Q){const ie=function(Ce){if(R[Ce])return R[Ce];$||(($=document.createElement("iframe")).style.visibility="hidden",$.style.position="fixed",document.body.appendChild($),$.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const de=document.createElement(Ce),Xe=($.contentWindow.document.body.appendChild(de),de.textContent=".",$.contentWindow.getComputedStyle(de)),Ie={};return v.asArray(Xe).forEach(function(Ye){Ie[Ye]=Ye==="width"||Ye==="height"?"auto":Xe.getPropertyValue(Ye)}),$.contentWindow.document.body.removeChild(de),R[Ce]=Ie}(Q.tagName),fe=Q.style;v.asArray(qe).forEach(function(Ce){var de=qe.getPropertyValue(Ce);(de!==ie[Ce]||ge&&de!==ge.getPropertyValue(Ce))&&fe.setProperty(Ce,de,qe.getPropertyPriority(Ce))})}(Te,se,De),Z&&(["inset-block","inset-block-start","inset-block-end"].forEach(qe=>De.style.removeProperty(qe)),["left","right","top","bottom"].forEach(qe=>{De.style.getPropertyValue(qe)&&De.style.setProperty(qe,"0px")})))})(he,ve)}).then(function(){[":before",":after"].forEach(function(X){(function(De){const Te=me(he,De),qe=Te.getPropertyValue("content");if(qe!==""&&qe!=="none"){const ge=v.uid(),Q=ve.getAttribute("class"),ie=(Q&&ve.setAttribute("class",Q+" "+ge),document.createElement("style"));ie.appendChild(function(){const fe=`.${ge}:`+De,Ce=(Te.cssText?function(){return`${Te.cssText} content: ${Te.getPropertyValue("content")};`}:function(){return v.asArray(Te).map(function(de){return de+": "+Te.getPropertyValue(de)+(Te.getPropertyPriority(de)?" !important":"")}).join("; ")+";"})();return document.createTextNode(fe+`{${Ce}}`)}()),ve.appendChild(ie)}})(X)})}).then(function(){he instanceof HTMLTextAreaElement&&(ve.innerHTML=he.value),he instanceof HTMLInputElement&&ve.setAttribute("value",he.value)}).then(function(){ve instanceof SVGElement&&(ve.setAttribute("xmlns","http://www.w3.org/2000/svg"),ve instanceof SVGRectElement&&["width","height"].forEach(function(X){const De=ve.getAttribute(X);De&&ve.style.setProperty(X,De)}))}).then(function(){return ve}):ve}(Le,ce,G)}):Promise.resolve()}(J,V.filter,!0,!V.raster)}).then(q).then(I).then(function(J){V.bgcolor&&(J.style.backgroundColor=V.bgcolor),V.width&&(J.style.width=V.width+"px"),V.height&&(J.style.height=V.height+"px"),V.style&&Object.keys(V.style).forEach(function(Le){J.style[Le]=V.style[Le]});let _e=null;return typeof V.onclone=="function"&&(_e=V.onclone(J)),Promise.resolve(_e).then(function(){return J})}).then(function(J){return J=J,_e=V.width||v.width(U),Le=V.height||v.height(U),Promise.resolve(J).then(function(Oe){return Oe.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(Oe)}).then(v.escapeXhtml).then(function(Oe){return`<foreignObject x="0" y="0" width="100%" height="100%">${Oe}</foreignObject>`}).then(function(Oe){return`<svg xmlns="http://www.w3.org/2000/svg" width="${_e}" height="${Le}">${Oe}</svg>`}).then(function(Oe){return"data:image/svg+xml;charset=utf-8,"+Oe});var _e,Le}).then(function(J){return ne.impl.urlCache=[],J})}function j(U,V){return N(U,V).then(v.makeImage).then(v.delay(0)).then(function(re){var J=typeof V.scale!="number"?1:V.scale;const _e=function(Oe,Z){const G=document.createElement("canvas");if(G.width=(V.width||v.width(Oe))*Z,G.height=(V.height||v.height(Oe))*Z,V.bgcolor){const se=G.getContext("2d");se.fillStyle=V.bgcolor,se.fillRect(0,0,G.width,G.height)}return G}(U,J),Le=_e.getContext("2d");return Le.mozImageSmoothingEnabled=!1,Le.msImageSmoothingEnabled=!1,Le.imageSmoothingEnabled=!1,re&&(Le.scale(J,J),Le.drawImage(re,0,0)),$&&(document.body.removeChild($),$=null,B&&clearTimeout(B),B=setTimeout(()=>{B=null,R={}},2e4)),_e})}function q(U){return M.resolveAll().then(function(V){const re=document.createElement("style");return U.appendChild(re),re.appendChild(document.createTextNode(V)),U})}function I(U){return O.inlineAll(U).then(function(){return U})}let B=null,$=null,R={}})(r)}),o=i(function(c,d){(function(){function p(M,A,O){var z=new XMLHttpRequest;z.open("GET",M),z.responseType="blob",z.onload=function(){E(z.response,A,O)},z.onerror=function(){console.error("could not download file")},z.send()}function v(M){var A=new XMLHttpRequest;A.open("HEAD",M,!1);try{A.send()}catch{}return 200<=A.status&&299>=A.status}function m(M){try{M.dispatchEvent(new MouseEvent("click"))}catch{var A=document.createEvent("MouseEvents");A.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),M.dispatchEvent(A)}}var x=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,E=x.saveAs||(typeof window!="object"||window!==x?function(){}:"download"in HTMLAnchorElement.prototype?function(M,A,O){var z=x.URL||x.webkitURL,K=document.createElement("a");A=A||M.name||"download",K.download=A,K.rel="noopener",typeof M=="string"?(K.href=M,K.origin===location.origin?m(K):v(K.href)?p(M,A,O):m(K,K.target="_blank")):(K.href=z.createObjectURL(M),setTimeout(function(){z.revokeObjectURL(K.href)},4e4),setTimeout(function(){m(K)},0))}:"msSaveOrOpenBlob"in navigator?function(M,A,O){if(A=A||M.name||"download",typeof M!="string")navigator.msSaveOrOpenBlob(function(K,ne){return ne===void 0?ne={autoBom:!1}:typeof ne!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),ne={autoBom:!ne}),ne.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(K.type)?new Blob(["\uFEFF",K],{type:K.type}):K}(M,O),A);else if(v(M))p(M,A,O);else{var z=document.createElement("a");z.href=M,z.target="_blank",setTimeout(function(){m(z)})}}:function(M,A,O,z){if((z=z||open("","_blank"))&&(z.document.title=z.document.body.innerText="downloading..."),typeof M=="string")return p(M,A,O);var K=M.type==="application/octet-stream",ne=/constructor/i.test(x.HTMLElement)||x.safari,me=/CriOS\/[\d]+/.test(navigator.userAgent);if((me||K&&ne)&&typeof FileReader=="object"){var pe=new FileReader;pe.onloadend=function(){var q=pe.result;q=me?q:q.replace(/^data:[^;]*;/,"data:attachment/file;"),z?z.location.href=q:location=q,z=null},pe.readAsDataURL(M)}else{var N=x.URL||x.webkitURL,j=N.createObjectURL(M);z?z.location=j:location.href=j,z=null,setTimeout(function(){N.revokeObjectURL(j)},4e4)}});x.saveAs=E.saveAs=E,c.exports=E})()}),a=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(c){var d=c.node,p=c.error;return console.warn("Map node is very big "+d.scrollWidth+"x"+d.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(p)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var c=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v={};for(var m in this.options)p.hasOwnProperty(m)?v[m]=p[m]:v[m]=this.options[m];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return c._getPixelData(v)}).then(function(x){return c._setElementsVisible(!0),c._toCanvas(x,v)}).then(function(x){return d==="image"?c._canvasToImage(x,v):d==="canvas"?x:c._canvasToBlob(x,v)}).then(function(x){return c._screenState.status=1,c._map.fire("simpleMapScreenshoter.done"),x}).catch(function(x){return c._setElementsVisible(!0),c._screenState.status=1,c._map.fire("simpleMapScreenshoter.error",{e:x}),Promise.reject(x)}),this._screenState.promise)},_setElementsVisible:function(){var c=this,d=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(p){var v=c._map._container.querySelectorAll(p),m=!0,x=!1,E=void 0;try{for(var M,A=v[Symbol.iterator]();!(m=(M=A.next()).done);m=!0)M.value.style.opacity=d===!1?0:1}catch(O){x=!0,E=O}finally{try{!m&&A.return&&A.return()}finally{if(x)throw E}}})},_canvasToImage:function(c,d){var p=d.mimeType,v=c.toDataURL(p);return v.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(v)},_canvasToBlob:function(c,d){var p=d.mimeType;return new Promise(function(v,m){c.toBlob(function(x){v(x)},p)})},_toCanvas:function(c,d){var p=d.captionOffset,v=d.caption,m=d.captionFontSize,x=d.captionFont,E=d.captionColor,M=d.captionBgColor,A=this._node,O=A.screenHeight,z=A.screenWidth,K=document.createElement("canvas");K.width=z,K.height=O;for(var ne=K.getContext("2d"),me=ne.createImageData(z,O),pe=0;pe<c.length;++pe)me.data[pe]=c[pe];ne.putImageData(me,0,0),me=null;var N=document.createElement("canvas"),j=N.getContext("2d"),q=0,I=0,B=O,$=z;if(this.options.cropImageByInnerWH===!0){for(var R=[],U=0,V=0;V<O;++V){U=0;for(var re=0;re<z;++re)c[4*V*z+4*re+4]===0&&U++;U===z&&R.push(V)}var J=this._getMinAndMaxOnValuesBreak(R);q=J.min;for(var _e=z,Le=J.max,Oe=[],Z=0,G=I;G<_e;++G){Z=0;for(var se=0;se<O;++se)c[4*se*z+4*G+4]===0&&Z++;Z===O&&Oe.push(G)}var ce=this._getMinAndMaxOnValuesBreak(Oe);I=ce.min,_e=ce.max,(I===0&&_e===0||_e===null)&&(_e=z),(q===0&&Le===0||Le===null)&&(Le=O),this.options.debugMode===!0&&(console.log("emptyYLine",R),console.log("minMaxY",J),console.log("emptyXLine",Oe),console.log("minMaxX",ce),console.log("debugX",{}),console.log("debugY",{})),q===0&&Le===O&&I===0&&_e===z||(q+=this.options.onCropBorderSize,Le-=this.options.onCropBorderSize,I+=this.options.onCropBorderSize,_e-=this.options.onCropBorderSize),B=Le-q,$=_e-I,N.width=$,N.height=B}else N.width=$,N.height=B;var he=null;return v&&(he=typeof v=="function"?v.call(this):v),he!==null&&(N.height=N.height+(p+m+p),j.beginPath(),j.rect(0,0,N.width,N.height),j.fillStyle=M,j.fill(),j.save()),j.drawImage(K,I,q,$,B,0,0,$,B),he!==null&&(j.font=m+"px "+x,j.fillStyle=E,j.fillText(he,p,B+p+m)),Promise.resolve(N)},_getMinAndMaxOnValuesBreak:function(c){for(var d=0,p=0,v=!1,m=1;m<c.length;m++){if(c[m]-1!==c[m-1]){p=c[m],v=!0;break}d=c[m]}return v===!1&&c[0]>1?(d=0,p=c[0]):v===!1&&(d=c[c.length-1]||0,p=null),{min:d,max:p}},_getPixelData:function(c){var d=this,p=c.domtoimageOptions,v=p===void 0?{}:p;return this._getPixelDataOfNormalMap(v).catch(function(m){return console.warn("May be map size very big on that zoom level, we have error:",m.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),d._getPixelDataOfBigMap(v)})},_getPixelDataOfNormalMap:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=this._map.getContainer();return this._node={node:d,screenHeight:d.scrollHeight,screenWidth:d.scrollWidth},s.toPixelData(d,c)},_getPixelDataOfBigMap:function(){var c=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=this._map.getContainer(),v=this._map.getPane("mapPane");v.style.width=2*p.clientWidth+"px",v.style.height=2*p.clientHeight+"px",v.style.overflow="hidden";var m=function(){v.style.width="initial",v.style.height="initial",v.style.overflow="initial"};return this._node={node:p,screenHeight:p.scrollHeight,screenWidth:p.scrollWidth},s.toPixelData(p,d).then(function(x){return m(),x}).catch(function(x){return m(),p.scrollHeight>=4e3||p.scrollWidth>=4e3?c.options.onPixelDataFail({plugin:c,node:p,mapPane:v,error:x,domtoimageOptions:d}):Promise.reject(x)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var c=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,d=document.head||document.getElementsByTagName("head")[0],p=document.createElement("style");p.appendChild(document.createTextNode(c)),d.appendChild(p)},_onScreenBtn:function(){var c=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(d){var p=typeof c.options.screenName=="function"?c.options.screenName.call(c):c.options.screenName;o.saveAs(d,p+".png")}).catch(function(d){c._map.fire("simpleMapScreenshoter.error",{e:d})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var c=this;return new Promise(function(d){var p=setInterval(function(){c._interaction||(d(),clearInterval(p))},100)})}}),l=(L.Control.SimpleMapScreenshoter=a,L.simpleMapScreenshoter=function(c){return new L.Control.SimpleMapScreenshoter(c)},a);n.default=l,n.SimpleMapScreenshoter=a,Object.defineProperty(n,"__esModule",{value:!0})})})(t5,t5.exports);var Sl=63710088e-1,CE={centimeters:Sl*100,centimetres:Sl*100,degrees:360/(2*Math.PI),feet:Sl*3.28084,inches:Sl*39.37,kilometers:Sl/1e3,kilometres:Sl/1e3,meters:Sl,metres:Sl,miles:Sl/1609.344,millimeters:Sl*1e3,millimetres:Sl*1e3,nauticalmiles:Sl/1852,radians:1,yards:Sl*1.0936};function Ap(t,e,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function Vv(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n5(t[0])||!n5(t[1]))throw new Error("coordinates must contain numbers");return Ap({type:"Point",coordinates:t},e,n)}function Uu(t,e,n={}){for(const i of t){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return Ap({type:"Polygon",coordinates:t},e,n)}function Hu(t,e,n={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return Ap({type:"LineString",coordinates:t},e,n)}function Ij(t,e={}){const n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function Bj(t,e,n={}){return Ap({type:"MultiPolygon",coordinates:t},e,n)}function Rj(t,e="kilometers"){const n=CE[e];if(!n)throw new Error(e+" units is invalid");return t*n}function Fj(t,e="kilometers"){const n=CE[e];if(!n)throw new Error(e+" units is invalid");return t/n}function vb(t){return t%(2*Math.PI)*180/Math.PI}function yc(t){return t%360*Math.PI/180}function n5(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function r5(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function jj(t){return t.type==="Feature"?t.geometry:t}function EE(t,e,n={}){if(n.final===!0)return zj(t,e);const r=r5(t),i=r5(e),s=yc(r[0]),o=yc(i[0]),a=yc(r[1]),l=yc(i[1]),c=Math.sin(o-s)*Math.cos(l),d=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(o-s);return vb(Math.atan2(c,d))}function zj(t,e){let n=EE(e,t);return n=(n+180)%360,n}function $j(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function z_(t,e,n,r={}){const i=$j(t),s=yc(i[0]),o=yc(i[1]),a=yc(n),l=Fj(e,r.units),c=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(a)),d=s+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(c)),p=vb(d),v=vb(c);return Vv([p,v],r.properties)}var i5=z_;function s5(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function $_(t,e,n={}){var r=s5(t),i=s5(e),s=yc(i[1]-r[1]),o=yc(i[0]-r[0]),a=yc(r[1]),l=yc(i[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return Rj(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}var X1=$_;function Vj(t,e,n={}){const i=jj(t).coordinates;let s=0;for(let o=0;o<i.length&&!(e>=s&&o===i.length-1);o++)if(s>=e){const a=e-s;if(a){const l=EE(i[o],i[o-1])-180;return z_(i[o],a,l,n)}else return Vv(i[o])}else s+=$_(i[o],i[o+1],n);return Vv(i[i.length-1])}var yb=Vj;function Uj(t,e){var n,r,i,s,o,a,l,c,d,p,v=0,m=t.type==="FeatureCollection",x=t.type==="Feature",E=m?t.features.length:1;for(n=0;n<E;n++){for(a=m?t.features[n].geometry:x?t.geometry:t,c=m?t.features[n].properties:x?t.properties:{},d=m?t.features[n].bbox:x?t.bbox:void 0,p=m?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,d,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,d,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,d,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function Hj(t,e,n){var r=n;return Uj(t,function(i,s,o,a,l){s===0&&n===void 0?r=i:r=e(r,i,s,o,a,l)}),r}function PE(t){return Hj(t,(e,n)=>e+Wj(n),0)}function Wj(t){let e=0,n;switch(t.type){case"Polygon":return o5(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=o5(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function o5(t){let e=0;if(t&&t.length>0){e+=Math.abs(a5(t[0]));for(let n=1;n<t.length;n++)e-=Math.abs(a5(t[n]))}return e}var Gj=Sl*Sl/2,J1=Math.PI/180;function a5(t){const e=t.length-1;if(e<=2)return 0;let n=0,r=0;for(;r<e;){const i=t[r],s=t[r+1===e?0:r+1],o=t[r+2>=e?(r+2)%e:r+2],a=i[0]*J1,l=s[1]*J1,c=o[0]*J1;n+=(c-a)*Math.sin(l),r++}return n*Gj}var Rc=PE;function ME(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,d=0,p=0,v,m=t.type,x=m==="FeatureCollection",E=m==="Feature",M=x?t.features.length:1,A=0;A<M;A++){c=x?t.features[A].geometry:E?t.geometry:t,v=c?c.type==="GeometryCollection":!1,a=v?c.geometries.length:1;for(var O=0;O<a;O++){var z=0,K=0;if(o=v?c.geometries[O]:c,o!==null){l=o.coordinates;var ne=o.type;switch(d=ne==="Polygon"||ne==="MultiPolygon"?1:0,ne){case null:break;case"Point":if(e(l,p,A,z,K)===!1)return!1;p++,z++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,A,z,K)===!1)return!1;p++,ne==="MultiPoint"&&z++}ne==="LineString"&&z++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-d;i++){if(e(l[r][i],p,A,z,K)===!1)return!1;p++}ne==="MultiLineString"&&z++,ne==="Polygon"&&K++}ne==="Polygon"&&z++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(K=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-d;s++){if(e(l[r][i][s],p,A,z,K)===!1)return!1;p++}K++}z++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(ME(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function qj(t,e={}){let n=0,r=0,i=0;return ME(t,function(s){n+=s[0],r+=s[1],i++}),Vv([n/i,r/i],e.properties)}var Wg=qj;function Yj(t,e,n={}){const r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&t.type==="Feature"&&t.properties?t.properties:{},s=[];for(let o=0;o<r;o++)s.push(z_(t,e,o*-360/r,n).geometry.coordinates);return s.push(s[0]),Uu([s],i)}var Kj=Yj,Zj=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Q1=Math.ceil,$u=Math.floor,ql="[BigNumber Error] ",l5=ql+"Number primitive has more than 15 significant digits: ",uc=1e14,ni=14,u5=9007199254740991,e2=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Xh=1e7,vu=1e9;function kE(t){var e,n,r,i=O.prototype={constructor:O,toString:null,valueOf:null},s=new O(1),o=20,a=4,l=-7,c=21,d=-1e7,p=1e7,v=!1,m=1,x=0,E={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},M="0123456789abcdefghijklmnopqrstuvwxyz",A=!0;function O(N,j){var q,I,B,$,R,U,V,re,J=this;if(!(J instanceof O))return new O(N,j);if(j==null){if(N&&N._isBigNumber===!0){J.s=N.s,!N.c||N.e>p?J.c=J.e=null:N.e<d?J.c=[J.e=0]:(J.e=N.e,J.c=N.c.slice());return}if((U=typeof N=="number")&&N*0==0){if(J.s=1/N<0?(N=-N,-1):1,N===~~N){for($=0,R=N;R>=10;R/=10,$++);$>p?J.c=J.e=null:(J.e=$,J.c=[N]);return}re=String(N)}else{if(!Zj.test(re=String(N)))return r(J,re,U);J.s=re.charCodeAt(0)==45?(re=re.slice(1),-1):1}($=re.indexOf("."))>-1&&(re=re.replace(".","")),(R=re.search(/e/i))>0?($<0&&($=R),$+=+re.slice(R+1),re=re.substring(0,R)):$<0&&($=re.length)}else{if(lo(j,2,M.length,"Base"),j==10&&A)return J=new O(N),me(J,o+J.e+1,a);if(re=String(N),U=typeof N=="number"){if(N*0!=0)return r(J,re,U,j);if(J.s=1/N<0?(re=re.slice(1),-1):1,O.DEBUG&&re.replace(/^0\.0*|\./,"").length>15)throw Error(l5+N)}else J.s=re.charCodeAt(0)===45?(re=re.slice(1),-1):1;for(q=M.slice(0,j),$=R=0,V=re.length;R<V;R++)if(q.indexOf(I=re.charAt(R))<0){if(I=="."){if(R>$){$=V;continue}}else if(!B&&(re==re.toUpperCase()&&(re=re.toLowerCase())||re==re.toLowerCase()&&(re=re.toUpperCase()))){B=!0,R=-1,$=0;continue}return r(J,String(N),U,j)}U=!1,re=n(re,j,10,J.s),($=re.indexOf("."))>-1?re=re.replace(".",""):$=re.length}for(R=0;re.charCodeAt(R)===48;R++);for(V=re.length;re.charCodeAt(--V)===48;);if(re=re.slice(R,++V)){if(V-=R,U&&O.DEBUG&&V>15&&(N>u5||N!==$u(N)))throw Error(l5+J.s*N);if(($=$-R-1)>p)J.c=J.e=null;else if($<d)J.c=[J.e=0];else{if(J.e=$,J.c=[],R=($+1)%ni,$<0&&(R+=ni),R<V){for(R&&J.c.push(+re.slice(0,R)),V-=ni;R<V;)J.c.push(+re.slice(R,R+=ni));R=ni-(re=re.slice(R)).length}else R-=V;for(;R--;re+="0");J.c.push(+re)}}else J.c=[J.e=0]}O.clone=kE,O.ROUND_UP=0,O.ROUND_DOWN=1,O.ROUND_CEIL=2,O.ROUND_FLOOR=3,O.ROUND_HALF_UP=4,O.ROUND_HALF_DOWN=5,O.ROUND_HALF_EVEN=6,O.ROUND_HALF_CEIL=7,O.ROUND_HALF_FLOOR=8,O.EUCLID=9,O.config=O.set=function(N){var j,q;if(N!=null)if(typeof N=="object"){if(N.hasOwnProperty(j="DECIMAL_PLACES")&&(q=N[j],lo(q,0,vu,j),o=q),N.hasOwnProperty(j="ROUNDING_MODE")&&(q=N[j],lo(q,0,8,j),a=q),N.hasOwnProperty(j="EXPONENTIAL_AT")&&(q=N[j],q&&q.pop?(lo(q[0],-1e9,0,j),lo(q[1],0,vu,j),l=q[0],c=q[1]):(lo(q,-1e9,vu,j),l=-(c=q<0?-q:q))),N.hasOwnProperty(j="RANGE"))if(q=N[j],q&&q.pop)lo(q[0],-1e9,-1,j),lo(q[1],1,vu,j),d=q[0],p=q[1];else if(lo(q,-1e9,vu,j),q)d=-(p=q<0?-q:q);else throw Error(ql+j+" cannot be zero: "+q);if(N.hasOwnProperty(j="CRYPTO"))if(q=N[j],q===!!q)if(q)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))v=q;else throw v=!q,Error(ql+"crypto unavailable");else v=q;else throw Error(ql+j+" not true or false: "+q);if(N.hasOwnProperty(j="MODULO_MODE")&&(q=N[j],lo(q,0,9,j),m=q),N.hasOwnProperty(j="POW_PRECISION")&&(q=N[j],lo(q,0,vu,j),x=q),N.hasOwnProperty(j="FORMAT"))if(q=N[j],typeof q=="object")E=q;else throw Error(ql+j+" not an object: "+q);if(N.hasOwnProperty(j="ALPHABET"))if(q=N[j],typeof q=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(q))A=q.slice(0,10)=="0123456789",M=q;else throw Error(ql+j+" invalid: "+q)}else throw Error(ql+"Object expected: "+N);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[l,c],RANGE:[d,p],CRYPTO:v,MODULO_MODE:m,POW_PRECISION:x,FORMAT:E,ALPHABET:M}},O.isBigNumber=function(N){if(!N||N._isBigNumber!==!0)return!1;if(!O.DEBUG)return!0;var j,q,I=N.c,B=N.e,$=N.s;e:if({}.toString.call(I)=="[object Array]"){if(($===1||$===-1)&&B>=-1e9&&B<=vu&&B===$u(B)){if(I[0]===0){if(B===0&&I.length===1)return!0;break e}if(j=(B+1)%ni,j<1&&(j+=ni),String(I[0]).length==j){for(j=0;j<I.length;j++)if(q=I[j],q<0||q>=uc||q!==$u(q))break e;if(q!==0)return!0}}}else if(I===null&&B===null&&($===null||$===1||$===-1))return!0;throw Error(ql+"Invalid BigNumber: "+N)},O.maximum=O.max=function(){return K(arguments,-1)},O.minimum=O.min=function(){return K(arguments,1)},O.random=function(){var N=9007199254740992,j=Math.random()*N&2097151?function(){return $u(Math.random()*N)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(q){var I,B,$,R,U,V=0,re=[],J=new O(s);if(q==null?q=o:lo(q,0,vu),R=Q1(q/ni),v)if(crypto.getRandomValues){for(I=crypto.getRandomValues(new Uint32Array(R*=2));V<R;)U=I[V]*131072+(I[V+1]>>>11),U>=9e15?(B=crypto.getRandomValues(new Uint32Array(2)),I[V]=B[0],I[V+1]=B[1]):(re.push(U%1e14),V+=2);V=R/2}else if(crypto.randomBytes){for(I=crypto.randomBytes(R*=7);V<R;)U=(I[V]&31)*281474976710656+I[V+1]*1099511627776+I[V+2]*4294967296+I[V+3]*16777216+(I[V+4]<<16)+(I[V+5]<<8)+I[V+6],U>=9e15?crypto.randomBytes(7).copy(I,V):(re.push(U%1e14),V+=7);V=R/7}else throw v=!1,Error(ql+"crypto unavailable");if(!v)for(;V<R;)U=j(),U<9e15&&(re[V++]=U%1e14);for(R=re[--V],q%=ni,R&&q&&(U=e2[ni-q],re[V]=$u(R/U)*U);re[V]===0;re.pop(),V--);if(V<0)re=[$=0];else{for($=-1;re[0]===0;re.splice(0,1),$-=ni);for(V=1,U=re[0];U>=10;U/=10,V++);V<ni&&($-=ni-V)}return J.e=$,J.c=re,J}}(),O.sum=function(){for(var N=1,j=arguments,q=new O(j[0]);N<j.length;)q=q.plus(j[N++]);return q},n=function(){var N="0123456789";function j(q,I,B,$){for(var R,U=[0],V,re=0,J=q.length;re<J;){for(V=U.length;V--;U[V]*=I);for(U[0]+=$.indexOf(q.charAt(re++)),R=0;R<U.length;R++)U[R]>B-1&&(U[R+1]==null&&(U[R+1]=0),U[R+1]+=U[R]/B|0,U[R]%=B)}return U.reverse()}return function(q,I,B,$,R){var U,V,re,J,_e,Le,Oe,Z,G=q.indexOf("."),se=o,ce=a;for(G>=0&&(J=x,x=0,q=q.replace(".",""),Z=new O(I),Le=Z.pow(q.length-G),x=J,Z.c=j(yh(Fu(Le.c),Le.e,"0"),10,B,N),Z.e=Z.c.length),Oe=j(q,I,B,R?(U=M,N):(U=N,M)),re=J=Oe.length;Oe[--J]==0;Oe.pop());if(!Oe[0])return U.charAt(0);if(G<0?--re:(Le.c=Oe,Le.e=re,Le.s=$,Le=e(Le,Z,se,ce,B),Oe=Le.c,_e=Le.r,re=Le.e),V=re+se+1,G=Oe[V],J=B/2,_e=_e||V<0||Oe[V+1]!=null,_e=ce<4?(G!=null||_e)&&(ce==0||ce==(Le.s<0?3:2)):G>J||G==J&&(ce==4||_e||ce==6&&Oe[V-1]&1||ce==(Le.s<0?8:7)),V<1||!Oe[0])q=_e?yh(U.charAt(1),-se,U.charAt(0)):U.charAt(0);else{if(Oe.length=V,_e)for(--B;++Oe[--V]>B;)Oe[V]=0,V||(++re,Oe=[1].concat(Oe));for(J=Oe.length;!Oe[--J];);for(G=0,q="";G<=J;q+=U.charAt(Oe[G++]));q=yh(q,re,U.charAt(0))}return q}}(),e=function(){function N(I,B,$){var R,U,V,re,J=0,_e=I.length,Le=B%Xh,Oe=B/Xh|0;for(I=I.slice();_e--;)V=I[_e]%Xh,re=I[_e]/Xh|0,R=Oe*V+re*Le,U=Le*V+R%Xh*Xh+J,J=(U/$|0)+(R/Xh|0)+Oe*re,I[_e]=U%$;return J&&(I=[J].concat(I)),I}function j(I,B,$,R){var U,V;if($!=R)V=$>R?1:-1;else for(U=V=0;U<$;U++)if(I[U]!=B[U]){V=I[U]>B[U]?1:-1;break}return V}function q(I,B,$,R){for(var U=0;$--;)I[$]-=U,U=I[$]<B[$]?1:0,I[$]=U*R+I[$]-B[$];for(;!I[0]&&I.length>1;I.splice(0,1));}return function(I,B,$,R,U){var V,re,J,_e,Le,Oe,Z,G,se,ce,he,ve,ee,X,De,Te,qe,ge=I.s==B.s?1:-1,Q=I.c,ie=B.c;if(!Q||!Q[0]||!ie||!ie[0])return new O(!I.s||!B.s||(Q?ie&&Q[0]==ie[0]:!ie)?NaN:Q&&Q[0]==0||!ie?ge*0:ge/0);for(G=new O(ge),se=G.c=[],re=I.e-B.e,ge=$+re+1,U||(U=uc,re=Vu(I.e/ni)-Vu(B.e/ni),ge=ge/ni|0),J=0;ie[J]==(Q[J]||0);J++);if(ie[J]>(Q[J]||0)&&re--,ge<0)se.push(1),_e=!0;else{for(X=Q.length,Te=ie.length,J=0,ge+=2,Le=$u(U/(ie[0]+1)),Le>1&&(ie=N(ie,Le,U),Q=N(Q,Le,U),Te=ie.length,X=Q.length),ee=Te,ce=Q.slice(0,Te),he=ce.length;he<Te;ce[he++]=0);qe=ie.slice(),qe=[0].concat(qe),De=ie[0],ie[1]>=U/2&&De++;do{if(Le=0,V=j(ie,ce,Te,he),V<0){if(ve=ce[0],Te!=he&&(ve=ve*U+(ce[1]||0)),Le=$u(ve/De),Le>1)for(Le>=U&&(Le=U-1),Oe=N(ie,Le,U),Z=Oe.length,he=ce.length;j(Oe,ce,Z,he)==1;)Le--,q(Oe,Te<Z?qe:ie,Z,U),Z=Oe.length,V=1;else Le==0&&(V=Le=1),Oe=ie.slice(),Z=Oe.length;if(Z<he&&(Oe=[0].concat(Oe)),q(ce,Oe,he,U),he=ce.length,V==-1)for(;j(ie,ce,Te,he)<1;)Le++,q(ce,Te<he?qe:ie,he,U),he=ce.length}else V===0&&(Le++,ce=[0]);se[J++]=Le,ce[0]?ce[he++]=Q[ee]||0:(ce=[Q[ee]],he=1)}while((ee++<X||ce[0]!=null)&&ge--);_e=ce[0]!=null,se[0]||se.splice(0,1)}if(U==uc){for(J=1,ge=se[0];ge>=10;ge/=10,J++);me(G,$+(G.e=J+re*ni-1)+1,R,_e)}else G.e=re,G.r=+_e;return G}}();function z(N,j,q,I){var B,$,R,U,V;if(q==null?q=a:lo(q,0,8),!N.c)return N.toString();if(B=N.c[0],R=N.e,j==null)V=Fu(N.c),V=I==1||I==2&&(R<=l||R>=c)?x0(V,R):yh(V,R,"0");else if(N=me(new O(N),j,q),$=N.e,V=Fu(N.c),U=V.length,I==1||I==2&&(j<=$||$<=l)){for(;U<j;V+="0",U++);V=x0(V,$)}else if(j-=R,V=yh(V,$,"0"),$+1>U){if(--j>0)for(V+=".";j--;V+="0");}else if(j+=$-U,j>0)for($+1==U&&(V+=".");j--;V+="0");return N.s<0&&B?"-"+V:V}function K(N,j){for(var q,I,B=1,$=new O(N[0]);B<N.length;B++)I=new O(N[B]),(!I.s||(q=Wd($,I))===j||q===0&&$.s===j)&&($=I);return $}function ne(N,j,q){for(var I=1,B=j.length;!j[--B];j.pop());for(B=j[0];B>=10;B/=10,I++);return(q=I+q*ni-1)>p?N.c=N.e=null:q<d?N.c=[N.e=0]:(N.e=q,N.c=j),N}r=function(){var N=/^(-?)0([xbo])(?=\w[\w.]*$)/i,j=/^([^.]+)\.$/,q=/^\.([^.]+)$/,I=/^-?(Infinity|NaN)$/,B=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function($,R,U,V){var re,J=U?R:R.replace(B,"");if(I.test(J))$.s=isNaN(J)?null:J<0?-1:1;else{if(!U&&(J=J.replace(N,function(_e,Le,Oe){return re=(Oe=Oe.toLowerCase())=="x"?16:Oe=="b"?2:8,!V||V==re?Le:_e}),V&&(re=V,J=J.replace(j,"$1").replace(q,"0.$1")),R!=J))return new O(J,re);if(O.DEBUG)throw Error(ql+"Not a"+(V?" base "+V:"")+" number: "+R);$.s=null}$.c=$.e=null}}();function me(N,j,q,I){var B,$,R,U,V,re,J,_e=N.c,Le=e2;if(_e){e:{for(B=1,U=_e[0];U>=10;U/=10,B++);if($=j-B,$<0)$+=ni,R=j,V=_e[re=0],J=$u(V/Le[B-R-1]%10);else if(re=Q1(($+1)/ni),re>=_e.length)if(I){for(;_e.length<=re;_e.push(0));V=J=0,B=1,$%=ni,R=$-ni+1}else break e;else{for(V=U=_e[re],B=1;U>=10;U/=10,B++);$%=ni,R=$-ni+B,J=R<0?0:$u(V/Le[B-R-1]%10)}if(I=I||j<0||_e[re+1]!=null||(R<0?V:V%Le[B-R-1]),I=q<4?(J||I)&&(q==0||q==(N.s<0?3:2)):J>5||J==5&&(q==4||I||q==6&&($>0?R>0?V/Le[B-R]:0:_e[re-1])%10&1||q==(N.s<0?8:7)),j<1||!_e[0])return _e.length=0,I?(j-=N.e+1,_e[0]=Le[(ni-j%ni)%ni],N.e=-j||0):_e[0]=N.e=0,N;if($==0?(_e.length=re,U=1,re--):(_e.length=re+1,U=Le[ni-$],_e[re]=R>0?$u(V/Le[B-R]%Le[R])*U:0),I)for(;;)if(re==0){for($=1,R=_e[0];R>=10;R/=10,$++);for(R=_e[0]+=U,U=1;R>=10;R/=10,U++);$!=U&&(N.e++,_e[0]==uc&&(_e[0]=1));break}else{if(_e[re]+=U,_e[re]!=uc)break;_e[re--]=0,U=1}for($=_e.length;_e[--$]===0;_e.pop());}N.e>p?N.c=N.e=null:N.e<d&&(N.c=[N.e=0])}return N}function pe(N){var j,q=N.e;return q===null?N.toString():(j=Fu(N.c),j=q<=l||q>=c?x0(j,q):yh(j,q,"0"),N.s<0?"-"+j:j)}return i.absoluteValue=i.abs=function(){var N=new O(this);return N.s<0&&(N.s=1),N},i.comparedTo=function(N,j){return Wd(this,new O(N,j))},i.decimalPlaces=i.dp=function(N,j){var q,I,B,$=this;if(N!=null)return lo(N,0,vu),j==null?j=a:lo(j,0,8),me(new O($),N+$.e+1,j);if(!(q=$.c))return null;if(I=((B=q.length-1)-Vu(this.e/ni))*ni,B=q[B])for(;B%10==0;B/=10,I--);return I<0&&(I=0),I},i.dividedBy=i.div=function(N,j){return e(this,new O(N,j),o,a)},i.dividedToIntegerBy=i.idiv=function(N,j){return e(this,new O(N,j),0,1)},i.exponentiatedBy=i.pow=function(N,j){var q,I,B,$,R,U,V,re,J,_e=this;if(N=new O(N),N.c&&!N.isInteger())throw Error(ql+"Exponent not an integer: "+pe(N));if(j!=null&&(j=new O(j)),U=N.e>14,!_e.c||!_e.c[0]||_e.c[0]==1&&!_e.e&&_e.c.length==1||!N.c||!N.c[0])return J=new O(Math.pow(+pe(_e),U?N.s*(2-w0(N)):+pe(N))),j?J.mod(j):J;if(V=N.s<0,j){if(j.c?!j.c[0]:!j.s)return new O(NaN);I=!V&&_e.isInteger()&&j.isInteger(),I&&(_e=_e.mod(j))}else{if(N.e>9&&(_e.e>0||_e.e<-1||(_e.e==0?_e.c[0]>1||U&&_e.c[1]>=24e7:_e.c[0]<8e13||U&&_e.c[0]<=9999975e7)))return $=_e.s<0&&w0(N)?-0:0,_e.e>-1&&($=1/$),new O(V?1/$:$);x&&($=Q1(x/ni+2))}for(U?(q=new O(.5),V&&(N.s=1),re=w0(N)):(B=Math.abs(+pe(N)),re=B%2),J=new O(s);;){if(re){if(J=J.times(_e),!J.c)break;$?J.c.length>$&&(J.c.length=$):I&&(J=J.mod(j))}if(B){if(B=$u(B/2),B===0)break;re=B%2}else if(N=N.times(q),me(N,N.e+1,1),N.e>14)re=w0(N);else{if(B=+pe(N),B===0)break;re=B%2}_e=_e.times(_e),$?_e.c&&_e.c.length>$&&(_e.c.length=$):I&&(_e=_e.mod(j))}return I?J:(V&&(J=s.div(J)),j?J.mod(j):$?me(J,x,a,R):J)},i.integerValue=function(N){var j=new O(this);return N==null?N=a:lo(N,0,8),me(j,j.e+1,N)},i.isEqualTo=i.eq=function(N,j){return Wd(this,new O(N,j))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(N,j){return Wd(this,new O(N,j))>0},i.isGreaterThanOrEqualTo=i.gte=function(N,j){return(j=Wd(this,new O(N,j)))===1||j===0},i.isInteger=function(){return!!this.c&&Vu(this.e/ni)>this.c.length-2},i.isLessThan=i.lt=function(N,j){return Wd(this,new O(N,j))<0},i.isLessThanOrEqualTo=i.lte=function(N,j){return(j=Wd(this,new O(N,j)))===-1||j===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(N,j){var q,I,B,$,R=this,U=R.s;if(N=new O(N,j),j=N.s,!U||!j)return new O(NaN);if(U!=j)return N.s=-j,R.plus(N);var V=R.e/ni,re=N.e/ni,J=R.c,_e=N.c;if(!V||!re){if(!J||!_e)return J?(N.s=-j,N):new O(_e?R:NaN);if(!J[0]||!_e[0])return _e[0]?(N.s=-j,N):new O(J[0]?R:a==3?-0:0)}if(V=Vu(V),re=Vu(re),J=J.slice(),U=V-re){for(($=U<0)?(U=-U,B=J):(re=V,B=_e),B.reverse(),j=U;j--;B.push(0));B.reverse()}else for(I=($=(U=J.length)<(j=_e.length))?U:j,U=j=0;j<I;j++)if(J[j]!=_e[j]){$=J[j]<_e[j];break}if($&&(B=J,J=_e,_e=B,N.s=-N.s),j=(I=_e.length)-(q=J.length),j>0)for(;j--;J[q++]=0);for(j=uc-1;I>U;){if(J[--I]<_e[I]){for(q=I;q&&!J[--q];J[q]=j);--J[q],J[I]+=uc}J[I]-=_e[I]}for(;J[0]==0;J.splice(0,1),--re);return J[0]?ne(N,J,re):(N.s=a==3?-1:1,N.c=[N.e=0],N)},i.modulo=i.mod=function(N,j){var q,I,B=this;return N=new O(N,j),!B.c||!N.s||N.c&&!N.c[0]?new O(NaN):!N.c||B.c&&!B.c[0]?new O(B):(m==9?(I=N.s,N.s=1,q=e(B,N,0,3),N.s=I,q.s*=I):q=e(B,N,0,m),N=B.minus(q.times(N)),!N.c[0]&&m==1&&(N.s=B.s),N)},i.multipliedBy=i.times=function(N,j){var q,I,B,$,R,U,V,re,J,_e,Le,Oe,Z,G,se,ce=this,he=ce.c,ve=(N=new O(N,j)).c;if(!he||!ve||!he[0]||!ve[0])return!ce.s||!N.s||he&&!he[0]&&!ve||ve&&!ve[0]&&!he?N.c=N.e=N.s=null:(N.s*=ce.s,!he||!ve?N.c=N.e=null:(N.c=[0],N.e=0)),N;for(I=Vu(ce.e/ni)+Vu(N.e/ni),N.s*=ce.s,V=he.length,_e=ve.length,V<_e&&(Z=he,he=ve,ve=Z,B=V,V=_e,_e=B),B=V+_e,Z=[];B--;Z.push(0));for(G=uc,se=Xh,B=_e;--B>=0;){for(q=0,Le=ve[B]%se,Oe=ve[B]/se|0,R=V,$=B+R;$>B;)re=he[--R]%se,J=he[R]/se|0,U=Oe*re+J*Le,re=Le*re+U%se*se+Z[$]+q,q=(re/G|0)+(U/se|0)+Oe*J,Z[$--]=re%G;Z[$]=q}return q?++I:Z.splice(0,1),ne(N,Z,I)},i.negated=function(){var N=new O(this);return N.s=-N.s||null,N},i.plus=function(N,j){var q,I=this,B=I.s;if(N=new O(N,j),j=N.s,!B||!j)return new O(NaN);if(B!=j)return N.s=-j,I.minus(N);var $=I.e/ni,R=N.e/ni,U=I.c,V=N.c;if(!$||!R){if(!U||!V)return new O(B/0);if(!U[0]||!V[0])return V[0]?N:new O(U[0]?I:B*0)}if($=Vu($),R=Vu(R),U=U.slice(),B=$-R){for(B>0?(R=$,q=V):(B=-B,q=U),q.reverse();B--;q.push(0));q.reverse()}for(B=U.length,j=V.length,B-j<0&&(q=V,V=U,U=q,j=B),B=0;j;)B=(U[--j]=U[j]+V[j]+B)/uc|0,U[j]=uc===U[j]?0:U[j]%uc;return B&&(U=[B].concat(U),++R),ne(N,U,R)},i.precision=i.sd=function(N,j){var q,I,B,$=this;if(N!=null&&N!==!!N)return lo(N,1,vu),j==null?j=a:lo(j,0,8),me(new O($),N,j);if(!(q=$.c))return null;if(B=q.length-1,I=B*ni+1,B=q[B]){for(;B%10==0;B/=10,I--);for(B=q[0];B>=10;B/=10,I++);}return N&&$.e+1>I&&(I=$.e+1),I},i.shiftedBy=function(N){return lo(N,-9007199254740991,u5),this.times("1e"+N)},i.squareRoot=i.sqrt=function(){var N,j,q,I,B,$=this,R=$.c,U=$.s,V=$.e,re=o+4,J=new O("0.5");if(U!==1||!R||!R[0])return new O(!U||U<0&&(!R||R[0])?NaN:R?$:1/0);if(U=Math.sqrt(+pe($)),U==0||U==1/0?(j=Fu(R),(j.length+V)%2==0&&(j+="0"),U=Math.sqrt(+j),V=Vu((V+1)/2)-(V<0||V%2),U==1/0?j="5e"+V:(j=U.toExponential(),j=j.slice(0,j.indexOf("e")+1)+V),q=new O(j)):q=new O(U+""),q.c[0]){for(V=q.e,U=V+re,U<3&&(U=0);;)if(B=q,q=J.times(B.plus(e($,B,re,1))),Fu(B.c).slice(0,U)===(j=Fu(q.c)).slice(0,U))if(q.e<V&&--U,j=j.slice(U-3,U+1),j=="9999"||!I&&j=="4999"){if(!I&&(me(B,B.e+o+2,0),B.times(B).eq($))){q=B;break}re+=4,U+=4,I=1}else{(!+j||!+j.slice(1)&&j.charAt(0)=="5")&&(me(q,q.e+o+2,1),N=!q.times(q).eq($));break}}return me(q,q.e+o+1,a,N)},i.toExponential=function(N,j){return N!=null&&(lo(N,0,vu),N++),z(this,N,j,1)},i.toFixed=function(N,j){return N!=null&&(lo(N,0,vu),N=N+this.e+1),z(this,N,j)},i.toFormat=function(N,j,q){var I,B=this;if(q==null)N!=null&&j&&typeof j=="object"?(q=j,j=null):N&&typeof N=="object"?(q=N,N=j=null):q=E;else if(typeof q!="object")throw Error(ql+"Argument not an object: "+q);if(I=B.toFixed(N,j),B.c){var $,R=I.split("."),U=+q.groupSize,V=+q.secondaryGroupSize,re=q.groupSeparator||"",J=R[0],_e=R[1],Le=B.s<0,Oe=Le?J.slice(1):J,Z=Oe.length;if(V&&($=U,U=V,V=$,Z-=$),U>0&&Z>0){for($=Z%U||U,J=Oe.substr(0,$);$<Z;$+=U)J+=re+Oe.substr($,U);V>0&&(J+=re+Oe.slice($)),Le&&(J="-"+J)}I=_e?J+(q.decimalSeparator||"")+((V=+q.fractionGroupSize)?_e.replace(new RegExp("\\d{"+V+"}\\B","g"),"$&"+(q.fractionGroupSeparator||"")):_e):J}return(q.prefix||"")+I+(q.suffix||"")},i.toFraction=function(N){var j,q,I,B,$,R,U,V,re,J,_e,Le,Oe=this,Z=Oe.c;if(N!=null&&(U=new O(N),!U.isInteger()&&(U.c||U.s!==1)||U.lt(s)))throw Error(ql+"Argument "+(U.isInteger()?"out of range: ":"not an integer: ")+pe(U));if(!Z)return new O(Oe);for(j=new O(s),re=q=new O(s),I=V=new O(s),Le=Fu(Z),$=j.e=Le.length-Oe.e-1,j.c[0]=e2[(R=$%ni)<0?ni+R:R],N=!N||U.comparedTo(j)>0?$>0?j:re:U,R=p,p=1/0,U=new O(Le),V.c[0]=0;J=e(U,j,0,1),B=q.plus(J.times(I)),B.comparedTo(N)!=1;)q=I,I=B,re=V.plus(J.times(B=re)),V=B,j=U.minus(J.times(B=j)),U=B;return B=e(N.minus(q),I,0,1),V=V.plus(B.times(re)),q=q.plus(B.times(I)),V.s=re.s=Oe.s,$=$*2,_e=e(re,I,$,a).minus(Oe).abs().comparedTo(e(V,q,$,a).minus(Oe).abs())<1?[re,I]:[V,q],p=R,_e},i.toNumber=function(){return+pe(this)},i.toPrecision=function(N,j){return N!=null&&lo(N,1,vu),z(this,N,j,2)},i.toString=function(N){var j,q=this,I=q.s,B=q.e;return B===null?I?(j="Infinity",I<0&&(j="-"+j)):j="NaN":(N==null?j=B<=l||B>=c?x0(Fu(q.c),B):yh(Fu(q.c),B,"0"):N===10&&A?(q=me(new O(q),o+B+1,a),j=yh(Fu(q.c),q.e,"0")):(lo(N,2,M.length,"Base"),j=n(yh(Fu(q.c),B,"0"),10,N,I,!0)),I<0&&q.c[0]&&(j="-"+j)),j},i.valueOf=i.toJSON=function(){return pe(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,t!=null&&O.set(t),O}function Vu(t){var e=t|0;return t>0||t===e?e:e-1}function Fu(t){for(var e,n,r=1,i=t.length,s=t[0]+"";r<i;){for(e=t[r++]+"",n=ni-e.length;n--;e="0"+e);s+=e}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function Wd(t,e){var n,r,i=t.c,s=e.c,o=t.s,a=e.s,l=t.e,c=e.e;if(!o||!a)return null;if(n=i&&!i[0],r=s&&!s[0],n||r)return n?r?0:-a:o;if(o!=a)return o;if(n=o<0,r=l==c,!i||!s)return r?0:!i^n?1:-1;if(!r)return l>c^n?1:-1;for(a=(l=i.length)<(c=s.length)?l:c,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^n?1:-1;return l==c?0:l>c^n?1:-1}function lo(t,e,n,r){if(t<e||t>n||t!==$u(t))throw Error(ql+(r||"Argument")+(typeof t=="number"?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function w0(t){var e=t.c.length-1;return Vu(t.e/ni)==e&&t.c[e]%2!=0}function x0(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function yh(t,e,n){var r,i;if(e<0){for(i=n+".";++e;i+=n);t=i+t}else if(r=t.length,++e>r){for(i=n,e-=r;--e;i+=n);t+=i}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}var Yc=kE(),Xj=class{constructor(t){Ze(this,"key");Ze(this,"left",null);Ze(this,"right",null);this.key=t}},rg=class extends Xj{constructor(t){super(t)}},Jj=class{constructor(){Ze(this,"size",0);Ze(this,"modificationCount",0);Ze(this,"splayCount",0)}splay(t){const e=this.root;if(e==null)return this.compare(t,t),-1;let n=null,r=null,i=null,s=null,o=e;const a=this.compare;let l;for(;;)if(l=a(o.key,t),l>0){let c=o.left;if(c==null||(l=a(c.key,t),l>0&&(o.left=c.right,c.right=o,o=c,c=o.left,c==null)))break;n==null?r=o:n.left=o,n=o,o=c}else if(l<0){let c=o.right;if(c==null||(l=a(c.key,t),l<0&&(o.right=c.left,c.left=o,o=c,c=o.right,c==null)))break;i==null?s=o:i.right=o,i=o,o=c}else break;return i!=null&&(i.right=o.left,o.left=s),n!=null&&(n.left=o.right,o.right=r),this.root!==o&&(this.root=o,this.splayCount++),l}splayMin(t){let e=t,n=e.left;for(;n!=null;){const r=n;e.left=r.right,r.right=e,e=r,n=e.left}return e}splayMax(t){let e=t,n=e.right;for(;n!=null;){const r=n;e.right=r.left,r.left=e,e=r,n=e.right}return e}_delete(t){if(this.root==null||this.splay(t)!=0)return null;let n=this.root;const r=n,i=n.left;if(this.size--,i==null)this.root=n.right;else{const s=n.right;n=this.splayMax(i),n.right=s,this.root=n}return this.modificationCount++,r}addNewRoot(t,e){this.size++,this.modificationCount++;const n=this.root;if(n==null){this.root=t;return}e<0?(t.left=n,t.right=n.right,n.right=null):(t.right=n,t.left=n.left,n.left=null),this.root=t}_first(){const t=this.root;return t==null?null:(this.root=this.splayMin(t),this.root)}_last(){const t=this.root;return t==null?null:(this.root=this.splayMax(t),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(t){return this.validKey(t)&&this.splay(t)==0}defaultCompare(){return(t,e)=>t<e?-1:t>e?1:0}wrap(){return{getRoot:()=>this.root,setRoot:t=>{this.root=t},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:t=>{this.splayCount=t},splay:t=>this.splay(t),has:t=>this.has(t)}}},CL,EL,Uv=class wg extends Jj{constructor(n,r){super();Ze(this,"root",null);Ze(this,"compare");Ze(this,"validKey");Ze(this,CL,"[object Set]");this.compare=n??this.defaultCompare(),this.validKey=r??(i=>i!=null&&i!=null)}delete(n){return this.validKey(n)?this._delete(n)!=null:!1}deleteAll(n){for(const r of n)this.delete(r)}forEach(n){const r=this[Symbol.iterator]();let i;for(;i=r.next(),!i.done;)n(i.value,i.value,this)}add(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new rg(n),r),this}addAndReturn(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new rg(n),r),this.root.key}addAll(n){for(const r of n)this.add(r)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let s=i.right;for(;s!=null;)i=s,s=i.right;return i.key}firstAfter(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let s=i.left;for(;s!=null;)i=s,s=i.left;return i.key}retainAll(n){const r=new wg(this.compare,this.validKey),i=this.modificationCount;for(const s of n){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(s)&&this.splay(s)==0&&r.add(this.root.key)}r.size!=this.size&&(this.root=r.root,this.size=r.size,this.modificationCount++)}lookup(n){return!this.validKey(n)||this.splay(n)!=0?null:this.root.key}intersection(n){const r=new wg(this.compare,this.validKey);for(const i of this)n.has(i)&&r.add(i);return r}difference(n){const r=new wg(this.compare,this.validKey);for(const i of this)n.has(i)||r.add(i);return r}union(n){const r=this.clone();return r.addAll(n),r}clone(){const n=new wg(this.compare,this.validKey);return n.size=this.size,n.root=this.copyNode(this.root),n}copyNode(n){if(n==null)return null;function r(s,o){let a,l;do{if(a=s.left,l=s.right,a!=null){const c=new rg(a.key);o.left=c,r(a,c)}if(l!=null){const c=new rg(l.key);o.right=c,s=l,o=c}}while(l!=null)}const i=new rg(n.key);return r(n,i),i}toSet(){return this.clone()}entries(){return new ez(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(EL=Symbol.iterator,CL=Symbol.toStringTag,EL)](){return new Qj(this.wrap())}},AE=class{constructor(t){Ze(this,"tree");Ze(this,"path",new Array);Ze(this,"modificationCount",null);Ze(this,"splayCount");this.tree=t,this.splayCount=t.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const t=this.path[this.path.length-1];return this.getValue(t)}rebuildPath(t){this.path.splice(0,this.path.length),this.tree.splay(t),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(t){for(;t!=null;)this.path.push(t),t=t.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let n=this.tree.getRoot();for(;n!=null;)this.path.push(n),n=n.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let t=this.path[this.path.length-1],e=t.right;if(e!=null){for(;e!=null;)this.path.push(e),e=e.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===t;)t=this.path.pop();return this.path.length>0}},Qj=class extends AE{getValue(t){return t.key}},ez=class extends AE{getValue(t){return[t.key,t.key]}},TE=t=>()=>t,bb=t=>{const e=t?(n,r)=>r.minus(n).abs().isLessThanOrEqualTo(t):TE(!1);return(n,r)=>e(n,r)?0:n.comparedTo(r)};function tz(t){const e=t?(n,r,i,s,o)=>n.exponentiatedBy(2).isLessThanOrEqualTo(s.minus(r).exponentiatedBy(2).plus(o.minus(i).exponentiatedBy(2)).times(t)):TE(!1);return(n,r,i)=>{const s=n.x,o=n.y,a=i.x,l=i.y,c=o.minus(l).times(r.x.minus(a)).minus(s.minus(a).times(r.y.minus(l)));return e(c,s,o,a,l)?0:c.comparedTo(0)}}var nz=t=>t,rz=t=>{if(t){const e=new Uv(bb(t)),n=new Uv(bb(t)),r=(s,o)=>o.addAndReturn(s),i=s=>({x:r(s.x,e),y:r(s.y,n)});return i({x:new Yc(0),y:new Yc(0)}),i}return nz},_b=t=>({set:e=>{Rh=_b(e)},reset:()=>_b(t),compare:bb(t),snap:rz(t),orient:tz(t)}),Rh=_b(),ig=(t,e)=>t.ll.x.isLessThanOrEqualTo(e.x)&&e.x.isLessThanOrEqualTo(t.ur.x)&&t.ll.y.isLessThanOrEqualTo(e.y)&&e.y.isLessThanOrEqualTo(t.ur.y),wb=(t,e)=>{if(e.ur.x.isLessThan(t.ll.x)||t.ur.x.isLessThan(e.ll.x)||e.ur.y.isLessThan(t.ll.y)||t.ur.y.isLessThan(e.ll.y))return null;const n=t.ll.x.isLessThan(e.ll.x)?e.ll.x:t.ll.x,r=t.ur.x.isLessThan(e.ur.x)?t.ur.x:e.ur.x,i=t.ll.y.isLessThan(e.ll.y)?e.ll.y:t.ll.y,s=t.ur.y.isLessThan(e.ur.y)?t.ur.y:e.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:s}}},rv=(t,e)=>t.x.times(e.y).minus(t.y.times(e.x)),DE=(t,e)=>t.x.times(e.x).plus(t.y.times(e.y)),Hv=t=>DE(t,t).sqrt(),iz=(t,e,n)=>{const r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return rv(i,r).div(Hv(i)).div(Hv(r))},sz=(t,e,n)=>{const r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return DE(i,r).div(Hv(i)).div(Hv(r))},c5=(t,e,n)=>e.y.isZero()?null:{x:t.x.plus(e.x.div(e.y).times(n.minus(t.y))),y:n},h5=(t,e,n)=>e.x.isZero()?null:{x:n,y:t.y.plus(e.y.div(e.x).times(n.minus(t.x)))},oz=(t,e,n,r)=>{if(e.x.isZero())return h5(n,r,t.x);if(r.x.isZero())return h5(t,e,n.x);if(e.y.isZero())return c5(n,r,t.y);if(r.y.isZero())return c5(t,e,n.y);const i=rv(e,r);if(i.isZero())return null;const s={x:n.x.minus(t.x),y:n.y.minus(t.y)},o=rv(s,e).div(i),a=rv(s,r).div(i),l=t.x.plus(a.times(e.x)),c=n.x.plus(o.times(r.x)),d=t.y.plus(a.times(e.y)),p=n.y.plus(o.times(r.y)),v=l.plus(c).div(2),m=d.plus(p).div(2);return{x:v,y:m}},Hc=class OE{constructor(e,n){Ze(this,"point");Ze(this,"isLeft");Ze(this,"segment");Ze(this,"otherSE");Ze(this,"consumedBy");e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}static compare(e,n){const r=OE.comparePoints(e.point,n.point);return r!==0?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:Wv.compare(e.segment,n.segment))}static comparePoints(e,n){return e.x.isLessThan(n.x)?-1:e.x.isGreaterThan(n.x)?1:e.y.isLessThan(n.y)?-1:e.y.isGreaterThan(n.y)?1:0}link(e){if(e.point===this.point)throw new Error("Tried to link already linked events");const n=e.point.events;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}checkForConsuming(){const e=this.point.events.length;for(let n=0;n<e;n++){const r=this.point.events[n];if(r.segment.consumedBy===void 0)for(let i=n+1;i<e;i++){const s=this.point.events[i];s.consumedBy===void 0&&r.otherSE.point.events===s.otherSE.point.events&&r.segment.consume(s.segment)}}}getAvailableLinkedEvents(){const e=[];for(let n=0,r=this.point.events.length;n<r;n++){const i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&e.push(i)}return e}getLeftmostComparator(e){const n=new Map,r=i=>{const s=i.otherSE;n.set(i,{sine:iz(this.point,e.point,s.point),cosine:sz(this.point,e.point,s.point)})};return(i,s)=>{n.has(i)||r(i),n.has(s)||r(s);const{sine:o,cosine:a}=n.get(i),{sine:l,cosine:c}=n.get(s);return o.isGreaterThanOrEqualTo(0)&&l.isGreaterThanOrEqualTo(0)?a.isLessThan(c)?1:a.isGreaterThan(c)?-1:0:o.isLessThan(0)&&l.isLessThan(0)?a.isLessThan(c)?-1:a.isGreaterThan(c)?1:0:l.isLessThan(o)?-1:l.isGreaterThan(o)?1:0}}},az=class xb{constructor(e){Ze(this,"events");Ze(this,"poly");Ze(this,"_isExteriorRing");Ze(this,"_enclosingRing");this.events=e;for(let n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}static factory(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];if(!s.isInResult()||s.ringOut)continue;let o=null,a=s.leftSE,l=s.rightSE;const c=[a],d=a.point,p=[];for(;o=a,a=l,c.push(a),a.point!==d;)for(;;){const v=a.getAvailableLinkedEvents();if(v.length===0){const E=c[0].point,M=c[c.length-1].point;throw new Error(`Unable to complete output ring starting at [${E.x}, ${E.y}]. Last matching segment found ends at [${M.x}, ${M.y}].`)}if(v.length===1){l=v[0].otherSE;break}let m=null;for(let E=0,M=p.length;E<M;E++)if(p[E].point===a.point){m=E;break}if(m!==null){const E=p.splice(m)[0],M=c.splice(E.index);M.unshift(M[0].otherSE),n.push(new xb(M.reverse()));continue}p.push({index:c.length,point:a.point});const x=a.getLeftmostComparator(o);l=v.sort(x)[0].otherSE;break}n.push(new xb(c))}return n}getGeom(){let e=this.events[0].point;const n=[e];for(let c=1,d=this.events.length-1;c<d;c++){const p=this.events[c].point,v=this.events[c+1].point;Rh.orient(p,e,v)!==0&&(n.push(p),e=p)}if(n.length===1)return null;const r=n[0],i=n[1];Rh.orient(r,e,i)===0&&n.shift(),n.push(n[0]);const s=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:n.length-1,a=this.isExteriorRing()?n.length:-1,l=[];for(let c=o;c!=a;c+=s)l.push([n[c].x.toNumber(),n[c].y.toNumber()]);return l}isExteriorRing(){if(this._isExteriorRing===void 0){const e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var i,s;let e=this.events[0];for(let o=1,a=this.events.length;o<a;o++){const l=this.events[o];Hc.compare(e,l)>0&&(e=l)}let n=e.segment.prevInResult(),r=n?n.prevInResult():null;for(;;){if(!n)return null;if(!r)return n.ringOut;if(r.ringOut!==n.ringOut)return((i=r.ringOut)==null?void 0:i.enclosingRing())!==n.ringOut?n.ringOut:(s=n.ringOut)==null?void 0:s.enclosingRing();n=r.prevInResult(),r=n?n.prevInResult():null}}},d5=class{constructor(t){Ze(this,"exteriorRing");Ze(this,"interiorRings");this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=this.exteriorRing.getGeom();if(t===null)return null;const e=[t];for(let n=0,r=this.interiorRings.length;n<r;n++){const i=this.interiorRings[n].getGeom();i!==null&&e.push(i)}return e}},lz=class{constructor(t){Ze(this,"rings");Ze(this,"polys");this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const r=this.polys[e].getGeom();r!==null&&t.push(r)}return t}_composePolys(t){var n;const e=[];for(let r=0,i=t.length;r<i;r++){const s=t[r];if(!s.poly)if(s.isExteriorRing())e.push(new d5(s));else{const o=s.enclosingRing();o!=null&&o.poly||e.push(new d5(o)),(n=o==null?void 0:o.poly)==null||n.addInterior(s)}}return e}},uz=class{constructor(t,e=Wv.compare){Ze(this,"queue");Ze(this,"tree");Ze(this,"segments");this.queue=t,this.tree=new Uv(e),this.segments=[]}process(t){const e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.delete(t.otherSE):this.tree.delete(e),n;t.isLeft&&this.tree.add(e);let r=e,i=e;do r=this.tree.lastBefore(r);while(r!=null&&r.consumedBy!=null);do i=this.tree.firstAfter(i);while(i!=null&&i.consumedBy!=null);if(t.isLeft){let s=null;if(r){const a=r.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(s=a),!r.isAnEndpoint(a))){const l=this._splitSafely(r,a);for(let c=0,d=l.length;c<d;c++)n.push(l[c])}}let o=null;if(i){const a=i.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(o=a),!i.isAnEndpoint(a))){const l=this._splitSafely(i,a);for(let c=0,d=l.length;c<d;c++)n.push(l[c])}}if(s!==null||o!==null){let a=null;s===null?a=o:o===null?a=s:a=Hc.comparePoints(s,o)<=0?s:o,this.queue.delete(e.rightSE),n.push(e.rightSE);const l=e.split(a);for(let c=0,d=l.length;c<d;c++)n.push(l[c])}n.length>0?(this.tree.delete(e),n.push(t)):(this.segments.push(e),e.prev=r)}else{if(r&&i){const s=r.getIntersection(i);if(s!==null){if(!r.isAnEndpoint(s)){const o=this._splitSafely(r,s);for(let a=0,l=o.length;a<l;a++)n.push(o[a])}if(!i.isAnEndpoint(s)){const o=this._splitSafely(i,s);for(let a=0,l=o.length;a<l;a++)n.push(o[a])}}}this.tree.delete(e)}return n}_splitSafely(t,e){this.tree.delete(t);const n=t.rightSE;this.queue.delete(n);const r=t.split(e);return r.push(n),t.consumedBy===void 0&&this.tree.add(t),r}},cz=class{constructor(){Ze(this,"type");Ze(this,"numMultiPolys")}run(t,e,n){xg.type=t;const r=[new p5(e,!0)];for(let c=0,d=n.length;c<d;c++)r.push(new p5(n[c],!1));if(xg.numMultiPolys=r.length,xg.type==="difference"){const c=r[0];let d=1;for(;d<r.length;)wb(r[d].bbox,c.bbox)!==null?d++:r.splice(d,1)}if(xg.type==="intersection")for(let c=0,d=r.length;c<d;c++){const p=r[c];for(let v=c+1,m=r.length;v<m;v++)if(wb(p.bbox,r[v].bbox)===null)return[]}const i=new Uv(Hc.compare);for(let c=0,d=r.length;c<d;c++){const p=r[c].getSweepEvents();for(let v=0,m=p.length;v<m;v++)i.add(p[v])}const s=new uz(i);let o=null;for(i.size!=0&&(o=i.first(),i.delete(o));o;){const c=s.process(o);for(let d=0,p=c.length;d<p;d++){const v=c[d];v.consumedBy===void 0&&i.add(v)}i.size!=0?(o=i.first(),i.delete(o)):o=null}Rh.reset();const a=az.factory(s.segments);return new lz(a).getGeom()}},xg=new cz,Lb=xg,hz=0,Wv=class iv{constructor(e,n,r,i){Ze(this,"id");Ze(this,"leftSE");Ze(this,"rightSE");Ze(this,"rings");Ze(this,"windings");Ze(this,"ringOut");Ze(this,"consumedBy");Ze(this,"prev");Ze(this,"_prevInResult");Ze(this,"_beforeState");Ze(this,"_afterState");Ze(this,"_isInResult");this.id=++hz,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}static compare(e,n){const r=e.leftSE.point.x,i=n.leftSE.point.x,s=e.rightSE.point.x,o=n.rightSE.point.x;if(o.isLessThan(r))return 1;if(s.isLessThan(i))return-1;const a=e.leftSE.point.y,l=n.leftSE.point.y,c=e.rightSE.point.y,d=n.rightSE.point.y;if(r.isLessThan(i)){if(l.isLessThan(a)&&l.isLessThan(c))return 1;if(l.isGreaterThan(a)&&l.isGreaterThan(c))return-1;const p=e.comparePoint(n.leftSE.point);if(p<0)return 1;if(p>0)return-1;const v=n.comparePoint(e.rightSE.point);return v!==0?v:-1}if(r.isGreaterThan(i)){if(a.isLessThan(l)&&a.isLessThan(d))return-1;if(a.isGreaterThan(l)&&a.isGreaterThan(d))return 1;const p=n.comparePoint(e.leftSE.point);if(p!==0)return p;const v=e.comparePoint(n.rightSE.point);return v<0?1:v>0?-1:1}if(a.isLessThan(l))return-1;if(a.isGreaterThan(l))return 1;if(s.isLessThan(o)){const p=n.comparePoint(e.rightSE.point);if(p!==0)return p}if(s.isGreaterThan(o)){const p=e.comparePoint(n.rightSE.point);if(p<0)return 1;if(p>0)return-1}if(!s.eq(o)){const p=c.minus(a),v=s.minus(r),m=d.minus(l),x=o.minus(i);if(p.isGreaterThan(v)&&m.isLessThan(x))return 1;if(p.isLessThan(v)&&m.isGreaterThan(x))return-1}return s.isGreaterThan(o)?1:s.isLessThan(o)||c.isLessThan(d)?-1:c.isGreaterThan(d)?1:e.id<n.id?-1:e.id>n.id?1:0}static fromRing(e,n,r){let i,s,o;const a=Hc.comparePoints(e,n);if(a<0)i=e,s=n,o=1;else if(a>0)i=n,s=e,o=-1;else throw new Error(`Tried to create degenerate segment at [${e.x}, ${e.y}]`);const l=new Hc(i,!0),c=new Hc(s,!1);return new iv(l,c,[r],[o])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const e=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e.isLessThan(n)?e:n},ur:{x:this.rightSE.point.x,y:e.isGreaterThan(n)?e:n}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(e){return e.x.eq(this.leftSE.point.x)&&e.y.eq(this.leftSE.point.y)||e.x.eq(this.rightSE.point.x)&&e.y.eq(this.rightSE.point.y)}comparePoint(e){return Rh.orient(this.leftSE.point,e,this.rightSE.point)}getIntersection(e){const n=this.bbox(),r=e.bbox(),i=wb(n,r);if(i===null)return null;const s=this.leftSE.point,o=this.rightSE.point,a=e.leftSE.point,l=e.rightSE.point,c=ig(n,a)&&this.comparePoint(a)===0,d=ig(r,s)&&e.comparePoint(s)===0,p=ig(n,l)&&this.comparePoint(l)===0,v=ig(r,o)&&e.comparePoint(o)===0;if(d&&c)return v&&!p?o:!v&&p?l:null;if(d)return p&&s.x.eq(l.x)&&s.y.eq(l.y)?null:s;if(c)return v&&o.x.eq(a.x)&&o.y.eq(a.y)?null:a;if(v&&p)return null;if(v)return o;if(p)return l;const m=oz(s,this.vector(),a,e.vector());return m===null||!ig(i,m)?null:Rh.snap(m)}split(e){const n=[],r=e.events!==void 0,i=new Hc(e,!0),s=new Hc(e,!1),o=this.rightSE;this.replaceRightSE(s),n.push(s),n.push(i);const a=new iv(i,o,this.rings.slice(),this.windings.slice());return Hc.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),Hc.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),s.checkForConsuming()),n}swapEvents(){const e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}consume(e){let n=this,r=e;for(;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const i=iv.compare(n,r);if(i!==0){if(i>0){const s=n;n=r,r=s}if(n.prev===r){const s=n;n=r,r=s}for(let s=0,o=r.rings.length;s<o;s++){const a=r.rings[s],l=r.windings[s],c=n.rings.indexOf(a);c===-1?(n.rings.push(a),n.windings.push(l)):n.windings[c]+=l}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys;for(let a=0,l=this.rings.length;a<l;a++){const c=this.rings[a],d=this.windings[a],p=n.indexOf(c);p===-1?(n.push(c),r.push(d)):r[p]+=d}const s=[],o=[];for(let a=0,l=n.length;a<l;a++){if(r[a]===0)continue;const c=n[a],d=c.poly;if(o.indexOf(d)===-1)if(c.isExterior)s.push(d);else{o.indexOf(d)===-1&&o.push(d);const p=s.indexOf(c.poly);p!==-1&&s.splice(p,1)}}for(let a=0,l=s.length;a<l;a++){const c=s[a].multiPoly;i.indexOf(c)===-1&&i.push(c)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const e=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(Lb.type){case"union":{const r=e.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{let r,i;e.length<n.length?(r=e.length,i=n.length):(r=n.length,i=e.length),this._isInResult=i===Lb.numMultiPolys&&r<i;break}case"xor":{const r=Math.abs(e.length-n.length);this._isInResult=r%2===1;break}case"difference":{const r=i=>i.length===1&&i[0].isSubject;this._isInResult=r(e)!==r(n);break}}return this._isInResult}},f5=class{constructor(t,e,n){Ze(this,"poly");Ze(this,"isExterior");Ze(this,"segments");Ze(this,"bbox");if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=n,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=Rh.snap({x:new Yc(t[0][0]),y:new Yc(t[0][1])});this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let i=r;for(let s=1,o=t.length;s<o;s++){if(typeof t[s][0]!="number"||typeof t[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const a=Rh.snap({x:new Yc(t[s][0]),y:new Yc(t[s][1])});a.x.eq(i.x)&&a.y.eq(i.y)||(this.segments.push(Wv.fromRing(i,a,this)),a.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=a.x),a.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=a.y),a.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=a.x),a.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=a.y),i=a)}(!r.x.eq(i.x)||!r.y.eq(i.y))&&this.segments.push(Wv.fromRing(i,r,this))}getSweepEvents(){const t=[];for(let e=0,n=this.segments.length;e<n;e++){const r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}},dz=class{constructor(t,e){Ze(this,"multiPoly");Ze(this,"exteriorRing");Ze(this,"interiorRings");Ze(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new f5(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let n=1,r=t.length;n<r;n++){const i=new f5(t[n],this,!1);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=e}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let e=0,n=this.interiorRings.length;e<n;e++){const r=this.interiorRings[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)t.push(r[i])}return t}},p5=class{constructor(t,e){Ze(this,"isSubject");Ze(this,"polys");Ze(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:new Yc(Number.POSITIVE_INFINITY),y:new Yc(Number.POSITIVE_INFINITY)},ur:{x:new Yc(Number.NEGATIVE_INFINITY),y:new Yc(Number.NEGATIVE_INFINITY)}};for(let n=0,r=t.length;n<r;n++){const i=new dz(t[n],this);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=e}getSweepEvents(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const r=this.polys[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)t.push(r[i])}return t}},fz=(t,...e)=>Lb.run("intersection",t,e);Rh.set;function pz(t,e){var n,r,i,s,o,a,l,c,d,p,v=0,m=t.type==="FeatureCollection",x=t.type==="Feature",E=m?t.features.length:1;for(n=0;n<E;n++){for(a=m?t.features[n].geometry:x?t.geometry:t,c=m?t.features[n].properties:x?t.properties:{},d=m?t.features[n].bbox:x?t.bbox:void 0,p=m?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,d,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,d,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,d,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function gz(t,e={}){const n=[];if(pz(t,i=>{n.push(i.coordinates)}),n.length<2)throw new Error("Must specify at least 2 geometries");const r=fz(n[0],...n.slice(1));return r.length===0?null:r.length===1?Uu(r[0],e.properties):Bj(r,e.properties)}var mz=gz;function NE(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,d=0,p=0,v,m=t.type,x=m==="FeatureCollection",E=m==="Feature",M=x?t.features.length:1,A=0;A<M;A++){c=x?t.features[A].geometry:E?t.geometry:t,v=c?c.type==="GeometryCollection":!1,a=v?c.geometries.length:1;for(var O=0;O<a;O++){var z=0,K=0;if(o=v?c.geometries[O]:c,o!==null){l=o.coordinates;var ne=o.type;switch(d=0,ne){case null:break;case"Point":if(e(l,p,A,z,K)===!1)return!1;p++,z++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,A,z,K)===!1)return!1;p++,ne==="MultiPoint"&&z++}ne==="LineString"&&z++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-d;i++){if(e(l[r][i],p,A,z,K)===!1)return!1;p++}ne==="MultiLineString"&&z++,ne==="Polygon"&&K++}ne==="Polygon"&&z++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(K=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-d;s++){if(e(l[r][i][s],p,A,z,K)===!1)return!1;p++}K++}z++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(NE(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function vz(t,e){var n,r,i,s,o,a,l,c,d,p,v=0,m=t.type==="FeatureCollection",x=t.type==="Feature",E=m?t.features.length:1;for(n=0;n<E;n++){for(a=m?t.features[n].geometry:x?t.geometry:t,c=m?t.features[n].properties:x?t.properties:{},d=m?t.features[n].bbox:x?t.bbox:void 0,p=m?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,d,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,d,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,d,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function yz(t,e){vz(t,function(n,r,i,s,o){var a=n===null?null:n.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(Ap(n,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<n.coordinates.length;c++){var d=n.coordinates[c],p={type:l,coordinates:d};if(e(Ap(p,i),r,c)===!1)return!1}})}function bz(t,e){yz(t,function(n,r,i){var s=0;if(n.geometry){var o=n.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,c=0,d=0;if(NE(n,function(p,v,m,x,E){if(a===void 0||r>l||x>c||E>d){a=p,l=r,c=x,d=E,s=0;return}var M=Hu([a,p],n.properties);if(e(M,r,i,E,s)===!1)return!1;s++,a=p})===!1)return!1}}})}function _z(t,e,n){var r=n,i=!1;return bz(t,function(s,o,a,l,c){i===!1&&n===void 0?r=s:r=e(r,s,o,a,l,c),i=!0}),r}function Gv(t,e={}){return _z(t,(n,r)=>{const i=r.geometry.coordinates;return n+$_(i[0],i[1],e)},0)}var Gd=Gv;class cd extends Gn.Polygon{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Ze(this,"properties");this.properties=gn.measure("Polygon.constructor.initProperties",()=>({type:"Polygon",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{color:r.color||"#2b6451",weight:r.weight||3,opacity:r.opacity||1,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity||.2,dashArray:r.dashArray||"",name:r.name||""}})),this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){gn.measure("Polygon.updateProperties",()=>{var n,r,i,s,o;try{const a=this.getLatLngs()[0];if(!a||a.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const l=a.map(A=>[A.lng,A.lat]);l.push(l[0]);const c=Uu([l]),d=PE(c),p=Gv(Hu([...l]),{units:"meters"}),v=Wg(c),m=Gn.latLng(v.geometry.coordinates[1],v.geometry.coordinates[0]),x=((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||"",E=((i=this.properties)==null?void 0:i.category)||"forages",M=((s=this.properties)==null?void 0:s.accessLevel)||"visitor";this.properties={type:"Polygon",coordinates:a.map(A=>({lat:A.lat,lng:A.lng})),surface:d,perimeter:p,center:{lat:m.lat,lng:m.lng},vertices:a.length,category:E,accessLevel:M,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:x}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate polygon properties",a)}})}setName(n){gn.measure("Polygon.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return gn.measure("Polygon.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}setLatLngs(n){return gn.measure("Polygon.setLatLngs",()=>(super.setLatLngs(n),this.updateProperties(),this))}getMidPoints(){return gn.measure("Polygon.getMidPoints",()=>{const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(Gn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return r})}moveVertex(n,r){gn.measure("Polygon.moveVertex",()=>{const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i[n]=r,Gn.Polygon.prototype.setLatLngs.call(this,[i]))})}addVertex(n,r){gn.measure("Polygon.addVertex",()=>{const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i.splice((n+1)%i.length,0,r),Gn.Polygon.prototype.setLatLngs.call(this,[i]))})}move(n){return gn.measure("Polygon.move",()=>{const i=this.getLatLngs()[0].map(s=>Gn.latLng(s.lat+n.lat,s.lng+n.lng));return Gn.Polygon.prototype.setLatLngs.call(this,[i]),this})}getCenter(){return gn.measure("Polygon.getCenter",()=>{const n=this.getLatLngs()[0];if(!n||n.length===0)return new Gn.LatLng(0,0);try{const r=n.filter(c=>c&&typeof c.lat=="number"&&typeof c.lng=="number"&&!isNaN(c.lat)&&!isNaN(c.lng)&&Math.abs(c.lat)<=90&&Math.abs(c.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new Gn.LatLng(0,0);const i=r.map(c=>[c.lng,c.lat]);i.push(i[0]);const s=Uu([i]),o=Wg(s),a=o.geometry.coordinates[1],l=o.geometry.coordinates[0];if(typeof a!="number"||typeof l!="number"||isNaN(a)||isNaN(l)||Math.abs(a)>90||Math.abs(l)>180)throw new Error("Centroid calcul invalide");return Gn.latLng(a,l)}catch(r){console.warn("Erreur lors du calcul du centrode avec turf.js, utilisation de la mthode simple",r);let i=0,s=0,o=0;for(const a of n)a&&typeof a.lat=="number"&&typeof a.lng=="number"&&!isNaN(a.lat)&&!isNaN(a.lng)&&Math.abs(a.lat)<=90&&Math.abs(a.lng)<=180&&(i+=a.lat,s+=a.lng,o++);return o===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new Gn.LatLng(0,0)):new Gn.LatLng(i/o,s/o)}})}getSegmentLengths(){return gn.measure("Polygon.getSegmentLengths",()=>{const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(s.distanceTo(o))}return r})}}class ta extends Gn.Polyline{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Ze(this,"properties");Ze(this,"cachedProperties",{});Ze(this,"needsUpdate",!0);this.properties=gn.measure("Line.constructor.initProperties",()=>({type:"Line",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...r||{},name:r.name||""}})),this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){gn.measure("Line.updateProperties",()=>{var i,s,o,a,l;const n=this.getLatLngs();if(!n||n.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=n.map(c=>[c.lng,c.lat]);try{const c=Hu(r),d=Gv(c,{units:"meters"});let p;if(n.length===2)p=Gn.latLng((n[0].lat+n[1].lat)/2,(n[0].lng+n[1].lng)/2);else{const M=yb(c,d/2,{units:"meters"});p=Gn.latLng(M.geometry.coordinates[1],M.geometry.coordinates[0])}const v=10,m=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"",x=((o=this.properties)==null?void 0:o.category)||"forages",E=((a=this.properties)==null?void 0:a.accessLevel)||"visitor";this.properties={type:"Line",length:d,coordinates:n.map(M=>({lat:M.lat,lng:M.lng})),center:{lat:p.lat,lng:p.lng},vertices:n.length,surfaceInfluence:d*v,dimensions:{width:v},category:x,accessLevel:E,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((l=this.options)==null?void 0:l.dashArray)||"",name:m}},this.cachedProperties.length=d,this.cachedProperties.center=p,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(c){console.error("Failed to calculate line properties",c)}})}setName(n){gn.measure("Line.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return gn.measure("Line.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}invalidateCache(){gn.measure("Line.invalidateCache",()=>{this.needsUpdate=!0,this.cachedProperties={}})}setLatLngs(n){return super.setLatLngs(n),this.needsUpdate=!0,this.cachedProperties={},this.fire("latlngs:updated",{latlngs:this.getLatLngs()}),this}getMidPoints(){return gn.measure("Line.getMidPoints",()=>{if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];if(!s||!o){console.warn("Points invalides dtects pour le segment",i);continue}r.push(Gn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return this.cachedProperties.midPoints=r,r})}getMidPointAt(n){return gn.measure("Line.getMidPointAt",()=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return null;const i=r[n],s=r[n+1];return!i||!s?(console.warn("Points invalides pour calcul du midpoint au segment",n),null):Gn.latLng((i.lat+s.lat)/2,(i.lng+s.lng)/2)})}moveVertex(n,r,i=!1){gn.measure("Line.moveVertex",()=>{const s=this.getLatLngs();n>=0&&n<s.length&&(s[n]=r,this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("vertex:moved",{index:n,latlng:r,allPoints:s}),i&&this.updateProperties())})}addVertex(n,r,i=!1){gn.measure("Line.addVertex",()=>{const s=this.getLatLngs();n>=0&&n<s.length-1&&(s.splice(n+1,0,r),Gn.Polyline.prototype.setLatLngs.call(this,s),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,i&&this.updateProperties())})}move(n,r=!0){return gn.measure("Line.move",()=>{this.fire("move:start");const i=this.getLatLngs(),s=i.map(o=>Gn.latLng(o.lat+n.lat,o.lng+n.lng));return this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("move",{delta:n,newPositions:s,oldPositions:i}),r&&(this.updateProperties(),this.fire("properties:updated",{shape:this,properties:this.properties}),this.fire("move:end")),this})}getCenter(){return gn.measure("Line.getCenter",()=>{if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const n=this.getLatLngs();if(n.length<2)return n[0]||new Gn.LatLng(0,0);try{const r=n.map(l=>[l.lng,l.lat]),i=Hu(r),s=Gv(i,{units:"meters"}),o=yb(i,s/2,{units:"meters"}),a=Gn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0]);return this.cachedProperties.center=a,a}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const i=n.reduce((a,l)=>a+l.lat,0)/n.length,s=n.reduce((a,l)=>a+l.lng,0)/n.length,o=new Gn.LatLng(i,s);return this.cachedProperties.center=o,o}})}getSegmentLengths(){return gn.measure("Line.getSegmentLengths",()=>{if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];r.push(s.distanceTo(o))}return this.cachedProperties.segmentLengths=r,r})}getSegmentLengthAt(n){return gn.measure("Line.getSegmentLengthAt",()=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return 0;const i=r[n],s=r[n+1];return i.distanceTo(s)})}getLengthToVertex(n){return gn.measure("Line.getLengthToVertex",()=>{const r=this.getLatLngs();let i=0;if(n<=0||r.length<2)return 0;for(let s=0;s<Math.min(n,r.length-1);s++)i+=r[s].distanceTo(r[s+1]);return i})}getLength(){return gn.measure("Line.getLength",()=>{if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const n=this.getLatLngs();let r=0;for(let i=0;i<n.length-1;i++)r+=n[i].distanceTo(n[i+1]);return this.cachedProperties.length=r,r})}}const Cl=class Cl extends ta{constructor(n,r={}){super(n,{...r,color:"#FF4500",weight:4,opacity:.8,interactive:!1,pmIgnore:!0});Ze(this,"elevationData",[]);Ze(this,"elevationProfile",null);Ze(this,"elevationMarker",null);Ze(this,"isZooming",!1);Ze(this,"simpleLine",null);Ze(this,"isDestroyed",!1);Ze(this,"zoomAnimationTimeout",null);this.properties=gn.measure("ElevationLine.constructor.initProperties",()=>({...this.properties,type:"ElevationLine",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...this.properties.style||{},name:r.name||""},elevationProfile:null,maxElevation:0,minElevation:0,elevationGain:0,elevationLoss:0,dataSource:"pending"})),this.setupEventListeners()}setupEventListeners(){gn.measure("ElevationLine.setupEventListeners",()=>{this.on("move",()=>this.updateElevationProfile()),this.on("add",()=>{this._map&&(this._map.on("zoomstart",this.handleZoomStart,this),this._map.on("zoomend",this.handleZoomEnd,this),this._map.on("zoomanim",this._animateZoom,this))}),this.on("remove",()=>{this.cleanupEventListeners()})})}cleanupEventListeners(){this._map&&(this._map.off("zoomstart",this.handleZoomStart,this),this._map.off("zoomend",this.handleZoomEnd,this),this._map.off("zoomanim",this._animateZoom,this)),this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null)}_animateZoom(n){if(this.isDestroyed||!this._map||!this.getLatLngs().length){console.debug("[ElevationLine] Animation de zoom ignore - ligne dtruite ou carte non disponible");return}this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null);try{this.elevationMarker&&this.elevationMarker.remove();const r=this._path;r&&(r.style.display="none");const i=this.getLatLngs();if(i&&i.length>0&&this._map&&!this.isDestroyed){if(!this._map.getContainer()){console.debug("[ElevationLine] Carte non valide pendant l'animation de zoom");return}if(this.simpleLine?this.simpleLine.setLatLngs(i):(this.simpleLine=Gn.polyline(i,{color:"#FF4500",weight:3,opacity:.6,smoothFactor:1,interactive:!1}),this._map&&this._map.getContainer()&&this.simpleLine.addTo(this._map)),this.simpleLine&&this.simpleLine._path){const s=this.simpleLine._path.style.transform;this.simpleLine._path.style.transform="",this.zoomAnimationTimeout=setTimeout(()=>{if(this.isDestroyed||!this._map||!this._map.getContainer()){this.cleanup();return}try{this.simpleLine&&this.simpleLine._path&&(this.simpleLine._path.style.transform=s,this.simpleLine._path.style.display=""),r&&!this.isDestroyed&&(r.style.display=""),this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(o){console.warn("[ElevationLine] Erreur lors de la restauration aprs animation:",o),this.cleanup()}},300)}}}catch(r){console.debug("[ElevationLine] Animation de zoom ignore:",r),this.zoomAnimationTimeout=setTimeout(()=>{if(this.isDestroyed||!this._map||!this._map.getContainer()){this.cleanup();return}try{this._path&&(this._path.style.display=""),this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(i){console.error("[ElevationLine] Erreur lors de la restauration aprs animation:",i),this.cleanup()}},300)}}handleZoomStart(){this.isDestroyed||gn.measure("ElevationLine.handleZoomStart",()=>{if(!(this.isZooming||!this._map)){this.isZooming=!0;try{this.elevationMarker&&this.elevationMarker.remove();const n=this._path;n&&(n.style.display="none"),this.isDestroyed||this.setStyle({opacity:.3})}catch(n){console.error("[ElevationLine] Error in handleZoomStart:",n),this.cleanup()}}})}handleZoomEnd(){this.isDestroyed||gn.measure("ElevationLine.handleZoomEnd",()=>{if(!this._map){this.isZooming=!1;return}try{this.simpleLine&&this._map&&(this.simpleLine.remove(),this.simpleLine=null);const n=this._path;n&&(n.style.display=""),this.isDestroyed||this.setStyle({opacity:.8}),this.zoomAnimationTimeout&&clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=setTimeout(()=>{if(!(this.isDestroyed||!this._map))try{this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(r){console.warn("[ElevationLine] Erreur lors du redraw aprs zoom:",r),this.cleanup()}},50)}catch(n){console.error("[ElevationLine] Error in handleZoomEnd:",n)}finally{this.isZooming=!1}})}cleanup(){gn.measure("ElevationLine.cleanup",()=>{if(this.isZooming=!1,this.hideElevationMarker(),this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null),this.simpleLine&&this._map){try{this.simpleLine.remove()}catch(r){console.error("[ElevationLine] Error removing simpleLine:",r)}this.simpleLine=null}if(this.elevationProfile){try{this.elevationProfile.remove()}catch(r){console.error("[ElevationLine] Error removing elevationProfile:",r)}this.elevationProfile=null}const n=this._path;n&&(n.style.display=""),!this.isDestroyed&&this._map&&this._map.hasLayer(this)&&this.setStyle({opacity:.8})})}calculateOptimalSampleCount(){return gn.measure("ElevationLine.calculateOptimalSampleCount",()=>{const n=this.getLength(),r=Math.ceil(n/Cl.SAMPLE_DISTANCE);return Math.min(Math.max(r,Cl.MIN_SAMPLES),Cl.MAX_SAMPLES)})}async fetchElevationData(n=0){return gn.measure("ElevationLine.fetchElevationData",async()=>{if(this.getLatLngs().length===0)return;const i=this.getLength();let s="";const o=this.calculateOptimalSampleCount();console.log(`[ElevationLine] Using ${o} sample points for ${i.toFixed(0)}m line`);const a=[];for(let l=0;l<o;l++){const c=l/(o-1)*i,d=this.getPointAtDistance(c);d&&a.push(`${d.lat},${d.lng}`)}s=a.join("|");try{const l=await fetch(`${Cl.API_URL}?locations=${s}`);if(!l.ok)throw new Error(`HTTP error ${l.status}`);const c=await l.json();if(!c.results||!Array.isArray(c.results))throw new Error("Invalid API response format");this.elevationData=c.results.map((d,p)=>({distance:p/(o-1)*i,elevation:d.elevation})),this.properties.dataSource="api"}catch(l){if(console.warn(`[ElevationLine] API fetch attempt ${n+1}/${Cl.MAX_RETRIES} failed:`,l),n<Cl.MAX_RETRIES)return await new Promise(c=>setTimeout(c,Cl.RETRY_DELAY)),this.fetchElevationData(n+1);console.warn("[ElevationLine] All API attempts failed, falling back to simulation"),this.simulateElevationData(),this.properties.dataSource="simulation"}this.calculateElevationStatistics()})}simulateElevationData(){gn.measure("ElevationLine.simulateElevationData",()=>{const n=this.getLength(),r=this.calculateOptimalSampleCount();this.elevationData=Array.from({length:r},(i,s)=>{const o=s/(r-1)*n,a=100+Math.sin(o/n*Math.PI*2)*50;return{distance:o,elevation:a}})})}calculateElevationStatistics(){gn.measure("ElevationLine.calculateElevationStatistics",()=>{if(!this.elevationData.length)return;const n=this.elevationData.map(d=>d.elevation),r=n.length?Math.max(...n):0,i=n.length?Math.min(...n):0;let s=0,o=0,a=0,l=0,c=0;console.log("[ElevationLine][calculateElevationStatistics] Donnes brutes:",{elevationsCount:n.length,maxElevation:r,minElevation:i});for(let d=1;d<this.elevationData.length;d++){const p=this.elevationData[d-1],v=this.elevationData[d],m=v.elevation-p.elevation;m>0?s+=m:o+=Math.abs(m);const x=v.distance-p.distance;if(x>0){const E=m/x*100;a=Math.max(a,Math.abs(E)),l+=Math.abs(E),c++}}console.log("[ElevationLine][calculateElevationStatistics] Calculs intermdiaires:",{gain:s,loss:o,maxSlope:a,averageSlope:c>0?l/c:0}),this.properties={...this.properties,type:"ElevationLine",maxElevation:r,minElevation:i,elevationGain:s,elevationLoss:o,maxSlope:a,averageSlope:c>0?l/c:0,elevationData:this.elevationData,dataSource:this.properties.dataSource,length:this.getLength()},console.log("[ElevationLine][calculateElevationStatistics] Proprits mises  jour:",this.properties)})}showElevationAt(n){gn.measure("ElevationLine.showElevationAt",()=>{if(!(!this.elevationData.length||!this._map))try{const r=this.elevationData.reduce((s,o)=>Math.abs(o.distance-n)<Math.abs(s.distance-n)?o:s),i=this.getPointAtDistance(n);if(!i)return;this.elevationMarker?(this.elevationMarker.setLatLng(i),this.elevationMarker.setTooltipContent(`Distance: ${this.formatDistance(r.distance)}<br>Altitude: ${this.formatElevation(r.elevation)}`)):(this.elevationMarker=Gn.circleMarker(i,{radius:6,color:"#FF4500",fillColor:"#FF4500",fillOpacity:1,weight:2,className:"elevation-marker"}),this.elevationMarker.bindTooltip(`Distance: ${this.formatDistance(r.distance)}<br>Altitude: ${this.formatElevation(r.elevation)}`,{permanent:!0,direction:"top",offset:[0,-10],className:"elevation-marker-tooltip"}),this._map&&this._map.hasLayer(this)&&this.elevationMarker.addTo(this._map)),this.fire("elevation:show",{distance:n,elevation:r.elevation,latLng:i})}catch(r){console.error("[ElevationLine] Erreur lors de l'affichage de l'lvation:",r),this.hideElevationMarker()}})}hideElevationMarker(){gn.measure("ElevationLine.hideElevationMarker",()=>{this.elevationMarker&&(this.elevationMarker.remove(),this.elevationMarker=null)})}getPointAtDistance(n){return gn.measure("ElevationLine.getPointAtDistance",()=>{try{const i=this.getLatLngs().map(a=>[a.lng,a.lat]),s=Hu(i),o=yb(s,n,{units:"meters"});return Gn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0])}catch(r){return console.error("Error calculating point at distance",r),null}})}moveVertex(n,r,i=!1){gn.measure("ElevationLine.moveVertex",()=>{super.moveVertex(n,r,!1),this.properties.type="ElevationLine",i&&this.updateElevationProfile()})}addVertex(n,r,i=!1){gn.measure("ElevationLine.addVertex",()=>{console.warn("[ElevationLine] Tentative d'ajout de vertex ignore - non autoris pour un profil altimtrique")})}setLatLngs(n){return gn.measure("ElevationLine.setLatLngs",()=>(super.setLatLngs(n),this.properties.type="ElevationLine",this.updateElevationProfile(),this))}move(n,r=!0){return gn.measure("ElevationLine.move",()=>(super.move(n,!1),this.properties.type="ElevationLine",r&&this.updateElevationProfile(),this))}setName(n){gn.measure("ElevationLine.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return gn.measure("ElevationLine.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}formatDistance(n){return gn.measure("ElevationLine.formatDistance",()=>n>=1e3?`${(n/1e3).toFixed(2)} km`:`${n.toFixed(0)} m`)}formatElevation(n){return gn.measure("ElevationLine.formatElevation",()=>`${n.toFixed(0)} m`)}onAdd(n){return gn.measure("ElevationLine.onAdd",()=>(super.onAdd(n),this))}onRemove(n){return this.isDestroyed=!0,this.cleanupEventListeners(),this.cleanup(),super.onRemove(n)}async updateElevationProfile(){return gn.measure("ElevationLine.updateElevationProfile",async()=>{try{if(this.properties.elevationData&&this.properties.dataSource==="restored"){this.elevationData=this.properties.elevationData,this.calculateElevationStatistics(),this._map&&this._map.hasLayer(this)&&this.redraw(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties});return}await this.fetchElevationData(),this.updateProperties(),this._map&&this._map.hasLayer(this)&&this.redraw(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties})}catch(n){console.error("[ElevationLine] Erreur lors de la mise  jour du profil d'lvation:",n),this.properties.dataSource="error"}})}updateProperties(){gn.measure("ElevationLine.updateProperties",()=>{var n,r;if(super.updateProperties(),this.elevationData&&this.elevationData.length>0){const i=this.elevationData.map(M=>M.elevation),s=Math.max(...i),o=Math.min(...i);let a=0,l=0,c=0,d=0,p=0;for(let M=1;M<this.elevationData.length;M++){const A=this.elevationData[M-1],O=this.elevationData[M],z=O.elevation-A.elevation;z>0?a+=z:l+=Math.abs(z);const K=O.distance-A.distance;if(K>0){const ne=z/K*100;c=Math.max(c,Math.abs(ne)),d+=Math.abs(ne),p++}}const m=this.getLatLngs().map(M=>({lat:M.lat,lng:M.lng})),x=((n=this.properties)==null?void 0:n.category)||"forages",E=((r=this.properties)==null?void 0:r.accessLevel)||"visitor";this.properties={...this.properties,type:"ElevationLine",coordinates:m,elevationData:this.elevationData.map(M=>({distance:M.distance,elevation:M.elevation})),maxElevation:s,minElevation:o,elevationGain:a,elevationLoss:l,maxSlope:c,averageSlope:p>0?d/p:0,dataSource:this.properties.dataSource||"api",category:x,accessLevel:E},this.fire("properties:updated",{shape:this,properties:this.properties})}})}getElevationData(){return gn.measure("ElevationLine.getElevationData",()=>this.elevationData)}};Ze(Cl,"API_URL","https://api.open-elevation.com/api/v1/lookup"),Ze(Cl,"RETRY_DELAY",2e3),Ze(Cl,"MAX_RETRIES",3),Ze(Cl,"SAMPLE_DISTANCE",100),Ze(Cl,"MIN_SAMPLES",10),Ze(Cl,"MAX_SAMPLES",50);let Sd=Cl;var qv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */qv.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,d="__lodash_placeholder__",p=1,v=2,m=4,x=1,E=2,M=1,A=2,O=4,z=8,K=16,ne=32,me=64,pe=128,N=256,j=512,q=30,I="...",B=800,$=16,R=1,U=2,V=3,re=1/0,J=9007199254740991,_e=17976931348623157e292,Le=NaN,Oe=4294967295,Z=Oe-1,G=Oe>>>1,se=[["ary",pe],["bind",M],["bindKey",A],["curry",z],["curryRight",K],["flip",j],["partial",ne],["partialRight",me],["rearg",N]],ce="[object Arguments]",he="[object Array]",ve="[object AsyncFunction]",ee="[object Boolean]",X="[object Date]",De="[object DOMException]",Te="[object Error]",qe="[object Function]",ge="[object GeneratorFunction]",Q="[object Map]",ie="[object Number]",fe="[object Null]",Ce="[object Object]",de="[object Promise]",Xe="[object Proxy]",Ie="[object RegExp]",Ye="[object Set]",Je="[object String]",Ge="[object Symbol]",wt="[object Undefined]",Ct="[object WeakMap]",Wt="[object WeakSet]",sn="[object ArrayBuffer]",bn="[object DataView]",Qe="[object Float32Array]",ot="[object Float64Array]",it="[object Int8Array]",Vt="[object Int16Array]",Qt="[object Int32Array]",kn="[object Uint8Array]",Ln="[object Uint8ClampedArray]",Mn="[object Uint16Array]",Zn="[object Uint32Array]",en=/\b__p \+= '';/g,wn=/\b(__p \+=) '' \+/g,En=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xn=/&(?:amp|lt|gt|quot|#39);/g,dr=/[&<>"']/g,vr=RegExp(Xn.source),sr=RegExp(dr.source),ut=/<%-([\s\S]+?)%>/g,rt=/<%([\s\S]+?)%>/g,jt=/<%=([\s\S]+?)%>/g,Tn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yn=/^\w*$/,Jt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ht=/[\\^$.*+?()[\]{}|]/g,nn=RegExp(Ht.source),an=/^\s+/,St=/\s/,Ut=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Lr=/\{\n\/\* \[wrapped with (.+)\] \*/,Ot=/,? & /,$n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,or=/[()=,{}\[\]\/\s]/,Mi=/\\(\\)?/g,Br=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xr=/\w*$/,ur=/^[-+]0x[0-9a-f]+$/i,gi=/^0b[01]+$/i,yr=/^\[object .+?Constructor\]$/,Gr=/^0o[0-7]+$/i,zr=/^(?:0|[1-9]\d*)$/,ln=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_i=/($^)/,Ni=/['\n\r\u2028\u2029\\]/g,Ui="\\ud800-\\udfff",hi="\\u0300-\\u036f",Ir="\\ufe20-\\ufe2f",di="\\u20d0-\\u20ff",Sr=hi+Ir+di,ki="\\u2700-\\u27bf",js="a-z\\xdf-\\xf6\\xf8-\\xff",Ea="\\xac\\xb1\\xd7\\xf7",wi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",On="\\u2000-\\u206f",br=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wn="A-Z\\xc0-\\xd6\\xd8-\\xde",Hi="\\ufe0e\\ufe0f",Ki=Ea+wi+On+br,ds="[']",po="["+Ui+"]",Nn="["+Ki+"]",$r="["+Sr+"]",Wi="\\d+",Ii="["+ki+"]",Er="["+js+"]",Dn="[^"+Ui+Ki+Wi+ki+js+Wn+"]",mn="\\ud83c[\\udffb-\\udfff]",Fr="(?:"+$r+"|"+mn+")",ai="[^"+Ui+"]",ms="(?:\\ud83c[\\udde6-\\uddff]){2}",Oo="[\\ud800-\\udbff][\\udc00-\\udfff]",Xs="["+Wn+"]",ra="\\u200d",fa="(?:"+Er+"|"+Dn+")",mi="(?:"+Xs+"|"+Dn+")",go="(?:"+ds+"(?:d|ll|m|re|s|t|ve))?",fs="(?:"+ds+"(?:D|LL|M|RE|S|T|VE))?",zs=Fr+"?",mo="["+Hi+"]?",ps="(?:"+ra+"(?:"+[ai,ms,Oo].join("|")+")"+mo+zs+")*",iu="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Tl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",mr=mo+zs+ps,_r="(?:"+[Ii,ms,Oo].join("|")+")"+mr,vo="(?:"+[ai+$r+"?",$r,ms,Oo,po].join("|")+")",Xr=RegExp(ds,"g"),Ai=RegExp($r,"g"),yo=RegExp(mn+"(?="+mn+")|"+vo+mr,"g"),Cs=RegExp([Xs+"?"+Er+"+"+go+"(?="+[Nn,Xs,"$"].join("|")+")",mi+"+"+fs+"(?="+[Nn,Xs+fa,"$"].join("|")+")",Xs+"?"+fa+"+"+go,Xs+"+"+fs,Tl,iu,Wi,_r].join("|"),"g"),pa=RegExp("["+ra+Ui+Sr+Hi+"]"),pl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ju=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],su=-1,Pr={};Pr[Qe]=Pr[ot]=Pr[it]=Pr[Vt]=Pr[Qt]=Pr[kn]=Pr[Ln]=Pr[Mn]=Pr[Zn]=!0,Pr[ce]=Pr[he]=Pr[sn]=Pr[ee]=Pr[bn]=Pr[X]=Pr[Te]=Pr[qe]=Pr[Q]=Pr[ie]=Pr[Ce]=Pr[Ie]=Pr[Ye]=Pr[Je]=Pr[Ct]=!1;var qr={};qr[ce]=qr[he]=qr[sn]=qr[bn]=qr[ee]=qr[X]=qr[Qe]=qr[ot]=qr[it]=qr[Vt]=qr[Qt]=qr[Q]=qr[ie]=qr[Ce]=qr[Ie]=qr[Ye]=qr[Je]=qr[Ge]=qr[kn]=qr[Ln]=qr[Mn]=qr[Zn]=!0,qr[Te]=qr[qe]=qr[Ct]=!1;var gl={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Mc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ou={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Pu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Dl=parseFloat,au=parseInt,Mu=typeof Sa=="object"&&Sa&&Sa.Object===Object&&Sa,Jr=typeof self=="object"&&self&&self.Object===Object&&self,vs=Mu||Jr||Function("return this")(),cr=e&&!e.nodeType&&e,ys=cr&&!0&&t&&!t.nodeType&&t,Ol=ys&&ys.exports===cr,Ua=Ol&&Mu.process,Ji=function(){try{var _t=ys&&ys.require&&ys.require("util").types;return _t||Ua&&Ua.binding&&Ua.binding("util")}catch{}}(),ku=Ji&&Ji.isArrayBuffer,Pa=Ji&&Ji.isDate,lu=Ji&&Ji.isMap,uu=Ji&&Ji.isRegExp,ia=Ji&&Ji.isSet,cu=Ji&&Ji.isTypedArray;function xi(_t,Kt,Nt){switch(Nt.length){case 0:return _t.call(Kt);case 1:return _t.call(Kt,Nt[0]);case 2:return _t.call(Kt,Nt[0],Nt[1]);case 3:return _t.call(Kt,Nt[0],Nt[1],Nt[2])}return _t.apply(Kt,Nt)}function kc(_t,Kt,Nt,In){for(var Jn=-1,Cr=_t==null?0:_t.length;++Jn<Cr;){var Qi=_t[Jn];Kt(In,Qi,Nt(Qi),_t)}return In}function $s(_t,Kt){for(var Nt=-1,In=_t==null?0:_t.length;++Nt<In&&Kt(_t[Nt],Nt,_t)!==!1;);return _t}function ga(_t,Kt){for(var Nt=_t==null?0:_t.length;Nt--&&Kt(_t[Nt],Nt,_t)!==!1;);return _t}function hu(_t,Kt){for(var Nt=-1,In=_t==null?0:_t.length;++Nt<In;)if(!Kt(_t[Nt],Nt,_t))return!1;return!0}function ma(_t,Kt){for(var Nt=-1,In=_t==null?0:_t.length,Jn=0,Cr=[];++Nt<In;){var Qi=_t[Nt];Kt(Qi,Nt,_t)&&(Cr[Jn++]=Qi)}return Cr}function Nl(_t,Kt){var Nt=_t==null?0:_t.length;return!!Nt&&pn(_t,Kt,0)>-1}function Il(_t,Kt,Nt){for(var In=-1,Jn=_t==null?0:_t.length;++In<Jn;)if(Nt(Kt,_t[In]))return!0;return!1}function Li(_t,Kt){for(var Nt=-1,In=_t==null?0:_t.length,Jn=Array(In);++Nt<In;)Jn[Nt]=Kt(_t[Nt],Nt,_t);return Jn}function Ko(_t,Kt){for(var Nt=-1,In=Kt.length,Jn=_t.length;++Nt<In;)_t[Jn+Nt]=Kt[Nt];return _t}function Ha(_t,Kt,Nt,In){var Jn=-1,Cr=_t==null?0:_t.length;for(In&&Cr&&(Nt=_t[++Jn]);++Jn<Cr;)Nt=Kt(Nt,_t[Jn],Jn,_t);return Nt}function bs(_t,Kt,Nt,In){var Jn=_t==null?0:_t.length;for(In&&Jn&&(Nt=_t[--Jn]);Jn--;)Nt=Kt(Nt,_t[Jn],Jn,_t);return Nt}function F(_t,Kt){for(var Nt=-1,In=_t==null?0:_t.length;++Nt<In;)if(Kt(_t[Nt],Nt,_t))return!0;return!1}var we=wr("length");function et(_t){return _t.split("")}function dt(_t){return _t.match($n)||[]}function Pt(_t,Kt,Nt){var In;return Nt(_t,function(Jn,Cr,Qi){if(Kt(Jn,Cr,Qi))return In=Cr,!1}),In}function Gt(_t,Kt,Nt,In){for(var Jn=_t.length,Cr=Nt+(In?1:-1);In?Cr--:++Cr<Jn;)if(Kt(_t[Cr],Cr,_t))return Cr;return-1}function pn(_t,Kt,Nt){return Kt===Kt?Ns(_t,Kt,Nt):Gt(_t,Vn,Nt)}function Rn(_t,Kt,Nt,In){for(var Jn=Nt-1,Cr=_t.length;++Jn<Cr;)if(In(_t[Jn],Kt))return Jn;return-1}function Vn(_t){return _t!==_t}function ar(_t,Kt){var Nt=_t==null?0:_t.length;return Nt?Si(_t,Kt)/Nt:Le}function wr(_t){return function(Kt){return Kt==null?n:Kt[_t]}}function Vr(_t){return function(Kt){return _t==null?n:_t[Kt]}}function Zi(_t,Kt,Nt,In,Jn){return Jn(_t,function(Cr,Qi,Ci){Nt=In?(In=!1,Cr):Kt(Nt,Cr,Qi,Ci)}),Nt}function fi(_t,Kt){var Nt=_t.length;for(_t.sort(Kt);Nt--;)_t[Nt]=_t[Nt].value;return _t}function Si(_t,Kt){for(var Nt,In=-1,Jn=_t.length;++In<Jn;){var Cr=Kt(_t[In]);Cr!==n&&(Nt=Nt===n?Cr:Nt+Cr)}return Nt}function _s(_t,Kt){for(var Nt=-1,In=Array(_t);++Nt<_t;)In[Nt]=Kt(Nt);return In}function Es(_t,Kt){return Li(Kt,function(Nt){return[Nt,_t[Nt]]})}function Zo(_t){return _t&&_t.slice(0,Ga(_t)+1).replace(an,"")}function Ur(_t){return function(Kt){return _t(Kt)}}function Js(_t,Kt){return Li(Kt,function(Nt){return _t[Nt]})}function Bl(_t,Kt){return _t.has(Kt)}function bo(_t,Kt){for(var Nt=-1,In=_t.length;++Nt<In&&pn(Kt,_t[Nt],0)>-1;);return Nt}function Au(_t,Kt){for(var Nt=_t.length;Nt--&&pn(Kt,_t[Nt],0)>-1;);return Nt}function Ma(_t,Kt){for(var Nt=_t.length,In=0;Nt--;)_t[Nt]===Kt&&++In;return In}var Qu=Vr(gl),ml=Vr(Mc);function vl(_t){return"\\"+Pu[_t]}function Ps(_t,Kt){return _t==null?n:_t[Kt]}function ka(_t){return pa.test(_t)}function Xo(_t){return pl.test(_t)}function No(_t){for(var Kt,Nt=[];!(Kt=_t.next()).done;)Nt.push(Kt.value);return Nt}function Rl(_t){var Kt=-1,Nt=Array(_t.size);return _t.forEach(function(In,Jn){Nt[++Kt]=[Jn,In]}),Nt}function Qs(_t,Kt){return function(Nt){return _t(Kt(Nt))}}function _o(_t,Kt){for(var Nt=-1,In=_t.length,Jn=0,Cr=[];++Nt<In;){var Qi=_t[Nt];(Qi===Kt||Qi===d)&&(_t[Nt]=d,Cr[Jn++]=Nt)}return Cr}function wo(_t){var Kt=-1,Nt=Array(_t.size);return _t.forEach(function(In){Nt[++Kt]=In}),Nt}function Ac(_t){var Kt=-1,Nt=Array(_t.size);return _t.forEach(function(In){Nt[++Kt]=[In,In]}),Nt}function Ns(_t,Kt,Nt){for(var In=Nt-1,Jn=_t.length;++In<Jn;)if(_t[In]===Kt)return In;return-1}function Wa(_t,Kt,Nt){for(var In=Nt+1;In--;)if(_t[In]===Kt)return In;return In}function eo(_t){return ka(_t)?no(_t):we(_t)}function to(_t){return ka(_t)?Vs(_t):et(_t)}function Ga(_t){for(var Kt=_t.length;Kt--&&St.test(_t.charAt(Kt)););return Kt}var qa=Vr(ou);function no(_t){for(var Kt=yo.lastIndex=0;yo.test(_t);)++Kt;return Kt}function Vs(_t){return _t.match(yo)||[]}function Aa(_t){return _t.match(Cs)||[]}var Jo=function _t(Kt){Kt=Kt==null?vs:ro.defaults(vs.Object(),Kt,ro.pick(vs,Ju));var Nt=Kt.Array,In=Kt.Date,Jn=Kt.Error,Cr=Kt.Function,Qi=Kt.Math,Ci=Kt.Object,du=Kt.RegExp,xo=Kt.String,es=Kt.TypeError,Ta=Nt.prototype,Ya=Cr.prototype,Da=Ci.prototype,Oa=Kt["__core-js_shared__"],Na=Ya.toString,Qr=Da.hasOwnProperty,va=0,Us=function(){var f=/[^.]+$/.exec(Oa&&Oa.keys&&Oa.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),Ei=Da.toString,Bi=Na.call(Ci),ws=vs._,Gi=du("^"+Na.call(Qr).replace(Ht,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qo=Ol?Kt.Buffer:n,Io=Kt.Symbol,sa=Kt.Uint8Array,ec=Qo?Qo.allocUnsafe:n,Ia=Qs(Ci.getPrototypeOf,Ci),Ms=Ci.create,Vi=Da.propertyIsEnumerable,io=Ta.splice,Bo=Io?Io.isConcatSpreadable:n,gr=Io?Io.iterator:n,Ka=Io?Io.toStringTag:n,Za=function(){try{var f=zd(Ci,"defineProperty");return f({},"",{}),f}catch{}}(),ya=Kt.clearTimeout!==vs.clearTimeout&&Kt.clearTimeout,Lo=In&&In.now!==vs.Date.now&&In.now,ih=Kt.setTimeout!==vs.setTimeout&&Kt.setTimeout,Hs=Qi.ceil,Ws=Qi.floor,ba=Ci.getOwnPropertySymbols,u=Qo?Qo.isBuffer:n,y=Kt.isFinite,P=Ta.join,W=Qs(Ci.keys,Ci),le=Qi.max,Pe=Qi.min,lt=In.now,Dt=Kt.parseInt,qt=Qi.random,hn=Ta.reverse,Fn=zd(Kt,"DataView"),tr=zd(Kt,"Map"),jr=zd(Kt,"Promise"),ks=zd(Kt,"Set"),ls=zd(Kt,"WeakMap"),Gs=zd(Ci,"create"),ts=ls&&new ls,Ro={},sh=$d(Fn),Ba=$d(tr),_a=$d(jr),oa=$d(ks),Od=$d(ls),Tu=Io?Io.prototype:n,vi=Tu?Tu.valueOf:n,so=Tu?Tu.toString:n;function Be(f){if(So(f)&&!ti(f)&&!(f instanceof Hr)){if(f instanceof qs)return f;if(Qr.call(f,"__wrapped__"))return qw(f)}return new qs(f)}var Fo=function(){function f(){}return function(b){if(!ao(b))return{};if(Ms)return Ms(b);f.prototype=b;var D=new f;return f.prototype=n,D}}();function tc(){}function qs(f,b){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=n}Be.templateSettings={escape:ut,evaluate:rt,interpolate:jt,variable:"",imports:{_:Be}},Be.prototype=tc.prototype,Be.prototype.constructor=Be,qs.prototype=Fo(tc.prototype),qs.prototype.constructor=qs;function Hr(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Oe,this.__views__=[]}function Vh(){var f=new Hr(this.__wrapped__);return f.__actions__=jl(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=jl(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=jl(this.__views__),f}function Af(){if(this.__filtered__){var f=new Hr(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function Uh(){var f=this.__wrapped__.value(),b=this.__dir__,D=ti(f),oe=b<0,Se=D?f.length:0,Ve=JM(0,Se,this.__views__),at=Ve.start,vt=Ve.end,At=vt-at,dn=oe?vt:at-1,fn=this.__iteratees__,_n=fn.length,Hn=0,hr=Pe(At,this.__takeCount__);if(!D||!oe&&Se==At&&hr==At)return Du(f,this.__actions__);var kr=[];e:for(;At--&&Hn<hr;){dn+=b;for(var ci=-1,Ar=f[dn];++ci<_n;){var Pi=fn[ci],Fi=Pi.iteratee,gu=Pi.type,wl=Fi(Ar);if(gu==U)Ar=wl;else if(!wl){if(gu==R)continue e;break e}}kr[Hn++]=Ar}return kr}Hr.prototype=Fo(tc.prototype),Hr.prototype.constructor=Hr;function yl(f){var b=-1,D=f==null?0:f.length;for(this.clear();++b<D;){var oe=f[b];this.set(oe[0],oe[1])}}function oh(){this.__data__=Gs?Gs(null):{},this.size=0}function Nd(f){var b=this.has(f)&&delete this.__data__[f];return this.size-=b?1:0,b}function Up(f){var b=this.__data__;if(Gs){var D=b[f];return D===l?n:D}return Qr.call(b,f)?b[f]:n}function Tc(f){var b=this.__data__;return Gs?b[f]!==n:Qr.call(b,f)}function Hh(f,b){var D=this.__data__;return this.size+=this.has(f)?0:1,D[f]=Gs&&b===n?l:b,this}yl.prototype.clear=oh,yl.prototype.delete=Nd,yl.prototype.get=Up,yl.prototype.has=Tc,yl.prototype.set=Hh;function fu(f){var b=-1,D=f==null?0:f.length;for(this.clear();++b<D;){var oe=f[b];this.set(oe[0],oe[1])}}function Hp(){this.__data__=[],this.size=0}function Wh(f){var b=this.__data__,D=bt(b,f);if(D<0)return!1;var oe=b.length-1;return D==oe?b.pop():io.call(b,D,1),--this.size,!0}function Gh(f){var b=this.__data__,D=bt(b,f);return D<0?n:b[D][1]}function Tf(f){return bt(this.__data__,f)>-1}function Df(f,b){var D=this.__data__,oe=bt(D,f);return oe<0?(++this.size,D.push([f,b])):D[oe][1]=b,this}fu.prototype.clear=Hp,fu.prototype.delete=Wh,fu.prototype.get=Gh,fu.prototype.has=Tf,fu.prototype.set=Df;function Xa(f){var b=-1,D=f==null?0:f.length;for(this.clear();++b<D;){var oe=f[b];this.set(oe[0],oe[1])}}function Of(){this.size=0,this.__data__={hash:new yl,map:new(tr||fu),string:new yl}}function Nf(f){var b=Qm(this,f).delete(f);return this.size-=b?1:0,b}function If(f){return Qm(this,f).get(f)}function w(f){return Qm(this,f).has(f)}function T(f,b){var D=Qm(this,f),oe=D.size;return D.set(f,b),this.size+=D.size==oe?0:1,this}Xa.prototype.clear=Of,Xa.prototype.delete=Nf,Xa.prototype.get=If,Xa.prototype.has=w,Xa.prototype.set=T;function Y(f){var b=-1,D=f==null?0:f.length;for(this.__data__=new Xa;++b<D;)this.add(f[b])}function ue(f){return this.__data__.set(f,l),this}function xe(f){return this.__data__.has(f)}Y.prototype.add=Y.prototype.push=ue,Y.prototype.has=xe;function Me(f){var b=this.__data__=new fu(f);this.size=b.size}function Ae(){this.__data__=new fu,this.size=0}function Ne(f){var b=this.__data__,D=b.delete(f);return this.size=b.size,D}function Fe(f){return this.__data__.get(f)}function Ke(f){return this.__data__.has(f)}function pt(f,b){var D=this.__data__;if(D instanceof fu){var oe=D.__data__;if(!tr||oe.length<i-1)return oe.push([f,b]),this.size=++D.size,this;D=this.__data__=new Xa(oe)}return D.set(f,b),this.size=D.size,this}Me.prototype.clear=Ae,Me.prototype.delete=Ne,Me.prototype.get=Fe,Me.prototype.has=Ke,Me.prototype.set=pt;function Rt(f,b){var D=ti(f),oe=!D&&Vd(f),Se=!D&&!oe&&Yh(f),Ve=!D&&!oe&&!Se&&Hf(f),at=D||oe||Se||Ve,vt=at?_s(f.length,xo):[],At=vt.length;for(var dn in f)(b||Qr.call(f,dn))&&!(at&&(dn=="length"||Se&&(dn=="offset"||dn=="parent")||Ve&&(dn=="buffer"||dn=="byteLength"||dn=="byteOffset")||dh(dn,At)))&&vt.push(dn);return vt}function Ft(f){var b=f.length;return b?f[Rd(0,b-1)]:n}function Et(f,b){return e0(jl(f),nr(b,0,f.length))}function Zt(f){return e0(jl(f))}function Yt(f,b,D){(D!==n&&!ac(f[b],D)||D===n&&!(b in f))&&Bn(f,b,D)}function gt(f,b,D){var oe=f[b];(!(Qr.call(f,b)&&ac(oe,D))||D===n&&!(b in f))&&Bn(f,b,D)}function bt(f,b){for(var D=f.length;D--;)if(ac(f[D][0],b))return D;return-1}function on(f,b,D,oe){return H(f,function(Se,Ve,at){b(oe,Se,D(Se),at)}),oe}function vn(f,b){return f&&Nc(b,wa(b),f)}function un(f,b){return f&&Nc(b,$l(b),f)}function Bn(f,b,D){b=="__proto__"&&Za?Za(f,b,{configurable:!0,enumerable:!0,value:D,writable:!0}):f[b]=D}function An(f,b){for(var D=-1,oe=b.length,Se=Nt(oe),Ve=f==null;++D<oe;)Se[D]=Ve?n:b1(f,b[D]);return Se}function nr(f,b,D){return f===f&&(D!==n&&(f=f<=D?f:D),b!==n&&(f=f>=b?f:b)),f}function h(f,b,D,oe,Se,Ve){var at,vt=b&p,At=b&v,dn=b&m;if(D&&(at=Se?D(f,oe,Se,Ve):D(f)),at!==n)return at;if(!ao(f))return f;var fn=ti(f);if(fn){if(at=ek(f),!vt)return jl(f,at)}else{var _n=Qa(f),Hn=_n==qe||_n==ge;if(Yh(f))return bw(f,vt);if(_n==Ce||_n==ce||Hn&&!Se){if(at=At||Hn?{}:Fw(f),!vt)return At?UM(f,un(at,f)):VM(f,vn(at,f))}else{if(!qr[_n])return Se?f:{};at=tk(f,_n,vt)}}Ve||(Ve=new Me);var hr=Ve.get(f);if(hr)return hr;Ve.set(f,at),fx(f)?f.forEach(function(Ar){at.add(h(Ar,b,D,Ar,f,Ve))}):hx(f)&&f.forEach(function(Ar,Pi){at.set(Pi,h(Ar,b,D,Pi,f,Ve))});var kr=dn?At?s1:i1:At?$l:wa,ci=fn?n:kr(f);return $s(ci||f,function(Ar,Pi){ci&&(Pi=Ar,Ar=f[Pi]),gt(at,Pi,h(Ar,b,D,Pi,f,Ve))}),at}function g(f){var b=wa(f);return function(D){return _(D,f,b)}}function _(f,b,D){var oe=D.length;if(f==null)return!oe;for(f=Ci(f);oe--;){var Se=D[oe],Ve=b[Se],at=f[Se];if(at===n&&!(Se in f)||!Ve(at))return!1}return!0}function S(f,b,D){if(typeof f!="function")throw new es(o);return Kp(function(){f.apply(n,D)},b)}function k(f,b,D,oe){var Se=-1,Ve=Nl,at=!0,vt=f.length,At=[],dn=b.length;if(!vt)return At;D&&(b=Li(b,Ur(D))),oe?(Ve=Il,at=!1):b.length>=i&&(Ve=Bl,at=!1,b=new Y(b));e:for(;++Se<vt;){var fn=f[Se],_n=D==null?fn:D(fn);if(fn=oe||fn!==0?fn:0,at&&_n===_n){for(var Hn=dn;Hn--;)if(b[Hn]===_n)continue e;At.push(fn)}else Ve(b,_n,oe)||At.push(fn)}return At}var H=Sw(tn),te=Sw(xn,!0);function ae(f,b){var D=!0;return H(f,function(oe,Se,Ve){return D=!!b(oe,Se,Ve),D}),D}function ye(f,b,D){for(var oe=-1,Se=f.length;++oe<Se;){var Ve=f[oe],at=b(Ve);if(at!=null&&(vt===n?at===at&&!pu(at):D(at,vt)))var vt=at,At=Ve}return At}function Ee(f,b,D,oe){var Se=f.length;for(D=ui(D),D<0&&(D=-D>Se?0:Se+D),oe=oe===n||oe>Se?Se:ui(oe),oe<0&&(oe+=Se),oe=D>oe?0:gx(oe);D<oe;)f[D++]=b;return f}function nt(f,b){var D=[];return H(f,function(oe,Se,Ve){b(oe,Se,Ve)&&D.push(oe)}),D}function We(f,b,D,oe,Se){var Ve=-1,at=f.length;for(D||(D=rk),Se||(Se=[]);++Ve<at;){var vt=f[Ve];b>0&&D(vt)?b>1?We(vt,b-1,D,oe,Se):Ko(Se,vt):oe||(Se[Se.length]=vt)}return Se}var yt=Cw(),It=Cw(!0);function tn(f,b){return f&&yt(f,b,wa)}function xn(f,b){return f&&It(f,b,wa)}function Sn(f,b){return ma(b,function(D){return fh(f[D])})}function fr(f,b){b=oc(b,f);for(var D=0,oe=b.length;f!=null&&D<oe;)f=f[Ic(b[D++])];return D&&D==oe?f:n}function tt(f,b,D){var oe=b(f);return ti(f)?oe:Ko(oe,D(f))}function st(f){return f==null?f===n?wt:fe:Ka&&Ka in Ci(f)?XM(f):ck(f)}function ft(f,b){return f>b}function zt(f,b){return f!=null&&Qr.call(f,b)}function Lt(f,b){return f!=null&&b in Ci(f)}function Bt(f,b,D){return f>=Pe(b,D)&&f<le(b,D)}function be(f,b,D){for(var oe=D?Il:Nl,Se=f[0].length,Ve=f.length,at=Ve,vt=Nt(Ve),At=1/0,dn=[];at--;){var fn=f[at];at&&b&&(fn=Li(fn,Ur(b))),At=Pe(fn.length,At),vt[at]=!D&&(b||Se>=120&&fn.length>=120)?new Y(at&&fn):n}fn=f[0];var _n=-1,Hn=vt[0];e:for(;++_n<Se&&dn.length<At;){var hr=fn[_n],kr=b?b(hr):hr;if(hr=D||hr!==0?hr:0,!(Hn?Bl(Hn,kr):oe(dn,kr,D))){for(at=Ve;--at;){var ci=vt[at];if(!(ci?Bl(ci,kr):oe(f[at],kr,D)))continue e}Hn&&Hn.push(kr),dn.push(hr)}}return dn}function ke(f,b,D,oe){return tn(f,function(Se,Ve,at){b(oe,D(Se),Ve,at)}),oe}function ze(f,b,D){b=oc(b,f),f=Vw(f,b);var oe=f==null?f:f[Ic(Iu(b))];return oe==null?n:xi(oe,f,D)}function je(f){return So(f)&&st(f)==ce}function Ue(f){return So(f)&&st(f)==sn}function He(f){return So(f)&&st(f)==X}function ct(f,b,D,oe,Se){return f===b?!0:f==null||b==null||!So(f)&&!So(b)?f!==f&&b!==b:ht(f,b,D,oe,ct,Se)}function ht(f,b,D,oe,Se,Ve){var at=ti(f),vt=ti(b),At=at?he:Qa(f),dn=vt?he:Qa(b);At=At==ce?Ce:At,dn=dn==ce?Ce:dn;var fn=At==Ce,_n=dn==Ce,Hn=At==dn;if(Hn&&Yh(f)){if(!Yh(b))return!1;at=!0,fn=!1}if(Hn&&!fn)return Ve||(Ve=new Me),at||Hf(f)?Iw(f,b,D,oe,Se,Ve):KM(f,b,At,D,oe,Se,Ve);if(!(D&x)){var hr=fn&&Qr.call(f,"__wrapped__"),kr=_n&&Qr.call(b,"__wrapped__");if(hr||kr){var ci=hr?f.value():f,Ar=kr?b.value():b;return Ve||(Ve=new Me),Se(ci,Ar,D,oe,Ve)}}return Hn?(Ve||(Ve=new Me),ZM(f,b,D,oe,Se,Ve)):!1}function mt(f){return So(f)&&Qa(f)==Q}function Mt(f,b,D,oe){var Se=D.length,Ve=Se,at=!oe;if(f==null)return!Ve;for(f=Ci(f);Se--;){var vt=D[Se];if(at&&vt[2]?vt[1]!==f[vt[0]]:!(vt[0]in f))return!1}for(;++Se<Ve;){vt=D[Se];var At=vt[0],dn=f[At],fn=vt[1];if(at&&vt[2]){if(dn===n&&!(At in f))return!1}else{var _n=new Me;if(oe)var Hn=oe(dn,fn,At,f,b,_n);if(!(Hn===n?ct(fn,dn,x|E,oe,_n):Hn))return!1}}return!0}function kt(f){if(!ao(f)||sk(f))return!1;var b=fh(f)?Gi:yr;return b.test($d(f))}function cn(f){return So(f)&&st(f)==Ie}function Un(f){return So(f)&&Qa(f)==Ye}function qn(f){return So(f)&&o0(f.length)&&!!Pr[st(f)]}function rr(f){return typeof f=="function"?f:f==null?Vl:typeof f=="object"?ti(f)?nc(f[0],f[1]):jo(f):Ex(f)}function yi(f){if(!Yp(f))return W(f);var b=[];for(var D in Ci(f))Qr.call(f,D)&&D!="constructor"&&b.push(D);return b}function Ri(f){if(!ao(f))return uk(f);var b=Yp(f),D=[];for(var oe in f)oe=="constructor"&&(b||!Qr.call(f,oe))||D.push(oe);return D}function ei(f,b){return f<b}function qi(f,b){var D=-1,oe=zl(f)?Nt(f.length):[];return H(f,function(Se,Ve,at){oe[++D]=b(Se,Ve,at)}),oe}function jo(f){var b=a1(f);return b.length==1&&b[0][2]?zw(b[0][0],b[0][1]):function(D){return D===f||Mt(D,f,b)}}function nc(f,b){return u1(f)&&jw(b)?zw(Ic(f),b):function(D){var oe=b1(D,f);return oe===n&&oe===b?_1(D,f):ct(b,oe,x|E)}}function Ra(f,b,D,oe,Se){f!==b&&yt(b,function(Ve,at){if(Se||(Se=new Me),ao(Ve))Id(f,b,at,D,Ra,oe,Se);else{var vt=oe?oe(h1(f,at),Ve,at+"",f,b,Se):n;vt===n&&(vt=Ve),Yt(f,at,vt)}},$l)}function Id(f,b,D,oe,Se,Ve,at){var vt=h1(f,D),At=h1(b,D),dn=at.get(At);if(dn){Yt(f,D,dn);return}var fn=Ve?Ve(vt,At,D+"",f,b,at):n,_n=fn===n;if(_n){var Hn=ti(At),hr=!Hn&&Yh(At),kr=!Hn&&!hr&&Hf(At);fn=At,Hn||hr||kr?ti(vt)?fn=vt:zo(vt)?fn=jl(vt):hr?(_n=!1,fn=bw(At,!0)):kr?(_n=!1,fn=_w(At,!0)):fn=[]:Zp(At)||Vd(At)?(fn=vt,Vd(vt)?fn=mx(vt):(!ao(vt)||fh(vt))&&(fn=Fw(At))):_n=!1}_n&&(at.set(At,fn),Se(fn,At,oe,Ve,at),at.delete(At)),Yt(f,D,fn)}function bl(f,b){var D=f.length;if(D)return b+=b<0?D:0,dh(b,D)?f[b]:n}function Dc(f,b,D){b.length?b=Li(b,function(Ve){return ti(Ve)?function(at){return fr(at,Ve.length===1?Ve[0]:Ve)}:Ve}):b=[Vl];var oe=-1;b=Li(b,Ur(Mr()));var Se=qi(f,function(Ve,at,vt){var At=Li(b,function(dn){return dn(Ve)});return{criteria:At,index:++oe,value:Ve}});return fi(Se,function(Ve,at){return $M(Ve,at,D)})}function Fa(f,b){return oo(f,b,function(D,oe){return _1(f,oe)})}function oo(f,b,D){for(var oe=-1,Se=b.length,Ve={};++oe<Se;){var at=b[oe],vt=fr(f,at);D(vt,at)&&ah(Ve,oc(at,f),vt)}return Ve}function xs(f){return function(b){return fr(b,f)}}function Bf(f,b,D,oe){var Se=oe?Rn:pn,Ve=-1,at=b.length,vt=f;for(f===b&&(b=jl(b)),D&&(vt=Li(f,Ur(D)));++Ve<at;)for(var At=0,dn=b[Ve],fn=D?D(dn):dn;(At=Se(vt,fn,At,oe))>-1;)vt!==f&&io.call(vt,At,1),io.call(f,At,1);return f}function Bd(f,b){for(var D=f?b.length:0,oe=D-1;D--;){var Se=b[D];if(D==oe||Se!==Ve){var Ve=Se;dh(Se)?io.call(f,Se,1):lh(f,Se)}}return f}function Rd(f,b){return f+Ws(qt()*(b-f+1))}function Fd(f,b,D,oe){for(var Se=-1,Ve=le(Hs((b-f)/(D||1)),0),at=Nt(Ve);Ve--;)at[oe?Ve:++Se]=f,f+=D;return at}function Rf(f,b){var D="";if(!f||b<1||b>J)return D;do b%2&&(D+=f),b=Ws(b/2),b&&(f+=f);while(b);return D}function li(f,b){return d1($w(f,b,Vl),f+"")}function Ff(f){return Ft(Wf(f))}function Vm(f,b){var D=Wf(f);return e0(D,nr(b,0,D.length))}function ah(f,b,D,oe){if(!ao(f))return f;b=oc(b,f);for(var Se=-1,Ve=b.length,at=Ve-1,vt=f;vt!=null&&++Se<Ve;){var At=Ic(b[Se]),dn=D;if(At==="__proto__"||At==="constructor"||At==="prototype")return f;if(Se!=at){var fn=vt[At];dn=oe?oe(fn,At,vt):n,dn===n&&(dn=ao(fn)?fn:dh(b[Se+1])?[]:{})}gt(vt,At,dn),vt=vt[At]}return f}var rc=ts?function(f,b){return ts.set(f,b),f}:Vl,Um=Za?function(f,b){return Za(f,"toString",{configurable:!0,enumerable:!1,value:x1(b),writable:!0})}:Vl;function Hm(f){return e0(Wf(f))}function Fl(f,b,D){var oe=-1,Se=f.length;b<0&&(b=-b>Se?0:Se+b),D=D>Se?Se:D,D<0&&(D+=Se),Se=b>D?0:D-b>>>0,b>>>=0;for(var Ve=Nt(Se);++oe<Se;)Ve[oe]=f[oe+b];return Ve}function Wm(f,b){var D;return H(f,function(oe,Se,Ve){return D=b(oe,Se,Ve),!D}),!!D}function ic(f,b,D){var oe=0,Se=f==null?oe:f.length;if(typeof b=="number"&&b===b&&Se<=G){for(;oe<Se;){var Ve=oe+Se>>>1,at=f[Ve];at!==null&&!pu(at)&&(D?at<=b:at<b)?oe=Ve+1:Se=Ve}return Se}return Wp(f,b,Vl,D)}function Wp(f,b,D,oe){var Se=0,Ve=f==null?0:f.length;if(Ve===0)return 0;b=D(b);for(var at=b!==b,vt=b===null,At=pu(b),dn=b===n;Se<Ve;){var fn=Ws((Se+Ve)/2),_n=D(f[fn]),Hn=_n!==n,hr=_n===null,kr=_n===_n,ci=pu(_n);if(at)var Ar=oe||kr;else dn?Ar=kr&&(oe||Hn):vt?Ar=kr&&Hn&&(oe||!hr):At?Ar=kr&&Hn&&!hr&&(oe||!ci):hr||ci?Ar=!1:Ar=oe?_n<=b:_n<b;Ar?Se=fn+1:Ve=fn}return Pe(Ve,Z)}function Gp(f,b){for(var D=-1,oe=f.length,Se=0,Ve=[];++D<oe;){var at=f[D],vt=b?b(at):at;if(!D||!ac(vt,At)){var At=vt;Ve[Se++]=at===0?0:at}}return Ve}function Gm(f){return typeof f=="number"?f:pu(f)?Le:+f}function Ja(f){if(typeof f=="string")return f;if(ti(f))return Li(f,Ja)+"";if(pu(f))return so?so.call(f):"";var b=f+"";return b=="0"&&1/f==-1/0?"-0":b}function Oc(f,b,D){var oe=-1,Se=Nl,Ve=f.length,at=!0,vt=[],At=vt;if(D)at=!1,Se=Il;else if(Ve>=i){var dn=b?null:qM(f);if(dn)return wo(dn);at=!1,Se=Bl,At=new Y}else At=b?[]:vt;e:for(;++oe<Ve;){var fn=f[oe],_n=b?b(fn):fn;if(fn=D||fn!==0?fn:0,at&&_n===_n){for(var Hn=At.length;Hn--;)if(At[Hn]===_n)continue e;b&&At.push(_n),vt.push(fn)}else Se(At,_n,D)||(At!==vt&&At.push(_n),vt.push(fn))}return vt}function lh(f,b){return b=oc(b,f),f=Vw(f,b),f==null||delete f[Ic(Iu(b))]}function jf(f,b,D,oe){return ah(f,b,D(fr(f,b)),oe)}function uh(f,b,D,oe){for(var Se=f.length,Ve=oe?Se:-1;(oe?Ve--:++Ve<Se)&&b(f[Ve],Ve,f););return D?Fl(f,oe?0:Ve,oe?Ve+1:Se):Fl(f,oe?Ve+1:0,oe?Se:Ve)}function Du(f,b){var D=f;return D instanceof Hr&&(D=D.value()),Ha(b,function(oe,Se){return Se.func.apply(Se.thisArg,Ko([oe],Se.args))},D)}function Ou(f,b,D){var oe=f.length;if(oe<2)return oe?Oc(f[0]):[];for(var Se=-1,Ve=Nt(oe);++Se<oe;)for(var at=f[Se],vt=-1;++vt<oe;)vt!=Se&&(Ve[Se]=k(Ve[Se]||at,f[vt],b,D));return Oc(We(Ve,1),b,D)}function sc(f,b,D){for(var oe=-1,Se=f.length,Ve=b.length,at={};++oe<Se;){var vt=oe<Ve?b[oe]:n;D(at,f[oe],vt)}return at}function qh(f){return zo(f)?f:[]}function jd(f){return typeof f=="function"?f:Vl}function oc(f,b){return ti(f)?f:u1(f,b)?[f]:Gw(os(f))}var e1=li;function Nu(f,b,D){var oe=f.length;return D=D===n?oe:D,!b&&D>=oe?f:Fl(f,b,D)}var zf=ya||function(f){return vs.clearTimeout(f)};function bw(f,b){if(b)return f.slice();var D=f.length,oe=ec?ec(D):new f.constructor(D);return f.copy(oe),oe}function t1(f){var b=new f.constructor(f.byteLength);return new sa(b).set(new sa(f)),b}function FM(f,b){var D=b?t1(f.buffer):f.buffer;return new f.constructor(D,f.byteOffset,f.byteLength)}function jM(f){var b=new f.constructor(f.source,xr.exec(f));return b.lastIndex=f.lastIndex,b}function zM(f){return vi?Ci(vi.call(f)):{}}function _w(f,b){var D=b?t1(f.buffer):f.buffer;return new f.constructor(D,f.byteOffset,f.length)}function ww(f,b){if(f!==b){var D=f!==n,oe=f===null,Se=f===f,Ve=pu(f),at=b!==n,vt=b===null,At=b===b,dn=pu(b);if(!vt&&!dn&&!Ve&&f>b||Ve&&at&&At&&!vt&&!dn||oe&&at&&At||!D&&At||!Se)return 1;if(!oe&&!Ve&&!dn&&f<b||dn&&D&&Se&&!oe&&!Ve||vt&&D&&Se||!at&&Se||!At)return-1}return 0}function $M(f,b,D){for(var oe=-1,Se=f.criteria,Ve=b.criteria,at=Se.length,vt=D.length;++oe<at;){var At=ww(Se[oe],Ve[oe]);if(At){if(oe>=vt)return At;var dn=D[oe];return At*(dn=="desc"?-1:1)}}return f.index-b.index}function xw(f,b,D,oe){for(var Se=-1,Ve=f.length,at=D.length,vt=-1,At=b.length,dn=le(Ve-at,0),fn=Nt(At+dn),_n=!oe;++vt<At;)fn[vt]=b[vt];for(;++Se<at;)(_n||Se<Ve)&&(fn[D[Se]]=f[Se]);for(;dn--;)fn[vt++]=f[Se++];return fn}function Lw(f,b,D,oe){for(var Se=-1,Ve=f.length,at=-1,vt=D.length,At=-1,dn=b.length,fn=le(Ve-vt,0),_n=Nt(fn+dn),Hn=!oe;++Se<fn;)_n[Se]=f[Se];for(var hr=Se;++At<dn;)_n[hr+At]=b[At];for(;++at<vt;)(Hn||Se<Ve)&&(_n[hr+D[at]]=f[Se++]);return _n}function jl(f,b){var D=-1,oe=f.length;for(b||(b=Nt(oe));++D<oe;)b[D]=f[D];return b}function Nc(f,b,D,oe){var Se=!D;D||(D={});for(var Ve=-1,at=b.length;++Ve<at;){var vt=b[Ve],At=oe?oe(D[vt],f[vt],vt,D,f):n;At===n&&(At=f[vt]),Se?Bn(D,vt,At):gt(D,vt,At)}return D}function VM(f,b){return Nc(f,l1(f),b)}function UM(f,b){return Nc(f,Bw(f),b)}function qm(f,b){return function(D,oe){var Se=ti(D)?kc:on,Ve=b?b():{};return Se(D,f,Mr(oe,2),Ve)}}function $f(f){return li(function(b,D){var oe=-1,Se=D.length,Ve=Se>1?D[Se-1]:n,at=Se>2?D[2]:n;for(Ve=f.length>3&&typeof Ve=="function"?(Se--,Ve):n,at&&_l(D[0],D[1],at)&&(Ve=Se<3?n:Ve,Se=1),b=Ci(b);++oe<Se;){var vt=D[oe];vt&&f(b,vt,oe,Ve)}return b})}function Sw(f,b){return function(D,oe){if(D==null)return D;if(!zl(D))return f(D,oe);for(var Se=D.length,Ve=b?Se:-1,at=Ci(D);(b?Ve--:++Ve<Se)&&oe(at[Ve],Ve,at)!==!1;);return D}}function Cw(f){return function(b,D,oe){for(var Se=-1,Ve=Ci(b),at=oe(b),vt=at.length;vt--;){var At=at[f?vt:++Se];if(D(Ve[At],At,Ve)===!1)break}return b}}function HM(f,b,D){var oe=b&M,Se=qp(f);function Ve(){var at=this&&this!==vs&&this instanceof Ve?Se:f;return at.apply(oe?D:this,arguments)}return Ve}function Ew(f){return function(b){b=os(b);var D=ka(b)?to(b):n,oe=D?D[0]:b.charAt(0),Se=D?Nu(D,1).join(""):b.slice(1);return oe[f]()+Se}}function Vf(f){return function(b){return Ha(Sx(Lx(b).replace(Xr,"")),f,"")}}function qp(f){return function(){var b=arguments;switch(b.length){case 0:return new f;case 1:return new f(b[0]);case 2:return new f(b[0],b[1]);case 3:return new f(b[0],b[1],b[2]);case 4:return new f(b[0],b[1],b[2],b[3]);case 5:return new f(b[0],b[1],b[2],b[3],b[4]);case 6:return new f(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new f(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var D=Fo(f.prototype),oe=f.apply(D,b);return ao(oe)?oe:D}}function WM(f,b,D){var oe=qp(f);function Se(){for(var Ve=arguments.length,at=Nt(Ve),vt=Ve,At=Uf(Se);vt--;)at[vt]=arguments[vt];var dn=Ve<3&&at[0]!==At&&at[Ve-1]!==At?[]:_o(at,At);if(Ve-=dn.length,Ve<D)return Tw(f,b,Ym,Se.placeholder,n,at,dn,n,n,D-Ve);var fn=this&&this!==vs&&this instanceof Se?oe:f;return xi(fn,this,at)}return Se}function Pw(f){return function(b,D,oe){var Se=Ci(b);if(!zl(b)){var Ve=Mr(D,3);b=wa(b),D=function(vt){return Ve(Se[vt],vt,Se)}}var at=f(b,D,oe);return at>-1?Se[Ve?b[at]:at]:n}}function Mw(f){return hh(function(b){var D=b.length,oe=D,Se=qs.prototype.thru;for(f&&b.reverse();oe--;){var Ve=b[oe];if(typeof Ve!="function")throw new es(o);if(Se&&!at&&Jm(Ve)=="wrapper")var at=new qs([],!0)}for(oe=at?oe:D;++oe<D;){Ve=b[oe];var vt=Jm(Ve),At=vt=="wrapper"?o1(Ve):n;At&&c1(At[0])&&At[1]==(pe|z|ne|N)&&!At[4].length&&At[9]==1?at=at[Jm(At[0])].apply(at,At[3]):at=Ve.length==1&&c1(Ve)?at[vt]():at.thru(Ve)}return function(){var dn=arguments,fn=dn[0];if(at&&dn.length==1&&ti(fn))return at.plant(fn).value();for(var _n=0,Hn=D?b[_n].apply(this,dn):fn;++_n<D;)Hn=b[_n].call(this,Hn);return Hn}})}function Ym(f,b,D,oe,Se,Ve,at,vt,At,dn){var fn=b&pe,_n=b&M,Hn=b&A,hr=b&(z|K),kr=b&j,ci=Hn?n:qp(f);function Ar(){for(var Pi=arguments.length,Fi=Nt(Pi),gu=Pi;gu--;)Fi[gu]=arguments[gu];if(hr)var wl=Uf(Ar),mu=Ma(Fi,wl);if(oe&&(Fi=xw(Fi,oe,Se,hr)),Ve&&(Fi=Lw(Fi,Ve,at,hr)),Pi-=mu,hr&&Pi<dn){var $o=_o(Fi,wl);return Tw(f,b,Ym,Ar.placeholder,D,Fi,$o,vt,At,dn-Pi)}var lc=_n?D:this,gh=Hn?lc[f]:f;return Pi=Fi.length,vt?Fi=hk(Fi,vt):kr&&Pi>1&&Fi.reverse(),fn&&At<Pi&&(Fi.length=At),this&&this!==vs&&this instanceof Ar&&(gh=ci||qp(gh)),gh.apply(lc,Fi)}return Ar}function kw(f,b){return function(D,oe){return ke(D,f,b(oe),{})}}function Km(f,b){return function(D,oe){var Se;if(D===n&&oe===n)return b;if(D!==n&&(Se=D),oe!==n){if(Se===n)return oe;typeof D=="string"||typeof oe=="string"?(D=Ja(D),oe=Ja(oe)):(D=Gm(D),oe=Gm(oe)),Se=f(D,oe)}return Se}}function n1(f){return hh(function(b){return b=Li(b,Ur(Mr())),li(function(D){var oe=this;return f(b,function(Se){return xi(Se,oe,D)})})})}function Zm(f,b){b=b===n?" ":Ja(b);var D=b.length;if(D<2)return D?Rf(b,f):b;var oe=Rf(b,Hs(f/eo(b)));return ka(b)?Nu(to(oe),0,f).join(""):oe.slice(0,f)}function GM(f,b,D,oe){var Se=b&M,Ve=qp(f);function at(){for(var vt=-1,At=arguments.length,dn=-1,fn=oe.length,_n=Nt(fn+At),Hn=this&&this!==vs&&this instanceof at?Ve:f;++dn<fn;)_n[dn]=oe[dn];for(;At--;)_n[dn++]=arguments[++vt];return xi(Hn,Se?D:this,_n)}return at}function Aw(f){return function(b,D,oe){return oe&&typeof oe!="number"&&_l(b,D,oe)&&(D=oe=n),b=ph(b),D===n?(D=b,b=0):D=ph(D),oe=oe===n?b<D?1:-1:ph(oe),Fd(b,D,oe,f)}}function Xm(f){return function(b,D){return typeof b=="string"&&typeof D=="string"||(b=Bu(b),D=Bu(D)),f(b,D)}}function Tw(f,b,D,oe,Se,Ve,at,vt,At,dn){var fn=b&z,_n=fn?at:n,Hn=fn?n:at,hr=fn?Ve:n,kr=fn?n:Ve;b|=fn?ne:me,b&=~(fn?me:ne),b&O||(b&=-4);var ci=[f,b,Se,hr,_n,kr,Hn,vt,At,dn],Ar=D.apply(n,ci);return c1(f)&&Uw(Ar,ci),Ar.placeholder=oe,Hw(Ar,f,b)}function r1(f){var b=Qi[f];return function(D,oe){if(D=Bu(D),oe=oe==null?0:Pe(ui(oe),292),oe&&y(D)){var Se=(os(D)+"e").split("e"),Ve=b(Se[0]+"e"+(+Se[1]+oe));return Se=(os(Ve)+"e").split("e"),+(Se[0]+"e"+(+Se[1]-oe))}return b(D)}}var qM=ks&&1/wo(new ks([,-0]))[1]==re?function(f){return new ks(f)}:C1;function Dw(f){return function(b){var D=Qa(b);return D==Q?Rl(b):D==Ye?Ac(b):Es(b,f(b))}}function ch(f,b,D,oe,Se,Ve,at,vt){var At=b&A;if(!At&&typeof f!="function")throw new es(o);var dn=oe?oe.length:0;if(dn||(b&=-97,oe=Se=n),at=at===n?at:le(ui(at),0),vt=vt===n?vt:ui(vt),dn-=Se?Se.length:0,b&me){var fn=oe,_n=Se;oe=Se=n}var Hn=At?n:o1(f),hr=[f,b,D,oe,Se,fn,_n,Ve,at,vt];if(Hn&&lk(hr,Hn),f=hr[0],b=hr[1],D=hr[2],oe=hr[3],Se=hr[4],vt=hr[9]=hr[9]===n?At?0:f.length:le(hr[9]-dn,0),!vt&&b&(z|K)&&(b&=-25),!b||b==M)var kr=HM(f,b,D);else b==z||b==K?kr=WM(f,b,vt):(b==ne||b==(M|ne))&&!Se.length?kr=GM(f,b,D,oe):kr=Ym.apply(n,hr);var ci=Hn?rc:Uw;return Hw(ci(kr,hr),f,b)}function Ow(f,b,D,oe){return f===n||ac(f,Da[D])&&!Qr.call(oe,D)?b:f}function Nw(f,b,D,oe,Se,Ve){return ao(f)&&ao(b)&&(Ve.set(b,f),Ra(f,b,n,Nw,Ve),Ve.delete(b)),f}function YM(f){return Zp(f)?n:f}function Iw(f,b,D,oe,Se,Ve){var at=D&x,vt=f.length,At=b.length;if(vt!=At&&!(at&&At>vt))return!1;var dn=Ve.get(f),fn=Ve.get(b);if(dn&&fn)return dn==b&&fn==f;var _n=-1,Hn=!0,hr=D&E?new Y:n;for(Ve.set(f,b),Ve.set(b,f);++_n<vt;){var kr=f[_n],ci=b[_n];if(oe)var Ar=at?oe(ci,kr,_n,b,f,Ve):oe(kr,ci,_n,f,b,Ve);if(Ar!==n){if(Ar)continue;Hn=!1;break}if(hr){if(!F(b,function(Pi,Fi){if(!Bl(hr,Fi)&&(kr===Pi||Se(kr,Pi,D,oe,Ve)))return hr.push(Fi)})){Hn=!1;break}}else if(!(kr===ci||Se(kr,ci,D,oe,Ve))){Hn=!1;break}}return Ve.delete(f),Ve.delete(b),Hn}function KM(f,b,D,oe,Se,Ve,at){switch(D){case bn:if(f.byteLength!=b.byteLength||f.byteOffset!=b.byteOffset)return!1;f=f.buffer,b=b.buffer;case sn:return!(f.byteLength!=b.byteLength||!Ve(new sa(f),new sa(b)));case ee:case X:case ie:return ac(+f,+b);case Te:return f.name==b.name&&f.message==b.message;case Ie:case Je:return f==b+"";case Q:var vt=Rl;case Ye:var At=oe&x;if(vt||(vt=wo),f.size!=b.size&&!At)return!1;var dn=at.get(f);if(dn)return dn==b;oe|=E,at.set(f,b);var fn=Iw(vt(f),vt(b),oe,Se,Ve,at);return at.delete(f),fn;case Ge:if(vi)return vi.call(f)==vi.call(b)}return!1}function ZM(f,b,D,oe,Se,Ve){var at=D&x,vt=i1(f),At=vt.length,dn=i1(b),fn=dn.length;if(At!=fn&&!at)return!1;for(var _n=At;_n--;){var Hn=vt[_n];if(!(at?Hn in b:Qr.call(b,Hn)))return!1}var hr=Ve.get(f),kr=Ve.get(b);if(hr&&kr)return hr==b&&kr==f;var ci=!0;Ve.set(f,b),Ve.set(b,f);for(var Ar=at;++_n<At;){Hn=vt[_n];var Pi=f[Hn],Fi=b[Hn];if(oe)var gu=at?oe(Fi,Pi,Hn,b,f,Ve):oe(Pi,Fi,Hn,f,b,Ve);if(!(gu===n?Pi===Fi||Se(Pi,Fi,D,oe,Ve):gu)){ci=!1;break}Ar||(Ar=Hn=="constructor")}if(ci&&!Ar){var wl=f.constructor,mu=b.constructor;wl!=mu&&"constructor"in f&&"constructor"in b&&!(typeof wl=="function"&&wl instanceof wl&&typeof mu=="function"&&mu instanceof mu)&&(ci=!1)}return Ve.delete(f),Ve.delete(b),ci}function hh(f){return d1($w(f,n,Zw),f+"")}function i1(f){return tt(f,wa,l1)}function s1(f){return tt(f,$l,Bw)}var o1=ts?function(f){return ts.get(f)}:C1;function Jm(f){for(var b=f.name+"",D=Ro[b],oe=Qr.call(Ro,b)?D.length:0;oe--;){var Se=D[oe],Ve=Se.func;if(Ve==null||Ve==f)return Se.name}return b}function Uf(f){var b=Qr.call(Be,"placeholder")?Be:f;return b.placeholder}function Mr(){var f=Be.iteratee||L1;return f=f===L1?rr:f,arguments.length?f(arguments[0],arguments[1]):f}function Qm(f,b){var D=f.__data__;return ik(b)?D[typeof b=="string"?"string":"hash"]:D.map}function a1(f){for(var b=wa(f),D=b.length;D--;){var oe=b[D],Se=f[oe];b[D]=[oe,Se,jw(Se)]}return b}function zd(f,b){var D=Ps(f,b);return kt(D)?D:n}function XM(f){var b=Qr.call(f,Ka),D=f[Ka];try{f[Ka]=n;var oe=!0}catch{}var Se=Ei.call(f);return oe&&(b?f[Ka]=D:delete f[Ka]),Se}var l1=ba?function(f){return f==null?[]:(f=Ci(f),ma(ba(f),function(b){return Vi.call(f,b)}))}:E1,Bw=ba?function(f){for(var b=[];f;)Ko(b,l1(f)),f=Ia(f);return b}:E1,Qa=st;(Fn&&Qa(new Fn(new ArrayBuffer(1)))!=bn||tr&&Qa(new tr)!=Q||jr&&Qa(jr.resolve())!=de||ks&&Qa(new ks)!=Ye||ls&&Qa(new ls)!=Ct)&&(Qa=function(f){var b=st(f),D=b==Ce?f.constructor:n,oe=D?$d(D):"";if(oe)switch(oe){case sh:return bn;case Ba:return Q;case _a:return de;case oa:return Ye;case Od:return Ct}return b});function JM(f,b,D){for(var oe=-1,Se=D.length;++oe<Se;){var Ve=D[oe],at=Ve.size;switch(Ve.type){case"drop":f+=at;break;case"dropRight":b-=at;break;case"take":b=Pe(b,f+at);break;case"takeRight":f=le(f,b-at);break}}return{start:f,end:b}}function QM(f){var b=f.match(Lr);return b?b[1].split(Ot):[]}function Rw(f,b,D){b=oc(b,f);for(var oe=-1,Se=b.length,Ve=!1;++oe<Se;){var at=Ic(b[oe]);if(!(Ve=f!=null&&D(f,at)))break;f=f[at]}return Ve||++oe!=Se?Ve:(Se=f==null?0:f.length,!!Se&&o0(Se)&&dh(at,Se)&&(ti(f)||Vd(f)))}function ek(f){var b=f.length,D=new f.constructor(b);return b&&typeof f[0]=="string"&&Qr.call(f,"index")&&(D.index=f.index,D.input=f.input),D}function Fw(f){return typeof f.constructor=="function"&&!Yp(f)?Fo(Ia(f)):{}}function tk(f,b,D){var oe=f.constructor;switch(b){case sn:return t1(f);case ee:case X:return new oe(+f);case bn:return FM(f,D);case Qe:case ot:case it:case Vt:case Qt:case kn:case Ln:case Mn:case Zn:return _w(f,D);case Q:return new oe;case ie:case Je:return new oe(f);case Ie:return jM(f);case Ye:return new oe;case Ge:return zM(f)}}function nk(f,b){var D=b.length;if(!D)return f;var oe=D-1;return b[oe]=(D>1?"& ":"")+b[oe],b=b.join(D>2?", ":" "),f.replace(Ut,`{
/* [wrapped with `+b+`] */
`)}function rk(f){return ti(f)||Vd(f)||!!(Bo&&f&&f[Bo])}function dh(f,b){var D=typeof f;return b=b??J,!!b&&(D=="number"||D!="symbol"&&zr.test(f))&&f>-1&&f%1==0&&f<b}function _l(f,b,D){if(!ao(D))return!1;var oe=typeof b;return(oe=="number"?zl(D)&&dh(b,D.length):oe=="string"&&b in D)?ac(D[b],f):!1}function u1(f,b){if(ti(f))return!1;var D=typeof f;return D=="number"||D=="symbol"||D=="boolean"||f==null||pu(f)?!0:Yn.test(f)||!Tn.test(f)||b!=null&&f in Ci(b)}function ik(f){var b=typeof f;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?f!=="__proto__":f===null}function c1(f){var b=Jm(f),D=Be[b];if(typeof D!="function"||!(b in Hr.prototype))return!1;if(f===D)return!0;var oe=o1(D);return!!oe&&f===oe[0]}function sk(f){return!!Us&&Us in f}var ok=Oa?fh:P1;function Yp(f){var b=f&&f.constructor,D=typeof b=="function"&&b.prototype||Da;return f===D}function jw(f){return f===f&&!ao(f)}function zw(f,b){return function(D){return D==null?!1:D[f]===b&&(b!==n||f in Ci(D))}}function ak(f){var b=i0(f,function(oe){return D.size===c&&D.clear(),oe}),D=b.cache;return b}function lk(f,b){var D=f[1],oe=b[1],Se=D|oe,Ve=Se<(M|A|pe),at=oe==pe&&D==z||oe==pe&&D==N&&f[7].length<=b[8]||oe==(pe|N)&&b[7].length<=b[8]&&D==z;if(!(Ve||at))return f;oe&M&&(f[2]=b[2],Se|=D&M?0:O);var vt=b[3];if(vt){var At=f[3];f[3]=At?xw(At,vt,b[4]):vt,f[4]=At?_o(f[3],d):b[4]}return vt=b[5],vt&&(At=f[5],f[5]=At?Lw(At,vt,b[6]):vt,f[6]=At?_o(f[5],d):b[6]),vt=b[7],vt&&(f[7]=vt),oe&pe&&(f[8]=f[8]==null?b[8]:Pe(f[8],b[8])),f[9]==null&&(f[9]=b[9]),f[0]=b[0],f[1]=Se,f}function uk(f){var b=[];if(f!=null)for(var D in Ci(f))b.push(D);return b}function ck(f){return Ei.call(f)}function $w(f,b,D){return b=le(b===n?f.length-1:b,0),function(){for(var oe=arguments,Se=-1,Ve=le(oe.length-b,0),at=Nt(Ve);++Se<Ve;)at[Se]=oe[b+Se];Se=-1;for(var vt=Nt(b+1);++Se<b;)vt[Se]=oe[Se];return vt[b]=D(at),xi(f,this,vt)}}function Vw(f,b){return b.length<2?f:fr(f,Fl(b,0,-1))}function hk(f,b){for(var D=f.length,oe=Pe(b.length,D),Se=jl(f);oe--;){var Ve=b[oe];f[oe]=dh(Ve,D)?Se[Ve]:n}return f}function h1(f,b){if(!(b==="constructor"&&typeof f[b]=="function")&&b!="__proto__")return f[b]}var Uw=Ww(rc),Kp=ih||function(f,b){return vs.setTimeout(f,b)},d1=Ww(Um);function Hw(f,b,D){var oe=b+"";return d1(f,nk(oe,dk(QM(oe),D)))}function Ww(f){var b=0,D=0;return function(){var oe=lt(),Se=$-(oe-D);if(D=oe,Se>0){if(++b>=B)return arguments[0]}else b=0;return f.apply(n,arguments)}}function e0(f,b){var D=-1,oe=f.length,Se=oe-1;for(b=b===n?oe:b;++D<b;){var Ve=Rd(D,Se),at=f[Ve];f[Ve]=f[D],f[D]=at}return f.length=b,f}var Gw=ak(function(f){var b=[];return f.charCodeAt(0)===46&&b.push(""),f.replace(Jt,function(D,oe,Se,Ve){b.push(Se?Ve.replace(Mi,"$1"):oe||D)}),b});function Ic(f){if(typeof f=="string"||pu(f))return f;var b=f+"";return b=="0"&&1/f==-1/0?"-0":b}function $d(f){if(f!=null){try{return Na.call(f)}catch{}try{return f+""}catch{}}return""}function dk(f,b){return $s(se,function(D){var oe="_."+D[0];b&D[1]&&!Nl(f,oe)&&f.push(oe)}),f.sort()}function qw(f){if(f instanceof Hr)return f.clone();var b=new qs(f.__wrapped__,f.__chain__);return b.__actions__=jl(f.__actions__),b.__index__=f.__index__,b.__values__=f.__values__,b}function fk(f,b,D){(D?_l(f,b,D):b===n)?b=1:b=le(ui(b),0);var oe=f==null?0:f.length;if(!oe||b<1)return[];for(var Se=0,Ve=0,at=Nt(Hs(oe/b));Se<oe;)at[Ve++]=Fl(f,Se,Se+=b);return at}function pk(f){for(var b=-1,D=f==null?0:f.length,oe=0,Se=[];++b<D;){var Ve=f[b];Ve&&(Se[oe++]=Ve)}return Se}function gk(){var f=arguments.length;if(!f)return[];for(var b=Nt(f-1),D=arguments[0],oe=f;oe--;)b[oe-1]=arguments[oe];return Ko(ti(D)?jl(D):[D],We(b,1))}var mk=li(function(f,b){return zo(f)?k(f,We(b,1,zo,!0)):[]}),vk=li(function(f,b){var D=Iu(b);return zo(D)&&(D=n),zo(f)?k(f,We(b,1,zo,!0),Mr(D,2)):[]}),yk=li(function(f,b){var D=Iu(b);return zo(D)&&(D=n),zo(f)?k(f,We(b,1,zo,!0),n,D):[]});function bk(f,b,D){var oe=f==null?0:f.length;return oe?(b=D||b===n?1:ui(b),Fl(f,b<0?0:b,oe)):[]}function _k(f,b,D){var oe=f==null?0:f.length;return oe?(b=D||b===n?1:ui(b),b=oe-b,Fl(f,0,b<0?0:b)):[]}function wk(f,b){return f&&f.length?uh(f,Mr(b,3),!0,!0):[]}function xk(f,b){return f&&f.length?uh(f,Mr(b,3),!0):[]}function Lk(f,b,D,oe){var Se=f==null?0:f.length;return Se?(D&&typeof D!="number"&&_l(f,b,D)&&(D=0,oe=Se),Ee(f,b,D,oe)):[]}function Yw(f,b,D){var oe=f==null?0:f.length;if(!oe)return-1;var Se=D==null?0:ui(D);return Se<0&&(Se=le(oe+Se,0)),Gt(f,Mr(b,3),Se)}function Kw(f,b,D){var oe=f==null?0:f.length;if(!oe)return-1;var Se=oe-1;return D!==n&&(Se=ui(D),Se=D<0?le(oe+Se,0):Pe(Se,oe-1)),Gt(f,Mr(b,3),Se,!0)}function Zw(f){var b=f==null?0:f.length;return b?We(f,1):[]}function Sk(f){var b=f==null?0:f.length;return b?We(f,re):[]}function Ck(f,b){var D=f==null?0:f.length;return D?(b=b===n?1:ui(b),We(f,b)):[]}function Ek(f){for(var b=-1,D=f==null?0:f.length,oe={};++b<D;){var Se=f[b];oe[Se[0]]=Se[1]}return oe}function Xw(f){return f&&f.length?f[0]:n}function Pk(f,b,D){var oe=f==null?0:f.length;if(!oe)return-1;var Se=D==null?0:ui(D);return Se<0&&(Se=le(oe+Se,0)),pn(f,b,Se)}function Mk(f){var b=f==null?0:f.length;return b?Fl(f,0,-1):[]}var kk=li(function(f){var b=Li(f,qh);return b.length&&b[0]===f[0]?be(b):[]}),Ak=li(function(f){var b=Iu(f),D=Li(f,qh);return b===Iu(D)?b=n:D.pop(),D.length&&D[0]===f[0]?be(D,Mr(b,2)):[]}),Tk=li(function(f){var b=Iu(f),D=Li(f,qh);return b=typeof b=="function"?b:n,b&&D.pop(),D.length&&D[0]===f[0]?be(D,n,b):[]});function Dk(f,b){return f==null?"":P.call(f,b)}function Iu(f){var b=f==null?0:f.length;return b?f[b-1]:n}function Ok(f,b,D){var oe=f==null?0:f.length;if(!oe)return-1;var Se=oe;return D!==n&&(Se=ui(D),Se=Se<0?le(oe+Se,0):Pe(Se,oe-1)),b===b?Wa(f,b,Se):Gt(f,Vn,Se,!0)}function Nk(f,b){return f&&f.length?bl(f,ui(b)):n}var Ik=li(Jw);function Jw(f,b){return f&&f.length&&b&&b.length?Bf(f,b):f}function Bk(f,b,D){return f&&f.length&&b&&b.length?Bf(f,b,Mr(D,2)):f}function Rk(f,b,D){return f&&f.length&&b&&b.length?Bf(f,b,n,D):f}var Fk=hh(function(f,b){var D=f==null?0:f.length,oe=An(f,b);return Bd(f,Li(b,function(Se){return dh(Se,D)?+Se:Se}).sort(ww)),oe});function jk(f,b){var D=[];if(!(f&&f.length))return D;var oe=-1,Se=[],Ve=f.length;for(b=Mr(b,3);++oe<Ve;){var at=f[oe];b(at,oe,f)&&(D.push(at),Se.push(oe))}return Bd(f,Se),D}function f1(f){return f==null?f:hn.call(f)}function zk(f,b,D){var oe=f==null?0:f.length;return oe?(D&&typeof D!="number"&&_l(f,b,D)?(b=0,D=oe):(b=b==null?0:ui(b),D=D===n?oe:ui(D)),Fl(f,b,D)):[]}function $k(f,b){return ic(f,b)}function Vk(f,b,D){return Wp(f,b,Mr(D,2))}function Uk(f,b){var D=f==null?0:f.length;if(D){var oe=ic(f,b);if(oe<D&&ac(f[oe],b))return oe}return-1}function Hk(f,b){return ic(f,b,!0)}function Wk(f,b,D){return Wp(f,b,Mr(D,2),!0)}function Gk(f,b){var D=f==null?0:f.length;if(D){var oe=ic(f,b,!0)-1;if(ac(f[oe],b))return oe}return-1}function qk(f){return f&&f.length?Gp(f):[]}function Yk(f,b){return f&&f.length?Gp(f,Mr(b,2)):[]}function Kk(f){var b=f==null?0:f.length;return b?Fl(f,1,b):[]}function Zk(f,b,D){return f&&f.length?(b=D||b===n?1:ui(b),Fl(f,0,b<0?0:b)):[]}function Xk(f,b,D){var oe=f==null?0:f.length;return oe?(b=D||b===n?1:ui(b),b=oe-b,Fl(f,b<0?0:b,oe)):[]}function Jk(f,b){return f&&f.length?uh(f,Mr(b,3),!1,!0):[]}function Qk(f,b){return f&&f.length?uh(f,Mr(b,3)):[]}var eA=li(function(f){return Oc(We(f,1,zo,!0))}),tA=li(function(f){var b=Iu(f);return zo(b)&&(b=n),Oc(We(f,1,zo,!0),Mr(b,2))}),nA=li(function(f){var b=Iu(f);return b=typeof b=="function"?b:n,Oc(We(f,1,zo,!0),n,b)});function rA(f){return f&&f.length?Oc(f):[]}function iA(f,b){return f&&f.length?Oc(f,Mr(b,2)):[]}function sA(f,b){return b=typeof b=="function"?b:n,f&&f.length?Oc(f,n,b):[]}function p1(f){if(!(f&&f.length))return[];var b=0;return f=ma(f,function(D){if(zo(D))return b=le(D.length,b),!0}),_s(b,function(D){return Li(f,wr(D))})}function Qw(f,b){if(!(f&&f.length))return[];var D=p1(f);return b==null?D:Li(D,function(oe){return xi(b,n,oe)})}var oA=li(function(f,b){return zo(f)?k(f,b):[]}),aA=li(function(f){return Ou(ma(f,zo))}),lA=li(function(f){var b=Iu(f);return zo(b)&&(b=n),Ou(ma(f,zo),Mr(b,2))}),uA=li(function(f){var b=Iu(f);return b=typeof b=="function"?b:n,Ou(ma(f,zo),n,b)}),cA=li(p1);function hA(f,b){return sc(f||[],b||[],gt)}function dA(f,b){return sc(f||[],b||[],ah)}var fA=li(function(f){var b=f.length,D=b>1?f[b-1]:n;return D=typeof D=="function"?(f.pop(),D):n,Qw(f,D)});function ex(f){var b=Be(f);return b.__chain__=!0,b}function pA(f,b){return b(f),f}function t0(f,b){return b(f)}var gA=hh(function(f){var b=f.length,D=b?f[0]:0,oe=this.__wrapped__,Se=function(Ve){return An(Ve,f)};return b>1||this.__actions__.length||!(oe instanceof Hr)||!dh(D)?this.thru(Se):(oe=oe.slice(D,+D+(b?1:0)),oe.__actions__.push({func:t0,args:[Se],thisArg:n}),new qs(oe,this.__chain__).thru(function(Ve){return b&&!Ve.length&&Ve.push(n),Ve}))});function mA(){return ex(this)}function vA(){return new qs(this.value(),this.__chain__)}function yA(){this.__values__===n&&(this.__values__=px(this.value()));var f=this.__index__>=this.__values__.length,b=f?n:this.__values__[this.__index__++];return{done:f,value:b}}function bA(){return this}function _A(f){for(var b,D=this;D instanceof tc;){var oe=qw(D);oe.__index__=0,oe.__values__=n,b?Se.__wrapped__=oe:b=oe;var Se=oe;D=D.__wrapped__}return Se.__wrapped__=f,b}function wA(){var f=this.__wrapped__;if(f instanceof Hr){var b=f;return this.__actions__.length&&(b=new Hr(this)),b=b.reverse(),b.__actions__.push({func:t0,args:[f1],thisArg:n}),new qs(b,this.__chain__)}return this.thru(f1)}function xA(){return Du(this.__wrapped__,this.__actions__)}var LA=qm(function(f,b,D){Qr.call(f,D)?++f[D]:Bn(f,D,1)});function SA(f,b,D){var oe=ti(f)?hu:ae;return D&&_l(f,b,D)&&(b=n),oe(f,Mr(b,3))}function CA(f,b){var D=ti(f)?ma:nt;return D(f,Mr(b,3))}var EA=Pw(Yw),PA=Pw(Kw);function MA(f,b){return We(n0(f,b),1)}function kA(f,b){return We(n0(f,b),re)}function AA(f,b,D){return D=D===n?1:ui(D),We(n0(f,b),D)}function tx(f,b){var D=ti(f)?$s:H;return D(f,Mr(b,3))}function nx(f,b){var D=ti(f)?ga:te;return D(f,Mr(b,3))}var TA=qm(function(f,b,D){Qr.call(f,D)?f[D].push(b):Bn(f,D,[b])});function DA(f,b,D,oe){f=zl(f)?f:Wf(f),D=D&&!oe?ui(D):0;var Se=f.length;return D<0&&(D=le(Se+D,0)),a0(f)?D<=Se&&f.indexOf(b,D)>-1:!!Se&&pn(f,b,D)>-1}var OA=li(function(f,b,D){var oe=-1,Se=typeof b=="function",Ve=zl(f)?Nt(f.length):[];return H(f,function(at){Ve[++oe]=Se?xi(b,at,D):ze(at,b,D)}),Ve}),NA=qm(function(f,b,D){Bn(f,D,b)});function n0(f,b){var D=ti(f)?Li:qi;return D(f,Mr(b,3))}function IA(f,b,D,oe){return f==null?[]:(ti(b)||(b=b==null?[]:[b]),D=oe?n:D,ti(D)||(D=D==null?[]:[D]),Dc(f,b,D))}var BA=qm(function(f,b,D){f[D?0:1].push(b)},function(){return[[],[]]});function RA(f,b,D){var oe=ti(f)?Ha:Zi,Se=arguments.length<3;return oe(f,Mr(b,4),D,Se,H)}function FA(f,b,D){var oe=ti(f)?bs:Zi,Se=arguments.length<3;return oe(f,Mr(b,4),D,Se,te)}function jA(f,b){var D=ti(f)?ma:nt;return D(f,s0(Mr(b,3)))}function zA(f){var b=ti(f)?Ft:Ff;return b(f)}function $A(f,b,D){(D?_l(f,b,D):b===n)?b=1:b=ui(b);var oe=ti(f)?Et:Vm;return oe(f,b)}function VA(f){var b=ti(f)?Zt:Hm;return b(f)}function UA(f){if(f==null)return 0;if(zl(f))return a0(f)?eo(f):f.length;var b=Qa(f);return b==Q||b==Ye?f.size:yi(f).length}function HA(f,b,D){var oe=ti(f)?F:Wm;return D&&_l(f,b,D)&&(b=n),oe(f,Mr(b,3))}var WA=li(function(f,b){if(f==null)return[];var D=b.length;return D>1&&_l(f,b[0],b[1])?b=[]:D>2&&_l(b[0],b[1],b[2])&&(b=[b[0]]),Dc(f,We(b,1),[])}),r0=Lo||function(){return vs.Date.now()};function GA(f,b){if(typeof b!="function")throw new es(o);return f=ui(f),function(){if(--f<1)return b.apply(this,arguments)}}function rx(f,b,D){return b=D?n:b,b=f&&b==null?f.length:b,ch(f,pe,n,n,n,n,b)}function ix(f,b){var D;if(typeof b!="function")throw new es(o);return f=ui(f),function(){return--f>0&&(D=b.apply(this,arguments)),f<=1&&(b=n),D}}var g1=li(function(f,b,D){var oe=M;if(D.length){var Se=_o(D,Uf(g1));oe|=ne}return ch(f,oe,b,D,Se)}),sx=li(function(f,b,D){var oe=M|A;if(D.length){var Se=_o(D,Uf(sx));oe|=ne}return ch(b,oe,f,D,Se)});function ox(f,b,D){b=D?n:b;var oe=ch(f,z,n,n,n,n,n,b);return oe.placeholder=ox.placeholder,oe}function ax(f,b,D){b=D?n:b;var oe=ch(f,K,n,n,n,n,n,b);return oe.placeholder=ax.placeholder,oe}function lx(f,b,D){var oe,Se,Ve,at,vt,At,dn=0,fn=!1,_n=!1,Hn=!0;if(typeof f!="function")throw new es(o);b=Bu(b)||0,ao(D)&&(fn=!!D.leading,_n="maxWait"in D,Ve=_n?le(Bu(D.maxWait)||0,b):Ve,Hn="trailing"in D?!!D.trailing:Hn);function hr($o){var lc=oe,gh=Se;return oe=Se=n,dn=$o,at=f.apply(gh,lc),at}function kr($o){return dn=$o,vt=Kp(Pi,b),fn?hr($o):at}function ci($o){var lc=$o-At,gh=$o-dn,Px=b-lc;return _n?Pe(Px,Ve-gh):Px}function Ar($o){var lc=$o-At,gh=$o-dn;return At===n||lc>=b||lc<0||_n&&gh>=Ve}function Pi(){var $o=r0();if(Ar($o))return Fi($o);vt=Kp(Pi,ci($o))}function Fi($o){return vt=n,Hn&&oe?hr($o):(oe=Se=n,at)}function gu(){vt!==n&&zf(vt),dn=0,oe=At=Se=vt=n}function wl(){return vt===n?at:Fi(r0())}function mu(){var $o=r0(),lc=Ar($o);if(oe=arguments,Se=this,At=$o,lc){if(vt===n)return kr(At);if(_n)return zf(vt),vt=Kp(Pi,b),hr(At)}return vt===n&&(vt=Kp(Pi,b)),at}return mu.cancel=gu,mu.flush=wl,mu}var qA=li(function(f,b){return S(f,1,b)}),YA=li(function(f,b,D){return S(f,Bu(b)||0,D)});function KA(f){return ch(f,j)}function i0(f,b){if(typeof f!="function"||b!=null&&typeof b!="function")throw new es(o);var D=function(){var oe=arguments,Se=b?b.apply(this,oe):oe[0],Ve=D.cache;if(Ve.has(Se))return Ve.get(Se);var at=f.apply(this,oe);return D.cache=Ve.set(Se,at)||Ve,at};return D.cache=new(i0.Cache||Xa),D}i0.Cache=Xa;function s0(f){if(typeof f!="function")throw new es(o);return function(){var b=arguments;switch(b.length){case 0:return!f.call(this);case 1:return!f.call(this,b[0]);case 2:return!f.call(this,b[0],b[1]);case 3:return!f.call(this,b[0],b[1],b[2])}return!f.apply(this,b)}}function ZA(f){return ix(2,f)}var XA=e1(function(f,b){b=b.length==1&&ti(b[0])?Li(b[0],Ur(Mr())):Li(We(b,1),Ur(Mr()));var D=b.length;return li(function(oe){for(var Se=-1,Ve=Pe(oe.length,D);++Se<Ve;)oe[Se]=b[Se].call(this,oe[Se]);return xi(f,this,oe)})}),m1=li(function(f,b){var D=_o(b,Uf(m1));return ch(f,ne,n,b,D)}),ux=li(function(f,b){var D=_o(b,Uf(ux));return ch(f,me,n,b,D)}),JA=hh(function(f,b){return ch(f,N,n,n,n,b)});function QA(f,b){if(typeof f!="function")throw new es(o);return b=b===n?b:ui(b),li(f,b)}function e6(f,b){if(typeof f!="function")throw new es(o);return b=b==null?0:le(ui(b),0),li(function(D){var oe=D[b],Se=Nu(D,0,b);return oe&&Ko(Se,oe),xi(f,this,Se)})}function t6(f,b,D){var oe=!0,Se=!0;if(typeof f!="function")throw new es(o);return ao(D)&&(oe="leading"in D?!!D.leading:oe,Se="trailing"in D?!!D.trailing:Se),lx(f,b,{leading:oe,maxWait:b,trailing:Se})}function n6(f){return rx(f,1)}function r6(f,b){return m1(jd(b),f)}function i6(){if(!arguments.length)return[];var f=arguments[0];return ti(f)?f:[f]}function s6(f){return h(f,m)}function o6(f,b){return b=typeof b=="function"?b:n,h(f,m,b)}function a6(f){return h(f,p|m)}function l6(f,b){return b=typeof b=="function"?b:n,h(f,p|m,b)}function u6(f,b){return b==null||_(f,b,wa(b))}function ac(f,b){return f===b||f!==f&&b!==b}var c6=Xm(ft),h6=Xm(function(f,b){return f>=b}),Vd=je(function(){return arguments}())?je:function(f){return So(f)&&Qr.call(f,"callee")&&!Vi.call(f,"callee")},ti=Nt.isArray,d6=ku?Ur(ku):Ue;function zl(f){return f!=null&&o0(f.length)&&!fh(f)}function zo(f){return So(f)&&zl(f)}function f6(f){return f===!0||f===!1||So(f)&&st(f)==ee}var Yh=u||P1,p6=Pa?Ur(Pa):He;function g6(f){return So(f)&&f.nodeType===1&&!Zp(f)}function m6(f){if(f==null)return!0;if(zl(f)&&(ti(f)||typeof f=="string"||typeof f.splice=="function"||Yh(f)||Hf(f)||Vd(f)))return!f.length;var b=Qa(f);if(b==Q||b==Ye)return!f.size;if(Yp(f))return!yi(f).length;for(var D in f)if(Qr.call(f,D))return!1;return!0}function v6(f,b){return ct(f,b)}function y6(f,b,D){D=typeof D=="function"?D:n;var oe=D?D(f,b):n;return oe===n?ct(f,b,n,D):!!oe}function v1(f){if(!So(f))return!1;var b=st(f);return b==Te||b==De||typeof f.message=="string"&&typeof f.name=="string"&&!Zp(f)}function b6(f){return typeof f=="number"&&y(f)}function fh(f){if(!ao(f))return!1;var b=st(f);return b==qe||b==ge||b==ve||b==Xe}function cx(f){return typeof f=="number"&&f==ui(f)}function o0(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=J}function ao(f){var b=typeof f;return f!=null&&(b=="object"||b=="function")}function So(f){return f!=null&&typeof f=="object"}var hx=lu?Ur(lu):mt;function _6(f,b){return f===b||Mt(f,b,a1(b))}function w6(f,b,D){return D=typeof D=="function"?D:n,Mt(f,b,a1(b),D)}function x6(f){return dx(f)&&f!=+f}function L6(f){if(ok(f))throw new Jn(s);return kt(f)}function S6(f){return f===null}function C6(f){return f==null}function dx(f){return typeof f=="number"||So(f)&&st(f)==ie}function Zp(f){if(!So(f)||st(f)!=Ce)return!1;var b=Ia(f);if(b===null)return!0;var D=Qr.call(b,"constructor")&&b.constructor;return typeof D=="function"&&D instanceof D&&Na.call(D)==Bi}var y1=uu?Ur(uu):cn;function E6(f){return cx(f)&&f>=-9007199254740991&&f<=J}var fx=ia?Ur(ia):Un;function a0(f){return typeof f=="string"||!ti(f)&&So(f)&&st(f)==Je}function pu(f){return typeof f=="symbol"||So(f)&&st(f)==Ge}var Hf=cu?Ur(cu):qn;function P6(f){return f===n}function M6(f){return So(f)&&Qa(f)==Ct}function k6(f){return So(f)&&st(f)==Wt}var A6=Xm(ei),T6=Xm(function(f,b){return f<=b});function px(f){if(!f)return[];if(zl(f))return a0(f)?to(f):jl(f);if(gr&&f[gr])return No(f[gr]());var b=Qa(f),D=b==Q?Rl:b==Ye?wo:Wf;return D(f)}function ph(f){if(!f)return f===0?f:0;if(f=Bu(f),f===re||f===-1/0){var b=f<0?-1:1;return b*_e}return f===f?f:0}function ui(f){var b=ph(f),D=b%1;return b===b?D?b-D:b:0}function gx(f){return f?nr(ui(f),0,Oe):0}function Bu(f){if(typeof f=="number")return f;if(pu(f))return Le;if(ao(f)){var b=typeof f.valueOf=="function"?f.valueOf():f;f=ao(b)?b+"":b}if(typeof f!="string")return f===0?f:+f;f=Zo(f);var D=gi.test(f);return D||Gr.test(f)?au(f.slice(2),D?2:8):ur.test(f)?Le:+f}function mx(f){return Nc(f,$l(f))}function D6(f){return f?nr(ui(f),-9007199254740991,J):f===0?f:0}function os(f){return f==null?"":Ja(f)}var O6=$f(function(f,b){if(Yp(b)||zl(b)){Nc(b,wa(b),f);return}for(var D in b)Qr.call(b,D)&&gt(f,D,b[D])}),vx=$f(function(f,b){Nc(b,$l(b),f)}),l0=$f(function(f,b,D,oe){Nc(b,$l(b),f,oe)}),N6=$f(function(f,b,D,oe){Nc(b,wa(b),f,oe)}),I6=hh(An);function B6(f,b){var D=Fo(f);return b==null?D:vn(D,b)}var R6=li(function(f,b){f=Ci(f);var D=-1,oe=b.length,Se=oe>2?b[2]:n;for(Se&&_l(b[0],b[1],Se)&&(oe=1);++D<oe;)for(var Ve=b[D],at=$l(Ve),vt=-1,At=at.length;++vt<At;){var dn=at[vt],fn=f[dn];(fn===n||ac(fn,Da[dn])&&!Qr.call(f,dn))&&(f[dn]=Ve[dn])}return f}),F6=li(function(f){return f.push(n,Nw),xi(yx,n,f)});function j6(f,b){return Pt(f,Mr(b,3),tn)}function z6(f,b){return Pt(f,Mr(b,3),xn)}function $6(f,b){return f==null?f:yt(f,Mr(b,3),$l)}function V6(f,b){return f==null?f:It(f,Mr(b,3),$l)}function U6(f,b){return f&&tn(f,Mr(b,3))}function H6(f,b){return f&&xn(f,Mr(b,3))}function W6(f){return f==null?[]:Sn(f,wa(f))}function G6(f){return f==null?[]:Sn(f,$l(f))}function b1(f,b,D){var oe=f==null?n:fr(f,b);return oe===n?D:oe}function q6(f,b){return f!=null&&Rw(f,b,zt)}function _1(f,b){return f!=null&&Rw(f,b,Lt)}var Y6=kw(function(f,b,D){b!=null&&typeof b.toString!="function"&&(b=Ei.call(b)),f[b]=D},x1(Vl)),K6=kw(function(f,b,D){b!=null&&typeof b.toString!="function"&&(b=Ei.call(b)),Qr.call(f,b)?f[b].push(D):f[b]=[D]},Mr),Z6=li(ze);function wa(f){return zl(f)?Rt(f):yi(f)}function $l(f){return zl(f)?Rt(f,!0):Ri(f)}function X6(f,b){var D={};return b=Mr(b,3),tn(f,function(oe,Se,Ve){Bn(D,b(oe,Se,Ve),oe)}),D}function J6(f,b){var D={};return b=Mr(b,3),tn(f,function(oe,Se,Ve){Bn(D,Se,b(oe,Se,Ve))}),D}var Q6=$f(function(f,b,D){Ra(f,b,D)}),yx=$f(function(f,b,D,oe){Ra(f,b,D,oe)}),eT=hh(function(f,b){var D={};if(f==null)return D;var oe=!1;b=Li(b,function(Ve){return Ve=oc(Ve,f),oe||(oe=Ve.length>1),Ve}),Nc(f,s1(f),D),oe&&(D=h(D,p|v|m,YM));for(var Se=b.length;Se--;)lh(D,b[Se]);return D});function tT(f,b){return bx(f,s0(Mr(b)))}var nT=hh(function(f,b){return f==null?{}:Fa(f,b)});function bx(f,b){if(f==null)return{};var D=Li(s1(f),function(oe){return[oe]});return b=Mr(b),oo(f,D,function(oe,Se){return b(oe,Se[0])})}function rT(f,b,D){b=oc(b,f);var oe=-1,Se=b.length;for(Se||(Se=1,f=n);++oe<Se;){var Ve=f==null?n:f[Ic(b[oe])];Ve===n&&(oe=Se,Ve=D),f=fh(Ve)?Ve.call(f):Ve}return f}function iT(f,b,D){return f==null?f:ah(f,b,D)}function sT(f,b,D,oe){return oe=typeof oe=="function"?oe:n,f==null?f:ah(f,b,D,oe)}var _x=Dw(wa),wx=Dw($l);function oT(f,b,D){var oe=ti(f),Se=oe||Yh(f)||Hf(f);if(b=Mr(b,4),D==null){var Ve=f&&f.constructor;Se?D=oe?new Ve:[]:ao(f)?D=fh(Ve)?Fo(Ia(f)):{}:D={}}return(Se?$s:tn)(f,function(at,vt,At){return b(D,at,vt,At)}),D}function aT(f,b){return f==null?!0:lh(f,b)}function lT(f,b,D){return f==null?f:jf(f,b,jd(D))}function uT(f,b,D,oe){return oe=typeof oe=="function"?oe:n,f==null?f:jf(f,b,jd(D),oe)}function Wf(f){return f==null?[]:Js(f,wa(f))}function cT(f){return f==null?[]:Js(f,$l(f))}function hT(f,b,D){return D===n&&(D=b,b=n),D!==n&&(D=Bu(D),D=D===D?D:0),b!==n&&(b=Bu(b),b=b===b?b:0),nr(Bu(f),b,D)}function dT(f,b,D){return b=ph(b),D===n?(D=b,b=0):D=ph(D),f=Bu(f),Bt(f,b,D)}function fT(f,b,D){if(D&&typeof D!="boolean"&&_l(f,b,D)&&(b=D=n),D===n&&(typeof b=="boolean"?(D=b,b=n):typeof f=="boolean"&&(D=f,f=n)),f===n&&b===n?(f=0,b=1):(f=ph(f),b===n?(b=f,f=0):b=ph(b)),f>b){var oe=f;f=b,b=oe}if(D||f%1||b%1){var Se=qt();return Pe(f+Se*(b-f+Dl("1e-"+((Se+"").length-1))),b)}return Rd(f,b)}var pT=Vf(function(f,b,D){return b=b.toLowerCase(),f+(D?xx(b):b)});function xx(f){return w1(os(f).toLowerCase())}function Lx(f){return f=os(f),f&&f.replace(ln,Qu).replace(Ai,"")}function gT(f,b,D){f=os(f),b=Ja(b);var oe=f.length;D=D===n?oe:nr(ui(D),0,oe);var Se=D;return D-=b.length,D>=0&&f.slice(D,Se)==b}function mT(f){return f=os(f),f&&sr.test(f)?f.replace(dr,ml):f}function vT(f){return f=os(f),f&&nn.test(f)?f.replace(Ht,"\\$&"):f}var yT=Vf(function(f,b,D){return f+(D?"-":"")+b.toLowerCase()}),bT=Vf(function(f,b,D){return f+(D?" ":"")+b.toLowerCase()}),_T=Ew("toLowerCase");function wT(f,b,D){f=os(f),b=ui(b);var oe=b?eo(f):0;if(!b||oe>=b)return f;var Se=(b-oe)/2;return Zm(Ws(Se),D)+f+Zm(Hs(Se),D)}function xT(f,b,D){f=os(f),b=ui(b);var oe=b?eo(f):0;return b&&oe<b?f+Zm(b-oe,D):f}function LT(f,b,D){f=os(f),b=ui(b);var oe=b?eo(f):0;return b&&oe<b?Zm(b-oe,D)+f:f}function ST(f,b,D){return D||b==null?b=0:b&&(b=+b),Dt(os(f).replace(an,""),b||0)}function CT(f,b,D){return(D?_l(f,b,D):b===n)?b=1:b=ui(b),Rf(os(f),b)}function ET(){var f=arguments,b=os(f[0]);return f.length<3?b:b.replace(f[1],f[2])}var PT=Vf(function(f,b,D){return f+(D?"_":"")+b.toLowerCase()});function MT(f,b,D){return D&&typeof D!="number"&&_l(f,b,D)&&(b=D=n),D=D===n?Oe:D>>>0,D?(f=os(f),f&&(typeof b=="string"||b!=null&&!y1(b))&&(b=Ja(b),!b&&ka(f))?Nu(to(f),0,D):f.split(b,D)):[]}var kT=Vf(function(f,b,D){return f+(D?" ":"")+w1(b)});function AT(f,b,D){return f=os(f),D=D==null?0:nr(ui(D),0,f.length),b=Ja(b),f.slice(D,D+b.length)==b}function TT(f,b,D){var oe=Be.templateSettings;D&&_l(f,b,D)&&(b=n),f=os(f),b=l0({},b,oe,Ow);var Se=l0({},b.imports,oe.imports,Ow),Ve=wa(Se),at=Js(Se,Ve),vt,At,dn=0,fn=b.interpolate||_i,_n="__p += '",Hn=du((b.escape||_i).source+"|"+fn.source+"|"+(fn===jt?Br:_i).source+"|"+(b.evaluate||_i).source+"|$","g"),hr="//# sourceURL="+(Qr.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++su+"]")+`
`;f.replace(Hn,function(Ar,Pi,Fi,gu,wl,mu){return Fi||(Fi=gu),_n+=f.slice(dn,mu).replace(Ni,vl),Pi&&(vt=!0,_n+=`' +
__e(`+Pi+`) +
'`),wl&&(At=!0,_n+=`';
`+wl+`;
__p += '`),Fi&&(_n+=`' +
((__t = (`+Fi+`)) == null ? '' : __t) +
'`),dn=mu+Ar.length,Ar}),_n+=`';
`;var kr=Qr.call(b,"variable")&&b.variable;if(!kr)_n=`with (obj) {
`+_n+`
}
`;else if(or.test(kr))throw new Jn(a);_n=(At?_n.replace(en,""):_n).replace(wn,"$1").replace(En,"$1;"),_n="function("+(kr||"obj")+`) {
`+(kr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(vt?", __e = _.escape":"")+(At?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+_n+`return __p
}`;var ci=Cx(function(){return Cr(Ve,hr+"return "+_n).apply(n,at)});if(ci.source=_n,v1(ci))throw ci;return ci}function DT(f){return os(f).toLowerCase()}function OT(f){return os(f).toUpperCase()}function NT(f,b,D){if(f=os(f),f&&(D||b===n))return Zo(f);if(!f||!(b=Ja(b)))return f;var oe=to(f),Se=to(b),Ve=bo(oe,Se),at=Au(oe,Se)+1;return Nu(oe,Ve,at).join("")}function IT(f,b,D){if(f=os(f),f&&(D||b===n))return f.slice(0,Ga(f)+1);if(!f||!(b=Ja(b)))return f;var oe=to(f),Se=Au(oe,to(b))+1;return Nu(oe,0,Se).join("")}function BT(f,b,D){if(f=os(f),f&&(D||b===n))return f.replace(an,"");if(!f||!(b=Ja(b)))return f;var oe=to(f),Se=bo(oe,to(b));return Nu(oe,Se).join("")}function RT(f,b){var D=q,oe=I;if(ao(b)){var Se="separator"in b?b.separator:Se;D="length"in b?ui(b.length):D,oe="omission"in b?Ja(b.omission):oe}f=os(f);var Ve=f.length;if(ka(f)){var at=to(f);Ve=at.length}if(D>=Ve)return f;var vt=D-eo(oe);if(vt<1)return oe;var At=at?Nu(at,0,vt).join(""):f.slice(0,vt);if(Se===n)return At+oe;if(at&&(vt+=At.length-vt),y1(Se)){if(f.slice(vt).search(Se)){var dn,fn=At;for(Se.global||(Se=du(Se.source,os(xr.exec(Se))+"g")),Se.lastIndex=0;dn=Se.exec(fn);)var _n=dn.index;At=At.slice(0,_n===n?vt:_n)}}else if(f.indexOf(Ja(Se),vt)!=vt){var Hn=At.lastIndexOf(Se);Hn>-1&&(At=At.slice(0,Hn))}return At+oe}function FT(f){return f=os(f),f&&vr.test(f)?f.replace(Xn,qa):f}var jT=Vf(function(f,b,D){return f+(D?" ":"")+b.toUpperCase()}),w1=Ew("toUpperCase");function Sx(f,b,D){return f=os(f),b=D?n:b,b===n?Xo(f)?Aa(f):dt(f):f.match(b)||[]}var Cx=li(function(f,b){try{return xi(f,n,b)}catch(D){return v1(D)?D:new Jn(D)}}),zT=hh(function(f,b){return $s(b,function(D){D=Ic(D),Bn(f,D,g1(f[D],f))}),f});function $T(f){var b=f==null?0:f.length,D=Mr();return f=b?Li(f,function(oe){if(typeof oe[1]!="function")throw new es(o);return[D(oe[0]),oe[1]]}):[],li(function(oe){for(var Se=-1;++Se<b;){var Ve=f[Se];if(xi(Ve[0],this,oe))return xi(Ve[1],this,oe)}})}function VT(f){return g(h(f,p))}function x1(f){return function(){return f}}function UT(f,b){return f==null||f!==f?b:f}var HT=Mw(),WT=Mw(!0);function Vl(f){return f}function L1(f){return rr(typeof f=="function"?f:h(f,p))}function GT(f){return jo(h(f,p))}function qT(f,b){return nc(f,h(b,p))}var YT=li(function(f,b){return function(D){return ze(D,f,b)}}),KT=li(function(f,b){return function(D){return ze(f,D,b)}});function S1(f,b,D){var oe=wa(b),Se=Sn(b,oe);D==null&&!(ao(b)&&(Se.length||!oe.length))&&(D=b,b=f,f=this,Se=Sn(b,wa(b)));var Ve=!(ao(D)&&"chain"in D)||!!D.chain,at=fh(f);return $s(Se,function(vt){var At=b[vt];f[vt]=At,at&&(f.prototype[vt]=function(){var dn=this.__chain__;if(Ve||dn){var fn=f(this.__wrapped__),_n=fn.__actions__=jl(this.__actions__);return _n.push({func:At,args:arguments,thisArg:f}),fn.__chain__=dn,fn}return At.apply(f,Ko([this.value()],arguments))})}),f}function ZT(){return vs._===this&&(vs._=ws),this}function C1(){}function XT(f){return f=ui(f),li(function(b){return bl(b,f)})}var JT=n1(Li),QT=n1(hu),eD=n1(F);function Ex(f){return u1(f)?wr(Ic(f)):xs(f)}function tD(f){return function(b){return f==null?n:fr(f,b)}}var nD=Aw(),rD=Aw(!0);function E1(){return[]}function P1(){return!1}function iD(){return{}}function sD(){return""}function oD(){return!0}function aD(f,b){if(f=ui(f),f<1||f>J)return[];var D=Oe,oe=Pe(f,Oe);b=Mr(b),f-=Oe;for(var Se=_s(oe,b);++D<f;)b(D);return Se}function lD(f){return ti(f)?Li(f,Ic):pu(f)?[f]:jl(Gw(os(f)))}function uD(f){var b=++va;return os(f)+b}var cD=Km(function(f,b){return f+b},0),hD=r1("ceil"),dD=Km(function(f,b){return f/b},1),fD=r1("floor");function pD(f){return f&&f.length?ye(f,Vl,ft):n}function gD(f,b){return f&&f.length?ye(f,Mr(b,2),ft):n}function mD(f){return ar(f,Vl)}function vD(f,b){return ar(f,Mr(b,2))}function yD(f){return f&&f.length?ye(f,Vl,ei):n}function bD(f,b){return f&&f.length?ye(f,Mr(b,2),ei):n}var _D=Km(function(f,b){return f*b},1),wD=r1("round"),xD=Km(function(f,b){return f-b},0);function LD(f){return f&&f.length?Si(f,Vl):0}function SD(f,b){return f&&f.length?Si(f,Mr(b,2)):0}return Be.after=GA,Be.ary=rx,Be.assign=O6,Be.assignIn=vx,Be.assignInWith=l0,Be.assignWith=N6,Be.at=I6,Be.before=ix,Be.bind=g1,Be.bindAll=zT,Be.bindKey=sx,Be.castArray=i6,Be.chain=ex,Be.chunk=fk,Be.compact=pk,Be.concat=gk,Be.cond=$T,Be.conforms=VT,Be.constant=x1,Be.countBy=LA,Be.create=B6,Be.curry=ox,Be.curryRight=ax,Be.debounce=lx,Be.defaults=R6,Be.defaultsDeep=F6,Be.defer=qA,Be.delay=YA,Be.difference=mk,Be.differenceBy=vk,Be.differenceWith=yk,Be.drop=bk,Be.dropRight=_k,Be.dropRightWhile=wk,Be.dropWhile=xk,Be.fill=Lk,Be.filter=CA,Be.flatMap=MA,Be.flatMapDeep=kA,Be.flatMapDepth=AA,Be.flatten=Zw,Be.flattenDeep=Sk,Be.flattenDepth=Ck,Be.flip=KA,Be.flow=HT,Be.flowRight=WT,Be.fromPairs=Ek,Be.functions=W6,Be.functionsIn=G6,Be.groupBy=TA,Be.initial=Mk,Be.intersection=kk,Be.intersectionBy=Ak,Be.intersectionWith=Tk,Be.invert=Y6,Be.invertBy=K6,Be.invokeMap=OA,Be.iteratee=L1,Be.keyBy=NA,Be.keys=wa,Be.keysIn=$l,Be.map=n0,Be.mapKeys=X6,Be.mapValues=J6,Be.matches=GT,Be.matchesProperty=qT,Be.memoize=i0,Be.merge=Q6,Be.mergeWith=yx,Be.method=YT,Be.methodOf=KT,Be.mixin=S1,Be.negate=s0,Be.nthArg=XT,Be.omit=eT,Be.omitBy=tT,Be.once=ZA,Be.orderBy=IA,Be.over=JT,Be.overArgs=XA,Be.overEvery=QT,Be.overSome=eD,Be.partial=m1,Be.partialRight=ux,Be.partition=BA,Be.pick=nT,Be.pickBy=bx,Be.property=Ex,Be.propertyOf=tD,Be.pull=Ik,Be.pullAll=Jw,Be.pullAllBy=Bk,Be.pullAllWith=Rk,Be.pullAt=Fk,Be.range=nD,Be.rangeRight=rD,Be.rearg=JA,Be.reject=jA,Be.remove=jk,Be.rest=QA,Be.reverse=f1,Be.sampleSize=$A,Be.set=iT,Be.setWith=sT,Be.shuffle=VA,Be.slice=zk,Be.sortBy=WA,Be.sortedUniq=qk,Be.sortedUniqBy=Yk,Be.split=MT,Be.spread=e6,Be.tail=Kk,Be.take=Zk,Be.takeRight=Xk,Be.takeRightWhile=Jk,Be.takeWhile=Qk,Be.tap=pA,Be.throttle=t6,Be.thru=t0,Be.toArray=px,Be.toPairs=_x,Be.toPairsIn=wx,Be.toPath=lD,Be.toPlainObject=mx,Be.transform=oT,Be.unary=n6,Be.union=eA,Be.unionBy=tA,Be.unionWith=nA,Be.uniq=rA,Be.uniqBy=iA,Be.uniqWith=sA,Be.unset=aT,Be.unzip=p1,Be.unzipWith=Qw,Be.update=lT,Be.updateWith=uT,Be.values=Wf,Be.valuesIn=cT,Be.without=oA,Be.words=Sx,Be.wrap=r6,Be.xor=aA,Be.xorBy=lA,Be.xorWith=uA,Be.zip=cA,Be.zipObject=hA,Be.zipObjectDeep=dA,Be.zipWith=fA,Be.entries=_x,Be.entriesIn=wx,Be.extend=vx,Be.extendWith=l0,S1(Be,Be),Be.add=cD,Be.attempt=Cx,Be.camelCase=pT,Be.capitalize=xx,Be.ceil=hD,Be.clamp=hT,Be.clone=s6,Be.cloneDeep=a6,Be.cloneDeepWith=l6,Be.cloneWith=o6,Be.conformsTo=u6,Be.deburr=Lx,Be.defaultTo=UT,Be.divide=dD,Be.endsWith=gT,Be.eq=ac,Be.escape=mT,Be.escapeRegExp=vT,Be.every=SA,Be.find=EA,Be.findIndex=Yw,Be.findKey=j6,Be.findLast=PA,Be.findLastIndex=Kw,Be.findLastKey=z6,Be.floor=fD,Be.forEach=tx,Be.forEachRight=nx,Be.forIn=$6,Be.forInRight=V6,Be.forOwn=U6,Be.forOwnRight=H6,Be.get=b1,Be.gt=c6,Be.gte=h6,Be.has=q6,Be.hasIn=_1,Be.head=Xw,Be.identity=Vl,Be.includes=DA,Be.indexOf=Pk,Be.inRange=dT,Be.invoke=Z6,Be.isArguments=Vd,Be.isArray=ti,Be.isArrayBuffer=d6,Be.isArrayLike=zl,Be.isArrayLikeObject=zo,Be.isBoolean=f6,Be.isBuffer=Yh,Be.isDate=p6,Be.isElement=g6,Be.isEmpty=m6,Be.isEqual=v6,Be.isEqualWith=y6,Be.isError=v1,Be.isFinite=b6,Be.isFunction=fh,Be.isInteger=cx,Be.isLength=o0,Be.isMap=hx,Be.isMatch=_6,Be.isMatchWith=w6,Be.isNaN=x6,Be.isNative=L6,Be.isNil=C6,Be.isNull=S6,Be.isNumber=dx,Be.isObject=ao,Be.isObjectLike=So,Be.isPlainObject=Zp,Be.isRegExp=y1,Be.isSafeInteger=E6,Be.isSet=fx,Be.isString=a0,Be.isSymbol=pu,Be.isTypedArray=Hf,Be.isUndefined=P6,Be.isWeakMap=M6,Be.isWeakSet=k6,Be.join=Dk,Be.kebabCase=yT,Be.last=Iu,Be.lastIndexOf=Ok,Be.lowerCase=bT,Be.lowerFirst=_T,Be.lt=A6,Be.lte=T6,Be.max=pD,Be.maxBy=gD,Be.mean=mD,Be.meanBy=vD,Be.min=yD,Be.minBy=bD,Be.stubArray=E1,Be.stubFalse=P1,Be.stubObject=iD,Be.stubString=sD,Be.stubTrue=oD,Be.multiply=_D,Be.nth=Nk,Be.noConflict=ZT,Be.noop=C1,Be.now=r0,Be.pad=wT,Be.padEnd=xT,Be.padStart=LT,Be.parseInt=ST,Be.random=fT,Be.reduce=RA,Be.reduceRight=FA,Be.repeat=CT,Be.replace=ET,Be.result=rT,Be.round=wD,Be.runInContext=_t,Be.sample=zA,Be.size=UA,Be.snakeCase=PT,Be.some=HA,Be.sortedIndex=$k,Be.sortedIndexBy=Vk,Be.sortedIndexOf=Uk,Be.sortedLastIndex=Hk,Be.sortedLastIndexBy=Wk,Be.sortedLastIndexOf=Gk,Be.startCase=kT,Be.startsWith=AT,Be.subtract=xD,Be.sum=LD,Be.sumBy=SD,Be.template=TT,Be.times=aD,Be.toFinite=ph,Be.toInteger=ui,Be.toLength=gx,Be.toLower=DT,Be.toNumber=Bu,Be.toSafeInteger=D6,Be.toString=os,Be.toUpper=OT,Be.trim=NT,Be.trimEnd=IT,Be.trimStart=BT,Be.truncate=RT,Be.unescape=FT,Be.uniqueId=uD,Be.upperCase=jT,Be.upperFirst=w1,Be.each=tx,Be.eachRight=nx,Be.first=Xw,S1(Be,function(){var f={};return tn(Be,function(b,D){Qr.call(Be.prototype,D)||(f[D]=b)}),f}(),{chain:!1}),Be.VERSION=r,$s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){Be[f].placeholder=Be}),$s(["drop","take"],function(f,b){Hr.prototype[f]=function(D){D=D===n?1:le(ui(D),0);var oe=this.__filtered__&&!b?new Hr(this):this.clone();return oe.__filtered__?oe.__takeCount__=Pe(D,oe.__takeCount__):oe.__views__.push({size:Pe(D,Oe),type:f+(oe.__dir__<0?"Right":"")}),oe},Hr.prototype[f+"Right"]=function(D){return this.reverse()[f](D).reverse()}}),$s(["filter","map","takeWhile"],function(f,b){var D=b+1,oe=D==R||D==V;Hr.prototype[f]=function(Se){var Ve=this.clone();return Ve.__iteratees__.push({iteratee:Mr(Se,3),type:D}),Ve.__filtered__=Ve.__filtered__||oe,Ve}}),$s(["head","last"],function(f,b){var D="take"+(b?"Right":"");Hr.prototype[f]=function(){return this[D](1).value()[0]}}),$s(["initial","tail"],function(f,b){var D="drop"+(b?"":"Right");Hr.prototype[f]=function(){return this.__filtered__?new Hr(this):this[D](1)}}),Hr.prototype.compact=function(){return this.filter(Vl)},Hr.prototype.find=function(f){return this.filter(f).head()},Hr.prototype.findLast=function(f){return this.reverse().find(f)},Hr.prototype.invokeMap=li(function(f,b){return typeof f=="function"?new Hr(this):this.map(function(D){return ze(D,f,b)})}),Hr.prototype.reject=function(f){return this.filter(s0(Mr(f)))},Hr.prototype.slice=function(f,b){f=ui(f);var D=this;return D.__filtered__&&(f>0||b<0)?new Hr(D):(f<0?D=D.takeRight(-f):f&&(D=D.drop(f)),b!==n&&(b=ui(b),D=b<0?D.dropRight(-b):D.take(b-f)),D)},Hr.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},Hr.prototype.toArray=function(){return this.take(Oe)},tn(Hr.prototype,function(f,b){var D=/^(?:filter|find|map|reject)|While$/.test(b),oe=/^(?:head|last)$/.test(b),Se=Be[oe?"take"+(b=="last"?"Right":""):b],Ve=oe||/^find/.test(b);Se&&(Be.prototype[b]=function(){var at=this.__wrapped__,vt=oe?[1]:arguments,At=at instanceof Hr,dn=vt[0],fn=At||ti(at),_n=function(Pi){var Fi=Se.apply(Be,Ko([Pi],vt));return oe&&Hn?Fi[0]:Fi};fn&&D&&typeof dn=="function"&&dn.length!=1&&(At=fn=!1);var Hn=this.__chain__,hr=!!this.__actions__.length,kr=Ve&&!Hn,ci=At&&!hr;if(!Ve&&fn){at=ci?at:new Hr(this);var Ar=f.apply(at,vt);return Ar.__actions__.push({func:t0,args:[_n],thisArg:n}),new qs(Ar,Hn)}return kr&&ci?f.apply(this,vt):(Ar=this.thru(_n),kr?oe?Ar.value()[0]:Ar.value():Ar)})}),$s(["pop","push","shift","sort","splice","unshift"],function(f){var b=Ta[f],D=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",oe=/^(?:pop|shift)$/.test(f);Be.prototype[f]=function(){var Se=arguments;if(oe&&!this.__chain__){var Ve=this.value();return b.apply(ti(Ve)?Ve:[],Se)}return this[D](function(at){return b.apply(ti(at)?at:[],Se)})}}),tn(Hr.prototype,function(f,b){var D=Be[b];if(D){var oe=D.name+"";Qr.call(Ro,oe)||(Ro[oe]=[]),Ro[oe].push({name:b,func:D})}}),Ro[Ym(n,A).name]=[{name:"wrapper",func:n}],Hr.prototype.clone=Vh,Hr.prototype.reverse=Af,Hr.prototype.value=Uh,Be.prototype.at=gA,Be.prototype.chain=mA,Be.prototype.commit=vA,Be.prototype.next=yA,Be.prototype.plant=_A,Be.prototype.reverse=wA,Be.prototype.toJSON=Be.prototype.valueOf=Be.prototype.value=xA,Be.prototype.first=Be.prototype.head,gr&&(Be.prototype[gr]=bA),Be},ro=Jo();ys?((ys.exports=ro)._=ro,cr._=ro):vs._=ro}).call(Sa)})(qv,qv.exports);var IE=qv.exports;class za extends Gn.Polygon{constructor(n,r={}){super([],{...r,pmIgnore:!1,interactive:!0});Ze(this,"_width");Ze(this,"_height");Ze(this,"_center");Ze(this,"_rotation");Ze(this,"_isMapReady",!1);Ze(this,"properties");Ze(this,"_helperPoints",{corners:[],midPoints:[]});Ze(this,"_throttledUpdateProperties");const i=n instanceof Gn.LatLngBounds?n:Gn.latLngBounds(n);if(this._center=i.getCenter(),this._rotation=0,console.log("[Rectangle][constructor] Initialisation avec options:",{bounds:i,center:this._center,hasExplicitDimensions:!!(r.width&&r.height),width:r.width,height:r.height}),r.width&&r.height)this._width=r.width,this._height=r.height,console.log("[Rectangle][constructor] Utilisation des dimensions explicites:",{width:this._width,height:this._height});else{const s=i.getSouthWest(),o=i.getNorthEast();this._width=gn.measure("Rectangle.constructor.calculateWidth",()=>{const a=X1([s.lng,s.lat],[o.lng,s.lat],{units:"meters"});return Math.max(a,1)}),this._height=gn.measure("Rectangle.constructor.calculateHeight",()=>{const a=X1([s.lng,s.lat],[s.lng,o.lat],{units:"meters"});return Math.max(a,1)}),console.log("[Rectangle][constructor] Dimensions calcules depuis bounds:",{width:this._width,height:this._height})}(this._width<1||this._height<1)&&this._getPixelsPerMeter()>0&&(this._width=Math.max(this._width,1),this._height=Math.max(this._height,1),this._updatePolygonCoordinates()),this.properties=gn.measure("Rectangle.constructor.initProperties",()=>({type:"Rectangle",style:{...r,name:r.name||""},rotation:this._rotation})),this._throttledUpdateProperties=gn.measure("Rectangle.constructor.initThrottle",()=>IE.throttle(()=>{this.updateProperties()},100)),this.on("add",()=>{this._isMapReady=!0,this._updatePolygonCoordinates(),this.updateProperties()}),this.on("remove",()=>{this._isMapReady=!1})}_updatePolygonCoordinates(){gn.measure("Rectangle._updatePolygonCoordinates",()=>{if(!this._isMapReady||!this._map)return;console.log("[Rectangle][_updatePolygonCoordinates] Dbut mise  jour avec:",{width:this._width,height:this._height,center:this._center,rotation:this._rotation}),this._width=Math.max(this._width,1),this._height=Math.max(this._height,1);const n=this._width/2,r=this._height/2,i=i5([this._center.lng,this._center.lat],r,0,{units:"meters"}).geometry.coordinates,s=i5([this._center.lng,this._center.lat],n,90,{units:"meters"}).geometry.coordinates,o=Math.abs(i[1]-this._center.lat)*2,a=Math.abs(s[0]-this._center.lng)*2,l=[Gn.latLng(this._center.lat+o/2,this._center.lng-a/2),Gn.latLng(this._center.lat+o/2,this._center.lng+a/2),Gn.latLng(this._center.lat-o/2,this._center.lng+a/2),Gn.latLng(this._center.lat-o/2,this._center.lng-a/2)];if(this._rotation===0){this.setLatLngs(l);return}const c=this._map.latLngToContainerPoint(this._center),d=l.map(M=>this._map.latLngToContainerPoint(M)),p=-this._rotation*Math.PI/180,v=Math.cos(p),m=Math.sin(p),E=d.map(M=>{const A=M.x-c.x,O=M.y-c.y;return Gn.point(c.x+(A*v-O*m),c.y+(A*m+O*v))}).map(M=>this._map.containerPointToLatLng(M));console.log("[Rectangle][_updatePolygonCoordinates] Rsultat final:",{corners:E,dimensions:{width:this._width,height:this._height}}),this.setLatLngs(E),this.fire("coordinates:updated",{corners:E,center:this._center,rotation:this._rotation,dimensions:{width:this._width,height:this._height}})})}_getPixelsPerMeter(){return gn.measure("Rectangle._getPixelsPerMeter",()=>{if(!this._isMapReady||!this._map)return 1;const n=Math.max(this._width/1e3,1e-4),r=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(Gn.latLng(this._center.lat,this._center.lng+n)).x-r.x,o=X1([this._center.lng,this._center.lat],[this._center.lng+n,this._center.lat],{units:"meters"}),a=Math.abs(s/o);return isNaN(a)||a<=0?(console.warn("[Rectangle][_getPixelsPerMeter] Ratio invalide, utilisation de la valeur par dfaut"),1):a})}getRotatedCorners(){return gn.measure("Rectangle.getRotatedCorners",()=>{try{const n=this.getLatLngs();if(!n||!Array.isArray(n)||n.length===0){const r=this._width/2,i=this._height/2;return[Gn.latLng(this._center.lat+i,this._center.lng-r),Gn.latLng(this._center.lat+i,this._center.lng+r),Gn.latLng(this._center.lat-i,this._center.lng+r),Gn.latLng(this._center.lat-i,this._center.lng-r)]}return n[0]}catch(n){console.warn("Error in getRotatedCorners:",n);const r=this._width/2,i=this._height/2;return[Gn.latLng(this._center.lat+i,this._center.lng-r),Gn.latLng(this._center.lat+i,this._center.lng+r),Gn.latLng(this._center.lat-i,this._center.lng+r),Gn.latLng(this._center.lat-i,this._center.lng-r)]}})}getMidPoints(){return gn.measure("Rectangle.getMidPoints",()=>{try{const n=this.getRotatedCorners();if(!n||n.length<4){const i=this._width/2,s=this._height/2;return[Gn.latLng(this._center.lat+s,this._center.lng),Gn.latLng(this._center.lat,this._center.lng+i),Gn.latLng(this._center.lat-s,this._center.lng),Gn.latLng(this._center.lat,this._center.lng-i)]}if(!n.every(i=>i&&typeof i.lat=="number"&&typeof i.lng=="number"))throw new Error("Invalid corner coordinates");return[this._getMidPoint(n[3],n[0]),this._getMidPoint(n[0],n[1]),this._getMidPoint(n[1],n[2]),this._getMidPoint(n[2],n[3])]}catch(n){console.warn("Error in getMidPoints:",n);const r=this._width/2,i=this._height/2;return[Gn.latLng(this._center.lat+i,this._center.lng),Gn.latLng(this._center.lat,this._center.lng+r),Gn.latLng(this._center.lat-i,this._center.lng),Gn.latLng(this._center.lat,this._center.lng-r)]}})}_getMidPoint(n,r){return gn.measure("Rectangle._getMidPoint",()=>{if(!n||!r||typeof n.lat!="number"||typeof n.lng!="number"||typeof r.lat!="number"||typeof r.lng!="number")throw new Error("Invalid points for midpoint calculation");return Gn.latLng((n.lat+r.lat)/2,(n.lng+r.lng)/2)})}getCenter(){return gn.measure("Rectangle.getCenter",()=>this._center)}setCenter(n){gn.measure("Rectangle.setCenter",()=>{this._center=n,this._updatePolygonCoordinates(),this.updateProperties(),this.updateHelperPointPositions()})}getRotation(){return gn.measure("Rectangle.getRotation",()=>this._rotation)}setRotation(n,r=!1){gn.measure("Rectangle.setRotation",()=>{this._rotation=(n%360+360)%360,this._updatePolygonCoordinates(),r&&this.updateProperties(),this.updateHelperPointPositions(),this.fire("rotation:updated",{angle:this._rotation,corners:this.getRotatedCorners(),center:this._center})})}finalizeRotation(){gn.measure("Rectangle.finalizeRotation",()=>{this.updateProperties()})}getDimensions(){return gn.measure("Rectangle.getDimensions",()=>({width:this._width,height:this._height}))}setDimensions(n,r){gn.measure("Rectangle.setDimensions",()=>{console.log("[Rectangle][setDimensions] Dbut de la mise  jour des dimensions:",{oldWidth:this._width,oldHeight:this._height,newWidth:n,newHeight:r}),this._width=n,this._height=r,console.log("[Rectangle][setDimensions] Mise  jour des coordonnes du polygone"),this._updatePolygonCoordinates(),console.log("[Rectangle][setDimensions] Mise  jour des proprits"),this.updateProperties(),console.log("[Rectangle][setDimensions] mission de l'vnement dimensions:updated"),this.fire("dimensions:updated",{width:this._width,height:this._height,corners:this.getRotatedCorners(),center:this._center}),this.updateHelperPointPositions()})}resizeFromCorner(n,r){gn.measure("Rectangle.resizeFromCorner",()=>{if(!(!this._isMapReady||!this._map))try{const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,a=s.y-i.y,l=-this._rotation*Math.PI/180,c=Math.cos(l),d=Math.sin(l),p=o*c-a*d,v=o*d+a*c,m=this._getPixelsPerMeter(),x=n===0||n===3?-1:1,E=n===0||n===1?1:-1,M=Math.max(Math.abs(p*2)/m,1),A=Math.max(Math.abs(v*2)/m,1),O=M*m/2,z=A*m/2,K=x*O*c-E*z*d,ne=x*O*d+E*z*c,me=Gn.point(s.x-K,s.y-ne),pe=this._map.containerPointToLatLng(me),q=[Gn.point(me.x-O,me.y+z),Gn.point(me.x+O,me.y+z),Gn.point(me.x+O,me.y-z),Gn.point(me.x-O,me.y-z)].map(I=>{const B=I.x-me.x,$=I.y-me.y;return Gn.point(me.x+(B*c-$*d),me.y+(B*d+$*c))}).map(I=>this._map.containerPointToLatLng(I));this._width=M,this._height=A,this._center=pe,this.setLatLngs(q),this.fire("coordinates:updated",{corners:q,center:this._center,rotation:this._rotation})}catch(i){console.warn("Error in resizeFromCorner:",i)}})}resizeFromSide(n,r){gn.measure("Rectangle.resizeFromSide",()=>{if(!this._isMapReady||!this._map)return;const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,a=s.y-i.y,l=-this._rotation*Math.PI/180,c=Math.cos(l),d=Math.sin(l),p=o*c-a*d,v=o*d+a*c,m=this._getPixelsPerMeter();n%2===0?this._height=Math.abs(v*2)/m:this._width=Math.abs(p*2)/m,this._updatePolygonCoordinates(),this.updateProperties()})}moveFromCenter(n){gn.measure("Rectangle.moveFromCenter",()=>{this._center=n,this._updatePolygonCoordinates(),this.updateProperties()})}updateProperties(){gn.measure("Rectangle.updateProperties",()=>{var i,s,o;const n=this.getRotatedCorners(),r=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"";this.properties={...this.properties,width:this._width,height:this._height,surface:this._width*this._height,perimeter:2*(this._width+this._height),center:this._center,corners:n,midPoints:this.getMidPoints(),rotation:this._rotation,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:r}},this.fire("properties:updated",{shape:this,properties:this.properties,corners:n,midPoints:this.getMidPoints()})})}setName(n){gn.measure("Rectangle.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return gn.measure("Rectangle.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}generateHelperPoints(n,r="rgba(220, 38, 38, 0.5)",i="rgba(37, 99, 235, 0.5)"){gn.measure("Rectangle.generateHelperPoints",()=>{this.clearHelperPoints();const s=this.getRotatedCorners(),o=this.getMidPoints();this._helperPoints.corners=s.map(a=>Gn.circleMarker(a,{radius:5,color:r,fillColor:r,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-corner",pmIgnore:!0,interactive:!1}).addTo(n)),this._helperPoints.midPoints=o.map(a=>Gn.circleMarker(a,{radius:5,color:i,fillColor:i,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-midpoint",pmIgnore:!0,interactive:!1}).addTo(n))})}clearHelperPoints(){gn.measure("Rectangle.clearHelperPoints",()=>{this._helperPoints.corners.forEach(n=>{if(n&&n.remove)try{n.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de coin:",r)}}),this._helperPoints.midPoints.forEach(n=>{if(n&&n.remove)try{n.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de milieu:",r)}}),this._helperPoints.corners=[],this._helperPoints.midPoints=[]})}updateHelperPointPositions(){gn.measure("Rectangle.updateHelperPointPositions",()=>{if(this._helperPoints.corners.length===0&&this._helperPoints.midPoints.length===0)return;const n=this.getRotatedCorners(),r=this.getMidPoints();n.forEach((i,s)=>{this._helperPoints.corners[s]&&this._helperPoints.corners[s].setLatLng(i)}),r.forEach((i,s)=>{this._helperPoints.midPoints[s]&&this._helperPoints.midPoints[s].setLatLng(i)})})}findClosestHelperPoint(n){return gn.measure("Rectangle.findClosestHelperPoint",()=>{const r=this.getRotatedCorners(),i=this.getMidPoints(),s=[...r,...i];if(s.length===0)return null;let o=s[0],a=n.distanceTo(o);for(let l=1;l<s.length;l++){const c=n.distanceTo(s[l]);c<a&&(a=c,o=s[l])}return o})}toggleHelperPoints(n,r,i,s){gn.measure("Rectangle.toggleHelperPoints",()=>{r&&n?this.generateHelperPoints(n,i,s):this.clearHelperPoints()})}containsPoint(n){return gn.measure("Rectangle.containsPoint",()=>{const r=this.getRotatedCorners();if(r.length!==4)return!1;let i=!1;for(let s=0,o=r.length-1;s<r.length;o=s++){const a=r[s].lng,l=r[s].lat,c=r[o].lng,d=r[o].lat;l>n.lat!=d>n.lat&&n.lng<(c-a)*(n.lat-l)/(d-l)+a&&(i=!i)}return i})}}var Xi=(t=>(t.PRIVATE="private",t.COMPANY="company",t.EMPLOYEE="employee",t.VISITOR="visitor",t))(Xi||{});const wf=jp("notes",()=>{const t=xt([]),e=xt([]),n=Kn(()=>I=>t.value.find(B=>B.id===I)),r=Kn(()=>I=>{const B=t.value.find($=>$.id===I);return B?B.color:"#6B7280"}),i=Kn(()=>I=>e.value.filter(B=>B.columnId===I).sort((B,$)=>B.order-$.order)),s=Kn(()=>t.value.find(I=>I.isDefault)||t.value[0]),o=Kn(()=>[...t.value].sort((I,B)=>I.order-B.order)),a=Kn(()=>I=>{const B=da();if(!B.user)return!1;if(B.isAdmin)return!0;switch(I.accessLevel){case"private":return!0;case"company":return B.isAdmin||B.isEntreprise;case"employee":return B.isAdmin||B.isEntreprise||B.isSalarie;case"visitor":return B.isAdmin||B.isEntreprise||B.isSalarie||B.isVisiteur;default:return!1}}),l=Kn(()=>e.value.filter(I=>a.value(I))),c=Kn(()=>I=>l.value.filter(B=>B.columnId===I).sort((B,$)=>B.order-$.order));async function d(){console.log(`
[NotesStore][loadColumns] Initialisation des colonnes fixes...`);try{const I=[{id:"1",title:"Ides",color:"#8B5CF6",order:0,isDefault:!1},{id:"2",title:" faire",color:"#F59E0B",order:1,isDefault:!0},{id:"3",title:"En cours",color:"#3B82F6",order:2,isDefault:!1},{id:"4",title:"Termines",color:"#10B981",order:3,isDefault:!1},{id:"5",title:"Autres",color:"#6B7280",order:4,isDefault:!1}];t.value=I,console.log("[NotesStore][loadColumns] Colonnes fixes initialises:",t.value)}catch(I){throw console.error("[NotesStore][loadColumns] Erreur:",I),I}}async function p(I){console.log(`
[NotesStore][addColumn] Fonction dsactive - Utilisation de colonnes fixes`)}async function v(I,B){console.log(`
[NotesStore][updateColumn] Mise  jour locale de la colonne:`,I,B);try{const $=t.value.findIndex(R=>R.id===I);$!==-1&&(t.value[$]={...t.value[$],...B},console.log("[NotesStore][updateColumn] tat des colonnes aprs mise  jour:",t.value))}catch($){throw console.error("[NotesStore][updateColumn] Erreur:",$),$}}async function m(I){console.log(`
[NotesStore][removeColumn] Fonction dsactive - Utilisation de colonnes fixes`)}async function x(I){console.log(`
[NotesStore][reorderColumns] FONCTION DSACTIVE - Le dplacement des colonnes n'est plus possible`)}function E(I){if(!I)return"private";switch(I.toLowerCase()){case"private":return"private";case"company":return"company";case"employee":return"employee";case"visitor":return"visitor";default:return console.warn(`[NotesStore] Niveau d'accs inconnu: ${I}, utilisation de PRIVATE par dfaut`),"private"}}function M(I){if(!I.id)throw console.error("[NotesStore][addNote] Erreur: ID du backend manquant"),new Error("L'ID du backend est requis pour ajouter une note");const B=new Date().toISOString(),$=e.value.filter(V=>V.columnId===I.columnId),R=$.length>0?Math.max(...$.map(V=>V.order))+1:0,U=E(I.access_level);return console.log("[NotesStore][addNote] Ajout d'une note avec ID backend:",I.id,"et niveau d'accs:",U),e.value.push({...I,id:I.id,order:R,accessLevel:U,createdAt:B,updatedAt:B,comments:[],photos:[]}),I.id}function A(I,B){console.log(`
[NotesStore][updateNote] Mise  jour de la note:`,I,B);try{const $=e.value.findIndex(R=>R.id===I);$!==-1&&(B.color&&(B.style={...e.value[$].style,color:B.color,fillColor:B.color}),B.access_level&&(B.accessLevel=E(B.access_level),delete B.access_level),e.value[$]={...e.value[$],...B},console.log("[NotesStore][updateNote] Note mise  jour:",e.value[$]))}catch($){throw console.error("[NotesStore][updateNote] Erreur:",$),$}}function O(I){e.value.findIndex($=>$.id===I)!==-1?(console.log("[NotesStore][removeNote] Suppression de la note avec ID:",I),e.value=e.value.filter($=>$.id!==I)):console.warn("[NotesStore][removeNote] Tentative de suppression d'une note inexistante avec ID:",I)}function z(I,B){const $=e.value.findIndex(R=>R.id===I);if($!==-1){const R=e.value[$];if(R.columnId!==B){const V=e.value.filter(_e=>_e.columnId===B),re=V.length>0?Math.max(...V.map(_e=>_e.order))+1:0,J={...R,columnId:B,order:re,updatedAt:new Date().toISOString()};e.value[$]=J}else e.value[$]={...e.value[$],updatedAt:new Date().toISOString()}}}function K(I,B){B.forEach(($,R)=>{const U=e.value.findIndex(V=>V.id===$&&V.columnId===I);U!==-1&&(e.value[U]={...e.value[U],order:R,updatedAt:new Date().toISOString()})})}function ne(I){switch(I){case"private":return"Priv";case"company":return"Entreprise";case"employee":return"Salaris";case"visitor":return"Visiteurs";default:return"Inconnu"}}async function me(I,B){try{const $=da();if(!$.user)throw new Error("Vous devez tre connect pour ajouter un commentaire");if(!$.isEntreprise&&!$.isAdmin)throw new Error("Seules les entreprises peuvent ajouter des commentaires");if(!e.value.some(Le=>Le.id===I))throw new Error(`La note avec l'ID ${I} n'existe pas`);const V=(await La.addComment(I,B)).data,re=e.value.findIndex(Le=>Le.id===I);if(re===-1)return;const J=e.value[re];J.comments||(J.comments=[]);const _e={id:V.id,text:V.text,createdAt:V.created_at,userId:V.user,userName:V.user_name,userRole:V.user_role};return J.comments.push(_e),J.updatedAt=new Date().toISOString(),e.value[re]={...J},_e.id}catch($){throw console.error("Erreur lors de l'ajout du commentaire:",$),$}}async function pe(I,B){try{const $=e.value.findIndex(V=>V.id===I);if($===-1)throw new Error(`La note avec l'ID ${I} n'existe pas`);const R=e.value[$];if(!R.comments||R.comments.length===0)throw new Error("Aucun commentaire trouv pour cette note");if(!R.comments.some(V=>V.id===B))throw new Error(`Le commentaire avec l'ID ${B} n'existe pas`);await La.deleteComment(I,B),R.comments=R.comments.filter(V=>V.id!==B),R.updatedAt=new Date().toISOString(),e.value[$]={...R}}catch($){throw console.error("Erreur lors de la suppression du commentaire:",$),$}}async function N(I,B){try{if(B.id&&B.image){const $=e.value.findIndex(V=>V.id===I);if($===-1)return;const R=e.value[$];R.photos||(R.photos=[]);const U={id:B.id,url:B.image,caption:B.caption,createdAt:B.created_at};return R.photos.push(U),R.updatedAt=new Date().toISOString(),e.value[$]={...R},U.id}else{const $=new FormData;$.append("image",B.url),B.caption&&$.append("caption",B.caption);const U=(await La.addPhoto(I,$)).data,V=e.value.findIndex(_e=>_e.id===I);if(V===-1)return;const re=e.value[V];re.photos||(re.photos=[]);const J={id:U.id,url:U.image,caption:U.caption,createdAt:U.created_at};return re.photos.push(J),re.updatedAt=new Date().toISOString(),e.value[V]={...re},J.id}}catch($){throw console.error("Erreur lors de l'ajout de la photo:",$),$}}async function j(I,B){try{await La.deletePhoto(I,B);const $=e.value.findIndex(V=>V.id===I);if($===-1){console.error("[NotesStore] Note non trouve pour la suppression de la photo");return}e.value[$].photos||(e.value[$].photos=[]);const R=e.value[$],U=(R.photos||[]).filter(V=>V.id!==B);e.value[$]={...R,photos:U,updatedAt:new Date().toISOString()},console.log("[NotesStore] Photo supprime avec succs, photos restantes:",U.length)}catch($){throw console.error("Erreur lors de la suppression de la photo:",$),$}}async function q(I,B,$){try{await La.updatePhoto(I,B,{caption:$});const R=e.value.findIndex(re=>re.id===I);if(R===-1||!e.value[R].photos)return;const U=e.value[R],V=U.photos.findIndex(re=>re.id===B);if(V===-1)return;U.photos[V].caption=$,U.updatedAt=new Date().toISOString(),e.value[R]={...U}}catch(R){throw console.error("Erreur lors de la mise  jour de la lgende:",R),R}}return{columns:t,notes:e,getColumnById:n,getColumnColor:r,getNotesByColumn:i,getDefaultColumn:s,getSortedColumns:o,hasAccessToNote:a,getAccessibleNotes:l,getAccessibleNotesByColumn:c,getAccessLevelLabel:ne,loadColumns:d,addColumn:p,updateColumn:v,removeColumn:m,reorderColumns:x,addNote:M,updateNote:A,removeNote:O,moveNote:z,reorderNotes:K,addComment:me,removeComment:pe,addPhoto:N,removePhoto:j,updatePhoto:q}});class kh extends $t.Marker{constructor(n,r={}){const s=`
      <div class="geo-note-marker">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
          <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${r.color||"#2b6451"}" />
        </svg>
      </div>
    `,o=$t.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});if(!document.getElementById("geo-note-style")){const l=document.createElement("style");l.id="geo-note-style",l.textContent=`
        .geo-note-icon {
          background: none !important;
          border: none !important;
        }
        .geo-note-marker {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
          transform-origin: center bottom;
        }
      `,document.head.appendChild(l)}super(n,{icon:o,draggable:!1,autoPan:!0,riseOnHover:!0,bubblingMouseEvents:!1,interactive:!0,keyboard:!1});Ze(this,"properties");Ze(this,"_planSaved",!1);Ze(this,"_isMoving",!1);Ze(this,"_animateZoom",()=>{});this.properties={type:"Note",name:r.name||"Note golocalise",description:r.description||"",columnId:r.columnId||"1",accessLevel:r.accessLevel||Xi.PRIVATE,category:r.category||"forages",style:{color:r.color||"#2b6451",weight:r.weight||2,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity!==void 0?r.fillOpacity:.8,radius:r.radius||12},comments:[],photos:[],order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},console.log("[GeoNote][constructor] Note cre avec columnId:",this.properties.columnId),this.bindPopup(this.createPopupContent()),this.on("dblclick",this.onDoubleClick),this.on("add",l=>{if(l.target&&l.target._map){const c=l.target._map;this._protectFromZoomAnimationErrors(c),c.on("zoomend",()=>this.refreshIconStyle()),c.on("moveend",()=>this.refreshIconStyle())}}),window.addEventListener("geonote:updateStyle",l=>{const c=l.detail.noteId,d=this._dbId||this.properties.id;console.log("[GeoNote][updateStyle] vnement reu pour noteId:",c,"Comparaison avec ID backend:",d),c===d&&(console.log("[GeoNote][updateStyle] Correspondance trouve, mise  jour du style:",l.detail.style),this.setNoteStyle(l.detail.style),this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,...l.detail.style}),this.bindPopup(this.createPopupContent()))}),window.addEventListener("geonote:update",l=>{const c=l.detail.noteId,d=this._dbId||this.properties.id;console.log("[GeoNote][update] vnement reu pour noteId:",c,"Comparaison avec ID backend:",d),c===d&&(console.log("[GeoNote][update] Correspondance trouve, mise  jour des proprits:",l.detail.properties),this.properties={...this.properties,name:l.detail.properties.name,description:l.detail.properties.description,columnId:l.detail.properties.columnId,accessLevel:l.detail.properties.accessLevel,style:l.detail.properties.style},this.setNoteStyle(l.detail.properties.style),this.bindPopup(this.createPopupContent()),console.log("[GeoNote][update] Proprits mises  jour:",this.properties))}),console.log("[GeoNote][constructor] Note cre:",{location:n,name:this.properties.name,type:this.properties.type,style:this.properties.style})}createPopupContent(){const n=document.createElement("div");n.className="geo-note-popup",n.style.display="flex",n.style.flexDirection="column";const r=document.createElement("div");r.className="geo-note-header",n.appendChild(r);const i=document.createElement("div");i.className="geo-note-title",i.textContent=this.properties.name,r.appendChild(i);const s=document.createElement("div");s.className="geo-note-badges",r.appendChild(s);const o=document.createElement("div");o.className="geo-note-badge",o.style.backgroundColor=this.getColumnColor(this.properties.columnId),o.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5z" />
        <path d="M11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
      </svg>
      ${this.getColumnLabel(this.properties.columnId)}
    `,s.appendChild(o);const a=document.createElement("div");if(a.className="geo-note-badge",a.style.backgroundColor=this.getAccessLevelColor(this.properties.accessLevel),a.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
      </svg>
      ${this.getAccessLevelLabel(this.properties.accessLevel)}
    `,s.appendChild(a),this.properties.description&&this.properties.description.trim()!==""){const p=document.createElement("div");p.className="geo-note-content",n.appendChild(p);const v=document.createElement("div");v.className="geo-note-description",v.textContent=this.properties.description,p.appendChild(v)}const l=document.createElement("div");l.className="geo-note-buttons",l.style.display="flex",l.style.width="100%",l.style.marginTop="auto",l.style.borderTop="1px solid #E5E7EB",n.appendChild(l);const c=document.createElement("button");c.className="geo-note-edit-button",c.style.flex="1",c.style.height="36px",c.style.border="none",c.style.borderRight="1px solid #E5E7EB",c.style.background="transparent",c.style.color="#4B5563",c.style.fontSize="11px",c.style.fontWeight="500",c.style.display="flex",c.style.alignItems="center",c.style.justifyContent="center",c.style.cursor="pointer",c.style.padding="0",c.style.margin="0",c.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3 mr-1 inline-block align-text-bottom">
        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
      </svg>
      diter
    `,c.onclick=p=>{p.stopPropagation(),this.editNote()},l.appendChild(c);const d=document.createElement("button");return d.className="geo-note-open-button",d.style.flex="1",d.style.height="36px",d.style.border="none",d.style.background="transparent",d.style.color="#3B82F6",d.style.fontSize="11px",d.style.fontWeight="500",d.style.display="flex",d.style.alignItems="center",d.style.justifyContent="center",d.style.cursor="pointer",d.style.padding="0",d.style.margin="0",d.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3 mr-1 inline-block align-text-bottom">
        <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
      </svg>
      Itinraire
    `,d.onclick=p=>{p.stopPropagation(),this.openInGoogleMaps()},l.appendChild(d),n}getColumnColor(n){return{1:"#8B5CF6",2:"#F59E0B",3:"#3B82F6",4:"#10B981",5:"#6B7280"}[n]||"#6B7280"}getColumnLabel(n){return{1:"Ides",2:" faire",3:"En cours",4:"Termines",5:"Autres"}[n]||"Colonne "+n}getAccessLevelLabel(n){switch(n){case Xi.PRIVATE:return"Priv";case Xi.COMPANY:return"Entreprise";case Xi.EMPLOYEE:return"Salaris";case Xi.VISITOR:return"Visiteurs";default:return"Inconnu"}}getAccessLevelColor(n){switch(n){case Xi.PRIVATE:return"#9CA3AF";case Xi.COMPANY:return"#EF4444";case Xi.EMPLOYEE:return"#F59E0B";case Xi.VISITOR:return"#10B981";default:return"#6B7280"}}onDoubleClick(n){$t.DomEvent.stopPropagation(n),this.editNote()}editNote(){this.closePopup();const n=this._dbId||this.properties.id||this._leaflet_id;console.log(`[GeoNote][editNote] dition de note - ID backend: ${this._dbId}, ID properties: ${this.properties.id}, ID Leaflet: ${this._leaflet_id}, ID utilis: ${n}`);const r={id:n,title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},columnId:this.properties.columnId||"1",accessLevel:this.properties.accessLevel||"company",style:this.properties.style||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:this.properties.comments||[],photos:this.properties.photos||[]};console.log("[GeoNote][editNote] dition de note avec columnId:",r.columnId),console.log("[GeoNote] mission de l'vnement note:edit avec",r);const i=new CustomEvent("geonote:edit",{detail:{note:r,source:this}});window.dispatchEvent(i),this.fire("note:edit",{note:r,source:this})}openInGoogleMaps(){this.closePopup();const n=this.getLatLng().lat,r=this.getLatLng().lng,i=`https://www.google.com/maps/dir/?api=1&destination=${n},${r}`;window.open(i,"_blank")}updateProperties(){var o,a;this.properties.type="Note",this.properties.category||(this.properties.category="forages"),this.properties.accessLevel||(this.properties.accessLevel=Xi.PRIVATE);const n=(o=this.getElement())==null?void 0:o.querySelector(".geo-note-marker"),r=n?window.getComputedStyle(n).color:"#2b6451",i=((a=this.properties.style)==null?void 0:a.radius)||12,s=this.properties.style||{};this.properties.style={...s,color:r,weight:2,fillColor:r,fillOpacity:.8,radius:i,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category}}setNoteStyle(n){console.log("[GeoNote][setNoteStyle] Mise  jour du style:",n);const r=n.color||n.fillColor||"#2b6451",i=n.fillColor||n.color||"#2b6451";console.log("[GeoNote][setNoteStyle] Nouvelles couleurs - stroke:",r,"fill:",i);const s=this.getElement();if(s)try{const l=s.querySelector("svg path");l?(l.setAttribute("fill",i),console.log("[GeoNote][setNoteStyle] Couleur mise  jour directement sur le SVG existant")):(console.warn("[GeoNote][setNoteStyle] Impossible de trouver le path SVG dans l'lment"),this._updateIconWithNewColor(i))}catch(l){console.warn("[GeoNote][setNoteStyle] Erreur lors de la mise  jour directe du SVG:",l),this._updateIconWithNewColor(i)}else this._updateIconWithNewColor(i);const o=n._accessLevel||n.accessLevel||this.properties.accessLevel,a=n.category||this.properties.category;this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,color:r,weight:n.weight||this.properties.style.weight||2,fillColor:i,fillOpacity:n.fillOpacity!==void 0?n.fillOpacity:this.properties.style.fillOpacity||.8,radius:n.radius||this.properties.style.radius||12,_accessLevel:o,accessLevel:o,category:a}),o&&(this.properties.accessLevel=o),a&&(this.properties.category=a),this.refreshIconStyle()}refreshIconStyle(){const n=this.getElement();if(n&&(n.style.display="none",n.offsetHeight,n.style.display="",this._map))try{const r=this._map.latLngToLayerPoint(this.getLatLng());$t.DomUtil.setPosition(n,r)}catch(r){console.warn("[GeoNote][refreshIconStyle] Erreur lors de la mise  jour de la position:",r)}}_protectFromZoomAnimationErrors(n){try{const r=this._animateZoom;this._animateZoom=function(i){try{if(!this._map||!i.center||!i.zoom){console.warn("[GeoNote][_animateZoom] Animation de zoom ignore: proprits manquantes");return}r.call(this,i)}catch(s){console.warn("[GeoNote][_animateZoom] Erreur lors de l'animation de zoom:",s);try{const o=this.getElement();if(o&&this._map){const a=this._map.latLngToLayerPoint(this.getLatLng());$t.DomUtil.setPosition(o,a)}}catch(o){console.error("[GeoNote][_animateZoom] Erreur lors de la rcupration:",o)}}},console.log("[GeoNote][_protectFromZoomAnimationErrors] Protection contre les erreurs d'animation de zoom active")}catch(r){console.error("[GeoNote][_protectFromZoomAnimationErrors] Erreur lors de la mise en place de la protection:",r)}}_updateIconWithNewColor(n){try{const r=this._map;let i=!1;r&&(i=r.options.zoomAnimation||!1,r.options.zoomAnimation=!1);const s=`
        <div class="geo-note-marker">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${n}" />
          </svg>
        </div>
      `,o=$t.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});this.setIcon(o),r&&i&&setTimeout(()=>{r.options.zoomAnimation=!0},100),console.log("[GeoNote][_updateIconWithNewColor] Icne mise  jour avec la nouvelle couleur")}catch(r){console.error("[GeoNote][_updateIconWithNewColor] Erreur lors de la mise  jour de l'icne:",r)}}toBackendFormat(n){this.updateProperties();const r=this.getLatLng(),s={...{...this.properties.style,radius:this.properties.style.radius||12},_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel},o=this.properties.columnId||"1";return console.log("[GeoNote][toBackendFormat] Sauvegarde de note avec columnId:",o),{id:n,type_forme:"Note",data:{location:{type:"Point",coordinates:[r.lng,r.lat]},name:this.properties.name,description:this.properties.description,columnId:o,accessLevel:this.properties.accessLevel,category:this.properties.category||"forages",style:s,comments:this.properties.comments||[],photos:this.properties.photos||[],order:this.properties.order||0,createdAt:this.properties.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}}}updateFromBackendData(n){var l,c,d;this.properties.type="Note";const r=n.style?{...n.style,radius:n.style.radius||12}:this.properties.style,i=((l=n.style)==null?void 0:l._accessLevel)||((c=n.style)==null?void 0:c.accessLevel)||n.accessLevel||this.properties.accessLevel||Xi.PRIVATE;console.log("[GeoNote][updateFromBackendData] Niveau d'accs rcupr:",i);const s=((d=n.style)==null?void 0:d.category)||n.category||this.properties.category||"forages";console.log("[GeoNote][updateFromBackendData] Catgorie rcupre:",s);const o=n.columnId||this.properties.columnId||"1";console.log("[GeoNote][updateFromBackendData] Mise  jour de note avec columnId:",o);const a={...r,_accessLevel:i,accessLevel:i,category:s};this.properties={...this.properties,name:n.name||this.properties.name,description:n.description||this.properties.description,columnId:o,accessLevel:i,category:s,style:a,comments:n.comments||this.properties.comments||[],photos:n.photos||this.properties.photos||[],order:n.order||this.properties.order||0,createdAt:n.createdAt||this.properties.createdAt,updatedAt:n.updatedAt||new Date().toISOString()},this.setNoteStyle(a),this.bindPopup(this.createPopupContent()),console.log("[GeoNote][updateFromBackendData] Note mise  jour:",{name:this.properties.name,type:this.properties.type,category:this.properties.category,accessLevel:this.properties.accessLevel,style:this.properties.style})}static fromBackendData(n){var l,c,d,p,v,m,x,E;let r;if(typeof n.location=="object"&&!Array.isArray(n.location)&&n.location.type==="Point"){const M=n.location.coordinates;console.log("[GeoNote][fromBackendData] Coordonnes GeoJSON reues:",M),r=[M[1],M[0]]}else if(Array.isArray(n.location)&&n.location.length===2)r=n.location;else throw new Error("Les donnes de la note ne contiennent pas de position valide");console.log("[GeoNote][fromBackendData] Cration d'une note  partir des donnes:",n),console.log("[GeoNote][fromBackendData] Position utilise:",r);const i=((l=n.style)==null?void 0:l._accessLevel)||((c=n.style)==null?void 0:c.accessLevel)||n.accessLevel||Xi.PRIVATE;console.log("[GeoNote][fromBackendData] Niveau d'accs rcupr:",i,"Style:",n.style);const s=((d=n.style)==null?void 0:d.category)||n.category||"forages";console.log("[GeoNote][fromBackendData] Catgorie rcupre:",s),n.accessLevel=i,n.category=s;const o=n.columnId||"1";console.log("[GeoNote][fromBackendData] Cration de note avec columnId:",o);const a=new kh(r,{name:n.name,description:n.description,columnId:o,accessLevel:i,category:n.category||"forages",color:(p=n.style)==null?void 0:p.color,weight:(v=n.style)==null?void 0:v.weight,fillColor:(m=n.style)==null?void 0:m.fillColor,fillOpacity:(x=n.style)==null?void 0:x.fillOpacity,radius:(E=n.style)==null?void 0:E.radius});return a.properties.type="Note",a.properties.comments=n.comments||[],a.properties.photos=n.photos||[],a.properties.order=n.order||0,a.properties.createdAt=n.createdAt||new Date().toISOString(),a.properties.updatedAt=n.updatedAt||new Date().toISOString(),n.style&&a.setNoteStyle(n.style),a.bindPopup(a.createPopupContent()),console.log("[GeoNote][fromBackendData] Note cre:",{location:r,name:a.properties.name,type:a.properties.type,category:a.properties.category,accessLevel:a.properties.accessLevel,style:a.properties.style}),a}async saveNote(n){if(this._planSaved)return this._dbId||0;console.log("[GeoNote][saveNote] Sauvegarde directe de la note via l'API");try{this.updateProperties();const r={...this.properties.style,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category},i={title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},column:this.properties.columnId||"1",access_level:this.properties.accessLevel||"company",style:r,category:this.properties.category||"forages",comments:this.properties.comments||[],photos:this.properties.photos||[]};n&&(i.plan=n),console.log("[GeoNote][saveNote] Donnes  envoyer:",i);let s;return this._dbId?(s=(await La.updateNote(this._dbId,i)).data,console.log("[GeoNote][saveNote] Note mise  jour avec succs:",s)):(s=(await La.createNote(i)).data,console.log("[GeoNote][saveNote] Note cre avec succs:",s),this._dbId=s.id,wf().addNote({...s,id:s.id,columnId:s.column,accessLevel:s.access_level})),this._planSaved=!0,s.id}catch(r){return console.error("[GeoNote][saveNote] Erreur lors de la sauvegarde de la note:",r),tu().error("Erreur lors de la sauvegarde de la note"),0}}triggerPlanSave(){const n=localStorage.getItem("lastPlanId");n?(console.log(`[GeoNote][triggerPlanSave] Sauvegarde de la note avec le plan ${n}`),this.saveNote(parseInt(n))):(console.log("[GeoNote][triggerPlanSave] Aucun plan courant, sauvegarde sans association"),this.saveNote());const r=new CustomEvent("geonote:savePlan");window.dispatchEvent(r)}resetPlanSaveState(){this._planSaved=!1}moveTo(n){this.setLatLng(n),this.fire("note:moved",{latlng:n,note:this}),this.bindPopup(this.createPopupContent()),this.triggerPlanSave()}startMoving(){this._isMoving=!0,this.closePopup(),this.fire("note:movestart",{latlng:this.getLatLng(),note:this})}finishMoving(){this._isMoving=!1,this.fire("note:moveend",{latlng:this.getLatLng(),note:this}),this.triggerPlanSave()}isMoving(){return this._isMoving}}function wz(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function xz(t){if(!t||typeof t!="object")return console.log("[DrawingStore] ElevationData invalide: pas un objet",{data:t}),!1;const e=Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2,n=typeof t.style=="object"&&t.style!==null,r=!t.elevationData||Array.isArray(t.elevationData)&&t.elevationData.every(i=>typeof i=="object"&&"distance"in i&&"elevation"in i);return e&&n&&r}function Lz(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function g5(t){var e,n,r,i,s,o,a,l,c,d,p,v,m,x,E,M,A,O,z,K,ne,me,pe,N,j,q,I;if(console.log("[DrawingStore] Conversion de la forme en lment",{type:(e=t.properties)==null?void 0:e.type,name:(r=(n=t.properties)==null?void 0:n.style)==null?void 0:r.name,properties:t.properties}),((i=t.properties)==null?void 0:i.type)==="Note"){const B=t.getLatLng();return{type_forme:"Note",data:{points:[[B.lng,B.lat]],style:{color:((s=t.properties.style)==null?void 0:s.color)||"#2b6451",weight:((o=t.properties.style)==null?void 0:o.weight)||3,opacity:((a=t.properties.style)==null?void 0:a.opacity)||1,fillColor:((l=t.properties.style)==null?void 0:l.fillColor)||"#2b6451",fillOpacity:((c=t.properties.style)==null?void 0:c.fillOpacity)||.2,name:((d=t.properties.style)==null?void 0:d.name)||""}}}}if(t instanceof Sd||((p=t.properties)==null?void 0:p.type)==="ElevationLine")return{type_forme:"ElevationLine",data:{points:t.getLatLngs().map(R=>[R.lng,R.lat]),style:{color:((v=t.properties.style)==null?void 0:v.color)||"#2b6451",weight:((m=t.properties.style)==null?void 0:m.weight)||4,opacity:((x=t.properties.style)==null?void 0:x.opacity)||.8,name:((E=t.properties.style)==null?void 0:E.name)||""},category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor",elevationData:t.properties.elevationData,minElevation:t.properties.minElevation,maxElevation:t.properties.maxElevation,elevationGain:t.properties.elevationGain,elevationLoss:t.properties.elevationLoss,averageSlope:t.properties.averageSlope,maxSlope:t.properties.maxSlope}};if(t instanceof cd||((M=t.properties)==null?void 0:M.type)==="Polygon")return{type_forme:"Polygon",data:{points:t.getLatLngs()[0].map(R=>[R.lng,R.lat]),style:{color:((A=t.properties.style)==null?void 0:A.color)||"#2b6451",weight:((O=t.properties.style)==null?void 0:O.weight)||3,opacity:((z=t.properties.style)==null?void 0:z.opacity)||1,fillColor:((K=t.properties.style)==null?void 0:K.fillColor)||"#2b6451",fillOpacity:((ne=t.properties.style)==null?void 0:ne.fillOpacity)||.2,name:((me=t.properties.style)==null?void 0:me.name)||""},category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor"}};if(t instanceof ta||((pe=t.properties)==null?void 0:pe.type)==="Line")return{type_forme:"Line",data:{points:t.getLatLngs().map(R=>[R.lng,R.lat]),category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor",style:{color:((N=t.properties.style)==null?void 0:N.color)||"#2b6451",weight:((j=t.properties.style)==null?void 0:j.weight)||3,opacity:((q=t.properties.style)==null?void 0:q.opacity)||1,name:((I=t.properties.style)==null?void 0:I.name)||""}}};throw new Error("Type de forme non reconnu")}function Sz(t){var e,n,r,i,s,o,a,l,c,d,p,v,m,x,E,M,A,O,z,K,ne,me,pe,N,j,q,I,B,$,R,U,V,re,J,_e,Le,Oe,Z,G,se,ce,he,ve;switch(console.log("[DrawingStore] Conversion de l'lment stock en forme",{element:t}),t.type_forme){case"Polygon":{const ee=t.data;if(!wz(ee))return console.error("[DrawingStore] Donnes invalides pour Polygon"),null;const X=ee.points.map(qe=>Gn.latLng(qe[1],qe[0])),De=((e=ee.style)==null?void 0:e._accessLevel)||((n=ee.style)==null?void 0:n.accessLevel)||ee.accessLevel||"visitor";console.log("[DrawingStore] Polygon - Niveau d'accs rcupr:",De,"Style:",ee.style),ee.accessLevel=De;const Te=new cd([X],{color:((r=ee.style)==null?void 0:r.color)||"#2b6451",weight:((i=ee.style)==null?void 0:i.weight)||3,opacity:((s=ee.style)==null?void 0:s.opacity)||1,fillColor:((o=ee.style)==null?void 0:o.fillColor)||"#2b6451",fillOpacity:((a=ee.style)==null?void 0:a.fillOpacity)||.2,dashArray:((l=ee.style)==null?void 0:l.dashArray)||"",name:((c=ee.style)==null?void 0:c.name)||"",category:ee.category||"forages",accessLevel:De});return Te.updateProperties(),Te}case"ElevationLine":{const ee=t.data;if(!xz(ee))return console.error("[DrawingStore] Donnes invalides pour ElevationLine"),null;const X=ee.points.map(qe=>Gn.latLng(qe[1],qe[0])),De=((d=ee.style)==null?void 0:d._accessLevel)||((p=ee.style)==null?void 0:p.accessLevel)||ee.accessLevel||"visitor";console.log("[DrawingStore] ElevationLine - Niveau d'accs rcupr:",De,"Style:",ee.style),ee.accessLevel=De;const Te=new Sd(X,{color:((v=ee.style)==null?void 0:v.color)||"#2b6451",weight:((m=ee.style)==null?void 0:m.weight)||4,opacity:((x=ee.style)==null?void 0:x.opacity)||.8,name:((E=ee.style)==null?void 0:E.name)||"",category:ee.category||"forages",accessLevel:De});return Te.properties={type:"ElevationLine",category:ee.category||"forages",accessLevel:De,style:{...ee.style||{},name:((M=ee.style)==null?void 0:M.name)||""},elevationData:ee.elevationData,minElevation:ee.minElevation,maxElevation:ee.maxElevation,elevationGain:ee.elevationGain,elevationLoss:ee.elevationLoss,averageSlope:ee.averageSlope,maxSlope:ee.maxSlope,dataSource:"restored"},ee.elevationData&&Te.updateElevationProfile(),console.log("[DrawingStore] ElevationLine restored:",{points:X.length,hasElevationData:!!ee.elevationData,name:(A=ee.style)==null?void 0:A.name,properties:Te.properties}),Te}case"Line":{const ee=t.data;if(!Lz(ee))return console.error("[DrawingStore] Donnes invalides pour Ligne"),null;const X=ee.points.map(qe=>Gn.latLng(qe[1],qe[0])),De=((O=ee.style)==null?void 0:O._accessLevel)||((z=ee.style)==null?void 0:z.accessLevel)||ee.accessLevel||"visitor";console.log("[DrawingStore] Line - Niveau d'accs rcupr:",De,"Style:",ee.style),ee.accessLevel=De;const Te=new ta(X,{...ee.style||{},name:((K=ee.style)==null?void 0:K.name)||"",category:ee.category||"forages",accessLevel:De});return Te.updateProperties(),Te}case"Rectangle":{const ee=t.data;if(console.log("[DrawingStore][convertStoredElementToShape] Restauration Rectangle:",{data:ee,bounds:ee.bounds,width:ee.width,height:ee.height,rotation:ee.rotation}),!ee.bounds)return console.error("[DrawingStore] Donnes de bounds manquantes pour Rectangle"),null;const X=new Gn.LatLngBounds(Gn.latLng(ee.bounds.southWest[1],ee.bounds.southWest[0]),Gn.latLng(ee.bounds.northEast[1],ee.bounds.northEast[0])),De=new za(X,{color:((ne=ee.style)==null?void 0:ne.color)||"#2b6451",weight:((me=ee.style)==null?void 0:me.weight)||3,opacity:((pe=ee.style)==null?void 0:pe.opacity)||1,fillColor:((N=ee.style)==null?void 0:N.fillColor)||"#2b6451",fillOpacity:((j=ee.style)==null?void 0:j.fillOpacity)||.2,dashArray:((q=ee.style)==null?void 0:q.dashArray)||"",name:((I=ee.style)==null?void 0:I.name)||"",width:ee.width,height:ee.height});return ee.rotation&&De.setRotation(ee.rotation),console.log("[DrawingStore][convertStoredElementToShape] Rectangle restaur:",{bounds:De.getBounds(),dimensions:De.getDimensions(),properties:De.properties}),De}case"Circle":{console.log("[DrawingStore] Traitement d'un Circle  partir de l'API",{id:t.id,data:t.data,hasName:(($=(B=t.data)==null?void 0:B.style)==null?void 0:$.name)!==void 0,name:(U=(R=t.data)==null?void 0:R.style)==null?void 0:U.name});const ee=t.data;if(!ee.center||!ee.radius)return console.error("[DrawingStore] Donnes invalides pour Circle"),null;const X=Gn.circle([ee.center[1],ee.center[0]],{color:((V=ee.style)==null?void 0:V.color)||"#2b6451",weight:((re=ee.style)==null?void 0:re.weight)||3,opacity:((J=ee.style)==null?void 0:J.opacity)||1,fillColor:((_e=ee.style)==null?void 0:_e.fillColor)||"#2b6451",fillOpacity:((Le=ee.style)==null?void 0:Le.fillOpacity)||.2,dashArray:((Oe=ee.style)==null?void 0:Oe.dashArray)||"",radius:ee.radius});return X.properties={type:"Circle",radius:ee.radius,diameter:ee.radius*2,surface:Math.PI*ee.radius*ee.radius,perimeter:2*Math.PI*ee.radius,style:{...ee.style||{},name:((Z=ee.style)==null?void 0:Z.name)||""}},console.log("[DrawingStore] Cercle cr:",{centerType:typeof ee.center,center:ee.center,radius:ee.radius,style:X.properties.style,name:X.properties.style.name}),X}case"Note":{console.log("[DrawingStore] Traitement d'une Note  partir de l'API",{id:t.id,data:t.data});const ee=t.data;if(!ee.location)return console.error("[DrawingStore] Donnes invalides pour Note"),null;try{const X={location:ee.location,name:ee.name||"Note golocalise",description:ee.description||"",columnId:ee.columnId||"en-cours",accessLevel:ee.accessLevel||"private",category:ee.category||"forages",style:{color:((G=ee.style)==null?void 0:G.color)||"#2b6451",weight:((se=ee.style)==null?void 0:se.weight)||2,fillColor:((ce=ee.style)==null?void 0:ce.fillColor)||"#2b6451",fillOpacity:((he=ee.style)==null?void 0:he.fillOpacity)||.8,radius:((ve=ee.style)==null?void 0:ve.radius)||12},comments:ee.comments||[],photos:ee.photos||[],order:ee.order||0,createdAt:ee.createdAt||new Date().toISOString(),updatedAt:ee.updatedAt||new Date().toISOString()};console.log("[DrawingStore] Donnes prpares pour la note:",X);const De=kh.fromBackendData(X);return De._dbId=t.id,console.log("[DrawingStore] Note cre:",{id:t.id,location:X.location,name:X.name,type:De.properties.type}),De}catch(X){return console.error("[DrawingStore] Erreur lors de la cration de la Note:",X),null}}default:return console.warn("[DrawingStore] Type non gr pour la restauration:",t.type_forme),null}}const Tp=jp("drawing",{state:()=>({currentMapId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",filters:{accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}},currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null,performanceMonitor:Vp()}),getters:{hasUnsavedChanges:t=>t.unsavedChanges,getCurrentElements:t=>t.elements,getSelectedElement:t=>t.selectedElement,getCurrentTool:t=>t.currentTool,getCurrentStyle:t=>t.currentStyle,getLastUsedType:t=>t.lastUsedType,getFilters:t=>t.filters,getFilteredElements:t=>{if(t.elements.length===0)return console.log("[DrawingStore][getFilteredElements] Aucun lment dans le store, retour d'un tableau vide"),[];console.log("[DrawingStore][getFilteredElements] Dbut du filtrage avec",{totalElements:t.elements.length,filters:JSON.stringify({accessLevels:t.filters.accessLevels,categories:t.filters.categories,shapeTypes:t.filters.shapeTypes})}),console.log("[DrawingStore][getFilteredElements] lments dans le store:",t.elements.map(n=>({id:n.id,type_forme:n.type_forme,data:n.data?JSON.stringify(n.data):null})));const e=t.elements.filter(n=>{var l,c;if(console.log(`[DrawingStore][getFilteredElements] Vrification de l'lment ${n.id} (${n.type_forme})`),!(n.type_forme in t.filters.shapeTypes?t.filters.shapeTypes[n.type_forme]:!0))return console.log(`[DrawingStore][getFilteredElements] lment ${n.id} filtr par type: ${n.type_forme} (non visible)`),!1;const i=((l=n.data)==null?void 0:l.category)||"default";if(!(i in t.filters.categories?t.filters.categories[i]:!0))return console.log(`[DrawingStore][getFilteredElements] lment ${n.id} filtr par catgorie: ${i} (non visible)`),!1;const o=((c=n.data)==null?void 0:c.accessLevel)||"visitor";let a=!0;return o==="company"?a=t.filters.accessLevels.company:o==="employee"?a=t.filters.accessLevels.employee:o==="visitor"&&(a=t.filters.accessLevels.visitor),a?(console.log(`[DrawingStore][getFilteredElements] lment ${n.id} visible: type=${n.type_forme}, catgorie=${i}, accs=${o}`),!0):(console.log(`[DrawingStore][getFilteredElements] lment ${n.id} filtr par niveau d'accs: ${o} (non visible)`),!1)});return console.log("[DrawingStore][getFilteredElements] Rsultat du filtrage:",{total:t.elements.length,filtered:e.length,filteredIds:e.map(n=>n.id)}),e}},actions:{setCurrentPlan(t){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentMapId=t,t===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},this.filters={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}},clearCurrentPlan(){(this.currentMapId!==null||this.elements.length>0)&&(this.currentMapId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null)},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(t){var n;const e=this.performanceMonitor.startMeasure("addElement","DrawingStore");try{if(console.log("[DrawingStore] Ajout d'un lment",{element:t,isLeafletLayer:t instanceof Gn.Layer,hasProperties:!!t.properties,properties:t.properties,type:(n=t.properties)==null?void 0:n.type}),t instanceof Gn.Layer&&t.properties){const r=this.performanceMonitor.measure("addElement_convert",()=>g5(t),"DrawingStore");console.log("[DrawingStore] lment converti avant ajout",{original:t,converted:r,type:r.type_forme,data:r.data}),this.elements.push(r)}else!t.type_forme&&this.lastUsedType&&(t.type_forme=this.lastUsedType),this.elements.push(t);this.unsavedChanges=!0}finally{e()}},updateElement(t){const e=this.elements.findIndex(n=>n.id===t.id);if(e!==-1){const n=this.elements[e].type_forme;this.elements[e]={...t,type_forme:n},this.unsavedChanges=!0}},removeElement(t){const e=this.elements.findIndex(n=>n.id===t);e!==-1&&(this.elements.splice(e,1),this.unsavedChanges=!0)},selectElement(t){this.selectedElement=t},setCurrentTool(t){this.currentTool=t,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(t)&&(this.lastUsedType=t)},setCurrentStyle(t){if(!t||Object.keys(t).length===0){this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2};return}this.currentStyle={...this.currentStyle,...t}},updateFilters(t){if(console.log("[DrawingStore][updateFilters] Mise  jour des filtres:",JSON.stringify(t,null,2)),console.log("[DrawingStore][updateFilters] Filtres avant mise  jour:",JSON.stringify(this.filters,null,2)),t.accessLevels){const e={...this.filters.accessLevels};this.filters.accessLevels={...this.filters.accessLevels,...t.accessLevels},console.log("[DrawingStore][updateFilters] Niveaux d'accs mis  jour:",{avant:e,aprs:this.filters.accessLevels})}if(t.categories){const e={...this.filters.categories};this.filters.categories={...this.filters.categories,...t.categories},console.log("[DrawingStore][updateFilters] Catgories mises  jour:",{avant:e,aprs:this.filters.categories});const n=Object.keys(t.categories).filter(r=>e[r]!==this.filters.categories[r]);if(n.length>0){console.log(`[DrawingStore][updateFilters] Catgories modifies: ${n.join(", ")}`);const r=n.filter(i=>e[i]===!1&&this.filters.categories[i]===!0);r.length>0&&(console.log(`[DrawingStore][updateFilters] Catgories ractives: ${r.join(", ")}`),window.dispatchEvent(new CustomEvent("categoriesReactivated",{detail:{categories:r}})))}}if(t.shapeTypes){const e={...this.filters.shapeTypes};this.filters.shapeTypes={...this.filters.shapeTypes,...t.shapeTypes},console.log("[DrawingStore][updateFilters] Types de formes mis  jour:",{avant:e,aprs:this.filters.shapeTypes});const n=Object.keys(t.shapeTypes).filter(r=>e[r]!==this.filters.shapeTypes[r]);if(n.length>0){console.log(`[DrawingStore][updateFilters] Types de formes modifis: ${n.join(", ")}`);const r=n.filter(i=>e[i]===!1&&this.filters.shapeTypes[i]===!0);r.length>0&&(console.log(`[DrawingStore][updateFilters] Types de formes ractivs: ${r.join(", ")}`),window.dispatchEvent(new CustomEvent("shapeTypesReactivated",{detail:{shapeTypes:r}})))}}console.log("[DrawingStore][updateFilters] Filtres mis  jour:",JSON.stringify(this.filters,null,2)),console.log("[DrawingStore][updateFilters] mission de l'event filtersChanged"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:this.filters}}))},async loadPlanElements(t){const e=this.performanceMonitor.startMeasure("loadPlanElements","DrawingStore");if(this.currentMapId===t&&this.elements.length>0)return console.log(`[DrawingStore] Plan ${t} dj charg avec ${this.elements.length} lments`),e(),this.elements;this.loading=!0;try{console.log("[DrawingStore] Dbut du chargement du plan",{planId:t});const r=(await this.performanceMonitor.measureAsync("loadPlanElements_apiCall",()=>zn.get(`/plans/${t}/`),"DrawingStore")).data;return console.log("[DrawingStore] Donnes du plan reues",{formes:r.formes,preferences:r.preferences}),r.formes&&Array.isArray(r.formes)&&r.formes.forEach((i,s)=>{var o,a,l;console.log(`[DrawingStore] Analyse dtaille forme ${s}:`,{id:i.id,type_forme:i.type_forme,hasData:!!i.data,dataKeys:i.data?Object.keys(i.data):[],name:(o=i.data)==null?void 0:o.name,hasName:i.data&&"name"in i.data,centerType:(a=i.data)!=null&&a.center?typeof i.data.center:"undefined",center:(l=i.data)==null?void 0:l.center})}),this.elements=r.formes.map(i=>{var s;if(console.log("[DrawingStore] Traitement de la forme stocke",{id:i.id,type_forme:i.type_forme,data:i.data}),i.type_forme)return console.log("[DrawingStore] Forme dj au format lment",{type_forme:i.type_forme,data:i.data,hasName:i.data&&"name"in i.data,name:(s=i.data)==null?void 0:s.name}),{id:i.id,type_forme:i.type_forme,data:i.data||{}};try{const o=Sz(i);if(o)return console.log("[DrawingStore] Forme convertie avec succs",{originalType:i.type_forme,convertedType:o.type,properties:o.properties}),g5(o)}catch(o){console.error("[DrawingStore] Erreur lors de la conversion de la forme",{error:o,forme:i})}return console.warn("[DrawingStore] Utilisation de la forme sans conversion",{type_forme:i.type_forme,data:i.data}),i}),console.log(`[DrawingStore] Plan ${t} - Charg ${this.elements.length} lments`,{elements:this.elements.map(i=>({id:i.id,type_forme:i.type_forme}))}),this.currentMapId=t,this.unsavedChanges=!1,r.preferences&&(console.log("[DrawingStore] Chargement des prfrences",r.preferences),r.preferences.currentTool&&this.setCurrentTool(r.preferences.currentTool),r.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...r.preferences.currentStyle}),r.preferences.lastUsedType&&(this.lastUsedType=r.preferences.lastUsedType)),this.elements}catch(n){throw console.error("[DrawingStore] Erreur lors du chargement des lments:",n),this.error="Erreur lors du chargement des lments du plan",n}finally{this.loading=!1,e()}},async saveToPlan(t,e){const n=this.performanceMonitor.startMeasure("saveToPlan","DrawingStore");this.loading=!0;try{const r=t||this.currentMapId;if(console.log("[DrawingStore][saveToPlan] Dbut de la sauvegarde",{targetPlanId:r,currentPlanId:this.currentMapId,elementsCount:this.elements.length,elementsToDelete:e==null?void 0:e.elementsToDelete}),!r)throw new Error("Aucun plan slectionn pour la sauvegarde");const i=this.performanceMonitor.measure("saveToPlan_prepareElements",()=>this.elements.map(l=>({...l,type_forme:l.type_forme||this.lastUsedType})),"DrawingStore"),s=(e==null?void 0:e.elementsToDelete)||[],o=`/plans/${r}/save_with_elements/`,a=await this.performanceMonitor.measureAsync("saveToPlan_apiCall",()=>zn.post(o,{formes:i,connexions:[],annotations:[],elementsToDelete:s,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}}),"DrawingStore");return this.elements=this.performanceMonitor.measure("saveToPlan_processResponse",()=>{const l=new Set(s);return a.data.formes.filter(c=>!l.has(c.id)).map(c=>({...c,type_forme:c.type_forme}))},"DrawingStore"),console.log("[DrawingStore][saveToPlan] lments aprs filtrage:",{totalElements:this.elements.length,elementsToDelete:s}),this.unsavedChanges=!1,a.data}catch(r){throw console.error("[DrawingStore][saveToPlan] ERREUR:",r),console.error("[DrawingStore][saveToPlan] Stack trace:",r instanceof Error?r.stack:"No stack trace"),this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1,n()}}}}),Cz=jp("mapFilters",{state:()=>({filters:[],loading:!1,error:null,performanceMonitor:Vp()}),getters:{getFilterById:t=>e=>t.filters.find(n=>n.id===e),getFiltersByCategory:t=>e=>t.filters.filter(n=>n.category===e),getUniqueCategories:t=>{const e=new Set;return t.filters.forEach(n=>e.add(n.category)),Array.from(e)}},actions:{async initializeStore(){await this.fetchFilters()},async fetchFilters(){const t=this.performanceMonitor.startMeasure("fetchFilters","MapFilterStore"),e=tu();this.loading=!0,this.error=null;try{const n=await this.performanceMonitor.measureAsync("fetchFilters_apiCall",()=>_0.getFilters(),"MapFilterStore");return this.filters=n.data,this.filters}catch(n){throw this.error="Erreur lors du chargement des filtres",e.error("Impossible de charger les filtres de carte"),console.error("[MapFilterStore] Erreur lors du chargement des filtres:",n),n}finally{this.loading=!1,t()}},async createFilter(t){const e=this.performanceMonitor.startMeasure("createFilter","MapFilterStore");this.loading=!0,this.error=null;try{const n=await this.performanceMonitor.measureAsync("createFilter_apiCall",()=>_0.createFilter(t),"MapFilterStore");return this.filters.push(n.data),console.log("[MapFilterStore] Filtre cr avec succs:",n.data),n.data}catch(n){throw this.error="Erreur lors de la cration du filtre",console.error("[MapFilterStore] Erreur lors de la cration du filtre:",n),n}finally{this.loading=!1,e()}},async updateFilter(t,e){const n=this.performanceMonitor.startMeasure("updateFilter","MapFilterStore");this.loading=!0,this.error=null;try{const r=await this.performanceMonitor.measureAsync("updateFilter_apiCall",()=>_0.updateFilter(t,e),"MapFilterStore"),i=this.filters.findIndex(s=>s.id===t);return i!==-1&&(this.filters[i]=r.data),console.log("[MapFilterStore] Filtre mis  jour avec succs:",r.data),r.data}catch(r){throw this.error="Erreur lors de la mise  jour du filtre",console.error("[MapFilterStore] Erreur lors de la mise  jour du filtre:",r),r}finally{this.loading=!1,n()}},async deleteFilter(t){const e=this.performanceMonitor.startMeasure("deleteFilter","MapFilterStore");this.loading=!0,this.error=null;try{return await this.performanceMonitor.measureAsync("deleteFilter_apiCall",()=>_0.deleteFilter(t),"MapFilterStore"),this.filters=this.filters.filter(n=>n.id!==t),console.log("[MapFilterStore] Filtre supprim avec succs:",t),!0}catch(n){throw this.error="Erreur lors de la suppression du filtre",console.error("[MapFilterStore] Erreur lors de la suppression du filtre:",n),n}finally{this.loading=!1,e()}}}}),Vy=jp("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[],performanceMonitor:Vp()}),getters:{getPlanById:t=>e=>t.plans.find(n=>n.id===e),hasUnsavedChanges:t=>t.unsavedChanges,getCurrentPlanHistory:t=>t.planHistory},actions:{async fetchPlans(){var n,r;const t=this.performanceMonitor.startMeasure("fetchPlans","IrrigationStore"),e=da();this.loading=!0;try{let i="/plans/";const s={};e.isSalarie?s.salarie=(n=e.user)==null?void 0:n.id:e.isVisiteur&&(s.visiteur=(r=e.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlans_apiCall",()=>zn.get(i,{params:s}),"IrrigationStore");this.plans=o.data}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,t()}},async fetchPlansWithDetails(){var n,r;const t=this.performanceMonitor.startMeasure("fetchPlansWithDetails","IrrigationStore"),e=da();this.loading=!0;try{let i="/plans/";const s={include_details:!0};e.isSalarie?s.salarie=(n=e.user)==null?void 0:n.id:e.isVisiteur&&(s.visiteur=(r=e.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlansWithDetails_apiCall",()=>zn.get(i,{params:s}),"IrrigationStore"),a=this.performanceMonitor.measure("fetchPlansWithDetails_processResponse",()=>o.data.map(l=>({...l,entreprise:typeof l.entreprise=="object"?l.entreprise:null,salarie:typeof l.salarie=="object"?l.salarie:null,visiteur:typeof l.visiteur=="object"?l.visiteur:null})),"IrrigationStore");return this.plans=a,{data:a}}catch(i){throw console.error("[IrrigationStore] Error fetching plans:",i),this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,t()}},async fetchClientPlans(t){this.loading=!0;try{return(await b0.getVisiteurPlans(t)).data}catch(e){throw this.error="Erreur lors du chargement des plans du client",e}finally{this.loading=!1}},async createPlan(t){var r;const e=this.performanceMonitor.startMeasure("createPlan","IrrigationStore");this.clearCurrentPlan(),this.loading=!0;const n=tu();try{const i=da();((r=i.user)==null?void 0:r.user_type)==="visiteur"&&(t={...t,visiteur:i.user.id,salarie_id:i.user.enterprise_id,entreprise_id:i.user.enterprise_id});const s=this.performanceMonitor.measure("createPlan_formatData",()=>({...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&t.entreprise&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&t.salarie&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&t.visiteur&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null}),"IrrigationStore"),o=await this.performanceMonitor.measureAsync("createPlan_apiCall",()=>b0.createPlan(s),"IrrigationStore");return this.plans.push(o.data),n.success(`Le plan "${o.data.nom}" a t cr avec succs`),o.data}catch(i){const s=i instanceof Error?i.message:String(i);throw console.error("Error creating plan:",s),this.error=s,n.error(`Erreur lors de la cration du plan : ${s}`),i}finally{this.loading=!1,e()}},async createPlanForClient(t,e){this.clearCurrentPlan(),this.loading=!0;try{const n={...t,visiteur:e},r=await b0.createPlanForVisiteur(n);return this.plans.push(r.data),r.data}catch(n){const r=n instanceof Error?n.message:String(n);throw console.error("Error creating plan for client:",r),this.error="Erreur lors de la cration du plan pour le client",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(t){const e=this.performanceMonitor.startMeasure("savePlan","IrrigationStore");if(!this.unsavedChanges){console.log("[IrrigationStore][savePlan] Aucun changement  sauvegarder"),e();return}this.loading=!0;try{const n=await this.performanceMonitor.measureAsync("savePlan_apiCall",()=>{var r;return zn.patch(`/plans/${t}/`,{...this.currentPlan,version:((r=this.currentPlan)==null?void 0:r.version)||1})},"IrrigationStore");return this.performanceMonitor.measure("savePlan_updateState",()=>{var i;const r=this.plans.findIndex(s=>s.id===t);r!==-1&&(this.plans[r]=n.data),((i=this.currentPlan)==null?void 0:i.id)===t&&(this.currentPlan=n.data)},"IrrigationStore"),this.unsavedChanges=!1,n.data}catch(n){throw console.error("[IrrigationStore][savePlan] ERREUR:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1,e()}},async updatePlanDetails(t,e){const n=this.performanceMonitor.startMeasure("updatePlanDetails","IrrigationStore"),r=tu();try{const i=await this.performanceMonitor.measureAsync("updatePlanDetails_apiCall",()=>{const{visiteur_id:s,salarie_id:o,entreprise_id:a,...l}=e,c={...l};return s!==void 0&&(c.visiteur_id=s),o!==void 0&&(c.salarie_id=o),a!==void 0&&(c.entreprise_id=a),zn.patch(`/plans/${t}/`,c)},"IrrigationStore");return this.performanceMonitor.measure("updatePlanDetails_updateState",()=>{this.currentPlan&&this.currentPlan.id===t&&(this.currentPlan={...this.currentPlan,...i.data});const s=this.plans.findIndex(o=>o.id===t);s!==-1&&(this.plans[s]={...this.plans[s],...i.data})},"IrrigationStore"),i.data}catch(i){throw console.error("Erreur lors de la mise  jour du plan:",i),r.error(`Erreur lors de la mise  jour du plan : ${i instanceof Error?i.message:String(i)}`),i}finally{n()}},async fetchPlanHistory(t){this.loading=!0;try{const e=await zn.get(`/plans/${t}/historique/`);return this.planHistory=e.data,e.data}catch(e){throw this.error="Erreur lors de la rcupration de l'historique",e}finally{this.loading=!1}},async restorePlanVersion(t,e){var n;this.loading=!0;try{const r=await zn.post(`/plans/${t}/restaurer/`,{version_id:e});((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=r.data);const i=this.plans.findIndex(s=>s.id===t);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(t){this.currentPlan=t,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(t){var n;this.loading=!0;const e=tu();try{const r=this.plans.find(i=>i.id===t);await b0.deletePlan(t),this.plans=this.plans.filter(i=>i.id!==t),((n=this.currentPlan)==null?void 0:n.id)===t&&this.clearCurrentPlan(),e.success(`Le plan "${(r==null?void 0:r.nom)||""}" a t supprim avec succs`)}catch(r){throw this.error="Erreur lors de la suppression du plan",e.error(`Erreur lors de la suppression du plan : ${r instanceof Error?r.message:String(r)}`),r}finally{this.loading=!1}}}}),Ez={class:"hidden md:hidden flex-mobile items-center justify-between p-4 border-b border-gray-200"},Pz={class:"flex-1 overflow-y-auto"},Mz={class:"border-b border-gray-200"},kz={class:"flex -mb-px"},Az={class:"flex-1 overflow-y-auto"},Tz={key:0,class:"p-3"},Dz={class:"grid grid-cols-4 gap-1.5 mb-4"},Oz=["onClick","title"],Nz=["innerHTML"],Iz={key:1,class:"my-4 border-t border-gray-200"},Bz={key:2,class:"mt-4"},Rz={key:0,class:"mb-4"},Fz={class:"mb-4"},jz={class:"mb-4"},zz={class:"grid grid-cols-1 gap-4"},$z={key:0,class:"space-y-1"},Vz={class:"flex justify-between items-center"},Uz={class:"text-sm font-medium text-gray-500"},Hz={class:"flex justify-between items-center"},Wz={class:"text-sm font-medium text-gray-500"},Gz={class:"text-sm font-medium text-gray-500"},qz={class:"flex flex-col space-y-2 w-full"},Yz={class:"flex justify-between items-center"},Kz={class:"text-sm font-medium text-gray-500 ml-2"},Zz={class:"flex justify-between items-center"},Xz={class:"text-sm font-medium text-gray-500 ml-2"},Jz={class:"flex justify-between items-center"},Qz={class:"text-sm font-medium text-gray-500 ml-2"},e$={class:"flex justify-between items-center"},t$={class:"text-sm font-medium text-gray-500 ml-2"},n$={class:"flex justify-between items-center"},r$={class:"text-sm font-medium text-gray-500 ml-2"},i$={ref:"elevationProfileContainer",class:"elevation-profile-container w-full h-48 bg-gray-50 rounded border border-gray-200 relative mt-4"},s$={ref:"elevationCanvas"},o$={key:1,class:"p-3"},a$={class:"grid grid-cols-6 gap-2 mb-4"},l$=["onClick","title"],u$={key:0,class:"space-y-4"},c$={class:"flex items-center gap-4"},h$={class:"flex items-center gap-2"},d$={class:"flex items-center gap-4"},f$=["value"],p$={key:0,class:"flex items-center gap-4"},g$={class:"flex items-center gap-2"},m$={key:1,class:"space-y-4"},v$={class:"flex items-center gap-4"},y$={class:"flex items-center gap-2"},b$={class:"flex items-center gap-4"},_$={class:"flex items-center gap-2"},w$={key:2,class:"p-3 space-y-4"},x$={class:"space-y-2"},L$={class:"space-y-2"},S$={class:"space-y-1"},C$={class:"flex items-center"},E$={class:"flex items-center"},P$={class:"flex items-center"},M$={class:"flex items-center"},k$={class:"flex items-center"},A$={class:"flex items-center"},T$={key:0,class:"flex items-center"},D$=["onUpdate:modelValue"],O$={class:"ml-2 text-sm text-gray-700"},N$={key:0,class:"mt-2 pt-2 border-t border-gray-200"},I$={class:"flex space-x-2"},B$=["disabled"],R$={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},F$={key:1,class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},j$={class:"space-y-2"},z$={class:"space-y-1"},$$={class:"flex items-center"},V$={class:"flex items-center"},U$={class:"flex items-center"},H$={class:"flex items-center"},W$={key:0,class:"p-3 border-t border-gray-200"},G$={class:"mt-3"},q$={class:"mb-4"},Y$={class:"grid grid-cols-2 gap-2"},K$={class:"grid grid-cols-2 gap-2"},Z$=Fs({__name:"DrawingTools",props:{show:{type:Boolean,default:!1},selectedTool:{type:String,default:""},selectedShape:{type:Object,default:null},allLayers:{type:Array,default:()=>[]},isDrawing:{type:Boolean,default:!1}},emits:["update:show","tool-selected","style-update","properties-update","delete-shape","filter-change","close-drawer"],setup(t,{emit:e}){const n=t,r=Tp(),i=da(),s=Kn(()=>i.isAdmin),o=Kn(()=>i.isEntreprise),a=Cz(),l=Vy(),c=nu({name:""}),d=xt(!1),p=xt(["forages","clients","entrepots","livraisons","cultures","parcelles"]),v=[{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"ElevationLine",label:"Profil altimtrique"},{type:"Note",label:"Note golocalise"}],m=Ce=>{switch(Ce){case"Polygon":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5l16 0l0 14l-16 0l0 -14z"/></svg>';case"Line":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20l16 -16"/></svg>';case"ElevationLine":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 20h18l-3-3l-4 4l-4-7l-4 4l-3-3"/></svg>';case"Note":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 2l4 4m-6 0l2-2 4 4-2 2-4-4z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h8" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14h4" /></svg>';default:return""}},x=xt("tools");Di(()=>n.selectedTool,(Ce,de)=>{console.log("[DrawingTools][watch selectedTool] Changement d'outil:",{newTool:Ce,oldTool:de})}),Di(x,(Ce,de)=>{console.log("[DrawingTools][watch activeTab] Changement d'onglet:",{newTab:Ce,oldTab:de}),Ce==="filters"&&de!=="filters"&&(console.log("[DrawingTools][watch activeTab] Passage  l'onglet filtres"),console.log("[DrawingTools][watch activeTab] tat actuel des filtres dans le store:",JSON.stringify({accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}},null,2)),console.log("[DrawingTools][watch activeTab] tat actuel des filtres locaux:",JSON.stringify({accessLevels:{...R.accessLevels},categories:{...R.categories},shapeTypes:{...R.shapeTypes}},null,2)),n.selectedShape&&(console.log("[DrawingTools][watch activeTab] Dslection de la forme actuelle lors du passage  l'onglet filtres"),ie("tool-selected","")),setTimeout(()=>{ee()},0)),de==="filters"&&Ce!=="filters"&&(console.log("[DrawingTools][watch activeTab] Sortie de l'onglet filtres, application des changements"),console.log("[DrawingTools][watch activeTab] tat des filtres locaux avant application:",JSON.stringify({accessLevels:{...R.accessLevels},categories:{...R.categories},shapeTypes:{...R.shapeTypes}},null,2)),ee())});const E=xt({samplePoints:!0,circleSections:!0}),M=xt("#2b6451"),A=xt(2),O=xt("solid"),z=xt("#2b6451"),K=xt(.2),ne=xt(!0),me=xt(""),pe=xt("default"),N=xt("visitor"),j=xt({radius:4,color:"#2b6451",fillOpacity:.6,weight:2}),q=xt({radius:6,color:"#EF4444",fillOpacity:.8,weight:2}),I=["#2b6451","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],B=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointills"}],$=xt("company"),R=nu({accessLevels:{company:!0,employee:!1,visitor:!1},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}),U=Ce=>{console.log(`[DrawingTools][updateAccessLevelFilter] Changement du niveau d'accs: ${Ce}`),$.value=Ce,Ce==="company"?(R.accessLevels.company=!0,R.accessLevels.employee=!1,R.accessLevels.visitor=!1):Ce==="employee"?(R.accessLevels.company=!1,R.accessLevels.employee=!0,R.accessLevels.visitor=!1):Ce==="visitor"&&(R.accessLevels.company=!1,R.accessLevels.employee=!1,R.accessLevels.visitor=!0),ee()},V=Ce=>{console.log(`[DrawingTools][updateAccessLevelFilterAndDeselect] Changement du niveau d'accs: ${Ce}`),n.selectedShape&&(console.log("[DrawingTools][updateAccessLevelFilterAndDeselect] Dslection de la forme actuelle"),ie("tool-selected","")),U(Ce)};console.log("[DrawingTools] Initialisation des filtres:",JSON.stringify({local:{accessLevels:{...R.accessLevels},categories:{...R.categories},shapeTypes:{...R.shapeTypes}},store:{accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}}},null,2));const re=Kn(()=>n.selectedShape&&n.selectedShape.properties||null),J=Ce=>{E.value[Ce]=!E.value[Ce]},_e=Ce=>{M.value=Ce,z.value=Ce,Le({strokeColor:Ce,fillColor:Ce})},Le=Ce=>{n.selectedShape&&ie("style-update",Ce)},Oe=()=>{n.selectedShape&&ie("properties-update",{name:me.value})},Z=()=>{n.selectedShape&&ie("properties-update",{category:pe.value})},G=()=>{n.selectedShape&&ie("properties-update",{accessLevel:N.value})},se=()=>{var Ce;!n.selectedShape||((Ce=re.value)==null?void 0:Ce.type)!=="ElevationLine"||ie("style-update",{samplePointStyle:j.value})},ce=()=>{var Ce;!n.selectedShape||((Ce=re.value)==null?void 0:Ce.type)!=="ElevationLine"||ie("style-update",{minMaxPointStyle:q.value})},he=()=>{console.log("[DrawingTools][resetFilters] Dbut de la rinitialisation des filtres"),console.log("[DrawingTools][resetFilters] tat actuel des filtres:",JSON.stringify({accessLevels:{...R.accessLevels},categories:{...R.categories},shapeTypes:{...R.shapeTypes}},null,2));const Ce={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}};console.log("[DrawingTools][resetFilters] Nouveaux filtres  appliquer:",JSON.stringify(Ce,null,2)),console.log("[DrawingTools][resetFilters] Mise  jour des filtres locaux"),R.accessLevels.company=!0,R.accessLevels.employee=!0,R.accessLevels.visitor=!0,R.categories.forages=!0,R.categories.clients=!0,R.categories.entrepots=!0,R.categories.livraisons=!0,R.categories.cultures=!0,R.categories.parcelles=!0,R.shapeTypes.Polygon=!0,R.shapeTypes.Line=!0,R.shapeTypes.ElevationLine=!0,R.shapeTypes.Note=!0,console.log("[DrawingTools][resetFilters] Filtres locaux aprs mise  jour:",JSON.stringify({accessLevels:{...R.accessLevels},categories:{...R.categories},shapeTypes:{...R.shapeTypes}},null,2)),console.log("[DrawingTools][resetFilters] Mise  jour des filtres dans le store"),r.updateFilters(Ce),console.log("[DrawingTools][resetFilters] mission de l'event filter-change"),ie("filter-change",Ce),console.log("[DrawingTools][resetFilters] Mise  jour force de l'affichage"),console.log("[DrawingTools][resetFilters] Filtres rinitialiss avec succs")},ve=()=>{console.log("[DrawingTools][resetFiltersAndDeselect] Dbut de la rinitialisation des filtres avec dslection"),qe(),he(),console.log("[DrawingTools][resetFiltersAndDeselect] Filtres rinitialiss et forme dslectionne avec succs")},ee=()=>{const Ce={...R.accessLevels},de={...R.categories},Xe={...R.shapeTypes};console.log("[DrawingTools][applyFilters] Application des filtres:",JSON.stringify({accessLevels:Ce,categories:de,shapeTypes:Xe},null,2));const Ie={accessLevels:Ce,categories:de,shapeTypes:Xe};console.log("[DrawingTools][applyFilters] Envoi des filtres au store:",JSON.stringify(Ie,null,2)),r.updateFilters(Ie),console.log("[DrawingTools][applyFilters] mission de l'event filter-change"),ie("filter-change",Ie),setTimeout(()=>{console.log("[DrawingTools][applyFilters] Mise  jour force de l'affichage"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:Ie}}))},0),console.log("[DrawingTools][applyFilters] Filtres appliqus avec succs")},X=Ce=>`${Math.round(Ce)} m`,De=Ce=>Ce>=1e4?`${(Ce/1e4).toFixed(2)} ha`:`${Math.round(Ce)} m`,Te=Ce=>`${Ce.toFixed(1)}%`,qe=()=>{n.selectedShape&&(console.log("[DrawingTools][deselectCurrentShape] Dslection de la forme actuelle"),ie("tool-selected",""))};async function ge(){var Ce,de;if(!(!c.name||d.value)){d.value=!0;try{const Xe=c.name.toLowerCase().replace(/\s+/g,"_"),Ie=l.currentPlan;let Ye=null;if(Ie!=null&&Ie.entreprise_id?Ye=Ie.entreprise_id:Ie!=null&&Ie.entreprise&&typeof Ie.entreprise=="object"&&"id"in Ie.entreprise?Ye=Ie.entreprise.id:(Ce=i.user)!=null&&Ce.enterprise_id?Ye=i.user.enterprise_id:i.isEntreprise&&((de=i.user)!=null&&de.id)&&(Ye=i.user.id),!Ye){console.error("[DrawingTools] Impossible de crer un filtre: ID d'entreprise non disponible");return}console.log("[DrawingTools] Cration d'un filtre pour l'entreprise:",Ye),await a.createFilter({name:c.name,category:Xe,entreprise:Ye}),R.categories[Xe]||(R.categories[Xe]=!0,ie("filter-change",R)),c.name=""}catch(Xe){console.error("[DrawingTools] Erreur lors de la cration du filtre:",Xe)}finally{d.value=!1}}}const Q=()=>{qe(),x.value="filters"},ie=e;dm(()=>{var Ce,de,Xe,Ie,Ye,Je,Ge;if(n.selectedShape){console.log("[DrawingTools][watchEffect] Mise  jour des proprits pour la forme slectionne:",{type:n.selectedShape.type,properties:n.selectedShape.properties,options:n.selectedShape.options,layer:(Ce=n.selectedShape.layer)==null?void 0:Ce._leaflet_id});const wt=n.selectedShape.options||{};M.value=wt.color||"#2b6451",A.value=wt.weight||3,O.value=wt.dashArray?"dashed":"solid",z.value=wt.fillColor||"#2b6451",K.value=wt.fillOpacity||.2;const Ct=n.selectedShape.type||((de=n.selectedShape.properties)==null?void 0:de.type)||"";ne.value=Ct!=="Line",console.log("[DrawingTools][watchEffect] Type de forme dtect:",Ct),me.value=((Xe=n.selectedShape.properties)==null?void 0:Xe.name)||"",pe.value=((Ie=n.selectedShape.properties)==null?void 0:Ie.category)||"forages",N.value=((Ye=n.selectedShape.properties)==null?void 0:Ye.accessLevel)||"visitor",Ct==="ElevationLine"&&((Je=n.selectedShape.properties)!=null&&Je.samplePointStyle&&(j.value={...n.selectedShape.properties.samplePointStyle}),(Ge=n.selectedShape.properties)!=null&&Ge.minMaxPointStyle&&(q.value={...n.selectedShape.properties.minMaxPointStyle})),console.log("[DrawingTools][watchEffect] Proprits mises  jour avec succs")}}),fo(()=>{console.log("[DrawingTools][onMounted] Initialisation des filtres depuis le store");const Ce=r.filters;console.log("[DrawingTools][onMounted] Filtres du store:",JSON.stringify({accessLevels:{...Ce.accessLevels},categories:{...Ce.categories},shapeTypes:{...Ce.shapeTypes}},null,2)),R.accessLevels.company=Ce.accessLevels.company,R.accessLevels.employee=Ce.accessLevels.employee,R.accessLevels.visitor=Ce.accessLevels.visitor,R.categories.forages=Ce.categories.forages,R.categories.clients=Ce.categories.clients,R.categories.entrepots=Ce.categories.entrepots,R.categories.livraisons=Ce.categories.livraisons,R.categories.cultures=Ce.categories.cultures,R.categories.parcelles=Ce.categories.parcelles,R.shapeTypes.Polygon=Ce.shapeTypes.Polygon,R.shapeTypes.Line=Ce.shapeTypes.Line,R.shapeTypes.ElevationLine=Ce.shapeTypes.ElevationLine,R.shapeTypes.Note=Ce.shapeTypes.Note,console.log("[DrawingTools][onMounted] Filtres locaux aprs initialisation:",JSON.stringify({accessLevels:{...R.accessLevels},categories:{...R.categories},shapeTypes:{...R.shapeTypes}},null,2))}),Di(R,(Ce,de)=>{console.log("[DrawingTools][watch filters] Changement dtect:",{activeTab:x.value,newFilters:JSON.stringify({accessLevels:Ce.accessLevels,categories:Ce.categories,shapeTypes:Ce.shapeTypes}),oldFilters:JSON.stringify({accessLevels:de.accessLevels,categories:de.categories,shapeTypes:de.shapeTypes})});const Xe=Object.keys(Ce.accessLevels).filter(Ge=>de.accessLevels[Ge]!==Ce.accessLevels[Ge]),Ie=Object.keys(Ce.categories).filter(Ge=>de.categories[Ge]!==Ce.categories[Ge]),Ye=Object.keys(Ce.shapeTypes).filter(Ge=>de.shapeTypes[Ge]!==Ce.shapeTypes[Ge]),Je=Xe.length>0||Ie.length>0||Ye.length>0;console.log("[DrawingTools][watch filters] Diffrences dtectes:",{accessLevelsDiff:Xe,categoriesDiff:Ie,shapeTypesDiff:Ye,hasChanges:Je}),x.value==="filters"?(console.log("[DrawingTools][watch filters] Onglet filtres actif, application des filtres"),ee()):console.log("[DrawingTools][watch filters] Onglet filtres non actif, pas d'application automatique")},{deep:!0});const fe=Ce=>{console.log("[DrawingTools][handleToolClick] Outil cliqu:",Ce,"Outil actuel:",n.selectedTool),ie("tool-selected",n.selectedTool===Ce?"":Ce),window.innerWidth<768&&ie("update:show",!1)};return(Ce,de)=>{var Xe,Ie,Ye,Je;return Re(),$e("div",{class:$i(["drawing-tools-panel",{open:t.show}])},[C("div",Ez,[de[47]||(de[47]=C("div",{class:"flex items-center"},[C("div",{class:"w-10 h-1.5 bg-gray-300 rounded-full mr-3"}),C("h3",{class:"text-sm font-semibold text-gray-700"},"Outils de dessin")],-1)),C("button",{onClick:de[0]||(de[0]=Ge=>Ce.$emit("update:show",!1)),class:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},de[46]||(de[46]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",Pz,[C("div",Mz,[C("nav",kz,[C("button",{onClick:de[1]||(de[1]=Ge=>x.value="tools"),class:$i([x.value==="tools"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},de[48]||(de[48]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),C("span",null,"Outils",-1)]),2),t.selectedShape&&((Xe=t.selectedShape.properties)==null?void 0:Xe.type)!=="Note"?(Re(),$e("button",{key:0,onClick:de[2]||(de[2]=Ge=>x.value="style"),class:$i([x.value==="style"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},de[49]||(de[49]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1),C("span",null,"Style",-1)]),2)):rn("",!0),C("button",{onClick:Q,class:$i([x.value==="filters"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},de[50]||(de[50]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),C("span",null,"Filtres",-1)]),2)])]),C("div",Az,[x.value==="tools"?(Re(),$e("div",Tz,[C("div",Dz,[(Re(!0),$e(Cn,null,pr(v.filter(Ge=>Ge.type!=="delete"),Ge=>(Re(),$e("button",{key:Ge.type,class:$i(["flex items-center justify-center p-2 rounded-md border transition-all duration-200",{"bg-primary-50 border-primary-500 text-primary-600":n.selectedTool===Ge.type,"hover:bg-gray-50 border-gray-300 text-gray-700":n.selectedTool!==Ge.type}]),onClick:wt=>fe(Ge.type),title:Ge.label},[C("span",{class:"icon",innerHTML:m(Ge.type)},null,8,Nz)],10,Oz))),128))]),t.selectedShape?(Re(),$e("button",{key:0,class:$i(["w-full mt-2 p-2 rounded-md border border-red-200 bg-red-50 text-red-600 hover:bg-red-100 flex items-center justify-center",{"bg-red-100":n.selectedTool==="delete"}]),onClick:de[3]||(de[3]=Ge=>Ce.$emit("delete-shape")),title:"Supprimer la forme"},de[51]||(de[51]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),C("span",{class:"text-sm"},"Supprimer",-1)]),2)):rn("",!0),t.selectedShape&&re.value?(Re(),$e("div",Iz)):rn("",!0),t.selectedShape&&re.value?(Re(),$e("div",Bz,[re.value.type!=="Note"?(Re(),$e("div",Rz,[de[52]||(de[52]=C("label",{for:"shapeName",class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de la forme",-1)),Pn(C("input",{type:"text",id:"shapeName","onUpdate:modelValue":de[4]||(de[4]=Ge=>me.value=Ge),onChange:Oe,placeholder:"Donnez un nom  cette forme",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,544),[[Rr,me.value]])])):rn("",!0),C("div",Fz,[de[54]||(de[54]=C("label",{for:"shapeCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Catgorie",-1)),Pn(C("select",{id:"shapeCategory","onUpdate:modelValue":de[5]||(de[5]=Ge=>pe.value=Ge),onChange:Z,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},de[53]||(de[53]=[Jl('<option value="forages" data-v-c4ee09be>Forages</option><option value="clients" data-v-c4ee09be>Clients</option><option value="entrepots" data-v-c4ee09be>Entrepts</option><option value="livraisons" data-v-c4ee09be>Lieux de livraison</option><option value="cultures" data-v-c4ee09be>Cultures</option><option value="parcelles" data-v-c4ee09be>Noms des parcelles</option><option value="default" data-v-c4ee09be>Autre</option>',7)]),544),[[is,pe.value]])]),C("div",jz,[de[56]||(de[56]=C("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700 mb-1"},"Niveau d'accs",-1)),de[57]||(de[57]=C("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Dfinit qui peut voir cet lment sur la carte. ",-1)),Pn(C("select",{id:"accessLevel","onUpdate:modelValue":de[6]||(de[6]=Ge=>N.value=Ge),onChange:G,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},de[55]||(de[55]=[C("option",{value:"company"},"Entreprise uniquement",-1),C("option",{value:"employee"},"Entreprise et salaris",-1),C("option",{value:"visitor"},"Tous (visiteurs inclus)",-1)]),544),[[is,N.value]])]),C("div",zz,[re.value.type==="Polygon"?(Re(),$e("div",$z,[C("div",Vz,[de[58]||(de[58]=C("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),C("span",Uz,Tt(De(re.value.surface||0)),1)]),C("div",Hz,[de[59]||(de[59]=C("span",{class:"text-sm font-semibold text-gray-700"},"Primtre :",-1)),C("span",Wz,Tt(X(re.value.perimeter||0)),1)])])):re.value.type==="Line"?(Re(),$e(Cn,{key:1},[de[60]||(de[60]=C("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),C("span",Gz,Tt(X(re.value.length||0)),1)],64)):re.value.type==="ElevationLine"?(Re(),$e(Cn,{key:2},[C("div",qz,[C("div",Yz,[de[61]||(de[61]=C("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Distance totale :",-1)),C("span",Kz,Tt(X(re.value.length||0)),1)]),C("div",Zz,[de[62]||(de[62]=C("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dnivel + :",-1)),C("span",Xz,Tt(X(re.value.elevationGain||0)),1)]),C("div",Jz,[de[63]||(de[63]=C("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dnivel - :",-1)),C("span",Qz,Tt(X(re.value.elevationLoss||0)),1)]),C("div",e$,[de[64]||(de[64]=C("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente moy. :",-1)),C("span",t$,Tt(Te(re.value.averageSlope||0)),1)]),C("div",n$,[de[65]||(de[65]=C("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente max :",-1)),C("span",r$,Tt(Te(re.value.maxSlope||0)),1)])]),C("div",i$,[C("canvas",s$,null,512)],512)],64)):rn("",!0)])])):rn("",!0)])):rn("",!0),x.value==="style"&&t.selectedShape&&((Ie=t.selectedShape.properties)==null?void 0:Ie.type)!=="Note"?(Re(),$e("div",o$,[C("div",a$,[(Re(),$e(Cn,null,pr(I,Ge=>C("button",{key:Ge,class:"w-8 h-8 rounded-full",style:Ql({backgroundColor:Ge}),onClick:wt=>_e(Ge),title:Ge},null,12,l$)),64))]),((Ye=re.value)==null?void 0:Ye.type)!=="TextRectangle"?(Re(),$e("div",u$,[C("div",c$,[de[66]||(de[66]=C("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),C("div",h$,[Pn(C("input",{type:"color","onUpdate:modelValue":de[7]||(de[7]=Ge=>M.value=Ge),class:"w-16 h-8 rounded border",onChange:de[8]||(de[8]=Ge=>Le({strokeColor:M.value})),title:"Couleur du contour"},null,544),[[Rr,M.value]]),Pn(C("input",{type:"range","onUpdate:modelValue":de[9]||(de[9]=Ge=>A.value=Ge),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:de[10]||(de[10]=Ge=>Le({strokeWidth:A.value})),title:"paisseur du contour"},null,544),[[Rr,A.value]])])]),C("div",d$,[de[67]||(de[67]=C("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),Pn(C("select",{"onUpdate:modelValue":de[11]||(de[11]=Ge=>O.value=Ge),class:"w-full rounded border",onChange:de[12]||(de[12]=Ge=>Le({strokeStyle:O.value}))},[(Re(),$e(Cn,null,pr(B,Ge=>C("option",{key:Ge.value,value:Ge.value},Tt(Ge.label),9,f$)),64))],544),[[is,O.value]])]),ne.value?(Re(),$e("div",p$,[de[68]||(de[68]=C("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),C("div",g$,[Pn(C("input",{type:"color","onUpdate:modelValue":de[13]||(de[13]=Ge=>z.value=Ge),class:"w-16 h-8 rounded border",onChange:de[14]||(de[14]=Ge=>Le({fillColor:z.value})),title:"Couleur de remplissage"},null,544),[[Rr,z.value]]),Pn(C("input",{type:"range","onUpdate:modelValue":de[15]||(de[15]=Ge=>K.value=Ge),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:de[16]||(de[16]=Ge=>Le({fillOpacity:K.value})),title:"Opacit du remplissage"},null,544),[[Rr,K.value]])])])):rn("",!0)])):rn("",!0),((Je=re.value)==null?void 0:Je.type)==="TextRectangle"?(Re(),$e("div",m$,[C("div",v$,[de[69]||(de[69]=C("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),C("div",y$,[Pn(C("input",{type:"color","onUpdate:modelValue":de[17]||(de[17]=Ge=>M.value=Ge),class:"w-16 h-8 rounded border",onChange:de[18]||(de[18]=Ge=>Le({strokeColor:M.value})),title:"Couleur du contour"},null,544),[[Rr,M.value]]),Pn(C("input",{type:"range","onUpdate:modelValue":de[19]||(de[19]=Ge=>A.value=Ge),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:de[20]||(de[20]=Ge=>Le({strokeWidth:A.value})),title:"paisseur du contour"},null,544),[[Rr,A.value]])])]),C("div",b$,[de[70]||(de[70]=C("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),C("div",_$,[Pn(C("input",{type:"color","onUpdate:modelValue":de[21]||(de[21]=Ge=>z.value=Ge),class:"w-16 h-8 rounded border",onChange:de[22]||(de[22]=Ge=>Le({fillColor:z.value})),title:"Couleur de remplissage"},null,544),[[Rr,z.value]]),Pn(C("input",{type:"range","onUpdate:modelValue":de[23]||(de[23]=Ge=>K.value=Ge),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:de[24]||(de[24]=Ge=>Le({fillOpacity:K.value})),title:"Opacit du remplissage"},null,544),[[Rr,K.value]])])])])):rn("",!0)])):rn("",!0),x.value==="filters"?(Re(),$e("div",w$,[C("div",x$,[de[73]||(de[73]=C("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Niveau d'accs",-1)),de[74]||(de[74]=C("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Slectionnez votre niveau d'accs pour filtrer les lments visibles sur la carte. ",-1)),C("div",null,[Pn(C("select",{"onUpdate:modelValue":de[25]||(de[25]=Ge=>$.value=Ge),onChange:de[26]||(de[26]=Ge=>V($.value)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm"},de[71]||(de[71]=[C("option",{value:"company"},"Entreprise (accs  tout)",-1),C("option",{value:"employee"},"Salaris (accs niveau salaris et visiteurs)",-1),C("option",{value:"visitor"},"Visiteurs (accs niveau visiteurs uniquement)",-1)]),544),[[is,$.value]]),de[72]||(de[72]=C("div",{class:"mt-2 text-xs text-gray-500"},[C("p",null,[C("strong",null,"Entreprise"),si(" : Vous verrez tous les lments (entreprise, salaris, visiteurs)")]),C("p",null,[C("strong",null,"Salaris"),si(" : Vous verrez les lments pour salaris et visiteurs")]),C("p",null,[C("strong",null,"Visiteurs"),si(" : Vous ne verrez que les lments pour visiteurs")])],-1))])]),C("div",L$,[de[83]||(de[83]=C("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"lments",-1)),C("div",S$,[C("label",C$,[Pn(C("input",{type:"checkbox","onUpdate:modelValue":de[27]||(de[27]=Ge=>R.categories.forages=Ge),onChange:qe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[El,R.categories.forages]]),de[75]||(de[75]=C("span",{class:"ml-2 text-sm text-gray-700"},"Forages",-1))]),C("label",E$,[Pn(C("input",{type:"checkbox","onUpdate:modelValue":de[28]||(de[28]=Ge=>R.categories.clients=Ge),onChange:qe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[El,R.categories.clients]]),de[76]||(de[76]=C("span",{class:"ml-2 text-sm text-gray-700"},"Clients",-1))]),C("label",P$,[Pn(C("input",{type:"checkbox","onUpdate:modelValue":de[29]||(de[29]=Ge=>R.categories.entrepots=Ge),onChange:qe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[El,R.categories.entrepots]]),de[77]||(de[77]=C("span",{class:"ml-2 text-sm text-gray-700"},"Entrepts",-1))]),C("label",M$,[Pn(C("input",{type:"checkbox","onUpdate:modelValue":de[30]||(de[30]=Ge=>R.categories.livraisons=Ge),onChange:qe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[El,R.categories.livraisons]]),de[78]||(de[78]=C("span",{class:"ml-2 text-sm text-gray-700"},"Lieux de livraison",-1))]),C("label",k$,[Pn(C("input",{type:"checkbox","onUpdate:modelValue":de[31]||(de[31]=Ge=>R.categories.cultures=Ge),onChange:qe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[El,R.categories.cultures]]),de[79]||(de[79]=C("span",{class:"ml-2 text-sm text-gray-700"},"Cultures",-1))]),C("label",A$,[Pn(C("input",{type:"checkbox","onUpdate:modelValue":de[32]||(de[32]=Ge=>R.categories.parcelles=Ge),onChange:qe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[El,R.categories.parcelles]]),de[80]||(de[80]=C("span",{class:"ml-2 text-sm text-gray-700"},"Noms des parcelles",-1))]),(Re(!0),$e(Cn,null,pr(R.categories,(Ge,wt)=>(Re(),$e(Cn,{key:wt},[p.value.includes(String(wt))?rn("",!0):(Re(),$e("label",T$,[Pn(C("input",{type:"checkbox","onUpdate:modelValue":Ct=>R.categories[wt]=Ct,onChange:qe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,40,D$),[[El,R.categories[wt]]]),C("span",O$,Tt(wt),1)]))],64))),128)),s.value||o.value?(Re(),$e("div",N$,[C("div",I$,[Pn(C("input",{type:"text","onUpdate:modelValue":de[33]||(de[33]=Ge=>c.name=Ge),placeholder:"Nouveau filtre...",class:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-primary-500 focus:border-primary-500"},null,512),[[Rr,c.name]]),C("button",{onClick:ge,disabled:!c.name||d.value,class:"px-2 py-1 bg-primary-600 text-white text-sm rounded hover:bg-primary-700 transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"},[d.value?(Re(),$e("svg",F$,de[82]||(de[82]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Re(),$e("svg",R$,de[81]||(de[81]=[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1)])))],8,B$)])])):rn("",!0)])]),C("div",j$,[de[88]||(de[88]=C("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Types de formes",-1)),C("div",z$,[C("label",$$,[Pn(C("input",{type:"checkbox","onUpdate:modelValue":de[34]||(de[34]=Ge=>R.shapeTypes.Polygon=Ge),onChange:qe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[El,R.shapeTypes.Polygon]]),de[84]||(de[84]=C("span",{class:"ml-2 text-sm text-gray-700"},"Polygones",-1))]),C("label",V$,[Pn(C("input",{type:"checkbox","onUpdate:modelValue":de[35]||(de[35]=Ge=>R.shapeTypes.Line=Ge),onChange:qe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[El,R.shapeTypes.Line]]),de[85]||(de[85]=C("span",{class:"ml-2 text-sm text-gray-700"},"Lignes",-1))]),C("label",U$,[Pn(C("input",{type:"checkbox","onUpdate:modelValue":de[36]||(de[36]=Ge=>R.shapeTypes.ElevationLine=Ge),onChange:qe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[El,R.shapeTypes.ElevationLine]]),de[86]||(de[86]=C("span",{class:"ml-2 text-sm text-gray-700"},"Profils altimtriques",-1))]),C("label",H$,[Pn(C("input",{type:"checkbox","onUpdate:modelValue":de[37]||(de[37]=Ge=>R.shapeTypes.Note=Ge),onChange:qe,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[El,R.shapeTypes.Note]]),de[87]||(de[87]=C("span",{class:"ml-2 text-sm text-gray-700"},"Notes",-1))])])]),C("div",{class:"pt-2"},[C("button",{onClick:ve,class:"w-full px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200 transition-colors"}," Rinitialiser ")])])):rn("",!0)])]),t.selectedShape&&re.value&&re.value.type==="ElevationLine"?(Re(),$e("div",W$,[C("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:de[38]||(de[38]=Ge=>J("samplePoints"))},[de[90]||(de[90]=C("span",null,"Points d'chantillonnage",-1)),(Re(),$e("svg",{class:$i(["w-4 h-4",{"rotate-180":!E.value.samplePoints}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},de[89]||(de[89]=[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),Pn(C("div",G$,[C("div",q$,[de[95]||(de[95]=C("h4",{class:"text-sm font-semibold mb-2"},"Points normaux",-1)),C("div",Y$,[C("div",null,[de[91]||(de[91]=C("label",{class:"text-xs text-gray-600"},"Taille",-1)),Pn(C("input",{type:"number","onUpdate:modelValue":de[39]||(de[39]=Ge=>j.value.radius=Ge),min:"2",max:"10",step:"1",class:"w-full px-2 py-1 border rounded",onChange:se},null,544),[[Rr,j.value.radius]])]),C("div",null,[de[92]||(de[92]=C("label",{class:"text-xs text-gray-600"},"Couleur",-1)),Pn(C("input",{type:"color","onUpdate:modelValue":de[40]||(de[40]=Ge=>j.value.color=Ge),class:"w-full h-8 px-1 border rounded",onChange:se},null,544),[[Rr,j.value.color]])]),C("div",null,[de[93]||(de[93]=C("label",{class:"text-xs text-gray-600"},"Opacit",-1)),Pn(C("input",{type:"range","onUpdate:modelValue":de[41]||(de[41]=Ge=>j.value.fillOpacity=Ge),min:"0",max:"1",step:"0.1",class:"w-full",onChange:se},null,544),[[Rr,j.value.fillOpacity]])]),C("div",null,[de[94]||(de[94]=C("label",{class:"text-xs text-gray-600"},"Bordure",-1)),Pn(C("input",{type:"number","onUpdate:modelValue":de[42]||(de[42]=Ge=>j.value.weight=Ge),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:se},null,544),[[Rr,j.value.weight]])])])]),C("div",null,[de[99]||(de[99]=C("h4",{class:"text-sm font-semibold mb-2"},"Points min/max",-1)),C("div",K$,[C("div",null,[de[96]||(de[96]=C("label",{class:"text-xs text-gray-600"},"Taille",-1)),Pn(C("input",{type:"number","onUpdate:modelValue":de[43]||(de[43]=Ge=>q.value.radius=Ge),min:"4",max:"12",step:"1",class:"w-full px-2 py-1 border rounded",onChange:ce},null,544),[[Rr,q.value.radius]])]),C("div",null,[de[97]||(de[97]=C("label",{class:"text-xs text-gray-600"},"Bordure",-1)),Pn(C("input",{type:"number","onUpdate:modelValue":de[44]||(de[44]=Ge=>q.value.weight=Ge),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:ce},null,544),[[Rr,q.value.weight]])]),C("div",null,[de[98]||(de[98]=C("label",{class:"text-xs text-gray-600"},"Opacit",-1)),Pn(C("input",{type:"range","onUpdate:modelValue":de[45]||(de[45]=Ge=>q.value.fillOpacity=Ge),min:"0",max:"1",step:"0.1",class:"w-full",onChange:ce},null,544),[[Rr,q.value.fillOpacity]])])])])],512),[[Ay,!E.value.samplePoints]])])):rn("",!0)],2)}}}),X$=jh(Z$,[["__scopeId","data-v-c4ee09be"]]),J$={class:"map-toolbar w-full"},Q$={class:"hidden md:flex items-center space-x-2"},eV={class:"dropdown"},tV={class:"dropdown-menu"},nV=["onClick"],rV={key:0,class:"border-l pl-2 flex-1"},iV={class:"flex items-center"},sV={class:"plan-info"},oV={class:"plan-name"},aV={key:0,class:"plan-description"},lV={class:"border-l pl-2 ml-auto"},uV={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},cV={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},hV={key:"saving"},dV={key:"success",class:"save-success-text"},fV={key:"default"},pV={class:"md:hidden"},gV={class:"flex justify-between items-center"},mV={key:0,class:"truncate mx-2 text-sm font-medium"},vV={key:0,class:"mobile-menu mt-0 bg-white shadow-lg p-4 z-[1900] fixed left-0 right-0 w-full"},yV={class:"flex justify-between items-center mb-3 border-b pb-2"},bV={class:"flex flex-col space-y-4"},_V={key:0,class:"flex flex-col pb-3 border-b"},wV={class:"text-sm font-semibold text-gray-800"},xV={key:0,class:"text-xs text-gray-600 mt-1"},LV={class:"flex flex-col"},SV={class:"grid grid-cols-3 gap-2"},CV=["onClick"],EV={key:0,class:"animate-spin h-4 w-4 mr-2 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},PV={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},MV={key:"saving"},kV={key:"success",class:"save-success-text"},AV={key:"default"},TV=Fs({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view","generate-summary"],setup(t,{emit:e}){const n=e,r=t,i=xt("Hybride"),s=xt(!1),o=M=>{const A=M.currentTarget,O=A.nextElementSibling;if(O&&O.classList.contains("dropdown-menu")){const z=A.getBoundingClientRect();O.style.top=`${z.bottom}px`,O.style.left=`${z.left}px`}},a={Hybride:"Hybride",Cadastre:"Cadastre",IGN:"IGN"},l=Kn(()=>r.lastSave?new Date(r.lastSave).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),c=M=>{i.value=M,n("change-map-type",M),E()},d=()=>{n("create-new-plan"),E()},p=()=>{n("load-plan"),E()},v=()=>{n("save-plan"),E()},m=()=>{n("adjust-view"),E()},x=()=>{n("generate-summary"),E()},E=()=>{s.value=!1};return(M,A)=>(Re(),$e("div",J$,[C("div",Q$,[C("div",eV,[C("button",{class:"btn-toolbar dropdown-toggle",onMouseover:o},[A[2]||(A[2]=C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),C("span",null,Tt(a[i.value]),1)],32),C("div",tV,[(Re(),$e(Cn,null,pr(a,(O,z)=>C("button",{key:z,class:$i(["dropdown-item",{active:z===i.value}]),onClick:K=>c(z)},Tt(O),11,nV)),64))])]),M.planName?(Re(),$e("div",rV,[C("div",iV,[C("div",sV,[C("h2",oV,Tt(M.planName),1),M.planDescription?(Re(),$e("p",aV,Tt(M.planDescription),1)):rn("",!0)])])])):rn("",!0),C("div",{class:"border-l pl-2"},[C("div",{class:"flex items-center space-x-1"},[C("button",{onClick:d,class:"btn-toolbar",title:"Nouveau plan"},A[3]||(A[3]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),C("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),C("button",{onClick:p,class:"btn-toolbar",title:"Charger un plan"},A[4]||(A[4]=[Jl('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-b4cc3353><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-b4cc3353></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-b4cc3353></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-b4cc3353></path></svg><span class="hidden lg:inline ml-1" data-v-b4cc3353>Charger</span>',2)])),C("button",{onClick:v,class:"btn-toolbar",title:"Enregistrer le plan"},A[5]||(A[5]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),C("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),C("div",{class:"border-l pl-2"},[C("div",{class:"flex items-center space-x-1"},[C("button",{onClick:m,class:"btn-toolbar",title:"Ajuster la vue"},A[6]||(A[6]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),C("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)])),C("button",{onClick:x,class:"btn-toolbar",title:"Gnrer une synthse"},A[7]||(A[7]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),C("span",{class:"hidden lg:inline ml-1"},"Synthse",-1)]))])]),C("div",lV,[C("div",{class:$i(["text-xs hidden lg:flex items-center",{"text-gray-500":!M.saveStatus,"text-primary-600 font-medium":M.saveStatus==="success","text-blue-600 font-medium":M.saveStatus==="saving"}])},[M.saveStatus==="saving"?(Re(),$e("svg",uV,A[8]||(A[8]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):rn("",!0),M.saveStatus==="success"?(Re(),$e("svg",cV,A[9]||(A[9]=[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):rn("",!0),pi(Q2,{name:"fade-slide",mode:"out-in"},{default:Wu(()=>[M.saveStatus==="saving"?(Re(),$e("span",hV," Sauvegarde en cours... ")):M.saveStatus==="success"?(Re(),$e("span",dV," Sauvegarde russie ! ")):(Re(),$e("span",fV," Dernire modification : "+Tt(l.value),1))]),_:1})],2)])]),C("div",pV,[C("div",gV,[C("button",{onClick:A[0]||(A[0]=O=>s.value=!s.value),class:"p-2 rounded-md border bg-white shadow-sm"},A[10]||(A[10]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})],-1)])),M.planName?(Re(),$e("div",mV,Tt(M.planName),1)):rn("",!0),C("div",{class:"flex space-x-2"},[C("button",{onClick:d,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},A[11]||(A[11]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),C("button",{onClick:v,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},A[12]||(A[12]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),C("button",{onClick:m,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},A[13]||(A[13]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),s.value?(Re(),$e("div",vV,[C("div",yV,[A[15]||(A[15]=C("h3",{class:"text-base font-semibold text-gray-800"},"Menu",-1)),C("button",{onClick:A[1]||(A[1]=O=>s.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},A[14]||(A[14]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",bV,[M.planName?(Re(),$e("div",_V,[C("h3",wV,Tt(M.planName),1),M.planDescription?(Re(),$e("p",xV,Tt(M.planDescription),1)):rn("",!0)])):rn("",!0),C("div",LV,[A[16]||(A[16]=C("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Type de carte",-1)),C("div",SV,[(Re(),$e(Cn,null,pr(a,(O,z)=>C("button",{key:z,class:$i(["px-3 py-2 text-sm rounded-md border shadow-sm",{"bg-blue-50 border-blue-300 text-blue-700 font-medium":z===i.value}]),onClick:K=>c(z)},Tt(O),11,CV)),64))])]),C("div",{class:"flex flex-col"},[A[20]||(A[20]=C("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Outils de plan",-1)),C("div",{class:"grid grid-cols-3 gap-2"},[C("button",{onClick:d,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},A[17]||(A[17]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),si(" Nouveau ")])),C("button",{onClick:p,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},A[18]||(A[18]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),C("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),C("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),si(" Charger ")])),C("button",{onClick:x,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},A[19]||(A[19]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),si(" Synthse ")]))])]),C("div",{class:$i(["text-sm text-center pt-3 border-t flex items-center justify-center space-x-1 mt-2",{"text-gray-500":!M.saveStatus,"text-primary-600 font-medium":M.saveStatus==="success","text-blue-600 font-medium":M.saveStatus==="saving"}])},[M.saveStatus==="saving"?(Re(),$e("svg",EV,A[21]||(A[21]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):rn("",!0),M.saveStatus==="success"?(Re(),$e("svg",PV,A[22]||(A[22]=[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):rn("",!0),pi(Q2,{name:"fade-slide",mode:"out-in"},{default:Wu(()=>[M.saveStatus==="saving"?(Re(),$e("span",MV," Sauvegarde en cours... ")):M.saveStatus==="success"?(Re(),$e("span",kV," Sauvegarde russie ! ")):(Re(),$e("span",AV," Dernire modification : "+Tt(l.value),1))]),_:1})],2)])])):rn("",!0)])]))}}),DV=jh(TV,[["__scopeId","data-v-b4cc3353"]]),OV={class:"comment-thread"},NV={key:0,class:"space-y-3 mb-4"},IV={class:"flex justify-between items-start"},BV={class:"flex items-center"},RV={class:"font-medium text-sm text-gray-900"},FV={class:"flex items-center"},jV={class:"text-xs text-gray-500"},zV=["onClick"],$V={class:"mt-1 text-sm text-gray-700 whitespace-pre-wrap"},VV={key:1,class:"text-center text-sm text-gray-500 italic my-4"},UV={key:2,class:"mt-3"},HV={class:"flex justify-end mt-2"},WV=["disabled"],GV={key:3,class:"text-center text-sm text-gray-500 italic mt-2"},qV=Fs({__name:"CommentThread",props:{noteId:{},comments:{}},emits:["update:comments","comment-added","comment-deleted"],setup(t,{emit:e}){const n=t;console.log("[CommentThread] Commentaires reus initialement:",n.comments),Di(()=>n.comments,E=>{console.log("[CommentThread] Commentaires mis  jour:",E)},{deep:!0});const r=e,i=da(),s=wf(),o=tu(),a=xt(""),l=Kn(()=>i.isEntreprise||i.isAdmin);function c(E){return i.user&&E.userId===i.user.id||i.isAdmin}async function d(){var E;if(a.value.trim())try{await s.addComment(n.noteId,a.value.trim()),a.value="",o.success("Commentaire ajout avec succs"),r("comment-added")}catch(M){if(console.error("Erreur lors de l'ajout du commentaire:",M),(E=M.response)!=null&&E.data){const A=M.response.data;A.note?o.error(`Erreur: ${A.note[0]}`):A.user?o.error(`Erreur: ${A.user[0]}`):A.text?o.error(`Erreur: ${A.text[0]}`):o.error("Erreur lors de l'ajout du commentaire")}else o.error("Erreur lors de l'ajout du commentaire")}}async function p(E){var M;if(confirm("Voulez-vous vraiment supprimer ce commentaire ?"))try{await s.removeComment(n.noteId,E),o.success("Commentaire supprim"),r("comment-deleted")}catch(A){if(console.error("Erreur lors de la suppression du commentaire:",A),(M=A.response)!=null&&M.data){const O=A.response.data;O.detail?o.error(`Erreur: ${O.detail}`):o.error("Erreur lors de la suppression du commentaire")}else o.error("Erreur lors de la suppression du commentaire")}}function v(E){try{if(!E)return"Date inconnue";const M=new Date(E);return isNaN(M.getTime())?(console.warn(`Date invalide: ${E}`),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(M)}catch(M){return console.error(`Erreur lors du formatage de la date: ${E}`,M),"Date invalide"}}function m(E){switch(E){case"admin":return"bg-purple-100 text-purple-800";case"entreprise":return"bg-blue-100 text-blue-800";case"salarie":return"bg-green-100 text-green-800";case"visiteur":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function x(E){switch(E){case"admin":return"Admin";case"entreprise":return"Entreprise";case"salarie":return"Salari";case"visiteur":return"Visiteur";default:return E}}return(E,M)=>(Re(),$e("div",OV,[E.comments&&E.comments.length>0?(Re(),$e("div",NV,[(Re(!0),$e(Cn,null,pr(E.comments,A=>(Re(),$e("div",{key:A.id,class:"bg-gray-50 rounded-lg p-3"},[C("div",IV,[C("div",BV,[C("div",RV,Tt(A.userName),1),C("span",{class:$i(["ml-2 text-xs px-2 py-0.5 rounded-full",m(A.userRole)])},Tt(x(A.userRole)),3)]),C("div",FV,[C("span",jV,Tt(v(A.createdAt)),1),c(A)?(Re(),$e("button",{key:0,onClick:Bh(O=>p(A.id),["prevent"]),class:"ml-2 text-gray-400 hover:text-red-500"},M[1]||(M[1]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,zV)):rn("",!0)])]),C("p",$V,Tt(A.text),1)]))),128))])):(Re(),$e("div",VV," Aucun commentaire pour le moment ")),l.value?(Re(),$e("div",UV,[Pn(C("textarea",{"onUpdate:modelValue":M[0]||(M[0]=A=>a.value=A),placeholder:"Ajouter un commentaire...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"2"},null,512),[[Rr,a.value]]),C("div",HV,[C("button",{type:"button",onClick:Bh(d,["prevent"]),disabled:!a.value.trim(),class:"px-3 py-1 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"}," Ajouter ",8,WV)])])):(Re(),$e("div",GV," Seuls les utilisateurs de l'entreprise peuvent ajouter des commentaires "))]))}}),YV={class:"photo-gallery"},KV={key:0,class:"grid grid-cols-2 gap-2 mb-4"},ZV=["src","onClick"],XV={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center"},JV={class:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2"},QV=["onClick"],eU={key:1,class:"text-center text-sm text-gray-500 italic my-4"},tU={class:"flex space-x-2 mt-3"},nU={key:2,class:"mt-4 border border-gray-300 rounded-lg overflow-hidden bg-white"},rU={class:"relative bg-gray-900",style:{height:"300px"}},iU=["src"],sU={class:"p-3 bg-gray-50 border-t border-gray-300 flex justify-center"},oU={key:1,class:"flex space-x-3"},aU={key:3,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},lU={class:"relative max-w-3xl max-h-[90vh] bg-white rounded-lg overflow-hidden"},uU=["src"],cU=Fs({__name:"PhotoGallery",props:{noteId:{},photos:{}},emits:["update:photos","photo-added","photo-deleted"],setup(t,{emit:e}){const n=t,r=e,i=wf(),s=tu(),o=xt(null),a=xt(null),l=xt(null);let c=null;const d=xt(!1),p=xt(!1),v=xt(null),m=xt(null);function x(pe){v.value=pe,d.value=!0}async function E(pe){var N;if(confirm("tes-vous sr de vouloir supprimer cette photo ?"))try{await i.removePhoto(n.noteId,pe),s.success("Photo supprime"),r("photo-deleted"),d.value&&((N=v.value)==null?void 0:N.id)===pe&&(d.value=!1,v.value=null)}catch(j){console.error("Erreur lors de la suppression de la photo:",j),s.error("Erreur lors de la suppression de la photo")}}function M(){l.value&&l.value.click()}async function A(pe){const N=pe.target;if(!N.files||N.files.length===0)return;const j=N.files[0];if(!j.type.startsWith("image/")){s.error("Le fichier doit tre une image");return}if(j.size>5*1024*1024){s.error("L'image est trop volumineuse (max 5MB)");return}try{const q=await O(j);await i.addPhoto(n.noteId,{url:q}),N.value="",s.success("Photo ajoute"),r("photo-added")}catch(q){console.error("Erreur lors de l'ajout de la photo:",q),s.error("Erreur lors de l'ajout de la photo")}}function O(pe){return new Promise((N,j)=>{const q=new FileReader;q.onload=()=>N(q.result),q.onerror=j,q.readAsDataURL(pe)})}Di(p,async pe=>{if(pe){m.value=null;try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("API de camra non supporte sur ce navigateur");const N={video:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}};c=await navigator.mediaDevices.getUserMedia(N),o.value&&(o.value.srcObject=c,await new Promise(j=>{o.value.onloadedmetadata=()=>{o.value.play().then(j)}}))}catch(N){console.error("Erreur lors de l'accs  la camra:",N);let j="Impossible d'accder  la camra";N.name==="NotAllowedError"?j="L'accs  la camra a t refus. Veuillez vrifier vos permissions.":N.name==="NotFoundError"?j="Aucune camra n'a t trouve sur votre appareil.":N.name==="NotSupportedError"&&(j="Votre navigateur ne supporte pas l'accs  la camra."),s.error(j),p.value=!1}}else c&&(c.getTracks().forEach(N=>N.stop()),c=null)});function z(){if(!o.value||!a.value)return;const pe=o.value,N=a.value;N.width=pe.videoWidth,N.height=pe.videoHeight;const j=N.getContext("2d");j&&(j.drawImage(pe,0,0,N.width,N.height),m.value=N.toDataURL("image/jpeg"))}function K(){m.value=null}async function ne(){if(m.value)try{await i.addPhoto(n.noteId,{url:m.value}),p.value=!1,s.success("Photo ajoute"),r("photo-added")}catch(pe){console.error("Erreur lors de l'ajout de la photo:",pe),s.error("Erreur lors de l'ajout de la photo")}}function me(){p.value=!1}return Ku(()=>{c&&(c.getTracks().forEach(pe=>pe.stop()),c=null)}),(pe,N)=>(Re(),$e("div",YV,[pe.photos&&pe.photos.length>0?(Re(),$e("div",KV,[(Re(!0),$e(Cn,null,pr(pe.photos,j=>(Re(),$e("div",{key:j.id,class:"relative group"},[C("img",{src:j.url,alt:"Photo",class:"w-full h-32 object-cover rounded-lg cursor-pointer",onClick:q=>x(j)},null,8,ZV),C("div",XV,[C("div",JV,[C("button",{onClick:Bh(q=>E(j.id),["stop","prevent"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-red-600",title:"Supprimer la photo"},N[2]||(N[2]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,QV)])])]))),128))])):(Re(),$e("div",eU," Aucune photo pour le moment ")),C("div",tU,[C("button",{type:"button",onClick:N[0]||(N[0]=j=>p.value=!0),class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},N[3]||(N[3]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),si(" Prendre une photo ")])),C("button",{type:"button",onClick:M,class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer"},N[4]||(N[4]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})],-1),si(" Tlverser ")])),C("input",{id:"photo-upload",ref_key:"fileInput",ref:l,type:"file",accept:"image/*",class:"hidden",onChange:A},null,544)]),p.value?(Re(),$e("div",nU,[C("div",{class:"p-3 bg-gray-50 border-b border-gray-300 flex justify-between items-center"},[N[6]||(N[6]=C("h3",{class:"text-sm font-medium text-gray-700"},"Mode camra",-1)),C("button",{type:"button",onClick:me,class:"text-gray-400 hover:text-gray-500"},N[5]||(N[5]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",rU,[m.value?(Re(),$e("img",{key:1,src:m.value,class:"w-full h-full object-contain",alt:"Captured"},null,8,iU)):(Re(),$e("video",{key:0,ref_key:"videoElement",ref:o,autoplay:"",class:"w-full h-full object-contain"},null,512)),C("canvas",{ref_key:"canvasElement",ref:a,class:"hidden"},null,512)]),C("div",sU,[m.value?(Re(),$e("div",oU,[C("button",{type:"button",onClick:K,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Reprendre "),C("button",{type:"button",onClick:ne,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Utiliser ")])):(Re(),$e("button",{key:0,type:"button",onClick:z,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-full w-12 h-12 flex items-center justify-center hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},N[7]||(N[7]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})],-1)])))])])):rn("",!0),d.value?(Re(),$e("div",aU,[C("div",lU,[C("button",{type:"button",onClick:N[1]||(N[1]=j=>d.value=!1),class:"absolute top-2 right-2 z-10 p-1 bg-white rounded-full text-gray-700 hover:text-red-600 shadow-md"},N[8]||(N[8]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),v.value?(Re(),$e("img",{key:0,src:v.value.url,alt:"Photo",class:"max-h-[80vh] max-w-full object-contain"},null,8,uU)):rn("",!0)])])):rn("",!0)]))}}),hU=jh(cU,[["__scopeId","data-v-f87156b4"]]),dU={class:"fixed z-[9999] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},fU={class:"flex items-center justify-center min-h-screen w-full"},pU={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-2xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},gU={class:"p-4 md:p-6 flex-1 overflow-y-auto"},mU={class:"flex justify-between items-center mb-4 border-b pb-4"},vU={class:"text-xl font-semibold text-gray-900"},yU={class:"mb-4 border-b border-gray-200"},bU={class:"flex space-x-4","aria-label":"Tabs"},_U={key:0,class:"ml-1 px-2 py-0.5 text-xs rounded-full bg-primary-100 text-primary-800"},wU={key:0,class:"ml-1 px-2 py-0.5 text-xs rounded-full bg-primary-100 text-primary-800"},xU={key:0},LU={class:"mb-4"},SU={class:"mb-4"},CU={key:0,class:"mb-4 p-2 rounded bg-gray-50 flex items-center"},EU={class:"mb-4"},PU=["value"],MU={class:"mb-4"},kU=["value"],AU={class:"mb-4"},TU={class:"mt-1 flex space-x-2"},DU=["onClick"],OU={key:1,class:"mt-4"},NU={class:"hidden"},IU={key:2,class:"mt-4"},BE=Fs({__name:"NoteEditModal",props:{note:{},isNewNote:{type:Boolean},location:{}},emits:["close","save"],setup(t,{emit:e}){const n=t,r=e,i=wf(),s=tu(),o=xt("info"),a=window.console;Di(o,async q=>{a.log("[NoteEditModal] Onglet actif chang:",q),q==="comments"&&n.note&&n.note.id&&(a.log("[NoteEditModal] Onglet Commentaires slectionn, commentaires actuels:",l.value.comments),await p(n.note.id)),q==="photos"&&n.note&&n.note.id&&(a.log("[NoteEditModal] Onglet Photos slectionn, photos actuelles:",l.value.photos),await v(n.note.id))});const l=xt({title:"",description:"",columnId:"",accessLevel:Xi.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[]});function c(q){return Array.isArray(q)?q:typeof q=="object"&&"type"in q&&"coordinates"in q?[q.coordinates[1],q.coordinates[0]]:(a.error("[NoteEditModal] Format de localisation non reconnu:",q),[0,0])}function d(q){if(!q)return new Date().toISOString();try{const I=new Date(q);return isNaN(I.getTime())?(a.warn("[NoteEditModal] Date invalide:",q),new Date().toISOString()):I.toISOString()}catch(I){return a.error("[NoteEditModal] Erreur lors de la cration de la date:",I),new Date().toISOString()}}async function p(q){try{a.log(`[NoteEditModal] Chargement des commentaires pour la note ${q}`);const I=await La.getComments(q);a.log("[NoteEditModal] Commentaires reus:",I.data);const B=I.data.map($=>({id:$.id,text:$.text,createdAt:$.created_at,userId:$.user,userName:$.user_name,userRole:$.user_role}));return a.log("[NoteEditModal] Commentaires transforms:",B),n.note&&(i.updateNote(n.note.id,{comments:B}),l.value.comments=B,a.log("[NoteEditModal] Commentaires mis  jour dans le store et localement"),a.log("[NoteEditModal] editingNote.comments aprs mise  jour:",l.value.comments)),B}catch(I){return a.error("[NoteEditModal] Erreur lors du chargement des commentaires:",I),s.error("Erreur lors du chargement des commentaires"),[]}}async function v(q){try{a.log(`[NoteEditModal] Chargement des photos pour la note ${q}`);const I=await La.getPhotos(q);a.log("[NoteEditModal] Photos reues:",I.data);const B=I.data.map($=>({id:$.id,url:$.image,createdAt:$.created_at,caption:$.caption}));return n.note&&(i.updateNote(n.note.id,{photos:B}),l.value.photos=B,a.log("[NoteEditModal] Photos mises  jour dans le store et localement")),B}catch(I){return a.error("[NoteEditModal] Erreur lors du chargement des photos:",I),s.error("Erreur lors du chargement des photos"),[]}}fo(async()=>{var q,I;if(a.log("[NoteEditModal] onMounted - props:",n),await i.loadColumns(),a.log("[NoteEditModal] Colonnes charges:",i.columns),n.note){a.log("[NoteEditModal] dition d'une note existante:",n.note);const B=JSON.parse(JSON.stringify(n.note));B.createdAt=d(B.createdAt),B.updatedAt=d(B.updatedAt),l.value=B,n.note.id&&(a.log("[NoteEditModal] Chargement des commentaires et photos..."),await Promise.all([p(n.note.id),v(n.note.id)]),a.log("[NoteEditModal] Aprs chargement - Commentaires:",((q=l.value.comments)==null?void 0:q.length)||0),a.log("[NoteEditModal] Aprs chargement - Photos:",((I=l.value.photos)==null?void 0:I.length)||0),setTimeout(()=>{a.log("[NoteEditModal] Compteurs aprs timeout - Commentaires:",x.value),a.log("[NoteEditModal] Compteurs aprs timeout - Photos:",E.value)},0))}else if(n.isNewNote){if(a.log("[NoteEditModal] Cration d'une nouvelle note"),l.value={title:"Nouvelle note",description:"",columnId:i.getDefaultColumn.id||"1",accessLevel:Xi.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},n.location){a.log("[NoteEditModal] Ajout de la localisation:",n.location);const B=c(n.location);l.value.location=B}a.log("[NoteEditModal] Niveau d'accs initial:",l.value.accessLevel)}else a.error("[NoteEditModal] Erreur: Ni note existante ni nouvelle note");a.log("[NoteEditModal] editingNote.value aprs initialisation:",l.value)});const m=Kn(()=>i.getSortedColumns),x=Kn(()=>{var I;const q=((I=l.value.comments)==null?void 0:I.length)||0;return a.log("[NoteEditModal] Computed commentsCount recalcul:",q),q}),E=Kn(()=>{var I;const q=((I=l.value.photos)==null?void 0:I.length)||0;return a.log("[NoteEditModal] Computed photosCount recalcul:",q),q}),M=[{id:Xi.PRIVATE,title:"Priv",description:"Visible uniquement par vous"},{id:Xi.COMPANY,title:"Entreprise",description:"Visible par l'entreprise uniquement"},{id:Xi.EMPLOYEE,title:"Salaris",description:"Visible par l'entreprise et les salaris"},{id:Xi.VISITOR,title:"Visiteurs",description:"Visible par tous"}],A=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"],O=q=>{l.value.style?(l.value.style.color=q,l.value.style.fillColor=q):l.value.style={color:q,weight:2,opacity:1,fillColor:q,fillOpacity:.6,radius:8},l.value.color=q},z=()=>{var q,I,B,$,R,U,V,re,J,_e,Le;l.value={title:((q=n.note)==null?void 0:q.title)||"",description:((I=n.note)==null?void 0:I.description)||"",columnId:((B=n.note)==null?void 0:B.columnId)||"",accessLevel:(($=n.note)==null?void 0:$.accessLevel)||"private",style:((R=n.note)==null?void 0:R.style)||{color:((U=n.note)==null?void 0:U.color)||"#3B82F6",weight:2,opacity:1,fillColor:((V=n.note)==null?void 0:V.color)||"#3B82F6",fillOpacity:.6,radius:8},color:((re=n.note)==null?void 0:re.color)||"#3B82F6",location:n.location||((J=n.note)==null?void 0:J.location)||null,comments:((_e=n.note)==null?void 0:_e.comments)||[],photos:((Le=n.note)==null?void 0:Le.photos)||[]}};fo(()=>{z()}),Di(()=>n.note,()=>{z()},{deep:!0});function K(){r("close")}async function ne(){a.log("[NoteEditModal] Commentaire ajout, le modal reste ouvert"),n.note&&n.note.id&&await p(n.note.id)}async function me(){a.log("[NoteEditModal] Photo ajoute, le modal reste ouvert"),n.note&&n.note.id&&await v(n.note.id)}async function pe(){a.log("[NoteEditModal] Commentaire supprim, mise  jour de la liste"),n.note&&n.note.id&&await p(n.note.id)}async function N(){a.log("[NoteEditModal] Photo supprime, mise  jour de la liste"),n.note&&n.note.id&&await v(n.note.id)}async function j(){var q;try{const I={title:l.value.title,description:l.value.description,columnId:l.value.columnId,style:l.value.style,access_level:l.value.accessLevel,comments:l.value.comments||[],photos:l.value.photos||[]};l.value.location&&(I.location=Array.isArray(l.value.location)?{type:"Point",coordinates:[l.value.location[1],l.value.location[0]]}:l.value.location),a.log("[NoteEditModal] Donnes de note  sauvegarder:",I);let B;if((q=n.note)!=null&&q.id){B=(await La.updateNote(n.note.id,I)).data,i.updateNote(n.note.id,{...l.value,...B,accessLevel:l.value.accessLevel,style:l.value.style,updatedAt:new Date().toISOString()});const R=n.note.id,U=new CustomEvent("geonote:update",{detail:{noteId:R,properties:{name:l.value.title,description:l.value.description,columnId:l.value.columnId,accessLevel:l.value.accessLevel,style:l.value.style}}});window.dispatchEvent(U),s.success("Note mise  jour avec succs")}else{if(B=(await La.createNote(I)).data,!B.id)throw new Error("Le backend n'a pas fourni d'ID pour la nouvelle note");const R=i.getDefaultColumn,U={...I,id:B.id,columnId:I.columnId||R.id,accessLevel:l.value.accessLevel,style:I.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.2}};a.log("[NoteEditModal] Note  ajouter au store avec ID backend:",B.id),i.addNote(U),s.success("Note cre avec succs")}B&&(!B.comments&&l.value.comments&&(B.comments=l.value.comments),!B.photos&&l.value.photos&&(B.photos=l.value.photos)),r("save",B),r("close")}catch(I){a.error("[NoteEditModal] Erreur lors de la sauvegarde de la note:",I),s.error("Erreur lors de la sauvegarde de la note")}}return(q,I)=>{var B;return Re(),$e("div",dU,[C("div",fU,[I[17]||(I[17]=C("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),C("div",pU,[C("form",{onSubmit:Bh(j,["prevent"]),class:"h-full md:h-auto flex flex-col"},[C("div",gU,[C("div",mU,[C("h3",vU,Tt((B=q.note)!=null&&B.id?"Modifier la note":"Nouvelle note"),1),C("button",{type:"button",onClick:K,class:"text-gray-400 hover:text-gray-500"},I[7]||(I[7]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",yU,[C("nav",bU,[C("button",{type:"button",onClick:I[0]||(I[0]=$=>o.value="info"),class:$i(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="info"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Informations ",2),C("button",{type:"button",onClick:I[1]||(I[1]=$=>o.value="comments"),class:$i(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="comments"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[I[8]||(I[8]=si(" Commentaires ")),x.value>0?(Re(),$e("span",_U,Tt(x.value),1)):rn("",!0)],2),C("button",{type:"button",onClick:I[2]||(I[2]=$=>o.value="photos"),class:$i(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="photos"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[I[9]||(I[9]=si(" Photos ")),E.value>0?(Re(),$e("span",wU,Tt(E.value),1)):rn("",!0)],2)])]),o.value==="info"?(Re(),$e("div",xU,[C("div",LU,[I[10]||(I[10]=C("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Titre",-1)),Pn(C("input",{type:"text",id:"title","onUpdate:modelValue":I[3]||(I[3]=$=>l.value.title=$),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Rr,l.value.title]])]),C("div",SU,[I[11]||(I[11]=C("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),Pn(C("textarea",{id:"description","onUpdate:modelValue":I[4]||(I[4]=$=>l.value.description=$),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Rr,l.value.description]])]),l.value.location?(Re(),$e("div",CU,I[12]||(I[12]=[C("div",{class:"text-primary-600 mr-2"},[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})])],-1),C("div",{class:"text-sm text-gray-600"}," Note golocalise ",-1)]))):rn("",!0),C("div",EU,[I[13]||(I[13]=C("label",{for:"column",class:"block text-sm font-medium text-gray-700"},"tat",-1)),Pn(C("select",{id:"column","onUpdate:modelValue":I[5]||(I[5]=$=>l.value.columnId=$),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[(Re(!0),$e(Cn,null,pr(m.value,$=>(Re(),$e("option",{key:$.id,value:$.id},Tt($.title),9,PU))),128))],512),[[is,l.value.columnId]])]),C("div",MU,[I[14]||(I[14]=C("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accs",-1)),Pn(C("select",{id:"accessLevel","onUpdate:modelValue":I[6]||(I[6]=$=>l.value.accessLevel=$),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[(Re(),$e(Cn,null,pr(M,$=>C("option",{key:$.id,value:$.id},Tt($.title)+" - "+Tt($.description),9,kU)),64))],512),[[is,l.value.accessLevel]])]),C("div",AU,[I[15]||(I[15]=C("label",{class:"block text-sm font-medium text-gray-700"},"Couleur",-1)),C("div",TU,[(Re(),$e(Cn,null,pr(A,$=>C("div",{key:$,class:$i(["w-8 h-8 rounded-full cursor-pointer border-2",{"border-gray-400":l.value.style.color!==$,"border-black":l.value.style.color===$}]),style:Ql({backgroundColor:$}),onClick:R=>O($)},null,14,DU)),64))])])])):o.value==="comments"?(Re(),$e("div",OU,[C("div",NU,Tt(a.log("[NoteEditModal] Commentaires passs au composant:",l.value.comments)),1),q.note?(Re(),$a(qV,{key:0,noteId:q.note.id,comments:l.value.comments||[],onCommentAdded:ne,onCommentDeleted:pe},null,8,["noteId","comments"])):rn("",!0)])):o.value==="photos"?(Re(),$e("div",IU,[q.note?(Re(),$a(hU,{key:0,noteId:q.note.id,photos:l.value.photos||[],onPhotoAdded:me,onPhotoDeleted:N},null,8,["noteId","photos"])):rn("",!0)])):rn("",!0)]),C("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[I[16]||(I[16]=C("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm"}," Enregistrer ",-1)),C("button",{onClick:K,type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Annuler ")])],32)])])])}}});(()=>{var An,nr;var t=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(h,g)=>()=>(g||h((g={exports:{}}).exports,g),g.exports),a=(h,g,_,S)=>{if(g&&typeof g=="object"||typeof g=="function")for(let k of r(g))!s.call(h,k)&&k!==_&&e(h,k,{get:()=>g[k],enumerable:!(S=n(g,k))||S.enumerable});return h},l=(h,g,_)=>(_=h!=null?t(i(h)):{},a(g||!h||!h.__esModule?e(_,"default",{value:h,enumerable:!0}):_,h)),c=o((h,g)=>{function _(){this.__data__=[],this.size=0}g.exports=_}),d=o((h,g)=>{function _(S,k){return S===k||S!==S&&k!==k}g.exports=_}),p=o((h,g)=>{var _=d();function S(k,H){for(var te=k.length;te--;)if(_(k[te][0],H))return te;return-1}g.exports=S}),v=o((h,g)=>{var _=p(),S=Array.prototype,k=S.splice;function H(te){var ae=this.__data__,ye=_(ae,te);if(ye<0)return!1;var Ee=ae.length-1;return ye==Ee?ae.pop():k.call(ae,ye,1),--this.size,!0}g.exports=H}),m=o((h,g)=>{var _=p();function S(k){var H=this.__data__,te=_(H,k);return te<0?void 0:H[te][1]}g.exports=S}),x=o((h,g)=>{var _=p();function S(k){return _(this.__data__,k)>-1}g.exports=S}),E=o((h,g)=>{var _=p();function S(k,H){var te=this.__data__,ae=_(te,k);return ae<0?(++this.size,te.push([k,H])):te[ae][1]=H,this}g.exports=S}),M=o((h,g)=>{var _=c(),S=v(),k=m(),H=x(),te=E();function ae(ye){var Ee=-1,nt=ye==null?0:ye.length;for(this.clear();++Ee<nt;){var We=ye[Ee];this.set(We[0],We[1])}}ae.prototype.clear=_,ae.prototype.delete=S,ae.prototype.get=k,ae.prototype.has=H,ae.prototype.set=te,g.exports=ae}),A=o((h,g)=>{var _=M();function S(){this.__data__=new _,this.size=0}g.exports=S}),O=o((h,g)=>{function _(S){var k=this.__data__,H=k.delete(S);return this.size=k.size,H}g.exports=_}),z=o((h,g)=>{function _(S){return this.__data__.get(S)}g.exports=_}),K=o((h,g)=>{function _(S){return this.__data__.has(S)}g.exports=_}),ne=o((h,g)=>{var _=typeof Sa=="object"&&Sa&&Sa.Object===Object&&Sa;g.exports=_}),me=o((h,g)=>{var _=ne(),S=typeof self=="object"&&self&&self.Object===Object&&self,k=_||S||Function("return this")();g.exports=k}),pe=o((h,g)=>{var _=me(),S=_.Symbol;g.exports=S}),N=o((h,g)=>{var _=pe(),S=Object.prototype,k=S.hasOwnProperty,H=S.toString,te=_?_.toStringTag:void 0;function ae(ye){var Ee=k.call(ye,te),nt=ye[te];try{ye[te]=void 0;var We=!0}catch{}var yt=H.call(ye);return We&&(Ee?ye[te]=nt:delete ye[te]),yt}g.exports=ae}),j=o((h,g)=>{var _=Object.prototype,S=_.toString;function k(H){return S.call(H)}g.exports=k}),q=o((h,g)=>{var _=pe(),S=N(),k=j(),H="[object Null]",te="[object Undefined]",ae=_?_.toStringTag:void 0;function ye(Ee){return Ee==null?Ee===void 0?te:H:ae&&ae in Object(Ee)?S(Ee):k(Ee)}g.exports=ye}),I=o((h,g)=>{function _(S){var k=typeof S;return S!=null&&(k=="object"||k=="function")}g.exports=_}),B=o((h,g)=>{var _=q(),S=I(),k="[object AsyncFunction]",H="[object Function]",te="[object GeneratorFunction]",ae="[object Proxy]";function ye(Ee){if(!S(Ee))return!1;var nt=_(Ee);return nt==H||nt==te||nt==k||nt==ae}g.exports=ye}),$=o((h,g)=>{var _=me(),S=_["__core-js_shared__"];g.exports=S}),R=o((h,g)=>{var _=$(),S=function(){var H=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||"");return H?"Symbol(src)_1."+H:""}();function k(H){return!!S&&S in H}g.exports=k}),U=o((h,g)=>{var _=Function.prototype,S=_.toString;function k(H){if(H!=null){try{return S.call(H)}catch{}try{return H+""}catch{}}return""}g.exports=k}),V=o((h,g)=>{var _=B(),S=R(),k=I(),H=U(),te=/[\\^$.*+?()[\]{}|]/g,ae=/^\[object .+?Constructor\]$/,ye=Function.prototype,Ee=Object.prototype,nt=ye.toString,We=Ee.hasOwnProperty,yt=RegExp("^"+nt.call(We).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function It(tn){if(!k(tn)||S(tn))return!1;var xn=_(tn)?yt:ae;return xn.test(H(tn))}g.exports=It}),re=o((h,g)=>{function _(S,k){return S==null?void 0:S[k]}g.exports=_}),J=o((h,g)=>{var _=V(),S=re();function k(H,te){var ae=S(H,te);return _(ae)?ae:void 0}g.exports=k}),_e=o((h,g)=>{var _=J(),S=me(),k=_(S,"Map");g.exports=k}),Le=o((h,g)=>{var _=J(),S=_(Object,"create");g.exports=S}),Oe=o((h,g)=>{var _=Le();function S(){this.__data__=_?_(null):{},this.size=0}g.exports=S}),Z=o((h,g)=>{function _(S){var k=this.has(S)&&delete this.__data__[S];return this.size-=k?1:0,k}g.exports=_}),G=o((h,g)=>{var _=Le(),S="__lodash_hash_undefined__",k=Object.prototype,H=k.hasOwnProperty;function te(ae){var ye=this.__data__;if(_){var Ee=ye[ae];return Ee===S?void 0:Ee}return H.call(ye,ae)?ye[ae]:void 0}g.exports=te}),se=o((h,g)=>{var _=Le(),S=Object.prototype,k=S.hasOwnProperty;function H(te){var ae=this.__data__;return _?ae[te]!==void 0:k.call(ae,te)}g.exports=H}),ce=o((h,g)=>{var _=Le(),S="__lodash_hash_undefined__";function k(H,te){var ae=this.__data__;return this.size+=this.has(H)?0:1,ae[H]=_&&te===void 0?S:te,this}g.exports=k}),he=o((h,g)=>{var _=Oe(),S=Z(),k=G(),H=se(),te=ce();function ae(ye){var Ee=-1,nt=ye==null?0:ye.length;for(this.clear();++Ee<nt;){var We=ye[Ee];this.set(We[0],We[1])}}ae.prototype.clear=_,ae.prototype.delete=S,ae.prototype.get=k,ae.prototype.has=H,ae.prototype.set=te,g.exports=ae}),ve=o((h,g)=>{var _=he(),S=M(),k=_e();function H(){this.size=0,this.__data__={hash:new _,map:new(k||S),string:new _}}g.exports=H}),ee=o((h,g)=>{function _(S){var k=typeof S;return k=="string"||k=="number"||k=="symbol"||k=="boolean"?S!=="__proto__":S===null}g.exports=_}),X=o((h,g)=>{var _=ee();function S(k,H){var te=k.__data__;return _(H)?te[typeof H=="string"?"string":"hash"]:te.map}g.exports=S}),De=o((h,g)=>{var _=X();function S(k){var H=_(this,k).delete(k);return this.size-=H?1:0,H}g.exports=S}),Te=o((h,g)=>{var _=X();function S(k){return _(this,k).get(k)}g.exports=S}),qe=o((h,g)=>{var _=X();function S(k){return _(this,k).has(k)}g.exports=S}),ge=o((h,g)=>{var _=X();function S(k,H){var te=_(this,k),ae=te.size;return te.set(k,H),this.size+=te.size==ae?0:1,this}g.exports=S}),Q=o((h,g)=>{var _=ve(),S=De(),k=Te(),H=qe(),te=ge();function ae(ye){var Ee=-1,nt=ye==null?0:ye.length;for(this.clear();++Ee<nt;){var We=ye[Ee];this.set(We[0],We[1])}}ae.prototype.clear=_,ae.prototype.delete=S,ae.prototype.get=k,ae.prototype.has=H,ae.prototype.set=te,g.exports=ae}),ie=o((h,g)=>{var _=M(),S=_e(),k=Q(),H=200;function te(ae,ye){var Ee=this.__data__;if(Ee instanceof _){var nt=Ee.__data__;if(!S||nt.length<H-1)return nt.push([ae,ye]),this.size=++Ee.size,this;Ee=this.__data__=new k(nt)}return Ee.set(ae,ye),this.size=Ee.size,this}g.exports=te}),fe=o((h,g)=>{var _=M(),S=A(),k=O(),H=z(),te=K(),ae=ie();function ye(Ee){var nt=this.__data__=new _(Ee);this.size=nt.size}ye.prototype.clear=S,ye.prototype.delete=k,ye.prototype.get=H,ye.prototype.has=te,ye.prototype.set=ae,g.exports=ye}),Ce=o((h,g)=>{var _=J(),S=function(){try{var k=_(Object,"defineProperty");return k({},"",{}),k}catch{}}();g.exports=S}),de=o((h,g)=>{var _=Ce();function S(k,H,te){H=="__proto__"&&_?_(k,H,{configurable:!0,enumerable:!0,value:te,writable:!0}):k[H]=te}g.exports=S}),Xe=o((h,g)=>{var _=de(),S=d();function k(H,te,ae){(ae!==void 0&&!S(H[te],ae)||ae===void 0&&!(te in H))&&_(H,te,ae)}g.exports=k}),Ie=o((h,g)=>{function _(S){return function(k,H,te){for(var ae=-1,ye=Object(k),Ee=te(k),nt=Ee.length;nt--;){var We=Ee[S?nt:++ae];if(H(ye[We],We,ye)===!1)break}return k}}g.exports=_}),Ye=o((h,g)=>{var _=Ie(),S=_();g.exports=S}),Je=o((h,g)=>{var _=me(),S=typeof h=="object"&&h&&!h.nodeType&&h,k=S&&typeof g=="object"&&g&&!g.nodeType&&g,H=k&&k.exports===S,te=H?_.Buffer:void 0,ae=te?te.allocUnsafe:void 0;function ye(Ee,nt){if(nt)return Ee.slice();var We=Ee.length,yt=ae?ae(We):new Ee.constructor(We);return Ee.copy(yt),yt}g.exports=ye}),Ge=o((h,g)=>{var _=me(),S=_.Uint8Array;g.exports=S}),wt=o((h,g)=>{var _=Ge();function S(k){var H=new k.constructor(k.byteLength);return new _(H).set(new _(k)),H}g.exports=S}),Ct=o((h,g)=>{var _=wt();function S(k,H){var te=H?_(k.buffer):k.buffer;return new k.constructor(te,k.byteOffset,k.length)}g.exports=S}),Wt=o((h,g)=>{function _(S,k){var H=-1,te=S.length;for(k||(k=Array(te));++H<te;)k[H]=S[H];return k}g.exports=_}),sn=o((h,g)=>{var _=I(),S=Object.create,k=function(){function H(){}return function(te){if(!_(te))return{};if(S)return S(te);H.prototype=te;var ae=new H;return H.prototype=void 0,ae}}();g.exports=k}),bn=o((h,g)=>{function _(S,k){return function(H){return S(k(H))}}g.exports=_}),Qe=o((h,g)=>{var _=bn(),S=_(Object.getPrototypeOf,Object);g.exports=S}),ot=o((h,g)=>{var _=Object.prototype;function S(k){var H=k&&k.constructor,te=typeof H=="function"&&H.prototype||_;return k===te}g.exports=S}),it=o((h,g)=>{var _=sn(),S=Qe(),k=ot();function H(te){return typeof te.constructor=="function"&&!k(te)?_(S(te)):{}}g.exports=H}),Vt=o((h,g)=>{function _(S){return S!=null&&typeof S=="object"}g.exports=_}),Qt=o((h,g)=>{var _=q(),S=Vt(),k="[object Arguments]";function H(te){return S(te)&&_(te)==k}g.exports=H}),kn=o((h,g)=>{var _=Qt(),S=Vt(),k=Object.prototype,H=k.hasOwnProperty,te=k.propertyIsEnumerable,ae=_(function(){return arguments}())?_:function(ye){return S(ye)&&H.call(ye,"callee")&&!te.call(ye,"callee")};g.exports=ae}),Ln=o((h,g)=>{var _=Array.isArray;g.exports=_}),Mn=o((h,g)=>{var _=9007199254740991;function S(k){return typeof k=="number"&&k>-1&&k%1==0&&k<=_}g.exports=S}),Zn=o((h,g)=>{var _=B(),S=Mn();function k(H){return H!=null&&S(H.length)&&!_(H)}g.exports=k}),en=o((h,g)=>{var _=Zn(),S=Vt();function k(H){return S(H)&&_(H)}g.exports=k}),wn=o((h,g)=>{function _(){return!1}g.exports=_}),En=o((h,g)=>{var _=me(),S=wn(),k=typeof h=="object"&&h&&!h.nodeType&&h,H=k&&typeof g=="object"&&g&&!g.nodeType&&g,te=H&&H.exports===k,ae=te?_.Buffer:void 0,ye=ae?ae.isBuffer:void 0,Ee=ye||S;g.exports=Ee}),Xn=o((h,g)=>{var _=q(),S=Qe(),k=Vt(),H="[object Object]",te=Function.prototype,ae=Object.prototype,ye=te.toString,Ee=ae.hasOwnProperty,nt=ye.call(Object);function We(yt){if(!k(yt)||_(yt)!=H)return!1;var It=S(yt);if(It===null)return!0;var tn=Ee.call(It,"constructor")&&It.constructor;return typeof tn=="function"&&tn instanceof tn&&ye.call(tn)==nt}g.exports=We}),dr=o((h,g)=>{var _=q(),S=Mn(),k=Vt(),H="[object Arguments]",te="[object Array]",ae="[object Boolean]",ye="[object Date]",Ee="[object Error]",nt="[object Function]",We="[object Map]",yt="[object Number]",It="[object Object]",tn="[object RegExp]",xn="[object Set]",Sn="[object String]",fr="[object WeakMap]",tt="[object ArrayBuffer]",st="[object DataView]",ft="[object Float32Array]",zt="[object Float64Array]",Lt="[object Int8Array]",Bt="[object Int16Array]",be="[object Int32Array]",ke="[object Uint8Array]",ze="[object Uint8ClampedArray]",je="[object Uint16Array]",Ue="[object Uint32Array]",He={};He[ft]=He[zt]=He[Lt]=He[Bt]=He[be]=He[ke]=He[ze]=He[je]=He[Ue]=!0,He[H]=He[te]=He[tt]=He[ae]=He[st]=He[ye]=He[Ee]=He[nt]=He[We]=He[yt]=He[It]=He[tn]=He[xn]=He[Sn]=He[fr]=!1;function ct(ht){return k(ht)&&S(ht.length)&&!!He[_(ht)]}g.exports=ct}),vr=o((h,g)=>{function _(S){return function(k){return S(k)}}g.exports=_}),sr=o((h,g)=>{var _=ne(),S=typeof h=="object"&&h&&!h.nodeType&&h,k=S&&typeof g=="object"&&g&&!g.nodeType&&g,H=k&&k.exports===S,te=H&&_.process,ae=function(){try{var ye=k&&k.require&&k.require("util").types;return ye||te&&te.binding&&te.binding("util")}catch{}}();g.exports=ae}),ut=o((h,g)=>{var _=dr(),S=vr(),k=sr(),H=k&&k.isTypedArray,te=H?S(H):_;g.exports=te}),rt=o((h,g)=>{function _(S,k){if(!(k==="constructor"&&typeof S[k]=="function")&&k!="__proto__")return S[k]}g.exports=_}),jt=o((h,g)=>{var _=de(),S=d(),k=Object.prototype,H=k.hasOwnProperty;function te(ae,ye,Ee){var nt=ae[ye];(!(H.call(ae,ye)&&S(nt,Ee))||Ee===void 0&&!(ye in ae))&&_(ae,ye,Ee)}g.exports=te}),Tn=o((h,g)=>{var _=jt(),S=de();function k(H,te,ae,ye){var Ee=!ae;ae||(ae={});for(var nt=-1,We=te.length;++nt<We;){var yt=te[nt],It=ye?ye(ae[yt],H[yt],yt,ae,H):void 0;It===void 0&&(It=H[yt]),Ee?S(ae,yt,It):_(ae,yt,It)}return ae}g.exports=k}),Yn=o((h,g)=>{function _(S,k){for(var H=-1,te=Array(S);++H<S;)te[H]=k(H);return te}g.exports=_}),Jt=o((h,g)=>{var _=9007199254740991,S=/^(?:0|[1-9]\d*)$/;function k(H,te){var ae=typeof H;return te=te??_,!!te&&(ae=="number"||ae!="symbol"&&S.test(H))&&H>-1&&H%1==0&&H<te}g.exports=k}),Ht=o((h,g)=>{var _=Yn(),S=kn(),k=Ln(),H=En(),te=Jt(),ae=ut(),ye=Object.prototype,Ee=ye.hasOwnProperty;function nt(We,yt){var It=k(We),tn=!It&&S(We),xn=!It&&!tn&&H(We),Sn=!It&&!tn&&!xn&&ae(We),fr=It||tn||xn||Sn,tt=fr?_(We.length,String):[],st=tt.length;for(var ft in We)(yt||Ee.call(We,ft))&&!(fr&&(ft=="length"||xn&&(ft=="offset"||ft=="parent")||Sn&&(ft=="buffer"||ft=="byteLength"||ft=="byteOffset")||te(ft,st)))&&tt.push(ft);return tt}g.exports=nt}),nn=o((h,g)=>{function _(S){var k=[];if(S!=null)for(var H in Object(S))k.push(H);return k}g.exports=_}),an=o((h,g)=>{var _=I(),S=ot(),k=nn(),H=Object.prototype,te=H.hasOwnProperty;function ae(ye){if(!_(ye))return k(ye);var Ee=S(ye),nt=[];for(var We in ye)We=="constructor"&&(Ee||!te.call(ye,We))||nt.push(We);return nt}g.exports=ae}),St=o((h,g)=>{var _=Ht(),S=an(),k=Zn();function H(te){return k(te)?_(te,!0):S(te)}g.exports=H}),Ut=o((h,g)=>{var _=Tn(),S=St();function k(H){return _(H,S(H))}g.exports=k}),Lr=o((h,g)=>{var _=Xe(),S=Je(),k=Ct(),H=Wt(),te=it(),ae=kn(),ye=Ln(),Ee=en(),nt=En(),We=B(),yt=I(),It=Xn(),tn=ut(),xn=rt(),Sn=Ut();function fr(tt,st,ft,zt,Lt,Bt,be){var ke=xn(tt,ft),ze=xn(st,ft),je=be.get(ze);if(je){_(tt,ft,je);return}var Ue=Bt?Bt(ke,ze,ft+"",tt,st,be):void 0,He=Ue===void 0;if(He){var ct=ye(ze),ht=!ct&&nt(ze),mt=!ct&&!ht&&tn(ze);Ue=ze,ct||ht||mt?ye(ke)?Ue=ke:Ee(ke)?Ue=H(ke):ht?(He=!1,Ue=S(ze,!0)):mt?(He=!1,Ue=k(ze,!0)):Ue=[]:It(ze)||ae(ze)?(Ue=ke,ae(ke)?Ue=Sn(ke):(!yt(ke)||We(ke))&&(Ue=te(ze))):He=!1}He&&(be.set(ze,Ue),Lt(Ue,ze,zt,Bt,be),be.delete(ze)),_(tt,ft,Ue)}g.exports=fr}),Ot=o((h,g)=>{var _=fe(),S=Xe(),k=Ye(),H=Lr(),te=I(),ae=St(),ye=rt();function Ee(nt,We,yt,It,tn){nt!==We&&k(We,function(xn,Sn){if(tn||(tn=new _),te(xn))H(nt,We,Sn,yt,Ee,It,tn);else{var fr=It?It(ye(nt,Sn),xn,Sn+"",nt,We,tn):void 0;fr===void 0&&(fr=xn),S(nt,Sn,fr)}},ae)}g.exports=Ee}),$n=o((h,g)=>{function _(S){return S}g.exports=_}),or=o((h,g)=>{function _(S,k,H){switch(H.length){case 0:return S.call(k);case 1:return S.call(k,H[0]);case 2:return S.call(k,H[0],H[1]);case 3:return S.call(k,H[0],H[1],H[2])}return S.apply(k,H)}g.exports=_}),Mi=o((h,g)=>{var _=or(),S=Math.max;function k(H,te,ae){return te=S(te===void 0?H.length-1:te,0),function(){for(var ye=arguments,Ee=-1,nt=S(ye.length-te,0),We=Array(nt);++Ee<nt;)We[Ee]=ye[te+Ee];Ee=-1;for(var yt=Array(te+1);++Ee<te;)yt[Ee]=ye[Ee];return yt[te]=ae(We),_(H,this,yt)}}g.exports=k}),Br=o((h,g)=>{function _(S){return function(){return S}}g.exports=_}),xr=o((h,g)=>{var _=Br(),S=Ce(),k=$n(),H=S?function(te,ae){return S(te,"toString",{configurable:!0,enumerable:!1,value:_(ae),writable:!0})}:k;g.exports=H}),ur=o((h,g)=>{var _=800,S=16,k=Date.now;function H(te){var ae=0,ye=0;return function(){var Ee=k(),nt=S-(Ee-ye);if(ye=Ee,nt>0){if(++ae>=_)return arguments[0]}else ae=0;return te.apply(void 0,arguments)}}g.exports=H}),gi=o((h,g)=>{var _=xr(),S=ur(),k=S(_);g.exports=k}),yr=o((h,g)=>{var _=$n(),S=Mi(),k=gi();function H(te,ae){return k(S(te,ae,_),te+"")}g.exports=H}),Gr=o((h,g)=>{var _=d(),S=Zn(),k=Jt(),H=I();function te(ae,ye,Ee){if(!H(Ee))return!1;var nt=typeof ye;return(nt=="number"?S(Ee)&&k(ye,Ee.length):nt=="string"&&ye in Ee)?_(Ee[ye],ae):!1}g.exports=te}),zr=o((h,g)=>{var _=yr(),S=Gr();function k(H){return _(function(te,ae){var ye=-1,Ee=ae.length,nt=Ee>1?ae[Ee-1]:void 0,We=Ee>2?ae[2]:void 0;for(nt=H.length>3&&typeof nt=="function"?(Ee--,nt):void 0,We&&S(ae[0],ae[1],We)&&(nt=Ee<3?void 0:nt,Ee=1),te=Object(te);++ye<Ee;){var yt=ae[ye];yt&&H(te,yt,ye,nt)}return te})}g.exports=k}),ln=o((h,g)=>{var _=Ot(),S=zr(),k=S(function(H,te,ae){_(H,te,ae)});g.exports=k}),_i=o((h,g)=>{var _=q(),S=Vt(),k="[object Symbol]";function H(te){return typeof te=="symbol"||S(te)&&_(te)==k}g.exports=H}),Ni=o((h,g)=>{var _=Ln(),S=_i(),k=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,H=/^\w*$/;function te(ae,ye){if(_(ae))return!1;var Ee=typeof ae;return Ee=="number"||Ee=="symbol"||Ee=="boolean"||ae==null||S(ae)?!0:H.test(ae)||!k.test(ae)||ye!=null&&ae in Object(ye)}g.exports=te}),Ui=o((h,g)=>{var _=Q(),S="Expected a function";function k(H,te){if(typeof H!="function"||te!=null&&typeof te!="function")throw new TypeError(S);var ae=function(){var ye=arguments,Ee=te?te.apply(this,ye):ye[0],nt=ae.cache;if(nt.has(Ee))return nt.get(Ee);var We=H.apply(this,ye);return ae.cache=nt.set(Ee,We)||nt,We};return ae.cache=new(k.Cache||_),ae}k.Cache=_,g.exports=k}),hi=o((h,g)=>{var _=Ui(),S=500;function k(H){var te=_(H,function(ye){return ae.size===S&&ae.clear(),ye}),ae=te.cache;return te}g.exports=k}),Ir=o((h,g)=>{var _=hi(),S=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,k=/\\(\\)?/g,H=_(function(te){var ae=[];return te.charCodeAt(0)===46&&ae.push(""),te.replace(S,function(ye,Ee,nt,We){ae.push(nt?We.replace(k,"$1"):Ee||ye)}),ae});g.exports=H}),di=o((h,g)=>{function _(S,k){for(var H=-1,te=S==null?0:S.length,ae=Array(te);++H<te;)ae[H]=k(S[H],H,S);return ae}g.exports=_}),Sr=o((h,g)=>{var _=pe(),S=di(),k=Ln(),H=_i(),te=_?_.prototype:void 0,ae=te?te.toString:void 0;function ye(Ee){if(typeof Ee=="string")return Ee;if(k(Ee))return S(Ee,ye)+"";if(H(Ee))return ae?ae.call(Ee):"";var nt=Ee+"";return nt=="0"&&1/Ee==-1/0?"-0":nt}g.exports=ye}),ki=o((h,g)=>{var _=Sr();function S(k){return k==null?"":_(k)}g.exports=S}),js=o((h,g)=>{var _=Ln(),S=Ni(),k=Ir(),H=ki();function te(ae,ye){return _(ae)?ae:S(ae,ye)?[ae]:k(H(ae))}g.exports=te}),Ea=o((h,g)=>{var _=_i();function S(k){if(typeof k=="string"||_(k))return k;var H=k+"";return H=="0"&&1/k==-1/0?"-0":H}g.exports=S}),wi=o((h,g)=>{var _=js(),S=Ea();function k(H,te){te=_(te,H);for(var ae=0,ye=te.length;H!=null&&ae<ye;)H=H[S(te[ae++])];return ae&&ae==ye?H:void 0}g.exports=k}),On=o((h,g)=>{var _=wi();function S(k,H,te){var ae=k==null?void 0:_(k,H);return ae===void 0?te:ae}g.exports=S}),br=o((h,g)=>{(function(_,S){typeof h=="object"&&typeof g<"u"?g.exports=S():(_=_||self).RBush=S()})(h,function(){function _(tt,st,ft,zt,Lt){(function Bt(be,ke,ze,je,Ue){for(;je>ze;){if(je-ze>600){var He=je-ze+1,ct=ke-ze+1,ht=Math.log(He),mt=.5*Math.exp(2*ht/3),Mt=.5*Math.sqrt(ht*mt*(He-mt)/He)*(ct-He/2<0?-1:1),kt=Math.max(ze,Math.floor(ke-ct*mt/He+Mt)),cn=Math.min(je,Math.floor(ke+(He-ct)*mt/He+Mt));Bt(be,ke,kt,cn,Ue)}var Un=be[ke],qn=ze,rr=je;for(S(be,ze,ke),Ue(be[je],Un)>0&&S(be,ze,je);qn<rr;){for(S(be,qn,rr),qn++,rr--;Ue(be[qn],Un)<0;)qn++;for(;Ue(be[rr],Un)>0;)rr--}Ue(be[ze],Un)===0?S(be,ze,rr):S(be,++rr,je),rr<=ke&&(ze=rr+1),ke<=rr&&(je=rr-1)}})(tt,st,ft||0,zt||tt.length-1,Lt||k)}function S(tt,st,ft){var zt=tt[st];tt[st]=tt[ft],tt[ft]=zt}function k(tt,st){return tt<st?-1:tt>st?1:0}var H=function(tt){tt===void 0&&(tt=9),this._maxEntries=Math.max(4,tt),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function te(tt,st,ft){if(!ft)return st.indexOf(tt);for(var zt=0;zt<st.length;zt++)if(ft(tt,st[zt]))return zt;return-1}function ae(tt,st){ye(tt,0,tt.children.length,st,tt)}function ye(tt,st,ft,zt,Lt){Lt||(Lt=Sn(null)),Lt.minX=1/0,Lt.minY=1/0,Lt.maxX=-1/0,Lt.maxY=-1/0;for(var Bt=st;Bt<ft;Bt++){var be=tt.children[Bt];Ee(Lt,tt.leaf?zt(be):be)}return Lt}function Ee(tt,st){return tt.minX=Math.min(tt.minX,st.minX),tt.minY=Math.min(tt.minY,st.minY),tt.maxX=Math.max(tt.maxX,st.maxX),tt.maxY=Math.max(tt.maxY,st.maxY),tt}function nt(tt,st){return tt.minX-st.minX}function We(tt,st){return tt.minY-st.minY}function yt(tt){return(tt.maxX-tt.minX)*(tt.maxY-tt.minY)}function It(tt){return tt.maxX-tt.minX+(tt.maxY-tt.minY)}function tn(tt,st){return tt.minX<=st.minX&&tt.minY<=st.minY&&st.maxX<=tt.maxX&&st.maxY<=tt.maxY}function xn(tt,st){return st.minX<=tt.maxX&&st.minY<=tt.maxY&&st.maxX>=tt.minX&&st.maxY>=tt.minY}function Sn(tt){return{children:tt,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function fr(tt,st,ft,zt,Lt){for(var Bt=[st,ft];Bt.length;)if(!((ft=Bt.pop())-(st=Bt.pop())<=zt)){var be=st+Math.ceil((ft-st)/zt/2)*zt;_(tt,be,st,ft,Lt),Bt.push(st,be,be,ft)}}return H.prototype.all=function(){return this._all(this.data,[])},H.prototype.search=function(tt){var st=this.data,ft=[];if(!xn(tt,st))return ft;for(var zt=this.toBBox,Lt=[];st;){for(var Bt=0;Bt<st.children.length;Bt++){var be=st.children[Bt],ke=st.leaf?zt(be):be;xn(tt,ke)&&(st.leaf?ft.push(be):tn(tt,ke)?this._all(be,ft):Lt.push(be))}st=Lt.pop()}return ft},H.prototype.collides=function(tt){var st=this.data;if(!xn(tt,st))return!1;for(var ft=[];st;){for(var zt=0;zt<st.children.length;zt++){var Lt=st.children[zt],Bt=st.leaf?this.toBBox(Lt):Lt;if(xn(tt,Bt)){if(st.leaf||tn(tt,Bt))return!0;ft.push(Lt)}}st=ft.pop()}return!1},H.prototype.load=function(tt){if(!tt||!tt.length)return this;if(tt.length<this._minEntries){for(var st=0;st<tt.length;st++)this.insert(tt[st]);return this}var ft=this._build(tt.slice(),0,tt.length-1,0);if(this.data.children.length)if(this.data.height===ft.height)this._splitRoot(this.data,ft);else{if(this.data.height<ft.height){var zt=this.data;this.data=ft,ft=zt}this._insert(ft,this.data.height-ft.height-1,!0)}else this.data=ft;return this},H.prototype.insert=function(tt){return tt&&this._insert(tt,this.data.height-1),this},H.prototype.clear=function(){return this.data=Sn([]),this},H.prototype.remove=function(tt,st){if(!tt)return this;for(var ft,zt,Lt,Bt=this.data,be=this.toBBox(tt),ke=[],ze=[];Bt||ke.length;){if(Bt||(Bt=ke.pop(),zt=ke[ke.length-1],ft=ze.pop(),Lt=!0),Bt.leaf){var je=te(tt,Bt.children,st);if(je!==-1)return Bt.children.splice(je,1),ke.push(Bt),this._condense(ke),this}Lt||Bt.leaf||!tn(Bt,be)?zt?(ft++,Bt=zt.children[ft],Lt=!1):Bt=null:(ke.push(Bt),ze.push(ft),ft=0,zt=Bt,Bt=Bt.children[0])}return this},H.prototype.toBBox=function(tt){return tt},H.prototype.compareMinX=function(tt,st){return tt.minX-st.minX},H.prototype.compareMinY=function(tt,st){return tt.minY-st.minY},H.prototype.toJSON=function(){return this.data},H.prototype.fromJSON=function(tt){return this.data=tt,this},H.prototype._all=function(tt,st){for(var ft=[];tt;)tt.leaf?st.push.apply(st,tt.children):ft.push.apply(ft,tt.children),tt=ft.pop();return st},H.prototype._build=function(tt,st,ft,zt){var Lt,Bt=ft-st+1,be=this._maxEntries;if(Bt<=be)return ae(Lt=Sn(tt.slice(st,ft+1)),this.toBBox),Lt;zt||(zt=Math.ceil(Math.log(Bt)/Math.log(be)),be=Math.ceil(Bt/Math.pow(be,zt-1))),(Lt=Sn([])).leaf=!1,Lt.height=zt;var ke=Math.ceil(Bt/be),ze=ke*Math.ceil(Math.sqrt(be));fr(tt,st,ft,ze,this.compareMinX);for(var je=st;je<=ft;je+=ze){var Ue=Math.min(je+ze-1,ft);fr(tt,je,Ue,ke,this.compareMinY);for(var He=je;He<=Ue;He+=ke){var ct=Math.min(He+ke-1,Ue);Lt.children.push(this._build(tt,He,ct,zt-1))}}return ae(Lt,this.toBBox),Lt},H.prototype._chooseSubtree=function(tt,st,ft,zt){for(;zt.push(st),!st.leaf&&zt.length-1!==ft;){for(var Lt=1/0,Bt=1/0,be=void 0,ke=0;ke<st.children.length;ke++){var ze=st.children[ke],je=yt(ze),Ue=(He=tt,ct=ze,(Math.max(ct.maxX,He.maxX)-Math.min(ct.minX,He.minX))*(Math.max(ct.maxY,He.maxY)-Math.min(ct.minY,He.minY))-je);Ue<Bt?(Bt=Ue,Lt=je<Lt?je:Lt,be=ze):Ue===Bt&&je<Lt&&(Lt=je,be=ze)}st=be||st.children[0]}var He,ct;return st},H.prototype._insert=function(tt,st,ft){var zt=ft?tt:this.toBBox(tt),Lt=[],Bt=this._chooseSubtree(zt,this.data,st,Lt);for(Bt.children.push(tt),Ee(Bt,zt);st>=0&&Lt[st].children.length>this._maxEntries;)this._split(Lt,st),st--;this._adjustParentBBoxes(zt,Lt,st)},H.prototype._split=function(tt,st){var ft=tt[st],zt=ft.children.length,Lt=this._minEntries;this._chooseSplitAxis(ft,Lt,zt);var Bt=this._chooseSplitIndex(ft,Lt,zt),be=Sn(ft.children.splice(Bt,ft.children.length-Bt));be.height=ft.height,be.leaf=ft.leaf,ae(ft,this.toBBox),ae(be,this.toBBox),st?tt[st-1].children.push(be):this._splitRoot(ft,be)},H.prototype._splitRoot=function(tt,st){this.data=Sn([tt,st]),this.data.height=tt.height+1,this.data.leaf=!1,ae(this.data,this.toBBox)},H.prototype._chooseSplitIndex=function(tt,st,ft){for(var zt,Lt,Bt,be,ke,ze,je,Ue=1/0,He=1/0,ct=st;ct<=ft-st;ct++){var ht=ye(tt,0,ct,this.toBBox),mt=ye(tt,ct,ft,this.toBBox),Mt=(Lt=ht,Bt=mt,be=void 0,ke=void 0,ze=void 0,je=void 0,be=Math.max(Lt.minX,Bt.minX),ke=Math.max(Lt.minY,Bt.minY),ze=Math.min(Lt.maxX,Bt.maxX),je=Math.min(Lt.maxY,Bt.maxY),Math.max(0,ze-be)*Math.max(0,je-ke)),kt=yt(ht)+yt(mt);Mt<Ue?(Ue=Mt,zt=ct,He=kt<He?kt:He):Mt===Ue&&kt<He&&(He=kt,zt=ct)}return zt||ft-st},H.prototype._chooseSplitAxis=function(tt,st,ft){var zt=tt.leaf?this.compareMinX:nt,Lt=tt.leaf?this.compareMinY:We;this._allDistMargin(tt,st,ft,zt)<this._allDistMargin(tt,st,ft,Lt)&&tt.children.sort(zt)},H.prototype._allDistMargin=function(tt,st,ft,zt){tt.children.sort(zt);for(var Lt=this.toBBox,Bt=ye(tt,0,st,Lt),be=ye(tt,ft-st,ft,Lt),ke=It(Bt)+It(be),ze=st;ze<ft-st;ze++){var je=tt.children[ze];Ee(Bt,tt.leaf?Lt(je):je),ke+=It(Bt)}for(var Ue=ft-st-1;Ue>=st;Ue--){var He=tt.children[Ue];Ee(be,tt.leaf?Lt(He):He),ke+=It(be)}return ke},H.prototype._adjustParentBBoxes=function(tt,st,ft){for(var zt=ft;zt>=0;zt--)Ee(st[zt],tt)},H.prototype._condense=function(tt){for(var st=tt.length-1,ft=void 0;st>=0;st--)tt[st].children.length===0?st>0?(ft=tt[st-1].children).splice(ft.indexOf(tt[st]),1):this.clear():ae(tt[st],this.toBBox)},H})}),Wn=o(h=>{Object.defineProperty(h,"__esModule",{value:!0}),h.earthRadius=63710088e-1,h.factors={centimeters:h.earthRadius*100,centimetres:h.earthRadius*100,degrees:h.earthRadius/111325,feet:h.earthRadius*3.28084,inches:h.earthRadius*39.37,kilometers:h.earthRadius/1e3,kilometres:h.earthRadius/1e3,meters:h.earthRadius,metres:h.earthRadius,miles:h.earthRadius/1609.344,millimeters:h.earthRadius*1e3,millimetres:h.earthRadius*1e3,nauticalmiles:h.earthRadius/1852,radians:1,yards:h.earthRadius*1.0936},h.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/h.earthRadius,yards:1.0936133},h.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function g(je,Ue,He){He===void 0&&(He={});var ct={type:"Feature"};return(He.id===0||He.id)&&(ct.id=He.id),He.bbox&&(ct.bbox=He.bbox),ct.properties=Ue||{},ct.geometry=je,ct}h.feature=g;function _(je,Ue,He){switch(je){case"Point":return S(Ue).geometry;case"LineString":return ae(Ue).geometry;case"Polygon":return H(Ue).geometry;case"MultiPoint":return We(Ue).geometry;case"MultiLineString":return nt(Ue).geometry;case"MultiPolygon":return yt(Ue).geometry;default:throw new Error(je+" is invalid")}}h.geometry=_;function S(je,Ue,He){if(He===void 0&&(He={}),!je)throw new Error("coordinates is required");if(!Array.isArray(je))throw new Error("coordinates must be an Array");if(je.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Bt(je[0])||!Bt(je[1]))throw new Error("coordinates must contain numbers");var ct={type:"Point",coordinates:je};return g(ct,Ue,He)}h.point=S;function k(je,Ue,He){return He===void 0&&(He={}),Ee(je.map(function(ct){return S(ct,Ue)}),He)}h.points=k;function H(je,Ue,He){He===void 0&&(He={});for(var ct=0,ht=je;ct<ht.length;ct++){var mt=ht[ct];if(mt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Mt=0;Mt<mt[mt.length-1].length;Mt++)if(mt[mt.length-1][Mt]!==mt[0][Mt])throw new Error("First and last Position are not equivalent.")}var kt={type:"Polygon",coordinates:je};return g(kt,Ue,He)}h.polygon=H;function te(je,Ue,He){return He===void 0&&(He={}),Ee(je.map(function(ct){return H(ct,Ue)}),He)}h.polygons=te;function ae(je,Ue,He){if(He===void 0&&(He={}),je.length<2)throw new Error("coordinates must be an array of two or more positions");var ct={type:"LineString",coordinates:je};return g(ct,Ue,He)}h.lineString=ae;function ye(je,Ue,He){return He===void 0&&(He={}),Ee(je.map(function(ct){return ae(ct,Ue)}),He)}h.lineStrings=ye;function Ee(je,Ue){Ue===void 0&&(Ue={});var He={type:"FeatureCollection"};return Ue.id&&(He.id=Ue.id),Ue.bbox&&(He.bbox=Ue.bbox),He.features=je,He}h.featureCollection=Ee;function nt(je,Ue,He){He===void 0&&(He={});var ct={type:"MultiLineString",coordinates:je};return g(ct,Ue,He)}h.multiLineString=nt;function We(je,Ue,He){He===void 0&&(He={});var ct={type:"MultiPoint",coordinates:je};return g(ct,Ue,He)}h.multiPoint=We;function yt(je,Ue,He){He===void 0&&(He={});var ct={type:"MultiPolygon",coordinates:je};return g(ct,Ue,He)}h.multiPolygon=yt;function It(je,Ue,He){He===void 0&&(He={});var ct={type:"GeometryCollection",geometries:je};return g(ct,Ue,He)}h.geometryCollection=It;function tn(je,Ue){if(Ue===void 0&&(Ue=0),Ue&&!(Ue>=0))throw new Error("precision must be a positive number");var He=Math.pow(10,Ue||0);return Math.round(je*He)/He}h.round=tn;function xn(je,Ue){Ue===void 0&&(Ue="kilometers");var He=h.factors[Ue];if(!He)throw new Error(Ue+" units is invalid");return je*He}h.radiansToLength=xn;function Sn(je,Ue){Ue===void 0&&(Ue="kilometers");var He=h.factors[Ue];if(!He)throw new Error(Ue+" units is invalid");return je/He}h.lengthToRadians=Sn;function fr(je,Ue){return st(Sn(je,Ue))}h.lengthToDegrees=fr;function tt(je){var Ue=je%360;return Ue<0&&(Ue+=360),Ue}h.bearingToAzimuth=tt;function st(je){var Ue=je%(2*Math.PI);return Ue*180/Math.PI}h.radiansToDegrees=st;function ft(je){var Ue=je%360;return Ue*Math.PI/180}h.degreesToRadians=ft;function zt(je,Ue,He){if(Ue===void 0&&(Ue="kilometers"),He===void 0&&(He="kilometers"),!(je>=0))throw new Error("length must be a positive number");return xn(Sn(je,Ue),He)}h.convertLength=zt;function Lt(je,Ue,He){if(Ue===void 0&&(Ue="meters"),He===void 0&&(He="kilometers"),!(je>=0))throw new Error("area must be a positive number");var ct=h.areaFactors[Ue];if(!ct)throw new Error("invalid original units");var ht=h.areaFactors[He];if(!ht)throw new Error("invalid final units");return je/ct*ht}h.convertArea=Lt;function Bt(je){return!isNaN(je)&&je!==null&&!Array.isArray(je)}h.isNumber=Bt;function be(je){return!!je&&je.constructor===Object}h.isObject=be;function ke(je){if(!je)throw new Error("bbox is required");if(!Array.isArray(je))throw new Error("bbox must be an Array");if(je.length!==4&&je.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");je.forEach(function(Ue){if(!Bt(Ue))throw new Error("bbox must only contain numbers")})}h.validateBBox=ke;function ze(je){if(!je)throw new Error("id is required");if(["string","number"].indexOf(typeof je)===-1)throw new Error("id must be a number or a string")}h.validateId=ze}),Hi=o(h=>{Object.defineProperty(h,"__esModule",{value:!0});var g=Wn();function _(st,ft,zt){if(st!==null)for(var Lt,Bt,be,ke,ze,je,Ue,He=0,ct=0,ht,mt=st.type,Mt=mt==="FeatureCollection",kt=mt==="Feature",cn=Mt?st.features.length:1,Un=0;Un<cn;Un++){Ue=Mt?st.features[Un].geometry:kt?st.geometry:st,ht=Ue?Ue.type==="GeometryCollection":!1,ze=ht?Ue.geometries.length:1;for(var qn=0;qn<ze;qn++){var rr=0,yi=0;if(ke=ht?Ue.geometries[qn]:Ue,ke!==null){je=ke.coordinates;var Ri=ke.type;switch(He=zt&&(Ri==="Polygon"||Ri==="MultiPolygon")?1:0,Ri){case null:break;case"Point":if(ft(je,ct,Un,rr,yi)===!1)return!1;ct++,rr++;break;case"LineString":case"MultiPoint":for(Lt=0;Lt<je.length;Lt++){if(ft(je[Lt],ct,Un,rr,yi)===!1)return!1;ct++,Ri==="MultiPoint"&&rr++}Ri==="LineString"&&rr++;break;case"Polygon":case"MultiLineString":for(Lt=0;Lt<je.length;Lt++){for(Bt=0;Bt<je[Lt].length-He;Bt++){if(ft(je[Lt][Bt],ct,Un,rr,yi)===!1)return!1;ct++}Ri==="MultiLineString"&&rr++,Ri==="Polygon"&&yi++}Ri==="Polygon"&&rr++;break;case"MultiPolygon":for(Lt=0;Lt<je.length;Lt++){for(yi=0,Bt=0;Bt<je[Lt].length;Bt++){for(be=0;be<je[Lt][Bt].length-He;be++){if(ft(je[Lt][Bt][be],ct,Un,rr,yi)===!1)return!1;ct++}yi++}rr++}break;case"GeometryCollection":for(Lt=0;Lt<ke.geometries.length;Lt++)if(_(ke.geometries[Lt],ft,zt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function S(st,ft,zt,Lt){var Bt=zt;return _(st,function(be,ke,ze,je,Ue){ke===0&&zt===void 0?Bt=be:Bt=ft(Bt,be,ke,ze,je,Ue)},Lt),Bt}function k(st,ft){var zt;switch(st.type){case"FeatureCollection":for(zt=0;zt<st.features.length&&ft(st.features[zt].properties,zt)!==!1;zt++);break;case"Feature":ft(st.properties,0);break}}function H(st,ft,zt){var Lt=zt;return k(st,function(Bt,be){be===0&&zt===void 0?Lt=Bt:Lt=ft(Lt,Bt,be)}),Lt}function te(st,ft){if(st.type==="Feature")ft(st,0);else if(st.type==="FeatureCollection")for(var zt=0;zt<st.features.length&&ft(st.features[zt],zt)!==!1;zt++);}function ae(st,ft,zt){var Lt=zt;return te(st,function(Bt,be){be===0&&zt===void 0?Lt=Bt:Lt=ft(Lt,Bt,be)}),Lt}function ye(st){var ft=[];return _(st,function(zt){ft.push(zt)}),ft}function Ee(st,ft){var zt,Lt,Bt,be,ke,ze,je,Ue,He,ct,ht=0,mt=st.type==="FeatureCollection",Mt=st.type==="Feature",kt=mt?st.features.length:1;for(zt=0;zt<kt;zt++){for(ze=mt?st.features[zt].geometry:Mt?st.geometry:st,Ue=mt?st.features[zt].properties:Mt?st.properties:{},He=mt?st.features[zt].bbox:Mt?st.bbox:void 0,ct=mt?st.features[zt].id:Mt?st.id:void 0,je=ze?ze.type==="GeometryCollection":!1,ke=je?ze.geometries.length:1,Bt=0;Bt<ke;Bt++){if(be=je?ze.geometries[Bt]:ze,be===null){if(ft(null,ht,Ue,He,ct)===!1)return!1;continue}switch(be.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(ft(be,ht,Ue,He,ct)===!1)return!1;break}case"GeometryCollection":{for(Lt=0;Lt<be.geometries.length;Lt++)if(ft(be.geometries[Lt],ht,Ue,He,ct)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ht++}}function nt(st,ft,zt){var Lt=zt;return Ee(st,function(Bt,be,ke,ze,je){be===0&&zt===void 0?Lt=Bt:Lt=ft(Lt,Bt,be,ke,ze,je)}),Lt}function We(st,ft){Ee(st,function(zt,Lt,Bt,be,ke){var ze=zt===null?null:zt.type;switch(ze){case null:case"Point":case"LineString":case"Polygon":return ft(g.feature(zt,Bt,{bbox:be,id:ke}),Lt,0)===!1?!1:void 0}var je;switch(ze){case"MultiPoint":je="Point";break;case"MultiLineString":je="LineString";break;case"MultiPolygon":je="Polygon";break}for(var Ue=0;Ue<zt.coordinates.length;Ue++){var He=zt.coordinates[Ue],ct={type:je,coordinates:He};if(ft(g.feature(ct,Bt),Lt,Ue)===!1)return!1}})}function yt(st,ft,zt){var Lt=zt;return We(st,function(Bt,be,ke){be===0&&ke===0&&zt===void 0?Lt=Bt:Lt=ft(Lt,Bt,be,ke)}),Lt}function It(st,ft){We(st,function(zt,Lt,Bt){var be=0;if(zt.geometry){var ke=zt.geometry.type;if(!(ke==="Point"||ke==="MultiPoint")){var ze,je=0,Ue=0,He=0;if(_(zt,function(ct,ht,mt,Mt,kt){if(ze===void 0||Lt>je||Mt>Ue||kt>He){ze=ct,je=Lt,Ue=Mt,He=kt,be=0;return}var cn=g.lineString([ze,ct],zt.properties);if(ft(cn,Lt,Bt,kt,be)===!1)return!1;be++,ze=ct})===!1)return!1}}})}function tn(st,ft,zt){var Lt=zt,Bt=!1;return It(st,function(be,ke,ze,je,Ue){Bt===!1&&zt===void 0?Lt=be:Lt=ft(Lt,be,ke,ze,je,Ue),Bt=!0}),Lt}function xn(st,ft){if(!st)throw new Error("geojson is required");We(st,function(zt,Lt,Bt){if(zt.geometry!==null){var be=zt.geometry.type,ke=zt.geometry.coordinates;switch(be){case"LineString":if(ft(zt,Lt,Bt,0,0)===!1)return!1;break;case"Polygon":for(var ze=0;ze<ke.length;ze++)if(ft(g.lineString(ke[ze],zt.properties),Lt,Bt,ze)===!1)return!1;break}}})}function Sn(st,ft,zt){var Lt=zt;return xn(st,function(Bt,be,ke,ze){be===0&&zt===void 0?Lt=Bt:Lt=ft(Lt,Bt,be,ke,ze)}),Lt}function fr(st,ft){if(ft=ft||{},!g.isObject(ft))throw new Error("options is invalid");var zt=ft.featureIndex||0,Lt=ft.multiFeatureIndex||0,Bt=ft.geometryIndex||0,be=ft.segmentIndex||0,ke=ft.properties,ze;switch(st.type){case"FeatureCollection":zt<0&&(zt=st.features.length+zt),ke=ke||st.features[zt].properties,ze=st.features[zt].geometry;break;case"Feature":ke=ke||st.properties,ze=st.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":ze=st;break;default:throw new Error("geojson is invalid")}if(ze===null)return null;var je=ze.coordinates;switch(ze.type){case"Point":case"MultiPoint":return null;case"LineString":return be<0&&(be=je.length+be-1),g.lineString([je[be],je[be+1]],ke,ft);case"Polygon":return Bt<0&&(Bt=je.length+Bt),be<0&&(be=je[Bt].length+be-1),g.lineString([je[Bt][be],je[Bt][be+1]],ke,ft);case"MultiLineString":return Lt<0&&(Lt=je.length+Lt),be<0&&(be=je[Lt].length+be-1),g.lineString([je[Lt][be],je[Lt][be+1]],ke,ft);case"MultiPolygon":return Lt<0&&(Lt=je.length+Lt),Bt<0&&(Bt=je[Lt].length+Bt),be<0&&(be=je[Lt][Bt].length-be-1),g.lineString([je[Lt][Bt][be],je[Lt][Bt][be+1]],ke,ft)}throw new Error("geojson is invalid")}function tt(st,ft){if(ft=ft||{},!g.isObject(ft))throw new Error("options is invalid");var zt=ft.featureIndex||0,Lt=ft.multiFeatureIndex||0,Bt=ft.geometryIndex||0,be=ft.coordIndex||0,ke=ft.properties,ze;switch(st.type){case"FeatureCollection":zt<0&&(zt=st.features.length+zt),ke=ke||st.features[zt].properties,ze=st.features[zt].geometry;break;case"Feature":ke=ke||st.properties,ze=st.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":ze=st;break;default:throw new Error("geojson is invalid")}if(ze===null)return null;var je=ze.coordinates;switch(ze.type){case"Point":return g.point(je,ke,ft);case"MultiPoint":return Lt<0&&(Lt=je.length+Lt),g.point(je[Lt],ke,ft);case"LineString":return be<0&&(be=je.length+be),g.point(je[be],ke,ft);case"Polygon":return Bt<0&&(Bt=je.length+Bt),be<0&&(be=je[Bt].length+be),g.point(je[Bt][be],ke,ft);case"MultiLineString":return Lt<0&&(Lt=je.length+Lt),be<0&&(be=je[Lt].length+be),g.point(je[Lt][be],ke,ft);case"MultiPolygon":return Lt<0&&(Lt=je.length+Lt),Bt<0&&(Bt=je[Lt].length+Bt),be<0&&(be=je[Lt][Bt].length-be),g.point(je[Lt][Bt][be],ke,ft)}throw new Error("geojson is invalid")}h.coordAll=ye,h.coordEach=_,h.coordReduce=S,h.featureEach=te,h.featureReduce=ae,h.findPoint=tt,h.findSegment=fr,h.flattenEach=We,h.flattenReduce=yt,h.geomEach=Ee,h.geomReduce=nt,h.lineEach=xn,h.lineReduce=Sn,h.propEach=k,h.propReduce=H,h.segmentEach=It,h.segmentReduce=tn}),Ki=o(h=>{Object.defineProperty(h,"__esModule",{value:!0});var g=Hi();function _(S){var k=[1/0,1/0,-1/0,-1/0];return g.coordEach(S,function(H){k[0]>H[0]&&(k[0]=H[0]),k[1]>H[1]&&(k[1]=H[1]),k[2]<H[0]&&(k[2]=H[0]),k[3]<H[1]&&(k[3]=H[1])}),k}_.default=_,h.default=_}),ds=o((h,g)=>{var _=br(),S=Wn(),k=Hi(),H=Ki().default,te=k.featureEach;k.coordEach,S.polygon;var ae=S.featureCollection;function ye(Ee){var nt=new _(Ee);return nt.insert=function(We){if(We.type!=="Feature")throw new Error("invalid feature");return We.bbox=We.bbox?We.bbox:H(We),_.prototype.insert.call(this,We)},nt.load=function(We){var yt=[];return Array.isArray(We)?We.forEach(function(It){if(It.type!=="Feature")throw new Error("invalid features");It.bbox=It.bbox?It.bbox:H(It),yt.push(It)}):te(We,function(It){if(It.type!=="Feature")throw new Error("invalid features");It.bbox=It.bbox?It.bbox:H(It),yt.push(It)}),_.prototype.load.call(this,yt)},nt.remove=function(We,yt){if(We.type!=="Feature")throw new Error("invalid feature");return We.bbox=We.bbox?We.bbox:H(We),_.prototype.remove.call(this,We,yt)},nt.clear=function(){return _.prototype.clear.call(this)},nt.search=function(We){var yt=_.prototype.search.call(this,this.toBBox(We));return ae(yt)},nt.collides=function(We){return _.prototype.collides.call(this,this.toBBox(We))},nt.all=function(){var We=_.prototype.all.call(this);return ae(We)},nt.toJSON=function(){return _.prototype.toJSON.call(this)},nt.fromJSON=function(We){return _.prototype.fromJSON.call(this,We)},nt.toBBox=function(We){var yt;if(We.bbox)yt=We.bbox;else if(Array.isArray(We)&&We.length===4)yt=We;else if(Array.isArray(We)&&We.length===6)yt=[We[0],We[1],We[3],We[4]];else if(We.type==="Feature")yt=H(We);else if(We.type==="FeatureCollection")yt=H(We);else throw new Error("invalid geojson");return{minX:yt[0],minY:yt[1],maxX:yt[2],maxY:yt[3]}},nt}g.exports=ye,g.exports.default=ye});Array.prototype.findIndex=Array.prototype.findIndex||function(h){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var g=Object(this),_=g.length>>>0,S=arguments[1],k=0;k<_;k++)if(h.call(S,g[k],k,g))return k;return-1},Array.prototype.find=Array.prototype.find||function(h){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var g=Object(this),_=g.length>>>0,S=arguments[1],k=0;k<_;k++){var H=g[k];if(h.call(S,H,k,g))return H}},typeof Object.assign!="function"&&(Object.assign=function(h){if(h==null)throw new TypeError("Cannot convert undefined or null to object");h=Object(h);for(var g=1;g<arguments.length;g++){var _=arguments[g];if(_!=null)for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(h[S]=_[S])}return h}),function(h){h.forEach(function(g){g.hasOwnProperty("remove")||Object.defineProperty(g,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(h,g){if(this==null)throw new TypeError('"this" is null or not defined');var _=Object(this),S=_.length>>>0;if(S===0)return!1;var k=g|0,H=Math.max(k>=0?k:S-Math.abs(k),0);function te(ae,ye){return ae===ye||typeof ae=="number"&&typeof ye=="number"&&isNaN(ae)&&isNaN(ye)}for(;H<S;){if(te(_[H],h))return!0;H++}return!1}});var po={version:"2.18.3"},Nn=l(ln()),$r={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Wi={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex lschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer lschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Lnge",segmentLength:"Segment Lnge",area:"Flche",radius:"Radius",perimeter:"Umfang",height:"Hhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},Ii={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},Er={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},Dn={tooltips:{placeMarker:"Adaug un punct",firstVertex:"Apas aici pentru a aduga primul Vertex",continueLine:"Apas aici pentru a continua desenul",finishLine:"Apas pe orice obiect pentru a finisa desenul",finishPoly:"Apas pe primul obiect pentru a finisa",finishRect:"Apas pentru a finisa",startCircle:"Apas pentru a desena un cerc",finishCircle:"Apas pentru a finisa un cerc",placeCircleMarker:"Adaug un punct"},actions:{finish:"Termin",cancel:"Anuleaz",removeLastVertex:"terge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaug o bulin",drawPolyButton:"Deseneaz un poligon",drawLineButton:"Deseneaz o linie",drawCircleButton:"Deseneaz un cerc",drawRectButton:"Deseneaz un dreptunghi",editButton:"Editeaz straturile",dragButton:"Mut straturile",cutButton:"Taie straturile",deleteButton:"terge straturile",drawCircleMarkerButton:"Deseneaz marcatorul cercului",snappingButton:"Fixai marcatorul glisat pe alte straturi i vrfuri",pinningButton:"Fixai vrfurile partajate mpreun",rotateButton:"Rotii stratul"}},mn={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:"     ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" "}},Fr={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vrtice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del crculo",finishCircle:"Presiona para finalizar el crculo",placeCircleMarker:"Presiona para colocar un marcador de crculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar ltimo vrtice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polgono",drawLineButton:"Dibujar Lnea",drawCircleButton:"Dibujar Crculo",drawRectButton:"Dibujar Rectngulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Crculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vrtices",pinningButton:"Fijar juntos los vrtices compartidos",rotateButton:"Rotar capa"}},ai={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beindigen",finishPoly:"Klik op het eerst punt om te beindigen",finishRect:"Klik om te beindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},ms={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer  dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"diter des calques",dragButton:"Dplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"pingler ensemble les sommets partags",rotateButton:"Tourner des calques"}},Oo={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},Xs={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},ra={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vrtice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do crculo",finishCircle:"Clique para finalizar o crculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover ltimo vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},fa={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vrtice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do crculo",finishCircle:"Clique para terminar o crculo",placeCircleMarker:"Clique para colocar marcador de crculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover ltimo Vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},mi={tooltips:{placeMarker:"Kliknij, aby umieci znacznik",firstVertex:"Kliknij, aby umieci pierwszy wierzchoek",continueLine:"Kliknij, aby kontynuowa rysowanie",finishLine:"Kliknij dowolny istniejcy znacznik, aby zakoczy",finishPoly:"Kliknij pierwszy znacznik, aby zakoczy",finishRect:"Kliknij, aby zakoczy",startCircle:"Kliknij, aby umieci rodek okrgu",finishCircle:"Kliknij, aby zakoczy okrg",placeCircleMarker:"Kliknij, aby umieci znacznik okrgu",placeText:"Kliknij, aby umieci tekst"},actions:{finish:"Zakocz",cancel:"Anuluj",removeLastVertex:"Usu ostatni wierzchoek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokt",drawLineButton:"Rysuj lini",drawCircleButton:"Rysuj okrg",drawRectButton:"Rysuj prostokt",editButton:"Edytuj warstwy",dragButton:"Przecignij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usu warstwy",drawCircleMarkerButton:"Rysuj znacznik okrgy",snappingButton:"Przycignij przenoszony znacznik do innych warstw i wierzchokw",pinningButton:"Przypnij wsplne wierzchoki razem",rotateButton:"Obr warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne ledzenie linii"},measurements:{totalLength:"Dugo",segmentLength:"Dugo odcinka",area:"Obszar",radius:"Promie",perimeter:"Obwd",height:"Wysoko",width:"Szeroko",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},go={tooltips:{placeMarker:"Klicka fr att placera markr",firstVertex:"Klicka fr att placera frsta hrnet",continueLine:"Klicka fr att fortstta rita",finishLine:"Klicka p en existerande punkt fr att slutfra",finishPoly:"Klicka p den frsta punkten fr att slutfra",finishRect:"Klicka fr att slutfra",startCircle:"Klicka fr att placera cirkelns centrum",finishCircle:"Klicka fr att slutfra cirkeln",placeCircleMarker:"Klicka fr att placera cirkelmarkr"},actions:{finish:"Slutfr",cancel:"Avbryt",removeLastVertex:"Ta bort sista hrnet"},buttonTitles:{drawMarkerButton:"Rita Markr",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkr",snappingButton:"Snpp dra markren till andra lager och hrn",pinningButton:"Fst delade hrn tillsammans",rotateButton:"Rotera lagret"}},fs={tooltips:{placeMarker:"     ",firstVertex:"       ",continueLine:"      ",finishLine:"        ",finishPoly:"       ",finishRect:"    ",startCircle:"      ",finishCircle:"      ",placeCircleMarker:"      "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"        ",pinningButton:"   ",rotateButton:"  "}},zs={tooltips:{placeMarker:"Kattintson a jell elhelyezshez",firstVertex:"Kattintson az els pont elhelyezshez",continueLine:"Kattintson a kvetkez pont elhelyezshez",finishLine:"A befejezshez kattintson egy meglv pontra",finishPoly:"A befejezshez kattintson az els pontra",finishRect:"Kattintson a befejezshez",startCircle:"Kattintson a kr kzppontjnak elhelyezshez",finishCircle:"Kattintson a kr befejezshez",placeCircleMarker:"Kattintson a krjell elhelyezshez"},actions:{finish:"Befejezs",cancel:"Mgse",removeLastVertex:"Utols pont eltvoltsa"},buttonTitles:{drawMarkerButton:"Jell rajzolsa",drawPolyButton:"Poligon rajzolsa",drawLineButton:"Vonal rajzolsa",drawCircleButton:"Kr rajzolsa",drawRectButton:"Ngyzet rajzolsa",editButton:"Elemek szerkesztse",dragButton:"Elemek mozgatsa",cutButton:"Elemek vgsa",deleteButton:"Elemek trlse",drawCircleMarkerButton:"Kr jell rajzolsa",snappingButton:"Kapcsolja a jelltt msik elemhez vagy ponthoz",pinningButton:"Kzs pontok sszektse",rotateButton:"Flia elforgatsa"}},mo={tooltips:{placeMarker:"Tryk for at placere en markr",firstVertex:"Tryk for at placere det frste punkt",continueLine:"Tryk for at fortstte linjen",finishLine:"Tryk p et eksisterende punkt for at afslutte",finishPoly:"Tryk p det frste punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkr"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markr",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Trk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkr",snappingButton:"Fastgr trukket markr til andre elementer",pinningButton:"Sammenlg delte elementer",rotateButton:"Roter laget"}},ps={tooltips:{placeMarker:"Klikk for  plassere punkt",firstVertex:"Klikk for  plassere frste punkt",continueLine:"Klikk for  tegne videre",finishLine:"Klikk p et eksisterende punkt for  fullfre",finishPoly:"Klikk frste punkt for  fullfre",finishRect:"Klikk for  fullfre",startCircle:"Klikk for  sette sirkel midtpunkt",finishCircle:"Klikk for  fullfre sirkel",placeCircleMarker:"Klikk for  plassere sirkel",placeText:"Klikk for  plassere tekst"},actions:{finish:"Fullfr",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotr objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalr objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Omrde",radius:"Radius",perimeter:"Omriss",height:"Hyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkr"}},iu={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"   ",finishLine:"      ",finishPoly:"     ",finishRect:"  ",startCircle:"    ",finishCircle:"    ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"      ",rotateButton:" ",drawTextButton:" ",scaleButton:"",autoTracingButton:" "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},Tl={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:" -    ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"'   ",rotateButton:" "}},mr={tooltips:{placeMarker:"areti yerletirmek iin tklayn",firstVertex:"lk tepe noktasn yerletirmek iin tklayn",continueLine:"izime devam etmek iin tklayn",finishLine:"Bitirmek iin mevcut herhangi bir iaretiyi tklayn",finishPoly:"Bitirmek iin ilk iaretiyi tklayn",finishRect:"Bitirmek iin tklayn",startCircle:"Daire merkezine yerletirmek iin tklayn",finishCircle:"Daireyi bitirmek iin tklayn",placeCircleMarker:"Daire iaretisi yerletirmek iin tklayn"},actions:{finish:"Bitir",cancel:"ptal",removeLastVertex:"Son keyi kaldr"},buttonTitles:{drawMarkerButton:"izim aretisi",drawPolyButton:"okgenler iz",drawLineButton:"oklu izgi iz",drawCircleButton:"ember iz",drawRectButton:"Dikdrtgen iz",editButton:"Katmanlar dzenle",dragButton:"Katmanlar srkle",cutButton:"Katmanlar kes",deleteButton:"Katmanlar kaldr",drawCircleMarkerButton:"Daire iaretisi iz",snappingButton:"Srklenen iaretiyi dier katmanlara ve kelere yaptr",pinningButton:"Paylalan keleri birbirine sabitle",rotateButton:"Katman dndr"}},_r={tooltips:{placeMarker:"Kliknutm vytvote znaku",firstVertex:"Kliknutm vytvote prvn objekt",continueLine:"Kliknutm pokraujte v kreslen",finishLine:"Kliknut na libovolnou existujc znaku pro dokonen",finishPoly:"Vyberte prvn bod pro dokonen",finishRect:"Kliknte pro dokonen",startCircle:"Kliknutm pidejte sted kruhu",finishCircle:",   ",placeCircleMarker:"Kliknutm nastavte polomr"},actions:{finish:"Dokonit",cancel:"Zruit",removeLastVertex:"Zruit posledn akci"},buttonTitles:{drawMarkerButton:"Pidat znaku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit kivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdlnk",editButton:"Upravit vrstvu",dragButton:"Peneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Pidat kruhovou znaku",snappingButton:"Navzat tanou znaku k dalm vrstvm a vrcholm",pinningButton:"Spojit spolen body dohromady",rotateButton:"Otote vrstvu"}},vo={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:"",placeText:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:"",drawTextButton:""}},Xr={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtmist",finishLine:"Klikkaa olemassa olevaa merkki lopettaaksesi",finishPoly:"Klikkaa ensimmist merkki lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrn keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrn",placeCircleMarker:"Klikkaa asettaaksesi ympyrmerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirr merkkej",drawPolyButton:"Piirr monikulmioita",drawLineButton:"Piirr viivoja",drawCircleButton:"Piirr ympyr",drawRectButton:"Piirr neliskulmioita",editButton:"Muokkaa",dragButton:"Siirr",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirr ympyrmerkki",snappingButton:"Kiinnit siirrettv merkki toisiin muotoihin",pinningButton:"Kiinnit jaetut muodot yhteen",rotateButton:"Knn",drawTextButton:"Piirr teksti"}},Ai={tooltips:{placeMarker:"  ",firstVertex:"   ",continueLine:"  ",finishLine:"   ",finishPoly:"   ",finishRect:" ",startCircle:"    ",finishCircle:"  ",placeCircleMarker:"   ",placeText:"  "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" ",drawTextButton:" "}},yo={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"    ",finishLine:"    ",finishPoly:"    ",finishRect:"  ",startCircle:"    ",finishCircle:"   ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:" ",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:"  ",cutButton:"  ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"     ",pinningButton:"   ",rotateButton:" ",drawTextButton:" ",scaleButton:"  ",autoTracingButton:"  "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},Cs=fa,pa={en:$r,de:Wi,it:Ii,id:Er,ro:Dn,ru:mn,es:Fr,nl:ai,fr:ms,pt:Cs,pt_br:ra,pt_pt:fa,zh:Oo,zh_tw:Xs,pl:mi,sv:go,el:fs,hu:zs,da:mo,no:ps,fa:iu,ua:Tl,tr:mr,cz:_r,ja:vo,fi:Xr,ko:Ai,ky:yo},pl={_globalEditModeEnabled:!1,enableGlobalEditMode(h){let g={...h};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(_=>{this._isRelevantForEdit(_)&&_.pm.enable(g)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(h=>{h.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(h=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(h)},handleLayerAdditionInGlobalEditMode(){let h=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let g in h){let _=h[g];this._isRelevantForEdit(_)&&_.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:h}){this._addedLayersEdit[L.stamp(h)]=h},_isRelevantForEdit(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowEditing}},Ju=pl,su={_globalDragModeEnabled:!1,enableGlobalDragMode(){let h=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},h.forEach(g=>{this._isRelevantForDrag(g)&&g.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let h=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,h.forEach(g=>{g.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let h=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let g in h){let _=h[g];this._isRelevantForDrag(_)&&_.pm.enableLayerDrag()}},_layerAddedDrag({layer:h}){this._addedLayersDrag[L.stamp(h)]=h},_isRelevantForDrag(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.draggable}},Pr=su,qr={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(h=>{this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(h=>{h.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(h){let g=h.target;this._isRelevantForRemoval(g)&&!g.pm.dragging()&&(g.removeFrom(this.map.pm._getContainingLayer()),g.remove(),g instanceof L.LayerGroup?(this._fireRemoveLayerGroup(g),this._fireRemoveLayerGroup(this.map,g)):(g.pm._fireRemove(g),g.pm._fireRemove(this.map,g)))},_isRelevantForRemoval(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let h=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let g in h){let _=h[g];this._isRelevantForRemoval(_)&&(_.pm.enabled()&&_.pm.disable(),_.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:h}){this._addedLayersRemoval[L.stamp(h)]=h}},gl=qr,Mc={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(h=>h instanceof L.Polyline).forEach(h=>{this._isRelevantForRotate(h)&&h.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(h=>h instanceof L.Polyline).forEach(h=>{h.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(h){return h.pm&&h instanceof L.Polyline&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let h=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let g in h){let _=h[g];this._isRelevantForRemoval(_)&&_.pm.enableRotate()}},_layerAddedRotate({layer:h}){this._addedLayersRotate[L.stamp(h)]=h}},ou=Mc,Pu=l(ln()),Dl={_fireDrawStart(h="Draw",g={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},h,g)},_fireDrawEnd(h="Draw",g={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},h,g)},_fireCreate(h,g="Draw",_={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:h,layer:h},g,_)},_fireCenterPlaced(h="Draw",g={}){let _=h==="Draw"?this._layer:void 0,S=h!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:_,layer:S,latlng:this._layer.getLatLng()},h,g)},_fireCut(h,g,_,S="Draw",k={}){this.__fire(h,"pm:cut",{shape:this._shape,layer:g,originalLayer:_},S,k)},_fireEdit(h=this._layer,g="Edit",_={}){this.__fire(h,"pm:edit",{layer:this._layer,shape:this.getShape()},g,_)},_fireEnable(h="Edit",g={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},h,g)},_fireDisable(h="Edit",g={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},h,g)},_fireUpdate(h="Edit",g={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},h,g)},_fireMarkerDragStart(h,g=void 0,_="Edit",S={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g},_,S)},_fireMarkerDrag(h,g=void 0,_="Edit",S={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g},_,S)},_fireMarkerDragEnd(h,g=void 0,_=void 0,S="Edit",k={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g,intersectionReset:_},S,k)},_fireDragStart(h="Edit",g={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},h,g)},_fireDrag(h,g="Edit",_={}){this.__fire(this._layer,"pm:drag",{...h,shape:this.getShape()},g,_)},_fireDragEnd(h="Edit",g={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},h,g)},_fireDragEnable(h="Edit",g={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},h,g)},_fireDragDisable(h="Edit",g={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},h,g)},_fireRemove(h,g=h,_="Edit",S={}){this.__fire(h,"pm:remove",{layer:g,shape:this.getShape()},_,S)},_fireVertexAdded(h,g,_,S="Edit",k={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:h,indexPath:g,latlng:_,shape:this.getShape()},S,k)},_fireVertexRemoved(h,g,_="Edit",S={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:h,indexPath:g,shape:this.getShape()},_,S)},_fireVertexClick(h,g,_="Edit",S={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:h,indexPath:g,shape:this.getShape()},_,S)},_fireIntersect(h,g=this._layer,_="Edit",S={}){this.__fire(g,"pm:intersect",{layer:this._layer,intersection:h,shape:this.getShape()},_,S)},_fireLayerReset(h,g,_="Edit",S={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:h,indexPath:g,shape:this.getShape()},_,S)},_fireChange(h,g="Edit",_={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:h,shape:this.getShape()},g,_)},_fireTextChange(h,g="Edit",_={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:h,shape:this.getShape()},g,_)},_fireTextFocus(h="Edit",g={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},h,g)},_fireTextBlur(h="Edit",g={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},h,g)},_fireSnapDrag(h,g,_="Snapping",S={}){this.__fire(h,"pm:snapdrag",g,_,S)},_fireSnap(h,g,_="Snapping",S={}){this.__fire(h,"pm:snap",g,_,S)},_fireUnsnap(h,g,_="Snapping",S={}){this.__fire(h,"pm:unsnap",g,_,S)},_fireRotationEnable(h,g,_="Rotation",S={}){this.__fire(h,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},_,S)},_fireRotationDisable(h,g="Rotation",_={}){this.__fire(h,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},g,_)},_fireRotationStart(h,g,_="Rotation",S={}){this.__fire(h,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:g},_,S)},_fireRotation(h,g,_,S=this._rotationLayer,k="Rotation",H={}){this.__fire(h,"pm:rotate",{layer:S,helpLayer:this._layer,startAngle:this._startAngle,angle:S.pm.getAngle(),angleDiff:g,oldLatLngs:_,newLatLngs:S.getLatLngs()},k,H)},_fireRotationEnd(h,g,_,S="Rotation",k={}){this.__fire(h,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:g,angle:this._rotationLayer.pm.getAngle(),originLatLngs:_,newLatLngs:this._rotationLayer.getLatLngs()},S,k)},_fireActionClick(h,g,_,S="Toolbar",k={}){this.__fire(this._map,"pm:actionclick",{text:h.text,action:h,btnName:g,button:_},S,k)},_fireButtonClick(h,g,_="Toolbar",S={}){this.__fire(this._map,"pm:buttonclick",{btnName:h,button:g},_,S)},_fireLangChange(h,g,_,S,k="Global",H={}){this.__fire(this.map,"pm:langchange",{oldLang:h,activeLang:g,fallback:_,translations:S},k,H)},_fireGlobalDragModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalEditModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalRemovalModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalCutModeToggled(h="Global",g={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},h,g)},_fireGlobalDrawModeToggled(h="Global",g={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},h,g)},_fireGlobalRotateModeToggled(h="Global",g={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},h,g)},_fireRemoveLayerGroup(h,g=h,_="Edit",S={}){this.__fire(h,"pm:remove",{layer:g,shape:void 0},_,S)},_fireKeyeventEvent(h,g,_,S="Global",k={}){this.__fire(this.map,"pm:keyevent",{event:h,eventType:g,focusOn:_},S,k)},__fire(h,g,_,S,k={}){_=(0,Pu.default)(_,k,{source:S}),L.PM.Utils._fireEvent(h,g,_)}},au=Dl,Mu=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(h){this.map=h,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),h.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(h){let g="document";this.map.getContainer().contains(h.target)&&(g="map");let _={event:h,eventType:h.type,focusOn:g};this._lastEvents[h.type]=_,this._lastEvents.current=_,this.map.pm._fireKeyeventEvent(h,h.type,g)},_onBlur(h){h.altKey=!1;let g={event:h,eventType:h.type,focusOn:"document"};this._lastEvents[h.type]=g,this._lastEvents.current=g},getLastKeyEvent(h="current"){return this._lastEvents[h]},isShiftKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.shiftKey},isAltKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.altKey},isCtrlKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.ctrlKey},isMetaKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.metaKey},getPressedKey(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.key}}),Jr=Mu,vs=l(On());function cr(h){let g=L.PM.activeLang;return(0,vs.default)(pa[g],h)||(0,vs.default)(pa.en,h)||h}function ys(h){for(let g=0;g<h.length;g+=1){let _=h[g];if(Array.isArray(_)){if(ys(_))return!0}else if(_!=null&&_!=="")return!0}return!1}function Ol(h){return h.reduce((g,_)=>{if(_.length!==0){let S=Array.isArray(_)?Ol(_):_;Array.isArray(S)?S.length!==0&&g.push(S):g.push(S)}return g},[])}function Ua(h,g,_){let S={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:k,b:H,f:te}=S,ae=h.lng,ye=h.lat,Ee=_,nt=Math.PI,We=g*nt/180,yt=Math.sin(We),It=Math.cos(We),tn=(1-te)*Math.tan(ye*nt/180),xn=1/Math.sqrt(1+tn*tn),Sn=tn*xn,fr=Math.atan2(tn,It),tt=xn*yt,st=1-tt*tt,ft=st*(k*k-H*H)/(H*H),zt=1+ft/16384*(4096+ft*(-768+ft*(320-175*ft))),Lt=ft/1024*(256+ft*(-128+ft*(74-47*ft))),Bt=Ee/(H*zt),be=2*Math.PI,ke,ze,je;for(;Math.abs(Bt-be)>1e-12;){ke=Math.cos(2*fr+Bt),ze=Math.sin(Bt),je=Math.cos(Bt);let cn=Lt*ze*(ke+Lt/4*(je*(-1+2*ke*ke)-Lt/6*ke*(-3+4*ze*ze)*(-3+4*ke*ke)));be=Bt,Bt=Ee/(H*zt)+cn}let Ue=Sn*ze-xn*je*It,He=Math.atan2(Sn*je+xn*ze*It,(1-te)*Math.sqrt(tt*tt+Ue*Ue)),ct=Math.atan2(ze*yt,xn*je-Sn*ze*It),ht=te/16*st*(4+te*(4-3*st)),mt=ct-(1-ht)*te*tt*(Bt+ht*ze*(ke+ht*je*(-1+2*ke*ke))),Mt=ae+mt*180/nt,kt=He*180/nt;return L.latLng(Mt,kt)}function Ji(h,g,_,S,k=!0){let H,te,ae,ye=[];for(let Ee=0;Ee<_;Ee+=1){if(k)H=Ee*360/_+S,te=Ua(h,H,g),ae=L.latLng(te.lng,te.lat);else{let nt=h.lat+Math.cos(2*Ee*Math.PI/_)*g,We=h.lng+Math.sin(2*Ee*Math.PI/_)*g;ae=L.latLng(nt,We)}ye.push(ae)}return ye}function ku(h,g,_){g=(g+360)%360;let S=Math.PI/180,k=180/Math.PI,{R:H}=L.CRS.Earth,te=h.lng*S,ae=h.lat*S,ye=g*S,Ee=Math.sin(ae),nt=Math.cos(ae),We=Math.cos(_/H),yt=Math.sin(_/H),It=Math.asin(Ee*We+nt*yt*Math.cos(ye)),tn=te+Math.atan2(Math.sin(ye)*yt*nt,We-Ee*Math.sin(It));tn*=k;let xn=tn-360,Sn=tn<-180?tn+360:tn;return tn=tn>180?xn:Sn,L.latLng([It*k,tn])}function Pa(h,g,_){let S=h.latLngToContainerPoint(g),k=h.latLngToContainerPoint(_),H=Math.atan2(k.y-S.y,k.x-S.x)*180/Math.PI+90;return H+=H<0?360:0,H}function lu(h,g,_,S){let k=Pa(h,g,_);return ku(g,k,S)}function uu(h,g,_="asc"){if(!g||Object.keys(g).length===0)return(ye,Ee)=>ye-Ee;let S=Object.keys(g),k,H=S.length-1,te={};for(;H>=0;)k=S[H],te[k.toLowerCase()]=g[k],H-=1;function ae(ye){if(ye instanceof L.Marker)return"Marker";if(ye instanceof L.Circle)return"Circle";if(ye instanceof L.CircleMarker)return"CircleMarker";if(ye instanceof L.Rectangle)return"Rectangle";if(ye instanceof L.Polygon)return"Polygon";if(ye instanceof L.Polyline)return"Line"}return(ye,Ee)=>{let nt,We;if(nt=ae(ye.layer).toLowerCase(),We=ae(Ee.layer).toLowerCase(),!nt||!We)return 0;let yt=nt in te?te[nt]:Number.MAX_SAFE_INTEGER,It=We in te?te[We]:Number.MAX_SAFE_INTEGER,tn=0;return yt<It?tn=-1:yt>It&&(tn=1),_==="desc"?tn*-1:tn}}function ia(h,g=h.getLatLngs()){return h instanceof L.Polygon?L.polygon(g).getLatLngs():L.polyline(g).getLatLngs()}function cu(h,g){var _,S,k,H;if((S=(_=g.options.crs)==null?void 0:_.projection)!=null&&S.MAX_LATITUDE){let te=(H=(k=g.options.crs)==null?void 0:k.projection)==null?void 0:H.MAX_LATITUDE;h.lat=Math.max(Math.min(te,h.lat),-te)}return h}function xi(h){return h.options.renderer||h._map&&(h._map._getPaneRenderer(h.options.pane)||h._map.options.renderer||h._map._renderer)||h._renderer}var kc=L.Class.extend({includes:[Ju,Pr,gl,ou,au],initialize(h){this.map=h,this.Draw=new L.PM.Draw(h),this.Toolbar=new L.PM.Toolbar(h),this.Keyboard=Jr(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(h)},setLang(h="en",g,_="en"){if(h=h.trim().toLowerCase(),!/^[a-z]{2}$/.test(h)){let k=h.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(k){let H=[`${k[1]}_${k[2]}`,`${k[1]}`];for(let te of H)if(pa[te]){h=te;break}}}let S=L.PM.activeLang;g&&(pa[h]=(0,Nn.default)(pa[_],g)),L.PM.activeLang=h,this.map.pm.Toolbar.reinit(),this._fireLangChange(S,h,_,pa[h])},addControls(h){this.Toolbar.addControls(h)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(h="Polygon",g){h==="Poly"&&(h="Polygon"),this.Draw.enable(h,g)},disableDraw(h="Polygon"){h==="Poly"&&(h="Polygon"),this.Draw.disable(h)},setPathOptions(h,g={}){let _=g.ignoreShapes||[],S=g.merge||!1;this.map.pm.Draw.shapes.forEach(k=>{_.indexOf(k)===-1&&this.map.pm.Draw[k].setPathOptions(h,S)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(h){let g=(0,Nn.default)(this.globalOptions,h);g.editable&&(g.resizeableCircleMarker=g.editable,delete g.editable);let _=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!g.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),_=!0);let S=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!g.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),S=!0),this.map.pm.Draw.shapes.forEach(k=>{this.map.pm.Draw[k].setOptions(g)}),_&&this.map.pm.Draw.CircleMarker.enable(),S&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(k=>{k.pm.setOptions(g)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=g,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(h=>{h.pm.enabled()&&h.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(h){return this.Draw.Cut.enable(h)},toggleGlobalCutMode(h){return this.Draw.Cut.toggle(h)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(h=!1){let g=L.PM.Utils.findLayers(this.map);if(!h)return g;let _=L.featureGroup();return _._pmTempLayer=!0,g.forEach(S=>{_.addLayer(S)}),_},getGeomanDrawLayers(h=!1){let g=L.PM.Utils.findLayers(this.map).filter(S=>S._drawnByGeoman===!0);if(!h)return g;let _=L.featureGroup();return _._pmTempLayer=!0,g.forEach(S=>{_.addLayer(S)}),_},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(h){this._touchEventCounter===0&&(L.DomEvent.on(h,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(h,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(h){this._touchEventCounter===1&&(L.DomEvent.off(h,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(h,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(h){xi(this.map)._onMouseMove(this._createMouseEvent("mousemove",h))},_canvasTouchClick(h){let g="";h.type==="touchstart"||h.type==="pointerdown"?g="mousedown":(h.type==="touchend"||h.type==="pointerup"||h.type==="touchcancel"||h.type==="pointercancel")&&(g="mouseup"),g&&xi(this.map)._onClick(this._createMouseEvent(g,h))},_createMouseEvent(h,g){let _,S=g.touches[0]||g.changedTouches[0];try{_=new MouseEvent(h,{bubbles:g.bubbles,cancelable:g.cancelable,view:g.view,detail:S.detail,screenX:S.screenX,screenY:S.screenY,clientX:S.clientX,clientY:S.clientY,ctrlKey:g.ctrlKey,altKey:g.altKey,shiftKey:g.shiftKey,metaKey:g.metaKey,button:g.button,relatedTarget:g.relatedTarget})}catch{_=document.createEvent("MouseEvents"),_.initMouseEvent(h,g.bubbles,g.cancelable,g.view,S.detail,S.screenX,S.screenY,S.clientX,S.clientY,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,g.button,g.relatedTarget)}return _}}),$s=kc,ga=L.Control.extend({includes:[au],options:{position:"topleft",disableByOtherButtons:!0},initialize(h){this._button=L.Util.extend({},this.options,h)},onAdd(h){return this._map=h,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let h=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),h?h.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(h){return typeof h=="boolean"?this._button.toggleStatus=h:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(h){h&&h.preventDefault(),!this._button.disabled&&(this._button.onClick(h,{button:this,event:h}),this._clicked(h),this._button.afterClick(h,{button:this,event:h}))},_makeButton(h){let g=this.options.position.indexOf("right")>-1?"pos-right":"",_=L.DomUtil.create("div",`button-container  ${g}`,this._container);h.title&&_.setAttribute("title",h.title);let S=L.DomUtil.create("a","leaflet-buttons-control-button",_);S.setAttribute("role","button"),S.setAttribute("tabindex","0"),S.href="#";let k=L.DomUtil.create("div",`leaflet-pm-actions-container ${g}`,_),H=h.actions,te={cancel:{text:cr("actions.cancel"),title:cr("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:cr("actions.finish"),title:cr("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:cr("actions.removeLastVertex"),title:cr("actions.removeLastVertex"),onClick(){this._map.pm.Draw[h.jsClass]._removeLastVertex()}},finish:{text:cr("actions.finish"),title:cr("actions.finish"),onClick(ye){this._map.pm.Draw[h.jsClass]._finishShape(ye)}}};h._preparedActions=H.map(ye=>{let Ee=typeof ye=="string"?ye:ye.name,nt;if(te[Ee])nt=te[Ee];else if(ye.text)nt=ye;else return nt;let We=L.DomUtil.create("a",`leaflet-pm-action ${g} action-${Ee}`,k);if(We.setAttribute("role","button"),We.setAttribute("tabindex","0"),We.href="#",nt.title&&(We.title=nt.title),We.innerHTML=nt.text,L.DomEvent.disableClickPropagation(We),L.DomEvent.on(We,"click",L.DomEvent.stop),nt._node=We,!h.disabled&&nt.onClick){let yt=It=>{It.preventDefault();let tn="",{buttons:xn}=this._map.pm.Toolbar;for(let Sn in xn)if(xn[Sn]._button===h){tn=Sn;break}this._fireActionClick(nt,tn,h)};L.DomEvent.addListener(We,"click",yt,this),L.DomEvent.addListener(We,"click",nt.onClick,this),L.DomEvent.addListener(We,"click",()=>this._updateActiveAction(h))}return nt}),this._updateActiveAction(h),h.toggleStatus&&L.DomUtil.addClass(_,"active");let ae=L.DomUtil.create("div","control-icon",S);return h.iconUrl&&ae.setAttribute("src",h.iconUrl),h.className&&L.DomUtil.addClass(ae,h.className),L.DomEvent.disableClickPropagation(S),L.DomEvent.on(S,"click",L.DomEvent.stop),h.disabled||(L.DomEvent.addListener(S,"click",this._onBtnClick,this),L.DomEvent.addListener(S,"click",this._triggerClick,this)),h.disabled&&(L.DomUtil.addClass(S,"pm-disabled"),S.setAttribute("aria-disabled","true")),_},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let h="",{buttons:g}=this._map.pm.Toolbar;for(let _ in g)if(g[_]._button===this._button){h=_;break}this._fireButtonClick(h,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let h="pm-disabled",g=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(g,h),g.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(g,h),g.setAttribute("aria-disabled","false"))},_updateActiveAction(h){var g;(g=h._preparedActions)==null||g.forEach(_=>{_!=null&&_._node&&(_.isActive&&_.isActive.call(this)?L.DomUtil.addClass(_._node,"active-action"):L.DomUtil.removeClass(_._node,"active-action"))})}}),hu=ga;L.Control.PMButton=hu;var ma=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(h){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(h)},reinit(){let h=this.isVisible;this.removeControls(),this._defineButtons(),h&&this.addControls()},init(h){this.map=h,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(h){let g=`${h}Container`;return this[g]||(this[g]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${h} leaflet-bar leaflet-control`)),this[g]},getButtons(){return this.buttons},addControls(h=this.options){typeof h.editPolygon<"u"&&(h.editMode=h.editPolygon),typeof h.deleteLayer<"u"&&(h.removalMode=h.deleteLayer),L.Util.setOptions(this,h),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let h=this.getButtons(),g={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let _ in h){let S=h[_];L.Util.setOptions(S,{className:g.geomanIcons[_]})}},removeControls(){let h=this.getButtons();for(let g in h)h[g].remove();this.isVisible=!1},toggleControls(h=this.options){this.isVisible?this.removeControls():this.addControls(h)},_addButton(h,g){return this.buttons[h]=g,this.options[h]=!!this.options[h]||!1,this.buttons[h]},triggerClickOnToggledButtons(h){for(let g in this.buttons){let _=this.buttons[g];_._button.disableByOtherButtons&&_!==h&&_.toggled()&&_._triggerClick()}},toggleButton(h,g,_=!0){h==="editPolygon"&&(h="editMode"),h==="deleteLayer"&&(h="removalMode");let S=h;return _&&this.triggerClickOnToggledButtons(this.buttons[S]),this.buttons[S]?this.buttons[S].toggle(g):!1},_defineButtons(){let h={className:"control-icon leaflet-pm-icon-marker",title:cr("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(yt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},g={title:cr("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(yt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},_={className:"control-icon leaflet-pm-icon-polyline",title:cr("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(yt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},S={title:cr("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(yt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},k={title:cr("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(yt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},H={title:cr("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(yt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},te={title:cr("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ae={title:cr("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ye={title:cr("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(yt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Ee={title:cr("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},nt={title:cr("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},We={className:"control-icon leaflet-pm-icon-text",title:cr("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(yt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(h)),this._addButton("drawPolyline",new L.Control.PMButton(_)),this._addButton("drawRectangle",new L.Control.PMButton(H)),this._addButton("drawPolygon",new L.Control.PMButton(g)),this._addButton("drawCircle",new L.Control.PMButton(S)),this._addButton("drawCircleMarker",new L.Control.PMButton(k)),this._addButton("drawText",new L.Control.PMButton(We)),this._addButton("editMode",new L.Control.PMButton(te)),this._addButton("dragMode",new L.Control.PMButton(ae)),this._addButton("cutPolygon",new L.Control.PMButton(ye)),this._addButton("removalMode",new L.Control.PMButton(Ee)),this._addButton("rotateMode",new L.Control.PMButton(nt))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let h=this.getButtons(),g=[];this.options.drawControls===!1&&(g=g.concat(Object.keys(h).filter(_=>!h[_]._button.tool))),this.options.editControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="edit"))),this.options.optionsControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="options"))),this.options.customControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="custom")));for(let _ in h)if(this.options[_]&&g.indexOf(_)===-1){let S=h[_]._button.tool;S||(S="draw"),h[_].setPosition(this._getBtnPosition(S)),h[_].addTo(this.map)}},_getBtnPosition(h){return this.options.positions&&this.options.positions[h]?this.options.positions[h]:this.options.position},setBlockPosition(h,g){this.options.positions[h]=g,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(h,g){if(g)typeof g!="object"&&(g={name:g});else throw new TypeError("Button has no name");let _=this._btnNameMapping(h);if(!g.name)throw new TypeError("Button has no name");if(this.buttons[g.name])throw new TypeError("Button with this name already exists");let S=this.map.pm.Draw.createNewDrawInstance(g.name,_);g={...this.buttons[_]._button,...g};let k=this.createCustomControl(g);return{drawInstance:S,control:k}},createCustomControl(h){if(!h.name)throw new TypeError("Button has no name");if(this.buttons[h.name])throw new TypeError("Button with this name already exists");h.onClick||(h.onClick=()=>{}),h.afterClick||(h.afterClick=()=>{}),h.toggle!==!1&&(h.toggle=!0),h.block&&(h.block=h.block.toLowerCase()),(!h.block||h.block==="draw")&&(h.block=""),h.className?h.className.indexOf("control-icon")===-1&&(h.className=`control-icon ${h.className}`):h.className="control-icon";let g={tool:h.block,className:h.className,title:h.title||"",jsClass:h.name,onClick:h.onClick,afterClick:h.afterClick,doToggle:h.toggle,toggleStatus:!1,disableOtherButtons:h.disableOtherButtons??!0,disableByOtherButtons:h.disableByOtherButtons??!0,cssToggle:h.toggle,position:this.options.position,actions:h.actions||[],disabled:!!h.disabled};this.options[h.name]!==!1&&(this.options[h.name]=!0);let _=this._addButton(h.name,new L.Control.PMButton(g));return this.changeControlOrder(),_},controlExists(h){return!!this.getButton(h)},getButton(h){return this.getButtons()[h]},getButtonsInBlock(h){let g={};if(h)for(let _ in this.getButtons()){let S=this.getButtons()[_];(S._button.tool===h||h==="draw"&&!S._button.tool)&&(g[_]=S)}return g},changeControlOrder(h=[]){let g=this._shapeMapping(),_=[];h.forEach(H=>{g[H]?_.push(g[H]):_.push(H)});let S=this.getButtons(),k={};_.forEach(H=>{S[H]&&(k[H]=S[H])}),Object.keys(S).filter(H=>!S[H]._button.tool||S[H]._button.tool==="draw").forEach(H=>{_.indexOf(H)===-1&&(k[H]=S[H])}),Object.keys(S).filter(H=>S[H]._button.tool==="edit").forEach(H=>{_.indexOf(H)===-1&&(k[H]=S[H])}),Object.keys(S).filter(H=>S[H]._button.tool==="options").forEach(H=>{_.indexOf(H)===-1&&(k[H]=S[H])}),Object.keys(S).filter(H=>S[H]._button.tool==="custom").forEach(H=>{_.indexOf(H)===-1&&(k[H]=S[H])}),Object.keys(S).forEach(H=>{_.indexOf(H)===-1&&(k[H]=S[H])}),this.map.pm.Toolbar.buttons=k,this._showHideButtons()},getControlOrder(){let h=this.getButtons(),g=[];for(let _ in h)g.push(_);return g},changeActionsOfControl(h,g){let _=this._btnNameMapping(h);if(!_)throw new TypeError("No name passed");if(!g)throw new TypeError("No actions passed");if(!this.buttons[_])throw new TypeError("Button with this name not exists");this.buttons[_]._button.actions=g,this.changeControlOrder()},setButtonDisabled(h,g){let _=this._btnNameMapping(h);g?this.buttons[_].disable():this.buttons[_].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(h){let g=this._shapeMapping();return g[h]?g[h]:h}}),Nl=ma,Il=l(ln()),Li={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(h){h.forEach(g=>{if(Array.isArray(g)){this._assignEvents(g);return}g.off("drag",this._handleSnapping,this),g.on("drag",this._handleSnapping,this),g.off("dragend",this._cleanupSnapping,this),g.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(h){if(h){let g=h.target;g._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(g=>{g.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(h){var ae,ye,Ee;let g=h.target;if(g._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((ae=h==null?void 0:h.originalEvent)==null?void 0:ae.altKey)||((Ee=(ye=this._map)==null?void 0:ye.pm)==null?void 0:Ee.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let _=this._calcClosestLayer(g.getLatLng(),this._snapList);if(Object.keys(_).length===0)return!1;let S=_.layer instanceof L.Marker||_.layer instanceof L.CircleMarker||!this.options.snapSegment,k;S?k=_.latlng:k=this._checkPrioritiySnapping(_);let H=this.options.snapDistance,te={marker:g,shape:this._shape,snapLatLng:k,segment:_.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:_.layer,distance:_.distance};if(this._fireSnapDrag(te.marker,te),this._fireSnapDrag(this._layer,te),_.distance<H){g._orgLatLng=g.getLatLng(),g.setLatLng(k),g._snapped=!0,g._snapInfo=te;let nt=()=>{this._snapLatLng=k,this._fireSnap(g,te),this._fireSnap(this._layer,te)},We=this._snapLatLng||{},yt=k||{};(We.lat!==yt.lat||We.lng!==yt.lng)&&nt()}else this._snapLatLng&&(this._unsnap(te),g._snapped=!1,g._snapInfo=void 0,this._fireUnsnap(te.marker,te),this._fireUnsnap(this._layer,te));return!0},_createSnapList(){let h=[],g=[],_=this._map;_.off("layerremove",this._handleSnapLayerRemoval,this),_.on("layerremove",this._handleSnapLayerRemoval,this),_.eachLayer(S=>{if((S instanceof L.Polyline||S instanceof L.Marker||S instanceof L.CircleMarker||S instanceof L.ImageOverlay)&&S.options.snapIgnore!==!0){if(S.options.snapIgnore===void 0&&(!L.PM.optIn&&S.options.pmIgnore===!0||L.PM.optIn&&S.options.pmIgnore!==!1))return;(S instanceof L.Circle||S instanceof L.CircleMarker)&&S.pm&&S.pm._hiddenPolyCircle?h.push(S.pm._hiddenPolyCircle):S instanceof L.ImageOverlay&&(S=L.rectangle(S.getBounds())),h.push(S);let k=L.polyline([],{color:"red",pmIgnore:!0});k._pmTempLayer=!0,g.push(k),(S instanceof L.Circle||S instanceof L.CircleMarker)&&g.push(k)}}),h=h.filter(S=>this._layer!==S),h=h.filter(S=>S._latlng||S._latlngs&&ys(S._latlngs)),h=h.filter(S=>!S._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let S=L.polyline([],{color:"red",pmIgnore:!0});S._pmTempLayer=!0,g.push(S)}),this._snapList=h.concat(this._otherSnapLayers)):this._snapList=h,this.debugIndicatorLines=g},_handleSnapLayerRemoval({layer:h}){if(!h._leaflet_id)return;let g=this._snapList.findIndex(_=>_._leaflet_id===h._leaflet_id);g>-1&&this._snapList.splice(g,1)},_calcClosestLayer(h,g){return this._calcClosestLayers(h,g,1)[0]},_calcClosestLayers(h,g,_=1){let S=[],k={};g.forEach((te,ae)=>{var Ee;if(te._parentCopy&&te._parentCopy===this._layer||((Ee=te.getLatLngs)==null?void 0:Ee.call(te).flat(5).length)<2)return;let ye=this._calcLayerDistances(h,te);if(ye.distance=Math.floor(ye.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[ae]){let nt=L.polyline([],{color:"red",pmIgnore:!0});nt._pmTempLayer=!0,this.debugIndicatorLines[ae]=nt}this.debugIndicatorLines[ae].setLatLngs([h,ye.latlng])}_===1&&(k.distance===void 0||ye.distance-5<=k.distance)?(ye.distance+5<k.distance&&(S=[]),k=ye,k.layer=te,S.push(k)):_!==1&&(k={},k=ye,k.layer=te,S.push(k))}),_!==1&&(S=S.sort((te,ae)=>te.distance-ae.distance)),_===-1&&(_=S.length);let H=this._getClosestLayerByPriority(S,_);return L.Util.isArray(H)?H:[H]},_calcLayerDistances(h,g){let _=this._map,S=g instanceof L.Marker||g instanceof L.CircleMarker,k=g instanceof L.Polygon,H=h;if(S){let te=g.getLatLng();return{latlng:{...te},distance:this._getDistance(_,te,H)}}return this._calcLatLngDistances(H,g.getLatLngs(),_,k)},_calcLatLngDistances(h,g,_,S=!1){let k,H,te,ae=ye=>{ye.forEach((Ee,nt)=>{if(Array.isArray(Ee)){ae(Ee);return}if(this.options.snapSegment){let We=Ee,yt;S?yt=nt+1===ye.length?0:nt+1:yt=nt+1===ye.length?void 0:nt+1;let It=ye[yt];if(It){let tn=this._getDistanceToSegment(_,h,We,It);(H===void 0||tn<H)&&(H=tn,te=[We,It])}}else{let We=this._getDistance(_,h,Ee);(H===void 0||We<H)&&(H=We,k=Ee)}})};return ae(g),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(_,h,te[0],te[1])},segment:te,distance:H}:{latlng:k,distance:H}},_getClosestLayerByPriority(h,g=1){h=h.sort((te,ae)=>te._leaflet_id-ae._leaflet_id);let _=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],S=this._map.pm.globalOptions.snappingOrder||[],k=0,H={};return S.concat(_).forEach(te=>{H[te]||(k+=1,H[te]=k)}),h.sort(uu("instanceofShape",H)),g===1?h[0]||{}:h.slice(0,g)},_checkPrioritiySnapping(h){let g=this._map,_=h.segment[0],S=h.segment[1],k=h.latlng,H=k;if(this.options.snapVertex){let te=this._getDistance(g,_,k),ae=this._getDistance(g,S,k),ye=te<ae?_:S,Ee=te<ae?te:ae;if(this.options.snapMiddle){let We=L.PM.Utils.calcMiddleLatLng(g,_,S),yt=this._getDistance(g,We,k);yt<te&&yt<ae&&(ye=We,Ee=yt)}let nt=this.options.snapDistance;Ee<nt&&(H=ye)}return{...H}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(h,g,_,S){let k=h.getMaxZoom();k===1/0&&(k=h.getZoom());let H=h.project(g,k),te=h.project(_,k),ae=h.project(S,k),ye=L.LineUtil.closestPointOnSegment(H,te,ae);return h.unproject(ye,k)},_getDistanceToSegment(h,g,_,S){let k=h.latLngToContainerPoint(g),H=h.latLngToContainerPoint(_),te=h.latLngToContainerPoint(S);return L.LineUtil.pointToSegmentDistance(k,H,te)},_getDistance(h,g,_){return h.latLngToContainerPoint(g).distanceTo(h.latLngToContainerPoint(_))}},Ko=Li,Ha=L.Class.extend({includes:[Ko,au],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(h){L.Util.setOptions(this,h),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(h){let g=new L.Icon.Default;g.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=g,this._map=h,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(_=>{this[_]=new L.PM.Draw[_](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(h,g=!1){g?this.options.pathOptions=(0,Il.default)(this.options.pathOptions,h):this.options.pathOptions=h},getShapes(){return this.shapes},getShape(){return this._shape},enable(h,g){if(!h)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[h].enable(g)},disable(){this.shapes.forEach(h=>{this[h].disable()})},addControls(){this.shapes.forEach(h=>{this[h].addButton()})},getActiveShape(){let h;return this.shapes.forEach(g=>{this[g]._enabled&&(h=g)}),h},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let h=[];this._map.eachLayer(g=>{(g instanceof L.Polyline||g instanceof L.Marker||g instanceof L.Circle||g instanceof L.CircleMarker||g instanceof L.ImageOverlay)&&(g._pmTempLayer||h.push(g))}),this._enabled?h.forEach(g=>{L.PM.Utils.disablePopup(g)}):h.forEach(g=>{L.PM.Utils.enablePopup(g)})},createNewDrawInstance(h,g){let _=this._getShapeFromBtnName(g);if(this[h])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[_])throw new TypeError(`There is no class L.PM.Draw.${_}`);return this[h]=new L.PM.Draw[_](this._map),this[h].toolbarButtonName=h,this[h]._shape=h,this.shapes.push(h),this[g]&&this[h].setOptions(this[g].options),this[h].setOptions(this[h].options),this[h]},_getShapeFromBtnName(h){let g={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return g[h]?g[h]:this[h]?this[h]._shape:h},_finishLayer(h){h.pm&&(h.pm.setOptions(this.options),h.pm._shape=this._shape,h.pm._map=this._map),this._addDrawnLayerProp(h)},_addDrawnLayerProp(h){h._drawnByGeoman=!0},_setPane(h,g){g==="layerPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":g==="vertexPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":g==="markerPane"&&(h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),bs=Ha;bs.Marker=bs.extend({initialize(h){this._map=h,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(cr("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(g=>{this.isRelevantMarker(g)&&g.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},isRelevantMarker(h){return h instanceof L.Marker&&h.pm&&!h._pmTempLayer&&!h.pm._initTextMarker},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let g=h;g.target=this._hintMarker,this._handleSnapping(g)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(h){if(!h.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=new L.Marker(g,this.options.markerStyle);this._setPane(_,"markerPane"),this._finishLayer(_),_.pm||(_.options.draggable=!1),_.addTo(this._map.pm._getContainingLayer()),_.pm&&this.options.markerEditable?_.pm.enable():_.dragging&&_.dragging.disable(),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var h,g;(h=this.options.markerStyle)!=null&&h.icon&&((g=this._hintMarker)==null||g.setIcon(this.options.markerStyle.icon))}});var F=63710088e-1,we={centimeters:F*100,centimetres:F*100,degrees:F/111325,feet:F*3.28084,inches:F*39.37,kilometers:F/1e3,kilometres:F/1e3,meters:F,metres:F,miles:F/1609.344,millimeters:F*1e3,millimetres:F*1e3,nauticalmiles:F/1852,radians:1,yards:F*1.0936};function et(h,g,_){_===void 0&&(_={});var S={type:"Feature"};return(_.id===0||_.id)&&(S.id=_.id),_.bbox&&(S.bbox=_.bbox),S.properties=g||{},S.geometry=h,S}function dt(h,g,_){if(_===void 0&&(_={}),!h)throw new Error("coordinates is required");if(!Array.isArray(h))throw new Error("coordinates must be an Array");if(h.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!wr(h[0])||!wr(h[1]))throw new Error("coordinates must contain numbers");var S={type:"Point",coordinates:h};return et(S,g,_)}function Pt(h,g,_){if(_===void 0&&(_={}),h.length<2)throw new Error("coordinates must be an array of two or more positions");var S={type:"LineString",coordinates:h};return et(S,g,_)}function Gt(h,g){g===void 0&&(g={});var _={type:"FeatureCollection"};return g.id&&(_.id=g.id),g.bbox&&(_.bbox=g.bbox),_.features=h,_}function pn(h,g){g===void 0&&(g="kilometers");var _=we[g];if(!_)throw new Error(g+" units is invalid");return h*_}function Rn(h,g){g===void 0&&(g="kilometers");var _=we[g];if(!_)throw new Error(g+" units is invalid");return h/_}function Vn(h){var g=h%(2*Math.PI);return g*180/Math.PI}function ar(h){var g=h%360;return g*Math.PI/180}function wr(h){return!isNaN(h)&&h!==null&&!Array.isArray(h)}function Vr(h){var g,_,S={type:"FeatureCollection",features:[]};if(h.type==="Feature"?_=h.geometry:_=h,_.type==="LineString")g=[_.coordinates];else if(_.type==="MultiLineString")g=_.coordinates;else if(_.type==="MultiPolygon")g=[].concat.apply([],_.coordinates);else if(_.type==="Polygon")g=_.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return g.forEach(function(k){g.forEach(function(H){for(var te=0;te<k.length-1;te++)for(var ae=te;ae<H.length-1;ae++)if(!(k===H&&(Math.abs(te-ae)===1||te===0&&ae===k.length-2&&k[te][0]===k[k.length-1][0]&&k[te][1]===k[k.length-1][1]))){var ye=Zi(k[te][0],k[te][1],k[te+1][0],k[te+1][1],H[ae][0],H[ae][1],H[ae+1][0],H[ae+1][1]);ye&&S.features.push(dt([ye[0],ye[1]]))}})}),S}function Zi(h,g,_,S,k,H,te,ae){var ye,Ee,nt,We,yt,It={x:null,y:null,onLine1:!1,onLine2:!1};return ye=(ae-H)*(_-h)-(te-k)*(S-g),ye===0?It.x!==null&&It.y!==null?It:!1:(Ee=g-H,nt=h-k,We=(te-k)*Ee-(ae-H)*nt,yt=(_-h)*Ee-(S-g)*nt,Ee=We/ye,nt=yt/ye,It.x=h+Ee*(_-h),It.y=g+Ee*(S-g),Ee>=0&&Ee<=1&&(It.onLine1=!0),nt>=0&&nt<=1&&(It.onLine2=!0),It.onLine1&&It.onLine2?[It.x,It.y]:!1)}bs.Line=bs.extend({initialize(h){this._map=h,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(cr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_syncHintLine(){let h=this._layer.getLatLngs();if(h.length>0){let g=h[h.length-1];this._hintline.setLatLngs([g,this._hintMarker.getLatLng()])}},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let g=this._layer._defaultShape().slice();g.push(this._hintMarker.getLatLng()),this._change(g)},hasSelfIntersection(){return Vr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(h,g){let _=L.polyline(this._layer.getLatLngs());h&&(g||(g=this._hintMarker.getLatLng()),_.addLatLng(g));let S=Vr(_.toGeoJSON(15));this._doesSelfIntersect=S.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(S,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(h){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,h.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=this._layer.getLatLngs(),S=_[_.length-1];if(g.equals(_[0])||_.length>0&&g.equals(S)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:g,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(g);let k=this._createMarker(g);this._setTooltipText(),this._setHintLineAfterNewVertex(g),this._fireVertexAdded(k,void 0,g,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(h)},_setHintLineAfterNewVertex(h){this._hintline.setLatLngs([h,h])},_removeLastVertex(){let h=this._markers;if(h.length<=1){this.disable();return}let g=this._layer.getLatLngs(),_=h[h.length-1],{indexPath:S}=L.PM.Utils.findDeepMarkerIndex(h,_);h.pop(),this._layerGroup.removeLayer(_);let k=h[h.length-1],H=g.indexOf(k.getLatLng());g=g.slice(0,H+1),this._layer.setLatLngs(g),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(_,S,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=1)return;let g=L.polyline(h,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this.options.snappable&&this._cleanupSnapping();let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},_createMarker(h){let g=new L.Marker(h,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),g.on("click",this._finishShape,this),g},_setTooltipText(){let{length:h}=this._layer.getLatLngs().flat(),g="";h<=1?g=cr("tooltips.continueLine"):g=cr("tooltips.finishLine"),this._hintMarker.setTooltipContent(g)},_change(h){this._fireChange(h,"Draw")},setStyle(){var h,g;(h=this._layer)==null||h.setStyle(this.options.templineStyle),(g=this._hintline)==null||g.setStyle(this.options.hintlineStyle)}}),bs.Polygon=bs.Line.extend({initialize(h){this._map=h,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(h){L.PM.Draw.Line.prototype.enable.call(this,h),this._layer.pm._shape="Polygon"},_createMarker(h){let g=new L.Marker(h,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),this._layer.getLatLngs().flat().length===1?(g.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(g)-1,this.options.snappable&&this._cleanupSnapping()):g.on("click",()=>1),g},_setTooltipText(){let{length:h}=this._layer.getLatLngs().flat(),g="";h<=2?g=cr("tooltips.continueLine"):g=cr("tooltips.finishPoly"),this._hintMarker.setTooltipContent(g)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=2)return;let g=L.polygon(h,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))}}),bs.Rectangle=bs.extend({initialize(h){this._map=h,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(h){if(L.Util.setOptions(this,h),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(cr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let g=0;g<2;g+=1){let _=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(_,"vertexPane"),_._pmTempLayer=!0,this._layerGroup.addLayer(_),this._styleMarkers.push(_)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_placeStartingMarkers(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(g),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(_=>{L.DomUtil.addClass(_._icon,"visible"),_.setLatLng(g)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(cr("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let h=this._startMarker.getLatLng();h&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([h,h]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}let g=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(g,"Draw")},_syncRectangleSize(){let h=cu(this._startMarker.getLatLng(),this._map),g=cu(this._hintMarker.getLatLng(),this._map),_=L.PM.Utils._getRotatedRectangle(h,g,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(_),this.options.cursorMarker&&this._styleMarkers){let S=[];_.forEach(k=>{!k.equals(h,1e-8)&&!k.equals(g,1e-8)&&S.push(k)}),S.forEach((k,H)=>{try{this._styleMarkers[H].setLatLng(k)}catch{}})}},_findCorners(){let h=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(h[0],h[2],this.options.rectangleAngle||0,this._map)},_finishShape(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||_.equals(g))return;let S=L.rectangle([_,g],this.options.pathOptions);if(this.options.rectangleAngle){let H=L.PM.Utils._getRotatedRectangle(_,g,this.options.rectangleAngle||0,this._map);S.setLatLngs(H),S.pm&&S.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(S,"layerPane"),this._finishLayer(S),S.addTo(this._map.pm._getContainingLayer()),this._fireCreate(S);let k=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(k))},setStyle(){var h;(h=this._layer)==null||h.setStyle(this.options.pathOptions)}}),bs.CircleMarker=bs.extend({initialize(h){this._map=h,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(h){if(L.Util.setOptions(this,h),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let g={};L.extend(g,this.options.templineStyle),g.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),g),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(cr("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(cr("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.disable()})},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_placeCenterMarker(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let g=this._hintMarker.getLatLng();this._centerMarker.setLatLng(g),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let h=this._centerMarker.getLatLng();h&&(this._layer.setLatLng(h),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(cr("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let h=this._centerMarker.getLatLng(),g=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([h,g])},_syncCircleRadius(){let h=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_)},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}this._handleHintMarkerSnapping();let g=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(g,"Draw")},isRelevantMarker(h){return h instanceof L.CircleMarker&&!(h instanceof L.Circle)&&h.pm&&!h._pmTempLayer},_createMarker(h){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!h.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=new this._BaseCircleClass(g,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(_,"layerPane"),this._finishLayer(_),_.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(_),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(h){h.pm&&this.options.markerEditable&&h.pm.enable()},_finishShape(h){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._centerMarker.getLatLng(),_=this._defaultRadius;if(this.options[this._editableOption]){let te=this._hintMarker.getLatLng();_=this._distanceCalculation(g,te),this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?_=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(_=this.options[this._maxRadiusOption])}let S={...this.options.pathOptions,radius:_},k=new this._BaseCircleClass(g,S);this._setPane(k,"layerPane"),this._finishLayer(k),k.addTo(this._map.pm._getContainingLayer()),k.pm&&k.pm._updateHiddenPolyCircle(),this._fireCreate(k);let H=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(H))},_getNewDestinationOfHintMarker(){let h=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return h;let g=this._centerMarker.getLatLng(),_=this._distanceCalculation(g,h);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?h=lu(this._map,g,h,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(h=lu(this._map,g,h,this._getMaxDistanceInMeter()))}return h},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let h=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),_=this._distanceCalculation(h,g);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var g,_;let h={};L.extend(h,this.options.templineStyle),this.options[this._editableOption]&&(h.radius=0),(g=this._layer)==null||g.setStyle(h),(_=this._hintline)==null||_.setStyle(this.options.hintlineStyle)},_distanceCalculation(h,g){return this._map.project(h).distanceTo(this._map.project(g))}}),bs.Circle=bs.CircleMarker.extend({initialize(h){this._map=h,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(h,g){return this._map.distance(h,g)}});function fi(h){if(!h)throw new Error("coord is required");if(!Array.isArray(h)){if(h.type==="Feature"&&h.geometry!==null&&h.geometry.type==="Point")return h.geometry.coordinates;if(h.type==="Point")return h.coordinates}if(Array.isArray(h)&&h.length>=2&&!Array.isArray(h[0])&&!Array.isArray(h[1]))return h;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Si(h){if(Array.isArray(h))return h;if(h.type==="Feature"){if(h.geometry!==null)return h.geometry.coordinates}else if(h.coordinates)return h.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function _s(h){return h.type==="Feature"?h.geometry:h}function Es(h,g){return h.type==="FeatureCollection"?"FeatureCollection":h.type==="GeometryCollection"?"GeometryCollection":h.type==="Feature"&&h.geometry!==null?h.geometry.type:h.type}function Zo(h,g,_){if(h!==null)for(var S,k,H,te,ae,ye,Ee,nt=0,We=0,yt,It=h.type,tn=It==="FeatureCollection",xn=It==="Feature",Sn=tn?h.features.length:1,fr=0;fr<Sn;fr++){Ee=tn?h.features[fr].geometry:xn?h.geometry:h,yt=Ee?Ee.type==="GeometryCollection":!1,ae=yt?Ee.geometries.length:1;for(var tt=0;tt<ae;tt++){var st=0,ft=0;if(te=yt?Ee.geometries[tt]:Ee,te!==null){ye=te.coordinates;var zt=te.type;switch(nt=0,zt){case null:break;case"Point":if(g(ye,We,fr,st,ft)===!1)return!1;We++,st++;break;case"LineString":case"MultiPoint":for(S=0;S<ye.length;S++){if(g(ye[S],We,fr,st,ft)===!1)return!1;We++,zt==="MultiPoint"&&st++}zt==="LineString"&&st++;break;case"Polygon":case"MultiLineString":for(S=0;S<ye.length;S++){for(k=0;k<ye[S].length-nt;k++){if(g(ye[S][k],We,fr,st,ft)===!1)return!1;We++}zt==="MultiLineString"&&st++,zt==="Polygon"&&ft++}zt==="Polygon"&&st++;break;case"MultiPolygon":for(S=0;S<ye.length;S++){for(ft=0,k=0;k<ye[S].length;k++){for(H=0;H<ye[S][k].length-nt;H++){if(g(ye[S][k][H],We,fr,st,ft)===!1)return!1;We++}ft++}st++}break;case"GeometryCollection":for(S=0;S<te.geometries.length;S++)if(Zo(te.geometries[S],g)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ur(h,g){if(h.type==="Feature")g(h,0);else if(h.type==="FeatureCollection")for(var _=0;_<h.features.length&&g(h.features[_],_)!==!1;_++);}function Js(h,g,_){var S=_;return Ur(h,function(k,H){H===0&&_===void 0?S=k:S=g(S,k,H)}),S}function Bl(h,g){var _,S,k,H,te,ae,ye,Ee,nt,We,yt=0,It=h.type==="FeatureCollection",tn=h.type==="Feature",xn=It?h.features.length:1;for(_=0;_<xn;_++){for(ae=It?h.features[_].geometry:tn?h.geometry:h,Ee=It?h.features[_].properties:tn?h.properties:{},nt=It?h.features[_].bbox:tn?h.bbox:void 0,We=It?h.features[_].id:tn?h.id:void 0,ye=ae?ae.type==="GeometryCollection":!1,te=ye?ae.geometries.length:1,k=0;k<te;k++){if(H=ye?ae.geometries[k]:ae,H===null){if(g(null,yt,Ee,nt,We)===!1)return!1;continue}switch(H.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(g(H,yt,Ee,nt,We)===!1)return!1;break}case"GeometryCollection":{for(S=0;S<H.geometries.length;S++)if(g(H.geometries[S],yt,Ee,nt,We)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}yt++}}function bo(h,g){Bl(h,function(_,S,k,H,te){var ae=_===null?null:_.type;switch(ae){case null:case"Point":case"LineString":case"Polygon":return g(et(_,k,{bbox:H,id:te}),S,0)===!1?!1:void 0}var ye;switch(ae){case"MultiPoint":ye="Point";break;case"MultiLineString":ye="LineString";break;case"MultiPolygon":ye="Polygon";break}for(var Ee=0;Ee<_.coordinates.length;Ee++){var nt=_.coordinates[Ee],We={type:ye,coordinates:nt};if(g(et(We,k),S,Ee)===!1)return!1}})}function Au(h){if(!h)throw new Error("geojson is required");var g=[];return bo(h,function(_){Ma(_,g)}),Gt(g)}function Ma(h,g){var _=[],S=h.geometry;if(S!==null){switch(S.type){case"Polygon":_=Si(S);break;case"LineString":_=[Si(S)]}_.forEach(function(k){var H=Qu(k,h.properties);H.forEach(function(te){te.id=g.length,g.push(te)})})}}function Qu(h,g){var _=[];return h.reduce(function(S,k){var H=Pt([S,k],g);return H.bbox=ml(S,k),_.push(H),k}),_}function ml(h,g){var _=h[0],S=h[1],k=g[0],H=g[1],te=_<k?_:k,ae=S<H?S:H,ye=_>k?_:k,Ee=S>H?S:H;return[te,ae,ye,Ee]}var vl=Au,Ps=l(ds(),1);function ka(h,g){var _={},S=[];if(h.type==="LineString"&&(h=et(h)),g.type==="LineString"&&(g=et(g)),h.type==="Feature"&&g.type==="Feature"&&h.geometry!==null&&g.geometry!==null&&h.geometry.type==="LineString"&&g.geometry.type==="LineString"&&h.geometry.coordinates.length===2&&g.geometry.coordinates.length===2){var k=Xo(h,g);return k&&S.push(k),Gt(S)}var H=(0,Ps.default)();return H.load(vl(g)),Ur(vl(h),function(te){Ur(H.search(te),function(ae){var ye=Xo(te,ae);if(ye){var Ee=Si(ye).join(",");_[Ee]||(_[Ee]=!0,S.push(ye))}})}),Gt(S)}function Xo(h,g){var _=Si(h),S=Si(g);if(_.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(S.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var k=_[0][0],H=_[0][1],te=_[1][0],ae=_[1][1],ye=S[0][0],Ee=S[0][1],nt=S[1][0],We=S[1][1],yt=(We-Ee)*(te-k)-(nt-ye)*(ae-H),It=(nt-ye)*(H-Ee)-(We-Ee)*(k-ye),tn=(te-k)*(H-Ee)-(ae-H)*(k-ye);if(yt===0)return null;var xn=It/yt,Sn=tn/yt;if(xn>=0&&xn<=1&&Sn>=0&&Sn<=1){var fr=k+xn*(te-k),tt=H+xn*(ae-H);return dt([fr,tt])}return null}var No=ka,Rl=l(ds(),1);function Qs(h,g,_){_===void 0&&(_={});var S=fi(h),k=fi(g),H=ar(k[1]-S[1]),te=ar(k[0]-S[0]),ae=ar(S[1]),ye=ar(k[1]),Ee=Math.pow(Math.sin(H/2),2)+Math.pow(Math.sin(te/2),2)*Math.cos(ae)*Math.cos(ye);return pn(2*Math.atan2(Math.sqrt(Ee),Math.sqrt(1-Ee)),_.units)}var _o=Qs;function wo(h){var g=h[0],_=h[1],S=h[2],k=h[3],H=_o(h.slice(0,2),[S,_]),te=_o(h.slice(0,2),[g,k]);if(H>=te){var ae=(_+k)/2;return[g,ae-(S-g)/2,S,ae+(S-g)/2]}else{var ye=(g+S)/2;return[ye-(k-_)/2,_,ye+(k-_)/2,k]}}var Ac=wo;function Ns(h){var g=[1/0,1/0,-1/0,-1/0];return Zo(h,function(_){g[0]>_[0]&&(g[0]=_[0]),g[1]>_[1]&&(g[1]=_[1]),g[2]<_[0]&&(g[2]=_[0]),g[3]<_[1]&&(g[3]=_[1])}),g}Ns.default=Ns;var Wa=Ns;function eo(h,g){g===void 0&&(g={});var _=g.precision,S=g.coordinates,k=g.mutate;if(_=_==null||isNaN(_)?6:_,S=S==null||isNaN(S)?3:S,!h)throw new Error("<geojson> is required");if(typeof _!="number")throw new Error("<precision> must be a number");if(typeof S!="number")throw new Error("<coordinates> must be a number");(k===!1||k===void 0)&&(h=JSON.parse(JSON.stringify(h)));var H=Math.pow(10,_);return Zo(h,function(te){to(te,H,S)}),h}function to(h,g,_){h.length>_&&h.splice(_,h.length);for(var S=0;S<h.length;S++)h[S]=Math.round(h[S]*g)/g;return h}var Ga=eo;function qa(h,g,_){if(_===void 0&&(_={}),_.final===!0)return no(h,g);var S=fi(h),k=fi(g),H=ar(S[0]),te=ar(k[0]),ae=ar(S[1]),ye=ar(k[1]),Ee=Math.sin(te-H)*Math.cos(ye),nt=Math.cos(ae)*Math.sin(ye)-Math.sin(ae)*Math.cos(ye)*Math.cos(te-H);return Vn(Math.atan2(Ee,nt))}function no(h,g){var _=qa(g,h);return _=(_+180)%360,_}function Vs(h,g,_,S){S===void 0&&(S={});var k=fi(h),H=ar(k[0]),te=ar(k[1]),ae=ar(_),ye=Rn(g,S.units),Ee=Math.asin(Math.sin(te)*Math.cos(ye)+Math.cos(te)*Math.sin(ye)*Math.cos(ae)),nt=H+Math.atan2(Math.sin(ae)*Math.sin(ye)*Math.cos(te),Math.cos(ye)-Math.sin(te)*Math.sin(Ee)),We=Vn(nt),yt=Vn(Ee);return dt([We,yt],S.properties)}function Aa(h,g,_){_===void 0&&(_={});var S=dt([1/0,1/0],{dist:1/0}),k=0;return bo(h,function(H){for(var te=Si(H),ae=0;ae<te.length-1;ae++){var ye=dt(te[ae]);ye.properties.dist=_o(g,ye,_);var Ee=dt(te[ae+1]);Ee.properties.dist=_o(g,Ee,_);var nt=_o(ye,Ee,_),We=Math.max(ye.properties.dist,Ee.properties.dist),yt=qa(ye,Ee),It=Vs(g,We,yt+90,_),tn=Vs(g,We,yt-90,_),xn=No(Pt([It.geometry.coordinates,tn.geometry.coordinates]),Pt([ye.geometry.coordinates,Ee.geometry.coordinates])),Sn=null;xn.features.length>0&&(Sn=xn.features[0],Sn.properties.dist=_o(g,Sn,_),Sn.properties.location=k+_o(ye,Sn,_)),ye.properties.dist<S.properties.dist&&(S=ye,S.properties.index=ae,S.properties.location=k),Ee.properties.dist<S.properties.dist&&(S=Ee,S.properties.index=ae+1,S.properties.location=k+nt),Sn&&Sn.properties.dist<S.properties.dist&&(S=Sn,S.properties.index=ae),k+=nt}}),S}var Jo=Aa;function ro(h,g){if(!h)throw new Error("line is required");if(!g)throw new Error("splitter is required");var _=Es(h),S=Es(g);if(_!=="LineString")throw new Error("line must be LineString");if(S==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(S==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var k=Ga(g,{precision:7});switch(S){case"Point":return Kt(h,k);case"MultiPoint":return _t(h,k);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return _t(h,No(h,k))}}function _t(h,g){var _=[],S=(0,Rl.default)();return bo(g,function(k){if(_.forEach(function(ae,ye){ae.id=ye}),!_.length)_=Kt(h,k).features,_.forEach(function(ae){ae.bbox||(ae.bbox=Ac(Wa(ae)))}),S.load(Gt(_));else{var H=S.search(k);if(H.features.length){var te=Nt(k,H);_=_.filter(function(ae){return ae.id!==te.id}),S.remove(te),Ur(Kt(te,k),function(ae){_.push(ae),S.insert(ae)})}}}),Gt(_)}function Kt(h,g){var _=[],S=Si(h)[0],k=Si(h)[h.geometry.coordinates.length-1];if(In(S,fi(g))||In(k,fi(g)))return Gt([h]);var H=(0,Rl.default)(),te=vl(h);H.load(te);var ae=H.search(g);if(!ae.features.length)return Gt([h]);var ye=Nt(g,ae),Ee=[S],nt=Js(te,function(We,yt,It){var tn=Si(yt)[1],xn=fi(g);return It===ye.id?(We.push(xn),_.push(Pt(We)),In(xn,tn)?[xn]:[xn,tn]):(We.push(tn),We)},Ee);return nt.length>1&&_.push(Pt(nt)),Gt(_)}function Nt(h,g){if(!g.features.length)throw new Error("lines must contain features");if(g.features.length===1)return g.features[0];var _,S=1/0;return Ur(g,function(k){var H=Jo(k,h),te=H.properties.dist;te<S&&(_=k,S=te)}),_}function In(h,g){return h[0]===g[0]&&h[1]===g[1]}var Jn=ro;function Cr(h,g,_){if(_===void 0&&(_={}),!h)throw new Error("point is required");if(!g)throw new Error("polygon is required");var S=fi(h),k=_s(g),H=k.type,te=g.bbox,ae=k.coordinates;if(te&&Ci(S,te)===!1)return!1;H==="Polygon"&&(ae=[ae]);for(var ye=!1,Ee=0;Ee<ae.length&&!ye;Ee++)if(Qi(S,ae[Ee][0],_.ignoreBoundary)){for(var nt=!1,We=1;We<ae[Ee].length&&!nt;)Qi(S,ae[Ee][We],!_.ignoreBoundary)&&(nt=!0),We++;nt||(ye=!0)}return ye}function Qi(h,g,_){var S=!1;g[0][0]===g[g.length-1][0]&&g[0][1]===g[g.length-1][1]&&(g=g.slice(0,g.length-1));for(var k=0,H=g.length-1;k<g.length;H=k++){var te=g[k][0],ae=g[k][1],ye=g[H][0],Ee=g[H][1],nt=h[1]*(te-ye)+ae*(ye-h[0])+Ee*(h[0]-te)===0&&(te-h[0])*(ye-h[0])<=0&&(ae-h[1])*(Ee-h[1])<=0;if(nt)return!_;var We=ae>h[1]!=Ee>h[1]&&h[0]<(ye-te)*(h[1]-ae)/(Ee-ae)+te;We&&(S=!S)}return S}function Ci(h,g){return g[0]<=h[0]&&g[1]<=h[1]&&g[2]>=h[0]&&g[3]>=h[1]}function du(h,g,_){_===void 0&&(_={});for(var S=fi(h),k=Si(g),H=0;H<k.length-1;H++){var te=!1;if(_.ignoreEndVertices&&(H===0&&(te="start"),H===k.length-2&&(te="end"),H===0&&H+1===k.length-1&&(te="both")),xo(k[H],k[H+1],S,te,typeof _.epsilon>"u"?null:_.epsilon))return!0}return!1}function xo(h,g,_,S,k){var H=_[0],te=_[1],ae=h[0],ye=h[1],Ee=g[0],nt=g[1],We=_[0]-ae,yt=_[1]-ye,It=Ee-ae,tn=nt-ye,xn=We*tn-yt*It;if(k!==null){if(Math.abs(xn)>k)return!1}else if(xn!==0)return!1;if(S){if(S==="start")return Math.abs(It)>=Math.abs(tn)?It>0?ae<H&&H<=Ee:Ee<=H&&H<ae:tn>0?ye<te&&te<=nt:nt<=te&&te<ye;if(S==="end")return Math.abs(It)>=Math.abs(tn)?It>0?ae<=H&&H<Ee:Ee<H&&H<=ae:tn>0?ye<=te&&te<nt:nt<te&&te<=ye;if(S==="both")return Math.abs(It)>=Math.abs(tn)?It>0?ae<H&&H<Ee:Ee<H&&H<ae:tn>0?ye<te&&te<nt:nt<te&&te<ye}else return Math.abs(It)>=Math.abs(tn)?It>0?ae<=H&&H<=Ee:Ee<=H&&H<=ae:tn>0?ye<=te&&te<=nt:nt<=te&&te<=ye;return!1}var es=du;function Ta(h,g){var _=_s(h),S=_s(g),k=_.type,H=S.type,te=_.coordinates,ae=S.coordinates;switch(k){case"Point":switch(H){case"Point":return Bi(te,ae);default:throw new Error("feature2 "+H+" geometry not supported")}case"MultiPoint":switch(H){case"Point":return Ya(_,S);case"MultiPoint":return Da(_,S);default:throw new Error("feature2 "+H+" geometry not supported")}case"LineString":switch(H){case"Point":return es(S,_,{ignoreEndVertices:!0});case"LineString":return Qr(_,S);case"MultiPoint":return Oa(_,S);default:throw new Error("feature2 "+H+" geometry not supported")}case"Polygon":switch(H){case"Point":return Cr(S,_,{ignoreBoundary:!0});case"LineString":return va(_,S);case"Polygon":return Us(_,S);case"MultiPoint":return Na(_,S);default:throw new Error("feature2 "+H+" geometry not supported")}default:throw new Error("feature1 "+k+" geometry not supported")}}function Ya(h,g){var _,S=!1;for(_=0;_<h.coordinates.length;_++)if(Bi(h.coordinates[_],g.coordinates)){S=!0;break}return S}function Da(h,g){for(var _=0,S=g.coordinates;_<S.length;_++){for(var k=S[_],H=!1,te=0,ae=h.coordinates;te<ae.length;te++){var ye=ae[te];if(Bi(k,ye)){H=!0;break}}if(!H)return!1}return!0}function Oa(h,g){for(var _=!1,S=0,k=g.coordinates;S<k.length;S++){var H=k[S];if(es(H,h,{ignoreEndVertices:!0})&&(_=!0),!es(H,h))return!1}return!!_}function Na(h,g){for(var _=0,S=g.coordinates;_<S.length;_++){var k=S[_];if(!Cr(k,h,{ignoreBoundary:!0}))return!1}return!0}function Qr(h,g){for(var _=!1,S=0,k=g.coordinates;S<k.length;S++){var H=k[S];if(es({type:"Point",coordinates:H},h,{ignoreEndVertices:!0})&&(_=!0),!es({type:"Point",coordinates:H},h,{ignoreEndVertices:!1}))return!1}return _}function va(h,g){var _=!1,S=0,k=Wa(h),H=Wa(g);if(!Ei(k,H))return!1;for(S;S<g.coordinates.length-1;S++){var te=ws(g.coordinates[S],g.coordinates[S+1]);if(Cr({type:"Point",coordinates:te},h,{ignoreBoundary:!0})){_=!0;break}}return _}function Us(h,g){if(h.type==="Feature"&&h.geometry===null||g.type==="Feature"&&g.geometry===null)return!1;var _=Wa(h),S=Wa(g);if(!Ei(_,S))return!1;for(var k=_s(g).coordinates,H=0,te=k;H<te.length;H++)for(var ae=te[H],ye=0,Ee=ae;ye<Ee.length;ye++){var nt=Ee[ye];if(!Cr(nt,h))return!1}return!0}function Ei(h,g){return!(h[0]>g[0]||h[2]<g[2]||h[1]>g[1]||h[3]<g[3])}function Bi(h,g){return h[0]===g[0]&&h[1]===g[1]}function ws(h,g){return[(h[0]+g[0])/2,(h[1]+g[1])/2]}var Gi=l(On()),Qo=h=>()=>h,Io=h=>{let g=h?(_,S)=>S.minus(_).abs().isLessThanOrEqualTo(h):Qo(!1);return(_,S)=>g(_,S)?0:_.comparedTo(S)};function sa(h){let g=h?(_,S,k,H,te)=>_.exponentiatedBy(2).isLessThanOrEqualTo(H.minus(S).exponentiatedBy(2).plus(te.minus(k).exponentiatedBy(2)).times(h)):Qo(!1);return(_,S,k)=>{let H=_.x,te=_.y,ae=k.x,ye=k.y,Ee=te.minus(ye).times(S.x.minus(ae)).minus(H.minus(ae).times(S.y.minus(ye)));return g(Ee,H,te,ae,ye)?0:Ee.comparedTo(0)}}var ec=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Ia=Math.ceil,Ms=Math.floor,Vi="[BigNumber Error] ",io=Vi+"Number primitive has more than 15 significant digits: ",Bo=1e14,gr=14,Ka=9007199254740991,Za=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],ya=1e7,Lo=1e9;function ih(h){var g,_,S,k=tt.prototype={constructor:tt,toString:null,valueOf:null},H=new tt(1),te=20,ae=4,ye=-7,Ee=21,nt=-1e7,We=1e7,yt=!1,It=1,tn=0,xn={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Sn="0123456789abcdefghijklmnopqrstuvwxyz",fr=!0;function tt(be,ke){var ze,je,Ue,He,ct,ht,mt,Mt,kt=this;if(!(kt instanceof tt))return new tt(be,ke);if(ke==null){if(be&&be._isBigNumber===!0){kt.s=be.s,!be.c||be.e>We?kt.c=kt.e=null:be.e<nt?kt.c=[kt.e=0]:(kt.e=be.e,kt.c=be.c.slice());return}if((ht=typeof be=="number")&&be*0==0){if(kt.s=1/be<0?(be=-be,-1):1,be===~~be){for(He=0,ct=be;ct>=10;ct/=10,He++);He>We?kt.c=kt.e=null:(kt.e=He,kt.c=[be]);return}Mt=String(be)}else{if(!ec.test(Mt=String(be)))return S(kt,Mt,ht);kt.s=Mt.charCodeAt(0)==45?(Mt=Mt.slice(1),-1):1}(He=Mt.indexOf("."))>-1&&(Mt=Mt.replace(".","")),(ct=Mt.search(/e/i))>0?(He<0&&(He=ct),He+=+Mt.slice(ct+1),Mt=Mt.substring(0,ct)):He<0&&(He=Mt.length)}else{if(u(ke,2,Sn.length,"Base"),ke==10&&fr)return kt=new tt(be),Lt(kt,te+kt.e+1,ae);if(Mt=String(be),ht=typeof be=="number"){if(be*0!=0)return S(kt,Mt,ht,ke);if(kt.s=1/be<0?(Mt=Mt.slice(1),-1):1,tt.DEBUG&&Mt.replace(/^0\.0*|\./,"").length>15)throw Error(io+be)}else kt.s=Mt.charCodeAt(0)===45?(Mt=Mt.slice(1),-1):1;for(ze=Sn.slice(0,ke),He=ct=0,mt=Mt.length;ct<mt;ct++)if(ze.indexOf(je=Mt.charAt(ct))<0){if(je=="."){if(ct>He){He=mt;continue}}else if(!Ue&&(Mt==Mt.toUpperCase()&&(Mt=Mt.toLowerCase())||Mt==Mt.toLowerCase()&&(Mt=Mt.toUpperCase()))){Ue=!0,ct=-1,He=0;continue}return S(kt,String(be),ht,ke)}ht=!1,Mt=_(Mt,ke,10,kt.s),(He=Mt.indexOf("."))>-1?Mt=Mt.replace(".",""):He=Mt.length}for(ct=0;Mt.charCodeAt(ct)===48;ct++);for(mt=Mt.length;Mt.charCodeAt(--mt)===48;);if(Mt=Mt.slice(ct,++mt)){if(mt-=ct,ht&&tt.DEBUG&&mt>15&&(be>Ka||be!==Ms(be)))throw Error(io+kt.s*be);if((He=He-ct-1)>We)kt.c=kt.e=null;else if(He<nt)kt.c=[kt.e=0];else{if(kt.e=He,kt.c=[],ct=(He+1)%gr,He<0&&(ct+=gr),ct<mt){for(ct&&kt.c.push(+Mt.slice(0,ct)),mt-=gr;ct<mt;)kt.c.push(+Mt.slice(ct,ct+=gr));ct=gr-(Mt=Mt.slice(ct)).length}else ct-=mt;for(;ct--;Mt+="0");kt.c.push(+Mt)}}else kt.c=[kt.e=0]}tt.clone=ih,tt.ROUND_UP=0,tt.ROUND_DOWN=1,tt.ROUND_CEIL=2,tt.ROUND_FLOOR=3,tt.ROUND_HALF_UP=4,tt.ROUND_HALF_DOWN=5,tt.ROUND_HALF_EVEN=6,tt.ROUND_HALF_CEIL=7,tt.ROUND_HALF_FLOOR=8,tt.EUCLID=9,tt.config=tt.set=function(be){var ke,ze;if(be!=null)if(typeof be=="object"){if(be.hasOwnProperty(ke="DECIMAL_PLACES")&&(ze=be[ke],u(ze,0,Lo,ke),te=ze),be.hasOwnProperty(ke="ROUNDING_MODE")&&(ze=be[ke],u(ze,0,8,ke),ae=ze),be.hasOwnProperty(ke="EXPONENTIAL_AT")&&(ze=be[ke],ze&&ze.pop?(u(ze[0],-1e9,0,ke),u(ze[1],0,Lo,ke),ye=ze[0],Ee=ze[1]):(u(ze,-1e9,Lo,ke),ye=-(Ee=ze<0?-ze:ze))),be.hasOwnProperty(ke="RANGE"))if(ze=be[ke],ze&&ze.pop)u(ze[0],-1e9,-1,ke),u(ze[1],1,Lo,ke),nt=ze[0],We=ze[1];else if(u(ze,-1e9,Lo,ke),ze)nt=-(We=ze<0?-ze:ze);else throw Error(Vi+ke+" cannot be zero: "+ze);if(be.hasOwnProperty(ke="CRYPTO"))if(ze=be[ke],ze===!!ze)if(ze)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))yt=ze;else throw yt=!ze,Error(Vi+"crypto unavailable");else yt=ze;else throw Error(Vi+ke+" not true or false: "+ze);if(be.hasOwnProperty(ke="MODULO_MODE")&&(ze=be[ke],u(ze,0,9,ke),It=ze),be.hasOwnProperty(ke="POW_PRECISION")&&(ze=be[ke],u(ze,0,Lo,ke),tn=ze),be.hasOwnProperty(ke="FORMAT"))if(ze=be[ke],typeof ze=="object")xn=ze;else throw Error(Vi+ke+" not an object: "+ze);if(be.hasOwnProperty(ke="ALPHABET"))if(ze=be[ke],typeof ze=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(ze))fr=ze.slice(0,10)=="0123456789",Sn=ze;else throw Error(Vi+ke+" invalid: "+ze)}else throw Error(Vi+"Object expected: "+be);return{DECIMAL_PLACES:te,ROUNDING_MODE:ae,EXPONENTIAL_AT:[ye,Ee],RANGE:[nt,We],CRYPTO:yt,MODULO_MODE:It,POW_PRECISION:tn,FORMAT:xn,ALPHABET:Sn}},tt.isBigNumber=function(be){if(!be||be._isBigNumber!==!0)return!1;if(!tt.DEBUG)return!0;var ke,ze,je=be.c,Ue=be.e,He=be.s;e:if({}.toString.call(je)=="[object Array]"){if((He===1||He===-1)&&Ue>=-1e9&&Ue<=Lo&&Ue===Ms(Ue)){if(je[0]===0){if(Ue===0&&je.length===1)return!0;break e}if(ke=(Ue+1)%gr,ke<1&&(ke+=gr),String(je[0]).length==ke){for(ke=0;ke<je.length;ke++)if(ze=je[ke],ze<0||ze>=Bo||ze!==Ms(ze))break e;if(ze!==0)return!0}}}else if(je===null&&Ue===null&&(He===null||He===1||He===-1))return!0;throw Error(Vi+"Invalid BigNumber: "+be)},tt.maximum=tt.max=function(){return ft(arguments,-1)},tt.minimum=tt.min=function(){return ft(arguments,1)},tt.random=function(){var be=9007199254740992,ke=Math.random()*be&2097151?function(){return Ms(Math.random()*be)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(ze){var je,Ue,He,ct,ht,mt=0,Mt=[],kt=new tt(H);if(ze==null?ze=te:u(ze,0,Lo),ct=Ia(ze/gr),yt)if(crypto.getRandomValues){for(je=crypto.getRandomValues(new Uint32Array(ct*=2));mt<ct;)ht=je[mt]*131072+(je[mt+1]>>>11),ht>=9e15?(Ue=crypto.getRandomValues(new Uint32Array(2)),je[mt]=Ue[0],je[mt+1]=Ue[1]):(Mt.push(ht%1e14),mt+=2);mt=ct/2}else if(crypto.randomBytes){for(je=crypto.randomBytes(ct*=7);mt<ct;)ht=(je[mt]&31)*281474976710656+je[mt+1]*1099511627776+je[mt+2]*4294967296+je[mt+3]*16777216+(je[mt+4]<<16)+(je[mt+5]<<8)+je[mt+6],ht>=9e15?crypto.randomBytes(7).copy(je,mt):(Mt.push(ht%1e14),mt+=7);mt=ct/7}else throw yt=!1,Error(Vi+"crypto unavailable");if(!yt)for(;mt<ct;)ht=ke(),ht<9e15&&(Mt[mt++]=ht%1e14);for(ct=Mt[--mt],ze%=gr,ct&&ze&&(ht=Za[gr-ze],Mt[mt]=Ms(ct/ht)*ht);Mt[mt]===0;Mt.pop(),mt--);if(mt<0)Mt=[He=0];else{for(He=-1;Mt[0]===0;Mt.splice(0,1),He-=gr);for(mt=1,ht=Mt[0];ht>=10;ht/=10,mt++);mt<gr&&(He-=gr-mt)}return kt.e=He,kt.c=Mt,kt}}(),tt.sum=function(){for(var be=1,ke=arguments,ze=new tt(ke[0]);be<ke.length;)ze=ze.plus(ke[be++]);return ze},_=function(){var be="0123456789";function ke(ze,je,Ue,He){for(var ct,ht=[0],mt,Mt=0,kt=ze.length;Mt<kt;){for(mt=ht.length;mt--;ht[mt]*=je);for(ht[0]+=He.indexOf(ze.charAt(Mt++)),ct=0;ct<ht.length;ct++)ht[ct]>Ue-1&&(ht[ct+1]==null&&(ht[ct+1]=0),ht[ct+1]+=ht[ct]/Ue|0,ht[ct]%=Ue)}return ht.reverse()}return function(ze,je,Ue,He,ct){var ht,mt,Mt,kt,cn,Un,qn,rr,yi=ze.indexOf("."),Ri=te,ei=ae;for(yi>=0&&(kt=tn,tn=0,ze=ze.replace(".",""),rr=new tt(je),Un=rr.pow(ze.length-yi),tn=kt,rr.c=ke(W(Ws(Un.c),Un.e,"0"),10,Ue,be),rr.e=rr.c.length),qn=ke(ze,je,Ue,ct?(ht=Sn,be):(ht=be,Sn)),Mt=kt=qn.length;qn[--kt]==0;qn.pop());if(!qn[0])return ht.charAt(0);if(yi<0?--Mt:(Un.c=qn,Un.e=Mt,Un.s=He,Un=g(Un,rr,Ri,ei,Ue),qn=Un.c,cn=Un.r,Mt=Un.e),mt=Mt+Ri+1,yi=qn[mt],kt=Ue/2,cn=cn||mt<0||qn[mt+1]!=null,cn=ei<4?(yi!=null||cn)&&(ei==0||ei==(Un.s<0?3:2)):yi>kt||yi==kt&&(ei==4||cn||ei==6&&qn[mt-1]&1||ei==(Un.s<0?8:7)),mt<1||!qn[0])ze=cn?W(ht.charAt(1),-Ri,ht.charAt(0)):ht.charAt(0);else{if(qn.length=mt,cn)for(--Ue;++qn[--mt]>Ue;)qn[mt]=0,mt||(++Mt,qn=[1].concat(qn));for(kt=qn.length;!qn[--kt];);for(yi=0,ze="";yi<=kt;ze+=ht.charAt(qn[yi++]));ze=W(ze,Mt,ht.charAt(0))}return ze}}(),g=function(){function be(je,Ue,He){var ct,ht,mt,Mt,kt=0,cn=je.length,Un=Ue%ya,qn=Ue/ya|0;for(je=je.slice();cn--;)mt=je[cn]%ya,Mt=je[cn]/ya|0,ct=qn*mt+Mt*Un,ht=Un*mt+ct%ya*ya+kt,kt=(ht/He|0)+(ct/ya|0)+qn*Mt,je[cn]=ht%He;return kt&&(je=[kt].concat(je)),je}function ke(je,Ue,He,ct){var ht,mt;if(He!=ct)mt=He>ct?1:-1;else for(ht=mt=0;ht<He;ht++)if(je[ht]!=Ue[ht]){mt=je[ht]>Ue[ht]?1:-1;break}return mt}function ze(je,Ue,He,ct){for(var ht=0;He--;)je[He]-=ht,ht=je[He]<Ue[He]?1:0,je[He]=ht*ct+je[He]-Ue[He];for(;!je[0]&&je.length>1;je.splice(0,1));}return function(je,Ue,He,ct,ht){var mt,Mt,kt,cn,Un,qn,rr,yi,Ri,ei,qi,jo,nc,Ra,Id,bl,Dc,Fa=je.s==Ue.s?1:-1,oo=je.c,xs=Ue.c;if(!oo||!oo[0]||!xs||!xs[0])return new tt(!je.s||!Ue.s||(oo?xs&&oo[0]==xs[0]:!xs)?NaN:oo&&oo[0]==0||!xs?Fa*0:Fa/0);for(yi=new tt(Fa),Ri=yi.c=[],Mt=je.e-Ue.e,Fa=He+Mt+1,ht||(ht=Bo,Mt=Hs(je.e/gr)-Hs(Ue.e/gr),Fa=Fa/gr|0),kt=0;xs[kt]==(oo[kt]||0);kt++);if(xs[kt]>(oo[kt]||0)&&Mt--,Fa<0)Ri.push(1),cn=!0;else{for(Ra=oo.length,bl=xs.length,kt=0,Fa+=2,Un=Ms(ht/(xs[0]+1)),Un>1&&(xs=be(xs,Un,ht),oo=be(oo,Un,ht),bl=xs.length,Ra=oo.length),nc=bl,ei=oo.slice(0,bl),qi=ei.length;qi<bl;ei[qi++]=0);Dc=xs.slice(),Dc=[0].concat(Dc),Id=xs[0],xs[1]>=ht/2&&Id++;do{if(Un=0,mt=ke(xs,ei,bl,qi),mt<0){if(jo=ei[0],bl!=qi&&(jo=jo*ht+(ei[1]||0)),Un=Ms(jo/Id),Un>1)for(Un>=ht&&(Un=ht-1),qn=be(xs,Un,ht),rr=qn.length,qi=ei.length;ke(qn,ei,rr,qi)==1;)Un--,ze(qn,bl<rr?Dc:xs,rr,ht),rr=qn.length,mt=1;else Un==0&&(mt=Un=1),qn=xs.slice(),rr=qn.length;if(rr<qi&&(qn=[0].concat(qn)),ze(ei,qn,qi,ht),qi=ei.length,mt==-1)for(;ke(xs,ei,bl,qi)<1;)Un++,ze(ei,bl<qi?Dc:xs,qi,ht),qi=ei.length}else mt===0&&(Un++,ei=[0]);Ri[kt++]=Un,ei[0]?ei[qi++]=oo[nc]||0:(ei=[oo[nc]],qi=1)}while((nc++<Ra||ei[0]!=null)&&Fa--);cn=ei[0]!=null,Ri[0]||Ri.splice(0,1)}if(ht==Bo){for(kt=1,Fa=Ri[0];Fa>=10;Fa/=10,kt++);Lt(yi,He+(yi.e=kt+Mt*gr-1)+1,ct,cn)}else yi.e=Mt,yi.r=+cn;return yi}}();function st(be,ke,ze,je){var Ue,He,ct,ht,mt;if(ze==null?ze=ae:u(ze,0,8),!be.c)return be.toString();if(Ue=be.c[0],ct=be.e,ke==null)mt=Ws(be.c),mt=je==1||je==2&&(ct<=ye||ct>=Ee)?P(mt,ct):W(mt,ct,"0");else if(be=Lt(new tt(be),ke,ze),He=be.e,mt=Ws(be.c),ht=mt.length,je==1||je==2&&(ke<=He||He<=ye)){for(;ht<ke;mt+="0",ht++);mt=P(mt,He)}else if(ke-=ct,mt=W(mt,He,"0"),He+1>ht){if(--ke>0)for(mt+=".";ke--;mt+="0");}else if(ke+=He-ht,ke>0)for(He+1==ht&&(mt+=".");ke--;mt+="0");return be.s<0&&Ue?"-"+mt:mt}function ft(be,ke){for(var ze,je,Ue=1,He=new tt(be[0]);Ue<be.length;Ue++)je=new tt(be[Ue]),(!je.s||(ze=ba(He,je))===ke||ze===0&&He.s===ke)&&(He=je);return He}function zt(be,ke,ze){for(var je=1,Ue=ke.length;!ke[--Ue];ke.pop());for(Ue=ke[0];Ue>=10;Ue/=10,je++);return(ze=je+ze*gr-1)>We?be.c=be.e=null:ze<nt?be.c=[be.e=0]:(be.e=ze,be.c=ke),be}S=function(){var be=/^(-?)0([xbo])(?=\w[\w.]*$)/i,ke=/^([^.]+)\.$/,ze=/^\.([^.]+)$/,je=/^-?(Infinity|NaN)$/,Ue=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(He,ct,ht,mt){var Mt,kt=ht?ct:ct.replace(Ue,"");if(je.test(kt))He.s=isNaN(kt)?null:kt<0?-1:1;else{if(!ht&&(kt=kt.replace(be,function(cn,Un,qn){return Mt=(qn=qn.toLowerCase())=="x"?16:qn=="b"?2:8,!mt||mt==Mt?Un:cn}),mt&&(Mt=mt,kt=kt.replace(ke,"$1").replace(ze,"0.$1")),ct!=kt))return new tt(kt,Mt);if(tt.DEBUG)throw Error(Vi+"Not a"+(mt?" base "+mt:"")+" number: "+ct);He.s=null}He.c=He.e=null}}();function Lt(be,ke,ze,je){var Ue,He,ct,ht,mt,Mt,kt,cn=be.c,Un=Za;if(cn){e:{for(Ue=1,ht=cn[0];ht>=10;ht/=10,Ue++);if(He=ke-Ue,He<0)He+=gr,ct=ke,mt=cn[Mt=0],kt=Ms(mt/Un[Ue-ct-1]%10);else if(Mt=Ia((He+1)/gr),Mt>=cn.length)if(je){for(;cn.length<=Mt;cn.push(0));mt=kt=0,Ue=1,He%=gr,ct=He-gr+1}else break e;else{for(mt=ht=cn[Mt],Ue=1;ht>=10;ht/=10,Ue++);He%=gr,ct=He-gr+Ue,kt=ct<0?0:Ms(mt/Un[Ue-ct-1]%10)}if(je=je||ke<0||cn[Mt+1]!=null||(ct<0?mt:mt%Un[Ue-ct-1]),je=ze<4?(kt||je)&&(ze==0||ze==(be.s<0?3:2)):kt>5||kt==5&&(ze==4||je||ze==6&&(He>0?ct>0?mt/Un[Ue-ct]:0:cn[Mt-1])%10&1||ze==(be.s<0?8:7)),ke<1||!cn[0])return cn.length=0,je?(ke-=be.e+1,cn[0]=Un[(gr-ke%gr)%gr],be.e=-ke||0):cn[0]=be.e=0,be;if(He==0?(cn.length=Mt,ht=1,Mt--):(cn.length=Mt+1,ht=Un[gr-He],cn[Mt]=ct>0?Ms(mt/Un[Ue-ct]%Un[ct])*ht:0),je)for(;;)if(Mt==0){for(He=1,ct=cn[0];ct>=10;ct/=10,He++);for(ct=cn[0]+=ht,ht=1;ct>=10;ct/=10,ht++);He!=ht&&(be.e++,cn[0]==Bo&&(cn[0]=1));break}else{if(cn[Mt]+=ht,cn[Mt]!=Bo)break;cn[Mt--]=0,ht=1}for(He=cn.length;cn[--He]===0;cn.pop());}be.e>We?be.c=be.e=null:be.e<nt&&(be.c=[be.e=0])}return be}function Bt(be){var ke,ze=be.e;return ze===null?be.toString():(ke=Ws(be.c),ke=ze<=ye||ze>=Ee?P(ke,ze):W(ke,ze,"0"),be.s<0?"-"+ke:ke)}return k.absoluteValue=k.abs=function(){var be=new tt(this);return be.s<0&&(be.s=1),be},k.comparedTo=function(be,ke){return ba(this,new tt(be,ke))},k.decimalPlaces=k.dp=function(be,ke){var ze,je,Ue,He=this;if(be!=null)return u(be,0,Lo),ke==null?ke=ae:u(ke,0,8),Lt(new tt(He),be+He.e+1,ke);if(!(ze=He.c))return null;if(je=((Ue=ze.length-1)-Hs(this.e/gr))*gr,Ue=ze[Ue])for(;Ue%10==0;Ue/=10,je--);return je<0&&(je=0),je},k.dividedBy=k.div=function(be,ke){return g(this,new tt(be,ke),te,ae)},k.dividedToIntegerBy=k.idiv=function(be,ke){return g(this,new tt(be,ke),0,1)},k.exponentiatedBy=k.pow=function(be,ke){var ze,je,Ue,He,ct,ht,mt,Mt,kt,cn=this;if(be=new tt(be),be.c&&!be.isInteger())throw Error(Vi+"Exponent not an integer: "+Bt(be));if(ke!=null&&(ke=new tt(ke)),ht=be.e>14,!cn.c||!cn.c[0]||cn.c[0]==1&&!cn.e&&cn.c.length==1||!be.c||!be.c[0])return kt=new tt(Math.pow(+Bt(cn),ht?be.s*(2-y(be)):+Bt(be))),ke?kt.mod(ke):kt;if(mt=be.s<0,ke){if(ke.c?!ke.c[0]:!ke.s)return new tt(NaN);je=!mt&&cn.isInteger()&&ke.isInteger(),je&&(cn=cn.mod(ke))}else{if(be.e>9&&(cn.e>0||cn.e<-1||(cn.e==0?cn.c[0]>1||ht&&cn.c[1]>=24e7:cn.c[0]<8e13||ht&&cn.c[0]<=9999975e7)))return He=cn.s<0&&y(be)?-0:0,cn.e>-1&&(He=1/He),new tt(mt?1/He:He);tn&&(He=Ia(tn/gr+2))}for(ht?(ze=new tt(.5),mt&&(be.s=1),Mt=y(be)):(Ue=Math.abs(+Bt(be)),Mt=Ue%2),kt=new tt(H);;){if(Mt){if(kt=kt.times(cn),!kt.c)break;He?kt.c.length>He&&(kt.c.length=He):je&&(kt=kt.mod(ke))}if(Ue){if(Ue=Ms(Ue/2),Ue===0)break;Mt=Ue%2}else if(be=be.times(ze),Lt(be,be.e+1,1),be.e>14)Mt=y(be);else{if(Ue=+Bt(be),Ue===0)break;Mt=Ue%2}cn=cn.times(cn),He?cn.c&&cn.c.length>He&&(cn.c.length=He):je&&(cn=cn.mod(ke))}return je?kt:(mt&&(kt=H.div(kt)),ke?kt.mod(ke):He?Lt(kt,tn,ae,ct):kt)},k.integerValue=function(be){var ke=new tt(this);return be==null?be=ae:u(be,0,8),Lt(ke,ke.e+1,be)},k.isEqualTo=k.eq=function(be,ke){return ba(this,new tt(be,ke))===0},k.isFinite=function(){return!!this.c},k.isGreaterThan=k.gt=function(be,ke){return ba(this,new tt(be,ke))>0},k.isGreaterThanOrEqualTo=k.gte=function(be,ke){return(ke=ba(this,new tt(be,ke)))===1||ke===0},k.isInteger=function(){return!!this.c&&Hs(this.e/gr)>this.c.length-2},k.isLessThan=k.lt=function(be,ke){return ba(this,new tt(be,ke))<0},k.isLessThanOrEqualTo=k.lte=function(be,ke){return(ke=ba(this,new tt(be,ke)))===-1||ke===0},k.isNaN=function(){return!this.s},k.isNegative=function(){return this.s<0},k.isPositive=function(){return this.s>0},k.isZero=function(){return!!this.c&&this.c[0]==0},k.minus=function(be,ke){var ze,je,Ue,He,ct=this,ht=ct.s;if(be=new tt(be,ke),ke=be.s,!ht||!ke)return new tt(NaN);if(ht!=ke)return be.s=-ke,ct.plus(be);var mt=ct.e/gr,Mt=be.e/gr,kt=ct.c,cn=be.c;if(!mt||!Mt){if(!kt||!cn)return kt?(be.s=-ke,be):new tt(cn?ct:NaN);if(!kt[0]||!cn[0])return cn[0]?(be.s=-ke,be):new tt(kt[0]?ct:ae==3?-0:0)}if(mt=Hs(mt),Mt=Hs(Mt),kt=kt.slice(),ht=mt-Mt){for((He=ht<0)?(ht=-ht,Ue=kt):(Mt=mt,Ue=cn),Ue.reverse(),ke=ht;ke--;Ue.push(0));Ue.reverse()}else for(je=(He=(ht=kt.length)<(ke=cn.length))?ht:ke,ht=ke=0;ke<je;ke++)if(kt[ke]!=cn[ke]){He=kt[ke]<cn[ke];break}if(He&&(Ue=kt,kt=cn,cn=Ue,be.s=-be.s),ke=(je=cn.length)-(ze=kt.length),ke>0)for(;ke--;kt[ze++]=0);for(ke=Bo-1;je>ht;){if(kt[--je]<cn[je]){for(ze=je;ze&&!kt[--ze];kt[ze]=ke);--kt[ze],kt[je]+=Bo}kt[je]-=cn[je]}for(;kt[0]==0;kt.splice(0,1),--Mt);return kt[0]?zt(be,kt,Mt):(be.s=ae==3?-1:1,be.c=[be.e=0],be)},k.modulo=k.mod=function(be,ke){var ze,je,Ue=this;return be=new tt(be,ke),!Ue.c||!be.s||be.c&&!be.c[0]?new tt(NaN):!be.c||Ue.c&&!Ue.c[0]?new tt(Ue):(It==9?(je=be.s,be.s=1,ze=g(Ue,be,0,3),be.s=je,ze.s*=je):ze=g(Ue,be,0,It),be=Ue.minus(ze.times(be)),!be.c[0]&&It==1&&(be.s=Ue.s),be)},k.multipliedBy=k.times=function(be,ke){var ze,je,Ue,He,ct,ht,mt,Mt,kt,cn,Un,qn,rr,yi,Ri,ei=this,qi=ei.c,jo=(be=new tt(be,ke)).c;if(!qi||!jo||!qi[0]||!jo[0])return!ei.s||!be.s||qi&&!qi[0]&&!jo||jo&&!jo[0]&&!qi?be.c=be.e=be.s=null:(be.s*=ei.s,!qi||!jo?be.c=be.e=null:(be.c=[0],be.e=0)),be;for(je=Hs(ei.e/gr)+Hs(be.e/gr),be.s*=ei.s,mt=qi.length,cn=jo.length,mt<cn&&(rr=qi,qi=jo,jo=rr,Ue=mt,mt=cn,cn=Ue),Ue=mt+cn,rr=[];Ue--;rr.push(0));for(yi=Bo,Ri=ya,Ue=cn;--Ue>=0;){for(ze=0,Un=jo[Ue]%Ri,qn=jo[Ue]/Ri|0,ct=mt,He=Ue+ct;He>Ue;)Mt=qi[--ct]%Ri,kt=qi[ct]/Ri|0,ht=qn*Mt+kt*Un,Mt=Un*Mt+ht%Ri*Ri+rr[He]+ze,ze=(Mt/yi|0)+(ht/Ri|0)+qn*kt,rr[He--]=Mt%yi;rr[He]=ze}return ze?++je:rr.splice(0,1),zt(be,rr,je)},k.negated=function(){var be=new tt(this);return be.s=-be.s||null,be},k.plus=function(be,ke){var ze,je=this,Ue=je.s;if(be=new tt(be,ke),ke=be.s,!Ue||!ke)return new tt(NaN);if(Ue!=ke)return be.s=-ke,je.minus(be);var He=je.e/gr,ct=be.e/gr,ht=je.c,mt=be.c;if(!He||!ct){if(!ht||!mt)return new tt(Ue/0);if(!ht[0]||!mt[0])return mt[0]?be:new tt(ht[0]?je:Ue*0)}if(He=Hs(He),ct=Hs(ct),ht=ht.slice(),Ue=He-ct){for(Ue>0?(ct=He,ze=mt):(Ue=-Ue,ze=ht),ze.reverse();Ue--;ze.push(0));ze.reverse()}for(Ue=ht.length,ke=mt.length,Ue-ke<0&&(ze=mt,mt=ht,ht=ze,ke=Ue),Ue=0;ke;)Ue=(ht[--ke]=ht[ke]+mt[ke]+Ue)/Bo|0,ht[ke]=Bo===ht[ke]?0:ht[ke]%Bo;return Ue&&(ht=[Ue].concat(ht),++ct),zt(be,ht,ct)},k.precision=k.sd=function(be,ke){var ze,je,Ue,He=this;if(be!=null&&be!==!!be)return u(be,1,Lo),ke==null?ke=ae:u(ke,0,8),Lt(new tt(He),be,ke);if(!(ze=He.c))return null;if(Ue=ze.length-1,je=Ue*gr+1,Ue=ze[Ue]){for(;Ue%10==0;Ue/=10,je--);for(Ue=ze[0];Ue>=10;Ue/=10,je++);}return be&&He.e+1>je&&(je=He.e+1),je},k.shiftedBy=function(be){return u(be,-9007199254740991,Ka),this.times("1e"+be)},k.squareRoot=k.sqrt=function(){var be,ke,ze,je,Ue,He=this,ct=He.c,ht=He.s,mt=He.e,Mt=te+4,kt=new tt("0.5");if(ht!==1||!ct||!ct[0])return new tt(!ht||ht<0&&(!ct||ct[0])?NaN:ct?He:1/0);if(ht=Math.sqrt(+Bt(He)),ht==0||ht==1/0?(ke=Ws(ct),(ke.length+mt)%2==0&&(ke+="0"),ht=Math.sqrt(+ke),mt=Hs((mt+1)/2)-(mt<0||mt%2),ht==1/0?ke="5e"+mt:(ke=ht.toExponential(),ke=ke.slice(0,ke.indexOf("e")+1)+mt),ze=new tt(ke)):ze=new tt(ht+""),ze.c[0]){for(mt=ze.e,ht=mt+Mt,ht<3&&(ht=0);;)if(Ue=ze,ze=kt.times(Ue.plus(g(He,Ue,Mt,1))),Ws(Ue.c).slice(0,ht)===(ke=Ws(ze.c)).slice(0,ht))if(ze.e<mt&&--ht,ke=ke.slice(ht-3,ht+1),ke=="9999"||!je&&ke=="4999"){if(!je&&(Lt(Ue,Ue.e+te+2,0),Ue.times(Ue).eq(He))){ze=Ue;break}Mt+=4,ht+=4,je=1}else{(!+ke||!+ke.slice(1)&&ke.charAt(0)=="5")&&(Lt(ze,ze.e+te+2,1),be=!ze.times(ze).eq(He));break}}return Lt(ze,ze.e+te+1,ae,be)},k.toExponential=function(be,ke){return be!=null&&(u(be,0,Lo),be++),st(this,be,ke,1)},k.toFixed=function(be,ke){return be!=null&&(u(be,0,Lo),be=be+this.e+1),st(this,be,ke)},k.toFormat=function(be,ke,ze){var je,Ue=this;if(ze==null)be!=null&&ke&&typeof ke=="object"?(ze=ke,ke=null):be&&typeof be=="object"?(ze=be,be=ke=null):ze=xn;else if(typeof ze!="object")throw Error(Vi+"Argument not an object: "+ze);if(je=Ue.toFixed(be,ke),Ue.c){var He,ct=je.split("."),ht=+ze.groupSize,mt=+ze.secondaryGroupSize,Mt=ze.groupSeparator||"",kt=ct[0],cn=ct[1],Un=Ue.s<0,qn=Un?kt.slice(1):kt,rr=qn.length;if(mt&&(He=ht,ht=mt,mt=He,rr-=He),ht>0&&rr>0){for(He=rr%ht||ht,kt=qn.substr(0,He);He<rr;He+=ht)kt+=Mt+qn.substr(He,ht);mt>0&&(kt+=Mt+qn.slice(He)),Un&&(kt="-"+kt)}je=cn?kt+(ze.decimalSeparator||"")+((mt=+ze.fractionGroupSize)?cn.replace(new RegExp("\\d{"+mt+"}\\B","g"),"$&"+(ze.fractionGroupSeparator||"")):cn):kt}return(ze.prefix||"")+je+(ze.suffix||"")},k.toFraction=function(be){var ke,ze,je,Ue,He,ct,ht,mt,Mt,kt,cn,Un,qn=this,rr=qn.c;if(be!=null&&(ht=new tt(be),!ht.isInteger()&&(ht.c||ht.s!==1)||ht.lt(H)))throw Error(Vi+"Argument "+(ht.isInteger()?"out of range: ":"not an integer: ")+Bt(ht));if(!rr)return new tt(qn);for(ke=new tt(H),Mt=ze=new tt(H),je=mt=new tt(H),Un=Ws(rr),He=ke.e=Un.length-qn.e-1,ke.c[0]=Za[(ct=He%gr)<0?gr+ct:ct],be=!be||ht.comparedTo(ke)>0?He>0?ke:Mt:ht,ct=We,We=1/0,ht=new tt(Un),mt.c[0]=0;kt=g(ht,ke,0,1),Ue=ze.plus(kt.times(je)),Ue.comparedTo(be)!=1;)ze=je,je=Ue,Mt=mt.plus(kt.times(Ue=Mt)),mt=Ue,ke=ht.minus(kt.times(Ue=ke)),ht=Ue;return Ue=g(be.minus(ze),je,0,1),mt=mt.plus(Ue.times(Mt)),ze=ze.plus(Ue.times(je)),mt.s=Mt.s=qn.s,He=He*2,cn=g(Mt,je,He,ae).minus(qn).abs().comparedTo(g(mt,ze,He,ae).minus(qn).abs())<1?[Mt,je]:[mt,ze],We=ct,cn},k.toNumber=function(){return+Bt(this)},k.toPrecision=function(be,ke){return be!=null&&u(be,1,Lo),st(this,be,ke,2)},k.toString=function(be){var ke,ze=this,je=ze.s,Ue=ze.e;return Ue===null?je?(ke="Infinity",je<0&&(ke="-"+ke)):ke="NaN":(be==null?ke=Ue<=ye||Ue>=Ee?P(Ws(ze.c),Ue):W(Ws(ze.c),Ue,"0"):be===10&&fr?(ze=Lt(new tt(ze),te+Ue+1,ae),ke=W(Ws(ze.c),ze.e,"0")):(u(be,2,Sn.length,"Base"),ke=_(W(Ws(ze.c),Ue,"0"),10,be,je,!0)),je<0&&ze.c[0]&&(ke="-"+ke)),ke},k.valueOf=k.toJSON=function(){return Bt(this)},k._isBigNumber=!0,k[Symbol.toStringTag]="BigNumber",k[Symbol.for("nodejs.util.inspect.custom")]=k.valueOf,h!=null&&tt.set(h),tt}function Hs(h){var g=h|0;return h>0||h===g?g:g-1}function Ws(h){for(var g,_,S=1,k=h.length,H=h[0]+"";S<k;){for(g=h[S++]+"",_=gr-g.length;_--;g="0"+g);H+=g}for(k=H.length;H.charCodeAt(--k)===48;);return H.slice(0,k+1||1)}function ba(h,g){var _,S,k=h.c,H=g.c,te=h.s,ae=g.s,ye=h.e,Ee=g.e;if(!te||!ae)return null;if(_=k&&!k[0],S=H&&!H[0],_||S)return _?S?0:-ae:te;if(te!=ae)return te;if(_=te<0,S=ye==Ee,!k||!H)return S?0:!k^_?1:-1;if(!S)return ye>Ee^_?1:-1;for(ae=(ye=k.length)<(Ee=H.length)?ye:Ee,te=0;te<ae;te++)if(k[te]!=H[te])return k[te]>H[te]^_?1:-1;return ye==Ee?0:ye>Ee^_?1:-1}function u(h,g,_,S){if(h<g||h>_||h!==Ms(h))throw Error(Vi+(S||"Argument")+(typeof h=="number"?h<g||h>_?" out of range: ":" not an integer: ":" not a primitive number: ")+String(h))}function y(h){var g=h.c.length-1;return Hs(h.e/gr)==g&&h.c[g]%2!=0}function P(h,g){return(h.length>1?h.charAt(0)+"."+h.slice(1):h)+(g<0?"e":"e+")+g}function W(h,g,_){var S,k;if(g<0){for(k=_+".";++g;k+=_);h=k+h}else if(S=h.length,++g>S){for(k=_,g-=S;--g;k+=_);h+=k}else g<S&&(h=h.slice(0,g)+"."+h.slice(g));return h}var le=ih(),Pe=le,lt=class{constructor(h){Ze(this,"key");Ze(this,"left",null);Ze(this,"right",null);this.key=h}},Dt=class extends lt{constructor(h){super(h)}},qt=class{constructor(){Ze(this,"size",0);Ze(this,"modificationCount",0);Ze(this,"splayCount",0)}splay(h){let g=this.root;if(g==null)return this.compare(h,h),-1;let _=null,S=null,k=null,H=null,te=g,ae=this.compare,ye;for(;;)if(ye=ae(te.key,h),ye>0){let Ee=te.left;if(Ee==null||(ye=ae(Ee.key,h),ye>0&&(te.left=Ee.right,Ee.right=te,te=Ee,Ee=te.left,Ee==null)))break;_==null?S=te:_.left=te,_=te,te=Ee}else if(ye<0){let Ee=te.right;if(Ee==null||(ye=ae(Ee.key,h),ye<0&&(te.right=Ee.left,Ee.left=te,te=Ee,Ee=te.right,Ee==null)))break;k==null?H=te:k.right=te,k=te,te=Ee}else break;return k!=null&&(k.right=te.left,te.left=H),_!=null&&(_.left=te.right,te.right=S),this.root!==te&&(this.root=te,this.splayCount++),ye}splayMin(h){let g=h,_=g.left;for(;_!=null;){let S=_;g.left=S.right,S.right=g,g=S,_=g.left}return g}splayMax(h){let g=h,_=g.right;for(;_!=null;){let S=_;g.right=S.left,S.left=g,g=S,_=g.right}return g}_delete(h){if(this.root==null||this.splay(h)!=0)return null;let g=this.root,_=g,S=g.left;if(this.size--,S==null)this.root=g.right;else{let k=g.right;g=this.splayMax(S),g.right=k,this.root=g}return this.modificationCount++,_}addNewRoot(h,g){this.size++,this.modificationCount++;let _=this.root;if(_==null){this.root=h;return}g<0?(h.left=_,h.right=_.right,_.right=null):(h.right=_,h.left=_.left,_.left=null),this.root=h}_first(){let h=this.root;return h==null?null:(this.root=this.splayMin(h),this.root)}_last(){let h=this.root;return h==null?null:(this.root=this.splayMax(h),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(h){return this.validKey(h)&&this.splay(h)==0}defaultCompare(){return(h,g)=>h<g?-1:h>g?1:0}wrap(){return{getRoot:()=>this.root,setRoot:h=>{this.root=h},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:h=>{this.splayCount=h},splay:h=>this.splay(h),has:h=>this.has(h)}}},hn=class Lg extends qt{constructor(_,S){super();Ze(this,"root",null);Ze(this,"compare");Ze(this,"validKey");Ze(this,An,"[object Set]");this.compare=_??this.defaultCompare(),this.validKey=S??(k=>k!=null&&k!=null)}delete(_){return this.validKey(_)?this._delete(_)!=null:!1}deleteAll(_){for(let S of _)this.delete(S)}forEach(_){let S=this[Symbol.iterator](),k;for(;k=S.next(),!k.done;)_(k.value,k.value,this)}add(_){let S=this.splay(_);return S!=0&&this.addNewRoot(new Dt(_),S),this}addAndReturn(_){let S=this.splay(_);return S!=0&&this.addNewRoot(new Dt(_),S),this.root.key}addAll(_){for(let S of _)this.add(S)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)<0)return this.root.key;let S=this.root.left;if(S==null)return null;let k=S.right;for(;k!=null;)S=k,k=S.right;return S.key}firstAfter(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)>0)return this.root.key;let S=this.root.right;if(S==null)return null;let k=S.left;for(;k!=null;)S=k,k=S.left;return S.key}retainAll(_){let S=new Lg(this.compare,this.validKey),k=this.modificationCount;for(let H of _){if(k!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(H)&&this.splay(H)==0&&S.add(this.root.key)}S.size!=this.size&&(this.root=S.root,this.size=S.size,this.modificationCount++)}lookup(_){return!this.validKey(_)||this.splay(_)!=0?null:this.root.key}intersection(_){let S=new Lg(this.compare,this.validKey);for(let k of this)_.has(k)&&S.add(k);return S}difference(_){let S=new Lg(this.compare,this.validKey);for(let k of this)_.has(k)||S.add(k);return S}union(_){let S=this.clone();return S.addAll(_),S}clone(){let _=new Lg(this.compare,this.validKey);return _.size=this.size,_.root=this.copyNode(this.root),_}copyNode(_){if(_==null)return null;function S(H,te){let ae,ye;do{if(ae=H.left,ye=H.right,ae!=null){let Ee=new Dt(ae.key);te.left=Ee,S(ae,Ee)}if(ye!=null){let Ee=new Dt(ye.key);te.right=Ee,H=ye,te=Ee}}while(ye!=null)}let k=new Dt(_.key);return S(_,k),k}toSet(){return this.clone()}entries(){return new jr(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(nr=Symbol.iterator,An=Symbol.toStringTag,nr)](){return new tr(this.wrap())}},Fn=class{constructor(h){Ze(this,"tree");Ze(this,"path",new Array);Ze(this,"modificationCount",null);Ze(this,"splayCount");this.tree=h,this.splayCount=h.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let h=this.path[this.path.length-1];return this.getValue(h)}rebuildPath(h){this.path.splice(0,this.path.length),this.tree.splay(h),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(h){for(;h!=null;)this.path.push(h),h=h.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let _=this.tree.getRoot();for(;_!=null;)this.path.push(_),_=_.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let h=this.path[this.path.length-1],g=h.right;if(g!=null){for(;g!=null;)this.path.push(g),g=g.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===h;)h=this.path.pop();return this.path.length>0}},tr=class extends Fn{getValue(h){return h.key}},jr=class extends Fn{getValue(h){return[h.key,h.key]}},ks=h=>h,ls=h=>{if(h){let g=new hn(Io(h)),_=new hn(Io(h)),S=(H,te)=>te.addAndReturn(H),k=H=>({x:S(H.x,g),y:S(H.y,_)});return k({x:new Pe(0),y:new Pe(0)}),k}return ks},Gs=h=>({set:g=>{ts=Gs(g)},reset:()=>Gs(h),compare:Io(h),snap:ls(h),orient:sa(h)}),ts=Gs(),Ro=(h,g)=>h.ll.x.isLessThanOrEqualTo(g.x)&&g.x.isLessThanOrEqualTo(h.ur.x)&&h.ll.y.isLessThanOrEqualTo(g.y)&&g.y.isLessThanOrEqualTo(h.ur.y),sh=(h,g)=>{if(g.ur.x.isLessThan(h.ll.x)||h.ur.x.isLessThan(g.ll.x)||g.ur.y.isLessThan(h.ll.y)||h.ur.y.isLessThan(g.ll.y))return null;let _=h.ll.x.isLessThan(g.ll.x)?g.ll.x:h.ll.x,S=h.ur.x.isLessThan(g.ur.x)?h.ur.x:g.ur.x,k=h.ll.y.isLessThan(g.ll.y)?g.ll.y:h.ll.y,H=h.ur.y.isLessThan(g.ur.y)?h.ur.y:g.ur.y;return{ll:{x:_,y:k},ur:{x:S,y:H}}},Ba=(h,g)=>h.x.times(g.y).minus(h.y.times(g.x)),_a=(h,g)=>h.x.times(g.x).plus(h.y.times(g.y)),oa=h=>_a(h,h).sqrt(),Od=(h,g,_)=>{let S={x:g.x.minus(h.x),y:g.y.minus(h.y)},k={x:_.x.minus(h.x),y:_.y.minus(h.y)};return Ba(k,S).div(oa(k)).div(oa(S))},Tu=(h,g,_)=>{let S={x:g.x.minus(h.x),y:g.y.minus(h.y)},k={x:_.x.minus(h.x),y:_.y.minus(h.y)};return _a(k,S).div(oa(k)).div(oa(S))},vi=(h,g,_)=>g.y.isZero()?null:{x:h.x.plus(g.x.div(g.y).times(_.minus(h.y))),y:_},so=(h,g,_)=>g.x.isZero()?null:{x:_,y:h.y.plus(g.y.div(g.x).times(_.minus(h.x)))},Be=(h,g,_,S)=>{if(g.x.isZero())return so(_,S,h.x);if(S.x.isZero())return so(h,g,_.x);if(g.y.isZero())return vi(_,S,h.y);if(S.y.isZero())return vi(h,g,_.y);let k=Ba(g,S);if(k.isZero())return null;let H={x:_.x.minus(h.x),y:_.y.minus(h.y)},te=Ba(H,g).div(k),ae=Ba(H,S).div(k),ye=h.x.plus(ae.times(g.x)),Ee=_.x.plus(te.times(S.x)),nt=h.y.plus(ae.times(g.y)),We=_.y.plus(te.times(S.y)),yt=ye.plus(Ee).div(2),It=nt.plus(We).div(2);return{x:yt,y:It}},Fo=class RE{constructor(g,_){Ze(this,"point");Ze(this,"isLeft");Ze(this,"segment");Ze(this,"otherSE");Ze(this,"consumedBy");g.events===void 0?g.events=[this]:g.events.push(this),this.point=g,this.isLeft=_}static compare(g,_){let S=RE.comparePoints(g.point,_.point);return S!==0?S:(g.point!==_.point&&g.link(_),g.isLeft!==_.isLeft?g.isLeft?1:-1:qs.compare(g.segment,_.segment))}static comparePoints(g,_){return g.x.isLessThan(_.x)?-1:g.x.isGreaterThan(_.x)?1:g.y.isLessThan(_.y)?-1:g.y.isGreaterThan(_.y)?1:0}link(g){if(g.point===this.point)throw new Error("Tried to link already linked events");let _=g.point.events;for(let S=0,k=_.length;S<k;S++){let H=_[S];this.point.events.push(H),H.point=this.point}this.checkForConsuming()}checkForConsuming(){let g=this.point.events.length;for(let _=0;_<g;_++){let S=this.point.events[_];if(S.segment.consumedBy===void 0)for(let k=_+1;k<g;k++){let H=this.point.events[k];H.consumedBy===void 0&&S.otherSE.point.events===H.otherSE.point.events&&S.segment.consume(H.segment)}}}getAvailableLinkedEvents(){let g=[];for(let _=0,S=this.point.events.length;_<S;_++){let k=this.point.events[_];k!==this&&!k.segment.ringOut&&k.segment.isInResult()&&g.push(k)}return g}getLeftmostComparator(g){let _=new Map,S=k=>{let H=k.otherSE;_.set(k,{sine:Od(this.point,g.point,H.point),cosine:Tu(this.point,g.point,H.point)})};return(k,H)=>{_.has(k)||S(k),_.has(H)||S(H);let{sine:te,cosine:ae}=_.get(k),{sine:ye,cosine:Ee}=_.get(H);return te.isGreaterThanOrEqualTo(0)&&ye.isGreaterThanOrEqualTo(0)?ae.isLessThan(Ee)?1:ae.isGreaterThan(Ee)?-1:0:te.isLessThan(0)&&ye.isLessThan(0)?ae.isLessThan(Ee)?-1:ae.isGreaterThan(Ee)?1:0:ye.isLessThan(te)?-1:ye.isGreaterThan(te)?1:0}}},tc=0,qs=class sv{constructor(g,_,S,k){Ze(this,"id");Ze(this,"leftSE");Ze(this,"rightSE");Ze(this,"rings");Ze(this,"windings");Ze(this,"ringOut");Ze(this,"consumedBy");Ze(this,"prev");Ze(this,"_prevInResult");Ze(this,"_beforeState");Ze(this,"_afterState");Ze(this,"_isInResult");this.id=++tc,this.leftSE=g,g.segment=this,g.otherSE=_,this.rightSE=_,_.segment=this,_.otherSE=g,this.rings=S,this.windings=k}static compare(g,_){let S=g.leftSE.point.x,k=_.leftSE.point.x,H=g.rightSE.point.x,te=_.rightSE.point.x;if(te.isLessThan(S))return 1;if(H.isLessThan(k))return-1;let ae=g.leftSE.point.y,ye=_.leftSE.point.y,Ee=g.rightSE.point.y,nt=_.rightSE.point.y;if(S.isLessThan(k)){if(ye.isLessThan(ae)&&ye.isLessThan(Ee))return 1;if(ye.isGreaterThan(ae)&&ye.isGreaterThan(Ee))return-1;let We=g.comparePoint(_.leftSE.point);if(We<0)return 1;if(We>0)return-1;let yt=_.comparePoint(g.rightSE.point);return yt!==0?yt:-1}if(S.isGreaterThan(k)){if(ae.isLessThan(ye)&&ae.isLessThan(nt))return-1;if(ae.isGreaterThan(ye)&&ae.isGreaterThan(nt))return 1;let We=_.comparePoint(g.leftSE.point);if(We!==0)return We;let yt=g.comparePoint(_.rightSE.point);return yt<0?1:yt>0?-1:1}if(ae.isLessThan(ye))return-1;if(ae.isGreaterThan(ye))return 1;if(H.isLessThan(te)){let We=_.comparePoint(g.rightSE.point);if(We!==0)return We}if(H.isGreaterThan(te)){let We=g.comparePoint(_.rightSE.point);if(We<0)return 1;if(We>0)return-1}if(!H.eq(te)){let We=Ee.minus(ae),yt=H.minus(S),It=nt.minus(ye),tn=te.minus(k);if(We.isGreaterThan(yt)&&It.isLessThan(tn))return 1;if(We.isLessThan(yt)&&It.isGreaterThan(tn))return-1}return H.isGreaterThan(te)?1:H.isLessThan(te)||Ee.isLessThan(nt)?-1:Ee.isGreaterThan(nt)?1:g.id<_.id?-1:g.id>_.id?1:0}static fromRing(g,_,S){let k,H,te,ae=Fo.comparePoints(g,_);if(ae<0)k=g,H=_,te=1;else if(ae>0)k=_,H=g,te=-1;else throw new Error(`Tried to create degenerate segment at [${g.x}, ${g.y}]`);let ye=new Fo(k,!0),Ee=new Fo(H,!1);return new sv(ye,Ee,[S],[te])}replaceRightSE(g){this.rightSE=g,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let g=this.leftSE.point.y,_=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:g.isLessThan(_)?g:_},ur:{x:this.rightSE.point.x,y:g.isGreaterThan(_)?g:_}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(g){return g.x.eq(this.leftSE.point.x)&&g.y.eq(this.leftSE.point.y)||g.x.eq(this.rightSE.point.x)&&g.y.eq(this.rightSE.point.y)}comparePoint(g){return ts.orient(this.leftSE.point,g,this.rightSE.point)}getIntersection(g){let _=this.bbox(),S=g.bbox(),k=sh(_,S);if(k===null)return null;let H=this.leftSE.point,te=this.rightSE.point,ae=g.leftSE.point,ye=g.rightSE.point,Ee=Ro(_,ae)&&this.comparePoint(ae)===0,nt=Ro(S,H)&&g.comparePoint(H)===0,We=Ro(_,ye)&&this.comparePoint(ye)===0,yt=Ro(S,te)&&g.comparePoint(te)===0;if(nt&&Ee)return yt&&!We?te:!yt&&We?ye:null;if(nt)return We&&H.x.eq(ye.x)&&H.y.eq(ye.y)?null:H;if(Ee)return yt&&te.x.eq(ae.x)&&te.y.eq(ae.y)?null:ae;if(yt&&We)return null;if(yt)return te;if(We)return ye;let It=Be(H,this.vector(),ae,g.vector());return It===null||!Ro(k,It)?null:ts.snap(It)}split(g){let _=[],S=g.events!==void 0,k=new Fo(g,!0),H=new Fo(g,!1),te=this.rightSE;this.replaceRightSE(H),_.push(H),_.push(k);let ae=new sv(k,te,this.rings.slice(),this.windings.slice());return Fo.comparePoints(ae.leftSE.point,ae.rightSE.point)>0&&ae.swapEvents(),Fo.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),S&&(k.checkForConsuming(),H.checkForConsuming()),_}swapEvents(){let g=this.rightSE;this.rightSE=this.leftSE,this.leftSE=g,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let _=0,S=this.windings.length;_<S;_++)this.windings[_]*=-1}consume(g){let _=this,S=g;for(;_.consumedBy;)_=_.consumedBy;for(;S.consumedBy;)S=S.consumedBy;let k=sv.compare(_,S);if(k!==0){if(k>0){let H=_;_=S,S=H}if(_.prev===S){let H=_;_=S,S=H}for(let H=0,te=S.rings.length;H<te;H++){let ae=S.rings[H],ye=S.windings[H],Ee=_.rings.indexOf(ae);Ee===-1?(_.rings.push(ae),_.windings.push(ye)):_.windings[Ee]+=ye}S.rings=null,S.windings=null,S.consumedBy=_,S.leftSE.consumedBy=_.leftSE,S.rightSE.consumedBy=_.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let g=this.prev.consumedBy||this.prev;this._beforeState=g.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let g=this.beforeState();this._afterState={rings:g.rings.slice(0),windings:g.windings.slice(0),multiPolys:[]};let _=this._afterState.rings,S=this._afterState.windings,k=this._afterState.multiPolys;for(let ae=0,ye=this.rings.length;ae<ye;ae++){let Ee=this.rings[ae],nt=this.windings[ae],We=_.indexOf(Ee);We===-1?(_.push(Ee),S.push(nt)):S[We]+=nt}let H=[],te=[];for(let ae=0,ye=_.length;ae<ye;ae++){if(S[ae]===0)continue;let Ee=_[ae],nt=Ee.poly;if(te.indexOf(nt)===-1)if(Ee.isExterior)H.push(nt);else{te.indexOf(nt)===-1&&te.push(nt);let We=H.indexOf(Ee.poly);We!==-1&&H.splice(We,1)}}for(let ae=0,ye=H.length;ae<ye;ae++){let Ee=H[ae].multiPoly;k.indexOf(Ee)===-1&&k.push(Ee)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let g=this.beforeState().multiPolys,_=this.afterState().multiPolys;switch(Hh.type){case"union":{let S=g.length===0,k=_.length===0;this._isInResult=S!==k;break}case"intersection":{let S,k;g.length<_.length?(S=g.length,k=_.length):(S=_.length,k=g.length),this._isInResult=k===Hh.numMultiPolys&&S<k;break}case"xor":{let S=Math.abs(g.length-_.length);this._isInResult=S%2===1;break}case"difference":{let S=k=>k.length===1&&k[0].isSubject;this._isInResult=S(g)!==S(_);break}}return this._isInResult}},Hr=class{constructor(h,g,_){Ze(this,"poly");Ze(this,"isExterior");Ze(this,"segments");Ze(this,"bbox");if(!Array.isArray(h)||h.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=g,this.isExterior=_,this.segments=[],typeof h[0][0]!="number"||typeof h[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let S=ts.snap({x:new Pe(h[0][0]),y:new Pe(h[0][1])});this.bbox={ll:{x:S.x,y:S.y},ur:{x:S.x,y:S.y}};let k=S;for(let H=1,te=h.length;H<te;H++){if(typeof h[H][0]!="number"||typeof h[H][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let ae=ts.snap({x:new Pe(h[H][0]),y:new Pe(h[H][1])});ae.x.eq(k.x)&&ae.y.eq(k.y)||(this.segments.push(qs.fromRing(k,ae,this)),ae.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=ae.x),ae.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=ae.y),ae.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=ae.x),ae.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=ae.y),k=ae)}(!S.x.eq(k.x)||!S.y.eq(k.y))&&this.segments.push(qs.fromRing(k,S,this))}getSweepEvents(){let h=[];for(let g=0,_=this.segments.length;g<_;g++){let S=this.segments[g];h.push(S.leftSE),h.push(S.rightSE)}return h}},Vh=class{constructor(h,g){Ze(this,"multiPoly");Ze(this,"exteriorRing");Ze(this,"interiorRings");Ze(this,"bbox");if(!Array.isArray(h))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Hr(h[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let _=1,S=h.length;_<S;_++){let k=new Hr(h[_],this,!1);k.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=k.bbox.ll.x),k.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=k.bbox.ll.y),k.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=k.bbox.ur.x),k.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=k.bbox.ur.y),this.interiorRings.push(k)}this.multiPoly=g}getSweepEvents(){let h=this.exteriorRing.getSweepEvents();for(let g=0,_=this.interiorRings.length;g<_;g++){let S=this.interiorRings[g].getSweepEvents();for(let k=0,H=S.length;k<H;k++)h.push(S[k])}return h}},Af=class{constructor(h,g){Ze(this,"isSubject");Ze(this,"polys");Ze(this,"bbox");if(!Array.isArray(h))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof h[0][0][0]=="number"&&(h=[h])}catch{}this.polys=[],this.bbox={ll:{x:new Pe(Number.POSITIVE_INFINITY),y:new Pe(Number.POSITIVE_INFINITY)},ur:{x:new Pe(Number.NEGATIVE_INFINITY),y:new Pe(Number.NEGATIVE_INFINITY)}};for(let _=0,S=h.length;_<S;_++){let k=new Vh(h[_],this);k.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=k.bbox.ll.x),k.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=k.bbox.ll.y),k.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=k.bbox.ur.x),k.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=k.bbox.ur.y),this.polys.push(k)}this.isSubject=g}getSweepEvents(){let h=[];for(let g=0,_=this.polys.length;g<_;g++){let S=this.polys[g].getSweepEvents();for(let k=0,H=S.length;k<H;k++)h.push(S[k])}return h}},Uh=class Sb{constructor(g){Ze(this,"events");Ze(this,"poly");Ze(this,"_isExteriorRing");Ze(this,"_enclosingRing");this.events=g;for(let _=0,S=g.length;_<S;_++)g[_].segment.ringOut=this;this.poly=null}static factory(g){let _=[];for(let S=0,k=g.length;S<k;S++){let H=g[S];if(!H.isInResult()||H.ringOut)continue;let te=null,ae=H.leftSE,ye=H.rightSE,Ee=[ae],nt=ae.point,We=[];for(;te=ae,ae=ye,Ee.push(ae),ae.point!==nt;)for(;;){let yt=ae.getAvailableLinkedEvents();if(yt.length===0){let xn=Ee[0].point,Sn=Ee[Ee.length-1].point;throw new Error(`Unable to complete output ring starting at [${xn.x}, ${xn.y}]. Last matching segment found ends at [${Sn.x}, ${Sn.y}].`)}if(yt.length===1){ye=yt[0].otherSE;break}let It=null;for(let xn=0,Sn=We.length;xn<Sn;xn++)if(We[xn].point===ae.point){It=xn;break}if(It!==null){let xn=We.splice(It)[0],Sn=Ee.splice(xn.index);Sn.unshift(Sn[0].otherSE),_.push(new Sb(Sn.reverse()));continue}We.push({index:Ee.length,point:ae.point});let tn=ae.getLeftmostComparator(te);ye=yt.sort(tn)[0].otherSE;break}_.push(new Sb(Ee))}return _}getGeom(){let g=this.events[0].point,_=[g];for(let Ee=1,nt=this.events.length-1;Ee<nt;Ee++){let We=this.events[Ee].point,yt=this.events[Ee+1].point;ts.orient(We,g,yt)!==0&&(_.push(We),g=We)}if(_.length===1)return null;let S=_[0],k=_[1];ts.orient(S,g,k)===0&&_.shift(),_.push(_[0]);let H=this.isExteriorRing()?1:-1,te=this.isExteriorRing()?0:_.length-1,ae=this.isExteriorRing()?_.length:-1,ye=[];for(let Ee=te;Ee!=ae;Ee+=H)ye.push([_[Ee].x.toNumber(),_[Ee].y.toNumber()]);return ye}isExteriorRing(){if(this._isExteriorRing===void 0){let g=this.enclosingRing();this._isExteriorRing=g?!g.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var k,H;let g=this.events[0];for(let te=1,ae=this.events.length;te<ae;te++){let ye=this.events[te];Fo.compare(g,ye)>0&&(g=ye)}let _=g.segment.prevInResult(),S=_?_.prevInResult():null;for(;;){if(!_)return null;if(!S)return _.ringOut;if(S.ringOut!==_.ringOut)return((k=S.ringOut)==null?void 0:k.enclosingRing())!==_.ringOut?_.ringOut:(H=_.ringOut)==null?void 0:H.enclosingRing();_=S.prevInResult(),S=_?_.prevInResult():null}}},yl=class{constructor(h){Ze(this,"exteriorRing");Ze(this,"interiorRings");this.exteriorRing=h,h.poly=this,this.interiorRings=[]}addInterior(h){this.interiorRings.push(h),h.poly=this}getGeom(){let h=this.exteriorRing.getGeom();if(h===null)return null;let g=[h];for(let _=0,S=this.interiorRings.length;_<S;_++){let k=this.interiorRings[_].getGeom();k!==null&&g.push(k)}return g}},oh=class{constructor(h){Ze(this,"rings");Ze(this,"polys");this.rings=h,this.polys=this._composePolys(h)}getGeom(){let h=[];for(let g=0,_=this.polys.length;g<_;g++){let S=this.polys[g].getGeom();S!==null&&h.push(S)}return h}_composePolys(h){var _;let g=[];for(let S=0,k=h.length;S<k;S++){let H=h[S];if(!H.poly)if(H.isExteriorRing())g.push(new yl(H));else{let te=H.enclosingRing();te!=null&&te.poly||g.push(new yl(te)),(_=te==null?void 0:te.poly)==null||_.addInterior(H)}}return g}},Nd=class{constructor(h,g=qs.compare){Ze(this,"queue");Ze(this,"tree");Ze(this,"segments");this.queue=h,this.tree=new hn(g),this.segments=[]}process(h){let g=h.segment,_=[];if(h.consumedBy)return h.isLeft?this.queue.delete(h.otherSE):this.tree.delete(g),_;h.isLeft&&this.tree.add(g);let S=g,k=g;do S=this.tree.lastBefore(S);while(S!=null&&S.consumedBy!=null);do k=this.tree.firstAfter(k);while(k!=null&&k.consumedBy!=null);if(h.isLeft){let H=null;if(S){let ae=S.getIntersection(g);if(ae!==null&&(g.isAnEndpoint(ae)||(H=ae),!S.isAnEndpoint(ae))){let ye=this._splitSafely(S,ae);for(let Ee=0,nt=ye.length;Ee<nt;Ee++)_.push(ye[Ee])}}let te=null;if(k){let ae=k.getIntersection(g);if(ae!==null&&(g.isAnEndpoint(ae)||(te=ae),!k.isAnEndpoint(ae))){let ye=this._splitSafely(k,ae);for(let Ee=0,nt=ye.length;Ee<nt;Ee++)_.push(ye[Ee])}}if(H!==null||te!==null){let ae=null;H===null?ae=te:te===null?ae=H:ae=Fo.comparePoints(H,te)<=0?H:te,this.queue.delete(g.rightSE),_.push(g.rightSE);let ye=g.split(ae);for(let Ee=0,nt=ye.length;Ee<nt;Ee++)_.push(ye[Ee])}_.length>0?(this.tree.delete(g),_.push(h)):(this.segments.push(g),g.prev=S)}else{if(S&&k){let H=S.getIntersection(k);if(H!==null){if(!S.isAnEndpoint(H)){let te=this._splitSafely(S,H);for(let ae=0,ye=te.length;ae<ye;ae++)_.push(te[ae])}if(!k.isAnEndpoint(H)){let te=this._splitSafely(k,H);for(let ae=0,ye=te.length;ae<ye;ae++)_.push(te[ae])}}}this.tree.delete(g)}return _}_splitSafely(h,g){this.tree.delete(h);let _=h.rightSE;this.queue.delete(_);let S=h.split(g);return S.push(_),h.consumedBy===void 0&&this.tree.add(h),S}},Up=class{constructor(){Ze(this,"type");Ze(this,"numMultiPolys")}run(h,g,_){Tc.type=h;let S=[new Af(g,!0)];for(let ye=0,Ee=_.length;ye<Ee;ye++)S.push(new Af(_[ye],!1));if(Tc.numMultiPolys=S.length,Tc.type==="difference"){let ye=S[0],Ee=1;for(;Ee<S.length;)sh(S[Ee].bbox,ye.bbox)!==null?Ee++:S.splice(Ee,1)}if(Tc.type==="intersection")for(let ye=0,Ee=S.length;ye<Ee;ye++){let nt=S[ye];for(let We=ye+1,yt=S.length;We<yt;We++)if(sh(nt.bbox,S[We].bbox)===null)return[]}let k=new hn(Fo.compare);for(let ye=0,Ee=S.length;ye<Ee;ye++){let nt=S[ye].getSweepEvents();for(let We=0,yt=nt.length;We<yt;We++)k.add(nt[We])}let H=new Nd(k),te=null;for(k.size!=0&&(te=k.first(),k.delete(te));te;){let ye=H.process(te);for(let Ee=0,nt=ye.length;Ee<nt;Ee++){let We=ye[Ee];We.consumedBy===void 0&&k.add(We)}k.size!=0?(te=k.first(),k.delete(te)):te=null}ts.reset();let ae=Uh.factory(H.segments);return new oh(ae).getGeom()}},Tc=new Up,Hh=Tc,fu=(h,...g)=>Hh.run("intersection",h,g),Hp=(h,...g)=>Hh.run("difference",h,g);ts.set;function Wh(h){let g={type:"Feature"};return g.geometry=h,g}function Gh(h){return h.type==="Feature"?h.geometry:h}function Tf(h){return h&&h.geometry&&h.geometry.coordinates?h.geometry.coordinates:h}function Df(h){return Wh({type:"LineString",coordinates:h})}function Xa(h){return Wh({type:"MultiLineString",coordinates:h})}function Of(h){return Wh({type:"Polygon",coordinates:h})}function Nf(h){return Wh({type:"MultiPolygon",coordinates:h})}function If(h,g){let _=Gh(h),S=Gh(g),k=fu(_.coordinates,S.coordinates);return k.length===0?null:k.length===1?Of(k[0]):Nf(k)}function w(h,g){let _=Gh(h),S=Gh(g),k=Hp(_.coordinates,S.coordinates);return k.length===0?null:k.length===1?Of(k[0]):Nf(k)}function T(h){return Array.isArray(h)?1+T(h[0]):-1}function Y(h){h instanceof L.Polyline&&(h=h.toGeoJSON(15));let g=Tf(h),_=T(g),S=[];return _>1?g.forEach(k=>{S.push(Df(k))}):S.push(h),S}function ue(h){let g=[];return h.eachLayer(_=>{g.push(Tf(_.toGeoJSON(15)))}),Xa(g)}bs.Cut=bs.Polygon.extend({initialize(h){this._map=h,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=2)return;let g=L.polygon(h,this.options.pathOptions);g._latlngInfos=this._layer._latlngInfo,this.cut(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:S,originalLayer:k})=>{this._fireCut(k,S,k),this._fireCut(this._map,S,k),k.pm._fireEdit()}),this._editedLayers=[];let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},cut(h){let g=this._map._layers,_=h._latlngInfos||[];Object.keys(g).map(S=>g[S]).filter(S=>S.pm).filter(S=>!S._pmTempLayer).filter(S=>!L.PM.optIn&&!S.options.pmIgnore||L.PM.optIn&&S.options.pmIgnore===!1).filter(S=>S instanceof L.Polyline).filter(S=>S!==h).filter(S=>S.pm.options.allowCutting).filter(S=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(S)>-1:!0).filter(S=>!this._layerGroup.hasLayer(S)).filter(S=>{try{let k=!!No(h.toGeoJSON(15),S.toGeoJSON(15)).features.length>0;return k||S instanceof L.Polyline&&!(S instanceof L.Polygon)?k:!!If(h.toGeoJSON(15),S.toGeoJSON(15))}catch{return S instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(S=>{let k;if(S instanceof L.Polygon){k=L.polygon(S.getLatLngs());let ye=k.getLatLngs();_.forEach(Ee=>{if(Ee&&Ee.snapInfo){let{latlng:nt}=Ee,We=this._calcClosestLayer(nt,[k]);if(We&&We.segment&&We.distance<this.options.snapDistance){let{segment:yt}=We;if(yt&&yt.length===2){let{indexPath:It,parentPath:tn,newIndex:xn}=L.PM.Utils._getIndexFromSegment(ye,yt);(It.length>1?(0,Gi.default)(ye,tn):ye).splice(xn,0,nt)}}}})}else k=S;let H=this._cutLayer(h,k),te=L.geoJSON(H,S.options);te.getLayers().length===1&&([te]=te.getLayers()),this._setPane(te,"layerPane");let ae=te.addTo(this._map.pm._getContainingLayer());if(ae.pm.enable(S.pm.options),ae.pm.disable(),S._pmTempLayer=!0,h._pmTempLayer=!0,S.remove(),S.removeFrom(this._map.pm._getContainingLayer()),h.remove(),h.removeFrom(this._map.pm._getContainingLayer()),ae.getLayers&&ae.getLayers().length===0&&this._map.pm.removeLayer({target:ae}),ae instanceof L.LayerGroup?(ae.eachLayer(ye=>{this._addDrawnLayerProp(ye)}),this._addDrawnLayerProp(ae)):this._addDrawnLayerProp(ae),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let ye=this.options.layersToCut.indexOf(S);ye>-1&&this.options.layersToCut.splice(ye,1)}this._editedLayers.push({layer:ae,originalLayer:S})})},_cutLayer(h,g){let _=L.geoJSON(),S;if(g instanceof L.Polygon)S=w(g.toGeoJSON(15),h.toGeoJSON(15));else{let k=Y(g);k.forEach(H=>{let te=Jn(H,h.toGeoJSON(15)),ae;te&&te.features.length>0?ae=L.geoJSON(te):ae=L.geoJSON(H),ae.getLayers().forEach(ye=>{Ta(h.toGeoJSON(15),ye.toGeoJSON(15))||ye.addTo(_)})}),k.length>1?S=ue(_):S=_.toGeoJSON(15)}return S},_change:L.Util.falseFn}),bs.Text=bs.extend({initialize(h){this._map=h,this._shape="Text",this.toolbarButtonName="drawText"},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(cr("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var h;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(h=this._hintMarker)==null||h.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let g=h;g.target=this._hintMarker,this._handleSnapping(g)}},_createMarker(h){var k,H,te,ae;if(!h.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(k=this.options.textOptions)==null?void 0:k.className){let ye=this.options.textOptions.className.split(" ");this.textArea.classList.add(...ye)}let _=this._createTextIcon(this.textArea),S=new L.Marker(g,{textMarker:!0,_textMarkerOverPM:!0,icon:_});if(this._setPane(S,"markerPane"),this._finishLayer(S),S.pm||(S.options.draggable=!1),S.addTo(this._map.pm._getContainingLayer()),S.pm){S.pm.textArea=this.textArea,L.setOptions(S.pm,{removeIfEmpty:((H=this.options.textOptions)==null?void 0:H.removeIfEmpty)??!0});let ye=((te=this.options.textOptions)==null?void 0:te.focusAfterDraw)??!0;S.pm._createTextMarker(ye),(ae=this.options.textOptions)!=null&&ae.text&&S.pm.setText(this.options.textOptions.text)}this._fireCreate(S),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(h){this.enable(),this._hintMarker.setLatLng(h.latlng)},_createTextArea(){let h=document.createElement("textarea");return h.readOnly=!0,h.classList.add("pm-textarea","pm-disabled"),h},_createTextIcon(h){return L.divIcon({className:"pm-text-marker",html:h})}});var xe={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,xi(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let h=this._getDOMElem();h&&(xi(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(h)):L.DomEvent.on(h,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,xi(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let h=this._getDOMElem();h&&(xi(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(h)):L.DomEvent.off(h,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(h){let g=h.touches?h.touches[0]:h,_={originalEvent:g,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(g),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseDown(_),!1},_simulateMouseMoveEvent(h){let g=h.touches?h.touches[0]:h,_={originalEvent:g,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(g),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseMove(_),!1},_simulateMouseUpEvent(h){let g={originalEvent:h.touches?h.touches[0]:h,target:this._layer};return h.type.indexOf("touch")===-1&&(g.containerPoint=this._map.mouseEventToContainerPoint(h),g.latlng=this._map.containerPointToLatLng(g.containerPoint)),this._dragMixinOnMouseUp(g),!1},_dragMixinOnMouseDown(h){if(h.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(h);let g=h._fromLayerSync,_=this._syncLayers("_dragMixinOnMouseDown",h);if(this._layer instanceof L.Marker&&(this.options.snappable&&!g&&!_?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let S="resizeableCircleMarker";this._layer instanceof L.Circle&&(S="resizeableCircle"),this.options.snappable&&!g&&!_?this._layer.pm.options[S]||this._initSnappableMarkersDrag():this._layer.pm.options[S]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=h.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(h){this._overwriteEventIfItComesFromMarker(h);let g=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",h),this._dragging||(this._dragging=!0,L.DomUtil.addClass(g,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=h.latlng),this._onLayerDrag(h),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(h){let g=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",h),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,g&&L.DomUtil.removeClass(g,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(h){let{latlng:g}=h,_={lat:g.lat-this._tempDragCoord.lat,lng:g.lng-this._tempDragCoord.lng},S=k=>k.map(H=>{if(Array.isArray(H))return S(H);let te={lat:H.lat+_.lat,lng:H.lng+_.lng};return(H.alt||H.alt===0)&&(te.alt=H.alt),te});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let k=S([this._layer.getLatLng()]);this._layer.setLatLng(k[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let k=this._layer.getLatLng();this._layer._snapped&&(k=this._layer._orgLatLng);let H=S([k]);this._layer.setLatLng(H[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let k=S([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(k),this._fireChange(this._layer.getBounds(),"Edit")}else{let k=S(this._layer.getLatLngs());this._layer.setLatLngs(k),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=g,h.layer=this._layer,this._fireDrag(h)},addDraggingClass(){let h=this._getDOMElem();h&&L.DomUtil.addClass(h,"leaflet-pm-draggable")},removeDraggingClass(){let h=this._getDOMElem();h&&L.DomUtil.removeClass(h,"leaflet-pm-draggable")},_getDOMElem(){let h=null;return this._layer._path?h=this._layer._path:this._layer._renderer&&this._layer._renderer._container?h=this._layer._renderer._container:this._layer._image?h=this._layer._image:this._layer._icon&&(h=this._layer._icon),h},_overwriteEventIfItComesFromMarker(h){h.target.getLatLng&&(!h.target._radius||h.target._radius<=10)&&(h.containerPoint=this._map.mouseEventToContainerPoint(h.originalEvent),h.latlng=this._map.containerPointToLatLng(h.containerPoint))},_syncLayers(h,g){if(this.enabled())return!1;if(!g._fromLayerSync&&this._layer===g.target&&this.options.syncLayersOnDrag){g._fromLayerSync=!0;let _=[];if(L.Util.isArray(this.options.syncLayersOnDrag))_=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(S=>{S instanceof L.LayerGroup&&(_=_.concat(S.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let S in this._parentLayerGroup){let k=this._parentLayerGroup[S];k.pm&&(_=k.pm.getLayers(!0))}return L.Util.isArray(_)&&_.length>0&&(_=_.filter(S=>!!S.pm).filter(S=>!!S.pm.options.draggable),_.forEach(S=>{S!==this._layer&&S.pm[h]&&(S._snapped=!1,S.pm[h](g))})),_.length>0}return!1},_stopDOMImageDrag(h){return h.preventDefault(),!1}},Me=xe,Ae=l(On());function Ne(h,g,_,S){return _.unproject(g.transform(_.project(h,S)),S)}function Fe(h,g,_){let S=_.getMaxZoom();if(S===1/0&&(S=_.getZoom()),L.Util.isArray(h)){let k=[];return h.forEach(H=>{k.push(Fe(H,g,_))}),k}return h instanceof L.LatLng?Ne(h,g,_,S):null}function Ke(h,g){g instanceof L.Layer&&(g=g.getLatLng());let _=h.getMaxZoom();return _===1/0&&(_=h.getZoom()),h.project(g,_)}function pt(h,g){let _=h.getMaxZoom();return _===1/0&&(_=h.getZoom()),h.unproject(g,_)}var Rt={_onRotateStart(h){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Ke(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Ke(this._map,h.target.getLatLng()),this._initialRotateLatLng=ia(this._layer),this._startAngle=this.getAngle();let g=ia(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,g),this._fireRotationStart(this._map,g)},_onRotate(h){let g=Ke(this._map,h.target.getLatLng()),_=this._rotationStartPoint,S=this._rotationOriginPoint,k=Math.atan2(g.y-S.y,g.x-S.x)-Math.atan2(_.y-S.y,_.x-S.x);this._layer.setLatLngs(this._rotateLayer(k,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let H=this;function te(nt,We=[],yt=-1){if(yt>-1&&We.push(yt),L.Util.isArray(nt[0]))nt.forEach((It,tn)=>te(It,We.slice(),tn));else{let It=We.length>0?(0,Ae.default)(H._markers,We):H._markers[0];nt.forEach((tn,xn)=>{It[xn].setLatLng(tn)})}}te(this._layer.getLatLngs());let ae=ia(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(k,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let ye=k*180/Math.PI;ye=ye<0?ye+360:ye;let Ee=ye+this._startAngle;this._setAngle(Ee),this._rotationLayer.pm._setAngle(Ee),this._fireRotation(this._rotationLayer,ye,ae),this._fireRotation(this._map,ye,ae),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let h=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let g=ia(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=ia(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,h,g),this._fireRotationEnd(this._map,h,g),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(h,g,_,S,k){let H=Ke(k,_);return this._matrix=S.clone().rotate(h,H).flip(),Fe(g,this._matrix,k)},_setAngle(h){h=h<0?h+360:h,this._angle=h%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let h=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),g=h.getCenter();return h.removeFrom(this._layer._map),g},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Pa(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let h={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),h),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=ia(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(h){let g=this.getAngle(),_=this._layer.getLatLngs(),S=h*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(S,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+h),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(S,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let k=this.getAngle()-g;k=k<0?k+360:k,this._startAngle=g,this._fireRotation(this._layer,k,_,this._layer),this._fireRotation(this._map||this._layer._map,k,_,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(h){let g=h-this.getAngle();this.rotateLayer(g)},getAngle(){return this._angle||0},setInitAngle(h){this._setAngle(h)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(h){this._rotationCenter=h,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(h)}},Ft=Rt,Et=L.Class.extend({includes:[Me,Ko,Ft,au],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(h){L.Util.setOptions(this,h)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(h,g){g==="layerPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":g==="vertexPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":g==="markerPane"&&(h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(h,g){let _=g.target,S={layer:this._layer,marker:_,event:g},k="";return h==="move"?k="moveVertexValidation":h==="add"?k="addVertexValidation":h==="remove"&&(k="removeVertexValidation"),this.options[k]&&typeof this.options[k]=="function"&&!this.options[k](S)?(h==="move"&&(_._cancelDragEventChain=_.getLatLng()),!1):(_._cancelDragEventChain=null,!0)},_vertexValidationDrag(h){return h._cancelDragEventChain?(h._latlng=h._cancelDragEventChain,h.update(),!1):!0},_vertexValidationDragEnd(h){return h._cancelDragEventChain?(h._cancelDragEventChain=null,!1):!0}}),Zt=Et;Zt.LayerGroup=L.Class.extend({initialize(h){this._layerGroup=h,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(S=>this._initLayer(S));let g=S=>{if(S.layer._pmTempLayer)return;this._layers=this.getLayers();let k=this._layers.filter(H=>!H.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in H.pm._parentLayerGroup));k.forEach(H=>{this._initLayer(H)}),k.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(g,100,this),this),this._layerGroup.on("layerremove",S=>{this._removeLayerFromGroup(S.target)},this);let _=S=>{S.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(_,100,this),this)},enable(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this._options=h,this._layers.forEach(_=>{_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.enable(h,g)):_.pm.enable(h)})},disable(h=[]){h.length===0&&(this._layers=this.getLayers()),this._layers.forEach(g=>{g instanceof L.LayerGroup?h.indexOf(g._leaflet_id)===-1&&(h.push(g._leaflet_id),g.pm.disable(h)):g.pm.disable()})},enabled(h=[]){return h.length===0&&(this._layers=this.getLayers()),!!this._layers.find(g=>g instanceof L.LayerGroup?h.indexOf(g._leaflet_id)===-1?(h.push(g._leaflet_id),g.pm.enabled(h)):!1:g.pm.enabled())},toggleEdit(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this._options=h,this._layers.forEach(_=>{_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.toggleEdit(h,g)):_.pm.toggleEdit(h)})},_initLayer(h){let g=L.Util.stamp(this._layerGroup);h.pm._parentLayerGroup||(h.pm._parentLayerGroup={}),h.pm._parentLayerGroup[g]=this._layerGroup},_removeLayerFromGroup(h){if(h.pm&&h.pm._layerGroup){let g=L.Util.stamp(this._layerGroup);delete h.pm._layerGroup[g]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(h=>h.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var h;return this._map||((h=this._layers.find(g=>!!g._map))==null?void 0:h._map)||null},getLayers(h=!1,g=!0,_=!0,S=[]){let k=[];return h?this._layerGroup.getLayers().forEach(H=>{k.push(H),H instanceof L.LayerGroup&&S.indexOf(H._leaflet_id)===-1&&(S.push(H._leaflet_id),k=k.concat(H.pm.getLayers(!0,!0,!0,S)))}):k=this._layerGroup.getLayers(),_&&(k=k.filter(H=>!(H instanceof L.LayerGroup))),g&&(k=k.filter(H=>!!H.pm),k=k.filter(H=>!H._pmTempLayer),k=k.filter(H=>!L.PM.optIn&&!H.options.pmIgnore||L.PM.optIn&&H.options.pmIgnore===!1)),k},setOptions(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this.options=h,this._layers.forEach(_=>{_.pm&&(_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.setOptions(h,g)):_.pm.setOptions(h))})}}),Zt.Marker=Zt.extend({_shape:"Marker",initialize(h){this._layer=h,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(h={draggable:!0}){if(L.Util.setOptions(this,h),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(h){let g=h.target;g.remove(),this._fireRemove(g),this._fireRemove(this._map,g)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)}});var Yt=l(On()),gt={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let h=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=h.filter((g,_,S)=>S.indexOf(g)===_)},_removeFromCache(h){let g=this.markerCache.indexOf(h);g>-1&&this.markerCache.splice(g,1)},renderLimits(h){this.markerCache.forEach(g=>{h.includes(g)?this._markerGroup.addLayer(g):this._markerGroup.removeLayer(g)})},applyLimitFilters({latlng:h={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let g=[...this._filterClosestMarkers(h)];this.renderLimits(g)},_filterClosestMarkers(h){let g=[...this.markerCache],_=this.options.limitMarkersToCount;return _===-1?g:(g.sort((S,k)=>{let H=S._latlng.distanceTo(h),te=k._latlng.distanceTo(h);return H-te}),g.filter((S,k)=>_>-1?k<_:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(h){this._preventRenderMarkers=!!h}},bt=gt;Zt.Line=Zt.extend({includes:[bt],_shape:"Line",initialize(h){this._layer=h,this._enabled=!1},enable(h){if(L.Util.setOptions(this,h),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let h=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(h,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(h){return this.enabled()?this.disable():this.enable(h),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let h=this._map,g=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(h),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let _=S=>{if(Array.isArray(S[0]))return S.map(_,this);let k=S.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&S.map((H,te)=>{let ae=this.isPolygon()?(te+1)%S.length:te+1;return this._createMiddleMarker(k[te],k[ae])}),k};this._markers=_(g),this.filterMarkerGroup(),h.addLayer(this._markerGroup)},_createMarker(h){let g=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this.options.rotate?(g.on("dragstart",this._onRotateStart,this),g.on("drag",this._onRotate,this),g.on("dragend",this._onRotateEnd,this)):(g.on("click",this._onVertexClick,this),g.on("dragstart",this._onMarkerDragStart,this),g.on("move",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||g.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(g),g},_createMiddleMarker(h,g){if(!h||!g)return!1;let _=L.PM.Utils.calcMiddleLatLng(this._map,h.getLatLng(),g.getLatLng()),S=this._createMarker(_),k=L.divIcon({className:"marker-icon marker-icon-middle"});return S.setIcon(k),S.leftM=h,S.rightM=g,h._middleMarkerNext=S,g._middleMarkerPrev=S,S.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),S.on("movestart",this._onMiddleMarkerMoveStart,this),S},_onMiddleMarkerClick(h){let g=h.target;if(!this._vertexValidation("add",h))return;let _=L.divIcon({className:"marker-icon"});g.setIcon(_),this._addMarker(g,g.leftM,g.rightM)},_onMiddleMarkerMoveStart(h){let g=h.target;if(g.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",h)){g.on("move",this._onMiddleMarkerMovePrevent,this);return}g._dragging=!0,this._addMarker(g,g.leftM,g.rightM)},_onMiddleMarkerMovePrevent(h){let g=h.target;this._vertexValidationDrag(g)},_onMiddleMarkerMoveEnd(h){let g=h.target;if(g.off("move",this._onMiddleMarkerMovePrevent,this),g.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(g))return;let _=L.divIcon({className:"marker-icon"});g.setIcon(_),setTimeout(()=>{delete g._dragging},100)},_addMarker(h,g,_){h.off("movestart",this._onMiddleMarkerMoveStart,this),h.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let S=h.getLatLng(),k=this._layer._latlngs;delete h.leftM,delete h.rightM;let{indexPath:H,index:te,parentPath:ae}=L.PM.Utils.findDeepMarkerIndex(this._markers,g),ye=H.length>1?(0,Yt.default)(k,ae):k,Ee=H.length>1?(0,Yt.default)(this._markers,ae):this._markers;ye.splice(te+1,0,S),Ee.splice(te+1,0,h),this._layer.setLatLngs(k),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(g,h),this._createMiddleMarker(h,_)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(h,L.PM.Utils.findDeepMarkerIndex(this._markers,h).indexPath,S),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Vr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(h){let g=this._layer,_,S;if(this.options.allowSelfIntersection?_=!1:(S=Vr(this._layer.toGeoJSON(15)),_=S.features.length>0),_){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return _;h?this._flashLayer():(g.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(S)}else g.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return _},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(h,g){h.forEach(_=>{Array.isArray(_)?this._updateDisabledMarkerStyle(_,g):_._icon&&(g&&!this._checkMarkerAllowedToDrag(_)?L.DomUtil.addClass(_._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(_._icon,"vertexmarker-disabled"))})},_removeMarker(h){let g=h.target;if(!this._vertexValidation("remove",h))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=ia(this._layer,this._layer.getLatLngs()));let _=this._layer.getLatLngs(),{indexPath:S,index:k,parentPath:H}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);if(!S)return;let te=S.length>1?(0,Yt.default)(_,H):_,ae=S.length>1?(0,Yt.default)(this._markers,H):this._markers,ye=H[H.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!ye&&(te.length<=2||this.isPolygon()&&te.length<=3)){this._flashLayer();return}te.splice(k,1),this._layer.setLatLngs(_),this.isPolygon()&&te.length<=2&&te.splice(0,te.length);let Ee=!1;if(te.length<=1&&(te.splice(0,te.length),H.length>1&&S.length>1&&(_=Ol(_)),this._layer.setLatLngs(_),this._initMarkers(),Ee=!0),ys(_)||this._layer.remove(),_=Ol(_),this._layer.setLatLngs(_),this._markers=Ol(this._markers),!Ee&&(ae=S.length>1?(0,Yt.default)(this._markers,H):this._markers,g._middleMarkerPrev&&(this._markerGroup.removeLayer(g._middleMarkerPrev),this._removeFromCache(g._middleMarkerPrev)),g._middleMarkerNext&&(this._markerGroup.removeLayer(g._middleMarkerNext),this._removeFromCache(g._middleMarkerNext)),this._markerGroup.removeLayer(g),this._removeFromCache(g),ae)){let nt,We;if(this.isPolygon()?(nt=(k+1)%ae.length,We=(k+(ae.length-1))%ae.length):(We=k-1<0?void 0:k-1,nt=k+1>=ae.length?void 0:k+1),nt!==We){let yt=ae[We],It=ae[nt];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(yt,It)}ae.splice(k,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(g,S),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(h){let g=this._layer.getLatLngs(),_=h.getLatLng(),{indexPath:S,index:k,parentPath:H}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);(S.length>1?(0,Yt.default)(g,H):g).splice(k,1,_),this._layer.setLatLngs(g)},_getNeighborMarkers(h){let{indexPath:g,index:_,parentPath:S}=L.PM.Utils.findDeepMarkerIndex(this._markers,h),k=g.length>1?(0,Yt.default)(this._markers,S):this._markers,H=(_+1)%k.length,te=(_+(k.length-1))%k.length,ae=k[te],ye=k[H];return{prevMarker:ae,nextMarker:ye}},_checkMarkerAllowedToDrag(h){let{prevMarker:g,nextMarker:_}=this._getNeighborMarkers(h),S=L.polyline([g.getLatLng(),h.getLatLng()]),k=L.polyline([h.getLatLng(),_.getLatLng()]),H=No(this._layer.toGeoJSON(15),S.toGeoJSON(15)).features.length,te=No(this._layer.toGeoJSON(15),k.toGeoJSON(15)).features.length;return h.getLatLng()===this._markers[0][0].getLatLng()?te+=1:h.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(H+=1),!(H<=2&&te<=2)},_onMarkerDragStart(h){let g=h.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",h))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragStart(h,_),this.options.allowSelfIntersection||(this._coordsBeforeEdit=ia(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(g):this._markerAllowedToDrag=null},_onMarkerDrag(h){let g=h.target;if(!this._vertexValidationDrag(g))return;let{indexPath:_,index:S,parentPath:k}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);if(!_)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(g);let H=_.length>1?(0,Yt.default)(this._markers,k):this._markers,te=(S+1)%H.length,ae=(S+(H.length-1))%H.length,ye=g.getLatLng(),Ee=H[ae].getLatLng(),nt=H[te].getLatLng();if(g._middleMarkerNext){let We=L.PM.Utils.calcMiddleLatLng(this._map,ye,nt);g._middleMarkerNext.setLatLng(We)}if(g._middleMarkerPrev){let We=L.PM.Utils.calcMiddleLatLng(this._map,ye,Ee);g._middleMarkerPrev.setLatLng(We)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(h,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(h){let g=h.target;if(!this._vertexValidationDragEnd(g))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g),S=!this.options.allowSelfIntersection&&this.hasSelfIntersection();S&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(S=!1);let k=!this.options.allowSelfIntersection&&S;if(this._fireMarkerDragEnd(h,_,k),k){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(h,_);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(h){let g=h.target;if(g._dragging)return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireVertexClick(h,_)}}),Zt.Polygon=Zt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(h){let{prevMarker:g,nextMarker:_}=this._getNeighborMarkers(h),S=L.polyline([g.getLatLng(),h.getLatLng()]),k=L.polyline([h.getLatLng(),_.getLatLng()]),H=No(this._layer.toGeoJSON(15),S.toGeoJSON(15)).features.length,te=No(this._layer.toGeoJSON(15),k.toGeoJSON(15)).features.length;return!(H<=2&&te<=2)}}),Zt.Rectangle=Zt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let h=this._map,g=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,h.addLayer(this._markerGroup),this._markers=[],this._markers[0]=g.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((_,S)=>{let k=this._cornerMarkers.find(H=>H._index===S);k&&k.setLatLng(_)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(h,g){let _=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(_,"vertexPane"),_._origLatLng=h,_._index=g,_._pmTempLayer=!0,_.on("click",this._onVertexClick,this),this._markerGroup.addLayer(_),_},_addMarkerEvents(){this._markers[0].forEach(h=>{h.on("dragstart",this._onMarkerDragStart,this),h.on("drag",this._onMarkerDrag,this),h.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||h.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(h){if(!this._vertexValidation("move",h))return;let g=h.target,_=this._cornerMarkers;g._oppositeCornerLatLng=_.find(k=>k._index===(g._index+2)%4).getLatLng(),g._snapped=!1;let{indexPath:S}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragStart(h,S)},_onMarkerDrag(h){let g=h.target;if(!this._vertexValidationDrag(g)||g._index===void 0)return;this._adjustRectangleForMarkerMove(g);let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDrag(h,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(h){let g=h.target;if(!this._vertexValidationDragEnd(g))return;this._cornerMarkers.forEach(S=>{delete S._oppositeCornerLatLng});let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragEnd(h,_),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(h){L.extend(h._origLatLng,h._latlng);let g=L.PM.Utils._getRotatedRectangle(h.getLatLng(),h._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(g),this._adjustAllMarkers(h),this._layer.redraw()},_adjustAllMarkers(h){let g=this._layer.getLatLngs()[0];if(g&&g.length!==4&&g.length>0)g.forEach((_,S)=>{this._cornerMarkers[S].setLatLng(_)}),this._cornerMarkers.slice(g.length).forEach(_=>{_.setLatLng(g[0])});else if(!g||!g.length)console.error("The layer has no LatLngs");else{let _=g.findIndex(S=>h.getLatLng().equals(S));_>-1?(this._cornerMarkers[(h._index+1)%4].setLatLng(g[(_+1)%4]),this._cornerMarkers[(h._index+2)%4].setLatLng(g[(_+2)%4]),this._cornerMarkers[(h._index+3)%4].setLatLng(g[(_+3)%4])):this._cornerMarkers.forEach(S=>{S.setLatLng(g[S._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Pa(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let h=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(h[0],h[2],this.getAngle(),this._map||this)}}),Zt.CircleMarker=Zt.extend({_shape:"CircleMarker",initialize(h){this._layer=h,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(h={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,h),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let h=this._map;this._helperLayers&&(this._helperLayers.removeFrom(h),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(h);let g=this._layer.getLatLng(),_=this._layer._radius,S=this._getLatLngOnCircle(g,_);this._centerMarker=this._createCenterMarker(g),this._outerMarker=this._createOuterMarker(S),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(h,g){let _=this._map.project(h),S=L.point(_.x+g,_.y);return this._map.unproject(S)},_createHintLine(h,g){let _=h.getLatLng(),S=g.getLatLng();this._hintline=L.polyline([_,S],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(h){let g=this._createMarker(h);return this.options.draggable?(L.DomUtil.addClass(g._icon,"leaflet-pm-draggable"),g.on("move",this._moveCircle,this)):g.dragging.disable(),g},_createOuterMarker(h){let g=this._createMarker(h);return g.on("drag",this._resizeCircle,this),g},_createMarker(h){let g=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._origLatLng=h,g._pmTempLayer=!0,g.on("dragstart",this._onMarkerDragStart,this),g.on("drag",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),g.on("click",this._onVertexClick,this),this._helperLayers.addLayer(g),g},_moveCircle(h){if(h.target._cancelDragEventChain)return;let g=this._centerMarker.getLatLng();this._layer.setLatLng(g);let _=this._layer._radius,S=this._getLatLngOnCircle(g,_);this._outerMarker._latlng=S,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let h=this._layer.getLatLng(),g=this._layer._radius,_=this._getLatLngOnCircle(h,g);this._outerMarker.setLatLng(_),this._centerMarker.setLatLng(h),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng();this._hintline.setLatLngs([h,g])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(h){this._vertexValidation("move",h)&&this._fireMarkerDragStart(h)},_onMarkerDrag(h){let g=h.target;g instanceof L.Marker&&!this._vertexValidationDrag(g)||this._fireMarkerDrag(h)},_onMarkerDragEnd(h){this._extedingMarkerDragEnd();let g=h.target;this._vertexValidationDragEnd(g)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(h))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let h=this._layer._map||this._map;if(h){let g=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),h,this._layer.getLatLng()),_=L.circle(this._layer.getLatLng(),this._layer.options);_.setRadius(g);let S=h&&h.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(_,200,!S).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(_,200,!S),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);return this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?g=lu(this._map,h,g,this._getMinDistanceInMeter(h)):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(g=lu(this._map,h,g,this._getMaxDistanceInMeter(h))),g},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(h,g){return this._map.project(h).distanceTo(this._map.project(g))},_getMinDistanceInMeter(h){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,h)},_getMaxDistanceInMeter(h){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,h)},_onVertexClick(h){h.target._dragging||this._fireVertexClick(h,void 0)}}),Zt.Circle=Zt.CircleMarker.extend({_shape:"Circle",initialize(h){this._layer=h,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(h){L.PM.Edit.CircleMarker.prototype.enable.call(this,h||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let h=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(h,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let h=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!h).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!h),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(h,g){return this._map.distance(h,g)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(h){h.target._dragging||this._fireVertexClick(h,void 0)}}),Zt.ImageOverlay=Zt.extend({_shape:"ImageOverlay",initialize(h){this._layer=h,this._enabled=!1},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},enabled(){return this._enabled},enable(h={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,h),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let h=this._layer.getBounds(),g=h.getNorthWest(),_=h.getNorthEast(),S=h.getSouthEast(),k=h.getSouthWest();return[g,_,S,k]}}),Zt.Text=Zt.extend({_shape:"Text",initialize(h){this._layer=h,this._enabled=!1},enable(h){if(L.Util.setOptions(this,h),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let h=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),h.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let h=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,g=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${h}px`,this.textArea.style.width=`${g}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(h){h.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(h={}){let g=this._hasFocus;this._hasFocus=h.type==="focus",!g!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(h){h&&(this.textArea.value=h),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let g=this.options.className.split(" ");this.textArea.classList.add(...g)}let h=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(h),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(h=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),h===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(h){h.preventDefault()}});var on=function(h,g,_,S,k,H){this._matrix=[h,g,_,S,k,H]};on.init=()=>new L.PM.Matrix(1,0,0,1,0,0),on.prototype={transform(h){return this._transform(h.clone())},_transform(h){let g=this._matrix,{x:_,y:S}=h;return h.x=g[0]*_+g[1]*S+g[4],h.y=g[2]*_+g[3]*S+g[5],h},untransform(h){let g=this._matrix;return new L.Point((h.x/g[0]-g[4])/g[0],(h.y/g[2]-g[5])/g[2])},clone(){let h=this._matrix;return new L.PM.Matrix(h[0],h[1],h[2],h[3],h[4],h[5])},translate(h){if(h===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let g,_;return typeof h=="number"?(g=h,_=h):(g=h.x,_=h.y),this._add(1,0,0,1,g,_)},scale(h,g){if(h===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let _,S;return g=g||L.point(0,0),typeof h=="number"?(_=h,S=h):(_=h.x,S=h.y),this._add(_,0,0,S,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},rotate(h,g){let _=Math.cos(h),S=Math.sin(h);return g=g||new L.Point(0,0),this._add(_,S,-S,_,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(h,g,_,S,k,H){let te=[[],[],[]],ae=this._matrix,ye=[[ae[0],ae[2],ae[4]],[ae[1],ae[3],ae[5]],[0,0,1]],Ee=[[h,_,k],[g,S,H],[0,0,1]],nt;h&&h instanceof L.PM.Matrix&&(ae=h._matrix,Ee=[[ae[0],ae[2],ae[4]],[ae[1],ae[3],ae[5]],[0,0,1]]);for(let We=0;We<3;We+=1)for(let yt=0;yt<3;yt+=1){nt=0;for(let It=0;It<3;It+=1)nt+=ye[We][It]*Ee[It][yt];te[We][yt]=nt}return this._matrix=[te[0][0],te[1][0],te[0][1],te[1][1],te[0][2],te[1][2]],this}};var vn=on,un={calcMiddleLatLng(h,g,_){let S=h.project(g),k=h.project(_);return h.unproject(S._add(k)._divideBy(2))},findLayers(h){let g=[];return h.eachLayer(_=>{(_ instanceof L.Polyline||_ instanceof L.Marker||_ instanceof L.Circle||_ instanceof L.CircleMarker||_ instanceof L.ImageOverlay)&&g.push(_)}),g=g.filter(_=>!!_.pm),g=g.filter(_=>!_._pmTempLayer),g=g.filter(_=>!L.PM.optIn&&!_.options.pmIgnore||L.PM.optIn&&_.options.pmIgnore===!1),g},circleToPolygon(h,g=60,_=!0){let S=h.getLatLng(),k=h.getRadius(),H=Ji(S,k,g,0,_),te=[];for(let ae=0;ae<H.length;ae+=1){let ye=[H[ae].lat,H[ae].lng];te.push(ye)}return L.polygon(te,h.options)},disablePopup(h){h.getPopup()&&(h._tempPopupCopy=h.getPopup(),h.unbindPopup())},enablePopup(h){h._tempPopupCopy&&(h.bindPopup(h._tempPopupCopy),delete h._tempPopupCopy)},_fireEvent(h,g,_,S=!1){h.fire(g,_,S);let{groups:k}=this.getAllParentGroups(h);k.forEach(H=>{H.fire(g,_,S)})},getAllParentGroups(h){let g=[],_=[],S=k=>{for(let H in k._eventParents)if(g.indexOf(H)===-1){g.push(H);let te=k._eventParents[H];_.push(te),S(te)}};return!h._pmLastGroupFetch||!h._pmLastGroupFetch.time||new Date().getTime()-h._pmLastGroupFetch.time>1e3?(S(h),h._pmLastGroupFetch={time:new Date().getTime(),groups:_,groupIds:g},{groupIds:g,groups:_}):{groups:h._pmLastGroupFetch.groups,groupIds:h._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Ji,getTranslation:cr,findDeepCoordIndex(h,g,_=!0){let S,k=te=>(ae,ye)=>{let Ee=te.concat(ye);if(_){if(ae.lat&&ae.lat===g.lat&&ae.lng===g.lng)return S=Ee,!0}else if(ae.lat&&L.latLng(ae).equals(g))return S=Ee,!0;return Array.isArray(ae)&&ae.some(k(Ee))};h.some(k([]));let H={};return S&&(H={indexPath:S,index:S[S.length-1],parentPath:S.slice(0,S.length-1)}),H},findDeepMarkerIndex(h,g){let _,S=H=>(te,ae)=>{let ye=H.concat(ae);return te._leaflet_id===g._leaflet_id?(_=ye,!0):Array.isArray(te)&&te.some(S(ye))};h.some(S([]));let k={};return _&&(k={indexPath:_,index:_[_.length-1],parentPath:_.slice(0,_.length-1)}),k},_getIndexFromSegment(h,g){if(g&&g.length===2){let _=this.findDeepCoordIndex(h,g[0]),S=this.findDeepCoordIndex(h,g[1]),k=Math.max(_.index,S.index);return(_.index===0||S.index===0)&&k!==1&&(k+=1),{indexA:_,indexB:S,newIndex:k,indexPath:_.indexPath,parentPath:_.parentPath}}return null},_getRotatedRectangle(h,g,_,S){let k=Ke(S,h),H=Ke(S,g),te=_*Math.PI/180,ae=Math.cos(te),ye=Math.sin(te),Ee=(H.x-k.x)*ae+(H.y-k.y)*ye,nt=(H.y-k.y)*ae-(H.x-k.x)*ye,We=Ee*ae+k.x,yt=Ee*ye+k.y,It=-nt*ye+k.x,tn=nt*ae+k.y,xn=pt(S,k),Sn=pt(S,{x:We,y:yt}),fr=pt(S,H),tt=pt(S,{x:It,y:tn});return[xn,Sn,fr,tt]},pxRadiusToMeterRadius(h,g,_){let S=g.project(_),k=L.point(S.x+h,S.y);return g.distance(g.unproject(k),_)}},Bn=un;L.PM=L.PM||{version:po.version,Map:$s,Toolbar:Nl,Draw:bs,Edit:Zt,Utils:Bn,Matrix:vn,activeLang:"en",optIn:!1,initialize(h){this.addInitHooks(h)},setOptIn(h){this.optIn=!!h},addInitHooks(){function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(h);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(g);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(_);function S(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(S);function k(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(k);function H(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(H);function te(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(te);function ae(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(ae);function ye(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(ye)},reInitLayer(h){h instanceof L.LayerGroup&&h.eachLayer(g=>{this.reInitLayer(g)}),h.pm||L.PM.optIn&&h.options.pmIgnore!==!1||h.options.pmIgnore||(h instanceof L.Map?h.pm=new L.PM.Map(h):h instanceof L.Marker?h.options.textMarker?(h.pm=new L.PM.Edit.Text(h),h.pm._initTextMarker(),h.pm._createTextMarker(!1)):h.pm=new L.PM.Edit.Marker(h):h instanceof L.Circle?h.pm=new L.PM.Edit.Circle(h):h instanceof L.CircleMarker?h.pm=new L.PM.Edit.CircleMarker(h):h instanceof L.Rectangle?h.pm=new L.PM.Edit.Rectangle(h):h instanceof L.Polygon?h.pm=new L.PM.Edit.Polygon(h):h instanceof L.Polyline?h.pm=new L.PM.Edit.Line(h):h instanceof L.LayerGroup?h.pm=new L.PM.Edit.LayerGroup(h):h instanceof L.ImageOverlay&&(h.pm=new L.PM.Edit.ImageOverlay(h)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(h){let g=this._map.mouseEventToLayerPoint(h),_,S;for(let k=this._drawFirst;k;k=k.next)_=k.layer,_.options.interactive&&_._containsPoint(g)&&(!(h.type==="click"||h.type==="preclick")||!this._map._draggableMoved(_))&&(S=_);S&&(L.DomEvent.fakeStop(h),this._fireEvent([S],h))}}),L.PM.initialize()})();class op extends Gn.Circle{constructor(n,r){const i=r.radius||10;super(n,i,r);Ze(this,"properties");Ze(this,"angleCache",new Map);Ze(this,"lastCenter");Ze(this,"lastCenterCosLat");Ze(this,"_pendingNameUpdate",!1);Ze(this,"_nameUpdateTimeout",null);gn.measure("Circle.constructor.init",()=>{this.properties={type:"Circle",style:{name:r.name||""}},requestAnimationFrame(()=>{this.updateProperties()}),this.on("add",()=>{requestAnimationFrame(()=>{this.updateProperties()})})},"Circle")}updateProperties(){gn.measure("Circle.updateProperties",()=>{var a,l,c,d;const n=this.getRadius(),r=this.getLatLng(),i=((l=(a=this.properties)==null?void 0:a.style)==null?void 0:l.name)||"",s=((c=this.properties)==null?void 0:c.style)||{},o={type:"Circle",radius:n,diameter:n*2,surface:Math.PI*Math.pow(n,2),perimeter:2*Math.PI*n,center:{lat:r.lat,lng:r.lng},style:{...s,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((d=this.options)==null?void 0:d.dashArray)||"",name:i}};JSON.stringify(this.properties)!==JSON.stringify(o)&&(this.properties=o,this.fire("properties:updated",{shape:this,properties:this.properties}))},"Circle")}setName(n){gn.measure("Circle.setName",()=>{var r,i;((i=(r=this.properties)==null?void 0:r.style)==null?void 0:i.name)!==n&&(this.properties.style||(this.properties.style={}),this.properties.style.name=n,!this._pendingNameUpdate&&(this._pendingNameUpdate=!0,this._nameUpdateTimeout&&clearTimeout(this._nameUpdateTimeout),this._nameUpdateTimeout=setTimeout(()=>{this._pendingNameUpdate=!1,this._nameUpdateTimeout=null,this.fire("properties:updated",{shape:this,properties:this.properties})},100)))},"Circle")}getName(){return gn.measure("Circle.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""},"Circle")}setRadius(n){return gn.measure("Circle.setRadius",()=>(super.setRadius(n),this.updateProperties(),this),"Circle")}setLatLng(n){return gn.measure("Circle.setLatLng",()=>(super.setLatLng(n),this.updateProperties(),this),"Circle")}calculatePointOnCircle(n){return gn.measure("Circle.calculatePointOnCircle",()=>{const r=this.getLatLng(),i=this.getRadius();let s=this.angleCache.get(n);if(!s){const o=n*Math.PI/180;s={sin:Math.sin(o),cos:Math.cos(o)},this.angleCache.set(n,s)}return(!this.lastCenter||!this.lastCenter.equals(r))&&(this.lastCenter=r,this.lastCenterCosLat=Math.cos(r.lat*Math.PI/180)),Gn.latLng(r.lat+i/111319.9*s.sin,r.lng+i/(111319.9*this.lastCenterCosLat)*s.cos)},"Circle")}getCardinalPoints(){return gn.measure("Circle.getCardinalPoints",()=>[0,45,90,135,180,225,270,315].map(n=>this.calculatePointOnCircle(n)),"Circle")}calculateAngleFromPoint(n){return gn.measure("Circle.calculateAngleFromPoint",()=>{const r=this.getLatLng(),i=n.lng-r.lng,s=n.lat-r.lat;let o=Math.atan2(s,i)*180/Math.PI;return o<0&&(o+=360),o},"Circle")}resizeFromControlPoint(n){gn.measure("Circle.resizeFromControlPoint",()=>{const i=this.getLatLng().distanceTo(n);i>0&&super.setRadius(i)},"Circle")}clearCache(){this.angleCache.clear(),this.lastCenter=void 0,this.lastCenterCosLat=void 0}}const Yv=(t,e)=>{if(!t||typeof t!="string"||!t.startsWith("#"))return`rgba(0, 0, 0, ${e})`;const n=parseInt(t.slice(1,3),16),r=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return`rgba(${n}, ${r}, ${i}, ${e})`},m5=(t,e)=>{t.style.fontSize=e.fontSize,t.style.color=e.color,t.style.backgroundColor=Yv(e.backgroundColor,e.backgroundOpacity),e.hasBorder?t.style.border=`${e.borderWidth} solid ${Yv(e.borderColor,e.borderOpacity)}`:t.style.border="none",t.style.padding=e.padding,t.style.borderRadius=e.borderRadius},Ul=t=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const n=$t.DomUtil.create("div","drawing-help-message");return n.innerHTML=t,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n};function v5(t,e,n){const r=156543.03392*Math.cos(e*Math.PI/180)/Math.pow(2,n);return t/r}const ns=(t,e="m",n="")=>{let r,i;return e==="m"?t>=1e4?(r=(t/1e4).toFixed(2),i="ha"):(r=t.toFixed(2),i="m"):e==="m"?t>=1e3?(r=(t/1e3).toFixed(2),i="km"):(r=t.toFixed(2),i="m"):(r=t.toFixed(2),i=e),n?`${n}: ${r} ${i}`:`${r} ${i}`},BU=t=>({...t,clientX:t.clientX,clientY:t.clientY,button:t.button||0,buttons:t.buttons||0,altKey:t.altKey||!1}),RU=(t,e)=>{let n;return function(...r){window.clearTimeout(n),n=window.setTimeout(()=>t.apply(this,r),e)}},qd=(t,e)=>{let n=0;return function(...r){const i=Date.now();if(!(i-n<e))return n=i,t.apply(this,r)}};function FU(){const t=xt(null),e=xt(null),n=xt(null),r=xt(null),i=xt(""),s=xt(null),o=xt(!1),a=xt(null);window.addEventListener("clearControlPoints",()=>{s.value=null,n.value&&n.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(G=>G.remove()),document.querySelectorAll(".drawing-help-message").forEach(G=>G.remove())}),Ku(()=>{window.removeEventListener("clearControlPoints",()=>{}),t.value&&(t.value.remove(),t.value=null)});const l=(G,se="Double-cliquez pour diter")=>{const ce={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},he=(Ce,de)=>{var Je;const Xe=((Je=t.value)==null?void 0:Je.getZoom())||14,Ie=G.lat,Ye=v5(de.physicalSize,Ie,Xe);return`<div class="text-container" style="width:${Ye}px;height:${Ye}px;transform:rotate(${de.rotation}deg)">
        <div class="text-annotation" style="font-size:${Ye*.2}px;color:${de.color};background-color:${Yv(de.backgroundColor,de.backgroundOpacity)};border:${de.hasBorder?de.borderWidth+" solid "+Yv(de.borderColor,de.borderOpacity):"none"};padding:${de.padding};border-radius:${de.borderRadius}">${Ce}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},ve=()=>{if(!t.value)return;const Ce=X.getIcon(),de={html:he(X.properties.text,X.properties.style),className:Ce.options.className};X.setIcon($t.divIcon(de))},ee=$t.divIcon({html:he(se,ce),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),X=$t.marker(G,{icon:ee,draggable:!1,pmIgnore:!0});X.properties={type:"text",text:se,style:{...ce}},t.value&&(t.value.on("zoomend",ve),X.on("remove",()=>{var Ce;(Ce=t.value)==null||Ce.off("zoomend",ve)})),ve();let De=!1,Te=!1,qe=0,ge=0;const Q=Ce=>{if(!t.value)return;const de=Ce.target;if(de.classList.contains("rotate")){De=!0;const Xe=X.getLatLng(),Ie=t.value.mouseEventToLatLng(Ce);qe=Math.atan2(Ie.lat-Xe.lat,Ie.lng-Xe.lng)*180/Math.PI,ge=X.properties.style.rotation||0}else de.classList.contains("move")&&(Te=!0);document.addEventListener("mousemove",ie),document.addEventListener("mouseup",fe)},ie=Ce=>{if(!(!Te||!t.value)){if(De){const de=X.getLatLng(),Xe=t.value.mouseEventToLatLng(Ce),Ie=Math.atan2(Xe.lat-de.lat,Xe.lng-de.lng)*180/Math.PI,Ye=(ge+(Ie-qe))%360;X.properties.style.rotation=Ye;const Je=X.getIcon(),Ge={html:he(X.properties.text,X.properties.style),className:Je.options.className};X.setIcon($t.divIcon(Ge))}else if(Te){const de=BU(Ce),Xe=t.value.mouseEventToLatLng(de);X.setLatLng(Xe)}}},fe=()=>{De=!1,Te=!1,document.removeEventListener("mousemove",ie),document.removeEventListener("mouseup",fe)};return X.on("add",()=>{const Ce=X.getElement();Ce&&Ce.querySelectorAll(".control-button").forEach(Xe=>{Xe.addEventListener("mousedown",Q)})}),X.on("remove",()=>{const Ce=X.getElement();Ce&&Ce.querySelectorAll(".control-button").forEach(Xe=>{Xe.removeEventListener("mousedown",Q)})}),X.on("dblclick",Ce=>{var Ge;$t.DomEvent.stopPropagation(Ce);const de=(Ge=X.getElement())==null?void 0:Ge.querySelector(".text-annotation");if(!de)return;de.contentEditable="true",de.focus(),de.classList.add("editing");const Xe=window.getSelection(),Ie=document.createRange();Ie.selectNodeContents(de),Xe==null||Xe.removeAllRanges(),Xe==null||Xe.addRange(Ie);const Ye=()=>{de.contentEditable="false",de.classList.remove("editing");const wt=de.innerText.trim();if(wt){X.properties.text=wt;const Ct=X.getIcon(),Wt={html:he(wt,X.properties.style),className:Ct.options.className};X.setIcon($t.divIcon(Wt))}de.removeEventListener("blur",Ye),de.removeEventListener("keydown",Je)},Je=wt=>{wt.key==="Enter"&&!wt.shiftKey&&(wt.preventDefault(),Ye())};de.addEventListener("blur",Ye),de.addEventListener("keydown",Je)}),X},c=(G,se)=>{const ce=$t.DomUtil.create("div","measure-tooltip");if(ce.innerHTML=se,ce.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(ce),t.value){const he=t.value.latLngToContainerPoint(G);ce.style.left=`${he.x+10}px`,ce.style.top=`${he.y-25}px`}return ce},d=qd((G,se,ce)=>{if(G&&(G.innerHTML=ce,t.value)){const he=t.value.latLngToContainerPoint(se);G.style.left=`${he.x+10}px`,G.style.top=`${he.y-25}px`}},100),p=(G,se,ce)=>{G.on("mouseover",()=>{const he=c(G.getLatLng(),ce());G.measureDiv=he}),G.on("mousemove",he=>{G.measureDiv&&t.value&&d(G.measureDiv,he.latlng,ce())}),G.on("mouseout",()=>{G.measureDiv&&(G.measureDiv.remove(),G.measureDiv=void 0)})};let v=[];const m=()=>{var G;v.cleanup&&v.cleanup(),n.value&&n.value.clearLayers(),v=[],(G=r.value)==null||G.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(se=>se.remove()),e.value&&e.value.getLayers().forEach(se=>{se instanceof za&&se.clearHelperPoints()})},x=(G,se="#2563EB")=>{const ce=$t.circleMarker(G,{radius:6,color:se,fillColor:se,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(ce),ce},E=(G,se)=>{var he,ve,ee,X,De,Te;console.log("Input layer:",{type:se,instanceof:{Circle:G instanceof $t.Circle,Rectangle:G instanceof $t.Rectangle,Polygon:G instanceof $t.Polygon,Polyline:G instanceof $t.Polyline,ElevationLine:G instanceof Sd,Line:G instanceof ta},options:G.options});const ce={type:se,style:G.options||{}};try{if(G instanceof $t.Circle){const qe=G.getRadius();ce.radius=qe,ce.diameter=qe*2,ce.surface=Math.PI*Math.pow(qe,2),ce.perimeter=2*Math.PI*qe,ce.center=G.getLatLng()}else if(G instanceof $t.Rectangle){const qe=G.getBounds(),ge=qe.getNorthEast(),Q=qe.getSouthWest(),ie=Hu([[Q.lng,Q.lat],[ge.lng,Q.lat]]),fe=Hu([[Q.lng,Q.lat],[Q.lng,ge.lat]]),Ce=Gd(ie,{units:"meters"}),de=Gd(fe,{units:"meters"});ce.width=Ce,ce.height=de,ce.surface=Ce*de,ce.perimeter=2*(Ce+de),ce.dimensions={width:Ce,height:de}}else if(G instanceof $t.Polygon)try{const ge=G.getLatLngs()[0].map(ie=>[ie.lng,ie.lat]);ge.push(ge[0]);const Q=Uu([ge]);ce.surface=Rc(Q),ce.perimeter=Gd(Hu(ge),{units:"meters"})}catch(qe){console.error("Erreur lors du calcul des proprits du polygone",qe)}else if(G instanceof $t.Polyline&&!(G instanceof $t.Polygon))try{const qe=G.getLatLngs();let ge=0;for(let Q=1;Q<qe.length;Q++)ge+=qe[Q].distanceTo(qe[Q-1]);ce.length=ge}catch(qe){console.error("Erreur lors du calcul de la longueur de la ligne",qe)}ce.style={...ce.style,color:((he=G.options)==null?void 0:he.color)||"#3388ff",weight:((ve=G.options)==null?void 0:ve.weight)||3,opacity:((ee=G.options)==null?void 0:ee.opacity)||1,fillColor:((X=G.options)==null?void 0:X.fillColor)||"#3388ff",fillOpacity:((De=G.options)==null?void 0:De.fillOpacity)||.2,dashArray:((Te=G.options)==null?void 0:Te.dashArray)||""}}catch(qe){console.error("Error calculating shape properties:",qe)}return ce},M=(G,se=2)=>{var X;if(!t.value){console.warn("Map is not available for text size update");return}const ce=t.value.getZoom(),he=G.getLatLng().lat,ve=v5(se,he,ce),ee=(X=G.getElement())==null?void 0:X.querySelector(".text-annotation");ee&&(G.properties.style.fontSize=`${ve}px`,G.properties.physicalWidth=se,G.properties.physicalHeight=se,m5(ee,G.properties.style))},A=(G,se,ce)=>{const he=$t.map(G).setView(se,ce);t.value=he,$t.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:5}).addTo(he);const ve=new $t.FeatureGroup;return ve.addTo(he),e.value=ve,n.value=$t.featureGroup().addTo(he),r.value=$t.featureGroup().addTo(he),he.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:ve,snapLayers:[ve,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),he.on("pm:drawstart",ee=>{o.value=!0,ee.shape==="Circle"&&i.value==="Semicircle"&&(he.getContainer().style.cursor="crosshair")}),he.on("pm:drawend",()=>{o.value=!1,he.getContainer().style.cursor="",s.value&&Ul("Cliquez sur la forme pour afficher les points de contrle")}),he.on("pm:create",Oe),ve.on("click",ee=>{var De,Te,qe,ge,Q,ie,fe,Ce,de,Xe,Ie,Ye,Je,Ge,wt;$t.DomEvent.stopPropagation(ee);const X=ee.layer;if(X.name&&!((De=X.properties)!=null&&De.name)?(X.properties||(X.properties={}),X.properties.name=X.name):(Te=X.properties)!=null&&Te.name&&!X.name&&(X.name=X.properties.name),console.log("[featureGroup click] tat du nom:",{directName:X.name,propertiesName:(qe=X.properties)==null?void 0:qe.name,fullProperties:X.properties}),(ge=r.value)==null||ge.clearLayers(),m(),s.value=X,X instanceof op)j(X);else if(X instanceof $t.Circle){console.log("[useMapDrawing] Cration du cercle personnalis:",{propertyDescriptor:Object.getOwnPropertyDescriptor(X,"name"),directName:X.name,propertiesName:(Q=X.properties)==null?void 0:Q.name,styleNameBeforeTransfer:(fe=(ie=X.properties)==null?void 0:ie.style)==null?void 0:fe.name,nameIsEnumerable:Object.keys(X).includes("name"),allProperties:Object.keys(X.properties||{}),_dbId:X._dbId});const Ct=X.name,Wt=(Ce=X.properties)==null?void 0:Ce.name,sn=(Xe=(de=X.properties)==null?void 0:de.style)==null?void 0:Xe.name,bn=X._dbId,Qe=new op(X.getLatLng(),{...X.options,radius:X.getRadius()});X.properties?Qe.properties={...X.properties||{}}:Qe.updateProperties();const ot=Ct||Wt||sn;ot&&(Qe.properties.name=ot,Qe.properties.style||(Qe.properties.style={}),Qe.properties.style.name=ot,Qe.name=ot),bn&&(Qe._dbId=bn),console.log("[useMapDrawing] Cercle aprs conversion:",{name:Qe.name,propertiesName:Qe.properties.name,stylePropertyName:(Ie=Qe.properties.style)==null?void 0:Ie.name,allProperties:Object.keys(Qe.properties||{})}),(Ye=e.value)==null||Ye.removeLayer(X),(Je=e.value)==null||Je.addLayer(Qe),s.value=Qe,j(Qe)}else if(X instanceof za)q(X);else if(X instanceof $t.Rectangle){const Ct=new za(X.getBounds(),{...X.options});Ct.updateProperties(),(Ge=e.value)==null||Ge.removeLayer(X),(wt=e.value)==null||wt.addLayer(Ct),s.value=Ct,q(Ct)}else X instanceof $t.Polygon?B(X):X instanceof ta||X instanceof $t.Polyline?I(X):X instanceof kh&&$(X)}),he.on("pm:edit",ee=>{var De,Te,qe;console.log("[pm:edit] Dbut",{layer:ee.layer,currentProperties:ee.layer.properties});const X=ee.layer;if(X){const ge=((De=X.properties)==null?void 0:De.type)||"unknown";if(pe(X,ge),console.log("[pm:edit] Aprs updateLayerProperties",{updatedProperties:X.properties,selectedShape:s.value}),X instanceof op)j(X);else if(X instanceof za)q(X);else if(X instanceof $t.Rectangle){const Q=new za(X.getBounds(),{...X.options});Q.updateProperties(),(Te=e.value)==null||Te.removeLayer(X),(qe=e.value)==null||qe.addLayer(Q),s.value=Q,q(Q)}else X instanceof $t.Polygon?B(X):X instanceof ta?(X.updateProperties(),pe(X,"Line"),I(X)):X instanceof $t.Polyline?I(X):X instanceof kh&&(X.updateProperties(),$(X))}}),he.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(ee=>ee.remove()),Ul("Dplacez la forme  l'endroit souhait")}),he.on("pm:dragend",ee=>{var De,Te,qe;console.log("[pm:dragend] Dbut",{layer:ee.layer,currentProperties:ee.layer.properties});const X=ee.layer;if(X){const ge=((De=X.properties)==null?void 0:De.type)||"unknown";if(X instanceof $t.Rectangle&&!(X instanceof za)){const Q=new za(X.getBounds(),{...X.options});Q.updateProperties(),(Te=e.value)==null||Te.removeLayer(X),(qe=e.value)==null||qe.addLayer(Q),s.value=Q,q(Q)}else X instanceof ta?(X.updateProperties(),pe(X,"Line"),I(X)):pe(X,ge);console.log("[pm:dragend] Aprs updateLayerProperties",{updatedProperties:X.properties,selectedShape:s.value})}setTimeout(()=>{Ul("Cliquez sur la forme pour afficher les points de contrle")},100)}),he.on("pm:remove",()=>{var ee;(ee=document.querySelector(".drawing-help-message"))==null||ee.remove()}),he.on("pm:select",()=>{document.querySelectorAll(".drawing-help-message").forEach(ee=>ee.remove()),Ul("Utilisez les points de contrle pour modifier la forme")}),he.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(ee=>ee.remove())}),he.on("zoomstart",()=>{s.value&&(m(),s.value=null,document.querySelectorAll(".drawing-help-message").forEach(ee=>ee.remove()))}),he},O=()=>{if(!(!t.value||!e.value||!e.value.getLayers().length))try{const G=e.value.getBounds();if(G.isValid()){const se={zoomAnimation:t.value.options.zoomAnimation,fadeAnimation:t.value.options.fadeAnimation,markerZoomAnimation:t.value.options.markerZoomAnimation};t.value.options.zoomAnimation=!1,t.value.options.fadeAnimation=!1,t.value.options.markerZoomAnimation=!1,t.value.fitBounds(G,{padding:[50,50],maxZoom:18,animate:!1,duration:0,noMoveStart:!0}),t.value.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{try{t.value.options.fadeAnimation=se.fadeAnimation,setTimeout(()=>{try{t.value.options.zoomAnimation=se.zoomAnimation,t.value.options.markerZoomAnimation=se.markerZoomAnimation}catch(ce){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",ce)}},500)}catch(ce){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",ce)}},500)}}catch(G){if(console.warn("[useMapDrawing] Error adjusting view:",G),t.value)try{t.value.options.zoomAnimation=!0,t.value.options.fadeAnimation=!0,t.value.options.markerZoomAnimation=!0,t.value.invalidateSize({animate:!1,pan:!1})}catch(se){console.error("[useMapDrawing] Erreur lors de la restauration aprs chec:",se)}}},z=G=>{var ce;if(!t.value)return;document.querySelectorAll(".drawing-help-message").forEach(he=>he.remove());try{const he=t.value.pm;he.globalEditModeEnabled()&&he.disableGlobalEditMode(),he.globalRemovalModeEnabled()&&he.disableGlobalRemovalMode(),he.disableDraw(),m(),(ce=r.value)==null||ce.clearLayers()}catch(he){console.error("Error disabling modes:",he)}if(i.value=G,!G){m();return}let se=G;switch(G){case"Note":se="GeoNote";break;case"Polygon":se="Polygon";break;case"Line":se="Line";break;case"ElevationLine":se="ElevationLine";break;default:se=G}G=se,Z(),setTimeout(()=>{var he,ve,ee,X,De,Te,qe,ge,Q,ie,fe,Ce,de;try{switch(G){case"Polygon":Ul("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(he=t.value)==null||he.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(ve=t.value)==null||ve.off("pm:create"),(ee=t.value)==null||ee.on("pm:create",Ie=>{var Ye,Je,Ge;if(Ie.shape==="Polygon"&&Ie.layer){const wt=Ie.layer.getLatLngs()[0];(Ye=t.value)==null||Ye.removeLayer(Ie.layer),(Je=e.value)!=null&&Je.hasLayer(Ie.layer)&&e.value.removeLayer(Ie.layer);const Ct=new cd(wt,{color:"#3B82F6",weight:3,fillColor:"#3B82F6",fillOpacity:.2});e.value&&(e.value.addLayer(Ct),s.value=Ct,Ct.updateProperties()),(Ge=t.value)==null||Ge.pm.disableDraw(),Z()}});break;case"Circle":e.value&&e.value.getLayers().filter(Ye=>Ye instanceof za).forEach(Ye=>{Ye.toggleHelperPoints(t.value,!0,"#DC2626","#2563EB")}),t.value.pm.setGlobalOptions({snapDistance:15,snapSegment:!0,snapVertices:!0,snapLayers:[e.value,r.value],snapMiddle:!0,snapIntersections:!0}),Ul("Positionnez le centre du cercle. Points bleus : milieu des cts, Points rouges : sommets, Point vert : centre"),t.value.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":Ul("Cliquez et maintenez pour dessiner un rectangle, relchez pour terminer"),(X=t.value)==null||X.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":Ul("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(De=t.value)==null||De.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":Ul("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(Te=t.value)==null||Te.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(qe=t.value)==null||qe.off("pm:create"),(ge=t.value)==null||ge.on("pm:create",Ie=>{var Ye,Je,Ge;if(Ie.shape==="Line"&&Ie.layer){const wt=Ie.layer.getLatLngs();(Ye=t.value)==null||Ye.removeLayer(Ie.layer),(Je=e.value)!=null&&Je.hasLayer(Ie.layer)&&e.value.removeLayer(Ie.layer);const Ct=new ta(wt,{color:"#3B82F6",weight:3,opacity:.8});e.value&&(e.value.addLayer(Ct),s.value=Ct,Ct.updateProperties()),(Ge=t.value)==null||Ge.pm.disableDraw(),Z()}});break;case"Text":if(Ul("Cliquez pour ajouter du texte, double-cliquez pour diter"),t.value){const Ie=Ye=>{if(!t.value||!e.value)return;const Je=l(Ye.latlng);e.value.addLayer(Je),s.value=Je,t.value.off("click",Ie),z("")};t.value.on("click",Ie)}break;case"GeoNote":if(Ul("Cliquez pour ajouter une note golocalise, double-cliquez pour diter"),t.value){const Ie=async Ye=>{if(!(!t.value||!e.value))try{const Je=Tp(),Ge=new kh(Ye.latlng,{color:"#3B82F6",name:"Note golocalise",description:"",columnId:"1"});e.value.addLayer(Ge),s.value=Ge,Ge.updateProperties();try{const wt=Je.currentMapId||void 0,Ct=await Ge.saveNote(wt);console.log(`[useMapDrawing] Note sauvegarde avec succs, ID backend: ${Ct}`);const Wt=Ge._leaflet_id;console.log(`[useMapDrawing] ID Leaflet: ${Wt}, ID backend: ${Ct}`),window.dispatchEvent(new CustomEvent("note:created",{detail:{geoNote:Ge,leafletId:Wt,backendId:Ct}})),Ge.openPopup()}catch(wt){console.error("[useMapDrawing] Erreur lors de la sauvegarde de la note:",wt),Mh(async()=>{const{useNotificationStore:Ct}=await Promise.resolve().then(()=>QB);return{useNotificationStore:Ct}},void 0).then(({useNotificationStore:Ct})=>{Ct().error("Erreur lors de la cration de la note")})}t.value.off("click",Ie),z("")}catch(Je){console.error("[useMapDrawing] Erreur lors de la cration de la note:",Je),t.value.off("click",Ie),z("")}};t.value.on("click",Ie)}break;case"delete":Ul("Cliquez sur une forme pour la supprimer"),(Q=t.value)==null||Q.pm.enableGlobalRemovalMode();break;case"ElevationLine":Ul("Cliquez et maintenez pour tracer le profil altimtrique"),(ie=t.value)==null||ie.pm.enableDraw("Line",{finishOn:"mouseup",continueDrawing:!1,allowSelfIntersection:!1,templineStyle:{color:"#FF4500",weight:4,opacity:.8}}),(fe=t.value)==null||fe.pm.setGlobalOptions({continueDrawing:!1,finishOn:"mouseup",preventMarkerRemoval:!0,preventVertexEdit:!0,preventMarkerEdit:!0}),(Ce=t.value)==null||Ce.off("pm:create"),(de=t.value)==null||de.on("pm:create",async Ie=>{var Ye,Je,Ge;if(Ie.shape==="Line"&&Ie.layer){const wt=Ie.layer.getLatLngs();(Ye=t.value)==null||Ye.removeLayer(Ie.layer),(Je=e.value)!=null&&Je.hasLayer(Ie.layer)&&e.value.removeLayer(Ie.layer);const Ct=new Sd(wt,{color:"#FF4500",weight:4,opacity:.8,interactive:!1,pmIgnore:!0});if(e.value){e.value.addLayer(Ct),s.value=Ct,await Ct.updateElevationProfile();const Wt=E(Ct,"ElevationLine");Object.assign(Ct.properties,{...Wt,...Ct.properties,type:"ElevationLine",elevationData:Ct.getElevationData()}),s.value=null,la(()=>{s.value=Ct})}(Ge=t.value)==null||Ge.pm.disableDraw(),i.value="",Z()}});break}}catch(Xe){console.error("[setDrawingTool] Erreur lors de la configuration de l'outil:",Xe)}},100)},K=G=>{var ce;if(!s.value)return;const se=s.value;if(se.properties=se.properties||{},se.properties.style=se.properties.style||{},se.properties.style={...se.properties.style,...G},se.properties.type==="text"){const he=se.properties._textLayer,ve=(ce=he==null?void 0:he.getElement())==null?void 0:ce.querySelector(".text-annotation");ve&&m5(ve,se.properties.style);const ee={color:G.borderColor||se.properties.style.borderColor,weight:parseInt(G.borderWidth||se.properties.style.borderWidth),opacity:G.borderOpacity??se.properties.style.borderOpacity};"setStyle"in se&&se.setStyle(ee)}else if(se.properties.type==="TextRectangle")console.log("[updateShapeStyle] TextRectangle supprim selon les exigences");else{const he={};G.fillColor&&(he.fillColor=G.fillColor),G.fillOpacity!==void 0&&(he.fillOpacity=G.fillOpacity),G.strokeColor&&(he.color=G.strokeColor),G.strokeOpacity!==void 0&&(he.opacity=G.strokeOpacity),G.strokeWidth!==void 0&&(he.weight=G.strokeWidth),G.dashArray&&(he.dashArray=G.dashArray),"setStyle"in se&&se.setStyle(he)}},ne=G=>{var X,De,Te,qe,ge;if(!s.value){console.warn("[useMapDrawing] Cannot update properties: no shape selected");return}console.log("[useMapDrawing] Updating shape properties",{before:s.value.properties,newProps:G,layerType:(X=s.value.properties)==null?void 0:X.type,beforeName:s.value.name,beforePropertiesName:(De=s.value.properties)==null?void 0:De.name,beforeCategory:(Te=s.value.properties)==null?void 0:Te.category,nameIsDirectProperty:"name"in s.value,dbId:s.value._dbId}),s.value.properties||(s.value.properties={});const se=s.value.properties.type;console.log(`[useMapDrawing] Type actuel de la forme: ${se}`),s.value.properties.category||(s.value.properties.category="forages"),s.value.properties.accessLevel||(s.value.properties.accessLevel="visitor"),s.value._dbId||(s.value._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[useMapDrawing] Assigned temporary dbId: ${s.value._dbId}`));const ce=s.value.properties.type;console.log(`[useMapDrawing] Type original avant mise  jour: ${ce}`);const he=s.value.properties.category;console.log(`[useMapDrawing] Catgorie existante: ${he}`);const ve="category"in G&&G.category!==he;if(Object.keys(G).forEach(Q=>{Q==="type"&&ce?console.log(`[useMapDrawing] Prservation du type original: ${ce}`):s.value.properties[Q]=G[Q],Q==="name"&&(console.log(`[useMapDrawing] Setting name "${G[Q]}" directly on layer`),s.value.name=G[Q]),Q==="category"&&console.log(`[useMapDrawing] Mise  jour de la catgorie: ${he} -> ${G[Q]}`)}),ce&&(s.value.properties.type=ce),he&&!ve&&(console.log(`[useMapDrawing] Restauration de la catgorie originale: ${he}`),s.value.properties.category=he),s.value._dbId&&ve){const Q=Tp(),ie=Q.elements.find(fe=>fe.id===s.value._dbId);if(ie){console.log(`[useMapDrawing] Mise  jour de la catgorie dans le store: ${s.value.properties.category} pour l'lment ${s.value._dbId}`);const fe=ie;fe.data||(fe.data={}),fe.data.category=s.value.properties.category,Q.$patch({unsavedChanges:!0})}}const ee=new CustomEvent("shape:propertiesUpdated",{detail:{shape:s.value,properties:s.value.properties,categoryUpdated:ve}});if(window.dispatchEvent(ee),console.log("[useMapDrawing] Updated shape properties",{after:s.value.properties,name:s.value.name,propertiesName:(qe=s.value.properties)==null?void 0:qe.name,allLayerKeys:Object.keys(s.value),allPropertiesKeys:Object.keys(s.value.properties||{})}),((ge=s.value.properties)==null?void 0:ge.type)==="Circle"){const Q=s.value,ie=Q.getRadius();Q.properties.radius=ie,Q.properties.diameter=ie*2,Q.properties.surface=Math.PI*ie*ie,Q.properties.perimeter=2*Math.PI*ie,G.name&&(console.log(`[useMapDrawing] Ensuring circle name "${G.name}" is set in multiple places`),Q.properties.name=G.name,Q.properties.style.name=G.name,Q.name=G.name,console.log("[useMapDrawing] Circle name verification:",{circleDirectName:Q.name,circlePropertiesName:Q.properties.name,nameIsEnumerable:Object.keys(Q).includes("name"),propertiesNameIsEnumerable:Object.keys(Q.properties).includes("name")}))}},me=G=>{console.log("[forceShapeUpdate] Dbut",{currentProperties:G.properties,selectedShapeRef:s.value}),s.value=null,la(()=>{s.value=G,console.log("[forceShapeUpdate] Aprs mise  jour",{selectedShape:s.value,properties:s.value.properties})})},pe=(G,se)=>{console.log("[updateLayerProperties] Dbut",{layer:G,shapeType:se,currentProperties:G.properties}),RU((he,ve)=>{const ee=E(he,ve);console.log("[updateLayerProperties] Nouvelles proprits calcules",{newProperties:ee}),he.properties={...ee},me(he),he.fire("properties:updated",{shape:he,properties:he.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:he.properties,selectedShape:s.value})},100)(G,se)},N=(G,se)=>$t.latLng((G.lat+se.lat)/2,(G.lng+se.lng)/2),j=G=>{if(!t.value||!e.value)return;m();const se=G.getLatLng(),ce=G.getRadius(),he=x(se,"#059669");v.push(he),p(he,G,()=>[ns(ce,"m","Rayon"),ns(ce*2,"m","Diamtre"),ns(Math.PI*Math.pow(ce,2),"m","Surface")].join("<br>"));const ve=[],ee=[0,45,90,135,180,225,270,315];ee.forEach(X=>{const De=G.calculatePointOnCircle(X),Te=x(De,"#2563EB");ve.push(Te),v.push(Te),p(Te,G,()=>ns(ce,"m","Rayon")),Te.on("mousedown",qe=>{if(!t.value)return;$t.DomEvent.stopPropagation(qe),t.value.dragging.disable();let ge=!0;const Q=fe=>{ge&&(G.resizeFromControlPoint(fe.latlng),ve.forEach((Ce,de)=>{const Xe=G.calculatePointOnCircle(ee[de]);Ce.setLatLng(Xe)}),he.setLatLng(G.getLatLng()),Te.measureDiv&&(Te.measureDiv.innerHTML=ns(G.getRadius(),"m","Rayon")))},ie=()=>{ge=!1,t.value&&(t.value.off("mousemove",Q),document.removeEventListener("mouseup",ie),t.value.dragging.enable(),G.updateProperties(),s.value=null,la(()=>{s.value=G}),pe(G,"Circle"))};t.value.on("mousemove",Q),document.addEventListener("mouseup",ie)})}),he.on("mousedown",X=>{if(!t.value)return;$t.DomEvent.stopPropagation(X),t.value.dragging.disable();let De=!0;const Te=G.getLatLng(),qe=X.latlng,ge=ie=>{if(!De)return;const fe=ie.latlng.lng-qe.lng,Ce=ie.latlng.lat-qe.lat,de=$t.latLng(Te.lat+Ce,Te.lng+fe);$t.Circle.prototype.setLatLng.call(G,de),he.setLatLng(de),ve.forEach((Xe,Ie)=>{const Ye=G.calculatePointOnCircle(ee[Ie]);Xe.setLatLng(Ye)}),he.measureDiv&&(he.measureDiv.innerHTML=[ns(G.getRadius(),"m","Rayon"),ns(G.getRadius()*2,"m","Diamtre"),ns(Math.PI*Math.pow(G.getRadius(),2),"m","Surface")].join("<br>"))},Q=()=>{De=!1,t.value&&(t.value.off("mousemove",ge),document.removeEventListener("mouseup",Q),t.value.dragging.enable(),G.updateProperties(),s.value=null,la(()=>{s.value=G}),pe(G,"Circle"))};t.value.on("mousemove",ge),document.addEventListener("mouseup",Q)}),G.on("circle:resized",()=>{pe(G,"Circle")}),s.value=G},q=G=>{var ge;if(!t.value||!e.value)return;if(!(G instanceof za)){console.warn("La couche n'est pas une instance de Rectangle");return}const se=G;m();const ce=se.getCenter(),he=se.getRotatedCorners(),ve=se.getMidPoints(),ee=x(ce,"#059669");v.push(ee),p(ee,se,()=>{const{width:Q,height:ie}=se.getDimensions(),fe=Q*ie,Ce=se.getRotation();return[ns(Q,"m","Largeur"),ns(ie,"m","Hauteur"),ns(fe,"m","Surface"),`Rotation: ${Ce.toFixed(1)}`].join("<br>")});const X=x($t.latLng(ce.lat+(he[0].lat-ce.lat)*1.2,ce.lng+(he[0].lng-ce.lng)*1.2),"#F97316");v.push(X);const De=$t.polyline([ce,X.getLatLng()],{color:"#F97316",weight:1,opacity:.6,dashArray:"4",pmIgnore:!0});(ge=n.value)==null||ge.addLayer(De);const Te=he.map(Q=>{const ie=x(Q,"#DC2626");return v.push(ie),p(ie,se,()=>{const{width:fe,height:Ce}=se.getDimensions();return[ns(fe,"m","Largeur"),ns(Ce,"m","Hauteur")].join("<br>")}),ie}),qe=ve.map((Q,ie)=>{const fe=x(Q,"#2b6451");return v.push(fe),p(fe,se,()=>{const{width:Ce,height:de}=se.getDimensions(),Xe=ie%2===0?Ce:de;return[ns(Xe,"m","Longueur du ct"),ns(Xe/2,"m","Distance au coin")].join("<br>")}),fe});ee.on("mousedown",Q=>{if(!t.value)return;$t.DomEvent.stopPropagation(Q),t.value.dragging.disable();let ie=!0;const fe=de=>{if(!ie)return;se.moveFromCenter(de.latlng);const Xe=se.getRotatedCorners(),Ie=se.getMidPoints();Te.forEach((Je,Ge)=>Je.setLatLng(Xe[Ge])),qe.forEach((Je,Ge)=>Je.setLatLng(Ie[Ge])),ee.setLatLng(de.latlng);const Ye=$t.latLng(de.latlng.lat+(Xe[0].lat-de.latlng.lat)*1.2,de.latlng.lng+(Xe[0].lng-de.latlng.lng)*1.2);X.setLatLng(Ye),De.setLatLngs([de.latlng,Ye])},Ce=()=>{ie=!1,t.value&&(t.value.off("mousemove",fe),document.removeEventListener("mouseup",Ce),t.value.dragging.enable(),se.updateProperties(),s.value=null,la(()=>{s.value=se}))};t.value.on("mousemove",fe),document.addEventListener("mouseup",Ce)}),X.on("mousedown",Q=>{if(!t.value)return;$t.DomEvent.stopPropagation(Q),t.value.dragging.disable();let ie=!1;const fe=Q.latlng,Ce=se.getRotation(),de=se.getCenter(),Xe=fe.lng-de.lng,Ie=fe.lat-de.lat,Ye=Math.atan2(Ie,Xe)*180/Math.PI;v.forEach(wt=>{wt!==X&&(wt.setStyle({opacity:0,fillOpacity:0}),wt.measureDiv&&(wt.measureDiv.style.display="none"))});const Je=qd(wt=>{ie||(ie=!0);const Ct=wt.latlng.lng-de.lng,Wt=wt.latlng.lat-de.lat;let bn=Math.atan2(Wt,Ct)*180/Math.PI-Ye,Qe=(Ce+bn)%360;Qe<0&&(Qe+=360),se.setRotation(Qe,!1),X.setLatLng(wt.latlng),De.setLatLngs([de,wt.latlng])},16),Ge=()=>{t.value&&(t.value.off("mousemove",Je),document.removeEventListener("mouseup",Ge),t.value.dragging.enable(),ie&&se.finalizeRotation(),s.value=null,la(()=>{s.value=se,m(),q(se)}))};t.value.on("mousemove",Je),document.addEventListener("mouseup",Ge)}),se.on("coordinates:updated",Q=>{const{corners:ie,center:fe}=Q,Ce=se.getMidPoints();Te.forEach((Xe,Ie)=>Xe.setLatLng(ie[Ie])),qe.forEach((Xe,Ie)=>Xe.setLatLng(Ce[Ie])),ee.setLatLng(fe);const de=$t.latLng(fe.lat+(ie[0].lat-fe.lat)*1.2,fe.lng+(ie[0].lng-fe.lng)*1.2);X.setLatLng(de),De.setLatLngs([fe,de])})},I=G=>{if(!t.value||!e.value)return;m();const se=G.getLatLngs();if(!se||se.length===0){console.warn("Pas de points pour la ligne");return}let ce=null;if(G instanceof ta){const he=G.getCenter();ce=x(he,"#059669"),v.push(ce),p(ce,G,()=>{const ve=G.getLength()||0;return ns(ve,"m","Longueur totale")}),ce.on("mousedown",ve=>{if(!t.value)return;$t.DomEvent.stopPropagation(ve),t.value.dragging.disable();let ee=!0;const X=G.getLatLngs().map(Q=>$t.latLng(Q.lat,Q.lng)),De=ve.latlng;G instanceof ta&&(G.off("move:end"),G.off("vertex:moved"),G.off("latlngs:updated"),G.off("properties:updated")),v.forEach((Q,ie)=>{ie>0&&(Q.setStyle({opacity:0,fillOpacity:0}),Q.measureDiv&&(Q.measureDiv.style.display="none"))});const qe=qd(Q=>{if(!ee)return;const ie=Q.latlng.lng-De.lng,fe=Q.latlng.lat-De.lat,Ce=X.map(de=>$t.latLng(de.lat+fe,de.lng+ie));$t.Polyline.prototype.setLatLngs.call(G,Ce),ce==null||ce.setLatLng(Q.latlng)},16),ge=()=>{if(ee=!1,!!t.value){if(t.value.off("mousemove",qe),document.removeEventListener("mouseup",ge),t.value.dragging.enable(),G instanceof ta){const Q=()=>{m(),I(G)};G.on("move:end",Q),G.on("vertex:moved",Q),G.on("latlngs:updated",Q),G.on("properties:updated",Q),G.updateProperties(),pe(G,"Line")}m(),I(G)}};t.value.on("mousemove",qe),document.addEventListener("mouseup",ge)})}if(se.forEach((he,ve)=>{const ee=x(he,"#DC2626");v.push(ee),p(ee,G,()=>{if(G instanceof ta){const X=G.getLength()||0,De=G.getLengthToVertex(ve);return[ns(De,"m","Distance depuis le dbut"),ns(X,"m","Longueur totale")].join("<br>")}return""}),ee.on("mousedown",X=>{if(!t.value)return;$t.DomEvent.stopPropagation(X),t.value.dragging.disable();let De=!0;G instanceof ta&&(G.off("move:end"),G.off("vertex:moved"),G.off("latlngs:updated"),G.off("properties:updated")),v.forEach((ge,Q)=>{Q!==ve+1&&(ge.setStyle({opacity:0,fillOpacity:0}),ge.measureDiv&&(ge.measureDiv.style.display="none"))});const Te=qd(ge=>{if(!De)return;const Q=G.getLatLngs();Q[ve]=ge.latlng,$t.Polyline.prototype.setLatLngs.call(G,Q),ee.setLatLng(ge.latlng)},16),qe=()=>{if(De=!1,!!t.value){if(t.value.off("mousemove",Te),document.removeEventListener("mouseup",qe),t.value.dragging.enable(),G instanceof ta){const ge=()=>{m(),I(G)};G.on("move:end",ge),G.on("vertex:moved",ge),G.on("latlngs:updated",ge),G.on("properties:updated",ge),G.updateProperties(),pe(G,"Line")}m(),I(G)}};t.value.on("mousemove",Te),document.addEventListener("mouseup",qe)})}),se.length>=2)for(let he=0;he<se.length-1;he++){const ve=se[he],ee=se[he+1],X=$t.latLng((ve.lat+ee.lat)/2,(ve.lng+ee.lng)/2),De=x(X,"#2b6451");v.push(De),p(De,G,()=>{if(G instanceof ta){const Te=G.getSegmentLengthAt(he),qe=G.getLength()||0,ge=G.getLengthToVertex(he)+Te/2;return[ns(Te,"m","Longueur du segment"),ns(Te/2,"m","Demi-segment"),ns(ge,"m","Distance depuis le dbut"),ns(qe,"m","Longueur totale")].join("<br>")}return""})}if(G instanceof ta){const he=()=>{m(),I(G)};G.on("move:start",()=>{v.forEach((ve,ee)=>{ee>0&&(ve.setStyle({opacity:0,fillOpacity:0}),ve.measureDiv&&(ve.measureDiv.style.display="none"))})}),G.on("move:end",he),G.on("vertex:moved",he),G.on("latlngs:updated",he),G.on("properties:updated",he),v.cleanup=()=>{G.off("move:start",()=>{}),G.off("move:end",he),G.off("vertex:moved",he),G.off("latlngs:updated",he),G.off("properties:updated",he)}}},B=G=>{if(!t.value||!e.value)return;m();const se=G.getLatLngs()[0],ce=se.map(qe=>[qe.lng,qe.lat]);ce.push(ce[0]);const he=Uu([ce]),ve=Rc(he),ee=se.reduce((qe,ge,Q)=>{const ie=se[(Q+1)%se.length];return qe+ge.distanceTo(ie)},0);let X;if(typeof G.getCenter=="function")try{X=G.getCenter()}catch(qe){console.warn("Erreur lors de la rcupration du centre du polygone via getCenter(), utilisation de la mthode alternative",qe);const ge=Wg(he);X=$t.latLng(ge.geometry.coordinates[1],ge.geometry.coordinates[0])}else{const qe=Wg(he);X=$t.latLng(qe.geometry.coordinates[1],qe.geometry.coordinates[0])}const De=x(X,"#059669");v.push(De),p(De,G,()=>[ns(ee,"m","Primtre"),ns(ve,"m","Surface")].join("<br>")),De.on("mousedown",qe=>{if(!t.value)return;$t.DomEvent.stopPropagation(qe),t.value.dragging.disable();let ge=!0;const Q=qe.latlng,ie=[...se];v.forEach((Xe,Ie)=>{Ie>0&&Xe.setStyle({opacity:0,fillOpacity:0})});const fe=qd(Xe=>{if(!ge)return;const Ie=Xe.latlng.lng-Q.lng,Ye=Xe.latlng.lat-Q.lat,Je=ie.map(Ge=>$t.latLng(Ge.lat+Ye,Ge.lng+Ie));$t.Polygon.prototype.setLatLngs.call(G,[Je]),De.setLatLng(Xe.latlng)},16),Ce=Xe=>{ge&&fe(Xe)},de=()=>{if(ge=!1,!!t.value){if(t.value.off("mousemove",Ce),document.removeEventListener("mouseup",de),t.value.dragging.enable(),G.properties){const Xe=G.getLatLngs()[0],Ie=Xe.map(Je=>[Je.lng,Je.lat]);Ie.push(Ie[0]);const Ye=Uu([Ie]);G.properties.area=Rc(Ye),G.properties.perimeter=Xe.reduce((Je,Ge,wt)=>{const Ct=Xe[(wt+1)%Xe.length];return Je+Ge.distanceTo(Ct)},0),G.properties.surface=G.properties.area}m(),B(G),s.value=null,la(()=>{s.value=G})}};t.value.on("mousemove",Ce),document.addEventListener("mouseup",de)}),se.forEach((qe,ge)=>{const Q=x(qe,"#DC2626");v.push(Q),p(Q,G,()=>{const ie=se[(ge-1+se.length)%se.length],fe=se[(ge+1)%se.length],Ce=qe.distanceTo(ie),de=qe.distanceTo(fe);return[ns(Ce,"m","Distance au point prcdent"),ns(de,"m","Distance au point suivant"),ns(ee,"m","Primtre total"),ns(ve,"m","Surface")].join("<br>")}),Q.on("mousedown",ie=>{if($t.DomEvent.stopPropagation(ie),!t.value)return;t.value.dragging.disable();let fe=!0;De&&(De.setStyle({opacity:0,fillOpacity:0}),De.measureDiv&&(De.measureDiv.style.display="none"));const Ce=qd(Ie=>{if(!fe)return;se[ge]=Ie.latlng,$t.Polygon.prototype.setLatLngs.call(G,[se]),Q.setLatLng(Ie.latlng);const Ye=v.slice(se.length+1),Je=(ge-1+se.length)%se.length,Ge=Ye[Je];if(Ge){const Ct=se[Je],Wt=se[ge],sn=$t.latLng((Ct.lat+Wt.lat)/2,(Ct.lng+Wt.lng)/2);Ge.setLatLng(sn)}const wt=Ye[ge];if(wt){const Ct=se[ge],Wt=se[(ge+1)%se.length],sn=$t.latLng((Ct.lat+Wt.lat)/2,(Ct.lng+Wt.lng)/2);wt.setLatLng(sn)}},16),de=Ie=>{fe&&Ce(Ie)},Xe=()=>{if(fe=!1,!!t.value){if(t.value.off("mousemove",de),document.removeEventListener("mouseup",Xe),t.value.dragging.enable(),G.properties){const Ie=G.getLatLngs()[0].map(Je=>[Je.lng,Je.lat]);Ie.push(Ie[0]);const Ye=Uu([Ie]);G.properties.area=Rc(Ye),G.properties.perimeter=se.reduce((Je,Ge,wt)=>{const Ct=se[(wt+1)%se.length];return Je+Ge.distanceTo(Ct)},0),G.properties.surface=G.properties.area}m(),B(G),s.value=null,la(()=>{s.value=G})}};t.value.on("mousemove",de),document.addEventListener("mouseup",Xe)})}),(()=>{const qe=G.getLatLngs()[0];v.slice(qe.length+1).forEach(Q=>{n.value&&n.value.removeLayer(Q)}),v=v.slice(0,qe.length+1);const ge=new Array(qe.length);for(let Q=0;Q<qe.length;Q++){const ie=qe[Q],fe=qe[(Q+1)%qe.length];ge[Q]=N(ie,fe)}ge.forEach((Q,ie)=>{const fe=x(Q,"#2b6451");v.push(fe),p(fe,G,()=>{const Ce=qe[ie],de=qe[(ie+1)%qe.length],Xe=Ce.distanceTo(de);return[ns(Xe,"m","Longueur du segment"),ns(ee,"m","Primtre total"),ns(ve,"m","Surface")].join("<br>")}),fe.on("mousedown",Ce=>{if(!t.value)return;$t.DomEvent.stopPropagation(Ce),t.value.dragging.disable();let de=!0;const Xe=ie;De&&(De.setStyle({opacity:0,fillOpacity:0}),De.measureDiv&&(De.measureDiv.style.display="none"));const Ie=[...G.getLatLngs()[0]];Ie.splice((Xe+1)%Ie.length,0,Q),G.setLatLngs([Ie]),m(),B(G);const Ye=Xe+1,Je=1+Ye,Ge=Ye<v.length-1?v[Je]:null;if(Ge){const wt=Wt=>{if(!de)return;const sn=G.getLatLngs()[0];sn[Ye]=Wt.latlng,G.setLatLngs([sn]),Ge.setLatLng(Wt.latlng);const bn=v.slice(1+sn.length),Qe=(Ye-1+sn.length)%sn.length,ot=Ye;if(bn[Qe]){const it=sn[Qe],Vt=sn[Ye],Qt=$t.latLng((it.lat+Vt.lat)/2,(it.lng+Vt.lng)/2);bn[Qe].setLatLng(Qt)}if(bn[ot]){const it=sn[Ye],Vt=sn[(Ye+1)%sn.length],Qt=$t.latLng((it.lat+Vt.lat)/2,(it.lng+Vt.lng)/2);bn[ot].setLatLng(Qt)}},Ct=()=>{if(de=!1,!!t.value){if(t.value.off("mousemove",wt),document.removeEventListener("mouseup",Ct),t.value.dragging.enable(),G.properties){const Wt=G.getLatLngs()[0].map(bn=>[bn.lng,bn.lat]);Wt.push(Wt[0]);const sn=Uu([Wt]);G.properties.area=Rc(sn),G.properties.perimeter=G.getLatLngs()[0].reduce((bn,Qe,ot,it)=>{const Vt=it[(ot+1)%it.length];return bn+Qe.distanceTo(Vt)},0)}m(),B(G),s.value=null,la(()=>{s.value=G})}};t.value.on("mousemove",wt),document.addEventListener("mouseup",Ct)}else t.value.dragging.enable(),m(),B(G)})})})()},$=G=>{if(!t.value||!e.value)return;m();const se=G.getLatLng(),ce=x(se,"#059669");v.push(ce),p(ce,G,()=>`Position: ${se.lat.toFixed(6)}, ${se.lng.toFixed(6)}`),ce.on("mousedown",he=>{if(!t.value)return;$t.DomEvent.stopPropagation(he),t.value.dragging.disable(),G.startMoving();let ve=!0;const X=qd(Te=>{ve&&(ce.setLatLng(Te.latlng),G.setLatLng(Te.latlng))},16),De=()=>{t.value&&(t.value.off("mousemove",X),document.removeEventListener("mouseup",De),t.value.dragging.enable(),ve=!1,G.finishMoving(),G.updateProperties(),s.value=null,la(()=>{s.value=G,m(),$(G)}))};t.value.on("mousemove",X),document.addEventListener("mouseup",De)}),s.value=G},R=G=>{if(!(!t.value||!r.value)){console.log("[generateTempControlPoints] Gnration des points temporaires pour",{layerType:G.constructor.name,properties:G.properties}),r.value.clearLayers();try{if(G instanceof za)G.generateHelperPoints(t.value);else if(G instanceof op){if("getLatLng"in G&&typeof G.getLatLng=="function"){const se=G.getLatLng();if(se){const ce=$t.circleMarker(se,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ce)}}}else if(G instanceof kh){const se=G.getLatLng();if(se){const ce=$t.circleMarker(se,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ce)}}else if(G instanceof cd||G instanceof $t.Polygon){let se=[];if("getLatLngs"in G){const he=G.getLatLngs();if(Array.isArray(he)&&he.length>0){const ve=he[0];Array.isArray(ve)?se=ve:ve instanceof $t.LatLng&&(se=he)}}let ce=null;if(G instanceof cd&&typeof G.getCenter=="function")ce=G.getCenter();else if(se.length>0){const he=se.map(X=>[X.lng,X.lat]);he.push(he[0]);const ve=Uu([he]),ee=Wg(ve);ce=$t.latLng(ee.geometry.coordinates[1],ee.geometry.coordinates[0])}if(ce){const he=$t.circleMarker(ce,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(he)}se.forEach(he=>{if(he){const ve=$t.circleMarker(he,{radius:5,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ve)}});for(let he=0;he<se.length;he++){const ve=se[he],ee=se[(he+1)%se.length];if(ve&&ee){const X=$t.latLng((ve.lat+ee.lat)/2,(ve.lng+ee.lng)/2),De=$t.circleMarker(X,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(De)}}}console.log("[generateTempControlPoints] Points temporaires gnrs",{count:r.value.getLayers().length})}catch(se){console.error("[generateTempControlPoints] Erreur lors de la gnration des points temporaires:",se)}}},U=G=>{console.log("Nombre total de couches:",G.length);const se=G.filter(X=>{var qe;if(!X)return!1;let De=0,Te={width:0,height:0};if(X instanceof $t.Circle){De=Math.PI*Math.pow(X.getRadius(),2);const ge=X.getRadius();console.log(`
Forme dtecte: Circle`),console.log(`- Surface propre: ${De.toFixed(2)} m`),console.log(`- Rayon: ${ge.toFixed(2)} m`),console.log("- Angle: Cercle complet (360)")}else if(X instanceof za||X instanceof $t.Rectangle){const ge=X.getBounds(),Q=ge.getSouthWest(),ie=ge.getNorthEast(),fe=Hu([[Q.lng,Q.lat],[ie.lng,Q.lat]]),Ce=Hu([[Q.lng,Q.lat],[Q.lng,ie.lat]]);Te.width=Gd(fe,{units:"meters"}),Te.height=Gd(Ce,{units:"meters"}),De=Te.width*Te.height,console.log(`
Forme dtecte: Rectangle`),console.log(`- Surface propre: ${De.toFixed(2)} m`),console.log(`- Largeur: ${Te.width.toFixed(2)} m`),console.log(`- Hauteur: ${Te.height.toFixed(2)} m`)}else if(((qe=X.properties)==null?void 0:qe.type)==="Semicircle"){const ge=X.getStartAngle(),Q=X.getStopAngle(),ie=(Q-ge+360)%360,fe=X.getRadius();De=Math.PI*Math.pow(fe,2)*ie/360,console.log(`
Forme dtecte: Semicircle`),console.log(`- Surface propre: ${De.toFixed(2)} m`),console.log(`- Rayon: ${fe.toFixed(2)} m`),console.log(`- Angle de dbut: ${ge.toFixed(2)}`),console.log(`- Angle de fin: ${Q.toFixed(2)}`),console.log(`- Angle d'ouverture: ${ie.toFixed(2)}`)}return De>0});if(se.length===0)return 0;const ce=new Set,he=[];for(const X of se)if(!ce.has(X)){const De=J(se,X);De.length>0&&(he.push(De),De.forEach(Te=>ce.add(Te)))}console.log(`
Nombre de groupes de formes connectes: ${he.length}`);const ve=he.map((X,De)=>{console.log(`
Calcul pour le groupe ${De+1} (${X.length} formes):`);const Te=X.map(fe=>{var Ce,de,Xe;try{let Ie;if(fe instanceof $t.Circle){const Ye=fe.getLatLng(),Je=fe.getRadius();Ie=Kj([Ye.lng,Ye.lat],Je/1e3,{units:"kilometers",steps:256});const Ge=Rc(Ie),wt=((Ce=fe.properties)==null?void 0:Ce.surface)||0;return console.log(`
Conversion Cercle -> GeoJSON`),console.log(`- Rayon: ${Je.toFixed(2)}m`),console.log(`- Surface proprit: ${wt.toFixed(2)}m`),console.log(`- Surface GeoJSON: ${Ge.toFixed(2)}m`),Ie}else if(fe instanceof za||fe instanceof $t.Rectangle){const Ye=fe.getBounds(),Je=Ye.getSouthWest(),Ge=Ye.getNorthEast(),wt=$t.latLng(Ge.lat,Je.lng),Ct=$t.latLng(Je.lat,Ge.lng),Wt=[[Je.lng,Je.lat],[Ct.lng,Ct.lat],[Ge.lng,Ge.lat],[wt.lng,wt.lat],[Je.lng,Je.lat]];Ie=Uu([Wt]);const sn=Rc(Ie),bn=Hu([[Je.lng,Je.lat],[Ge.lng,Je.lat]]),Qe=Hu([[Je.lng,Je.lat],[Je.lng,Ge.lat]]),ot=Gd(bn,{units:"meters"}),it=Gd(Qe,{units:"meters"}),Vt=ot*it;return console.log(`
Conversion Rectangle -> GeoJSON`),console.log(`- Largeur: ${ot.toFixed(2)}m`),console.log(`- Hauteur: ${it.toFixed(2)}m`),console.log(`- Surface thorique: ${Vt.toFixed(2)}m`),console.log(`- Surface GeoJSON: ${sn.toFixed(2)}m`),console.log(`- Diffrence: ${Math.abs(Vt-sn).toFixed(2)}m (${(Math.abs(Vt-sn)/Vt*100).toFixed(2)}%)`),Ie}else if(((de=fe.properties)==null?void 0:de.type)==="Semicircle"){const Ye=fe.getCenter(),Je=fe.getRadius(),Ge=fe.getStartAngle(),wt=fe.getStopAngle(),Ct=[],Wt=64;Ct.push([Ye.lng,Ye.lat]);for(let Qe=0;Qe<=Wt;Qe++){const it=(Ge+(wt-Ge+360)%360*Qe/Wt)*Math.PI/180,Vt=Je*Math.cos(it),kn=Je*Math.sin(it)/111319.9,Ln=Vt/(111319.9*Math.cos(Ye.lat*Math.PI/180));Ct.push([Ye.lng+Ln,Ye.lat+kn])}Ct.push([Ye.lng,Ye.lat]),Ie=Uu([Ct]);const sn=Rc(Ie),bn=((Xe=fe.properties)==null?void 0:Xe.surface)||0;return console.log(`
Conversion Semicircle -> GeoJSON`),console.log(`- Rayon: ${Je.toFixed(2)}m`),console.log(`- Surface proprit: ${bn.toFixed(2)}m`),console.log(`- Surface GeoJSON: ${sn.toFixed(2)}m`),console.log(`- Diffrence: ${Math.abs(bn-sn).toFixed(2)}m (${(Math.abs(bn-sn)/bn*100).toFixed(2)}%)`),Ie}return null}catch(Ie){return console.error("[useMapDrawing] Erreur lors de la conversion en GeoJSON:",Ie),null}}).filter(fe=>fe!==null);if(Te.length===0)return 0;const qe=Te.map(fe=>{const Ce=Rc(fe);return console.log(`Surface individuelle: ${Ce.toFixed(2)}m`),Ce});let ge=0;for(let fe=0;fe<Te.length;fe++)for(let Ce=fe+1;Ce<Te.length;Ce++)try{const de=Ij([Te[fe],Te[Ce]]),Xe=mz(de);if(Xe){const Ie=Rc(Xe);ge+=Ie,console.log(`Intersection entre formes ${fe+1} et ${Ce+1}: ${Ie.toFixed(2)}m`)}}catch(de){console.error(`Erreur lors du calcul d'intersection entre les formes ${fe+1} et ${Ce+1}:`,de)}const Q=qe.reduce((fe,Ce)=>fe+Ce,0),ie=Q-ge;return console.log(`
Calcul de la surface d'irrigation pour le groupe ${De+1}:`),console.log(`- Surface totale (somme): ${Q.toFixed(2)}m`),console.log(`- Surface d'intersection: ${ge.toFixed(2)}m`),console.log(`- Surface d'irrigation finale: ${ie.toFixed(2)}m`),ie}),ee=Math.max(...ve);return console.log(`
Surface d'irrigation maximale parmi les groupes: ${ee.toFixed(2)}m`),ee},V=()=>{a.value&&(t.value.removeLayer(a.value),a.value=null)},re=(G,se)=>{if(!t.value)return;V();const ce=se?J(G,se):G;if(a.value||(a.value=$t.layerGroup().addTo(t.value)),ce.forEach(he=>{var ee;const ve=(ee=he.properties)==null?void 0:ee.type;if(ve==="Circle"||ve==="Semicircle"){const X=he.getLatLng(),De=he.getRadius(),Te=$t.circle(X,{radius:De,fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:$t.canvas({padding:.5})}),qe=$t.circle(X,{radius:De,fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:$t.canvas({padding:.5})});a.value&&(a.value.addLayer(qe),a.value.addLayer(Te))}else if(ve==="Rectangle"||ve==="Polygon"){const X=he.getLatLngs(),De=$t.polygon(X,{fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:$t.canvas({padding:.5})}),Te=$t.polygon(X,{fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:$t.canvas({padding:.5})});a.value&&(a.value.addLayer(Te),a.value.addLayer(De))}}),se&&ce.length>1&&t.value){const he=$t.latLngBounds([]);ce.forEach(X=>{X.getBounds?he.extend(X.getBounds()):X.getLatLng&&he.extend(X.getLatLng())});const ve=he.getCenter(),ee=$t.tooltip({permanent:!0,direction:"center",className:"connected-group-tooltip"}).setContent("<div>Groupe connect</div>").setLatLng(ve);a.value&&a.value.addLayer($t.marker(ve,{opacity:0,interactive:!1}).bindTooltip(ee).openTooltip())}},J=(G,se)=>{if(!se)return[];const ce=new Set,he=[se],ve=[se];for(se._leaflet_id!==void 0&&ce.add(se._leaflet_id);he.length>0;){const ee=he.shift();for(const X of G){if(X===ee||ce.has(X._leaflet_id))continue;_e(ee,X)&&(ve.push(X),he.push(X),ce.add(X._leaflet_id))}}return ve},_e=(G,se)=>{let ce=null,he=null;if(G.getBounds&&typeof G.getBounds=="function")ce=G.getBounds();else if(G.getLatLng&&G.getRadius){const ve=G.getLatLng(),ee=G.getRadius();ce=$t.latLngBounds([ve.lat-ee/111e3,ve.lng-ee/(111e3*Math.cos(ve.lat*Math.PI/180))],[ve.lat+ee/111e3,ve.lng+ee/(111e3*Math.cos(ve.lat*Math.PI/180))])}if(se.getBounds&&typeof se.getBounds=="function")he=se.getBounds();else if(se.getLatLng&&se.getRadius){const ve=se.getLatLng(),ee=se.getRadius();he=$t.latLngBounds([ve.lat-ee/111e3,ve.lng-ee/(111e3*Math.cos(ve.lat*Math.PI/180))],[ve.lat+ee/111e3,ve.lng+ee/(111e3*Math.cos(ve.lat*Math.PI/180))])}return!(!ce||!he||!ce.intersects(he))},Le=(G,se)=>{var he;const ce=J(G,se);return ce.length===1&&(he=se.properties)!=null&&he.surface?se.properties.surface:U(ce)},Oe=G=>{var he,ve,ee,X,De,Te,qe,ge,Q;const se=G.layer;(he=e.value)==null||he.addLayer(se);let ce="unknown";if(se instanceof $t.Circle?ce=i.value==="Semicircle"?"Semicircle":"Circle":se instanceof $t.Rectangle?ce="Rectangle":se instanceof $t.Polygon?ce="Polygon":se instanceof $t.Polyline&&!(se instanceof $t.Polygon)&&(ce="Line"),se.properties=E(se,ce),se.properties||(se.properties={}),se.properties.category||(se.properties.category="forages"),se.properties.accessLevel||(se.properties.accessLevel="visitor"),se._dbId=Date.now()+Math.floor(Math.random()*1e3),s.value=se,console.log("[useMapDrawing] Input layer:",{type:ce,instanceof:{Circle:se instanceof $t.Circle,Rectangle:se instanceof $t.Rectangle,Polygon:se instanceof $t.Polygon,Polyline:se instanceof $t.Polyline},options:se.options,properties:se.properties,_dbId:se._dbId}),window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:se,type:ce,properties:se.properties}})),se.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:ce,isSelected:s.value===se}),(!s.value||s.value!==se)&&R(se)}),se.on("mouseout",()=>{var ie;console.log("[mouseout] Sortie de la forme",{type:ce,isSelected:s.value===se}),(!s.value||s.value!==se)&&((ie=r.value)==null||ie.clearLayers())}),ce==="Semicircle")console.log("Conversion en demi-cercle dsactive selon les exigences");else if(ce==="Circle"){(ve=e.value)==null||ve.removeLayer(se);const ie=new op(se.getLatLng(),{radius:se.getRadius(),...se.options});ie.properties={...E(ie,"Circle"),type:"Circle"},Object.defineProperty(ie,"name",{value:ie.properties.name,writable:!0,enumerable:!0,configurable:!0}),console.log("[useMapDrawing] Cration du cercle personnalis:",{propertyDescriptor:Object.getOwnPropertyDescriptor(ie,"name"),directName:ie.name,propertiesName:ie.properties.name,nameIsEnumerable:Object.keys(ie).includes("name"),allProperties:Object.keys(ie.properties),allKeys:Object.keys(ie)}),(ee=e.value)==null||ee.addLayer(ie),s.value=ie,j(ie)}else if(ce==="Rectangle"){(X=e.value)==null||X.removeLayer(se);const ie=new za(se.getBounds(),{...se.options});ie.updateProperties(),(De=e.value)==null||De.addLayer(ie),s.value=ie,q(ie)}else if(se instanceof $t.Polygon){const ie=se.getLatLngs()[0],fe=new cd([ie],{...se.options});fe.updateProperties(),(Te=e.value)==null||Te.removeLayer(se),(qe=e.value)==null||qe.addLayer(fe),s.value=fe,B(fe)}else if(se instanceof ta)I(se);else if(se instanceof $t.Polyline&&!(se instanceof $t.Polygon)){const ie=se.getLatLngs(),fe=new ta(ie,{...se.options});fe.updateProperties(),(ge=e.value)==null||ge.removeLayer(se),(Q=e.value)==null||Q.addLayer(fe),s.value=fe,I(fe)}Ul("Cliquez sur la forme pour afficher les points de contrle")},Z=()=>{t.value&&(t.value.off("pm:create"),t.value.on("pm:create",Oe))};return{map:t,featureGroup:e,controlPointsGroup:n,tempControlPointsGroup:r,currentTool:i,selectedShape:s,isDrawing:o,initMap:A,setDrawingTool:z,updateShapeStyle:K,updateShapeProperties:ne,updateTextFixedSize:M,adjustView:O,clearActiveControlPoints:m,calculateTotalCoverageArea:U,showCoverageOverlay:re,hideCoverageOverlay:V,calculateConnectedCoverageArea:Le,getConnectedShapes:J}}function jU(){const{isEnabled:t,startMeasure:e}=Vp(),n=xt(null),r=xt(""),i=xt("Hybride"),s=xt(null),o=e("createBaseMaps","useMapState"),a={Hybride:$t.layerGroup([$t.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:19,tileSize:256,zoomOffset:0,bounds:$t.latLngBounds($t.latLng(41.333,-5.566),$t.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,opacity:.6}),$t.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:" Esri",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:20,tileSize:256,zoomOffset:0,bounds:$t.latLngBounds($t.latLng(41.333,-5.566),$t.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,opacity:.6})]),Cadastre:$t.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte  IGN/Geoportail",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:18,tileSize:256,zoomOffset:0,bounds:$t.latLngBounds($t.latLng(41.333,-5.566),$t.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0}),IGN:$t.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Carte IGN  IGN/Geoportail",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:18,tileSize:256,zoomOffset:0,bounds:$t.latLngBounds($t.latLng(41.333,-5.566),$t.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0})};o();const l=gn.createPerformanceTracker(v=>{gn.measure("initMap:setOptions",()=>{n.value=v,v.options.zoomSnap=.25,v.options.zoomDelta=.25,v.options.wheelPxPerZoomLevel=100,v.options.zoomAnimation=!0,v.options.fadeAnimation=!0,v.options.markerZoomAnimation=!0,v.options.minZoom=2,v.options.maxZoom=19,v.options.scrollWheelZoom=!0,v.options.doubleClickZoom=!0;const m=$t.latLngBounds($t.latLng(-90,-180),$t.latLng(90,180));v.setMaxBounds(m),v.options.maxBoundsViscosity=1,v.options.trackResize=!0;let x=null;v.getZoom(),v.on("zoomstart",()=>{v.getZoom(),v.options.zoomAnimation=!1,v.options.markerZoomAnimation=!1}),v.on("zoomend",()=>{x&&clearTimeout(x),x=setTimeout(()=>{setTimeout(()=>{v.options.zoomAnimation=!0,v.options.markerZoomAnimation=!0,v.invalidateSize({animate:!1,pan:!1});const M=v.getBounds(),A=v.options.maxBounds;A&&!M.intersects(A)&&v.panInsideBounds(A,{animate:!1})},250)},250)});const E=v._zoomAnimation;E&&(v._zoomAnimation=function(M){try{this._animatingZoom||E.call(this,M)}catch{console.warn("Animation de zoom interrompue, restauration de la vue..."),this._resetView(this.getCenter(),this.getZoom())}})},"useMapState"),gn.measure("initMap:addInitialLayer",()=>{v&&v.whenReady(()=>{const m=i.value;if(a[m]){if(console.log(`Initialisation de la couche de base: ${m}`),s.value&&v.hasLayer(s.value))try{v.removeLayer(s.value),console.log("Couche active prcdente supprime")}catch(x){console.warn("Erreur lors de la suppression de la couche active prcdente:",x)}s.value=a[m];try{s.value.addTo(v),console.log(`Couche ${m} ajoute  la carte`)}catch(x){console.error(`Erreur lors de l'ajout de la couche ${m}:`,x)}}else console.warn(`Couche de base non disponible: ${m}`)})},"useMapState"),v.on("baselayerchange",m=>{const x=e("baselayerchange","useMapState",{layer:m.name});i.value=m.name,s.value=m.layer,x()}),t.value&&(v.on("movestart",()=>{e("mapMove","useMapState",{startCenter:v.getCenter()})}),v.on("moveend",()=>{e("mapMoveEnd","useMapState",{endCenter:v.getCenter()})()}),v.on("tileloadstart",()=>{e("tileLoad","useMapState")}),v.on("tileload",()=>{e("tileLoadEnd","useMapState")()}))},"initMap","useMapState"),c=gn.createAsyncPerformanceTracker(async v=>{if(!n.value||!a[v]){console.warn(`Impossible de changer la carte de base: ${n.value?"type de carte non disponible":"carte non initialise"}`);return}try{if(i.value===v)return;console.log(`Changement de carte: ${i.value} -> ${v}`);const m=n.value,x=m.getCenter(),E=m.getZoom();m.options.zoomAnimation=!1,m.options.fadeAnimation=!1,m.options.markerZoomAnimation=!1;const M=a[v];if(s.value&&m.hasLayer(s.value))try{m.removeLayer(s.value),console.log(`Couche prcdente ${i.value} supprime`)}catch(A){console.warn("Erreur lors de la suppression de la couche active:",A)}try{M instanceof $t.LayerGroup,M.addTo(m),console.log(`Nouvelle couche ${v} ajoute`)}catch(A){console.error("Erreur lors de l'ajout de la nouvelle couche:",A);try{m.hasLayer(M)&&m.removeLayer(M),M.addTo(m),console.log(`Rcupration: couche ${v} rajoute`)}catch(O){throw console.error("chec de la rcupration:",O),new Error("Impossible d'ajouter la nouvelle couche")}}s.value=M,i.value=v;try{m.setView(x,E,{animate:!1,duration:0,noMoveStart:!0}),console.log(`Vue rinitialise: centre=${x}, zoom=${E}`)}catch(A){console.warn("Erreur lors de la rinitialisation de la vue:",A)}try{m.invalidateSize({animate:!1,pan:!1})}catch(A){console.warn("Erreur lors du rafrachissement de la carte:",A)}setTimeout(()=>{m.options.zoomAnimation=!0,m.options.fadeAnimation=!0,m.options.markerZoomAnimation=!0,console.log("Animations restaures")},500)}catch(m){if(console.error("Erreur lors du changement de carte de base:",m),n.value)try{const x=n.value;x.eachLayer(M=>{(M instanceof $t.TileLayer||M instanceof $t.LayerGroup)&&x.removeLayer(M)});const E=a[v];E.addTo(x),s.value=E,i.value=v,x.options.zoomAnimation=!0,x.options.fadeAnimation=!0,x.options.markerZoomAnimation=!0,x.invalidateSize({animate:!1,pan:!1}),console.log("Rcupration effectue aprs erreur")}catch(x){console.error("Erreur lors de la rcupration aprs chec:",x)}}},"changeBaseMap","useMapState"),d=gn.createAsyncPerformanceTracker(async()=>{if(!(!n.value||!r.value))try{const v=await gn.measureAsync("searchLocation:fetchData",async()=>await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r.value)}`),"useMapState"),m=await gn.measureAsync("searchLocation:parseResponse",async()=>await v.json(),"useMapState");m&&m.length>0&&gn.measure("searchLocation:updateView",()=>{const{lat:x,lon:E}=m[0];n.value.setView([x,E],13,{animate:i.value!=="Cadastre"})},"useMapState")}catch(v){console.error("Erreur lors de la recherche de localisation:",v)}},"searchLocation","useMapState");return{map:n,searchQuery:r,currentBaseMap:i,baseMaps:a,initMap:l,searchLocation:d,changeBaseMap:c,cleanup:()=>{const v=e("cleanup","useMapState");n.value&&(n.value.remove(),n.value=null),s.value&&(s.value=null),v()},isPerformanceEnabled:t}}const zU={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3001] overflow-y-auto"},$U={class:"bg-white w-full h-full md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 relative overflow-y-auto"},VU={class:"p-4 md:p-6 pt-0 overflow-y-auto max-h-[calc(100vh-80px)] md:max-h-[calc(90vh-80px)]"},UU={key:0,class:"mb-4"},HU={key:0,class:"animate-pulse"},WU=["value"],GU={key:1,class:"mb-4"},qU={key:0,class:"animate-pulse"},YU=["disabled"],KU={value:null},ZU=["value"],XU={key:2,class:"mb-4"},JU={key:0,class:"animate-pulse"},QU=["disabled"],eH={value:null},tH=["value"],nH={class:"mb-4"},rH={class:"mb-6"},iH={class:"flex justify-end space-x-3"},sH=["disabled"],oH={key:0},aH={key:1},FE=Fs({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","salarieSelected","visiteurSelected"],setup(t,{expose:e,emit:n}){function r($){return $?typeof $=="object"?$.id:$:null}function i($){if($===null)throw new Error("Invalid ID");return $}const s=t,o=n,a=da(),l=Vy(),c=Tp(),d=xt(!1),p=xt(null),v=xt([]),m=xt([]),x=xt([]),E=xt(null),M=xt(null),A=xt(!1),O=xt(!1),z=xt(!1),K=xt({nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),ne=Kn(()=>{var $,R,U;return(($=a.user)==null?void 0:$.user_type)==="admin"?K.value.nom.trim()&&K.value.entreprise&&K.value.salarie:((R=a.user)==null?void 0:R.user_type)==="entreprise"?K.value.nom.trim()&&K.value.salarie:(((U=a.user)==null?void 0:U.user_type)==="salarie",K.value.nom.trim())});Di(()=>K.value.entreprise,async $=>{if(!s.modelValue)return;K.value.salarie=null,K.value.visiteur=null,m.value=[];const R=r($);console.log("[NewPlanModal] Entreprise slectionne:",R),R?await me(R):v.value=[]}),Di(()=>K.value.salarie,async $=>{if(!s.modelValue)return;K.value.visiteur=null;const R=r($);R?await pe(R):m.value=[]}),Di(()=>s.modelValue,$=>{var R,U,V;$?((R=a.user)==null?void 0:R.user_type)==="admin"?I():((U=a.user)==null?void 0:U.user_type)==="entreprise"?me(a.user.id):((V=a.user)==null?void 0:V.user_type)==="salarie"&&pe(a.user.id):(K.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},E.value=null,M.value=null,m.value=[],v.value=[],x.value=[],p.value=null)});async function me($){A.value=!0;try{console.log("[NewPlanModal] Chargement des salaries pour entreprise:",$);const R=await Pl.getUsers({role:"SALARIE",entreprise:$});console.log("[NewPlanModal] Rponse salaries:",R.data),v.value=R.data}catch(R){console.error("[NewPlanModal] Error loading salaries:",R),v.value=[]}finally{A.value=!1}}async function pe($){O.value=!0;try{const R=await Pl.getUsers({role:"VISITEUR",salarie:$});m.value=R.data}catch(R){console.error("[NewPlanModal] Error loading visiteurs:",R),m.value=[]}finally{O.value=!1}}async function N($){s.modelValue&&(E.value=$,K.value.salarie=$.id,await pe($.id),o("salarieSelected",$))}function j($){s.modelValue&&(M.value=$,K.value.visiteur=$.id,o("visiteurSelected",$))}function q(){o("update:modelValue",!1),K.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},E.value=null,M.value=null,m.value=[],p.value=null}async function I(){z.value=!0;try{const $=await a.fetchEnterprises();x.value=$}catch($){console.error("[NewPlanModal] Error loading entreprises:",$),x.value=[]}finally{z.value=!1}}async function B(){var $,R;p.value=null,d.value=!0;try{const U={nom:K.value.nom.trim(),description:K.value.description.trim()},V=a.user;if(!V)throw new Error("User not found");if(V.user_type==="admin"){if(!K.value.entreprise||!K.value.salarie)throw new Error("Missing required fields");U.entreprise=i(r(K.value.entreprise)),U.salarie=i(r(K.value.salarie)),K.value.visiteur&&(U.visiteur=K.value.visiteur)}else if(V.user_type==="entreprise"){if(!K.value.salarie)throw new Error("Missing required fields");U.entreprise=V.id,U.salarie=i(r(K.value.salarie)),K.value.visiteur&&(U.visiteur=K.value.visiteur)}else if(V.user_type==="salarie"){if(!V.entreprise)throw new Error("Missing required fields");U.entreprise=V.entreprise.id,U.salarie=V.id,K.value.visiteur&&(U.visiteur=K.value.visiteur)}else if(V.user_type==="visiteur"){if(!V.entreprise||!V.salarie)throw new Error("Missing required fields");U.entreprise=V.entreprise.id,U.salarie=V.salarie.id,U.visiteur=V.id}console.log("Donnes du plan  crer:",U),l.clearCurrentPlan(),c.setCurrentPlan(null);const re=await l.createPlan(U);o("created",re.id),q()}catch(U){console.error("[NewPlanModal] Error creating plan:",U),console.error("Response data:",($=U.response)==null?void 0:$.data);let V="Une erreur est survenue lors de la cration du plan";(R=U.response)!=null&&R.data&&(typeof U.response.data=="object"?V=Object.entries(U.response.data).map(([re,J])=>Array.isArray(J)?`${re}: ${J.join(", ")}`:`${re}: ${J}`).join(`
`):typeof U.response.data=="string"&&(V=U.response.data)),p.value=V}finally{d.value=!1}}return e({salaries:v,visiteurs:m,selectedSalarie:E,selectedVisiteur:M,loadSalaries:me,loadVisiteurs:pe,selectSalarie:N,selectVisiteur:j}),($,R)=>{var U,V,re,J;return $.modelValue?(Re(),$e("div",zU,[C("div",$U,[C("div",{class:"flex justify-between items-center mb-4 sticky top-0 bg-white p-4 md:p-6 pb-4 border-b z-10"},[R[6]||(R[6]=C("h2",{class:"text-xl font-semibold text-gray-900"},"Crer un nouveau plan",-1)),C("button",{onClick:q,class:"text-gray-400 hover:text-gray-500"},R[5]||(R[5]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",VU,[er(a).isAdmin?(Re(),$e("div",UU,[R[9]||(R[9]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Entreprise",-1)),z.value?(Re(),$e("div",HU,R[7]||(R[7]=[C("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Pn((Re(),$e("select",{key:1,"onUpdate:modelValue":R[0]||(R[0]=_e=>K.value.entreprise=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[R[8]||(R[8]=C("option",{value:null},"Slectionnez une entreprise",-1)),(Re(!0),$e(Cn,null,pr(x.value,_e=>(Re(),$e("option",{key:_e.id,value:_e.id},Tt(er(xu)(_e)),9,WU))),128))],512)),[[is,K.value.entreprise]])])):rn("",!0),((U=er(a).user)==null?void 0:U.user_type)==="admin"||((V=er(a).user)==null?void 0:V.user_type)==="entreprise"?(Re(),$e("div",GU,[R[11]||(R[11]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salarie",-1)),A.value?(Re(),$e("div",qU,R[10]||(R[10]=[C("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Pn((Re(),$e("select",{key:1,id:"edit-salarie","onUpdate:modelValue":R[1]||(R[1]=_e=>K.value.salarie=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:er(a).isAdmin&&!K.value.entreprise},[C("option",KU,Tt(v.value.length?"Slectionnez un salarie":"Aucun salarie disponible"),1),(Re(!0),$e(Cn,null,pr(v.value,_e=>(Re(),$e("option",{key:_e.id,value:_e.id},Tt(er(xu)(_e)),9,ZU))),128))],8,YU)),[[is,K.value.salarie]])])):rn("",!0),((re=er(a).user)==null?void 0:re.user_type)!=="visiteur"?(Re(),$e("div",XU,[R[13]||(R[13]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visiteur",-1)),O.value?(Re(),$e("div",JU,R[12]||(R[12]=[C("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Pn((Re(),$e("select",{key:1,id:"edit-visiteur","onUpdate:modelValue":R[2]||(R[2]=_e=>K.value.visiteur=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!m.value.length||((J=er(a).user)==null?void 0:J.user_type)!=="salarie"&&!K.value.salarie},[C("option",eH,Tt(m.value.length?"Slectionnez un visiteur":"Aucun visiteur disponible"),1),(Re(!0),$e(Cn,null,pr(m.value,_e=>(Re(),$e("option",{key:_e.id,value:_e.id},Tt(er(xu)(_e)),9,tH))),128))],8,QU)),[[is,K.value.visiteur]])])):rn("",!0),C("div",nH,[R[14]||(R[14]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),Pn(C("input",{id:"edit-nom","onUpdate:modelValue":R[3]||(R[3]=_e=>K.value.nom=_e),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[Rr,K.value.nom]])]),C("div",rH,[R[15]||(R[15]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),Pn(C("textarea",{id:"edit-description","onUpdate:modelValue":R[4]||(R[4]=_e=>K.value.description=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[Rr,K.value.description]])]),C("div",iH,[C("button",{onClick:q,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),C("button",{onClick:B,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!ne.value||d.value},[d.value?(Re(),$e("span",oH,"Cration en cours...")):(Re(),$e("span",aH,"Crer"))],8,sH)])])])])):rn("",!0)}}});function hs(t){"@babel/helpers - typeof";return hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hs(t)}var ul=Uint8Array,Lu=Uint16Array,V_=Int32Array,Uy=new ul([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Hy=new ul([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Cb=new ul([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),jE=function(t,e){for(var n=new Lu(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new V_(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},zE=jE(Uy,2),$E=zE.b,Eb=zE.r;$E[28]=258,Eb[258]=28;var VE=jE(Hy,0),lH=VE.b,y5=VE.r,Pb=new Lu(32768);for(var Is=0;Is<32768;++Is){var Jh=(Is&43690)>>1|(Is&21845)<<1;Jh=(Jh&52428)>>2|(Jh&13107)<<2,Jh=(Jh&61680)>>4|(Jh&3855)<<4,Pb[Is]=((Jh&65280)>>8|(Jh&255)<<8)>>1}var Xc=function(t,e,n){for(var r=t.length,i=0,s=new Lu(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new Lu(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new Lu(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],d=e-t[i],p=o[t[i]-1]++<<d,v=p|(1<<d)-1;p<=v;++p)a[Pb[p]>>l]=c}else for(a=new Lu(r),i=0;i<r;++i)t[i]&&(a[i]=Pb[o[t[i]-1]++]>>15-t[i]);return a},Cd=new ul(288);for(var Is=0;Is<144;++Is)Cd[Is]=8;for(var Is=144;Is<256;++Is)Cd[Is]=9;for(var Is=256;Is<280;++Is)Cd[Is]=7;for(var Is=280;Is<288;++Is)Cd[Is]=8;var ym=new ul(32);for(var Is=0;Is<32;++Is)ym[Is]=5;var uH=Xc(Cd,9,0),cH=Xc(Cd,9,1),hH=Xc(ym,5,0),dH=Xc(ym,5,1),t2=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},cc=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},n2=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},U_=function(t){return(t+7)/8|0},UE=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new ul(t.subarray(e,n))},fH=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],gc=function(t,e,n){var r=new Error(e||fH[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,gc),!n)throw r;return r},pH=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new ul(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new ul(i*3));var c=function(Te){var qe=n.length;if(Te>qe){var ge=new ul(Math.max(qe*2,Te));ge.set(n),n=ge}},d=e.f||0,p=e.p||0,v=e.b||0,m=e.l,x=e.d,E=e.m,M=e.n,A=i*8;do{if(!m){d=cc(t,p,1);var O=cc(t,p+1,3);if(p+=3,O)if(O==1)m=cH,x=dH,E=9,M=5;else if(O==2){var me=cc(t,p,31)+257,pe=cc(t,p+10,15)+4,N=me+cc(t,p+5,31)+1;p+=14;for(var j=new ul(N),q=new ul(19),I=0;I<pe;++I)q[Cb[I]]=cc(t,p+I*3,7);p+=pe*3;for(var B=t2(q),$=(1<<B)-1,R=Xc(q,B,1),I=0;I<N;){var U=R[cc(t,p,$)];p+=U&15;var z=U>>4;if(z<16)j[I++]=z;else{var V=0,re=0;for(z==16?(re=3+cc(t,p,3),p+=2,V=j[I-1]):z==17?(re=3+cc(t,p,7),p+=3):z==18&&(re=11+cc(t,p,127),p+=7);re--;)j[I++]=V}}var J=j.subarray(0,me),_e=j.subarray(me);E=t2(J),M=t2(_e),m=Xc(J,E,1),x=Xc(_e,M,1)}else gc(1);else{var z=U_(p)+4,K=t[z-4]|t[z-3]<<8,ne=z+K;if(ne>i){l&&gc(0);break}a&&c(v+K),n.set(t.subarray(z,ne),v),e.b=v+=K,e.p=p=ne*8,e.f=d;continue}if(p>A){l&&gc(0);break}}a&&c(v+131072);for(var Le=(1<<E)-1,Oe=(1<<M)-1,Z=p;;Z=p){var V=m[n2(t,p)&Le],G=V>>4;if(p+=V&15,p>A){l&&gc(0);break}if(V||gc(2),G<256)n[v++]=G;else if(G==256){Z=p,m=null;break}else{var se=G-254;if(G>264){var I=G-257,ce=Uy[I];se=cc(t,p,(1<<ce)-1)+$E[I],p+=ce}var he=x[n2(t,p)&Oe],ve=he>>4;he||gc(3),p+=he&15;var _e=lH[ve];if(ve>3){var ce=Hy[ve];_e+=n2(t,p)&(1<<ce)-1,p+=ce}if(p>A){l&&gc(0);break}a&&c(v+131072);var ee=v+se;if(v<_e){var X=s-_e,De=Math.min(_e,ee);for(X+v<0&&gc(3);v<De;++v)n[v]=r[X+v]}for(;v<ee;++v)n[v]=n[v-_e]}}e.l=m,e.p=Z,e.b=v,e.f=d,m&&(d=1,e.m=E,e.d=x,e.n=M)}while(!d);return v!=n.length&&o?UE(n,0,v):n.subarray(0,v)},bh=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},sg=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},r2=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:WE,l:0};if(i==1){var o=new ul(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(ne,me){return ne.f-me.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,d=1,p=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=i-1;)a=n[n[c].f<n[p].f?c++:p++],l=n[c!=d&&n[c].f<n[p].f?c++:p++],n[d++]={s:-1,f:a.f+l.f,l:a,r:l};for(var v=s[0].s,r=1;r<i;++r)s[r].s>v&&(v=s[r].s);var m=new Lu(v+1),x=Mb(n[d-1],m,0);if(x>e){var r=0,E=0,M=x-e,A=1<<M;for(s.sort(function(me,pe){return m[pe.s]-m[me.s]||me.f-pe.f});r<i;++r){var O=s[r].s;if(m[O]>e)E+=A-(1<<x-m[O]),m[O]=e;else break}for(E>>=M;E>0;){var z=s[r].s;m[z]<e?E-=1<<e-m[z]++-1:++r}for(;r>=0&&E;--r){var K=s[r].s;m[K]==e&&(--m[K],++E)}x=e}return{t:new ul(m),l:x}},Mb=function(t,e,n){return t.s==-1?Math.max(Mb(t.l,e,n+1),Mb(t.r,e,n+1)):e[t.s]=n},b5=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Lu(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},og=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},HE=function(t,e,n){var r=n.length,i=U_(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},_5=function(t,e,n,r,i,s,o,a,l,c,d){bh(e,d++,n),++i[256];for(var p=r2(i,15),v=p.t,m=p.l,x=r2(s,15),E=x.t,M=x.l,A=b5(v),O=A.c,z=A.n,K=b5(E),ne=K.c,me=K.n,pe=new Lu(19),N=0;N<O.length;++N)++pe[O[N]&31];for(var N=0;N<ne.length;++N)++pe[ne[N]&31];for(var j=r2(pe,7),q=j.t,I=j.l,B=19;B>4&&!q[Cb[B-1]];--B);var $=c+5<<3,R=og(i,Cd)+og(s,ym)+o,U=og(i,v)+og(s,E)+o+14+3*B+og(pe,q)+2*pe[16]+3*pe[17]+7*pe[18];if(l>=0&&$<=R&&$<=U)return HE(e,d,t.subarray(l,l+c));var V,re,J,_e;if(bh(e,d,1+(U<R)),d+=2,U<R){V=Xc(v,m,0),re=v,J=Xc(E,M,0),_e=E;var Le=Xc(q,I,0);bh(e,d,z-257),bh(e,d+5,me-1),bh(e,d+10,B-4),d+=14;for(var N=0;N<B;++N)bh(e,d+3*N,q[Cb[N]]);d+=3*B;for(var Oe=[O,ne],Z=0;Z<2;++Z)for(var G=Oe[Z],N=0;N<G.length;++N){var se=G[N]&31;bh(e,d,Le[se]),d+=q[se],se>15&&(bh(e,d,G[N]>>5&127),d+=G[N]>>12)}}else V=uH,re=Cd,J=hH,_e=ym;for(var N=0;N<a;++N){var ce=r[N];if(ce>255){var se=ce>>18&31;sg(e,d,V[se+257]),d+=re[se+257],se>7&&(bh(e,d,ce>>23&31),d+=Uy[se]);var he=ce&31;sg(e,d,J[he]),d+=_e[he],he>3&&(sg(e,d,ce>>5&8191),d+=Hy[he])}else sg(e,d,V[ce]),d+=re[ce]}return sg(e,d,V[256]),d+re[256]},gH=new V_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),WE=new ul(0),mH=function(t,e,n,r,i,s){var o=s.z||t.length,a=new ul(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,d=(s.r||0)&7;if(e){d&&(l[0]=s.r>>3);for(var p=gH[e-1],v=p>>13,m=p&8191,x=(1<<n)-1,E=s.p||new Lu(32768),M=s.h||new Lu(x+1),A=Math.ceil(n/3),O=2*A,z=function(Q){return(t[Q]^t[Q+1]<<A^t[Q+2]<<O)&x},K=new V_(25e3),ne=new Lu(288),me=new Lu(32),pe=0,N=0,j=s.i||0,q=0,I=s.w||0,B=0;j+2<o;++j){var $=z(j),R=j&32767,U=M[$];if(E[R]=U,M[$]=R,I<=j){var V=o-j;if((pe>7e3||q>24576)&&(V>423||!c)){d=_5(t,l,0,K,ne,me,N,q,B,j-B,d),q=pe=N=0,B=j;for(var re=0;re<286;++re)ne[re]=0;for(var re=0;re<30;++re)me[re]=0}var J=2,_e=0,Le=m,Oe=R-U&32767;if(V>2&&$==z(j-Oe))for(var Z=Math.min(v,V)-1,G=Math.min(32767,j),se=Math.min(258,V);Oe<=G&&--Le&&R!=U;){if(t[j+J]==t[j+J-Oe]){for(var ce=0;ce<se&&t[j+ce]==t[j+ce-Oe];++ce);if(ce>J){if(J=ce,_e=Oe,ce>Z)break;for(var he=Math.min(Oe,ce-2),ve=0,re=0;re<he;++re){var ee=j-Oe+re&32767,X=E[ee],De=ee-X&32767;De>ve&&(ve=De,U=ee)}}}R=U,U=E[R],Oe+=R-U&32767}if(_e){K[q++]=268435456|Eb[J]<<18|y5[_e];var Te=Eb[J]&31,qe=y5[_e]&31;N+=Uy[Te]+Hy[qe],++ne[257+Te],++me[qe],I=j+J,++pe}else K[q++]=t[j],++ne[t[j]]}}for(j=Math.max(j,I);j<o;++j)K[q++]=t[j],++ne[t[j]];d=_5(t,l,c,K,ne,me,N,q,B,j-B,d),c||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=M,s.p=E,s.i=j,s.w=I)}else{for(var j=s.w||0;j<o+c;j+=65535){var ge=j+65535;ge>=o&&(l[d/8|0]=c,ge=o),d=HE(l,d+1,t.subarray(j,ge))}s.i=o}return UE(a,0,r+U_(d)+i)},GE=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},vH=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new ul(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return mH(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},qE=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},yH=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=GE();i.p(e.dictionary),qE(t,2,i.d())}},bH=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&gc(6,"invalid zlib data"),(t[1]>>5&1)==1&&gc(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function kb(t,e){e||(e={});var n=GE();n.p(t);var r=vH(t,e,e.dictionary?6:2,4);return yH(r,e),qE(r,r.length-4,n.d()),r}function _H(t,e){return pH(t.subarray(bH(t),-4),{i:2},e,e)}var wH=typeof TextDecoder<"u"&&new TextDecoder,xH=0;try{wH.decode(WE,{stream:!0}),xH=1}catch{}var Nr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function i2(){Nr.console&&typeof Nr.console.log=="function"&&Nr.console.log.apply(Nr.console,arguments)}var Ls={log:i2,warn:function(t){Nr.console&&(typeof Nr.console.warn=="function"?Nr.console.warn.apply(Nr.console,arguments):i2.call(null,arguments))},error:function(t){Nr.console&&(typeof Nr.console.error=="function"?Nr.console.error.apply(Nr.console,arguments):i2(t))}};function s2(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){ef(r.response,e,n)},r.onerror=function(){Ls.error("could not download file")},r.send()}function w5(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function L0(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Gg,Ab,ef=Nr.saveAs||((typeof window>"u"?"undefined":hs(window))!=="object"||window!==Nr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Nr.URL||Nr.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?w5(i.href)?s2(t,e,n):L0(i,i.target="_blank"):L0(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){L0(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(w5(t))s2(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){L0(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:hs(s)!=="object"&&(Ls.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return s2(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(Nr.HTMLElement)||Nr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":hs(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var d=a.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},a.readAsDataURL(t)}else{var l=Nr.URL||Nr.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function YE(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function o2(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=el(n,r,i,s,e[0],7,-680876936),s=el(s,n,r,i,e[1],12,-389564586),i=el(i,s,n,r,e[2],17,606105819),r=el(r,i,s,n,e[3],22,-1044525330),n=el(n,r,i,s,e[4],7,-176418897),s=el(s,n,r,i,e[5],12,1200080426),i=el(i,s,n,r,e[6],17,-1473231341),r=el(r,i,s,n,e[7],22,-45705983),n=el(n,r,i,s,e[8],7,1770035416),s=el(s,n,r,i,e[9],12,-1958414417),i=el(i,s,n,r,e[10],17,-42063),r=el(r,i,s,n,e[11],22,-1990404162),n=el(n,r,i,s,e[12],7,1804603682),s=el(s,n,r,i,e[13],12,-40341101),i=el(i,s,n,r,e[14],17,-1502002290),n=tl(n,r=el(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=tl(s,n,r,i,e[6],9,-1069501632),i=tl(i,s,n,r,e[11],14,643717713),r=tl(r,i,s,n,e[0],20,-373897302),n=tl(n,r,i,s,e[5],5,-701558691),s=tl(s,n,r,i,e[10],9,38016083),i=tl(i,s,n,r,e[15],14,-660478335),r=tl(r,i,s,n,e[4],20,-405537848),n=tl(n,r,i,s,e[9],5,568446438),s=tl(s,n,r,i,e[14],9,-1019803690),i=tl(i,s,n,r,e[3],14,-187363961),r=tl(r,i,s,n,e[8],20,1163531501),n=tl(n,r,i,s,e[13],5,-1444681467),s=tl(s,n,r,i,e[2],9,-51403784),i=tl(i,s,n,r,e[7],14,1735328473),n=nl(n,r=tl(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=nl(s,n,r,i,e[8],11,-2022574463),i=nl(i,s,n,r,e[11],16,1839030562),r=nl(r,i,s,n,e[14],23,-35309556),n=nl(n,r,i,s,e[1],4,-1530992060),s=nl(s,n,r,i,e[4],11,1272893353),i=nl(i,s,n,r,e[7],16,-155497632),r=nl(r,i,s,n,e[10],23,-1094730640),n=nl(n,r,i,s,e[13],4,681279174),s=nl(s,n,r,i,e[0],11,-358537222),i=nl(i,s,n,r,e[3],16,-722521979),r=nl(r,i,s,n,e[6],23,76029189),n=nl(n,r,i,s,e[9],4,-640364487),s=nl(s,n,r,i,e[12],11,-421815835),i=nl(i,s,n,r,e[15],16,530742520),n=rl(n,r=nl(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=rl(s,n,r,i,e[7],10,1126891415),i=rl(i,s,n,r,e[14],15,-1416354905),r=rl(r,i,s,n,e[5],21,-57434055),n=rl(n,r,i,s,e[12],6,1700485571),s=rl(s,n,r,i,e[3],10,-1894986606),i=rl(i,s,n,r,e[10],15,-1051523),r=rl(r,i,s,n,e[1],21,-2054922799),n=rl(n,r,i,s,e[8],6,1873313359),s=rl(s,n,r,i,e[15],10,-30611744),i=rl(i,s,n,r,e[6],15,-1560198380),r=rl(r,i,s,n,e[13],21,1309151649),n=rl(n,r,i,s,e[4],6,-145523070),s=rl(s,n,r,i,e[11],10,-1120210379),i=rl(i,s,n,r,e[2],15,718787259),r=rl(r,i,s,n,e[9],21,-343485551),t[0]=hd(n,t[0]),t[1]=hd(r,t[1]),t[2]=hd(i,t[2]),t[3]=hd(s,t[3])}function Wy(t,e,n,r,i,s){return e=hd(hd(e,t),hd(r,s)),hd(e<<i|e>>>32-i,n)}function el(t,e,n,r,i,s,o){return Wy(e&n|~e&r,t,e,i,s,o)}function tl(t,e,n,r,i,s,o){return Wy(e&r|n&~r,t,e,i,s,o)}function nl(t,e,n,r,i,s,o){return Wy(e^n^r,t,e,i,s,o)}function rl(t,e,n,r,i,s,o){return Wy(n^(e|~r),t,e,i,s,o)}function KE(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)o2(r,LH(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(o2(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,o2(r,i),r}function LH(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Gg=Nr.atob.bind(Nr),Ab=Nr.btoa.bind(Nr);var x5="0123456789abcdef".split("");function SH(t){for(var e="",n=0;n<4;n++)e+=x5[t>>8*n+4&15]+x5[t>>8*n&15];return e}function CH(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Tb(t){return KE(t).map(CH).join("")}var EH=function(t){for(var e=0;e<t.length;e++)t[e]=SH(t[e]);return t.join("")}(KE("hello"))!="5d41402abc4b2a76b9719d911017c592";function hd(t,e){if(EH){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Db(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var d=a[l];c=(c+d+o.charCodeAt(l))%256,a[l]=a[c],a[c]=d}n=t,r=a}else a=r;var p=e.length,v=0,m=0,x="";for(l=0;l<p;l++)m=(m+(d=a[v=(v+1)%256]))%256,a[v]=a[m],a[m]=d,o=a[(a[v]+a[m])%256],x+=String.fromCharCode(e.charCodeAt(l)^o);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var L5={print:4,modify:8,copy:16,"annot-forms":32};function ap(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(L5.perm!==void 0)throw new Error("Invalid permission: "+a);i+=L5[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=Tb(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Db(this.encryptionKey,this.padding)}function lp(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function S5(t){if(hs(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){Nr.console&&Ls.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Kv(t){if(!(this instanceof Kv))return new Kv(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function ZE(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function of(t,e,n,r,i){if(!(this instanceof of))return new of(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,ZE.call(this,r,i)}function hp(t,e,n,r,i){if(!(this instanceof hp))return new hp(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,ZE.call(this,r,i)}function Tr(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",d=null;hs(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,v={},m={internal:{},__private__:{}};m.__private__.PubSub=S5;var x="1.3",E=m.__private__.getPdfVersion=function(){return x};m.__private__.setPdfVersion=function(F){x=F};var M={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return M};var A=m.__private__.getPageFormat=function(F){return M[F]};i=i||"a4";var O={COMPAT:"compat",ADVANCED:"advanced"},z=O.COMPAT;function K(){this.saveGraphicsState(),fe(new Jt(it,0,0,-it,0,Ha()*it).toString()+" cm"),this.setFontSize(this.getFontSize()/it),c="n",z=O.ADVANCED}function ne(){this.restoreGraphicsState(),c="S",z=O.COMPAT}var me=m.__private__.combineFontStyleAndFontWeight=function(F,we){if(F=="bold"&&we=="normal"||F=="bold"&&we==400||F=="normal"&&we=="italic"||F=="bold"&&we=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return we&&(F=we==400||we==="normal"?F==="italic"?"italic":"normal":we!=700&&we!=="bold"||F!=="normal"?(we==700?"bold":we)+""+F:"bold"),F};m.advancedAPI=function(F){var we=z===O.COMPAT;return we&&K.call(this),typeof F!="function"||(F(this),we&&ne.call(this)),this},m.compatAPI=function(F){var we=z===O.ADVANCED;return we&&ne.call(this),typeof F!="function"||(F(this),we&&K.call(this)),this},m.isAdvancedAPI=function(){return z===O.ADVANCED};var pe,N=function(F){if(z!==O.ADVANCED)throw new Error(F+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},j=m.roundToPrecision=m.__private__.roundToPrecision=function(F,we){var et=e||we;if(isNaN(F)||isNaN(et))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return F.toFixed(et).replace(/0+$/,"")};pe=m.hpf=m.__private__.hpf=typeof l=="number"?function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return j(F,l)}:l==="smart"?function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return j(F,F>-1&&F<1?16:5)}:function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return j(F,16)};var q=m.f2=m.__private__.f2=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.f2");return j(F,2)},I=m.__private__.f3=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.f3");return j(F,3)},B=m.scale=m.__private__.scale=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.scale");return z===O.COMPAT?F*it:z===O.ADVANCED?F:void 0},$=function(F){return z===O.COMPAT?Ha()-F:z===O.ADVANCED?F:void 0},R=function(F){return B($(F))};m.__private__.setPrecision=m.setPrecision=function(F){typeof parseInt(F,10)=="number"&&(e=parseInt(F,10))};var U,V="00000000000000000000000000000000",re=m.__private__.getFileId=function(){return V},J=m.__private__.setFileId=function(F){return V=F!==void 0&&/^[a-fA-F0-9]{32}$/.test(F)?F.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ps=new ap(d.userPermissions,d.userPassword,d.ownerPassword,V)),V};m.setFileId=function(F){return J(F),this},m.getFileId=function(){return re()};var _e=m.__private__.convertDateToPDFDate=function(F){var we=F.getTimezoneOffset(),et=we<0?"+":"-",dt=Math.floor(Math.abs(we/60)),Pt=Math.abs(we%60),Gt=[et,se(dt),"'",se(Pt),"'"].join("");return["D:",F.getFullYear(),se(F.getMonth()+1),se(F.getDate()),se(F.getHours()),se(F.getMinutes()),se(F.getSeconds()),Gt].join("")},Le=m.__private__.convertPDFDateToDate=function(F){var we=parseInt(F.substr(2,4),10),et=parseInt(F.substr(6,2),10)-1,dt=parseInt(F.substr(8,2),10),Pt=parseInt(F.substr(10,2),10),Gt=parseInt(F.substr(12,2),10),pn=parseInt(F.substr(14,2),10);return new Date(we,et,dt,Pt,Gt,pn,0)},Oe=m.__private__.setCreationDate=function(F){var we;if(F===void 0&&(F=new Date),F instanceof Date)we=_e(F);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(F))throw new Error("Invalid argument passed to jsPDF.setCreationDate");we=F}return U=we},Z=m.__private__.getCreationDate=function(F){var we=U;return F==="jsDate"&&(we=Le(U)),we};m.setCreationDate=function(F){return Oe(F),this},m.getCreationDate=function(F){return Z(F)};var G,se=m.__private__.padd2=function(F){return("0"+parseInt(F)).slice(-2)},ce=m.__private__.padd2Hex=function(F){return("00"+(F=F.toString())).substr(F.length)},he=0,ve=[],ee=[],X=0,De=[],Te=[],qe=!1,ge=ee,Q=function(){he=0,X=0,ee=[],ve=[],De=[],$n=Ut(),or=Ut()};m.__private__.setCustomOutputDestination=function(F){qe=!0,ge=F};var ie=function(F){qe||(ge=F)};m.__private__.resetCustomOutputDestination=function(){qe=!1,ge=ee};var fe=m.__private__.out=function(F){return F=F.toString(),X+=F.length+1,ge.push(F),ge},Ce=m.__private__.write=function(F){return fe(arguments.length===1?F.toString():Array.prototype.join.call(arguments," "))},de=m.__private__.getArrayBuffer=function(F){for(var we=F.length,et=new ArrayBuffer(we),dt=new Uint8Array(et);we--;)dt[we]=F.charCodeAt(we);return et},Xe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Xe};var Ie=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(F){return Ie=z===O.ADVANCED?F/it:F,this};var Ye,Je=m.__private__.getFontSize=m.getFontSize=function(){return z===O.COMPAT?Ie:Ie*it},Ge=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(F){return Ge=F,this},m.__private__.getR2L=m.getR2L=function(){return Ge};var wt,Ct=m.__private__.setZoomMode=function(F){var we=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(F))Ye=F;else if(isNaN(F)){if(we.indexOf(F)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+F+'" is not recognized.');Ye=F}else Ye=parseInt(F,10)};m.__private__.getZoomMode=function(){return Ye};var Wt,sn=m.__private__.setPageMode=function(F){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(F)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+F+'" is not recognized.');wt=F};m.__private__.getPageMode=function(){return wt};var bn=m.__private__.setLayoutMode=function(F){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(F)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+F+'" is not recognized.');Wt=F};m.__private__.getLayoutMode=function(){return Wt},m.__private__.setDisplayMode=m.setDisplayMode=function(F,we,et){return Ct(F),bn(we),sn(et),this};var Qe={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(F){if(Object.keys(Qe).indexOf(F)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Qe[F]},m.__private__.getDocumentProperties=function(){return Qe},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(F){for(var we in Qe)Qe.hasOwnProperty(we)&&F[we]&&(Qe[we]=F[we]);return this},m.__private__.setDocumentProperty=function(F,we){if(Object.keys(Qe).indexOf(F)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Qe[F]=we};var ot,it,Vt,Qt,kn,Ln={},Mn={},Zn=[],en={},wn={},En={},Xn={},dr=null,vr=0,sr=[],ut=new S5(m),rt=t.hotfixes||[],jt={},Tn={},Yn=[],Jt=function F(we,et,dt,Pt,Gt,pn){if(!(this instanceof F))return new F(we,et,dt,Pt,Gt,pn);isNaN(we)&&(we=1),isNaN(et)&&(et=0),isNaN(dt)&&(dt=0),isNaN(Pt)&&(Pt=1),isNaN(Gt)&&(Gt=0),isNaN(pn)&&(pn=0),this._matrix=[we,et,dt,Pt,Gt,pn]};Object.defineProperty(Jt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(F){this._matrix[0]=F}}),Object.defineProperty(Jt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(F){this._matrix[1]=F}}),Object.defineProperty(Jt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(F){this._matrix[2]=F}}),Object.defineProperty(Jt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(F){this._matrix[3]=F}}),Object.defineProperty(Jt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(F){this._matrix[4]=F}}),Object.defineProperty(Jt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(F){this._matrix[5]=F}}),Object.defineProperty(Jt.prototype,"a",{get:function(){return this._matrix[0]},set:function(F){this._matrix[0]=F}}),Object.defineProperty(Jt.prototype,"b",{get:function(){return this._matrix[1]},set:function(F){this._matrix[1]=F}}),Object.defineProperty(Jt.prototype,"c",{get:function(){return this._matrix[2]},set:function(F){this._matrix[2]=F}}),Object.defineProperty(Jt.prototype,"d",{get:function(){return this._matrix[3]},set:function(F){this._matrix[3]=F}}),Object.defineProperty(Jt.prototype,"e",{get:function(){return this._matrix[4]},set:function(F){this._matrix[4]=F}}),Object.defineProperty(Jt.prototype,"f",{get:function(){return this._matrix[5]},set:function(F){this._matrix[5]=F}}),Object.defineProperty(Jt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Jt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Jt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Jt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Jt.prototype.join=function(F){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(pe).join(F)},Jt.prototype.multiply=function(F){var we=F.sx*this.sx+F.shy*this.shx,et=F.sx*this.shy+F.shy*this.sy,dt=F.shx*this.sx+F.sy*this.shx,Pt=F.shx*this.shy+F.sy*this.sy,Gt=F.tx*this.sx+F.ty*this.shx+this.tx,pn=F.tx*this.shy+F.ty*this.sy+this.ty;return new Jt(we,et,dt,Pt,Gt,pn)},Jt.prototype.decompose=function(){var F=this.sx,we=this.shy,et=this.shx,dt=this.sy,Pt=this.tx,Gt=this.ty,pn=Math.sqrt(F*F+we*we),Rn=(F/=pn)*et+(we/=pn)*dt;et-=F*Rn,dt-=we*Rn;var Vn=Math.sqrt(et*et+dt*dt);return Rn/=Vn,F*(dt/=Vn)<we*(et/=Vn)&&(F=-F,we=-we,Rn=-Rn,pn=-pn),{scale:new Jt(pn,0,0,Vn,0,0),translate:new Jt(1,0,0,1,Pt,Gt),rotate:new Jt(F,we,-we,F,0,0),skew:new Jt(1,0,Rn,1,0,0)}},Jt.prototype.toString=function(F){return this.join(" ")},Jt.prototype.inversed=function(){var F=this.sx,we=this.shy,et=this.shx,dt=this.sy,Pt=this.tx,Gt=this.ty,pn=1/(F*dt-we*et),Rn=dt*pn,Vn=-we*pn,ar=-et*pn,wr=F*pn;return new Jt(Rn,Vn,ar,wr,-Rn*Pt-ar*Gt,-Vn*Pt-wr*Gt)},Jt.prototype.applyToPoint=function(F){var we=F.x*this.sx+F.y*this.shx+this.tx,et=F.x*this.shy+F.y*this.sy+this.ty;return new $s(we,et)},Jt.prototype.applyToRectangle=function(F){var we=this.applyToPoint(F),et=this.applyToPoint(new $s(F.x+F.w,F.y+F.h));return new ga(we.x,we.y,et.x-we.x,et.y-we.y)},Jt.prototype.clone=function(){var F=this.sx,we=this.shy,et=this.shx,dt=this.sy,Pt=this.tx,Gt=this.ty;return new Jt(F,we,et,dt,Pt,Gt)},m.Matrix=Jt;var Ht=m.matrixMult=function(F,we){return we.multiply(F)},nn=new Jt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=nn;var an=function(F,we){if(!wn[F]){var et=(we instanceof of?"Sh":"P")+(Object.keys(en).length+1).toString(10);we.id=et,wn[F]=et,en[et]=we,ut.publish("addPattern",we)}};m.ShadingPattern=of,m.TilingPattern=hp,m.addShadingPattern=function(F,we){return N("addShadingPattern()"),an(F,we),this},m.beginTilingPattern=function(F){N("beginTilingPattern()"),ma(F.boundingBox[0],F.boundingBox[1],F.boundingBox[2]-F.boundingBox[0],F.boundingBox[3]-F.boundingBox[1],F.matrix)},m.endTilingPattern=function(F,we){N("endTilingPattern()"),we.stream=Te[G].join(`
`),an(F,we),ut.publish("endTilingPattern",we),Yn.pop().restore()};var St=m.__private__.newObject=function(){var F=Ut();return Lr(F,!0),F},Ut=m.__private__.newObjectDeferred=function(){return he++,ve[he]=function(){return X},he},Lr=function(F,we){return we=typeof we=="boolean"&&we,ve[F]=X,we&&fe(F+" 0 obj"),F},Ot=m.__private__.newAdditionalObject=function(){var F={objId:Ut(),content:""};return De.push(F),F},$n=Ut(),or=Ut(),Mi=m.__private__.decodeColorString=function(F){var we=F.split(" ");if(we.length!==2||we[1]!=="g"&&we[1]!=="G")we.length===5&&(we[4]==="k"||we[4]==="K")&&(we=[(1-we[0])*(1-we[3]),(1-we[1])*(1-we[3]),(1-we[2])*(1-we[3]),"r"]);else{var et=parseFloat(we[0]);we=[et,et,et,"r"]}for(var dt="#",Pt=0;Pt<3;Pt++)dt+=("0"+Math.floor(255*parseFloat(we[Pt])).toString(16)).slice(-2);return dt},Br=m.__private__.encodeColorString=function(F){var we;typeof F=="string"&&(F={ch1:F});var et=F.ch1,dt=F.ch2,Pt=F.ch3,Gt=F.ch4,pn=F.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof et=="string"&&et.charAt(0)!=="#"){var Rn=new YE(et);if(Rn.ok)et=Rn.toHex();else if(!/^\d*\.?\d*$/.test(et))throw new Error('Invalid color "'+et+'" passed to jsPDF.encodeColorString.')}if(typeof et=="string"&&/^#[0-9A-Fa-f]{3}$/.test(et)&&(et="#"+et[1]+et[1]+et[2]+et[2]+et[3]+et[3]),typeof et=="string"&&/^#[0-9A-Fa-f]{6}$/.test(et)){var Vn=parseInt(et.substr(1),16);et=Vn>>16&255,dt=Vn>>8&255,Pt=255&Vn}if(dt===void 0||Gt===void 0&&et===dt&&dt===Pt)if(typeof et=="string")we=et+" "+pn[0];else switch(F.precision){case 2:we=q(et/255)+" "+pn[0];break;case 3:default:we=I(et/255)+" "+pn[0]}else if(Gt===void 0||hs(Gt)==="object"){if(Gt&&!isNaN(Gt.a)&&Gt.a===0)return we=["1.","1.","1.",pn[1]].join(" ");if(typeof et=="string")we=[et,dt,Pt,pn[1]].join(" ");else switch(F.precision){case 2:we=[q(et/255),q(dt/255),q(Pt/255),pn[1]].join(" ");break;default:case 3:we=[I(et/255),I(dt/255),I(Pt/255),pn[1]].join(" ")}}else if(typeof et=="string")we=[et,dt,Pt,Gt,pn[2]].join(" ");else switch(F.precision){case 2:we=[q(et),q(dt),q(Pt),q(Gt),pn[2]].join(" ");break;case 3:default:we=[I(et),I(dt),I(Pt),I(Gt),pn[2]].join(" ")}return we},xr=m.__private__.getFilters=function(){return o},ur=m.__private__.putStream=function(F){var we=(F=F||{}).data||"",et=F.filters||xr(),dt=F.alreadyAppliedFilters||[],Pt=F.addLength1||!1,Gt=we.length,pn=F.objectId,Rn=function(_s){return _s};if(d!==null&&pn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Rn=ps.encryptor(pn,0));var Vn={};et===!0&&(et=["FlateEncode"]);var ar=F.additionalKeyValues||[],wr=(Vn=Tr.API.processDataByFilters!==void 0?Tr.API.processDataByFilters(we,et):{data:we,reverseChain:[]}).reverseChain+(Array.isArray(dt)?dt.join(" "):dt.toString());if(Vn.data.length!==0&&(ar.push({key:"Length",value:Vn.data.length}),Pt===!0&&ar.push({key:"Length1",value:Gt})),wr.length!=0)if(wr.split("/").length-1==1)ar.push({key:"Filter",value:wr});else{ar.push({key:"Filter",value:"["+wr+"]"});for(var Vr=0;Vr<ar.length;Vr+=1)if(ar[Vr].key==="DecodeParms"){for(var Zi=[],fi=0;fi<Vn.reverseChain.split("/").length-1;fi+=1)Zi.push("null");Zi.push(ar[Vr].value),ar[Vr].value="["+Zi.join(" ")+"]"}}fe("<<");for(var Si=0;Si<ar.length;Si++)fe("/"+ar[Si].key+" "+ar[Si].value);fe(">>"),Vn.data.length!==0&&(fe("stream"),fe(Rn(Vn.data)),fe("endstream"))},gi=m.__private__.putPage=function(F){var we=F.number,et=F.data,dt=F.objId,Pt=F.contentsObjId;Lr(dt,!0),fe("<</Type /Page"),fe("/Parent "+F.rootDictionaryObjId+" 0 R"),fe("/Resources "+F.resourceDictionaryObjId+" 0 R"),fe("/MediaBox ["+parseFloat(pe(F.mediaBox.bottomLeftX))+" "+parseFloat(pe(F.mediaBox.bottomLeftY))+" "+pe(F.mediaBox.topRightX)+" "+pe(F.mediaBox.topRightY)+"]"),F.cropBox!==null&&fe("/CropBox ["+pe(F.cropBox.bottomLeftX)+" "+pe(F.cropBox.bottomLeftY)+" "+pe(F.cropBox.topRightX)+" "+pe(F.cropBox.topRightY)+"]"),F.bleedBox!==null&&fe("/BleedBox ["+pe(F.bleedBox.bottomLeftX)+" "+pe(F.bleedBox.bottomLeftY)+" "+pe(F.bleedBox.topRightX)+" "+pe(F.bleedBox.topRightY)+"]"),F.trimBox!==null&&fe("/TrimBox ["+pe(F.trimBox.bottomLeftX)+" "+pe(F.trimBox.bottomLeftY)+" "+pe(F.trimBox.topRightX)+" "+pe(F.trimBox.topRightY)+"]"),F.artBox!==null&&fe("/ArtBox ["+pe(F.artBox.bottomLeftX)+" "+pe(F.artBox.bottomLeftY)+" "+pe(F.artBox.topRightX)+" "+pe(F.artBox.topRightY)+"]"),typeof F.userUnit=="number"&&F.userUnit!==1&&fe("/UserUnit "+F.userUnit),ut.publish("putPage",{objId:dt,pageContext:sr[we],pageNumber:we,page:et}),fe("/Contents "+Pt+" 0 R"),fe(">>"),fe("endobj");var Gt=et.join(`
`);return z===O.ADVANCED&&(Gt+=`
Q`),Lr(Pt,!0),ur({data:Gt,filters:xr(),objectId:Pt}),fe("endobj"),dt},yr=m.__private__.putPages=function(){var F,we,et=[];for(F=1;F<=vr;F++)sr[F].objId=Ut(),sr[F].contentsObjId=Ut();for(F=1;F<=vr;F++)et.push(gi({number:F,data:Te[F],objId:sr[F].objId,contentsObjId:sr[F].contentsObjId,mediaBox:sr[F].mediaBox,cropBox:sr[F].cropBox,bleedBox:sr[F].bleedBox,trimBox:sr[F].trimBox,artBox:sr[F].artBox,userUnit:sr[F].userUnit,rootDictionaryObjId:$n,resourceDictionaryObjId:or}));Lr($n,!0),fe("<</Type /Pages");var dt="/Kids [";for(we=0;we<vr;we++)dt+=et[we]+" 0 R ";fe(dt+"]"),fe("/Count "+vr),fe(">>"),fe("endobj"),ut.publish("postPutPages")},Gr=function(F){ut.publish("putFont",{font:F,out:fe,newObject:St,putStream:ur}),F.isAlreadyPutted!==!0&&(F.objectNumber=St(),fe("<<"),fe("/Type /Font"),fe("/BaseFont /"+lp(F.postScriptName)),fe("/Subtype /Type1"),typeof F.encoding=="string"&&fe("/Encoding /"+F.encoding),fe("/FirstChar 32"),fe("/LastChar 255"),fe(">>"),fe("endobj"))},zr=function(){for(var F in Ln)Ln.hasOwnProperty(F)&&(p===!1||p===!0&&v.hasOwnProperty(F))&&Gr(Ln[F])},ln=function(F){F.objectNumber=St();var we=[];we.push({key:"Type",value:"/XObject"}),we.push({key:"Subtype",value:"/Form"}),we.push({key:"BBox",value:"["+[pe(F.x),pe(F.y),pe(F.x+F.width),pe(F.y+F.height)].join(" ")+"]"}),we.push({key:"Matrix",value:"["+F.matrix.toString()+"]"});var et=F.pages[1].join(`
`);ur({data:et,additionalKeyValues:we,objectId:F.objectNumber}),fe("endobj")},_i=function(){for(var F in jt)jt.hasOwnProperty(F)&&ln(jt[F])},Ni=function(F,we){var et,dt=[],Pt=1/(we-1);for(et=0;et<1;et+=Pt)dt.push(et);if(dt.push(1),F[0].offset!=0){var Gt={offset:0,color:F[0].color};F.unshift(Gt)}if(F[F.length-1].offset!=1){var pn={offset:1,color:F[F.length-1].color};F.push(pn)}for(var Rn="",Vn=0,ar=0;ar<dt.length;ar++){for(et=dt[ar];et>F[Vn+1].offset;)Vn++;var wr=F[Vn].offset,Vr=(et-wr)/(F[Vn+1].offset-wr),Zi=F[Vn].color,fi=F[Vn+1].color;Rn+=ce(Math.round((1-Vr)*Zi[0]+Vr*fi[0]).toString(16))+ce(Math.round((1-Vr)*Zi[1]+Vr*fi[1]).toString(16))+ce(Math.round((1-Vr)*Zi[2]+Vr*fi[2]).toString(16))}return Rn.trim()},Ui=function(F,we){we||(we=21);var et=St(),dt=Ni(F.colors,we),Pt=[];Pt.push({key:"FunctionType",value:"0"}),Pt.push({key:"Domain",value:"[0.0 1.0]"}),Pt.push({key:"Size",value:"["+we+"]"}),Pt.push({key:"BitsPerSample",value:"8"}),Pt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Pt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ur({data:dt,additionalKeyValues:Pt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:et}),fe("endobj"),F.objectNumber=St(),fe("<< /ShadingType "+F.type),fe("/ColorSpace /DeviceRGB");var Gt="/Coords ["+pe(parseFloat(F.coords[0]))+" "+pe(parseFloat(F.coords[1]))+" ";F.type===2?Gt+=pe(parseFloat(F.coords[2]))+" "+pe(parseFloat(F.coords[3])):Gt+=pe(parseFloat(F.coords[2]))+" "+pe(parseFloat(F.coords[3]))+" "+pe(parseFloat(F.coords[4]))+" "+pe(parseFloat(F.coords[5])),fe(Gt+="]"),F.matrix&&fe("/Matrix ["+F.matrix.toString()+"]"),fe("/Function "+et+" 0 R"),fe("/Extend [true true]"),fe(">>"),fe("endobj")},hi=function(F,we){var et=Ut(),dt=St();we.push({resourcesOid:et,objectOid:dt}),F.objectNumber=dt;var Pt=[];Pt.push({key:"Type",value:"/Pattern"}),Pt.push({key:"PatternType",value:"1"}),Pt.push({key:"PaintType",value:"1"}),Pt.push({key:"TilingType",value:"1"}),Pt.push({key:"BBox",value:"["+F.boundingBox.map(pe).join(" ")+"]"}),Pt.push({key:"XStep",value:pe(F.xStep)}),Pt.push({key:"YStep",value:pe(F.yStep)}),Pt.push({key:"Resources",value:et+" 0 R"}),F.matrix&&Pt.push({key:"Matrix",value:"["+F.matrix.toString()+"]"}),ur({data:F.stream,additionalKeyValues:Pt,objectId:F.objectNumber}),fe("endobj")},Ir=function(F){var we;for(we in en)en.hasOwnProperty(we)&&(en[we]instanceof of?Ui(en[we]):en[we]instanceof hp&&hi(en[we],F))},di=function(F){for(var we in F.objectNumber=St(),fe("<<"),F)switch(we){case"opacity":fe("/ca "+q(F[we]));break;case"stroke-opacity":fe("/CA "+q(F[we]))}fe(">>"),fe("endobj")},Sr=function(){var F;for(F in En)En.hasOwnProperty(F)&&di(En[F])},ki=function(){for(var F in fe("/XObject <<"),jt)jt.hasOwnProperty(F)&&jt[F].objectNumber>=0&&fe("/"+F+" "+jt[F].objectNumber+" 0 R");ut.publish("putXobjectDict"),fe(">>")},js=function(){ps.oid=St(),fe("<<"),fe("/Filter /Standard"),fe("/V "+ps.v),fe("/R "+ps.r),fe("/U <"+ps.toHexString(ps.U)+">"),fe("/O <"+ps.toHexString(ps.O)+">"),fe("/P "+ps.P),fe(">>"),fe("endobj")},Ea=function(){for(var F in fe("/Font <<"),Ln)Ln.hasOwnProperty(F)&&(p===!1||p===!0&&v.hasOwnProperty(F))&&fe("/"+F+" "+Ln[F].objectNumber+" 0 R");fe(">>")},wi=function(){if(Object.keys(en).length>0){for(var F in fe("/Shading <<"),en)en.hasOwnProperty(F)&&en[F]instanceof of&&en[F].objectNumber>=0&&fe("/"+F+" "+en[F].objectNumber+" 0 R");ut.publish("putShadingPatternDict"),fe(">>")}},On=function(F){if(Object.keys(en).length>0){for(var we in fe("/Pattern <<"),en)en.hasOwnProperty(we)&&en[we]instanceof m.TilingPattern&&en[we].objectNumber>=0&&en[we].objectNumber<F&&fe("/"+we+" "+en[we].objectNumber+" 0 R");ut.publish("putTilingPatternDict"),fe(">>")}},br=function(){if(Object.keys(En).length>0){var F;for(F in fe("/ExtGState <<"),En)En.hasOwnProperty(F)&&En[F].objectNumber>=0&&fe("/"+F+" "+En[F].objectNumber+" 0 R");ut.publish("putGStateDict"),fe(">>")}},Wn=function(F){Lr(F.resourcesOid,!0),fe("<<"),fe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ea(),wi(),On(F.objectOid),br(),ki(),fe(">>"),fe("endobj")},Hi=function(){var F=[];zr(),Sr(),_i(),Ir(F),ut.publish("putResources"),F.forEach(Wn),Wn({resourcesOid:or,objectOid:Number.MAX_SAFE_INTEGER}),ut.publish("postPutResources")},Ki=function(){ut.publish("putAdditionalObjects");for(var F=0;F<De.length;F++){var we=De[F];Lr(we.objId,!0),fe(we.content),fe("endobj")}ut.publish("postPutAdditionalObjects")},ds=function(F){Mn[F.fontName]=Mn[F.fontName]||{},Mn[F.fontName][F.fontStyle]=F.id},po=function(F,we,et,dt,Pt){var Gt={id:"F"+(Object.keys(Ln).length+1).toString(10),postScriptName:F,fontName:we,fontStyle:et,encoding:dt,isStandardFont:Pt||!1,metadata:{}};return ut.publish("addFont",{font:Gt,instance:this}),Ln[Gt.id]=Gt,ds(Gt),Gt.id},Nn=function(F){for(var we=0,et=Xe.length;we<et;we++){var dt=po.call(this,F[we][0],F[we][1],F[we][2],Xe[we][3],!0);p===!1&&(v[dt]=!0);var Pt=F[we][0].split("-");ds({id:dt,fontName:Pt[0],fontStyle:Pt[1]||""})}ut.publish("addFonts",{fonts:Ln,dictionary:Mn})},$r=function(F){return F.foo=function(){try{return F.apply(this,arguments)}catch(dt){var we=dt.stack||"";~we.indexOf(" at ")&&(we=we.split(" at ")[1]);var et="Error in function "+we.split(`
`)[0].split("<")[0]+": "+dt.message;if(!Nr.console)throw new Error(et);Nr.console.error(et,dt),Nr.alert&&alert(et)}},F.foo.bar=F,F.foo},Wi=function(F,we){var et,dt,Pt,Gt,pn,Rn,Vn,ar,wr;if(Pt=(we=we||{}).sourceEncoding||"Unicode",pn=we.outputEncoding,(we.autoencode||pn)&&Ln[ot].metadata&&Ln[ot].metadata[Pt]&&Ln[ot].metadata[Pt].encoding&&(Gt=Ln[ot].metadata[Pt].encoding,!pn&&Ln[ot].encoding&&(pn=Ln[ot].encoding),!pn&&Gt.codePages&&(pn=Gt.codePages[0]),typeof pn=="string"&&(pn=Gt[pn]),pn)){for(Vn=!1,Rn=[],et=0,dt=F.length;et<dt;et++)(ar=pn[F.charCodeAt(et)])?Rn.push(String.fromCharCode(ar)):Rn.push(F[et]),Rn[et].charCodeAt(0)>>8&&(Vn=!0);F=Rn.join("")}for(et=F.length;Vn===void 0&&et!==0;)F.charCodeAt(et-1)>>8&&(Vn=!0),et--;if(!Vn)return F;for(Rn=we.noBOM?[]:[254,255],et=0,dt=F.length;et<dt;et++){if((wr=(ar=F.charCodeAt(et))>>8)>>8)throw new Error("Character at position "+et+" of string '"+F+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Rn.push(wr),Rn.push(ar-(wr<<8))}return String.fromCharCode.apply(void 0,Rn)},Ii=m.__private__.pdfEscape=m.pdfEscape=function(F,we){return Wi(F,we).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Er=m.__private__.beginPage=function(F){Te[++vr]=[],sr[vr]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(F[0]),topRightY:Number(F[1])}},Fr(vr),ie(Te[G])},Dn=function(F,we){var et,dt,Pt;switch(n=we||n,typeof F=="string"&&(et=A(F.toLowerCase()),Array.isArray(et)&&(dt=et[0],Pt=et[1])),Array.isArray(F)&&(dt=F[0]*it,Pt=F[1]*it),isNaN(dt)&&(dt=i[0],Pt=i[1]),(dt>14400||Pt>14400)&&(Ls.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),dt=Math.min(14400,dt),Pt=Math.min(14400,Pt)),i=[dt,Pt],n.substr(0,1)){case"l":Pt>dt&&(i=[Pt,dt]);break;case"p":dt>Pt&&(i=[Pt,dt])}Er(i),au(Pu),fe(Ji),cu!==0&&fe(cu+" J"),xi!==0&&fe(xi+" j"),ut.publish("addPage",{pageNumber:vr})},mn=function(F){F>0&&F<=vr&&(Te.splice(F,1),sr.splice(F,1),vr--,G>vr&&(G=vr),this.setPage(G))},Fr=function(F){F>0&&F<=vr&&(G=F)},ai=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Te.length-1},ms=function(F,we,et){var dt,Pt=void 0;return et=et||{},F=F!==void 0?F:Ln[ot].fontName,we=we!==void 0?we:Ln[ot].fontStyle,dt=F.toLowerCase(),Mn[dt]!==void 0&&Mn[dt][we]!==void 0?Pt=Mn[dt][we]:Mn[F]!==void 0&&Mn[F][we]!==void 0?Pt=Mn[F][we]:et.disableWarning===!1&&Ls.warn("Unable to look up font label for font '"+F+"', '"+we+"'. Refer to getFontList() for available fonts."),Pt||et.noFallback||(Pt=Mn.times[we])==null&&(Pt=Mn.times.normal),Pt},Oo=m.__private__.putInfo=function(){var F=St(),we=function(dt){return dt};for(var et in d!==null&&(we=ps.encryptor(F,0)),fe("<<"),fe("/Producer ("+Ii(we("jsPDF "+Tr.version))+")"),Qe)Qe.hasOwnProperty(et)&&Qe[et]&&fe("/"+et.substr(0,1).toUpperCase()+et.substr(1)+" ("+Ii(we(Qe[et]))+")");fe("/CreationDate ("+Ii(we(U))+")"),fe(">>"),fe("endobj")},Xs=m.__private__.putCatalog=function(F){var we=(F=F||{}).rootDictionaryObjId||$n;switch(St(),fe("<<"),fe("/Type /Catalog"),fe("/Pages "+we+" 0 R"),Ye||(Ye="fullwidth"),Ye){case"fullwidth":fe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":fe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":fe("/OpenAction [3 0 R /Fit]");break;case"original":fe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var et=""+Ye;et.substr(et.length-1)==="%"&&(Ye=parseInt(Ye)/100),typeof Ye=="number"&&fe("/OpenAction [3 0 R /XYZ null null "+q(Ye)+"]")}switch(Wt||(Wt="continuous"),Wt){case"continuous":fe("/PageLayout /OneColumn");break;case"single":fe("/PageLayout /SinglePage");break;case"two":case"twoleft":fe("/PageLayout /TwoColumnLeft");break;case"tworight":fe("/PageLayout /TwoColumnRight")}wt&&fe("/PageMode /"+wt),ut.publish("putCatalog"),fe(">>"),fe("endobj")},ra=m.__private__.putTrailer=function(){fe("trailer"),fe("<<"),fe("/Size "+(he+1)),fe("/Root "+he+" 0 R"),fe("/Info "+(he-1)+" 0 R"),d!==null&&fe("/Encrypt "+ps.oid+" 0 R"),fe("/ID [ <"+V+"> <"+V+"> ]"),fe(">>")},fa=m.__private__.putHeader=function(){fe("%PDF-"+x),fe("%")},mi=m.__private__.putXRef=function(){var F="0000000000";fe("xref"),fe("0 "+(he+1)),fe("0000000000 65535 f ");for(var we=1;we<=he;we++)typeof ve[we]=="function"?fe((F+ve[we]()).slice(-10)+" 00000 n "):ve[we]!==void 0?fe((F+ve[we]).slice(-10)+" 00000 n "):fe("0000000000 00000 n ")},go=m.__private__.buildDocument=function(){Q(),ie(ee),ut.publish("buildDocument"),fa(),yr(),Ki(),Hi(),d!==null&&js(),Oo(),Xs();var F=X;return mi(),ra(),fe("startxref"),fe(""+F),fe("%%EOF"),ie(Te[G]),ee.join(`
`)},fs=m.__private__.getBlob=function(F){return new Blob([de(F)],{type:"application/pdf"})},zs=m.output=m.__private__.output=$r(function(F,we){switch(typeof(we=we||{})=="string"?we={filename:we}:we.filename=we.filename||"generated.pdf",F){case void 0:return go();case"save":m.save(we.filename);break;case"arraybuffer":return de(go());case"blob":return fs(go());case"bloburi":case"bloburl":if(Nr.URL!==void 0&&typeof Nr.URL.createObjectURL=="function")return Nr.URL&&Nr.URL.createObjectURL(fs(go()))||void 0;Ls.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var et="",dt=go();try{et=Ab(dt)}catch{et=Ab(unescape(encodeURIComponent(dt)))}return"data:application/pdf;filename="+we.filename+";base64,"+et;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Nr)==="[object Window]"){var Pt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Gt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';we.pdfObjectUrl&&(Pt=we.pdfObjectUrl,Gt="");var pn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Pt+'"'+Gt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(we)+");<\/script></body></html>",Rn=Nr.open();return Rn!==null&&Rn.document.write(pn),Rn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Nr)==="[object Window]"){var Vn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(we.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+we.filename+'" width="500px" height="400px" /></body></html>',ar=Nr.open();if(ar!==null){ar.document.write(Vn);var wr=this;ar.document.documentElement.querySelector("#pdfViewer").onload=function(){ar.document.title=we.filename,ar.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(wr.output("bloburl"))}}return ar}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Nr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Vr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",we)+'"></iframe></body></html>',Zi=Nr.open();if(Zi!==null&&(Zi.document.write(Vr),Zi.document.title=we.filename),Zi||typeof safari>"u")return Zi;break;case"datauri":case"dataurl":return Nr.document.location.href=this.output("datauristring",we);default:return null}}),mo=function(F){return Array.isArray(rt)===!0&&rt.indexOf(F)>-1};switch(r){case"pt":it=1;break;case"mm":it=72/25.4;break;case"cm":it=72/2.54;break;case"in":it=72;break;case"px":it=mo("px_scaling")==1?.75:96/72;break;case"pc":case"em":it=12;break;case"ex":it=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);it=r}var ps=null;Oe(),J();var iu=function(F){return d!==null?ps.encryptor(F,0):function(we){return we}},Tl=m.__private__.getPageInfo=m.getPageInfo=function(F){if(isNaN(F)||F%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:sr[F].objId,pageNumber:F,pageContext:sr[F]}},mr=m.__private__.getPageInfoByObjId=function(F){if(isNaN(F)||F%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var we in sr)if(sr[we].objId===F)break;return Tl(we)},_r=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:sr[G].objId,pageNumber:G,pageContext:sr[G]}};m.addPage=function(){return Dn.apply(this,arguments),this},m.setPage=function(){return Fr.apply(this,arguments),ie.call(this,Te[G]),this},m.insertPage=function(F){return this.addPage(),this.movePage(G,F),this},m.movePage=function(F,we){var et,dt;if(F>we){et=Te[F],dt=sr[F];for(var Pt=F;Pt>we;Pt--)Te[Pt]=Te[Pt-1],sr[Pt]=sr[Pt-1];Te[we]=et,sr[we]=dt,this.setPage(we)}else if(F<we){et=Te[F],dt=sr[F];for(var Gt=F;Gt<we;Gt++)Te[Gt]=Te[Gt+1],sr[Gt]=sr[Gt+1];Te[we]=et,sr[we]=dt,this.setPage(we)}return this},m.deletePage=function(){return mn.apply(this,arguments),this},m.__private__.text=m.text=function(F,we,et,dt,Pt){var Gt,pn,Rn,Vn,ar,wr,Vr,Zi,fi,Si=(dt=dt||{}).scope||this;if(typeof F=="number"&&typeof we=="number"&&(typeof et=="string"||Array.isArray(et))){var _s=et;et=we,we=F,F=_s}if(arguments[3]instanceof Jt?(N("The transform parameter of text() with a Matrix value"),fi=Pt):(Rn=arguments[4],Vn=arguments[5],hs(Vr=arguments[3])==="object"&&Vr!==null||(typeof Rn=="string"&&(Vn=Rn,Rn=null),typeof Vr=="string"&&(Vn=Vr,Vr=null),typeof Vr=="number"&&(Rn=Vr,Vr=null),dt={flags:Vr,angle:Rn,align:Vn})),isNaN(we)||isNaN(et)||F==null)throw new Error("Invalid arguments passed to jsPDF.text");if(F.length===0)return Si;var Es="",Zo=!1,Ur=typeof dt.lineHeightFactor=="number"?dt.lineHeightFactor:ou,Js=Si.internal.scaleFactor;function Bl(Ei){return Ei=Ei.split("	").join(Array(dt.TabLen||9).join(" ")),Ii(Ei,Vr)}function bo(Ei){for(var Bi,ws=Ei.concat(),Gi=[],Qo=ws.length;Qo--;)typeof(Bi=ws.shift())=="string"?Gi.push(Bi):Array.isArray(Ei)&&(Bi.length===1||Bi[1]===void 0&&Bi[2]===void 0)?Gi.push(Bi[0]):Gi.push([Bi[0],Bi[1],Bi[2]]);return Gi}function Au(Ei,Bi){var ws;if(typeof Ei=="string")ws=Bi(Ei)[0];else if(Array.isArray(Ei)){for(var Gi,Qo,Io=Ei.concat(),sa=[],ec=Io.length;ec--;)typeof(Gi=Io.shift())=="string"?sa.push(Bi(Gi)[0]):Array.isArray(Gi)&&typeof Gi[0]=="string"&&(Qo=Bi(Gi[0],Gi[1],Gi[2]),sa.push([Qo[0],Qo[1],Qo[2]]));ws=sa}return ws}var Ma=!1,Qu=!0;if(typeof F=="string")Ma=!0;else if(Array.isArray(F)){var ml=F.concat();pn=[];for(var vl,Ps=ml.length;Ps--;)(typeof(vl=ml.shift())!="string"||Array.isArray(vl)&&typeof vl[0]!="string")&&(Qu=!1);Ma=Qu}if(Ma===!1)throw new Error('Type of text must be string or Array. "'+F+'" is not recognized.');typeof F=="string"&&(F=F.match(/[\r?\n]/)?F.split(/\r\n|\r|\n/g):[F]);var ka=Ie/Si.internal.scaleFactor,Xo=ka*(Ur-1);switch(dt.baseline){case"bottom":et-=Xo;break;case"top":et+=ka-Xo;break;case"hanging":et+=ka-2*Xo;break;case"middle":et+=ka/2-Xo}if((wr=dt.maxWidth||0)>0&&(typeof F=="string"?F=Si.splitTextToSize(F,wr):Object.prototype.toString.call(F)==="[object Array]"&&(F=F.reduce(function(Ei,Bi){return Ei.concat(Si.splitTextToSize(Bi,wr))},[]))),Gt={text:F,x:we,y:et,options:dt,mutex:{pdfEscape:Ii,activeFontKey:ot,fonts:Ln,activeFontSize:Ie}},ut.publish("preProcessText",Gt),F=Gt.text,Rn=(dt=Gt.options).angle,!(fi instanceof Jt)&&Rn&&typeof Rn=="number"){Rn*=Math.PI/180,dt.rotationDirection===0&&(Rn=-Rn),z===O.ADVANCED&&(Rn=-Rn);var No=Math.cos(Rn),Rl=Math.sin(Rn);fi=new Jt(No,Rl,-Rl,No,0,0)}else Rn&&Rn instanceof Jt&&(fi=Rn);z!==O.ADVANCED||fi||(fi=nn),(ar=dt.charSpace||uu)!==void 0&&(Es+=pe(B(ar))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Zi=dt.horizontalScale)!==void 0&&(Es+=pe(100*Zi)+` Tz
`),dt.lang;var Qs=-1,_o=dt.renderingMode!==void 0?dt.renderingMode:dt.stroke,wo=Si.internal.getCurrentPageInfo().pageContext;switch(_o){case 0:case!1:case"fill":Qs=0;break;case 1:case!0:case"stroke":Qs=1;break;case 2:case"fillThenStroke":Qs=2;break;case 3:case"invisible":Qs=3;break;case 4:case"fillAndAddForClipping":Qs=4;break;case 5:case"strokeAndAddPathForClipping":Qs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Qs=6;break;case 7:case"addToPathForClipping":Qs=7}var Ac=wo.usedRenderingMode!==void 0?wo.usedRenderingMode:-1;Qs!==-1?Es+=Qs+` Tr
`:Ac!==-1&&(Es+=`0 Tr
`),Qs!==-1&&(wo.usedRenderingMode=Qs),Vn=dt.align||"left";var Ns,Wa=Ie*Ur,eo=Si.internal.pageSize.getWidth(),to=Ln[ot];ar=dt.charSpace||uu,wr=dt.maxWidth||0,Vr=Object.assign({autoencode:!0,noBOM:!0},dt.flags);var Ga=[],qa=function(Ei){return Si.getStringUnitWidth(Ei,{font:to,charSpace:ar,fontSize:Ie,doKerning:!1})*Ie/Js};if(Object.prototype.toString.call(F)==="[object Array]"){var no;pn=bo(F),Vn!=="left"&&(Ns=pn.map(qa));var Vs,Aa=0;if(Vn==="right"){we-=Ns[0],F=[],Ps=pn.length;for(var Jo=0;Jo<Ps;Jo++)Jo===0?(Vs=cr(we),no=ys(et)):(Vs=B(Aa-Ns[Jo]),no=-Wa),F.push([pn[Jo],Vs,no]),Aa=Ns[Jo]}else if(Vn==="center"){we-=Ns[0]/2,F=[],Ps=pn.length;for(var ro=0;ro<Ps;ro++)ro===0?(Vs=cr(we),no=ys(et)):(Vs=B((Aa-Ns[ro])/2),no=-Wa),F.push([pn[ro],Vs,no]),Aa=Ns[ro]}else if(Vn==="left"){F=[],Ps=pn.length;for(var _t=0;_t<Ps;_t++)F.push(pn[_t])}else if(Vn==="justify"&&to.encoding==="Identity-H"){F=[],Ps=pn.length,wr=wr!==0?wr:eo;for(var Kt=0,Nt=0;Nt<Ps;Nt++)if(no=Nt===0?ys(et):-Wa,Vs=Nt===0?cr(we):Kt,Nt<Ps-1){var In=B((wr-Ns[Nt])/(pn[Nt].split(" ").length-1)),Jn=pn[Nt].split(" ");F.push([Jn[0]+" ",Vs,no]),Kt=0;for(var Cr=1;Cr<Jn.length;Cr++){var Qi=(qa(Jn[Cr-1]+" "+Jn[Cr])-qa(Jn[Cr]))*Js+In;Cr==Jn.length-1?F.push([Jn[Cr],Qi,0]):F.push([Jn[Cr]+" ",Qi,0]),Kt-=Qi}}else F.push([pn[Nt],Vs,no]);F.push(["",Kt,0])}else{if(Vn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(F=[],Ps=pn.length,wr=wr!==0?wr:eo,Nt=0;Nt<Ps;Nt++)no=Nt===0?ys(et):-Wa,Vs=Nt===0?cr(we):0,Nt<Ps-1?Ga.push(pe(B((wr-Ns[Nt])/(pn[Nt].split(" ").length-1)))):Ga.push(0),F.push([pn[Nt],Vs,no])}}var Ci=typeof dt.R2L=="boolean"?dt.R2L:Ge;Ci===!0&&(F=Au(F,function(Ei,Bi,ws){return[Ei.split("").reverse().join(""),Bi,ws]})),Gt={text:F,x:we,y:et,options:dt,mutex:{pdfEscape:Ii,activeFontKey:ot,fonts:Ln,activeFontSize:Ie}},ut.publish("postProcessText",Gt),F=Gt.text,Zo=Gt.mutex.isHex||!1;var du=Ln[ot].encoding;du!=="WinAnsiEncoding"&&du!=="StandardEncoding"||(F=Au(F,function(Ei,Bi,ws){return[Bl(Ei),Bi,ws]})),pn=bo(F),F=[];for(var xo,es,Ta,Ya=0,Da=1,Oa=Array.isArray(pn[0])?Da:Ya,Na="",Qr=function(Ei,Bi,ws){var Gi="";return ws instanceof Jt?(ws=typeof dt.angle=="number"?Ht(ws,new Jt(1,0,0,1,Ei,Bi)):Ht(new Jt(1,0,0,1,Ei,Bi),ws),z===O.ADVANCED&&(ws=Ht(new Jt(1,0,0,-1,0,0),ws)),Gi=ws.join(" ")+` Tm
`):Gi=pe(Ei)+" "+pe(Bi)+` Td
`,Gi},va=0;va<pn.length;va++){switch(Na="",Oa){case Da:Ta=(Zo?"<":"(")+pn[va][0]+(Zo?">":")"),xo=parseFloat(pn[va][1]),es=parseFloat(pn[va][2]);break;case Ya:Ta=(Zo?"<":"(")+pn[va]+(Zo?">":")"),xo=cr(we),es=ys(et)}Ga!==void 0&&Ga[va]!==void 0&&(Na=Ga[va]+` Tw
`),va===0?F.push(Na+Qr(xo,es,fi)+Ta):Oa===Ya?F.push(Na+Ta):Oa===Da&&F.push(Na+Qr(xo,es,fi)+Ta)}F=Oa===Ya?F.join(` Tj
T* `):F.join(` Tj
`),F+=` Tj
`;var Us=`BT
/`;return Us+=ot+" "+Ie+` Tf
`,Us+=pe(Ie*Ur)+` TL
`,Us+=Pa+`
`,Us+=Es,Us+=F,fe(Us+="ET"),v[ot]=!0,Si};var vo=m.__private__.clip=m.clip=function(F){return fe(F==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return vo("evenodd")},m.__private__.discardPath=m.discardPath=function(){return fe("n"),this};var Xr=m.__private__.isValidStyle=function(F){var we=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(F)!==-1&&(we=!0),we};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(F){return Xr(F)&&(c=F),this};var Ai=m.__private__.getStyle=m.getStyle=function(F){var we=c;switch(F){case"D":case"S":we="S";break;case"F":we="f";break;case"FD":case"DF":we="B";break;case"f":case"f*":case"B":case"B*":we=F}return we},yo=m.close=function(){return fe("h"),this};m.stroke=function(){return fe("S"),this},m.fill=function(F){return Cs("f",F),this},m.fillEvenOdd=function(F){return Cs("f*",F),this},m.fillStroke=function(F){return Cs("B",F),this},m.fillStrokeEvenOdd=function(F){return Cs("B*",F),this};var Cs=function(F,we){hs(we)==="object"?Ju(we,F):fe(F)},pa=function(F){F===null||z===O.ADVANCED&&F===void 0||(F=Ai(F),fe(F))};function pl(F,we,et,dt,Pt){var Gt=new hp(we||this.boundingBox,et||this.xStep,dt||this.yStep,this.gState,Pt||this.matrix);Gt.stream=this.stream;var pn=F+"$$"+this.cloneIndex+++"$$";return an(pn,Gt),Gt}var Ju=function(F,we){var et=wn[F.key],dt=en[et];if(dt instanceof of)fe("q"),fe(su(we)),dt.gState&&m.setGState(dt.gState),fe(F.matrix.toString()+" cm"),fe("/"+et+" sh"),fe("Q");else if(dt instanceof hp){var Pt=new Jt(1,0,0,-1,0,Ha());F.matrix&&(Pt=Pt.multiply(F.matrix||nn),et=pl.call(dt,F.key,F.boundingBox,F.xStep,F.yStep,Pt).id),fe("q"),fe("/Pattern cs"),fe("/"+et+" scn"),dt.gState&&m.setGState(dt.gState),fe(we),fe("Q")}},su=function(F){switch(F){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Pr=m.moveTo=function(F,we){return fe(pe(B(F))+" "+pe(R(we))+" m"),this},qr=m.lineTo=function(F,we){return fe(pe(B(F))+" "+pe(R(we))+" l"),this},gl=m.curveTo=function(F,we,et,dt,Pt,Gt){return fe([pe(B(F)),pe(R(we)),pe(B(et)),pe(R(dt)),pe(B(Pt)),pe(R(Gt)),"c"].join(" ")),this};m.__private__.line=m.line=function(F,we,et,dt,Pt){if(isNaN(F)||isNaN(we)||isNaN(et)||isNaN(dt)||!Xr(Pt))throw new Error("Invalid arguments passed to jsPDF.line");return z===O.COMPAT?this.lines([[et-F,dt-we]],F,we,[1,1],Pt||"S"):this.lines([[et-F,dt-we]],F,we,[1,1]).stroke()},m.__private__.lines=m.lines=function(F,we,et,dt,Pt,Gt){var pn,Rn,Vn,ar,wr,Vr,Zi,fi,Si,_s,Es,Zo;if(typeof F=="number"&&(Zo=et,et=we,we=F,F=Zo),dt=dt||[1,1],Gt=Gt||!1,isNaN(we)||isNaN(et)||!Array.isArray(F)||!Array.isArray(dt)||!Xr(Pt)||typeof Gt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Pr(we,et),pn=dt[0],Rn=dt[1],ar=F.length,_s=we,Es=et,Vn=0;Vn<ar;Vn++)(wr=F[Vn]).length===2?(_s=wr[0]*pn+_s,Es=wr[1]*Rn+Es,qr(_s,Es)):(Vr=wr[0]*pn+_s,Zi=wr[1]*Rn+Es,fi=wr[2]*pn+_s,Si=wr[3]*Rn+Es,_s=wr[4]*pn+_s,Es=wr[5]*Rn+Es,gl(Vr,Zi,fi,Si,_s,Es));return Gt&&yo(),pa(Pt),this},m.path=function(F){for(var we=0;we<F.length;we++){var et=F[we],dt=et.c;switch(et.op){case"m":Pr(dt[0],dt[1]);break;case"l":qr(dt[0],dt[1]);break;case"c":gl.apply(this,dt);break;case"h":yo()}}return this},m.__private__.rect=m.rect=function(F,we,et,dt,Pt){if(isNaN(F)||isNaN(we)||isNaN(et)||isNaN(dt)||!Xr(Pt))throw new Error("Invalid arguments passed to jsPDF.rect");return z===O.COMPAT&&(dt=-dt),fe([pe(B(F)),pe(R(we)),pe(B(et)),pe(B(dt)),"re"].join(" ")),pa(Pt),this},m.__private__.triangle=m.triangle=function(F,we,et,dt,Pt,Gt,pn){if(isNaN(F)||isNaN(we)||isNaN(et)||isNaN(dt)||isNaN(Pt)||isNaN(Gt)||!Xr(pn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[et-F,dt-we],[Pt-et,Gt-dt],[F-Pt,we-Gt]],F,we,[1,1],pn,!0),this},m.__private__.roundedRect=m.roundedRect=function(F,we,et,dt,Pt,Gt,pn){if(isNaN(F)||isNaN(we)||isNaN(et)||isNaN(dt)||isNaN(Pt)||isNaN(Gt)||!Xr(pn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Rn=4/3*(Math.SQRT2-1);return Pt=Math.min(Pt,.5*et),Gt=Math.min(Gt,.5*dt),this.lines([[et-2*Pt,0],[Pt*Rn,0,Pt,Gt-Gt*Rn,Pt,Gt],[0,dt-2*Gt],[0,Gt*Rn,-Pt*Rn,Gt,-Pt,Gt],[2*Pt-et,0],[-Pt*Rn,0,-Pt,-Gt*Rn,-Pt,-Gt],[0,2*Gt-dt],[0,-Gt*Rn,Pt*Rn,-Gt,Pt,-Gt]],F+Pt,we,[1,1],pn,!0),this},m.__private__.ellipse=m.ellipse=function(F,we,et,dt,Pt){if(isNaN(F)||isNaN(we)||isNaN(et)||isNaN(dt)||!Xr(Pt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Gt=4/3*(Math.SQRT2-1)*et,pn=4/3*(Math.SQRT2-1)*dt;return Pr(F+et,we),gl(F+et,we-pn,F+Gt,we-dt,F,we-dt),gl(F-Gt,we-dt,F-et,we-pn,F-et,we),gl(F-et,we+pn,F-Gt,we+dt,F,we+dt),gl(F+Gt,we+dt,F+et,we+pn,F+et,we),pa(Pt),this},m.__private__.circle=m.circle=function(F,we,et,dt){if(isNaN(F)||isNaN(we)||isNaN(et)||!Xr(dt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(F,we,et,et,dt)},m.setFont=function(F,we,et){return et&&(we=me(we,et)),ot=ms(F,we,{disableWarning:!1}),this};var Mc=m.__private__.getFont=m.getFont=function(){return Ln[ms.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var F,we,et={};for(F in Mn)if(Mn.hasOwnProperty(F))for(we in et[F]=[],Mn[F])Mn[F].hasOwnProperty(we)&&et[F].push(we);return et},m.addFont=function(F,we,et,dt,Pt){var Gt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Gt.indexOf(arguments[3])!==-1?Pt=arguments[3]:arguments[3]&&Gt.indexOf(arguments[3])==-1&&(et=me(et,dt)),Pt=Pt||"Identity-H",po.call(this,F,we,et,Pt)};var ou,Pu=t.lineWidth||.200025,Dl=m.__private__.getLineWidth=m.getLineWidth=function(){return Pu},au=m.__private__.setLineWidth=m.setLineWidth=function(F){return Pu=F,fe(pe(B(F))+" w"),this};m.__private__.setLineDash=Tr.API.setLineDash=Tr.API.setLineDashPattern=function(F,we){if(F=F||[],we=we||0,isNaN(we)||!Array.isArray(F))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return F=F.map(function(et){return pe(B(et))}).join(" "),we=pe(B(we)),fe("["+F+"] "+we+" d"),this};var Mu=m.__private__.getLineHeight=m.getLineHeight=function(){return Ie*ou};m.__private__.getLineHeight=m.getLineHeight=function(){return Ie*ou};var Jr=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(F){return typeof(F=F||1.15)=="number"&&(ou=F),this},vs=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return ou};Jr(t.lineHeight);var cr=m.__private__.getHorizontalCoordinate=function(F){return B(F)},ys=m.__private__.getVerticalCoordinate=function(F){return z===O.ADVANCED?F:sr[G].mediaBox.topRightY-sr[G].mediaBox.bottomLeftY-B(F)},Ol=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(F){return pe(cr(F))},Ua=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(F){return pe(ys(F))},Ji=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Mi(Ji)},m.__private__.setStrokeColor=m.setDrawColor=function(F,we,et,dt){return Ji=Br({ch1:F,ch2:we,ch3:et,ch4:dt,pdfColorType:"draw",precision:2}),fe(Ji),this};var ku=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Mi(ku)},m.__private__.setFillColor=m.setFillColor=function(F,we,et,dt){return ku=Br({ch1:F,ch2:we,ch3:et,ch4:dt,pdfColorType:"fill",precision:2}),fe(ku),this};var Pa=t.textColor||"0 g",lu=m.__private__.getTextColor=m.getTextColor=function(){return Mi(Pa)};m.__private__.setTextColor=m.setTextColor=function(F,we,et,dt){return Pa=Br({ch1:F,ch2:we,ch3:et,ch4:dt,pdfColorType:"text",precision:3}),this};var uu=t.charSpace,ia=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(uu||0)};m.__private__.setCharSpace=m.setCharSpace=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return uu=F,this};var cu=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(F){var we=m.CapJoinStyles[F];if(we===void 0)throw new Error("Line cap style of '"+F+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return cu=we,fe(we+" J"),this};var xi=0;m.__private__.setLineJoin=m.setLineJoin=function(F){var we=m.CapJoinStyles[F];if(we===void 0)throw new Error("Line join style of '"+F+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return xi=we,fe(we+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(F){if(F=F||0,isNaN(F))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return fe(pe(B(F))+" M"),this},m.GState=Kv,m.setGState=function(F){(F=typeof F=="string"?En[Xn[F]]:kc(null,F)).equals(dr)||(fe("/"+F.id+" gs"),dr=F)};var kc=function(F,we){if(!F||!Xn[F]){var et=!1;for(var dt in En)if(En.hasOwnProperty(dt)&&En[dt].equals(we)){et=!0;break}if(et)we=En[dt];else{var Pt="GS"+(Object.keys(En).length+1).toString(10);En[Pt]=we,we.id=Pt}return F&&(Xn[F]=we.id),ut.publish("addGState",we),we}};m.addGState=function(F,we){return kc(F,we),this},m.saveGraphicsState=function(){return fe("q"),Zn.push({key:ot,size:Ie,color:Pa}),this},m.restoreGraphicsState=function(){fe("Q");var F=Zn.pop();return ot=F.key,Ie=F.size,Pa=F.color,dr=null,this},m.setCurrentTransformationMatrix=function(F){return fe(F.toString()+" cm"),this},m.comment=function(F){return fe("#"+F),this};var $s=function(F,we){var et=F||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return et},set:function(Gt){isNaN(Gt)||(et=parseFloat(Gt))}});var dt=we||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return dt},set:function(Gt){isNaN(Gt)||(dt=parseFloat(Gt))}});var Pt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Pt},set:function(Gt){Pt=Gt.toString()}}),this},ga=function(F,we,et,dt){$s.call(this,F,we),this.type="rect";var Pt=et||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Pt},set:function(pn){isNaN(pn)||(Pt=parseFloat(pn))}});var Gt=dt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Gt},set:function(pn){isNaN(pn)||(Gt=parseFloat(pn))}}),this},hu=function(){this.page=vr,this.currentPage=G,this.pages=Te.slice(0),this.pagesContext=sr.slice(0),this.x=Vt,this.y=Qt,this.matrix=kn,this.width=Li(G),this.height=Ha(G),this.outputDestination=ge,this.id="",this.objectNumber=-1};hu.prototype.restore=function(){vr=this.page,G=this.currentPage,sr=this.pagesContext,Te=this.pages,Vt=this.x,Qt=this.y,kn=this.matrix,Ko(G,this.width),bs(G,this.height),ge=this.outputDestination};var ma=function(F,we,et,dt,Pt){Yn.push(new hu),vr=G=0,Te=[],Vt=F,Qt=we,kn=Pt,Er([et,dt])},Nl=function(F){if(Tn[F])Yn.pop().restore();else{var we=new hu,et="Xo"+(Object.keys(jt).length+1).toString(10);we.id=et,Tn[F]=et,jt[et]=we,ut.publish("addFormObject",we),Yn.pop().restore()}};for(var Il in m.beginFormObject=function(F,we,et,dt,Pt){return ma(F,we,et,dt,Pt),this},m.endFormObject=function(F){return Nl(F),this},m.doFormObject=function(F,we){var et=jt[Tn[F]];return fe("q"),fe(we.toString()+" cm"),fe("/"+et.id+" Do"),fe("Q"),this},m.getFormObject=function(F){var we=jt[Tn[F]];return{x:we.x,y:we.y,width:we.width,height:we.height,matrix:we.matrix}},m.save=function(F,we){return F=F||"generated.pdf",(we=we||{}).returnPromise=we.returnPromise||!1,we.returnPromise===!1?(ef(fs(go()),F),typeof ef.unload=="function"&&Nr.setTimeout&&setTimeout(ef.unload,911),this):new Promise(function(et,dt){try{var Pt=ef(fs(go()),F);typeof ef.unload=="function"&&Nr.setTimeout&&setTimeout(ef.unload,911),et(Pt)}catch(Gt){dt(Gt.message)}})},Tr.API)Tr.API.hasOwnProperty(Il)&&(Il==="events"&&Tr.API.events.length?function(F,we){var et,dt,Pt;for(Pt=we.length-1;Pt!==-1;Pt--)et=we[Pt][0],dt=we[Pt][1],F.subscribe.apply(F,[et].concat(typeof dt=="function"?[dt]:dt))}(ut,Tr.API.events):m[Il]=Tr.API[Il]);var Li=m.getPageWidth=function(F){return(sr[F=F||G].mediaBox.topRightX-sr[F].mediaBox.bottomLeftX)/it},Ko=m.setPageWidth=function(F,we){sr[F].mediaBox.topRightX=we*it+sr[F].mediaBox.bottomLeftX},Ha=m.getPageHeight=function(F){return(sr[F=F||G].mediaBox.topRightY-sr[F].mediaBox.bottomLeftY)/it},bs=m.setPageHeight=function(F,we){sr[F].mediaBox.topRightY=we*it+sr[F].mediaBox.bottomLeftY};return m.internal={pdfEscape:Ii,getStyle:Ai,getFont:Mc,getFontSize:Je,getCharSpace:ia,getTextColor:lu,getLineHeight:Mu,getLineHeightFactor:vs,getLineWidth:Dl,write:Ce,getHorizontalCoordinate:cr,getVerticalCoordinate:ys,getCoordinateString:Ol,getVerticalCoordinateString:Ua,collections:{},newObject:St,newAdditionalObject:Ot,newObjectDeferred:Ut,newObjectDeferredBegin:Lr,getFilters:xr,putStream:ur,events:ut,scaleFactor:it,pageSize:{getWidth:function(){return Li(G)},setWidth:function(F){Ko(G,F)},getHeight:function(){return Ha(G)},setHeight:function(F){bs(G,F)}},encryptionOptions:d,encryption:ps,getEncryptor:iu,output:zs,getNumberOfPages:ai,pages:Te,out:fe,f2:q,f3:I,getPageInfo:Tl,getPageInfoByObjId:mr,getCurrentPageInfo:_r,getPDFVersion:E,Point:$s,Rectangle:ga,Matrix:Jt,hasHotfix:mo},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Li(G)},set:function(F){Ko(G,F)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Ha(G)},set:function(F){bs(G,F)},enumerable:!0,configurable:!0}),Nn.call(m,Xe),ot="F1",Dn(i,n),ut.publish("initialized"),m}ap.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},ap.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ap.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},ap.prototype.processOwnerPassword=function(t,e){return Db(Tb(e).substr(0,5),t)},ap.prototype.encryptor=function(t,e){var n=Tb(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Db(n,r)}},Kv.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||hs(t)!==hs(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},Tr.API={events:[]},Tr.version="2.5.2";var Po=Tr.API,H_=1,Ef=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Kf=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Kr=function(t){return t.toFixed(2)},Qh=function(t){return t.toFixed(5)};Po.__acroform__={};var ru=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},C5=function(t){return t*H_},jc=function(t){var e=new JE,n=Qn.internal.getHeight(t)||0,r=Qn.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Kr(r)),Number(Kr(n))],e},PH=Po.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},MH=Po.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},kH=Po.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Vo=Po.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return kH(t,e-1)},Uo=Po.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return PH(t,e-1)},Ho=Po.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return MH(t,e-1)},AH=Po.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(Kr(l.lowerLeft_X)),Number(Kr(l.lowerLeft_Y)),Number(Kr(l.upperRight_X)),Number(Kr(l.upperRight_Y))]},TH=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=Ob(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Kr(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=jc(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},Ob=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(I){return I.split(`
`)}):i.map(function(I){return[I]});var s=n,o=Qn.internal.getHeight(t)||0;o=o<0?-o:o;var a=Qn.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(I,B,$){if(I+1<i.length){var R=B+" "+i[I+1][0];return S0(R,t,$).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,d,p=S0("3",t,s).height,v=t.multiline?o-s:(o-p)/2,m=v+=2,x=0,E=0,M=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+S0(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var A="",O=0,z=0;z<i.length;z++)if(i.hasOwnProperty(z)){var K=!1;if(i[z].length!==1&&M!==i[z].length-1){if((p+2)*(O+2)+2>o)continue e;A+=i[z][M],K=!0,E=z,z--}else{A=(A+=i[z][M]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var ne=parseInt(z),me=l(ne,A,s),pe=z>=i.length-1;if(me&&!pe){A+=" ",M=0;continue}if(me||pe){if(pe)E=ne;else if(t.multiline&&(p+2)*(O+2)+2>o)continue e}else{if(!t.multiline||(p+2)*(O+2)+2>o)continue e;E=ne}}for(var N="",j=x;j<=E;j++){var q=i[j];if(t.multiline){if(j===E){N+=q[M]+" ",M=(M+1)%q.length;continue}if(j===x){N+=q[q.length-1]+" ";continue}}N+=q[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,d=S0(N,t,s).width,t.textAlign){case"right":c=a-d-2;break;case"center":c=(a-d)/2;break;case"left":default:c=2}e+=Kr(c)+" "+Kr(m)+` Td
`,e+="("+Ef(N)+`) Tj
`,e+=-Kr(c)+` 0 Td
`,m=-(s+2),d=0,x=K?E:E+1,O++,A=""}break}return r.text=e,r.fontSize=s,r},S0=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},DH={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},OH=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},NH=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),hs(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},IH=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Ec.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(DH)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");H_=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new QE,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&OH(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=AH(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Qn.createDefaultAppearanceStream(a),hs(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var d=TH(a);l.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(a.appearanceStreamContent){var p="";for(var v in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(v)){var m=a.appearanceStreamContent[v];if(p+="/"+v+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var x=m[o];typeof x=="function"&&(x=x.call(i,a)),p+="/"+o+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=m)=="function"&&(x=x.call(i,a)),p+="/"+o+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&NH(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},XE=Po.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),hs(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Ef(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},a2=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Ef(r(t))+")"},Kc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Kc.prototype.toString=function(){return this.objId+" 0 R"},Kc.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Kc.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:XE(i,this.objId,this.scope)}):i instanceof Kc?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var JE=function(){Kc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};ru(JE,Kc);var QE=function(){Kc.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Ef(n(t))+")"}},set:function(n){t=n}})};ru(QE,Kc);var Ec=function t(){Kc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');e=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Vo(e,3)},set:function(A){A?this.F=Uo(e,3):this.F=Ho(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');n=A}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(A){r=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(A){r[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(A){r[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(A){r[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(A){r[3]=A}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Zv)return;s="FieldObject"+t.FieldNum++}var A=function(O){return O};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+Ef(A(s))+")"},set:function(A){s=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(A){s=A}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(A){o=A}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(A){a=A}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(A){l=A}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/H_:c},set:function(A){c=A}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(A){d=A}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Zv||this instanceof pf))return a2(p,this.objId,this.scope)},set:function(A){A=A.toString(),p=A}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof xa?v:a2(v,this.objId,this.scope)},set:function(A){A=A.toString(),v=this instanceof xa?A:A.substr(0,1)==="("?Kf(A.substr(1,A.length-2)):Kf(A)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof xa?Kf(v.substr(1,v.length-1)):v},set:function(A){A=A.toString(),v=this instanceof xa?"/"+A:A}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof xa?m:a2(m,this.objId,this.scope)},set:function(A){A=A.toString(),m=this instanceof xa?A:A.substr(0,1)==="("?Kf(A.substr(1,A.length-2)):Kf(A)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof xa?Kf(m.substr(1,m.length-1)):m},set:function(A){A=A.toString(),m=this instanceof xa?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(A){A=!!A,E=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(A){x=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,1)},set:function(A){A?this.Ff=Uo(this.Ff,1):this.Ff=Ho(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,2)},set:function(A){A?this.Ff=Uo(this.Ff,2):this.Ff=Ho(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,3)},set:function(A){A?this.Ff=Uo(this.Ff,3):this.Ff=Ho(this.Ff,3)}});var M=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(M!==null)return M},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');M=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(M){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:M=2;break;case"center":case 1:M=1;break;case"left":case 0:default:M=0}}})};ru(Ec,Kc);var bp=function(){Ec.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return XE(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,18)},set:function(n){n?this.Ff=Uo(this.Ff,18):this.Ff=Ho(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Uo(this.Ff,19):this.Ff=Ho(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,20)},set:function(n){n?(this.Ff=Uo(this.Ff,20),e.sort()):this.Ff=Ho(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,22)},set:function(n){n?this.Ff=Uo(this.Ff,22):this.Ff=Ho(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,23)},set:function(n){n?this.Ff=Uo(this.Ff,23):this.Ff=Ho(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,27)},set:function(n){n?this.Ff=Uo(this.Ff,27):this.Ff=Ho(this.Ff,27)}}),this.hasAppearanceStream=!1};ru(bp,Ec);var _p=function(){bp.call(this),this.fontName="helvetica",this.combo=!1};ru(_p,bp);var wp=function(){_p.call(this),this.combo=!0};ru(wp,_p);var ov=function(){wp.call(this),this.edit=!0};ru(ov,wp);var xa=function(){Ec.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,15)},set:function(n){n?this.Ff=Uo(this.Ff,15):this.Ff=Ho(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,16)},set:function(n){n?this.Ff=Uo(this.Ff,16):this.Ff=Ho(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,17)},set:function(n){n?this.Ff=Uo(this.Ff,17):this.Ff=Ho(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,26)},set:function(n){n?this.Ff=Uo(this.Ff,26):this.Ff=Ho(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Ef(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){hs(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};ru(xa,Ec);var av=function(){xa.call(this),this.pushButton=!0};ru(av,xa);var xp=function(){xa.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};ru(xp,xa);var Zv=function(){var t,e;Ec.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Ef(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){hs(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Qn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ru(Zv,Ec),xp.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},xp.prototype.createOption=function(t){var e=new Zv;return e.Parent=this,e.optionName=t,this.Kids.push(e),BH.call(this.scope,e),e};var lv=function(){xa.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Qn.CheckBox.createAppearanceStream()};ru(lv,xa);var pf=function(){Ec.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,13)},set:function(e){e?this.Ff=Uo(this.Ff,13):this.Ff=Ho(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,21)},set:function(e){e?this.Ff=Uo(this.Ff,21):this.Ff=Ho(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,23)},set:function(e){e?this.Ff=Uo(this.Ff,23):this.Ff=Ho(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,24)},set:function(e){e?this.Ff=Uo(this.Ff,24):this.Ff=Ho(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,25)},set:function(e){e?this.Ff=Uo(this.Ff,25):this.Ff=Ho(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,26)},set:function(e){e?this.Ff=Uo(this.Ff,26):this.Ff=Ho(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ru(pf,Ec);var uv=function(){pf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Vo(this.Ff,14)},set:function(t){t?this.Ff=Uo(this.Ff,14):this.Ff=Ho(this.Ff,14)}}),this.password=!0};ru(uv,pf);var Qn={CheckBox:{createAppearanceStream:function(){return{N:{On:Qn.CheckBox.YesNormal},D:{On:Qn.CheckBox.YesPushDown,Off:Qn.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=Ob(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Kr(Qn.internal.getWidth(t))+" "+Kr(Qn.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Kr(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=jc(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=Qn.internal.getHeight(t),o=Qn.internal.getWidth(t),a=Ob(t,t.caption);return i.push("1 g"),i.push("0 0 "+Kr(o)+" "+Kr(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Kr(o-1)+" "+Kr(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Kr(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Kr(Qn.internal.getWidth(t))+" "+Kr(Qn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Qn.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Qn.RadioButton.Circle.YesNormal,e.D[t]=Qn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=Qn.internal.getWidth(t)<=Qn.internal.getHeight(t)?Qn.internal.getWidth(t)/4:Qn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Qn.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Qh(Qn.internal.getWidth(t)/2)+" "+Qh(Qn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=Qn.internal.getWidth(t)<=Qn.internal.getHeight(t)?Qn.internal.getWidth(t)/4:Qn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Qn.internal.Bezier_C).toFixed(5)),o=Number((r*Qn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Qh(Qn.internal.getWidth(t)/2)+" "+Qh(Qn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Qh(Qn.internal.getWidth(t)/2)+" "+Qh(Qn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=Qn.internal.getWidth(t)<=Qn.internal.getHeight(t)?Qn.internal.getWidth(t)/4:Qn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Qn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Qh(Qn.internal.getWidth(t)/2)+" "+Qh(Qn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Qn.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Qn.RadioButton.Cross.YesNormal,e.D[t]=Qn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=Qn.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Kr(Qn.internal.getWidth(t)-2)+" "+Kr(Qn.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Kr(r.x1.x)+" "+Kr(r.x1.y)+" m"),n.push(Kr(r.x2.x)+" "+Kr(r.x2.y)+" l"),n.push(Kr(r.x4.x)+" "+Kr(r.x4.y)+" m"),n.push(Kr(r.x3.x)+" "+Kr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=Qn.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Kr(Qn.internal.getWidth(t))+" "+Kr(Qn.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Kr(Qn.internal.getWidth(t)-2)+" "+Kr(Qn.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Kr(n.x1.x)+" "+Kr(n.x1.y)+" m"),r.push(Kr(n.x2.x)+" "+Kr(n.x2.y)+" l"),r.push(Kr(n.x4.x)+" "+Kr(n.x4.y)+" m"),r.push(Kr(n.x3.x)+" "+Kr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Kr(Qn.internal.getWidth(t))+" "+Kr(Qn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Qn.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Qn.internal.getWidth(t),n=Qn.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Qn.internal.getWidth=function(t){var e=0;return hs(t)==="object"&&(e=C5(t.Rect[2])),e},Qn.internal.getHeight=function(t){var e=0;return hs(t)==="object"&&(e=C5(t.Rect[3])),e};var BH=Po.addField=function(t){if(IH(this,t),!(t instanceof Ec))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Po.AcroFormChoiceField=bp,Po.AcroFormListBox=_p,Po.AcroFormComboBox=wp,Po.AcroFormEditBox=ov,Po.AcroFormButton=xa,Po.AcroFormPushButton=av,Po.AcroFormRadioButton=xp,Po.AcroFormCheckBox=lv,Po.AcroFormTextField=pf,Po.AcroFormPasswordField=uv,Po.AcroFormAppearance=Qn,Po.AcroForm={ChoiceField:bp,ListBox:_p,ComboBox:wp,EditBox:ov,Button:xa,PushButton:av,RadioButton:xp,CheckBox:lv,TextField:pf,PasswordField:uv,Appearance:Qn},Tr.AcroForm={ChoiceField:bp,ListBox:_p,ComboBox:wp,EditBox:ov,Button:xa,PushButton:av,RadioButton:xp,CheckBox:lv,TextField:pf,PasswordField:uv,Appearance:Qn};Tr.AcroForm;function eP(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(I,B){var $,R,U,V,re,J=e;if((B=B||e)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(me(I))for(re in n)for(U=n[re],$=0;$<U.length;$+=1){for(V=!0,R=0;R<U[$].length;R+=1)if(U[$][R]!==void 0&&U[$][R]!==I[R]){V=!1;break}if(V===!0){J=re;break}}else for(re in n)for(U=n[re],$=0;$<U.length;$+=1){for(V=!0,R=0;R<U[$].length;R+=1)if(U[$][R]!==void 0&&U[$][R]!==I.charCodeAt(R)){V=!1;break}if(V===!0){J=re;break}}return J===e&&B!==e&&(J=B),J},i=function I(B){for(var $=this.internal.write,R=this.internal.putStream,U=(0,this.internal.getFilters)();U.indexOf("FlateEncode")!==-1;)U.splice(U.indexOf("FlateEncode"),1);B.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:B.width}),V.push({key:"Height",value:B.height}),B.colorSpace===M.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(B.palette.length/3-1)+" "+("sMask"in B&&B.sMask!==void 0?B.objectId+2:B.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+B.colorSpace}),B.colorSpace===M.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:B.bitsPerComponent}),"decodeParameters"in B&&B.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+B.decodeParameters+">>"}),"transparency"in B&&Array.isArray(B.transparency)){for(var re="",J=0,_e=B.transparency.length;J<_e;J++)re+=B.transparency[J]+" "+B.transparency[J]+" ";V.push({key:"Mask",value:"["+re+"]"})}B.sMask!==void 0&&V.push({key:"SMask",value:B.objectId+1+" 0 R"});var Le=B.filter!==void 0?["/"+B.filter]:void 0;if(R({data:B.data,additionalKeyValues:V,alreadyAppliedFilters:Le,objectId:B.objectId}),$("endobj"),"sMask"in B&&B.sMask!==void 0){var Oe="/Predictor "+B.predictor+" /Colors 1 /BitsPerComponent "+B.bitsPerComponent+" /Columns "+B.width,Z={width:B.width,height:B.height,colorSpace:"DeviceGray",bitsPerComponent:B.bitsPerComponent,decodeParameters:Oe,data:B.sMask};"filter"in B&&(Z.filter=B.filter),I.call(this,Z)}if(B.colorSpace===M.INDEXED){var G=this.internal.newObject();R({data:N(new Uint8Array(B.palette)),objectId:G}),$("endobj")}},s=function(){var I=this.internal.collections.addImage_images;for(var B in I)i.call(this,I[B])},o=function(){var I,B=this.internal.collections.addImage_images,$=this.internal.write;for(var R in B)$("/I"+(I=B[R]).index,I.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var I=this.internal.collections.addImage_images;return a.call(this),I},c=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(I){return typeof t["process"+I.toUpperCase()]=="function"},p=function(I){return hs(I)==="object"&&I.nodeType===1},v=function(I,B){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var $=""+I.getAttribute("src");if($.indexOf("data:image/")===0)return Gg(unescape($).split("base64,").pop());var R=t.loadFile($,!0);if(R!==void 0)return R}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var U;switch(B){case"PNG":U="image/png";break;case"WEBP":U="image/webp";break;case"JPEG":case"JPG":default:U="image/jpeg"}return Gg(I.toDataURL(U,1).split("base64,").pop())}},m=function(I){var B=this.internal.collections.addImage_images;if(B){for(var $ in B)if(I===B[$].alias)return B[$]}},x=function(I,B,$){return I||B||(I=-96,B=-96),I<0&&(I=-1*$.width*72/I/this.internal.scaleFactor),B<0&&(B=-1*$.height*72/B/this.internal.scaleFactor),I===0&&(I=B*$.width/$.height),B===0&&(B=I*$.height/$.width),[I,B]},E=function(I,B,$,R,U,V){var re=x.call(this,$,R,U),J=this.internal.getCoordinateString,_e=this.internal.getVerticalCoordinateString,Le=l.call(this);if($=re[0],R=re[1],Le[U.index]=U,V){V*=Math.PI/180;var Oe=Math.cos(V),Z=Math.sin(V),G=function(ce){return ce.toFixed(4)},se=[G(Oe),G(Z),G(-1*Z),G(Oe),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,J(I),_e(B+R),"cm"].join(" ")),this.internal.write(se.join(" ")),this.internal.write([J($),"0","0",J(R),"0","0","cm"].join(" "))):this.internal.write([J($),"0","0",J(R),J(I),_e(B+R),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+U.index+" Do"),this.internal.write("Q")},M=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var A=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},O=t.__addimage__.sHashCode=function(I){var B,$,R=0;if(typeof I=="string")for($=I.length,B=0;B<$;B++)R=(R<<5)-R+I.charCodeAt(B),R|=0;else if(me(I))for($=I.byteLength/2,B=0;B<$;B++)R=(R<<5)-R+I[B],R|=0;return R},z=t.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var B=!0;return I.length===0&&(B=!1),I.length%4!=0&&(B=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(B=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(B=!1),B},K=t.__addimage__.extractImageFromDataUrl=function(I){var B=(I=I||"").split("base64,"),$=null;if(B.length===2){var R=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(B[0]);Array.isArray(R)&&($={mimeType:R[1],charset:R[2],data:B[1]})}return $},ne=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(I){return ne()&&I instanceof ArrayBuffer};var me=t.__addimage__.isArrayBufferView=function(I){return ne()&&typeof Uint32Array<"u"&&(I instanceof Int8Array||I instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array)},pe=t.__addimage__.binaryStringToUint8Array=function(I){for(var B=I.length,$=new Uint8Array(B),R=0;R<B;R++)$[R]=I.charCodeAt(R);return $},N=t.__addimage__.arrayBufferToBinaryString=function(I){for(var B="",$=me(I)?I:new Uint8Array(I),R=0;R<$.length;R+=8192)B+=String.fromCharCode.apply(null,$.subarray(R,R+8192));return B};t.addImage=function(){var I,B,$,R,U,V,re,J,_e;if(typeof arguments[1]=="number"?(B=e,$=arguments[1],R=arguments[2],U=arguments[3],V=arguments[4],re=arguments[5],J=arguments[6],_e=arguments[7]):(B=arguments[1],$=arguments[2],R=arguments[3],U=arguments[4],V=arguments[5],re=arguments[6],J=arguments[7],_e=arguments[8]),hs(I=arguments[0])==="object"&&!p(I)&&"imageData"in I){var Le=I;I=Le.imageData,B=Le.format||B||e,$=Le.x||$||0,R=Le.y||R||0,U=Le.w||Le.width||U,V=Le.h||Le.height||V,re=Le.alias||re,J=Le.compression||J,_e=Le.rotation||Le.angle||_e}var Oe=this.internal.getFilters();if(J===void 0&&Oe.indexOf("FlateEncode")!==-1&&(J="SLOW"),isNaN($)||isNaN(R))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var Z=j.call(this,I,B,re,J);return E.call(this,$,R,U,V,Z,_e),this};var j=function(I,B,$,R){var U,V,re;if(typeof I=="string"&&r(I)===e){I=unescape(I);var J=q(I,!1);(J!==""||(J=t.loadFile(I,!0))!==void 0)&&(I=J)}if(p(I)&&(I=v(I,B)),B=r(I,B),!d(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(((re=$)==null||re.length===0)&&($=function(_e){return typeof _e=="string"||me(_e)?O(_e):me(_e.data)?O(_e.data):null}(I)),(U=m.call(this,$))||(ne()&&(I instanceof Uint8Array||B==="RGBA"||(V=I,I=pe(I))),U=this["process"+B.toUpperCase()](I,c.call(this),$,function(_e){return _e&&typeof _e=="string"&&(_e=_e.toUpperCase()),_e in t.image_compression?_e:A.NONE}(R),V)),!U)throw new Error("An unknown error occurred whilst processing the image.");return U},q=t.__addimage__.convertBase64ToBinaryString=function(I,B){var $;B=typeof B!="boolean"||B;var R,U="";if(typeof I=="string"){R=($=K(I))!==null?$.data:I;try{U=Gg(R)}catch(V){if(B)throw z(R)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return U};t.getImageProperties=function(I){var B,$,R="";if(p(I)&&(I=v(I)),typeof I=="string"&&r(I)===e&&((R=q(I,!1))===""&&(R=t.loadFile(I)||""),I=R),$=r(I),!d($))throw new Error("addImage does not support files of type '"+$+"', please ensure that a plugin for '"+$+"' support is added.");if(!ne()||I instanceof Uint8Array||(I=pe(I)),!(B=this["process"+$.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return B.fileType=$,B}})(Tr.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Tr.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,d=!1,p=0;p<c.length&&!d;p++)switch((r=c[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var v=0;v<c.length;v++){r=c[v];var m=this.internal.pdfEscape,x=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),M=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(E.objId),O=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+m(A(r.contents))+")",s+=" /Popup "+M.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+m(A(O))+") >>",E.content=s;var z=E.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+z,r.open&&(s+=" /Open true"),s+=" >>",M.content=s,this.internal.write(E.objId,"0 R",M.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var K=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(x(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+K+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var ne=this.annotations._nameMap[r.options.name];r.options.pageNumber=ne.page,r.options.top=ne.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(x(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var me=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+me+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var d=this.splitTextToSize(n,a).length;o=Math.ceil(c*d)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Tr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(E){return e[E.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},a=t.__arabicParser__.isArabicEndLetter=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(E){return o(E)&&i.indexOf(E.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(E){var M=0,A=n,O="",z=0;for(M=0;M<E.length;M+=1)A[E.charCodeAt(M)]!==void 0?(z++,typeof(A=A[E.charCodeAt(M)])=="number"&&(O+=String.fromCharCode(A),A=n,z=0),M===E.length-1&&(A=n,O+=E.charAt(M-(z-1)),M-=z-1,z=0)):(A=n,O+=E.charAt(M-z),M-=z,z=0);return O};t.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&r[E.charCodeAt(0)]!==void 0};var v=t.__arabicParser__.getCorrectForm=function(E,M,A){return o(E)?s(E)===!1?-1:!c(E)||!o(M)&&!o(A)||!o(A)&&a(M)||a(E)&&!o(M)||a(E)&&l(M)||a(E)&&a(M)?0:d(E)&&o(M)&&!a(M)&&o(A)&&c(A)?3:a(E)||!o(A)?1:2:-1},m=function(E){var M=0,A=0,O=0,z="",K="",ne="",me=(E=E||"").split("\\s+"),pe=[];for(M=0;M<me.length;M+=1){for(pe.push(""),A=0;A<me[M].length;A+=1)z=me[M][A],K=me[M][A-1],ne=me[M][A+1],o(z)?(O=v(z,K,ne),pe[M]+=O!==-1?String.fromCharCode(e[z.charCodeAt(0)][O]):z):pe[M]+=z;pe[M]=p(pe[M])}return pe.join(" ")},x=t.__arabicParser__.processArabic=t.processArabic=function(){var E,M=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(M)){var O=0;for(A=[],O=0;O<M.length;O+=1)Array.isArray(M[O])?A.push([m(M[O][0]),M[O][1],M[O][2]]):A.push([m(M[O])]);E=A}else E=m(M);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};t.events.push(["preProcessText",x])}(Tr.API),Tr.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Tr.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(E){l=E}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(E){c=E}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(E){d=E}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(E){p=E}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(E){v=E}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(E){m=E}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(E){x=E}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),v=c.scaleFactor||this.internal.scaleFactor,m=0,x=0,E=0,M=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var A=c.maxWidth;A>0?typeof l=="string"?l=this.splitTextToSize(l,A):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(z,K){return z.concat(M.splitTextToSize(K,A))},[])):l=Array.isArray(l)?l:[l];for(var O=0;O<l.length;O++)m<(E=this.getStringUnitWidth(l[O],{font:p})*d)&&(m=E);return m!==0&&(x=l.length),{w:m/=v,h:Math.max((x*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/v,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,m&&v&&(this.printHeaderRow(l.lineNumber,!0),l.y+=v[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,d,p,v){if(r.call(this),!d)throw new Error("No data for PDF table.");var m,x,E,M,A=[],O=[],z=[],K={},ne={},me=[],pe=[],N=(v=v||{}).autoSize||!1,j=v.printHeaders!==!1,q=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,I=v.margins||Object.assign({width:this.getPageWidth()},e),B=typeof v.padding=="number"?v.padding:3,$=v.headerBackgroundColor||"#c8c8c8",R=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=j,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=q,this.internal.__cell__.padding=B,this.internal.__cell__.headerBackgroundColor=$,this.internal.__cell__.headerTextColor=R,this.setFontSize(q),p==null)O=A=Object.keys(d[0]),z=A.map(function(){return"left"});else if(Array.isArray(p)&&hs(p[0])==="object")for(A=p.map(function(Le){return Le.name}),O=p.map(function(Le){return Le.prompt||Le.name||""}),z=p.map(function(Le){return Le.align||"left"}),m=0;m<p.length;m+=1)ne[p[m].name]=p[m].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(O=A=p,z=A.map(function(){return"left"}));if(N||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<A.length;m+=1){for(K[M=A[m]]=d.map(function(Le){return Le[M]}),this.setFont(void 0,"bold"),me.push(this.getTextDimensions(O[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=K[M],this.setFont(void 0,"normal"),E=0;E<x.length;E+=1)me.push(this.getTextDimensions(x[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ne[M]=Math.max.apply(null,me)+B+B,me=[]}if(j){var U={};for(m=0;m<A.length;m+=1)U[A[m]]={},U[A[m]].text=O[m],U[A[m]].align=z[m];var V=a.call(this,U,ne);pe=A.map(function(Le){return new s(l,c,ne[Le],V,U[Le].text,void 0,U[Le].align)}),this.setTableHeaderRow(pe),this.printHeaderRow(1,!1)}var re=p.reduce(function(Le,Oe){return Le[Oe.name]=Oe.align,Le},{});for(m=0;m<d.length;m+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:m,data:d[m]},this);var J=a.call(this,d[m],ne);for(E=0;E<A.length;E+=1){var _e=d[m][A[E]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:m,col:E,data:_e},this),o.call(this,new s(l,c,ne[A[E]],J,_e,m+2,re[A[E]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(l).map(function(m){var x=l[m];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,c[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/v+d+d},this).reduce(function(m,x){return Math.max(m,x)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,v.push(d)),d.lineNumber=l;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(x)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),n=!1}}(Tr.API);var tP={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},nP=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Nb=eP(nP),rP=[100,200,300,400,500,600,700,800,900],RH=eP(rP);function Ib(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return tP[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof Nb[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function E5(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var FH={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},P5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function M5(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function jH(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},FH,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=Ib(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+M5(s)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var d=Nb[l],p=d<=Nb.normal?-1:1,v=E5(c,nP,d,p);if(!v)throw new Error("Could not find a matching font-stretch value for "+l);return v}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var d=tP[l],p=0;p<d.length;++p)if(c[d[p]])return c[d[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var d=RH[l],p=E5(c,rP,d,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+M5(s)+"'.");return o}function k5(t){return t.trimLeft()}function zH(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function $H(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var C0,A5,T5,l2=["times"];(function(t){var e,n,r,i,s,o,a,l,c,d=function(Z){return Z=Z||{},this.isStrokeTransparent=Z.isStrokeTransparent||!1,this.strokeOpacity=Z.strokeOpacity||1,this.strokeStyle=Z.strokeStyle||"#000000",this.fillStyle=Z.fillStyle||"#000000",this.isFillTransparent=Z.isFillTransparent||!1,this.fillOpacity=Z.fillOpacity||1,this.font=Z.font||"10px sans-serif",this.textBaseline=Z.textBaseline||"alphabetic",this.textAlign=Z.textAlign||"left",this.lineWidth=Z.lineWidth||1,this.lineJoin=Z.lineJoin||"miter",this.lineCap=Z.lineCap||"butt",this.path=Z.path||[],this.transform=Z.transform!==void 0?Z.transform.clone():new l,this.globalCompositeOperation=Z.globalCompositeOperation||"normal",this.globalAlpha=Z.globalAlpha||1,this.clip_path=Z.clip_path||[],this.currentPoint=Z.currentPoint||new o,this.miterLimit=Z.miterLimit||10,this.lastPoint=Z.lastPoint||new o,this.lineDashOffset=Z.lineDashOffset||0,this.lineDash=Z.lineDash||[],this.margin=Z.margin||[0,0,0,0],this.prevPageLastElemOffset=Z.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Z.ignoreClearRect!="boolean"||Z.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var p=function(Z){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=Z;Object.defineProperty(this,"pdf",{get:function(){return G}});var se=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return se},set:function(ie){se=!!ie}});var ce=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ce},set:function(ie){ce=!!ie}});var he=0;Object.defineProperty(this,"posX",{get:function(){return he},set:function(ie){isNaN(ie)||(he=ie)}});var ve=0;Object.defineProperty(this,"posY",{get:function(){return ve},set:function(ie){isNaN(ie)||(ve=ie)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ie){var fe;typeof ie=="number"?fe=[ie,ie,ie,ie]:((fe=new Array(4))[0]=ie[0],fe[1]=ie.length>=2?ie[1]:fe[0],fe[2]=ie.length>=3?ie[2]:fe[0],fe[3]=ie.length>=4?ie[3]:fe[1]),c.margin=fe}});var ee=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ee},set:function(ie){ee=ie}});var X=0;Object.defineProperty(this,"lastBreak",{get:function(){return X},set:function(ie){X=ie}});var De=[];Object.defineProperty(this,"pageBreaks",{get:function(){return De},set:function(ie){De=ie}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ie){ie instanceof d&&(c=ie)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ie){c.path=ie}});var Te=[];Object.defineProperty(this,"ctxStack",{get:function(){return Te},set:function(ie){Te=ie}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ie){var fe;fe=v(ie),this.ctx.fillStyle=fe.style,this.ctx.isFillTransparent=fe.a===0,this.ctx.fillOpacity=fe.a,this.pdf.setFillColor(fe.r,fe.g,fe.b,{a:fe.a}),this.pdf.setTextColor(fe.r,fe.g,fe.b,{a:fe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ie){var fe=v(ie);this.ctx.strokeStyle=fe.style,this.ctx.isStrokeTransparent=fe.a===0,this.ctx.strokeOpacity=fe.a,fe.a===0?this.pdf.setDrawColor(255,255,255):(fe.a,this.pdf.setDrawColor(fe.r,fe.g,fe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ie){["butt","round","square"].indexOf(ie)!==-1&&(this.ctx.lineCap=ie,this.pdf.setLineCap(ie))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ie){isNaN(ie)||(this.ctx.lineWidth=ie,this.pdf.setLineWidth(ie))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ie){["bevel","round","miter"].indexOf(ie)!==-1&&(this.ctx.lineJoin=ie,this.pdf.setLineJoin(ie))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ie){isNaN(ie)||(this.ctx.miterLimit=ie,this.pdf.setMiterLimit(ie))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ie){this.ctx.textBaseline=ie}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ie){["right","end","center","left","start"].indexOf(ie)!==-1&&(this.ctx.textAlign=ie)}});var qe=null;function ge(ie,fe){if(qe===null){var Ce=function(de){var Xe=[];return Object.keys(de).forEach(function(Ie){de[Ie].forEach(function(Ye){var Je=null;switch(Ye){case"bold":Je={family:Ie,weight:"bold"};break;case"italic":Je={family:Ie,style:"italic"};break;case"bolditalic":Je={family:Ie,weight:"bold",style:"italic"};break;case"":case"normal":Je={family:Ie}}Je!==null&&(Je.ref={name:Ie,style:Ye},Xe.push(Je))})}),Xe}(ie.getFontList());qe=function(de){for(var Xe={},Ie=0;Ie<de.length;++Ie){var Ye=Ib(de[Ie]),Je=Ye.family,Ge=Ye.stretch,wt=Ye.style,Ct=Ye.weight;Xe[Je]=Xe[Je]||{},Xe[Je][Ge]=Xe[Je][Ge]||{},Xe[Je][Ge][wt]=Xe[Je][Ge][wt]||{},Xe[Je][Ge][wt][Ct]=Ye}return Xe}(Ce.concat(fe))}return qe}var Q=null;Object.defineProperty(this,"fontFaces",{get:function(){return Q},set:function(ie){qe=null,Q=ie}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ie){var fe;if(this.ctx.font=ie,(fe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ie))!==null){var Ce=fe[1],de=(fe[2],fe[3]),Xe=fe[4],Ie=(fe[5],fe[6]),Ye=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Xe)[2];Xe=Math.floor(Ye==="px"?parseFloat(Xe)*this.pdf.internal.scaleFactor:Ye==="em"?parseFloat(Xe)*this.pdf.getFontSize():parseFloat(Xe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Xe);var Je=function(Qe){var ot,it,Vt=[],Qt=Qe.trim();if(Qt==="")return l2;if(Qt in P5)return[P5[Qt]];for(;Qt!=="";){switch(it=null,ot=(Qt=k5(Qt)).charAt(0)){case'"':case"'":it=zH(Qt.substring(1),ot);break;default:it=$H(Qt)}if(it===null||(Vt.push(it[0]),(Qt=k5(it[1]))!==""&&Qt.charAt(0)!==","))return l2;Qt=Qt.replace(/^,/,"")}return Vt}(Ie);if(this.fontFaces){var Ge=jH(ge(this.pdf,this.fontFaces),Je.map(function(Qe){return{family:Qe,stretch:"normal",weight:de,style:Ce}}));this.pdf.setFont(Ge.ref.name,Ge.ref.style)}else{var wt="";(de==="bold"||parseInt(de,10)>=700||Ce==="bold")&&(wt="bold"),Ce==="italic"&&(wt+="italic"),wt.length===0&&(wt="normal");for(var Ct="",Wt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},sn=0;sn<Je.length;sn++){if(this.pdf.internal.getFont(Je[sn],wt,{noFallback:!0,disableWarning:!0})!==void 0){Ct=Je[sn];break}if(wt==="bolditalic"&&this.pdf.internal.getFont(Je[sn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ct=Je[sn],wt="bold";else if(this.pdf.internal.getFont(Je[sn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ct=Je[sn],wt="normal";break}}if(Ct===""){for(var bn=0;bn<Je.length;bn++)if(Wt[Je[bn]]){Ct=Wt[Je[bn]];break}}Ct=Ct===""?"Times":Ct,this.pdf.setFont(Ct,wt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ie){this.ctx.globalCompositeOperation=ie}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ie){this.ctx.globalAlpha=ie}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ie){this.ctx.lineDashOffset=ie,Oe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ie){this.ctx.lineDash=ie,Oe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ie){this.ctx.ignoreClearRect=!!ie}})};p.prototype.setLineDash=function(Z){this.lineDash=Z},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){K.call(this,"fill",!1)},p.prototype.stroke=function(){K.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(Z,G){if(isNaN(Z)||isNaN(G))throw Ls.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var se=this.ctx.transform.applyToPoint(new o(Z,G));this.path.push({type:"mt",x:se.x,y:se.y}),this.ctx.lastPoint=new o(Z,G)},p.prototype.closePath=function(){var Z=new o(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&hs(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){Z=new o(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(Z.x,Z.y)},p.prototype.lineTo=function(Z,G){if(isNaN(Z)||isNaN(G))throw Ls.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var se=this.ctx.transform.applyToPoint(new o(Z,G));this.path.push({type:"lt",x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),K.call(this,null,!0)},p.prototype.quadraticCurveTo=function(Z,G,se,ce){if(isNaN(se)||isNaN(ce)||isNaN(Z)||isNaN(G))throw Ls.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var he=this.ctx.transform.applyToPoint(new o(se,ce)),ve=this.ctx.transform.applyToPoint(new o(Z,G));this.path.push({type:"qct",x1:ve.x,y1:ve.y,x:he.x,y:he.y}),this.ctx.lastPoint=new o(he.x,he.y)},p.prototype.bezierCurveTo=function(Z,G,se,ce,he,ve){if(isNaN(he)||isNaN(ve)||isNaN(Z)||isNaN(G)||isNaN(se)||isNaN(ce))throw Ls.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ee=this.ctx.transform.applyToPoint(new o(he,ve)),X=this.ctx.transform.applyToPoint(new o(Z,G)),De=this.ctx.transform.applyToPoint(new o(se,ce));this.path.push({type:"bct",x1:X.x,y1:X.y,x2:De.x,y2:De.y,x:ee.x,y:ee.y}),this.ctx.lastPoint=new o(ee.x,ee.y)},p.prototype.arc=function(Z,G,se,ce,he,ve){if(isNaN(Z)||isNaN(G)||isNaN(se)||isNaN(ce)||isNaN(he))throw Ls.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ve=!!ve,!this.ctx.transform.isIdentity){var ee=this.ctx.transform.applyToPoint(new o(Z,G));Z=ee.x,G=ee.y;var X=this.ctx.transform.applyToPoint(new o(0,se)),De=this.ctx.transform.applyToPoint(new o(0,0));se=Math.sqrt(Math.pow(X.x-De.x,2)+Math.pow(X.y-De.y,2))}Math.abs(he-ce)>=2*Math.PI&&(ce=0,he=2*Math.PI),this.path.push({type:"arc",x:Z,y:G,radius:se,startAngle:ce,endAngle:he,counterclockwise:ve})},p.prototype.arcTo=function(Z,G,se,ce,he){throw new Error("arcTo not implemented.")},p.prototype.rect=function(Z,G,se,ce){if(isNaN(Z)||isNaN(G)||isNaN(se)||isNaN(ce))throw Ls.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Z,G),this.lineTo(Z+se,G),this.lineTo(Z+se,G+ce),this.lineTo(Z,G+ce),this.lineTo(Z,G),this.lineTo(Z+se,G),this.lineTo(Z,G)},p.prototype.fillRect=function(Z,G,se,ce){if(isNaN(Z)||isNaN(G)||isNaN(se)||isNaN(ce))throw Ls.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var he={};this.lineCap!=="butt"&&(he.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(he.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Z,G,se,ce),this.fill(),he.hasOwnProperty("lineCap")&&(this.lineCap=he.lineCap),he.hasOwnProperty("lineJoin")&&(this.lineJoin=he.lineJoin)}},p.prototype.strokeRect=function(Z,G,se,ce){if(isNaN(Z)||isNaN(G)||isNaN(se)||isNaN(ce))throw Ls.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(Z,G,se,ce),this.stroke())},p.prototype.clearRect=function(Z,G,se,ce){if(isNaN(Z)||isNaN(G)||isNaN(se)||isNaN(ce))throw Ls.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Z,G,se,ce))},p.prototype.save=function(Z){Z=typeof Z!="boolean"||Z;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,se=0;se<this.pdf.internal.getNumberOfPages();se++)this.pdf.setPage(se+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),Z){this.ctx.fontSize=this.pdf.internal.getFontSize();var ce=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ce}},p.prototype.restore=function(Z){Z=typeof Z!="boolean"||Z;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,se=0;se<this.pdf.internal.getNumberOfPages();se++)this.pdf.setPage(se+1),this.pdf.internal.out("Q");this.pdf.setPage(G),Z&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(Z){var G,se,ce,he;if(Z.isCanvasGradient===!0&&(Z=Z.getColor()),!Z)return{r:0,g:0,b:0,a:0,style:Z};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Z))G=0,se=0,ce=0,he=0;else{var ve=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Z);if(ve!==null)G=parseInt(ve[1]),se=parseInt(ve[2]),ce=parseInt(ve[3]),he=1;else if((ve=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Z))!==null)G=parseInt(ve[1]),se=parseInt(ve[2]),ce=parseInt(ve[3]),he=parseFloat(ve[4]);else{if(he=1,typeof Z=="string"&&Z.charAt(0)!=="#"){var ee=new YE(Z);Z=ee.ok?ee.toHex():"#000000"}Z.length===4?(G=Z.substring(1,2),G+=G,se=Z.substring(2,3),se+=se,ce=Z.substring(3,4),ce+=ce):(G=Z.substring(1,3),se=Z.substring(3,5),ce=Z.substring(5,7)),G=parseInt(G,16),se=parseInt(se,16),ce=parseInt(ce,16)}}return{r:G,g:se,b:ce,a:he,style:Z}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(Z,G,se,ce){if(isNaN(G)||isNaN(se)||typeof Z!="string")throw Ls.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ce=isNaN(ce)?void 0:ce,!m.call(this)){var he=J(this.ctx.transform.rotation),ve=this.ctx.transform.scaleX;B.call(this,{text:Z,x:G,y:se,scale:ve,angle:he,align:this.textAlign,maxWidth:ce})}},p.prototype.strokeText=function(Z,G,se,ce){if(isNaN(G)||isNaN(se)||typeof Z!="string")throw Ls.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){ce=isNaN(ce)?void 0:ce;var he=J(this.ctx.transform.rotation),ve=this.ctx.transform.scaleX;B.call(this,{text:Z,x:G,y:se,scale:ve,renderingMode:"stroke",angle:he,align:this.textAlign,maxWidth:ce})}},p.prototype.measureText=function(Z){if(typeof Z!="string")throw Ls.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,se=this.pdf.internal.scaleFactor,ce=G.internal.getFontSize(),he=G.getStringUnitWidth(Z)*ce/G.internal.scaleFactor,ve=function(ee){var X=(ee=ee||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return X}}),this};return new ve({width:he*=Math.round(96*se/72*1e4)/1e4})},p.prototype.scale=function(Z,G){if(isNaN(Z)||isNaN(G))throw Ls.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var se=new l(Z,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(se)},p.prototype.rotate=function(Z){if(isNaN(Z))throw Ls.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new l(Math.cos(Z),Math.sin(Z),-Math.sin(Z),Math.cos(Z),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},p.prototype.translate=function(Z,G){if(isNaN(Z)||isNaN(G))throw Ls.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var se=new l(1,0,0,1,Z,G);this.ctx.transform=this.ctx.transform.multiply(se)},p.prototype.transform=function(Z,G,se,ce,he,ve){if(isNaN(Z)||isNaN(G)||isNaN(se)||isNaN(ce)||isNaN(he)||isNaN(ve))throw Ls.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ee=new l(Z,G,se,ce,he,ve);this.ctx.transform=this.ctx.transform.multiply(ee)},p.prototype.setTransform=function(Z,G,se,ce,he,ve){Z=isNaN(Z)?1:Z,G=isNaN(G)?0:G,se=isNaN(se)?0:se,ce=isNaN(ce)?1:ce,he=isNaN(he)?0:he,ve=isNaN(ve)?0:ve,this.ctx.transform=new l(Z,G,se,ce,he,ve)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(Z,G,se,ce,he,ve,ee,X,De){var Te=this.pdf.getImageProperties(Z),qe=1,ge=1,Q=1,ie=1;ce!==void 0&&X!==void 0&&(Q=X/ce,ie=De/he,qe=Te.width/ce*X/ce,ge=Te.height/he*De/he),ve===void 0&&(ve=G,ee=se,G=0,se=0),ce!==void 0&&X===void 0&&(X=ce,De=he),ce===void 0&&X===void 0&&(X=Te.width,De=Te.height);for(var fe,Ce=this.ctx.transform.decompose(),de=J(Ce.rotate.shx),Xe=new l,Ie=(Xe=(Xe=(Xe=Xe.multiply(Ce.translate)).multiply(Ce.skew)).multiply(Ce.scale)).applyToRectangle(new a(ve-G*Q,ee-se*ie,ce*qe,he*ge)),Ye=M.call(this,Ie),Je=[],Ge=0;Ge<Ye.length;Ge+=1)Je.indexOf(Ye[Ge])===-1&&Je.push(Ye[Ge]);if(z(Je),this.autoPaging)for(var wt=Je[0],Ct=Je[Je.length-1],Wt=wt;Wt<Ct+1;Wt++){this.pdf.setPage(Wt);var sn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],bn=Wt===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],it=Wt===1?0:Qe+(Wt-2)*ot;if(this.ctx.clip_path.length!==0){var Vt=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(fe,this.posX+this.margin[3],-it+bn+this.ctx.prevPageLastElemOffset),ne.call(this,"fill",!0),this.path=Vt}var Qt=JSON.parse(JSON.stringify(Ie));Qt=O([Qt],this.posX+this.margin[3],-it+bn+this.ctx.prevPageLastElemOffset)[0];var kn=(Wt>wt||Wt<Ct)&&E.call(this);kn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],sn,ot,null).clip().discardPath()),this.pdf.addImage(Z,"JPEG",Qt.x,Qt.y,Qt.w,Qt.h,null,null,de),kn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Z,"JPEG",Ie.x,Ie.y,Ie.w,Ie.h,null,null,de)};var M=function(Z,G,se){var ce=[];G=G||this.pdf.internal.pageSize.width,se=se||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var he=this.posY+this.ctx.prevPageLastElemOffset;switch(Z.type){default:case"mt":case"lt":ce.push(Math.floor((Z.y+he)/se)+1);break;case"arc":ce.push(Math.floor((Z.y+he-Z.radius)/se)+1),ce.push(Math.floor((Z.y+he+Z.radius)/se)+1);break;case"qct":var ve=_e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Z.x1,Z.y1,Z.x,Z.y);ce.push(Math.floor((ve.y+he)/se)+1),ce.push(Math.floor((ve.y+ve.h+he)/se)+1);break;case"bct":var ee=Le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Z.x1,Z.y1,Z.x2,Z.y2,Z.x,Z.y);ce.push(Math.floor((ee.y+he)/se)+1),ce.push(Math.floor((ee.y+ee.h+he)/se)+1);break;case"rect":ce.push(Math.floor((Z.y+he)/se)+1),ce.push(Math.floor((Z.y+Z.h+he)/se)+1)}for(var X=0;X<ce.length;X+=1)for(;this.pdf.internal.getNumberOfPages()<ce[X];)A.call(this);return ce},A=function(){var Z=this.fillStyle,G=this.strokeStyle,se=this.font,ce=this.lineCap,he=this.lineWidth,ve=this.lineJoin;this.pdf.addPage(),this.fillStyle=Z,this.strokeStyle=G,this.font=se,this.lineCap=ce,this.lineWidth=he,this.lineJoin=ve},O=function(Z,G,se){for(var ce=0;ce<Z.length;ce++)switch(Z[ce].type){case"bct":Z[ce].x2+=G,Z[ce].y2+=se;case"qct":Z[ce].x1+=G,Z[ce].y1+=se;case"mt":case"lt":case"arc":default:Z[ce].x+=G,Z[ce].y+=se}return Z},z=function(Z){return Z.sort(function(G,se){return G-se})},K=function(Z,G){for(var se,ce,he=this.fillStyle,ve=this.strokeStyle,ee=this.lineCap,X=this.lineWidth,De=Math.abs(X*this.ctx.transform.scaleX),Te=this.lineJoin,qe=JSON.parse(JSON.stringify(this.path)),ge=JSON.parse(JSON.stringify(this.path)),Q=[],ie=0;ie<ge.length;ie++)if(ge[ie].x!==void 0)for(var fe=M.call(this,ge[ie]),Ce=0;Ce<fe.length;Ce+=1)Q.indexOf(fe[Ce])===-1&&Q.push(fe[Ce]);for(var de=0;de<Q.length;de++)for(;this.pdf.internal.getNumberOfPages()<Q[de];)A.call(this);if(z(Q),this.autoPaging)for(var Xe=Q[0],Ie=Q[Q.length-1],Ye=Xe;Ye<Ie+1;Ye++){this.pdf.setPage(Ye),this.fillStyle=he,this.strokeStyle=ve,this.lineCap=ee,this.lineWidth=De,this.lineJoin=Te;var Je=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ge=Ye===1?this.posY+this.margin[0]:this.margin[0],wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Wt=Ye===1?0:wt+(Ye-2)*Ct;if(this.ctx.clip_path.length!==0){var sn=this.path;se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(se,this.posX+this.margin[3],-Wt+Ge+this.ctx.prevPageLastElemOffset),ne.call(this,Z,!0),this.path=sn}if(ce=JSON.parse(JSON.stringify(qe)),this.path=O(ce,this.posX+this.margin[3],-Wt+Ge+this.ctx.prevPageLastElemOffset),G===!1||Ye===0){var bn=(Ye>Xe||Ye<Ie)&&E.call(this);bn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Je,Ct,null).clip().discardPath()),ne.call(this,Z,G),bn&&this.pdf.restoreGraphicsState()}this.lineWidth=X}else this.lineWidth=De,ne.call(this,Z,G),this.lineWidth=X;this.path=qe},ne=function(Z,G){if((Z!=="stroke"||G||!x.call(this))&&(Z==="stroke"||G||!m.call(this))){for(var se,ce,he=[],ve=this.path,ee=0;ee<ve.length;ee++){var X=ve[ee];switch(X.type){case"begin":he.push({begin:!0});break;case"close":he.push({close:!0});break;case"mt":he.push({start:X,deltas:[],abs:[]});break;case"lt":var De=he.length;if(ve[ee-1]&&!isNaN(ve[ee-1].x)&&(se=[X.x-ve[ee-1].x,X.y-ve[ee-1].y],De>0)){for(;De>=0;De--)if(he[De-1].close!==!0&&he[De-1].begin!==!0){he[De-1].deltas.push(se),he[De-1].abs.push(X);break}}break;case"bct":se=[X.x1-ve[ee-1].x,X.y1-ve[ee-1].y,X.x2-ve[ee-1].x,X.y2-ve[ee-1].y,X.x-ve[ee-1].x,X.y-ve[ee-1].y],he[he.length-1].deltas.push(se);break;case"qct":var Te=ve[ee-1].x+2/3*(X.x1-ve[ee-1].x),qe=ve[ee-1].y+2/3*(X.y1-ve[ee-1].y),ge=X.x+2/3*(X.x1-X.x),Q=X.y+2/3*(X.y1-X.y),ie=X.x,fe=X.y;se=[Te-ve[ee-1].x,qe-ve[ee-1].y,ge-ve[ee-1].x,Q-ve[ee-1].y,ie-ve[ee-1].x,fe-ve[ee-1].y],he[he.length-1].deltas.push(se);break;case"arc":he.push({deltas:[],abs:[],arc:!0}),Array.isArray(he[he.length-1].abs)&&he[he.length-1].abs.push(X)}}ce=G?null:Z==="stroke"?"stroke":"fill";for(var Ce=!1,de=0;de<he.length;de++)if(he[de].arc)for(var Xe=he[de].abs,Ie=0;Ie<Xe.length;Ie++){var Ye=Xe[Ie];Ye.type==="arc"?N.call(this,Ye.x,Ye.y,Ye.radius,Ye.startAngle,Ye.endAngle,Ye.counterclockwise,void 0,G,!Ce):$.call(this,Ye.x,Ye.y),Ce=!0}else if(he[de].close===!0)this.pdf.internal.out("h"),Ce=!1;else if(he[de].begin!==!0){var Je=he[de].start.x,Ge=he[de].start.y;R.call(this,he[de].deltas,Je,Ge),Ce=!0}ce&&j.call(this,ce),G&&q.call(this)}},me=function(Z){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,se=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Z-se;case"top":return Z+G-se;case"hanging":return Z+G-2*se;case"middle":return Z+G/2-se;case"ideographic":return Z;case"alphabetic":default:return Z}},pe=function(Z){return Z+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var Z=function(){};return Z.colorStops=[],Z.addColorStop=function(G,se){this.colorStops.push([G,se])},Z.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Z.isCanvasGradient=!0,Z},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(Z,G,se,ce,he,ve,ee,X,De){for(var Te=V.call(this,se,ce,he,ve),qe=0;qe<Te.length;qe++){var ge=Te[qe];qe===0&&(De?I.call(this,ge.x1+Z,ge.y1+G):$.call(this,ge.x1+Z,ge.y1+G)),U.call(this,Z,G,ge.x2,ge.y2,ge.x3,ge.y3,ge.x4,ge.y4)}X?q.call(this):j.call(this,ee)},j=function(Z){switch(Z){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},q=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(Z,G){this.pdf.internal.out(n(Z)+" "+r(G)+" m")},B=function(Z){var G;switch(Z.align){case"right":case"end":G="right";break;case"center":G="center";break;case"left":case"start":default:G="left"}var se=this.pdf.getTextDimensions(Z.text),ce=me.call(this,Z.y),he=pe.call(this,ce)-se.h,ve=this.ctx.transform.applyToPoint(new o(Z.x,ce)),ee=this.ctx.transform.decompose(),X=new l;X=(X=(X=X.multiply(ee.translate)).multiply(ee.skew)).multiply(ee.scale);for(var De,Te,qe,ge=this.ctx.transform.applyToRectangle(new a(Z.x,ce,se.w,se.h)),Q=X.applyToRectangle(new a(Z.x,he,se.w,se.h)),ie=M.call(this,Q),fe=[],Ce=0;Ce<ie.length;Ce+=1)fe.indexOf(ie[Ce])===-1&&fe.push(ie[Ce]);if(z(fe),this.autoPaging)for(var de=fe[0],Xe=fe[fe.length-1],Ie=de;Ie<Xe+1;Ie++){this.pdf.setPage(Ie);var Ye=Ie===1?this.posY+this.margin[0]:this.margin[0],Je=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[2],wt=Ge-this.margin[0],Ct=this.pdf.internal.pageSize.width-this.margin[1],Wt=Ct-this.margin[3],sn=Ie===1?0:Je+(Ie-2)*wt;if(this.ctx.clip_path.length!==0){var bn=this.path;De=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(De,this.posX+this.margin[3],-1*sn+Ye),ne.call(this,"fill",!0),this.path=bn}var Qe=O([JSON.parse(JSON.stringify(Q))],this.posX+this.margin[3],-sn+Ye+this.ctx.prevPageLastElemOffset)[0];Z.scale>=.01&&(Te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Te*Z.scale),qe=this.lineWidth,this.lineWidth=qe*Z.scale);var ot=this.autoPaging!=="text";if(ot||Qe.y+Qe.h<=Ge){if(ot||Qe.y>=Ye&&Qe.x<=Ct){var it=ot?Z.text:this.pdf.splitTextToSize(Z.text,Z.maxWidth||Ct-Qe.x)[0],Vt=O([JSON.parse(JSON.stringify(ge))],this.posX+this.margin[3],-sn+Ye+this.ctx.prevPageLastElemOffset)[0],Qt=ot&&(Ie>de||Ie<Xe)&&E.call(this);Qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Wt,wt,null).clip().discardPath()),this.pdf.text(it,Vt.x,Vt.y,{angle:Z.angle,align:G,renderingMode:Z.renderingMode}),Qt&&this.pdf.restoreGraphicsState()}}else Qe.y<Ge&&(this.ctx.prevPageLastElemOffset+=Ge-Qe.y);Z.scale>=.01&&(this.pdf.setFontSize(Te),this.lineWidth=qe)}else Z.scale>=.01&&(Te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Te*Z.scale),qe=this.lineWidth,this.lineWidth=qe*Z.scale),this.pdf.text(Z.text,ve.x+this.posX,ve.y+this.posY,{angle:Z.angle,align:G,renderingMode:Z.renderingMode,maxWidth:Z.maxWidth}),Z.scale>=.01&&(this.pdf.setFontSize(Te),this.lineWidth=qe)},$=function(Z,G,se,ce){se=se||0,ce=ce||0,this.pdf.internal.out(n(Z+se)+" "+r(G+ce)+" l")},R=function(Z,G,se){return this.pdf.lines(Z,G,se,null,null)},U=function(Z,G,se,ce,he,ve,ee,X){this.pdf.internal.out([e(i(se+Z)),e(s(ce+G)),e(i(he+Z)),e(s(ve+G)),e(i(ee+Z)),e(s(X+G)),"c"].join(" "))},V=function(Z,G,se,ce){for(var he=2*Math.PI,ve=Math.PI/2;G>se;)G-=he;var ee=Math.abs(se-G);ee<he&&ce&&(ee=he-ee);for(var X=[],De=ce?-1:1,Te=G;ee>1e-5;){var qe=Te+De*Math.min(ee,ve);X.push(re.call(this,Z,Te,qe)),ee-=Math.abs(qe-Te),Te=qe}return X},re=function(Z,G,se){var ce=(se-G)/2,he=Z*Math.cos(ce),ve=Z*Math.sin(ce),ee=he,X=-ve,De=ee*ee+X*X,Te=De+ee*he+X*ve,qe=4/3*(Math.sqrt(2*De*Te)-Te)/(ee*ve-X*he),ge=ee-qe*X,Q=X+qe*ee,ie=ge,fe=-Q,Ce=ce+G,de=Math.cos(Ce),Xe=Math.sin(Ce);return{x1:Z*Math.cos(G),y1:Z*Math.sin(G),x2:ge*de-Q*Xe,y2:ge*Xe+Q*de,x3:ie*de-fe*Xe,y3:ie*Xe+fe*de,x4:Z*Math.cos(se),y4:Z*Math.sin(se)}},J=function(Z){return 180*Z/Math.PI},_e=function(Z,G,se,ce,he,ve){var ee=Z+.5*(se-Z),X=G+.5*(ce-G),De=he+.5*(se-he),Te=ve+.5*(ce-ve),qe=Math.min(Z,he,ee,De),ge=Math.max(Z,he,ee,De),Q=Math.min(G,ve,X,Te),ie=Math.max(G,ve,X,Te);return new a(qe,Q,ge-qe,ie-Q)},Le=function(Z,G,se,ce,he,ve,ee,X){var De,Te,qe,ge,Q,ie,fe,Ce,de,Xe,Ie,Ye,Je,Ge,wt=se-Z,Ct=ce-G,Wt=he-se,sn=ve-ce,bn=ee-he,Qe=X-ve;for(Te=0;Te<41;Te++)de=(fe=(qe=Z+(De=Te/40)*wt)+De*((Q=se+De*Wt)-qe))+De*(Q+De*(he+De*bn-Q)-fe),Xe=(Ce=(ge=G+De*Ct)+De*((ie=ce+De*sn)-ge))+De*(ie+De*(ve+De*Qe-ie)-Ce),Te==0?(Ie=de,Ye=Xe,Je=de,Ge=Xe):(Ie=Math.min(Ie,de),Ye=Math.min(Ye,Xe),Je=Math.max(Je,de),Ge=Math.max(Ge,Xe));return new a(Math.round(Ie),Math.round(Ye),Math.round(Je-Ie),Math.round(Ge-Ye))},Oe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Z,G,se=(Z=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:Z,lineDashOffset:G}));this.prevLineDash!==se&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=se)}}})(Tr.API),function(t){var e=function(s){var o,a,l,c,d,p,v,m,x,E;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(d=((d=((d=((d=(d-(E=d%85))/85)-(x=d%85))/85)-(m=d%85))/85)-(v=d%85))/85)%85,a.push(p+33,v+33,m+33,x+33,E+33)):a.push(122);return function(M,A){for(var O=A;O>0;O--)M.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,c,d,p=String,v="length",m=255,x="charCodeAt",E="slice",M="replace";for(s[E](-2),s=s[E](0,-2)[M](/\s/g,"")[M]("z","!!!!!"),l=[],c=0,d=(s+=o="uuuuu"[E](s[v]%5||5))[v];d>c;c+=5)a=52200625*(s[x](c)-33)+614125*(s[x](c+1)-33)+7225*(s[x](c+2)-33)+85*(s[x](c+3)-33)+(s[x](c+4)-33),l.push(m&a>>24,m&a>>16,m&a>>8,m&a);return function(A,O){for(var z=O;z>0;z--)A.pop()}(l,o[v]),p.fromCharCode.apply(p,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=kb(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(Tr.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,d){var p=new XMLHttpRequest,v=0,m=function(x){var E=x.length,M=[],A=String.fromCharCode;for(v=0;v<E;v+=1)M.push(A(255&x.charCodeAt(v)));return M.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?d(m(this.responseText)):d(void 0)}),p.send(null),c&&p.status===200)return m(p.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(Tr.API),function(t){function e(){return(Nr.html2canvas?Promise.resolve(Nr.html2canvas):Mh(()=>import("./html2canvas.esm.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Nr.DOMPurify?Promise.resolve(Nr.DOMPurify):Mh(()=>import("./purify.es.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=hs(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,d){for(var p=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),v=c.firstChild;v;v=v.nextSibling)d!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||p.appendChild(l(v,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(p.width=c.width,p.height=c.height,p.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(p.value=c.value),p.addEventListener("load",function(){p.scrollTop=c.scrollTop,p.scrollLeft=c.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var v=0;v<c.length;++v){var m=c[v],x=m.src.find(function(E){return E.format==="truetype"});x&&l.addFont(x.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||Tr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,d){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,c),p}).then(c,d).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(c,o,a);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Tr.getPageSize=function(o,a,l){if(hs(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var d,p=(""+l).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+a}var m,x=0,E=0;if(v.hasOwnProperty(p))x=v[p][1]/d,E=v[p][0]/d;else try{x=l[1],E=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",E>x&&(m=E,E=x,x=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",x>E&&(m=E,E=x,x=m)}return{width:E,height:x,unit:a,k:d,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Ib):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(Tr.API),Tr.API.addJS=function(t){return T5=t,this.internal.events.subscribe("postPutResources",function(){C0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(C0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),A5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+T5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){C0!==void 0&&A5!==void 0&&this.internal.out("/Names <</JavaScript "+C0+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(s=0;s<c;s++){var p=n.internal.newObject();d.push(p);var v=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<d.length;s++)n.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Tr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(p){for(var v,m=256*p.charCodeAt(4)+p.charCodeAt(5),x=p.length,E={width:0,height:0,numcomponents:1},M=4;M<x;M+=2){if(M+=m,e.indexOf(p.charCodeAt(M+1))!==-1){v=256*p.charCodeAt(M+5)+p.charCodeAt(M+6),E={width:256*p.charCodeAt(M+7)+p.charCodeAt(M+8),height:v,numcomponents:p.charCodeAt(M+9)};break}m=256*p.charCodeAt(M+2)+p.charCodeAt(M+3)}return E}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}d={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return d}}(Tr.API);var Zf,E0,D5,O5,N5,VH=function(){var t,e,n;function r(s){var o,a,l,c,d,p,v,m,x,E,M,A,O,z;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),x=(function(){var K,ne;for(ne=[],K=0;K<4;++K)ne.push(String.fromCharCode(this.data[this.pos++]));return ne}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),c=this.readUInt16()||100,p.delay=1e3*d/c,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,o-=4),s=(p!=null?p.data:void 0)||this.imgData,A=0;0<=o?A<o:A>o;0<=o?++A:--A)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((E=l-this.transparency.indexed.length)>0)for(O=0;0<=E?O<E:O>E;0<=E?++O:--O)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":v=(M=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,M.slice(0,v)),this.text[m]=String.fromCharCode.apply(String,M.slice(v+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(z=this.colorType)===4||z===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(p,v,m,x){var E,M,A,O,z,K,ne,me,pe,N,j,q,I,B,$,R,U,V,re,J,_e,Le=Math.ceil((c.width-p)/m),Oe=Math.ceil((c.height-v)/x),Z=c.width==Le&&c.height==Oe;for(B=o*Le,q=Z?a:new Uint8Array(B*Oe),K=s.length,I=0,M=0;I<Oe&&l<K;){switch(s[l++]){case 0:for(O=U=0;U<B;O=U+=1)q[M++]=s[l++];break;case 1:for(O=V=0;V<B;O=V+=1)E=s[l++],z=O<o?0:q[M-o],q[M++]=(E+z)%256;break;case 2:for(O=re=0;re<B;O=re+=1)E=s[l++],A=(O-O%o)/o,$=I&&q[(I-1)*B+A*o+O%o],q[M++]=($+E)%256;break;case 3:for(O=J=0;J<B;O=J+=1)E=s[l++],A=(O-O%o)/o,z=O<o?0:q[M-o],$=I&&q[(I-1)*B+A*o+O%o],q[M++]=(E+Math.floor((z+$)/2))%256;break;case 4:for(O=_e=0;_e<B;O=_e+=1)E=s[l++],A=(O-O%o)/o,z=O<o?0:q[M-o],I===0?$=R=0:($=q[(I-1)*B+A*o+O%o],R=A&&q[(I-1)*B+(A-1)*o+O%o]),ne=z+$-R,me=Math.abs(ne-z),N=Math.abs(ne-$),j=Math.abs(ne-R),pe=me<=N&&me<=j?z:N<=j?$:R,q[M++]=(E+pe)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!Z){var G=((v+I*x)*c.width+p)*o,se=I*B;for(O=0;O<Le;O+=1){for(var ce=0;ce<o;ce+=1)a[G++]=q[se++];G+=(m-1)*o}}I++}}return s=_H(s),c.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,c,d,p,v,m;for(a=this.palette,d=this.transparency.indexed||[],c=new Uint8Array((d.length||0)+a.length),l=0,s=0,o=p=0,v=a.length;p<v;o=p+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(m=d[s++])!=null?m:255;return c},r.prototype.copyToImageData=function(s,o){var a,l,c,d,p,v,m,x,E,M,A;if(l=this.colors,E=null,a=this.hasAlphaChannel,this.palette.length&&(E=(A=this._decodedPalette)!=null?A:this._decodedPalette=this.decodePalette(),l=4,a=!0),x=(c=s.data||s).length,p=E||o,d=v=0,l===1)for(;d<x;)m=E?4*o[d/4]:v,M=p[m++],c[d++]=M,c[d++]=M,c[d++]=M,c[d++]=a?p[m++]:255,v=m;else for(;d<x;)m=E?4*o[d/4]:v,c[d++]=p[m++],c[d++]=p[m++],c[d++]=p[m++],c[d++]=a?p[m++]:255,v=m},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Nr)==="[object Window]"){try{e=Nr.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,c,d,p,v,m;if(this.animation){for(m=[],a=d=0,p=(v=this.animation.frames).length;d<p;a=++d)o=v[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,m.push(o.image=t(l));return m}},r.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,c,d,p,v=this;return a=0,p=this.animation,c=p.numFrames,l=p.frames,d=p.numPlays,(o=function(){var m,x;if(m=a++%c,x=l[m],v.renderFrame(s,m),c>1&&a/c<d)return v.animation._timeout=setTimeout(o,x.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function UH(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,d=[],p=0,v=null,m=0,x=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,x=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var E=t[e++];p=t[e++]|t[e++]<<8,v=t[e++],!(1&E)&&(v=null),m=E>>2&7,e++;break;case 254:for(;;){if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var M=t[e++]|t[e++]<<8,A=t[e++]|t[e++]<<8,O=t[e++]|t[e++]<<8,z=t[e++]|t[e++]<<8,K=t[e++],ne=K>>6&1,me=1<<(7&K)+1,pe=a,N=l,j=!1;K>>7&&(j=!0,pe=e,N=me,e+=3*me);var q=e;for(e++;;){var I;if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}d.push({x:M,y:A,width:O,height:z,has_local_palette:j,palette_offset:pe,palette_size:N,data_offset:q,data_length:e-q,transparent_index:v,interlaced:!!ne,delay:p,disposal:m});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return x},this.frameInfo=function(B){if(B<0||B>=d.length)throw new Error("Frame index out of range.");return d[B]},this.decodeAndBlitFrameBGRA=function(B,$){var R=this.frameInfo(B),U=R.width*R.height,V=new Uint8Array(U);I5(t,R.data_offset,V,U);var re=R.palette_offset,J=R.transparent_index;J===null&&(J=256);var _e=R.width,Le=n-_e,Oe=_e,Z=4*(R.y*n+R.x),G=4*((R.y+R.height)*n+R.x),se=Z,ce=4*Le;R.interlaced===!0&&(ce+=4*n*7);for(var he=8,ve=0,ee=V.length;ve<ee;++ve){var X=V[ve];if(Oe===0&&(Oe=_e,(se+=ce)>=G&&(ce=4*Le+4*n*(he-1),se=Z+(_e+Le)*(he<<1),he>>=1)),X===J)se+=4;else{var De=t[re+3*X],Te=t[re+3*X+1],qe=t[re+3*X+2];$[se++]=qe,$[se++]=Te,$[se++]=De,$[se++]=255}--Oe}},this.decodeAndBlitFrameRGBA=function(B,$){var R=this.frameInfo(B),U=R.width*R.height,V=new Uint8Array(U);I5(t,R.data_offset,V,U);var re=R.palette_offset,J=R.transparent_index;J===null&&(J=256);var _e=R.width,Le=n-_e,Oe=_e,Z=4*(R.y*n+R.x),G=4*((R.y+R.height)*n+R.x),se=Z,ce=4*Le;R.interlaced===!0&&(ce+=4*n*7);for(var he=8,ve=0,ee=V.length;ve<ee;++ve){var X=V[ve];if(Oe===0&&(Oe=_e,(se+=ce)>=G&&(ce=4*Le+4*n*(he-1),se=Z+(_e+Le)*(he<<1),he>>=1)),X===J)se+=4;else{var De=t[re+3*X],Te=t[re+3*X+1],qe=t[re+3*X+2];$[se++]=De,$[se++]=Te,$[se++]=qe,$[se++]=255}--Oe}}}function I5(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,d=0,p=0,v=0,m=t[e++],x=new Int32Array(4096),E=null;;){for(;d<16&&m!==0;)p|=t[e++]<<d,d+=8,m===1?m=t[e++]:--m;if(d<l)break;var M=p&c;if(p>>=l,d-=l,M!==s){if(M===o)break;for(var A=M<a?M:E,O=0,z=A;z>s;)z=x[z]>>8,++O;var K=z;if(v+O+(A!==M?1:0)>r)return void Ls.log("Warning, gif stream longer than expected.");n[v++]=K;var ne=v+=O;for(A!==M&&(n[v++]=K),z=A;O--;)z=x[z],n[--ne]=255&z,z>>=8;E!==null&&a<4096&&(x[a++]=E<<8|K,a>=c+1&&l<12&&(++l,c=c<<1|1)),E=M}else a=o+1,c=(1<<(l=i+1))-1,E=null}return v!==r&&Ls.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function u2(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),p=new Array(65535),v=new Array(65535),m=new Array(64),x=new Array(64),E=[],M=0,A=7,O=new Array(64),z=new Array(64),K=new Array(64),ne=new Array(256),me=new Array(2048),pe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],B=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],U=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(Z,G){for(var se=0,ce=0,he=new Array,ve=1;ve<=16;ve++){for(var ee=1;ee<=Z[ve];ee++)he[G[ce]]=[],he[G[ce]][0]=se,he[G[ce]][1]=ve,ce++,se++;se*=2}return he}function re(Z){for(var G=Z[0],se=Z[1]-1;se>=0;)G&1<<se&&(M|=1<<A),se--,--A<0&&(M==255?(J(255),J(0)):J(M),A=7,M=0)}function J(Z){E.push(Z)}function _e(Z){J(Z>>8&255),J(255&Z)}function Le(Z,G,se,ce,he){for(var ve,ee=he[0],X=he[240],De=function(Xe,Ie){var Ye,Je,Ge,wt,Ct,Wt,sn,bn,Qe,ot,it=0;for(Qe=0;Qe<8;++Qe){Ye=Xe[it],Je=Xe[it+1],Ge=Xe[it+2],wt=Xe[it+3],Ct=Xe[it+4],Wt=Xe[it+5],sn=Xe[it+6];var Vt=Ye+(bn=Xe[it+7]),Qt=Ye-bn,kn=Je+sn,Ln=Je-sn,Mn=Ge+Wt,Zn=Ge-Wt,en=wt+Ct,wn=wt-Ct,En=Vt+en,Xn=Vt-en,dr=kn+Mn,vr=kn-Mn;Xe[it]=En+dr,Xe[it+4]=En-dr;var sr=.707106781*(vr+Xn);Xe[it+2]=Xn+sr,Xe[it+6]=Xn-sr;var ut=.382683433*((En=wn+Zn)-(vr=Ln+Qt)),rt=.5411961*En+ut,jt=1.306562965*vr+ut,Tn=.707106781*(dr=Zn+Ln),Yn=Qt+Tn,Jt=Qt-Tn;Xe[it+5]=Jt+rt,Xe[it+3]=Jt-rt,Xe[it+1]=Yn+jt,Xe[it+7]=Yn-jt,it+=8}for(it=0,Qe=0;Qe<8;++Qe){Ye=Xe[it],Je=Xe[it+8],Ge=Xe[it+16],wt=Xe[it+24],Ct=Xe[it+32],Wt=Xe[it+40],sn=Xe[it+48];var Ht=Ye+(bn=Xe[it+56]),nn=Ye-bn,an=Je+sn,St=Je-sn,Ut=Ge+Wt,Lr=Ge-Wt,Ot=wt+Ct,$n=wt-Ct,or=Ht+Ot,Mi=Ht-Ot,Br=an+Ut,xr=an-Ut;Xe[it]=or+Br,Xe[it+32]=or-Br;var ur=.707106781*(xr+Mi);Xe[it+16]=Mi+ur,Xe[it+48]=Mi-ur;var gi=.382683433*((or=$n+Lr)-(xr=St+nn)),yr=.5411961*or+gi,Gr=1.306562965*xr+gi,zr=.707106781*(Br=Lr+St),ln=nn+zr,_i=nn-zr;Xe[it+40]=_i+yr,Xe[it+24]=_i-yr,Xe[it+8]=ln+Gr,Xe[it+56]=ln-Gr,it++}for(Qe=0;Qe<64;++Qe)ot=Xe[Qe]*Ie[Qe],m[Qe]=ot>0?ot+.5|0:ot-.5|0;return m}(Z,G),Te=0;Te<64;++Te)x[pe[Te]]=De[Te];var qe=x[0]-se;se=x[0],qe==0?re(ce[0]):(re(ce[v[ve=32767+qe]]),re(p[ve]));for(var ge=63;ge>0&&x[ge]==0;)ge--;if(ge==0)return re(ee),se;for(var Q,ie=1;ie<=ge;){for(var fe=ie;x[ie]==0&&ie<=ge;)++ie;var Ce=ie-fe;if(Ce>=16){Q=Ce>>4;for(var de=1;de<=Q;++de)re(X);Ce&=15}ve=32767+x[ie],re(he[(Ce<<4)+v[ve]]),re(p[ve]),ie++}return ge!=63&&re(ee),se}function Oe(Z){Z=Math.min(Math.max(Z,1),100),s!=Z&&(function(G){for(var se=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ce=0;ce<64;ce++){var he=o((se[ce]*G+50)/100);he=Math.min(Math.max(he,1),255),a[pe[ce]]=he}for(var ve=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ee=0;ee<64;ee++){var X=o((ve[ee]*G+50)/100);X=Math.min(Math.max(X,1),255),l[pe[ee]]=X}for(var De=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Te=0,qe=0;qe<8;qe++)for(var ge=0;ge<8;ge++)c[Te]=1/(a[pe[Te]]*De[qe]*De[ge]*8),d[Te]=1/(l[pe[Te]]*De[qe]*De[ge]*8),Te++}(Z<50?Math.floor(5e3/Z):Math.floor(200-2*Z)),s=Z)}this.encode=function(Z,G){G&&Oe(G),E=new Array,M=0,A=7,_e(65496),_e(65504),_e(16),J(74),J(70),J(73),J(70),J(0),J(1),J(1),J(0),_e(1),_e(1),J(0),J(0),function(){_e(65499),_e(132),J(0);for(var Je=0;Je<64;Je++)J(a[Je]);J(1);for(var Ge=0;Ge<64;Ge++)J(l[Ge])}(),function(Je,Ge){_e(65472),_e(17),J(8),_e(Ge),_e(Je),J(3),J(1),J(17),J(0),J(2),J(17),J(1),J(3),J(17),J(1)}(Z.width,Z.height),function(){_e(65476),_e(418),J(0);for(var Je=0;Je<16;Je++)J(N[Je+1]);for(var Ge=0;Ge<=11;Ge++)J(j[Ge]);J(16);for(var wt=0;wt<16;wt++)J(q[wt+1]);for(var Ct=0;Ct<=161;Ct++)J(I[Ct]);J(1);for(var Wt=0;Wt<16;Wt++)J(B[Wt+1]);for(var sn=0;sn<=11;sn++)J($[sn]);J(17);for(var bn=0;bn<16;bn++)J(R[bn+1]);for(var Qe=0;Qe<=161;Qe++)J(U[Qe])}(),_e(65498),_e(12),J(3),J(1),J(0),J(2),J(17),J(3),J(17),J(0),J(63),J(0);var se=0,ce=0,he=0;M=0,A=7,this.encode.displayName="_encode_";for(var ve,ee,X,De,Te,qe,ge,Q,ie,fe=Z.data,Ce=Z.width,de=Z.height,Xe=4*Ce,Ie=0;Ie<de;){for(ve=0;ve<Xe;){for(Te=Xe*Ie+ve,ge=-1,Q=0,ie=0;ie<64;ie++)qe=Te+(Q=ie>>3)*Xe+(ge=4*(7&ie)),Ie+Q>=de&&(qe-=Xe*(Ie+1+Q-de)),ve+ge>=Xe&&(qe-=ve+ge-Xe+4),ee=fe[qe++],X=fe[qe++],De=fe[qe++],O[ie]=(me[ee]+me[X+256>>0]+me[De+512>>0]>>16)-128,z[ie]=(me[ee+768>>0]+me[X+1024>>0]+me[De+1280>>0]>>16)-128,K[ie]=(me[ee+1280>>0]+me[X+1536>>0]+me[De+1792>>0]>>16)-128;se=Le(O,c,se,e,r),ce=Le(z,d,ce,n,i),he=Le(K,d,he,n,i),ve+=32}Ie+=8}if(A>=0){var Ye=[];Ye[1]=A+1,Ye[0]=(1<<A+1)-1,re(Ye)}return _e(65497),new Uint8Array(E)},t=t||50,function(){for(var Z=String.fromCharCode,G=0;G<256;G++)ne[G]=Z(G)}(),e=V(N,j),n=V(B,$),r=V(q,I),i=V(R,U),function(){for(var Z=1,G=2,se=1;se<=15;se++){for(var ce=Z;ce<G;ce++)v[32767+ce]=se,p[32767+ce]=[],p[32767+ce][1]=se,p[32767+ce][0]=ce;for(var he=-(G-1);he<=-Z;he++)v[32767+he]=se,p[32767+he]=[],p[32767+he][1]=se,p[32767+he][0]=G-1+he;Z<<=1,G<<=1}}(),function(){for(var Z=0;Z<256;Z++)me[Z]=19595*Z,me[Z+256>>0]=38470*Z,me[Z+512>>0]=7471*Z+32768,me[Z+768>>0]=-11059*Z,me[Z+1024>>0]=-21709*Z,me[Z+1280>>0]=32768*Z+8421375,me[Z+1536>>0]=-27439*Z,me[Z+1792>>0]=-5329*Z}(),Oe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function hc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function B5(t){function e(N){if(!N)throw Error("assert :P")}function n(N,j,q){for(var I=0;4>I;I++)if(N[j+I]!=q.charCodeAt(I))return!0;return!1}function r(N,j,q,I,B){for(var $=0;$<B;$++)N[j+$]=q[I+$]}function i(N,j,q,I){for(var B=0;B<I;B++)N[j+B]=q}function s(N){return new Int32Array(N)}function o(N,j){for(var q=[],I=0;I<N;I++)q.push(new j);return q}function a(N,j){var q=[];return function I(B,$,R){for(var U=R[$],V=0;V<U&&(B.push(R.length>$+1?[]:new j),!(R.length<$+1));V++)I(B[V],$+1,R)}(q,0,N),q}var l=function(){var N=this;function j(w,T){for(var Y=1<<T-1>>>0;w&Y;)Y>>>=1;return Y?(w&Y-1)+Y:w}function q(w,T,Y,ue,xe){e(!(ue%Y));do w[T+(ue-=Y)]=xe;while(0<ue)}function I(w,T,Y,ue,xe){if(e(2328>=xe),512>=xe)var Me=s(512);else if((Me=s(xe))==null)return 0;return function(Ae,Ne,Fe,Ke,pt,Rt){var Ft,Et,Zt=Ne,Yt=1<<Fe,gt=s(16),bt=s(16);for(e(pt!=0),e(Ke!=null),e(Ae!=null),e(0<Fe),Et=0;Et<pt;++Et){if(15<Ke[Et])return 0;++gt[Ke[Et]]}if(gt[0]==pt)return 0;for(bt[1]=0,Ft=1;15>Ft;++Ft){if(gt[Ft]>1<<Ft)return 0;bt[Ft+1]=bt[Ft]+gt[Ft]}for(Et=0;Et<pt;++Et)Ft=Ke[Et],0<Ke[Et]&&(Rt[bt[Ft]++]=Et);if(bt[15]==1)return(Ke=new B).g=0,Ke.value=Rt[0],q(Ae,Zt,1,Yt,Ke),Yt;var on,vn=-1,un=Yt-1,Bn=0,An=1,nr=1,h=1<<Fe;for(Et=0,Ft=1,pt=2;Ft<=Fe;++Ft,pt<<=1){if(An+=nr<<=1,0>(nr-=gt[Ft]))return 0;for(;0<gt[Ft];--gt[Ft])(Ke=new B).g=Ft,Ke.value=Rt[Et++],q(Ae,Zt+Bn,pt,h,Ke),Bn=j(Bn,Ft)}for(Ft=Fe+1,pt=2;15>=Ft;++Ft,pt<<=1){if(An+=nr<<=1,0>(nr-=gt[Ft]))return 0;for(;0<gt[Ft];--gt[Ft]){if(Ke=new B,(Bn&un)!=vn){for(Zt+=h,on=1<<(vn=Ft)-Fe;15>vn&&!(0>=(on-=gt[vn]));)++vn,on<<=1;Yt+=h=1<<(on=vn-Fe),Ae[Ne+(vn=Bn&un)].g=on+Fe,Ae[Ne+vn].value=Zt-Ne-vn}Ke.g=Ft-Fe,Ke.value=Rt[Et++],q(Ae,Zt+(Bn>>Fe),pt,h,Ke),Bn=j(Bn,Ft)}}return An!=2*bt[15]-1?0:Yt}(w,T,Y,ue,xe,Me)}function B(){this.value=this.g=0}function $(){this.value=this.g=0}function R(){this.G=o(5,B),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ps,$)}function U(w,T,Y,ue){e(w!=null),e(T!=null),e(2147483648>ue),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=T,w.pa=Y,w.Jd=T,w.Yc=Y+ue,w.Zc=4<=ue?Y+ue-4+1:Y,ve(w)}function V(w,T){for(var Y=0;0<T--;)Y|=X(w,128)<<T;return Y}function re(w,T){var Y=V(w,T);return ee(w)?-Y:Y}function J(w,T,Y,ue){var xe,Me=0;for(e(w!=null),e(T!=null),e(4294967288>ue),w.Sb=ue,w.Ra=0,w.u=0,w.h=0,4<ue&&(ue=4),xe=0;xe<ue;++xe)Me+=T[Y+xe]<<8*xe;w.Ra=Me,w.bb=ue,w.oa=T,w.pa=Y}function _e(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<No-8>>>0,++w.bb,w.u-=8;se(w)&&(w.h=1,w.u=0)}function Le(w,T){if(e(0<=T),!w.h&&T<=Xo){var Y=G(w)&ka[T];return w.u+=T,_e(w),Y}return w.h=1,w.u=0}function Oe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(w){return w.Ra>>>(w.u&No-1)>>>0}function se(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>No}function ce(w,T){w.u=T,w.h=se(w)}function he(w){w.u>=Rl&&(e(w.u>=Rl),_e(w))}function ve(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function ee(w){return V(w,1)}function X(w,T){var Y=w.Ca;0>w.b&&ve(w);var ue=w.b,xe=Y*T>>>8,Me=(w.I>>>ue>xe)+0;for(Me?(Y-=xe,w.I-=xe+1<<ue>>>0):Y=xe+1,ue=Y,xe=0;256<=ue;)xe+=8,ue>>=8;return ue=7^xe+Qs[ue],w.b-=ue,w.Ca=(Y<<ue)-1,Me}function De(w,T,Y){w[T+0]=Y>>24&255,w[T+1]=Y>>16&255,w[T+2]=Y>>8&255,w[T+3]=Y>>0&255}function Te(w,T){return w[T+0]<<0|w[T+1]<<8}function qe(w,T){return Te(w,T)|w[T+2]<<16}function ge(w,T){return Te(w,T)|Te(w,T+2)<<16}function Q(w,T){var Y=1<<T;return e(w!=null),e(0<T),w.X=s(Y),w.X==null?0:(w.Mb=32-T,w.Xa=T,1)}function ie(w,T){e(w!=null),e(T!=null),e(w.Xa==T.Xa),r(T.X,0,w.X,0,1<<T.Xa)}function fe(){this.X=[],this.Xa=this.Mb=0}function Ce(w,T,Y,ue){e(Y!=null),e(ue!=null);var xe=Y[0],Me=ue[0];return xe==0&&(xe=(w*Me+T/2)/T),Me==0&&(Me=(T*xe+w/2)/w),0>=xe||0>=Me?0:(Y[0]=xe,ue[0]=Me,1)}function de(w,T){return w+(1<<T)-1>>>T}function Xe(w,T){return((4278255360&w)+(4278255360&T)>>>0&4278255360)+((16711935&w)+(16711935&T)>>>0&16711935)>>>0}function Ie(w,T){N[T]=function(Y,ue,xe,Me,Ae,Ne,Fe){var Ke;for(Ke=0;Ke<Ae;++Ke){var pt=N[w](Ne[Fe+Ke-1],xe,Me+Ke);Ne[Fe+Ke]=Xe(Y[ue+Ke],pt)}}}function Ye(){this.ud=this.hd=this.jd=0}function Je(w,T){return((4278124286&(w^T))>>>1)+(w&T)>>>0}function Ge(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function wt(w,T){return Ge(w+(w-T+.5>>1))}function Ct(w,T,Y){return Math.abs(T-Y)-Math.abs(w-Y)}function Wt(w,T,Y,ue,xe,Me,Ae){for(ue=Me[Ae-1],Y=0;Y<xe;++Y)Me[Ae+Y]=ue=Xe(w[T+Y],ue)}function sn(w,T,Y,ue,xe){var Me;for(Me=0;Me<Y;++Me){var Ae=w[T+Me],Ne=Ae>>8&255,Fe=16711935&(Fe=(Fe=16711935&Ae)+((Ne<<16)+Ne));ue[xe+Me]=(4278255360&Ae)+Fe>>>0}}function bn(w,T){T.jd=w>>0&255,T.hd=w>>8&255,T.ud=w>>16&255}function Qe(w,T,Y,ue,xe,Me){var Ae;for(Ae=0;Ae<ue;++Ae){var Ne=T[Y+Ae],Fe=Ne>>>8,Ke=Ne,pt=255&(pt=(pt=Ne>>>16)+((w.jd<<24>>24)*(Fe<<24>>24)>>>5));Ke=255&(Ke=(Ke=Ke+((w.hd<<24>>24)*(Fe<<24>>24)>>>5))+((w.ud<<24>>24)*(pt<<24>>24)>>>5)),xe[Me+Ae]=(4278255360&Ne)+(pt<<16)+Ke}}function ot(w,T,Y,ue,xe){N[T]=function(Me,Ae,Ne,Fe,Ke,pt,Rt,Ft,Et){for(Fe=Rt;Fe<Ft;++Fe)for(Rt=0;Rt<Et;++Rt)Ke[pt++]=xe(Ne[ue(Me[Ae++])])},N[w]=function(Me,Ae,Ne,Fe,Ke,pt,Rt){var Ft=8>>Me.b,Et=Me.Ea,Zt=Me.K[0],Yt=Me.w;if(8>Ft)for(Me=(1<<Me.b)-1,Yt=(1<<Ft)-1;Ae<Ne;++Ae){var gt,bt=0;for(gt=0;gt<Et;++gt)gt&Me||(bt=ue(Fe[Ke++])),pt[Rt++]=xe(Zt[bt&Yt]),bt>>=Ft}else N["VP8LMapColor"+Y](Fe,Ke,Zt,Yt,pt,Rt,Ae,Ne,Et)}}function it(w,T,Y,ue,xe){for(Y=T+Y;T<Y;){var Me=w[T++];ue[xe++]=Me>>16&255,ue[xe++]=Me>>8&255,ue[xe++]=Me>>0&255}}function Vt(w,T,Y,ue,xe){for(Y=T+Y;T<Y;){var Me=w[T++];ue[xe++]=Me>>16&255,ue[xe++]=Me>>8&255,ue[xe++]=Me>>0&255,ue[xe++]=Me>>24&255}}function Qt(w,T,Y,ue,xe){for(Y=T+Y;T<Y;){var Me=(Ae=w[T++])>>16&240|Ae>>12&15,Ae=Ae>>0&240|Ae>>28&15;ue[xe++]=Me,ue[xe++]=Ae}}function kn(w,T,Y,ue,xe){for(Y=T+Y;T<Y;){var Me=(Ae=w[T++])>>16&248|Ae>>13&7,Ae=Ae>>5&224|Ae>>3&31;ue[xe++]=Me,ue[xe++]=Ae}}function Ln(w,T,Y,ue,xe){for(Y=T+Y;T<Y;){var Me=w[T++];ue[xe++]=Me>>0&255,ue[xe++]=Me>>8&255,ue[xe++]=Me>>16&255}}function Mn(w,T,Y,ue,xe,Me){if(Me==0)for(Y=T+Y;T<Y;)De(ue,((Me=w[T++])[0]>>24|Me[1]>>8&65280|Me[2]<<8&16711680|Me[3]<<24)>>>0),xe+=32;else r(ue,xe,w,T,Y)}function Zn(w,T){N[T][0]=N[w+"0"],N[T][1]=N[w+"1"],N[T][2]=N[w+"2"],N[T][3]=N[w+"3"],N[T][4]=N[w+"4"],N[T][5]=N[w+"5"],N[T][6]=N[w+"6"],N[T][7]=N[w+"7"],N[T][8]=N[w+"8"],N[T][9]=N[w+"9"],N[T][10]=N[w+"10"],N[T][11]=N[w+"11"],N[T][12]=N[w+"12"],N[T][13]=N[w+"13"],N[T][14]=N[w+"0"],N[T][15]=N[w+"0"]}function en(w){return w==Hs||w==Ws||w==ba||w==u}function wn(){this.eb=[],this.size=this.A=this.fb=0}function En(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Xn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new wn,this.f.kb=new En,this.sd=null}function dr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function vr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function sr(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function ut(w,T){var Y=w.T,ue=T.ba.f.RGBA,xe=ue.eb,Me=ue.fb+w.ka*ue.A,Ae=so[T.ba.S],Ne=w.y,Fe=w.O,Ke=w.f,pt=w.N,Rt=w.ea,Ft=w.W,Et=T.cc,Zt=T.dc,Yt=T.Mc,gt=T.Nc,bt=w.ka,on=w.ka+w.T,vn=w.U,un=vn+1>>1;for(bt==0?Ae(Ne,Fe,null,null,Ke,pt,Rt,Ft,Ke,pt,Rt,Ft,xe,Me,null,null,vn):(Ae(T.ec,T.fc,Ne,Fe,Et,Zt,Yt,gt,Ke,pt,Rt,Ft,xe,Me-ue.A,xe,Me,vn),++Y);bt+2<on;bt+=2)Et=Ke,Zt=pt,Yt=Rt,gt=Ft,pt+=w.Rc,Ft+=w.Rc,Me+=2*ue.A,Ae(Ne,(Fe+=2*w.fa)-w.fa,Ne,Fe,Et,Zt,Yt,gt,Ke,pt,Rt,Ft,xe,Me-ue.A,xe,Me,vn);return Fe+=w.fa,w.j+on<w.o?(r(T.ec,T.fc,Ne,Fe,vn),r(T.cc,T.dc,Ke,pt,un),r(T.Mc,T.Nc,Rt,Ft,un),Y--):1&on||Ae(Ne,Fe,null,null,Ke,pt,Rt,Ft,Ke,pt,Rt,Ft,xe,Me+ue.A,null,null,vn),Y}function rt(w,T,Y){var ue=w.F,xe=[w.J];if(ue!=null){var Me=w.U,Ae=T.ba.S,Ne=Ae==ya||Ae==ba;T=T.ba.f.RGBA;var Fe=[0],Ke=w.ka;Fe[0]=w.T,w.Kb&&(Ke==0?--Fe[0]:(--Ke,xe[0]-=w.width),w.j+w.ka+w.T==w.o&&(Fe[0]=w.o-w.j-Ke));var pt=T.eb;Ke=T.fb+Ke*T.A,w=Bi(ue,xe[0],w.width,Me,Fe,pt,Ke+(Ne?0:3),T.A),e(Y==Fe),w&&en(Ae)&&Us(pt,Ke,Ne,Me,Fe,T.A)}return 0}function jt(w){var T=w.ma,Y=T.ba.S,ue=11>Y,xe=Y==gr||Y==Za||Y==ya||Y==Lo||Y==12||en(Y);if(T.memory=null,T.Ib=null,T.Jb=null,T.Nd=null,!Qu(T.Oa,w,xe?11:12))return 0;if(xe&&en(Y)&&pn(),w.da)alert("todo:use_scaling");else{if(ue){if(T.Ib=sr,w.Kb){if(Y=w.U+1>>1,T.memory=s(w.U+2*Y),T.memory==null)return 0;T.ec=T.memory,T.fc=0,T.cc=T.ec,T.dc=T.fc+w.U,T.Mc=T.cc,T.Nc=T.dc+Y,T.Ib=ut,pn()}}else alert("todo:EmitYUV");xe&&(T.Jb=rt,ue&&Pt())}if(ue&&!Tc){for(w=0;256>w;++w)Hh[w]=89858*(w-128)+yl>>Uh,Wh[w]=-22014*(w-128)+yl,Hp[w]=-45773*(w-128),fu[w]=113618*(w-128)+yl>>Uh;for(w=oh;w<Nd;++w)T=76283*(w-16)+yl>>Uh,Gh[w-oh]=Ur(T,255),Tf[w-oh]=Ur(T+8>>4,15);Tc=1}return 1}function Tn(w){var T=w.ma,Y=w.U,ue=w.T;return e(!(1&w.ka)),0>=Y||0>=ue?0:(Y=T.Ib(w,T),T.Jb!=null&&T.Jb(w,T,Y),T.Dc+=Y,1)}function Yn(w){w.ma.memory=null}function Jt(w,T,Y,ue){return Le(w,8)!=47?0:(T[0]=Le(w,14)+1,Y[0]=Le(w,14)+1,ue[0]=Le(w,1),Le(w,3)!=0?0:!w.h)}function Ht(w,T){if(4>w)return w+1;var Y=w-2>>1;return(2+(1&w)<<Y)+Le(T,Y)+1}function nn(w,T){return 120<T?T-120:1<=(Y=((Y=lt[T-1])>>4)*w+(8-(15&Y)))?Y:1;var Y}function an(w,T,Y){var ue=G(Y),xe=w[T+=255&ue].g-8;return 0<xe&&(ce(Y,Y.u+8),ue=G(Y),T+=w[T].value,T+=ue&(1<<xe)-1),ce(Y,Y.u+w[T].g),w[T].value}function St(w,T,Y){return Y.g+=w.g,Y.value+=w.value<<T>>>0,e(8>=Y.g),w.g}function Ut(w,T,Y){var ue=w.xc;return e((T=ue==0?0:w.vc[w.md*(Y>>ue)+(T>>ue)])<w.Wb),w.Ya[T]}function Lr(w,T,Y,ue){var xe=w.ab,Me=w.c*T,Ae=w.C;T=Ae+T;var Ne=Y,Fe=ue;for(ue=w.Ta,Y=w.Ua;0<xe--;){var Ke=w.gc[xe],pt=Ae,Rt=T,Ft=Ne,Et=Fe,Zt=(Fe=ue,Ne=Y,Ke.Ea);switch(e(pt<Rt),e(Rt<=Ke.nc),Ke.hc){case 2:Ac(Ft,Et,(Rt-pt)*Zt,Fe,Ne);break;case 0:var Yt=pt,gt=Rt,bt=Fe,on=Ne,vn=(h=Ke).Ea;Yt==0&&(_o(Ft,Et,null,null,1,bt,on),Wt(Ft,Et+1,0,0,vn-1,bt,on+1),Et+=vn,on+=vn,++Yt);for(var un=1<<h.b,Bn=un-1,An=de(vn,h.b),nr=h.K,h=h.w+(Yt>>h.b)*An;Yt<gt;){var g=nr,_=h,S=1;for(wo(Ft,Et,bt,on-vn,1,bt,on);S<vn;){var k=(S&~Bn)+un;k>vn&&(k=vn),(0,Ga[g[_++]>>8&15])(Ft,Et+ +S,bt,on+S-vn,k-S,bt,on+S),S=k}Et+=vn,on+=vn,++Yt&Bn||(h+=An)}Rt!=Ke.nc&&r(Fe,Ne-Zt,Fe,Ne+(Rt-pt-1)*Zt,Zt);break;case 1:for(Zt=Ft,gt=Et,vn=(Ft=Ke.Ea)-(on=Ft&~(bt=(Et=1<<Ke.b)-1)),Yt=de(Ft,Ke.b),un=Ke.K,Ke=Ke.w+(pt>>Ke.b)*Yt;pt<Rt;){for(Bn=un,An=Ke,nr=new Ye,h=gt+on,g=gt+Ft;gt<h;)bn(Bn[An++],nr),qa(nr,Zt,gt,Et,Fe,Ne),gt+=Et,Ne+=Et;gt<g&&(bn(Bn[An++],nr),qa(nr,Zt,gt,vn,Fe,Ne),gt+=vn,Ne+=vn),++pt&bt||(Ke+=Yt)}break;case 3:if(Ft==Fe&&Et==Ne&&0<Ke.b){for(gt=Fe,Ft=Zt=Ne+(Rt-pt)*Zt-(on=(Rt-pt)*de(Ke.Ea,Ke.b)),Et=Fe,bt=Ne,Yt=[],on=(vn=on)-1;0<=on;--on)Yt[on]=Et[bt+on];for(on=vn-1;0<=on;--on)gt[Ft+on]=Yt[on];Ns(Ke,pt,Rt,Fe,Zt,Fe,Ne)}else Ns(Ke,pt,Rt,Ft,Et,Fe,Ne)}Ne=ue,Fe=Y}Fe!=Y&&r(ue,Y,Ne,Fe,Me)}function Ot(w,T){var Y=w.V,ue=w.Ba+w.c*w.C,xe=T-w.C;if(e(T<=w.l.o),e(16>=xe),0<xe){var Me=w.l,Ae=w.Ta,Ne=w.Ua,Fe=Me.width;if(Lr(w,xe,Y,ue),xe=Ne=[Ne],e((Y=w.C)<(ue=T)),e(Me.v<Me.va),ue>Me.o&&(ue=Me.o),Y<Me.j){var Ke=Me.j-Y;Y=Me.j,xe[0]+=Ke*Fe}if(Y>=ue?Y=0:(xe[0]+=4*Me.v,Me.ka=Y-Me.j,Me.U=Me.va-Me.v,Me.T=ue-Y,Y=1),Y){if(Ne=Ne[0],11>(Y=w.ca).S){var pt=Y.f.RGBA,Rt=(ue=Y.S,xe=Me.U,Me=Me.T,Ke=pt.eb,pt.A),Ft=Me;for(pt=pt.fb+w.Ma*pt.A;0<Ft--;){var Et=Ae,Zt=Ne,Yt=xe,gt=Ke,bt=pt;switch(ue){case Bo:no(Et,Zt,Yt,gt,bt);break;case gr:Vs(Et,Zt,Yt,gt,bt);break;case Hs:Vs(Et,Zt,Yt,gt,bt),Us(gt,bt,0,Yt,1,0);break;case Ka:ro(Et,Zt,Yt,gt,bt);break;case Za:Mn(Et,Zt,Yt,gt,bt,1);break;case Ws:Mn(Et,Zt,Yt,gt,bt,1),Us(gt,bt,0,Yt,1,0);break;case ya:Mn(Et,Zt,Yt,gt,bt,0);break;case ba:Mn(Et,Zt,Yt,gt,bt,0),Us(gt,bt,1,Yt,1,0);break;case Lo:Aa(Et,Zt,Yt,gt,bt);break;case u:Aa(Et,Zt,Yt,gt,bt),Ei(gt,bt,Yt,1,0);break;case ih:Jo(Et,Zt,Yt,gt,bt);break;default:e(0)}Ne+=Fe,pt+=Rt}w.Ma+=Me}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=Y.height)}}w.C=T,e(w.C<=w.i)}function $n(w){var T;if(0<w.ua)return 0;for(T=0;T<w.Wb;++T){var Y=w.Ya[T].G,ue=w.Ya[T].H;if(0<Y[1][ue[1]+0].g||0<Y[2][ue[2]+0].g||0<Y[3][ue[3]+0].g)return 0}return 1}function or(w,T,Y,ue,xe,Me){if(w.Z!=0){var Ae=w.qd,Ne=w.rd;for(e(vi[w.Z]!=null);T<Y;++T)vi[w.Z](Ae,Ne,ue,xe,ue,xe,Me),Ae=ue,Ne=xe,xe+=Me;w.qd=Ae,w.rd=Ne}}function Mi(w,T){var Y=w.l.ma,ue=Y.Z==0||Y.Z==1?w.l.j:w.C;if(ue=w.C<ue?ue:w.C,e(T<=w.l.o),T>ue){var xe=w.l.width,Me=Y.ca,Ae=Y.tb+xe*ue,Ne=w.V,Fe=w.Ba+w.c*ue,Ke=w.gc;e(w.ab==1),e(Ke[0].hc==3),eo(Ke[0],ue,T,Ne,Fe,Me,Ae),or(Y,ue,T,Me,Ae,xe)}w.C=w.Ma=T}function Br(w,T,Y,ue,xe,Me,Ae){var Ne=w.$/ue,Fe=w.$%ue,Ke=w.m,pt=w.s,Rt=Y+w.$,Ft=Rt;xe=Y+ue*xe;var Et=Y+ue*Me,Zt=280+pt.ua,Yt=w.Pb?Ne:16777216,gt=0<pt.ua?pt.Wa:null,bt=pt.wc,on=Rt<Et?Ut(pt,Fe,Ne):null;e(w.C<Me),e(Et<=xe);var vn=!1;e:for(;;){for(;vn||Rt<Et;){var un=0;if(Ne>=Yt){var Bn=Rt-Y;e((Yt=w).Pb),Yt.wd=Yt.m,Yt.xd=Bn,0<Yt.s.ua&&ie(Yt.s.Wa,Yt.s.vb),Yt=Ne+qt}if(Fe&bt||(on=Ut(pt,Fe,Ne)),e(on!=null),on.Qb&&(T[Rt]=on.qb,vn=!0),!vn)if(he(Ke),on.jc){un=Ke,Bn=T;var An=Rt,nr=on.pd[G(un)&Ps-1];e(on.jc),256>nr.g?(ce(un,un.u+nr.g),Bn[An]=nr.value,un=0):(ce(un,un.u+nr.g-256),e(256<=nr.value),un=nr.value),un==0&&(vn=!0)}else un=an(on.G[0],on.H[0],Ke);if(Ke.h)break;if(vn||256>un){if(!vn)if(on.nd)T[Rt]=(on.qb|un<<8)>>>0;else{if(he(Ke),vn=an(on.G[1],on.H[1],Ke),he(Ke),Bn=an(on.G[2],on.H[2],Ke),An=an(on.G[3],on.H[3],Ke),Ke.h)break;T[Rt]=(An<<24|vn<<16|un<<8|Bn)>>>0}if(vn=!1,++Rt,++Fe>=ue&&(Fe=0,++Ne,Ae!=null&&Ne<=Me&&!(Ne%16)&&Ae(w,Ne),gt!=null))for(;Ft<Rt;)un=T[Ft++],gt.X[(506832829*un&4294967295)>>>gt.Mb]=un}else if(280>un){if(un=Ht(un-256,Ke),Bn=an(on.G[4],on.H[4],Ke),he(Ke),Bn=nn(ue,Bn=Ht(Bn,Ke)),Ke.h)break;if(Rt-Y<Bn||xe-Rt<un)break e;for(An=0;An<un;++An)T[Rt+An]=T[Rt+An-Bn];for(Rt+=un,Fe+=un;Fe>=ue;)Fe-=ue,++Ne,Ae!=null&&Ne<=Me&&!(Ne%16)&&Ae(w,Ne);if(e(Rt<=xe),Fe&bt&&(on=Ut(pt,Fe,Ne)),gt!=null)for(;Ft<Rt;)un=T[Ft++],gt.X[(506832829*un&4294967295)>>>gt.Mb]=un}else{if(!(un<Zt))break e;for(vn=un-280,e(gt!=null);Ft<Rt;)un=T[Ft++],gt.X[(506832829*un&4294967295)>>>gt.Mb]=un;un=Rt,e(!(vn>>>(Bn=gt).Xa)),T[un]=Bn.X[vn],vn=!0}vn||e(Ke.h==se(Ke))}if(w.Pb&&Ke.h&&Rt<xe)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&ie(w.s.vb,w.s.Wa);else{if(Ke.h)break e;Ae!=null&&Ae(w,Ne>Me?Me:Ne),w.a=0,w.$=Rt-Y}return 1}return w.a=3,0}function xr(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var T=w.Wa;T!=null&&(T.X=null),w.vb=null,e(w!=null)}function ur(){var w=new Nl;return w==null?null:(w.a=0,w.xb=Tu,Zn("Predictor","VP8LPredictors"),Zn("Predictor","VP8LPredictors_C"),Zn("PredictorAdd","VP8LPredictorsAdd"),Zn("PredictorAdd","VP8LPredictorsAdd_C"),Ac=sn,qa=Qe,no=it,Vs=Vt,Aa=Qt,Jo=kn,ro=Ln,N.VP8LMapColor32b=Wa,N.VP8LMapColor8b=to,w)}function gi(w,T,Y,ue,xe){var Me=1,Ae=[w],Ne=[T],Fe=ue.m,Ke=ue.s,pt=null,Rt=0;e:for(;;){if(Y)for(;Me&&Le(Fe,1);){var Ft=Ae,Et=Ne,Zt=ue,Yt=1,gt=Zt.m,bt=Zt.gc[Zt.ab],on=Le(gt,2);if(Zt.Oc&1<<on)Me=0;else{switch(Zt.Oc|=1<<on,bt.hc=on,bt.Ea=Ft[0],bt.nc=Et[0],bt.K=[null],++Zt.ab,e(4>=Zt.ab),on){case 0:case 1:bt.b=Le(gt,3)+2,Yt=gi(de(bt.Ea,bt.b),de(bt.nc,bt.b),0,Zt,bt.K),bt.K=bt.K[0];break;case 3:var vn,un=Le(gt,8)+1,Bn=16<un?0:4<un?1:2<un?2:3;if(Ft[0]=de(bt.Ea,Bn),bt.b=Bn,vn=Yt=gi(un,1,0,Zt,bt.K)){var An,nr=un,h=bt,g=1<<(8>>h.b),_=s(g);if(_==null)vn=0;else{var S=h.K[0],k=h.w;for(_[0]=h.K[0][0],An=1;An<1*nr;++An)_[An]=Xe(S[k+An],_[An-1]);for(;An<4*g;++An)_[An]=0;h.K[0]=null,h.K[0]=_,vn=1}}Yt=vn;break;case 2:break;default:e(0)}Me=Yt}}if(Ae=Ae[0],Ne=Ne[0],Me&&Le(Fe,1)&&!(Me=1<=(Rt=Le(Fe,4))&&11>=Rt)){ue.a=3;break e}var H;if(H=Me)t:{var te,ae,ye,Ee=ue,nt=Ae,We=Ne,yt=Rt,It=Y,tn=Ee.m,xn=Ee.s,Sn=[null],fr=1,tt=0,st=Dt[yt];n:for(;;){if(It&&Le(tn,1)){var ft=Le(tn,3)+2,zt=de(nt,ft),Lt=de(We,ft),Bt=zt*Lt;if(!gi(zt,Lt,0,Ee,Sn))break n;for(Sn=Sn[0],xn.xc=ft,te=0;te<Bt;++te){var be=Sn[te]>>8&65535;Sn[te]=be,be>=fr&&(fr=be+1)}}if(tn.h)break n;for(ae=0;5>ae;++ae){var ke=W[ae];!ae&&0<yt&&(ke+=1<<yt),tt<ke&&(tt=ke)}var ze=o(fr*st,B),je=fr,Ue=o(je,R);if(Ue==null)var He=null;else e(65536>=je),He=Ue;var ct=s(tt);if(He==null||ct==null||ze==null){Ee.a=1;break n}var ht=ze;for(te=ye=0;te<fr;++te){var mt=He[te],Mt=mt.G,kt=mt.H,cn=0,Un=1,qn=0;for(ae=0;5>ae;++ae){ke=W[ae],Mt[ae]=ht,kt[ae]=ye,!ae&&0<yt&&(ke+=1<<yt);i:{var rr,yi=ke,Ri=Ee,ei=ct,qi=ht,jo=ye,nc=0,Ra=Ri.m,Id=Le(Ra,1);if(i(ei,0,0,yi),Id){var bl=Le(Ra,1)+1,Dc=Le(Ra,1),Fa=Le(Ra,Dc==0?1:8);ei[Fa]=1,bl==2&&(ei[Fa=Le(Ra,8)]=1);var oo=1}else{var xs=s(19),Bf=Le(Ra,4)+4;if(19<Bf){Ri.a=3;var Bd=0;break i}for(rr=0;rr<Bf;++rr)xs[Pe[rr]]=Le(Ra,3);var Rd=void 0,Fd=void 0,Rf=Ri,li=xs,Ff=yi,Vm=ei,ah=0,rc=Rf.m,Um=8,Hm=o(128,B);r:for(;I(Hm,0,7,li,19);){if(Le(rc,1)){var Fl=2+2*Le(rc,3);if((Rd=2+Le(rc,Fl))>Ff)break r}else Rd=Ff;for(Fd=0;Fd<Ff&&Rd--;){he(rc);var Wm=Hm[0+(127&G(rc))];ce(rc,rc.u+Wm.g);var ic=Wm.value;if(16>ic)Vm[Fd++]=ic,ic!=0&&(Um=ic);else{var Wp=ic==16,Gp=ic-16,Gm=P[Gp],Ja=Le(rc,y[Gp])+Gm;if(Fd+Ja>Ff)break r;for(var Oc=Wp?Um:0;0<Ja--;)Vm[Fd++]=Oc}}ah=1;break r}ah||(Rf.a=3),oo=ah}(oo=oo&&!Ra.h)&&(nc=I(qi,jo,8,ei,yi)),oo&&nc!=0?Bd=nc:(Ri.a=3,Bd=0)}if(Bd==0)break n;if(Un&&le[ae]==1&&(Un=ht[ye].g==0),cn+=ht[ye].g,ye+=Bd,3>=ae){var lh,jf=ct[0];for(lh=1;lh<ke;++lh)ct[lh]>jf&&(jf=ct[lh]);qn+=jf}}if(mt.nd=Un,mt.Qb=0,Un&&(mt.qb=(Mt[3][kt[3]+0].value<<24|Mt[1][kt[1]+0].value<<16|Mt[2][kt[2]+0].value)>>>0,cn==0&&256>Mt[0][kt[0]+0].value&&(mt.Qb=1,mt.qb+=Mt[0][kt[0]+0].value<<8)),mt.jc=!mt.Qb&&6>qn,mt.jc){var uh,Du=mt;for(uh=0;uh<Ps;++uh){var Ou=uh,sc=Du.pd[Ou],qh=Du.G[0][Du.H[0]+Ou];256<=qh.value?(sc.g=qh.g+256,sc.value=qh.value):(sc.g=0,sc.value=0,Ou>>=St(qh,8,sc),Ou>>=St(Du.G[1][Du.H[1]+Ou],16,sc),Ou>>=St(Du.G[2][Du.H[2]+Ou],0,sc),St(Du.G[3][Du.H[3]+Ou],24,sc))}}}xn.vc=Sn,xn.Wb=fr,xn.Ya=He,xn.yc=ze,H=1;break t}H=0}if(!(Me=H)){ue.a=3;break e}if(0<Rt){if(Ke.ua=1<<Rt,!Q(Ke.Wa,Rt)){ue.a=1,Me=0;break e}}else Ke.ua=0;var jd=ue,oc=Ae,e1=Ne,Nu=jd.s,zf=Nu.xc;if(jd.c=oc,jd.i=e1,Nu.md=de(oc,zf),Nu.wc=zf==0?-1:(1<<zf)-1,Y){ue.xb=Od;break e}if((pt=s(Ae*Ne))==null){ue.a=1,Me=0;break e}Me=(Me=Br(ue,pt,0,Ae,Ne,Ne,null))&&!Fe.h;break e}return Me?(xe!=null?xe[0]=pt:(e(pt==null),e(Y)),ue.$=0,Y||xr(Ke)):xr(Ke),Me}function yr(w,T){var Y=w.c*w.i,ue=Y+T+16*T;return e(w.c<=T),w.V=s(ue),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+Y+T,1)}function Gr(w,T){var Y=w.C,ue=T-Y,xe=w.V,Me=w.Ba+w.c*Y;for(e(T<=w.l.o);0<ue;){var Ae=16<ue?16:ue,Ne=w.l.ma,Fe=w.l.width,Ke=Fe*Ae,pt=Ne.ca,Rt=Ne.tb+Fe*Y,Ft=w.Ta,Et=w.Ua;Lr(w,Ae,xe,Me),ws(Ft,Et,pt,Rt,Ke),or(Ne,Y,Y+Ae,pt,Rt,Fe),ue-=Ae,xe+=Ae*w.c,Y+=Ae}e(Y==T),w.C=w.Ma=T}function zr(){this.ub=this.yd=this.td=this.Rb=0}function ln(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function _i(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ni(){this.Yb=function(){var w=[];return function T(Y,ue,xe){for(var Me=xe[ue],Ae=0;Ae<Me&&(Y.push(xe.length>ue+1?[]:0),!(xe.length<ue+1));Ae++)T(Y[Ae],ue+1,xe)}(w,0,[3,11]),w}()}function Ui(){this.jb=s(3),this.Wc=a([4,8],Ni),this.Xc=a([4,17],Ni)}function hi(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Ir(){this.ld=this.La=this.dd=this.tc=0}function di(){this.Na=this.la=0}function Sr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ki(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function js(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ir),this.Y=0,this.ya=Array(new ki),this.aa=0,this.l=new On}function Ea(){this.y=s(16),this.f=s(8),this.ea=s(8)}function wi(){this.cb=this.a=0,this.sc="",this.m=new Oe,this.Od=new zr,this.Kc=new ln,this.ed=new hi,this.Qa=new _i,this.Ic=this.$c=this.Aa=0,this.D=new js,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Oe),this.ia=0,this.pb=o(4,Sr),this.Pa=new Ui,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ea),this.Hd=0,this.rb=Array(new di),this.sb=0,this.wa=Array(new Ir),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ki),this.L=this.aa=0,this.gd=a([4,2],Ir),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function On(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function br(){var w=new wi;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,tr||(tr=ds)),w}function Wn(w,T,Y){return w.a==0&&(w.a=T,w.sc=Y,w.cb=0),0}function Hi(w,T,Y){return 3<=Y&&w[T+0]==157&&w[T+1]==1&&w[T+2]==42}function Ki(w,T){if(w==null)return 0;if(w.a=0,w.sc="OK",T==null)return Wn(w,2,"null VP8Io passed to VP8GetHeaders()");var Y=T.data,ue=T.w,xe=T.ha;if(4>xe)return Wn(w,7,"Truncated header.");var Me=Y[ue+0]|Y[ue+1]<<8|Y[ue+2]<<16,Ae=w.Od;if(Ae.Rb=!(1&Me),Ae.td=Me>>1&7,Ae.yd=Me>>4&1,Ae.ub=Me>>5,3<Ae.td)return Wn(w,3,"Incorrect keyframe parameters.");if(!Ae.yd)return Wn(w,4,"Frame not displayable.");ue+=3,xe-=3;var Ne=w.Kc;if(Ae.Rb){if(7>xe)return Wn(w,7,"cannot parse picture header");if(!Hi(Y,ue,xe))return Wn(w,3,"Bad code word");Ne.c=16383&(Y[ue+4]<<8|Y[ue+3]),Ne.Td=Y[ue+4]>>6,Ne.i=16383&(Y[ue+6]<<8|Y[ue+5]),Ne.Ud=Y[ue+6]>>6,ue+=7,xe-=7,w.za=Ne.c+15>>4,w.Ub=Ne.i+15>>4,T.width=Ne.c,T.height=Ne.i,T.Da=0,T.j=0,T.v=0,T.va=T.width,T.o=T.height,T.da=0,T.ib=T.width,T.hb=T.height,T.U=T.width,T.T=T.height,i((Me=w.Pa).jb,0,255,Me.jb.length),e((Me=w.Qa)!=null),Me.Cb=0,Me.Bb=0,Me.Fb=1,i(Me.Zb,0,0,Me.Zb.length),i(Me.Lb,0,0,Me.Lb)}if(Ae.ub>xe)return Wn(w,7,"bad partition length");U(Me=w.m,Y,ue,Ae.ub),ue+=Ae.ub,xe-=Ae.ub,Ae.Rb&&(Ne.Ld=ee(Me),Ne.Kd=ee(Me)),Ne=w.Qa;var Fe,Ke=w.Pa;if(e(Me!=null),e(Ne!=null),Ne.Cb=ee(Me),Ne.Cb){if(Ne.Bb=ee(Me),ee(Me)){for(Ne.Fb=ee(Me),Fe=0;4>Fe;++Fe)Ne.Zb[Fe]=ee(Me)?re(Me,7):0;for(Fe=0;4>Fe;++Fe)Ne.Lb[Fe]=ee(Me)?re(Me,6):0}if(Ne.Bb)for(Fe=0;3>Fe;++Fe)Ke.jb[Fe]=ee(Me)?V(Me,8):255}else Ne.Bb=0;if(Me.Ka)return Wn(w,3,"cannot parse segment header");if((Ne=w.ed).zd=ee(Me),Ne.Tb=V(Me,6),Ne.wb=V(Me,3),Ne.Pc=ee(Me),Ne.Pc&&ee(Me)){for(Ke=0;4>Ke;++Ke)ee(Me)&&(Ne.vd[Ke]=re(Me,6));for(Ke=0;4>Ke;++Ke)ee(Me)&&(Ne.od[Ke]=re(Me,6))}if(w.L=Ne.Tb==0?0:Ne.zd?1:2,Me.Ka)return Wn(w,3,"cannot parse filter header");var pt=xe;if(xe=Fe=ue,ue=Fe+pt,Ne=pt,w.Xb=(1<<V(w.m,2))-1,pt<3*(Ke=w.Xb))Y=7;else{for(Fe+=3*Ke,Ne-=3*Ke,pt=0;pt<Ke;++pt){var Rt=Y[xe+0]|Y[xe+1]<<8|Y[xe+2]<<16;Rt>Ne&&(Rt=Ne),U(w.Jc[+pt],Y,Fe,Rt),Fe+=Rt,Ne-=Rt,xe+=3}U(w.Jc[+Ke],Y,Fe,Ne),Y=Fe<ue?0:5}if(Y!=0)return Wn(w,Y,"cannot parse partitions");for(Y=V(Fe=w.m,7),xe=ee(Fe)?re(Fe,4):0,ue=ee(Fe)?re(Fe,4):0,Ne=ee(Fe)?re(Fe,4):0,Ke=ee(Fe)?re(Fe,4):0,Fe=ee(Fe)?re(Fe,4):0,pt=w.Qa,Rt=0;4>Rt;++Rt){if(pt.Cb){var Ft=pt.Zb[Rt];pt.Fb||(Ft+=Y)}else{if(0<Rt){w.pb[Rt]=w.pb[0];continue}Ft=Y}var Et=w.pb[Rt];Et.Sc[0]=hn[Ur(Ft+xe,127)],Et.Sc[1]=Fn[Ur(Ft+0,127)],Et.Eb[0]=2*hn[Ur(Ft+ue,127)],Et.Eb[1]=101581*Fn[Ur(Ft+Ne,127)]>>16,8>Et.Eb[1]&&(Et.Eb[1]=8),Et.Qc[0]=hn[Ur(Ft+Ke,117)],Et.Qc[1]=Fn[Ur(Ft+Fe,127)],Et.lc=Ft+Fe}if(!Ae.Rb)return Wn(w,4,"Not a key frame.");for(ee(Me),Ae=w.Pa,Y=0;4>Y;++Y){for(xe=0;8>xe;++xe)for(ue=0;3>ue;++ue)for(Ne=0;11>Ne;++Ne)Ke=X(Me,Ro[Y][xe][ue][Ne])?V(Me,8):Gs[Y][xe][ue][Ne],Ae.Wc[Y][xe].Yb[ue][Ne]=Ke;for(xe=0;17>xe;++xe)Ae.Xc[Y][xe]=Ae.Wc[Y][sh[xe]]}return w.kc=ee(Me),w.kc&&(w.Bd=V(Me,8)),w.cb=1}function ds(w,T,Y,ue,xe,Me,Ae){var Ne=T[xe].Yb[Y];for(Y=0;16>xe;++xe){if(!X(w,Ne[Y+0]))return xe;for(;!X(w,Ne[Y+1]);)if(Ne=T[++xe].Yb[0],Y=0,xe==16)return 16;var Fe=T[xe+1].Yb;if(X(w,Ne[Y+2])){var Ke=w,pt=0;if(X(Ke,(Ft=Ne)[(Rt=Y)+3]))if(X(Ke,Ft[Rt+6])){for(Ne=0,Rt=2*(pt=X(Ke,Ft[Rt+8]))+(Ft=X(Ke,Ft[Rt+9+pt])),pt=0,Ft=jr[Rt];Ft[Ne];++Ne)pt+=pt+X(Ke,Ft[Ne]);pt+=3+(8<<Rt)}else X(Ke,Ft[Rt+7])?(pt=7+2*X(Ke,165),pt+=X(Ke,145)):pt=5+X(Ke,159);else pt=X(Ke,Ft[Rt+4])?3+X(Ke,Ft[Rt+5]):2;Ne=Fe[2]}else pt=1,Ne=Fe[1];Fe=Ae+ks[xe],0>(Ke=w).b&&ve(Ke);var Rt,Ft=Ke.b,Et=(Rt=Ke.Ca>>1)-(Ke.I>>Ft)>>31;--Ke.b,Ke.Ca+=Et,Ke.Ca|=1,Ke.I-=(Rt+1&Et)<<Ft,Me[Fe]=((pt^Et)-Et)*ue[(0<xe)+0]}return 16}function po(w){var T=w.rb[w.sb-1];T.la=0,T.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function Nn(w,T){if(w==null)return 0;if(T==null)return Wn(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!Ki(w,T))return 0;if(e(w.cb),T.ac==null||T.ac(T)){T.ob&&(w.L=0);var Y=Xa[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=T.v-Y>>4,w.zb=T.j-Y>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=T.o+15+Y>>4,w.Hb=T.va+15+Y>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var ue=w.ed;for(Y=0;4>Y;++Y){var xe;if(w.Qa.Cb){var Me=w.Qa.Lb[Y];w.Qa.Fb||(Me+=ue.Tb)}else Me=ue.Tb;for(xe=0;1>=xe;++xe){var Ae=w.gd[Y][xe],Ne=Me;if(ue.Pc&&(Ne+=ue.vd[0],xe&&(Ne+=ue.od[0])),0<(Ne=0>Ne?0:63<Ne?63:Ne)){var Fe=Ne;0<ue.wb&&(Fe=4<ue.wb?Fe>>2:Fe>>1)>9-ue.wb&&(Fe=9-ue.wb),1>Fe&&(Fe=1),Ae.dd=Fe,Ae.tc=2*Ne+Fe,Ae.ld=40<=Ne?2:15<=Ne?1:0}else Ae.tc=0;Ae.La=xe}}}Y=0}else Wn(w,6,"Frame setup failed"),Y=w.a;if(Y=Y==0){if(Y){w.$c=0,0<w.Aa||(w.Ic=Nf);e:{Y=w.Ic,ue=4*(Fe=w.za);var Ke=32*Fe,pt=Fe+1,Rt=0<w.L?Fe*(0<w.Aa?2:1):0,Ft=(w.Aa==2?2:1)*Fe;if((Ae=ue+832+(xe=3*(16*Y+Xa[w.L])/2*Ke)+(Me=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=Ae)Y=0;else{if(Ae>w.Vb){if(w.Vb=0,w.Ec=s(Ae),w.Fc=0,w.Ec==null){Y=Wn(w,1,"no memory during frame initialization.");break e}w.Vb=Ae}Ae=w.Ec,Ne=w.Fc,w.Ac=Ae,w.Bc=Ne,Ne+=ue,w.Gd=o(Ke,Ea),w.Hd=0,w.rb=o(pt+1,di),w.sb=1,w.wa=Rt?o(Rt,Ir):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=Fe),e(!0),w.oc=Ae,w.pc=Ne,Ne+=832,w.ya=o(Ft,ki),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=Fe),w.R=16*Fe,w.B=8*Fe,Fe=(Ke=Xa[w.L])*w.R,Ke=Ke/2*w.B,w.sa=Ae,w.ta=Ne+Fe,w.qa=w.sa,w.ra=w.ta+16*Y*w.R+Ke,w.Ha=w.qa,w.Ia=w.ra+8*Y*w.B+Ke,w.$c=0,Ne+=xe,w.mb=Me?Ae:null,w.nb=Me?Ne:null,e(Ne+Me<=w.Fc+w.Vb),po(w),i(w.Ac,w.Bc,0,ue),Y=1}}if(Y){if(T.ka=0,T.y=w.sa,T.O=w.ta,T.f=w.qa,T.N=w.ra,T.ea=w.Ha,T.Vd=w.Ia,T.fa=w.R,T.Rc=w.B,T.F=null,T.J=0,!ec){for(Y=-255;255>=Y;++Y)Gi[255+Y]=0>Y?-Y:Y;for(Y=-1020;1020>=Y;++Y)Qo[1020+Y]=-128>Y?-128:127<Y?127:Y;for(Y=-112;112>=Y;++Y)Io[112+Y]=-16>Y?-16:15<Y?15:Y;for(Y=-255;510>=Y;++Y)sa[255+Y]=0>Y?0:255<Y?255:Y;ec=1}_t=Oo,Kt=mn,In=Fr,Jn=ai,Cr=ms,Nt=Dn,Qi=ku,Ci=Pa,du=ia,xo=cu,es=lu,Ta=uu,Ya=xi,Da=kc,Oa=vs,Na=cr,Qr=ys,va=Ol,_a[0]=Xr,_a[1]=ra,_a[2]=_r,_a[3]=vo,_a[4]=Ai,_a[5]=Cs,_a[6]=yo,_a[7]=pa,_a[8]=Ju,_a[9]=pl,Ba[0]=mo,Ba[1]=mi,Ba[2]=go,Ba[3]=fs,Ba[4]=ps,Ba[5]=iu,Ba[6]=Tl,oa[0]=gl,oa[1]=fa,oa[2]=su,oa[3]=Pr,oa[4]=ou,oa[5]=Mc,oa[6]=Pu,Y=1}else Y=0}Y&&(Y=function(Et,Zt){for(Et.M=0;Et.M<Et.Va;++Et.M){var Yt,gt=Et.Jc[Et.M&Et.Xb],bt=Et.m,on=Et;for(Yt=0;Yt<on.za;++Yt){var vn=bt,un=on,Bn=un.Ac,An=un.Bc+4*Yt,nr=un.zc,h=un.ya[un.aa+Yt];if(un.Qa.Bb?h.$b=X(vn,un.Pa.jb[0])?2+X(vn,un.Pa.jb[2]):X(vn,un.Pa.jb[1]):h.$b=0,un.kc&&(h.Ad=X(vn,un.Bd)),h.Za=!X(vn,145)+0,h.Za){var g=h.Ob,_=0;for(un=0;4>un;++un){var S,k=nr[0+un];for(S=0;4>S;++S){k=ts[Bn[An+S]][k];for(var H=ls[X(vn,k[0])];0<H;)H=ls[2*H+X(vn,k[H])];k=-H,Bn[An+S]=k}r(g,_,Bn,An,4),_+=4,nr[0+un]=k}}else k=X(vn,156)?X(vn,128)?1:3:X(vn,163)?2:0,h.Ob[0]=k,i(Bn,An,k,4),i(nr,0,k,4);h.Dd=X(vn,142)?X(vn,114)?X(vn,183)?1:3:2:0}if(on.m.Ka)return Wn(Et,7,"Premature end-of-partition0 encountered.");for(;Et.ja<Et.za;++Et.ja){if(on=gt,vn=(bt=Et).rb[bt.sb-1],Bn=bt.rb[bt.sb+bt.ja],Yt=bt.ya[bt.aa+bt.ja],An=bt.kc?Yt.Ad:0)vn.la=Bn.la=0,Yt.Za||(vn.Na=Bn.Na=0),Yt.Hc=0,Yt.Gc=0,Yt.ia=0;else{var te,ae;if(vn=Bn,Bn=on,An=bt.Pa.Xc,nr=bt.ya[bt.aa+bt.ja],h=bt.pb[nr.$b],un=nr.ad,g=0,_=bt.rb[bt.sb-1],k=S=0,i(un,g,0,384),nr.Za)var ye=0,Ee=An[3];else{H=s(16);var nt=vn.Na+_.Na;if(nt=tr(Bn,An[1],nt,h.Eb,0,H,0),vn.Na=_.Na=(0<nt)+0,1<nt)_t(H,0,un,g);else{var We=H[0]+3>>3;for(H=0;256>H;H+=16)un[g+H]=We}ye=1,Ee=An[0]}var yt=15&vn.la,It=15&_.la;for(H=0;4>H;++H){var tn=1&It;for(We=ae=0;4>We;++We)yt=yt>>1|(tn=(nt=tr(Bn,Ee,nt=tn+(1&yt),h.Sc,ye,un,g))>ye)<<7,ae=ae<<2|(3<nt?3:1<nt?2:un[g+0]!=0),g+=16;yt>>=4,It=It>>1|tn<<7,S=(S<<8|ae)>>>0}for(Ee=yt,ye=It>>4,te=0;4>te;te+=2){for(ae=0,yt=vn.la>>4+te,It=_.la>>4+te,H=0;2>H;++H){for(tn=1&It,We=0;2>We;++We)nt=tn+(1&yt),yt=yt>>1|(tn=0<(nt=tr(Bn,An[2],nt,h.Qc,0,un,g)))<<3,ae=ae<<2|(3<nt?3:1<nt?2:un[g+0]!=0),g+=16;yt>>=2,It=It>>1|tn<<5}k|=ae<<4*te,Ee|=yt<<4<<te,ye|=(240&It)<<te}vn.la=Ee,_.la=ye,nr.Hc=S,nr.Gc=k,nr.ia=43690&k?0:h.ia,An=!(S|k)}if(0<bt.L&&(bt.wa[bt.Y+bt.ja]=bt.gd[Yt.$b][Yt.Za],bt.wa[bt.Y+bt.ja].La|=!An),on.Ka)return Wn(Et,7,"Premature end-of-file encountered.")}if(po(Et),bt=Zt,on=1,Yt=(gt=Et).D,vn=0<gt.L&&gt.M>=gt.zb&&gt.M<=gt.Va,gt.Aa==0)e:{if(Yt.M=gt.M,Yt.uc=vn,Au(gt,Yt),on=1,Yt=(ae=gt.D).Nb,vn=(k=Xa[gt.L])*gt.R,Bn=k/2*gt.B,H=16*Yt*gt.R,We=8*Yt*gt.B,An=gt.sa,nr=gt.ta-vn+H,h=gt.qa,un=gt.ra-Bn+We,g=gt.Ha,_=gt.Ia-Bn+We,It=(yt=ae.M)==0,S=yt>=gt.Va-1,gt.Aa==2&&Au(gt,ae),ae.uc)for(tn=(nt=gt).D.M,e(nt.D.uc),ae=nt.yb;ae<nt.Hb;++ae){ye=ae,Ee=tn;var xn=(Sn=(ke=nt).D).Nb;te=ke.R;var Sn=Sn.wa[Sn.Y+ye],fr=ke.sa,tt=ke.ta+16*xn*te+16*ye,st=Sn.dd,ft=Sn.tc;if(ft!=0)if(e(3<=ft),ke.L==1)0<ye&&Na(fr,tt,te,ft+4),Sn.La&&va(fr,tt,te,ft),0<Ee&&Oa(fr,tt,te,ft+4),Sn.La&&Qr(fr,tt,te,ft);else{var zt=ke.B,Lt=ke.qa,Bt=ke.ra+8*xn*zt+8*ye,be=ke.Ha,ke=ke.Ia+8*xn*zt+8*ye;xn=Sn.ld,0<ye&&(Ci(fr,tt,te,ft+4,st,xn),xo(Lt,Bt,be,ke,zt,ft+4,st,xn)),Sn.La&&(Ta(fr,tt,te,ft,st,xn),Da(Lt,Bt,be,ke,zt,ft,st,xn)),0<Ee&&(Qi(fr,tt,te,ft+4,st,xn),du(Lt,Bt,be,ke,zt,ft+4,st,xn)),Sn.La&&(es(fr,tt,te,ft,st,xn),Ya(Lt,Bt,be,ke,zt,ft,st,xn))}}if(gt.ia&&alert("todo:DitherRow"),bt.put!=null){if(ae=16*yt,yt=16*(yt+1),It?(bt.y=gt.sa,bt.O=gt.ta+H,bt.f=gt.qa,bt.N=gt.ra+We,bt.ea=gt.Ha,bt.W=gt.Ia+We):(ae-=k,bt.y=An,bt.O=nr,bt.f=h,bt.N=un,bt.ea=g,bt.W=_),S||(yt-=k),yt>bt.o&&(yt=bt.o),bt.F=null,bt.J=null,gt.Fa!=null&&0<gt.Fa.length&&ae<yt&&(bt.J=bs(gt,bt,ae,yt-ae),bt.F=gt.mb,bt.F==null&&bt.F.length==0)){on=Wn(gt,3,"Could not decode alpha data.");break e}ae<bt.j&&(k=bt.j-ae,ae=bt.j,e(!(1&k)),bt.O+=gt.R*k,bt.N+=gt.B*(k>>1),bt.W+=gt.B*(k>>1),bt.F!=null&&(bt.J+=bt.width*k)),ae<yt&&(bt.O+=bt.v,bt.N+=bt.v>>1,bt.W+=bt.v>>1,bt.F!=null&&(bt.J+=bt.v),bt.ka=ae-bt.j,bt.U=bt.va-bt.v,bt.T=yt-ae,on=bt.put(bt))}Yt+1!=gt.Ic||S||(r(gt.sa,gt.ta-vn,An,nr+16*gt.R,vn),r(gt.qa,gt.ra-Bn,h,un+8*gt.B,Bn),r(gt.Ha,gt.Ia-Bn,g,_+8*gt.B,Bn))}if(!on)return Wn(Et,6,"Output aborted.")}return 1}(w,T)),T.bc!=null&&T.bc(T),Y&=1}return Y?(w.cb=0,Y):0}function $r(w,T,Y,ue,xe){xe=w[T+Y+32*ue]+(xe>>3),w[T+Y+32*ue]=-256&xe?0>xe?0:255:xe}function Wi(w,T,Y,ue,xe,Me){$r(w,T,0,Y,ue+xe),$r(w,T,1,Y,ue+Me),$r(w,T,2,Y,ue-Me),$r(w,T,3,Y,ue-xe)}function Ii(w){return(20091*w>>16)+w}function Er(w,T,Y,ue){var xe,Me=0,Ae=s(16);for(xe=0;4>xe;++xe){var Ne=w[T+0]+w[T+8],Fe=w[T+0]-w[T+8],Ke=(35468*w[T+4]>>16)-Ii(w[T+12]),pt=Ii(w[T+4])+(35468*w[T+12]>>16);Ae[Me+0]=Ne+pt,Ae[Me+1]=Fe+Ke,Ae[Me+2]=Fe-Ke,Ae[Me+3]=Ne-pt,Me+=4,T++}for(xe=Me=0;4>xe;++xe)Ne=(w=Ae[Me+0]+4)+Ae[Me+8],Fe=w-Ae[Me+8],Ke=(35468*Ae[Me+4]>>16)-Ii(Ae[Me+12]),$r(Y,ue,0,0,Ne+(pt=Ii(Ae[Me+4])+(35468*Ae[Me+12]>>16))),$r(Y,ue,1,0,Fe+Ke),$r(Y,ue,2,0,Fe-Ke),$r(Y,ue,3,0,Ne-pt),Me++,ue+=32}function Dn(w,T,Y,ue){var xe=w[T+0]+4,Me=35468*w[T+4]>>16,Ae=Ii(w[T+4]),Ne=35468*w[T+1]>>16;Wi(Y,ue,0,xe+Ae,w=Ii(w[T+1]),Ne),Wi(Y,ue,1,xe+Me,w,Ne),Wi(Y,ue,2,xe-Me,w,Ne),Wi(Y,ue,3,xe-Ae,w,Ne)}function mn(w,T,Y,ue,xe){Er(w,T,Y,ue),xe&&Er(w,T+16,Y,ue+4)}function Fr(w,T,Y,ue){Kt(w,T+0,Y,ue,1),Kt(w,T+32,Y,ue+128,1)}function ai(w,T,Y,ue){var xe;for(w=w[T+0]+4,xe=0;4>xe;++xe)for(T=0;4>T;++T)$r(Y,ue,T,xe,w)}function ms(w,T,Y,ue){w[T+0]&&Jn(w,T+0,Y,ue),w[T+16]&&Jn(w,T+16,Y,ue+4),w[T+32]&&Jn(w,T+32,Y,ue+128),w[T+48]&&Jn(w,T+48,Y,ue+128+4)}function Oo(w,T,Y,ue){var xe,Me=s(16);for(xe=0;4>xe;++xe){var Ae=w[T+0+xe]+w[T+12+xe],Ne=w[T+4+xe]+w[T+8+xe],Fe=w[T+4+xe]-w[T+8+xe],Ke=w[T+0+xe]-w[T+12+xe];Me[0+xe]=Ae+Ne,Me[8+xe]=Ae-Ne,Me[4+xe]=Ke+Fe,Me[12+xe]=Ke-Fe}for(xe=0;4>xe;++xe)Ae=(w=Me[0+4*xe]+3)+Me[3+4*xe],Ne=Me[1+4*xe]+Me[2+4*xe],Fe=Me[1+4*xe]-Me[2+4*xe],Ke=w-Me[3+4*xe],Y[ue+0]=Ae+Ne>>3,Y[ue+16]=Ke+Fe>>3,Y[ue+32]=Ae-Ne>>3,Y[ue+48]=Ke-Fe>>3,ue+=64}function Xs(w,T,Y){var ue,xe=T-32,Me=Vi,Ae=255-w[xe-1];for(ue=0;ue<Y;++ue){var Ne,Fe=Me,Ke=Ae+w[T-1];for(Ne=0;Ne<Y;++Ne)w[T+Ne]=Fe[Ke+w[xe+Ne]];T+=32}}function ra(w,T){Xs(w,T,4)}function fa(w,T){Xs(w,T,8)}function mi(w,T){Xs(w,T,16)}function go(w,T){var Y;for(Y=0;16>Y;++Y)r(w,T+32*Y,w,T-32,16)}function fs(w,T){var Y;for(Y=16;0<Y;--Y)i(w,T,w[T-1],16),T+=32}function zs(w,T,Y){var ue;for(ue=0;16>ue;++ue)i(T,Y+32*ue,w,16)}function mo(w,T){var Y,ue=16;for(Y=0;16>Y;++Y)ue+=w[T-1+32*Y]+w[T+Y-32];zs(ue>>5,w,T)}function ps(w,T){var Y,ue=8;for(Y=0;16>Y;++Y)ue+=w[T-1+32*Y];zs(ue>>4,w,T)}function iu(w,T){var Y,ue=8;for(Y=0;16>Y;++Y)ue+=w[T+Y-32];zs(ue>>4,w,T)}function Tl(w,T){zs(128,w,T)}function mr(w,T,Y){return w+2*T+Y+2>>2}function _r(w,T){var Y,ue=T-32;for(ue=new Uint8Array([mr(w[ue-1],w[ue+0],w[ue+1]),mr(w[ue+0],w[ue+1],w[ue+2]),mr(w[ue+1],w[ue+2],w[ue+3]),mr(w[ue+2],w[ue+3],w[ue+4])]),Y=0;4>Y;++Y)r(w,T+32*Y,ue,0,ue.length)}function vo(w,T){var Y=w[T-1],ue=w[T-1+32],xe=w[T-1+64],Me=w[T-1+96];De(w,T+0,16843009*mr(w[T-1-32],Y,ue)),De(w,T+32,16843009*mr(Y,ue,xe)),De(w,T+64,16843009*mr(ue,xe,Me)),De(w,T+96,16843009*mr(xe,Me,Me))}function Xr(w,T){var Y,ue=4;for(Y=0;4>Y;++Y)ue+=w[T+Y-32]+w[T-1+32*Y];for(ue>>=3,Y=0;4>Y;++Y)i(w,T+32*Y,ue,4)}function Ai(w,T){var Y=w[T-1+0],ue=w[T-1+32],xe=w[T-1+64],Me=w[T-1-32],Ae=w[T+0-32],Ne=w[T+1-32],Fe=w[T+2-32],Ke=w[T+3-32];w[T+0+96]=mr(ue,xe,w[T-1+96]),w[T+1+96]=w[T+0+64]=mr(Y,ue,xe),w[T+2+96]=w[T+1+64]=w[T+0+32]=mr(Me,Y,ue),w[T+3+96]=w[T+2+64]=w[T+1+32]=w[T+0+0]=mr(Ae,Me,Y),w[T+3+64]=w[T+2+32]=w[T+1+0]=mr(Ne,Ae,Me),w[T+3+32]=w[T+2+0]=mr(Fe,Ne,Ae),w[T+3+0]=mr(Ke,Fe,Ne)}function yo(w,T){var Y=w[T+1-32],ue=w[T+2-32],xe=w[T+3-32],Me=w[T+4-32],Ae=w[T+5-32],Ne=w[T+6-32],Fe=w[T+7-32];w[T+0+0]=mr(w[T+0-32],Y,ue),w[T+1+0]=w[T+0+32]=mr(Y,ue,xe),w[T+2+0]=w[T+1+32]=w[T+0+64]=mr(ue,xe,Me),w[T+3+0]=w[T+2+32]=w[T+1+64]=w[T+0+96]=mr(xe,Me,Ae),w[T+3+32]=w[T+2+64]=w[T+1+96]=mr(Me,Ae,Ne),w[T+3+64]=w[T+2+96]=mr(Ae,Ne,Fe),w[T+3+96]=mr(Ne,Fe,Fe)}function Cs(w,T){var Y=w[T-1+0],ue=w[T-1+32],xe=w[T-1+64],Me=w[T-1-32],Ae=w[T+0-32],Ne=w[T+1-32],Fe=w[T+2-32],Ke=w[T+3-32];w[T+0+0]=w[T+1+64]=Me+Ae+1>>1,w[T+1+0]=w[T+2+64]=Ae+Ne+1>>1,w[T+2+0]=w[T+3+64]=Ne+Fe+1>>1,w[T+3+0]=Fe+Ke+1>>1,w[T+0+96]=mr(xe,ue,Y),w[T+0+64]=mr(ue,Y,Me),w[T+0+32]=w[T+1+96]=mr(Y,Me,Ae),w[T+1+32]=w[T+2+96]=mr(Me,Ae,Ne),w[T+2+32]=w[T+3+96]=mr(Ae,Ne,Fe),w[T+3+32]=mr(Ne,Fe,Ke)}function pa(w,T){var Y=w[T+0-32],ue=w[T+1-32],xe=w[T+2-32],Me=w[T+3-32],Ae=w[T+4-32],Ne=w[T+5-32],Fe=w[T+6-32],Ke=w[T+7-32];w[T+0+0]=Y+ue+1>>1,w[T+1+0]=w[T+0+64]=ue+xe+1>>1,w[T+2+0]=w[T+1+64]=xe+Me+1>>1,w[T+3+0]=w[T+2+64]=Me+Ae+1>>1,w[T+0+32]=mr(Y,ue,xe),w[T+1+32]=w[T+0+96]=mr(ue,xe,Me),w[T+2+32]=w[T+1+96]=mr(xe,Me,Ae),w[T+3+32]=w[T+2+96]=mr(Me,Ae,Ne),w[T+3+64]=mr(Ae,Ne,Fe),w[T+3+96]=mr(Ne,Fe,Ke)}function pl(w,T){var Y=w[T-1+0],ue=w[T-1+32],xe=w[T-1+64],Me=w[T-1+96];w[T+0+0]=Y+ue+1>>1,w[T+2+0]=w[T+0+32]=ue+xe+1>>1,w[T+2+32]=w[T+0+64]=xe+Me+1>>1,w[T+1+0]=mr(Y,ue,xe),w[T+3+0]=w[T+1+32]=mr(ue,xe,Me),w[T+3+32]=w[T+1+64]=mr(xe,Me,Me),w[T+3+64]=w[T+2+64]=w[T+0+96]=w[T+1+96]=w[T+2+96]=w[T+3+96]=Me}function Ju(w,T){var Y=w[T-1+0],ue=w[T-1+32],xe=w[T-1+64],Me=w[T-1+96],Ae=w[T-1-32],Ne=w[T+0-32],Fe=w[T+1-32],Ke=w[T+2-32];w[T+0+0]=w[T+2+32]=Y+Ae+1>>1,w[T+0+32]=w[T+2+64]=ue+Y+1>>1,w[T+0+64]=w[T+2+96]=xe+ue+1>>1,w[T+0+96]=Me+xe+1>>1,w[T+3+0]=mr(Ne,Fe,Ke),w[T+2+0]=mr(Ae,Ne,Fe),w[T+1+0]=w[T+3+32]=mr(Y,Ae,Ne),w[T+1+32]=w[T+3+64]=mr(ue,Y,Ae),w[T+1+64]=w[T+3+96]=mr(xe,ue,Y),w[T+1+96]=mr(Me,xe,ue)}function su(w,T){var Y;for(Y=0;8>Y;++Y)r(w,T+32*Y,w,T-32,8)}function Pr(w,T){var Y;for(Y=0;8>Y;++Y)i(w,T,w[T-1],8),T+=32}function qr(w,T,Y){var ue;for(ue=0;8>ue;++ue)i(T,Y+32*ue,w,8)}function gl(w,T){var Y,ue=8;for(Y=0;8>Y;++Y)ue+=w[T+Y-32]+w[T-1+32*Y];qr(ue>>4,w,T)}function Mc(w,T){var Y,ue=4;for(Y=0;8>Y;++Y)ue+=w[T+Y-32];qr(ue>>3,w,T)}function ou(w,T){var Y,ue=4;for(Y=0;8>Y;++Y)ue+=w[T-1+32*Y];qr(ue>>3,w,T)}function Pu(w,T){qr(128,w,T)}function Dl(w,T,Y){var ue=w[T-Y],xe=w[T+0],Me=3*(xe-ue)+Ia[1020+w[T-2*Y]-w[T+Y]],Ae=Ms[112+(Me+4>>3)];w[T-Y]=Vi[255+ue+Ms[112+(Me+3>>3)]],w[T+0]=Vi[255+xe-Ae]}function au(w,T,Y,ue){var xe=w[T+0],Me=w[T+Y];return io[255+w[T-2*Y]-w[T-Y]]>ue||io[255+Me-xe]>ue}function Mu(w,T,Y,ue){return 4*io[255+w[T-Y]-w[T+0]]+io[255+w[T-2*Y]-w[T+Y]]<=ue}function Jr(w,T,Y,ue,xe){var Me=w[T-3*Y],Ae=w[T-2*Y],Ne=w[T-Y],Fe=w[T+0],Ke=w[T+Y],pt=w[T+2*Y],Rt=w[T+3*Y];return 4*io[255+Ne-Fe]+io[255+Ae-Ke]>ue?0:io[255+w[T-4*Y]-Me]<=xe&&io[255+Me-Ae]<=xe&&io[255+Ae-Ne]<=xe&&io[255+Rt-pt]<=xe&&io[255+pt-Ke]<=xe&&io[255+Ke-Fe]<=xe}function vs(w,T,Y,ue){var xe=2*ue+1;for(ue=0;16>ue;++ue)Mu(w,T+ue,Y,xe)&&Dl(w,T+ue,Y)}function cr(w,T,Y,ue){var xe=2*ue+1;for(ue=0;16>ue;++ue)Mu(w,T+ue*Y,1,xe)&&Dl(w,T+ue*Y,1)}function ys(w,T,Y,ue){var xe;for(xe=3;0<xe;--xe)vs(w,T+=4*Y,Y,ue)}function Ol(w,T,Y,ue){var xe;for(xe=3;0<xe;--xe)cr(w,T+=4,Y,ue)}function Ua(w,T,Y,ue,xe,Me,Ae,Ne){for(Me=2*Me+1;0<xe--;){if(Jr(w,T,Y,Me,Ae))if(au(w,T,Y,Ne))Dl(w,T,Y);else{var Fe=w,Ke=T,pt=Y,Rt=Fe[Ke-2*pt],Ft=Fe[Ke-pt],Et=Fe[Ke+0],Zt=Fe[Ke+pt],Yt=Fe[Ke+2*pt],gt=27*(on=Ia[1020+3*(Et-Ft)+Ia[1020+Rt-Zt]])+63>>7,bt=18*on+63>>7,on=9*on+63>>7;Fe[Ke-3*pt]=Vi[255+Fe[Ke-3*pt]+on],Fe[Ke-2*pt]=Vi[255+Rt+bt],Fe[Ke-pt]=Vi[255+Ft+gt],Fe[Ke+0]=Vi[255+Et-gt],Fe[Ke+pt]=Vi[255+Zt-bt],Fe[Ke+2*pt]=Vi[255+Yt-on]}T+=ue}}function Ji(w,T,Y,ue,xe,Me,Ae,Ne){for(Me=2*Me+1;0<xe--;){if(Jr(w,T,Y,Me,Ae))if(au(w,T,Y,Ne))Dl(w,T,Y);else{var Fe=w,Ke=T,pt=Y,Rt=Fe[Ke-pt],Ft=Fe[Ke+0],Et=Fe[Ke+pt],Zt=Ms[112+((Yt=3*(Ft-Rt))+4>>3)],Yt=Ms[112+(Yt+3>>3)],gt=Zt+1>>1;Fe[Ke-2*pt]=Vi[255+Fe[Ke-2*pt]+gt],Fe[Ke-pt]=Vi[255+Rt+Yt],Fe[Ke+0]=Vi[255+Ft-Zt],Fe[Ke+pt]=Vi[255+Et-gt]}T+=ue}}function ku(w,T,Y,ue,xe,Me){Ua(w,T,Y,1,16,ue,xe,Me)}function Pa(w,T,Y,ue,xe,Me){Ua(w,T,1,Y,16,ue,xe,Me)}function lu(w,T,Y,ue,xe,Me){var Ae;for(Ae=3;0<Ae;--Ae)Ji(w,T+=4*Y,Y,1,16,ue,xe,Me)}function uu(w,T,Y,ue,xe,Me){var Ae;for(Ae=3;0<Ae;--Ae)Ji(w,T+=4,1,Y,16,ue,xe,Me)}function ia(w,T,Y,ue,xe,Me,Ae,Ne){Ua(w,T,xe,1,8,Me,Ae,Ne),Ua(Y,ue,xe,1,8,Me,Ae,Ne)}function cu(w,T,Y,ue,xe,Me,Ae,Ne){Ua(w,T,1,xe,8,Me,Ae,Ne),Ua(Y,ue,1,xe,8,Me,Ae,Ne)}function xi(w,T,Y,ue,xe,Me,Ae,Ne){Ji(w,T+4*xe,xe,1,8,Me,Ae,Ne),Ji(Y,ue+4*xe,xe,1,8,Me,Ae,Ne)}function kc(w,T,Y,ue,xe,Me,Ae,Ne){Ji(w,T+4,1,xe,8,Me,Ae,Ne),Ji(Y,ue+4,1,xe,8,Me,Ae,Ne)}function $s(){this.ba=new Xn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new vr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ga(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function hu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ma(){this.ua=0,this.Wa=new fe,this.vb=new fe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new R,this.yc=new B}function Nl(){this.xb=this.a=0,this.l=new On,this.ca=new Xn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Z,this.Pb=0,this.wd=new Z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ma,this.ab=0,this.gc=o(4,hu),this.Oc=0}function Il(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new On,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Li(w,T,Y,ue,xe,Me,Ae){for(w=w==null?0:w[T+0],T=0;T<Ae;++T)xe[Me+T]=w+Y[ue+T]&255,w=xe[Me+T]}function Ko(w,T,Y,ue,xe,Me,Ae){var Ne;if(w==null)Li(null,null,Y,ue,xe,Me,Ae);else for(Ne=0;Ne<Ae;++Ne)xe[Me+Ne]=w[T+Ne]+Y[ue+Ne]&255}function Ha(w,T,Y,ue,xe,Me,Ae){if(w==null)Li(null,null,Y,ue,xe,Me,Ae);else{var Ne,Fe=w[T+0],Ke=Fe,pt=Fe;for(Ne=0;Ne<Ae;++Ne)Ke=pt+(Fe=w[T+Ne])-Ke,pt=Y[ue+Ne]+(-256&Ke?0>Ke?0:255:Ke)&255,Ke=Fe,xe[Me+Ne]=pt}}function bs(w,T,Y,ue){var xe=T.width,Me=T.o;if(e(w!=null&&T!=null),0>Y||0>=ue||Y+ue>Me)return null;if(!w.Cc){if(w.ga==null){var Ae;if(w.ga=new Il,(Ae=w.ga==null)||(Ae=T.width*T.o,e(w.Gb.length==0),w.Gb=s(Ae),w.Uc=0,w.Gb==null?Ae=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Ae=1),Ae=!Ae),!Ae){Ae=w.ga;var Ne=w.Fa,Fe=w.P,Ke=w.qc,pt=w.mb,Rt=w.nb,Ft=Fe+1,Et=Ke-1,Zt=Ae.l;if(e(Ne!=null&&pt!=null&&T!=null),vi[0]=null,vi[1]=Li,vi[2]=Ko,vi[3]=Ha,Ae.ca=pt,Ae.tb=Rt,Ae.c=T.width,Ae.i=T.height,e(0<Ae.c&&0<Ae.i),1>=Ke)T=0;else if(Ae.$a=Ne[Fe+0]>>0&3,Ae.Z=Ne[Fe+0]>>2&3,Ae.Lc=Ne[Fe+0]>>4&3,Fe=Ne[Fe+0]>>6&3,0>Ae.$a||1<Ae.$a||4<=Ae.Z||1<Ae.Lc||Fe)T=0;else if(Zt.put=Tn,Zt.ac=jt,Zt.bc=Yn,Zt.ma=Ae,Zt.width=T.width,Zt.height=T.height,Zt.Da=T.Da,Zt.v=T.v,Zt.va=T.va,Zt.j=T.j,Zt.o=T.o,Ae.$a)e:{e(Ae.$a==1),T=ur();t:for(;;){if(T==null){T=0;break e}if(e(Ae!=null),Ae.mc=T,T.c=Ae.c,T.i=Ae.i,T.l=Ae.l,T.l.ma=Ae,T.l.width=Ae.c,T.l.height=Ae.i,T.a=0,J(T.m,Ne,Ft,Et),!gi(Ae.c,Ae.i,1,T,null)||(T.ab==1&&T.gc[0].hc==3&&$n(T.s)?(Ae.ic=1,Ne=T.c*T.i,T.Ta=null,T.Ua=0,T.V=s(Ne),T.Ba=0,T.V==null?(T.a=1,T=0):T=1):(Ae.ic=0,T=yr(T,Ae.c)),!T))break t;T=1;break e}Ae.mc=null,T=0}else T=Et>=Ae.c*Ae.i;Ae=!T}if(Ae)return null;w.ga.Lc!=1?w.Ga=0:ue=Me-Y}e(w.ga!=null),e(Y+ue<=Me);e:{if(T=(Ne=w.ga).c,Me=Ne.l.o,Ne.$a==0){if(Ft=w.rc,Et=w.Vc,Zt=w.Fa,Fe=w.P+1+Y*T,Ke=w.mb,pt=w.nb+Y*T,e(Fe<=w.P+w.qc),Ne.Z!=0)for(e(vi[Ne.Z]!=null),Ae=0;Ae<ue;++Ae)vi[Ne.Z](Ft,Et,Zt,Fe,Ke,pt,T),Ft=Ke,Et=pt,pt+=T,Fe+=T;else for(Ae=0;Ae<ue;++Ae)r(Ke,pt,Zt,Fe,T),Ft=Ke,Et=pt,pt+=T,Fe+=T;w.rc=Ft,w.Vc=Et}else{if(e(Ne.mc!=null),T=Y+ue,e((Ae=Ne.mc)!=null),e(T<=Ae.i),Ae.C>=T)T=1;else if(Ne.ic||Pt(),Ne.ic){Ne=Ae.V,Ft=Ae.Ba,Et=Ae.c;var Yt=Ae.i,gt=(Zt=1,Fe=Ae.$/Et,Ke=Ae.$%Et,pt=Ae.m,Rt=Ae.s,Ae.$),bt=Et*Yt,on=Et*T,vn=Rt.wc,un=gt<on?Ut(Rt,Ke,Fe):null;e(gt<=bt),e(T<=Yt),e($n(Rt));t:for(;;){for(;!pt.h&&gt<on;){if(Ke&vn||(un=Ut(Rt,Ke,Fe)),e(un!=null),he(pt),256>(Yt=an(un.G[0],un.H[0],pt)))Ne[Ft+gt]=Yt,++gt,++Ke>=Et&&(Ke=0,++Fe<=T&&!(Fe%16)&&Mi(Ae,Fe));else{if(!(280>Yt)){Zt=0;break t}Yt=Ht(Yt-256,pt);var Bn,An=an(un.G[4],un.H[4],pt);if(he(pt),!(gt>=(An=nn(Et,An=Ht(An,pt)))&&bt-gt>=Yt)){Zt=0;break t}for(Bn=0;Bn<Yt;++Bn)Ne[Ft+gt+Bn]=Ne[Ft+gt+Bn-An];for(gt+=Yt,Ke+=Yt;Ke>=Et;)Ke-=Et,++Fe<=T&&!(Fe%16)&&Mi(Ae,Fe);gt<on&&Ke&vn&&(un=Ut(Rt,Ke,Fe))}e(pt.h==se(pt))}Mi(Ae,Fe>T?T:Fe);break t}!Zt||pt.h&&gt<bt?(Zt=0,Ae.a=pt.h?5:3):Ae.$=gt,T=Zt}else T=Br(Ae,Ae.V,Ae.Ba,Ae.c,Ae.i,T,Gr);if(!T){ue=0;break e}}Y+ue>=Me&&(w.Cc=1),ue=1}if(!ue)return null;if(w.Cc&&((ue=w.ga)!=null&&(ue.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+Y*xe}function F(w,T,Y,ue,xe,Me){for(;0<xe--;){var Ae,Ne=w,Fe=T+(Y?1:0),Ke=w,pt=T+(Y?0:3);for(Ae=0;Ae<ue;++Ae){var Rt=Ke[pt+4*Ae];Rt!=255&&(Rt*=32897,Ne[Fe+4*Ae+0]=Ne[Fe+4*Ae+0]*Rt>>23,Ne[Fe+4*Ae+1]=Ne[Fe+4*Ae+1]*Rt>>23,Ne[Fe+4*Ae+2]=Ne[Fe+4*Ae+2]*Rt>>23)}T+=Me}}function we(w,T,Y,ue,xe){for(;0<ue--;){var Me;for(Me=0;Me<Y;++Me){var Ae=w[T+2*Me+0],Ne=15&(Ke=w[T+2*Me+1]),Fe=4369*Ne,Ke=(240&Ke|Ke>>4)*Fe>>16;w[T+2*Me+0]=(240&Ae|Ae>>4)*Fe>>16&240|(15&Ae|Ae<<4)*Fe>>16>>4&15,w[T+2*Me+1]=240&Ke|Ne}T+=xe}}function et(w,T,Y,ue,xe,Me,Ae,Ne){var Fe,Ke,pt=255;for(Ke=0;Ke<xe;++Ke){for(Fe=0;Fe<ue;++Fe){var Rt=w[T+Fe];Me[Ae+4*Fe]=Rt,pt&=Rt}T+=Y,Ae+=Ne}return pt!=255}function dt(w,T,Y,ue,xe){var Me;for(Me=0;Me<xe;++Me)Y[ue+Me]=w[T+Me]>>8}function Pt(){Us=F,Ei=we,Bi=et,ws=dt}function Gt(w,T,Y){N[w]=function(ue,xe,Me,Ae,Ne,Fe,Ke,pt,Rt,Ft,Et,Zt,Yt,gt,bt,on,vn){var un,Bn=vn-1>>1,An=Ne[Fe+0]|Ke[pt+0]<<16,nr=Rt[Ft+0]|Et[Zt+0]<<16;e(ue!=null);var h=3*An+nr+131074>>2;for(T(ue[xe+0],255&h,h>>16,Yt,gt),Me!=null&&(h=3*nr+An+131074>>2,T(Me[Ae+0],255&h,h>>16,bt,on)),un=1;un<=Bn;++un){var g=Ne[Fe+un]|Ke[pt+un]<<16,_=Rt[Ft+un]|Et[Zt+un]<<16,S=An+g+nr+_+524296,k=S+2*(g+nr)>>3;h=k+An>>1,An=(S=S+2*(An+_)>>3)+g>>1,T(ue[xe+2*un-1],255&h,h>>16,Yt,gt+(2*un-1)*Y),T(ue[xe+2*un-0],255&An,An>>16,Yt,gt+(2*un-0)*Y),Me!=null&&(h=S+nr>>1,An=k+_>>1,T(Me[Ae+2*un-1],255&h,h>>16,bt,on+(2*un-1)*Y),T(Me[Ae+2*un+0],255&An,An>>16,bt,on+(2*un+0)*Y)),An=g,nr=_}1&vn||(h=3*An+nr+131074>>2,T(ue[xe+vn-1],255&h,h>>16,Yt,gt+(vn-1)*Y),Me!=null&&(h=3*nr+An+131074>>2,T(Me[Ae+vn-1],255&h,h>>16,bt,on+(vn-1)*Y)))}}function pn(){so[Bo]=Be,so[gr]=tc,so[Ka]=Fo,so[Za]=qs,so[ya]=Hr,so[Lo]=Vh,so[ih]=Af,so[Hs]=tc,so[Ws]=qs,so[ba]=Hr,so[u]=Vh}function Rn(w){return w&-16384?0>w?0:255:w>>Up}function Vn(w,T){return Rn((19077*w>>8)+(26149*T>>8)-14234)}function ar(w,T,Y){return Rn((19077*w>>8)-(6419*T>>8)-(13320*Y>>8)+8708)}function wr(w,T){return Rn((19077*w>>8)+(33050*T>>8)-17685)}function Vr(w,T,Y,ue,xe){ue[xe+0]=Vn(w,Y),ue[xe+1]=ar(w,T,Y),ue[xe+2]=wr(w,T)}function Zi(w,T,Y,ue,xe){ue[xe+0]=wr(w,T),ue[xe+1]=ar(w,T,Y),ue[xe+2]=Vn(w,Y)}function fi(w,T,Y,ue,xe){var Me=ar(w,T,Y);T=Me<<3&224|wr(w,T)>>3,ue[xe+0]=248&Vn(w,Y)|Me>>5,ue[xe+1]=T}function Si(w,T,Y,ue,xe){var Me=240&wr(w,T)|15;ue[xe+0]=240&Vn(w,Y)|ar(w,T,Y)>>4,ue[xe+1]=Me}function _s(w,T,Y,ue,xe){ue[xe+0]=255,Vr(w,T,Y,ue,xe+1)}function Es(w,T,Y,ue,xe){Zi(w,T,Y,ue,xe),ue[xe+3]=255}function Zo(w,T,Y,ue,xe){Vr(w,T,Y,ue,xe),ue[xe+3]=255}function Ur(w,T){return 0>w?0:w>T?T:w}function Js(w,T,Y){N[w]=function(ue,xe,Me,Ae,Ne,Fe,Ke,pt,Rt){for(var Ft=pt+(-2&Rt)*Y;pt!=Ft;)T(ue[xe+0],Me[Ae+0],Ne[Fe+0],Ke,pt),T(ue[xe+1],Me[Ae+0],Ne[Fe+0],Ke,pt+Y),xe+=2,++Ae,++Fe,pt+=2*Y;1&Rt&&T(ue[xe+0],Me[Ae+0],Ne[Fe+0],Ke,pt)}}function Bl(w,T,Y){return Y==0?w==0?T==0?6:5:T==0?4:0:Y}function bo(w,T,Y,ue,xe){switch(w>>>30){case 3:Kt(T,Y,ue,xe,0);break;case 2:Nt(T,Y,ue,xe);break;case 1:Jn(T,Y,ue,xe)}}function Au(w,T){var Y,ue,xe=T.M,Me=T.Nb,Ae=w.oc,Ne=w.pc+40,Fe=w.oc,Ke=w.pc+584,pt=w.oc,Rt=w.pc+600;for(Y=0;16>Y;++Y)Ae[Ne+32*Y-1]=129;for(Y=0;8>Y;++Y)Fe[Ke+32*Y-1]=129,pt[Rt+32*Y-1]=129;for(0<xe?Ae[Ne-1-32]=Fe[Ke-1-32]=pt[Rt-1-32]=129:(i(Ae,Ne-32-1,127,21),i(Fe,Ke-32-1,127,9),i(pt,Rt-32-1,127,9)),ue=0;ue<w.za;++ue){var Ft=T.ya[T.aa+ue];if(0<ue){for(Y=-1;16>Y;++Y)r(Ae,Ne+32*Y-4,Ae,Ne+32*Y+12,4);for(Y=-1;8>Y;++Y)r(Fe,Ke+32*Y-4,Fe,Ke+32*Y+4,4),r(pt,Rt+32*Y-4,pt,Rt+32*Y+4,4)}var Et=w.Gd,Zt=w.Hd+ue,Yt=Ft.ad,gt=Ft.Hc;if(0<xe&&(r(Ae,Ne-32,Et[Zt].y,0,16),r(Fe,Ke-32,Et[Zt].f,0,8),r(pt,Rt-32,Et[Zt].ea,0,8)),Ft.Za){var bt=Ae,on=Ne-32+16;for(0<xe&&(ue>=w.za-1?i(bt,on,Et[Zt].y[15],4):r(bt,on,Et[Zt+1].y,0,4)),Y=0;4>Y;Y++)bt[on+128+Y]=bt[on+256+Y]=bt[on+384+Y]=bt[on+0+Y];for(Y=0;16>Y;++Y,gt<<=2)bt=Ae,on=Ne+Df[Y],_a[Ft.Ob[Y]](bt,on),bo(gt,Yt,16*+Y,bt,on)}else if(bt=Bl(ue,xe,Ft.Ob[0]),Ba[bt](Ae,Ne),gt!=0)for(Y=0;16>Y;++Y,gt<<=2)bo(gt,Yt,16*+Y,Ae,Ne+Df[Y]);for(Y=Ft.Gc,bt=Bl(ue,xe,Ft.Dd),oa[bt](Fe,Ke),oa[bt](pt,Rt),gt=Yt,bt=Fe,on=Ke,255&(Ft=Y>>0)&&(170&Ft?In(gt,256,bt,on):Cr(gt,256,bt,on)),Ft=pt,gt=Rt,255&(Y>>=8)&&(170&Y?In(Yt,320,Ft,gt):Cr(Yt,320,Ft,gt)),xe<w.Ub-1&&(r(Et[Zt].y,0,Ae,Ne+480,16),r(Et[Zt].f,0,Fe,Ke+224,8),r(Et[Zt].ea,0,pt,Rt+224,8)),Y=8*Me*w.B,Et=w.sa,Zt=w.ta+16*ue+16*Me*w.R,Yt=w.qa,Ft=w.ra+8*ue+Y,gt=w.Ha,bt=w.Ia+8*ue+Y,Y=0;16>Y;++Y)r(Et,Zt+Y*w.R,Ae,Ne+32*Y,16);for(Y=0;8>Y;++Y)r(Yt,Ft+Y*w.B,Fe,Ke+32*Y,8),r(gt,bt+Y*w.B,pt,Rt+32*Y,8)}}function Ma(w,T,Y,ue,xe,Me,Ae,Ne,Fe){var Ke=[0],pt=[0],Rt=0,Ft=Fe!=null?Fe.kd:0,Et=Fe??new ga;if(w==null||12>Y)return 7;Et.data=w,Et.w=T,Et.ha=Y,T=[T],Y=[Y],Et.gb=[Et.gb];e:{var Zt=T,Yt=Y,gt=Et.gb;if(e(w!=null),e(Yt!=null),e(gt!=null),gt[0]=0,12<=Yt[0]&&!n(w,Zt[0],"RIFF")){if(n(w,Zt[0]+8,"WEBP")){gt=3;break e}var bt=ge(w,Zt[0]+4);if(12>bt||4294967286<bt){gt=3;break e}if(Ft&&bt>Yt[0]-8){gt=7;break e}gt[0]=bt,Zt[0]+=12,Yt[0]-=12}gt=0}if(gt!=0)return gt;for(bt=0<Et.gb[0],Y=Y[0];;){e:{var on=w;Yt=T,gt=Y;var vn=Ke,un=pt,Bn=Zt=[0];if((h=Rt=[Rt])[0]=0,8>gt[0])gt=7;else{if(!n(on,Yt[0],"VP8X")){if(ge(on,Yt[0]+4)!=10){gt=3;break e}if(18>gt[0]){gt=7;break e}var An=ge(on,Yt[0]+8),nr=1+qe(on,Yt[0]+12);if(2147483648<=nr*(on=1+qe(on,Yt[0]+15))){gt=3;break e}Bn!=null&&(Bn[0]=An),vn!=null&&(vn[0]=nr),un!=null&&(un[0]=on),Yt[0]+=18,gt[0]-=18,h[0]=1}gt=0}}if(Rt=Rt[0],Zt=Zt[0],gt!=0)return gt;if(Yt=!!(2&Zt),!bt&&Rt)return 3;if(Me!=null&&(Me[0]=!!(16&Zt)),Ae!=null&&(Ae[0]=Yt),Ne!=null&&(Ne[0]=0),Ae=Ke[0],Zt=pt[0],Rt&&Yt&&Fe==null){gt=0;break}if(4>Y){gt=7;break}if(bt&&Rt||!bt&&!Rt&&!n(w,T[0],"ALPH")){Y=[Y],Et.na=[Et.na],Et.P=[Et.P],Et.Sa=[Et.Sa];e:{An=w,gt=T,bt=Y;var h=Et.gb;vn=Et.na,un=Et.P,Bn=Et.Sa,nr=22,e(An!=null),e(bt!=null),on=gt[0];var g=bt[0];for(e(vn!=null),e(Bn!=null),vn[0]=null,un[0]=null,Bn[0]=0;;){if(gt[0]=on,bt[0]=g,8>g){gt=7;break e}var _=ge(An,on+4);if(4294967286<_){gt=3;break e}var S=8+_+1&-2;if(nr+=S,0<h&&nr>h){gt=3;break e}if(!n(An,on,"VP8 ")||!n(An,on,"VP8L")){gt=0;break e}if(g[0]<S){gt=7;break e}n(An,on,"ALPH")||(vn[0]=An,un[0]=on+8,Bn[0]=_),on+=S,g-=S}}if(Y=Y[0],Et.na=Et.na[0],Et.P=Et.P[0],Et.Sa=Et.Sa[0],gt!=0)break}Y=[Y],Et.Ja=[Et.Ja],Et.xa=[Et.xa];e:if(h=w,gt=T,bt=Y,vn=Et.gb[0],un=Et.Ja,Bn=Et.xa,An=gt[0],on=!n(h,An,"VP8 "),nr=!n(h,An,"VP8L"),e(h!=null),e(bt!=null),e(un!=null),e(Bn!=null),8>bt[0])gt=7;else{if(on||nr){if(h=ge(h,An+4),12<=vn&&h>vn-12){gt=3;break e}if(Ft&&h>bt[0]-8){gt=7;break e}un[0]=h,gt[0]+=8,bt[0]-=8,Bn[0]=nr}else Bn[0]=5<=bt[0]&&h[An+0]==47&&!(h[An+4]>>5),un[0]=bt[0];gt=0}if(Y=Y[0],Et.Ja=Et.Ja[0],Et.xa=Et.xa[0],T=T[0],gt!=0)break;if(4294967286<Et.Ja)return 3;if(Ne==null||Yt||(Ne[0]=Et.xa?2:1),Ae=[Ae],Zt=[Zt],Et.xa){if(5>Y){gt=7;break}Ne=Ae,Ft=Zt,Yt=Me,w==null||5>Y?w=0:5<=Y&&w[T+0]==47&&!(w[T+4]>>5)?(bt=[0],h=[0],vn=[0],J(un=new Z,w,T,Y),Jt(un,bt,h,vn)?(Ne!=null&&(Ne[0]=bt[0]),Ft!=null&&(Ft[0]=h[0]),Yt!=null&&(Yt[0]=vn[0]),w=1):w=0):w=0}else{if(10>Y){gt=7;break}Ne=Zt,w==null||10>Y||!Hi(w,T+3,Y-3)?w=0:(Ft=w[T+0]|w[T+1]<<8|w[T+2]<<16,Yt=16383&(w[T+7]<<8|w[T+6]),w=16383&(w[T+9]<<8|w[T+8]),1&Ft||3<(Ft>>1&7)||!(Ft>>4&1)||Ft>>5>=Et.Ja||!Yt||!w?w=0:(Ae&&(Ae[0]=Yt),Ne&&(Ne[0]=w),w=1))}if(!w||(Ae=Ae[0],Zt=Zt[0],Rt&&(Ke[0]!=Ae||pt[0]!=Zt)))return 3;Fe!=null&&(Fe[0]=Et,Fe.offset=T-Fe.w,e(4294967286>T-Fe.w),e(Fe.offset==Fe.ha-Y));break}return gt==0||gt==7&&Rt&&Fe==null?(Me!=null&&(Me[0]|=Et.na!=null&&0<Et.na.length),ue!=null&&(ue[0]=Ae),xe!=null&&(xe[0]=Zt),0):gt}function Qu(w,T,Y){var ue=T.width,xe=T.height,Me=0,Ae=0,Ne=ue,Fe=xe;if(T.Da=w!=null&&0<w.Da,T.Da&&(Ne=w.cd,Fe=w.bd,Me=w.v,Ae=w.j,11>Y||(Me&=-2,Ae&=-2),0>Me||0>Ae||0>=Ne||0>=Fe||Me+Ne>ue||Ae+Fe>xe))return 0;if(T.v=Me,T.j=Ae,T.va=Me+Ne,T.o=Ae+Fe,T.U=Ne,T.T=Fe,T.da=w!=null&&0<w.da,T.da){if(!Ce(Ne,Fe,Y=[w.ib],Me=[w.hb]))return 0;T.ib=Y[0],T.hb=Me[0]}return T.ob=w!=null&&w.ob,T.Kb=w==null||!w.Sd,T.da&&(T.ob=T.ib<3*ue/4&&T.hb<3*xe/4,T.Kb=0),1}function ml(w){if(w==null)return 2;if(11>w.S){var T=w.f.RGBA;T.fb+=(w.height-1)*T.A,T.A=-T.A}else T=w.f.kb,w=w.height,T.O+=(w-1)*T.fa,T.fa=-T.fa,T.N+=(w-1>>1)*T.Ab,T.Ab=-T.Ab,T.W+=(w-1>>1)*T.Db,T.Db=-T.Db,T.F!=null&&(T.J+=(w-1)*T.lb,T.lb=-T.lb);return 0}function vl(w,T,Y,ue){if(ue==null||0>=w||0>=T)return 2;if(Y!=null){if(Y.Da){var xe=Y.cd,Me=Y.bd,Ae=-2&Y.v,Ne=-2&Y.j;if(0>Ae||0>Ne||0>=xe||0>=Me||Ae+xe>w||Ne+Me>T)return 2;w=xe,T=Me}if(Y.da){if(!Ce(w,T,xe=[Y.ib],Me=[Y.hb]))return 2;w=xe[0],T=Me[0]}}ue.width=w,ue.height=T;e:{var Fe=ue.width,Ke=ue.height;if(w=ue.S,0>=Fe||0>=Ke||!(w>=Bo&&13>w))w=2;else{if(0>=ue.Rd&&ue.sd==null){Ae=Me=xe=T=0;var pt=(Ne=Fe*If[w])*Ke;if(11>w||(Me=(Ke+1)/2*(T=(Fe+1)/2),w==12&&(Ae=(xe=Fe)*Ke)),(Ke=s(pt+2*Me+Ae))==null){w=1;break e}ue.sd=Ke,11>w?((Fe=ue.f.RGBA).eb=Ke,Fe.fb=0,Fe.A=Ne,Fe.size=pt):((Fe=ue.f.kb).y=Ke,Fe.O=0,Fe.fa=Ne,Fe.Fd=pt,Fe.f=Ke,Fe.N=0+pt,Fe.Ab=T,Fe.Cd=Me,Fe.ea=Ke,Fe.W=0+pt+Me,Fe.Db=T,Fe.Ed=Me,w==12&&(Fe.F=Ke,Fe.J=0+pt+2*Me),Fe.Tc=Ae,Fe.lb=xe)}if(T=1,xe=ue.S,Me=ue.width,Ae=ue.height,xe>=Bo&&13>xe)if(11>xe)w=ue.f.RGBA,T&=(Ne=Math.abs(w.A))*(Ae-1)+Me<=w.size,T&=Ne>=Me*If[xe],T&=w.eb!=null;else{w=ue.f.kb,Ne=(Me+1)/2,pt=(Ae+1)/2,Fe=Math.abs(w.fa),Ke=Math.abs(w.Ab);var Rt=Math.abs(w.Db),Ft=Math.abs(w.lb),Et=Ft*(Ae-1)+Me;T&=Fe*(Ae-1)+Me<=w.Fd,T&=Ke*(pt-1)+Ne<=w.Cd,T=(T&=Rt*(pt-1)+Ne<=w.Ed)&Fe>=Me&Ke>=Ne&Rt>=Ne,T&=w.y!=null,T&=w.f!=null,T&=w.ea!=null,xe==12&&(T&=Ft>=Me,T&=Et<=w.Tc,T&=w.F!=null)}else T=0;w=T?0:2}}return w!=0||Y!=null&&Y.fd&&(w=ml(ue)),w}var Ps=64,ka=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Xo=24,No=32,Rl=8,Qs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ie("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(w){return w},N.Predictor2=function(w,T,Y){return T[Y+0]},N.Predictor3=function(w,T,Y){return T[Y+1]},N.Predictor4=function(w,T,Y){return T[Y-1]},N.Predictor5=function(w,T,Y){return Je(Je(w,T[Y+1]),T[Y+0])},N.Predictor6=function(w,T,Y){return Je(w,T[Y-1])},N.Predictor7=function(w,T,Y){return Je(w,T[Y+0])},N.Predictor8=function(w,T,Y){return Je(T[Y-1],T[Y+0])},N.Predictor9=function(w,T,Y){return Je(T[Y+0],T[Y+1])},N.Predictor10=function(w,T,Y){return Je(Je(w,T[Y-1]),Je(T[Y+0],T[Y+1]))},N.Predictor11=function(w,T,Y){var ue=T[Y+0];return 0>=Ct(ue>>24&255,w>>24&255,(T=T[Y-1])>>24&255)+Ct(ue>>16&255,w>>16&255,T>>16&255)+Ct(ue>>8&255,w>>8&255,T>>8&255)+Ct(255&ue,255&w,255&T)?ue:w},N.Predictor12=function(w,T,Y){var ue=T[Y+0];return(Ge((w>>24&255)+(ue>>24&255)-((T=T[Y-1])>>24&255))<<24|Ge((w>>16&255)+(ue>>16&255)-(T>>16&255))<<16|Ge((w>>8&255)+(ue>>8&255)-(T>>8&255))<<8|Ge((255&w)+(255&ue)-(255&T)))>>>0},N.Predictor13=function(w,T,Y){var ue=T[Y-1];return(wt((w=Je(w,T[Y+0]))>>24&255,ue>>24&255)<<24|wt(w>>16&255,ue>>16&255)<<16|wt(w>>8&255,ue>>8&255)<<8|wt(w>>0&255,ue>>0&255))>>>0};var _o=N.PredictorAdd0;N.PredictorAdd1=Wt,Ie("Predictor2","PredictorAdd2"),Ie("Predictor3","PredictorAdd3"),Ie("Predictor4","PredictorAdd4"),Ie("Predictor5","PredictorAdd5"),Ie("Predictor6","PredictorAdd6"),Ie("Predictor7","PredictorAdd7"),Ie("Predictor8","PredictorAdd8"),Ie("Predictor9","PredictorAdd9"),Ie("Predictor10","PredictorAdd10"),Ie("Predictor11","PredictorAdd11"),Ie("Predictor12","PredictorAdd12"),Ie("Predictor13","PredictorAdd13");var wo=N.PredictorAdd2;ot("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),ot("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var Ac,Ns=N.ColorIndexInverseTransform,Wa=N.MapARGB,eo=N.VP8LColorIndexInverseTransformAlpha,to=N.MapAlpha,Ga=N.VP8LPredictorsAdd=[];Ga.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var qa,no,Vs,Aa,Jo,ro,_t,Kt,Nt,In,Jn,Cr,Qi,Ci,du,xo,es,Ta,Ya,Da,Oa,Na,Qr,va,Us,Ei,Bi,ws,Gi=s(511),Qo=s(2041),Io=s(225),sa=s(767),ec=0,Ia=Qo,Ms=Io,Vi=sa,io=Gi,Bo=0,gr=1,Ka=2,Za=3,ya=4,Lo=5,ih=6,Hs=7,Ws=8,ba=9,u=10,y=[2,3,7],P=[3,3,11],W=[280,256,256,256,40],le=[0,1,1,1,0],Pe=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],lt=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Dt=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],qt=8,hn=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Fn=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],tr=null,jr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ks=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ls=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Gs=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ts=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Ro=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],sh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ba=[],_a=[],oa=[],Od=1,Tu=2,vi=[],so=[];Gt("UpsampleRgbLinePair",Vr,3),Gt("UpsampleBgrLinePair",Zi,3),Gt("UpsampleRgbaLinePair",Zo,4),Gt("UpsampleBgraLinePair",Es,4),Gt("UpsampleArgbLinePair",_s,4),Gt("UpsampleRgba4444LinePair",Si,2),Gt("UpsampleRgb565LinePair",fi,2);var Be=N.UpsampleRgbLinePair,Fo=N.UpsampleBgrLinePair,tc=N.UpsampleRgbaLinePair,qs=N.UpsampleBgraLinePair,Hr=N.UpsampleArgbLinePair,Vh=N.UpsampleRgba4444LinePair,Af=N.UpsampleRgb565LinePair,Uh=16,yl=1<<Uh-1,oh=-227,Nd=482,Up=6,Tc=0,Hh=s(256),fu=s(256),Hp=s(256),Wh=s(256),Gh=s(Nd-oh),Tf=s(Nd-oh);Js("YuvToRgbRow",Vr,3),Js("YuvToBgrRow",Zi,3),Js("YuvToRgbaRow",Zo,4),Js("YuvToBgraRow",Es,4),Js("YuvToArgbRow",_s,4),Js("YuvToRgba4444Row",Si,2),Js("YuvToRgb565Row",fi,2);var Df=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Xa=[0,2,8],Of=[8,7,6,4,4,2,2,2,1,1,1,1],Nf=1;this.WebPDecodeRGBA=function(w,T,Y,ue,xe){var Me=gr,Ae=new $s,Ne=new Xn;Ae.ba=Ne,Ne.S=Me,Ne.width=[Ne.width],Ne.height=[Ne.height];var Fe=Ne.width,Ke=Ne.height,pt=new dr;if(pt==null||w==null)var Rt=2;else e(pt!=null),Rt=Ma(w,T,Y,pt.width,pt.height,pt.Pd,pt.Qd,pt.format,null);if(Rt!=0?Fe=0:(Fe!=null&&(Fe[0]=pt.width[0]),Ke!=null&&(Ke[0]=pt.height[0]),Fe=1),Fe){Ne.width=Ne.width[0],Ne.height=Ne.height[0],ue!=null&&(ue[0]=Ne.width),xe!=null&&(xe[0]=Ne.height);e:{if(ue=new On,(xe=new ga).data=w,xe.w=T,xe.ha=Y,xe.kd=1,T=[0],e(xe!=null),((w=Ma(xe.data,xe.w,xe.ha,null,null,null,T,null,xe))==0||w==7)&&T[0]&&(w=4),(T=w)==0){if(e(Ae!=null),ue.data=xe.data,ue.w=xe.w+xe.offset,ue.ha=xe.ha-xe.offset,ue.put=Tn,ue.ac=jt,ue.bc=Yn,ue.ma=Ae,xe.xa){if((w=ur())==null){Ae=1;break e}if(function(Ft,Et){var Zt=[0],Yt=[0],gt=[0];t:for(;;){if(Ft==null)return 0;if(Et==null)return Ft.a=2,0;if(Ft.l=Et,Ft.a=0,J(Ft.m,Et.data,Et.w,Et.ha),!Jt(Ft.m,Zt,Yt,gt)){Ft.a=3;break t}if(Ft.xb=Tu,Et.width=Zt[0],Et.height=Yt[0],!gi(Zt[0],Yt[0],1,Ft,null))break t;return 1}return e(Ft.a!=0),0}(w,ue)){if(ue=(T=vl(ue.width,ue.height,Ae.Oa,Ae.ba))==0){t:{ue=w;n:for(;;){if(ue==null){ue=0;break t}if(e(ue.s.yc!=null),e(ue.s.Ya!=null),e(0<ue.s.Wb),e((Y=ue.l)!=null),e((xe=Y.ma)!=null),ue.xb!=0){if(ue.ca=xe.ba,ue.tb=xe.tb,e(ue.ca!=null),!Qu(xe.Oa,Y,Za)){ue.a=2;break n}if(!yr(ue,Y.width)||Y.da)break n;if((Y.da||en(ue.ca.S))&&Pt(),11>ue.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ue.ca.f.kb.F!=null&&Pt()),ue.Pb&&0<ue.s.ua&&ue.s.vb.X==null&&!Q(ue.s.vb,ue.s.Wa.Xa)){ue.a=1;break n}ue.xb=0}if(!Br(ue,ue.V,ue.Ba,ue.c,ue.i,Y.o,Ot))break n;xe.Dc=ue.Ma,ue=1;break t}e(ue.a!=0),ue=0}ue=!ue}ue&&(T=w.a)}else T=w.a}else{if((w=new br)==null){Ae=1;break e}if(w.Fa=xe.na,w.P=xe.P,w.qc=xe.Sa,Ki(w,ue)){if((T=vl(ue.width,ue.height,Ae.Oa,Ae.ba))==0){if(w.Aa=0,Y=Ae.Oa,e((xe=w)!=null),Y!=null){if(0<(Fe=0>(Fe=Y.Md)?0:100<Fe?255:255*Fe/100)){for(Ke=pt=0;4>Ke;++Ke)12>(Rt=xe.pb[Ke]).lc&&(Rt.ia=Fe*Of[0>Rt.lc?0:Rt.lc]>>3),pt|=Rt.ia;pt&&(alert("todo:VP8InitRandom"),xe.ia=1)}xe.Ga=Y.Id,100<xe.Ga?xe.Ga=100:0>xe.Ga&&(xe.Ga=0)}Nn(w,ue)||(T=w.a)}}else T=w.a}T==0&&Ae.Oa!=null&&Ae.Oa.fd&&(T=ml(Ae.ba))}Ae=T}Me=Ae!=0?null:11>Me?Ne.f.RGBA.eb:Ne.f.kb.y}else Me=null;return Me};var If=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(N,j){for(var q="",I=0;I<4;I++)q+=String.fromCharCode(N[j++]);return q}function d(N,j){return(N[j+0]<<0|N[j+1]<<8|N[j+2]<<16)>>>0}function p(N,j){return(N[j+0]<<0|N[j+1]<<8|N[j+2]<<16|N[j+3]<<24)>>>0}new l;var v=[0],m=[0],x=[],E=new l,M=t,A=function(N,j){var q={},I=0,B=!1,$=0,R=0;if(q.frames=[],!function(G,se,ce,he){for(var ve=0;ve<he;ve++)if(G[se+ve]!=ce.charCodeAt(ve))return!0;return!1}(N,j,"RIFF",4)){var U,V;for(p(N,j+=4),j+=8;j<N.length;){var re=c(N,j),J=p(N,j+=4);j+=4;var _e=J+(1&J);switch(re){case"VP8 ":case"VP8L":q.frames[I]===void 0&&(q.frames[I]={}),(Z=q.frames[I]).src_off=B?R:j-8,Z.src_size=$+J+8,I++,B&&(B=!1,$=0,R=0);break;case"VP8X":(Z=q.header={}).feature_flags=N[j];var Le=j+4;Z.canvas_width=1+d(N,Le),Le+=3,Z.canvas_height=1+d(N,Le),Le+=3;break;case"ALPH":B=!0,$=_e+8,R=j-8;break;case"ANIM":(Z=q.header).bgcolor=p(N,j),Le=j+4,Z.loop_count=(U=N)[(V=Le)+0]<<0|U[V+1]<<8,Le+=2;break;case"ANMF":var Oe,Z;(Z=q.frames[I]={}).offset_x=2*d(N,j),j+=3,Z.offset_y=2*d(N,j),j+=3,Z.width=1+d(N,j),j+=3,Z.height=1+d(N,j),j+=3,Z.duration=d(N,j),j+=3,Oe=N[j++],Z.dispose=1&Oe,Z.blend=Oe>>1&1}re!="ANMF"&&(j+=_e)}return q}}(M,0);A.response=M,A.rgbaoutput=!0,A.dataurl=!1;var O=A.header?A.header:null,z=A.frames?A.frames:null;if(O){O.loop_counter=O.loop_count,v=[O.canvas_height],m=[O.canvas_width];for(var K=0;K<z.length&&z[K].blend!=0;K++);}var ne=z[0],me=E.WebPDecodeRGBA(M,ne.src_off,ne.src_size,m,v);ne.rgba=me,ne.imgwidth=m[0],ne.imgheight=v[0];for(var pe=0;pe<m[0]*v[0]*4;pe++)x[pe]=me[pe];return this.width=m,this.height=v,this.data=x,this}(function(t){var e=function(){return typeof kb=="function"},n=function(v,m,x,E){var M=4,A=o;switch(E){case t.image_compression.FAST:M=1,A=s;break;case t.image_compression.MEDIUM:M=6,A=a;break;case t.image_compression.SLOW:M=9,A=l}v=r(v,m,x,A);var O=kb(v,{level:M});return t.__addimage__.arrayBufferToBinaryString(O)},r=function(v,m,x,E){for(var M,A,O,z=v.length/m,K=new Uint8Array(v.length+z),ne=d(),me=0;me<z;me+=1){if(O=me*m,M=v.subarray(O,O+m),E)K.set(E(M,x,A),O+me);else{for(var pe,N=ne.length,j=[];pe<N;pe+=1)j[pe]=ne[pe](M,x,A);var q=p(j.concat());K.set(j[q],O+me)}A=M}return K},i=function(v){var m=Array.apply([],v);return m.unshift(0),m},s=function(v,m){var x,E=[],M=v.length;E[0]=1;for(var A=0;A<M;A+=1)x=v[A-m]||0,E[A+1]=v[A]-x+256&255;return E},o=function(v,m,x){var E,M=[],A=v.length;M[0]=2;for(var O=0;O<A;O+=1)E=x&&x[O]||0,M[O+1]=v[O]-E+256&255;return M},a=function(v,m,x){var E,M,A=[],O=v.length;A[0]=3;for(var z=0;z<O;z+=1)E=v[z-m]||0,M=x&&x[z]||0,A[z+1]=v[z]+256-(E+M>>>1)&255;return A},l=function(v,m,x){var E,M,A,O,z=[],K=v.length;z[0]=4;for(var ne=0;ne<K;ne+=1)E=v[ne-m]||0,M=x&&x[ne]||0,A=x&&x[ne-m]||0,O=c(E,M,A),z[ne+1]=v[ne]-O+256&255;return z},c=function(v,m,x){if(v===m&&m===x)return v;var E=Math.abs(m-x),M=Math.abs(v-x),A=Math.abs(v+m-x-x);return E<=M&&E<=A?v:M<=A?m:x},d=function(){return[i,s,o,a,l]},p=function(v){var m=v.map(function(x){return x.reduce(function(E,M){return E+Math.abs(M)},0)});return m.indexOf(Math.min.apply(null,m))};t.processPNG=function(v,m,x,E){var M,A,O,z,K,ne,me,pe,N,j,q,I,B,$,R,U=this.decode.FLATE_DECODE,V="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(O=new VH(v)).imgData,A=O.bits,M=O.colorSpace,K=O.colors,[4,6].indexOf(O.colorType)!==-1){if(O.bits===8){N=(pe=O.pixelBitlength==32?new Uint32Array(O.decodePixels().buffer):O.pixelBitlength==16?new Uint16Array(O.decodePixels().buffer):new Uint8Array(O.decodePixels().buffer)).length,q=new Uint8Array(N*O.colors),j=new Uint8Array(N);var re,J=O.pixelBitlength-O.bits;for($=0,R=0;$<N;$++){for(B=pe[$],re=0;re<J;)q[R++]=B>>>re&255,re+=O.bits;j[$]=B>>>re&255}}if(O.bits===16){N=(pe=new Uint32Array(O.decodePixels().buffer)).length,q=new Uint8Array(N*(32/O.pixelBitlength)*O.colors),j=new Uint8Array(N*(32/O.pixelBitlength)),I=O.colors>1,$=0,R=0;for(var _e=0;$<N;)B=pe[$++],q[R++]=B>>>0&255,I&&(q[R++]=B>>>16&255,B=pe[$++],q[R++]=B>>>0&255),j[_e++]=B>>>16&255;A=8}E!==t.image_compression.NONE&&e()?(v=n(q,O.width*O.colors,O.colors,E),me=n(j,O.width,1,E)):(v=q,me=j,U=void 0)}if(O.colorType===3&&(M=this.color_spaces.INDEXED,ne=O.palette,O.transparency.indexed)){var Le=O.transparency.indexed,Oe=0;for($=0,N=Le.length;$<N;++$)Oe+=Le[$];if((Oe/=255)===N-1&&Le.indexOf(0)!==-1)z=[Le.indexOf(0)];else if(Oe!==N){for(pe=O.decodePixels(),j=new Uint8Array(pe.length),$=0,N=pe.length;$<N;$++)j[$]=Le[pe[$]];me=n(j,O.width,1)}}var Z=function(G){var se;switch(G){case t.image_compression.FAST:se=11;break;case t.image_compression.MEDIUM:se=13;break;case t.image_compression.SLOW:se=14;break;default:se=12}return se}(E);return U===this.decode.FLATE_DECODE&&(V="/Predictor "+Z+" "),V+="/Colors "+K+" /BitsPerComponent "+A+" /Columns "+O.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(me&&this.__addimage__.isArrayBuffer(me)||this.__addimage__.isArrayBufferView(me))&&(me=this.__addimage__.arrayBufferToBinaryString(me)),{alias:x,data:v,index:m,filter:U,decodeParameters:V,transparency:z,palette:ne,sMask:me,predictor:Z,width:O.width,height:O.height,bitsPerComponent:A,colorSpace:M}}}})(Tr.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new UH(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},d=new u2(100).encode(c,100);return t.processJPEG.call(this,d,n,r,i)},t.processGIF87A=t.processGIF89A}(Tr.API),hc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},hc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Ls.log("bit decode error:"+n)}},hc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},hc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},hc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},hc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,d=r*this.width*4+4*i;this.data[d]=l,this.data[d+1]=a,this.data[d+2]=o,this.data[d+3]=c}this.pos+=t}},hc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,d=i*this.width*4+4*s;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=a,this.data[d+3]=255}this.pos+=t}},hc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},hc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},hc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new hc(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new u2(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(Tr.API),B5.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new B5(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new u2(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(Tr.API),Tr.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var d=r[c],p=r[c+1],v=r[c+2],m=r[c+3];s[a++]=d,s[a++]=p,s[a++]=v,o[l++]=m}var x=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:x,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Tr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Zf=Tr.API,E0=Zf.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=c.fof?c.fof:1,p=e.doKerning!==!1,v=0,m=t.length,x=0,E=a[0]||l,M=[];for(n=0;n<m;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?M.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(v=p&&hs(c[r])==="object"&&!isNaN(parseInt(c[r][x],10))?c[r][x]/d:0,M.push((a[r]||E)/l+v)),x=r;return M},D5=Zf.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Zf.processArabic&&(t=Zf.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:E0.apply(this,arguments).reduce(function(s,o){return s+o},0)},O5=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},N5=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,d=[],p=[d],v=n.textIndent||0,m=0,x=0,E=t.split(" "),M=E0.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?E[0].length+2:n.lineIndent||0){var A=Array(l).join(" "),O=[];E.map(function(K){(K=K.split(/\s*\n/)).length>1?O=O.concat(K.map(function(ne,me){return(me&&ne.length?`
`:"")+ne})):O.push(K[0])}),E=O,l=D5.apply(this,[A,n])}for(s=0,o=E.length;s<o;s++){var z=0;if(r=E[s],l&&r[0]==`
`&&(r=r.substr(1),z=1),v+m+(x=(i=E0.apply(this,[r,n])).reduce(function(K,ne){return K+ne},0))>e||z){if(x>e){for(a=O5.apply(this,[r,i,e-(v+m),e]),d.push(a.shift()),d=[a.pop()];a.length;)p.push([a.shift()]);x=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(K,ne){return K+ne},0)}else d=[r];p.push(d),v=x+l,m=M}else d.push(r),v+=m+x,m=M}return c=l?function(K,ne){return(ne?A:"")+K.join(" ")}:function(K){return K.join(" ")},p.map(c)},Zf.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(N5.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var v,m,x,E,M=["{"];for(var A in p){if(v=p[A],isNaN(parseInt(A,10))?m="'"+A+"'":(A=parseInt(A,10),m=(m=s(A).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof v=="number")v<0?(x=s(v).slice(3),E="-"):(x=s(v).slice(2),E=""),x=E+x.slice(0,-1)+r[x.slice(-1)];else{if(hs(v)!=="object")throw new Error("Don't know what to do with value type "+hs(v)+".");x=o(v)}M.push(m+x)}return M.push("}"),M.join("")},a=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,m,x,E,M={},A=1,O=M,z=[],K="",ne="",me=p.length-1,pe=1;pe<me;pe+=1)(E=p[pe])=="'"?v?(x=v.join(""),v=void 0):v=[]:v?v.push(E):E=="{"?(z.push([O,x]),O={},x=void 0):E=="}"?((m=z.pop())[0][m[1]]=O,x=void 0,O=m[0]):E=="-"?A=-1:x===void 0?n.hasOwnProperty(E)?(K+=n[E],x=parseInt(K,16)*A,A=1,K=""):K+=E:n.hasOwnProperty(E)?(ne+=n[E],O[x]=parseInt(ne,16)*A,A=1,x=void 0,ne=""):ne+=E;return M},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var v=p.font,m=d.Unicode[v.postScriptName];m&&(v.metadata.Unicode={},v.metadata.Unicode.widths=m.widths,v.metadata.Unicode.kerning=m.kerning);var x=c.Unicode[v.postScriptName];x&&(v.metadata.Unicode.encoding=x,v.encoding=x.codePages[0])}])}(Tr.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Gg(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Tr),function(t){function e(){return(Nr.canvg?Promise.resolve(Nr.canvg):Mh(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Tr.API.addSvgAsImage=function(n,r,i,s,o,a,l,c){if(isNaN(r)||isNaN(i))throw Ls.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Ls.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=o;var p=d.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,d.width,d.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(x){return x.fromString(p,n,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(v)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),r,i,s,o,l,c)})}}(),Tr.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},Tr.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,d=0,p=0;function v(x,E){var M,A=!1;for(M=0;M<x.length;M+=1)x[M]===E&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=a.length;for(p=0;p<m;p+=1)n[a[p]].value=n[a[p]].defaultValue,n[a[p]].explicitSet=!1}if(hs(t)==="object"){for(i in t)if(s=t[i],v(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&v(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(d=0;d<s[c].length;d+=1)typeof s[c][d]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,E=[];for(x in n)n[x].explicitSet===!0&&(n[x].type==="name"?E.push("/"+x+" /"+n[x].value):E.push("/"+x+" "+n[x].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(Tr.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],p=0,v=s.length;p<v;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return d.join("");a=a.toString(16),d.push(c[4-a.length],a)}return d.join("")},r=function(s){var o,a,l,c,d,p,v;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,v=(a=Object.keys(s).sort(function(m,x){return m-x})).length;p<v;p++)o=a[p],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,d=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,v=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),m="",x=0;x<v.length;x++)m+=String.fromCharCode(v[x]);var E=c();d({data:m,addLength1:!0,objectId:E}),l("endobj");var M=c();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:M}),l("endobj");var A=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+lp(a.fontName)),l("/FontFile2 "+E+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var O=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+lp(a.fontName)),l("/FontDescriptor "+A+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+M+" 0 R"),l("/BaseFont /"+lp(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+O+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,d=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,v="",m=0;m<p.length;m++)v+=String.fromCharCode(p[m]);var x=c();d({data:v,addLength1:!0,objectId:x}),l("endobj");var E=c();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:E}),l("endobj");var M=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+x+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+lp(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var A=0;A<a.metadata.hmtx.widths.length;A++)a.metadata.hmtx.widths[A]=parseInt(a.metadata.hmtx.widths[A]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+lp(a.fontName)+"/FontDescriptor "+M+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,d=s.options||{},p=s.mutex||{},v=p.pdfEscape,m=p.activeFontKey,x=p.fonts,E=m,M="",A=0,O="",z=x[E].encoding;if(x[E].encoding!=="Identity-H")return{text:a,x:l,y:c,options:d,mutex:p};for(O=a,E=m,Array.isArray(a)&&(O=a[0]),A=0;A<O.length;A+=1)x[E].metadata.hasOwnProperty("cmap")&&(o=x[E].metadata.cmap.unicode.codeMap[O[A].charCodeAt(0)]),o||O[A].charCodeAt(0)<256&&x[E].metadata.hasOwnProperty("Unicode")?M+=O[A]:M+="";var K="";return parseInt(E.slice(1))<14||z==="WinAnsiEncoding"?K=v(M,E).split("").map(function(ne){return ne.charCodeAt(0).toString(16)}).join(""):z==="Identity-H"&&(K=n(M,x[E])),p.isHex=!0,{text:K,x:l,y:c,options:d,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(Tr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Tr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,d,p=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},M=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),O=!1,z=0;this.__bidiEngine__={};var K=function(I){var B=I.charCodeAt(),$=B>>8,R=E[$];return R!==void 0?p[256*R+(255&B)]:$===252||$===253?"AL":A.test($)?"L":$===8?"R":"N"},ne=function(I){for(var B,$=0;$<I.length;$++){if((B=K(I.charAt($)))==="L")return!1;if(B==="R")return!0}return!1},me=function(I,B,$,R){var U,V,re,J,_e=B[R];switch(_e){case"L":case"R":O=!1;break;case"N":case"AN":break;case"EN":O&&(_e="AN");break;case"AL":O=!0,_e="R";break;case"WS":_e="N";break;case"CS":R<1||R+1>=B.length||(U=$[R-1])!=="EN"&&U!=="AN"||(V=B[R+1])!=="EN"&&V!=="AN"?_e="N":O&&(V="AN"),_e=V===U?V:"N";break;case"ES":_e=(U=R>0?$[R-1]:"B")==="EN"&&R+1<B.length&&B[R+1]==="EN"?"EN":"N";break;case"ET":if(R>0&&$[R-1]==="EN"){_e="EN";break}if(O){_e="N";break}for(re=R+1,J=B.length;re<J&&B[re]==="ET";)re++;_e=re<J&&B[re]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(J=B.length,re=R+1;re<J&&B[re]==="NSM";)re++;if(re<J){var Le=I[R],Oe=Le>=1425&&Le<=2303||Le===64286;if(U=B[re],Oe&&(U==="R"||U==="AL")){_e="R";break}}}_e=R<1||(U=B[R-1])==="B"?"N":$[R-1];break;case"B":O=!1,i=!0,_e=z;break;case"S":s=!0,_e="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":O=!1;break;case"BN":_e="N"}return _e},pe=function(I,B,$){var R=I.split("");return $&&N(R,$,{hiLevel:z}),R.reverse(),B&&B.reverse(),R.join("")},N=function(I,B,$){var R,U,V,re,J,_e=-1,Le=I.length,Oe=0,Z=[],G=z?m:v,se=[];for(O=!1,i=!1,s=!1,U=0;U<Le;U++)se[U]=K(I[U]);for(V=0;V<Le;V++){if(J=Oe,Z[V]=me(I,se,Z,V),R=240&(Oe=G[J][x[Z[V]]]),Oe&=15,B[V]=re=G[Oe][5],R>0)if(R===16){for(U=_e;U<V;U++)B[U]=1;_e=-1}else _e=-1;if(G[Oe][6])_e===-1&&(_e=V);else if(_e>-1){for(U=_e;U<V;U++)B[U]=re;_e=-1}se[V]==="B"&&(B[V]=0),$.hiLevel|=re}s&&function(ce,he,ve){for(var ee=0;ee<ve;ee++)if(ce[ee]==="S"){he[ee]=z;for(var X=ee-1;X>=0&&ce[X]==="WS";X--)he[X]=z}}(se,B,Le)},j=function(I,B,$,R,U){if(!(U.hiLevel<I)){if(I===1&&z===1&&!i)return B.reverse(),void($&&$.reverse());for(var V,re,J,_e,Le=B.length,Oe=0;Oe<Le;){if(R[Oe]>=I){for(J=Oe+1;J<Le&&R[J]>=I;)J++;for(_e=Oe,re=J-1;_e<re;_e++,re--)V=B[_e],B[_e]=B[re],B[re]=V,$&&(V=$[_e],$[_e]=$[re],$[re]=V);Oe=J}Oe++}}},q=function(I,B,$){var R=I.split(""),U={hiLevel:z};return $||($=[]),N(R,$,U),function(V,re,J){if(J.hiLevel!==0&&d)for(var _e,Le=0;Le<V.length;Le++)re[Le]===1&&(_e=M.indexOf(V[Le]))>=0&&(V[Le]=M[_e+1])}(R,$,U),j(2,R,B,$,U),j(1,R,B,$,U),R.join("")};return this.__bidiEngine__.doBidiReorder=function(I,B,$){if(function(U,V){if(V)for(var re=0;re<U.length;re++)V[re]=re;a===void 0&&(a=ne(U)),c===void 0&&(c=ne(U))}(I,B),o||!l||c)if(o&&l&&a^c)z=a?1:0,I=pe(I,B,$);else if(!o&&l&&c)z=a?1:0,I=q(I,B,$),I=pe(I,B);else if(!o||a||l||c){if(o&&!l&&a^c)I=pe(I,B),a?(z=0,I=q(I,B,$)):(z=1,I=q(I,B,$),I=pe(I,B));else if(o&&a&&!l&&c)z=1,I=q(I,B,$),I=pe(I,B);else if(!o&&!l&&a^c){var R=d;a?(z=1,I=q(I,B,$),z=0,d=!1,I=q(I,B,$),d=R):(z=0,I=q(I,B,$),I=pe(I,B),z=1,d=!1,I=q(I,B,$),d=R,I=pe(I,B))}}else z=0,I=q(I,B,$);else z=a?1:0,I=q(I,B,$);return I},this.__bidiEngine__.setOptions=function(I){I&&(o=I.isInputVisual,l=I.isOutputVisual,a=I.isInputRtl,c=I.isOutputRtl,d=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(Tr),Tr.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Ed(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new iW(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new HH(this.contents),this.head=new GH(this),this.name=new XH(this),this.cmap=new iP(this),this.toUnicode={},this.hhea=new qH(this),this.maxp=new JH(this),this.hmtx=new QH(this),this.post=new KH(this),this.os2=new YH(this),this.loca=new rW(this),this.glyf=new eW(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Pc,Ed=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),HH=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,d,p,v,m,x,E;for(E in m=Object.keys(n).length,l=Math.log(2),p=16*Math.floor(Math.log(m)/l),o=Math.floor(p/l),d=16*m-p,(i=new Ed).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(o),i.writeShort(d),s=16*m,c=i.pos+s,a=null,x=[],n)for(v=n[E],i.writeString(E),i.writeInt(t(v)),i.writeInt(c),i.writeInt(v.length),x=x.concat(v),E==="head"&&(a=c),c+=v.length;c%4;)x.push(0),c++;return i.write(x),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=sP.call(n);n.length%4;)n.push(0);for(s=new Ed(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),WH={}.hasOwnProperty,rh=function(t,e){for(var n in e)WH.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Pc=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var GH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Ed).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),R5=function(){function t(e,n){var r,i,s,o,a,l,c,d,p,v,m,x,E,M,A,O,z;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),v=m/2,e.pos+=6,s=function(){var K,ne;for(ne=[],l=K=0;0<=v?K<v:K>v;l=0<=v?++K:--K)ne.push(e.readUInt16());return ne}(),e.pos+=2,E=function(){var K,ne;for(ne=[],l=K=0;0<=v?K<v:K>v;l=0<=v?++K:--K)ne.push(e.readUInt16());return ne}(),c=function(){var K,ne;for(ne=[],l=K=0;0<=v?K<v:K>v;l=0<=v?++K:--K)ne.push(e.readUInt16());return ne}(),d=function(){var K,ne;for(ne=[],l=K=0;0<=v?K<v:K>v;l=0<=v?++K:--K)ne.push(e.readUInt16());return ne}(),i=(this.length-e.pos+this.offset)/2,a=function(){var K,ne;for(ne=[],l=K=0;0<=i?K<i:K>i;l=0<=i?++K:--K)ne.push(e.readUInt16());return ne}(),l=A=0,z=s.length;A<z;l=++A)for(M=s[l],r=O=x=E[l];x<=M?O<=M:O>=M;r=x<=M?++O:--O)d[l]===0?o=r+c[l]:(o=a[d[l]/2+(r-x)-(v-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=p}return t.encode=function(e,n){var r,i,s,o,a,l,c,d,p,v,m,x,E,M,A,O,z,K,ne,me,pe,N,j,q,I,B,$,R,U,V,re,J,_e,Le,Oe,Z,G,se,ce,he,ve,ee,X,De,Te,qe;switch(R=new Ed,o=Object.keys(e).sort(function(ge,Q){return ge-Q}),n){case"macroman":for(E=0,M=function(){var ge=[];for(x=0;x<256;++x)ge.push(0);return ge}(),O={0:0},s={},U=0,_e=o.length;U<_e;U++)O[X=e[i=o[U]]]==null&&(O[X]=++E),s[i]={old:e[i],new:O[e[i]]},M[i]=O[e[i]];return R.writeUInt16(1),R.writeUInt16(0),R.writeUInt32(12),R.writeUInt16(0),R.writeUInt16(262),R.writeUInt16(0),R.write(M),{charMap:s,subtable:R.data,maxGlyphID:E+1};case"unicode":for(B=[],p=[],z=0,O={},r={},A=c=null,V=0,Le=o.length;V<Le;V++)O[ne=e[i=o[V]]]==null&&(O[ne]=++z),r[i]={old:ne,new:O[ne]},a=O[ne]-i,A!=null&&a===c||(A&&p.push(A),B.push(i),c=a),A=i;for(A&&p.push(A),p.push(65535),B.push(65535),q=2*(j=B.length),N=2*Math.pow(Math.log(j)/Math.LN2,2),v=Math.log(N/2)/Math.LN2,pe=2*j-N,l=[],me=[],m=[],x=re=0,Oe=B.length;re<Oe;x=++re){if(I=B[x],d=p[x],I===65535){l.push(0),me.push(0);break}if(I-($=r[I].new)>=32768)for(l.push(0),me.push(2*(m.length+j-x)),i=J=I;I<=d?J<=d:J>=d;i=I<=d?++J:--J)m.push(r[i].new);else l.push($-I),me.push(0)}for(R.writeUInt16(3),R.writeUInt16(1),R.writeUInt32(12),R.writeUInt16(4),R.writeUInt16(16+8*j+2*m.length),R.writeUInt16(0),R.writeUInt16(q),R.writeUInt16(N),R.writeUInt16(v),R.writeUInt16(pe),ve=0,Z=p.length;ve<Z;ve++)i=p[ve],R.writeUInt16(i);for(R.writeUInt16(0),ee=0,G=B.length;ee<G;ee++)i=B[ee],R.writeUInt16(i);for(De=0,se=l.length;De<se;De++)a=l[De],R.writeUInt16(a);for(Te=0,ce=me.length;Te<ce;Te++)K=me[Te],R.writeUInt16(K);for(qe=0,he=m.length;qe<he;qe++)E=m[qe],R.writeUInt16(E);return{charMap:r,subtable:R.data,maxGlyphID:z+1}}},t}(),iP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new R5(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=R5.encode(n,r),(s=new Ed).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),qH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),YH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),KH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e}(),ZH=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},XH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,c,d,p,v,m;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=p=0,v=i.length;p<v;o=++p)s=i[o],n.pos=s.offset,d=n.readString(s.length),a=new ZH(d,s),c[m=s.nameID]==null&&(c[m]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),JH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),QH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,p;for(p=[],r=d=0;0<=s?d<s:d>s;r=0<=s?++d:--d)p.push(n.readInt16());return p}(),this.widths=(function(){var d,p,v,m;for(m=[],d=0,p=(v=this.metrics).length;d<p;d++)o=v[d],m.push(o.advance);return m}).call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),sP=[].slice,eW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,c,d,p,v;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new Ed(r.read(s))).readShort(),d=l.readShort(),v=l.readShort(),c=l.readShort(),p=l.readShort(),this.cache[n]=a===-1?new nW(l,d,v,c,p):new tW(l,a,d,v,c,p),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),tW=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),nW=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Ed(sP.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),rW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var d=new Array(4*i.length),p=0;p<i.length;++p)d[4*p+3]=255&i[p],d[4*p+2]=(65280&i[p])>>8,d[4*p+1]=(16711680&i[p])>>16,d[4*p]=(4278190080&i[p])>>24;return d},e}(),iW=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,d,p,v,m,x,E,M,A;for(i in r=iP.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},A=r.charMap)m[(l=A[i]).old]=l.new;for(x in v=r.maxGlyphID,o)x in m||(m[x]=v++);return d=function(O){var z,K;for(z in K={},O)K[O[z]]=z;return K}(m),p=Object.keys(d).sort(function(O,z){return O-z}),E=function(){var O,z,K;for(K=[],O=0,z=p.length;O<z;O++)a=p[O],K.push(d[a]);return K}(),s=this.font.glyf.encode(o,E,m),c=this.font.loca.encode(s.offsets,E),M={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(M["OS/2"]=this.font.os2.raw()),this.font.directory.encode(M)},t}();Tr.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();const sW={class:"h-full flex"},oW={class:"flex-1 relative"},aW={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},lW={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},uW={class:"text-center max-w-lg mx-auto p-8"},cW={class:"space-y-4"},hW={class:"map-parent"},dW={class:"map-content flex flex-col h-full"},fW={class:"flex-1 flex flex-col md:flex-row relative"},pW={class:"flex-1 relative"},gW={key:0,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},mW={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-[9999] p-4 overflow-y-auto"},vW={class:"bg-white rounded-lg p-6 max-w-2xl w-full my-8 relative"},yW={class:"flex justify-between items-center mb-4 sticky top-0 bg-white pb-4 border-b"},bW={class:"overflow-y-auto max-h-[calc(100vh-12rem)]"},_W={key:0,class:"space-y-4"},wW={key:0,class:"space-y-2"},xW={class:"grid grid-cols-1 gap-2"},LW=["onClick"],SW={class:"font-medium text-gray-900"},CW={key:1,class:"space-y-2"},EW={class:"flex items-center mb-4"},PW={class:"text-sm text-gray-600"},MW={class:"grid grid-cols-1 gap-2"},kW=["onClick"],AW={class:"font-medium text-gray-900"},TW={key:2,class:"space-y-2"},DW={class:"flex items-center mb-4"},OW={class:"text-sm text-gray-600"},NW={class:"grid grid-cols-1 gap-2"},IW={key:0,class:"text-center py-4"},BW=["onClick"],RW={class:"font-medium text-gray-900"},FW={key:3,class:"space-y-2"},jW={class:"flex items-center mb-4"},zW={class:"text-sm text-gray-600"},$W={class:"grid grid-cols-1 gap-2"},VW=["onClick"],UW={class:"font-medium text-gray-900"},HW={class:"text-sm text-gray-500"},WW={class:"text-xs text-gray-400 mt-1"},GW={key:1,class:"space-y-4"},qW={key:0,class:"space-y-2"},YW={class:"grid grid-cols-1 gap-2"},KW={key:0,class:"text-center py-8"},ZW=["onClick"],XW={class:"font-medium text-gray-900"},JW={key:1,class:"space-y-2"},QW={class:"flex items-center mb-4"},eG={class:"text-sm text-gray-600"},tG={class:"grid grid-cols-1 gap-2"},nG=["onClick"],rG={class:"font-medium text-gray-900"},iG={class:"text-sm text-gray-500"},sG={class:"text-xs text-gray-400 mt-1"},oG={key:2,class:"space-y-4"},aG={key:0,class:"py-4"},lG={key:1,class:"text-center py-8"},uG={key:2,class:"space-y-2"},cG={class:"grid grid-cols-1 gap-2"},hG=["onClick"],dG={class:"font-medium text-gray-900"},fG={class:"text-sm text-gray-500"},pG={class:"text-xs text-gray-400 mt-1"},gG={key:3,class:"space-y-4"},mG={key:0,class:"text-center py-8"},vG={key:1,class:"space-y-2"},yG=["onClick"],bG={class:"font-medium text-gray-900"},_G={class:"text-sm text-gray-500"},wG={class:"text-xs text-gray-400 mt-1"},F5=Fs({__name:"MapView",emits:["shape-selected"],setup(t,{emit:e}){const n=JB(),r=xt(null),i=xt(!1),s=Vy(),o=Tp(),a=wf(),l=tu(),c=xt([]),d=xt({planId:n.query.planId?parseInt(n.query.planId):null,noteId:n.query.noteId?parseInt(n.query.noteId):null,lat:n.query.lat?parseFloat(n.query.lat):null,lng:n.query.lng?parseFloat(n.query.lng):null,tool:n.query.tool||null}),{currentTool:p,selectedShape:v,map:m,initMap:x,setDrawingTool:E,featureGroup:M,adjustView:A,clearActiveControlPoints:O,calculateConnectedCoverageArea:z,isDrawing:K}=FU(),{initMap:ne,changeBaseMap:me}=jU(),pe=xt(!1),N=xt(!1),j=xt(!1),q=xt(null),I=xt(null),B=xt(!1),$=xt(null),R=da(),U=xt([]),V=xt([]),re=xt([]),J=xt(null),_e=xt(null),Le=xt(null),Oe=xt(!1),Z=xt(!1),G=xt(!1),se=xt(null),ce=Kn(()=>{var ut,rt;return console.log("[MapView][filteredClients] Computing with:",{userType:(ut=R.user)==null?void 0:ut.user_type,selectedSalarie:J.value,salarieVisiteurs:V.value,visiteurCount:((rt=V.value)==null?void 0:rt.length)||0}),R.isSalarie||J.value?V.value:[]}),he=Kn(()=>{var Jt,Ht,nn;if(!v.value)return null;console.log("[MapView][selectedShape] Initial layer state:",{layer:v.value,hasName:"name"in v.value,name:v.value.name,hasProperties:"properties"in v.value,propertiesName:(Jt=v.value.properties)==null?void 0:Jt.name,allLayerKeys:Object.keys(v.value),allPropertiesKeys:v.value.properties?Object.keys(v.value.properties):[],_leaflet_id:v.value._leaflet_id,_dbId:v.value._dbId,descriptor:Object.getOwnPropertyDescriptor(v.value,"name")});const ut=v.value.properties||{};let rt="unknown";ut.type?rt=ut.type:v.value instanceof $t.Circle?rt="Circle":v.value instanceof za||v.value instanceof $t.Rectangle?rt="Rectangle":v.value instanceof cd||v.value instanceof $t.Polygon?rt="Polygon":v.value instanceof Sd?rt="ElevationLine":(v.value instanceof ta||v.value instanceof $t.Polyline&&!(v.value instanceof $t.Polygon))&&(rt="Line"),console.log(`[MapView][selectedShape] Type de forme dtect: ${rt}`),ut.type||(v.value.properties||(v.value.properties={}),v.value.properties.type=rt);let jt;if(ut.style&&ut.style.name)jt=ut.style.name,console.log("[MapView][selectedShape] Using name from style:",jt);else if(ut.name)jt=ut.name,console.log("[MapView][selectedShape] Using name from properties:",jt);else if(v.value.name)jt=v.value.name,console.log("[MapView][selectedShape] Using name from layer:",jt);else{const an=Object.getOwnPropertyDescriptor(v.value,"name");an&&an.value&&(jt=an.value,console.log("[MapView][selectedShape] Found name in non-enumerable layer property:",jt));const St=["_name","displayName","title"];for(const Ut of St)if(v.value[Ut]){jt=v.value[Ut],console.log(`[MapView][selectedShape] Found name in ${Ut}:`,jt);break}}jt&&(console.log(`[MapView][selectedShape] Ensuring name "${jt}" is set everywhere`),v.value.properties||(v.value.properties={}),v.value.properties.name=jt,v.value.properties.style||(v.value.properties.style={}),v.value.properties.style.name=jt,v.value.name=jt,typeof v.value.setName=="function"&&(v.value.setName(jt),console.log(`[MapView][selectedShape] Used setName method to set name "${jt}"`))),v.value.properties.category||(v.value.properties.category="forages"),v.value.properties.accessLevel||(v.value.properties.accessLevel="visitor"),console.log("[MapView][selectedShape] Preparing properties for DrawingTools:",{type:rt,name:ut.name,foundName:jt,hasNameProperty:"name"in ut,allPropertiesKeys:Object.keys(ut),layerId:v.value._leaflet_id,rawProperties:ut,layerName:v.value.name,layerPropertiesName:(Ht=v.value.properties)==null?void 0:Ht.name});const Tn={...ut,type:rt,name:jt||v.value.name||ut.name||void 0,category:v.value.properties.category||"forages",accessLevel:v.value.properties.accessLevel||"visitor"},Yn={type:rt,properties:Tn,layer:v.value,options:v.value.options||{}};return console.log("[MapView][selectedShape] Final shape object for DrawingTools:",{type:Yn.type,hasName:"name"in Yn.properties,name:Yn.properties.name,layerName:Yn.layer.name,layerPropertiesName:(nn=Yn.layer.properties)==null?void 0:nn.name}),Yn});function ve(ut){const rt=ut.getCenter(),jt=ut.getZoom(),Tn={lat:rt.lat,lng:rt.lng,zoom:jt};document.cookie=`mapState=${JSON.stringify(Tn)};max-age=2592000;path=/`}function ee(){const rt=document.cookie.split(";").find(jt=>jt.trim().startsWith("mapState="));if(rt)try{return JSON.parse(rt.split("=")[1])}catch(jt){return console.error("Erreur lors de la lecture du cookie de position:",jt),null}return null}fo(async()=>{var ut,rt;console.log("[MapView][onMounted] Initialisation du composant MapView"),console.log("[MapView][onMounted] tat initial des filtres dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2));try{if(await s.fetchPlans(),(R.isAdmin||R.isEntreprise)&&await it(),R.isEntreprise){Oe.value=!0;try{const an=await zn.get("/users/",{params:{role:"SALARIE",entreprise:(ut=R.user)==null?void 0:ut.id}});U.value=an.data}catch(an){console.error("Error loading salaries:",an),U.value=[]}finally{Oe.value=!1}}if(R.isSalarie){Z.value=!0;try{const an=await R.fetchSalarieVisiteurs(((rt=R.user)==null?void 0:rt.id)||0);V.value=Array.isArray(an)?an:[an]}catch(an){console.error("Error loading clients:",an)}finally{Z.value=!1}}const jt=ee(),Tn=jt?[jt.lat,jt.lng]:[46.603354,1.888334],Yn=(jt==null?void 0:jt.zoom)??6;if(r.value&&!m.value){const an=x(r.value,Tn,Yn);an.pm.setLang("fr"),an.pm.addControls({rotateMode:!1}),ne(an),an.on("moveend",()=>{ve(an)}),window.addEventListener("map-set-location",St=>{if(an&&St.detail){const{lat:Ut,lng:Lr,zoom:Ot}=St.detail;an.flyTo([Ut,Lr],Ot,{duration:1.5,easeLinearity:.25})}}),M.value&&(M.value.on("layeradd",St=>{const Ut=St.layer;Ut&&Ut._leaflet_id&&c.value.findIndex(Ot=>Ot.layer&&Ot.layer._leaflet_id===Ut._leaflet_id)===-1&&(console.log(`[MapView][featureGroup.layeradd] Ajout de la couche ${Ut._leaflet_id}  shapes.value`),c.value.push({layer:Ut,id:Ut._dbId||Ut._leaflet_id}))}),M.value.on("layerremove",St=>{const Ut=St.layer;if(Ut&&Ut._leaflet_id){const Lr=c.value.findIndex(Ot=>Ot.layer&&Ot.layer._leaflet_id===Ut._leaflet_id);Lr!==-1?(c.value.splice(Lr,1),console.log(`[MapView][featureGroup.layerremove] Couche ${Ut._leaflet_id} supprime du featureGroup et de shapes.value`)):console.log(`[MapView][featureGroup.layerremove] Couche ${Ut._leaflet_id} supprime du featureGroup mais introuvable dans shapes.value`)}}))}if(d.value.planId)try{console.log("[MapView][onMounted] Chargement du plan depuis les paramtres d'URL:",d.value.planId),await ge(d.value.planId);const an=document.querySelector(".map-parent");an instanceof HTMLElement&&(an.style.display="block"),d.value.lat&&d.value.lng&&m.value&&(console.log("[MapView][onMounted] Centrage de la carte sur les coordonnes:",d.value.lat,d.value.lng),m.value.flyTo([d.value.lat,d.value.lng],16)),d.value.noteId&&M.value&&(console.log("[MapView][onMounted] Recherche de la note:",d.value.noteId),setTimeout(()=>{var Ut;const St=((Ut=M.value)==null?void 0:Ut.getLayers())||[];for(const Lr of St)if(Lr._dbId===d.value.noteId||Lr.id===d.value.noteId){console.log("[MapView][onMounted] Note trouve:",Lr),typeof Lr.fire=="function"&&Lr.fire("click");break}},1e3)),d.value.tool&&(console.log("[MapView][onMounted] Activation de l'outil:",d.value.tool),E(d.value.tool))}catch(an){console.error("[MapView][onMounted] Erreur chargement plan depuis URL:",an),Jt()}else Jt();async function Jt(){const an=localStorage.getItem("lastPlanId");if(an)try{console.log("[MapView][loadLastPlan] Chargement du dernier plan:",an),await ge(parseInt(an));const St=document.querySelector(".map-parent");St instanceof HTMLElement&&(St.style.display="block")}catch(St){console.error("[MapView][loadLastPlan] Erreur chargement dernier plan:",St),q.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),Te(),localStorage.removeItem("lastPlanId")}else console.log("[MapView][loadLastPlan] Aucun dernier plan  charger"),q.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),Te()}window.addEventListener("shape:created",an=>{const{shape:St,type:Ut,properties:Lr}=an.detail;console.log("[MapView] Nouvelle forme cre",{shape:St,type:Ut,properties:Lr}),o.addElement(St),E("")}),window.addEventListener("geonote:savePlan",()=>{console.log("[MapView] vnement geonote:savePlan reu - Sauvegarde automatique du plan"),Q()}),window.addEventListener("categoriesReactivated",an=>{console.log("[MapView][categoriesReactivated] vnement reu:",an.detail),wn()}),window.addEventListener("shapeTypesReactivated",an=>{console.log("[MapView][shapeTypesReactivated] vnement reu:",an.detail),wn()});const Ht=an=>{if(console.log("[MapView] dition de note via Leaflet",an),console.log("[MapView] Type de e:",typeof an,"Contenu de e:",JSON.stringify(an)),!an||!an.note){console.error("[MapView] Erreur: e.note est undefined ou null",an);return}const St=an.note;console.log("[MapView] Note  diter:",St),I.value={id:St.id,title:St.title||St.name,description:St.description,location:St.location,columnId:St.columnId||a.getDefaultColumn.id,accessLevel:St.accessLevel,style:St.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:St.createdAt||new Date().toISOString(),updatedAt:St.updatedAt||new Date().toISOString(),comments:St.comments||[],photos:St.photos||[]},console.log("[MapView] editingMapNote.value aprs conversion:",I.value),j.value=!0,console.log("[MapView] showNoteEditModal.value:",j.value)},nn=an=>{if(console.log("[MapView] dition de note via vnement global",an),!an.detail||!an.detail.note){console.error("[MapView] Erreur: event.detail.note est undefined ou null",an);return}const St=an.detail.note;console.log("[MapView] Note  diter (global):",St);const Ut=c.value.find(Ot=>Ot.layer===an.detail.source),Lr=Ut?Ut.id:St.id;console.log("[MapView] ID de la note pour l'API:",Lr,"Source:",an.detail.source?"Couche Leaflet":"Autre"),I.value={id:Lr,title:St.title||St.name,description:St.description,location:St.location,columnId:St.columnId||a.getDefaultColumn.id,accessLevel:St.accessLevel,style:St.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:St.createdAt||new Date().toISOString(),updatedAt:St.updatedAt||new Date().toISOString(),comments:St.comments||[],photos:St.photos||[]},j.value=!0};window.addEventListener("geonote:edit",nn),M.value&&(M.value.off("note:edit"),M.value.on("note:edit",Ht))}catch(jt){console.error("Error during component mount:",jt),q.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),Te(),localStorage.removeItem("lastPlanId")}}),Di(()=>o.hasUnsavedChanges,ut=>{console.log("[MapView][watch drawingStore.hasUnsavedChanges]",ut),ut&&q.value&&s.markUnsavedChanges()}),Di(()=>o.filters,(ut,rt)=>{if(console.log("[MapView][watch drawingStore.filters] Changement de filtres dtect:",JSON.stringify(ut,null,2)),rt){const jt=JSON.stringify(rt.accessLevels)!==JSON.stringify(ut.accessLevels),Tn=JSON.stringify(rt.categories)!==JSON.stringify(ut.categories),Yn=JSON.stringify(rt.shapeTypes)!==JSON.stringify(ut.shapeTypes);console.log("[MapView][watch drawingStore.filters] Changements dtects:",{accessLevelsChanged:jt,categoriesChanged:Tn,shapeTypesChanged:Yn}),jt||Tn||Yn?(console.log("[MapView][watch drawingStore.filters] Mise  jour de l'affichage suite au changement de filtres"),wn()):console.log("[MapView][watch drawingStore.filters] Aucun changement rel, pas de mise  jour")}else console.log("[MapView][watch drawingStore.filters] Mise  jour de l'affichage suite au changement de filtres"),wn()},{deep:!0});const X=ut=>{console.log("[MapView][filtersChanged] vnement reu:",ut.detail),wn()};fo(()=>{window.addEventListener("filtersChanged",X)}),Ku(()=>{window.removeEventListener("filtersChanged",X),console.log("[MapView][filtersChanged] vnement dsactiv")}),Di(()=>o.getFilteredElements,(ut,rt)=>{console.log("[MapView][watch drawingStore.getFilteredElements] Mise  jour de l'affichage, lments filtrs:",{nouveaux:ut.length,anciens:rt?rt.length:"aucun",ids:ut.map(jt=>jt.id)}),console.log("[MapView][watch drawingStore.getFilteredElements] Mise  jour de l'affichage suite au changement d'elements filtrs"),wn()},{deep:!0}),Di(m,async ut=>{var rt;console.log(`
[MapView][watch map] Nouvelle carte:`,!!ut),ut&&s.currentPlan&&!((rt=M.value)!=null&&rt.getLayers().length)&&(console.log("[MapView][watch map] Chargement initial des lments du plan:",s.currentPlan.id),Te(),await o.loadPlanElements(s.currentPlan.id))}),Di(()=>s.currentPlan,async(ut,rt)=>{var jt,Tn,Yn;if((ut==null?void 0:ut.id)===(rt==null?void 0:rt.id)){console.log("[MapView][watch currentPlan] Plan identique, pas de rechargement ncessaire");return}console.log(`
[MapView][watch currentPlan] ====== CHANGEMENT DE PLAN ======`),console.log("[MapView][watch currentPlan] Nouveau plan:",ut==null?void 0:ut.id);try{if(ut){console.log("[MapView][watch currentPlan] Mise  jour du plan courant..."),q.value=ut;const Jt=document.querySelector(".map-parent");Jt instanceof HTMLElement&&(Jt.style.display="block"),console.log("[MapView][watch currentPlan] Plan mis  jour avec succs")}else{console.log("[MapView][watch currentPlan] Nettoyage du plan courant..."),q.value=null,Te();const Jt=document.querySelector(".map-parent");Jt instanceof HTMLElement&&(Jt.style.display="none")}}catch(Jt){console.error("[MapView][watch currentPlan] ERREUR:",Jt),q.value=null,Te()}console.log("[MapView][watch currentPlan] tat final:",{currentPlanId:(jt=q.value)==null?void 0:jt.id,storePlanId:(Tn=s.currentPlan)==null?void 0:Tn.id,mapVisible:m.value!==null,mapParentDisplay:(Yn=document.querySelector(".map-parent"))==null?void 0:Yn.getAttribute("style")}),console.log(`[MapView][watch currentPlan] ====== FIN CHANGEMENT ======
`)},{immediate:!0}),Td(()=>{m.value&&m.value.off("moveend"),window.removeEventListener("shape:created",()=>{})});function De(){i.value=!i.value}function Te(){M.value&&(M.value.eachLayer(ut=>{var rt;((rt=ut.properties)==null?void 0:rt.type)==="Note"&&typeof ut.resetPlanSaveState=="function"&&ut.resetPlanSaveState()}),M.value.clearLayers()),c.value=[],O(),v.value=null,p.value=""}async function qe(ut){return await gn.measureAsync("refreshMapWithPlan",async()=>{try{gn.measure("refreshMapWithPlan:clearMap",()=>{Te()},"MapView"),await gn.measureAsync("refreshMapWithPlan:loadPlanElements",async()=>{await o.loadPlanElements(ut)},"MapView");const rt=gn.measure("refreshMapWithPlan:getPlanById",()=>s.getPlanById(ut),"MapView");rt?(gn.measure("refreshMapWithPlan:updateCurrentPlan",()=>{q.value=rt,s.setCurrentPlan(rt),o.setCurrentPlan(rt.id),localStorage.setItem("lastPlanId",rt.id.toString())},"MapView"),await gn.measureAsync("refreshMapWithPlan:loadPlanNotes",async()=>{try{console.log("[MapView][refreshMapWithPlan] Chargement des notes golocalises associes au plan:",ut);const Tn=(await La.getNotesByPlan(ut)).data;console.log(`[MapView][refreshMapWithPlan] ${Tn.length} notes golocalises rcupres`);const Yn=wf();m.value&&M.value&&Tn.forEach(Jt=>{try{if(Yn.addNote({...Jt,id:Jt.id,columnId:Jt.column,accessLevel:Jt.access_level}),Jt.location&&Jt.location.type==="Point"&&Array.isArray(Jt.location.coordinates)&&Jt.location.coordinates.length===2){const Ht=kh.fromBackendData({name:Jt.title,description:Jt.description,location:Jt.location,columnId:Jt.column,accessLevel:Jt.access_level,style:Jt.style||{color:Jt.color||"#3B82F6",weight:2,opacity:1,fillColor:Jt.color||"#3B82F6",fillOpacity:.6,radius:8},category:Jt.category||"forages",comments:Jt.comments||[],photos:Jt.photos||[]});Ht._dbId=Jt.id,M.value.addLayer(Ht),c.value.push({id:Jt.id,type:"Note",layer:Ht,properties:Ht.properties}),console.log("[MapView][refreshMapWithPlan] Note golocalise ajoute  la carte:",{id:Jt.id,title:Jt.title,location:Jt.location})}}catch(Ht){console.error("[MapView][refreshMapWithPlan] Erreur lors de l'ajout de la note golocalise:",Ht)}})}catch(jt){console.error("[MapView][refreshMapWithPlan] Erreur lors du chargement des notes golocalises:",jt)}},"MapView"),m.value&&M.value&&await gn.measureAsync("refreshMapWithPlan:addShapesToMap",async()=>{console.log("[MapView][refreshMapWithPlan] lments disponibles:",{count:o.getCurrentElements.length,elements:o.getCurrentElements.map(Jt=>{var Ht;return{id:Jt.id,type:Jt.type_forme,hasName:Jt.data&&"name"in Jt.data,name:(Ht=Jt.data)==null?void 0:Ht.name}})});const jt=o.getCurrentElements.reduce((Jt,Ht)=>(Jt[Ht.type_forme]||(Jt[Ht.type_forme]=[]),Jt[Ht.type_forme].push(Ht),Jt),{}),Tn=10,Yn=Object.entries(jt).map(async([Jt,Ht])=>{for(let nn=0;nn<Ht.length;nn+=Tn){const an=Ht.slice(nn,nn+Tn);await Promise.all(an.map(async St=>{await gn.measureAsync(`refreshMapWithPlan:createElement:${St.type_forme}`,async()=>{var Lr;if(!M.value||!St.data)return;let Ut=null;switch(St.type_forme){case"Circle":{const Ot=St.data;Ot.center&&Ot.radius&&(Ut=new op($t.latLng(Ot.center[1],Ot.center[0]),{...Ot.style,radius:Ot.radius}),Ot.name&&(Ut.properties={type:"Circle",name:Ot.name,style:Ot.style,radius:Ot.radius,diameter:Ot.radius*2,surface:Math.PI*Ot.radius*Ot.radius,perimeter:2*Math.PI*Ot.radius},Ut.name=Ot.name));break}case"Rectangle":{const Ot=St.data;if(Ot.bounds){const $n=$t.latLngBounds($t.latLng(Ot.bounds.southWest[1],Ot.bounds.southWest[0]),$t.latLng(Ot.bounds.northEast[1],Ot.bounds.northEast[0]));Ut=new za($n,Ot.style),Ot.name&&(Ut.properties={name:Ot.name},Ut.name=Ot.name)}break}case"Polygon":{const Ot=St.data;if(Ot.points&&Ot.points.length>0){const $n=Ot.points.map(or=>$t.latLng(or[1],or[0]));Ut=new cd($n,Ot.style),Ot.name&&(Ut.properties={name:Ot.name},Ut.name=Ot.name)}break}case"Line":{const Ot=St.data;if(Ot.points&&Ot.points.length>0){const $n=Ot.points.map(or=>$t.latLng(or[1],or[0]));Ut=new ta($n,Ot.style),Ot.name&&(Ut.properties={name:Ot.name},Ut.name=Ot.name)}break}case"ElevationLine":{const Ot=St.data;if(Ot.points&&Ot.points.length>0){const $n=Ot.points.map(or=>$t.latLng(or[1],or[0]));Ut=new Sd($n,Ot.style),Ot.name&&(Ut.properties={name:Ot.name,type:"ElevationLine",elevationData:Ot.elevationData,minElevation:Ot.minElevation,maxElevation:Ot.maxElevation,elevationGain:Ot.elevationGain,elevationLoss:Ot.elevationLoss,averageSlope:Ot.averageSlope,maxSlope:Ot.maxSlope},Ut.name=Ot.name),Ot.elevationData&&(Ut.elevationData=Ot.elevationData)}break}case"Note":{console.log("[MapView][refreshMapWithPlan] Cration d'une note:",St.data);const Ot=St.data;if(Ot.location&&Array.isArray(Ot.location)&&Ot.location.length===2||Ot.location&&typeof Ot.location=="object"&&Ot.location.type==="Point"&&Array.isArray(Ot.location.coordinates)&&Ot.location.coordinates.length===2)try{Ot.category||(Ot.category="forages",console.log("[MapView][refreshMapWithPlan] Catgorie par dfaut ajoute:",Ot.category)),Ot.accessLevel||(Ot.accessLevel="private",console.log("[MapView][refreshMapWithPlan] Niveau d'accs par dfaut ajout:",Ot.accessLevel));const or=kh.fromBackendData(Ot);or._dbId=St.id,Ut=or,console.log("[MapView][refreshMapWithPlan] Note cre:",{id:St.id,location:Ot.location,name:Ot.name,category:Ot.category,accessLevel:Ot.accessLevel,type:or.properties.type})}catch(or){console.error("[MapView][refreshMapWithPlan] Erreur lors de la cration de la Note:",or)}else console.error("[MapView][refreshMapWithPlan] Donnes invalides pour Note:",Ot),console.log("[MapView][refreshMapWithPlan] Format de location attendu:",{formatArray:"[lat, lng]",formatGeoJSON:'{ type: "Point", coordinates: [lng, lat] }'});break}}Ut&&(Ut._dbId=St.id,(Lr=M.value)==null||Lr.addLayer(Ut),c.value.push({id:St.id,type:St.type_forme,layer:Ut,properties:Ut.properties}))},"MapView")})),await new Promise(St=>setTimeout(St,0))}});await Promise.all(Yn),gn.measure("refreshMapWithPlan:adjustView",()=>{A()},"MapView")},"MapView"),console.log(`Plan ${ut} charg avec succs avec ${o.getCurrentElements.length} formes`)):console.error(`Plan ${ut} introuvable aprs chargement`),N.value=!1}catch(rt){throw console.error("Erreur lors du rafrachissement de la carte:",rt),rt}},"MapView")}async function ge(ut){return await gn.measureAsync("loadPlan",async()=>{var rt;console.log(`
[MapView][loadPlan] ====== DBUT CHARGEMENT PLAN ======`),console.log("[MapView][loadPlan] Tentative de chargement du plan:",ut);try{const jt=await gn.measureAsync("loadPlan:getPlanFromStore",async()=>s.getPlanById(ut),"MapView");if(console.log("[MapView][loadPlan] Plan trouv dans le store:",!!jt),!jt){console.log("[MapView][loadPlan] Plan non trouv dans le store, vrification API...");try{await gn.measureAsync("loadPlan:apiCheck",async()=>{await zn.get(`/plans/${ut}/`)},"MapView")}catch(Tn){throw((rt=Tn.response)==null?void 0:rt.status)===404&&(console.warn("[MapView][loadPlan] Plan non trouv - Nettoyage du localStorage"),localStorage.removeItem("lastPlanId"),q.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),Te()),Tn}}console.log("[MapView][loadPlan] Rafrachissement de la carte..."),await gn.measureAsync("loadPlan:refreshMap",async()=>{await qe(ut)},"MapView"),N.value=!1,console.log("[MapView][loadPlan] Invalidation de la taille de la carte..."),Ct(),console.log("[MapView][loadPlan] Plan charg avec succs:",{planId:ut,elementsCount:o.getCurrentElements.length})}catch(jt){throw console.error("Erreur lors du chargement du plan:",jt),gn.measure("loadPlan:errorRecovery",()=>{q.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),Te(),localStorage.removeItem("lastPlanId")},"MapView"),jt}},"MapView")}async function Q(){var ut;if(!q.value||!M.value){console.warn("Aucun plan actif ou groupe de formes  sauvegarder");return}B.value=!0,$.value="saving";try{const rt=[],jt=new Set(o.getCurrentElements.filter(Ht=>Ht.id!==void 0).map(Ht=>Ht.id)),Tn=new Set;console.log("[savePlan] Dbut de la sauvegarde",{featureGroupLayers:M.value.getLayers().length,existingIds:Array.from(jt),currentElements:o.getCurrentElements}),M.value.eachLayer(Ht=>{var Ut,Lr,Ot,$n,or,Mi,Br,xr,ur,gi,yr,Gr,zr,ln,_i,Ni,Ui,hi,Ir;console.log("[savePlan] Traitement de la couche",{type:(Ut=Ht.properties)==null?void 0:Ut.type,name:(Lr=Ht.properties)==null?void 0:Lr.name,isPolygon:Ht instanceof $t.Polygon,properties:Ht.properties});let nn,an;const St={color:Ht.options.color||"#2b6451",weight:Ht.options.weight||3,opacity:Ht.options.opacity||1,fillColor:Ht.options.fillColor||"#2b6451",fillOpacity:Ht.options.fillOpacity||.2,dashArray:Ht.options.dashArray||""};if(Ht instanceof za){nn="Rectangle";const di=Ht.getBounds();an={bounds:{southWest:[di.getSouthWest().lng,di.getSouthWest().lat],northEast:[di.getNorthEast().lng,di.getNorthEast().lat]},style:St,name:((Ot=Ht.properties)==null?void 0:Ot.name)||"",rotation:Ht.getRotation(),width:Ht.getDimensions().width,height:Ht.getDimensions().height,center:[Ht.getCenter().lng,Ht.getCenter().lat]}}else if(Ht instanceof $t.Circle)nn="Circle",an={center:[Ht.getLatLng().lng,Ht.getLatLng().lat],radius:Ht.getRadius(),name:(($n=Ht.properties)==null?void 0:$n.name)||"",style:St};else if(Ht instanceof $t.Rectangle){nn="Rectangle";const di=Ht.getBounds();an={bounds:{southWest:[di.getSouthWest().lng,di.getSouthWest().lat],northEast:[di.getNorthEast().lng,di.getNorthEast().lat]},name:((or=Ht.properties)==null?void 0:or.name)||"",style:St}}else if(Ht instanceof $t.Polyline&&!(Ht instanceof $t.Polygon))if(((Mi=Ht.properties)==null?void 0:Mi.type)==="ElevationLine"){nn="ElevationLine";const di=Ht.getLatLngs(),Sr=((Br=Ht.properties)==null?void 0:Br.category)||"forages",ki=((xr=Ht.properties)==null?void 0:xr.accessLevel)||"visitor";console.log("[savePlan] ElevationLine - Catgorie:",Sr,"Niveau d'accs:",ki),an={points:di.map(js=>[js.lng,js.lat]),style:{...St,color:((ur=Ht.properties.style)==null?void 0:ur.color)||"#FF4500",weight:((gi=Ht.properties.style)==null?void 0:gi.weight)||4,opacity:((yr=Ht.properties.style)==null?void 0:yr.opacity)||.8,_accessLevel:ki,accessLevel:ki},name:((Gr=Ht.properties)==null?void 0:Gr.name)||"",category:Sr,accessLevel:ki,elevationData:Ht.properties.elevationData,samplePointStyle:Ht.properties.samplePointStyle,minMaxPointStyle:Ht.properties.minMaxPointStyle,minElevation:Ht.properties.minElevation,maxElevation:Ht.properties.maxElevation,elevationGain:Ht.properties.elevationGain,elevationLoss:Ht.properties.elevationLoss,averageSlope:Ht.properties.averageSlope,maxSlope:Ht.properties.maxSlope}}else{nn="Line";const di=Ht.getLatLngs(),Sr=((zr=Ht.properties)==null?void 0:zr.category)||"forages",ki=((ln=Ht.properties)==null?void 0:ln.accessLevel)||"visitor";console.log("[savePlan] Line - Catgorie:",Sr,"Niveau d'accs:",ki),an={points:di.map(js=>[js.lng,js.lat]),name:((_i=Ht.properties)==null?void 0:_i.name)||"",category:Sr,accessLevel:ki,style:{...St,_accessLevel:ki,accessLevel:ki}}}else if(Ht instanceof $t.Polygon&&!(Ht instanceof $t.Rectangle)){nn="Polygon";const di=Ht.getLatLngs()[0],Sr=((Ni=Ht.properties)==null?void 0:Ni.category)||"forages",ki=((Ui=Ht.properties)==null?void 0:Ui.accessLevel)||"visitor";console.log("[savePlan] Polygon - Catgorie:",Sr,"Niveau d'accs:",ki),an={points:di.map(js=>[js.lng,js.lat]),name:((hi=Ht.properties)==null?void 0:hi.name)||"",category:Sr,accessLevel:ki,style:{...St,_accessLevel:ki,accessLevel:ki}}}else if(((Ir=Ht.properties)==null?void 0:Ir.type)==="Note"){console.log("[savePlan] Note golocalise dtecte - ignore pour la sauvegarde du plan");const di=Ht;di._dbId&&typeof di._dbId=="number"&&Tn.add(di._dbId),nn=void 0,an=void 0}if(nn&&an){let di=Ht._elementId;Ht._dbId&&(di=Ht._dbId,typeof di=="number"&&Tn.add(di)),rt.push({id:di,type_forme:nn,data:an})}}),console.log("[savePlan] lments  sauvegarder",{totalElements:rt.length,elements:rt.map(Ht=>({type:Ht.type_forme,hasPoints:"points"in Ht.data,hasStyle:"style"in Ht.data}))});const Yn=Array.from(jt).filter(Ht=>!Tn.has(Ht));console.log("[savePlan] lments supprims:",{existingIds:Array.from(jt),currentLayerIds:Array.from(Tn),elementsToDelete:Yn}),o.elements=rt.filter(Ht=>!Ht.id||!Yn.includes(Ht.id));const Jt=await o.saveToPlan(q.value.id,{elementsToDelete:Yn});if(Jt&&((ut=q.value)!=null&&ut.id)){const Ht=q.value.id;q.value={...q.value,...Jt},s.updatePlanDetails(Ht,Jt)}$.value="success",M.value&&M.value.eachLayer(Ht=>{var nn;((nn=Ht.properties)==null?void 0:nn.type)==="Note"&&typeof Ht.resetPlanSaveState=="function"&&Ht.resetPlanSaveState()}),setTimeout(()=>{$.value=null},3e3)}catch(rt){console.error("Erreur lors de la sauvegarde du plan:",rt),$.value=null}finally{B.value=!1}}Ku(()=>{R.user||Xe(),s.clearCurrentPlan(),o.clearCurrentPlan(),M.value&&M.value.off("note:edit"),window.removeEventListener("geonote:edit",()=>{}),window.removeEventListener("categoriesReactivated",()=>{}),window.removeEventListener("shapeTypesReactivated",()=>{}),window.removeEventListener("shape:created",()=>{}),window.removeEventListener("map-set-location",()=>{})});function ie(ut){try{const rt=new Date(ut);return isNaN(rt.getTime())?(console.error("Date invalide reue:",ut),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(rt)}catch(rt){return console.error("Erreur lors du formatage de la date:",rt),"Date invalide"}}const fe=()=>{M.value&&A()},Ce=async()=>{var ut;if(v.value&&M.value){const rt=v.value._leaflet_id,jt=v.value._dbId;if(((ut=v.value.properties)==null?void 0:ut.type)==="Note"&&jt)try{console.log(`[MapView][deleteSelectedShape] Suppression de la note ${jt} du backend...`),await La.deleteNote(jt),a.removeNote(jt),console.log(`[MapView][deleteSelectedShape] Note ${jt} supprime avec succs du backend et du store`),l.success("Note supprime avec succs")}catch(Yn){console.error(`[MapView][deleteSelectedShape] Erreur lors de la suppression de la note ${jt} du backend:`,Yn),l.error("Erreur lors de la suppression de la note")}E(""),M.value.removeLayer(v.value),c.value=c.value.filter(Yn=>Yn.layer&&Yn.layer._leaflet_id!==rt),console.log(`[MapView][deleteSelectedShape] Forme ${rt} (dbId: ${jt}) supprime du featureGroup et de shapes.value`),v.value=null}};async function de(ut){console.log(`onPlanCreated - Tentative de chargement du plan ${ut}`),await s.fetchPlans();const rt=s.getPlanById(ut);rt?(console.log(`Plan ${ut} trouv, chargement en cours...`),localStorage.setItem("lastPlanId",ut.toString()),q.value=rt,s.setCurrentPlan(rt),o.setCurrentPlan(rt.id),pe.value=!1,Ct(),console.log(`Plan ${ut} charg avec succs`)):console.error(`Plan ${ut} introuvable aprs cration! Vrifiez les permissions.`)}Di(J,async ut=>{var rt;if(ut&&((rt=R.user)==null?void 0:rt.user_type)==="admin"){Z.value=!0;try{const jt=await R.fetchSalarieVisiteurs(ut.id);V.value=Array.isArray(jt)?jt:[jt]}catch(jt){console.error("[MapView][watch selectedSalarie] Error:",jt),V.value=[]}finally{Z.value=!1}}});function Xe(){localStorage.removeItem("lastPlanId")}function Ie(ut,rt="m"){return rt==="m"?`${(ut/1e4).toFixed(2)} ha`:rt==="m"?ut>=1e3?`${(ut/1e3).toFixed(2)} km`:`${ut.toFixed(2)} m`:`${ut.toFixed(2)} ${rt}`}const Ye=xt(!1);function Je(ut){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",TextRectangle:"Annotation",ElevationLine:"Profil altimtrique"}[ut]||ut}async function Ge(){var rt,jt,Tn,Yn,Jt,Ht,nn,an,St,Ut;if(!q.value||!m.value||!M.value){console.error("[generateSynthesis] Plan, map ou featureGroup manquant");return}const ut=q.value;try{console.log("[generateSynthesis] Dbut de la gnration"),console.log("[generateSynthesis] Plan courant complet:",ut),await Q();let gi=ut;if(!ut.salarie_details&&!ut.entreprise_details&&!ut.client_details){console.log("[generateSynthesis] Dtails manquants, tentative de rcupration...");try{const Sr=await zn.get(`/plans/${ut.id}/`);Sr.status===200&&(console.log("[generateSynthesis] Plan mis  jour:",Sr.data),q.value={...ut,...Sr.data},gi=Sr.data,s.updatePlanDetails(ut.id,Sr.data))}catch(Sr){console.error("[generateSynthesis] Erreur lors de la rcupration des dtails:",Sr)}}await new Promise(Sr=>setTimeout(Sr,1e3)),Ye.value=!0;const yr=gi.salarie_details,Gr=gi.client_details,zr=(yr==null?void 0:yr.entreprise_details)||gi.entreprise_details;console.log("[generateSynthesis] Dtails du plan utilis:",gi),console.log("[generateSynthesis] Dtails des utilisateurs:",{salarie:yr?{id:yr.id,nom:`${yr.first_name} ${yr.last_name}`,company:yr.company_name,logo:yr.logo}:null,entreprise:zr?{id:zr.id,nom:`${zr.first_name} ${zr.last_name}`,company:zr.company_name,logo:zr.logo}:null,client:Gr?{id:Gr.id,nom:`${Gr.first_name} ${Gr.last_name}`,company:Gr.company_name}:null}),v.value&&(O(),v.value=null);const ln=new Tr("l","mm","a4");console.log("[generateSynthesis] Chargement du logo de l'application");const _i=new Image;_i.src=e5,await new Promise(Sr=>{_i.onload=()=>{console.log("[generateSynthesis] Logo application charg"),Sr()},_i.onerror=ki=>{console.error("[generateSynthesis] Erreur chargement logo application:",ki),Sr()}}),console.log("[generateSynthesis] Tentative de chargement du logo entreprise:",zr==null?void 0:zr.logo);let Ni=null;zr!=null&&zr.logo&&(Ni=new Image,Ni.src=zr.logo,await new Promise(Sr=>{Ni?(Ni.onload=()=>{console.log("[generateSynthesis] Logo entreprise charg avec succs"),Sr()},Ni.onerror=ki=>{console.error("[generateSynthesis] Erreur chargement logo entreprise:",ki),Sr()}):Sr()})),console.log("[generateSynthesis] Tentative de chargement du logo salarie:",yr==null?void 0:yr.logo);let Ui=null;yr!=null&&yr.logo&&(Ui=new Image,Ui.src=yr.logo,await new Promise(Sr=>{Ui?(Ui.onload=()=>{console.log("[generateSynthesis] Logo salarie charg avec succs"),Sr()},Ui.onerror=ki=>{console.error("[generateSynthesis] Erreur chargement logo salarie:",ki),Sr()}):Sr()})),console.log("[generateSynthesis] Ajout des logos au PDF:",{logoApplication:!0,logoEntreprise:Ni!==null,logoSalarie:Ui!==null}),Ni!==null&&ln.addImage(Ni,"JPEG",148.5-40-30,20,40,40),ln.addImage(_i,"JPEG",148.5-40/2,20,40,40),Ui!==null&&ln.addImage(Ui,"JPEG",148.5+30,20,40,40),ln.setFontSize(24),ln.setTextColor(0),ln.text(ut.nom||"Sans titre",297/2,100,{align:"center"});let hi=120;if(zr&&(ln.setFontSize(14),ln.setFont("helvetica","bold"),ln.text("Entreprise:",20,hi),ln.setFont("helvetica","normal"),ln.text(`${zr.first_name} ${zr.last_name}${zr.company_name?` (${zr.company_name})`:""}`,20,hi+6),hi+=15),yr&&(ln.setFontSize(14),ln.setFont("helvetica","bold"),ln.text("Salarie:",20,hi),ln.setFont("helvetica","normal"),ln.text(`${yr.first_name} ${yr.last_name}${yr.company_name?` (${yr.company_name})`:""}`,20,hi+6),hi+=15),Gr&&(ln.setFontSize(14),ln.setFont("helvetica","bold"),ln.text("Client:",20,hi),ln.setFont("helvetica","normal"),ln.text(`${Gr.first_name} ${Gr.last_name}${Gr.company_name?` (${Gr.company_name})`:""}`,20,hi+6),hi+=15),ut.description){ln.setFont("helvetica","bold"),ln.text("Description:",20,hi),ln.setFont("helvetica","normal");const Sr=ln.splitTextToSize(ut.description,150);ln.text(Sr,20,hi+6),hi+=8*Sr.length+10}hi=Math.min(hi,180),ln.setFontSize(10),ln.setTextColor(100),ln.text(`Date de cration: ${ie(ut.date_creation)}`,20,190),ln.text(`Dernire modification: ${ie(ut.date_modification)}`,277,190,{align:"right"});const Ir=[];M.value.eachLayer(Sr=>Ir.push(Sr));const di=$t.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar",".leaflet-grid-layer",".leaflet-grid-label"],preventDownload:!0}).addTo(m.value);await new Promise(Sr=>setTimeout(Sr,3e3));for(let Sr=0;Sr<Ir.length;Sr++){ln.addPage(),ln.setFillColor(248,250,252),ln.setDrawColor(226,232,240),ln.rect(0,0,297,25,"F"),ln.setFontSize(10),ln.setTextColor(50,50,50),ln.setFont("helvetica","bold"),ln.text(ut.nom||"Sans titre",20,12);let Ea=297-20-(15*(1+(Ni!==null?1:0)+(Ui!==null?1:0))+5*(1+(Ni!==null?1:0)));Ni!==null&&(ln.addImage(Ni,"JPEG",Ea,5,15,15),Ea+=20),ln.addImage(_i,"JPEG",Ea,5,15,15),Ea+=20,Ui!==null&&ln.addImage(Ui,"JPEG",Ea,5,15,15),ln.setDrawColor(200,200,200),ln.setLineWidth(.5),ln.line(0,25,297,25);const wi=Ir[Sr],On=wi.properties;if(On){ln.setTextColor(0),ln.setFontSize(14),ln.setFont("helvetica","bold");const br=On.name||Je(On.type);let Wn="";if(On.type!=="TextRectangle"){const Ki=z(Ir,wi);Wn=Ki>0?` (surface totale d'irrigation : ${Ie(Ki,"m")})`:""}const Hi=`${br}${Wn}`;ln.text(Hi,20,35)}if(On&&On.type==="ElevationLine")try{const br=((rt=wi.getBounds)==null?void 0:rt.call(wi))||((jt=wi.getLatLng)==null?void 0:jt.call(wi));br&&m.value.fitBounds(br instanceof $t.LatLng?$t.latLngBounds([br]):br,{padding:[50,50]});try{const Dn=((Tn=wi.getBounds)==null?void 0:Tn.call(wi))||((Yn=wi.getLatLng)==null?void 0:Yn.call(wi));if(!Dn||!m.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const mn=Dn instanceof $t.LatLng?$t.latLngBounds([Dn]):Dn;mn&&mn.isValid&&mn.isValid()&&m.value.getContainer()&&document.body.contains(m.value.getContainer())&&m.value.fitBounds(mn,{padding:[50,50],animate:!1})}}catch(Dn){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",Dn)}await new Promise(Dn=>setTimeout(Dn,2e3)),m.value.invalidateSize();try{m.value&&m.value.getContainer()&&document.body.contains(m.value.getContainer())?m.value.invalidateSize({animate:!1}):console.warn("[generateSynthesis] Carte non valide pour l'invalidation de taille")}catch(Dn){console.warn("[generateSynthesis] Erreur lors de l'invalidation de la taille de la carte:",Dn)}await new Promise(Dn=>{const mn=()=>{var Oo;const Fr=(Oo=m.value)==null?void 0:Oo.getContainer();if(!Fr){Dn();return}const ai=Fr.querySelectorAll(".leaflet-tile-loaded");Fr.querySelectorAll(".leaflet-tile-loading").length===0&&ai.length>0?Dn():setTimeout(mn,100)};mn()});const Wn=await di.takeScreen("image"),Hi=await new Promise((Dn,mn)=>{const Fr=new Image;Fr.onload=()=>Dn(Fr),Fr.onerror=ai=>mn(ai),Fr.src=Wn}),Ki=40,ds=237/2,po=Math.min(70,Hi.height*ds/Hi.width);if(ln.addImage(Hi,"PNG",20,Ki,ds,po),On.elevationData&&On.elevationData.length>0){const Dn=document.createElement("canvas");Dn.width=800,Dn.height=400;const mn=Dn.getContext("2d");if(mn){const Fr=On.elevationData,ai=On.minElevation,ms=On.maxElevation,Xs=(ms-ai)*.05,ra=ai-Xs,fa=ms+Xs,mi=40,go=Dn.width-2*mi,fs=Dn.height-2*mi,zs=Ai=>mi+Ai/Fr[Fr.length-1].distance*go,mo=Ai=>mi+fs-(Ai-ra)/(fa-ra)*fs;mn.fillStyle="#f8fafc",mn.fillRect(0,0,Dn.width,Dn.height),mn.fillStyle="#334155",mn.font="bold 20px Arial",mn.textAlign="center",mn.fillText("Profil altimtrique",Dn.width/2,25),mn.strokeStyle="#e2e8f0",mn.lineWidth=1,mn.beginPath(),mn.moveTo(mi,mi),mn.lineTo(mi,fs+mi),mn.lineTo(go+mi,fs+mi),mn.strokeStyle="#94a3b8",mn.stroke();const ps=5;for(let Ai=0;Ai<=ps;Ai++){const yo=ra+Ai/ps*(fa-ra),Cs=mo(yo);mn.beginPath(),mn.strokeStyle="#e2e8f0",mn.moveTo(mi,Cs),mn.lineTo(go+mi,Cs),mn.stroke(),mn.beginPath(),mn.strokeStyle="#94a3b8",mn.moveTo(mi-5,Cs),mn.lineTo(mi,Cs),mn.stroke(),mn.fillStyle="#64748b",mn.font="12px Arial",mn.textAlign="right",mn.fillText(`${Math.round(yo)}m`,mi-8,Cs+4)}const iu=5,Tl=Fr[Fr.length-1].distance;for(let Ai=0;Ai<=iu;Ai++){const yo=Ai/iu*Tl,Cs=zs(yo);mn.beginPath(),mn.strokeStyle="#e2e8f0",mn.moveTo(Cs,mi),mn.lineTo(Cs,fs+mi),mn.stroke(),mn.beginPath(),mn.strokeStyle="#94a3b8",mn.moveTo(Cs,fs+mi),mn.lineTo(Cs,fs+mi+5),mn.stroke(),mn.fillStyle="#64748b",mn.font="12px Arial",mn.textAlign="center",mn.fillText(`${Math.round(yo)}m`,Cs,fs+mi+16)}const mr=mn.createLinearGradient(0,mi,0,fs+mi);mr.addColorStop(0,"rgba(255, 69, 0, 0.8)"),mr.addColorStop(1,"rgba(255, 69, 0, 0.2)"),mn.beginPath(),mn.moveTo(zs(Fr[0].distance),mo(Fr[0].elevation)),Fr.forEach((Ai,yo)=>{yo>0&&mn.lineTo(zs(Ai.distance),mo(Ai.elevation))}),mn.strokeStyle="#FF4500",mn.lineWidth=2,mn.stroke(),mn.lineTo(zs(Fr[Fr.length-1].distance),mo(ra)),mn.lineTo(zs(Fr[0].distance),mo(ra)),mn.closePath(),mn.fillStyle=mr,mn.fill(),Fr.forEach(Ai=>{mn.beginPath(),mn.arc(zs(Ai.distance),mo(Ai.elevation),3,0,Math.PI*2),mn.fillStyle="#FF4500",mn.fill(),mn.strokeStyle="white",mn.lineWidth=1,mn.stroke()});let _r=0,vo=0;for(let Ai=0;Ai<Fr.length;Ai++)Fr[Ai].elevation===ai&&(_r=Ai),Fr[Ai].elevation===ms&&(vo=Ai);mn.beginPath(),mn.arc(zs(Fr[vo].distance),mo(Fr[vo].elevation),6,0,Math.PI*2),mn.fillStyle="#059669",mn.fill(),mn.strokeStyle="white",mn.lineWidth=2,mn.stroke(),mn.beginPath(),mn.arc(zs(Fr[_r].distance),mo(Fr[_r].elevation),6,0,Math.PI*2),mn.fillStyle="#DC2626",mn.fill(),mn.strokeStyle="white",mn.lineWidth=2,mn.stroke(),mn.font="12px Arial",mn.fillStyle="#059669",mn.textAlign="left",mn.fillText(`Point haut: ${Ie(ms,"m")}`,mi,fs+mi+35),mn.fillStyle="#DC2626",mn.fillText(`Point bas: ${Ie(ai,"m")}`,mi+200,fs+mi+35);const Xr=Dn.toDataURL("image/png");ln.addImage(Xr,"PNG",20+ds+20,Ki,ds,po)}}const Nn=Ki+po+15;ln.setFillColor(248,250,252),ln.setDrawColor(226,232,240),ln.roundedRect(20,Nn,257,50,3,3,"FD"),ln.setFont("helvetica","bold"),ln.setFontSize(12),ln.setTextColor(51,65,85),ln.text("Caractristiques",30,Nn+10);const $r=[{label:"Distance totale",value:Ie(On.length||0)},{label:"Dnivel positif",value:Ie(On.elevationGain||0,"m")},{label:"Dnivel ngatif",value:Ie(On.elevationLoss||0,"m")}],Wi=[{label:"Pente moyenne",value:`${(On.averageSlope||0).toFixed(1)}%`},{label:"Pente maximale",value:`${(On.maxSlope||0).toFixed(1)}%`},{label:"Altitude min/max",value:`${Ie(On.minElevation||0,"m")} / ${Ie(On.maxElevation||0,"m")}`}];let Ii=Nn+20;ln.setFont("helvetica","normal"),ln.setFontSize(10),$r.forEach(Dn=>{ln.setTextColor(100,116,139),ln.text(Dn.label,30,Ii),ln.setTextColor(15,23,42),ln.setFont("helvetica","bold"),ln.text(Dn.value,110,Ii),ln.setFont("helvetica","normal"),Ii+=9}),Ii=Nn+20;const Er=297/2;Wi.forEach(Dn=>{ln.setTextColor(100,116,139),ln.text(Dn.label,Er,Ii),ln.setTextColor(15,23,42),ln.setFont("helvetica","bold"),ln.text(Dn.value,Er+80,Ii),ln.setFont("helvetica","normal"),Ii+=9})}catch(br){console.error("[generateSynthesis] Erreur traitement profil altimtrique:",br)}else{const br=((Jt=wi.getBounds)==null?void 0:Jt.call(wi))||((Ht=wi.getLatLng)==null?void 0:Ht.call(wi));br&&m.value.fitBounds(br instanceof $t.LatLng?$t.latLngBounds([br]):br,{padding:[50,50]});try{const Wn=((nn=wi.getBounds)==null?void 0:nn.call(wi))||((an=wi.getLatLng)==null?void 0:an.call(wi));if(!Wn||!m.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const Hi=Wn instanceof $t.LatLng?$t.latLngBounds([Wn]):Wn;Hi&&Hi.isValid&&Hi.isValid()&&m.value.getContainer()&&document.body.contains(m.value.getContainer())&&m.value.fitBounds(Hi,{padding:[50,50],animate:!1})}}catch(Wn){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",Wn)}await new Promise(Wn=>setTimeout(Wn,2e3)),m.value.invalidateSize(),await new Promise(Wn=>{const Hi=()=>{var Nn;const Ki=(Nn=m.value)==null?void 0:Nn.getContainer();if(!Ki){Wn();return}const ds=Ki.querySelectorAll(".leaflet-tile-loaded");Ki.querySelectorAll(".leaflet-tile-loading").length===0&&ds.length>0?Wn():setTimeout(Hi,100)};Hi()});try{const Wn=await di.takeScreen("image"),Hi=await new Promise((Nn,$r)=>{const Wi=new Image;Wi.onload=()=>Nn(Wi),Wi.onerror=Ii=>$r(Ii),Wi.src=Wn}),Ki=45,ds=297*.6-30;let po=Hi.height*ds/Hi.width;if(po>210*.9&&(po=210*.9),ln.addImage(Hi,"PNG",20,Ki,ds,po),On){let Nn=function(mn,Fr,ai,ms,Oo){ln.setTextColor(100,116,139),ln.setFont("helvetica","normal"),ln.text(mn,ai+10,ms),ln.setTextColor(15,23,42),ln.setFont("helvetica","bold"),ln.text(Fr,ai+Oo-10,ms,{align:"right"})},Wi=0;if(On.type==="Circle")Wi=4;else if(On.type==="Rectangle")Wi=4;else if(On.type==="Line")Wi=1,(St=On.dimensions)!=null&&St.width&&Wi++,On.surfaceInfluence&&Wi++;else if(On.type==="Semicircle")Wi=6;else if(On.type==="Polygon")Wi=2;else if(On.type==="CircleWithSections"&&(Wi=3,On.sections&&On.sections.length>0)){const mn=Math.ceil(On.sections.length/3);Wi+=mn*3}const Ii=Math.max(15+Wi*12+30,60),Er=297-188.2-20;ln.setFillColor(248,250,252),ln.setDrawColor(226,232,240),ln.roundedRect(188.2,Ki,Er,Ii,3,3,"FD"),ln.setFont("helvetica","bold"),ln.setFontSize(12),ln.setTextColor(51,65,85),ln.text("Caractristiques",188.2+10,Ki+15);let Dn=Ki+30;ln.setFontSize(10),On.type==="Circle"?(Nn("Rayon",Ie(On.radius),188.2,Dn,Er),Dn+=12,Nn("Diamtre",Ie(On.radius*2),188.2,Dn,Er),Dn+=12,Nn("Surface",Ie(On.surface,"m"),188.2,Dn,Er),Dn+=12,Nn("Primtre",Ie(On.perimeter),188.2,Dn,Er)):On.type==="Rectangle"?(Nn("Largeur",Ie(On.width),188.2,Dn,Er),Dn+=12,Nn("Hauteur",Ie(On.height),188.2,Dn,Er),Dn+=12,Nn("Surface",Ie(On.surface,"m"),188.2,Dn,Er),Dn+=12,Nn("Primtre",Ie(On.perimeter),188.2,Dn,Er)):On.type==="Line"?(Nn("Longueur",Ie(On.length),188.2,Dn,Er),Dn+=12,(Ut=On.dimensions)!=null&&Ut.width&&(Nn("Largeur d'influence",Ie(On.dimensions.width),188.2,Dn,Er),Dn+=12),On.surfaceInfluence&&Nn("Surface d'influence",Ie(On.surfaceInfluence,"m"),188.2,Dn,Er)):On.type==="Semicircle"?(Nn("Rayon",Ie(On.radius),188.2,Dn,Er),Dn+=12,Nn("Diamtre",Ie(On.radius*2),188.2,Dn,Er),Dn+=12,Nn("Surface",Ie(On.surface,"m"),188.2,Dn,Er),Dn+=12,Nn("Primtre",Ie(On.perimeter),188.2,Dn,Er),Dn+=12,Nn("Longueur d'arc",Ie(On.arcLength),188.2,Dn,Er),Dn+=12,Nn("Angle d'ouverture",`${On.openingAngle.toFixed(1)}`,188.2,Dn,Er)):On.type==="Polygon"?(Nn("Surface",Ie(On.surface,"m"),188.2,Dn,Er),Dn+=12,Nn("Primtre",Ie(On.perimeter),188.2,Dn,Er)):On.type==="CircleWithSections"&&(Nn("Rayon",Ie(On.radius),188.2,Dn,Er),Dn+=12,Nn("Surface totale",Ie(On.surface,"m"),188.2,Dn,Er),Dn+=12,Nn("Primtre",Ie(On.perimeter),188.2,Dn,Er),Dn+=20,On.sections&&On.sections.length>0&&(Dn=sr(On.sections,ln,188.2,Dn,Er)))}}catch(Wn){console.error(`[generateSynthesis] Erreur capture forme ${Sr+1}:`,Wn)}}}m.value.removeControl(di),ln.save(`synthese_${ut.nom}.pdf`)}catch(Lr){console.error("[generateSynthesis] Erreur:",Lr),alert("Une erreur est survenue lors de la gnration de la synthse. Veuillez ressayer.")}finally{Ye.value=!1}}const wt=IE.debounce(()=>{const ut=gn.startMeasure("invalidateMapSize","MapView");if(!m.value){ut();return}la(()=>{gn.measure("invalidateMapSize:nextTick",()=>{var rt;try{if(m.value&&m.value.getContainer()&&document.body.contains(m.value.getContainer())){if(m.value.invalidateSize({animate:!1}),(rt=M.value)!=null&&rt.getLayers().length)try{A()}catch(jt){console.warn("[invalidateMapSize] Erreur lors de l'ajustement de la vue:",jt)}}else console.warn("[invalidateMapSize] Carte non valide pour l'invalidation")}catch(jt){console.warn("[invalidateMapSize] Erreur lors de l'invalidation de la taille de la carte:",jt)}ut()},"MapView")})},250);function Ct(){wt()}Di(q,(ut,rt)=>{ut&&ut.id!==(rt==null?void 0:rt.id)&&la(()=>{Ct()})});const Wt=xt(null),sn=xt(!1),bn=xt([]),Qe=Kn(()=>{if(console.log("[MapView][filteredSalaries] Computing with:",{selectedEntreprise:Wt.value,salaries:U.value,salariesLength:U.value.length}),!Wt.value)return[];const ut=U.value.filter(rt=>{var Yn,Jt,Ht;const jt=rt.entreprise,Tn=typeof jt=="object"&&jt!==null?jt.id:jt;return console.log("[MapView][filteredSalaries] Checking salarie:",{salarie:rt,salarieEntreprise:jt,salarieEntrepriseId:Tn,selectedEntrepriseId:(Yn=Wt.value)==null?void 0:Yn.id,matches:Tn===((Jt=Wt.value)==null?void 0:Jt.id)}),Tn===((Ht=Wt.value)==null?void 0:Ht.id)});return console.log("[MapView][filteredSalaries] Filtered result:",ut),ut});function ot(ut){if(!ut)return"";const rt=ut.first_name||"",jt=ut.last_name?ut.last_name.toUpperCase():"",Tn=ut.company_name||ut.role||"";return`${rt} ${jt} (${Tn})`}async function it(){sn.value=!0;try{const ut=await zn.get("/users/",{params:{role:"ENTREPRISE"}});bn.value=ut.data}catch(ut){console.error("[MapView] Error loading entreprises:",ut),bn.value=[]}finally{sn.value=!1}}async function Vt(ut){console.log("[MapView][selectEntreprise] Slection de l'entreprise:",ut),Wt.value=ut,Oe.value=!0;try{console.log("[MapView][selectEntreprise] Envoi de la requte avec params:",{role:"SALARIE",entreprise:ut.id});const rt=await zn.get("/users/",{params:{role:"SALARIE",entreprise:ut.id}});console.log("[MapView][selectEntreprise] Rponse reue:",rt.data),U.value=rt.data,console.log("[MapView][selectEntreprise] Salaries mis  jour:",U.value)}catch(rt){console.error("[MapView] Error loading salaries for entreprise:",rt),U.value=[]}finally{Oe.value=!1}}function Qt(){Wt.value=null,J.value=null,Le.value=null,U.value=[],V.value=[],re.value=[]}function kn(){J.value=null,Le.value=null,V.value=[],re.value=[]}function Ln(){Le.value=null,re.value=[]}async function Mn(ut){var rt,jt,Tn,Yn,Jt,Ht;console.log(`
[MapView][selectSalarie] ====== DBUT SLECTION SALARIE ======`),console.log("Informations du salarie:",{id:ut.id,username:ut.username,company:ut.company_name,role:ut.role}),console.log("Contexte utilisateur:",{userType:(rt=R.user)==null?void 0:rt.user_type,userId:(jt=R.user)==null?void 0:jt.id,userRole:(Tn=R.user)==null?void 0:Tn.role,selectedEntrepriseId:(Yn=Wt.value)==null?void 0:Yn.id}),J.value=ut,Z.value=!0;try{const nn={role:"VISITEUR",salarie:ut.id};R.isEntreprise?(console.log("Ajout de l'ID de l'entreprise connecte:",(Jt=R.user)==null?void 0:Jt.id),nn.entreprise=(Ht=R.user)==null?void 0:Ht.id):Wt.value&&(console.log("Ajout de l'ID de l'entreprise slectionne:",Wt.value.id),nn.entreprise=Wt.value.id),console.log("Paramtres de la requte:",nn);const an=await zn.get("/users/",{params:nn});console.log("Rponse reue du serveur:",{status:an.status,dataLength:Array.isArray(an.data)?an.data.length:"non-array",data:an.data}),Array.isArray(an.data)?(V.value=an.data,console.log(`${an.data.length} visiteurs chargs`),an.data.forEach((St,Ut)=>{console.log(`Visiteur ${Ut+1}:`,{id:St.id,username:St.username,company:St.company_name,salarie:St.salarie})})):(console.warn("Format de rponse inattendu:",an.data),V.value=[]),V.value.length===0&&console.warn("Aucun visiteur trouv pour ce salarie")}catch(nn){if(console.error("ERREUR lors du chargement des visiteurs:",nn),nn&&typeof nn=="object"&&"response"in nn){const an=nn;console.error("Dtails de l'erreur:",{status:an.response.status,data:an.response.data})}V.value=[]}finally{Z.value=!1,console.log(`[MapView][selectSalarie] ====== FIN SLECTION SALARIE ======
`)}}function Zn(){j.value=!1,I.value=null}function en(ut){console.log("[MapView][handleFilterChange] Nouveaux filtres reus:",JSON.stringify(ut,null,2)),console.log("[MapView][handleFilterChange] Filtres actuels dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2)),console.log("[MapView][handleFilterChange] Mise  jour des filtres dans le store"),o.updateFilters(ut),console.log("[MapView][handleFilterChange] lments dans le store:",{count:o.elements.length,ids:o.elements.map(rt=>rt.id)}),console.log("[MapView][handleFilterChange] Mise  jour de l'affichage de la carte"),wn(),setTimeout(()=>{console.log("[MapView][handleFilterChange] Mise  jour force de l'affichage"),wn()},100),console.log("[MapView][handleFilterChange] Traitement des filtres termin")}function wn(){if(!M.value)return;const ut={accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}};console.log("[MapView][updateMapDisplay] Mise  jour de l'affichage avec filtres:",JSON.stringify(ut,null,2));const rt={count:o.elements.length,elements:o.elements.map(Ot=>({id:Ot.id,type_forme:Ot.type_forme}))};console.log("[MapView][updateMapDisplay] lments dans le store:",JSON.stringify(rt,null,2));const jt=o.getFilteredElements;console.log("[MapView][updateMapDisplay] lments filtrs:",{total:o.elements.length,filtered:jt.length,filteredIds:jt.map(Ot=>Ot.id)});const Tn=M.value.getLayers();console.log("[MapView][updateMapDisplay] Couches actuelles:",Tn.length);const Yn=Tn.map(Ot=>({_leaflet_id:Ot._leaflet_id,_dbId:Ot._dbId,hasProperties:!!Ot.properties,propertyType:Ot.properties?Ot.properties.type:null,category:Ot.properties?Ot.properties.category:null}));console.log("[MapView][updateMapDisplay] Dtails des couches:",JSON.stringify(Yn,null,2)),console.log("[MapView][updateMapDisplay] tat des filtres pour les catgories:",{forages:o.filters.categories.forages,clients:o.filters.categories.clients,entrepots:o.filters.categories.entrepots,livraisons:o.filters.categories.livraisons,cultures:o.filters.categories.cultures,parcelles:o.filters.categories.parcelles});const Jt=new Map;c.value.forEach(Ot=>{Ot.layer&&Ot.id&&Jt.set(Ot.id,Ot.layer)});const Ht=new Map;Tn.forEach(Ot=>{Ot._dbId&&Ht.set(Ot,Ot._dbId)});const nn=new Set(jt.map(Ot=>Ot.id));console.log("[MapView][updateMapDisplay] Dbut du traitement des couches");const an=Array.from(nn);console.log("[MapView][updateMapDisplay] IDs des lments filtrs:",JSON.stringify(an));let St=0,Ut=0,Lr=0;Tn.forEach(Ot=>{var Ni,Ui;const $n=Ot._dbId,or=Ot._leaflet_id;if(!$n){if(!Ot.properties){Lr++,console.log(`[MapView][updateMapDisplay] Couche ${or} sans dbId et sans proprits, ignore`);return}Ot._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[MapView][updateMapDisplay] Couche ${or} sans dbId, ID temporaire assign: ${Ot._dbId}`)}const Mi=Ot.properties||{},Br=Mi.type||Ot.type_forme||"";let xr=Mi.category;if(Ot._dbId){const hi=o.elements.find(Ir=>Ir.id===Ot._dbId);if(hi){const Ir=hi.data;Ir&&Ir.category&&(xr!==Ir.category&&(console.log(`[MapView][updateMapDisplay] Catgorie diffrente dtecte - Proprits: ${xr}, Store: ${Ir.category} pour la couche ${Ot._dbId}`),xr=Ir.category),Ot.properties||(Ot.properties={}),Ot.properties.category=xr)}}xr||(xr="default");const ur=Mi.accessLevel||"visitor";console.log(`[MapView][updateMapDisplay] Couche ${or} (dbId: ${Ot._dbId}): type=${Br}, category=${xr}, accessLevel=${ur}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify(o.filters));let gi=!1;Br?gi=Br in o.filters.shapeTypes&&o.filters.shapeTypes[Br]===!0:gi=o.filters.shapeTypes.Polygon===!0;let yr=!1;xr?xr in o.filters.categories?(yr=o.filters.categories[xr]===!0,console.log(`[MapView][updateMapDisplay] Vrification de la catgorie ${xr}: ${yr}`)):(yr=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catgorie ${xr} non trouve dans les filtres, utilisation de 'forages': ${yr}`)):(yr=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catgorie non spcifie, utilisation de 'forages': ${yr}`));let Gr=!1;const zr={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let ln="visitor";zr.company?ln="company":zr.employee?ln="employee":zr.visitor&&(ln="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs slectionn par l'utilisateur: ${ln}`),ln==="company"?Gr=!0:ln==="employee"?Gr=ur==="employee"||ur==="visitor":ln==="visitor"&&(Gr=ur==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs de la couche: ${ur}, visible: ${Gr}`);const _i=gi&&yr&&Gr;console.log(`[MapView][updateMapDisplay] Visibilit de la couche ${or}: typeVisible=${gi}, categoryVisible=${yr}, accessLevelVisible=${Gr}, isVisible=${_i}`),console.log(`[MapView][updateMapDisplay] Dtails de la couche ${or}: type=${Br}, category=${xr}, accessLevel=${ur}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify({accessLevels:o.filters.accessLevels,categories:o.filters.categories,shapeTypes:o.filters.shapeTypes},null,2)),_i?M.value.hasLayer(Ot)?(St++,console.log(`[MapView][updateMapDisplay] Couche ${Ot._dbId} (${Br}) dj visible avec catgorie ${((Ui=Ot.properties)==null?void 0:Ui.category)||"non dfinie"}`)):(xr&&xr!=="default"&&(!Ot.properties||!Ot.properties.category)&&(Ot.properties||(Ot.properties={}),Ot.properties.category=xr,console.log(`[MapView][updateMapDisplay] Catgorie dfinie avant ajout: ${xr} pour la couche ${Ot._dbId}`)),M.value.addLayer(Ot),St++,console.log(`[MapView][updateMapDisplay] Affichage de la couche ${Ot._dbId} (${Br}) avec catgorie ${((Ni=Ot.properties)==null?void 0:Ni.category)||"non dfinie"}`)):M.value.hasLayer(Ot)?(M.value.removeLayer(Ot),Ut++,console.log(`[MapView][updateMapDisplay] Masquage de la couche ${Ot._dbId} (${Br}) - Filtres non respects`)):(Ut++,console.log(`[MapView][updateMapDisplay] Couche ${Ot._dbId} (${Br}) dj masque`))}),console.log("[MapView][updateMapDisplay] Dbut de la restauration des couches filtres"),console.log("[MapView][updateMapDisplay] Nombre de formes dans shapes.value:",c.value.length),c.value.forEach(Ot=>{var Ui;if(!Ot.layer){console.log("[MapView][updateMapDisplay] Forme sans couche, ignore");return}const $n=Ot.layer,or=$n._leaflet_id,Mi=$n._dbId;if(console.log(`[MapView][updateMapDisplay] Traitement de la forme ${or} (dbId: ${Mi})`),M.value.hasLayer($n)){console.log(`[MapView][updateMapDisplay] La couche ${or} est dj dans le featureGroup, ignore`);return}const Br=$n.properties||{},xr=Br.type||$n.type_forme||"";let ur=null;if($n._dbId){const hi=o.elements.find(Ir=>Ir.id===$n._dbId);if(hi){const Ir=hi.data;Ir&&Ir.category&&(ur=Ir.category,console.log(`[MapView][updateMapDisplay] Catgorie rcupre depuis le store: ${ur} pour la couche ${$n._dbId}`))}}!ur&&Br.category&&(ur=Br.category,console.log(`[MapView][updateMapDisplay] Catgorie rcupre depuis les proprits: ${ur} pour la couche ${or}`)),ur||(ur="default");const gi=Br.accessLevel||"visitor";if($n.properties||($n.properties={}),ur&&ur!=="default"&&($n.properties.category=ur,console.log(`[MapView][updateMapDisplay] Catgorie dfinie/restaure: ${ur} pour la couche ${$n._dbId}`),$n._dbId)){const hi=o.elements.find(Ir=>Ir.id===$n._dbId);if(hi){const Ir=hi;Ir.data||(Ir.data={}),Ir.data.category!==ur&&(console.log(`[MapView][updateMapDisplay] Mise  jour de la catgorie dans le store: ${ur} pour l'lment ${$n._dbId}`),Ir.data.category=ur,o.$patch({unsavedChanges:!0}))}}$n.properties.accessLevel||($n.properties.accessLevel="visitor"),console.log(`[MapView][updateMapDisplay] Proprits de la couche ${or}: type=${xr}, category=${ur}, accessLevel=${gi}`);let yr=!1;xr?yr=xr in o.filters.shapeTypes&&o.filters.shapeTypes[xr]===!0:yr=o.filters.shapeTypes.Polygon===!0;let Gr=!1;ur?ur in o.filters.categories?(Gr=o.filters.categories[ur]===!0,console.log(`[MapView][updateMapDisplay] Vrification de la catgorie ${ur}: ${Gr}`)):(Gr=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catgorie ${ur} non trouve, utilisation de 'forages': ${Gr}`)):(Gr=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Pas de catgorie, utilisation de 'forages': ${Gr}`));let zr=!1;const ln={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let _i="visitor";ln.company?_i="company":ln.employee?_i="employee":ln.visitor&&(_i="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs slectionn par l'utilisateur (2me tape): ${_i}`),_i==="company"?zr=!0:_i==="employee"?zr=gi==="employee"||gi==="visitor":_i==="visitor"&&(zr=gi==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs de la couche (2me tape): ${gi}, visible: ${zr}`);const Ni=yr&&Gr&&zr;if(console.log(`[MapView][updateMapDisplay] Visibilit de la couche ${or}: typeVisible=${yr}, categoryVisible=${Gr}, accessLevelVisible=${zr}, isVisible=${Ni}`),Ni){if(ur&&ur!=="default"&&($n.properties||($n.properties={}),$n.properties.category=ur,console.log(`[MapView][updateMapDisplay] Catgorie dfinie avant restauration: ${ur} pour la couche ${or}`),$n._dbId)){const hi=o.elements.find(Ir=>Ir.id===$n._dbId);if(hi){const Ir=hi;Ir.data||(Ir.data={}),Ir.data.category!==ur&&(console.log(`[MapView][updateMapDisplay] Mise  jour de la catgorie dans le store avant restauration: ${ur} pour l'lment ${$n._dbId}`),Ir.data.category=ur,o.$patch({unsavedChanges:!0}))}}M.value.addLayer($n),St++,console.log(`[MapView][updateMapDisplay] Restauration de la couche ${or} (${xr}) avec catgorie ${((Ui=$n.properties)==null?void 0:Ui.category)||"non dfinie"} - Filtres respects`)}else console.log(`[MapView][updateMapDisplay] La couche ${or} (${xr}) reste masque - Filtres non respects`)}),console.log(`[MapView][updateMapDisplay] Restauration termine: ${St} couches visibles au total`),console.log(`[MapView][updateMapDisplay] Statistiques: ${St} couches visibles, ${Ut} couches masques, ${Lr} couches sans dbId`),console.log("[MapView][updateMapDisplay] Mise  jour termine")}function En(ut){if(M.value){const jt=M.value.getLayers().find(Tn=>Tn._leaflet_id===ut.id);jt&&(jt.properties.name=ut.title,jt.properties.description=ut.description,jt.properties.columnId=ut.columnId,jt.properties.accessLevel=ut.accessLevel,jt.properties.category||(jt.properties.category="forages"),jt.setNoteStyle({color:ut.style.color,fillColor:ut.style.fillColor,weight:ut.style.weight,fillOpacity:ut.style.fillOpacity,radius:ut.style.radius}),jt.closePopup(),jt.unbindPopup(),jt.bindPopup(jt.createPopupContent()),console.log("[handleNoteSave] Note mise  jour:",{name:jt.properties.name,category:jt.properties.category,accessLevel:jt.properties.accessLevel,columnId:jt.properties.columnId}),a.notes.find(Yn=>Yn.id===ut.id)?(a.updateNote(ut.id,{title:ut.title,description:ut.description,columnId:ut.columnId,accessLevel:ut.accessLevel,style:ut.style,updatedAt:new Date().toISOString()}),console.log("[handleNoteSave] Note mise  jour dans le store avec columnId:",ut.columnId)):(a.addNote({title:ut.title,description:ut.description,location:[ut.location[0],ut.location[1]],columnId:ut.columnId||"1",style:ut.style,accessLevel:ut.accessLevel}),console.log("[handleNoteSave] Note ajoute au store avec columnId:",ut.columnId||"1")))}l.success("Note enregistre avec succs")}async function Xn(ut){var rt;Le.value=ut,G.value=!0;try{const jt={visiteur:ut.id};R.isEntreprise?jt.entreprise=(rt=R.user)==null?void 0:rt.id:Wt.value&&(jt.entreprise=Wt.value.id),J.value&&(jt.salarie=J.value.id);const Tn=await zn.get("/plans/",{params:jt});re.value=Tn.data}catch(jt){console.error("[MapView] Error loading client plans:",jt),re.value=[]}finally{G.value=!1}}async function dr(){var rt;console.log("[MapView][loadPlansWithoutVisiteur] Chargement des plans sans visiteur");const ut={id:-1,username:"sans_visiteur",first_name:"Sans",last_name:"Visiteur",company_name:"",role:"VISITEUR",display_name:"Plans sans visiteur"};Le.value=ut,G.value=!0;try{const jt={visiteur_null:!0};R.isEntreprise?jt.entreprise=(rt=R.user)==null?void 0:rt.id:Wt.value&&(jt.entreprise=Wt.value.id),J.value&&(jt.salarie=J.value.id),console.log("[MapView][loadPlansWithoutVisiteur] Paramtres de requte:",jt);const Tn=await zn.get("/plans/",{params:jt});console.log("[MapView][loadPlansWithoutVisiteur] Plans reus:",Tn.data),re.value=Tn.data}catch(jt){console.error("[MapView] Error loading plans without visiteur:",jt),re.value=[]}finally{G.value=!1}}async function vr(){if(R.isEntreprise){G.value=!0;try{await s.fetchPlans()}catch(ut){console.error("[MapView] Erreur lors du chargement des plans:",ut)}finally{G.value=!1}}N.value=!0}function sr(ut,rt,jt,Tn,Yn){if(!ut||ut.length===0)return Tn;const Jt=[...ut].sort(($n,or)=>(or.surface||0)-($n.surface||0)),Ht=Yn,nn=7,an=6,St=2,Ut=[{header:"Nom",width:.3,align:"left"},{header:"Surface",width:.2,align:"right"},{header:"Angles",width:.25,align:"right"},{header:"Rayon",width:.15,align:"right"},{header:"Type",width:.1,align:"center"}],Lr=nn+an*Jt.length;rt.setFillColor(248,250,252),rt.setDrawColor(226,232,240),rt.roundedRect(jt,Tn,Ht,Lr+St*2,2,2,"FD"),rt.setFillColor(241,245,249),rt.rect(jt+St,Tn+St,Ht-St*2,nn,"F"),rt.setFont("helvetica","bold"),rt.setFontSize(7),rt.setTextColor(51,65,85);let Ot=jt+St;return Ut.forEach($n=>{const or=$n.width*(Ht-St*2);$n.align==="right"?rt.text($n.header,Ot+or-St,Tn+St+5,{align:"right"}):$n.align==="center"?rt.text($n.header,Ot+or/2,Tn+St+5,{align:"center"}):rt.text($n.header,Ot+St/2,Tn+St+5),Ot+=or}),rt.setFont("helvetica","normal"),rt.setFontSize(6.5),rt.setTextColor(71,85,105),Jt.forEach(($n,or)=>{const Mi=Tn+nn+St+or*an;or%2===0&&(rt.setFillColor(250,252,254),rt.rect(jt+St,Mi,Ht-St*2,an,"F"));let Br=jt+St;const xr=$n.name||`Section ${or+1}`;rt.text(xr,Br+St/2,Mi+4),Br+=Ut[0].width*(Ht-St*2);const ur=Ie($n.surface||0,"m");rt.text(ur,Br+Ut[1].width*(Ht-St*2)-St,Mi+4,{align:"right"}),Br+=Ut[1].width*(Ht-St*2);const gi=$n.startAngle===0&&$n.endAngle===360?"Complet":`${$n.startAngle}-${$n.endAngle}`;rt.text(gi,Br+Ut[2].width*(Ht-St*2)-St,Mi+4,{align:"right"}),Br+=Ut[2].width*(Ht-St*2);const yr=Ie($n.radius||0);rt.text(yr,Br+Ut[3].width*(Ht-St*2)-St,Mi+4,{align:"right"}),Br+=Ut[3].width*(Ht-St*2);const Gr=$n.startAngle===0&&$n.endAngle===360?"C":"P";rt.text(Gr,Br+Ut[4].width*(Ht-St*2)/2,Mi+4,{align:"center"})}),rt.setDrawColor(226,232,240),rt.setLineWidth(.05),rt.line(jt+St,Tn+nn+St,jt+Ht-St,Tn+nn+St),Tn+Lr+St*2}return(ut,rt)=>{var jt,Tn,Yn,Jt,Ht;return Re(),$e(Cn,null,[C("div",sW,[C("div",oW,[Ye.value?(Re(),$e("div",aW,rt[7]||(rt[7]=[Jl('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Gnration de la synthse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualit de vos captures pour un rendu parfait </p></div></div></div>',1)]))):rn("",!0),q.value?rn("",!0):(Re(),$e("div",lW,[C("div",uW,[rt[10]||(rt[10]=Jl('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+e5+'" alt="TagMap Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur TagMap</h1><p class="text-gray-600 mb-8">Pour commencer  dessiner, vous devez d&#39;abord crer un nouveau plan ou charger un plan existant.</p>',3)),C("div",cW,[C("button",{onClick:rt[0]||(rt[0]=nn=>pe.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},rt[8]||(rt[8]=[C("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),si(" Crer un nouveau plan ")])),C("button",{onClick:vr,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},rt[9]||(rt[9]=[C("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),si(" Charger un plan existant ")]))])])])),Pn(C("div",hW,[C("div",dW,[q.value&&!Ye.value?(Re(),$a(DV,{key:0,"last-save":(jt=q.value)!=null&&jt.date_modification?new Date(q.value.date_modification):void 0,"plan-name":(Tn=q.value)==null?void 0:Tn.nom,"plan-description":(Yn=q.value)==null?void 0:Yn.description,"save-status":$.value,onChangeMapType:er(me),onCreateNewPlan:rt[1]||(rt[1]=nn=>pe.value=!0),onLoadPlan:vr,onSavePlan:Q,onAdjustView:fe,onGenerateSummary:Ge,class:"flex-shrink-0"},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])):rn("",!0),C("div",fW,[i.value&&q.value&&!Ye.value?(Re(),$e("div",{key:0,onClick:De,class:"md:hidden fixed inset-0 bg-black/30 z-[1800] transition-opacity duration-300"})):rn("",!0),C("div",pW,[C("div",{ref_key:"mapContainer",ref:r,class:"absolute inset-0 z-[1000]"},null,512)]),q.value&&!Ye.value?(Re(),$a(X$,{key:1,show:i.value,"onUpdate:show":rt[2]||(rt[2]=nn=>i.value=nn),"selected-tool":er(p),"selected-shape":he.value,"is-drawing":er(K),onToolSelected:er(E),onFilterChange:en,onDeleteShape:Ce,class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected"])):rn("",!0),q.value&&!Ye.value?(Re(),$e("div",{key:2,class:"md:hidden fixed left-0 right-0 z-[1900] bg-white py-3 px-3 shadow-lg border-t border-gray-200 flex items-center justify-between cursor-pointer",style:{height:"var(--mobile-bottom-toolbar-height)",bottom:"0"},onClick:De},rt[11]||(rt[11]=[Jl('<div class="flex items-center w-full justify-center"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg><span class="text-sm text-gray-500 font-medium">Outils de dessin</span></div></div>',1)]))):rn("",!0)])]),Ye.value?(Re(),$e("div",gW,rt[12]||(rt[12]=[Jl('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Gnration de la synthse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):rn("",!0)],512),[[Ay,q.value]]),(Re(),$a(j2,{to:"body"},[pi(FE,{ref_key:"newPlanModalRef",ref:se,modelValue:pe.value,"onUpdate:modelValue":rt[3]||(rt[3]=nn=>pe.value=nn),onCreated:de,onSalarieSelected:rt[4]||(rt[4]=nn=>J.value=nn),onVisiteurSelected:rt[5]||(rt[5]=nn=>_e.value=nn)},null,8,["modelValue"])])),(Re(),$a(j2,{to:"body"},[N.value?(Re(),$e("div",mW,[C("div",vW,[C("div",yW,[rt[14]||(rt[14]=C("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),C("button",{onClick:rt[6]||(rt[6]=nn=>N.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},rt[13]||(rt[13]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",bW,[er(R).isAdmin?(Re(),$e("div",_W,[Wt.value?J.value?Le.value?(Re(),$e("div",FW,[C("div",jW,[C("button",{onClick:Ln,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},rt[30]||(rt[30]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),si(" Retour  la liste des clients ")])),rt[31]||(rt[31]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",zW,Tt(ot(Le.value)),1)]),rt[33]||(rt[33]=C("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),C("div",$W,[G.value?(Re(),$e(Cn,{key:0},pr(3,nn=>C("div",{key:nn,class:"animate-pulse"},rt[32]||(rt[32]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),C("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Re(!0),$e(Cn,{key:1},pr(re.value,nn=>(Re(),$e("button",{key:nn.id,onClick:an=>ge(nn.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",UW,Tt(nn.nom),1),C("div",HW,Tt(nn.description),1),C("div",WW," Modifi le "+Tt(ie(nn.date_modification)),1)],8,VW))),128))])])):(Re(),$e("div",TW,[C("div",DW,[C("button",{onClick:kn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},rt[23]||(rt[23]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),si(" Retour  la liste des salaries ")])),rt[24]||(rt[24]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",OW,Tt(ot(J.value)),1)]),rt[29]||(rt[29]=C("h3",{class:"font-medium text-gray-700"},"Slectionnez un visiteur",-1)),C("div",NW,[C("button",{onClick:dr,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},rt[25]||(rt[25]=[C("div",null,[C("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),C("div",{class:"text-xs text-primary-600"},"Afficher les plans crs sans visiteur associ")],-1),C("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),Z.value?(Re(),$e(Cn,{key:0},pr(3,nn=>C("div",{key:nn,class:"animate-pulse"},rt[26]||(rt[26]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Re(),$e(Cn,{key:1},[ce.value.length===0?(Re(),$e("div",IW,rt[27]||(rt[27]=[C("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouv pour ce salarie",-1),C("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Re(!0),$e(Cn,{key:1},pr(ce.value,nn=>(Re(),$e("button",{key:nn.id,onClick:an=>Xn(nn),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",RW,Tt(ot(nn)),1)]),rt[28]||(rt[28]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,BW))),128))],64))])])):(Re(),$e("div",CW,[C("div",EW,[C("button",{onClick:Qt,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},rt[18]||(rt[18]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),si(" Retour  la liste des entreprises ")])),rt[19]||(rt[19]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",PW,Tt(ot(Wt.value)),1)]),rt[22]||(rt[22]=C("h3",{class:"font-medium text-gray-700"},"Slectionnez un salarie",-1)),C("div",MW,[Oe.value?(Re(),$e(Cn,{key:0},pr(3,nn=>C("div",{key:nn,class:"animate-pulse"},rt[20]||(rt[20]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Re(!0),$e(Cn,{key:1},pr(Qe.value,nn=>(Re(),$e("button",{key:nn.id,onClick:an=>Mn(nn),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",AW,Tt(ot(nn)),1)]),rt[21]||(rt[21]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,kW))),128))])])):(Re(),$e("div",wW,[rt[17]||(rt[17]=C("h3",{class:"font-medium text-gray-700"},"Slectionnez une entreprise",-1)),C("div",xW,[sn.value?(Re(),$e(Cn,{key:0},pr(3,nn=>C("div",{key:nn,class:"animate-pulse"},rt[15]||(rt[15]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Re(!0),$e(Cn,{key:1},pr(bn.value,nn=>(Re(),$e("button",{key:nn.id,onClick:an=>Vt(nn),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",SW,Tt(ot(nn)),1)]),rt[16]||(rt[16]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,LW))),128))])]))])):er(R).isSalarie?(Re(),$e("div",GW,[Le.value?(Re(),$e("div",JW,[C("div",QW,[C("button",{onClick:Ln,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},rt[38]||(rt[38]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),si(" Retour  la liste des clients ")])),rt[39]||(rt[39]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",eG,Tt(ot(Le.value)),1)]),rt[41]||(rt[41]=C("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),C("div",tG,[G.value?(Re(),$e(Cn,{key:0},pr(3,nn=>C("div",{key:nn,class:"animate-pulse"},rt[40]||(rt[40]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),C("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Re(!0),$e(Cn,{key:1},pr(re.value,nn=>(Re(),$e("button",{key:nn.id,onClick:an=>ge(nn.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",rG,Tt(nn.nom),1),C("div",iG,Tt(nn.description),1),C("div",sG," Modifi le "+Tt(ie(nn.date_modification)),1)],8,nG))),128))])])):(Re(),$e("div",qW,[rt[37]||(rt[37]=C("h3",{class:"font-medium text-gray-700"},"Slectionnez un visiteur",-1)),C("div",YW,[Z.value?(Re(),$e(Cn,{key:0},pr(3,nn=>C("div",{key:nn,class:"animate-pulse"},rt[34]||(rt[34]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Re(),$e(Cn,{key:1},[ce.value.length===0?(Re(),$e("div",KW,rt[35]||(rt[35]=[C("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouv pour ce salarie",-1),C("div",{class:"text-sm text-gray-400"}," Veuillez vrifier que des visiteurs ont t assigns  ce salarie ",-1)]))):(Re(!0),$e(Cn,{key:1},pr(ce.value,nn=>(Re(),$e("button",{key:nn.id,onClick:an=>Xn(nn),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",XW,Tt(ot(nn)),1)]),rt[36]||(rt[36]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,ZW))),128))],64))])]))])):er(R).isEntreprise?(Re(),$e("div",oG,[G.value?(Re(),$e("div",aG,rt[42]||(rt[42]=[C("div",{class:"flex justify-center"},[C("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-600"})],-1),C("p",{class:"text-center text-sm text-gray-500 mt-2"},"Chargement des plans...",-1)]))):er(s).plans.length===0?(Re(),$e("div",lG,rt[43]||(rt[43]=[C("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(Re(),$e("div",uG,[rt[44]||(rt[44]=C("h3",{class:"font-medium text-gray-700"},"Vos plans",-1)),C("div",cG,[(Re(!0),$e(Cn,null,pr(er(s).plans,nn=>(Re(),$e("button",{key:nn.id,onClick:an=>ge(nn.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",dG,Tt(nn.nom),1),C("div",fG,Tt(nn.description),1),C("div",pG," Modifi le "+Tt(ie(nn.date_modification)),1)],8,hG))),128))])]))])):(Re(),$e("div",gG,[er(s).plans.length===0?(Re(),$e("div",mG,rt[45]||(rt[45]=[C("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(Re(),$e("div",vG,[(Re(!0),$e(Cn,null,pr(er(s).plans,nn=>(Re(),$e("button",{key:nn.id,onClick:an=>ge(nn.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",bG,Tt(nn.nom),1),C("div",_G,Tt(nn.description),1),C("div",wG," Modifi le "+Tt(ie(nn.date_modification)),1)],8,yG))),128))]))]))])])])):rn("",!0)]))])]),j.value?(Re(),$a(BE,{key:0,note:I.value,"is-new-note":!((Jt=I.value)!=null&&Jt.id),location:(Ht=I.value)==null?void 0:Ht.location,onClose:Zn,onSave:En},null,8,["note","is-new-note","location"])):rn("",!0)],64)}}}),xG={class:"fixed inset-0 z-[3001] overflow-y-auto"},LG={class:"flex items-center justify-center min-h-screen w-full p-0"},SG={class:"relative bg-white w-full h-full max-h-full overflow-y-auto md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},CG={class:"p-4 md:p-6"},EG={class:"flex justify-between items-center mb-4 border-b pb-4"},PG={class:"text-xl font-semibold text-gray-900",id:"modal-headline"},MG={class:"mt-4"},kG={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},AG={class:"flex"},TG={class:"ml-3"},DG={class:"text-sm font-medium text-red-800"},OG={key:0},NG={key:1},IG=["value"],BG={key:2},RG={key:3},FG=["value"],jG={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2"},zG={key:0,class:"mt-2 text-sm text-red-600"},$G={key:0,class:"mt-2 text-sm text-red-600"},VG={key:4},UG={class:"flex items-center"},HG={key:5,class:"border-t pt-4 mt-4"},WG={class:"mb-4"},GG={class:"mb-4"},qG={key:6},YG={key:7},KG={key:0,class:"mt-2 text-sm text-red-600"},ZG={class:"flex justify-end space-x-3"},XG=["disabled"],JG={key:0,class:"mr-2"},QG=Fs({__name:"UserFormModal",props:{user:{type:Object,default:()=>({})},salaries:{type:Array,default:()=>[]},entreprises:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isEntreprise:{type:Boolean,default:!1},currentSalarie:{type:String,default:void 0},currentEntreprise:{type:String,default:void 0},apiErrors:{type:Array,default:()=>[]},refreshKey:{type:Number,default:0}},emits:["close","save","refresh"],setup(t,{emit:e}){const n=t,r=e,i=xt(!1),s=xt(""),o=xt(""),a=xt(""),l=xt(""),c=xt(""),d=nu({id:void 0,first_name:"",last_name:"",username:"",email:"",password:"",company_name:"",role:n.isEntreprise?"SALARIE":n.isAdmin?"ADMIN":"VISITEUR",salarie:null,entreprise:null,is_active:!0,storage_quota:50,storage_used:0,ecowitt_api_key:"",ecowitt_application_key:""});fo(()=>{var v;(v=n.user)!=null&&v.id?(d.id=n.user.id,d.first_name=n.user.first_name||"",d.last_name=n.user.last_name||"",d.username=n.user.username||"",d.email=n.user.email||"",d.company_name=n.user.company_name||"",d.role=n.user.role||"VISITEUR",d.is_active=n.user.is_active??!0,d.ecowitt_api_key=n.user.ecowitt_api_key||"",d.ecowitt_application_key=n.user.ecowitt_application_key||"",d.storage_quota=n.user.storage_quota||50,d.storage_used=n.user.storage_used||0,n.user.salarie?typeof n.user.salarie=="object"?d.salarie=n.user.salarie.id:d.salarie=n.user.salarie:n.user.salarie_id?d.salarie=n.user.salarie_id:n.currentSalarie&&(d.salarie=parseInt(n.currentSalarie)),n.user.entreprise?typeof n.user.entreprise=="object"?d.entreprise=n.user.entreprise.id:d.entreprise=n.user.entreprise:n.user.entreprise_id?d.entreprise=n.user.entreprise_id:n.currentEntreprise&&(d.entreprise=parseInt(n.currentEntreprise))):(n.currentSalarie&&(d.salarie=parseInt(n.currentSalarie)),n.currentEntreprise&&(d.entreprise=parseInt(n.currentEntreprise)),n.isEntreprise?d.role="SALARIE":n.isAdmin||(d.role="VISITEUR"))}),dm(()=>{d.role==="ADMIN"||d.role==="ENTREPRISE"?(d.salarie=null,d.entreprise=null):d.role==="SALARIE"&&(d.salarie=null,n.isEntreprise&&n.currentEntreprise&&(d.entreprise=parseInt(n.currentEntreprise)))}),dm(()=>{s.value="",o.value="",a.value="",l.value="",n.apiErrors&&n.apiErrors.length>0&&n.apiErrors.forEach(v=>{switch(v.field){case"email":s.value=v.message;break;case"username":o.value=v.message;break;case"password":a.value=v.message;break;case"non_field_error":default:l.value=v.message;break}})});async function p(){s.value="",o.value="",a.value="",l.value="";let v=!0;if(d.id||(d.password!==c.value?(a.value="Les mots de passe ne correspondent pas",v=!1):d.password.length<8&&(a.value="Le mot de passe doit contenir au moins 8 caractres",v=!1)),!!v){i.value=!0;try{const m={...d};d.id&&delete m.password,n.isEntreprise&&["SALARIE","VISITEUR"].includes(d.role)&&(m.entreprise_id=n.currentEntreprise?parseInt(n.currentEntreprise):void 0),m.salarie&&(m.salarie_id=m.salarie,delete m.salarie),n.currentSalarie&&d.role==="VISITEUR"&&(m.salarie_id=parseInt(n.currentSalarie)),await r("save",m),r("refresh")}catch(m){console.error("Erreur locale:",m)}finally{i.value=!1}}}return(v,m)=>(Re(),$e("div",xG,[C("div",LG,[m[42]||(m[42]=C("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[C("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),C("div",SG,[C("div",null,[C("div",CG,[C("div",EG,[C("h3",PG,Tt(t.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),C("button",{type:"button",onClick:m[0]||(m[0]=x=>v.$emit("close")),class:"text-gray-400 hover:text-gray-500"},m[16]||(m[16]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",MG,[l.value?(Re(),$e("div",kG,[C("div",AG,[m[17]||(m[17]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",TG,[C("h3",DG,Tt(l.value),1)])])])):rn("",!0),C("form",{onSubmit:Bh(p,["prevent"]),class:"space-y-6"},[t.isAdmin?(Re(),$e("div",OG,[m[19]||(m[19]=C("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),Pn(C("select",{id:"role","onUpdate:modelValue":m[1]||(m[1]=x=>d.role=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},m[18]||(m[18]=[C("option",{value:"ADMIN"},"Administrateur",-1),C("option",{value:"ENTREPRISE"},"Entreprise",-1),C("option",{value:"SALARIE"},"Salarie",-1),C("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[is,d.role]])])):rn("",!0),t.isAdmin&&d.role==="SALARIE"?(Re(),$e("div",NG,[m[21]||(m[21]=C("label",{for:"entreprise",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Pn(C("select",{id:"entreprise","onUpdate:modelValue":m[2]||(m[2]=x=>d.entreprise=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[m[20]||(m[20]=C("option",{value:null},"-- Slectionner une entreprise --",-1)),(Re(!0),$e(Cn,null,pr(t.entreprises,x=>(Re(),$e("option",{key:x.id,value:x.id},Tt(x.first_name)+" "+Tt(x.last_name)+" ("+Tt(x.company_name||"Entreprise")+") ",9,IG))),128))],512),[[is,d.entreprise]])])):rn("",!0),t.isEntreprise&&!d.id?(Re(),$e("div",BG,[m[23]||(m[23]=C("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),Pn(C("select",{id:"role","onUpdate:modelValue":m[3]||(m[3]=x=>d.role=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},m[22]||(m[22]=[C("option",{value:"SALARIE"},"Salarie",-1),C("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[is,d.role]])])):rn("",!0),(t.isAdmin||t.isEntreprise)&&d.role==="VISITEUR"&&!t.currentSalarie?(Re(),$e("div",RG,[m[25]||(m[25]=C("label",{for:"salarie",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),Pn(C("select",{id:"salarie","onUpdate:modelValue":m[4]||(m[4]=x=>d.salarie=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},[m[24]||(m[24]=C("option",{value:null},"-- Slectionner un salarie --",-1)),(Re(!0),$e(Cn,null,pr(t.salaries,x=>(Re(),$e("option",{key:x.id,value:x.id},Tt(x.first_name)+" "+Tt(x.last_name)+" ("+Tt(x.company_name||"Salarie")+") ",9,FG))),128))],512),[[is,d.salarie]])])):rn("",!0),C("div",jG,[C("div",null,[m[26]||(m[26]=C("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prnom",-1)),Pn(C("input",{type:"text",id:"first_name","onUpdate:modelValue":m[5]||(m[5]=x=>d.first_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Rr,d.first_name]])]),C("div",null,[m[27]||(m[27]=C("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),Pn(C("input",{type:"text",id:"last_name","onUpdate:modelValue":m[6]||(m[6]=x=>d.last_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Rr,d.last_name]])])]),C("div",null,[m[28]||(m[28]=C("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),Pn(C("input",{type:"email",id:"email","onUpdate:modelValue":m[7]||(m[7]=x=>d.email=x),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Rr,d.email]]),s.value?(Re(),$e("div",zG,Tt(s.value),1)):rn("",!0)]),C("div",null,[m[29]||(m[29]=C("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),Pn(C("input",{type:"text",id:"username","onUpdate:modelValue":m[8]||(m[8]=x=>d.username=x),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Rr,d.username]]),o.value?(Re(),$e("div",$G,Tt(o.value),1)):rn("",!0)]),C("div",null,[m[30]||(m[30]=C("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Pn(C("input",{type:"text",id:"company_name","onUpdate:modelValue":m[9]||(m[9]=x=>d.company_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Rr,d.company_name]])]),d.role==="ENTREPRISE"||d.role==="SALARIE"?(Re(),$e("div",VG,[m[32]||(m[32]=C("label",{for:"storage_quota",class:"block text-sm font-medium text-gray-700"},"Quota de stockage (MB)",-1)),C("div",UG,[Pn(C("input",{type:"number",id:"storage_quota","onUpdate:modelValue":m[10]||(m[10]=x=>d.storage_quota=x),min:"1",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Rr,d.storage_quota]]),m[31]||(m[31]=C("span",{class:"ml-2 text-sm text-gray-500"},"MB",-1))]),m[33]||(m[33]=C("p",{class:"mt-1 text-sm text-gray-500"},"Espace de stockage maximum pour les photos des notes",-1))])):rn("",!0),d.role==="ENTREPRISE"?(Re(),$e("div",HG,[m[38]||(m[38]=C("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Configuration API",-1)),C("div",WG,[m[34]||(m[34]=C("label",{for:"ecowitt_api_key",class:"block text-sm font-medium text-gray-700"},"Cl API Ecowitt",-1)),Pn(C("input",{type:"text",id:"ecowitt_api_key","onUpdate:modelValue":m[11]||(m[11]=x=>d.ecowitt_api_key=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la cl API Ecowitt"},null,512),[[Rr,d.ecowitt_api_key]]),m[35]||(m[35]=C("p",{class:"mt-1 text-sm text-gray-500"},"Cl API pour accder aux services mto Ecowitt",-1))]),C("div",GG,[m[36]||(m[36]=C("label",{for:"ecowitt_application_key",class:"block text-sm font-medium text-gray-700"},"Cl d'application Ecowitt",-1)),Pn(C("input",{type:"text",id:"ecowitt_application_key","onUpdate:modelValue":m[12]||(m[12]=x=>d.ecowitt_application_key=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la cl d'application Ecowitt"},null,512),[[Rr,d.ecowitt_application_key]]),m[37]||(m[37]=C("p",{class:"mt-1 text-sm text-gray-500"},"Cl d'application pour accder aux services mto Ecowitt",-1))])])):rn("",!0),d.id?rn("",!0):(Re(),$e("div",qG,[m[39]||(m[39]=C("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),Pn(C("input",{type:"password",id:"password","onUpdate:modelValue":m[13]||(m[13]=x=>d.password=x),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Rr,d.password]])])),d.id?rn("",!0):(Re(),$e("div",YG,[m[40]||(m[40]=C("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),Pn(C("input",{type:"password",id:"password_confirm","onUpdate:modelValue":m[14]||(m[14]=x=>c.value=x),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[Rr,c.value]]),a.value?(Re(),$e("div",KG,Tt(a.value),1)):rn("",!0)])),C("div",ZG,[C("button",{type:"button",onClick:m[15]||(m[15]=x=>v.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Annuler "),C("button",{type:"submit",disabled:i.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[i.value?(Re(),$e("span",JG,m[41]||(m[41]=[C("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):rn("",!0),si(" "+Tt(d.id?"Enregistrer":"Crer"),1)],8,XG)])],32)])])])])])]))}}),eq={class:"fixed inset-0 z-[3001] overflow-y-auto"},tq={class:"flex items-center justify-center min-h-screen w-full"},nq={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},rq={class:"p-4 md:p-6"},iq={class:"flex items-start"},sq={class:"ml-4 flex-1"},oq={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},aq={class:"mt-2"},lq={class:"text-sm text-gray-500"},uq={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},oP=Fs({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(t){return(e,n)=>(Re(),$e("div",eq,[C("div",tq,[n[3]||(n[3]=C("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[C("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),C("div",nq,[C("div",rq,[C("div",iq,[n[2]||(n[2]=C("div",{class:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[C("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),C("div",sq,[C("h3",oq,Tt(t.title),1),C("div",aq,[C("p",lq,Tt(t.message),1)])])]),C("div",uq,[C("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=r=>e.$emit("confirm"))}," Confirmer "),C("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=r=>e.$emit("cancel"))}," Annuler ")])])])])]))}}),cq={class:"h-full bg-gray-50"},hq={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},dq={class:"flex justify-between items-center mb-8"},fq={class:"text-3xl font-extrabold text-gray-900"},pq={key:0},gq={key:1},mq={key:2},vq={key:0},yq={key:1},bq={key:2},_q={class:"bg-white shadow rounded-lg mb-6 p-4"},wq={class:"space-y-4"},xq={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Lq={key:0},Sq={key:0,value:"ADMIN"},Cq={key:1,value:"ENTREPRISE"},Eq={key:1},Pq=["value"],Mq={key:2},kq=["value"],Aq={class:"w-full"},Tq={class:"bg-white shadow rounded-lg"},Dq={class:"overflow-x-auto"},Oq={class:"min-w-full divide-y divide-gray-200"},Nq={class:"bg-gray-50"},Iq={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Bq={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Rq={class:"bg-white divide-y divide-gray-200"},Fq={key:0,class:"animate-pulse"},jq={key:1},zq={class:"px-6 py-4 whitespace-nowrap"},$q={class:"flex items-center"},Vq={class:"flex-shrink-0 h-10 w-10"},Uq={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},Hq={class:"text-primary-600 font-medium"},Wq={class:"ml-4"},Gq={class:"text-sm font-medium text-gray-900"},qq={class:"text-sm text-gray-500"},Yq={class:"px-6 py-4 whitespace-nowrap"},Kq={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Zq={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Xq={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Jq={class:"px-6 py-4 whitespace-nowrap"},Qq={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},eY=["onClick"],tY=["onClick"],nY={key:0,class:"fixed inset-0 z-[3001] overflow-y-auto"},rY=Fs({__name:"UserListView",setup(t){const e=da(),n=tu(),r=xt([]),i=xt([]),s=xt([]),o=xt(!1),a=xt(!1),l=xt(null),c=xt(null),d=xt(!0),p=xt([]),v=nu({role:"",search:"",salarie:"",entreprise:""}),m=Kn(()=>e.isAdmin),x=Kn(()=>e.isEntreprise),E=Kn(()=>e.isSalarie),M=Kn(()=>m.value?r.value.filter(R=>R.role==="SALARIE"):x.value?r.value.filter(R=>{var U,V;return R.role==="SALARIE"&&((U=R.entreprise)==null?void 0:U.id)===((V=e.user)==null?void 0:V.id)}):[]),A=Kn(()=>{let R=r.value;if(x.value&&(R=R.filter(U=>{var V,re,J,_e,Le;return U.role==="SALARIE"?((V=U.entreprise)==null?void 0:V.id)===((re=e.user)==null?void 0:re.id):U.role==="VISITEUR"?((_e=(J=U.salarie)==null?void 0:J.entreprise)==null?void 0:_e.id)===((Le=e.user)==null?void 0:Le.id):!1})),E.value&&(R=R.filter(U=>{var V,re;return U.role==="VISITEUR"&&(U.salarie_id===((V=e.user)==null?void 0:V.id)||U.salarie&&U.salarie.id===((re=e.user)==null?void 0:re.id))})),(m.value||x.value)&&(v.role&&(R=R.filter(U=>U.role===v.role)),v.salarie&&(R=R.filter(U=>{var re;const V=((re=U.salarie)==null?void 0:re.id)||U.salarie_id;return(V==null?void 0:V.toString())===v.salarie.toString()})),v.entreprise&&m.value&&(R=R.filter(U=>{var V,re,J,_e,Le;return U.role==="SALARIE"?((re=(V=U.entreprise)==null?void 0:V.id)==null?void 0:re.toString())===v.entreprise.toString():U.role==="VISITEUR"?((Le=(_e=(J=U.salarie)==null?void 0:J.entreprise)==null?void 0:_e.id)==null?void 0:Le.toString())===v.entreprise.toString():!1}))),v.search){const U=v.search.toLowerCase();R=R.filter(V=>{var re,J,_e,Le;return((re=V.username)==null?void 0:re.toLowerCase().includes(U))||((J=V.email)==null?void 0:J.toLowerCase().includes(U))||((_e=V.first_name)==null?void 0:_e.toLowerCase().includes(U))||((Le=V.last_name)==null?void 0:Le.toLowerCase().includes(U))||V.company_name&&V.company_name.toLowerCase().includes(U)})}return R});fo(async()=>{await O(),await z()});async function O(){var R,U,V;d.value=!0;try{if(m.value)r.value=await e.fetchUsers();else if(x.value){const[re,J]=await Promise.all([nv({role:"SALARIE",entrepriseId:(R=e.user)==null?void 0:R.id}),nv({role:"VISITEUR",entrepriseId:(U=e.user)==null?void 0:U.id})]);r.value=[...re,...J]}else E.value&&(r.value=await nv({role:"VISITEUR",salarieId:(V=e.user)==null?void 0:V.id,includeDetails:!0}),console.log("Visiteurs rcuprs:",r.value))}catch(re){console.error("Erreur lors de la rcupration des utilisateurs:",re),n.error("Erreur lors de la rcupration des utilisateurs")}finally{d.value=!1}}async function z(){try{m.value?await Promise.all([K(),me()]):x.value&&await ne()}catch(R){console.error("Erreur lors de la rcupration des dpendances:",R)}}async function K(){var R;try{m.value?i.value=await e.fetchUsersByRole({role:"SALARIE"}):x.value&&(i.value=await e.fetchEntrepriseSalaries((R=e.user)==null?void 0:R.id))}catch(U){console.error("Erreur lors de la rcupration des salaries:",U)}}async function ne(){var R,U;if(!(!x.value||!((R=e.user)!=null&&R.id)))try{i.value=await e.fetchEntrepriseSalaries((U=e.user)==null?void 0:U.id)}catch(V){console.error("Erreur lors de la rcupration des salaries de l'entreprise:",V)}}async function me(){try{s.value=await e.fetchEnterprises()}catch(R){console.error("Erreur lors de la rcupration des entreprises:",R)}}function pe(){l.value=null,o.value=!0}function N(R){l.value={...R},o.value=!0}function j(){o.value=!1,l.value=null,p.value=[]}async function q(R){var V,re,J,_e,Le,Oe;p.value=[];const U=!!R.id;try{const Z={...R};m.value?(Z.entreprise&&typeof Z.entreprise=="object"?Z.entreprise_id=Z.entreprise.id:typeof Z.entreprise=="number"&&(Z.entreprise_id=Z.entreprise),Z.salarie&&typeof Z.salarie=="object"?Z.salarie_id=Z.salarie.id:typeof Z.salarie=="number"&&(Z.salarie_id=Z.salarie)):x.value?(Z.entreprise_id=(V=e.user)==null?void 0:V.id,Z.role==="VISITEUR"&&(Z.salarie&&typeof Z.salarie=="object"?Z.salarie_id=Z.salarie.id:typeof Z.salarie=="number"&&(Z.salarie_id=Z.salarie))):E.value&&(Z.role="VISITEUR",Z.salarie_id=(re=e.user)==null?void 0:re.id),Z.role==="SALARIE"?((J=Z.entreprise)!=null&&J.id?(Z.entreprise_id=Z.entreprise.id,delete Z.entreprise):typeof Z.entreprise=="number"&&(Z.entreprise_id=Z.entreprise,delete Z.entreprise),delete Z.salarie):Z.role==="VISITEUR"&&((_e=Z.salarie)!=null&&_e.id?(Z.salarie_id=Z.salarie.id,delete Z.salarie):typeof Z.salarie=="number"&&(Z.salarie_id=Z.salarie,delete Z.salarie),delete Z.entreprise,delete Z.entreprise_id),U?(await e.updateUser(R.id,Z),n.success("Utilisateur modifi avec succs")):(await e.createUser(Z),n.success("Utilisateur cr avec succs")),await Promise.all([O(),z()]),j()}catch(Z){console.error("Error saving user:",((Le=Z.response)==null?void 0:Le.data)||Z),p.value=U7(Z),n.error("Erreur lors de la sauvegarde de l'utilisateur");const G=((Oe=Z.response)==null?void 0:Oe.data)||{};let se="";throw typeof G=="object"&&(se=Object.entries(G).map(([ce,he])=>Array.isArray(he)?`${ce}: ${he[0]}`:`${ce}: ${he}`).filter(ce=>ce).join(`
`)),se||(se="Une erreur est survenue lors de la sauvegarde"),new Error(se)}}function I(R){c.value=R,a.value=!0}async function B(){if(c.value)try{await e.deleteUser(c.value.id),n.success("Utilisateur supprim avec succs"),await Promise.all([O(),z()]),a.value=!1,c.value=null}catch(R){throw console.error("Erreur lors de la suppression de l'utilisateur:",R),n.error("Erreur lors de la suppression de l'utilisateur"),R}}function $(R){var U,V,re,J,_e,Le,Oe,Z;return m.value?!0:x.value?R.role==="SALARIE"?((U=R.entreprise)==null?void 0:U.id)===((V=e.user)==null?void 0:V.id):R.role==="VISITEUR"?((J=(re=R.salarie)==null?void 0:re.entreprise)==null?void 0:J.id)===((_e=e.user)==null?void 0:_e.id):!1:E.value?R.role==="VISITEUR"&&(R.salarie_id===((Le=e.user)==null?void 0:Le.id)||((Oe=R.salarie)==null?void 0:Oe.id)===((Z=e.user)==null?void 0:Z.id)):!1}return(R,U)=>{var V,re,J,_e;return Re(),$e("div",cq,[C("div",hq,[C("div",dq,[C("h1",fq,[m.value?(Re(),$e("span",pq,"Gestion des utilisateurs")):x.value?(Re(),$e("span",gq,"Gestion des salaries et visiteurs")):E.value?(Re(),$e("span",mq,"Gestion des visiteurs")):rn("",!0)]),C("button",{onClick:pe,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[U[5]||(U[5]=C("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),m.value?(Re(),$e("span",vq,"Nouvel utilisateur")):x.value?(Re(),$e("span",yq,"Nouveau salarie/visiteur")):E.value?(Re(),$e("span",bq,"Nouvel visiteur")):rn("",!0)])]),C("div",_q,[C("div",wq,[C("div",xq,[m.value||x.value?(Re(),$e("div",Lq,[U[9]||(U[9]=C("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),Pn(C("select",{id:"role-filter","onUpdate:modelValue":U[0]||(U[0]=Le=>v.role=Le),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[U[6]||(U[6]=C("option",{value:""},"Tous les rles",-1)),m.value?(Re(),$e("option",Sq,"Administrateur")):rn("",!0),m.value?(Re(),$e("option",Cq,"Entreprise")):rn("",!0),U[7]||(U[7]=C("option",{value:"SALARIE"},"Salarie",-1)),U[8]||(U[8]=C("option",{value:"VISITEUR"},"Visiteur",-1))],512),[[is,v.role]])])):rn("",!0),m.value?(Re(),$e("div",Eq,[U[11]||(U[11]=C("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Pn(C("select",{id:"entreprise-filter","onUpdate:modelValue":U[1]||(U[1]=Le=>v.entreprise=Le),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[U[10]||(U[10]=C("option",{value:""},"Toutes les entreprises",-1)),(Re(!0),$e(Cn,null,pr(s.value,Le=>(Re(),$e("option",{key:Le.id,value:Le.id},Tt(er(xu)(Le)),9,Pq))),128))],512),[[is,v.entreprise]])])):rn("",!0),m.value||x.value?(Re(),$e("div",Mq,[U[13]||(U[13]=C("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),Pn(C("select",{id:"salarie-filter","onUpdate:modelValue":U[2]||(U[2]=Le=>v.salarie=Le),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[U[12]||(U[12]=C("option",{value:""},"Tous les salaries",-1)),(Re(!0),$e(Cn,null,pr(M.value,Le=>(Re(),$e("option",{key:Le.id,value:Le.id},Tt(er(xu)(Le)),9,kq))),128))],512),[[is,v.salarie]])])):rn("",!0)]),C("div",Aq,[U[14]||(U[14]=C("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Pn(C("input",{type:"text",id:"search","onUpdate:modelValue":U[3]||(U[3]=Le=>v.search=Le),placeholder:"Rechercher par nom, email, entreprise...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[Rr,v.search]])])])]),C("div",Tq,[C("div",Dq,[C("table",Oq,[C("thead",Nq,[C("tr",null,[U[15]||(U[15]=C("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur ",-1)),U[16]||(U[16]=C("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rle ",-1)),U[17]||(U[17]=C("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),m.value||x.value?(Re(),$e("th",Iq," Entreprise ")):rn("",!0),m.value||x.value?(Re(),$e("th",Bq," Salarie ")):rn("",!0),U[18]||(U[18]=C("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),U[19]||(U[19]=C("th",{scope:"col",class:"relative px-6 py-3"},[C("span",{class:"sr-only"},"Actions")],-1))])]),C("tbody",Rq,[d.value?(Re(),$e("tr",Fq,U[20]||(U[20]=[C("td",{colspan:"7",class:"py-4 px-6"},[C("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):A.value.length===0?(Re(),$e("tr",jq,U[21]||(U[21]=[C("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun utilisateur trouv ",-1)]))):rn("",!0),(Re(!0),$e(Cn,null,pr(A.value,Le=>{var Oe;return Re(),$e("tr",{key:Le.id},[C("td",zq,[C("div",$q,[C("div",Vq,[C("div",Uq,[C("span",Hq,Tt(er(W7)(Le.first_name,Le.last_name)),1)])]),C("div",Wq,[C("div",Gq,Tt(er(xu)(Le)),1),C("div",qq,Tt(Le.username),1)])])]),C("td",Yq,[C("span",{class:$i(er(Y7)())},Tt(er(q7)(Le.role)),3)]),C("td",Kq,Tt(Le.email),1),m.value||x.value?(Re(),$e("td",Zq,[Le.role==="ENTREPRISE"?(Re(),$e(Cn,{key:0},[si(" - ")],64)):Le.role==="SALARIE"?(Re(),$e(Cn,{key:1},[si(Tt(Le.entreprise?er(xu)(Le.entreprise):"Non assign"),1)],64)):Le.role==="VISITEUR"?(Re(),$e(Cn,{key:2},[si(Tt((Oe=Le.salarie)!=null&&Oe.entreprise?er(xu)(Le.salarie.entreprise):"Non assign"),1)],64)):(Re(),$e(Cn,{key:3},[si(" - ")],64))])):rn("",!0),m.value||x.value?(Re(),$e("td",Xq,[Le.role==="ENTREPRISE"||Le.role==="ADMIN"?(Re(),$e(Cn,{key:0},[si(" - ")],64)):Le.role==="SALARIE"?(Re(),$e(Cn,{key:1},[si(" - ")],64)):(Re(),$e(Cn,{key:2},[si(Tt(Le.salarie?er(xu)(Le.salarie):"Non assign"),1)],64))])):rn("",!0),C("td",Jq,[C("span",{class:$i(er(K7)(Le.is_active))},Tt(Le.is_active?"Actif":"Inactif"),3)]),C("td",Qq,[C("button",{onClick:Z=>N(Le),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,eY),$(Le)?(Re(),$e("button",{key:0,onClick:Z=>I(Le),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,tY)):rn("",!0)])])}),128))])])])])]),o.value?(Re(),$e("div",nY,[pi(QG,{user:l.value,salaries:i.value,entreprises:s.value,"is-admin":m.value,"is-entreprise":x.value,"current-salarie":E.value?(re=(V=er(e).user)==null?void 0:V.id)==null?void 0:re.toString():void 0,"current-entreprise":x.value?(_e=(J=er(e).user)==null?void 0:J.id)==null?void 0:_e.toString():void 0,"api-errors":p.value,onClose:j,onSave:q},null,8,["user","salaries","entreprises","is-admin","is-entreprise","current-salarie","current-entreprise","api-errors"])])):rn("",!0),a.value?(Re(),$a(oP,{key:1,title:"Supprimer l'utilisateur",message:"tes-vous sr de vouloir supprimer cet utilisateur ? Cette action est irrversible.",onConfirm:B,onCancel:U[4]||(U[4]=Le=>a.value=!1)})):rn("",!0)])}}}),iY={class:"h-full bg-gray-50"},sY={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},oY={class:"sm:flex sm:items-center"},aY={class:"sm:flex-auto"},lY={class:"text-2xl font-semibold text-gray-900"},uY={class:"mt-2 text-sm text-gray-700"},cY={key:0,class:"mt-8"},hY={class:"mb-6"},dY=["value"],fY={class:"mb-6"},pY={value:null},gY=["value"],mY={key:0,class:"mb-6"},vY={value:null},yY=["value"],bY={key:1,class:"mt-8"},_Y={class:"mb-6"},wY=["value"],xY={class:"mt-8"},LY={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},SY={class:"overflow-x-auto"},CY={class:"min-w-full divide-y divide-gray-300"},EY={class:"bg-gray-50"},PY={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},MY={class:"ml-2 flex-none rounded"},kY={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},AY={class:"ml-2 flex-none rounded"},TY={class:"divide-y divide-gray-200 bg-white"},DY={key:0},OY={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},NY={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},IY={class:"px-3 py-4 text-sm text-gray-900"},BY={key:0,class:"flex items-center"},RY={class:"h-8 w-8 flex-shrink-0"},FY={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},jY={class:"text-primary-700 font-medium text-sm"},zY={class:"ml-3"},$Y={class:"font-medium"},VY={key:1,class:"text-gray-500"},UY={class:"px-3 py-4 text-sm text-gray-900"},HY={key:0,class:"flex items-center"},WY={class:"h-8 w-8 flex-shrink-0"},GY={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},qY={class:"text-primary-700 font-medium text-sm"},YY={class:"ml-3"},KY={class:"font-medium"},ZY={key:1,class:"text-gray-500"},XY={class:"px-3 py-4 text-sm text-gray-900"},JY={key:0,class:"flex items-center"},QY={class:"h-8 w-8 flex-shrink-0"},eK={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},tK={class:"text-primary-700 font-medium text-sm"},nK={class:"ml-3"},rK={class:"font-medium"},iK={key:1,class:"text-gray-500"},sK={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},oK={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},aK=["onClick"],lK=["onClick"],uK=["onClick"],cK={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},hK={class:"bg-white rounded-lg p-6 max-w-md w-full"},dK={class:"flex justify-between items-center mb-4"},fK=["disabled"],pK=["disabled"],gK={key:0,class:"space-y-4"},mK={key:0},vK=["disabled"],yK=["value"],bK=["disabled"],_K=["value"],wK={key:0,class:"mt-1 text-sm text-gray-500"},xK=["disabled"],LK=["value"],SK={key:0,class:"mt-1 text-sm text-gray-500"},CK={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},EK={class:"flex"},PK={class:"ml-3"},MK={class:"text-sm font-medium text-red-800"},kK={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},AK=["disabled"],TK={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},DK=Fs({__name:"PlansView",setup(t){const e=Nm(),n=Vy(),r=da(),i=xt([]),s=xt([]),o=xt([]),a=xt([]),l=xt(!1),c=xt(!1),d=xt(!1),p=xt(null),v=xt({nom:"",description:"",client:null}),m=xt({id:0,nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),x=xt(!1),E=xt(null),M=xt(null),A=xt(null),O=xt("date_modification"),z=xt("desc"),K=xt(null),ne=Kn(()=>M.value?a.value.filter(ee=>typeof ee.salarie=="object"&&ee.salarie?ee.salarie.id===M.value:ee.salarie===M.value||ee.salarie_id===M.value):a.value),me=Kn(()=>{let ee=i.value;console.log(`
[PlansView] Filtering plans:`,ee.map(De=>({id:De.id,entreprise:De.entreprise,salarie:De.salarie,visiteur:De.visiteur}))),r.isAdmin?(K.value&&(ee=ee.filter(De=>{var Te;return typeof De.entreprise=="object"?((Te=De.entreprise)==null?void 0:Te.id)===K.value:De.entreprise===K.value})),M.value&&(ee=ee.filter(De=>{var Te;return typeof De.salarie=="object"?((Te=De.salarie)==null?void 0:Te.id)===M.value:De.salarie===M.value}),A.value&&(ee=ee.filter(De=>{var Te;return typeof De.visiteur=="object"?((Te=De.visiteur)==null?void 0:Te.id)===A.value:De.visiteur===A.value})))):r.isSalarie&&(ee=ee.filter(De=>{var Te,qe,ge;return typeof De.salarie=="object"?((Te=De.salarie)==null?void 0:Te.id)===((qe=r.user)==null?void 0:qe.id):De.salarie===((ge=r.user)==null?void 0:ge.id)}),A.value&&(ee=ee.filter(De=>{var Te;return typeof De.visiteur=="object"?((Te=De.visiteur)==null?void 0:Te.id)===A.value:De.visiteur===A.value})));const X=[...ee].sort((De,Te)=>{if(O.value==="nom")return z.value==="asc"?De.nom.localeCompare(Te.nom):Te.nom.localeCompare(De.nom);{const qe=new Date(De[O.value]).getTime(),ge=new Date(Te[O.value]).getTime();return z.value==="asc"?qe-ge:ge-qe}});return console.log("[PlansView] Final filtered and sorted plans:",X.map(De=>({id:De.id,entreprise:De.entreprise,salarie:De.salarie,visiteur:De.visiteur}))),X}),pe=Kn(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complte des plans",plans:i.value}:r.isSalarie?{title:"Plans des visiteurs",description:"Plans o vous tes assign comme salarie",plans:i.value.filter(ee=>{var X,De,Te;return typeof ee.salarie=="object"?((X=ee.salarie)==null?void 0:X.id)===((De=r.user)==null?void 0:De.id):ee.salarie===((Te=r.user)==null?void 0:Te.id)})}:{title:"Mes plans",description:"Plans qui vous sont assigns ou que vous avez crs",plans:i.value.filter(ee=>{var Te,qe,ge,Q;const X=ee.createur.id===((Te=r.user)==null?void 0:Te.id);let De=!1;return typeof ee.visiteur=="object"?De=((qe=ee.visiteur)==null?void 0:qe.id)===((ge=r.user)==null?void 0:ge.id):De=ee.visiteur===((Q=r.user)==null?void 0:Q.id),De||X})}),N=Kn(()=>K.value?s.value.filter(ee=>{var X;return typeof ee.entreprise=="object"?((X=ee.entreprise)==null?void 0:X.id)===K.value:ee.entreprise_id===K.value}):s.value),j=Kn(()=>m.value.entreprise?s.value.filter(ee=>{var X;return typeof ee.entreprise=="object"?((X=ee.entreprise)==null?void 0:X.id)===m.value.entreprise:ee.entreprise_id===m.value.entreprise}):[]),q=Kn(()=>!m.value.entreprise||!m.value.salarie?[]:a.value.filter(ee=>typeof ee.salarie=="object"&&ee.salarie?ee.salarie.id===m.value.salarie:ee.salarie===m.value.salarie||ee.salarie_id===m.value.salarie));fo(async()=>{var ee;await I(),r.isAdmin?await B():r.isSalarie&&await R(((ee=r.user)==null?void 0:ee.id)||0)});async function I(){try{const ee=await n.fetchPlansWithDetails();i.value=ee.data}catch(ee){console.error("Erreur lors du chargement des plans:",ee)}}async function B(){try{console.log("Chargement des entreprises..."),o.value=await r.fetchEnterprises(),console.log("Entreprises charges:",o.value)}catch(ee){console.error("Erreur lors du chargement des entreprises:",ee)}}async function $(ee){try{if(console.log("Chargement des salaries pour l'entreprise:",ee),ee===void 0){const X=await r.fetchUsersByRole({role:"SALARIE"});s.value=X}else s.value=await r.fetchEntrepriseSalaries(ee);console.log("Salaries chargs:",s.value)}catch(X){console.error("Erreur lors du chargement des salaries:",X)}}async function R(ee){try{console.log("Chargement des visiteurs pour le salarie:",ee);const X=await nv({role:"VISITEUR",salarieId:ee});a.value=X.map(De=>({...De,salarie_id:ee})),console.log("Visiteurs chargs:",a.value)}catch(X){console.error("Erreur lors du chargement des visiteurs:",X)}}function U(){l.value=!0,v.value={nom:"",description:"",client:null}}async function V(ee){console.log(`
[PlansView][editPlan] ====== DBUT DITION PLAN ======`),console.log("[PlansView][editPlan] Plan reu:",{id:ee.id,nom:ee.nom,entreprise:ee.entreprise,salarie:ee.salarie,visiteur:ee.visiteur});try{console.log("[PlansView][editPlan] Dfinition du plan courant dans le store..."),n.setCurrentPlan(ee),console.log("[PlansView][editPlan] Sauvegarde de l'ID dans localStorage:",ee.id),localStorage.setItem("lastPlanId",ee.id.toString()),console.log("[PlansView][editPlan] Redirection vers la vue carte..."),await e.push("/"),console.log(`[PlansView][editPlan] ====== FIN DITION PLAN ======
`)}catch(X){console.error("[PlansView][editPlan] ERREUR:",X),X instanceof Error&&console.error("[PlansView][editPlan] Stack trace:",X.stack),alert("Une erreur est survenue lors du chargement du plan")}}async function re(ee){ee!=null&&ee.id&&(p.value=ee,d.value=!0)}async function J(){var ee,X;if((ee=p.value)!=null&&ee.id)try{await n.deletePlan(p.value.id),await I(),((X=n.currentPlan)==null?void 0:X.id)===p.value.id&&n.clearCurrentPlan()}catch(De){console.error("Erreur lors de la suppression du plan:",De),alert("Une erreur est survenue lors de la suppression du plan")}finally{d.value=!1,p.value=null}}function _e(){d.value=!1,p.value=null}function Le(ee){return new Date(ee).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Oe(ee){if(!ee)return"";const X=ee.first_name||"",De=ee.last_name||"";return(X.charAt(0)+De.charAt(0)).toUpperCase()}async function Z(ee){x.value=!0,E.value=null;try{r.isAdmin&&!o.value.length&&await B();const X=typeof ee.entreprise=="object"&&ee.entreprise?ee.entreprise.id:ee.entreprise,De=typeof ee.salarie=="object"&&ee.salarie?ee.salarie.id:ee.salarie,Te=typeof ee.visiteur=="object"&&ee.visiteur?ee.visiteur.id:ee.visiteur;m.value={id:ee.id,nom:ee.nom,description:ee.description,entreprise:X||null,salarie:De||null,visiteur:Te||null},X&&await $(X),De&&await R(De),c.value=!0}catch(X){console.error("Erreur lors de l'ouverture du modal:",X),E.value="Erreur lors du chargement des donnes"}finally{x.value=!1}}async function G(){var ee,X,De,Te,qe;E.value=null,x.value=!0;try{if(!m.value.nom.trim())throw new Error("Le nom du plan est requis");if(m.value.visiteur&&!m.value.salarie)throw new Error("Un salarie doit tre slectionn pour assigner un visiteur");if(m.value.salarie&&!m.value.entreprise)throw new Error("Une entreprise doit tre slectionne pour assigner un salarie");console.log("Donnes envoyes pour la mise  jour:",{id:m.value.id,nom:m.value.nom.trim(),description:m.value.description.trim(),entreprise_id:m.value.entreprise,salarie_id:m.value.salarie,visiteur_id:m.value.visiteur});const ge=await n.updatePlanDetails(m.value.id,{nom:m.value.nom.trim(),description:m.value.description.trim(),entreprise_id:m.value.entreprise,salarie_id:m.value.salarie,visiteur_id:m.value.visiteur});console.log("Rponse de la mise  jour:",ge),ge&&(c.value=!1,await I())}catch(ge){if(console.error("Erreur lors de la mise  jour du plan:",ge),(X=(ee=ge.response)==null?void 0:ee.data)!=null&&X.detail)E.value=ge.response.data.detail;else if((Te=(De=ge.response)==null?void 0:De.data)!=null&&Te.non_field_errors)E.value=ge.response.data.non_field_errors[0];else if((qe=ge.response)!=null&&qe.data){const Q=Object.entries(ge.response.data).map(([ie,fe])=>`${ie}: ${Array.isArray(fe)?fe[0]:fe}`);E.value=Q.join(`
`)}else E.value=ge.message||"Une erreur est survenue lors de la mise  jour du plan"}finally{x.value=!1}}Di(()=>K.value,async ee=>{M.value=null,A.value=null,ee?await $(ee):await $()}),Di(()=>M.value,async ee=>{A.value=null,ee&&await R(ee)}),Di(()=>m.value.entreprise,async ee=>{ee===null?(m.value.salarie=null,m.value.visiteur=null):await $(ee)}),Di(()=>m.value.salarie,async ee=>{m.value.visiteur=null,ee&&await R(ee)});function se(ee){var qe,ge,Q;const X=r.user;if(!X)return!1;if(X.user_type==="admin")return!0;if(X.user_type==="entreprise")return typeof ee.entreprise=="object"?((qe=ee.entreprise)==null?void 0:qe.id)===X.id:ee.entreprise===X.id;if(X.user_type==="salarie")return typeof ee.salarie=="object"?((ge=ee.salarie)==null?void 0:ge.id)===X.id:ee.salarie===X.id;const De=ee.createur.id===X.id;let Te=!1;return typeof ee.visiteur=="object"?Te=((Q=ee.visiteur)==null?void 0:Q.id)===X.id:Te=ee.visiteur===X.id,Te||De}async function ce(ee){await I(),localStorage.setItem("lastPlanId",ee.toString()),console.log(`Plan ${ee} cr et dfini comme plan actif`),e.push("/")}function he(ee){O.value===ee?z.value=z.value==="asc"?"desc":"asc":(O.value=ee,z.value="desc")}function ve(ee){return ee?xu(ee):""}return(ee,X)=>{var De;return Re(),$e("div",iY,[C("div",sY,[C("div",oY,[C("div",aY,[C("h1",lY,Tt(pe.value.title),1),C("p",uY,Tt(pe.value.description),1)]),C("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[C("button",{onClick:U,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),er(r).isAdmin?(Re(),$e("div",cY,[C("div",hY,[X[15]||(X[15]=C("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par entreprise",-1)),Pn(C("select",{id:"entreprise-filter","onUpdate:modelValue":X[0]||(X[0]=Te=>K.value=Te),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[X[14]||(X[14]=C("option",{value:null},"Toutes les entreprises",-1)),(Re(!0),$e(Cn,null,pr(o.value,Te=>(Re(),$e("option",{key:Te.id,value:Te.id},Tt(ve(Te)),9,dY))),128))],512),[[is,K.value]])]),C("div",fY,[X[16]||(X[16]=C("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par salarie",-1)),Pn(C("select",{id:"salarie-filter","onUpdate:modelValue":X[1]||(X[1]=Te=>M.value=Te),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[C("option",pY,Tt(N.value.length?"Tous les salaries":"Aucun salarie disponible"),1),(Re(!0),$e(Cn,null,pr(N.value,Te=>(Re(),$e("option",{key:Te.id,value:Te.id},Tt(ve(Te)),9,gY))),128))],512),[[is,M.value]])]),M.value?(Re(),$e("div",mY,[X[17]||(X[17]=C("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),Pn(C("select",{id:"visiteur-filter","onUpdate:modelValue":X[2]||(X[2]=Te=>A.value=Te),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[C("option",vY,Tt(ne.value.length?"Tous les visiteurs":"Aucun visiteur disponible"),1),(Re(!0),$e(Cn,null,pr(ne.value,Te=>(Re(),$e("option",{key:Te.id,value:Te.id},Tt(ve(Te)),9,yY))),128))],512),[[is,A.value]])])):rn("",!0)])):er(r).isSalarie?(Re(),$e("div",bY,[C("div",_Y,[X[19]||(X[19]=C("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),Pn(C("select",{id:"visiteur-filter","onUpdate:modelValue":X[3]||(X[3]=Te=>A.value=Te),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[X[18]||(X[18]=C("option",{value:null},"Tous les visiteurs",-1)),(Re(!0),$e(Cn,null,pr(a.value,Te=>(Re(),$e("option",{key:Te.id,value:Te.id},Tt(ve(Te)),9,wY))),128))],512),[[is,A.value]])])])):rn("",!0),C("div",xY,[C("div",LY,[C("div",SY,[C("table",CY,[C("thead",EY,[C("tr",null,[C("th",PY,[C("button",{onClick:X[4]||(X[4]=Te=>he("nom")),class:"group inline-flex items-center"},[X[21]||(X[21]=si(" Nom ")),C("span",MY,[(Re(),$e("svg",{class:$i(["h-5 w-5",{"text-gray-900":O.value==="nom","text-gray-400":O.value!=="nom","rotate-180":O.value==="nom"&&z.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},X[20]||(X[20]=[C("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),X[24]||(X[24]=C("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),X[25]||(X[25]=C("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise ",-1)),X[26]||(X[26]=C("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Salarie ",-1)),X[27]||(X[27]=C("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Visiteur ",-1)),C("th",kY,[C("button",{onClick:X[5]||(X[5]=Te=>he("date_modification")),class:"group inline-flex items-center"},[X[23]||(X[23]=si(" Dernire modification ")),C("span",AY,[(Re(),$e("svg",{class:$i(["h-5 w-5",{"text-gray-900":O.value==="date_modification","text-gray-400":O.value!=="date_modification","rotate-180":O.value==="date_modification"&&z.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},X[22]||(X[22]=[C("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),X[28]||(X[28]=C("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[C("span",{class:"sr-only"},"Actions")],-1))])]),C("tbody",TY,[me.value.length===0?(Re(),$e("tr",DY,X[29]||(X[29]=[C("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):rn("",!0),(Re(!0),$e(Cn,null,pr(me.value,Te=>(Re(),$e("tr",{key:Te.id,class:"hover:bg-gray-50"},[C("td",OY,Tt(Te.nom),1),C("td",NY,Tt(Te.description||"-"),1),C("td",IY,[Te.entreprise&&typeof Te.entreprise=="object"?(Re(),$e("div",BY,[C("div",RY,[C("div",FY,[C("span",jY,Tt(Oe(Te.entreprise)),1)])]),C("div",zY,[C("div",$Y,Tt(er(xu)(Te.entreprise)),1)])])):(Re(),$e("div",VY," Non assign "))]),C("td",UY,[Te.salarie&&typeof Te.salarie=="object"?(Re(),$e("div",HY,[C("div",WY,[C("div",GY,[C("span",qY,Tt(Oe(Te.salarie)),1)])]),C("div",YY,[C("div",KY,Tt(er(xu)(Te.salarie)),1)])])):(Re(),$e("div",ZY," Non assign "))]),C("td",XY,[Te.visiteur&&typeof Te.visiteur=="object"?(Re(),$e("div",JY,[C("div",QY,[C("div",eK,[C("span",tK,Tt(Oe(Te.visiteur)),1)])]),C("div",nK,[C("div",rK,Tt(er(xu)(Te.visiteur)),1)])])):(Re(),$e("div",iK," Non assign "))]),C("td",sK,Tt(Le(Te.date_modification)),1),C("td",oK,[C("button",{onClick:qe=>V(Te),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,aK),C("button",{onClick:qe=>Z(Te),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,lK),se(Te)?(Re(),$e("button",{key:0,onClick:qe=>re(Te),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,uK)):rn("",!0)])]))),128))])])])])]),pi(FE,{modelValue:l.value,"onUpdate:modelValue":X[6]||(X[6]=Te=>l.value=Te),salaries:s.value,clients:a.value,onCreated:ce},null,8,["modelValue","salaries","clients"]),c.value?(Re(),$e("div",cK,[C("div",hK,[C("div",dK,[X[31]||(X[31]=C("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),C("button",{onClick:X[7]||(X[7]=Te=>c.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},X[30]||(X[30]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("form",{onSubmit:Bh(G,["prevent"]),class:"space-y-4"},[C("div",null,[X[32]||(X[32]=C("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),Pn(C("input",{type:"text",id:"edit-nom","onUpdate:modelValue":X[8]||(X[8]=Te=>m.value.nom=Te),disabled:x.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",required:""},null,8,fK),[[Rr,m.value.nom]])]),C("div",null,[X[33]||(X[33]=C("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),Pn(C("textarea",{id:"edit-description","onUpdate:modelValue":X[9]||(X[9]=Te=>m.value.description=Te),disabled:x.value,rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,pK),[[Rr,m.value.description]])]),er(r).isAdmin||((De=er(r).user)==null?void 0:De.user_type)==="entreprise"?(Re(),$e("div",gK,[er(r).isAdmin?(Re(),$e("div",mK,[X[35]||(X[35]=C("label",{for:"edit-entreprise",class:"block text-sm font-medium text-gray-700"}," Entreprise ",-1)),Pn(C("select",{id:"edit-entreprise","onUpdate:modelValue":X[10]||(X[10]=Te=>m.value.entreprise=Te),disabled:x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[X[34]||(X[34]=C("option",{value:null},"Slectionner une entreprise",-1)),(Re(!0),$e(Cn,null,pr(o.value,Te=>(Re(),$e("option",{key:Te.id,value:Te.id},Tt(ve(Te)),9,yK))),128))],8,vK),[[is,m.value.entreprise]])])):rn("",!0),C("div",null,[X[37]||(X[37]=C("label",{for:"edit-salarie",class:"block text-sm font-medium text-gray-700"}," Salarie ",-1)),Pn(C("select",{id:"edit-salarie","onUpdate:modelValue":X[11]||(X[11]=Te=>m.value.salarie=Te),disabled:er(r).isAdmin&&!m.value.entreprise||x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[X[36]||(X[36]=C("option",{value:null},"Slectionner un salarie",-1)),(Re(!0),$e(Cn,null,pr(j.value,Te=>(Re(),$e("option",{key:Te.id,value:Te.id},Tt(ve(Te)),9,_K))),128))],8,bK),[[is,m.value.salarie]]),er(r).isAdmin&&!m.value.entreprise?(Re(),$e("p",wK," Veuillez d'abord slectionner une entreprise ")):rn("",!0)]),C("div",null,[X[39]||(X[39]=C("label",{for:"edit-visiteur",class:"block text-sm font-medium text-gray-700"}," Visiteur ",-1)),Pn(C("select",{id:"edit-visiteur","onUpdate:modelValue":X[12]||(X[12]=Te=>m.value.visiteur=Te),disabled:!m.value.salarie||x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[X[38]||(X[38]=C("option",{value:null},"Slectionner un visiteur",-1)),(Re(!0),$e(Cn,null,pr(q.value,Te=>(Re(),$e("option",{key:Te.id,value:Te.id},Tt(ve(Te)),9,LK))),128))],8,xK),[[is,m.value.visiteur]]),m.value.salarie?rn("",!0):(Re(),$e("p",SK," Veuillez d'abord slectionner un salarie "))])])):rn("",!0),E.value?(Re(),$e("div",CK,[C("div",EK,[X[40]||(X[40]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",PK,[C("p",MK,Tt(E.value),1)])])])):rn("",!0),C("div",kK,[C("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:X[13]||(X[13]=Te=>c.value=!1)}," Annuler "),C("button",{type:"submit",disabled:x.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[x.value?(Re(),$e("svg",TK,X[41]||(X[41]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):rn("",!0),si(" "+Tt(x.value?"Enregistrement...":"Enregistrer"),1)],8,AK)])],32)])])):rn("",!0),d.value?(Re(),$a(oP,{key:3,title:"Supprimer le plan",message:"tes-vous sr de vouloir supprimer ce plan ? Cette action est irrversible.",onConfirm:J,onCancel:_e})):rn("",!0)])])}}});var aP={exports:{}};const OK=_E(rI);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function j5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function th(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j5(Object(n),!0).forEach(function(r){NK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cv(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?cv=function(e){return typeof e}:cv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cv(t)}function NK(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zu(){return Zu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zu.apply(this,arguments)}function IK(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function BK(t,e){if(t==null)return{};var n=IK(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function RK(t){return FK(t)||jK(t)||zK(t)||$K()}function FK(t){if(Array.isArray(t))return Bb(t)}function jK(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zK(t,e){if(t){if(typeof t=="string")return Bb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bb(t,e)}}function Bb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $K(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var VK="1.14.0";function Oh(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var zh=Oh(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Im=Oh(/Edge/i),z5=Oh(/firefox/i),qg=Oh(/safari/i)&&!Oh(/chrome/i)&&!Oh(/android/i),lP=Oh(/iP(ad|od|hone)/i),UK=Oh(/chrome/i)&&Oh(/android/i),uP={capture:!1,passive:!1};function Ti(t,e,n){t.addEventListener(e,n,!zh&&uP)}function bi(t,e,n){t.removeEventListener(e,n,!zh&&uP)}function Xv(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function HK(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function mc(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Xv(t,e):Xv(t,e))||r&&t===n)return t;if(t===n)break}while(t=HK(t))}return null}var $5=/\s+/g;function uo(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace($5," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace($5," ")}}function lr(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function gf(t,e){var n="";if(typeof t=="string")n=t;else do{var r=lr(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function cP(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function Jc(){var t=document.scrollingElement;return t||document.documentElement}function Ks(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,c,d,p;if(t!==window&&t.parentNode&&t!==Jc()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,d=s.height,p=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,p=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!zh))do if(i&&i.getBoundingClientRect&&(lr(i,"transform")!=="none"||n&&lr(i,"position")!=="static")){var v=i.getBoundingClientRect();o-=v.top+parseInt(lr(i,"border-top-width")),a-=v.left+parseInt(lr(i,"border-left-width")),l=o+s.height,c=a+s.width;break}while(i=i.parentNode);if(r&&t!==window){var m=gf(i||t),x=m&&m.a,E=m&&m.d;m&&(o/=E,a/=x,p/=x,d/=E,l=o+d,c=a+p)}return{top:o,left:a,bottom:l,right:c,width:p,height:d}}}function V5(t,e,n){for(var r=dd(t,!0),i=Ks(t)[e];r;){var s=Ks(r)[n],o=void 0;if(o=i>=s,!o)return r;if(r===Jc())break;r=dd(r,!1)}return!1}function Dp(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Or.ghost&&(r||o[s]!==Or.dragged)&&mc(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function W_(t,e){for(var n=t.lastElementChild;n&&(n===Or.ghost||lr(n,"display")==="none"||e&&!Xv(n,e));)n=n.previousElementSibling;return n||null}function Mo(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Or.clone&&(!e||Xv(t,e))&&n++;return n}function U5(t){var e=0,n=0,r=Jc();if(t)do{var i=gf(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function WK(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function dd(t,e){if(!t||!t.getBoundingClientRect)return Jc();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=lr(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Jc();if(r||e)return n;r=!0}}while(n=n.parentNode);return Jc()}function GK(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function c2(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Yg;function hP(t,e){return function(){if(!Yg){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),Yg=setTimeout(function(){Yg=void 0},e)}}}function qK(){clearTimeout(Yg),Yg=void 0}function dP(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function G_(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function H5(t,e){lr(t,"position","absolute"),lr(t,"top",e.top),lr(t,"left",e.left),lr(t,"width",e.width),lr(t,"height",e.height)}function h2(t){lr(t,"position",""),lr(t,"top",""),lr(t,"left",""),lr(t,"width",""),lr(t,"height","")}var cl="Sortable"+new Date().getTime();function YK(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(lr(i,"display")==="none"||i===Or.ghost)){t.push({target:i,rect:Ks(i)});var s=th({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=gf(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(WK(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,c=a.target,d=c.fromRect,p=Ks(c),v=c.prevFromRect,m=c.prevToRect,x=a.rect,E=gf(c,!0);E&&(p.top-=E.f,p.left-=E.e),c.toRect=p,c.thisAnimationDuration&&c2(v,p)&&!c2(d,p)&&(x.top-p.top)/(x.left-p.left)===(d.top-p.top)/(d.left-p.left)&&(l=ZK(x,v,m,i.options)),c2(p,d)||(c.prevFromRect=d,c.prevToRect=p,l||(l=i.options.animation),i.animate(c,x,p,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){lr(r,"transition",""),lr(r,"transform","");var a=gf(this.el),l=a&&a.a,c=a&&a.d,d=(i.left-s.left)/(l||1),p=(i.top-s.top)/(c||1);r.animatingX=!!d,r.animatingY=!!p,lr(r,"transform","translate3d("+d+"px,"+p+"px,0)"),this.forRepaintDummy=KK(r),lr(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),lr(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){lr(r,"transition",""),lr(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function KK(t){return t.offsetWidth}function ZK(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var Xf=[],d2={initializeByDefault:!0},Bm={mount:function(e){for(var n in d2)d2.hasOwnProperty(n)&&!(n in e)&&(e[n]=d2[n]);Xf.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Xf.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";Xf.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](th({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](th({sortable:n},r)))})},initializePlugins:function(e,n,r,i){Xf.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,Zu(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return Xf.forEach(function(i){typeof i.eventProperties=="function"&&Zu(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return Xf.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function Sg(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,d=t.oldDraggableIndex,p=t.newDraggableIndex,v=t.originalEvent,m=t.putSortable,x=t.extraEventProperties;if(e=e||n&&n[cl],!!e){var E,M=e.options,A="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!zh&&!Im?E=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(E=document.createEvent("Event"),E.initEvent(r,!0,!0)),E.to=o||n,E.from=a||n,E.item=i||n,E.clone=s,E.oldIndex=l,E.newIndex=c,E.oldDraggableIndex=d,E.newDraggableIndex=p,E.originalEvent=v,E.pullMode=m?m.lastPutMode:void 0;var O=th(th({},x),Bm.getEventProperties(r,e));for(var z in O)E[z]=O[z];n&&n.dispatchEvent(E),M[A]&&M[A].call(e,E)}}var XK=["evt"],Hl=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=BK(r,XK);Bm.pluginEvent.bind(Or)(e,n,th({dragEl:jn,parentEl:Co,ghostEl:ri,rootEl:Ys,nextEl:tf,lastDownEl:hv,cloneEl:Eo,cloneHidden:ud,dragStarted:Cg,putSortable:ja,activeSortable:Or.active,originalEvent:i,oldIndex:dp,oldDraggableIndex:Kg,newIndex:bu,newDraggableIndex:ld,hideGhostForTarget:mP,unhideGhostForTarget:vP,cloneNowHidden:function(){ud=!0},cloneNowShown:function(){ud=!1},dispatchSortableEvent:function(a){Ll({sortable:n,name:a,originalEvent:i})}},s))};function Ll(t){Sg(th({putSortable:ja,cloneEl:Eo,targetEl:jn,rootEl:Ys,oldIndex:dp,oldDraggableIndex:Kg,newIndex:bu,newDraggableIndex:ld},t))}var jn,Co,ri,Ys,tf,hv,Eo,ud,dp,bu,Kg,ld,P0,ja,up=!1,Jv=!1,Qv=[],Yd,dc,f2,p2,W5,G5,Cg,Jf,Zg,Xg=!1,M0=!1,dv,il,g2=[],Rb=!1,ey=[],Gy=typeof document<"u",k0=lP,q5=Im||zh?"cssFloat":"float",JK=Gy&&!UK&&!lP&&"draggable"in document.createElement("div"),fP=function(){if(Gy){if(zh)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),pP=function(e,n){var r=lr(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=Dp(e,0,n),o=Dp(e,1,n),a=s&&lr(s),l=o&&lr(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Ks(s).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Ks(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var p=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===p)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[q5]==="none"||o&&r[q5]==="none"&&c+d>i)?"vertical":"horizontal"},QK=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?n.left:n.top,l=r?n.right:n.bottom,c=r?n.width:n.height;return i===a||s===l||i+o/2===a+c/2},eZ=function(e,n){var r;return Qv.some(function(i){var s=i[cl].options.emptyInsertThreshold;if(!(!s||W_(i))){var o=Ks(i),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},gP=function(e){function n(s,o){return function(a,l,c,d){var p=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||p))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,d),o)(a,l,c,d);var v=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===v||s.join&&s.indexOf(v)>-1}}var r={},i=e.group;(!i||cv(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},mP=function(){!fP&&ri&&lr(ri,"display","none")},vP=function(){!fP&&ri&&lr(ri,"display","")};Gy&&document.addEventListener("click",function(t){if(Jv)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Jv=!1,!1},!0);var Kd=function(e){if(jn){e=e.touches?e.touches[0]:e;var n=eZ(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[cl]._onDragOver(r)}}},tZ=function(e){jn&&jn.parentNode[cl]._isOutsideThisEl(e.target)};function Or(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Zu({},e),t[cl]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return pP(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Or.supportPointer!==!1&&"PointerEvent"in window&&!qg,emptyInsertThreshold:5};Bm.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);gP(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:JK,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Ti(t,"pointerdown",this._onTapStart):(Ti(t,"mousedown",this._onTapStart),Ti(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ti(t,"dragover",this),Ti(t,"dragenter",this)),Qv.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Zu(this,YK())}Or.prototype={constructor:Or,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Jf=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,jn):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,d=i.filter;if(uZ(r),!jn&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&qg&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=mc(l,i.draggable,r,!1),!(l&&l.animated)&&hv!==l)){if(dp=Mo(l),Kg=Mo(l,i.draggable),typeof d=="function"){if(d.call(this,e,l,this)){Ll({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Hl("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(p){if(p=mc(c,p.trim(),r,!1),p)return Ll({sortable:n,rootEl:p,name:"filter",targetEl:l,fromEl:r,toEl:r}),Hl("filter",n,{evt:e}),!0}),d)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!mc(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!jn&&r.parentNode===s){var c=Ks(r);if(Ys=s,jn=r,Co=jn.parentNode,tf=jn.nextSibling,hv=r,P0=o.group,Or.dragged=jn,Yd={target:jn,clientX:(n||e).clientX,clientY:(n||e).clientY},W5=Yd.clientX-c.left,G5=Yd.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,jn.style["will-change"]="all",l=function(){if(Hl("delayEnded",i,{evt:e}),Or.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!z5&&i.nativeDraggable&&(jn.draggable=!0),i._triggerDragStart(e,n),Ll({sortable:i,name:"choose",originalEvent:e}),uo(jn,o.chosenClass,!0)},o.ignore.split(",").forEach(function(d){cP(jn,d.trim(),m2)}),Ti(a,"dragover",Kd),Ti(a,"mousemove",Kd),Ti(a,"touchmove",Kd),Ti(a,"mouseup",i._onDrop),Ti(a,"touchend",i._onDrop),Ti(a,"touchcancel",i._onDrop),z5&&this.nativeDraggable&&(this.options.touchStartThreshold=4,jn.draggable=!0),Hl("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Im||zh))){if(Or.eventCanceled){this._onDrop();return}Ti(a,"mouseup",i._disableDelayedDrag),Ti(a,"touchend",i._disableDelayedDrag),Ti(a,"touchcancel",i._disableDelayedDrag),Ti(a,"mousemove",i._delayedDragTouchMoveHandler),Ti(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&Ti(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){jn&&m2(jn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;bi(e,"mouseup",this._disableDelayedDrag),bi(e,"touchend",this._disableDelayedDrag),bi(e,"touchcancel",this._disableDelayedDrag),bi(e,"mousemove",this._delayedDragTouchMoveHandler),bi(e,"touchmove",this._delayedDragTouchMoveHandler),bi(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?Ti(document,"pointermove",this._onTouchMove):n?Ti(document,"touchmove",this._onTouchMove):Ti(document,"mousemove",this._onTouchMove):(Ti(jn,"dragend",this),Ti(Ys,"dragstart",this._onDragStart));try{document.selection?fv(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(up=!1,Ys&&jn){Hl("dragStarted",this,{evt:n}),this.nativeDraggable&&Ti(document,"dragover",tZ);var r=this.options;!e&&uo(jn,r.dragClass,!1),uo(jn,r.ghostClass,!0),Or.active=this,e&&this._appendGhost(),Ll({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(dc){this._lastX=dc.clientX,this._lastY=dc.clientY,mP();for(var e=document.elementFromPoint(dc.clientX,dc.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(dc.clientX,dc.clientY),e!==n);)n=e;if(jn.parentNode[cl]._isOutsideThisEl(e),n)do{if(n[cl]){var r=void 0;if(r=n[cl]._onDragOver({clientX:dc.clientX,clientY:dc.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);vP()}},_onTouchMove:function(e){if(Yd){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=ri&&gf(ri,!0),a=ri&&o&&o.a,l=ri&&o&&o.d,c=k0&&il&&U5(il),d=(s.clientX-Yd.clientX+i.x)/(a||1)+(c?c[0]-g2[0]:0)/(a||1),p=(s.clientY-Yd.clientY+i.y)/(l||1)+(c?c[1]-g2[1]:0)/(l||1);if(!Or.active&&!up){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(ri){o?(o.e+=d-(f2||0),o.f+=p-(p2||0)):o={a:1,b:0,c:0,d:1,e:d,f:p};var v="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");lr(ri,"webkitTransform",v),lr(ri,"mozTransform",v),lr(ri,"msTransform",v),lr(ri,"transform",v),f2=d,p2=p,dc=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ri){var e=this.options.fallbackOnBody?document.body:Ys,n=Ks(jn,!0,k0,!0,e),r=this.options;if(k0){for(il=e;lr(il,"position")==="static"&&lr(il,"transform")==="none"&&il!==document;)il=il.parentNode;il!==document.body&&il!==document.documentElement?(il===document&&(il=Jc()),n.top+=il.scrollTop,n.left+=il.scrollLeft):il=Jc(),g2=U5(il)}ri=jn.cloneNode(!0),uo(ri,r.ghostClass,!1),uo(ri,r.fallbackClass,!0),uo(ri,r.dragClass,!0),lr(ri,"transition",""),lr(ri,"transform",""),lr(ri,"box-sizing","border-box"),lr(ri,"margin",0),lr(ri,"top",n.top),lr(ri,"left",n.left),lr(ri,"width",n.width),lr(ri,"height",n.height),lr(ri,"opacity","0.8"),lr(ri,"position",k0?"absolute":"fixed"),lr(ri,"zIndex","100000"),lr(ri,"pointerEvents","none"),Or.ghost=ri,e.appendChild(ri),lr(ri,"transform-origin",W5/parseInt(ri.style.width)*100+"% "+G5/parseInt(ri.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(Hl("dragStart",this,{evt:e}),Or.eventCanceled){this._onDrop();return}Hl("setupClone",this),Or.eventCanceled||(Eo=G_(jn),Eo.draggable=!1,Eo.style["will-change"]="",this._hideClone(),uo(Eo,this.options.chosenClass,!1),Or.clone=Eo),r.cloneId=fv(function(){Hl("clone",r),!Or.eventCanceled&&(r.options.removeCloneOnHide||Ys.insertBefore(Eo,jn),r._hideClone(),Ll({sortable:r,name:"clone"}))}),!n&&uo(jn,s.dragClass,!0),n?(Jv=!0,r._loopId=setInterval(r._emulateDragOver,50)):(bi(document,"mouseup",r._onDrop),bi(document,"touchend",r._onDrop),bi(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,jn)),Ti(document,"drop",r),lr(jn,"transform","translateZ(0)")),up=!0,r._dragStartId=fv(r._dragStarted.bind(r,n,e)),Ti(document,"selectstart",r),Cg=!0,qg&&lr(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,a=this.options,l=a.group,c=Or.active,d=P0===l,p=a.sort,v=ja||c,m,x=this,E=!1;if(Rb)return;function M(J,_e){Hl(J,x,th({evt:e,isOwner:d,axis:m?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:p,fromSortable:v,target:r,completed:O,onMove:function(Oe,Z){return A0(Ys,n,jn,i,Oe,Ks(Oe),e,Z)},changed:z},_e))}function A(){M("dragOverAnimationCapture"),x.captureAnimationState(),x!==v&&v.captureAnimationState()}function O(J){return M("dragOverCompleted",{insertion:J}),J&&(d?c._hideClone():c._showClone(x),x!==v&&(uo(jn,ja?ja.options.ghostClass:c.options.ghostClass,!1),uo(jn,a.ghostClass,!0)),ja!==x&&x!==Or.active?ja=x:x===Or.active&&ja&&(ja=null),v===x&&(x._ignoreWhileAnimating=r),x.animateAll(function(){M("dragOverAnimationComplete"),x._ignoreWhileAnimating=null}),x!==v&&(v.animateAll(),v._ignoreWhileAnimating=null)),(r===jn&&!jn.animated||r===n&&!r.animated)&&(Jf=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(jn.parentNode[cl]._isOutsideThisEl(e.target),!J&&Kd(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),E=!0}function z(){bu=Mo(jn),ld=Mo(jn,a.draggable),Ll({sortable:x,name:"change",toEl:n,newIndex:bu,newDraggableIndex:ld,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=mc(r,a.draggable,n,!0),M("dragOver"),Or.eventCanceled)return E;if(jn.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||x._ignoreWhileAnimating===r)return O(!1);if(Jv=!1,c&&!a.disabled&&(d?p||(o=Co!==Ys):ja===this||(this.lastPutMode=P0.checkPull(this,c,jn,e))&&l.checkPut(this,c,jn,e))){if(m=this._getDirection(e,r)==="vertical",i=Ks(jn),M("dragOverValid"),Or.eventCanceled)return E;if(o)return Co=Ys,A(),this._hideClone(),M("revert"),Or.eventCanceled||(tf?Ys.insertBefore(jn,tf):Ys.appendChild(jn)),O(!0);var K=W_(n,a.draggable);if(!K||sZ(e,m,this)&&!K.animated){if(K===jn)return O(!1);if(K&&n===e.target&&(r=K),r&&(s=Ks(r)),A0(Ys,n,jn,i,r,s,e,!!r)!==!1)return A(),n.appendChild(jn),Co=n,z(),O(!0)}else if(K&&iZ(e,m,this)){var ne=Dp(n,0,a,!0);if(ne===jn)return O(!1);if(r=ne,s=Ks(r),A0(Ys,n,jn,i,r,s,e,!1)!==!1)return A(),n.insertBefore(jn,ne),Co=n,z(),O(!0)}else if(r.parentNode===n){s=Ks(r);var me=0,pe,N=jn.parentNode!==n,j=!QK(jn.animated&&jn.toRect||i,r.animated&&r.toRect||s,m),q=m?"top":"left",I=V5(r,"top","top")||V5(jn,"top","top"),B=I?I.scrollTop:void 0;Jf!==r&&(pe=s[q],Xg=!1,M0=!j&&a.invertSwap||N),me=oZ(e,r,s,m,j?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,M0,Jf===r);var $;if(me!==0){var R=Mo(jn);do R-=me,$=Co.children[R];while($&&(lr($,"display")==="none"||$===ri))}if(me===0||$===r)return O(!1);Jf=r,Zg=me;var U=r.nextElementSibling,V=!1;V=me===1;var re=A0(Ys,n,jn,i,r,s,e,V);if(re!==!1)return(re===1||re===-1)&&(V=re===1),Rb=!0,setTimeout(rZ,30),A(),V&&!U?n.appendChild(jn):r.parentNode.insertBefore(jn,V?U:r),I&&dP(I,0,B-I.scrollTop),Co=jn.parentNode,pe!==void 0&&!M0&&(dv=Math.abs(pe-Ks(r)[q])),z(),O(!0)}if(n.contains(jn))return O(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){bi(document,"mousemove",this._onTouchMove),bi(document,"touchmove",this._onTouchMove),bi(document,"pointermove",this._onTouchMove),bi(document,"dragover",Kd),bi(document,"mousemove",Kd),bi(document,"touchmove",Kd)},_offUpEvents:function(){var e=this.el.ownerDocument;bi(e,"mouseup",this._onDrop),bi(e,"touchend",this._onDrop),bi(e,"pointerup",this._onDrop),bi(e,"touchcancel",this._onDrop),bi(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(bu=Mo(jn),ld=Mo(jn,r.draggable),Hl("drop",this,{evt:e}),Co=jn&&jn.parentNode,bu=Mo(jn),ld=Mo(jn,r.draggable),Or.eventCanceled){this._nulling();return}up=!1,M0=!1,Xg=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Fb(this.cloneId),Fb(this._dragStartId),this.nativeDraggable&&(bi(document,"drop",this),bi(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),qg&&lr(document.body,"user-select",""),lr(jn,"transform",""),e&&(Cg&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),ri&&ri.parentNode&&ri.parentNode.removeChild(ri),(Ys===Co||ja&&ja.lastPutMode!=="clone")&&Eo&&Eo.parentNode&&Eo.parentNode.removeChild(Eo),jn&&(this.nativeDraggable&&bi(jn,"dragend",this),m2(jn),jn.style["will-change"]="",Cg&&!up&&uo(jn,ja?ja.options.ghostClass:this.options.ghostClass,!1),uo(jn,this.options.chosenClass,!1),Ll({sortable:this,name:"unchoose",toEl:Co,newIndex:null,newDraggableIndex:null,originalEvent:e}),Ys!==Co?(bu>=0&&(Ll({rootEl:Co,name:"add",toEl:Co,fromEl:Ys,originalEvent:e}),Ll({sortable:this,name:"remove",toEl:Co,originalEvent:e}),Ll({rootEl:Co,name:"sort",toEl:Co,fromEl:Ys,originalEvent:e}),Ll({sortable:this,name:"sort",toEl:Co,originalEvent:e})),ja&&ja.save()):bu!==dp&&bu>=0&&(Ll({sortable:this,name:"update",toEl:Co,originalEvent:e}),Ll({sortable:this,name:"sort",toEl:Co,originalEvent:e})),Or.active&&((bu==null||bu===-1)&&(bu=dp,ld=Kg),Ll({sortable:this,name:"end",toEl:Co,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Hl("nulling",this),Ys=jn=Co=ri=tf=Eo=hv=ud=Yd=dc=Cg=bu=ld=dp=Kg=Jf=Zg=ja=P0=Or.dragged=Or.ghost=Or.clone=Or.active=null,ey.forEach(function(e){e.checked=!0}),ey.length=f2=p2=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":jn&&(this._onDragOver(e),nZ(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],mc(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||lZ(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];mc(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return mc(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=Bm.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&gP(r)},destroy:function(){Hl("destroy",this);var e=this.el;e[cl]=null,bi(e,"mousedown",this._onTapStart),bi(e,"touchstart",this._onTapStart),bi(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(bi(e,"dragover",this),bi(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Qv.splice(Qv.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ud){if(Hl("hideClone",this),Or.eventCanceled)return;lr(Eo,"display","none"),this.options.removeCloneOnHide&&Eo.parentNode&&Eo.parentNode.removeChild(Eo),ud=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ud){if(Hl("showClone",this),Or.eventCanceled)return;jn.parentNode==Ys&&!this.options.group.revertClone?Ys.insertBefore(Eo,jn):tf?Ys.insertBefore(Eo,tf):Ys.appendChild(Eo),this.options.group.revertClone&&this.animate(jn,Eo),lr(Eo,"display",""),ud=!1}}};function nZ(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function A0(t,e,n,r,i,s,o,a){var l,c=t[cl],d=c.options.onMove,p;return window.CustomEvent&&!zh&&!Im?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=s||Ks(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),d&&(p=d.call(c,l,o)),p}function m2(t){t.draggable=!1}function rZ(){Rb=!1}function iZ(t,e,n){var r=Ks(Dp(n.el,0,n.options,!0)),i=10;return e?t.clientX<r.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-i||t.clientY<r.bottom&&t.clientX<r.left}function sZ(t,e,n){var r=Ks(W_(n.el,n.options.draggable)),i=10;return e?t.clientX>r.right+i||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+i}function oZ(t,e,n,r,i,s,o,a){var l=r?t.clientY:t.clientX,c=r?n.height:n.width,d=r?n.top:n.left,p=r?n.bottom:n.right,v=!1;if(!o){if(a&&dv<c*i){if(!Xg&&(Zg===1?l>d+c*s/2:l<p-c*s/2)&&(Xg=!0),Xg)v=!0;else if(Zg===1?l<d+dv:l>p-dv)return-Zg}else if(l>d+c*(1-i)/2&&l<p-c*(1-i)/2)return aZ(e)}return v=v||o,v&&(l<d+c*s/2||l>p-c*s/2)?l>d+c/2?1:-1:0}function aZ(t){return Mo(jn)<Mo(t)?1:-1}function lZ(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function uZ(t){ey.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&ey.push(r)}}function fv(t){return setTimeout(t,0)}function Fb(t){return clearTimeout(t)}Gy&&Ti(document,"touchmove",function(t){(Or.active||up)&&t.cancelable&&t.preventDefault()});Or.utils={on:Ti,off:bi,css:lr,find:cP,is:function(e,n){return!!mc(e,n,e,!1)},extend:GK,throttle:hP,closest:mc,toggleClass:uo,clone:G_,index:Mo,nextTick:fv,cancelNextTick:Fb,detectDirection:pP,getChild:Dp};Or.get=function(t){return t[cl]};Or.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Or.utils=th(th({},Or.utils),r.utils)),Bm.mount(r)})};Or.create=function(t,e){return new Or(t,e)};Or.version=VK;var ea=[],Eg,jb,zb=!1,v2,y2,ty,Pg;function cZ(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?Ti(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ti(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Ti(document,"touchmove",this._handleFallbackAutoScroll):Ti(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?bi(document,"dragover",this._handleAutoScroll):(bi(document,"pointermove",this._handleFallbackAutoScroll),bi(document,"touchmove",this._handleFallbackAutoScroll),bi(document,"mousemove",this._handleFallbackAutoScroll)),Y5(),pv(),qK()},nulling:function(){ty=jb=Eg=zb=Pg=v2=y2=null,ea.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(ty=n,r||this.options.forceAutoScrollFallback||Im||zh||qg){b2(n,this.options,a,r);var l=dd(a,!0);zb&&(!Pg||s!==v2||o!==y2)&&(Pg&&Y5(),Pg=setInterval(function(){var c=dd(document.elementFromPoint(s,o),!0);c!==l&&(l=c,pv()),b2(n,i.options,c,r)},10),v2=s,y2=o)}else{if(!this.options.bubbleScroll||dd(a,!0)===Jc()){pv();return}b2(n,this.options,dd(a,!1),!1)}}},Zu(t,{pluginName:"scroll",initializeByDefault:!0})}function pv(){ea.forEach(function(t){clearInterval(t.pid)}),ea=[]}function Y5(){clearInterval(Pg)}var b2=hP(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Jc(),c=!1,d;jb!==n&&(jb=n,pv(),Eg=e.scroll,d=e.scrollFn,Eg===!0&&(Eg=dd(n,!0)));var p=0,v=Eg;do{var m=v,x=Ks(m),E=x.top,M=x.bottom,A=x.left,O=x.right,z=x.width,K=x.height,ne=void 0,me=void 0,pe=m.scrollWidth,N=m.scrollHeight,j=lr(m),q=m.scrollLeft,I=m.scrollTop;m===l?(ne=z<pe&&(j.overflowX==="auto"||j.overflowX==="scroll"||j.overflowX==="visible"),me=K<N&&(j.overflowY==="auto"||j.overflowY==="scroll"||j.overflowY==="visible")):(ne=z<pe&&(j.overflowX==="auto"||j.overflowX==="scroll"),me=K<N&&(j.overflowY==="auto"||j.overflowY==="scroll"));var B=ne&&(Math.abs(O-i)<=o&&q+z<pe)-(Math.abs(A-i)<=o&&!!q),$=me&&(Math.abs(M-s)<=o&&I+K<N)-(Math.abs(E-s)<=o&&!!I);if(!ea[p])for(var R=0;R<=p;R++)ea[R]||(ea[R]={});(ea[p].vx!=B||ea[p].vy!=$||ea[p].el!==m)&&(ea[p].el=m,ea[p].vx=B,ea[p].vy=$,clearInterval(ea[p].pid),(B!=0||$!=0)&&(c=!0,ea[p].pid=setInterval((function(){r&&this.layer===0&&Or.active._onTouchMove(ty);var U=ea[this.layer].vy?ea[this.layer].vy*a:0,V=ea[this.layer].vx?ea[this.layer].vx*a:0;typeof d=="function"&&d.call(Or.dragged.parentNode[cl],V,U,t,ty,ea[this.layer].el)!=="continue"||dP(ea[this.layer].el,V,U)}).bind({layer:p}),24))),p++}while(e.bubbleScroll&&v!==l&&(v=dd(v,!1)));zb=c}},30),yP=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=r||s;a();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,p=document.elementFromPoint(d.clientX,d.clientY);l(),c&&!c.el.contains(p)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function q_(){}q_.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Dp(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:yP};Zu(q_,{pluginName:"revertOnSpill"});function Y_(){}Y_.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:yP};Zu(Y_,{pluginName:"removeOnSpill"});var ju;function hZ(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(n){var r=n.dragEl;ju=r},dragOverValid:function(n){var r=n.completed,i=n.target,s=n.onMove,o=n.activeSortable,a=n.changed,l=n.cancel;if(o.options.swap){var c=this.sortable.el,d=this.options;if(i&&i!==c){var p=ju;s(i)!==!1?(uo(i,d.swapClass,!0),ju=i):ju=null,p&&p!==ju&&uo(p,d.swapClass,!1)}a(),r(!0),l()}},drop:function(n){var r=n.activeSortable,i=n.putSortable,s=n.dragEl,o=i||this.sortable,a=this.options;ju&&uo(ju,a.swapClass,!1),ju&&(a.swap||i&&i.options.swap)&&s!==ju&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),dZ(s,ju),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){ju=null}},Zu(t,{pluginName:"swap",eventProperties:function(){return{swapItem:ju}}})}function dZ(t,e){var n=t.parentNode,r=e.parentNode,i,s;!n||!r||n.isEqualNode(e)||r.isEqualNode(t)||(i=Mo(t),s=Mo(e),n.isEqualNode(r)&&i<s&&s++,n.insertBefore(e,n.children[i]),r.insertBefore(t,r.children[s]))}var Yr=[],yu=[],ag,fc,lg=!1,Wl=!1,Qf=!1,As,ug,T0;function fZ(){function t(e){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));e.options.supportPointer?Ti(document,"pointerup",this._deselectMultiDrag):(Ti(document,"mouseup",this._deselectMultiDrag),Ti(document,"touchend",this._deselectMultiDrag)),Ti(document,"keydown",this._checkKeyDown),Ti(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";Yr.length&&fc===e?Yr.forEach(function(a,l){o+=(l?", ":"")+a.textContent}):o=s.textContent,i.setData("Text",o)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var r=n.dragEl;As=r},delayEnded:function(){this.isMultiDrag=~Yr.indexOf(As)},setupClone:function(n){var r=n.sortable,i=n.cancel;if(this.isMultiDrag){for(var s=0;s<Yr.length;s++)yu.push(G_(Yr[s])),yu[s].sortableIndex=Yr[s].sortableIndex,yu[s].draggable=!1,yu[s].style["will-change"]="",uo(yu[s],this.options.selectedClass,!1),Yr[s]===As&&uo(yu[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(n){var r=n.sortable,i=n.rootEl,s=n.dispatchSortableEvent,o=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Yr.length&&fc===r&&(K5(!0,i),s("clone"),o()))},showClone:function(n){var r=n.cloneNowShown,i=n.rootEl,s=n.cancel;this.isMultiDrag&&(K5(!1,i),yu.forEach(function(o){lr(o,"display","")}),r(),T0=!1,s())},hideClone:function(n){var r=this;n.sortable;var i=n.cloneNowHidden,s=n.cancel;this.isMultiDrag&&(yu.forEach(function(o){lr(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),T0=!0,s())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&fc&&fc.multiDrag._deselectMultiDrag(),Yr.forEach(function(r){r.sortableIndex=Mo(r)}),Yr=Yr.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),Qf=!0},dragStarted:function(n){var r=this,i=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Yr.forEach(function(o){o!==As&&lr(o,"position","absolute")});var s=Ks(As,!1,!0,!0);Yr.forEach(function(o){o!==As&&H5(o,s)}),Wl=!0,lg=!0}i.animateAll(function(){Wl=!1,lg=!1,r.options.animation&&Yr.forEach(function(o){h2(o)}),r.options.sort&&D0()})}},dragOver:function(n){var r=n.target,i=n.completed,s=n.cancel;Wl&&~Yr.indexOf(r)&&(i(!1),s())},revert:function(n){var r=n.fromSortable,i=n.rootEl,s=n.sortable,o=n.dragRect;Yr.length>1&&(Yr.forEach(function(a){s.addAnimationState({target:a,rect:Wl?Ks(a):o}),h2(a),a.fromRect=o,r.removeAnimationState(a)}),Wl=!1,pZ(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(n){var r=n.sortable,i=n.isOwner,s=n.insertion,o=n.activeSortable,a=n.parentEl,l=n.putSortable,c=this.options;if(s){if(i&&o._hideClone(),lg=!1,c.animation&&Yr.length>1&&(Wl||!i&&!o.options.sort&&!l)){var d=Ks(As,!1,!0,!0);Yr.forEach(function(v){v!==As&&(H5(v,d),a.appendChild(v))}),Wl=!0}if(!i)if(Wl||D0(),Yr.length>1){var p=T0;o._showClone(r),o.options.animation&&!T0&&p&&yu.forEach(function(v){o.addAnimationState({target:v,rect:ug}),v.fromRect=ug,v.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(n){var r=n.dragRect,i=n.isOwner,s=n.activeSortable;if(Yr.forEach(function(a){a.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){ug=Zu({},r);var o=gf(As,!0);ug.top-=o.f,ug.left-=o.e}},dragOverAnimationComplete:function(){Wl&&(Wl=!1,D0())},drop:function(n){var r=n.originalEvent,i=n.rootEl,s=n.parentEl,o=n.sortable,a=n.dispatchSortableEvent,l=n.oldIndex,c=n.putSortable,d=c||this.sortable;if(r){var p=this.options,v=s.children;if(!Qf)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),uo(As,p.selectedClass,!~Yr.indexOf(As)),~Yr.indexOf(As))Yr.splice(Yr.indexOf(As),1),ag=null,Sg({sortable:o,rootEl:i,name:"deselect",targetEl:As});else{if(Yr.push(As),Sg({sortable:o,rootEl:i,name:"select",targetEl:As}),r.shiftKey&&ag&&o.el.contains(ag)){var m=Mo(ag),x=Mo(As);if(~m&&~x&&m!==x){var E,M;for(x>m?(M=m,E=x):(M=x,E=m+1);M<E;M++)~Yr.indexOf(v[M])||(uo(v[M],p.selectedClass,!0),Yr.push(v[M]),Sg({sortable:o,rootEl:i,name:"select",targetEl:v[M]}))}}else ag=As;fc=d}if(Qf&&this.isMultiDrag){if(Wl=!1,(s[cl].options.sort||s!==i)&&Yr.length>1){var A=Ks(As),O=Mo(As,":not(."+this.options.selectedClass+")");if(!lg&&p.animation&&(As.thisAnimationDuration=null),d.captureAnimationState(),!lg&&(p.animation&&(As.fromRect=A,Yr.forEach(function(K){if(K.thisAnimationDuration=null,K!==As){var ne=Wl?Ks(K):A;K.fromRect=ne,d.addAnimationState({target:K,rect:ne})}})),D0(),Yr.forEach(function(K){v[O]?s.insertBefore(K,v[O]):s.appendChild(K),O++}),l===Mo(As))){var z=!1;Yr.forEach(function(K){if(K.sortableIndex!==Mo(K)){z=!0;return}}),z&&a("update")}Yr.forEach(function(K){h2(K)}),d.animateAll()}fc=d}(i===s||c&&c.lastPutMode!=="clone")&&yu.forEach(function(K){K.parentNode&&K.parentNode.removeChild(K)})}},nullingGlobal:function(){this.isMultiDrag=Qf=!1,yu.length=0},destroyGlobal:function(){this._deselectMultiDrag(),bi(document,"pointerup",this._deselectMultiDrag),bi(document,"mouseup",this._deselectMultiDrag),bi(document,"touchend",this._deselectMultiDrag),bi(document,"keydown",this._checkKeyDown),bi(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Qf<"u"&&Qf)&&fc===this.sortable&&!(n&&mc(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;Yr.length;){var r=Yr[0];uo(r,this.options.selectedClass,!1),Yr.shift(),Sg({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Zu(t,{pluginName:"multiDrag",utils:{select:function(n){var r=n.parentNode[cl];!r||!r.options.multiDrag||~Yr.indexOf(n)||(fc&&fc!==r&&(fc.multiDrag._deselectMultiDrag(),fc=r),uo(n,r.options.selectedClass,!0),Yr.push(n))},deselect:function(n){var r=n.parentNode[cl],i=Yr.indexOf(n);!r||!r.options.multiDrag||!~i||(uo(n,r.options.selectedClass,!1),Yr.splice(i,1))}},eventProperties:function(){var n=this,r=[],i=[];return Yr.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;Wl&&s!==As?o=-1:Wl?o=Mo(s,":not(."+n.options.selectedClass+")"):o=Mo(s),i.push({multiDragElement:s,index:o})}),{items:RK(Yr),clones:[].concat(yu),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function pZ(t,e){Yr.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function K5(t,e){yu.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function D0(){Yr.forEach(function(t){t!==As&&t.parentNode&&t.parentNode.removeChild(t)})}Or.mount(new cZ);Or.mount(Y_,q_);const gZ=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:fZ,Sortable:Or,Swap:hZ,default:Or},Symbol.toStringTag,{value:"Module"})),mZ=_E(gZ);(function(t,e){(function(r,i){t.exports=i(OK,mZ)})(typeof self<"u"?self:Sa,function(n,r){return function(i){var s={};function o(a){if(s[a])return s[a].exports;var l=s[a]={i:a,l:!1,exports:{}};return i[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=i,o.c=s,o.d=function(a,l,c){o.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:c})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,l){if(l&1&&(a=o(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var d in a)o.d(c,d,(function(p){return a[p]}).bind(null,d));return c},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var a=o("b622"),l=a("toStringTag"),c={};c[l]="z",i.exports=String(c)==="[object z]"},"0366":function(i,s,o){var a=o("1c0b");i.exports=function(l,c,d){if(a(l),c===void 0)return l;switch(d){case 0:return function(){return l.call(c)};case 1:return function(p){return l.call(c,p)};case 2:return function(p,v){return l.call(c,p,v)};case 3:return function(p,v,m){return l.call(c,p,v,m)}}return function(){return l.apply(c,arguments)}}},"057f":function(i,s,o){var a=o("fc6a"),l=o("241c").f,c={}.toString,d=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],p=function(v){try{return l(v)}catch{return d.slice()}};i.exports.f=function(m){return d&&c.call(m)=="[object Window]"?p(m):l(a(m))}},"06cf":function(i,s,o){var a=o("83ab"),l=o("d1e7"),c=o("5c6c"),d=o("fc6a"),p=o("c04e"),v=o("5135"),m=o("0cfb"),x=Object.getOwnPropertyDescriptor;s.f=a?x:function(M,A){if(M=d(M),A=p(A,!0),m)try{return x(M,A)}catch{}if(v(M,A))return c(!l.f.call(M,A),M[A])}},"0cfb":function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("cc12");i.exports=!a&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var a=o("23e7"),l=o("d58f").left,c=o("a640"),d=o("ae40"),p=c("reduce"),v=d("reduce",{1:0});a({target:"Array",proto:!0,forced:!p||!v},{reduce:function(x){return l(this,x,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var a=o("c6b6"),l=o("9263");i.exports=function(c,d){var p=c.exec;if(typeof p=="function"){var v=p.call(c,d);if(typeof v!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return v}if(a(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,d)}},"159b":function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("17c2"),d=o("9112");for(var p in l){var v=a[p],m=v&&v.prototype;if(m&&m.forEach!==c)try{d(m,"forEach",c)}catch{m.forEach=c}}},"17c2":function(i,s,o){var a=o("b727").forEach,l=o("a640"),c=o("ae40"),d=l("forEach"),p=c("forEach");i.exports=!d||!p?function(m){return a(this,m,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var a=o("d066");i.exports=a("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var a=o("b622"),l=a("iterator"),c=!1;try{var d=0,p={next:function(){return{done:!!d++}},return:function(){c=!0}};p[l]=function(){return this},Array.from(p,function(){throw 2})}catch{}i.exports=function(v,m){if(!m&&!c)return!1;var x=!1;try{var E={};E[l]=function(){return{next:function(){return{done:x=!0}}}},v(E)}catch{}return x}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var a=o("d039"),l=o("b622"),c=o("2d00"),d=l("species");i.exports=function(p){return c>=51||!a(function(){var v=[],m=v.constructor={};return m[d]=function(){return{foo:1}},v[p](Boolean).foo!==1})}},"23cb":function(i,s,o){var a=o("a691"),l=Math.max,c=Math.min;i.exports=function(d,p){var v=a(d);return v<0?l(v+p,0):c(v,p)}},"23e7":function(i,s,o){var a=o("da84"),l=o("06cf").f,c=o("9112"),d=o("6eeb"),p=o("ce4e"),v=o("e893"),m=o("94ca");i.exports=function(x,E){var M=x.target,A=x.global,O=x.stat,z,K,ne,me,pe,N;if(A?K=a:O?K=a[M]||p(M,{}):K=(a[M]||{}).prototype,K)for(ne in E){if(pe=E[ne],x.noTargetGet?(N=l(K,ne),me=N&&N.value):me=K[ne],z=m(A?ne:M+(O?".":"#")+ne,x.forced),!z&&me!==void 0){if(typeof pe==typeof me)continue;v(pe,me)}(x.sham||me&&me.sham)&&c(pe,"sham",!0),d(K,ne,pe,x)}}},"241c":function(i,s,o){var a=o("ca84"),l=o("7839"),c=l.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(p){return a(p,c)}},"25f0":function(i,s,o){var a=o("6eeb"),l=o("825a"),c=o("d039"),d=o("ad6d"),p="toString",v=RegExp.prototype,m=v[p],x=c(function(){return m.call({source:"a",flags:"b"})!="/a/b"}),E=m.name!=p;(x||E)&&a(RegExp.prototype,p,function(){var A=l(this),O=String(A.source),z=A.flags,K=String(z===void 0&&A instanceof RegExp&&!("flags"in v)?d.call(A):z);return"/"+O+"/"+K},{unsafe:!0})},"2ca0":function(i,s,o){var a=o("23e7"),l=o("06cf").f,c=o("50c4"),d=o("5a34"),p=o("1d80"),v=o("ab13"),m=o("c430"),x="".startsWith,E=Math.min,M=v("startsWith"),A=!m&&!M&&!!function(){var O=l(String.prototype,"startsWith");return O&&!O.writable}();a({target:"String",proto:!0,forced:!A&&!M},{startsWith:function(z){var K=String(p(this));d(z);var ne=c(E(arguments.length>1?arguments[1]:void 0,K.length)),me=String(z);return x?x.call(K,me,ne):K.slice(ne,ne+me.length)===me}})},"2d00":function(i,s,o){var a=o("da84"),l=o("342f"),c=a.process,d=c&&c.versions,p=d&&d.v8,v,m;p?(v=p.split("."),m=v[0]+v[1]):l&&(v=l.match(/Edge\/(\d+)/),(!v||v[1]>=74)&&(v=l.match(/Chrome\/(\d+)/),v&&(m=v[1]))),i.exports=m&&+m},"342f":function(i,s,o){var a=o("d066");i.exports=a("navigator","userAgent")||""},"35a1":function(i,s,o){var a=o("f5df"),l=o("3f8c"),c=o("b622"),d=c("iterator");i.exports=function(p){if(p!=null)return p[d]||p["@@iterator"]||l[a(p)]}},"37e8":function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("825a"),d=o("df75");i.exports=a?Object.defineProperties:function(v,m){c(v);for(var x=d(m),E=x.length,M=0,A;E>M;)l.f(v,A=x[M++],m[A]);return v}},"3bbe":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(i,s,o){var a=o("6547").charAt,l=o("69f3"),c=o("7dd0"),d="String Iterator",p=l.set,v=l.getterFor(d);c(String,"String",function(m){p(this,{type:d,string:String(m),index:0})},function(){var x=v(this),E=x.string,M=x.index,A;return M>=E.length?{value:void 0,done:!0}:(A=a(E,M),x.index+=A.length,{value:A,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var a=o("23e7"),l=o("17c2");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(i,s,o){var a=o("da84");i.exports=a},"44ad":function(i,s,o){var a=o("d039"),l=o("c6b6"),c="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(d){return l(d)=="String"?c.call(d,""):Object(d)}:Object},"44d2":function(i,s,o){var a=o("b622"),l=o("7c73"),c=o("9bf2"),d=a("unscopables"),p=Array.prototype;p[d]==null&&c.f(p,d,{configurable:!0,value:l(null)}),i.exports=function(v){p[d][v]=!0}},"44e7":function(i,s,o){var a=o("861d"),l=o("c6b6"),c=o("b622"),d=c("match");i.exports=function(p){var v;return a(p)&&((v=p[d])!==void 0?!!v:l(p)=="RegExp")}},4930:function(i,s,o){var a=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},"4d64":function(i,s,o){var a=o("fc6a"),l=o("50c4"),c=o("23cb"),d=function(p){return function(v,m,x){var E=a(v),M=l(E.length),A=c(x,M),O;if(p&&m!=m){for(;M>A;)if(O=E[A++],O!=O)return!0}else for(;M>A;A++)if((p||A in E)&&E[A]===m)return p||A||0;return!p&&-1}};i.exports={includes:d(!0),indexOf:d(!1)}},"4de4":function(i,s,o){var a=o("23e7"),l=o("b727").filter,c=o("1dde"),d=o("ae40"),p=c("filter"),v=d("filter");a({target:"Array",proto:!0,forced:!p||!v},{filter:function(x){return l(this,x,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var a=o("0366"),l=o("7b0b"),c=o("9bdd"),d=o("e95a"),p=o("50c4"),v=o("8418"),m=o("35a1");i.exports=function(E){var M=l(E),A=typeof this=="function"?this:Array,O=arguments.length,z=O>1?arguments[1]:void 0,K=z!==void 0,ne=m(M),me=0,pe,N,j,q,I,B;if(K&&(z=a(z,O>2?arguments[2]:void 0,2)),ne!=null&&!(A==Array&&d(ne)))for(q=ne.call(M),I=q.next,N=new A;!(j=I.call(q)).done;me++)B=K?c(q,z,[j.value,me],!0):j.value,v(N,me,B);else for(pe=p(M.length),N=new A(pe);pe>me;me++)B=K?z(M[me],me):M[me],v(N,me,B);return N.length=me,N}},"4fad":function(i,s,o){var a=o("23e7"),l=o("6f53").entries;a({target:"Object",stat:!0},{entries:function(d){return l(d)}})},"50c4":function(i,s,o){var a=o("a691"),l=Math.min;i.exports=function(c){return c>0?l(a(c),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(a,l){return o.call(a,l)}},5319:function(i,s,o){var a=o("d784"),l=o("825a"),c=o("7b0b"),d=o("50c4"),p=o("a691"),v=o("1d80"),m=o("8aa5"),x=o("14c3"),E=Math.max,M=Math.min,A=Math.floor,O=/\$([$&'`]|\d\d?|<[^>]*>)/g,z=/\$([$&'`]|\d\d?)/g,K=function(ne){return ne===void 0?ne:String(ne)};a("replace",2,function(ne,me,pe,N){var j=N.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,q=N.REPLACE_KEEPS_$0,I=j?"$":"$0";return[function(R,U){var V=v(this),re=R==null?void 0:R[ne];return re!==void 0?re.call(R,V,U):me.call(String(V),R,U)},function($,R){if(!j&&q||typeof R=="string"&&R.indexOf(I)===-1){var U=pe(me,$,this,R);if(U.done)return U.value}var V=l($),re=String(this),J=typeof R=="function";J||(R=String(R));var _e=V.global;if(_e){var Le=V.unicode;V.lastIndex=0}for(var Oe=[];;){var Z=x(V,re);if(Z===null||(Oe.push(Z),!_e))break;var G=String(Z[0]);G===""&&(V.lastIndex=m(re,d(V.lastIndex),Le))}for(var se="",ce=0,he=0;he<Oe.length;he++){Z=Oe[he];for(var ve=String(Z[0]),ee=E(M(p(Z.index),re.length),0),X=[],De=1;De<Z.length;De++)X.push(K(Z[De]));var Te=Z.groups;if(J){var qe=[ve].concat(X,ee,re);Te!==void 0&&qe.push(Te);var ge=String(R.apply(void 0,qe))}else ge=B(ve,re,ee,X,Te,R);ee>=ce&&(se+=re.slice(ce,ee)+ge,ce=ee+ve.length)}return se+re.slice(ce)}];function B($,R,U,V,re,J){var _e=U+$.length,Le=V.length,Oe=z;return re!==void 0&&(re=c(re),Oe=O),me.call(J,Oe,function(Z,G){var se;switch(G.charAt(0)){case"$":return"$";case"&":return $;case"`":return R.slice(0,U);case"'":return R.slice(_e);case"<":se=re[G.slice(1,-1)];break;default:var ce=+G;if(ce===0)return Z;if(ce>Le){var he=A(ce/10);return he===0?Z:he<=Le?V[he-1]===void 0?G.charAt(1):V[he-1]+G.charAt(1):Z}se=V[ce-1]}return se===void 0?"":se})}})},5692:function(i,s,o){var a=o("c430"),l=o("c6cd");(i.exports=function(c,d){return l[c]||(l[c]=d!==void 0?d:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var a=o("d066"),l=o("241c"),c=o("7418"),d=o("825a");i.exports=a("Reflect","ownKeys")||function(v){var m=l.f(d(v)),x=c.f;return x?m.concat(x(v)):m}},"5a34":function(i,s,o){var a=o("44e7");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(i,s){i.exports=function(o,a){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:a}}},"5db7":function(i,s,o){var a=o("23e7"),l=o("a2bf"),c=o("7b0b"),d=o("50c4"),p=o("1c0b"),v=o("65f0");a({target:"Array",proto:!0},{flatMap:function(x){var E=c(this),M=d(E.length),A;return p(x),A=v(E,0),A.length=l(A,E,E,M,0,1,x,arguments.length>1?arguments[1]:void 0),A}})},6547:function(i,s,o){var a=o("a691"),l=o("1d80"),c=function(d){return function(p,v){var m=String(l(p)),x=a(v),E=m.length,M,A;return x<0||x>=E?d?"":void 0:(M=m.charCodeAt(x),M<55296||M>56319||x+1===E||(A=m.charCodeAt(x+1))<56320||A>57343?d?m.charAt(x):M:d?m.slice(x,x+2):(M-55296<<10)+(A-56320)+65536)}};i.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(i,s,o){var a=o("861d"),l=o("e8b5"),c=o("b622"),d=c("species");i.exports=function(p,v){var m;return l(p)&&(m=p.constructor,typeof m=="function"&&(m===Array||l(m.prototype))?m=void 0:a(m)&&(m=m[d],m===null&&(m=void 0))),new(m===void 0?Array:m)(v===0?0:v)}},"69f3":function(i,s,o){var a=o("7f9a"),l=o("da84"),c=o("861d"),d=o("9112"),p=o("5135"),v=o("f772"),m=o("d012"),x=l.WeakMap,E,M,A,O=function(j){return A(j)?M(j):E(j,{})},z=function(j){return function(q){var I;if(!c(q)||(I=M(q)).type!==j)throw TypeError("Incompatible receiver, "+j+" required");return I}};if(a){var K=new x,ne=K.get,me=K.has,pe=K.set;E=function(j,q){return pe.call(K,j,q),q},M=function(j){return ne.call(K,j)||{}},A=function(j){return me.call(K,j)}}else{var N=v("state");m[N]=!0,E=function(j,q){return d(j,N,q),q},M=function(j){return p(j,N)?j[N]:{}},A=function(j){return p(j,N)}}i.exports={set:E,get:M,has:A,enforce:O,getterFor:z}},"6eeb":function(i,s,o){var a=o("da84"),l=o("9112"),c=o("5135"),d=o("ce4e"),p=o("8925"),v=o("69f3"),m=v.get,x=v.enforce,E=String(String).split("String");(i.exports=function(M,A,O,z){var K=z?!!z.unsafe:!1,ne=z?!!z.enumerable:!1,me=z?!!z.noTargetGet:!1;if(typeof O=="function"&&(typeof A=="string"&&!c(O,"name")&&l(O,"name",A),x(O).source=E.join(typeof A=="string"?A:"")),M===a){ne?M[A]=O:d(A,O);return}else K?!me&&M[A]&&(ne=!0):delete M[A];ne?M[A]=O:l(M,A,O)})(Function.prototype,"toString",function(){return typeof this=="function"&&m(this).source||p(this)})},"6f53":function(i,s,o){var a=o("83ab"),l=o("df75"),c=o("fc6a"),d=o("d1e7").f,p=function(v){return function(m){for(var x=c(m),E=l(x),M=E.length,A=0,O=[],z;M>A;)z=E[A++],(!a||d.call(x,z))&&O.push(v?[z,x[z]]:x[z]);return O}};i.exports={entries:p(!0),values:p(!1)}},"73d9":function(i,s,o){var a=o("44d2");a("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var a=o("428f"),l=o("5135"),c=o("e538"),d=o("9bf2").f;i.exports=function(p){var v=a.Symbol||(a.Symbol={});l(v,p)||d(v,p,{value:c.f(p)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var a=o("1d80");i.exports=function(l){return Object(a(l))}},"7c73":function(i,s,o){var a=o("825a"),l=o("37e8"),c=o("7839"),d=o("d012"),p=o("1be4"),v=o("cc12"),m=o("f772"),x=">",E="<",M="prototype",A="script",O=m("IE_PROTO"),z=function(){},K=function(j){return E+A+x+j+E+"/"+A+x},ne=function(j){j.write(K("")),j.close();var q=j.parentWindow.Object;return j=null,q},me=function(){var j=v("iframe"),q="java"+A+":",I;return j.style.display="none",p.appendChild(j),j.src=String(q),I=j.contentWindow.document,I.open(),I.write(K("document.F=Object")),I.close(),I.F},pe,N=function(){try{pe=document.domain&&new ActiveXObject("htmlfile")}catch{}N=pe?ne(pe):me();for(var j=c.length;j--;)delete N[M][c[j]];return N()};d[O]=!0,i.exports=Object.create||function(q,I){var B;return q!==null?(z[M]=a(q),B=new z,z[M]=null,B[O]=q):B=N(),I===void 0?B:l(B,I)}},"7dd0":function(i,s,o){var a=o("23e7"),l=o("9ed3"),c=o("e163"),d=o("d2bb"),p=o("d44e"),v=o("9112"),m=o("6eeb"),x=o("b622"),E=o("c430"),M=o("3f8c"),A=o("ae93"),O=A.IteratorPrototype,z=A.BUGGY_SAFARI_ITERATORS,K=x("iterator"),ne="keys",me="values",pe="entries",N=function(){return this};i.exports=function(j,q,I,B,$,R,U){l(I,q,B);var V=function(he){if(he===$&&Oe)return Oe;if(!z&&he in _e)return _e[he];switch(he){case ne:return function(){return new I(this,he)};case me:return function(){return new I(this,he)};case pe:return function(){return new I(this,he)}}return function(){return new I(this)}},re=q+" Iterator",J=!1,_e=j.prototype,Le=_e[K]||_e["@@iterator"]||$&&_e[$],Oe=!z&&Le||V($),Z=q=="Array"&&_e.entries||Le,G,se,ce;if(Z&&(G=c(Z.call(new j)),O!==Object.prototype&&G.next&&(!E&&c(G)!==O&&(d?d(G,O):typeof G[K]!="function"&&v(G,K,N)),p(G,re,!0,!0),E&&(M[re]=N))),$==me&&Le&&Le.name!==me&&(J=!0,Oe=function(){return Le.call(this)}),(!E||U)&&_e[K]!==Oe&&v(_e,K,Oe),M[q]=Oe,$)if(se={values:V(me),keys:R?Oe:V(ne),entries:V(pe)},U)for(ce in se)(z||J||!(ce in _e))&&m(_e,ce,se[ce]);else a({target:q,proto:!0,forced:z||J},se);return se}},"7f9a":function(i,s,o){var a=o("da84"),l=o("8925"),c=a.WeakMap;i.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(i,s,o){var a=o("d039");i.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var a=o("c04e"),l=o("9bf2"),c=o("5c6c");i.exports=function(d,p,v){var m=a(p);m in d?l.f(d,m,c(0,v)):d[m]=v}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var a,l,c;(function(d,p){l=[],a=p,c=typeof a=="function"?a.apply(s,l):a,c!==void 0&&(i.exports=c)})(typeof self<"u"?self:this,function(){function d(){var p=Object.getOwnPropertyDescriptor(document,"currentScript");if(!p&&"currentScript"in document&&document.currentScript||p&&p.get!==d&&document.currentScript)return document.currentScript;try{throw new Error}catch(pe){var v=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,m=/@([^@]*):(\d+):(\d+)\s*$/ig,x=v.exec(pe.stack)||m.exec(pe.stack),E=x&&x[1]||!1,M=x&&x[2]||!1,A=document.location.href.replace(document.location.hash,""),O,z,K,ne=document.getElementsByTagName("script");E===A&&(O=document.documentElement.outerHTML,z=new RegExp("(?:[^\\n]+?\\n){0,"+(M-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),K=O.replace(z,"$1").trim());for(var me=0;me<ne.length;me++)if(ne[me].readyState==="interactive"||ne[me].src===E||E===A&&ne[me].innerHTML&&ne[me].innerHTML.trim()===K)return ne[me];return null}}return d})},8925:function(i,s,o){var a=o("c6cd"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(c){return l.call(c)}),i.exports=a.inspectSource},"8aa5":function(i,s,o){var a=o("6547").charAt;i.exports=function(l,c,d){return c+(d?a(l,c).length:1)}},"8bbf":function(i,s){i.exports=n},"90e3":function(i,s){var o=0,a=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+a).toString(36)}},9112:function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("5c6c");i.exports=a?function(d,p,v){return l.f(d,p,c(1,v))}:function(d,p,v){return d[p]=v,d}},9263:function(i,s,o){var a=o("ad6d"),l=o("9f7f"),c=RegExp.prototype.exec,d=String.prototype.replace,p=c,v=function(){var M=/a/,A=/b*/g;return c.call(M,"a"),c.call(A,"a"),M.lastIndex!==0||A.lastIndex!==0}(),m=l.UNSUPPORTED_Y||l.BROKEN_CARET,x=/()??/.exec("")[1]!==void 0,E=v||x||m;E&&(p=function(A){var O=this,z,K,ne,me,pe=m&&O.sticky,N=a.call(O),j=O.source,q=0,I=A;return pe&&(N=N.replace("y",""),N.indexOf("g")===-1&&(N+="g"),I=String(A).slice(O.lastIndex),O.lastIndex>0&&(!O.multiline||O.multiline&&A[O.lastIndex-1]!==`
`)&&(j="(?: "+j+")",I=" "+I,q++),K=new RegExp("^(?:"+j+")",N)),x&&(K=new RegExp("^"+j+"$(?!\\s)",N)),v&&(z=O.lastIndex),ne=c.call(pe?K:O,I),pe?ne?(ne.input=ne.input.slice(q),ne[0]=ne[0].slice(q),ne.index=O.lastIndex,O.lastIndex+=ne[0].length):O.lastIndex=0:v&&ne&&(O.lastIndex=O.global?ne.index+ne[0].length:z),x&&ne&&ne.length>1&&d.call(ne[0],K,function(){for(me=1;me<arguments.length-2;me++)arguments[me]===void 0&&(ne[me]=void 0)}),ne}),i.exports=p},"94ca":function(i,s,o){var a=o("d039"),l=/#|\.prototype\./,c=function(x,E){var M=p[d(x)];return M==m?!0:M==v?!1:typeof E=="function"?a(E):!!E},d=c.normalize=function(x){return String(x).replace(l,".").toLowerCase()},p=c.data={},v=c.NATIVE="N",m=c.POLYFILL="P";i.exports=c},"99af":function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("e8b5"),d=o("861d"),p=o("7b0b"),v=o("50c4"),m=o("8418"),x=o("65f0"),E=o("1dde"),M=o("b622"),A=o("2d00"),O=M("isConcatSpreadable"),z=9007199254740991,K="Maximum allowed index exceeded",ne=A>=51||!l(function(){var j=[];return j[O]=!1,j.concat()[0]!==j}),me=E("concat"),pe=function(j){if(!d(j))return!1;var q=j[O];return q!==void 0?!!q:c(j)},N=!ne||!me;a({target:"Array",proto:!0,forced:N},{concat:function(q){var I=p(this),B=x(I,0),$=0,R,U,V,re,J;for(R=-1,V=arguments.length;R<V;R++)if(J=R===-1?I:arguments[R],pe(J)){if(re=v(J.length),$+re>z)throw TypeError(K);for(U=0;U<re;U++,$++)U in J&&m(B,$,J[U])}else{if($>=z)throw TypeError(K);m(B,$++,J)}return B.length=$,B}})},"9bdd":function(i,s,o){var a=o("825a");i.exports=function(l,c,d,p){try{return p?c(a(d)[0],d[1]):c(d)}catch(m){var v=l.return;throw v!==void 0&&a(v.call(l)),m}}},"9bf2":function(i,s,o){var a=o("83ab"),l=o("0cfb"),c=o("825a"),d=o("c04e"),p=Object.defineProperty;s.f=a?p:function(m,x,E){if(c(m),x=d(x,!0),c(E),l)try{return p(m,x,E)}catch{}if("get"in E||"set"in E)throw TypeError("Accessors not supported");return"value"in E&&(m[x]=E.value),m}},"9ed3":function(i,s,o){var a=o("ae93").IteratorPrototype,l=o("7c73"),c=o("5c6c"),d=o("d44e"),p=o("3f8c"),v=function(){return this};i.exports=function(m,x,E){var M=x+" Iterator";return m.prototype=l(a,{next:c(1,E)}),d(m,M,!1,!0),p[M]=v,m}},"9f7f":function(i,s,o){var a=o("d039");function l(c,d){return RegExp(c,d)}s.UNSUPPORTED_Y=a(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),s.BROKEN_CARET=a(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(i,s,o){var a=o("e8b5"),l=o("50c4"),c=o("0366"),d=function(p,v,m,x,E,M,A,O){for(var z=E,K=0,ne=A?c(A,O,3):!1,me;K<x;){if(K in m){if(me=ne?ne(m[K],K,v):m[K],M>0&&a(me))z=d(p,v,me,l(me.length),z,M-1)-1;else{if(z>=9007199254740991)throw TypeError("Exceed the acceptable array length");p[z]=me}z++}K++}return z};i.exports=d},a352:function(i,s){i.exports=r},a434:function(i,s,o){var a=o("23e7"),l=o("23cb"),c=o("a691"),d=o("50c4"),p=o("7b0b"),v=o("65f0"),m=o("8418"),x=o("1dde"),E=o("ae40"),M=x("splice"),A=E("splice",{ACCESSORS:!0,0:0,1:2}),O=Math.max,z=Math.min,K=9007199254740991,ne="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!M||!A},{splice:function(pe,N){var j=p(this),q=d(j.length),I=l(pe,q),B=arguments.length,$,R,U,V,re,J;if(B===0?$=R=0:B===1?($=0,R=q-I):($=B-2,R=z(O(c(N),0),q-I)),q+$-R>K)throw TypeError(ne);for(U=v(j,R),V=0;V<R;V++)re=I+V,re in j&&m(U,V,j[re]);if(U.length=R,$<R){for(V=I;V<q-R;V++)re=V+R,J=V+$,re in j?j[J]=j[re]:delete j[J];for(V=q;V>q-R+$;V--)delete j[V-1]}else if($>R)for(V=q-R;V>I;V--)re=V+R-1,J=V+$-1,re in j?j[J]=j[re]:delete j[J];for(V=0;V<$;V++)j[V+I]=arguments[V+2];return j.length=q-R+$,U}})},a4d3:function(i,s,o){var a=o("23e7"),l=o("da84"),c=o("d066"),d=o("c430"),p=o("83ab"),v=o("4930"),m=o("fdbf"),x=o("d039"),E=o("5135"),M=o("e8b5"),A=o("861d"),O=o("825a"),z=o("7b0b"),K=o("fc6a"),ne=o("c04e"),me=o("5c6c"),pe=o("7c73"),N=o("df75"),j=o("241c"),q=o("057f"),I=o("7418"),B=o("06cf"),$=o("9bf2"),R=o("d1e7"),U=o("9112"),V=o("6eeb"),re=o("5692"),J=o("f772"),_e=o("d012"),Le=o("90e3"),Oe=o("b622"),Z=o("e538"),G=o("746f"),se=o("d44e"),ce=o("69f3"),he=o("b727").forEach,ve=J("hidden"),ee="Symbol",X="prototype",De=Oe("toPrimitive"),Te=ce.set,qe=ce.getterFor(ee),ge=Object[X],Q=l.Symbol,ie=c("JSON","stringify"),fe=B.f,Ce=$.f,de=q.f,Xe=R.f,Ie=re("symbols"),Ye=re("op-symbols"),Je=re("string-to-symbol-registry"),Ge=re("symbol-to-string-registry"),wt=re("wks"),Ct=l.QObject,Wt=!Ct||!Ct[X]||!Ct[X].findChild,sn=p&&x(function(){return pe(Ce({},"a",{get:function(){return Ce(this,"a",{value:7}).a}})).a!=7})?function(en,wn,En){var Xn=fe(ge,wn);Xn&&delete ge[wn],Ce(en,wn,En),Xn&&en!==ge&&Ce(ge,wn,Xn)}:Ce,bn=function(en,wn){var En=Ie[en]=pe(Q[X]);return Te(En,{type:ee,tag:en,description:wn}),p||(En.description=wn),En},Qe=m?function(en){return typeof en=="symbol"}:function(en){return Object(en)instanceof Q},ot=function(wn,En,Xn){wn===ge&&ot(Ye,En,Xn),O(wn);var dr=ne(En,!0);return O(Xn),E(Ie,dr)?(Xn.enumerable?(E(wn,ve)&&wn[ve][dr]&&(wn[ve][dr]=!1),Xn=pe(Xn,{enumerable:me(0,!1)})):(E(wn,ve)||Ce(wn,ve,me(1,{})),wn[ve][dr]=!0),sn(wn,dr,Xn)):Ce(wn,dr,Xn)},it=function(wn,En){O(wn);var Xn=K(En),dr=N(Xn).concat(Mn(Xn));return he(dr,function(vr){(!p||Qt.call(Xn,vr))&&ot(wn,vr,Xn[vr])}),wn},Vt=function(wn,En){return En===void 0?pe(wn):it(pe(wn),En)},Qt=function(wn){var En=ne(wn,!0),Xn=Xe.call(this,En);return this===ge&&E(Ie,En)&&!E(Ye,En)?!1:Xn||!E(this,En)||!E(Ie,En)||E(this,ve)&&this[ve][En]?Xn:!0},kn=function(wn,En){var Xn=K(wn),dr=ne(En,!0);if(!(Xn===ge&&E(Ie,dr)&&!E(Ye,dr))){var vr=fe(Xn,dr);return vr&&E(Ie,dr)&&!(E(Xn,ve)&&Xn[ve][dr])&&(vr.enumerable=!0),vr}},Ln=function(wn){var En=de(K(wn)),Xn=[];return he(En,function(dr){!E(Ie,dr)&&!E(_e,dr)&&Xn.push(dr)}),Xn},Mn=function(wn){var En=wn===ge,Xn=de(En?Ye:K(wn)),dr=[];return he(Xn,function(vr){E(Ie,vr)&&(!En||E(ge,vr))&&dr.push(Ie[vr])}),dr};if(v||(Q=function(){if(this instanceof Q)throw TypeError("Symbol is not a constructor");var wn=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),En=Le(wn),Xn=function(dr){this===ge&&Xn.call(Ye,dr),E(this,ve)&&E(this[ve],En)&&(this[ve][En]=!1),sn(this,En,me(1,dr))};return p&&Wt&&sn(ge,En,{configurable:!0,set:Xn}),bn(En,wn)},V(Q[X],"toString",function(){return qe(this).tag}),V(Q,"withoutSetter",function(en){return bn(Le(en),en)}),R.f=Qt,$.f=ot,B.f=kn,j.f=q.f=Ln,I.f=Mn,Z.f=function(en){return bn(Oe(en),en)},p&&(Ce(Q[X],"description",{configurable:!0,get:function(){return qe(this).description}}),d||V(ge,"propertyIsEnumerable",Qt,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!v,sham:!v},{Symbol:Q}),he(N(wt),function(en){G(en)}),a({target:ee,stat:!0,forced:!v},{for:function(en){var wn=String(en);if(E(Je,wn))return Je[wn];var En=Q(wn);return Je[wn]=En,Ge[En]=wn,En},keyFor:function(wn){if(!Qe(wn))throw TypeError(wn+" is not a symbol");if(E(Ge,wn))return Ge[wn]},useSetter:function(){Wt=!0},useSimple:function(){Wt=!1}}),a({target:"Object",stat:!0,forced:!v,sham:!p},{create:Vt,defineProperty:ot,defineProperties:it,getOwnPropertyDescriptor:kn}),a({target:"Object",stat:!0,forced:!v},{getOwnPropertyNames:Ln,getOwnPropertySymbols:Mn}),a({target:"Object",stat:!0,forced:x(function(){I.f(1)})},{getOwnPropertySymbols:function(wn){return I.f(z(wn))}}),ie){var Zn=!v||x(function(){var en=Q();return ie([en])!="[null]"||ie({a:en})!="{}"||ie(Object(en))!="{}"});a({target:"JSON",stat:!0,forced:Zn},{stringify:function(wn,En,Xn){for(var dr=[wn],vr=1,sr;arguments.length>vr;)dr.push(arguments[vr++]);if(sr=En,!(!A(En)&&wn===void 0||Qe(wn)))return M(En)||(En=function(ut,rt){if(typeof sr=="function"&&(rt=sr.call(this,ut,rt)),!Qe(rt))return rt}),dr[1]=En,ie.apply(null,dr)}})}Q[X][De]||U(Q[X],De,Q[X].valueOf),se(Q,ee),_e[ve]=!0},a630:function(i,s,o){var a=o("23e7"),l=o("4df4"),c=o("1c7e"),d=!c(function(p){Array.from(p)});a({target:"Array",stat:!0,forced:d},{from:l})},a640:function(i,s,o){var a=o("d039");i.exports=function(l,c){var d=[][l];return!!d&&a(function(){d.call(null,c||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,a=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(l>0?a:o)(l)}},ab13:function(i,s,o){var a=o("b622"),l=a("match");i.exports=function(c){var d=/./;try{"/./"[c](d)}catch{try{return d[l]=!1,"/./"[c](d)}catch{}}return!1}},ac1f:function(i,s,o){var a=o("23e7"),l=o("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(i,s,o){var a=o("825a");i.exports=function(){var l=a(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("5135"),d=Object.defineProperty,p={},v=function(m){throw m};i.exports=function(m,x){if(c(p,m))return p[m];x||(x={});var E=[][m],M=c(x,"ACCESSORS")?x.ACCESSORS:!1,A=c(x,0)?x[0]:v,O=c(x,1)?x[1]:void 0;return p[m]=!!E&&!l(function(){if(M&&!a)return!0;var z={length:-1};M?d(z,1,{enumerable:!0,get:v}):z[1]=1,E.call(z,A,O)})}},ae93:function(i,s,o){var a=o("e163"),l=o("9112"),c=o("5135"),d=o("b622"),p=o("c430"),v=d("iterator"),m=!1,x=function(){return this},E,M,A;[].keys&&(A=[].keys(),"next"in A?(M=a(a(A)),M!==Object.prototype&&(E=M)):m=!0),E==null&&(E={}),!p&&!c(E,v)&&l(E,v,x),i.exports={IteratorPrototype:E,BUGGY_SAFARI_ITERATORS:m}},b041:function(i,s,o){var a=o("00ee"),l=o("f5df");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(i,s,o){var a=o("83ab"),l=o("9bf2").f,c=Function.prototype,d=c.toString,p=/^\s*function ([^ (]*)/,v="name";a&&!(v in c)&&l(c,v,{configurable:!0,get:function(){try{return d.call(this).match(p)[1]}catch{return""}}})},b622:function(i,s,o){var a=o("da84"),l=o("5692"),c=o("5135"),d=o("90e3"),p=o("4930"),v=o("fdbf"),m=l("wks"),x=a.Symbol,E=v?x:x&&x.withoutSetter||d;i.exports=function(M){return c(m,M)||(p&&c(x,M)?m[M]=x[M]:m[M]=E("Symbol."+M)),m[M]}},b64b:function(i,s,o){var a=o("23e7"),l=o("7b0b"),c=o("df75"),d=o("d039"),p=d(function(){c(1)});a({target:"Object",stat:!0,forced:p},{keys:function(m){return c(l(m))}})},b727:function(i,s,o){var a=o("0366"),l=o("44ad"),c=o("7b0b"),d=o("50c4"),p=o("65f0"),v=[].push,m=function(x){var E=x==1,M=x==2,A=x==3,O=x==4,z=x==6,K=x==5||z;return function(ne,me,pe,N){for(var j=c(ne),q=l(j),I=a(me,pe,3),B=d(q.length),$=0,R=N||p,U=E?R(ne,B):M?R(ne,0):void 0,V,re;B>$;$++)if((K||$ in q)&&(V=q[$],re=I(V,$,j),x)){if(E)U[$]=re;else if(re)switch(x){case 3:return!0;case 5:return V;case 6:return $;case 2:v.call(U,V)}else if(O)return!1}return z?-1:A||O?O:U}};i.exports={forEach:m(0),map:m(1),filter:m(2),some:m(3),every:m(4),find:m(5),findIndex:m(6)}},c04e:function(i,s,o){var a=o("861d");i.exports=function(l,c){if(!a(l))return l;var d,p;if(c&&typeof(d=l.toString)=="function"&&!a(p=d.call(l))||typeof(d=l.valueOf)=="function"&&!a(p=d.call(l))||!c&&typeof(d=l.toString)=="function"&&!a(p=d.call(l)))return p;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(a){return o.call(a).slice(8,-1)}},c6cd:function(i,s,o){var a=o("da84"),l=o("ce4e"),c="__core-js_shared__",d=a[c]||l(c,{});i.exports=d},c740:function(i,s,o){var a=o("23e7"),l=o("b727").findIndex,c=o("44d2"),d=o("ae40"),p="findIndex",v=!0,m=d(p);p in[]&&Array(1)[p](function(){v=!1}),a({target:"Array",proto:!0,forced:v||!m},{findIndex:function(E){return l(this,E,arguments.length>1?arguments[1]:void 0)}}),c(p)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var a=o("23e7"),l=o("4d64").indexOf,c=o("a640"),d=o("ae40"),p=[].indexOf,v=!!p&&1/[1].indexOf(1,-0)<0,m=c("indexOf"),x=d("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:v||!m||!x},{indexOf:function(M){return v?p.apply(this,arguments)||0:l(this,M,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var a=o("5135"),l=o("fc6a"),c=o("4d64").indexOf,d=o("d012");i.exports=function(p,v){var m=l(p),x=0,E=[],M;for(M in m)!a(d,M)&&a(m,M)&&E.push(M);for(;v.length>x;)a(m,M=v[x++])&&(~c(E,M)||E.push(M));return E}},caad:function(i,s,o){var a=o("23e7"),l=o("4d64").includes,c=o("44d2"),d=o("ae40"),p=d("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!p},{includes:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(i,s,o){var a=o("da84"),l=o("861d"),c=a.document,d=l(c)&&l(c.createElement);i.exports=function(p){return d?c.createElement(p):{}}},ce4e:function(i,s,o){var a=o("da84"),l=o("9112");i.exports=function(c,d){try{l(a,c,d)}catch{a[c]=d}return d}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var a=o("428f"),l=o("da84"),c=function(d){return typeof d=="function"?d:void 0};i.exports=function(d,p){return arguments.length<2?c(a[d])||c(l[d]):a[d]&&a[d][p]||l[d]&&l[d][p]}},d1e7:function(i,s,o){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!a.call({1:2},1);s.f=c?function(p){var v=l(this,p);return!!v&&v.enumerable}:a},d28b:function(i,s,o){var a=o("746f");a("iterator")},d2bb:function(i,s,o){var a=o("825a"),l=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,d={},p;try{p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,p.call(d,[]),c=d instanceof Array}catch{}return function(m,x){return a(m),l(x),c?p.call(m,x):m.__proto__=x,m}}():void 0)},d3b7:function(i,s,o){var a=o("00ee"),l=o("6eeb"),c=o("b041");a||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(i,s,o){var a=o("9bf2").f,l=o("5135"),c=o("b622"),d=c("toStringTag");i.exports=function(p,v,m){p&&!l(p=m?p:p.prototype,d)&&a(p,d,{configurable:!0,value:v})}},d58f:function(i,s,o){var a=o("1c0b"),l=o("7b0b"),c=o("44ad"),d=o("50c4"),p=function(v){return function(m,x,E,M){a(x);var A=l(m),O=c(A),z=d(A.length),K=v?z-1:0,ne=v?-1:1;if(E<2)for(;;){if(K in O){M=O[K],K+=ne;break}if(K+=ne,v?K<0:z<=K)throw TypeError("Reduce of empty array with no initial value")}for(;v?K>=0:z>K;K+=ne)K in O&&(M=x(M,O[K],K,A));return M}};i.exports={left:p(!1),right:p(!0)}},d784:function(i,s,o){o("ac1f");var a=o("6eeb"),l=o("d039"),c=o("b622"),d=o("9263"),p=o("9112"),v=c("species"),m=!l(function(){var O=/./;return O.exec=function(){var z=[];return z.groups={a:"7"},z},"".replace(O,"$<a>")!=="7"}),x=function(){return"a".replace(/./,"$0")==="$0"}(),E=c("replace"),M=function(){return/./[E]?/./[E]("a","$0")==="":!1}(),A=!l(function(){var O=/(?:)/,z=O.exec;O.exec=function(){return z.apply(this,arguments)};var K="ab".split(O);return K.length!==2||K[0]!=="a"||K[1]!=="b"});i.exports=function(O,z,K,ne){var me=c(O),pe=!l(function(){var $={};return $[me]=function(){return 7},""[O]($)!=7}),N=pe&&!l(function(){var $=!1,R=/a/;return O==="split"&&(R={},R.constructor={},R.constructor[v]=function(){return R},R.flags="",R[me]=/./[me]),R.exec=function(){return $=!0,null},R[me](""),!$});if(!pe||!N||O==="replace"&&!(m&&x&&!M)||O==="split"&&!A){var j=/./[me],q=K(me,""[O],function($,R,U,V,re){return R.exec===d?pe&&!re?{done:!0,value:j.call(R,U,V)}:{done:!0,value:$.call(U,R,V)}:{done:!1}},{REPLACE_KEEPS_$0:x,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:M}),I=q[0],B=q[1];a(String.prototype,O,I),a(RegExp.prototype,me,z==2?function($,R){return B.call($,this,R)}:function($){return B.call($,this)})}ne&&p(RegExp.prototype[me],"sham",!0)}},d81d:function(i,s,o){var a=o("23e7"),l=o("b727").map,c=o("1dde"),d=o("ae40"),p=c("map"),v=d("map");a({target:"Array",proto:!0,forced:!p||!v},{map:function(x){return l(this,x,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(a){var l=function(c){return c&&c.Math==Math&&c};i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("56ef"),d=o("fc6a"),p=o("06cf"),v=o("8418");a({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(x){for(var E=d(x),M=p.f,A=c(E),O={},z=0,K,ne;A.length>z;)ne=M(E,K=A[z++]),ne!==void 0&&v(O,K,ne);return O}})},dbf1:function(i,s,o){(function(a){o.d(s,"a",function(){return c});function l(){return typeof window<"u"?window.console:a.console}var c=l()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("e260"),d=o("9112"),p=o("b622"),v=p("iterator"),m=p("toStringTag"),x=c.values;for(var E in l){var M=a[E],A=M&&M.prototype;if(A){if(A[v]!==x)try{d(A,v,x)}catch{A[v]=x}if(A[m]||d(A,m,E),l[E]){for(var O in c)if(A[O]!==c[O])try{d(A,O,c[O])}catch{A[O]=c[O]}}}}},df75:function(i,s,o){var a=o("ca84"),l=o("7839");i.exports=Object.keys||function(d){return a(d,l)}},e01a:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("da84"),d=o("5135"),p=o("861d"),v=o("9bf2").f,m=o("e893"),x=c.Symbol;if(l&&typeof x=="function"&&(!("description"in x.prototype)||x().description!==void 0)){var E={},M=function(){var me=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),pe=this instanceof M?new x(me):me===void 0?x():x(me);return me===""&&(E[pe]=!0),pe};m(M,x);var A=M.prototype=x.prototype;A.constructor=M;var O=A.toString,z=String(x("test"))=="Symbol(test)",K=/^Symbol\((.*)\)[^)]+$/;v(A,"description",{configurable:!0,get:function(){var me=p(this)?this.valueOf():this,pe=O.call(me);if(d(E,me))return"";var N=z?pe.slice(7,-1):pe.replace(K,"$1");return N===""?void 0:N}}),a({global:!0,forced:!0},{Symbol:M})}},e163:function(i,s,o){var a=o("5135"),l=o("7b0b"),c=o("f772"),d=o("e177"),p=c("IE_PROTO"),v=Object.prototype;i.exports=d?Object.getPrototypeOf:function(m){return m=l(m),a(m,p)?m[p]:typeof m.constructor=="function"&&m instanceof m.constructor?m.constructor.prototype:m instanceof Object?v:null}},e177:function(i,s,o){var a=o("d039");i.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(i,s,o){var a=o("fc6a"),l=o("44d2"),c=o("3f8c"),d=o("69f3"),p=o("7dd0"),v="Array Iterator",m=d.set,x=d.getterFor(v);i.exports=p(Array,"Array",function(E,M){m(this,{type:v,target:a(E),index:0,kind:M})},function(){var E=x(this),M=E.target,A=E.kind,O=E.index++;return!M||O>=M.length?(E.target=void 0,{value:void 0,done:!0}):A=="keys"?{value:O,done:!1}:A=="values"?{value:M[O],done:!1}:{value:[O,M[O]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("fc6a"),d=o("06cf").f,p=o("83ab"),v=l(function(){d(1)}),m=!p||v;a({target:"Object",stat:!0,forced:m,sham:!p},{getOwnPropertyDescriptor:function(E,M){return d(c(E),M)}})},e538:function(i,s,o){var a=o("b622");s.f=a},e893:function(i,s,o){var a=o("5135"),l=o("56ef"),c=o("06cf"),d=o("9bf2");i.exports=function(p,v){for(var m=l(v),x=d.f,E=c.f,M=0;M<m.length;M++){var A=m[M];a(p,A)||x(p,A,E(v,A))}}},e8b5:function(i,s,o){var a=o("c6b6");i.exports=Array.isArray||function(c){return a(c)=="Array"}},e95a:function(i,s,o){var a=o("b622"),l=o("3f8c"),c=a("iterator"),d=Array.prototype;i.exports=function(p){return p!==void 0&&(l.Array===p||d[c]===p)}},f5df:function(i,s,o){var a=o("00ee"),l=o("c6b6"),c=o("b622"),d=c("toStringTag"),p=l(function(){return arguments}())=="Arguments",v=function(m,x){try{return m[x]}catch{}};i.exports=a?l:function(m){var x,E,M;return m===void 0?"Undefined":m===null?"Null":typeof(E=v(x=Object(m),d))=="string"?E:p?l(x):(M=l(x))=="Object"&&typeof x.callee=="function"?"Arguments":M}},f772:function(i,s,o){var a=o("5692"),l=o("90e3"),c=a("keys");i.exports=function(d){return c[d]||(c[d]=l(d))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var a=window.document.currentScript;{var l=o("8875");a=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(o.p=c[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function d(Qe,ot,it){return ot in Qe?Object.defineProperty(Qe,ot,{value:it,enumerable:!0,configurable:!0,writable:!0}):Qe[ot]=it,Qe}function p(Qe,ot){var it=Object.keys(Qe);if(Object.getOwnPropertySymbols){var Vt=Object.getOwnPropertySymbols(Qe);ot&&(Vt=Vt.filter(function(Qt){return Object.getOwnPropertyDescriptor(Qe,Qt).enumerable})),it.push.apply(it,Vt)}return it}function v(Qe){for(var ot=1;ot<arguments.length;ot++){var it=arguments[ot]!=null?arguments[ot]:{};ot%2?p(Object(it),!0).forEach(function(Vt){d(Qe,Vt,it[Vt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Qe,Object.getOwnPropertyDescriptors(it)):p(Object(it)).forEach(function(Vt){Object.defineProperty(Qe,Vt,Object.getOwnPropertyDescriptor(it,Vt))})}return Qe}function m(Qe){if(Array.isArray(Qe))return Qe}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function x(Qe,ot){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Qe)))){var it=[],Vt=!0,Qt=!1,kn=void 0;try{for(var Ln=Qe[Symbol.iterator](),Mn;!(Vt=(Mn=Ln.next()).done)&&(it.push(Mn.value),!(ot&&it.length===ot));Vt=!0);}catch(Zn){Qt=!0,kn=Zn}finally{try{!Vt&&Ln.return!=null&&Ln.return()}finally{if(Qt)throw kn}}return it}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function E(Qe,ot){(ot==null||ot>Qe.length)&&(ot=Qe.length);for(var it=0,Vt=new Array(ot);it<ot;it++)Vt[it]=Qe[it];return Vt}function M(Qe,ot){if(Qe){if(typeof Qe=="string")return E(Qe,ot);var it=Object.prototype.toString.call(Qe).slice(8,-1);if(it==="Object"&&Qe.constructor&&(it=Qe.constructor.name),it==="Map"||it==="Set")return Array.from(Qe);if(it==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(it))return E(Qe,ot)}}function A(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O(Qe,ot){return m(Qe)||x(Qe,ot)||M(Qe,ot)||A()}function z(Qe){if(Array.isArray(Qe))return E(Qe)}function K(Qe){if(typeof Symbol<"u"&&Symbol.iterator in Object(Qe))return Array.from(Qe)}function ne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function me(Qe){return z(Qe)||K(Qe)||M(Qe)||ne()}var pe=o("a352"),N=o.n(pe);function j(Qe){Qe.parentElement!==null&&Qe.parentElement.removeChild(Qe)}function q(Qe,ot,it){var Vt=it===0?Qe.children[0]:Qe.children[it-1].nextSibling;Qe.insertBefore(ot,Vt)}var I=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function B(Qe){var ot=Object.create(null);return function(Vt){var Qt=ot[Vt];return Qt||(ot[Vt]=Qe(Vt))}}var $=/-(\w)/g,R=B(function(Qe){return Qe.replace($,function(ot,it){return it.toUpperCase()})});o("5db7"),o("73d9");var U=["Start","Add","Remove","Update","End"],V=["Choose","Unchoose","Sort","Filter","Clone"],re=["Move"],J=[re,U,V].flatMap(function(Qe){return Qe}).map(function(Qe){return"on".concat(Qe)}),_e={manage:re,manageAndEmit:U,emit:V};function Le(Qe){return J.indexOf(Qe)!==-1}o("caad"),o("2ca0");var Oe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function Z(Qe){return Oe.includes(Qe)}function G(Qe){return["transition-group","TransitionGroup"].includes(Qe)}function se(Qe){return["id","class","role","style"].includes(Qe)||Qe.startsWith("data-")||Qe.startsWith("aria-")||Qe.startsWith("on")}function ce(Qe){return Qe.reduce(function(ot,it){var Vt=O(it,2),Qt=Vt[0],kn=Vt[1];return ot[Qt]=kn,ot},{})}function he(Qe){var ot=Qe.$attrs,it=Qe.componentData,Vt=it===void 0?{}:it,Qt=ce(Object.entries(ot).filter(function(kn){var Ln=O(kn,2),Mn=Ln[0];return Ln[1],se(Mn)}));return v(v({},Qt),Vt)}function ve(Qe){var ot=Qe.$attrs,it=Qe.callBackBuilder,Vt=ce(ee(ot));Object.entries(it).forEach(function(kn){var Ln=O(kn,2),Mn=Ln[0],Zn=Ln[1];_e[Mn].forEach(function(en){Vt["on".concat(en)]=Zn(en)})});var Qt="[data-draggable]".concat(Vt.draggable||"");return v(v({},Vt),{},{draggable:Qt})}function ee(Qe){return Object.entries(Qe).filter(function(ot){var it=O(ot,2),Vt=it[0];return it[1],!se(Vt)}).map(function(ot){var it=O(ot,2),Vt=it[0],Qt=it[1];return[R(Vt),Qt]}).filter(function(ot){var it=O(ot,2),Vt=it[0];return it[1],!Le(Vt)})}o("c740");function X(Qe,ot){if(!(Qe instanceof ot))throw new TypeError("Cannot call a class as a function")}function De(Qe,ot){for(var it=0;it<ot.length;it++){var Vt=ot[it];Vt.enumerable=Vt.enumerable||!1,Vt.configurable=!0,"value"in Vt&&(Vt.writable=!0),Object.defineProperty(Qe,Vt.key,Vt)}}function Te(Qe,ot,it){return ot&&De(Qe.prototype,ot),Qe}var qe=function(ot){var it=ot.el;return it},ge=function(ot,it){return ot.__draggable_context=it},Q=function(ot){return ot.__draggable_context},ie=function(){function Qe(ot){var it=ot.nodes,Vt=it.header,Qt=it.default,kn=it.footer,Ln=ot.root,Mn=ot.realList;X(this,Qe),this.defaultNodes=Qt,this.children=[].concat(me(Vt),me(Qt),me(kn)),this.externalComponent=Ln.externalComponent,this.rootTransition=Ln.transition,this.tag=Ln.tag,this.realList=Mn}return Te(Qe,[{key:"render",value:function(it,Vt){var Qt=this.tag,kn=this.children,Ln=this._isRootComponent,Mn=Ln?{default:function(){return kn}}:kn;return it(Qt,Vt,Mn)}},{key:"updated",value:function(){var it=this.defaultNodes,Vt=this.realList;it.forEach(function(Qt,kn){ge(qe(Qt),{element:Vt[kn],index:kn})})}},{key:"getUnderlyingVm",value:function(it){return Q(it)}},{key:"getVmIndexFromDomIndex",value:function(it,Vt){var Qt=this.defaultNodes,kn=Qt.length,Ln=Vt.children,Mn=Ln.item(it);if(Mn===null)return kn;var Zn=Q(Mn);if(Zn)return Zn.index;if(kn===0)return 0;var en=qe(Qt[0]),wn=me(Ln).findIndex(function(En){return En===en});return it<wn?0:kn}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),Qe}(),fe=o("8bbf");function Ce(Qe,ot){var it=Qe[ot];return it?it():[]}function de(Qe){var ot=Qe.$slots,it=Qe.realList,Vt=Qe.getKey,Qt=it||[],kn=["header","footer"].map(function(En){return Ce(ot,En)}),Ln=O(kn,2),Mn=Ln[0],Zn=Ln[1],en=ot.item;if(!en)throw new Error("draggable element must have an item slot");var wn=Qt.flatMap(function(En,Xn){return en({element:En,index:Xn}).map(function(dr){return dr.key=Vt(En),dr.props=v(v({},dr.props||{}),{},{"data-draggable":!0}),dr})});if(wn.length!==Qt.length)throw new Error("Item slot must have only one child");return{header:Mn,footer:Zn,default:wn}}function Xe(Qe){var ot=G(Qe),it=!Z(Qe)&&!ot;return{transition:ot,externalComponent:it,tag:it?Object(fe.resolveComponent)(Qe):ot?fe.TransitionGroup:Qe}}function Ie(Qe){var ot=Qe.$slots,it=Qe.tag,Vt=Qe.realList,Qt=Qe.getKey,kn=de({$slots:ot,realList:Vt,getKey:Qt}),Ln=Xe(it);return new ie({nodes:kn,root:Ln,realList:Vt})}function Ye(Qe,ot){var it=this;Object(fe.nextTick)(function(){return it.$emit(Qe.toLowerCase(),ot)})}function Je(Qe){var ot=this;return function(it,Vt){if(ot.realList!==null)return ot["onDrag".concat(Qe)](it,Vt)}}function Ge(Qe){var ot=this,it=Je.call(this,Qe);return function(Vt,Qt){it.call(ot,Vt,Qt),Ye.call(ot,Qe,Vt)}}var wt=null,Ct={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(ot){return ot}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Wt=["update:modelValue","change"].concat(me([].concat(me(_e.manageAndEmit),me(_e.emit)).map(function(Qe){return Qe.toLowerCase()}))),sn=Object(fe.defineComponent)({name:"draggable",inheritAttrs:!1,props:Ct,emits:Wt,data:function(){return{error:!1}},render:function(){try{this.error=!1;var ot=this.$slots,it=this.$attrs,Vt=this.tag,Qt=this.componentData,kn=this.realList,Ln=this.getKey,Mn=Ie({$slots:ot,tag:Vt,realList:kn,getKey:Ln});this.componentStructure=Mn;var Zn=he({$attrs:it,componentData:Qt});return Mn.render(fe.h,Zn)}catch(en){return this.error=!0,Object(fe.h)("pre",{style:{color:"red"}},en.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&I.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var ot=this;if(!this.error){var it=this.$attrs,Vt=this.$el,Qt=this.componentStructure;Qt.updated();var kn=ve({$attrs:it,callBackBuilder:{manageAndEmit:function(Zn){return Ge.call(ot,Zn)},emit:function(Zn){return Ye.bind(ot,Zn)},manage:function(Zn){return Je.call(ot,Zn)}}}),Ln=Vt.nodeType===1?Vt:Vt.parentElement;this._sortable=new N.a(Ln,kn),this.targetDomElement=Ln,Ln.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var ot=this.list;return ot||this.modelValue},getKey:function(){var ot=this.itemKey;return typeof ot=="function"?ot:function(it){return it[ot]}}},watch:{$attrs:{handler:function(ot){var it=this._sortable;it&&ee(ot).forEach(function(Vt){var Qt=O(Vt,2),kn=Qt[0],Ln=Qt[1];it.option(kn,Ln)})},deep:!0}},methods:{getUnderlyingVm:function(ot){return this.componentStructure.getUnderlyingVm(ot)||null},getUnderlyingPotencialDraggableComponent:function(ot){return ot.__draggable_component__},emitChanges:function(ot){var it=this;Object(fe.nextTick)(function(){return it.$emit("change",ot)})},alterList:function(ot){if(this.list){ot(this.list);return}var it=me(this.modelValue);ot(it),this.$emit("update:modelValue",it)},spliceList:function(){var ot=arguments,it=function(Qt){return Qt.splice.apply(Qt,me(ot))};this.alterList(it)},updatePosition:function(ot,it){var Vt=function(kn){return kn.splice(it,0,kn.splice(ot,1)[0])};this.alterList(Vt)},getRelatedContextFromMoveEvent:function(ot){var it=ot.to,Vt=ot.related,Qt=this.getUnderlyingPotencialDraggableComponent(it);if(!Qt)return{component:Qt};var kn=Qt.realList,Ln={list:kn,component:Qt};if(it!==Vt&&kn){var Mn=Qt.getUnderlyingVm(Vt)||{};return v(v({},Mn),Ln)}return Ln},getVmIndexFromDomIndex:function(ot){return this.componentStructure.getVmIndexFromDomIndex(ot,this.targetDomElement)},onDragStart:function(ot){this.context=this.getUnderlyingVm(ot.item),ot.item._underlying_vm_=this.clone(this.context.element),wt=ot.item},onDragAdd:function(ot){var it=ot.item._underlying_vm_;if(it!==void 0){j(ot.item);var Vt=this.getVmIndexFromDomIndex(ot.newIndex);this.spliceList(Vt,0,it);var Qt={element:it,newIndex:Vt};this.emitChanges({added:Qt})}},onDragRemove:function(ot){if(q(this.$el,ot.item,ot.oldIndex),ot.pullMode==="clone"){j(ot.clone);return}var it=this.context,Vt=it.index,Qt=it.element;this.spliceList(Vt,1);var kn={element:Qt,oldIndex:Vt};this.emitChanges({removed:kn})},onDragUpdate:function(ot){j(ot.item),q(ot.from,ot.item,ot.oldIndex);var it=this.context.index,Vt=this.getVmIndexFromDomIndex(ot.newIndex);this.updatePosition(it,Vt);var Qt={element:this.context.element,oldIndex:it,newIndex:Vt};this.emitChanges({moved:Qt})},computeFutureIndex:function(ot,it){if(!ot.element)return 0;var Vt=me(it.to.children).filter(function(Mn){return Mn.style.display!=="none"}),Qt=Vt.indexOf(it.related),kn=ot.component.getVmIndexFromDomIndex(Qt),Ln=Vt.indexOf(wt)!==-1;return Ln||!it.willInsertAfter?kn:kn+1},onDragMove:function(ot,it){var Vt=this.move,Qt=this.realList;if(!Vt||!Qt)return!0;var kn=this.getRelatedContextFromMoveEvent(ot),Ln=this.computeFutureIndex(kn,ot),Mn=v(v({},this.context),{},{futureIndex:Ln}),Zn=v(v({},ot),{},{relatedContext:kn,draggedContext:Mn});return Vt(Zn,it)},onDragEnd:function(){wt=null}}}),bn=sn;s.default=bn},fb6a:function(i,s,o){var a=o("23e7"),l=o("861d"),c=o("e8b5"),d=o("23cb"),p=o("50c4"),v=o("fc6a"),m=o("8418"),x=o("b622"),E=o("1dde"),M=o("ae40"),A=E("slice"),O=M("slice",{ACCESSORS:!0,0:0,1:2}),z=x("species"),K=[].slice,ne=Math.max;a({target:"Array",proto:!0,forced:!A||!O},{slice:function(pe,N){var j=v(this),q=p(j.length),I=d(pe,q),B=d(N===void 0?q:N,q),$,R,U;if(c(j)&&($=j.constructor,typeof $=="function"&&($===Array||c($.prototype))?$=void 0:l($)&&($=$[z],$===null&&($=void 0)),$===Array||$===void 0))return K.call(j,I,B);for(R=new($===void 0?Array:$)(ne(B-I,0)),U=0;I<B;I++,U++)I in j&&m(R,U,j[I]);return R.length=U,R}})},fc6a:function(i,s,o){var a=o("44ad"),l=o("1d80");i.exports=function(c){return a(l(c))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var a=o("4930");i.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(aP);var vZ=aP.exports;const yZ=j_(vZ),bZ={class:"h-full bg-gray-50"},_Z={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},wZ={class:"sm:flex sm:items-center"},xZ={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},LZ={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10"},SZ={class:"mt-6 bg-white shadow rounded-lg p-4"},CZ={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},EZ=["value"],PZ={key:0,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},MZ={key:1,class:"mt-6 overflow-x-auto pb-4"},kZ={key:0,class:"p-6 text-center bg-white shadow rounded-lg mb-4"},AZ={class:"flex space-x-4 min-w-max"},TZ={class:"bg-white rounded-lg shadow overflow-hidden"},DZ={class:"flex items-center"},OZ={class:"flex items-center"},NZ={class:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full"},IZ={class:"p-2 max-h-[calc(100vh-250px)] overflow-y-auto"},BZ={class:"min-h-[100px] draggable-container"},RZ={class:"note-container"},FZ={class:"bg-white rounded-md shadow-sm border border-gray-200 overflow-hidden"},jZ={class:"p-3 flex items-center justify-between note-drag-handle cursor-move no-select"},zZ={class:"flex items-center"},$Z={class:"text-sm font-medium text-gray-900 truncate"},VZ={class:"px-3 py-2"},UZ={class:"text-sm text-gray-500 line-clamp-2"},HZ={class:"px-3 py-2 bg-gray-50 border-t border-gray-100 flex justify-between items-center"},WZ={class:"text-xs text-gray-500"},GZ={class:"flex space-x-1"},qZ={key:0,class:"text-xs text-primary-500 flex items-center mr-1",title:"Note golocalise"},YZ={key:1,class:"text-xs text-gray-400 flex items-center mr-1",title:"Note simple"},KZ=["onClick"],ZZ=["onClick"],XZ=["onClick"],JZ=["onClick"],QZ={key:0,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},eX={class:"flex items-center justify-center min-h-screen w-full"},tX={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},nX={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3 p-4 md:px-6"},rX=Fs({__name:"NotesView",setup(t){const e=Nm(),n=tu(),r=wf(),i=Tp(),s=xt(!0),o=xt(!1),a=xt(!1),l=xt(null),c=xt(null),d=xt("info"),p=xt(null),v=Kn(()=>{const Oe=r.getSortedColumns;return console.log("[NotesView][columnsForDrag] Colonnes tries:",Oe),Oe}),m=[{id:Xi.PRIVATE,title:"Priv",description:"Visible uniquement par vous"},{id:Xi.COMPANY,title:"Entreprise",description:"Visible uniquement par l'entreprise"},{id:Xi.EMPLOYEE,title:"Salaris",description:"Visible par l'entreprise et ses salaris"},{id:Xi.VISITOR,title:"Visiteurs",description:"Visible par tous (entreprise, salaris et visiteurs)"}],x=nu({search:"",date:"",accessLevel:""});function E(Oe){if(!Oe)return"Date non dfinie";try{const Z=new Date(Oe);return isNaN(Z.getTime())?(console.warn("[safeFormatDate] Date invalide:",Oe),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(Z)}catch(Z){return console.error("[safeFormatDate] Erreur lors du formatage de la date:",Z),"Date invalide"}}function M(Oe){if(!Oe)return null;try{const Z=new Date(Oe);return isNaN(Z.getTime())?(console.warn("[safeDate] Date invalide:",Oe),null):Z}catch(Z){return console.error("[safeDate] Erreur lors de la cration de la date:",Z),null}}function A(Oe){return E(Oe)}const O=Kn(()=>{let Oe=r.getAccessibleNotes;if(x.search){const Z=x.search.toLowerCase();Oe=Oe.filter(G=>G.title.toLowerCase().includes(Z)||G.description.toLowerCase().includes(Z))}if(x.accessLevel&&(Oe=Oe.filter(Z=>Z.accessLevel===x.accessLevel)),x.date){const Z=new Date;Z.setHours(0,0,0,0);const G=new Date(Z);G.setDate(Z.getDate()-Z.getDay());const se=new Date(Z.getFullYear(),Z.getMonth(),1);Oe=Oe.filter(ce=>{const he=M(ce.createdAt);return he?x.date==="today"?he>=Z:x.date==="week"?he>=G:x.date==="month"?he>=se:!0:!1})}return Oe}),z=Kn(()=>Oe=>r.getNotesByColumn(Oe));function K(Oe){if(Oe==null)return"Non dfini";switch(Oe){case Xi.PRIVATE:return"Priv";case Xi.COMPANY:return"Entreprise";case Xi.EMPLOYEE:return"Salaris";case Xi.VISITOR:return"Visiteurs";default:return"Non dfini"}}function ne(Oe){if(Oe==null)return"#9CA3AF";switch(Oe){case Xi.PRIVATE:return"#9CA3AF";case Xi.COMPANY:return"#EF4444";case Xi.EMPLOYEE:return"#F59E0B";case Xi.VISITOR:return"#10B981";default:return"#6B7280"}}fo(()=>{console.log("[NotesView] Composant mont"),me().then(()=>{console.log("[NotesView] Donnes charges avec succs")}).catch(Oe=>{console.error("[NotesView] Erreur lors du chargement des donnes:",Oe),n.error("Erreur lors du chargement des donnes")})});async function me(){console.log(`
[NotesView][loadInitialData] Dbut du chargement des donnes`);try{s.value=!0,console.log("[NotesView][loadInitialData] Chargement des colonnes..."),await r.loadColumns(),console.log("[NotesView][loadInitialData] Colonnes charges:",r.columns),console.log("[NotesView][loadInitialData] Chargement des notes...");const Oe=await La.getNotes();console.log("[NotesView][loadInitialData] Notes reues:",Oe.data),Oe.data.length>0?(console.log("[NotesView][loadInitialData] Dtails des notes:"),Oe.data.forEach((ce,he)=>{console.log(`Note ${he+1}:`,{id:ce.id,title:ce.title,columnId:ce.column||ce.column_id,access_level:ce.access_level,column:ce.column})})):console.warn("[NotesView][loadInitialData] Aucune note reue du backend!");const Z=r.columns.map(ce=>ce.id),G=Oe.data.filter(ce=>{const he=(ce.column||ce.column_id||"").toString();return he===""||!Z.includes(he)});if(G.length>0){console.warn(`[NotesView][loadInitialData] ${G.length} notes avec des colonnes invalides:`,G),console.log("[NotesView][loadInitialData] Assignation des notes  la colonne  faire (2)");for(const ce of G)try{await La.updateNote(ce.id,{column:"2"})}catch(he){console.error(`[NotesView][loadInitialData] Erreur lors de l'assignation de la note ${ce.id}  la colonne  faire:`,he)}}const se=Oe.data.map(ce=>({id:ce.id,title:ce.title,description:ce.description,location:ce.location,columnId:(ce.column||ce.column_id||"2").toString(),access_level:ce.access_level,style:ce.style||{},comments:ce.comments||[],photos:ce.photos||[],order:ce.order||0,createdAt:ce.created_at,updatedAt:ce.updated_at}));r.notes.length=0,se.forEach(ce=>{r.addNote(ce)}),console.log("[NotesView][loadInitialData] Notes charges dans le store");for(const ce of r.columns){const he=r.getNotesByColumn(ce.id);console.log(`[NotesView][loadInitialData] Colonne ${ce.title} (${ce.id}): ${he.length} notes`),he.length>0&&he.forEach(ve=>{console.log(`  - Note ID=${ve.id}, Titre="${ve.title}", Niveau d'accs=${ve.accessLevel}, Colonne=${ve.columnId}`)})}}catch(Oe){console.error("[NotesView][loadInitialData] Erreur:",Oe),n.error("Erreur lors du chargement des donnes")}finally{s.value=!1,console.log("[NotesView][loadInitialData] Chargement termin")}}function pe(){e.push({path:"/",query:{tool:"Note"}})}async function N(Oe){if(!Oe.location){n.warning("Cette note n'est pas golocalise");return}try{const G=(await La.getNote(Oe.id)).data,se=G.plan;console.log("[NotesView][viewOnMap] Dtails de la note rcuprs:",G),e.push({path:"/",query:{lat:Array.isArray(Oe.location)?Oe.location[0].toString():Oe.location.coordinates[1].toString(),lng:Array.isArray(Oe.location)?Oe.location[1].toString():Oe.location.coordinates[0].toString(),noteId:Oe.id.toString(),planId:se?se.toString():void 0}})}catch(Z){console.error("[NotesView][viewOnMap] Erreur lors de la rcupration des dtails de la note:",Z),n.error("Erreur lors de l'ouverture de la note sur la carte")}}function j(Oe){if(!Oe.location){n.warning("Cette note n'est pas golocalise");return}let Z,G;Array.isArray(Oe.location)?(Z=Oe.location[0],G=Oe.location[1]):(Z=Oe.location.coordinates[1],G=Oe.location.coordinates[0]);const se=`https://www.google.com/maps/dir/?api=1&destination=${Z},${G}`;window.open(se,"_blank")}function q(Oe){c.value=JSON.parse(JSON.stringify(Oe)),d.value="info",a.value=!0}async function I(Oe){if(console.log("[NotesView][handleNoteSave] Note sauvegarde:",Oe),Oe&&Oe.id){const Z=r.notes.find(G=>G.id===Oe.id);Z&&(!Oe.comments&&Z.comments&&(Oe.comments=Z.comments),!Oe.photos&&Z.photos&&(Oe.photos=Z.photos))}if(a.value=!1,p.value&&c.value)try{const Z={location:c.value.location,name:c.value.title,description:c.value.description,columnId:c.value.columnId,accessLevel:c.value.accessLevel,style:c.value.style,comments:c.value.comments||[],photos:c.value.photos||[],order:c.value.order,createdAt:c.value.createdAt,updatedAt:new Date().toISOString()},G=i.elements.findIndex(se=>{var ce;return se.type_forme==="Note"&&se.id===((ce=c.value)==null?void 0:ce.id)});G!==-1?i.elements[G].data=Z:i.elements.push({id:c.value.id,type_forme:"Note",data:Z}),await i.saveToPlan(p.value),n.success("Note sauvegarde et plan mis  jour avec succs")}catch(Z){console.error("Erreur lors de la sauvegarde de la note:",Z),n.error("Erreur lors de la sauvegarde de la note")}}function B(Oe){l.value=Oe,o.value=!0}async function $(){if(l.value)try{try{await La.deleteNote(l.value.id)}catch(Oe){if(Oe.response&&Oe.response.status===404)console.log("[NotesView][deleteNote] Note non trouve dans le backend (404), suppression locale uniquement");else throw Oe}r.removeNote(l.value.id),n.success("Note supprime avec succs")}catch(Oe){console.error("Erreur lors de la suppression de la note:",Oe),n.error("Erreur lors de la suppression de la note")}finally{o.value=!1,l.value=null}}async function R(Oe,Z){console.log("[NotesView][onDragChange] vnement:",Oe),console.log("[NotesView][onDragChange] Colonne cible:",Z);try{if(Oe.added){const{element:G}=Oe.added;console.log("[NotesView][onDragChange] Note  dplacer:",G);const se=typeof G=="object"&&G.id?G.id:null;if(!se)throw console.error("[NotesView][onDragChange] ID de note invalide:",G),new Error("ID de note invalide");r.moveNote(se,Z);const he=z.value(Z).map(ee=>ee.id);r.reorderNotes(Z,he);const ve=r.getColumnById(Z);n.success(`Note dplace vers ${(ve==null?void 0:ve.title)||"une autre colonne"}`),await U(se,{columnId:Z})}if(Oe.moved){const G=z.value(Z),se=G.map(ce=>ce.id);r.reorderNotes(Z,se),n.success("Ordre des notes mis  jour");for(const[ce,he]of G.entries())await U(he.id,{order:ce})}}catch(G){console.error("[NotesView][onDragChange] Erreur:",G),n.error("Une erreur est survenue lors du dplacement de la note")}}async function U(Oe,Z){console.log("[NotesView][updateNoteInBackend] Mise  jour de la note:",Oe,Z);try{const G=r.notes.find(he=>he.id===Oe);if(!G){console.error("[NotesView][updateNoteInBackend] Note non trouve:",Oe);return}const se={...Z};if(Z.columnId){const he=r.getColumnById(Z.columnId);he?(console.log(`[NotesView][updateNoteInBackend] Mise  jour de la colonne: ${he.id} (${he.title})`),se.column=he.id,delete se.columnId,delete se.column_id):console.warn(`[NotesView][updateNoteInBackend] Colonne non trouve: ${Z.columnId}`)}const ce={...G,...se,updatedAt:new Date().toISOString()};console.log("[NotesView][updateNoteInBackend] Donnes envoyes au backend:",ce),await La.updateNote(Oe,ce),console.log("[NotesView][updateNoteInBackend] Note mise  jour avec succs")}catch(G){throw console.error("[NotesView][updateNoteInBackend] Erreur:",G),G}}function V(){c.value={id:"",title:"Nouvelle note",description:"",location:null,columnId:r.getDefaultColumn.id,accessLevel:Xi.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:[],photos:[]},a.value=!0,d.value="info"}const re=xt(null),J=xt(!1);function _e(){J.value=!J.value}function Le(Oe){re.value&&!re.value.contains(Oe.target)&&(J.value=!1)}return fo(()=>{document.addEventListener("click",Le)}),Td(()=>{document.removeEventListener("click",Le)}),(Oe,Z)=>{var G,se;return Re(),$e("div",bZ,[C("div",_Z,[C("div",wZ,[Z[6]||(Z[6]=C("div",{class:"sm:flex-auto"},[C("h1",{class:"text-2xl font-semibold text-gray-900"},"Notes"),C("p",{class:"mt-2 text-sm text-gray-700"}," Liste de toutes vos notes. ")],-1)),C("div",xZ,[C("div",{class:"relative",ref_key:"dropdownRef",ref:re},[C("button",{onClick:_e,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},Z[5]||(Z[5]=[si(" Crer "),C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])),J.value?(Re(),$e("div",LZ,[C("div",{class:"py-1"},[C("button",{onClick:V,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note simple "),C("button",{onClick:pe,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note golocalise ")])])):rn("",!0)],512)])]),C("div",SZ,[C("div",CZ,[C("div",null,[Z[7]||(Z[7]=C("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Pn(C("input",{type:"text",id:"search","onUpdate:modelValue":Z[0]||(Z[0]=ce=>x.search=ce),placeholder:"Rechercher par titre ou description...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[Rr,x.search]])]),C("div",null,[Z[9]||(Z[9]=C("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),Pn(C("select",{id:"date","onUpdate:modelValue":Z[1]||(Z[1]=ce=>x.date=ce),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},Z[8]||(Z[8]=[C("option",{value:""},"Toutes les dates",-1),C("option",{value:"today"},"Aujourd'hui",-1),C("option",{value:"week"},"Cette semaine",-1),C("option",{value:"month"},"Ce mois",-1)]),512),[[is,x.date]])]),C("div",null,[Z[11]||(Z[11]=C("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accs",-1)),Pn(C("select",{id:"accessLevel","onUpdate:modelValue":Z[2]||(Z[2]=ce=>x.accessLevel=ce),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[Z[10]||(Z[10]=C("option",{value:""},"Tous les niveaux",-1)),(Re(),$e(Cn,null,pr(m,ce=>C("option",{key:ce.id,value:ce.id},Tt(ce.title),9,EZ)),64))],512),[[is,x.accessLevel]])])])]),s.value?(Re(),$e("div",PZ,Z[12]||(Z[12]=[C("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),C("p",{class:"mt-2 text-sm text-gray-500"},"Chargement des notes...",-1)]))):(Re(),$e("div",MZ,[O.value.length===0&&v.value.length===0?(Re(),$e("div",kZ,Z[13]||(Z[13]=[C("p",{class:"text-sm text-gray-500"},"Aucune note ni colonne trouve",-1)]))):rn("",!0),C("div",AZ,[(Re(!0),$e(Cn,null,pr(v.value,ce=>(Re(),$e("div",{key:ce.id,class:"column-wrapper w-80 flex-shrink-0"},[C("div",TZ,[C("div",{class:"p-3 flex items-center justify-between no-select",style:Ql({backgroundColor:ce.color+"20",borderBottom:"2px solid "+ce.color})},[C("div",DZ,[C("h3",{class:"text-sm font-semibold",style:Ql({color:ce.color})},Tt(ce.title),5)]),C("div",OZ,[C("span",NZ,Tt(z.value(ce.id).length),1)])],4),C("div",IZ,[C("div",BZ,[pi(er(yZ),{list:z.value(ce.id),class:"space-y-2",group:"notes","item-key":"id",handle:".note-drag-handle",onChange:he=>R(he,ce.id),animation:150,"ghost-class":"ghost-card","chosen-class":"chosen","drag-class":"dragging"},{item:Wu(({element:he})=>[C("div",RZ,[C("div",FZ,[C("div",jZ,[C("div",zZ,[Z[14]||(Z[14]=C("svg",{class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),C("h4",$Z,Tt(he.title),1)]),C("div",null,[C("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:Ql({backgroundColor:ne(he.accessLevel)+"20",color:ne(he.accessLevel)})},Tt(K(he.accessLevel)||"Non dfini"),5)])]),C("div",VZ,[C("p",UZ,Tt(he.description||"Aucune description"),1)]),C("div",HZ,[C("span",WZ,Tt(he.updatedAt?A(he.updatedAt):he.createdAt?A(he.createdAt):"Date non dfinie"),1),C("div",GZ,[he.location?(Re(),$e("span",qZ,Z[15]||(Z[15]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))):(Re(),$e("span",YZ,Z[16]||(Z[16]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]))),he.location?(Re(),$e(Cn,{key:2},[C("button",{onClick:ve=>j(he),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Ouvrir dans Google Maps"},Z[17]||(Z[17]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),8,KZ),C("button",{onClick:ve=>N(he),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Voir sur la carte"},Z[18]||(Z[18]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)]),8,ZZ)],64)):rn("",!0),C("button",{onClick:ve=>q(he),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"diter la note"},Z[19]||(Z[19]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,XZ),C("button",{onClick:ve=>B(he),class:"p-1 text-gray-400 hover:text-red-500 focus:outline-none",title:"Supprimer la note"},Z[20]||(Z[20]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,JZ)])])])])]),"empty-content":Wu(()=>Z[21]||(Z[21]=[C("div",{class:"p-4 text-center text-gray-400 text-sm italic"}," Aucune note dans cette colonne ",-1)])),_:2},1032,["list","onChange"])])])])]))),128))])]))]),o.value?(Re(),$e("div",QZ,[C("div",eX,[Z[23]||(Z[23]=C("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),C("div",tX,[Z[22]||(Z[22]=Jl('<div class="p-4 md:p-6" data-v-3f5bbe8c><div class="flex items-start" data-v-3f5bbe8c><div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100" data-v-3f5bbe8c><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-3f5bbe8c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-3f5bbe8c></path></svg></div><div class="ml-4 flex-1" data-v-3f5bbe8c><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title" data-v-3f5bbe8c> Supprimer la note </h3><div class="mt-2" data-v-3f5bbe8c><p class="text-sm text-gray-500" data-v-3f5bbe8c> tes-vous sr de vouloir supprimer cette note ? Cette action est irrversible. </p></div></div></div></div>',1)),C("div",nX,[C("button",{onClick:$,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm"}," Supprimer "),C("button",{onClick:Z[3]||(Z[3]=ce=>o.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])])])])):rn("",!0),a.value?(Re(),$a(BE,{key:1,note:c.value,"is-new-note":!((G=c.value)!=null&&G.id),location:(se=c.value)==null?void 0:se.location,onClose:Z[4]||(Z[4]=ce=>a.value=!1),onSave:I},null,8,["note","is-new-note","location"])):rn("",!0)])}}}),iX=jh(rX,[["__scopeId","data-v-3f5bbe8c"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Rm(t){return t+.5|0}const fd=(t,e,n)=>Math.max(Math.min(t,n),e);function Mg(t){return fd(Rm(t*2.55),0,255)}function _d(t){return fd(Rm(t*255),0,255)}function Sh(t){return fd(Rm(t/2.55)/100,0,1)}function Z5(t){return fd(Rm(t*100),0,100)}const zu={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$b=[..."0123456789ABCDEF"],sX=t=>$b[t&15],oX=t=>$b[(t&240)>>4]+$b[t&15],O0=t=>(t&240)>>4===(t&15),aX=t=>O0(t.r)&&O0(t.g)&&O0(t.b)&&O0(t.a);function lX(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&zu[t[1]]*17,g:255&zu[t[2]]*17,b:255&zu[t[3]]*17,a:e===5?zu[t[4]]*17:255}:(e===7||e===9)&&(n={r:zu[t[1]]<<4|zu[t[2]],g:zu[t[3]]<<4|zu[t[4]],b:zu[t[5]]<<4|zu[t[6]],a:e===9?zu[t[7]]<<4|zu[t[8]]:255})),n}const uX=(t,e)=>t<255?e(t):"";function cX(t){var e=aX(t)?sX:oX;return t?"#"+e(t.r)+e(t.g)+e(t.b)+uX(t.a,e):void 0}const hX=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function bP(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function dX(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function fX(t,e,n){const r=bP(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function pX(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function K_(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,d;return s!==o&&(d=s-o,c=a>.5?d/(2-s-o):d/(s+o),l=pX(n,r,i,d,s),l=l*60+.5),[l|0,c||0,a]}function Z_(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(_d)}function X_(t,e,n){return Z_(bP,t,e,n)}function gX(t,e,n){return Z_(fX,t,e,n)}function mX(t,e,n){return Z_(dX,t,e,n)}function _P(t){return(t%360+360)%360}function vX(t){const e=hX.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Mg(+e[5]):_d(+e[5]));const i=_P(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=gX(i,s,o):e[1]==="hsv"?r=mX(i,s,o):r=X_(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function yX(t,e){var n=K_(t);n[0]=_P(n[0]+e),n=X_(n),t.r=n[0],t.g=n[1],t.b=n[2]}function bX(t){if(!t)return;const e=K_(t),n=e[0],r=Z5(e[1]),i=Z5(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Sh(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const X5={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},J5={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function _X(){const t={},e=Object.keys(J5),n=Object.keys(X5);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,X5[s]);s=parseInt(J5[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let N0;function wX(t){N0||(N0=_X(),N0.transparent=[0,0,0,0]);const e=N0[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const xX=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function LX(t){const e=xX.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Mg(o):fd(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Mg(r):fd(r,0,255)),i=255&(e[4]?Mg(i):fd(i,0,255)),s=255&(e[6]?Mg(s):fd(s,0,255)),{r,g:i,b:s,a:n}}}function SX(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Sh(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const _2=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ep=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function CX(t,e,n){const r=ep(Sh(t.r)),i=ep(Sh(t.g)),s=ep(Sh(t.b));return{r:_d(_2(r+n*(ep(Sh(e.r))-r))),g:_d(_2(i+n*(ep(Sh(e.g))-i))),b:_d(_2(s+n*(ep(Sh(e.b))-s))),a:t.a+n*(e.a-t.a)}}function I0(t,e,n){if(t){let r=K_(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=X_(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function wP(t,e){return t&&Object.assign(e||{},t)}function Q5(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=_d(t[3]))):(e=wP(t,{r:0,g:0,b:0,a:1}),e.a=_d(e.a)),e}function EX(t){return t.charAt(0)==="r"?LX(t):vX(t)}class bm{constructor(e){if(e instanceof bm)return e;const n=typeof e;let r;n==="object"?r=Q5(e):n==="string"&&(r=lX(e)||wX(e)||EX(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=wP(this._rgb);return e&&(e.a=Sh(e.a)),e}set rgb(e){this._rgb=Q5(e)}rgbString(){return this._valid?SX(this._rgb):void 0}hexString(){return this._valid?cX(this._rgb):void 0}hslString(){return this._valid?bX(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=CX(this._rgb,e._rgb,n)),this}clone(){return new bm(this.rgb)}alpha(e){return this._rgb.a=_d(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Rm(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return I0(this._rgb,2,e),this}darken(e){return I0(this._rgb,2,-e),this}saturate(e){return I0(this._rgb,1,e),this}desaturate(e){return I0(this._rgb,1,-e),this}rotate(e){return yX(this._rgb,e),this}}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function _h(){}const PX=(()=>{let t=0;return()=>t++})();function Yi(t){return t===null||typeof t>"u"}function Zs(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Oi(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ko(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function _u(t,e){return ko(t)?t:e}function oi(t,e){return typeof t>"u"?e:t}const MX=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,xP=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ds(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function cs(t,e,n,r){let i,s,o;if(Zs(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(Oi(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function ny(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function ry(t){if(Zs(t))return t.map(ry);if(Oi(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=ry(t[n[i]]);return e}return t}function LP(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function kX(t,e,n,r){if(!LP(t))return;const i=e[t],s=n[t];Oi(i)&&Oi(s)?_m(i,s,r):e[t]=ry(s)}function _m(t,e,n){const r=Zs(e)?e:[e],i=r.length;if(!Oi(t))return t;n=n||{};const s=n.merger||kX;let o;for(let a=0;a<i;++a){if(o=r[a],!Oi(o))continue;const l=Object.keys(o);for(let c=0,d=l.length;c<d;++c)s(l[c],t,o,n)}return t}function Jg(t,e){return _m(t,e,{merger:AX})}function AX(t,e,n){if(!LP(t))return;const r=e[t],i=n[t];Oi(r)&&Oi(i)?Jg(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ry(i))}const e3={"":t=>t,x:t=>t.x,y:t=>t.y};function TX(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function DX(t){const e=TX(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Pd(t,e){return(e3[e]||(e3[e]=DX(e)))(t)}function J_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const wm=t=>typeof t<"u",Md=t=>typeof t=="function",t3=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function OX(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Rs=Math.PI,Bs=2*Rs,NX=Bs+Rs,iy=Number.POSITIVE_INFINITY,IX=Rs/180,Wo=Rs/2,Zd=Rs/4,n3=Rs*2/3,pd=Math.log10,Qc=Math.sign;function Qg(t,e,n){return Math.abs(t-e)<n}function r3(t){const e=Math.round(t);t=Qg(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(pd(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function BX(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function Op(t){return!isNaN(parseFloat(t))&&isFinite(t)}function RX(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function SP(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function bc(t){return t*(Rs/180)}function Q_(t){return t*(180/Rs)}function i3(t){if(!ko(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function CP(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Rs&&(s+=Bs),{angle:s,distance:i}}function Vb(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function FX(t,e){return(t-e+NX)%Bs-Rs}function wu(t){return(t%Bs+Bs)%Bs}function xm(t,e,n,r){const i=wu(t),s=wu(e),o=wu(n),a=wu(s-i),l=wu(o-i),c=wu(i-s),d=wu(i-o);return i===s||i===o||r&&s===o||a>l&&c<d}function Ca(t,e,n){return Math.max(e,Math.min(n,t))}function jX(t){return Ca(t,-32768,32767)}function Ah(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function ew(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const Th=(t,e,n,r)=>ew(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),zX=(t,e,n)=>ew(t,n,r=>t[r][e]>=n);function $X(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const EP=["push","pop","shift","splice","unshift"];function VX(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),EP.forEach(n=>{const r="_onData"+J_(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function s3(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(EP.forEach(s=>{delete t[s]}),delete t._chartjs)}function PP(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const MP=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function kP(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,MP.call(window,()=>{r=!1,t.apply(e,n)}))}}function UX(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const tw=t=>t==="start"?"left":t==="end"?"right":"center",sl=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,HX=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function AP(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:d,minDefined:p,maxDefined:v}=o.getUserBounds();p&&(i=Ca(Math.min(Th(a,l,c).lo,n?r:Th(e,l,o.getPixelForValue(c)).lo),0,r-1)),v?s=Ca(Math.max(Th(a,o.axis,d,!0).hi+1,n?0:Th(e,l,o.getPixelForValue(d),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function TP(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const B0=t=>t===0||t===1,o3=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Bs/n)),a3=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Bs/n)+1,em={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Wo)+1,easeOutSine:t=>Math.sin(t*Wo),easeInOutSine:t=>-.5*(Math.cos(Rs*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>B0(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>B0(t)?t:o3(t,.075,.3),easeOutElastic:t=>B0(t)?t:a3(t,.075,.3),easeInOutElastic(t){return B0(t)?t:t<.5?.5*o3(t*2,.1125,.45):.5+.5*a3(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-em.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?em.easeInBounce(t*2)*.5:em.easeOutBounce(t*2-1)*.5+.5};function nw(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function l3(t){return nw(t)?t:new bm(t)}function w2(t){return nw(t)?t:new bm(t).saturate(.5).darken(.1).hexString()}const WX=["x","y","borderWidth","radius","tension"],GX=["color","borderColor","backgroundColor"];function qX(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:GX},numbers:{type:"number",properties:WX}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function YX(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const u3=new Map;function KX(t,e){e=e||{};const n=t+JSON.stringify(e);let r=u3.get(n);return r||(r=new Intl.NumberFormat(t,e),u3.set(n,r)),r}function Fm(t,e,n){return KX(e,n).format(t)}const DP={values(t){return Zs(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=ZX(t,n)}const o=pd(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Fm(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(pd(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?DP.numeric.call(this,t,e,n):""}};function ZX(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var qy={formatters:DP};function XX(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:qy.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const xf=Object.create(null),Ub=Object.create(null);function tm(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function x2(t,e,n){return typeof e=="string"?_m(tm(t,e),n):_m(tm(t,""),e)}class JX{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>w2(i.backgroundColor),this.hoverBorderColor=(r,i)=>w2(i.borderColor),this.hoverColor=(r,i)=>w2(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return x2(this,e,n)}get(e){return tm(this,e)}describe(e,n){return x2(Ub,e,n)}override(e,n){return x2(xf,e,n)}route(e,n,r,i){const s=tm(this,e),o=tm(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Oi(l)?Object.assign({},c,l):oi(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Ao=new JX({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[qX,YX,XX]);function QX(t){return!t||Yi(t.size)||Yi(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function sy(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function eJ(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,d,p,v;for(l=0;l<a;l++)if(p=n[l],p!=null&&!Zs(p))o=sy(t,i,s,o,p);else if(Zs(p))for(c=0,d=p.length;c<d;c++)v=p[c],v!=null&&!Zs(v)&&(o=sy(t,i,s,o,v));t.restore();const m=s.length/2;if(m>n.length){for(l=0;l<m;l++)delete i[s[l]];s.splice(0,m)}return o}function Xd(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function c3(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Hb(t,e,n,r){OP(t,e,n,r,null)}function OP(t,e,n,r,i){let s,o,a,l,c,d,p,v;const m=e.pointStyle,x=e.rotation,E=e.radius;let M=(x||0)*IX;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(M),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(E)||E<=0)){switch(t.beginPath(),m){default:i?t.ellipse(n,r,i/2,E,0,0,Bs):t.arc(n,r,E,0,Bs),t.closePath();break;case"triangle":d=i?i/2:E,t.moveTo(n+Math.sin(M)*d,r-Math.cos(M)*E),M+=n3,t.lineTo(n+Math.sin(M)*d,r-Math.cos(M)*E),M+=n3,t.lineTo(n+Math.sin(M)*d,r-Math.cos(M)*E),t.closePath();break;case"rectRounded":c=E*.516,l=E-c,o=Math.cos(M+Zd)*l,p=Math.cos(M+Zd)*(i?i/2-c:l),a=Math.sin(M+Zd)*l,v=Math.sin(M+Zd)*(i?i/2-c:l),t.arc(n-p,r-a,c,M-Rs,M-Wo),t.arc(n+v,r-o,c,M-Wo,M),t.arc(n+p,r+a,c,M,M+Wo),t.arc(n-v,r+o,c,M+Wo,M+Rs),t.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*E,d=i?i/2:l,t.rect(n-d,r-l,2*d,2*l);break}M+=Zd;case"rectRot":p=Math.cos(M)*(i?i/2:E),o=Math.cos(M)*E,a=Math.sin(M)*E,v=Math.sin(M)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+v,r-o),t.lineTo(n+p,r+a),t.lineTo(n-v,r+o),t.closePath();break;case"crossRot":M+=Zd;case"cross":p=Math.cos(M)*(i?i/2:E),o=Math.cos(M)*E,a=Math.sin(M)*E,v=Math.sin(M)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o);break;case"star":p=Math.cos(M)*(i?i/2:E),o=Math.cos(M)*E,a=Math.sin(M)*E,v=Math.sin(M)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o),M+=Zd,p=Math.cos(M)*(i?i/2:E),o=Math.cos(M)*E,a=Math.sin(M)*E,v=Math.sin(M)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o);break;case"line":o=i?i/2:Math.cos(M)*E,a=Math.sin(M)*E,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(M)*(i?i/2:E),r+Math.sin(M)*E);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Dh(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Yy(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ky(t){t.restore()}function tJ(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function nJ(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function rJ(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Yi(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function iJ(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,d=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,d),t.lineTo(a,d),t.stroke()}}function sJ(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Lf(t,e,n,r,i,s={}){const o=Zs(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,rJ(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&sJ(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Yi(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),iJ(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function Lm(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Rs,Rs,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Rs,Wo,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Wo,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Wo,!0),t.lineTo(n+o.topLeft,r)}const oJ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,aJ=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function lJ(t,e){const n=(""+t).match(oJ);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const uJ=t=>+t||0;function rw(t,e){const n={},r=Oi(e),i=r?Object.keys(e):e,s=Oi(t)?r?o=>oi(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=uJ(s(o));return n}function NP(t){return rw(t,{top:"y",right:"x",bottom:"y",left:"x"})}function mf(t){return rw(t,["topLeft","topRight","bottomLeft","bottomRight"])}function fl(t){const e=NP(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ha(t,e){t=t||{},e=e||Ao.font;let n=oi(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=oi(t.style,e.style);r&&!(""+r).match(aJ)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:oi(t.family,e.family),lineHeight:lJ(oi(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:oi(t.weight,e.weight),string:""};return i.string=QX(i),i}function kg(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function cJ(t,e,n){const{min:r,max:i}=t,s=xP(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Dd(t,e){return Object.assign(Object.create(t),e)}function iw(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=FP("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>iw([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return BP(a,l,()=>yJ(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return d3(a).includes(l)},ownKeys(a){return d3(a)},set(a,l,c){const d=a._storage||(a._storage=i());return a[l]=d[l]=c,delete a._keys,!0}})}function Np(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:IP(t,r),setContext:s=>Np(t,s,n,r),override:s=>Np(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return BP(s,o,()=>dJ(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function IP(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Md(n)?n:()=>n,isIndexable:Md(r)?r:()=>r}}const hJ=(t,e)=>t?t+J_(e):e,sw=(t,e)=>Oi(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function BP(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=n();return t[e]=r,r}function dJ(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return Md(a)&&o.isScriptable(e)&&(a=fJ(e,a,t,n)),Zs(a)&&a.length&&(a=pJ(e,a,t,o.isIndexable)),sw(e,a)&&(a=Np(a,i,s&&s[e],o)),a}function fJ(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),sw(t,l)&&(l=ow(i._scopes,i,t,l)),l}function pJ(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(Oi(e[0])){const l=e,c=i._scopes.filter(d=>d!==l);e=[];for(const d of l){const p=ow(c,i,t,d);e.push(Np(p,s,o&&o[t],a))}}return e}function RP(t,e,n){return Md(t)?t(e,n):t}const gJ=(t,e)=>t===!0?e:typeof t=="string"?Pd(e,t):void 0;function mJ(t,e,n,r,i){for(const s of e){const o=gJ(n,s);if(o){t.add(o);const a=RP(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function ow(t,e,n,r){const i=e._rootScopes,s=RP(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=h3(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=h3(a,o,s,l,r),l===null)?!1:iw(Array.from(a),[""],i,s,()=>vJ(e,n,r))}function h3(t,e,n,r,i){for(;n;)n=mJ(t,e,n,r,i);return n}function vJ(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Zs(i)&&Oi(n)?n:i||{}}function yJ(t,e,n,r){let i;for(const s of e)if(i=FP(hJ(s,t),n),typeof i<"u")return sw(t,i)?ow(n,r,t,i):i}function FP(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function d3(t){let e=t._keys;return e||(e=t._keys=bJ(t._scopes)),e}function bJ(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function jP(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,d;for(a=0,l=r;a<l;++a)c=a+n,d=e[c],o[a]={r:i.parse(Pd(d,s),c)};return o}const _J=Number.EPSILON||1e-14,Ip=(t,e)=>e<t.length&&!t[e].skip&&t[e],zP=t=>t==="x"?"y":"x";function wJ(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=Vb(s,i),l=Vb(o,s);let c=a/(a+l),d=l/(a+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const p=r*c,v=r*d;return{previous:{x:s.x-p*(o.x-i.x),y:s.y-p*(o.y-i.y)},next:{x:s.x+v*(o.x-i.x),y:s.y+v*(o.y-i.y)}}}function xJ(t,e,n){const r=t.length;let i,s,o,a,l,c=Ip(t,0);for(let d=0;d<r-1;++d)if(l=c,c=Ip(t,d+1),!(!l||!c)){if(Qg(e[d],0,_J)){n[d]=n[d+1]=0;continue}i=n[d]/e[d],s=n[d+1]/e[d],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[d]=i*o*e[d],n[d+1]=s*o*e[d])}}function LJ(t,e,n="x"){const r=zP(n),i=t.length;let s,o,a,l=Ip(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Ip(t,c+1),!a)continue;const d=a[n],p=a[r];o&&(s=(d-o[n])/3,a[`cp1${n}`]=d-s,a[`cp1${r}`]=p-s*e[c]),l&&(s=(l[n]-d)/3,a[`cp2${n}`]=d+s,a[`cp2${r}`]=p+s*e[c])}}function SJ(t,e="x"){const n=zP(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=Ip(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Ip(t,o+1),!!l){if(c){const d=c[e]-l[e];i[o]=d!==0?(c[n]-l[n])/d:0}s[o]=a?c?Qc(i[o-1])!==Qc(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}xJ(t,i,s),LJ(t,s,e)}function R0(t,e,n){return Math.max(Math.min(t,n),e)}function CJ(t,e){let n,r,i,s,o,a=Dh(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&Dh(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=R0(i.cp1x,e.left,e.right),i.cp1y=R0(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=R0(i.cp2x,e.left,e.right),i.cp2y=R0(i.cp2y,e.top,e.bottom)))}function EJ(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")SJ(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=wJ(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&CJ(t,n)}function aw(){return typeof window<"u"&&typeof document<"u"}function lw(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function oy(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Zy=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function PJ(t,e){return Zy(t).getPropertyValue(e)}const MJ=["top","right","bottom","left"];function vf(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=MJ[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const kJ=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function AJ(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(kJ(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function nf(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Zy(n),s=i.boxSizing==="border-box",o=vf(i,"padding"),a=vf(i,"border","width"),{x:l,y:c,box:d}=AJ(t,n),p=o.left+(d&&a.left),v=o.top+(d&&a.top);let{width:m,height:x}=e;return s&&(m-=o.width+a.width,x-=o.height+a.height),{x:Math.round((l-p)/m*n.width/r),y:Math.round((c-v)/x*n.height/r)}}function TJ(t,e,n){let r,i;if(e===void 0||n===void 0){const s=lw(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Zy(s),l=vf(a,"border","width"),c=vf(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=oy(a.maxWidth,s,"clientWidth"),i=oy(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||iy,maxHeight:i||iy}}const F0=t=>Math.round(t*10)/10;function DJ(t,e,n,r){const i=Zy(t),s=vf(i,"margin"),o=oy(i.maxWidth,t,"clientWidth")||iy,a=oy(i.maxHeight,t,"clientHeight")||iy,l=TJ(t,e,n);let{width:c,height:d}=l;if(i.boxSizing==="content-box"){const v=vf(i,"border","width"),m=vf(i,"padding");c-=m.width+v.width,d-=m.height+v.height}return c=Math.max(0,c-s.width),d=Math.max(0,r?c/r:d-s.height),c=F0(Math.min(c,o,l.maxWidth)),d=F0(Math.min(d,a,l.maxHeight)),c&&!d&&(d=F0(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&d>l.height&&(d=l.height,c=F0(Math.floor(d*r))),{width:c,height:d}}function f3(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const OJ=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};aw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function p3(t,e){const n=PJ(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function rf(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function NJ(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function IJ(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=rf(t,i,n),a=rf(i,s,n),l=rf(s,e,n),c=rf(o,a,n),d=rf(a,l,n);return rf(c,d,n)}const BJ=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},RJ=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Lp(t,e,n){return t?BJ(e,n):RJ()}function $P(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function VP(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function UP(t){return t==="angle"?{between:xm,compare:FX,normalize:wu}:{between:Ah,compare:(e,n)=>e-n,normalize:e=>e}}function g3({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function FJ(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=UP(r),l=e.length;let{start:c,end:d,loop:p}=t,v,m;if(p){for(c+=l,d+=l,v=0,m=l;v<m&&o(a(e[c%l][r]),i,s);++v)c--,d--;c%=l,d%=l}return d<c&&(d+=l),{start:c,end:d,loop:p,style:t.style}}function HP(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=UP(r),{start:d,end:p,loop:v,style:m}=FJ(t,e,n),x=[];let E=!1,M=null,A,O,z;const K=()=>l(i,z,A)&&a(i,z)!==0,ne=()=>a(s,A)===0||l(s,z,A),me=()=>E||K(),pe=()=>!E||ne();for(let N=d,j=d;N<=p;++N)O=e[N%o],!O.skip&&(A=c(O[r]),A!==z&&(E=l(A,i,s),M===null&&me()&&(M=a(A,i)===0?N:j),M!==null&&pe()&&(x.push(g3({start:M,end:N,loop:v,count:o,style:m})),M=null),j=N,z=A));return M!==null&&x.push(g3({start:M,end:p,loop:v,count:o,style:m})),x}function WP(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=HP(r[i],t.points,e);s.length&&n.push(...s)}return n}function jJ(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function zJ(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function $J(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=jJ(n,i,s,r);if(r===!0)return m3(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return m3(t,zJ(n,o,l,c),n,e)}function m3(t,e,n,r){return!r||!r.setContext||!n?e:VJ(t,e,n,r)}function VJ(t,e,n,r){const i=t._chart.getContext(),s=v3(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let d=s,p=e[0].start,v=p;function m(x,E,M,A){const O=a?-1:1;if(x!==E){for(x+=l;n[x%l].skip;)x-=O;for(;n[E%l].skip;)E+=O;x%l!==E%l&&(c.push({start:x%l,end:E%l,loop:M,style:A}),d=A,p=E%l)}}for(const x of e){p=a?p:x.start;let E=n[p%l],M;for(v=p+1;v<=x.end;v++){const A=n[v%l];M=v3(r.setContext(Dd(i,{type:"segment",p0:E,p1:A,p0DataIndex:(v-1)%l,p1DataIndex:v%l,datasetIndex:o}))),UJ(M,d)&&m(p,v-1,x.loop,d),E=A,d=M}p<v-1&&m(p,v-1,x.loop,d)}return c}function v3(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function UJ(t,e){if(!e)return!1;const n=[],r=function(i,s){return nw(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class HJ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=MP.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var wh=new HJ;const y3="transparent",WJ={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=l3(t||y3),i=r.valid&&l3(e||y3);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class GJ{constructor(e,n,r,i){const s=n[r];i=kg([e.to,i,s,e.from]);const o=kg([e.from,s,i]);this._active=!0,this._fn=e.fn||WJ[e.type||typeof o],this._easing=em[e.easing]||em.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=kg([e.to,n,i,e.from]),this._from=kg([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class GP{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Oi(e))return;const n=Object.keys(Ao.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Oi(s))return;const o={};for(const a of n)o[a]=s[a];(Zs(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=YJ(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&qJ(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const d=n[c];let p=s[c];const v=r.get(c);if(p)if(v&&p.active()){p.update(v,d,a);continue}else p.cancel();if(!v||!v.duration){e[c]=d;continue}s[c]=p=new GJ(v,e,c,d),i.push(p)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return wh.add(this._chart,r),!0}}function qJ(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function YJ(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function b3(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function KJ(t,e,n){if(n===!1)return!1;const r=b3(t,n),i=b3(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function ZJ(t){let e,n,r,i;return Oi(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function qP(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function _3(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(r.all)continue;break}c=t.values[l],ko(c)&&(s||e===0||Qc(e)===Qc(c))&&(e+=c)}return e}}function XJ(t){const e=Object.keys(t),n=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],n[r]={x:s,y:t[s]};return n}function w3(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function JJ(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function QJ(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function eQ(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function x3(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function L3(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,d=JJ(s,o,r),p=e.length;let v;for(let m=0;m<p;++m){const x=e[m],{[l]:E,[c]:M}=x,A=x._stacks||(x._stacks={});v=A[c]=eQ(i,d,E),v[a]=M,v._top=x3(v,o,!0,r.type),v._bottom=x3(v,o,!1,r.type);const O=v._visualValues||(v._visualValues={});O[a]=M}}function L2(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function tQ(t,e){return Dd(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function nQ(t,e,n){return Dd(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function cg(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const S2=t=>t==="reset"||t==="none",S3=(t,e)=>e?t:Object.assign({},t),rQ=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:qP(n,!0),values:null};class wc{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=w3(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&cg(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(p,v,m,x)=>p==="x"?v:p==="r"?x:m,s=n.xAxisID=oi(r.xAxisID,L2(e,"x")),o=n.yAxisID=oi(r.yAxisID,L2(e,"y")),a=n.rAxisID=oi(r.rAxisID,L2(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),d=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&s3(this._data,this),e._stacked&&cg(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Oi(n))this._data=XJ(n);else if(r!==n){if(r){s3(r,this);const i=this._cachedMeta;cg(i),i._parsed=[]}n&&Object.isExtensible(n)&&VX(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=w3(n.vScale,n),n.stack!==r.stack&&(i=!0,cg(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&L3(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],d,p,v;if(this._parsing===!1)r._parsed=i,r._sorted=!0,v=i;else{Zs(i[e])?v=this.parseArrayData(r,i,e,n):Oi(i[e])?v=this.parseObjectData(r,i,e,n):v=this.parsePrimitiveData(r,i,e,n);const m=()=>p[a]===null||c&&p[a]<c[a];for(d=0;d<n;++d)r._parsed[d+e]=p=v[d],l&&(m()&&(l=!1),c=p);r._sorted=l}o&&L3(this,v)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),d=s===o,p=new Array(i);let v,m,x;for(v=0,m=i;v<m;++v)x=v+r,p[v]={[a]:d||s.parse(c[x],x),[l]:o.parse(n[x],x)};return p}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,d,p;for(l=0,c=i;l<c;++l)d=l+r,p=n[d],a[l]={x:s.parse(p[0],d),y:o.parse(p[1],d)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let d,p,v,m;for(d=0,p=i;d<p;++d)v=d+r,m=n[v],c[d]={x:s.parse(Pd(m,a),v),y:o.parse(Pd(m,l),v)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:qP(i,!0),values:n._stacks[e.axis]._visualValues};return _3(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=_3(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=rQ(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:p}=QJ(a);let v,m;function x(){m=i[v];const E=m[a.axis];return!ko(m[e.axis])||d>E||p<E}for(v=0;v<o&&!(!x()&&(this.updateRangeFromParsed(c,e,m,l),s));++v);if(s){for(v=o-1;v>=0;--v)if(!x()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],ko(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=ZJ(oi(this.options.clip,KJ(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let d;for(r.dataset&&r.dataset.draw(e,s,a,l),d=a;d<a+l;++d){const p=i[d];p.hidden||(p.active&&c?o.push(p):p.draw(e,s))}for(d=0;d<o.length;++d)o[d].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=nQ(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=tQ(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&wm(r);if(a)return S3(a,l);const c=this.chart.config,d=c.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],v=c.getOptionScopes(this.getDataset(),d),m=Object.keys(Ao.elements[e]),x=()=>this.getContext(r,i,n),E=c.resolveNamedOptions(v,m,x,p);return E.$shared&&(E.$shared=l,s[o]=Object.freeze(S3(E,l))),E}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const d=this.chart.config,p=d.datasetAnimationScopeKeys(this._type,n),v=d.getOptionScopes(this.getDataset(),p);l=d.createResolver(v,this.getContext(e,r,n))}const c=new GP(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||S2(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){S2(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!S2(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&cg(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ze(wc,"defaults",{}),Ze(wc,"datasetElementType",null),Ze(wc,"dataElementType",null);function iQ(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=PP(r.sort((i,s)=>i-s))}return t._cache.$bar}function sQ(t){const e=t.iScale,n=iQ(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(wm(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function oQ(t,e,n,r){const i=n.barThickness;let s,o;return Yi(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function aQ(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function lQ(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function YP(t,e,n,r){return Zs(t)?lQ(t,e,n,r):e[n.axis]=n.parse(t,r),e}function C3(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,d,p,v;for(c=n,d=n+r;c<d;++c)v=e[c],p={},p[i.axis]=a||i.parse(o[c],c),l.push(YP(v,p,s,c));return l}function C2(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function uQ(t,e,n){return t!==0?Qc(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function cQ(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function hQ(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:d}=cQ(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=d:(s[E3(d,o,a,l)]=!0,i=c)),s[E3(i,o,a,l)]=!0,t.borderSkipped=s}function E3(t,e,n,r){return r?(t=dQ(t,e,n),t=P3(t,n,e)):t=P3(t,e,n),t}function dQ(t,e,n){return t===e?n:t===n?e:t}function P3(t,e,n){return t==="start"?e:t==="end"?n:t}function fQ(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class gv extends wc{parsePrimitiveData(e,n,r,i){return C3(e,n,r,i)}parseArrayData(e,n,r,i){return C3(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,d=o.axis==="x"?a:l,p=[];let v,m,x,E;for(v=r,m=r+i;v<m;++v)E=n[v],x={},x[s.axis]=s.parse(Pd(E,c),v),p.push(YP(Pd(E,d),x,o,v));return p}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=C2(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),d=this._getRuler(),{sharedOptions:p,includeOptions:v}=this._getSharedOptions(n,i);for(let m=n;m<n+r;m++){const x=this.getParsed(m),E=s||Yi(x[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),M=this._calculateBarIndexPixels(m,d),A=(x._stacks||{})[a.axis],O={horizontal:c,base:E.base,enableBorderRadius:!A||C2(x._custom)||o===A._top||o===A._bottom,x:c?E.head:M.center,y:c?M.center:E.head,height:c?M.size:Math.abs(E.size),width:c?Math.abs(E.size):M.size};v&&(O.options=p||this.resolveDataElementOptions(m,e[m].active?"active":i));const z=O.options||e[m].options;hQ(O,z,A,o),fQ(O,z,d.ratio),this.updateElement(e[m],m,O,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=r.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),d=c&&c[l.vScale.axis];if(Yi(d)||isNaN(d))return!0};for(const l of i)if(!(n!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||sQ(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,d=C2(c);let p=l[n.axis],v=0,m=r?this.applyStack(n,l,r):p,x,E;m!==p&&(v=m-p,m=p),d&&(p=c.barStart,m=c.barEnd-c.barStart,p!==0&&Qc(p)!==Qc(c.barEnd)&&(v=0),v+=p);const M=!Yi(s)&&!d?s:v;let A=n.getPixelForValue(M);if(this.chart.getDataVisibility(e)?x=n.getPixelForValue(v+m):x=A,E=x-A,Math.abs(E)<o){E=uQ(E,n,a)*o,p===a&&(A-=E/2);const O=n.getPixelForDecimal(0),z=n.getPixelForDecimal(1),K=Math.min(O,z),ne=Math.max(O,z);A=Math.max(Math.min(A,ne),K),x=A+E,r&&!d&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(x)-n.getValueForPixel(A))}if(A===n.getPixelForValue(a)){const O=Qc(E)*n.getLineWidthForValue(a)/2;A+=O,E-=O}return{size:E,base:A,head:x,center:x+E/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=oi(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,d=i.barThickness==="flex"?aQ(e,n,i,c):oQ(e,n,i,c),p=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=d.start+d.chunk*p+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&r[s].draw(this._ctx)}}Ze(gv,"id","bar"),Ze(gv,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Ze(gv,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class mv extends wc{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,i){const s=super.parsePrimitiveData(e,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,n,r,i){const s=super.parseArrayData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=oi(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,n,r,i){const s=super.parseObjectData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=oi(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),d=o.axis,p=a.axis;for(let v=n;v<n+r;v++){const m=e[v],x=!s&&this.getParsed(v),E={},M=E[d]=s?o.getPixelForDecimal(.5):o.getPixelForValue(x[d]),A=E[p]=s?a.getBasePixel():a.getPixelForValue(x[p]);E.skip=isNaN(M)||isNaN(A),c&&(E.options=l||this.resolveDataElementOptions(v,m.active?"active":i),s&&(E.options.radius=0)),this.updateElement(m,v,E,i)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=oi(r&&r._custom,s),i}}Ze(mv,"id","bubble"),Ze(mv,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Ze(mv,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function pQ(t,e,n){let r=1,i=1,s=0,o=0;if(e<Bs){const a=t,l=a+e,c=Math.cos(a),d=Math.sin(a),p=Math.cos(l),v=Math.sin(l),m=(z,K,ne)=>xm(z,a,l,!0)?1:Math.max(K,K*n,ne,ne*n),x=(z,K,ne)=>xm(z,a,l,!0)?-1:Math.min(K,K*n,ne,ne*n),E=m(0,c,p),M=m(Wo,d,v),A=x(Rs,c,p),O=x(Rs+Wo,d,v);r=(E-A)/2,i=(M-O)/2,s=-(E+A)/2,o=-(M+O)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class uf extends wc{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(Oi(r[e])){const{key:l="value"}=this._parsing;s=c=>+Pd(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return bc(this.options.rotation-90)}_getCircumference(){return bc(this.options.circumference)}_getRotationExtents(){let e=Bs,n=-Bs;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(MX(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:d,rotation:p}=this._getRotationExtents(),{ratioX:v,ratioY:m,offsetX:x,offsetY:E}=pQ(p,d,l),M=(r.width-o)/v,A=(r.height-o)/m,O=Math.max(Math.min(M,A)/2,0),z=xP(this.options.radius,O),K=Math.max(z*l,0),ne=(z-K)/this._getVisibleDatasetWeightTotal();this.offsetX=x*z,this.offsetY=E*z,i.total=this.calculateTotal(),this.outerRadius=z-ne*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-ne*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/Bs)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,d=(a.left+a.right)/2,p=(a.top+a.bottom)/2,v=s&&c.animateScale,m=v?0:this.innerRadius,x=v?0:this.outerRadius,{sharedOptions:E,includeOptions:M}=this._getSharedOptions(n,i);let A=this._getRotation(),O;for(O=0;O<n;++O)A+=this._circumference(O,s);for(O=n;O<n+r;++O){const z=this._circumference(O,s),K=e[O],ne={x:d+this.offsetX,y:p+this.offsetY,startAngle:A,endAngle:A+z,circumference:z,outerRadius:x,innerRadius:m};M&&(ne.options=E||this.resolveDataElementOptions(O,K.active?"active":i)),A+=z,this.updateElement(K,O,ne,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Bs*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Fm(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(oi(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Ze(uf,"id","doughnut"),Ze(uf,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Ze(uf,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Ze(uf,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class vv extends wc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=AP(n,i,o);this._drawStart=a,this._drawCount=l,TP(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:d,includeOptions:p}=this._getSharedOptions(n,i),v=o.axis,m=a.axis,{spanGaps:x,segment:E}=this.options,M=Op(x)?x:Number.POSITIVE_INFINITY,A=this.chart._animationsDisabled||s||i==="none",O=n+r,z=e.length;let K=n>0&&this.getParsed(n-1);for(let ne=0;ne<z;++ne){const me=e[ne],pe=A?me:{};if(ne<n||ne>=O){pe.skip=!0;continue}const N=this.getParsed(ne),j=Yi(N[m]),q=pe[v]=o.getPixelForValue(N[v],ne),I=pe[m]=s||j?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,N,l):N[m],ne);pe.skip=isNaN(q)||isNaN(I)||j,pe.stop=ne>0&&Math.abs(N[v]-K[v])>M,E&&(pe.parsed=N,pe.raw=c.data[ne]),p&&(pe.options=d||this.resolveDataElementOptions(ne,me.active?"active":i)),A||this.updateElement(me,ne,pe,i),K=N}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Ze(vv,"id","line"),Ze(vv,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ze(vv,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class nm extends wc{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Fm(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return jP.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,d=c.xCenter,p=c.yCenter,v=c.getIndexAngle(0)-.5*Rs;let m=v,x;const E=360/this.countVisibleElements();for(x=0;x<n;++x)m+=this._computeAngle(x,i,E);for(x=n;x<n+r;x++){const M=e[x];let A=m,O=m+this._computeAngle(x,i,E),z=o.getDataVisibility(x)?c.getDistanceFromCenterForValue(this.getParsed(x).r):0;m=O,s&&(l.animateScale&&(z=0),l.animateRotate&&(A=O=v));const K={x:d,y:p,innerRadius:0,outerRadius:z,startAngle:A,endAngle:O,options:this.resolveDataElementOptions(x,M.active?"active":i)};this.updateElement(M,x,K,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?bc(this.resolveDataElementOptions(e,n).angle||r):0}}Ze(nm,"id","polarArea"),Ze(nm,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Ze(nm,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Wb extends uf{}Ze(Wb,"id","pie"),Ze(Wb,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class yv extends wc{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return jP.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),d=s.getPointPositionForValue(a,this.getParsed(a).r),p=o?s.xCenter:d.x,v=o?s.yCenter:d.y,m={x:p,y:v,angle:d.angle,skip:isNaN(p)||isNaN(v),options:c};this.updateElement(l,a,m,i)}}}Ze(yv,"id","radar"),Ze(yv,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Ze(yv,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class bv extends wc{getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=AP(n,r,i);if(this._drawStart=s,this._drawCount=o,TP(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,d=this.resolveDataElementOptions(n,i),p=this.getSharedOptions(d),v=this.includeOptions(i,p),m=o.axis,x=a.axis,{spanGaps:E,segment:M}=this.options,A=Op(E)?E:Number.POSITIVE_INFINITY,O=this.chart._animationsDisabled||s||i==="none";let z=n>0&&this.getParsed(n-1);for(let K=n;K<n+r;++K){const ne=e[K],me=this.getParsed(K),pe=O?ne:{},N=Yi(me[x]),j=pe[m]=o.getPixelForValue(me[m],K),q=pe[x]=s||N?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,me,l):me[x],K);pe.skip=isNaN(j)||isNaN(q)||N,pe.stop=K>0&&Math.abs(me[m]-z[m])>A,M&&(pe.parsed=me,pe.raw=c.data[K]),v&&(pe.options=p||this.resolveDataElementOptions(K,ne.active?"active":i)),O||this.updateElement(ne,K,pe,i),z=me}this.updateSharedOptions(p,i,d)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}Ze(bv,"id","scatter"),Ze(bv,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Ze(bv,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var gQ=Object.freeze({__proto__:null,BarController:gv,BubbleController:mv,DoughnutController:uf,LineController:vv,PieController:Wb,PolarAreaController:nm,RadarController:yv,ScatterController:bv});function Jd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class uw{constructor(e){Ze(this,"options");this.options=e||{}}static override(e){Object.assign(uw.prototype,e)}init(){}formats(){return Jd()}parse(){return Jd()}format(){return Jd()}add(){return Jd()}diff(){return Jd()}startOf(){return Jd()}endOf(){return Jd()}}var KP={_date:uw};function mQ(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?zX:Th;if(r){if(i._sharedOptions){const c=s[0],d=typeof c.getRange=="function"&&c.getRange(e);if(d){const p=l(s,e,n-d),v=l(s,e,n+d);return{lo:p.lo,hi:v.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function Xy(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:d}=s[a],{lo:p,hi:v}=mQ(s[a],e,o,i);for(let m=p;m<=v;++m){const x=d[m];x.skip||r(x,c,m)}}}function vQ(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function E2(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||Xy(t,n,e,function(a,l,c){!i&&!Dh(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function yQ(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:d}=o.getProps(["startAngle","endAngle"],r),{angle:p}=CP(o,{x:e.x,y:e.y});xm(p,c,d)&&i.push({element:o,datasetIndex:a,index:l})}return Xy(t,n,e,s),i}function bQ(t,e,n,r,i,s){let o=[];const a=vQ(n);let l=Number.POSITIVE_INFINITY;function c(d,p,v){const m=d.inRange(e.x,e.y,i);if(r&&!m)return;const x=d.getCenterPoint(i);if(!(!!s||t.isPointInArea(x))&&!m)return;const M=a(e,x);M<l?(o=[{element:d,datasetIndex:p,index:v}],l=M):M===l&&o.push({element:d,datasetIndex:p,index:v})}return Xy(t,n,e,c),o}function P2(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?yQ(t,e,n,i):bQ(t,e,n,r,i,s)}function M3(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Xy(t,n,e,(l,c,d)=>{l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:d}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var _Q={modes:{index(t,e,n,r){const i=nf(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?E2(t,i,s,r,o):P2(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const d=a[0].index,p=c.data[d];p&&!p.skip&&l.push({element:p,datasetIndex:c.index,index:d})}),l):[]},dataset(t,e,n,r){const i=nf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?E2(t,i,s,r,o):P2(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let d=0;d<c.length;++d)a.push({element:c[d],datasetIndex:l,index:d})}return a},point(t,e,n,r){const i=nf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return E2(t,i,s,r,o)},nearest(t,e,n,r){const i=nf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return P2(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=nf(e,t);return M3(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=nf(e,t);return M3(t,i,"y",n.intersect,r)}}};const ZP=["left","top","right","bottom"];function hg(t,e){return t.filter(n=>n.pos===e)}function k3(t,e){return t.filter(n=>ZP.indexOf(n.pos)===-1&&n.box.axis===e)}function dg(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function wQ(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function xQ(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!ZP.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function LQ(t,e){const n=xQ(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],d=c&&a.stackWeight/c.weight;a.horizontal?(a.width=d?d*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=d?d*i:l&&e.availableHeight)}return n}function SQ(t){const e=wQ(t),n=dg(e.filter(c=>c.box.fullSize),!0),r=dg(hg(e,"left"),!0),i=dg(hg(e,"right")),s=dg(hg(e,"top"),!0),o=dg(hg(e,"bottom")),a=k3(e,"x"),l=k3(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:hg(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function A3(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function XP(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function CQ(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!Oi(i)){n.size&&(t[i]-=n.size);const p=r[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?s.height:s.width),n.size=p.size/p.count,t[i]+=n.size}s.getPadding&&XP(o,s.getPadding());const a=Math.max(0,e.outerWidth-A3(o,t,"left","right")),l=Math.max(0,e.outerHeight-A3(o,t,"top","bottom")),c=a!==t.w,d=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:d}:{same:d,other:c}}function EQ(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function PQ(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Ag(t,e,n,r){const i=[];let s,o,a,l,c,d;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,PQ(a.horizontal,e));const{same:p,other:v}=CQ(e,n,a,r);c|=p&&i.length,d=d||v,l.fullSize||i.push(a)}return c&&Ag(i,e,n,r)||d}function j0(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function T3(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},d=a.stackWeight/c.weight||1;if(a.horizontal){const p=e.w*d,v=c.size||l.height;wm(c.start)&&(o=c.start),l.fullSize?j0(l,i.left,o,n.outerWidth-i.right-i.left,v):j0(l,e.left+c.placed,o,p,v),c.start=o,c.placed+=p,o=l.bottom}else{const p=e.h*d,v=c.size||l.width;wm(c.start)&&(s=c.start),l.fullSize?j0(l,s,i.top,v,n.outerHeight-i.bottom-i.top):j0(l,s,e.top+c.placed,v,p),c.start=s,c.placed+=p,s=l.right}}e.x=s,e.y=o}var dl={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=fl(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=SQ(t.boxes),l=a.vertical,c=a.horizontal;cs(t.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const d=l.reduce((E,M)=>M.box.options&&M.box.options.display===!1?E:E+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/d,hBoxMaxHeight:o/2}),v=Object.assign({},i);XP(v,fl(r));const m=Object.assign({maxPadding:v,w:s,h:o,x:i.left,y:i.top},i),x=LQ(l.concat(c),p);Ag(a.fullSize,m,p,x),Ag(l,m,p,x),Ag(c,m,p,x)&&Ag(l,m,p,x),EQ(m),T3(a.leftAndTop,m,p,x),m.x+=m.w,m.y+=m.h,T3(a.rightAndBottom,m,p,x),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},cs(a.chartArea,E=>{const M=E.box;Object.assign(M,t.chartArea),M.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class JP{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class MQ extends JP{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const _v="$chartjs",kQ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},D3=t=>t===null||t==="";function AQ(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[_v]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",D3(i)){const s=p3(t,"width");s!==void 0&&(t.width=s)}if(D3(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=p3(t,"height");s!==void 0&&(t.height=s)}return t}const QP=OJ?{passive:!0}:!1;function TQ(t,e,n){t.addEventListener(e,n,QP)}function DQ(t,e,n){t.canvas.removeEventListener(e,n,QP)}function OQ(t,e){const n=kQ[t.type]||t.type,{x:r,y:i}=nf(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function ay(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function NQ(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ay(a.addedNodes,r),o=o&&!ay(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function IQ(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ay(a.removedNodes,r),o=o&&!ay(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Sm=new Map;let O3=0;function eM(){const t=window.devicePixelRatio;t!==O3&&(O3=t,Sm.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function BQ(t,e){Sm.size||window.addEventListener("resize",eM),Sm.set(t,e)}function RQ(t){Sm.delete(t),Sm.size||window.removeEventListener("resize",eM)}function FQ(t,e,n){const r=t.canvas,i=r&&lw(r);if(!i)return;const s=kP((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,d=l.contentRect.height;c===0&&d===0||s(c,d)});return o.observe(i),BQ(t,s),o}function M2(t,e,n){n&&n.disconnect(),e==="resize"&&RQ(t)}function jQ(t,e,n){const r=t.canvas,i=kP(s=>{t.ctx!==null&&n(OQ(s,t))},t);return TQ(r,e,i),i}class zQ extends JP{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(AQ(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[_v])return!1;const r=n[_v].initial;["height","width"].forEach(s=>{const o=r[s];Yi(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[_v],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:NQ,detach:IQ,resize:FQ}[n]||jQ;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:M2,detach:M2,resize:M2}[n]||DQ)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return DJ(e,n,r,i)}isAttached(e){const n=lw(e);return!!(n&&n.isConnected)}}function $Q(t){return!aw()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?MQ:zQ}var Y0;let $h=(Y0=class{constructor(){Ze(this,"x");Ze(this,"y");Ze(this,"active",!1);Ze(this,"options");Ze(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Op(this.x)&&Op(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},Ze(Y0,"defaults",{}),Ze(Y0,"defaultRoutes"),Y0);function VQ(t,e){const n=t.options.ticks,r=UQ(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?WQ(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return GQ(e,c,s,o/i),c;const d=HQ(s,e,i);if(o>0){let p,v;const m=o>1?Math.round((l-a)/(o-1)):null;for(z0(e,c,d,Yi(m)?0:a-m,a),p=0,v=o-1;p<v;p++)z0(e,c,d,s[p],s[p+1]);return z0(e,c,d,l,Yi(m)?e.length:l+m),c}return z0(e,c,d),c}function UQ(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function HQ(t,e,n){const r=qQ(t),i=e.length/n;if(!r)return Math.max(i,1);const s=BX(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function WQ(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function GQ(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function z0(t,e,n,r,i){const s=oi(r,0),o=Math.min(oi(i,t.length),t.length);let a=0,l,c,d;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),d=s;d<0;)a++,d=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===d&&(e.push(t[c]),a++,d=Math.round(s+a*n))}function qQ(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const YQ=t=>t==="left"?"right":t==="right"?"left":t,N3=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,I3=(t,e)=>Math.min(e||t,t);function B3(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function KQ(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function ZQ(t,e){cs(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function fg(t){return t.drawTicks?t.tickLength:0}function R3(t,e){if(!t.display)return 0;const n=ha(t.font,e),r=fl(t.padding);return(Zs(t.text)?t.text.length:1)*n.lineHeight+r.height}function XQ(t,e){return Dd(t,{scale:e,type:"scale"})}function JQ(t,e,n){return Dd(t,{tick:n,index:e,type:"tick"})}function QQ(t,e,n){let r=tw(t);return(n&&e!=="right"||!n&&e==="right")&&(r=YQ(r)),r}function eee(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:d}=l;let p=0,v,m,x;const E=o-i,M=a-s;if(t.isHorizontal()){if(m=sl(r,s,a),Oi(n)){const A=Object.keys(n)[0],O=n[A];x=d[A].getPixelForValue(O)+E-e}else n==="center"?x=(c.bottom+c.top)/2+E-e:x=N3(t,n,e);v=a-s}else{if(Oi(n)){const A=Object.keys(n)[0],O=n[A];m=d[A].getPixelForValue(O)-M+e}else n==="center"?m=(c.left+c.right)/2-M+e:m=N3(t,n,e);x=sl(r,o,i),p=n==="left"?-Wo:Wo}return{titleX:m,titleY:x,maxWidth:v,rotation:p}}class Pf extends $h{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=_u(e,Number.POSITIVE_INFINITY),n=_u(n,Number.NEGATIVE_INFINITY),r=_u(r,Number.POSITIVE_INFINITY),i=_u(i,Number.NEGATIVE_INFINITY),{min:_u(e,r),max:_u(n,i),minDefined:ko(e),maxDefined:ko(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:_u(n,_u(r,n)),max:_u(r,_u(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ds(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=cJ(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?B3(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=VQ(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ds(this.options.afterUpdate,[this])}beforeSetDimensions(){Ds(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ds(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ds(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ds(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Ds(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Ds(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ds(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=I3(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const d=this._getLabelSizes(),p=d.widest.width,v=d.highest.height,m=Ca(this.chart.width-p,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),p+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-fg(e.grid)-n.padding-R3(e.title,this.chart.options.font),c=Math.sqrt(p*p+v*v),o=Q_(Math.min(Math.asin(Ca((d.highest.height+6)/a,-1,1)),Math.asin(Ca(l/c,-1,1))-Math.asin(Ca(v/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ds(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ds(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=R3(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=fg(s)+l):(e.height=this.maxHeight,e.width=fg(s)+l),r.display&&this.ticks.length){const{first:c,last:d,widest:p,highest:v}=this._getLabelSizes(),m=r.padding*2,x=bc(this.labelRotation),E=Math.cos(x),M=Math.sin(x);if(a){const A=r.mirror?0:M*p.width+E*v.height;e.height=Math.min(this.maxHeight,e.height+A+m)}else{const A=r.mirror?0:E*p.width+M*v.height;e.width=Math.min(this.maxWidth,e.width+A+m)}this._calculatePadding(c,d,M,E)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,m=0;l?c?(v=i*e.width,m=r*n.height):(v=r*e.height,m=i*n.width):s==="start"?m=n.width:s==="end"?v=e.width:s!=="inner"&&(v=e.width/2,m=n.width/2),this.paddingLeft=Math.max((v-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((m-p+o)*this.width/(this.width-p),0)}else{let d=n.height/2,p=e.height/2;s==="start"?(d=0,p=e.height):s==="end"&&(d=n.height,p=0),this.paddingTop=d+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ds(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Yi(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=B3(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/I3(n,r));let c=0,d=0,p,v,m,x,E,M,A,O,z,K,ne;for(p=0;p<n;p+=l){if(x=e[p].label,E=this._resolveTickFontOptions(p),i.font=M=E.string,A=s[M]=s[M]||{data:{},gc:[]},O=E.lineHeight,z=K=0,!Yi(x)&&!Zs(x))z=sy(i,A.data,A.gc,z,x),K=O;else if(Zs(x))for(v=0,m=x.length;v<m;++v)ne=x[v],!Yi(ne)&&!Zs(ne)&&(z=sy(i,A.data,A.gc,z,ne),K+=O);o.push(z),a.push(K),c=Math.max(z,c),d=Math.max(K,d)}ZQ(s,n);const me=o.indexOf(c),pe=a.indexOf(d),N=j=>({width:o[j]||0,height:a[j]||0});return{first:N(0),last:N(n-1),widest:N(me),highest:N(pe),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return jX(this._alignToPixels?Xd(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=JQ(this.getContext(),e,r))}return this.$context||(this.$context=XQ(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=bc(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),p=this.ticks.length+(l?1:0),v=fg(s),m=[],x=a.setContext(this.getContext()),E=x.display?x.width:0,M=E/2,A=function(V){return Xd(r,V,E)};let O,z,K,ne,me,pe,N,j,q,I,B,$;if(o==="top")O=A(this.bottom),pe=this.bottom-v,j=O-M,I=A(e.top)+M,$=e.bottom;else if(o==="bottom")O=A(this.top),I=e.top,$=A(e.bottom)-M,pe=O+M,j=this.top+v;else if(o==="left")O=A(this.right),me=this.right-v,N=O-M,q=A(e.left)+M,B=e.right;else if(o==="right")O=A(this.left),q=e.left,B=A(e.right)-M,me=O+M,N=this.left+v;else if(n==="x"){if(o==="center")O=A((e.top+e.bottom)/2+.5);else if(Oi(o)){const V=Object.keys(o)[0],re=o[V];O=A(this.chart.scales[V].getPixelForValue(re))}I=e.top,$=e.bottom,pe=O+M,j=pe+v}else if(n==="y"){if(o==="center")O=A((e.left+e.right)/2);else if(Oi(o)){const V=Object.keys(o)[0],re=o[V];O=A(this.chart.scales[V].getPixelForValue(re))}me=O-M,N=me-v,q=e.left,B=e.right}const R=oi(i.ticks.maxTicksLimit,p),U=Math.max(1,Math.ceil(p/R));for(z=0;z<p;z+=U){const V=this.getContext(z),re=s.setContext(V),J=a.setContext(V),_e=re.lineWidth,Le=re.color,Oe=J.dash||[],Z=J.dashOffset,G=re.tickWidth,se=re.tickColor,ce=re.tickBorderDash||[],he=re.tickBorderDashOffset;K=KQ(this,z,l),K!==void 0&&(ne=Xd(r,K,_e),c?me=N=q=B=ne:pe=j=I=$=ne,m.push({tx1:me,ty1:pe,tx2:N,ty2:j,x1:q,y1:I,x2:B,y2:$,width:_e,color:Le,borderDash:Oe,borderDashOffset:Z,tickWidth:G,tickColor:se,tickBorderDash:ce,tickBorderDashOffset:he}))}return this._ticksLength=p,this._borderValue=O,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:d,mirror:p}=s,v=fg(r.grid),m=v+d,x=p?-d:m,E=-bc(this.labelRotation),M=[];let A,O,z,K,ne,me,pe,N,j,q,I,B,$="middle";if(i==="top")me=this.bottom-x,pe=this._getXAxisLabelAlignment();else if(i==="bottom")me=this.top+x,pe=this._getXAxisLabelAlignment();else if(i==="left"){const U=this._getYAxisLabelAlignment(v);pe=U.textAlign,ne=U.x}else if(i==="right"){const U=this._getYAxisLabelAlignment(v);pe=U.textAlign,ne=U.x}else if(n==="x"){if(i==="center")me=(e.top+e.bottom)/2+m;else if(Oi(i)){const U=Object.keys(i)[0],V=i[U];me=this.chart.scales[U].getPixelForValue(V)+m}pe=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")ne=(e.left+e.right)/2-m;else if(Oi(i)){const U=Object.keys(i)[0],V=i[U];ne=this.chart.scales[U].getPixelForValue(V)}pe=this._getYAxisLabelAlignment(v).textAlign}n==="y"&&(l==="start"?$="top":l==="end"&&($="bottom"));const R=this._getLabelSizes();for(A=0,O=a.length;A<O;++A){z=a[A],K=z.label;const U=s.setContext(this.getContext(A));N=this.getPixelForTick(A)+s.labelOffset,j=this._resolveTickFontOptions(A),q=j.lineHeight,I=Zs(K)?K.length:1;const V=I/2,re=U.color,J=U.textStrokeColor,_e=U.textStrokeWidth;let Le=pe;o?(ne=N,pe==="inner"&&(A===O-1?Le=this.options.reverse?"left":"right":A===0?Le=this.options.reverse?"right":"left":Le="center"),i==="top"?c==="near"||E!==0?B=-I*q+q/2:c==="center"?B=-R.highest.height/2-V*q+q:B=-R.highest.height+q/2:c==="near"||E!==0?B=q/2:c==="center"?B=R.highest.height/2-V*q:B=R.highest.height-I*q,p&&(B*=-1),E!==0&&!U.showLabelBackdrop&&(ne+=q/2*Math.sin(E))):(me=N,B=(1-I)*q/2);let Oe;if(U.showLabelBackdrop){const Z=fl(U.backdropPadding),G=R.heights[A],se=R.widths[A];let ce=B-Z.top,he=0-Z.left;switch($){case"middle":ce-=G/2;break;case"bottom":ce-=G;break}switch(pe){case"center":he-=se/2;break;case"right":he-=se;break;case"inner":A===O-1?he-=se:A>0&&(he-=se/2);break}Oe={left:he,top:ce,width:se+Z.width,height:G+Z.height,color:U.backdropColor}}M.push({label:K,font:j,textOffset:B,options:{rotation:E,color:re,strokeColor:J,strokeWidth:_e,textAlign:Le,textBaseline:$,translation:[ne,me],backdrop:Oe}})}return M}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-bc(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,d;return n==="left"?i?(d=this.right+s,r==="near"?c="left":r==="center"?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-a,r==="near"?c="right":r==="center"?(c="center",d-=l/2):(c="left",d=this.left)):n==="right"?i?(d=this.left+s,r==="near"?c="right":r==="center"?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+a,r==="near"?c="left":r==="center"?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,d,p,v;this.isHorizontal()?(c=Xd(e,this.left,o)-o/2,d=Xd(e,this.right,a)+a/2,p=v=l):(p=Xd(e,this.top,o)-o/2,v=Xd(e,this.bottom,a)+a/2,c=d=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,p),n.lineTo(d,v),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Yy(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,d=o.textOffset;Lf(r,c,0,d,l,a)}i&&Ky(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=ha(r.font),o=fl(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Oi(n)?(l+=o.bottom,Zs(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:d,maxWidth:p,rotation:v}=eee(this,l,n,a);Lf(e,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:v,textAlign:QQ(a,n,i),textBaseline:"middle",translation:[c,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=oi(e.grid&&e.grid.z,-1),i=oi(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Pf.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return ha(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class $0{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;ree(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,tee(e,o,r),this.override&&Ao.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Ao[i]&&(delete Ao[i][r],this.override&&delete xf[r])}}function tee(t,e,n){const r=_m(Object.create(null),[n?Ao.get(n):{},Ao.get(e),t.defaults]);Ao.set(e,r),t.defaultRoutes&&nee(e,t.defaultRoutes),t.descriptors&&Ao.describe(e,t.descriptors)}function nee(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Ao.route(s,i,l,a)})}function ree(t){return"id"in t&&"defaults"in t}class iee{constructor(){this.controllers=new $0(wc,"datasets",!0),this.elements=new $0($h,"elements"),this.plugins=new $0(Object,"plugins"),this.scales=new $0(Pf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):cs(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=J_(e);Ds(r["before"+i],[],r),n[e](r),Ds(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Vc=new iee;class see{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(Ds(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Yi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=oi(r.options&&r.options.plugins,{}),s=oee(r);return i===!1&&!n?[]:lee(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function oee(t){const e={},n=[],r=Object.keys(Vc.plugins.items);for(let s=0;s<r.length;s++)n.push(Vc.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function aee(t,e){return!e&&t===!1?null:t===!0?{}:t}function lee(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=aee(r[l],i);c!==null&&s.push({plugin:a,options:uee(t.config,{plugin:a,local:n[l]},c,o)})}return s}function uee(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Gb(t,e){const n=Ao.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function cee(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function hee(t,e){return t===e?"_index_":"_value_"}function F3(t){if(t==="x"||t==="y"||t==="r")return t}function dee(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function qb(t,...e){if(F3(t))return t;for(const n of e){const r=n.axis||dee(n.position)||t.length>1&&F3(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function j3(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function fee(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return j3(t,"x",n[0])||j3(t,"y",n[0])}return{}}function pee(t,e){const n=xf[t.type]||{scales:{}},r=e.scales||{},i=Gb(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Oi(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=qb(o,a,fee(o,t),Ao.scales[a.type]),c=hee(l,i),d=n.scales||{};s[o]=Jg(Object.create(null),[{axis:l},a,d[l],d[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Gb(a,e),d=(xf[a]||{}).scales||{};Object.keys(d).forEach(p=>{const v=cee(p,l),m=o[v+"AxisID"]||v;s[m]=s[m]||Object.create(null),Jg(s[m],[{axis:v},r[m],d[p]])})}),Object.keys(s).forEach(o=>{const a=s[o];Jg(a,[Ao.scales[a.type],Ao.scale])}),s}function tM(t){const e=t.options||(t.options={});e.plugins=oi(e.plugins,{}),e.scales=pee(t,e)}function nM(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function gee(t){return t=t||{},t.data=nM(t.data),tM(t),t}const z3=new Map,rM=new Set;function V0(t,e){let n=z3.get(t);return n||(n=e(),z3.set(t,n),rM.add(n)),n}const pg=(t,e,n)=>{const r=Pd(e,n);r!==void 0&&t.add(r)};class mee{constructor(e){this._config=gee(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=nM(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),tM(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return V0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return V0(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return V0(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return V0(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(d=>{e&&(l.add(e),d.forEach(p=>pg(l,e,p))),d.forEach(p=>pg(l,i,p)),d.forEach(p=>pg(l,xf[s]||{},p)),d.forEach(p=>pg(l,Ao,p)),d.forEach(p=>pg(l,Ub,p))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),rM.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,xf[n]||{},Ao.datasets[n]||{},{type:n},Ao,Ub]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=$3(this._resolverCache,e,i);let l=o;if(yee(o,n)){s.$shared=!1,r=Md(r)?r():r;const c=this.createResolver(e,r,a);l=Np(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=$3(this._resolverCache,e,r);return Oi(n)?Np(s,n,void 0,i):s}}function $3(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:iw(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const vee=t=>Oi(t)&&Object.getOwnPropertyNames(t).some(e=>Md(t[e]));function yee(t,e){const{isScriptable:n,isIndexable:r}=IP(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(Md(a)||vee(a))||o&&Zs(a))return!0}return!1}var bee="4.4.1";const _ee=["top","bottom","left","right","chartArea"];function V3(t,e){return t==="top"||t==="bottom"||_ee.indexOf(t)===-1&&e==="x"}function U3(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function H3(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ds(n&&n.onComplete,[t],e)}function wee(t){const e=t.chart,n=e.options.animation;Ds(n&&n.onProgress,[t],e)}function iM(t){return aw()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const wv={},W3=t=>{const e=iM(t);return Object.values(wv).filter(n=>n.canvas===e).pop()};function xee(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function Lee(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function U0(t,e,n){return t.options.clip?t[n]:e[n]}function See(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:U0(n,e,"left"),right:U0(n,e,"right"),top:U0(r,e,"top"),bottom:U0(r,e,"bottom")}:e}class Wc{static register(...e){Vc.add(...e),G3()}static unregister(...e){Vc.remove(...e),G3()}constructor(e,n){const r=this.config=new mee(n),i=iM(e),s=W3(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||$Q(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,d=l&&l.width;if(this.id=PX(),this.ctx=a,this.canvas=l,this.width=d,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new see,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=UX(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],wv[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}wh.listen(this,"complete",H3),wh.listen(this,"progress",wee),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return Yi(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Vc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():f3(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return c3(this.canvas,this.ctx),this}stop(){return wh.stop(this),this}resize(e,n){wh.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,f3(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ds(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};cs(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=qb(o,a),c=l==="r",d=l==="x";return{options:a,dposition:c?"chartArea":d?"bottom":"left",dtype:c?"radialLinear":d?"category":"linear"}}))),cs(s,o=>{const a=o.options,l=a.id,c=qb(l,a),d=oi(a.type,o.dtype);(a.position===void 0||V3(a.position,c)!==V3(o.dposition))&&(a.position=o.dposition),i[l]=!0;let p=null;if(l in r&&r[l].type===d)p=r[l];else{const v=Vc.getScale(d);p=new v({id:l,type:d,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(a,e)}),cs(i,(o,a)=>{o||delete r[a]}),cs(r,o=>{dl.configure(this,o,o.options),dl.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(U3("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||Gb(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Vc.getController(a),{datasetElementType:c,dataElementType:d}=Ao.datasets[a];Object.assign(l,{dataElementType:Vc.getElement(d),datasetElementType:c&&Vc.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){cs(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,d=this.data.datasets.length;c<d;c++){const{controller:p}=this.getDatasetMeta(c),v=!i&&s.indexOf(p)===-1;p.buildOrUpdateElements(v),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||cs(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(U3("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){cs(this.scales,e=>{dl.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!t3(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;xee(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!t3(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;dl.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],cs(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Md(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(wh.has(this)?this.attached&&!wh.running(this)&&wh.start(this):(this.draw(),H3({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=See(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&Yy(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&Ky(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Dh(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=_Q.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Dd(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);wm(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),wh.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),c3(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete wv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};cs(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){cs(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},cs(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!ny(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(d=>!c.some(p=>d.datasetIndex===p.datasetIndex&&d.index===p.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=OX(e),c=Lee(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Ds(s.onHover,[e,a,this],this),l&&Ds(s.onClick,[e,a,this],this));const d=!ny(a,i);return(d||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,d}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}Ze(Wc,"defaults",Ao),Ze(Wc,"instances",wv),Ze(Wc,"overrides",xf),Ze(Wc,"registry",Vc),Ze(Wc,"version",bee),Ze(Wc,"getChart",W3);function G3(){return cs(Wc.instances,t=>t._plugins.invalidate())}function Cee(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+Wo,r-Wo),t.closePath(),t.clip()}function Eee(t){return rw(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Pee(t,e,n,r){const i=Eee(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return Ca(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Ca(i.innerStart,0,o),innerEnd:Ca(i.innerEnd,0,o)}}function tp(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function ly(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:d}=e,p=Math.max(e.outerRadius+r+n-c,0),v=d>0?d+r+n+c:0;let m=0;const x=i-l;if(r){const U=d>0?d-r:0,V=p>0?p-r:0,re=(U+V)/2,J=re!==0?x*re/(re+r):x;m=(x-J)/2}const E=Math.max(.001,x*p-n/Rs)/p,M=(x-E)/2,A=l+M+m,O=i-M-m,{outerStart:z,outerEnd:K,innerStart:ne,innerEnd:me}=Pee(e,v,p,O-A),pe=p-z,N=p-K,j=A+z/pe,q=O-K/N,I=v+ne,B=v+me,$=A+ne/I,R=O-me/B;if(t.beginPath(),s){const U=(j+q)/2;if(t.arc(o,a,p,j,U),t.arc(o,a,p,U,q),K>0){const _e=tp(N,q,o,a);t.arc(_e.x,_e.y,K,q,O+Wo)}const V=tp(B,O,o,a);if(t.lineTo(V.x,V.y),me>0){const _e=tp(B,R,o,a);t.arc(_e.x,_e.y,me,O+Wo,R+Math.PI)}const re=(O-me/v+(A+ne/v))/2;if(t.arc(o,a,v,O-me/v,re,!0),t.arc(o,a,v,re,A+ne/v,!0),ne>0){const _e=tp(I,$,o,a);t.arc(_e.x,_e.y,ne,$+Math.PI,A-Wo)}const J=tp(pe,A,o,a);if(t.lineTo(J.x,J.y),z>0){const _e=tp(pe,j,o,a);t.arc(_e.x,_e.y,z,A-Wo,j)}}else{t.moveTo(o,a);const U=Math.cos(j)*p+o,V=Math.sin(j)*p+a;t.lineTo(U,V);const re=Math.cos(q)*p+o,J=Math.sin(q)*p+a;t.lineTo(re,J)}t.closePath()}function Mee(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){ly(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%Bs||Bs))}return ly(t,e,n,r,l,i),t.fill(),l}function kee(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:d,borderDash:p,borderDashOffset:v}=l,m=l.borderAlign==="inner";if(!c)return;t.setLineDash(p||[]),t.lineDashOffset=v,m?(t.lineWidth=c*2,t.lineJoin=d||"round"):(t.lineWidth=c,t.lineJoin=d||"bevel");let x=e.endAngle;if(s){ly(t,e,n,r,x,i);for(let E=0;E<s;++E)t.stroke();isNaN(a)||(x=o+(a%Bs||Bs))}m&&Cee(t,e,x),s||(ly(t,e,n,r,x,i),t.stroke())}class Tg extends $h{constructor(n){super();Ze(this,"circumference");Ze(this,"endAngle");Ze(this,"fullCircles");Ze(this,"innerRadius");Ze(this,"outerRadius");Ze(this,"pixelMargin");Ze(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=CP(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:p,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),m=(this.options.spacing+this.options.borderWidth)/2,E=oi(v,c-l)>=Bs||xm(o,l,c),M=Ah(a,d+m,p+m);return E&&M}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:d}=this.options,p=(s+o)/2,v=(a+l+d+c)/2;return{x:r+Math.cos(p)*v,y:i+Math.sin(p)*v}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>Bs?Math.floor(i/Bs):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Rs,i||0)),d=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,Mee(n,this,d,o,a),kee(n,this,d,o,a),n.restore()}}Ze(Tg,"id","arc"),Ze(Tg,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Ze(Tg,"defaultRoutes",{backgroundColor:"backgroundColor"}),Ze(Tg,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function sM(t,e,n=e){t.lineCap=oi(n.borderCapStyle,e.borderCapStyle),t.setLineDash(oi(n.borderDash,e.borderDash)),t.lineDashOffset=oi(n.borderDashOffset,e.borderDashOffset),t.lineJoin=oi(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=oi(n.borderWidth,e.borderWidth),t.strokeStyle=oi(n.borderColor,e.borderColor)}function Aee(t,e,n){t.lineTo(n.x,n.y)}function Tee(t){return t.stepped?tJ:t.tension||t.cubicInterpolationMode==="monotone"?nJ:Aee}function oM(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),d=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!d?r+c-l:c-l}}function Dee(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=oM(i,n,r),d=Tee(s);let{move:p=!0,reverse:v}=r||{},m,x,E;for(m=0;m<=c;++m)x=i[(a+(v?c-m:m))%o],!x.skip&&(p?(t.moveTo(x.x,x.y),p=!1):d(t,E,x,v,s.stepped),E=x);return l&&(x=i[(a+(v?c:0))%o],d(t,E,x,v,s.stepped)),!!l}function Oee(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=oM(i,n,r),{move:l=!0,reverse:c}=r||{};let d=0,p=0,v,m,x,E,M,A;const O=K=>(o+(c?a-K:K))%s,z=()=>{E!==M&&(t.lineTo(d,M),t.lineTo(d,E),t.lineTo(d,A))};for(l&&(m=i[O(0)],t.moveTo(m.x,m.y)),v=0;v<=a;++v){if(m=i[O(v)],m.skip)continue;const K=m.x,ne=m.y,me=K|0;me===x?(ne<E?E=ne:ne>M&&(M=ne),d=(p*d+K)/++p):(z(),t.lineTo(K,ne),x=me,p=0,E=M=ne),A=ne}z()}function Yb(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?Oee:Dee}function Nee(t){return t.stepped?NJ:t.tension||t.cubicInterpolationMode==="monotone"?IJ:rf}function Iee(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),sM(t,e.options),t.stroke(i)}function Bee(t,e,n,r){const{segments:i,options:s}=e,o=Yb(e);for(const a of i)sM(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const Ree=typeof Path2D=="function";function Fee(t,e,n,r){Ree&&!e.options.segment?Iee(t,e,n,r):Bee(t,e,n,r)}class gd extends $h{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;EJ(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=$J(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=WP(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=Nee(r);let c,d;for(c=0,d=o.length;c<d;++c){const{start:p,end:v}=o[c],m=s[p],x=s[v];if(m===x){a.push(m);continue}const E=Math.abs((i-m[n])/(x[n]-m[n])),M=l(m,x,E,r.stepped);M[n]=e[n],a.push(M)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Yb(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=Yb(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),Fee(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ze(gd,"id","line"),Ze(gd,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ze(gd,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ze(gd,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function q3(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class xv extends $h{constructor(n){super();Ze(this,"parsed");Ze(this,"skip");Ze(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return q3(this,n,"x",r)}inYRange(n,r){return q3(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!Dh(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Hb(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Ze(xv,"id","point"),Ze(xv,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ze(xv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function aM(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,d,p;return t.horizontal?(p=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-p,d=r+p):(p=s/2,a=n-p,l=n+p,c=Math.min(r,i),d=Math.max(r,i)),{left:a,top:c,right:l,bottom:d}}function md(t,e,n,r){return t?0:Ca(e,n,r)}function jee(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=NP(r);return{t:md(i.top,s.top,0,n),r:md(i.right,s.right,0,e),b:md(i.bottom,s.bottom,0,n),l:md(i.left,s.left,0,e)}}function zee(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=mf(i),o=Math.min(e,n),a=t.borderSkipped,l=r||Oi(i);return{topLeft:md(!l||a.top||a.left,s.topLeft,0,o),topRight:md(!l||a.top||a.right,s.topRight,0,o),bottomLeft:md(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:md(!l||a.bottom||a.right,s.bottomRight,0,o)}}function $ee(t){const e=aM(t),n=e.right-e.left,r=e.bottom-e.top,i=jee(t,n/2,r/2),s=zee(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function k2(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&aM(t,r);return a&&(i||Ah(e,a.left,a.right))&&(s||Ah(n,a.top,a.bottom))}function Vee(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function Uee(t,e){t.rect(e.x,e.y,e.w,e.h)}function A2(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class Lv extends $h{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=$ee(this),a=Vee(o.radius)?Lm:Uee;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,A2(o,n,s)),e.clip(),a(e,A2(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,A2(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return k2(this,e,n,r)}inXRange(e,n){return k2(this,e,null,n)}inYRange(e,n){return k2(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Ze(Lv,"id","bar"),Ze(Lv,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Ze(Lv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Hee=Object.freeze({__proto__:null,ArcElement:Tg,BarElement:Lv,LineElement:gd,PointElement:xv});const Kb=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Y3=Kb.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function lM(t){return Kb[t%Kb.length]}function uM(t){return Y3[t%Y3.length]}function Wee(t,e){return t.borderColor=lM(e),t.backgroundColor=uM(e),++e}function Gee(t,e){return t.backgroundColor=t.data.map(()=>lM(e++)),e}function qee(t,e){return t.backgroundColor=t.data.map(()=>uM(e++)),e}function Yee(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof uf?e=Gee(n,e):i instanceof nm?e=qee(n,e):i&&(e=Wee(n,e))}}function K3(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function Kee(t){return t&&(t.borderColor||t.backgroundColor)}var Zee={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i;if(!n.forceOverride&&(K3(r)||Kee(i)||s&&K3(s)))return;const o=Yee(t);r.forEach(o)}};function Xee(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let d=e,p,v,m,x,E;for(o[l++]=t[d],p=0;p<s-2;p++){let M=0,A=0,O;const z=Math.floor((p+1)*a)+1+e,K=Math.min(Math.floor((p+2)*a)+1,n)+e,ne=K-z;for(O=z;O<K;O++)M+=t[O].x,A+=t[O].y;M/=ne,A/=ne;const me=Math.floor(p*a)+1+e,pe=Math.min(Math.floor((p+1)*a)+1,n)+e,{x:N,y:j}=t[d];for(m=x=-1,O=me;O<pe;O++)x=.5*Math.abs((N-M)*(t[O].y-j)-(N-t[O].x)*(A-j)),x>m&&(m=x,v=t[O],E=O);o[l++]=v,d=E}return o[l++]=t[c],o}function Jee(t,e,n,r){let i=0,s=0,o,a,l,c,d,p,v,m,x,E;const M=[],A=e+n-1,O=t[e].x,K=t[A].x-O;for(o=e;o<e+n;++o){a=t[o],l=(a.x-O)/K*r,c=a.y;const ne=l|0;if(ne===d)c<x?(x=c,p=o):c>E&&(E=c,v=o),i=(s*i+a.x)/++s;else{const me=o-1;if(!Yi(p)&&!Yi(v)){const pe=Math.min(p,v),N=Math.max(p,v);pe!==m&&pe!==me&&M.push({...t[pe],x:i}),N!==m&&N!==me&&M.push({...t[N],x:i})}o>0&&me!==m&&M.push(t[me]),M.push(a),d=ne,s=0,x=E=c,p=v=m=o}}return M}function cM(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Z3(t){t.data.datasets.forEach(e=>{cM(e)})}function Qee(t,e){const n=e.length;let r=0,i;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=Ca(Th(e,s.axis,o).lo,0,n-1)),c?i=Ca(Th(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var ete={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){Z3(t);return}const r=t.width;t.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=t.getDatasetMeta(s),c=o||i.data;if(kg([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const d=t.scales[l.xAxisID];if(d.type!=="linear"&&d.type!=="time"||t.options.parsing)return;let{start:p,count:v}=Qee(l,c);const m=n.threshold||4*r;if(v<=m){cM(i);return}Yi(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(E){this._data=E}}));let x;switch(n.algorithm){case"lttb":x=Xee(c,p,v,r,n);break;case"min-max":x=Jee(c,p,v,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=x})},destroy(t){Z3(t)}};function tte(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=cw(l,c,i);const d=Zb(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:d,start:i[l],end:i[c]});continue}const p=WP(e,d);for(const v of p){const m=Zb(n,s[v.start],s[v.end],v.loop),x=HP(a,i,m);for(const E of x)o.push({source:E,target:v,start:{[n]:X3(d,m,"start",Math.max)},end:{[n]:X3(d,m,"end",Math.min)}})}}return o}function Zb(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=wu(i),s=wu(s)),{property:t,start:i,end:s}}function nte(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=cw(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function cw(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function X3(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function hM(t,e){let n=[],r=!1;return Zs(t)?(r=!0,n=t):n=nte(t,e),n.length?new gd({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function J3(t){return t&&t.fill!==!1}function rte(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!ko(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function ite(t,e,n){const r=lte(t);if(Oi(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return ko(i)&&Math.floor(i)===i?ste(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function ste(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function ote(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Oi(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function ate(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Oi(t)?r=t.value:r=e.getBaseValue(),r}function lte(t){const e=t.options,n=e.fill;let r=oi(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function ute(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=cte(e,n);a.push(hM({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let d=c.start;d<=c.end;d++)hte(i,o[d],a)}return new gd({points:i,options:{}})}function cte(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function hte(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=dte(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function dte(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const d=s[c],p=o[d.start][n],v=o[d.end][n];if(Ah(i,p,v)){a=i===p,l=i===v;break}}return{first:a,last:l,point:r}}class dM{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:Bs},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function fte(t){const{chart:e,fill:n,line:r}=t;if(ko(n))return pte(e,n);if(n==="stack")return ute(t);if(n==="shape")return!0;const i=gte(t);return i instanceof dM?i:hM(i,r)}function pte(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function gte(t){return(t.scale||{}).getPointPositionForValue?vte(t):mte(t)}function mte(t){const{scale:e={},fill:n}=t,r=ote(n,e);if(ko(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function vte(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=ate(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new dM({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function T2(t,e,n){const r=fte(e),{line:i,scale:s,axis:o}=e,a=i.options,l=a.fill,c=a.backgroundColor,{above:d=c,below:p=c}=l||{};r&&i.points.length&&(Yy(t,n),yte(t,{line:i,target:r,above:d,below:p,area:n,scale:s,axis:o}),Ky(t))}function yte(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==i&&(Q3(t,r,o.top),eL(t,{line:n,target:r,color:i,scale:a,property:l}),t.restore(),t.save(),Q3(t,r,o.bottom)),eL(t,{line:n,target:r,color:s,scale:a,property:l}),t.restore()}function Q3(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,d=i[l],p=i[cw(l,c,i)];s?(t.moveTo(d.x,d.y),s=!1):(t.lineTo(d.x,n),t.lineTo(d.x,d.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(p.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function eL(t,e){const{line:n,target:r,property:i,color:s,scale:o}=e,a=tte(n,r,i);for(const{source:l,target:c,start:d,end:p}of a){const{style:{backgroundColor:v=s}={}}=l,m=r!==!0;t.save(),t.fillStyle=v,bte(t,o,m&&Zb(i,d,p)),t.beginPath();const x=!!n.pathSegment(t,l);let E;if(m){x?t.closePath():tL(t,r,p,i);const M=!!r.pathSegment(t,c,{move:x,reverse:!0});E=x&&M,E||tL(t,r,d,i)}t.closePath(),t.fill(E?"evenodd":"nonzero"),t.restore()}}function bte(t,e,n){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,r,a-o,i-r),t.clip())}function tL(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var _te={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof gd&&(l={visible:t.isDatasetVisible(o),index:o,fill:ite(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=rte(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&T2(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;J3(s)&&T2(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!J3(r)||n.drawTime!=="beforeDatasetDraw"||T2(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const nL=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},wte=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class rL extends $h{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ds(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=ha(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=nL(r,s);let c,d;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(o,s,a,l)+10):(d=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=i+a;let p=e;s.textAlign="left",s.textBaseline="middle";let v=-1,m=-d;return this.legendItems.forEach((x,E)=>{const M=r+n/2+s.measureText(x.text).width;(E===0||c[c.length-1]+M+2*a>o)&&(p+=d,c[c.length-(E>0?0:1)]=0,m+=d,v++),l[E]={left:0,top:m,row:v,width:M,height:i},c[c.length-1]+=M+a}),p}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=o-e;let p=a,v=0,m=0,x=0,E=0;return this.legendItems.forEach((M,A)=>{const{itemWidth:O,itemHeight:z}=xte(r,n,s,M,i);A>0&&m+z+2*a>d&&(p+=v+a,c.push({width:v,height:m}),x+=v+a,E++,v=m=0),l[A]={left:x,top:m,col:E,width:O,height:z},v=Math.max(v,O),m+=z+a}),p+=v,c.push({width:v,height:m}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=Lp(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=sl(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=sl(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=sl(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=sl(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Yy(e,this),this._draw(),Ky(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Ao.color,l=Lp(e.rtl,this.left,this.width),c=ha(o.font),{padding:d}=o,p=c.size,v=p/2;let m;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:x,boxHeight:E,itemHeight:M}=nL(o,p),A=function(me,pe,N){if(isNaN(x)||x<=0||isNaN(E)||E<0)return;i.save();const j=oi(N.lineWidth,1);if(i.fillStyle=oi(N.fillStyle,a),i.lineCap=oi(N.lineCap,"butt"),i.lineDashOffset=oi(N.lineDashOffset,0),i.lineJoin=oi(N.lineJoin,"miter"),i.lineWidth=j,i.strokeStyle=oi(N.strokeStyle,a),i.setLineDash(oi(N.lineDash,[])),o.usePointStyle){const q={radius:E*Math.SQRT2/2,pointStyle:N.pointStyle,rotation:N.rotation,borderWidth:j},I=l.xPlus(me,x/2),B=pe+v;OP(i,q,I,B,o.pointStyleWidth&&x)}else{const q=pe+Math.max((p-E)/2,0),I=l.leftForLtr(me,x),B=mf(N.borderRadius);i.beginPath(),Object.values(B).some($=>$!==0)?Lm(i,{x:I,y:q,w:x,h:E,radius:B}):i.rect(I,q,x,E),i.fill(),j!==0&&i.stroke()}i.restore()},O=function(me,pe,N){Lf(i,N.text,me,pe+M/2,c,{strikethrough:N.hidden,textAlign:l.textAlign(N.textAlign)})},z=this.isHorizontal(),K=this._computeTitleHeight();z?m={x:sl(s,this.left+d,this.right-r[0]),y:this.top+d+K,line:0}:m={x:this.left+d,y:sl(s,this.top+K+d,this.bottom-n[0].height),line:0},$P(this.ctx,e.textDirection);const ne=M+d;this.legendItems.forEach((me,pe)=>{i.strokeStyle=me.fontColor,i.fillStyle=me.fontColor;const N=i.measureText(me.text).width,j=l.textAlign(me.textAlign||(me.textAlign=o.textAlign)),q=x+v+N;let I=m.x,B=m.y;l.setWidth(this.width),z?pe>0&&I+q+d>this.right&&(B=m.y+=ne,m.line++,I=m.x=sl(s,this.left+d,this.right-r[m.line])):pe>0&&B+ne>this.bottom&&(I=m.x=I+n[m.line].width+d,m.line++,B=m.y=sl(s,this.top+K+d,this.bottom-n[m.line].height));const $=l.x(I);if(A($,B,me),I=HX(j,I+x+v,z?I+q:this.right,e.rtl),O(l.x(I),B,me),z)m.x+=q+d;else if(typeof me.text!="string"){const R=c.lineHeight;m.y+=fM(me,R)+d}else m.y+=ne}),VP(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=ha(n.font),i=fl(n.padding);if(!n.display)return;const s=Lp(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let d,p=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),d=this.top+c,p=sl(e.align,p,this.right-v);else{const x=this.columnSizes.reduce((E,M)=>Math.max(E,M.height),0);d=c+sl(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const m=sl(a,p,p+v);o.textAlign=s.textAlign(tw(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Lf(o,n.text,m,d,r)}_computeTitleHeight(){const e=this.options.title,n=ha(e.font),r=fl(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(Ah(e,this.left,this.right)&&Ah(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Ah(e,i.left,i.left+i.width)&&Ah(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!Cte(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=wte(i,r);i&&!s&&Ds(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Ds(n.onHover,[e,r,this],this)}else r&&Ds(n.onClick,[e,r,this],this)}}function xte(t,e,n,r,i){const s=Lte(r,t,e,n),o=Ste(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function Lte(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function Ste(t,e,n){let r=t;return typeof e.text!="string"&&(r=fM(e,n)),r}function fM(t,e){const n=t.text?t.text.length:0;return e*n}function Cte(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Ete={id:"legend",_element:rL,start(t,e,n){const r=t.legend=new rL({ctx:t.ctx,options:n,chart:t});dl.configure(t,r,n),dl.addBox(t,r)},stop(t){dl.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;dl.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),d=fl(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class hw extends $h{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Zs(r.text)?r.text.length:1;this._padding=fl(r.padding);const s=i*ha(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,d,p;return this.isHorizontal()?(d=sl(a,r,s),p=n+e,c=s-r):(o.position==="left"?(d=r+e,p=sl(a,i,n),l=Rs*-.5):(d=s-e,p=sl(a,n,i),l=Rs*.5),c=i-n),{titleX:d,titleY:p,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=ha(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Lf(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:tw(n.align),textBaseline:"middle",translation:[o,a]})}}function Pte(t,e){const n=new hw({ctx:t.ctx,options:e,chart:t});dl.configure(t,n,e),dl.addBox(t,n),t.titleBlock=n}var Mte={id:"title",_element:hw,start(t,e,n){Pte(t,n)},stop(t){const e=t.titleBlock;dl.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;dl.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const H0=new WeakMap;var kte={id:"subtitle",start(t,e,n){const r=new hw({ctx:t.ctx,options:n,chart:t});dl.configure(t,r,n),dl.addBox(t,r),H0.set(t,r)},stop(t){dl.removeBox(t,H0.get(t)),H0.delete(t)},beforeUpdate(t,e,n){const r=H0.get(t);dl.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Dg={average(t){if(!t.length)return!1;let e,n,r=0,i=0,s=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();r+=a.x,i+=a.y,++s}}return{x:r/s,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),d=Vb(e,c);d<i&&(i=d,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function zc(t,e){return e&&(Zs(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function xh(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Ate(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function iL(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=ha(e.bodyFont),c=ha(e.titleFont),d=ha(e.footerFont),p=s.length,v=i.length,m=r.length,x=fl(e.padding);let E=x.height,M=0,A=r.reduce((K,ne)=>K+ne.before.length+ne.lines.length+ne.after.length,0);if(A+=t.beforeBody.length+t.afterBody.length,p&&(E+=p*c.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),A){const K=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;E+=m*K+(A-m)*l.lineHeight+(A-1)*e.bodySpacing}v&&(E+=e.footerMarginTop+v*d.lineHeight+(v-1)*e.footerSpacing);let O=0;const z=function(K){M=Math.max(M,n.measureText(K).width+O)};return n.save(),n.font=c.string,cs(t.title,z),n.font=l.string,cs(t.beforeBody.concat(t.afterBody),z),O=e.displayColors?o+2+e.boxPadding:0,cs(r,K=>{cs(K.before,z),cs(K.lines,z),cs(K.after,z)}),O=0,n.font=d.string,cs(t.footer,z),n.restore(),M+=x.width,{width:M,height:E}}function Tte(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function Dte(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function Ote(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),Dte(c,t,e,n)&&(c="center"),c}function sL(t,e,n){const r=n.yAlign||e.yAlign||Tte(t,n);return{xAlign:n.xAlign||e.xAlign||Ote(t,e,n,r),yAlign:r}}function Nte(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function Ite(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function oL(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:d,topRight:p,bottomLeft:v,bottomRight:m}=mf(o);let x=Nte(e,a);const E=Ite(e,l,c);return l==="center"?a==="left"?x+=c:a==="right"&&(x-=c):a==="left"?x-=Math.max(d,v)+i:a==="right"&&(x+=Math.max(p,m)+i),{x:Ca(x,0,r.width-e.width),y:Ca(E,0,r.height-e.height)}}function W0(t,e,n){const r=fl(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function aL(t){return zc([],xh(t))}function Bte(t,e,n){return Dd(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function lL(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const pM={beforeTitle:_h,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:_h,beforeBody:_h,beforeLabel:_h,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Yi(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:_h,afterBody:_h,beforeFooter:_h,footer:_h,afterFooter:_h};function Gl(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?pM[e].call(n,r):i}class Xb extends $h{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new GP(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=Bte(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Gl(r,"beforeTitle",this,e),s=Gl(r,"title",this,e),o=Gl(r,"afterTitle",this,e);let a=[];return a=zc(a,xh(i)),a=zc(a,xh(s)),a=zc(a,xh(o)),a}getBeforeBody(e,n){return aL(Gl(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return cs(e,s=>{const o={before:[],lines:[],after:[]},a=lL(r,s);zc(o.before,xh(Gl(a,"beforeLabel",this,s))),zc(o.lines,Gl(a,"label",this,s)),zc(o.after,xh(Gl(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return aL(Gl(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Gl(r,"beforeFooter",this,e),s=Gl(r,"footer",this,e),o=Gl(r,"afterFooter",this,e);let a=[];return a=zc(a,xh(i)),a=zc(a,xh(s)),a=zc(a,xh(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(Ate(this.chart,n[l]));return e.filter&&(a=a.filter((d,p,v)=>e.filter(d,p,v,r))),e.itemSort&&(a=a.sort((d,p)=>e.itemSort(d,p,r))),cs(a,d=>{const p=lL(e.callbacks,d);i.push(Gl(p,"labelColor",this,d)),s.push(Gl(p,"labelPointStyle",this,d)),o.push(Gl(p,"labelTextColor",this,d))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Dg[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=iL(this,r),c=Object.assign({},a,l),d=sL(this.chart,r,c),p=oL(r,c,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:d,bottomRight:p}=mf(a),{x:v,y:m}=e,{width:x,height:E}=n;let M,A,O,z,K,ne;return s==="center"?(K=m+E/2,i==="left"?(M=v,A=M-o,z=K+o,ne=K-o):(M=v+x,A=M+o,z=K-o,ne=K+o),O=M):(i==="left"?A=v+Math.max(l,d)+o:i==="right"?A=v+x-Math.max(c,p)-o:A=this.caretX,s==="top"?(z=m,K=z-o,M=A-o,O=A+o):(z=m+E,K=z+o,M=A+o,O=A-o),ne=z),{x1:M,x2:A,x3:O,y1:z,y2:K,y3:ne}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=Lp(r.rtl,this.x,this.width);for(e.x=W0(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=ha(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,d=ha(s.bodyFont),p=W0(this,"left",s),v=i.x(p),m=l<d.lineHeight?(d.lineHeight-l)/2:0,x=n.y+m;if(s.usePointStyle){const E={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},M=i.leftForLtr(v,c)+c/2,A=x+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Hb(e,E,M,A),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Hb(e,E,M,A)}else{e.lineWidth=Oi(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const E=i.leftForLtr(v,c),M=i.leftForLtr(i.xPlus(v,1),c-2),A=mf(o.borderRadius);Object.values(A).some(O=>O!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Lm(e,{x:E,y:x,w:c,h:l,radius:A}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Lm(e,{x:M,y:x+1,w:c-2,h:l-2,radius:A}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(E,x,c,l),e.strokeRect(E,x,c,l),e.fillStyle=o.backgroundColor,e.fillRect(M,x+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:d}=r,p=ha(r.bodyFont);let v=p.lineHeight,m=0;const x=Lp(r.rtl,this.x,this.width),E=function(N){n.fillText(N,x.x(e.x+m),e.y+v/2),e.y+=v+s},M=x.textAlign(o);let A,O,z,K,ne,me,pe;for(n.textAlign=o,n.textBaseline="middle",n.font=p.string,e.x=W0(this,M,r),n.fillStyle=r.bodyColor,cs(this.beforeBody,E),m=a&&M!=="right"?o==="center"?c/2+d:c+2+d:0,K=0,me=i.length;K<me;++K){for(A=i[K],O=this.labelTextColors[K],n.fillStyle=O,cs(A.before,E),z=A.lines,a&&z.length&&(this._drawColorBox(n,e,K,x,r),v=Math.max(p.lineHeight,l)),ne=0,pe=z.length;ne<pe;++ne)E(z[ne]),v=p.lineHeight;cs(A.after,E)}m=0,v=p.lineHeight,cs(this.afterBody,E),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=Lp(r.rtl,this.x,this.width);for(e.x=W0(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=ha(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:d}=r,{topLeft:p,topRight:v,bottomLeft:m,bottomRight:x}=mf(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+p,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-v,l),n.quadraticCurveTo(a+c,l,a+c,l+v),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+d-x),n.quadraticCurveTo(a+c,l+d,a+c-x,l+d),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+m,l+d),n.quadraticCurveTo(a,l+d,a,l+d-m),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+p),n.quadraticCurveTo(a,l,a+p,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Dg[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=iL(this,e),l=Object.assign({},o,this._size),c=sL(n,e,l),d=oL(e,l,c,n);(i._to!==d.x||s._to!==d.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=fl(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),$P(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),VP(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!ny(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!ny(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Dg[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}Ze(Xb,"positioners",Dg);var Rte={id:"tooltip",_element:Xb,positioners:Dg,afterInit(t,e,n){n&&(t.tooltip=new Xb({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:pM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Fte=Object.freeze({__proto__:null,Colors:Zee,Decimation:ete,Filler:_te,Legend:Ete,SubTitle:kte,Title:Mte,Tooltip:Rte});const jte=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function zte(t,e,n,r){const i=t.indexOf(e);if(i===-1)return jte(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const $te=(t,e)=>t===null?null:Ca(Math.round(t),0,e);function uL(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Jb extends Pf{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Yi(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:zte(r,e,oi(n,e),this._addedLabels),$te(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return uL.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Ze(Jb,"id","category"),Ze(Jb,"defaults",{ticks:{callback:uL}});function Vte(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:d,maxDigits:p,includeBounds:v}=t,m=s||1,x=d-1,{min:E,max:M}=e,A=!Yi(o),O=!Yi(a),z=!Yi(c),K=(M-E)/(p+1);let ne=r3((M-E)/x/m)*m,me,pe,N,j;if(ne<1e-14&&!A&&!O)return[{value:E},{value:M}];j=Math.ceil(M/ne)-Math.floor(E/ne),j>x&&(ne=r3(j*ne/x/m)*m),Yi(l)||(me=Math.pow(10,l),ne=Math.ceil(ne*me)/me),i==="ticks"?(pe=Math.floor(E/ne)*ne,N=Math.ceil(M/ne)*ne):(pe=E,N=M),A&&O&&s&&RX((a-o)/s,ne/1e3)?(j=Math.round(Math.min((a-o)/ne,d)),ne=(a-o)/j,pe=o,N=a):z?(pe=A?o:pe,N=O?a:N,j=c-1,ne=(N-pe)/j):(j=(N-pe)/ne,Qg(j,Math.round(j),ne/1e3)?j=Math.round(j):j=Math.ceil(j));const q=Math.max(i3(ne),i3(pe));me=Math.pow(10,Yi(l)?q:l),pe=Math.round(pe*me)/me,N=Math.round(N*me)/me;let I=0;for(A&&(v&&pe!==o?(n.push({value:o}),pe<o&&I++,Qg(Math.round((pe+I*ne)*me)/me,o,cL(o,K,t))&&I++):pe<o&&I++);I<j;++I){const B=Math.round((pe+I*ne)*me)/me;if(O&&B>a)break;n.push({value:B})}return O&&v&&N!==a?n.length&&Qg(n[n.length-1].value,a,cL(a,K,t))?n[n.length-1].value=a:n.push({value:a}):(!O||N===a)&&n.push({value:N}),n}function cL(t,e,{horizontal:n,minRotation:r}){const i=bc(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class uy extends Pf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Yi(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=Qc(i),c=Qc(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=Vte(i,s);return e.bounds==="ticks"&&SP(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Fm(e,this.chart.options.locale,this.options.ticks.format)}}class Qb extends uy{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ko(e)?e:0,this.max=ko(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=bc(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ze(Qb,"id","linear"),Ze(Qb,"defaults",{ticks:{callback:qy.formatters.numeric}});const Cm=t=>Math.floor(pd(t)),Qd=(t,e)=>Math.pow(10,Cm(t)+e);function hL(t){return t/Math.pow(10,Cm(t))===1}function dL(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function Ute(t,e){const n=e-t;let r=Cm(n);for(;dL(t,e,r)>10;)r++;for(;dL(t,e,r)<10;)r--;return Math.min(r,Cm(t))}function Hte(t,{min:e,max:n}){e=_u(t.min,e);const r=[],i=Cm(e);let s=Ute(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,d=Math.floor((e-l)/a/10)*a*10;let p=Math.floor((c-d)/Math.pow(10,s)),v=_u(t.min,Math.round((l+d+p*Math.pow(10,s))*o)/o);for(;v<n;)r.push({value:v,major:hL(v),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(s++,p=2,o=s>=0?1:o),v=Math.round((l+d+p*Math.pow(10,s))*o)/o;const m=_u(t.max,v);return r.push({value:m,major:hL(m),significand:p}),r}class e_ extends Pf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=uy.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return ko(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ko(e)?Math.max(0,e):null,this.max=ko(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ko(this._userMin)&&(this.min=e===Qd(this.min,0)?Qd(this.min,-1):Qd(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(Qd(r,-1)),o(Qd(i,1)))),r<=0&&s(Qd(i,-1)),i<=0&&o(Qd(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=Hte(n,this);return e.bounds==="ticks"&&SP(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":Fm(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=pd(e),this._valueRange=pd(this.max)-pd(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(pd(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}Ze(e_,"id","logarithmic"),Ze(e_,"defaults",{ticks:{callback:qy.formatters.logarithmic,major:{enabled:!0}}});function t_(t){const e=t.ticks;if(e.display&&t.display){const n=fl(e.backdropPadding);return oi(e.font&&e.font.size,Ao.font.size)+n.height}return 0}function Wte(t,e,n){return n=Zs(n)?n:[n],{w:eJ(t,e.string,n),h:n.length*e.lineHeight}}function fL(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function Gte(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Rs/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const d=t.getPointPosition(l,t.drawingArea+i[l],a),p=ha(c.font),v=Wte(t.ctx,p,t._pointLabels[l]);r[l]=v;const m=wu(t.getIndexAngle(l)+a),x=Math.round(Q_(m)),E=fL(x,d.x,v.w,0,180),M=fL(x,d.y,v.h,90,270);qte(n,e,m,E,M)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=Zte(t,r,i)}function qte(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function Yte(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(Q_(wu(l.angle+Wo))),d=Qte(l.y,a.h,c),p=Xte(c),v=Jte(l.x,a.w,p);return{visible:!0,x:l.x,y:d,textAlign:p,left:v,top:d,right:v+a.w,bottom:d+a.h}}function Kte(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(Dh({x:n,y:r},e)||Dh({x:n,y:s},e)||Dh({x:i,y:r},e)||Dh({x:i,y:s},e))}function Zte(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:t_(s)/2,additionalAngle:o?Rs/i:0};let c;for(let d=0;d<i;d++){l.padding=n[d],l.size=e[d];const p=Yte(t,d,l);r.push(p),a==="auto"&&(p.visible=Kte(p,c),p.visible&&(c=p))}return r}function Xte(t){return t===0||t===180?"center":t<180?"left":"right"}function Jte(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function Qte(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function ene(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!Yi(a)){const l=mf(e.borderRadius),c=fl(e.backdropPadding);t.fillStyle=a;const d=r-c.left,p=i-c.top,v=s-r+c.width,m=o-i+c.height;Object.values(l).some(x=>x!==0)?(t.beginPath(),Lm(t,{x:d,y:p,w:v,h:m,radius:l}),t.fill()):t.fillRect(d,p,v,m)}}function tne(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));ene(n,o,s);const a=ha(o.font),{x:l,y:c,textAlign:d}=s;Lf(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:d,textBaseline:"middle"})}}function gM(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,Bs);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function nne(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),gM(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function rne(t,e,n){return Dd(t,{label:n,index:e,type:"pointLabel"})}class Og extends uy{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=fl(t_(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=ko(e)&&!isNaN(e)?e:0,this.max=ko(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/t_(this.options))}generateTickLabels(e){uy.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=Ds(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?Gte(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=Bs/(this._pointLabels.length||1),r=this.options.startAngle||0;return wu(e*n+bc(r))}getDistanceFromCenterForValue(e){if(Yi(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(Yi(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return rne(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-Wo+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),gM(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&tne(this,o),i.display&&this.ticks.forEach((d,p)=>{if(p!==0){l=this.getDistanceFromCenterForValue(d.value);const v=this.getContext(p),m=i.setContext(v),x=s.setContext(v);nne(this,m,l,o,x)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const d=r.setContext(this.getPointLabelContext(a)),{color:p,lineWidth:v}=d;!v||!p||(e.lineWidth=v,e.strokeStyle=p,e.setLineDash(d.borderDash),e.lineDashOffset=d.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),d=ha(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=d.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const p=fl(c.backdropPadding);e.fillRect(-o/2-p.left,-s-d.size/2-p.top,o+p.width,d.size+p.height)}Lf(e,a.label,0,-s,d,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Ze(Og,"id","radialLinear"),Ze(Og,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:qy.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Ze(Og,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Ze(Og,"descriptors",{angleLines:{_fallback:"grid"}});const Jy={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Xl=Object.keys(Jy);function pL(t,e){return t-e}function gL(t,e){if(Yi(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),ko(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Op(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function mL(t,e,n,r){const i=Xl.length;for(let s=Xl.indexOf(t);s<i-1;++s){const o=Jy[Xl[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Xl[s]}return Xl[i-1]}function ine(t,e,n,r,i){for(let s=Xl.length-1;s>=Xl.indexOf(n);s--){const o=Xl[s];if(Jy[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return Xl[n?Xl.indexOf(n):0]}function sne(t){for(let e=Xl.indexOf(t)+1,n=Xl.length;e<n;++e)if(Jy[Xl[e]].common)return Xl[e]}function vL(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=ew(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function one(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function yL(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:one(t,r,i,n)}class Em extends Pf{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new KP._date(e.adapters.date);i.init(n),Jg(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:gL(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=ko(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=ko(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=$X(i,s,o);return this._unit=n.unit||(r.autoSkip?mL(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):ine(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:sne(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),yL(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Ca(n,0,o),r=Ca(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||mL(s.minUnit,n,r,this._getLabelCapacity(n)),a=oi(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Op(l)||l===!0,d={};let p=n,v,m;if(c&&(p=+e.startOf(p,"isoWeek",l)),p=+e.startOf(p,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const x=i.ticks.source==="data"&&this.getDataTimestamps();for(v=p,m=0;v<r;v=+e.add(v,a,o),m++)vL(d,v,x);return(v===r||i.bounds==="ticks"||m===1)&&vL(d,v,x),Object.keys(d).sort(pL).map(E=>+E)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return Ds(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,d=l&&a[l],p=c&&a[c],v=r[n],m=c&&p&&v&&v.major;return this._adapter.format(e,i||(m?p:d))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=bc(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,yL(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(gL(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return PP(e.sort(pL))}}Ze(Em,"id","time"),Ze(Em,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function G0(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Th(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Th(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class n_ extends Em{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=G0(n,this.min),this._tableRange=G0(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,d;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)d=i[o+1],l=i[o-1],c=i[o],Math.round((d+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(G0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return G0(this._table,r*this._tableRange+this._minPos,!0)}}Ze(n_,"id","timeseries"),Ze(n_,"defaults",Em.defaults);var ane=Object.freeze({__proto__:null,CategoryScale:Jb,LinearScale:Qb,LogarithmicScale:e_,RadialLinearScale:Og,TimeScale:Em,TimeSeriesScale:n_});const lne=[gQ,Hee,Fte,ane];Wc.register(...lne);const mM=6048e5,une=864e5,jm=6e4,zm=36e5,cne=1e3,bL=Symbol.for("constructDateFrom");function To(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&bL in t?t[bL](e):t instanceof Date?new t.constructor(e):new Date(e)}function Zr(t,e){return To(e||t,t)}function Qy(t,e,n){const r=Zr(t,n==null?void 0:n.in);return isNaN(e)?To((n==null?void 0:n.in)||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function dw(t,e,n){const r=Zr(t,n==null?void 0:n.in);if(isNaN(e))return To(t,NaN);if(!e)return r;const i=r.getDate(),s=To(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function fw(t,e,n){return To(t,+Zr(t)+e)}function hne(t,e,n){return fw(t,e*zm)}let dne={};function Mf(){return dne}function nh(t,e){var a,l,c,d;const n=Mf(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,i=Zr(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Bp(t,e){return nh(t,{...e,weekStartsOn:1})}function vM(t,e){const n=Zr(t,e==null?void 0:e.in),r=n.getFullYear(),i=To(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=Bp(i),o=To(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Bp(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function cy(t){const e=Zr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function kf(t,...e){const n=To.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function r_(t,e){const n=Zr(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function yM(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e),s=r_(r),o=r_(i),a=+s-cy(s),l=+o-cy(o);return Math.round((a-l)/une)}function fne(t,e){const n=vM(t,e),r=To(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Bp(r)}function pne(t,e,n){const r=Zr(t,n==null?void 0:n.in);return r.setTime(r.getTime()+e*jm),r}function gne(t,e,n){return dw(t,e*3,n)}function mne(t,e,n){return fw(t,e*1e3)}function vne(t,e,n){return Qy(t,e*7,n)}function yne(t,e,n){return dw(t,e*12,n)}function rm(t,e){const n=+Zr(t)-+Zr(e);return n<0?-1:n>0?1:n}function bne(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function bM(t){return!(!bne(t)&&typeof t!="number"||isNaN(+Zr(t)))}function _ne(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function wne(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e);return r.getFullYear()-i.getFullYear()}function _M(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e),s=_L(r,i),o=Math.abs(yM(r,i));r.setDate(r.getDate()-s*o);const a=+(_L(r,i)===-s),l=s*(o-a);return l===0?0:l}function _L(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function $m(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function xne(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e),s=(+r-+i)/zm;return $m(n==null?void 0:n.roundingMethod)(s)}function pw(t,e){return+Zr(t)-+Zr(e)}function Lne(t,e,n){const r=pw(t,e)/jm;return $m(n==null?void 0:n.roundingMethod)(r)}function wM(t,e){const n=Zr(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function xM(t,e){const n=Zr(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Sne(t,e){const n=Zr(t,e==null?void 0:e.in);return+wM(n,e)==+xM(n,e)}function LM(t,e,n){const[r,i,s]=kf(n==null?void 0:n.in,t,t,e),o=rm(i,s),a=Math.abs(_ne(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let l=rm(i,s)===-o;Sne(r)&&a===1&&rm(r,s)===1&&(l=!1);const c=o*(a-+l);return c===0?0:c}function Cne(t,e,n){const r=LM(t,e,n)/3;return $m(n==null?void 0:n.roundingMethod)(r)}function Ene(t,e,n){const r=pw(t,e)/1e3;return $m(n==null?void 0:n.roundingMethod)(r)}function Pne(t,e,n){const r=_M(t,e,n)/7;return $m(n==null?void 0:n.roundingMethod)(r)}function Mne(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e),s=rm(r,i),o=Math.abs(wne(r,i));r.setFullYear(1584),i.setFullYear(1584);const a=rm(r,i)===-s,l=s*(o-+a);return l===0?0:l}function kne(t,e){const n=Zr(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3;return n.setMonth(i,1),n.setHours(0,0,0,0),n}function Ane(t,e){const n=Zr(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function Tne(t,e){const n=Zr(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function SM(t,e){const n=Zr(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Dne(t,e){const n=Zr(t,e==null?void 0:e.in);return n.setMinutes(59,59,999),n}function One(t,e){var a,l;const n=Mf(),r=n.weekStartsOn??((l=(a=n.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,i=Zr(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function Nne(t,e){const n=Zr(t,e==null?void 0:e.in);return n.setSeconds(59,999),n}function Ine(t,e){const n=Zr(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3+3;return n.setMonth(i,0),n.setHours(23,59,59,999),n}function Bne(t,e){const n=Zr(t,e==null?void 0:e.in);return n.setMilliseconds(999),n}const Rne={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Fne=(t,e,n)=>{let r;const i=Rne[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function D2(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const jne={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},zne={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},$ne={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Vne={date:D2({formats:jne,defaultWidth:"full"}),time:D2({formats:zne,defaultWidth:"full"}),dateTime:D2({formats:$ne,defaultWidth:"full"})},Une={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Hne=(t,e,n,r)=>Une[t];function gg(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const Wne={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Gne={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},qne={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Yne={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Kne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Zne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Xne=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Jne={ordinalNumber:Xne,era:gg({values:Wne,defaultWidth:"wide"}),quarter:gg({values:Gne,defaultWidth:"wide",argumentCallback:t=>t-1}),month:gg({values:qne,defaultWidth:"wide"}),day:gg({values:Yne,defaultWidth:"wide"}),dayPeriod:gg({values:Kne,defaultWidth:"wide",formattingValues:Zne,defaultFormattingWidth:"wide"})};function mg(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?ere(a,p=>p.test(o)):Qne(a,p=>p.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function Qne(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function ere(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function tre(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const nre=/^(\d+)(th|st|nd|rd)?/i,rre=/\d+/i,ire={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},sre={any:[/^b/i,/^(a|c)/i]},ore={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},are={any:[/1/i,/2/i,/3/i,/4/i]},lre={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ure={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},cre={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},hre={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},dre={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fre={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},pre={ordinalNumber:tre({matchPattern:nre,parsePattern:rre,valueCallback:t=>parseInt(t,10)}),era:mg({matchPatterns:ire,defaultMatchWidth:"wide",parsePatterns:sre,defaultParseWidth:"any"}),quarter:mg({matchPatterns:ore,defaultMatchWidth:"wide",parsePatterns:are,defaultParseWidth:"any",valueCallback:t=>t+1}),month:mg({matchPatterns:lre,defaultMatchWidth:"wide",parsePatterns:ure,defaultParseWidth:"any"}),day:mg({matchPatterns:cre,defaultMatchWidth:"wide",parsePatterns:hre,defaultParseWidth:"any"}),dayPeriod:mg({matchPatterns:dre,defaultMatchWidth:"any",parsePatterns:fre,defaultParseWidth:"any"})},CM={code:"en-US",formatDistance:Fne,formatLong:Vne,formatRelative:Hne,localize:Jne,match:pre,options:{weekStartsOn:0,firstWeekContainsDate:1}};function gre(t,e){const n=Zr(t,e==null?void 0:e.in);return yM(n,SM(n))+1}function EM(t,e){const n=Zr(t,e==null?void 0:e.in),r=+Bp(n)-+fne(n);return Math.round(r/mM)+1}function gw(t,e){var d,p,v,m;const n=Zr(t,e==null?void 0:e.in),r=n.getFullYear(),i=Mf(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(v=i.locale)==null?void 0:v.options)==null?void 0:m.firstWeekContainsDate)??1,o=To((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=nh(o,e),l=To((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=nh(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function mre(t,e){var a,l,c,d;const n=Mf(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,i=gw(t,e),s=To((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),nh(s,e)}function PM(t,e){const n=Zr(t,e==null?void 0:e.in),r=+nh(n,e)-+mre(n,e);return Math.round(r/mM)+1}function us(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ed={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return us(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):us(n+1,2)},d(t,e){return us(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return us(t.getHours()%12||12,e.length)},H(t,e){return us(t.getHours(),e.length)},m(t,e){return us(t.getMinutes(),e.length)},s(t,e){return us(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return us(i,e.length)}},np={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wL={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ed.y(t,e)},Y:function(t,e,n,r){const i=gw(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return us(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):us(s,e.length)},R:function(t,e){const n=vM(t);return us(n,e.length)},u:function(t,e){const n=t.getFullYear();return us(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return us(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return us(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ed.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return us(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=PM(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):us(i,e.length)},I:function(t,e,n){const r=EM(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):us(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ed.d(t,e)},D:function(t,e,n){const r=gre(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):us(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return us(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return us(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return us(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=np.noon:r===0?i=np.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=np.evening:r>=12?i=np.afternoon:r>=4?i=np.morning:i=np.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ed.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ed.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):us(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):us(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ed.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ed.s(t,e)},S:function(t,e){return ed.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return LL(r);case"XXXX":case"XX":return sf(r);case"XXXXX":case"XXX":default:return sf(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return LL(r);case"xxxx":case"xx":return sf(r);case"xxxxx":case"xxx":default:return sf(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+xL(r,":");case"OOOO":default:return"GMT"+sf(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+xL(r,":");case"zzzz":default:return"GMT"+sf(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return us(r,e.length)},T:function(t,e,n){return us(+t,e.length)}};function xL(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+us(s,2)}function LL(t,e){return t%60===0?(t>0?"-":"+")+us(Math.abs(t)/60,2):sf(t,e)}function sf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=us(Math.trunc(r/60),2),s=us(r%60,2);return n+i+e+s}const SL=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},MM=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},vre=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return SL(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",SL(r,e)).replace("{{time}}",MM(i,e))},i_={p:MM,P:vre},yre=/^D+$/,bre=/^Y+$/,_re=["D","DD","YY","YYYY"];function kM(t){return yre.test(t)}function AM(t){return bre.test(t)}function s_(t,e,n){const r=wre(t,e,n);if(console.warn(r),_re.includes(t))throw new RangeError(r)}function wre(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const xre=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Lre=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Sre=/^'([^]*?)'?$/,Cre=/''/g,Ere=/[a-zA-Z]/;function Pre(t,e,n){var d,p,v,m,x,E,M,A;const r=Mf(),i=(n==null?void 0:n.locale)??r.locale??CM,s=(n==null?void 0:n.firstWeekContainsDate)??((p=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(v=r.locale)==null?void 0:v.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((E=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:E.weekStartsOn)??r.weekStartsOn??((A=(M=r.locale)==null?void 0:M.options)==null?void 0:A.weekStartsOn)??0,a=Zr(t,n==null?void 0:n.in);if(!bM(a))throw new RangeError("Invalid time value");let l=e.match(Lre).map(O=>{const z=O[0];if(z==="p"||z==="P"){const K=i_[z];return K(O,i.formatLong)}return O}).join("").match(xre).map(O=>{if(O==="''")return{isToken:!1,value:"'"};const z=O[0];if(z==="'")return{isToken:!1,value:Mre(O)};if(wL[z])return{isToken:!0,value:O};if(z.match(Ere))throw new RangeError("Format string contains an unescaped latin alphabet character `"+z+"`");return{isToken:!1,value:O}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(O=>{if(!O.isToken)return O.value;const z=O.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&AM(z)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&kM(z))&&s_(z,e,String(t));const K=wL[z[0]];return K(a,z,i.localize,c)}).join("")}function Mre(t){const e=t.match(Sre);return e?e[1].replace(Cre,"'"):t}function kre(){return Object.assign({},Mf())}function Are(t,e){const n=Zr(t,e==null?void 0:e.in).getDay();return n===0?7:n}function Tre(t,e){const n=Dre(e)?new e(0):To(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function Dre(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const Ore=10;class TM{constructor(){Ze(this,"subPriority",0)}validate(e,n){return!0}}class Nre extends TM{constructor(e,n,r,i,s){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class Ire extends TM{constructor(n,r){super();Ze(this,"priority",Ore);Ze(this,"subPriority",-1);this.context=n||(i=>To(r,i))}set(n,r){return r.timestampIsSet?n:To(n,Tre(n,this.context))}}class ss{run(e,n,r,i){const s=this.parse(e,n,r,i);return s?{setter:new Nre(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,n,r){return!0}}class Bre extends ss{constructor(){super(...arguments);Ze(this,"priority",140);Ze(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,r,i){return r.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const Go={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Gc={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function qo(t,e){return t&&{value:e(t.value),rest:t.rest}}function co(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function qc(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(i*zm+s*jm+o*cne),rest:e.slice(n[0].length)}}function DM(t){return co(Go.anyDigitsSigned,t)}function Do(t,e){switch(t){case 1:return co(Go.singleDigit,e);case 2:return co(Go.twoDigits,e);case 3:return co(Go.threeDigits,e);case 4:return co(Go.fourDigits,e);default:return co(new RegExp("^\\d{1,"+t+"}"),e)}}function hy(t,e){switch(t){case 1:return co(Go.singleDigitSigned,e);case 2:return co(Go.twoDigitsSigned,e);case 3:return co(Go.threeDigitsSigned,e);case 4:return co(Go.fourDigitsSigned,e);default:return co(new RegExp("^-?\\d{1,"+t+"}"),e)}}function mw(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function OM(t,e){const n=e>0,r=n?e:1-e;let i;if(r<=50)i=t||100;else{const s=r+50,o=Math.trunc(s/100)*100,a=t>=s%100;i=t+o-(a?100:0)}return n?i:1-i}function NM(t){return t%400===0||t%4===0&&t%100!==0}class Rre extends ss{constructor(){super(...arguments);Ze(this,"priority",130);Ze(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return qo(Do(4,n),s);case"yo":return qo(i.ordinalNumber(n,{unit:"year"}),s);default:return qo(Do(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i){const s=n.getFullYear();if(i.isTwoDigitYear){const a=OM(i.year,s);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class Fre extends ss{constructor(){super(...arguments);Ze(this,"priority",130);Ze(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return qo(Do(4,n),s);case"Yo":return qo(i.ordinalNumber(n,{unit:"year"}),s);default:return qo(Do(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i,s){const o=gw(n,s);if(i.isTwoDigitYear){const l=OM(i.year,o);return n.setFullYear(l,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),nh(n,s)}const a=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(a,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),nh(n,s)}}class jre extends ss{constructor(){super(...arguments);Ze(this,"priority",130);Ze(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return hy(r==="R"?4:r.length,n)}set(n,r,i){const s=To(n,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),Bp(s)}}class zre extends ss{constructor(){super(...arguments);Ze(this,"priority",130);Ze(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return hy(r==="u"?4:r.length,n)}set(n,r,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class $re extends ss{constructor(){super(...arguments);Ze(this,"priority",120);Ze(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"Q":case"QQ":return Do(r.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class Vre extends ss{constructor(){super(...arguments);Ze(this,"priority",120);Ze(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"q":case"qq":return Do(r.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class Ure extends ss{constructor(){super(...arguments);Ze(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Ze(this,"priority",110)}parse(n,r,i){const s=o=>o-1;switch(r){case"M":return qo(co(Go.month,n),s);case"MM":return qo(Do(2,n),s);case"Mo":return qo(i.ordinalNumber(n,{unit:"month"}),s);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class Hre extends ss{constructor(){super(...arguments);Ze(this,"priority",110);Ze(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,i){const s=o=>o-1;switch(r){case"L":return qo(co(Go.month,n),s);case"LL":return qo(Do(2,n),s);case"Lo":return qo(i.ordinalNumber(n,{unit:"month"}),s);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function Wre(t,e,n){const r=Zr(t,n==null?void 0:n.in),i=PM(r,n)-e;return r.setDate(r.getDate()-i*7),Zr(r,n==null?void 0:n.in)}class Gre extends ss{constructor(){super(...arguments);Ze(this,"priority",100);Ze(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,i){switch(r){case"w":return co(Go.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return Do(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i,s){return nh(Wre(n,i,s),s)}}function qre(t,e,n){const r=Zr(t,n==null?void 0:n.in),i=EM(r,n)-e;return r.setDate(r.getDate()-i*7),r}class Yre extends ss{constructor(){super(...arguments);Ze(this,"priority",100);Ze(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,i){switch(r){case"I":return co(Go.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return Do(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i){return Bp(qre(n,i))}}const Kre=[31,28,31,30,31,30,31,31,30,31,30,31],Zre=[31,29,31,30,31,30,31,31,30,31,30,31];class Xre extends ss{constructor(){super(...arguments);Ze(this,"priority",90);Ze(this,"subPriority",1);Ze(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"d":return co(Go.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return Do(r.length,n)}}validate(n,r){const i=n.getFullYear(),s=NM(i),o=n.getMonth();return s?r>=1&&r<=Zre[o]:r>=1&&r<=Kre[o]}set(n,r,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class Jre extends ss{constructor(){super(...arguments);Ze(this,"priority",90);Ze(this,"subpriority",1);Ze(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,i){switch(r){case"D":case"DD":return co(Go.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return Do(r.length,n)}}validate(n,r){const i=n.getFullYear();return NM(i)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function vw(t,e,n){var p,v,m,x;const r=Mf(),i=(n==null?void 0:n.weekStartsOn)??((v=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((x=(m=r.locale)==null?void 0:m.options)==null?void 0:x.weekStartsOn)??0,s=Zr(t,n==null?void 0:n.in),o=s.getDay(),l=(e%7+7)%7,c=7-i,d=e<0||e>6?e-(o+c)%7:(l+c)%7-(o+c)%7;return Qy(s,d,n)}class Qre extends ss{constructor(){super(...arguments);Ze(this,"priority",90);Ze(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=vw(n,i,s),n.setHours(0,0,0,0),n}}class eie extends ss{constructor(){super(...arguments);Ze(this,"priority",90);Ze(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return qo(Do(r.length,n),o);case"eo":return qo(i.ordinalNumber(n,{unit:"day"}),o);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=vw(n,i,s),n.setHours(0,0,0,0),n}}class tie extends ss{constructor(){super(...arguments);Ze(this,"priority",90);Ze(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return qo(Do(r.length,n),o);case"co":return qo(i.ordinalNumber(n,{unit:"day"}),o);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=vw(n,i,s),n.setHours(0,0,0,0),n}}function nie(t,e,n){const r=Zr(t,n==null?void 0:n.in),i=Are(r,n),s=e-i;return Qy(r,s,n)}class rie extends ss{constructor(){super(...arguments);Ze(this,"priority",90);Ze(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,i){const s=o=>o===0?7:o;switch(r){case"i":case"ii":return Do(r.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return qo(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiii":return qo(i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiiii":return qo(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiii":default:return qo(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s)}}validate(n,r){return r>=1&&r<=7}set(n,r,i){return n=nie(n,i),n.setHours(0,0,0,0),n}}class iie extends ss{constructor(){super(...arguments);Ze(this,"priority",80);Ze(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(mw(i),0,0,0),n}}class sie extends ss{constructor(){super(...arguments);Ze(this,"priority",80);Ze(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(mw(i),0,0,0),n}}class oie extends ss{constructor(){super(...arguments);Ze(this,"priority",80);Ze(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(mw(i),0,0,0),n}}class aie extends ss{constructor(){super(...arguments);Ze(this,"priority",70);Ze(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,i){switch(r){case"h":return co(Go.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return Do(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,i){const s=n.getHours()>=12;return s&&i<12?n.setHours(i+12,0,0,0):!s&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class lie extends ss{constructor(){super(...arguments);Ze(this,"priority",70);Ze(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,i){switch(r){case"H":return co(Go.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return Do(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,i){return n.setHours(i,0,0,0),n}}class uie extends ss{constructor(){super(...arguments);Ze(this,"priority",70);Ze(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,i){switch(r){case"K":return co(Go.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return Do(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class cie extends ss{constructor(){super(...arguments);Ze(this,"priority",70);Ze(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,i){switch(r){case"k":return co(Go.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return Do(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,i){const s=i<=24?i%24:i;return n.setHours(s,0,0,0),n}}class hie extends ss{constructor(){super(...arguments);Ze(this,"priority",60);Ze(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"m":return co(Go.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return Do(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setMinutes(i,0,0),n}}class die extends ss{constructor(){super(...arguments);Ze(this,"priority",50);Ze(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"s":return co(Go.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return Do(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setSeconds(i,0),n}}class fie extends ss{constructor(){super(...arguments);Ze(this,"priority",30);Ze(this,"incompatibleTokens",["t","T"])}parse(n,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return qo(Do(r.length,n),i)}set(n,r,i){return n.setMilliseconds(i),n}}class pie extends ss{constructor(){super(...arguments);Ze(this,"priority",10);Ze(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return qc(Gc.basicOptionalMinutes,n);case"XX":return qc(Gc.basic,n);case"XXXX":return qc(Gc.basicOptionalSeconds,n);case"XXXXX":return qc(Gc.extendedOptionalSeconds,n);case"XXX":default:return qc(Gc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:To(n,n.getTime()-cy(n)-i)}}class gie extends ss{constructor(){super(...arguments);Ze(this,"priority",10);Ze(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return qc(Gc.basicOptionalMinutes,n);case"xx":return qc(Gc.basic,n);case"xxxx":return qc(Gc.basicOptionalSeconds,n);case"xxxxx":return qc(Gc.extendedOptionalSeconds,n);case"xxx":default:return qc(Gc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:To(n,n.getTime()-cy(n)-i)}}class mie extends ss{constructor(){super(...arguments);Ze(this,"priority",40);Ze(this,"incompatibleTokens","*")}parse(n){return DM(n)}set(n,r,i){return[To(n,i*1e3),{timestampIsSet:!0}]}}class vie extends ss{constructor(){super(...arguments);Ze(this,"priority",20);Ze(this,"incompatibleTokens","*")}parse(n){return DM(n)}set(n,r,i){return[To(n,i),{timestampIsSet:!0}]}}const yie={G:new Bre,y:new Rre,Y:new Fre,R:new jre,u:new zre,Q:new $re,q:new Vre,M:new Ure,L:new Hre,w:new Gre,I:new Yre,d:new Xre,D:new Jre,E:new Qre,e:new eie,c:new tie,i:new rie,a:new iie,b:new sie,B:new oie,h:new aie,H:new lie,K:new uie,k:new cie,m:new hie,s:new die,S:new fie,X:new pie,x:new gie,t:new mie,T:new vie},bie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_ie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,wie=/^'([^]*?)'?$/,xie=/''/g,Lie=/\S/,Sie=/[a-zA-Z]/;function Cie(t,e,n,r){var M,A,O,z,K,ne,me,pe;const i=()=>To((r==null?void 0:r.in)||n,NaN),s=kre(),o=(r==null?void 0:r.locale)??s.locale??CM,a=(r==null?void 0:r.firstWeekContainsDate)??((A=(M=r==null?void 0:r.locale)==null?void 0:M.options)==null?void 0:A.firstWeekContainsDate)??s.firstWeekContainsDate??((z=(O=s.locale)==null?void 0:O.options)==null?void 0:z.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((ne=(K=r==null?void 0:r.locale)==null?void 0:K.options)==null?void 0:ne.weekStartsOn)??s.weekStartsOn??((pe=(me=s.locale)==null?void 0:me.options)==null?void 0:pe.weekStartsOn)??0;if(!e)return t?i():Zr(n,r==null?void 0:r.in);const c={firstWeekContainsDate:a,weekStartsOn:l,locale:o},d=[new Ire(r==null?void 0:r.in,n)],p=e.match(_ie).map(N=>{const j=N[0];if(j in i_){const q=i_[j];return q(N,o.formatLong)}return N}).join("").match(bie),v=[];for(let N of p){!(r!=null&&r.useAdditionalWeekYearTokens)&&AM(N)&&s_(N,e,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&kM(N)&&s_(N,e,t);const j=N[0],q=yie[j];if(q){const{incompatibleTokens:I}=q;if(Array.isArray(I)){const $=v.find(R=>I.includes(R.token)||R.token===j);if($)throw new RangeError(`The format string mustn't contain \`${$.fullToken}\` and \`${N}\` at the same time`)}else if(q.incompatibleTokens==="*"&&v.length>0)throw new RangeError(`The format string mustn't contain \`${N}\` and any other token at the same time`);v.push({token:j,fullToken:N});const B=q.run(t,N,o.match,c);if(!B)return i();d.push(B.setter),t=B.rest}else{if(j.match(Sie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");if(N==="''"?N="'":j==="'"&&(N=Eie(N)),t.indexOf(N)===0)t=t.slice(N.length);else return i()}}if(t.length>0&&Lie.test(t))return i();const m=d.map(N=>N.priority).sort((N,j)=>j-N).filter((N,j,q)=>q.indexOf(N)===j).map(N=>d.filter(j=>j.priority===N).sort((j,q)=>q.subPriority-j.subPriority)).map(N=>N[0]);let x=Zr(n,r==null?void 0:r.in);if(isNaN(+x))return i();const E={};for(const N of m){if(!N.validate(x,c))return i();const j=N.set(x,E,c);Array.isArray(j)?(x=j[0],Object.assign(E,j[1])):x=j}return x}function Eie(t){return t.match(wie)[1].replace(xie,"'")}function Pie(t,e){const n=Zr(t,e==null?void 0:e.in);return n.setMinutes(0,0,0),n}function Mie(t,e){const n=Zr(t,e==null?void 0:e.in);return n.setSeconds(0,0),n}function kie(t,e){const n=Zr(t,e==null?void 0:e.in);return n.setMilliseconds(0),n}function Aie(t,e){const n=()=>To(e==null?void 0:e.in,NaN),r=(e==null?void 0:e.additionalDigits)??2,i=Nie(t);let s;if(i.date){const c=Iie(i.date,r);s=Bie(c.restDateString,c.year)}if(!s||isNaN(+s))return n();const o=+s;let a=0,l;if(i.time&&(a=Rie(i.time),isNaN(a)))return n();if(i.timezone){if(l=Fie(i.timezone),isNaN(l))return n()}else{const c=new Date(o+a),d=Zr(0,e==null?void 0:e.in);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return Zr(o+a+l,e==null?void 0:e.in)}const q0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Tie=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Die=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Oie=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Nie(t){const e={},n=t.split(q0.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],q0.timeZoneDelimiter.test(e.date)&&(e.date=t.split(q0.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=q0.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function Iie(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function Bie(t,e){if(e===null)return new Date(NaN);const n=t.match(Tie);if(!n)return new Date(NaN);const r=!!n[4],i=vg(n[1]),s=vg(n[2])-1,o=vg(n[3]),a=vg(n[4]),l=vg(n[5])-1;if(r)return Uie(e,a,l)?jie(e,a,l):new Date(NaN);{const c=new Date(0);return!$ie(e,s,o)||!Vie(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function vg(t){return t?parseInt(t):1}function Rie(t){const e=t.match(Die);if(!e)return NaN;const n=O2(e[1]),r=O2(e[2]),i=O2(e[3]);return Hie(n,r,i)?n*zm+r*jm+i*1e3:NaN}function O2(t){return t&&parseFloat(t.replace(",","."))||0}function Fie(t){if(t==="Z")return 0;const e=t.match(Oie);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return Wie(r,i)?n*(r*zm+i*jm):NaN}function jie(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const zie=[31,null,31,30,31,30,31,31,30,31,30,31];function IM(t){return t%400===0||t%4===0&&t%100!==0}function $ie(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(zie[e]||(IM(t)?29:28))}function Vie(t,e){return e>=1&&e<=(IM(t)?366:365)}function Uie(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function Hie(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function Wie(t,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const Gie={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};KP._date.override({_id:"date-fns",formats:function(){return Gie},parse:function(t,e){if(t===null||typeof t>"u")return null;const n=typeof t;return n==="number"||t instanceof Date?t=Zr(t):n==="string"&&(typeof e=="string"?t=Cie(t,e,new Date,this.options):t=Aie(t,this.options)),bM(t)?t.getTime():null},format:function(t,e){return Pre(t,e,this.options)},add:function(t,e,n){switch(n){case"millisecond":return fw(t,e);case"second":return mne(t,e);case"minute":return pne(t,e);case"hour":return hne(t,e);case"day":return Qy(t,e);case"week":return vne(t,e);case"month":return dw(t,e);case"quarter":return gne(t,e);case"year":return yne(t,e);default:return t}},diff:function(t,e,n){switch(n){case"millisecond":return pw(t,e);case"second":return Ene(t,e);case"minute":return Lne(t,e);case"hour":return xne(t,e);case"day":return _M(t,e);case"week":return Pne(t,e);case"month":return LM(t,e);case"quarter":return Cne(t,e);case"year":return Mne(t,e);default:return 0}},startOf:function(t,e,n){switch(e){case"second":return kie(t);case"minute":return Mie(t);case"hour":return Pie(t);case"day":return r_(t);case"week":return nh(t);case"isoWeek":return nh(t,{weekStartsOn:+n});case"month":return Ane(t);case"quarter":return kne(t);case"year":return SM(t);default:return t}},endOf:function(t,e){switch(e){case"second":return Bne(t);case"minute":return Nne(t);case"hour":return Dne(t);case"day":return wM(t);case"week":return One(t);case"month":return xM(t);case"quarter":return Ine(t);case"year":return Tne(t);default:return t}}});const qie={class:"container mx-auto px-4 py-8"},Yie={class:"mb-8"},Kie={key:0,class:"mb-6"},Zie={class:"flex gap-4"},Xie=["disabled"],Jie={key:0,value:""},Qie=["value"],ese={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},tse={class:"flex"},nse={class:"ml-3"},rse={class:"text-sm font-medium text-red-800"},ise={class:"mb-6"},sse={class:"flex gap-4"},ose=["disabled"],ase={key:0,value:""},lse={key:1,value:""},use=["value"],cse=["disabled"],hse={key:0,class:"mt-4 bg-white rounded-lg shadow-md p-4"},dse={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},fse={class:"font-medium"},pse={class:"font-medium"},gse={class:"font-medium"},mse={class:"font-medium"},vse={class:"font-medium"},yse={class:"font-medium"},bse={class:"md:col-span-2 lg:col-span-3 flex items-center"},_se=["href"],wse={class:"mb-6"},xse={class:"border-b border-gray-200"},Lse={class:"-mb-px flex space-x-8","aria-label":"Tabs"},Sse=["onClick"],Cse={key:2,class:"mb-8"},Ese={class:"text-sm text-gray-600 mb-4"},Pse={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Mse={class:"bg-white rounded-lg shadow-md p-6"},kse={class:"text-4xl font-bold text-primary-600 mb-2"},Ase={class:"text-sm text-gray-600"},Tse={class:"bg-white rounded-lg shadow-md p-6"},Dse={class:"text-4xl font-bold text-primary-600 mb-2"},Ose={class:"mt-4"},Nse={class:"w-full bg-gray-200 rounded-full h-2.5"},Ise={class:"bg-white rounded-lg shadow-md p-6"},Bse={class:"text-4xl font-bold text-primary-600 mb-2"},Rse={class:"text-sm text-gray-600"},Fse={class:"bg-white rounded-lg shadow-md p-6"},jse={class:"text-4xl font-bold text-primary-600 mb-2"},zse={class:"text-sm text-gray-600"},$se={class:"bg-white rounded-lg shadow-md p-6"},Vse={class:"text-4xl font-bold text-primary-600 mb-2"},Use={class:"text-sm text-gray-600"},Hse={class:"bg-white rounded-lg shadow-md p-6"},Wse={class:"text-4xl font-bold text-primary-600 mb-2"},Gse={class:"text-sm text-gray-600"},qse={key:3,class:"mb-8"},Yse={class:"flex justify-between items-center mb-4"},Kse={class:"flex items-center gap-4"},Zse={key:0,class:"text-sm text-gray-600"},Xse=["disabled"],Jse={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},Qse={key:0,class:"md:col-span-2 grid grid-cols-2 gap-4"},eoe=["value"],toe={key:0,class:"mt-1 text-sm text-red-600"},noe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},roe={class:"bg-white rounded-lg shadow-md p-6"},ioe={class:"chart-container"},soe={class:"bg-white rounded-lg shadow-md p-6"},ooe={class:"chart-container"},aoe={class:"bg-white rounded-lg shadow-md p-6"},loe={class:"chart-container"},uoe={class:"bg-white rounded-lg shadow-md p-6"},coe={class:"chart-container"},hoe={class:"bg-white rounded-lg shadow-md p-6"},doe={class:"chart-container"},foe={class:"bg-white rounded-lg shadow-md p-6"},poe={class:"chart-container"},goe=Fs({__name:"MeteoView",setup(t){const e=tu(),n=da(),r=xt({}),i=xt(new Date),s=xt(""),o=xt([]),a=xt(""),l=xt([]),c=xt(null),d=xt(""),p=xt(""),v=Kn(()=>n.isAdmin);let m=null;const x=Kn(()=>!a.value||!o.value.length?null:o.value.find(Q=>Q.mac===a.value));function E(Q){return Q?Q.latitude&&Q.longitude&&Q.latitude!==0&&Q.longitude!==0:!1}function M(Q){return E(Q)?`${Q.latitude.toFixed(6)}, ${Q.longitude.toFixed(6)}`:""}function A(Q){if(!E(Q))return"#";const ie=Q.latitude,fe=Q.longitude,Ce=encodeURIComponent(Q.name||"Station mto");return`https://www.google.com/maps/search/?api=1&query=${ie},${fe}&query_place_id=${Ce}`}async function O(){try{d.value="";const Q={};v.value&&c.value&&(Q.entreprise=c.value),console.log("[fetchDevices] Appel API avec params:",Q);const ie=await W1.getDevices(Q);console.log("[fetchDevices] Rponse API:",ie.data);let fe;if(ie.data&&ie.data.devices)fe=ie.data.devices;else if(Array.isArray(ie.data))fe=ie.data;else if(fe=[],typeof ie.data=="object"&&ie.data!==null){for(const Ce in ie.data)if(Array.isArray(ie.data[Ce])){fe=ie.data[Ce];break}}o.value=fe.map(Ce=>{var de,Xe;return{id:Ce.id,name:Ce.name||`Station ${Ce.mac}`,mac:Ce.mac,model:((de=Ce.stationtype)==null?void 0:de.split("_")[0])||"Inconnu",firmware_version:(Xe=Ce.stationtype)!=null&&Xe.includes("_V")?Ce.stationtype.split("_V")[1]:"1.0",timezone:Ce.date_zone_id||"UTC",created_at:Ce.createtime?new Date(Ce.createtime*1e3).toISOString():new Date().toISOString(),latitude:Ce.latitude||0,longitude:Ce.longitude||0}}),console.log("[fetchDevices] Appareils normaliss:",o.value),o.value.length>0?(a.value=o.value[0].mac,await z()):console.warn("[fetchDevices] Aucun appareil disponible")}catch(Q){console.error("[fetchDevices] Erreur lors de la rcupration des appareils:",Q),Q.response&&Q.response.data&&Q.response.data.error?d.value=Q.response.data.error:(d.value="Erreur lors de la rcupration des stations mto",e.error("Erreur lors de la rcupration des stations mto")),o.value=[],a.value="",r.value={}}}async function z(){if(a.value)try{d.value="";const Q={mac:a.value};v.value&&c.value&&(Q.entreprise=c.value),console.log("[fetchWeatherData] Appel API avec params:",Q);const ie=await W1.getRealTimeData(Q);console.log("[fetchWeatherData] Rponse API:",ie.data),console.log("[fetchWeatherData] Structure de la rponse:",{hasData:ie.data&&"data"in ie.data,hasCode:ie.data&&"code"in ie.data,topLevelKeys:ie.data?Object.keys(ie.data):[]});let fe;ie.data&&"data"in ie.data?fe=ie.data.data:ie.data&&("outdoor"in ie.data||"indoor"in ie.data)?fe=ie.data:(fe={},console.warn("[fetchWeatherData] Format de rponse non reconnu")),r.value=fe,i.value=new Date,console.log("[fetchWeatherData] Donnes mto extraites:",r.value)}catch(Q){console.error("[fetchWeatherData] Erreur:",Q),Q.response&&Q.response.data&&Q.response.data.error?d.value=Q.response.data.error:(d.value="Erreur lors de la rcupration des donnes mto",e.error("Erreur lors de la rcupration des donnes mto")),r.value={}}}function K(Q){if(Q==null)return"0";const ie=typeof Q=="string"?parseFloat(Q):Q;return isNaN(ie)?"0":((ie-32)*5/9).toFixed(1)}function ne(Q){if(Q==null)return"0";const ie=typeof Q=="string"?parseFloat(Q):Q;return isNaN(ie)?"0":(ie*1.60934).toFixed(1)}function me(Q){if(Q==null)return"0";const ie=typeof Q=="string"?parseFloat(Q):Q;return isNaN(ie)?"0":(ie*25.4).toFixed(1)}function pe(Q){if(Q==null)return"0";const ie=typeof Q=="string"?parseFloat(Q):Q;return isNaN(ie)?"0":(ie*33.8639).toFixed(1)}function N(Q){if(!Q)return"N/A";const ie=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSO","SO","OSO","O","ONO","NO","NNO"],fe=Math.round(Q/22.5)%16;return ie[fe]}function j(Q){return Q?Q>0?"En hausse":"En baisse":"Stable"}async function q(){if(v.value)try{const Q=await Pl.getUsers({role:"ENTREPRISE"});l.value=Q.data,l.value.length>0&&!c.value&&(c.value=l.value[0].id)}catch(Q){console.error("Erreur lors de la rcupration des entreprises:",Q),e.error("Erreur lors de la rcupration des entreprises")}}async function I(){try{o.value=[],a.value="",r.value={},d.value="",Object.values(ve).forEach(Q=>{try{Q.destroy()}catch(ie){console.error("Erreur lors de la destruction d'un graphique:",ie)}}),ve={},await O()}catch(Q){console.error("Erreur lors de la rcupration des appareils avec l'entreprise:",Q),e.error("Erreur lors du changement d'entreprise")}}const B=[{id:"realtime",name:"Temps rel"},{id:"history",name:"Historique"}],$=xt("realtime"),R=xt("today"),U=xt("5min"),V=xt(""),re=xt(""),J=()=>{const Q=new Date,ie=new Date(Q);ie.setDate(Q.getDate()-1),V.value=ie.toISOString().split("T")[0],re.value=ie.toISOString().split("T")[0]},_e=[{value:"5min",label:"5 minutes",maxDays:1,maxPastDays:90},{value:"30min",label:"30 minutes",maxDays:7,maxPastDays:365},{value:"4hour",label:"4 heures",maxDays:31,maxPastDays:730},{value:"1day",label:"1 jour",maxDays:365,maxPastDays:1460}],Le=Kn(()=>{const Q=ee(),ie=new Date(Q.start),fe=new Date(Q.end);fe.setHours(23,59,59,999);const Ce=Math.abs(fe.getTime()-ie.getTime()),de=Math.ceil(Ce/(1e3*60*60*24)),Ie=Math.abs(new Date().getTime()-ie.getTime()),Ye=Math.ceil(Ie/(1e3*60*60*24));return _e.filter(Je=>de<=Je.maxDays&&Ye<=Je.maxPastDays)});Di(R,Q=>{Q==="custom"&&J(),!Le.value.some(fe=>fe.value===U.value)&&Le.value.length>0&&(U.value=Le.value[0].value)}),Di([V,re],()=>{R.value==="custom"&&!Le.value.some(ie=>ie.value===U.value)&&Le.value.length>0&&(U.value=Le.value[0].value)});const Oe=xt(null),Z=xt(null),G=xt(null),se=xt(null),ce=xt(null),he=xt(null);let ve={};const ee=()=>{let Q=new Date,ie=new Date;switch(R.value){case"today":Q.setHours(0,0,0,0);break;case"yesterday":Q.setDate(Q.getDate()-1),Q.setHours(0,0,0,0),ie.setDate(ie.getDate()-1),ie.setHours(23,59,59,999);break;case"week":Q.setDate(Q.getDate()-7);break;case"month":Q.setDate(Q.getDate()-30);break;case"custom":Q=new Date(V.value),ie=new Date(re.value);break}return{start:Q.toISOString().split("T")[0],end:ie.toISOString().split("T")[0]}},X=async()=>{try{if(De.value){console.log("[updateAllCharts] Mise  jour dj en cours, annulation");return}if(De.value=!0,Le.value.length===0){e.warning("Aucun intervalle disponible pour cette priode"),De.value=!1;return}Le.value.some(Ce=>Ce.value===U.value)||(U.value=Le.value[0].value),console.log("[updateAllCharts] Dbut de la mise  jour des graphiques");const ie=ee(),fe={mac:a.value,start_date:ie.start,end_date:ie.end,cycle_type:U.value};v.value&&c.value&&(fe.entreprise=c.value),console.log("[updateAllCharts] Rcupration des donnes historiques:",fe);try{const de=(await W1.getHistoryData(fe)).data;console.log("[updateAllCharts] Donnes historiques reues:",de);const Xe=[{type:"temp",ref:Oe},{type:"humidity",ref:Z},{type:"pressure",ref:G},{type:"wind",ref:se},{type:"rain",ref:ce},{type:"solar",ref:he}];for(const Ie of Xe)if(console.log(`[updateAllCharts] Mise  jour du graphique ${Ie.type}`),Ie.ref.value){const Ye=ge(de,Ie.type);Te(Ie.type,Ie.ref.value,Ye)}s.value=new Date().toLocaleString()}catch(Ce){console.error("[updateAllCharts] Erreur lors de la rcupration des donnes:",Ce),e.error("Erreur lors de la rcupration des donnes historiques")}finally{De.value=!1}}catch(Q){console.error("[updateAllCharts] Erreur lors de la mise  jour des graphiques:",Q),e.error("Erreur lors de la mise  jour des graphiques"),De.value=!1}},De=xt(!1),Te=(Q,ie,fe)=>{try{if(ve[Q]&&(ve[Q].destroy(),delete ve[Q]),console.log(`[updateChart] Donnes reues pour ${Q}:`,fe),!fe.datasets||!fe.datasets.length){console.warn(`[updateChart] Pas de datasets pour ${Q}`),ve[Q]=new Wc(ie,{type:"line",data:{labels:[],datasets:[]},options:{plugins:{title:{display:!0,text:"Aucune donne disponible"}}}});return}let Ce="hour";U.value==="5min"||U.value==="30min"?Ce="hour":(U.value==="4hour"||U.value==="1day")&&(Ce="day");const de=ee(),Xe=new Date(de.start),Ie=new Date(de.end);Ie.setHours(23,59,59,999);const Ye={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{title:function(Je){return Je.length>0?new Date(Je[0].parsed.x).toLocaleString():""}}}},scales:{x:{type:"time",time:{unit:Ce,displayFormats:{hour:"HH:mm",day:"dd/MM",week:"dd/MM",month:"MM/yyyy"}},min:Xe.getTime(),max:Ie.getTime(),title:{display:!0,text:"Date/Heure"}},y:{beginAtZero:!0,title:{display:!0,text:qe(Q)},ticks:{callback:function(Je){const Ge=typeof Je=="string"?parseFloat(Je):Je;switch(Q){case"temp":return Ge.toFixed(1)+"C";case"humidity":return Ge.toFixed(0)+"%";case"pressure":return Ge.toFixed(0)+" hPa";case"wind":case"rain":return Ge.toFixed(1)+(Q==="wind"?" km/h":" mm");case"solar":return Ge.toFixed(0)+" W/m";default:return Ge}}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};ve[Q]=new Wc(ie,{type:"line",data:{datasets:fe.datasets||[]},options:Ye}),console.log(`[updateChart] Graphique ${Q} cr avec ${fe.datasets.length} datasets`)}catch(Ce){console.error(`[updateChart] Erreur lors de la mise  jour du graphique ${Q}:`,Ce)}},qe=Q=>{switch(Q){case"temp":return"Temprature (C)";case"humidity":return"Humidit (%)";case"pressure":return"Pression (hPa)";case"wind":return"Vitesse (km/h)";case"rain":return"Prcipitations (mm)";case"solar":return"Rayonnement (W/m)";default:return""}},ge=(Q,ie)=>{var Xe,Ie,Ye,Je,Ge,wt,Ct,Wt,sn,bn,Qe,ot,it,Vt,Qt,kn,Ln,Mn,Zn;if(console.log(`[formatHistoryDataForChart] Donnes reues pour ${ie}:`,Q),!Q)return console.warn(`[formatHistoryDataForChart] Pas de donnes pour ${ie}`),null;let fe;if("data"in Q)fe=Q.data;else if(ie in Q)fe=Q;else return console.warn(`[formatHistoryDataForChart] Structure de donnes non reconnue pour ${ie}`),null;console.log(`[formatHistoryDataForChart] Donnes extraites pour ${ie}:`,fe);const Ce=[],de=(en,wn,En,Xn)=>{if(!Array.isArray(en)){console.warn(`[formatHistoryDataForChart] Les donnes pour ${wn} ne sont pas un tableau`);return}const dr=en.map(vr=>{const sr=parseFloat(String(vr.value));return{x:vr.time,y:Xn?Xn(sr):sr}}).filter(vr=>!isNaN(vr.y));dr.length>0&&Ce.push({label:wn,data:dr,borderColor:En,fill:!1,tension:.4})};switch(ie){case"temp":(Ie=(Xe=fe.outdoor)==null?void 0:Xe.temperature)!=null&&Ie.list?de(Object.entries(fe.outdoor.temperature.list).map(([en,wn])=>({time:parseInt(en)*1e3,value:wn})),"Temprature","#FF6384",en=>(en-32)*5/9):(Ye=fe.outdoor)!=null&&Ye.temperature&&de(fe.outdoor.temperature,"Temprature","#FF6384",en=>(en-32)*5/9);break;case"humidity":(Ge=(Je=fe.outdoor)==null?void 0:Je.humidity)!=null&&Ge.list?de(Object.entries(fe.outdoor.humidity.list).map(([en,wn])=>({time:parseInt(en)*1e3,value:wn})),"Humidit","#36A2EB"):(wt=fe.outdoor)!=null&&wt.humidity&&de(fe.outdoor.humidity,"Humidit","#36A2EB");break;case"pressure":(Wt=(Ct=fe.pressure)==null?void 0:Ct.absolute)!=null&&Wt.list?de(Object.entries(fe.pressure.absolute.list).map(([en,wn])=>({time:parseInt(en)*1e3,value:wn})),"Pression","#4BC0C0",en=>en*33.8639):(sn=fe.pressure)!=null&&sn.absolute&&de(fe.pressure.absolute,"Pression","#4BC0C0",en=>en*33.8639);break;case"wind":(Qe=(bn=fe.wind)==null?void 0:bn.wind_speed)!=null&&Qe.list?(de(Object.entries(fe.wind.wind_speed.list).map(([en,wn])=>({time:parseInt(en)*1e3,value:wn})),"Vitesse du vent","#FFCE56",en=>en*1.60934),(ot=fe.wind.wind_gust)!=null&&ot.list&&de(Object.entries(fe.wind.wind_gust.list).map(([en,wn])=>({time:parseInt(en)*1e3,value:wn})),"Rafales","#FF9F40",en=>en*1.60934)):(it=fe.wind)!=null&&it.wind_speed&&(de(fe.wind.wind_speed,"Vitesse du vent","#FFCE56",en=>en*1.60934),fe.wind.wind_gust&&de(fe.wind.wind_gust,"Rafales","#FF9F40",en=>en*1.60934));break;case"rain":(Qt=(Vt=fe.rainfall)==null?void 0:Vt.daily)!=null&&Qt.list?de(Object.entries(fe.rainfall.daily.list).map(([en,wn])=>({time:parseInt(en)*1e3,value:wn})),"Prcipitations journalires","#9966FF",en=>en*25.4):(kn=fe.rainfall)!=null&&kn.daily&&de(fe.rainfall.daily,"Prcipitations journalires","#9966FF",en=>en*25.4);break;case"solar":(Mn=(Ln=fe.solar_and_uvi)==null?void 0:Ln.solar)!=null&&Mn.list?de(Object.entries(fe.solar_and_uvi.solar.list).map(([en,wn])=>({time:parseInt(en)*1e3,value:wn})),"Rayonnement solaire","#FF9F40"):(Zn=fe.solar_and_uvi)!=null&&Zn.solar&&de(fe.solar_and_uvi.solar,"Rayonnement solaire","#FF9F40");break}return console.log(`[formatHistoryDataForChart] Datasets gnrs pour ${ie}:`,Ce),{datasets:Ce}};return Ku(()=>{Object.values(ve).forEach(Q=>Q.destroy())}),Di([R,U,V,re],()=>{$.value==="history"&&a.value&&X()}),fo(async()=>{const Q=[];v.value&&Q.push(q()),await Promise.all(Q),await O(),m=window.setInterval(z,5*60*1e3)}),Di(c,Q=>{v.value&&Q&&I()}),Di(a,Q=>{Q&&$.value==="history"&&X()}),Di($,Q=>{Q==="history"&&a.value&&X()}),Ku(()=>{m&&clearInterval(m)}),(Q,ie)=>{var fe,Ce,de,Xe,Ie,Ye,Je,Ge,wt,Ct,Wt,sn,bn,Qe,ot,it,Vt,Qt,kn,Ln,Mn,Zn,en,wn,En,Xn,dr,vr,sr,ut,rt,jt,Tn,Yn,Jt,Ht,nn,an;return Re(),$e("div",qie,[C("div",Yie,[ie[38]||(ie[38]=C("h1",{class:"text-3xl font-bold mb-4"},"Mto",-1)),v.value?(Re(),$e("div",Kie,[ie[6]||(ie[6]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Slectionner une entreprise ",-1)),C("div",Zie,[Pn(C("select",{"onUpdate:modelValue":ie[0]||(ie[0]=St=>c.value=St),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!l.value.length,onChange:I},[l.value.length?rn("",!0):(Re(),$e("option",Jie,"Chargement des entreprises...")),(Re(!0),$e(Cn,null,pr(l.value,St=>(Re(),$e("option",{key:St.id,value:St.id},Tt(St.company_name||`${St.first_name} ${St.last_name}`),9,Qie))),128))],40,Xie),[[is,c.value]])])])):rn("",!0),d.value?(Re(),$e("div",ese,[C("div",tse,[ie[7]||(ie[7]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",nse,[C("h3",rse,Tt(d.value),1)])])])):rn("",!0),C("div",ise,[ie[17]||(ie[17]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Slectionner une station ",-1)),C("div",sse,[Pn(C("select",{"onUpdate:modelValue":ie[1]||(ie[1]=St=>a.value=St),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!!(!o.value.length||d.value)},[!o.value.length&&!d.value?(Re(),$e("option",ase,"Chargement des stations...")):rn("",!0),d.value?(Re(),$e("option",lse,"Aucune station disponible")):rn("",!0),(Re(!0),$e(Cn,null,pr(o.value,St=>(Re(),$e("option",{key:St.mac,value:St.mac},Tt(St.name)+" ("+Tt(St.model)+" - v"+Tt(St.firmware_version)+") ",9,use))),128))],8,ose),[[is,a.value]]),C("button",{onClick:z,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!!(!a.value||d.value)}," Actualiser ",8,cse)]),x.value?(Re(),$e("div",hse,[ie[16]||(ie[16]=C("h3",{class:"text-lg font-semibold mb-2"},"Informations sur la station",-1)),C("div",dse,[C("div",null,[ie[8]||(ie[8]=C("span",{class:"text-gray-500"},"Modle:",-1)),C("p",fse,Tt(x.value.model),1)]),C("div",null,[ie[9]||(ie[9]=C("span",{class:"text-gray-500"},"Version:",-1)),C("p",pse,Tt(x.value.firmware_version),1)]),C("div",null,[ie[10]||(ie[10]=C("span",{class:"text-gray-500"},"ID:",-1)),C("p",gse,Tt(x.value.id),1)]),C("div",null,[ie[11]||(ie[11]=C("span",{class:"text-gray-500"},"MAC:",-1)),C("p",mse,Tt(x.value.mac),1)]),C("div",null,[ie[12]||(ie[12]=C("span",{class:"text-gray-500"},"Fuseau horaire:",-1)),C("p",vse,Tt(x.value.timezone),1)]),C("div",null,[ie[13]||(ie[13]=C("span",{class:"text-gray-500"},"Installation:",-1)),C("p",yse,Tt(new Date(x.value.created_at).toLocaleDateString()),1)]),C("div",bse,[ie[15]||(ie[15]=C("span",{class:"text-gray-500 mr-2"},"Position:",-1)),E(x.value)?(Re(),$e("a",{key:0,href:A(x.value),target:"_blank",class:"text-primary-600 hover:text-primary-800 flex items-center",title:"Ouvrir dans Google Maps"},[ie[14]||(ie[14]=C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),si(" "+Tt(M(x.value)),1)],8,_se)):rn("",!0)])])])):rn("",!0)]),C("div",wse,[C("div",xse,[C("nav",Lse,[(Re(),$e(Cn,null,pr(B,St=>C("button",{key:St.id,onClick:Ut=>$.value=St.id,class:$i([$.value===St.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},Tt(St.name),11,Sse)),64))])])]),$.value==="realtime"?(Re(),$e("div",Cse,[C("p",Ese," Dernire mise  jour : "+Tt(i.value?new Date(i.value).toLocaleString():"Jamais"),1),C("div",Pse,[C("div",Mse,[ie[18]||(ie[18]=C("h2",{class:"text-xl font-semibold mb-4"},"Temprature Extrieure",-1)),C("div",kse,Tt(K((Ce=(fe=r.value.outdoor)==null?void 0:fe.temperature)==null?void 0:Ce.value))+"C ",1),C("div",Ase," Min: "+Tt(K(((Xe=(de=r.value.outdoor)==null?void 0:de.temperature)==null?void 0:Xe.min)||"0"))+"C Max: "+Tt(K(((Ye=(Ie=r.value.outdoor)==null?void 0:Ie.temperature)==null?void 0:Ye.max)||"0"))+"C ",1)]),C("div",Tse,[ie[19]||(ie[19]=C("h2",{class:"text-xl font-semibold mb-4"},"Humidit",-1)),C("div",Dse,Tt(((Ge=(Je=r.value.outdoor)==null?void 0:Je.humidity)==null?void 0:Ge.value)||"0")+"% ",1),C("div",Ose,[C("div",Nse,[C("div",{class:"bg-primary-600 h-2.5 rounded-full",style:Ql({width:`${((Ct=(wt=r.value.outdoor)==null?void 0:wt.humidity)==null?void 0:Ct.value)||0}%`})},null,4)])])]),C("div",Ise,[ie[20]||(ie[20]=C("h2",{class:"text-xl font-semibold mb-4"},"Pression Atmosphrique",-1)),C("div",Bse,Tt(pe((sn=(Wt=r.value.pressure)==null?void 0:Wt.absolute)==null?void 0:sn.value))+" hPa ",1),C("div",Rse," Tendance: "+Tt(j((Qe=(bn=r.value.pressure)==null?void 0:bn.absolute)==null?void 0:Qe.trend)),1)]),C("div",Fse,[ie[22]||(ie[22]=C("h2",{class:"text-xl font-semibold mb-4"},"Vent",-1)),C("div",jse,Tt(ne(((it=(ot=r.value.wind)==null?void 0:ot.speed)==null?void 0:it.value)||((Qt=(Vt=r.value.wind)==null?void 0:Vt.wind_speed)==null?void 0:Qt.value)))+" km/h ",1),C("div",zse,[si(" Direction: "+Tt(N(((Ln=(kn=r.value.wind)==null?void 0:kn.direction)==null?void 0:Ln.value)||((Zn=(Mn=r.value.wind)==null?void 0:Mn.wind_direction)==null?void 0:Zn.value)))+" ",1),ie[21]||(ie[21]=C("br",null,null,-1)),si(" Rafales: "+Tt(ne(((wn=(en=r.value.wind)==null?void 0:en.gust)==null?void 0:wn.value)||((Xn=(En=r.value.wind)==null?void 0:En.wind_gust)==null?void 0:Xn.value)))+" km/h ",1)])]),C("div",$se,[ie[24]||(ie[24]=C("h2",{class:"text-xl font-semibold mb-4"},"Prcipitations",-1)),C("div",Vse,Tt(me((vr=(dr=r.value.rainfall)==null?void 0:dr.daily)==null?void 0:vr.value))+" mm ",1),C("div",Use,[si(" Taux: "+Tt(me(((ut=(sr=r.value.rainfall)==null?void 0:sr.rate)==null?void 0:ut.value)||((jt=(rt=r.value.rainfall)==null?void 0:rt.rain_rate)==null?void 0:jt.value)))+" mm/h ",1),ie[23]||(ie[23]=C("br",null,null,-1)),si(" Mensuel: "+Tt(me((Yn=(Tn=r.value.rainfall)==null?void 0:Tn.monthly)==null?void 0:Yn.value))+" mm ",1)])]),C("div",Hse,[ie[25]||(ie[25]=C("h2",{class:"text-xl font-semibold mb-4"},"Rayonnement",-1)),C("div",Wse,Tt(((Ht=(Jt=r.value.solar_and_uvi)==null?void 0:Jt.solar)==null?void 0:Ht.value)||"0")+" W/m ",1),C("div",Gse," UV: "+Tt(((an=(nn=r.value.solar_and_uvi)==null?void 0:nn.uvi)==null?void 0:an.value)||"0"),1)])])])):$.value==="history"?(Re(),$e("div",qse,[C("div",Yse,[ie[26]||(ie[26]=C("h2",{class:"text-xl font-semibold"},"Donnes historiques",-1)),C("div",Kse,[s.value?(Re(),$e("div",Zse," Dernire mise  jour: "+Tt(s.value),1)):rn("",!0),C("button",{onClick:X,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!a.value}," Actualiser ",8,Xse)])]),C("div",Jse,[C("div",null,[ie[28]||(ie[28]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Priode ",-1)),Pn(C("select",{"onUpdate:modelValue":ie[2]||(ie[2]=St=>R.value=St),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},ie[27]||(ie[27]=[Jl('<option value="today" data-v-9a089f70>Aujourd&#39;hui</option><option value="yesterday" data-v-9a089f70>Hier</option><option value="week" data-v-9a089f70>7 derniers jours</option><option value="month" data-v-9a089f70>30 derniers jours</option><option value="custom" data-v-9a089f70>Priode personnalise</option>',5)]),512),[[is,R.value]])]),R.value==="custom"?(Re(),$e("div",Qse,[C("div",null,[ie[29]||(ie[29]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de dbut ",-1)),Pn(C("input",{type:"date","onUpdate:modelValue":ie[3]||(ie[3]=St=>V.value=St),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[Rr,V.value]])]),C("div",null,[ie[30]||(ie[30]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de fin ",-1)),Pn(C("input",{type:"date","onUpdate:modelValue":ie[4]||(ie[4]=St=>re.value=St),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[Rr,re.value]])])])):rn("",!0),C("div",null,[ie[31]||(ie[31]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Intervalle ",-1)),Pn(C("select",{"onUpdate:modelValue":ie[5]||(ie[5]=St=>U.value=St),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},[(Re(!0),$e(Cn,null,pr(Le.value,St=>(Re(),$e("option",{key:St.value,value:St.value},Tt(St.label),9,eoe))),128))],512),[[is,U.value]]),p.value?(Re(),$e("div",toe,Tt(p.value),1)):rn("",!0)])]),C("div",noe,[C("div",roe,[ie[32]||(ie[32]=C("h3",{class:"text-lg font-semibold mb-4"},"Temprature",-1)),C("div",ioe,[C("canvas",{ref_key:"tempChart",ref:Oe},null,512)])]),C("div",soe,[ie[33]||(ie[33]=C("h3",{class:"text-lg font-semibold mb-4"},"Humidit",-1)),C("div",ooe,[C("canvas",{ref_key:"humidityChart",ref:Z},null,512)])]),C("div",aoe,[ie[34]||(ie[34]=C("h3",{class:"text-lg font-semibold mb-4"},"Pression",-1)),C("div",loe,[C("canvas",{ref_key:"pressureChart",ref:G},null,512)])]),C("div",uoe,[ie[35]||(ie[35]=C("h3",{class:"text-lg font-semibold mb-4"},"Vent",-1)),C("div",coe,[C("canvas",{ref_key:"windChart",ref:se},null,512)])]),C("div",hoe,[ie[36]||(ie[36]=C("h3",{class:"text-lg font-semibold mb-4"},"Prcipitations",-1)),C("div",doe,[C("canvas",{ref_key:"rainChart",ref:ce},null,512)])]),C("div",foe,[ie[37]||(ie[37]=C("h3",{class:"text-lg font-semibold mb-4"},"Rayonnement",-1)),C("div",poe,[C("canvas",{ref_key:"solarChart",ref:he},null,512)])])])])):rn("",!0)])])}}}),moe=jh(goe,[["__scopeId","data-v-9a089f70"]]),BM=ZB({history:PB("/"),routes:[{path:"/",name:"home",component:F5,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/meteo",name:"meteo",component:moe,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/plans",name:"plans",component:DK,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/users",name:"users",component:rY,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie"]}},{path:"/profile",name:"profile",component:()=>Mh(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/login",name:"login",component:Nj,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Mh(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Mh(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:nj,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/notes",name:"notes",component:iX,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/map",name:"map",component:F5,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Mh(()=>import("./NotFoundView.js"),[])}]});BM.beforeEach(async(t,e,n)=>{var a,l;const r=da();if(console.log("Route:",t.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(c){console.error("Error initializing auth store:",c)}const i=r.isAuthenticated,s=(a=r.user)==null?void 0:a.must_change_password,o=(l=r.user)==null?void 0:l.user_type;if(t.meta.requiresAuth&&!i){n("/login");return}if(i&&s&&t.name!=="changePassword"){n({name:"changePassword"});return}if(t.name==="changePassword"&&!s){n({name:"home"});return}if(t.meta.allowedRoles&&o&&!t.meta.allowedRoles.includes(o)){n({name:"home"});return}if(t.meta.requiresGuest&&i){n({name:"home"});return}n()});function voe(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(p=!0)=>{await l};async function d(){if("serviceWorker"in navigator){if(a=await Mh(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/static/frontend/sw.js",{scope:"/static/frontend/",type:"classic"})).catch(p=>{o==null||o(p)}),!a)return;a.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),a.addEventListener("installed",p=>{p.isUpdate||r==null||r()}),a.register({immediate:e}).then(p=>{s?s("/static/frontend/sw.js",p):i==null||i(p)}).catch(p=>{o==null||o(p)})}}return l=d(),c}const yw=Fv(N9),RM=iI();yw.use(RM);yw.use(BM);const yoe=da(RM);window.INITIAL_STATE&&yoe.initialize(window.INITIAL_STATE);yw.mount("#app");voe({immediate:!0,onRegistered(t){t&&console.log("SW enregistr:",t)},onRegisterError(t){console.error("Erreur d'enregistrement du SW:",t)},onOfflineReady(){console.log("L'application est prte  tre utilise hors ligne")}});export{hs as _,nu as a,C as b,$e as c,Fs as d,rn as e,er as f,si as g,Pn as h,Re as i,Jl as j,pi as k,Wu as l,_S as m,$i as n,fo as o,JB as p,Nm as q,xt as r,Sa as s,Tt as t,da as u,Rr as v,Bh as w,j_ as x};

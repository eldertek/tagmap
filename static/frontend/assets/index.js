var PD=Object.defineProperty;var MD=(t,e,n)=>e in t?PD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ke=(t,e,n)=>MD(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function fy(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const ji={},fp=[],Zu=()=>{},kD=()=>!1,Pm=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),o_=t=>t.startsWith("onUpdate:"),xs=Object.assign,a_=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},AD=Object.prototype.hasOwnProperty,es=(t,e)=>AD.call(t,e),ur=Array.isArray,pp=t=>Rp(t)==="[object Map]",Sf=t=>Rp(t)==="[object Set]",Mx=t=>Rp(t)==="[object Date]",TD=t=>Rp(t)==="[object RegExp]",Nr=t=>typeof t=="function",Ts=t=>typeof t=="string",Sc=t=>typeof t=="symbol",fs=t=>t!==null&&typeof t=="object",l_=t=>(fs(t)||Nr(t))&&Nr(t.then)&&Nr(t.catch),ML=Object.prototype.toString,Rp=t=>ML.call(t),DD=t=>Rp(t).slice(8,-1),py=t=>Rp(t)==="[object Object]",u_=t=>Ts(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,gp=fy(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),gy=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},OD=/-(\w)/g,qa=gy(t=>t.replace(OD,(e,n)=>n?n.toUpperCase():"")),ND=/\B([A-Z])/g,eu=gy(t=>t.replace(ND,"-$1").toLowerCase()),Mm=gy(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ng=gy(t=>t?`on${Mm(t)}`:""),Nl=(t,e)=>!Object.is(t,e),mp=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},kL=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Cv=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Ev=t=>{const e=Ts(t)?Number(t):NaN;return isNaN(e)?t:e};let kx;const my=()=>kx||(kx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),ID="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",BD=fy(ID);function ru(t){if(ur(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Ts(r)?zD(r):ru(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Ts(t)||fs(t))return t}const RD=/;(?![^(]*\))/g,FD=/:([^]+)/,jD=/\/\*[^]*?\*\//g;function zD(t){const e={};return t.replace(jD,"").split(RD).forEach(n=>{if(n){const r=n.split(FD);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Di(t){let e="";if(Ts(t))e=t;else if(ur(t))for(let n=0;n<t.length;n++){const r=Di(t[n]);r&&(e+=r+" ")}else if(fs(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function $D(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Ts(e)&&(t.class=Di(e)),n&&(t.style=ru(n)),t}const VD="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",UD=fy(VD);function AL(t){return!!t||t===""}function HD(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=wd(t[r],e[r]);return n}function wd(t,e){if(t===e)return!0;let n=Mx(t),r=Mx(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Sc(t),r=Sc(e),n||r)return t===e;if(n=ur(t),r=ur(e),n||r)return n&&r?HD(t,e):!1;if(n=fs(t),r=fs(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!wd(t[o],e[o]))return!1}}return String(t)===String(e)}function vy(t,e){return t.findIndex(n=>wd(n,e))}const TL=t=>!!(t&&t.__v_isRef===!0),kt=t=>Ts(t)?t:t==null?"":ur(t)||fs(t)&&(t.toString===ML||!Nr(t.toString))?TL(t)?kt(t.value):JSON.stringify(t,DL,2):String(t),DL=(t,e)=>TL(e)?DL(t,e.value):pp(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[k1(r,s)+" =>"]=i,n),{})}:Sf(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>k1(n))}:Sc(e)?k1(e):fs(e)&&!ur(e)&&!py(e)?String(e):e,k1=(t,e="")=>{var n;return Sc(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ol;class c_{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ol,!e&&Ol&&(this.index=(Ol.scopes||(Ol.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ol;try{return Ol=this,e()}finally{Ol=n}}}on(){Ol=this}off(){Ol=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function h_(t){return new c_(t)}function d_(){return Ol}function OL(t,e=!1){Ol&&Ol.cleanups.push(t)}let ks;const A1=new WeakSet;class im{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ol&&Ol.active&&Ol.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,A1.has(this)&&(A1.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||IL(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ax(this),BL(this);const e=ks,n=xc;ks=this,xc=!0;try{return this.fn()}finally{RL(this),ks=e,xc=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)g_(e);this.deps=this.depsTail=void 0,Ax(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?A1.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){I2(this)&&this.run()}get dirty(){return I2(this)}}let NL=0,Ig,Bg;function IL(t,e=!1){if(t.flags|=8,e){t.next=Bg,Bg=t;return}t.next=Ig,Ig=t}function f_(){NL++}function p_(){if(--NL>0)return;if(Bg){let e=Bg;for(Bg=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Ig;){let e=Ig;for(Ig=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function BL(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function RL(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),g_(r),WD(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function I2(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(FL(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function FL(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===sm))return;t.globalVersion=sm;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!I2(t)){t.flags&=-3;return}const n=ks,r=xc;ks=t,xc=!0;try{BL(t);const i=t.fn(t._value);(e.version===0||Nl(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{ks=n,xc=r,RL(t),t.flags&=-3}}function g_(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)g_(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function WD(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}function GD(t,e){t.effect instanceof im&&(t=t.effect.fn);const n=new im(t);e&&xs(n,e);try{n.run()}catch(i){throw n.stop(),i}const r=n.run.bind(n);return r.effect=n,r}function qD(t){t.effect.stop()}let xc=!0;const jL=[];function kd(){jL.push(xc),xc=!1}function Ad(){const t=jL.pop();xc=t===void 0?!0:t}function Ax(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=ks;ks=void 0;try{e()}finally{ks=n}}}let sm=0;class YD{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class yy{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!ks||!xc||ks===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ks)n=this.activeLink=new YD(ks,this),ks.deps?(n.prevDep=ks.depsTail,ks.depsTail.nextDep=n,ks.depsTail=n):ks.deps=ks.depsTail=n,zL(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=ks.depsTail,n.nextDep=void 0,ks.depsTail.nextDep=n,ks.depsTail=n,ks.deps===n&&(ks.deps=r)}return n}trigger(e){this.version++,sm++,this.notify(e)}notify(e){f_();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{p_()}}}function zL(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)zL(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Pv=new WeakMap,cf=Symbol(""),B2=Symbol(""),om=Symbol("");function hl(t,e,n){if(xc&&ks){let r=Pv.get(t);r||Pv.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new yy),i.map=r,i.key=n),i.track()}}function Ph(t,e,n,r,i,s){const o=Pv.get(t);if(!o){sm++;return}const a=l=>{l&&l.trigger()};if(f_(),e==="clear")o.forEach(a);else{const l=ur(t),c=l&&u_(n);if(l&&n==="length"){const d=Number(r);o.forEach((p,v)=>{(v==="length"||v===om||!Sc(v)&&v>=d)&&a(p)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(om)),e){case"add":l?c&&a(o.get("length")):(a(o.get(cf)),pp(t)&&a(o.get(B2)));break;case"delete":l||(a(o.get(cf)),pp(t)&&a(o.get(B2)));break;case"set":pp(t)&&a(o.get(cf));break}}p_()}function ZD(t,e){const n=Pv.get(t);return n&&n.get(e)}function Gf(t){const e=Fi(t);return e===t?e:(hl(e,"iterate",om),Pu(t)?e:e.map(dl))}function by(t){return hl(t=Fi(t),"iterate",om),t}const KD={__proto__:null,[Symbol.iterator](){return T1(this,Symbol.iterator,dl)},concat(...t){return Gf(this).concat(...t.map(e=>ur(e)?Gf(e):e))},entries(){return T1(this,"entries",t=>(t[1]=dl(t[1]),t))},every(t,e){return yh(this,"every",t,e,void 0,arguments)},filter(t,e){return yh(this,"filter",t,e,n=>n.map(dl),arguments)},find(t,e){return yh(this,"find",t,e,dl,arguments)},findIndex(t,e){return yh(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return yh(this,"findLast",t,e,dl,arguments)},findLastIndex(t,e){return yh(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return yh(this,"forEach",t,e,void 0,arguments)},includes(...t){return D1(this,"includes",t)},indexOf(...t){return D1(this,"indexOf",t)},join(t){return Gf(this).join(t)},lastIndexOf(...t){return D1(this,"lastIndexOf",t)},map(t,e){return yh(this,"map",t,e,void 0,arguments)},pop(){return Xp(this,"pop")},push(...t){return Xp(this,"push",t)},reduce(t,...e){return Tx(this,"reduce",t,e)},reduceRight(t,...e){return Tx(this,"reduceRight",t,e)},shift(){return Xp(this,"shift")},some(t,e){return yh(this,"some",t,e,void 0,arguments)},splice(...t){return Xp(this,"splice",t)},toReversed(){return Gf(this).toReversed()},toSorted(t){return Gf(this).toSorted(t)},toSpliced(...t){return Gf(this).toSpliced(...t)},unshift(...t){return Xp(this,"unshift",t)},values(){return T1(this,"values",dl)}};function T1(t,e,n){const r=by(t),i=r[e]();return r!==t&&!Pu(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const XD=Array.prototype;function yh(t,e,n,r,i,s){const o=by(t),a=o!==t&&!Pu(t),l=o[e];if(l!==XD[e]){const p=l.apply(t,s);return a?dl(p):p}let c=n;o!==t&&(a?c=function(p,v){return n.call(this,dl(p),v,t)}:n.length>2&&(c=function(p,v){return n.call(this,p,v,t)}));const d=l.call(o,c,r);return a&&i?i(d):d}function Tx(t,e,n,r){const i=by(t);let s=n;return i!==t&&(Pu(t)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,t)}):s=function(o,a,l){return n.call(this,o,dl(a),l,t)}),i[e](s,...r)}function D1(t,e,n){const r=Fi(t);hl(r,"iterate",om);const i=r[e](...n);return(i===-1||i===!1)&&xy(n[0])?(n[0]=Fi(n[0]),r[e](...n)):i}function Xp(t,e,n=[]){kd(),f_();const r=Fi(t)[e].apply(t,n);return p_(),Ad(),r}const JD=fy("__proto__,__v_isRef,__isVue"),$L=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Sc));function QD(t){Sc(t)||(t=String(t));const e=Fi(this);return hl(e,"has",t),e.hasOwnProperty(t)}class VL{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?YL:qL:s?GL:WL).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ur(e);if(!i){let l;if(o&&(l=KD[n]))return l;if(n==="hasOwnProperty")return QD}const a=Reflect.get(e,n,go(e)?e:r);return(Sc(n)?$L.has(n):JD(n))||(i||hl(e,"get",n),s)?a:go(a)?o&&u_(n)?a:a.value:fs(a)?i?mc(a):ou(a):a}}class UL extends VL{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=xd(s);if(!Pu(r)&&!xd(r)&&(s=Fi(s),r=Fi(r)),!ur(e)&&go(s)&&!go(r))return l?!1:(s.value=r,!0)}const o=ur(e)&&u_(n)?Number(n)<e.length:es(e,n),a=Reflect.set(e,n,r,go(e)?e:i);return e===Fi(i)&&(o?Nl(r,s)&&Ph(e,"set",n,r):Ph(e,"add",n,r)),a}deleteProperty(e,n){const r=es(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Ph(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Sc(n)||!$L.has(n))&&hl(e,"has",n),r}ownKeys(e){return hl(e,"iterate",ur(e)?"length":cf),Reflect.ownKeys(e)}}class HL extends VL{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const e8=new UL,t8=new HL,n8=new UL(!0),r8=new HL(!0),R2=t=>t,u0=t=>Reflect.getPrototypeOf(t);function i8(t,e,n){return function(...r){const i=this.__v_raw,s=Fi(i),o=pp(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),d=n?R2:e?F2:dl;return!e&&hl(s,"iterate",l?B2:cf),{next(){const{value:p,done:v}=c.next();return v?{value:p,done:v}:{value:a?[d(p[0]),d(p[1])]:d(p),done:v}},[Symbol.iterator](){return this}}}}function c0(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function s8(t,e){const n={get(i){const s=this.__v_raw,o=Fi(s),a=Fi(i);t||(Nl(i,a)&&hl(o,"get",i),hl(o,"get",a));const{has:l}=u0(o),c=e?R2:t?F2:dl;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&hl(Fi(i),"iterate",cf),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=Fi(s),a=Fi(i);return t||(Nl(i,a)&&hl(o,"has",i),hl(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=Fi(a),c=e?R2:t?F2:dl;return!t&&hl(l,"iterate",cf),a.forEach((d,p)=>i.call(s,c(d),c(p),o))}};return xs(n,t?{add:c0("add"),set:c0("set"),delete:c0("delete"),clear:c0("clear")}:{add(i){!e&&!Pu(i)&&!xd(i)&&(i=Fi(i));const s=Fi(this);return u0(s).has.call(s,i)||(s.add(i),Ph(s,"add",i,i)),this},set(i,s){!e&&!Pu(s)&&!xd(s)&&(s=Fi(s));const o=Fi(this),{has:a,get:l}=u0(o);let c=a.call(o,i);c||(i=Fi(i),c=a.call(o,i));const d=l.call(o,i);return o.set(i,s),c?Nl(s,d)&&Ph(o,"set",i,s):Ph(o,"add",i,s),this},delete(i){const s=Fi(this),{has:o,get:a}=u0(s);let l=o.call(s,i);l||(i=Fi(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&Ph(s,"delete",i,void 0),c},clear(){const i=Fi(this),s=i.size!==0,o=i.clear();return s&&Ph(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=i8(i,t,e)}),n}function _y(t,e){const n=s8(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(es(n,i)&&i in r?n:r,i,s)}const o8={get:_y(!1,!1)},a8={get:_y(!1,!0)},l8={get:_y(!0,!1)},u8={get:_y(!0,!0)},WL=new WeakMap,GL=new WeakMap,qL=new WeakMap,YL=new WeakMap;function c8(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function h8(t){return t.__v_skip||!Object.isExtensible(t)?0:c8(DD(t))}function ou(t){return xd(t)?t:wy(t,!1,e8,o8,WL)}function m_(t){return wy(t,!1,n8,a8,GL)}function mc(t){return wy(t,!0,t8,l8,qL)}function d8(t){return wy(t,!0,r8,u8,YL)}function wy(t,e,n,r,i){if(!fs(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=h8(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Xc(t){return xd(t)?Xc(t.__v_raw):!!(t&&t.__v_isReactive)}function xd(t){return!!(t&&t.__v_isReadonly)}function Pu(t){return!!(t&&t.__v_isShallow)}function xy(t){return t?!!t.__v_raw:!1}function Fi(t){const e=t&&t.__v_raw;return e?Fi(e):t}function Ly(t){return!es(t,"__v_skip")&&Object.isExtensible(t)&&kL(t,"__v_skip",!0),t}const dl=t=>fs(t)?ou(t):t,F2=t=>fs(t)?mc(t):t;function go(t){return t?t.__v_isRef===!0:!1}function St(t){return ZL(t,!1)}function v_(t){return ZL(t,!0)}function ZL(t,e){return go(t)?t:new f8(t,e)}class f8{constructor(e,n){this.dep=new yy,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Fi(e),this._value=n?e:dl(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Pu(e)||xd(e);e=r?e:Fi(e),Nl(e,n)&&(this._rawValue=e,this._value=r?e:dl(e),this.dep.trigger())}}function p8(t){t.dep&&t.dep.trigger()}function Yn(t){return go(t)?t.value:t}function g8(t){return Nr(t)?t():Yn(t)}const m8={get:(t,e,n)=>e==="__v_raw"?t:Yn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return go(i)&&!go(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function y_(t){return Xc(t)?t:new Proxy(t,m8)}class v8{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new yy,{get:r,set:i}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function KL(t){return new v8(t)}function XL(t){const e=ur(t)?new Array(t.length):{};for(const n in t)e[n]=JL(t,n);return e}class y8{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return ZD(Fi(this._object),this._key)}}class b8{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function _8(t,e,n){return go(t)?t:Nr(t)?new b8(t):fs(t)&&arguments.length>1?JL(t,e,n):St(t)}function JL(t,e,n){const r=t[e];return go(r)?r:new y8(t,e,n)}class w8{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new yy(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=sm-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ks!==this)return IL(this,!0),!0}get value(){const e=this.dep.track();return FL(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function x8(t,e,n=!1){let r,i;return Nr(t)?r=t:(r=t.get,i=t.set),new w8(r,i,n)}const L8={GET:"get",HAS:"has",ITERATE:"iterate"},S8={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},h0={},Mv=new WeakMap;let rd;function C8(){return rd}function QL(t,e=!1,n=rd){if(n){let r=Mv.get(n);r||Mv.set(n,r=[]),r.push(t)}}function E8(t,e,n=ji){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,c=Y=>i?Y:Pu(Y)||i===!1||i===0?Mh(Y,1):Mh(Y);let d,p,v,g,x=!1,E=!1;if(go(t)?(p=()=>t.value,x=Pu(t)):Xc(t)?(p=()=>c(t),x=!0):ur(t)?(E=!0,x=t.some(Y=>Xc(Y)||Pu(Y)),p=()=>t.map(Y=>{if(go(Y))return Y.value;if(Xc(Y))return c(Y);if(Nr(Y))return l?l(Y,2):Y()})):Nr(t)?e?p=l?()=>l(t,2):t:p=()=>{if(v){kd();try{v()}finally{Ad()}}const Y=rd;rd=d;try{return l?l(t,3,[g]):t(g)}finally{rd=Y}}:p=Zu,e&&i){const Y=p,te=i===!0?1/0:i;p=()=>Mh(Y(),te)}const k=d_(),A=()=>{d.stop(),k&&k.active&&a_(k.effects,d)};if(s&&e){const Y=e;e=(...te)=>{Y(...te),A()}}let D=E?new Array(t.length).fill(h0):h0;const j=Y=>{if(!(!(d.flags&1)||!d.dirty&&!Y))if(e){const te=d.run();if(i||x||(E?te.some((ge,pe)=>Nl(ge,D[pe])):Nl(te,D))){v&&v();const ge=rd;rd=d;try{const pe=[te,D===h0?void 0:E&&D[0]===h0?[]:D,g];l?l(e,3,pe):e(...pe),D=te}finally{rd=ge}}}else d.run()};return a&&a(j),d=new im(p),d.scheduler=o?()=>o(j,!1):j,g=Y=>QL(Y,!1,d),v=d.onStop=()=>{const Y=Mv.get(d);if(Y){if(l)l(Y,4);else for(const te of Y)te();Mv.delete(d)}},e?r?j(!0):D=d.run():o?o(j.bind(null,!0),!0):d.run(),A.pause=d.pause.bind(d),A.resume=d.resume.bind(d),A.stop=A,A}function Mh(t,e=1/0,n){if(e<=0||!fs(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,go(t))Mh(t.value,e,n);else if(ur(t))for(let r=0;r<t.length;r++)Mh(t[r],e,n);else if(Sf(t)||pp(t))t.forEach(r=>{Mh(r,e,n)});else if(py(t)){for(const r in t)Mh(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Mh(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const eS=[];function P8(t){eS.push(t)}function M8(){eS.pop()}function k8(t,e){}const A8={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},T8={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Fp(t,e,n,r){try{return r?t(...r):t()}catch(i){Cf(i,e,n)}}function Xu(t,e,n,r){if(Nr(t)){const i=Fp(t,e,n,r);return i&&l_(i)&&i.catch(s=>{Cf(s,e,n)}),i}if(ur(t)){const i=[];for(let s=0;s<t.length;s++)i.push(Xu(t[s],e,n,r));return i}}function Cf(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ji;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const d=a.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](t,l,c)===!1)return}a=a.parent}if(s){kd(),Fp(s,null,10,[t,l,c]),Ad();return}}D8(t,n,i,r,o)}function D8(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const Il=[];let Vc=-1;const vp=[];let id=null,rp=0;const tS=Promise.resolve();let kv=null;function sa(t){const e=kv||tS;return t?e.then(this?t.bind(this):t):e}function O8(t){let e=Vc+1,n=Il.length;for(;e<n;){const r=e+n>>>1,i=Il[r],s=lm(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function b_(t){if(!(t.flags&1)){const e=lm(t),n=Il[Il.length-1];!n||!(t.flags&2)&&e>=lm(n)?Il.push(t):Il.splice(O8(e),0,t),t.flags|=1,nS()}}function nS(){kv||(kv=tS.then(rS))}function am(t){ur(t)?vp.push(...t):id&&t.id===-1?id.splice(rp+1,0,t):t.flags&1||(vp.push(t),t.flags|=1),nS()}function Dx(t,e,n=Vc+1){for(;n<Il.length;n++){const r=Il[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Il.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Av(t){if(vp.length){const e=[...new Set(vp)].sort((n,r)=>lm(n)-lm(r));if(vp.length=0,id){id.push(...e);return}for(id=e,rp=0;rp<id.length;rp++){const n=id[rp];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}id=null,rp=0}}const lm=t=>t.id==null?t.flags&2?-1:1/0:t.id;function rS(t){try{for(Vc=0;Vc<Il.length;Vc++){const e=Il[Vc];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Fp(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Vc<Il.length;Vc++){const e=Il[Vc];e&&(e.flags&=-2)}Vc=-1,Il.length=0,Av(),kv=null,(Il.length||vp.length)&&rS()}}let ip,d0=[];function iS(t,e){var n,r;ip=t,ip?(ip.enabled=!0,d0.forEach(({event:i,args:s})=>ip.emit(i,...s)),d0=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{iS(s,e)}),setTimeout(()=>{ip||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,d0=[])},3e3)):d0=[]}let pa=null,Sy=null;function um(t){const e=pa;return pa=t,Sy=t&&t.type.__scopeId||null,e}function N8(t){Sy=t}function I8(){Sy=null}const B8=t=>Yu;function Yu(t,e=pa,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&G2(-1);const s=um(e);let o;try{o=t(...i)}finally{um(s),r._d&&G2(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Tn(t,e){if(pa===null)return t;const n=Tm(pa),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=ji]=e[i];s&&(Nr(s)&&(s={mounted:s,updated:s}),s.deep&&Mh(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Hc(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(kd(),Xu(l,n,8,[t.el,a,t,e]),Ad())}}const sS=Symbol("_vte"),oS=t=>t.__isTeleport,Rg=t=>t&&(t.disabled||t.disabled===""),Ox=t=>t&&(t.defer||t.defer===""),Nx=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Ix=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,j2=(t,e)=>{const n=t&&t.to;return Ts(n)?e?e(n):null:n},aS={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:d,pc:p,pbc:v,o:{insert:g,querySelector:x,createText:E,createComment:k}}=c,A=Rg(e.props);let{shapeFlag:D,children:j,dynamicChildren:Y}=e;if(t==null){const te=e.el=E(""),ge=e.anchor=E("");g(te,n,r),g(ge,n,r);const pe=($,Z)=>{D&16&&(i&&i.isCE&&(i.ce._teleportTarget=$),d(j,$,Z,i,s,o,a,l))},N=()=>{const $=e.target=j2(e.props,x),Z=lS($,e,E,g);$&&(o!=="svg"&&Nx($)?o="svg":o!=="mathml"&&Ix($)&&(o="mathml"),A||(pe($,Z),K0(e,!1)))};A&&(pe(n,ge),K0(e,!0)),Ox(e.props)?da(()=>{N(),e.el.__isMounted=!0},s):N()}else{if(Ox(e.props)&&!t.el.__isMounted){da(()=>{aS.process(t,e,n,r,i,s,o,a,l,c),delete t.el.__isMounted},s);return}e.el=t.el,e.targetStart=t.targetStart;const te=e.anchor=t.anchor,ge=e.target=t.target,pe=e.targetAnchor=t.targetAnchor,N=Rg(t.props),$=N?n:ge,Z=N?te:pe;if(o==="svg"||Nx(ge)?o="svg":(o==="mathml"||Ix(ge))&&(o="mathml"),Y?(v(t.dynamicChildren,Y,$,i,s,o,a),k_(t,e,!0)):l||p(t,e,$,Z,i,s,o,a,!1),A)N?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):f0(e,n,te,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const B=e.target=j2(e.props,x);B&&f0(e,B,null,c,0)}else N&&f0(e,ge,pe,c,1);K0(e,A)}},remove(t,e,n,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:d,target:p,props:v}=t;if(p&&(i(c),i(d)),s&&i(l),o&16){const g=s||!Rg(v);for(let x=0;x<a.length;x++){const E=a[x];r(E,e,n,g,!!E.dynamicChildren)}}},move:f0,hydrate:R8};function f0(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:d}=t,p=s===2;if(p&&r(o,e,n),(!p||Rg(d))&&l&16)for(let v=0;v<c.length;v++)i(c[v],e,n,2);p&&r(a,e,n)}function R8(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:d}},p){const v=e.target=j2(e.props,l);if(v){const g=Rg(e.props),x=v._lpa||v.firstChild;if(e.shapeFlag&16)if(g)e.anchor=p(o(t),e,a(t),n,r,i,s),e.targetStart=x,e.targetAnchor=x&&o(x);else{e.anchor=o(t);let E=x;for(;E;){if(E&&E.nodeType===8){if(E.data==="teleport start anchor")e.targetStart=E;else if(E.data==="teleport anchor"){e.targetAnchor=E,v._lpa=e.targetAnchor&&o(e.targetAnchor);break}}E=o(E)}e.targetAnchor||lS(v,e,d,c),p(x&&o(x),e,v,n,r,i,s)}K0(e,g)}return e.anchor&&o(e.anchor)}const Z0=aS;function K0(t,e){const n=t.ctx;if(n&&n.ut){let r,i;for(e?(r=t.el,i=t.anchor):(r=t.targetStart,i=t.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function lS(t,e,n,r){const i=e.targetStart=n(""),s=e.targetAnchor=n("");return i[sS]=s,t&&(r(i,t),r(s,t)),s}const sd=Symbol("_leaveCb"),p0=Symbol("_enterCb");function __(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return mo(()=>{t.isMounted=!0}),Td(()=>{t.isUnmounting=!0}),t}const zu=[Function,Array],w_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:zu,onEnter:zu,onAfterEnter:zu,onEnterCancelled:zu,onBeforeLeave:zu,onLeave:zu,onAfterLeave:zu,onLeaveCancelled:zu,onBeforeAppear:zu,onAppear:zu,onAfterAppear:zu,onAppearCancelled:zu},uS=t=>{const e=t.subTree;return e.component?uS(e.component):e},F8={name:"BaseTransition",props:w_,setup(t,{slots:e}){const n=ec(),r=__();return()=>{const i=e.default&&Cy(e.default(),!0);if(!i||!i.length)return;const s=cS(i),o=Fi(t),{mode:a}=o;if(r.isLeaving)return O1(s);const l=Bx(s);if(!l)return O1(s);let c=Sp(l,o,r,n,p=>c=p);l.type!==oa&&Bh(l,c);let d=n.subTree&&Bx(n.subTree);if(d&&d.type!==oa&&!bc(l,d)&&uS(n).type!==oa){let p=Sp(d,o,r,n);if(Bh(d,p),a==="out-in"&&l.type!==oa)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,d=void 0},O1(s);a==="in-out"&&l.type!==oa?p.delayLeave=(v,g,x)=>{const E=dS(r,d);E[String(d.key)]=d,v[sd]=()=>{g(),v[sd]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{x(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return s}}};function cS(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==oa){e=n;break}}return e}const hS=F8;function dS(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Sp(t,e,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:v,onLeave:g,onAfterLeave:x,onLeaveCancelled:E,onBeforeAppear:k,onAppear:A,onAfterAppear:D,onAppearCancelled:j}=e,Y=String(t.key),te=dS(n,t),ge=($,Z)=>{$&&Xu($,r,9,Z)},pe=($,Z)=>{const B=Z[1];ge($,Z),ur($)?$.every(I=>I.length<=1)&&B():$.length<=1&&B()},N={mode:o,persisted:a,beforeEnter($){let Z=l;if(!n.isMounted)if(s)Z=k||l;else return;$[sd]&&$[sd](!0);const B=te[Y];B&&bc(t,B)&&B.el[sd]&&B.el[sd](),ge(Z,[$])},enter($){let Z=c,B=d,I=p;if(!n.isMounted)if(s)Z=A||c,B=D||d,I=j||p;else return;let R=!1;const z=$[p0]=U=>{R||(R=!0,U?ge(I,[$]):ge(B,[$]),N.delayedLeave&&N.delayedLeave(),$[p0]=void 0)};Z?pe(Z,[$,z]):z()},leave($,Z){const B=String(t.key);if($[p0]&&$[p0](!0),n.isUnmounting)return Z();ge(v,[$]);let I=!1;const R=$[sd]=z=>{I||(I=!0,Z(),z?ge(E,[$]):ge(x,[$]),$[sd]=void 0,te[B]===t&&delete te[B])};te[B]=t,g?pe(g,[$,R]):R()},clone($){const Z=Sp($,e,n,r,i);return i&&i(Z),Z}};return N}function O1(t){if(km(t))return t=th(t),t.children=null,t}function Bx(t){if(!km(t))return oS(t.type)&&t.children?cS(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Nr(n.default))return n.default()}}function Bh(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Bh(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Cy(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===Sn?(o.patchFlag&128&&i++,r=r.concat(Cy(o.children,e,a))):(e||o.type!==oa)&&r.push(a!=null?th(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function js(t,e){return Nr(t)?xs({name:t.name},e,{setup:t}):t}function j8(){const t=ec();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function x_(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function z8(t){const e=ec(),n=v_(null);if(e){const i=e.refs===ji?e.refs={}:e.refs;Object.defineProperty(i,t,{enumerable:!0,get:()=>n.value,set:s=>n.value=s})}return n}function cm(t,e,n,r,i=!1){if(ur(t)){t.forEach((x,E)=>cm(x,e&&(ur(e)?e[E]:e),n,r,i));return}if(vd(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&cm(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?Tm(r.component):r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,d=a.refs===ji?a.refs={}:a.refs,p=a.setupState,v=Fi(p),g=p===ji?()=>!1:x=>es(v,x);if(c!=null&&c!==l&&(Ts(c)?(d[c]=null,g(c)&&(p[c]=null)):go(c)&&(c.value=null)),Nr(l))Fp(l,a,12,[o,d]);else{const x=Ts(l),E=go(l);if(x||E){const k=()=>{if(t.f){const A=x?g(l)?p[l]:d[l]:l.value;i?ur(A)&&a_(A,s):ur(A)?A.includes(s)||A.push(s):x?(d[l]=[s],g(l)&&(p[l]=d[l])):(l.value=[s],t.k&&(d[t.k]=l.value))}else x?(d[l]=o,g(l)&&(p[l]=o)):E&&(l.value=o,t.k&&(d[t.k]=o))};o?(k.id=-1,da(k,n)):k()}}}let Rx=!1;const qf=()=>{Rx||(console.error("Hydration completed but contains mismatches."),Rx=!0)},$8=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",V8=t=>t.namespaceURI.includes("MathML"),g0=t=>{if(t.nodeType===1){if($8(t))return"svg";if(V8(t))return"mathml"}},cp=t=>t.nodeType===8;function U8(t){const{mt:e,p:n,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:a,insert:l,createComment:c}}=t,d=(j,Y)=>{if(!Y.hasChildNodes()){n(null,j,Y),Av(),Y._vnode=j;return}p(Y.firstChild,j,null,null,null),Av(),Y._vnode=j},p=(j,Y,te,ge,pe,N=!1)=>{N=N||!!Y.dynamicChildren;const $=cp(j)&&j.data==="[",Z=()=>E(j,Y,te,ge,pe,$),{type:B,ref:I,shapeFlag:R,patchFlag:z}=Y;let U=j.nodeType;Y.el=j,z===-2&&(N=!1,Y.dynamicChildren=null);let V=null;switch(B){case yd:U!==3?Y.children===""?(l(Y.el=i(""),o(j),j),V=j):V=Z():(j.data!==Y.children&&(qf(),j.data=Y.children),V=s(j));break;case oa:D(j)?(V=s(j),A(Y.el=j.content.firstChild,j,te)):U!==8||$?V=Z():V=s(j);break;case df:if($&&(j=s(j),U=j.nodeType),U===1||U===3){V=j;const re=!Y.children.length;for(let Q=0;Q<Y.staticCount;Q++)re&&(Y.children+=V.nodeType===1?V.outerHTML:V.data),Q===Y.staticCount-1&&(Y.anchor=V),V=s(V);return $?s(V):V}else Z();break;case Sn:$?V=x(j,Y,te,ge,pe,N):V=Z();break;default:if(R&1)(U!==1||Y.type.toLowerCase()!==j.tagName.toLowerCase())&&!D(j)?V=Z():V=v(j,Y,te,ge,pe,N);else if(R&6){Y.slotScopeIds=pe;const re=o(j);if($?V=k(j):cp(j)&&j.data==="teleport start"?V=k(j,j.data,"teleport end"):V=s(j),e(Y,re,null,te,ge,g0(re),N),vd(Y)&&!Y.type.__asyncResolved){let Q;$?(Q=mi(Sn),Q.anchor=V?V.previousSibling:re.lastChild):Q=j.nodeType===3?Kr(""):mi("div"),Q.el=j,Y.component.subTree=Q}}else R&64?U!==8?V=Z():V=Y.type.hydrate(j,Y,te,ge,pe,N,t,g):R&128&&(V=Y.type.hydrate(j,Y,te,ge,g0(o(j)),pe,N,t,p))}return I!=null&&cm(I,null,ge,Y),V},v=(j,Y,te,ge,pe,N)=>{N=N||!!Y.dynamicChildren;const{type:$,props:Z,patchFlag:B,shapeFlag:I,dirs:R,transition:z}=Y,U=$==="input"||$==="option";if(U||B!==-1){R&&Hc(Y,null,te,"created");let V=!1;if(D(j)){V=jS(null,z)&&te&&te.vnode.props&&te.vnode.props.appear;const Q=j.content.firstChild;V&&z.beforeEnter(Q),A(Q,j,te),Y.el=j=Q}if(I&16&&!(Z&&(Z.innerHTML||Z.textContent))){let Q=g(j.firstChild,Y,j,te,ge,pe,N);for(;Q;){m0(j,1)||qf();const _e=Q;Q=Q.nextSibling,a(_e)}}else if(I&8){let Q=Y.children;Q[0]===`
`&&(j.tagName==="PRE"||j.tagName==="TEXTAREA")&&(Q=Q.slice(1)),j.textContent!==Q&&(m0(j,0)||qf(),j.textContent=Y.children)}if(Z){if(U||!N||B&48){const Q=j.tagName.includes("-");for(const _e in Z)(U&&(_e.endsWith("value")||_e==="indeterminate")||Pm(_e)&&!gp(_e)||_e[0]==="."||Q)&&r(j,_e,null,Z[_e],void 0,te)}else if(Z.onClick)r(j,"onClick",null,Z.onClick,void 0,te);else if(B&4&&Xc(Z.style))for(const Q in Z.style)Z.style[Q]}let re;(re=Z&&Z.onVnodeBeforeMount)&&Jl(re,te,Y),R&&Hc(Y,null,te,"beforeMount"),((re=Z&&Z.onVnodeMounted)||R||V)&&YS(()=>{re&&Jl(re,te,Y),V&&z.enter(j),R&&Hc(Y,null,te,"mounted")},ge)}return j.nextSibling},g=(j,Y,te,ge,pe,N,$)=>{$=$||!!Y.dynamicChildren;const Z=Y.children,B=Z.length;for(let I=0;I<B;I++){const R=$?Z[I]:Z[I]=Ql(Z[I]),z=R.type===yd;j?(z&&!$&&I+1<B&&Ql(Z[I+1]).type===yd&&(l(i(j.data.slice(R.children.length)),te,s(j)),j.data=R.children),j=p(j,R,ge,pe,N,$)):z&&!R.children?l(R.el=i(""),te):(m0(te,1)||qf(),n(null,R,te,null,ge,pe,g0(te),N))}return j},x=(j,Y,te,ge,pe,N)=>{const{slotScopeIds:$}=Y;$&&(pe=pe?pe.concat($):$);const Z=o(j),B=g(s(j),Y,Z,te,ge,pe,N);return B&&cp(B)&&B.data==="]"?s(Y.anchor=B):(qf(),l(Y.anchor=c("]"),Z,B),B)},E=(j,Y,te,ge,pe,N)=>{if(m0(j.parentElement,1)||qf(),Y.el=null,N){const B=k(j);for(;;){const I=s(j);if(I&&I!==B)a(I);else break}}const $=s(j),Z=o(j);return a(j),n(null,Y,Z,$,te,ge,g0(Z),pe),te&&(te.vnode.el=Y.el,ky(te,Y.el)),$},k=(j,Y="[",te="]")=>{let ge=0;for(;j;)if(j=s(j),j&&cp(j)&&(j.data===Y&&ge++,j.data===te)){if(ge===0)return s(j);ge--}return j},A=(j,Y,te)=>{const ge=Y.parentNode;ge&&ge.replaceChild(j,Y);let pe=te;for(;pe;)pe.vnode.el===Y&&(pe.vnode.el=pe.subTree.el=j),pe=pe.parent},D=j=>j.nodeType===1&&j.tagName==="TEMPLATE";return[d,p]}const Fx="data-allow-mismatch",H8={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function m0(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Fx);)t=t.parentElement;const n=t&&t.getAttribute(Fx);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:n.split(",").includes(H8[e])}}const W8=my().requestIdleCallback||(t=>setTimeout(t,1)),G8=my().cancelIdleCallback||(t=>clearTimeout(t)),q8=(t=1e4)=>e=>{const n=W8(e,{timeout:t});return()=>G8(n)};function Y8(t){const{top:e,left:n,bottom:r,right:i}=t.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(e>0&&e<s||r>0&&r<s)&&(n>0&&n<o||i>0&&i<o)}const Z8=t=>(e,n)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),e();break}},t);return n(i=>{if(i instanceof Element){if(Y8(i))return e(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},K8=t=>e=>{if(t){const n=matchMedia(t);if(n.matches)e();else return n.addEventListener("change",e,{once:!0}),()=>n.removeEventListener("change",e)}},X8=(t=[])=>(e,n)=>{Ts(t)&&(t=[t]);let r=!1;const i=o=>{r||(r=!0,s(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{n(o=>{for(const a of t)o.removeEventListener(a,i)})};return n(o=>{for(const a of t)o.addEventListener(a,i,{once:!0})}),s};function J8(t,e){if(cp(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(cp(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const vd=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Q8(t){Nr(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:a=!0,onError:l}=t;let c=null,d,p=0;const v=()=>(p++,c=null,g()),g=()=>{let x;return c||(x=c=e().catch(E=>{if(E=E instanceof Error?E:new Error(String(E)),l)return new Promise((k,A)=>{l(E,()=>k(v()),()=>A(E),p+1)});throw E}).then(E=>x!==c&&c?c:(E&&(E.__esModule||E[Symbol.toStringTag]==="Module")&&(E=E.default),d=E,E)))};return js({name:"AsyncComponentWrapper",__asyncLoader:g,__asyncHydrate(x,E,k){const A=s?()=>{const D=s(k,j=>J8(x,j));D&&(E.bum||(E.bum=[])).push(D)}:k;d?A():g().then(()=>!E.isUnmounted&&A())},get __asyncResolved(){return d},setup(){const x=fa;if(x_(x),d)return()=>N1(d,x);const E=j=>{c=null,Cf(j,x,13,!r)};if(a&&x.suspense||Cp)return g().then(j=>()=>N1(j,x)).catch(j=>(E(j),()=>r?mi(r,{error:j}):null));const k=St(!1),A=St(),D=St(!!i);return i&&setTimeout(()=>{D.value=!1},i),o!=null&&setTimeout(()=>{if(!k.value&&!A.value){const j=new Error(`Async component timed out after ${o}ms.`);E(j),A.value=j}},o),g().then(()=>{k.value=!0,x.parent&&km(x.parent.vnode)&&x.parent.update()}).catch(j=>{E(j),A.value=j}),()=>{if(k.value&&d)return N1(d,x);if(A.value&&r)return mi(r,{error:A.value});if(n&&!D.value)return mi(n)}}})}function N1(t,e){const{ref:n,props:r,children:i,ce:s}=e.vnode,o=mi(t,r,i);return o.ref=n,o.ce=s,delete e.vnode.ce,o}const km=t=>t.type.__isKeepAlive,eO={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=ec(),r=n.ctx;if(!r.renderer)return()=>{const D=e.default&&e.default();return D&&D.length===1?D[0]:D};const i=new Map,s=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:c,um:d,o:{createElement:p}}}=r,v=p("div");r.activate=(D,j,Y,te,ge)=>{const pe=D.component;c(D,j,Y,0,a),l(pe.vnode,D,j,Y,pe,a,te,D.slotScopeIds,ge),da(()=>{pe.isDeactivated=!1,pe.a&&mp(pe.a);const N=D.props&&D.props.onVnodeMounted;N&&Jl(N,pe.parent,D)},a)},r.deactivate=D=>{const j=D.component;Dv(j.m),Dv(j.a),c(D,v,null,1,a),da(()=>{j.da&&mp(j.da);const Y=D.props&&D.props.onVnodeUnmounted;Y&&Jl(Y,j.parent,D),j.isDeactivated=!0},a)};function g(D){I1(D),d(D,n,a,!0)}function x(D){i.forEach((j,Y)=>{const te=X2(j.type);te&&!D(te)&&E(Y)})}function E(D){const j=i.get(D);j&&(!o||!bc(j,o))?g(j):o&&I1(o),i.delete(D),s.delete(D)}ki(()=>[t.include,t.exclude],([D,j])=>{D&&x(Y=>yg(D,Y)),j&&x(Y=>!yg(j,Y))},{flush:"post",deep:!0});let k=null;const A=()=>{k!=null&&(Ov(n.subTree.type)?da(()=>{i.set(k,v0(n.subTree))},n.subTree.suspense):i.set(k,v0(n.subTree)))};return mo(A),Py(A),Td(()=>{i.forEach(D=>{const{subTree:j,suspense:Y}=n,te=v0(j);if(D.type===te.type&&D.key===te.key){I1(te);const ge=te.component.da;ge&&da(ge,Y);return}g(D)})}),()=>{if(k=null,!e.default)return o=null;const D=e.default(),j=D[0];if(D.length>1)return o=null,D;if(!Rh(j)||!(j.shapeFlag&4)&&!(j.shapeFlag&128))return o=null,j;let Y=v0(j);if(Y.type===oa)return o=null,Y;const te=Y.type,ge=X2(vd(Y)?Y.type.__asyncResolved||{}:te),{include:pe,exclude:N,max:$}=t;if(pe&&(!ge||!yg(pe,ge))||N&&ge&&yg(N,ge))return Y.shapeFlag&=-257,o=Y,j;const Z=Y.key==null?te:Y.key,B=i.get(Z);return Y.el&&(Y=th(Y),j.shapeFlag&128&&(j.ssContent=Y)),k=Z,B?(Y.el=B.el,Y.component=B.component,Y.transition&&Bh(Y,Y.transition),Y.shapeFlag|=512,s.delete(Z),s.add(Z)):(s.add(Z),$&&s.size>parseInt($,10)&&E(s.values().next().value)),Y.shapeFlag|=256,o=Y,Ov(j.type)?j:Y}}},tO=eO;function yg(t,e){return ur(t)?t.some(n=>yg(n,e)):Ts(t)?t.split(",").includes(e):TD(t)?(t.lastIndex=0,t.test(e)):!1}function fS(t,e){gS(t,"a",e)}function pS(t,e){gS(t,"da",e)}function gS(t,e,n=fa){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Ey(e,r,n),n){let i=n.parent;for(;i&&i.parent;)km(i.parent.vnode)&&nO(r,e,n,i),i=i.parent}}function nO(t,e,n,r){const i=Ey(e,t,r,!0);Ju(()=>{a_(r[e],i)},n)}function I1(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function v0(t){return t.shapeFlag&128?t.ssContent:t}function Ey(t,e,n=fa,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{kd();const a=bf(n),l=Xu(e,n,t,o);return a(),Ad(),l});return r?i.unshift(s):i.push(s),s}}const jh=t=>(e,n=fa)=>{(!Cp||t==="sp")&&Ey(t,(...r)=>e(...r),n)},mS=jh("bm"),mo=jh("m"),L_=jh("bu"),Py=jh("u"),Td=jh("bum"),Ju=jh("um"),vS=jh("sp"),yS=jh("rtg"),bS=jh("rtc");function _S(t,e=fa){Ey("ec",t,e)}const S_="components",rO="directives";function wS(t,e){return C_(S_,t,!0,e)||t}const xS=Symbol.for("v-ndc");function iO(t){return Ts(t)?C_(S_,t,!1)||t:t||xS}function sO(t){return C_(rO,t)}function C_(t,e,n=!0,r=!1){const i=pa||fa;if(i){const s=i.type;if(t===S_){const a=X2(s,!1);if(a&&(a===e||a===qa(e)||a===Mm(qa(e))))return s}const o=jx(i[t]||s[t],e)||jx(i.appContext[t],e);return!o&&r?s:o}}function jx(t,e){return t&&(t[e]||t[qa(e)]||t[Mm(qa(e))])}function sr(t,e,n,r){let i;const s=n&&n[r],o=ur(t);if(o||Ts(t)){const a=o&&Xc(t);let l=!1;a&&(l=!Pu(t),t=by(t)),i=new Array(t.length);for(let c=0,d=t.length;c<d;c++)i[c]=e(l?dl(t[c]):t[c],c,void 0,s&&s[c])}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s&&s[a])}else if(fs(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s&&s[l]));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const d=a[l];i[l]=e(t[d],d,l,s&&s[l])}}else i=[];return n&&(n[r]=i),i}function oO(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(ur(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return t}function aO(t,e,n={},r,i){if(pa.ce||pa.parent&&vd(pa.parent)&&pa.parent.ce)return e!=="default"&&(n.name=e),Oe(),Ca(Sn,null,[mi("slot",n,r&&r())],64);let s=t[e];s&&s._c&&(s._d=!1),Oe();const o=s&&E_(s(n)),a=n.key||o&&o.key,l=Ca(Sn,{key:(a&&!Sc(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function E_(t){return t.some(e=>Rh(e)?!(e.type===oa||e.type===Sn&&!E_(e.children)):!0)?t:null}function lO(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:Ng(r)]=t[r];return n}const z2=t=>t?tC(t)?Tm(t):z2(t.parent):null,Fg=xs(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>z2(t.parent),$root:t=>z2(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>P_(t),$forceUpdate:t=>t.f||(t.f=()=>{b_(t.update)}),$nextTick:t=>t.n||(t.n=sa.bind(t.proxy)),$watch:t=>FO.bind(t)}),B1=(t,e)=>t!==ji&&!t.__isScriptSetup&&es(t,e),$2={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(B1(r,e))return o[e]=1,r[e];if(i!==ji&&es(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&es(c,e))return o[e]=3,s[e];if(n!==ji&&es(n,e))return o[e]=4,n[e];V2&&(o[e]=0)}}const d=Fg[e];let p,v;if(d)return e==="$attrs"&&hl(t.attrs,"get",""),d(t);if((p=a.__cssModules)&&(p=p[e]))return p;if(n!==ji&&es(n,e))return o[e]=4,n[e];if(v=l.config.globalProperties,es(v,e))return v[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return B1(i,e)?(i[e]=n,!0):r!==ji&&es(r,e)?(r[e]=n,!0):es(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==ji&&es(t,o)||B1(e,o)||(a=s[0])&&es(a,o)||es(r,o)||es(Fg,o)||es(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:es(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},uO=xs({},$2,{get(t,e){if(e!==Symbol.unscopables)return $2.get(t,e,t)},has(t,e){return e[0]!=="_"&&!BD(e)}});function cO(){return null}function hO(){return null}function dO(t){}function fO(t){}function pO(){return null}function gO(){}function mO(t,e){return null}function vO(){return LS().slots}function yO(){return LS().attrs}function LS(){const t=ec();return t.setupContext||(t.setupContext=iC(t))}function hm(t){return ur(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function bO(t,e){const n=hm(t);for(const r in e){if(r.startsWith("__skip"))continue;let i=n[r];i?ur(i)||Nr(i)?i=n[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=n[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function _O(t,e){return!t||!e?t||e:ur(t)&&ur(e)?t.concat(e):xs({},hm(t),hm(e))}function wO(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function xO(t){const e=ec();let n=t();return Y2(),l_(n)&&(n=n.catch(r=>{throw bf(e),r})),[n,()=>bf(e)]}let V2=!0;function LO(t){const e=P_(t),n=t.proxy,r=t.ctx;V2=!1,e.beforeCreate&&zx(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:d,beforeMount:p,mounted:v,beforeUpdate:g,updated:x,activated:E,deactivated:k,beforeDestroy:A,beforeUnmount:D,destroyed:j,unmounted:Y,render:te,renderTracked:ge,renderTriggered:pe,errorCaptured:N,serverPrefetch:$,expose:Z,inheritAttrs:B,components:I,directives:R,filters:z}=e;if(c&&SO(c,r,null),o)for(const re in o){const Q=o[re];Nr(Q)&&(r[re]=Q.bind(n))}if(i){const re=i.call(n,n);fs(re)&&(t.data=ou(re))}if(V2=!0,s)for(const re in s){const Q=s[re],_e=Nr(Q)?Q.bind(n,n):Nr(Q.get)?Q.get.bind(n,n):Zu,we=!Nr(Q)&&Nr(Q.set)?Q.set.bind(n):Zu,Qe=Qn({get:_e,set:we});Object.defineProperty(r,re,{enumerable:!0,configurable:!0,get:()=>Qe.value,set:ae=>Qe.value=ae})}if(a)for(const re in a)SS(a[re],r,n,re);if(l){const re=Nr(l)?l.call(n):l;Reflect.ownKeys(re).forEach(Q=>{jg(Q,re[Q])})}d&&zx(d,t,"c");function V(re,Q){ur(Q)?Q.forEach(_e=>re(_e.bind(n))):Q&&re(Q.bind(n))}if(V(mS,p),V(mo,v),V(L_,g),V(Py,x),V(fS,E),V(pS,k),V(_S,N),V(bS,ge),V(yS,pe),V(Td,D),V(Ju,Y),V(vS,$),ur(Z))if(Z.length){const re=t.exposed||(t.exposed={});Z.forEach(Q=>{Object.defineProperty(re,Q,{get:()=>n[Q],set:_e=>n[Q]=_e})})}else t.exposed||(t.exposed={});te&&t.render===Zu&&(t.render=te),B!=null&&(t.inheritAttrs=B),I&&(t.components=I),R&&(t.directives=R),$&&x_(t)}function SO(t,e,n=Zu){ur(t)&&(t=U2(t));for(const r in t){const i=t[r];let s;fs(i)?"default"in i?s=Mu(i.from||r,i.default,!0):s=Mu(i.from||r):s=Mu(i),go(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function zx(t,e,n){Xu(ur(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function SS(t,e,n,r){let i=r.includes(".")?HS(n,r):()=>n[r];if(Ts(t)){const s=e[t];Nr(s)&&ki(i,s)}else if(Nr(t))ki(i,t.bind(n));else if(fs(t))if(ur(t))t.forEach(s=>SS(s,e,n,r));else{const s=Nr(t.handler)?t.handler.bind(n):e[t.handler];Nr(s)&&ki(i,s,t)}}function P_(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>Tv(l,c,o,!0)),Tv(l,e,o)),fs(e)&&s.set(e,l),l}function Tv(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Tv(t,s,n,!0),i&&i.forEach(o=>Tv(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=CO[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const CO={data:$x,props:Vx,emits:Vx,methods:bg,computed:bg,beforeCreate:Pl,created:Pl,beforeMount:Pl,mounted:Pl,beforeUpdate:Pl,updated:Pl,beforeDestroy:Pl,beforeUnmount:Pl,destroyed:Pl,unmounted:Pl,activated:Pl,deactivated:Pl,errorCaptured:Pl,serverPrefetch:Pl,components:bg,directives:bg,watch:PO,provide:$x,inject:EO};function $x(t,e){return e?t?function(){return xs(Nr(t)?t.call(this,this):t,Nr(e)?e.call(this,this):e)}:e:t}function EO(t,e){return bg(U2(t),U2(e))}function U2(t){if(ur(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Pl(t,e){return t?[...new Set([].concat(t,e))]:e}function bg(t,e){return t?xs(Object.create(null),t,e):e}function Vx(t,e){return t?ur(t)&&ur(e)?[...new Set([...t,...e])]:xs(Object.create(null),hm(t),hm(e??{})):e}function PO(t,e){if(!t)return e;if(!e)return t;const n=xs(Object.create(null),t);for(const r in e)n[r]=Pl(t[r],e[r]);return n}function CS(){return{app:null,config:{isNativeTag:kD,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let MO=0;function kO(t,e){return function(r,i=null){Nr(r)||(r=xs({},r)),i!=null&&!fs(i)&&(i=null);const s=CS(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:MO++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:oC,get config(){return s.config},set config(d){},use(d,...p){return o.has(d)||(d&&Nr(d.install)?(o.add(d),d.install(c,...p)):Nr(d)&&(o.add(d),d(c,...p))),c},mixin(d){return s.mixins.includes(d)||s.mixins.push(d),c},component(d,p){return p?(s.components[d]=p,c):s.components[d]},directive(d,p){return p?(s.directives[d]=p,c):s.directives[d]},mount(d,p,v){if(!l){const g=c._ceVNode||mi(r,i);return g.appContext=s,v===!0?v="svg":v===!1&&(v=void 0),p&&e?e(g,d):t(g,d,v),l=!0,c._container=d,d.__vue_app__=c,Tm(g.component)}},onUnmount(d){a.push(d)},unmount(){l&&(Xu(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(d,p){return s.provides[d]=p,c},runWithContext(d){const p=hf;hf=c;try{return d()}finally{hf=p}}};return c}}let hf=null;function jg(t,e){if(fa){let n=fa.provides;const r=fa.parent&&fa.parent.provides;r===n&&(n=fa.provides=Object.create(r)),n[t]=e}}function Mu(t,e,n=!1){const r=fa||pa;if(r||hf){const i=hf?hf._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Nr(e)?e.call(r&&r.proxy):e}}function ES(){return!!(fa||pa||hf)}const PS={},MS=()=>Object.create(PS),kS=t=>Object.getPrototypeOf(t)===PS;function AO(t,e,n,r=!1){const i={},s=MS();t.propsDefaults=Object.create(null),AS(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:m_(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function TO(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=Fi(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let p=0;p<d.length;p++){let v=d[p];if(My(t.emitsOptions,v))continue;const g=e[v];if(l)if(es(s,v))g!==s[v]&&(s[v]=g,c=!0);else{const x=qa(v);i[x]=H2(l,a,x,g,t,!1)}else g!==s[v]&&(s[v]=g,c=!0)}}}else{AS(t,e,i,s)&&(c=!0);let d;for(const p in a)(!e||!es(e,p)&&((d=eu(p))===p||!es(e,d)))&&(l?n&&(n[p]!==void 0||n[d]!==void 0)&&(i[p]=H2(l,a,p,void 0,t,!0)):delete i[p]);if(s!==a)for(const p in s)(!e||!es(e,p))&&(delete s[p],c=!0)}c&&Ph(t.attrs,"set","")}function AS(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(gp(l))continue;const c=e[l];let d;i&&es(i,d=qa(l))?!s||!s.includes(d)?n[d]=c:(a||(a={}))[d]=c:My(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=Fi(n),c=a||ji;for(let d=0;d<s.length;d++){const p=s[d];n[p]=H2(i,l,p,c[p],t,!es(c,p))}}return o}function H2(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=es(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Nr(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const d=bf(i);r=c[n]=l.call(null,e),d()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===eu(n))&&(r=!0))}return r}const DO=new WeakMap;function TS(t,e,n=!1){const r=n?DO:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!Nr(t)){const d=p=>{l=!0;const[v,g]=TS(p,e,!0);xs(o,v),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!s&&!l)return fs(t)&&r.set(t,fp),fp;if(ur(s))for(let d=0;d<s.length;d++){const p=qa(s[d]);Ux(p)&&(o[p]=ji)}else if(s)for(const d in s){const p=qa(d);if(Ux(p)){const v=s[d],g=o[p]=ur(v)||Nr(v)?{type:v}:xs({},v),x=g.type;let E=!1,k=!0;if(ur(x))for(let A=0;A<x.length;++A){const D=x[A],j=Nr(D)&&D.name;if(j==="Boolean"){E=!0;break}else j==="String"&&(k=!1)}else E=Nr(x)&&x.name==="Boolean";g[0]=E,g[1]=k,(E||es(g,"default"))&&a.push(p)}}const c=[o,a];return fs(t)&&r.set(t,c),c}function Ux(t){return t[0]!=="$"&&!gp(t)}const DS=t=>t[0]==="_"||t==="$stable",M_=t=>ur(t)?t.map(Ql):[Ql(t)],OO=(t,e,n)=>{if(e._n)return e;const r=Yu((...i)=>M_(e(...i)),n);return r._c=!1,r},OS=(t,e,n)=>{const r=t._ctx;for(const i in t){if(DS(i))continue;const s=t[i];if(Nr(s))e[i]=OO(i,s,r);else if(s!=null){const o=M_(s);e[i]=()=>o}}},NS=(t,e)=>{const n=M_(e);t.slots.default=()=>n},IS=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},NO=(t,e,n)=>{const r=t.slots=MS();if(t.vnode.shapeFlag&32){const i=e._;i?(IS(r,e,n),n&&kL(r,"_",i,!0)):OS(e,r)}else e&&NS(t,e)},IO=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=ji;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:IS(i,e,n):(s=!e.$stable,OS(e,i)),o=e}else e&&(NS(t,e),o={default:1});if(s)for(const a in i)!DS(a)&&o[a]==null&&delete i[a]},da=YS;function BS(t){return FS(t)}function RS(t){return FS(t,U8)}function FS(t,e){const n=my();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:d,parentNode:p,nextSibling:v,setScopeId:g=Zu,insertStaticContent:x}=t,E=(de,ee,se,ce=null,ze=null,Ce=null,ve=void 0,Ve=null,Ye=!!ee.dynamicChildren)=>{if(de===ee)return;de&&!bc(de,ee)&&(ce=he(de),ae(de,ze,Ce,!0),de=null),ee.patchFlag===-2&&(Ye=!1,ee.dynamicChildren=null);const{type:Ze,ref:_t,shapeFlag:We}=ee;switch(Ze){case yd:k(de,ee,se,ce);break;case oa:A(de,ee,se,ce);break;case df:de==null&&D(ee,se,ce,ve);break;case Sn:I(de,ee,se,ce,ze,Ce,ve,Ve,Ye);break;default:We&1?te(de,ee,se,ce,ze,Ce,ve,Ve,Ye):We&6?R(de,ee,se,ce,ze,Ce,ve,Ve,Ye):(We&64||We&128)&&Ze.process(de,ee,se,ce,ze,Ce,ve,Ve,Ye,De)}_t!=null&&ze&&cm(_t,de&&de.ref,Ce,ee||de,!ee)},k=(de,ee,se,ce)=>{if(de==null)r(ee.el=a(ee.children),se,ce);else{const ze=ee.el=de.el;ee.children!==de.children&&c(ze,ee.children)}},A=(de,ee,se,ce)=>{de==null?r(ee.el=l(ee.children||""),se,ce):ee.el=de.el},D=(de,ee,se,ce)=>{[de.el,de.anchor]=x(de.children,ee,se,ce,de.el,de.anchor)},j=({el:de,anchor:ee},se,ce)=>{let ze;for(;de&&de!==ee;)ze=v(de),r(de,se,ce),de=ze;r(ee,se,ce)},Y=({el:de,anchor:ee})=>{let se;for(;de&&de!==ee;)se=v(de),i(de),de=se;i(ee)},te=(de,ee,se,ce,ze,Ce,ve,Ve,Ye)=>{ee.type==="svg"?ve="svg":ee.type==="math"&&(ve="mathml"),de==null?ge(ee,se,ce,ze,Ce,ve,Ve,Ye):$(de,ee,ze,Ce,ve,Ve,Ye)},ge=(de,ee,se,ce,ze,Ce,ve,Ve)=>{let Ye,Ze;const{props:_t,shapeFlag:We,transition:ut,dirs:Vt}=de;if(Ye=de.el=o(de.type,Ce,_t&&_t.is,_t),We&8?d(Ye,de.children):We&16&&N(de.children,Ye,null,ce,ze,R1(de,Ce),ve,Ve),Vt&&Hc(de,null,ce,"created"),pe(Ye,de,de.scopeId,ve,ce),_t){for(const bn in _t)bn!=="value"&&!gp(bn)&&s(Ye,bn,null,_t[bn],Ce,ce);"value"in _t&&s(Ye,"value",null,_t.value,Ce),(Ze=_t.onVnodeBeforeMount)&&Jl(Ze,ce,de)}Vt&&Hc(de,null,ce,"beforeMount");const tn=jS(ze,ut);tn&&ut.beforeEnter(Ye),r(Ye,ee,se),((Ze=_t&&_t.onVnodeMounted)||tn||Vt)&&da(()=>{Ze&&Jl(Ze,ce,de),tn&&ut.enter(Ye),Vt&&Hc(de,null,ce,"mounted")},ze)},pe=(de,ee,se,ce,ze)=>{if(se&&g(de,se),ce)for(let Ce=0;Ce<ce.length;Ce++)g(de,ce[Ce]);if(ze){let Ce=ze.subTree;if(ee===Ce||Ov(Ce.type)&&(Ce.ssContent===ee||Ce.ssFallback===ee)){const ve=ze.vnode;pe(de,ve,ve.scopeId,ve.slotScopeIds,ze.parent)}}},N=(de,ee,se,ce,ze,Ce,ve,Ve,Ye=0)=>{for(let Ze=Ye;Ze<de.length;Ze++){const _t=de[Ze]=Ve?od(de[Ze]):Ql(de[Ze]);E(null,_t,ee,se,ce,ze,Ce,ve,Ve)}},$=(de,ee,se,ce,ze,Ce,ve)=>{const Ve=ee.el=de.el;let{patchFlag:Ye,dynamicChildren:Ze,dirs:_t}=ee;Ye|=de.patchFlag&16;const We=de.props||ji,ut=ee.props||ji;let Vt;if(se&&Ud(se,!1),(Vt=ut.onVnodeBeforeUpdate)&&Jl(Vt,se,ee,de),_t&&Hc(ee,de,se,"beforeUpdate"),se&&Ud(se,!0),(We.innerHTML&&ut.innerHTML==null||We.textContent&&ut.textContent==null)&&d(Ve,""),Ze?Z(de.dynamicChildren,Ze,Ve,se,ce,R1(ee,ze),Ce):ve||Q(de,ee,Ve,null,se,ce,R1(ee,ze),Ce,!1),Ye>0){if(Ye&16)B(Ve,We,ut,se,ze);else if(Ye&2&&We.class!==ut.class&&s(Ve,"class",null,ut.class,ze),Ye&4&&s(Ve,"style",We.style,ut.style,ze),Ye&8){const tn=ee.dynamicProps;for(let bn=0;bn<tn.length;bn++){const et=tn[bn],at=We[et],it=ut[et];(it!==at||et==="value")&&s(Ve,et,at,it,ze,se)}}Ye&1&&de.children!==ee.children&&d(Ve,ee.children)}else!ve&&Ze==null&&B(Ve,We,ut,se,ze);((Vt=ut.onVnodeUpdated)||_t)&&da(()=>{Vt&&Jl(Vt,se,ee,de),_t&&Hc(ee,de,se,"updated")},ce)},Z=(de,ee,se,ce,ze,Ce,ve)=>{for(let Ve=0;Ve<ee.length;Ve++){const Ye=de[Ve],Ze=ee[Ve],_t=Ye.el&&(Ye.type===Sn||!bc(Ye,Ze)||Ye.shapeFlag&70)?p(Ye.el):se;E(Ye,Ze,_t,null,ce,ze,Ce,ve,!0)}},B=(de,ee,se,ce,ze)=>{if(ee!==se){if(ee!==ji)for(const Ce in ee)!gp(Ce)&&!(Ce in se)&&s(de,Ce,ee[Ce],null,ze,ce);for(const Ce in se){if(gp(Ce))continue;const ve=se[Ce],Ve=ee[Ce];ve!==Ve&&Ce!=="value"&&s(de,Ce,Ve,ve,ze,ce)}"value"in se&&s(de,"value",ee.value,se.value,ze)}},I=(de,ee,se,ce,ze,Ce,ve,Ve,Ye)=>{const Ze=ee.el=de?de.el:a(""),_t=ee.anchor=de?de.anchor:a("");let{patchFlag:We,dynamicChildren:ut,slotScopeIds:Vt}=ee;Vt&&(Ve=Ve?Ve.concat(Vt):Vt),de==null?(r(Ze,se,ce),r(_t,se,ce),N(ee.children||[],se,_t,ze,Ce,ve,Ve,Ye)):We>0&&We&64&&ut&&de.dynamicChildren?(Z(de.dynamicChildren,ut,se,ze,Ce,ve,Ve),(ee.key!=null||ze&&ee===ze.subTree)&&k_(de,ee,!0)):Q(de,ee,se,_t,ze,Ce,ve,Ve,Ye)},R=(de,ee,se,ce,ze,Ce,ve,Ve,Ye)=>{ee.slotScopeIds=Ve,de==null?ee.shapeFlag&512?ze.ctx.activate(ee,se,ce,ve,Ye):z(ee,se,ce,ze,Ce,ve,Ye):U(de,ee,Ye)},z=(de,ee,se,ce,ze,Ce,ve)=>{const Ve=de.component=eC(de,ce,ze);if(km(de)&&(Ve.ctx.renderer=De),nC(Ve,!1,ve),Ve.asyncDep){if(ze&&ze.registerDep(Ve,V,ve),!de.el){const Ye=Ve.subTree=mi(oa);A(null,Ye,ee,se)}}else V(Ve,de,ee,se,ze,Ce,ve)},U=(de,ee,se)=>{const ce=ee.component=de.component;if(HO(de,ee,se))if(ce.asyncDep&&!ce.asyncResolved){re(ce,ee,se);return}else ce.next=ee,ce.update();else ee.el=de.el,ce.vnode=ee},V=(de,ee,se,ce,ze,Ce,ve)=>{const Ve=()=>{if(de.isMounted){let{next:We,bu:ut,u:Vt,parent:tn,vnode:bn}=de;{const Kt=zS(de);if(Kt){We&&(We.el=bn.el,re(de,We,ve)),Kt.asyncDep.then(()=>{de.isUnmounted||Ve()});return}}let et=We,at;Ud(de,!1),We?(We.el=bn.el,re(de,We,ve)):We=bn,ut&&mp(ut),(at=We.props&&We.props.onVnodeBeforeUpdate)&&Jl(at,tn,We,bn),Ud(de,!0);const it=X0(de),zt=de.subTree;de.subTree=it,E(zt,it,p(zt.el),he(zt),de,ze,Ce),We.el=it.el,et===null&&ky(de,it.el),Vt&&da(Vt,ze),(at=We.props&&We.props.onVnodeUpdated)&&da(()=>Jl(at,tn,We,bn),ze)}else{let We;const{el:ut,props:Vt}=ee,{bm:tn,m:bn,parent:et,root:at,type:it}=de,zt=vd(ee);if(Ud(de,!1),tn&&mp(tn),!zt&&(We=Vt&&Vt.onVnodeBeforeMount)&&Jl(We,et,ee),Ud(de,!0),ut&&Je){const Kt=()=>{de.subTree=X0(de),Je(ut,de.subTree,de,ze,null)};zt&&it.__asyncHydrate?it.__asyncHydrate(ut,de,Kt):Kt()}else{at.ce&&at.ce._injectChildStyle(it);const Kt=de.subTree=X0(de);E(null,Kt,se,ce,de,ze,Ce),ee.el=Kt.el}if(bn&&da(bn,ze),!zt&&(We=Vt&&Vt.onVnodeMounted)){const Kt=ee;da(()=>Jl(We,et,Kt),ze)}(ee.shapeFlag&256||et&&vd(et.vnode)&&et.vnode.shapeFlag&256)&&de.a&&da(de.a,ze),de.isMounted=!0,ee=se=ce=null}};de.scope.on();const Ye=de.effect=new im(Ve);de.scope.off();const Ze=de.update=Ye.run.bind(Ye),_t=de.job=Ye.runIfDirty.bind(Ye);_t.i=de,_t.id=de.uid,Ye.scheduler=()=>b_(_t),Ud(de,!0),Ze()},re=(de,ee,se)=>{ee.component=de;const ce=de.vnode.props;de.vnode=ee,de.next=null,TO(de,ee.props,ce,se),IO(de,ee.children,se),kd(),Dx(de),Ad()},Q=(de,ee,se,ce,ze,Ce,ve,Ve,Ye=!1)=>{const Ze=de&&de.children,_t=de?de.shapeFlag:0,We=ee.children,{patchFlag:ut,shapeFlag:Vt}=ee;if(ut>0){if(ut&128){we(Ze,We,se,ce,ze,Ce,ve,Ve,Ye);return}else if(ut&256){_e(Ze,We,se,ce,ze,Ce,ve,Ve,Ye);return}}Vt&8?(_t&16&&fe(Ze,ze,Ce),We!==Ze&&d(se,We)):_t&16?Vt&16?we(Ze,We,se,ce,ze,Ce,ve,Ve,Ye):fe(Ze,ze,Ce,!0):(_t&8&&d(se,""),Vt&16&&N(We,se,ce,ze,Ce,ve,Ve,Ye))},_e=(de,ee,se,ce,ze,Ce,ve,Ve,Ye)=>{de=de||fp,ee=ee||fp;const Ze=de.length,_t=ee.length,We=Math.min(Ze,_t);let ut;for(ut=0;ut<We;ut++){const Vt=ee[ut]=Ye?od(ee[ut]):Ql(ee[ut]);E(de[ut],Vt,se,null,ze,Ce,ve,Ve,Ye)}Ze>_t?fe(de,ze,Ce,!0,!1,We):N(ee,se,ce,ze,Ce,ve,Ve,Ye,We)},we=(de,ee,se,ce,ze,Ce,ve,Ve,Ye)=>{let Ze=0;const _t=ee.length;let We=de.length-1,ut=_t-1;for(;Ze<=We&&Ze<=ut;){const Vt=de[Ze],tn=ee[Ze]=Ye?od(ee[Ze]):Ql(ee[Ze]);if(bc(Vt,tn))E(Vt,tn,se,null,ze,Ce,ve,Ve,Ye);else break;Ze++}for(;Ze<=We&&Ze<=ut;){const Vt=de[We],tn=ee[ut]=Ye?od(ee[ut]):Ql(ee[ut]);if(bc(Vt,tn))E(Vt,tn,se,null,ze,Ce,ve,Ve,Ye);else break;We--,ut--}if(Ze>We){if(Ze<=ut){const Vt=ut+1,tn=Vt<_t?ee[Vt].el:ce;for(;Ze<=ut;)E(null,ee[Ze]=Ye?od(ee[Ze]):Ql(ee[Ze]),se,tn,ze,Ce,ve,Ve,Ye),Ze++}}else if(Ze>ut)for(;Ze<=We;)ae(de[Ze],ze,Ce,!0),Ze++;else{const Vt=Ze,tn=Ze,bn=new Map;for(Ze=tn;Ze<=ut;Ze++){const Dn=ee[Ze]=Ye?od(ee[Ze]):Ql(ee[Ze]);Dn.key!=null&&bn.set(Dn.key,Ze)}let et,at=0;const it=ut-tn+1;let zt=!1,Kt=0;const Nn=new Array(it);for(Ze=0;Ze<it;Ze++)Nn[Ze]=0;for(Ze=Vt;Ze<=We;Ze++){const Dn=de[Ze];if(at>=it){ae(Dn,ze,Ce,!0);continue}let er;if(Dn.key!=null)er=bn.get(Dn.key);else for(et=tn;et<=ut;et++)if(Nn[et-tn]===0&&bc(Dn,ee[et])){er=et;break}er===void 0?ae(Dn,ze,Ce,!0):(Nn[er-tn]=Ze+1,er>=Kt?Kt=er:zt=!0,E(Dn,ee[er],se,null,ze,Ce,ve,Ve,Ye),at++)}const yn=zt?BO(Nn):fp;for(et=yn.length-1,Ze=it-1;Ze>=0;Ze--){const Dn=tn+Ze,er=ee[Dn],Qt=Dn+1<_t?ee[Dn+1].el:ce;Nn[Ze]===0?E(null,er,se,Qt,ze,Ce,ve,Ve,Ye):zt&&(et<0||Ze!==yn[et]?Qe(er,se,Qt,2):et--)}}},Qe=(de,ee,se,ce,ze=null)=>{const{el:Ce,type:ve,transition:Ve,children:Ye,shapeFlag:Ze}=de;if(Ze&6){Qe(de.component.subTree,ee,se,ce);return}if(Ze&128){de.suspense.move(ee,se,ce);return}if(Ze&64){ve.move(de,ee,se,De);return}if(ve===Sn){r(Ce,ee,se);for(let We=0;We<Ye.length;We++)Qe(Ye[We],ee,se,ce);r(de.anchor,ee,se);return}if(ve===df){j(de,ee,se);return}if(ce!==2&&Ze&1&&Ve)if(ce===0)Ve.beforeEnter(Ce),r(Ce,ee,se),da(()=>Ve.enter(Ce),ze);else{const{leave:We,delayLeave:ut,afterLeave:Vt}=Ve,tn=()=>r(Ce,ee,se),bn=()=>{We(Ce,()=>{tn(),Vt&&Vt()})};ut?ut(Ce,tn,bn):bn()}else r(Ce,ee,se)},ae=(de,ee,se,ce=!1,ze=!1)=>{const{type:Ce,props:ve,ref:Ve,children:Ye,dynamicChildren:Ze,shapeFlag:_t,patchFlag:We,dirs:ut,cacheIndex:Vt}=de;if(We===-2&&(ze=!1),Ve!=null&&cm(Ve,null,se,de,!0),Vt!=null&&(ee.renderCache[Vt]=void 0),_t&256){ee.ctx.deactivate(de);return}const tn=_t&1&&ut,bn=!vd(de);let et;if(bn&&(et=ve&&ve.onVnodeBeforeUnmount)&&Jl(et,ee,de),_t&6)me(de.component,se,ce);else{if(_t&128){de.suspense.unmount(se,ce);return}tn&&Hc(de,null,ee,"beforeUnmount"),_t&64?de.type.remove(de,ee,se,De,ce):Ze&&!Ze.hasOnce&&(Ce!==Sn||We>0&&We&64)?fe(Ze,ee,se,!1,!0):(Ce===Sn&&We&384||!ze&&_t&16)&&fe(Ye,ee,se),ce&&H(de)}(bn&&(et=ve&&ve.onVnodeUnmounted)||tn)&&da(()=>{et&&Jl(et,ee,de),tn&&Hc(de,null,ee,"unmounted")},se)},H=de=>{const{type:ee,el:se,anchor:ce,transition:ze}=de;if(ee===Sn){K(se,ce);return}if(ee===df){Y(de);return}const Ce=()=>{i(se),ze&&!ze.persisted&&ze.afterLeave&&ze.afterLeave()};if(de.shapeFlag&1&&ze&&!ze.persisted){const{leave:ve,delayLeave:Ve}=ze,Ye=()=>ve(se,Ce);Ve?Ve(de.el,Ce,Ye):Ye()}else Ce()},K=(de,ee)=>{let se;for(;de!==ee;)se=v(de),i(de),de=se;i(ee)},me=(de,ee,se)=>{const{bum:ce,scope:ze,job:Ce,subTree:ve,um:Ve,m:Ye,a:Ze}=de;Dv(Ye),Dv(Ze),ce&&mp(ce),ze.stop(),Ce&&(Ce.flags|=8,ae(ve,de,ee,se)),Ve&&da(Ve,ee),da(()=>{de.isUnmounted=!0},ee),ee&&ee.pendingBranch&&!ee.isUnmounted&&de.asyncDep&&!de.asyncResolved&&de.suspenseId===ee.pendingId&&(ee.deps--,ee.deps===0&&ee.resolve())},fe=(de,ee,se,ce=!1,ze=!1,Ce=0)=>{for(let ve=Ce;ve<de.length;ve++)ae(de[ve],ee,se,ce,ze)},he=de=>{if(de.shapeFlag&6)return he(de.component.subTree);if(de.shapeFlag&128)return de.suspense.next();const ee=v(de.anchor||de.el),se=ee&&ee[sS];return se?v(se):ee};let X=!1;const J=(de,ee,se)=>{de==null?ee._vnode&&ae(ee._vnode,null,null,!0):E(ee._vnode||null,de,ee,null,null,null,se),ee._vnode=de,X||(X=!0,Dx(),Av(),X=!1)},De={p:E,um:ae,m:Qe,r:H,mt:z,mc:N,pc:Q,pbc:Z,n:he,o:t};let Te,Je;return e&&([Te,Je]=e(De)),{render:J,hydrate:Te,createApp:kO(J,Te)}}function R1({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ud({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function jS(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function k_(t,e,n=!1){const r=t.children,i=e.children;if(ur(r)&&ur(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=od(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&k_(o,a)),a.type===yd&&(a.el=o.el)}}function BO(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function zS(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:zS(e)}function Dv(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const $S=Symbol.for("v-scx"),VS=()=>Mu($S);function dm(t,e){return Am(t,null,e)}function RO(t,e){return Am(t,null,{flush:"post"})}function US(t,e){return Am(t,null,{flush:"sync"})}function ki(t,e,n){return Am(t,e,n)}function Am(t,e,n=ji){const{immediate:r,deep:i,flush:s,once:o}=n,a=xs({},n),l=e&&r||!e&&s!=="post";let c;if(Cp){if(s==="sync"){const g=VS();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=Zu,g.resume=Zu,g.pause=Zu,g}}const d=fa;a.call=(g,x,E)=>Xu(g,d,x,E);let p=!1;s==="post"?a.scheduler=g=>{da(g,d&&d.suspense)}:s!=="sync"&&(p=!0,a.scheduler=(g,x)=>{x?g():b_(g)}),a.augmentJob=g=>{e&&(g.flags|=4),p&&(g.flags|=2,d&&(g.id=d.uid,g.i=d))};const v=E8(t,e,a);return Cp&&(c?c.push(v):l&&v()),v}function FO(t,e,n){const r=this.proxy,i=Ts(t)?t.includes(".")?HS(r,t):()=>r[t]:t.bind(r,r);let s;Nr(e)?s=e:(s=e.handler,n=e);const o=bf(this),a=Am(i,s.bind(r),n);return o(),a}function HS(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function jO(t,e,n=ji){const r=ec(),i=qa(e),s=eu(e),o=WS(t,i),a=KL((l,c)=>{let d,p=ji,v;return US(()=>{const g=t[i];Nl(d,g)&&(d=g,c())}),{get(){return l(),n.get?n.get(d):d},set(g){const x=n.set?n.set(g):g;if(!Nl(x,d)&&!(p!==ji&&Nl(g,p)))return;const E=r.vnode.props;E&&(e in E||i in E||s in E)&&(`onUpdate:${e}`in E||`onUpdate:${i}`in E||`onUpdate:${s}`in E)||(d=g,c()),r.emit(`update:${e}`,x),Nl(g,x)&&Nl(g,p)&&!Nl(x,v)&&c(),p=g,v=x}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||ji:a,done:!1}:{done:!0}}}},a}const WS=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${qa(e)}Modifiers`]||t[`${eu(e)}Modifiers`];function zO(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||ji;let i=n;const s=e.startsWith("update:"),o=s&&WS(r,e.slice(7));o&&(o.trim&&(i=n.map(d=>Ts(d)?d.trim():d)),o.number&&(i=n.map(Cv)));let a,l=r[a=Ng(e)]||r[a=Ng(qa(e))];!l&&s&&(l=r[a=Ng(eu(e))]),l&&Xu(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Xu(c,t,6,i)}}function GS(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Nr(t)){const l=c=>{const d=GS(c,e,!0);d&&(a=!0,xs(o,d))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(fs(t)&&r.set(t,null),null):(ur(s)?s.forEach(l=>o[l]=null):xs(o,s),fs(t)&&r.set(t,o),o)}function My(t,e){return!t||!Pm(e)?!1:(e=e.slice(2).replace(/Once$/,""),es(t,e[0].toLowerCase()+e.slice(1))||es(t,eu(e))||es(t,e))}function X0(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:d,props:p,data:v,setupState:g,ctx:x,inheritAttrs:E}=t,k=um(t);let A,D;try{if(n.shapeFlag&4){const Y=i||r,te=Y;A=Ql(c.call(te,Y,d,p,g,v,x)),D=a}else{const Y=e;A=Ql(Y.length>1?Y(p,{attrs:a,slots:o,emit:l}):Y(p,null)),D=e.props?a:VO(a)}}catch(Y){zg.length=0,Cf(Y,t,1),A=mi(oa)}let j=A;if(D&&E!==!1){const Y=Object.keys(D),{shapeFlag:te}=j;Y.length&&te&7&&(s&&Y.some(o_)&&(D=UO(D,s)),j=th(j,D,!1,!0))}return n.dirs&&(j=th(j,null,!1,!0),j.dirs=j.dirs?j.dirs.concat(n.dirs):n.dirs),n.transition&&Bh(j,n.transition),A=j,um(k),A}function $O(t,e=!0){let n;for(let r=0;r<t.length;r++){const i=t[r];if(Rh(i)){if(i.type!==oa||i.children==="v-if"){if(n)return;n=i}}else return}return n}const VO=t=>{let e;for(const n in t)(n==="class"||n==="style"||Pm(n))&&((e||(e={}))[n]=t[n]);return e},UO=(t,e)=>{const n={};for(const r in t)(!o_(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function HO(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Hx(r,o,c):!!o;if(l&8){const d=e.dynamicProps;for(let p=0;p<d.length;p++){const v=d[p];if(o[v]!==r[v]&&!My(c,v))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Hx(r,o,c):!0:!!o;return!1}function Hx(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!My(n,s))return!0}return!1}function ky({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Ov=t=>t.__isSuspense;let W2=0;const WO={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,c){if(t==null)qO(e,n,r,i,s,o,a,l,c);else{if(s&&s.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}YO(t,e,n,r,i,o,a,l,c)}},hydrate:ZO,normalize:KO},GO=WO;function fm(t,e){const n=t.props&&t.props[e];Nr(n)&&n()}function qO(t,e,n,r,i,s,o,a,l){const{p:c,o:{createElement:d}}=l,p=d("div"),v=t.suspense=qS(t,i,r,e,p,n,s,o,a,l);c(null,v.pendingBranch=t.ssContent,p,null,r,v,s,o),v.deps>0?(fm(t,"onPending"),fm(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,s,o),yp(v,t.ssFallback)):v.resolve(!1,!0)}function YO(t,e,n,r,i,s,o,a,{p:l,um:c,o:{createElement:d}}){const p=e.suspense=t.suspense;p.vnode=e,e.el=t.el;const v=e.ssContent,g=e.ssFallback,{activeBranch:x,pendingBranch:E,isInFallback:k,isHydrating:A}=p;if(E)p.pendingBranch=v,bc(v,E)?(l(E,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():k&&(A||(l(x,g,n,r,i,null,s,o,a),yp(p,g)))):(p.pendingId=W2++,A?(p.isHydrating=!1,p.activeBranch=E):c(E,i,p),p.deps=0,p.effects.length=0,p.hiddenContainer=d("div"),k?(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():(l(x,g,n,r,i,null,s,o,a),yp(p,g))):x&&bc(v,x)?(l(x,v,n,r,i,p,s,o,a),p.resolve(!0)):(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0&&p.resolve()));else if(x&&bc(v,x))l(x,v,n,r,i,p,s,o,a),yp(p,v);else if(fm(e,"onPending"),p.pendingBranch=v,v.shapeFlag&512?p.pendingId=v.component.suspenseId:p.pendingId=W2++,l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0)p.resolve();else{const{timeout:D,pendingId:j}=p;D>0?setTimeout(()=>{p.pendingId===j&&p.fallback(g)},D):D===0&&p.fallback(g)}}function qS(t,e,n,r,i,s,o,a,l,c,d=!1){const{p,m:v,um:g,n:x,o:{parentNode:E,remove:k}}=c;let A;const D=XO(t);D&&e&&e.pendingBranch&&(A=e.pendingId,e.deps++);const j=t.props?Ev(t.props.timeout):void 0,Y=s,te={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:W2++,timeout:typeof j=="number"?j:-1,activeBranch:null,pendingBranch:null,isInFallback:!d,isHydrating:d,isUnmounted:!1,effects:[],resolve(ge=!1,pe=!1){const{vnode:N,activeBranch:$,pendingBranch:Z,pendingId:B,effects:I,parentComponent:R,container:z}=te;let U=!1;te.isHydrating?te.isHydrating=!1:ge||(U=$&&Z.transition&&Z.transition.mode==="out-in",U&&($.transition.afterLeave=()=>{B===te.pendingId&&(v(Z,z,s===Y?x($):s,0),am(I))}),$&&(E($.el)===z&&(s=x($)),g($,R,te,!0)),U||v(Z,z,s,0)),yp(te,Z),te.pendingBranch=null,te.isInFallback=!1;let V=te.parent,re=!1;for(;V;){if(V.pendingBranch){V.effects.push(...I),re=!0;break}V=V.parent}!re&&!U&&am(I),te.effects=[],D&&e&&e.pendingBranch&&A===e.pendingId&&(e.deps--,e.deps===0&&!pe&&e.resolve()),fm(N,"onResolve")},fallback(ge){if(!te.pendingBranch)return;const{vnode:pe,activeBranch:N,parentComponent:$,container:Z,namespace:B}=te;fm(pe,"onFallback");const I=x(N),R=()=>{te.isInFallback&&(p(null,ge,Z,I,$,null,B,a,l),yp(te,ge))},z=ge.transition&&ge.transition.mode==="out-in";z&&(N.transition.afterLeave=R),te.isInFallback=!0,g(N,$,null,!0),z||R()},move(ge,pe,N){te.activeBranch&&v(te.activeBranch,ge,pe,N),te.container=ge},next(){return te.activeBranch&&x(te.activeBranch)},registerDep(ge,pe,N){const $=!!te.pendingBranch;$&&te.deps++;const Z=ge.vnode.el;ge.asyncDep.catch(B=>{Cf(B,ge,0)}).then(B=>{if(ge.isUnmounted||te.isUnmounted||te.pendingId!==ge.suspenseId)return;ge.asyncResolved=!0;const{vnode:I}=ge;Z2(ge,B,!1),Z&&(I.el=Z);const R=!Z&&ge.subTree.el;pe(ge,I,E(Z||ge.subTree.el),Z?null:x(ge.subTree),te,o,N),R&&k(R),ky(ge,I.el),$&&--te.deps===0&&te.resolve()})},unmount(ge,pe){te.isUnmounted=!0,te.activeBranch&&g(te.activeBranch,n,ge,pe),te.pendingBranch&&g(te.pendingBranch,n,ge,pe)}};return te}function ZO(t,e,n,r,i,s,o,a,l){const c=e.suspense=qS(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),d=l(t,c.pendingBranch=e.ssContent,n,c,s,o);return c.deps===0&&c.resolve(!1,!0),d}function KO(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=Wx(r?n.default:n),t.ssFallback=r?Wx(n.fallback):mi(oa)}function Wx(t){let e;if(Nr(t)){const n=yf&&t._c;n&&(t._d=!1,Oe()),t=t(),n&&(t._d=!0,e=ml,ZS())}return ur(t)&&(t=$O(t)),t=Ql(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function YS(t,e){e&&e.pendingBranch?ur(t)?e.effects.push(...t):e.effects.push(t):am(t)}function yp(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,ky(r,i))}function XO(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const Sn=Symbol.for("v-fgt"),yd=Symbol.for("v-txt"),oa=Symbol.for("v-cmt"),df=Symbol.for("v-stc"),zg=[];let ml=null;function Oe(t=!1){zg.push(ml=t?null:[])}function ZS(){zg.pop(),ml=zg[zg.length-1]||null}let yf=1;function G2(t,e=!1){yf+=t,t<0&&ml&&e&&(ml.hasOnce=!0)}function KS(t){return t.dynamicChildren=yf>0?ml||fp:null,ZS(),yf>0&&ml&&ml.push(t),t}function Be(t,e,n,r,i,s){return KS(S(t,e,n,r,i,s,!0))}function Ca(t,e,n,r,i){return KS(mi(t,e,n,r,i,!0))}function Rh(t){return t?t.__v_isVNode===!0:!1}function bc(t,e){return t.type===e.type&&t.key===e.key}function JO(t){}const XS=({key:t})=>t??null,J0=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ts(t)||go(t)||Nr(t)?{i:pa,r:t,k:e,f:!!n}:t:null);function S(t,e=null,n=null,r=0,i=null,s=t===Sn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&XS(e),ref:e&&J0(e),scopeId:Sy,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:pa};return a?(A_(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=Ts(n)?8:16),yf>0&&!o&&ml&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&ml.push(l),l}const mi=QO;function QO(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===xS)&&(t=oa),Rh(t)){const a=th(t,e,!0);return n&&A_(a,n),yf>0&&!s&&ml&&(a.shapeFlag&6?ml[ml.indexOf(t)]=a:ml.push(a)),a.patchFlag=-2,a}if(oN(t)&&(t=t.__vccOpts),e){e=JS(e);let{class:a,style:l}=e;a&&!Ts(a)&&(e.class=Di(a)),fs(l)&&(xy(l)&&!ur(l)&&(l=xs({},l)),e.style=ru(l))}const o=Ts(t)?1:Ov(t)?128:oS(t)?64:fs(t)?4:Nr(t)?2:0;return S(t,e,n,r,i,o,s,!0)}function JS(t){return t?xy(t)||kS(t)?xs({},t):t:null}function th(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,c=e?QS(i||{},e):i,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&XS(c),ref:e&&e.ref?n&&s?ur(s)?s.concat(J0(e)):[s,J0(e)]:J0(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Sn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&th(t.ssContent),ssFallback:t.ssFallback&&th(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Bh(d,l.clone(d)),d}function Kr(t=" ",e=0){return mi(yd,null,t,e)}function nu(t,e){const n=mi(df,null,t);return n.staticCount=e,n}function Jt(t="",e=!1){return e?(Oe(),Ca(oa,null,t)):mi(oa,null,t)}function Ql(t){return t==null||typeof t=="boolean"?mi(oa):ur(t)?mi(Sn,null,t.slice()):Rh(t)?od(t):mi(yd,null,String(t))}function od(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:th(t)}function A_(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ur(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),A_(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!kS(e)?e._ctx=pa:i===3&&pa&&(pa.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Nr(e)?(e={default:e,_ctx:pa},n=32):(e=String(e),r&64?(n=16,e=[Kr(e)]):n=8);t.children=e,t.shapeFlag|=n}function QS(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Di([e.class,r.class]));else if(i==="style")e.style=ru([e.style,r.style]);else if(Pm(i)){const s=e[i],o=r[i];o&&s!==o&&!(ur(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Jl(t,e,n,r=null){Xu(t,e,7,[n,r])}const eN=CS();let tN=0;function eC(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||eN,s={uid:tN++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new c_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:TS(r,i),emitsOptions:GS(r,i),emit:null,emitted:null,propsDefaults:ji,inheritAttrs:r.inheritAttrs,ctx:ji,data:ji,props:ji,attrs:ji,slots:ji,refs:ji,setupState:ji,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=zO.bind(null,s),t.ce&&t.ce(s),s}let fa=null;const ec=()=>fa||pa;let Nv,q2;{const t=my(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Nv=e("__VUE_INSTANCE_SETTERS__",n=>fa=n),q2=e("__VUE_SSR_SETTERS__",n=>Cp=n)}const bf=t=>{const e=fa;return Nv(t),t.scope.on(),()=>{t.scope.off(),Nv(e)}},Y2=()=>{fa&&fa.scope.off(),Nv(null)};function tC(t){return t.vnode.shapeFlag&4}let Cp=!1;function nC(t,e=!1,n=!1){e&&q2(e);const{props:r,children:i}=t.vnode,s=tC(t);AO(t,r,s,e),NO(t,i,n);const o=s?nN(t,e):void 0;return e&&q2(!1),o}function nN(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,$2);const{setup:r}=n;if(r){kd();const i=t.setupContext=r.length>1?iC(t):null,s=bf(t),o=Fp(r,t,0,[t.props,i]),a=l_(o);if(Ad(),s(),(a||t.sp)&&!vd(t)&&x_(t),a){if(o.then(Y2,Y2),e)return o.then(l=>{Z2(t,l,e)}).catch(l=>{Cf(l,t,0)});t.asyncDep=o}else Z2(t,o,e)}else rC(t,e)}function Z2(t,e,n){Nr(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:fs(e)&&(t.setupState=y_(e)),rC(t,n)}let Iv,K2;function rN(t){Iv=t,K2=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,uO))}}const iN=()=>!Iv;function rC(t,e,n){const r=t.type;if(!t.render){if(!e&&Iv&&!r.render){const i=r.template||P_(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=xs(xs({isCustomElement:s,delimiters:a},o),l);r.render=Iv(i,c)}}t.render=r.render||Zu,K2&&K2(t)}{const i=bf(t);kd();try{LO(t)}finally{Ad(),i()}}}const sN={get(t,e){return hl(t,"get",""),t[e]}};function iC(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,sN),slots:t.slots,emit:t.emit,expose:e}}function Tm(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(y_(Ly(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Fg)return Fg[n](t)},has(e,n){return n in e||n in Fg}})):t.proxy}function X2(t,e=!0){return Nr(t)?t.displayName||t.name:t.name||e&&t.__name}function oN(t){return Nr(t)&&"__vccOpts"in t}const Qn=(t,e)=>x8(t,e,Cp);function Ay(t,e,n){const r=arguments.length;return r===2?fs(e)&&!ur(e)?Rh(e)?mi(t,null,[e]):mi(t,e):mi(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Rh(n)&&(n=[n]),mi(t,e,n))}function aN(){}function lN(t,e,n,r){const i=n[r];if(i&&sC(i,t))return i;const s=e();return s.memo=t.slice(),s.cacheIndex=r,n[r]=s}function sC(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(Nl(n[r],e[r]))return!1;return yf>0&&ml&&ml.push(t),!0}const oC="3.5.13",uN=Zu,cN=T8,hN=ip,dN=iS,fN={createComponentInstance:eC,setupComponent:nC,renderComponentRoot:X0,setCurrentRenderingInstance:um,isVNode:Rh,normalizeVNode:Ql,getComponentPublicInstance:Tm,ensureValidVNode:E_,pushWarningContext:P8,popWarningContext:M8},pN=fN,gN=null,mN=null,vN=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let J2;const Gx=typeof window<"u"&&window.trustedTypes;if(Gx)try{J2=Gx.createPolicy("vue",{createHTML:t=>t})}catch{}const aC=J2?t=>J2.createHTML(t):t=>t,yN="http://www.w3.org/2000/svg",bN="http://www.w3.org/1998/Math/MathML",Ch=typeof document<"u"?document:null,qx=Ch&&Ch.createElement("template"),_N={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Ch.createElementNS(yN,t):e==="mathml"?Ch.createElementNS(bN,t):n?Ch.createElement(t,{is:n}):Ch.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Ch.createTextNode(t),createComment:t=>Ch.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ch.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{qx.innerHTML=aC(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=qx.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Zh="transition",Jp="animation",Ep=Symbol("_vtc"),lC={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},uC=xs({},w_,lC),wN=t=>(t.displayName="Transition",t.props=uC,t),Q2=wN((t,{slots:e})=>Ay(hS,cC(t),e)),Hd=(t,e=[])=>{ur(t)?t.forEach(n=>n(...e)):t&&t(...e)},Yx=t=>t?ur(t)?t.some(e=>e.length>1):t.length>1:!1;function cC(t){const e={};for(const I in t)I in lC||(e[I]=t[I]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:d=a,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:v=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=t,x=xN(i),E=x&&x[0],k=x&&x[1],{onBeforeEnter:A,onEnter:D,onEnterCancelled:j,onLeave:Y,onLeaveCancelled:te,onBeforeAppear:ge=A,onAppear:pe=D,onAppearCancelled:N=j}=e,$=(I,R,z,U)=>{I._enterCancelled=U,td(I,R?d:a),td(I,R?c:o),z&&z()},Z=(I,R)=>{I._isLeaving=!1,td(I,p),td(I,g),td(I,v),R&&R()},B=I=>(R,z)=>{const U=I?pe:D,V=()=>$(R,I,z);Hd(U,[R,V]),Zx(()=>{td(R,I?l:s),jc(R,I?d:a),Yx(U)||Kx(R,r,E,V)})};return xs(e,{onBeforeEnter(I){Hd(A,[I]),jc(I,s),jc(I,o)},onBeforeAppear(I){Hd(ge,[I]),jc(I,l),jc(I,c)},onEnter:B(!1),onAppear:B(!0),onLeave(I,R){I._isLeaving=!0;const z=()=>Z(I,R);jc(I,p),I._enterCancelled?(jc(I,v),eb()):(eb(),jc(I,v)),Zx(()=>{I._isLeaving&&(td(I,p),jc(I,g),Yx(Y)||Kx(I,r,k,z))}),Hd(Y,[I,z])},onEnterCancelled(I){$(I,!1,void 0,!0),Hd(j,[I])},onAppearCancelled(I){$(I,!0,void 0,!0),Hd(N,[I])},onLeaveCancelled(I){Z(I),Hd(te,[I])}})}function xN(t){if(t==null)return null;if(fs(t))return[F1(t.enter),F1(t.leave)];{const e=F1(t);return[e,e]}}function F1(t){return Ev(t)}function jc(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Ep]||(t[Ep]=new Set)).add(e)}function td(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Ep];n&&(n.delete(e),n.size||(t[Ep]=void 0))}function Zx(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let LN=0;function Kx(t,e,n,r){const i=t._endId=++LN,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=hC(t,e);if(!o)return r();const c=o+"end";let d=0;const p=()=>{t.removeEventListener(c,v),s()},v=g=>{g.target===t&&++d>=l&&p()};setTimeout(()=>{d<l&&p()},a+1),t.addEventListener(c,v)}function hC(t,e){const n=window.getComputedStyle(t),r=x=>(n[x]||"").split(", "),i=r(`${Zh}Delay`),s=r(`${Zh}Duration`),o=Xx(i,s),a=r(`${Jp}Delay`),l=r(`${Jp}Duration`),c=Xx(a,l);let d=null,p=0,v=0;e===Zh?o>0&&(d=Zh,p=o,v=s.length):e===Jp?c>0&&(d=Jp,p=c,v=l.length):(p=Math.max(o,c),d=p>0?o>c?Zh:Jp:null,v=d?d===Zh?s.length:l.length:0);const g=d===Zh&&/\b(transform|all)(,|$)/.test(r(`${Zh}Property`).toString());return{type:d,timeout:p,propCount:v,hasTransform:g}}function Xx(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Jx(n)+Jx(t[r])))}function Jx(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function eb(){return document.body.offsetHeight}function SN(t,e,n){const r=t[Ep];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Bv=Symbol("_vod"),dC=Symbol("_vsh"),Ty={beforeMount(t,{value:e},{transition:n}){t[Bv]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Qp(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Qp(t,!0),r.enter(t)):r.leave(t,()=>{Qp(t,!1)}):Qp(t,e))},beforeUnmount(t,{value:e}){Qp(t,e)}};function Qp(t,e){t.style.display=e?t[Bv]:"none",t[dC]=!e}function CN(){Ty.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const fC=Symbol("");function EN(t){const e=ec();if(!e)return;const n=e.ut=(i=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>Rv(s,i))},r=()=>{const i=t(e.proxy);e.ce?Rv(e.ce,i):tb(e.subTree,i),n(i)};L_(()=>{am(r)}),mo(()=>{ki(r,Zu,{flush:"post"});const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),Ju(()=>i.disconnect())})}function tb(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{tb(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)Rv(t.el,e);else if(t.type===Sn)t.children.forEach(n=>tb(n,e));else if(t.type===df){let{el:n,anchor:r}=t;for(;n&&(Rv(n,e),n!==r);)n=n.nextSibling}}function Rv(t,e){if(t.nodeType===1){const n=t.style;let r="";for(const i in e)n.setProperty(`--${i}`,e[i]),r+=`--${i}: ${e[i]};`;n[fC]=r}}const PN=/(^|;)\s*display\s*:/;function MN(t,e,n){const r=t.style,i=Ts(n);let s=!1;if(n&&!i){if(e)if(Ts(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Q0(r,a,"")}else for(const o in e)n[o]==null&&Q0(r,o,"");for(const o in n)o==="display"&&(s=!0),Q0(r,o,n[o])}else if(i){if(e!==n){const o=r[fC];o&&(n+=";"+o),r.cssText=n,s=PN.test(n)}}else e&&t.removeAttribute("style");Bv in t&&(t[Bv]=s?r.display:"",t[dC]&&(r.display="none"))}const Qx=/\s*!important$/;function Q0(t,e,n){if(ur(n))n.forEach(r=>Q0(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=kN(t,e);Qx.test(n)?t.setProperty(eu(r),n.replace(Qx,""),"important"):t[r]=n}}const e4=["Webkit","Moz","ms"],j1={};function kN(t,e){const n=j1[e];if(n)return n;let r=qa(e);if(r!=="filter"&&r in t)return j1[e]=r;r=Mm(r);for(let i=0;i<e4.length;i++){const s=e4[i]+r;if(s in t)return j1[e]=s}return e}const t4="http://www.w3.org/1999/xlink";function n4(t,e,n,r,i,s=UD(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(t4,e.slice(6,e.length)):t.setAttributeNS(t4,e,n):n==null||s&&!AL(n)?t.removeAttribute(e):t.setAttribute(e,s?"":Sc(n)?String(n):n)}function r4(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?aC(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=AL(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function kh(t,e,n,r){t.addEventListener(e,n,r)}function AN(t,e,n,r){t.removeEventListener(e,n,r)}const i4=Symbol("_vei");function TN(t,e,n,r,i=null){const s=t[i4]||(t[i4]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=DN(e);if(r){const c=s[e]=IN(r,i);kh(t,a,c,l)}else o&&(AN(t,a,o,l),s[e]=void 0)}}const s4=/(?:Once|Passive|Capture)$/;function DN(t){let e;if(s4.test(t)){e={};let r;for(;r=t.match(s4);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):eu(t.slice(2)),e]}let z1=0;const ON=Promise.resolve(),NN=()=>z1||(ON.then(()=>z1=0),z1=Date.now());function IN(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Xu(BN(r,n.value),e,5,[r])};return n.value=t,n.attached=NN(),n}function BN(t,e){if(ur(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const o4=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,RN=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?SN(t,r,o):e==="style"?MN(t,n,r):Pm(e)?o_(e)||TN(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):FN(t,e,r,o))?(r4(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&n4(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ts(r))?r4(t,qa(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),n4(t,e,r,o))};function FN(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&o4(e)&&Nr(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return o4(e)&&Ts(n)?!1:e in t}const a4={};/*! #__NO_SIDE_EFFECTS__ */function pC(t,e,n){const r=js(t,e);py(r)&&xs(r,e);class i extends Dy{constructor(o){super(r,o,n)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const jN=(t,e)=>pC(t,e,SC),zN=typeof HTMLElement<"u"?HTMLElement:class{};class Dy extends zN{constructor(e,n={},r=jv){super(),this._def=e,this._props=n,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==jv?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof Dy){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,sa(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=r;let a;if(s&&!ur(s))for(const l in s){const c=s[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=Ev(this._props[l])),(a||(a=Object.create(null)))[qa(l)]=!0)}this._numberProps=a,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(r=>e(this._def=r,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const r in n)es(this,r)||Object.defineProperty(this,r,{get:()=>Yn(n[r])})}_resolveProps(e){const{props:n}=e,r=ur(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(qa))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const n=this.hasAttribute(e);let r=n?this.getAttribute(e):a4;const i=qa(e);n&&this._numberProps&&this._numberProps[i]&&(r=Ev(r)),this._setProp(i,r,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,n,r=!0,i=!1){if(n!==this._props[e]&&(n===a4?delete this._props[e]:(this._props[e]=n,e==="key"&&this._app&&(this._app._ceVNode.key=n)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),n===!0?this.setAttribute(eu(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(eu(e),n+""):n||this.removeAttribute(eu(e)),s&&s.observe(this,{attributes:!0})}}_update(){LC(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const n=mi(this._def,xs(e,this._props));return this._instance||(n.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,py(o[0])?xs({detail:o},o[0]):{detail:o}))};r.emit=(s,...o)=>{i(s,o),eu(s)!==s&&i(eu(s),o)},this._setParent()}),n}_applyStyles(e,n){if(!e)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const r=this._nonce;for(let i=e.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=e[i],this.shadowRoot.prepend(s)}}_parseSlots(){const e=this._slots={};let n;for(;n=this.firstChild;){const r=n.nodeType===1&&n.getAttribute("slot")||"default";(e[r]||(e[r]=[])).push(n),this.removeChild(n)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),n=this._instance.type.__scopeId;for(let r=0;r<e.length;r++){const i=e[r],s=i.getAttribute("name")||"default",o=this._slots[s],a=i.parentNode;if(o)for(const l of o){if(n&&l.nodeType===1){const c=n+"-s",d=document.createTreeWalker(l,1);l.setAttribute(c,"");let p;for(;p=d.nextNode();)p.setAttribute(c,"")}a.insertBefore(l,i)}else for(;i.firstChild;)a.insertBefore(i.firstChild,i);a.removeChild(i)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function gC(t){const e=ec(),n=e&&e.ce;return n||null}function $N(){const t=gC();return t&&t.shadowRoot}function VN(t="$style"){{const e=ec();if(!e)return ji;const n=e.type.__cssModules;if(!n)return ji;const r=n[t];return r||ji}}const mC=new WeakMap,vC=new WeakMap,Fv=Symbol("_moveCb"),l4=Symbol("_enterCb"),UN=t=>(delete t.props.mode,t),HN=UN({name:"TransitionGroup",props:xs({},uC,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=ec(),r=__();let i,s;return Py(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!ZN(i[0].el,n.vnode.el,o))return;i.forEach(GN),i.forEach(qN);const a=i.filter(YN);eb(),a.forEach(l=>{const c=l.el,d=c.style;jc(c,o),d.transform=d.webkitTransform=d.transitionDuration="";const p=c[Fv]=v=>{v&&v.target!==c||(!v||/transform$/.test(v.propertyName))&&(c.removeEventListener("transitionend",p),c[Fv]=null,td(c,o))};c.addEventListener("transitionend",p)})}),()=>{const o=Fi(t),a=cC(o);let l=o.tag||Sn;if(i=[],s)for(let c=0;c<s.length;c++){const d=s[c];d.el&&d.el instanceof Element&&(i.push(d),Bh(d,Sp(d,a,r,n)),mC.set(d,d.el.getBoundingClientRect()))}s=e.default?Cy(e.default()):[];for(let c=0;c<s.length;c++){const d=s[c];d.key!=null&&Bh(d,Sp(d,a,r,n))}return mi(l,null,s)}}}),WN=HN;function GN(t){const e=t.el;e[Fv]&&e[Fv](),e[l4]&&e[l4]()}function qN(t){vC.set(t,t.el.getBoundingClientRect())}function YN(t){const e=mC.get(t),n=vC.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function ZN(t,e,n){const r=t.cloneNode(),i=t[Ep];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=hC(r);return s.removeChild(r),o}const Ld=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ur(e)?n=>mp(e,n):e};function KN(t){t.target.composing=!0}function u4(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ku=Symbol("_assign"),zr={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Ku]=Ld(i);const s=r||i.props&&i.props.type==="number";kh(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=Cv(a)),t[Ku](a)}),n&&kh(t,"change",()=>{t.value=t.value.trim()}),e||(kh(t,"compositionstart",KN),kh(t,"compositionend",u4),kh(t,"change",u4))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(t[Ku]=Ld(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?Cv(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===l)||(t.value=l))}},Tl={deep:!0,created(t,e,n){t[Ku]=Ld(n),kh(t,"change",()=>{const r=t._modelValue,i=Pp(t),s=t.checked,o=t[Ku];if(ur(r)){const a=vy(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(Sf(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(yC(t,s))})},mounted:c4,beforeUpdate(t,e,n){t[Ku]=Ld(n),c4(t,e,n)}};function c4(t,{value:e,oldValue:n},r){t._modelValue=e;let i;if(ur(e))i=vy(e,r.props.value)>-1;else if(Sf(e))i=e.has(r.props.value);else{if(e===n)return;i=wd(e,yC(t,!0))}t.checked!==i&&(t.checked=i)}const T_={created(t,{value:e},n){t.checked=wd(e,n.props.value),t[Ku]=Ld(n),kh(t,"change",()=>{t[Ku](Pp(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Ku]=Ld(r),e!==n&&(t.checked=wd(e,r.props.value))}},ns={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=Sf(e);kh(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Cv(Pp(o)):Pp(o));t[Ku](t.multiple?i?new Set(s):s:s[0]),t._assigning=!0,sa(()=>{t._assigning=!1})}),t[Ku]=Ld(r)},mounted(t,{value:e}){h4(t,e)},beforeUpdate(t,e,n){t[Ku]=Ld(n)},updated(t,{value:e}){t._assigning||h4(t,e)}};function h4(t,e){const n=t.multiple,r=ur(e);if(!(n&&!r&&!Sf(e))){for(let i=0,s=t.options.length;i<s;i++){const o=t.options[i],a=Pp(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=vy(e,a)>-1}else o.selected=e.has(a);else if(wd(Pp(o),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Pp(t){return"_value"in t?t._value:t.value}function yC(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const D_={created(t,e,n){y0(t,e,n,null,"created")},mounted(t,e,n){y0(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){y0(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){y0(t,e,n,r,"updated")}};function bC(t,e){switch(t){case"SELECT":return ns;case"TEXTAREA":return zr;default:switch(e){case"checkbox":return Tl;case"radio":return T_;default:return zr}}}function y0(t,e,n,r,i){const o=bC(t.tagName,n.props&&n.props.type)[i];o&&o(t,e,n,r)}function XN(){zr.getSSRProps=({value:t})=>({value:t}),T_.getSSRProps=({value:t},e)=>{if(e.props&&wd(e.props.value,t))return{checked:!0}},Tl.getSSRProps=({value:t},e)=>{if(ur(t)){if(e.props&&vy(t,e.props.value)>-1)return{checked:!0}}else if(Sf(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},D_.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=bC(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const JN=["ctrl","shift","alt","meta"],QN={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>JN.some(n=>t[`${n}Key`]&&!e.includes(n))},Cu=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=QN[e[o]];if(a&&a(i,e))return}return t(i,...s)})},eI={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},tI=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=eu(i.key);if(e.some(o=>o===s||eI[o]===s))return t(i)})},_C=xs({patchProp:RN},_N);let $g,d4=!1;function wC(){return $g||($g=BS(_C))}function xC(){return $g=d4?$g:RS(_C),d4=!0,$g}const LC=(...t)=>{wC().render(...t)},nI=(...t)=>{xC().hydrate(...t)},jv=(...t)=>{const e=wC().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=EC(r);if(!i)return;const s=e._component;!Nr(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,CC(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e},SC=(...t)=>{const e=xC().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=EC(r);if(i)return n(i,!0,CC(i))},e};function CC(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function EC(t){return Ts(t)?document.querySelector(t):t}let f4=!1;const rI=()=>{f4||(f4=!0,XN(),CN())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const iI=()=>{},sI=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:hS,BaseTransitionPropsValidators:w_,Comment:oa,DeprecationTypes:vN,EffectScope:c_,ErrorCodes:A8,ErrorTypeStrings:cN,Fragment:Sn,KeepAlive:tO,ReactiveEffect:im,Static:df,Suspense:GO,Teleport:Z0,Text:yd,TrackOpTypes:L8,Transition:Q2,TransitionGroup:WN,TriggerOpTypes:S8,VueElement:Dy,assertNumber:k8,callWithAsyncErrorHandling:Xu,callWithErrorHandling:Fp,camelize:qa,capitalize:Mm,cloneVNode:th,compatUtils:mN,compile:iI,computed:Qn,createApp:jv,createBlock:Ca,createCommentVNode:Jt,createElementBlock:Be,createElementVNode:S,createHydrationRenderer:RS,createPropsRestProxy:wO,createRenderer:BS,createSSRApp:SC,createSlots:oO,createStaticVNode:nu,createTextVNode:Kr,createVNode:mi,customRef:KL,defineAsyncComponent:Q8,defineComponent:js,defineCustomElement:pC,defineEmits:hO,defineExpose:dO,defineModel:gO,defineOptions:fO,defineProps:cO,defineSSRCustomElement:jN,defineSlots:pO,devtools:hN,effect:GD,effectScope:h_,getCurrentInstance:ec,getCurrentScope:d_,getCurrentWatcher:C8,getTransitionRawChildren:Cy,guardReactiveProps:JS,h:Ay,handleError:Cf,hasInjectionContext:ES,hydrate:nI,hydrateOnIdle:q8,hydrateOnInteraction:X8,hydrateOnMediaQuery:K8,hydrateOnVisible:Z8,initCustomFormatter:aN,initDirectivesForSSR:rI,inject:Mu,isMemoSame:sC,isProxy:xy,isReactive:Xc,isReadonly:xd,isRef:go,isRuntimeOnly:iN,isShallow:Pu,isVNode:Rh,markRaw:Ly,mergeDefaults:bO,mergeModels:_O,mergeProps:QS,nextTick:sa,normalizeClass:Di,normalizeProps:$D,normalizeStyle:ru,onActivated:fS,onBeforeMount:mS,onBeforeUnmount:Td,onBeforeUpdate:L_,onDeactivated:pS,onErrorCaptured:_S,onMounted:mo,onRenderTracked:bS,onRenderTriggered:yS,onScopeDispose:OL,onServerPrefetch:vS,onUnmounted:Ju,onUpdated:Py,onWatcherCleanup:QL,openBlock:Oe,popScopeId:I8,provide:jg,proxyRefs:y_,pushScopeId:N8,queuePostFlushCb:am,reactive:ou,readonly:mc,ref:St,registerRuntimeCompiler:rN,render:LC,renderList:sr,renderSlot:aO,resolveComponent:wS,resolveDirective:sO,resolveDynamicComponent:iO,resolveFilter:gN,resolveTransitionHooks:Sp,setBlockTracking:G2,setDevtoolsHook:dN,setTransitionHooks:Bh,shallowReactive:m_,shallowReadonly:d8,shallowRef:v_,ssrContextKey:$S,ssrUtils:pN,stop:qD,toDisplayString:kt,toHandlerKey:Ng,toHandlers:lO,toRaw:Fi,toRef:_8,toRefs:XL,toValue:g8,transformVNodeArgs:JO,triggerRef:p8,unref:Yn,useAttrs:yO,useCssModule:VN,useCssVars:EN,useHost:gC,useId:j8,useModel:jO,useSSRContext:VS,useShadowRoot:$N,useSlots:vO,useTemplateRef:z8,useTransitionState:__,vModelCheckbox:Tl,vModelDynamic:D_,vModelRadio:T_,vModelSelect:ns,vModelText:zr,vShow:Ty,version:oC,warn:uN,watch:ki,watchEffect:dm,watchPostEffect:RO,watchSyncEffect:US,withAsyncContext:xO,withCtx:Yu,withDefaults:mO,withDirectives:Tn,withKeys:tI,withMemo:lN,withModifiers:Cu,withScopeId:B8},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let PC;const Oy=t=>PC=t,MC=Symbol();function nb(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Vg;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Vg||(Vg={}));function oI(){const t=h_(!0),e=t.run(()=>St({}));let n=[],r=[];const i=Ly({install(s){Oy(i),i._a=s,s.provide(MC,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const kC=()=>{};function p4(t,e,n,r=kC){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&d_()&&OL(i),i}function Yf(t,...e){t.slice().forEach(n=>{n(...e)})}const aI=t=>t(),g4=Symbol(),$1=Symbol();function rb(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];nb(i)&&nb(r)&&t.hasOwnProperty(n)&&!go(r)&&!Xc(r)?t[n]=rb(i,r):t[n]=r}return t}const lI=Symbol();function uI(t){return!nb(t)||!t.hasOwnProperty(lI)}const{assign:nd}=Object;function cI(t){return!!(go(t)&&t.effect)}function hI(t,e,n,r){const{state:i,actions:s,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=i?i():{});const d=XL(n.state.value[t]);return nd(d,s,Object.keys(o||{}).reduce((p,v)=>(p[v]=Ly(Qn(()=>{Oy(n);const g=n._s.get(t);return o[v].call(g,g)})),p),{}))}return l=AC(t,c,e,n,r,!0),l}function AC(t,e,n={},r,i,s){let o;const a=nd({actions:{}},n),l={deep:!0};let c,d,p=[],v=[],g;const x=r.state.value[t];!s&&!x&&(r.state.value[t]={}),St({});let E;function k(N){let $;c=d=!1,typeof N=="function"?(N(r.state.value[t]),$={type:Vg.patchFunction,storeId:t,events:g}):(rb(r.state.value[t],N),$={type:Vg.patchObject,payload:N,storeId:t,events:g});const Z=E=Symbol();sa().then(()=>{E===Z&&(c=!0)}),d=!0,Yf(p,$,r.state.value[t])}const A=s?function(){const{state:$}=n,Z=$?$():{};this.$patch(B=>{nd(B,Z)})}:kC;function D(){o.stop(),p=[],v=[],r._s.delete(t)}const j=(N,$="")=>{if(g4 in N)return N[$1]=$,N;const Z=function(){Oy(r);const B=Array.from(arguments),I=[],R=[];function z(re){I.push(re)}function U(re){R.push(re)}Yf(v,{args:B,name:Z[$1],store:te,after:z,onError:U});let V;try{V=N.apply(this&&this.$id===t?this:te,B)}catch(re){throw Yf(R,re),re}return V instanceof Promise?V.then(re=>(Yf(I,re),re)).catch(re=>(Yf(R,re),Promise.reject(re))):(Yf(I,V),V)};return Z[g4]=!0,Z[$1]=$,Z},Y={_p:r,$id:t,$onAction:p4.bind(null,v),$patch:k,$reset:A,$subscribe(N,$={}){const Z=p4(p,N,$.detached,()=>B()),B=o.run(()=>ki(()=>r.state.value[t],I=>{($.flush==="sync"?d:c)&&N({storeId:t,type:Vg.direct,events:g},I)},nd({},l,$)));return Z},$dispose:D},te=ou(Y);r._s.set(t,te);const pe=(r._a&&r._a.runWithContext||aI)(()=>r._e.run(()=>(o=h_()).run(()=>e({action:j}))));for(const N in pe){const $=pe[N];if(go($)&&!cI($)||Xc($))s||(x&&uI($)&&(go($)?$.value=x[N]:rb($,x[N])),r.state.value[t][N]=$);else if(typeof $=="function"){const Z=j($,N);pe[N]=Z,a.actions[N]=$}}return nd(te,pe),nd(Fi(te),pe),Object.defineProperty(te,"$state",{get:()=>r.state.value[t],set:N=>{k($=>{nd($,N)})}}),r._p.forEach(N=>{nd(te,o.run(()=>N({store:te,app:r._a,pinia:r,options:a})))}),x&&s&&n.hydrate&&n.hydrate(te.$state,x),c=!0,d=!0,te}/*! #__NO_SIDE_EFFECTS__ */function jp(t,e,n){let r,i;const s=typeof e=="function";typeof t=="string"?(r=t,i=s?n:e):(i=t,r=t.id);function o(a,l){const c=ES();return a=a||(c?Mu(MC,null):null),a&&Oy(a),a=PC,a._s.has(r)||(s?AC(r,e,i,a):hI(r,i,a)),a._s.get(r)}return o.$id=r,o}function TC(t,e){return function(){return t.apply(e,arguments)}}const{toString:dI}=Object.prototype,{getPrototypeOf:O_}=Object,Ny=(t=>e=>{const n=dI.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Pc=t=>(t=t.toLowerCase(),e=>Ny(e)===t),Iy=t=>e=>typeof e===t,{isArray:zp}=Array,pm=Iy("undefined");function fI(t){return t!==null&&!pm(t)&&t.constructor!==null&&!pm(t.constructor)&&ku(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const DC=Pc("ArrayBuffer");function pI(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&DC(t.buffer),e}const gI=Iy("string"),ku=Iy("function"),OC=Iy("number"),By=t=>t!==null&&typeof t=="object",mI=t=>t===!0||t===!1,ev=t=>{if(Ny(t)!=="object")return!1;const e=O_(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},vI=Pc("Date"),yI=Pc("File"),bI=Pc("Blob"),_I=Pc("FileList"),wI=t=>By(t)&&ku(t.pipe),xI=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ku(t.append)&&((e=Ny(t))==="formdata"||e==="object"&&ku(t.toString)&&t.toString()==="[object FormData]"))},LI=Pc("URLSearchParams"),[SI,CI,EI,PI]=["ReadableStream","Request","Response","Headers"].map(Pc),MI=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Dm(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),zp(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function NC(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const af=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,IC=t=>!pm(t)&&t!==af;function ib(){const{caseless:t}=IC(this)&&this||{},e={},n=(r,i)=>{const s=t&&NC(e,i)||i;ev(e[s])&&ev(r)?e[s]=ib(e[s],r):ev(r)?e[s]=ib({},r):zp(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Dm(arguments[r],n);return e}const kI=(t,e,n,{allOwnKeys:r}={})=>(Dm(e,(i,s)=>{n&&ku(i)?t[s]=TC(i,n):t[s]=i},{allOwnKeys:r}),t),AI=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),TI=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},DI=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&O_(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},OI=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},NI=t=>{if(!t)return null;if(zp(t))return t;let e=t.length;if(!OC(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},II=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&O_(Uint8Array)),BI=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},RI=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},FI=Pc("HTMLFormElement"),jI=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),m4=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),zI=Pc("RegExp"),BC=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Dm(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},$I=t=>{BC(t,(e,n)=>{if(ku(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(ku(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},VI=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return zp(t)?r(t):r(String(t).split(e)),n},UI=()=>{},HI=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function WI(t){return!!(t&&ku(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const GI=t=>{const e=new Array(10),n=(r,i)=>{if(By(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=zp(r)?[]:{};return Dm(r,(o,a)=>{const l=n(o,i+1);!pm(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},qI=Pc("AsyncFunction"),YI=t=>t&&(By(t)||ku(t))&&ku(t.then)&&ku(t.catch),RC=((t,e)=>t?setImmediate:e?((n,r)=>(af.addEventListener("message",({source:i,data:s})=>{i===af&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),af.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ku(af.postMessage)),ZI=typeof queueMicrotask<"u"?queueMicrotask.bind(af):typeof process<"u"&&process.nextTick||RC,Xt={isArray:zp,isArrayBuffer:DC,isBuffer:fI,isFormData:xI,isArrayBufferView:pI,isString:gI,isNumber:OC,isBoolean:mI,isObject:By,isPlainObject:ev,isReadableStream:SI,isRequest:CI,isResponse:EI,isHeaders:PI,isUndefined:pm,isDate:vI,isFile:yI,isBlob:bI,isRegExp:zI,isFunction:ku,isStream:wI,isURLSearchParams:LI,isTypedArray:II,isFileList:_I,forEach:Dm,merge:ib,extend:kI,trim:MI,stripBOM:AI,inherits:TI,toFlatObject:DI,kindOf:Ny,kindOfTest:Pc,endsWith:OI,toArray:NI,forEachEntry:BI,matchAll:RI,isHTMLForm:FI,hasOwnProperty:m4,hasOwnProp:m4,reduceDescriptors:BC,freezeMethods:$I,toObjectSet:VI,toCamelCase:jI,noop:UI,toFiniteNumber:HI,findKey:NC,global:af,isContextDefined:IC,isSpecCompliantForm:WI,toJSONObject:GI,isAsyncFn:qI,isThenable:YI,setImmediate:RC,asap:ZI};function oi(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Xt.inherits(oi,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Xt.toJSONObject(this.config),code:this.code,status:this.status}}});const FC=oi.prototype,jC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{jC[t]={value:t}});Object.defineProperties(oi,jC);Object.defineProperty(FC,"isAxiosError",{value:!0});oi.from=(t,e,n,r,i,s)=>{const o=Object.create(FC);return Xt.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),oi.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const KI=null;function sb(t){return Xt.isPlainObject(t)||Xt.isArray(t)}function zC(t){return Xt.endsWith(t,"[]")?t.slice(0,-2):t}function v4(t,e,n){return t?t.concat(e).map(function(i,s){return i=zC(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function XI(t){return Xt.isArray(t)&&!t.some(sb)}const JI=Xt.toFlatObject(Xt,{},null,function(e){return/^is[A-Z]/.test(e)});function Ry(t,e,n){if(!Xt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Xt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,k){return!Xt.isUndefined(k[E])});const r=n.metaTokens,i=n.visitor||d,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Xt.isSpecCompliantForm(e);if(!Xt.isFunction(i))throw new TypeError("visitor must be a function");function c(x){if(x===null)return"";if(Xt.isDate(x))return x.toISOString();if(!l&&Xt.isBlob(x))throw new oi("Blob is not supported. Use a Buffer instead.");return Xt.isArrayBuffer(x)||Xt.isTypedArray(x)?l&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function d(x,E,k){let A=x;if(x&&!k&&typeof x=="object"){if(Xt.endsWith(E,"{}"))E=r?E:E.slice(0,-2),x=JSON.stringify(x);else if(Xt.isArray(x)&&XI(x)||(Xt.isFileList(x)||Xt.endsWith(E,"[]"))&&(A=Xt.toArray(x)))return E=zC(E),A.forEach(function(j,Y){!(Xt.isUndefined(j)||j===null)&&e.append(o===!0?v4([E],Y,s):o===null?E:E+"[]",c(j))}),!1}return sb(x)?!0:(e.append(v4(k,E,s),c(x)),!1)}const p=[],v=Object.assign(JI,{defaultVisitor:d,convertValue:c,isVisitable:sb});function g(x,E){if(!Xt.isUndefined(x)){if(p.indexOf(x)!==-1)throw Error("Circular reference detected in "+E.join("."));p.push(x),Xt.forEach(x,function(A,D){(!(Xt.isUndefined(A)||A===null)&&i.call(e,A,Xt.isString(D)?D.trim():D,E,v))===!0&&g(A,E?E.concat(D):[D])}),p.pop()}}if(!Xt.isObject(t))throw new TypeError("data must be an object");return g(t),e}function y4(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function N_(t,e){this._pairs=[],t&&Ry(t,this,e)}const $C=N_.prototype;$C.append=function(e,n){this._pairs.push([e,n])};$C.toString=function(e){const n=e?function(r){return e.call(this,r,y4)}:y4;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function QI(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function VC(t,e,n){if(!e)return t;const r=n&&n.encode||QI;Xt.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Xt.isURLSearchParams(e)?e.toString():new N_(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class b4{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Xt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const UC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},e7=typeof URLSearchParams<"u"?URLSearchParams:N_,t7=typeof FormData<"u"?FormData:null,n7=typeof Blob<"u"?Blob:null,r7={isBrowser:!0,classes:{URLSearchParams:e7,FormData:t7,Blob:n7},protocols:["http","https","file","blob","url","data"]},I_=typeof window<"u"&&typeof document<"u",ob=typeof navigator=="object"&&navigator||void 0,i7=I_&&(!ob||["ReactNative","NativeScript","NS"].indexOf(ob.product)<0),s7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",o7=I_&&window.location.href||"http://localhost",a7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:I_,hasStandardBrowserEnv:i7,hasStandardBrowserWebWorkerEnv:s7,navigator:ob,origin:o7},Symbol.toStringTag,{value:"Module"})),fl={...a7,...r7};function l7(t,e){return Ry(t,new fl.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return fl.isNode&&Xt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function u7(t){return Xt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function c7(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function HC(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&Xt.isArray(i)?i.length:o,l?(Xt.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Xt.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Xt.isArray(i[o])&&(i[o]=c7(i[o])),!a)}if(Xt.isFormData(t)&&Xt.isFunction(t.entries)){const n={};return Xt.forEachEntry(t,(r,i)=>{e(u7(r),i,n,0)}),n}return null}function h7(t,e,n){if(Xt.isString(t))try{return(e||JSON.parse)(t),Xt.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Om={transitional:UC,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Xt.isObject(e);if(s&&Xt.isHTMLForm(e)&&(e=new FormData(e)),Xt.isFormData(e))return i?JSON.stringify(HC(e)):e;if(Xt.isArrayBuffer(e)||Xt.isBuffer(e)||Xt.isStream(e)||Xt.isFile(e)||Xt.isBlob(e)||Xt.isReadableStream(e))return e;if(Xt.isArrayBufferView(e))return e.buffer;if(Xt.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return l7(e,this.formSerializer).toString();if((a=Xt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ry(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),h7(e)):e}],transformResponse:[function(e){const n=this.transitional||Om.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Xt.isResponse(e)||Xt.isReadableStream(e))return e;if(e&&Xt.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?oi.from(a,oi.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fl.classes.FormData,Blob:fl.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Xt.forEach(["delete","get","head","post","put","patch"],t=>{Om.headers[t]={}});const d7=Xt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),f7=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&d7[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},_4=Symbol("internals");function eg(t){return t&&String(t).trim().toLowerCase()}function tv(t){return t===!1||t==null?t:Xt.isArray(t)?t.map(tv):String(t)}function p7(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const g7=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function V1(t,e,n,r,i){if(Xt.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Xt.isString(e)){if(Xt.isString(r))return e.indexOf(r)!==-1;if(Xt.isRegExp(r))return r.test(e)}}function m7(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function v7(t,e){const n=Xt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let iu=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const d=eg(l);if(!d)throw new Error("header name must be a non-empty string");const p=Xt.findKey(i,d);(!p||i[p]===void 0||c===!0||c===void 0&&i[p]!==!1)&&(i[p||l]=tv(a))}const o=(a,l)=>Xt.forEach(a,(c,d)=>s(c,d,l));if(Xt.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Xt.isString(e)&&(e=e.trim())&&!g7(e))o(f7(e),n);else if(Xt.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=eg(e),e){const r=Xt.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return p7(i);if(Xt.isFunction(n))return n.call(this,i,r);if(Xt.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=eg(e),e){const r=Xt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||V1(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=eg(o),o){const a=Xt.findKey(r,o);a&&(!n||V1(r,r[a],a,n))&&(delete r[a],i=!0)}}return Xt.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||V1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Xt.forEach(this,(i,s)=>{const o=Xt.findKey(r,s);if(o){n[o]=tv(i),delete n[s];return}const a=e?m7(s):String(s).trim();a!==s&&delete n[s],n[a]=tv(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Xt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Xt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[_4]=this[_4]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=eg(o);r[a]||(v7(i,o),r[a]=!0)}return Xt.isArray(e)?e.forEach(s):s(e),this}};iu.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Xt.reduceDescriptors(iu.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Xt.freezeMethods(iu);function U1(t,e){const n=this||Om,r=e||n,i=iu.from(r.headers);let s=r.data;return Xt.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function WC(t){return!!(t&&t.__CANCEL__)}function $p(t,e,n){oi.call(this,t??"canceled",oi.ERR_CANCELED,e,n),this.name="CanceledError"}Xt.inherits($p,oi,{__CANCEL__:!0});function GC(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new oi("Request failed with status code "+n.status,[oi.ERR_BAD_REQUEST,oi.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function y7(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function b7(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[s];o||(o=c),n[i]=l,r[i]=c;let p=s,v=0;for(;p!==i;)v+=n[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const g=d&&c-d;return g?Math.round(v*1e3/g):void 0}}function _7(t,e){let n=0,r=1e3/e,i,s;const o=(c,d=Date.now())=>{n=d,i=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const d=Date.now(),p=d-n;p>=r?o(c,d):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-p)))},()=>i&&o(i)]}const zv=(t,e,n=3)=>{let r=0;const i=b7(50,250);return _7(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),d=o<=a;r=o;const p={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&d?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(p)},n)},w4=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},x4=t=>(...e)=>Xt.asap(()=>t(...e)),w7=fl.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,fl.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(fl.origin),fl.navigator&&/(msie|trident)/i.test(fl.navigator.userAgent)):()=>!0,x7=fl.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Xt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Xt.isString(r)&&o.push("path="+r),Xt.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function L7(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function S7(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function qC(t,e,n){let r=!L7(e);return t&&(r||n==!1)?S7(t,e):e}const L4=t=>t instanceof iu?{...t}:t;function _f(t,e){e=e||{};const n={};function r(c,d,p,v){return Xt.isPlainObject(c)&&Xt.isPlainObject(d)?Xt.merge.call({caseless:v},c,d):Xt.isPlainObject(d)?Xt.merge({},d):Xt.isArray(d)?d.slice():d}function i(c,d,p,v){if(Xt.isUndefined(d)){if(!Xt.isUndefined(c))return r(void 0,c,p,v)}else return r(c,d,p,v)}function s(c,d){if(!Xt.isUndefined(d))return r(void 0,d)}function o(c,d){if(Xt.isUndefined(d)){if(!Xt.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,p){if(p in e)return r(c,d);if(p in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d,p)=>i(L4(c),L4(d),p,!0)};return Xt.forEach(Object.keys(Object.assign({},t,e)),function(d){const p=l[d]||i,v=p(t[d],e[d],d);Xt.isUndefined(v)&&p!==a||(n[d]=v)}),n}const YC=t=>{const e=_f({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=iu.from(o),e.url=VC(qC(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Xt.isFormData(n)){if(fl.hasStandardBrowserEnv||fl.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...d]=l?l.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...d].join("; "))}}if(fl.hasStandardBrowserEnv&&(r&&Xt.isFunction(r)&&(r=r(e)),r||r!==!1&&w7(e.url))){const c=i&&s&&x7.read(s);c&&o.set(i,c)}return e},C7=typeof XMLHttpRequest<"u",E7=C7&&function(t){return new Promise(function(n,r){const i=YC(t);let s=i.data;const o=iu.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,d,p,v,g,x;function E(){g&&g(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let k=new XMLHttpRequest;k.open(i.method.toUpperCase(),i.url,!0),k.timeout=i.timeout;function A(){if(!k)return;const j=iu.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),te={data:!a||a==="text"||a==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:j,config:t,request:k};GC(function(pe){n(pe),E()},function(pe){r(pe),E()},te),k=null}"onloadend"in k?k.onloadend=A:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(A)},k.onabort=function(){k&&(r(new oi("Request aborted",oi.ECONNABORTED,t,k)),k=null)},k.onerror=function(){r(new oi("Network Error",oi.ERR_NETWORK,t,k)),k=null},k.ontimeout=function(){let Y=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const te=i.transitional||UC;i.timeoutErrorMessage&&(Y=i.timeoutErrorMessage),r(new oi(Y,te.clarifyTimeoutError?oi.ETIMEDOUT:oi.ECONNABORTED,t,k)),k=null},s===void 0&&o.setContentType(null),"setRequestHeader"in k&&Xt.forEach(o.toJSON(),function(Y,te){k.setRequestHeader(te,Y)}),Xt.isUndefined(i.withCredentials)||(k.withCredentials=!!i.withCredentials),a&&a!=="json"&&(k.responseType=i.responseType),c&&([v,x]=zv(c,!0),k.addEventListener("progress",v)),l&&k.upload&&([p,g]=zv(l),k.upload.addEventListener("progress",p),k.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(d=j=>{k&&(r(!j||j.type?new $p(null,t,k):j),k.abort(),k=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const D=y7(i.url);if(D&&fl.protocols.indexOf(D)===-1){r(new oi("Unsupported protocol "+D+":",oi.ERR_BAD_REQUEST,t));return}k.send(s||null)})},P7=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const d=c instanceof Error?c:this.reason;r.abort(d instanceof oi?d:new $p(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new oi(`timeout ${e} of ms exceeded`,oi.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>Xt.asap(a),l}},M7=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},k7=async function*(t,e){for await(const n of A7(t))yield*M7(n,e)},A7=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},S4=(t,e,n,r)=>{const i=k7(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await i.next();if(c){a(),l.close();return}let p=d.byteLength;if(n){let v=s+=p;n(v)}l.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},Fy=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",ZC=Fy&&typeof ReadableStream=="function",T7=Fy&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),KC=(t,...e)=>{try{return!!t(...e)}catch{return!1}},D7=ZC&&KC(()=>{let t=!1;const e=new Request(fl.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),C4=64*1024,ab=ZC&&KC(()=>Xt.isReadableStream(new Response("").body)),$v={stream:ab&&(t=>t.body)};Fy&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!$v[e]&&($v[e]=Xt.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new oi(`Response type '${e}' is not supported`,oi.ERR_NOT_SUPPORT,r)})})})(new Response);const O7=async t=>{if(t==null)return 0;if(Xt.isBlob(t))return t.size;if(Xt.isSpecCompliantForm(t))return(await new Request(fl.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Xt.isArrayBufferView(t)||Xt.isArrayBuffer(t))return t.byteLength;if(Xt.isURLSearchParams(t)&&(t=t+""),Xt.isString(t))return(await T7(t)).byteLength},N7=async(t,e)=>{const n=Xt.toFiniteNumber(t.getContentLength());return n??O7(e)},I7=Fy&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:d,withCredentials:p="same-origin",fetchOptions:v}=YC(t);c=c?(c+"").toLowerCase():"text";let g=P7([i,s&&s.toAbortSignal()],o),x;const E=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let k;try{if(l&&D7&&n!=="get"&&n!=="head"&&(k=await N7(d,r))!==0){let te=new Request(e,{method:"POST",body:r,duplex:"half"}),ge;if(Xt.isFormData(r)&&(ge=te.headers.get("content-type"))&&d.setContentType(ge),te.body){const[pe,N]=w4(k,zv(x4(l)));r=S4(te.body,C4,pe,N)}}Xt.isString(p)||(p=p?"include":"omit");const A="credentials"in Request.prototype;x=new Request(e,{...v,signal:g,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:A?p:void 0});let D=await fetch(x);const j=ab&&(c==="stream"||c==="response");if(ab&&(a||j&&E)){const te={};["status","statusText","headers"].forEach($=>{te[$]=D[$]});const ge=Xt.toFiniteNumber(D.headers.get("content-length")),[pe,N]=a&&w4(ge,zv(x4(a),!0))||[];D=new Response(S4(D.body,C4,pe,()=>{N&&N(),E&&E()}),te)}c=c||"text";let Y=await $v[Xt.findKey($v,c)||"text"](D,t);return!j&&E&&E(),await new Promise((te,ge)=>{GC(te,ge,{data:Y,headers:iu.from(D.headers),status:D.status,statusText:D.statusText,config:t,request:x})})}catch(A){throw E&&E(),A&&A.name==="TypeError"&&/fetch/i.test(A.message)?Object.assign(new oi("Network Error",oi.ERR_NETWORK,t,x),{cause:A.cause||A}):oi.from(A,A&&A.code,t,x)}}),lb={http:KI,xhr:E7,fetch:I7};Xt.forEach(lb,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const E4=t=>`- ${t}`,B7=t=>Xt.isFunction(t)||t===null||t===!1,XC={getAdapter:t=>{t=Xt.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!B7(n)&&(r=lb[(o=String(n)).toLowerCase()],r===void 0))throw new oi(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(E4).join(`
`):" "+E4(s[0]):"as no adapter specified";throw new oi("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:lb};function H1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new $p(null,t)}function P4(t){return H1(t),t.headers=iu.from(t.headers),t.data=U1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),XC.getAdapter(t.adapter||Om.adapter)(t).then(function(r){return H1(t),r.data=U1.call(t,t.transformResponse,r),r.headers=iu.from(r.headers),r},function(r){return WC(r)||(H1(t),r&&r.response&&(r.response.data=U1.call(t,t.transformResponse,r.response),r.response.headers=iu.from(r.response.headers))),Promise.reject(r)})}const JC="1.8.4",jy={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{jy[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const M4={};jy.transitional=function(e,n,r){function i(s,o){return"[Axios v"+JC+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new oi(i(o," has been removed"+(n?" in "+n:"")),oi.ERR_DEPRECATED);return n&&!M4[o]&&(M4[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};jy.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function R7(t,e,n){if(typeof t!="object")throw new oi("options must be an object",oi.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new oi("option "+s+" must be "+l,oi.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new oi("Unknown option "+s,oi.ERR_BAD_OPTION)}}const nv={assertOptions:R7,validators:jy},Rc=nv.validators;let ff=class{constructor(e){this.defaults=e,this.interceptors={request:new b4,response:new b4}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=_f(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&nv.assertOptions(r,{silentJSONParsing:Rc.transitional(Rc.boolean),forcedJSONParsing:Rc.transitional(Rc.boolean),clarifyTimeoutError:Rc.transitional(Rc.boolean)},!1),i!=null&&(Xt.isFunction(i)?n.paramsSerializer={serialize:i}:nv.assertOptions(i,{encode:Rc.function,serialize:Rc.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),nv.assertOptions(n,{baseUrl:Rc.spelling("baseURL"),withXsrfToken:Rc.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Xt.merge(s.common,s[n.method]);s&&Xt.forEach(["delete","get","head","post","put","patch","common"],x=>{delete s[x]}),n.headers=iu.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(l=l&&E.synchronous,a.unshift(E.fulfilled,E.rejected))});const c=[];this.interceptors.response.forEach(function(E){c.push(E.fulfilled,E.rejected)});let d,p=0,v;if(!l){const x=[P4.bind(this),void 0];for(x.unshift.apply(x,a),x.push.apply(x,c),v=x.length,d=Promise.resolve(n);p<v;)d=d.then(x[p++],x[p++]);return d}v=a.length;let g=n;for(p=0;p<v;){const x=a[p++],E=a[p++];try{g=x(g)}catch(k){E.call(this,k);break}}try{d=P4.call(this,g)}catch(x){return Promise.reject(x)}for(p=0,v=c.length;p<v;)d=d.then(c[p++],c[p++]);return d}getUri(e){e=_f(this.defaults,e);const n=qC(e.baseURL,e.url,e.allowAbsoluteUrls);return VC(n,e.params,e.paramsSerializer)}};Xt.forEach(["delete","get","head","options"],function(e){ff.prototype[e]=function(n,r){return this.request(_f(r||{},{method:e,url:n,data:(r||{}).data}))}});Xt.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(_f(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ff.prototype[e]=n(),ff.prototype[e+"Form"]=n(!0)});let F7=class QC{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new $p(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new QC(function(i){e=i}),cancel:e}}};function j7(t){return function(n){return t.apply(null,n)}}function z7(t){return Xt.isObject(t)&&t.isAxiosError===!0}const ub={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ub).forEach(([t,e])=>{ub[e]=t});function eE(t){const e=new ff(t),n=TC(ff.prototype.request,e);return Xt.extend(n,ff.prototype,e,{allOwnKeys:!0}),Xt.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return eE(_f(t,i))},n}const Zo=eE(Om);Zo.Axios=ff;Zo.CanceledError=$p;Zo.CancelToken=F7;Zo.isCancel=WC;Zo.VERSION=JC;Zo.toFormData=Ry;Zo.AxiosError=oi;Zo.Cancel=Zo.CanceledError;Zo.all=function(e){return Promise.all(e)};Zo.spread=j7;Zo.isAxiosError=z7;Zo.mergeConfig=_f;Zo.AxiosHeaders=iu;Zo.formToJSON=t=>HC(Xt.isHTMLForm(t)?new FormData(t):t);Zo.getAdapter=XC.getAdapter;Zo.HttpStatusCode=ub;Zo.default=Zo;const{Axios:Woe,AxiosError:Goe,CanceledError:qoe,isCancel:Yoe,CancelToken:Zoe,VERSION:Koe,all:Xoe,Cancel:Joe,isAxiosError:Qoe,spread:eae,toFormData:tae,AxiosHeaders:nae,HttpStatusCode:rae,formToJSON:iae,getAdapter:sae,mergeConfig:oae}=Zo,mn=ou({measures:[],longTasks:[],memorySnapshots:[],framesPerSecond:0,lastFpsUpdate:0,frameCount:0,isRecording:!1,isEnabled:!1,startTime:0,currentOperation:null,operationStack:[],operationHistory:[]});let bd=null,lf=null;const $7=1e3;function zy(){if(mn.isEnabled){mn.isRecording=!0,mn.startTime=performance.now(),mn.frameCount=0,mn.lastFpsUpdate=performance.now();try{window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&(bd=new PerformanceObserver(t=>{t.getEntries().forEach(n=>{mn.longTasks.push({duration:n.duration,startTime:n.startTime,name:n.name,component:Cc()})})}),bd.observe({entryTypes:["longtask"]}))}catch(t){console.warn("PerformanceObserver pour longues tâches non supporté",t)}V7(),B_()}}function Vv(){mn.isRecording=!1,bd&&(bd.disconnect(),bd=null),iE()}function cb(){bd&&(bd.disconnect(),bd=null),iE(),mn.measures=[],mn.longTasks=[],mn.memorySnapshots=[],mn.operationHistory=[],mn.frameCount=0,mn.framesPerSecond=0,mn.lastFpsUpdate=0,mn.isEnabled&&zy()}function tE(t,e,n){if(!mn.isEnabled||!mn.isRecording)return()=>{};const r=performance.now(),i=mn.currentOperation;return mn.currentOperation=t,mn.operationStack.push(t),()=>{const s=performance.now()-r;mn.operationStack.pop(),mn.currentOperation=mn.operationStack[mn.operationStack.length-1]||null,mn.measures.push({name:t,startTime:r,duration:s,component:e||Cc(),info:n,parentOperation:i||void 0}),s>10&&mn.operationHistory.push({operation:t,component:e||Cc()||"unknown",durationMs:s,timestamp:Date.now()})}}async function nE(t,e,n,r){if(!mn.isEnabled||!mn.isRecording)return e();const i=performance.now(),s=mn.currentOperation;mn.currentOperation=t,mn.operationStack.push(t);try{return await e()}finally{const o=performance.now()-i;mn.operationStack.pop(),mn.currentOperation=mn.operationStack[mn.operationStack.length-1]||null,mn.measures.push({name:t,startTime:i,duration:o,component:n||Cc(),info:r,parentOperation:s||void 0}),o>10&&mn.operationHistory.push({operation:t,component:n||Cc()||"unknown",durationMs:o,timestamp:Date.now()})}}function rE(t,e,n,r){if(!mn.isEnabled||!mn.isRecording)return e();const i=performance.now(),s=mn.currentOperation;mn.currentOperation=t,mn.operationStack.push(t);try{return e()}finally{const o=performance.now()-i;mn.operationStack.pop(),mn.currentOperation=mn.operationStack[mn.operationStack.length-1]||null,mn.measures.push({name:t,startTime:i,duration:o,component:n||Cc(),info:r,parentOperation:s||void 0}),o>10&&mn.operationHistory.push({operation:t,component:n||Cc()||"unknown",durationMs:o,timestamp:Date.now()})}}function B_(){!mn.isEnabled||!mn.isRecording||(performance.memory?mn.memorySnapshots.push({jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize,timestamp:performance.now()}):mn.memorySnapshots.push({timestamp:performance.now()}))}function V7(){lf!==null&&cancelAnimationFrame(lf),mn.frameCount=0,mn.lastFpsUpdate=performance.now();function t(){mn.frameCount++;const e=performance.now();e-mn.lastFpsUpdate>=$7&&(mn.framesPerSecond=Math.round(mn.frameCount*1e3/(e-mn.lastFpsUpdate)),mn.frameCount=0,mn.lastFpsUpdate=e),mn.isRecording&&(lf=requestAnimationFrame(t))}lf=requestAnimationFrame(t)}function iE(){lf!==null&&(cancelAnimationFrame(lf),lf=null)}function Cc(){return""}function hb(t){mn.isEnabled=t,t&&!mn.isRecording?zy():!t&&mn.isRecording&&Vv()}function sE(t,e,n){return(...r)=>{if(!mn.isEnabled||!mn.isRecording)return t(...r);const i=performance.now();try{return t(...r)}finally{const s=performance.now()-i;mn.measures.push({name:e,startTime:i,duration:s,component:n||Cc(),info:{args:r}}),s>10&&mn.operationHistory.push({operation:e,component:n||Cc()||"unknown",durationMs:s,timestamp:Date.now()})}}}function oE(t,e,n){return async(...r)=>{if(!mn.isEnabled||!mn.isRecording)return await t(...r);const i=performance.now();try{return await t(...r)}finally{const s=performance.now()-i;mn.measures.push({name:e,startTime:i,duration:s,component:n||Cc(),info:{args:r}}),s>10&&mn.operationHistory.push({operation:e,component:n||Cc()||"unknown",durationMs:s,timestamp:Date.now()})}}}function U7(t,e){const n=mn.measures.filter(o=>o.startTime>=t&&o.startTime+o.duration<=e),r=new Map,i=[];n.forEach(o=>{o.parentOperation?(r.has(o.parentOperation)||r.set(o.parentOperation,[]),r.get(o.parentOperation).push(o)):i.push(o)});function s(o){const a=r.get(o.name)||[];return{operation:o.name,duration:o.duration,component:o.component,children:a.sort((l,c)=>c.duration-l.duration).map(l=>s(l))}}return i.sort((o,a)=>a.duration-o.duration).map(o=>s(o))}function db(t,e){const n=t||mn.startTime,r=e||performance.now(),i=U7(n,r),s=r-n,o=new Map;function a(c){const d=o.get(c.operation)||{duration:0,component:c.component};d.duration+=c.duration,o.set(c.operation,d),c.children.forEach(p=>a(p))}i.forEach(c=>a(c));const l=Array.from(o.entries()).map(([c,{duration:d,component:p}])=>({operation:c,duration:d,component:p,impact:d/s*100})).sort((c,d)=>d.impact-c.impact).slice(0,10);return{criticalPaths:i,totalTime:s,bottlenecks:l}}function Vp(){const t=St(!1);mo(()=>{try{const r=new URL(window.location.href).searchParams.get("perf")==="true";t.value=r,hb(r),cb()}catch(n){console.warn("Erreur lors de la vérification du paramètre perf:",n),t.value=!1,hb(!1)}}),Ju(()=>{mn.isRecording&&Vv()});const e=(n,r)=>{if(!mn.isEnabled||!mn.isRecording)return null;const i=mn.measures.find(c=>c.name===n&&c.startTime===r);if(!i)return null;const s=i.startTime+i.duration,o=mn.measures.filter(c=>c.startTime>=i.startTime&&c.startTime<=s&&c!==i),a=mn.longTasks.filter(c=>c.startTime>=i.startTime&&c.startTime<=s),l=mn.memorySnapshots.filter(c=>c.timestamp>=i.startTime&&c.timestamp<=s);return{operation:{name:i.name,component:i.component,startTime:i.startTime,duration:i.duration,info:i.info},context:{relatedOperations:o.map(c=>({name:c.name,component:c.component,startTime:c.startTime-i.startTime,duration:c.duration,info:c.info})),longTasks:a.map(c=>({duration:c.duration,startTime:c.startTime-i.startTime,name:c.name,component:c.component})),memorySnapshots:l.map(c=>({...c,timestamp:c.timestamp-i.startTime}))},summary:{totalRelatedOperations:o.length,totalLongTasks:a.length,maxLongTaskDuration:Math.max(...a.map(c=>c.duration),0),memoryDelta:l.length>1?(l[l.length-1].usedJSHeapSize||0)-(l[0].usedJSHeapSize||0):0}}};return{isEnabled:mc(St(mn.isEnabled)),isQueryParamEnabled:mc(t),isRecording:mc(St(mn.isRecording)),measures:mc(St(mn.measures)),longTasks:mc(St(mn.longTasks)),memorySnapshots:mc(St(mn.memorySnapshots)),framesPerSecond:mc(St(mn.framesPerSecond)),operationHistory:mc(St(mn.operationHistory)),startRecording:zy,stopRecording:Vv,clearRecording:cb,startMeasure:tE,measure:rE,measureAsync:nE,captureMemorySnapshot:B_,createPerformanceTracker:sE,createAsyncPerformanceTracker:oE,getOperationDetails:e,getSlowOperations:()=>!mn.isEnabled||!mn.isRecording?[]:[...mn.measures].sort((n,r)=>r.duration-n.duration).slice(0,10),getLongTasks:()=>!mn.isEnabled||!mn.isRecording?[]:[...mn.longTasks].sort((n,r)=>r.duration-n.duration),getPerformanceReport:()=>{if(!mn.isEnabled||!mn.isRecording)return null;const n=db();return{totalMeasures:mn.measures.length,totalLongTasks:mn.longTasks.length,slowestOperations:[...mn.measures].sort((r,i)=>i.duration-r.duration).slice(0,10),averageFps:mn.framesPerSecond,memoryUsage:mn.memorySnapshots.length>0?mn.memorySnapshots[mn.memorySnapshots.length-1]:null,operationsByComponent:H7(mn.measures),criticalPaths:n.criticalPaths,bottlenecks:n.bottlenecks,recordingDuration:mn.isRecording?performance.now()-mn.startTime:null}},analyzeCriticalPaths:db}}function H7(t){if(!mn.isEnabled||!mn.isRecording)return{};const e={};return t.forEach(n=>{const r=n.component||"unknown";e[r]||(e[r]={totalTime:0,callCount:0,operations:{}}),e[r].totalTime+=n.duration,e[r].callCount++,e[r].operations[n.name]||(e[r].operations[n.name]={totalTime:0,callCount:0}),e[r].operations[n.name].totalTime+=n.duration,e[r].operations[n.name].callCount++}),e}const pn={startRecording:zy,stopRecording:Vv,clearRecording:cb,startMeasure:tE,measure:rE,measureAsync:nE,captureMemorySnapshot:B_,createPerformanceTracker:sE,createAsyncPerformanceTracker:oE,setEnabled:hb,analyzeCriticalPaths:db},Bn=Zo.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0}),Wr=Vp();function aE(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Bn.interceptors.request.use(async t=>{const e=Wr.startMeasure("api_request_interceptor","ApiService");try{const n=aE("access_token");return n&&(t.headers.Authorization=`Bearer ${n}`),console.log("Request config:",{url:t.url,method:t.method,headers:t.headers,withCredentials:t.withCredentials}),t}finally{e()}},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));Bn.interceptors.response.use(t=>t,async t=>{var r,i;const e=Wr.startMeasure("api_response_interceptor","ApiService"),n=t.config;try{if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;const s=ma();try{await Wr.measureAsync("token_refresh",()=>s.refreshToken(),"ApiService");const o=aE("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,Bn(n)}catch(o){return await s.logout(),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(o)}}return Promise.reject(t)}finally{e()}});function W7(t){var n;const e=[];if((n=t.response)!=null&&n.data){const r=t.response.data;typeof r=="object"&&!Array.isArray(r)?Object.entries(r).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>{e.push({field:i,message:o})}):typeof s=="string"&&e.push({field:i,message:s})}):typeof r=="string"?e.push({field:"non_field_error",message:r}):r.detail&&e.push({field:"non_field_error",message:r.detail})}else t.message&&e.push({field:"non_field_error",message:`Erreur de connexion: ${t.message}`});return e.length===0&&e.push({field:"non_field_error",message:"Une erreur inconnue s'est produite"}),e}async function rv(t){console.log("[fetchUsersByHierarchy] Récupération des utilisateurs:",t);const e={role:t.role};t.entrepriseId&&(e.entreprise=t.entrepriseId),t.salarieId&&(e.salarie=t.salarieId),t.includeDetails&&(e.include_plans=!0),t.search&&(e.search=t.search),console.log("[fetchUsersByHierarchy] Filtres appliqués:",e);try{const n=await Dl.getUsers(e);return console.log(`[fetchUsersByHierarchy] Résultat (${n.data.length} utilisateurs):`,n.data),n.data}catch(n){throw console.error("[fetchUsersByHierarchy] Erreur lors de la récupération des utilisateurs:",n),n}}const Dl={async getUsers(t={}){const e=Wr.startMeasure("get_users","UserService");try{return await Wr.measureAsync("get_users_request",()=>Bn.get("/users/",{params:t}),"UserService")}finally{e()}},async getUser(t){return await Bn.get(`/users/${t}/`)},async createUser(t){return await Bn.post("/users/",t)},async updateUser(t,e){return await Bn.patch(`/users/${t}/`,e)},async deleteUser(t){return await Bn.delete(`/users/${t}/`)},async getEntreprises(){return await Bn.get("/users/",{params:{role:"ENTREPRISE"}})},async getSalaries(t){const e={role:"SALARIE"};return t&&(e.entreprise=t),await Bn.get("/users/",{params:e})},async getSalarieVisiteurs(t){return await Bn.get("/users/",{params:{role:"VISITEUR",salarie:t}})},async getEntrepriseVisiteurs(t){return await Bn.get("/users/",{params:{role:"VISITEUR",entreprise:t}})},async getUsersByHierarchy(t){const e=Wr.startMeasure("get_users_hierarchy","UserService");try{const n=Wr.measure("prepare_hierarchy_filters",()=>{const r={role:t.role};return t.entrepriseId&&(r.entreprise=t.entrepriseId),t.salarieId&&(r.salarie=t.salarieId),t.includeDetails&&(r.include_plans=!0),t.search&&(r.search=t.search),r},"UserService");return await Wr.measureAsync("get_users_hierarchy_request",()=>Bn.get("/users/",{params:n}),"UserService")}finally{e()}},async getEntrepriseSalaries(t){return await Bn.get("/users/",{params:{role:"SALARIE",entreprise:t}})},async getVisiteurs(t,e){const n={role:"VISITEUR"};return t&&(n.salarie=t),e&&(n.entreprise=e),await Bn.get("/users/",{params:n})},async assignEntrepriseToSalarie(t,e){return await Bn.patch(`/users/${t}/`,{entreprise:e})},async assignSalarieToVisiteur(t,e){return await Bn.patch(`/users/${t}/`,{salarie:e})},formatLogoFileName(t){return Wr.measure("format_logo_filename",()=>{var i;const e=new Date().getTime(),n=((i=t.name.split(".").pop())==null?void 0:i.toLowerCase())||"";return`${t.name.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${e}.${n}`},"UserService")},async uploadLogo(t){const e=Wr.startMeasure("upload_logo","UserService");try{const n=new FormData,r=this.formatLogoFileName(t),i=new File([t],r,{type:t.type});return n.append("logo",i),await Wr.measureAsync("upload_logo_request",()=>Bn.post("/users/upload_logo/",n,{headers:{"Content-Type":"multipart/form-data"}}),"UserService")}finally{e()}}};async function W1(t,e=3,n=1e3,r=1e4){let i=0;for(;;)try{return await t()}catch(s){if(i++,i>=e)throw s;const o=Math.min(n*Math.pow(2,i-1),r),a=Math.random()*200;console.log(`Tentative ${i}/${e} échouée, nouvelle tentative dans ${o+a}ms`),await new Promise(l=>setTimeout(l,o+a))}}const b0={async getPlans(){const t=Wr.startMeasure("get_plans","IrrigationService");try{return await Wr.measureAsync("get_plans_request",()=>Bn.get("/plans/"),"IrrigationService")}finally{t()}},async createPlan(t){const e=Wr.startMeasure("create_plan","IrrigationService");try{const n=Wr.measure("format_plan_data",()=>({...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null}),"IrrigationService");return await Wr.measureAsync("create_plan_request",()=>Bn.post("/plans/",n),"IrrigationService")}finally{e()}},async updatePlan(t,e){const n=Wr.startMeasure("update_plan","IrrigationService");try{return await Wr.measureAsync("update_plan_request",()=>Bn.put(`/plans/${t}/`,e),"IrrigationService")}finally{n()}},async deletePlan(t){const e=Wr.startMeasure("delete_plan","IrrigationService");try{return await Wr.measureAsync("delete_plan_request",()=>Bn.delete(`/plans/${t}/`),"IrrigationService")}finally{e()}},async getVisiteurPlans(t){return await Bn.get("/plans/",{params:{visiteur:t}})},async createPlanForVisiteur(t){return await Bn.post("/plans/",t)},async getEntreprisePlans(t){return await Bn.get("/plans/",{params:{entreprise:t}})},async getSalariePlans(t){return await Bn.get("/plans/",{params:{salarie:t}})},async createPlanForSalarie(t,e){const n={...t,salarie:e};return await Bn.post("/plans/",n)},async createPlanForEntreprise(t,e){const n={...t,entreprise:e};return await Bn.post("/plans/",n)}},Ea={async getNotes(t={}){const e=Wr.startMeasure("get_notes","NoteService");try{return await Wr.measureAsync("get_notes_request",()=>Bn.get("/notes/",{params:t}),"NoteService")}finally{e()}},async getNotesByPlan(t){const e=Wr.startMeasure("get_notes_by_plan","NoteService");try{return await Wr.measureAsync("get_notes_by_plan_request",()=>Bn.get("/notes/",{params:{plan:t}}),"NoteService")}finally{e()}},async getNote(t){const e=Wr.startMeasure("get_note","NoteService");try{return await Wr.measureAsync("get_note_request",()=>Bn.get(`/notes/${t}/`),"NoteService")}finally{e()}},async createNote(t){const e=Wr.startMeasure("create_note","NoteService");try{const n={...t};return n.location&&Object.keys(n.location).length===0&&delete n.location,await Wr.measureAsync("create_note_request",()=>Bn.post("/notes/",n),"NoteService")}finally{e()}},async updateNote(t,e){console.log("[noteService][updateNote] Mise à jour de la note:",{noteId:t,noteData:e});const n=Wr.startMeasure("update_note","NoteService");try{const r={...e};r.location&&Object.keys(r.location).length===0&&delete r.location,e.column!==void 0?r.column=e.column:e.columnId!==void 0&&(r.column=e.columnId),delete r.columnId,delete r.column_id,delete r.column_details,console.log("[noteService][updateNote] Données formatées:",r);const i=await Wr.measureAsync("update_note_request",()=>Bn.patch(`/notes/${t}/`,r),"NoteService");return console.log("[noteService][updateNote] Réponse du serveur:",i.data),i}catch(r){throw console.error("[noteService][updateNote] Erreur lors de la mise à jour:",r),r}finally{n()}},async deleteNote(t){const e=Wr.startMeasure("delete_note","NoteService");try{return await Wr.measureAsync("delete_note_request",()=>Bn.delete(`/notes/${t}/`),"NoteService")}finally{e()}},async getComments(t){return await Bn.get(`/notes/${t}/comments/`)},async addComment(t,e){const n=typeof e=="string"?{text:e}:e;return console.log(`[noteService][addComment] Envoi du commentaire pour la note ${t}:`,n),await Bn.post(`/notes/${t}/comments/`,n)},async updateComment(t,e,n){return await Bn.patch(`/notes/${t}/comments/${e}/`,n)},async deleteComment(t,e){return await Bn.delete(`/notes/${t}/comments/${e}/`)},async getPhotos(t){return await Bn.get(`/notes/${t}/photos/`)},async addPhoto(t,e){return await Bn.post(`/notes/${t}/photos/`,e,{headers:{"Content-Type":"multipart/form-data"}})},async updatePhoto(t,e,n){return await Bn.patch(`/notes/${t}/photos/${e}/`,n)},async deletePhoto(t,e){return await Bn.delete(`/notes/${t}/photos/${e}/`)}},G1={async getDevices(t={}){const e=Wr.startMeasure("get_weather_devices","WeatherService");try{return await W1(()=>Bn.get("/weather/devices/",{params:t}),3,1e3,1e4)}finally{e()}},async getRealTimeData(t){const e=Wr.startMeasure("get_weather_data","WeatherService");try{const n=typeof t=="string"?{mac:t}:t;return await W1(()=>Bn.get("/weather/",{params:n}),3,1e3,1e4)}finally{e()}},async getHistoryData(t){const e=Wr.startMeasure("get_history_data","WeatherService");try{return await W1(()=>Bn.get("/weather/history/",{params:t}),3,1e3,1e4)}finally{e()}}},_0={async getFilters(){const t=Wr.startMeasure("get_map_filters","MapFilterService");try{return await Wr.measureAsync("get_map_filters_request",()=>Bn.get("/map-filters/"),"MapFilterService")}finally{t()}},async getFilter(t){const e=Wr.startMeasure("get_map_filter","MapFilterService");try{return await Wr.measureAsync("get_map_filter_request",()=>Bn.get(`/map-filters/${t}/`),"MapFilterService")}finally{e()}},async createFilter(t){const e=Wr.startMeasure("create_map_filter","MapFilterService");try{return await Wr.measureAsync("create_map_filter_request",()=>Bn.post("/map-filters/",t),"MapFilterService")}finally{e()}},async updateFilter(t,e){const n=Wr.startMeasure("update_map_filter","MapFilterService");try{return await Wr.measureAsync("update_map_filter_request",()=>Bn.patch(`/map-filters/${t}/`,e),"MapFilterService")}finally{n()}},async deleteFilter(t){const e=Wr.startMeasure("delete_map_filter","MapFilterService");try{return await Wr.measureAsync("delete_map_filter_request",()=>Bn.delete(`/map-filters/${t}/`),"MapFilterService")}finally{e()}}};Bn.defaults.baseURL="/api";Bn.defaults.headers.common["Content-Type"]="application/json";Bn.defaults.withCredentials=!0;function gm(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}Bn.interceptors.request.use(t=>{const e=gm("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));Bn.interceptors.response.use(t=>t,async t=>{var r,i;const e=ma(),n=t.config;if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;try{if(!gm("access_token"))throw new Error("No token available");await e.refreshToken();const o=gm("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,Bn(n)}catch(s){console.error("Token refresh failed:",s),await e.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(t)});function G7(t,e,n=1){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${t}=${e};${i};path=/;secure;samesite=Strict`}function Su(t){if(!t)return"-";const e=t.first_name||"",n=t.last_name?t.last_name.toUpperCase():"",r=`${e} ${n}`.trim(),i=t.company_name||t.role||"";return!r&&!i?"-":r?i?`${r} (${i})`:r:`(${i})`}function q7(t="",e=""){return`${(t==null?void 0:t.charAt(0))||""}${(e==null?void 0:e.charAt(0))||""}`.toUpperCase()}const Y7={ADMIN:"Administrateur",ENTREPRISE:"Entreprise",SALARIE:"Salarie",VISITEUR:"Visiteur"};function Z7(t){return Y7[t]||t}function K7(){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function X7(t){return t?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}async function J7({role:t,entrepriseId:e,salarieId:n,includeDetails:r=!1}){const i={role:t};return e&&(i.entreprise=e),n&&(i.salarie=n),r&&(i.include_plans=!0),(await Dl.getUsers(i)).data}const ma=jp("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,enterprises:[],employees:[],visitors:[]}),getters:{isAdmin:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="admin"},isEntreprise:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="entreprise"},isSalarie:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="salarie"},isVisiteur:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="visiteur"},currentUser:t=>t.user,hasEnterprise:t=>{var e;return!!((e=t.user)!=null&&e.enterprise_id)},hasEmployee:t=>{var e;return!!((e=t.user)!=null&&e.employee_id)}},actions:{async initialize(t){if(!t){const n=await this.restoreSession();return this.initialized=!0,n}if(t.isAuthenticated&&t.user)return this.user=t.user,this.isAuthenticated=!0,this.mustChangePassword=t.user.must_change_password||!1,this.initialized=!0,!0;const e=await this.restoreSession();return this.initialized=!0,e},async restoreSession(){try{if(!gm("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const e=await Bn.post("/token/refresh/");return e.data.user?(this.user=e.data.user,this.isAuthenticated=!0,this.mustChangePassword=e.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(t){return console.error("Failed to restore session:",t),this.isAuthenticated=!1,this.user=null,!1}},async login(t,e){var n,r,i;try{const s=await Bn.post("/token/",{username:t,password:e});if(!s.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${s.data.access}; path=/; secure; samesite=Strict`;const o=await this.fetchUserProfile();return this.user=o,this.isAuthenticated=!0,!0}catch(s){throw this.isAuthenticated=!1,this.user=null,((n=s.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(i=(r=s.response)==null?void 0:r.data)!=null&&i.detail?new Error(s.response.data.detail):s}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const t=await Bn.get("/users/me/");return this.user=t.data,this.isAuthenticated=!0,this.mustChangePassword=t.data.must_change_password||!1,t.data}catch(t){throw this.isAuthenticated=!1,this.user=null,t}},async changePassword(t,e){try{const n=await Bn.post("/users/change_password/",{old_password:t,password:e});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var t,e;try{if(!gm("refresh_token"))throw new Error("No refresh token available");const r=await Bn.post("/token/refresh/",{},{withCredentials:!0,_retry:!0}),{access:i}=r.data;if(!i)throw new Error("No access token received");return G7("access_token",i,1),this.isAuthenticated=!0,i}catch(n){throw console.error("Error refreshing token:",{status:(t=n.response)==null?void 0:t.status,data:(e=n.response)==null?void 0:e.data}),this.isAuthenticated=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",n}},async fetchUsers(t={}){this.loading=!0;try{return(await Dl.getUsers(t)).data}catch(e){throw this.error="Erreur lors de la récupération des utilisateurs",e}finally{this.loading=!1}},async fetchEnterprises(){this.loading=!0;try{const t=await Dl.getUsers({role:"ENTREPRISE"});return this.enterprises=t.data,this.enterprises}catch(t){throw this.error="Erreur lors de la récupération des entreprises",t}finally{this.loading=!1}},async fetchEnterpriseEmployees(t){this.loading=!0;try{const e=await Dl.getUsers({role:"SALARIE",entreprise:t});return this.employees=e.data,this.employees}catch(e){throw this.error="Erreur lors de la récupération des salaries",e}finally{this.loading=!1}},async fetchEnterpriseVisitors(t){this.loading=!0;try{const e=await Dl.getUsers({role:"VISITEUR",entreprise:t});return this.visitors=e.data,this.visitors}catch(e){throw this.error="Erreur lors de la récupération des visiteurs",e}finally{this.loading=!1}},async createUser(t){this.loading=!0;try{return(await Dl.createUser(t)).data}catch(e){throw this.error="Erreur lors de la création de l'utilisateur",e}finally{this.loading=!1}},async updateUser(t,e){this.loading=!0;try{return(await Dl.updateUser(t,e)).data}catch(n){throw this.error="Erreur lors de la mise à jour de l'utilisateur",n}finally{this.loading=!1}},async deleteUser(t){this.loading=!0;try{return await Dl.deleteUser(t),!0}catch(e){throw this.error="Erreur lors de la suppression de l'utilisateur",e}finally{this.loading=!1}},async fetchEnterprisesLegacy(){this.loading=!0;try{const t=await Bn.get("/users/",{params:{role:"entreprise"}});this.enterprises=t.data}catch(t){throw this.error="Erreur lors de la récupération des entreprises",t}finally{this.loading=!1}},async setEnterprise(t,e){this.loading=!0;try{await Bn.patch(`/users/${t}/`,{enterprise:e}),this.user&&this.user.id===t&&(this.user.enterprise_id=e)}catch(n){throw this.error="Erreur lors de la mise à jour de l'entreprise",n}finally{this.loading=!1}},async updateUserRole(t,e){this.loading=!0;try{const n=await Bn.patch(`/users/${t}/`,{role:e});return this.user&&this.user.id===t&&(this.user.user_type=e),n.data}catch(n){throw this.error="Erreur lors de la mise à jour du rôle",n}finally{this.loading=!1}},async updateUserEmail(t){var e;this.loading=!0;try{const n=await Bn.patch(`/users/${(e=this.user)==null?void 0:e.id}/`,{email:t});return this.user&&(this.user.email=t),n.data}catch(n){throw this.error="Erreur lors de la mise à jour de l'email",n}finally{this.loading=!1}},async uploadLogo(t){this.loading=!0;try{const e=await Dl.uploadLogo(t);return this.user&&e.data.logo&&(this.user.logo=e.data.logo),e.data}catch(e){throw this.error="Erreur lors du téléversement du logo",e}finally{this.loading=!1}},checkAccess(t){return this.user?t.includes(this.user.user_type):!1},async fetchUsersByRole(t){this.loading=!0;try{return await J7(t)}catch(e){throw console.error(`Error fetching ${t.role}:`,e),e}finally{this.loading=!1}},async fetchEntrepriseSalaries(t){this.loading=!0;try{return(await Dl.getUsers({role:"SALARIE",entreprise:t})).data}catch(e){throw this.error="Erreur lors de la récupération des salaries",e}finally{this.loading=!1}},async fetchSalarieVisiteurs(t){this.loading=!0;try{return(await Dl.getUsers({role:"VISITEUR",salarie:t})).data}catch(e){throw this.error="Erreur lors de la récupération des visiteurs",e}finally{this.loading=!1}}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const sp=typeof document<"u";function lE(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Q7(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&lE(t.default)}const os=Object.assign;function q1(t,e){const n={};for(const r in e){const i=e[r];n[r]=Ec(i)?i.map(t):t(i)}return n}const Ug=()=>{},Ec=Array.isArray,uE=/#/g,eB=/&/g,tB=/\//g,nB=/=/g,rB=/\?/g,cE=/\+/g,iB=/%5B/g,sB=/%5D/g,hE=/%5E/g,oB=/%60/g,dE=/%7B/g,aB=/%7C/g,fE=/%7D/g,lB=/%20/g;function R_(t){return encodeURI(""+t).replace(aB,"|").replace(iB,"[").replace(sB,"]")}function uB(t){return R_(t).replace(dE,"{").replace(fE,"}").replace(hE,"^")}function fb(t){return R_(t).replace(cE,"%2B").replace(lB,"+").replace(uE,"%23").replace(eB,"%26").replace(oB,"`").replace(dE,"{").replace(fE,"}").replace(hE,"^")}function cB(t){return fb(t).replace(nB,"%3D")}function hB(t){return R_(t).replace(uE,"%23").replace(rB,"%3F")}function dB(t){return t==null?"":hB(t).replace(tB,"%2F")}function mm(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const fB=/\/$/,pB=t=>t.replace(fB,"");function Y1(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=yB(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:mm(o)}}function gB(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function k4(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function mB(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Mp(e.matched[r],n.matched[i])&&pE(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Mp(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function pE(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!vB(t[n],e[n]))return!1;return!0}function vB(t,e){return Ec(t)?A4(t,e):Ec(e)?A4(e,t):t===e}function A4(t,e){return Ec(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function yB(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Kh={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var vm;(function(t){t.pop="pop",t.push="push"})(vm||(vm={}));var Hg;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Hg||(Hg={}));function bB(t){if(!t)if(sp){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),pB(t)}const _B=/^[^#]+#/;function wB(t,e){return t.replace(_B,"#")+e}function xB(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const $y=()=>({left:window.scrollX,top:window.scrollY});function LB(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=xB(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function T4(t,e){return(history.state?history.state.position-e:-1)+t}const pb=new Map;function SB(t,e){pb.set(t,e)}function CB(t){const e=pb.get(t);return pb.delete(t),e}let EB=()=>location.protocol+"//"+location.host;function gE(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),k4(l,"")}return k4(n,t)+r+i}function PB(t,e,n,r){let i=[],s=[],o=null;const a=({state:v})=>{const g=gE(t,location),x=n.value,E=e.value;let k=0;if(v){if(n.value=g,e.value=v,o&&o===x){o=null;return}k=E?v.position-E.position:0}else r(g);i.forEach(A=>{A(n.value,x,{delta:k,type:vm.pop,direction:k?k>0?Hg.forward:Hg.back:Hg.unknown})})};function l(){o=n.value}function c(v){i.push(v);const g=()=>{const x=i.indexOf(v);x>-1&&i.splice(x,1)};return s.push(g),g}function d(){const{history:v}=window;v.state&&v.replaceState(os({},v.state,{scroll:$y()}),"")}function p(){for(const v of s)v();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:l,listen:c,destroy:p}}function D4(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?$y():null}}function MB(t){const{history:e,location:n}=window,r={value:gE(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,d){const p=t.indexOf("#"),v=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:EB()+t+l;try{e[d?"replaceState":"pushState"](c,"",v),i.value=c}catch(g){console.error(g),n[d?"replace":"assign"](v)}}function o(l,c){const d=os({},e.state,D4(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,d,!0),r.value=l}function a(l,c){const d=os({},i.value,e.state,{forward:l,scroll:$y()});s(d.current,d,!0);const p=os({},D4(r.value,l,null),{position:d.position+1},c);s(l,p,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function kB(t){t=bB(t);const e=MB(t),n=PB(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=os({location:"",base:t,go:r,createHref:wB.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function AB(t){return typeof t=="string"||t&&typeof t=="object"}function mE(t){return typeof t=="string"||typeof t=="symbol"}const vE=Symbol("");var O4;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(O4||(O4={}));function kp(t,e){return os(new Error,{type:t,[vE]:!0},e)}function bh(t,e){return t instanceof Error&&vE in t&&(e==null||!!(t.type&e))}const N4="[^/]+?",TB={sensitive:!1,strict:!1,start:!0,end:!0},DB=/[.+*?^${}()[\]/\\]/g;function OB(t,e){const n=os({},TB,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const d=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let p=0;p<c.length;p++){const v=c[p];let g=40+(n.sensitive?.25:0);if(v.type===0)p||(i+="/"),i+=v.value.replace(DB,"\\$&"),g+=40;else if(v.type===1){const{value:x,repeatable:E,optional:k,regexp:A}=v;s.push({name:x,repeatable:E,optional:k});const D=A||N4;if(D!==N4){g+=10;try{new RegExp(`(${D})`)}catch(Y){throw new Error(`Invalid custom RegExp for param "${x}" (${D}): `+Y.message)}}let j=E?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;p||(j=k&&c.length<2?`(?:/${j})`:"/"+j),k&&(j+="?"),i+=j,g+=20,k&&(g+=-8),E&&(g+=-20),D===".*"&&(g+=-50)}d.push(g)}r.push(d)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const d=c.match(o),p={};if(!d)return null;for(let v=1;v<d.length;v++){const g=d[v]||"",x=s[v-1];p[x.name]=g&&x.repeatable?g.split("/"):g}return p}function l(c){let d="",p=!1;for(const v of t){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const g of v)if(g.type===0)d+=g.value;else if(g.type===1){const{value:x,repeatable:E,optional:k}=g,A=x in c?c[x]:"";if(Ec(A)&&!E)throw new Error(`Provided param "${x}" is an array but it is not repeatable (* or + modifiers)`);const D=Ec(A)?A.join("/"):A;if(!D)if(k)v.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${x}"`);d+=D}}return d||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function NB(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function yE(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=NB(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(I4(r))return 1;if(I4(i))return-1}return i.length-r.length}function I4(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const IB={type:0,value:""},BB=/[a-zA-Z0-9_]/;function RB(t){if(!t)return[[]];if(t==="/")return[[IB]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${c}": ${g}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",d="";function p(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function v(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&p(),o()):l===":"?(p(),n=1):v();break;case 4:v(),n=r;break;case 1:l==="("?n=2:BB.test(l)?v():(p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:n=3:d+=l;break;case 3:p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),p(),o(),i}function FB(t,e,n){const r=OB(RB(t.path),n),i=os(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function jB(t,e){const n=[],r=new Map;e=j4({strict:!1,end:!0,sensitive:!1},e);function i(p){return r.get(p)}function s(p,v,g){const x=!g,E=R4(p);E.aliasOf=g&&g.record;const k=j4(e,p),A=[E];if("alias"in p){const Y=typeof p.alias=="string"?[p.alias]:p.alias;for(const te of Y)A.push(R4(os({},E,{components:g?g.record.components:E.components,path:te,aliasOf:g?g.record:E})))}let D,j;for(const Y of A){const{path:te}=Y;if(v&&te[0]!=="/"){const ge=v.record.path,pe=ge[ge.length-1]==="/"?"":"/";Y.path=v.record.path+(te&&pe+te)}if(D=FB(Y,v,k),g?g.alias.push(D):(j=j||D,j!==D&&j.alias.push(D),x&&p.name&&!F4(D)&&o(p.name)),bE(D)&&l(D),E.children){const ge=E.children;for(let pe=0;pe<ge.length;pe++)s(ge[pe],D,g&&g.children[pe])}g=g||D}return j?()=>{o(j)}:Ug}function o(p){if(mE(p)){const v=r.get(p);v&&(r.delete(p),n.splice(n.indexOf(v),1),v.children.forEach(o),v.alias.forEach(o))}else{const v=n.indexOf(p);v>-1&&(n.splice(v,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function a(){return n}function l(p){const v=VB(p,n);n.splice(v,0,p),p.record.name&&!F4(p)&&r.set(p.record.name,p)}function c(p,v){let g,x={},E,k;if("name"in p&&p.name){if(g=r.get(p.name),!g)throw kp(1,{location:p});k=g.record.name,x=os(B4(v.params,g.keys.filter(j=>!j.optional).concat(g.parent?g.parent.keys.filter(j=>j.optional):[]).map(j=>j.name)),p.params&&B4(p.params,g.keys.map(j=>j.name))),E=g.stringify(x)}else if(p.path!=null)E=p.path,g=n.find(j=>j.re.test(E)),g&&(x=g.parse(E),k=g.record.name);else{if(g=v.name?r.get(v.name):n.find(j=>j.re.test(v.path)),!g)throw kp(1,{location:p,currentLocation:v});k=g.record.name,x=os({},v.params,p.params),E=g.stringify(x)}const A=[];let D=g;for(;D;)A.unshift(D.record),D=D.parent;return{name:k,path:E,params:x,matched:A,meta:$B(A)}}t.forEach(p=>s(p));function d(){n.length=0,r.clear()}return{addRoute:s,resolve:c,removeRoute:o,clearRoutes:d,getRoutes:a,getRecordMatcher:i}}function B4(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function R4(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:zB(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function zB(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function F4(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function $B(t){return t.reduce((e,n)=>os(e,n.meta),{})}function j4(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function VB(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;yE(t,e[s])<0?r=s:n=s+1}const i=UB(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function UB(t){let e=t;for(;e=e.parent;)if(bE(e)&&yE(t,e)===0)return e}function bE({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function HB(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(cE," "),o=s.indexOf("="),a=mm(o<0?s:s.slice(0,o)),l=o<0?null:mm(s.slice(o+1));if(a in e){let c=e[a];Ec(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function z4(t){let e="";for(let n in t){const r=t[n];if(n=cB(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Ec(r)?r.map(s=>s&&fb(s)):[r&&fb(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function WB(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Ec(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const GB=Symbol(""),$4=Symbol(""),Vy=Symbol(""),F_=Symbol(""),gb=Symbol("");function tg(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ad(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=v=>{v===!1?l(kp(4,{from:n,to:e})):v instanceof Error?l(v):AB(v)?l(kp(2,{from:e,to:v})):(o&&r.enterCallbacks[i]===o&&typeof v=="function"&&o.push(v),a())},d=s(()=>t.call(r&&r.instances[i],e,n,c));let p=Promise.resolve(d);t.length<3&&(p=p.then(c)),p.catch(v=>l(v))})}function Z1(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(lE(l)){const d=(l.__vccOpts||l)[e];d&&s.push(ad(d,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const p=Q7(d)?d.default:d;o.mods[a]=d,o.components[a]=p;const g=(p.__vccOpts||p)[e];return g&&ad(g,n,r,o,a,i)()}))}}return s}function V4(t){const e=Mu(Vy),n=Mu(F_),r=Qn(()=>{const l=Yn(t.to);return e.resolve(l)}),i=Qn(()=>{const{matched:l}=r.value,{length:c}=l,d=l[c-1],p=n.matched;if(!d||!p.length)return-1;const v=p.findIndex(Mp.bind(null,d));if(v>-1)return v;const g=U4(l[c-2]);return c>1&&U4(d)===g&&p[p.length-1].path!==g?p.findIndex(Mp.bind(null,l[c-2])):v}),s=Qn(()=>i.value>-1&&KB(n.params,r.value.params)),o=Qn(()=>i.value>-1&&i.value===n.matched.length-1&&pE(n.params,r.value.params));function a(l={}){if(ZB(l)){const c=e[Yn(t.replace)?"replace":"push"](Yn(t.to)).catch(Ug);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:Qn(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function qB(t){return t.length===1?t[0]:t}const YB=js({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:V4,setup(t,{slots:e}){const n=ou(V4(t)),{options:r}=Mu(Vy),i=Qn(()=>({[H4(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[H4(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&qB(e.default(n));return t.custom?s:Ay("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),_g=YB;function ZB(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function KB(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Ec(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function U4(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const H4=(t,e,n)=>t??e??n,XB=js({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Mu(gb),i=Qn(()=>t.route||r.value),s=Mu($4,0),o=Qn(()=>{let c=Yn(s);const{matched:d}=i.value;let p;for(;(p=d[c])&&!p.components;)c++;return c}),a=Qn(()=>i.value.matched[o.value]);jg($4,Qn(()=>o.value+1)),jg(GB,a),jg(gb,i);const l=St();return ki(()=>[l.value,a.value,t.name],([c,d,p],[v,g,x])=>{d&&(d.instances[p]=c,g&&g!==d&&c&&c===v&&(d.leaveGuards.size||(d.leaveGuards=g.leaveGuards),d.updateGuards.size||(d.updateGuards=g.updateGuards))),c&&d&&(!g||!Mp(d,g)||!v)&&(d.enterCallbacks[p]||[]).forEach(E=>E(c))},{flush:"post"}),()=>{const c=i.value,d=t.name,p=a.value,v=p&&p.components[d];if(!v)return W4(n.default,{Component:v,route:c});const g=p.props[d],x=g?g===!0?c.params:typeof g=="function"?g(c):g:null,k=Ay(v,os({},x,e,{onVnodeUnmounted:A=>{A.component.isUnmounted&&(p.instances[d]=null)},ref:l}));return W4(n.default,{Component:k,route:c})||k}}});function W4(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const _E=XB;function JB(t){const e=jB(t.routes,t),n=t.parseQuery||HB,r=t.stringifyQuery||z4,i=t.history,s=tg(),o=tg(),a=tg(),l=v_(Kh);let c=Kh;sp&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=q1.bind(null,he=>""+he),p=q1.bind(null,dB),v=q1.bind(null,mm);function g(he,X){let J,De;return mE(he)?(J=e.getRecordMatcher(he),De=X):De=he,e.addRoute(De,J)}function x(he){const X=e.getRecordMatcher(he);X&&e.removeRoute(X)}function E(){return e.getRoutes().map(he=>he.record)}function k(he){return!!e.getRecordMatcher(he)}function A(he,X){if(X=os({},X||l.value),typeof he=="string"){const ee=Y1(n,he,X.path),se=e.resolve({path:ee.path},X),ce=i.createHref(ee.fullPath);return os(ee,se,{params:v(se.params),hash:mm(ee.hash),redirectedFrom:void 0,href:ce})}let J;if(he.path!=null)J=os({},he,{path:Y1(n,he.path,X.path).path});else{const ee=os({},he.params);for(const se in ee)ee[se]==null&&delete ee[se];J=os({},he,{params:p(ee)}),X.params=p(X.params)}const De=e.resolve(J,X),Te=he.hash||"";De.params=d(v(De.params));const Je=gB(r,os({},he,{hash:uB(Te),path:De.path})),de=i.createHref(Je);return os({fullPath:Je,hash:Te,query:r===z4?WB(he.query):he.query||{}},De,{redirectedFrom:void 0,href:de})}function D(he){return typeof he=="string"?Y1(n,he,l.value.path):os({},he)}function j(he,X){if(c!==he)return kp(8,{from:X,to:he})}function Y(he){return pe(he)}function te(he){return Y(os(D(he),{replace:!0}))}function ge(he){const X=he.matched[he.matched.length-1];if(X&&X.redirect){const{redirect:J}=X;let De=typeof J=="function"?J(he):J;return typeof De=="string"&&(De=De.includes("?")||De.includes("#")?De=D(De):{path:De},De.params={}),os({query:he.query,hash:he.hash,params:De.path!=null?{}:he.params},De)}}function pe(he,X){const J=c=A(he),De=l.value,Te=he.state,Je=he.force,de=he.replace===!0,ee=ge(J);if(ee)return pe(os(D(ee),{state:typeof ee=="object"?os({},Te,ee.state):Te,force:Je,replace:de}),X||J);const se=J;se.redirectedFrom=X;let ce;return!Je&&mB(r,De,J)&&(ce=kp(16,{to:se,from:De}),Qe(De,De,!0,!1)),(ce?Promise.resolve(ce):Z(se,De)).catch(ze=>bh(ze)?bh(ze,2)?ze:we(ze):Q(ze,se,De)).then(ze=>{if(ze){if(bh(ze,2))return pe(os({replace:de},D(ze.to),{state:typeof ze.to=="object"?os({},Te,ze.to.state):Te,force:Je}),X||se)}else ze=I(se,De,!0,de,Te);return B(se,De,ze),ze})}function N(he,X){const J=j(he,X);return J?Promise.reject(J):Promise.resolve()}function $(he){const X=K.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(he):he()}function Z(he,X){let J;const[De,Te,Je]=QB(he,X);J=Z1(De.reverse(),"beforeRouteLeave",he,X);for(const ee of De)ee.leaveGuards.forEach(se=>{J.push(ad(se,he,X))});const de=N.bind(null,he,X);return J.push(de),fe(J).then(()=>{J=[];for(const ee of s.list())J.push(ad(ee,he,X));return J.push(de),fe(J)}).then(()=>{J=Z1(Te,"beforeRouteUpdate",he,X);for(const ee of Te)ee.updateGuards.forEach(se=>{J.push(ad(se,he,X))});return J.push(de),fe(J)}).then(()=>{J=[];for(const ee of Je)if(ee.beforeEnter)if(Ec(ee.beforeEnter))for(const se of ee.beforeEnter)J.push(ad(se,he,X));else J.push(ad(ee.beforeEnter,he,X));return J.push(de),fe(J)}).then(()=>(he.matched.forEach(ee=>ee.enterCallbacks={}),J=Z1(Je,"beforeRouteEnter",he,X,$),J.push(de),fe(J))).then(()=>{J=[];for(const ee of o.list())J.push(ad(ee,he,X));return J.push(de),fe(J)}).catch(ee=>bh(ee,8)?ee:Promise.reject(ee))}function B(he,X,J){a.list().forEach(De=>$(()=>De(he,X,J)))}function I(he,X,J,De,Te){const Je=j(he,X);if(Je)return Je;const de=X===Kh,ee=sp?history.state:{};J&&(De||de?i.replace(he.fullPath,os({scroll:de&&ee&&ee.scroll},Te)):i.push(he.fullPath,Te)),l.value=he,Qe(he,X,J,de),we()}let R;function z(){R||(R=i.listen((he,X,J)=>{if(!me.listening)return;const De=A(he),Te=ge(De);if(Te){pe(os(Te,{replace:!0,force:!0}),De).catch(Ug);return}c=De;const Je=l.value;sp&&SB(T4(Je.fullPath,J.delta),$y()),Z(De,Je).catch(de=>bh(de,12)?de:bh(de,2)?(pe(os(D(de.to),{force:!0}),De).then(ee=>{bh(ee,20)&&!J.delta&&J.type===vm.pop&&i.go(-1,!1)}).catch(Ug),Promise.reject()):(J.delta&&i.go(-J.delta,!1),Q(de,De,Je))).then(de=>{de=de||I(De,Je,!1),de&&(J.delta&&!bh(de,8)?i.go(-J.delta,!1):J.type===vm.pop&&bh(de,20)&&i.go(-1,!1)),B(De,Je,de)}).catch(Ug)}))}let U=tg(),V=tg(),re;function Q(he,X,J){we(he);const De=V.list();return De.length?De.forEach(Te=>Te(he,X,J)):console.error(he),Promise.reject(he)}function _e(){return re&&l.value!==Kh?Promise.resolve():new Promise((he,X)=>{U.add([he,X])})}function we(he){return re||(re=!he,z(),U.list().forEach(([X,J])=>he?J(he):X()),U.reset()),he}function Qe(he,X,J,De){const{scrollBehavior:Te}=t;if(!sp||!Te)return Promise.resolve();const Je=!J&&CB(T4(he.fullPath,0))||(De||!J)&&history.state&&history.state.scroll||null;return sa().then(()=>Te(he,X,Je)).then(de=>de&&LB(de)).catch(de=>Q(de,he,X))}const ae=he=>i.go(he);let H;const K=new Set,me={currentRoute:l,listening:!0,addRoute:g,removeRoute:x,clearRoutes:e.clearRoutes,hasRoute:k,getRoutes:E,resolve:A,options:t,push:Y,replace:te,go:ae,back:()=>ae(-1),forward:()=>ae(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:V.add,isReady:_e,install(he){const X=this;he.component("RouterLink",_g),he.component("RouterView",_E),he.config.globalProperties.$router=X,Object.defineProperty(he.config.globalProperties,"$route",{enumerable:!0,get:()=>Yn(l)}),sp&&!H&&l.value===Kh&&(H=!0,Y(i.location).catch(Te=>{}));const J={};for(const Te in Kh)Object.defineProperty(J,Te,{get:()=>l.value[Te],enumerable:!0});he.provide(Vy,X),he.provide(F_,m_(J)),he.provide(gb,l);const De=he.unmount;K.add(he),he.unmount=function(){K.delete(he),K.size<1&&(c=Kh,R&&R(),R=null,l.value=Kh,H=!1,re=!1),De()}}};function fe(he){return he.reduce((X,J)=>X.then(()=>$(J)),Promise.resolve())}return me}function QB(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>Mp(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Mp(c,l))||i.push(l))}return[n,r,i]}function Nm(){return Mu(Vy)}function eR(t){return Mu(F_)}const su=jp("notification",()=>{const t=St([]),e=St(0),n=St(null),r=Qn(()=>[...t.value].sort((p,v)=>v.timestamp-p.timestamp));function i({type:p,message:v,duration:g=5e3}){const x=++e.value,E=Date.now(),k={id:x,type:p,message:v,duration:g,timestamp:E};return t.value.push(k),n.value=x,g>0&&setTimeout(()=>{c(x)},g),x}const s=(p,v=5e3)=>i({type:"success",message:p,duration:v}),o=(p,v=5e3)=>i({type:"error",message:p,duration:v}),a=(p,v=5e3)=>i({type:"info",message:p,duration:v}),l=(p,v=5e3)=>i({type:"warning",message:p,duration:v});function c(p){const v=t.value.findIndex(g=>g.id===p);v!==-1&&t.value.splice(v,1),n.value===p&&(n.value=null)}function d(){t.value=[],n.value=null}return{notifications:r,lastAddedId:n,addNotification:i,removeNotification:c,clearAll:d,success:s,error:o,info:a,warning:l}}),tR=Object.freeze(Object.defineProperty({__proto__:null,useNotificationStore:su},Symbol.toStringTag,{value:"Module"}));var Pa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function j_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function wE(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}function nR(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var xE=nR,rR=typeof Pa=="object"&&Pa&&Pa.Object===Object&&Pa,iR=rR,sR=iR,oR=typeof self=="object"&&self&&self.Object===Object&&self,aR=sR||oR||Function("return this")(),LE=aR,lR=LE,uR=function(){return lR.Date.now()},cR=uR,hR=/\s/;function dR(t){for(var e=t.length;e--&&hR.test(t.charAt(e)););return e}var fR=dR,pR=fR,gR=/^\s+/;function mR(t){return t&&t.slice(0,pR(t)+1).replace(gR,"")}var vR=mR,yR=LE,bR=yR.Symbol,SE=bR,G4=SE,CE=Object.prototype,_R=CE.hasOwnProperty,wR=CE.toString,ng=G4?G4.toStringTag:void 0;function xR(t){var e=_R.call(t,ng),n=t[ng];try{t[ng]=void 0;var r=!0}catch{}var i=wR.call(t);return r&&(e?t[ng]=n:delete t[ng]),i}var LR=xR,SR=Object.prototype,CR=SR.toString;function ER(t){return CR.call(t)}var PR=ER,q4=SE,MR=LR,kR=PR,AR="[object Null]",TR="[object Undefined]",Y4=q4?q4.toStringTag:void 0;function DR(t){return t==null?t===void 0?TR:AR:Y4&&Y4 in Object(t)?MR(t):kR(t)}var OR=DR;function NR(t){return t!=null&&typeof t=="object"}var IR=NR,BR=OR,RR=IR,FR="[object Symbol]";function jR(t){return typeof t=="symbol"||RR(t)&&BR(t)==FR}var zR=jR,$R=vR,Z4=xE,VR=zR,K4=NaN,UR=/^[-+]0x[0-9a-f]+$/i,HR=/^0b[01]+$/i,WR=/^0o[0-7]+$/i,GR=parseInt;function qR(t){if(typeof t=="number")return t;if(VR(t))return K4;if(Z4(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Z4(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=$R(t);var n=HR.test(t);return n||WR.test(t)?GR(t.slice(2),n?2:8):UR.test(t)?K4:+t}var YR=qR,ZR=xE,K1=cR,X4=YR,KR="Expected a function",XR=Math.max,JR=Math.min;function QR(t,e,n){var r,i,s,o,a,l,c=0,d=!1,p=!1,v=!0;if(typeof t!="function")throw new TypeError(KR);e=X4(e)||0,ZR(n)&&(d=!!n.leading,p="maxWait"in n,s=p?XR(X4(n.maxWait)||0,e):s,v="trailing"in n?!!n.trailing:v);function g(ge){var pe=r,N=i;return r=i=void 0,c=ge,o=t.apply(N,pe),o}function x(ge){return c=ge,a=setTimeout(A,e),d?g(ge):o}function E(ge){var pe=ge-l,N=ge-c,$=e-pe;return p?JR($,s-N):$}function k(ge){var pe=ge-l,N=ge-c;return l===void 0||pe>=e||pe<0||p&&N>=s}function A(){var ge=K1();if(k(ge))return D(ge);a=setTimeout(A,E(ge))}function D(ge){return a=void 0,v&&r?g(ge):(r=i=void 0,o)}function j(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function Y(){return a===void 0?o:D(K1())}function te(){var ge=K1(),pe=k(ge);if(r=arguments,i=this,l=ge,pe){if(a===void 0)return x(l);if(p)return clearTimeout(a),a=setTimeout(A,e),g(l)}return a===void 0&&(a=setTimeout(A,e)),o}return te.cancel=j,te.flush=Y,te}var eF=QR;const tF=j_(eF),nF={class:"relative w-full"},rF={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},iF=["onClick"],J4=js({__name:"SearchBar",emits:["select-location"],setup(t,{emit:e}){const n=St(""),r=St([]),i=e,s=tF(async l=>{if(l.length<3){r.value=[];return}try{const d=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(l)}`)).json();r.value=d}catch(c){console.error("Erreur lors de la recherche d'adresse:",c),r.value=[]}},300);function o(){s(n.value)}function a(l){n.value=l.display_name,r.value=[],i("select-location",{lat:parseFloat(l.lat),lng:parseFloat(l.lon)})}return(l,c)=>(Oe(),Be("div",nF,[Tn(S("input",{"onUpdate:modelValue":c[0]||(c[0]=d=>n.value=d),onInput:o,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[zr,n.value]]),r.value.length>0?(Oe(),Be("div",rF,[(Oe(!0),Be(Sn,null,sr(r.value,d=>(Oe(),Be("div",{key:d.place_id,onClick:p=>a(d),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},kt(d.display_name),9,iF))),128))])):Jt("",!0)]))}}),sF={class:"perf-title"},oF={class:"perf-basic-stats"},aF={class:"perf-stat"},lF={class:"perf-stat"},uF={class:"perf-expand-btn"},cF={key:0,class:"perf-content"},hF={class:"perf-section"},dF={class:"perf-metrics"},fF={class:"perf-metric"},pF={class:"perf-metric-value"},gF={class:"perf-metric"},mF={class:"perf-metric-value"},vF={class:"perf-metric"},yF={class:"perf-metric-value"},bF={class:"perf-metric"},_F={class:"perf-metric-value"},wF={class:"perf-section"},xF={class:"perf-metrics"},LF={key:0,class:"perf-metric"},SF={class:"perf-metric-value"},CF={key:1,class:"perf-metric"},EF={class:"perf-metric-value"},PF={key:2,class:"perf-metric"},MF={class:"perf-metric-value"},kF={class:"perf-section"},AF={class:"perf-table"},TF={class:"perf-table-cell"},DF={class:"perf-table-cell"},OF={class:"perf-table-cell"},NF={class:"perf-table-cell"},IF=["onClick"],BF={key:0,class:"perf-empty"},RF=js({__name:"PerformancePanel",props:{position:{}},setup(t){const n=t.position||"bottom-left",r=St(!1),{isQueryParamEnabled:i,isRecording:s,measures:o,longTasks:a,memorySnapshots:l,framesPerSecond:c,operationHistory:d,startRecording:p,stopRecording:v,clearRecording:g,captureMemorySnapshot:x,getSlowOperations:E,getPerformanceReport:k,getOperationDetails:A}=Vp(),D=Qn(()=>{const I=k()??{totalMeasures:0,totalLongTasks:0,slowestOperations:[],averageFps:0,memoryUsage:null};return{totalMeasures:I.totalMeasures,totalLongTasks:I.totalLongTasks,averageDuration:I.slowestOperations.length>0?I.slowestOperations.reduce((R,z)=>R+z.duration,0)/I.slowestOperations.length:0,fps:I.averageFps,slowestOperations:I.slowestOperations,memoryUsage:I.memoryUsage}}),j=Qn(()=>(k()??{slowestOperations:[]}).slowestOperations.slice(0,5).map(R=>({operation:R.name,component:R.component||"unknown",durationMs:R.duration,timestamp:R.startTime}))),Y=St(null);mo(()=>{i.value&&(Y.value=window.setInterval(()=>{x()},1e3))}),Ju(()=>{Y.value!==null&&clearInterval(Y.value)});function te(I){return I===void 0?"N/A":I<1024?I+" B":I<1024*1024?(I/1024).toFixed(2)+" KB":I<1024*1024*1024?(I/(1024*1024)).toFixed(2)+" MB":(I/(1024*1024*1024)).toFixed(2)+" GB"}function ge(I){return I.toFixed(2)}const pe=()=>{x()};function N(){const I=k(),R="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(I,null,2)),z=document.createElement("a");z.setAttribute("href",R),z.setAttribute("download","performance_report.json"),document.body.appendChild(z),z.click(),z.remove()}function $(){g(),pe()}function Z(){const I=k();navigator.clipboard.writeText(JSON.stringify(I,null,2)).then(()=>{alert("Données de performance copiées dans le presse-papiers")}).catch(R=>{console.error("Erreur lors de la copie des données",R),alert("Erreur lors de la copie des données")})}async function B(I){const R=A(I.operation,I.timestamp);if(!R){alert("Impossible de trouver les détails de cette opération");return}const z={operation:{...R.operation,startTimeRelative:"0ms",startTimeAbsolute:new Date(R.operation.startTime).toISOString()},context:{...R.context,relatedOperations:R.context.relatedOperations.map(U=>({...U,startTime:`+${U.startTime.toFixed(2)}ms`})),longTasks:R.context.longTasks.map(U=>({...U,startTime:`+${U.startTime.toFixed(2)}ms`})),memorySnapshots:R.context.memorySnapshots.map(U=>({...U,timestamp:`+${U.timestamp.toFixed(2)}ms`,usedJSHeapSize:U.usedJSHeapSize?te(U.usedJSHeapSize):"N/A",totalJSHeapSize:U.totalJSHeapSize?te(U.totalJSHeapSize):"N/A"}))},summary:{...R.summary,memoryDelta:te(R.summary.memoryDelta),maxLongTaskDuration:`${R.summary.maxLongTaskDuration.toFixed(2)}ms`}};try{await navigator.clipboard.writeText(JSON.stringify(z,null,2)),alert("Détails de l'opération copiés dans le presse-papiers")}catch(U){console.error("Erreur lors de la copie des détails",U),alert("Erreur lors de la copie des détails")}}return(I,R)=>{var z,U,V,re,Q,_e;return Yn(i)?(Oe(),Be("div",{key:0,class:Di(["performance-panel",`position-${Yn(n)}`,{expanded:r.value}])},[S("div",{class:"perf-header",onClick:R[0]||(R[0]=we=>r.value=!r.value)},[S("div",sF,[S("div",{class:Di(["perf-indicator",{active:Yn(s)}])},null,2),R[1]||(R[1]=S("span",null,"Performance",-1))]),S("div",oF,[S("span",aF,kt(D.value.fps)+" FPS",1),S("span",lF,kt(ge(D.value.averageDuration))+"ms",1)]),S("button",uF,kt(r.value?"▼":"▲"),1)]),r.value?(Oe(),Be("div",cF,[S("div",hF,[R[6]||(R[6]=S("h3",null,"Métriques générales",-1)),S("div",dF,[S("div",fF,[R[2]||(R[2]=S("span",{class:"perf-metric-label"},"Mesures",-1)),S("span",pF,kt(D.value.totalMeasures),1)]),S("div",gF,[R[3]||(R[3]=S("span",{class:"perf-metric-label"},"Tâches longues",-1)),S("span",mF,kt(D.value.totalLongTasks),1)]),S("div",vF,[R[4]||(R[4]=S("span",{class:"perf-metric-label"},"Durée moyenne",-1)),S("span",yF,kt(ge(D.value.averageDuration))+"ms",1)]),S("div",bF,[R[5]||(R[5]=S("span",{class:"perf-metric-label"},"FPS",-1)),S("span",_F,kt(D.value.fps),1)])])]),S("div",wF,[R[10]||(R[10]=S("h3",null,"Mémoire",-1)),S("div",xF,[((z=D.value.memoryUsage)==null?void 0:z.usedJSHeapSize)!==void 0?(Oe(),Be("div",LF,[R[7]||(R[7]=S("span",{class:"perf-metric-label"},"Utilisée",-1)),S("span",SF,kt(te((U=D.value.memoryUsage)==null?void 0:U.usedJSHeapSize)),1)])):Jt("",!0),((V=D.value.memoryUsage)==null?void 0:V.totalJSHeapSize)!==void 0?(Oe(),Be("div",CF,[R[8]||(R[8]=S("span",{class:"perf-metric-label"},"Totale",-1)),S("span",EF,kt(te((re=D.value.memoryUsage)==null?void 0:re.totalJSHeapSize)),1)])):Jt("",!0),((Q=D.value.memoryUsage)==null?void 0:Q.jsHeapSizeLimit)!==void 0?(Oe(),Be("div",PF,[R[9]||(R[9]=S("span",{class:"perf-metric-label"},"Limite",-1)),S("span",MF,kt(te((_e=D.value.memoryUsage)==null?void 0:_e.jsHeapSizeLimit)),1)])):Jt("",!0)])]),S("div",kF,[R[13]||(R[13]=S("h3",null,"Opérations les plus lentes",-1)),S("div",AF,[R[12]||(R[12]=nu('<div class="perf-table-header" data-v-fefe39b0><div class="perf-table-cell" data-v-fefe39b0>Opération</div><div class="perf-table-cell" data-v-fefe39b0>Composant</div><div class="perf-table-cell" data-v-fefe39b0>Durée</div><div class="perf-table-cell" data-v-fefe39b0>Actions</div></div>',1)),(Oe(!0),Be(Sn,null,sr(j.value,we=>(Oe(),Be("div",{class:"perf-table-row",key:we.timestamp},[S("div",TF,kt(we.operation),1),S("div",DF,kt(we.component),1),S("div",OF,kt(ge(we.durationMs))+"ms",1),S("div",NF,[S("button",{onClick:Qe=>B(we),class:"perf-action-button",title:"Copier les détails"},R[11]||(R[11]=[S("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,IF)])]))),128)),j.value.length===0?(Oe(),Be("div",BF," Aucune opération enregistrée ")):Jt("",!0)])]),S("div",{class:"perf-actions"},[S("button",{onClick:$,class:"perf-button"}," Réinitialiser "),S("button",{onClick:N,class:"perf-button"}," Télécharger "),S("button",{onClick:Z,class:"perf-button"}," Copier ")])])):Jt("",!0)],2)):Jt("",!0)}}}),ih=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},FF=ih(RF,[["__scopeId","data-v-fefe39b0"]]),jF={key:0,class:"pwa-update-notification"},zF=js({__name:"PWAUpdateNotification",setup(t,{expose:e}){const n=St(!1),r=async()=>{window.location.reload(),n.value=!1},i=()=>{n.value=!1};return e({showUpdateNotification:n,refreshApp:r,closeNotification:i}),(s,o)=>n.value?(Oe(),Be("div",jF,[S("div",{class:"pwa-update-content"},[o[0]||(o[0]=S("p",null,"Une nouvelle version est disponible",-1)),S("div",{class:"pwa-update-actions"},[S("button",{onClick:r,class:"pwa-update-button"},"Mettre à jour"),S("button",{onClick:i,class:"pwa-close-button"},"Plus tard")])])])):Jt("",!0)}}),$F=ih(zF,[["__scopeId","data-v-aa687693"]]),VF="/static/frontend/img/icons/android-chrome-192x192.png",UF={class:"prompt-content"},HF={class:"prompt-body"},WF={key:0,class:"install-instructions ios"},GF={key:1,class:"install-instructions android"},qF={key:2,class:"install-instructions desktop"},YF={key:3,class:"install-instructions desktop"},ZF=js({__name:"PWAInstallPrompt",setup(t){const e=St(!1),n=St(!1),r=St(null);St(null);const i=St(!1),s=St(!1),o=St(!1),a=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,l=()=>{const g=localStorage.getItem("pwaPromptLastClosed");if(!g)return!1;const x=3*24*60*60*1e3;return Date.now()-parseInt(g)<x},c=()=>{i.value=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,s.value=/Android/.test(navigator.userAgent),o.value=!i.value&&!s.value,window.addEventListener("beforeinstallprompt",g=>{g.preventDefault(),r.value=g,e.value=!0,n.value=!0}),window.addEventListener("appinstalled",g=>{console.log("Application installée avec succès",g),e.value=!1}),!a()&&(l()||setTimeout(()=>{e.value=!0,n.value=!0},3e3))},d=()=>{window.removeEventListener("beforeinstallprompt",()=>{}),window.removeEventListener("appinstalled",()=>{})};mo(()=>{c()}),Td(()=>{d()});const p=async()=>{if(!r.value){console.log("Installation non disponible");return}try{r.value.prompt();const g=await r.value.userChoice;r.value=null,g.outcome==="accepted"?(console.log("Installation acceptée"),e.value=!1):console.log("Installation refusée")}catch(g){console.error("Erreur lors de l'installation:",g)}},v=()=>{e.value=!1,localStorage.setItem("pwaPromptLastClosed",Date.now().toString())};return(g,x)=>e.value?(Oe(),Be("div",{key:0,class:Di(["pwa-install-prompt",{fullscreen:n.value}])},[S("div",UF,[S("div",{class:"prompt-header"},[x[1]||(x[1]=S("div",{class:"app-info"},[S("img",{src:VF,alt:"TagMap Logo",class:"app-logo"}),S("div",{class:"app-details"},[S("h2",null,"Installer TagMap"),S("p",null,"Solution innovante de cartographie et gestion de projets")])],-1)),S("button",{onClick:v,class:"close-button","aria-label":"Fermer"},x[0]||(x[0]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[S("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),S("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),S("div",HF,[i.value?(Oe(),Be("div",WF,x[2]||(x[2]=[nu('<h3 data-v-48772823>Pour installer l&#39;application sur votre iPhone :</h3><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>1</div><div class="step-content" data-v-48772823><p data-v-48772823>Appuyez sur <strong data-v-48772823>Partager</strong> <span class="ios-share-icon" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" data-v-48772823></path><polyline points="16 6 12 2 8 6" data-v-48772823></polyline><line x1="12" y1="2" x2="12" y2="15" data-v-48772823></line></svg></span></p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>2</div><div class="step-content" data-v-48772823><p data-v-48772823>Faites défiler et appuyez sur <strong data-v-48772823>Sur l&#39;écran d&#39;accueil</strong></p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>3</div><div class="step-content" data-v-48772823><p data-v-48772823>Appuyez sur <strong data-v-48772823>Ajouter</strong> en haut à droite</p></div></div>',4)]))):s.value?(Oe(),Be("div",GF,[x[3]||(x[3]=S("h3",null,"Pour installer l'application sur votre appareil :",-1)),x[4]||(x[4]=S("div",{class:"instruction-step"},[S("div",{class:"step-number"},"1"),S("div",{class:"step-content"},[S("p",null,"Appuyez sur le bouton ci-dessous")])],-1)),S("button",{onClick:p,class:"install-button"}," Installer l'application ")])):o.value?(Oe(),Be("div",qF,[x[5]||(x[5]=S("h3",null,"Pour installer l'application sur votre ordinateur :",-1)),x[6]||(x[6]=S("div",{class:"instruction-step"},[S("div",{class:"step-number"},"1"),S("div",{class:"step-content"},[S("p",null,"Cliquez sur le bouton ci-dessous pour installer l'application")])],-1)),S("button",{onClick:p,class:"install-button"}," Installer l'application ")])):(Oe(),Be("div",YF,x[7]||(x[7]=[nu('<h3 data-v-48772823>Pour installer l&#39;application sur votre ordinateur :</h3><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>1</div><div class="step-content" data-v-48772823><p data-v-48772823>Cliquez sur l&#39;icône d&#39;installation dans la barre d&#39;adresse</p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>2</div><div class="step-content" data-v-48772823><p data-v-48772823>Cliquez sur &quot;Installer&quot;</p></div></div>',3)])))]),S("div",{class:"prompt-footer"},[x[8]||(x[8]=nu('<div class="benefits" data-v-48772823><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" data-v-48772823></path></svg><span data-v-48772823>Sécurisé</span></div><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><circle cx="12" cy="12" r="10" data-v-48772823></circle><polyline points="12 6 12 12 16 14" data-v-48772823></polyline></svg><span data-v-48772823>Rapide</span></div><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" data-v-48772823></path></svg><span data-v-48772823>Hors ligne</span></div></div>',1)),S("button",{onClick:v,class:"remind-later"},"Me le rappeler plus tard")])])],2)):Jt("",!0)}}),KF=ih(ZF,[["__scopeId","data-v-48772823"]]),XF={class:"h-screen flex flex-col"},JF={key:0,class:"bg-white shadow-sm z-[2500] flex-shrink-0"},QF={class:"mx-auto px-4 sm:px-6 lg:px-8"},e9={class:"flex h-16 items-center justify-between"},t9={class:"flex items-center"},n9={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},r9={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},i9={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},s9={class:"hidden md:flex md:ml-6 space-x-8"},o9={key:0,class:"flex-1 mx-2"},a9={class:"hidden md:block"},l9={class:"md:hidden"},u9={key:1,class:"flex-1"},c9={class:"flex items-center space-x-2 md:space-x-4"},h9={class:"relative"},d9={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},f9={class:"flex items-center justify-between w-full"},p9={class:"flex items-center space-x-3"},g9={class:"max-h-72 overflow-y-auto"},m9={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},v9={class:"flex items-start"},y9={class:"flex-shrink-0 mr-3"},b9={key:0,class:"h-6 w-6 md:h-5 md:w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},_9={key:1,class:"h-6 w-6 md:h-5 md:w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},w9={key:2,class:"h-6 w-6 md:h-5 md:w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},x9={key:3,class:"h-6 w-6 md:h-5 md:w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},L9={class:"flex-1"},S9={class:"text-sm md:text-sm text-gray-800"},C9=["onClick"],E9={class:"relative"},P9={class:"hidden md:flex flex-col items-end"},M9={class:"text-sm font-medium text-gray-700"},k9={key:0,class:"text-xs text-gray-500"},A9=["src","alt"],T9={class:"md:hidden px-4 py-2 border-b border-gray-100 flex justify-between items-center"},D9={class:"text-sm font-semibold text-gray-700"},O9={class:"text-xs text-gray-500"},N9={key:0,class:"md:hidden fixed inset-0 bg-white shadow-lg z-[3000] border-t border-gray-200",style:{top:"var(--header-height)"}},I9={class:"space-y-1 px-2 pb-3 pt-2"},B9=js({__name:"App",setup(t){const e=Nm(),n=ma(),r=su(),i=St(!1),s=St(!1),o=St(!1),a=St(!1),l=St(null),c=St(!1),d=St(!1),p=St(null),v=St("13px"),g=St("65px"),x=St(null),E=St(null),k=St(!1);function A(){d.value=window.innerWidth<768}mo(()=>{A(),window.addEventListener("resize",A),window.addEventListener("resize",D),window.addEventListener("pwa-update-available",()=>{k.value=!0})}),Td(()=>{window.removeEventListener("resize",A),window.removeEventListener("resize",D),window.removeEventListener("pwa-update-available",()=>{})});function D(){if(!p.value)return;const U=p.value.getBoundingClientRect();v.value=`${U.top+window.scrollY+5}px`;const V=U.left+U.width/2;g.value=`${window.innerWidth-V-22}px`}const j=Qn(()=>{const U=n.user;if(!U)return"";const V=`${U.first_name} ${U.last_name.toUpperCase()}`;return U.company_name?`${V} (${U.company_name})`:V}),Y=Qn(()=>{var V;switch((V=n.user)==null?void 0:V.user_type){case"admin":return"Accès administrateur";case"entreprise":return"Accès entreprise";case"salarie":return"Accès salarie";case"visiteur":return"Accès visiteur";default:return""}}),te=Qn(()=>{var U;return((U=n.user)==null?void 0:U.user_type)==="admin"}),ge=Qn(()=>n.isAuthenticated),pe=[{name:"Carte",to:"/"},{name:"Météo",to:"/meteo"},{name:"Notes",to:"/notes"}],N=Qn(()=>{var V;if(!ge.value)return[];const U=[...pe];return(te.value||((V=n.user)==null?void 0:V.user_type)==="entreprise")&&U.push({name:"Utilisateurs",to:"/users"}),U}),$=Qn(()=>ge.value?[{name:"Mon profil",to:"/profile"}]:[]);async function Z(){try{await n.logout(),e.push("/login")}catch(U){console.error("Erreur lors de la déconnexion:",U)}}function B(U){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:U.lat,lng:U.lng,zoom:16}}))}mo(async()=>{console.log("App mounted, checking auth...");try{if(localStorage.getItem("token")){console.log("Token found, checking auth..."),await n.checkAuth(),await n.fetchUserProfile();const V=localStorage.getItem("lastPlanId");V&&window.dispatchEvent(new CustomEvent("load-last-plan",{detail:{planId:V}}))}else console.log("No token found")}catch(U){console.error("Auth check error:",U),e.push("/login")}});const I=Qn(()=>{const U="TagMap";if(!ge.value)return`${U} - Connexion`;const V=e.currentRoute.value,Q={home:"Carte",meteo:"Météo",notes:"Notes",users:"Utilisateurs",profile:"Mon profil",changePassword:"Changement de mot de passe",map:"Carte"}[V.name]||"";return Q?`${U} - ${Q}`:U});ki(I,U=>{document.title=U},{immediate:!0});const R=Qn(()=>r.notifications.length);function z(){r.clearAll(),o.value=!1}return dm(()=>{if(r.lastAddedId!==null){const U=r.notifications.find(V=>V.id===r.lastAddedId);U&&sa(()=>{D(),a.value=!0,l.value={id:U.id,message:U.message,type:U.type},requestAnimationFrame(()=>{setTimeout(()=>{c.value=!0,setTimeout(()=>{c.value=!1,setTimeout(()=>{var V;((V=l.value)==null?void 0:V.id)===U.id&&(l.value=null,a.value=!1)},300)},4e3)},50)})})}}),(U,V)=>{var re;return Oe(),Be("div",XF,[ge.value?(Oe(),Be("header",JF,[S("nav",QF,[S("div",e9,[S("div",t9,[S("button",{onClick:V[0]||(V[0]=Q=>s.value=!s.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden"},[V[7]||(V[7]=S("span",{class:"sr-only"},"Ouvrir le menu",-1)),(Oe(),Be("svg",n9,[s.value?(Oe(),Be("path",i9)):(Oe(),Be("path",r9))]))]),mi(Yn(_g),{to:"/",class:"text-xl font-semibold text-primary-600 truncate ml-2 md:ml-0"},{default:Yu(()=>V[8]||(V[8]=[S("span",{class:"md:inline hidden"},"TagMap",-1),S("span",{class:"md:hidden inline"},"TM",-1)])),_:1}),S("div",s9,[(Oe(!0),Be(Sn,null,sr(N.value,Q=>(Oe(),Ca(Yn(_g),{key:Q.name,to:Q.to,class:Di(["text-sm font-medium transition-colors duration-200",[U.$route.path===Q.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Yu(()=>[Kr(kt(Q.name),1)]),_:2},1032,["to","class"]))),128))])]),U.$route.path==="/"?(Oe(),Be("div",o9,[S("div",a9,[mi(J4,{onSelectLocation:B})]),S("div",l9,[mi(J4,{onSelectLocation:B,class:"max-w-full"})])])):(Oe(),Be("div",u9)),S("div",c9,[S("div",h9,[S("button",{ref_key:"bellButtonRef",ref:p,onClick:V[1]||(V[1]=Q=>o.value=!o.value),class:Di(["relative flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"animate-bell":a.value}])},V[9]||(V[9]=[S("span",{class:"sr-only"},"Voir les notifications",-1),S("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)]),2),o.value?(Oe(),Be("div",{key:0,class:"absolute right-0 mt-2 md:w-80 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:ru(d.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[S("div",d9,[S("div",f9,[V[11]||(V[11]=S("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),S("div",p9,[R.value>0?(Oe(),Be("button",{key:0,onClick:z,class:"text-xs text-primary-600 hover:text-primary-800"}," Tout effacer ")):Jt("",!0),S("button",{onClick:V[2]||(V[2]=Q=>o.value=!1),class:"md:hidden p-1 rounded-full hover:bg-gray-100"},V[10]||(V[10]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),S("div",g9,[R.value===0?(Oe(),Be("div",m9," Aucune notification ")):Jt("",!0),(Oe(!0),Be(Sn,null,sr(Yn(r).notifications,Q=>(Oe(),Be("div",{key:Q.id,class:"px-4 py-3 md:py-3 py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50"},[S("div",v9,[S("div",y9,[Q.type==="success"?(Oe(),Be("svg",b9,V[12]||(V[12]=[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Q.type==="error"?(Oe(),Be("svg",_9,V[13]||(V[13]=[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):Q.type==="warning"?(Oe(),Be("svg",w9,V[14]||(V[14]=[S("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(Oe(),Be("svg",x9,V[15]||(V[15]=[S("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))]),S("div",L9,[S("p",S9,kt(Q.message),1),S("button",{onClick:_e=>Yn(r).removeNotification(Q.id),class:"text-xs md:text-xs text-primary-600 hover:text-primary-800 mt-2 md:mt-1 py-1 md:py-0"}," Fermer ",8,C9)])])]))),128))])],4)):Jt("",!0)]),S("div",E9,[S("button",{onClick:V[3]||(V[3]=Q=>i.value=!i.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[S("div",P9,[S("span",M9,kt(j.value),1),Y.value?(Oe(),Be("span",k9,kt(Y.value),1)):Jt("",!0)]),S("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:((re=Yn(n).user)==null?void 0:re.logo)||"https://ui-avatars.com/api/?name="+encodeURIComponent(j.value),alt:j.value},null,8,A9)]),i.value?(Oe(),Be("div",{key:0,class:"absolute right-0 mt-2 md:w-48 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:ru(d.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[S("div",T9,[S("div",null,[S("div",D9,kt(j.value),1),S("div",O9,kt(Y.value),1)]),S("button",{onClick:V[4]||(V[4]=Q=>i.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},V[16]||(V[16]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),(Oe(!0),Be(Sn,null,sr($.value,Q=>(Oe(),Ca(Yn(_g),{key:Q.name,to:Q.to,class:"block px-4 md:py-2 py-3 text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",onClick:V[5]||(V[5]=_e=>i.value=!1)},{default:Yu(()=>[Kr(kt(Q.name),1)]),_:2},1032,["to"]))),128)),S("button",{onClick:Z,class:"block w-full px-4 md:py-2 py-3 text-left text-sm text-red-600 hover:bg-gray-50 font-medium"}," Déconnexion ")],4)):Jt("",!0)])])]),s.value?(Oe(),Be("div",N9,[S("div",I9,[(Oe(!0),Be(Sn,null,sr(N.value,Q=>(Oe(),Ca(Yn(_g),{key:Q.name,to:Q.to,class:Di(["block px-3 py-2 rounded-md text-base font-medium",[U.$route.path===Q.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:V[6]||(V[6]=_e=>s.value=!1)},{default:Yu(()=>[Kr(kt(Q.name),1)]),_:2},1032,["to","class"]))),128))])])):Jt("",!0)])])):Jt("",!0),S("main",{class:Di([U.$route.path==="/"&&!d.value?"overflow-hidden":"overflow-auto","flex-1 flex flex-col","md:h-[calc(100vh-64px)]"])},[mi(Yn(_E))],2),mi(FF,{position:"bottom-left"}),mi($F,{ref_key:"pwaUpdateNotification",ref:x},null,512),mi(KF,{ref_key:"pwaInstallPrompt",ref:E},null,512)])}}}),R9="modulepreload",F9=function(t){return"/static/frontend/"+t},Q4={},Ah=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=F9(l),l in Q4)return;Q4[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":R9,c||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),c)return new Promise((v,g)=>{p.addEventListener("load",v),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},j9={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},z9={class:"max-w-md w-full space-y-8"},$9={class:"space-y-4"},V9={class:"mt-1"},U9={class:"mt-1"},H9={class:"mt-1"},W9={key:0,class:"rounded-md bg-red-50 p-4"},G9={class:"flex"},q9={class:"ml-3"},Y9={class:"text-sm font-medium text-red-800"},Z9={key:1,class:"rounded-md bg-yellow-50 p-4"},K9={class:"flex"},X9={class:"ml-3"},J9={class:"mt-2 text-sm text-yellow-700"},Q9={class:"list-disc pl-5 space-y-1"},ej=["disabled"],tj={class:"absolute left-0 inset-y-0 flex items-center pl-3"},nj={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},rj={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ij=js({__name:"ChangePasswordForm",setup(t){const e=Nm(),n=ma(),r=ou({oldPassword:"",newPassword:"",confirmPassword:""}),i=St(!1),s=St("");mo(()=>{var c,d;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:n.isAuthenticated,userId:(c=n.user)==null?void 0:c.id,mustChangePassword:(d=n.user)==null?void 0:d.must_change_password})});const o=Qn(()=>{const c=[];return r.newPassword&&r.newPassword.length<8&&c.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&c.push("Les mots de passe ne correspondent pas"),c}),a=Qn(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function l(){var c,d,p,v,g,x,E,k;if(!a.value){s.value="Veuillez corriger les erreurs avant de continuer";return}if(!((c=n.user)!=null&&c.id)){s.value="Erreur : utilisateur non identifié";return}i.value=!0,s.value="";try{console.log("Submitting password change..."),await n.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),e.push("/")}catch(A){console.error("Password change failed:",A),(p=(d=A.response)==null?void 0:d.data)!=null&&p.detail?s.value=A.response.data.detail:(g=(v=A.response)==null?void 0:v.data)!=null&&g.old_password?s.value=A.response.data.old_password[0]:(E=(x=A.response)==null?void 0:x.data)!=null&&E.password?s.value=A.response.data.password[0]:((k=A.response)==null?void 0:k.status)===401?(s.value="Session expirée, veuillez vous reconnecter",await n.logout(),e.push("/login")):s.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(c,d)=>(Oe(),Be("div",j9,[S("div",z9,[d[12]||(d[12]=S("div",null,[S("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),S("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),S("form",{class:"mt-8 space-y-6",onSubmit:Cu(l,["prevent"])},[S("div",$9,[S("div",null,[d[3]||(d[3]=S("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),S("div",V9,[Tn(S("input",{id:"old-password","onUpdate:modelValue":d[0]||(d[0]=p=>r.oldPassword=p),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[zr,r.oldPassword]])])]),S("div",null,[d[4]||(d[4]=S("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),S("div",U9,[Tn(S("input",{id:"new-password","onUpdate:modelValue":d[1]||(d[1]=p=>r.newPassword=p),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[zr,r.newPassword]])]),d[5]||(d[5]=S("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),S("div",null,[d[6]||(d[6]=S("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),S("div",H9,[Tn(S("input",{id:"confirm-password","onUpdate:modelValue":d[2]||(d[2]=p=>r.confirmPassword=p),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[zr,r.confirmPassword]])])])]),s.value?(Oe(),Be("div",W9,[S("div",G9,[d[7]||(d[7]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",q9,[S("h3",Y9,kt(s.value),1)])])])):Jt("",!0),o.value.length>0?(Oe(),Be("div",Z9,[S("div",K9,[d[9]||(d[9]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),S("div",X9,[d[8]||(d[8]=S("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),S("div",J9,[S("ul",Q9,[(Oe(!0),Be(Sn,null,sr(o.value,(p,v)=>(Oe(),Be("li",{key:v},kt(p),1))),128))])])])])])):Jt("",!0),S("div",null,[S("button",{type:"submit",disabled:i.value||!a.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[S("span",tj,[i.value?(Oe(),Be("svg",rj,d[11]||(d[11]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Oe(),Be("svg",nj,d[10]||(d[10]=[S("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),Kr(" "+kt(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,ej)])],32)])]))}}),sj="/static/frontend/assets/background.svg",oj={class:"min-h-screen overflow-auto relative py-12 sm:px-6 lg:px-8"},aj={class:"container mx-auto relative z-10"},lj={class:"sm:mx-auto sm:w-full sm:max-w-md"},uj={class:"bg-white/95 backdrop-blur-sm py-8 px-6 shadow-xl rounded-xl sm:px-10 border border-white/20"},cj={key:0,class:"rounded-md bg-red-50 p-4"},hj={class:"flex"},dj={class:"ml-3"},fj={class:"text-sm font-medium text-red-800"},pj={class:"mt-1"},gj={class:"mt-1 relative"},mj=["type"],vj={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},yj={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},bj={class:"flex items-center justify-between"},_j={class:"flex items-center"},wj={class:"text-sm"},xj=["disabled"],Lj={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Sj={class:"mt-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Cj={class:"mt-12"},Ej={class:"flex flex-wrap justify-center gap-2 mb-8"},Pj=["onClick"],Mj={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},kj={class:"flex items-center mb-4"},Aj={class:"text-2xl mr-2"},Tj={class:"text-xl font-semibold text-gray-900"},Dj={class:"text-gray-600 text-sm"},Oj={key:0,class:"flex justify-center mt-8 gap-2"},Nj=["onClick"],X1=6,Ij=js({__name:"LoginView",setup(t){const e=Nm(),n=ma(),r=St(!1),i=St(null),s=St(!1),o=St("Tous"),a=St(1),l=ou({username:"",password:"",rememberMe:!1}),c=[{type:"Liniculteur",sector:"Agriculture",icon:"🌾",text:"En tant qu'entreprise, j'ai mis en place un sous-compte « agriculteur » permettant la géolocalisation des parcelles. Cela offre à nos salariés et prestataires une visibilité complète sur l'ensemble des parcelles et facilite leur accès. De plus, ils peuvent y ajouter des notes et des photos si nécessaire. Grâce aux trackers, nous renforçons également la sécurité de nos machines contre le vol."},{type:"Agro industriel",sector:"Industrie",icon:"🏭",text:"La gestion des comptes et sous-comptes est un atout majeur pour limiter, filtrer et contrôler l'accès de nos salariés aux différentes tâches."},{type:"Agence de voyage",sector:"Tourisme",icon:"✈️",text:"L'outil nous permet de créer gratuitement et sans limite des sous-comptes clients, d'établir des itinéraires personnalisés avec des points d'intérêt."},{type:"Industriel agroalimentaire",sector:"Industrie",icon:"🌱",text:"Nous disposons d'un compte entreprise avec des sous-comptes dédiés à chaque culture. Nos techniciens et agriculteurs partenaires peuvent ainsi ajouter des annotations et photo sur les parcelles. Grâce aux stations météo connectées, nous optimisons la gestion des tours d'irrigation par secteur géographique en fonction des précipitations."},{type:"Conseil municipal",sector:"Collectivité",icon:"🏛️",text:"Cette solution nous permet de gagner en efficacité dans la gestion des tâches à réaliser, en les géolocalisant et en offrant à nos employés communaux la possibilité d'ajouter des commentaires et des photos sur chaque tâche géoréférencée."},{type:"Location de matériel",sector:"Services",icon:"🚜",text:"Cette solution nous permet de géolocaliser notre flotte grâce à des trackers sans abonnement, avec uniquement un abonnement à la plateforme."},{type:"Agriculteur",sector:"Agriculture",icon:"👨‍🌾",text:"J'ai équipé tous mes canons d'enrouleurs de trackers et de caméras pour dissuader le vol de batteries."},{type:"Semencier",sector:"Agriculture",icon:"🌱",text:"Nous assurons la géolocalisation de l'ensemble de nos parcelles en France."},{type:"Concessionnaire irrigation",sector:"Services",icon:"💧",text:"Nous avons géolocalisé tous les forages de nos clients et ajouté en commentaire la procédure d'entrée, facilitant ainsi le travail de nos techniciens et agriculteurs lors des interventions."},{type:"Entreprise paysagiste",sector:"Services",icon:"🌳",text:"Nous géolocalisons tous nos chantiers et ajoutons une photo du chantier terminé en commentaire, servant de preuve en cas de litige."}],d=Qn(()=>["Tous",...new Set(c.map(E=>E.sector))]),p=Qn(()=>{let x=o.value==="Tous"?c:c.filter(A=>A.sector===o.value);const E=(a.value-1)*X1,k=E+X1;return x.slice(E,k)}),v=Qn(()=>{const x=o.value==="Tous"?c:c.filter(E=>E.sector===o.value);return Math.ceil(x.length/X1)});mo(async()=>{var x;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE);try{if((x=window.INITIAL_STATE)!=null&&x.isAuthenticated){console.log("User is authenticated, redirecting to home"),e.push("/");return}await n.restoreSession()&&(console.log("Session restored, redirecting to home"),e.push("/"))}catch(E){console.error("Error during initialization:",E),i.value=null}});async function g(){var x,E,k,A,D,j,Y,te,ge;r.value=!0,i.value=null;try{if(!l.username||!l.password){i.value="Veuillez remplir tous les champs";return}await n.login(l.username,l.password),(x=n.user)!=null&&x.must_change_password?e.push("/change-password"):e.push("/")}catch(pe){console.error("Login error:",pe),((E=pe==null?void 0:pe.response)==null?void 0:E.status)===500?i.value="Le service est temporairement indisponible. Veuillez réessayer dans quelques instants.":((k=pe==null?void 0:pe.response)==null?void 0:k.status)===401||((A=pe==null?void 0:pe.response)==null?void 0:A.status)===403?i.value="Identifiants incorrects. Veuillez vérifier votre nom d'utilisateur et mot de passe.":(j=(D=pe==null?void 0:pe.response)==null?void 0:D.data)!=null&&j.detail?i.value=pe.response.data.detail:(ge=(te=(Y=pe==null?void 0:pe.response)==null?void 0:Y.data)==null?void 0:te.non_field_errors)!=null&&ge[0]?i.value=pe.response.data.non_field_errors[0]:(pe==null?void 0:pe.message)==="Network Error"?i.value="Impossible de se connecter au serveur. Veuillez vérifier votre connexion internet.":i.value="Une erreur est survenue lors de la connexion. Veuillez réessayer."}finally{r.value=!1}}return(x,E)=>{const k=wS("router-link");return Oe(),Be("div",oj,[S("div",{class:"fixed inset-0 z-0",style:ru({backgroundImage:`url(${Yn(sj)})`,backgroundSize:"400px",backgroundRepeat:"repeat",filter:"blur(1px) opacity(0.15)"})},null,4),E[16]||(E[16]=S("div",{class:"fixed inset-0 z-0 bg-gradient-to-br from-white/40 via-transparent to-primary-900/10"},null,-1)),S("div",aj,[S("div",lj,[S("div",uj,[E[12]||(E[12]=S("div",{class:"text-center mb-8"},[S("h2",{class:"text-3xl font-bold text-gray-900 mb-2"}," TagMap "),S("p",{class:"text-sm text-gray-600"}," Solution innovante de cartographie et gestion de projets ")],-1)),S("form",{class:"space-y-6",onSubmit:Cu(g,["prevent"])},[i.value?(Oe(),Be("div",cj,[S("div",hj,[E[4]||(E[4]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",dj,[S("h3",fj,kt(i.value),1)])])])):Jt("",!0),S("div",null,[E[5]||(E[5]=S("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),S("div",pj,[Tn(S("input",{id:"username","onUpdate:modelValue":E[0]||(E[0]=A=>l.username=A),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[zr,l.username]])])]),S("div",null,[E[8]||(E[8]=S("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),S("div",gj,[Tn(S("input",{id:"password","onUpdate:modelValue":E[1]||(E[1]=A=>l.password=A),type:s.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,mj),[[D_,l.password]]),S("button",{type:"button",onClick:E[2]||(E[2]=A=>s.value=!s.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[s.value?(Oe(),Be("svg",vj,E[6]||(E[6]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(Oe(),Be("svg",yj,E[7]||(E[7]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),S("div",bj,[S("div",_j,[Tn(S("input",{id:"remember-me","onUpdate:modelValue":E[3]||(E[3]=A=>l.rememberMe=A),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Tl,l.rememberMe]]),E[9]||(E[9]=S("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),S("div",wj,[mi(k,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Yu(()=>E[10]||(E[10]=[Kr(" Mot de passe oublié ? ")])),_:1})])]),S("div",null,[S("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(Oe(),Be("svg",Lj,E[11]||(E[11]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Jt("",!0),Kr(" "+kt(r.value?"Connexion en cours...":"Se connecter"),1)],8,xj)])],32)])]),S("div",Sj,[E[14]||(E[14]=nu('<div class="mb-12 bg-white/90 backdrop-blur-sm p-8 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-6" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>💡</span><h3 class="text-xl font-bold text-gray-900" data-v-9ff7ee32>Équipements Connectés sans Abonnement</h3></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-v-9ff7ee32><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32>📍</div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Tracker GPS solaire</h4><p class="text-gray-600" data-v-9ff7ee32>Géolocalisez et sécurisez votre matériel</p></div></div><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32>🌤️</div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Station météo</h4><p class="text-gray-600" data-v-9ff7ee32>Optimisez vos décisions avec des données en temps réel</p></div></div></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8" data-v-9ff7ee32><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>👀📌</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Carte Interactive</h3></div><p class="text-gray-600" data-v-9ff7ee32>Imaginez... Une carte interactive où tout est sous contrôle ! Tout est centralisé, organisé et accessible en un clin d&#39;œil !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>👥💻🔄</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Collaboration en Temps Réel</h3></div><p class="text-gray-600" data-v-9ff7ee32>Travail d&#39;équipe simplifié : Collaborez en temps réel sur une interface ultra-intuitive. Vos équipes restent synchronisées et efficaces !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>🚜📸</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Cerveau Cartographique</h3></div><p class="text-gray-600" data-v-9ff7ee32>Un cerveau cartographique : Dessinez, annotez, planifiez, suivez !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>🔐🔑</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Accès Sécurisé</h3></div><p class="text-gray-600" data-v-9ff7ee32>Accès sécurisé et intelligent : Gérez les droits d&#39;accès de vos salariés et prestataires en un clic.</p></div></div>',2)),S("div",Cj,[E[13]||(E[13]=S("h3",{class:"text-2xl font-bold text-center text-gray-900 mb-8"},"Ils utilisent TagMap",-1)),S("div",Ej,[(Oe(!0),Be(Sn,null,sr(d.value,A=>(Oe(),Be("button",{key:A,onClick:D=>o.value=A,class:Di(["px-4 py-2 rounded-full text-sm font-medium transition-all duration-200",o.value===A?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},kt(A),11,Pj))),128))]),S("div",Mj,[(Oe(!0),Be(Sn,null,sr(p.value,A=>(Oe(),Be("div",{key:A.type,class:"bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20 transition-all duration-300 hover:shadow-xl"},[S("div",kj,[S("span",Aj,kt(A.icon),1),S("span",Tj,kt(A.type),1)]),S("p",Dj,kt(A.text),1)]))),128))]),v.value>1?(Oe(),Be("div",Oj,[(Oe(!0),Be(Sn,null,sr(v.value,A=>(Oe(),Be("button",{key:A,onClick:D=>a.value=A,class:Di(["w-8 h-8 rounded-full text-sm font-medium transition-all duration-200",a.value===A?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},kt(A),11,Nj))),128))])):Jt("",!0)])]),E[15]||(E[15]=S("div",{class:"h-16"},null,-1))])])}}}),Bj=ih(Ij,[["__scopeId","data-v-9ff7ee32"]]),e5="/static/frontend/assets/logo.svg";var mb={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Pa,function(n){var r="1.9.4";function i(u){var y,P,G,le;for(P=1,G=arguments.length;P<G;P++){le=arguments[P];for(y in le)u[y]=le[y]}return u}var s=Object.create||function(){function u(){}return function(y){return u.prototype=y,new u}}();function o(u,y){var P=Array.prototype.slice;if(u.bind)return u.bind.apply(u,P.call(arguments,1));var G=P.call(arguments,2);return function(){return u.apply(y,G.length?G.concat(P.call(arguments)):arguments)}}var a=0;function l(u){return"_leaflet_id"in u||(u._leaflet_id=++a),u._leaflet_id}function c(u,y,P){var G,le,Pe,ct;return ct=function(){G=!1,le&&(Pe.apply(P,le),le=!1)},Pe=function(){G?le=arguments:(u.apply(P,arguments),setTimeout(ct,y),G=!0)},Pe}function d(u,y,P){var G=y[1],le=y[0],Pe=G-le;return u===G&&P?u:((u-le)%Pe+Pe)%Pe+le}function p(){return!1}function v(u,y){if(y===!1)return u;var P=Math.pow(10,y===void 0?6:y);return Math.round(u*P)/P}function g(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function x(u){return g(u).split(/\s+/)}function E(u,y){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?s(u.options):{});for(var P in y)u.options[P]=y[P];return u.options}function k(u,y,P){var G=[];for(var le in u)G.push(encodeURIComponent(P?le.toUpperCase():le)+"="+encodeURIComponent(u[le]));return(!y||y.indexOf("?")===-1?"?":"&")+G.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function D(u,y){return u.replace(A,function(P,G){var le=y[G];if(le===void 0)throw new Error("No value provided for variable "+P);return typeof le=="function"&&(le=le(y)),le})}var j=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function Y(u,y){for(var P=0;P<u.length;P++)if(u[P]===y)return P;return-1}var te="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ge(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var pe=0;function N(u){var y=+new Date,P=Math.max(0,16-(y-pe));return pe=y+P,window.setTimeout(u,P)}var $=window.requestAnimationFrame||ge("RequestAnimationFrame")||N,Z=window.cancelAnimationFrame||ge("CancelAnimationFrame")||ge("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function B(u,y,P){if(P&&$===N)u.call(y);else return $.call(window,o(u,y))}function I(u){u&&Z.call(window,u)}var R={__proto__:null,extend:i,create:s,bind:o,get lastId(){return a},stamp:l,throttle:c,wrapNum:d,falseFn:p,formatNum:v,trim:g,splitWords:x,setOptions:E,getParamString:k,template:D,isArray:j,indexOf:Y,emptyImageUrl:te,requestFn:$,cancelFn:Z,requestAnimFrame:B,cancelAnimFrame:I};function z(){}z.extend=function(u){var y=function(){E(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},P=y.__super__=this.prototype,G=s(P);G.constructor=y,y.prototype=G;for(var le in this)Object.prototype.hasOwnProperty.call(this,le)&&le!=="prototype"&&le!=="__super__"&&(y[le]=this[le]);return u.statics&&i(y,u.statics),u.includes&&(U(u.includes),i.apply(null,[G].concat(u.includes))),i(G,u),delete G.statics,delete G.includes,G.options&&(G.options=P.options?s(P.options):{},i(G.options,u.options)),G._initHooks=[],G.callInitHooks=function(){if(!this._initHooksCalled){P.callInitHooks&&P.callInitHooks.call(this),this._initHooksCalled=!0;for(var Pe=0,ct=G._initHooks.length;Pe<ct;Pe++)G._initHooks[Pe].call(this)}},y},z.include=function(u){var y=this.prototype.options;return i(this.prototype,u),u.options&&(this.prototype.options=y,this.mergeOptions(u.options)),this},z.mergeOptions=function(u){return i(this.prototype.options,u),this},z.addInitHook=function(u){var y=Array.prototype.slice.call(arguments,1),P=typeof u=="function"?u:function(){this[u].apply(this,y)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(P),this};function U(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=j(u)?u:[u];for(var y=0;y<u.length;y++)u[y]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var V={on:function(u,y,P){if(typeof u=="object")for(var G in u)this._on(G,u[G],y);else{u=x(u);for(var le=0,Pe=u.length;le<Pe;le++)this._on(u[le],y,P)}return this},off:function(u,y,P){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var G in u)this._off(G,u[G],y);else{u=x(u);for(var le=arguments.length===1,Pe=0,ct=u.length;Pe<ct;Pe++)le?this._off(u[Pe]):this._off(u[Pe],y,P)}return this},_on:function(u,y,P,G){if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}if(this._listens(u,y,P)===!1){P===this&&(P=void 0);var le={fn:y,ctx:P};G&&(le.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(le)}},_off:function(u,y,P){var G,le,Pe;if(this._events&&(G=this._events[u],!!G)){if(arguments.length===1){if(this._firingCount)for(le=0,Pe=G.length;le<Pe;le++)G[le].fn=p;delete this._events[u];return}if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}var ct=this._listens(u,y,P);if(ct!==!1){var Ot=G[ct];this._firingCount&&(Ot.fn=p,this._events[u]=G=G.slice()),G.splice(ct,1)}}},fire:function(u,y,P){if(!this.listens(u,P))return this;var G=i({},y,{type:u,target:this,sourceTarget:y&&y.sourceTarget||this});if(this._events){var le=this._events[u];if(le){this._firingCount=this._firingCount+1||1;for(var Pe=0,ct=le.length;Pe<ct;Pe++){var Ot=le[Pe],Gt=Ot.fn;Ot.once&&this.off(u,Gt,Ot.ctx),Gt.call(Ot.ctx||this,G)}this._firingCount--}}return P&&this._propagateEvent(G),this},listens:function(u,y,P,G){typeof u!="string"&&console.warn('"string" type argument expected');var le=y;typeof y!="function"&&(G=!!y,le=void 0,P=void 0);var Pe=this._events&&this._events[u];if(Pe&&Pe.length&&this._listens(u,le,P)!==!1)return!0;if(G){for(var ct in this._eventParents)if(this._eventParents[ct].listens(u,y,P,G))return!0}return!1},_listens:function(u,y,P){if(!this._events)return!1;var G=this._events[u]||[];if(!y)return!!G.length;P===this&&(P=void 0);for(var le=0,Pe=G.length;le<Pe;le++)if(G[le].fn===y&&G[le].ctx===P)return le;return!1},once:function(u,y,P){if(typeof u=="object")for(var G in u)this._on(G,u[G],y,!0);else{u=x(u);for(var le=0,Pe=u.length;le<Pe;le++)this._on(u[le],y,P,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[l(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[l(u)],this},_propagateEvent:function(u){for(var y in this._eventParents)this._eventParents[y].fire(u.type,i({layer:u.target,propagatedFrom:u.target},u),!0)}};V.addEventListener=V.on,V.removeEventListener=V.clearAllEventListeners=V.off,V.addOneTimeEventListener=V.once,V.fireEvent=V.fire,V.hasEventListeners=V.listens;var re=z.extend(V);function Q(u,y,P){this.x=P?Math.round(u):u,this.y=P?Math.round(y):y}var _e=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};Q.prototype={clone:function(){return new Q(this.x,this.y)},add:function(u){return this.clone()._add(we(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(we(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new Q(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new Q(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=_e(this.x),this.y=_e(this.y),this},distanceTo:function(u){u=we(u);var y=u.x-this.x,P=u.y-this.y;return Math.sqrt(y*y+P*P)},equals:function(u){return u=we(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=we(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function we(u,y,P){return u instanceof Q?u:j(u)?new Q(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new Q(u.x,u.y):new Q(u,y,P)}function Qe(u,y){if(u)for(var P=y?[u,y]:u,G=0,le=P.length;G<le;G++)this.extend(P[G])}Qe.prototype={extend:function(u){var y,P;if(!u)return this;if(u instanceof Q||typeof u[0]=="number"||"x"in u)y=P=we(u);else if(u=ae(u),y=u.min,P=u.max,!y||!P)return this;return!this.min&&!this.max?(this.min=y.clone(),this.max=P.clone()):(this.min.x=Math.min(y.x,this.min.x),this.max.x=Math.max(P.x,this.max.x),this.min.y=Math.min(y.y,this.min.y),this.max.y=Math.max(P.y,this.max.y)),this},getCenter:function(u){return we((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return we(this.min.x,this.max.y)},getTopRight:function(){return we(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var y,P;return typeof u[0]=="number"||u instanceof Q?u=we(u):u=ae(u),u instanceof Qe?(y=u.min,P=u.max):y=P=u,y.x>=this.min.x&&P.x<=this.max.x&&y.y>=this.min.y&&P.y<=this.max.y},intersects:function(u){u=ae(u);var y=this.min,P=this.max,G=u.min,le=u.max,Pe=le.x>=y.x&&G.x<=P.x,ct=le.y>=y.y&&G.y<=P.y;return Pe&&ct},overlaps:function(u){u=ae(u);var y=this.min,P=this.max,G=u.min,le=u.max,Pe=le.x>y.x&&G.x<P.x,ct=le.y>y.y&&G.y<P.y;return Pe&&ct},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var y=this.min,P=this.max,G=Math.abs(y.x-P.x)*u,le=Math.abs(y.y-P.y)*u;return ae(we(y.x-G,y.y-le),we(P.x+G,P.y+le))},equals:function(u){return u?(u=ae(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function ae(u,y){return!u||u instanceof Qe?u:new Qe(u,y)}function H(u,y){if(u)for(var P=y?[u,y]:u,G=0,le=P.length;G<le;G++)this.extend(P[G])}H.prototype={extend:function(u){var y=this._southWest,P=this._northEast,G,le;if(u instanceof me)G=u,le=u;else if(u instanceof H){if(G=u._southWest,le=u._northEast,!G||!le)return this}else return u?this.extend(fe(u)||K(u)):this;return!y&&!P?(this._southWest=new me(G.lat,G.lng),this._northEast=new me(le.lat,le.lng)):(y.lat=Math.min(G.lat,y.lat),y.lng=Math.min(G.lng,y.lng),P.lat=Math.max(le.lat,P.lat),P.lng=Math.max(le.lng,P.lng)),this},pad:function(u){var y=this._southWest,P=this._northEast,G=Math.abs(y.lat-P.lat)*u,le=Math.abs(y.lng-P.lng)*u;return new H(new me(y.lat-G,y.lng-le),new me(P.lat+G,P.lng+le))},getCenter:function(){return new me((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new me(this.getNorth(),this.getWest())},getSouthEast:function(){return new me(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof me||"lat"in u?u=fe(u):u=K(u);var y=this._southWest,P=this._northEast,G,le;return u instanceof H?(G=u.getSouthWest(),le=u.getNorthEast()):G=le=u,G.lat>=y.lat&&le.lat<=P.lat&&G.lng>=y.lng&&le.lng<=P.lng},intersects:function(u){u=K(u);var y=this._southWest,P=this._northEast,G=u.getSouthWest(),le=u.getNorthEast(),Pe=le.lat>=y.lat&&G.lat<=P.lat,ct=le.lng>=y.lng&&G.lng<=P.lng;return Pe&&ct},overlaps:function(u){u=K(u);var y=this._southWest,P=this._northEast,G=u.getSouthWest(),le=u.getNorthEast(),Pe=le.lat>y.lat&&G.lat<P.lat,ct=le.lng>y.lng&&G.lng<P.lng;return Pe&&ct},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,y){return u?(u=K(u),this._southWest.equals(u.getSouthWest(),y)&&this._northEast.equals(u.getNorthEast(),y)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function K(u,y){return u instanceof H?u:new H(u,y)}function me(u,y,P){if(isNaN(u)||isNaN(y))throw new Error("Invalid LatLng object: ("+u+", "+y+")");this.lat=+u,this.lng=+y,P!==void 0&&(this.alt=+P)}me.prototype={equals:function(u,y){if(!u)return!1;u=fe(u);var P=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return P<=(y===void 0?1e-9:y)},toString:function(u){return"LatLng("+v(this.lat,u)+", "+v(this.lng,u)+")"},distanceTo:function(u){return X.distance(this,fe(u))},wrap:function(){return X.wrapLatLng(this)},toBounds:function(u){var y=180*u/40075017,P=y/Math.cos(Math.PI/180*this.lat);return K([this.lat-y,this.lng-P],[this.lat+y,this.lng+P])},clone:function(){return new me(this.lat,this.lng,this.alt)}};function fe(u,y,P){return u instanceof me?u:j(u)&&typeof u[0]!="object"?u.length===3?new me(u[0],u[1],u[2]):u.length===2?new me(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new me(u.lat,"lng"in u?u.lng:u.lon,u.alt):y===void 0?null:new me(u,y,P)}var he={latLngToPoint:function(u,y){var P=this.projection.project(u),G=this.scale(y);return this.transformation._transform(P,G)},pointToLatLng:function(u,y){var P=this.scale(y),G=this.transformation.untransform(u,P);return this.projection.unproject(G)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var y=this.projection.bounds,P=this.scale(u),G=this.transformation.transform(y.min,P),le=this.transformation.transform(y.max,P);return new Qe(G,le)},infinite:!1,wrapLatLng:function(u){var y=this.wrapLng?d(u.lng,this.wrapLng,!0):u.lng,P=this.wrapLat?d(u.lat,this.wrapLat,!0):u.lat,G=u.alt;return new me(P,y,G)},wrapLatLngBounds:function(u){var y=u.getCenter(),P=this.wrapLatLng(y),G=y.lat-P.lat,le=y.lng-P.lng;if(G===0&&le===0)return u;var Pe=u.getSouthWest(),ct=u.getNorthEast(),Ot=new me(Pe.lat-G,Pe.lng-le),Gt=new me(ct.lat-G,ct.lng-le);return new H(Ot,Gt)}},X=i({},he,{wrapLng:[-180,180],R:6371e3,distance:function(u,y){var P=Math.PI/180,G=u.lat*P,le=y.lat*P,Pe=Math.sin((y.lat-u.lat)*P/2),ct=Math.sin((y.lng-u.lng)*P/2),Ot=Pe*Pe+Math.cos(G)*Math.cos(le)*ct*ct,Gt=2*Math.atan2(Math.sqrt(Ot),Math.sqrt(1-Ot));return this.R*Gt}}),J=6378137,De={R:J,MAX_LATITUDE:85.0511287798,project:function(u){var y=Math.PI/180,P=this.MAX_LATITUDE,G=Math.max(Math.min(P,u.lat),-P),le=Math.sin(G*y);return new Q(this.R*u.lng*y,this.R*Math.log((1+le)/(1-le))/2)},unproject:function(u){var y=180/Math.PI;return new me((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*y,u.x*y/this.R)},bounds:function(){var u=J*Math.PI;return new Qe([-u,-u],[u,u])}()};function Te(u,y,P,G){if(j(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=y,this._c=P,this._d=G}Te.prototype={transform:function(u,y){return this._transform(u.clone(),y)},_transform:function(u,y){return y=y||1,u.x=y*(this._a*u.x+this._b),u.y=y*(this._c*u.y+this._d),u},untransform:function(u,y){return y=y||1,new Q((u.x/y-this._b)/this._a,(u.y/y-this._d)/this._c)}};function Je(u,y,P,G){return new Te(u,y,P,G)}var de=i({},X,{code:"EPSG:3857",projection:De,transformation:function(){var u=.5/(Math.PI*De.R);return Je(u,.5,-u,.5)}()}),ee=i({},de,{code:"EPSG:900913"});function se(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function ce(u,y){var P="",G,le,Pe,ct,Ot,Gt;for(G=0,Pe=u.length;G<Pe;G++){for(Ot=u[G],le=0,ct=Ot.length;le<ct;le++)Gt=Ot[le],P+=(le?"L":"M")+Gt.x+" "+Gt.y;P+=y?ft.svg?"z":"x":""}return P||"M0 0"}var ze=document.documentElement.style,Ce="ActiveXObject"in window,ve=Ce&&!document.addEventListener,Ve="msLaunchUri"in navigator&&!("documentMode"in document),Ye=Re("webkit"),Ze=Re("android"),_t=Re("android 2")||Re("android 3"),We=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ut=Ze&&Re("Google")&&We<537&&!("AudioNode"in window),Vt=!!window.opera,tn=!Ve&&Re("chrome"),bn=Re("gecko")&&!Ye&&!Vt&&!Ce,et=!tn&&Re("safari"),at=Re("phantom"),it="OTransition"in ze,zt=navigator.platform.indexOf("Win")===0,Kt=Ce&&"transition"in ze,Nn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!_t,yn="MozPerspective"in ze,Dn=!window.L_DISABLE_3D&&(Kt||Nn||yn)&&!it&&!at,er=typeof orientation<"u"||Re("mobile"),Qt=er&&Ye,Cn=er&&Nn,Mn=!window.PointerEvent&&window.MSPointerEvent,tr=!!(window.PointerEvent||Mn),yr="ontouchstart"in window||!!window.TouchEvent,xr=!window.L_NO_TOUCH&&(yr||tr),cr=er&&Vt,Gr=er&&bn,zs=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ai=function(){var u=!1;try{var y=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",p,y),window.removeEventListener("testPassiveEventSupport",p,y)}catch{}return u}(),Oo=function(){return!!document.createElement("canvas").getContext}(),Ds=!!(document.createElementNS&&se("svg").createSVGRect),nr=!!Ds&&function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Os=!Ds&&function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var y=u.firstChild;return y.style.behavior="url(#default#VML)",y&&typeof y.adj=="object"}catch{return!1}}(),No=navigator.platform.indexOf("Mac")===0,lt=navigator.platform.indexOf("Linux")===0;function Re(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var ft={ie:Ce,ielt9:ve,edge:Ve,webkit:Ye,android:Ze,android23:_t,androidStock:ut,opera:Vt,chrome:tn,gecko:bn,safari:et,phantom:at,opera12:it,win:zt,ie3d:Kt,webkit3d:Nn,gecko3d:yn,any3d:Dn,mobile:er,mobileWebkit:Qt,mobileWebkit3d:Cn,msPointer:Mn,pointer:tr,touch:xr,touchNative:yr,mobileOpera:cr,mobileGecko:Gr,retina:zs,passiveEvents:Ai,canvas:Oo,svg:Ds,vml:Os,inlineSvg:nr,mac:No,linux:lt},En=ft.msPointer?"MSPointerDown":"pointerdown",Un=ft.msPointer?"MSPointerMove":"pointermove",wn=ft.msPointer?"MSPointerUp":"pointerup",Ut=ft.msPointer?"MSPointerCancel":"pointercancel",Jn={touchstart:En,touchmove:Un,touchend:wn,touchcancel:Ut},Ct={touchstart:Jr,touchmove:zi,touchend:zi,touchcancel:zi},Ht={},Ln=!1;function jr(u,y,P){return y==="touchstart"&&xi(),Ct[y]?(P=Ct[y].bind(this,P),u.addEventListener(Jn[y],P,!1),P):(console.warn("wrong event specified:",y),p)}function un(u,y,P){if(!Jn[y]){console.warn("wrong event specified:",y);return}u.removeEventListener(Jn[y],P,!1)}function an(u){Ht[u.pointerId]=u}function qn(u){Ht[u.pointerId]&&(Ht[u.pointerId]=u)}function li(u){delete Ht[u.pointerId]}function xi(){Ln||(document.addEventListener(En,an,!0),document.addEventListener(Un,qn,!0),document.addEventListener(wn,li,!0),document.addEventListener(Ut,li,!0),Ln=!0)}function zi(u,y){if(y.pointerType!==(y.MSPOINTER_TYPE_MOUSE||"mouse")){y.touches=[];for(var P in Ht)y.touches.push(Ht[P]);y.changedTouches=[y],u(y)}}function Jr(u,y){y.MSPOINTER_TYPE_TOUCH&&y.pointerType===y.MSPOINTER_TYPE_TOUCH&&Er(y),zi(u,y)}function _r(u){var y={},P,G;for(G in u)P=u[G],y[G]=P&&P.bind?P.bind(u):P;return u=y,y.type="dblclick",y.detail=2,y.isTrusted=!1,y._simulated=!0,y}var kr=200;function di(u,y){u.addEventListener("dblclick",y);var P=0,G;function le(Pe){if(Pe.detail!==1){G=Pe.detail;return}if(!(Pe.pointerType==="mouse"||Pe.sourceCapabilities&&!Pe.sourceCapabilities.firesTouchEvents)){var ct=eo(Pe);if(!(ct.some(function(Gt){return Gt instanceof HTMLLabelElement&&Gt.attributes.for})&&!ct.some(function(Gt){return Gt instanceof HTMLInputElement||Gt instanceof HTMLSelectElement}))){var Ot=Date.now();Ot-P<=kr?(G++,G===2&&y(_r(Pe))):G=1,P=Ot}}}return u.addEventListener("click",le),{dblclick:y,simDblclick:le}}function Ir(u,y){u.removeEventListener("dblclick",y.dblclick),u.removeEventListener("click",y.simDblclick)}var on=$s(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ni=$s(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),vi=Ni==="webkitTransition"||Ni==="OTransition"?Ni+"End":"transitionend";function Yi(u){return typeof u=="string"?document.getElementById(u):u}function Qr(u,y){var P=u.style[y]||u.currentStyle&&u.currentStyle[y];if((!P||P==="auto")&&document.defaultView){var G=document.defaultView.getComputedStyle(u,null);P=G?G[y]:null}return P==="auto"?null:P}function fr(u,y,P){var G=document.createElement(u);return G.className=y||"",P&&P.appendChild(G),G}function On(u){var y=u.parentNode;y&&y.removeChild(u)}function Lr(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function Ls(u){var y=u.parentNode;y&&y.lastChild!==u&&y.appendChild(u)}function vo(u){var y=u.parentNode;y&&y.firstChild!==u&&y.insertBefore(u,y.firstChild)}function hr(u,y){if(u.classList!==void 0)return u.classList.contains(y);var P=qr(u);return P.length>0&&new RegExp("(^|\\s)"+y+"(\\s|$)").test(P)}function Pn(u,y){if(u.classList!==void 0)for(var P=x(y),G=0,le=P.length;G<le;G++)u.classList.add(P[G]);else if(!hr(u,y)){var Pe=qr(u);yi(u,(Pe?Pe+" ":"")+y)}}function rn(u,y){u.classList!==void 0?u.classList.remove(y):yi(u,g((" "+qr(u)+" ").replace(" "+y+" "," ")))}function yi(u,y){u.className.baseVal===void 0?u.className=y:u.className.baseVal=y}function qr(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function ui(u,y){"opacity"in u.style?u.style.opacity=y:"filter"in u.style&&ps(u,y)}function ps(u,y){var P=!1,G="DXImageTransform.Microsoft.Alpha";try{P=u.filters.item(G)}catch{if(y===1)return}y=Math.round(y*100),P?(P.Enabled=y!==100,P.Opacity=y):u.style.filter+=" progid:"+G+"(opacity="+y+")"}function $s(u){for(var y=document.documentElement.style,P=0;P<u.length;P++)if(u[P]in y)return u[P];return!1}function Ns(u,y,P){var G=y||new Q(0,0);u.style[on]=(ft.ie3d?"translate("+G.x+"px,"+G.y+"px)":"translate3d("+G.x+"px,"+G.y+"px,0)")+(P?" scale("+P+")":"")}function dr(u,y){u._leaflet_pos=y,ft.any3d?Ns(u,y):(u.style.left=y.x+"px",u.style.top=y.y+"px")}function Qs(u){return u._leaflet_pos||new Q(0,0)}var Vi,Gi,fi;if("onselectstart"in document)Vi=function(){Sr(window,"selectstart",Er)},Gi=function(){Ar(window,"selectstart",Er)};else{var kn=$s(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Vi=function(){if(kn){var u=document.documentElement.style;fi=u[kn],u[kn]="none"}},Gi=function(){kn&&(document.documentElement.style[kn]=fi,fi=void 0)}}function vn(){Sr(window,"dragstart",Er)}function Fr(){Ar(window,"dragstart",Er)}var hs,Vs;function aa(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(ds(),hs=u,Vs=u.style.outlineStyle,u.style.outlineStyle="none",Sr(window,"keydown",ds))}function ds(){hs&&(hs.style.outlineStyle=Vs,hs=void 0,Vs=void 0,Ar(window,"keydown",ds))}function ka(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function bl(u){var y=u.getBoundingClientRect();return{x:y.width/u.offsetWidth||1,y:y.height/u.offsetHeight||1,boundingClientRect:y}}var Vn={__proto__:null,TRANSFORM:on,TRANSITION:Ni,TRANSITION_END:vi,get:Yi,getStyle:Qr,create:fr,remove:On,empty:Lr,toFront:Ls,toBack:vo,hasClass:hr,addClass:Pn,removeClass:rn,setClass:yi,getClass:qr,setOpacity:ui,testProp:$s,setTransform:Ns,setPosition:dr,getPosition:Qs,get disableTextSelection(){return Vi},get enableTextSelection(){return Gi},disableImageDrag:vn,enableImageDrag:Fr,preventOutline:aa,restoreOutline:ds,getSizedParentNode:ka,getScale:bl};function Sr(u,y,P,G){if(y&&typeof y=="object")for(var le in y)Ta(u,le,y[le],P);else{y=x(y);for(var Pe=0,ct=y.length;Pe<ct;Pe++)Ta(u,y[Pe],P,G)}return this}var is="_leaflet_events";function Ar(u,y,P,G){if(arguments.length===1)Ko(u),delete u[is];else if(y&&typeof y=="object")for(var le in y)Xo(u,le,y[le],P);else if(y=x(y),arguments.length===2)Ko(u,function(Ot){return Y(y,Ot)!==-1});else for(var Pe=0,ct=y.length;Pe<ct;Pe++)Xo(u,y[Pe],P,G);return this}function Ko(u,y){for(var P in u[is]){var G=P.split(/\d/)[0];(!y||y(G))&&Xo(u,G,null,null,P)}}var Aa={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ta(u,y,P,G){var le=y+l(P)+(G?"_"+l(G):"");if(u[is]&&u[is][le])return this;var Pe=function(Ot){return P.call(G||u,Ot||window.event)},ct=Pe;!ft.touchNative&&ft.pointer&&y.indexOf("touch")===0?Pe=jr(u,y,Pe):ft.touch&&y==="dblclick"?Pe=di(u,Pe):"addEventListener"in u?y==="touchstart"||y==="touchmove"||y==="wheel"||y==="mousewheel"?u.addEventListener(Aa[y]||y,Pe,ft.passiveEvents?{passive:!1}:!1):y==="mouseenter"||y==="mouseleave"?(Pe=function(Ot){Ot=Ot||window.event,Bl(u,Ot)&&ct(Ot)},u.addEventListener(Aa[y],Pe,!1)):u.addEventListener(y,ct,!1):u.attachEvent("on"+y,Pe),u[is]=u[is]||{},u[is][le]=Pe}function Xo(u,y,P,G,le){le=le||y+l(P)+(G?"_"+l(G):"");var Pe=u[is]&&u[is][le];if(!Pe)return this;!ft.touchNative&&ft.pointer&&y.indexOf("touch")===0?un(u,y,Pe):ft.touch&&y==="dblclick"?Ir(u,Pe):"removeEventListener"in u?u.removeEventListener(Aa[y]||y,Pe,!1):u.detachEvent("on"+y,Pe),u[is][le]=null}function la(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function _l(u){return Ta(u,"wheel",la),this}function Da(u){return Sr(u,"mousedown touchstart dblclick contextmenu",la),u._leaflet_disable_click=!0,this}function Er(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function Kn(u){return Er(u),la(u),this}function eo(u){if(u.composedPath)return u.composedPath();for(var y=[],P=u.target;P;)y.push(P),P=P.parentNode;return y}function yo(u,y){if(!y)return new Q(u.clientX,u.clientY);var P=bl(y),G=P.boundingClientRect;return new Q((u.clientX-G.left)/P.x-y.clientLeft,(u.clientY-G.top)/P.y-y.clientTop)}var lu=ft.linux&&ft.chrome?window.devicePixelRatio:ft.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Au(u){return ft.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/lu:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function Bl(u,y){var P=y.relatedTarget;if(!P)return!0;try{for(;P&&P!==u;)P=P.parentNode}catch{return!1}return P!==u}var uu={__proto__:null,on:Sr,off:Ar,stopPropagation:la,disableScrollPropagation:_l,disableClickPropagation:Da,preventDefault:Er,stop:Kn,getPropagationPath:eo,getMousePosition:yo,getWheelDelta:Au,isExternalTarget:Bl,addListener:Sr,removeListener:Ar},Tu=re.extend({run:function(u,y,P,G){this.stop(),this._el=u,this._inProgress=!0,this._duration=P||.25,this._easeOutPower=1/Math.max(G||.5,.2),this._startPos=Qs(u),this._offset=y.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=B(this._animate,this),this._step()},_step:function(u){var y=+new Date-this._startTime,P=this._duration*1e3;y<P?this._runFrame(this._easeOut(y/P),u):(this._runFrame(1),this._complete())},_runFrame:function(u,y){var P=this._startPos.add(this._offset.multiplyBy(u));y&&P._round(),dr(this._el,P),this.fire("step")},_complete:function(){I(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),ei=re.extend({options:{crs:de,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,y){y=E(this,y),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),y.maxBounds&&this.setMaxBounds(y.maxBounds),y.zoom!==void 0&&(this._zoom=this._limitZoom(y.zoom)),y.center&&y.zoom!==void 0&&this.setView(fe(y.center),y.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ni&&ft.any3d&&!ft.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Sr(this._proxy,vi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,y,P){if(y=y===void 0?this._zoom:this._limitZoom(y),u=this._limitCenter(fe(u),y,this.options.maxBounds),P=P||{},this._stop(),this._loaded&&!P.reset&&P!==!0){P.animate!==void 0&&(P.zoom=i({animate:P.animate},P.zoom),P.pan=i({animate:P.animate,duration:P.duration},P.pan));var G=this._zoom!==y?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,y,P.zoom):this._tryAnimatedPan(u,P.pan);if(G)return clearTimeout(this._sizeTimer),this}return this._resetView(u,y,P.pan&&P.pan.noMoveStart),this},setZoom:function(u,y){return this._loaded?this.setView(this.getCenter(),u,{zoom:y}):(this._zoom=u,this)},zoomIn:function(u,y){return u=u||(ft.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,y)},zoomOut:function(u,y){return u=u||(ft.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,y)},setZoomAround:function(u,y,P){var G=this.getZoomScale(y),le=this.getSize().divideBy(2),Pe=u instanceof Q?u:this.latLngToContainerPoint(u),ct=Pe.subtract(le).multiplyBy(1-1/G),Ot=this.containerPointToLatLng(le.add(ct));return this.setView(Ot,y,{zoom:P})},_getBoundsCenterZoom:function(u,y){y=y||{},u=u.getBounds?u.getBounds():K(u);var P=we(y.paddingTopLeft||y.padding||[0,0]),G=we(y.paddingBottomRight||y.padding||[0,0]),le=this.getBoundsZoom(u,!1,P.add(G));if(le=typeof y.maxZoom=="number"?Math.min(y.maxZoom,le):le,le===1/0)return{center:u.getCenter(),zoom:le};var Pe=G.subtract(P).divideBy(2),ct=this.project(u.getSouthWest(),le),Ot=this.project(u.getNorthEast(),le),Gt=this.unproject(ct.add(Ot).divideBy(2).add(Pe),le);return{center:Gt,zoom:le}},fitBounds:function(u,y){if(u=K(u),!u.isValid())throw new Error("Bounds are not valid.");var P=this._getBoundsCenterZoom(u,y);return this.setView(P.center,P.zoom,y)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,y){return this.setView(u,this._zoom,{pan:y})},panBy:function(u,y){if(u=we(u).round(),y=y||{},!u.x&&!u.y)return this.fire("moveend");if(y.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Tu,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),y.noMoveStart||this.fire("movestart"),y.animate!==!1){Pn(this._mapPane,"leaflet-pan-anim");var P=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,P,y.duration||.25,y.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,y,P){if(P=P||{},P.animate===!1||!ft.any3d)return this.setView(u,y,P);this._stop();var G=this.project(this.getCenter()),le=this.project(u),Pe=this.getSize(),ct=this._zoom;u=fe(u),y=y===void 0?ct:y;var Ot=Math.max(Pe.x,Pe.y),Gt=Ot*this.getZoomScale(ct,y),cn=le.distanceTo(G)||1,zn=1.42,or=zn*zn;function $r(bi){var lo=bi?-1:1,Ie=bi?Gt:Ot,jo=Gt*Gt-Ot*Ot+lo*or*or*cn*cn,rc=2*Ie*or*cn,Zs=jo/rc,Hr=Math.sqrt(Zs*Zs+1)-Zs,Vh=Hr<1e-9?-18:Math.log(Hr);return Vh}function Ps(bi){return(Math.exp(bi)-Math.exp(-bi))/2}function as(bi){return(Math.exp(bi)+Math.exp(-bi))/2}function Ys(bi){return Ps(bi)/as(bi)}var Ji=$r(0);function Fo(bi){return Ot*(as(Ji)/as(Ji+zn*bi))}function ah(bi){return Ot*(as(Ji)*Ys(Ji+zn*bi)-Ps(Ji))/or}function Va(bi){return 1-Math.pow(1-bi,1.5)}var xa=Date.now(),ha=($r(1)-Ji)/zn,Od=P.duration?1e3*P.duration:1e3*ha*.8;function Nu(){var bi=(Date.now()-xa)/Od,lo=Va(bi)*ha;bi<=1?(this._flyToFrame=B(Nu,this),this._move(this.unproject(G.add(le.subtract(G).multiplyBy(ah(lo)/cn)),ct),this.getScaleZoom(Ot/Fo(lo),ct),{flyTo:!0})):this._move(u,y)._moveEnd(!0)}return this._moveStart(!0,P.noMoveStart),Nu.call(this),this},flyToBounds:function(u,y){var P=this._getBoundsCenterZoom(u,y);return this.flyTo(P.center,P.zoom,y)},setMaxBounds:function(u){return u=K(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var y=this.options.minZoom;return this.options.minZoom=u,this._loaded&&y!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var y=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&y!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,y){this._enforcingBounds=!0;var P=this.getCenter(),G=this._limitCenter(P,this._zoom,K(u));return P.equals(G)||this.panTo(G,y),this._enforcingBounds=!1,this},panInside:function(u,y){y=y||{};var P=we(y.paddingTopLeft||y.padding||[0,0]),G=we(y.paddingBottomRight||y.padding||[0,0]),le=this.project(this.getCenter()),Pe=this.project(u),ct=this.getPixelBounds(),Ot=ae([ct.min.add(P),ct.max.subtract(G)]),Gt=Ot.getSize();if(!Ot.contains(Pe)){this._enforcingBounds=!0;var cn=Pe.subtract(Ot.getCenter()),zn=Ot.extend(Pe).getSize().subtract(Gt);le.x+=cn.x<0?-zn.x:zn.x,le.y+=cn.y<0?-zn.y:zn.y,this.panTo(this.unproject(le),y),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=i({animate:!1,pan:!0},u===!0?{animate:!0}:u);var y=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var P=this.getSize(),G=y.divideBy(2).round(),le=P.divideBy(2).round(),Pe=G.subtract(le);return!Pe.x&&!Pe.y?this:(u.animate&&u.pan?this.panBy(Pe):(u.pan&&this._rawPanBy(Pe),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:y,newSize:P}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=i({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var y=o(this._handleGeolocationResponse,this),P=o(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(y,P,u):navigator.geolocation.getCurrentPosition(y,P,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var y=u.code,P=u.message||(y===1?"permission denied":y===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:y,message:"Geolocation error: "+P+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var y=u.coords.latitude,P=u.coords.longitude,G=new me(y,P),le=G.toBounds(u.coords.accuracy*2),Pe=this._locateOptions;if(Pe.setView){var ct=this.getBoundsZoom(le);this.setView(G,Pe.maxZoom?Math.min(ct,Pe.maxZoom):ct)}var Ot={latlng:G,bounds:le,timestamp:u.timestamp};for(var Gt in u.coords)typeof u.coords[Gt]=="number"&&(Ot[Gt]=u.coords[Gt]);this.fire("locationfound",Ot)}},addHandler:function(u,y){if(!y)return this;var P=this[u]=new y(this);return this._handlers.push(P),this.options[u]&&P.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),On(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(I(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)On(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,y){var P="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),G=fr("div",P,y||this._mapPane);return u&&(this._panes[u]=G),G},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),y=this.unproject(u.getBottomLeft()),P=this.unproject(u.getTopRight());return new H(y,P)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,y,P){u=K(u),P=we(P||[0,0]);var G=this.getZoom()||0,le=this.getMinZoom(),Pe=this.getMaxZoom(),ct=u.getNorthWest(),Ot=u.getSouthEast(),Gt=this.getSize().subtract(P),cn=ae(this.project(Ot,G),this.project(ct,G)).getSize(),zn=ft.any3d?this.options.zoomSnap:1,or=Gt.x/cn.x,$r=Gt.y/cn.y,Ps=y?Math.max(or,$r):Math.min(or,$r);return G=this.getScaleZoom(Ps,G),zn&&(G=Math.round(G/(zn/100))*(zn/100),G=y?Math.ceil(G/zn)*zn:Math.floor(G/zn)*zn),Math.max(le,Math.min(Pe,G))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,y){var P=this._getTopLeftPoint(u,y);return new Qe(P,P.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,y){var P=this.options.crs;return y=y===void 0?this._zoom:y,P.scale(u)/P.scale(y)},getScaleZoom:function(u,y){var P=this.options.crs;y=y===void 0?this._zoom:y;var G=P.zoom(u*P.scale(y));return isNaN(G)?1/0:G},project:function(u,y){return y=y===void 0?this._zoom:y,this.options.crs.latLngToPoint(fe(u),y)},unproject:function(u,y){return y=y===void 0?this._zoom:y,this.options.crs.pointToLatLng(we(u),y)},layerPointToLatLng:function(u){var y=we(u).add(this.getPixelOrigin());return this.unproject(y)},latLngToLayerPoint:function(u){var y=this.project(fe(u))._round();return y._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(fe(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(K(u))},distance:function(u,y){return this.options.crs.distance(fe(u),fe(y))},containerPointToLayerPoint:function(u){return we(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return we(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var y=this.containerPointToLayerPoint(we(u));return this.layerPointToLatLng(y)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(fe(u)))},mouseEventToContainerPoint:function(u){return yo(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var y=this._container=Yi(u);if(y){if(y._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Sr(y,"scroll",this._onScroll,this),this._containerId=l(y)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&ft.any3d,Pn(u,"leaflet-container"+(ft.touch?" leaflet-touch":"")+(ft.retina?" leaflet-retina":"")+(ft.ielt9?" leaflet-oldie":"")+(ft.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var y=Qr(u,"position");y!=="absolute"&&y!=="relative"&&y!=="fixed"&&y!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),dr(this._mapPane,new Q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Pn(u.markerPane,"leaflet-zoom-hide"),Pn(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,y,P){dr(this._mapPane,new Q(0,0));var G=!this._loaded;this._loaded=!0,y=this._limitZoom(y),this.fire("viewprereset");var le=this._zoom!==y;this._moveStart(le,P)._move(u,y)._moveEnd(le),this.fire("viewreset"),G&&this.fire("load")},_moveStart:function(u,y){return u&&this.fire("zoomstart"),y||this.fire("movestart"),this},_move:function(u,y,P,G){y===void 0&&(y=this._zoom);var le=this._zoom!==y;return this._zoom=y,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),G?P&&P.pinch&&this.fire("zoom",P):((le||P&&P.pinch)&&this.fire("zoom",P),this.fire("move",P)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return I(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){dr(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[l(this._container)]=this;var y=u?Ar:Sr;y(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&y(window,"resize",this._onResize,this),ft.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){I(this._resizeRequest),this._resizeRequest=B(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,y){for(var P=[],G,le=y==="mouseout"||y==="mouseover",Pe=u.target||u.srcElement,ct=!1;Pe;){if(G=this._targets[l(Pe)],G&&(y==="click"||y==="preclick")&&this._draggableMoved(G)){ct=!0;break}if(G&&G.listens(y,!0)&&(le&&!Bl(Pe,u)||(P.push(G),le))||Pe===this._container)break;Pe=Pe.parentNode}return!P.length&&!ct&&!le&&this.listens(y,!0)&&(P=[this]),P},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var y=u.target||u.srcElement;if(!(!this._loaded||y._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(y))){var P=u.type;P==="mousedown"&&aa(y),this._fireDOMEvent(u,P)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,y,P){if(u.type==="click"){var G=i({},u);G.type="preclick",this._fireDOMEvent(G,G.type,P)}var le=this._findEventTargets(u,y);if(P){for(var Pe=[],ct=0;ct<P.length;ct++)P[ct].listens(y,!0)&&Pe.push(P[ct]);le=Pe.concat(le)}if(le.length){y==="contextmenu"&&Er(u);var Ot=le[0],Gt={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var cn=Ot.getLatLng&&(!Ot._radius||Ot._radius<=10);Gt.containerPoint=cn?this.latLngToContainerPoint(Ot.getLatLng()):this.mouseEventToContainerPoint(u),Gt.layerPoint=this.containerPointToLayerPoint(Gt.containerPoint),Gt.latlng=cn?Ot.getLatLng():this.layerPointToLatLng(Gt.layerPoint)}for(ct=0;ct<le.length;ct++)if(le[ct].fire(y,Gt,!0),Gt.originalEvent._stopped||le[ct].options.bubblingMouseEvents===!1&&Y(this._mouseEvents,y)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,y=this._handlers.length;u<y;u++)this._handlers[u].disable()},whenReady:function(u,y){return this._loaded?u.call(y||this,{target:this}):this.on("load",u,y),this},_getMapPanePos:function(){return Qs(this._mapPane)||new Q(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,y){var P=u&&y!==void 0?this._getNewPixelOrigin(u,y):this.getPixelOrigin();return P.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,y){var P=this.getSize()._divideBy(2);return this.project(u,y)._subtract(P)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,y,P){var G=this._getNewPixelOrigin(P,y);return this.project(u,y)._subtract(G)},_latLngBoundsToNewLayerBounds:function(u,y,P){var G=this._getNewPixelOrigin(P,y);return ae([this.project(u.getSouthWest(),y)._subtract(G),this.project(u.getNorthWest(),y)._subtract(G),this.project(u.getSouthEast(),y)._subtract(G),this.project(u.getNorthEast(),y)._subtract(G)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,y,P){if(!P)return u;var G=this.project(u,y),le=this.getSize().divideBy(2),Pe=new Qe(G.subtract(le),G.add(le)),ct=this._getBoundsOffset(Pe,P,y);return Math.abs(ct.x)<=1&&Math.abs(ct.y)<=1?u:this.unproject(G.add(ct),y)},_limitOffset:function(u,y){if(!y)return u;var P=this.getPixelBounds(),G=new Qe(P.min.add(u),P.max.add(u));return u.add(this._getBoundsOffset(G,y))},_getBoundsOffset:function(u,y,P){var G=ae(this.project(y.getNorthEast(),P),this.project(y.getSouthWest(),P)),le=G.min.subtract(u.min),Pe=G.max.subtract(u.max),ct=this._rebound(le.x,-Pe.x),Ot=this._rebound(le.y,-Pe.y);return new Q(ct,Ot)},_rebound:function(u,y){return u+y>0?Math.round(u-y)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(y))},_limitZoom:function(u){var y=this.getMinZoom(),P=this.getMaxZoom(),G=ft.any3d?this.options.zoomSnap:1;return G&&(u=Math.round(u/G)*G),Math.max(y,Math.min(P,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){rn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,y){var P=this._getCenterOffset(u)._trunc();return(y&&y.animate)!==!0&&!this.getSize().contains(P)?!1:(this.panBy(P,y),!0)},_createAnimProxy:function(){var u=this._proxy=fr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(y){var P=on,G=this._proxy.style[P];Ns(this._proxy,this.project(y.center,y.zoom),this.getZoomScale(y.zoom,1)),G===this._proxy.style[P]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){On(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),y=this.getZoom();Ns(this._proxy,this.project(u,y),this.getZoomScale(y,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,y,P){if(this._animatingZoom)return!0;if(P=P||{},!this._zoomAnimated||P.animate===!1||this._nothingToAnimate()||Math.abs(y-this._zoom)>this.options.zoomAnimationThreshold)return!1;var G=this.getZoomScale(y),le=this._getCenterOffset(u)._divideBy(1-1/G);return P.animate!==!0&&!this.getSize().contains(le)?!1:(B(function(){this._moveStart(!0,P.noMoveStart||!1)._animateZoom(u,y,!0)},this),!0)},_animateZoom:function(u,y,P,G){this._mapPane&&(P&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=y,Pn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:y,noUpdate:G}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&rn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function gs(u,y){return new ei(u,y)}var mr=z.extend({options:{position:"topright"},initialize:function(u){E(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var y=this._map;return y&&y.removeControl(this),this.options.position=u,y&&y.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var y=this._container=this.onAdd(u),P=this.getPosition(),G=u._controlCorners[P];return Pn(y,"leaflet-control"),P.indexOf("bottom")!==-1?G.insertBefore(y,G.firstChild):G.appendChild(y),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(On(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),ms=function(u){return new mr(u)};ei.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},y="leaflet-",P=this._controlContainer=fr("div",y+"control-container",this._container);function G(le,Pe){var ct=y+le+" "+y+Pe;u[le+Pe]=fr("div",ct,P)}G("top","left"),G("top","right"),G("bottom","left"),G("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)On(this._controlCorners[u]);On(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Rl=mr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,y,P,G){return P<G?-1:G<P?1:0}},initialize:function(u,y,P){E(this,P),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var G in u)this._addLayer(u[G],G);for(G in y)this._addLayer(y[G],G,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return mr.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,y){return this._addLayer(u,y),this._map?this._update():this},addOverlay:function(u,y){return this._addLayer(u,y,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var y=this._getLayer(l(u));return y&&this._layers.splice(this._layers.indexOf(y),1),this._map?this._update():this},expand:function(){Pn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(Pn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):rn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return rn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",y=this._container=fr("div",u),P=this.options.collapsed;y.setAttribute("aria-haspopup",!0),Da(y),_l(y);var G=this._section=fr("section",u+"-list");P&&(this._map.on("click",this.collapse,this),Sr(y,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var le=this._layersLink=fr("a",u+"-toggle",y);le.href="#",le.title="Layers",le.setAttribute("role","button"),Sr(le,{keydown:function(Pe){Pe.keyCode===13&&this._expandSafely()},click:function(Pe){Er(Pe),this._expandSafely()}},this),P||this.expand(),this._baseLayersList=fr("div",u+"-base",G),this._separator=fr("div",u+"-separator",G),this._overlaysList=fr("div",u+"-overlays",G),y.appendChild(G)},_getLayer:function(u){for(var y=0;y<this._layers.length;y++)if(this._layers[y]&&l(this._layers[y].layer)===u)return this._layers[y]},_addLayer:function(u,y,P){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:y,overlay:P}),this.options.sortLayers&&this._layers.sort(o(function(G,le){return this.options.sortFunction(G.layer,le.layer,G.name,le.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Lr(this._baseLayersList),Lr(this._overlaysList),this._layerControlInputs=[];var u,y,P,G,le=0;for(P=0;P<this._layers.length;P++)G=this._layers[P],this._addItem(G),y=y||G.overlay,u=u||!G.overlay,le+=G.overlay?0:1;return this.options.hideSingleBase&&(u=u&&le>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=y&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var y=this._getLayer(l(u.target)),P=y.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;P&&this._map.fire(P,y)},_createRadioElement:function(u,y){var P='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(y?' checked="checked"':"")+"/>",G=document.createElement("div");return G.innerHTML=P,G.firstChild},_addItem:function(u){var y=document.createElement("label"),P=this._map.hasLayer(u.layer),G;u.overlay?(G=document.createElement("input"),G.type="checkbox",G.className="leaflet-control-layers-selector",G.defaultChecked=P):G=this._createRadioElement("leaflet-base-layers_"+l(this),P),this._layerControlInputs.push(G),G.layerId=l(u.layer),Sr(G,"click",this._onInputClick,this);var le=document.createElement("span");le.innerHTML=" "+u.name;var Pe=document.createElement("span");y.appendChild(Pe),Pe.appendChild(G),Pe.appendChild(le);var ct=u.overlay?this._overlaysList:this._baseLayersList;return ct.appendChild(y),this._checkDisabledLayers(),y},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,y,P,G=[],le=[];this._handlingClick=!0;for(var Pe=u.length-1;Pe>=0;Pe--)y=u[Pe],P=this._getLayer(y.layerId).layer,y.checked?G.push(P):y.checked||le.push(P);for(Pe=0;Pe<le.length;Pe++)this._map.hasLayer(le[Pe])&&this._map.removeLayer(le[Pe]);for(Pe=0;Pe<G.length;Pe++)this._map.hasLayer(G[Pe])||this._map.addLayer(G[Pe]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,y,P,G=this._map.getZoom(),le=u.length-1;le>=0;le--)y=u[le],P=this._getLayer(y.layerId).layer,y.disabled=P.options.minZoom!==void 0&&G<P.options.minZoom||P.options.maxZoom!==void 0&&G>P.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,Sr(u,"click",Er),this.expand();var y=this;setTimeout(function(){Ar(u,"click",Er),y._preventClick=!1})}}),Ya=function(u,y,P){return new Rl(u,y,P)},Zi=mr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var y="leaflet-control-zoom",P=fr("div",y+" leaflet-bar"),G=this.options;return this._zoomInButton=this._createButton(G.zoomInText,G.zoomInTitle,y+"-in",P,this._zoomIn),this._zoomOutButton=this._createButton(G.zoomOutText,G.zoomOutTitle,y+"-out",P,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),P},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,y,P,G,le){var Pe=fr("a",P,G);return Pe.innerHTML=u,Pe.href="#",Pe.title=y,Pe.setAttribute("role","button"),Pe.setAttribute("aria-label",y),Da(Pe),Sr(Pe,"click",Kn),Sr(Pe,"click",le,this),Sr(Pe,"click",this._refocusOnMap,this),Pe},_updateDisabled:function(){var u=this._map,y="leaflet-disabled";rn(this._zoomInButton,y),rn(this._zoomOutButton,y),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(Pn(this._zoomOutButton,y),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(Pn(this._zoomInButton,y),this._zoomInButton.setAttribute("aria-disabled","true"))}});ei.mergeOptions({zoomControl:!0}),ei.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Zi,this.addControl(this.zoomControl))});var Du=function(u){return new Zi(u)},Oa=mr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var y="leaflet-control-scale",P=fr("div",y),G=this.options;return this._addScales(G,y+"-line",P),u.on(G.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),P},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,y,P){u.metric&&(this._mScale=fr("div",y,P)),u.imperial&&(this._iScale=fr("div",y,P))},_update:function(){var u=this._map,y=u.getSize().y/2,P=u.distance(u.containerPointToLatLng([0,y]),u.containerPointToLatLng([this.options.maxWidth,y]));this._updateScales(P)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var y=this._getRoundNum(u),P=y<1e3?y+" m":y/1e3+" km";this._updateScale(this._mScale,P,y/u)},_updateImperial:function(u){var y=u*3.2808399,P,G,le;y>5280?(P=y/5280,G=this._getRoundNum(P),this._updateScale(this._iScale,G+" mi",G/P)):(le=this._getRoundNum(y),this._updateScale(this._iScale,le+" ft",le/y))},_updateScale:function(u,y,P){u.style.width=Math.round(this.options.maxWidth*P)+"px",u.innerHTML=y},_getRoundNum:function(u){var y=Math.pow(10,(Math.floor(u)+"").length-1),P=u/y;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:1,y*P}}),cu=function(u){return new Oa(u)},hu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ua=mr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ft.inlineSvg?hu+" ":"")+"Leaflet</a>"},initialize:function(u){E(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=fr("div","leaflet-control-attribution"),Da(this._container);for(var y in u._layers)u._layers[y].getAttribution&&this.addAttribution(u._layers[y].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var y in this._attributions)this._attributions[y]&&u.push(y);var P=[];this.options.prefix&&P.push(this.options.prefix),u.length&&P.push(u.join(", ")),this._container.innerHTML=P.join(' <span aria-hidden="true">|</span> ')}}});ei.mergeOptions({attributionControl:!0}),ei.addInitHook(function(){this.options.attributionControl&&new ua().addTo(this)});var du=function(u){return new ua(u)};mr.Layers=Rl,mr.Zoom=Zi,mr.Scale=Oa,mr.Attribution=ua,ms.layers=Ya,ms.zoom=Du,ms.scale=cu,ms.attribution=du;var Li=z.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Li.addTo=function(u,y){return u.addHandler(y,this),this};var Ac={Events:V},Us=ft.touch?"touchstart mousedown":"mousedown",va=re.extend({options:{clickTolerance:3},initialize:function(u,y,P,G){E(this,G),this._element=u,this._dragStartTarget=y||u,this._preventOutline=P},enable:function(){this._enabled||(Sr(this._dragStartTarget,Us,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(va._dragging===this&&this.finishDrag(!0),Ar(this._dragStartTarget,Us,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!hr(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){va._dragging===this&&this.finishDrag();return}if(!(va._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(va._dragging=this,this._preventOutline&&aa(this._element),vn(),Vi(),!this._moving)){this.fire("down");var y=u.touches?u.touches[0]:u,P=ka(this._element);this._startPoint=new Q(y.clientX,y.clientY),this._startPos=Qs(this._element),this._parentScale=bl(P);var G=u.type==="mousedown";Sr(document,G?"mousemove":"touchmove",this._onMove,this),Sr(document,G?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var y=u.touches&&u.touches.length===1?u.touches[0]:u,P=new Q(y.clientX,y.clientY)._subtract(this._startPoint);!P.x&&!P.y||Math.abs(P.x)+Math.abs(P.y)<this.options.clickTolerance||(P.x/=this._parentScale.x,P.y/=this._parentScale.y,Er(u),this._moved||(this.fire("dragstart"),this._moved=!0,Pn(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Pn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(P),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),dr(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){rn(document.body,"leaflet-dragging"),this._lastTarget&&(rn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ar(document,"mousemove touchmove",this._onMove,this),Ar(document,"mouseup touchend touchcancel",this._onUp,this),Fr(),Gi();var y=this._moved&&this._moving;this._moving=!1,va._dragging=!1,y&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function fu(u,y,P){var G,le=[1,4,2,8],Pe,ct,Ot,Gt,cn,zn,or,$r;for(Pe=0,zn=u.length;Pe<zn;Pe++)u[Pe]._code=Wt(u[Pe],y);for(Ot=0;Ot<4;Ot++){for(or=le[Ot],G=[],Pe=0,zn=u.length,ct=zn-1;Pe<zn;ct=Pe++)Gt=u[Pe],cn=u[ct],Gt._code&or?cn._code&or||($r=Mt(cn,Gt,or,y,P),$r._code=Wt($r,y),G.push($r)):(cn._code&or&&($r=Mt(cn,Gt,or,y,P),$r._code=Wt($r,y),G.push($r)),G.push(Gt));u=G}return u}function ya(u,y){var P,G,le,Pe,ct,Ot,Gt,cn,zn;if(!u||u.length===0)throw new Error("latlngs not passed");Hn(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var or=fe([0,0]),$r=K(u),Ps=$r.getNorthWest().distanceTo($r.getSouthWest())*$r.getNorthEast().distanceTo($r.getNorthWest());Ps<1700&&(or=Fl(u));var as=u.length,Ys=[];for(P=0;P<as;P++){var Ji=fe(u[P]);Ys.push(y.project(fe([Ji.lat-or.lat,Ji.lng-or.lng])))}for(Ot=Gt=cn=0,P=0,G=as-1;P<as;G=P++)le=Ys[P],Pe=Ys[G],ct=le.y*Pe.x-Pe.y*le.x,Gt+=(le.x+Pe.x)*ct,cn+=(le.y+Pe.y)*ct,Ot+=ct*3;Ot===0?zn=Ys[0]:zn=[Gt/Ot,cn/Ot];var Fo=y.unproject(we(zn));return fe([Fo.lat+or.lat,Fo.lng+or.lng])}function Fl(u){for(var y=0,P=0,G=0,le=0;le<u.length;le++){var Pe=fe(u[le]);y+=Pe.lat,P+=Pe.lng,G++}return fe([y/G,P/G])}var jl={__proto__:null,clipPolygon:fu,polygonCenter:ya,centroid:Fl};function Si(u,y){if(!y||!u.length)return u.slice();var P=y*y;return u=xe(u,P),u=vs(u,P),u}function Jo(u,y,P){return Math.sqrt(jn(u,y,P,!0))}function Za(u,y,P){return jn(u,y,P)}function vs(u,y){var P=u.length,G=typeof Uint8Array<"u"?Uint8Array:Array,le=new G(P);le[0]=le[P-1]=1,F(u,le,y,0,P-1);var Pe,ct=[];for(Pe=0;Pe<P;Pe++)le[Pe]&&ct.push(u[Pe]);return ct}function F(u,y,P,G,le){var Pe=0,ct,Ot,Gt;for(Ot=G+1;Ot<=le-1;Ot++)Gt=jn(u[Ot],u[G],u[le],!0),Gt>Pe&&(ct=Ot,Pe=Gt);Pe>P&&(y[ct]=1,F(u,y,P,G,ct),F(u,y,P,ct,le))}function xe(u,y){for(var P=[u[0]],G=1,le=0,Pe=u.length;G<Pe;G++)fn(u[G],u[le])>y&&(P.push(u[G]),le=G);return le<Pe-1&&P.push(u[Pe-1]),P}var tt;function pt(u,y,P,G,le){var Pe=G?tt:Wt(u,P),ct=Wt(y,P),Ot,Gt,cn;for(tt=ct;;){if(!(Pe|ct))return[u,y];if(Pe&ct)return!1;Ot=Pe||ct,Gt=Mt(u,y,Ot,P,le),cn=Wt(Gt,P),Ot===Pe?(u=Gt,Pe=cn):(y=Gt,ct=cn)}}function Mt(u,y,P,G,le){var Pe=y.x-u.x,ct=y.y-u.y,Ot=G.min,Gt=G.max,cn,zn;return P&8?(cn=u.x+Pe*(Gt.y-u.y)/ct,zn=Gt.y):P&4?(cn=u.x+Pe*(Ot.y-u.y)/ct,zn=Ot.y):P&2?(cn=Gt.x,zn=u.y+ct*(Gt.x-u.x)/Pe):P&1&&(cn=Ot.x,zn=u.y+ct*(Ot.x-u.x)/Pe),new Q(cn,zn,le)}function Wt(u,y){var P=0;return u.x<y.min.x?P|=1:u.x>y.max.x&&(P|=2),u.y<y.min.y?P|=4:u.y>y.max.y&&(P|=8),P}function fn(u,y){var P=y.x-u.x,G=y.y-u.y;return P*P+G*G}function jn(u,y,P,G){var le=y.x,Pe=y.y,ct=P.x-le,Ot=P.y-Pe,Gt=ct*ct+Ot*Ot,cn;return Gt>0&&(cn=((u.x-le)*ct+(u.y-Pe)*Ot)/Gt,cn>1?(le=P.x,Pe=P.y):cn>0&&(le+=ct*cn,Pe+=Ot*cn)),ct=u.x-le,Ot=u.y-Pe,G?ct*ct+Ot*Ot:new Q(le,Pe)}function Hn(u){return!j(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function pr(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Hn(u)}function Cr(u,y){var P,G,le,Pe,ct,Ot,Gt,cn;if(!u||u.length===0)throw new Error("latlngs not passed");Hn(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var zn=fe([0,0]),or=K(u),$r=or.getNorthWest().distanceTo(or.getSouthWest())*or.getNorthEast().distanceTo(or.getNorthWest());$r<1700&&(zn=Fl(u));var Ps=u.length,as=[];for(P=0;P<Ps;P++){var Ys=fe(u[P]);as.push(y.project(fe([Ys.lat-zn.lat,Ys.lng-zn.lng])))}for(P=0,G=0;P<Ps-1;P++)G+=as[P].distanceTo(as[P+1])/2;if(G===0)cn=as[0];else for(P=0,Pe=0;P<Ps-1;P++)if(ct=as[P],Ot=as[P+1],le=ct.distanceTo(Ot),Pe+=le,Pe>G){Gt=(Pe-G)/le,cn=[Ot.x-Gt*(Ot.x-ct.x),Ot.y-Gt*(Ot.y-ct.y)];break}var Ji=y.unproject(we(cn));return fe([Ji.lat+zn.lat,Ji.lng+zn.lng])}var Vr={__proto__:null,simplify:Si,pointToSegmentDistance:Jo,closestPointOnSegment:Za,clipSegment:pt,_getEdgeIntersection:Mt,_getBitCode:Wt,_sqClosestPointOnSegment:jn,isFlat:Hn,_flat:pr,polylineCenter:Cr},qi={project:function(u){return new Q(u.lng,u.lat)},unproject:function(u){return new me(u.y,u.x)},bounds:new Qe([-180,-90],[180,90])},gi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Qe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var y=Math.PI/180,P=this.R,G=u.lat*y,le=this.R_MINOR/P,Pe=Math.sqrt(1-le*le),ct=Pe*Math.sin(G),Ot=Math.tan(Math.PI/4-G/2)/Math.pow((1-ct)/(1+ct),Pe/2);return G=-P*Math.log(Math.max(Ot,1e-10)),new Q(u.lng*y*P,G)},unproject:function(u){for(var y=180/Math.PI,P=this.R,G=this.R_MINOR/P,le=Math.sqrt(1-G*G),Pe=Math.exp(-u.y/P),ct=Math.PI/2-2*Math.atan(Pe),Ot=0,Gt=.1,cn;Ot<15&&Math.abs(Gt)>1e-7;Ot++)cn=le*Math.sin(ct),cn=Math.pow((1-cn)/(1+cn),le/2),Gt=Math.PI/2-2*Math.atan(Pe*cn)-ct,ct+=Gt;return new me(ct*y,u.x*y/P)}},Ci={__proto__:null,LonLat:qi,Mercator:gi,SphericalMercator:De},ys=i({},X,{code:"EPSG:3395",projection:gi,transformation:function(){var u=.5/(Math.PI*gi.R);return Je(u,.5,-u,.5)}()}),Ss=i({},X,{code:"EPSG:4326",projection:qi,transformation:Je(1/180,1,-1/180,.5)}),Qo=i({},he,{projection:qi,transformation:Je(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,y){var P=y.lng-u.lng,G=y.lat-u.lat;return Math.sqrt(P*P+G*G)},infinite:!0});he.Earth=X,he.EPSG3395=ys,he.EPSG3857=de,he.EPSG900913=ee,he.EPSG4326=Ss,he.Simple=Qo;var Ur=re.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[l(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[l(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var y=u.target;if(y.hasLayer(this)){if(this._map=y,this._zoomAnimated=y._zoomAnimated,this.getEvents){var P=this.getEvents();y.on(P,this),this.once("remove",function(){y.off(P,this)},this)}this.onAdd(y),this.fire("add"),y.fire("layeradd",{layer:this})}}});ei.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var y=l(u);return this._layers[y]?this:(this._layers[y]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var y=l(u);return this._layers[y]?(this._loaded&&u.onRemove(this),delete this._layers[y],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return l(u)in this._layers},eachLayer:function(u,y){for(var P in this._layers)u.call(y,this._layers[P]);return this},_addLayers:function(u){u=u?j(u)?u:[u]:[];for(var y=0,P=u.length;y<P;y++)this.addLayer(u[y])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[l(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var y=l(u);this._zoomBoundLayers[y]&&(delete this._zoomBoundLayers[y],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,y=-1/0,P=this._getZoomSpan();for(var G in this._zoomBoundLayers){var le=this._zoomBoundLayers[G].options;u=le.minZoom===void 0?u:Math.min(u,le.minZoom),y=le.maxZoom===void 0?y:Math.max(y,le.maxZoom)}this._layersMaxZoom=y===-1/0?void 0:y,this._layersMinZoom=u===1/0?void 0:u,P!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var to=Ur.extend({initialize:function(u,y){E(this,y),this._layers={};var P,G;if(u)for(P=0,G=u.length;P<G;P++)this.addLayer(u[P])},addLayer:function(u){var y=this.getLayerId(u);return this._layers[y]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var y=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[y]&&this._map.removeLayer(this._layers[y]),delete this._layers[y],this},hasLayer:function(u){var y=typeof u=="number"?u:this.getLayerId(u);return y in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var y=Array.prototype.slice.call(arguments,1),P,G;for(P in this._layers)G=this._layers[P],G[u]&&G[u].apply(G,y);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,y){for(var P in this._layers)u.call(y,this._layers[P]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return l(u)}}),zl=function(u,y){return new to(u,y)},bo=to.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),to.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),to.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new H;for(var y in this._layers){var P=this._layers[y];u.extend(P.getBounds?P.getBounds():P.getLatLng())}return u}}),Ou=function(u,y){return new bo(u,y)},Na=z.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){E(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,y){var P=this._getIconUrl(u);if(!P){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var G=this._createImg(P,y&&y.tagName==="IMG"?y:null);return this._setIconStyles(G,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(G.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),G},_setIconStyles:function(u,y){var P=this.options,G=P[y+"Size"];typeof G=="number"&&(G=[G,G]);var le=we(G),Pe=we(y==="shadow"&&P.shadowAnchor||P.iconAnchor||le&&le.divideBy(2,!0));u.className="leaflet-marker-"+y+" "+(P.className||""),Pe&&(u.style.marginLeft=-Pe.x+"px",u.style.marginTop=-Pe.y+"px"),le&&(u.style.width=le.x+"px",u.style.height=le.y+"px")},_createImg:function(u,y){return y=y||document.createElement("img"),y.src=u,y},_getIconUrl:function(u){return ft.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function tc(u){return new Na(u)}var wl=Na.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof wl.imagePath!="string"&&(wl.imagePath=this._detectIconPath()),(this.options.imagePath||wl.imagePath)+Na.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var y=function(P,G,le){var Pe=G.exec(P);return Pe&&Pe[le]};return u=y(u,/^url\((['"])?(.+)\1\)$/,2),u&&y(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=fr("div","leaflet-default-icon-path",document.body),y=Qr(u,"background-image")||Qr(u,"backgroundImage");if(document.body.removeChild(u),y=this._stripUrl(y),y)return y;var P=document.querySelector('link[href$="leaflet.css"]');return P?P.href.substring(0,P.href.length-11-1):""}}),xl=Li.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new va(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Pn(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&rn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var y=this._marker,P=y._map,G=this._marker.options.autoPanSpeed,le=this._marker.options.autoPanPadding,Pe=Qs(y._icon),ct=P.getPixelBounds(),Ot=P.getPixelOrigin(),Gt=ae(ct.min._subtract(Ot).add(le),ct.max._subtract(Ot).subtract(le));if(!Gt.contains(Pe)){var cn=we((Math.max(Gt.max.x,Pe.x)-Gt.max.x)/(ct.max.x-Gt.max.x)-(Math.min(Gt.min.x,Pe.x)-Gt.min.x)/(ct.min.x-Gt.min.x),(Math.max(Gt.max.y,Pe.y)-Gt.max.y)/(ct.max.y-Gt.max.y)-(Math.min(Gt.min.y,Pe.y)-Gt.min.y)/(ct.min.y-Gt.min.y)).multiplyBy(G);P.panBy(cn,{animate:!1}),this._draggable._newPos._add(cn),this._draggable._startPos._add(cn),dr(y._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=B(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(I(this._panRequest),this._panRequest=B(this._adjustPan.bind(this,u)))},_onDrag:function(u){var y=this._marker,P=y._shadow,G=Qs(y._icon),le=y._map.layerPointToLatLng(G);P&&dr(P,G),y._latlng=le,u.latlng=le,u.oldLatLng=this._oldLatLng,y.fire("move",u).fire("drag",u)},_onDragEnd:function(u){I(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),Cs=Ur.extend({options:{icon:new wl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,y){E(this,y),this._latlng=fe(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var y=this._latlng;return this._latlng=fe(u),this.update(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,y="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),P=u.icon.createIcon(this._icon),G=!1;P!==this._icon&&(this._icon&&this._removeIcon(),G=!0,u.title&&(P.title=u.title),P.tagName==="IMG"&&(P.alt=u.alt||"")),Pn(P,y),u.keyboard&&(P.tabIndex="0",P.setAttribute("role","button")),this._icon=P,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Sr(P,"focus",this._panOnFocus,this);var le=u.icon.createShadow(this._shadow),Pe=!1;le!==this._shadow&&(this._removeShadow(),Pe=!0),le&&(Pn(le,y),le.alt=""),this._shadow=le,u.opacity<1&&this._updateOpacity(),G&&this.getPane().appendChild(this._icon),this._initInteraction(),le&&Pe&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ar(this._icon,"focus",this._panOnFocus,this),On(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&On(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&dr(this._icon,u),this._shadow&&dr(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(y)},_initInteraction:function(){if(this.options.interactive&&(Pn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),xl)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new xl(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&ui(this._icon,u),this._shadow&&ui(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var y=this.options.icon.options,P=y.iconSize?we(y.iconSize):we(0,0),G=y.iconAnchor?we(y.iconAnchor):we(0,0);u.panInside(this._latlng,{paddingTopLeft:G,paddingBottomRight:P.subtract(G)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ia(u,y){return new Cs(u,y)}var ea=Ur.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return E(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Io=ea.extend({options:{fill:!0,radius:10},initialize:function(u,y){E(this,y),this._latlng=fe(u),this._radius=this.options.radius},setLatLng:function(u){var y=this._latlng;return this._latlng=fe(u),this.redraw(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var y=u&&u.radius||this._radius;return ea.prototype.setStyle.call(this,u),this.setRadius(y),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,y=this._radiusY||u,P=this._clickTolerance(),G=[u+P,y+P];this._pxBounds=new Qe(this._point.subtract(G),this._point.add(G))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function $l(u,y){return new Io(u,y)}var no=Io.extend({initialize:function(u,y,P){if(typeof y=="number"&&(y=i({},P,{radius:y})),E(this,y),this._latlng=fe(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new H(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:ea.prototype.setStyle,_project:function(){var u=this._latlng.lng,y=this._latlng.lat,P=this._map,G=P.options.crs;if(G.distance===X.distance){var le=Math.PI/180,Pe=this._mRadius/X.R/le,ct=P.project([y+Pe,u]),Ot=P.project([y-Pe,u]),Gt=ct.add(Ot).divideBy(2),cn=P.unproject(Gt).lat,zn=Math.acos((Math.cos(Pe*le)-Math.sin(y*le)*Math.sin(cn*le))/(Math.cos(y*le)*Math.cos(cn*le)))/le;(isNaN(zn)||zn===0)&&(zn=Pe/Math.cos(Math.PI/180*y)),this._point=Gt.subtract(P.getPixelOrigin()),this._radius=isNaN(zn)?0:Gt.x-P.project([cn,u-zn]).x,this._radiusY=Gt.y-ct.y}else{var or=G.unproject(G.project(this._latlng).subtract([this._mRadius,0]));this._point=P.latLngToLayerPoint(this._latlng),this._radius=this._point.x-P.latLngToLayerPoint(or).x}this._updateBounds()}});function _o(u,y,P){return new no(u,y,P)}var wo=ea.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,y){E(this,y),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var y=1/0,P=null,G=jn,le,Pe,ct=0,Ot=this._parts.length;ct<Ot;ct++)for(var Gt=this._parts[ct],cn=1,zn=Gt.length;cn<zn;cn++){le=Gt[cn-1],Pe=Gt[cn];var or=G(u,le,Pe,!0);or<y&&(y=or,P=G(u,le,Pe))}return P&&(P.distance=Math.sqrt(y)),P},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Cr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,y){return y=y||this._defaultShape(),u=fe(u),y.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new H,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return Hn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var y=[],P=Hn(u),G=0,le=u.length;G<le;G++)P?(y[G]=fe(u[G]),this._bounds.extend(y[G])):y[G]=this._convertLatLngs(u[G]);return y},_project:function(){var u=new Qe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),y=new Q(u,u);this._rawPxBounds&&(this._pxBounds=new Qe([this._rawPxBounds.min.subtract(y),this._rawPxBounds.max.add(y)]))},_projectLatlngs:function(u,y,P){var G=u[0]instanceof me,le=u.length,Pe,ct;if(G){for(ct=[],Pe=0;Pe<le;Pe++)ct[Pe]=this._map.latLngToLayerPoint(u[Pe]),P.extend(ct[Pe]);y.push(ct)}else for(Pe=0;Pe<le;Pe++)this._projectLatlngs(u[Pe],y,P)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var y=this._parts,P,G,le,Pe,ct,Ot,Gt;for(P=0,le=0,Pe=this._rings.length;P<Pe;P++)for(Gt=this._rings[P],G=0,ct=Gt.length;G<ct-1;G++)Ot=pt(Gt[G],Gt[G+1],u,G,!0),Ot&&(y[le]=y[le]||[],y[le].push(Ot[0]),(Ot[1]!==Gt[G+1]||G===ct-2)&&(y[le].push(Ot[1]),le++))}},_simplifyPoints:function(){for(var u=this._parts,y=this.options.smoothFactor,P=0,G=u.length;P<G;P++)u[P]=Si(u[P],y)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,y){var P,G,le,Pe,ct,Ot,Gt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(P=0,Pe=this._parts.length;P<Pe;P++)for(Ot=this._parts[P],G=0,ct=Ot.length,le=ct-1;G<ct;le=G++)if(!(!y&&G===0)&&Jo(u,Ot[le],Ot[G])<=Gt)return!0;return!1}});function Tc(u,y){return new wo(u,y)}wo._flat=pr;var Is=wo.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ya(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var y=wo.prototype._convertLatLngs.call(this,u),P=y.length;return P>=2&&y[0]instanceof me&&y[0].equals(y[P-1])&&y.pop(),y},_setLatLngs:function(u){wo.prototype._setLatLngs.call(this,u),Hn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Hn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,y=this.options.weight,P=new Q(y,y);if(u=new Qe(u.min.subtract(P),u.max.add(P)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var G=0,le=this._rings.length,Pe;G<le;G++)Pe=fu(this._rings[G],u,!0),Pe.length&&this._parts.push(Pe)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var y=!1,P,G,le,Pe,ct,Ot,Gt,cn;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(Pe=0,Gt=this._parts.length;Pe<Gt;Pe++)for(P=this._parts[Pe],ct=0,cn=P.length,Ot=cn-1;ct<cn;Ot=ct++)G=P[ct],le=P[Ot],G.y>u.y!=le.y>u.y&&u.x<(le.x-G.x)*(u.y-G.y)/(le.y-G.y)+G.x&&(y=!y);return y||wo.prototype._containsPoint.call(this,u,!0)}});function Ka(u,y){return new Is(u,y)}var ro=bo.extend({initialize:function(u,y){E(this,y),this._layers={},u&&this.addData(u)},addData:function(u){var y=j(u)?u:u.features,P,G,le;if(y){for(P=0,G=y.length;P<G;P++)le=y[P],(le.geometries||le.geometry||le.features||le.coordinates)&&this.addData(le);return this}var Pe=this.options;if(Pe.filter&&!Pe.filter(u))return this;var ct=io(u,Pe);return ct?(ct.feature=oo(u),ct.defaultOptions=ct.options,this.resetStyle(ct),Pe.onEachFeature&&Pe.onEachFeature(u,ct),this.addLayer(ct)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=i({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(y){this._setLayerStyle(y,u)},this)},_setLayerStyle:function(u,y){u.setStyle&&(typeof y=="function"&&(y=y(u.feature)),u.setStyle(y))}});function io(u,y){var P=u.type==="Feature"?u.geometry:u,G=P?P.coordinates:null,le=[],Pe=y&&y.pointToLayer,ct=y&&y.coordsToLatLng||Ja,Ot,Gt,cn,zn;if(!G&&!P)return null;switch(P.type){case"Point":return Ot=ct(G),Xa(Pe,u,Ot,y);case"MultiPoint":for(cn=0,zn=G.length;cn<zn;cn++)Ot=ct(G[cn]),le.push(Xa(Pe,u,Ot,y));return new bo(le);case"LineString":case"MultiLineString":return Gt=so(G,P.type==="LineString"?0:1,ct),new wo(Gt,y);case"Polygon":case"MultiPolygon":return Gt=so(G,P.type==="Polygon"?1:2,ct),new Is(Gt,y);case"GeometryCollection":for(cn=0,zn=P.geometries.length;cn<zn;cn++){var or=io({geometry:P.geometries[cn],type:"Feature",properties:u.properties},y);or&&le.push(or)}return new bo(le);case"FeatureCollection":for(cn=0,zn=P.features.length;cn<zn;cn++){var $r=io(P.features[cn],y);$r&&le.push($r)}return new bo(le);default:throw new Error("Invalid GeoJSON object.")}}function Xa(u,y,P,G){return u?u(y,P):new Cs(P,G&&G.markersInheritOptions&&G)}function Ja(u){return new me(u[1],u[0],u[2])}function so(u,y,P){for(var G=[],le=0,Pe=u.length,ct;le<Pe;le++)ct=y?so(u[le],y-1,P):(P||Ja)(u[le]),G.push(ct);return G}function Hs(u,y){return u=fe(u),u.alt!==void 0?[v(u.lng,y),v(u.lat,y),v(u.alt,y)]:[v(u.lng,y),v(u.lat,y)]}function Ba(u,y,P,G){for(var le=[],Pe=0,ct=u.length;Pe<ct;Pe++)le.push(y?Ba(u[Pe],Hn(u[Pe])?0:y-1,P,G):Hs(u[Pe],G));return!y&&P&&le.length>0&&le.push(le[0].slice()),le}function ta(u,y){return u.feature?i({},u.feature,{geometry:y}):oo(y)}function oo(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var Lt={toGeoJSON:function(u){return ta(this,{type:"Point",coordinates:Hs(this.getLatLng(),u)})}};Cs.include(Lt),no.include(Lt),Io.include(Lt),wo.include({toGeoJSON:function(u){var y=!Hn(this._latlngs),P=Ba(this._latlngs,y?1:0,!1,u);return ta(this,{type:(y?"Multi":"")+"LineString",coordinates:P})}}),Is.include({toGeoJSON:function(u){var y=!Hn(this._latlngs),P=y&&!Hn(this._latlngs[0]),G=Ba(this._latlngs,P?2:y?1:0,!0,u);return y||(G=[G]),ta(this,{type:(P?"Multi":"")+"Polygon",coordinates:G})}}),to.include({toMultiPoint:function(u){var y=[];return this.eachLayer(function(P){y.push(P.toGeoJSON(u).geometry.coordinates)}),ta(this,{type:"MultiPoint",coordinates:y})},toGeoJSON:function(u){var y=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(y==="MultiPoint")return this.toMultiPoint(u);var P=y==="GeometryCollection",G=[];return this.eachLayer(function(le){if(le.toGeoJSON){var Pe=le.toGeoJSON(u);if(P)G.push(Pe.geometry);else{var ct=oo(Pe);ct.type==="FeatureCollection"?G.push.apply(G,ct.features):G.push(ct)}}}),P?ta(this,{geometries:G,type:"GeometryCollection"}):{type:"FeatureCollection",features:G}}});function Yt(u,y){return new ro(u,y)}var Nt=Yt,Rn=Ur.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,y,P){this._url=u,this._bounds=K(y),E(this,P)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Pn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){On(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&Ls(this._image),this},bringToBack:function(){return this._map&&vo(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=K(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",y=this._image=u?this._url:fr("img");if(Pn(y,"leaflet-image-layer"),this._zoomAnimated&&Pn(y,"leaflet-zoom-animated"),this.options.className&&Pn(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onload=o(this.fire,this,"load"),y.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=y.src;return}y.src=this._url,y.alt=this.options.alt},_animateZoom:function(u){var y=this._map.getZoomScale(u.zoom),P=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;Ns(this._image,P,y)},_reset:function(){var u=this._image,y=new Qe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),P=y.getSize();dr(u,y.min),u.style.width=P.x+"px",u.style.height=P.y+"px"},_updateOpacity:function(){ui(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),rr=function(u,y,P){return new Rn(u,y,P)},Pr=Rn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",y=this._image=u?this._url:fr("video");if(Pn(y,"leaflet-image-layer"),this._zoomAnimated&&Pn(y,"leaflet-zoom-animated"),this.options.className&&Pn(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onloadeddata=o(this.fire,this,"load"),u){for(var P=y.getElementsByTagName("source"),G=[],le=0;le<P.length;le++)G.push(P[le].src);this._url=P.length>0?G:[y.src];return}j(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(y.style,"objectFit")&&(y.style.objectFit="fill"),y.autoplay=!!this.options.autoplay,y.loop=!!this.options.loop,y.muted=!!this.options.muted,y.playsInline=!!this.options.playsInline;for(var Pe=0;Pe<this._url.length;Pe++){var ct=fr("source");ct.src=this._url[Pe],y.appendChild(ct)}}});function Ki(u,y,P){return new Pr(u,y,P)}var Ei=Rn.extend({_initImage:function(){var u=this._image=this._url;Pn(u,"leaflet-image-layer"),this._zoomAnimated&&Pn(u,"leaflet-zoom-animated"),this.options.className&&Pn(u,this.options.className),u.onselectstart=p,u.onmousemove=p}});function pu(u,y,P){return new Ei(u,y,P)}var xo=Ur.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,y){u&&(u instanceof me||j(u))?(this._latlng=fe(u),E(this,y)):(E(this,u),this._source=y),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&ui(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&ui(this._container,1),this.bringToFront(),this.options.interactive&&(Pn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(ui(this._container,0),this._removeTimeout=setTimeout(o(On,void 0,this._container),200)):On(this._container),this.options.interactive&&(rn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=fe(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ls(this._container),this},bringToBack:function(){return this._map&&vo(this._container),this},_prepareOpen:function(u){var y=this._source;if(!y._map)return!1;if(y instanceof bo){y=null;var P=this._source._layers;for(var G in P)if(P[G]._map){y=P[G];break}if(!y)return!1;this._source=y}if(!u)if(y.getCenter)u=y.getCenter();else if(y.getLatLng)u=y.getLatLng();else if(y.getBounds)u=y.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,y=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof y=="string")u.innerHTML=y;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(y)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),y=we(this.options.offset),P=this._getAnchor();this._zoomAnimated?dr(this._container,u.add(P)):y=y.add(u).add(P);var G=this._containerBottom=-y.y,le=this._containerLeft=-Math.round(this._containerWidth/2)+y.x;this._container.style.bottom=G+"px",this._container.style.left=le+"px"}},_getAnchor:function(){return[0,0]}});ei.include({_initOverlay:function(u,y,P,G){var le=y;return le instanceof u||(le=new u(G).setContent(y)),P&&le.setLatLng(P),le}}),Ur.include({_initOverlay:function(u,y,P,G){var le=P;return le instanceof u?(E(le,G),le._source=this):(le=y&&!G?y:new u(G,this),le.setContent(P)),le}});var Xi=xo.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,xo.prototype.openOn.call(this,u)},onAdd:function(u){xo.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ea||this._source.on("preclick",la))},onRemove:function(u){xo.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ea||this._source.off("preclick",la))},getEvents:function(){var u=xo.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",y=this._container=fr("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),P=this._wrapper=fr("div",u+"-content-wrapper",y);if(this._contentNode=fr("div",u+"-content",P),Da(y),_l(this._contentNode),Sr(y,"contextmenu",la),this._tipContainer=fr("div",u+"-tip-container",y),this._tip=fr("div",u+"-tip",this._tipContainer),this.options.closeButton){var G=this._closeButton=fr("a",u+"-close-button",y);G.setAttribute("role","button"),G.setAttribute("aria-label","Close popup"),G.href="#close",G.innerHTML='<span aria-hidden="true">&#215;</span>',Sr(G,"click",function(le){Er(le),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,y=u.style;y.width="",y.whiteSpace="nowrap";var P=u.offsetWidth;P=Math.min(P,this.options.maxWidth),P=Math.max(P,this.options.minWidth),y.width=P+1+"px",y.whiteSpace="",y.height="";var G=u.offsetHeight,le=this.options.maxHeight,Pe="leaflet-popup-scrolled";le&&G>le?(y.height=le+"px",Pn(u,Pe)):rn(u,Pe),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),P=this._getAnchor();dr(this._container,y.add(P))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,y=parseInt(Qr(this._container,"marginBottom"),10)||0,P=this._container.offsetHeight+y,G=this._containerWidth,le=new Q(this._containerLeft,-P-this._containerBottom);le._add(Qs(this._container));var Pe=u.layerPointToContainerPoint(le),ct=we(this.options.autoPanPadding),Ot=we(this.options.autoPanPaddingTopLeft||ct),Gt=we(this.options.autoPanPaddingBottomRight||ct),cn=u.getSize(),zn=0,or=0;Pe.x+G+Gt.x>cn.x&&(zn=Pe.x+G-cn.x+Gt.x),Pe.x-zn-Ot.x<0&&(zn=Pe.x-Ot.x),Pe.y+P+Gt.y>cn.y&&(or=Pe.y+P-cn.y+Gt.y),Pe.y-or-Ot.y<0&&(or=Pe.y-Ot.y),(zn||or)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([zn,or]))}},_getAnchor:function(){return we(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ra=function(u,y){return new Xi(u,y)};ei.mergeOptions({closePopupOnClick:!0}),ei.include({openPopup:function(u,y,P){return this._initOverlay(Xi,u,y,P).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),Ur.include({bindPopup:function(u,y){return this._popup=this._initOverlay(Xi,this._popup,u,y),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof bo||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){Kn(u);var y=u.layer||u.target;if(this._popup._source===y&&!(y instanceof ea)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=y,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var Qa=xo.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){xo.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){xo.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=xo.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",y=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=fr("div",y),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var y,P,G=this._map,le=this._container,Pe=G.latLngToContainerPoint(G.getCenter()),ct=G.layerPointToContainerPoint(u),Ot=this.options.direction,Gt=le.offsetWidth,cn=le.offsetHeight,zn=we(this.options.offset),or=this._getAnchor();Ot==="top"?(y=Gt/2,P=cn):Ot==="bottom"?(y=Gt/2,P=0):Ot==="center"?(y=Gt/2,P=cn/2):Ot==="right"?(y=0,P=cn/2):Ot==="left"?(y=Gt,P=cn/2):ct.x<Pe.x?(Ot="right",y=0,P=cn/2):(Ot="left",y=Gt+(zn.x+or.x)*2,P=cn/2),u=u.subtract(we(y,P,!0)).add(zn).add(or),rn(le,"leaflet-tooltip-right"),rn(le,"leaflet-tooltip-left"),rn(le,"leaflet-tooltip-top"),rn(le,"leaflet-tooltip-bottom"),Pn(le,"leaflet-tooltip-"+Ot),dr(le,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&ui(this._container,u)},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(y)},_getAnchor:function(){return we(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Fa=function(u,y){return new Qa(u,y)};ei.include({openTooltip:function(u,y,P){return this._initOverlay(Qa,u,y,P).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),Ur.include({bindTooltip:function(u,y){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Qa,this._tooltip,u,y),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var y=u?"off":"on",P={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?P.add=this._openTooltip:(P.mouseover=this._openTooltip,P.mouseout=this.closeTooltip,P.click=this._openTooltip,this._map?this._addFocusListeners():P.add=this._addFocusListeners),this._tooltip.options.sticky&&(P.mousemove=this._moveTooltip),this[y](P),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof bo||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var y=typeof u.getElement=="function"&&u.getElement();y&&(Sr(y,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),Sr(y,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var y=typeof u.getElement=="function"&&u.getElement();y&&y.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var y=this;this._map.once("moveend",function(){y._openOnceFlag=!1,y._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var y=u.latlng,P,G;this._tooltip.options.sticky&&u.originalEvent&&(P=this._map.mouseEventToContainerPoint(u.originalEvent),G=this._map.containerPointToLayerPoint(P),y=this._map.layerPointToLatLng(G)),this._tooltip.setLatLng(y)}});var ja=Na.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var y=u&&u.tagName==="DIV"?u:document.createElement("div"),P=this.options;if(P.html instanceof Element?(Lr(y),y.appendChild(P.html)):y.innerHTML=P.html!==!1?P.html:"",P.bgPos){var G=we(P.bgPos);y.style.backgroundPosition=-G.x+"px "+-G.y+"px"}return this._setIconStyles(y,"icon"),y},createShadow:function(){return null}});function za(u){return new ja(u)}Na.Default=wl;var ti=Ur.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ft.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){E(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),On(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ls(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(vo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof Q?u:new Q(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var y=this.getPane().children,P=-u(-1/0,1/0),G=0,le=y.length,Pe;G<le;G++)Pe=y[G].style.zIndex,y[G]!==this._container&&Pe&&(P=u(P,+Pe));isFinite(P)&&(this.options.zIndex=P+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ft.ielt9){ui(this._container,this.options.opacity);var u=+new Date,y=!1,P=!1;for(var G in this._tiles){var le=this._tiles[G];if(!(!le.current||!le.loaded)){var Pe=Math.min(1,(u-le.loaded)/200);ui(le.el,Pe),Pe<1?y=!0:(le.active?P=!0:this._onOpaqueTile(le),le.active=!0)}}P&&!this._noPrune&&this._pruneTiles(),y&&(I(this._fadeFrame),this._fadeFrame=B(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=fr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,y=this.options.maxZoom;if(u!==void 0){for(var P in this._levels)P=Number(P),this._levels[P].el.children.length||P===u?(this._levels[P].el.style.zIndex=y-Math.abs(u-P),this._onUpdateLevel(P)):(On(this._levels[P].el),this._removeTilesAtZoom(P),this._onRemoveLevel(P),delete this._levels[P]);var G=this._levels[u],le=this._map;return G||(G=this._levels[u]={},G.el=fr("div","leaflet-tile-container leaflet-zoom-animated",this._container),G.el.style.zIndex=y,G.origin=le.project(le.unproject(le.getPixelOrigin()),u).round(),G.zoom=u,this._setZoomTransform(G,le.getCenter(),le.getZoom()),p(G.el.offsetWidth),this._onCreateLevel(G)),this._level=G,G}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var u,y,P=this._map.getZoom();if(P>this.options.maxZoom||P<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)y=this._tiles[u],y.retain=y.current;for(u in this._tiles)if(y=this._tiles[u],y.current&&!y.active){var G=y.coords;this._retainParent(G.x,G.y,G.z,G.z-5)||this._retainChildren(G.x,G.y,G.z,G.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var y in this._tiles)this._tiles[y].coords.z===u&&this._removeTile(y)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)On(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,y,P,G){var le=Math.floor(u/2),Pe=Math.floor(y/2),ct=P-1,Ot=new Q(+le,+Pe);Ot.z=+ct;var Gt=this._tileCoordsToKey(Ot),cn=this._tiles[Gt];return cn&&cn.active?(cn.retain=!0,!0):(cn&&cn.loaded&&(cn.retain=!0),ct>G?this._retainParent(le,Pe,ct,G):!1)},_retainChildren:function(u,y,P,G){for(var le=2*u;le<2*u+2;le++)for(var Pe=2*y;Pe<2*y+2;Pe++){var ct=new Q(le,Pe);ct.z=P+1;var Ot=this._tileCoordsToKey(ct),Gt=this._tiles[Ot];if(Gt&&Gt.active){Gt.retain=!0;continue}else Gt&&Gt.loaded&&(Gt.retain=!0);P+1<G&&this._retainChildren(le,Pe,P+1,G)}},_resetView:function(u){var y=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),y,y)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var y=this.options;return y.minNativeZoom!==void 0&&u<y.minNativeZoom?y.minNativeZoom:y.maxNativeZoom!==void 0&&y.maxNativeZoom<u?y.maxNativeZoom:u},_setView:function(u,y,P,G){var le=Math.round(y);this.options.maxZoom!==void 0&&le>this.options.maxZoom||this.options.minZoom!==void 0&&le<this.options.minZoom?le=void 0:le=this._clampZoom(le);var Pe=this.options.updateWhenZooming&&le!==this._tileZoom;(!G||Pe)&&(this._tileZoom=le,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),le!==void 0&&this._update(u),P||this._pruneTiles(),this._noPrune=!!P),this._setZoomTransforms(u,y)},_setZoomTransforms:function(u,y){for(var P in this._levels)this._setZoomTransform(this._levels[P],u,y)},_setZoomTransform:function(u,y,P){var G=this._map.getZoomScale(P,u.zoom),le=u.origin.multiplyBy(G).subtract(this._map._getNewPixelOrigin(y,P)).round();ft.any3d?Ns(u.el,le,G):dr(u.el,le)},_resetGrid:function(){var u=this._map,y=u.options.crs,P=this._tileSize=this.getTileSize(),G=this._tileZoom,le=this._map.getPixelWorldBounds(this._tileZoom);le&&(this._globalTileRange=this._pxBoundsToTileRange(le)),this._wrapX=y.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,y.wrapLng[0]],G).x/P.x),Math.ceil(u.project([0,y.wrapLng[1]],G).x/P.y)],this._wrapY=y.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([y.wrapLat[0],0],G).y/P.x),Math.ceil(u.project([y.wrapLat[1],0],G).y/P.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var y=this._map,P=y._animatingZoom?Math.max(y._animateToZoom,y.getZoom()):y.getZoom(),G=y.getZoomScale(P,this._tileZoom),le=y.project(u,this._tileZoom).floor(),Pe=y.getSize().divideBy(G*2);return new Qe(le.subtract(Pe),le.add(Pe))},_update:function(u){var y=this._map;if(y){var P=this._clampZoom(y.getZoom());if(u===void 0&&(u=y.getCenter()),this._tileZoom!==void 0){var G=this._getTiledPixelBounds(u),le=this._pxBoundsToTileRange(G),Pe=le.getCenter(),ct=[],Ot=this.options.keepBuffer,Gt=new Qe(le.getBottomLeft().subtract([Ot,-Ot]),le.getTopRight().add([Ot,-Ot]));if(!(isFinite(le.min.x)&&isFinite(le.min.y)&&isFinite(le.max.x)&&isFinite(le.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var cn in this._tiles){var zn=this._tiles[cn].coords;(zn.z!==this._tileZoom||!Gt.contains(new Q(zn.x,zn.y)))&&(this._tiles[cn].current=!1)}if(Math.abs(P-this._tileZoom)>1){this._setView(u,P);return}for(var or=le.min.y;or<=le.max.y;or++)for(var $r=le.min.x;$r<=le.max.x;$r++){var Ps=new Q($r,or);if(Ps.z=this._tileZoom,!!this._isValidTile(Ps)){var as=this._tiles[this._tileCoordsToKey(Ps)];as?as.current=!0:ct.push(Ps)}}if(ct.sort(function(Ji,Fo){return Ji.distanceTo(Pe)-Fo.distanceTo(Pe)}),ct.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ys=document.createDocumentFragment();for($r=0;$r<ct.length;$r++)this._addTile(ct[$r],Ys);this._level.el.appendChild(Ys)}}}},_isValidTile:function(u){var y=this._map.options.crs;if(!y.infinite){var P=this._globalTileRange;if(!y.wrapLng&&(u.x<P.min.x||u.x>P.max.x)||!y.wrapLat&&(u.y<P.min.y||u.y>P.max.y))return!1}if(!this.options.bounds)return!0;var G=this._tileCoordsToBounds(u);return K(this.options.bounds).overlaps(G)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var y=this._map,P=this.getTileSize(),G=u.scaleBy(P),le=G.add(P),Pe=y.unproject(G,u.z),ct=y.unproject(le,u.z);return[Pe,ct]},_tileCoordsToBounds:function(u){var y=this._tileCoordsToNwSe(u),P=new H(y[0],y[1]);return this.options.noWrap||(P=this._map.wrapLatLngBounds(P)),P},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var y=u.split(":"),P=new Q(+y[0],+y[1]);return P.z=+y[2],P},_removeTile:function(u){var y=this._tiles[u];y&&(On(y.el),delete this._tiles[u],this.fire("tileunload",{tile:y.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){Pn(u,"leaflet-tile");var y=this.getTileSize();u.style.width=y.x+"px",u.style.height=y.y+"px",u.onselectstart=p,u.onmousemove=p,ft.ielt9&&this.options.opacity<1&&ui(u,this.options.opacity)},_addTile:function(u,y){var P=this._getTilePos(u),G=this._tileCoordsToKey(u),le=this.createTile(this._wrapCoords(u),o(this._tileReady,this,u));this._initTile(le),this.createTile.length<2&&B(o(this._tileReady,this,u,null,le)),dr(le,P),this._tiles[G]={el:le,coords:u,current:!0},y.appendChild(le),this.fire("tileloadstart",{tile:le,coords:u})},_tileReady:function(u,y,P){y&&this.fire("tileerror",{error:y,tile:P,coords:u});var G=this._tileCoordsToKey(u);P=this._tiles[G],P&&(P.loaded=+new Date,this._map._fadeAnimated?(ui(P.el,0),I(this._fadeFrame),this._fadeFrame=B(this._updateOpacity,this)):(P.active=!0,this._pruneTiles()),y||(Pn(P.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:P.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ft.ielt9||!this._map._fadeAnimated?B(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var y=new Q(this._wrapX?d(u.x,this._wrapX):u.x,this._wrapY?d(u.y,this._wrapY):u.y);return y.z=u.z,y},_pxBoundsToTileRange:function(u){var y=this.getTileSize();return new Qe(u.min.unscaleBy(y).floor(),u.max.unscaleBy(y).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function ba(u){return new ti(u)}var Ws=ti.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,y){this._url=u,y=E(this,y),y.detectRetina&&ft.retina&&y.maxZoom>0?(y.tileSize=Math.floor(y.tileSize/2),y.zoomReverse?(y.zoomOffset--,y.minZoom=Math.min(y.maxZoom,y.minZoom+1)):(y.zoomOffset++,y.maxZoom=Math.max(y.minZoom,y.maxZoom-1)),y.minZoom=Math.max(0,y.minZoom)):y.zoomReverse?y.minZoom=Math.min(y.maxZoom,y.minZoom):y.maxZoom=Math.max(y.minZoom,y.maxZoom),typeof y.subdomains=="string"&&(y.subdomains=y.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,y){return this._url===u&&y===void 0&&(y=!0),this._url=u,y||this.redraw(),this},createTile:function(u,y){var P=document.createElement("img");return Sr(P,"load",o(this._tileOnLoad,this,y,P)),Sr(P,"error",o(this._tileOnError,this,y,P)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(P.referrerPolicy=this.options.referrerPolicy),P.alt="",P.src=this.getTileUrl(u),P},getTileUrl:function(u){var y={r:ft.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var P=this._globalTileRange.max.y-u.y;this.options.tms&&(y.y=P),y["-y"]=P}return D(this._url,i(y,this.options))},_tileOnLoad:function(u,y){ft.ielt9?setTimeout(o(u,this,null,y),0):u(null,y)},_tileOnError:function(u,y,P){var G=this.options.errorTileUrl;G&&y.getAttribute("src")!==G&&(y.src=G),u(P,y)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,y=this.options.maxZoom,P=this.options.zoomReverse,G=this.options.zoomOffset;return P&&(u=y-u),u+G},_getSubdomain:function(u){var y=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[y]},_abortLoading:function(){var u,y;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(y=this._tiles[u].el,y.onload=p,y.onerror=p,!y.complete)){y.src=te;var P=this._tiles[u].coords;On(y),delete this._tiles[u],this.fire("tileabort",{tile:y,coords:P})}},_removeTile:function(u){var y=this._tiles[u];if(y)return y.el.setAttribute("src",te),ti.prototype._removeTile.call(this,u)},_tileReady:function(u,y,P){if(!(!this._map||P&&P.getAttribute("src")===te))return ti.prototype._tileReady.call(this,u,y,P)}});function Pi(u,y){return new Ws(u,y)}var Ii=Ws.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,y){this._url=u;var P=i({},this.defaultWmsParams);for(var G in y)G in this.options||(P[G]=y[G]);y=E(this,y);var le=y.detectRetina&&ft.retina?2:1,Pe=this.getTileSize();P.width=Pe.x*le,P.height=Pe.y*le,this.wmsParams=P},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var y=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[y]=this._crs.code,Ws.prototype.onAdd.call(this,u)},getTileUrl:function(u){var y=this._tileCoordsToNwSe(u),P=this._crs,G=ae(P.project(y[0]),P.project(y[1])),le=G.min,Pe=G.max,ct=(this._wmsVersion>=1.3&&this._crs===Ss?[le.y,le.x,Pe.y,Pe.x]:[le.x,le.y,Pe.x,Pe.y]).join(","),Ot=Ws.prototype.getTileUrl.call(this,u);return Ot+k(this.wmsParams,Ot,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ct},setParams:function(u,y){return i(this.wmsParams,u),y||this.redraw(),this}});function bs(u,y){return new Ii(u,y)}Ws.WMS=Ii,Pi.wms=bs;var Ui=Ur.extend({options:{padding:.1},initialize:function(u){E(this,u),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Pn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,y){var P=this._map.getZoomScale(y,this._zoom),G=this._map.getSize().multiplyBy(.5+this.options.padding),le=this._map.project(this._center,y),Pe=G.multiplyBy(-P).add(le).subtract(this._map._getNewPixelOrigin(u,y));ft.any3d?Ns(this._container,Pe,P):dr(this._container,Pe)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,y=this._map.getSize(),P=this._map.containerPointToLayerPoint(y.multiplyBy(-u)).round();this._bounds=new Qe(P,P.add(y.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),na=Ui.extend({options:{tolerance:0},getEvents:function(){var u=Ui.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ui.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");Sr(u,"mousemove",this._onMouseMove,this),Sr(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Sr(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){I(this._redrawRequest),delete this._ctx,On(this._container),Ar(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var y in this._layers)u=this._layers[y],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ui.prototype._update.call(this);var u=this._bounds,y=this._container,P=u.getSize(),G=ft.retina?2:1;dr(y,u.min),y.width=G*P.x,y.height=G*P.y,y.style.width=P.x+"px",y.style.height=P.y+"px",ft.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){Ui.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[l(u)]=u;var y=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=y),this._drawLast=y,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var y=u._order,P=y.next,G=y.prev;P?P.prev=G:this._drawLast=G,G?G.next=P:this._drawFirst=P,delete u._order,delete this._layers[l(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var y=u.options.dashArray.split(/[, ]+/),P=[],G,le;for(le=0;le<y.length;le++){if(G=Number(y[le]),isNaN(G))return;P.push(G)}u.options._dashArray=P}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||B(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var y=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Qe,this._redrawBounds.extend(u._pxBounds.min.subtract([y,y])),this._redrawBounds.extend(u._pxBounds.max.add([y,y]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var y=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,y.x,y.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,y=this._redrawBounds;if(this._ctx.save(),y){var P=y.getSize();this._ctx.beginPath(),this._ctx.rect(y.min.x,y.min.y,P.x,P.y),this._ctx.clip()}this._drawing=!0;for(var G=this._drawFirst;G;G=G.next)u=G.layer,(!y||u._pxBounds&&u._pxBounds.intersects(y))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,y){if(this._drawing){var P,G,le,Pe,ct=u._parts,Ot=ct.length,Gt=this._ctx;if(Ot){for(Gt.beginPath(),P=0;P<Ot;P++){for(G=0,le=ct[P].length;G<le;G++)Pe=ct[P][G],Gt[G?"lineTo":"moveTo"](Pe.x,Pe.y);y&&Gt.closePath()}this._fillStroke(Gt,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var y=u._point,P=this._ctx,G=Math.max(Math.round(u._radius),1),le=(Math.max(Math.round(u._radiusY),1)||G)/G;le!==1&&(P.save(),P.scale(1,le)),P.beginPath(),P.arc(y.x,y.y/le,G,0,Math.PI*2,!1),le!==1&&P.restore(),this._fillStroke(P,u)}},_fillStroke:function(u,y){var P=y.options;P.fill&&(u.globalAlpha=P.fillOpacity,u.fillStyle=P.fillColor||P.color,u.fill(P.fillRule||"evenodd")),P.stroke&&P.weight!==0&&(u.setLineDash&&u.setLineDash(y.options&&y.options._dashArray||[]),u.globalAlpha=P.opacity,u.lineWidth=P.weight,u.strokeStyle=P.color,u.lineCap=P.lineCap,u.lineJoin=P.lineJoin,u.stroke())},_onClick:function(u){for(var y=this._map.mouseEventToLayerPoint(u),P,G,le=this._drawFirst;le;le=le.next)P=le.layer,P.options.interactive&&P._containsPoint(y)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(P))&&(G=P);this._fireEvent(G?[G]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var y=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,y)}},_handleMouseOut:function(u){var y=this._hoveredLayer;y&&(rn(this._container,"leaflet-interactive"),this._fireEvent([y],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,y){if(!this._mouseHoverThrottled){for(var P,G,le=this._drawFirst;le;le=le.next)P=le.layer,P.options.interactive&&P._containsPoint(y)&&(G=P);G!==this._hoveredLayer&&(this._handleMouseOut(u),G&&(Pn(this._container,"leaflet-interactive"),this._fireEvent([G],u,"mouseover"),this._hoveredLayer=G)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,y,P){this._map._fireDOMEvent(y,P||y.type,u)},_bringToFront:function(u){var y=u._order;if(y){var P=y.next,G=y.prev;if(P)P.prev=G;else return;G?G.next=P:P&&(this._drawFirst=P),y.prev=this._drawLast,this._drawLast.next=y,y.next=null,this._drawLast=y,this._requestRedraw(u)}},_bringToBack:function(u){var y=u._order;if(y){var P=y.next,G=y.prev;if(G)G.next=P;else return;P?P.prev=G:G&&(this._drawLast=G),y.prev=null,y.next=this._drawFirst,this._drawFirst.prev=y,this._drawFirst=y,this._requestRedraw(u)}}});function Bo(u){return ft.canvas?new na(u):null}var ca=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),nc={_initContainer:function(){this._container=fr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ui.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var y=u._container=ca("shape");Pn(y,"leaflet-vml-shape "+(this.options.className||"")),y.coordsize="1 1",u._path=ca("path"),y.appendChild(u._path),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){var y=u._container;this._container.appendChild(y),u.options.interactive&&u.addInteractiveTarget(y)},_removePath:function(u){var y=u._container;On(y),u.removeInteractiveTarget(y),delete this._layers[l(u)]},_updateStyle:function(u){var y=u._stroke,P=u._fill,G=u.options,le=u._container;le.stroked=!!G.stroke,le.filled=!!G.fill,G.stroke?(y||(y=u._stroke=ca("stroke")),le.appendChild(y),y.weight=G.weight+"px",y.color=G.color,y.opacity=G.opacity,G.dashArray?y.dashStyle=j(G.dashArray)?G.dashArray.join(" "):G.dashArray.replace(/( *, *)/g," "):y.dashStyle="",y.endcap=G.lineCap.replace("butt","flat"),y.joinstyle=G.lineJoin):y&&(le.removeChild(y),u._stroke=null),G.fill?(P||(P=u._fill=ca("fill")),le.appendChild(P),P.color=G.fillColor||G.color,P.opacity=G.fillOpacity):P&&(le.removeChild(P),u._fill=null)},_updateCircle:function(u){var y=u._point.round(),P=Math.round(u._radius),G=Math.round(u._radiusY||P);this._setPath(u,u._empty()?"M0 0":"AL "+y.x+","+y.y+" "+P+","+G+" 0,"+65535*360)},_setPath:function(u,y){u._path.v=y},_bringToFront:function(u){Ls(u._container)},_bringToBack:function(u){vo(u._container)}},$a=ft.vml?ca:se,Es=Ui.extend({_initContainer:function(){this._container=$a("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=$a("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){On(this._container),Ar(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ui.prototype._update.call(this);var u=this._bounds,y=u.getSize(),P=this._container;(!this._svgSize||!this._svgSize.equals(y))&&(this._svgSize=y,P.setAttribute("width",y.x),P.setAttribute("height",y.y)),dr(P,u.min),P.setAttribute("viewBox",[u.min.x,u.min.y,y.x,y.y].join(" ")),this.fire("update")}},_initPath:function(u){var y=u._path=$a("path");u.options.className&&Pn(y,u.options.className),u.options.interactive&&Pn(y,"leaflet-interactive"),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){On(u._path),u.removeInteractiveTarget(u._path),delete this._layers[l(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var y=u._path,P=u.options;y&&(P.stroke?(y.setAttribute("stroke",P.color),y.setAttribute("stroke-opacity",P.opacity),y.setAttribute("stroke-width",P.weight),y.setAttribute("stroke-linecap",P.lineCap),y.setAttribute("stroke-linejoin",P.lineJoin),P.dashArray?y.setAttribute("stroke-dasharray",P.dashArray):y.removeAttribute("stroke-dasharray"),P.dashOffset?y.setAttribute("stroke-dashoffset",P.dashOffset):y.removeAttribute("stroke-dashoffset")):y.setAttribute("stroke","none"),P.fill?(y.setAttribute("fill",P.fillColor||P.color),y.setAttribute("fill-opacity",P.fillOpacity),y.setAttribute("fill-rule",P.fillRule||"evenodd")):y.setAttribute("fill","none"))},_updatePoly:function(u,y){this._setPath(u,ce(u._parts,y))},_updateCircle:function(u){var y=u._point,P=Math.max(Math.round(u._radius),1),G=Math.max(Math.round(u._radiusY),1)||P,le="a"+P+","+G+" 0 1,0 ",Pe=u._empty()?"M0 0":"M"+(y.x-P)+","+y.y+le+P*2+",0 "+le+-P*2+",0 ";this._setPath(u,Pe)},_setPath:function(u,y){u._path.setAttribute("d",y)},_bringToFront:function(u){Ls(u._path)},_bringToBack:function(u){vo(u._path)}});ft.vml&&Es.include(nc);function $i(u){return ft.svg||ft.vml?new Es(u):null}ei.include({getRenderer:function(u){var y=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return y||(y=this._renderer=this._createRenderer()),this.hasLayer(y)||this.addLayer(y),y},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var y=this._paneRenderers[u];return y===void 0&&(y=this._createRenderer({pane:u}),this._paneRenderers[u]=y),y},_createRenderer:function(u){return this.options.preferCanvas&&Bo(u)||$i(u)}});var ao=Is.extend({initialize:function(u,y){Is.prototype.initialize.call(this,this._boundsToLatLngs(u),y)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=K(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function Ro(u,y){return new ao(u,y)}Es.create=$a,Es.pointsToPath=ce,ro.geometryToLayer=io,ro.coordsToLatLng=Ja,ro.coordsToLatLngs=so,ro.latLngToCoords=Hs,ro.latLngsToCoords=Ba,ro.getFeature=ta,ro.asFeature=oo,ei.mergeOptions({boxZoom:!0});var wr=Li.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){Sr(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ar(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){On(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Vi(),vn(),this._startPoint=this._map.mouseEventToContainerPoint(u),Sr(document,{contextmenu:Kn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=fr("div","leaflet-zoom-box",this._container),Pn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var y=new Qe(this._point,this._startPoint),P=y.getSize();dr(this._box,y.min),this._box.style.width=P.x+"px",this._box.style.height=P.y+"px"},_finish:function(){this._moved&&(On(this._box),rn(this._container,"leaflet-crosshair")),Gi(),Fr(),Ar(document,{contextmenu:Kn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var y=new H(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(y).fire("boxzoomend",{boxZoomBounds:y})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ei.addInitHook("addHandler","boxZoom",wr),ei.mergeOptions({doubleClickZoom:!0});var el=Li.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var y=this._map,P=y.getZoom(),G=y.options.zoomDelta,le=u.originalEvent.shiftKey?P-G:P+G;y.options.doubleClickZoom==="center"?y.setZoom(le):y.setZoomAround(u.containerPoint,le)}});ei.addInitHook("addHandler","doubleClickZoom",el),ei.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var tl=Li.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new va(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}Pn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){rn(this._map._container,"leaflet-grab"),rn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var y=K(this._map.options.maxBounds);this._offsetLimit=ae(this._map.latLngToContainerPoint(y.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(y.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var y=this._lastTime=+new Date,P=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(P),this._times.push(y),this._prunePositions(y)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),y=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=y.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,y){return u-(u-y)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),y=this._offsetLimit;u.x<y.min.x&&(u.x=this._viscousLimit(u.x,y.min.x)),u.y<y.min.y&&(u.y=this._viscousLimit(u.y,y.min.y)),u.x>y.max.x&&(u.x=this._viscousLimit(u.x,y.max.x)),u.y>y.max.y&&(u.y=this._viscousLimit(u.y,y.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,y=Math.round(u/2),P=this._initialWorldOffset,G=this._draggable._newPos.x,le=(G-y+P)%u+y-P,Pe=(G+y+P)%u-y-P,ct=Math.abs(le+P)<Math.abs(Pe+P)?le:Pe;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ct},_onDragEnd:function(u){var y=this._map,P=y.options,G=!P.inertia||u.noInertia||this._times.length<2;if(y.fire("dragend",u),G)y.fire("moveend");else{this._prunePositions(+new Date);var le=this._lastPos.subtract(this._positions[0]),Pe=(this._lastTime-this._times[0])/1e3,ct=P.easeLinearity,Ot=le.multiplyBy(ct/Pe),Gt=Ot.distanceTo([0,0]),cn=Math.min(P.inertiaMaxSpeed,Gt),zn=Ot.multiplyBy(cn/Gt),or=cn/(P.inertiaDeceleration*ct),$r=zn.multiplyBy(-or/2).round();!$r.x&&!$r.y?y.fire("moveend"):($r=y._limitOffset($r,y.options.maxBounds),B(function(){y.panBy($r,{duration:or,easeLinearity:ct,noMoveStart:!0,animate:!0})}))}}});ei.addInitHook("addHandler","dragging",tl),ei.mergeOptions({keyboard:!0,keyboardPanDelta:80});var _a=Li.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),Sr(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ar(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,y=document.documentElement,P=u.scrollTop||y.scrollTop,G=u.scrollLeft||y.scrollLeft;this._map._container.focus(),window.scrollTo(G,P)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var y=this._panKeys={},P=this.keyCodes,G,le;for(G=0,le=P.left.length;G<le;G++)y[P.left[G]]=[-1*u,0];for(G=0,le=P.right.length;G<le;G++)y[P.right[G]]=[u,0];for(G=0,le=P.down.length;G<le;G++)y[P.down[G]]=[0,u];for(G=0,le=P.up.length;G<le;G++)y[P.up[G]]=[0,-1*u]},_setZoomDelta:function(u){var y=this._zoomKeys={},P=this.keyCodes,G,le;for(G=0,le=P.zoomIn.length;G<le;G++)y[P.zoomIn[G]]=u;for(G=0,le=P.zoomOut.length;G<le;G++)y[P.zoomOut[G]]=-u},_addHooks:function(){Sr(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ar(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var y=u.keyCode,P=this._map,G;if(y in this._panKeys){if(!P._panAnim||!P._panAnim._inProgress)if(G=this._panKeys[y],u.shiftKey&&(G=we(G).multiplyBy(3)),P.options.maxBounds&&(G=P._limitOffset(we(G),P.options.maxBounds)),P.options.worldCopyJump){var le=P.wrapLatLng(P.unproject(P.project(P.getCenter()).add(G)));P.panTo(le)}else P.panBy(G)}else if(y in this._zoomKeys)P.setZoom(P.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[y]);else if(y===27&&P._popup&&P._popup.options.closeOnEscapeKey)P.closePopup();else return;Kn(u)}}});ei.addInitHook("addHandler","keyboard",_a),ei.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Lo=Li.extend({addHooks:function(){Sr(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ar(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var y=Au(u),P=this._map.options.wheelDebounceTime;this._delta+=y,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var G=Math.max(P-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),G),Kn(u)},_performZoom:function(){var u=this._map,y=u.getZoom(),P=this._map.options.zoomSnap||0;u._stop();var G=this._delta/(this._map.options.wheelPxPerZoomLevel*4),le=4*Math.log(2/(1+Math.exp(-Math.abs(G))))/Math.LN2,Pe=P?Math.ceil(le/P)*P:le,ct=u._limitZoom(y+(this._delta>0?Pe:-Pe))-y;this._delta=0,this._startTime=null,ct&&(u.options.scrollWheelZoom==="center"?u.setZoom(y+ct):u.setZoomAround(this._lastMousePos,y+ct))}});ei.addInitHook("addHandler","scrollWheelZoom",Lo);var oh=600;ei.mergeOptions({tapHold:ft.touchNative&&ft.safari&&ft.mobile,tapTolerance:15});var Gs=Li.extend({addHooks:function(){Sr(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ar(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var y=u.touches[0];this._startPos=this._newPos=new Q(y.clientX,y.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Sr(document,"touchend",Er),Sr(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",y))},this),oh),Sr(document,"touchend touchcancel contextmenu",this._cancel,this),Sr(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){Ar(document,"touchend",Er),Ar(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),Ar(document,"touchend touchcancel contextmenu",this._cancel,this),Ar(document,"touchmove",this._onMove,this)},_onMove:function(u){var y=u.touches[0];this._newPos=new Q(y.clientX,y.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,y){var P=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:y.screenX,screenY:y.screenY,clientX:y.clientX,clientY:y.clientY});P._simulated=!0,y.target.dispatchEvent(P)}});ei.addInitHook("addHandler","tapHold",Gs),ei.mergeOptions({touchZoom:ft.touch,bounceAtZoomLimits:!0});var qs=Li.extend({addHooks:function(){Pn(this._map._container,"leaflet-touch-zoom"),Sr(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){rn(this._map._container,"leaflet-touch-zoom"),Ar(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var y=this._map;if(!(!u.touches||u.touches.length!==2||y._animatingZoom||this._zooming)){var P=y.mouseEventToContainerPoint(u.touches[0]),G=y.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=y.getSize()._divideBy(2),this._startLatLng=y.containerPointToLatLng(this._centerPoint),y.options.touchZoom!=="center"&&(this._pinchStartLatLng=y.containerPointToLatLng(P.add(G)._divideBy(2))),this._startDist=P.distanceTo(G),this._startZoom=y.getZoom(),this._moved=!1,this._zooming=!0,y._stop(),Sr(document,"touchmove",this._onTouchMove,this),Sr(document,"touchend touchcancel",this._onTouchEnd,this),Er(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var y=this._map,P=y.mouseEventToContainerPoint(u.touches[0]),G=y.mouseEventToContainerPoint(u.touches[1]),le=P.distanceTo(G)/this._startDist;if(this._zoom=y.getScaleZoom(le,this._startZoom),!y.options.bounceAtZoomLimits&&(this._zoom<y.getMinZoom()&&le<1||this._zoom>y.getMaxZoom()&&le>1)&&(this._zoom=y._limitZoom(this._zoom)),y.options.touchZoom==="center"){if(this._center=this._startLatLng,le===1)return}else{var Pe=P._add(G)._divideBy(2)._subtract(this._centerPoint);if(le===1&&Pe.x===0&&Pe.y===0)return;this._center=y.unproject(y.project(this._pinchStartLatLng,this._zoom).subtract(Pe),this._zoom)}this._moved||(y._moveStart(!0,!1),this._moved=!0),I(this._animRequest);var ct=o(y._move,y,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=B(ct,this,!0),Er(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,I(this._animRequest),Ar(document,"touchmove",this._onTouchMove,this),Ar(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ei.addInitHook("addHandler","touchZoom",qs),ei.BoxZoom=wr,ei.DoubleClickZoom=el,ei.Drag=tl,ei.Keyboard=_a,ei.ScrollWheelZoom=Lo,ei.TapHold=Gs,ei.TouchZoom=qs,n.Bounds=Qe,n.Browser=ft,n.CRS=he,n.Canvas=na,n.Circle=no,n.CircleMarker=Io,n.Class=z,n.Control=mr,n.DivIcon=ja,n.DivOverlay=xo,n.DomEvent=uu,n.DomUtil=Vn,n.Draggable=va,n.Evented=re,n.FeatureGroup=bo,n.GeoJSON=ro,n.GridLayer=ti,n.Handler=Li,n.Icon=Na,n.ImageOverlay=Rn,n.LatLng=me,n.LatLngBounds=H,n.Layer=Ur,n.LayerGroup=to,n.LineUtil=Vr,n.Map=ei,n.Marker=Cs,n.Mixin=Ac,n.Path=ea,n.Point=Q,n.PolyUtil=jl,n.Polygon=Is,n.Polyline=wo,n.Popup=Xi,n.PosAnimation=Tu,n.Projection=Ci,n.Rectangle=ao,n.Renderer=Ui,n.SVG=Es,n.SVGOverlay=Ei,n.TileLayer=Ws,n.Tooltip=Qa,n.Transformation=Te,n.Util=R,n.VideoOverlay=Pr,n.bind=o,n.bounds=ae,n.canvas=Bo,n.circle=_o,n.circleMarker=$l,n.control=ms,n.divIcon=za,n.extend=i,n.featureGroup=Ou,n.geoJSON=Yt,n.geoJson=Nt,n.gridLayer=ba,n.icon=tc,n.imageOverlay=rr,n.latLng=fe,n.latLngBounds=K,n.layerGroup=zl,n.map=gs,n.marker=Ia,n.point=we,n.polygon=Ka,n.polyline=Tc,n.popup=Ra,n.rectangle=Ro,n.setOptions=E,n.stamp=l,n.svg=$i,n.svgOverlay=pu,n.tileLayer=Pi,n.tooltip=Fa,n.transformation=Je,n.version=r,n.videoOverlay=Ki;var wa=window.L;n.noConflict=function(){return window.L=wa,this},window.L=n})})(mb,mb.exports);var $t=mb.exports;const Zn=j_($t);var t5={exports:{}};(function(t,e){(function(n,r){r(e)})(Pa,function(n){var r=typeof window<"u"?window:typeof Pa<"u"?Pa:typeof self<"u"?self:{};function i(c,d){return c(d={exports:{}},d.exports),d.exports}var s=i(function(c,d){(function(p){const v={escape:function(U){return U.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:g,mimeType:function(U){return U=g(U).toLowerCase(),function(){var V="application/font-woff",re="image/jpeg";return{woff:V,woff2:V,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:re,jpeg:re,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[U]||""},dataAsUrl:function(U,V){return`data:${V};base64,`+U},isDataUrl:function(U){return U.search(/^(data:)/)!==-1},canvasToBlob:function(U){return U.toBlob?new Promise(function(re){U.toBlob(re)}):(V=U,new Promise(function(re){const Q=pe(V.toDataURL().split(",")[1]);var _e=Q.length;const we=new Uint8Array(_e);for(let Qe=0;Qe<_e;Qe++)we[Qe]=Q.charCodeAt(Qe);re(new Blob([we],{type:"image/png"}))}));var V},resolveUrl:function(U,V){const re=document.implementation.createHTMLDocument(),Q=re.createElement("base"),_e=(re.head.appendChild(Q),re.createElement("a"));return re.body.appendChild(_e),Q.href=V,_e.href=U,_e.href},getAndEncode:function(U){let V=te.impl.urlCache.find(function(re){return re.url===U});return V||(V={url:U,promise:null},te.impl.urlCache.push(V)),V.promise===null&&(te.impl.options.cacheBust&&(U+=(/\?/.test(U)?"&":"?")+new Date().getTime()),V.promise=new Promise(function(re){const Q=te.impl.options.httpTimeout,_e=new XMLHttpRequest;let we;var Qe;function ae(H){console.error(H),re("")}_e.onreadystatechange=function(){if(_e.readyState===4)if(_e.status!==200)we?re(we):ae(`cannot fetch resource: ${U}, status: `+_e.status);else{const H=new FileReader;H.onloadend=function(){var K=H.result.split(/,/)[1];re(K)},H.readAsDataURL(_e.response)}},_e.ontimeout=function(){we?re(we):ae(`timeout of ${Q}ms occured while fetching resource: `+U)},_e.responseType="blob",_e.timeout=Q,te.impl.options.useCredentials&&(_e.withCredentials=!0),_e.open("GET",U,!0),_e.send(),te.impl.options.imagePlaceholder&&(Qe=te.impl.options.imagePlaceholder.split(/,/))&&Qe[1]&&(we=Qe[1])})),V.promise},uid:function(){let U=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+U++}}(),delay:function(U){return function(V){return new Promise(function(re){setTimeout(function(){re(V)},U)})}},asArray:function(U){const V=[],re=U.length;for(let Q=0;Q<re;Q++)V.push(U[Q]);return V},escapeXhtml:function(U){return U.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(U){return U!=="data:,"?new Promise(function(V,re){const Q=new Image;te.impl.options.useCredentials&&(Q.crossOrigin="use-credentials"),Q.onload=function(){V(Q)},Q.onerror=re,Q.src=U}):Promise.resolve()},width:function(U){var V=x(U,"border-left-width"),re=x(U,"border-right-width");return U.scrollWidth+V+re},height:function(U){var V=x(U,"border-top-width"),re=x(U,"border-bottom-width");return U.scrollHeight+V+re}};function g(U){return(U=/\.([^\.\/]*?)(\?|$)/g.exec(U))?U[1]:""}function x(U,V){const re=ge(U).getPropertyValue(V);return parseFloat(re.replace("px",""))}const E=function(){const U=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(_e,we,Qe){return V(_e)?Promise.resolve(_e).then(re).then(function(ae){let H=Promise.resolve(_e);return ae.forEach(function(K){H=H.then(function(me){return Q(me,K,we,Qe)})}),H}):Promise.resolve(_e)},shouldProcess:V,impl:{readUrls:re,inline:Q}};function V(_e){return _e.search(U)!==-1}function re(_e){const we=[];for(var Qe;(Qe=U.exec(_e))!==null;)we.push(Qe[1]);return we.filter(function(ae){return!v.isDataUrl(ae)})}function Q(_e,we,Qe,ae){return Promise.resolve(we).then(function(H){return Qe?v.resolveUrl(H,Qe):H}).then(ae||v.getAndEncode).then(function(H){return v.dataAsUrl(H,v.mimeType(we))}).then(function(H){return _e.replace((K=we,new RegExp(`(url\\(['"]?)(${v.escape(K)})(['"]?\\))`,"g")),`$1${H}$3`);var K})}}(),k={resolveAll:function(){return A().then(function(U){return Promise.all(U.map(function(V){return V.resolve()}))}).then(function(U){return U.join(`
`)})},impl:{readAll:A}};function A(){return Promise.resolve(v.asArray(document.styleSheets)).then(function(V){const re=[];return V.forEach(function(Q){if(Object.getPrototypeOf(Q).hasOwnProperty("cssRules"))try{v.asArray(Q.cssRules||[]).forEach(re.push.bind(re))}catch(_e){console.log("Error while reading CSS rules from "+Q.href,_e.toString())}}),re}).then(function(V){return V.filter(function(re){return re.type===CSSRule.FONT_FACE_RULE}).filter(function(re){return E.shouldProcess(re.style.getPropertyValue("src"))})}).then(function(V){return V.map(U)});function U(V){return{resolve:function(){var re=(V.parentStyleSheet||{}).href;return E.inlineAll(V.cssText,re)},src:function(){return V.style.getPropertyValue("src")}}}}const D={inlineAll:function U(V){return V instanceof Element?function(re){const Q=re.style.getPropertyValue("background");return Q?E.inlineAll(Q).then(function(_e){re.style.setProperty("background",_e,Q)}).then(function(){return re}):Promise.resolve(re)}(V).then(function(){return V instanceof HTMLImageElement?j(V).inline():Promise.all(v.asArray(V.childNodes).map(function(re){return U(re)}))}):Promise.resolve(V)},impl:{newImage:j}};function j(U){return{inline:function(V){return v.isDataUrl(U.src)?Promise.resolve():Promise.resolve(U.src).then(V||v.getAndEncode).then(function(re){return v.dataAsUrl(re,v.mimeType(U.src))}).then(function(re){return new Promise(function(Q){U.onload=Q,U.onerror=Q,U.src=re})})}}}const Y={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},te={toSvg:N,toPng:function(U,V){return(V=V||{}).raster=!0,$(U,V).then(function(re){return re.toDataURL()})},toJpeg:function(U,V){return(V=V||{}).raster=!0,$(U,V).then(function(re){return re.toDataURL("image/jpeg",V.quality||1)})},toBlob:function(U,V){return(V=V||{}).raster=!0,$(U,V).then(v.canvasToBlob)},toPixelData:function(U,V){return(V=V||{}).raster=!0,$(U,V).then(function(re){return re.getContext("2d").getImageData(0,0,v.width(U),v.height(U)).data})},toCanvas:function(U,V){return(V=V||{}).raster=!0,$(U,V||{})},impl:{fontFaces:k,images:D,util:v,inliner:E,urlCache:[],options:{}}},ge=(c.exports=te,p.getComputedStyle||window.getComputedStyle),pe=p.atob||window.atob;function N(U,V){var re=V=V||{};return re.imagePlaceholder===void 0?te.impl.options.imagePlaceholder=Y.imagePlaceholder:te.impl.options.imagePlaceholder=re.imagePlaceholder,re.cacheBust===void 0?te.impl.options.cacheBust=Y.cacheBust:te.impl.options.cacheBust=re.cacheBust,re.useCredentials===void 0?te.impl.options.useCredentials=Y.useCredentials:te.impl.options.useCredentials=re.useCredentials,Promise.resolve(U).then(function(Q){return function _e(we,Qe,ae,H,K=null){return ae||!Qe||Qe(we)?Promise.resolve(we).then(function(me){return me instanceof HTMLCanvasElement?v.makeImage(me.toDataURL()):me.nodeName==="IFRAME"?html2canvas(me.contentDocument.body).then(fe=>fe.toDataURL()).then(v.makeImage):me.cloneNode(!1)}).then(function(me){return function(fe,he){const X=fe.childNodes;return X.length===0?Promise.resolve(he):function(J,De){const Te=ge(fe);let Je=Promise.resolve();return De.forEach(function(de){Je=Je.then(function(){return _e(de,Qe,!1,H,Te)}).then(function(ee){ee&&J.appendChild(ee)})}),Je}(he,v.asArray(X)).then(function(){return he})}(we,me)}).then(function(me){return function(fe,he,X){return he instanceof Element?Promise.resolve().then(function(){(function(J,De){const Te=ge(J);Te.cssText?(De.style.cssText=Te.cssText,function(Je,de){de.font=Je.font,de.fontFamily=Je.fontFamily,de.fontFeatureSettings=Je.fontFeatureSettings,de.fontKerning=Je.fontKerning,de.fontSize=Je.fontSize,de.fontStretch=Je.fontStretch,de.fontStyle=Je.fontStyle,de.fontVariant=Je.fontVariant,de.fontVariantCaps=Je.fontVariantCaps,de.fontVariantEastAsian=Je.fontVariantEastAsian,de.fontVariantLigatures=Je.fontVariantLigatures,de.fontVariantNumeric=Je.fontVariantNumeric,de.fontVariationSettings=Je.fontVariationSettings,de.fontWeight=Je.fontWeight}(Te,De.style)):(X?function(Je,de,ee,se){const ce=ee.style,ze=Je.style;for(var Ce of de){var ve=de.getPropertyValue(Ce),Ve=ze.getPropertyValue(Ce),Ye=(ze.setProperty(Ce,se?"initial":"unset"),de.getPropertyValue(Ce));Ye!==ve?ce.setProperty(Ce,ve):ce.removeProperty(Ce),ze.setProperty(Ce,Ve)}}(J,Te,De,ae):function(Je,de,ee){const se=function(ze){if(z[ze])return z[ze];R||((R=document.createElement("iframe")).style.visibility="hidden",R.style.position="fixed",document.body.appendChild(R),R.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const Ce=document.createElement(ze),ve=(R.contentWindow.document.body.appendChild(Ce),Ce.textContent=".",R.contentWindow.getComputedStyle(Ce)),Ve={};return v.asArray(ve).forEach(function(Ye){Ve[Ye]=Ye==="width"||Ye==="height"?"auto":ve.getPropertyValue(Ye)}),R.contentWindow.document.body.removeChild(Ce),z[ze]=Ve}(ee.tagName),ce=ee.style;v.asArray(Je).forEach(function(ze){var Ce=Je.getPropertyValue(ze);(Ce!==se[ze]||de&&Ce!==de.getPropertyValue(ze))&&ce.setProperty(ze,Ce,Je.getPropertyPriority(ze))})}(Te,K,De),ae&&(["inset-block","inset-block-start","inset-block-end"].forEach(Je=>De.style.removeProperty(Je)),["left","right","top","bottom"].forEach(Je=>{De.style.getPropertyValue(Je)&&De.style.setProperty(Je,"0px")})))})(fe,he)}).then(function(){[":before",":after"].forEach(function(J){(function(De){const Te=ge(fe,De),Je=Te.getPropertyValue("content");if(Je!==""&&Je!=="none"){const de=v.uid(),ee=he.getAttribute("class"),se=(ee&&he.setAttribute("class",ee+" "+de),document.createElement("style"));se.appendChild(function(){const ce=`.${de}:`+De,ze=(Te.cssText?function(){return`${Te.cssText} content: ${Te.getPropertyValue("content")};`}:function(){return v.asArray(Te).map(function(Ce){return Ce+": "+Te.getPropertyValue(Ce)+(Te.getPropertyPriority(Ce)?" !important":"")}).join("; ")+";"})();return document.createTextNode(ce+`{${ze}}`)}()),he.appendChild(se)}})(J)})}).then(function(){fe instanceof HTMLTextAreaElement&&(he.innerHTML=fe.value),fe instanceof HTMLInputElement&&he.setAttribute("value",fe.value)}).then(function(){he instanceof SVGElement&&(he.setAttribute("xmlns","http://www.w3.org/2000/svg"),he instanceof SVGRectElement&&["width","height"].forEach(function(J){const De=he.getAttribute(J);De&&he.style.setProperty(J,De)}))}).then(function(){return he}):he}(we,me,H)}):Promise.resolve()}(Q,V.filter,!0,!V.raster)}).then(Z).then(B).then(function(Q){V.bgcolor&&(Q.style.backgroundColor=V.bgcolor),V.width&&(Q.style.width=V.width+"px"),V.height&&(Q.style.height=V.height+"px"),V.style&&Object.keys(V.style).forEach(function(we){Q.style[we]=V.style[we]});let _e=null;return typeof V.onclone=="function"&&(_e=V.onclone(Q)),Promise.resolve(_e).then(function(){return Q})}).then(function(Q){return Q=Q,_e=V.width||v.width(U),we=V.height||v.height(U),Promise.resolve(Q).then(function(Qe){return Qe.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(Qe)}).then(v.escapeXhtml).then(function(Qe){return`<foreignObject x="0" y="0" width="100%" height="100%">${Qe}</foreignObject>`}).then(function(Qe){return`<svg xmlns="http://www.w3.org/2000/svg" width="${_e}" height="${we}">${Qe}</svg>`}).then(function(Qe){return"data:image/svg+xml;charset=utf-8,"+Qe});var _e,we}).then(function(Q){return te.impl.urlCache=[],Q})}function $(U,V){return N(U,V).then(v.makeImage).then(v.delay(0)).then(function(re){var Q=typeof V.scale!="number"?1:V.scale;const _e=function(Qe,ae){const H=document.createElement("canvas");if(H.width=(V.width||v.width(Qe))*ae,H.height=(V.height||v.height(Qe))*ae,V.bgcolor){const K=H.getContext("2d");K.fillStyle=V.bgcolor,K.fillRect(0,0,H.width,H.height)}return H}(U,Q),we=_e.getContext("2d");return we.mozImageSmoothingEnabled=!1,we.msImageSmoothingEnabled=!1,we.imageSmoothingEnabled=!1,re&&(we.scale(Q,Q),we.drawImage(re,0,0)),R&&(document.body.removeChild(R),R=null,I&&clearTimeout(I),I=setTimeout(()=>{I=null,z={}},2e4)),_e})}function Z(U){return k.resolveAll().then(function(V){const re=document.createElement("style");return U.appendChild(re),re.appendChild(document.createTextNode(V)),U})}function B(U){return D.inlineAll(U).then(function(){return U})}let I=null,R=null,z={}})(r)}),o=i(function(c,d){(function(){function p(k,A,D){var j=new XMLHttpRequest;j.open("GET",k),j.responseType="blob",j.onload=function(){E(j.response,A,D)},j.onerror=function(){console.error("could not download file")},j.send()}function v(k){var A=new XMLHttpRequest;A.open("HEAD",k,!1);try{A.send()}catch{}return 200<=A.status&&299>=A.status}function g(k){try{k.dispatchEvent(new MouseEvent("click"))}catch{var A=document.createEvent("MouseEvents");A.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),k.dispatchEvent(A)}}var x=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,E=x.saveAs||(typeof window!="object"||window!==x?function(){}:"download"in HTMLAnchorElement.prototype?function(k,A,D){var j=x.URL||x.webkitURL,Y=document.createElement("a");A=A||k.name||"download",Y.download=A,Y.rel="noopener",typeof k=="string"?(Y.href=k,Y.origin===location.origin?g(Y):v(Y.href)?p(k,A,D):g(Y,Y.target="_blank")):(Y.href=j.createObjectURL(k),setTimeout(function(){j.revokeObjectURL(Y.href)},4e4),setTimeout(function(){g(Y)},0))}:"msSaveOrOpenBlob"in navigator?function(k,A,D){if(A=A||k.name||"download",typeof k!="string")navigator.msSaveOrOpenBlob(function(Y,te){return te===void 0?te={autoBom:!1}:typeof te!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),te={autoBom:!te}),te.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Y.type)?new Blob(["\uFEFF",Y],{type:Y.type}):Y}(k,D),A);else if(v(k))p(k,A,D);else{var j=document.createElement("a");j.href=k,j.target="_blank",setTimeout(function(){g(j)})}}:function(k,A,D,j){if((j=j||open("","_blank"))&&(j.document.title=j.document.body.innerText="downloading..."),typeof k=="string")return p(k,A,D);var Y=k.type==="application/octet-stream",te=/constructor/i.test(x.HTMLElement)||x.safari,ge=/CriOS\/[\d]+/.test(navigator.userAgent);if((ge||Y&&te)&&typeof FileReader=="object"){var pe=new FileReader;pe.onloadend=function(){var Z=pe.result;Z=ge?Z:Z.replace(/^data:[^;]*;/,"data:attachment/file;"),j?j.location.href=Z:location=Z,j=null},pe.readAsDataURL(k)}else{var N=x.URL||x.webkitURL,$=N.createObjectURL(k);j?j.location=$:location.href=$,j=null,setTimeout(function(){N.revokeObjectURL($)},4e4)}});x.saveAs=E.saveAs=E,c.exports=E})()}),a=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(c){var d=c.node,p=c.error;return console.warn("Map node is very big "+d.scrollWidth+"x"+d.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(p)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var c=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v={};for(var g in this.options)p.hasOwnProperty(g)?v[g]=p[g]:v[g]=this.options[g];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return c._getPixelData(v)}).then(function(x){return c._setElementsVisible(!0),c._toCanvas(x,v)}).then(function(x){return d==="image"?c._canvasToImage(x,v):d==="canvas"?x:c._canvasToBlob(x,v)}).then(function(x){return c._screenState.status=1,c._map.fire("simpleMapScreenshoter.done"),x}).catch(function(x){return c._setElementsVisible(!0),c._screenState.status=1,c._map.fire("simpleMapScreenshoter.error",{e:x}),Promise.reject(x)}),this._screenState.promise)},_setElementsVisible:function(){var c=this,d=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(p){var v=c._map._container.querySelectorAll(p),g=!0,x=!1,E=void 0;try{for(var k,A=v[Symbol.iterator]();!(g=(k=A.next()).done);g=!0)k.value.style.opacity=d===!1?0:1}catch(D){x=!0,E=D}finally{try{!g&&A.return&&A.return()}finally{if(x)throw E}}})},_canvasToImage:function(c,d){var p=d.mimeType,v=c.toDataURL(p);return v.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(v)},_canvasToBlob:function(c,d){var p=d.mimeType;return new Promise(function(v,g){c.toBlob(function(x){v(x)},p)})},_toCanvas:function(c,d){var p=d.captionOffset,v=d.caption,g=d.captionFontSize,x=d.captionFont,E=d.captionColor,k=d.captionBgColor,A=this._node,D=A.screenHeight,j=A.screenWidth,Y=document.createElement("canvas");Y.width=j,Y.height=D;for(var te=Y.getContext("2d"),ge=te.createImageData(j,D),pe=0;pe<c.length;++pe)ge.data[pe]=c[pe];te.putImageData(ge,0,0),ge=null;var N=document.createElement("canvas"),$=N.getContext("2d"),Z=0,B=0,I=D,R=j;if(this.options.cropImageByInnerWH===!0){for(var z=[],U=0,V=0;V<D;++V){U=0;for(var re=0;re<j;++re)c[4*V*j+4*re+4]===0&&U++;U===j&&z.push(V)}var Q=this._getMinAndMaxOnValuesBreak(z);Z=Q.min;for(var _e=j,we=Q.max,Qe=[],ae=0,H=B;H<_e;++H){ae=0;for(var K=0;K<D;++K)c[4*K*j+4*H+4]===0&&ae++;ae===D&&Qe.push(H)}var me=this._getMinAndMaxOnValuesBreak(Qe);B=me.min,_e=me.max,(B===0&&_e===0||_e===null)&&(_e=j),(Z===0&&we===0||we===null)&&(we=D),this.options.debugMode===!0&&(console.log("emptyYLine",z),console.log("minMaxY",Q),console.log("emptyXLine",Qe),console.log("minMaxX",me),console.log("debugX",{}),console.log("debugY",{})),Z===0&&we===D&&B===0&&_e===j||(Z+=this.options.onCropBorderSize,we-=this.options.onCropBorderSize,B+=this.options.onCropBorderSize,_e-=this.options.onCropBorderSize),I=we-Z,R=_e-B,N.width=R,N.height=I}else N.width=R,N.height=I;var fe=null;return v&&(fe=typeof v=="function"?v.call(this):v),fe!==null&&(N.height=N.height+(p+g+p),$.beginPath(),$.rect(0,0,N.width,N.height),$.fillStyle=k,$.fill(),$.save()),$.drawImage(Y,B,Z,R,I,0,0,R,I),fe!==null&&($.font=g+"px "+x,$.fillStyle=E,$.fillText(fe,p,I+p+g)),Promise.resolve(N)},_getMinAndMaxOnValuesBreak:function(c){for(var d=0,p=0,v=!1,g=1;g<c.length;g++){if(c[g]-1!==c[g-1]){p=c[g],v=!0;break}d=c[g]}return v===!1&&c[0]>1?(d=0,p=c[0]):v===!1&&(d=c[c.length-1]||0,p=null),{min:d,max:p}},_getPixelData:function(c){var d=this,p=c.domtoimageOptions,v=p===void 0?{}:p;return this._getPixelDataOfNormalMap(v).catch(function(g){return console.warn("May be map size very big on that zoom level, we have error:",g.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),d._getPixelDataOfBigMap(v)})},_getPixelDataOfNormalMap:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=this._map.getContainer();return this._node={node:d,screenHeight:d.scrollHeight,screenWidth:d.scrollWidth},s.toPixelData(d,c)},_getPixelDataOfBigMap:function(){var c=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=this._map.getContainer(),v=this._map.getPane("mapPane");v.style.width=2*p.clientWidth+"px",v.style.height=2*p.clientHeight+"px",v.style.overflow="hidden";var g=function(){v.style.width="initial",v.style.height="initial",v.style.overflow="initial"};return this._node={node:p,screenHeight:p.scrollHeight,screenWidth:p.scrollWidth},s.toPixelData(p,d).then(function(x){return g(),x}).catch(function(x){return g(),p.scrollHeight>=4e3||p.scrollWidth>=4e3?c.options.onPixelDataFail({plugin:c,node:p,mapPane:v,error:x,domtoimageOptions:d}):Promise.reject(x)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var c=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,d=document.head||document.getElementsByTagName("head")[0],p=document.createElement("style");p.appendChild(document.createTextNode(c)),d.appendChild(p)},_onScreenBtn:function(){var c=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(d){var p=typeof c.options.screenName=="function"?c.options.screenName.call(c):c.options.screenName;o.saveAs(d,p+".png")}).catch(function(d){c._map.fire("simpleMapScreenshoter.error",{e:d})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var c=this;return new Promise(function(d){var p=setInterval(function(){c._interaction||(d(),clearInterval(p))},100)})}}),l=(L.Control.SimpleMapScreenshoter=a,L.simpleMapScreenshoter=function(c){return new L.Control.SimpleMapScreenshoter(c)},a);n.default=l,n.SimpleMapScreenshoter=a,Object.defineProperty(n,"__esModule",{value:!0})})})(t5,t5.exports);var kl=63710088e-1,EE={centimeters:kl*100,centimetres:kl*100,degrees:360/(2*Math.PI),feet:kl*3.28084,inches:kl*39.37,kilometers:kl/1e3,kilometres:kl/1e3,meters:kl,metres:kl,miles:kl/1609.344,millimeters:kl*1e3,millimetres:kl*1e3,nauticalmiles:kl/1852,radians:1,yards:kl*1.0936};function Ap(t,e,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function Uv(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n5(t[0])||!n5(t[1]))throw new Error("coordinates must contain numbers");return Ap({type:"Point",coordinates:t},e,n)}function Gu(t,e,n={}){for(const i of t){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return Ap({type:"Polygon",coordinates:t},e,n)}function qu(t,e,n={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return Ap({type:"LineString",coordinates:t},e,n)}function Rj(t,e={}){const n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function Fj(t,e,n={}){return Ap({type:"MultiPolygon",coordinates:t},e,n)}function jj(t,e="kilometers"){const n=EE[e];if(!n)throw new Error(e+" units is invalid");return t*n}function zj(t,e="kilometers"){const n=EE[e];if(!n)throw new Error(e+" units is invalid");return t/n}function vb(t){return t%(2*Math.PI)*180/Math.PI}function _c(t){return t%360*Math.PI/180}function n5(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function r5(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function $j(t){return t.type==="Feature"?t.geometry:t}function PE(t,e,n={}){if(n.final===!0)return Vj(t,e);const r=r5(t),i=r5(e),s=_c(r[0]),o=_c(i[0]),a=_c(r[1]),l=_c(i[1]),c=Math.sin(o-s)*Math.cos(l),d=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(o-s);return vb(Math.atan2(c,d))}function Vj(t,e){let n=PE(e,t);return n=(n+180)%360,n}function Uj(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function z_(t,e,n,r={}){const i=Uj(t),s=_c(i[0]),o=_c(i[1]),a=_c(n),l=zj(e,r.units),c=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(a)),d=s+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(c)),p=vb(d),v=vb(c);return Uv([p,v],r.properties)}var i5=z_;function s5(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function $_(t,e,n={}){var r=s5(t),i=s5(e),s=_c(i[1]-r[1]),o=_c(i[0]-r[0]),a=_c(r[1]),l=_c(i[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return jj(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}var J1=$_;function Hj(t,e,n={}){const i=$j(t).coordinates;let s=0;for(let o=0;o<i.length&&!(e>=s&&o===i.length-1);o++)if(s>=e){const a=e-s;if(a){const l=PE(i[o],i[o-1])-180;return z_(i[o],a,l,n)}else return Uv(i[o])}else s+=$_(i[o],i[o+1],n);return Uv(i[i.length-1])}var yb=Hj;function Wj(t,e){var n,r,i,s,o,a,l,c,d,p,v=0,g=t.type==="FeatureCollection",x=t.type==="Feature",E=g?t.features.length:1;for(n=0;n<E;n++){for(a=g?t.features[n].geometry:x?t.geometry:t,c=g?t.features[n].properties:x?t.properties:{},d=g?t.features[n].bbox:x?t.bbox:void 0,p=g?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,d,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,d,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,d,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function Gj(t,e,n){var r=n;return Wj(t,function(i,s,o,a,l){s===0&&n===void 0?r=i:r=e(r,i,s,o,a,l)}),r}function ME(t){return Gj(t,(e,n)=>e+qj(n),0)}function qj(t){let e=0,n;switch(t.type){case"Polygon":return o5(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=o5(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function o5(t){let e=0;if(t&&t.length>0){e+=Math.abs(a5(t[0]));for(let n=1;n<t.length;n++)e-=Math.abs(a5(t[n]))}return e}var Yj=kl*kl/2,Q1=Math.PI/180;function a5(t){const e=t.length-1;if(e<=2)return 0;let n=0,r=0;for(;r<e;){const i=t[r],s=t[r+1===e?0:r+1],o=t[r+2>=e?(r+2)%e:r+2],a=i[0]*Q1,l=s[1]*Q1,c=o[0]*Q1;n+=(c-a)*Math.sin(l),r++}return n*Yj}var Fc=ME;function kE(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,d=0,p=0,v,g=t.type,x=g==="FeatureCollection",E=g==="Feature",k=x?t.features.length:1,A=0;A<k;A++){c=x?t.features[A].geometry:E?t.geometry:t,v=c?c.type==="GeometryCollection":!1,a=v?c.geometries.length:1;for(var D=0;D<a;D++){var j=0,Y=0;if(o=v?c.geometries[D]:c,o!==null){l=o.coordinates;var te=o.type;switch(d=te==="Polygon"||te==="MultiPolygon"?1:0,te){case null:break;case"Point":if(e(l,p,A,j,Y)===!1)return!1;p++,j++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,A,j,Y)===!1)return!1;p++,te==="MultiPoint"&&j++}te==="LineString"&&j++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-d;i++){if(e(l[r][i],p,A,j,Y)===!1)return!1;p++}te==="MultiLineString"&&j++,te==="Polygon"&&Y++}te==="Polygon"&&j++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(Y=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-d;s++){if(e(l[r][i][s],p,A,j,Y)===!1)return!1;p++}Y++}j++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(kE(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Zj(t,e={}){let n=0,r=0,i=0;return kE(t,function(s){n+=s[0],r+=s[1],i++}),Uv([n/i,r/i],e.properties)}var Wg=Zj;function Kj(t,e,n={}){const r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&t.type==="Feature"&&t.properties?t.properties:{},s=[];for(let o=0;o<r;o++)s.push(z_(t,e,o*-360/r,n).geometry.coordinates);return s.push(s[0]),Gu([s],i)}var Xj=Kj,Jj=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,e2=Math.ceil,Hu=Math.floor,Xl="[BigNumber Error] ",l5=Xl+"Number primitive has more than 15 significant digits: ",hc=1e14,ii=14,u5=9007199254740991,t2=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Xh=1e7,bu=1e9;function AE(t){var e,n,r,i=D.prototype={constructor:D,toString:null,valueOf:null},s=new D(1),o=20,a=4,l=-7,c=21,d=-1e7,p=1e7,v=!1,g=1,x=0,E={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},k="0123456789abcdefghijklmnopqrstuvwxyz",A=!0;function D(N,$){var Z,B,I,R,z,U,V,re,Q=this;if(!(Q instanceof D))return new D(N,$);if($==null){if(N&&N._isBigNumber===!0){Q.s=N.s,!N.c||N.e>p?Q.c=Q.e=null:N.e<d?Q.c=[Q.e=0]:(Q.e=N.e,Q.c=N.c.slice());return}if((U=typeof N=="number")&&N*0==0){if(Q.s=1/N<0?(N=-N,-1):1,N===~~N){for(R=0,z=N;z>=10;z/=10,R++);R>p?Q.c=Q.e=null:(Q.e=R,Q.c=[N]);return}re=String(N)}else{if(!Jj.test(re=String(N)))return r(Q,re,U);Q.s=re.charCodeAt(0)==45?(re=re.slice(1),-1):1}(R=re.indexOf("."))>-1&&(re=re.replace(".","")),(z=re.search(/e/i))>0?(R<0&&(R=z),R+=+re.slice(z+1),re=re.substring(0,z)):R<0&&(R=re.length)}else{if(ho($,2,k.length,"Base"),$==10&&A)return Q=new D(N),ge(Q,o+Q.e+1,a);if(re=String(N),U=typeof N=="number"){if(N*0!=0)return r(Q,re,U,$);if(Q.s=1/N<0?(re=re.slice(1),-1):1,D.DEBUG&&re.replace(/^0\.0*|\./,"").length>15)throw Error(l5+N)}else Q.s=re.charCodeAt(0)===45?(re=re.slice(1),-1):1;for(Z=k.slice(0,$),R=z=0,V=re.length;z<V;z++)if(Z.indexOf(B=re.charAt(z))<0){if(B=="."){if(z>R){R=V;continue}}else if(!I&&(re==re.toUpperCase()&&(re=re.toLowerCase())||re==re.toLowerCase()&&(re=re.toUpperCase()))){I=!0,z=-1,R=0;continue}return r(Q,String(N),U,$)}U=!1,re=n(re,$,10,Q.s),(R=re.indexOf("."))>-1?re=re.replace(".",""):R=re.length}for(z=0;re.charCodeAt(z)===48;z++);for(V=re.length;re.charCodeAt(--V)===48;);if(re=re.slice(z,++V)){if(V-=z,U&&D.DEBUG&&V>15&&(N>u5||N!==Hu(N)))throw Error(l5+Q.s*N);if((R=R-z-1)>p)Q.c=Q.e=null;else if(R<d)Q.c=[Q.e=0];else{if(Q.e=R,Q.c=[],z=(R+1)%ii,R<0&&(z+=ii),z<V){for(z&&Q.c.push(+re.slice(0,z)),V-=ii;z<V;)Q.c.push(+re.slice(z,z+=ii));z=ii-(re=re.slice(z)).length}else z-=V;for(;z--;re+="0");Q.c.push(+re)}}else Q.c=[Q.e=0]}D.clone=AE,D.ROUND_UP=0,D.ROUND_DOWN=1,D.ROUND_CEIL=2,D.ROUND_FLOOR=3,D.ROUND_HALF_UP=4,D.ROUND_HALF_DOWN=5,D.ROUND_HALF_EVEN=6,D.ROUND_HALF_CEIL=7,D.ROUND_HALF_FLOOR=8,D.EUCLID=9,D.config=D.set=function(N){var $,Z;if(N!=null)if(typeof N=="object"){if(N.hasOwnProperty($="DECIMAL_PLACES")&&(Z=N[$],ho(Z,0,bu,$),o=Z),N.hasOwnProperty($="ROUNDING_MODE")&&(Z=N[$],ho(Z,0,8,$),a=Z),N.hasOwnProperty($="EXPONENTIAL_AT")&&(Z=N[$],Z&&Z.pop?(ho(Z[0],-1e9,0,$),ho(Z[1],0,bu,$),l=Z[0],c=Z[1]):(ho(Z,-1e9,bu,$),l=-(c=Z<0?-Z:Z))),N.hasOwnProperty($="RANGE"))if(Z=N[$],Z&&Z.pop)ho(Z[0],-1e9,-1,$),ho(Z[1],1,bu,$),d=Z[0],p=Z[1];else if(ho(Z,-1e9,bu,$),Z)d=-(p=Z<0?-Z:Z);else throw Error(Xl+$+" cannot be zero: "+Z);if(N.hasOwnProperty($="CRYPTO"))if(Z=N[$],Z===!!Z)if(Z)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))v=Z;else throw v=!Z,Error(Xl+"crypto unavailable");else v=Z;else throw Error(Xl+$+" not true or false: "+Z);if(N.hasOwnProperty($="MODULO_MODE")&&(Z=N[$],ho(Z,0,9,$),g=Z),N.hasOwnProperty($="POW_PRECISION")&&(Z=N[$],ho(Z,0,bu,$),x=Z),N.hasOwnProperty($="FORMAT"))if(Z=N[$],typeof Z=="object")E=Z;else throw Error(Xl+$+" not an object: "+Z);if(N.hasOwnProperty($="ALPHABET"))if(Z=N[$],typeof Z=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Z))A=Z.slice(0,10)=="0123456789",k=Z;else throw Error(Xl+$+" invalid: "+Z)}else throw Error(Xl+"Object expected: "+N);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[l,c],RANGE:[d,p],CRYPTO:v,MODULO_MODE:g,POW_PRECISION:x,FORMAT:E,ALPHABET:k}},D.isBigNumber=function(N){if(!N||N._isBigNumber!==!0)return!1;if(!D.DEBUG)return!0;var $,Z,B=N.c,I=N.e,R=N.s;e:if({}.toString.call(B)=="[object Array]"){if((R===1||R===-1)&&I>=-1e9&&I<=bu&&I===Hu(I)){if(B[0]===0){if(I===0&&B.length===1)return!0;break e}if($=(I+1)%ii,$<1&&($+=ii),String(B[0]).length==$){for($=0;$<B.length;$++)if(Z=B[$],Z<0||Z>=hc||Z!==Hu(Z))break e;if(Z!==0)return!0}}}else if(B===null&&I===null&&(R===null||R===1||R===-1))return!0;throw Error(Xl+"Invalid BigNumber: "+N)},D.maximum=D.max=function(){return Y(arguments,-1)},D.minimum=D.min=function(){return Y(arguments,1)},D.random=function(){var N=9007199254740992,$=Math.random()*N&2097151?function(){return Hu(Math.random()*N)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Z){var B,I,R,z,U,V=0,re=[],Q=new D(s);if(Z==null?Z=o:ho(Z,0,bu),z=e2(Z/ii),v)if(crypto.getRandomValues){for(B=crypto.getRandomValues(new Uint32Array(z*=2));V<z;)U=B[V]*131072+(B[V+1]>>>11),U>=9e15?(I=crypto.getRandomValues(new Uint32Array(2)),B[V]=I[0],B[V+1]=I[1]):(re.push(U%1e14),V+=2);V=z/2}else if(crypto.randomBytes){for(B=crypto.randomBytes(z*=7);V<z;)U=(B[V]&31)*281474976710656+B[V+1]*1099511627776+B[V+2]*4294967296+B[V+3]*16777216+(B[V+4]<<16)+(B[V+5]<<8)+B[V+6],U>=9e15?crypto.randomBytes(7).copy(B,V):(re.push(U%1e14),V+=7);V=z/7}else throw v=!1,Error(Xl+"crypto unavailable");if(!v)for(;V<z;)U=$(),U<9e15&&(re[V++]=U%1e14);for(z=re[--V],Z%=ii,z&&Z&&(U=t2[ii-Z],re[V]=Hu(z/U)*U);re[V]===0;re.pop(),V--);if(V<0)re=[R=0];else{for(R=-1;re[0]===0;re.splice(0,1),R-=ii);for(V=1,U=re[0];U>=10;U/=10,V++);V<ii&&(R-=ii-V)}return Q.e=R,Q.c=re,Q}}(),D.sum=function(){for(var N=1,$=arguments,Z=new D($[0]);N<$.length;)Z=Z.plus($[N++]);return Z},n=function(){var N="0123456789";function $(Z,B,I,R){for(var z,U=[0],V,re=0,Q=Z.length;re<Q;){for(V=U.length;V--;U[V]*=B);for(U[0]+=R.indexOf(Z.charAt(re++)),z=0;z<U.length;z++)U[z]>I-1&&(U[z+1]==null&&(U[z+1]=0),U[z+1]+=U[z]/I|0,U[z]%=I)}return U.reverse()}return function(Z,B,I,R,z){var U,V,re,Q,_e,we,Qe,ae,H=Z.indexOf("."),K=o,me=a;for(H>=0&&(Q=x,x=0,Z=Z.replace(".",""),ae=new D(B),we=ae.pow(Z.length-H),x=Q,ae.c=$(_h($u(we.c),we.e,"0"),10,I,N),ae.e=ae.c.length),Qe=$(Z,B,I,z?(U=k,N):(U=N,k)),re=Q=Qe.length;Qe[--Q]==0;Qe.pop());if(!Qe[0])return U.charAt(0);if(H<0?--re:(we.c=Qe,we.e=re,we.s=R,we=e(we,ae,K,me,I),Qe=we.c,_e=we.r,re=we.e),V=re+K+1,H=Qe[V],Q=I/2,_e=_e||V<0||Qe[V+1]!=null,_e=me<4?(H!=null||_e)&&(me==0||me==(we.s<0?3:2)):H>Q||H==Q&&(me==4||_e||me==6&&Qe[V-1]&1||me==(we.s<0?8:7)),V<1||!Qe[0])Z=_e?_h(U.charAt(1),-K,U.charAt(0)):U.charAt(0);else{if(Qe.length=V,_e)for(--I;++Qe[--V]>I;)Qe[V]=0,V||(++re,Qe=[1].concat(Qe));for(Q=Qe.length;!Qe[--Q];);for(H=0,Z="";H<=Q;Z+=U.charAt(Qe[H++]));Z=_h(Z,re,U.charAt(0))}return Z}}(),e=function(){function N(B,I,R){var z,U,V,re,Q=0,_e=B.length,we=I%Xh,Qe=I/Xh|0;for(B=B.slice();_e--;)V=B[_e]%Xh,re=B[_e]/Xh|0,z=Qe*V+re*we,U=we*V+z%Xh*Xh+Q,Q=(U/R|0)+(z/Xh|0)+Qe*re,B[_e]=U%R;return Q&&(B=[Q].concat(B)),B}function $(B,I,R,z){var U,V;if(R!=z)V=R>z?1:-1;else for(U=V=0;U<R;U++)if(B[U]!=I[U]){V=B[U]>I[U]?1:-1;break}return V}function Z(B,I,R,z){for(var U=0;R--;)B[R]-=U,U=B[R]<I[R]?1:0,B[R]=U*z+B[R]-I[R];for(;!B[0]&&B.length>1;B.splice(0,1));}return function(B,I,R,z,U){var V,re,Q,_e,we,Qe,ae,H,K,me,fe,he,X,J,De,Te,Je,de=B.s==I.s?1:-1,ee=B.c,se=I.c;if(!ee||!ee[0]||!se||!se[0])return new D(!B.s||!I.s||(ee?se&&ee[0]==se[0]:!se)?NaN:ee&&ee[0]==0||!se?de*0:de/0);for(H=new D(de),K=H.c=[],re=B.e-I.e,de=R+re+1,U||(U=hc,re=Wu(B.e/ii)-Wu(I.e/ii),de=de/ii|0),Q=0;se[Q]==(ee[Q]||0);Q++);if(se[Q]>(ee[Q]||0)&&re--,de<0)K.push(1),_e=!0;else{for(J=ee.length,Te=se.length,Q=0,de+=2,we=Hu(U/(se[0]+1)),we>1&&(se=N(se,we,U),ee=N(ee,we,U),Te=se.length,J=ee.length),X=Te,me=ee.slice(0,Te),fe=me.length;fe<Te;me[fe++]=0);Je=se.slice(),Je=[0].concat(Je),De=se[0],se[1]>=U/2&&De++;do{if(we=0,V=$(se,me,Te,fe),V<0){if(he=me[0],Te!=fe&&(he=he*U+(me[1]||0)),we=Hu(he/De),we>1)for(we>=U&&(we=U-1),Qe=N(se,we,U),ae=Qe.length,fe=me.length;$(Qe,me,ae,fe)==1;)we--,Z(Qe,Te<ae?Je:se,ae,U),ae=Qe.length,V=1;else we==0&&(V=we=1),Qe=se.slice(),ae=Qe.length;if(ae<fe&&(Qe=[0].concat(Qe)),Z(me,Qe,fe,U),fe=me.length,V==-1)for(;$(se,me,Te,fe)<1;)we++,Z(me,Te<fe?Je:se,fe,U),fe=me.length}else V===0&&(we++,me=[0]);K[Q++]=we,me[0]?me[fe++]=ee[X]||0:(me=[ee[X]],fe=1)}while((X++<J||me[0]!=null)&&de--);_e=me[0]!=null,K[0]||K.splice(0,1)}if(U==hc){for(Q=1,de=K[0];de>=10;de/=10,Q++);ge(H,R+(H.e=Q+re*ii-1)+1,z,_e)}else H.e=re,H.r=+_e;return H}}();function j(N,$,Z,B){var I,R,z,U,V;if(Z==null?Z=a:ho(Z,0,8),!N.c)return N.toString();if(I=N.c[0],z=N.e,$==null)V=$u(N.c),V=B==1||B==2&&(z<=l||z>=c)?x0(V,z):_h(V,z,"0");else if(N=ge(new D(N),$,Z),R=N.e,V=$u(N.c),U=V.length,B==1||B==2&&($<=R||R<=l)){for(;U<$;V+="0",U++);V=x0(V,R)}else if($-=z,V=_h(V,R,"0"),R+1>U){if(--$>0)for(V+=".";$--;V+="0");}else if($+=R-U,$>0)for(R+1==U&&(V+=".");$--;V+="0");return N.s<0&&I?"-"+V:V}function Y(N,$){for(var Z,B,I=1,R=new D(N[0]);I<N.length;I++)B=new D(N[I]),(!B.s||(Z=Wd(R,B))===$||Z===0&&R.s===$)&&(R=B);return R}function te(N,$,Z){for(var B=1,I=$.length;!$[--I];$.pop());for(I=$[0];I>=10;I/=10,B++);return(Z=B+Z*ii-1)>p?N.c=N.e=null:Z<d?N.c=[N.e=0]:(N.e=Z,N.c=$),N}r=function(){var N=/^(-?)0([xbo])(?=\w[\w.]*$)/i,$=/^([^.]+)\.$/,Z=/^\.([^.]+)$/,B=/^-?(Infinity|NaN)$/,I=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(R,z,U,V){var re,Q=U?z:z.replace(I,"");if(B.test(Q))R.s=isNaN(Q)?null:Q<0?-1:1;else{if(!U&&(Q=Q.replace(N,function(_e,we,Qe){return re=(Qe=Qe.toLowerCase())=="x"?16:Qe=="b"?2:8,!V||V==re?we:_e}),V&&(re=V,Q=Q.replace($,"$1").replace(Z,"0.$1")),z!=Q))return new D(Q,re);if(D.DEBUG)throw Error(Xl+"Not a"+(V?" base "+V:"")+" number: "+z);R.s=null}R.c=R.e=null}}();function ge(N,$,Z,B){var I,R,z,U,V,re,Q,_e=N.c,we=t2;if(_e){e:{for(I=1,U=_e[0];U>=10;U/=10,I++);if(R=$-I,R<0)R+=ii,z=$,V=_e[re=0],Q=Hu(V/we[I-z-1]%10);else if(re=e2((R+1)/ii),re>=_e.length)if(B){for(;_e.length<=re;_e.push(0));V=Q=0,I=1,R%=ii,z=R-ii+1}else break e;else{for(V=U=_e[re],I=1;U>=10;U/=10,I++);R%=ii,z=R-ii+I,Q=z<0?0:Hu(V/we[I-z-1]%10)}if(B=B||$<0||_e[re+1]!=null||(z<0?V:V%we[I-z-1]),B=Z<4?(Q||B)&&(Z==0||Z==(N.s<0?3:2)):Q>5||Q==5&&(Z==4||B||Z==6&&(R>0?z>0?V/we[I-z]:0:_e[re-1])%10&1||Z==(N.s<0?8:7)),$<1||!_e[0])return _e.length=0,B?($-=N.e+1,_e[0]=we[(ii-$%ii)%ii],N.e=-$||0):_e[0]=N.e=0,N;if(R==0?(_e.length=re,U=1,re--):(_e.length=re+1,U=we[ii-R],_e[re]=z>0?Hu(V/we[I-z]%we[z])*U:0),B)for(;;)if(re==0){for(R=1,z=_e[0];z>=10;z/=10,R++);for(z=_e[0]+=U,U=1;z>=10;z/=10,U++);R!=U&&(N.e++,_e[0]==hc&&(_e[0]=1));break}else{if(_e[re]+=U,_e[re]!=hc)break;_e[re--]=0,U=1}for(R=_e.length;_e[--R]===0;_e.pop());}N.e>p?N.c=N.e=null:N.e<d&&(N.c=[N.e=0])}return N}function pe(N){var $,Z=N.e;return Z===null?N.toString():($=$u(N.c),$=Z<=l||Z>=c?x0($,Z):_h($,Z,"0"),N.s<0?"-"+$:$)}return i.absoluteValue=i.abs=function(){var N=new D(this);return N.s<0&&(N.s=1),N},i.comparedTo=function(N,$){return Wd(this,new D(N,$))},i.decimalPlaces=i.dp=function(N,$){var Z,B,I,R=this;if(N!=null)return ho(N,0,bu),$==null?$=a:ho($,0,8),ge(new D(R),N+R.e+1,$);if(!(Z=R.c))return null;if(B=((I=Z.length-1)-Wu(this.e/ii))*ii,I=Z[I])for(;I%10==0;I/=10,B--);return B<0&&(B=0),B},i.dividedBy=i.div=function(N,$){return e(this,new D(N,$),o,a)},i.dividedToIntegerBy=i.idiv=function(N,$){return e(this,new D(N,$),0,1)},i.exponentiatedBy=i.pow=function(N,$){var Z,B,I,R,z,U,V,re,Q,_e=this;if(N=new D(N),N.c&&!N.isInteger())throw Error(Xl+"Exponent not an integer: "+pe(N));if($!=null&&($=new D($)),U=N.e>14,!_e.c||!_e.c[0]||_e.c[0]==1&&!_e.e&&_e.c.length==1||!N.c||!N.c[0])return Q=new D(Math.pow(+pe(_e),U?N.s*(2-w0(N)):+pe(N))),$?Q.mod($):Q;if(V=N.s<0,$){if($.c?!$.c[0]:!$.s)return new D(NaN);B=!V&&_e.isInteger()&&$.isInteger(),B&&(_e=_e.mod($))}else{if(N.e>9&&(_e.e>0||_e.e<-1||(_e.e==0?_e.c[0]>1||U&&_e.c[1]>=24e7:_e.c[0]<8e13||U&&_e.c[0]<=9999975e7)))return R=_e.s<0&&w0(N)?-0:0,_e.e>-1&&(R=1/R),new D(V?1/R:R);x&&(R=e2(x/ii+2))}for(U?(Z=new D(.5),V&&(N.s=1),re=w0(N)):(I=Math.abs(+pe(N)),re=I%2),Q=new D(s);;){if(re){if(Q=Q.times(_e),!Q.c)break;R?Q.c.length>R&&(Q.c.length=R):B&&(Q=Q.mod($))}if(I){if(I=Hu(I/2),I===0)break;re=I%2}else if(N=N.times(Z),ge(N,N.e+1,1),N.e>14)re=w0(N);else{if(I=+pe(N),I===0)break;re=I%2}_e=_e.times(_e),R?_e.c&&_e.c.length>R&&(_e.c.length=R):B&&(_e=_e.mod($))}return B?Q:(V&&(Q=s.div(Q)),$?Q.mod($):R?ge(Q,x,a,z):Q)},i.integerValue=function(N){var $=new D(this);return N==null?N=a:ho(N,0,8),ge($,$.e+1,N)},i.isEqualTo=i.eq=function(N,$){return Wd(this,new D(N,$))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(N,$){return Wd(this,new D(N,$))>0},i.isGreaterThanOrEqualTo=i.gte=function(N,$){return($=Wd(this,new D(N,$)))===1||$===0},i.isInteger=function(){return!!this.c&&Wu(this.e/ii)>this.c.length-2},i.isLessThan=i.lt=function(N,$){return Wd(this,new D(N,$))<0},i.isLessThanOrEqualTo=i.lte=function(N,$){return($=Wd(this,new D(N,$)))===-1||$===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(N,$){var Z,B,I,R,z=this,U=z.s;if(N=new D(N,$),$=N.s,!U||!$)return new D(NaN);if(U!=$)return N.s=-$,z.plus(N);var V=z.e/ii,re=N.e/ii,Q=z.c,_e=N.c;if(!V||!re){if(!Q||!_e)return Q?(N.s=-$,N):new D(_e?z:NaN);if(!Q[0]||!_e[0])return _e[0]?(N.s=-$,N):new D(Q[0]?z:a==3?-0:0)}if(V=Wu(V),re=Wu(re),Q=Q.slice(),U=V-re){for((R=U<0)?(U=-U,I=Q):(re=V,I=_e),I.reverse(),$=U;$--;I.push(0));I.reverse()}else for(B=(R=(U=Q.length)<($=_e.length))?U:$,U=$=0;$<B;$++)if(Q[$]!=_e[$]){R=Q[$]<_e[$];break}if(R&&(I=Q,Q=_e,_e=I,N.s=-N.s),$=(B=_e.length)-(Z=Q.length),$>0)for(;$--;Q[Z++]=0);for($=hc-1;B>U;){if(Q[--B]<_e[B]){for(Z=B;Z&&!Q[--Z];Q[Z]=$);--Q[Z],Q[B]+=hc}Q[B]-=_e[B]}for(;Q[0]==0;Q.splice(0,1),--re);return Q[0]?te(N,Q,re):(N.s=a==3?-1:1,N.c=[N.e=0],N)},i.modulo=i.mod=function(N,$){var Z,B,I=this;return N=new D(N,$),!I.c||!N.s||N.c&&!N.c[0]?new D(NaN):!N.c||I.c&&!I.c[0]?new D(I):(g==9?(B=N.s,N.s=1,Z=e(I,N,0,3),N.s=B,Z.s*=B):Z=e(I,N,0,g),N=I.minus(Z.times(N)),!N.c[0]&&g==1&&(N.s=I.s),N)},i.multipliedBy=i.times=function(N,$){var Z,B,I,R,z,U,V,re,Q,_e,we,Qe,ae,H,K,me=this,fe=me.c,he=(N=new D(N,$)).c;if(!fe||!he||!fe[0]||!he[0])return!me.s||!N.s||fe&&!fe[0]&&!he||he&&!he[0]&&!fe?N.c=N.e=N.s=null:(N.s*=me.s,!fe||!he?N.c=N.e=null:(N.c=[0],N.e=0)),N;for(B=Wu(me.e/ii)+Wu(N.e/ii),N.s*=me.s,V=fe.length,_e=he.length,V<_e&&(ae=fe,fe=he,he=ae,I=V,V=_e,_e=I),I=V+_e,ae=[];I--;ae.push(0));for(H=hc,K=Xh,I=_e;--I>=0;){for(Z=0,we=he[I]%K,Qe=he[I]/K|0,z=V,R=I+z;R>I;)re=fe[--z]%K,Q=fe[z]/K|0,U=Qe*re+Q*we,re=we*re+U%K*K+ae[R]+Z,Z=(re/H|0)+(U/K|0)+Qe*Q,ae[R--]=re%H;ae[R]=Z}return Z?++B:ae.splice(0,1),te(N,ae,B)},i.negated=function(){var N=new D(this);return N.s=-N.s||null,N},i.plus=function(N,$){var Z,B=this,I=B.s;if(N=new D(N,$),$=N.s,!I||!$)return new D(NaN);if(I!=$)return N.s=-$,B.minus(N);var R=B.e/ii,z=N.e/ii,U=B.c,V=N.c;if(!R||!z){if(!U||!V)return new D(I/0);if(!U[0]||!V[0])return V[0]?N:new D(U[0]?B:I*0)}if(R=Wu(R),z=Wu(z),U=U.slice(),I=R-z){for(I>0?(z=R,Z=V):(I=-I,Z=U),Z.reverse();I--;Z.push(0));Z.reverse()}for(I=U.length,$=V.length,I-$<0&&(Z=V,V=U,U=Z,$=I),I=0;$;)I=(U[--$]=U[$]+V[$]+I)/hc|0,U[$]=hc===U[$]?0:U[$]%hc;return I&&(U=[I].concat(U),++z),te(N,U,z)},i.precision=i.sd=function(N,$){var Z,B,I,R=this;if(N!=null&&N!==!!N)return ho(N,1,bu),$==null?$=a:ho($,0,8),ge(new D(R),N,$);if(!(Z=R.c))return null;if(I=Z.length-1,B=I*ii+1,I=Z[I]){for(;I%10==0;I/=10,B--);for(I=Z[0];I>=10;I/=10,B++);}return N&&R.e+1>B&&(B=R.e+1),B},i.shiftedBy=function(N){return ho(N,-9007199254740991,u5),this.times("1e"+N)},i.squareRoot=i.sqrt=function(){var N,$,Z,B,I,R=this,z=R.c,U=R.s,V=R.e,re=o+4,Q=new D("0.5");if(U!==1||!z||!z[0])return new D(!U||U<0&&(!z||z[0])?NaN:z?R:1/0);if(U=Math.sqrt(+pe(R)),U==0||U==1/0?($=$u(z),($.length+V)%2==0&&($+="0"),U=Math.sqrt(+$),V=Wu((V+1)/2)-(V<0||V%2),U==1/0?$="5e"+V:($=U.toExponential(),$=$.slice(0,$.indexOf("e")+1)+V),Z=new D($)):Z=new D(U+""),Z.c[0]){for(V=Z.e,U=V+re,U<3&&(U=0);;)if(I=Z,Z=Q.times(I.plus(e(R,I,re,1))),$u(I.c).slice(0,U)===($=$u(Z.c)).slice(0,U))if(Z.e<V&&--U,$=$.slice(U-3,U+1),$=="9999"||!B&&$=="4999"){if(!B&&(ge(I,I.e+o+2,0),I.times(I).eq(R))){Z=I;break}re+=4,U+=4,B=1}else{(!+$||!+$.slice(1)&&$.charAt(0)=="5")&&(ge(Z,Z.e+o+2,1),N=!Z.times(Z).eq(R));break}}return ge(Z,Z.e+o+1,a,N)},i.toExponential=function(N,$){return N!=null&&(ho(N,0,bu),N++),j(this,N,$,1)},i.toFixed=function(N,$){return N!=null&&(ho(N,0,bu),N=N+this.e+1),j(this,N,$)},i.toFormat=function(N,$,Z){var B,I=this;if(Z==null)N!=null&&$&&typeof $=="object"?(Z=$,$=null):N&&typeof N=="object"?(Z=N,N=$=null):Z=E;else if(typeof Z!="object")throw Error(Xl+"Argument not an object: "+Z);if(B=I.toFixed(N,$),I.c){var R,z=B.split("."),U=+Z.groupSize,V=+Z.secondaryGroupSize,re=Z.groupSeparator||"",Q=z[0],_e=z[1],we=I.s<0,Qe=we?Q.slice(1):Q,ae=Qe.length;if(V&&(R=U,U=V,V=R,ae-=R),U>0&&ae>0){for(R=ae%U||U,Q=Qe.substr(0,R);R<ae;R+=U)Q+=re+Qe.substr(R,U);V>0&&(Q+=re+Qe.slice(R)),we&&(Q="-"+Q)}B=_e?Q+(Z.decimalSeparator||"")+((V=+Z.fractionGroupSize)?_e.replace(new RegExp("\\d{"+V+"}\\B","g"),"$&"+(Z.fractionGroupSeparator||"")):_e):Q}return(Z.prefix||"")+B+(Z.suffix||"")},i.toFraction=function(N){var $,Z,B,I,R,z,U,V,re,Q,_e,we,Qe=this,ae=Qe.c;if(N!=null&&(U=new D(N),!U.isInteger()&&(U.c||U.s!==1)||U.lt(s)))throw Error(Xl+"Argument "+(U.isInteger()?"out of range: ":"not an integer: ")+pe(U));if(!ae)return new D(Qe);for($=new D(s),re=Z=new D(s),B=V=new D(s),we=$u(ae),R=$.e=we.length-Qe.e-1,$.c[0]=t2[(z=R%ii)<0?ii+z:z],N=!N||U.comparedTo($)>0?R>0?$:re:U,z=p,p=1/0,U=new D(we),V.c[0]=0;Q=e(U,$,0,1),I=Z.plus(Q.times(B)),I.comparedTo(N)!=1;)Z=B,B=I,re=V.plus(Q.times(I=re)),V=I,$=U.minus(Q.times(I=$)),U=I;return I=e(N.minus(Z),B,0,1),V=V.plus(I.times(re)),Z=Z.plus(I.times(B)),V.s=re.s=Qe.s,R=R*2,_e=e(re,B,R,a).minus(Qe).abs().comparedTo(e(V,Z,R,a).minus(Qe).abs())<1?[re,B]:[V,Z],p=z,_e},i.toNumber=function(){return+pe(this)},i.toPrecision=function(N,$){return N!=null&&ho(N,1,bu),j(this,N,$,2)},i.toString=function(N){var $,Z=this,B=Z.s,I=Z.e;return I===null?B?($="Infinity",B<0&&($="-"+$)):$="NaN":(N==null?$=I<=l||I>=c?x0($u(Z.c),I):_h($u(Z.c),I,"0"):N===10&&A?(Z=ge(new D(Z),o+I+1,a),$=_h($u(Z.c),Z.e,"0")):(ho(N,2,k.length,"Base"),$=n(_h($u(Z.c),I,"0"),10,N,B,!0)),B<0&&Z.c[0]&&($="-"+$)),$},i.valueOf=i.toJSON=function(){return pe(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,t!=null&&D.set(t),D}function Wu(t){var e=t|0;return t>0||t===e?e:e-1}function $u(t){for(var e,n,r=1,i=t.length,s=t[0]+"";r<i;){for(e=t[r++]+"",n=ii-e.length;n--;e="0"+e);s+=e}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function Wd(t,e){var n,r,i=t.c,s=e.c,o=t.s,a=e.s,l=t.e,c=e.e;if(!o||!a)return null;if(n=i&&!i[0],r=s&&!s[0],n||r)return n?r?0:-a:o;if(o!=a)return o;if(n=o<0,r=l==c,!i||!s)return r?0:!i^n?1:-1;if(!r)return l>c^n?1:-1;for(a=(l=i.length)<(c=s.length)?l:c,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^n?1:-1;return l==c?0:l>c^n?1:-1}function ho(t,e,n,r){if(t<e||t>n||t!==Hu(t))throw Error(Xl+(r||"Argument")+(typeof t=="number"?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function w0(t){var e=t.c.length-1;return Wu(t.e/ii)==e&&t.c[e]%2!=0}function x0(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function _h(t,e,n){var r,i;if(e<0){for(i=n+".";++e;i+=n);t=i+t}else if(r=t.length,++e>r){for(i=n,e-=r;--e;i+=n);t+=i}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}var Zc=AE(),Qj=class{constructor(t){Ke(this,"key");Ke(this,"left",null);Ke(this,"right",null);this.key=t}},rg=class extends Qj{constructor(t){super(t)}},ez=class{constructor(){Ke(this,"size",0);Ke(this,"modificationCount",0);Ke(this,"splayCount",0)}splay(t){const e=this.root;if(e==null)return this.compare(t,t),-1;let n=null,r=null,i=null,s=null,o=e;const a=this.compare;let l;for(;;)if(l=a(o.key,t),l>0){let c=o.left;if(c==null||(l=a(c.key,t),l>0&&(o.left=c.right,c.right=o,o=c,c=o.left,c==null)))break;n==null?r=o:n.left=o,n=o,o=c}else if(l<0){let c=o.right;if(c==null||(l=a(c.key,t),l<0&&(o.right=c.left,c.left=o,o=c,c=o.right,c==null)))break;i==null?s=o:i.right=o,i=o,o=c}else break;return i!=null&&(i.right=o.left,o.left=s),n!=null&&(n.left=o.right,o.right=r),this.root!==o&&(this.root=o,this.splayCount++),l}splayMin(t){let e=t,n=e.left;for(;n!=null;){const r=n;e.left=r.right,r.right=e,e=r,n=e.left}return e}splayMax(t){let e=t,n=e.right;for(;n!=null;){const r=n;e.right=r.left,r.left=e,e=r,n=e.right}return e}_delete(t){if(this.root==null||this.splay(t)!=0)return null;let n=this.root;const r=n,i=n.left;if(this.size--,i==null)this.root=n.right;else{const s=n.right;n=this.splayMax(i),n.right=s,this.root=n}return this.modificationCount++,r}addNewRoot(t,e){this.size++,this.modificationCount++;const n=this.root;if(n==null){this.root=t;return}e<0?(t.left=n,t.right=n.right,n.right=null):(t.right=n,t.left=n.left,n.left=null),this.root=t}_first(){const t=this.root;return t==null?null:(this.root=this.splayMin(t),this.root)}_last(){const t=this.root;return t==null?null:(this.root=this.splayMax(t),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(t){return this.validKey(t)&&this.splay(t)==0}defaultCompare(){return(t,e)=>t<e?-1:t>e?1:0}wrap(){return{getRoot:()=>this.root,setRoot:t=>{this.root=t},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:t=>{this.splayCount=t},splay:t=>this.splay(t),has:t=>this.has(t)}}},EL,PL,Hv=class wg extends ez{constructor(n,r){super();Ke(this,"root",null);Ke(this,"compare");Ke(this,"validKey");Ke(this,EL,"[object Set]");this.compare=n??this.defaultCompare(),this.validKey=r??(i=>i!=null&&i!=null)}delete(n){return this.validKey(n)?this._delete(n)!=null:!1}deleteAll(n){for(const r of n)this.delete(r)}forEach(n){const r=this[Symbol.iterator]();let i;for(;i=r.next(),!i.done;)n(i.value,i.value,this)}add(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new rg(n),r),this}addAndReturn(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new rg(n),r),this.root.key}addAll(n){for(const r of n)this.add(r)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let s=i.right;for(;s!=null;)i=s,s=i.right;return i.key}firstAfter(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let s=i.left;for(;s!=null;)i=s,s=i.left;return i.key}retainAll(n){const r=new wg(this.compare,this.validKey),i=this.modificationCount;for(const s of n){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(s)&&this.splay(s)==0&&r.add(this.root.key)}r.size!=this.size&&(this.root=r.root,this.size=r.size,this.modificationCount++)}lookup(n){return!this.validKey(n)||this.splay(n)!=0?null:this.root.key}intersection(n){const r=new wg(this.compare,this.validKey);for(const i of this)n.has(i)&&r.add(i);return r}difference(n){const r=new wg(this.compare,this.validKey);for(const i of this)n.has(i)||r.add(i);return r}union(n){const r=this.clone();return r.addAll(n),r}clone(){const n=new wg(this.compare,this.validKey);return n.size=this.size,n.root=this.copyNode(this.root),n}copyNode(n){if(n==null)return null;function r(s,o){let a,l;do{if(a=s.left,l=s.right,a!=null){const c=new rg(a.key);o.left=c,r(a,c)}if(l!=null){const c=new rg(l.key);o.right=c,s=l,o=c}}while(l!=null)}const i=new rg(n.key);return r(n,i),i}toSet(){return this.clone()}entries(){return new nz(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(PL=Symbol.iterator,EL=Symbol.toStringTag,PL)](){return new tz(this.wrap())}},TE=class{constructor(t){Ke(this,"tree");Ke(this,"path",new Array);Ke(this,"modificationCount",null);Ke(this,"splayCount");this.tree=t,this.splayCount=t.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const t=this.path[this.path.length-1];return this.getValue(t)}rebuildPath(t){this.path.splice(0,this.path.length),this.tree.splay(t),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(t){for(;t!=null;)this.path.push(t),t=t.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let n=this.tree.getRoot();for(;n!=null;)this.path.push(n),n=n.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let t=this.path[this.path.length-1],e=t.right;if(e!=null){for(;e!=null;)this.path.push(e),e=e.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===t;)t=this.path.pop();return this.path.length>0}},tz=class extends TE{getValue(t){return t.key}},nz=class extends TE{getValue(t){return[t.key,t.key]}},DE=t=>()=>t,bb=t=>{const e=t?(n,r)=>r.minus(n).abs().isLessThanOrEqualTo(t):DE(!1);return(n,r)=>e(n,r)?0:n.comparedTo(r)};function rz(t){const e=t?(n,r,i,s,o)=>n.exponentiatedBy(2).isLessThanOrEqualTo(s.minus(r).exponentiatedBy(2).plus(o.minus(i).exponentiatedBy(2)).times(t)):DE(!1);return(n,r,i)=>{const s=n.x,o=n.y,a=i.x,l=i.y,c=o.minus(l).times(r.x.minus(a)).minus(s.minus(a).times(r.y.minus(l)));return e(c,s,o,a,l)?0:c.comparedTo(0)}}var iz=t=>t,sz=t=>{if(t){const e=new Hv(bb(t)),n=new Hv(bb(t)),r=(s,o)=>o.addAndReturn(s),i=s=>({x:r(s.x,e),y:r(s.y,n)});return i({x:new Zc(0),y:new Zc(0)}),i}return iz},_b=t=>({set:e=>{Fh=_b(e)},reset:()=>_b(t),compare:bb(t),snap:sz(t),orient:rz(t)}),Fh=_b(),ig=(t,e)=>t.ll.x.isLessThanOrEqualTo(e.x)&&e.x.isLessThanOrEqualTo(t.ur.x)&&t.ll.y.isLessThanOrEqualTo(e.y)&&e.y.isLessThanOrEqualTo(t.ur.y),wb=(t,e)=>{if(e.ur.x.isLessThan(t.ll.x)||t.ur.x.isLessThan(e.ll.x)||e.ur.y.isLessThan(t.ll.y)||t.ur.y.isLessThan(e.ll.y))return null;const n=t.ll.x.isLessThan(e.ll.x)?e.ll.x:t.ll.x,r=t.ur.x.isLessThan(e.ur.x)?t.ur.x:e.ur.x,i=t.ll.y.isLessThan(e.ll.y)?e.ll.y:t.ll.y,s=t.ur.y.isLessThan(e.ur.y)?t.ur.y:e.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:s}}},iv=(t,e)=>t.x.times(e.y).minus(t.y.times(e.x)),OE=(t,e)=>t.x.times(e.x).plus(t.y.times(e.y)),Wv=t=>OE(t,t).sqrt(),oz=(t,e,n)=>{const r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return iv(i,r).div(Wv(i)).div(Wv(r))},az=(t,e,n)=>{const r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return OE(i,r).div(Wv(i)).div(Wv(r))},c5=(t,e,n)=>e.y.isZero()?null:{x:t.x.plus(e.x.div(e.y).times(n.minus(t.y))),y:n},h5=(t,e,n)=>e.x.isZero()?null:{x:n,y:t.y.plus(e.y.div(e.x).times(n.minus(t.x)))},lz=(t,e,n,r)=>{if(e.x.isZero())return h5(n,r,t.x);if(r.x.isZero())return h5(t,e,n.x);if(e.y.isZero())return c5(n,r,t.y);if(r.y.isZero())return c5(t,e,n.y);const i=iv(e,r);if(i.isZero())return null;const s={x:n.x.minus(t.x),y:n.y.minus(t.y)},o=iv(s,e).div(i),a=iv(s,r).div(i),l=t.x.plus(a.times(e.x)),c=n.x.plus(o.times(r.x)),d=t.y.plus(a.times(e.y)),p=n.y.plus(o.times(r.y)),v=l.plus(c).div(2),g=d.plus(p).div(2);return{x:v,y:g}},Wc=class NE{constructor(e,n){Ke(this,"point");Ke(this,"isLeft");Ke(this,"segment");Ke(this,"otherSE");Ke(this,"consumedBy");e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}static compare(e,n){const r=NE.comparePoints(e.point,n.point);return r!==0?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:Gv.compare(e.segment,n.segment))}static comparePoints(e,n){return e.x.isLessThan(n.x)?-1:e.x.isGreaterThan(n.x)?1:e.y.isLessThan(n.y)?-1:e.y.isGreaterThan(n.y)?1:0}link(e){if(e.point===this.point)throw new Error("Tried to link already linked events");const n=e.point.events;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}checkForConsuming(){const e=this.point.events.length;for(let n=0;n<e;n++){const r=this.point.events[n];if(r.segment.consumedBy===void 0)for(let i=n+1;i<e;i++){const s=this.point.events[i];s.consumedBy===void 0&&r.otherSE.point.events===s.otherSE.point.events&&r.segment.consume(s.segment)}}}getAvailableLinkedEvents(){const e=[];for(let n=0,r=this.point.events.length;n<r;n++){const i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&e.push(i)}return e}getLeftmostComparator(e){const n=new Map,r=i=>{const s=i.otherSE;n.set(i,{sine:oz(this.point,e.point,s.point),cosine:az(this.point,e.point,s.point)})};return(i,s)=>{n.has(i)||r(i),n.has(s)||r(s);const{sine:o,cosine:a}=n.get(i),{sine:l,cosine:c}=n.get(s);return o.isGreaterThanOrEqualTo(0)&&l.isGreaterThanOrEqualTo(0)?a.isLessThan(c)?1:a.isGreaterThan(c)?-1:0:o.isLessThan(0)&&l.isLessThan(0)?a.isLessThan(c)?-1:a.isGreaterThan(c)?1:0:l.isLessThan(o)?-1:l.isGreaterThan(o)?1:0}}},uz=class xb{constructor(e){Ke(this,"events");Ke(this,"poly");Ke(this,"_isExteriorRing");Ke(this,"_enclosingRing");this.events=e;for(let n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}static factory(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];if(!s.isInResult()||s.ringOut)continue;let o=null,a=s.leftSE,l=s.rightSE;const c=[a],d=a.point,p=[];for(;o=a,a=l,c.push(a),a.point!==d;)for(;;){const v=a.getAvailableLinkedEvents();if(v.length===0){const E=c[0].point,k=c[c.length-1].point;throw new Error(`Unable to complete output ring starting at [${E.x}, ${E.y}]. Last matching segment found ends at [${k.x}, ${k.y}].`)}if(v.length===1){l=v[0].otherSE;break}let g=null;for(let E=0,k=p.length;E<k;E++)if(p[E].point===a.point){g=E;break}if(g!==null){const E=p.splice(g)[0],k=c.splice(E.index);k.unshift(k[0].otherSE),n.push(new xb(k.reverse()));continue}p.push({index:c.length,point:a.point});const x=a.getLeftmostComparator(o);l=v.sort(x)[0].otherSE;break}n.push(new xb(c))}return n}getGeom(){let e=this.events[0].point;const n=[e];for(let c=1,d=this.events.length-1;c<d;c++){const p=this.events[c].point,v=this.events[c+1].point;Fh.orient(p,e,v)!==0&&(n.push(p),e=p)}if(n.length===1)return null;const r=n[0],i=n[1];Fh.orient(r,e,i)===0&&n.shift(),n.push(n[0]);const s=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:n.length-1,a=this.isExteriorRing()?n.length:-1,l=[];for(let c=o;c!=a;c+=s)l.push([n[c].x.toNumber(),n[c].y.toNumber()]);return l}isExteriorRing(){if(this._isExteriorRing===void 0){const e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var i,s;let e=this.events[0];for(let o=1,a=this.events.length;o<a;o++){const l=this.events[o];Wc.compare(e,l)>0&&(e=l)}let n=e.segment.prevInResult(),r=n?n.prevInResult():null;for(;;){if(!n)return null;if(!r)return n.ringOut;if(r.ringOut!==n.ringOut)return((i=r.ringOut)==null?void 0:i.enclosingRing())!==n.ringOut?n.ringOut:(s=n.ringOut)==null?void 0:s.enclosingRing();n=r.prevInResult(),r=n?n.prevInResult():null}}},d5=class{constructor(t){Ke(this,"exteriorRing");Ke(this,"interiorRings");this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=this.exteriorRing.getGeom();if(t===null)return null;const e=[t];for(let n=0,r=this.interiorRings.length;n<r;n++){const i=this.interiorRings[n].getGeom();i!==null&&e.push(i)}return e}},cz=class{constructor(t){Ke(this,"rings");Ke(this,"polys");this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const r=this.polys[e].getGeom();r!==null&&t.push(r)}return t}_composePolys(t){var n;const e=[];for(let r=0,i=t.length;r<i;r++){const s=t[r];if(!s.poly)if(s.isExteriorRing())e.push(new d5(s));else{const o=s.enclosingRing();o!=null&&o.poly||e.push(new d5(o)),(n=o==null?void 0:o.poly)==null||n.addInterior(s)}}return e}},hz=class{constructor(t,e=Gv.compare){Ke(this,"queue");Ke(this,"tree");Ke(this,"segments");this.queue=t,this.tree=new Hv(e),this.segments=[]}process(t){const e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.delete(t.otherSE):this.tree.delete(e),n;t.isLeft&&this.tree.add(e);let r=e,i=e;do r=this.tree.lastBefore(r);while(r!=null&&r.consumedBy!=null);do i=this.tree.firstAfter(i);while(i!=null&&i.consumedBy!=null);if(t.isLeft){let s=null;if(r){const a=r.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(s=a),!r.isAnEndpoint(a))){const l=this._splitSafely(r,a);for(let c=0,d=l.length;c<d;c++)n.push(l[c])}}let o=null;if(i){const a=i.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(o=a),!i.isAnEndpoint(a))){const l=this._splitSafely(i,a);for(let c=0,d=l.length;c<d;c++)n.push(l[c])}}if(s!==null||o!==null){let a=null;s===null?a=o:o===null?a=s:a=Wc.comparePoints(s,o)<=0?s:o,this.queue.delete(e.rightSE),n.push(e.rightSE);const l=e.split(a);for(let c=0,d=l.length;c<d;c++)n.push(l[c])}n.length>0?(this.tree.delete(e),n.push(t)):(this.segments.push(e),e.prev=r)}else{if(r&&i){const s=r.getIntersection(i);if(s!==null){if(!r.isAnEndpoint(s)){const o=this._splitSafely(r,s);for(let a=0,l=o.length;a<l;a++)n.push(o[a])}if(!i.isAnEndpoint(s)){const o=this._splitSafely(i,s);for(let a=0,l=o.length;a<l;a++)n.push(o[a])}}}this.tree.delete(e)}return n}_splitSafely(t,e){this.tree.delete(t);const n=t.rightSE;this.queue.delete(n);const r=t.split(e);return r.push(n),t.consumedBy===void 0&&this.tree.add(t),r}},dz=class{constructor(){Ke(this,"type");Ke(this,"numMultiPolys")}run(t,e,n){xg.type=t;const r=[new p5(e,!0)];for(let c=0,d=n.length;c<d;c++)r.push(new p5(n[c],!1));if(xg.numMultiPolys=r.length,xg.type==="difference"){const c=r[0];let d=1;for(;d<r.length;)wb(r[d].bbox,c.bbox)!==null?d++:r.splice(d,1)}if(xg.type==="intersection")for(let c=0,d=r.length;c<d;c++){const p=r[c];for(let v=c+1,g=r.length;v<g;v++)if(wb(p.bbox,r[v].bbox)===null)return[]}const i=new Hv(Wc.compare);for(let c=0,d=r.length;c<d;c++){const p=r[c].getSweepEvents();for(let v=0,g=p.length;v<g;v++)i.add(p[v])}const s=new hz(i);let o=null;for(i.size!=0&&(o=i.first(),i.delete(o));o;){const c=s.process(o);for(let d=0,p=c.length;d<p;d++){const v=c[d];v.consumedBy===void 0&&i.add(v)}i.size!=0?(o=i.first(),i.delete(o)):o=null}Fh.reset();const a=uz.factory(s.segments);return new cz(a).getGeom()}},xg=new dz,Lb=xg,fz=0,Gv=class sv{constructor(e,n,r,i){Ke(this,"id");Ke(this,"leftSE");Ke(this,"rightSE");Ke(this,"rings");Ke(this,"windings");Ke(this,"ringOut");Ke(this,"consumedBy");Ke(this,"prev");Ke(this,"_prevInResult");Ke(this,"_beforeState");Ke(this,"_afterState");Ke(this,"_isInResult");this.id=++fz,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}static compare(e,n){const r=e.leftSE.point.x,i=n.leftSE.point.x,s=e.rightSE.point.x,o=n.rightSE.point.x;if(o.isLessThan(r))return 1;if(s.isLessThan(i))return-1;const a=e.leftSE.point.y,l=n.leftSE.point.y,c=e.rightSE.point.y,d=n.rightSE.point.y;if(r.isLessThan(i)){if(l.isLessThan(a)&&l.isLessThan(c))return 1;if(l.isGreaterThan(a)&&l.isGreaterThan(c))return-1;const p=e.comparePoint(n.leftSE.point);if(p<0)return 1;if(p>0)return-1;const v=n.comparePoint(e.rightSE.point);return v!==0?v:-1}if(r.isGreaterThan(i)){if(a.isLessThan(l)&&a.isLessThan(d))return-1;if(a.isGreaterThan(l)&&a.isGreaterThan(d))return 1;const p=n.comparePoint(e.leftSE.point);if(p!==0)return p;const v=e.comparePoint(n.rightSE.point);return v<0?1:v>0?-1:1}if(a.isLessThan(l))return-1;if(a.isGreaterThan(l))return 1;if(s.isLessThan(o)){const p=n.comparePoint(e.rightSE.point);if(p!==0)return p}if(s.isGreaterThan(o)){const p=e.comparePoint(n.rightSE.point);if(p<0)return 1;if(p>0)return-1}if(!s.eq(o)){const p=c.minus(a),v=s.minus(r),g=d.minus(l),x=o.minus(i);if(p.isGreaterThan(v)&&g.isLessThan(x))return 1;if(p.isLessThan(v)&&g.isGreaterThan(x))return-1}return s.isGreaterThan(o)?1:s.isLessThan(o)||c.isLessThan(d)?-1:c.isGreaterThan(d)?1:e.id<n.id?-1:e.id>n.id?1:0}static fromRing(e,n,r){let i,s,o;const a=Wc.comparePoints(e,n);if(a<0)i=e,s=n,o=1;else if(a>0)i=n,s=e,o=-1;else throw new Error(`Tried to create degenerate segment at [${e.x}, ${e.y}]`);const l=new Wc(i,!0),c=new Wc(s,!1);return new sv(l,c,[r],[o])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const e=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e.isLessThan(n)?e:n},ur:{x:this.rightSE.point.x,y:e.isGreaterThan(n)?e:n}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(e){return e.x.eq(this.leftSE.point.x)&&e.y.eq(this.leftSE.point.y)||e.x.eq(this.rightSE.point.x)&&e.y.eq(this.rightSE.point.y)}comparePoint(e){return Fh.orient(this.leftSE.point,e,this.rightSE.point)}getIntersection(e){const n=this.bbox(),r=e.bbox(),i=wb(n,r);if(i===null)return null;const s=this.leftSE.point,o=this.rightSE.point,a=e.leftSE.point,l=e.rightSE.point,c=ig(n,a)&&this.comparePoint(a)===0,d=ig(r,s)&&e.comparePoint(s)===0,p=ig(n,l)&&this.comparePoint(l)===0,v=ig(r,o)&&e.comparePoint(o)===0;if(d&&c)return v&&!p?o:!v&&p?l:null;if(d)return p&&s.x.eq(l.x)&&s.y.eq(l.y)?null:s;if(c)return v&&o.x.eq(a.x)&&o.y.eq(a.y)?null:a;if(v&&p)return null;if(v)return o;if(p)return l;const g=lz(s,this.vector(),a,e.vector());return g===null||!ig(i,g)?null:Fh.snap(g)}split(e){const n=[],r=e.events!==void 0,i=new Wc(e,!0),s=new Wc(e,!1),o=this.rightSE;this.replaceRightSE(s),n.push(s),n.push(i);const a=new sv(i,o,this.rings.slice(),this.windings.slice());return Wc.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),Wc.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),s.checkForConsuming()),n}swapEvents(){const e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}consume(e){let n=this,r=e;for(;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const i=sv.compare(n,r);if(i!==0){if(i>0){const s=n;n=r,r=s}if(n.prev===r){const s=n;n=r,r=s}for(let s=0,o=r.rings.length;s<o;s++){const a=r.rings[s],l=r.windings[s],c=n.rings.indexOf(a);c===-1?(n.rings.push(a),n.windings.push(l)):n.windings[c]+=l}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys;for(let a=0,l=this.rings.length;a<l;a++){const c=this.rings[a],d=this.windings[a],p=n.indexOf(c);p===-1?(n.push(c),r.push(d)):r[p]+=d}const s=[],o=[];for(let a=0,l=n.length;a<l;a++){if(r[a]===0)continue;const c=n[a],d=c.poly;if(o.indexOf(d)===-1)if(c.isExterior)s.push(d);else{o.indexOf(d)===-1&&o.push(d);const p=s.indexOf(c.poly);p!==-1&&s.splice(p,1)}}for(let a=0,l=s.length;a<l;a++){const c=s[a].multiPoly;i.indexOf(c)===-1&&i.push(c)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const e=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(Lb.type){case"union":{const r=e.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{let r,i;e.length<n.length?(r=e.length,i=n.length):(r=n.length,i=e.length),this._isInResult=i===Lb.numMultiPolys&&r<i;break}case"xor":{const r=Math.abs(e.length-n.length);this._isInResult=r%2===1;break}case"difference":{const r=i=>i.length===1&&i[0].isSubject;this._isInResult=r(e)!==r(n);break}}return this._isInResult}},f5=class{constructor(t,e,n){Ke(this,"poly");Ke(this,"isExterior");Ke(this,"segments");Ke(this,"bbox");if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=n,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=Fh.snap({x:new Zc(t[0][0]),y:new Zc(t[0][1])});this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let i=r;for(let s=1,o=t.length;s<o;s++){if(typeof t[s][0]!="number"||typeof t[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const a=Fh.snap({x:new Zc(t[s][0]),y:new Zc(t[s][1])});a.x.eq(i.x)&&a.y.eq(i.y)||(this.segments.push(Gv.fromRing(i,a,this)),a.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=a.x),a.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=a.y),a.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=a.x),a.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=a.y),i=a)}(!r.x.eq(i.x)||!r.y.eq(i.y))&&this.segments.push(Gv.fromRing(i,r,this))}getSweepEvents(){const t=[];for(let e=0,n=this.segments.length;e<n;e++){const r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}},pz=class{constructor(t,e){Ke(this,"multiPoly");Ke(this,"exteriorRing");Ke(this,"interiorRings");Ke(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new f5(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let n=1,r=t.length;n<r;n++){const i=new f5(t[n],this,!1);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=e}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let e=0,n=this.interiorRings.length;e<n;e++){const r=this.interiorRings[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)t.push(r[i])}return t}},p5=class{constructor(t,e){Ke(this,"isSubject");Ke(this,"polys");Ke(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:new Zc(Number.POSITIVE_INFINITY),y:new Zc(Number.POSITIVE_INFINITY)},ur:{x:new Zc(Number.NEGATIVE_INFINITY),y:new Zc(Number.NEGATIVE_INFINITY)}};for(let n=0,r=t.length;n<r;n++){const i=new pz(t[n],this);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=e}getSweepEvents(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const r=this.polys[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)t.push(r[i])}return t}},gz=(t,...e)=>Lb.run("intersection",t,e);Fh.set;function mz(t,e){var n,r,i,s,o,a,l,c,d,p,v=0,g=t.type==="FeatureCollection",x=t.type==="Feature",E=g?t.features.length:1;for(n=0;n<E;n++){for(a=g?t.features[n].geometry:x?t.geometry:t,c=g?t.features[n].properties:x?t.properties:{},d=g?t.features[n].bbox:x?t.bbox:void 0,p=g?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,d,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,d,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,d,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function vz(t,e={}){const n=[];if(mz(t,i=>{n.push(i.coordinates)}),n.length<2)throw new Error("Must specify at least 2 geometries");const r=gz(n[0],...n.slice(1));return r.length===0?null:r.length===1?Gu(r[0],e.properties):Fj(r,e.properties)}var yz=vz;function IE(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,d=0,p=0,v,g=t.type,x=g==="FeatureCollection",E=g==="Feature",k=x?t.features.length:1,A=0;A<k;A++){c=x?t.features[A].geometry:E?t.geometry:t,v=c?c.type==="GeometryCollection":!1,a=v?c.geometries.length:1;for(var D=0;D<a;D++){var j=0,Y=0;if(o=v?c.geometries[D]:c,o!==null){l=o.coordinates;var te=o.type;switch(d=0,te){case null:break;case"Point":if(e(l,p,A,j,Y)===!1)return!1;p++,j++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,A,j,Y)===!1)return!1;p++,te==="MultiPoint"&&j++}te==="LineString"&&j++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-d;i++){if(e(l[r][i],p,A,j,Y)===!1)return!1;p++}te==="MultiLineString"&&j++,te==="Polygon"&&Y++}te==="Polygon"&&j++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(Y=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-d;s++){if(e(l[r][i][s],p,A,j,Y)===!1)return!1;p++}Y++}j++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(IE(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function bz(t,e){var n,r,i,s,o,a,l,c,d,p,v=0,g=t.type==="FeatureCollection",x=t.type==="Feature",E=g?t.features.length:1;for(n=0;n<E;n++){for(a=g?t.features[n].geometry:x?t.geometry:t,c=g?t.features[n].properties:x?t.properties:{},d=g?t.features[n].bbox:x?t.bbox:void 0,p=g?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,d,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,d,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,d,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function _z(t,e){bz(t,function(n,r,i,s,o){var a=n===null?null:n.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(Ap(n,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<n.coordinates.length;c++){var d=n.coordinates[c],p={type:l,coordinates:d};if(e(Ap(p,i),r,c)===!1)return!1}})}function wz(t,e){_z(t,function(n,r,i){var s=0;if(n.geometry){var o=n.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,c=0,d=0;if(IE(n,function(p,v,g,x,E){if(a===void 0||r>l||x>c||E>d){a=p,l=r,c=x,d=E,s=0;return}var k=qu([a,p],n.properties);if(e(k,r,i,E,s)===!1)return!1;s++,a=p})===!1)return!1}}})}function xz(t,e,n){var r=n,i=!1;return wz(t,function(s,o,a,l,c){i===!1&&n===void 0?r=s:r=e(r,s,o,a,l,c),i=!0}),r}function qv(t,e={}){return xz(t,(n,r)=>{const i=r.geometry.coordinates;return n+$_(i[0],i[1],e)},0)}var Gd=qv;class cd extends Zn.Polygon{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Ke(this,"properties");this.properties=pn.measure("Polygon.constructor.initProperties",()=>({type:"Polygon",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{color:r.color||"#2b6451",weight:r.weight||3,opacity:r.opacity||1,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity||.2,dashArray:r.dashArray||"",name:r.name||""}})),this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){pn.measure("Polygon.updateProperties",()=>{var n,r,i,s,o;try{const a=this.getLatLngs()[0];if(!a||a.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const l=a.map(A=>[A.lng,A.lat]);l.push(l[0]);const c=Gu([l]),d=ME(c),p=qv(qu([...l]),{units:"meters"}),v=Wg(c),g=Zn.latLng(v.geometry.coordinates[1],v.geometry.coordinates[0]),x=((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||"",E=((i=this.properties)==null?void 0:i.category)||"forages",k=((s=this.properties)==null?void 0:s.accessLevel)||"visitor";this.properties={type:"Polygon",coordinates:a.map(A=>({lat:A.lat,lng:A.lng})),surface:d,perimeter:p,center:{lat:g.lat,lng:g.lng},vertices:a.length,category:E,accessLevel:k,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:x}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate polygon properties",a)}})}setName(n){pn.measure("Polygon.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return pn.measure("Polygon.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}setLatLngs(n){return pn.measure("Polygon.setLatLngs",()=>(super.setLatLngs(n),this.updateProperties(),this))}getMidPoints(){return pn.measure("Polygon.getMidPoints",()=>{const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(Zn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return r})}moveVertex(n,r){pn.measure("Polygon.moveVertex",()=>{const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i[n]=r,Zn.Polygon.prototype.setLatLngs.call(this,[i]))})}addVertex(n,r){pn.measure("Polygon.addVertex",()=>{const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i.splice((n+1)%i.length,0,r),Zn.Polygon.prototype.setLatLngs.call(this,[i]))})}move(n){return pn.measure("Polygon.move",()=>{const i=this.getLatLngs()[0].map(s=>Zn.latLng(s.lat+n.lat,s.lng+n.lng));return Zn.Polygon.prototype.setLatLngs.call(this,[i]),this})}getCenter(){return pn.measure("Polygon.getCenter",()=>{const n=this.getLatLngs()[0];if(!n||n.length===0)return new Zn.LatLng(0,0);try{const r=n.filter(c=>c&&typeof c.lat=="number"&&typeof c.lng=="number"&&!isNaN(c.lat)&&!isNaN(c.lng)&&Math.abs(c.lat)<=90&&Math.abs(c.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new Zn.LatLng(0,0);const i=r.map(c=>[c.lng,c.lat]);i.push(i[0]);const s=Gu([i]),o=Wg(s),a=o.geometry.coordinates[1],l=o.geometry.coordinates[0];if(typeof a!="number"||typeof l!="number"||isNaN(a)||isNaN(l)||Math.abs(a)>90||Math.abs(l)>180)throw new Error("Centroid calculé invalide");return Zn.latLng(a,l)}catch(r){console.warn("Erreur lors du calcul du centroïde avec turf.js, utilisation de la méthode simple",r);let i=0,s=0,o=0;for(const a of n)a&&typeof a.lat=="number"&&typeof a.lng=="number"&&!isNaN(a.lat)&&!isNaN(a.lng)&&Math.abs(a.lat)<=90&&Math.abs(a.lng)<=180&&(i+=a.lat,s+=a.lng,o++);return o===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new Zn.LatLng(0,0)):new Zn.LatLng(i/o,s/o)}})}getSegmentLengths(){return pn.measure("Polygon.getSegmentLengths",()=>{const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(s.distanceTo(o))}return r})}}class ia extends Zn.Polyline{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Ke(this,"properties");Ke(this,"cachedProperties",{});Ke(this,"needsUpdate",!0);this.properties=pn.measure("Line.constructor.initProperties",()=>({type:"Line",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...r||{},name:r.name||""}})),this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){pn.measure("Line.updateProperties",()=>{var i,s,o,a,l;const n=this.getLatLngs();if(!n||n.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=n.map(c=>[c.lng,c.lat]);try{const c=qu(r),d=qv(c,{units:"meters"});let p;if(n.length===2)p=Zn.latLng((n[0].lat+n[1].lat)/2,(n[0].lng+n[1].lng)/2);else{const k=yb(c,d/2,{units:"meters"});p=Zn.latLng(k.geometry.coordinates[1],k.geometry.coordinates[0])}const v=10,g=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"",x=((o=this.properties)==null?void 0:o.category)||"forages",E=((a=this.properties)==null?void 0:a.accessLevel)||"visitor";this.properties={type:"Line",length:d,coordinates:n.map(k=>({lat:k.lat,lng:k.lng})),center:{lat:p.lat,lng:p.lng},vertices:n.length,surfaceInfluence:d*v,dimensions:{width:v},category:x,accessLevel:E,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((l=this.options)==null?void 0:l.dashArray)||"",name:g}},this.cachedProperties.length=d,this.cachedProperties.center=p,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(c){console.error("Failed to calculate line properties",c)}})}setName(n){pn.measure("Line.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return pn.measure("Line.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}invalidateCache(){pn.measure("Line.invalidateCache",()=>{this.needsUpdate=!0,this.cachedProperties={}})}setLatLngs(n){return super.setLatLngs(n),this.needsUpdate=!0,this.cachedProperties={},this.fire("latlngs:updated",{latlngs:this.getLatLngs()}),this}getMidPoints(){return pn.measure("Line.getMidPoints",()=>{if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];if(!s||!o){console.warn("Points invalides détectés pour le segment",i);continue}r.push(Zn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return this.cachedProperties.midPoints=r,r})}getMidPointAt(n){return pn.measure("Line.getMidPointAt",()=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return null;const i=r[n],s=r[n+1];return!i||!s?(console.warn("Points invalides pour calcul du midpoint au segment",n),null):Zn.latLng((i.lat+s.lat)/2,(i.lng+s.lng)/2)})}moveVertex(n,r,i=!1){pn.measure("Line.moveVertex",()=>{const s=this.getLatLngs();n>=0&&n<s.length&&(s[n]=r,this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("vertex:moved",{index:n,latlng:r,allPoints:s}),i&&this.updateProperties())})}addVertex(n,r,i=!1){pn.measure("Line.addVertex",()=>{const s=this.getLatLngs();n>=0&&n<s.length-1&&(s.splice(n+1,0,r),Zn.Polyline.prototype.setLatLngs.call(this,s),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,i&&this.updateProperties())})}move(n,r=!0){return pn.measure("Line.move",()=>{this.fire("move:start");const i=this.getLatLngs(),s=i.map(o=>Zn.latLng(o.lat+n.lat,o.lng+n.lng));return this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("move",{delta:n,newPositions:s,oldPositions:i}),r&&(this.updateProperties(),this.fire("properties:updated",{shape:this,properties:this.properties}),this.fire("move:end")),this})}getCenter(){return pn.measure("Line.getCenter",()=>{if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const n=this.getLatLngs();if(n.length<2)return n[0]||new Zn.LatLng(0,0);try{const r=n.map(l=>[l.lng,l.lat]),i=qu(r),s=qv(i,{units:"meters"}),o=yb(i,s/2,{units:"meters"}),a=Zn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0]);return this.cachedProperties.center=a,a}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const i=n.reduce((a,l)=>a+l.lat,0)/n.length,s=n.reduce((a,l)=>a+l.lng,0)/n.length,o=new Zn.LatLng(i,s);return this.cachedProperties.center=o,o}})}getSegmentLengths(){return pn.measure("Line.getSegmentLengths",()=>{if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];r.push(s.distanceTo(o))}return this.cachedProperties.segmentLengths=r,r})}getSegmentLengthAt(n){return pn.measure("Line.getSegmentLengthAt",()=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return 0;const i=r[n],s=r[n+1];return i.distanceTo(s)})}getLengthToVertex(n){return pn.measure("Line.getLengthToVertex",()=>{const r=this.getLatLngs();let i=0;if(n<=0||r.length<2)return 0;for(let s=0;s<Math.min(n,r.length-1);s++)i+=r[s].distanceTo(r[s+1]);return i})}getLength(){return pn.measure("Line.getLength",()=>{if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const n=this.getLatLngs();let r=0;for(let i=0;i<n.length-1;i++)r+=n[i].distanceTo(n[i+1]);return this.cachedProperties.length=r,r})}}const Al=class Al extends ia{constructor(n,r={}){super(n,{...r,color:"#FF4500",weight:4,opacity:.8,interactive:!1,pmIgnore:!0});Ke(this,"elevationData",[]);Ke(this,"elevationProfile",null);Ke(this,"elevationMarker",null);Ke(this,"isZooming",!1);Ke(this,"simpleLine",null);Ke(this,"isDestroyed",!1);Ke(this,"zoomAnimationTimeout",null);this.properties=pn.measure("ElevationLine.constructor.initProperties",()=>({...this.properties,type:"ElevationLine",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...this.properties.style||{},name:r.name||""},elevationProfile:null,maxElevation:0,minElevation:0,elevationGain:0,elevationLoss:0,dataSource:"pending"})),this.setupEventListeners()}setupEventListeners(){pn.measure("ElevationLine.setupEventListeners",()=>{this.on("move",()=>this.updateElevationProfile()),this.on("add",()=>{this._map&&(this._map.on("zoomstart",this.handleZoomStart,this),this._map.on("zoomend",this.handleZoomEnd,this),this._map.on("zoomanim",this._animateZoom,this))}),this.on("remove",()=>{this.cleanupEventListeners()})})}cleanupEventListeners(){this._map&&(this._map.off("zoomstart",this.handleZoomStart,this),this._map.off("zoomend",this.handleZoomEnd,this),this._map.off("zoomanim",this._animateZoom,this)),this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null)}_animateZoom(n){if(this.isDestroyed||!this._map||!this.getLatLngs().length){console.debug("[ElevationLine] Animation de zoom ignorée - ligne détruite ou carte non disponible");return}this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null);try{this.elevationMarker&&this.elevationMarker.remove();const r=this._path;r&&(r.style.display="none");const i=this.getLatLngs();if(i&&i.length>0&&this._map&&!this.isDestroyed){if(!this._map.getContainer()){console.debug("[ElevationLine] Carte non valide pendant l'animation de zoom");return}if(this.simpleLine?this.simpleLine.setLatLngs(i):(this.simpleLine=Zn.polyline(i,{color:"#FF4500",weight:3,opacity:.6,smoothFactor:1,interactive:!1}),this._map&&this._map.getContainer()&&this.simpleLine.addTo(this._map)),this.simpleLine&&this.simpleLine._path){const s=this.simpleLine._path.style.transform;this.simpleLine._path.style.transform="",this.zoomAnimationTimeout=setTimeout(()=>{if(this.isDestroyed||!this._map||!this._map.getContainer()){this.cleanup();return}try{this.simpleLine&&this.simpleLine._path&&(this.simpleLine._path.style.transform=s,this.simpleLine._path.style.display=""),r&&!this.isDestroyed&&(r.style.display=""),this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(o){console.warn("[ElevationLine] Erreur lors de la restauration après animation:",o),this.cleanup()}},300)}}}catch(r){console.debug("[ElevationLine] Animation de zoom ignorée:",r),this.zoomAnimationTimeout=setTimeout(()=>{if(this.isDestroyed||!this._map||!this._map.getContainer()){this.cleanup();return}try{this._path&&(this._path.style.display=""),this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(i){console.error("[ElevationLine] Erreur lors de la restauration après animation:",i),this.cleanup()}},300)}}handleZoomStart(){this.isDestroyed||pn.measure("ElevationLine.handleZoomStart",()=>{if(!(this.isZooming||!this._map)){this.isZooming=!0;try{this.elevationMarker&&this.elevationMarker.remove();const n=this._path;n&&(n.style.display="none"),this.isDestroyed||this.setStyle({opacity:.3})}catch(n){console.error("[ElevationLine] Error in handleZoomStart:",n),this.cleanup()}}})}handleZoomEnd(){this.isDestroyed||pn.measure("ElevationLine.handleZoomEnd",()=>{if(!this._map){this.isZooming=!1;return}try{this.simpleLine&&this._map&&(this.simpleLine.remove(),this.simpleLine=null);const n=this._path;n&&(n.style.display=""),this.isDestroyed||this.setStyle({opacity:.8}),this.zoomAnimationTimeout&&clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=setTimeout(()=>{if(!(this.isDestroyed||!this._map))try{this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(r){console.warn("[ElevationLine] Erreur lors du redraw après zoom:",r),this.cleanup()}},50)}catch(n){console.error("[ElevationLine] Error in handleZoomEnd:",n)}finally{this.isZooming=!1}})}cleanup(){pn.measure("ElevationLine.cleanup",()=>{if(this.isZooming=!1,this.hideElevationMarker(),this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null),this.simpleLine&&this._map){try{this.simpleLine.remove()}catch(r){console.error("[ElevationLine] Error removing simpleLine:",r)}this.simpleLine=null}if(this.elevationProfile){try{this.elevationProfile.remove()}catch(r){console.error("[ElevationLine] Error removing elevationProfile:",r)}this.elevationProfile=null}const n=this._path;n&&(n.style.display=""),!this.isDestroyed&&this._map&&this._map.hasLayer(this)&&this.setStyle({opacity:.8})})}calculateOptimalSampleCount(){return pn.measure("ElevationLine.calculateOptimalSampleCount",()=>{const n=this.getLength(),r=Math.ceil(n/Al.SAMPLE_DISTANCE);return Math.min(Math.max(r,Al.MIN_SAMPLES),Al.MAX_SAMPLES)})}async fetchElevationData(n=0){return pn.measure("ElevationLine.fetchElevationData",async()=>{if(this.getLatLngs().length===0)return;const i=this.getLength();let s="";const o=this.calculateOptimalSampleCount();console.log(`[ElevationLine] Using ${o} sample points for ${i.toFixed(0)}m line`);const a=[];for(let l=0;l<o;l++){const c=l/(o-1)*i,d=this.getPointAtDistance(c);d&&a.push(`${d.lat},${d.lng}`)}s=a.join("|");try{const l=await fetch(`${Al.API_URL}?locations=${s}`);if(!l.ok)throw new Error(`HTTP error ${l.status}`);const c=await l.json();if(!c.results||!Array.isArray(c.results))throw new Error("Invalid API response format");this.elevationData=c.results.map((d,p)=>({distance:p/(o-1)*i,elevation:d.elevation})),this.properties.dataSource="api"}catch(l){if(console.warn(`[ElevationLine] API fetch attempt ${n+1}/${Al.MAX_RETRIES} failed:`,l),n<Al.MAX_RETRIES)return await new Promise(c=>setTimeout(c,Al.RETRY_DELAY)),this.fetchElevationData(n+1);console.warn("[ElevationLine] All API attempts failed, falling back to simulation"),this.simulateElevationData(),this.properties.dataSource="simulation"}this.calculateElevationStatistics()})}simulateElevationData(){pn.measure("ElevationLine.simulateElevationData",()=>{const n=this.getLength(),r=this.calculateOptimalSampleCount();this.elevationData=Array.from({length:r},(i,s)=>{const o=s/(r-1)*n,a=100+Math.sin(o/n*Math.PI*2)*50;return{distance:o,elevation:a}})})}calculateElevationStatistics(){pn.measure("ElevationLine.calculateElevationStatistics",()=>{if(!this.elevationData.length)return;const n=this.elevationData.map(d=>d.elevation),r=n.length?Math.max(...n):0,i=n.length?Math.min(...n):0;let s=0,o=0,a=0,l=0,c=0;console.log("[ElevationLine][calculateElevationStatistics] Données brutes:",{elevationsCount:n.length,maxElevation:r,minElevation:i});for(let d=1;d<this.elevationData.length;d++){const p=this.elevationData[d-1],v=this.elevationData[d],g=v.elevation-p.elevation;g>0?s+=g:o+=Math.abs(g);const x=v.distance-p.distance;if(x>0){const E=g/x*100;a=Math.max(a,Math.abs(E)),l+=Math.abs(E),c++}}console.log("[ElevationLine][calculateElevationStatistics] Calculs intermédiaires:",{gain:s,loss:o,maxSlope:a,averageSlope:c>0?l/c:0}),this.properties={...this.properties,type:"ElevationLine",maxElevation:r,minElevation:i,elevationGain:s,elevationLoss:o,maxSlope:a,averageSlope:c>0?l/c:0,elevationData:this.elevationData,dataSource:this.properties.dataSource,length:this.getLength()},console.log("[ElevationLine][calculateElevationStatistics] Propriétés mises à jour:",this.properties)})}showElevationAt(n){pn.measure("ElevationLine.showElevationAt",()=>{if(!(!this.elevationData.length||!this._map))try{const r=this.elevationData.reduce((s,o)=>Math.abs(o.distance-n)<Math.abs(s.distance-n)?o:s),i=this.getPointAtDistance(n);if(!i)return;this.elevationMarker?(this.elevationMarker.setLatLng(i),this.elevationMarker.setTooltipContent(`Distance: ${this.formatDistance(r.distance)}<br>Altitude: ${this.formatElevation(r.elevation)}`)):(this.elevationMarker=Zn.circleMarker(i,{radius:6,color:"#FF4500",fillColor:"#FF4500",fillOpacity:1,weight:2,className:"elevation-marker"}),this.elevationMarker.bindTooltip(`Distance: ${this.formatDistance(r.distance)}<br>Altitude: ${this.formatElevation(r.elevation)}`,{permanent:!0,direction:"top",offset:[0,-10],className:"elevation-marker-tooltip"}),this._map&&this._map.hasLayer(this)&&this.elevationMarker.addTo(this._map)),this.fire("elevation:show",{distance:n,elevation:r.elevation,latLng:i})}catch(r){console.error("[ElevationLine] Erreur lors de l'affichage de l'élévation:",r),this.hideElevationMarker()}})}hideElevationMarker(){pn.measure("ElevationLine.hideElevationMarker",()=>{this.elevationMarker&&(this.elevationMarker.remove(),this.elevationMarker=null)})}getPointAtDistance(n){return pn.measure("ElevationLine.getPointAtDistance",()=>{try{const i=this.getLatLngs().map(a=>[a.lng,a.lat]),s=qu(i),o=yb(s,n,{units:"meters"});return Zn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0])}catch(r){return console.error("Error calculating point at distance",r),null}})}moveVertex(n,r,i=!1){pn.measure("ElevationLine.moveVertex",()=>{super.moveVertex(n,r,!1),this.properties.type="ElevationLine",i&&this.updateElevationProfile()})}addVertex(n,r,i=!1){pn.measure("ElevationLine.addVertex",()=>{console.warn("[ElevationLine] Tentative d'ajout de vertex ignorée - non autorisé pour un profil altimétrique")})}setLatLngs(n){return pn.measure("ElevationLine.setLatLngs",()=>(super.setLatLngs(n),this.properties.type="ElevationLine",this.updateElevationProfile(),this))}move(n,r=!0){return pn.measure("ElevationLine.move",()=>(super.move(n,!1),this.properties.type="ElevationLine",r&&this.updateElevationProfile(),this))}setName(n){pn.measure("ElevationLine.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return pn.measure("ElevationLine.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}formatDistance(n){return pn.measure("ElevationLine.formatDistance",()=>n>=1e3?`${(n/1e3).toFixed(2)} km`:`${n.toFixed(0)} m`)}formatElevation(n){return pn.measure("ElevationLine.formatElevation",()=>`${n.toFixed(0)} m`)}onAdd(n){return pn.measure("ElevationLine.onAdd",()=>(super.onAdd(n),this))}onRemove(n){return this.isDestroyed=!0,this.cleanupEventListeners(),this.cleanup(),super.onRemove(n)}async updateElevationProfile(){return pn.measure("ElevationLine.updateElevationProfile",async()=>{try{if(this.properties.elevationData&&this.properties.dataSource==="restored"){this.elevationData=this.properties.elevationData,this.calculateElevationStatistics(),this._map&&this._map.hasLayer(this)&&this.redraw(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties});return}await this.fetchElevationData(),this.updateProperties(),this._map&&this._map.hasLayer(this)&&this.redraw(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties})}catch(n){console.error("[ElevationLine] Erreur lors de la mise à jour du profil d'élévation:",n),this.properties.dataSource="error"}})}updateProperties(){pn.measure("ElevationLine.updateProperties",()=>{var n,r;if(super.updateProperties(),this.elevationData&&this.elevationData.length>0){const i=this.elevationData.map(k=>k.elevation),s=Math.max(...i),o=Math.min(...i);let a=0,l=0,c=0,d=0,p=0;for(let k=1;k<this.elevationData.length;k++){const A=this.elevationData[k-1],D=this.elevationData[k],j=D.elevation-A.elevation;j>0?a+=j:l+=Math.abs(j);const Y=D.distance-A.distance;if(Y>0){const te=j/Y*100;c=Math.max(c,Math.abs(te)),d+=Math.abs(te),p++}}const g=this.getLatLngs().map(k=>({lat:k.lat,lng:k.lng})),x=((n=this.properties)==null?void 0:n.category)||"forages",E=((r=this.properties)==null?void 0:r.accessLevel)||"visitor";this.properties={...this.properties,type:"ElevationLine",coordinates:g,elevationData:this.elevationData.map(k=>({distance:k.distance,elevation:k.elevation})),maxElevation:s,minElevation:o,elevationGain:a,elevationLoss:l,maxSlope:c,averageSlope:p>0?d/p:0,dataSource:this.properties.dataSource||"api",category:x,accessLevel:E},this.fire("properties:updated",{shape:this,properties:this.properties})}})}getElevationData(){return pn.measure("ElevationLine.getElevationData",()=>this.elevationData)}};Ke(Al,"API_URL","https://api.open-elevation.com/api/v1/lookup"),Ke(Al,"RETRY_DELAY",2e3),Ke(Al,"MAX_RETRIES",3),Ke(Al,"SAMPLE_DISTANCE",100),Ke(Al,"MIN_SAMPLES",10),Ke(Al,"MAX_SAMPLES",50);let Sd=Al;var Yv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Yv.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,d="__lodash_placeholder__",p=1,v=2,g=4,x=1,E=2,k=1,A=2,D=4,j=8,Y=16,te=32,ge=64,pe=128,N=256,$=512,Z=30,B="...",I=800,R=16,z=1,U=2,V=3,re=1/0,Q=9007199254740991,_e=17976931348623157e292,we=NaN,Qe=4294967295,ae=Qe-1,H=Qe>>>1,K=[["ary",pe],["bind",k],["bindKey",A],["curry",j],["curryRight",Y],["flip",$],["partial",te],["partialRight",ge],["rearg",N]],me="[object Arguments]",fe="[object Array]",he="[object AsyncFunction]",X="[object Boolean]",J="[object Date]",De="[object DOMException]",Te="[object Error]",Je="[object Function]",de="[object GeneratorFunction]",ee="[object Map]",se="[object Number]",ce="[object Null]",ze="[object Object]",Ce="[object Promise]",ve="[object Proxy]",Ve="[object RegExp]",Ye="[object Set]",Ze="[object String]",_t="[object Symbol]",We="[object Undefined]",ut="[object WeakMap]",Vt="[object WeakSet]",tn="[object ArrayBuffer]",bn="[object DataView]",et="[object Float32Array]",at="[object Float64Array]",it="[object Int8Array]",zt="[object Int16Array]",Kt="[object Int32Array]",Nn="[object Uint8Array]",yn="[object Uint8ClampedArray]",Dn="[object Uint16Array]",er="[object Uint32Array]",Qt=/\b__p \+= '';/g,Cn=/\b(__p \+=) '' \+/g,Mn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,tr=/&(?:amp|lt|gt|quot|#39);/g,yr=/[&<>"']/g,xr=RegExp(tr.source),cr=RegExp(yr.source),Gr=/<%-([\s\S]+?)%>/g,zs=/<%([\s\S]+?)%>/g,Ai=/<%=([\s\S]+?)%>/g,Oo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ds=/^\w*$/,nr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Os=/[\\^$.*+?()[\]{}|]/g,No=RegExp(Os.source),lt=/^\s+/,Re=/\s/,ft=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,En=/\{\n\/\* \[wrapped with (.+)\] \*/,Un=/,? & /,wn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ut=/[()=,{}\[\]\/\s]/,Jn=/\\(\\)?/g,Ct=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ht=/\w*$/,Ln=/^[-+]0x[0-9a-f]+$/i,jr=/^0b[01]+$/i,un=/^\[object .+?Constructor\]$/,an=/^0o[0-7]+$/i,qn=/^(?:0|[1-9]\d*)$/,li=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xi=/($^)/,zi=/['\n\r\u2028\u2029\\]/g,Jr="\\ud800-\\udfff",_r="\\u0300-\\u036f",kr="\\ufe20-\\ufe2f",di="\\u20d0-\\u20ff",Ir=_r+kr+di,on="\\u2700-\\u27bf",Ni="a-z\\xdf-\\xf6\\xf8-\\xff",vi="\\xac\\xb1\\xd7\\xf7",Yi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Qr="\\u2000-\\u206f",fr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",On="A-Z\\xc0-\\xd6\\xd8-\\xde",Lr="\\ufe0e\\ufe0f",Ls=vi+Yi+Qr+fr,vo="['’]",hr="["+Jr+"]",Pn="["+Ls+"]",rn="["+Ir+"]",yi="\\d+",qr="["+on+"]",ui="["+Ni+"]",ps="[^"+Jr+Ls+yi+on+Ni+On+"]",$s="\\ud83c[\\udffb-\\udfff]",Ns="(?:"+rn+"|"+$s+")",dr="[^"+Jr+"]",Qs="(?:\\ud83c[\\udde6-\\uddff]){2}",Vi="[\\ud800-\\udbff][\\udc00-\\udfff]",Gi="["+On+"]",fi="\\u200d",kn="(?:"+ui+"|"+ps+")",vn="(?:"+Gi+"|"+ps+")",Fr="(?:"+vo+"(?:d|ll|m|re|s|t|ve))?",hs="(?:"+vo+"(?:D|LL|M|RE|S|T|VE))?",Vs=Ns+"?",aa="["+Lr+"]?",ds="(?:"+fi+"(?:"+[dr,Qs,Vi].join("|")+")"+aa+Vs+")*",ka="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",bl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Vn=aa+Vs+ds,Sr="(?:"+[qr,Qs,Vi].join("|")+")"+Vn,is="(?:"+[dr+rn+"?",rn,Qs,Vi,hr].join("|")+")",Ar=RegExp(vo,"g"),Ko=RegExp(rn,"g"),Aa=RegExp($s+"(?="+$s+")|"+is+Vn,"g"),Ta=RegExp([Gi+"?"+ui+"+"+Fr+"(?="+[Pn,Gi,"$"].join("|")+")",vn+"+"+hs+"(?="+[Pn,Gi+kn,"$"].join("|")+")",Gi+"?"+kn+"+"+Fr,Gi+"+"+hs,bl,ka,yi,Sr].join("|"),"g"),Xo=RegExp("["+fi+Jr+Ir+Lr+"]"),la=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_l=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Da=-1,Er={};Er[et]=Er[at]=Er[it]=Er[zt]=Er[Kt]=Er[Nn]=Er[yn]=Er[Dn]=Er[er]=!0,Er[me]=Er[fe]=Er[tn]=Er[X]=Er[bn]=Er[J]=Er[Te]=Er[Je]=Er[ee]=Er[se]=Er[ze]=Er[Ve]=Er[Ye]=Er[Ze]=Er[ut]=!1;var Kn={};Kn[me]=Kn[fe]=Kn[tn]=Kn[bn]=Kn[X]=Kn[J]=Kn[et]=Kn[at]=Kn[it]=Kn[zt]=Kn[Kt]=Kn[ee]=Kn[se]=Kn[ze]=Kn[Ve]=Kn[Ye]=Kn[Ze]=Kn[_t]=Kn[Nn]=Kn[yn]=Kn[Dn]=Kn[er]=!0,Kn[Te]=Kn[Je]=Kn[ut]=!1;var eo={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},yo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},lu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Au={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Bl=parseFloat,uu=parseInt,Tu=typeof Pa=="object"&&Pa&&Pa.Object===Object&&Pa,ei=typeof self=="object"&&self&&self.Object===Object&&self,gs=Tu||ei||Function("return this")(),mr=e&&!e.nodeType&&e,ms=mr&&!0&&t&&!t.nodeType&&t,Rl=ms&&ms.exports===mr,Ya=Rl&&Tu.process,Zi=function(){try{var Lt=ms&&ms.require&&ms.require("util").types;return Lt||Ya&&Ya.binding&&Ya.binding("util")}catch{}}(),Du=Zi&&Zi.isArrayBuffer,Oa=Zi&&Zi.isDate,cu=Zi&&Zi.isMap,hu=Zi&&Zi.isRegExp,ua=Zi&&Zi.isSet,du=Zi&&Zi.isTypedArray;function Li(Lt,Yt,Nt){switch(Nt.length){case 0:return Lt.call(Yt);case 1:return Lt.call(Yt,Nt[0]);case 2:return Lt.call(Yt,Nt[0],Nt[1]);case 3:return Lt.call(Yt,Nt[0],Nt[1],Nt[2])}return Lt.apply(Yt,Nt)}function Ac(Lt,Yt,Nt,Rn){for(var rr=-1,Pr=Lt==null?0:Lt.length;++rr<Pr;){var Ki=Lt[rr];Yt(Rn,Ki,Nt(Ki),Lt)}return Rn}function Us(Lt,Yt){for(var Nt=-1,Rn=Lt==null?0:Lt.length;++Nt<Rn&&Yt(Lt[Nt],Nt,Lt)!==!1;);return Lt}function va(Lt,Yt){for(var Nt=Lt==null?0:Lt.length;Nt--&&Yt(Lt[Nt],Nt,Lt)!==!1;);return Lt}function fu(Lt,Yt){for(var Nt=-1,Rn=Lt==null?0:Lt.length;++Nt<Rn;)if(!Yt(Lt[Nt],Nt,Lt))return!1;return!0}function ya(Lt,Yt){for(var Nt=-1,Rn=Lt==null?0:Lt.length,rr=0,Pr=[];++Nt<Rn;){var Ki=Lt[Nt];Yt(Ki,Nt,Lt)&&(Pr[rr++]=Ki)}return Pr}function Fl(Lt,Yt){var Nt=Lt==null?0:Lt.length;return!!Nt&&fn(Lt,Yt,0)>-1}function jl(Lt,Yt,Nt){for(var Rn=-1,rr=Lt==null?0:Lt.length;++Rn<rr;)if(Nt(Yt,Lt[Rn]))return!0;return!1}function Si(Lt,Yt){for(var Nt=-1,Rn=Lt==null?0:Lt.length,rr=Array(Rn);++Nt<Rn;)rr[Nt]=Yt(Lt[Nt],Nt,Lt);return rr}function Jo(Lt,Yt){for(var Nt=-1,Rn=Yt.length,rr=Lt.length;++Nt<Rn;)Lt[rr+Nt]=Yt[Nt];return Lt}function Za(Lt,Yt,Nt,Rn){var rr=-1,Pr=Lt==null?0:Lt.length;for(Rn&&Pr&&(Nt=Lt[++rr]);++rr<Pr;)Nt=Yt(Nt,Lt[rr],rr,Lt);return Nt}function vs(Lt,Yt,Nt,Rn){var rr=Lt==null?0:Lt.length;for(Rn&&rr&&(Nt=Lt[--rr]);rr--;)Nt=Yt(Nt,Lt[rr],rr,Lt);return Nt}function F(Lt,Yt){for(var Nt=-1,Rn=Lt==null?0:Lt.length;++Nt<Rn;)if(Yt(Lt[Nt],Nt,Lt))return!0;return!1}var xe=Cr("length");function tt(Lt){return Lt.split("")}function pt(Lt){return Lt.match(wn)||[]}function Mt(Lt,Yt,Nt){var Rn;return Nt(Lt,function(rr,Pr,Ki){if(Yt(rr,Pr,Ki))return Rn=Pr,!1}),Rn}function Wt(Lt,Yt,Nt,Rn){for(var rr=Lt.length,Pr=Nt+(Rn?1:-1);Rn?Pr--:++Pr<rr;)if(Yt(Lt[Pr],Pr,Lt))return Pr;return-1}function fn(Lt,Yt,Nt){return Yt===Yt?Is(Lt,Yt,Nt):Wt(Lt,Hn,Nt)}function jn(Lt,Yt,Nt,Rn){for(var rr=Nt-1,Pr=Lt.length;++rr<Pr;)if(Rn(Lt[rr],Yt))return rr;return-1}function Hn(Lt){return Lt!==Lt}function pr(Lt,Yt){var Nt=Lt==null?0:Lt.length;return Nt?Ci(Lt,Yt)/Nt:we}function Cr(Lt){return function(Yt){return Yt==null?n:Yt[Lt]}}function Vr(Lt){return function(Yt){return Lt==null?n:Lt[Yt]}}function qi(Lt,Yt,Nt,Rn,rr){return rr(Lt,function(Pr,Ki,Ei){Nt=Rn?(Rn=!1,Pr):Yt(Nt,Pr,Ki,Ei)}),Nt}function gi(Lt,Yt){var Nt=Lt.length;for(Lt.sort(Yt);Nt--;)Lt[Nt]=Lt[Nt].value;return Lt}function Ci(Lt,Yt){for(var Nt,Rn=-1,rr=Lt.length;++Rn<rr;){var Pr=Yt(Lt[Rn]);Pr!==n&&(Nt=Nt===n?Pr:Nt+Pr)}return Nt}function ys(Lt,Yt){for(var Nt=-1,Rn=Array(Lt);++Nt<Lt;)Rn[Nt]=Yt(Nt);return Rn}function Ss(Lt,Yt){return Si(Yt,function(Nt){return[Nt,Lt[Nt]]})}function Qo(Lt){return Lt&&Lt.slice(0,Xa(Lt)+1).replace(lt,"")}function Ur(Lt){return function(Yt){return Lt(Yt)}}function to(Lt,Yt){return Si(Yt,function(Nt){return Lt[Nt]})}function zl(Lt,Yt){return Lt.has(Yt)}function bo(Lt,Yt){for(var Nt=-1,Rn=Lt.length;++Nt<Rn&&fn(Yt,Lt[Nt],0)>-1;);return Nt}function Ou(Lt,Yt){for(var Nt=Lt.length;Nt--&&fn(Yt,Lt[Nt],0)>-1;);return Nt}function Na(Lt,Yt){for(var Nt=Lt.length,Rn=0;Nt--;)Lt[Nt]===Yt&&++Rn;return Rn}var tc=Vr(eo),wl=Vr(yo);function xl(Lt){return"\\"+Au[Lt]}function Cs(Lt,Yt){return Lt==null?n:Lt[Yt]}function Ia(Lt){return Xo.test(Lt)}function ea(Lt){return la.test(Lt)}function Io(Lt){for(var Yt,Nt=[];!(Yt=Lt.next()).done;)Nt.push(Yt.value);return Nt}function $l(Lt){var Yt=-1,Nt=Array(Lt.size);return Lt.forEach(function(Rn,rr){Nt[++Yt]=[rr,Rn]}),Nt}function no(Lt,Yt){return function(Nt){return Lt(Yt(Nt))}}function _o(Lt,Yt){for(var Nt=-1,Rn=Lt.length,rr=0,Pr=[];++Nt<Rn;){var Ki=Lt[Nt];(Ki===Yt||Ki===d)&&(Lt[Nt]=d,Pr[rr++]=Nt)}return Pr}function wo(Lt){var Yt=-1,Nt=Array(Lt.size);return Lt.forEach(function(Rn){Nt[++Yt]=Rn}),Nt}function Tc(Lt){var Yt=-1,Nt=Array(Lt.size);return Lt.forEach(function(Rn){Nt[++Yt]=[Rn,Rn]}),Nt}function Is(Lt,Yt,Nt){for(var Rn=Nt-1,rr=Lt.length;++Rn<rr;)if(Lt[Rn]===Yt)return Rn;return-1}function Ka(Lt,Yt,Nt){for(var Rn=Nt+1;Rn--;)if(Lt[Rn]===Yt)return Rn;return Rn}function ro(Lt){return Ia(Lt)?so(Lt):xe(Lt)}function io(Lt){return Ia(Lt)?Hs(Lt):tt(Lt)}function Xa(Lt){for(var Yt=Lt.length;Yt--&&Re.test(Lt.charAt(Yt)););return Yt}var Ja=Vr(lu);function so(Lt){for(var Yt=Aa.lastIndex=0;Aa.test(Lt);)++Yt;return Yt}function Hs(Lt){return Lt.match(Aa)||[]}function Ba(Lt){return Lt.match(Ta)||[]}var ta=function Lt(Yt){Yt=Yt==null?gs:oo.defaults(gs.Object(),Yt,oo.pick(gs,_l));var Nt=Yt.Array,Rn=Yt.Date,rr=Yt.Error,Pr=Yt.Function,Ki=Yt.Math,Ei=Yt.Object,pu=Yt.RegExp,xo=Yt.String,Xi=Yt.TypeError,Ra=Nt.prototype,Qa=Pr.prototype,Fa=Ei.prototype,ja=Yt["__core-js_shared__"],za=Qa.toString,ti=Fa.hasOwnProperty,ba=0,Ws=function(){var f=/[^.]+$/.exec(ja&&ja.keys&&ja.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),Pi=Fa.toString,Ii=za.call(Ei),bs=gs._,Ui=pu("^"+za.call(ti).replace(Os,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),na=Rl?Yt.Buffer:n,Bo=Yt.Symbol,ca=Yt.Uint8Array,nc=na?na.allocUnsafe:n,$a=no(Ei.getPrototypeOf,Ei),Es=Ei.create,$i=Fa.propertyIsEnumerable,ao=Ra.splice,Ro=Bo?Bo.isConcatSpreadable:n,wr=Bo?Bo.iterator:n,el=Bo?Bo.toStringTag:n,tl=function(){try{var f=zd(Ei,"defineProperty");return f({},"",{}),f}catch{}}(),_a=Yt.clearTimeout!==gs.clearTimeout&&Yt.clearTimeout,Lo=Rn&&Rn.now!==gs.Date.now&&Rn.now,oh=Yt.setTimeout!==gs.setTimeout&&Yt.setTimeout,Gs=Ki.ceil,qs=Ki.floor,wa=Ei.getOwnPropertySymbols,u=na?na.isBuffer:n,y=Yt.isFinite,P=Ra.join,G=no(Ei.keys,Ei),le=Ki.max,Pe=Ki.min,ct=Rn.now,Ot=Yt.parseInt,Gt=Ki.random,cn=Ra.reverse,zn=zd(Yt,"DataView"),or=zd(Yt,"Map"),$r=zd(Yt,"Promise"),Ps=zd(Yt,"Set"),as=zd(Yt,"WeakMap"),Ys=zd(Ei,"create"),Ji=as&&new as,Fo={},ah=$d(zn),Va=$d(or),xa=$d($r),ha=$d(Ps),Od=$d(as),Nu=Bo?Bo.prototype:n,bi=Nu?Nu.valueOf:n,lo=Nu?Nu.toString:n;function Ie(f){if(So(f)&&!ri(f)&&!(f instanceof Hr)){if(f instanceof Zs)return f;if(ti.call(f,"__wrapped__"))return qw(f)}return new Zs(f)}var jo=function(){function f(){}return function(b){if(!co(b))return{};if(Es)return Es(b);f.prototype=b;var O=new f;return f.prototype=n,O}}();function rc(){}function Zs(f,b){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=n}Ie.templateSettings={escape:Gr,evaluate:zs,interpolate:Ai,variable:"",imports:{_:Ie}},Ie.prototype=rc.prototype,Ie.prototype.constructor=Ie,Zs.prototype=jo(rc.prototype),Zs.prototype.constructor=Zs;function Hr(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Qe,this.__views__=[]}function Vh(){var f=new Hr(this.__wrapped__);return f.__actions__=Ul(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=Ul(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=Ul(this.__views__),f}function Af(){if(this.__filtered__){var f=new Hr(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function Uh(){var f=this.__wrapped__.value(),b=this.__dir__,O=ri(f),ie=b<0,Se=O?f.length:0,Ue=ek(0,Se,this.__views__),ot=Ue.start,bt=Ue.end,Dt=bt-ot,hn=ie?bt:ot-1,dn=this.__iteratees__,_n=dn.length,Gn=0,vr=Pe(Dt,this.__takeCount__);if(!O||!ie&&Se==Dt&&vr==Dt)return Iu(f,this.__actions__);var Tr=[];e:for(;Dt--&&Gn<vr;){hn+=b;for(var pi=-1,Dr=f[hn];++pi<_n;){var Mi=dn[pi],Ri=Mi.iteratee,vu=Mi.type,El=Ri(Dr);if(vu==U)Dr=El;else if(!El){if(vu==z)continue e;break e}}Tr[Gn++]=Dr}return Tr}Hr.prototype=jo(rc.prototype),Hr.prototype.constructor=Hr;function Ll(f){var b=-1,O=f==null?0:f.length;for(this.clear();++b<O;){var ie=f[b];this.set(ie[0],ie[1])}}function lh(){this.__data__=Ys?Ys(null):{},this.size=0}function Nd(f){var b=this.has(f)&&delete this.__data__[f];return this.size-=b?1:0,b}function Up(f){var b=this.__data__;if(Ys){var O=b[f];return O===l?n:O}return ti.call(b,f)?b[f]:n}function Dc(f){var b=this.__data__;return Ys?b[f]!==n:ti.call(b,f)}function Hh(f,b){var O=this.__data__;return this.size+=this.has(f)?0:1,O[f]=Ys&&b===n?l:b,this}Ll.prototype.clear=lh,Ll.prototype.delete=Nd,Ll.prototype.get=Up,Ll.prototype.has=Dc,Ll.prototype.set=Hh;function gu(f){var b=-1,O=f==null?0:f.length;for(this.clear();++b<O;){var ie=f[b];this.set(ie[0],ie[1])}}function Hp(){this.__data__=[],this.size=0}function Wh(f){var b=this.__data__,O=xt(b,f);if(O<0)return!1;var ie=b.length-1;return O==ie?b.pop():ao.call(b,O,1),--this.size,!0}function Gh(f){var b=this.__data__,O=xt(b,f);return O<0?n:b[O][1]}function Tf(f){return xt(this.__data__,f)>-1}function Df(f,b){var O=this.__data__,ie=xt(O,f);return ie<0?(++this.size,O.push([f,b])):O[ie][1]=b,this}gu.prototype.clear=Hp,gu.prototype.delete=Wh,gu.prototype.get=Gh,gu.prototype.has=Tf,gu.prototype.set=Df;function nl(f){var b=-1,O=f==null?0:f.length;for(this.clear();++b<O;){var ie=f[b];this.set(ie[0],ie[1])}}function Of(){this.size=0,this.__data__={hash:new Ll,map:new(or||gu),string:new Ll}}function Nf(f){var b=Qm(this,f).delete(f);return this.size-=b?1:0,b}function If(f){return Qm(this,f).get(f)}function w(f){return Qm(this,f).has(f)}function T(f,b){var O=Qm(this,f),ie=O.size;return O.set(f,b),this.size+=O.size==ie?0:1,this}nl.prototype.clear=Of,nl.prototype.delete=Nf,nl.prototype.get=If,nl.prototype.has=w,nl.prototype.set=T;function q(f){var b=-1,O=f==null?0:f.length;for(this.__data__=new nl;++b<O;)this.add(f[b])}function ue(f){return this.__data__.set(f,l),this}function Le(f){return this.__data__.has(f)}q.prototype.add=q.prototype.push=ue,q.prototype.has=Le;function Me(f){var b=this.__data__=new gu(f);this.size=b.size}function Ae(){this.__data__=new gu,this.size=0}function Ne(f){var b=this.__data__,O=b.delete(f);return this.size=b.size,O}function Fe(f){return this.__data__.get(f)}function Xe(f){return this.__data__.has(f)}function mt(f,b){var O=this.__data__;if(O instanceof gu){var ie=O.__data__;if(!or||ie.length<i-1)return ie.push([f,b]),this.size=++O.size,this;O=this.__data__=new nl(ie)}return O.set(f,b),this.size=O.size,this}Me.prototype.clear=Ae,Me.prototype.delete=Ne,Me.prototype.get=Fe,Me.prototype.has=Xe,Me.prototype.set=mt;function Rt(f,b){var O=ri(f),ie=!O&&Vd(f),Se=!O&&!ie&&Yh(f),Ue=!O&&!ie&&!Se&&Hf(f),ot=O||ie||Se||Ue,bt=ot?ys(f.length,xo):[],Dt=bt.length;for(var hn in f)(b||ti.call(f,hn))&&!(ot&&(hn=="length"||Se&&(hn=="offset"||hn=="parent")||Ue&&(hn=="buffer"||hn=="byteLength"||hn=="byteOffset")||ph(hn,Dt)))&&bt.push(hn);return bt}function Ft(f){var b=f.length;return b?f[Rd(0,b-1)]:n}function Pt(f,b){return e0(Ul(f),ar(b,0,f.length))}function Zt(f){return e0(Ul(f))}function qt(f,b,O){(O!==n&&!uc(f[b],O)||O===n&&!(b in f))&&Fn(f,b,O)}function vt(f,b,O){var ie=f[b];(!(ti.call(f,b)&&uc(ie,O))||O===n&&!(b in f))&&Fn(f,b,O)}function xt(f,b){for(var O=f.length;O--;)if(uc(f[O][0],b))return O;return-1}function nn(f,b,O,ie){return W(f,function(Se,Ue,ot){b(ie,Se,O(Se),ot)}),ie}function gn(f,b){return f&&Ic(b,La(b),f)}function sn(f,b){return f&&Ic(b,Wl(b),f)}function Fn(f,b,O){b=="__proto__"&&tl?tl(f,b,{configurable:!0,enumerable:!0,value:O,writable:!0}):f[b]=O}function In(f,b){for(var O=-1,ie=b.length,Se=Nt(ie),Ue=f==null;++O<ie;)Se[O]=Ue?n:_1(f,b[O]);return Se}function ar(f,b,O){return f===f&&(O!==n&&(f=f<=O?f:O),b!==n&&(f=f>=b?f:b)),f}function h(f,b,O,ie,Se,Ue){var ot,bt=b&p,Dt=b&v,hn=b&g;if(O&&(ot=Se?O(f,ie,Se,Ue):O(f)),ot!==n)return ot;if(!co(f))return f;var dn=ri(f);if(dn){if(ot=nk(f),!bt)return Ul(f,ot)}else{var _n=il(f),Gn=_n==Je||_n==de;if(Yh(f))return bw(f,bt);if(_n==ze||_n==me||Gn&&!Se){if(ot=Dt||Gn?{}:Fw(f),!bt)return Dt?WM(f,sn(ot,f)):HM(f,gn(ot,f))}else{if(!Kn[_n])return Se?f:{};ot=rk(f,_n,bt)}}Ue||(Ue=new Me);var vr=Ue.get(f);if(vr)return vr;Ue.set(f,ot),fx(f)?f.forEach(function(Dr){ot.add(h(Dr,b,O,Dr,f,Ue))}):hx(f)&&f.forEach(function(Dr,Mi){ot.set(Mi,h(Dr,b,O,Mi,f,Ue))});var Tr=hn?Dt?o1:s1:Dt?Wl:La,pi=dn?n:Tr(f);return Us(pi||f,function(Dr,Mi){pi&&(Mi=Dr,Dr=f[Mi]),vt(ot,Mi,h(Dr,b,O,Mi,f,Ue))}),ot}function m(f){var b=La(f);return function(O){return _(O,f,b)}}function _(f,b,O){var ie=O.length;if(f==null)return!ie;for(f=Ei(f);ie--;){var Se=O[ie],Ue=b[Se],ot=f[Se];if(ot===n&&!(Se in f)||!Ue(ot))return!1}return!0}function C(f,b,O){if(typeof f!="function")throw new Xi(o);return Zp(function(){f.apply(n,O)},b)}function M(f,b,O,ie){var Se=-1,Ue=Fl,ot=!0,bt=f.length,Dt=[],hn=b.length;if(!bt)return Dt;O&&(b=Si(b,Ur(O))),ie?(Ue=jl,ot=!1):b.length>=i&&(Ue=zl,ot=!1,b=new q(b));e:for(;++Se<bt;){var dn=f[Se],_n=O==null?dn:O(dn);if(dn=ie||dn!==0?dn:0,ot&&_n===_n){for(var Gn=hn;Gn--;)if(b[Gn]===_n)continue e;Dt.push(dn)}else Ue(b,_n,ie)||Dt.push(dn)}return Dt}var W=Sw(en),ne=Sw(xn,!0);function oe(f,b){var O=!0;return W(f,function(ie,Se,Ue){return O=!!b(ie,Se,Ue),O}),O}function ye(f,b,O){for(var ie=-1,Se=f.length;++ie<Se;){var Ue=f[ie],ot=b(Ue);if(ot!=null&&(bt===n?ot===ot&&!mu(ot):O(ot,bt)))var bt=ot,Dt=Ue}return Dt}function Ee(f,b,O,ie){var Se=f.length;for(O=hi(O),O<0&&(O=-O>Se?0:Se+O),ie=ie===n||ie>Se?Se:hi(ie),ie<0&&(ie+=Se),ie=O>ie?0:gx(ie);O<ie;)f[O++]=b;return f}function rt(f,b){var O=[];return W(f,function(ie,Se,Ue){b(ie,Se,Ue)&&O.push(ie)}),O}function qe(f,b,O,ie,Se){var Ue=-1,ot=f.length;for(O||(O=sk),Se||(Se=[]);++Ue<ot;){var bt=f[Ue];b>0&&O(bt)?b>1?qe(bt,b-1,O,ie,Se):Jo(Se,bt):ie||(Se[Se.length]=bt)}return Se}var wt=Cw(),It=Cw(!0);function en(f,b){return f&&wt(f,b,La)}function xn(f,b){return f&&It(f,b,La)}function An(f,b){return ya(b,function(O){return gh(f[O])})}function br(f,b){b=lc(b,f);for(var O=0,ie=b.length;f!=null&&O<ie;)f=f[Bc(b[O++])];return O&&O==ie?f:n}function nt(f,b,O){var ie=b(f);return ri(f)?ie:Jo(ie,O(f))}function st(f){return f==null?f===n?We:ce:el&&el in Ei(f)?QM(f):dk(f)}function gt(f,b){return f>b}function jt(f,b){return f!=null&&ti.call(f,b)}function Et(f,b){return f!=null&&b in Ei(f)}function Bt(f,b,O){return f>=Pe(b,O)&&f<le(b,O)}function be(f,b,O){for(var ie=O?jl:Fl,Se=f[0].length,Ue=f.length,ot=Ue,bt=Nt(Ue),Dt=1/0,hn=[];ot--;){var dn=f[ot];ot&&b&&(dn=Si(dn,Ur(b))),Dt=Pe(dn.length,Dt),bt[ot]=!O&&(b||Se>=120&&dn.length>=120)?new q(ot&&dn):n}dn=f[0];var _n=-1,Gn=bt[0];e:for(;++_n<Se&&hn.length<Dt;){var vr=dn[_n],Tr=b?b(vr):vr;if(vr=O||vr!==0?vr:0,!(Gn?zl(Gn,Tr):ie(hn,Tr,O))){for(ot=Ue;--ot;){var pi=bt[ot];if(!(pi?zl(pi,Tr):ie(f[ot],Tr,O)))continue e}Gn&&Gn.push(Tr),hn.push(vr)}}return hn}function ke(f,b,O,ie){return en(f,function(Se,Ue,ot){b(ie,O(Se),Ue,ot)}),ie}function $e(f,b,O){b=lc(b,f),f=Vw(f,b);var ie=f==null?f:f[Bc(Fu(b))];return ie==null?n:Li(ie,f,O)}function je(f){return So(f)&&st(f)==me}function He(f){return So(f)&&st(f)==tn}function Ge(f){return So(f)&&st(f)==J}function ht(f,b,O,ie,Se){return f===b?!0:f==null||b==null||!So(f)&&!So(b)?f!==f&&b!==b:dt(f,b,O,ie,ht,Se)}function dt(f,b,O,ie,Se,Ue){var ot=ri(f),bt=ri(b),Dt=ot?fe:il(f),hn=bt?fe:il(b);Dt=Dt==me?ze:Dt,hn=hn==me?ze:hn;var dn=Dt==ze,_n=hn==ze,Gn=Dt==hn;if(Gn&&Yh(f)){if(!Yh(b))return!1;ot=!0,dn=!1}if(Gn&&!dn)return Ue||(Ue=new Me),ot||Hf(f)?Iw(f,b,O,ie,Se,Ue):XM(f,b,Dt,O,ie,Se,Ue);if(!(O&x)){var vr=dn&&ti.call(f,"__wrapped__"),Tr=_n&&ti.call(b,"__wrapped__");if(vr||Tr){var pi=vr?f.value():f,Dr=Tr?b.value():b;return Ue||(Ue=new Me),Se(pi,Dr,O,ie,Ue)}}return Gn?(Ue||(Ue=new Me),JM(f,b,O,ie,Se,Ue)):!1}function yt(f){return So(f)&&il(f)==ee}function At(f,b,O,ie){var Se=O.length,Ue=Se,ot=!ie;if(f==null)return!Ue;for(f=Ei(f);Se--;){var bt=O[Se];if(ot&&bt[2]?bt[1]!==f[bt[0]]:!(bt[0]in f))return!1}for(;++Se<Ue;){bt=O[Se];var Dt=bt[0],hn=f[Dt],dn=bt[1];if(ot&&bt[2]){if(hn===n&&!(Dt in f))return!1}else{var _n=new Me;if(ie)var Gn=ie(hn,dn,Dt,f,b,_n);if(!(Gn===n?ht(dn,hn,x|E,ie,_n):Gn))return!1}}return!0}function Tt(f){if(!co(f)||ak(f))return!1;var b=gh(f)?Ui:un;return b.test($d(f))}function ln(f){return So(f)&&st(f)==Ve}function Wn(f){return So(f)&&il(f)==Ye}function Xn(f){return So(f)&&o0(f.length)&&!!Er[st(f)]}function lr(f){return typeof f=="function"?f:f==null?Gl:typeof f=="object"?ri(f)?ic(f[0],f[1]):zo(f):Ex(f)}function _i(f){if(!Yp(f))return G(f);var b=[];for(var O in Ei(f))ti.call(f,O)&&O!="constructor"&&b.push(O);return b}function Bi(f){if(!co(f))return hk(f);var b=Yp(f),O=[];for(var ie in f)ie=="constructor"&&(b||!ti.call(f,ie))||O.push(ie);return O}function ni(f,b){return f<b}function Hi(f,b){var O=-1,ie=Hl(f)?Nt(f.length):[];return W(f,function(Se,Ue,ot){ie[++O]=b(Se,Ue,ot)}),ie}function zo(f){var b=l1(f);return b.length==1&&b[0][2]?zw(b[0][0],b[0][1]):function(O){return O===f||At(O,f,b)}}function ic(f,b){return c1(f)&&jw(b)?zw(Bc(f),b):function(O){var ie=_1(O,f);return ie===n&&ie===b?w1(O,f):ht(b,ie,x|E)}}function Ua(f,b,O,ie,Se){f!==b&&wt(b,function(Ue,ot){if(Se||(Se=new Me),co(Ue))Id(f,b,ot,O,Ua,ie,Se);else{var bt=ie?ie(d1(f,ot),Ue,ot+"",f,b,Se):n;bt===n&&(bt=Ue),qt(f,ot,bt)}},Wl)}function Id(f,b,O,ie,Se,Ue,ot){var bt=d1(f,O),Dt=d1(b,O),hn=ot.get(Dt);if(hn){qt(f,O,hn);return}var dn=Ue?Ue(bt,Dt,O+"",f,b,ot):n,_n=dn===n;if(_n){var Gn=ri(Dt),vr=!Gn&&Yh(Dt),Tr=!Gn&&!vr&&Hf(Dt);dn=Dt,Gn||vr||Tr?ri(bt)?dn=bt:$o(bt)?dn=Ul(bt):vr?(_n=!1,dn=bw(Dt,!0)):Tr?(_n=!1,dn=_w(Dt,!0)):dn=[]:Kp(Dt)||Vd(Dt)?(dn=bt,Vd(bt)?dn=mx(bt):(!co(bt)||gh(bt))&&(dn=Fw(Dt))):_n=!1}_n&&(ot.set(Dt,dn),Se(dn,Dt,ie,Ue,ot),ot.delete(Dt)),qt(f,O,dn)}function Sl(f,b){var O=f.length;if(O)return b+=b<0?O:0,ph(b,O)?f[b]:n}function Oc(f,b,O){b.length?b=Si(b,function(Ue){return ri(Ue)?function(ot){return br(ot,Ue.length===1?Ue[0]:Ue)}:Ue}):b=[Gl];var ie=-1;b=Si(b,Ur(Mr()));var Se=Hi(f,function(Ue,ot,bt){var Dt=Si(b,function(hn){return hn(Ue)});return{criteria:Dt,index:++ie,value:Ue}});return gi(Se,function(Ue,ot){return UM(Ue,ot,O)})}function Ha(f,b){return uo(f,b,function(O,ie){return w1(f,ie)})}function uo(f,b,O){for(var ie=-1,Se=b.length,Ue={};++ie<Se;){var ot=b[ie],bt=br(f,ot);O(bt,ot)&&uh(Ue,lc(ot,f),bt)}return Ue}function _s(f){return function(b){return br(b,f)}}function Bf(f,b,O,ie){var Se=ie?jn:fn,Ue=-1,ot=b.length,bt=f;for(f===b&&(b=Ul(b)),O&&(bt=Si(f,Ur(O)));++Ue<ot;)for(var Dt=0,hn=b[Ue],dn=O?O(hn):hn;(Dt=Se(bt,dn,Dt,ie))>-1;)bt!==f&&ao.call(bt,Dt,1),ao.call(f,Dt,1);return f}function Bd(f,b){for(var O=f?b.length:0,ie=O-1;O--;){var Se=b[O];if(O==ie||Se!==Ue){var Ue=Se;ph(Se)?ao.call(f,Se,1):ch(f,Se)}}return f}function Rd(f,b){return f+qs(Gt()*(b-f+1))}function Fd(f,b,O,ie){for(var Se=-1,Ue=le(Gs((b-f)/(O||1)),0),ot=Nt(Ue);Ue--;)ot[ie?Ue:++Se]=f,f+=O;return ot}function Rf(f,b){var O="";if(!f||b<1||b>Q)return O;do b%2&&(O+=f),b=qs(b/2),b&&(f+=f);while(b);return O}function ci(f,b){return f1($w(f,b,Gl),f+"")}function Ff(f){return Ft(Wf(f))}function Vm(f,b){var O=Wf(f);return e0(O,ar(b,0,O.length))}function uh(f,b,O,ie){if(!co(f))return f;b=lc(b,f);for(var Se=-1,Ue=b.length,ot=Ue-1,bt=f;bt!=null&&++Se<Ue;){var Dt=Bc(b[Se]),hn=O;if(Dt==="__proto__"||Dt==="constructor"||Dt==="prototype")return f;if(Se!=ot){var dn=bt[Dt];hn=ie?ie(dn,Dt,bt):n,hn===n&&(hn=co(dn)?dn:ph(b[Se+1])?[]:{})}vt(bt,Dt,hn),bt=bt[Dt]}return f}var sc=Ji?function(f,b){return Ji.set(f,b),f}:Gl,Um=tl?function(f,b){return tl(f,"toString",{configurable:!0,enumerable:!1,value:L1(b),writable:!0})}:Gl;function Hm(f){return e0(Wf(f))}function Vl(f,b,O){var ie=-1,Se=f.length;b<0&&(b=-b>Se?0:Se+b),O=O>Se?Se:O,O<0&&(O+=Se),Se=b>O?0:O-b>>>0,b>>>=0;for(var Ue=Nt(Se);++ie<Se;)Ue[ie]=f[ie+b];return Ue}function Wm(f,b){var O;return W(f,function(ie,Se,Ue){return O=b(ie,Se,Ue),!O}),!!O}function oc(f,b,O){var ie=0,Se=f==null?ie:f.length;if(typeof b=="number"&&b===b&&Se<=H){for(;ie<Se;){var Ue=ie+Se>>>1,ot=f[Ue];ot!==null&&!mu(ot)&&(O?ot<=b:ot<b)?ie=Ue+1:Se=Ue}return Se}return Wp(f,b,Gl,O)}function Wp(f,b,O,ie){var Se=0,Ue=f==null?0:f.length;if(Ue===0)return 0;b=O(b);for(var ot=b!==b,bt=b===null,Dt=mu(b),hn=b===n;Se<Ue;){var dn=qs((Se+Ue)/2),_n=O(f[dn]),Gn=_n!==n,vr=_n===null,Tr=_n===_n,pi=mu(_n);if(ot)var Dr=ie||Tr;else hn?Dr=Tr&&(ie||Gn):bt?Dr=Tr&&Gn&&(ie||!vr):Dt?Dr=Tr&&Gn&&!vr&&(ie||!pi):vr||pi?Dr=!1:Dr=ie?_n<=b:_n<b;Dr?Se=dn+1:Ue=dn}return Pe(Ue,ae)}function Gp(f,b){for(var O=-1,ie=f.length,Se=0,Ue=[];++O<ie;){var ot=f[O],bt=b?b(ot):ot;if(!O||!uc(bt,Dt)){var Dt=bt;Ue[Se++]=ot===0?0:ot}}return Ue}function Gm(f){return typeof f=="number"?f:mu(f)?we:+f}function rl(f){if(typeof f=="string")return f;if(ri(f))return Si(f,rl)+"";if(mu(f))return lo?lo.call(f):"";var b=f+"";return b=="0"&&1/f==-1/0?"-0":b}function Nc(f,b,O){var ie=-1,Se=Fl,Ue=f.length,ot=!0,bt=[],Dt=bt;if(O)ot=!1,Se=jl;else if(Ue>=i){var hn=b?null:ZM(f);if(hn)return wo(hn);ot=!1,Se=zl,Dt=new q}else Dt=b?[]:bt;e:for(;++ie<Ue;){var dn=f[ie],_n=b?b(dn):dn;if(dn=O||dn!==0?dn:0,ot&&_n===_n){for(var Gn=Dt.length;Gn--;)if(Dt[Gn]===_n)continue e;b&&Dt.push(_n),bt.push(dn)}else Se(Dt,_n,O)||(Dt!==bt&&Dt.push(_n),bt.push(dn))}return bt}function ch(f,b){return b=lc(b,f),f=Vw(f,b),f==null||delete f[Bc(Fu(b))]}function jf(f,b,O,ie){return uh(f,b,O(br(f,b)),ie)}function hh(f,b,O,ie){for(var Se=f.length,Ue=ie?Se:-1;(ie?Ue--:++Ue<Se)&&b(f[Ue],Ue,f););return O?Vl(f,ie?0:Ue,ie?Ue+1:Se):Vl(f,ie?Ue+1:0,ie?Se:Ue)}function Iu(f,b){var O=f;return O instanceof Hr&&(O=O.value()),Za(b,function(ie,Se){return Se.func.apply(Se.thisArg,Jo([ie],Se.args))},O)}function Bu(f,b,O){var ie=f.length;if(ie<2)return ie?Nc(f[0]):[];for(var Se=-1,Ue=Nt(ie);++Se<ie;)for(var ot=f[Se],bt=-1;++bt<ie;)bt!=Se&&(Ue[Se]=M(Ue[Se]||ot,f[bt],b,O));return Nc(qe(Ue,1),b,O)}function ac(f,b,O){for(var ie=-1,Se=f.length,Ue=b.length,ot={};++ie<Se;){var bt=ie<Ue?b[ie]:n;O(ot,f[ie],bt)}return ot}function qh(f){return $o(f)?f:[]}function jd(f){return typeof f=="function"?f:Gl}function lc(f,b){return ri(f)?f:c1(f,b)?[f]:Gw(ss(f))}var t1=ci;function Ru(f,b,O){var ie=f.length;return O=O===n?ie:O,!b&&O>=ie?f:Vl(f,b,O)}var zf=_a||function(f){return gs.clearTimeout(f)};function bw(f,b){if(b)return f.slice();var O=f.length,ie=nc?nc(O):new f.constructor(O);return f.copy(ie),ie}function n1(f){var b=new f.constructor(f.byteLength);return new ca(b).set(new ca(f)),b}function zM(f,b){var O=b?n1(f.buffer):f.buffer;return new f.constructor(O,f.byteOffset,f.byteLength)}function $M(f){var b=new f.constructor(f.source,Ht.exec(f));return b.lastIndex=f.lastIndex,b}function VM(f){return bi?Ei(bi.call(f)):{}}function _w(f,b){var O=b?n1(f.buffer):f.buffer;return new f.constructor(O,f.byteOffset,f.length)}function ww(f,b){if(f!==b){var O=f!==n,ie=f===null,Se=f===f,Ue=mu(f),ot=b!==n,bt=b===null,Dt=b===b,hn=mu(b);if(!bt&&!hn&&!Ue&&f>b||Ue&&ot&&Dt&&!bt&&!hn||ie&&ot&&Dt||!O&&Dt||!Se)return 1;if(!ie&&!Ue&&!hn&&f<b||hn&&O&&Se&&!ie&&!Ue||bt&&O&&Se||!ot&&Se||!Dt)return-1}return 0}function UM(f,b,O){for(var ie=-1,Se=f.criteria,Ue=b.criteria,ot=Se.length,bt=O.length;++ie<ot;){var Dt=ww(Se[ie],Ue[ie]);if(Dt){if(ie>=bt)return Dt;var hn=O[ie];return Dt*(hn=="desc"?-1:1)}}return f.index-b.index}function xw(f,b,O,ie){for(var Se=-1,Ue=f.length,ot=O.length,bt=-1,Dt=b.length,hn=le(Ue-ot,0),dn=Nt(Dt+hn),_n=!ie;++bt<Dt;)dn[bt]=b[bt];for(;++Se<ot;)(_n||Se<Ue)&&(dn[O[Se]]=f[Se]);for(;hn--;)dn[bt++]=f[Se++];return dn}function Lw(f,b,O,ie){for(var Se=-1,Ue=f.length,ot=-1,bt=O.length,Dt=-1,hn=b.length,dn=le(Ue-bt,0),_n=Nt(dn+hn),Gn=!ie;++Se<dn;)_n[Se]=f[Se];for(var vr=Se;++Dt<hn;)_n[vr+Dt]=b[Dt];for(;++ot<bt;)(Gn||Se<Ue)&&(_n[vr+O[ot]]=f[Se++]);return _n}function Ul(f,b){var O=-1,ie=f.length;for(b||(b=Nt(ie));++O<ie;)b[O]=f[O];return b}function Ic(f,b,O,ie){var Se=!O;O||(O={});for(var Ue=-1,ot=b.length;++Ue<ot;){var bt=b[Ue],Dt=ie?ie(O[bt],f[bt],bt,O,f):n;Dt===n&&(Dt=f[bt]),Se?Fn(O,bt,Dt):vt(O,bt,Dt)}return O}function HM(f,b){return Ic(f,u1(f),b)}function WM(f,b){return Ic(f,Bw(f),b)}function qm(f,b){return function(O,ie){var Se=ri(O)?Ac:nn,Ue=b?b():{};return Se(O,f,Mr(ie,2),Ue)}}function $f(f){return ci(function(b,O){var ie=-1,Se=O.length,Ue=Se>1?O[Se-1]:n,ot=Se>2?O[2]:n;for(Ue=f.length>3&&typeof Ue=="function"?(Se--,Ue):n,ot&&Cl(O[0],O[1],ot)&&(Ue=Se<3?n:Ue,Se=1),b=Ei(b);++ie<Se;){var bt=O[ie];bt&&f(b,bt,ie,Ue)}return b})}function Sw(f,b){return function(O,ie){if(O==null)return O;if(!Hl(O))return f(O,ie);for(var Se=O.length,Ue=b?Se:-1,ot=Ei(O);(b?Ue--:++Ue<Se)&&ie(ot[Ue],Ue,ot)!==!1;);return O}}function Cw(f){return function(b,O,ie){for(var Se=-1,Ue=Ei(b),ot=ie(b),bt=ot.length;bt--;){var Dt=ot[f?bt:++Se];if(O(Ue[Dt],Dt,Ue)===!1)break}return b}}function GM(f,b,O){var ie=b&k,Se=qp(f);function Ue(){var ot=this&&this!==gs&&this instanceof Ue?Se:f;return ot.apply(ie?O:this,arguments)}return Ue}function Ew(f){return function(b){b=ss(b);var O=Ia(b)?io(b):n,ie=O?O[0]:b.charAt(0),Se=O?Ru(O,1).join(""):b.slice(1);return ie[f]()+Se}}function Vf(f){return function(b){return Za(Sx(Lx(b).replace(Ar,"")),f,"")}}function qp(f){return function(){var b=arguments;switch(b.length){case 0:return new f;case 1:return new f(b[0]);case 2:return new f(b[0],b[1]);case 3:return new f(b[0],b[1],b[2]);case 4:return new f(b[0],b[1],b[2],b[3]);case 5:return new f(b[0],b[1],b[2],b[3],b[4]);case 6:return new f(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new f(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var O=jo(f.prototype),ie=f.apply(O,b);return co(ie)?ie:O}}function qM(f,b,O){var ie=qp(f);function Se(){for(var Ue=arguments.length,ot=Nt(Ue),bt=Ue,Dt=Uf(Se);bt--;)ot[bt]=arguments[bt];var hn=Ue<3&&ot[0]!==Dt&&ot[Ue-1]!==Dt?[]:_o(ot,Dt);if(Ue-=hn.length,Ue<O)return Tw(f,b,Ym,Se.placeholder,n,ot,hn,n,n,O-Ue);var dn=this&&this!==gs&&this instanceof Se?ie:f;return Li(dn,this,ot)}return Se}function Pw(f){return function(b,O,ie){var Se=Ei(b);if(!Hl(b)){var Ue=Mr(O,3);b=La(b),O=function(bt){return Ue(Se[bt],bt,Se)}}var ot=f(b,O,ie);return ot>-1?Se[Ue?b[ot]:ot]:n}}function Mw(f){return fh(function(b){var O=b.length,ie=O,Se=Zs.prototype.thru;for(f&&b.reverse();ie--;){var Ue=b[ie];if(typeof Ue!="function")throw new Xi(o);if(Se&&!ot&&Jm(Ue)=="wrapper")var ot=new Zs([],!0)}for(ie=ot?ie:O;++ie<O;){Ue=b[ie];var bt=Jm(Ue),Dt=bt=="wrapper"?a1(Ue):n;Dt&&h1(Dt[0])&&Dt[1]==(pe|j|te|N)&&!Dt[4].length&&Dt[9]==1?ot=ot[Jm(Dt[0])].apply(ot,Dt[3]):ot=Ue.length==1&&h1(Ue)?ot[bt]():ot.thru(Ue)}return function(){var hn=arguments,dn=hn[0];if(ot&&hn.length==1&&ri(dn))return ot.plant(dn).value();for(var _n=0,Gn=O?b[_n].apply(this,hn):dn;++_n<O;)Gn=b[_n].call(this,Gn);return Gn}})}function Ym(f,b,O,ie,Se,Ue,ot,bt,Dt,hn){var dn=b&pe,_n=b&k,Gn=b&A,vr=b&(j|Y),Tr=b&$,pi=Gn?n:qp(f);function Dr(){for(var Mi=arguments.length,Ri=Nt(Mi),vu=Mi;vu--;)Ri[vu]=arguments[vu];if(vr)var El=Uf(Dr),yu=Na(Ri,El);if(ie&&(Ri=xw(Ri,ie,Se,vr)),Ue&&(Ri=Lw(Ri,Ue,ot,vr)),Mi-=yu,vr&&Mi<hn){var Vo=_o(Ri,El);return Tw(f,b,Ym,Dr.placeholder,O,Ri,Vo,bt,Dt,hn-Mi)}var cc=_n?O:this,vh=Gn?cc[f]:f;return Mi=Ri.length,bt?Ri=fk(Ri,bt):Tr&&Mi>1&&Ri.reverse(),dn&&Dt<Mi&&(Ri.length=Dt),this&&this!==gs&&this instanceof Dr&&(vh=pi||qp(vh)),vh.apply(cc,Ri)}return Dr}function kw(f,b){return function(O,ie){return ke(O,f,b(ie),{})}}function Zm(f,b){return function(O,ie){var Se;if(O===n&&ie===n)return b;if(O!==n&&(Se=O),ie!==n){if(Se===n)return ie;typeof O=="string"||typeof ie=="string"?(O=rl(O),ie=rl(ie)):(O=Gm(O),ie=Gm(ie)),Se=f(O,ie)}return Se}}function r1(f){return fh(function(b){return b=Si(b,Ur(Mr())),ci(function(O){var ie=this;return f(b,function(Se){return Li(Se,ie,O)})})})}function Km(f,b){b=b===n?" ":rl(b);var O=b.length;if(O<2)return O?Rf(b,f):b;var ie=Rf(b,Gs(f/ro(b)));return Ia(b)?Ru(io(ie),0,f).join(""):ie.slice(0,f)}function YM(f,b,O,ie){var Se=b&k,Ue=qp(f);function ot(){for(var bt=-1,Dt=arguments.length,hn=-1,dn=ie.length,_n=Nt(dn+Dt),Gn=this&&this!==gs&&this instanceof ot?Ue:f;++hn<dn;)_n[hn]=ie[hn];for(;Dt--;)_n[hn++]=arguments[++bt];return Li(Gn,Se?O:this,_n)}return ot}function Aw(f){return function(b,O,ie){return ie&&typeof ie!="number"&&Cl(b,O,ie)&&(O=ie=n),b=mh(b),O===n?(O=b,b=0):O=mh(O),ie=ie===n?b<O?1:-1:mh(ie),Fd(b,O,ie,f)}}function Xm(f){return function(b,O){return typeof b=="string"&&typeof O=="string"||(b=ju(b),O=ju(O)),f(b,O)}}function Tw(f,b,O,ie,Se,Ue,ot,bt,Dt,hn){var dn=b&j,_n=dn?ot:n,Gn=dn?n:ot,vr=dn?Ue:n,Tr=dn?n:Ue;b|=dn?te:ge,b&=~(dn?ge:te),b&D||(b&=-4);var pi=[f,b,Se,vr,_n,Tr,Gn,bt,Dt,hn],Dr=O.apply(n,pi);return h1(f)&&Uw(Dr,pi),Dr.placeholder=ie,Hw(Dr,f,b)}function i1(f){var b=Ki[f];return function(O,ie){if(O=ju(O),ie=ie==null?0:Pe(hi(ie),292),ie&&y(O)){var Se=(ss(O)+"e").split("e"),Ue=b(Se[0]+"e"+(+Se[1]+ie));return Se=(ss(Ue)+"e").split("e"),+(Se[0]+"e"+(+Se[1]-ie))}return b(O)}}var ZM=Ps&&1/wo(new Ps([,-0]))[1]==re?function(f){return new Ps(f)}:E1;function Dw(f){return function(b){var O=il(b);return O==ee?$l(b):O==Ye?Tc(b):Ss(b,f(b))}}function dh(f,b,O,ie,Se,Ue,ot,bt){var Dt=b&A;if(!Dt&&typeof f!="function")throw new Xi(o);var hn=ie?ie.length:0;if(hn||(b&=-97,ie=Se=n),ot=ot===n?ot:le(hi(ot),0),bt=bt===n?bt:hi(bt),hn-=Se?Se.length:0,b&ge){var dn=ie,_n=Se;ie=Se=n}var Gn=Dt?n:a1(f),vr=[f,b,O,ie,Se,dn,_n,Ue,ot,bt];if(Gn&&ck(vr,Gn),f=vr[0],b=vr[1],O=vr[2],ie=vr[3],Se=vr[4],bt=vr[9]=vr[9]===n?Dt?0:f.length:le(vr[9]-hn,0),!bt&&b&(j|Y)&&(b&=-25),!b||b==k)var Tr=GM(f,b,O);else b==j||b==Y?Tr=qM(f,b,bt):(b==te||b==(k|te))&&!Se.length?Tr=YM(f,b,O,ie):Tr=Ym.apply(n,vr);var pi=Gn?sc:Uw;return Hw(pi(Tr,vr),f,b)}function Ow(f,b,O,ie){return f===n||uc(f,Fa[O])&&!ti.call(ie,O)?b:f}function Nw(f,b,O,ie,Se,Ue){return co(f)&&co(b)&&(Ue.set(b,f),Ua(f,b,n,Nw,Ue),Ue.delete(b)),f}function KM(f){return Kp(f)?n:f}function Iw(f,b,O,ie,Se,Ue){var ot=O&x,bt=f.length,Dt=b.length;if(bt!=Dt&&!(ot&&Dt>bt))return!1;var hn=Ue.get(f),dn=Ue.get(b);if(hn&&dn)return hn==b&&dn==f;var _n=-1,Gn=!0,vr=O&E?new q:n;for(Ue.set(f,b),Ue.set(b,f);++_n<bt;){var Tr=f[_n],pi=b[_n];if(ie)var Dr=ot?ie(pi,Tr,_n,b,f,Ue):ie(Tr,pi,_n,f,b,Ue);if(Dr!==n){if(Dr)continue;Gn=!1;break}if(vr){if(!F(b,function(Mi,Ri){if(!zl(vr,Ri)&&(Tr===Mi||Se(Tr,Mi,O,ie,Ue)))return vr.push(Ri)})){Gn=!1;break}}else if(!(Tr===pi||Se(Tr,pi,O,ie,Ue))){Gn=!1;break}}return Ue.delete(f),Ue.delete(b),Gn}function XM(f,b,O,ie,Se,Ue,ot){switch(O){case bn:if(f.byteLength!=b.byteLength||f.byteOffset!=b.byteOffset)return!1;f=f.buffer,b=b.buffer;case tn:return!(f.byteLength!=b.byteLength||!Ue(new ca(f),new ca(b)));case X:case J:case se:return uc(+f,+b);case Te:return f.name==b.name&&f.message==b.message;case Ve:case Ze:return f==b+"";case ee:var bt=$l;case Ye:var Dt=ie&x;if(bt||(bt=wo),f.size!=b.size&&!Dt)return!1;var hn=ot.get(f);if(hn)return hn==b;ie|=E,ot.set(f,b);var dn=Iw(bt(f),bt(b),ie,Se,Ue,ot);return ot.delete(f),dn;case _t:if(bi)return bi.call(f)==bi.call(b)}return!1}function JM(f,b,O,ie,Se,Ue){var ot=O&x,bt=s1(f),Dt=bt.length,hn=s1(b),dn=hn.length;if(Dt!=dn&&!ot)return!1;for(var _n=Dt;_n--;){var Gn=bt[_n];if(!(ot?Gn in b:ti.call(b,Gn)))return!1}var vr=Ue.get(f),Tr=Ue.get(b);if(vr&&Tr)return vr==b&&Tr==f;var pi=!0;Ue.set(f,b),Ue.set(b,f);for(var Dr=ot;++_n<Dt;){Gn=bt[_n];var Mi=f[Gn],Ri=b[Gn];if(ie)var vu=ot?ie(Ri,Mi,Gn,b,f,Ue):ie(Mi,Ri,Gn,f,b,Ue);if(!(vu===n?Mi===Ri||Se(Mi,Ri,O,ie,Ue):vu)){pi=!1;break}Dr||(Dr=Gn=="constructor")}if(pi&&!Dr){var El=f.constructor,yu=b.constructor;El!=yu&&"constructor"in f&&"constructor"in b&&!(typeof El=="function"&&El instanceof El&&typeof yu=="function"&&yu instanceof yu)&&(pi=!1)}return Ue.delete(f),Ue.delete(b),pi}function fh(f){return f1($w(f,n,Kw),f+"")}function s1(f){return nt(f,La,u1)}function o1(f){return nt(f,Wl,Bw)}var a1=Ji?function(f){return Ji.get(f)}:E1;function Jm(f){for(var b=f.name+"",O=Fo[b],ie=ti.call(Fo,b)?O.length:0;ie--;){var Se=O[ie],Ue=Se.func;if(Ue==null||Ue==f)return Se.name}return b}function Uf(f){var b=ti.call(Ie,"placeholder")?Ie:f;return b.placeholder}function Mr(){var f=Ie.iteratee||S1;return f=f===S1?lr:f,arguments.length?f(arguments[0],arguments[1]):f}function Qm(f,b){var O=f.__data__;return ok(b)?O[typeof b=="string"?"string":"hash"]:O.map}function l1(f){for(var b=La(f),O=b.length;O--;){var ie=b[O],Se=f[ie];b[O]=[ie,Se,jw(Se)]}return b}function zd(f,b){var O=Cs(f,b);return Tt(O)?O:n}function QM(f){var b=ti.call(f,el),O=f[el];try{f[el]=n;var ie=!0}catch{}var Se=Pi.call(f);return ie&&(b?f[el]=O:delete f[el]),Se}var u1=wa?function(f){return f==null?[]:(f=Ei(f),ya(wa(f),function(b){return $i.call(f,b)}))}:P1,Bw=wa?function(f){for(var b=[];f;)Jo(b,u1(f)),f=$a(f);return b}:P1,il=st;(zn&&il(new zn(new ArrayBuffer(1)))!=bn||or&&il(new or)!=ee||$r&&il($r.resolve())!=Ce||Ps&&il(new Ps)!=Ye||as&&il(new as)!=ut)&&(il=function(f){var b=st(f),O=b==ze?f.constructor:n,ie=O?$d(O):"";if(ie)switch(ie){case ah:return bn;case Va:return ee;case xa:return Ce;case ha:return Ye;case Od:return ut}return b});function ek(f,b,O){for(var ie=-1,Se=O.length;++ie<Se;){var Ue=O[ie],ot=Ue.size;switch(Ue.type){case"drop":f+=ot;break;case"dropRight":b-=ot;break;case"take":b=Pe(b,f+ot);break;case"takeRight":f=le(f,b-ot);break}}return{start:f,end:b}}function tk(f){var b=f.match(En);return b?b[1].split(Un):[]}function Rw(f,b,O){b=lc(b,f);for(var ie=-1,Se=b.length,Ue=!1;++ie<Se;){var ot=Bc(b[ie]);if(!(Ue=f!=null&&O(f,ot)))break;f=f[ot]}return Ue||++ie!=Se?Ue:(Se=f==null?0:f.length,!!Se&&o0(Se)&&ph(ot,Se)&&(ri(f)||Vd(f)))}function nk(f){var b=f.length,O=new f.constructor(b);return b&&typeof f[0]=="string"&&ti.call(f,"index")&&(O.index=f.index,O.input=f.input),O}function Fw(f){return typeof f.constructor=="function"&&!Yp(f)?jo($a(f)):{}}function rk(f,b,O){var ie=f.constructor;switch(b){case tn:return n1(f);case X:case J:return new ie(+f);case bn:return zM(f,O);case et:case at:case it:case zt:case Kt:case Nn:case yn:case Dn:case er:return _w(f,O);case ee:return new ie;case se:case Ze:return new ie(f);case Ve:return $M(f);case Ye:return new ie;case _t:return VM(f)}}function ik(f,b){var O=b.length;if(!O)return f;var ie=O-1;return b[ie]=(O>1?"& ":"")+b[ie],b=b.join(O>2?", ":" "),f.replace(ft,`{
/* [wrapped with `+b+`] */
`)}function sk(f){return ri(f)||Vd(f)||!!(Ro&&f&&f[Ro])}function ph(f,b){var O=typeof f;return b=b??Q,!!b&&(O=="number"||O!="symbol"&&qn.test(f))&&f>-1&&f%1==0&&f<b}function Cl(f,b,O){if(!co(O))return!1;var ie=typeof b;return(ie=="number"?Hl(O)&&ph(b,O.length):ie=="string"&&b in O)?uc(O[b],f):!1}function c1(f,b){if(ri(f))return!1;var O=typeof f;return O=="number"||O=="symbol"||O=="boolean"||f==null||mu(f)?!0:Ds.test(f)||!Oo.test(f)||b!=null&&f in Ei(b)}function ok(f){var b=typeof f;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?f!=="__proto__":f===null}function h1(f){var b=Jm(f),O=Ie[b];if(typeof O!="function"||!(b in Hr.prototype))return!1;if(f===O)return!0;var ie=a1(O);return!!ie&&f===ie[0]}function ak(f){return!!Ws&&Ws in f}var lk=ja?gh:M1;function Yp(f){var b=f&&f.constructor,O=typeof b=="function"&&b.prototype||Fa;return f===O}function jw(f){return f===f&&!co(f)}function zw(f,b){return function(O){return O==null?!1:O[f]===b&&(b!==n||f in Ei(O))}}function uk(f){var b=i0(f,function(ie){return O.size===c&&O.clear(),ie}),O=b.cache;return b}function ck(f,b){var O=f[1],ie=b[1],Se=O|ie,Ue=Se<(k|A|pe),ot=ie==pe&&O==j||ie==pe&&O==N&&f[7].length<=b[8]||ie==(pe|N)&&b[7].length<=b[8]&&O==j;if(!(Ue||ot))return f;ie&k&&(f[2]=b[2],Se|=O&k?0:D);var bt=b[3];if(bt){var Dt=f[3];f[3]=Dt?xw(Dt,bt,b[4]):bt,f[4]=Dt?_o(f[3],d):b[4]}return bt=b[5],bt&&(Dt=f[5],f[5]=Dt?Lw(Dt,bt,b[6]):bt,f[6]=Dt?_o(f[5],d):b[6]),bt=b[7],bt&&(f[7]=bt),ie&pe&&(f[8]=f[8]==null?b[8]:Pe(f[8],b[8])),f[9]==null&&(f[9]=b[9]),f[0]=b[0],f[1]=Se,f}function hk(f){var b=[];if(f!=null)for(var O in Ei(f))b.push(O);return b}function dk(f){return Pi.call(f)}function $w(f,b,O){return b=le(b===n?f.length-1:b,0),function(){for(var ie=arguments,Se=-1,Ue=le(ie.length-b,0),ot=Nt(Ue);++Se<Ue;)ot[Se]=ie[b+Se];Se=-1;for(var bt=Nt(b+1);++Se<b;)bt[Se]=ie[Se];return bt[b]=O(ot),Li(f,this,bt)}}function Vw(f,b){return b.length<2?f:br(f,Vl(b,0,-1))}function fk(f,b){for(var O=f.length,ie=Pe(b.length,O),Se=Ul(f);ie--;){var Ue=b[ie];f[ie]=ph(Ue,O)?Se[Ue]:n}return f}function d1(f,b){if(!(b==="constructor"&&typeof f[b]=="function")&&b!="__proto__")return f[b]}var Uw=Ww(sc),Zp=oh||function(f,b){return gs.setTimeout(f,b)},f1=Ww(Um);function Hw(f,b,O){var ie=b+"";return f1(f,ik(ie,pk(tk(ie),O)))}function Ww(f){var b=0,O=0;return function(){var ie=ct(),Se=R-(ie-O);if(O=ie,Se>0){if(++b>=I)return arguments[0]}else b=0;return f.apply(n,arguments)}}function e0(f,b){var O=-1,ie=f.length,Se=ie-1;for(b=b===n?ie:b;++O<b;){var Ue=Rd(O,Se),ot=f[Ue];f[Ue]=f[O],f[O]=ot}return f.length=b,f}var Gw=uk(function(f){var b=[];return f.charCodeAt(0)===46&&b.push(""),f.replace(nr,function(O,ie,Se,Ue){b.push(Se?Ue.replace(Jn,"$1"):ie||O)}),b});function Bc(f){if(typeof f=="string"||mu(f))return f;var b=f+"";return b=="0"&&1/f==-1/0?"-0":b}function $d(f){if(f!=null){try{return za.call(f)}catch{}try{return f+""}catch{}}return""}function pk(f,b){return Us(K,function(O){var ie="_."+O[0];b&O[1]&&!Fl(f,ie)&&f.push(ie)}),f.sort()}function qw(f){if(f instanceof Hr)return f.clone();var b=new Zs(f.__wrapped__,f.__chain__);return b.__actions__=Ul(f.__actions__),b.__index__=f.__index__,b.__values__=f.__values__,b}function gk(f,b,O){(O?Cl(f,b,O):b===n)?b=1:b=le(hi(b),0);var ie=f==null?0:f.length;if(!ie||b<1)return[];for(var Se=0,Ue=0,ot=Nt(Gs(ie/b));Se<ie;)ot[Ue++]=Vl(f,Se,Se+=b);return ot}function mk(f){for(var b=-1,O=f==null?0:f.length,ie=0,Se=[];++b<O;){var Ue=f[b];Ue&&(Se[ie++]=Ue)}return Se}function vk(){var f=arguments.length;if(!f)return[];for(var b=Nt(f-1),O=arguments[0],ie=f;ie--;)b[ie-1]=arguments[ie];return Jo(ri(O)?Ul(O):[O],qe(b,1))}var yk=ci(function(f,b){return $o(f)?M(f,qe(b,1,$o,!0)):[]}),bk=ci(function(f,b){var O=Fu(b);return $o(O)&&(O=n),$o(f)?M(f,qe(b,1,$o,!0),Mr(O,2)):[]}),_k=ci(function(f,b){var O=Fu(b);return $o(O)&&(O=n),$o(f)?M(f,qe(b,1,$o,!0),n,O):[]});function wk(f,b,O){var ie=f==null?0:f.length;return ie?(b=O||b===n?1:hi(b),Vl(f,b<0?0:b,ie)):[]}function xk(f,b,O){var ie=f==null?0:f.length;return ie?(b=O||b===n?1:hi(b),b=ie-b,Vl(f,0,b<0?0:b)):[]}function Lk(f,b){return f&&f.length?hh(f,Mr(b,3),!0,!0):[]}function Sk(f,b){return f&&f.length?hh(f,Mr(b,3),!0):[]}function Ck(f,b,O,ie){var Se=f==null?0:f.length;return Se?(O&&typeof O!="number"&&Cl(f,b,O)&&(O=0,ie=Se),Ee(f,b,O,ie)):[]}function Yw(f,b,O){var ie=f==null?0:f.length;if(!ie)return-1;var Se=O==null?0:hi(O);return Se<0&&(Se=le(ie+Se,0)),Wt(f,Mr(b,3),Se)}function Zw(f,b,O){var ie=f==null?0:f.length;if(!ie)return-1;var Se=ie-1;return O!==n&&(Se=hi(O),Se=O<0?le(ie+Se,0):Pe(Se,ie-1)),Wt(f,Mr(b,3),Se,!0)}function Kw(f){var b=f==null?0:f.length;return b?qe(f,1):[]}function Ek(f){var b=f==null?0:f.length;return b?qe(f,re):[]}function Pk(f,b){var O=f==null?0:f.length;return O?(b=b===n?1:hi(b),qe(f,b)):[]}function Mk(f){for(var b=-1,O=f==null?0:f.length,ie={};++b<O;){var Se=f[b];ie[Se[0]]=Se[1]}return ie}function Xw(f){return f&&f.length?f[0]:n}function kk(f,b,O){var ie=f==null?0:f.length;if(!ie)return-1;var Se=O==null?0:hi(O);return Se<0&&(Se=le(ie+Se,0)),fn(f,b,Se)}function Ak(f){var b=f==null?0:f.length;return b?Vl(f,0,-1):[]}var Tk=ci(function(f){var b=Si(f,qh);return b.length&&b[0]===f[0]?be(b):[]}),Dk=ci(function(f){var b=Fu(f),O=Si(f,qh);return b===Fu(O)?b=n:O.pop(),O.length&&O[0]===f[0]?be(O,Mr(b,2)):[]}),Ok=ci(function(f){var b=Fu(f),O=Si(f,qh);return b=typeof b=="function"?b:n,b&&O.pop(),O.length&&O[0]===f[0]?be(O,n,b):[]});function Nk(f,b){return f==null?"":P.call(f,b)}function Fu(f){var b=f==null?0:f.length;return b?f[b-1]:n}function Ik(f,b,O){var ie=f==null?0:f.length;if(!ie)return-1;var Se=ie;return O!==n&&(Se=hi(O),Se=Se<0?le(ie+Se,0):Pe(Se,ie-1)),b===b?Ka(f,b,Se):Wt(f,Hn,Se,!0)}function Bk(f,b){return f&&f.length?Sl(f,hi(b)):n}var Rk=ci(Jw);function Jw(f,b){return f&&f.length&&b&&b.length?Bf(f,b):f}function Fk(f,b,O){return f&&f.length&&b&&b.length?Bf(f,b,Mr(O,2)):f}function jk(f,b,O){return f&&f.length&&b&&b.length?Bf(f,b,n,O):f}var zk=fh(function(f,b){var O=f==null?0:f.length,ie=In(f,b);return Bd(f,Si(b,function(Se){return ph(Se,O)?+Se:Se}).sort(ww)),ie});function $k(f,b){var O=[];if(!(f&&f.length))return O;var ie=-1,Se=[],Ue=f.length;for(b=Mr(b,3);++ie<Ue;){var ot=f[ie];b(ot,ie,f)&&(O.push(ot),Se.push(ie))}return Bd(f,Se),O}function p1(f){return f==null?f:cn.call(f)}function Vk(f,b,O){var ie=f==null?0:f.length;return ie?(O&&typeof O!="number"&&Cl(f,b,O)?(b=0,O=ie):(b=b==null?0:hi(b),O=O===n?ie:hi(O)),Vl(f,b,O)):[]}function Uk(f,b){return oc(f,b)}function Hk(f,b,O){return Wp(f,b,Mr(O,2))}function Wk(f,b){var O=f==null?0:f.length;if(O){var ie=oc(f,b);if(ie<O&&uc(f[ie],b))return ie}return-1}function Gk(f,b){return oc(f,b,!0)}function qk(f,b,O){return Wp(f,b,Mr(O,2),!0)}function Yk(f,b){var O=f==null?0:f.length;if(O){var ie=oc(f,b,!0)-1;if(uc(f[ie],b))return ie}return-1}function Zk(f){return f&&f.length?Gp(f):[]}function Kk(f,b){return f&&f.length?Gp(f,Mr(b,2)):[]}function Xk(f){var b=f==null?0:f.length;return b?Vl(f,1,b):[]}function Jk(f,b,O){return f&&f.length?(b=O||b===n?1:hi(b),Vl(f,0,b<0?0:b)):[]}function Qk(f,b,O){var ie=f==null?0:f.length;return ie?(b=O||b===n?1:hi(b),b=ie-b,Vl(f,b<0?0:b,ie)):[]}function eA(f,b){return f&&f.length?hh(f,Mr(b,3),!1,!0):[]}function tA(f,b){return f&&f.length?hh(f,Mr(b,3)):[]}var nA=ci(function(f){return Nc(qe(f,1,$o,!0))}),rA=ci(function(f){var b=Fu(f);return $o(b)&&(b=n),Nc(qe(f,1,$o,!0),Mr(b,2))}),iA=ci(function(f){var b=Fu(f);return b=typeof b=="function"?b:n,Nc(qe(f,1,$o,!0),n,b)});function sA(f){return f&&f.length?Nc(f):[]}function oA(f,b){return f&&f.length?Nc(f,Mr(b,2)):[]}function aA(f,b){return b=typeof b=="function"?b:n,f&&f.length?Nc(f,n,b):[]}function g1(f){if(!(f&&f.length))return[];var b=0;return f=ya(f,function(O){if($o(O))return b=le(O.length,b),!0}),ys(b,function(O){return Si(f,Cr(O))})}function Qw(f,b){if(!(f&&f.length))return[];var O=g1(f);return b==null?O:Si(O,function(ie){return Li(b,n,ie)})}var lA=ci(function(f,b){return $o(f)?M(f,b):[]}),uA=ci(function(f){return Bu(ya(f,$o))}),cA=ci(function(f){var b=Fu(f);return $o(b)&&(b=n),Bu(ya(f,$o),Mr(b,2))}),hA=ci(function(f){var b=Fu(f);return b=typeof b=="function"?b:n,Bu(ya(f,$o),n,b)}),dA=ci(g1);function fA(f,b){return ac(f||[],b||[],vt)}function pA(f,b){return ac(f||[],b||[],uh)}var gA=ci(function(f){var b=f.length,O=b>1?f[b-1]:n;return O=typeof O=="function"?(f.pop(),O):n,Qw(f,O)});function ex(f){var b=Ie(f);return b.__chain__=!0,b}function mA(f,b){return b(f),f}function t0(f,b){return b(f)}var vA=fh(function(f){var b=f.length,O=b?f[0]:0,ie=this.__wrapped__,Se=function(Ue){return In(Ue,f)};return b>1||this.__actions__.length||!(ie instanceof Hr)||!ph(O)?this.thru(Se):(ie=ie.slice(O,+O+(b?1:0)),ie.__actions__.push({func:t0,args:[Se],thisArg:n}),new Zs(ie,this.__chain__).thru(function(Ue){return b&&!Ue.length&&Ue.push(n),Ue}))});function yA(){return ex(this)}function bA(){return new Zs(this.value(),this.__chain__)}function _A(){this.__values__===n&&(this.__values__=px(this.value()));var f=this.__index__>=this.__values__.length,b=f?n:this.__values__[this.__index__++];return{done:f,value:b}}function wA(){return this}function xA(f){for(var b,O=this;O instanceof rc;){var ie=qw(O);ie.__index__=0,ie.__values__=n,b?Se.__wrapped__=ie:b=ie;var Se=ie;O=O.__wrapped__}return Se.__wrapped__=f,b}function LA(){var f=this.__wrapped__;if(f instanceof Hr){var b=f;return this.__actions__.length&&(b=new Hr(this)),b=b.reverse(),b.__actions__.push({func:t0,args:[p1],thisArg:n}),new Zs(b,this.__chain__)}return this.thru(p1)}function SA(){return Iu(this.__wrapped__,this.__actions__)}var CA=qm(function(f,b,O){ti.call(f,O)?++f[O]:Fn(f,O,1)});function EA(f,b,O){var ie=ri(f)?fu:oe;return O&&Cl(f,b,O)&&(b=n),ie(f,Mr(b,3))}function PA(f,b){var O=ri(f)?ya:rt;return O(f,Mr(b,3))}var MA=Pw(Yw),kA=Pw(Zw);function AA(f,b){return qe(n0(f,b),1)}function TA(f,b){return qe(n0(f,b),re)}function DA(f,b,O){return O=O===n?1:hi(O),qe(n0(f,b),O)}function tx(f,b){var O=ri(f)?Us:W;return O(f,Mr(b,3))}function nx(f,b){var O=ri(f)?va:ne;return O(f,Mr(b,3))}var OA=qm(function(f,b,O){ti.call(f,O)?f[O].push(b):Fn(f,O,[b])});function NA(f,b,O,ie){f=Hl(f)?f:Wf(f),O=O&&!ie?hi(O):0;var Se=f.length;return O<0&&(O=le(Se+O,0)),a0(f)?O<=Se&&f.indexOf(b,O)>-1:!!Se&&fn(f,b,O)>-1}var IA=ci(function(f,b,O){var ie=-1,Se=typeof b=="function",Ue=Hl(f)?Nt(f.length):[];return W(f,function(ot){Ue[++ie]=Se?Li(b,ot,O):$e(ot,b,O)}),Ue}),BA=qm(function(f,b,O){Fn(f,O,b)});function n0(f,b){var O=ri(f)?Si:Hi;return O(f,Mr(b,3))}function RA(f,b,O,ie){return f==null?[]:(ri(b)||(b=b==null?[]:[b]),O=ie?n:O,ri(O)||(O=O==null?[]:[O]),Oc(f,b,O))}var FA=qm(function(f,b,O){f[O?0:1].push(b)},function(){return[[],[]]});function jA(f,b,O){var ie=ri(f)?Za:qi,Se=arguments.length<3;return ie(f,Mr(b,4),O,Se,W)}function zA(f,b,O){var ie=ri(f)?vs:qi,Se=arguments.length<3;return ie(f,Mr(b,4),O,Se,ne)}function $A(f,b){var O=ri(f)?ya:rt;return O(f,s0(Mr(b,3)))}function VA(f){var b=ri(f)?Ft:Ff;return b(f)}function UA(f,b,O){(O?Cl(f,b,O):b===n)?b=1:b=hi(b);var ie=ri(f)?Pt:Vm;return ie(f,b)}function HA(f){var b=ri(f)?Zt:Hm;return b(f)}function WA(f){if(f==null)return 0;if(Hl(f))return a0(f)?ro(f):f.length;var b=il(f);return b==ee||b==Ye?f.size:_i(f).length}function GA(f,b,O){var ie=ri(f)?F:Wm;return O&&Cl(f,b,O)&&(b=n),ie(f,Mr(b,3))}var qA=ci(function(f,b){if(f==null)return[];var O=b.length;return O>1&&Cl(f,b[0],b[1])?b=[]:O>2&&Cl(b[0],b[1],b[2])&&(b=[b[0]]),Oc(f,qe(b,1),[])}),r0=Lo||function(){return gs.Date.now()};function YA(f,b){if(typeof b!="function")throw new Xi(o);return f=hi(f),function(){if(--f<1)return b.apply(this,arguments)}}function rx(f,b,O){return b=O?n:b,b=f&&b==null?f.length:b,dh(f,pe,n,n,n,n,b)}function ix(f,b){var O;if(typeof b!="function")throw new Xi(o);return f=hi(f),function(){return--f>0&&(O=b.apply(this,arguments)),f<=1&&(b=n),O}}var m1=ci(function(f,b,O){var ie=k;if(O.length){var Se=_o(O,Uf(m1));ie|=te}return dh(f,ie,b,O,Se)}),sx=ci(function(f,b,O){var ie=k|A;if(O.length){var Se=_o(O,Uf(sx));ie|=te}return dh(b,ie,f,O,Se)});function ox(f,b,O){b=O?n:b;var ie=dh(f,j,n,n,n,n,n,b);return ie.placeholder=ox.placeholder,ie}function ax(f,b,O){b=O?n:b;var ie=dh(f,Y,n,n,n,n,n,b);return ie.placeholder=ax.placeholder,ie}function lx(f,b,O){var ie,Se,Ue,ot,bt,Dt,hn=0,dn=!1,_n=!1,Gn=!0;if(typeof f!="function")throw new Xi(o);b=ju(b)||0,co(O)&&(dn=!!O.leading,_n="maxWait"in O,Ue=_n?le(ju(O.maxWait)||0,b):Ue,Gn="trailing"in O?!!O.trailing:Gn);function vr(Vo){var cc=ie,vh=Se;return ie=Se=n,hn=Vo,ot=f.apply(vh,cc),ot}function Tr(Vo){return hn=Vo,bt=Zp(Mi,b),dn?vr(Vo):ot}function pi(Vo){var cc=Vo-Dt,vh=Vo-hn,Px=b-cc;return _n?Pe(Px,Ue-vh):Px}function Dr(Vo){var cc=Vo-Dt,vh=Vo-hn;return Dt===n||cc>=b||cc<0||_n&&vh>=Ue}function Mi(){var Vo=r0();if(Dr(Vo))return Ri(Vo);bt=Zp(Mi,pi(Vo))}function Ri(Vo){return bt=n,Gn&&ie?vr(Vo):(ie=Se=n,ot)}function vu(){bt!==n&&zf(bt),hn=0,ie=Dt=Se=bt=n}function El(){return bt===n?ot:Ri(r0())}function yu(){var Vo=r0(),cc=Dr(Vo);if(ie=arguments,Se=this,Dt=Vo,cc){if(bt===n)return Tr(Dt);if(_n)return zf(bt),bt=Zp(Mi,b),vr(Dt)}return bt===n&&(bt=Zp(Mi,b)),ot}return yu.cancel=vu,yu.flush=El,yu}var ZA=ci(function(f,b){return C(f,1,b)}),KA=ci(function(f,b,O){return C(f,ju(b)||0,O)});function XA(f){return dh(f,$)}function i0(f,b){if(typeof f!="function"||b!=null&&typeof b!="function")throw new Xi(o);var O=function(){var ie=arguments,Se=b?b.apply(this,ie):ie[0],Ue=O.cache;if(Ue.has(Se))return Ue.get(Se);var ot=f.apply(this,ie);return O.cache=Ue.set(Se,ot)||Ue,ot};return O.cache=new(i0.Cache||nl),O}i0.Cache=nl;function s0(f){if(typeof f!="function")throw new Xi(o);return function(){var b=arguments;switch(b.length){case 0:return!f.call(this);case 1:return!f.call(this,b[0]);case 2:return!f.call(this,b[0],b[1]);case 3:return!f.call(this,b[0],b[1],b[2])}return!f.apply(this,b)}}function JA(f){return ix(2,f)}var QA=t1(function(f,b){b=b.length==1&&ri(b[0])?Si(b[0],Ur(Mr())):Si(qe(b,1),Ur(Mr()));var O=b.length;return ci(function(ie){for(var Se=-1,Ue=Pe(ie.length,O);++Se<Ue;)ie[Se]=b[Se].call(this,ie[Se]);return Li(f,this,ie)})}),v1=ci(function(f,b){var O=_o(b,Uf(v1));return dh(f,te,n,b,O)}),ux=ci(function(f,b){var O=_o(b,Uf(ux));return dh(f,ge,n,b,O)}),e6=fh(function(f,b){return dh(f,N,n,n,n,b)});function t6(f,b){if(typeof f!="function")throw new Xi(o);return b=b===n?b:hi(b),ci(f,b)}function n6(f,b){if(typeof f!="function")throw new Xi(o);return b=b==null?0:le(hi(b),0),ci(function(O){var ie=O[b],Se=Ru(O,0,b);return ie&&Jo(Se,ie),Li(f,this,Se)})}function r6(f,b,O){var ie=!0,Se=!0;if(typeof f!="function")throw new Xi(o);return co(O)&&(ie="leading"in O?!!O.leading:ie,Se="trailing"in O?!!O.trailing:Se),lx(f,b,{leading:ie,maxWait:b,trailing:Se})}function i6(f){return rx(f,1)}function s6(f,b){return v1(jd(b),f)}function o6(){if(!arguments.length)return[];var f=arguments[0];return ri(f)?f:[f]}function a6(f){return h(f,g)}function l6(f,b){return b=typeof b=="function"?b:n,h(f,g,b)}function u6(f){return h(f,p|g)}function c6(f,b){return b=typeof b=="function"?b:n,h(f,p|g,b)}function h6(f,b){return b==null||_(f,b,La(b))}function uc(f,b){return f===b||f!==f&&b!==b}var d6=Xm(gt),f6=Xm(function(f,b){return f>=b}),Vd=je(function(){return arguments}())?je:function(f){return So(f)&&ti.call(f,"callee")&&!$i.call(f,"callee")},ri=Nt.isArray,p6=Du?Ur(Du):He;function Hl(f){return f!=null&&o0(f.length)&&!gh(f)}function $o(f){return So(f)&&Hl(f)}function g6(f){return f===!0||f===!1||So(f)&&st(f)==X}var Yh=u||M1,m6=Oa?Ur(Oa):Ge;function v6(f){return So(f)&&f.nodeType===1&&!Kp(f)}function y6(f){if(f==null)return!0;if(Hl(f)&&(ri(f)||typeof f=="string"||typeof f.splice=="function"||Yh(f)||Hf(f)||Vd(f)))return!f.length;var b=il(f);if(b==ee||b==Ye)return!f.size;if(Yp(f))return!_i(f).length;for(var O in f)if(ti.call(f,O))return!1;return!0}function b6(f,b){return ht(f,b)}function _6(f,b,O){O=typeof O=="function"?O:n;var ie=O?O(f,b):n;return ie===n?ht(f,b,n,O):!!ie}function y1(f){if(!So(f))return!1;var b=st(f);return b==Te||b==De||typeof f.message=="string"&&typeof f.name=="string"&&!Kp(f)}function w6(f){return typeof f=="number"&&y(f)}function gh(f){if(!co(f))return!1;var b=st(f);return b==Je||b==de||b==he||b==ve}function cx(f){return typeof f=="number"&&f==hi(f)}function o0(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=Q}function co(f){var b=typeof f;return f!=null&&(b=="object"||b=="function")}function So(f){return f!=null&&typeof f=="object"}var hx=cu?Ur(cu):yt;function x6(f,b){return f===b||At(f,b,l1(b))}function L6(f,b,O){return O=typeof O=="function"?O:n,At(f,b,l1(b),O)}function S6(f){return dx(f)&&f!=+f}function C6(f){if(lk(f))throw new rr(s);return Tt(f)}function E6(f){return f===null}function P6(f){return f==null}function dx(f){return typeof f=="number"||So(f)&&st(f)==se}function Kp(f){if(!So(f)||st(f)!=ze)return!1;var b=$a(f);if(b===null)return!0;var O=ti.call(b,"constructor")&&b.constructor;return typeof O=="function"&&O instanceof O&&za.call(O)==Ii}var b1=hu?Ur(hu):ln;function M6(f){return cx(f)&&f>=-9007199254740991&&f<=Q}var fx=ua?Ur(ua):Wn;function a0(f){return typeof f=="string"||!ri(f)&&So(f)&&st(f)==Ze}function mu(f){return typeof f=="symbol"||So(f)&&st(f)==_t}var Hf=du?Ur(du):Xn;function k6(f){return f===n}function A6(f){return So(f)&&il(f)==ut}function T6(f){return So(f)&&st(f)==Vt}var D6=Xm(ni),O6=Xm(function(f,b){return f<=b});function px(f){if(!f)return[];if(Hl(f))return a0(f)?io(f):Ul(f);if(wr&&f[wr])return Io(f[wr]());var b=il(f),O=b==ee?$l:b==Ye?wo:Wf;return O(f)}function mh(f){if(!f)return f===0?f:0;if(f=ju(f),f===re||f===-1/0){var b=f<0?-1:1;return b*_e}return f===f?f:0}function hi(f){var b=mh(f),O=b%1;return b===b?O?b-O:b:0}function gx(f){return f?ar(hi(f),0,Qe):0}function ju(f){if(typeof f=="number")return f;if(mu(f))return we;if(co(f)){var b=typeof f.valueOf=="function"?f.valueOf():f;f=co(b)?b+"":b}if(typeof f!="string")return f===0?f:+f;f=Qo(f);var O=jr.test(f);return O||an.test(f)?uu(f.slice(2),O?2:8):Ln.test(f)?we:+f}function mx(f){return Ic(f,Wl(f))}function N6(f){return f?ar(hi(f),-9007199254740991,Q):f===0?f:0}function ss(f){return f==null?"":rl(f)}var I6=$f(function(f,b){if(Yp(b)||Hl(b)){Ic(b,La(b),f);return}for(var O in b)ti.call(b,O)&&vt(f,O,b[O])}),vx=$f(function(f,b){Ic(b,Wl(b),f)}),l0=$f(function(f,b,O,ie){Ic(b,Wl(b),f,ie)}),B6=$f(function(f,b,O,ie){Ic(b,La(b),f,ie)}),R6=fh(In);function F6(f,b){var O=jo(f);return b==null?O:gn(O,b)}var j6=ci(function(f,b){f=Ei(f);var O=-1,ie=b.length,Se=ie>2?b[2]:n;for(Se&&Cl(b[0],b[1],Se)&&(ie=1);++O<ie;)for(var Ue=b[O],ot=Wl(Ue),bt=-1,Dt=ot.length;++bt<Dt;){var hn=ot[bt],dn=f[hn];(dn===n||uc(dn,Fa[hn])&&!ti.call(f,hn))&&(f[hn]=Ue[hn])}return f}),z6=ci(function(f){return f.push(n,Nw),Li(yx,n,f)});function $6(f,b){return Mt(f,Mr(b,3),en)}function V6(f,b){return Mt(f,Mr(b,3),xn)}function U6(f,b){return f==null?f:wt(f,Mr(b,3),Wl)}function H6(f,b){return f==null?f:It(f,Mr(b,3),Wl)}function W6(f,b){return f&&en(f,Mr(b,3))}function G6(f,b){return f&&xn(f,Mr(b,3))}function q6(f){return f==null?[]:An(f,La(f))}function Y6(f){return f==null?[]:An(f,Wl(f))}function _1(f,b,O){var ie=f==null?n:br(f,b);return ie===n?O:ie}function Z6(f,b){return f!=null&&Rw(f,b,jt)}function w1(f,b){return f!=null&&Rw(f,b,Et)}var K6=kw(function(f,b,O){b!=null&&typeof b.toString!="function"&&(b=Pi.call(b)),f[b]=O},L1(Gl)),X6=kw(function(f,b,O){b!=null&&typeof b.toString!="function"&&(b=Pi.call(b)),ti.call(f,b)?f[b].push(O):f[b]=[O]},Mr),J6=ci($e);function La(f){return Hl(f)?Rt(f):_i(f)}function Wl(f){return Hl(f)?Rt(f,!0):Bi(f)}function Q6(f,b){var O={};return b=Mr(b,3),en(f,function(ie,Se,Ue){Fn(O,b(ie,Se,Ue),ie)}),O}function eT(f,b){var O={};return b=Mr(b,3),en(f,function(ie,Se,Ue){Fn(O,Se,b(ie,Se,Ue))}),O}var tT=$f(function(f,b,O){Ua(f,b,O)}),yx=$f(function(f,b,O,ie){Ua(f,b,O,ie)}),nT=fh(function(f,b){var O={};if(f==null)return O;var ie=!1;b=Si(b,function(Ue){return Ue=lc(Ue,f),ie||(ie=Ue.length>1),Ue}),Ic(f,o1(f),O),ie&&(O=h(O,p|v|g,KM));for(var Se=b.length;Se--;)ch(O,b[Se]);return O});function rT(f,b){return bx(f,s0(Mr(b)))}var iT=fh(function(f,b){return f==null?{}:Ha(f,b)});function bx(f,b){if(f==null)return{};var O=Si(o1(f),function(ie){return[ie]});return b=Mr(b),uo(f,O,function(ie,Se){return b(ie,Se[0])})}function sT(f,b,O){b=lc(b,f);var ie=-1,Se=b.length;for(Se||(Se=1,f=n);++ie<Se;){var Ue=f==null?n:f[Bc(b[ie])];Ue===n&&(ie=Se,Ue=O),f=gh(Ue)?Ue.call(f):Ue}return f}function oT(f,b,O){return f==null?f:uh(f,b,O)}function aT(f,b,O,ie){return ie=typeof ie=="function"?ie:n,f==null?f:uh(f,b,O,ie)}var _x=Dw(La),wx=Dw(Wl);function lT(f,b,O){var ie=ri(f),Se=ie||Yh(f)||Hf(f);if(b=Mr(b,4),O==null){var Ue=f&&f.constructor;Se?O=ie?new Ue:[]:co(f)?O=gh(Ue)?jo($a(f)):{}:O={}}return(Se?Us:en)(f,function(ot,bt,Dt){return b(O,ot,bt,Dt)}),O}function uT(f,b){return f==null?!0:ch(f,b)}function cT(f,b,O){return f==null?f:jf(f,b,jd(O))}function hT(f,b,O,ie){return ie=typeof ie=="function"?ie:n,f==null?f:jf(f,b,jd(O),ie)}function Wf(f){return f==null?[]:to(f,La(f))}function dT(f){return f==null?[]:to(f,Wl(f))}function fT(f,b,O){return O===n&&(O=b,b=n),O!==n&&(O=ju(O),O=O===O?O:0),b!==n&&(b=ju(b),b=b===b?b:0),ar(ju(f),b,O)}function pT(f,b,O){return b=mh(b),O===n?(O=b,b=0):O=mh(O),f=ju(f),Bt(f,b,O)}function gT(f,b,O){if(O&&typeof O!="boolean"&&Cl(f,b,O)&&(b=O=n),O===n&&(typeof b=="boolean"?(O=b,b=n):typeof f=="boolean"&&(O=f,f=n)),f===n&&b===n?(f=0,b=1):(f=mh(f),b===n?(b=f,f=0):b=mh(b)),f>b){var ie=f;f=b,b=ie}if(O||f%1||b%1){var Se=Gt();return Pe(f+Se*(b-f+Bl("1e-"+((Se+"").length-1))),b)}return Rd(f,b)}var mT=Vf(function(f,b,O){return b=b.toLowerCase(),f+(O?xx(b):b)});function xx(f){return x1(ss(f).toLowerCase())}function Lx(f){return f=ss(f),f&&f.replace(li,tc).replace(Ko,"")}function vT(f,b,O){f=ss(f),b=rl(b);var ie=f.length;O=O===n?ie:ar(hi(O),0,ie);var Se=O;return O-=b.length,O>=0&&f.slice(O,Se)==b}function yT(f){return f=ss(f),f&&cr.test(f)?f.replace(yr,wl):f}function bT(f){return f=ss(f),f&&No.test(f)?f.replace(Os,"\\$&"):f}var _T=Vf(function(f,b,O){return f+(O?"-":"")+b.toLowerCase()}),wT=Vf(function(f,b,O){return f+(O?" ":"")+b.toLowerCase()}),xT=Ew("toLowerCase");function LT(f,b,O){f=ss(f),b=hi(b);var ie=b?ro(f):0;if(!b||ie>=b)return f;var Se=(b-ie)/2;return Km(qs(Se),O)+f+Km(Gs(Se),O)}function ST(f,b,O){f=ss(f),b=hi(b);var ie=b?ro(f):0;return b&&ie<b?f+Km(b-ie,O):f}function CT(f,b,O){f=ss(f),b=hi(b);var ie=b?ro(f):0;return b&&ie<b?Km(b-ie,O)+f:f}function ET(f,b,O){return O||b==null?b=0:b&&(b=+b),Ot(ss(f).replace(lt,""),b||0)}function PT(f,b,O){return(O?Cl(f,b,O):b===n)?b=1:b=hi(b),Rf(ss(f),b)}function MT(){var f=arguments,b=ss(f[0]);return f.length<3?b:b.replace(f[1],f[2])}var kT=Vf(function(f,b,O){return f+(O?"_":"")+b.toLowerCase()});function AT(f,b,O){return O&&typeof O!="number"&&Cl(f,b,O)&&(b=O=n),O=O===n?Qe:O>>>0,O?(f=ss(f),f&&(typeof b=="string"||b!=null&&!b1(b))&&(b=rl(b),!b&&Ia(f))?Ru(io(f),0,O):f.split(b,O)):[]}var TT=Vf(function(f,b,O){return f+(O?" ":"")+x1(b)});function DT(f,b,O){return f=ss(f),O=O==null?0:ar(hi(O),0,f.length),b=rl(b),f.slice(O,O+b.length)==b}function OT(f,b,O){var ie=Ie.templateSettings;O&&Cl(f,b,O)&&(b=n),f=ss(f),b=l0({},b,ie,Ow);var Se=l0({},b.imports,ie.imports,Ow),Ue=La(Se),ot=to(Se,Ue),bt,Dt,hn=0,dn=b.interpolate||xi,_n="__p += '",Gn=pu((b.escape||xi).source+"|"+dn.source+"|"+(dn===Ai?Ct:xi).source+"|"+(b.evaluate||xi).source+"|$","g"),vr="//# sourceURL="+(ti.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Da+"]")+`
`;f.replace(Gn,function(Dr,Mi,Ri,vu,El,yu){return Ri||(Ri=vu),_n+=f.slice(hn,yu).replace(zi,xl),Mi&&(bt=!0,_n+=`' +
__e(`+Mi+`) +
'`),El&&(Dt=!0,_n+=`';
`+El+`;
__p += '`),Ri&&(_n+=`' +
((__t = (`+Ri+`)) == null ? '' : __t) +
'`),hn=yu+Dr.length,Dr}),_n+=`';
`;var Tr=ti.call(b,"variable")&&b.variable;if(!Tr)_n=`with (obj) {
`+_n+`
}
`;else if(Ut.test(Tr))throw new rr(a);_n=(Dt?_n.replace(Qt,""):_n).replace(Cn,"$1").replace(Mn,"$1;"),_n="function("+(Tr||"obj")+`) {
`+(Tr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(bt?", __e = _.escape":"")+(Dt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+_n+`return __p
}`;var pi=Cx(function(){return Pr(Ue,vr+"return "+_n).apply(n,ot)});if(pi.source=_n,y1(pi))throw pi;return pi}function NT(f){return ss(f).toLowerCase()}function IT(f){return ss(f).toUpperCase()}function BT(f,b,O){if(f=ss(f),f&&(O||b===n))return Qo(f);if(!f||!(b=rl(b)))return f;var ie=io(f),Se=io(b),Ue=bo(ie,Se),ot=Ou(ie,Se)+1;return Ru(ie,Ue,ot).join("")}function RT(f,b,O){if(f=ss(f),f&&(O||b===n))return f.slice(0,Xa(f)+1);if(!f||!(b=rl(b)))return f;var ie=io(f),Se=Ou(ie,io(b))+1;return Ru(ie,0,Se).join("")}function FT(f,b,O){if(f=ss(f),f&&(O||b===n))return f.replace(lt,"");if(!f||!(b=rl(b)))return f;var ie=io(f),Se=bo(ie,io(b));return Ru(ie,Se).join("")}function jT(f,b){var O=Z,ie=B;if(co(b)){var Se="separator"in b?b.separator:Se;O="length"in b?hi(b.length):O,ie="omission"in b?rl(b.omission):ie}f=ss(f);var Ue=f.length;if(Ia(f)){var ot=io(f);Ue=ot.length}if(O>=Ue)return f;var bt=O-ro(ie);if(bt<1)return ie;var Dt=ot?Ru(ot,0,bt).join(""):f.slice(0,bt);if(Se===n)return Dt+ie;if(ot&&(bt+=Dt.length-bt),b1(Se)){if(f.slice(bt).search(Se)){var hn,dn=Dt;for(Se.global||(Se=pu(Se.source,ss(Ht.exec(Se))+"g")),Se.lastIndex=0;hn=Se.exec(dn);)var _n=hn.index;Dt=Dt.slice(0,_n===n?bt:_n)}}else if(f.indexOf(rl(Se),bt)!=bt){var Gn=Dt.lastIndexOf(Se);Gn>-1&&(Dt=Dt.slice(0,Gn))}return Dt+ie}function zT(f){return f=ss(f),f&&xr.test(f)?f.replace(tr,Ja):f}var $T=Vf(function(f,b,O){return f+(O?" ":"")+b.toUpperCase()}),x1=Ew("toUpperCase");function Sx(f,b,O){return f=ss(f),b=O?n:b,b===n?ea(f)?Ba(f):pt(f):f.match(b)||[]}var Cx=ci(function(f,b){try{return Li(f,n,b)}catch(O){return y1(O)?O:new rr(O)}}),VT=fh(function(f,b){return Us(b,function(O){O=Bc(O),Fn(f,O,m1(f[O],f))}),f});function UT(f){var b=f==null?0:f.length,O=Mr();return f=b?Si(f,function(ie){if(typeof ie[1]!="function")throw new Xi(o);return[O(ie[0]),ie[1]]}):[],ci(function(ie){for(var Se=-1;++Se<b;){var Ue=f[Se];if(Li(Ue[0],this,ie))return Li(Ue[1],this,ie)}})}function HT(f){return m(h(f,p))}function L1(f){return function(){return f}}function WT(f,b){return f==null||f!==f?b:f}var GT=Mw(),qT=Mw(!0);function Gl(f){return f}function S1(f){return lr(typeof f=="function"?f:h(f,p))}function YT(f){return zo(h(f,p))}function ZT(f,b){return ic(f,h(b,p))}var KT=ci(function(f,b){return function(O){return $e(O,f,b)}}),XT=ci(function(f,b){return function(O){return $e(f,O,b)}});function C1(f,b,O){var ie=La(b),Se=An(b,ie);O==null&&!(co(b)&&(Se.length||!ie.length))&&(O=b,b=f,f=this,Se=An(b,La(b)));var Ue=!(co(O)&&"chain"in O)||!!O.chain,ot=gh(f);return Us(Se,function(bt){var Dt=b[bt];f[bt]=Dt,ot&&(f.prototype[bt]=function(){var hn=this.__chain__;if(Ue||hn){var dn=f(this.__wrapped__),_n=dn.__actions__=Ul(this.__actions__);return _n.push({func:Dt,args:arguments,thisArg:f}),dn.__chain__=hn,dn}return Dt.apply(f,Jo([this.value()],arguments))})}),f}function JT(){return gs._===this&&(gs._=bs),this}function E1(){}function QT(f){return f=hi(f),ci(function(b){return Sl(b,f)})}var eD=r1(Si),tD=r1(fu),nD=r1(F);function Ex(f){return c1(f)?Cr(Bc(f)):_s(f)}function rD(f){return function(b){return f==null?n:br(f,b)}}var iD=Aw(),sD=Aw(!0);function P1(){return[]}function M1(){return!1}function oD(){return{}}function aD(){return""}function lD(){return!0}function uD(f,b){if(f=hi(f),f<1||f>Q)return[];var O=Qe,ie=Pe(f,Qe);b=Mr(b),f-=Qe;for(var Se=ys(ie,b);++O<f;)b(O);return Se}function cD(f){return ri(f)?Si(f,Bc):mu(f)?[f]:Ul(Gw(ss(f)))}function hD(f){var b=++ba;return ss(f)+b}var dD=Zm(function(f,b){return f+b},0),fD=i1("ceil"),pD=Zm(function(f,b){return f/b},1),gD=i1("floor");function mD(f){return f&&f.length?ye(f,Gl,gt):n}function vD(f,b){return f&&f.length?ye(f,Mr(b,2),gt):n}function yD(f){return pr(f,Gl)}function bD(f,b){return pr(f,Mr(b,2))}function _D(f){return f&&f.length?ye(f,Gl,ni):n}function wD(f,b){return f&&f.length?ye(f,Mr(b,2),ni):n}var xD=Zm(function(f,b){return f*b},1),LD=i1("round"),SD=Zm(function(f,b){return f-b},0);function CD(f){return f&&f.length?Ci(f,Gl):0}function ED(f,b){return f&&f.length?Ci(f,Mr(b,2)):0}return Ie.after=YA,Ie.ary=rx,Ie.assign=I6,Ie.assignIn=vx,Ie.assignInWith=l0,Ie.assignWith=B6,Ie.at=R6,Ie.before=ix,Ie.bind=m1,Ie.bindAll=VT,Ie.bindKey=sx,Ie.castArray=o6,Ie.chain=ex,Ie.chunk=gk,Ie.compact=mk,Ie.concat=vk,Ie.cond=UT,Ie.conforms=HT,Ie.constant=L1,Ie.countBy=CA,Ie.create=F6,Ie.curry=ox,Ie.curryRight=ax,Ie.debounce=lx,Ie.defaults=j6,Ie.defaultsDeep=z6,Ie.defer=ZA,Ie.delay=KA,Ie.difference=yk,Ie.differenceBy=bk,Ie.differenceWith=_k,Ie.drop=wk,Ie.dropRight=xk,Ie.dropRightWhile=Lk,Ie.dropWhile=Sk,Ie.fill=Ck,Ie.filter=PA,Ie.flatMap=AA,Ie.flatMapDeep=TA,Ie.flatMapDepth=DA,Ie.flatten=Kw,Ie.flattenDeep=Ek,Ie.flattenDepth=Pk,Ie.flip=XA,Ie.flow=GT,Ie.flowRight=qT,Ie.fromPairs=Mk,Ie.functions=q6,Ie.functionsIn=Y6,Ie.groupBy=OA,Ie.initial=Ak,Ie.intersection=Tk,Ie.intersectionBy=Dk,Ie.intersectionWith=Ok,Ie.invert=K6,Ie.invertBy=X6,Ie.invokeMap=IA,Ie.iteratee=S1,Ie.keyBy=BA,Ie.keys=La,Ie.keysIn=Wl,Ie.map=n0,Ie.mapKeys=Q6,Ie.mapValues=eT,Ie.matches=YT,Ie.matchesProperty=ZT,Ie.memoize=i0,Ie.merge=tT,Ie.mergeWith=yx,Ie.method=KT,Ie.methodOf=XT,Ie.mixin=C1,Ie.negate=s0,Ie.nthArg=QT,Ie.omit=nT,Ie.omitBy=rT,Ie.once=JA,Ie.orderBy=RA,Ie.over=eD,Ie.overArgs=QA,Ie.overEvery=tD,Ie.overSome=nD,Ie.partial=v1,Ie.partialRight=ux,Ie.partition=FA,Ie.pick=iT,Ie.pickBy=bx,Ie.property=Ex,Ie.propertyOf=rD,Ie.pull=Rk,Ie.pullAll=Jw,Ie.pullAllBy=Fk,Ie.pullAllWith=jk,Ie.pullAt=zk,Ie.range=iD,Ie.rangeRight=sD,Ie.rearg=e6,Ie.reject=$A,Ie.remove=$k,Ie.rest=t6,Ie.reverse=p1,Ie.sampleSize=UA,Ie.set=oT,Ie.setWith=aT,Ie.shuffle=HA,Ie.slice=Vk,Ie.sortBy=qA,Ie.sortedUniq=Zk,Ie.sortedUniqBy=Kk,Ie.split=AT,Ie.spread=n6,Ie.tail=Xk,Ie.take=Jk,Ie.takeRight=Qk,Ie.takeRightWhile=eA,Ie.takeWhile=tA,Ie.tap=mA,Ie.throttle=r6,Ie.thru=t0,Ie.toArray=px,Ie.toPairs=_x,Ie.toPairsIn=wx,Ie.toPath=cD,Ie.toPlainObject=mx,Ie.transform=lT,Ie.unary=i6,Ie.union=nA,Ie.unionBy=rA,Ie.unionWith=iA,Ie.uniq=sA,Ie.uniqBy=oA,Ie.uniqWith=aA,Ie.unset=uT,Ie.unzip=g1,Ie.unzipWith=Qw,Ie.update=cT,Ie.updateWith=hT,Ie.values=Wf,Ie.valuesIn=dT,Ie.without=lA,Ie.words=Sx,Ie.wrap=s6,Ie.xor=uA,Ie.xorBy=cA,Ie.xorWith=hA,Ie.zip=dA,Ie.zipObject=fA,Ie.zipObjectDeep=pA,Ie.zipWith=gA,Ie.entries=_x,Ie.entriesIn=wx,Ie.extend=vx,Ie.extendWith=l0,C1(Ie,Ie),Ie.add=dD,Ie.attempt=Cx,Ie.camelCase=mT,Ie.capitalize=xx,Ie.ceil=fD,Ie.clamp=fT,Ie.clone=a6,Ie.cloneDeep=u6,Ie.cloneDeepWith=c6,Ie.cloneWith=l6,Ie.conformsTo=h6,Ie.deburr=Lx,Ie.defaultTo=WT,Ie.divide=pD,Ie.endsWith=vT,Ie.eq=uc,Ie.escape=yT,Ie.escapeRegExp=bT,Ie.every=EA,Ie.find=MA,Ie.findIndex=Yw,Ie.findKey=$6,Ie.findLast=kA,Ie.findLastIndex=Zw,Ie.findLastKey=V6,Ie.floor=gD,Ie.forEach=tx,Ie.forEachRight=nx,Ie.forIn=U6,Ie.forInRight=H6,Ie.forOwn=W6,Ie.forOwnRight=G6,Ie.get=_1,Ie.gt=d6,Ie.gte=f6,Ie.has=Z6,Ie.hasIn=w1,Ie.head=Xw,Ie.identity=Gl,Ie.includes=NA,Ie.indexOf=kk,Ie.inRange=pT,Ie.invoke=J6,Ie.isArguments=Vd,Ie.isArray=ri,Ie.isArrayBuffer=p6,Ie.isArrayLike=Hl,Ie.isArrayLikeObject=$o,Ie.isBoolean=g6,Ie.isBuffer=Yh,Ie.isDate=m6,Ie.isElement=v6,Ie.isEmpty=y6,Ie.isEqual=b6,Ie.isEqualWith=_6,Ie.isError=y1,Ie.isFinite=w6,Ie.isFunction=gh,Ie.isInteger=cx,Ie.isLength=o0,Ie.isMap=hx,Ie.isMatch=x6,Ie.isMatchWith=L6,Ie.isNaN=S6,Ie.isNative=C6,Ie.isNil=P6,Ie.isNull=E6,Ie.isNumber=dx,Ie.isObject=co,Ie.isObjectLike=So,Ie.isPlainObject=Kp,Ie.isRegExp=b1,Ie.isSafeInteger=M6,Ie.isSet=fx,Ie.isString=a0,Ie.isSymbol=mu,Ie.isTypedArray=Hf,Ie.isUndefined=k6,Ie.isWeakMap=A6,Ie.isWeakSet=T6,Ie.join=Nk,Ie.kebabCase=_T,Ie.last=Fu,Ie.lastIndexOf=Ik,Ie.lowerCase=wT,Ie.lowerFirst=xT,Ie.lt=D6,Ie.lte=O6,Ie.max=mD,Ie.maxBy=vD,Ie.mean=yD,Ie.meanBy=bD,Ie.min=_D,Ie.minBy=wD,Ie.stubArray=P1,Ie.stubFalse=M1,Ie.stubObject=oD,Ie.stubString=aD,Ie.stubTrue=lD,Ie.multiply=xD,Ie.nth=Bk,Ie.noConflict=JT,Ie.noop=E1,Ie.now=r0,Ie.pad=LT,Ie.padEnd=ST,Ie.padStart=CT,Ie.parseInt=ET,Ie.random=gT,Ie.reduce=jA,Ie.reduceRight=zA,Ie.repeat=PT,Ie.replace=MT,Ie.result=sT,Ie.round=LD,Ie.runInContext=Lt,Ie.sample=VA,Ie.size=WA,Ie.snakeCase=kT,Ie.some=GA,Ie.sortedIndex=Uk,Ie.sortedIndexBy=Hk,Ie.sortedIndexOf=Wk,Ie.sortedLastIndex=Gk,Ie.sortedLastIndexBy=qk,Ie.sortedLastIndexOf=Yk,Ie.startCase=TT,Ie.startsWith=DT,Ie.subtract=SD,Ie.sum=CD,Ie.sumBy=ED,Ie.template=OT,Ie.times=uD,Ie.toFinite=mh,Ie.toInteger=hi,Ie.toLength=gx,Ie.toLower=NT,Ie.toNumber=ju,Ie.toSafeInteger=N6,Ie.toString=ss,Ie.toUpper=IT,Ie.trim=BT,Ie.trimEnd=RT,Ie.trimStart=FT,Ie.truncate=jT,Ie.unescape=zT,Ie.uniqueId=hD,Ie.upperCase=$T,Ie.upperFirst=x1,Ie.each=tx,Ie.eachRight=nx,Ie.first=Xw,C1(Ie,function(){var f={};return en(Ie,function(b,O){ti.call(Ie.prototype,O)||(f[O]=b)}),f}(),{chain:!1}),Ie.VERSION=r,Us(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){Ie[f].placeholder=Ie}),Us(["drop","take"],function(f,b){Hr.prototype[f]=function(O){O=O===n?1:le(hi(O),0);var ie=this.__filtered__&&!b?new Hr(this):this.clone();return ie.__filtered__?ie.__takeCount__=Pe(O,ie.__takeCount__):ie.__views__.push({size:Pe(O,Qe),type:f+(ie.__dir__<0?"Right":"")}),ie},Hr.prototype[f+"Right"]=function(O){return this.reverse()[f](O).reverse()}}),Us(["filter","map","takeWhile"],function(f,b){var O=b+1,ie=O==z||O==V;Hr.prototype[f]=function(Se){var Ue=this.clone();return Ue.__iteratees__.push({iteratee:Mr(Se,3),type:O}),Ue.__filtered__=Ue.__filtered__||ie,Ue}}),Us(["head","last"],function(f,b){var O="take"+(b?"Right":"");Hr.prototype[f]=function(){return this[O](1).value()[0]}}),Us(["initial","tail"],function(f,b){var O="drop"+(b?"":"Right");Hr.prototype[f]=function(){return this.__filtered__?new Hr(this):this[O](1)}}),Hr.prototype.compact=function(){return this.filter(Gl)},Hr.prototype.find=function(f){return this.filter(f).head()},Hr.prototype.findLast=function(f){return this.reverse().find(f)},Hr.prototype.invokeMap=ci(function(f,b){return typeof f=="function"?new Hr(this):this.map(function(O){return $e(O,f,b)})}),Hr.prototype.reject=function(f){return this.filter(s0(Mr(f)))},Hr.prototype.slice=function(f,b){f=hi(f);var O=this;return O.__filtered__&&(f>0||b<0)?new Hr(O):(f<0?O=O.takeRight(-f):f&&(O=O.drop(f)),b!==n&&(b=hi(b),O=b<0?O.dropRight(-b):O.take(b-f)),O)},Hr.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},Hr.prototype.toArray=function(){return this.take(Qe)},en(Hr.prototype,function(f,b){var O=/^(?:filter|find|map|reject)|While$/.test(b),ie=/^(?:head|last)$/.test(b),Se=Ie[ie?"take"+(b=="last"?"Right":""):b],Ue=ie||/^find/.test(b);Se&&(Ie.prototype[b]=function(){var ot=this.__wrapped__,bt=ie?[1]:arguments,Dt=ot instanceof Hr,hn=bt[0],dn=Dt||ri(ot),_n=function(Mi){var Ri=Se.apply(Ie,Jo([Mi],bt));return ie&&Gn?Ri[0]:Ri};dn&&O&&typeof hn=="function"&&hn.length!=1&&(Dt=dn=!1);var Gn=this.__chain__,vr=!!this.__actions__.length,Tr=Ue&&!Gn,pi=Dt&&!vr;if(!Ue&&dn){ot=pi?ot:new Hr(this);var Dr=f.apply(ot,bt);return Dr.__actions__.push({func:t0,args:[_n],thisArg:n}),new Zs(Dr,Gn)}return Tr&&pi?f.apply(this,bt):(Dr=this.thru(_n),Tr?ie?Dr.value()[0]:Dr.value():Dr)})}),Us(["pop","push","shift","sort","splice","unshift"],function(f){var b=Ra[f],O=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",ie=/^(?:pop|shift)$/.test(f);Ie.prototype[f]=function(){var Se=arguments;if(ie&&!this.__chain__){var Ue=this.value();return b.apply(ri(Ue)?Ue:[],Se)}return this[O](function(ot){return b.apply(ri(ot)?ot:[],Se)})}}),en(Hr.prototype,function(f,b){var O=Ie[b];if(O){var ie=O.name+"";ti.call(Fo,ie)||(Fo[ie]=[]),Fo[ie].push({name:b,func:O})}}),Fo[Ym(n,A).name]=[{name:"wrapper",func:n}],Hr.prototype.clone=Vh,Hr.prototype.reverse=Af,Hr.prototype.value=Uh,Ie.prototype.at=vA,Ie.prototype.chain=yA,Ie.prototype.commit=bA,Ie.prototype.next=_A,Ie.prototype.plant=xA,Ie.prototype.reverse=LA,Ie.prototype.toJSON=Ie.prototype.valueOf=Ie.prototype.value=SA,Ie.prototype.first=Ie.prototype.head,wr&&(Ie.prototype[wr]=wA),Ie},oo=ta();ms?((ms.exports=oo)._=oo,mr._=oo):gs._=oo}).call(Pa)})(Yv,Yv.exports);var BE=Yv.exports;class Ga extends Zn.Polygon{constructor(n,r={}){super([],{...r,pmIgnore:!1,interactive:!0});Ke(this,"_width");Ke(this,"_height");Ke(this,"_center");Ke(this,"_rotation");Ke(this,"_isMapReady",!1);Ke(this,"properties");Ke(this,"_helperPoints",{corners:[],midPoints:[]});Ke(this,"_throttledUpdateProperties");const i=n instanceof Zn.LatLngBounds?n:Zn.latLngBounds(n);if(this._center=i.getCenter(),this._rotation=0,console.log("[Rectangle][constructor] Initialisation avec options:",{bounds:i,center:this._center,hasExplicitDimensions:!!(r.width&&r.height),width:r.width,height:r.height}),r.width&&r.height)this._width=r.width,this._height=r.height,console.log("[Rectangle][constructor] Utilisation des dimensions explicites:",{width:this._width,height:this._height});else{const s=i.getSouthWest(),o=i.getNorthEast();this._width=pn.measure("Rectangle.constructor.calculateWidth",()=>{const a=J1([s.lng,s.lat],[o.lng,s.lat],{units:"meters"});return Math.max(a,1)}),this._height=pn.measure("Rectangle.constructor.calculateHeight",()=>{const a=J1([s.lng,s.lat],[s.lng,o.lat],{units:"meters"});return Math.max(a,1)}),console.log("[Rectangle][constructor] Dimensions calculées depuis bounds:",{width:this._width,height:this._height})}(this._width<1||this._height<1)&&this._getPixelsPerMeter()>0&&(this._width=Math.max(this._width,1),this._height=Math.max(this._height,1),this._updatePolygonCoordinates()),this.properties=pn.measure("Rectangle.constructor.initProperties",()=>({type:"Rectangle",style:{...r,name:r.name||""},rotation:this._rotation})),this._throttledUpdateProperties=pn.measure("Rectangle.constructor.initThrottle",()=>BE.throttle(()=>{this.updateProperties()},100)),this.on("add",()=>{this._isMapReady=!0,this._updatePolygonCoordinates(),this.updateProperties()}),this.on("remove",()=>{this._isMapReady=!1})}_updatePolygonCoordinates(){pn.measure("Rectangle._updatePolygonCoordinates",()=>{if(!this._isMapReady||!this._map)return;console.log("[Rectangle][_updatePolygonCoordinates] Début mise à jour avec:",{width:this._width,height:this._height,center:this._center,rotation:this._rotation}),this._width=Math.max(this._width,1),this._height=Math.max(this._height,1);const n=this._width/2,r=this._height/2,i=i5([this._center.lng,this._center.lat],r,0,{units:"meters"}).geometry.coordinates,s=i5([this._center.lng,this._center.lat],n,90,{units:"meters"}).geometry.coordinates,o=Math.abs(i[1]-this._center.lat)*2,a=Math.abs(s[0]-this._center.lng)*2,l=[Zn.latLng(this._center.lat+o/2,this._center.lng-a/2),Zn.latLng(this._center.lat+o/2,this._center.lng+a/2),Zn.latLng(this._center.lat-o/2,this._center.lng+a/2),Zn.latLng(this._center.lat-o/2,this._center.lng-a/2)];if(this._rotation===0){this.setLatLngs(l);return}const c=this._map.latLngToContainerPoint(this._center),d=l.map(k=>this._map.latLngToContainerPoint(k)),p=-this._rotation*Math.PI/180,v=Math.cos(p),g=Math.sin(p),E=d.map(k=>{const A=k.x-c.x,D=k.y-c.y;return Zn.point(c.x+(A*v-D*g),c.y+(A*g+D*v))}).map(k=>this._map.containerPointToLatLng(k));console.log("[Rectangle][_updatePolygonCoordinates] Résultat final:",{corners:E,dimensions:{width:this._width,height:this._height}}),this.setLatLngs(E),this.fire("coordinates:updated",{corners:E,center:this._center,rotation:this._rotation,dimensions:{width:this._width,height:this._height}})})}_getPixelsPerMeter(){return pn.measure("Rectangle._getPixelsPerMeter",()=>{if(!this._isMapReady||!this._map)return 1;const n=Math.max(this._width/1e3,1e-4),r=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(Zn.latLng(this._center.lat,this._center.lng+n)).x-r.x,o=J1([this._center.lng,this._center.lat],[this._center.lng+n,this._center.lat],{units:"meters"}),a=Math.abs(s/o);return isNaN(a)||a<=0?(console.warn("[Rectangle][_getPixelsPerMeter] Ratio invalide, utilisation de la valeur par défaut"),1):a})}getRotatedCorners(){return pn.measure("Rectangle.getRotatedCorners",()=>{try{const n=this.getLatLngs();if(!n||!Array.isArray(n)||n.length===0){const r=this._width/2,i=this._height/2;return[Zn.latLng(this._center.lat+i,this._center.lng-r),Zn.latLng(this._center.lat+i,this._center.lng+r),Zn.latLng(this._center.lat-i,this._center.lng+r),Zn.latLng(this._center.lat-i,this._center.lng-r)]}return n[0]}catch(n){console.warn("Error in getRotatedCorners:",n);const r=this._width/2,i=this._height/2;return[Zn.latLng(this._center.lat+i,this._center.lng-r),Zn.latLng(this._center.lat+i,this._center.lng+r),Zn.latLng(this._center.lat-i,this._center.lng+r),Zn.latLng(this._center.lat-i,this._center.lng-r)]}})}getMidPoints(){return pn.measure("Rectangle.getMidPoints",()=>{try{const n=this.getRotatedCorners();if(!n||n.length<4){const i=this._width/2,s=this._height/2;return[Zn.latLng(this._center.lat+s,this._center.lng),Zn.latLng(this._center.lat,this._center.lng+i),Zn.latLng(this._center.lat-s,this._center.lng),Zn.latLng(this._center.lat,this._center.lng-i)]}if(!n.every(i=>i&&typeof i.lat=="number"&&typeof i.lng=="number"))throw new Error("Invalid corner coordinates");return[this._getMidPoint(n[3],n[0]),this._getMidPoint(n[0],n[1]),this._getMidPoint(n[1],n[2]),this._getMidPoint(n[2],n[3])]}catch(n){console.warn("Error in getMidPoints:",n);const r=this._width/2,i=this._height/2;return[Zn.latLng(this._center.lat+i,this._center.lng),Zn.latLng(this._center.lat,this._center.lng+r),Zn.latLng(this._center.lat-i,this._center.lng),Zn.latLng(this._center.lat,this._center.lng-r)]}})}_getMidPoint(n,r){return pn.measure("Rectangle._getMidPoint",()=>{if(!n||!r||typeof n.lat!="number"||typeof n.lng!="number"||typeof r.lat!="number"||typeof r.lng!="number")throw new Error("Invalid points for midpoint calculation");return Zn.latLng((n.lat+r.lat)/2,(n.lng+r.lng)/2)})}getCenter(){return pn.measure("Rectangle.getCenter",()=>this._center)}setCenter(n){pn.measure("Rectangle.setCenter",()=>{this._center=n,this._updatePolygonCoordinates(),this.updateProperties(),this.updateHelperPointPositions()})}getRotation(){return pn.measure("Rectangle.getRotation",()=>this._rotation)}setRotation(n,r=!1){pn.measure("Rectangle.setRotation",()=>{this._rotation=(n%360+360)%360,this._updatePolygonCoordinates(),r&&this.updateProperties(),this.updateHelperPointPositions(),this.fire("rotation:updated",{angle:this._rotation,corners:this.getRotatedCorners(),center:this._center})})}finalizeRotation(){pn.measure("Rectangle.finalizeRotation",()=>{this.updateProperties()})}getDimensions(){return pn.measure("Rectangle.getDimensions",()=>({width:this._width,height:this._height}))}setDimensions(n,r){pn.measure("Rectangle.setDimensions",()=>{console.log("[Rectangle][setDimensions] Début de la mise à jour des dimensions:",{oldWidth:this._width,oldHeight:this._height,newWidth:n,newHeight:r}),this._width=n,this._height=r,console.log("[Rectangle][setDimensions] Mise à jour des coordonnées du polygone"),this._updatePolygonCoordinates(),console.log("[Rectangle][setDimensions] Mise à jour des propriétés"),this.updateProperties(),console.log("[Rectangle][setDimensions] Émission de l'événement dimensions:updated"),this.fire("dimensions:updated",{width:this._width,height:this._height,corners:this.getRotatedCorners(),center:this._center}),this.updateHelperPointPositions()})}resizeFromCorner(n,r){pn.measure("Rectangle.resizeFromCorner",()=>{if(!(!this._isMapReady||!this._map))try{const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,a=s.y-i.y,l=-this._rotation*Math.PI/180,c=Math.cos(l),d=Math.sin(l),p=o*c-a*d,v=o*d+a*c,g=this._getPixelsPerMeter(),x=n===0||n===3?-1:1,E=n===0||n===1?1:-1,k=Math.max(Math.abs(p*2)/g,1),A=Math.max(Math.abs(v*2)/g,1),D=k*g/2,j=A*g/2,Y=x*D*c-E*j*d,te=x*D*d+E*j*c,ge=Zn.point(s.x-Y,s.y-te),pe=this._map.containerPointToLatLng(ge),Z=[Zn.point(ge.x-D,ge.y+j),Zn.point(ge.x+D,ge.y+j),Zn.point(ge.x+D,ge.y-j),Zn.point(ge.x-D,ge.y-j)].map(B=>{const I=B.x-ge.x,R=B.y-ge.y;return Zn.point(ge.x+(I*c-R*d),ge.y+(I*d+R*c))}).map(B=>this._map.containerPointToLatLng(B));this._width=k,this._height=A,this._center=pe,this.setLatLngs(Z),this.fire("coordinates:updated",{corners:Z,center:this._center,rotation:this._rotation})}catch(i){console.warn("Error in resizeFromCorner:",i)}})}resizeFromSide(n,r){pn.measure("Rectangle.resizeFromSide",()=>{if(!this._isMapReady||!this._map)return;const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,a=s.y-i.y,l=-this._rotation*Math.PI/180,c=Math.cos(l),d=Math.sin(l),p=o*c-a*d,v=o*d+a*c,g=this._getPixelsPerMeter();n%2===0?this._height=Math.abs(v*2)/g:this._width=Math.abs(p*2)/g,this._updatePolygonCoordinates(),this.updateProperties()})}moveFromCenter(n){pn.measure("Rectangle.moveFromCenter",()=>{this._center=n,this._updatePolygonCoordinates(),this.updateProperties()})}updateProperties(){pn.measure("Rectangle.updateProperties",()=>{var i,s,o;const n=this.getRotatedCorners(),r=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"";this.properties={...this.properties,width:this._width,height:this._height,surface:this._width*this._height,perimeter:2*(this._width+this._height),center:this._center,corners:n,midPoints:this.getMidPoints(),rotation:this._rotation,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:r}},this.fire("properties:updated",{shape:this,properties:this.properties,corners:n,midPoints:this.getMidPoints()})})}setName(n){pn.measure("Rectangle.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return pn.measure("Rectangle.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}generateHelperPoints(n,r="rgba(220, 38, 38, 0.5)",i="rgba(37, 99, 235, 0.5)"){pn.measure("Rectangle.generateHelperPoints",()=>{this.clearHelperPoints();const s=this.getRotatedCorners(),o=this.getMidPoints();this._helperPoints.corners=s.map(a=>Zn.circleMarker(a,{radius:5,color:r,fillColor:r,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-corner",pmIgnore:!0,interactive:!1}).addTo(n)),this._helperPoints.midPoints=o.map(a=>Zn.circleMarker(a,{radius:5,color:i,fillColor:i,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-midpoint",pmIgnore:!0,interactive:!1}).addTo(n))})}clearHelperPoints(){pn.measure("Rectangle.clearHelperPoints",()=>{this._helperPoints.corners.forEach(n=>{if(n&&n.remove)try{n.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de coin:",r)}}),this._helperPoints.midPoints.forEach(n=>{if(n&&n.remove)try{n.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de milieu:",r)}}),this._helperPoints.corners=[],this._helperPoints.midPoints=[]})}updateHelperPointPositions(){pn.measure("Rectangle.updateHelperPointPositions",()=>{if(this._helperPoints.corners.length===0&&this._helperPoints.midPoints.length===0)return;const n=this.getRotatedCorners(),r=this.getMidPoints();n.forEach((i,s)=>{this._helperPoints.corners[s]&&this._helperPoints.corners[s].setLatLng(i)}),r.forEach((i,s)=>{this._helperPoints.midPoints[s]&&this._helperPoints.midPoints[s].setLatLng(i)})})}findClosestHelperPoint(n){return pn.measure("Rectangle.findClosestHelperPoint",()=>{const r=this.getRotatedCorners(),i=this.getMidPoints(),s=[...r,...i];if(s.length===0)return null;let o=s[0],a=n.distanceTo(o);for(let l=1;l<s.length;l++){const c=n.distanceTo(s[l]);c<a&&(a=c,o=s[l])}return o})}toggleHelperPoints(n,r,i,s){pn.measure("Rectangle.toggleHelperPoints",()=>{r&&n?this.generateHelperPoints(n,i,s):this.clearHelperPoints()})}containsPoint(n){return pn.measure("Rectangle.containsPoint",()=>{const r=this.getRotatedCorners();if(r.length!==4)return!1;let i=!1;for(let s=0,o=r.length-1;s<r.length;o=s++){const a=r[s].lng,l=r[s].lat,c=r[o].lng,d=r[o].lat;l>n.lat!=d>n.lat&&n.lng<(c-a)*(n.lat-l)/(d-l)+a&&(i=!i)}return i})}}var ts=(t=>(t.PRIVATE="private",t.COMPANY="company",t.EMPLOYEE="employee",t.VISITOR="visitor",t))(ts||{});const wf=jp("notes",()=>{const t=St([]),e=St([]),n=Qn(()=>B=>t.value.find(I=>I.id===B)),r=Qn(()=>B=>{const I=t.value.find(R=>R.id===B);return I?I.color:"#6B7280"}),i=Qn(()=>B=>e.value.filter(I=>I.columnId===B).sort((I,R)=>I.order-R.order)),s=Qn(()=>t.value.find(B=>B.isDefault)||t.value[0]),o=Qn(()=>[...t.value].sort((B,I)=>B.order-I.order)),a=Qn(()=>B=>{const I=ma();if(!I.user)return!1;if(I.isAdmin)return!0;switch(B.accessLevel){case"private":return!0;case"company":return I.isAdmin||I.isEntreprise;case"employee":return I.isAdmin||I.isEntreprise||I.isSalarie;case"visitor":return I.isAdmin||I.isEntreprise||I.isSalarie||I.isVisiteur;default:return!1}}),l=Qn(()=>e.value.filter(B=>a.value(B))),c=Qn(()=>B=>l.value.filter(I=>I.columnId===B).sort((I,R)=>I.order-R.order));async function d(){console.log(`
[NotesStore][loadColumns] Initialisation des colonnes fixes...`);try{const B=[{id:"1",title:"Idées",color:"#8B5CF6",order:0,isDefault:!1},{id:"2",title:"À faire",color:"#F59E0B",order:1,isDefault:!0},{id:"3",title:"En cours",color:"#3B82F6",order:2,isDefault:!1},{id:"4",title:"Terminées",color:"#10B981",order:3,isDefault:!1},{id:"5",title:"Autres",color:"#6B7280",order:4,isDefault:!1}];t.value=B,console.log("[NotesStore][loadColumns] Colonnes fixes initialisées:",t.value)}catch(B){throw console.error("[NotesStore][loadColumns] Erreur:",B),B}}async function p(B){console.log(`
[NotesStore][addColumn] Fonction désactivée - Utilisation de colonnes fixes`)}async function v(B,I){console.log(`
[NotesStore][updateColumn] Mise à jour locale de la colonne:`,B,I);try{const R=t.value.findIndex(z=>z.id===B);R!==-1&&(t.value[R]={...t.value[R],...I},console.log("[NotesStore][updateColumn] État des colonnes après mise à jour:",t.value))}catch(R){throw console.error("[NotesStore][updateColumn] Erreur:",R),R}}async function g(B){console.log(`
[NotesStore][removeColumn] Fonction désactivée - Utilisation de colonnes fixes`)}async function x(B){console.log(`
[NotesStore][reorderColumns] FONCTION DÉSACTIVÉE - Le déplacement des colonnes n'est plus possible`)}function E(B){if(!B)return"private";switch(B.toLowerCase()){case"private":return"private";case"company":return"company";case"employee":return"employee";case"visitor":return"visitor";default:return console.warn(`[NotesStore] Niveau d'accès inconnu: ${B}, utilisation de PRIVATE par défaut`),"private"}}function k(B){if(!B.id)throw console.error("[NotesStore][addNote] Erreur: ID du backend manquant"),new Error("L'ID du backend est requis pour ajouter une note");const I=new Date().toISOString(),R=e.value.filter(V=>V.columnId===B.columnId),z=R.length>0?Math.max(...R.map(V=>V.order))+1:0,U=E(B.access_level);return console.log("[NotesStore][addNote] Ajout d'une note avec ID backend:",B.id,"et niveau d'accès:",U),e.value.push({...B,id:B.id,order:z,accessLevel:U,createdAt:I,updatedAt:I,comments:[],photos:[]}),B.id}function A(B,I){console.log(`
[NotesStore][updateNote] Mise à jour de la note:`,B,I);try{const R=e.value.findIndex(z=>z.id===B);R!==-1&&(I.color&&(I.style={...e.value[R].style,color:I.color,fillColor:I.color}),I.access_level&&(I.accessLevel=E(I.access_level),delete I.access_level),e.value[R]={...e.value[R],...I},console.log("[NotesStore][updateNote] Note mise à jour:",e.value[R]))}catch(R){throw console.error("[NotesStore][updateNote] Erreur:",R),R}}function D(B){e.value.findIndex(R=>R.id===B)!==-1?(console.log("[NotesStore][removeNote] Suppression de la note avec ID:",B),e.value=e.value.filter(R=>R.id!==B)):console.warn("[NotesStore][removeNote] Tentative de suppression d'une note inexistante avec ID:",B)}function j(B,I){const R=e.value.findIndex(z=>z.id===B);if(R!==-1){const z=e.value[R];if(z.columnId!==I){const V=e.value.filter(_e=>_e.columnId===I),re=V.length>0?Math.max(...V.map(_e=>_e.order))+1:0,Q={...z,columnId:I,order:re,updatedAt:new Date().toISOString()};e.value[R]=Q}else e.value[R]={...e.value[R],updatedAt:new Date().toISOString()}}}function Y(B,I){I.forEach((R,z)=>{const U=e.value.findIndex(V=>V.id===R&&V.columnId===B);U!==-1&&(e.value[U]={...e.value[U],order:z,updatedAt:new Date().toISOString()})})}function te(B){switch(B){case"private":return"Privé";case"company":return"Entreprise";case"employee":return"Salariés";case"visitor":return"Visiteurs";default:return"Inconnu"}}async function ge(B,I){try{const R=ma();if(!R.user)throw new Error("Vous devez être connecté pour ajouter un commentaire");if(!R.isEntreprise&&!R.isAdmin)throw new Error("Seules les entreprises peuvent ajouter des commentaires");if(!e.value.some(we=>we.id===B))throw new Error(`La note avec l'ID ${B} n'existe pas`);const V=(await Ea.addComment(B,I)).data,re=e.value.findIndex(we=>we.id===B);if(re===-1)return;const Q=e.value[re];Q.comments||(Q.comments=[]);const _e={id:V.id,text:V.text,createdAt:V.created_at,userId:V.user,userName:V.user_name,userRole:V.user_role};return Q.comments.push(_e),Q.updatedAt=new Date().toISOString(),e.value[re]={...Q},_e.id}catch(R){throw console.error("Erreur lors de l'ajout du commentaire:",R),R}}async function pe(B,I){try{const R=e.value.findIndex(V=>V.id===B);if(R===-1)throw new Error(`La note avec l'ID ${B} n'existe pas`);const z=e.value[R];if(!z.comments||z.comments.length===0)throw new Error("Aucun commentaire trouvé pour cette note");if(!z.comments.some(V=>V.id===I))throw new Error(`Le commentaire avec l'ID ${I} n'existe pas`);await Ea.deleteComment(B,I),z.comments=z.comments.filter(V=>V.id!==I),z.updatedAt=new Date().toISOString(),e.value[R]={...z}}catch(R){throw console.error("Erreur lors de la suppression du commentaire:",R),R}}async function N(B,I){try{if(I.id&&I.image){const R=e.value.findIndex(V=>V.id===B);if(R===-1)return;const z=e.value[R];z.photos||(z.photos=[]);const U={id:I.id,url:I.image,caption:I.caption,createdAt:I.created_at};return z.photos.push(U),z.updatedAt=new Date().toISOString(),e.value[R]={...z},U.id}else{const R=new FormData;R.append("image",I.url),I.caption&&R.append("caption",I.caption);const U=(await Ea.addPhoto(B,R)).data,V=e.value.findIndex(_e=>_e.id===B);if(V===-1)return;const re=e.value[V];re.photos||(re.photos=[]);const Q={id:U.id,url:U.image,caption:U.caption,createdAt:U.created_at};return re.photos.push(Q),re.updatedAt=new Date().toISOString(),e.value[V]={...re},Q.id}}catch(R){throw console.error("Erreur lors de l'ajout de la photo:",R),R}}async function $(B,I){try{await Ea.deletePhoto(B,I);const R=e.value.findIndex(V=>V.id===B);if(R===-1){console.error("[NotesStore] Note non trouvée pour la suppression de la photo");return}e.value[R].photos||(e.value[R].photos=[]);const z=e.value[R],U=(z.photos||[]).filter(V=>V.id!==I);e.value[R]={...z,photos:U,updatedAt:new Date().toISOString()},console.log("[NotesStore] Photo supprimée avec succès, photos restantes:",U.length)}catch(R){throw console.error("Erreur lors de la suppression de la photo:",R),R}}async function Z(B,I,R){try{await Ea.updatePhoto(B,I,{caption:R});const z=e.value.findIndex(re=>re.id===B);if(z===-1||!e.value[z].photos)return;const U=e.value[z],V=U.photos.findIndex(re=>re.id===I);if(V===-1)return;U.photos[V].caption=R,U.updatedAt=new Date().toISOString(),e.value[z]={...U}}catch(z){throw console.error("Erreur lors de la mise à jour de la légende:",z),z}}return{columns:t,notes:e,getColumnById:n,getColumnColor:r,getNotesByColumn:i,getDefaultColumn:s,getSortedColumns:o,hasAccessToNote:a,getAccessibleNotes:l,getAccessibleNotesByColumn:c,getAccessLevelLabel:te,loadColumns:d,addColumn:p,updateColumn:v,removeColumn:g,reorderColumns:x,addNote:k,updateNote:A,removeNote:D,moveNote:j,reorderNotes:Y,addComment:ge,removeComment:pe,addPhoto:N,removePhoto:$,updatePhoto:Z}});function g5(t){return`
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="36">
      <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${t||"#2b6451"}" />
    </svg>
  `}class Th extends $t.Marker{constructor(n,r={}){const i=r.color||"#2b6451";console.log("[GeoNote][constructor] Utilisation de la couleur:",i);const s=g5(i),o=$t.divIcon({html:`<div class="geo-note-marker">${s}</div>`,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});if(!document.getElementById("geo-note-style")){const l=document.createElement("style");l.id="geo-note-style",l.textContent=`
        .geo-note-icon {
          background: none !important;
          border: none !important;
        }
        .geo-note-marker {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
          transform-origin: center bottom;
        }
        .geo-note-marker svg {
          width: 24px;
          height: 36px;
          filter: drop-shadow(0px 1px 2px rgba(0, 0, 0, 0.5));
        }
      `,document.head.appendChild(l)}super(n,{icon:o,draggable:!1,autoPan:!0,riseOnHover:!0,bubblingMouseEvents:!1,interactive:!0,keyboard:!1});Ke(this,"properties");Ke(this,"_planSaved",!1);Ke(this,"_isMoving",!1);Ke(this,"_animateZoom",()=>{});Ke(this,"_onZoomStart",()=>{});Ke(this,"_zoomProtectionActive",!1);this.properties={type:"Note",name:r.name||"Note géolocalisée",description:r.description||"",columnId:r.columnId||"1",accessLevel:r.accessLevel||ts.PRIVATE,category:r.category||"forages",style:{color:r.color||"#2b6451",weight:r.weight||2,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity!==void 0?r.fillOpacity:.8,radius:r.radius||12},comments:[],photos:[],order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},console.log("[GeoNote][constructor] Note créée avec columnId:",this.properties.columnId),this.bindPopup(this.createPopupContent()),this.on("dblclick",this.onDoubleClick),this._protectFromZoomAnimationErrors(),this.on("add",l=>{if(l.target&&l.target._map){const c=l.target._map;c.off("zoomend",this.refreshIconStyle,this),c.off("moveend",this.refreshIconStyle,this),c.off("zoomstart",this._onZoomStart,this),c.off("zoomanim",this.updatePositionDuringZoom,this),c.on("zoomend",()=>this.refreshIconStyle()),c.on("moveend",()=>this.refreshIconStyle()),c.on("zoomstart",this._onZoomStart=()=>{setTimeout(()=>{this.updatePosition()},0)}),c.on("zoomanim",d=>this.updatePositionDuringZoom(d))}}),this.on("remove",()=>{this._map&&(this._map.off("zoomend",this.refreshIconStyle,this),this._map.off("moveend",this.refreshIconStyle,this),this._map.off("zoomstart",this._onZoomStart,this),this._map.off("zoomanim",this._animateZoom,this),this._map.off("zoomanim",this.updatePositionDuringZoom,this))}),window.addEventListener("geonote:updateStyle",l=>{const c=l.detail.noteId,d=this._dbId||this.properties.id;console.log("[GeoNote][updateStyle] Événement reçu pour noteId:",c,"Comparaison avec ID backend:",d),c===d&&(console.log("[GeoNote][updateStyle] Correspondance trouvée, mise à jour du style:",l.detail.style),this.setNoteStyle(l.detail.style),this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,...l.detail.style}),this.bindPopup(this.createPopupContent()))}),window.addEventListener("geonote:update",l=>{const c=l.detail.noteId,d=this._dbId||this.properties.id;console.log("[GeoNote][update] Événement reçu pour noteId:",c,"Comparaison avec ID backend:",d),c===d&&(console.log("[GeoNote][update] Correspondance trouvée, mise à jour des propriétés:",l.detail.properties),this.properties={...this.properties,name:l.detail.properties.name,description:l.detail.properties.description,columnId:l.detail.properties.columnId,accessLevel:l.detail.properties.accessLevel,style:l.detail.properties.style},this.setNoteStyle(l.detail.properties.style),this.bindPopup(this.createPopupContent()),console.log("[GeoNote][update] Propriétés mises à jour:",this.properties))}),console.log("[GeoNote][constructor] Note créée:",{location:n,name:this.properties.name,type:this.properties.type,style:this.properties.style})}createPopupContent(){const n=document.createElement("div");n.className="geo-note-popup",n.style.display="flex",n.style.flexDirection="column";const r=document.createElement("div");r.className="geo-note-header",n.appendChild(r);const i=document.createElement("div");i.className="geo-note-title",i.textContent=this.properties.name,r.appendChild(i);const s=document.createElement("div");s.className="geo-note-badges",r.appendChild(s);const o=document.createElement("div");o.className="geo-note-badge",o.style.backgroundColor=this.getColumnColor(this.properties.columnId),o.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5z" />
        <path d="M11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
      </svg>
      ${this.getColumnLabel(this.properties.columnId)}
    `,s.appendChild(o);const a=document.createElement("div");if(a.className="geo-note-badge",a.style.backgroundColor=this.getAccessLevelColor(this.properties.accessLevel),a.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
      </svg>
      ${this.getAccessLevelLabel(this.properties.accessLevel)}
    `,s.appendChild(a),this.properties.description&&this.properties.description.trim()!==""){const p=document.createElement("div");p.className="geo-note-content",n.appendChild(p);const v=document.createElement("div");v.className="geo-note-description",v.textContent=this.properties.description,p.appendChild(v)}const l=document.createElement("div");l.className="geo-note-buttons",l.style.display="flex",l.style.width="100%",l.style.marginTop="auto",l.style.borderTop="1px solid #E5E7EB",n.appendChild(l);const c=document.createElement("button");c.className="geo-note-edit-button",c.style.flex="1",c.style.height="36px",c.style.border="none",c.style.borderRight="1px solid #E5E7EB",c.style.background="transparent",c.style.color="#4B5563",c.style.fontSize="11px",c.style.fontWeight="500",c.style.display="flex",c.style.alignItems="center",c.style.justifyContent="center",c.style.cursor="pointer",c.style.padding="0",c.style.margin="0",c.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3 mr-1 inline-block align-text-bottom">
        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
      </svg>
      Éditer
    `,c.onclick=p=>{p.stopPropagation(),this.editNote()},l.appendChild(c);const d=document.createElement("button");return d.className="geo-note-open-button",d.style.flex="1",d.style.height="36px",d.style.border="none",d.style.background="transparent",d.style.color="#3B82F6",d.style.fontSize="11px",d.style.fontWeight="500",d.style.display="flex",d.style.alignItems="center",d.style.justifyContent="center",d.style.cursor="pointer",d.style.padding="0",d.style.margin="0",d.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3 mr-1 inline-block align-text-bottom">
        <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
      </svg>
      Itinéraire
    `,d.onclick=p=>{p.stopPropagation(),this.openInGoogleMaps()},l.appendChild(d),n}getColumnColor(n){return{1:"#8B5CF6",2:"#F59E0B",3:"#3B82F6",4:"#10B981",5:"#6B7280"}[n]||"#6B7280"}getColumnLabel(n){return{1:"Idées",2:"À faire",3:"En cours",4:"Terminées",5:"Autres"}[n]||"Colonne "+n}getAccessLevelLabel(n){switch(n){case ts.PRIVATE:return"Privé";case ts.COMPANY:return"Entreprise";case ts.EMPLOYEE:return"Salariés";case ts.VISITOR:return"Visiteurs";default:return"Inconnu"}}getAccessLevelColor(n){switch(n){case ts.PRIVATE:return"#9CA3AF";case ts.COMPANY:return"#EF4444";case ts.EMPLOYEE:return"#F59E0B";case ts.VISITOR:return"#10B981";default:return"#6B7280"}}onDoubleClick(n){$t.DomEvent.stopPropagation(n),this.editNote()}editNote(){this.closePopup();const n=this._dbId||this.properties.id||this._leaflet_id;console.log(`[GeoNote][editNote] Édition de note - ID backend: ${this._dbId}, ID properties: ${this.properties.id}, ID Leaflet: ${this._leaflet_id}, ID utilisé: ${n}`);const r={id:n,title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},columnId:this.properties.columnId||"1",accessLevel:this.properties.accessLevel||"company",style:this.properties.style||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:this.properties.comments||[],photos:this.properties.photos||[]};console.log("[GeoNote][editNote] Édition de note avec columnId:",r.columnId),console.log("[GeoNote] Émission de l'événement note:edit avec",r);const i=new CustomEvent("geonote:edit",{detail:{note:r,source:this}});window.dispatchEvent(i),this.fire("note:edit",{note:r,source:this})}openInGoogleMaps(){this.closePopup();const n=this.getLatLng().lat,r=this.getLatLng().lng,i=`https://www.google.com/maps/dir/?api=1&destination=${n},${r}`;window.open(i,"_blank")}updateProperties(){var i,s,o,a;let n=((i=this.properties.style)==null?void 0:i.color)||"#2b6451";if(n.startsWith("rgb")){const l=this.getElement();if(l){const c=l.querySelector(".geo-note-marker svg path");if(c){const d=c.getAttribute("fill");d&&(n=d,console.log("[GeoNote][updateProperties] Couleur identifiée à partir du SVG:",n))}}}(!n||n.startsWith("rgb"))&&(n="#2b6451",console.log("[GeoNote][updateProperties] Utilisation de la couleur par défaut:",n)),console.log("[GeoNote][updateProperties] Couleur finale utilisée:",n);const r=((s=this.properties.style)==null?void 0:s.radius)||12;this.properties.style={...this.properties.style,color:n,weight:((o=this.properties.style)==null?void 0:o.weight)||2,fillColor:n,fillOpacity:((a=this.properties.style)==null?void 0:a.fillOpacity)||.8,radius:r,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category},console.log("[GeoNote][updateProperties] Style mis à jour:",this.properties.style),this.bindPopup(this.createPopupContent())}setNoteStyle(n){console.log("[GeoNote][setNoteStyle] Mise à jour du style:",n);const r=n.color||n.fillColor||"#2b6451",i=n.fillColor||n.color||"#2b6451";console.log("[GeoNote][setNoteStyle] Nouvelles couleurs - stroke:",r,"fill:",i),this.updateIconForColor(i);const s=n._accessLevel||n.accessLevel||this.properties.accessLevel,o=n.category||this.properties.category;this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,...n,color:r,fillColor:i}),s&&this.properties.accessLevel!==s&&(this.properties.accessLevel=s,console.log("[GeoNote][setNoteStyle] Niveau d'accès mis à jour:",s)),o&&this.properties.category!==o&&(this.properties.category=o,console.log("[GeoNote][setNoteStyle] Catégorie mise à jour:",o)),this.refreshIconStyle(),console.log("[GeoNote][setNoteStyle] Mise à jour du popup"),this.bindPopup(this.createPopupContent())}refreshIconStyle(){const n=this.getElement();n&&(n.style.display="none",n.offsetHeight,n.style.display="",this.updatePosition())}updateIconForColor(n){try{console.log("[GeoNote][updateIconForColor] Utilisation de la couleur:",n);const r=g5(n),i=$t.divIcon({html:`<div class="geo-note-marker">${r}</div>`,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});this.setIcon(i),console.log("[GeoNote][updateIconForColor] Icône mise à jour avec la nouvelle couleur")}catch(r){console.error("[GeoNote][updateIconForColor] Erreur lors de la mise à jour de l'icône:",r)}}toBackendFormat(n){this.updateProperties();const r=this.getLatLng(),s={...{...this.properties.style,radius:this.properties.style.radius||12},_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel},o=this.properties.columnId||"1";return console.log("[GeoNote][toBackendFormat] Sauvegarde de note avec columnId:",o),{id:n,type_forme:"Note",data:{location:{type:"Point",coordinates:[r.lng,r.lat]},name:this.properties.name,description:this.properties.description,columnId:o,accessLevel:this.properties.accessLevel,category:this.properties.category||"forages",style:s,comments:this.properties.comments||[],photos:this.properties.photos||[],order:this.properties.order||0,createdAt:this.properties.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}}}updateFromBackendData(n){var l,c,d,p,v;console.log("[GeoNote][updateFromBackendData] Début de la mise à jour avec les données:",n),console.log("[GeoNote][updateFromBackendData] Couleur dans les données reçues:",{styleColor:(l=n.style)==null?void 0:l.color,styleFillColor:(c=n.style)==null?void 0:c.fillColor,styleObject:n.style}),this.properties.type="Note";const r=n.style?{...n.style,radius:n.style.radius||12}:this.properties.style;console.log("[GeoNote][updateFromBackendData] Style après traitement initial:",r);const i=((d=n.style)==null?void 0:d._accessLevel)||((p=n.style)==null?void 0:p.accessLevel)||n.accessLevel||this.properties.accessLevel||ts.PRIVATE;console.log("[GeoNote][updateFromBackendData] Niveau d'accès récupéré:",i);const s=((v=n.style)==null?void 0:v.category)||n.category||this.properties.category||"forages";console.log("[GeoNote][updateFromBackendData] Catégorie récupérée:",s);const o=n.columnId||this.properties.columnId||"1";console.log("[GeoNote][updateFromBackendData] Mise à jour de note avec columnId:",o);const a={...r,_accessLevel:i,accessLevel:i,category:s};this.properties={...this.properties,name:n.name||this.properties.name,description:n.description||this.properties.description,columnId:o,accessLevel:i,category:s,style:a,comments:n.comments||this.properties.comments||[],photos:n.photos||this.properties.photos||[],order:n.order||this.properties.order||0,createdAt:n.createdAt||this.properties.createdAt,updatedAt:n.updatedAt||new Date().toISOString()},this.setNoteStyle(a),this.bindPopup(this.createPopupContent()),console.log("[GeoNote][updateFromBackendData] Note mise à jour:",{name:this.properties.name,type:this.properties.type,category:this.properties.category,accessLevel:this.properties.accessLevel,style:this.properties.style})}static fromBackendData(n){var l,c,d,p,v,g,x,E;let r;if(typeof n.location=="object"&&!Array.isArray(n.location)&&n.location.type==="Point"){const k=n.location.coordinates;console.log("[GeoNote][fromBackendData] Coordonnées GeoJSON reçues:",k),r=[k[1],k[0]]}else if(Array.isArray(n.location)&&n.location.length===2)r=n.location;else throw new Error("Les données de la note ne contiennent pas de position valide");console.log("[GeoNote][fromBackendData] Création d'une note à partir des données:",n),console.log("[GeoNote][fromBackendData] Position utilisée:",r);const i=((l=n.style)==null?void 0:l._accessLevel)||((c=n.style)==null?void 0:c.accessLevel)||n.accessLevel||ts.PRIVATE;console.log("[GeoNote][fromBackendData] Niveau d'accès récupéré:",i,"Style:",n.style);const s=((d=n.style)==null?void 0:d.category)||n.category||"forages";console.log("[GeoNote][fromBackendData] Catégorie récupérée:",s),n.accessLevel=i,n.category=s;const o=n.columnId||"1";console.log("[GeoNote][fromBackendData] Création de note avec columnId:",o);const a=new Th(r,{name:n.name,description:n.description,columnId:o,accessLevel:i,category:n.category||"forages",color:(p=n.style)==null?void 0:p.color,weight:(v=n.style)==null?void 0:v.weight,fillColor:(g=n.style)==null?void 0:g.fillColor,fillOpacity:(x=n.style)==null?void 0:x.fillOpacity,radius:(E=n.style)==null?void 0:E.radius});return a.properties.type="Note",a.properties.comments=n.comments||[],a.properties.photos=n.photos||[],a.properties.order=n.order||0,a.properties.createdAt=n.createdAt||new Date().toISOString(),a.properties.updatedAt=n.updatedAt||new Date().toISOString(),n.style&&a.setNoteStyle(n.style),a.bindPopup(a.createPopupContent()),console.log("[GeoNote][fromBackendData] Note créée:",{location:r,name:a.properties.name,type:a.properties.type,category:a.properties.category,accessLevel:a.properties.accessLevel,style:a.properties.style}),a}async saveNote(n){var r,i,s,o,a,l,c;if(this._planSaved)return this._dbId||0;console.log("[GeoNote][saveNote] Sauvegarde directe de la note via l'API");try{this.updateProperties(),console.log("[GeoNote][saveNote] Couleur avant sauvegarde:",{styleColor:(r=this.properties.style)==null?void 0:r.color,styleFillColor:(i=this.properties.style)==null?void 0:i.fillColor});let d=((s=this.properties.style)==null?void 0:s.color)||"#2b6451";if(d.startsWith("rgb")){const x=this.getElement();if(x){const E=x.querySelector(".geo-note-marker svg path");if(E){const k=E.getAttribute("fill");k&&(d=k,console.log("[GeoNote][saveNote] Couleur identifiée à partir du SVG:",d))}}}const p={...this.properties.style,color:d,fillColor:d,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category};console.log("[GeoNote][saveNote] Style final pour l'envoi:",p);const v={title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},column:this.properties.columnId||"1",access_level:this.properties.accessLevel||"company",style:p,category:this.properties.category||"forages",comments:this.properties.comments||[],photos:this.properties.photos||[]};n&&(v.plan=n),console.log("[GeoNote][saveNote] Données à envoyer:",v),console.log("[GeoNote][saveNote] Couleur dans les données envoyées:",{styleColor:v.style.color,styleFillColor:v.style.fillColor});let g;return this._dbId?(g=(await Ea.updateNote(this._dbId,v)).data,console.log("[GeoNote][saveNote] Note mise à jour avec succès:",g),console.log("[GeoNote][saveNote] Couleur dans la réponse du backend (update):",{styleColor:(o=g.style)==null?void 0:o.color,styleFillColor:(a=g.style)==null?void 0:a.fillColor,styleObject:g.style}),this.bindPopup(this.createPopupContent())):(g=(await Ea.createNote(v)).data,console.log("[GeoNote][saveNote] Note créée avec succès:",g),console.log("[GeoNote][saveNote] Couleur dans la réponse du backend (create):",{styleColor:(l=g.style)==null?void 0:l.color,styleFillColor:(c=g.style)==null?void 0:c.fillColor,styleObject:g.style}),this.bindPopup(this.createPopupContent()),this._dbId=g.id,wf().addNote({...g,id:g.id,columnId:g.column,accessLevel:g.access_level})),this._planSaved=!0,g.id}catch(d){return console.error("[GeoNote][saveNote] Erreur lors de la sauvegarde de la note:",d),su().error("Erreur lors de la sauvegarde de la note"),0}}triggerPlanSave(){const n=localStorage.getItem("lastPlanId");n?(console.log(`[GeoNote][triggerPlanSave] Sauvegarde de la note avec le plan ${n}`),this.saveNote(parseInt(n))):(console.log("[GeoNote][triggerPlanSave] Aucun plan courant, sauvegarde sans association"),this.saveNote());const r=new CustomEvent("geonote:savePlan");window.dispatchEvent(r)}resetPlanSaveState(){this._planSaved=!1}moveTo(n){this.setLatLng(n),this.fire("note:moved",{latlng:n,note:this}),this.bindPopup(this.createPopupContent()),this._map&&this._map.invalidateSize(),this.triggerPlanSave()}startMoving(){this._isMoving=!0,this.closePopup(),this.fire("note:movestart",{latlng:this.getLatLng(),note:this})}finishMoving(){this._isMoving=!1,this.fire("note:moveend",{latlng:this.getLatLng(),note:this}),this.triggerPlanSave()}isMoving(){return this._isMoving}updatePositionDuringZoom(n){try{const r=this.getElement();if(!r||!this._map)return;if(!n||!n.center||n.zoom===void 0){console.warn("[GeoNote][updatePositionDuringZoom] Événement de zoom incomplet");return}const i=this._map.getZoomScale(n.zoom,this._map.getZoom()),s=this._map.latLngToLayerPoint(this.getLatLng());try{const o=this._map;if(typeof o._getCenterOffset!="function"||typeof o._getMapPanePos!="function")throw new Error("Méthodes internes de Leaflet non disponibles");const a=o._getCenterOffset(n.center).multiplyBy(-i).subtract(o._getMapPanePos());$t.DomUtil.setTransform(r,s.add(a),i)}catch(o){console.warn("[GeoNote][updatePositionDuringZoom] Erreur avec les méthodes internes:",o),setTimeout(()=>this.updatePosition(),50)}}catch(r){console.warn("[GeoNote][updatePositionDuringZoom] Erreur générale:",r),setTimeout(()=>this.updatePosition(),100)}}updatePosition(){try{const n=this.getElement();if(n&&this._map){const r=this._map.latLngToLayerPoint(this.getLatLng());$t.DomUtil.setPosition(n,r)}}catch(n){console.warn("[GeoNote][updatePosition] Erreur lors de la mise à jour de la position:",n)}}_protectFromZoomAnimationErrors(){this._zoomProtectionActive||(console.log("[GeoNote][_protectFromZoomAnimationErrors] Protection contre les erreurs d'animation de zoom activée"),this._animateZoom=n=>{try{if(!this._map)return;const r=this._map.getZoomScale(n.zoom,this._map.getZoom()),i=this._map.latLngToLayerPoint(this.getLatLng()),s=this.getElement();if(!s)return;try{const o=this._map,a=o._getCenterOffset(n.center).multiplyBy(-r).subtract(o._getMapPanePos());$t.DomUtil.setTransform(s,i.add(a),r)}catch{setTimeout(()=>this.updatePosition(),50)}}catch(r){console.warn("[GeoNote][_animateZoom] Erreur d'animation capturée:",r),setTimeout(()=>this.updatePosition(),100)}},this.on("add",()=>{this._map&&this._map.on("zoomanim",this._animateZoom)}),this._zoomProtectionActive=!0)}}function Lz(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function Sz(t){if(!t||typeof t!="object")return console.log("[DrawingStore] ElevationData invalide: pas un objet",{data:t}),!1;const e=Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2,n=typeof t.style=="object"&&t.style!==null,r=!t.elevationData||Array.isArray(t.elevationData)&&t.elevationData.every(i=>typeof i=="object"&&"distance"in i&&"elevation"in i);return e&&n&&r}function Cz(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function m5(t){var e,n,r,i,s,o,a,l,c,d,p,v,g,x,E,k,A,D,j,Y,te,ge,pe,N,$,Z,B;if(console.log("[DrawingStore] Conversion de la forme en élément",{type:(e=t.properties)==null?void 0:e.type,name:(r=(n=t.properties)==null?void 0:n.style)==null?void 0:r.name,properties:t.properties}),((i=t.properties)==null?void 0:i.type)==="Note"){const I=t.getLatLng();return{type_forme:"Note",data:{points:[[I.lng,I.lat]],style:{color:((s=t.properties.style)==null?void 0:s.color)||"#2b6451",weight:((o=t.properties.style)==null?void 0:o.weight)||3,opacity:((a=t.properties.style)==null?void 0:a.opacity)||1,fillColor:((l=t.properties.style)==null?void 0:l.fillColor)||"#2b6451",fillOpacity:((c=t.properties.style)==null?void 0:c.fillOpacity)||.2,name:((d=t.properties.style)==null?void 0:d.name)||""}}}}if(t instanceof Sd||((p=t.properties)==null?void 0:p.type)==="ElevationLine")return{type_forme:"ElevationLine",data:{points:t.getLatLngs().map(z=>[z.lng,z.lat]),style:{color:((v=t.properties.style)==null?void 0:v.color)||"#2b6451",weight:((g=t.properties.style)==null?void 0:g.weight)||4,opacity:((x=t.properties.style)==null?void 0:x.opacity)||.8,name:((E=t.properties.style)==null?void 0:E.name)||""},category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor",elevationData:t.properties.elevationData,minElevation:t.properties.minElevation,maxElevation:t.properties.maxElevation,elevationGain:t.properties.elevationGain,elevationLoss:t.properties.elevationLoss,averageSlope:t.properties.averageSlope,maxSlope:t.properties.maxSlope}};if(t instanceof cd||((k=t.properties)==null?void 0:k.type)==="Polygon")return{type_forme:"Polygon",data:{points:t.getLatLngs()[0].map(z=>[z.lng,z.lat]),style:{color:((A=t.properties.style)==null?void 0:A.color)||"#2b6451",weight:((D=t.properties.style)==null?void 0:D.weight)||3,opacity:((j=t.properties.style)==null?void 0:j.opacity)||1,fillColor:((Y=t.properties.style)==null?void 0:Y.fillColor)||"#2b6451",fillOpacity:((te=t.properties.style)==null?void 0:te.fillOpacity)||.2,name:((ge=t.properties.style)==null?void 0:ge.name)||""},category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor"}};if(t instanceof ia||((pe=t.properties)==null?void 0:pe.type)==="Line")return{type_forme:"Line",data:{points:t.getLatLngs().map(z=>[z.lng,z.lat]),category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor",style:{color:((N=t.properties.style)==null?void 0:N.color)||"#2b6451",weight:(($=t.properties.style)==null?void 0:$.weight)||3,opacity:((Z=t.properties.style)==null?void 0:Z.opacity)||1,name:((B=t.properties.style)==null?void 0:B.name)||""}}};throw new Error("Type de forme non reconnu")}function Ez(t){var e,n,r,i,s,o,a,l,c,d,p,v,g,x,E,k,A,D,j,Y,te,ge,pe,N,$,Z,B,I,R,z,U,V,re,Q,_e,we,Qe,ae,H,K,me,fe,he;switch(console.log("[DrawingStore] Conversion de l'élément stocké en forme",{element:t}),t.type_forme){case"Polygon":{const X=t.data;if(!Lz(X))return console.error("[DrawingStore] Données invalides pour Polygon"),null;const J=X.points.map(Je=>Zn.latLng(Je[1],Je[0])),De=((e=X.style)==null?void 0:e._accessLevel)||((n=X.style)==null?void 0:n.accessLevel)||X.accessLevel||"visitor";console.log("[DrawingStore] Polygon - Niveau d'accès récupéré:",De,"Style:",X.style),X.accessLevel=De;const Te=new cd([J],{color:((r=X.style)==null?void 0:r.color)||"#2b6451",weight:((i=X.style)==null?void 0:i.weight)||3,opacity:((s=X.style)==null?void 0:s.opacity)||1,fillColor:((o=X.style)==null?void 0:o.fillColor)||"#2b6451",fillOpacity:((a=X.style)==null?void 0:a.fillOpacity)||.2,dashArray:((l=X.style)==null?void 0:l.dashArray)||"",name:((c=X.style)==null?void 0:c.name)||"",category:X.category||"forages",accessLevel:De});return Te.updateProperties(),Te}case"ElevationLine":{const X=t.data;if(!Sz(X))return console.error("[DrawingStore] Données invalides pour ElevationLine"),null;const J=X.points.map(Je=>Zn.latLng(Je[1],Je[0])),De=((d=X.style)==null?void 0:d._accessLevel)||((p=X.style)==null?void 0:p.accessLevel)||X.accessLevel||"visitor";console.log("[DrawingStore] ElevationLine - Niveau d'accès récupéré:",De,"Style:",X.style),X.accessLevel=De;const Te=new Sd(J,{color:((v=X.style)==null?void 0:v.color)||"#2b6451",weight:((g=X.style)==null?void 0:g.weight)||4,opacity:((x=X.style)==null?void 0:x.opacity)||.8,name:((E=X.style)==null?void 0:E.name)||"",category:X.category||"forages",accessLevel:De});return Te.properties={type:"ElevationLine",category:X.category||"forages",accessLevel:De,style:{...X.style||{},name:((k=X.style)==null?void 0:k.name)||""},elevationData:X.elevationData,minElevation:X.minElevation,maxElevation:X.maxElevation,elevationGain:X.elevationGain,elevationLoss:X.elevationLoss,averageSlope:X.averageSlope,maxSlope:X.maxSlope,dataSource:"restored"},X.elevationData&&Te.updateElevationProfile(),console.log("[DrawingStore] ElevationLine restored:",{points:J.length,hasElevationData:!!X.elevationData,name:(A=X.style)==null?void 0:A.name,properties:Te.properties}),Te}case"Line":{const X=t.data;if(!Cz(X))return console.error("[DrawingStore] Données invalides pour Ligne"),null;const J=X.points.map(Je=>Zn.latLng(Je[1],Je[0])),De=((D=X.style)==null?void 0:D._accessLevel)||((j=X.style)==null?void 0:j.accessLevel)||X.accessLevel||"visitor";console.log("[DrawingStore] Line - Niveau d'accès récupéré:",De,"Style:",X.style),X.accessLevel=De;const Te=new ia(J,{...X.style||{},name:((Y=X.style)==null?void 0:Y.name)||"",category:X.category||"forages",accessLevel:De});return Te.updateProperties(),Te}case"Rectangle":{const X=t.data;if(console.log("[DrawingStore][convertStoredElementToShape] Restauration Rectangle:",{data:X,bounds:X.bounds,width:X.width,height:X.height,rotation:X.rotation}),!X.bounds)return console.error("[DrawingStore] Données de bounds manquantes pour Rectangle"),null;const J=new Zn.LatLngBounds(Zn.latLng(X.bounds.southWest[1],X.bounds.southWest[0]),Zn.latLng(X.bounds.northEast[1],X.bounds.northEast[0])),De=new Ga(J,{color:((te=X.style)==null?void 0:te.color)||"#2b6451",weight:((ge=X.style)==null?void 0:ge.weight)||3,opacity:((pe=X.style)==null?void 0:pe.opacity)||1,fillColor:((N=X.style)==null?void 0:N.fillColor)||"#2b6451",fillOpacity:(($=X.style)==null?void 0:$.fillOpacity)||.2,dashArray:((Z=X.style)==null?void 0:Z.dashArray)||"",name:((B=X.style)==null?void 0:B.name)||"",width:X.width,height:X.height});return X.rotation&&De.setRotation(X.rotation),console.log("[DrawingStore][convertStoredElementToShape] Rectangle restauré:",{bounds:De.getBounds(),dimensions:De.getDimensions(),properties:De.properties}),De}case"Circle":{console.log("[DrawingStore] Traitement d'un Circle à partir de l'API",{id:t.id,data:t.data,hasName:((R=(I=t.data)==null?void 0:I.style)==null?void 0:R.name)!==void 0,name:(U=(z=t.data)==null?void 0:z.style)==null?void 0:U.name});const X=t.data;if(!X.center||!X.radius)return console.error("[DrawingStore] Données invalides pour Circle"),null;const J=Zn.circle([X.center[1],X.center[0]],{color:((V=X.style)==null?void 0:V.color)||"#2b6451",weight:((re=X.style)==null?void 0:re.weight)||3,opacity:((Q=X.style)==null?void 0:Q.opacity)||1,fillColor:((_e=X.style)==null?void 0:_e.fillColor)||"#2b6451",fillOpacity:((we=X.style)==null?void 0:we.fillOpacity)||.2,dashArray:((Qe=X.style)==null?void 0:Qe.dashArray)||"",radius:X.radius});return J.properties={type:"Circle",radius:X.radius,diameter:X.radius*2,surface:Math.PI*X.radius*X.radius,perimeter:2*Math.PI*X.radius,style:{...X.style||{},name:((ae=X.style)==null?void 0:ae.name)||""}},console.log("[DrawingStore] Cercle créé:",{centerType:typeof X.center,center:X.center,radius:X.radius,style:J.properties.style,name:J.properties.style.name}),J}case"Note":{console.log("[DrawingStore] Traitement d'une Note à partir de l'API",{id:t.id,data:t.data});const X=t.data;if(!X.location)return console.error("[DrawingStore] Données invalides pour Note"),null;try{const J={location:X.location,name:X.name||"Note géolocalisée",description:X.description||"",columnId:X.columnId||"en-cours",accessLevel:X.accessLevel||"private",category:X.category||"forages",style:{color:((H=X.style)==null?void 0:H.color)||"#2b6451",weight:((K=X.style)==null?void 0:K.weight)||2,fillColor:((me=X.style)==null?void 0:me.fillColor)||"#2b6451",fillOpacity:((fe=X.style)==null?void 0:fe.fillOpacity)||.8,radius:((he=X.style)==null?void 0:he.radius)||12},comments:X.comments||[],photos:X.photos||[],order:X.order||0,createdAt:X.createdAt||new Date().toISOString(),updatedAt:X.updatedAt||new Date().toISOString()};console.log("[DrawingStore] Données préparées pour la note:",J);const De=Th.fromBackendData(J);return De._dbId=t.id,console.log("[DrawingStore] Note créée:",{id:t.id,location:J.location,name:J.name,type:De.properties.type}),De}catch(J){return console.error("[DrawingStore] Erreur lors de la création de la Note:",J),null}}default:return console.warn("[DrawingStore] Type non géré pour la restauration:",t.type_forme),null}}const Tp=jp("drawing",{state:()=>({currentMapId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",filters:{accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}},currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null,performanceMonitor:Vp()}),getters:{hasUnsavedChanges:t=>t.unsavedChanges,getCurrentElements:t=>t.elements,getSelectedElement:t=>t.selectedElement,getCurrentTool:t=>t.currentTool,getCurrentStyle:t=>t.currentStyle,getLastUsedType:t=>t.lastUsedType,getFilters:t=>t.filters,getFilteredElements:t=>{if(t.elements.length===0)return console.log("[DrawingStore][getFilteredElements] Aucun élément dans le store, retour d'un tableau vide"),[];console.log("[DrawingStore][getFilteredElements] Début du filtrage avec",{totalElements:t.elements.length,filters:JSON.stringify({accessLevels:t.filters.accessLevels,categories:t.filters.categories,shapeTypes:t.filters.shapeTypes})}),console.log("[DrawingStore][getFilteredElements] Éléments dans le store:",t.elements.map(n=>({id:n.id,type_forme:n.type_forme,data:n.data?JSON.stringify(n.data):null})));const e=t.elements.filter(n=>{var l,c;if(console.log(`[DrawingStore][getFilteredElements] Vérification de l'élément ${n.id} (${n.type_forme})`),!(n.type_forme in t.filters.shapeTypes?t.filters.shapeTypes[n.type_forme]:!0))return console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} filtré par type: ${n.type_forme} (non visible)`),!1;const i=((l=n.data)==null?void 0:l.category)||"default";if(!(i in t.filters.categories?t.filters.categories[i]:!0))return console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} filtré par catégorie: ${i} (non visible)`),!1;const o=((c=n.data)==null?void 0:c.accessLevel)||"visitor";let a=!0;return o==="company"?a=t.filters.accessLevels.company:o==="employee"?a=t.filters.accessLevels.employee:o==="visitor"&&(a=t.filters.accessLevels.visitor),a?(console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} visible: type=${n.type_forme}, catégorie=${i}, accès=${o}`),!0):(console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} filtré par niveau d'accès: ${o} (non visible)`),!1)});return console.log("[DrawingStore][getFilteredElements] Résultat du filtrage:",{total:t.elements.length,filtered:e.length,filteredIds:e.map(n=>n.id)}),e}},actions:{setCurrentPlan(t){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentMapId=t,t===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},this.filters={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}},clearCurrentPlan(){(this.currentMapId!==null||this.elements.length>0)&&(this.currentMapId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null)},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(t){var n;const e=this.performanceMonitor.startMeasure("addElement","DrawingStore");try{if(console.log("[DrawingStore] Ajout d'un élément",{element:t,isLeafletLayer:t instanceof Zn.Layer,hasProperties:!!t.properties,properties:t.properties,type:(n=t.properties)==null?void 0:n.type}),t instanceof Zn.Layer&&t.properties){const r=this.performanceMonitor.measure("addElement_convert",()=>m5(t),"DrawingStore");console.log("[DrawingStore] Élément converti avant ajout",{original:t,converted:r,type:r.type_forme,data:r.data}),this.elements.push(r)}else!t.type_forme&&this.lastUsedType&&(t.type_forme=this.lastUsedType),this.elements.push(t);this.unsavedChanges=!0}finally{e()}},updateElement(t){const e=this.elements.findIndex(n=>n.id===t.id);if(e!==-1){const n=this.elements[e].type_forme;this.elements[e]={...t,type_forme:n},this.unsavedChanges=!0}},removeElement(t){const e=this.elements.findIndex(n=>n.id===t);e!==-1&&(this.elements.splice(e,1),this.unsavedChanges=!0)},selectElement(t){this.selectedElement=t},setCurrentTool(t){this.currentTool=t,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(t)&&(this.lastUsedType=t)},setCurrentStyle(t){if(!t||Object.keys(t).length===0){this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2};return}this.currentStyle={...this.currentStyle,...t}},updateFilters(t){if(t.accessLevels&&({...this.filters.accessLevels},this.filters.accessLevels={...this.filters.accessLevels,...t.accessLevels}),t.categories){const e={...this.filters.categories};this.filters.categories={...this.filters.categories,...t.categories};const n=Object.keys(t.categories).filter(r=>e[r]!==this.filters.categories[r]);if(n.length>0){const r=n.filter(i=>e[i]===!1&&this.filters.categories[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("categoriesReactivated",{detail:{categories:r}}))}}if(t.shapeTypes){const e={...this.filters.shapeTypes};this.filters.shapeTypes={...this.filters.shapeTypes,...t.shapeTypes};const n=Object.keys(t.shapeTypes).filter(r=>e[r]!==this.filters.shapeTypes[r]);if(n.length>0){const r=n.filter(i=>e[i]===!1&&this.filters.shapeTypes[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("shapeTypesReactivated",{detail:{shapeTypes:r}}))}}window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:this.filters}}))},async loadPlanElements(t){const e=this.performanceMonitor.startMeasure("loadPlanElements","DrawingStore");if(this.currentMapId===t&&this.elements.length>0)return console.log(`[DrawingStore] Plan ${t} déjà chargé avec ${this.elements.length} éléments`),e(),this.elements;this.loading=!0;try{console.log("[DrawingStore] Début du chargement du plan",{planId:t});const r=(await this.performanceMonitor.measureAsync("loadPlanElements_apiCall",()=>Bn.get(`/plans/${t}/`),"DrawingStore")).data;return console.log("[DrawingStore] Données du plan reçues",{formes:r.formes,preferences:r.preferences}),r.formes&&Array.isArray(r.formes)&&r.formes.forEach((i,s)=>{var o,a,l;console.log(`[DrawingStore] Analyse détaillée forme ${s}:`,{id:i.id,type_forme:i.type_forme,hasData:!!i.data,dataKeys:i.data?Object.keys(i.data):[],name:(o=i.data)==null?void 0:o.name,hasName:i.data&&"name"in i.data,centerType:(a=i.data)!=null&&a.center?typeof i.data.center:"undefined",center:(l=i.data)==null?void 0:l.center})}),this.elements=r.formes.map(i=>{var s;if(console.log("[DrawingStore] Traitement de la forme stockée",{id:i.id,type_forme:i.type_forme,data:i.data}),i.type_forme)return console.log("[DrawingStore] Forme déjà au format élément",{type_forme:i.type_forme,data:i.data,hasName:i.data&&"name"in i.data,name:(s=i.data)==null?void 0:s.name}),{id:i.id,type_forme:i.type_forme,data:i.data||{}};try{const o=Ez(i);if(o)return console.log("[DrawingStore] Forme convertie avec succès",{originalType:i.type_forme,convertedType:o.type,properties:o.properties}),m5(o)}catch(o){console.error("[DrawingStore] Erreur lors de la conversion de la forme",{error:o,forme:i})}return console.warn("[DrawingStore] Utilisation de la forme sans conversion",{type_forme:i.type_forme,data:i.data}),i}),console.log(`[DrawingStore] Plan ${t} - Chargé ${this.elements.length} éléments`,{elements:this.elements.map(i=>({id:i.id,type_forme:i.type_forme}))}),this.currentMapId=t,this.unsavedChanges=!1,r.preferences&&(console.log("[DrawingStore] Chargement des préférences",r.preferences),r.preferences.currentTool&&this.setCurrentTool(r.preferences.currentTool),r.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...r.preferences.currentStyle}),r.preferences.lastUsedType&&(this.lastUsedType=r.preferences.lastUsedType)),this.elements}catch(n){throw console.error("[DrawingStore] Erreur lors du chargement des éléments:",n),this.error="Erreur lors du chargement des éléments du plan",n}finally{this.loading=!1,e()}},async saveToPlan(t,e){const n=this.performanceMonitor.startMeasure("saveToPlan","DrawingStore");this.loading=!0;try{const r=t||this.currentMapId;if(console.log("[DrawingStore][saveToPlan] Début de la sauvegarde",{targetPlanId:r,currentPlanId:this.currentMapId,elementsCount:this.elements.length,elementsToDelete:e==null?void 0:e.elementsToDelete}),!r)throw new Error("Aucun plan sélectionné pour la sauvegarde");const i=this.performanceMonitor.measure("saveToPlan_prepareElements",()=>this.elements.map(l=>({...l,type_forme:l.type_forme||this.lastUsedType})),"DrawingStore"),s=(e==null?void 0:e.elementsToDelete)||[],o=`/plans/${r}/save_with_elements/`,a=await this.performanceMonitor.measureAsync("saveToPlan_apiCall",()=>Bn.post(o,{formes:i,connexions:[],annotations:[],elementsToDelete:s,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}}),"DrawingStore");return this.elements=this.performanceMonitor.measure("saveToPlan_processResponse",()=>{const l=new Set(s);return a.data.formes.filter(c=>!l.has(c.id)).map(c=>({...c,type_forme:c.type_forme}))},"DrawingStore"),console.log("[DrawingStore][saveToPlan] Éléments après filtrage:",{totalElements:this.elements.length,elementsToDelete:s}),this.unsavedChanges=!1,a.data}catch(r){throw console.error("[DrawingStore][saveToPlan] ERREUR:",r),console.error("[DrawingStore][saveToPlan] Stack trace:",r instanceof Error?r.stack:"No stack trace"),this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1,n()}}}}),RE=jp("mapFilters",{state:()=>({filters:[],loading:!1,error:null,performanceMonitor:Vp()}),getters:{getFilterById:t=>e=>t.filters.find(n=>n.id===e),getFiltersByCategory:t=>e=>t.filters.filter(n=>n.category===e),getUniqueCategories:t=>{const e=new Set;return t.filters.forEach(n=>e.add(n.category)),Array.from(e)}},actions:{async initializeStore(){await this.fetchFilters()},async fetchFilters(){const t=this.performanceMonitor.startMeasure("fetchFilters","MapFilterStore"),e=su();this.loading=!0,this.error=null;try{const n=await this.performanceMonitor.measureAsync("fetchFilters_apiCall",()=>_0.getFilters(),"MapFilterStore");return this.filters=n.data,this.filters}catch(n){throw this.error="Erreur lors du chargement des filtres",e.error("Impossible de charger les filtres de carte"),console.error("[MapFilterStore] Erreur lors du chargement des filtres:",n),n}finally{this.loading=!1,t()}},async createFilter(t){const e=this.performanceMonitor.startMeasure("createFilter","MapFilterStore");this.loading=!0,this.error=null;try{const n=await this.performanceMonitor.measureAsync("createFilter_apiCall",()=>_0.createFilter(t),"MapFilterStore");return this.filters.push(n.data),console.log("[MapFilterStore] Filtre créé avec succès:",n.data),n.data}catch(n){throw this.error="Erreur lors de la création du filtre",console.error("[MapFilterStore] Erreur lors de la création du filtre:",n),n}finally{this.loading=!1,e()}},async updateFilter(t,e){const n=this.performanceMonitor.startMeasure("updateFilter","MapFilterStore");this.loading=!0,this.error=null;try{const r=await this.performanceMonitor.measureAsync("updateFilter_apiCall",()=>_0.updateFilter(t,e),"MapFilterStore"),i=this.filters.findIndex(s=>s.id===t);return i!==-1&&(this.filters[i]=r.data),console.log("[MapFilterStore] Filtre mis à jour avec succès:",r.data),r.data}catch(r){throw this.error="Erreur lors de la mise à jour du filtre",console.error("[MapFilterStore] Erreur lors de la mise à jour du filtre:",r),r}finally{this.loading=!1,n()}},async deleteFilter(t){const e=this.performanceMonitor.startMeasure("deleteFilter","MapFilterStore");this.loading=!0,this.error=null;try{return await this.performanceMonitor.measureAsync("deleteFilter_apiCall",()=>_0.deleteFilter(t),"MapFilterStore"),this.filters=this.filters.filter(n=>n.id!==t),console.log("[MapFilterStore] Filtre supprimé avec succès:",t),!0}catch(n){throw this.error="Erreur lors de la suppression du filtre",console.error("[MapFilterStore] Erreur lors de la suppression du filtre:",n),n}finally{this.loading=!1,e()}}}}),Uy=jp("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[],performanceMonitor:Vp()}),getters:{getPlanById:t=>e=>t.plans.find(n=>n.id===e),hasUnsavedChanges:t=>t.unsavedChanges,getCurrentPlanHistory:t=>t.planHistory},actions:{async fetchPlans(){var n,r;const t=this.performanceMonitor.startMeasure("fetchPlans","IrrigationStore"),e=ma();this.loading=!0;try{let i="/plans/";const s={};e.isSalarie?s.salarie=(n=e.user)==null?void 0:n.id:e.isVisiteur&&(s.visiteur=(r=e.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlans_apiCall",()=>Bn.get(i,{params:s}),"IrrigationStore");this.plans=o.data}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,t()}},async fetchPlansWithDetails(){var n,r;const t=this.performanceMonitor.startMeasure("fetchPlansWithDetails","IrrigationStore"),e=ma();this.loading=!0;try{let i="/plans/";const s={include_details:!0};e.isSalarie?s.salarie=(n=e.user)==null?void 0:n.id:e.isVisiteur&&(s.visiteur=(r=e.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlansWithDetails_apiCall",()=>Bn.get(i,{params:s}),"IrrigationStore"),a=this.performanceMonitor.measure("fetchPlansWithDetails_processResponse",()=>o.data.map(l=>({...l,entreprise:typeof l.entreprise=="object"?l.entreprise:null,salarie:typeof l.salarie=="object"?l.salarie:null,visiteur:typeof l.visiteur=="object"?l.visiteur:null})),"IrrigationStore");return this.plans=a,{data:a}}catch(i){throw console.error("[IrrigationStore] Error fetching plans:",i),this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,t()}},async fetchClientPlans(t){this.loading=!0;try{return(await b0.getVisiteurPlans(t)).data}catch(e){throw this.error="Erreur lors du chargement des plans du client",e}finally{this.loading=!1}},async createPlan(t){var r;const e=this.performanceMonitor.startMeasure("createPlan","IrrigationStore");this.clearCurrentPlan(),this.loading=!0;const n=su();try{const i=ma();((r=i.user)==null?void 0:r.user_type)==="visiteur"&&(t={...t,visiteur:i.user.id,salarie_id:i.user.enterprise_id,entreprise_id:i.user.enterprise_id});const s=this.performanceMonitor.measure("createPlan_formatData",()=>({...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&t.entreprise&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&t.salarie&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&t.visiteur&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null}),"IrrigationStore"),o=await this.performanceMonitor.measureAsync("createPlan_apiCall",()=>b0.createPlan(s),"IrrigationStore");return this.plans.push(o.data),n.success(`Le plan "${o.data.nom}" a été créé avec succès`),o.data}catch(i){const s=i instanceof Error?i.message:String(i);throw console.error("Error creating plan:",s),this.error=s,n.error(`Erreur lors de la création du plan : ${s}`),i}finally{this.loading=!1,e()}},async createPlanForClient(t,e){this.clearCurrentPlan(),this.loading=!0;try{const n={...t,visiteur:e},r=await b0.createPlanForVisiteur(n);return this.plans.push(r.data),r.data}catch(n){const r=n instanceof Error?n.message:String(n);throw console.error("Error creating plan for client:",r),this.error="Erreur lors de la création du plan pour le client",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(t){const e=this.performanceMonitor.startMeasure("savePlan","IrrigationStore");if(!this.unsavedChanges){console.log("[IrrigationStore][savePlan] Aucun changement à sauvegarder"),e();return}this.loading=!0;try{const n=await this.performanceMonitor.measureAsync("savePlan_apiCall",()=>{var r;return Bn.patch(`/plans/${t}/`,{...this.currentPlan,version:((r=this.currentPlan)==null?void 0:r.version)||1})},"IrrigationStore");return this.performanceMonitor.measure("savePlan_updateState",()=>{var i;const r=this.plans.findIndex(s=>s.id===t);r!==-1&&(this.plans[r]=n.data),((i=this.currentPlan)==null?void 0:i.id)===t&&(this.currentPlan=n.data)},"IrrigationStore"),this.unsavedChanges=!1,n.data}catch(n){throw console.error("[IrrigationStore][savePlan] ERREUR:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1,e()}},async updatePlanDetails(t,e){const n=this.performanceMonitor.startMeasure("updatePlanDetails","IrrigationStore"),r=su();try{const i=await this.performanceMonitor.measureAsync("updatePlanDetails_apiCall",()=>{const{visiteur_id:s,salarie_id:o,entreprise_id:a,...l}=e,c={...l};return s!==void 0&&(c.visiteur_id=s),o!==void 0&&(c.salarie_id=o),a!==void 0&&(c.entreprise_id=a),Bn.patch(`/plans/${t}/`,c)},"IrrigationStore");return this.performanceMonitor.measure("updatePlanDetails_updateState",()=>{this.currentPlan&&this.currentPlan.id===t&&(this.currentPlan={...this.currentPlan,...i.data});const s=this.plans.findIndex(o=>o.id===t);s!==-1&&(this.plans[s]={...this.plans[s],...i.data})},"IrrigationStore"),i.data}catch(i){throw console.error("Erreur lors de la mise à jour du plan:",i),r.error(`Erreur lors de la mise à jour du plan : ${i instanceof Error?i.message:String(i)}`),i}finally{n()}},async fetchPlanHistory(t){this.loading=!0;try{const e=await Bn.get(`/plans/${t}/historique/`);return this.planHistory=e.data,e.data}catch(e){throw this.error="Erreur lors de la récupération de l'historique",e}finally{this.loading=!1}},async restorePlanVersion(t,e){var n;this.loading=!0;try{const r=await Bn.post(`/plans/${t}/restaurer/`,{version_id:e});((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=r.data);const i=this.plans.findIndex(s=>s.id===t);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(t){this.currentPlan=t,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(t){var n;this.loading=!0;const e=su();try{const r=this.plans.find(i=>i.id===t);await b0.deletePlan(t),this.plans=this.plans.filter(i=>i.id!==t),((n=this.currentPlan)==null?void 0:n.id)===t&&this.clearCurrentPlan(),e.success(`Le plan "${(r==null?void 0:r.nom)||""}" a été supprimé avec succès`)}catch(r){throw this.error="Erreur lors de la suppression du plan",e.error(`Erreur lors de la suppression du plan : ${r instanceof Error?r.message:String(r)}`),r}finally{this.loading=!1}}}}),Pz={class:"hidden md:hidden flex-mobile items-center justify-between p-4 border-b border-gray-200"},Mz={class:"flex-1 overflow-y-auto"},kz={class:"border-b border-gray-200"},Az={class:"flex -mb-px"},Tz={class:"flex-1 overflow-hidden flex flex-col"},Dz={key:0,class:"p-3 overflow-y-auto flex-1"},Oz={class:"grid grid-cols-4 gap-1.5 mb-4"},Nz=["onClick","title"],Iz=["innerHTML"],Bz={key:1,class:"my-4 border-t border-gray-200"},Rz={key:2,class:"mt-4"},Fz={key:0,class:"mb-4"},jz={class:"mb-4"},zz=["value"],$z={class:"mb-4"},Vz={class:"grid grid-cols-1 gap-4"},Uz={key:0,class:"space-y-1"},Hz={class:"flex justify-between items-center"},Wz={class:"text-sm font-medium text-gray-500"},Gz={class:"flex justify-between items-center"},qz={class:"text-sm font-medium text-gray-500"},Yz={class:"text-sm font-medium text-gray-500"},Zz={class:"flex flex-col space-y-2 w-full"},Kz={class:"flex justify-between items-center"},Xz={class:"text-sm font-medium text-gray-500 ml-2"},Jz={class:"flex justify-between items-center"},Qz={class:"text-sm font-medium text-gray-500 ml-2"},e$={class:"flex justify-between items-center"},t$={class:"text-sm font-medium text-gray-500 ml-2"},n$={class:"flex justify-between items-center"},r$={class:"text-sm font-medium text-gray-500 ml-2"},i$={class:"flex justify-between items-center"},s$={class:"text-sm font-medium text-gray-500 ml-2"},o$={ref:"elevationProfileContainer",class:"elevation-profile-container w-full h-48 bg-gray-50 rounded border border-gray-200 relative mt-4"},a$={ref:"elevationCanvas"},l$={key:1,class:"p-3 overflow-y-auto flex-1"},u$={class:"grid grid-cols-6 gap-2 mb-4"},c$=["onClick","title"],h$={key:0,class:"space-y-4"},d$={class:"flex items-center gap-4"},f$={class:"flex items-center gap-2"},p$={class:"flex items-center gap-4"},g$=["value"],m$={key:0,class:"flex items-center gap-4"},v$={class:"flex items-center gap-2"},y$={key:1,class:"space-y-4"},b$={class:"flex items-center gap-4"},_$={class:"flex items-center gap-2"},w$={class:"flex items-center gap-4"},x$={class:"flex items-center gap-2"},L$={key:2,class:"filters-tab"},S$={class:"filters-content"},C$={class:"space-y-2"},E$={class:"space-y-2 mt-4"},P$={class:"space-y-1"},M$={class:"flex items-center"},k$={class:"flex items-center"},A$={class:"flex items-center"},T$={class:"flex items-center"},D$={class:"flex items-center"},O$={class:"flex items-center"},N$={key:0,class:"flex items-center"},I$=["onUpdate:modelValue"],B$={class:"ml-2 text-sm text-gray-700"},R$={key:0,class:"mt-2 pt-2 border-t border-gray-200"},F$={class:"flex space-x-2"},j$=["disabled"],z$={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},$$={key:1,class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},V$={class:"space-y-2 mt-4"},U$={class:"space-y-1"},H$={class:"flex items-center"},W$={class:"flex items-center"},G$={class:"flex items-center"},q$={class:"flex items-center"},Y$={key:0,class:"p-3 border-t border-gray-200"},Z$={class:"mt-3"},K$={class:"mb-4"},X$={class:"grid grid-cols-2 gap-2"},J$={class:"grid grid-cols-2 gap-2"},Q$=js({__name:"DrawingTools",props:{show:{type:Boolean,default:!1},selectedTool:{type:String,default:""},selectedShape:{type:Object,default:null},allLayers:{type:Array,default:()=>[]},isDrawing:{type:Boolean,default:!1}},emits:["update:show","tool-selected","style-update","properties-update","delete-shape","filter-change","close-drawer"],setup(t,{emit:e}){const n=t,r=Tp(),i=ma(),s=Qn(()=>i.isAdmin),o=Qn(()=>i.isEntreprise),a=RE(),l=Uy(),c=ou({name:""}),d=St(!1),p=St(["forages","clients","entrepots","livraisons","cultures","parcelles"]),v=[{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"ElevationLine",label:"Profil altimétrique"},{type:"Note",label:"Note géolocalisée"}],g=Ce=>{switch(Ce){case"Polygon":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5l16 0l0 14l-16 0l0 -14z"/></svg>';case"Line":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20l16 -16"/></svg>';case"ElevationLine":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 20h18l-3-3l-4 4l-4-7l-4 4l-3-3"/></svg>';case"Note":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 2l4 4m-6 0l2-2 4 4-2 2-4-4z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h8" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14h4" /></svg>';default:return""}},x=St("tools");ki(()=>n.selectedTool,(Ce,ve)=>{console.log("[DrawingTools][watch selectedTool] Changement d'outil:",{newTool:Ce,oldTool:ve})}),ki(x,(Ce,ve)=>{console.log("[DrawingTools][watch activeTab] Changement d'onglet:",{newTab:Ce,oldTab:ve}),Ce==="filters"&&ve!=="filters"&&(console.log("[DrawingTools][watch activeTab] Passage à l'onglet filtres"),console.log("[DrawingTools][watch activeTab] État actuel des filtres dans le store:",JSON.stringify({accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}},null,2)),console.log("[DrawingTools][watch activeTab] État actuel des filtres locaux:",JSON.stringify({accessLevels:{...z.accessLevels},categories:{...z.categories},shapeTypes:{...z.shapeTypes}},null,2)),n.selectedShape&&(console.log("[DrawingTools][watch activeTab] Désélection de la forme actuelle lors du passage à l'onglet filtres"),ce("tool-selected","")),setTimeout(()=>{X()},0)),ve==="filters"&&Ce!=="filters"&&(console.log("[DrawingTools][watch activeTab] Sortie de l'onglet filtres, application des changements"),console.log("[DrawingTools][watch activeTab] État des filtres locaux avant application:",JSON.stringify({accessLevels:{...z.accessLevels},categories:{...z.categories},shapeTypes:{...z.shapeTypes}},null,2)),X())});const E=St({samplePoints:!0,circleSections:!0}),k=St("#2b6451"),A=St(2),D=St("solid"),j=St("#2b6451"),Y=St(.2),te=St(!0),ge=St(""),pe=St("default"),N=St("visitor"),$=St({radius:4,color:"#2b6451",fillOpacity:.6,weight:2}),Z=St({radius:6,color:"#EF4444",fillOpacity:.8,weight:2}),B=["#2b6451","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],I=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillés"}],R=St("company"),z=ou({accessLevels:{company:!0,employee:!1,visitor:!1},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}),U=Ce=>{console.log(`[DrawingTools][updateAccessLevelFilter] Changement du niveau d'accès: ${Ce}`),R.value=Ce,Ce==="company"?(z.accessLevels.company=!0,z.accessLevels.employee=!1,z.accessLevels.visitor=!1):Ce==="employee"?(z.accessLevels.company=!1,z.accessLevels.employee=!0,z.accessLevels.visitor=!1):Ce==="visitor"&&(z.accessLevels.company=!1,z.accessLevels.employee=!1,z.accessLevels.visitor=!0),X()},V=Ce=>{console.log(`[DrawingTools][updateAccessLevelFilterAndDeselect] Changement du niveau d'accès: ${Ce}`),n.selectedShape&&(console.log("[DrawingTools][updateAccessLevelFilterAndDeselect] Désélection de la forme actuelle"),ce("tool-selected","")),U(Ce)};console.log("[DrawingTools] Initialisation des filtres:",JSON.stringify({local:{accessLevels:{...z.accessLevels},categories:{...z.categories},shapeTypes:{...z.shapeTypes}},store:{accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}}},null,2));const re=Qn(()=>n.selectedShape&&n.selectedShape.properties||null),Q=Ce=>{E.value[Ce]=!E.value[Ce]},_e=Ce=>{k.value=Ce,j.value=Ce,we({strokeColor:Ce,fillColor:Ce})},we=Ce=>{n.selectedShape&&ce("style-update",Ce)},Qe=()=>{n.selectedShape&&ce("properties-update",{name:ge.value})},ae=()=>{n.selectedShape&&ce("properties-update",{category:pe.value})},H=()=>{n.selectedShape&&ce("properties-update",{accessLevel:N.value})},K=()=>{var Ce;!n.selectedShape||((Ce=re.value)==null?void 0:Ce.type)!=="ElevationLine"||ce("style-update",{samplePointStyle:$.value})},me=()=>{var Ce;!n.selectedShape||((Ce=re.value)==null?void 0:Ce.type)!=="ElevationLine"||ce("style-update",{minMaxPointStyle:Z.value})},fe=()=>{console.log("[DrawingTools][resetFilters] Début de la réinitialisation des filtres"),console.log("[DrawingTools][resetFilters] État actuel des filtres:",JSON.stringify({accessLevels:{...z.accessLevels},categories:{...z.categories},shapeTypes:{...z.shapeTypes}},null,2));const Ce={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}};console.log("[DrawingTools][resetFilters] Nouveaux filtres à appliquer:",JSON.stringify(Ce,null,2)),console.log("[DrawingTools][resetFilters] Mise à jour des filtres locaux"),z.accessLevels.company=!0,z.accessLevels.employee=!0,z.accessLevels.visitor=!0,z.categories.forages=!0,z.categories.clients=!0,z.categories.entrepots=!0,z.categories.livraisons=!0,z.categories.cultures=!0,z.categories.parcelles=!0,z.shapeTypes.Polygon=!0,z.shapeTypes.Line=!0,z.shapeTypes.ElevationLine=!0,z.shapeTypes.Note=!0,console.log("[DrawingTools][resetFilters] Filtres locaux après mise à jour:",JSON.stringify({accessLevels:{...z.accessLevels},categories:{...z.categories},shapeTypes:{...z.shapeTypes}},null,2)),console.log("[DrawingTools][resetFilters] Mise à jour des filtres dans le store"),r.updateFilters(Ce),console.log("[DrawingTools][resetFilters] Émission de l'event filter-change"),ce("filter-change",Ce),console.log("[DrawingTools][resetFilters] Mise à jour forcée de l'affichage"),console.log("[DrawingTools][resetFilters] Filtres réinitialisés avec succès")},he=()=>{console.log("[DrawingTools][resetFiltersAndDeselect] Début de la réinitialisation des filtres avec désélection"),de(),fe(),console.log("[DrawingTools][resetFiltersAndDeselect] Filtres réinitialisés et forme désélectionnée avec succès")},X=()=>{const Ce={...z.accessLevels},ve={...z.categories},Ve={...z.shapeTypes};console.log("[DrawingTools][applyFilters] Application des filtres:",JSON.stringify({accessLevels:Ce,categories:ve,shapeTypes:Ve},null,2));const Ye={accessLevels:Ce,categories:ve,shapeTypes:Ve};console.log("[DrawingTools][applyFilters] Envoi des filtres au store:",JSON.stringify(Ye,null,2)),r.updateFilters(Ye),console.log("[DrawingTools][applyFilters] Émission de l'event filter-change"),ce("filter-change",Ye),setTimeout(()=>{console.log("[DrawingTools][applyFilters] Mise à jour forcée de l'affichage"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:Ye}}))},0),console.log("[DrawingTools][applyFilters] Filtres appliqués avec succès")},J=Ce=>`${Math.round(Ce)} m`,De=Ce=>Ce>=1e4?`${(Ce/1e4).toFixed(2)} ha`:`${Math.round(Ce)} m²`,Te=Ce=>`${Ce.toFixed(1)}%`,Je=Ce=>p.value.includes(Ce)?Ce:Ce.split("_").map(ve=>ve.charAt(0).toUpperCase()+ve.slice(1)).join(" "),de=()=>{n.selectedShape&&(console.log("[DrawingTools][deselectCurrentShape] Désélection de la forme actuelle"),ce("tool-selected",""))};async function ee(){var Ce,ve;if(!(!c.name||d.value)){d.value=!0;try{const Ve=c.name.toLowerCase().replace(/\s+/g,"_"),Ye=l.currentPlan;let Ze=null;if(Ye!=null&&Ye.entreprise_id?Ze=Ye.entreprise_id:Ye!=null&&Ye.entreprise&&typeof Ye.entreprise=="object"&&"id"in Ye.entreprise?Ze=Ye.entreprise.id:(Ce=i.user)!=null&&Ce.enterprise_id?Ze=i.user.enterprise_id:i.isEntreprise&&((ve=i.user)!=null&&ve.id)&&(Ze=i.user.id),!Ze){console.error("[DrawingTools] Impossible de créer un filtre: ID d'entreprise non disponible");return}console.log("[DrawingTools] Création d'un filtre pour l'entreprise:",Ze);const _t=await a.createFilter({name:c.name,category:Ve,entreprise:Ze});console.log("[DrawingTools] Filtre créé avec succès:",_t),z.categories[Ve]||(console.log(`[DrawingTools] Ajout de la catégorie ${Ve} aux filtres locaux`),z.categories[Ve]=!0),console.log(`[DrawingTools] Mise à jour du DrawingStore avec la catégorie ${Ve}`);const We={...r.filters.categories};We[Ve]=!0,r.updateFilters({categories:We}),console.log("[DrawingTools] Émission de l'événement filter-change"),ce("filter-change",z),c.name=""}catch(Ve){console.error("[DrawingTools] Erreur lors de la création du filtre:",Ve)}finally{d.value=!1}}}const se=()=>{de(),x.value="filters"},ce=e;dm(()=>{var Ce,ve,Ve,Ye,Ze,_t,We;if(n.selectedShape){console.log("[DrawingTools][watchEffect] Mise à jour des propriétés pour la forme sélectionnée:",{type:n.selectedShape.type,properties:n.selectedShape.properties,options:n.selectedShape.options,layer:(Ce=n.selectedShape.layer)==null?void 0:Ce._leaflet_id});const ut=n.selectedShape.options||{};k.value=ut.color||"#2b6451",A.value=ut.weight||3,D.value=ut.dashArray?"dashed":"solid",j.value=ut.fillColor||"#2b6451",Y.value=ut.fillOpacity||.2;const Vt=n.selectedShape.type||((ve=n.selectedShape.properties)==null?void 0:ve.type)||"";te.value=Vt!=="Line",console.log("[DrawingTools][watchEffect] Type de forme détecté:",Vt),ge.value=((Ve=n.selectedShape.properties)==null?void 0:Ve.name)||"",pe.value=((Ye=n.selectedShape.properties)==null?void 0:Ye.category)||"forages",N.value=((Ze=n.selectedShape.properties)==null?void 0:Ze.accessLevel)||"visitor",Vt==="ElevationLine"&&((_t=n.selectedShape.properties)!=null&&_t.samplePointStyle&&($.value={...n.selectedShape.properties.samplePointStyle}),(We=n.selectedShape.properties)!=null&&We.minMaxPointStyle&&(Z.value={...n.selectedShape.properties.minMaxPointStyle})),console.log("[DrawingTools][watchEffect] Propriétés mises à jour avec succès")}}),mo(async()=>{console.log("[DrawingTools][onMounted] Initialisation des filtres depuis le store");const Ce=r.filters;console.log("[DrawingTools][onMounted] Filtres du store:",JSON.stringify({accessLevels:{...Ce.accessLevels},categories:{...Ce.categories},shapeTypes:{...Ce.shapeTypes}},null,2)),z.accessLevels.company=Ce.accessLevels.company,z.accessLevels.employee=Ce.accessLevels.employee,z.accessLevels.visitor=Ce.accessLevels.visitor,z.categories.forages=Ce.categories.forages,z.categories.clients=Ce.categories.clients,z.categories.entrepots=Ce.categories.entrepots,z.categories.livraisons=Ce.categories.livraisons,z.categories.cultures=Ce.categories.cultures,z.categories.parcelles=Ce.categories.parcelles,z.shapeTypes.Polygon=Ce.shapeTypes.Polygon,z.shapeTypes.Line=Ce.shapeTypes.Line,z.shapeTypes.ElevationLine=Ce.shapeTypes.ElevationLine,z.shapeTypes.Note=Ce.shapeTypes.Note;try{console.log("[DrawingTools][onMounted] Chargement des filtres personnalisés"),await a.fetchFilters();const ve=a.getUniqueCategories;console.log("[DrawingTools][onMounted] Catégories personnalisées trouvées:",ve);const Ve=[];ve.forEach(Ye=>{!p.value.includes(Ye)&&!z.categories[Ye]&&(console.log(`[DrawingTools][onMounted] Ajout de la catégorie personnalisée: ${Ye}`),z.categories[Ye]=!0,Ve.push(Ye))}),Ve.length>0&&(console.log("[DrawingTools][onMounted] Mise à jour du store avec les catégories personnalisées:",Ve),r.updateFilters({categories:z.categories}),ce("filter-change",z))}catch(ve){console.error("[DrawingTools][onMounted] Erreur lors du chargement des filtres personnalisés:",ve)}console.log("[DrawingTools][onMounted] Filtres locaux après initialisation:",JSON.stringify({accessLevels:{...z.accessLevels},categories:{...z.categories},shapeTypes:{...z.shapeTypes}},null,2))}),ki(z,(Ce,ve)=>{console.log("[DrawingTools][watch filters] Changement détecté:",{activeTab:x.value,newFilters:JSON.stringify({accessLevels:Ce.accessLevels,categories:Ce.categories,shapeTypes:Ce.shapeTypes}),oldFilters:JSON.stringify({accessLevels:ve.accessLevels,categories:ve.categories,shapeTypes:ve.shapeTypes})});const Ve=Object.keys(Ce.accessLevels).filter(We=>ve.accessLevels[We]!==Ce.accessLevels[We]),Ye=Object.keys(Ce.categories).filter(We=>ve.categories[We]!==Ce.categories[We]),Ze=Object.keys(Ce.shapeTypes).filter(We=>ve.shapeTypes[We]!==Ce.shapeTypes[We]),_t=Ve.length>0||Ye.length>0||Ze.length>0;console.log("[DrawingTools][watch filters] Différences détectées:",{accessLevelsDiff:Ve,categoriesDiff:Ye,shapeTypesDiff:Ze,hasChanges:_t}),x.value==="filters"?(console.log("[DrawingTools][watch filters] Onglet filtres actif, application des filtres"),X()):console.log("[DrawingTools][watch filters] Onglet filtres non actif, pas d'application automatique")},{deep:!0});const ze=Ce=>{console.log("[DrawingTools][handleToolClick] Outil cliqué:",Ce,"Outil actuel:",n.selectedTool),ce("tool-selected",n.selectedTool===Ce?"":Ce),window.innerWidth<768&&ce("update:show",!1)};return(Ce,ve)=>{var Ve,Ye,Ze,_t;return Oe(),Be("div",{class:Di(["drawing-tools-panel",{open:t.show}])},[S("div",Pz,[ve[47]||(ve[47]=S("div",{class:"flex items-center"},[S("div",{class:"w-10 h-1.5 bg-gray-300 rounded-full mr-3"}),S("h3",{class:"text-sm font-semibold text-gray-700"},"Outils de dessin")],-1)),S("button",{onClick:ve[0]||(ve[0]=We=>Ce.$emit("update:show",!1)),class:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},ve[46]||(ve[46]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",Mz,[S("div",kz,[S("nav",Az,[S("button",{onClick:ve[1]||(ve[1]=We=>x.value="tools"),class:Di([x.value==="tools"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},ve[48]||(ve[48]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),S("span",null,"Outils",-1)]),2),t.selectedShape&&((Ve=t.selectedShape.properties)==null?void 0:Ve.type)!=="Note"?(Oe(),Be("button",{key:0,onClick:ve[2]||(ve[2]=We=>x.value="style"),class:Di([x.value==="style"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},ve[49]||(ve[49]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1),S("span",null,"Style",-1)]),2)):Jt("",!0),S("button",{onClick:se,class:Di([x.value==="filters"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},ve[50]||(ve[50]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),S("span",null,"Filtres",-1)]),2)])]),S("div",Tz,[x.value==="tools"?(Oe(),Be("div",Dz,[S("div",Oz,[(Oe(!0),Be(Sn,null,sr(v.filter(We=>We.type!=="delete"),We=>(Oe(),Be("button",{key:We.type,class:Di(["flex items-center justify-center p-2 rounded-md border transition-all duration-200",{"bg-primary-50 border-primary-500 text-primary-600":n.selectedTool===We.type,"hover:bg-gray-50 border-gray-300 text-gray-700":n.selectedTool!==We.type}]),onClick:ut=>ze(We.type),title:We.label},[S("span",{class:"icon",innerHTML:g(We.type)},null,8,Iz)],10,Nz))),128))]),t.selectedShape?(Oe(),Be("button",{key:0,class:Di(["w-full mt-2 p-2 rounded-md border border-red-200 bg-red-50 text-red-600 hover:bg-red-100 flex items-center justify-center",{"bg-red-100":n.selectedTool==="delete"}]),onClick:ve[3]||(ve[3]=We=>Ce.$emit("delete-shape")),title:"Supprimer la forme"},ve[51]||(ve[51]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),S("span",{class:"text-sm"},"Supprimer",-1)]),2)):Jt("",!0),t.selectedShape&&re.value?(Oe(),Be("div",Bz)):Jt("",!0),t.selectedShape&&re.value?(Oe(),Be("div",Rz,[re.value.type!=="Note"?(Oe(),Be("div",Fz,[ve[52]||(ve[52]=S("label",{for:"shapeName",class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de la forme",-1)),Tn(S("input",{type:"text",id:"shapeName","onUpdate:modelValue":ve[4]||(ve[4]=We=>ge.value=We),onChange:Qe,placeholder:"Donnez un nom à cette forme",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,544),[[zr,ge.value]])])):Jt("",!0),S("div",jz,[ve[55]||(ve[55]=S("label",{for:"shapeCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Catégorie",-1)),Tn(S("select",{id:"shapeCategory","onUpdate:modelValue":ve[5]||(ve[5]=We=>pe.value=We),onChange:ae,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},[ve[53]||(ve[53]=nu('<option value="forages" data-v-27145f9b>Forages</option><option value="clients" data-v-27145f9b>Clients</option><option value="entrepots" data-v-27145f9b>Entrepôts</option><option value="livraisons" data-v-27145f9b>Lieux de livraison</option><option value="cultures" data-v-27145f9b>Cultures</option><option value="parcelles" data-v-27145f9b>Noms des parcelles</option>',6)),(Oe(!0),Be(Sn,null,sr(z.categories,(We,ut)=>(Oe(),Be(Sn,{key:ut},[p.value.includes(String(ut))?Jt("",!0):(Oe(),Be("option",{key:0,value:String(ut)},kt(Je(String(ut))),9,zz))],64))),128)),ve[54]||(ve[54]=S("option",{value:"default"},"Autre",-1))],544),[[ns,pe.value]])]),S("div",$z,[ve[57]||(ve[57]=S("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700 mb-1"},"Niveau d'accès",-1)),ve[58]||(ve[58]=S("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Définit qui peut voir cet élément sur la carte. ",-1)),Tn(S("select",{id:"accessLevel","onUpdate:modelValue":ve[6]||(ve[6]=We=>N.value=We),onChange:H,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},ve[56]||(ve[56]=[S("option",{value:"company"},"Entreprise uniquement",-1),S("option",{value:"employee"},"Entreprise et salariés",-1),S("option",{value:"visitor"},"Tous (visiteurs inclus)",-1)]),544),[[ns,N.value]])]),S("div",Vz,[re.value.type==="Polygon"?(Oe(),Be("div",Uz,[S("div",Hz,[ve[59]||(ve[59]=S("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),S("span",Wz,kt(De(re.value.surface||0)),1)]),S("div",Gz,[ve[60]||(ve[60]=S("span",{class:"text-sm font-semibold text-gray-700"},"Périmètre :",-1)),S("span",qz,kt(J(re.value.perimeter||0)),1)])])):re.value.type==="Line"?(Oe(),Be(Sn,{key:1},[ve[61]||(ve[61]=S("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),S("span",Yz,kt(J(re.value.length||0)),1)],64)):re.value.type==="ElevationLine"?(Oe(),Be(Sn,{key:2},[S("div",Zz,[S("div",Kz,[ve[62]||(ve[62]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Distance totale :",-1)),S("span",Xz,kt(J(re.value.length||0)),1)]),S("div",Jz,[ve[63]||(ve[63]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dénivelé + :",-1)),S("span",Qz,kt(J(re.value.elevationGain||0)),1)]),S("div",e$,[ve[64]||(ve[64]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dénivelé - :",-1)),S("span",t$,kt(J(re.value.elevationLoss||0)),1)]),S("div",n$,[ve[65]||(ve[65]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente moy. :",-1)),S("span",r$,kt(Te(re.value.averageSlope||0)),1)]),S("div",i$,[ve[66]||(ve[66]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente max :",-1)),S("span",s$,kt(Te(re.value.maxSlope||0)),1)])]),S("div",o$,[S("canvas",a$,null,512)],512)],64)):Jt("",!0)])])):Jt("",!0)])):Jt("",!0),x.value==="style"&&t.selectedShape&&((Ye=t.selectedShape.properties)==null?void 0:Ye.type)!=="Note"?(Oe(),Be("div",l$,[S("div",u$,[(Oe(),Be(Sn,null,sr(B,We=>S("button",{key:We,class:"w-8 h-8 rounded-full",style:ru({backgroundColor:We}),onClick:ut=>_e(We),title:We},null,12,c$)),64))]),((Ze=re.value)==null?void 0:Ze.type)!=="TextRectangle"?(Oe(),Be("div",h$,[S("div",d$,[ve[67]||(ve[67]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),S("div",f$,[Tn(S("input",{type:"color","onUpdate:modelValue":ve[7]||(ve[7]=We=>k.value=We),class:"w-16 h-8 rounded border",onChange:ve[8]||(ve[8]=We=>we({strokeColor:k.value})),title:"Couleur du contour"},null,544),[[zr,k.value]]),Tn(S("input",{type:"range","onUpdate:modelValue":ve[9]||(ve[9]=We=>A.value=We),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:ve[10]||(ve[10]=We=>we({strokeWidth:A.value})),title:"Épaisseur du contour"},null,544),[[zr,A.value]])])]),S("div",p$,[ve[68]||(ve[68]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),Tn(S("select",{"onUpdate:modelValue":ve[11]||(ve[11]=We=>D.value=We),class:"w-full rounded border",onChange:ve[12]||(ve[12]=We=>we({strokeStyle:D.value}))},[(Oe(),Be(Sn,null,sr(I,We=>S("option",{key:We.value,value:We.value},kt(We.label),9,g$)),64))],544),[[ns,D.value]])]),te.value?(Oe(),Be("div",m$,[ve[69]||(ve[69]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),S("div",v$,[Tn(S("input",{type:"color","onUpdate:modelValue":ve[13]||(ve[13]=We=>j.value=We),class:"w-16 h-8 rounded border",onChange:ve[14]||(ve[14]=We=>we({fillColor:j.value})),title:"Couleur de remplissage"},null,544),[[zr,j.value]]),Tn(S("input",{type:"range","onUpdate:modelValue":ve[15]||(ve[15]=We=>Y.value=We),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:ve[16]||(ve[16]=We=>we({fillOpacity:Y.value})),title:"Opacité du remplissage"},null,544),[[zr,Y.value]])])])):Jt("",!0)])):Jt("",!0),((_t=re.value)==null?void 0:_t.type)==="TextRectangle"?(Oe(),Be("div",y$,[S("div",b$,[ve[70]||(ve[70]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),S("div",_$,[Tn(S("input",{type:"color","onUpdate:modelValue":ve[17]||(ve[17]=We=>k.value=We),class:"w-16 h-8 rounded border",onChange:ve[18]||(ve[18]=We=>we({strokeColor:k.value})),title:"Couleur du contour"},null,544),[[zr,k.value]]),Tn(S("input",{type:"range","onUpdate:modelValue":ve[19]||(ve[19]=We=>A.value=We),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:ve[20]||(ve[20]=We=>we({strokeWidth:A.value})),title:"Épaisseur du contour"},null,544),[[zr,A.value]])])]),S("div",w$,[ve[71]||(ve[71]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),S("div",x$,[Tn(S("input",{type:"color","onUpdate:modelValue":ve[21]||(ve[21]=We=>j.value=We),class:"w-16 h-8 rounded border",onChange:ve[22]||(ve[22]=We=>we({fillColor:j.value})),title:"Couleur de remplissage"},null,544),[[zr,j.value]]),Tn(S("input",{type:"range","onUpdate:modelValue":ve[23]||(ve[23]=We=>Y.value=We),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:ve[24]||(ve[24]=We=>we({fillOpacity:Y.value})),title:"Opacité du remplissage"},null,544),[[zr,Y.value]])])])])):Jt("",!0)])):Jt("",!0),x.value==="filters"?(Oe(),Be("div",L$,[S("div",S$,[S("div",C$,[ve[74]||(ve[74]=S("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Niveau d'accès",-1)),ve[75]||(ve[75]=S("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Sélectionnez votre niveau d'accès pour filtrer les éléments visibles sur la carte. ",-1)),S("div",null,[Tn(S("select",{"onUpdate:modelValue":ve[25]||(ve[25]=We=>R.value=We),onChange:ve[26]||(ve[26]=We=>V(R.value)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm"},ve[72]||(ve[72]=[S("option",{value:"company"},"Entreprise (accès à tout)",-1),S("option",{value:"employee"},"Salariés (accès niveau salariés et visiteurs)",-1),S("option",{value:"visitor"},"Visiteurs (accès niveau visiteurs uniquement)",-1)]),544),[[ns,R.value]]),ve[73]||(ve[73]=S("div",{class:"mt-2 text-xs text-gray-500"},[S("p",null,[S("strong",null,"Entreprise"),Kr(" : Vous verrez tous les éléments (entreprise, salariés, visiteurs)")]),S("p",null,[S("strong",null,"Salariés"),Kr(" : Vous verrez les éléments pour salariés et visiteurs")]),S("p",null,[S("strong",null,"Visiteurs"),Kr(" : Vous ne verrez que les éléments pour visiteurs")])],-1))])]),S("div",E$,[ve[84]||(ve[84]=S("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Catégories",-1)),S("div",P$,[S("label",M$,[Tn(S("input",{type:"checkbox","onUpdate:modelValue":ve[27]||(ve[27]=We=>z.categories.forages=We),onChange:de,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,z.categories.forages]]),ve[76]||(ve[76]=S("span",{class:"ml-2 text-sm text-gray-700"},"Forages",-1))]),S("label",k$,[Tn(S("input",{type:"checkbox","onUpdate:modelValue":ve[28]||(ve[28]=We=>z.categories.clients=We),onChange:de,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,z.categories.clients]]),ve[77]||(ve[77]=S("span",{class:"ml-2 text-sm text-gray-700"},"Clients",-1))]),S("label",A$,[Tn(S("input",{type:"checkbox","onUpdate:modelValue":ve[29]||(ve[29]=We=>z.categories.entrepots=We),onChange:de,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,z.categories.entrepots]]),ve[78]||(ve[78]=S("span",{class:"ml-2 text-sm text-gray-700"},"Entrepôts",-1))]),S("label",T$,[Tn(S("input",{type:"checkbox","onUpdate:modelValue":ve[30]||(ve[30]=We=>z.categories.livraisons=We),onChange:de,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,z.categories.livraisons]]),ve[79]||(ve[79]=S("span",{class:"ml-2 text-sm text-gray-700"},"Lieux de livraison",-1))]),S("label",D$,[Tn(S("input",{type:"checkbox","onUpdate:modelValue":ve[31]||(ve[31]=We=>z.categories.cultures=We),onChange:de,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,z.categories.cultures]]),ve[80]||(ve[80]=S("span",{class:"ml-2 text-sm text-gray-700"},"Cultures",-1))]),S("label",O$,[Tn(S("input",{type:"checkbox","onUpdate:modelValue":ve[32]||(ve[32]=We=>z.categories.parcelles=We),onChange:de,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,z.categories.parcelles]]),ve[81]||(ve[81]=S("span",{class:"ml-2 text-sm text-gray-700"},"Noms des parcelles",-1))]),(Oe(!0),Be(Sn,null,sr(z.categories,(We,ut)=>(Oe(),Be(Sn,{key:ut},[p.value.includes(String(ut))?Jt("",!0):(Oe(),Be("label",N$,[Tn(S("input",{type:"checkbox","onUpdate:modelValue":Vt=>z.categories[ut]=Vt,onChange:de,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,40,I$),[[Tl,z.categories[ut]]]),S("span",B$,kt(ut),1)]))],64))),128)),s.value||o.value?(Oe(),Be("div",R$,[S("div",F$,[Tn(S("input",{type:"text","onUpdate:modelValue":ve[33]||(ve[33]=We=>c.name=We),placeholder:"Nouveau filtre...",class:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-primary-500 focus:border-primary-500"},null,512),[[zr,c.name]]),S("button",{onClick:ee,disabled:!c.name||d.value,class:"px-2 py-1 bg-primary-600 text-white text-sm rounded hover:bg-primary-700 transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"},[d.value?(Oe(),Be("svg",$$,ve[83]||(ve[83]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Oe(),Be("svg",z$,ve[82]||(ve[82]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1)])))],8,j$)])])):Jt("",!0)])]),S("div",V$,[ve[89]||(ve[89]=S("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Types de formes",-1)),S("div",U$,[S("label",H$,[Tn(S("input",{type:"checkbox","onUpdate:modelValue":ve[34]||(ve[34]=We=>z.shapeTypes.Polygon=We),onChange:de,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,z.shapeTypes.Polygon]]),ve[85]||(ve[85]=S("span",{class:"ml-2 text-sm text-gray-700"},"Polygones",-1))]),S("label",W$,[Tn(S("input",{type:"checkbox","onUpdate:modelValue":ve[35]||(ve[35]=We=>z.shapeTypes.Line=We),onChange:de,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,z.shapeTypes.Line]]),ve[86]||(ve[86]=S("span",{class:"ml-2 text-sm text-gray-700"},"Lignes",-1))]),S("label",G$,[Tn(S("input",{type:"checkbox","onUpdate:modelValue":ve[36]||(ve[36]=We=>z.shapeTypes.ElevationLine=We),onChange:de,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,z.shapeTypes.ElevationLine]]),ve[87]||(ve[87]=S("span",{class:"ml-2 text-sm text-gray-700"},"Profils altimétriques",-1))]),S("label",q$,[Tn(S("input",{type:"checkbox","onUpdate:modelValue":ve[37]||(ve[37]=We=>z.shapeTypes.Note=We),onChange:de,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Tl,z.shapeTypes.Note]]),ve[88]||(ve[88]=S("span",{class:"ml-2 text-sm text-gray-700"},"Notes",-1))])])]),S("div",{class:"pt-4 mb-4"},[S("button",{onClick:he,class:"w-full px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200 transition-colors"}," Réinitialiser ")])])])):Jt("",!0)])]),t.selectedShape&&re.value&&re.value.type==="ElevationLine"?(Oe(),Be("div",Y$,[S("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:ve[38]||(ve[38]=We=>Q("samplePoints"))},[ve[91]||(ve[91]=S("span",null,"Points d'échantillonnage",-1)),(Oe(),Be("svg",{class:Di(["w-4 h-4",{"rotate-180":!E.value.samplePoints}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ve[90]||(ve[90]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),Tn(S("div",Z$,[S("div",K$,[ve[96]||(ve[96]=S("h4",{class:"text-sm font-semibold mb-2"},"Points normaux",-1)),S("div",X$,[S("div",null,[ve[92]||(ve[92]=S("label",{class:"text-xs text-gray-600"},"Taille",-1)),Tn(S("input",{type:"number","onUpdate:modelValue":ve[39]||(ve[39]=We=>$.value.radius=We),min:"2",max:"10",step:"1",class:"w-full px-2 py-1 border rounded",onChange:K},null,544),[[zr,$.value.radius]])]),S("div",null,[ve[93]||(ve[93]=S("label",{class:"text-xs text-gray-600"},"Couleur",-1)),Tn(S("input",{type:"color","onUpdate:modelValue":ve[40]||(ve[40]=We=>$.value.color=We),class:"w-full h-8 px-1 border rounded",onChange:K},null,544),[[zr,$.value.color]])]),S("div",null,[ve[94]||(ve[94]=S("label",{class:"text-xs text-gray-600"},"Opacité",-1)),Tn(S("input",{type:"range","onUpdate:modelValue":ve[41]||(ve[41]=We=>$.value.fillOpacity=We),min:"0",max:"1",step:"0.1",class:"w-full",onChange:K},null,544),[[zr,$.value.fillOpacity]])]),S("div",null,[ve[95]||(ve[95]=S("label",{class:"text-xs text-gray-600"},"Bordure",-1)),Tn(S("input",{type:"number","onUpdate:modelValue":ve[42]||(ve[42]=We=>$.value.weight=We),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:K},null,544),[[zr,$.value.weight]])])])]),S("div",null,[ve[100]||(ve[100]=S("h4",{class:"text-sm font-semibold mb-2"},"Points min/max",-1)),S("div",J$,[S("div",null,[ve[97]||(ve[97]=S("label",{class:"text-xs text-gray-600"},"Taille",-1)),Tn(S("input",{type:"number","onUpdate:modelValue":ve[43]||(ve[43]=We=>Z.value.radius=We),min:"4",max:"12",step:"1",class:"w-full px-2 py-1 border rounded",onChange:me},null,544),[[zr,Z.value.radius]])]),S("div",null,[ve[98]||(ve[98]=S("label",{class:"text-xs text-gray-600"},"Bordure",-1)),Tn(S("input",{type:"number","onUpdate:modelValue":ve[44]||(ve[44]=We=>Z.value.weight=We),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:me},null,544),[[zr,Z.value.weight]])]),S("div",null,[ve[99]||(ve[99]=S("label",{class:"text-xs text-gray-600"},"Opacité",-1)),Tn(S("input",{type:"range","onUpdate:modelValue":ve[45]||(ve[45]=We=>Z.value.fillOpacity=We),min:"0",max:"1",step:"0.1",class:"w-full",onChange:me},null,544),[[zr,Z.value.fillOpacity]])])])])],512),[[Ty,!E.value.samplePoints]])])):Jt("",!0)],2)}}}),eV=ih(Q$,[["__scopeId","data-v-27145f9b"]]),tV={class:"map-toolbar w-full"},nV={class:"hidden md:flex items-center space-x-2"},rV={class:"dropdown"},iV={class:"dropdown-menu"},sV=["onClick"],oV={key:0,class:"border-l pl-2 flex-1"},aV={class:"flex items-center"},lV={class:"plan-info"},uV={class:"plan-name"},cV={key:0,class:"plan-description"},hV={class:"border-l pl-2 ml-auto"},dV={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},fV={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},pV={key:"saving"},gV={key:"success",class:"save-success-text"},mV={key:"default"},vV={class:"md:hidden"},yV={class:"flex justify-between items-center"},bV={key:0,class:"truncate mx-2 text-sm font-medium"},_V={key:0,class:"mobile-menu mt-0 bg-white shadow-lg p-4 z-[1900] fixed left-0 right-0 w-full"},wV={class:"flex justify-between items-center mb-3 border-b pb-2"},xV={class:"flex flex-col space-y-4"},LV={key:0,class:"flex flex-col pb-3 border-b"},SV={class:"text-sm font-semibold text-gray-800"},CV={key:0,class:"text-xs text-gray-600 mt-1"},EV={class:"flex flex-col"},PV={class:"grid grid-cols-3 gap-2"},MV=["onClick"],kV={key:0,class:"animate-spin h-4 w-4 mr-2 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},AV={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},TV={key:"saving"},DV={key:"success",class:"save-success-text"},OV={key:"default"},NV=js({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view","generate-summary"],setup(t,{emit:e}){const n=e,r=t,i=St("Hybride"),s=St(!1),o=k=>{const A=k.currentTarget,D=A.nextElementSibling;if(D&&D.classList.contains("dropdown-menu")){const j=A.getBoundingClientRect();D.style.top=`${j.bottom}px`,D.style.left=`${j.left}px`}},a={Hybride:"Hybride",Cadastre:"Cadastre",IGN:"IGN"},l=Qn(()=>r.lastSave?new Date(r.lastSave).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),c=k=>{i.value=k,n("change-map-type",k),E()},d=()=>{n("create-new-plan"),E()},p=()=>{n("load-plan"),E()},v=()=>{n("save-plan"),E()},g=()=>{n("adjust-view"),E()},x=()=>{n("generate-summary"),E()},E=()=>{s.value=!1};return(k,A)=>(Oe(),Be("div",tV,[S("div",nV,[S("div",rV,[S("button",{class:"btn-toolbar dropdown-toggle",onMouseover:o},[A[2]||(A[2]=S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),S("span",null,kt(a[i.value]),1)],32),S("div",iV,[(Oe(),Be(Sn,null,sr(a,(D,j)=>S("button",{key:j,class:Di(["dropdown-item",{active:j===i.value}]),onClick:Y=>c(j)},kt(D),11,sV)),64))])]),k.planName?(Oe(),Be("div",oV,[S("div",aV,[S("div",lV,[S("h2",uV,kt(k.planName),1),k.planDescription?(Oe(),Be("p",cV,kt(k.planDescription),1)):Jt("",!0)])])])):Jt("",!0),S("div",{class:"border-l pl-2"},[S("div",{class:"flex items-center space-x-1"},[S("button",{onClick:d,class:"btn-toolbar",title:"Nouveau plan"},A[3]||(A[3]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),S("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),S("button",{onClick:p,class:"btn-toolbar",title:"Charger un plan"},A[4]||(A[4]=[nu('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-b4cc3353><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-b4cc3353></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-b4cc3353></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-b4cc3353></path></svg><span class="hidden lg:inline ml-1" data-v-b4cc3353>Charger</span>',2)])),S("button",{onClick:v,class:"btn-toolbar",title:"Enregistrer le plan"},A[5]||(A[5]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),S("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),S("div",{class:"border-l pl-2"},[S("div",{class:"flex items-center space-x-1"},[S("button",{onClick:g,class:"btn-toolbar",title:"Ajuster la vue"},A[6]||(A[6]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),S("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)])),S("button",{onClick:x,class:"btn-toolbar",title:"Générer une synthèse"},A[7]||(A[7]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),S("span",{class:"hidden lg:inline ml-1"},"Synthèse",-1)]))])]),S("div",hV,[S("div",{class:Di(["text-xs hidden lg:flex items-center",{"text-gray-500":!k.saveStatus,"text-primary-600 font-medium":k.saveStatus==="success","text-blue-600 font-medium":k.saveStatus==="saving"}])},[k.saveStatus==="saving"?(Oe(),Be("svg",dV,A[8]||(A[8]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Jt("",!0),k.saveStatus==="success"?(Oe(),Be("svg",fV,A[9]||(A[9]=[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Jt("",!0),mi(Q2,{name:"fade-slide",mode:"out-in"},{default:Yu(()=>[k.saveStatus==="saving"?(Oe(),Be("span",pV," Sauvegarde en cours... ")):k.saveStatus==="success"?(Oe(),Be("span",gV," Sauvegarde réussie ! ")):(Oe(),Be("span",mV," Dernière modification : "+kt(l.value),1))]),_:1})],2)])]),S("div",vV,[S("div",yV,[S("button",{onClick:A[0]||(A[0]=D=>s.value=!s.value),class:"p-2 rounded-md border bg-white shadow-sm"},A[10]||(A[10]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})],-1)])),k.planName?(Oe(),Be("div",bV,kt(k.planName),1)):Jt("",!0),S("div",{class:"flex space-x-2"},[S("button",{onClick:d,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},A[11]||(A[11]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),S("button",{onClick:v,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},A[12]||(A[12]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),S("button",{onClick:g,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},A[13]||(A[13]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),s.value?(Oe(),Be("div",_V,[S("div",wV,[A[15]||(A[15]=S("h3",{class:"text-base font-semibold text-gray-800"},"Menu",-1)),S("button",{onClick:A[1]||(A[1]=D=>s.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},A[14]||(A[14]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",xV,[k.planName?(Oe(),Be("div",LV,[S("h3",SV,kt(k.planName),1),k.planDescription?(Oe(),Be("p",CV,kt(k.planDescription),1)):Jt("",!0)])):Jt("",!0),S("div",EV,[A[16]||(A[16]=S("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Type de carte",-1)),S("div",PV,[(Oe(),Be(Sn,null,sr(a,(D,j)=>S("button",{key:j,class:Di(["px-3 py-2 text-sm rounded-md border shadow-sm",{"bg-blue-50 border-blue-300 text-blue-700 font-medium":j===i.value}]),onClick:Y=>c(j)},kt(D),11,MV)),64))])]),S("div",{class:"flex flex-col"},[A[20]||(A[20]=S("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Outils de plan",-1)),S("div",{class:"grid grid-cols-3 gap-2"},[S("button",{onClick:d,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},A[17]||(A[17]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),Kr(" Nouveau ")])),S("button",{onClick:p,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},A[18]||(A[18]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),S("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),S("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),Kr(" Charger ")])),S("button",{onClick:x,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},A[19]||(A[19]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),Kr(" Synthèse ")]))])]),S("div",{class:Di(["text-sm text-center pt-3 border-t flex items-center justify-center space-x-1 mt-2",{"text-gray-500":!k.saveStatus,"text-primary-600 font-medium":k.saveStatus==="success","text-blue-600 font-medium":k.saveStatus==="saving"}])},[k.saveStatus==="saving"?(Oe(),Be("svg",kV,A[21]||(A[21]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Jt("",!0),k.saveStatus==="success"?(Oe(),Be("svg",AV,A[22]||(A[22]=[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Jt("",!0),mi(Q2,{name:"fade-slide",mode:"out-in"},{default:Yu(()=>[k.saveStatus==="saving"?(Oe(),Be("span",TV," Sauvegarde en cours... ")):k.saveStatus==="success"?(Oe(),Be("span",DV," Sauvegarde réussie ! ")):(Oe(),Be("span",OV," Dernière modification : "+kt(l.value),1))]),_:1})],2)])])):Jt("",!0)])]))}}),IV=ih(NV,[["__scopeId","data-v-b4cc3353"]]),BV={class:"comment-thread"},RV={key:0,class:"space-y-3 mb-4"},FV={class:"flex justify-between items-start"},jV={class:"flex items-center"},zV={class:"font-medium text-sm text-gray-900"},$V={class:"flex items-center"},VV={class:"text-xs text-gray-500"},UV=["onClick"],HV={class:"mt-1 text-sm text-gray-700 whitespace-pre-wrap"},WV={key:1,class:"text-center text-sm text-gray-500 italic my-4"},GV={key:2,class:"mt-3"},qV={class:"flex justify-end mt-2"},YV=["disabled"],ZV={key:3,class:"text-center text-sm text-gray-500 italic mt-2"},KV=js({__name:"CommentThread",props:{noteId:{},comments:{}},emits:["update:comments","comment-added","comment-deleted"],setup(t,{emit:e}){const n=t;console.log("[CommentThread] Commentaires reçus initialement:",n.comments),ki(()=>n.comments,E=>{console.log("[CommentThread] Commentaires mis à jour:",E)},{deep:!0});const r=e,i=ma(),s=wf(),o=su(),a=St(""),l=Qn(()=>i.isEntreprise||i.isAdmin);function c(E){return i.user&&E.userId===i.user.id||i.isAdmin}async function d(){var E;if(a.value.trim())try{await s.addComment(n.noteId,a.value.trim()),a.value="",o.success("Commentaire ajouté avec succès"),r("comment-added")}catch(k){if(console.error("Erreur lors de l'ajout du commentaire:",k),(E=k.response)!=null&&E.data){const A=k.response.data;A.note?o.error(`Erreur: ${A.note[0]}`):A.user?o.error(`Erreur: ${A.user[0]}`):A.text?o.error(`Erreur: ${A.text[0]}`):o.error("Erreur lors de l'ajout du commentaire")}else o.error("Erreur lors de l'ajout du commentaire")}}async function p(E){var k;if(confirm("Voulez-vous vraiment supprimer ce commentaire ?"))try{await s.removeComment(n.noteId,E),o.success("Commentaire supprimé"),r("comment-deleted")}catch(A){if(console.error("Erreur lors de la suppression du commentaire:",A),(k=A.response)!=null&&k.data){const D=A.response.data;D.detail?o.error(`Erreur: ${D.detail}`):o.error("Erreur lors de la suppression du commentaire")}else o.error("Erreur lors de la suppression du commentaire")}}function v(E){try{if(!E)return"Date inconnue";const k=new Date(E);return isNaN(k.getTime())?(console.warn(`Date invalide: ${E}`),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(k)}catch(k){return console.error(`Erreur lors du formatage de la date: ${E}`,k),"Date invalide"}}function g(E){switch(E){case"admin":return"bg-purple-100 text-purple-800";case"entreprise":return"bg-blue-100 text-blue-800";case"salarie":return"bg-green-100 text-green-800";case"visiteur":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function x(E){switch(E){case"admin":return"Admin";case"entreprise":return"Entreprise";case"salarie":return"Salarié";case"visiteur":return"Visiteur";default:return E}}return(E,k)=>(Oe(),Be("div",BV,[E.comments&&E.comments.length>0?(Oe(),Be("div",RV,[(Oe(!0),Be(Sn,null,sr(E.comments,A=>(Oe(),Be("div",{key:A.id,class:"bg-gray-50 rounded-lg p-3"},[S("div",FV,[S("div",jV,[S("div",zV,kt(A.userName),1),S("span",{class:Di(["ml-2 text-xs px-2 py-0.5 rounded-full",g(A.userRole)])},kt(x(A.userRole)),3)]),S("div",$V,[S("span",VV,kt(v(A.createdAt)),1),c(A)?(Oe(),Be("button",{key:0,onClick:Cu(D=>p(A.id),["prevent"]),class:"ml-2 text-gray-400 hover:text-red-500"},k[1]||(k[1]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,UV)):Jt("",!0)])]),S("p",HV,kt(A.text),1)]))),128))])):(Oe(),Be("div",WV," Aucun commentaire pour le moment ")),l.value?(Oe(),Be("div",GV,[Tn(S("textarea",{"onUpdate:modelValue":k[0]||(k[0]=A=>a.value=A),placeholder:"Ajouter un commentaire...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"2"},null,512),[[zr,a.value]]),S("div",qV,[S("button",{type:"button",onClick:Cu(d,["prevent"]),disabled:!a.value.trim(),class:"px-3 py-1 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"}," Ajouter ",8,YV)])])):(Oe(),Be("div",ZV," Seuls les utilisateurs de l'entreprise peuvent ajouter des commentaires "))]))}}),XV={class:"photo-gallery"},JV={key:0,class:"grid grid-cols-2 gap-2 mb-4"},QV=["src","onClick"],eU={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center"},tU={class:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2"},nU=["onClick"],rU={key:1,class:"text-center text-sm text-gray-500 italic my-4"},iU={class:"flex space-x-2 mt-3"},sU={key:2,class:"mt-4 border border-gray-300 rounded-lg overflow-hidden bg-white"},oU={class:"relative bg-gray-900",style:{height:"300px"}},aU=["src"],lU={class:"p-3 bg-gray-50 border-t border-gray-300 flex justify-center"},uU={key:1,class:"flex space-x-3"},cU={key:3,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},hU={class:"relative max-w-3xl max-h-[90vh] bg-white rounded-lg overflow-hidden"},dU=["src"],fU=js({__name:"PhotoGallery",props:{noteId:{},photos:{}},emits:["update:photos","photo-added","photo-deleted"],setup(t,{emit:e}){const n=t,r=e,i=wf(),s=su(),o=St(null),a=St(null),l=St(null);let c=null;const d=St(!1),p=St(!1),v=St(null),g=St(null);function x(pe){v.value=pe,d.value=!0}async function E(pe){var N;if(confirm("Êtes-vous sûr de vouloir supprimer cette photo ?"))try{await i.removePhoto(n.noteId,pe),s.success("Photo supprimée"),r("photo-deleted"),d.value&&((N=v.value)==null?void 0:N.id)===pe&&(d.value=!1,v.value=null)}catch($){console.error("Erreur lors de la suppression de la photo:",$),s.error("Erreur lors de la suppression de la photo")}}function k(){l.value&&l.value.click()}async function A(pe){const N=pe.target;if(!N.files||N.files.length===0)return;const $=N.files[0];if(!$.type.startsWith("image/")){s.error("Le fichier doit être une image");return}if($.size>5*1024*1024){s.error("L'image est trop volumineuse (max 5MB)");return}try{const Z=await D($);await i.addPhoto(n.noteId,{url:Z}),N.value="",s.success("Photo ajoutée"),r("photo-added")}catch(Z){console.error("Erreur lors de l'ajout de la photo:",Z),s.error("Erreur lors de l'ajout de la photo")}}function D(pe){return new Promise((N,$)=>{const Z=new FileReader;Z.onload=()=>N(Z.result),Z.onerror=$,Z.readAsDataURL(pe)})}ki(p,async pe=>{if(pe){g.value=null;try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("API de caméra non supportée sur ce navigateur");const N={video:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}};c=await navigator.mediaDevices.getUserMedia(N),o.value&&(o.value.srcObject=c,await new Promise($=>{o.value.onloadedmetadata=()=>{o.value.play().then($)}}))}catch(N){console.error("Erreur lors de l'accès à la caméra:",N);let $="Impossible d'accéder à la caméra";N.name==="NotAllowedError"?$="L'accès à la caméra a été refusé. Veuillez vérifier vos permissions.":N.name==="NotFoundError"?$="Aucune caméra n'a été trouvée sur votre appareil.":N.name==="NotSupportedError"&&($="Votre navigateur ne supporte pas l'accès à la caméra."),s.error($),p.value=!1}}else c&&(c.getTracks().forEach(N=>N.stop()),c=null)});function j(){if(!o.value||!a.value)return;const pe=o.value,N=a.value;N.width=pe.videoWidth,N.height=pe.videoHeight;const $=N.getContext("2d");$&&($.drawImage(pe,0,0,N.width,N.height),g.value=N.toDataURL("image/jpeg"))}function Y(){g.value=null}async function te(){if(g.value)try{await i.addPhoto(n.noteId,{url:g.value}),p.value=!1,s.success("Photo ajoutée"),r("photo-added")}catch(pe){console.error("Erreur lors de l'ajout de la photo:",pe),s.error("Erreur lors de l'ajout de la photo")}}function ge(){p.value=!1}return Ju(()=>{c&&(c.getTracks().forEach(pe=>pe.stop()),c=null)}),(pe,N)=>(Oe(),Be("div",XV,[pe.photos&&pe.photos.length>0?(Oe(),Be("div",JV,[(Oe(!0),Be(Sn,null,sr(pe.photos,$=>(Oe(),Be("div",{key:$.id,class:"relative group"},[S("img",{src:$.url,alt:"Photo",class:"w-full h-32 object-cover rounded-lg cursor-pointer",onClick:Z=>x($)},null,8,QV),S("div",eU,[S("div",tU,[S("button",{onClick:Cu(Z=>E($.id),["stop","prevent"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-red-600",title:"Supprimer la photo"},N[2]||(N[2]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,nU)])])]))),128))])):(Oe(),Be("div",rU," Aucune photo pour le moment ")),S("div",iU,[S("button",{type:"button",onClick:N[0]||(N[0]=$=>p.value=!0),class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},N[3]||(N[3]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),Kr(" Prendre une photo ")])),S("button",{type:"button",onClick:k,class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer"},N[4]||(N[4]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})],-1),Kr(" Téléverser ")])),S("input",{id:"photo-upload",ref_key:"fileInput",ref:l,type:"file",accept:"image/*",class:"hidden",onChange:A},null,544)]),p.value?(Oe(),Be("div",sU,[S("div",{class:"p-3 bg-gray-50 border-b border-gray-300 flex justify-between items-center"},[N[6]||(N[6]=S("h3",{class:"text-sm font-medium text-gray-700"},"Mode caméra",-1)),S("button",{type:"button",onClick:ge,class:"text-gray-400 hover:text-gray-500"},N[5]||(N[5]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",oU,[g.value?(Oe(),Be("img",{key:1,src:g.value,class:"w-full h-full object-contain",alt:"Captured"},null,8,aU)):(Oe(),Be("video",{key:0,ref_key:"videoElement",ref:o,autoplay:"",class:"w-full h-full object-contain"},null,512)),S("canvas",{ref_key:"canvasElement",ref:a,class:"hidden"},null,512)]),S("div",lU,[g.value?(Oe(),Be("div",uU,[S("button",{type:"button",onClick:Y,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Reprendre "),S("button",{type:"button",onClick:te,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Utiliser ")])):(Oe(),Be("button",{key:0,type:"button",onClick:j,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-full w-12 h-12 flex items-center justify-center hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},N[7]||(N[7]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})],-1)])))])])):Jt("",!0),d.value?(Oe(),Be("div",cU,[S("div",hU,[S("button",{type:"button",onClick:N[1]||(N[1]=$=>d.value=!1),class:"absolute top-2 right-2 z-10 p-1 bg-white rounded-full text-gray-700 hover:text-red-600 shadow-md"},N[8]||(N[8]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),v.value?(Oe(),Be("img",{key:0,src:v.value.url,alt:"Photo",class:"max-h-[80vh] max-w-full object-contain"},null,8,dU)):Jt("",!0)])])):Jt("",!0)]))}}),pU=ih(fU,[["__scopeId","data-v-f87156b4"]]),gU={class:"fixed z-[9999] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},mU={class:"flex items-center justify-center min-h-screen w-full"},vU={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-2xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden flex flex-col"},yU={class:"p-4 md:p-6 flex-1 overflow-y-auto pb-16",style:{"max-height":"calc(100vh - 180px)","overflow-y":"auto"}},bU={class:"flex justify-between items-center mb-4 border-b pb-4"},_U={class:"text-xl font-semibold text-gray-900"},wU={class:"mb-4 border-b border-gray-200"},xU={class:"flex space-x-4","aria-label":"Tabs"},LU={key:0,class:"ml-1 px-2 py-0.5 text-xs rounded-full bg-primary-100 text-primary-800"},SU={key:0,class:"ml-1 px-2 py-0.5 text-xs rounded-full bg-primary-100 text-primary-800"},CU={key:0},EU={class:"mb-4"},PU={class:"mb-4"},MU={key:0,class:"mb-4 p-2 rounded bg-gray-50 flex items-center"},kU={class:"mb-4"},AU=["value"],TU={class:"mb-4"},DU=["value"],OU={class:"mb-4"},NU={class:"mt-1 flex space-x-2"},IU=["onClick"],BU={key:1,class:"mt-4"},RU={class:"hidden"},FU={key:2,class:"mt-4"},jU=js({__name:"NoteEditModal",props:{note:{},isNewNote:{type:Boolean},location:{}},emits:["close","save"],setup(t,{emit:e}){const n=t,r=e,i=wf(),s=su(),o=St("info"),a=window.console;ki(o,async Z=>{a.log("[NoteEditModal] Onglet actif changé:",Z),Z==="comments"&&n.note&&n.note.id&&(a.log("[NoteEditModal] Onglet Commentaires sélectionné, commentaires actuels:",l.value.comments),await p(n.note.id)),Z==="photos"&&n.note&&n.note.id&&(a.log("[NoteEditModal] Onglet Photos sélectionné, photos actuelles:",l.value.photos),await v(n.note.id))});const l=St({title:"",description:"",columnId:"",accessLevel:ts.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[]});function c(Z){return Array.isArray(Z)?Z:typeof Z=="object"&&"type"in Z&&"coordinates"in Z?[Z.coordinates[1],Z.coordinates[0]]:(a.error("[NoteEditModal] Format de localisation non reconnu:",Z),[0,0])}function d(Z){if(!Z)return new Date().toISOString();try{const B=new Date(Z);return isNaN(B.getTime())?(a.warn("[NoteEditModal] Date invalide:",Z),new Date().toISOString()):B.toISOString()}catch(B){return a.error("[NoteEditModal] Erreur lors de la création de la date:",B),new Date().toISOString()}}async function p(Z){try{a.log(`[NoteEditModal] Chargement des commentaires pour la note ${Z}`);const B=await Ea.getComments(Z);a.log("[NoteEditModal] Commentaires reçus:",B.data);const I=B.data.map(R=>({id:R.id,text:R.text,createdAt:R.created_at,userId:R.user,userName:R.user_name,userRole:R.user_role}));return a.log("[NoteEditModal] Commentaires transformés:",I),n.note&&(i.updateNote(n.note.id,{comments:I}),l.value.comments=I,a.log("[NoteEditModal] Commentaires mis à jour dans le store et localement"),a.log("[NoteEditModal] editingNote.comments après mise à jour:",l.value.comments)),I}catch(B){return a.error("[NoteEditModal] Erreur lors du chargement des commentaires:",B),s.error("Erreur lors du chargement des commentaires"),[]}}async function v(Z){try{a.log(`[NoteEditModal] Chargement des photos pour la note ${Z}`);const B=await Ea.getPhotos(Z);a.log("[NoteEditModal] Photos reçues:",B.data);const I=B.data.map(R=>({id:R.id,url:R.image,createdAt:R.created_at,caption:R.caption}));return n.note&&(i.updateNote(n.note.id,{photos:I}),l.value.photos=I,a.log("[NoteEditModal] Photos mises à jour dans le store et localement")),I}catch(B){return a.error("[NoteEditModal] Erreur lors du chargement des photos:",B),s.error("Erreur lors du chargement des photos"),[]}}mo(async()=>{var Z,B;if(a.log("[NoteEditModal] onMounted - props:",n),await i.loadColumns(),a.log("[NoteEditModal] Colonnes chargées:",i.columns),n.note){a.log("[NoteEditModal] Édition d'une note existante:",n.note);const I=JSON.parse(JSON.stringify(n.note));I.createdAt=d(I.createdAt),I.updatedAt=d(I.updatedAt),l.value=I,n.note.id&&(a.log("[NoteEditModal] Chargement des commentaires et photos..."),await Promise.all([p(n.note.id),v(n.note.id)]),a.log("[NoteEditModal] Après chargement - Commentaires:",((Z=l.value.comments)==null?void 0:Z.length)||0),a.log("[NoteEditModal] Après chargement - Photos:",((B=l.value.photos)==null?void 0:B.length)||0),setTimeout(()=>{a.log("[NoteEditModal] Compteurs après timeout - Commentaires:",x.value),a.log("[NoteEditModal] Compteurs après timeout - Photos:",E.value)},0))}else if(n.isNewNote){if(a.log("[NoteEditModal] Création d'une nouvelle note"),l.value={title:"Nouvelle note",description:"",columnId:i.getDefaultColumn.id||"1",accessLevel:ts.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},n.location){a.log("[NoteEditModal] Ajout de la localisation:",n.location);const I=c(n.location);l.value.location=I}a.log("[NoteEditModal] Niveau d'accès initial:",l.value.accessLevel)}else a.error("[NoteEditModal] Erreur: Ni note existante ni nouvelle note");a.log("[NoteEditModal] editingNote.value après initialisation:",l.value)});const g=Qn(()=>i.getSortedColumns),x=Qn(()=>{var B;const Z=((B=l.value.comments)==null?void 0:B.length)||0;return a.log("[NoteEditModal] Computed commentsCount recalculé:",Z),Z}),E=Qn(()=>{var B;const Z=((B=l.value.photos)==null?void 0:B.length)||0;return a.log("[NoteEditModal] Computed photosCount recalculé:",Z),Z}),k=[{id:ts.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:ts.COMPANY,title:"Entreprise",description:"Visible par l'entreprise uniquement"},{id:ts.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et les salariés"},{id:ts.VISITOR,title:"Visiteurs",description:"Visible par tous"}],A=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"],D=Z=>{l.value.style?(l.value.style.color=Z,l.value.style.fillColor=Z):l.value.style={color:Z,weight:2,opacity:1,fillColor:Z,fillOpacity:.6,radius:8},l.value.color=Z,a.log("[NoteEditModal] Couleur mise à jour:",Z)},j=()=>{var Z,B,I,R,z,U,V,re,Q,_e,we;l.value={title:((Z=n.note)==null?void 0:Z.title)||"",description:((B=n.note)==null?void 0:B.description)||"",columnId:((I=n.note)==null?void 0:I.columnId)||"",accessLevel:((R=n.note)==null?void 0:R.accessLevel)||"private",style:((z=n.note)==null?void 0:z.style)||{color:((U=n.note)==null?void 0:U.color)||"#3B82F6",weight:2,opacity:1,fillColor:((V=n.note)==null?void 0:V.color)||"#3B82F6",fillOpacity:.6,radius:8},color:((re=n.note)==null?void 0:re.color)||"#3B82F6",location:n.location||((Q=n.note)==null?void 0:Q.location)||null,comments:((_e=n.note)==null?void 0:_e.comments)||[],photos:((we=n.note)==null?void 0:we.photos)||[]}};mo(()=>{j()}),ki(()=>n.note,()=>{j()},{deep:!0});function Y(){r("close")}async function te(){a.log("[NoteEditModal] Commentaire ajouté, le modal reste ouvert"),n.note&&n.note.id&&await p(n.note.id)}async function ge(){a.log("[NoteEditModal] Photo ajoutée, le modal reste ouvert"),n.note&&n.note.id&&await v(n.note.id)}async function pe(){a.log("[NoteEditModal] Commentaire supprimé, mise à jour de la liste"),n.note&&n.note.id&&await p(n.note.id)}async function N(){a.log("[NoteEditModal] Photo supprimée, mise à jour de la liste"),n.note&&n.note.id&&await v(n.note.id)}async function $(){var Z;try{const B={title:l.value.title,description:l.value.description,columnId:l.value.columnId,style:l.value.style,access_level:l.value.accessLevel,comments:l.value.comments||[],photos:l.value.photos||[]};l.value.location&&(B.location=Array.isArray(l.value.location)?{type:"Point",coordinates:[l.value.location[1],l.value.location[0]]}:l.value.location),a.log("[NoteEditModal] Données de note à sauvegarder:",B);let I;if((Z=n.note)!=null&&Z.id){I=(await Ea.updateNote(n.note.id,B)).data,i.updateNote(n.note.id,{...l.value,...I,accessLevel:l.value.accessLevel,style:l.value.style,updatedAt:new Date().toISOString()});const z=n.note.id,U=new CustomEvent("geonote:update",{detail:{noteId:z,properties:{name:l.value.title,description:l.value.description,columnId:l.value.columnId,accessLevel:l.value.accessLevel,style:l.value.style}}});window.dispatchEvent(U),setTimeout(()=>{window.dispatchEvent(U),a.log("[NoteEditModal] Événement de mise à jour ré-émis pour garantir la mise à jour du popup")},100),s.success("Note mise à jour avec succès")}else{if(I=(await Ea.createNote(B)).data,!I.id)throw new Error("Le backend n'a pas fourni d'ID pour la nouvelle note");const z=i.getDefaultColumn,U={...B,id:I.id,columnId:B.columnId||z.id,accessLevel:l.value.accessLevel,style:B.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.2}};a.log("[NoteEditModal] Note à ajouter au store avec ID backend:",I.id),i.addNote(U),s.success("Note créée avec succès")}I&&(!I.comments&&l.value.comments&&(I.comments=l.value.comments),!I.photos&&l.value.photos&&(I.photos=l.value.photos)),r("save",I),r("close")}catch(B){a.error("[NoteEditModal] Erreur lors de la sauvegarde de la note:",B),s.error("Erreur lors de la sauvegarde de la note")}}return(Z,B)=>{var I;return Oe(),Be("div",gU,[S("div",mU,[B[17]||(B[17]=S("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),S("div",vU,[S("form",{onSubmit:Cu($,["prevent"]),class:"h-full md:h-auto flex flex-col max-h-screen md:max-h-[90vh] overflow-hidden"},[S("div",yU,[S("div",bU,[S("h3",_U,kt((I=Z.note)!=null&&I.id?"Modifier la note":"Nouvelle note"),1),S("button",{type:"button",onClick:Y,class:"text-gray-400 hover:text-gray-500"},B[7]||(B[7]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",wU,[S("nav",xU,[S("button",{type:"button",onClick:B[0]||(B[0]=R=>o.value="info"),class:Di(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="info"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Informations ",2),S("button",{type:"button",onClick:B[1]||(B[1]=R=>o.value="comments"),class:Di(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="comments"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[B[8]||(B[8]=Kr(" Commentaires ")),x.value>0?(Oe(),Be("span",LU,kt(x.value),1)):Jt("",!0)],2),S("button",{type:"button",onClick:B[2]||(B[2]=R=>o.value="photos"),class:Di(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="photos"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[B[9]||(B[9]=Kr(" Photos ")),E.value>0?(Oe(),Be("span",SU,kt(E.value),1)):Jt("",!0)],2)])]),o.value==="info"?(Oe(),Be("div",CU,[S("div",EU,[B[10]||(B[10]=S("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Titre",-1)),Tn(S("input",{type:"text",id:"title","onUpdate:modelValue":B[3]||(B[3]=R=>l.value.title=R),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[zr,l.value.title]])]),S("div",PU,[B[11]||(B[11]=S("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),Tn(S("textarea",{id:"description","onUpdate:modelValue":B[4]||(B[4]=R=>l.value.description=R),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[zr,l.value.description]])]),l.value.location?(Oe(),Be("div",MU,B[12]||(B[12]=[S("div",{class:"text-primary-600 mr-2"},[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})])],-1),S("div",{class:"text-sm text-gray-600"}," Note géolocalisée ",-1)]))):Jt("",!0),S("div",kU,[B[13]||(B[13]=S("label",{for:"column",class:"block text-sm font-medium text-gray-700"},"État",-1)),Tn(S("select",{id:"column","onUpdate:modelValue":B[5]||(B[5]=R=>l.value.columnId=R),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[(Oe(!0),Be(Sn,null,sr(g.value,R=>(Oe(),Be("option",{key:R.id,value:R.id},kt(R.title),9,AU))),128))],512),[[ns,l.value.columnId]])]),S("div",TU,[B[14]||(B[14]=S("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accès",-1)),Tn(S("select",{id:"accessLevel","onUpdate:modelValue":B[6]||(B[6]=R=>l.value.accessLevel=R),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[(Oe(),Be(Sn,null,sr(k,R=>S("option",{key:R.id,value:R.id},kt(R.title)+" - "+kt(R.description),9,DU)),64))],512),[[ns,l.value.accessLevel]])]),S("div",OU,[B[15]||(B[15]=S("label",{class:"block text-sm font-medium text-gray-700"},"Couleur",-1)),S("div",NU,[(Oe(),Be(Sn,null,sr(A,R=>S("div",{key:R,class:Di(["w-8 h-8 rounded-full cursor-pointer border-2",{"border-gray-400":l.value.style.color!==R,"border-black":l.value.style.color===R}]),style:ru({backgroundColor:R}),onClick:z=>D(R)},null,14,IU)),64))])])])):o.value==="comments"?(Oe(),Be("div",BU,[S("div",RU,kt(a.log("[NoteEditModal] Commentaires passés au composant:",l.value.comments)),1),Z.note?(Oe(),Ca(KV,{key:0,noteId:Z.note.id,comments:l.value.comments||[],onCommentAdded:te,onCommentDeleted:pe},null,8,["noteId","comments"])):Jt("",!0)])):o.value==="photos"?(Oe(),Be("div",FU,[Z.note?(Oe(),Ca(pU,{key:0,noteId:Z.note.id,photos:l.value.photos||[],onPhotoAdded:ge,onPhotoDeleted:N},null,8,["noteId","photos"])):Jt("",!0)])):Jt("",!0)]),S("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse sticky bottom-0 border-t border-gray-200"},[B[16]||(B[16]=S("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm"}," Enregistrer ",-1)),S("button",{onClick:Y,type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Annuler ")])],32)])])])}}}),FE=ih(jU,[["__scopeId","data-v-c73138b2"]]);(()=>{var In,ar;var t=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(h,m)=>()=>(m||h((m={exports:{}}).exports,m),m.exports),a=(h,m,_,C)=>{if(m&&typeof m=="object"||typeof m=="function")for(let M of r(m))!s.call(h,M)&&M!==_&&e(h,M,{get:()=>m[M],enumerable:!(C=n(m,M))||C.enumerable});return h},l=(h,m,_)=>(_=h!=null?t(i(h)):{},a(m||!h||!h.__esModule?e(_,"default",{value:h,enumerable:!0}):_,h)),c=o((h,m)=>{function _(){this.__data__=[],this.size=0}m.exports=_}),d=o((h,m)=>{function _(C,M){return C===M||C!==C&&M!==M}m.exports=_}),p=o((h,m)=>{var _=d();function C(M,W){for(var ne=M.length;ne--;)if(_(M[ne][0],W))return ne;return-1}m.exports=C}),v=o((h,m)=>{var _=p(),C=Array.prototype,M=C.splice;function W(ne){var oe=this.__data__,ye=_(oe,ne);if(ye<0)return!1;var Ee=oe.length-1;return ye==Ee?oe.pop():M.call(oe,ye,1),--this.size,!0}m.exports=W}),g=o((h,m)=>{var _=p();function C(M){var W=this.__data__,ne=_(W,M);return ne<0?void 0:W[ne][1]}m.exports=C}),x=o((h,m)=>{var _=p();function C(M){return _(this.__data__,M)>-1}m.exports=C}),E=o((h,m)=>{var _=p();function C(M,W){var ne=this.__data__,oe=_(ne,M);return oe<0?(++this.size,ne.push([M,W])):ne[oe][1]=W,this}m.exports=C}),k=o((h,m)=>{var _=c(),C=v(),M=g(),W=x(),ne=E();function oe(ye){var Ee=-1,rt=ye==null?0:ye.length;for(this.clear();++Ee<rt;){var qe=ye[Ee];this.set(qe[0],qe[1])}}oe.prototype.clear=_,oe.prototype.delete=C,oe.prototype.get=M,oe.prototype.has=W,oe.prototype.set=ne,m.exports=oe}),A=o((h,m)=>{var _=k();function C(){this.__data__=new _,this.size=0}m.exports=C}),D=o((h,m)=>{function _(C){var M=this.__data__,W=M.delete(C);return this.size=M.size,W}m.exports=_}),j=o((h,m)=>{function _(C){return this.__data__.get(C)}m.exports=_}),Y=o((h,m)=>{function _(C){return this.__data__.has(C)}m.exports=_}),te=o((h,m)=>{var _=typeof Pa=="object"&&Pa&&Pa.Object===Object&&Pa;m.exports=_}),ge=o((h,m)=>{var _=te(),C=typeof self=="object"&&self&&self.Object===Object&&self,M=_||C||Function("return this")();m.exports=M}),pe=o((h,m)=>{var _=ge(),C=_.Symbol;m.exports=C}),N=o((h,m)=>{var _=pe(),C=Object.prototype,M=C.hasOwnProperty,W=C.toString,ne=_?_.toStringTag:void 0;function oe(ye){var Ee=M.call(ye,ne),rt=ye[ne];try{ye[ne]=void 0;var qe=!0}catch{}var wt=W.call(ye);return qe&&(Ee?ye[ne]=rt:delete ye[ne]),wt}m.exports=oe}),$=o((h,m)=>{var _=Object.prototype,C=_.toString;function M(W){return C.call(W)}m.exports=M}),Z=o((h,m)=>{var _=pe(),C=N(),M=$(),W="[object Null]",ne="[object Undefined]",oe=_?_.toStringTag:void 0;function ye(Ee){return Ee==null?Ee===void 0?ne:W:oe&&oe in Object(Ee)?C(Ee):M(Ee)}m.exports=ye}),B=o((h,m)=>{function _(C){var M=typeof C;return C!=null&&(M=="object"||M=="function")}m.exports=_}),I=o((h,m)=>{var _=Z(),C=B(),M="[object AsyncFunction]",W="[object Function]",ne="[object GeneratorFunction]",oe="[object Proxy]";function ye(Ee){if(!C(Ee))return!1;var rt=_(Ee);return rt==W||rt==ne||rt==M||rt==oe}m.exports=ye}),R=o((h,m)=>{var _=ge(),C=_["__core-js_shared__"];m.exports=C}),z=o((h,m)=>{var _=R(),C=function(){var W=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||"");return W?"Symbol(src)_1."+W:""}();function M(W){return!!C&&C in W}m.exports=M}),U=o((h,m)=>{var _=Function.prototype,C=_.toString;function M(W){if(W!=null){try{return C.call(W)}catch{}try{return W+""}catch{}}return""}m.exports=M}),V=o((h,m)=>{var _=I(),C=z(),M=B(),W=U(),ne=/[\\^$.*+?()[\]{}|]/g,oe=/^\[object .+?Constructor\]$/,ye=Function.prototype,Ee=Object.prototype,rt=ye.toString,qe=Ee.hasOwnProperty,wt=RegExp("^"+rt.call(qe).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function It(en){if(!M(en)||C(en))return!1;var xn=_(en)?wt:oe;return xn.test(W(en))}m.exports=It}),re=o((h,m)=>{function _(C,M){return C==null?void 0:C[M]}m.exports=_}),Q=o((h,m)=>{var _=V(),C=re();function M(W,ne){var oe=C(W,ne);return _(oe)?oe:void 0}m.exports=M}),_e=o((h,m)=>{var _=Q(),C=ge(),M=_(C,"Map");m.exports=M}),we=o((h,m)=>{var _=Q(),C=_(Object,"create");m.exports=C}),Qe=o((h,m)=>{var _=we();function C(){this.__data__=_?_(null):{},this.size=0}m.exports=C}),ae=o((h,m)=>{function _(C){var M=this.has(C)&&delete this.__data__[C];return this.size-=M?1:0,M}m.exports=_}),H=o((h,m)=>{var _=we(),C="__lodash_hash_undefined__",M=Object.prototype,W=M.hasOwnProperty;function ne(oe){var ye=this.__data__;if(_){var Ee=ye[oe];return Ee===C?void 0:Ee}return W.call(ye,oe)?ye[oe]:void 0}m.exports=ne}),K=o((h,m)=>{var _=we(),C=Object.prototype,M=C.hasOwnProperty;function W(ne){var oe=this.__data__;return _?oe[ne]!==void 0:M.call(oe,ne)}m.exports=W}),me=o((h,m)=>{var _=we(),C="__lodash_hash_undefined__";function M(W,ne){var oe=this.__data__;return this.size+=this.has(W)?0:1,oe[W]=_&&ne===void 0?C:ne,this}m.exports=M}),fe=o((h,m)=>{var _=Qe(),C=ae(),M=H(),W=K(),ne=me();function oe(ye){var Ee=-1,rt=ye==null?0:ye.length;for(this.clear();++Ee<rt;){var qe=ye[Ee];this.set(qe[0],qe[1])}}oe.prototype.clear=_,oe.prototype.delete=C,oe.prototype.get=M,oe.prototype.has=W,oe.prototype.set=ne,m.exports=oe}),he=o((h,m)=>{var _=fe(),C=k(),M=_e();function W(){this.size=0,this.__data__={hash:new _,map:new(M||C),string:new _}}m.exports=W}),X=o((h,m)=>{function _(C){var M=typeof C;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?C!=="__proto__":C===null}m.exports=_}),J=o((h,m)=>{var _=X();function C(M,W){var ne=M.__data__;return _(W)?ne[typeof W=="string"?"string":"hash"]:ne.map}m.exports=C}),De=o((h,m)=>{var _=J();function C(M){var W=_(this,M).delete(M);return this.size-=W?1:0,W}m.exports=C}),Te=o((h,m)=>{var _=J();function C(M){return _(this,M).get(M)}m.exports=C}),Je=o((h,m)=>{var _=J();function C(M){return _(this,M).has(M)}m.exports=C}),de=o((h,m)=>{var _=J();function C(M,W){var ne=_(this,M),oe=ne.size;return ne.set(M,W),this.size+=ne.size==oe?0:1,this}m.exports=C}),ee=o((h,m)=>{var _=he(),C=De(),M=Te(),W=Je(),ne=de();function oe(ye){var Ee=-1,rt=ye==null?0:ye.length;for(this.clear();++Ee<rt;){var qe=ye[Ee];this.set(qe[0],qe[1])}}oe.prototype.clear=_,oe.prototype.delete=C,oe.prototype.get=M,oe.prototype.has=W,oe.prototype.set=ne,m.exports=oe}),se=o((h,m)=>{var _=k(),C=_e(),M=ee(),W=200;function ne(oe,ye){var Ee=this.__data__;if(Ee instanceof _){var rt=Ee.__data__;if(!C||rt.length<W-1)return rt.push([oe,ye]),this.size=++Ee.size,this;Ee=this.__data__=new M(rt)}return Ee.set(oe,ye),this.size=Ee.size,this}m.exports=ne}),ce=o((h,m)=>{var _=k(),C=A(),M=D(),W=j(),ne=Y(),oe=se();function ye(Ee){var rt=this.__data__=new _(Ee);this.size=rt.size}ye.prototype.clear=C,ye.prototype.delete=M,ye.prototype.get=W,ye.prototype.has=ne,ye.prototype.set=oe,m.exports=ye}),ze=o((h,m)=>{var _=Q(),C=function(){try{var M=_(Object,"defineProperty");return M({},"",{}),M}catch{}}();m.exports=C}),Ce=o((h,m)=>{var _=ze();function C(M,W,ne){W=="__proto__"&&_?_(M,W,{configurable:!0,enumerable:!0,value:ne,writable:!0}):M[W]=ne}m.exports=C}),ve=o((h,m)=>{var _=Ce(),C=d();function M(W,ne,oe){(oe!==void 0&&!C(W[ne],oe)||oe===void 0&&!(ne in W))&&_(W,ne,oe)}m.exports=M}),Ve=o((h,m)=>{function _(C){return function(M,W,ne){for(var oe=-1,ye=Object(M),Ee=ne(M),rt=Ee.length;rt--;){var qe=Ee[C?rt:++oe];if(W(ye[qe],qe,ye)===!1)break}return M}}m.exports=_}),Ye=o((h,m)=>{var _=Ve(),C=_();m.exports=C}),Ze=o((h,m)=>{var _=ge(),C=typeof h=="object"&&h&&!h.nodeType&&h,M=C&&typeof m=="object"&&m&&!m.nodeType&&m,W=M&&M.exports===C,ne=W?_.Buffer:void 0,oe=ne?ne.allocUnsafe:void 0;function ye(Ee,rt){if(rt)return Ee.slice();var qe=Ee.length,wt=oe?oe(qe):new Ee.constructor(qe);return Ee.copy(wt),wt}m.exports=ye}),_t=o((h,m)=>{var _=ge(),C=_.Uint8Array;m.exports=C}),We=o((h,m)=>{var _=_t();function C(M){var W=new M.constructor(M.byteLength);return new _(W).set(new _(M)),W}m.exports=C}),ut=o((h,m)=>{var _=We();function C(M,W){var ne=W?_(M.buffer):M.buffer;return new M.constructor(ne,M.byteOffset,M.length)}m.exports=C}),Vt=o((h,m)=>{function _(C,M){var W=-1,ne=C.length;for(M||(M=Array(ne));++W<ne;)M[W]=C[W];return M}m.exports=_}),tn=o((h,m)=>{var _=B(),C=Object.create,M=function(){function W(){}return function(ne){if(!_(ne))return{};if(C)return C(ne);W.prototype=ne;var oe=new W;return W.prototype=void 0,oe}}();m.exports=M}),bn=o((h,m)=>{function _(C,M){return function(W){return C(M(W))}}m.exports=_}),et=o((h,m)=>{var _=bn(),C=_(Object.getPrototypeOf,Object);m.exports=C}),at=o((h,m)=>{var _=Object.prototype;function C(M){var W=M&&M.constructor,ne=typeof W=="function"&&W.prototype||_;return M===ne}m.exports=C}),it=o((h,m)=>{var _=tn(),C=et(),M=at();function W(ne){return typeof ne.constructor=="function"&&!M(ne)?_(C(ne)):{}}m.exports=W}),zt=o((h,m)=>{function _(C){return C!=null&&typeof C=="object"}m.exports=_}),Kt=o((h,m)=>{var _=Z(),C=zt(),M="[object Arguments]";function W(ne){return C(ne)&&_(ne)==M}m.exports=W}),Nn=o((h,m)=>{var _=Kt(),C=zt(),M=Object.prototype,W=M.hasOwnProperty,ne=M.propertyIsEnumerable,oe=_(function(){return arguments}())?_:function(ye){return C(ye)&&W.call(ye,"callee")&&!ne.call(ye,"callee")};m.exports=oe}),yn=o((h,m)=>{var _=Array.isArray;m.exports=_}),Dn=o((h,m)=>{var _=9007199254740991;function C(M){return typeof M=="number"&&M>-1&&M%1==0&&M<=_}m.exports=C}),er=o((h,m)=>{var _=I(),C=Dn();function M(W){return W!=null&&C(W.length)&&!_(W)}m.exports=M}),Qt=o((h,m)=>{var _=er(),C=zt();function M(W){return C(W)&&_(W)}m.exports=M}),Cn=o((h,m)=>{function _(){return!1}m.exports=_}),Mn=o((h,m)=>{var _=ge(),C=Cn(),M=typeof h=="object"&&h&&!h.nodeType&&h,W=M&&typeof m=="object"&&m&&!m.nodeType&&m,ne=W&&W.exports===M,oe=ne?_.Buffer:void 0,ye=oe?oe.isBuffer:void 0,Ee=ye||C;m.exports=Ee}),tr=o((h,m)=>{var _=Z(),C=et(),M=zt(),W="[object Object]",ne=Function.prototype,oe=Object.prototype,ye=ne.toString,Ee=oe.hasOwnProperty,rt=ye.call(Object);function qe(wt){if(!M(wt)||_(wt)!=W)return!1;var It=C(wt);if(It===null)return!0;var en=Ee.call(It,"constructor")&&It.constructor;return typeof en=="function"&&en instanceof en&&ye.call(en)==rt}m.exports=qe}),yr=o((h,m)=>{var _=Z(),C=Dn(),M=zt(),W="[object Arguments]",ne="[object Array]",oe="[object Boolean]",ye="[object Date]",Ee="[object Error]",rt="[object Function]",qe="[object Map]",wt="[object Number]",It="[object Object]",en="[object RegExp]",xn="[object Set]",An="[object String]",br="[object WeakMap]",nt="[object ArrayBuffer]",st="[object DataView]",gt="[object Float32Array]",jt="[object Float64Array]",Et="[object Int8Array]",Bt="[object Int16Array]",be="[object Int32Array]",ke="[object Uint8Array]",$e="[object Uint8ClampedArray]",je="[object Uint16Array]",He="[object Uint32Array]",Ge={};Ge[gt]=Ge[jt]=Ge[Et]=Ge[Bt]=Ge[be]=Ge[ke]=Ge[$e]=Ge[je]=Ge[He]=!0,Ge[W]=Ge[ne]=Ge[nt]=Ge[oe]=Ge[st]=Ge[ye]=Ge[Ee]=Ge[rt]=Ge[qe]=Ge[wt]=Ge[It]=Ge[en]=Ge[xn]=Ge[An]=Ge[br]=!1;function ht(dt){return M(dt)&&C(dt.length)&&!!Ge[_(dt)]}m.exports=ht}),xr=o((h,m)=>{function _(C){return function(M){return C(M)}}m.exports=_}),cr=o((h,m)=>{var _=te(),C=typeof h=="object"&&h&&!h.nodeType&&h,M=C&&typeof m=="object"&&m&&!m.nodeType&&m,W=M&&M.exports===C,ne=W&&_.process,oe=function(){try{var ye=M&&M.require&&M.require("util").types;return ye||ne&&ne.binding&&ne.binding("util")}catch{}}();m.exports=oe}),Gr=o((h,m)=>{var _=yr(),C=xr(),M=cr(),W=M&&M.isTypedArray,ne=W?C(W):_;m.exports=ne}),zs=o((h,m)=>{function _(C,M){if(!(M==="constructor"&&typeof C[M]=="function")&&M!="__proto__")return C[M]}m.exports=_}),Ai=o((h,m)=>{var _=Ce(),C=d(),M=Object.prototype,W=M.hasOwnProperty;function ne(oe,ye,Ee){var rt=oe[ye];(!(W.call(oe,ye)&&C(rt,Ee))||Ee===void 0&&!(ye in oe))&&_(oe,ye,Ee)}m.exports=ne}),Oo=o((h,m)=>{var _=Ai(),C=Ce();function M(W,ne,oe,ye){var Ee=!oe;oe||(oe={});for(var rt=-1,qe=ne.length;++rt<qe;){var wt=ne[rt],It=ye?ye(oe[wt],W[wt],wt,oe,W):void 0;It===void 0&&(It=W[wt]),Ee?C(oe,wt,It):_(oe,wt,It)}return oe}m.exports=M}),Ds=o((h,m)=>{function _(C,M){for(var W=-1,ne=Array(C);++W<C;)ne[W]=M(W);return ne}m.exports=_}),nr=o((h,m)=>{var _=9007199254740991,C=/^(?:0|[1-9]\d*)$/;function M(W,ne){var oe=typeof W;return ne=ne??_,!!ne&&(oe=="number"||oe!="symbol"&&C.test(W))&&W>-1&&W%1==0&&W<ne}m.exports=M}),Os=o((h,m)=>{var _=Ds(),C=Nn(),M=yn(),W=Mn(),ne=nr(),oe=Gr(),ye=Object.prototype,Ee=ye.hasOwnProperty;function rt(qe,wt){var It=M(qe),en=!It&&C(qe),xn=!It&&!en&&W(qe),An=!It&&!en&&!xn&&oe(qe),br=It||en||xn||An,nt=br?_(qe.length,String):[],st=nt.length;for(var gt in qe)(wt||Ee.call(qe,gt))&&!(br&&(gt=="length"||xn&&(gt=="offset"||gt=="parent")||An&&(gt=="buffer"||gt=="byteLength"||gt=="byteOffset")||ne(gt,st)))&&nt.push(gt);return nt}m.exports=rt}),No=o((h,m)=>{function _(C){var M=[];if(C!=null)for(var W in Object(C))M.push(W);return M}m.exports=_}),lt=o((h,m)=>{var _=B(),C=at(),M=No(),W=Object.prototype,ne=W.hasOwnProperty;function oe(ye){if(!_(ye))return M(ye);var Ee=C(ye),rt=[];for(var qe in ye)qe=="constructor"&&(Ee||!ne.call(ye,qe))||rt.push(qe);return rt}m.exports=oe}),Re=o((h,m)=>{var _=Os(),C=lt(),M=er();function W(ne){return M(ne)?_(ne,!0):C(ne)}m.exports=W}),ft=o((h,m)=>{var _=Oo(),C=Re();function M(W){return _(W,C(W))}m.exports=M}),En=o((h,m)=>{var _=ve(),C=Ze(),M=ut(),W=Vt(),ne=it(),oe=Nn(),ye=yn(),Ee=Qt(),rt=Mn(),qe=I(),wt=B(),It=tr(),en=Gr(),xn=zs(),An=ft();function br(nt,st,gt,jt,Et,Bt,be){var ke=xn(nt,gt),$e=xn(st,gt),je=be.get($e);if(je){_(nt,gt,je);return}var He=Bt?Bt(ke,$e,gt+"",nt,st,be):void 0,Ge=He===void 0;if(Ge){var ht=ye($e),dt=!ht&&rt($e),yt=!ht&&!dt&&en($e);He=$e,ht||dt||yt?ye(ke)?He=ke:Ee(ke)?He=W(ke):dt?(Ge=!1,He=C($e,!0)):yt?(Ge=!1,He=M($e,!0)):He=[]:It($e)||oe($e)?(He=ke,oe(ke)?He=An(ke):(!wt(ke)||qe(ke))&&(He=ne($e))):Ge=!1}Ge&&(be.set($e,He),Et(He,$e,jt,Bt,be),be.delete($e)),_(nt,gt,He)}m.exports=br}),Un=o((h,m)=>{var _=ce(),C=ve(),M=Ye(),W=En(),ne=B(),oe=Re(),ye=zs();function Ee(rt,qe,wt,It,en){rt!==qe&&M(qe,function(xn,An){if(en||(en=new _),ne(xn))W(rt,qe,An,wt,Ee,It,en);else{var br=It?It(ye(rt,An),xn,An+"",rt,qe,en):void 0;br===void 0&&(br=xn),C(rt,An,br)}},oe)}m.exports=Ee}),wn=o((h,m)=>{function _(C){return C}m.exports=_}),Ut=o((h,m)=>{function _(C,M,W){switch(W.length){case 0:return C.call(M);case 1:return C.call(M,W[0]);case 2:return C.call(M,W[0],W[1]);case 3:return C.call(M,W[0],W[1],W[2])}return C.apply(M,W)}m.exports=_}),Jn=o((h,m)=>{var _=Ut(),C=Math.max;function M(W,ne,oe){return ne=C(ne===void 0?W.length-1:ne,0),function(){for(var ye=arguments,Ee=-1,rt=C(ye.length-ne,0),qe=Array(rt);++Ee<rt;)qe[Ee]=ye[ne+Ee];Ee=-1;for(var wt=Array(ne+1);++Ee<ne;)wt[Ee]=ye[Ee];return wt[ne]=oe(qe),_(W,this,wt)}}m.exports=M}),Ct=o((h,m)=>{function _(C){return function(){return C}}m.exports=_}),Ht=o((h,m)=>{var _=Ct(),C=ze(),M=wn(),W=C?function(ne,oe){return C(ne,"toString",{configurable:!0,enumerable:!1,value:_(oe),writable:!0})}:M;m.exports=W}),Ln=o((h,m)=>{var _=800,C=16,M=Date.now;function W(ne){var oe=0,ye=0;return function(){var Ee=M(),rt=C-(Ee-ye);if(ye=Ee,rt>0){if(++oe>=_)return arguments[0]}else oe=0;return ne.apply(void 0,arguments)}}m.exports=W}),jr=o((h,m)=>{var _=Ht(),C=Ln(),M=C(_);m.exports=M}),un=o((h,m)=>{var _=wn(),C=Jn(),M=jr();function W(ne,oe){return M(C(ne,oe,_),ne+"")}m.exports=W}),an=o((h,m)=>{var _=d(),C=er(),M=nr(),W=B();function ne(oe,ye,Ee){if(!W(Ee))return!1;var rt=typeof ye;return(rt=="number"?C(Ee)&&M(ye,Ee.length):rt=="string"&&ye in Ee)?_(Ee[ye],oe):!1}m.exports=ne}),qn=o((h,m)=>{var _=un(),C=an();function M(W){return _(function(ne,oe){var ye=-1,Ee=oe.length,rt=Ee>1?oe[Ee-1]:void 0,qe=Ee>2?oe[2]:void 0;for(rt=W.length>3&&typeof rt=="function"?(Ee--,rt):void 0,qe&&C(oe[0],oe[1],qe)&&(rt=Ee<3?void 0:rt,Ee=1),ne=Object(ne);++ye<Ee;){var wt=oe[ye];wt&&W(ne,wt,ye,rt)}return ne})}m.exports=M}),li=o((h,m)=>{var _=Un(),C=qn(),M=C(function(W,ne,oe){_(W,ne,oe)});m.exports=M}),xi=o((h,m)=>{var _=Z(),C=zt(),M="[object Symbol]";function W(ne){return typeof ne=="symbol"||C(ne)&&_(ne)==M}m.exports=W}),zi=o((h,m)=>{var _=yn(),C=xi(),M=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/;function ne(oe,ye){if(_(oe))return!1;var Ee=typeof oe;return Ee=="number"||Ee=="symbol"||Ee=="boolean"||oe==null||C(oe)?!0:W.test(oe)||!M.test(oe)||ye!=null&&oe in Object(ye)}m.exports=ne}),Jr=o((h,m)=>{var _=ee(),C="Expected a function";function M(W,ne){if(typeof W!="function"||ne!=null&&typeof ne!="function")throw new TypeError(C);var oe=function(){var ye=arguments,Ee=ne?ne.apply(this,ye):ye[0],rt=oe.cache;if(rt.has(Ee))return rt.get(Ee);var qe=W.apply(this,ye);return oe.cache=rt.set(Ee,qe)||rt,qe};return oe.cache=new(M.Cache||_),oe}M.Cache=_,m.exports=M}),_r=o((h,m)=>{var _=Jr(),C=500;function M(W){var ne=_(W,function(ye){return oe.size===C&&oe.clear(),ye}),oe=ne.cache;return ne}m.exports=M}),kr=o((h,m)=>{var _=_r(),C=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,M=/\\(\\)?/g,W=_(function(ne){var oe=[];return ne.charCodeAt(0)===46&&oe.push(""),ne.replace(C,function(ye,Ee,rt,qe){oe.push(rt?qe.replace(M,"$1"):Ee||ye)}),oe});m.exports=W}),di=o((h,m)=>{function _(C,M){for(var W=-1,ne=C==null?0:C.length,oe=Array(ne);++W<ne;)oe[W]=M(C[W],W,C);return oe}m.exports=_}),Ir=o((h,m)=>{var _=pe(),C=di(),M=yn(),W=xi(),ne=_?_.prototype:void 0,oe=ne?ne.toString:void 0;function ye(Ee){if(typeof Ee=="string")return Ee;if(M(Ee))return C(Ee,ye)+"";if(W(Ee))return oe?oe.call(Ee):"";var rt=Ee+"";return rt=="0"&&1/Ee==-1/0?"-0":rt}m.exports=ye}),on=o((h,m)=>{var _=Ir();function C(M){return M==null?"":_(M)}m.exports=C}),Ni=o((h,m)=>{var _=yn(),C=zi(),M=kr(),W=on();function ne(oe,ye){return _(oe)?oe:C(oe,ye)?[oe]:M(W(oe))}m.exports=ne}),vi=o((h,m)=>{var _=xi();function C(M){if(typeof M=="string"||_(M))return M;var W=M+"";return W=="0"&&1/M==-1/0?"-0":W}m.exports=C}),Yi=o((h,m)=>{var _=Ni(),C=vi();function M(W,ne){ne=_(ne,W);for(var oe=0,ye=ne.length;W!=null&&oe<ye;)W=W[C(ne[oe++])];return oe&&oe==ye?W:void 0}m.exports=M}),Qr=o((h,m)=>{var _=Yi();function C(M,W,ne){var oe=M==null?void 0:_(M,W);return oe===void 0?ne:oe}m.exports=C}),fr=o((h,m)=>{(function(_,C){typeof h=="object"&&typeof m<"u"?m.exports=C():(_=_||self).RBush=C()})(h,function(){function _(nt,st,gt,jt,Et){(function Bt(be,ke,$e,je,He){for(;je>$e;){if(je-$e>600){var Ge=je-$e+1,ht=ke-$e+1,dt=Math.log(Ge),yt=.5*Math.exp(2*dt/3),At=.5*Math.sqrt(dt*yt*(Ge-yt)/Ge)*(ht-Ge/2<0?-1:1),Tt=Math.max($e,Math.floor(ke-ht*yt/Ge+At)),ln=Math.min(je,Math.floor(ke+(Ge-ht)*yt/Ge+At));Bt(be,ke,Tt,ln,He)}var Wn=be[ke],Xn=$e,lr=je;for(C(be,$e,ke),He(be[je],Wn)>0&&C(be,$e,je);Xn<lr;){for(C(be,Xn,lr),Xn++,lr--;He(be[Xn],Wn)<0;)Xn++;for(;He(be[lr],Wn)>0;)lr--}He(be[$e],Wn)===0?C(be,$e,lr):C(be,++lr,je),lr<=ke&&($e=lr+1),ke<=lr&&(je=lr-1)}})(nt,st,gt||0,jt||nt.length-1,Et||M)}function C(nt,st,gt){var jt=nt[st];nt[st]=nt[gt],nt[gt]=jt}function M(nt,st){return nt<st?-1:nt>st?1:0}var W=function(nt){nt===void 0&&(nt=9),this._maxEntries=Math.max(4,nt),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function ne(nt,st,gt){if(!gt)return st.indexOf(nt);for(var jt=0;jt<st.length;jt++)if(gt(nt,st[jt]))return jt;return-1}function oe(nt,st){ye(nt,0,nt.children.length,st,nt)}function ye(nt,st,gt,jt,Et){Et||(Et=An(null)),Et.minX=1/0,Et.minY=1/0,Et.maxX=-1/0,Et.maxY=-1/0;for(var Bt=st;Bt<gt;Bt++){var be=nt.children[Bt];Ee(Et,nt.leaf?jt(be):be)}return Et}function Ee(nt,st){return nt.minX=Math.min(nt.minX,st.minX),nt.minY=Math.min(nt.minY,st.minY),nt.maxX=Math.max(nt.maxX,st.maxX),nt.maxY=Math.max(nt.maxY,st.maxY),nt}function rt(nt,st){return nt.minX-st.minX}function qe(nt,st){return nt.minY-st.minY}function wt(nt){return(nt.maxX-nt.minX)*(nt.maxY-nt.minY)}function It(nt){return nt.maxX-nt.minX+(nt.maxY-nt.minY)}function en(nt,st){return nt.minX<=st.minX&&nt.minY<=st.minY&&st.maxX<=nt.maxX&&st.maxY<=nt.maxY}function xn(nt,st){return st.minX<=nt.maxX&&st.minY<=nt.maxY&&st.maxX>=nt.minX&&st.maxY>=nt.minY}function An(nt){return{children:nt,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function br(nt,st,gt,jt,Et){for(var Bt=[st,gt];Bt.length;)if(!((gt=Bt.pop())-(st=Bt.pop())<=jt)){var be=st+Math.ceil((gt-st)/jt/2)*jt;_(nt,be,st,gt,Et),Bt.push(st,be,be,gt)}}return W.prototype.all=function(){return this._all(this.data,[])},W.prototype.search=function(nt){var st=this.data,gt=[];if(!xn(nt,st))return gt;for(var jt=this.toBBox,Et=[];st;){for(var Bt=0;Bt<st.children.length;Bt++){var be=st.children[Bt],ke=st.leaf?jt(be):be;xn(nt,ke)&&(st.leaf?gt.push(be):en(nt,ke)?this._all(be,gt):Et.push(be))}st=Et.pop()}return gt},W.prototype.collides=function(nt){var st=this.data;if(!xn(nt,st))return!1;for(var gt=[];st;){for(var jt=0;jt<st.children.length;jt++){var Et=st.children[jt],Bt=st.leaf?this.toBBox(Et):Et;if(xn(nt,Bt)){if(st.leaf||en(nt,Bt))return!0;gt.push(Et)}}st=gt.pop()}return!1},W.prototype.load=function(nt){if(!nt||!nt.length)return this;if(nt.length<this._minEntries){for(var st=0;st<nt.length;st++)this.insert(nt[st]);return this}var gt=this._build(nt.slice(),0,nt.length-1,0);if(this.data.children.length)if(this.data.height===gt.height)this._splitRoot(this.data,gt);else{if(this.data.height<gt.height){var jt=this.data;this.data=gt,gt=jt}this._insert(gt,this.data.height-gt.height-1,!0)}else this.data=gt;return this},W.prototype.insert=function(nt){return nt&&this._insert(nt,this.data.height-1),this},W.prototype.clear=function(){return this.data=An([]),this},W.prototype.remove=function(nt,st){if(!nt)return this;for(var gt,jt,Et,Bt=this.data,be=this.toBBox(nt),ke=[],$e=[];Bt||ke.length;){if(Bt||(Bt=ke.pop(),jt=ke[ke.length-1],gt=$e.pop(),Et=!0),Bt.leaf){var je=ne(nt,Bt.children,st);if(je!==-1)return Bt.children.splice(je,1),ke.push(Bt),this._condense(ke),this}Et||Bt.leaf||!en(Bt,be)?jt?(gt++,Bt=jt.children[gt],Et=!1):Bt=null:(ke.push(Bt),$e.push(gt),gt=0,jt=Bt,Bt=Bt.children[0])}return this},W.prototype.toBBox=function(nt){return nt},W.prototype.compareMinX=function(nt,st){return nt.minX-st.minX},W.prototype.compareMinY=function(nt,st){return nt.minY-st.minY},W.prototype.toJSON=function(){return this.data},W.prototype.fromJSON=function(nt){return this.data=nt,this},W.prototype._all=function(nt,st){for(var gt=[];nt;)nt.leaf?st.push.apply(st,nt.children):gt.push.apply(gt,nt.children),nt=gt.pop();return st},W.prototype._build=function(nt,st,gt,jt){var Et,Bt=gt-st+1,be=this._maxEntries;if(Bt<=be)return oe(Et=An(nt.slice(st,gt+1)),this.toBBox),Et;jt||(jt=Math.ceil(Math.log(Bt)/Math.log(be)),be=Math.ceil(Bt/Math.pow(be,jt-1))),(Et=An([])).leaf=!1,Et.height=jt;var ke=Math.ceil(Bt/be),$e=ke*Math.ceil(Math.sqrt(be));br(nt,st,gt,$e,this.compareMinX);for(var je=st;je<=gt;je+=$e){var He=Math.min(je+$e-1,gt);br(nt,je,He,ke,this.compareMinY);for(var Ge=je;Ge<=He;Ge+=ke){var ht=Math.min(Ge+ke-1,He);Et.children.push(this._build(nt,Ge,ht,jt-1))}}return oe(Et,this.toBBox),Et},W.prototype._chooseSubtree=function(nt,st,gt,jt){for(;jt.push(st),!st.leaf&&jt.length-1!==gt;){for(var Et=1/0,Bt=1/0,be=void 0,ke=0;ke<st.children.length;ke++){var $e=st.children[ke],je=wt($e),He=(Ge=nt,ht=$e,(Math.max(ht.maxX,Ge.maxX)-Math.min(ht.minX,Ge.minX))*(Math.max(ht.maxY,Ge.maxY)-Math.min(ht.minY,Ge.minY))-je);He<Bt?(Bt=He,Et=je<Et?je:Et,be=$e):He===Bt&&je<Et&&(Et=je,be=$e)}st=be||st.children[0]}var Ge,ht;return st},W.prototype._insert=function(nt,st,gt){var jt=gt?nt:this.toBBox(nt),Et=[],Bt=this._chooseSubtree(jt,this.data,st,Et);for(Bt.children.push(nt),Ee(Bt,jt);st>=0&&Et[st].children.length>this._maxEntries;)this._split(Et,st),st--;this._adjustParentBBoxes(jt,Et,st)},W.prototype._split=function(nt,st){var gt=nt[st],jt=gt.children.length,Et=this._minEntries;this._chooseSplitAxis(gt,Et,jt);var Bt=this._chooseSplitIndex(gt,Et,jt),be=An(gt.children.splice(Bt,gt.children.length-Bt));be.height=gt.height,be.leaf=gt.leaf,oe(gt,this.toBBox),oe(be,this.toBBox),st?nt[st-1].children.push(be):this._splitRoot(gt,be)},W.prototype._splitRoot=function(nt,st){this.data=An([nt,st]),this.data.height=nt.height+1,this.data.leaf=!1,oe(this.data,this.toBBox)},W.prototype._chooseSplitIndex=function(nt,st,gt){for(var jt,Et,Bt,be,ke,$e,je,He=1/0,Ge=1/0,ht=st;ht<=gt-st;ht++){var dt=ye(nt,0,ht,this.toBBox),yt=ye(nt,ht,gt,this.toBBox),At=(Et=dt,Bt=yt,be=void 0,ke=void 0,$e=void 0,je=void 0,be=Math.max(Et.minX,Bt.minX),ke=Math.max(Et.minY,Bt.minY),$e=Math.min(Et.maxX,Bt.maxX),je=Math.min(Et.maxY,Bt.maxY),Math.max(0,$e-be)*Math.max(0,je-ke)),Tt=wt(dt)+wt(yt);At<He?(He=At,jt=ht,Ge=Tt<Ge?Tt:Ge):At===He&&Tt<Ge&&(Ge=Tt,jt=ht)}return jt||gt-st},W.prototype._chooseSplitAxis=function(nt,st,gt){var jt=nt.leaf?this.compareMinX:rt,Et=nt.leaf?this.compareMinY:qe;this._allDistMargin(nt,st,gt,jt)<this._allDistMargin(nt,st,gt,Et)&&nt.children.sort(jt)},W.prototype._allDistMargin=function(nt,st,gt,jt){nt.children.sort(jt);for(var Et=this.toBBox,Bt=ye(nt,0,st,Et),be=ye(nt,gt-st,gt,Et),ke=It(Bt)+It(be),$e=st;$e<gt-st;$e++){var je=nt.children[$e];Ee(Bt,nt.leaf?Et(je):je),ke+=It(Bt)}for(var He=gt-st-1;He>=st;He--){var Ge=nt.children[He];Ee(be,nt.leaf?Et(Ge):Ge),ke+=It(be)}return ke},W.prototype._adjustParentBBoxes=function(nt,st,gt){for(var jt=gt;jt>=0;jt--)Ee(st[jt],nt)},W.prototype._condense=function(nt){for(var st=nt.length-1,gt=void 0;st>=0;st--)nt[st].children.length===0?st>0?(gt=nt[st-1].children).splice(gt.indexOf(nt[st]),1):this.clear():oe(nt[st],this.toBBox)},W})}),On=o(h=>{Object.defineProperty(h,"__esModule",{value:!0}),h.earthRadius=63710088e-1,h.factors={centimeters:h.earthRadius*100,centimetres:h.earthRadius*100,degrees:h.earthRadius/111325,feet:h.earthRadius*3.28084,inches:h.earthRadius*39.37,kilometers:h.earthRadius/1e3,kilometres:h.earthRadius/1e3,meters:h.earthRadius,metres:h.earthRadius,miles:h.earthRadius/1609.344,millimeters:h.earthRadius*1e3,millimetres:h.earthRadius*1e3,nauticalmiles:h.earthRadius/1852,radians:1,yards:h.earthRadius*1.0936},h.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/h.earthRadius,yards:1.0936133},h.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function m(je,He,Ge){Ge===void 0&&(Ge={});var ht={type:"Feature"};return(Ge.id===0||Ge.id)&&(ht.id=Ge.id),Ge.bbox&&(ht.bbox=Ge.bbox),ht.properties=He||{},ht.geometry=je,ht}h.feature=m;function _(je,He,Ge){switch(je){case"Point":return C(He).geometry;case"LineString":return oe(He).geometry;case"Polygon":return W(He).geometry;case"MultiPoint":return qe(He).geometry;case"MultiLineString":return rt(He).geometry;case"MultiPolygon":return wt(He).geometry;default:throw new Error(je+" is invalid")}}h.geometry=_;function C(je,He,Ge){if(Ge===void 0&&(Ge={}),!je)throw new Error("coordinates is required");if(!Array.isArray(je))throw new Error("coordinates must be an Array");if(je.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Bt(je[0])||!Bt(je[1]))throw new Error("coordinates must contain numbers");var ht={type:"Point",coordinates:je};return m(ht,He,Ge)}h.point=C;function M(je,He,Ge){return Ge===void 0&&(Ge={}),Ee(je.map(function(ht){return C(ht,He)}),Ge)}h.points=M;function W(je,He,Ge){Ge===void 0&&(Ge={});for(var ht=0,dt=je;ht<dt.length;ht++){var yt=dt[ht];if(yt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var At=0;At<yt[yt.length-1].length;At++)if(yt[yt.length-1][At]!==yt[0][At])throw new Error("First and last Position are not equivalent.")}var Tt={type:"Polygon",coordinates:je};return m(Tt,He,Ge)}h.polygon=W;function ne(je,He,Ge){return Ge===void 0&&(Ge={}),Ee(je.map(function(ht){return W(ht,He)}),Ge)}h.polygons=ne;function oe(je,He,Ge){if(Ge===void 0&&(Ge={}),je.length<2)throw new Error("coordinates must be an array of two or more positions");var ht={type:"LineString",coordinates:je};return m(ht,He,Ge)}h.lineString=oe;function ye(je,He,Ge){return Ge===void 0&&(Ge={}),Ee(je.map(function(ht){return oe(ht,He)}),Ge)}h.lineStrings=ye;function Ee(je,He){He===void 0&&(He={});var Ge={type:"FeatureCollection"};return He.id&&(Ge.id=He.id),He.bbox&&(Ge.bbox=He.bbox),Ge.features=je,Ge}h.featureCollection=Ee;function rt(je,He,Ge){Ge===void 0&&(Ge={});var ht={type:"MultiLineString",coordinates:je};return m(ht,He,Ge)}h.multiLineString=rt;function qe(je,He,Ge){Ge===void 0&&(Ge={});var ht={type:"MultiPoint",coordinates:je};return m(ht,He,Ge)}h.multiPoint=qe;function wt(je,He,Ge){Ge===void 0&&(Ge={});var ht={type:"MultiPolygon",coordinates:je};return m(ht,He,Ge)}h.multiPolygon=wt;function It(je,He,Ge){Ge===void 0&&(Ge={});var ht={type:"GeometryCollection",geometries:je};return m(ht,He,Ge)}h.geometryCollection=It;function en(je,He){if(He===void 0&&(He=0),He&&!(He>=0))throw new Error("precision must be a positive number");var Ge=Math.pow(10,He||0);return Math.round(je*Ge)/Ge}h.round=en;function xn(je,He){He===void 0&&(He="kilometers");var Ge=h.factors[He];if(!Ge)throw new Error(He+" units is invalid");return je*Ge}h.radiansToLength=xn;function An(je,He){He===void 0&&(He="kilometers");var Ge=h.factors[He];if(!Ge)throw new Error(He+" units is invalid");return je/Ge}h.lengthToRadians=An;function br(je,He){return st(An(je,He))}h.lengthToDegrees=br;function nt(je){var He=je%360;return He<0&&(He+=360),He}h.bearingToAzimuth=nt;function st(je){var He=je%(2*Math.PI);return He*180/Math.PI}h.radiansToDegrees=st;function gt(je){var He=je%360;return He*Math.PI/180}h.degreesToRadians=gt;function jt(je,He,Ge){if(He===void 0&&(He="kilometers"),Ge===void 0&&(Ge="kilometers"),!(je>=0))throw new Error("length must be a positive number");return xn(An(je,He),Ge)}h.convertLength=jt;function Et(je,He,Ge){if(He===void 0&&(He="meters"),Ge===void 0&&(Ge="kilometers"),!(je>=0))throw new Error("area must be a positive number");var ht=h.areaFactors[He];if(!ht)throw new Error("invalid original units");var dt=h.areaFactors[Ge];if(!dt)throw new Error("invalid final units");return je/ht*dt}h.convertArea=Et;function Bt(je){return!isNaN(je)&&je!==null&&!Array.isArray(je)}h.isNumber=Bt;function be(je){return!!je&&je.constructor===Object}h.isObject=be;function ke(je){if(!je)throw new Error("bbox is required");if(!Array.isArray(je))throw new Error("bbox must be an Array");if(je.length!==4&&je.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");je.forEach(function(He){if(!Bt(He))throw new Error("bbox must only contain numbers")})}h.validateBBox=ke;function $e(je){if(!je)throw new Error("id is required");if(["string","number"].indexOf(typeof je)===-1)throw new Error("id must be a number or a string")}h.validateId=$e}),Lr=o(h=>{Object.defineProperty(h,"__esModule",{value:!0});var m=On();function _(st,gt,jt){if(st!==null)for(var Et,Bt,be,ke,$e,je,He,Ge=0,ht=0,dt,yt=st.type,At=yt==="FeatureCollection",Tt=yt==="Feature",ln=At?st.features.length:1,Wn=0;Wn<ln;Wn++){He=At?st.features[Wn].geometry:Tt?st.geometry:st,dt=He?He.type==="GeometryCollection":!1,$e=dt?He.geometries.length:1;for(var Xn=0;Xn<$e;Xn++){var lr=0,_i=0;if(ke=dt?He.geometries[Xn]:He,ke!==null){je=ke.coordinates;var Bi=ke.type;switch(Ge=jt&&(Bi==="Polygon"||Bi==="MultiPolygon")?1:0,Bi){case null:break;case"Point":if(gt(je,ht,Wn,lr,_i)===!1)return!1;ht++,lr++;break;case"LineString":case"MultiPoint":for(Et=0;Et<je.length;Et++){if(gt(je[Et],ht,Wn,lr,_i)===!1)return!1;ht++,Bi==="MultiPoint"&&lr++}Bi==="LineString"&&lr++;break;case"Polygon":case"MultiLineString":for(Et=0;Et<je.length;Et++){for(Bt=0;Bt<je[Et].length-Ge;Bt++){if(gt(je[Et][Bt],ht,Wn,lr,_i)===!1)return!1;ht++}Bi==="MultiLineString"&&lr++,Bi==="Polygon"&&_i++}Bi==="Polygon"&&lr++;break;case"MultiPolygon":for(Et=0;Et<je.length;Et++){for(_i=0,Bt=0;Bt<je[Et].length;Bt++){for(be=0;be<je[Et][Bt].length-Ge;be++){if(gt(je[Et][Bt][be],ht,Wn,lr,_i)===!1)return!1;ht++}_i++}lr++}break;case"GeometryCollection":for(Et=0;Et<ke.geometries.length;Et++)if(_(ke.geometries[Et],gt,jt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function C(st,gt,jt,Et){var Bt=jt;return _(st,function(be,ke,$e,je,He){ke===0&&jt===void 0?Bt=be:Bt=gt(Bt,be,ke,$e,je,He)},Et),Bt}function M(st,gt){var jt;switch(st.type){case"FeatureCollection":for(jt=0;jt<st.features.length&&gt(st.features[jt].properties,jt)!==!1;jt++);break;case"Feature":gt(st.properties,0);break}}function W(st,gt,jt){var Et=jt;return M(st,function(Bt,be){be===0&&jt===void 0?Et=Bt:Et=gt(Et,Bt,be)}),Et}function ne(st,gt){if(st.type==="Feature")gt(st,0);else if(st.type==="FeatureCollection")for(var jt=0;jt<st.features.length&&gt(st.features[jt],jt)!==!1;jt++);}function oe(st,gt,jt){var Et=jt;return ne(st,function(Bt,be){be===0&&jt===void 0?Et=Bt:Et=gt(Et,Bt,be)}),Et}function ye(st){var gt=[];return _(st,function(jt){gt.push(jt)}),gt}function Ee(st,gt){var jt,Et,Bt,be,ke,$e,je,He,Ge,ht,dt=0,yt=st.type==="FeatureCollection",At=st.type==="Feature",Tt=yt?st.features.length:1;for(jt=0;jt<Tt;jt++){for($e=yt?st.features[jt].geometry:At?st.geometry:st,He=yt?st.features[jt].properties:At?st.properties:{},Ge=yt?st.features[jt].bbox:At?st.bbox:void 0,ht=yt?st.features[jt].id:At?st.id:void 0,je=$e?$e.type==="GeometryCollection":!1,ke=je?$e.geometries.length:1,Bt=0;Bt<ke;Bt++){if(be=je?$e.geometries[Bt]:$e,be===null){if(gt(null,dt,He,Ge,ht)===!1)return!1;continue}switch(be.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(gt(be,dt,He,Ge,ht)===!1)return!1;break}case"GeometryCollection":{for(Et=0;Et<be.geometries.length;Et++)if(gt(be.geometries[Et],dt,He,Ge,ht)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}dt++}}function rt(st,gt,jt){var Et=jt;return Ee(st,function(Bt,be,ke,$e,je){be===0&&jt===void 0?Et=Bt:Et=gt(Et,Bt,be,ke,$e,je)}),Et}function qe(st,gt){Ee(st,function(jt,Et,Bt,be,ke){var $e=jt===null?null:jt.type;switch($e){case null:case"Point":case"LineString":case"Polygon":return gt(m.feature(jt,Bt,{bbox:be,id:ke}),Et,0)===!1?!1:void 0}var je;switch($e){case"MultiPoint":je="Point";break;case"MultiLineString":je="LineString";break;case"MultiPolygon":je="Polygon";break}for(var He=0;He<jt.coordinates.length;He++){var Ge=jt.coordinates[He],ht={type:je,coordinates:Ge};if(gt(m.feature(ht,Bt),Et,He)===!1)return!1}})}function wt(st,gt,jt){var Et=jt;return qe(st,function(Bt,be,ke){be===0&&ke===0&&jt===void 0?Et=Bt:Et=gt(Et,Bt,be,ke)}),Et}function It(st,gt){qe(st,function(jt,Et,Bt){var be=0;if(jt.geometry){var ke=jt.geometry.type;if(!(ke==="Point"||ke==="MultiPoint")){var $e,je=0,He=0,Ge=0;if(_(jt,function(ht,dt,yt,At,Tt){if($e===void 0||Et>je||At>He||Tt>Ge){$e=ht,je=Et,He=At,Ge=Tt,be=0;return}var ln=m.lineString([$e,ht],jt.properties);if(gt(ln,Et,Bt,Tt,be)===!1)return!1;be++,$e=ht})===!1)return!1}}})}function en(st,gt,jt){var Et=jt,Bt=!1;return It(st,function(be,ke,$e,je,He){Bt===!1&&jt===void 0?Et=be:Et=gt(Et,be,ke,$e,je,He),Bt=!0}),Et}function xn(st,gt){if(!st)throw new Error("geojson is required");qe(st,function(jt,Et,Bt){if(jt.geometry!==null){var be=jt.geometry.type,ke=jt.geometry.coordinates;switch(be){case"LineString":if(gt(jt,Et,Bt,0,0)===!1)return!1;break;case"Polygon":for(var $e=0;$e<ke.length;$e++)if(gt(m.lineString(ke[$e],jt.properties),Et,Bt,$e)===!1)return!1;break}}})}function An(st,gt,jt){var Et=jt;return xn(st,function(Bt,be,ke,$e){be===0&&jt===void 0?Et=Bt:Et=gt(Et,Bt,be,ke,$e)}),Et}function br(st,gt){if(gt=gt||{},!m.isObject(gt))throw new Error("options is invalid");var jt=gt.featureIndex||0,Et=gt.multiFeatureIndex||0,Bt=gt.geometryIndex||0,be=gt.segmentIndex||0,ke=gt.properties,$e;switch(st.type){case"FeatureCollection":jt<0&&(jt=st.features.length+jt),ke=ke||st.features[jt].properties,$e=st.features[jt].geometry;break;case"Feature":ke=ke||st.properties,$e=st.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":$e=st;break;default:throw new Error("geojson is invalid")}if($e===null)return null;var je=$e.coordinates;switch($e.type){case"Point":case"MultiPoint":return null;case"LineString":return be<0&&(be=je.length+be-1),m.lineString([je[be],je[be+1]],ke,gt);case"Polygon":return Bt<0&&(Bt=je.length+Bt),be<0&&(be=je[Bt].length+be-1),m.lineString([je[Bt][be],je[Bt][be+1]],ke,gt);case"MultiLineString":return Et<0&&(Et=je.length+Et),be<0&&(be=je[Et].length+be-1),m.lineString([je[Et][be],je[Et][be+1]],ke,gt);case"MultiPolygon":return Et<0&&(Et=je.length+Et),Bt<0&&(Bt=je[Et].length+Bt),be<0&&(be=je[Et][Bt].length-be-1),m.lineString([je[Et][Bt][be],je[Et][Bt][be+1]],ke,gt)}throw new Error("geojson is invalid")}function nt(st,gt){if(gt=gt||{},!m.isObject(gt))throw new Error("options is invalid");var jt=gt.featureIndex||0,Et=gt.multiFeatureIndex||0,Bt=gt.geometryIndex||0,be=gt.coordIndex||0,ke=gt.properties,$e;switch(st.type){case"FeatureCollection":jt<0&&(jt=st.features.length+jt),ke=ke||st.features[jt].properties,$e=st.features[jt].geometry;break;case"Feature":ke=ke||st.properties,$e=st.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":$e=st;break;default:throw new Error("geojson is invalid")}if($e===null)return null;var je=$e.coordinates;switch($e.type){case"Point":return m.point(je,ke,gt);case"MultiPoint":return Et<0&&(Et=je.length+Et),m.point(je[Et],ke,gt);case"LineString":return be<0&&(be=je.length+be),m.point(je[be],ke,gt);case"Polygon":return Bt<0&&(Bt=je.length+Bt),be<0&&(be=je[Bt].length+be),m.point(je[Bt][be],ke,gt);case"MultiLineString":return Et<0&&(Et=je.length+Et),be<0&&(be=je[Et].length+be),m.point(je[Et][be],ke,gt);case"MultiPolygon":return Et<0&&(Et=je.length+Et),Bt<0&&(Bt=je[Et].length+Bt),be<0&&(be=je[Et][Bt].length-be),m.point(je[Et][Bt][be],ke,gt)}throw new Error("geojson is invalid")}h.coordAll=ye,h.coordEach=_,h.coordReduce=C,h.featureEach=ne,h.featureReduce=oe,h.findPoint=nt,h.findSegment=br,h.flattenEach=qe,h.flattenReduce=wt,h.geomEach=Ee,h.geomReduce=rt,h.lineEach=xn,h.lineReduce=An,h.propEach=M,h.propReduce=W,h.segmentEach=It,h.segmentReduce=en}),Ls=o(h=>{Object.defineProperty(h,"__esModule",{value:!0});var m=Lr();function _(C){var M=[1/0,1/0,-1/0,-1/0];return m.coordEach(C,function(W){M[0]>W[0]&&(M[0]=W[0]),M[1]>W[1]&&(M[1]=W[1]),M[2]<W[0]&&(M[2]=W[0]),M[3]<W[1]&&(M[3]=W[1])}),M}_.default=_,h.default=_}),vo=o((h,m)=>{var _=fr(),C=On(),M=Lr(),W=Ls().default,ne=M.featureEach;M.coordEach,C.polygon;var oe=C.featureCollection;function ye(Ee){var rt=new _(Ee);return rt.insert=function(qe){if(qe.type!=="Feature")throw new Error("invalid feature");return qe.bbox=qe.bbox?qe.bbox:W(qe),_.prototype.insert.call(this,qe)},rt.load=function(qe){var wt=[];return Array.isArray(qe)?qe.forEach(function(It){if(It.type!=="Feature")throw new Error("invalid features");It.bbox=It.bbox?It.bbox:W(It),wt.push(It)}):ne(qe,function(It){if(It.type!=="Feature")throw new Error("invalid features");It.bbox=It.bbox?It.bbox:W(It),wt.push(It)}),_.prototype.load.call(this,wt)},rt.remove=function(qe,wt){if(qe.type!=="Feature")throw new Error("invalid feature");return qe.bbox=qe.bbox?qe.bbox:W(qe),_.prototype.remove.call(this,qe,wt)},rt.clear=function(){return _.prototype.clear.call(this)},rt.search=function(qe){var wt=_.prototype.search.call(this,this.toBBox(qe));return oe(wt)},rt.collides=function(qe){return _.prototype.collides.call(this,this.toBBox(qe))},rt.all=function(){var qe=_.prototype.all.call(this);return oe(qe)},rt.toJSON=function(){return _.prototype.toJSON.call(this)},rt.fromJSON=function(qe){return _.prototype.fromJSON.call(this,qe)},rt.toBBox=function(qe){var wt;if(qe.bbox)wt=qe.bbox;else if(Array.isArray(qe)&&qe.length===4)wt=qe;else if(Array.isArray(qe)&&qe.length===6)wt=[qe[0],qe[1],qe[3],qe[4]];else if(qe.type==="Feature")wt=W(qe);else if(qe.type==="FeatureCollection")wt=W(qe);else throw new Error("invalid geojson");return{minX:wt[0],minY:wt[1],maxX:wt[2],maxY:wt[3]}},rt}m.exports=ye,m.exports.default=ye});Array.prototype.findIndex=Array.prototype.findIndex||function(h){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var m=Object(this),_=m.length>>>0,C=arguments[1],M=0;M<_;M++)if(h.call(C,m[M],M,m))return M;return-1},Array.prototype.find=Array.prototype.find||function(h){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var m=Object(this),_=m.length>>>0,C=arguments[1],M=0;M<_;M++){var W=m[M];if(h.call(C,W,M,m))return W}},typeof Object.assign!="function"&&(Object.assign=function(h){if(h==null)throw new TypeError("Cannot convert undefined or null to object");h=Object(h);for(var m=1;m<arguments.length;m++){var _=arguments[m];if(_!=null)for(var C in _)Object.prototype.hasOwnProperty.call(_,C)&&(h[C]=_[C])}return h}),function(h){h.forEach(function(m){m.hasOwnProperty("remove")||Object.defineProperty(m,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(h,m){if(this==null)throw new TypeError('"this" is null or not defined');var _=Object(this),C=_.length>>>0;if(C===0)return!1;var M=m|0,W=Math.max(M>=0?M:C-Math.abs(M),0);function ne(oe,ye){return oe===ye||typeof oe=="number"&&typeof ye=="number"&&isNaN(oe)&&isNaN(ye)}for(;W<C;){if(ne(_[W],h))return!0;W++}return!1}});var hr={version:"2.18.3"},Pn=l(li()),rn={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},yi={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},qr={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},ui={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},ps={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},$s={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},Ns={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},dr={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Qs={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},Vi={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},Gi={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},fi={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},kn={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},vn={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Fr={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},hs={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},Vs={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},aa={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},ds={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},ka={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},bl={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},Vn={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},Sr={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},is={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},Ar={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},Ko={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},Aa={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},Ta=kn,Xo={en:rn,de:yi,it:qr,id:ui,ro:ps,ru:$s,es:Ns,nl:dr,fr:Qs,pt:Ta,pt_br:fi,pt_pt:kn,zh:Vi,zh_tw:Gi,pl:vn,sv:Fr,el:hs,hu:Vs,da:aa,no:ds,fa:ka,ua:bl,tr:Vn,cz:Sr,ja:is,fi:Ar,ko:Ko,ky:Aa},la={_globalEditModeEnabled:!1,enableGlobalEditMode(h){let m={...h};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(_=>{this._isRelevantForEdit(_)&&_.pm.enable(m)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(h=>{h.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(h=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(h)},handleLayerAdditionInGlobalEditMode(){let h=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let m in h){let _=h[m];this._isRelevantForEdit(_)&&_.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:h}){this._addedLayersEdit[L.stamp(h)]=h},_isRelevantForEdit(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowEditing}},_l=la,Da={_globalDragModeEnabled:!1,enableGlobalDragMode(){let h=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},h.forEach(m=>{this._isRelevantForDrag(m)&&m.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let h=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,h.forEach(m=>{m.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let h=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let m in h){let _=h[m];this._isRelevantForDrag(_)&&_.pm.enableLayerDrag()}},_layerAddedDrag({layer:h}){this._addedLayersDrag[L.stamp(h)]=h},_isRelevantForDrag(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.draggable}},Er=Da,Kn={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(h=>{this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(h=>{h.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(h){let m=h.target;this._isRelevantForRemoval(m)&&!m.pm.dragging()&&(m.removeFrom(this.map.pm._getContainingLayer()),m.remove(),m instanceof L.LayerGroup?(this._fireRemoveLayerGroup(m),this._fireRemoveLayerGroup(this.map,m)):(m.pm._fireRemove(m),m.pm._fireRemove(this.map,m)))},_isRelevantForRemoval(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let h=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let m in h){let _=h[m];this._isRelevantForRemoval(_)&&(_.pm.enabled()&&_.pm.disable(),_.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:h}){this._addedLayersRemoval[L.stamp(h)]=h}},eo=Kn,yo={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(h=>h instanceof L.Polyline).forEach(h=>{this._isRelevantForRotate(h)&&h.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(h=>h instanceof L.Polyline).forEach(h=>{h.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(h){return h.pm&&h instanceof L.Polyline&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let h=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let m in h){let _=h[m];this._isRelevantForRemoval(_)&&_.pm.enableRotate()}},_layerAddedRotate({layer:h}){this._addedLayersRotate[L.stamp(h)]=h}},lu=yo,Au=l(li()),Bl={_fireDrawStart(h="Draw",m={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},h,m)},_fireDrawEnd(h="Draw",m={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},h,m)},_fireCreate(h,m="Draw",_={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:h,layer:h},m,_)},_fireCenterPlaced(h="Draw",m={}){let _=h==="Draw"?this._layer:void 0,C=h!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:_,layer:C,latlng:this._layer.getLatLng()},h,m)},_fireCut(h,m,_,C="Draw",M={}){this.__fire(h,"pm:cut",{shape:this._shape,layer:m,originalLayer:_},C,M)},_fireEdit(h=this._layer,m="Edit",_={}){this.__fire(h,"pm:edit",{layer:this._layer,shape:this.getShape()},m,_)},_fireEnable(h="Edit",m={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},h,m)},_fireDisable(h="Edit",m={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},h,m)},_fireUpdate(h="Edit",m={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},h,m)},_fireMarkerDragStart(h,m=void 0,_="Edit",C={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:m},_,C)},_fireMarkerDrag(h,m=void 0,_="Edit",C={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:m},_,C)},_fireMarkerDragEnd(h,m=void 0,_=void 0,C="Edit",M={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:m,intersectionReset:_},C,M)},_fireDragStart(h="Edit",m={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},h,m)},_fireDrag(h,m="Edit",_={}){this.__fire(this._layer,"pm:drag",{...h,shape:this.getShape()},m,_)},_fireDragEnd(h="Edit",m={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},h,m)},_fireDragEnable(h="Edit",m={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},h,m)},_fireDragDisable(h="Edit",m={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},h,m)},_fireRemove(h,m=h,_="Edit",C={}){this.__fire(h,"pm:remove",{layer:m,shape:this.getShape()},_,C)},_fireVertexAdded(h,m,_,C="Edit",M={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:h,indexPath:m,latlng:_,shape:this.getShape()},C,M)},_fireVertexRemoved(h,m,_="Edit",C={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:h,indexPath:m,shape:this.getShape()},_,C)},_fireVertexClick(h,m,_="Edit",C={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:h,indexPath:m,shape:this.getShape()},_,C)},_fireIntersect(h,m=this._layer,_="Edit",C={}){this.__fire(m,"pm:intersect",{layer:this._layer,intersection:h,shape:this.getShape()},_,C)},_fireLayerReset(h,m,_="Edit",C={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:h,indexPath:m,shape:this.getShape()},_,C)},_fireChange(h,m="Edit",_={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:h,shape:this.getShape()},m,_)},_fireTextChange(h,m="Edit",_={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:h,shape:this.getShape()},m,_)},_fireTextFocus(h="Edit",m={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},h,m)},_fireTextBlur(h="Edit",m={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},h,m)},_fireSnapDrag(h,m,_="Snapping",C={}){this.__fire(h,"pm:snapdrag",m,_,C)},_fireSnap(h,m,_="Snapping",C={}){this.__fire(h,"pm:snap",m,_,C)},_fireUnsnap(h,m,_="Snapping",C={}){this.__fire(h,"pm:unsnap",m,_,C)},_fireRotationEnable(h,m,_="Rotation",C={}){this.__fire(h,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},_,C)},_fireRotationDisable(h,m="Rotation",_={}){this.__fire(h,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},m,_)},_fireRotationStart(h,m,_="Rotation",C={}){this.__fire(h,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:m},_,C)},_fireRotation(h,m,_,C=this._rotationLayer,M="Rotation",W={}){this.__fire(h,"pm:rotate",{layer:C,helpLayer:this._layer,startAngle:this._startAngle,angle:C.pm.getAngle(),angleDiff:m,oldLatLngs:_,newLatLngs:C.getLatLngs()},M,W)},_fireRotationEnd(h,m,_,C="Rotation",M={}){this.__fire(h,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:m,angle:this._rotationLayer.pm.getAngle(),originLatLngs:_,newLatLngs:this._rotationLayer.getLatLngs()},C,M)},_fireActionClick(h,m,_,C="Toolbar",M={}){this.__fire(this._map,"pm:actionclick",{text:h.text,action:h,btnName:m,button:_},C,M)},_fireButtonClick(h,m,_="Toolbar",C={}){this.__fire(this._map,"pm:buttonclick",{btnName:h,button:m},_,C)},_fireLangChange(h,m,_,C,M="Global",W={}){this.__fire(this.map,"pm:langchange",{oldLang:h,activeLang:m,fallback:_,translations:C},M,W)},_fireGlobalDragModeToggled(h,m="Global",_={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:h,map:this.map},m,_)},_fireGlobalEditModeToggled(h,m="Global",_={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:h,map:this.map},m,_)},_fireGlobalRemovalModeToggled(h,m="Global",_={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:h,map:this.map},m,_)},_fireGlobalCutModeToggled(h="Global",m={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},h,m)},_fireGlobalDrawModeToggled(h="Global",m={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},h,m)},_fireGlobalRotateModeToggled(h="Global",m={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},h,m)},_fireRemoveLayerGroup(h,m=h,_="Edit",C={}){this.__fire(h,"pm:remove",{layer:m,shape:void 0},_,C)},_fireKeyeventEvent(h,m,_,C="Global",M={}){this.__fire(this.map,"pm:keyevent",{event:h,eventType:m,focusOn:_},C,M)},__fire(h,m,_,C,M={}){_=(0,Au.default)(_,M,{source:C}),L.PM.Utils._fireEvent(h,m,_)}},uu=Bl,Tu=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(h){this.map=h,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),h.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(h){let m="document";this.map.getContainer().contains(h.target)&&(m="map");let _={event:h,eventType:h.type,focusOn:m};this._lastEvents[h.type]=_,this._lastEvents.current=_,this.map.pm._fireKeyeventEvent(h,h.type,m)},_onBlur(h){h.altKey=!1;let m={event:h,eventType:h.type,focusOn:"document"};this._lastEvents[h.type]=m,this._lastEvents.current=m},getLastKeyEvent(h="current"){return this._lastEvents[h]},isShiftKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.shiftKey},isAltKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.altKey},isCtrlKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.ctrlKey},isMetaKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.metaKey},getPressedKey(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.key}}),ei=Tu,gs=l(Qr());function mr(h){let m=L.PM.activeLang;return(0,gs.default)(Xo[m],h)||(0,gs.default)(Xo.en,h)||h}function ms(h){for(let m=0;m<h.length;m+=1){let _=h[m];if(Array.isArray(_)){if(ms(_))return!0}else if(_!=null&&_!=="")return!0}return!1}function Rl(h){return h.reduce((m,_)=>{if(_.length!==0){let C=Array.isArray(_)?Rl(_):_;Array.isArray(C)?C.length!==0&&m.push(C):m.push(C)}return m},[])}function Ya(h,m,_){let C={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:M,b:W,f:ne}=C,oe=h.lng,ye=h.lat,Ee=_,rt=Math.PI,qe=m*rt/180,wt=Math.sin(qe),It=Math.cos(qe),en=(1-ne)*Math.tan(ye*rt/180),xn=1/Math.sqrt(1+en*en),An=en*xn,br=Math.atan2(en,It),nt=xn*wt,st=1-nt*nt,gt=st*(M*M-W*W)/(W*W),jt=1+gt/16384*(4096+gt*(-768+gt*(320-175*gt))),Et=gt/1024*(256+gt*(-128+gt*(74-47*gt))),Bt=Ee/(W*jt),be=2*Math.PI,ke,$e,je;for(;Math.abs(Bt-be)>1e-12;){ke=Math.cos(2*br+Bt),$e=Math.sin(Bt),je=Math.cos(Bt);let ln=Et*$e*(ke+Et/4*(je*(-1+2*ke*ke)-Et/6*ke*(-3+4*$e*$e)*(-3+4*ke*ke)));be=Bt,Bt=Ee/(W*jt)+ln}let He=An*$e-xn*je*It,Ge=Math.atan2(An*je+xn*$e*It,(1-ne)*Math.sqrt(nt*nt+He*He)),ht=Math.atan2($e*wt,xn*je-An*$e*It),dt=ne/16*st*(4+ne*(4-3*st)),yt=ht-(1-dt)*ne*nt*(Bt+dt*$e*(ke+dt*je*(-1+2*ke*ke))),At=oe+yt*180/rt,Tt=Ge*180/rt;return L.latLng(At,Tt)}function Zi(h,m,_,C,M=!0){let W,ne,oe,ye=[];for(let Ee=0;Ee<_;Ee+=1){if(M)W=Ee*360/_+C,ne=Ya(h,W,m),oe=L.latLng(ne.lng,ne.lat);else{let rt=h.lat+Math.cos(2*Ee*Math.PI/_)*m,qe=h.lng+Math.sin(2*Ee*Math.PI/_)*m;oe=L.latLng(rt,qe)}ye.push(oe)}return ye}function Du(h,m,_){m=(m+360)%360;let C=Math.PI/180,M=180/Math.PI,{R:W}=L.CRS.Earth,ne=h.lng*C,oe=h.lat*C,ye=m*C,Ee=Math.sin(oe),rt=Math.cos(oe),qe=Math.cos(_/W),wt=Math.sin(_/W),It=Math.asin(Ee*qe+rt*wt*Math.cos(ye)),en=ne+Math.atan2(Math.sin(ye)*wt*rt,qe-Ee*Math.sin(It));en*=M;let xn=en-360,An=en<-180?en+360:en;return en=en>180?xn:An,L.latLng([It*M,en])}function Oa(h,m,_){let C=h.latLngToContainerPoint(m),M=h.latLngToContainerPoint(_),W=Math.atan2(M.y-C.y,M.x-C.x)*180/Math.PI+90;return W+=W<0?360:0,W}function cu(h,m,_,C){let M=Oa(h,m,_);return Du(m,M,C)}function hu(h,m,_="asc"){if(!m||Object.keys(m).length===0)return(ye,Ee)=>ye-Ee;let C=Object.keys(m),M,W=C.length-1,ne={};for(;W>=0;)M=C[W],ne[M.toLowerCase()]=m[M],W-=1;function oe(ye){if(ye instanceof L.Marker)return"Marker";if(ye instanceof L.Circle)return"Circle";if(ye instanceof L.CircleMarker)return"CircleMarker";if(ye instanceof L.Rectangle)return"Rectangle";if(ye instanceof L.Polygon)return"Polygon";if(ye instanceof L.Polyline)return"Line"}return(ye,Ee)=>{let rt,qe;if(rt=oe(ye.layer).toLowerCase(),qe=oe(Ee.layer).toLowerCase(),!rt||!qe)return 0;let wt=rt in ne?ne[rt]:Number.MAX_SAFE_INTEGER,It=qe in ne?ne[qe]:Number.MAX_SAFE_INTEGER,en=0;return wt<It?en=-1:wt>It&&(en=1),_==="desc"?en*-1:en}}function ua(h,m=h.getLatLngs()){return h instanceof L.Polygon?L.polygon(m).getLatLngs():L.polyline(m).getLatLngs()}function du(h,m){var _,C,M,W;if((C=(_=m.options.crs)==null?void 0:_.projection)!=null&&C.MAX_LATITUDE){let ne=(W=(M=m.options.crs)==null?void 0:M.projection)==null?void 0:W.MAX_LATITUDE;h.lat=Math.max(Math.min(ne,h.lat),-ne)}return h}function Li(h){return h.options.renderer||h._map&&(h._map._getPaneRenderer(h.options.pane)||h._map.options.renderer||h._map._renderer)||h._renderer}var Ac=L.Class.extend({includes:[_l,Er,eo,lu,uu],initialize(h){this.map=h,this.Draw=new L.PM.Draw(h),this.Toolbar=new L.PM.Toolbar(h),this.Keyboard=ei(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(h)},setLang(h="en",m,_="en"){if(h=h.trim().toLowerCase(),!/^[a-z]{2}$/.test(h)){let M=h.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(M){let W=[`${M[1]}_${M[2]}`,`${M[1]}`];for(let ne of W)if(Xo[ne]){h=ne;break}}}let C=L.PM.activeLang;m&&(Xo[h]=(0,Pn.default)(Xo[_],m)),L.PM.activeLang=h,this.map.pm.Toolbar.reinit(),this._fireLangChange(C,h,_,Xo[h])},addControls(h){this.Toolbar.addControls(h)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(h="Polygon",m){h==="Poly"&&(h="Polygon"),this.Draw.enable(h,m)},disableDraw(h="Polygon"){h==="Poly"&&(h="Polygon"),this.Draw.disable(h)},setPathOptions(h,m={}){let _=m.ignoreShapes||[],C=m.merge||!1;this.map.pm.Draw.shapes.forEach(M=>{_.indexOf(M)===-1&&this.map.pm.Draw[M].setPathOptions(h,C)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(h){let m=(0,Pn.default)(this.globalOptions,h);m.editable&&(m.resizeableCircleMarker=m.editable,delete m.editable);let _=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!m.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),_=!0);let C=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!m.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),C=!0),this.map.pm.Draw.shapes.forEach(M=>{this.map.pm.Draw[M].setOptions(m)}),_&&this.map.pm.Draw.CircleMarker.enable(),C&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(M=>{M.pm.setOptions(m)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=m,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(h=>{h.pm.enabled()&&h.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(h){return this.Draw.Cut.enable(h)},toggleGlobalCutMode(h){return this.Draw.Cut.toggle(h)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(h=!1){let m=L.PM.Utils.findLayers(this.map);if(!h)return m;let _=L.featureGroup();return _._pmTempLayer=!0,m.forEach(C=>{_.addLayer(C)}),_},getGeomanDrawLayers(h=!1){let m=L.PM.Utils.findLayers(this.map).filter(C=>C._drawnByGeoman===!0);if(!h)return m;let _=L.featureGroup();return _._pmTempLayer=!0,m.forEach(C=>{_.addLayer(C)}),_},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(h){this._touchEventCounter===0&&(L.DomEvent.on(h,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(h,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(h){this._touchEventCounter===1&&(L.DomEvent.off(h,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(h,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(h){Li(this.map)._onMouseMove(this._createMouseEvent("mousemove",h))},_canvasTouchClick(h){let m="";h.type==="touchstart"||h.type==="pointerdown"?m="mousedown":(h.type==="touchend"||h.type==="pointerup"||h.type==="touchcancel"||h.type==="pointercancel")&&(m="mouseup"),m&&Li(this.map)._onClick(this._createMouseEvent(m,h))},_createMouseEvent(h,m){let _,C=m.touches[0]||m.changedTouches[0];try{_=new MouseEvent(h,{bubbles:m.bubbles,cancelable:m.cancelable,view:m.view,detail:C.detail,screenX:C.screenX,screenY:C.screenY,clientX:C.clientX,clientY:C.clientY,ctrlKey:m.ctrlKey,altKey:m.altKey,shiftKey:m.shiftKey,metaKey:m.metaKey,button:m.button,relatedTarget:m.relatedTarget})}catch{_=document.createEvent("MouseEvents"),_.initMouseEvent(h,m.bubbles,m.cancelable,m.view,C.detail,C.screenX,C.screenY,C.clientX,C.clientY,m.ctrlKey,m.altKey,m.shiftKey,m.metaKey,m.button,m.relatedTarget)}return _}}),Us=Ac,va=L.Control.extend({includes:[uu],options:{position:"topleft",disableByOtherButtons:!0},initialize(h){this._button=L.Util.extend({},this.options,h)},onAdd(h){return this._map=h,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let h=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),h?h.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(h){return typeof h=="boolean"?this._button.toggleStatus=h:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(h){h&&h.preventDefault(),!this._button.disabled&&(this._button.onClick(h,{button:this,event:h}),this._clicked(h),this._button.afterClick(h,{button:this,event:h}))},_makeButton(h){let m=this.options.position.indexOf("right")>-1?"pos-right":"",_=L.DomUtil.create("div",`button-container  ${m}`,this._container);h.title&&_.setAttribute("title",h.title);let C=L.DomUtil.create("a","leaflet-buttons-control-button",_);C.setAttribute("role","button"),C.setAttribute("tabindex","0"),C.href="#";let M=L.DomUtil.create("div",`leaflet-pm-actions-container ${m}`,_),W=h.actions,ne={cancel:{text:mr("actions.cancel"),title:mr("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:mr("actions.finish"),title:mr("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:mr("actions.removeLastVertex"),title:mr("actions.removeLastVertex"),onClick(){this._map.pm.Draw[h.jsClass]._removeLastVertex()}},finish:{text:mr("actions.finish"),title:mr("actions.finish"),onClick(ye){this._map.pm.Draw[h.jsClass]._finishShape(ye)}}};h._preparedActions=W.map(ye=>{let Ee=typeof ye=="string"?ye:ye.name,rt;if(ne[Ee])rt=ne[Ee];else if(ye.text)rt=ye;else return rt;let qe=L.DomUtil.create("a",`leaflet-pm-action ${m} action-${Ee}`,M);if(qe.setAttribute("role","button"),qe.setAttribute("tabindex","0"),qe.href="#",rt.title&&(qe.title=rt.title),qe.innerHTML=rt.text,L.DomEvent.disableClickPropagation(qe),L.DomEvent.on(qe,"click",L.DomEvent.stop),rt._node=qe,!h.disabled&&rt.onClick){let wt=It=>{It.preventDefault();let en="",{buttons:xn}=this._map.pm.Toolbar;for(let An in xn)if(xn[An]._button===h){en=An;break}this._fireActionClick(rt,en,h)};L.DomEvent.addListener(qe,"click",wt,this),L.DomEvent.addListener(qe,"click",rt.onClick,this),L.DomEvent.addListener(qe,"click",()=>this._updateActiveAction(h))}return rt}),this._updateActiveAction(h),h.toggleStatus&&L.DomUtil.addClass(_,"active");let oe=L.DomUtil.create("div","control-icon",C);return h.iconUrl&&oe.setAttribute("src",h.iconUrl),h.className&&L.DomUtil.addClass(oe,h.className),L.DomEvent.disableClickPropagation(C),L.DomEvent.on(C,"click",L.DomEvent.stop),h.disabled||(L.DomEvent.addListener(C,"click",this._onBtnClick,this),L.DomEvent.addListener(C,"click",this._triggerClick,this)),h.disabled&&(L.DomUtil.addClass(C,"pm-disabled"),C.setAttribute("aria-disabled","true")),_},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let h="",{buttons:m}=this._map.pm.Toolbar;for(let _ in m)if(m[_]._button===this._button){h=_;break}this._fireButtonClick(h,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let h="pm-disabled",m=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(m,h),m.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(m,h),m.setAttribute("aria-disabled","false"))},_updateActiveAction(h){var m;(m=h._preparedActions)==null||m.forEach(_=>{_!=null&&_._node&&(_.isActive&&_.isActive.call(this)?L.DomUtil.addClass(_._node,"active-action"):L.DomUtil.removeClass(_._node,"active-action"))})}}),fu=va;L.Control.PMButton=fu;var ya=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(h){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(h)},reinit(){let h=this.isVisible;this.removeControls(),this._defineButtons(),h&&this.addControls()},init(h){this.map=h,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(h){let m=`${h}Container`;return this[m]||(this[m]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${h} leaflet-bar leaflet-control`)),this[m]},getButtons(){return this.buttons},addControls(h=this.options){typeof h.editPolygon<"u"&&(h.editMode=h.editPolygon),typeof h.deleteLayer<"u"&&(h.removalMode=h.deleteLayer),L.Util.setOptions(this,h),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let h=this.getButtons(),m={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let _ in h){let C=h[_];L.Util.setOptions(C,{className:m.geomanIcons[_]})}},removeControls(){let h=this.getButtons();for(let m in h)h[m].remove();this.isVisible=!1},toggleControls(h=this.options){this.isVisible?this.removeControls():this.addControls(h)},_addButton(h,m){return this.buttons[h]=m,this.options[h]=!!this.options[h]||!1,this.buttons[h]},triggerClickOnToggledButtons(h){for(let m in this.buttons){let _=this.buttons[m];_._button.disableByOtherButtons&&_!==h&&_.toggled()&&_._triggerClick()}},toggleButton(h,m,_=!0){h==="editPolygon"&&(h="editMode"),h==="deleteLayer"&&(h="removalMode");let C=h;return _&&this.triggerClickOnToggledButtons(this.buttons[C]),this.buttons[C]?this.buttons[C].toggle(m):!1},_defineButtons(){let h={className:"control-icon leaflet-pm-icon-marker",title:mr("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},m={title:mr("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},_={className:"control-icon leaflet-pm-icon-polyline",title:mr("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},C={title:mr("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},M={title:mr("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},W={title:mr("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},ne={title:mr("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},oe={title:mr("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ye={title:mr("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Ee={title:mr("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},rt={title:mr("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},qe={className:"control-icon leaflet-pm-icon-text",title:mr("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(h)),this._addButton("drawPolyline",new L.Control.PMButton(_)),this._addButton("drawRectangle",new L.Control.PMButton(W)),this._addButton("drawPolygon",new L.Control.PMButton(m)),this._addButton("drawCircle",new L.Control.PMButton(C)),this._addButton("drawCircleMarker",new L.Control.PMButton(M)),this._addButton("drawText",new L.Control.PMButton(qe)),this._addButton("editMode",new L.Control.PMButton(ne)),this._addButton("dragMode",new L.Control.PMButton(oe)),this._addButton("cutPolygon",new L.Control.PMButton(ye)),this._addButton("removalMode",new L.Control.PMButton(Ee)),this._addButton("rotateMode",new L.Control.PMButton(rt))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let h=this.getButtons(),m=[];this.options.drawControls===!1&&(m=m.concat(Object.keys(h).filter(_=>!h[_]._button.tool))),this.options.editControls===!1&&(m=m.concat(Object.keys(h).filter(_=>h[_]._button.tool==="edit"))),this.options.optionsControls===!1&&(m=m.concat(Object.keys(h).filter(_=>h[_]._button.tool==="options"))),this.options.customControls===!1&&(m=m.concat(Object.keys(h).filter(_=>h[_]._button.tool==="custom")));for(let _ in h)if(this.options[_]&&m.indexOf(_)===-1){let C=h[_]._button.tool;C||(C="draw"),h[_].setPosition(this._getBtnPosition(C)),h[_].addTo(this.map)}},_getBtnPosition(h){return this.options.positions&&this.options.positions[h]?this.options.positions[h]:this.options.position},setBlockPosition(h,m){this.options.positions[h]=m,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(h,m){if(m)typeof m!="object"&&(m={name:m});else throw new TypeError("Button has no name");let _=this._btnNameMapping(h);if(!m.name)throw new TypeError("Button has no name");if(this.buttons[m.name])throw new TypeError("Button with this name already exists");let C=this.map.pm.Draw.createNewDrawInstance(m.name,_);m={...this.buttons[_]._button,...m};let M=this.createCustomControl(m);return{drawInstance:C,control:M}},createCustomControl(h){if(!h.name)throw new TypeError("Button has no name");if(this.buttons[h.name])throw new TypeError("Button with this name already exists");h.onClick||(h.onClick=()=>{}),h.afterClick||(h.afterClick=()=>{}),h.toggle!==!1&&(h.toggle=!0),h.block&&(h.block=h.block.toLowerCase()),(!h.block||h.block==="draw")&&(h.block=""),h.className?h.className.indexOf("control-icon")===-1&&(h.className=`control-icon ${h.className}`):h.className="control-icon";let m={tool:h.block,className:h.className,title:h.title||"",jsClass:h.name,onClick:h.onClick,afterClick:h.afterClick,doToggle:h.toggle,toggleStatus:!1,disableOtherButtons:h.disableOtherButtons??!0,disableByOtherButtons:h.disableByOtherButtons??!0,cssToggle:h.toggle,position:this.options.position,actions:h.actions||[],disabled:!!h.disabled};this.options[h.name]!==!1&&(this.options[h.name]=!0);let _=this._addButton(h.name,new L.Control.PMButton(m));return this.changeControlOrder(),_},controlExists(h){return!!this.getButton(h)},getButton(h){return this.getButtons()[h]},getButtonsInBlock(h){let m={};if(h)for(let _ in this.getButtons()){let C=this.getButtons()[_];(C._button.tool===h||h==="draw"&&!C._button.tool)&&(m[_]=C)}return m},changeControlOrder(h=[]){let m=this._shapeMapping(),_=[];h.forEach(W=>{m[W]?_.push(m[W]):_.push(W)});let C=this.getButtons(),M={};_.forEach(W=>{C[W]&&(M[W]=C[W])}),Object.keys(C).filter(W=>!C[W]._button.tool||C[W]._button.tool==="draw").forEach(W=>{_.indexOf(W)===-1&&(M[W]=C[W])}),Object.keys(C).filter(W=>C[W]._button.tool==="edit").forEach(W=>{_.indexOf(W)===-1&&(M[W]=C[W])}),Object.keys(C).filter(W=>C[W]._button.tool==="options").forEach(W=>{_.indexOf(W)===-1&&(M[W]=C[W])}),Object.keys(C).filter(W=>C[W]._button.tool==="custom").forEach(W=>{_.indexOf(W)===-1&&(M[W]=C[W])}),Object.keys(C).forEach(W=>{_.indexOf(W)===-1&&(M[W]=C[W])}),this.map.pm.Toolbar.buttons=M,this._showHideButtons()},getControlOrder(){let h=this.getButtons(),m=[];for(let _ in h)m.push(_);return m},changeActionsOfControl(h,m){let _=this._btnNameMapping(h);if(!_)throw new TypeError("No name passed");if(!m)throw new TypeError("No actions passed");if(!this.buttons[_])throw new TypeError("Button with this name not exists");this.buttons[_]._button.actions=m,this.changeControlOrder()},setButtonDisabled(h,m){let _=this._btnNameMapping(h);m?this.buttons[_].disable():this.buttons[_].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(h){let m=this._shapeMapping();return m[h]?m[h]:h}}),Fl=ya,jl=l(li()),Si={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(h){h.forEach(m=>{if(Array.isArray(m)){this._assignEvents(m);return}m.off("drag",this._handleSnapping,this),m.on("drag",this._handleSnapping,this),m.off("dragend",this._cleanupSnapping,this),m.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(h){if(h){let m=h.target;m._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(m=>{m.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(h){var oe,ye,Ee;let m=h.target;if(m._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((oe=h==null?void 0:h.originalEvent)==null?void 0:oe.altKey)||((Ee=(ye=this._map)==null?void 0:ye.pm)==null?void 0:Ee.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let _=this._calcClosestLayer(m.getLatLng(),this._snapList);if(Object.keys(_).length===0)return!1;let C=_.layer instanceof L.Marker||_.layer instanceof L.CircleMarker||!this.options.snapSegment,M;C?M=_.latlng:M=this._checkPrioritiySnapping(_);let W=this.options.snapDistance,ne={marker:m,shape:this._shape,snapLatLng:M,segment:_.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:_.layer,distance:_.distance};if(this._fireSnapDrag(ne.marker,ne),this._fireSnapDrag(this._layer,ne),_.distance<W){m._orgLatLng=m.getLatLng(),m.setLatLng(M),m._snapped=!0,m._snapInfo=ne;let rt=()=>{this._snapLatLng=M,this._fireSnap(m,ne),this._fireSnap(this._layer,ne)},qe=this._snapLatLng||{},wt=M||{};(qe.lat!==wt.lat||qe.lng!==wt.lng)&&rt()}else this._snapLatLng&&(this._unsnap(ne),m._snapped=!1,m._snapInfo=void 0,this._fireUnsnap(ne.marker,ne),this._fireUnsnap(this._layer,ne));return!0},_createSnapList(){let h=[],m=[],_=this._map;_.off("layerremove",this._handleSnapLayerRemoval,this),_.on("layerremove",this._handleSnapLayerRemoval,this),_.eachLayer(C=>{if((C instanceof L.Polyline||C instanceof L.Marker||C instanceof L.CircleMarker||C instanceof L.ImageOverlay)&&C.options.snapIgnore!==!0){if(C.options.snapIgnore===void 0&&(!L.PM.optIn&&C.options.pmIgnore===!0||L.PM.optIn&&C.options.pmIgnore!==!1))return;(C instanceof L.Circle||C instanceof L.CircleMarker)&&C.pm&&C.pm._hiddenPolyCircle?h.push(C.pm._hiddenPolyCircle):C instanceof L.ImageOverlay&&(C=L.rectangle(C.getBounds())),h.push(C);let M=L.polyline([],{color:"red",pmIgnore:!0});M._pmTempLayer=!0,m.push(M),(C instanceof L.Circle||C instanceof L.CircleMarker)&&m.push(M)}}),h=h.filter(C=>this._layer!==C),h=h.filter(C=>C._latlng||C._latlngs&&ms(C._latlngs)),h=h.filter(C=>!C._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let C=L.polyline([],{color:"red",pmIgnore:!0});C._pmTempLayer=!0,m.push(C)}),this._snapList=h.concat(this._otherSnapLayers)):this._snapList=h,this.debugIndicatorLines=m},_handleSnapLayerRemoval({layer:h}){if(!h._leaflet_id)return;let m=this._snapList.findIndex(_=>_._leaflet_id===h._leaflet_id);m>-1&&this._snapList.splice(m,1)},_calcClosestLayer(h,m){return this._calcClosestLayers(h,m,1)[0]},_calcClosestLayers(h,m,_=1){let C=[],M={};m.forEach((ne,oe)=>{var Ee;if(ne._parentCopy&&ne._parentCopy===this._layer||((Ee=ne.getLatLngs)==null?void 0:Ee.call(ne).flat(5).length)<2)return;let ye=this._calcLayerDistances(h,ne);if(ye.distance=Math.floor(ye.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[oe]){let rt=L.polyline([],{color:"red",pmIgnore:!0});rt._pmTempLayer=!0,this.debugIndicatorLines[oe]=rt}this.debugIndicatorLines[oe].setLatLngs([h,ye.latlng])}_===1&&(M.distance===void 0||ye.distance-5<=M.distance)?(ye.distance+5<M.distance&&(C=[]),M=ye,M.layer=ne,C.push(M)):_!==1&&(M={},M=ye,M.layer=ne,C.push(M))}),_!==1&&(C=C.sort((ne,oe)=>ne.distance-oe.distance)),_===-1&&(_=C.length);let W=this._getClosestLayerByPriority(C,_);return L.Util.isArray(W)?W:[W]},_calcLayerDistances(h,m){let _=this._map,C=m instanceof L.Marker||m instanceof L.CircleMarker,M=m instanceof L.Polygon,W=h;if(C){let ne=m.getLatLng();return{latlng:{...ne},distance:this._getDistance(_,ne,W)}}return this._calcLatLngDistances(W,m.getLatLngs(),_,M)},_calcLatLngDistances(h,m,_,C=!1){let M,W,ne,oe=ye=>{ye.forEach((Ee,rt)=>{if(Array.isArray(Ee)){oe(Ee);return}if(this.options.snapSegment){let qe=Ee,wt;C?wt=rt+1===ye.length?0:rt+1:wt=rt+1===ye.length?void 0:rt+1;let It=ye[wt];if(It){let en=this._getDistanceToSegment(_,h,qe,It);(W===void 0||en<W)&&(W=en,ne=[qe,It])}}else{let qe=this._getDistance(_,h,Ee);(W===void 0||qe<W)&&(W=qe,M=Ee)}})};return oe(m),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(_,h,ne[0],ne[1])},segment:ne,distance:W}:{latlng:M,distance:W}},_getClosestLayerByPriority(h,m=1){h=h.sort((ne,oe)=>ne._leaflet_id-oe._leaflet_id);let _=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],C=this._map.pm.globalOptions.snappingOrder||[],M=0,W={};return C.concat(_).forEach(ne=>{W[ne]||(M+=1,W[ne]=M)}),h.sort(hu("instanceofShape",W)),m===1?h[0]||{}:h.slice(0,m)},_checkPrioritiySnapping(h){let m=this._map,_=h.segment[0],C=h.segment[1],M=h.latlng,W=M;if(this.options.snapVertex){let ne=this._getDistance(m,_,M),oe=this._getDistance(m,C,M),ye=ne<oe?_:C,Ee=ne<oe?ne:oe;if(this.options.snapMiddle){let qe=L.PM.Utils.calcMiddleLatLng(m,_,C),wt=this._getDistance(m,qe,M);wt<ne&&wt<oe&&(ye=qe,Ee=wt)}let rt=this.options.snapDistance;Ee<rt&&(W=ye)}return{...W}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(h,m,_,C){let M=h.getMaxZoom();M===1/0&&(M=h.getZoom());let W=h.project(m,M),ne=h.project(_,M),oe=h.project(C,M),ye=L.LineUtil.closestPointOnSegment(W,ne,oe);return h.unproject(ye,M)},_getDistanceToSegment(h,m,_,C){let M=h.latLngToContainerPoint(m),W=h.latLngToContainerPoint(_),ne=h.latLngToContainerPoint(C);return L.LineUtil.pointToSegmentDistance(M,W,ne)},_getDistance(h,m,_){return h.latLngToContainerPoint(m).distanceTo(h.latLngToContainerPoint(_))}},Jo=Si,Za=L.Class.extend({includes:[Jo,uu],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(h){L.Util.setOptions(this,h),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(h){let m=new L.Icon.Default;m.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=m,this._map=h,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(_=>{this[_]=new L.PM.Draw[_](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(h,m=!1){m?this.options.pathOptions=(0,jl.default)(this.options.pathOptions,h):this.options.pathOptions=h},getShapes(){return this.shapes},getShape(){return this._shape},enable(h,m){if(!h)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[h].enable(m)},disable(){this.shapes.forEach(h=>{this[h].disable()})},addControls(){this.shapes.forEach(h=>{this[h].addButton()})},getActiveShape(){let h;return this.shapes.forEach(m=>{this[m]._enabled&&(h=m)}),h},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let h=[];this._map.eachLayer(m=>{(m instanceof L.Polyline||m instanceof L.Marker||m instanceof L.Circle||m instanceof L.CircleMarker||m instanceof L.ImageOverlay)&&(m._pmTempLayer||h.push(m))}),this._enabled?h.forEach(m=>{L.PM.Utils.disablePopup(m)}):h.forEach(m=>{L.PM.Utils.enablePopup(m)})},createNewDrawInstance(h,m){let _=this._getShapeFromBtnName(m);if(this[h])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[_])throw new TypeError(`There is no class L.PM.Draw.${_}`);return this[h]=new L.PM.Draw[_](this._map),this[h].toolbarButtonName=h,this[h]._shape=h,this.shapes.push(h),this[m]&&this[h].setOptions(this[m].options),this[h].setOptions(this[h].options),this[h]},_getShapeFromBtnName(h){let m={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return m[h]?m[h]:this[h]?this[h]._shape:h},_finishLayer(h){h.pm&&(h.pm.setOptions(this.options),h.pm._shape=this._shape,h.pm._map=this._map),this._addDrawnLayerProp(h)},_addDrawnLayerProp(h){h._drawnByGeoman=!0},_setPane(h,m){m==="layerPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":m==="vertexPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":m==="markerPane"&&(h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),vs=Za;vs.Marker=vs.extend({initialize(h){this._map=h,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(mr("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(m=>{this.isRelevantMarker(m)&&m.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},isRelevantMarker(h){return h instanceof L.Marker&&h.pm&&!h._pmTempLayer&&!h.pm._initTextMarker},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let m=h;m.target=this._hintMarker,this._handleSnapping(m)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(h){if(!h.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let m=this._hintMarker.getLatLng(),_=new L.Marker(m,this.options.markerStyle);this._setPane(_,"markerPane"),this._finishLayer(_),_.pm||(_.options.draggable=!1),_.addTo(this._map.pm._getContainingLayer()),_.pm&&this.options.markerEditable?_.pm.enable():_.dragging&&_.dragging.disable(),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var h,m;(h=this.options.markerStyle)!=null&&h.icon&&((m=this._hintMarker)==null||m.setIcon(this.options.markerStyle.icon))}});var F=63710088e-1,xe={centimeters:F*100,centimetres:F*100,degrees:F/111325,feet:F*3.28084,inches:F*39.37,kilometers:F/1e3,kilometres:F/1e3,meters:F,metres:F,miles:F/1609.344,millimeters:F*1e3,millimetres:F*1e3,nauticalmiles:F/1852,radians:1,yards:F*1.0936};function tt(h,m,_){_===void 0&&(_={});var C={type:"Feature"};return(_.id===0||_.id)&&(C.id=_.id),_.bbox&&(C.bbox=_.bbox),C.properties=m||{},C.geometry=h,C}function pt(h,m,_){if(_===void 0&&(_={}),!h)throw new Error("coordinates is required");if(!Array.isArray(h))throw new Error("coordinates must be an Array");if(h.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Cr(h[0])||!Cr(h[1]))throw new Error("coordinates must contain numbers");var C={type:"Point",coordinates:h};return tt(C,m,_)}function Mt(h,m,_){if(_===void 0&&(_={}),h.length<2)throw new Error("coordinates must be an array of two or more positions");var C={type:"LineString",coordinates:h};return tt(C,m,_)}function Wt(h,m){m===void 0&&(m={});var _={type:"FeatureCollection"};return m.id&&(_.id=m.id),m.bbox&&(_.bbox=m.bbox),_.features=h,_}function fn(h,m){m===void 0&&(m="kilometers");var _=xe[m];if(!_)throw new Error(m+" units is invalid");return h*_}function jn(h,m){m===void 0&&(m="kilometers");var _=xe[m];if(!_)throw new Error(m+" units is invalid");return h/_}function Hn(h){var m=h%(2*Math.PI);return m*180/Math.PI}function pr(h){var m=h%360;return m*Math.PI/180}function Cr(h){return!isNaN(h)&&h!==null&&!Array.isArray(h)}function Vr(h){var m,_,C={type:"FeatureCollection",features:[]};if(h.type==="Feature"?_=h.geometry:_=h,_.type==="LineString")m=[_.coordinates];else if(_.type==="MultiLineString")m=_.coordinates;else if(_.type==="MultiPolygon")m=[].concat.apply([],_.coordinates);else if(_.type==="Polygon")m=_.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return m.forEach(function(M){m.forEach(function(W){for(var ne=0;ne<M.length-1;ne++)for(var oe=ne;oe<W.length-1;oe++)if(!(M===W&&(Math.abs(ne-oe)===1||ne===0&&oe===M.length-2&&M[ne][0]===M[M.length-1][0]&&M[ne][1]===M[M.length-1][1]))){var ye=qi(M[ne][0],M[ne][1],M[ne+1][0],M[ne+1][1],W[oe][0],W[oe][1],W[oe+1][0],W[oe+1][1]);ye&&C.features.push(pt([ye[0],ye[1]]))}})}),C}function qi(h,m,_,C,M,W,ne,oe){var ye,Ee,rt,qe,wt,It={x:null,y:null,onLine1:!1,onLine2:!1};return ye=(oe-W)*(_-h)-(ne-M)*(C-m),ye===0?It.x!==null&&It.y!==null?It:!1:(Ee=m-W,rt=h-M,qe=(ne-M)*Ee-(oe-W)*rt,wt=(_-h)*Ee-(C-m)*rt,Ee=qe/ye,rt=wt/ye,It.x=h+Ee*(_-h),It.y=m+Ee*(C-m),Ee>=0&&Ee<=1&&(It.onLine1=!0),rt>=0&&rt<=1&&(It.onLine2=!0),It.onLine1&&It.onLine2?[It.x,It.y]:!1)}vs.Line=vs.extend({initialize(h){this._map=h,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(mr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_syncHintLine(){let h=this._layer.getLatLngs();if(h.length>0){let m=h[h.length-1];this._hintline.setLatLngs([m,this._hintMarker.getLatLng()])}},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let m=this._layer._defaultShape().slice();m.push(this._hintMarker.getLatLng()),this._change(m)},hasSelfIntersection(){return Vr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(h,m){let _=L.polyline(this._layer.getLatLngs());h&&(m||(m=this._hintMarker.getLatLng()),_.addLatLng(m));let C=Vr(_.toGeoJSON(15));this._doesSelfIntersect=C.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(C,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(h){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,h.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let m=this._hintMarker.getLatLng(),_=this._layer.getLatLngs(),C=_[_.length-1];if(m.equals(_[0])||_.length>0&&m.equals(C)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:m,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(m);let M=this._createMarker(m);this._setTooltipText(),this._setHintLineAfterNewVertex(m),this._fireVertexAdded(M,void 0,m,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(h)},_setHintLineAfterNewVertex(h){this._hintline.setLatLngs([h,h])},_removeLastVertex(){let h=this._markers;if(h.length<=1){this.disable();return}let m=this._layer.getLatLngs(),_=h[h.length-1],{indexPath:C}=L.PM.Utils.findDeepMarkerIndex(h,_);h.pop(),this._layerGroup.removeLayer(_);let M=h[h.length-1],W=m.indexOf(M.getLatLng());m=m.slice(0,W+1),this._layer.setLatLngs(m),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(_,C,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=1)return;let m=L.polyline(h,this.options.pathOptions);this._setPane(m,"layerPane"),this._finishLayer(m),m.addTo(this._map.pm._getContainingLayer()),this._fireCreate(m),this.options.snappable&&this._cleanupSnapping();let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},_createMarker(h){let m=new L.Marker(h,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(m,"vertexPane"),m._pmTempLayer=!0,this._layerGroup.addLayer(m),this._markers.push(m),m.on("click",this._finishShape,this),m},_setTooltipText(){let{length:h}=this._layer.getLatLngs().flat(),m="";h<=1?m=mr("tooltips.continueLine"):m=mr("tooltips.finishLine"),this._hintMarker.setTooltipContent(m)},_change(h){this._fireChange(h,"Draw")},setStyle(){var h,m;(h=this._layer)==null||h.setStyle(this.options.templineStyle),(m=this._hintline)==null||m.setStyle(this.options.hintlineStyle)}}),vs.Polygon=vs.Line.extend({initialize(h){this._map=h,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(h){L.PM.Draw.Line.prototype.enable.call(this,h),this._layer.pm._shape="Polygon"},_createMarker(h){let m=new L.Marker(h,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(m,"vertexPane"),m._pmTempLayer=!0,this._layerGroup.addLayer(m),this._markers.push(m),this._layer.getLatLngs().flat().length===1?(m.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(m)-1,this.options.snappable&&this._cleanupSnapping()):m.on("click",()=>1),m},_setTooltipText(){let{length:h}=this._layer.getLatLngs().flat(),m="";h<=2?m=mr("tooltips.continueLine"):m=mr("tooltips.finishPoly"),this._hintMarker.setTooltipContent(m)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=2)return;let m=L.polygon(h,this.options.pathOptions);this._setPane(m,"layerPane"),this._finishLayer(m),m.addTo(this._map.pm._getContainingLayer()),this._fireCreate(m),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))}}),vs.Rectangle=vs.extend({initialize(h){this._map=h,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(h){if(L.Util.setOptions(this,h),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(mr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let m=0;m<2;m+=1){let _=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(_,"vertexPane"),_._pmTempLayer=!0,this._layerGroup.addLayer(_),this._styleMarkers.push(_)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_placeStartingMarkers(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let m=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(m),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(_=>{L.DomUtil.addClass(_._icon,"visible"),_.setLatLng(m)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(mr("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let h=this._startMarker.getLatLng();h&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([h,h]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}let m=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(m,"Draw")},_syncRectangleSize(){let h=du(this._startMarker.getLatLng(),this._map),m=du(this._hintMarker.getLatLng(),this._map),_=L.PM.Utils._getRotatedRectangle(h,m,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(_),this.options.cursorMarker&&this._styleMarkers){let C=[];_.forEach(M=>{!M.equals(h,1e-8)&&!M.equals(m,1e-8)&&C.push(M)}),C.forEach((M,W)=>{try{this._styleMarkers[W].setLatLng(M)}catch{}})}},_findCorners(){let h=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(h[0],h[2],this.options.rectangleAngle||0,this._map)},_finishShape(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let m=this._hintMarker.getLatLng(),_=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||_.equals(m))return;let C=L.rectangle([_,m],this.options.pathOptions);if(this.options.rectangleAngle){let W=L.PM.Utils._getRotatedRectangle(_,m,this.options.rectangleAngle||0,this._map);C.setLatLngs(W),C.pm&&C.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(C,"layerPane"),this._finishLayer(C),C.addTo(this._map.pm._getContainingLayer()),this._fireCreate(C);let M=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(M))},setStyle(){var h;(h=this._layer)==null||h.setStyle(this.options.pathOptions)}}),vs.CircleMarker=vs.extend({initialize(h){this._map=h,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(h){if(L.Util.setOptions(this,h),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let m={};L.extend(m,this.options.templineStyle),m.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),m),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(mr("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(mr("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.disable()})},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_placeCenterMarker(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let m=this._hintMarker.getLatLng();this._centerMarker.setLatLng(m),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let h=this._centerMarker.getLatLng();h&&(this._layer.setLatLng(h),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(mr("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let h=this._centerMarker.getLatLng(),m=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([h,m])},_syncCircleRadius(){let h=this._centerMarker.getLatLng(),m=this._hintMarker.getLatLng(),_=this._distanceCalculation(h,m);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_)},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}this._handleHintMarkerSnapping();let m=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(m,"Draw")},isRelevantMarker(h){return h instanceof L.CircleMarker&&!(h instanceof L.Circle)&&h.pm&&!h._pmTempLayer},_createMarker(h){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!h.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let m=this._hintMarker.getLatLng(),_=new this._BaseCircleClass(m,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(_,"layerPane"),this._finishLayer(_),_.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(_),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(h){h.pm&&this.options.markerEditable&&h.pm.enable()},_finishShape(h){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let m=this._centerMarker.getLatLng(),_=this._defaultRadius;if(this.options[this._editableOption]){let ne=this._hintMarker.getLatLng();_=this._distanceCalculation(m,ne),this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?_=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(_=this.options[this._maxRadiusOption])}let C={...this.options.pathOptions,radius:_},M=new this._BaseCircleClass(m,C);this._setPane(M,"layerPane"),this._finishLayer(M),M.addTo(this._map.pm._getContainingLayer()),M.pm&&M.pm._updateHiddenPolyCircle(),this._fireCreate(M);let W=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(W))},_getNewDestinationOfHintMarker(){let h=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return h;let m=this._centerMarker.getLatLng(),_=this._distanceCalculation(m,h);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?h=cu(this._map,m,h,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(h=cu(this._map,m,h,this._getMaxDistanceInMeter()))}return h},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let h=this._centerMarker.getLatLng(),m=this._hintMarker.getLatLng(),_=this._distanceCalculation(h,m);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var m,_;let h={};L.extend(h,this.options.templineStyle),this.options[this._editableOption]&&(h.radius=0),(m=this._layer)==null||m.setStyle(h),(_=this._hintline)==null||_.setStyle(this.options.hintlineStyle)},_distanceCalculation(h,m){return this._map.project(h).distanceTo(this._map.project(m))}}),vs.Circle=vs.CircleMarker.extend({initialize(h){this._map=h,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(h,m){return this._map.distance(h,m)}});function gi(h){if(!h)throw new Error("coord is required");if(!Array.isArray(h)){if(h.type==="Feature"&&h.geometry!==null&&h.geometry.type==="Point")return h.geometry.coordinates;if(h.type==="Point")return h.coordinates}if(Array.isArray(h)&&h.length>=2&&!Array.isArray(h[0])&&!Array.isArray(h[1]))return h;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Ci(h){if(Array.isArray(h))return h;if(h.type==="Feature"){if(h.geometry!==null)return h.geometry.coordinates}else if(h.coordinates)return h.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ys(h){return h.type==="Feature"?h.geometry:h}function Ss(h,m){return h.type==="FeatureCollection"?"FeatureCollection":h.type==="GeometryCollection"?"GeometryCollection":h.type==="Feature"&&h.geometry!==null?h.geometry.type:h.type}function Qo(h,m,_){if(h!==null)for(var C,M,W,ne,oe,ye,Ee,rt=0,qe=0,wt,It=h.type,en=It==="FeatureCollection",xn=It==="Feature",An=en?h.features.length:1,br=0;br<An;br++){Ee=en?h.features[br].geometry:xn?h.geometry:h,wt=Ee?Ee.type==="GeometryCollection":!1,oe=wt?Ee.geometries.length:1;for(var nt=0;nt<oe;nt++){var st=0,gt=0;if(ne=wt?Ee.geometries[nt]:Ee,ne!==null){ye=ne.coordinates;var jt=ne.type;switch(rt=0,jt){case null:break;case"Point":if(m(ye,qe,br,st,gt)===!1)return!1;qe++,st++;break;case"LineString":case"MultiPoint":for(C=0;C<ye.length;C++){if(m(ye[C],qe,br,st,gt)===!1)return!1;qe++,jt==="MultiPoint"&&st++}jt==="LineString"&&st++;break;case"Polygon":case"MultiLineString":for(C=0;C<ye.length;C++){for(M=0;M<ye[C].length-rt;M++){if(m(ye[C][M],qe,br,st,gt)===!1)return!1;qe++}jt==="MultiLineString"&&st++,jt==="Polygon"&&gt++}jt==="Polygon"&&st++;break;case"MultiPolygon":for(C=0;C<ye.length;C++){for(gt=0,M=0;M<ye[C].length;M++){for(W=0;W<ye[C][M].length-rt;W++){if(m(ye[C][M][W],qe,br,st,gt)===!1)return!1;qe++}gt++}st++}break;case"GeometryCollection":for(C=0;C<ne.geometries.length;C++)if(Qo(ne.geometries[C],m)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ur(h,m){if(h.type==="Feature")m(h,0);else if(h.type==="FeatureCollection")for(var _=0;_<h.features.length&&m(h.features[_],_)!==!1;_++);}function to(h,m,_){var C=_;return Ur(h,function(M,W){W===0&&_===void 0?C=M:C=m(C,M,W)}),C}function zl(h,m){var _,C,M,W,ne,oe,ye,Ee,rt,qe,wt=0,It=h.type==="FeatureCollection",en=h.type==="Feature",xn=It?h.features.length:1;for(_=0;_<xn;_++){for(oe=It?h.features[_].geometry:en?h.geometry:h,Ee=It?h.features[_].properties:en?h.properties:{},rt=It?h.features[_].bbox:en?h.bbox:void 0,qe=It?h.features[_].id:en?h.id:void 0,ye=oe?oe.type==="GeometryCollection":!1,ne=ye?oe.geometries.length:1,M=0;M<ne;M++){if(W=ye?oe.geometries[M]:oe,W===null){if(m(null,wt,Ee,rt,qe)===!1)return!1;continue}switch(W.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(m(W,wt,Ee,rt,qe)===!1)return!1;break}case"GeometryCollection":{for(C=0;C<W.geometries.length;C++)if(m(W.geometries[C],wt,Ee,rt,qe)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}wt++}}function bo(h,m){zl(h,function(_,C,M,W,ne){var oe=_===null?null:_.type;switch(oe){case null:case"Point":case"LineString":case"Polygon":return m(tt(_,M,{bbox:W,id:ne}),C,0)===!1?!1:void 0}var ye;switch(oe){case"MultiPoint":ye="Point";break;case"MultiLineString":ye="LineString";break;case"MultiPolygon":ye="Polygon";break}for(var Ee=0;Ee<_.coordinates.length;Ee++){var rt=_.coordinates[Ee],qe={type:ye,coordinates:rt};if(m(tt(qe,M),C,Ee)===!1)return!1}})}function Ou(h){if(!h)throw new Error("geojson is required");var m=[];return bo(h,function(_){Na(_,m)}),Wt(m)}function Na(h,m){var _=[],C=h.geometry;if(C!==null){switch(C.type){case"Polygon":_=Ci(C);break;case"LineString":_=[Ci(C)]}_.forEach(function(M){var W=tc(M,h.properties);W.forEach(function(ne){ne.id=m.length,m.push(ne)})})}}function tc(h,m){var _=[];return h.reduce(function(C,M){var W=Mt([C,M],m);return W.bbox=wl(C,M),_.push(W),M}),_}function wl(h,m){var _=h[0],C=h[1],M=m[0],W=m[1],ne=_<M?_:M,oe=C<W?C:W,ye=_>M?_:M,Ee=C>W?C:W;return[ne,oe,ye,Ee]}var xl=Ou,Cs=l(vo(),1);function Ia(h,m){var _={},C=[];if(h.type==="LineString"&&(h=tt(h)),m.type==="LineString"&&(m=tt(m)),h.type==="Feature"&&m.type==="Feature"&&h.geometry!==null&&m.geometry!==null&&h.geometry.type==="LineString"&&m.geometry.type==="LineString"&&h.geometry.coordinates.length===2&&m.geometry.coordinates.length===2){var M=ea(h,m);return M&&C.push(M),Wt(C)}var W=(0,Cs.default)();return W.load(xl(m)),Ur(xl(h),function(ne){Ur(W.search(ne),function(oe){var ye=ea(ne,oe);if(ye){var Ee=Ci(ye).join(",");_[Ee]||(_[Ee]=!0,C.push(ye))}})}),Wt(C)}function ea(h,m){var _=Ci(h),C=Ci(m);if(_.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(C.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var M=_[0][0],W=_[0][1],ne=_[1][0],oe=_[1][1],ye=C[0][0],Ee=C[0][1],rt=C[1][0],qe=C[1][1],wt=(qe-Ee)*(ne-M)-(rt-ye)*(oe-W),It=(rt-ye)*(W-Ee)-(qe-Ee)*(M-ye),en=(ne-M)*(W-Ee)-(oe-W)*(M-ye);if(wt===0)return null;var xn=It/wt,An=en/wt;if(xn>=0&&xn<=1&&An>=0&&An<=1){var br=M+xn*(ne-M),nt=W+xn*(oe-W);return pt([br,nt])}return null}var Io=Ia,$l=l(vo(),1);function no(h,m,_){_===void 0&&(_={});var C=gi(h),M=gi(m),W=pr(M[1]-C[1]),ne=pr(M[0]-C[0]),oe=pr(C[1]),ye=pr(M[1]),Ee=Math.pow(Math.sin(W/2),2)+Math.pow(Math.sin(ne/2),2)*Math.cos(oe)*Math.cos(ye);return fn(2*Math.atan2(Math.sqrt(Ee),Math.sqrt(1-Ee)),_.units)}var _o=no;function wo(h){var m=h[0],_=h[1],C=h[2],M=h[3],W=_o(h.slice(0,2),[C,_]),ne=_o(h.slice(0,2),[m,M]);if(W>=ne){var oe=(_+M)/2;return[m,oe-(C-m)/2,C,oe+(C-m)/2]}else{var ye=(m+C)/2;return[ye-(M-_)/2,_,ye+(M-_)/2,M]}}var Tc=wo;function Is(h){var m=[1/0,1/0,-1/0,-1/0];return Qo(h,function(_){m[0]>_[0]&&(m[0]=_[0]),m[1]>_[1]&&(m[1]=_[1]),m[2]<_[0]&&(m[2]=_[0]),m[3]<_[1]&&(m[3]=_[1])}),m}Is.default=Is;var Ka=Is;function ro(h,m){m===void 0&&(m={});var _=m.precision,C=m.coordinates,M=m.mutate;if(_=_==null||isNaN(_)?6:_,C=C==null||isNaN(C)?3:C,!h)throw new Error("<geojson> is required");if(typeof _!="number")throw new Error("<precision> must be a number");if(typeof C!="number")throw new Error("<coordinates> must be a number");(M===!1||M===void 0)&&(h=JSON.parse(JSON.stringify(h)));var W=Math.pow(10,_);return Qo(h,function(ne){io(ne,W,C)}),h}function io(h,m,_){h.length>_&&h.splice(_,h.length);for(var C=0;C<h.length;C++)h[C]=Math.round(h[C]*m)/m;return h}var Xa=ro;function Ja(h,m,_){if(_===void 0&&(_={}),_.final===!0)return so(h,m);var C=gi(h),M=gi(m),W=pr(C[0]),ne=pr(M[0]),oe=pr(C[1]),ye=pr(M[1]),Ee=Math.sin(ne-W)*Math.cos(ye),rt=Math.cos(oe)*Math.sin(ye)-Math.sin(oe)*Math.cos(ye)*Math.cos(ne-W);return Hn(Math.atan2(Ee,rt))}function so(h,m){var _=Ja(m,h);return _=(_+180)%360,_}function Hs(h,m,_,C){C===void 0&&(C={});var M=gi(h),W=pr(M[0]),ne=pr(M[1]),oe=pr(_),ye=jn(m,C.units),Ee=Math.asin(Math.sin(ne)*Math.cos(ye)+Math.cos(ne)*Math.sin(ye)*Math.cos(oe)),rt=W+Math.atan2(Math.sin(oe)*Math.sin(ye)*Math.cos(ne),Math.cos(ye)-Math.sin(ne)*Math.sin(Ee)),qe=Hn(rt),wt=Hn(Ee);return pt([qe,wt],C.properties)}function Ba(h,m,_){_===void 0&&(_={});var C=pt([1/0,1/0],{dist:1/0}),M=0;return bo(h,function(W){for(var ne=Ci(W),oe=0;oe<ne.length-1;oe++){var ye=pt(ne[oe]);ye.properties.dist=_o(m,ye,_);var Ee=pt(ne[oe+1]);Ee.properties.dist=_o(m,Ee,_);var rt=_o(ye,Ee,_),qe=Math.max(ye.properties.dist,Ee.properties.dist),wt=Ja(ye,Ee),It=Hs(m,qe,wt+90,_),en=Hs(m,qe,wt-90,_),xn=Io(Mt([It.geometry.coordinates,en.geometry.coordinates]),Mt([ye.geometry.coordinates,Ee.geometry.coordinates])),An=null;xn.features.length>0&&(An=xn.features[0],An.properties.dist=_o(m,An,_),An.properties.location=M+_o(ye,An,_)),ye.properties.dist<C.properties.dist&&(C=ye,C.properties.index=oe,C.properties.location=M),Ee.properties.dist<C.properties.dist&&(C=Ee,C.properties.index=oe+1,C.properties.location=M+rt),An&&An.properties.dist<C.properties.dist&&(C=An,C.properties.index=oe),M+=rt}}),C}var ta=Ba;function oo(h,m){if(!h)throw new Error("line is required");if(!m)throw new Error("splitter is required");var _=Ss(h),C=Ss(m);if(_!=="LineString")throw new Error("line must be LineString");if(C==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(C==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var M=Xa(m,{precision:7});switch(C){case"Point":return Yt(h,M);case"MultiPoint":return Lt(h,M);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Lt(h,Io(h,M))}}function Lt(h,m){var _=[],C=(0,$l.default)();return bo(m,function(M){if(_.forEach(function(oe,ye){oe.id=ye}),!_.length)_=Yt(h,M).features,_.forEach(function(oe){oe.bbox||(oe.bbox=Tc(Ka(oe)))}),C.load(Wt(_));else{var W=C.search(M);if(W.features.length){var ne=Nt(M,W);_=_.filter(function(oe){return oe.id!==ne.id}),C.remove(ne),Ur(Yt(ne,M),function(oe){_.push(oe),C.insert(oe)})}}}),Wt(_)}function Yt(h,m){var _=[],C=Ci(h)[0],M=Ci(h)[h.geometry.coordinates.length-1];if(Rn(C,gi(m))||Rn(M,gi(m)))return Wt([h]);var W=(0,$l.default)(),ne=xl(h);W.load(ne);var oe=W.search(m);if(!oe.features.length)return Wt([h]);var ye=Nt(m,oe),Ee=[C],rt=to(ne,function(qe,wt,It){var en=Ci(wt)[1],xn=gi(m);return It===ye.id?(qe.push(xn),_.push(Mt(qe)),Rn(xn,en)?[xn]:[xn,en]):(qe.push(en),qe)},Ee);return rt.length>1&&_.push(Mt(rt)),Wt(_)}function Nt(h,m){if(!m.features.length)throw new Error("lines must contain features");if(m.features.length===1)return m.features[0];var _,C=1/0;return Ur(m,function(M){var W=ta(M,h),ne=W.properties.dist;ne<C&&(_=M,C=ne)}),_}function Rn(h,m){return h[0]===m[0]&&h[1]===m[1]}var rr=oo;function Pr(h,m,_){if(_===void 0&&(_={}),!h)throw new Error("point is required");if(!m)throw new Error("polygon is required");var C=gi(h),M=ys(m),W=M.type,ne=m.bbox,oe=M.coordinates;if(ne&&Ei(C,ne)===!1)return!1;W==="Polygon"&&(oe=[oe]);for(var ye=!1,Ee=0;Ee<oe.length&&!ye;Ee++)if(Ki(C,oe[Ee][0],_.ignoreBoundary)){for(var rt=!1,qe=1;qe<oe[Ee].length&&!rt;)Ki(C,oe[Ee][qe],!_.ignoreBoundary)&&(rt=!0),qe++;rt||(ye=!0)}return ye}function Ki(h,m,_){var C=!1;m[0][0]===m[m.length-1][0]&&m[0][1]===m[m.length-1][1]&&(m=m.slice(0,m.length-1));for(var M=0,W=m.length-1;M<m.length;W=M++){var ne=m[M][0],oe=m[M][1],ye=m[W][0],Ee=m[W][1],rt=h[1]*(ne-ye)+oe*(ye-h[0])+Ee*(h[0]-ne)===0&&(ne-h[0])*(ye-h[0])<=0&&(oe-h[1])*(Ee-h[1])<=0;if(rt)return!_;var qe=oe>h[1]!=Ee>h[1]&&h[0]<(ye-ne)*(h[1]-oe)/(Ee-oe)+ne;qe&&(C=!C)}return C}function Ei(h,m){return m[0]<=h[0]&&m[1]<=h[1]&&m[2]>=h[0]&&m[3]>=h[1]}function pu(h,m,_){_===void 0&&(_={});for(var C=gi(h),M=Ci(m),W=0;W<M.length-1;W++){var ne=!1;if(_.ignoreEndVertices&&(W===0&&(ne="start"),W===M.length-2&&(ne="end"),W===0&&W+1===M.length-1&&(ne="both")),xo(M[W],M[W+1],C,ne,typeof _.epsilon>"u"?null:_.epsilon))return!0}return!1}function xo(h,m,_,C,M){var W=_[0],ne=_[1],oe=h[0],ye=h[1],Ee=m[0],rt=m[1],qe=_[0]-oe,wt=_[1]-ye,It=Ee-oe,en=rt-ye,xn=qe*en-wt*It;if(M!==null){if(Math.abs(xn)>M)return!1}else if(xn!==0)return!1;if(C){if(C==="start")return Math.abs(It)>=Math.abs(en)?It>0?oe<W&&W<=Ee:Ee<=W&&W<oe:en>0?ye<ne&&ne<=rt:rt<=ne&&ne<ye;if(C==="end")return Math.abs(It)>=Math.abs(en)?It>0?oe<=W&&W<Ee:Ee<W&&W<=oe:en>0?ye<=ne&&ne<rt:rt<ne&&ne<=ye;if(C==="both")return Math.abs(It)>=Math.abs(en)?It>0?oe<W&&W<Ee:Ee<W&&W<oe:en>0?ye<ne&&ne<rt:rt<ne&&ne<ye}else return Math.abs(It)>=Math.abs(en)?It>0?oe<=W&&W<=Ee:Ee<=W&&W<=oe:en>0?ye<=ne&&ne<=rt:rt<=ne&&ne<=ye;return!1}var Xi=pu;function Ra(h,m){var _=ys(h),C=ys(m),M=_.type,W=C.type,ne=_.coordinates,oe=C.coordinates;switch(M){case"Point":switch(W){case"Point":return Ii(ne,oe);default:throw new Error("feature2 "+W+" geometry not supported")}case"MultiPoint":switch(W){case"Point":return Qa(_,C);case"MultiPoint":return Fa(_,C);default:throw new Error("feature2 "+W+" geometry not supported")}case"LineString":switch(W){case"Point":return Xi(C,_,{ignoreEndVertices:!0});case"LineString":return ti(_,C);case"MultiPoint":return ja(_,C);default:throw new Error("feature2 "+W+" geometry not supported")}case"Polygon":switch(W){case"Point":return Pr(C,_,{ignoreBoundary:!0});case"LineString":return ba(_,C);case"Polygon":return Ws(_,C);case"MultiPoint":return za(_,C);default:throw new Error("feature2 "+W+" geometry not supported")}default:throw new Error("feature1 "+M+" geometry not supported")}}function Qa(h,m){var _,C=!1;for(_=0;_<h.coordinates.length;_++)if(Ii(h.coordinates[_],m.coordinates)){C=!0;break}return C}function Fa(h,m){for(var _=0,C=m.coordinates;_<C.length;_++){for(var M=C[_],W=!1,ne=0,oe=h.coordinates;ne<oe.length;ne++){var ye=oe[ne];if(Ii(M,ye)){W=!0;break}}if(!W)return!1}return!0}function ja(h,m){for(var _=!1,C=0,M=m.coordinates;C<M.length;C++){var W=M[C];if(Xi(W,h,{ignoreEndVertices:!0})&&(_=!0),!Xi(W,h))return!1}return!!_}function za(h,m){for(var _=0,C=m.coordinates;_<C.length;_++){var M=C[_];if(!Pr(M,h,{ignoreBoundary:!0}))return!1}return!0}function ti(h,m){for(var _=!1,C=0,M=m.coordinates;C<M.length;C++){var W=M[C];if(Xi({type:"Point",coordinates:W},h,{ignoreEndVertices:!0})&&(_=!0),!Xi({type:"Point",coordinates:W},h,{ignoreEndVertices:!1}))return!1}return _}function ba(h,m){var _=!1,C=0,M=Ka(h),W=Ka(m);if(!Pi(M,W))return!1;for(C;C<m.coordinates.length-1;C++){var ne=bs(m.coordinates[C],m.coordinates[C+1]);if(Pr({type:"Point",coordinates:ne},h,{ignoreBoundary:!0})){_=!0;break}}return _}function Ws(h,m){if(h.type==="Feature"&&h.geometry===null||m.type==="Feature"&&m.geometry===null)return!1;var _=Ka(h),C=Ka(m);if(!Pi(_,C))return!1;for(var M=ys(m).coordinates,W=0,ne=M;W<ne.length;W++)for(var oe=ne[W],ye=0,Ee=oe;ye<Ee.length;ye++){var rt=Ee[ye];if(!Pr(rt,h))return!1}return!0}function Pi(h,m){return!(h[0]>m[0]||h[2]<m[2]||h[1]>m[1]||h[3]<m[3])}function Ii(h,m){return h[0]===m[0]&&h[1]===m[1]}function bs(h,m){return[(h[0]+m[0])/2,(h[1]+m[1])/2]}var Ui=l(Qr()),na=h=>()=>h,Bo=h=>{let m=h?(_,C)=>C.minus(_).abs().isLessThanOrEqualTo(h):na(!1);return(_,C)=>m(_,C)?0:_.comparedTo(C)};function ca(h){let m=h?(_,C,M,W,ne)=>_.exponentiatedBy(2).isLessThanOrEqualTo(W.minus(C).exponentiatedBy(2).plus(ne.minus(M).exponentiatedBy(2)).times(h)):na(!1);return(_,C,M)=>{let W=_.x,ne=_.y,oe=M.x,ye=M.y,Ee=ne.minus(ye).times(C.x.minus(oe)).minus(W.minus(oe).times(C.y.minus(ye)));return m(Ee,W,ne,oe,ye)?0:Ee.comparedTo(0)}}var nc=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,$a=Math.ceil,Es=Math.floor,$i="[BigNumber Error] ",ao=$i+"Number primitive has more than 15 significant digits: ",Ro=1e14,wr=14,el=9007199254740991,tl=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],_a=1e7,Lo=1e9;function oh(h){var m,_,C,M=nt.prototype={constructor:nt,toString:null,valueOf:null},W=new nt(1),ne=20,oe=4,ye=-7,Ee=21,rt=-1e7,qe=1e7,wt=!1,It=1,en=0,xn={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},An="0123456789abcdefghijklmnopqrstuvwxyz",br=!0;function nt(be,ke){var $e,je,He,Ge,ht,dt,yt,At,Tt=this;if(!(Tt instanceof nt))return new nt(be,ke);if(ke==null){if(be&&be._isBigNumber===!0){Tt.s=be.s,!be.c||be.e>qe?Tt.c=Tt.e=null:be.e<rt?Tt.c=[Tt.e=0]:(Tt.e=be.e,Tt.c=be.c.slice());return}if((dt=typeof be=="number")&&be*0==0){if(Tt.s=1/be<0?(be=-be,-1):1,be===~~be){for(Ge=0,ht=be;ht>=10;ht/=10,Ge++);Ge>qe?Tt.c=Tt.e=null:(Tt.e=Ge,Tt.c=[be]);return}At=String(be)}else{if(!nc.test(At=String(be)))return C(Tt,At,dt);Tt.s=At.charCodeAt(0)==45?(At=At.slice(1),-1):1}(Ge=At.indexOf("."))>-1&&(At=At.replace(".","")),(ht=At.search(/e/i))>0?(Ge<0&&(Ge=ht),Ge+=+At.slice(ht+1),At=At.substring(0,ht)):Ge<0&&(Ge=At.length)}else{if(u(ke,2,An.length,"Base"),ke==10&&br)return Tt=new nt(be),Et(Tt,ne+Tt.e+1,oe);if(At=String(be),dt=typeof be=="number"){if(be*0!=0)return C(Tt,At,dt,ke);if(Tt.s=1/be<0?(At=At.slice(1),-1):1,nt.DEBUG&&At.replace(/^0\.0*|\./,"").length>15)throw Error(ao+be)}else Tt.s=At.charCodeAt(0)===45?(At=At.slice(1),-1):1;for($e=An.slice(0,ke),Ge=ht=0,yt=At.length;ht<yt;ht++)if($e.indexOf(je=At.charAt(ht))<0){if(je=="."){if(ht>Ge){Ge=yt;continue}}else if(!He&&(At==At.toUpperCase()&&(At=At.toLowerCase())||At==At.toLowerCase()&&(At=At.toUpperCase()))){He=!0,ht=-1,Ge=0;continue}return C(Tt,String(be),dt,ke)}dt=!1,At=_(At,ke,10,Tt.s),(Ge=At.indexOf("."))>-1?At=At.replace(".",""):Ge=At.length}for(ht=0;At.charCodeAt(ht)===48;ht++);for(yt=At.length;At.charCodeAt(--yt)===48;);if(At=At.slice(ht,++yt)){if(yt-=ht,dt&&nt.DEBUG&&yt>15&&(be>el||be!==Es(be)))throw Error(ao+Tt.s*be);if((Ge=Ge-ht-1)>qe)Tt.c=Tt.e=null;else if(Ge<rt)Tt.c=[Tt.e=0];else{if(Tt.e=Ge,Tt.c=[],ht=(Ge+1)%wr,Ge<0&&(ht+=wr),ht<yt){for(ht&&Tt.c.push(+At.slice(0,ht)),yt-=wr;ht<yt;)Tt.c.push(+At.slice(ht,ht+=wr));ht=wr-(At=At.slice(ht)).length}else ht-=yt;for(;ht--;At+="0");Tt.c.push(+At)}}else Tt.c=[Tt.e=0]}nt.clone=oh,nt.ROUND_UP=0,nt.ROUND_DOWN=1,nt.ROUND_CEIL=2,nt.ROUND_FLOOR=3,nt.ROUND_HALF_UP=4,nt.ROUND_HALF_DOWN=5,nt.ROUND_HALF_EVEN=6,nt.ROUND_HALF_CEIL=7,nt.ROUND_HALF_FLOOR=8,nt.EUCLID=9,nt.config=nt.set=function(be){var ke,$e;if(be!=null)if(typeof be=="object"){if(be.hasOwnProperty(ke="DECIMAL_PLACES")&&($e=be[ke],u($e,0,Lo,ke),ne=$e),be.hasOwnProperty(ke="ROUNDING_MODE")&&($e=be[ke],u($e,0,8,ke),oe=$e),be.hasOwnProperty(ke="EXPONENTIAL_AT")&&($e=be[ke],$e&&$e.pop?(u($e[0],-1e9,0,ke),u($e[1],0,Lo,ke),ye=$e[0],Ee=$e[1]):(u($e,-1e9,Lo,ke),ye=-(Ee=$e<0?-$e:$e))),be.hasOwnProperty(ke="RANGE"))if($e=be[ke],$e&&$e.pop)u($e[0],-1e9,-1,ke),u($e[1],1,Lo,ke),rt=$e[0],qe=$e[1];else if(u($e,-1e9,Lo,ke),$e)rt=-(qe=$e<0?-$e:$e);else throw Error($i+ke+" cannot be zero: "+$e);if(be.hasOwnProperty(ke="CRYPTO"))if($e=be[ke],$e===!!$e)if($e)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))wt=$e;else throw wt=!$e,Error($i+"crypto unavailable");else wt=$e;else throw Error($i+ke+" not true or false: "+$e);if(be.hasOwnProperty(ke="MODULO_MODE")&&($e=be[ke],u($e,0,9,ke),It=$e),be.hasOwnProperty(ke="POW_PRECISION")&&($e=be[ke],u($e,0,Lo,ke),en=$e),be.hasOwnProperty(ke="FORMAT"))if($e=be[ke],typeof $e=="object")xn=$e;else throw Error($i+ke+" not an object: "+$e);if(be.hasOwnProperty(ke="ALPHABET"))if($e=be[ke],typeof $e=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test($e))br=$e.slice(0,10)=="0123456789",An=$e;else throw Error($i+ke+" invalid: "+$e)}else throw Error($i+"Object expected: "+be);return{DECIMAL_PLACES:ne,ROUNDING_MODE:oe,EXPONENTIAL_AT:[ye,Ee],RANGE:[rt,qe],CRYPTO:wt,MODULO_MODE:It,POW_PRECISION:en,FORMAT:xn,ALPHABET:An}},nt.isBigNumber=function(be){if(!be||be._isBigNumber!==!0)return!1;if(!nt.DEBUG)return!0;var ke,$e,je=be.c,He=be.e,Ge=be.s;e:if({}.toString.call(je)=="[object Array]"){if((Ge===1||Ge===-1)&&He>=-1e9&&He<=Lo&&He===Es(He)){if(je[0]===0){if(He===0&&je.length===1)return!0;break e}if(ke=(He+1)%wr,ke<1&&(ke+=wr),String(je[0]).length==ke){for(ke=0;ke<je.length;ke++)if($e=je[ke],$e<0||$e>=Ro||$e!==Es($e))break e;if($e!==0)return!0}}}else if(je===null&&He===null&&(Ge===null||Ge===1||Ge===-1))return!0;throw Error($i+"Invalid BigNumber: "+be)},nt.maximum=nt.max=function(){return gt(arguments,-1)},nt.minimum=nt.min=function(){return gt(arguments,1)},nt.random=function(){var be=9007199254740992,ke=Math.random()*be&2097151?function(){return Es(Math.random()*be)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function($e){var je,He,Ge,ht,dt,yt=0,At=[],Tt=new nt(W);if($e==null?$e=ne:u($e,0,Lo),ht=$a($e/wr),wt)if(crypto.getRandomValues){for(je=crypto.getRandomValues(new Uint32Array(ht*=2));yt<ht;)dt=je[yt]*131072+(je[yt+1]>>>11),dt>=9e15?(He=crypto.getRandomValues(new Uint32Array(2)),je[yt]=He[0],je[yt+1]=He[1]):(At.push(dt%1e14),yt+=2);yt=ht/2}else if(crypto.randomBytes){for(je=crypto.randomBytes(ht*=7);yt<ht;)dt=(je[yt]&31)*281474976710656+je[yt+1]*1099511627776+je[yt+2]*4294967296+je[yt+3]*16777216+(je[yt+4]<<16)+(je[yt+5]<<8)+je[yt+6],dt>=9e15?crypto.randomBytes(7).copy(je,yt):(At.push(dt%1e14),yt+=7);yt=ht/7}else throw wt=!1,Error($i+"crypto unavailable");if(!wt)for(;yt<ht;)dt=ke(),dt<9e15&&(At[yt++]=dt%1e14);for(ht=At[--yt],$e%=wr,ht&&$e&&(dt=tl[wr-$e],At[yt]=Es(ht/dt)*dt);At[yt]===0;At.pop(),yt--);if(yt<0)At=[Ge=0];else{for(Ge=-1;At[0]===0;At.splice(0,1),Ge-=wr);for(yt=1,dt=At[0];dt>=10;dt/=10,yt++);yt<wr&&(Ge-=wr-yt)}return Tt.e=Ge,Tt.c=At,Tt}}(),nt.sum=function(){for(var be=1,ke=arguments,$e=new nt(ke[0]);be<ke.length;)$e=$e.plus(ke[be++]);return $e},_=function(){var be="0123456789";function ke($e,je,He,Ge){for(var ht,dt=[0],yt,At=0,Tt=$e.length;At<Tt;){for(yt=dt.length;yt--;dt[yt]*=je);for(dt[0]+=Ge.indexOf($e.charAt(At++)),ht=0;ht<dt.length;ht++)dt[ht]>He-1&&(dt[ht+1]==null&&(dt[ht+1]=0),dt[ht+1]+=dt[ht]/He|0,dt[ht]%=He)}return dt.reverse()}return function($e,je,He,Ge,ht){var dt,yt,At,Tt,ln,Wn,Xn,lr,_i=$e.indexOf("."),Bi=ne,ni=oe;for(_i>=0&&(Tt=en,en=0,$e=$e.replace(".",""),lr=new nt(je),Wn=lr.pow($e.length-_i),en=Tt,lr.c=ke(G(qs(Wn.c),Wn.e,"0"),10,He,be),lr.e=lr.c.length),Xn=ke($e,je,He,ht?(dt=An,be):(dt=be,An)),At=Tt=Xn.length;Xn[--Tt]==0;Xn.pop());if(!Xn[0])return dt.charAt(0);if(_i<0?--At:(Wn.c=Xn,Wn.e=At,Wn.s=Ge,Wn=m(Wn,lr,Bi,ni,He),Xn=Wn.c,ln=Wn.r,At=Wn.e),yt=At+Bi+1,_i=Xn[yt],Tt=He/2,ln=ln||yt<0||Xn[yt+1]!=null,ln=ni<4?(_i!=null||ln)&&(ni==0||ni==(Wn.s<0?3:2)):_i>Tt||_i==Tt&&(ni==4||ln||ni==6&&Xn[yt-1]&1||ni==(Wn.s<0?8:7)),yt<1||!Xn[0])$e=ln?G(dt.charAt(1),-Bi,dt.charAt(0)):dt.charAt(0);else{if(Xn.length=yt,ln)for(--He;++Xn[--yt]>He;)Xn[yt]=0,yt||(++At,Xn=[1].concat(Xn));for(Tt=Xn.length;!Xn[--Tt];);for(_i=0,$e="";_i<=Tt;$e+=dt.charAt(Xn[_i++]));$e=G($e,At,dt.charAt(0))}return $e}}(),m=function(){function be(je,He,Ge){var ht,dt,yt,At,Tt=0,ln=je.length,Wn=He%_a,Xn=He/_a|0;for(je=je.slice();ln--;)yt=je[ln]%_a,At=je[ln]/_a|0,ht=Xn*yt+At*Wn,dt=Wn*yt+ht%_a*_a+Tt,Tt=(dt/Ge|0)+(ht/_a|0)+Xn*At,je[ln]=dt%Ge;return Tt&&(je=[Tt].concat(je)),je}function ke(je,He,Ge,ht){var dt,yt;if(Ge!=ht)yt=Ge>ht?1:-1;else for(dt=yt=0;dt<Ge;dt++)if(je[dt]!=He[dt]){yt=je[dt]>He[dt]?1:-1;break}return yt}function $e(je,He,Ge,ht){for(var dt=0;Ge--;)je[Ge]-=dt,dt=je[Ge]<He[Ge]?1:0,je[Ge]=dt*ht+je[Ge]-He[Ge];for(;!je[0]&&je.length>1;je.splice(0,1));}return function(je,He,Ge,ht,dt){var yt,At,Tt,ln,Wn,Xn,lr,_i,Bi,ni,Hi,zo,ic,Ua,Id,Sl,Oc,Ha=je.s==He.s?1:-1,uo=je.c,_s=He.c;if(!uo||!uo[0]||!_s||!_s[0])return new nt(!je.s||!He.s||(uo?_s&&uo[0]==_s[0]:!_s)?NaN:uo&&uo[0]==0||!_s?Ha*0:Ha/0);for(_i=new nt(Ha),Bi=_i.c=[],At=je.e-He.e,Ha=Ge+At+1,dt||(dt=Ro,At=Gs(je.e/wr)-Gs(He.e/wr),Ha=Ha/wr|0),Tt=0;_s[Tt]==(uo[Tt]||0);Tt++);if(_s[Tt]>(uo[Tt]||0)&&At--,Ha<0)Bi.push(1),ln=!0;else{for(Ua=uo.length,Sl=_s.length,Tt=0,Ha+=2,Wn=Es(dt/(_s[0]+1)),Wn>1&&(_s=be(_s,Wn,dt),uo=be(uo,Wn,dt),Sl=_s.length,Ua=uo.length),ic=Sl,ni=uo.slice(0,Sl),Hi=ni.length;Hi<Sl;ni[Hi++]=0);Oc=_s.slice(),Oc=[0].concat(Oc),Id=_s[0],_s[1]>=dt/2&&Id++;do{if(Wn=0,yt=ke(_s,ni,Sl,Hi),yt<0){if(zo=ni[0],Sl!=Hi&&(zo=zo*dt+(ni[1]||0)),Wn=Es(zo/Id),Wn>1)for(Wn>=dt&&(Wn=dt-1),Xn=be(_s,Wn,dt),lr=Xn.length,Hi=ni.length;ke(Xn,ni,lr,Hi)==1;)Wn--,$e(Xn,Sl<lr?Oc:_s,lr,dt),lr=Xn.length,yt=1;else Wn==0&&(yt=Wn=1),Xn=_s.slice(),lr=Xn.length;if(lr<Hi&&(Xn=[0].concat(Xn)),$e(ni,Xn,Hi,dt),Hi=ni.length,yt==-1)for(;ke(_s,ni,Sl,Hi)<1;)Wn++,$e(ni,Sl<Hi?Oc:_s,Hi,dt),Hi=ni.length}else yt===0&&(Wn++,ni=[0]);Bi[Tt++]=Wn,ni[0]?ni[Hi++]=uo[ic]||0:(ni=[uo[ic]],Hi=1)}while((ic++<Ua||ni[0]!=null)&&Ha--);ln=ni[0]!=null,Bi[0]||Bi.splice(0,1)}if(dt==Ro){for(Tt=1,Ha=Bi[0];Ha>=10;Ha/=10,Tt++);Et(_i,Ge+(_i.e=Tt+At*wr-1)+1,ht,ln)}else _i.e=At,_i.r=+ln;return _i}}();function st(be,ke,$e,je){var He,Ge,ht,dt,yt;if($e==null?$e=oe:u($e,0,8),!be.c)return be.toString();if(He=be.c[0],ht=be.e,ke==null)yt=qs(be.c),yt=je==1||je==2&&(ht<=ye||ht>=Ee)?P(yt,ht):G(yt,ht,"0");else if(be=Et(new nt(be),ke,$e),Ge=be.e,yt=qs(be.c),dt=yt.length,je==1||je==2&&(ke<=Ge||Ge<=ye)){for(;dt<ke;yt+="0",dt++);yt=P(yt,Ge)}else if(ke-=ht,yt=G(yt,Ge,"0"),Ge+1>dt){if(--ke>0)for(yt+=".";ke--;yt+="0");}else if(ke+=Ge-dt,ke>0)for(Ge+1==dt&&(yt+=".");ke--;yt+="0");return be.s<0&&He?"-"+yt:yt}function gt(be,ke){for(var $e,je,He=1,Ge=new nt(be[0]);He<be.length;He++)je=new nt(be[He]),(!je.s||($e=wa(Ge,je))===ke||$e===0&&Ge.s===ke)&&(Ge=je);return Ge}function jt(be,ke,$e){for(var je=1,He=ke.length;!ke[--He];ke.pop());for(He=ke[0];He>=10;He/=10,je++);return($e=je+$e*wr-1)>qe?be.c=be.e=null:$e<rt?be.c=[be.e=0]:(be.e=$e,be.c=ke),be}C=function(){var be=/^(-?)0([xbo])(?=\w[\w.]*$)/i,ke=/^([^.]+)\.$/,$e=/^\.([^.]+)$/,je=/^-?(Infinity|NaN)$/,He=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Ge,ht,dt,yt){var At,Tt=dt?ht:ht.replace(He,"");if(je.test(Tt))Ge.s=isNaN(Tt)?null:Tt<0?-1:1;else{if(!dt&&(Tt=Tt.replace(be,function(ln,Wn,Xn){return At=(Xn=Xn.toLowerCase())=="x"?16:Xn=="b"?2:8,!yt||yt==At?Wn:ln}),yt&&(At=yt,Tt=Tt.replace(ke,"$1").replace($e,"0.$1")),ht!=Tt))return new nt(Tt,At);if(nt.DEBUG)throw Error($i+"Not a"+(yt?" base "+yt:"")+" number: "+ht);Ge.s=null}Ge.c=Ge.e=null}}();function Et(be,ke,$e,je){var He,Ge,ht,dt,yt,At,Tt,ln=be.c,Wn=tl;if(ln){e:{for(He=1,dt=ln[0];dt>=10;dt/=10,He++);if(Ge=ke-He,Ge<0)Ge+=wr,ht=ke,yt=ln[At=0],Tt=Es(yt/Wn[He-ht-1]%10);else if(At=$a((Ge+1)/wr),At>=ln.length)if(je){for(;ln.length<=At;ln.push(0));yt=Tt=0,He=1,Ge%=wr,ht=Ge-wr+1}else break e;else{for(yt=dt=ln[At],He=1;dt>=10;dt/=10,He++);Ge%=wr,ht=Ge-wr+He,Tt=ht<0?0:Es(yt/Wn[He-ht-1]%10)}if(je=je||ke<0||ln[At+1]!=null||(ht<0?yt:yt%Wn[He-ht-1]),je=$e<4?(Tt||je)&&($e==0||$e==(be.s<0?3:2)):Tt>5||Tt==5&&($e==4||je||$e==6&&(Ge>0?ht>0?yt/Wn[He-ht]:0:ln[At-1])%10&1||$e==(be.s<0?8:7)),ke<1||!ln[0])return ln.length=0,je?(ke-=be.e+1,ln[0]=Wn[(wr-ke%wr)%wr],be.e=-ke||0):ln[0]=be.e=0,be;if(Ge==0?(ln.length=At,dt=1,At--):(ln.length=At+1,dt=Wn[wr-Ge],ln[At]=ht>0?Es(yt/Wn[He-ht]%Wn[ht])*dt:0),je)for(;;)if(At==0){for(Ge=1,ht=ln[0];ht>=10;ht/=10,Ge++);for(ht=ln[0]+=dt,dt=1;ht>=10;ht/=10,dt++);Ge!=dt&&(be.e++,ln[0]==Ro&&(ln[0]=1));break}else{if(ln[At]+=dt,ln[At]!=Ro)break;ln[At--]=0,dt=1}for(Ge=ln.length;ln[--Ge]===0;ln.pop());}be.e>qe?be.c=be.e=null:be.e<rt&&(be.c=[be.e=0])}return be}function Bt(be){var ke,$e=be.e;return $e===null?be.toString():(ke=qs(be.c),ke=$e<=ye||$e>=Ee?P(ke,$e):G(ke,$e,"0"),be.s<0?"-"+ke:ke)}return M.absoluteValue=M.abs=function(){var be=new nt(this);return be.s<0&&(be.s=1),be},M.comparedTo=function(be,ke){return wa(this,new nt(be,ke))},M.decimalPlaces=M.dp=function(be,ke){var $e,je,He,Ge=this;if(be!=null)return u(be,0,Lo),ke==null?ke=oe:u(ke,0,8),Et(new nt(Ge),be+Ge.e+1,ke);if(!($e=Ge.c))return null;if(je=((He=$e.length-1)-Gs(this.e/wr))*wr,He=$e[He])for(;He%10==0;He/=10,je--);return je<0&&(je=0),je},M.dividedBy=M.div=function(be,ke){return m(this,new nt(be,ke),ne,oe)},M.dividedToIntegerBy=M.idiv=function(be,ke){return m(this,new nt(be,ke),0,1)},M.exponentiatedBy=M.pow=function(be,ke){var $e,je,He,Ge,ht,dt,yt,At,Tt,ln=this;if(be=new nt(be),be.c&&!be.isInteger())throw Error($i+"Exponent not an integer: "+Bt(be));if(ke!=null&&(ke=new nt(ke)),dt=be.e>14,!ln.c||!ln.c[0]||ln.c[0]==1&&!ln.e&&ln.c.length==1||!be.c||!be.c[0])return Tt=new nt(Math.pow(+Bt(ln),dt?be.s*(2-y(be)):+Bt(be))),ke?Tt.mod(ke):Tt;if(yt=be.s<0,ke){if(ke.c?!ke.c[0]:!ke.s)return new nt(NaN);je=!yt&&ln.isInteger()&&ke.isInteger(),je&&(ln=ln.mod(ke))}else{if(be.e>9&&(ln.e>0||ln.e<-1||(ln.e==0?ln.c[0]>1||dt&&ln.c[1]>=24e7:ln.c[0]<8e13||dt&&ln.c[0]<=9999975e7)))return Ge=ln.s<0&&y(be)?-0:0,ln.e>-1&&(Ge=1/Ge),new nt(yt?1/Ge:Ge);en&&(Ge=$a(en/wr+2))}for(dt?($e=new nt(.5),yt&&(be.s=1),At=y(be)):(He=Math.abs(+Bt(be)),At=He%2),Tt=new nt(W);;){if(At){if(Tt=Tt.times(ln),!Tt.c)break;Ge?Tt.c.length>Ge&&(Tt.c.length=Ge):je&&(Tt=Tt.mod(ke))}if(He){if(He=Es(He/2),He===0)break;At=He%2}else if(be=be.times($e),Et(be,be.e+1,1),be.e>14)At=y(be);else{if(He=+Bt(be),He===0)break;At=He%2}ln=ln.times(ln),Ge?ln.c&&ln.c.length>Ge&&(ln.c.length=Ge):je&&(ln=ln.mod(ke))}return je?Tt:(yt&&(Tt=W.div(Tt)),ke?Tt.mod(ke):Ge?Et(Tt,en,oe,ht):Tt)},M.integerValue=function(be){var ke=new nt(this);return be==null?be=oe:u(be,0,8),Et(ke,ke.e+1,be)},M.isEqualTo=M.eq=function(be,ke){return wa(this,new nt(be,ke))===0},M.isFinite=function(){return!!this.c},M.isGreaterThan=M.gt=function(be,ke){return wa(this,new nt(be,ke))>0},M.isGreaterThanOrEqualTo=M.gte=function(be,ke){return(ke=wa(this,new nt(be,ke)))===1||ke===0},M.isInteger=function(){return!!this.c&&Gs(this.e/wr)>this.c.length-2},M.isLessThan=M.lt=function(be,ke){return wa(this,new nt(be,ke))<0},M.isLessThanOrEqualTo=M.lte=function(be,ke){return(ke=wa(this,new nt(be,ke)))===-1||ke===0},M.isNaN=function(){return!this.s},M.isNegative=function(){return this.s<0},M.isPositive=function(){return this.s>0},M.isZero=function(){return!!this.c&&this.c[0]==0},M.minus=function(be,ke){var $e,je,He,Ge,ht=this,dt=ht.s;if(be=new nt(be,ke),ke=be.s,!dt||!ke)return new nt(NaN);if(dt!=ke)return be.s=-ke,ht.plus(be);var yt=ht.e/wr,At=be.e/wr,Tt=ht.c,ln=be.c;if(!yt||!At){if(!Tt||!ln)return Tt?(be.s=-ke,be):new nt(ln?ht:NaN);if(!Tt[0]||!ln[0])return ln[0]?(be.s=-ke,be):new nt(Tt[0]?ht:oe==3?-0:0)}if(yt=Gs(yt),At=Gs(At),Tt=Tt.slice(),dt=yt-At){for((Ge=dt<0)?(dt=-dt,He=Tt):(At=yt,He=ln),He.reverse(),ke=dt;ke--;He.push(0));He.reverse()}else for(je=(Ge=(dt=Tt.length)<(ke=ln.length))?dt:ke,dt=ke=0;ke<je;ke++)if(Tt[ke]!=ln[ke]){Ge=Tt[ke]<ln[ke];break}if(Ge&&(He=Tt,Tt=ln,ln=He,be.s=-be.s),ke=(je=ln.length)-($e=Tt.length),ke>0)for(;ke--;Tt[$e++]=0);for(ke=Ro-1;je>dt;){if(Tt[--je]<ln[je]){for($e=je;$e&&!Tt[--$e];Tt[$e]=ke);--Tt[$e],Tt[je]+=Ro}Tt[je]-=ln[je]}for(;Tt[0]==0;Tt.splice(0,1),--At);return Tt[0]?jt(be,Tt,At):(be.s=oe==3?-1:1,be.c=[be.e=0],be)},M.modulo=M.mod=function(be,ke){var $e,je,He=this;return be=new nt(be,ke),!He.c||!be.s||be.c&&!be.c[0]?new nt(NaN):!be.c||He.c&&!He.c[0]?new nt(He):(It==9?(je=be.s,be.s=1,$e=m(He,be,0,3),be.s=je,$e.s*=je):$e=m(He,be,0,It),be=He.minus($e.times(be)),!be.c[0]&&It==1&&(be.s=He.s),be)},M.multipliedBy=M.times=function(be,ke){var $e,je,He,Ge,ht,dt,yt,At,Tt,ln,Wn,Xn,lr,_i,Bi,ni=this,Hi=ni.c,zo=(be=new nt(be,ke)).c;if(!Hi||!zo||!Hi[0]||!zo[0])return!ni.s||!be.s||Hi&&!Hi[0]&&!zo||zo&&!zo[0]&&!Hi?be.c=be.e=be.s=null:(be.s*=ni.s,!Hi||!zo?be.c=be.e=null:(be.c=[0],be.e=0)),be;for(je=Gs(ni.e/wr)+Gs(be.e/wr),be.s*=ni.s,yt=Hi.length,ln=zo.length,yt<ln&&(lr=Hi,Hi=zo,zo=lr,He=yt,yt=ln,ln=He),He=yt+ln,lr=[];He--;lr.push(0));for(_i=Ro,Bi=_a,He=ln;--He>=0;){for($e=0,Wn=zo[He]%Bi,Xn=zo[He]/Bi|0,ht=yt,Ge=He+ht;Ge>He;)At=Hi[--ht]%Bi,Tt=Hi[ht]/Bi|0,dt=Xn*At+Tt*Wn,At=Wn*At+dt%Bi*Bi+lr[Ge]+$e,$e=(At/_i|0)+(dt/Bi|0)+Xn*Tt,lr[Ge--]=At%_i;lr[Ge]=$e}return $e?++je:lr.splice(0,1),jt(be,lr,je)},M.negated=function(){var be=new nt(this);return be.s=-be.s||null,be},M.plus=function(be,ke){var $e,je=this,He=je.s;if(be=new nt(be,ke),ke=be.s,!He||!ke)return new nt(NaN);if(He!=ke)return be.s=-ke,je.minus(be);var Ge=je.e/wr,ht=be.e/wr,dt=je.c,yt=be.c;if(!Ge||!ht){if(!dt||!yt)return new nt(He/0);if(!dt[0]||!yt[0])return yt[0]?be:new nt(dt[0]?je:He*0)}if(Ge=Gs(Ge),ht=Gs(ht),dt=dt.slice(),He=Ge-ht){for(He>0?(ht=Ge,$e=yt):(He=-He,$e=dt),$e.reverse();He--;$e.push(0));$e.reverse()}for(He=dt.length,ke=yt.length,He-ke<0&&($e=yt,yt=dt,dt=$e,ke=He),He=0;ke;)He=(dt[--ke]=dt[ke]+yt[ke]+He)/Ro|0,dt[ke]=Ro===dt[ke]?0:dt[ke]%Ro;return He&&(dt=[He].concat(dt),++ht),jt(be,dt,ht)},M.precision=M.sd=function(be,ke){var $e,je,He,Ge=this;if(be!=null&&be!==!!be)return u(be,1,Lo),ke==null?ke=oe:u(ke,0,8),Et(new nt(Ge),be,ke);if(!($e=Ge.c))return null;if(He=$e.length-1,je=He*wr+1,He=$e[He]){for(;He%10==0;He/=10,je--);for(He=$e[0];He>=10;He/=10,je++);}return be&&Ge.e+1>je&&(je=Ge.e+1),je},M.shiftedBy=function(be){return u(be,-9007199254740991,el),this.times("1e"+be)},M.squareRoot=M.sqrt=function(){var be,ke,$e,je,He,Ge=this,ht=Ge.c,dt=Ge.s,yt=Ge.e,At=ne+4,Tt=new nt("0.5");if(dt!==1||!ht||!ht[0])return new nt(!dt||dt<0&&(!ht||ht[0])?NaN:ht?Ge:1/0);if(dt=Math.sqrt(+Bt(Ge)),dt==0||dt==1/0?(ke=qs(ht),(ke.length+yt)%2==0&&(ke+="0"),dt=Math.sqrt(+ke),yt=Gs((yt+1)/2)-(yt<0||yt%2),dt==1/0?ke="5e"+yt:(ke=dt.toExponential(),ke=ke.slice(0,ke.indexOf("e")+1)+yt),$e=new nt(ke)):$e=new nt(dt+""),$e.c[0]){for(yt=$e.e,dt=yt+At,dt<3&&(dt=0);;)if(He=$e,$e=Tt.times(He.plus(m(Ge,He,At,1))),qs(He.c).slice(0,dt)===(ke=qs($e.c)).slice(0,dt))if($e.e<yt&&--dt,ke=ke.slice(dt-3,dt+1),ke=="9999"||!je&&ke=="4999"){if(!je&&(Et(He,He.e+ne+2,0),He.times(He).eq(Ge))){$e=He;break}At+=4,dt+=4,je=1}else{(!+ke||!+ke.slice(1)&&ke.charAt(0)=="5")&&(Et($e,$e.e+ne+2,1),be=!$e.times($e).eq(Ge));break}}return Et($e,$e.e+ne+1,oe,be)},M.toExponential=function(be,ke){return be!=null&&(u(be,0,Lo),be++),st(this,be,ke,1)},M.toFixed=function(be,ke){return be!=null&&(u(be,0,Lo),be=be+this.e+1),st(this,be,ke)},M.toFormat=function(be,ke,$e){var je,He=this;if($e==null)be!=null&&ke&&typeof ke=="object"?($e=ke,ke=null):be&&typeof be=="object"?($e=be,be=ke=null):$e=xn;else if(typeof $e!="object")throw Error($i+"Argument not an object: "+$e);if(je=He.toFixed(be,ke),He.c){var Ge,ht=je.split("."),dt=+$e.groupSize,yt=+$e.secondaryGroupSize,At=$e.groupSeparator||"",Tt=ht[0],ln=ht[1],Wn=He.s<0,Xn=Wn?Tt.slice(1):Tt,lr=Xn.length;if(yt&&(Ge=dt,dt=yt,yt=Ge,lr-=Ge),dt>0&&lr>0){for(Ge=lr%dt||dt,Tt=Xn.substr(0,Ge);Ge<lr;Ge+=dt)Tt+=At+Xn.substr(Ge,dt);yt>0&&(Tt+=At+Xn.slice(Ge)),Wn&&(Tt="-"+Tt)}je=ln?Tt+($e.decimalSeparator||"")+((yt=+$e.fractionGroupSize)?ln.replace(new RegExp("\\d{"+yt+"}\\B","g"),"$&"+($e.fractionGroupSeparator||"")):ln):Tt}return($e.prefix||"")+je+($e.suffix||"")},M.toFraction=function(be){var ke,$e,je,He,Ge,ht,dt,yt,At,Tt,ln,Wn,Xn=this,lr=Xn.c;if(be!=null&&(dt=new nt(be),!dt.isInteger()&&(dt.c||dt.s!==1)||dt.lt(W)))throw Error($i+"Argument "+(dt.isInteger()?"out of range: ":"not an integer: ")+Bt(dt));if(!lr)return new nt(Xn);for(ke=new nt(W),At=$e=new nt(W),je=yt=new nt(W),Wn=qs(lr),Ge=ke.e=Wn.length-Xn.e-1,ke.c[0]=tl[(ht=Ge%wr)<0?wr+ht:ht],be=!be||dt.comparedTo(ke)>0?Ge>0?ke:At:dt,ht=qe,qe=1/0,dt=new nt(Wn),yt.c[0]=0;Tt=m(dt,ke,0,1),He=$e.plus(Tt.times(je)),He.comparedTo(be)!=1;)$e=je,je=He,At=yt.plus(Tt.times(He=At)),yt=He,ke=dt.minus(Tt.times(He=ke)),dt=He;return He=m(be.minus($e),je,0,1),yt=yt.plus(He.times(At)),$e=$e.plus(He.times(je)),yt.s=At.s=Xn.s,Ge=Ge*2,ln=m(At,je,Ge,oe).minus(Xn).abs().comparedTo(m(yt,$e,Ge,oe).minus(Xn).abs())<1?[At,je]:[yt,$e],qe=ht,ln},M.toNumber=function(){return+Bt(this)},M.toPrecision=function(be,ke){return be!=null&&u(be,1,Lo),st(this,be,ke,2)},M.toString=function(be){var ke,$e=this,je=$e.s,He=$e.e;return He===null?je?(ke="Infinity",je<0&&(ke="-"+ke)):ke="NaN":(be==null?ke=He<=ye||He>=Ee?P(qs($e.c),He):G(qs($e.c),He,"0"):be===10&&br?($e=Et(new nt($e),ne+He+1,oe),ke=G(qs($e.c),$e.e,"0")):(u(be,2,An.length,"Base"),ke=_(G(qs($e.c),He,"0"),10,be,je,!0)),je<0&&$e.c[0]&&(ke="-"+ke)),ke},M.valueOf=M.toJSON=function(){return Bt(this)},M._isBigNumber=!0,M[Symbol.toStringTag]="BigNumber",M[Symbol.for("nodejs.util.inspect.custom")]=M.valueOf,h!=null&&nt.set(h),nt}function Gs(h){var m=h|0;return h>0||h===m?m:m-1}function qs(h){for(var m,_,C=1,M=h.length,W=h[0]+"";C<M;){for(m=h[C++]+"",_=wr-m.length;_--;m="0"+m);W+=m}for(M=W.length;W.charCodeAt(--M)===48;);return W.slice(0,M+1||1)}function wa(h,m){var _,C,M=h.c,W=m.c,ne=h.s,oe=m.s,ye=h.e,Ee=m.e;if(!ne||!oe)return null;if(_=M&&!M[0],C=W&&!W[0],_||C)return _?C?0:-oe:ne;if(ne!=oe)return ne;if(_=ne<0,C=ye==Ee,!M||!W)return C?0:!M^_?1:-1;if(!C)return ye>Ee^_?1:-1;for(oe=(ye=M.length)<(Ee=W.length)?ye:Ee,ne=0;ne<oe;ne++)if(M[ne]!=W[ne])return M[ne]>W[ne]^_?1:-1;return ye==Ee?0:ye>Ee^_?1:-1}function u(h,m,_,C){if(h<m||h>_||h!==Es(h))throw Error($i+(C||"Argument")+(typeof h=="number"?h<m||h>_?" out of range: ":" not an integer: ":" not a primitive number: ")+String(h))}function y(h){var m=h.c.length-1;return Gs(h.e/wr)==m&&h.c[m]%2!=0}function P(h,m){return(h.length>1?h.charAt(0)+"."+h.slice(1):h)+(m<0?"e":"e+")+m}function G(h,m,_){var C,M;if(m<0){for(M=_+".";++m;M+=_);h=M+h}else if(C=h.length,++m>C){for(M=_,m-=C;--m;M+=_);h+=M}else m<C&&(h=h.slice(0,m)+"."+h.slice(m));return h}var le=oh(),Pe=le,ct=class{constructor(h){Ke(this,"key");Ke(this,"left",null);Ke(this,"right",null);this.key=h}},Ot=class extends ct{constructor(h){super(h)}},Gt=class{constructor(){Ke(this,"size",0);Ke(this,"modificationCount",0);Ke(this,"splayCount",0)}splay(h){let m=this.root;if(m==null)return this.compare(h,h),-1;let _=null,C=null,M=null,W=null,ne=m,oe=this.compare,ye;for(;;)if(ye=oe(ne.key,h),ye>0){let Ee=ne.left;if(Ee==null||(ye=oe(Ee.key,h),ye>0&&(ne.left=Ee.right,Ee.right=ne,ne=Ee,Ee=ne.left,Ee==null)))break;_==null?C=ne:_.left=ne,_=ne,ne=Ee}else if(ye<0){let Ee=ne.right;if(Ee==null||(ye=oe(Ee.key,h),ye<0&&(ne.right=Ee.left,Ee.left=ne,ne=Ee,Ee=ne.right,Ee==null)))break;M==null?W=ne:M.right=ne,M=ne,ne=Ee}else break;return M!=null&&(M.right=ne.left,ne.left=W),_!=null&&(_.left=ne.right,ne.right=C),this.root!==ne&&(this.root=ne,this.splayCount++),ye}splayMin(h){let m=h,_=m.left;for(;_!=null;){let C=_;m.left=C.right,C.right=m,m=C,_=m.left}return m}splayMax(h){let m=h,_=m.right;for(;_!=null;){let C=_;m.right=C.left,C.left=m,m=C,_=m.right}return m}_delete(h){if(this.root==null||this.splay(h)!=0)return null;let m=this.root,_=m,C=m.left;if(this.size--,C==null)this.root=m.right;else{let M=m.right;m=this.splayMax(C),m.right=M,this.root=m}return this.modificationCount++,_}addNewRoot(h,m){this.size++,this.modificationCount++;let _=this.root;if(_==null){this.root=h;return}m<0?(h.left=_,h.right=_.right,_.right=null):(h.right=_,h.left=_.left,_.left=null),this.root=h}_first(){let h=this.root;return h==null?null:(this.root=this.splayMin(h),this.root)}_last(){let h=this.root;return h==null?null:(this.root=this.splayMax(h),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(h){return this.validKey(h)&&this.splay(h)==0}defaultCompare(){return(h,m)=>h<m?-1:h>m?1:0}wrap(){return{getRoot:()=>this.root,setRoot:h=>{this.root=h},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:h=>{this.splayCount=h},splay:h=>this.splay(h),has:h=>this.has(h)}}},cn=class Lg extends Gt{constructor(_,C){super();Ke(this,"root",null);Ke(this,"compare");Ke(this,"validKey");Ke(this,In,"[object Set]");this.compare=_??this.defaultCompare(),this.validKey=C??(M=>M!=null&&M!=null)}delete(_){return this.validKey(_)?this._delete(_)!=null:!1}deleteAll(_){for(let C of _)this.delete(C)}forEach(_){let C=this[Symbol.iterator](),M;for(;M=C.next(),!M.done;)_(M.value,M.value,this)}add(_){let C=this.splay(_);return C!=0&&this.addNewRoot(new Ot(_),C),this}addAndReturn(_){let C=this.splay(_);return C!=0&&this.addNewRoot(new Ot(_),C),this.root.key}addAll(_){for(let C of _)this.add(C)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)<0)return this.root.key;let C=this.root.left;if(C==null)return null;let M=C.right;for(;M!=null;)C=M,M=C.right;return C.key}firstAfter(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)>0)return this.root.key;let C=this.root.right;if(C==null)return null;let M=C.left;for(;M!=null;)C=M,M=C.left;return C.key}retainAll(_){let C=new Lg(this.compare,this.validKey),M=this.modificationCount;for(let W of _){if(M!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(W)&&this.splay(W)==0&&C.add(this.root.key)}C.size!=this.size&&(this.root=C.root,this.size=C.size,this.modificationCount++)}lookup(_){return!this.validKey(_)||this.splay(_)!=0?null:this.root.key}intersection(_){let C=new Lg(this.compare,this.validKey);for(let M of this)_.has(M)&&C.add(M);return C}difference(_){let C=new Lg(this.compare,this.validKey);for(let M of this)_.has(M)||C.add(M);return C}union(_){let C=this.clone();return C.addAll(_),C}clone(){let _=new Lg(this.compare,this.validKey);return _.size=this.size,_.root=this.copyNode(this.root),_}copyNode(_){if(_==null)return null;function C(W,ne){let oe,ye;do{if(oe=W.left,ye=W.right,oe!=null){let Ee=new Ot(oe.key);ne.left=Ee,C(oe,Ee)}if(ye!=null){let Ee=new Ot(ye.key);ne.right=Ee,W=ye,ne=Ee}}while(ye!=null)}let M=new Ot(_.key);return C(_,M),M}toSet(){return this.clone()}entries(){return new $r(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(ar=Symbol.iterator,In=Symbol.toStringTag,ar)](){return new or(this.wrap())}},zn=class{constructor(h){Ke(this,"tree");Ke(this,"path",new Array);Ke(this,"modificationCount",null);Ke(this,"splayCount");this.tree=h,this.splayCount=h.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let h=this.path[this.path.length-1];return this.getValue(h)}rebuildPath(h){this.path.splice(0,this.path.length),this.tree.splay(h),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(h){for(;h!=null;)this.path.push(h),h=h.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let _=this.tree.getRoot();for(;_!=null;)this.path.push(_),_=_.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let h=this.path[this.path.length-1],m=h.right;if(m!=null){for(;m!=null;)this.path.push(m),m=m.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===h;)h=this.path.pop();return this.path.length>0}},or=class extends zn{getValue(h){return h.key}},$r=class extends zn{getValue(h){return[h.key,h.key]}},Ps=h=>h,as=h=>{if(h){let m=new cn(Bo(h)),_=new cn(Bo(h)),C=(W,ne)=>ne.addAndReturn(W),M=W=>({x:C(W.x,m),y:C(W.y,_)});return M({x:new Pe(0),y:new Pe(0)}),M}return Ps},Ys=h=>({set:m=>{Ji=Ys(m)},reset:()=>Ys(h),compare:Bo(h),snap:as(h),orient:ca(h)}),Ji=Ys(),Fo=(h,m)=>h.ll.x.isLessThanOrEqualTo(m.x)&&m.x.isLessThanOrEqualTo(h.ur.x)&&h.ll.y.isLessThanOrEqualTo(m.y)&&m.y.isLessThanOrEqualTo(h.ur.y),ah=(h,m)=>{if(m.ur.x.isLessThan(h.ll.x)||h.ur.x.isLessThan(m.ll.x)||m.ur.y.isLessThan(h.ll.y)||h.ur.y.isLessThan(m.ll.y))return null;let _=h.ll.x.isLessThan(m.ll.x)?m.ll.x:h.ll.x,C=h.ur.x.isLessThan(m.ur.x)?h.ur.x:m.ur.x,M=h.ll.y.isLessThan(m.ll.y)?m.ll.y:h.ll.y,W=h.ur.y.isLessThan(m.ur.y)?h.ur.y:m.ur.y;return{ll:{x:_,y:M},ur:{x:C,y:W}}},Va=(h,m)=>h.x.times(m.y).minus(h.y.times(m.x)),xa=(h,m)=>h.x.times(m.x).plus(h.y.times(m.y)),ha=h=>xa(h,h).sqrt(),Od=(h,m,_)=>{let C={x:m.x.minus(h.x),y:m.y.minus(h.y)},M={x:_.x.minus(h.x),y:_.y.minus(h.y)};return Va(M,C).div(ha(M)).div(ha(C))},Nu=(h,m,_)=>{let C={x:m.x.minus(h.x),y:m.y.minus(h.y)},M={x:_.x.minus(h.x),y:_.y.minus(h.y)};return xa(M,C).div(ha(M)).div(ha(C))},bi=(h,m,_)=>m.y.isZero()?null:{x:h.x.plus(m.x.div(m.y).times(_.minus(h.y))),y:_},lo=(h,m,_)=>m.x.isZero()?null:{x:_,y:h.y.plus(m.y.div(m.x).times(_.minus(h.x)))},Ie=(h,m,_,C)=>{if(m.x.isZero())return lo(_,C,h.x);if(C.x.isZero())return lo(h,m,_.x);if(m.y.isZero())return bi(_,C,h.y);if(C.y.isZero())return bi(h,m,_.y);let M=Va(m,C);if(M.isZero())return null;let W={x:_.x.minus(h.x),y:_.y.minus(h.y)},ne=Va(W,m).div(M),oe=Va(W,C).div(M),ye=h.x.plus(oe.times(m.x)),Ee=_.x.plus(ne.times(C.x)),rt=h.y.plus(oe.times(m.y)),qe=_.y.plus(ne.times(C.y)),wt=ye.plus(Ee).div(2),It=rt.plus(qe).div(2);return{x:wt,y:It}},jo=class jE{constructor(m,_){Ke(this,"point");Ke(this,"isLeft");Ke(this,"segment");Ke(this,"otherSE");Ke(this,"consumedBy");m.events===void 0?m.events=[this]:m.events.push(this),this.point=m,this.isLeft=_}static compare(m,_){let C=jE.comparePoints(m.point,_.point);return C!==0?C:(m.point!==_.point&&m.link(_),m.isLeft!==_.isLeft?m.isLeft?1:-1:Zs.compare(m.segment,_.segment))}static comparePoints(m,_){return m.x.isLessThan(_.x)?-1:m.x.isGreaterThan(_.x)?1:m.y.isLessThan(_.y)?-1:m.y.isGreaterThan(_.y)?1:0}link(m){if(m.point===this.point)throw new Error("Tried to link already linked events");let _=m.point.events;for(let C=0,M=_.length;C<M;C++){let W=_[C];this.point.events.push(W),W.point=this.point}this.checkForConsuming()}checkForConsuming(){let m=this.point.events.length;for(let _=0;_<m;_++){let C=this.point.events[_];if(C.segment.consumedBy===void 0)for(let M=_+1;M<m;M++){let W=this.point.events[M];W.consumedBy===void 0&&C.otherSE.point.events===W.otherSE.point.events&&C.segment.consume(W.segment)}}}getAvailableLinkedEvents(){let m=[];for(let _=0,C=this.point.events.length;_<C;_++){let M=this.point.events[_];M!==this&&!M.segment.ringOut&&M.segment.isInResult()&&m.push(M)}return m}getLeftmostComparator(m){let _=new Map,C=M=>{let W=M.otherSE;_.set(M,{sine:Od(this.point,m.point,W.point),cosine:Nu(this.point,m.point,W.point)})};return(M,W)=>{_.has(M)||C(M),_.has(W)||C(W);let{sine:ne,cosine:oe}=_.get(M),{sine:ye,cosine:Ee}=_.get(W);return ne.isGreaterThanOrEqualTo(0)&&ye.isGreaterThanOrEqualTo(0)?oe.isLessThan(Ee)?1:oe.isGreaterThan(Ee)?-1:0:ne.isLessThan(0)&&ye.isLessThan(0)?oe.isLessThan(Ee)?-1:oe.isGreaterThan(Ee)?1:0:ye.isLessThan(ne)?-1:ye.isGreaterThan(ne)?1:0}}},rc=0,Zs=class ov{constructor(m,_,C,M){Ke(this,"id");Ke(this,"leftSE");Ke(this,"rightSE");Ke(this,"rings");Ke(this,"windings");Ke(this,"ringOut");Ke(this,"consumedBy");Ke(this,"prev");Ke(this,"_prevInResult");Ke(this,"_beforeState");Ke(this,"_afterState");Ke(this,"_isInResult");this.id=++rc,this.leftSE=m,m.segment=this,m.otherSE=_,this.rightSE=_,_.segment=this,_.otherSE=m,this.rings=C,this.windings=M}static compare(m,_){let C=m.leftSE.point.x,M=_.leftSE.point.x,W=m.rightSE.point.x,ne=_.rightSE.point.x;if(ne.isLessThan(C))return 1;if(W.isLessThan(M))return-1;let oe=m.leftSE.point.y,ye=_.leftSE.point.y,Ee=m.rightSE.point.y,rt=_.rightSE.point.y;if(C.isLessThan(M)){if(ye.isLessThan(oe)&&ye.isLessThan(Ee))return 1;if(ye.isGreaterThan(oe)&&ye.isGreaterThan(Ee))return-1;let qe=m.comparePoint(_.leftSE.point);if(qe<0)return 1;if(qe>0)return-1;let wt=_.comparePoint(m.rightSE.point);return wt!==0?wt:-1}if(C.isGreaterThan(M)){if(oe.isLessThan(ye)&&oe.isLessThan(rt))return-1;if(oe.isGreaterThan(ye)&&oe.isGreaterThan(rt))return 1;let qe=_.comparePoint(m.leftSE.point);if(qe!==0)return qe;let wt=m.comparePoint(_.rightSE.point);return wt<0?1:wt>0?-1:1}if(oe.isLessThan(ye))return-1;if(oe.isGreaterThan(ye))return 1;if(W.isLessThan(ne)){let qe=_.comparePoint(m.rightSE.point);if(qe!==0)return qe}if(W.isGreaterThan(ne)){let qe=m.comparePoint(_.rightSE.point);if(qe<0)return 1;if(qe>0)return-1}if(!W.eq(ne)){let qe=Ee.minus(oe),wt=W.minus(C),It=rt.minus(ye),en=ne.minus(M);if(qe.isGreaterThan(wt)&&It.isLessThan(en))return 1;if(qe.isLessThan(wt)&&It.isGreaterThan(en))return-1}return W.isGreaterThan(ne)?1:W.isLessThan(ne)||Ee.isLessThan(rt)?-1:Ee.isGreaterThan(rt)?1:m.id<_.id?-1:m.id>_.id?1:0}static fromRing(m,_,C){let M,W,ne,oe=jo.comparePoints(m,_);if(oe<0)M=m,W=_,ne=1;else if(oe>0)M=_,W=m,ne=-1;else throw new Error(`Tried to create degenerate segment at [${m.x}, ${m.y}]`);let ye=new jo(M,!0),Ee=new jo(W,!1);return new ov(ye,Ee,[C],[ne])}replaceRightSE(m){this.rightSE=m,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let m=this.leftSE.point.y,_=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:m.isLessThan(_)?m:_},ur:{x:this.rightSE.point.x,y:m.isGreaterThan(_)?m:_}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(m){return m.x.eq(this.leftSE.point.x)&&m.y.eq(this.leftSE.point.y)||m.x.eq(this.rightSE.point.x)&&m.y.eq(this.rightSE.point.y)}comparePoint(m){return Ji.orient(this.leftSE.point,m,this.rightSE.point)}getIntersection(m){let _=this.bbox(),C=m.bbox(),M=ah(_,C);if(M===null)return null;let W=this.leftSE.point,ne=this.rightSE.point,oe=m.leftSE.point,ye=m.rightSE.point,Ee=Fo(_,oe)&&this.comparePoint(oe)===0,rt=Fo(C,W)&&m.comparePoint(W)===0,qe=Fo(_,ye)&&this.comparePoint(ye)===0,wt=Fo(C,ne)&&m.comparePoint(ne)===0;if(rt&&Ee)return wt&&!qe?ne:!wt&&qe?ye:null;if(rt)return qe&&W.x.eq(ye.x)&&W.y.eq(ye.y)?null:W;if(Ee)return wt&&ne.x.eq(oe.x)&&ne.y.eq(oe.y)?null:oe;if(wt&&qe)return null;if(wt)return ne;if(qe)return ye;let It=Ie(W,this.vector(),oe,m.vector());return It===null||!Fo(M,It)?null:Ji.snap(It)}split(m){let _=[],C=m.events!==void 0,M=new jo(m,!0),W=new jo(m,!1),ne=this.rightSE;this.replaceRightSE(W),_.push(W),_.push(M);let oe=new ov(M,ne,this.rings.slice(),this.windings.slice());return jo.comparePoints(oe.leftSE.point,oe.rightSE.point)>0&&oe.swapEvents(),jo.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),C&&(M.checkForConsuming(),W.checkForConsuming()),_}swapEvents(){let m=this.rightSE;this.rightSE=this.leftSE,this.leftSE=m,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let _=0,C=this.windings.length;_<C;_++)this.windings[_]*=-1}consume(m){let _=this,C=m;for(;_.consumedBy;)_=_.consumedBy;for(;C.consumedBy;)C=C.consumedBy;let M=ov.compare(_,C);if(M!==0){if(M>0){let W=_;_=C,C=W}if(_.prev===C){let W=_;_=C,C=W}for(let W=0,ne=C.rings.length;W<ne;W++){let oe=C.rings[W],ye=C.windings[W],Ee=_.rings.indexOf(oe);Ee===-1?(_.rings.push(oe),_.windings.push(ye)):_.windings[Ee]+=ye}C.rings=null,C.windings=null,C.consumedBy=_,C.leftSE.consumedBy=_.leftSE,C.rightSE.consumedBy=_.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let m=this.prev.consumedBy||this.prev;this._beforeState=m.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let m=this.beforeState();this._afterState={rings:m.rings.slice(0),windings:m.windings.slice(0),multiPolys:[]};let _=this._afterState.rings,C=this._afterState.windings,M=this._afterState.multiPolys;for(let oe=0,ye=this.rings.length;oe<ye;oe++){let Ee=this.rings[oe],rt=this.windings[oe],qe=_.indexOf(Ee);qe===-1?(_.push(Ee),C.push(rt)):C[qe]+=rt}let W=[],ne=[];for(let oe=0,ye=_.length;oe<ye;oe++){if(C[oe]===0)continue;let Ee=_[oe],rt=Ee.poly;if(ne.indexOf(rt)===-1)if(Ee.isExterior)W.push(rt);else{ne.indexOf(rt)===-1&&ne.push(rt);let qe=W.indexOf(Ee.poly);qe!==-1&&W.splice(qe,1)}}for(let oe=0,ye=W.length;oe<ye;oe++){let Ee=W[oe].multiPoly;M.indexOf(Ee)===-1&&M.push(Ee)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let m=this.beforeState().multiPolys,_=this.afterState().multiPolys;switch(Hh.type){case"union":{let C=m.length===0,M=_.length===0;this._isInResult=C!==M;break}case"intersection":{let C,M;m.length<_.length?(C=m.length,M=_.length):(C=_.length,M=m.length),this._isInResult=M===Hh.numMultiPolys&&C<M;break}case"xor":{let C=Math.abs(m.length-_.length);this._isInResult=C%2===1;break}case"difference":{let C=M=>M.length===1&&M[0].isSubject;this._isInResult=C(m)!==C(_);break}}return this._isInResult}},Hr=class{constructor(h,m,_){Ke(this,"poly");Ke(this,"isExterior");Ke(this,"segments");Ke(this,"bbox");if(!Array.isArray(h)||h.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=m,this.isExterior=_,this.segments=[],typeof h[0][0]!="number"||typeof h[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let C=Ji.snap({x:new Pe(h[0][0]),y:new Pe(h[0][1])});this.bbox={ll:{x:C.x,y:C.y},ur:{x:C.x,y:C.y}};let M=C;for(let W=1,ne=h.length;W<ne;W++){if(typeof h[W][0]!="number"||typeof h[W][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let oe=Ji.snap({x:new Pe(h[W][0]),y:new Pe(h[W][1])});oe.x.eq(M.x)&&oe.y.eq(M.y)||(this.segments.push(Zs.fromRing(M,oe,this)),oe.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=oe.x),oe.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=oe.y),oe.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=oe.x),oe.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=oe.y),M=oe)}(!C.x.eq(M.x)||!C.y.eq(M.y))&&this.segments.push(Zs.fromRing(M,C,this))}getSweepEvents(){let h=[];for(let m=0,_=this.segments.length;m<_;m++){let C=this.segments[m];h.push(C.leftSE),h.push(C.rightSE)}return h}},Vh=class{constructor(h,m){Ke(this,"multiPoly");Ke(this,"exteriorRing");Ke(this,"interiorRings");Ke(this,"bbox");if(!Array.isArray(h))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Hr(h[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let _=1,C=h.length;_<C;_++){let M=new Hr(h[_],this,!1);M.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=M.bbox.ll.x),M.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=M.bbox.ll.y),M.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=M.bbox.ur.x),M.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=M.bbox.ur.y),this.interiorRings.push(M)}this.multiPoly=m}getSweepEvents(){let h=this.exteriorRing.getSweepEvents();for(let m=0,_=this.interiorRings.length;m<_;m++){let C=this.interiorRings[m].getSweepEvents();for(let M=0,W=C.length;M<W;M++)h.push(C[M])}return h}},Af=class{constructor(h,m){Ke(this,"isSubject");Ke(this,"polys");Ke(this,"bbox");if(!Array.isArray(h))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof h[0][0][0]=="number"&&(h=[h])}catch{}this.polys=[],this.bbox={ll:{x:new Pe(Number.POSITIVE_INFINITY),y:new Pe(Number.POSITIVE_INFINITY)},ur:{x:new Pe(Number.NEGATIVE_INFINITY),y:new Pe(Number.NEGATIVE_INFINITY)}};for(let _=0,C=h.length;_<C;_++){let M=new Vh(h[_],this);M.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=M.bbox.ll.x),M.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=M.bbox.ll.y),M.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=M.bbox.ur.x),M.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=M.bbox.ur.y),this.polys.push(M)}this.isSubject=m}getSweepEvents(){let h=[];for(let m=0,_=this.polys.length;m<_;m++){let C=this.polys[m].getSweepEvents();for(let M=0,W=C.length;M<W;M++)h.push(C[M])}return h}},Uh=class Sb{constructor(m){Ke(this,"events");Ke(this,"poly");Ke(this,"_isExteriorRing");Ke(this,"_enclosingRing");this.events=m;for(let _=0,C=m.length;_<C;_++)m[_].segment.ringOut=this;this.poly=null}static factory(m){let _=[];for(let C=0,M=m.length;C<M;C++){let W=m[C];if(!W.isInResult()||W.ringOut)continue;let ne=null,oe=W.leftSE,ye=W.rightSE,Ee=[oe],rt=oe.point,qe=[];for(;ne=oe,oe=ye,Ee.push(oe),oe.point!==rt;)for(;;){let wt=oe.getAvailableLinkedEvents();if(wt.length===0){let xn=Ee[0].point,An=Ee[Ee.length-1].point;throw new Error(`Unable to complete output ring starting at [${xn.x}, ${xn.y}]. Last matching segment found ends at [${An.x}, ${An.y}].`)}if(wt.length===1){ye=wt[0].otherSE;break}let It=null;for(let xn=0,An=qe.length;xn<An;xn++)if(qe[xn].point===oe.point){It=xn;break}if(It!==null){let xn=qe.splice(It)[0],An=Ee.splice(xn.index);An.unshift(An[0].otherSE),_.push(new Sb(An.reverse()));continue}qe.push({index:Ee.length,point:oe.point});let en=oe.getLeftmostComparator(ne);ye=wt.sort(en)[0].otherSE;break}_.push(new Sb(Ee))}return _}getGeom(){let m=this.events[0].point,_=[m];for(let Ee=1,rt=this.events.length-1;Ee<rt;Ee++){let qe=this.events[Ee].point,wt=this.events[Ee+1].point;Ji.orient(qe,m,wt)!==0&&(_.push(qe),m=qe)}if(_.length===1)return null;let C=_[0],M=_[1];Ji.orient(C,m,M)===0&&_.shift(),_.push(_[0]);let W=this.isExteriorRing()?1:-1,ne=this.isExteriorRing()?0:_.length-1,oe=this.isExteriorRing()?_.length:-1,ye=[];for(let Ee=ne;Ee!=oe;Ee+=W)ye.push([_[Ee].x.toNumber(),_[Ee].y.toNumber()]);return ye}isExteriorRing(){if(this._isExteriorRing===void 0){let m=this.enclosingRing();this._isExteriorRing=m?!m.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var M,W;let m=this.events[0];for(let ne=1,oe=this.events.length;ne<oe;ne++){let ye=this.events[ne];jo.compare(m,ye)>0&&(m=ye)}let _=m.segment.prevInResult(),C=_?_.prevInResult():null;for(;;){if(!_)return null;if(!C)return _.ringOut;if(C.ringOut!==_.ringOut)return((M=C.ringOut)==null?void 0:M.enclosingRing())!==_.ringOut?_.ringOut:(W=_.ringOut)==null?void 0:W.enclosingRing();_=C.prevInResult(),C=_?_.prevInResult():null}}},Ll=class{constructor(h){Ke(this,"exteriorRing");Ke(this,"interiorRings");this.exteriorRing=h,h.poly=this,this.interiorRings=[]}addInterior(h){this.interiorRings.push(h),h.poly=this}getGeom(){let h=this.exteriorRing.getGeom();if(h===null)return null;let m=[h];for(let _=0,C=this.interiorRings.length;_<C;_++){let M=this.interiorRings[_].getGeom();M!==null&&m.push(M)}return m}},lh=class{constructor(h){Ke(this,"rings");Ke(this,"polys");this.rings=h,this.polys=this._composePolys(h)}getGeom(){let h=[];for(let m=0,_=this.polys.length;m<_;m++){let C=this.polys[m].getGeom();C!==null&&h.push(C)}return h}_composePolys(h){var _;let m=[];for(let C=0,M=h.length;C<M;C++){let W=h[C];if(!W.poly)if(W.isExteriorRing())m.push(new Ll(W));else{let ne=W.enclosingRing();ne!=null&&ne.poly||m.push(new Ll(ne)),(_=ne==null?void 0:ne.poly)==null||_.addInterior(W)}}return m}},Nd=class{constructor(h,m=Zs.compare){Ke(this,"queue");Ke(this,"tree");Ke(this,"segments");this.queue=h,this.tree=new cn(m),this.segments=[]}process(h){let m=h.segment,_=[];if(h.consumedBy)return h.isLeft?this.queue.delete(h.otherSE):this.tree.delete(m),_;h.isLeft&&this.tree.add(m);let C=m,M=m;do C=this.tree.lastBefore(C);while(C!=null&&C.consumedBy!=null);do M=this.tree.firstAfter(M);while(M!=null&&M.consumedBy!=null);if(h.isLeft){let W=null;if(C){let oe=C.getIntersection(m);if(oe!==null&&(m.isAnEndpoint(oe)||(W=oe),!C.isAnEndpoint(oe))){let ye=this._splitSafely(C,oe);for(let Ee=0,rt=ye.length;Ee<rt;Ee++)_.push(ye[Ee])}}let ne=null;if(M){let oe=M.getIntersection(m);if(oe!==null&&(m.isAnEndpoint(oe)||(ne=oe),!M.isAnEndpoint(oe))){let ye=this._splitSafely(M,oe);for(let Ee=0,rt=ye.length;Ee<rt;Ee++)_.push(ye[Ee])}}if(W!==null||ne!==null){let oe=null;W===null?oe=ne:ne===null?oe=W:oe=jo.comparePoints(W,ne)<=0?W:ne,this.queue.delete(m.rightSE),_.push(m.rightSE);let ye=m.split(oe);for(let Ee=0,rt=ye.length;Ee<rt;Ee++)_.push(ye[Ee])}_.length>0?(this.tree.delete(m),_.push(h)):(this.segments.push(m),m.prev=C)}else{if(C&&M){let W=C.getIntersection(M);if(W!==null){if(!C.isAnEndpoint(W)){let ne=this._splitSafely(C,W);for(let oe=0,ye=ne.length;oe<ye;oe++)_.push(ne[oe])}if(!M.isAnEndpoint(W)){let ne=this._splitSafely(M,W);for(let oe=0,ye=ne.length;oe<ye;oe++)_.push(ne[oe])}}}this.tree.delete(m)}return _}_splitSafely(h,m){this.tree.delete(h);let _=h.rightSE;this.queue.delete(_);let C=h.split(m);return C.push(_),h.consumedBy===void 0&&this.tree.add(h),C}},Up=class{constructor(){Ke(this,"type");Ke(this,"numMultiPolys")}run(h,m,_){Dc.type=h;let C=[new Af(m,!0)];for(let ye=0,Ee=_.length;ye<Ee;ye++)C.push(new Af(_[ye],!1));if(Dc.numMultiPolys=C.length,Dc.type==="difference"){let ye=C[0],Ee=1;for(;Ee<C.length;)ah(C[Ee].bbox,ye.bbox)!==null?Ee++:C.splice(Ee,1)}if(Dc.type==="intersection")for(let ye=0,Ee=C.length;ye<Ee;ye++){let rt=C[ye];for(let qe=ye+1,wt=C.length;qe<wt;qe++)if(ah(rt.bbox,C[qe].bbox)===null)return[]}let M=new cn(jo.compare);for(let ye=0,Ee=C.length;ye<Ee;ye++){let rt=C[ye].getSweepEvents();for(let qe=0,wt=rt.length;qe<wt;qe++)M.add(rt[qe])}let W=new Nd(M),ne=null;for(M.size!=0&&(ne=M.first(),M.delete(ne));ne;){let ye=W.process(ne);for(let Ee=0,rt=ye.length;Ee<rt;Ee++){let qe=ye[Ee];qe.consumedBy===void 0&&M.add(qe)}M.size!=0?(ne=M.first(),M.delete(ne)):ne=null}Ji.reset();let oe=Uh.factory(W.segments);return new lh(oe).getGeom()}},Dc=new Up,Hh=Dc,gu=(h,...m)=>Hh.run("intersection",h,m),Hp=(h,...m)=>Hh.run("difference",h,m);Ji.set;function Wh(h){let m={type:"Feature"};return m.geometry=h,m}function Gh(h){return h.type==="Feature"?h.geometry:h}function Tf(h){return h&&h.geometry&&h.geometry.coordinates?h.geometry.coordinates:h}function Df(h){return Wh({type:"LineString",coordinates:h})}function nl(h){return Wh({type:"MultiLineString",coordinates:h})}function Of(h){return Wh({type:"Polygon",coordinates:h})}function Nf(h){return Wh({type:"MultiPolygon",coordinates:h})}function If(h,m){let _=Gh(h),C=Gh(m),M=gu(_.coordinates,C.coordinates);return M.length===0?null:M.length===1?Of(M[0]):Nf(M)}function w(h,m){let _=Gh(h),C=Gh(m),M=Hp(_.coordinates,C.coordinates);return M.length===0?null:M.length===1?Of(M[0]):Nf(M)}function T(h){return Array.isArray(h)?1+T(h[0]):-1}function q(h){h instanceof L.Polyline&&(h=h.toGeoJSON(15));let m=Tf(h),_=T(m),C=[];return _>1?m.forEach(M=>{C.push(Df(M))}):C.push(h),C}function ue(h){let m=[];return h.eachLayer(_=>{m.push(Tf(_.toGeoJSON(15)))}),nl(m)}vs.Cut=vs.Polygon.extend({initialize(h){this._map=h,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=2)return;let m=L.polygon(h,this.options.pathOptions);m._latlngInfos=this._layer._latlngInfo,this.cut(m),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:C,originalLayer:M})=>{this._fireCut(M,C,M),this._fireCut(this._map,C,M),M.pm._fireEdit()}),this._editedLayers=[];let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},cut(h){let m=this._map._layers,_=h._latlngInfos||[];Object.keys(m).map(C=>m[C]).filter(C=>C.pm).filter(C=>!C._pmTempLayer).filter(C=>!L.PM.optIn&&!C.options.pmIgnore||L.PM.optIn&&C.options.pmIgnore===!1).filter(C=>C instanceof L.Polyline).filter(C=>C!==h).filter(C=>C.pm.options.allowCutting).filter(C=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(C)>-1:!0).filter(C=>!this._layerGroup.hasLayer(C)).filter(C=>{try{let M=!!Io(h.toGeoJSON(15),C.toGeoJSON(15)).features.length>0;return M||C instanceof L.Polyline&&!(C instanceof L.Polygon)?M:!!If(h.toGeoJSON(15),C.toGeoJSON(15))}catch{return C instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(C=>{let M;if(C instanceof L.Polygon){M=L.polygon(C.getLatLngs());let ye=M.getLatLngs();_.forEach(Ee=>{if(Ee&&Ee.snapInfo){let{latlng:rt}=Ee,qe=this._calcClosestLayer(rt,[M]);if(qe&&qe.segment&&qe.distance<this.options.snapDistance){let{segment:wt}=qe;if(wt&&wt.length===2){let{indexPath:It,parentPath:en,newIndex:xn}=L.PM.Utils._getIndexFromSegment(ye,wt);(It.length>1?(0,Ui.default)(ye,en):ye).splice(xn,0,rt)}}}})}else M=C;let W=this._cutLayer(h,M),ne=L.geoJSON(W,C.options);ne.getLayers().length===1&&([ne]=ne.getLayers()),this._setPane(ne,"layerPane");let oe=ne.addTo(this._map.pm._getContainingLayer());if(oe.pm.enable(C.pm.options),oe.pm.disable(),C._pmTempLayer=!0,h._pmTempLayer=!0,C.remove(),C.removeFrom(this._map.pm._getContainingLayer()),h.remove(),h.removeFrom(this._map.pm._getContainingLayer()),oe.getLayers&&oe.getLayers().length===0&&this._map.pm.removeLayer({target:oe}),oe instanceof L.LayerGroup?(oe.eachLayer(ye=>{this._addDrawnLayerProp(ye)}),this._addDrawnLayerProp(oe)):this._addDrawnLayerProp(oe),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let ye=this.options.layersToCut.indexOf(C);ye>-1&&this.options.layersToCut.splice(ye,1)}this._editedLayers.push({layer:oe,originalLayer:C})})},_cutLayer(h,m){let _=L.geoJSON(),C;if(m instanceof L.Polygon)C=w(m.toGeoJSON(15),h.toGeoJSON(15));else{let M=q(m);M.forEach(W=>{let ne=rr(W,h.toGeoJSON(15)),oe;ne&&ne.features.length>0?oe=L.geoJSON(ne):oe=L.geoJSON(W),oe.getLayers().forEach(ye=>{Ra(h.toGeoJSON(15),ye.toGeoJSON(15))||ye.addTo(_)})}),M.length>1?C=ue(_):C=_.toGeoJSON(15)}return C},_change:L.Util.falseFn}),vs.Text=vs.extend({initialize(h){this._map=h,this._shape="Text",this.toolbarButtonName="drawText"},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(mr("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var h;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(h=this._hintMarker)==null||h.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let m=h;m.target=this._hintMarker,this._handleSnapping(m)}},_createMarker(h){var M,W,ne,oe;if(!h.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let m=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(M=this.options.textOptions)==null?void 0:M.className){let ye=this.options.textOptions.className.split(" ");this.textArea.classList.add(...ye)}let _=this._createTextIcon(this.textArea),C=new L.Marker(m,{textMarker:!0,_textMarkerOverPM:!0,icon:_});if(this._setPane(C,"markerPane"),this._finishLayer(C),C.pm||(C.options.draggable=!1),C.addTo(this._map.pm._getContainingLayer()),C.pm){C.pm.textArea=this.textArea,L.setOptions(C.pm,{removeIfEmpty:((W=this.options.textOptions)==null?void 0:W.removeIfEmpty)??!0});let ye=((ne=this.options.textOptions)==null?void 0:ne.focusAfterDraw)??!0;C.pm._createTextMarker(ye),(oe=this.options.textOptions)!=null&&oe.text&&C.pm.setText(this.options.textOptions.text)}this._fireCreate(C),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(h){this.enable(),this._hintMarker.setLatLng(h.latlng)},_createTextArea(){let h=document.createElement("textarea");return h.readOnly=!0,h.classList.add("pm-textarea","pm-disabled"),h},_createTextIcon(h){return L.divIcon({className:"pm-text-marker",html:h})}});var Le={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Li(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let h=this._getDOMElem();h&&(Li(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(h)):L.DomEvent.on(h,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,Li(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let h=this._getDOMElem();h&&(Li(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(h)):L.DomEvent.off(h,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(h){let m=h.touches?h.touches[0]:h,_={originalEvent:m,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(m),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseDown(_),!1},_simulateMouseMoveEvent(h){let m=h.touches?h.touches[0]:h,_={originalEvent:m,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(m),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseMove(_),!1},_simulateMouseUpEvent(h){let m={originalEvent:h.touches?h.touches[0]:h,target:this._layer};return h.type.indexOf("touch")===-1&&(m.containerPoint=this._map.mouseEventToContainerPoint(h),m.latlng=this._map.containerPointToLatLng(m.containerPoint)),this._dragMixinOnMouseUp(m),!1},_dragMixinOnMouseDown(h){if(h.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(h);let m=h._fromLayerSync,_=this._syncLayers("_dragMixinOnMouseDown",h);if(this._layer instanceof L.Marker&&(this.options.snappable&&!m&&!_?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let C="resizeableCircleMarker";this._layer instanceof L.Circle&&(C="resizeableCircle"),this.options.snappable&&!m&&!_?this._layer.pm.options[C]||this._initSnappableMarkersDrag():this._layer.pm.options[C]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=h.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(h){this._overwriteEventIfItComesFromMarker(h);let m=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",h),this._dragging||(this._dragging=!0,L.DomUtil.addClass(m,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=h.latlng),this._onLayerDrag(h),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(h){let m=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",h),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,m&&L.DomUtil.removeClass(m,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(h){let{latlng:m}=h,_={lat:m.lat-this._tempDragCoord.lat,lng:m.lng-this._tempDragCoord.lng},C=M=>M.map(W=>{if(Array.isArray(W))return C(W);let ne={lat:W.lat+_.lat,lng:W.lng+_.lng};return(W.alt||W.alt===0)&&(ne.alt=W.alt),ne});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let M=C([this._layer.getLatLng()]);this._layer.setLatLng(M[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let M=this._layer.getLatLng();this._layer._snapped&&(M=this._layer._orgLatLng);let W=C([M]);this._layer.setLatLng(W[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let M=C([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(M),this._fireChange(this._layer.getBounds(),"Edit")}else{let M=C(this._layer.getLatLngs());this._layer.setLatLngs(M),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=m,h.layer=this._layer,this._fireDrag(h)},addDraggingClass(){let h=this._getDOMElem();h&&L.DomUtil.addClass(h,"leaflet-pm-draggable")},removeDraggingClass(){let h=this._getDOMElem();h&&L.DomUtil.removeClass(h,"leaflet-pm-draggable")},_getDOMElem(){let h=null;return this._layer._path?h=this._layer._path:this._layer._renderer&&this._layer._renderer._container?h=this._layer._renderer._container:this._layer._image?h=this._layer._image:this._layer._icon&&(h=this._layer._icon),h},_overwriteEventIfItComesFromMarker(h){h.target.getLatLng&&(!h.target._radius||h.target._radius<=10)&&(h.containerPoint=this._map.mouseEventToContainerPoint(h.originalEvent),h.latlng=this._map.containerPointToLatLng(h.containerPoint))},_syncLayers(h,m){if(this.enabled())return!1;if(!m._fromLayerSync&&this._layer===m.target&&this.options.syncLayersOnDrag){m._fromLayerSync=!0;let _=[];if(L.Util.isArray(this.options.syncLayersOnDrag))_=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(C=>{C instanceof L.LayerGroup&&(_=_.concat(C.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let C in this._parentLayerGroup){let M=this._parentLayerGroup[C];M.pm&&(_=M.pm.getLayers(!0))}return L.Util.isArray(_)&&_.length>0&&(_=_.filter(C=>!!C.pm).filter(C=>!!C.pm.options.draggable),_.forEach(C=>{C!==this._layer&&C.pm[h]&&(C._snapped=!1,C.pm[h](m))})),_.length>0}return!1},_stopDOMImageDrag(h){return h.preventDefault(),!1}},Me=Le,Ae=l(Qr());function Ne(h,m,_,C){return _.unproject(m.transform(_.project(h,C)),C)}function Fe(h,m,_){let C=_.getMaxZoom();if(C===1/0&&(C=_.getZoom()),L.Util.isArray(h)){let M=[];return h.forEach(W=>{M.push(Fe(W,m,_))}),M}return h instanceof L.LatLng?Ne(h,m,_,C):null}function Xe(h,m){m instanceof L.Layer&&(m=m.getLatLng());let _=h.getMaxZoom();return _===1/0&&(_=h.getZoom()),h.project(m,_)}function mt(h,m){let _=h.getMaxZoom();return _===1/0&&(_=h.getZoom()),h.unproject(m,_)}var Rt={_onRotateStart(h){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Xe(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Xe(this._map,h.target.getLatLng()),this._initialRotateLatLng=ua(this._layer),this._startAngle=this.getAngle();let m=ua(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,m),this._fireRotationStart(this._map,m)},_onRotate(h){let m=Xe(this._map,h.target.getLatLng()),_=this._rotationStartPoint,C=this._rotationOriginPoint,M=Math.atan2(m.y-C.y,m.x-C.x)-Math.atan2(_.y-C.y,_.x-C.x);this._layer.setLatLngs(this._rotateLayer(M,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let W=this;function ne(rt,qe=[],wt=-1){if(wt>-1&&qe.push(wt),L.Util.isArray(rt[0]))rt.forEach((It,en)=>ne(It,qe.slice(),en));else{let It=qe.length>0?(0,Ae.default)(W._markers,qe):W._markers[0];rt.forEach((en,xn)=>{It[xn].setLatLng(en)})}}ne(this._layer.getLatLngs());let oe=ua(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(M,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let ye=M*180/Math.PI;ye=ye<0?ye+360:ye;let Ee=ye+this._startAngle;this._setAngle(Ee),this._rotationLayer.pm._setAngle(Ee),this._fireRotation(this._rotationLayer,ye,oe),this._fireRotation(this._map,ye,oe),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let h=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let m=ua(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=ua(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,h,m),this._fireRotationEnd(this._map,h,m),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(h,m,_,C,M){let W=Xe(M,_);return this._matrix=C.clone().rotate(h,W).flip(),Fe(m,this._matrix,M)},_setAngle(h){h=h<0?h+360:h,this._angle=h%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let h=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),m=h.getCenter();return h.removeFrom(this._layer._map),m},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Oa(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let h={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),h),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=ua(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(h){let m=this.getAngle(),_=this._layer.getLatLngs(),C=h*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(C,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+h),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(C,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let M=this.getAngle()-m;M=M<0?M+360:M,this._startAngle=m,this._fireRotation(this._layer,M,_,this._layer),this._fireRotation(this._map||this._layer._map,M,_,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(h){let m=h-this.getAngle();this.rotateLayer(m)},getAngle(){return this._angle||0},setInitAngle(h){this._setAngle(h)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(h){this._rotationCenter=h,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(h)}},Ft=Rt,Pt=L.Class.extend({includes:[Me,Jo,Ft,uu],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(h){L.Util.setOptions(this,h)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(h,m){m==="layerPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":m==="vertexPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":m==="markerPane"&&(h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(h,m){let _=m.target,C={layer:this._layer,marker:_,event:m},M="";return h==="move"?M="moveVertexValidation":h==="add"?M="addVertexValidation":h==="remove"&&(M="removeVertexValidation"),this.options[M]&&typeof this.options[M]=="function"&&!this.options[M](C)?(h==="move"&&(_._cancelDragEventChain=_.getLatLng()),!1):(_._cancelDragEventChain=null,!0)},_vertexValidationDrag(h){return h._cancelDragEventChain?(h._latlng=h._cancelDragEventChain,h.update(),!1):!0},_vertexValidationDragEnd(h){return h._cancelDragEventChain?(h._cancelDragEventChain=null,!1):!0}}),Zt=Pt;Zt.LayerGroup=L.Class.extend({initialize(h){this._layerGroup=h,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(C=>this._initLayer(C));let m=C=>{if(C.layer._pmTempLayer)return;this._layers=this.getLayers();let M=this._layers.filter(W=>!W.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in W.pm._parentLayerGroup));M.forEach(W=>{this._initLayer(W)}),M.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(m,100,this),this),this._layerGroup.on("layerremove",C=>{this._removeLayerFromGroup(C.target)},this);let _=C=>{C.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(_,100,this),this)},enable(h,m=[]){m.length===0&&(this._layers=this.getLayers()),this._options=h,this._layers.forEach(_=>{_ instanceof L.LayerGroup?m.indexOf(_._leaflet_id)===-1&&(m.push(_._leaflet_id),_.pm.enable(h,m)):_.pm.enable(h)})},disable(h=[]){h.length===0&&(this._layers=this.getLayers()),this._layers.forEach(m=>{m instanceof L.LayerGroup?h.indexOf(m._leaflet_id)===-1&&(h.push(m._leaflet_id),m.pm.disable(h)):m.pm.disable()})},enabled(h=[]){return h.length===0&&(this._layers=this.getLayers()),!!this._layers.find(m=>m instanceof L.LayerGroup?h.indexOf(m._leaflet_id)===-1?(h.push(m._leaflet_id),m.pm.enabled(h)):!1:m.pm.enabled())},toggleEdit(h,m=[]){m.length===0&&(this._layers=this.getLayers()),this._options=h,this._layers.forEach(_=>{_ instanceof L.LayerGroup?m.indexOf(_._leaflet_id)===-1&&(m.push(_._leaflet_id),_.pm.toggleEdit(h,m)):_.pm.toggleEdit(h)})},_initLayer(h){let m=L.Util.stamp(this._layerGroup);h.pm._parentLayerGroup||(h.pm._parentLayerGroup={}),h.pm._parentLayerGroup[m]=this._layerGroup},_removeLayerFromGroup(h){if(h.pm&&h.pm._layerGroup){let m=L.Util.stamp(this._layerGroup);delete h.pm._layerGroup[m]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(h=>h.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var h;return this._map||((h=this._layers.find(m=>!!m._map))==null?void 0:h._map)||null},getLayers(h=!1,m=!0,_=!0,C=[]){let M=[];return h?this._layerGroup.getLayers().forEach(W=>{M.push(W),W instanceof L.LayerGroup&&C.indexOf(W._leaflet_id)===-1&&(C.push(W._leaflet_id),M=M.concat(W.pm.getLayers(!0,!0,!0,C)))}):M=this._layerGroup.getLayers(),_&&(M=M.filter(W=>!(W instanceof L.LayerGroup))),m&&(M=M.filter(W=>!!W.pm),M=M.filter(W=>!W._pmTempLayer),M=M.filter(W=>!L.PM.optIn&&!W.options.pmIgnore||L.PM.optIn&&W.options.pmIgnore===!1)),M},setOptions(h,m=[]){m.length===0&&(this._layers=this.getLayers()),this.options=h,this._layers.forEach(_=>{_.pm&&(_ instanceof L.LayerGroup?m.indexOf(_._leaflet_id)===-1&&(m.push(_._leaflet_id),_.pm.setOptions(h,m)):_.pm.setOptions(h))})}}),Zt.Marker=Zt.extend({_shape:"Marker",initialize(h){this._layer=h,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(h={draggable:!0}){if(L.Util.setOptions(this,h),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(h){let m=h.target;m.remove(),this._fireRemove(m),this._fireRemove(this._map,m)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)}});var qt=l(Qr()),vt={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let h=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=h.filter((m,_,C)=>C.indexOf(m)===_)},_removeFromCache(h){let m=this.markerCache.indexOf(h);m>-1&&this.markerCache.splice(m,1)},renderLimits(h){this.markerCache.forEach(m=>{h.includes(m)?this._markerGroup.addLayer(m):this._markerGroup.removeLayer(m)})},applyLimitFilters({latlng:h={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let m=[...this._filterClosestMarkers(h)];this.renderLimits(m)},_filterClosestMarkers(h){let m=[...this.markerCache],_=this.options.limitMarkersToCount;return _===-1?m:(m.sort((C,M)=>{let W=C._latlng.distanceTo(h),ne=M._latlng.distanceTo(h);return W-ne}),m.filter((C,M)=>_>-1?M<_:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(h){this._preventRenderMarkers=!!h}},xt=vt;Zt.Line=Zt.extend({includes:[xt],_shape:"Line",initialize(h){this._layer=h,this._enabled=!1},enable(h){if(L.Util.setOptions(this,h),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let h=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(h,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(h){return this.enabled()?this.disable():this.enable(h),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let h=this._map,m=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(h),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let _=C=>{if(Array.isArray(C[0]))return C.map(_,this);let M=C.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&C.map((W,ne)=>{let oe=this.isPolygon()?(ne+1)%C.length:ne+1;return this._createMiddleMarker(M[ne],M[oe])}),M};this._markers=_(m),this.filterMarkerGroup(),h.addLayer(this._markerGroup)},_createMarker(h){let m=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(m,"vertexPane"),m._pmTempLayer=!0,this.options.rotate?(m.on("dragstart",this._onRotateStart,this),m.on("drag",this._onRotate,this),m.on("dragend",this._onRotateEnd,this)):(m.on("click",this._onVertexClick,this),m.on("dragstart",this._onMarkerDragStart,this),m.on("move",this._onMarkerDrag,this),m.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||m.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(m),m},_createMiddleMarker(h,m){if(!h||!m)return!1;let _=L.PM.Utils.calcMiddleLatLng(this._map,h.getLatLng(),m.getLatLng()),C=this._createMarker(_),M=L.divIcon({className:"marker-icon marker-icon-middle"});return C.setIcon(M),C.leftM=h,C.rightM=m,h._middleMarkerNext=C,m._middleMarkerPrev=C,C.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),C.on("movestart",this._onMiddleMarkerMoveStart,this),C},_onMiddleMarkerClick(h){let m=h.target;if(!this._vertexValidation("add",h))return;let _=L.divIcon({className:"marker-icon"});m.setIcon(_),this._addMarker(m,m.leftM,m.rightM)},_onMiddleMarkerMoveStart(h){let m=h.target;if(m.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",h)){m.on("move",this._onMiddleMarkerMovePrevent,this);return}m._dragging=!0,this._addMarker(m,m.leftM,m.rightM)},_onMiddleMarkerMovePrevent(h){let m=h.target;this._vertexValidationDrag(m)},_onMiddleMarkerMoveEnd(h){let m=h.target;if(m.off("move",this._onMiddleMarkerMovePrevent,this),m.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(m))return;let _=L.divIcon({className:"marker-icon"});m.setIcon(_),setTimeout(()=>{delete m._dragging},100)},_addMarker(h,m,_){h.off("movestart",this._onMiddleMarkerMoveStart,this),h.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let C=h.getLatLng(),M=this._layer._latlngs;delete h.leftM,delete h.rightM;let{indexPath:W,index:ne,parentPath:oe}=L.PM.Utils.findDeepMarkerIndex(this._markers,m),ye=W.length>1?(0,qt.default)(M,oe):M,Ee=W.length>1?(0,qt.default)(this._markers,oe):this._markers;ye.splice(ne+1,0,C),Ee.splice(ne+1,0,h),this._layer.setLatLngs(M),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(m,h),this._createMiddleMarker(h,_)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(h,L.PM.Utils.findDeepMarkerIndex(this._markers,h).indexPath,C),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Vr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(h){let m=this._layer,_,C;if(this.options.allowSelfIntersection?_=!1:(C=Vr(this._layer.toGeoJSON(15)),_=C.features.length>0),_){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return _;h?this._flashLayer():(m.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(C)}else m.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return _},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(h,m){h.forEach(_=>{Array.isArray(_)?this._updateDisabledMarkerStyle(_,m):_._icon&&(m&&!this._checkMarkerAllowedToDrag(_)?L.DomUtil.addClass(_._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(_._icon,"vertexmarker-disabled"))})},_removeMarker(h){let m=h.target;if(!this._vertexValidation("remove",h))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=ua(this._layer,this._layer.getLatLngs()));let _=this._layer.getLatLngs(),{indexPath:C,index:M,parentPath:W}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);if(!C)return;let ne=C.length>1?(0,qt.default)(_,W):_,oe=C.length>1?(0,qt.default)(this._markers,W):this._markers,ye=W[W.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!ye&&(ne.length<=2||this.isPolygon()&&ne.length<=3)){this._flashLayer();return}ne.splice(M,1),this._layer.setLatLngs(_),this.isPolygon()&&ne.length<=2&&ne.splice(0,ne.length);let Ee=!1;if(ne.length<=1&&(ne.splice(0,ne.length),W.length>1&&C.length>1&&(_=Rl(_)),this._layer.setLatLngs(_),this._initMarkers(),Ee=!0),ms(_)||this._layer.remove(),_=Rl(_),this._layer.setLatLngs(_),this._markers=Rl(this._markers),!Ee&&(oe=C.length>1?(0,qt.default)(this._markers,W):this._markers,m._middleMarkerPrev&&(this._markerGroup.removeLayer(m._middleMarkerPrev),this._removeFromCache(m._middleMarkerPrev)),m._middleMarkerNext&&(this._markerGroup.removeLayer(m._middleMarkerNext),this._removeFromCache(m._middleMarkerNext)),this._markerGroup.removeLayer(m),this._removeFromCache(m),oe)){let rt,qe;if(this.isPolygon()?(rt=(M+1)%oe.length,qe=(M+(oe.length-1))%oe.length):(qe=M-1<0?void 0:M-1,rt=M+1>=oe.length?void 0:M+1),rt!==qe){let wt=oe[qe],It=oe[rt];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(wt,It)}oe.splice(M,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(m,C),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(h){let m=this._layer.getLatLngs(),_=h.getLatLng(),{indexPath:C,index:M,parentPath:W}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);(C.length>1?(0,qt.default)(m,W):m).splice(M,1,_),this._layer.setLatLngs(m)},_getNeighborMarkers(h){let{indexPath:m,index:_,parentPath:C}=L.PM.Utils.findDeepMarkerIndex(this._markers,h),M=m.length>1?(0,qt.default)(this._markers,C):this._markers,W=(_+1)%M.length,ne=(_+(M.length-1))%M.length,oe=M[ne],ye=M[W];return{prevMarker:oe,nextMarker:ye}},_checkMarkerAllowedToDrag(h){let{prevMarker:m,nextMarker:_}=this._getNeighborMarkers(h),C=L.polyline([m.getLatLng(),h.getLatLng()]),M=L.polyline([h.getLatLng(),_.getLatLng()]),W=Io(this._layer.toGeoJSON(15),C.toGeoJSON(15)).features.length,ne=Io(this._layer.toGeoJSON(15),M.toGeoJSON(15)).features.length;return h.getLatLng()===this._markers[0][0].getLatLng()?ne+=1:h.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(W+=1),!(W<=2&&ne<=2)},_onMarkerDragStart(h){let m=h.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",h))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);this._fireMarkerDragStart(h,_),this.options.allowSelfIntersection||(this._coordsBeforeEdit=ua(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(m):this._markerAllowedToDrag=null},_onMarkerDrag(h){let m=h.target;if(!this._vertexValidationDrag(m))return;let{indexPath:_,index:C,parentPath:M}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);if(!_)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(m);let W=_.length>1?(0,qt.default)(this._markers,M):this._markers,ne=(C+1)%W.length,oe=(C+(W.length-1))%W.length,ye=m.getLatLng(),Ee=W[oe].getLatLng(),rt=W[ne].getLatLng();if(m._middleMarkerNext){let qe=L.PM.Utils.calcMiddleLatLng(this._map,ye,rt);m._middleMarkerNext.setLatLng(qe)}if(m._middleMarkerPrev){let qe=L.PM.Utils.calcMiddleLatLng(this._map,ye,Ee);m._middleMarkerPrev.setLatLng(qe)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(h,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(h){let m=h.target;if(!this._vertexValidationDragEnd(m))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,m),C=!this.options.allowSelfIntersection&&this.hasSelfIntersection();C&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(C=!1);let M=!this.options.allowSelfIntersection&&C;if(this._fireMarkerDragEnd(h,_,M),M){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(h,_);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(h){let m=h.target;if(m._dragging)return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);this._fireVertexClick(h,_)}}),Zt.Polygon=Zt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(h){let{prevMarker:m,nextMarker:_}=this._getNeighborMarkers(h),C=L.polyline([m.getLatLng(),h.getLatLng()]),M=L.polyline([h.getLatLng(),_.getLatLng()]),W=Io(this._layer.toGeoJSON(15),C.toGeoJSON(15)).features.length,ne=Io(this._layer.toGeoJSON(15),M.toGeoJSON(15)).features.length;return!(W<=2&&ne<=2)}}),Zt.Rectangle=Zt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let h=this._map,m=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,h.addLayer(this._markerGroup),this._markers=[],this._markers[0]=m.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((_,C)=>{let M=this._cornerMarkers.find(W=>W._index===C);M&&M.setLatLng(_)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(h,m){let _=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(_,"vertexPane"),_._origLatLng=h,_._index=m,_._pmTempLayer=!0,_.on("click",this._onVertexClick,this),this._markerGroup.addLayer(_),_},_addMarkerEvents(){this._markers[0].forEach(h=>{h.on("dragstart",this._onMarkerDragStart,this),h.on("drag",this._onMarkerDrag,this),h.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||h.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(h){if(!this._vertexValidation("move",h))return;let m=h.target,_=this._cornerMarkers;m._oppositeCornerLatLng=_.find(M=>M._index===(m._index+2)%4).getLatLng(),m._snapped=!1;let{indexPath:C}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);this._fireMarkerDragStart(h,C)},_onMarkerDrag(h){let m=h.target;if(!this._vertexValidationDrag(m)||m._index===void 0)return;this._adjustRectangleForMarkerMove(m);let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);this._fireMarkerDrag(h,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(h){let m=h.target;if(!this._vertexValidationDragEnd(m))return;this._cornerMarkers.forEach(C=>{delete C._oppositeCornerLatLng});let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);this._fireMarkerDragEnd(h,_),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(h){L.extend(h._origLatLng,h._latlng);let m=L.PM.Utils._getRotatedRectangle(h.getLatLng(),h._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(m),this._adjustAllMarkers(h),this._layer.redraw()},_adjustAllMarkers(h){let m=this._layer.getLatLngs()[0];if(m&&m.length!==4&&m.length>0)m.forEach((_,C)=>{this._cornerMarkers[C].setLatLng(_)}),this._cornerMarkers.slice(m.length).forEach(_=>{_.setLatLng(m[0])});else if(!m||!m.length)console.error("The layer has no LatLngs");else{let _=m.findIndex(C=>h.getLatLng().equals(C));_>-1?(this._cornerMarkers[(h._index+1)%4].setLatLng(m[(_+1)%4]),this._cornerMarkers[(h._index+2)%4].setLatLng(m[(_+2)%4]),this._cornerMarkers[(h._index+3)%4].setLatLng(m[(_+3)%4])):this._cornerMarkers.forEach(C=>{C.setLatLng(m[C._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Oa(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let h=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(h[0],h[2],this.getAngle(),this._map||this)}}),Zt.CircleMarker=Zt.extend({_shape:"CircleMarker",initialize(h){this._layer=h,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(h={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,h),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let h=this._map;this._helperLayers&&(this._helperLayers.removeFrom(h),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(h);let m=this._layer.getLatLng(),_=this._layer._radius,C=this._getLatLngOnCircle(m,_);this._centerMarker=this._createCenterMarker(m),this._outerMarker=this._createOuterMarker(C),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(h,m){let _=this._map.project(h),C=L.point(_.x+m,_.y);return this._map.unproject(C)},_createHintLine(h,m){let _=h.getLatLng(),C=m.getLatLng();this._hintline=L.polyline([_,C],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(h){let m=this._createMarker(h);return this.options.draggable?(L.DomUtil.addClass(m._icon,"leaflet-pm-draggable"),m.on("move",this._moveCircle,this)):m.dragging.disable(),m},_createOuterMarker(h){let m=this._createMarker(h);return m.on("drag",this._resizeCircle,this),m},_createMarker(h){let m=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(m,"vertexPane"),m._origLatLng=h,m._pmTempLayer=!0,m.on("dragstart",this._onMarkerDragStart,this),m.on("drag",this._onMarkerDrag,this),m.on("dragend",this._onMarkerDragEnd,this),m.on("click",this._onVertexClick,this),this._helperLayers.addLayer(m),m},_moveCircle(h){if(h.target._cancelDragEventChain)return;let m=this._centerMarker.getLatLng();this._layer.setLatLng(m);let _=this._layer._radius,C=this._getLatLngOnCircle(m,_);this._outerMarker._latlng=C,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let h=this._layer.getLatLng(),m=this._layer._radius,_=this._getLatLngOnCircle(h,m);this._outerMarker.setLatLng(_),this._centerMarker.setLatLng(h),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let h=this._centerMarker.getLatLng(),m=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,m);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let h=this._centerMarker.getLatLng(),m=this._outerMarker.getLatLng();this._hintline.setLatLngs([h,m])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(h){this._vertexValidation("move",h)&&this._fireMarkerDragStart(h)},_onMarkerDrag(h){let m=h.target;m instanceof L.Marker&&!this._vertexValidationDrag(m)||this._fireMarkerDrag(h)},_onMarkerDragEnd(h){this._extedingMarkerDragEnd();let m=h.target;this._vertexValidationDragEnd(m)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(h))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let h=this._layer._map||this._map;if(h){let m=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),h,this._layer.getLatLng()),_=L.circle(this._layer.getLatLng(),this._layer.options);_.setRadius(m);let C=h&&h.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(_,200,!C).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(_,200,!C),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let h=this._centerMarker.getLatLng(),m=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,m);return this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?m=cu(this._map,h,m,this._getMinDistanceInMeter(h)):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(m=cu(this._map,h,m,this._getMaxDistanceInMeter(h))),m},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let h=this._centerMarker.getLatLng(),m=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,m);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(h,m){return this._map.project(h).distanceTo(this._map.project(m))},_getMinDistanceInMeter(h){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,h)},_getMaxDistanceInMeter(h){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,h)},_onVertexClick(h){h.target._dragging||this._fireVertexClick(h,void 0)}}),Zt.Circle=Zt.CircleMarker.extend({_shape:"Circle",initialize(h){this._layer=h,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(h){L.PM.Edit.CircleMarker.prototype.enable.call(this,h||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let h=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(h,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let h=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!h).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!h),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(h,m){return this._map.distance(h,m)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(h){h.target._dragging||this._fireVertexClick(h,void 0)}}),Zt.ImageOverlay=Zt.extend({_shape:"ImageOverlay",initialize(h){this._layer=h,this._enabled=!1},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},enabled(){return this._enabled},enable(h={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,h),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let h=this._layer.getBounds(),m=h.getNorthWest(),_=h.getNorthEast(),C=h.getSouthEast(),M=h.getSouthWest();return[m,_,C,M]}}),Zt.Text=Zt.extend({_shape:"Text",initialize(h){this._layer=h,this._enabled=!1},enable(h){if(L.Util.setOptions(this,h),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let h=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),h.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let h=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,m=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${h}px`,this.textArea.style.width=`${m}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(h){h.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(h={}){let m=this._hasFocus;this._hasFocus=h.type==="focus",!m!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(h){h&&(this.textArea.value=h),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let m=this.options.className.split(" ");this.textArea.classList.add(...m)}let h=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(h),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(h=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),h===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(h){h.preventDefault()}});var nn=function(h,m,_,C,M,W){this._matrix=[h,m,_,C,M,W]};nn.init=()=>new L.PM.Matrix(1,0,0,1,0,0),nn.prototype={transform(h){return this._transform(h.clone())},_transform(h){let m=this._matrix,{x:_,y:C}=h;return h.x=m[0]*_+m[1]*C+m[4],h.y=m[2]*_+m[3]*C+m[5],h},untransform(h){let m=this._matrix;return new L.Point((h.x/m[0]-m[4])/m[0],(h.y/m[2]-m[5])/m[2])},clone(){let h=this._matrix;return new L.PM.Matrix(h[0],h[1],h[2],h[3],h[4],h[5])},translate(h){if(h===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let m,_;return typeof h=="number"?(m=h,_=h):(m=h.x,_=h.y),this._add(1,0,0,1,m,_)},scale(h,m){if(h===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let _,C;return m=m||L.point(0,0),typeof h=="number"?(_=h,C=h):(_=h.x,C=h.y),this._add(_,0,0,C,m.x,m.y)._add(1,0,0,1,-m.x,-m.y)},rotate(h,m){let _=Math.cos(h),C=Math.sin(h);return m=m||new L.Point(0,0),this._add(_,C,-C,_,m.x,m.y)._add(1,0,0,1,-m.x,-m.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(h,m,_,C,M,W){let ne=[[],[],[]],oe=this._matrix,ye=[[oe[0],oe[2],oe[4]],[oe[1],oe[3],oe[5]],[0,0,1]],Ee=[[h,_,M],[m,C,W],[0,0,1]],rt;h&&h instanceof L.PM.Matrix&&(oe=h._matrix,Ee=[[oe[0],oe[2],oe[4]],[oe[1],oe[3],oe[5]],[0,0,1]]);for(let qe=0;qe<3;qe+=1)for(let wt=0;wt<3;wt+=1){rt=0;for(let It=0;It<3;It+=1)rt+=ye[qe][It]*Ee[It][wt];ne[qe][wt]=rt}return this._matrix=[ne[0][0],ne[1][0],ne[0][1],ne[1][1],ne[0][2],ne[1][2]],this}};var gn=nn,sn={calcMiddleLatLng(h,m,_){let C=h.project(m),M=h.project(_);return h.unproject(C._add(M)._divideBy(2))},findLayers(h){let m=[];return h.eachLayer(_=>{(_ instanceof L.Polyline||_ instanceof L.Marker||_ instanceof L.Circle||_ instanceof L.CircleMarker||_ instanceof L.ImageOverlay)&&m.push(_)}),m=m.filter(_=>!!_.pm),m=m.filter(_=>!_._pmTempLayer),m=m.filter(_=>!L.PM.optIn&&!_.options.pmIgnore||L.PM.optIn&&_.options.pmIgnore===!1),m},circleToPolygon(h,m=60,_=!0){let C=h.getLatLng(),M=h.getRadius(),W=Zi(C,M,m,0,_),ne=[];for(let oe=0;oe<W.length;oe+=1){let ye=[W[oe].lat,W[oe].lng];ne.push(ye)}return L.polygon(ne,h.options)},disablePopup(h){h.getPopup()&&(h._tempPopupCopy=h.getPopup(),h.unbindPopup())},enablePopup(h){h._tempPopupCopy&&(h.bindPopup(h._tempPopupCopy),delete h._tempPopupCopy)},_fireEvent(h,m,_,C=!1){h.fire(m,_,C);let{groups:M}=this.getAllParentGroups(h);M.forEach(W=>{W.fire(m,_,C)})},getAllParentGroups(h){let m=[],_=[],C=M=>{for(let W in M._eventParents)if(m.indexOf(W)===-1){m.push(W);let ne=M._eventParents[W];_.push(ne),C(ne)}};return!h._pmLastGroupFetch||!h._pmLastGroupFetch.time||new Date().getTime()-h._pmLastGroupFetch.time>1e3?(C(h),h._pmLastGroupFetch={time:new Date().getTime(),groups:_,groupIds:m},{groupIds:m,groups:_}):{groups:h._pmLastGroupFetch.groups,groupIds:h._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Zi,getTranslation:mr,findDeepCoordIndex(h,m,_=!0){let C,M=ne=>(oe,ye)=>{let Ee=ne.concat(ye);if(_){if(oe.lat&&oe.lat===m.lat&&oe.lng===m.lng)return C=Ee,!0}else if(oe.lat&&L.latLng(oe).equals(m))return C=Ee,!0;return Array.isArray(oe)&&oe.some(M(Ee))};h.some(M([]));let W={};return C&&(W={indexPath:C,index:C[C.length-1],parentPath:C.slice(0,C.length-1)}),W},findDeepMarkerIndex(h,m){let _,C=W=>(ne,oe)=>{let ye=W.concat(oe);return ne._leaflet_id===m._leaflet_id?(_=ye,!0):Array.isArray(ne)&&ne.some(C(ye))};h.some(C([]));let M={};return _&&(M={indexPath:_,index:_[_.length-1],parentPath:_.slice(0,_.length-1)}),M},_getIndexFromSegment(h,m){if(m&&m.length===2){let _=this.findDeepCoordIndex(h,m[0]),C=this.findDeepCoordIndex(h,m[1]),M=Math.max(_.index,C.index);return(_.index===0||C.index===0)&&M!==1&&(M+=1),{indexA:_,indexB:C,newIndex:M,indexPath:_.indexPath,parentPath:_.parentPath}}return null},_getRotatedRectangle(h,m,_,C){let M=Xe(C,h),W=Xe(C,m),ne=_*Math.PI/180,oe=Math.cos(ne),ye=Math.sin(ne),Ee=(W.x-M.x)*oe+(W.y-M.y)*ye,rt=(W.y-M.y)*oe-(W.x-M.x)*ye,qe=Ee*oe+M.x,wt=Ee*ye+M.y,It=-rt*ye+M.x,en=rt*oe+M.y,xn=mt(C,M),An=mt(C,{x:qe,y:wt}),br=mt(C,W),nt=mt(C,{x:It,y:en});return[xn,An,br,nt]},pxRadiusToMeterRadius(h,m,_){let C=m.project(_),M=L.point(C.x+h,C.y);return m.distance(m.unproject(M),_)}},Fn=sn;L.PM=L.PM||{version:hr.version,Map:Us,Toolbar:Fl,Draw:vs,Edit:Zt,Utils:Fn,Matrix:gn,activeLang:"en",optIn:!1,initialize(h){this.addInitHooks(h)},setOptIn(h){this.optIn=!!h},addInitHooks(){function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(h);function m(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(m);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(_);function C(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(C);function M(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(M);function W(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(W);function ne(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(ne);function oe(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(oe);function ye(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(ye)},reInitLayer(h){h instanceof L.LayerGroup&&h.eachLayer(m=>{this.reInitLayer(m)}),h.pm||L.PM.optIn&&h.options.pmIgnore!==!1||h.options.pmIgnore||(h instanceof L.Map?h.pm=new L.PM.Map(h):h instanceof L.Marker?h.options.textMarker?(h.pm=new L.PM.Edit.Text(h),h.pm._initTextMarker(),h.pm._createTextMarker(!1)):h.pm=new L.PM.Edit.Marker(h):h instanceof L.Circle?h.pm=new L.PM.Edit.Circle(h):h instanceof L.CircleMarker?h.pm=new L.PM.Edit.CircleMarker(h):h instanceof L.Rectangle?h.pm=new L.PM.Edit.Rectangle(h):h instanceof L.Polygon?h.pm=new L.PM.Edit.Polygon(h):h instanceof L.Polyline?h.pm=new L.PM.Edit.Line(h):h instanceof L.LayerGroup?h.pm=new L.PM.Edit.LayerGroup(h):h instanceof L.ImageOverlay&&(h.pm=new L.PM.Edit.ImageOverlay(h)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(h){let m=this._map.mouseEventToLayerPoint(h),_,C;for(let M=this._drawFirst;M;M=M.next)_=M.layer,_.options.interactive&&_._containsPoint(m)&&(!(h.type==="click"||h.type==="preclick")||!this._map._draggableMoved(_))&&(C=_);C&&(L.DomEvent.fakeStop(h),this._fireEvent([C],h))}}),L.PM.initialize()})();class op extends Zn.Circle{constructor(n,r){const i=r.radius||10;super(n,i,r);Ke(this,"properties");Ke(this,"angleCache",new Map);Ke(this,"lastCenter");Ke(this,"lastCenterCosLat");Ke(this,"_pendingNameUpdate",!1);Ke(this,"_nameUpdateTimeout",null);pn.measure("Circle.constructor.init",()=>{this.properties={type:"Circle",style:{name:r.name||""}},requestAnimationFrame(()=>{this.updateProperties()}),this.on("add",()=>{requestAnimationFrame(()=>{this.updateProperties()})})},"Circle")}updateProperties(){pn.measure("Circle.updateProperties",()=>{var a,l,c,d;const n=this.getRadius(),r=this.getLatLng(),i=((l=(a=this.properties)==null?void 0:a.style)==null?void 0:l.name)||"",s=((c=this.properties)==null?void 0:c.style)||{},o={type:"Circle",radius:n,diameter:n*2,surface:Math.PI*Math.pow(n,2),perimeter:2*Math.PI*n,center:{lat:r.lat,lng:r.lng},style:{...s,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((d=this.options)==null?void 0:d.dashArray)||"",name:i}};JSON.stringify(this.properties)!==JSON.stringify(o)&&(this.properties=o,this.fire("properties:updated",{shape:this,properties:this.properties}))},"Circle")}setName(n){pn.measure("Circle.setName",()=>{var r,i;((i=(r=this.properties)==null?void 0:r.style)==null?void 0:i.name)!==n&&(this.properties.style||(this.properties.style={}),this.properties.style.name=n,!this._pendingNameUpdate&&(this._pendingNameUpdate=!0,this._nameUpdateTimeout&&clearTimeout(this._nameUpdateTimeout),this._nameUpdateTimeout=setTimeout(()=>{this._pendingNameUpdate=!1,this._nameUpdateTimeout=null,this.fire("properties:updated",{shape:this,properties:this.properties})},100)))},"Circle")}getName(){return pn.measure("Circle.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""},"Circle")}setRadius(n){return pn.measure("Circle.setRadius",()=>(super.setRadius(n),this.updateProperties(),this),"Circle")}setLatLng(n){return pn.measure("Circle.setLatLng",()=>(super.setLatLng(n),this.updateProperties(),this),"Circle")}calculatePointOnCircle(n){return pn.measure("Circle.calculatePointOnCircle",()=>{const r=this.getLatLng(),i=this.getRadius();let s=this.angleCache.get(n);if(!s){const o=n*Math.PI/180;s={sin:Math.sin(o),cos:Math.cos(o)},this.angleCache.set(n,s)}return(!this.lastCenter||!this.lastCenter.equals(r))&&(this.lastCenter=r,this.lastCenterCosLat=Math.cos(r.lat*Math.PI/180)),Zn.latLng(r.lat+i/111319.9*s.sin,r.lng+i/(111319.9*this.lastCenterCosLat)*s.cos)},"Circle")}getCardinalPoints(){return pn.measure("Circle.getCardinalPoints",()=>[0,45,90,135,180,225,270,315].map(n=>this.calculatePointOnCircle(n)),"Circle")}calculateAngleFromPoint(n){return pn.measure("Circle.calculateAngleFromPoint",()=>{const r=this.getLatLng(),i=n.lng-r.lng,s=n.lat-r.lat;let o=Math.atan2(s,i)*180/Math.PI;return o<0&&(o+=360),o},"Circle")}resizeFromControlPoint(n){pn.measure("Circle.resizeFromControlPoint",()=>{const i=this.getLatLng().distanceTo(n);i>0&&super.setRadius(i)},"Circle")}clearCache(){this.angleCache.clear(),this.lastCenter=void 0,this.lastCenterCosLat=void 0}}const Zv=(t,e)=>{if(!t||typeof t!="string"||!t.startsWith("#"))return`rgba(0, 0, 0, ${e})`;const n=parseInt(t.slice(1,3),16),r=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return`rgba(${n}, ${r}, ${i}, ${e})`},v5=(t,e)=>{t.style.fontSize=e.fontSize,t.style.color=e.color,t.style.backgroundColor=Zv(e.backgroundColor,e.backgroundOpacity),e.hasBorder?t.style.border=`${e.borderWidth} solid ${Zv(e.borderColor,e.borderOpacity)}`:t.style.border="none",t.style.padding=e.padding,t.style.borderRadius=e.borderRadius},ql=t=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const n=$t.DomUtil.create("div","drawing-help-message");return n.innerHTML=t,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n};function y5(t,e,n){const r=156543.03392*Math.cos(e*Math.PI/180)/Math.pow(2,n);return t/r}const Qi=(t,e="m",n="")=>{let r,i;return e==="m²"?t>=1e4?(r=(t/1e4).toFixed(2),i="ha"):(r=t.toFixed(2),i="m²"):e==="m"?t>=1e3?(r=(t/1e3).toFixed(2),i="km"):(r=t.toFixed(2),i="m"):(r=t.toFixed(2),i=e),n?`${n}: ${r} ${i}`:`${r} ${i}`},zU=t=>({...t,clientX:t.clientX,clientY:t.clientY,button:t.button||0,buttons:t.buttons||0,altKey:t.altKey||!1}),$U=(t,e)=>{let n;return function(...r){window.clearTimeout(n),n=window.setTimeout(()=>t.apply(this,r),e)}},qd=(t,e)=>{let n=0;return function(...r){const i=Date.now();if(!(i-n<e))return n=i,t.apply(this,r)}};function VU(){const t=St(null),e=St(null),n=St(null),r=St(null),i=St(""),s=St(null),o=St(!1),a=St(null);window.addEventListener("clearControlPoints",()=>{s.value=null,n.value&&n.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(H=>H.remove()),document.querySelectorAll(".drawing-help-message").forEach(H=>H.remove())}),Ju(()=>{window.removeEventListener("clearControlPoints",()=>{}),t.value&&(t.value.remove(),t.value=null)});const l=(H,K="Double-cliquez pour éditer")=>{const me={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},fe=(ze,Ce)=>{var Ze;const ve=((Ze=t.value)==null?void 0:Ze.getZoom())||14,Ve=H.lat,Ye=y5(Ce.physicalSize,Ve,ve);return`<div class="text-container" style="width:${Ye}px;height:${Ye}px;transform:rotate(${Ce.rotation}deg)">
        <div class="text-annotation" style="font-size:${Ye*.2}px;color:${Ce.color};background-color:${Zv(Ce.backgroundColor,Ce.backgroundOpacity)};border:${Ce.hasBorder?Ce.borderWidth+" solid "+Zv(Ce.borderColor,Ce.borderOpacity):"none"};padding:${Ce.padding};border-radius:${Ce.borderRadius}">${ze}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},he=()=>{if(!t.value)return;const ze=J.getIcon(),Ce={html:fe(J.properties.text,J.properties.style),className:ze.options.className};J.setIcon($t.divIcon(Ce))},X=$t.divIcon({html:fe(K,me),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),J=$t.marker(H,{icon:X,draggable:!1,pmIgnore:!0});J.properties={type:"text",text:K,style:{...me}},t.value&&(t.value.on("zoomend",he),J.on("remove",()=>{var ze;(ze=t.value)==null||ze.off("zoomend",he)})),he();let De=!1,Te=!1,Je=0,de=0;const ee=ze=>{if(!t.value)return;const Ce=ze.target;if(Ce.classList.contains("rotate")){De=!0;const ve=J.getLatLng(),Ve=t.value.mouseEventToLatLng(ze);Je=Math.atan2(Ve.lat-ve.lat,Ve.lng-ve.lng)*180/Math.PI,de=J.properties.style.rotation||0}else Ce.classList.contains("move")&&(Te=!0);document.addEventListener("mousemove",se),document.addEventListener("mouseup",ce)},se=ze=>{if(!(!Te||!t.value)){if(De){const Ce=J.getLatLng(),ve=t.value.mouseEventToLatLng(ze),Ve=Math.atan2(ve.lat-Ce.lat,ve.lng-Ce.lng)*180/Math.PI,Ye=(de+(Ve-Je))%360;J.properties.style.rotation=Ye;const Ze=J.getIcon(),_t={html:fe(J.properties.text,J.properties.style),className:Ze.options.className};J.setIcon($t.divIcon(_t))}else if(Te){const Ce=zU(ze),ve=t.value.mouseEventToLatLng(Ce);J.setLatLng(ve)}}},ce=()=>{De=!1,Te=!1,document.removeEventListener("mousemove",se),document.removeEventListener("mouseup",ce)};return J.on("add",()=>{const ze=J.getElement();ze&&ze.querySelectorAll(".control-button").forEach(ve=>{ve.addEventListener("mousedown",ee)})}),J.on("remove",()=>{const ze=J.getElement();ze&&ze.querySelectorAll(".control-button").forEach(ve=>{ve.removeEventListener("mousedown",ee)})}),J.on("dblclick",ze=>{var _t;$t.DomEvent.stopPropagation(ze);const Ce=(_t=J.getElement())==null?void 0:_t.querySelector(".text-annotation");if(!Ce)return;Ce.contentEditable="true",Ce.focus(),Ce.classList.add("editing");const ve=window.getSelection(),Ve=document.createRange();Ve.selectNodeContents(Ce),ve==null||ve.removeAllRanges(),ve==null||ve.addRange(Ve);const Ye=()=>{Ce.contentEditable="false",Ce.classList.remove("editing");const We=Ce.innerText.trim();if(We){J.properties.text=We;const ut=J.getIcon(),Vt={html:fe(We,J.properties.style),className:ut.options.className};J.setIcon($t.divIcon(Vt))}Ce.removeEventListener("blur",Ye),Ce.removeEventListener("keydown",Ze)},Ze=We=>{We.key==="Enter"&&!We.shiftKey&&(We.preventDefault(),Ye())};Ce.addEventListener("blur",Ye),Ce.addEventListener("keydown",Ze)}),J},c=(H,K)=>{const me=$t.DomUtil.create("div","measure-tooltip");if(me.innerHTML=K,me.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(me),t.value){const fe=t.value.latLngToContainerPoint(H);me.style.left=`${fe.x+10}px`,me.style.top=`${fe.y-25}px`}return me},d=qd((H,K,me)=>{if(H&&(H.innerHTML=me,t.value)){const fe=t.value.latLngToContainerPoint(K);H.style.left=`${fe.x+10}px`,H.style.top=`${fe.y-25}px`}},100),p=(H,K,me)=>{H.on("mouseover",()=>{const fe=c(H.getLatLng(),me());H.measureDiv=fe}),H.on("mousemove",fe=>{H.measureDiv&&t.value&&d(H.measureDiv,fe.latlng,me())}),H.on("mouseout",()=>{H.measureDiv&&(H.measureDiv.remove(),H.measureDiv=void 0)})};let v=[];const g=()=>{var H;v.cleanup&&v.cleanup(),n.value&&n.value.clearLayers(),v=[],(H=r.value)==null||H.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(K=>K.remove()),e.value&&e.value.getLayers().forEach(K=>{K instanceof Ga&&K.clearHelperPoints()})},x=(H,K="#2563EB")=>{const me=$t.circleMarker(H,{radius:6,color:K,fillColor:K,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(me),me},E=(H,K)=>{var fe,he,X,J,De,Te;console.log("Input layer:",{type:K,instanceof:{Circle:H instanceof $t.Circle,Rectangle:H instanceof $t.Rectangle,Polygon:H instanceof $t.Polygon,Polyline:H instanceof $t.Polyline,ElevationLine:H instanceof Sd,Line:H instanceof ia},options:H.options});const me={type:K,style:H.options||{}};try{if(H instanceof $t.Circle){const Je=H.getRadius();me.radius=Je,me.diameter=Je*2,me.surface=Math.PI*Math.pow(Je,2),me.perimeter=2*Math.PI*Je,me.center=H.getLatLng()}else if(H instanceof $t.Rectangle){const Je=H.getBounds(),de=Je.getNorthEast(),ee=Je.getSouthWest(),se=qu([[ee.lng,ee.lat],[de.lng,ee.lat]]),ce=qu([[ee.lng,ee.lat],[ee.lng,de.lat]]),ze=Gd(se,{units:"meters"}),Ce=Gd(ce,{units:"meters"});me.width=ze,me.height=Ce,me.surface=ze*Ce,me.perimeter=2*(ze+Ce),me.dimensions={width:ze,height:Ce}}else if(H instanceof $t.Polygon)try{const de=H.getLatLngs()[0].map(se=>[se.lng,se.lat]);de.push(de[0]);const ee=Gu([de]);me.surface=Fc(ee),me.perimeter=Gd(qu(de),{units:"meters"})}catch(Je){console.error("Erreur lors du calcul des propriétés du polygone",Je)}else if(H instanceof $t.Polyline&&!(H instanceof $t.Polygon))try{const Je=H.getLatLngs();let de=0;for(let ee=1;ee<Je.length;ee++)de+=Je[ee].distanceTo(Je[ee-1]);me.length=de}catch(Je){console.error("Erreur lors du calcul de la longueur de la ligne",Je)}me.style={...me.style,color:((fe=H.options)==null?void 0:fe.color)||"#3388ff",weight:((he=H.options)==null?void 0:he.weight)||3,opacity:((X=H.options)==null?void 0:X.opacity)||1,fillColor:((J=H.options)==null?void 0:J.fillColor)||"#3388ff",fillOpacity:((De=H.options)==null?void 0:De.fillOpacity)||.2,dashArray:((Te=H.options)==null?void 0:Te.dashArray)||""}}catch(Je){console.error("Error calculating shape properties:",Je)}return me},k=(H,K=2)=>{var J;if(!t.value){console.warn("Map is not available for text size update");return}const me=t.value.getZoom(),fe=H.getLatLng().lat,he=y5(K,fe,me),X=(J=H.getElement())==null?void 0:J.querySelector(".text-annotation");X&&(H.properties.style.fontSize=`${he}px`,H.properties.physicalWidth=K,H.properties.physicalHeight=K,v5(X,H.properties.style))},A=(H,K,me)=>{const fe=$t.map(H).setView(K,me);t.value=fe,$t.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:5}).addTo(fe);const he=new $t.FeatureGroup;return he.addTo(fe),e.value=he,n.value=$t.featureGroup().addTo(fe),r.value=$t.featureGroup().addTo(fe),fe.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:he,snapLayers:[he,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),fe.on("pm:drawstart",X=>{o.value=!0,X.shape==="Circle"&&i.value==="Semicircle"&&(fe.getContainer().style.cursor="crosshair")}),fe.on("pm:drawend",()=>{o.value=!1,fe.getContainer().style.cursor="",s.value&&ql("Cliquez sur la forme pour afficher les points de contrôle")}),fe.on("pm:create",Qe),he.on("click",X=>{var De,Te,Je,de,ee,se,ce,ze,Ce,ve,Ve,Ye,Ze,_t,We;$t.DomEvent.stopPropagation(X);const J=X.layer;if(J.name&&!((De=J.properties)!=null&&De.name)?(J.properties||(J.properties={}),J.properties.name=J.name):(Te=J.properties)!=null&&Te.name&&!J.name&&(J.name=J.properties.name),console.log("[featureGroup click] État du nom:",{directName:J.name,propertiesName:(Je=J.properties)==null?void 0:Je.name,fullProperties:J.properties}),(de=r.value)==null||de.clearLayers(),g(),s.value=J,J instanceof op)$(J);else if(J instanceof $t.Circle){console.log("[useMapDrawing] Création du cercle personnalisé:",{propertyDescriptor:Object.getOwnPropertyDescriptor(J,"name"),directName:J.name,propertiesName:(ee=J.properties)==null?void 0:ee.name,styleNameBeforeTransfer:(ce=(se=J.properties)==null?void 0:se.style)==null?void 0:ce.name,nameIsEnumerable:Object.keys(J).includes("name"),allProperties:Object.keys(J.properties||{}),_dbId:J._dbId});const ut=J.name,Vt=(ze=J.properties)==null?void 0:ze.name,tn=(ve=(Ce=J.properties)==null?void 0:Ce.style)==null?void 0:ve.name,bn=J._dbId,et=new op(J.getLatLng(),{...J.options,radius:J.getRadius()});J.properties?et.properties={...J.properties||{}}:et.updateProperties();const at=ut||Vt||tn;at&&(et.properties.name=at,et.properties.style||(et.properties.style={}),et.properties.style.name=at,et.name=at),bn&&(et._dbId=bn),console.log("[useMapDrawing] Cercle après conversion:",{name:et.name,propertiesName:et.properties.name,stylePropertyName:(Ve=et.properties.style)==null?void 0:Ve.name,allProperties:Object.keys(et.properties||{})}),(Ye=e.value)==null||Ye.removeLayer(J),(Ze=e.value)==null||Ze.addLayer(et),s.value=et,$(et)}else if(J instanceof Ga)Z(J);else if(J instanceof $t.Rectangle){const ut=new Ga(J.getBounds(),{...J.options});ut.updateProperties(),(_t=e.value)==null||_t.removeLayer(J),(We=e.value)==null||We.addLayer(ut),s.value=ut,Z(ut)}else J instanceof $t.Polygon?I(J):J instanceof ia||J instanceof $t.Polyline?B(J):J instanceof Th&&R(J)}),fe.on("pm:edit",X=>{var De,Te,Je;console.log("[pm:edit] Début",{layer:X.layer,currentProperties:X.layer.properties});const J=X.layer;if(J){const de=((De=J.properties)==null?void 0:De.type)||"unknown";if(pe(J,de),console.log("[pm:edit] Après updateLayerProperties",{updatedProperties:J.properties,selectedShape:s.value}),J instanceof op)$(J);else if(J instanceof Ga)Z(J);else if(J instanceof $t.Rectangle){const ee=new Ga(J.getBounds(),{...J.options});ee.updateProperties(),(Te=e.value)==null||Te.removeLayer(J),(Je=e.value)==null||Je.addLayer(ee),s.value=ee,Z(ee)}else J instanceof $t.Polygon?I(J):J instanceof ia?(J.updateProperties(),pe(J,"Line"),B(J)):J instanceof $t.Polyline?B(J):J instanceof Th&&(J.updateProperties(),R(J))}}),fe.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(X=>X.remove()),ql("Déplacez la forme à l'endroit souhaité")}),fe.on("pm:dragend",X=>{var De,Te,Je;console.log("[pm:dragend] Début",{layer:X.layer,currentProperties:X.layer.properties});const J=X.layer;if(J){const de=((De=J.properties)==null?void 0:De.type)||"unknown";if(J instanceof $t.Rectangle&&!(J instanceof Ga)){const ee=new Ga(J.getBounds(),{...J.options});ee.updateProperties(),(Te=e.value)==null||Te.removeLayer(J),(Je=e.value)==null||Je.addLayer(ee),s.value=ee,Z(ee)}else J instanceof ia?(J.updateProperties(),pe(J,"Line"),B(J)):pe(J,de);console.log("[pm:dragend] Après updateLayerProperties",{updatedProperties:J.properties,selectedShape:s.value})}setTimeout(()=>{ql("Cliquez sur la forme pour afficher les points de contrôle")},100)}),fe.on("pm:remove",()=>{var X;(X=document.querySelector(".drawing-help-message"))==null||X.remove()}),fe.on("pm:select",()=>{document.querySelectorAll(".drawing-help-message").forEach(X=>X.remove()),ql("Utilisez les points de contrôle pour modifier la forme")}),fe.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(X=>X.remove())}),fe.on("zoomstart",()=>{s.value&&(g(),s.value=null,document.querySelectorAll(".drawing-help-message").forEach(X=>X.remove()))}),fe},D=()=>{if(!(!t.value||!e.value||!e.value.getLayers().length))try{const H=e.value.getBounds();if(H.isValid()){const K={zoomAnimation:t.value.options.zoomAnimation,fadeAnimation:t.value.options.fadeAnimation,markerZoomAnimation:t.value.options.markerZoomAnimation};t.value.options.zoomAnimation=!1,t.value.options.fadeAnimation=!1,t.value.options.markerZoomAnimation=!1,t.value.fitBounds(H,{padding:[50,50],maxZoom:18,animate:!1,duration:0,noMoveStart:!0}),t.value.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{try{t.value.options.fadeAnimation=K.fadeAnimation,setTimeout(()=>{try{t.value.options.zoomAnimation=K.zoomAnimation,t.value.options.markerZoomAnimation=K.markerZoomAnimation}catch(me){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",me)}},500)}catch(me){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",me)}},500)}}catch(H){if(console.warn("[useMapDrawing] Error adjusting view:",H),t.value)try{t.value.options.zoomAnimation=!0,t.value.options.fadeAnimation=!0,t.value.options.markerZoomAnimation=!0,t.value.invalidateSize({animate:!1,pan:!1})}catch(K){console.error("[useMapDrawing] Erreur lors de la restauration après échec:",K)}}},j=H=>{var me;if(!t.value)return;document.querySelectorAll(".drawing-help-message").forEach(fe=>fe.remove());try{const fe=t.value.pm;fe.globalEditModeEnabled()&&fe.disableGlobalEditMode(),fe.globalRemovalModeEnabled()&&fe.disableGlobalRemovalMode(),fe.disableDraw(),g(),(me=r.value)==null||me.clearLayers()}catch(fe){console.error("Error disabling modes:",fe)}if(window.dispatchEvent(new CustomEvent("tool:changed",{detail:{previousTool:i.value,newTool:H}})),i.value=H,!H){g();return}let K=H;switch(H){case"Note":K="GeoNote";break;case"Polygon":K="Polygon";break;case"Line":K="Line";break;case"ElevationLine":K="ElevationLine";break;default:K=H}H=K,ae(),setTimeout(()=>{var fe,he,X,J,De,Te,Je,de,ee,se,ce,ze,Ce;try{switch(H){case"Polygon":ql("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(fe=t.value)==null||fe.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(he=t.value)==null||he.off("pm:create"),(X=t.value)==null||X.on("pm:create",Ve=>{var Ye,Ze,_t;if(Ve.shape==="Polygon"&&Ve.layer){const We=Ve.layer.getLatLngs()[0];(Ye=t.value)==null||Ye.removeLayer(Ve.layer),(Ze=e.value)!=null&&Ze.hasLayer(Ve.layer)&&e.value.removeLayer(Ve.layer);const ut=new cd(We,{color:"#3B82F6",weight:3,fillColor:"#3B82F6",fillOpacity:.2});e.value&&(e.value.addLayer(ut),s.value=ut,ut.updateProperties()),(_t=t.value)==null||_t.pm.disableDraw(),ae()}});break;case"Circle":e.value&&e.value.getLayers().filter(Ye=>Ye instanceof Ga).forEach(Ye=>{Ye.toggleHelperPoints(t.value,!0,"#DC2626","#2563EB")}),t.value.pm.setGlobalOptions({snapDistance:15,snapSegment:!0,snapVertices:!0,snapLayers:[e.value,r.value],snapMiddle:!0,snapIntersections:!0}),ql("Positionnez le centre du cercle. Points bleus : milieu des côtés, Points rouges : sommets, Point vert : centre"),t.value.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":ql("Cliquez et maintenez pour dessiner un rectangle, relâchez pour terminer"),(J=t.value)==null||J.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":ql("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(De=t.value)==null||De.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":ql("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(Te=t.value)==null||Te.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(Je=t.value)==null||Je.off("pm:create"),(de=t.value)==null||de.on("pm:create",Ve=>{var Ye,Ze,_t;if(Ve.shape==="Line"&&Ve.layer){const We=Ve.layer.getLatLngs();(Ye=t.value)==null||Ye.removeLayer(Ve.layer),(Ze=e.value)!=null&&Ze.hasLayer(Ve.layer)&&e.value.removeLayer(Ve.layer);const ut=new ia(We,{color:"#3B82F6",weight:3,opacity:.8});e.value&&(e.value.addLayer(ut),s.value=ut,ut.updateProperties()),(_t=t.value)==null||_t.pm.disableDraw(),ae()}});break;case"Text":if(ql("Cliquez pour ajouter du texte, double-cliquez pour éditer"),t.value){const Ve=Ye=>{if(!t.value||!e.value)return;const Ze=l(Ye.latlng);e.value.addLayer(Ze),s.value=Ze,t.value.off("click",Ve),j("")};t.value.on("click",Ve)}break;case"GeoNote":if(ql("Cliquez pour ajouter une note géolocalisée, double-cliquez pour éditer"),t.value){const Ve=async Ze=>{if(!t.value||!e.value)return null;try{const _t=Tp(),We=new Th(Ze,{color:"#3B82F6",name:"Note géolocalisée",description:"",columnId:"1"});e.value.addLayer(We),s.value=We,We.updateProperties();try{const ut=_t.currentMapId||void 0,Vt=await We.saveNote(ut);console.log(`[useMapDrawing] Note sauvegardée avec succès, ID backend: ${Vt}`);const tn=We._leaflet_id;return console.log(`[useMapDrawing] ID Leaflet: ${tn}, ID backend: ${Vt}`),window.dispatchEvent(new CustomEvent("note:created",{detail:{geoNote:We,leafletId:tn,backendId:Vt}})),We.openPopup(),We}catch(ut){return console.error("[useMapDrawing] Erreur lors de la sauvegarde de la note:",ut),Ah(async()=>{const{useNotificationStore:Vt}=await Promise.resolve().then(()=>tR);return{useNotificationStore:Vt}},void 0).then(({useNotificationStore:Vt})=>{Vt().error("Erreur lors de la création de la note")}),null}}catch(_t){return console.error("[useMapDrawing] Erreur lors de la création de la note:",_t),null}},Ye=async Ze=>{$t.DomEvent.stopPropagation(Ze),$t.DomEvent.preventDefault(Ze);const _t=await Ve(Ze.latlng);_t&&(t.value.off("click",Ye),e.value&&e.value.getLayers().forEach(We=>{if(We.off&&typeof We.off=="function")try{We.off("click")}catch(ut){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",ut)}}),j(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:_t,leafletId:_t._leaflet_id}})))};if(t.value.on("click",Ye),e.value){const Ze=async We=>{$t.DomEvent.stopPropagation(We),$t.DomEvent.preventDefault(We),console.log("[useMapDrawing] Clic sur une forme existante en mode GeoNote");const ut=await Ve(We.latlng);return ut&&(t.value.off("click",Ye),e.value&&e.value.getLayers().forEach(Vt=>{if(Vt.off&&typeof Vt.off=="function")try{Vt.off("click")}catch(tn){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",tn)}}),j(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:ut,leafletId:ut._leaflet_id}}))),!1};e.value.getLayers().forEach(We=>{We.on("click",Ze)});const _t=()=>{e.value&&e.value.getLayers().forEach(We=>{if(We.off&&typeof We.off=="function")try{We.off("click")}catch(ut){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",ut)}}),window.removeEventListener("tool:changed",_t),console.log("[useMapDrawing] Nettoyage des gestionnaires d'événements pour les formes existantes")};window.addEventListener("tool:changed",_t)}}break;case"delete":ql("Cliquez sur une forme pour la supprimer"),(ee=t.value)==null||ee.pm.enableGlobalRemovalMode();break;case"ElevationLine":ql("Cliquez et maintenez pour tracer le profil altimétrique"),(se=t.value)==null||se.pm.enableDraw("Line",{finishOn:"mouseup",continueDrawing:!1,allowSelfIntersection:!1,templineStyle:{color:"#FF4500",weight:4,opacity:.8}}),(ce=t.value)==null||ce.pm.setGlobalOptions({continueDrawing:!1,finishOn:"mouseup",preventMarkerRemoval:!0,preventVertexEdit:!0,preventMarkerEdit:!0}),(ze=t.value)==null||ze.off("pm:create"),(Ce=t.value)==null||Ce.on("pm:create",async Ve=>{var Ye,Ze,_t;if(Ve.shape==="Line"&&Ve.layer){const We=Ve.layer.getLatLngs();(Ye=t.value)==null||Ye.removeLayer(Ve.layer),(Ze=e.value)!=null&&Ze.hasLayer(Ve.layer)&&e.value.removeLayer(Ve.layer);const ut=new Sd(We,{color:"#FF4500",weight:4,opacity:.8,interactive:!1,pmIgnore:!0});if(e.value){e.value.addLayer(ut),s.value=ut,await ut.updateElevationProfile();const Vt=E(ut,"ElevationLine");Object.assign(ut.properties,{...Vt,...ut.properties,type:"ElevationLine",elevationData:ut.getElevationData()}),s.value=null,sa(()=>{s.value=ut})}(_t=t.value)==null||_t.pm.disableDraw(),i.value="",ae()}});break}}catch(ve){console.error("[setDrawingTool] Erreur lors de la configuration de l'outil:",ve)}},100)},Y=H=>{var me;if(!s.value)return;const K=s.value;if(K.properties=K.properties||{},K.properties.style=K.properties.style||{},K.properties.style={...K.properties.style,...H},K.properties.type==="text"){const fe=K.properties._textLayer,he=(me=fe==null?void 0:fe.getElement())==null?void 0:me.querySelector(".text-annotation");he&&v5(he,K.properties.style);const X={color:H.borderColor||K.properties.style.borderColor,weight:parseInt(H.borderWidth||K.properties.style.borderWidth),opacity:H.borderOpacity??K.properties.style.borderOpacity};"setStyle"in K&&K.setStyle(X)}else if(K.properties.type==="TextRectangle")console.log("[updateShapeStyle] TextRectangle supprimé selon les exigences");else{const fe={};H.fillColor&&(fe.fillColor=H.fillColor),H.fillOpacity!==void 0&&(fe.fillOpacity=H.fillOpacity),H.strokeColor&&(fe.color=H.strokeColor),H.strokeOpacity!==void 0&&(fe.opacity=H.strokeOpacity),H.strokeWidth!==void 0&&(fe.weight=H.strokeWidth),H.dashArray&&(fe.dashArray=H.dashArray),"setStyle"in K&&K.setStyle(fe)}},te=H=>{var J,De,Te,Je,de;if(!s.value){console.warn("[useMapDrawing] Cannot update properties: no shape selected");return}console.log("[useMapDrawing] Updating shape properties",{before:s.value.properties,newProps:H,layerType:(J=s.value.properties)==null?void 0:J.type,beforeName:s.value.name,beforePropertiesName:(De=s.value.properties)==null?void 0:De.name,beforeCategory:(Te=s.value.properties)==null?void 0:Te.category,nameIsDirectProperty:"name"in s.value,dbId:s.value._dbId}),s.value.properties||(s.value.properties={});const K=s.value.properties.type;console.log(`[useMapDrawing] Type actuel de la forme: ${K}`),s.value.properties.category||(s.value.properties.category="forages"),s.value.properties.accessLevel||(s.value.properties.accessLevel="visitor"),s.value._dbId||(s.value._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[useMapDrawing] Assigned temporary dbId: ${s.value._dbId}`));const me=s.value.properties.type;console.log(`[useMapDrawing] Type original avant mise à jour: ${me}`);const fe=s.value.properties.category;console.log(`[useMapDrawing] Catégorie existante: ${fe}`);const he="category"in H&&H.category!==fe;if(Object.keys(H).forEach(ee=>{ee==="type"&&me?console.log(`[useMapDrawing] Préservation du type original: ${me}`):s.value.properties[ee]=H[ee],ee==="name"&&(console.log(`[useMapDrawing] Setting name "${H[ee]}" directly on layer`),s.value.name=H[ee]),ee==="category"&&console.log(`[useMapDrawing] Mise à jour de la catégorie: ${fe} -> ${H[ee]}`)}),me&&(s.value.properties.type=me),fe&&!he&&(console.log(`[useMapDrawing] Restauration de la catégorie originale: ${fe}`),s.value.properties.category=fe),s.value._dbId&&he){const ee=Tp(),se=ee.elements.find(ce=>ce.id===s.value._dbId);if(se){console.log(`[useMapDrawing] Mise à jour de la catégorie dans le store: ${s.value.properties.category} pour l'élément ${s.value._dbId}`);const ce=se;ce.data||(ce.data={}),ce.data.category=s.value.properties.category,ee.$patch({unsavedChanges:!0})}}const X=new CustomEvent("shape:propertiesUpdated",{detail:{shape:s.value,properties:s.value.properties,categoryUpdated:he}});if(window.dispatchEvent(X),console.log("[useMapDrawing] Updated shape properties",{after:s.value.properties,name:s.value.name,propertiesName:(Je=s.value.properties)==null?void 0:Je.name,allLayerKeys:Object.keys(s.value),allPropertiesKeys:Object.keys(s.value.properties||{})}),((de=s.value.properties)==null?void 0:de.type)==="Circle"){const ee=s.value,se=ee.getRadius();ee.properties.radius=se,ee.properties.diameter=se*2,ee.properties.surface=Math.PI*se*se,ee.properties.perimeter=2*Math.PI*se,H.name&&(console.log(`[useMapDrawing] Ensuring circle name "${H.name}" is set in multiple places`),ee.properties.name=H.name,ee.properties.style.name=H.name,ee.name=H.name,console.log("[useMapDrawing] Circle name verification:",{circleDirectName:ee.name,circlePropertiesName:ee.properties.name,nameIsEnumerable:Object.keys(ee).includes("name"),propertiesNameIsEnumerable:Object.keys(ee.properties).includes("name")}))}},ge=H=>{console.log("[forceShapeUpdate] Début",{currentProperties:H.properties,selectedShapeRef:s.value}),s.value=null,sa(()=>{s.value=H,console.log("[forceShapeUpdate] Après mise à jour",{selectedShape:s.value,properties:s.value.properties})})},pe=(H,K)=>{console.log("[updateLayerProperties] Début",{layer:H,shapeType:K,currentProperties:H.properties}),$U((fe,he)=>{const X=E(fe,he);console.log("[updateLayerProperties] Nouvelles propriétés calculées",{newProperties:X}),fe.properties={...X},ge(fe),fe.fire("properties:updated",{shape:fe,properties:fe.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:fe.properties,selectedShape:s.value})},100)(H,K)},N=(H,K)=>$t.latLng((H.lat+K.lat)/2,(H.lng+K.lng)/2),$=H=>{if(!t.value||!e.value)return;g();const K=H.getLatLng(),me=H.getRadius(),fe=x(K,"#059669");v.push(fe),p(fe,H,()=>[Qi(me,"m","Rayon"),Qi(me*2,"m","Diamètre"),Qi(Math.PI*Math.pow(me,2),"m²","Surface")].join("<br>"));const he=[],X=[0,45,90,135,180,225,270,315];X.forEach(J=>{const De=H.calculatePointOnCircle(J),Te=x(De,"#2563EB");he.push(Te),v.push(Te),p(Te,H,()=>Qi(me,"m","Rayon")),Te.on("mousedown",Je=>{if(!t.value)return;$t.DomEvent.stopPropagation(Je),t.value.dragging.disable();let de=!0;const ee=ce=>{de&&(H.resizeFromControlPoint(ce.latlng),he.forEach((ze,Ce)=>{const ve=H.calculatePointOnCircle(X[Ce]);ze.setLatLng(ve)}),fe.setLatLng(H.getLatLng()),Te.measureDiv&&(Te.measureDiv.innerHTML=Qi(H.getRadius(),"m","Rayon")))},se=()=>{de=!1,t.value&&(t.value.off("mousemove",ee),document.removeEventListener("mouseup",se),t.value.dragging.enable(),H.updateProperties(),s.value=null,sa(()=>{s.value=H}),pe(H,"Circle"))};t.value.on("mousemove",ee),document.addEventListener("mouseup",se)})}),fe.on("mousedown",J=>{if(!t.value)return;$t.DomEvent.stopPropagation(J),t.value.dragging.disable();let De=!0;const Te=H.getLatLng(),Je=J.latlng,de=se=>{if(!De)return;const ce=se.latlng.lng-Je.lng,ze=se.latlng.lat-Je.lat,Ce=$t.latLng(Te.lat+ze,Te.lng+ce);$t.Circle.prototype.setLatLng.call(H,Ce),fe.setLatLng(Ce),he.forEach((ve,Ve)=>{const Ye=H.calculatePointOnCircle(X[Ve]);ve.setLatLng(Ye)}),fe.measureDiv&&(fe.measureDiv.innerHTML=[Qi(H.getRadius(),"m","Rayon"),Qi(H.getRadius()*2,"m","Diamètre"),Qi(Math.PI*Math.pow(H.getRadius(),2),"m²","Surface")].join("<br>"))},ee=()=>{De=!1,t.value&&(t.value.off("mousemove",de),document.removeEventListener("mouseup",ee),t.value.dragging.enable(),H.updateProperties(),s.value=null,sa(()=>{s.value=H}),pe(H,"Circle"))};t.value.on("mousemove",de),document.addEventListener("mouseup",ee)}),H.on("circle:resized",()=>{pe(H,"Circle")}),s.value=H},Z=H=>{var de;if(!t.value||!e.value)return;if(!(H instanceof Ga)){console.warn("La couche n'est pas une instance de Rectangle");return}const K=H;g();const me=K.getCenter(),fe=K.getRotatedCorners(),he=K.getMidPoints(),X=x(me,"#059669");v.push(X),p(X,K,()=>{const{width:ee,height:se}=K.getDimensions(),ce=ee*se,ze=K.getRotation();return[Qi(ee,"m","Largeur"),Qi(se,"m","Hauteur"),Qi(ce,"m²","Surface"),`Rotation: ${ze.toFixed(1)}°`].join("<br>")});const J=x($t.latLng(me.lat+(fe[0].lat-me.lat)*1.2,me.lng+(fe[0].lng-me.lng)*1.2),"#F97316");v.push(J);const De=$t.polyline([me,J.getLatLng()],{color:"#F97316",weight:1,opacity:.6,dashArray:"4",pmIgnore:!0});(de=n.value)==null||de.addLayer(De);const Te=fe.map(ee=>{const se=x(ee,"#DC2626");return v.push(se),p(se,K,()=>{const{width:ce,height:ze}=K.getDimensions();return[Qi(ce,"m","Largeur"),Qi(ze,"m","Hauteur")].join("<br>")}),se}),Je=he.map((ee,se)=>{const ce=x(ee,"#2b6451");return v.push(ce),p(ce,K,()=>{const{width:ze,height:Ce}=K.getDimensions(),ve=se%2===0?ze:Ce;return[Qi(ve,"m","Longueur du côté"),Qi(ve/2,"m","Distance au coin")].join("<br>")}),ce});X.on("mousedown",ee=>{if(!t.value)return;$t.DomEvent.stopPropagation(ee),t.value.dragging.disable();let se=!0;const ce=Ce=>{if(!se)return;K.moveFromCenter(Ce.latlng);const ve=K.getRotatedCorners(),Ve=K.getMidPoints();Te.forEach((Ze,_t)=>Ze.setLatLng(ve[_t])),Je.forEach((Ze,_t)=>Ze.setLatLng(Ve[_t])),X.setLatLng(Ce.latlng);const Ye=$t.latLng(Ce.latlng.lat+(ve[0].lat-Ce.latlng.lat)*1.2,Ce.latlng.lng+(ve[0].lng-Ce.latlng.lng)*1.2);J.setLatLng(Ye),De.setLatLngs([Ce.latlng,Ye])},ze=()=>{se=!1,t.value&&(t.value.off("mousemove",ce),document.removeEventListener("mouseup",ze),t.value.dragging.enable(),K.updateProperties(),s.value=null,sa(()=>{s.value=K}))};t.value.on("mousemove",ce),document.addEventListener("mouseup",ze)}),J.on("mousedown",ee=>{if(!t.value)return;$t.DomEvent.stopPropagation(ee),t.value.dragging.disable();let se=!1;const ce=ee.latlng,ze=K.getRotation(),Ce=K.getCenter(),ve=ce.lng-Ce.lng,Ve=ce.lat-Ce.lat,Ye=Math.atan2(Ve,ve)*180/Math.PI;v.forEach(We=>{We!==J&&(We.setStyle({opacity:0,fillOpacity:0}),We.measureDiv&&(We.measureDiv.style.display="none"))});const Ze=qd(We=>{se||(se=!0);const ut=We.latlng.lng-Ce.lng,Vt=We.latlng.lat-Ce.lat;let bn=Math.atan2(Vt,ut)*180/Math.PI-Ye,et=(ze+bn)%360;et<0&&(et+=360),K.setRotation(et,!1),J.setLatLng(We.latlng),De.setLatLngs([Ce,We.latlng])},16),_t=()=>{t.value&&(t.value.off("mousemove",Ze),document.removeEventListener("mouseup",_t),t.value.dragging.enable(),se&&K.finalizeRotation(),s.value=null,sa(()=>{s.value=K,g(),Z(K)}))};t.value.on("mousemove",Ze),document.addEventListener("mouseup",_t)}),K.on("coordinates:updated",ee=>{const{corners:se,center:ce}=ee,ze=K.getMidPoints();Te.forEach((ve,Ve)=>ve.setLatLng(se[Ve])),Je.forEach((ve,Ve)=>ve.setLatLng(ze[Ve])),X.setLatLng(ce);const Ce=$t.latLng(ce.lat+(se[0].lat-ce.lat)*1.2,ce.lng+(se[0].lng-ce.lng)*1.2);J.setLatLng(Ce),De.setLatLngs([ce,Ce])})},B=H=>{if(!t.value||!e.value)return;g();const K=H.getLatLngs();if(!K||K.length===0){console.warn("Pas de points pour la ligne");return}let me=null;if(H instanceof ia){const fe=H.getCenter();me=x(fe,"#059669"),v.push(me),p(me,H,()=>{const he=H.getLength()||0;return Qi(he,"m","Longueur totale")}),me.on("mousedown",he=>{if(!t.value)return;$t.DomEvent.stopPropagation(he),t.value.dragging.disable();let X=!0;const J=H.getLatLngs().map(ee=>$t.latLng(ee.lat,ee.lng)),De=he.latlng;H instanceof ia&&(H.off("move:end"),H.off("vertex:moved"),H.off("latlngs:updated"),H.off("properties:updated")),v.forEach((ee,se)=>{se>0&&(ee.setStyle({opacity:0,fillOpacity:0}),ee.measureDiv&&(ee.measureDiv.style.display="none"))});const Je=qd(ee=>{if(!X)return;const se=ee.latlng.lng-De.lng,ce=ee.latlng.lat-De.lat,ze=J.map(Ce=>$t.latLng(Ce.lat+ce,Ce.lng+se));$t.Polyline.prototype.setLatLngs.call(H,ze),me==null||me.setLatLng(ee.latlng)},16),de=()=>{if(X=!1,!!t.value){if(t.value.off("mousemove",Je),document.removeEventListener("mouseup",de),t.value.dragging.enable(),H instanceof ia){const ee=()=>{g(),B(H)};H.on("move:end",ee),H.on("vertex:moved",ee),H.on("latlngs:updated",ee),H.on("properties:updated",ee),H.updateProperties(),pe(H,"Line")}g(),B(H)}};t.value.on("mousemove",Je),document.addEventListener("mouseup",de)})}if(K.forEach((fe,he)=>{const X=x(fe,"#DC2626");v.push(X),p(X,H,()=>{if(H instanceof ia){const J=H.getLength()||0,De=H.getLengthToVertex(he);return[Qi(De,"m","Distance depuis le début"),Qi(J,"m","Longueur totale")].join("<br>")}return""}),X.on("mousedown",J=>{if(!t.value)return;$t.DomEvent.stopPropagation(J),t.value.dragging.disable();let De=!0;H instanceof ia&&(H.off("move:end"),H.off("vertex:moved"),H.off("latlngs:updated"),H.off("properties:updated")),v.forEach((de,ee)=>{ee!==he+1&&(de.setStyle({opacity:0,fillOpacity:0}),de.measureDiv&&(de.measureDiv.style.display="none"))});const Te=qd(de=>{if(!De)return;const ee=H.getLatLngs();ee[he]=de.latlng,$t.Polyline.prototype.setLatLngs.call(H,ee),X.setLatLng(de.latlng)},16),Je=()=>{if(De=!1,!!t.value){if(t.value.off("mousemove",Te),document.removeEventListener("mouseup",Je),t.value.dragging.enable(),H instanceof ia){const de=()=>{g(),B(H)};H.on("move:end",de),H.on("vertex:moved",de),H.on("latlngs:updated",de),H.on("properties:updated",de),H.updateProperties(),pe(H,"Line")}g(),B(H)}};t.value.on("mousemove",Te),document.addEventListener("mouseup",Je)})}),K.length>=2)for(let fe=0;fe<K.length-1;fe++){const he=K[fe],X=K[fe+1],J=$t.latLng((he.lat+X.lat)/2,(he.lng+X.lng)/2),De=x(J,"#2b6451");v.push(De),p(De,H,()=>{if(H instanceof ia){const Te=H.getSegmentLengthAt(fe),Je=H.getLength()||0,de=H.getLengthToVertex(fe)+Te/2;return[Qi(Te,"m","Longueur du segment"),Qi(Te/2,"m","Demi-segment"),Qi(de,"m","Distance depuis le début"),Qi(Je,"m","Longueur totale")].join("<br>")}return""})}if(H instanceof ia){const fe=()=>{g(),B(H)};H.on("move:start",()=>{v.forEach((he,X)=>{X>0&&(he.setStyle({opacity:0,fillOpacity:0}),he.measureDiv&&(he.measureDiv.style.display="none"))})}),H.on("move:end",fe),H.on("vertex:moved",fe),H.on("latlngs:updated",fe),H.on("properties:updated",fe),v.cleanup=()=>{H.off("move:start",()=>{}),H.off("move:end",fe),H.off("vertex:moved",fe),H.off("latlngs:updated",fe),H.off("properties:updated",fe)}}},I=H=>{if(!t.value||!e.value)return;g();const K=H.getLatLngs()[0],me=K.map(Je=>[Je.lng,Je.lat]);me.push(me[0]);const fe=Gu([me]),he=Fc(fe),X=K.reduce((Je,de,ee)=>{const se=K[(ee+1)%K.length];return Je+de.distanceTo(se)},0);let J;if(typeof H.getCenter=="function")try{J=H.getCenter()}catch(Je){console.warn("Erreur lors de la récupération du centre du polygone via getCenter(), utilisation de la méthode alternative",Je);const de=Wg(fe);J=$t.latLng(de.geometry.coordinates[1],de.geometry.coordinates[0])}else{const Je=Wg(fe);J=$t.latLng(Je.geometry.coordinates[1],Je.geometry.coordinates[0])}const De=x(J,"#059669");v.push(De),p(De,H,()=>[Qi(X,"m","Périmètre"),Qi(he,"m²","Surface")].join("<br>")),De.on("mousedown",Je=>{if(!t.value)return;$t.DomEvent.stopPropagation(Je),t.value.dragging.disable();let de=!0;const ee=Je.latlng,se=[...K];v.forEach((ve,Ve)=>{Ve>0&&ve.setStyle({opacity:0,fillOpacity:0})});const ce=qd(ve=>{if(!de)return;const Ve=ve.latlng.lng-ee.lng,Ye=ve.latlng.lat-ee.lat,Ze=se.map(_t=>$t.latLng(_t.lat+Ye,_t.lng+Ve));$t.Polygon.prototype.setLatLngs.call(H,[Ze]),De.setLatLng(ve.latlng)},16),ze=ve=>{de&&ce(ve)},Ce=()=>{if(de=!1,!!t.value){if(t.value.off("mousemove",ze),document.removeEventListener("mouseup",Ce),t.value.dragging.enable(),H.properties){const ve=H.getLatLngs()[0],Ve=ve.map(Ze=>[Ze.lng,Ze.lat]);Ve.push(Ve[0]);const Ye=Gu([Ve]);H.properties.area=Fc(Ye),H.properties.perimeter=ve.reduce((Ze,_t,We)=>{const ut=ve[(We+1)%ve.length];return Ze+_t.distanceTo(ut)},0),H.properties.surface=H.properties.area}g(),I(H),s.value=null,sa(()=>{s.value=H})}};t.value.on("mousemove",ze),document.addEventListener("mouseup",Ce)}),K.forEach((Je,de)=>{const ee=x(Je,"#DC2626");v.push(ee),p(ee,H,()=>{const se=K[(de-1+K.length)%K.length],ce=K[(de+1)%K.length],ze=Je.distanceTo(se),Ce=Je.distanceTo(ce);return[Qi(ze,"m","Distance au point précédent"),Qi(Ce,"m","Distance au point suivant"),Qi(X,"m","Périmètre total"),Qi(he,"m²","Surface")].join("<br>")}),ee.on("mousedown",se=>{if($t.DomEvent.stopPropagation(se),!t.value)return;t.value.dragging.disable();let ce=!0;De&&(De.setStyle({opacity:0,fillOpacity:0}),De.measureDiv&&(De.measureDiv.style.display="none"));const ze=qd(Ve=>{if(!ce)return;K[de]=Ve.latlng,$t.Polygon.prototype.setLatLngs.call(H,[K]),ee.setLatLng(Ve.latlng);const Ye=v.slice(K.length+1),Ze=(de-1+K.length)%K.length,_t=Ye[Ze];if(_t){const ut=K[Ze],Vt=K[de],tn=$t.latLng((ut.lat+Vt.lat)/2,(ut.lng+Vt.lng)/2);_t.setLatLng(tn)}const We=Ye[de];if(We){const ut=K[de],Vt=K[(de+1)%K.length],tn=$t.latLng((ut.lat+Vt.lat)/2,(ut.lng+Vt.lng)/2);We.setLatLng(tn)}},16),Ce=Ve=>{ce&&ze(Ve)},ve=()=>{if(ce=!1,!!t.value){if(t.value.off("mousemove",Ce),document.removeEventListener("mouseup",ve),t.value.dragging.enable(),H.properties){const Ve=H.getLatLngs()[0].map(Ze=>[Ze.lng,Ze.lat]);Ve.push(Ve[0]);const Ye=Gu([Ve]);H.properties.area=Fc(Ye),H.properties.perimeter=K.reduce((Ze,_t,We)=>{const ut=K[(We+1)%K.length];return Ze+_t.distanceTo(ut)},0),H.properties.surface=H.properties.area}g(),I(H),s.value=null,sa(()=>{s.value=H})}};t.value.on("mousemove",Ce),document.addEventListener("mouseup",ve)})}),(()=>{const Je=H.getLatLngs()[0];v.slice(Je.length+1).forEach(ee=>{n.value&&n.value.removeLayer(ee)}),v=v.slice(0,Je.length+1);const de=new Array(Je.length);for(let ee=0;ee<Je.length;ee++){const se=Je[ee],ce=Je[(ee+1)%Je.length];de[ee]=N(se,ce)}de.forEach((ee,se)=>{const ce=x(ee,"#2b6451");v.push(ce),p(ce,H,()=>{const ze=Je[se],Ce=Je[(se+1)%Je.length],ve=ze.distanceTo(Ce);return[Qi(ve,"m","Longueur du segment"),Qi(X,"m","Périmètre total"),Qi(he,"m²","Surface")].join("<br>")}),ce.on("mousedown",ze=>{if(!t.value)return;$t.DomEvent.stopPropagation(ze),t.value.dragging.disable();let Ce=!0;const ve=se;De&&(De.setStyle({opacity:0,fillOpacity:0}),De.measureDiv&&(De.measureDiv.style.display="none"));const Ve=[...H.getLatLngs()[0]];Ve.splice((ve+1)%Ve.length,0,ee),H.setLatLngs([Ve]),g(),I(H);const Ye=ve+1,Ze=1+Ye,_t=Ye<v.length-1?v[Ze]:null;if(_t){const We=Vt=>{if(!Ce)return;const tn=H.getLatLngs()[0];tn[Ye]=Vt.latlng,H.setLatLngs([tn]),_t.setLatLng(Vt.latlng);const bn=v.slice(1+tn.length),et=(Ye-1+tn.length)%tn.length,at=Ye;if(bn[et]){const it=tn[et],zt=tn[Ye],Kt=$t.latLng((it.lat+zt.lat)/2,(it.lng+zt.lng)/2);bn[et].setLatLng(Kt)}if(bn[at]){const it=tn[Ye],zt=tn[(Ye+1)%tn.length],Kt=$t.latLng((it.lat+zt.lat)/2,(it.lng+zt.lng)/2);bn[at].setLatLng(Kt)}},ut=()=>{if(Ce=!1,!!t.value){if(t.value.off("mousemove",We),document.removeEventListener("mouseup",ut),t.value.dragging.enable(),H.properties){const Vt=H.getLatLngs()[0].map(bn=>[bn.lng,bn.lat]);Vt.push(Vt[0]);const tn=Gu([Vt]);H.properties.area=Fc(tn),H.properties.perimeter=H.getLatLngs()[0].reduce((bn,et,at,it)=>{const zt=it[(at+1)%it.length];return bn+et.distanceTo(zt)},0)}g(),I(H),s.value=null,sa(()=>{s.value=H})}};t.value.on("mousemove",We),document.addEventListener("mouseup",ut)}else t.value.dragging.enable(),g(),I(H)})})})()},R=H=>{if(!t.value||!e.value)return;g();const K=H.getLatLng(),me=x(K,"#059669");v.push(me),p(me,H,()=>`Position: ${K.lat.toFixed(6)}, ${K.lng.toFixed(6)}`),me.on("mousedown",fe=>{if(!t.value)return;$t.DomEvent.stopPropagation(fe),t.value.dragging.disable(),H.startMoving();let he=!0;const J=qd(Te=>{he&&(me.setLatLng(Te.latlng),H.setLatLng(Te.latlng))},16),De=()=>{t.value&&(t.value.off("mousemove",J),document.removeEventListener("mouseup",De),t.value.dragging.enable(),he=!1,H.finishMoving(),H.updateProperties(),s.value=null,sa(()=>{s.value=H,g(),R(H)}))};t.value.on("mousemove",J),document.addEventListener("mouseup",De)}),s.value=H},z=H=>{if(!(!t.value||!r.value)){console.log("[generateTempControlPoints] Génération des points temporaires pour",{layerType:H.constructor.name,properties:H.properties}),r.value.clearLayers();try{if(H instanceof Ga)H.generateHelperPoints(t.value);else if(H instanceof op){if("getLatLng"in H&&typeof H.getLatLng=="function"){const K=H.getLatLng();if(K){const me=$t.circleMarker(K,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(me)}}}else if(H instanceof Th){const K=H.getLatLng();if(K){const me=$t.circleMarker(K,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(me)}}else if(H instanceof cd||H instanceof $t.Polygon){let K=[];if("getLatLngs"in H){const fe=H.getLatLngs();if(Array.isArray(fe)&&fe.length>0){const he=fe[0];Array.isArray(he)?K=he:he instanceof $t.LatLng&&(K=fe)}}let me=null;if(H instanceof cd&&typeof H.getCenter=="function")me=H.getCenter();else if(K.length>0){const fe=K.map(J=>[J.lng,J.lat]);fe.push(fe[0]);const he=Gu([fe]),X=Wg(he);me=$t.latLng(X.geometry.coordinates[1],X.geometry.coordinates[0])}if(me){const fe=$t.circleMarker(me,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(fe)}K.forEach(fe=>{if(fe){const he=$t.circleMarker(fe,{radius:5,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(he)}});for(let fe=0;fe<K.length;fe++){const he=K[fe],X=K[(fe+1)%K.length];if(he&&X){const J=$t.latLng((he.lat+X.lat)/2,(he.lng+X.lng)/2),De=$t.circleMarker(J,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(De)}}}console.log("[generateTempControlPoints] Points temporaires générés",{count:r.value.getLayers().length})}catch(K){console.error("[generateTempControlPoints] Erreur lors de la génération des points temporaires:",K)}}},U=H=>{console.log("Nombre total de couches:",H.length);const K=H.filter(J=>{var Je;if(!J)return!1;let De=0,Te={width:0,height:0};if(J instanceof $t.Circle){De=Math.PI*Math.pow(J.getRadius(),2);const de=J.getRadius();console.log(`
Forme détectée: Circle`),console.log(`- Surface propre: ${De.toFixed(2)} m²`),console.log(`- Rayon: ${de.toFixed(2)} m`),console.log("- Angle: Cercle complet (360°)")}else if(J instanceof Ga||J instanceof $t.Rectangle){const de=J.getBounds(),ee=de.getSouthWest(),se=de.getNorthEast(),ce=qu([[ee.lng,ee.lat],[se.lng,ee.lat]]),ze=qu([[ee.lng,ee.lat],[ee.lng,se.lat]]);Te.width=Gd(ce,{units:"meters"}),Te.height=Gd(ze,{units:"meters"}),De=Te.width*Te.height,console.log(`
Forme détectée: Rectangle`),console.log(`- Surface propre: ${De.toFixed(2)} m²`),console.log(`- Largeur: ${Te.width.toFixed(2)} m`),console.log(`- Hauteur: ${Te.height.toFixed(2)} m`)}else if(((Je=J.properties)==null?void 0:Je.type)==="Semicircle"){const de=J.getStartAngle(),ee=J.getStopAngle(),se=(ee-de+360)%360,ce=J.getRadius();De=Math.PI*Math.pow(ce,2)*se/360,console.log(`
Forme détectée: Semicircle`),console.log(`- Surface propre: ${De.toFixed(2)} m²`),console.log(`- Rayon: ${ce.toFixed(2)} m`),console.log(`- Angle de début: ${de.toFixed(2)}°`),console.log(`- Angle de fin: ${ee.toFixed(2)}°`),console.log(`- Angle d'ouverture: ${se.toFixed(2)}°`)}return De>0});if(K.length===0)return 0;const me=new Set,fe=[];for(const J of K)if(!me.has(J)){const De=Q(K,J);De.length>0&&(fe.push(De),De.forEach(Te=>me.add(Te)))}console.log(`
Nombre de groupes de formes connectées: ${fe.length}`);const he=fe.map((J,De)=>{console.log(`
Calcul pour le groupe ${De+1} (${J.length} formes):`);const Te=J.map(ce=>{var ze,Ce,ve;try{let Ve;if(ce instanceof $t.Circle){const Ye=ce.getLatLng(),Ze=ce.getRadius();Ve=Xj([Ye.lng,Ye.lat],Ze/1e3,{units:"kilometers",steps:256});const _t=Fc(Ve),We=((ze=ce.properties)==null?void 0:ze.surface)||0;return console.log(`
Conversion Cercle -> GeoJSON`),console.log(`- Rayon: ${Ze.toFixed(2)}m`),console.log(`- Surface propriété: ${We.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${_t.toFixed(2)}m²`),Ve}else if(ce instanceof Ga||ce instanceof $t.Rectangle){const Ye=ce.getBounds(),Ze=Ye.getSouthWest(),_t=Ye.getNorthEast(),We=$t.latLng(_t.lat,Ze.lng),ut=$t.latLng(Ze.lat,_t.lng),Vt=[[Ze.lng,Ze.lat],[ut.lng,ut.lat],[_t.lng,_t.lat],[We.lng,We.lat],[Ze.lng,Ze.lat]];Ve=Gu([Vt]);const tn=Fc(Ve),bn=qu([[Ze.lng,Ze.lat],[_t.lng,Ze.lat]]),et=qu([[Ze.lng,Ze.lat],[Ze.lng,_t.lat]]),at=Gd(bn,{units:"meters"}),it=Gd(et,{units:"meters"}),zt=at*it;return console.log(`
Conversion Rectangle -> GeoJSON`),console.log(`- Largeur: ${at.toFixed(2)}m`),console.log(`- Hauteur: ${it.toFixed(2)}m`),console.log(`- Surface théorique: ${zt.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${tn.toFixed(2)}m²`),console.log(`- Différence: ${Math.abs(zt-tn).toFixed(2)}m² (${(Math.abs(zt-tn)/zt*100).toFixed(2)}%)`),Ve}else if(((Ce=ce.properties)==null?void 0:Ce.type)==="Semicircle"){const Ye=ce.getCenter(),Ze=ce.getRadius(),_t=ce.getStartAngle(),We=ce.getStopAngle(),ut=[],Vt=64;ut.push([Ye.lng,Ye.lat]);for(let et=0;et<=Vt;et++){const it=(_t+(We-_t+360)%360*et/Vt)*Math.PI/180,zt=Ze*Math.cos(it),Nn=Ze*Math.sin(it)/111319.9,yn=zt/(111319.9*Math.cos(Ye.lat*Math.PI/180));ut.push([Ye.lng+yn,Ye.lat+Nn])}ut.push([Ye.lng,Ye.lat]),Ve=Gu([ut]);const tn=Fc(Ve),bn=((ve=ce.properties)==null?void 0:ve.surface)||0;return console.log(`
Conversion Semicircle -> GeoJSON`),console.log(`- Rayon: ${Ze.toFixed(2)}m`),console.log(`- Surface propriété: ${bn.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${tn.toFixed(2)}m²`),console.log(`- Différence: ${Math.abs(bn-tn).toFixed(2)}m² (${(Math.abs(bn-tn)/bn*100).toFixed(2)}%)`),Ve}return null}catch(Ve){return console.error("[useMapDrawing] Erreur lors de la conversion en GeoJSON:",Ve),null}}).filter(ce=>ce!==null);if(Te.length===0)return 0;const Je=Te.map(ce=>{const ze=Fc(ce);return console.log(`Surface individuelle: ${ze.toFixed(2)}m²`),ze});let de=0;for(let ce=0;ce<Te.length;ce++)for(let ze=ce+1;ze<Te.length;ze++)try{const Ce=Rj([Te[ce],Te[ze]]),ve=yz(Ce);if(ve){const Ve=Fc(ve);de+=Ve,console.log(`Intersection entre formes ${ce+1} et ${ze+1}: ${Ve.toFixed(2)}m²`)}}catch(Ce){console.error(`Erreur lors du calcul d'intersection entre les formes ${ce+1} et ${ze+1}:`,Ce)}const ee=Je.reduce((ce,ze)=>ce+ze,0),se=ee-de;return console.log(`
Calcul de la surface d'irrigation pour le groupe ${De+1}:`),console.log(`- Surface totale (somme): ${ee.toFixed(2)}m²`),console.log(`- Surface d'intersection: ${de.toFixed(2)}m²`),console.log(`- Surface d'irrigation finale: ${se.toFixed(2)}m²`),se}),X=Math.max(...he);return console.log(`
Surface d'irrigation maximale parmi les groupes: ${X.toFixed(2)}m²`),X},V=()=>{a.value&&(t.value.removeLayer(a.value),a.value=null)},re=(H,K)=>{if(!t.value)return;V();const me=K?Q(H,K):H;if(a.value||(a.value=$t.layerGroup().addTo(t.value)),me.forEach(fe=>{var X;const he=(X=fe.properties)==null?void 0:X.type;if(he==="Circle"||he==="Semicircle"){const J=fe.getLatLng(),De=fe.getRadius(),Te=$t.circle(J,{radius:De,fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:$t.canvas({padding:.5})}),Je=$t.circle(J,{radius:De,fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:$t.canvas({padding:.5})});a.value&&(a.value.addLayer(Je),a.value.addLayer(Te))}else if(he==="Rectangle"||he==="Polygon"){const J=fe.getLatLngs(),De=$t.polygon(J,{fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:$t.canvas({padding:.5})}),Te=$t.polygon(J,{fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:$t.canvas({padding:.5})});a.value&&(a.value.addLayer(Te),a.value.addLayer(De))}}),K&&me.length>1&&t.value){const fe=$t.latLngBounds([]);me.forEach(J=>{J.getBounds?fe.extend(J.getBounds()):J.getLatLng&&fe.extend(J.getLatLng())});const he=fe.getCenter(),X=$t.tooltip({permanent:!0,direction:"center",className:"connected-group-tooltip"}).setContent("<div>Groupe connecté</div>").setLatLng(he);a.value&&a.value.addLayer($t.marker(he,{opacity:0,interactive:!1}).bindTooltip(X).openTooltip())}},Q=(H,K)=>{if(!K)return[];const me=new Set,fe=[K],he=[K];for(K._leaflet_id!==void 0&&me.add(K._leaflet_id);fe.length>0;){const X=fe.shift();for(const J of H){if(J===X||me.has(J._leaflet_id))continue;_e(X,J)&&(he.push(J),fe.push(J),me.add(J._leaflet_id))}}return he},_e=(H,K)=>{let me=null,fe=null;if(H.getBounds&&typeof H.getBounds=="function")me=H.getBounds();else if(H.getLatLng&&H.getRadius){const he=H.getLatLng(),X=H.getRadius();me=$t.latLngBounds([he.lat-X/111e3,he.lng-X/(111e3*Math.cos(he.lat*Math.PI/180))],[he.lat+X/111e3,he.lng+X/(111e3*Math.cos(he.lat*Math.PI/180))])}if(K.getBounds&&typeof K.getBounds=="function")fe=K.getBounds();else if(K.getLatLng&&K.getRadius){const he=K.getLatLng(),X=K.getRadius();fe=$t.latLngBounds([he.lat-X/111e3,he.lng-X/(111e3*Math.cos(he.lat*Math.PI/180))],[he.lat+X/111e3,he.lng+X/(111e3*Math.cos(he.lat*Math.PI/180))])}return!(!me||!fe||!me.intersects(fe))},we=(H,K)=>{var fe;const me=Q(H,K);return me.length===1&&(fe=K.properties)!=null&&fe.surface?K.properties.surface:U(me)},Qe=H=>{var fe,he,X,J,De,Te,Je,de,ee;const K=H.layer;(fe=e.value)==null||fe.addLayer(K);let me="unknown";if(K instanceof $t.Circle?me=i.value==="Semicircle"?"Semicircle":"Circle":K instanceof $t.Rectangle?me="Rectangle":K instanceof $t.Polygon?me="Polygon":K instanceof $t.Polyline&&!(K instanceof $t.Polygon)&&(me="Line"),K.properties=E(K,me),K.properties||(K.properties={}),K.properties.category||(K.properties.category="forages"),K.properties.accessLevel||(K.properties.accessLevel="visitor"),K._dbId=Date.now()+Math.floor(Math.random()*1e3),s.value=K,console.log("[useMapDrawing] Input layer:",{type:me,instanceof:{Circle:K instanceof $t.Circle,Rectangle:K instanceof $t.Rectangle,Polygon:K instanceof $t.Polygon,Polyline:K instanceof $t.Polyline},options:K.options,properties:K.properties,_dbId:K._dbId}),window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:K,type:me,properties:K.properties}})),K.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:me,isSelected:s.value===K}),(!s.value||s.value!==K)&&z(K)}),K.on("mouseout",()=>{var se;console.log("[mouseout] Sortie de la forme",{type:me,isSelected:s.value===K}),(!s.value||s.value!==K)&&((se=r.value)==null||se.clearLayers())}),me==="Semicircle")console.log("Conversion en demi-cercle désactivée selon les exigences");else if(me==="Circle"){(he=e.value)==null||he.removeLayer(K);const se=new op(K.getLatLng(),{radius:K.getRadius(),...K.options});se.properties={...E(se,"Circle"),type:"Circle"},Object.defineProperty(se,"name",{value:se.properties.name,writable:!0,enumerable:!0,configurable:!0}),console.log("[useMapDrawing] Création du cercle personnalisé:",{propertyDescriptor:Object.getOwnPropertyDescriptor(se,"name"),directName:se.name,propertiesName:se.properties.name,nameIsEnumerable:Object.keys(se).includes("name"),allProperties:Object.keys(se.properties),allKeys:Object.keys(se)}),(X=e.value)==null||X.addLayer(se),s.value=se,$(se)}else if(me==="Rectangle"){(J=e.value)==null||J.removeLayer(K);const se=new Ga(K.getBounds(),{...K.options});se.updateProperties(),(De=e.value)==null||De.addLayer(se),s.value=se,Z(se)}else if(K instanceof $t.Polygon){const se=K.getLatLngs()[0],ce=new cd([se],{...K.options});ce.updateProperties(),(Te=e.value)==null||Te.removeLayer(K),(Je=e.value)==null||Je.addLayer(ce),s.value=ce,I(ce)}else if(K instanceof ia)B(K);else if(K instanceof $t.Polyline&&!(K instanceof $t.Polygon)){const se=K.getLatLngs(),ce=new ia(se,{...K.options});ce.updateProperties(),(de=e.value)==null||de.removeLayer(K),(ee=e.value)==null||ee.addLayer(ce),s.value=ce,B(ce)}ql("Cliquez sur la forme pour afficher les points de contrôle")},ae=()=>{t.value&&(t.value.off("pm:create"),t.value.on("pm:create",Qe))};return{map:t,featureGroup:e,controlPointsGroup:n,tempControlPointsGroup:r,currentTool:i,selectedShape:s,isDrawing:o,initMap:A,setDrawingTool:j,updateShapeStyle:Y,updateShapeProperties:te,updateTextFixedSize:k,adjustView:D,clearActiveControlPoints:g,calculateTotalCoverageArea:U,showCoverageOverlay:re,hideCoverageOverlay:V,calculateConnectedCoverageArea:we,getConnectedShapes:Q}}function UU(){const{isEnabled:t,startMeasure:e}=Vp(),n=St(null),r=St(""),i=St("Hybride"),s=St(null),o={maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:19,tileSize:256,zoomOffset:0,bounds:$t.latLngBounds($t.latLng(41.333,-5.566),$t.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0},a=e("createBaseMaps","useMapState"),l={Hybride:$t.layerGroup([$t.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{...o,attribution:"© OpenStreetMap contributors",opacity:.6}),$t.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{...o,attribution:"© Esri",maxNativeZoom:20,opacity:.6})]),Cadastre:$t.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...o,attribution:"Cadastre - Carte © IGN/Geoportail",maxNativeZoom:18}),IGN:$t.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...o,attribution:"Carte IGN © IGN/Geoportail",maxNativeZoom:18})};a();const c=pn.createPerformanceTracker(g=>{pn.measure("initMap:setOptions",()=>{n.value=g,g.options.zoomSnap=.25,g.options.zoomDelta=.25,g.options.wheelPxPerZoomLevel=100,g.options.zoomAnimation=!0,g.options.fadeAnimation=!0,g.options.markerZoomAnimation=!0,g.options.minZoom=2,g.options.maxZoom=19,g.options.scrollWheelZoom=!0,g.options.doubleClickZoom=!0;const x=$t.latLngBounds($t.latLng(-90,-180),$t.latLng(90,180));g.setMaxBounds(x),g.options.maxBoundsViscosity=1,g.options.trackResize=!0;let E=null;g.getZoom(),g.on("zoomstart",()=>{g.getZoom(),g.options.zoomAnimation=!1,g.options.markerZoomAnimation=!1}),g.on("zoomend",()=>{E&&clearTimeout(E),E=setTimeout(()=>{setTimeout(()=>{g.options.zoomAnimation=!0,g.options.markerZoomAnimation=!0,g.invalidateSize({animate:!1,pan:!1});const A=g.getBounds(),D=g.options.maxBounds;D&&!A.intersects(D)&&g.panInsideBounds(D,{animate:!1}),g.eachLayer(j=>{j.properties&&j.properties.type==="Note"&&typeof j.updatePosition=="function"&&j.updatePosition()})},250)},250)});const k=g._zoomAnimation;k&&(g._zoomAnimation=function(A){try{this._animatingZoom||k.call(this,A)}catch{console.warn("Animation de zoom interrompue, restauration de la vue..."),this._resetView(this.getCenter(),this.getZoom())}}),g.on("zoomanim",A=>{g.eachLayer(D=>{D.properties&&D.properties.type==="Note"&&typeof D.updatePositionDuringZoom=="function"&&D.updatePositionDuringZoom(A)})})},"useMapState"),pn.measure("initMap:addInitialLayer",()=>{g&&g.whenReady(()=>{const x=i.value;if(l[x]){if(console.log(`Initialisation de la couche de base: ${x}`),s.value&&g.hasLayer(s.value))try{g.removeLayer(s.value),console.log("Couche active précédente supprimée")}catch(E){console.warn("Erreur lors de la suppression de la couche active précédente:",E)}s.value=l[x];try{s.value.addTo(g),console.log(`Couche ${x} ajoutée à la carte`)}catch(E){console.error(`Erreur lors de l'ajout de la couche ${x}:`,E)}}else console.warn(`Couche de base non disponible: ${x}`)})},"useMapState"),g.on("baselayerchange",x=>{const E=e("baselayerchange","useMapState",{layer:x.name});i.value=x.name,s.value=x.layer,E()}),t.value&&(g.on("movestart",()=>{e("mapMove","useMapState",{startCenter:g.getCenter()})}),g.on("moveend",()=>{e("mapMoveEnd","useMapState",{endCenter:g.getCenter()})(),g.eachLayer(E=>{E.properties&&E.properties.type==="Note"&&typeof E.updatePosition=="function"&&E.updatePosition()})}),g.on("tileloadstart",()=>{e("tileLoad","useMapState")}),g.on("tileload",()=>{e("tileLoadEnd","useMapState")()}))},"initMap","useMapState"),d=pn.createAsyncPerformanceTracker(async g=>{if(!n.value||!l[g]){console.warn(`Impossible de changer la carte de base: ${n.value?"type de carte non disponible":"carte non initialisée"}`);return}try{if(i.value===g)return;console.log(`Changement de carte: ${i.value} -> ${g}`);const x=n.value,E=x.getCenter(),k=x.getZoom();x.options.zoomAnimation=!1,x.options.fadeAnimation=!1,x.options.markerZoomAnimation=!1;const A=l[g];if(s.value&&x.hasLayer(s.value))try{x.removeLayer(s.value),console.log(`Couche précédente ${i.value} supprimée`)}catch(D){console.warn("Erreur lors de la suppression de la couche active:",D)}try{A instanceof $t.LayerGroup,A.addTo(x),console.log(`Nouvelle couche ${g} ajoutée`)}catch(D){console.error("Erreur lors de l'ajout de la nouvelle couche:",D);try{x.hasLayer(A)&&x.removeLayer(A),A.addTo(x),console.log(`Récupération: couche ${g} réajoutée`)}catch(j){throw console.error("Échec de la récupération:",j),new Error("Impossible d'ajouter la nouvelle couche")}}s.value=A,i.value=g;try{x.setView(E,k,{animate:!1,duration:0,noMoveStart:!0}),console.log(`Vue réinitialisée: centre=${E}, zoom=${k}`)}catch(D){console.warn("Erreur lors de la réinitialisation de la vue:",D)}try{x.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{x.eachLayer(D=>{D.properties&&D.properties.type==="Note"&&typeof D.updatePosition=="function"&&D.updatePosition()})},100)}catch(D){console.warn("Erreur lors du rafraîchissement de la carte:",D)}setTimeout(()=>{x.options.zoomAnimation=!0,x.options.fadeAnimation=!0,x.options.markerZoomAnimation=!0,console.log("Animations restaurées")},500)}catch(x){if(console.error("Erreur lors du changement de carte de base:",x),n.value)try{const E=n.value;E.eachLayer(A=>{(A instanceof $t.TileLayer||A instanceof $t.LayerGroup)&&E.removeLayer(A)});const k=l[g];k.addTo(E),s.value=k,i.value=g,E.options.zoomAnimation=!0,E.options.fadeAnimation=!0,E.options.markerZoomAnimation=!0,E.invalidateSize({animate:!1,pan:!1}),console.log("Récupération effectuée après erreur")}catch(E){console.error("Erreur lors de la récupération après échec:",E)}}},"changeBaseMap","useMapState"),p=pn.createAsyncPerformanceTracker(async()=>{if(!(!n.value||!r.value))try{const g=await pn.measureAsync("searchLocation:fetchData",async()=>await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r.value)}`),"useMapState"),x=await pn.measureAsync("searchLocation:parseResponse",async()=>await g.json(),"useMapState");x&&x.length>0&&pn.measure("searchLocation:updateView",()=>{const{lat:E,lon:k}=x[0];n.value.setView([E,k],13,{animate:!0})},"useMapState")}catch(g){console.error("Erreur lors de la recherche de localisation:",g)}},"searchLocation","useMapState");return{map:n,searchQuery:r,currentBaseMap:i,baseMaps:l,initMap:c,searchLocation:p,changeBaseMap:d,cleanup:()=>{const g=e("cleanup","useMapState");n.value&&(n.value.remove(),n.value=null),s.value&&(s.value=null),g()},isPerformanceEnabled:t}}const HU={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3001] overflow-y-auto"},WU={class:"bg-white w-full h-full md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 relative overflow-y-auto"},GU={class:"p-4 md:p-6 pt-0 overflow-y-auto max-h-[calc(100vh-80px)] md:max-h-[calc(90vh-80px)]"},qU={key:0,class:"mb-4"},YU={key:0,class:"animate-pulse"},ZU=["value"],KU={key:1,class:"mb-4"},XU={key:0,class:"animate-pulse"},JU=["disabled"],QU={value:null},eH=["value"],tH={key:2,class:"mb-4"},nH={key:0,class:"animate-pulse"},rH=["disabled"],iH={value:null},sH=["value"],oH={class:"mb-4"},aH={class:"mb-6"},lH={class:"flex justify-end space-x-3"},uH=["disabled"],cH={key:0},hH={key:1},zE=js({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","salarieSelected","visiteurSelected"],setup(t,{expose:e,emit:n}){function r(R){return R?typeof R=="object"?R.id:R:null}function i(R){if(R===null)throw new Error("Invalid ID");return R}const s=t,o=n,a=ma(),l=Uy(),c=Tp(),d=St(!1),p=St(null),v=St([]),g=St([]),x=St([]),E=St(null),k=St(null),A=St(!1),D=St(!1),j=St(!1),Y=St({nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),te=Qn(()=>{var R,z,U;return((R=a.user)==null?void 0:R.user_type)==="admin"?Y.value.nom.trim()&&Y.value.entreprise&&Y.value.salarie:((z=a.user)==null?void 0:z.user_type)==="entreprise"?Y.value.nom.trim()&&Y.value.salarie:(((U=a.user)==null?void 0:U.user_type)==="salarie",Y.value.nom.trim())});ki(()=>Y.value.entreprise,async R=>{if(!s.modelValue)return;Y.value.salarie=null,Y.value.visiteur=null,g.value=[];const z=r(R);console.log("[NewPlanModal] Entreprise sélectionnée:",z),z?await ge(z):v.value=[]}),ki(()=>Y.value.salarie,async R=>{if(!s.modelValue)return;Y.value.visiteur=null;const z=r(R);z?await pe(z):g.value=[]}),ki(()=>s.modelValue,R=>{var z,U,V;R?((z=a.user)==null?void 0:z.user_type)==="admin"?B():((U=a.user)==null?void 0:U.user_type)==="entreprise"?ge(a.user.id):((V=a.user)==null?void 0:V.user_type)==="salarie"&&pe(a.user.id):(Y.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},E.value=null,k.value=null,g.value=[],v.value=[],x.value=[],p.value=null)});async function ge(R){A.value=!0;try{console.log("[NewPlanModal] Chargement des salaries pour entreprise:",R);const z=await Dl.getUsers({role:"SALARIE",entreprise:R});console.log("[NewPlanModal] Réponse salaries:",z.data),v.value=z.data}catch(z){console.error("[NewPlanModal] Error loading salaries:",z),v.value=[]}finally{A.value=!1}}async function pe(R){D.value=!0;try{const z=await Dl.getUsers({role:"VISITEUR",salarie:R});g.value=z.data}catch(z){console.error("[NewPlanModal] Error loading visiteurs:",z),g.value=[]}finally{D.value=!1}}async function N(R){s.modelValue&&(E.value=R,Y.value.salarie=R.id,await pe(R.id),o("salarieSelected",R))}function $(R){s.modelValue&&(k.value=R,Y.value.visiteur=R.id,o("visiteurSelected",R))}function Z(){o("update:modelValue",!1),Y.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},E.value=null,k.value=null,g.value=[],p.value=null}async function B(){j.value=!0;try{const R=await a.fetchEnterprises();x.value=R}catch(R){console.error("[NewPlanModal] Error loading entreprises:",R),x.value=[]}finally{j.value=!1}}async function I(){var R,z;p.value=null,d.value=!0;try{const U={nom:Y.value.nom.trim(),description:Y.value.description.trim()},V=a.user;if(!V)throw new Error("User not found");if(V.user_type==="admin"){if(!Y.value.entreprise||!Y.value.salarie)throw new Error("Missing required fields");U.entreprise=i(r(Y.value.entreprise)),U.salarie=i(r(Y.value.salarie)),Y.value.visiteur&&(U.visiteur=Y.value.visiteur)}else if(V.user_type==="entreprise"){if(!Y.value.salarie)throw new Error("Missing required fields");U.entreprise=V.id,U.salarie=i(r(Y.value.salarie)),Y.value.visiteur&&(U.visiteur=Y.value.visiteur)}else if(V.user_type==="salarie"){if(!V.entreprise)throw new Error("Missing required fields");U.entreprise=V.entreprise.id,U.salarie=V.id,Y.value.visiteur&&(U.visiteur=Y.value.visiteur)}else if(V.user_type==="visiteur"){if(!V.entreprise||!V.salarie)throw new Error("Missing required fields");U.entreprise=V.entreprise.id,U.salarie=V.salarie.id,U.visiteur=V.id}console.log("Données du plan à créer:",U),l.clearCurrentPlan(),c.setCurrentPlan(null);const re=await l.createPlan(U);o("created",re.id),Z()}catch(U){console.error("[NewPlanModal] Error creating plan:",U),console.error("Response data:",(R=U.response)==null?void 0:R.data);let V="Une erreur est survenue lors de la création du plan";(z=U.response)!=null&&z.data&&(typeof U.response.data=="object"?V=Object.entries(U.response.data).map(([re,Q])=>Array.isArray(Q)?`${re}: ${Q.join(", ")}`:`${re}: ${Q}`).join(`
`):typeof U.response.data=="string"&&(V=U.response.data)),p.value=V}finally{d.value=!1}}return e({salaries:v,visiteurs:g,selectedSalarie:E,selectedVisiteur:k,loadSalaries:ge,loadVisiteurs:pe,selectSalarie:N,selectVisiteur:$}),(R,z)=>{var U,V,re,Q;return R.modelValue?(Oe(),Be("div",HU,[S("div",WU,[S("div",{class:"flex justify-between items-center mb-4 sticky top-0 bg-white p-4 md:p-6 pb-4 border-b z-10"},[z[6]||(z[6]=S("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),S("button",{onClick:Z,class:"text-gray-400 hover:text-gray-500"},z[5]||(z[5]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",GU,[Yn(a).isAdmin?(Oe(),Be("div",qU,[z[9]||(z[9]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Entreprise",-1)),j.value?(Oe(),Be("div",YU,z[7]||(z[7]=[S("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Tn((Oe(),Be("select",{key:1,"onUpdate:modelValue":z[0]||(z[0]=_e=>Y.value.entreprise=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[z[8]||(z[8]=S("option",{value:null},"Sélectionnez une entreprise",-1)),(Oe(!0),Be(Sn,null,sr(x.value,_e=>(Oe(),Be("option",{key:_e.id,value:_e.id},kt(Yn(Su)(_e)),9,ZU))),128))],512)),[[ns,Y.value.entreprise]])])):Jt("",!0),((U=Yn(a).user)==null?void 0:U.user_type)==="admin"||((V=Yn(a).user)==null?void 0:V.user_type)==="entreprise"?(Oe(),Be("div",KU,[z[11]||(z[11]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salarie",-1)),A.value?(Oe(),Be("div",XU,z[10]||(z[10]=[S("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Tn((Oe(),Be("select",{key:1,id:"edit-salarie","onUpdate:modelValue":z[1]||(z[1]=_e=>Y.value.salarie=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:Yn(a).isAdmin&&!Y.value.entreprise},[S("option",QU,kt(v.value.length?"Sélectionnez un salarie":"Aucun salarie disponible"),1),(Oe(!0),Be(Sn,null,sr(v.value,_e=>(Oe(),Be("option",{key:_e.id,value:_e.id},kt(Yn(Su)(_e)),9,eH))),128))],8,JU)),[[ns,Y.value.salarie]])])):Jt("",!0),((re=Yn(a).user)==null?void 0:re.user_type)!=="visiteur"?(Oe(),Be("div",tH,[z[13]||(z[13]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visiteur",-1)),D.value?(Oe(),Be("div",nH,z[12]||(z[12]=[S("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):Tn((Oe(),Be("select",{key:1,id:"edit-visiteur","onUpdate:modelValue":z[2]||(z[2]=_e=>Y.value.visiteur=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!g.value.length||((Q=Yn(a).user)==null?void 0:Q.user_type)!=="salarie"&&!Y.value.salarie},[S("option",iH,kt(g.value.length?"Sélectionnez un visiteur":"Aucun visiteur disponible"),1),(Oe(!0),Be(Sn,null,sr(g.value,_e=>(Oe(),Be("option",{key:_e.id,value:_e.id},kt(Yn(Su)(_e)),9,sH))),128))],8,rH)),[[ns,Y.value.visiteur]])])):Jt("",!0),S("div",oH,[z[14]||(z[14]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),Tn(S("input",{id:"edit-nom","onUpdate:modelValue":z[3]||(z[3]=_e=>Y.value.nom=_e),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[zr,Y.value.nom]])]),S("div",aH,[z[15]||(z[15]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),Tn(S("textarea",{id:"edit-description","onUpdate:modelValue":z[4]||(z[4]=_e=>Y.value.description=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[zr,Y.value.description]])]),S("div",lH,[S("button",{onClick:Z,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),S("button",{onClick:I,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!te.value||d.value},[d.value?(Oe(),Be("span",cH,"Création en cours...")):(Oe(),Be("span",hH,"Créer"))],8,uH)])])])])):Jt("",!0)}}});function cs(t){"@babel/helpers - typeof";return cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cs(t)}var pl=Uint8Array,Eu=Uint16Array,V_=Int32Array,Hy=new pl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Wy=new pl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Cb=new pl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$E=function(t,e){for(var n=new Eu(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new V_(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},VE=$E(Hy,2),UE=VE.b,Eb=VE.r;UE[28]=258,Eb[258]=28;var HE=$E(Wy,0),dH=HE.b,b5=HE.r,Pb=new Eu(32768);for(var Bs=0;Bs<32768;++Bs){var Jh=(Bs&43690)>>1|(Bs&21845)<<1;Jh=(Jh&52428)>>2|(Jh&13107)<<2,Jh=(Jh&61680)>>4|(Jh&3855)<<4,Pb[Bs]=((Jh&65280)>>8|(Jh&255)<<8)>>1}var Jc=function(t,e,n){for(var r=t.length,i=0,s=new Eu(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new Eu(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new Eu(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],d=e-t[i],p=o[t[i]-1]++<<d,v=p|(1<<d)-1;p<=v;++p)a[Pb[p]>>l]=c}else for(a=new Eu(r),i=0;i<r;++i)t[i]&&(a[i]=Pb[o[t[i]-1]++]>>15-t[i]);return a},Cd=new pl(288);for(var Bs=0;Bs<144;++Bs)Cd[Bs]=8;for(var Bs=144;Bs<256;++Bs)Cd[Bs]=9;for(var Bs=256;Bs<280;++Bs)Cd[Bs]=7;for(var Bs=280;Bs<288;++Bs)Cd[Bs]=8;var ym=new pl(32);for(var Bs=0;Bs<32;++Bs)ym[Bs]=5;var fH=Jc(Cd,9,0),pH=Jc(Cd,9,1),gH=Jc(ym,5,0),mH=Jc(ym,5,1),n2=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},dc=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},r2=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},U_=function(t){return(t+7)/8|0},WE=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new pl(t.subarray(e,n))},vH=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],vc=function(t,e,n){var r=new Error(e||vH[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,vc),!n)throw r;return r},yH=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new pl(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new pl(i*3));var c=function(Te){var Je=n.length;if(Te>Je){var de=new pl(Math.max(Je*2,Te));de.set(n),n=de}},d=e.f||0,p=e.p||0,v=e.b||0,g=e.l,x=e.d,E=e.m,k=e.n,A=i*8;do{if(!g){d=dc(t,p,1);var D=dc(t,p+1,3);if(p+=3,D)if(D==1)g=pH,x=mH,E=9,k=5;else if(D==2){var ge=dc(t,p,31)+257,pe=dc(t,p+10,15)+4,N=ge+dc(t,p+5,31)+1;p+=14;for(var $=new pl(N),Z=new pl(19),B=0;B<pe;++B)Z[Cb[B]]=dc(t,p+B*3,7);p+=pe*3;for(var I=n2(Z),R=(1<<I)-1,z=Jc(Z,I,1),B=0;B<N;){var U=z[dc(t,p,R)];p+=U&15;var j=U>>4;if(j<16)$[B++]=j;else{var V=0,re=0;for(j==16?(re=3+dc(t,p,3),p+=2,V=$[B-1]):j==17?(re=3+dc(t,p,7),p+=3):j==18&&(re=11+dc(t,p,127),p+=7);re--;)$[B++]=V}}var Q=$.subarray(0,ge),_e=$.subarray(ge);E=n2(Q),k=n2(_e),g=Jc(Q,E,1),x=Jc(_e,k,1)}else vc(1);else{var j=U_(p)+4,Y=t[j-4]|t[j-3]<<8,te=j+Y;if(te>i){l&&vc(0);break}a&&c(v+Y),n.set(t.subarray(j,te),v),e.b=v+=Y,e.p=p=te*8,e.f=d;continue}if(p>A){l&&vc(0);break}}a&&c(v+131072);for(var we=(1<<E)-1,Qe=(1<<k)-1,ae=p;;ae=p){var V=g[r2(t,p)&we],H=V>>4;if(p+=V&15,p>A){l&&vc(0);break}if(V||vc(2),H<256)n[v++]=H;else if(H==256){ae=p,g=null;break}else{var K=H-254;if(H>264){var B=H-257,me=Hy[B];K=dc(t,p,(1<<me)-1)+UE[B],p+=me}var fe=x[r2(t,p)&Qe],he=fe>>4;fe||vc(3),p+=fe&15;var _e=dH[he];if(he>3){var me=Wy[he];_e+=r2(t,p)&(1<<me)-1,p+=me}if(p>A){l&&vc(0);break}a&&c(v+131072);var X=v+K;if(v<_e){var J=s-_e,De=Math.min(_e,X);for(J+v<0&&vc(3);v<De;++v)n[v]=r[J+v]}for(;v<X;++v)n[v]=n[v-_e]}}e.l=g,e.p=ae,e.b=v,e.f=d,g&&(d=1,e.m=E,e.d=x,e.n=k)}while(!d);return v!=n.length&&o?WE(n,0,v):n.subarray(0,v)},wh=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},sg=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},i2=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:qE,l:0};if(i==1){var o=new pl(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(te,ge){return te.f-ge.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,d=1,p=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=i-1;)a=n[n[c].f<n[p].f?c++:p++],l=n[c!=d&&n[c].f<n[p].f?c++:p++],n[d++]={s:-1,f:a.f+l.f,l:a,r:l};for(var v=s[0].s,r=1;r<i;++r)s[r].s>v&&(v=s[r].s);var g=new Eu(v+1),x=Mb(n[d-1],g,0);if(x>e){var r=0,E=0,k=x-e,A=1<<k;for(s.sort(function(ge,pe){return g[pe.s]-g[ge.s]||ge.f-pe.f});r<i;++r){var D=s[r].s;if(g[D]>e)E+=A-(1<<x-g[D]),g[D]=e;else break}for(E>>=k;E>0;){var j=s[r].s;g[j]<e?E-=1<<e-g[j]++-1:++r}for(;r>=0&&E;--r){var Y=s[r].s;g[Y]==e&&(--g[Y],++E)}x=e}return{t:new pl(g),l:x}},Mb=function(t,e,n){return t.s==-1?Math.max(Mb(t.l,e,n+1),Mb(t.r,e,n+1)):e[t.s]=n},_5=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Eu(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},og=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},GE=function(t,e,n){var r=n.length,i=U_(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},w5=function(t,e,n,r,i,s,o,a,l,c,d){wh(e,d++,n),++i[256];for(var p=i2(i,15),v=p.t,g=p.l,x=i2(s,15),E=x.t,k=x.l,A=_5(v),D=A.c,j=A.n,Y=_5(E),te=Y.c,ge=Y.n,pe=new Eu(19),N=0;N<D.length;++N)++pe[D[N]&31];for(var N=0;N<te.length;++N)++pe[te[N]&31];for(var $=i2(pe,7),Z=$.t,B=$.l,I=19;I>4&&!Z[Cb[I-1]];--I);var R=c+5<<3,z=og(i,Cd)+og(s,ym)+o,U=og(i,v)+og(s,E)+o+14+3*I+og(pe,Z)+2*pe[16]+3*pe[17]+7*pe[18];if(l>=0&&R<=z&&R<=U)return GE(e,d,t.subarray(l,l+c));var V,re,Q,_e;if(wh(e,d,1+(U<z)),d+=2,U<z){V=Jc(v,g,0),re=v,Q=Jc(E,k,0),_e=E;var we=Jc(Z,B,0);wh(e,d,j-257),wh(e,d+5,ge-1),wh(e,d+10,I-4),d+=14;for(var N=0;N<I;++N)wh(e,d+3*N,Z[Cb[N]]);d+=3*I;for(var Qe=[D,te],ae=0;ae<2;++ae)for(var H=Qe[ae],N=0;N<H.length;++N){var K=H[N]&31;wh(e,d,we[K]),d+=Z[K],K>15&&(wh(e,d,H[N]>>5&127),d+=H[N]>>12)}}else V=fH,re=Cd,Q=gH,_e=ym;for(var N=0;N<a;++N){var me=r[N];if(me>255){var K=me>>18&31;sg(e,d,V[K+257]),d+=re[K+257],K>7&&(wh(e,d,me>>23&31),d+=Hy[K]);var fe=me&31;sg(e,d,Q[fe]),d+=_e[fe],fe>3&&(sg(e,d,me>>5&8191),d+=Wy[fe])}else sg(e,d,V[me]),d+=re[me]}return sg(e,d,V[256]),d+re[256]},bH=new V_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),qE=new pl(0),_H=function(t,e,n,r,i,s){var o=s.z||t.length,a=new pl(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,d=(s.r||0)&7;if(e){d&&(l[0]=s.r>>3);for(var p=bH[e-1],v=p>>13,g=p&8191,x=(1<<n)-1,E=s.p||new Eu(32768),k=s.h||new Eu(x+1),A=Math.ceil(n/3),D=2*A,j=function(ee){return(t[ee]^t[ee+1]<<A^t[ee+2]<<D)&x},Y=new V_(25e3),te=new Eu(288),ge=new Eu(32),pe=0,N=0,$=s.i||0,Z=0,B=s.w||0,I=0;$+2<o;++$){var R=j($),z=$&32767,U=k[R];if(E[z]=U,k[R]=z,B<=$){var V=o-$;if((pe>7e3||Z>24576)&&(V>423||!c)){d=w5(t,l,0,Y,te,ge,N,Z,I,$-I,d),Z=pe=N=0,I=$;for(var re=0;re<286;++re)te[re]=0;for(var re=0;re<30;++re)ge[re]=0}var Q=2,_e=0,we=g,Qe=z-U&32767;if(V>2&&R==j($-Qe))for(var ae=Math.min(v,V)-1,H=Math.min(32767,$),K=Math.min(258,V);Qe<=H&&--we&&z!=U;){if(t[$+Q]==t[$+Q-Qe]){for(var me=0;me<K&&t[$+me]==t[$+me-Qe];++me);if(me>Q){if(Q=me,_e=Qe,me>ae)break;for(var fe=Math.min(Qe,me-2),he=0,re=0;re<fe;++re){var X=$-Qe+re&32767,J=E[X],De=X-J&32767;De>he&&(he=De,U=X)}}}z=U,U=E[z],Qe+=z-U&32767}if(_e){Y[Z++]=268435456|Eb[Q]<<18|b5[_e];var Te=Eb[Q]&31,Je=b5[_e]&31;N+=Hy[Te]+Wy[Je],++te[257+Te],++ge[Je],B=$+Q,++pe}else Y[Z++]=t[$],++te[t[$]]}}for($=Math.max($,B);$<o;++$)Y[Z++]=t[$],++te[t[$]];d=w5(t,l,c,Y,te,ge,N,Z,I,$-I,d),c||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=k,s.p=E,s.i=$,s.w=B)}else{for(var $=s.w||0;$<o+c;$+=65535){var de=$+65535;de>=o&&(l[d/8|0]=c,de=o),d=GE(l,d+1,t.subarray($,de))}s.i=o}return WE(a,0,r+U_(d)+i)},YE=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},wH=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new pl(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return _H(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},ZE=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},xH=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=YE();i.p(e.dictionary),ZE(t,2,i.d())}},LH=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&vc(6,"invalid zlib data"),(t[1]>>5&1)==1&&vc(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function kb(t,e){e||(e={});var n=YE();n.p(t);var r=wH(t,e,e.dictionary?6:2,4);return xH(r,e),ZE(r,r.length-4,n.d()),r}function SH(t,e){return yH(t.subarray(LH(t),-4),{i:2},e,e)}var CH=typeof TextDecoder<"u"&&new TextDecoder,EH=0;try{CH.decode(qE,{stream:!0}),EH=1}catch{}var Rr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function s2(){Rr.console&&typeof Rr.console.log=="function"&&Rr.console.log.apply(Rr.console,arguments)}var ws={log:s2,warn:function(t){Rr.console&&(typeof Rr.console.warn=="function"?Rr.console.warn.apply(Rr.console,arguments):s2.call(null,arguments))},error:function(t){Rr.console&&(typeof Rr.console.error=="function"?Rr.console.error.apply(Rr.console,arguments):s2(t))}};function o2(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){ef(r.response,e,n)},r.onerror=function(){ws.error("could not download file")},r.send()}function x5(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function L0(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Gg,Ab,ef=Rr.saveAs||((typeof window>"u"?"undefined":cs(window))!=="object"||window!==Rr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Rr.URL||Rr.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?x5(i.href)?o2(t,e,n):L0(i,i.target="_blank"):L0(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){L0(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(x5(t))o2(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){L0(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:cs(s)!=="object"&&(ws.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return o2(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(Rr.HTMLElement)||Rr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":cs(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var d=a.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},a.readAsDataURL(t)}else{var l=Rr.URL||Rr.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function KE(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function a2(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=sl(n,r,i,s,e[0],7,-680876936),s=sl(s,n,r,i,e[1],12,-389564586),i=sl(i,s,n,r,e[2],17,606105819),r=sl(r,i,s,n,e[3],22,-1044525330),n=sl(n,r,i,s,e[4],7,-176418897),s=sl(s,n,r,i,e[5],12,1200080426),i=sl(i,s,n,r,e[6],17,-1473231341),r=sl(r,i,s,n,e[7],22,-45705983),n=sl(n,r,i,s,e[8],7,1770035416),s=sl(s,n,r,i,e[9],12,-1958414417),i=sl(i,s,n,r,e[10],17,-42063),r=sl(r,i,s,n,e[11],22,-1990404162),n=sl(n,r,i,s,e[12],7,1804603682),s=sl(s,n,r,i,e[13],12,-40341101),i=sl(i,s,n,r,e[14],17,-1502002290),n=ol(n,r=sl(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=ol(s,n,r,i,e[6],9,-1069501632),i=ol(i,s,n,r,e[11],14,643717713),r=ol(r,i,s,n,e[0],20,-373897302),n=ol(n,r,i,s,e[5],5,-701558691),s=ol(s,n,r,i,e[10],9,38016083),i=ol(i,s,n,r,e[15],14,-660478335),r=ol(r,i,s,n,e[4],20,-405537848),n=ol(n,r,i,s,e[9],5,568446438),s=ol(s,n,r,i,e[14],9,-1019803690),i=ol(i,s,n,r,e[3],14,-187363961),r=ol(r,i,s,n,e[8],20,1163531501),n=ol(n,r,i,s,e[13],5,-1444681467),s=ol(s,n,r,i,e[2],9,-51403784),i=ol(i,s,n,r,e[7],14,1735328473),n=al(n,r=ol(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=al(s,n,r,i,e[8],11,-2022574463),i=al(i,s,n,r,e[11],16,1839030562),r=al(r,i,s,n,e[14],23,-35309556),n=al(n,r,i,s,e[1],4,-1530992060),s=al(s,n,r,i,e[4],11,1272893353),i=al(i,s,n,r,e[7],16,-155497632),r=al(r,i,s,n,e[10],23,-1094730640),n=al(n,r,i,s,e[13],4,681279174),s=al(s,n,r,i,e[0],11,-358537222),i=al(i,s,n,r,e[3],16,-722521979),r=al(r,i,s,n,e[6],23,76029189),n=al(n,r,i,s,e[9],4,-640364487),s=al(s,n,r,i,e[12],11,-421815835),i=al(i,s,n,r,e[15],16,530742520),n=ll(n,r=al(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=ll(s,n,r,i,e[7],10,1126891415),i=ll(i,s,n,r,e[14],15,-1416354905),r=ll(r,i,s,n,e[5],21,-57434055),n=ll(n,r,i,s,e[12],6,1700485571),s=ll(s,n,r,i,e[3],10,-1894986606),i=ll(i,s,n,r,e[10],15,-1051523),r=ll(r,i,s,n,e[1],21,-2054922799),n=ll(n,r,i,s,e[8],6,1873313359),s=ll(s,n,r,i,e[15],10,-30611744),i=ll(i,s,n,r,e[6],15,-1560198380),r=ll(r,i,s,n,e[13],21,1309151649),n=ll(n,r,i,s,e[4],6,-145523070),s=ll(s,n,r,i,e[11],10,-1120210379),i=ll(i,s,n,r,e[2],15,718787259),r=ll(r,i,s,n,e[9],21,-343485551),t[0]=hd(n,t[0]),t[1]=hd(r,t[1]),t[2]=hd(i,t[2]),t[3]=hd(s,t[3])}function Gy(t,e,n,r,i,s){return e=hd(hd(e,t),hd(r,s)),hd(e<<i|e>>>32-i,n)}function sl(t,e,n,r,i,s,o){return Gy(e&n|~e&r,t,e,i,s,o)}function ol(t,e,n,r,i,s,o){return Gy(e&r|n&~r,t,e,i,s,o)}function al(t,e,n,r,i,s,o){return Gy(e^n^r,t,e,i,s,o)}function ll(t,e,n,r,i,s,o){return Gy(n^(e|~r),t,e,i,s,o)}function XE(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)a2(r,PH(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(a2(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,a2(r,i),r}function PH(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Gg=Rr.atob.bind(Rr),Ab=Rr.btoa.bind(Rr);var L5="0123456789abcdef".split("");function MH(t){for(var e="",n=0;n<4;n++)e+=L5[t>>8*n+4&15]+L5[t>>8*n&15];return e}function kH(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Tb(t){return XE(t).map(kH).join("")}var AH=function(t){for(var e=0;e<t.length;e++)t[e]=MH(t[e]);return t.join("")}(XE("hello"))!="5d41402abc4b2a76b9719d911017c592";function hd(t,e){if(AH){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Db(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var d=a[l];c=(c+d+o.charCodeAt(l))%256,a[l]=a[c],a[c]=d}n=t,r=a}else a=r;var p=e.length,v=0,g=0,x="";for(l=0;l<p;l++)g=(g+(d=a[v=(v+1)%256]))%256,a[v]=a[g],a[g]=d,o=a[(a[v]+a[g])%256],x+=String.fromCharCode(e.charCodeAt(l)^o);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var S5={print:4,modify:8,copy:16,"annot-forms":32};function ap(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(S5.perm!==void 0)throw new Error("Invalid permission: "+a);i+=S5[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=Tb(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Db(this.encryptionKey,this.padding)}function lp(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function C5(t){if(cs(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){Rr.console&&ws.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Kv(t){if(!(this instanceof Kv))return new Kv(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function JE(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function of(t,e,n,r,i){if(!(this instanceof of))return new of(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,JE.call(this,r,i)}function hp(t,e,n,r,i){if(!(this instanceof hp))return new hp(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,JE.call(this,r,i)}function Or(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",d=null;cs(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,v={},g={internal:{},__private__:{}};g.__private__.PubSub=C5;var x="1.3",E=g.__private__.getPdfVersion=function(){return x};g.__private__.setPdfVersion=function(F){x=F};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return k};var A=g.__private__.getPageFormat=function(F){return k[F]};i=i||"a4";var D={COMPAT:"compat",ADVANCED:"advanced"},j=D.COMPAT;function Y(){this.saveGraphicsState(),ce(new nr(it,0,0,-it,0,Za()*it).toString()+" cm"),this.setFontSize(this.getFontSize()/it),c="n",j=D.ADVANCED}function te(){this.restoreGraphicsState(),c="S",j=D.COMPAT}var ge=g.__private__.combineFontStyleAndFontWeight=function(F,xe){if(F=="bold"&&xe=="normal"||F=="bold"&&xe==400||F=="normal"&&xe=="italic"||F=="bold"&&xe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return xe&&(F=xe==400||xe==="normal"?F==="italic"?"italic":"normal":xe!=700&&xe!=="bold"||F!=="normal"?(xe==700?"bold":xe)+""+F:"bold"),F};g.advancedAPI=function(F){var xe=j===D.COMPAT;return xe&&Y.call(this),typeof F!="function"||(F(this),xe&&te.call(this)),this},g.compatAPI=function(F){var xe=j===D.ADVANCED;return xe&&te.call(this),typeof F!="function"||(F(this),xe&&Y.call(this)),this},g.isAdvancedAPI=function(){return j===D.ADVANCED};var pe,N=function(F){if(j!==D.ADVANCED)throw new Error(F+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},$=g.roundToPrecision=g.__private__.roundToPrecision=function(F,xe){var tt=e||xe;if(isNaN(F)||isNaN(tt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return F.toFixed(tt).replace(/0+$/,"")};pe=g.hpf=g.__private__.hpf=typeof l=="number"?function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return $(F,l)}:l==="smart"?function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return $(F,F>-1&&F<1?16:5)}:function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return $(F,16)};var Z=g.f2=g.__private__.f2=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.f2");return $(F,2)},B=g.__private__.f3=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.f3");return $(F,3)},I=g.scale=g.__private__.scale=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.scale");return j===D.COMPAT?F*it:j===D.ADVANCED?F:void 0},R=function(F){return j===D.COMPAT?Za()-F:j===D.ADVANCED?F:void 0},z=function(F){return I(R(F))};g.__private__.setPrecision=g.setPrecision=function(F){typeof parseInt(F,10)=="number"&&(e=parseInt(F,10))};var U,V="00000000000000000000000000000000",re=g.__private__.getFileId=function(){return V},Q=g.__private__.setFileId=function(F){return V=F!==void 0&&/^[a-fA-F0-9]{32}$/.test(F)?F.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ds=new ap(d.userPermissions,d.userPassword,d.ownerPassword,V)),V};g.setFileId=function(F){return Q(F),this},g.getFileId=function(){return re()};var _e=g.__private__.convertDateToPDFDate=function(F){var xe=F.getTimezoneOffset(),tt=xe<0?"+":"-",pt=Math.floor(Math.abs(xe/60)),Mt=Math.abs(xe%60),Wt=[tt,K(pt),"'",K(Mt),"'"].join("");return["D:",F.getFullYear(),K(F.getMonth()+1),K(F.getDate()),K(F.getHours()),K(F.getMinutes()),K(F.getSeconds()),Wt].join("")},we=g.__private__.convertPDFDateToDate=function(F){var xe=parseInt(F.substr(2,4),10),tt=parseInt(F.substr(6,2),10)-1,pt=parseInt(F.substr(8,2),10),Mt=parseInt(F.substr(10,2),10),Wt=parseInt(F.substr(12,2),10),fn=parseInt(F.substr(14,2),10);return new Date(xe,tt,pt,Mt,Wt,fn,0)},Qe=g.__private__.setCreationDate=function(F){var xe;if(F===void 0&&(F=new Date),F instanceof Date)xe=_e(F);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(F))throw new Error("Invalid argument passed to jsPDF.setCreationDate");xe=F}return U=xe},ae=g.__private__.getCreationDate=function(F){var xe=U;return F==="jsDate"&&(xe=we(U)),xe};g.setCreationDate=function(F){return Qe(F),this},g.getCreationDate=function(F){return ae(F)};var H,K=g.__private__.padd2=function(F){return("0"+parseInt(F)).slice(-2)},me=g.__private__.padd2Hex=function(F){return("00"+(F=F.toString())).substr(F.length)},fe=0,he=[],X=[],J=0,De=[],Te=[],Je=!1,de=X,ee=function(){fe=0,J=0,X=[],he=[],De=[],wn=ft(),Ut=ft()};g.__private__.setCustomOutputDestination=function(F){Je=!0,de=F};var se=function(F){Je||(de=F)};g.__private__.resetCustomOutputDestination=function(){Je=!1,de=X};var ce=g.__private__.out=function(F){return F=F.toString(),J+=F.length+1,de.push(F),de},ze=g.__private__.write=function(F){return ce(arguments.length===1?F.toString():Array.prototype.join.call(arguments," "))},Ce=g.__private__.getArrayBuffer=function(F){for(var xe=F.length,tt=new ArrayBuffer(xe),pt=new Uint8Array(tt);xe--;)pt[xe]=F.charCodeAt(xe);return tt},ve=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return ve};var Ve=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(F){return Ve=j===D.ADVANCED?F/it:F,this};var Ye,Ze=g.__private__.getFontSize=g.getFontSize=function(){return j===D.COMPAT?Ve:Ve*it},_t=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(F){return _t=F,this},g.__private__.getR2L=g.getR2L=function(){return _t};var We,ut=g.__private__.setZoomMode=function(F){var xe=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(F))Ye=F;else if(isNaN(F)){if(xe.indexOf(F)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+F+'" is not recognized.');Ye=F}else Ye=parseInt(F,10)};g.__private__.getZoomMode=function(){return Ye};var Vt,tn=g.__private__.setPageMode=function(F){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(F)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+F+'" is not recognized.');We=F};g.__private__.getPageMode=function(){return We};var bn=g.__private__.setLayoutMode=function(F){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(F)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+F+'" is not recognized.');Vt=F};g.__private__.getLayoutMode=function(){return Vt},g.__private__.setDisplayMode=g.setDisplayMode=function(F,xe,tt){return ut(F),bn(xe),tn(tt),this};var et={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(F){if(Object.keys(et).indexOf(F)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return et[F]},g.__private__.getDocumentProperties=function(){return et},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(F){for(var xe in et)et.hasOwnProperty(xe)&&F[xe]&&(et[xe]=F[xe]);return this},g.__private__.setDocumentProperty=function(F,xe){if(Object.keys(et).indexOf(F)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return et[F]=xe};var at,it,zt,Kt,Nn,yn={},Dn={},er=[],Qt={},Cn={},Mn={},tr={},yr=null,xr=0,cr=[],Gr=new C5(g),zs=t.hotfixes||[],Ai={},Oo={},Ds=[],nr=function F(xe,tt,pt,Mt,Wt,fn){if(!(this instanceof F))return new F(xe,tt,pt,Mt,Wt,fn);isNaN(xe)&&(xe=1),isNaN(tt)&&(tt=0),isNaN(pt)&&(pt=0),isNaN(Mt)&&(Mt=1),isNaN(Wt)&&(Wt=0),isNaN(fn)&&(fn=0),this._matrix=[xe,tt,pt,Mt,Wt,fn]};Object.defineProperty(nr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(F){this._matrix[0]=F}}),Object.defineProperty(nr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(F){this._matrix[1]=F}}),Object.defineProperty(nr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(F){this._matrix[2]=F}}),Object.defineProperty(nr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(F){this._matrix[3]=F}}),Object.defineProperty(nr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(F){this._matrix[4]=F}}),Object.defineProperty(nr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(F){this._matrix[5]=F}}),Object.defineProperty(nr.prototype,"a",{get:function(){return this._matrix[0]},set:function(F){this._matrix[0]=F}}),Object.defineProperty(nr.prototype,"b",{get:function(){return this._matrix[1]},set:function(F){this._matrix[1]=F}}),Object.defineProperty(nr.prototype,"c",{get:function(){return this._matrix[2]},set:function(F){this._matrix[2]=F}}),Object.defineProperty(nr.prototype,"d",{get:function(){return this._matrix[3]},set:function(F){this._matrix[3]=F}}),Object.defineProperty(nr.prototype,"e",{get:function(){return this._matrix[4]},set:function(F){this._matrix[4]=F}}),Object.defineProperty(nr.prototype,"f",{get:function(){return this._matrix[5]},set:function(F){this._matrix[5]=F}}),Object.defineProperty(nr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(nr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(nr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(nr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),nr.prototype.join=function(F){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(pe).join(F)},nr.prototype.multiply=function(F){var xe=F.sx*this.sx+F.shy*this.shx,tt=F.sx*this.shy+F.shy*this.sy,pt=F.shx*this.sx+F.sy*this.shx,Mt=F.shx*this.shy+F.sy*this.sy,Wt=F.tx*this.sx+F.ty*this.shx+this.tx,fn=F.tx*this.shy+F.ty*this.sy+this.ty;return new nr(xe,tt,pt,Mt,Wt,fn)},nr.prototype.decompose=function(){var F=this.sx,xe=this.shy,tt=this.shx,pt=this.sy,Mt=this.tx,Wt=this.ty,fn=Math.sqrt(F*F+xe*xe),jn=(F/=fn)*tt+(xe/=fn)*pt;tt-=F*jn,pt-=xe*jn;var Hn=Math.sqrt(tt*tt+pt*pt);return jn/=Hn,F*(pt/=Hn)<xe*(tt/=Hn)&&(F=-F,xe=-xe,jn=-jn,fn=-fn),{scale:new nr(fn,0,0,Hn,0,0),translate:new nr(1,0,0,1,Mt,Wt),rotate:new nr(F,xe,-xe,F,0,0),skew:new nr(1,0,jn,1,0,0)}},nr.prototype.toString=function(F){return this.join(" ")},nr.prototype.inversed=function(){var F=this.sx,xe=this.shy,tt=this.shx,pt=this.sy,Mt=this.tx,Wt=this.ty,fn=1/(F*pt-xe*tt),jn=pt*fn,Hn=-xe*fn,pr=-tt*fn,Cr=F*fn;return new nr(jn,Hn,pr,Cr,-jn*Mt-pr*Wt,-Hn*Mt-Cr*Wt)},nr.prototype.applyToPoint=function(F){var xe=F.x*this.sx+F.y*this.shx+this.tx,tt=F.x*this.shy+F.y*this.sy+this.ty;return new Us(xe,tt)},nr.prototype.applyToRectangle=function(F){var xe=this.applyToPoint(F),tt=this.applyToPoint(new Us(F.x+F.w,F.y+F.h));return new va(xe.x,xe.y,tt.x-xe.x,tt.y-xe.y)},nr.prototype.clone=function(){var F=this.sx,xe=this.shy,tt=this.shx,pt=this.sy,Mt=this.tx,Wt=this.ty;return new nr(F,xe,tt,pt,Mt,Wt)},g.Matrix=nr;var Os=g.matrixMult=function(F,xe){return xe.multiply(F)},No=new nr(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=No;var lt=function(F,xe){if(!Cn[F]){var tt=(xe instanceof of?"Sh":"P")+(Object.keys(Qt).length+1).toString(10);xe.id=tt,Cn[F]=tt,Qt[tt]=xe,Gr.publish("addPattern",xe)}};g.ShadingPattern=of,g.TilingPattern=hp,g.addShadingPattern=function(F,xe){return N("addShadingPattern()"),lt(F,xe),this},g.beginTilingPattern=function(F){N("beginTilingPattern()"),ya(F.boundingBox[0],F.boundingBox[1],F.boundingBox[2]-F.boundingBox[0],F.boundingBox[3]-F.boundingBox[1],F.matrix)},g.endTilingPattern=function(F,xe){N("endTilingPattern()"),xe.stream=Te[H].join(`
`),lt(F,xe),Gr.publish("endTilingPattern",xe),Ds.pop().restore()};var Re=g.__private__.newObject=function(){var F=ft();return En(F,!0),F},ft=g.__private__.newObjectDeferred=function(){return fe++,he[fe]=function(){return J},fe},En=function(F,xe){return xe=typeof xe=="boolean"&&xe,he[F]=J,xe&&ce(F+" 0 obj"),F},Un=g.__private__.newAdditionalObject=function(){var F={objId:ft(),content:""};return De.push(F),F},wn=ft(),Ut=ft(),Jn=g.__private__.decodeColorString=function(F){var xe=F.split(" ");if(xe.length!==2||xe[1]!=="g"&&xe[1]!=="G")xe.length===5&&(xe[4]==="k"||xe[4]==="K")&&(xe=[(1-xe[0])*(1-xe[3]),(1-xe[1])*(1-xe[3]),(1-xe[2])*(1-xe[3]),"r"]);else{var tt=parseFloat(xe[0]);xe=[tt,tt,tt,"r"]}for(var pt="#",Mt=0;Mt<3;Mt++)pt+=("0"+Math.floor(255*parseFloat(xe[Mt])).toString(16)).slice(-2);return pt},Ct=g.__private__.encodeColorString=function(F){var xe;typeof F=="string"&&(F={ch1:F});var tt=F.ch1,pt=F.ch2,Mt=F.ch3,Wt=F.ch4,fn=F.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof tt=="string"&&tt.charAt(0)!=="#"){var jn=new KE(tt);if(jn.ok)tt=jn.toHex();else if(!/^\d*\.?\d*$/.test(tt))throw new Error('Invalid color "'+tt+'" passed to jsPDF.encodeColorString.')}if(typeof tt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(tt)&&(tt="#"+tt[1]+tt[1]+tt[2]+tt[2]+tt[3]+tt[3]),typeof tt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(tt)){var Hn=parseInt(tt.substr(1),16);tt=Hn>>16&255,pt=Hn>>8&255,Mt=255&Hn}if(pt===void 0||Wt===void 0&&tt===pt&&pt===Mt)if(typeof tt=="string")xe=tt+" "+fn[0];else switch(F.precision){case 2:xe=Z(tt/255)+" "+fn[0];break;case 3:default:xe=B(tt/255)+" "+fn[0]}else if(Wt===void 0||cs(Wt)==="object"){if(Wt&&!isNaN(Wt.a)&&Wt.a===0)return xe=["1.","1.","1.",fn[1]].join(" ");if(typeof tt=="string")xe=[tt,pt,Mt,fn[1]].join(" ");else switch(F.precision){case 2:xe=[Z(tt/255),Z(pt/255),Z(Mt/255),fn[1]].join(" ");break;default:case 3:xe=[B(tt/255),B(pt/255),B(Mt/255),fn[1]].join(" ")}}else if(typeof tt=="string")xe=[tt,pt,Mt,Wt,fn[2]].join(" ");else switch(F.precision){case 2:xe=[Z(tt),Z(pt),Z(Mt),Z(Wt),fn[2]].join(" ");break;case 3:default:xe=[B(tt),B(pt),B(Mt),B(Wt),fn[2]].join(" ")}return xe},Ht=g.__private__.getFilters=function(){return o},Ln=g.__private__.putStream=function(F){var xe=(F=F||{}).data||"",tt=F.filters||Ht(),pt=F.alreadyAppliedFilters||[],Mt=F.addLength1||!1,Wt=xe.length,fn=F.objectId,jn=function(ys){return ys};if(d!==null&&fn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(jn=ds.encryptor(fn,0));var Hn={};tt===!0&&(tt=["FlateEncode"]);var pr=F.additionalKeyValues||[],Cr=(Hn=Or.API.processDataByFilters!==void 0?Or.API.processDataByFilters(xe,tt):{data:xe,reverseChain:[]}).reverseChain+(Array.isArray(pt)?pt.join(" "):pt.toString());if(Hn.data.length!==0&&(pr.push({key:"Length",value:Hn.data.length}),Mt===!0&&pr.push({key:"Length1",value:Wt})),Cr.length!=0)if(Cr.split("/").length-1==1)pr.push({key:"Filter",value:Cr});else{pr.push({key:"Filter",value:"["+Cr+"]"});for(var Vr=0;Vr<pr.length;Vr+=1)if(pr[Vr].key==="DecodeParms"){for(var qi=[],gi=0;gi<Hn.reverseChain.split("/").length-1;gi+=1)qi.push("null");qi.push(pr[Vr].value),pr[Vr].value="["+qi.join(" ")+"]"}}ce("<<");for(var Ci=0;Ci<pr.length;Ci++)ce("/"+pr[Ci].key+" "+pr[Ci].value);ce(">>"),Hn.data.length!==0&&(ce("stream"),ce(jn(Hn.data)),ce("endstream"))},jr=g.__private__.putPage=function(F){var xe=F.number,tt=F.data,pt=F.objId,Mt=F.contentsObjId;En(pt,!0),ce("<</Type /Page"),ce("/Parent "+F.rootDictionaryObjId+" 0 R"),ce("/Resources "+F.resourceDictionaryObjId+" 0 R"),ce("/MediaBox ["+parseFloat(pe(F.mediaBox.bottomLeftX))+" "+parseFloat(pe(F.mediaBox.bottomLeftY))+" "+pe(F.mediaBox.topRightX)+" "+pe(F.mediaBox.topRightY)+"]"),F.cropBox!==null&&ce("/CropBox ["+pe(F.cropBox.bottomLeftX)+" "+pe(F.cropBox.bottomLeftY)+" "+pe(F.cropBox.topRightX)+" "+pe(F.cropBox.topRightY)+"]"),F.bleedBox!==null&&ce("/BleedBox ["+pe(F.bleedBox.bottomLeftX)+" "+pe(F.bleedBox.bottomLeftY)+" "+pe(F.bleedBox.topRightX)+" "+pe(F.bleedBox.topRightY)+"]"),F.trimBox!==null&&ce("/TrimBox ["+pe(F.trimBox.bottomLeftX)+" "+pe(F.trimBox.bottomLeftY)+" "+pe(F.trimBox.topRightX)+" "+pe(F.trimBox.topRightY)+"]"),F.artBox!==null&&ce("/ArtBox ["+pe(F.artBox.bottomLeftX)+" "+pe(F.artBox.bottomLeftY)+" "+pe(F.artBox.topRightX)+" "+pe(F.artBox.topRightY)+"]"),typeof F.userUnit=="number"&&F.userUnit!==1&&ce("/UserUnit "+F.userUnit),Gr.publish("putPage",{objId:pt,pageContext:cr[xe],pageNumber:xe,page:tt}),ce("/Contents "+Mt+" 0 R"),ce(">>"),ce("endobj");var Wt=tt.join(`
`);return j===D.ADVANCED&&(Wt+=`
Q`),En(Mt,!0),Ln({data:Wt,filters:Ht(),objectId:Mt}),ce("endobj"),pt},un=g.__private__.putPages=function(){var F,xe,tt=[];for(F=1;F<=xr;F++)cr[F].objId=ft(),cr[F].contentsObjId=ft();for(F=1;F<=xr;F++)tt.push(jr({number:F,data:Te[F],objId:cr[F].objId,contentsObjId:cr[F].contentsObjId,mediaBox:cr[F].mediaBox,cropBox:cr[F].cropBox,bleedBox:cr[F].bleedBox,trimBox:cr[F].trimBox,artBox:cr[F].artBox,userUnit:cr[F].userUnit,rootDictionaryObjId:wn,resourceDictionaryObjId:Ut}));En(wn,!0),ce("<</Type /Pages");var pt="/Kids [";for(xe=0;xe<xr;xe++)pt+=tt[xe]+" 0 R ";ce(pt+"]"),ce("/Count "+xr),ce(">>"),ce("endobj"),Gr.publish("postPutPages")},an=function(F){Gr.publish("putFont",{font:F,out:ce,newObject:Re,putStream:Ln}),F.isAlreadyPutted!==!0&&(F.objectNumber=Re(),ce("<<"),ce("/Type /Font"),ce("/BaseFont /"+lp(F.postScriptName)),ce("/Subtype /Type1"),typeof F.encoding=="string"&&ce("/Encoding /"+F.encoding),ce("/FirstChar 32"),ce("/LastChar 255"),ce(">>"),ce("endobj"))},qn=function(){for(var F in yn)yn.hasOwnProperty(F)&&(p===!1||p===!0&&v.hasOwnProperty(F))&&an(yn[F])},li=function(F){F.objectNumber=Re();var xe=[];xe.push({key:"Type",value:"/XObject"}),xe.push({key:"Subtype",value:"/Form"}),xe.push({key:"BBox",value:"["+[pe(F.x),pe(F.y),pe(F.x+F.width),pe(F.y+F.height)].join(" ")+"]"}),xe.push({key:"Matrix",value:"["+F.matrix.toString()+"]"});var tt=F.pages[1].join(`
`);Ln({data:tt,additionalKeyValues:xe,objectId:F.objectNumber}),ce("endobj")},xi=function(){for(var F in Ai)Ai.hasOwnProperty(F)&&li(Ai[F])},zi=function(F,xe){var tt,pt=[],Mt=1/(xe-1);for(tt=0;tt<1;tt+=Mt)pt.push(tt);if(pt.push(1),F[0].offset!=0){var Wt={offset:0,color:F[0].color};F.unshift(Wt)}if(F[F.length-1].offset!=1){var fn={offset:1,color:F[F.length-1].color};F.push(fn)}for(var jn="",Hn=0,pr=0;pr<pt.length;pr++){for(tt=pt[pr];tt>F[Hn+1].offset;)Hn++;var Cr=F[Hn].offset,Vr=(tt-Cr)/(F[Hn+1].offset-Cr),qi=F[Hn].color,gi=F[Hn+1].color;jn+=me(Math.round((1-Vr)*qi[0]+Vr*gi[0]).toString(16))+me(Math.round((1-Vr)*qi[1]+Vr*gi[1]).toString(16))+me(Math.round((1-Vr)*qi[2]+Vr*gi[2]).toString(16))}return jn.trim()},Jr=function(F,xe){xe||(xe=21);var tt=Re(),pt=zi(F.colors,xe),Mt=[];Mt.push({key:"FunctionType",value:"0"}),Mt.push({key:"Domain",value:"[0.0 1.0]"}),Mt.push({key:"Size",value:"["+xe+"]"}),Mt.push({key:"BitsPerSample",value:"8"}),Mt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Mt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ln({data:pt,additionalKeyValues:Mt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:tt}),ce("endobj"),F.objectNumber=Re(),ce("<< /ShadingType "+F.type),ce("/ColorSpace /DeviceRGB");var Wt="/Coords ["+pe(parseFloat(F.coords[0]))+" "+pe(parseFloat(F.coords[1]))+" ";F.type===2?Wt+=pe(parseFloat(F.coords[2]))+" "+pe(parseFloat(F.coords[3])):Wt+=pe(parseFloat(F.coords[2]))+" "+pe(parseFloat(F.coords[3]))+" "+pe(parseFloat(F.coords[4]))+" "+pe(parseFloat(F.coords[5])),ce(Wt+="]"),F.matrix&&ce("/Matrix ["+F.matrix.toString()+"]"),ce("/Function "+tt+" 0 R"),ce("/Extend [true true]"),ce(">>"),ce("endobj")},_r=function(F,xe){var tt=ft(),pt=Re();xe.push({resourcesOid:tt,objectOid:pt}),F.objectNumber=pt;var Mt=[];Mt.push({key:"Type",value:"/Pattern"}),Mt.push({key:"PatternType",value:"1"}),Mt.push({key:"PaintType",value:"1"}),Mt.push({key:"TilingType",value:"1"}),Mt.push({key:"BBox",value:"["+F.boundingBox.map(pe).join(" ")+"]"}),Mt.push({key:"XStep",value:pe(F.xStep)}),Mt.push({key:"YStep",value:pe(F.yStep)}),Mt.push({key:"Resources",value:tt+" 0 R"}),F.matrix&&Mt.push({key:"Matrix",value:"["+F.matrix.toString()+"]"}),Ln({data:F.stream,additionalKeyValues:Mt,objectId:F.objectNumber}),ce("endobj")},kr=function(F){var xe;for(xe in Qt)Qt.hasOwnProperty(xe)&&(Qt[xe]instanceof of?Jr(Qt[xe]):Qt[xe]instanceof hp&&_r(Qt[xe],F))},di=function(F){for(var xe in F.objectNumber=Re(),ce("<<"),F)switch(xe){case"opacity":ce("/ca "+Z(F[xe]));break;case"stroke-opacity":ce("/CA "+Z(F[xe]))}ce(">>"),ce("endobj")},Ir=function(){var F;for(F in Mn)Mn.hasOwnProperty(F)&&di(Mn[F])},on=function(){for(var F in ce("/XObject <<"),Ai)Ai.hasOwnProperty(F)&&Ai[F].objectNumber>=0&&ce("/"+F+" "+Ai[F].objectNumber+" 0 R");Gr.publish("putXobjectDict"),ce(">>")},Ni=function(){ds.oid=Re(),ce("<<"),ce("/Filter /Standard"),ce("/V "+ds.v),ce("/R "+ds.r),ce("/U <"+ds.toHexString(ds.U)+">"),ce("/O <"+ds.toHexString(ds.O)+">"),ce("/P "+ds.P),ce(">>"),ce("endobj")},vi=function(){for(var F in ce("/Font <<"),yn)yn.hasOwnProperty(F)&&(p===!1||p===!0&&v.hasOwnProperty(F))&&ce("/"+F+" "+yn[F].objectNumber+" 0 R");ce(">>")},Yi=function(){if(Object.keys(Qt).length>0){for(var F in ce("/Shading <<"),Qt)Qt.hasOwnProperty(F)&&Qt[F]instanceof of&&Qt[F].objectNumber>=0&&ce("/"+F+" "+Qt[F].objectNumber+" 0 R");Gr.publish("putShadingPatternDict"),ce(">>")}},Qr=function(F){if(Object.keys(Qt).length>0){for(var xe in ce("/Pattern <<"),Qt)Qt.hasOwnProperty(xe)&&Qt[xe]instanceof g.TilingPattern&&Qt[xe].objectNumber>=0&&Qt[xe].objectNumber<F&&ce("/"+xe+" "+Qt[xe].objectNumber+" 0 R");Gr.publish("putTilingPatternDict"),ce(">>")}},fr=function(){if(Object.keys(Mn).length>0){var F;for(F in ce("/ExtGState <<"),Mn)Mn.hasOwnProperty(F)&&Mn[F].objectNumber>=0&&ce("/"+F+" "+Mn[F].objectNumber+" 0 R");Gr.publish("putGStateDict"),ce(">>")}},On=function(F){En(F.resourcesOid,!0),ce("<<"),ce("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),vi(),Yi(),Qr(F.objectOid),fr(),on(),ce(">>"),ce("endobj")},Lr=function(){var F=[];qn(),Ir(),xi(),kr(F),Gr.publish("putResources"),F.forEach(On),On({resourcesOid:Ut,objectOid:Number.MAX_SAFE_INTEGER}),Gr.publish("postPutResources")},Ls=function(){Gr.publish("putAdditionalObjects");for(var F=0;F<De.length;F++){var xe=De[F];En(xe.objId,!0),ce(xe.content),ce("endobj")}Gr.publish("postPutAdditionalObjects")},vo=function(F){Dn[F.fontName]=Dn[F.fontName]||{},Dn[F.fontName][F.fontStyle]=F.id},hr=function(F,xe,tt,pt,Mt){var Wt={id:"F"+(Object.keys(yn).length+1).toString(10),postScriptName:F,fontName:xe,fontStyle:tt,encoding:pt,isStandardFont:Mt||!1,metadata:{}};return Gr.publish("addFont",{font:Wt,instance:this}),yn[Wt.id]=Wt,vo(Wt),Wt.id},Pn=function(F){for(var xe=0,tt=ve.length;xe<tt;xe++){var pt=hr.call(this,F[xe][0],F[xe][1],F[xe][2],ve[xe][3],!0);p===!1&&(v[pt]=!0);var Mt=F[xe][0].split("-");vo({id:pt,fontName:Mt[0],fontStyle:Mt[1]||""})}Gr.publish("addFonts",{fonts:yn,dictionary:Dn})},rn=function(F){return F.foo=function(){try{return F.apply(this,arguments)}catch(pt){var xe=pt.stack||"";~xe.indexOf(" at ")&&(xe=xe.split(" at ")[1]);var tt="Error in function "+xe.split(`
`)[0].split("<")[0]+": "+pt.message;if(!Rr.console)throw new Error(tt);Rr.console.error(tt,pt),Rr.alert&&alert(tt)}},F.foo.bar=F,F.foo},yi=function(F,xe){var tt,pt,Mt,Wt,fn,jn,Hn,pr,Cr;if(Mt=(xe=xe||{}).sourceEncoding||"Unicode",fn=xe.outputEncoding,(xe.autoencode||fn)&&yn[at].metadata&&yn[at].metadata[Mt]&&yn[at].metadata[Mt].encoding&&(Wt=yn[at].metadata[Mt].encoding,!fn&&yn[at].encoding&&(fn=yn[at].encoding),!fn&&Wt.codePages&&(fn=Wt.codePages[0]),typeof fn=="string"&&(fn=Wt[fn]),fn)){for(Hn=!1,jn=[],tt=0,pt=F.length;tt<pt;tt++)(pr=fn[F.charCodeAt(tt)])?jn.push(String.fromCharCode(pr)):jn.push(F[tt]),jn[tt].charCodeAt(0)>>8&&(Hn=!0);F=jn.join("")}for(tt=F.length;Hn===void 0&&tt!==0;)F.charCodeAt(tt-1)>>8&&(Hn=!0),tt--;if(!Hn)return F;for(jn=xe.noBOM?[]:[254,255],tt=0,pt=F.length;tt<pt;tt++){if((Cr=(pr=F.charCodeAt(tt))>>8)>>8)throw new Error("Character at position "+tt+" of string '"+F+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");jn.push(Cr),jn.push(pr-(Cr<<8))}return String.fromCharCode.apply(void 0,jn)},qr=g.__private__.pdfEscape=g.pdfEscape=function(F,xe){return yi(F,xe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ui=g.__private__.beginPage=function(F){Te[++xr]=[],cr[xr]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(F[0]),topRightY:Number(F[1])}},Ns(xr),se(Te[H])},ps=function(F,xe){var tt,pt,Mt;switch(n=xe||n,typeof F=="string"&&(tt=A(F.toLowerCase()),Array.isArray(tt)&&(pt=tt[0],Mt=tt[1])),Array.isArray(F)&&(pt=F[0]*it,Mt=F[1]*it),isNaN(pt)&&(pt=i[0],Mt=i[1]),(pt>14400||Mt>14400)&&(ws.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),pt=Math.min(14400,pt),Mt=Math.min(14400,Mt)),i=[pt,Mt],n.substr(0,1)){case"l":Mt>pt&&(i=[Mt,pt]);break;case"p":pt>Mt&&(i=[Mt,pt])}ui(i),uu(Au),ce(Zi),du!==0&&ce(du+" J"),Li!==0&&ce(Li+" j"),Gr.publish("addPage",{pageNumber:xr})},$s=function(F){F>0&&F<=xr&&(Te.splice(F,1),cr.splice(F,1),xr--,H>xr&&(H=xr),this.setPage(H))},Ns=function(F){F>0&&F<=xr&&(H=F)},dr=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Te.length-1},Qs=function(F,xe,tt){var pt,Mt=void 0;return tt=tt||{},F=F!==void 0?F:yn[at].fontName,xe=xe!==void 0?xe:yn[at].fontStyle,pt=F.toLowerCase(),Dn[pt]!==void 0&&Dn[pt][xe]!==void 0?Mt=Dn[pt][xe]:Dn[F]!==void 0&&Dn[F][xe]!==void 0?Mt=Dn[F][xe]:tt.disableWarning===!1&&ws.warn("Unable to look up font label for font '"+F+"', '"+xe+"'. Refer to getFontList() for available fonts."),Mt||tt.noFallback||(Mt=Dn.times[xe])==null&&(Mt=Dn.times.normal),Mt},Vi=g.__private__.putInfo=function(){var F=Re(),xe=function(pt){return pt};for(var tt in d!==null&&(xe=ds.encryptor(F,0)),ce("<<"),ce("/Producer ("+qr(xe("jsPDF "+Or.version))+")"),et)et.hasOwnProperty(tt)&&et[tt]&&ce("/"+tt.substr(0,1).toUpperCase()+tt.substr(1)+" ("+qr(xe(et[tt]))+")");ce("/CreationDate ("+qr(xe(U))+")"),ce(">>"),ce("endobj")},Gi=g.__private__.putCatalog=function(F){var xe=(F=F||{}).rootDictionaryObjId||wn;switch(Re(),ce("<<"),ce("/Type /Catalog"),ce("/Pages "+xe+" 0 R"),Ye||(Ye="fullwidth"),Ye){case"fullwidth":ce("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ce("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ce("/OpenAction [3 0 R /Fit]");break;case"original":ce("/OpenAction [3 0 R /XYZ null null 1]");break;default:var tt=""+Ye;tt.substr(tt.length-1)==="%"&&(Ye=parseInt(Ye)/100),typeof Ye=="number"&&ce("/OpenAction [3 0 R /XYZ null null "+Z(Ye)+"]")}switch(Vt||(Vt="continuous"),Vt){case"continuous":ce("/PageLayout /OneColumn");break;case"single":ce("/PageLayout /SinglePage");break;case"two":case"twoleft":ce("/PageLayout /TwoColumnLeft");break;case"tworight":ce("/PageLayout /TwoColumnRight")}We&&ce("/PageMode /"+We),Gr.publish("putCatalog"),ce(">>"),ce("endobj")},fi=g.__private__.putTrailer=function(){ce("trailer"),ce("<<"),ce("/Size "+(fe+1)),ce("/Root "+fe+" 0 R"),ce("/Info "+(fe-1)+" 0 R"),d!==null&&ce("/Encrypt "+ds.oid+" 0 R"),ce("/ID [ <"+V+"> <"+V+"> ]"),ce(">>")},kn=g.__private__.putHeader=function(){ce("%PDF-"+x),ce("%ºß¬à")},vn=g.__private__.putXRef=function(){var F="0000000000";ce("xref"),ce("0 "+(fe+1)),ce("0000000000 65535 f ");for(var xe=1;xe<=fe;xe++)typeof he[xe]=="function"?ce((F+he[xe]()).slice(-10)+" 00000 n "):he[xe]!==void 0?ce((F+he[xe]).slice(-10)+" 00000 n "):ce("0000000000 00000 n ")},Fr=g.__private__.buildDocument=function(){ee(),se(X),Gr.publish("buildDocument"),kn(),un(),Ls(),Lr(),d!==null&&Ni(),Vi(),Gi();var F=J;return vn(),fi(),ce("startxref"),ce(""+F),ce("%%EOF"),se(Te[H]),X.join(`
`)},hs=g.__private__.getBlob=function(F){return new Blob([Ce(F)],{type:"application/pdf"})},Vs=g.output=g.__private__.output=rn(function(F,xe){switch(typeof(xe=xe||{})=="string"?xe={filename:xe}:xe.filename=xe.filename||"generated.pdf",F){case void 0:return Fr();case"save":g.save(xe.filename);break;case"arraybuffer":return Ce(Fr());case"blob":return hs(Fr());case"bloburi":case"bloburl":if(Rr.URL!==void 0&&typeof Rr.URL.createObjectURL=="function")return Rr.URL&&Rr.URL.createObjectURL(hs(Fr()))||void 0;ws.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var tt="",pt=Fr();try{tt=Ab(pt)}catch{tt=Ab(unescape(encodeURIComponent(pt)))}return"data:application/pdf;filename="+xe.filename+";base64,"+tt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Rr)==="[object Window]"){var Mt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Wt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';xe.pdfObjectUrl&&(Mt=xe.pdfObjectUrl,Wt="");var fn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Mt+'"'+Wt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(xe)+");<\/script></body></html>",jn=Rr.open();return jn!==null&&jn.document.write(fn),jn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Rr)==="[object Window]"){var Hn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(xe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+xe.filename+'" width="500px" height="400px" /></body></html>',pr=Rr.open();if(pr!==null){pr.document.write(Hn);var Cr=this;pr.document.documentElement.querySelector("#pdfViewer").onload=function(){pr.document.title=xe.filename,pr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Cr.output("bloburl"))}}return pr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Rr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Vr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",xe)+'"></iframe></body></html>',qi=Rr.open();if(qi!==null&&(qi.document.write(Vr),qi.document.title=xe.filename),qi||typeof safari>"u")return qi;break;case"datauri":case"dataurl":return Rr.document.location.href=this.output("datauristring",xe);default:return null}}),aa=function(F){return Array.isArray(zs)===!0&&zs.indexOf(F)>-1};switch(r){case"pt":it=1;break;case"mm":it=72/25.4;break;case"cm":it=72/2.54;break;case"in":it=72;break;case"px":it=aa("px_scaling")==1?.75:96/72;break;case"pc":case"em":it=12;break;case"ex":it=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);it=r}var ds=null;Qe(),Q();var ka=function(F){return d!==null?ds.encryptor(F,0):function(xe){return xe}},bl=g.__private__.getPageInfo=g.getPageInfo=function(F){if(isNaN(F)||F%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:cr[F].objId,pageNumber:F,pageContext:cr[F]}},Vn=g.__private__.getPageInfoByObjId=function(F){if(isNaN(F)||F%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var xe in cr)if(cr[xe].objId===F)break;return bl(xe)},Sr=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:cr[H].objId,pageNumber:H,pageContext:cr[H]}};g.addPage=function(){return ps.apply(this,arguments),this},g.setPage=function(){return Ns.apply(this,arguments),se.call(this,Te[H]),this},g.insertPage=function(F){return this.addPage(),this.movePage(H,F),this},g.movePage=function(F,xe){var tt,pt;if(F>xe){tt=Te[F],pt=cr[F];for(var Mt=F;Mt>xe;Mt--)Te[Mt]=Te[Mt-1],cr[Mt]=cr[Mt-1];Te[xe]=tt,cr[xe]=pt,this.setPage(xe)}else if(F<xe){tt=Te[F],pt=cr[F];for(var Wt=F;Wt<xe;Wt++)Te[Wt]=Te[Wt+1],cr[Wt]=cr[Wt+1];Te[xe]=tt,cr[xe]=pt,this.setPage(xe)}return this},g.deletePage=function(){return $s.apply(this,arguments),this},g.__private__.text=g.text=function(F,xe,tt,pt,Mt){var Wt,fn,jn,Hn,pr,Cr,Vr,qi,gi,Ci=(pt=pt||{}).scope||this;if(typeof F=="number"&&typeof xe=="number"&&(typeof tt=="string"||Array.isArray(tt))){var ys=tt;tt=xe,xe=F,F=ys}if(arguments[3]instanceof nr?(N("The transform parameter of text() with a Matrix value"),gi=Mt):(jn=arguments[4],Hn=arguments[5],cs(Vr=arguments[3])==="object"&&Vr!==null||(typeof jn=="string"&&(Hn=jn,jn=null),typeof Vr=="string"&&(Hn=Vr,Vr=null),typeof Vr=="number"&&(jn=Vr,Vr=null),pt={flags:Vr,angle:jn,align:Hn})),isNaN(xe)||isNaN(tt)||F==null)throw new Error("Invalid arguments passed to jsPDF.text");if(F.length===0)return Ci;var Ss="",Qo=!1,Ur=typeof pt.lineHeightFactor=="number"?pt.lineHeightFactor:lu,to=Ci.internal.scaleFactor;function zl(Pi){return Pi=Pi.split("	").join(Array(pt.TabLen||9).join(" ")),qr(Pi,Vr)}function bo(Pi){for(var Ii,bs=Pi.concat(),Ui=[],na=bs.length;na--;)typeof(Ii=bs.shift())=="string"?Ui.push(Ii):Array.isArray(Pi)&&(Ii.length===1||Ii[1]===void 0&&Ii[2]===void 0)?Ui.push(Ii[0]):Ui.push([Ii[0],Ii[1],Ii[2]]);return Ui}function Ou(Pi,Ii){var bs;if(typeof Pi=="string")bs=Ii(Pi)[0];else if(Array.isArray(Pi)){for(var Ui,na,Bo=Pi.concat(),ca=[],nc=Bo.length;nc--;)typeof(Ui=Bo.shift())=="string"?ca.push(Ii(Ui)[0]):Array.isArray(Ui)&&typeof Ui[0]=="string"&&(na=Ii(Ui[0],Ui[1],Ui[2]),ca.push([na[0],na[1],na[2]]));bs=ca}return bs}var Na=!1,tc=!0;if(typeof F=="string")Na=!0;else if(Array.isArray(F)){var wl=F.concat();fn=[];for(var xl,Cs=wl.length;Cs--;)(typeof(xl=wl.shift())!="string"||Array.isArray(xl)&&typeof xl[0]!="string")&&(tc=!1);Na=tc}if(Na===!1)throw new Error('Type of text must be string or Array. "'+F+'" is not recognized.');typeof F=="string"&&(F=F.match(/[\r?\n]/)?F.split(/\r\n|\r|\n/g):[F]);var Ia=Ve/Ci.internal.scaleFactor,ea=Ia*(Ur-1);switch(pt.baseline){case"bottom":tt-=ea;break;case"top":tt+=Ia-ea;break;case"hanging":tt+=Ia-2*ea;break;case"middle":tt+=Ia/2-ea}if((Cr=pt.maxWidth||0)>0&&(typeof F=="string"?F=Ci.splitTextToSize(F,Cr):Object.prototype.toString.call(F)==="[object Array]"&&(F=F.reduce(function(Pi,Ii){return Pi.concat(Ci.splitTextToSize(Ii,Cr))},[]))),Wt={text:F,x:xe,y:tt,options:pt,mutex:{pdfEscape:qr,activeFontKey:at,fonts:yn,activeFontSize:Ve}},Gr.publish("preProcessText",Wt),F=Wt.text,jn=(pt=Wt.options).angle,!(gi instanceof nr)&&jn&&typeof jn=="number"){jn*=Math.PI/180,pt.rotationDirection===0&&(jn=-jn),j===D.ADVANCED&&(jn=-jn);var Io=Math.cos(jn),$l=Math.sin(jn);gi=new nr(Io,$l,-$l,Io,0,0)}else jn&&jn instanceof nr&&(gi=jn);j!==D.ADVANCED||gi||(gi=No),(pr=pt.charSpace||hu)!==void 0&&(Ss+=pe(I(pr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(qi=pt.horizontalScale)!==void 0&&(Ss+=pe(100*qi)+` Tz
`),pt.lang;var no=-1,_o=pt.renderingMode!==void 0?pt.renderingMode:pt.stroke,wo=Ci.internal.getCurrentPageInfo().pageContext;switch(_o){case 0:case!1:case"fill":no=0;break;case 1:case!0:case"stroke":no=1;break;case 2:case"fillThenStroke":no=2;break;case 3:case"invisible":no=3;break;case 4:case"fillAndAddForClipping":no=4;break;case 5:case"strokeAndAddPathForClipping":no=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":no=6;break;case 7:case"addToPathForClipping":no=7}var Tc=wo.usedRenderingMode!==void 0?wo.usedRenderingMode:-1;no!==-1?Ss+=no+` Tr
`:Tc!==-1&&(Ss+=`0 Tr
`),no!==-1&&(wo.usedRenderingMode=no),Hn=pt.align||"left";var Is,Ka=Ve*Ur,ro=Ci.internal.pageSize.getWidth(),io=yn[at];pr=pt.charSpace||hu,Cr=pt.maxWidth||0,Vr=Object.assign({autoencode:!0,noBOM:!0},pt.flags);var Xa=[],Ja=function(Pi){return Ci.getStringUnitWidth(Pi,{font:io,charSpace:pr,fontSize:Ve,doKerning:!1})*Ve/to};if(Object.prototype.toString.call(F)==="[object Array]"){var so;fn=bo(F),Hn!=="left"&&(Is=fn.map(Ja));var Hs,Ba=0;if(Hn==="right"){xe-=Is[0],F=[],Cs=fn.length;for(var ta=0;ta<Cs;ta++)ta===0?(Hs=mr(xe),so=ms(tt)):(Hs=I(Ba-Is[ta]),so=-Ka),F.push([fn[ta],Hs,so]),Ba=Is[ta]}else if(Hn==="center"){xe-=Is[0]/2,F=[],Cs=fn.length;for(var oo=0;oo<Cs;oo++)oo===0?(Hs=mr(xe),so=ms(tt)):(Hs=I((Ba-Is[oo])/2),so=-Ka),F.push([fn[oo],Hs,so]),Ba=Is[oo]}else if(Hn==="left"){F=[],Cs=fn.length;for(var Lt=0;Lt<Cs;Lt++)F.push(fn[Lt])}else if(Hn==="justify"&&io.encoding==="Identity-H"){F=[],Cs=fn.length,Cr=Cr!==0?Cr:ro;for(var Yt=0,Nt=0;Nt<Cs;Nt++)if(so=Nt===0?ms(tt):-Ka,Hs=Nt===0?mr(xe):Yt,Nt<Cs-1){var Rn=I((Cr-Is[Nt])/(fn[Nt].split(" ").length-1)),rr=fn[Nt].split(" ");F.push([rr[0]+" ",Hs,so]),Yt=0;for(var Pr=1;Pr<rr.length;Pr++){var Ki=(Ja(rr[Pr-1]+" "+rr[Pr])-Ja(rr[Pr]))*to+Rn;Pr==rr.length-1?F.push([rr[Pr],Ki,0]):F.push([rr[Pr]+" ",Ki,0]),Yt-=Ki}}else F.push([fn[Nt],Hs,so]);F.push(["",Yt,0])}else{if(Hn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(F=[],Cs=fn.length,Cr=Cr!==0?Cr:ro,Nt=0;Nt<Cs;Nt++)so=Nt===0?ms(tt):-Ka,Hs=Nt===0?mr(xe):0,Nt<Cs-1?Xa.push(pe(I((Cr-Is[Nt])/(fn[Nt].split(" ").length-1)))):Xa.push(0),F.push([fn[Nt],Hs,so])}}var Ei=typeof pt.R2L=="boolean"?pt.R2L:_t;Ei===!0&&(F=Ou(F,function(Pi,Ii,bs){return[Pi.split("").reverse().join(""),Ii,bs]})),Wt={text:F,x:xe,y:tt,options:pt,mutex:{pdfEscape:qr,activeFontKey:at,fonts:yn,activeFontSize:Ve}},Gr.publish("postProcessText",Wt),F=Wt.text,Qo=Wt.mutex.isHex||!1;var pu=yn[at].encoding;pu!=="WinAnsiEncoding"&&pu!=="StandardEncoding"||(F=Ou(F,function(Pi,Ii,bs){return[zl(Pi),Ii,bs]})),fn=bo(F),F=[];for(var xo,Xi,Ra,Qa=0,Fa=1,ja=Array.isArray(fn[0])?Fa:Qa,za="",ti=function(Pi,Ii,bs){var Ui="";return bs instanceof nr?(bs=typeof pt.angle=="number"?Os(bs,new nr(1,0,0,1,Pi,Ii)):Os(new nr(1,0,0,1,Pi,Ii),bs),j===D.ADVANCED&&(bs=Os(new nr(1,0,0,-1,0,0),bs)),Ui=bs.join(" ")+` Tm
`):Ui=pe(Pi)+" "+pe(Ii)+` Td
`,Ui},ba=0;ba<fn.length;ba++){switch(za="",ja){case Fa:Ra=(Qo?"<":"(")+fn[ba][0]+(Qo?">":")"),xo=parseFloat(fn[ba][1]),Xi=parseFloat(fn[ba][2]);break;case Qa:Ra=(Qo?"<":"(")+fn[ba]+(Qo?">":")"),xo=mr(xe),Xi=ms(tt)}Xa!==void 0&&Xa[ba]!==void 0&&(za=Xa[ba]+` Tw
`),ba===0?F.push(za+ti(xo,Xi,gi)+Ra):ja===Qa?F.push(za+Ra):ja===Fa&&F.push(za+ti(xo,Xi,gi)+Ra)}F=ja===Qa?F.join(` Tj
T* `):F.join(` Tj
`),F+=` Tj
`;var Ws=`BT
/`;return Ws+=at+" "+Ve+` Tf
`,Ws+=pe(Ve*Ur)+` TL
`,Ws+=Oa+`
`,Ws+=Ss,Ws+=F,ce(Ws+="ET"),v[at]=!0,Ci};var is=g.__private__.clip=g.clip=function(F){return ce(F==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return is("evenodd")},g.__private__.discardPath=g.discardPath=function(){return ce("n"),this};var Ar=g.__private__.isValidStyle=function(F){var xe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(F)!==-1&&(xe=!0),xe};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(F){return Ar(F)&&(c=F),this};var Ko=g.__private__.getStyle=g.getStyle=function(F){var xe=c;switch(F){case"D":case"S":xe="S";break;case"F":xe="f";break;case"FD":case"DF":xe="B";break;case"f":case"f*":case"B":case"B*":xe=F}return xe},Aa=g.close=function(){return ce("h"),this};g.stroke=function(){return ce("S"),this},g.fill=function(F){return Ta("f",F),this},g.fillEvenOdd=function(F){return Ta("f*",F),this},g.fillStroke=function(F){return Ta("B",F),this},g.fillStrokeEvenOdd=function(F){return Ta("B*",F),this};var Ta=function(F,xe){cs(xe)==="object"?_l(xe,F):ce(F)},Xo=function(F){F===null||j===D.ADVANCED&&F===void 0||(F=Ko(F),ce(F))};function la(F,xe,tt,pt,Mt){var Wt=new hp(xe||this.boundingBox,tt||this.xStep,pt||this.yStep,this.gState,Mt||this.matrix);Wt.stream=this.stream;var fn=F+"$$"+this.cloneIndex+++"$$";return lt(fn,Wt),Wt}var _l=function(F,xe){var tt=Cn[F.key],pt=Qt[tt];if(pt instanceof of)ce("q"),ce(Da(xe)),pt.gState&&g.setGState(pt.gState),ce(F.matrix.toString()+" cm"),ce("/"+tt+" sh"),ce("Q");else if(pt instanceof hp){var Mt=new nr(1,0,0,-1,0,Za());F.matrix&&(Mt=Mt.multiply(F.matrix||No),tt=la.call(pt,F.key,F.boundingBox,F.xStep,F.yStep,Mt).id),ce("q"),ce("/Pattern cs"),ce("/"+tt+" scn"),pt.gState&&g.setGState(pt.gState),ce(xe),ce("Q")}},Da=function(F){switch(F){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Er=g.moveTo=function(F,xe){return ce(pe(I(F))+" "+pe(z(xe))+" m"),this},Kn=g.lineTo=function(F,xe){return ce(pe(I(F))+" "+pe(z(xe))+" l"),this},eo=g.curveTo=function(F,xe,tt,pt,Mt,Wt){return ce([pe(I(F)),pe(z(xe)),pe(I(tt)),pe(z(pt)),pe(I(Mt)),pe(z(Wt)),"c"].join(" ")),this};g.__private__.line=g.line=function(F,xe,tt,pt,Mt){if(isNaN(F)||isNaN(xe)||isNaN(tt)||isNaN(pt)||!Ar(Mt))throw new Error("Invalid arguments passed to jsPDF.line");return j===D.COMPAT?this.lines([[tt-F,pt-xe]],F,xe,[1,1],Mt||"S"):this.lines([[tt-F,pt-xe]],F,xe,[1,1]).stroke()},g.__private__.lines=g.lines=function(F,xe,tt,pt,Mt,Wt){var fn,jn,Hn,pr,Cr,Vr,qi,gi,Ci,ys,Ss,Qo;if(typeof F=="number"&&(Qo=tt,tt=xe,xe=F,F=Qo),pt=pt||[1,1],Wt=Wt||!1,isNaN(xe)||isNaN(tt)||!Array.isArray(F)||!Array.isArray(pt)||!Ar(Mt)||typeof Wt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Er(xe,tt),fn=pt[0],jn=pt[1],pr=F.length,ys=xe,Ss=tt,Hn=0;Hn<pr;Hn++)(Cr=F[Hn]).length===2?(ys=Cr[0]*fn+ys,Ss=Cr[1]*jn+Ss,Kn(ys,Ss)):(Vr=Cr[0]*fn+ys,qi=Cr[1]*jn+Ss,gi=Cr[2]*fn+ys,Ci=Cr[3]*jn+Ss,ys=Cr[4]*fn+ys,Ss=Cr[5]*jn+Ss,eo(Vr,qi,gi,Ci,ys,Ss));return Wt&&Aa(),Xo(Mt),this},g.path=function(F){for(var xe=0;xe<F.length;xe++){var tt=F[xe],pt=tt.c;switch(tt.op){case"m":Er(pt[0],pt[1]);break;case"l":Kn(pt[0],pt[1]);break;case"c":eo.apply(this,pt);break;case"h":Aa()}}return this},g.__private__.rect=g.rect=function(F,xe,tt,pt,Mt){if(isNaN(F)||isNaN(xe)||isNaN(tt)||isNaN(pt)||!Ar(Mt))throw new Error("Invalid arguments passed to jsPDF.rect");return j===D.COMPAT&&(pt=-pt),ce([pe(I(F)),pe(z(xe)),pe(I(tt)),pe(I(pt)),"re"].join(" ")),Xo(Mt),this},g.__private__.triangle=g.triangle=function(F,xe,tt,pt,Mt,Wt,fn){if(isNaN(F)||isNaN(xe)||isNaN(tt)||isNaN(pt)||isNaN(Mt)||isNaN(Wt)||!Ar(fn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[tt-F,pt-xe],[Mt-tt,Wt-pt],[F-Mt,xe-Wt]],F,xe,[1,1],fn,!0),this},g.__private__.roundedRect=g.roundedRect=function(F,xe,tt,pt,Mt,Wt,fn){if(isNaN(F)||isNaN(xe)||isNaN(tt)||isNaN(pt)||isNaN(Mt)||isNaN(Wt)||!Ar(fn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var jn=4/3*(Math.SQRT2-1);return Mt=Math.min(Mt,.5*tt),Wt=Math.min(Wt,.5*pt),this.lines([[tt-2*Mt,0],[Mt*jn,0,Mt,Wt-Wt*jn,Mt,Wt],[0,pt-2*Wt],[0,Wt*jn,-Mt*jn,Wt,-Mt,Wt],[2*Mt-tt,0],[-Mt*jn,0,-Mt,-Wt*jn,-Mt,-Wt],[0,2*Wt-pt],[0,-Wt*jn,Mt*jn,-Wt,Mt,-Wt]],F+Mt,xe,[1,1],fn,!0),this},g.__private__.ellipse=g.ellipse=function(F,xe,tt,pt,Mt){if(isNaN(F)||isNaN(xe)||isNaN(tt)||isNaN(pt)||!Ar(Mt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Wt=4/3*(Math.SQRT2-1)*tt,fn=4/3*(Math.SQRT2-1)*pt;return Er(F+tt,xe),eo(F+tt,xe-fn,F+Wt,xe-pt,F,xe-pt),eo(F-Wt,xe-pt,F-tt,xe-fn,F-tt,xe),eo(F-tt,xe+fn,F-Wt,xe+pt,F,xe+pt),eo(F+Wt,xe+pt,F+tt,xe+fn,F+tt,xe),Xo(Mt),this},g.__private__.circle=g.circle=function(F,xe,tt,pt){if(isNaN(F)||isNaN(xe)||isNaN(tt)||!Ar(pt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(F,xe,tt,tt,pt)},g.setFont=function(F,xe,tt){return tt&&(xe=ge(xe,tt)),at=Qs(F,xe,{disableWarning:!1}),this};var yo=g.__private__.getFont=g.getFont=function(){return yn[Qs.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var F,xe,tt={};for(F in Dn)if(Dn.hasOwnProperty(F))for(xe in tt[F]=[],Dn[F])Dn[F].hasOwnProperty(xe)&&tt[F].push(xe);return tt},g.addFont=function(F,xe,tt,pt,Mt){var Wt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Wt.indexOf(arguments[3])!==-1?Mt=arguments[3]:arguments[3]&&Wt.indexOf(arguments[3])==-1&&(tt=ge(tt,pt)),Mt=Mt||"Identity-H",hr.call(this,F,xe,tt,Mt)};var lu,Au=t.lineWidth||.200025,Bl=g.__private__.getLineWidth=g.getLineWidth=function(){return Au},uu=g.__private__.setLineWidth=g.setLineWidth=function(F){return Au=F,ce(pe(I(F))+" w"),this};g.__private__.setLineDash=Or.API.setLineDash=Or.API.setLineDashPattern=function(F,xe){if(F=F||[],xe=xe||0,isNaN(xe)||!Array.isArray(F))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return F=F.map(function(tt){return pe(I(tt))}).join(" "),xe=pe(I(xe)),ce("["+F+"] "+xe+" d"),this};var Tu=g.__private__.getLineHeight=g.getLineHeight=function(){return Ve*lu};g.__private__.getLineHeight=g.getLineHeight=function(){return Ve*lu};var ei=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(F){return typeof(F=F||1.15)=="number"&&(lu=F),this},gs=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return lu};ei(t.lineHeight);var mr=g.__private__.getHorizontalCoordinate=function(F){return I(F)},ms=g.__private__.getVerticalCoordinate=function(F){return j===D.ADVANCED?F:cr[H].mediaBox.topRightY-cr[H].mediaBox.bottomLeftY-I(F)},Rl=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(F){return pe(mr(F))},Ya=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(F){return pe(ms(F))},Zi=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Jn(Zi)},g.__private__.setStrokeColor=g.setDrawColor=function(F,xe,tt,pt){return Zi=Ct({ch1:F,ch2:xe,ch3:tt,ch4:pt,pdfColorType:"draw",precision:2}),ce(Zi),this};var Du=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Jn(Du)},g.__private__.setFillColor=g.setFillColor=function(F,xe,tt,pt){return Du=Ct({ch1:F,ch2:xe,ch3:tt,ch4:pt,pdfColorType:"fill",precision:2}),ce(Du),this};var Oa=t.textColor||"0 g",cu=g.__private__.getTextColor=g.getTextColor=function(){return Jn(Oa)};g.__private__.setTextColor=g.setTextColor=function(F,xe,tt,pt){return Oa=Ct({ch1:F,ch2:xe,ch3:tt,ch4:pt,pdfColorType:"text",precision:3}),this};var hu=t.charSpace,ua=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(hu||0)};g.__private__.setCharSpace=g.setCharSpace=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return hu=F,this};var du=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(F){var xe=g.CapJoinStyles[F];if(xe===void 0)throw new Error("Line cap style of '"+F+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return du=xe,ce(xe+" J"),this};var Li=0;g.__private__.setLineJoin=g.setLineJoin=function(F){var xe=g.CapJoinStyles[F];if(xe===void 0)throw new Error("Line join style of '"+F+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Li=xe,ce(xe+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(F){if(F=F||0,isNaN(F))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ce(pe(I(F))+" M"),this},g.GState=Kv,g.setGState=function(F){(F=typeof F=="string"?Mn[tr[F]]:Ac(null,F)).equals(yr)||(ce("/"+F.id+" gs"),yr=F)};var Ac=function(F,xe){if(!F||!tr[F]){var tt=!1;for(var pt in Mn)if(Mn.hasOwnProperty(pt)&&Mn[pt].equals(xe)){tt=!0;break}if(tt)xe=Mn[pt];else{var Mt="GS"+(Object.keys(Mn).length+1).toString(10);Mn[Mt]=xe,xe.id=Mt}return F&&(tr[F]=xe.id),Gr.publish("addGState",xe),xe}};g.addGState=function(F,xe){return Ac(F,xe),this},g.saveGraphicsState=function(){return ce("q"),er.push({key:at,size:Ve,color:Oa}),this},g.restoreGraphicsState=function(){ce("Q");var F=er.pop();return at=F.key,Ve=F.size,Oa=F.color,yr=null,this},g.setCurrentTransformationMatrix=function(F){return ce(F.toString()+" cm"),this},g.comment=function(F){return ce("#"+F),this};var Us=function(F,xe){var tt=F||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return tt},set:function(Wt){isNaN(Wt)||(tt=parseFloat(Wt))}});var pt=xe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return pt},set:function(Wt){isNaN(Wt)||(pt=parseFloat(Wt))}});var Mt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Mt},set:function(Wt){Mt=Wt.toString()}}),this},va=function(F,xe,tt,pt){Us.call(this,F,xe),this.type="rect";var Mt=tt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Mt},set:function(fn){isNaN(fn)||(Mt=parseFloat(fn))}});var Wt=pt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Wt},set:function(fn){isNaN(fn)||(Wt=parseFloat(fn))}}),this},fu=function(){this.page=xr,this.currentPage=H,this.pages=Te.slice(0),this.pagesContext=cr.slice(0),this.x=zt,this.y=Kt,this.matrix=Nn,this.width=Si(H),this.height=Za(H),this.outputDestination=de,this.id="",this.objectNumber=-1};fu.prototype.restore=function(){xr=this.page,H=this.currentPage,cr=this.pagesContext,Te=this.pages,zt=this.x,Kt=this.y,Nn=this.matrix,Jo(H,this.width),vs(H,this.height),de=this.outputDestination};var ya=function(F,xe,tt,pt,Mt){Ds.push(new fu),xr=H=0,Te=[],zt=F,Kt=xe,Nn=Mt,ui([tt,pt])},Fl=function(F){if(Oo[F])Ds.pop().restore();else{var xe=new fu,tt="Xo"+(Object.keys(Ai).length+1).toString(10);xe.id=tt,Oo[F]=tt,Ai[tt]=xe,Gr.publish("addFormObject",xe),Ds.pop().restore()}};for(var jl in g.beginFormObject=function(F,xe,tt,pt,Mt){return ya(F,xe,tt,pt,Mt),this},g.endFormObject=function(F){return Fl(F),this},g.doFormObject=function(F,xe){var tt=Ai[Oo[F]];return ce("q"),ce(xe.toString()+" cm"),ce("/"+tt.id+" Do"),ce("Q"),this},g.getFormObject=function(F){var xe=Ai[Oo[F]];return{x:xe.x,y:xe.y,width:xe.width,height:xe.height,matrix:xe.matrix}},g.save=function(F,xe){return F=F||"generated.pdf",(xe=xe||{}).returnPromise=xe.returnPromise||!1,xe.returnPromise===!1?(ef(hs(Fr()),F),typeof ef.unload=="function"&&Rr.setTimeout&&setTimeout(ef.unload,911),this):new Promise(function(tt,pt){try{var Mt=ef(hs(Fr()),F);typeof ef.unload=="function"&&Rr.setTimeout&&setTimeout(ef.unload,911),tt(Mt)}catch(Wt){pt(Wt.message)}})},Or.API)Or.API.hasOwnProperty(jl)&&(jl==="events"&&Or.API.events.length?function(F,xe){var tt,pt,Mt;for(Mt=xe.length-1;Mt!==-1;Mt--)tt=xe[Mt][0],pt=xe[Mt][1],F.subscribe.apply(F,[tt].concat(typeof pt=="function"?[pt]:pt))}(Gr,Or.API.events):g[jl]=Or.API[jl]);var Si=g.getPageWidth=function(F){return(cr[F=F||H].mediaBox.topRightX-cr[F].mediaBox.bottomLeftX)/it},Jo=g.setPageWidth=function(F,xe){cr[F].mediaBox.topRightX=xe*it+cr[F].mediaBox.bottomLeftX},Za=g.getPageHeight=function(F){return(cr[F=F||H].mediaBox.topRightY-cr[F].mediaBox.bottomLeftY)/it},vs=g.setPageHeight=function(F,xe){cr[F].mediaBox.topRightY=xe*it+cr[F].mediaBox.bottomLeftY};return g.internal={pdfEscape:qr,getStyle:Ko,getFont:yo,getFontSize:Ze,getCharSpace:ua,getTextColor:cu,getLineHeight:Tu,getLineHeightFactor:gs,getLineWidth:Bl,write:ze,getHorizontalCoordinate:mr,getVerticalCoordinate:ms,getCoordinateString:Rl,getVerticalCoordinateString:Ya,collections:{},newObject:Re,newAdditionalObject:Un,newObjectDeferred:ft,newObjectDeferredBegin:En,getFilters:Ht,putStream:Ln,events:Gr,scaleFactor:it,pageSize:{getWidth:function(){return Si(H)},setWidth:function(F){Jo(H,F)},getHeight:function(){return Za(H)},setHeight:function(F){vs(H,F)}},encryptionOptions:d,encryption:ds,getEncryptor:ka,output:Vs,getNumberOfPages:dr,pages:Te,out:ce,f2:Z,f3:B,getPageInfo:bl,getPageInfoByObjId:Vn,getCurrentPageInfo:Sr,getPDFVersion:E,Point:Us,Rectangle:va,Matrix:nr,hasHotfix:aa},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Si(H)},set:function(F){Jo(H,F)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Za(H)},set:function(F){vs(H,F)},enumerable:!0,configurable:!0}),Pn.call(g,ve),at="F1",ps(i,n),Gr.publish("initialized"),g}ap.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},ap.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ap.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},ap.prototype.processOwnerPassword=function(t,e){return Db(Tb(e).substr(0,5),t)},ap.prototype.encryptor=function(t,e){var n=Tb(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Db(n,r)}},Kv.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||cs(t)!==cs(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},Or.API={events:[]},Or.version="2.5.2";var Po=Or.API,H_=1,Ef=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zf=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Zr=function(t){return t.toFixed(2)},Qh=function(t){return t.toFixed(5)};Po.__acroform__={};var au=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},E5=function(t){return t*H_},zc=function(t){var e=new eP,n=ir.internal.getHeight(t)||0,r=ir.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Zr(r)),Number(Zr(n))],e},TH=Po.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},DH=Po.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},OH=Po.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Uo=Po.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return OH(t,e-1)},Ho=Po.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return TH(t,e-1)},Wo=Po.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return DH(t,e-1)},NH=Po.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(Zr(l.lowerLeft_X)),Number(Zr(l.lowerLeft_Y)),Number(Zr(l.upperRight_X)),Number(Zr(l.upperRight_Y))]},IH=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=Ob(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Zr(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=zc(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},Ob=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(B){return B.split(`
`)}):i.map(function(B){return[B]});var s=n,o=ir.internal.getHeight(t)||0;o=o<0?-o:o;var a=ir.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(B,I,R){if(B+1<i.length){var z=I+" "+i[B+1][0];return S0(z,t,R).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,d,p=S0("3",t,s).height,v=t.multiline?o-s:(o-p)/2,g=v+=2,x=0,E=0,k=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+S0(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var A="",D=0,j=0;j<i.length;j++)if(i.hasOwnProperty(j)){var Y=!1;if(i[j].length!==1&&k!==i[j].length-1){if((p+2)*(D+2)+2>o)continue e;A+=i[j][k],Y=!0,E=j,j--}else{A=(A+=i[j][k]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var te=parseInt(j),ge=l(te,A,s),pe=j>=i.length-1;if(ge&&!pe){A+=" ",k=0;continue}if(ge||pe){if(pe)E=te;else if(t.multiline&&(p+2)*(D+2)+2>o)continue e}else{if(!t.multiline||(p+2)*(D+2)+2>o)continue e;E=te}}for(var N="",$=x;$<=E;$++){var Z=i[$];if(t.multiline){if($===E){N+=Z[k]+" ",k=(k+1)%Z.length;continue}if($===x){N+=Z[Z.length-1]+" ";continue}}N+=Z[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,d=S0(N,t,s).width,t.textAlign){case"right":c=a-d-2;break;case"center":c=(a-d)/2;break;case"left":default:c=2}e+=Zr(c)+" "+Zr(g)+` Td
`,e+="("+Ef(N)+`) Tj
`,e+=-Zr(c)+` 0 Td
`,g=-(s+2),d=0,x=Y?E:E+1,D++,A=""}break}return r.text=e,r.fontSize=s,r},S0=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},BH={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},RH=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},FH=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),cs(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},jH=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Mc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(BH)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");H_=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new tP,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&RH(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=NH(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=ir.createDefaultAppearanceStream(a),cs(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var d=IH(a);l.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(a.appearanceStreamContent){var p="";for(var v in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(v)){var g=a.appearanceStreamContent[v];if(p+="/"+v+" ",p+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var o in g)if(g.hasOwnProperty(o)){var x=g[o];typeof x=="function"&&(x=x.call(i,a)),p+="/"+o+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=g)=="function"&&(x=x.call(i,a)),p+="/"+o+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&FH(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},QE=Po.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),cs(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Ef(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},l2=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Ef(r(t))+")"},Kc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Kc.prototype.toString=function(){return this.objId+" 0 R"},Kc.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Kc.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:QE(i,this.objId,this.scope)}):i instanceof Kc?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var eP=function(){Kc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};au(eP,Kc);var tP=function(){Kc.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Ef(n(t))+")"}},set:function(n){t=n}})};au(tP,Kc);var Mc=function t(){Kc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');e=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Uo(e,3)},set:function(A){A?this.F=Ho(e,3):this.F=Wo(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');n=A}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(A){r=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(A){r[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(A){r[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(A){r[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(A){r[3]=A}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Xv)return;s="FieldObject"+t.FieldNum++}var A=function(D){return D};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+Ef(A(s))+")"},set:function(A){s=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(A){s=A}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(A){o=A}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(A){a=A}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(A){l=A}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/H_:c},set:function(A){c=A}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(A){d=A}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Xv||this instanceof pf))return l2(p,this.objId,this.scope)},set:function(A){A=A.toString(),p=A}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Sa?v:l2(v,this.objId,this.scope)},set:function(A){A=A.toString(),v=this instanceof Sa?A:A.substr(0,1)==="("?Zf(A.substr(1,A.length-2)):Zf(A)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Sa?Zf(v.substr(1,v.length-1)):v},set:function(A){A=A.toString(),v=this instanceof Sa?"/"+A:A}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Sa?g:l2(g,this.objId,this.scope)},set:function(A){A=A.toString(),g=this instanceof Sa?A:A.substr(0,1)==="("?Zf(A.substr(1,A.length-2)):Zf(A)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Sa?Zf(g.substr(1,g.length-1)):g},set:function(A){A=A.toString(),g=this instanceof Sa?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(A){A=!!A,E=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(A){x=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,1)},set:function(A){A?this.Ff=Ho(this.Ff,1):this.Ff=Wo(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,2)},set:function(A){A?this.Ff=Ho(this.Ff,2):this.Ff=Wo(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,3)},set:function(A){A?this.Ff=Ho(this.Ff,3):this.Ff=Wo(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');k=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(k){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:k=2;break;case"center":case 1:k=1;break;case"left":case 0:default:k=0}}})};au(Mc,Kc);var bp=function(){Mc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return QE(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,18)},set:function(n){n?this.Ff=Ho(this.Ff,18):this.Ff=Wo(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Ho(this.Ff,19):this.Ff=Wo(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,20)},set:function(n){n?(this.Ff=Ho(this.Ff,20),e.sort()):this.Ff=Wo(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,22)},set:function(n){n?this.Ff=Ho(this.Ff,22):this.Ff=Wo(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,23)},set:function(n){n?this.Ff=Ho(this.Ff,23):this.Ff=Wo(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,27)},set:function(n){n?this.Ff=Ho(this.Ff,27):this.Ff=Wo(this.Ff,27)}}),this.hasAppearanceStream=!1};au(bp,Mc);var _p=function(){bp.call(this),this.fontName="helvetica",this.combo=!1};au(_p,bp);var wp=function(){_p.call(this),this.combo=!0};au(wp,_p);var av=function(){wp.call(this),this.edit=!0};au(av,wp);var Sa=function(){Mc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,15)},set:function(n){n?this.Ff=Ho(this.Ff,15):this.Ff=Wo(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,16)},set:function(n){n?this.Ff=Ho(this.Ff,16):this.Ff=Wo(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,17)},set:function(n){n?this.Ff=Ho(this.Ff,17):this.Ff=Wo(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,26)},set:function(n){n?this.Ff=Ho(this.Ff,26):this.Ff=Wo(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Ef(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){cs(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};au(Sa,Mc);var lv=function(){Sa.call(this),this.pushButton=!0};au(lv,Sa);var xp=function(){Sa.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};au(xp,Sa);var Xv=function(){var t,e;Mc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Ef(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){cs(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ir.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};au(Xv,Mc),xp.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},xp.prototype.createOption=function(t){var e=new Xv;return e.Parent=this,e.optionName=t,this.Kids.push(e),zH.call(this.scope,e),e};var uv=function(){Sa.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ir.CheckBox.createAppearanceStream()};au(uv,Sa);var pf=function(){Mc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,13)},set:function(e){e?this.Ff=Ho(this.Ff,13):this.Ff=Wo(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,21)},set:function(e){e?this.Ff=Ho(this.Ff,21):this.Ff=Wo(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,23)},set:function(e){e?this.Ff=Ho(this.Ff,23):this.Ff=Wo(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,24)},set:function(e){e?this.Ff=Ho(this.Ff,24):this.Ff=Wo(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,25)},set:function(e){e?this.Ff=Ho(this.Ff,25):this.Ff=Wo(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,26)},set:function(e){e?this.Ff=Ho(this.Ff,26):this.Ff=Wo(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};au(pf,Mc);var cv=function(){pf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,14)},set:function(t){t?this.Ff=Ho(this.Ff,14):this.Ff=Wo(this.Ff,14)}}),this.password=!0};au(cv,pf);var ir={CheckBox:{createAppearanceStream:function(){return{N:{On:ir.CheckBox.YesNormal},D:{On:ir.CheckBox.YesPushDown,Off:ir.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=zc(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=Ob(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Zr(ir.internal.getWidth(t))+" "+Zr(ir.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Zr(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=zc(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=ir.internal.getHeight(t),o=ir.internal.getWidth(t),a=Ob(t,t.caption);return i.push("1 g"),i.push("0 0 "+Zr(o)+" "+Zr(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Zr(o-1)+" "+Zr(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Zr(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=zc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Zr(ir.internal.getWidth(t))+" "+Zr(ir.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:ir.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=ir.RadioButton.Circle.YesNormal,e.D[t]=ir.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=zc(t);e.scope=t.scope;var n=[],r=ir.internal.getWidth(t)<=ir.internal.getHeight(t)?ir.internal.getWidth(t)/4:ir.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=ir.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Qh(ir.internal.getWidth(t)/2)+" "+Qh(ir.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=zc(t);e.scope=t.scope;var n=[],r=ir.internal.getWidth(t)<=ir.internal.getHeight(t)?ir.internal.getWidth(t)/4:ir.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*ir.internal.Bezier_C).toFixed(5)),o=Number((r*ir.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Qh(ir.internal.getWidth(t)/2)+" "+Qh(ir.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Qh(ir.internal.getWidth(t)/2)+" "+Qh(ir.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=zc(t);e.scope=t.scope;var n=[],r=ir.internal.getWidth(t)<=ir.internal.getHeight(t)?ir.internal.getWidth(t)/4:ir.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*ir.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Qh(ir.internal.getWidth(t)/2)+" "+Qh(ir.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:ir.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=ir.RadioButton.Cross.YesNormal,e.D[t]=ir.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=zc(t);e.scope=t.scope;var n=[],r=ir.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Zr(ir.internal.getWidth(t)-2)+" "+Zr(ir.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Zr(r.x1.x)+" "+Zr(r.x1.y)+" m"),n.push(Zr(r.x2.x)+" "+Zr(r.x2.y)+" l"),n.push(Zr(r.x4.x)+" "+Zr(r.x4.y)+" m"),n.push(Zr(r.x3.x)+" "+Zr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=zc(t);e.scope=t.scope;var n=ir.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Zr(ir.internal.getWidth(t))+" "+Zr(ir.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Zr(ir.internal.getWidth(t)-2)+" "+Zr(ir.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Zr(n.x1.x)+" "+Zr(n.x1.y)+" m"),r.push(Zr(n.x2.x)+" "+Zr(n.x2.y)+" l"),r.push(Zr(n.x4.x)+" "+Zr(n.x4.y)+" m"),r.push(Zr(n.x3.x)+" "+Zr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=zc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Zr(ir.internal.getWidth(t))+" "+Zr(ir.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};ir.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=ir.internal.getWidth(t),n=ir.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},ir.internal.getWidth=function(t){var e=0;return cs(t)==="object"&&(e=E5(t.Rect[2])),e},ir.internal.getHeight=function(t){var e=0;return cs(t)==="object"&&(e=E5(t.Rect[3])),e};var zH=Po.addField=function(t){if(jH(this,t),!(t instanceof Mc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Po.AcroFormChoiceField=bp,Po.AcroFormListBox=_p,Po.AcroFormComboBox=wp,Po.AcroFormEditBox=av,Po.AcroFormButton=Sa,Po.AcroFormPushButton=lv,Po.AcroFormRadioButton=xp,Po.AcroFormCheckBox=uv,Po.AcroFormTextField=pf,Po.AcroFormPasswordField=cv,Po.AcroFormAppearance=ir,Po.AcroForm={ChoiceField:bp,ListBox:_p,ComboBox:wp,EditBox:av,Button:Sa,PushButton:lv,RadioButton:xp,CheckBox:uv,TextField:pf,PasswordField:cv,Appearance:ir},Or.AcroForm={ChoiceField:bp,ListBox:_p,ComboBox:wp,EditBox:av,Button:Sa,PushButton:lv,RadioButton:xp,CheckBox:uv,TextField:pf,PasswordField:cv,Appearance:ir};Or.AcroForm;function nP(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(B,I){var R,z,U,V,re,Q=e;if((I=I||e)==="RGBA"||B.data!==void 0&&B.data instanceof Uint8ClampedArray&&"height"in B&&"width"in B)return"RGBA";if(ge(B))for(re in n)for(U=n[re],R=0;R<U.length;R+=1){for(V=!0,z=0;z<U[R].length;z+=1)if(U[R][z]!==void 0&&U[R][z]!==B[z]){V=!1;break}if(V===!0){Q=re;break}}else for(re in n)for(U=n[re],R=0;R<U.length;R+=1){for(V=!0,z=0;z<U[R].length;z+=1)if(U[R][z]!==void 0&&U[R][z]!==B.charCodeAt(z)){V=!1;break}if(V===!0){Q=re;break}}return Q===e&&I!==e&&(Q=I),Q},i=function B(I){for(var R=this.internal.write,z=this.internal.putStream,U=(0,this.internal.getFilters)();U.indexOf("FlateEncode")!==-1;)U.splice(U.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:I.width}),V.push({key:"Height",value:I.height}),I.colorSpace===k.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===k.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var re="",Q=0,_e=I.transparency.length;Q<_e;Q++)re+=I.transparency[Q]+" "+I.transparency[Q]+" ";V.push({key:"Mask",value:"["+re+"]"})}I.sMask!==void 0&&V.push({key:"SMask",value:I.objectId+1+" 0 R"});var we=I.filter!==void 0?["/"+I.filter]:void 0;if(z({data:I.data,additionalKeyValues:V,alreadyAppliedFilters:we,objectId:I.objectId}),R("endobj"),"sMask"in I&&I.sMask!==void 0){var Qe="/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,ae={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:Qe,data:I.sMask};"filter"in I&&(ae.filter=I.filter),B.call(this,ae)}if(I.colorSpace===k.INDEXED){var H=this.internal.newObject();z({data:N(new Uint8Array(I.palette)),objectId:H}),R("endobj")}},s=function(){var B=this.internal.collections.addImage_images;for(var I in B)i.call(this,B[I])},o=function(){var B,I=this.internal.collections.addImage_images,R=this.internal.write;for(var z in I)R("/I"+(B=I[z]).index,B.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var B=this.internal.collections.addImage_images;return a.call(this),B},c=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(B){return typeof t["process"+B.toUpperCase()]=="function"},p=function(B){return cs(B)==="object"&&B.nodeType===1},v=function(B,I){if(B.nodeName==="IMG"&&B.hasAttribute("src")){var R=""+B.getAttribute("src");if(R.indexOf("data:image/")===0)return Gg(unescape(R).split("base64,").pop());var z=t.loadFile(R,!0);if(z!==void 0)return z}if(B.nodeName==="CANVAS"){if(B.width===0||B.height===0)throw new Error("Given canvas must have data. Canvas width: "+B.width+", height: "+B.height);var U;switch(I){case"PNG":U="image/png";break;case"WEBP":U="image/webp";break;case"JPEG":case"JPG":default:U="image/jpeg"}return Gg(B.toDataURL(U,1).split("base64,").pop())}},g=function(B){var I=this.internal.collections.addImage_images;if(I){for(var R in I)if(B===I[R].alias)return I[R]}},x=function(B,I,R){return B||I||(B=-96,I=-96),B<0&&(B=-1*R.width*72/B/this.internal.scaleFactor),I<0&&(I=-1*R.height*72/I/this.internal.scaleFactor),B===0&&(B=I*R.width/R.height),I===0&&(I=B*R.height/R.width),[B,I]},E=function(B,I,R,z,U,V){var re=x.call(this,R,z,U),Q=this.internal.getCoordinateString,_e=this.internal.getVerticalCoordinateString,we=l.call(this);if(R=re[0],z=re[1],we[U.index]=U,V){V*=Math.PI/180;var Qe=Math.cos(V),ae=Math.sin(V),H=function(me){return me.toFixed(4)},K=[H(Qe),H(ae),H(-1*ae),H(Qe),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,Q(B),_e(I+z),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([Q(R),"0","0",Q(z),"0","0","cm"].join(" "))):this.internal.write([Q(R),"0","0",Q(z),Q(B),_e(I+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+U.index+" Do"),this.internal.write("Q")},k=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var A=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=t.__addimage__.sHashCode=function(B){var I,R,z=0;if(typeof B=="string")for(R=B.length,I=0;I<R;I++)z=(z<<5)-z+B.charCodeAt(I),z|=0;else if(ge(B))for(R=B.byteLength/2,I=0;I<R;I++)z=(z<<5)-z+B[I],z|=0;return z},j=t.__addimage__.validateStringAsBase64=function(B){(B=B||"").toString().trim();var I=!0;return B.length===0&&(I=!1),B.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(B.substr(0,B.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(B.substr(-2))===!1&&(I=!1),I},Y=t.__addimage__.extractImageFromDataUrl=function(B){var I=(B=B||"").split("base64,"),R=null;if(I.length===2){var z=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(I[0]);Array.isArray(z)&&(R={mimeType:z[1],charset:z[2],data:I[1]})}return R},te=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(B){return te()&&B instanceof ArrayBuffer};var ge=t.__addimage__.isArrayBufferView=function(B){return te()&&typeof Uint32Array<"u"&&(B instanceof Int8Array||B instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&B instanceof Uint8ClampedArray||B instanceof Int16Array||B instanceof Uint16Array||B instanceof Int32Array||B instanceof Uint32Array||B instanceof Float32Array||B instanceof Float64Array)},pe=t.__addimage__.binaryStringToUint8Array=function(B){for(var I=B.length,R=new Uint8Array(I),z=0;z<I;z++)R[z]=B.charCodeAt(z);return R},N=t.__addimage__.arrayBufferToBinaryString=function(B){for(var I="",R=ge(B)?B:new Uint8Array(B),z=0;z<R.length;z+=8192)I+=String.fromCharCode.apply(null,R.subarray(z,z+8192));return I};t.addImage=function(){var B,I,R,z,U,V,re,Q,_e;if(typeof arguments[1]=="number"?(I=e,R=arguments[1],z=arguments[2],U=arguments[3],V=arguments[4],re=arguments[5],Q=arguments[6],_e=arguments[7]):(I=arguments[1],R=arguments[2],z=arguments[3],U=arguments[4],V=arguments[5],re=arguments[6],Q=arguments[7],_e=arguments[8]),cs(B=arguments[0])==="object"&&!p(B)&&"imageData"in B){var we=B;B=we.imageData,I=we.format||I||e,R=we.x||R||0,z=we.y||z||0,U=we.w||we.width||U,V=we.h||we.height||V,re=we.alias||re,Q=we.compression||Q,_e=we.rotation||we.angle||_e}var Qe=this.internal.getFilters();if(Q===void 0&&Qe.indexOf("FlateEncode")!==-1&&(Q="SLOW"),isNaN(R)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var ae=$.call(this,B,I,re,Q);return E.call(this,R,z,U,V,ae,_e),this};var $=function(B,I,R,z){var U,V,re;if(typeof B=="string"&&r(B)===e){B=unescape(B);var Q=Z(B,!1);(Q!==""||(Q=t.loadFile(B,!0))!==void 0)&&(B=Q)}if(p(B)&&(B=v(B,I)),I=r(B,I),!d(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((re=R)==null||re.length===0)&&(R=function(_e){return typeof _e=="string"||ge(_e)?D(_e):ge(_e.data)?D(_e.data):null}(B)),(U=g.call(this,R))||(te()&&(B instanceof Uint8Array||I==="RGBA"||(V=B,B=pe(B))),U=this["process"+I.toUpperCase()](B,c.call(this),R,function(_e){return _e&&typeof _e=="string"&&(_e=_e.toUpperCase()),_e in t.image_compression?_e:A.NONE}(z),V)),!U)throw new Error("An unknown error occurred whilst processing the image.");return U},Z=t.__addimage__.convertBase64ToBinaryString=function(B,I){var R;I=typeof I!="boolean"||I;var z,U="";if(typeof B=="string"){z=(R=Y(B))!==null?R.data:B;try{U=Gg(z)}catch(V){if(I)throw j(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return U};t.getImageProperties=function(B){var I,R,z="";if(p(B)&&(B=v(B)),typeof B=="string"&&r(B)===e&&((z=Z(B,!1))===""&&(z=t.loadFile(B)||""),B=z),R=r(B),!d(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(!te()||B instanceof Uint8Array||(B=pe(B)),!(I=this["process"+R.toUpperCase()](B)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=R,I}})(Or.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Or.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,d=!1,p=0;p<c.length&&!d;p++)switch((r=c[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var v=0;v<c.length;v++){r=c[v];var g=this.internal.pdfEscape,x=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(E.objId),D=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+g(A(r.contents))+")",s+=" /Popup "+k.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+g(A(D))+") >>",E.content=s;var j=E.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+j,r.open&&(s+=" /Open true"),s+=" >>",k.content=s,this.internal.write(E.objId,"0 R",k.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var Y=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(x(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Y+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var te=this.annotations._nameMap[r.options.name];r.options.pageNumber=te.page,r.options.top=te.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(x(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ge=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+ge+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var d=this.splitTextToSize(n,a).length;o=Math.ceil(c*d)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Or.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(E){return e[E.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},a=t.__arabicParser__.isArabicEndLetter=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(E){return o(E)&&i.indexOf(E.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(E){var k=0,A=n,D="",j=0;for(k=0;k<E.length;k+=1)A[E.charCodeAt(k)]!==void 0?(j++,typeof(A=A[E.charCodeAt(k)])=="number"&&(D+=String.fromCharCode(A),A=n,j=0),k===E.length-1&&(A=n,D+=E.charAt(k-(j-1)),k-=j-1,j=0)):(A=n,D+=E.charAt(k-j),k-=j,j=0);return D};t.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&r[E.charCodeAt(0)]!==void 0};var v=t.__arabicParser__.getCorrectForm=function(E,k,A){return o(E)?s(E)===!1?-1:!c(E)||!o(k)&&!o(A)||!o(A)&&a(k)||a(E)&&!o(k)||a(E)&&l(k)||a(E)&&a(k)?0:d(E)&&o(k)&&!a(k)&&o(A)&&c(A)?3:a(E)||!o(A)?1:2:-1},g=function(E){var k=0,A=0,D=0,j="",Y="",te="",ge=(E=E||"").split("\\s+"),pe=[];for(k=0;k<ge.length;k+=1){for(pe.push(""),A=0;A<ge[k].length;A+=1)j=ge[k][A],Y=ge[k][A-1],te=ge[k][A+1],o(j)?(D=v(j,Y,te),pe[k]+=D!==-1?String.fromCharCode(e[j.charCodeAt(0)][D]):j):pe[k]+=j;pe[k]=p(pe[k])}return pe.join(" ")},x=t.__arabicParser__.processArabic=t.processArabic=function(){var E,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(k)){var D=0;for(A=[],D=0;D<k.length;D+=1)Array.isArray(k[D])?A.push([g(k[D][0]),k[D][1],k[D][2]]):A.push([g(k[D])]);E=A}else E=g(k);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};t.events.push(["preProcessText",x])}(Or.API),Or.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Or.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(E){l=E}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(E){c=E}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(E){d=E}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(E){p=E}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(E){v=E}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(E){g=E}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(E){x=E}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),v=c.scaleFactor||this.internal.scaleFactor,g=0,x=0,E=0,k=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var A=c.maxWidth;A>0?typeof l=="string"?l=this.splitTextToSize(l,A):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(j,Y){return j.concat(k.splitTextToSize(Y,A))},[])):l=Array.isArray(l)?l:[l];for(var D=0;D<l.length;D++)g<(E=this.getStringUnitWidth(l[D],{font:p})*d)&&(g=E);return g!==0&&(x=l.length),{w:g/=v,h:Math.max((x*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/v,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,g&&v&&(this.printHeaderRow(l.lineNumber,!0),l.y+=v[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,d,p,v){if(r.call(this),!d)throw new Error("No data for PDF table.");var g,x,E,k,A=[],D=[],j=[],Y={},te={},ge=[],pe=[],N=(v=v||{}).autoSize||!1,$=v.printHeaders!==!1,Z=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,B=v.margins||Object.assign({width:this.getPageWidth()},e),I=typeof v.padding=="number"?v.padding:3,R=v.headerBackgroundColor||"#c8c8c8",z=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=$,this.internal.__cell__.margins=B,this.internal.__cell__.table_font_size=Z,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=z,this.setFontSize(Z),p==null)D=A=Object.keys(d[0]),j=A.map(function(){return"left"});else if(Array.isArray(p)&&cs(p[0])==="object")for(A=p.map(function(we){return we.name}),D=p.map(function(we){return we.prompt||we.name||""}),j=p.map(function(we){return we.align||"left"}),g=0;g<p.length;g+=1)te[p[g].name]=p[g].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(D=A=p,j=A.map(function(){return"left"}));if(N||Array.isArray(p)&&typeof p[0]=="string")for(g=0;g<A.length;g+=1){for(Y[k=A[g]]=d.map(function(we){return we[k]}),this.setFont(void 0,"bold"),ge.push(this.getTextDimensions(D[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=Y[k],this.setFont(void 0,"normal"),E=0;E<x.length;E+=1)ge.push(this.getTextDimensions(x[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);te[k]=Math.max.apply(null,ge)+I+I,ge=[]}if($){var U={};for(g=0;g<A.length;g+=1)U[A[g]]={},U[A[g]].text=D[g],U[A[g]].align=j[g];var V=a.call(this,U,te);pe=A.map(function(we){return new s(l,c,te[we],V,U[we].text,void 0,U[we].align)}),this.setTableHeaderRow(pe),this.printHeaderRow(1,!1)}var re=p.reduce(function(we,Qe){return we[Qe.name]=Qe.align,we},{});for(g=0;g<d.length;g+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:g,data:d[g]},this);var Q=a.call(this,d[g],te);for(E=0;E<A.length;E+=1){var _e=d[g][A[E]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:g,col:E,data:_e},this),o.call(this,new s(l,c,te[A[E]],Q,_e,g+2,re[A[E]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(l).map(function(g){var x=l[g];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,c[g]-d-d)},this).map(function(g){return this.getLineHeightFactor()*g.length*p/v+d+d},this).reduce(function(g,x){return Math.max(g,x)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){d=this.internal.__cell__.tableHeaderRow[g].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,v.push(d)),d.lineNumber=l;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(x)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),n=!1}}(Or.API);var rP={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},iP=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Nb=nP(iP),sP=[100,200,300,400,500,600,700,800,900],$H=nP(sP);function Ib(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return rP[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof Nb[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function P5(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var VH={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},M5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function k5(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function UH(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},VH,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=Ib(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+k5(s)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var d=Nb[l],p=d<=Nb.normal?-1:1,v=P5(c,iP,d,p);if(!v)throw new Error("Could not find a matching font-stretch value for "+l);return v}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var d=rP[l],p=0;p<d.length;++p)if(c[d[p]])return c[d[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var d=$H[l],p=P5(c,sP,d,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+k5(s)+"'.");return o}function A5(t){return t.trimLeft()}function HH(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function WH(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var C0,T5,D5,u2=["times"];(function(t){var e,n,r,i,s,o,a,l,c,d=function(ae){return ae=ae||{},this.isStrokeTransparent=ae.isStrokeTransparent||!1,this.strokeOpacity=ae.strokeOpacity||1,this.strokeStyle=ae.strokeStyle||"#000000",this.fillStyle=ae.fillStyle||"#000000",this.isFillTransparent=ae.isFillTransparent||!1,this.fillOpacity=ae.fillOpacity||1,this.font=ae.font||"10px sans-serif",this.textBaseline=ae.textBaseline||"alphabetic",this.textAlign=ae.textAlign||"left",this.lineWidth=ae.lineWidth||1,this.lineJoin=ae.lineJoin||"miter",this.lineCap=ae.lineCap||"butt",this.path=ae.path||[],this.transform=ae.transform!==void 0?ae.transform.clone():new l,this.globalCompositeOperation=ae.globalCompositeOperation||"normal",this.globalAlpha=ae.globalAlpha||1,this.clip_path=ae.clip_path||[],this.currentPoint=ae.currentPoint||new o,this.miterLimit=ae.miterLimit||10,this.lastPoint=ae.lastPoint||new o,this.lineDashOffset=ae.lineDashOffset||0,this.lineDash=ae.lineDash||[],this.margin=ae.margin||[0,0,0,0],this.prevPageLastElemOffset=ae.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ae.ignoreClearRect!="boolean"||ae.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var p=function(ae){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=ae;Object.defineProperty(this,"pdf",{get:function(){return H}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(se){K=!!se}});var me=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return me},set:function(se){me=!!se}});var fe=0;Object.defineProperty(this,"posX",{get:function(){return fe},set:function(se){isNaN(se)||(fe=se)}});var he=0;Object.defineProperty(this,"posY",{get:function(){return he},set:function(se){isNaN(se)||(he=se)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(se){var ce;typeof se=="number"?ce=[se,se,se,se]:((ce=new Array(4))[0]=se[0],ce[1]=se.length>=2?se[1]:ce[0],ce[2]=se.length>=3?se[2]:ce[0],ce[3]=se.length>=4?se[3]:ce[1]),c.margin=ce}});var X=!1;Object.defineProperty(this,"autoPaging",{get:function(){return X},set:function(se){X=se}});var J=0;Object.defineProperty(this,"lastBreak",{get:function(){return J},set:function(se){J=se}});var De=[];Object.defineProperty(this,"pageBreaks",{get:function(){return De},set:function(se){De=se}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(se){se instanceof d&&(c=se)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(se){c.path=se}});var Te=[];Object.defineProperty(this,"ctxStack",{get:function(){return Te},set:function(se){Te=se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(se){var ce;ce=v(se),this.ctx.fillStyle=ce.style,this.ctx.isFillTransparent=ce.a===0,this.ctx.fillOpacity=ce.a,this.pdf.setFillColor(ce.r,ce.g,ce.b,{a:ce.a}),this.pdf.setTextColor(ce.r,ce.g,ce.b,{a:ce.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(se){var ce=v(se);this.ctx.strokeStyle=ce.style,this.ctx.isStrokeTransparent=ce.a===0,this.ctx.strokeOpacity=ce.a,ce.a===0?this.pdf.setDrawColor(255,255,255):(ce.a,this.pdf.setDrawColor(ce.r,ce.g,ce.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(se){["butt","round","square"].indexOf(se)!==-1&&(this.ctx.lineCap=se,this.pdf.setLineCap(se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(se){isNaN(se)||(this.ctx.lineWidth=se,this.pdf.setLineWidth(se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(se){["bevel","round","miter"].indexOf(se)!==-1&&(this.ctx.lineJoin=se,this.pdf.setLineJoin(se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(se){isNaN(se)||(this.ctx.miterLimit=se,this.pdf.setMiterLimit(se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(se){this.ctx.textBaseline=se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(se){["right","end","center","left","start"].indexOf(se)!==-1&&(this.ctx.textAlign=se)}});var Je=null;function de(se,ce){if(Je===null){var ze=function(Ce){var ve=[];return Object.keys(Ce).forEach(function(Ve){Ce[Ve].forEach(function(Ye){var Ze=null;switch(Ye){case"bold":Ze={family:Ve,weight:"bold"};break;case"italic":Ze={family:Ve,style:"italic"};break;case"bolditalic":Ze={family:Ve,weight:"bold",style:"italic"};break;case"":case"normal":Ze={family:Ve}}Ze!==null&&(Ze.ref={name:Ve,style:Ye},ve.push(Ze))})}),ve}(se.getFontList());Je=function(Ce){for(var ve={},Ve=0;Ve<Ce.length;++Ve){var Ye=Ib(Ce[Ve]),Ze=Ye.family,_t=Ye.stretch,We=Ye.style,ut=Ye.weight;ve[Ze]=ve[Ze]||{},ve[Ze][_t]=ve[Ze][_t]||{},ve[Ze][_t][We]=ve[Ze][_t][We]||{},ve[Ze][_t][We][ut]=Ye}return ve}(ze.concat(ce))}return Je}var ee=null;Object.defineProperty(this,"fontFaces",{get:function(){return ee},set:function(se){Je=null,ee=se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(se){var ce;if(this.ctx.font=se,(ce=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(se))!==null){var ze=ce[1],Ce=(ce[2],ce[3]),ve=ce[4],Ve=(ce[5],ce[6]),Ye=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ve)[2];ve=Math.floor(Ye==="px"?parseFloat(ve)*this.pdf.internal.scaleFactor:Ye==="em"?parseFloat(ve)*this.pdf.getFontSize():parseFloat(ve)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ve);var Ze=function(et){var at,it,zt=[],Kt=et.trim();if(Kt==="")return u2;if(Kt in M5)return[M5[Kt]];for(;Kt!=="";){switch(it=null,at=(Kt=A5(Kt)).charAt(0)){case'"':case"'":it=HH(Kt.substring(1),at);break;default:it=WH(Kt)}if(it===null||(zt.push(it[0]),(Kt=A5(it[1]))!==""&&Kt.charAt(0)!==","))return u2;Kt=Kt.replace(/^,/,"")}return zt}(Ve);if(this.fontFaces){var _t=UH(de(this.pdf,this.fontFaces),Ze.map(function(et){return{family:et,stretch:"normal",weight:Ce,style:ze}}));this.pdf.setFont(_t.ref.name,_t.ref.style)}else{var We="";(Ce==="bold"||parseInt(Ce,10)>=700||ze==="bold")&&(We="bold"),ze==="italic"&&(We+="italic"),We.length===0&&(We="normal");for(var ut="",Vt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},tn=0;tn<Ze.length;tn++){if(this.pdf.internal.getFont(Ze[tn],We,{noFallback:!0,disableWarning:!0})!==void 0){ut=Ze[tn];break}if(We==="bolditalic"&&this.pdf.internal.getFont(Ze[tn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ut=Ze[tn],We="bold";else if(this.pdf.internal.getFont(Ze[tn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ut=Ze[tn],We="normal";break}}if(ut===""){for(var bn=0;bn<Ze.length;bn++)if(Vt[Ze[bn]]){ut=Vt[Ze[bn]];break}}ut=ut===""?"Times":ut,this.pdf.setFont(ut,We)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(se){this.ctx.globalCompositeOperation=se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(se){this.ctx.globalAlpha=se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(se){this.ctx.lineDashOffset=se,Qe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(se){this.ctx.lineDash=se,Qe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(se){this.ctx.ignoreClearRect=!!se}})};p.prototype.setLineDash=function(ae){this.lineDash=ae},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){Y.call(this,"fill",!1)},p.prototype.stroke=function(){Y.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(ae,H){if(isNaN(ae)||isNaN(H))throw ws.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new o(ae,H));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new o(ae,H)},p.prototype.closePath=function(){var ae=new o(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&cs(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){ae=new o(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(ae.x,ae.y)},p.prototype.lineTo=function(ae,H){if(isNaN(ae)||isNaN(H))throw ws.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new o(ae,H));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new o(K.x,K.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Y.call(this,null,!0)},p.prototype.quadraticCurveTo=function(ae,H,K,me){if(isNaN(K)||isNaN(me)||isNaN(ae)||isNaN(H))throw ws.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var fe=this.ctx.transform.applyToPoint(new o(K,me)),he=this.ctx.transform.applyToPoint(new o(ae,H));this.path.push({type:"qct",x1:he.x,y1:he.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new o(fe.x,fe.y)},p.prototype.bezierCurveTo=function(ae,H,K,me,fe,he){if(isNaN(fe)||isNaN(he)||isNaN(ae)||isNaN(H)||isNaN(K)||isNaN(me))throw ws.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var X=this.ctx.transform.applyToPoint(new o(fe,he)),J=this.ctx.transform.applyToPoint(new o(ae,H)),De=this.ctx.transform.applyToPoint(new o(K,me));this.path.push({type:"bct",x1:J.x,y1:J.y,x2:De.x,y2:De.y,x:X.x,y:X.y}),this.ctx.lastPoint=new o(X.x,X.y)},p.prototype.arc=function(ae,H,K,me,fe,he){if(isNaN(ae)||isNaN(H)||isNaN(K)||isNaN(me)||isNaN(fe))throw ws.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(he=!!he,!this.ctx.transform.isIdentity){var X=this.ctx.transform.applyToPoint(new o(ae,H));ae=X.x,H=X.y;var J=this.ctx.transform.applyToPoint(new o(0,K)),De=this.ctx.transform.applyToPoint(new o(0,0));K=Math.sqrt(Math.pow(J.x-De.x,2)+Math.pow(J.y-De.y,2))}Math.abs(fe-me)>=2*Math.PI&&(me=0,fe=2*Math.PI),this.path.push({type:"arc",x:ae,y:H,radius:K,startAngle:me,endAngle:fe,counterclockwise:he})},p.prototype.arcTo=function(ae,H,K,me,fe){throw new Error("arcTo not implemented.")},p.prototype.rect=function(ae,H,K,me){if(isNaN(ae)||isNaN(H)||isNaN(K)||isNaN(me))throw ws.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ae,H),this.lineTo(ae+K,H),this.lineTo(ae+K,H+me),this.lineTo(ae,H+me),this.lineTo(ae,H),this.lineTo(ae+K,H),this.lineTo(ae,H)},p.prototype.fillRect=function(ae,H,K,me){if(isNaN(ae)||isNaN(H)||isNaN(K)||isNaN(me))throw ws.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var fe={};this.lineCap!=="butt"&&(fe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(fe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ae,H,K,me),this.fill(),fe.hasOwnProperty("lineCap")&&(this.lineCap=fe.lineCap),fe.hasOwnProperty("lineJoin")&&(this.lineJoin=fe.lineJoin)}},p.prototype.strokeRect=function(ae,H,K,me){if(isNaN(ae)||isNaN(H)||isNaN(K)||isNaN(me))throw ws.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(ae,H,K,me),this.stroke())},p.prototype.clearRect=function(ae,H,K,me){if(isNaN(ae)||isNaN(H)||isNaN(K)||isNaN(me))throw ws.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ae,H,K,me))},p.prototype.save=function(ae){ae=typeof ae!="boolean"||ae;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),ae){this.ctx.fontSize=this.pdf.internal.getFontSize();var me=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=me}},p.prototype.restore=function(ae){ae=typeof ae!="boolean"||ae;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(H),ae&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(ae){var H,K,me,fe;if(ae.isCanvasGradient===!0&&(ae=ae.getColor()),!ae)return{r:0,g:0,b:0,a:0,style:ae};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ae))H=0,K=0,me=0,fe=0;else{var he=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ae);if(he!==null)H=parseInt(he[1]),K=parseInt(he[2]),me=parseInt(he[3]),fe=1;else if((he=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ae))!==null)H=parseInt(he[1]),K=parseInt(he[2]),me=parseInt(he[3]),fe=parseFloat(he[4]);else{if(fe=1,typeof ae=="string"&&ae.charAt(0)!=="#"){var X=new KE(ae);ae=X.ok?X.toHex():"#000000"}ae.length===4?(H=ae.substring(1,2),H+=H,K=ae.substring(2,3),K+=K,me=ae.substring(3,4),me+=me):(H=ae.substring(1,3),K=ae.substring(3,5),me=ae.substring(5,7)),H=parseInt(H,16),K=parseInt(K,16),me=parseInt(me,16)}}return{r:H,g:K,b:me,a:fe,style:ae}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(ae,H,K,me){if(isNaN(H)||isNaN(K)||typeof ae!="string")throw ws.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(me=isNaN(me)?void 0:me,!g.call(this)){var fe=Q(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;I.call(this,{text:ae,x:H,y:K,scale:he,angle:fe,align:this.textAlign,maxWidth:me})}},p.prototype.strokeText=function(ae,H,K,me){if(isNaN(H)||isNaN(K)||typeof ae!="string")throw ws.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){me=isNaN(me)?void 0:me;var fe=Q(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;I.call(this,{text:ae,x:H,y:K,scale:he,renderingMode:"stroke",angle:fe,align:this.textAlign,maxWidth:me})}},p.prototype.measureText=function(ae){if(typeof ae!="string")throw ws.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,K=this.pdf.internal.scaleFactor,me=H.internal.getFontSize(),fe=H.getStringUnitWidth(ae)*me/H.internal.scaleFactor,he=function(X){var J=(X=X||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return J}}),this};return new he({width:fe*=Math.round(96*K/72*1e4)/1e4})},p.prototype.scale=function(ae,H){if(isNaN(ae)||isNaN(H))throw ws.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new l(ae,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},p.prototype.rotate=function(ae){if(isNaN(ae))throw ws.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new l(Math.cos(ae),Math.sin(ae),-Math.sin(ae),Math.cos(ae),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},p.prototype.translate=function(ae,H){if(isNaN(ae)||isNaN(H))throw ws.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new l(1,0,0,1,ae,H);this.ctx.transform=this.ctx.transform.multiply(K)},p.prototype.transform=function(ae,H,K,me,fe,he){if(isNaN(ae)||isNaN(H)||isNaN(K)||isNaN(me)||isNaN(fe)||isNaN(he))throw ws.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var X=new l(ae,H,K,me,fe,he);this.ctx.transform=this.ctx.transform.multiply(X)},p.prototype.setTransform=function(ae,H,K,me,fe,he){ae=isNaN(ae)?1:ae,H=isNaN(H)?0:H,K=isNaN(K)?0:K,me=isNaN(me)?1:me,fe=isNaN(fe)?0:fe,he=isNaN(he)?0:he,this.ctx.transform=new l(ae,H,K,me,fe,he)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(ae,H,K,me,fe,he,X,J,De){var Te=this.pdf.getImageProperties(ae),Je=1,de=1,ee=1,se=1;me!==void 0&&J!==void 0&&(ee=J/me,se=De/fe,Je=Te.width/me*J/me,de=Te.height/fe*De/fe),he===void 0&&(he=H,X=K,H=0,K=0),me!==void 0&&J===void 0&&(J=me,De=fe),me===void 0&&J===void 0&&(J=Te.width,De=Te.height);for(var ce,ze=this.ctx.transform.decompose(),Ce=Q(ze.rotate.shx),ve=new l,Ve=(ve=(ve=(ve=ve.multiply(ze.translate)).multiply(ze.skew)).multiply(ze.scale)).applyToRectangle(new a(he-H*ee,X-K*se,me*Je,fe*de)),Ye=k.call(this,Ve),Ze=[],_t=0;_t<Ye.length;_t+=1)Ze.indexOf(Ye[_t])===-1&&Ze.push(Ye[_t]);if(j(Ze),this.autoPaging)for(var We=Ze[0],ut=Ze[Ze.length-1],Vt=We;Vt<ut+1;Vt++){this.pdf.setPage(Vt);var tn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],bn=Vt===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],at=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],it=Vt===1?0:et+(Vt-2)*at;if(this.ctx.clip_path.length!==0){var zt=this.path;ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(ce,this.posX+this.margin[3],-it+bn+this.ctx.prevPageLastElemOffset),te.call(this,"fill",!0),this.path=zt}var Kt=JSON.parse(JSON.stringify(Ve));Kt=D([Kt],this.posX+this.margin[3],-it+bn+this.ctx.prevPageLastElemOffset)[0];var Nn=(Vt>We||Vt<ut)&&E.call(this);Nn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tn,at,null).clip().discardPath()),this.pdf.addImage(ae,"JPEG",Kt.x,Kt.y,Kt.w,Kt.h,null,null,Ce),Nn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ae,"JPEG",Ve.x,Ve.y,Ve.w,Ve.h,null,null,Ce)};var k=function(ae,H,K){var me=[];H=H||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var fe=this.posY+this.ctx.prevPageLastElemOffset;switch(ae.type){default:case"mt":case"lt":me.push(Math.floor((ae.y+fe)/K)+1);break;case"arc":me.push(Math.floor((ae.y+fe-ae.radius)/K)+1),me.push(Math.floor((ae.y+fe+ae.radius)/K)+1);break;case"qct":var he=_e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ae.x1,ae.y1,ae.x,ae.y);me.push(Math.floor((he.y+fe)/K)+1),me.push(Math.floor((he.y+he.h+fe)/K)+1);break;case"bct":var X=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ae.x1,ae.y1,ae.x2,ae.y2,ae.x,ae.y);me.push(Math.floor((X.y+fe)/K)+1),me.push(Math.floor((X.y+X.h+fe)/K)+1);break;case"rect":me.push(Math.floor((ae.y+fe)/K)+1),me.push(Math.floor((ae.y+ae.h+fe)/K)+1)}for(var J=0;J<me.length;J+=1)for(;this.pdf.internal.getNumberOfPages()<me[J];)A.call(this);return me},A=function(){var ae=this.fillStyle,H=this.strokeStyle,K=this.font,me=this.lineCap,fe=this.lineWidth,he=this.lineJoin;this.pdf.addPage(),this.fillStyle=ae,this.strokeStyle=H,this.font=K,this.lineCap=me,this.lineWidth=fe,this.lineJoin=he},D=function(ae,H,K){for(var me=0;me<ae.length;me++)switch(ae[me].type){case"bct":ae[me].x2+=H,ae[me].y2+=K;case"qct":ae[me].x1+=H,ae[me].y1+=K;case"mt":case"lt":case"arc":default:ae[me].x+=H,ae[me].y+=K}return ae},j=function(ae){return ae.sort(function(H,K){return H-K})},Y=function(ae,H){for(var K,me,fe=this.fillStyle,he=this.strokeStyle,X=this.lineCap,J=this.lineWidth,De=Math.abs(J*this.ctx.transform.scaleX),Te=this.lineJoin,Je=JSON.parse(JSON.stringify(this.path)),de=JSON.parse(JSON.stringify(this.path)),ee=[],se=0;se<de.length;se++)if(de[se].x!==void 0)for(var ce=k.call(this,de[se]),ze=0;ze<ce.length;ze+=1)ee.indexOf(ce[ze])===-1&&ee.push(ce[ze]);for(var Ce=0;Ce<ee.length;Ce++)for(;this.pdf.internal.getNumberOfPages()<ee[Ce];)A.call(this);if(j(ee),this.autoPaging)for(var ve=ee[0],Ve=ee[ee.length-1],Ye=ve;Ye<Ve+1;Ye++){this.pdf.setPage(Ye),this.fillStyle=fe,this.strokeStyle=he,this.lineCap=X,this.lineWidth=De,this.lineJoin=Te;var Ze=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],_t=Ye===1?this.posY+this.margin[0]:this.margin[0],We=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ut=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Vt=Ye===1?0:We+(Ye-2)*ut;if(this.ctx.clip_path.length!==0){var tn=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(K,this.posX+this.margin[3],-Vt+_t+this.ctx.prevPageLastElemOffset),te.call(this,ae,!0),this.path=tn}if(me=JSON.parse(JSON.stringify(Je)),this.path=D(me,this.posX+this.margin[3],-Vt+_t+this.ctx.prevPageLastElemOffset),H===!1||Ye===0){var bn=(Ye>ve||Ye<Ve)&&E.call(this);bn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ze,ut,null).clip().discardPath()),te.call(this,ae,H),bn&&this.pdf.restoreGraphicsState()}this.lineWidth=J}else this.lineWidth=De,te.call(this,ae,H),this.lineWidth=J;this.path=Je},te=function(ae,H){if((ae!=="stroke"||H||!x.call(this))&&(ae==="stroke"||H||!g.call(this))){for(var K,me,fe=[],he=this.path,X=0;X<he.length;X++){var J=he[X];switch(J.type){case"begin":fe.push({begin:!0});break;case"close":fe.push({close:!0});break;case"mt":fe.push({start:J,deltas:[],abs:[]});break;case"lt":var De=fe.length;if(he[X-1]&&!isNaN(he[X-1].x)&&(K=[J.x-he[X-1].x,J.y-he[X-1].y],De>0)){for(;De>=0;De--)if(fe[De-1].close!==!0&&fe[De-1].begin!==!0){fe[De-1].deltas.push(K),fe[De-1].abs.push(J);break}}break;case"bct":K=[J.x1-he[X-1].x,J.y1-he[X-1].y,J.x2-he[X-1].x,J.y2-he[X-1].y,J.x-he[X-1].x,J.y-he[X-1].y],fe[fe.length-1].deltas.push(K);break;case"qct":var Te=he[X-1].x+2/3*(J.x1-he[X-1].x),Je=he[X-1].y+2/3*(J.y1-he[X-1].y),de=J.x+2/3*(J.x1-J.x),ee=J.y+2/3*(J.y1-J.y),se=J.x,ce=J.y;K=[Te-he[X-1].x,Je-he[X-1].y,de-he[X-1].x,ee-he[X-1].y,se-he[X-1].x,ce-he[X-1].y],fe[fe.length-1].deltas.push(K);break;case"arc":fe.push({deltas:[],abs:[],arc:!0}),Array.isArray(fe[fe.length-1].abs)&&fe[fe.length-1].abs.push(J)}}me=H?null:ae==="stroke"?"stroke":"fill";for(var ze=!1,Ce=0;Ce<fe.length;Ce++)if(fe[Ce].arc)for(var ve=fe[Ce].abs,Ve=0;Ve<ve.length;Ve++){var Ye=ve[Ve];Ye.type==="arc"?N.call(this,Ye.x,Ye.y,Ye.radius,Ye.startAngle,Ye.endAngle,Ye.counterclockwise,void 0,H,!ze):R.call(this,Ye.x,Ye.y),ze=!0}else if(fe[Ce].close===!0)this.pdf.internal.out("h"),ze=!1;else if(fe[Ce].begin!==!0){var Ze=fe[Ce].start.x,_t=fe[Ce].start.y;z.call(this,fe[Ce].deltas,Ze,_t),ze=!0}me&&$.call(this,me),H&&Z.call(this)}},ge=function(ae){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ae-K;case"top":return ae+H-K;case"hanging":return ae+H-2*K;case"middle":return ae+H/2-K;case"ideographic":return ae;case"alphabetic":default:return ae}},pe=function(ae){return ae+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var ae=function(){};return ae.colorStops=[],ae.addColorStop=function(H,K){this.colorStops.push([H,K])},ae.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ae.isCanvasGradient=!0,ae},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(ae,H,K,me,fe,he,X,J,De){for(var Te=V.call(this,K,me,fe,he),Je=0;Je<Te.length;Je++){var de=Te[Je];Je===0&&(De?B.call(this,de.x1+ae,de.y1+H):R.call(this,de.x1+ae,de.y1+H)),U.call(this,ae,H,de.x2,de.y2,de.x3,de.y3,de.x4,de.y4)}J?Z.call(this):$.call(this,X)},$=function(ae){switch(ae){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Z=function(){this.pdf.clip(),this.pdf.discardPath()},B=function(ae,H){this.pdf.internal.out(n(ae)+" "+r(H)+" m")},I=function(ae){var H;switch(ae.align){case"right":case"end":H="right";break;case"center":H="center";break;case"left":case"start":default:H="left"}var K=this.pdf.getTextDimensions(ae.text),me=ge.call(this,ae.y),fe=pe.call(this,me)-K.h,he=this.ctx.transform.applyToPoint(new o(ae.x,me)),X=this.ctx.transform.decompose(),J=new l;J=(J=(J=J.multiply(X.translate)).multiply(X.skew)).multiply(X.scale);for(var De,Te,Je,de=this.ctx.transform.applyToRectangle(new a(ae.x,me,K.w,K.h)),ee=J.applyToRectangle(new a(ae.x,fe,K.w,K.h)),se=k.call(this,ee),ce=[],ze=0;ze<se.length;ze+=1)ce.indexOf(se[ze])===-1&&ce.push(se[ze]);if(j(ce),this.autoPaging)for(var Ce=ce[0],ve=ce[ce.length-1],Ve=Ce;Ve<ve+1;Ve++){this.pdf.setPage(Ve);var Ye=Ve===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_t=this.pdf.internal.pageSize.height-this.margin[2],We=_t-this.margin[0],ut=this.pdf.internal.pageSize.width-this.margin[1],Vt=ut-this.margin[3],tn=Ve===1?0:Ze+(Ve-2)*We;if(this.ctx.clip_path.length!==0){var bn=this.path;De=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(De,this.posX+this.margin[3],-1*tn+Ye),te.call(this,"fill",!0),this.path=bn}var et=D([JSON.parse(JSON.stringify(ee))],this.posX+this.margin[3],-tn+Ye+this.ctx.prevPageLastElemOffset)[0];ae.scale>=.01&&(Te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Te*ae.scale),Je=this.lineWidth,this.lineWidth=Je*ae.scale);var at=this.autoPaging!=="text";if(at||et.y+et.h<=_t){if(at||et.y>=Ye&&et.x<=ut){var it=at?ae.text:this.pdf.splitTextToSize(ae.text,ae.maxWidth||ut-et.x)[0],zt=D([JSON.parse(JSON.stringify(de))],this.posX+this.margin[3],-tn+Ye+this.ctx.prevPageLastElemOffset)[0],Kt=at&&(Ve>Ce||Ve<ve)&&E.call(this);Kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Vt,We,null).clip().discardPath()),this.pdf.text(it,zt.x,zt.y,{angle:ae.angle,align:H,renderingMode:ae.renderingMode}),Kt&&this.pdf.restoreGraphicsState()}}else et.y<_t&&(this.ctx.prevPageLastElemOffset+=_t-et.y);ae.scale>=.01&&(this.pdf.setFontSize(Te),this.lineWidth=Je)}else ae.scale>=.01&&(Te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Te*ae.scale),Je=this.lineWidth,this.lineWidth=Je*ae.scale),this.pdf.text(ae.text,he.x+this.posX,he.y+this.posY,{angle:ae.angle,align:H,renderingMode:ae.renderingMode,maxWidth:ae.maxWidth}),ae.scale>=.01&&(this.pdf.setFontSize(Te),this.lineWidth=Je)},R=function(ae,H,K,me){K=K||0,me=me||0,this.pdf.internal.out(n(ae+K)+" "+r(H+me)+" l")},z=function(ae,H,K){return this.pdf.lines(ae,H,K,null,null)},U=function(ae,H,K,me,fe,he,X,J){this.pdf.internal.out([e(i(K+ae)),e(s(me+H)),e(i(fe+ae)),e(s(he+H)),e(i(X+ae)),e(s(J+H)),"c"].join(" "))},V=function(ae,H,K,me){for(var fe=2*Math.PI,he=Math.PI/2;H>K;)H-=fe;var X=Math.abs(K-H);X<fe&&me&&(X=fe-X);for(var J=[],De=me?-1:1,Te=H;X>1e-5;){var Je=Te+De*Math.min(X,he);J.push(re.call(this,ae,Te,Je)),X-=Math.abs(Je-Te),Te=Je}return J},re=function(ae,H,K){var me=(K-H)/2,fe=ae*Math.cos(me),he=ae*Math.sin(me),X=fe,J=-he,De=X*X+J*J,Te=De+X*fe+J*he,Je=4/3*(Math.sqrt(2*De*Te)-Te)/(X*he-J*fe),de=X-Je*J,ee=J+Je*X,se=de,ce=-ee,ze=me+H,Ce=Math.cos(ze),ve=Math.sin(ze);return{x1:ae*Math.cos(H),y1:ae*Math.sin(H),x2:de*Ce-ee*ve,y2:de*ve+ee*Ce,x3:se*Ce-ce*ve,y3:se*ve+ce*Ce,x4:ae*Math.cos(K),y4:ae*Math.sin(K)}},Q=function(ae){return 180*ae/Math.PI},_e=function(ae,H,K,me,fe,he){var X=ae+.5*(K-ae),J=H+.5*(me-H),De=fe+.5*(K-fe),Te=he+.5*(me-he),Je=Math.min(ae,fe,X,De),de=Math.max(ae,fe,X,De),ee=Math.min(H,he,J,Te),se=Math.max(H,he,J,Te);return new a(Je,ee,de-Je,se-ee)},we=function(ae,H,K,me,fe,he,X,J){var De,Te,Je,de,ee,se,ce,ze,Ce,ve,Ve,Ye,Ze,_t,We=K-ae,ut=me-H,Vt=fe-K,tn=he-me,bn=X-fe,et=J-he;for(Te=0;Te<41;Te++)Ce=(ce=(Je=ae+(De=Te/40)*We)+De*((ee=K+De*Vt)-Je))+De*(ee+De*(fe+De*bn-ee)-ce),ve=(ze=(de=H+De*ut)+De*((se=me+De*tn)-de))+De*(se+De*(he+De*et-se)-ze),Te==0?(Ve=Ce,Ye=ve,Ze=Ce,_t=ve):(Ve=Math.min(Ve,Ce),Ye=Math.min(Ye,ve),Ze=Math.max(Ze,Ce),_t=Math.max(_t,ve));return new a(Math.round(Ve),Math.round(Ye),Math.round(Ze-Ve),Math.round(_t-Ye))},Qe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ae,H,K=(ae=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:ae,lineDashOffset:H}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(Or.API),function(t){var e=function(s){var o,a,l,c,d,p,v,g,x,E;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(d=((d=((d=((d=(d-(E=d%85))/85)-(x=d%85))/85)-(g=d%85))/85)-(v=d%85))/85)%85,a.push(p+33,v+33,g+33,x+33,E+33)):a.push(122);return function(k,A){for(var D=A;D>0;D--)k.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,c,d,p=String,v="length",g=255,x="charCodeAt",E="slice",k="replace";for(s[E](-2),s=s[E](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),l=[],c=0,d=(s+=o="uuuuu"[E](s[v]%5||5))[v];d>c;c+=5)a=52200625*(s[x](c)-33)+614125*(s[x](c+1)-33)+7225*(s[x](c+2)-33)+85*(s[x](c+3)-33)+(s[x](c+4)-33),l.push(g&a>>24,g&a>>16,g&a>>8,g&a);return function(A,D){for(var j=D;j>0;j--)A.pop()}(l,o[v]),p.fromCharCode.apply(p,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=kb(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(Or.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,d){var p=new XMLHttpRequest,v=0,g=function(x){var E=x.length,k=[],A=String.fromCharCode;for(v=0;v<E;v+=1)k.push(A(255&x.charCodeAt(v)));return k.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?d(g(this.responseText)):d(void 0)}),p.send(null),c&&p.status===200)return g(p.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(Or.API),function(t){function e(){return(Rr.html2canvas?Promise.resolve(Rr.html2canvas):Ah(()=>import("./html2canvas.esm.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Rr.DOMPurify?Promise.resolve(Rr.DOMPurify):Ah(()=>import("./purify.es.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=cs(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,d){for(var p=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),v=c.firstChild;v;v=v.nextSibling)d!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||p.appendChild(l(v,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(p.width=c.width,p.height=c.height,p.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(p.value=c.value),p.addEventListener("load",function(){p.scrollTop=c.scrollTop,p.scrollLeft=c.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var v=0;v<c.length;++v){var g=c[v],x=g.src.find(function(E){return E.format==="truetype"});x&&l.addFont(x.url,g.ref.name,g.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||Or.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,d){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,c),p}).then(c,d).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(c,o,a);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Or.getPageSize=function(o,a,l){if(cs(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var d,p=(""+l).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+a}var g,x=0,E=0;if(v.hasOwnProperty(p))x=v[p][1]/d,E=v[p][0]/d;else try{x=l[1],E=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",E>x&&(g=E,E=x,x=g);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",x>E&&(g=E,E=x,x=g)}return{width:E,height:x,unit:a,k:d,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Ib):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(Or.API),Or.API.addJS=function(t){return D5=t,this.internal.events.subscribe("postPutResources",function(){C0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(C0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),T5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+D5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){C0!==void 0&&T5!==void 0&&this.internal.out("/Names <</JavaScript "+C0+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(s=0;s<c;s++){var p=n.internal.newObject();d.push(p);var v=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var g=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<d.length;s++)n.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+g+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Or.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(p){for(var v,g=256*p.charCodeAt(4)+p.charCodeAt(5),x=p.length,E={width:0,height:0,numcomponents:1},k=4;k<x;k+=2){if(k+=g,e.indexOf(p.charCodeAt(k+1))!==-1){v=256*p.charCodeAt(k+5)+p.charCodeAt(k+6),E={width:256*p.charCodeAt(k+7)+p.charCodeAt(k+8),height:v,numcomponents:p.charCodeAt(k+9)};break}g=256*p.charCodeAt(k+2)+p.charCodeAt(k+3)}return E}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}d={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return d}}(Or.API);var Kf,E0,O5,N5,I5,GH=function(){var t,e,n;function r(s){var o,a,l,c,d,p,v,g,x,E,k,A,D,j;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),x=(function(){var Y,te;for(te=[],Y=0;Y<4;++Y)te.push(String.fromCharCode(this.data[this.pos++]));return te}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),c=this.readUInt16()||100,p.delay=1e3*d/c,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,o-=4),s=(p!=null?p.data:void 0)||this.imgData,A=0;0<=o?A<o:A>o;0<=o?++A:--A)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((E=l-this.transparency.indexed.length)>0)for(D=0;0<=E?D<E:D>E;0<=E?++D:--D)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":v=(k=this.read(o)).indexOf(0),g=String.fromCharCode.apply(String,k.slice(0,v)),this.text[g]=String.fromCharCode.apply(String,k.slice(v+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(j=this.colorType)===4||j===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(p,v,g,x){var E,k,A,D,j,Y,te,ge,pe,N,$,Z,B,I,R,z,U,V,re,Q,_e,we=Math.ceil((c.width-p)/g),Qe=Math.ceil((c.height-v)/x),ae=c.width==we&&c.height==Qe;for(I=o*we,Z=ae?a:new Uint8Array(I*Qe),Y=s.length,B=0,k=0;B<Qe&&l<Y;){switch(s[l++]){case 0:for(D=U=0;U<I;D=U+=1)Z[k++]=s[l++];break;case 1:for(D=V=0;V<I;D=V+=1)E=s[l++],j=D<o?0:Z[k-o],Z[k++]=(E+j)%256;break;case 2:for(D=re=0;re<I;D=re+=1)E=s[l++],A=(D-D%o)/o,R=B&&Z[(B-1)*I+A*o+D%o],Z[k++]=(R+E)%256;break;case 3:for(D=Q=0;Q<I;D=Q+=1)E=s[l++],A=(D-D%o)/o,j=D<o?0:Z[k-o],R=B&&Z[(B-1)*I+A*o+D%o],Z[k++]=(E+Math.floor((j+R)/2))%256;break;case 4:for(D=_e=0;_e<I;D=_e+=1)E=s[l++],A=(D-D%o)/o,j=D<o?0:Z[k-o],B===0?R=z=0:(R=Z[(B-1)*I+A*o+D%o],z=A&&Z[(B-1)*I+(A-1)*o+D%o]),te=j+R-z,ge=Math.abs(te-j),N=Math.abs(te-R),$=Math.abs(te-z),pe=ge<=N&&ge<=$?j:N<=$?R:z,Z[k++]=(E+pe)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!ae){var H=((v+B*x)*c.width+p)*o,K=B*I;for(D=0;D<we;D+=1){for(var me=0;me<o;me+=1)a[H++]=Z[K++];H+=(g-1)*o}}B++}}return s=SH(s),c.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,c,d,p,v,g;for(a=this.palette,d=this.transparency.indexed||[],c=new Uint8Array((d.length||0)+a.length),l=0,s=0,o=p=0,v=a.length;p<v;o=p+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(g=d[s++])!=null?g:255;return c},r.prototype.copyToImageData=function(s,o){var a,l,c,d,p,v,g,x,E,k,A;if(l=this.colors,E=null,a=this.hasAlphaChannel,this.palette.length&&(E=(A=this._decodedPalette)!=null?A:this._decodedPalette=this.decodePalette(),l=4,a=!0),x=(c=s.data||s).length,p=E||o,d=v=0,l===1)for(;d<x;)g=E?4*o[d/4]:v,k=p[g++],c[d++]=k,c[d++]=k,c[d++]=k,c[d++]=a?p[g++]:255,v=g;else for(;d<x;)g=E?4*o[d/4]:v,c[d++]=p[g++],c[d++]=p[g++],c[d++]=p[g++],c[d++]=a?p[g++]:255,v=g},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Rr)==="[object Window]"){try{e=Rr.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,c,d,p,v,g;if(this.animation){for(g=[],a=d=0,p=(v=this.animation.frames).length;d<p;a=++d)o=v[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,g.push(o.image=t(l));return g}},r.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,c,d,p,v=this;return a=0,p=this.animation,c=p.numFrames,l=p.frames,d=p.numPlays,(o=function(){var g,x;if(g=a++%c,x=l[g],v.renderFrame(s,g),c>1&&a/c<d)return v.animation._timeout=setTimeout(o,x.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function qH(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,d=[],p=0,v=null,g=0,x=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,x=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((B=t[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var E=t[e++];p=t[e++]|t[e++]<<8,v=t[e++],!(1&E)&&(v=null),g=E>>2&7,e++;break;case 254:for(;;){if(!((B=t[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var k=t[e++]|t[e++]<<8,A=t[e++]|t[e++]<<8,D=t[e++]|t[e++]<<8,j=t[e++]|t[e++]<<8,Y=t[e++],te=Y>>6&1,ge=1<<(7&Y)+1,pe=a,N=l,$=!1;Y>>7&&($=!0,pe=e,N=ge,e+=3*ge);var Z=e;for(e++;;){var B;if(!((B=t[e++])>=0))throw Error("Invalid block size");if(B===0)break;e+=B}d.push({x:k,y:A,width:D,height:j,has_local_palette:$,palette_offset:pe,palette_size:N,data_offset:Z,data_length:e-Z,transparent_index:v,interlaced:!!te,delay:p,disposal:g});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return x},this.frameInfo=function(I){if(I<0||I>=d.length)throw new Error("Frame index out of range.");return d[I]},this.decodeAndBlitFrameBGRA=function(I,R){var z=this.frameInfo(I),U=z.width*z.height,V=new Uint8Array(U);B5(t,z.data_offset,V,U);var re=z.palette_offset,Q=z.transparent_index;Q===null&&(Q=256);var _e=z.width,we=n-_e,Qe=_e,ae=4*(z.y*n+z.x),H=4*((z.y+z.height)*n+z.x),K=ae,me=4*we;z.interlaced===!0&&(me+=4*n*7);for(var fe=8,he=0,X=V.length;he<X;++he){var J=V[he];if(Qe===0&&(Qe=_e,(K+=me)>=H&&(me=4*we+4*n*(fe-1),K=ae+(_e+we)*(fe<<1),fe>>=1)),J===Q)K+=4;else{var De=t[re+3*J],Te=t[re+3*J+1],Je=t[re+3*J+2];R[K++]=Je,R[K++]=Te,R[K++]=De,R[K++]=255}--Qe}},this.decodeAndBlitFrameRGBA=function(I,R){var z=this.frameInfo(I),U=z.width*z.height,V=new Uint8Array(U);B5(t,z.data_offset,V,U);var re=z.palette_offset,Q=z.transparent_index;Q===null&&(Q=256);var _e=z.width,we=n-_e,Qe=_e,ae=4*(z.y*n+z.x),H=4*((z.y+z.height)*n+z.x),K=ae,me=4*we;z.interlaced===!0&&(me+=4*n*7);for(var fe=8,he=0,X=V.length;he<X;++he){var J=V[he];if(Qe===0&&(Qe=_e,(K+=me)>=H&&(me=4*we+4*n*(fe-1),K=ae+(_e+we)*(fe<<1),fe>>=1)),J===Q)K+=4;else{var De=t[re+3*J],Te=t[re+3*J+1],Je=t[re+3*J+2];R[K++]=De,R[K++]=Te,R[K++]=Je,R[K++]=255}--Qe}}}function B5(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,d=0,p=0,v=0,g=t[e++],x=new Int32Array(4096),E=null;;){for(;d<16&&g!==0;)p|=t[e++]<<d,d+=8,g===1?g=t[e++]:--g;if(d<l)break;var k=p&c;if(p>>=l,d-=l,k!==s){if(k===o)break;for(var A=k<a?k:E,D=0,j=A;j>s;)j=x[j]>>8,++D;var Y=j;if(v+D+(A!==k?1:0)>r)return void ws.log("Warning, gif stream longer than expected.");n[v++]=Y;var te=v+=D;for(A!==k&&(n[v++]=Y),j=A;D--;)j=x[j],n[--te]=255&j,j>>=8;E!==null&&a<4096&&(x[a++]=E<<8|Y,a>=c+1&&l<12&&(++l,c=c<<1|1)),E=k}else a=o+1,c=(1<<(l=i+1))-1,E=null}return v!==r&&ws.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function c2(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),p=new Array(65535),v=new Array(65535),g=new Array(64),x=new Array(64),E=[],k=0,A=7,D=new Array(64),j=new Array(64),Y=new Array(64),te=new Array(256),ge=new Array(2048),pe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],B=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],U=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(ae,H){for(var K=0,me=0,fe=new Array,he=1;he<=16;he++){for(var X=1;X<=ae[he];X++)fe[H[me]]=[],fe[H[me]][0]=K,fe[H[me]][1]=he,me++,K++;K*=2}return fe}function re(ae){for(var H=ae[0],K=ae[1]-1;K>=0;)H&1<<K&&(k|=1<<A),K--,--A<0&&(k==255?(Q(255),Q(0)):Q(k),A=7,k=0)}function Q(ae){E.push(ae)}function _e(ae){Q(ae>>8&255),Q(255&ae)}function we(ae,H,K,me,fe){for(var he,X=fe[0],J=fe[240],De=function(ve,Ve){var Ye,Ze,_t,We,ut,Vt,tn,bn,et,at,it=0;for(et=0;et<8;++et){Ye=ve[it],Ze=ve[it+1],_t=ve[it+2],We=ve[it+3],ut=ve[it+4],Vt=ve[it+5],tn=ve[it+6];var zt=Ye+(bn=ve[it+7]),Kt=Ye-bn,Nn=Ze+tn,yn=Ze-tn,Dn=_t+Vt,er=_t-Vt,Qt=We+ut,Cn=We-ut,Mn=zt+Qt,tr=zt-Qt,yr=Nn+Dn,xr=Nn-Dn;ve[it]=Mn+yr,ve[it+4]=Mn-yr;var cr=.707106781*(xr+tr);ve[it+2]=tr+cr,ve[it+6]=tr-cr;var Gr=.382683433*((Mn=Cn+er)-(xr=yn+Kt)),zs=.5411961*Mn+Gr,Ai=1.306562965*xr+Gr,Oo=.707106781*(yr=er+yn),Ds=Kt+Oo,nr=Kt-Oo;ve[it+5]=nr+zs,ve[it+3]=nr-zs,ve[it+1]=Ds+Ai,ve[it+7]=Ds-Ai,it+=8}for(it=0,et=0;et<8;++et){Ye=ve[it],Ze=ve[it+8],_t=ve[it+16],We=ve[it+24],ut=ve[it+32],Vt=ve[it+40],tn=ve[it+48];var Os=Ye+(bn=ve[it+56]),No=Ye-bn,lt=Ze+tn,Re=Ze-tn,ft=_t+Vt,En=_t-Vt,Un=We+ut,wn=We-ut,Ut=Os+Un,Jn=Os-Un,Ct=lt+ft,Ht=lt-ft;ve[it]=Ut+Ct,ve[it+32]=Ut-Ct;var Ln=.707106781*(Ht+Jn);ve[it+16]=Jn+Ln,ve[it+48]=Jn-Ln;var jr=.382683433*((Ut=wn+En)-(Ht=Re+No)),un=.5411961*Ut+jr,an=1.306562965*Ht+jr,qn=.707106781*(Ct=En+Re),li=No+qn,xi=No-qn;ve[it+40]=xi+un,ve[it+24]=xi-un,ve[it+8]=li+an,ve[it+56]=li-an,it++}for(et=0;et<64;++et)at=ve[et]*Ve[et],g[et]=at>0?at+.5|0:at-.5|0;return g}(ae,H),Te=0;Te<64;++Te)x[pe[Te]]=De[Te];var Je=x[0]-K;K=x[0],Je==0?re(me[0]):(re(me[v[he=32767+Je]]),re(p[he]));for(var de=63;de>0&&x[de]==0;)de--;if(de==0)return re(X),K;for(var ee,se=1;se<=de;){for(var ce=se;x[se]==0&&se<=de;)++se;var ze=se-ce;if(ze>=16){ee=ze>>4;for(var Ce=1;Ce<=ee;++Ce)re(J);ze&=15}he=32767+x[se],re(fe[(ze<<4)+v[he]]),re(p[he]),se++}return de!=63&&re(X),K}function Qe(ae){ae=Math.min(Math.max(ae,1),100),s!=ae&&(function(H){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],me=0;me<64;me++){var fe=o((K[me]*H+50)/100);fe=Math.min(Math.max(fe,1),255),a[pe[me]]=fe}for(var he=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],X=0;X<64;X++){var J=o((he[X]*H+50)/100);J=Math.min(Math.max(J,1),255),l[pe[X]]=J}for(var De=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Te=0,Je=0;Je<8;Je++)for(var de=0;de<8;de++)c[Te]=1/(a[pe[Te]]*De[Je]*De[de]*8),d[Te]=1/(l[pe[Te]]*De[Je]*De[de]*8),Te++}(ae<50?Math.floor(5e3/ae):Math.floor(200-2*ae)),s=ae)}this.encode=function(ae,H){H&&Qe(H),E=new Array,k=0,A=7,_e(65496),_e(65504),_e(16),Q(74),Q(70),Q(73),Q(70),Q(0),Q(1),Q(1),Q(0),_e(1),_e(1),Q(0),Q(0),function(){_e(65499),_e(132),Q(0);for(var Ze=0;Ze<64;Ze++)Q(a[Ze]);Q(1);for(var _t=0;_t<64;_t++)Q(l[_t])}(),function(Ze,_t){_e(65472),_e(17),Q(8),_e(_t),_e(Ze),Q(3),Q(1),Q(17),Q(0),Q(2),Q(17),Q(1),Q(3),Q(17),Q(1)}(ae.width,ae.height),function(){_e(65476),_e(418),Q(0);for(var Ze=0;Ze<16;Ze++)Q(N[Ze+1]);for(var _t=0;_t<=11;_t++)Q($[_t]);Q(16);for(var We=0;We<16;We++)Q(Z[We+1]);for(var ut=0;ut<=161;ut++)Q(B[ut]);Q(1);for(var Vt=0;Vt<16;Vt++)Q(I[Vt+1]);for(var tn=0;tn<=11;tn++)Q(R[tn]);Q(17);for(var bn=0;bn<16;bn++)Q(z[bn+1]);for(var et=0;et<=161;et++)Q(U[et])}(),_e(65498),_e(12),Q(3),Q(1),Q(0),Q(2),Q(17),Q(3),Q(17),Q(0),Q(63),Q(0);var K=0,me=0,fe=0;k=0,A=7,this.encode.displayName="_encode_";for(var he,X,J,De,Te,Je,de,ee,se,ce=ae.data,ze=ae.width,Ce=ae.height,ve=4*ze,Ve=0;Ve<Ce;){for(he=0;he<ve;){for(Te=ve*Ve+he,de=-1,ee=0,se=0;se<64;se++)Je=Te+(ee=se>>3)*ve+(de=4*(7&se)),Ve+ee>=Ce&&(Je-=ve*(Ve+1+ee-Ce)),he+de>=ve&&(Je-=he+de-ve+4),X=ce[Je++],J=ce[Je++],De=ce[Je++],D[se]=(ge[X]+ge[J+256>>0]+ge[De+512>>0]>>16)-128,j[se]=(ge[X+768>>0]+ge[J+1024>>0]+ge[De+1280>>0]>>16)-128,Y[se]=(ge[X+1280>>0]+ge[J+1536>>0]+ge[De+1792>>0]>>16)-128;K=we(D,c,K,e,r),me=we(j,d,me,n,i),fe=we(Y,d,fe,n,i),he+=32}Ve+=8}if(A>=0){var Ye=[];Ye[1]=A+1,Ye[0]=(1<<A+1)-1,re(Ye)}return _e(65497),new Uint8Array(E)},t=t||50,function(){for(var ae=String.fromCharCode,H=0;H<256;H++)te[H]=ae(H)}(),e=V(N,$),n=V(I,R),r=V(Z,B),i=V(z,U),function(){for(var ae=1,H=2,K=1;K<=15;K++){for(var me=ae;me<H;me++)v[32767+me]=K,p[32767+me]=[],p[32767+me][1]=K,p[32767+me][0]=me;for(var fe=-(H-1);fe<=-ae;fe++)v[32767+fe]=K,p[32767+fe]=[],p[32767+fe][1]=K,p[32767+fe][0]=H-1+fe;ae<<=1,H<<=1}}(),function(){for(var ae=0;ae<256;ae++)ge[ae]=19595*ae,ge[ae+256>>0]=38470*ae,ge[ae+512>>0]=7471*ae+32768,ge[ae+768>>0]=-11059*ae,ge[ae+1024>>0]=-21709*ae,ge[ae+1280>>0]=32768*ae+8421375,ge[ae+1536>>0]=-27439*ae,ge[ae+1792>>0]=-5329*ae}(),Qe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function fc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function R5(t){function e(N){if(!N)throw Error("assert :P")}function n(N,$,Z){for(var B=0;4>B;B++)if(N[$+B]!=Z.charCodeAt(B))return!0;return!1}function r(N,$,Z,B,I){for(var R=0;R<I;R++)N[$+R]=Z[B+R]}function i(N,$,Z,B){for(var I=0;I<B;I++)N[$+I]=Z}function s(N){return new Int32Array(N)}function o(N,$){for(var Z=[],B=0;B<N;B++)Z.push(new $);return Z}function a(N,$){var Z=[];return function B(I,R,z){for(var U=z[R],V=0;V<U&&(I.push(z.length>R+1?[]:new $),!(z.length<R+1));V++)B(I[V],R+1,z)}(Z,0,N),Z}var l=function(){var N=this;function $(w,T){for(var q=1<<T-1>>>0;w&q;)q>>>=1;return q?(w&q-1)+q:w}function Z(w,T,q,ue,Le){e(!(ue%q));do w[T+(ue-=q)]=Le;while(0<ue)}function B(w,T,q,ue,Le){if(e(2328>=Le),512>=Le)var Me=s(512);else if((Me=s(Le))==null)return 0;return function(Ae,Ne,Fe,Xe,mt,Rt){var Ft,Pt,Zt=Ne,qt=1<<Fe,vt=s(16),xt=s(16);for(e(mt!=0),e(Xe!=null),e(Ae!=null),e(0<Fe),Pt=0;Pt<mt;++Pt){if(15<Xe[Pt])return 0;++vt[Xe[Pt]]}if(vt[0]==mt)return 0;for(xt[1]=0,Ft=1;15>Ft;++Ft){if(vt[Ft]>1<<Ft)return 0;xt[Ft+1]=xt[Ft]+vt[Ft]}for(Pt=0;Pt<mt;++Pt)Ft=Xe[Pt],0<Xe[Pt]&&(Rt[xt[Ft]++]=Pt);if(xt[15]==1)return(Xe=new I).g=0,Xe.value=Rt[0],Z(Ae,Zt,1,qt,Xe),qt;var nn,gn=-1,sn=qt-1,Fn=0,In=1,ar=1,h=1<<Fe;for(Pt=0,Ft=1,mt=2;Ft<=Fe;++Ft,mt<<=1){if(In+=ar<<=1,0>(ar-=vt[Ft]))return 0;for(;0<vt[Ft];--vt[Ft])(Xe=new I).g=Ft,Xe.value=Rt[Pt++],Z(Ae,Zt+Fn,mt,h,Xe),Fn=$(Fn,Ft)}for(Ft=Fe+1,mt=2;15>=Ft;++Ft,mt<<=1){if(In+=ar<<=1,0>(ar-=vt[Ft]))return 0;for(;0<vt[Ft];--vt[Ft]){if(Xe=new I,(Fn&sn)!=gn){for(Zt+=h,nn=1<<(gn=Ft)-Fe;15>gn&&!(0>=(nn-=vt[gn]));)++gn,nn<<=1;qt+=h=1<<(nn=gn-Fe),Ae[Ne+(gn=Fn&sn)].g=nn+Fe,Ae[Ne+gn].value=Zt-Ne-gn}Xe.g=Ft-Fe,Xe.value=Rt[Pt++],Z(Ae,Zt+(Fn>>Fe),mt,h,Xe),Fn=$(Fn,Ft)}}return In!=2*xt[15]-1?0:qt}(w,T,q,ue,Le,Me)}function I(){this.value=this.g=0}function R(){this.value=this.g=0}function z(){this.G=o(5,I),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Cs,R)}function U(w,T,q,ue){e(w!=null),e(T!=null),e(2147483648>ue),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=T,w.pa=q,w.Jd=T,w.Yc=q+ue,w.Zc=4<=ue?q+ue-4+1:q,he(w)}function V(w,T){for(var q=0;0<T--;)q|=J(w,128)<<T;return q}function re(w,T){var q=V(w,T);return X(w)?-q:q}function Q(w,T,q,ue){var Le,Me=0;for(e(w!=null),e(T!=null),e(4294967288>ue),w.Sb=ue,w.Ra=0,w.u=0,w.h=0,4<ue&&(ue=4),Le=0;Le<ue;++Le)Me+=T[q+Le]<<8*Le;w.Ra=Me,w.bb=ue,w.oa=T,w.pa=q}function _e(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Io-8>>>0,++w.bb,w.u-=8;K(w)&&(w.h=1,w.u=0)}function we(w,T){if(e(0<=T),!w.h&&T<=ea){var q=H(w)&Ia[T];return w.u+=T,_e(w),q}return w.h=1,w.u=0}function Qe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ae(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(w){return w.Ra>>>(w.u&Io-1)>>>0}function K(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Io}function me(w,T){w.u=T,w.h=K(w)}function fe(w){w.u>=$l&&(e(w.u>=$l),_e(w))}function he(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function X(w){return V(w,1)}function J(w,T){var q=w.Ca;0>w.b&&he(w);var ue=w.b,Le=q*T>>>8,Me=(w.I>>>ue>Le)+0;for(Me?(q-=Le,w.I-=Le+1<<ue>>>0):q=Le+1,ue=q,Le=0;256<=ue;)Le+=8,ue>>=8;return ue=7^Le+no[ue],w.b-=ue,w.Ca=(q<<ue)-1,Me}function De(w,T,q){w[T+0]=q>>24&255,w[T+1]=q>>16&255,w[T+2]=q>>8&255,w[T+3]=q>>0&255}function Te(w,T){return w[T+0]<<0|w[T+1]<<8}function Je(w,T){return Te(w,T)|w[T+2]<<16}function de(w,T){return Te(w,T)|Te(w,T+2)<<16}function ee(w,T){var q=1<<T;return e(w!=null),e(0<T),w.X=s(q),w.X==null?0:(w.Mb=32-T,w.Xa=T,1)}function se(w,T){e(w!=null),e(T!=null),e(w.Xa==T.Xa),r(T.X,0,w.X,0,1<<T.Xa)}function ce(){this.X=[],this.Xa=this.Mb=0}function ze(w,T,q,ue){e(q!=null),e(ue!=null);var Le=q[0],Me=ue[0];return Le==0&&(Le=(w*Me+T/2)/T),Me==0&&(Me=(T*Le+w/2)/w),0>=Le||0>=Me?0:(q[0]=Le,ue[0]=Me,1)}function Ce(w,T){return w+(1<<T)-1>>>T}function ve(w,T){return((4278255360&w)+(4278255360&T)>>>0&4278255360)+((16711935&w)+(16711935&T)>>>0&16711935)>>>0}function Ve(w,T){N[T]=function(q,ue,Le,Me,Ae,Ne,Fe){var Xe;for(Xe=0;Xe<Ae;++Xe){var mt=N[w](Ne[Fe+Xe-1],Le,Me+Xe);Ne[Fe+Xe]=ve(q[ue+Xe],mt)}}}function Ye(){this.ud=this.hd=this.jd=0}function Ze(w,T){return((4278124286&(w^T))>>>1)+(w&T)>>>0}function _t(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function We(w,T){return _t(w+(w-T+.5>>1))}function ut(w,T,q){return Math.abs(T-q)-Math.abs(w-q)}function Vt(w,T,q,ue,Le,Me,Ae){for(ue=Me[Ae-1],q=0;q<Le;++q)Me[Ae+q]=ue=ve(w[T+q],ue)}function tn(w,T,q,ue,Le){var Me;for(Me=0;Me<q;++Me){var Ae=w[T+Me],Ne=Ae>>8&255,Fe=16711935&(Fe=(Fe=16711935&Ae)+((Ne<<16)+Ne));ue[Le+Me]=(4278255360&Ae)+Fe>>>0}}function bn(w,T){T.jd=w>>0&255,T.hd=w>>8&255,T.ud=w>>16&255}function et(w,T,q,ue,Le,Me){var Ae;for(Ae=0;Ae<ue;++Ae){var Ne=T[q+Ae],Fe=Ne>>>8,Xe=Ne,mt=255&(mt=(mt=Ne>>>16)+((w.jd<<24>>24)*(Fe<<24>>24)>>>5));Xe=255&(Xe=(Xe=Xe+((w.hd<<24>>24)*(Fe<<24>>24)>>>5))+((w.ud<<24>>24)*(mt<<24>>24)>>>5)),Le[Me+Ae]=(4278255360&Ne)+(mt<<16)+Xe}}function at(w,T,q,ue,Le){N[T]=function(Me,Ae,Ne,Fe,Xe,mt,Rt,Ft,Pt){for(Fe=Rt;Fe<Ft;++Fe)for(Rt=0;Rt<Pt;++Rt)Xe[mt++]=Le(Ne[ue(Me[Ae++])])},N[w]=function(Me,Ae,Ne,Fe,Xe,mt,Rt){var Ft=8>>Me.b,Pt=Me.Ea,Zt=Me.K[0],qt=Me.w;if(8>Ft)for(Me=(1<<Me.b)-1,qt=(1<<Ft)-1;Ae<Ne;++Ae){var vt,xt=0;for(vt=0;vt<Pt;++vt)vt&Me||(xt=ue(Fe[Xe++])),mt[Rt++]=Le(Zt[xt&qt]),xt>>=Ft}else N["VP8LMapColor"+q](Fe,Xe,Zt,qt,mt,Rt,Ae,Ne,Pt)}}function it(w,T,q,ue,Le){for(q=T+q;T<q;){var Me=w[T++];ue[Le++]=Me>>16&255,ue[Le++]=Me>>8&255,ue[Le++]=Me>>0&255}}function zt(w,T,q,ue,Le){for(q=T+q;T<q;){var Me=w[T++];ue[Le++]=Me>>16&255,ue[Le++]=Me>>8&255,ue[Le++]=Me>>0&255,ue[Le++]=Me>>24&255}}function Kt(w,T,q,ue,Le){for(q=T+q;T<q;){var Me=(Ae=w[T++])>>16&240|Ae>>12&15,Ae=Ae>>0&240|Ae>>28&15;ue[Le++]=Me,ue[Le++]=Ae}}function Nn(w,T,q,ue,Le){for(q=T+q;T<q;){var Me=(Ae=w[T++])>>16&248|Ae>>13&7,Ae=Ae>>5&224|Ae>>3&31;ue[Le++]=Me,ue[Le++]=Ae}}function yn(w,T,q,ue,Le){for(q=T+q;T<q;){var Me=w[T++];ue[Le++]=Me>>0&255,ue[Le++]=Me>>8&255,ue[Le++]=Me>>16&255}}function Dn(w,T,q,ue,Le,Me){if(Me==0)for(q=T+q;T<q;)De(ue,((Me=w[T++])[0]>>24|Me[1]>>8&65280|Me[2]<<8&16711680|Me[3]<<24)>>>0),Le+=32;else r(ue,Le,w,T,q)}function er(w,T){N[T][0]=N[w+"0"],N[T][1]=N[w+"1"],N[T][2]=N[w+"2"],N[T][3]=N[w+"3"],N[T][4]=N[w+"4"],N[T][5]=N[w+"5"],N[T][6]=N[w+"6"],N[T][7]=N[w+"7"],N[T][8]=N[w+"8"],N[T][9]=N[w+"9"],N[T][10]=N[w+"10"],N[T][11]=N[w+"11"],N[T][12]=N[w+"12"],N[T][13]=N[w+"13"],N[T][14]=N[w+"0"],N[T][15]=N[w+"0"]}function Qt(w){return w==Gs||w==qs||w==wa||w==u}function Cn(){this.eb=[],this.size=this.A=this.fb=0}function Mn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function tr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Cn,this.f.kb=new Mn,this.sd=null}function yr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function xr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function cr(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function Gr(w,T){var q=w.T,ue=T.ba.f.RGBA,Le=ue.eb,Me=ue.fb+w.ka*ue.A,Ae=lo[T.ba.S],Ne=w.y,Fe=w.O,Xe=w.f,mt=w.N,Rt=w.ea,Ft=w.W,Pt=T.cc,Zt=T.dc,qt=T.Mc,vt=T.Nc,xt=w.ka,nn=w.ka+w.T,gn=w.U,sn=gn+1>>1;for(xt==0?Ae(Ne,Fe,null,null,Xe,mt,Rt,Ft,Xe,mt,Rt,Ft,Le,Me,null,null,gn):(Ae(T.ec,T.fc,Ne,Fe,Pt,Zt,qt,vt,Xe,mt,Rt,Ft,Le,Me-ue.A,Le,Me,gn),++q);xt+2<nn;xt+=2)Pt=Xe,Zt=mt,qt=Rt,vt=Ft,mt+=w.Rc,Ft+=w.Rc,Me+=2*ue.A,Ae(Ne,(Fe+=2*w.fa)-w.fa,Ne,Fe,Pt,Zt,qt,vt,Xe,mt,Rt,Ft,Le,Me-ue.A,Le,Me,gn);return Fe+=w.fa,w.j+nn<w.o?(r(T.ec,T.fc,Ne,Fe,gn),r(T.cc,T.dc,Xe,mt,sn),r(T.Mc,T.Nc,Rt,Ft,sn),q--):1&nn||Ae(Ne,Fe,null,null,Xe,mt,Rt,Ft,Xe,mt,Rt,Ft,Le,Me+ue.A,null,null,gn),q}function zs(w,T,q){var ue=w.F,Le=[w.J];if(ue!=null){var Me=w.U,Ae=T.ba.S,Ne=Ae==_a||Ae==wa;T=T.ba.f.RGBA;var Fe=[0],Xe=w.ka;Fe[0]=w.T,w.Kb&&(Xe==0?--Fe[0]:(--Xe,Le[0]-=w.width),w.j+w.ka+w.T==w.o&&(Fe[0]=w.o-w.j-Xe));var mt=T.eb;Xe=T.fb+Xe*T.A,w=Ii(ue,Le[0],w.width,Me,Fe,mt,Xe+(Ne?0:3),T.A),e(q==Fe),w&&Qt(Ae)&&Ws(mt,Xe,Ne,Me,Fe,T.A)}return 0}function Ai(w){var T=w.ma,q=T.ba.S,ue=11>q,Le=q==wr||q==tl||q==_a||q==Lo||q==12||Qt(q);if(T.memory=null,T.Ib=null,T.Jb=null,T.Nd=null,!tc(T.Oa,w,Le?11:12))return 0;if(Le&&Qt(q)&&fn(),w.da)alert("todo:use_scaling");else{if(ue){if(T.Ib=cr,w.Kb){if(q=w.U+1>>1,T.memory=s(w.U+2*q),T.memory==null)return 0;T.ec=T.memory,T.fc=0,T.cc=T.ec,T.dc=T.fc+w.U,T.Mc=T.cc,T.Nc=T.dc+q,T.Ib=Gr,fn()}}else alert("todo:EmitYUV");Le&&(T.Jb=zs,ue&&Mt())}if(ue&&!Dc){for(w=0;256>w;++w)Hh[w]=89858*(w-128)+Ll>>Uh,Wh[w]=-22014*(w-128)+Ll,Hp[w]=-45773*(w-128),gu[w]=113618*(w-128)+Ll>>Uh;for(w=lh;w<Nd;++w)T=76283*(w-16)+Ll>>Uh,Gh[w-lh]=Ur(T,255),Tf[w-lh]=Ur(T+8>>4,15);Dc=1}return 1}function Oo(w){var T=w.ma,q=w.U,ue=w.T;return e(!(1&w.ka)),0>=q||0>=ue?0:(q=T.Ib(w,T),T.Jb!=null&&T.Jb(w,T,q),T.Dc+=q,1)}function Ds(w){w.ma.memory=null}function nr(w,T,q,ue){return we(w,8)!=47?0:(T[0]=we(w,14)+1,q[0]=we(w,14)+1,ue[0]=we(w,1),we(w,3)!=0?0:!w.h)}function Os(w,T){if(4>w)return w+1;var q=w-2>>1;return(2+(1&w)<<q)+we(T,q)+1}function No(w,T){return 120<T?T-120:1<=(q=((q=ct[T-1])>>4)*w+(8-(15&q)))?q:1;var q}function lt(w,T,q){var ue=H(q),Le=w[T+=255&ue].g-8;return 0<Le&&(me(q,q.u+8),ue=H(q),T+=w[T].value,T+=ue&(1<<Le)-1),me(q,q.u+w[T].g),w[T].value}function Re(w,T,q){return q.g+=w.g,q.value+=w.value<<T>>>0,e(8>=q.g),w.g}function ft(w,T,q){var ue=w.xc;return e((T=ue==0?0:w.vc[w.md*(q>>ue)+(T>>ue)])<w.Wb),w.Ya[T]}function En(w,T,q,ue){var Le=w.ab,Me=w.c*T,Ae=w.C;T=Ae+T;var Ne=q,Fe=ue;for(ue=w.Ta,q=w.Ua;0<Le--;){var Xe=w.gc[Le],mt=Ae,Rt=T,Ft=Ne,Pt=Fe,Zt=(Fe=ue,Ne=q,Xe.Ea);switch(e(mt<Rt),e(Rt<=Xe.nc),Xe.hc){case 2:Tc(Ft,Pt,(Rt-mt)*Zt,Fe,Ne);break;case 0:var qt=mt,vt=Rt,xt=Fe,nn=Ne,gn=(h=Xe).Ea;qt==0&&(_o(Ft,Pt,null,null,1,xt,nn),Vt(Ft,Pt+1,0,0,gn-1,xt,nn+1),Pt+=gn,nn+=gn,++qt);for(var sn=1<<h.b,Fn=sn-1,In=Ce(gn,h.b),ar=h.K,h=h.w+(qt>>h.b)*In;qt<vt;){var m=ar,_=h,C=1;for(wo(Ft,Pt,xt,nn-gn,1,xt,nn);C<gn;){var M=(C&~Fn)+sn;M>gn&&(M=gn),(0,Xa[m[_++]>>8&15])(Ft,Pt+ +C,xt,nn+C-gn,M-C,xt,nn+C),C=M}Pt+=gn,nn+=gn,++qt&Fn||(h+=In)}Rt!=Xe.nc&&r(Fe,Ne-Zt,Fe,Ne+(Rt-mt-1)*Zt,Zt);break;case 1:for(Zt=Ft,vt=Pt,gn=(Ft=Xe.Ea)-(nn=Ft&~(xt=(Pt=1<<Xe.b)-1)),qt=Ce(Ft,Xe.b),sn=Xe.K,Xe=Xe.w+(mt>>Xe.b)*qt;mt<Rt;){for(Fn=sn,In=Xe,ar=new Ye,h=vt+nn,m=vt+Ft;vt<h;)bn(Fn[In++],ar),Ja(ar,Zt,vt,Pt,Fe,Ne),vt+=Pt,Ne+=Pt;vt<m&&(bn(Fn[In++],ar),Ja(ar,Zt,vt,gn,Fe,Ne),vt+=gn,Ne+=gn),++mt&xt||(Xe+=qt)}break;case 3:if(Ft==Fe&&Pt==Ne&&0<Xe.b){for(vt=Fe,Ft=Zt=Ne+(Rt-mt)*Zt-(nn=(Rt-mt)*Ce(Xe.Ea,Xe.b)),Pt=Fe,xt=Ne,qt=[],nn=(gn=nn)-1;0<=nn;--nn)qt[nn]=Pt[xt+nn];for(nn=gn-1;0<=nn;--nn)vt[Ft+nn]=qt[nn];Is(Xe,mt,Rt,Fe,Zt,Fe,Ne)}else Is(Xe,mt,Rt,Ft,Pt,Fe,Ne)}Ne=ue,Fe=q}Fe!=q&&r(ue,q,Ne,Fe,Me)}function Un(w,T){var q=w.V,ue=w.Ba+w.c*w.C,Le=T-w.C;if(e(T<=w.l.o),e(16>=Le),0<Le){var Me=w.l,Ae=w.Ta,Ne=w.Ua,Fe=Me.width;if(En(w,Le,q,ue),Le=Ne=[Ne],e((q=w.C)<(ue=T)),e(Me.v<Me.va),ue>Me.o&&(ue=Me.o),q<Me.j){var Xe=Me.j-q;q=Me.j,Le[0]+=Xe*Fe}if(q>=ue?q=0:(Le[0]+=4*Me.v,Me.ka=q-Me.j,Me.U=Me.va-Me.v,Me.T=ue-q,q=1),q){if(Ne=Ne[0],11>(q=w.ca).S){var mt=q.f.RGBA,Rt=(ue=q.S,Le=Me.U,Me=Me.T,Xe=mt.eb,mt.A),Ft=Me;for(mt=mt.fb+w.Ma*mt.A;0<Ft--;){var Pt=Ae,Zt=Ne,qt=Le,vt=Xe,xt=mt;switch(ue){case Ro:so(Pt,Zt,qt,vt,xt);break;case wr:Hs(Pt,Zt,qt,vt,xt);break;case Gs:Hs(Pt,Zt,qt,vt,xt),Ws(vt,xt,0,qt,1,0);break;case el:oo(Pt,Zt,qt,vt,xt);break;case tl:Dn(Pt,Zt,qt,vt,xt,1);break;case qs:Dn(Pt,Zt,qt,vt,xt,1),Ws(vt,xt,0,qt,1,0);break;case _a:Dn(Pt,Zt,qt,vt,xt,0);break;case wa:Dn(Pt,Zt,qt,vt,xt,0),Ws(vt,xt,1,qt,1,0);break;case Lo:Ba(Pt,Zt,qt,vt,xt);break;case u:Ba(Pt,Zt,qt,vt,xt),Pi(vt,xt,qt,1,0);break;case oh:ta(Pt,Zt,qt,vt,xt);break;default:e(0)}Ne+=Fe,mt+=Rt}w.Ma+=Me}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=q.height)}}w.C=T,e(w.C<=w.i)}function wn(w){var T;if(0<w.ua)return 0;for(T=0;T<w.Wb;++T){var q=w.Ya[T].G,ue=w.Ya[T].H;if(0<q[1][ue[1]+0].g||0<q[2][ue[2]+0].g||0<q[3][ue[3]+0].g)return 0}return 1}function Ut(w,T,q,ue,Le,Me){if(w.Z!=0){var Ae=w.qd,Ne=w.rd;for(e(bi[w.Z]!=null);T<q;++T)bi[w.Z](Ae,Ne,ue,Le,ue,Le,Me),Ae=ue,Ne=Le,Le+=Me;w.qd=Ae,w.rd=Ne}}function Jn(w,T){var q=w.l.ma,ue=q.Z==0||q.Z==1?w.l.j:w.C;if(ue=w.C<ue?ue:w.C,e(T<=w.l.o),T>ue){var Le=w.l.width,Me=q.ca,Ae=q.tb+Le*ue,Ne=w.V,Fe=w.Ba+w.c*ue,Xe=w.gc;e(w.ab==1),e(Xe[0].hc==3),ro(Xe[0],ue,T,Ne,Fe,Me,Ae),Ut(q,ue,T,Me,Ae,Le)}w.C=w.Ma=T}function Ct(w,T,q,ue,Le,Me,Ae){var Ne=w.$/ue,Fe=w.$%ue,Xe=w.m,mt=w.s,Rt=q+w.$,Ft=Rt;Le=q+ue*Le;var Pt=q+ue*Me,Zt=280+mt.ua,qt=w.Pb?Ne:16777216,vt=0<mt.ua?mt.Wa:null,xt=mt.wc,nn=Rt<Pt?ft(mt,Fe,Ne):null;e(w.C<Me),e(Pt<=Le);var gn=!1;e:for(;;){for(;gn||Rt<Pt;){var sn=0;if(Ne>=qt){var Fn=Rt-q;e((qt=w).Pb),qt.wd=qt.m,qt.xd=Fn,0<qt.s.ua&&se(qt.s.Wa,qt.s.vb),qt=Ne+Gt}if(Fe&xt||(nn=ft(mt,Fe,Ne)),e(nn!=null),nn.Qb&&(T[Rt]=nn.qb,gn=!0),!gn)if(fe(Xe),nn.jc){sn=Xe,Fn=T;var In=Rt,ar=nn.pd[H(sn)&Cs-1];e(nn.jc),256>ar.g?(me(sn,sn.u+ar.g),Fn[In]=ar.value,sn=0):(me(sn,sn.u+ar.g-256),e(256<=ar.value),sn=ar.value),sn==0&&(gn=!0)}else sn=lt(nn.G[0],nn.H[0],Xe);if(Xe.h)break;if(gn||256>sn){if(!gn)if(nn.nd)T[Rt]=(nn.qb|sn<<8)>>>0;else{if(fe(Xe),gn=lt(nn.G[1],nn.H[1],Xe),fe(Xe),Fn=lt(nn.G[2],nn.H[2],Xe),In=lt(nn.G[3],nn.H[3],Xe),Xe.h)break;T[Rt]=(In<<24|gn<<16|sn<<8|Fn)>>>0}if(gn=!1,++Rt,++Fe>=ue&&(Fe=0,++Ne,Ae!=null&&Ne<=Me&&!(Ne%16)&&Ae(w,Ne),vt!=null))for(;Ft<Rt;)sn=T[Ft++],vt.X[(506832829*sn&4294967295)>>>vt.Mb]=sn}else if(280>sn){if(sn=Os(sn-256,Xe),Fn=lt(nn.G[4],nn.H[4],Xe),fe(Xe),Fn=No(ue,Fn=Os(Fn,Xe)),Xe.h)break;if(Rt-q<Fn||Le-Rt<sn)break e;for(In=0;In<sn;++In)T[Rt+In]=T[Rt+In-Fn];for(Rt+=sn,Fe+=sn;Fe>=ue;)Fe-=ue,++Ne,Ae!=null&&Ne<=Me&&!(Ne%16)&&Ae(w,Ne);if(e(Rt<=Le),Fe&xt&&(nn=ft(mt,Fe,Ne)),vt!=null)for(;Ft<Rt;)sn=T[Ft++],vt.X[(506832829*sn&4294967295)>>>vt.Mb]=sn}else{if(!(sn<Zt))break e;for(gn=sn-280,e(vt!=null);Ft<Rt;)sn=T[Ft++],vt.X[(506832829*sn&4294967295)>>>vt.Mb]=sn;sn=Rt,e(!(gn>>>(Fn=vt).Xa)),T[sn]=Fn.X[gn],gn=!0}gn||e(Xe.h==K(Xe))}if(w.Pb&&Xe.h&&Rt<Le)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&se(w.s.vb,w.s.Wa);else{if(Xe.h)break e;Ae!=null&&Ae(w,Ne>Me?Me:Ne),w.a=0,w.$=Rt-q}return 1}return w.a=3,0}function Ht(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var T=w.Wa;T!=null&&(T.X=null),w.vb=null,e(w!=null)}function Ln(){var w=new Fl;return w==null?null:(w.a=0,w.xb=Nu,er("Predictor","VP8LPredictors"),er("Predictor","VP8LPredictors_C"),er("PredictorAdd","VP8LPredictorsAdd"),er("PredictorAdd","VP8LPredictorsAdd_C"),Tc=tn,Ja=et,so=it,Hs=zt,Ba=Kt,ta=Nn,oo=yn,N.VP8LMapColor32b=Ka,N.VP8LMapColor8b=io,w)}function jr(w,T,q,ue,Le){var Me=1,Ae=[w],Ne=[T],Fe=ue.m,Xe=ue.s,mt=null,Rt=0;e:for(;;){if(q)for(;Me&&we(Fe,1);){var Ft=Ae,Pt=Ne,Zt=ue,qt=1,vt=Zt.m,xt=Zt.gc[Zt.ab],nn=we(vt,2);if(Zt.Oc&1<<nn)Me=0;else{switch(Zt.Oc|=1<<nn,xt.hc=nn,xt.Ea=Ft[0],xt.nc=Pt[0],xt.K=[null],++Zt.ab,e(4>=Zt.ab),nn){case 0:case 1:xt.b=we(vt,3)+2,qt=jr(Ce(xt.Ea,xt.b),Ce(xt.nc,xt.b),0,Zt,xt.K),xt.K=xt.K[0];break;case 3:var gn,sn=we(vt,8)+1,Fn=16<sn?0:4<sn?1:2<sn?2:3;if(Ft[0]=Ce(xt.Ea,Fn),xt.b=Fn,gn=qt=jr(sn,1,0,Zt,xt.K)){var In,ar=sn,h=xt,m=1<<(8>>h.b),_=s(m);if(_==null)gn=0;else{var C=h.K[0],M=h.w;for(_[0]=h.K[0][0],In=1;In<1*ar;++In)_[In]=ve(C[M+In],_[In-1]);for(;In<4*m;++In)_[In]=0;h.K[0]=null,h.K[0]=_,gn=1}}qt=gn;break;case 2:break;default:e(0)}Me=qt}}if(Ae=Ae[0],Ne=Ne[0],Me&&we(Fe,1)&&!(Me=1<=(Rt=we(Fe,4))&&11>=Rt)){ue.a=3;break e}var W;if(W=Me)t:{var ne,oe,ye,Ee=ue,rt=Ae,qe=Ne,wt=Rt,It=q,en=Ee.m,xn=Ee.s,An=[null],br=1,nt=0,st=Ot[wt];n:for(;;){if(It&&we(en,1)){var gt=we(en,3)+2,jt=Ce(rt,gt),Et=Ce(qe,gt),Bt=jt*Et;if(!jr(jt,Et,0,Ee,An))break n;for(An=An[0],xn.xc=gt,ne=0;ne<Bt;++ne){var be=An[ne]>>8&65535;An[ne]=be,be>=br&&(br=be+1)}}if(en.h)break n;for(oe=0;5>oe;++oe){var ke=G[oe];!oe&&0<wt&&(ke+=1<<wt),nt<ke&&(nt=ke)}var $e=o(br*st,I),je=br,He=o(je,z);if(He==null)var Ge=null;else e(65536>=je),Ge=He;var ht=s(nt);if(Ge==null||ht==null||$e==null){Ee.a=1;break n}var dt=$e;for(ne=ye=0;ne<br;++ne){var yt=Ge[ne],At=yt.G,Tt=yt.H,ln=0,Wn=1,Xn=0;for(oe=0;5>oe;++oe){ke=G[oe],At[oe]=dt,Tt[oe]=ye,!oe&&0<wt&&(ke+=1<<wt);i:{var lr,_i=ke,Bi=Ee,ni=ht,Hi=dt,zo=ye,ic=0,Ua=Bi.m,Id=we(Ua,1);if(i(ni,0,0,_i),Id){var Sl=we(Ua,1)+1,Oc=we(Ua,1),Ha=we(Ua,Oc==0?1:8);ni[Ha]=1,Sl==2&&(ni[Ha=we(Ua,8)]=1);var uo=1}else{var _s=s(19),Bf=we(Ua,4)+4;if(19<Bf){Bi.a=3;var Bd=0;break i}for(lr=0;lr<Bf;++lr)_s[Pe[lr]]=we(Ua,3);var Rd=void 0,Fd=void 0,Rf=Bi,ci=_s,Ff=_i,Vm=ni,uh=0,sc=Rf.m,Um=8,Hm=o(128,I);r:for(;B(Hm,0,7,ci,19);){if(we(sc,1)){var Vl=2+2*we(sc,3);if((Rd=2+we(sc,Vl))>Ff)break r}else Rd=Ff;for(Fd=0;Fd<Ff&&Rd--;){fe(sc);var Wm=Hm[0+(127&H(sc))];me(sc,sc.u+Wm.g);var oc=Wm.value;if(16>oc)Vm[Fd++]=oc,oc!=0&&(Um=oc);else{var Wp=oc==16,Gp=oc-16,Gm=P[Gp],rl=we(sc,y[Gp])+Gm;if(Fd+rl>Ff)break r;for(var Nc=Wp?Um:0;0<rl--;)Vm[Fd++]=Nc}}uh=1;break r}uh||(Rf.a=3),uo=uh}(uo=uo&&!Ua.h)&&(ic=B(Hi,zo,8,ni,_i)),uo&&ic!=0?Bd=ic:(Bi.a=3,Bd=0)}if(Bd==0)break n;if(Wn&&le[oe]==1&&(Wn=dt[ye].g==0),ln+=dt[ye].g,ye+=Bd,3>=oe){var ch,jf=ht[0];for(ch=1;ch<ke;++ch)ht[ch]>jf&&(jf=ht[ch]);Xn+=jf}}if(yt.nd=Wn,yt.Qb=0,Wn&&(yt.qb=(At[3][Tt[3]+0].value<<24|At[1][Tt[1]+0].value<<16|At[2][Tt[2]+0].value)>>>0,ln==0&&256>At[0][Tt[0]+0].value&&(yt.Qb=1,yt.qb+=At[0][Tt[0]+0].value<<8)),yt.jc=!yt.Qb&&6>Xn,yt.jc){var hh,Iu=yt;for(hh=0;hh<Cs;++hh){var Bu=hh,ac=Iu.pd[Bu],qh=Iu.G[0][Iu.H[0]+Bu];256<=qh.value?(ac.g=qh.g+256,ac.value=qh.value):(ac.g=0,ac.value=0,Bu>>=Re(qh,8,ac),Bu>>=Re(Iu.G[1][Iu.H[1]+Bu],16,ac),Bu>>=Re(Iu.G[2][Iu.H[2]+Bu],0,ac),Re(Iu.G[3][Iu.H[3]+Bu],24,ac))}}}xn.vc=An,xn.Wb=br,xn.Ya=Ge,xn.yc=$e,W=1;break t}W=0}if(!(Me=W)){ue.a=3;break e}if(0<Rt){if(Xe.ua=1<<Rt,!ee(Xe.Wa,Rt)){ue.a=1,Me=0;break e}}else Xe.ua=0;var jd=ue,lc=Ae,t1=Ne,Ru=jd.s,zf=Ru.xc;if(jd.c=lc,jd.i=t1,Ru.md=Ce(lc,zf),Ru.wc=zf==0?-1:(1<<zf)-1,q){ue.xb=Od;break e}if((mt=s(Ae*Ne))==null){ue.a=1,Me=0;break e}Me=(Me=Ct(ue,mt,0,Ae,Ne,Ne,null))&&!Fe.h;break e}return Me?(Le!=null?Le[0]=mt:(e(mt==null),e(q)),ue.$=0,q||Ht(Xe)):Ht(Xe),Me}function un(w,T){var q=w.c*w.i,ue=q+T+16*T;return e(w.c<=T),w.V=s(ue),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+q+T,1)}function an(w,T){var q=w.C,ue=T-q,Le=w.V,Me=w.Ba+w.c*q;for(e(T<=w.l.o);0<ue;){var Ae=16<ue?16:ue,Ne=w.l.ma,Fe=w.l.width,Xe=Fe*Ae,mt=Ne.ca,Rt=Ne.tb+Fe*q,Ft=w.Ta,Pt=w.Ua;En(w,Ae,Le,Me),bs(Ft,Pt,mt,Rt,Xe),Ut(Ne,q,q+Ae,mt,Rt,Fe),ue-=Ae,Le+=Ae*w.c,q+=Ae}e(q==T),w.C=w.Ma=T}function qn(){this.ub=this.yd=this.td=this.Rb=0}function li(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function xi(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function zi(){this.Yb=function(){var w=[];return function T(q,ue,Le){for(var Me=Le[ue],Ae=0;Ae<Me&&(q.push(Le.length>ue+1?[]:0),!(Le.length<ue+1));Ae++)T(q[Ae],ue+1,Le)}(w,0,[3,11]),w}()}function Jr(){this.jb=s(3),this.Wc=a([4,8],zi),this.Xc=a([4,17],zi)}function _r(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function kr(){this.ld=this.La=this.dd=this.tc=0}function di(){this.Na=this.la=0}function Ir(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function on(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ni(){this.uc=this.M=this.Nb=0,this.wa=Array(new kr),this.Y=0,this.ya=Array(new on),this.aa=0,this.l=new Qr}function vi(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Yi(){this.cb=this.a=0,this.sc="",this.m=new Qe,this.Od=new qn,this.Kc=new li,this.ed=new _r,this.Qa=new xi,this.Ic=this.$c=this.Aa=0,this.D=new Ni,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Qe),this.ia=0,this.pb=o(4,Ir),this.Pa=new Jr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new vi),this.Hd=0,this.rb=Array(new di),this.sb=0,this.wa=Array(new kr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new on),this.L=this.aa=0,this.gd=a([4,2],kr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Qr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function fr(){var w=new Yi;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,or||(or=vo)),w}function On(w,T,q){return w.a==0&&(w.a=T,w.sc=q,w.cb=0),0}function Lr(w,T,q){return 3<=q&&w[T+0]==157&&w[T+1]==1&&w[T+2]==42}function Ls(w,T){if(w==null)return 0;if(w.a=0,w.sc="OK",T==null)return On(w,2,"null VP8Io passed to VP8GetHeaders()");var q=T.data,ue=T.w,Le=T.ha;if(4>Le)return On(w,7,"Truncated header.");var Me=q[ue+0]|q[ue+1]<<8|q[ue+2]<<16,Ae=w.Od;if(Ae.Rb=!(1&Me),Ae.td=Me>>1&7,Ae.yd=Me>>4&1,Ae.ub=Me>>5,3<Ae.td)return On(w,3,"Incorrect keyframe parameters.");if(!Ae.yd)return On(w,4,"Frame not displayable.");ue+=3,Le-=3;var Ne=w.Kc;if(Ae.Rb){if(7>Le)return On(w,7,"cannot parse picture header");if(!Lr(q,ue,Le))return On(w,3,"Bad code word");Ne.c=16383&(q[ue+4]<<8|q[ue+3]),Ne.Td=q[ue+4]>>6,Ne.i=16383&(q[ue+6]<<8|q[ue+5]),Ne.Ud=q[ue+6]>>6,ue+=7,Le-=7,w.za=Ne.c+15>>4,w.Ub=Ne.i+15>>4,T.width=Ne.c,T.height=Ne.i,T.Da=0,T.j=0,T.v=0,T.va=T.width,T.o=T.height,T.da=0,T.ib=T.width,T.hb=T.height,T.U=T.width,T.T=T.height,i((Me=w.Pa).jb,0,255,Me.jb.length),e((Me=w.Qa)!=null),Me.Cb=0,Me.Bb=0,Me.Fb=1,i(Me.Zb,0,0,Me.Zb.length),i(Me.Lb,0,0,Me.Lb)}if(Ae.ub>Le)return On(w,7,"bad partition length");U(Me=w.m,q,ue,Ae.ub),ue+=Ae.ub,Le-=Ae.ub,Ae.Rb&&(Ne.Ld=X(Me),Ne.Kd=X(Me)),Ne=w.Qa;var Fe,Xe=w.Pa;if(e(Me!=null),e(Ne!=null),Ne.Cb=X(Me),Ne.Cb){if(Ne.Bb=X(Me),X(Me)){for(Ne.Fb=X(Me),Fe=0;4>Fe;++Fe)Ne.Zb[Fe]=X(Me)?re(Me,7):0;for(Fe=0;4>Fe;++Fe)Ne.Lb[Fe]=X(Me)?re(Me,6):0}if(Ne.Bb)for(Fe=0;3>Fe;++Fe)Xe.jb[Fe]=X(Me)?V(Me,8):255}else Ne.Bb=0;if(Me.Ka)return On(w,3,"cannot parse segment header");if((Ne=w.ed).zd=X(Me),Ne.Tb=V(Me,6),Ne.wb=V(Me,3),Ne.Pc=X(Me),Ne.Pc&&X(Me)){for(Xe=0;4>Xe;++Xe)X(Me)&&(Ne.vd[Xe]=re(Me,6));for(Xe=0;4>Xe;++Xe)X(Me)&&(Ne.od[Xe]=re(Me,6))}if(w.L=Ne.Tb==0?0:Ne.zd?1:2,Me.Ka)return On(w,3,"cannot parse filter header");var mt=Le;if(Le=Fe=ue,ue=Fe+mt,Ne=mt,w.Xb=(1<<V(w.m,2))-1,mt<3*(Xe=w.Xb))q=7;else{for(Fe+=3*Xe,Ne-=3*Xe,mt=0;mt<Xe;++mt){var Rt=q[Le+0]|q[Le+1]<<8|q[Le+2]<<16;Rt>Ne&&(Rt=Ne),U(w.Jc[+mt],q,Fe,Rt),Fe+=Rt,Ne-=Rt,Le+=3}U(w.Jc[+Xe],q,Fe,Ne),q=Fe<ue?0:5}if(q!=0)return On(w,q,"cannot parse partitions");for(q=V(Fe=w.m,7),Le=X(Fe)?re(Fe,4):0,ue=X(Fe)?re(Fe,4):0,Ne=X(Fe)?re(Fe,4):0,Xe=X(Fe)?re(Fe,4):0,Fe=X(Fe)?re(Fe,4):0,mt=w.Qa,Rt=0;4>Rt;++Rt){if(mt.Cb){var Ft=mt.Zb[Rt];mt.Fb||(Ft+=q)}else{if(0<Rt){w.pb[Rt]=w.pb[0];continue}Ft=q}var Pt=w.pb[Rt];Pt.Sc[0]=cn[Ur(Ft+Le,127)],Pt.Sc[1]=zn[Ur(Ft+0,127)],Pt.Eb[0]=2*cn[Ur(Ft+ue,127)],Pt.Eb[1]=101581*zn[Ur(Ft+Ne,127)]>>16,8>Pt.Eb[1]&&(Pt.Eb[1]=8),Pt.Qc[0]=cn[Ur(Ft+Xe,117)],Pt.Qc[1]=zn[Ur(Ft+Fe,127)],Pt.lc=Ft+Fe}if(!Ae.Rb)return On(w,4,"Not a key frame.");for(X(Me),Ae=w.Pa,q=0;4>q;++q){for(Le=0;8>Le;++Le)for(ue=0;3>ue;++ue)for(Ne=0;11>Ne;++Ne)Xe=J(Me,Fo[q][Le][ue][Ne])?V(Me,8):Ys[q][Le][ue][Ne],Ae.Wc[q][Le].Yb[ue][Ne]=Xe;for(Le=0;17>Le;++Le)Ae.Xc[q][Le]=Ae.Wc[q][ah[Le]]}return w.kc=X(Me),w.kc&&(w.Bd=V(Me,8)),w.cb=1}function vo(w,T,q,ue,Le,Me,Ae){var Ne=T[Le].Yb[q];for(q=0;16>Le;++Le){if(!J(w,Ne[q+0]))return Le;for(;!J(w,Ne[q+1]);)if(Ne=T[++Le].Yb[0],q=0,Le==16)return 16;var Fe=T[Le+1].Yb;if(J(w,Ne[q+2])){var Xe=w,mt=0;if(J(Xe,(Ft=Ne)[(Rt=q)+3]))if(J(Xe,Ft[Rt+6])){for(Ne=0,Rt=2*(mt=J(Xe,Ft[Rt+8]))+(Ft=J(Xe,Ft[Rt+9+mt])),mt=0,Ft=$r[Rt];Ft[Ne];++Ne)mt+=mt+J(Xe,Ft[Ne]);mt+=3+(8<<Rt)}else J(Xe,Ft[Rt+7])?(mt=7+2*J(Xe,165),mt+=J(Xe,145)):mt=5+J(Xe,159);else mt=J(Xe,Ft[Rt+4])?3+J(Xe,Ft[Rt+5]):2;Ne=Fe[2]}else mt=1,Ne=Fe[1];Fe=Ae+Ps[Le],0>(Xe=w).b&&he(Xe);var Rt,Ft=Xe.b,Pt=(Rt=Xe.Ca>>1)-(Xe.I>>Ft)>>31;--Xe.b,Xe.Ca+=Pt,Xe.Ca|=1,Xe.I-=(Rt+1&Pt)<<Ft,Me[Fe]=((mt^Pt)-Pt)*ue[(0<Le)+0]}return 16}function hr(w){var T=w.rb[w.sb-1];T.la=0,T.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function Pn(w,T){if(w==null)return 0;if(T==null)return On(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!Ls(w,T))return 0;if(e(w.cb),T.ac==null||T.ac(T)){T.ob&&(w.L=0);var q=nl[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=T.v-q>>4,w.zb=T.j-q>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=T.o+15+q>>4,w.Hb=T.va+15+q>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var ue=w.ed;for(q=0;4>q;++q){var Le;if(w.Qa.Cb){var Me=w.Qa.Lb[q];w.Qa.Fb||(Me+=ue.Tb)}else Me=ue.Tb;for(Le=0;1>=Le;++Le){var Ae=w.gd[q][Le],Ne=Me;if(ue.Pc&&(Ne+=ue.vd[0],Le&&(Ne+=ue.od[0])),0<(Ne=0>Ne?0:63<Ne?63:Ne)){var Fe=Ne;0<ue.wb&&(Fe=4<ue.wb?Fe>>2:Fe>>1)>9-ue.wb&&(Fe=9-ue.wb),1>Fe&&(Fe=1),Ae.dd=Fe,Ae.tc=2*Ne+Fe,Ae.ld=40<=Ne?2:15<=Ne?1:0}else Ae.tc=0;Ae.La=Le}}}q=0}else On(w,6,"Frame setup failed"),q=w.a;if(q=q==0){if(q){w.$c=0,0<w.Aa||(w.Ic=Nf);e:{q=w.Ic,ue=4*(Fe=w.za);var Xe=32*Fe,mt=Fe+1,Rt=0<w.L?Fe*(0<w.Aa?2:1):0,Ft=(w.Aa==2?2:1)*Fe;if((Ae=ue+832+(Le=3*(16*q+nl[w.L])/2*Xe)+(Me=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=Ae)q=0;else{if(Ae>w.Vb){if(w.Vb=0,w.Ec=s(Ae),w.Fc=0,w.Ec==null){q=On(w,1,"no memory during frame initialization.");break e}w.Vb=Ae}Ae=w.Ec,Ne=w.Fc,w.Ac=Ae,w.Bc=Ne,Ne+=ue,w.Gd=o(Xe,vi),w.Hd=0,w.rb=o(mt+1,di),w.sb=1,w.wa=Rt?o(Rt,kr):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=Fe),e(!0),w.oc=Ae,w.pc=Ne,Ne+=832,w.ya=o(Ft,on),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=Fe),w.R=16*Fe,w.B=8*Fe,Fe=(Xe=nl[w.L])*w.R,Xe=Xe/2*w.B,w.sa=Ae,w.ta=Ne+Fe,w.qa=w.sa,w.ra=w.ta+16*q*w.R+Xe,w.Ha=w.qa,w.Ia=w.ra+8*q*w.B+Xe,w.$c=0,Ne+=Le,w.mb=Me?Ae:null,w.nb=Me?Ne:null,e(Ne+Me<=w.Fc+w.Vb),hr(w),i(w.Ac,w.Bc,0,ue),q=1}}if(q){if(T.ka=0,T.y=w.sa,T.O=w.ta,T.f=w.qa,T.N=w.ra,T.ea=w.Ha,T.Vd=w.Ia,T.fa=w.R,T.Rc=w.B,T.F=null,T.J=0,!nc){for(q=-255;255>=q;++q)Ui[255+q]=0>q?-q:q;for(q=-1020;1020>=q;++q)na[1020+q]=-128>q?-128:127<q?127:q;for(q=-112;112>=q;++q)Bo[112+q]=-16>q?-16:15<q?15:q;for(q=-255;510>=q;++q)ca[255+q]=0>q?0:255<q?255:q;nc=1}Lt=Vi,Yt=$s,Rn=Ns,rr=dr,Pr=Qs,Nt=ps,Ki=Du,Ei=Oa,pu=ua,xo=du,Xi=cu,Ra=hu,Qa=Li,Fa=Ac,ja=gs,za=mr,ti=ms,ba=Rl,xa[0]=Ar,xa[1]=fi,xa[2]=Sr,xa[3]=is,xa[4]=Ko,xa[5]=Ta,xa[6]=Aa,xa[7]=Xo,xa[8]=_l,xa[9]=la,Va[0]=aa,Va[1]=vn,Va[2]=Fr,Va[3]=hs,Va[4]=ds,Va[5]=ka,Va[6]=bl,ha[0]=eo,ha[1]=kn,ha[2]=Da,ha[3]=Er,ha[4]=lu,ha[5]=yo,ha[6]=Au,q=1}else q=0}q&&(q=function(Pt,Zt){for(Pt.M=0;Pt.M<Pt.Va;++Pt.M){var qt,vt=Pt.Jc[Pt.M&Pt.Xb],xt=Pt.m,nn=Pt;for(qt=0;qt<nn.za;++qt){var gn=xt,sn=nn,Fn=sn.Ac,In=sn.Bc+4*qt,ar=sn.zc,h=sn.ya[sn.aa+qt];if(sn.Qa.Bb?h.$b=J(gn,sn.Pa.jb[0])?2+J(gn,sn.Pa.jb[2]):J(gn,sn.Pa.jb[1]):h.$b=0,sn.kc&&(h.Ad=J(gn,sn.Bd)),h.Za=!J(gn,145)+0,h.Za){var m=h.Ob,_=0;for(sn=0;4>sn;++sn){var C,M=ar[0+sn];for(C=0;4>C;++C){M=Ji[Fn[In+C]][M];for(var W=as[J(gn,M[0])];0<W;)W=as[2*W+J(gn,M[W])];M=-W,Fn[In+C]=M}r(m,_,Fn,In,4),_+=4,ar[0+sn]=M}}else M=J(gn,156)?J(gn,128)?1:3:J(gn,163)?2:0,h.Ob[0]=M,i(Fn,In,M,4),i(ar,0,M,4);h.Dd=J(gn,142)?J(gn,114)?J(gn,183)?1:3:2:0}if(nn.m.Ka)return On(Pt,7,"Premature end-of-partition0 encountered.");for(;Pt.ja<Pt.za;++Pt.ja){if(nn=vt,gn=(xt=Pt).rb[xt.sb-1],Fn=xt.rb[xt.sb+xt.ja],qt=xt.ya[xt.aa+xt.ja],In=xt.kc?qt.Ad:0)gn.la=Fn.la=0,qt.Za||(gn.Na=Fn.Na=0),qt.Hc=0,qt.Gc=0,qt.ia=0;else{var ne,oe;if(gn=Fn,Fn=nn,In=xt.Pa.Xc,ar=xt.ya[xt.aa+xt.ja],h=xt.pb[ar.$b],sn=ar.ad,m=0,_=xt.rb[xt.sb-1],M=C=0,i(sn,m,0,384),ar.Za)var ye=0,Ee=In[3];else{W=s(16);var rt=gn.Na+_.Na;if(rt=or(Fn,In[1],rt,h.Eb,0,W,0),gn.Na=_.Na=(0<rt)+0,1<rt)Lt(W,0,sn,m);else{var qe=W[0]+3>>3;for(W=0;256>W;W+=16)sn[m+W]=qe}ye=1,Ee=In[0]}var wt=15&gn.la,It=15&_.la;for(W=0;4>W;++W){var en=1&It;for(qe=oe=0;4>qe;++qe)wt=wt>>1|(en=(rt=or(Fn,Ee,rt=en+(1&wt),h.Sc,ye,sn,m))>ye)<<7,oe=oe<<2|(3<rt?3:1<rt?2:sn[m+0]!=0),m+=16;wt>>=4,It=It>>1|en<<7,C=(C<<8|oe)>>>0}for(Ee=wt,ye=It>>4,ne=0;4>ne;ne+=2){for(oe=0,wt=gn.la>>4+ne,It=_.la>>4+ne,W=0;2>W;++W){for(en=1&It,qe=0;2>qe;++qe)rt=en+(1&wt),wt=wt>>1|(en=0<(rt=or(Fn,In[2],rt,h.Qc,0,sn,m)))<<3,oe=oe<<2|(3<rt?3:1<rt?2:sn[m+0]!=0),m+=16;wt>>=2,It=It>>1|en<<5}M|=oe<<4*ne,Ee|=wt<<4<<ne,ye|=(240&It)<<ne}gn.la=Ee,_.la=ye,ar.Hc=C,ar.Gc=M,ar.ia=43690&M?0:h.ia,In=!(C|M)}if(0<xt.L&&(xt.wa[xt.Y+xt.ja]=xt.gd[qt.$b][qt.Za],xt.wa[xt.Y+xt.ja].La|=!In),nn.Ka)return On(Pt,7,"Premature end-of-file encountered.")}if(hr(Pt),xt=Zt,nn=1,qt=(vt=Pt).D,gn=0<vt.L&&vt.M>=vt.zb&&vt.M<=vt.Va,vt.Aa==0)e:{if(qt.M=vt.M,qt.uc=gn,Ou(vt,qt),nn=1,qt=(oe=vt.D).Nb,gn=(M=nl[vt.L])*vt.R,Fn=M/2*vt.B,W=16*qt*vt.R,qe=8*qt*vt.B,In=vt.sa,ar=vt.ta-gn+W,h=vt.qa,sn=vt.ra-Fn+qe,m=vt.Ha,_=vt.Ia-Fn+qe,It=(wt=oe.M)==0,C=wt>=vt.Va-1,vt.Aa==2&&Ou(vt,oe),oe.uc)for(en=(rt=vt).D.M,e(rt.D.uc),oe=rt.yb;oe<rt.Hb;++oe){ye=oe,Ee=en;var xn=(An=(ke=rt).D).Nb;ne=ke.R;var An=An.wa[An.Y+ye],br=ke.sa,nt=ke.ta+16*xn*ne+16*ye,st=An.dd,gt=An.tc;if(gt!=0)if(e(3<=gt),ke.L==1)0<ye&&za(br,nt,ne,gt+4),An.La&&ba(br,nt,ne,gt),0<Ee&&ja(br,nt,ne,gt+4),An.La&&ti(br,nt,ne,gt);else{var jt=ke.B,Et=ke.qa,Bt=ke.ra+8*xn*jt+8*ye,be=ke.Ha,ke=ke.Ia+8*xn*jt+8*ye;xn=An.ld,0<ye&&(Ei(br,nt,ne,gt+4,st,xn),xo(Et,Bt,be,ke,jt,gt+4,st,xn)),An.La&&(Ra(br,nt,ne,gt,st,xn),Fa(Et,Bt,be,ke,jt,gt,st,xn)),0<Ee&&(Ki(br,nt,ne,gt+4,st,xn),pu(Et,Bt,be,ke,jt,gt+4,st,xn)),An.La&&(Xi(br,nt,ne,gt,st,xn),Qa(Et,Bt,be,ke,jt,gt,st,xn))}}if(vt.ia&&alert("todo:DitherRow"),xt.put!=null){if(oe=16*wt,wt=16*(wt+1),It?(xt.y=vt.sa,xt.O=vt.ta+W,xt.f=vt.qa,xt.N=vt.ra+qe,xt.ea=vt.Ha,xt.W=vt.Ia+qe):(oe-=M,xt.y=In,xt.O=ar,xt.f=h,xt.N=sn,xt.ea=m,xt.W=_),C||(wt-=M),wt>xt.o&&(wt=xt.o),xt.F=null,xt.J=null,vt.Fa!=null&&0<vt.Fa.length&&oe<wt&&(xt.J=vs(vt,xt,oe,wt-oe),xt.F=vt.mb,xt.F==null&&xt.F.length==0)){nn=On(vt,3,"Could not decode alpha data.");break e}oe<xt.j&&(M=xt.j-oe,oe=xt.j,e(!(1&M)),xt.O+=vt.R*M,xt.N+=vt.B*(M>>1),xt.W+=vt.B*(M>>1),xt.F!=null&&(xt.J+=xt.width*M)),oe<wt&&(xt.O+=xt.v,xt.N+=xt.v>>1,xt.W+=xt.v>>1,xt.F!=null&&(xt.J+=xt.v),xt.ka=oe-xt.j,xt.U=xt.va-xt.v,xt.T=wt-oe,nn=xt.put(xt))}qt+1!=vt.Ic||C||(r(vt.sa,vt.ta-gn,In,ar+16*vt.R,gn),r(vt.qa,vt.ra-Fn,h,sn+8*vt.B,Fn),r(vt.Ha,vt.Ia-Fn,m,_+8*vt.B,Fn))}if(!nn)return On(Pt,6,"Output aborted.")}return 1}(w,T)),T.bc!=null&&T.bc(T),q&=1}return q?(w.cb=0,q):0}function rn(w,T,q,ue,Le){Le=w[T+q+32*ue]+(Le>>3),w[T+q+32*ue]=-256&Le?0>Le?0:255:Le}function yi(w,T,q,ue,Le,Me){rn(w,T,0,q,ue+Le),rn(w,T,1,q,ue+Me),rn(w,T,2,q,ue-Me),rn(w,T,3,q,ue-Le)}function qr(w){return(20091*w>>16)+w}function ui(w,T,q,ue){var Le,Me=0,Ae=s(16);for(Le=0;4>Le;++Le){var Ne=w[T+0]+w[T+8],Fe=w[T+0]-w[T+8],Xe=(35468*w[T+4]>>16)-qr(w[T+12]),mt=qr(w[T+4])+(35468*w[T+12]>>16);Ae[Me+0]=Ne+mt,Ae[Me+1]=Fe+Xe,Ae[Me+2]=Fe-Xe,Ae[Me+3]=Ne-mt,Me+=4,T++}for(Le=Me=0;4>Le;++Le)Ne=(w=Ae[Me+0]+4)+Ae[Me+8],Fe=w-Ae[Me+8],Xe=(35468*Ae[Me+4]>>16)-qr(Ae[Me+12]),rn(q,ue,0,0,Ne+(mt=qr(Ae[Me+4])+(35468*Ae[Me+12]>>16))),rn(q,ue,1,0,Fe+Xe),rn(q,ue,2,0,Fe-Xe),rn(q,ue,3,0,Ne-mt),Me++,ue+=32}function ps(w,T,q,ue){var Le=w[T+0]+4,Me=35468*w[T+4]>>16,Ae=qr(w[T+4]),Ne=35468*w[T+1]>>16;yi(q,ue,0,Le+Ae,w=qr(w[T+1]),Ne),yi(q,ue,1,Le+Me,w,Ne),yi(q,ue,2,Le-Me,w,Ne),yi(q,ue,3,Le-Ae,w,Ne)}function $s(w,T,q,ue,Le){ui(w,T,q,ue),Le&&ui(w,T+16,q,ue+4)}function Ns(w,T,q,ue){Yt(w,T+0,q,ue,1),Yt(w,T+32,q,ue+128,1)}function dr(w,T,q,ue){var Le;for(w=w[T+0]+4,Le=0;4>Le;++Le)for(T=0;4>T;++T)rn(q,ue,T,Le,w)}function Qs(w,T,q,ue){w[T+0]&&rr(w,T+0,q,ue),w[T+16]&&rr(w,T+16,q,ue+4),w[T+32]&&rr(w,T+32,q,ue+128),w[T+48]&&rr(w,T+48,q,ue+128+4)}function Vi(w,T,q,ue){var Le,Me=s(16);for(Le=0;4>Le;++Le){var Ae=w[T+0+Le]+w[T+12+Le],Ne=w[T+4+Le]+w[T+8+Le],Fe=w[T+4+Le]-w[T+8+Le],Xe=w[T+0+Le]-w[T+12+Le];Me[0+Le]=Ae+Ne,Me[8+Le]=Ae-Ne,Me[4+Le]=Xe+Fe,Me[12+Le]=Xe-Fe}for(Le=0;4>Le;++Le)Ae=(w=Me[0+4*Le]+3)+Me[3+4*Le],Ne=Me[1+4*Le]+Me[2+4*Le],Fe=Me[1+4*Le]-Me[2+4*Le],Xe=w-Me[3+4*Le],q[ue+0]=Ae+Ne>>3,q[ue+16]=Xe+Fe>>3,q[ue+32]=Ae-Ne>>3,q[ue+48]=Xe-Fe>>3,ue+=64}function Gi(w,T,q){var ue,Le=T-32,Me=$i,Ae=255-w[Le-1];for(ue=0;ue<q;++ue){var Ne,Fe=Me,Xe=Ae+w[T-1];for(Ne=0;Ne<q;++Ne)w[T+Ne]=Fe[Xe+w[Le+Ne]];T+=32}}function fi(w,T){Gi(w,T,4)}function kn(w,T){Gi(w,T,8)}function vn(w,T){Gi(w,T,16)}function Fr(w,T){var q;for(q=0;16>q;++q)r(w,T+32*q,w,T-32,16)}function hs(w,T){var q;for(q=16;0<q;--q)i(w,T,w[T-1],16),T+=32}function Vs(w,T,q){var ue;for(ue=0;16>ue;++ue)i(T,q+32*ue,w,16)}function aa(w,T){var q,ue=16;for(q=0;16>q;++q)ue+=w[T-1+32*q]+w[T+q-32];Vs(ue>>5,w,T)}function ds(w,T){var q,ue=8;for(q=0;16>q;++q)ue+=w[T-1+32*q];Vs(ue>>4,w,T)}function ka(w,T){var q,ue=8;for(q=0;16>q;++q)ue+=w[T+q-32];Vs(ue>>4,w,T)}function bl(w,T){Vs(128,w,T)}function Vn(w,T,q){return w+2*T+q+2>>2}function Sr(w,T){var q,ue=T-32;for(ue=new Uint8Array([Vn(w[ue-1],w[ue+0],w[ue+1]),Vn(w[ue+0],w[ue+1],w[ue+2]),Vn(w[ue+1],w[ue+2],w[ue+3]),Vn(w[ue+2],w[ue+3],w[ue+4])]),q=0;4>q;++q)r(w,T+32*q,ue,0,ue.length)}function is(w,T){var q=w[T-1],ue=w[T-1+32],Le=w[T-1+64],Me=w[T-1+96];De(w,T+0,16843009*Vn(w[T-1-32],q,ue)),De(w,T+32,16843009*Vn(q,ue,Le)),De(w,T+64,16843009*Vn(ue,Le,Me)),De(w,T+96,16843009*Vn(Le,Me,Me))}function Ar(w,T){var q,ue=4;for(q=0;4>q;++q)ue+=w[T+q-32]+w[T-1+32*q];for(ue>>=3,q=0;4>q;++q)i(w,T+32*q,ue,4)}function Ko(w,T){var q=w[T-1+0],ue=w[T-1+32],Le=w[T-1+64],Me=w[T-1-32],Ae=w[T+0-32],Ne=w[T+1-32],Fe=w[T+2-32],Xe=w[T+3-32];w[T+0+96]=Vn(ue,Le,w[T-1+96]),w[T+1+96]=w[T+0+64]=Vn(q,ue,Le),w[T+2+96]=w[T+1+64]=w[T+0+32]=Vn(Me,q,ue),w[T+3+96]=w[T+2+64]=w[T+1+32]=w[T+0+0]=Vn(Ae,Me,q),w[T+3+64]=w[T+2+32]=w[T+1+0]=Vn(Ne,Ae,Me),w[T+3+32]=w[T+2+0]=Vn(Fe,Ne,Ae),w[T+3+0]=Vn(Xe,Fe,Ne)}function Aa(w,T){var q=w[T+1-32],ue=w[T+2-32],Le=w[T+3-32],Me=w[T+4-32],Ae=w[T+5-32],Ne=w[T+6-32],Fe=w[T+7-32];w[T+0+0]=Vn(w[T+0-32],q,ue),w[T+1+0]=w[T+0+32]=Vn(q,ue,Le),w[T+2+0]=w[T+1+32]=w[T+0+64]=Vn(ue,Le,Me),w[T+3+0]=w[T+2+32]=w[T+1+64]=w[T+0+96]=Vn(Le,Me,Ae),w[T+3+32]=w[T+2+64]=w[T+1+96]=Vn(Me,Ae,Ne),w[T+3+64]=w[T+2+96]=Vn(Ae,Ne,Fe),w[T+3+96]=Vn(Ne,Fe,Fe)}function Ta(w,T){var q=w[T-1+0],ue=w[T-1+32],Le=w[T-1+64],Me=w[T-1-32],Ae=w[T+0-32],Ne=w[T+1-32],Fe=w[T+2-32],Xe=w[T+3-32];w[T+0+0]=w[T+1+64]=Me+Ae+1>>1,w[T+1+0]=w[T+2+64]=Ae+Ne+1>>1,w[T+2+0]=w[T+3+64]=Ne+Fe+1>>1,w[T+3+0]=Fe+Xe+1>>1,w[T+0+96]=Vn(Le,ue,q),w[T+0+64]=Vn(ue,q,Me),w[T+0+32]=w[T+1+96]=Vn(q,Me,Ae),w[T+1+32]=w[T+2+96]=Vn(Me,Ae,Ne),w[T+2+32]=w[T+3+96]=Vn(Ae,Ne,Fe),w[T+3+32]=Vn(Ne,Fe,Xe)}function Xo(w,T){var q=w[T+0-32],ue=w[T+1-32],Le=w[T+2-32],Me=w[T+3-32],Ae=w[T+4-32],Ne=w[T+5-32],Fe=w[T+6-32],Xe=w[T+7-32];w[T+0+0]=q+ue+1>>1,w[T+1+0]=w[T+0+64]=ue+Le+1>>1,w[T+2+0]=w[T+1+64]=Le+Me+1>>1,w[T+3+0]=w[T+2+64]=Me+Ae+1>>1,w[T+0+32]=Vn(q,ue,Le),w[T+1+32]=w[T+0+96]=Vn(ue,Le,Me),w[T+2+32]=w[T+1+96]=Vn(Le,Me,Ae),w[T+3+32]=w[T+2+96]=Vn(Me,Ae,Ne),w[T+3+64]=Vn(Ae,Ne,Fe),w[T+3+96]=Vn(Ne,Fe,Xe)}function la(w,T){var q=w[T-1+0],ue=w[T-1+32],Le=w[T-1+64],Me=w[T-1+96];w[T+0+0]=q+ue+1>>1,w[T+2+0]=w[T+0+32]=ue+Le+1>>1,w[T+2+32]=w[T+0+64]=Le+Me+1>>1,w[T+1+0]=Vn(q,ue,Le),w[T+3+0]=w[T+1+32]=Vn(ue,Le,Me),w[T+3+32]=w[T+1+64]=Vn(Le,Me,Me),w[T+3+64]=w[T+2+64]=w[T+0+96]=w[T+1+96]=w[T+2+96]=w[T+3+96]=Me}function _l(w,T){var q=w[T-1+0],ue=w[T-1+32],Le=w[T-1+64],Me=w[T-1+96],Ae=w[T-1-32],Ne=w[T+0-32],Fe=w[T+1-32],Xe=w[T+2-32];w[T+0+0]=w[T+2+32]=q+Ae+1>>1,w[T+0+32]=w[T+2+64]=ue+q+1>>1,w[T+0+64]=w[T+2+96]=Le+ue+1>>1,w[T+0+96]=Me+Le+1>>1,w[T+3+0]=Vn(Ne,Fe,Xe),w[T+2+0]=Vn(Ae,Ne,Fe),w[T+1+0]=w[T+3+32]=Vn(q,Ae,Ne),w[T+1+32]=w[T+3+64]=Vn(ue,q,Ae),w[T+1+64]=w[T+3+96]=Vn(Le,ue,q),w[T+1+96]=Vn(Me,Le,ue)}function Da(w,T){var q;for(q=0;8>q;++q)r(w,T+32*q,w,T-32,8)}function Er(w,T){var q;for(q=0;8>q;++q)i(w,T,w[T-1],8),T+=32}function Kn(w,T,q){var ue;for(ue=0;8>ue;++ue)i(T,q+32*ue,w,8)}function eo(w,T){var q,ue=8;for(q=0;8>q;++q)ue+=w[T+q-32]+w[T-1+32*q];Kn(ue>>4,w,T)}function yo(w,T){var q,ue=4;for(q=0;8>q;++q)ue+=w[T+q-32];Kn(ue>>3,w,T)}function lu(w,T){var q,ue=4;for(q=0;8>q;++q)ue+=w[T-1+32*q];Kn(ue>>3,w,T)}function Au(w,T){Kn(128,w,T)}function Bl(w,T,q){var ue=w[T-q],Le=w[T+0],Me=3*(Le-ue)+$a[1020+w[T-2*q]-w[T+q]],Ae=Es[112+(Me+4>>3)];w[T-q]=$i[255+ue+Es[112+(Me+3>>3)]],w[T+0]=$i[255+Le-Ae]}function uu(w,T,q,ue){var Le=w[T+0],Me=w[T+q];return ao[255+w[T-2*q]-w[T-q]]>ue||ao[255+Me-Le]>ue}function Tu(w,T,q,ue){return 4*ao[255+w[T-q]-w[T+0]]+ao[255+w[T-2*q]-w[T+q]]<=ue}function ei(w,T,q,ue,Le){var Me=w[T-3*q],Ae=w[T-2*q],Ne=w[T-q],Fe=w[T+0],Xe=w[T+q],mt=w[T+2*q],Rt=w[T+3*q];return 4*ao[255+Ne-Fe]+ao[255+Ae-Xe]>ue?0:ao[255+w[T-4*q]-Me]<=Le&&ao[255+Me-Ae]<=Le&&ao[255+Ae-Ne]<=Le&&ao[255+Rt-mt]<=Le&&ao[255+mt-Xe]<=Le&&ao[255+Xe-Fe]<=Le}function gs(w,T,q,ue){var Le=2*ue+1;for(ue=0;16>ue;++ue)Tu(w,T+ue,q,Le)&&Bl(w,T+ue,q)}function mr(w,T,q,ue){var Le=2*ue+1;for(ue=0;16>ue;++ue)Tu(w,T+ue*q,1,Le)&&Bl(w,T+ue*q,1)}function ms(w,T,q,ue){var Le;for(Le=3;0<Le;--Le)gs(w,T+=4*q,q,ue)}function Rl(w,T,q,ue){var Le;for(Le=3;0<Le;--Le)mr(w,T+=4,q,ue)}function Ya(w,T,q,ue,Le,Me,Ae,Ne){for(Me=2*Me+1;0<Le--;){if(ei(w,T,q,Me,Ae))if(uu(w,T,q,Ne))Bl(w,T,q);else{var Fe=w,Xe=T,mt=q,Rt=Fe[Xe-2*mt],Ft=Fe[Xe-mt],Pt=Fe[Xe+0],Zt=Fe[Xe+mt],qt=Fe[Xe+2*mt],vt=27*(nn=$a[1020+3*(Pt-Ft)+$a[1020+Rt-Zt]])+63>>7,xt=18*nn+63>>7,nn=9*nn+63>>7;Fe[Xe-3*mt]=$i[255+Fe[Xe-3*mt]+nn],Fe[Xe-2*mt]=$i[255+Rt+xt],Fe[Xe-mt]=$i[255+Ft+vt],Fe[Xe+0]=$i[255+Pt-vt],Fe[Xe+mt]=$i[255+Zt-xt],Fe[Xe+2*mt]=$i[255+qt-nn]}T+=ue}}function Zi(w,T,q,ue,Le,Me,Ae,Ne){for(Me=2*Me+1;0<Le--;){if(ei(w,T,q,Me,Ae))if(uu(w,T,q,Ne))Bl(w,T,q);else{var Fe=w,Xe=T,mt=q,Rt=Fe[Xe-mt],Ft=Fe[Xe+0],Pt=Fe[Xe+mt],Zt=Es[112+((qt=3*(Ft-Rt))+4>>3)],qt=Es[112+(qt+3>>3)],vt=Zt+1>>1;Fe[Xe-2*mt]=$i[255+Fe[Xe-2*mt]+vt],Fe[Xe-mt]=$i[255+Rt+qt],Fe[Xe+0]=$i[255+Ft-Zt],Fe[Xe+mt]=$i[255+Pt-vt]}T+=ue}}function Du(w,T,q,ue,Le,Me){Ya(w,T,q,1,16,ue,Le,Me)}function Oa(w,T,q,ue,Le,Me){Ya(w,T,1,q,16,ue,Le,Me)}function cu(w,T,q,ue,Le,Me){var Ae;for(Ae=3;0<Ae;--Ae)Zi(w,T+=4*q,q,1,16,ue,Le,Me)}function hu(w,T,q,ue,Le,Me){var Ae;for(Ae=3;0<Ae;--Ae)Zi(w,T+=4,1,q,16,ue,Le,Me)}function ua(w,T,q,ue,Le,Me,Ae,Ne){Ya(w,T,Le,1,8,Me,Ae,Ne),Ya(q,ue,Le,1,8,Me,Ae,Ne)}function du(w,T,q,ue,Le,Me,Ae,Ne){Ya(w,T,1,Le,8,Me,Ae,Ne),Ya(q,ue,1,Le,8,Me,Ae,Ne)}function Li(w,T,q,ue,Le,Me,Ae,Ne){Zi(w,T+4*Le,Le,1,8,Me,Ae,Ne),Zi(q,ue+4*Le,Le,1,8,Me,Ae,Ne)}function Ac(w,T,q,ue,Le,Me,Ae,Ne){Zi(w,T+4,1,Le,8,Me,Ae,Ne),Zi(q,ue+4,1,Le,8,Me,Ae,Ne)}function Us(){this.ba=new tr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new xr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function va(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function fu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ya(){this.ua=0,this.Wa=new ce,this.vb=new ce,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new I}function Fl(){this.xb=this.a=0,this.l=new Qr,this.ca=new tr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ae,this.Pb=0,this.wd=new ae,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ya,this.ab=0,this.gc=o(4,fu),this.Oc=0}function jl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Qr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Si(w,T,q,ue,Le,Me,Ae){for(w=w==null?0:w[T+0],T=0;T<Ae;++T)Le[Me+T]=w+q[ue+T]&255,w=Le[Me+T]}function Jo(w,T,q,ue,Le,Me,Ae){var Ne;if(w==null)Si(null,null,q,ue,Le,Me,Ae);else for(Ne=0;Ne<Ae;++Ne)Le[Me+Ne]=w[T+Ne]+q[ue+Ne]&255}function Za(w,T,q,ue,Le,Me,Ae){if(w==null)Si(null,null,q,ue,Le,Me,Ae);else{var Ne,Fe=w[T+0],Xe=Fe,mt=Fe;for(Ne=0;Ne<Ae;++Ne)Xe=mt+(Fe=w[T+Ne])-Xe,mt=q[ue+Ne]+(-256&Xe?0>Xe?0:255:Xe)&255,Xe=Fe,Le[Me+Ne]=mt}}function vs(w,T,q,ue){var Le=T.width,Me=T.o;if(e(w!=null&&T!=null),0>q||0>=ue||q+ue>Me)return null;if(!w.Cc){if(w.ga==null){var Ae;if(w.ga=new jl,(Ae=w.ga==null)||(Ae=T.width*T.o,e(w.Gb.length==0),w.Gb=s(Ae),w.Uc=0,w.Gb==null?Ae=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Ae=1),Ae=!Ae),!Ae){Ae=w.ga;var Ne=w.Fa,Fe=w.P,Xe=w.qc,mt=w.mb,Rt=w.nb,Ft=Fe+1,Pt=Xe-1,Zt=Ae.l;if(e(Ne!=null&&mt!=null&&T!=null),bi[0]=null,bi[1]=Si,bi[2]=Jo,bi[3]=Za,Ae.ca=mt,Ae.tb=Rt,Ae.c=T.width,Ae.i=T.height,e(0<Ae.c&&0<Ae.i),1>=Xe)T=0;else if(Ae.$a=Ne[Fe+0]>>0&3,Ae.Z=Ne[Fe+0]>>2&3,Ae.Lc=Ne[Fe+0]>>4&3,Fe=Ne[Fe+0]>>6&3,0>Ae.$a||1<Ae.$a||4<=Ae.Z||1<Ae.Lc||Fe)T=0;else if(Zt.put=Oo,Zt.ac=Ai,Zt.bc=Ds,Zt.ma=Ae,Zt.width=T.width,Zt.height=T.height,Zt.Da=T.Da,Zt.v=T.v,Zt.va=T.va,Zt.j=T.j,Zt.o=T.o,Ae.$a)e:{e(Ae.$a==1),T=Ln();t:for(;;){if(T==null){T=0;break e}if(e(Ae!=null),Ae.mc=T,T.c=Ae.c,T.i=Ae.i,T.l=Ae.l,T.l.ma=Ae,T.l.width=Ae.c,T.l.height=Ae.i,T.a=0,Q(T.m,Ne,Ft,Pt),!jr(Ae.c,Ae.i,1,T,null)||(T.ab==1&&T.gc[0].hc==3&&wn(T.s)?(Ae.ic=1,Ne=T.c*T.i,T.Ta=null,T.Ua=0,T.V=s(Ne),T.Ba=0,T.V==null?(T.a=1,T=0):T=1):(Ae.ic=0,T=un(T,Ae.c)),!T))break t;T=1;break e}Ae.mc=null,T=0}else T=Pt>=Ae.c*Ae.i;Ae=!T}if(Ae)return null;w.ga.Lc!=1?w.Ga=0:ue=Me-q}e(w.ga!=null),e(q+ue<=Me);e:{if(T=(Ne=w.ga).c,Me=Ne.l.o,Ne.$a==0){if(Ft=w.rc,Pt=w.Vc,Zt=w.Fa,Fe=w.P+1+q*T,Xe=w.mb,mt=w.nb+q*T,e(Fe<=w.P+w.qc),Ne.Z!=0)for(e(bi[Ne.Z]!=null),Ae=0;Ae<ue;++Ae)bi[Ne.Z](Ft,Pt,Zt,Fe,Xe,mt,T),Ft=Xe,Pt=mt,mt+=T,Fe+=T;else for(Ae=0;Ae<ue;++Ae)r(Xe,mt,Zt,Fe,T),Ft=Xe,Pt=mt,mt+=T,Fe+=T;w.rc=Ft,w.Vc=Pt}else{if(e(Ne.mc!=null),T=q+ue,e((Ae=Ne.mc)!=null),e(T<=Ae.i),Ae.C>=T)T=1;else if(Ne.ic||Mt(),Ne.ic){Ne=Ae.V,Ft=Ae.Ba,Pt=Ae.c;var qt=Ae.i,vt=(Zt=1,Fe=Ae.$/Pt,Xe=Ae.$%Pt,mt=Ae.m,Rt=Ae.s,Ae.$),xt=Pt*qt,nn=Pt*T,gn=Rt.wc,sn=vt<nn?ft(Rt,Xe,Fe):null;e(vt<=xt),e(T<=qt),e(wn(Rt));t:for(;;){for(;!mt.h&&vt<nn;){if(Xe&gn||(sn=ft(Rt,Xe,Fe)),e(sn!=null),fe(mt),256>(qt=lt(sn.G[0],sn.H[0],mt)))Ne[Ft+vt]=qt,++vt,++Xe>=Pt&&(Xe=0,++Fe<=T&&!(Fe%16)&&Jn(Ae,Fe));else{if(!(280>qt)){Zt=0;break t}qt=Os(qt-256,mt);var Fn,In=lt(sn.G[4],sn.H[4],mt);if(fe(mt),!(vt>=(In=No(Pt,In=Os(In,mt)))&&xt-vt>=qt)){Zt=0;break t}for(Fn=0;Fn<qt;++Fn)Ne[Ft+vt+Fn]=Ne[Ft+vt+Fn-In];for(vt+=qt,Xe+=qt;Xe>=Pt;)Xe-=Pt,++Fe<=T&&!(Fe%16)&&Jn(Ae,Fe);vt<nn&&Xe&gn&&(sn=ft(Rt,Xe,Fe))}e(mt.h==K(mt))}Jn(Ae,Fe>T?T:Fe);break t}!Zt||mt.h&&vt<xt?(Zt=0,Ae.a=mt.h?5:3):Ae.$=vt,T=Zt}else T=Ct(Ae,Ae.V,Ae.Ba,Ae.c,Ae.i,T,an);if(!T){ue=0;break e}}q+ue>=Me&&(w.Cc=1),ue=1}if(!ue)return null;if(w.Cc&&((ue=w.ga)!=null&&(ue.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+q*Le}function F(w,T,q,ue,Le,Me){for(;0<Le--;){var Ae,Ne=w,Fe=T+(q?1:0),Xe=w,mt=T+(q?0:3);for(Ae=0;Ae<ue;++Ae){var Rt=Xe[mt+4*Ae];Rt!=255&&(Rt*=32897,Ne[Fe+4*Ae+0]=Ne[Fe+4*Ae+0]*Rt>>23,Ne[Fe+4*Ae+1]=Ne[Fe+4*Ae+1]*Rt>>23,Ne[Fe+4*Ae+2]=Ne[Fe+4*Ae+2]*Rt>>23)}T+=Me}}function xe(w,T,q,ue,Le){for(;0<ue--;){var Me;for(Me=0;Me<q;++Me){var Ae=w[T+2*Me+0],Ne=15&(Xe=w[T+2*Me+1]),Fe=4369*Ne,Xe=(240&Xe|Xe>>4)*Fe>>16;w[T+2*Me+0]=(240&Ae|Ae>>4)*Fe>>16&240|(15&Ae|Ae<<4)*Fe>>16>>4&15,w[T+2*Me+1]=240&Xe|Ne}T+=Le}}function tt(w,T,q,ue,Le,Me,Ae,Ne){var Fe,Xe,mt=255;for(Xe=0;Xe<Le;++Xe){for(Fe=0;Fe<ue;++Fe){var Rt=w[T+Fe];Me[Ae+4*Fe]=Rt,mt&=Rt}T+=q,Ae+=Ne}return mt!=255}function pt(w,T,q,ue,Le){var Me;for(Me=0;Me<Le;++Me)q[ue+Me]=w[T+Me]>>8}function Mt(){Ws=F,Pi=xe,Ii=tt,bs=pt}function Wt(w,T,q){N[w]=function(ue,Le,Me,Ae,Ne,Fe,Xe,mt,Rt,Ft,Pt,Zt,qt,vt,xt,nn,gn){var sn,Fn=gn-1>>1,In=Ne[Fe+0]|Xe[mt+0]<<16,ar=Rt[Ft+0]|Pt[Zt+0]<<16;e(ue!=null);var h=3*In+ar+131074>>2;for(T(ue[Le+0],255&h,h>>16,qt,vt),Me!=null&&(h=3*ar+In+131074>>2,T(Me[Ae+0],255&h,h>>16,xt,nn)),sn=1;sn<=Fn;++sn){var m=Ne[Fe+sn]|Xe[mt+sn]<<16,_=Rt[Ft+sn]|Pt[Zt+sn]<<16,C=In+m+ar+_+524296,M=C+2*(m+ar)>>3;h=M+In>>1,In=(C=C+2*(In+_)>>3)+m>>1,T(ue[Le+2*sn-1],255&h,h>>16,qt,vt+(2*sn-1)*q),T(ue[Le+2*sn-0],255&In,In>>16,qt,vt+(2*sn-0)*q),Me!=null&&(h=C+ar>>1,In=M+_>>1,T(Me[Ae+2*sn-1],255&h,h>>16,xt,nn+(2*sn-1)*q),T(Me[Ae+2*sn+0],255&In,In>>16,xt,nn+(2*sn+0)*q)),In=m,ar=_}1&gn||(h=3*In+ar+131074>>2,T(ue[Le+gn-1],255&h,h>>16,qt,vt+(gn-1)*q),Me!=null&&(h=3*ar+In+131074>>2,T(Me[Ae+gn-1],255&h,h>>16,xt,nn+(gn-1)*q)))}}function fn(){lo[Ro]=Ie,lo[wr]=rc,lo[el]=jo,lo[tl]=Zs,lo[_a]=Hr,lo[Lo]=Vh,lo[oh]=Af,lo[Gs]=rc,lo[qs]=Zs,lo[wa]=Hr,lo[u]=Vh}function jn(w){return w&-16384?0>w?0:255:w>>Up}function Hn(w,T){return jn((19077*w>>8)+(26149*T>>8)-14234)}function pr(w,T,q){return jn((19077*w>>8)-(6419*T>>8)-(13320*q>>8)+8708)}function Cr(w,T){return jn((19077*w>>8)+(33050*T>>8)-17685)}function Vr(w,T,q,ue,Le){ue[Le+0]=Hn(w,q),ue[Le+1]=pr(w,T,q),ue[Le+2]=Cr(w,T)}function qi(w,T,q,ue,Le){ue[Le+0]=Cr(w,T),ue[Le+1]=pr(w,T,q),ue[Le+2]=Hn(w,q)}function gi(w,T,q,ue,Le){var Me=pr(w,T,q);T=Me<<3&224|Cr(w,T)>>3,ue[Le+0]=248&Hn(w,q)|Me>>5,ue[Le+1]=T}function Ci(w,T,q,ue,Le){var Me=240&Cr(w,T)|15;ue[Le+0]=240&Hn(w,q)|pr(w,T,q)>>4,ue[Le+1]=Me}function ys(w,T,q,ue,Le){ue[Le+0]=255,Vr(w,T,q,ue,Le+1)}function Ss(w,T,q,ue,Le){qi(w,T,q,ue,Le),ue[Le+3]=255}function Qo(w,T,q,ue,Le){Vr(w,T,q,ue,Le),ue[Le+3]=255}function Ur(w,T){return 0>w?0:w>T?T:w}function to(w,T,q){N[w]=function(ue,Le,Me,Ae,Ne,Fe,Xe,mt,Rt){for(var Ft=mt+(-2&Rt)*q;mt!=Ft;)T(ue[Le+0],Me[Ae+0],Ne[Fe+0],Xe,mt),T(ue[Le+1],Me[Ae+0],Ne[Fe+0],Xe,mt+q),Le+=2,++Ae,++Fe,mt+=2*q;1&Rt&&T(ue[Le+0],Me[Ae+0],Ne[Fe+0],Xe,mt)}}function zl(w,T,q){return q==0?w==0?T==0?6:5:T==0?4:0:q}function bo(w,T,q,ue,Le){switch(w>>>30){case 3:Yt(T,q,ue,Le,0);break;case 2:Nt(T,q,ue,Le);break;case 1:rr(T,q,ue,Le)}}function Ou(w,T){var q,ue,Le=T.M,Me=T.Nb,Ae=w.oc,Ne=w.pc+40,Fe=w.oc,Xe=w.pc+584,mt=w.oc,Rt=w.pc+600;for(q=0;16>q;++q)Ae[Ne+32*q-1]=129;for(q=0;8>q;++q)Fe[Xe+32*q-1]=129,mt[Rt+32*q-1]=129;for(0<Le?Ae[Ne-1-32]=Fe[Xe-1-32]=mt[Rt-1-32]=129:(i(Ae,Ne-32-1,127,21),i(Fe,Xe-32-1,127,9),i(mt,Rt-32-1,127,9)),ue=0;ue<w.za;++ue){var Ft=T.ya[T.aa+ue];if(0<ue){for(q=-1;16>q;++q)r(Ae,Ne+32*q-4,Ae,Ne+32*q+12,4);for(q=-1;8>q;++q)r(Fe,Xe+32*q-4,Fe,Xe+32*q+4,4),r(mt,Rt+32*q-4,mt,Rt+32*q+4,4)}var Pt=w.Gd,Zt=w.Hd+ue,qt=Ft.ad,vt=Ft.Hc;if(0<Le&&(r(Ae,Ne-32,Pt[Zt].y,0,16),r(Fe,Xe-32,Pt[Zt].f,0,8),r(mt,Rt-32,Pt[Zt].ea,0,8)),Ft.Za){var xt=Ae,nn=Ne-32+16;for(0<Le&&(ue>=w.za-1?i(xt,nn,Pt[Zt].y[15],4):r(xt,nn,Pt[Zt+1].y,0,4)),q=0;4>q;q++)xt[nn+128+q]=xt[nn+256+q]=xt[nn+384+q]=xt[nn+0+q];for(q=0;16>q;++q,vt<<=2)xt=Ae,nn=Ne+Df[q],xa[Ft.Ob[q]](xt,nn),bo(vt,qt,16*+q,xt,nn)}else if(xt=zl(ue,Le,Ft.Ob[0]),Va[xt](Ae,Ne),vt!=0)for(q=0;16>q;++q,vt<<=2)bo(vt,qt,16*+q,Ae,Ne+Df[q]);for(q=Ft.Gc,xt=zl(ue,Le,Ft.Dd),ha[xt](Fe,Xe),ha[xt](mt,Rt),vt=qt,xt=Fe,nn=Xe,255&(Ft=q>>0)&&(170&Ft?Rn(vt,256,xt,nn):Pr(vt,256,xt,nn)),Ft=mt,vt=Rt,255&(q>>=8)&&(170&q?Rn(qt,320,Ft,vt):Pr(qt,320,Ft,vt)),Le<w.Ub-1&&(r(Pt[Zt].y,0,Ae,Ne+480,16),r(Pt[Zt].f,0,Fe,Xe+224,8),r(Pt[Zt].ea,0,mt,Rt+224,8)),q=8*Me*w.B,Pt=w.sa,Zt=w.ta+16*ue+16*Me*w.R,qt=w.qa,Ft=w.ra+8*ue+q,vt=w.Ha,xt=w.Ia+8*ue+q,q=0;16>q;++q)r(Pt,Zt+q*w.R,Ae,Ne+32*q,16);for(q=0;8>q;++q)r(qt,Ft+q*w.B,Fe,Xe+32*q,8),r(vt,xt+q*w.B,mt,Rt+32*q,8)}}function Na(w,T,q,ue,Le,Me,Ae,Ne,Fe){var Xe=[0],mt=[0],Rt=0,Ft=Fe!=null?Fe.kd:0,Pt=Fe??new va;if(w==null||12>q)return 7;Pt.data=w,Pt.w=T,Pt.ha=q,T=[T],q=[q],Pt.gb=[Pt.gb];e:{var Zt=T,qt=q,vt=Pt.gb;if(e(w!=null),e(qt!=null),e(vt!=null),vt[0]=0,12<=qt[0]&&!n(w,Zt[0],"RIFF")){if(n(w,Zt[0]+8,"WEBP")){vt=3;break e}var xt=de(w,Zt[0]+4);if(12>xt||4294967286<xt){vt=3;break e}if(Ft&&xt>qt[0]-8){vt=7;break e}vt[0]=xt,Zt[0]+=12,qt[0]-=12}vt=0}if(vt!=0)return vt;for(xt=0<Pt.gb[0],q=q[0];;){e:{var nn=w;qt=T,vt=q;var gn=Xe,sn=mt,Fn=Zt=[0];if((h=Rt=[Rt])[0]=0,8>vt[0])vt=7;else{if(!n(nn,qt[0],"VP8X")){if(de(nn,qt[0]+4)!=10){vt=3;break e}if(18>vt[0]){vt=7;break e}var In=de(nn,qt[0]+8),ar=1+Je(nn,qt[0]+12);if(2147483648<=ar*(nn=1+Je(nn,qt[0]+15))){vt=3;break e}Fn!=null&&(Fn[0]=In),gn!=null&&(gn[0]=ar),sn!=null&&(sn[0]=nn),qt[0]+=18,vt[0]-=18,h[0]=1}vt=0}}if(Rt=Rt[0],Zt=Zt[0],vt!=0)return vt;if(qt=!!(2&Zt),!xt&&Rt)return 3;if(Me!=null&&(Me[0]=!!(16&Zt)),Ae!=null&&(Ae[0]=qt),Ne!=null&&(Ne[0]=0),Ae=Xe[0],Zt=mt[0],Rt&&qt&&Fe==null){vt=0;break}if(4>q){vt=7;break}if(xt&&Rt||!xt&&!Rt&&!n(w,T[0],"ALPH")){q=[q],Pt.na=[Pt.na],Pt.P=[Pt.P],Pt.Sa=[Pt.Sa];e:{In=w,vt=T,xt=q;var h=Pt.gb;gn=Pt.na,sn=Pt.P,Fn=Pt.Sa,ar=22,e(In!=null),e(xt!=null),nn=vt[0];var m=xt[0];for(e(gn!=null),e(Fn!=null),gn[0]=null,sn[0]=null,Fn[0]=0;;){if(vt[0]=nn,xt[0]=m,8>m){vt=7;break e}var _=de(In,nn+4);if(4294967286<_){vt=3;break e}var C=8+_+1&-2;if(ar+=C,0<h&&ar>h){vt=3;break e}if(!n(In,nn,"VP8 ")||!n(In,nn,"VP8L")){vt=0;break e}if(m[0]<C){vt=7;break e}n(In,nn,"ALPH")||(gn[0]=In,sn[0]=nn+8,Fn[0]=_),nn+=C,m-=C}}if(q=q[0],Pt.na=Pt.na[0],Pt.P=Pt.P[0],Pt.Sa=Pt.Sa[0],vt!=0)break}q=[q],Pt.Ja=[Pt.Ja],Pt.xa=[Pt.xa];e:if(h=w,vt=T,xt=q,gn=Pt.gb[0],sn=Pt.Ja,Fn=Pt.xa,In=vt[0],nn=!n(h,In,"VP8 "),ar=!n(h,In,"VP8L"),e(h!=null),e(xt!=null),e(sn!=null),e(Fn!=null),8>xt[0])vt=7;else{if(nn||ar){if(h=de(h,In+4),12<=gn&&h>gn-12){vt=3;break e}if(Ft&&h>xt[0]-8){vt=7;break e}sn[0]=h,vt[0]+=8,xt[0]-=8,Fn[0]=ar}else Fn[0]=5<=xt[0]&&h[In+0]==47&&!(h[In+4]>>5),sn[0]=xt[0];vt=0}if(q=q[0],Pt.Ja=Pt.Ja[0],Pt.xa=Pt.xa[0],T=T[0],vt!=0)break;if(4294967286<Pt.Ja)return 3;if(Ne==null||qt||(Ne[0]=Pt.xa?2:1),Ae=[Ae],Zt=[Zt],Pt.xa){if(5>q){vt=7;break}Ne=Ae,Ft=Zt,qt=Me,w==null||5>q?w=0:5<=q&&w[T+0]==47&&!(w[T+4]>>5)?(xt=[0],h=[0],gn=[0],Q(sn=new ae,w,T,q),nr(sn,xt,h,gn)?(Ne!=null&&(Ne[0]=xt[0]),Ft!=null&&(Ft[0]=h[0]),qt!=null&&(qt[0]=gn[0]),w=1):w=0):w=0}else{if(10>q){vt=7;break}Ne=Zt,w==null||10>q||!Lr(w,T+3,q-3)?w=0:(Ft=w[T+0]|w[T+1]<<8|w[T+2]<<16,qt=16383&(w[T+7]<<8|w[T+6]),w=16383&(w[T+9]<<8|w[T+8]),1&Ft||3<(Ft>>1&7)||!(Ft>>4&1)||Ft>>5>=Pt.Ja||!qt||!w?w=0:(Ae&&(Ae[0]=qt),Ne&&(Ne[0]=w),w=1))}if(!w||(Ae=Ae[0],Zt=Zt[0],Rt&&(Xe[0]!=Ae||mt[0]!=Zt)))return 3;Fe!=null&&(Fe[0]=Pt,Fe.offset=T-Fe.w,e(4294967286>T-Fe.w),e(Fe.offset==Fe.ha-q));break}return vt==0||vt==7&&Rt&&Fe==null?(Me!=null&&(Me[0]|=Pt.na!=null&&0<Pt.na.length),ue!=null&&(ue[0]=Ae),Le!=null&&(Le[0]=Zt),0):vt}function tc(w,T,q){var ue=T.width,Le=T.height,Me=0,Ae=0,Ne=ue,Fe=Le;if(T.Da=w!=null&&0<w.Da,T.Da&&(Ne=w.cd,Fe=w.bd,Me=w.v,Ae=w.j,11>q||(Me&=-2,Ae&=-2),0>Me||0>Ae||0>=Ne||0>=Fe||Me+Ne>ue||Ae+Fe>Le))return 0;if(T.v=Me,T.j=Ae,T.va=Me+Ne,T.o=Ae+Fe,T.U=Ne,T.T=Fe,T.da=w!=null&&0<w.da,T.da){if(!ze(Ne,Fe,q=[w.ib],Me=[w.hb]))return 0;T.ib=q[0],T.hb=Me[0]}return T.ob=w!=null&&w.ob,T.Kb=w==null||!w.Sd,T.da&&(T.ob=T.ib<3*ue/4&&T.hb<3*Le/4,T.Kb=0),1}function wl(w){if(w==null)return 2;if(11>w.S){var T=w.f.RGBA;T.fb+=(w.height-1)*T.A,T.A=-T.A}else T=w.f.kb,w=w.height,T.O+=(w-1)*T.fa,T.fa=-T.fa,T.N+=(w-1>>1)*T.Ab,T.Ab=-T.Ab,T.W+=(w-1>>1)*T.Db,T.Db=-T.Db,T.F!=null&&(T.J+=(w-1)*T.lb,T.lb=-T.lb);return 0}function xl(w,T,q,ue){if(ue==null||0>=w||0>=T)return 2;if(q!=null){if(q.Da){var Le=q.cd,Me=q.bd,Ae=-2&q.v,Ne=-2&q.j;if(0>Ae||0>Ne||0>=Le||0>=Me||Ae+Le>w||Ne+Me>T)return 2;w=Le,T=Me}if(q.da){if(!ze(w,T,Le=[q.ib],Me=[q.hb]))return 2;w=Le[0],T=Me[0]}}ue.width=w,ue.height=T;e:{var Fe=ue.width,Xe=ue.height;if(w=ue.S,0>=Fe||0>=Xe||!(w>=Ro&&13>w))w=2;else{if(0>=ue.Rd&&ue.sd==null){Ae=Me=Le=T=0;var mt=(Ne=Fe*If[w])*Xe;if(11>w||(Me=(Xe+1)/2*(T=(Fe+1)/2),w==12&&(Ae=(Le=Fe)*Xe)),(Xe=s(mt+2*Me+Ae))==null){w=1;break e}ue.sd=Xe,11>w?((Fe=ue.f.RGBA).eb=Xe,Fe.fb=0,Fe.A=Ne,Fe.size=mt):((Fe=ue.f.kb).y=Xe,Fe.O=0,Fe.fa=Ne,Fe.Fd=mt,Fe.f=Xe,Fe.N=0+mt,Fe.Ab=T,Fe.Cd=Me,Fe.ea=Xe,Fe.W=0+mt+Me,Fe.Db=T,Fe.Ed=Me,w==12&&(Fe.F=Xe,Fe.J=0+mt+2*Me),Fe.Tc=Ae,Fe.lb=Le)}if(T=1,Le=ue.S,Me=ue.width,Ae=ue.height,Le>=Ro&&13>Le)if(11>Le)w=ue.f.RGBA,T&=(Ne=Math.abs(w.A))*(Ae-1)+Me<=w.size,T&=Ne>=Me*If[Le],T&=w.eb!=null;else{w=ue.f.kb,Ne=(Me+1)/2,mt=(Ae+1)/2,Fe=Math.abs(w.fa),Xe=Math.abs(w.Ab);var Rt=Math.abs(w.Db),Ft=Math.abs(w.lb),Pt=Ft*(Ae-1)+Me;T&=Fe*(Ae-1)+Me<=w.Fd,T&=Xe*(mt-1)+Ne<=w.Cd,T=(T&=Rt*(mt-1)+Ne<=w.Ed)&Fe>=Me&Xe>=Ne&Rt>=Ne,T&=w.y!=null,T&=w.f!=null,T&=w.ea!=null,Le==12&&(T&=Ft>=Me,T&=Pt<=w.Tc,T&=w.F!=null)}else T=0;w=T?0:2}}return w!=0||q!=null&&q.fd&&(w=wl(ue)),w}var Cs=64,Ia=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ea=24,Io=32,$l=8,no=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ve("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(w){return w},N.Predictor2=function(w,T,q){return T[q+0]},N.Predictor3=function(w,T,q){return T[q+1]},N.Predictor4=function(w,T,q){return T[q-1]},N.Predictor5=function(w,T,q){return Ze(Ze(w,T[q+1]),T[q+0])},N.Predictor6=function(w,T,q){return Ze(w,T[q-1])},N.Predictor7=function(w,T,q){return Ze(w,T[q+0])},N.Predictor8=function(w,T,q){return Ze(T[q-1],T[q+0])},N.Predictor9=function(w,T,q){return Ze(T[q+0],T[q+1])},N.Predictor10=function(w,T,q){return Ze(Ze(w,T[q-1]),Ze(T[q+0],T[q+1]))},N.Predictor11=function(w,T,q){var ue=T[q+0];return 0>=ut(ue>>24&255,w>>24&255,(T=T[q-1])>>24&255)+ut(ue>>16&255,w>>16&255,T>>16&255)+ut(ue>>8&255,w>>8&255,T>>8&255)+ut(255&ue,255&w,255&T)?ue:w},N.Predictor12=function(w,T,q){var ue=T[q+0];return(_t((w>>24&255)+(ue>>24&255)-((T=T[q-1])>>24&255))<<24|_t((w>>16&255)+(ue>>16&255)-(T>>16&255))<<16|_t((w>>8&255)+(ue>>8&255)-(T>>8&255))<<8|_t((255&w)+(255&ue)-(255&T)))>>>0},N.Predictor13=function(w,T,q){var ue=T[q-1];return(We((w=Ze(w,T[q+0]))>>24&255,ue>>24&255)<<24|We(w>>16&255,ue>>16&255)<<16|We(w>>8&255,ue>>8&255)<<8|We(w>>0&255,ue>>0&255))>>>0};var _o=N.PredictorAdd0;N.PredictorAdd1=Vt,Ve("Predictor2","PredictorAdd2"),Ve("Predictor3","PredictorAdd3"),Ve("Predictor4","PredictorAdd4"),Ve("Predictor5","PredictorAdd5"),Ve("Predictor6","PredictorAdd6"),Ve("Predictor7","PredictorAdd7"),Ve("Predictor8","PredictorAdd8"),Ve("Predictor9","PredictorAdd9"),Ve("Predictor10","PredictorAdd10"),Ve("Predictor11","PredictorAdd11"),Ve("Predictor12","PredictorAdd12"),Ve("Predictor13","PredictorAdd13");var wo=N.PredictorAdd2;at("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),at("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var Tc,Is=N.ColorIndexInverseTransform,Ka=N.MapARGB,ro=N.VP8LColorIndexInverseTransformAlpha,io=N.MapAlpha,Xa=N.VP8LPredictorsAdd=[];Xa.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var Ja,so,Hs,Ba,ta,oo,Lt,Yt,Nt,Rn,rr,Pr,Ki,Ei,pu,xo,Xi,Ra,Qa,Fa,ja,za,ti,ba,Ws,Pi,Ii,bs,Ui=s(511),na=s(2041),Bo=s(225),ca=s(767),nc=0,$a=na,Es=Bo,$i=ca,ao=Ui,Ro=0,wr=1,el=2,tl=3,_a=4,Lo=5,oh=6,Gs=7,qs=8,wa=9,u=10,y=[2,3,7],P=[3,3,11],G=[280,256,256,256,40],le=[0,1,1,1,0],Pe=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ct=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ot=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Gt=8,cn=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],zn=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],or=null,$r=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ps=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],as=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ys=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ji=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Fo=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ah=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Va=[],xa=[],ha=[],Od=1,Nu=2,bi=[],lo=[];Wt("UpsampleRgbLinePair",Vr,3),Wt("UpsampleBgrLinePair",qi,3),Wt("UpsampleRgbaLinePair",Qo,4),Wt("UpsampleBgraLinePair",Ss,4),Wt("UpsampleArgbLinePair",ys,4),Wt("UpsampleRgba4444LinePair",Ci,2),Wt("UpsampleRgb565LinePair",gi,2);var Ie=N.UpsampleRgbLinePair,jo=N.UpsampleBgrLinePair,rc=N.UpsampleRgbaLinePair,Zs=N.UpsampleBgraLinePair,Hr=N.UpsampleArgbLinePair,Vh=N.UpsampleRgba4444LinePair,Af=N.UpsampleRgb565LinePair,Uh=16,Ll=1<<Uh-1,lh=-227,Nd=482,Up=6,Dc=0,Hh=s(256),gu=s(256),Hp=s(256),Wh=s(256),Gh=s(Nd-lh),Tf=s(Nd-lh);to("YuvToRgbRow",Vr,3),to("YuvToBgrRow",qi,3),to("YuvToRgbaRow",Qo,4),to("YuvToBgraRow",Ss,4),to("YuvToArgbRow",ys,4),to("YuvToRgba4444Row",Ci,2),to("YuvToRgb565Row",gi,2);var Df=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],nl=[0,2,8],Of=[8,7,6,4,4,2,2,2,1,1,1,1],Nf=1;this.WebPDecodeRGBA=function(w,T,q,ue,Le){var Me=wr,Ae=new Us,Ne=new tr;Ae.ba=Ne,Ne.S=Me,Ne.width=[Ne.width],Ne.height=[Ne.height];var Fe=Ne.width,Xe=Ne.height,mt=new yr;if(mt==null||w==null)var Rt=2;else e(mt!=null),Rt=Na(w,T,q,mt.width,mt.height,mt.Pd,mt.Qd,mt.format,null);if(Rt!=0?Fe=0:(Fe!=null&&(Fe[0]=mt.width[0]),Xe!=null&&(Xe[0]=mt.height[0]),Fe=1),Fe){Ne.width=Ne.width[0],Ne.height=Ne.height[0],ue!=null&&(ue[0]=Ne.width),Le!=null&&(Le[0]=Ne.height);e:{if(ue=new Qr,(Le=new va).data=w,Le.w=T,Le.ha=q,Le.kd=1,T=[0],e(Le!=null),((w=Na(Le.data,Le.w,Le.ha,null,null,null,T,null,Le))==0||w==7)&&T[0]&&(w=4),(T=w)==0){if(e(Ae!=null),ue.data=Le.data,ue.w=Le.w+Le.offset,ue.ha=Le.ha-Le.offset,ue.put=Oo,ue.ac=Ai,ue.bc=Ds,ue.ma=Ae,Le.xa){if((w=Ln())==null){Ae=1;break e}if(function(Ft,Pt){var Zt=[0],qt=[0],vt=[0];t:for(;;){if(Ft==null)return 0;if(Pt==null)return Ft.a=2,0;if(Ft.l=Pt,Ft.a=0,Q(Ft.m,Pt.data,Pt.w,Pt.ha),!nr(Ft.m,Zt,qt,vt)){Ft.a=3;break t}if(Ft.xb=Nu,Pt.width=Zt[0],Pt.height=qt[0],!jr(Zt[0],qt[0],1,Ft,null))break t;return 1}return e(Ft.a!=0),0}(w,ue)){if(ue=(T=xl(ue.width,ue.height,Ae.Oa,Ae.ba))==0){t:{ue=w;n:for(;;){if(ue==null){ue=0;break t}if(e(ue.s.yc!=null),e(ue.s.Ya!=null),e(0<ue.s.Wb),e((q=ue.l)!=null),e((Le=q.ma)!=null),ue.xb!=0){if(ue.ca=Le.ba,ue.tb=Le.tb,e(ue.ca!=null),!tc(Le.Oa,q,tl)){ue.a=2;break n}if(!un(ue,q.width)||q.da)break n;if((q.da||Qt(ue.ca.S))&&Mt(),11>ue.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ue.ca.f.kb.F!=null&&Mt()),ue.Pb&&0<ue.s.ua&&ue.s.vb.X==null&&!ee(ue.s.vb,ue.s.Wa.Xa)){ue.a=1;break n}ue.xb=0}if(!Ct(ue,ue.V,ue.Ba,ue.c,ue.i,q.o,Un))break n;Le.Dc=ue.Ma,ue=1;break t}e(ue.a!=0),ue=0}ue=!ue}ue&&(T=w.a)}else T=w.a}else{if((w=new fr)==null){Ae=1;break e}if(w.Fa=Le.na,w.P=Le.P,w.qc=Le.Sa,Ls(w,ue)){if((T=xl(ue.width,ue.height,Ae.Oa,Ae.ba))==0){if(w.Aa=0,q=Ae.Oa,e((Le=w)!=null),q!=null){if(0<(Fe=0>(Fe=q.Md)?0:100<Fe?255:255*Fe/100)){for(Xe=mt=0;4>Xe;++Xe)12>(Rt=Le.pb[Xe]).lc&&(Rt.ia=Fe*Of[0>Rt.lc?0:Rt.lc]>>3),mt|=Rt.ia;mt&&(alert("todo:VP8InitRandom"),Le.ia=1)}Le.Ga=q.Id,100<Le.Ga?Le.Ga=100:0>Le.Ga&&(Le.Ga=0)}Pn(w,ue)||(T=w.a)}}else T=w.a}T==0&&Ae.Oa!=null&&Ae.Oa.fd&&(T=wl(Ae.ba))}Ae=T}Me=Ae!=0?null:11>Me?Ne.f.RGBA.eb:Ne.f.kb.y}else Me=null;return Me};var If=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(N,$){for(var Z="",B=0;B<4;B++)Z+=String.fromCharCode(N[$++]);return Z}function d(N,$){return(N[$+0]<<0|N[$+1]<<8|N[$+2]<<16)>>>0}function p(N,$){return(N[$+0]<<0|N[$+1]<<8|N[$+2]<<16|N[$+3]<<24)>>>0}new l;var v=[0],g=[0],x=[],E=new l,k=t,A=function(N,$){var Z={},B=0,I=!1,R=0,z=0;if(Z.frames=[],!function(H,K,me,fe){for(var he=0;he<fe;he++)if(H[K+he]!=me.charCodeAt(he))return!0;return!1}(N,$,"RIFF",4)){var U,V;for(p(N,$+=4),$+=8;$<N.length;){var re=c(N,$),Q=p(N,$+=4);$+=4;var _e=Q+(1&Q);switch(re){case"VP8 ":case"VP8L":Z.frames[B]===void 0&&(Z.frames[B]={}),(ae=Z.frames[B]).src_off=I?z:$-8,ae.src_size=R+Q+8,B++,I&&(I=!1,R=0,z=0);break;case"VP8X":(ae=Z.header={}).feature_flags=N[$];var we=$+4;ae.canvas_width=1+d(N,we),we+=3,ae.canvas_height=1+d(N,we),we+=3;break;case"ALPH":I=!0,R=_e+8,z=$-8;break;case"ANIM":(ae=Z.header).bgcolor=p(N,$),we=$+4,ae.loop_count=(U=N)[(V=we)+0]<<0|U[V+1]<<8,we+=2;break;case"ANMF":var Qe,ae;(ae=Z.frames[B]={}).offset_x=2*d(N,$),$+=3,ae.offset_y=2*d(N,$),$+=3,ae.width=1+d(N,$),$+=3,ae.height=1+d(N,$),$+=3,ae.duration=d(N,$),$+=3,Qe=N[$++],ae.dispose=1&Qe,ae.blend=Qe>>1&1}re!="ANMF"&&($+=_e)}return Z}}(k,0);A.response=k,A.rgbaoutput=!0,A.dataurl=!1;var D=A.header?A.header:null,j=A.frames?A.frames:null;if(D){D.loop_counter=D.loop_count,v=[D.canvas_height],g=[D.canvas_width];for(var Y=0;Y<j.length&&j[Y].blend!=0;Y++);}var te=j[0],ge=E.WebPDecodeRGBA(k,te.src_off,te.src_size,g,v);te.rgba=ge,te.imgwidth=g[0],te.imgheight=v[0];for(var pe=0;pe<g[0]*v[0]*4;pe++)x[pe]=ge[pe];return this.width=g,this.height=v,this.data=x,this}(function(t){var e=function(){return typeof kb=="function"},n=function(v,g,x,E){var k=4,A=o;switch(E){case t.image_compression.FAST:k=1,A=s;break;case t.image_compression.MEDIUM:k=6,A=a;break;case t.image_compression.SLOW:k=9,A=l}v=r(v,g,x,A);var D=kb(v,{level:k});return t.__addimage__.arrayBufferToBinaryString(D)},r=function(v,g,x,E){for(var k,A,D,j=v.length/g,Y=new Uint8Array(v.length+j),te=d(),ge=0;ge<j;ge+=1){if(D=ge*g,k=v.subarray(D,D+g),E)Y.set(E(k,x,A),D+ge);else{for(var pe,N=te.length,$=[];pe<N;pe+=1)$[pe]=te[pe](k,x,A);var Z=p($.concat());Y.set($[Z],D+ge)}A=k}return Y},i=function(v){var g=Array.apply([],v);return g.unshift(0),g},s=function(v,g){var x,E=[],k=v.length;E[0]=1;for(var A=0;A<k;A+=1)x=v[A-g]||0,E[A+1]=v[A]-x+256&255;return E},o=function(v,g,x){var E,k=[],A=v.length;k[0]=2;for(var D=0;D<A;D+=1)E=x&&x[D]||0,k[D+1]=v[D]-E+256&255;return k},a=function(v,g,x){var E,k,A=[],D=v.length;A[0]=3;for(var j=0;j<D;j+=1)E=v[j-g]||0,k=x&&x[j]||0,A[j+1]=v[j]+256-(E+k>>>1)&255;return A},l=function(v,g,x){var E,k,A,D,j=[],Y=v.length;j[0]=4;for(var te=0;te<Y;te+=1)E=v[te-g]||0,k=x&&x[te]||0,A=x&&x[te-g]||0,D=c(E,k,A),j[te+1]=v[te]-D+256&255;return j},c=function(v,g,x){if(v===g&&g===x)return v;var E=Math.abs(g-x),k=Math.abs(v-x),A=Math.abs(v+g-x-x);return E<=k&&E<=A?v:k<=A?g:x},d=function(){return[i,s,o,a,l]},p=function(v){var g=v.map(function(x){return x.reduce(function(E,k){return E+Math.abs(k)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(v,g,x,E){var k,A,D,j,Y,te,ge,pe,N,$,Z,B,I,R,z,U=this.decode.FLATE_DECODE,V="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(D=new GH(v)).imgData,A=D.bits,k=D.colorSpace,Y=D.colors,[4,6].indexOf(D.colorType)!==-1){if(D.bits===8){N=(pe=D.pixelBitlength==32?new Uint32Array(D.decodePixels().buffer):D.pixelBitlength==16?new Uint16Array(D.decodePixels().buffer):new Uint8Array(D.decodePixels().buffer)).length,Z=new Uint8Array(N*D.colors),$=new Uint8Array(N);var re,Q=D.pixelBitlength-D.bits;for(R=0,z=0;R<N;R++){for(I=pe[R],re=0;re<Q;)Z[z++]=I>>>re&255,re+=D.bits;$[R]=I>>>re&255}}if(D.bits===16){N=(pe=new Uint32Array(D.decodePixels().buffer)).length,Z=new Uint8Array(N*(32/D.pixelBitlength)*D.colors),$=new Uint8Array(N*(32/D.pixelBitlength)),B=D.colors>1,R=0,z=0;for(var _e=0;R<N;)I=pe[R++],Z[z++]=I>>>0&255,B&&(Z[z++]=I>>>16&255,I=pe[R++],Z[z++]=I>>>0&255),$[_e++]=I>>>16&255;A=8}E!==t.image_compression.NONE&&e()?(v=n(Z,D.width*D.colors,D.colors,E),ge=n($,D.width,1,E)):(v=Z,ge=$,U=void 0)}if(D.colorType===3&&(k=this.color_spaces.INDEXED,te=D.palette,D.transparency.indexed)){var we=D.transparency.indexed,Qe=0;for(R=0,N=we.length;R<N;++R)Qe+=we[R];if((Qe/=255)===N-1&&we.indexOf(0)!==-1)j=[we.indexOf(0)];else if(Qe!==N){for(pe=D.decodePixels(),$=new Uint8Array(pe.length),R=0,N=pe.length;R<N;R++)$[R]=we[pe[R]];ge=n($,D.width,1)}}var ae=function(H){var K;switch(H){case t.image_compression.FAST:K=11;break;case t.image_compression.MEDIUM:K=13;break;case t.image_compression.SLOW:K=14;break;default:K=12}return K}(E);return U===this.decode.FLATE_DECODE&&(V="/Predictor "+ae+" "),V+="/Colors "+Y+" /BitsPerComponent "+A+" /Columns "+D.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(ge&&this.__addimage__.isArrayBuffer(ge)||this.__addimage__.isArrayBufferView(ge))&&(ge=this.__addimage__.arrayBufferToBinaryString(ge)),{alias:x,data:v,index:g,filter:U,decodeParameters:V,transparency:j,palette:te,sMask:ge,predictor:ae,width:D.width,height:D.height,bitsPerComponent:A,colorSpace:k}}}})(Or.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new qH(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},d=new c2(100).encode(c,100);return t.processJPEG.call(this,d,n,r,i)},t.processGIF87A=t.processGIF89A}(Or.API),fc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},fc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){ws.log("bit decode error:"+n)}},fc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},fc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},fc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},fc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,d=r*this.width*4+4*i;this.data[d]=l,this.data[d+1]=a,this.data[d+2]=o,this.data[d+3]=c}this.pos+=t}},fc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,d=i*this.width*4+4*s;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=a,this.data[d+3]=255}this.pos+=t}},fc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},fc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},fc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new fc(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new c2(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(Or.API),R5.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new R5(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new c2(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(Or.API),Or.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var d=r[c],p=r[c+1],v=r[c+2],g=r[c+3];s[a++]=d,s[a++]=p,s[a++]=v,o[l++]=g}var x=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:x,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Or.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Kf=Or.API,E0=Kf.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=c.fof?c.fof:1,p=e.doKerning!==!1,v=0,g=t.length,x=0,E=a[0]||l,k=[];for(n=0;n<g;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?k.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(v=p&&cs(c[r])==="object"&&!isNaN(parseInt(c[r][x],10))?c[r][x]/d:0,k.push((a[r]||E)/l+v)),x=r;return k},O5=Kf.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Kf.processArabic&&(t=Kf.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:E0.apply(this,arguments).reduce(function(s,o){return s+o},0)},N5=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},I5=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,d=[],p=[d],v=n.textIndent||0,g=0,x=0,E=t.split(" "),k=E0.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?E[0].length+2:n.lineIndent||0){var A=Array(l).join(" "),D=[];E.map(function(Y){(Y=Y.split(/\s*\n/)).length>1?D=D.concat(Y.map(function(te,ge){return(ge&&te.length?`
`:"")+te})):D.push(Y[0])}),E=D,l=O5.apply(this,[A,n])}for(s=0,o=E.length;s<o;s++){var j=0;if(r=E[s],l&&r[0]==`
`&&(r=r.substr(1),j=1),v+g+(x=(i=E0.apply(this,[r,n])).reduce(function(Y,te){return Y+te},0))>e||j){if(x>e){for(a=N5.apply(this,[r,i,e-(v+g),e]),d.push(a.shift()),d=[a.pop()];a.length;)p.push([a.shift()]);x=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(Y,te){return Y+te},0)}else d=[r];p.push(d),v=x+l,g=k}else d.push(r),v+=g+x,g=k}return c=l?function(Y,te){return(te?A:"")+Y.join(" ")}:function(Y){return Y.join(" ")},p.map(c)},Kf.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(I5.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var v,g,x,E,k=["{"];for(var A in p){if(v=p[A],isNaN(parseInt(A,10))?g="'"+A+"'":(A=parseInt(A,10),g=(g=s(A).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof v=="number")v<0?(x=s(v).slice(3),E="-"):(x=s(v).slice(2),E=""),x=E+x.slice(0,-1)+r[x.slice(-1)];else{if(cs(v)!=="object")throw new Error("Don't know what to do with value type "+cs(v)+".");x=o(v)}k.push(g+x)}return k.push("}"),k.join("")},a=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,g,x,E,k={},A=1,D=k,j=[],Y="",te="",ge=p.length-1,pe=1;pe<ge;pe+=1)(E=p[pe])=="'"?v?(x=v.join(""),v=void 0):v=[]:v?v.push(E):E=="{"?(j.push([D,x]),D={},x=void 0):E=="}"?((g=j.pop())[0][g[1]]=D,x=void 0,D=g[0]):E=="-"?A=-1:x===void 0?n.hasOwnProperty(E)?(Y+=n[E],x=parseInt(Y,16)*A,A=1,Y=""):Y+=E:n.hasOwnProperty(E)?(te+=n[E],D[x]=parseInt(te,16)*A,A=1,x=void 0,te=""):te+=E;return k},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var v=p.font,g=d.Unicode[v.postScriptName];g&&(v.metadata.Unicode={},v.metadata.Unicode.widths=g.widths,v.metadata.Unicode.kerning=g.kerning);var x=c.Unicode[v.postScriptName];x&&(v.metadata.Unicode.encoding=x,v.encoding=x.codePages[0])}])}(Or.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Gg(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Or),function(t){function e(){return(Rr.canvg?Promise.resolve(Rr.canvg):Ah(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Or.API.addSvgAsImage=function(n,r,i,s,o,a,l,c){if(isNaN(r)||isNaN(i))throw ws.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw ws.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=o;var p=d.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,d.width,d.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(x){return x.fromString(p,n,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(v)}).then(function(){g.addImage(d.toDataURL("image/jpeg",1),r,i,s,o,l,c)})}}(),Or.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},Or.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,d=0,p=0;function v(x,E){var k,A=!1;for(k=0;k<x.length;k+=1)x[k]===E&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=a.length;for(p=0;p<g;p+=1)n[a[p]].value=n[a[p]].defaultValue,n[a[p]].explicitSet=!1}if(cs(t)==="object"){for(i in t)if(s=t[i],v(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&v(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(d=0;d<s[c].length;d+=1)typeof s[c][d]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,E=[];for(x in n)n[x].explicitSet===!0&&(n[x].type==="name"?E.push("/"+x+" /"+n[x].value):E.push("/"+x+" "+n[x].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(Or.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],p=0,v=s.length;p<v;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return d.join("");a=a.toString(16),d.push(c[4-a.length],a)}return d.join("")},r=function(s){var o,a,l,c,d,p,v;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,v=(a=Object.keys(s).sort(function(g,x){return g-x})).length;p<v;p++)o=a[p],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,d=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,v=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),g="",x=0;x<v.length;x++)g+=String.fromCharCode(v[x]);var E=c();d({data:g,addLength1:!0,objectId:E}),l("endobj");var k=c();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:k}),l("endobj");var A=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+lp(a.fontName)),l("/FontFile2 "+E+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var D=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+lp(a.fontName)),l("/FontDescriptor "+A+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+k+" 0 R"),l("/BaseFont /"+lp(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+D+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,d=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,v="",g=0;g<p.length;g++)v+=String.fromCharCode(p[g]);var x=c();d({data:v,addLength1:!0,objectId:x}),l("endobj");var E=c();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:E}),l("endobj");var k=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+x+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+lp(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var A=0;A<a.metadata.hmtx.widths.length;A++)a.metadata.hmtx.widths[A]=parseInt(a.metadata.hmtx.widths[A]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+lp(a.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,d=s.options||{},p=s.mutex||{},v=p.pdfEscape,g=p.activeFontKey,x=p.fonts,E=g,k="",A=0,D="",j=x[E].encoding;if(x[E].encoding!=="Identity-H")return{text:a,x:l,y:c,options:d,mutex:p};for(D=a,E=g,Array.isArray(a)&&(D=a[0]),A=0;A<D.length;A+=1)x[E].metadata.hasOwnProperty("cmap")&&(o=x[E].metadata.cmap.unicode.codeMap[D[A].charCodeAt(0)]),o||D[A].charCodeAt(0)<256&&x[E].metadata.hasOwnProperty("Unicode")?k+=D[A]:k+="";var Y="";return parseInt(E.slice(1))<14||j==="WinAnsiEncoding"?Y=v(k,E).split("").map(function(te){return te.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(Y=n(k,x[E])),p.isHex=!0,{text:Y,x:l,y:c,options:d,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(Or),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Or.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,d,p=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),D=!1,j=0;this.__bidiEngine__={};var Y=function(B){var I=B.charCodeAt(),R=I>>8,z=E[R];return z!==void 0?p[256*z+(255&I)]:R===252||R===253?"AL":A.test(R)?"L":R===8?"R":"N"},te=function(B){for(var I,R=0;R<B.length;R++){if((I=Y(B.charAt(R)))==="L")return!1;if(I==="R")return!0}return!1},ge=function(B,I,R,z){var U,V,re,Q,_e=I[z];switch(_e){case"L":case"R":D=!1;break;case"N":case"AN":break;case"EN":D&&(_e="AN");break;case"AL":D=!0,_e="R";break;case"WS":_e="N";break;case"CS":z<1||z+1>=I.length||(U=R[z-1])!=="EN"&&U!=="AN"||(V=I[z+1])!=="EN"&&V!=="AN"?_e="N":D&&(V="AN"),_e=V===U?V:"N";break;case"ES":_e=(U=z>0?R[z-1]:"B")==="EN"&&z+1<I.length&&I[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&R[z-1]==="EN"){_e="EN";break}if(D){_e="N";break}for(re=z+1,Q=I.length;re<Q&&I[re]==="ET";)re++;_e=re<Q&&I[re]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(Q=I.length,re=z+1;re<Q&&I[re]==="NSM";)re++;if(re<Q){var we=B[z],Qe=we>=1425&&we<=2303||we===64286;if(U=I[re],Qe&&(U==="R"||U==="AL")){_e="R";break}}}_e=z<1||(U=I[z-1])==="B"?"N":R[z-1];break;case"B":D=!1,i=!0,_e=j;break;case"S":s=!0,_e="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":D=!1;break;case"BN":_e="N"}return _e},pe=function(B,I,R){var z=B.split("");return R&&N(z,R,{hiLevel:j}),z.reverse(),I&&I.reverse(),z.join("")},N=function(B,I,R){var z,U,V,re,Q,_e=-1,we=B.length,Qe=0,ae=[],H=j?g:v,K=[];for(D=!1,i=!1,s=!1,U=0;U<we;U++)K[U]=Y(B[U]);for(V=0;V<we;V++){if(Q=Qe,ae[V]=ge(B,K,ae,V),z=240&(Qe=H[Q][x[ae[V]]]),Qe&=15,I[V]=re=H[Qe][5],z>0)if(z===16){for(U=_e;U<V;U++)I[U]=1;_e=-1}else _e=-1;if(H[Qe][6])_e===-1&&(_e=V);else if(_e>-1){for(U=_e;U<V;U++)I[U]=re;_e=-1}K[V]==="B"&&(I[V]=0),R.hiLevel|=re}s&&function(me,fe,he){for(var X=0;X<he;X++)if(me[X]==="S"){fe[X]=j;for(var J=X-1;J>=0&&me[J]==="WS";J--)fe[J]=j}}(K,I,we)},$=function(B,I,R,z,U){if(!(U.hiLevel<B)){if(B===1&&j===1&&!i)return I.reverse(),void(R&&R.reverse());for(var V,re,Q,_e,we=I.length,Qe=0;Qe<we;){if(z[Qe]>=B){for(Q=Qe+1;Q<we&&z[Q]>=B;)Q++;for(_e=Qe,re=Q-1;_e<re;_e++,re--)V=I[_e],I[_e]=I[re],I[re]=V,R&&(V=R[_e],R[_e]=R[re],R[re]=V);Qe=Q}Qe++}}},Z=function(B,I,R){var z=B.split(""),U={hiLevel:j};return R||(R=[]),N(z,R,U),function(V,re,Q){if(Q.hiLevel!==0&&d)for(var _e,we=0;we<V.length;we++)re[we]===1&&(_e=k.indexOf(V[we]))>=0&&(V[we]=k[_e+1])}(z,R,U),$(2,z,I,R,U),$(1,z,I,R,U),z.join("")};return this.__bidiEngine__.doBidiReorder=function(B,I,R){if(function(U,V){if(V)for(var re=0;re<U.length;re++)V[re]=re;a===void 0&&(a=te(U)),c===void 0&&(c=te(U))}(B,I),o||!l||c)if(o&&l&&a^c)j=a?1:0,B=pe(B,I,R);else if(!o&&l&&c)j=a?1:0,B=Z(B,I,R),B=pe(B,I);else if(!o||a||l||c){if(o&&!l&&a^c)B=pe(B,I),a?(j=0,B=Z(B,I,R)):(j=1,B=Z(B,I,R),B=pe(B,I));else if(o&&a&&!l&&c)j=1,B=Z(B,I,R),B=pe(B,I);else if(!o&&!l&&a^c){var z=d;a?(j=1,B=Z(B,I,R),j=0,d=!1,B=Z(B,I,R),d=z):(j=0,B=Z(B,I,R),B=pe(B,I),j=1,d=!1,B=Z(B,I,R),d=z,B=pe(B,I))}}else j=0,B=Z(B,I,R);else j=a?1:0,B=Z(B,I,R);return B},this.__bidiEngine__.setOptions=function(B){B&&(o=B.isInputVisual,l=B.isOutputVisual,a=B.isInputRtl,c=B.isOutputRtl,d=B.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(Or),Or.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Ed(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new lW(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new YH(this.contents),this.head=new KH(this),this.name=new tW(this),this.cmap=new oP(this),this.toUnicode={},this.hhea=new XH(this),this.maxp=new nW(this),this.hmtx=new rW(this),this.post=new QH(this),this.os2=new JH(this),this.loca=new aW(this),this.glyf=new iW(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var kc,Ed=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),YH=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,d,p,v,g,x,E;for(E in g=Object.keys(n).length,l=Math.log(2),p=16*Math.floor(Math.log(g)/l),o=Math.floor(p/l),d=16*g-p,(i=new Ed).writeInt(this.scalarType),i.writeShort(g),i.writeShort(p),i.writeShort(o),i.writeShort(d),s=16*g,c=i.pos+s,a=null,x=[],n)for(v=n[E],i.writeString(E),i.writeInt(t(v)),i.writeInt(c),i.writeInt(v.length),x=x.concat(v),E==="head"&&(a=c),c+=v.length;c%4;)x.push(0),c++;return i.write(x),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=aP.call(n);n.length%4;)n.push(0);for(s=new Ed(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),ZH={}.hasOwnProperty,sh=function(t,e){for(var n in e)ZH.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};kc=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var KH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return sh(e,kc),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Ed).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),F5=function(){function t(e,n){var r,i,s,o,a,l,c,d,p,v,g,x,E,k,A,D,j;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(g=e.readUInt16(),v=g/2,e.pos+=6,s=function(){var Y,te;for(te=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)te.push(e.readUInt16());return te}(),e.pos+=2,E=function(){var Y,te;for(te=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)te.push(e.readUInt16());return te}(),c=function(){var Y,te;for(te=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)te.push(e.readUInt16());return te}(),d=function(){var Y,te;for(te=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)te.push(e.readUInt16());return te}(),i=(this.length-e.pos+this.offset)/2,a=function(){var Y,te;for(te=[],l=Y=0;0<=i?Y<i:Y>i;l=0<=i?++Y:--Y)te.push(e.readUInt16());return te}(),l=A=0,j=s.length;A<j;l=++A)for(k=s[l],r=D=x=E[l];x<=k?D<=k:D>=k;r=x<=k?++D:--D)d[l]===0?o=r+c[l]:(o=a[d[l]/2+(r-x)-(v-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=p}return t.encode=function(e,n){var r,i,s,o,a,l,c,d,p,v,g,x,E,k,A,D,j,Y,te,ge,pe,N,$,Z,B,I,R,z,U,V,re,Q,_e,we,Qe,ae,H,K,me,fe,he,X,J,De,Te,Je;switch(z=new Ed,o=Object.keys(e).sort(function(de,ee){return de-ee}),n){case"macroman":for(E=0,k=function(){var de=[];for(x=0;x<256;++x)de.push(0);return de}(),D={0:0},s={},U=0,_e=o.length;U<_e;U++)D[J=e[i=o[U]]]==null&&(D[J]=++E),s[i]={old:e[i],new:D[e[i]]},k[i]=D[e[i]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(k),{charMap:s,subtable:z.data,maxGlyphID:E+1};case"unicode":for(I=[],p=[],j=0,D={},r={},A=c=null,V=0,we=o.length;V<we;V++)D[te=e[i=o[V]]]==null&&(D[te]=++j),r[i]={old:te,new:D[te]},a=D[te]-i,A!=null&&a===c||(A&&p.push(A),I.push(i),c=a),A=i;for(A&&p.push(A),p.push(65535),I.push(65535),Z=2*($=I.length),N=2*Math.pow(Math.log($)/Math.LN2,2),v=Math.log(N/2)/Math.LN2,pe=2*$-N,l=[],ge=[],g=[],x=re=0,Qe=I.length;re<Qe;x=++re){if(B=I[x],d=p[x],B===65535){l.push(0),ge.push(0);break}if(B-(R=r[B].new)>=32768)for(l.push(0),ge.push(2*(g.length+$-x)),i=Q=B;B<=d?Q<=d:Q>=d;i=B<=d?++Q:--Q)g.push(r[i].new);else l.push(R-B),ge.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*$+2*g.length),z.writeUInt16(0),z.writeUInt16(Z),z.writeUInt16(N),z.writeUInt16(v),z.writeUInt16(pe),he=0,ae=p.length;he<ae;he++)i=p[he],z.writeUInt16(i);for(z.writeUInt16(0),X=0,H=I.length;X<H;X++)i=I[X],z.writeUInt16(i);for(De=0,K=l.length;De<K;De++)a=l[De],z.writeUInt16(a);for(Te=0,me=ge.length;Te<me;Te++)Y=ge[Te],z.writeUInt16(Y);for(Je=0,fe=g.length;Je<fe;Je++)E=g[Je],z.writeUInt16(E);return{charMap:r,subtable:z.data,maxGlyphID:j+1}}},t}(),oP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return sh(e,kc),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new F5(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=F5.encode(n,r),(s=new Ed).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),XH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return sh(e,kc),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),JH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return sh(e,kc),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),QH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return sh(e,kc),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e}(),eW=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},tW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return sh(e,kc),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,c,d,p,v,g;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=p=0,v=i.length;p<v;o=++p)s=i[o],n.pos=s.offset,d=n.readString(s.length),a=new eW(d,s),c[g=s.nameID]==null&&(c[g]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),nW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return sh(e,kc),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),rW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return sh(e,kc),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,p;for(p=[],r=d=0;0<=s?d<s:d>s;r=0<=s?++d:--d)p.push(n.readInt16());return p}(),this.widths=(function(){var d,p,v,g;for(g=[],d=0,p=(v=this.metrics).length;d<p;d++)o=v[d],g.push(o.advance);return g}).call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),aP=[].slice,iW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return sh(e,kc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,c,d,p,v;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new Ed(r.read(s))).readShort(),d=l.readShort(),v=l.readShort(),c=l.readShort(),p=l.readShort(),this.cache[n]=a===-1?new oW(l,d,v,c,p):new sW(l,a,d,v,c,p),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),sW=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),oW=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Ed(aP.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),aW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return sh(e,kc),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var d=new Array(4*i.length),p=0;p<i.length;++p)d[4*p+3]=255&i[p],d[4*p+2]=(65280&i[p])>>8,d[4*p+1]=(16711680&i[p])>>16,d[4*p]=(4278190080&i[p])>>24;return d},e}(),lW=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,d,p,v,g,x,E,k,A;for(i in r=oP.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),g={0:0},A=r.charMap)g[(l=A[i]).old]=l.new;for(x in v=r.maxGlyphID,o)x in g||(g[x]=v++);return d=function(D){var j,Y;for(j in Y={},D)Y[D[j]]=j;return Y}(g),p=Object.keys(d).sort(function(D,j){return D-j}),E=function(){var D,j,Y;for(Y=[],D=0,j=p.length;D<j;D++)a=p[D],Y.push(d[a]);return Y}(),s=this.font.glyf.encode(o,E,g),c=this.font.loca.encode(s.offsets,E),k={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},t}();Or.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();const uW={class:"h-full flex"},cW={class:"flex-1 relative"},hW={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},dW={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},fW={class:"text-center max-w-lg mx-auto p-8"},pW={class:"space-y-4"},gW={class:"map-parent"},mW={class:"map-content flex flex-col h-full"},vW={class:"flex-1 flex flex-col md:flex-row relative"},yW={class:"flex-1 relative"},bW={key:0,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},_W={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-[9999] p-4 overflow-y-auto"},wW={class:"bg-white rounded-lg p-6 max-w-2xl w-full my-8 relative"},xW={class:"flex justify-between items-center mb-4 sticky top-0 bg-white pb-4 border-b"},LW={class:"overflow-y-auto max-h-[calc(100vh-12rem)]"},SW={key:0,class:"space-y-4"},CW={key:0,class:"space-y-2"},EW={class:"grid grid-cols-1 gap-2"},PW=["onClick"],MW={class:"font-medium text-gray-900"},kW={key:1,class:"space-y-2"},AW={class:"flex items-center mb-4"},TW={class:"text-sm text-gray-600"},DW={class:"grid grid-cols-1 gap-2"},OW=["onClick"],NW={class:"font-medium text-gray-900"},IW={key:2,class:"space-y-2"},BW={class:"flex items-center mb-4"},RW={class:"text-sm text-gray-600"},FW={class:"grid grid-cols-1 gap-2"},jW={key:0,class:"text-center py-4"},zW=["onClick"],$W={class:"font-medium text-gray-900"},VW={key:3,class:"space-y-2"},UW={class:"flex items-center mb-4"},HW={class:"text-sm text-gray-600"},WW={class:"grid grid-cols-1 gap-2"},GW=["onClick"],qW={class:"font-medium text-gray-900"},YW={class:"text-sm text-gray-500"},ZW={class:"text-xs text-gray-400 mt-1"},KW=["onClick"],XW={key:1,class:"space-y-4"},JW={key:0,class:"space-y-2"},QW={class:"grid grid-cols-1 gap-2"},eG={key:0,class:"text-center py-8"},tG=["onClick"],nG={class:"font-medium text-gray-900"},rG={key:1,class:"space-y-2"},iG={class:"flex items-center mb-4"},sG={class:"text-sm text-gray-600"},oG={class:"grid grid-cols-1 gap-2"},aG=["onClick"],lG={class:"font-medium text-gray-900"},uG={class:"text-sm text-gray-500"},cG={class:"text-xs text-gray-400 mt-1"},hG=["onClick"],dG={key:2,class:"space-y-4"},fG={key:0,class:"space-y-2"},pG={class:"grid grid-cols-1 gap-2"},gG=["onClick"],mG={class:"font-medium text-gray-900"},vG={key:1,class:"space-y-2"},yG={class:"flex items-center mb-4"},bG={class:"text-sm text-gray-600"},_G={class:"grid grid-cols-1 gap-2"},wG={key:0,class:"text-center py-4"},xG=["onClick"],LG={class:"font-medium text-gray-900"},SG={key:2,class:"space-y-2"},CG={class:"flex items-center mb-4"},EG={class:"text-sm text-gray-600"},PG={class:"grid grid-cols-1 gap-2"},MG=["onClick"],kG={class:"font-medium text-gray-900"},AG={class:"text-sm text-gray-500"},TG={class:"text-xs text-gray-400 mt-1"},DG=["onClick"],OG={key:3,class:"space-y-4"},NG={key:0,class:"text-center py-8"},IG={key:1,class:"space-y-2"},BG=["onClick"],RG={class:"font-medium text-gray-900"},FG={class:"text-sm text-gray-500"},jG={class:"text-xs text-gray-400 mt-1"},zG=["onClick"],$G={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4"},VG={class:"bg-white rounded-lg p-6 max-w-md w-full shadow-xl"},UG={class:"text-center mb-4"},HG={class:"mt-2 text-gray-600"},j5=js({__name:"MapView",emits:["shape-selected"],setup(t,{emit:e}){const n=eR(),r=St(null),i=St(!1),s=Uy(),o=Tp(),a=wf(),l=su(),c=St([]),d=St({planId:n.query.planId?parseInt(n.query.planId):null,noteId:n.query.noteId?parseInt(n.query.noteId):null,lat:n.query.lat?parseFloat(n.query.lat):null,lng:n.query.lng?parseFloat(n.query.lng):null,tool:n.query.tool||null}),{currentTool:p,selectedShape:v,map:g,initMap:x,setDrawingTool:E,updateShapeStyle:k,updateShapeProperties:A,featureGroup:D,adjustView:j,clearActiveControlPoints:Y,calculateConnectedCoverageArea:te,isDrawing:ge}=VU(),{initMap:pe,changeBaseMap:N}=UU(),$=St(!1),Z=St(!1),B=St(!1),I=St(!1),R=St(null),z=St(null),U=St(null),V=St(!1),re=St(null),Q=ma(),_e=St([]),we=St([]),Qe=St([]),ae=St(null),H=St(null),K=St(null),me=St(!1),fe=St(!1),he=St(!1),X=St(null),J=Qn(()=>{var lt,Re;return console.log("[MapView][filteredClients] Computing with:",{userType:(lt=Q.user)==null?void 0:lt.user_type,selectedSalarie:ae.value,salarieVisiteurs:we.value,visiteurCount:((Re=we.value)==null?void 0:Re.length)||0}),Q.isSalarie||ae.value?we.value:[]}),De=Qn(()=>{var wn,Ut,Jn;if(!v.value)return null;console.log("[MapView][selectedShape] Initial layer state:",{layer:v.value,hasName:"name"in v.value,name:v.value.name,hasProperties:"properties"in v.value,propertiesName:(wn=v.value.properties)==null?void 0:wn.name,allLayerKeys:Object.keys(v.value),allPropertiesKeys:v.value.properties?Object.keys(v.value.properties):[],_leaflet_id:v.value._leaflet_id,_dbId:v.value._dbId,descriptor:Object.getOwnPropertyDescriptor(v.value,"name")});const lt=v.value.properties||{};let Re="unknown";lt.type?Re=lt.type:v.value instanceof $t.Circle?Re="Circle":v.value instanceof Ga||v.value instanceof $t.Rectangle?Re="Rectangle":v.value instanceof cd||v.value instanceof $t.Polygon?Re="Polygon":v.value instanceof Sd?Re="ElevationLine":(v.value instanceof ia||v.value instanceof $t.Polyline&&!(v.value instanceof $t.Polygon))&&(Re="Line"),console.log(`[MapView][selectedShape] Type de forme détecté: ${Re}`),lt.type||(v.value.properties||(v.value.properties={}),v.value.properties.type=Re);let ft;if(lt.style&&lt.style.name)ft=lt.style.name,console.log("[MapView][selectedShape] Using name from style:",ft);else if(lt.name)ft=lt.name,console.log("[MapView][selectedShape] Using name from properties:",ft);else if(v.value.name)ft=v.value.name,console.log("[MapView][selectedShape] Using name from layer:",ft);else{const Ct=Object.getOwnPropertyDescriptor(v.value,"name");Ct&&Ct.value&&(ft=Ct.value,console.log("[MapView][selectedShape] Found name in non-enumerable layer property:",ft));const Ht=["_name","displayName","title"];for(const Ln of Ht)if(v.value[Ln]){ft=v.value[Ln],console.log(`[MapView][selectedShape] Found name in ${Ln}:`,ft);break}}ft&&(console.log(`[MapView][selectedShape] Ensuring name "${ft}" is set everywhere`),v.value.properties||(v.value.properties={}),v.value.properties.name=ft,v.value.properties.style||(v.value.properties.style={}),v.value.properties.style.name=ft,v.value.name=ft,typeof v.value.setName=="function"&&(v.value.setName(ft),console.log(`[MapView][selectedShape] Used setName method to set name "${ft}"`))),v.value.properties.category||(v.value.properties.category="forages"),v.value.properties.accessLevel||(v.value.properties.accessLevel="visitor"),console.log("[MapView][selectedShape] Preparing properties for DrawingTools:",{type:Re,name:lt.name,foundName:ft,hasNameProperty:"name"in lt,allPropertiesKeys:Object.keys(lt),layerId:v.value._leaflet_id,rawProperties:lt,layerName:v.value.name,layerPropertiesName:(Ut=v.value.properties)==null?void 0:Ut.name});const En={...lt,type:Re,name:ft||v.value.name||lt.name||void 0,category:v.value.properties.category||"forages",accessLevel:v.value.properties.accessLevel||"visitor"},Un={type:Re,properties:En,layer:v.value,options:v.value.options||{}};return console.log("[MapView][selectedShape] Final shape object for DrawingTools:",{type:Un.type,hasName:"name"in Un.properties,name:Un.properties.name,layerName:Un.layer.name,layerPropertiesName:(Jn=Un.layer.properties)==null?void 0:Jn.name}),Un});function Te(lt){const Re=lt.getCenter(),ft=lt.getZoom(),En={lat:Re.lat,lng:Re.lng,zoom:ft};document.cookie=`mapState=${JSON.stringify(En)};max-age=2592000;path=/`}function Je(){const Re=document.cookie.split(";").find(ft=>ft.trim().startsWith("mapState="));if(Re)try{return JSON.parse(Re.split("=")[1])}catch(ft){return console.error("Erreur lors de la lecture du cookie de position:",ft),null}return null}mo(async()=>{var lt,Re;console.log("[MapView][onMounted] Initialisation du composant MapView"),console.log("[MapView][onMounted] État initial des filtres dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2));try{if(await s.fetchPlans(),(Q.isAdmin||Q.isEntreprise)&&await Dn(),Q.isEntreprise){me.value=!0;try{const Ct=await Bn.get("/users/",{params:{role:"SALARIE",entreprise:(lt=Q.user)==null?void 0:lt.id}});_e.value=Ct.data}catch(Ct){console.error("Error loading salaries:",Ct),_e.value=[]}finally{me.value=!1}}if(Q.isSalarie){fe.value=!0;try{const Ct=await Q.fetchSalarieVisiteurs(((Re=Q.user)==null?void 0:Re.id)||0);we.value=Array.isArray(Ct)?Ct:[Ct]}catch(Ct){console.error("Error loading clients:",Ct)}finally{fe.value=!1}}const ft=Je(),En=ft?[ft.lat,ft.lng]:[46.603354,1.888334],Un=(ft==null?void 0:ft.zoom)??6;if(r.value&&!g.value){const Ct=x(r.value,En,Un);Ct.pm.setLang("fr"),Ct.pm.addControls({rotateMode:!1}),pe(Ct),Ct.on("moveend",()=>{Te(Ct)}),window.addEventListener("map-set-location",Ht=>{if(Ct&&Ht.detail){const{lat:Ln,lng:jr,zoom:un}=Ht.detail;Ct.flyTo([Ln,jr],un,{duration:1.5,easeLinearity:.25})}}),D.value&&(D.value.on("layeradd",Ht=>{const Ln=Ht.layer;Ln&&Ln._leaflet_id&&c.value.findIndex(un=>un.layer&&un.layer._leaflet_id===Ln._leaflet_id)===-1&&(console.log(`[MapView][featureGroup.layeradd] Ajout de la couche ${Ln._leaflet_id} à shapes.value`),c.value.push({layer:Ln,id:Ln._dbId||Ln._leaflet_id}))}),D.value.on("layerremove",Ht=>{const Ln=Ht.layer;if(Ln&&Ln._leaflet_id)if(!Ln._dbId&&(!Ln.properties||Ln.properties&&!Ln.properties.type)){console.log(`[MapView][featureGroup.layerremove] Couche temporaire ${Ln._leaflet_id} supprimée définitivement`);const un=c.value.findIndex(an=>an.layer&&an.layer._leaflet_id===Ln._leaflet_id);un!==-1&&c.value.splice(un,1)}else console.log(`[MapView][featureGroup.layerremove] Couche ${Ln._leaflet_id} supprimée du featureGroup mais conservée dans shapes.value pour restauration ultérieure`)}))}if(d.value.planId)try{console.log("[MapView][onMounted] Chargement du plan depuis les paramètres d'URL:",d.value.planId),await ze(d.value.planId);const Ct=document.querySelector(".map-parent");Ct instanceof HTMLElement&&(Ct.style.display="block"),d.value.lat&&d.value.lng&&g.value&&(console.log("[MapView][onMounted] Centrage de la carte sur les coordonnées:",d.value.lat,d.value.lng),g.value.flyTo([d.value.lat,d.value.lng],16)),d.value.noteId&&D.value&&(console.log("[MapView][onMounted] Recherche de la note:",d.value.noteId),setTimeout(()=>{var Ln;const Ht=((Ln=D.value)==null?void 0:Ln.getLayers())||[];for(const jr of Ht)if(jr._dbId===d.value.noteId||jr.id===d.value.noteId){console.log("[MapView][onMounted] Note trouvée:",jr),typeof jr.fire=="function"&&jr.fire("click");break}},1e3)),d.value.tool&&(console.log("[MapView][onMounted] Activation de l'outil:",d.value.tool),E(d.value.tool))}catch(Ct){console.error("[MapView][onMounted] Erreur chargement plan depuis URL:",Ct),wn()}else wn();async function wn(){const Ct=localStorage.getItem("lastPlanId");if(Ct)try{console.log("[MapView][loadLastPlan] Chargement du dernier plan:",Ct),await ze(parseInt(Ct));const Ht=document.querySelector(".map-parent");Ht instanceof HTMLElement&&(Ht.style.display="block")}catch(Ht){console.error("[MapView][loadLastPlan] Erreur chargement dernier plan:",Ht),R.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se(),localStorage.removeItem("lastPlanId")}else console.log("[MapView][loadLastPlan] Aucun dernier plan à charger"),R.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se()}window.addEventListener("shape:created",Ct=>{const{shape:Ht,type:Ln,properties:jr}=Ct.detail;console.log("[MapView] Nouvelle forme créée",{shape:Ht,type:Ln,properties:jr}),o.addElement(Ht),E("")}),window.addEventListener("geonote:savePlan",()=>{console.log("[MapView] Événement geonote:savePlan reçu - Sauvegarde automatique du plan"),Ce()}),window.addEventListener("geonote:select",Ct=>{if(console.log("[MapView] Événement geonote:select reçu",Ct.detail),Ct.detail&&Ct.detail.geoNote){const Ht=Ct.detail.geoNote;v.value=Ht,sa(()=>{console.log("[MapView] Note géolocalisée sélectionnée:",Ht)})}}),window.addEventListener("categoriesReactivated",Ct=>{console.log("[MapView][categoriesReactivated] Événement reçu:",Ct.detail),Ai()}),window.addEventListener("shapeTypesReactivated",Ct=>{console.log("[MapView][shapeTypesReactivated] Événement reçu:",Ct.detail),Ai()});const Ut=Ct=>{if(console.log("[MapView] Édition de note via Leaflet",Ct),console.log("[MapView] Type de e:",typeof Ct,"Contenu de e:",JSON.stringify(Ct)),!Ct||!Ct.note){console.error("[MapView] Erreur: e.note est undefined ou null",Ct);return}const Ht=Ct.note;console.log("[MapView] Note à éditer:",Ht),z.value={id:Ht.id,title:Ht.title||Ht.name,description:Ht.description,location:Ht.location,columnId:Ht.columnId||a.getDefaultColumn.id,accessLevel:Ht.accessLevel,style:Ht.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:Ht.createdAt||new Date().toISOString(),updatedAt:Ht.updatedAt||new Date().toISOString(),comments:Ht.comments||[],photos:Ht.photos||[]},console.log("[MapView] editingMapNote.value après conversion:",z.value),B.value=!0,console.log("[MapView] showNoteEditModal.value:",B.value)},Jn=Ct=>{if(console.log("[MapView] Édition de note via événement global",Ct),!Ct.detail||!Ct.detail.note){console.error("[MapView] Erreur: event.detail.note est undefined ou null",Ct);return}const Ht=Ct.detail.note;console.log("[MapView] Note à éditer (global):",Ht);const Ln=c.value.find(un=>un.layer===Ct.detail.source),jr=Ln?Ln.id:Ht.id;console.log("[MapView] ID de la note pour l'API:",jr,"Source:",Ct.detail.source?"Couche Leaflet":"Autre"),z.value={id:jr,title:Ht.title||Ht.name,description:Ht.description,location:Ht.location,columnId:Ht.columnId||a.getDefaultColumn.id,accessLevel:Ht.accessLevel,style:Ht.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:Ht.createdAt||new Date().toISOString(),updatedAt:Ht.updatedAt||new Date().toISOString(),comments:Ht.comments||[],photos:Ht.photos||[]},B.value=!0};window.addEventListener("geonote:edit",Jn),D.value&&(D.value.off("note:edit"),D.value.on("note:edit",Ut))}catch(ft){console.error("Error during component mount:",ft),R.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se(),localStorage.removeItem("lastPlanId")}}),ki(()=>o.hasUnsavedChanges,lt=>{console.log("[MapView][watch drawingStore.hasUnsavedChanges]",lt),lt&&R.value&&s.markUnsavedChanges()}),ki(()=>s.plans,lt=>{console.log("[MapView][watch irrigationStore.plans] Mise à jour de la liste des plans:",lt.length),Z.value&&(K.value||console.log("[MapView][watch irrigationStore.plans] Mise à jour de l'interface client"))},{deep:!0}),ki(()=>o.filters,(lt,Re)=>{if(console.log("[MapView][watch drawingStore.filters] Changement de filtres détecté:",JSON.stringify(lt,null,2)),Re){const ft=JSON.stringify(Re.accessLevels)!==JSON.stringify(lt.accessLevels),En=JSON.stringify(Re.categories)!==JSON.stringify(lt.categories),Un=JSON.stringify(Re.shapeTypes)!==JSON.stringify(lt.shapeTypes);console.log("[MapView][watch drawingStore.filters] Changements détectés:",{accessLevelsChanged:ft,categoriesChanged:En,shapeTypesChanged:Un}),ft||En||Un?(console.log("[MapView][watch drawingStore.filters] Mise à jour de l'affichage suite au changement de filtres"),Ai()):console.log("[MapView][watch drawingStore.filters] Aucun changement réel, pas de mise à jour")}else console.log("[MapView][watch drawingStore.filters] Mise à jour de l'affichage suite au changement de filtres"),Ai()},{deep:!0});const de=lt=>{console.log("[MapView][filtersChanged] Événement reçu:",lt.detail),Ai()};mo(()=>{window.addEventListener("filtersChanged",de)}),Ju(()=>{window.removeEventListener("filtersChanged",de),console.log("[MapView][filtersChanged] Événement désactivé")}),ki(()=>o.getFilteredElements,(lt,Re)=>{console.log("[MapView][watch drawingStore.getFilteredElements] Mise à jour de l'affichage, éléments filtrés:",{nouveaux:lt.length,anciens:Re?Re.length:"aucun",ids:lt.map(ft=>ft.id)}),console.log("[MapView][watch drawingStore.getFilteredElements] Mise à jour de l'affichage suite au changement d'elements filtrés"),Ai()},{deep:!0}),ki(g,async lt=>{var Re;console.log(`
[MapView][watch map] Nouvelle carte:`,!!lt),lt&&s.currentPlan&&!((Re=D.value)!=null&&Re.getLayers().length)&&(console.log("[MapView][watch map] Chargement initial des éléments du plan:",s.currentPlan.id),se(),await o.loadPlanElements(s.currentPlan.id))}),ki(()=>s.currentPlan,async(lt,Re)=>{var ft,En,Un;if((lt==null?void 0:lt.id)===(Re==null?void 0:Re.id)){console.log("[MapView][watch currentPlan] Plan identique, pas de rechargement nécessaire");return}console.log(`
[MapView][watch currentPlan] ====== CHANGEMENT DE PLAN ======`),console.log("[MapView][watch currentPlan] Nouveau plan:",lt==null?void 0:lt.id);try{if(lt){console.log("[MapView][watch currentPlan] Mise à jour du plan courant..."),R.value=lt;const wn=document.querySelector(".map-parent");wn instanceof HTMLElement&&(wn.style.display="block"),console.log("[MapView][watch currentPlan] Plan mis à jour avec succès")}else{console.log("[MapView][watch currentPlan] Nettoyage du plan courant..."),R.value=null,se();const wn=document.querySelector(".map-parent");wn instanceof HTMLElement&&(wn.style.display="none")}}catch(wn){console.error("[MapView][watch currentPlan] ERREUR:",wn),R.value=null,se()}console.log("[MapView][watch currentPlan] État final:",{currentPlanId:(ft=R.value)==null?void 0:ft.id,storePlanId:(En=s.currentPlan)==null?void 0:En.id,mapVisible:g.value!==null,mapParentDisplay:(Un=document.querySelector(".map-parent"))==null?void 0:Un.getAttribute("style")}),console.log(`[MapView][watch currentPlan] ====== FIN CHANGEMENT ======
`)},{immediate:!0}),Td(()=>{g.value&&g.value.off("moveend"),window.removeEventListener("shape:created",()=>{})});function ee(){i.value=!i.value}function se(){D.value&&(D.value.eachLayer(lt=>{var Re;((Re=lt.properties)==null?void 0:Re.type)==="Note"&&typeof lt.resetPlanSaveState=="function"&&lt.resetPlanSaveState()}),D.value.clearLayers()),c.value=[],Y(),v.value=null,p.value=""}async function ce(lt){return await pn.measureAsync("refreshMapWithPlan",async()=>{try{pn.measure("refreshMapWithPlan:clearMap",()=>{se()},"MapView"),await pn.measureAsync("refreshMapWithPlan:loadPlanElements",async()=>{await o.loadPlanElements(lt)},"MapView");const Re=pn.measure("refreshMapWithPlan:getPlanById",()=>s.getPlanById(lt),"MapView");Re?(pn.measure("refreshMapWithPlan:updateCurrentPlan",()=>{R.value=Re,s.setCurrentPlan(Re),o.setCurrentPlan(Re.id),localStorage.setItem("lastPlanId",Re.id.toString())},"MapView"),await pn.measureAsync("refreshMapWithPlan:loadPlanNotes",async()=>{try{console.log("[MapView][refreshMapWithPlan] Chargement des notes géolocalisées associées au plan:",lt);const En=(await Ea.getNotesByPlan(lt)).data;console.log(`[MapView][refreshMapWithPlan] ${En.length} notes géolocalisées récupérées`);const Un=wf();g.value&&D.value&&En.forEach(wn=>{try{if(Un.addNote({...wn,id:wn.id,columnId:wn.column,accessLevel:wn.access_level}),wn.location&&wn.location.type==="Point"&&Array.isArray(wn.location.coordinates)&&wn.location.coordinates.length===2){const Ut=Th.fromBackendData({name:wn.title,description:wn.description,location:wn.location,columnId:wn.column,accessLevel:wn.access_level,style:wn.style||{color:wn.color||"#3B82F6",weight:2,opacity:1,fillColor:wn.color||"#3B82F6",fillOpacity:.6,radius:8},category:wn.category||"forages",comments:wn.comments||[],photos:wn.photos||[]});Ut._dbId=wn.id,D.value.addLayer(Ut),c.value.push({id:wn.id,type:"Note",layer:Ut,properties:Ut.properties}),console.log("[MapView][refreshMapWithPlan] Note géolocalisée ajoutée à la carte:",{id:wn.id,title:wn.title,location:wn.location})}}catch(Ut){console.error("[MapView][refreshMapWithPlan] Erreur lors de l'ajout de la note géolocalisée:",Ut)}})}catch(ft){console.error("[MapView][refreshMapWithPlan] Erreur lors du chargement des notes géolocalisées:",ft)}},"MapView"),g.value&&D.value&&await pn.measureAsync("refreshMapWithPlan:addShapesToMap",async()=>{console.log("[MapView][refreshMapWithPlan] Éléments disponibles:",{count:o.getCurrentElements.length,elements:o.getCurrentElements.map(wn=>{var Ut;return{id:wn.id,type:wn.type_forme,hasName:wn.data&&"name"in wn.data,name:(Ut=wn.data)==null?void 0:Ut.name}})});const ft=o.getCurrentElements.reduce((wn,Ut)=>(wn[Ut.type_forme]||(wn[Ut.type_forme]=[]),wn[Ut.type_forme].push(Ut),wn),{}),En=10,Un=Object.entries(ft).map(async([wn,Ut])=>{for(let Jn=0;Jn<Ut.length;Jn+=En){const Ct=Ut.slice(Jn,Jn+En);await Promise.all(Ct.map(async Ht=>{await pn.measureAsync(`refreshMapWithPlan:createElement:${Ht.type_forme}`,async()=>{var jr;if(!D.value||!Ht.data)return;let Ln=null;switch(Ht.type_forme){case"Circle":{const un=Ht.data;un.center&&un.radius&&(Ln=new op($t.latLng(un.center[1],un.center[0]),{...un.style,radius:un.radius}),un.name&&(Ln.properties={type:"Circle",name:un.name,style:un.style,radius:un.radius,diameter:un.radius*2,surface:Math.PI*un.radius*un.radius,perimeter:2*Math.PI*un.radius},Ln.name=un.name));break}case"Rectangle":{const un=Ht.data;if(un.bounds){const an=$t.latLngBounds($t.latLng(un.bounds.southWest[1],un.bounds.southWest[0]),$t.latLng(un.bounds.northEast[1],un.bounds.northEast[0]));Ln=new Ga(an,un.style),un.name&&(Ln.properties={name:un.name},Ln.name=un.name)}break}case"Polygon":{const un=Ht.data;if(un.points&&un.points.length>0){const an=un.points.map(qn=>$t.latLng(qn[1],qn[0]));Ln=new cd(an,un.style),un.name&&(Ln.properties={name:un.name},Ln.name=un.name)}break}case"Line":{const un=Ht.data;if(un.points&&un.points.length>0){const an=un.points.map(qn=>$t.latLng(qn[1],qn[0]));Ln=new ia(an,un.style),un.name&&(Ln.properties={name:un.name},Ln.name=un.name)}break}case"ElevationLine":{const un=Ht.data;if(un.points&&un.points.length>0){const an=un.points.map(qn=>$t.latLng(qn[1],qn[0]));Ln=new Sd(an,un.style),un.name&&(Ln.properties={name:un.name,type:"ElevationLine",elevationData:un.elevationData,minElevation:un.minElevation,maxElevation:un.maxElevation,elevationGain:un.elevationGain,elevationLoss:un.elevationLoss,averageSlope:un.averageSlope,maxSlope:un.maxSlope},Ln.name=un.name),un.elevationData&&(Ln.elevationData=un.elevationData)}break}case"Note":{console.log("[MapView][refreshMapWithPlan] Création d'une note:",Ht.data);const un=Ht.data;if(un.location&&Array.isArray(un.location)&&un.location.length===2||un.location&&typeof un.location=="object"&&un.location.type==="Point"&&Array.isArray(un.location.coordinates)&&un.location.coordinates.length===2)try{un.category||(un.category="forages",console.log("[MapView][refreshMapWithPlan] Catégorie par défaut ajoutée:",un.category)),un.accessLevel||(un.accessLevel="private",console.log("[MapView][refreshMapWithPlan] Niveau d'accès par défaut ajouté:",un.accessLevel));const qn=Th.fromBackendData(un);qn._dbId=Ht.id,Ln=qn,console.log("[MapView][refreshMapWithPlan] Note créée:",{id:Ht.id,location:un.location,name:un.name,category:un.category,accessLevel:un.accessLevel,type:qn.properties.type})}catch(qn){console.error("[MapView][refreshMapWithPlan] Erreur lors de la création de la Note:",qn)}else console.error("[MapView][refreshMapWithPlan] Données invalides pour Note:",un),console.log("[MapView][refreshMapWithPlan] Format de location attendu:",{formatArray:"[lat, lng]",formatGeoJSON:'{ type: "Point", coordinates: [lng, lat] }'});break}}Ln&&(Ln._dbId=Ht.id,(jr=D.value)==null||jr.addLayer(Ln),c.value.push({id:Ht.id,type:Ht.type_forme,layer:Ln,properties:Ln.properties}))},"MapView")})),await new Promise(Ht=>setTimeout(Ht,0))}});await Promise.all(Un),pn.measure("refreshMapWithPlan:adjustView",()=>{j()},"MapView")},"MapView"),console.log(`Plan ${lt} chargé avec succès avec ${o.getCurrentElements.length} formes`)):console.error(`Plan ${lt} introuvable après chargement`),Z.value=!1}catch(Re){throw console.error("Erreur lors du rafraîchissement de la carte:",Re),Re}},"MapView")}async function ze(lt){return await pn.measureAsync("loadPlan",async()=>{var Re;console.log(`
[MapView][loadPlan] ====== DÉBUT CHARGEMENT PLAN ======`),console.log("[MapView][loadPlan] Tentative de chargement du plan:",lt);try{const ft=await pn.measureAsync("loadPlan:getPlanFromStore",async()=>s.getPlanById(lt),"MapView");if(console.log("[MapView][loadPlan] Plan trouvé dans le store:",!!ft),!ft){console.log("[MapView][loadPlan] Plan non trouvé dans le store, vérification API...");try{await pn.measureAsync("loadPlan:apiCheck",async()=>{await Bn.get(`/plans/${lt}/`)},"MapView")}catch(En){throw((Re=En.response)==null?void 0:Re.status)===404&&(console.warn("[MapView][loadPlan] Plan non trouvé - Nettoyage du localStorage"),localStorage.removeItem("lastPlanId"),R.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se()),En}}console.log("[MapView][loadPlan] Rafraîchissement de la carte..."),await pn.measureAsync("loadPlan:refreshMap",async()=>{await ce(lt)},"MapView"),Z.value=!1,console.log("[MapView][loadPlan] Invalidation de la taille de la carte..."),at(),console.log("[MapView][loadPlan] Plan chargé avec succès:",{planId:lt,elementsCount:o.getCurrentElements.length})}catch(ft){throw console.error("Erreur lors du chargement du plan:",ft),pn.measure("loadPlan:errorRecovery",()=>{R.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se(),localStorage.removeItem("lastPlanId")},"MapView"),ft}},"MapView")}async function Ce(){var lt;if(!R.value||!D.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}V.value=!0,re.value="saving";try{const Re=[],ft=new Set(o.getCurrentElements.filter(Ut=>Ut.id!==void 0).map(Ut=>Ut.id)),En=new Set;console.log("[savePlan] Début de la sauvegarde",{featureGroupLayers:D.value.getLayers().length,existingIds:Array.from(ft),currentElements:o.getCurrentElements}),D.value.eachLayer(Ut=>{var Ln,jr,un,an,qn,li,xi,zi,Jr,_r,kr,di,Ir,on,Ni,vi,Yi,Qr,fr,On,Lr,Ls,vo;console.log("[savePlan] Traitement de la couche",{type:(Ln=Ut.properties)==null?void 0:Ln.type,name:(jr=Ut.properties)==null?void 0:jr.name,isPolygon:Ut instanceof $t.Polygon,properties:Ut.properties});let Jn,Ct;const Ht={color:Ut.options.color||"#2b6451",weight:Ut.options.weight||3,opacity:Ut.options.opacity||1,fillColor:Ut.options.fillColor||"#2b6451",fillOpacity:Ut.options.fillOpacity||.2,dashArray:Ut.options.dashArray||""};if(Ut instanceof Ga){Jn="Rectangle";const hr=Ut.getBounds();Ct={bounds:{southWest:[hr.getSouthWest().lng,hr.getSouthWest().lat],northEast:[hr.getNorthEast().lng,hr.getNorthEast().lat]},style:Ht,name:((un=Ut.properties)==null?void 0:un.name)||"",rotation:Ut.getRotation(),width:Ut.getDimensions().width,height:Ut.getDimensions().height,center:[Ut.getCenter().lng,Ut.getCenter().lat]}}else if(Ut instanceof $t.Circle)Jn="Circle",Ct={center:[Ut.getLatLng().lng,Ut.getLatLng().lat],radius:Ut.getRadius(),name:((an=Ut.properties)==null?void 0:an.name)||"",style:Ht};else if(Ut instanceof $t.Rectangle){Jn="Rectangle";const hr=Ut.getBounds();Ct={bounds:{southWest:[hr.getSouthWest().lng,hr.getSouthWest().lat],northEast:[hr.getNorthEast().lng,hr.getNorthEast().lat]},name:((qn=Ut.properties)==null?void 0:qn.name)||"",style:Ht}}else if(Ut instanceof $t.Polyline&&!(Ut instanceof $t.Polygon))if(((li=Ut.properties)==null?void 0:li.type)==="ElevationLine"){Jn="ElevationLine";const hr=Ut.getLatLngs(),Pn=((xi=Ut.properties)==null?void 0:xi.category)||"forages",rn=((zi=Ut.properties)==null?void 0:zi.accessLevel)||"visitor";console.log("[savePlan] ElevationLine - Catégorie:",Pn,"Niveau d'accès:",rn),Ct={points:hr.map(yi=>[yi.lng,yi.lat]),style:{...Ht,color:((Jr=Ut.properties.style)==null?void 0:Jr.color)||"#FF4500",weight:((_r=Ut.properties.style)==null?void 0:_r.weight)||4,opacity:((kr=Ut.properties.style)==null?void 0:kr.opacity)||.8,_accessLevel:rn,accessLevel:rn},name:((di=Ut.properties)==null?void 0:di.name)||"",category:Pn,accessLevel:rn,elevationData:Ut.properties.elevationData,samplePointStyle:Ut.properties.samplePointStyle,minMaxPointStyle:Ut.properties.minMaxPointStyle,minElevation:Ut.properties.minElevation,maxElevation:Ut.properties.maxElevation,elevationGain:Ut.properties.elevationGain,elevationLoss:Ut.properties.elevationLoss,averageSlope:Ut.properties.averageSlope,maxSlope:Ut.properties.maxSlope}}else{Jn="Line";const hr=Ut.getLatLngs(),Pn=((Ir=Ut.properties)==null?void 0:Ir.category)||"forages",rn=((on=Ut.properties)==null?void 0:on.accessLevel)||"visitor";console.log("[savePlan] Line - Catégorie:",Pn,"Niveau d'accès:",rn),Ct={points:hr.map(yi=>[yi.lng,yi.lat]),name:((Ni=Ut.properties)==null?void 0:Ni.name)||"",category:Pn,accessLevel:rn,style:{...Ht,_accessLevel:rn,accessLevel:rn}}}else if(Ut instanceof $t.Polygon&&!(Ut instanceof $t.Rectangle)){Jn="Polygon";const hr=Ut.getLatLngs()[0],Pn=((vi=Ut.properties)==null?void 0:vi.category)||"forages",rn=((Yi=Ut.properties)==null?void 0:Yi.accessLevel)||"visitor";console.log("[savePlan] Polygon - Catégorie:",Pn,"Niveau d'accès:",rn),Ct={points:hr.map(yi=>[yi.lng,yi.lat]),name:((Qr=Ut.properties)==null?void 0:Qr.name)||"",category:Pn,accessLevel:rn,style:{...Ht,_accessLevel:rn,accessLevel:rn}}}else if(((fr=Ut.properties)==null?void 0:fr.type)==="Note"){console.log("[savePlan] Note géolocalisée détectée - sauvegarde via API dédiée");const hr=Ut;if(hr._dbId&&typeof hr._dbId=="number"&&En.add(hr._dbId),typeof hr.saveNote=="function")try{if(hr.properties&&(hr.properties.style||(hr.properties.style={}),hr.properties.accessLevel&&(hr.properties.style._accessLevel=hr.properties.accessLevel,hr.properties.style.accessLevel=hr.properties.accessLevel),hr.properties.style.color)){const Pn=hr.properties.style.color;console.log("[savePlan] Préservation de la couleur existante:",Pn),hr.properties.style.color=Pn,hr.properties.style.fillColor=Pn}console.log("[savePlan] Sauvegarde de la note géolocalisée via API dédiée",{category:(On=hr.properties)==null?void 0:On.category,accessLevel:(Lr=hr.properties)==null?void 0:Lr.accessLevel,styleAccessLevel:(vo=(Ls=hr.properties)==null?void 0:Ls.style)==null?void 0:vo.accessLevel}),R.value&&R.value.id?hr.saveNote(R.value.id):hr.saveNote()}catch(Pn){console.error("[savePlan] Erreur lors de la sauvegarde de la note:",Pn)}else console.warn("[savePlan] La note ne possède pas de méthode saveNote");Jn=void 0,Ct=void 0}if(Jn&&Ct){let hr=Ut._elementId;Ut._dbId&&(hr=Ut._dbId,typeof hr=="number"&&En.add(hr)),Re.push({id:hr,type_forme:Jn,data:Ct})}}),console.log("[savePlan] Éléments à sauvegarder",{totalElements:Re.length,elements:Re.map(Ut=>({type:Ut.type_forme,hasPoints:"points"in Ut.data,hasStyle:"style"in Ut.data}))});const Un=Array.from(ft).filter(Ut=>!En.has(Ut));console.log("[savePlan] Éléments supprimés:",{existingIds:Array.from(ft),currentLayerIds:Array.from(En),elementsToDelete:Un}),o.elements=Re.filter(Ut=>!Ut.id||!Un.includes(Ut.id));const wn=await o.saveToPlan(R.value.id,{elementsToDelete:Un});if(wn&&((lt=R.value)!=null&&lt.id)){const Ut=R.value.id;R.value={...R.value,...wn},s.updatePlanDetails(Ut,wn)}re.value="success",D.value&&D.value.eachLayer(Ut=>{var Jn;((Jn=Ut.properties)==null?void 0:Jn.type)==="Note"&&typeof Ut.resetPlanSaveState=="function"&&Ut.resetPlanSaveState()}),setTimeout(()=>{re.value=null},3e3)}catch(Re){console.error("Erreur lors de la sauvegarde du plan:",Re),re.value=null}finally{V.value=!1}}Ju(()=>{Q.user||We(),s.clearCurrentPlan(),o.clearCurrentPlan(),D.value&&D.value.off("note:edit"),window.removeEventListener("geonote:edit",()=>{}),window.removeEventListener("categoriesReactivated",()=>{}),window.removeEventListener("shapeTypesReactivated",()=>{}),window.removeEventListener("shape:created",()=>{}),window.removeEventListener("map-set-location",()=>{})});function ve(lt){var Re,ft,En;if(console.log("[MapView][updateShapeProperties] Mise à jour des propriétés:",lt),A(lt),v.value&&((Re=v.value.properties)==null?void 0:Re.type)==="Note")if(console.log("[MapView][updateShapeProperties] Note géolocalisée détectée, sauvegarde via API dédiée"),typeof v.value.saveNote=="function")try{if(lt.category&&(v.value.properties.category=lt.category),lt.accessLevel&&(v.value.properties.accessLevel=lt.accessLevel,v.value.properties.style||(v.value.properties.style={}),v.value.properties.style._accessLevel=lt.accessLevel,v.value.properties.style.accessLevel=lt.accessLevel),v.value.properties.style&&v.value.properties.style.color){const Un=v.value.properties.style.color;console.log("[MapView][updateShapeProperties] Préservation de la couleur existante:",Un),v.value.properties.style.color=Un,v.value.properties.style.fillColor=Un}console.log("[MapView][updateShapeProperties] Sauvegarde de la note géolocalisée via API dédiée",{category:(ft=v.value.properties)==null?void 0:ft.category,accessLevel:(En=v.value.properties)==null?void 0:En.accessLevel,updatedProperties:lt}),R.value&&R.value.id?v.value.saveNote(R.value.id):v.value.saveNote(),v.value.bindPopup&&v.value.createPopupContent&&(console.log("[MapView][updateShapeProperties] Forçage de la mise à jour du popup après la sauvegarde"),v.value.bindPopup(v.value.createPopupContent()))}catch(Un){console.error("[MapView][updateShapeProperties] Erreur lors de la sauvegarde de la note:",Un)}else console.warn("[MapView][updateShapeProperties] La note ne possède pas de méthode saveNote");else if(lt.category&&v.value&&v.value._dbId){const Un=v.value._dbId,wn=o.elements.find(Ut=>Ut.id===Un);if(wn){console.log(`[MapView][updateShapeProperties] Mise à jour de la catégorie dans le store: ${lt.category} pour l'élément ${Un}`);const Ut=wn;Ut.data||(Ut.data={}),Ut.data.category=lt.category,o.$patch({unsavedChanges:!0})}}}function Ve(lt){try{const Re=new Date(lt);return isNaN(Re.getTime())?(console.error("Date invalide reçue:",lt),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(Re)}catch(Re){return console.error("Erreur lors du formatage de la date:",Re),"Date invalide"}}const Ye=()=>{D.value&&j()},Ze=async()=>{var lt;if(v.value&&D.value){const Re=v.value._leaflet_id,ft=v.value._dbId;if(((lt=v.value.properties)==null?void 0:lt.type)==="Note"&&ft)try{console.log(`[MapView][deleteSelectedShape] Suppression de la note ${ft} du backend...`),await Ea.deleteNote(ft),a.removeNote(ft),console.log(`[MapView][deleteSelectedShape] Note ${ft} supprimée avec succès du backend et du store`),l.success("Note supprimée avec succès")}catch(Un){console.error(`[MapView][deleteSelectedShape] Erreur lors de la suppression de la note ${ft} du backend:`,Un),l.error("Erreur lors de la suppression de la note")}E(""),D.value.removeLayer(v.value),c.value=c.value.filter(Un=>Un.layer&&Un.layer._leaflet_id!==Re),console.log(`[MapView][deleteSelectedShape] Forme ${Re} (dbId: ${ft}) supprimée du featureGroup et de shapes.value`),v.value=null}};async function _t(lt){console.log(`onPlanCreated - Tentative de chargement du plan ${lt}`),await s.fetchPlans();const Re=s.getPlanById(lt);Re?(console.log(`Plan ${lt} trouvé, chargement en cours...`),localStorage.setItem("lastPlanId",lt.toString()),R.value=Re,s.setCurrentPlan(Re),o.setCurrentPlan(Re.id),$.value=!1,at(),console.log(`Plan ${lt} chargé avec succès`)):console.error(`Plan ${lt} introuvable après création! Vérifiez les permissions.`)}ki(ae,async lt=>{var Re;if(lt&&((Re=Q.user)==null?void 0:Re.user_type)==="admin"){fe.value=!0;try{const ft=await Q.fetchSalarieVisiteurs(lt.id);we.value=Array.isArray(ft)?ft:[ft]}catch(ft){console.error("[MapView][watch selectedSalarie] Error:",ft),we.value=[]}finally{fe.value=!1}}});function We(){localStorage.removeItem("lastPlanId")}function ut(lt,Re="m"){return Re==="m²"?`${(lt/1e4).toFixed(2)} ha`:Re==="m"?lt>=1e3?`${(lt/1e3).toFixed(2)} km`:`${lt.toFixed(2)} m`:`${lt.toFixed(2)} ${Re}`}const Vt=St(!1);function tn(lt){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",TextRectangle:"Annotation",ElevationLine:"Profil altimétrique"}[lt]||lt}async function bn(){var Re,ft,En,Un,wn,Ut,Jn,Ct,Ht,Ln;if(!R.value||!g.value||!D.value){console.error("[generateSynthesis] Plan, map ou featureGroup manquant");return}const lt=R.value;try{console.log("[generateSynthesis] Début de la génération"),console.log("[generateSynthesis] Plan courant complet:",lt),await Ce();let _r=lt;if(!lt.salarie_details&&!lt.entreprise_details&&!lt.client_details){console.log("[generateSynthesis] Détails manquants, tentative de récupération...");try{const Lr=await Bn.get(`/plans/${lt.id}/`);Lr.status===200&&(console.log("[generateSynthesis] Plan mis à jour:",Lr.data),R.value={...lt,...Lr.data},_r=Lr.data,s.updatePlanDetails(lt.id,Lr.data))}catch(Lr){console.error("[generateSynthesis] Erreur lors de la récupération des détails:",Lr)}}await new Promise(Lr=>setTimeout(Lr,1e3)),Vt.value=!0;const kr=_r.salarie_details,di=_r.client_details,Ir=(kr==null?void 0:kr.entreprise_details)||_r.entreprise_details;console.log("[generateSynthesis] Détails du plan utilisé:",_r),console.log("[generateSynthesis] Détails des utilisateurs:",{salarie:kr?{id:kr.id,nom:`${kr.first_name} ${kr.last_name}`,company:kr.company_name,logo:kr.logo}:null,entreprise:Ir?{id:Ir.id,nom:`${Ir.first_name} ${Ir.last_name}`,company:Ir.company_name,logo:Ir.logo}:null,client:di?{id:di.id,nom:`${di.first_name} ${di.last_name}`,company:di.company_name}:null}),v.value&&(Y(),v.value=null);const on=new Or("l","mm","a4");console.log("[generateSynthesis] Chargement du logo de l'application");const Ni=new Image;Ni.src=e5,await new Promise(Lr=>{Ni.onload=()=>{console.log("[generateSynthesis] Logo application chargé"),Lr()},Ni.onerror=Ls=>{console.error("[generateSynthesis] Erreur chargement logo application:",Ls),Lr()}}),console.log("[generateSynthesis] Tentative de chargement du logo entreprise:",Ir==null?void 0:Ir.logo);let vi=null;Ir!=null&&Ir.logo&&(vi=new Image,vi.src=Ir.logo,await new Promise(Lr=>{vi?(vi.onload=()=>{console.log("[generateSynthesis] Logo entreprise chargé avec succès"),Lr()},vi.onerror=Ls=>{console.error("[generateSynthesis] Erreur chargement logo entreprise:",Ls),Lr()}):Lr()})),console.log("[generateSynthesis] Tentative de chargement du logo salarie:",kr==null?void 0:kr.logo);let Yi=null;kr!=null&&kr.logo&&(Yi=new Image,Yi.src=kr.logo,await new Promise(Lr=>{Yi?(Yi.onload=()=>{console.log("[generateSynthesis] Logo salarie chargé avec succès"),Lr()},Yi.onerror=Ls=>{console.error("[generateSynthesis] Erreur chargement logo salarie:",Ls),Lr()}):Lr()})),console.log("[generateSynthesis] Ajout des logos au PDF:",{logoApplication:!0,logoEntreprise:vi!==null,logoSalarie:Yi!==null}),vi!==null&&on.addImage(vi,"JPEG",148.5-40-30,20,40,40),on.addImage(Ni,"JPEG",148.5-40/2,20,40,40),Yi!==null&&on.addImage(Yi,"JPEG",148.5+30,20,40,40),on.setFontSize(24),on.setTextColor(0),on.text(lt.nom||"Sans titre",297/2,100,{align:"center"});let Qr=120;if(Ir&&(on.setFontSize(14),on.setFont("helvetica","bold"),on.text("Entreprise:",20,Qr),on.setFont("helvetica","normal"),on.text(`${Ir.first_name} ${Ir.last_name}${Ir.company_name?` (${Ir.company_name})`:""}`,20,Qr+6),Qr+=15),kr&&(on.setFontSize(14),on.setFont("helvetica","bold"),on.text("Salarie:",20,Qr),on.setFont("helvetica","normal"),on.text(`${kr.first_name} ${kr.last_name}${kr.company_name?` (${kr.company_name})`:""}`,20,Qr+6),Qr+=15),di&&(on.setFontSize(14),on.setFont("helvetica","bold"),on.text("Client:",20,Qr),on.setFont("helvetica","normal"),on.text(`${di.first_name} ${di.last_name}${di.company_name?` (${di.company_name})`:""}`,20,Qr+6),Qr+=15),lt.description){on.setFont("helvetica","bold"),on.text("Description:",20,Qr),on.setFont("helvetica","normal");const Lr=on.splitTextToSize(lt.description,150);on.text(Lr,20,Qr+6),Qr+=8*Lr.length+10}Qr=Math.min(Qr,180),on.setFontSize(10),on.setTextColor(100),on.text(`Date de création: ${Ve(lt.date_creation)}`,20,190),on.text(`Dernière modification: ${Ve(lt.date_modification)}`,277,190,{align:"right"});const fr=[];D.value.eachLayer(Lr=>fr.push(Lr));const On=$t.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar",".leaflet-grid-layer",".leaflet-grid-label"],preventDownload:!0}).addTo(g.value);await new Promise(Lr=>setTimeout(Lr,3e3));for(let Lr=0;Lr<fr.length;Lr++){on.addPage(),on.setFillColor(248,250,252),on.setDrawColor(226,232,240),on.rect(0,0,297,25,"F"),on.setFontSize(10),on.setTextColor(50,50,50),on.setFont("helvetica","bold"),on.text(lt.nom||"Sans titre",20,12);let hr=297-20-(15*(1+(vi!==null?1:0)+(Yi!==null?1:0))+5*(1+(vi!==null?1:0)));vi!==null&&(on.addImage(vi,"JPEG",hr,5,15,15),hr+=20),on.addImage(Ni,"JPEG",hr,5,15,15),hr+=20,Yi!==null&&on.addImage(Yi,"JPEG",hr,5,15,15),on.setDrawColor(200,200,200),on.setLineWidth(.5),on.line(0,25,297,25);const Pn=fr[Lr],rn=Pn.properties;if(rn){on.setTextColor(0),on.setFontSize(14),on.setFont("helvetica","bold");const yi=rn.name||tn(rn.type);let qr="";if(rn.type!=="TextRectangle"){const ps=te(fr,Pn);qr=ps>0?` (surface totale d'irrigation : ${ut(ps,"m²")})`:""}const ui=`${yi}${qr}`;on.text(ui,20,35)}if(rn&&rn.type==="ElevationLine")try{const yi=((Re=Pn.getBounds)==null?void 0:Re.call(Pn))||((ft=Pn.getLatLng)==null?void 0:ft.call(Pn));yi&&g.value.fitBounds(yi instanceof $t.LatLng?$t.latLngBounds([yi]):yi,{padding:[50,50]});try{const kn=((En=Pn.getBounds)==null?void 0:En.call(Pn))||((Un=Pn.getLatLng)==null?void 0:Un.call(Pn));if(!kn||!g.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const vn=kn instanceof $t.LatLng?$t.latLngBounds([kn]):kn;vn&&vn.isValid&&vn.isValid()&&g.value.getContainer()&&document.body.contains(g.value.getContainer())&&g.value.fitBounds(vn,{padding:[50,50],animate:!1})}}catch(kn){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",kn)}await new Promise(kn=>setTimeout(kn,2e3)),g.value.invalidateSize();try{g.value&&g.value.getContainer()&&document.body.contains(g.value.getContainer())?g.value.invalidateSize({animate:!1}):console.warn("[generateSynthesis] Carte non valide pour l'invalidation de taille")}catch(kn){console.warn("[generateSynthesis] Erreur lors de l'invalidation de la taille de la carte:",kn)}await new Promise(kn=>{const vn=()=>{var aa;const Fr=(aa=g.value)==null?void 0:aa.getContainer();if(!Fr){kn();return}const hs=Fr.querySelectorAll(".leaflet-tile-loaded");Fr.querySelectorAll(".leaflet-tile-loading").length===0&&hs.length>0?kn():setTimeout(vn,100)};vn()});const qr=await On.takeScreen("image"),ui=await new Promise((kn,vn)=>{const Fr=new Image;Fr.onload=()=>kn(Fr),Fr.onerror=hs=>vn(hs),Fr.src=qr}),ps=40,$s=237/2,Ns=Math.min(70,ui.height*$s/ui.width);if(on.addImage(ui,"PNG",20,ps,$s,Ns),rn.elevationData&&rn.elevationData.length>0){const kn=document.createElement("canvas");kn.width=800,kn.height=400;const vn=kn.getContext("2d");if(vn){const Fr=rn.elevationData,hs=rn.minElevation,Vs=rn.maxElevation,ds=(Vs-hs)*.05,ka=hs-ds,bl=Vs+ds,Vn=40,Sr=kn.width-2*Vn,is=kn.height-2*Vn,Ar=Kn=>Vn+Kn/Fr[Fr.length-1].distance*Sr,Ko=Kn=>Vn+is-(Kn-ka)/(bl-ka)*is;vn.fillStyle="#f8fafc",vn.fillRect(0,0,kn.width,kn.height),vn.fillStyle="#334155",vn.font="bold 20px Arial",vn.textAlign="center",vn.fillText("Profil altimétrique",kn.width/2,25),vn.strokeStyle="#e2e8f0",vn.lineWidth=1,vn.beginPath(),vn.moveTo(Vn,Vn),vn.lineTo(Vn,is+Vn),vn.lineTo(Sr+Vn,is+Vn),vn.strokeStyle="#94a3b8",vn.stroke();const Aa=5;for(let Kn=0;Kn<=Aa;Kn++){const eo=ka+Kn/Aa*(bl-ka),yo=Ko(eo);vn.beginPath(),vn.strokeStyle="#e2e8f0",vn.moveTo(Vn,yo),vn.lineTo(Sr+Vn,yo),vn.stroke(),vn.beginPath(),vn.strokeStyle="#94a3b8",vn.moveTo(Vn-5,yo),vn.lineTo(Vn,yo),vn.stroke(),vn.fillStyle="#64748b",vn.font="12px Arial",vn.textAlign="right",vn.fillText(`${Math.round(eo)}m`,Vn-8,yo+4)}const Ta=5,Xo=Fr[Fr.length-1].distance;for(let Kn=0;Kn<=Ta;Kn++){const eo=Kn/Ta*Xo,yo=Ar(eo);vn.beginPath(),vn.strokeStyle="#e2e8f0",vn.moveTo(yo,Vn),vn.lineTo(yo,is+Vn),vn.stroke(),vn.beginPath(),vn.strokeStyle="#94a3b8",vn.moveTo(yo,is+Vn),vn.lineTo(yo,is+Vn+5),vn.stroke(),vn.fillStyle="#64748b",vn.font="12px Arial",vn.textAlign="center",vn.fillText(`${Math.round(eo)}m`,yo,is+Vn+16)}const la=vn.createLinearGradient(0,Vn,0,is+Vn);la.addColorStop(0,"rgba(255, 69, 0, 0.8)"),la.addColorStop(1,"rgba(255, 69, 0, 0.2)"),vn.beginPath(),vn.moveTo(Ar(Fr[0].distance),Ko(Fr[0].elevation)),Fr.forEach((Kn,eo)=>{eo>0&&vn.lineTo(Ar(Kn.distance),Ko(Kn.elevation))}),vn.strokeStyle="#FF4500",vn.lineWidth=2,vn.stroke(),vn.lineTo(Ar(Fr[Fr.length-1].distance),Ko(ka)),vn.lineTo(Ar(Fr[0].distance),Ko(ka)),vn.closePath(),vn.fillStyle=la,vn.fill(),Fr.forEach(Kn=>{vn.beginPath(),vn.arc(Ar(Kn.distance),Ko(Kn.elevation),3,0,Math.PI*2),vn.fillStyle="#FF4500",vn.fill(),vn.strokeStyle="white",vn.lineWidth=1,vn.stroke()});let _l=0,Da=0;for(let Kn=0;Kn<Fr.length;Kn++)Fr[Kn].elevation===hs&&(_l=Kn),Fr[Kn].elevation===Vs&&(Da=Kn);vn.beginPath(),vn.arc(Ar(Fr[Da].distance),Ko(Fr[Da].elevation),6,0,Math.PI*2),vn.fillStyle="#059669",vn.fill(),vn.strokeStyle="white",vn.lineWidth=2,vn.stroke(),vn.beginPath(),vn.arc(Ar(Fr[_l].distance),Ko(Fr[_l].elevation),6,0,Math.PI*2),vn.fillStyle="#DC2626",vn.fill(),vn.strokeStyle="white",vn.lineWidth=2,vn.stroke(),vn.font="12px Arial",vn.fillStyle="#059669",vn.textAlign="left",vn.fillText(`Point haut: ${ut(Vs,"m")}`,Vn,is+Vn+35),vn.fillStyle="#DC2626",vn.fillText(`Point bas: ${ut(hs,"m")}`,Vn+200,is+Vn+35);const Er=kn.toDataURL("image/png");on.addImage(Er,"PNG",20+$s+20,ps,$s,Ns)}}const dr=ps+Ns+15;on.setFillColor(248,250,252),on.setDrawColor(226,232,240),on.roundedRect(20,dr,257,50,3,3,"FD"),on.setFont("helvetica","bold"),on.setFontSize(12),on.setTextColor(51,65,85),on.text("Caractéristiques",30,dr+10);const Qs=[{label:"Distance totale",value:ut(rn.length||0)},{label:"Dénivelé positif",value:ut(rn.elevationGain||0,"m")},{label:"Dénivelé négatif",value:ut(rn.elevationLoss||0,"m")}],Vi=[{label:"Pente moyenne",value:`${(rn.averageSlope||0).toFixed(1)}%`},{label:"Pente maximale",value:`${(rn.maxSlope||0).toFixed(1)}%`},{label:"Altitude min/max",value:`${ut(rn.minElevation||0,"m")} / ${ut(rn.maxElevation||0,"m")}`}];let Gi=dr+20;on.setFont("helvetica","normal"),on.setFontSize(10),Qs.forEach(kn=>{on.setTextColor(100,116,139),on.text(kn.label,30,Gi),on.setTextColor(15,23,42),on.setFont("helvetica","bold"),on.text(kn.value,110,Gi),on.setFont("helvetica","normal"),Gi+=9}),Gi=dr+20;const fi=297/2;Vi.forEach(kn=>{on.setTextColor(100,116,139),on.text(kn.label,fi,Gi),on.setTextColor(15,23,42),on.setFont("helvetica","bold"),on.text(kn.value,fi+80,Gi),on.setFont("helvetica","normal"),Gi+=9})}catch(yi){console.error("[generateSynthesis] Erreur traitement profil altimétrique:",yi)}else{const yi=((wn=Pn.getBounds)==null?void 0:wn.call(Pn))||((Ut=Pn.getLatLng)==null?void 0:Ut.call(Pn));yi&&g.value.fitBounds(yi instanceof $t.LatLng?$t.latLngBounds([yi]):yi,{padding:[50,50]});try{const qr=((Jn=Pn.getBounds)==null?void 0:Jn.call(Pn))||((Ct=Pn.getLatLng)==null?void 0:Ct.call(Pn));if(!qr||!g.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const ui=qr instanceof $t.LatLng?$t.latLngBounds([qr]):qr;ui&&ui.isValid&&ui.isValid()&&g.value.getContainer()&&document.body.contains(g.value.getContainer())&&g.value.fitBounds(ui,{padding:[50,50],animate:!1})}}catch(qr){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",qr)}await new Promise(qr=>setTimeout(qr,2e3)),g.value.invalidateSize(),await new Promise(qr=>{const ui=()=>{var dr;const ps=(dr=g.value)==null?void 0:dr.getContainer();if(!ps){qr();return}const $s=ps.querySelectorAll(".leaflet-tile-loaded");ps.querySelectorAll(".leaflet-tile-loading").length===0&&$s.length>0?qr():setTimeout(ui,100)};ui()});try{const qr=await On.takeScreen("image"),ui=await new Promise((dr,Qs)=>{const Vi=new Image;Vi.onload=()=>dr(Vi),Vi.onerror=Gi=>Qs(Gi),Vi.src=qr}),ps=45,$s=297*.6-30;let Ns=ui.height*$s/ui.width;if(Ns>210*.9&&(Ns=210*.9),on.addImage(ui,"PNG",20,ps,$s,Ns),rn){let dr=function(vn,Fr,hs,Vs,aa){on.setTextColor(100,116,139),on.setFont("helvetica","normal"),on.text(vn,hs+10,Vs),on.setTextColor(15,23,42),on.setFont("helvetica","bold"),on.text(Fr,hs+aa-10,Vs,{align:"right"})},Vi=0;if(rn.type==="Circle")Vi=4;else if(rn.type==="Rectangle")Vi=4;else if(rn.type==="Line")Vi=1,(Ht=rn.dimensions)!=null&&Ht.width&&Vi++,rn.surfaceInfluence&&Vi++;else if(rn.type==="Semicircle")Vi=6;else if(rn.type==="Polygon")Vi=2;else if(rn.type==="CircleWithSections"&&(Vi=3,rn.sections&&rn.sections.length>0)){const vn=Math.ceil(rn.sections.length/3);Vi+=vn*3}const Gi=Math.max(15+Vi*12+30,60),fi=297-188.2-20;on.setFillColor(248,250,252),on.setDrawColor(226,232,240),on.roundedRect(188.2,ps,fi,Gi,3,3,"FD"),on.setFont("helvetica","bold"),on.setFontSize(12),on.setTextColor(51,65,85),on.text("Caractéristiques",188.2+10,ps+15);let kn=ps+30;on.setFontSize(10),rn.type==="Circle"?(dr("Rayon",ut(rn.radius),188.2,kn,fi),kn+=12,dr("Diamètre",ut(rn.radius*2),188.2,kn,fi),kn+=12,dr("Surface",ut(rn.surface,"m²"),188.2,kn,fi),kn+=12,dr("Périmètre",ut(rn.perimeter),188.2,kn,fi)):rn.type==="Rectangle"?(dr("Largeur",ut(rn.width),188.2,kn,fi),kn+=12,dr("Hauteur",ut(rn.height),188.2,kn,fi),kn+=12,dr("Surface",ut(rn.surface,"m²"),188.2,kn,fi),kn+=12,dr("Périmètre",ut(rn.perimeter),188.2,kn,fi)):rn.type==="Line"?(dr("Longueur",ut(rn.length),188.2,kn,fi),kn+=12,(Ln=rn.dimensions)!=null&&Ln.width&&(dr("Largeur d'influence",ut(rn.dimensions.width),188.2,kn,fi),kn+=12),rn.surfaceInfluence&&dr("Surface d'influence",ut(rn.surfaceInfluence,"m²"),188.2,kn,fi)):rn.type==="Semicircle"?(dr("Rayon",ut(rn.radius),188.2,kn,fi),kn+=12,dr("Diamètre",ut(rn.radius*2),188.2,kn,fi),kn+=12,dr("Surface",ut(rn.surface,"m²"),188.2,kn,fi),kn+=12,dr("Périmètre",ut(rn.perimeter),188.2,kn,fi),kn+=12,dr("Longueur d'arc",ut(rn.arcLength),188.2,kn,fi),kn+=12,dr("Angle d'ouverture",`${rn.openingAngle.toFixed(1)}°`,188.2,kn,fi)):rn.type==="Polygon"?(dr("Surface",ut(rn.surface,"m²"),188.2,kn,fi),kn+=12,dr("Périmètre",ut(rn.perimeter),188.2,kn,fi)):rn.type==="CircleWithSections"&&(dr("Rayon",ut(rn.radius),188.2,kn,fi),kn+=12,dr("Surface totale",ut(rn.surface,"m²"),188.2,kn,fi),kn+=12,dr("Périmètre",ut(rn.perimeter),188.2,kn,fi),kn+=20,rn.sections&&rn.sections.length>0&&(kn=No(rn.sections,on,188.2,kn,fi)))}}catch(qr){console.error(`[generateSynthesis] Erreur capture forme ${Lr+1}:`,qr)}}}g.value.removeControl(On),on.save(`synthese_${lt.nom}.pdf`)}catch(jr){console.error("[generateSynthesis] Erreur:",jr),alert("Une erreur est survenue lors de la génération de la synthèse. Veuillez réessayer.")}finally{Vt.value=!1}}const et=BE.debounce(()=>{const lt=pn.startMeasure("invalidateMapSize","MapView");if(!g.value){lt();return}sa(()=>{pn.measure("invalidateMapSize:nextTick",()=>{var Re;try{if(g.value&&g.value.getContainer()&&document.body.contains(g.value.getContainer())){if(g.value.invalidateSize({animate:!1}),(Re=D.value)!=null&&Re.getLayers().length)try{j()}catch(ft){console.warn("[invalidateMapSize] Erreur lors de l'ajustement de la vue:",ft)}}else console.warn("[invalidateMapSize] Carte non valide pour l'invalidation")}catch(ft){console.warn("[invalidateMapSize] Erreur lors de l'invalidation de la taille de la carte:",ft)}lt()},"MapView")})},250);function at(){et()}ki(R,(lt,Re)=>{lt&&lt.id!==(Re==null?void 0:Re.id)&&sa(()=>{at()})});const it=St(null),zt=St(!1),Kt=St([]),Nn=Qn(()=>{if(console.log("[MapView][filteredSalaries] Computing with:",{selectedEntreprise:it.value,salaries:_e.value,salariesLength:_e.value.length}),!it.value)return[];const lt=_e.value.filter(Re=>{var Un,wn,Ut;const ft=Re.entreprise,En=typeof ft=="object"&&ft!==null?ft.id:ft;return console.log("[MapView][filteredSalaries] Checking salarie:",{salarie:Re,salarieEntreprise:ft,salarieEntrepriseId:En,selectedEntrepriseId:(Un=it.value)==null?void 0:Un.id,matches:En===((wn=it.value)==null?void 0:wn.id)}),En===((Ut=it.value)==null?void 0:Ut.id)});return console.log("[MapView][filteredSalaries] Filtered result:",lt),lt});function yn(lt){if(!lt)return"";const Re=lt.first_name||"",ft=lt.last_name?lt.last_name.toUpperCase():"",En=lt.company_name||lt.role||"";return`${Re} ${ft} (${En})`}async function Dn(){zt.value=!0;try{const lt=await Bn.get("/users/",{params:{role:"ENTREPRISE"}});Kt.value=lt.data}catch(lt){console.error("[MapView] Error loading entreprises:",lt),Kt.value=[]}finally{zt.value=!1}}async function er(lt){console.log("[MapView][selectEntreprise] Sélection de l'entreprise:",lt),it.value=lt,me.value=!0;try{console.log("[MapView][selectEntreprise] Envoi de la requête avec params:",{role:"SALARIE",entreprise:lt.id});const Re=await Bn.get("/users/",{params:{role:"SALARIE",entreprise:lt.id}});console.log("[MapView][selectEntreprise] Réponse reçue:",Re.data),_e.value=Re.data,console.log("[MapView][selectEntreprise] Salaries mis à jour:",_e.value)}catch(Re){console.error("[MapView] Error loading salaries for entreprise:",Re),_e.value=[]}finally{me.value=!1}}function Qt(){it.value=null,ae.value=null,K.value=null,_e.value=[],we.value=[],Qe.value=[]}function Cn(){ae.value=null,K.value=null,we.value=[],Qe.value=[]}function Mn(){K.value=null,Qe.value=[]}async function tr(lt){var Re,ft,En,Un,wn,Ut;console.log(`
[MapView][selectSalarie] ====== DÉBUT SÉLECTION SALARIE ======`),console.log("Informations du salarie:",{id:lt.id,username:lt.username,company:lt.company_name,role:lt.role}),console.log("Contexte utilisateur:",{userType:(Re=Q.user)==null?void 0:Re.user_type,userId:(ft=Q.user)==null?void 0:ft.id,userRole:(En=Q.user)==null?void 0:En.role,selectedEntrepriseId:(Un=it.value)==null?void 0:Un.id}),ae.value=lt,fe.value=!0;try{const Jn={role:"VISITEUR",salarie:lt.id};Q.isEntreprise?(console.log("Ajout de l'ID de l'entreprise connectée:",(wn=Q.user)==null?void 0:wn.id),Jn.entreprise=(Ut=Q.user)==null?void 0:Ut.id):it.value&&(console.log("Ajout de l'ID de l'entreprise sélectionnée:",it.value.id),Jn.entreprise=it.value.id),console.log("Paramètres de la requête:",Jn);const Ct=await Bn.get("/users/",{params:Jn});console.log("Réponse reçue du serveur:",{status:Ct.status,dataLength:Array.isArray(Ct.data)?Ct.data.length:"non-array",data:Ct.data}),Array.isArray(Ct.data)?(we.value=Ct.data,console.log(`${Ct.data.length} visiteurs chargés`),Ct.data.forEach((Ht,Ln)=>{console.log(`Visiteur ${Ln+1}:`,{id:Ht.id,username:Ht.username,company:Ht.company_name,salarie:Ht.salarie})})):(console.warn("Format de réponse inattendu:",Ct.data),we.value=[]),we.value.length===0&&console.warn("Aucun visiteur trouvé pour ce salarie")}catch(Jn){if(console.error("ERREUR lors du chargement des visiteurs:",Jn),Jn&&typeof Jn=="object"&&"response"in Jn){const Ct=Jn;console.error("Détails de l'erreur:",{status:Ct.response.status,data:Ct.response.data})}we.value=[]}finally{fe.value=!1,console.log(`[MapView][selectSalarie] ====== FIN SÉLECTION SALARIE ======
`)}}function yr(){B.value=!1,z.value=null}function xr(lt){U.value=lt,I.value=!0}async function cr(){var lt,Re,ft;if((lt=U.value)!=null&&lt.id)try{const En=U.value.id,Un={selectedClient:K.value,selectedSalarie:ae.value,isNoVisiteurView:K.value&&K.value.id===-1};if(await s.deletePlan(En),I.value=!1,U.value=null,await new Promise(wn=>setTimeout(wn,50)),Un.isNoVisiteurView)console.log("[MapView][confirmDeletePlan] Rechargement des plans sans visiteur"),await nr();else if(Un.selectedClient){console.log("[MapView][confirmDeletePlan] Rechargement des plans du client:",Un.selectedClient.id);const wn={visiteur:Un.selectedClient.id};Un.selectedSalarie&&(wn.salarie=Un.selectedSalarie.id),Q.isEntreprise?wn.entreprise=(Re=Q.user)==null?void 0:Re.id:it.value&&(wn.entreprise=it.value.id);const Ut=await Bn.get("/plans/",{params:wn});Qe.value=Ut.data}else console.log("[MapView][confirmDeletePlan] Rechargement de tous les plans"),await s.fetchPlans();((ft=R.value)==null?void 0:ft.id)===En&&(R.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se(),localStorage.removeItem("lastPlanId"))}catch(En){console.error("Erreur lors de la suppression du plan:",En),alert("Une erreur est survenue lors de la suppression du plan"),I.value=!1,U.value=null}}function Gr(){I.value=!1,U.value=null}function zs(lt){console.log("[MapView][handleFilterChange] Nouveaux filtres reçus:",JSON.stringify(lt,null,2)),console.log("[MapView][handleFilterChange] Filtres actuels dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2)),console.log("[MapView][handleFilterChange] Mise à jour des filtres dans le store"),o.updateFilters(lt),console.log("[MapView][handleFilterChange] Éléments dans le store:",{count:o.elements.length,ids:o.elements.map(Re=>Re.id)}),console.log("[MapView][handleFilterChange] Mise à jour de l'affichage de la carte"),Ai(),setTimeout(()=>{console.log("[MapView][handleFilterChange] Mise à jour forcée de l'affichage"),Ai()},100),console.log("[MapView][handleFilterChange] Traitement des filtres terminé")}function Ai(){if(!D.value)return;const lt=[];c.value.forEach((an,qn)=>{an.layer&&!an.id&&(!an.layer.properties||an.layer.properties&&!an.layer.properties.type)&&(console.log(`[MapView][updateMapDisplay] Nettoyage préventif de la couche temporaire ${an.layer._leaflet_id}`),lt.push(qn))});for(let an=lt.length-1;an>=0;an--)c.value.splice(lt[an],1);const Re={accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}};console.log("[MapView][updateMapDisplay] Mise à jour de l'affichage avec filtres:",JSON.stringify(Re,null,2));const ft={count:o.elements.length,elements:o.elements.map(an=>({id:an.id,type_forme:an.type_forme}))};console.log("[MapView][updateMapDisplay] Éléments dans le store:",JSON.stringify(ft,null,2));const En=o.getFilteredElements;console.log("[MapView][updateMapDisplay] Éléments filtrés:",{total:o.elements.length,filtered:En.length,filteredIds:En.map(an=>an.id)});const Un=D.value.getLayers();console.log("[MapView][updateMapDisplay] Couches actuelles:",Un.length);const wn=Un.map(an=>({_leaflet_id:an._leaflet_id,_dbId:an._dbId,hasProperties:!!an.properties,propertyType:an.properties?an.properties.type:null,category:an.properties?an.properties.category:null}));console.log("[MapView][updateMapDisplay] Détails des couches:",JSON.stringify(wn,null,2)),console.log("[MapView][updateMapDisplay] État des filtres pour les catégories:",{forages:o.filters.categories.forages,clients:o.filters.categories.clients,entrepots:o.filters.categories.entrepots,livraisons:o.filters.categories.livraisons,cultures:o.filters.categories.cultures,parcelles:o.filters.categories.parcelles});const Ut=new Map;c.value.forEach(an=>{an.layer&&an.id&&Ut.set(an.id,an.layer)});const Jn=new Map;Un.forEach(an=>{an._dbId&&Jn.set(an,an._dbId)});const Ct=new Set(En.map(an=>an.id));console.log("[MapView][updateMapDisplay] Début du traitement des couches");const Ht=Array.from(Ct);console.log("[MapView][updateMapDisplay] IDs des éléments filtrés:",JSON.stringify(Ht));let Ln=0,jr=0,un=0;Un.forEach(an=>{var Yi,Qr;const qn=an._dbId,li=an._leaflet_id;if(!qn){if(!an.properties){un++,console.log(`[MapView][updateMapDisplay] Couche ${li} sans dbId et sans propriétés, ignorée`);return}an._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[MapView][updateMapDisplay] Couche ${li} sans dbId, ID temporaire assigné: ${an._dbId}`)}const xi=an.properties||{},zi=xi.type||an.type_forme||"";let Jr=xi.category;if(an._dbId){const fr=o.elements.find(On=>On.id===an._dbId);if(fr){const On=fr.data;On&&On.category&&(Jr!==On.category&&(console.log(`[MapView][updateMapDisplay] Catégorie différente détectée - Propriétés: ${Jr}, Store: ${On.category} pour la couche ${an._dbId}`),Jr=On.category),an.properties||(an.properties={}),an.properties.category=Jr)}}Jr||(Jr="default");const _r=xi.accessLevel||"visitor";console.log(`[MapView][updateMapDisplay] Couche ${li} (dbId: ${an._dbId}): type=${zi}, category=${Jr}, accessLevel=${_r}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify(o.filters));let kr=!1;zi?kr=zi in o.filters.shapeTypes&&o.filters.shapeTypes[zi]===!0:kr=o.filters.shapeTypes.Polygon===!0;let di=!1;Jr?Jr in o.filters.categories?(di=o.filters.categories[Jr]===!0,console.log(`[MapView][updateMapDisplay] Vérification de la catégorie ${Jr}: ${di}`)):(di=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie ${Jr} non trouvée dans les filtres, utilisation de 'forages': ${di}`)):(di=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie non spécifiée, utilisation de 'forages': ${di}`));let Ir=!1;const on={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let Ni="visitor";on.company?Ni="company":on.employee?Ni="employee":on.visitor&&(Ni="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès sélectionné par l'utilisateur: ${Ni}`),Ni==="company"?Ir=!0:Ni==="employee"?Ir=_r==="employee"||_r==="visitor":Ni==="visitor"&&(Ir=_r==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès de la couche: ${_r}, visible: ${Ir}`);const vi=kr&&di&&Ir;console.log(`[MapView][updateMapDisplay] Visibilité de la couche ${li}: typeVisible=${kr}, categoryVisible=${di}, accessLevelVisible=${Ir}, isVisible=${vi}`),console.log(`[MapView][updateMapDisplay] Détails de la couche ${li}: type=${zi}, category=${Jr}, accessLevel=${_r}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify({accessLevels:o.filters.accessLevels,categories:o.filters.categories,shapeTypes:o.filters.shapeTypes},null,2)),vi?D.value.hasLayer(an)?(Ln++,console.log(`[MapView][updateMapDisplay] Couche ${an._dbId} (${zi}) déjà visible avec catégorie ${((Qr=an.properties)==null?void 0:Qr.category)||"non définie"}`)):(Jr&&Jr!=="default"&&(!an.properties||!an.properties.category)&&(an.properties||(an.properties={}),an.properties.category=Jr,console.log(`[MapView][updateMapDisplay] Catégorie définie avant ajout: ${Jr} pour la couche ${an._dbId}`)),D.value.addLayer(an),Ln++,console.log(`[MapView][updateMapDisplay] Affichage de la couche ${an._dbId} (${zi}) avec catégorie ${((Yi=an.properties)==null?void 0:Yi.category)||"non définie"}`)):D.value.hasLayer(an)?(D.value.removeLayer(an),jr++,console.log(`[MapView][updateMapDisplay] Masquage de la couche ${an._dbId} (${zi}) - Filtres non respectés`)):(jr++,console.log(`[MapView][updateMapDisplay] Couche ${an._dbId} (${zi}) déjà masquée`))}),console.log("[MapView][updateMapDisplay] Début de la restauration des couches filtrées"),console.log("[MapView][updateMapDisplay] Nombre de formes dans shapes.value:",c.value.length),c.value.forEach(an=>{var Qr;if(!an.layer){console.log("[MapView][updateMapDisplay] Forme sans couche, ignorée");return}const qn=an.layer,li=qn._leaflet_id,xi=qn._dbId;if(console.log(`[MapView][updateMapDisplay] Traitement de la forme ${li} (dbId: ${xi})`),D.value.hasLayer(qn)){console.log(`[MapView][updateMapDisplay] La couche ${li} est déjà dans le featureGroup, ignorée`);return}const zi=qn.properties||{},Jr=zi.type||qn.type_forme||"";let _r=null;if(qn._dbId){const fr=o.elements.find(On=>On.id===qn._dbId);if(fr){const On=fr.data;On&&On.category&&(_r=On.category,console.log(`[MapView][updateMapDisplay] Catégorie récupérée depuis le store: ${_r} pour la couche ${qn._dbId}`))}}!_r&&zi.category&&(_r=zi.category,console.log(`[MapView][updateMapDisplay] Catégorie récupérée depuis les propriétés: ${_r} pour la couche ${li}`)),_r||(_r="default");const kr=zi.accessLevel||"visitor";if(qn.properties||(qn.properties={}),_r&&_r!=="default"&&(qn.properties.category=_r,console.log(`[MapView][updateMapDisplay] Catégorie définie/restaurée: ${_r} pour la couche ${qn._dbId}`),qn._dbId)){const fr=o.elements.find(On=>On.id===qn._dbId);if(fr){const On=fr;On.data||(On.data={}),On.data.category!==_r&&(console.log(`[MapView][updateMapDisplay] Mise à jour de la catégorie dans le store: ${_r} pour l'élément ${qn._dbId}`),On.data.category=_r,o.$patch({unsavedChanges:!0}))}}qn.properties.accessLevel||(qn.properties.accessLevel="visitor"),console.log(`[MapView][updateMapDisplay] Propriétés de la couche ${li}: type=${Jr}, category=${_r}, accessLevel=${kr}`);let di=!1;Jr?di=Jr in o.filters.shapeTypes&&o.filters.shapeTypes[Jr]===!0:di=o.filters.shapeTypes.Polygon===!0;let Ir=!1;if(_r)if(_r in o.filters.categories)Ir=o.filters.categories[_r]===!0,console.log(`[MapView][updateMapDisplay] Vérification de la catégorie ${_r}: ${Ir}`);else if(RE().getUniqueCategories.includes(_r)){console.log(`[MapView][updateMapDisplay] Catégorie personnalisée ${_r} trouvée dans mapFilterStore, ajout aux filtres`);const Lr={...o.filters.categories};Lr[_r]=!0,o.updateFilters({categories:Lr}),Ir=!0}else Ir=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie ${_r} non trouvée, utilisation de 'forages': ${Ir}`);else Ir=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Pas de catégorie, utilisation de 'forages': ${Ir}`);let on=!1;const Ni={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let vi="visitor";Ni.company?vi="company":Ni.employee?vi="employee":Ni.visitor&&(vi="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès sélectionné par l'utilisateur (2ème étape): ${vi}`),vi==="company"?on=!0:vi==="employee"?on=kr==="employee"||kr==="visitor":vi==="visitor"&&(on=kr==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès de la couche (2ème étape): ${kr}, visible: ${on}`);const Yi=di&&Ir&&on;if(console.log(`[MapView][updateMapDisplay] Visibilité de la couche ${li}: typeVisible=${di}, categoryVisible=${Ir}, accessLevelVisible=${on}, isVisible=${Yi}`),Yi){if(_r&&_r!=="default"&&(qn.properties||(qn.properties={}),qn.properties.category=_r,console.log(`[MapView][updateMapDisplay] Catégorie définie avant restauration: ${_r} pour la couche ${li}`),qn._dbId)){const fr=o.elements.find(On=>On.id===qn._dbId);if(fr){const On=fr;On.data||(On.data={}),On.data.category!==_r&&(console.log(`[MapView][updateMapDisplay] Mise à jour de la catégorie dans le store avant restauration: ${_r} pour l'élément ${qn._dbId}`),On.data.category=_r,o.$patch({unsavedChanges:!0}))}}D.value.addLayer(qn),Ln++,console.log(`[MapView][updateMapDisplay] Restauration de la couche ${li} (${Jr}) avec catégorie ${((Qr=qn.properties)==null?void 0:Qr.category)||"non définie"} - Filtres respectés`)}else console.log(`[MapView][updateMapDisplay] La couche ${li} (${Jr}) reste masquée - Filtres non respectés`)}),console.log(`[MapView][updateMapDisplay] Restauration terminée: ${Ln} couches visibles au total`),console.log(`[MapView][updateMapDisplay] Statistiques: ${Ln} couches visibles, ${jr} couches masquées, ${un} couches sans dbId`),console.log("[MapView][updateMapDisplay] Mise à jour terminée")}function Oo(lt){if(D.value){const ft=D.value.getLayers().find(En=>En._leaflet_id===lt.id);ft&&(ft.properties.name=lt.title,ft.properties.description=lt.description,ft.properties.columnId=lt.columnId,ft.properties.accessLevel=lt.accessLevel,ft.properties.category||(ft.properties.category="forages"),ft.setNoteStyle({color:lt.style.color,fillColor:lt.style.fillColor,weight:lt.style.weight,fillOpacity:lt.style.fillOpacity,radius:lt.style.radius}),ft.closePopup(),ft.unbindPopup(),ft.bindPopup(ft.createPopupContent()),console.log("[handleNoteSave] Note mise à jour:",{name:ft.properties.name,category:ft.properties.category,accessLevel:ft.properties.accessLevel,columnId:ft.properties.columnId}),a.notes.find(Un=>Un.id===lt.id)?(a.updateNote(lt.id,{title:lt.title,description:lt.description,columnId:lt.columnId,accessLevel:lt.accessLevel,style:lt.style,updatedAt:new Date().toISOString()}),console.log("[handleNoteSave] Note mise à jour dans le store avec columnId:",lt.columnId)):(a.addNote({title:lt.title,description:lt.description,location:[lt.location[0],lt.location[1]],columnId:lt.columnId||"1",style:lt.style,accessLevel:lt.accessLevel}),console.log("[handleNoteSave] Note ajoutée au store avec columnId:",lt.columnId||"1")))}l.success("Note enregistrée avec succès")}async function Ds(lt){var Re;K.value=lt,he.value=!0;try{const ft={visiteur:lt.id};Q.isEntreprise?ft.entreprise=(Re=Q.user)==null?void 0:Re.id:it.value&&(ft.entreprise=it.value.id),ae.value&&(ft.salarie=ae.value.id);const En=await Bn.get("/plans/",{params:ft});Qe.value=En.data}catch(ft){console.error("[MapView] Error loading client plans:",ft),Qe.value=[]}finally{he.value=!1}}async function nr(){var Re;console.log("[MapView][loadPlansWithoutVisiteur] Chargement des plans sans visiteur");const lt={id:-1,username:"sans_visiteur",first_name:"Sans",last_name:"Visiteur",company_name:"",role:"VISITEUR",display_name:"Plans sans visiteur"};K.value=lt,he.value=!0;try{const ft={visiteur_null:!0};Q.isEntreprise?ft.entreprise=(Re=Q.user)==null?void 0:Re.id:it.value&&(ft.entreprise=it.value.id),ae.value&&(ft.salarie=ae.value.id),console.log("[MapView][loadPlansWithoutVisiteur] Paramètres de requête:",ft);const En=await Bn.get("/plans/",{params:ft});console.log("[MapView][loadPlansWithoutVisiteur] Plans reçus:",En.data),Qe.value=En.data}catch(ft){console.error("[MapView] Error loading plans without visiteur:",ft),Qe.value=[]}finally{he.value=!1}}async function Os(){var lt;if(ae.value=null,K.value=null,Qe.value=[],Q.isEntreprise){me.value=!0;try{const Re=await Bn.get("/users/",{params:{role:"SALARIE",entreprise:(lt=Q.user)==null?void 0:lt.id}});_e.value=Re.data,console.log("[MapView][openLoadPlanModal] Salariés chargés:",_e.value.length)}catch(Re){console.error("[MapView][openLoadPlanModal] Erreur lors du chargement des salariés:",Re),_e.value=[]}finally{me.value=!1}}Z.value=!0}function No(lt,Re,ft,En,Un){if(!lt||lt.length===0)return En;const wn=[...lt].sort((an,qn)=>(qn.surface||0)-(an.surface||0)),Ut=Un,Jn=7,Ct=6,Ht=2,Ln=[{header:"Nom",width:.3,align:"left"},{header:"Surface",width:.2,align:"right"},{header:"Angles",width:.25,align:"right"},{header:"Rayon",width:.15,align:"right"},{header:"Type",width:.1,align:"center"}],jr=Jn+Ct*wn.length;Re.setFillColor(248,250,252),Re.setDrawColor(226,232,240),Re.roundedRect(ft,En,Ut,jr+Ht*2,2,2,"FD"),Re.setFillColor(241,245,249),Re.rect(ft+Ht,En+Ht,Ut-Ht*2,Jn,"F"),Re.setFont("helvetica","bold"),Re.setFontSize(7),Re.setTextColor(51,65,85);let un=ft+Ht;return Ln.forEach(an=>{const qn=an.width*(Ut-Ht*2);an.align==="right"?Re.text(an.header,un+qn-Ht,En+Ht+5,{align:"right"}):an.align==="center"?Re.text(an.header,un+qn/2,En+Ht+5,{align:"center"}):Re.text(an.header,un+Ht/2,En+Ht+5),un+=qn}),Re.setFont("helvetica","normal"),Re.setFontSize(6.5),Re.setTextColor(71,85,105),wn.forEach((an,qn)=>{const li=En+Jn+Ht+qn*Ct;qn%2===0&&(Re.setFillColor(250,252,254),Re.rect(ft+Ht,li,Ut-Ht*2,Ct,"F"));let xi=ft+Ht;const zi=an.name||`Section ${qn+1}`;Re.text(zi,xi+Ht/2,li+4),xi+=Ln[0].width*(Ut-Ht*2);const Jr=ut(an.surface||0,"m²");Re.text(Jr,xi+Ln[1].width*(Ut-Ht*2)-Ht,li+4,{align:"right"}),xi+=Ln[1].width*(Ut-Ht*2);const _r=an.startAngle===0&&an.endAngle===360?"Complet":`${an.startAngle}°-${an.endAngle}°`;Re.text(_r,xi+Ln[2].width*(Ut-Ht*2)-Ht,li+4,{align:"right"}),xi+=Ln[2].width*(Ut-Ht*2);const kr=ut(an.radius||0);Re.text(kr,xi+Ln[3].width*(Ut-Ht*2)-Ht,li+4,{align:"right"}),xi+=Ln[3].width*(Ut-Ht*2);const di=an.startAngle===0&&an.endAngle===360?"C":"P";Re.text(di,xi+Ln[4].width*(Ut-Ht*2)/2,li+4,{align:"center"})}),Re.setDrawColor(226,232,240),Re.setLineWidth(.05),Re.line(ft+Ht,En+Jn+Ht,ft+Ut-Ht,En+Jn+Ht),En+jr+Ht*2}return(lt,Re)=>{var ft,En,Un,wn,Ut,Jn;return Oe(),Be(Sn,null,[S("div",uW,[S("div",cW,[Vt.value?(Oe(),Be("div",hW,Re[7]||(Re[7]=[nu('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Génération de la synthèse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualité de vos captures pour un rendu parfait </p></div></div></div>',1)]))):Jt("",!0),R.value?Jt("",!0):(Oe(),Be("div",dW,[S("div",fW,[Re[10]||(Re[10]=nu('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+e5+'" alt="TagMap Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur TagMap</h1><p class="text-gray-600 mb-8">Pour commencer à dessiner, vous devez d&#39;abord créer un nouveau plan ou charger un plan existant.</p>',3)),S("div",pW,[S("button",{onClick:Re[0]||(Re[0]=Ct=>$.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Re[8]||(Re[8]=[S("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Kr(" Créer un nouveau plan ")])),S("button",{onClick:Os,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Re[9]||(Re[9]=[S("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),Kr(" Charger un plan existant ")]))])])])),Tn(S("div",gW,[S("div",mW,[R.value&&!Vt.value?(Oe(),Ca(IV,{key:0,"last-save":(ft=R.value)!=null&&ft.date_modification?new Date(R.value.date_modification):void 0,"plan-name":(En=R.value)==null?void 0:En.nom,"plan-description":(Un=R.value)==null?void 0:Un.description,"save-status":re.value,onChangeMapType:Yn(N),onCreateNewPlan:Re[1]||(Re[1]=Ct=>$.value=!0),onLoadPlan:Os,onSavePlan:Ce,onAdjustView:Ye,onGenerateSummary:bn,class:"flex-shrink-0"},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])):Jt("",!0),S("div",vW,[i.value&&R.value&&!Vt.value?(Oe(),Be("div",{key:0,onClick:ee,class:"md:hidden fixed inset-0 bg-black/30 z-[1800] transition-opacity duration-300"})):Jt("",!0),S("div",yW,[S("div",{ref_key:"mapContainer",ref:r,class:"absolute inset-0 z-[1000]"},null,512)]),R.value&&!Vt.value?(Oe(),Ca(eV,{key:1,show:i.value,"onUpdate:show":Re[2]||(Re[2]=Ct=>i.value=Ct),"selected-tool":Yn(p),"selected-shape":De.value,"is-drawing":Yn(ge),onToolSelected:Yn(E),onFilterChange:zs,onDeleteShape:Ze,onPropertiesUpdate:ve,onStyleUpdate:Yn(k),class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected","onStyleUpdate"])):Jt("",!0),R.value&&!Vt.value?(Oe(),Be("div",{key:2,class:"md:hidden fixed left-0 right-0 z-[1900] bg-white py-3 px-3 shadow-lg border-t border-gray-200 flex items-center justify-between cursor-pointer",style:{height:"var(--mobile-bottom-toolbar-height)",bottom:"0"},onClick:ee},Re[11]||(Re[11]=[nu('<div class="flex items-center w-full justify-center"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg><span class="text-sm text-gray-500 font-medium">Outils de dessin</span></div></div>',1)]))):Jt("",!0)])]),Vt.value?(Oe(),Be("div",bW,Re[12]||(Re[12]=[nu('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Génération de la synthèse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):Jt("",!0)],512),[[Ty,R.value]]),(Oe(),Ca(Z0,{to:"body"},[mi(zE,{ref_key:"newPlanModalRef",ref:X,modelValue:$.value,"onUpdate:modelValue":Re[3]||(Re[3]=Ct=>$.value=Ct),onCreated:_t,onSalarieSelected:Re[4]||(Re[4]=Ct=>ae.value=Ct),onVisiteurSelected:Re[5]||(Re[5]=Ct=>H.value=Ct)},null,8,["modelValue"])])),(Oe(),Ca(Z0,{to:"body"},[Z.value?(Oe(),Be("div",_W,[S("div",wW,[S("div",xW,[Re[14]||(Re[14]=S("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),S("button",{onClick:Re[6]||(Re[6]=Ct=>Z.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},Re[13]||(Re[13]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",LW,[Yn(Q).isAdmin?(Oe(),Be("div",SW,[it.value?ae.value?K.value?(Oe(),Be("div",VW,[S("div",UW,[S("button",{onClick:Mn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Re[30]||(Re[30]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Kr(" Retour à la liste des clients ")])),Re[31]||(Re[31]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",HW,kt(yn(K.value)),1)]),Re[33]||(Re[33]=S("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),S("div",WW,[he.value?(Oe(),Be(Sn,{key:0},sr(3,Ct=>S("div",{key:Ct,class:"animate-pulse"},Re[32]||(Re[32]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),S("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Oe(!0),Be(Sn,{key:1},sr(Qe.value,Ct=>(Oe(),Be("div",{key:Ct.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[S("button",{onClick:Ht=>ze(Ct.id),class:"w-full text-left"},[S("div",qW,kt(Ct.nom),1),S("div",YW,kt(Ct.description),1),S("div",ZW," Modifié le "+kt(Ve(Ct.date_modification)),1)],8,GW),Yn(Q).isAdmin||Yn(Q).isEntreprise?(Oe(),Be("button",{key:0,onClick:Cu(Ht=>xr(Ct),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,KW)):Jt("",!0)]))),128))])])):(Oe(),Be("div",IW,[S("div",BW,[S("button",{onClick:Cn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Re[23]||(Re[23]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Kr(" Retour à la liste des salaries ")])),Re[24]||(Re[24]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",RW,kt(yn(ae.value)),1)]),Re[29]||(Re[29]=S("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),S("div",FW,[S("button",{onClick:nr,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},Re[25]||(Re[25]=[S("div",null,[S("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),S("div",{class:"text-xs text-primary-600"},"Afficher les plans créés sans visiteur associé")],-1),S("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),fe.value?(Oe(),Be(Sn,{key:0},sr(3,Ct=>S("div",{key:Ct,class:"animate-pulse"},Re[26]||(Re[26]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Oe(),Be(Sn,{key:1},[J.value.length===0?(Oe(),Be("div",jW,Re[27]||(Re[27]=[S("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),S("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Oe(!0),Be(Sn,{key:1},sr(J.value,Ct=>(Oe(),Be("button",{key:Ct.id,onClick:Ht=>Ds(Ct),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",$W,kt(yn(Ct)),1)]),Re[28]||(Re[28]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,zW))),128))],64))])])):(Oe(),Be("div",kW,[S("div",AW,[S("button",{onClick:Qt,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Re[18]||(Re[18]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Kr(" Retour à la liste des entreprises ")])),Re[19]||(Re[19]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",TW,kt(yn(it.value)),1)]),Re[22]||(Re[22]=S("h3",{class:"font-medium text-gray-700"},"Sélectionnez un salarie",-1)),S("div",DW,[me.value?(Oe(),Be(Sn,{key:0},sr(3,Ct=>S("div",{key:Ct,class:"animate-pulse"},Re[20]||(Re[20]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Oe(!0),Be(Sn,{key:1},sr(Nn.value,Ct=>(Oe(),Be("button",{key:Ct.id,onClick:Ht=>tr(Ct),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",NW,kt(yn(Ct)),1)]),Re[21]||(Re[21]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,OW))),128))])])):(Oe(),Be("div",CW,[Re[17]||(Re[17]=S("h3",{class:"font-medium text-gray-700"},"Sélectionnez une entreprise",-1)),S("div",EW,[zt.value?(Oe(),Be(Sn,{key:0},sr(3,Ct=>S("div",{key:Ct,class:"animate-pulse"},Re[15]||(Re[15]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Oe(!0),Be(Sn,{key:1},sr(Kt.value,Ct=>(Oe(),Be("button",{key:Ct.id,onClick:Ht=>er(Ct),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",MW,kt(yn(Ct)),1)]),Re[16]||(Re[16]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,PW))),128))])]))])):Yn(Q).isSalarie?(Oe(),Be("div",XW,[K.value?(Oe(),Be("div",rG,[S("div",iG,[S("button",{onClick:Mn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Re[38]||(Re[38]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Kr(" Retour à la liste des clients ")])),Re[39]||(Re[39]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",sG,kt(yn(K.value)),1)]),Re[41]||(Re[41]=S("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),S("div",oG,[he.value?(Oe(),Be(Sn,{key:0},sr(3,Ct=>S("div",{key:Ct,class:"animate-pulse"},Re[40]||(Re[40]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),S("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Oe(!0),Be(Sn,{key:1},sr(Qe.value,Ct=>(Oe(),Be("div",{key:Ct.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[S("button",{onClick:Ht=>ze(Ct.id),class:"w-full text-left"},[S("div",lG,kt(Ct.nom),1),S("div",uG,kt(Ct.description),1),S("div",cG," Modifié le "+kt(Ve(Ct.date_modification)),1)],8,aG),Yn(Q).isAdmin||Yn(Q).isEntreprise?(Oe(),Be("button",{key:0,onClick:Cu(Ht=>xr(Ct),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,hG)):Jt("",!0)]))),128))])])):(Oe(),Be("div",JW,[Re[37]||(Re[37]=S("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),S("div",QW,[fe.value?(Oe(),Be(Sn,{key:0},sr(3,Ct=>S("div",{key:Ct,class:"animate-pulse"},Re[34]||(Re[34]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Oe(),Be(Sn,{key:1},[J.value.length===0?(Oe(),Be("div",eG,Re[35]||(Re[35]=[S("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),S("div",{class:"text-sm text-gray-400"}," Veuillez vérifier que des visiteurs ont été assignés à ce salarie ",-1)]))):(Oe(!0),Be(Sn,{key:1},sr(J.value,Ct=>(Oe(),Be("button",{key:Ct.id,onClick:Ht=>Ds(Ct),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",nG,kt(yn(Ct)),1)]),Re[36]||(Re[36]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,tG))),128))],64))])]))])):Yn(Q).isEntreprise?(Oe(),Be("div",dG,[ae.value?K.value?(Oe(),Be("div",SG,[S("div",CG,[S("button",{onClick:Mn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Re[52]||(Re[52]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Kr(" Retour à la liste des visiteurs ")])),Re[53]||(Re[53]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",EG,kt(yn(K.value)),1)]),Re[55]||(Re[55]=S("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),S("div",PG,[he.value?(Oe(),Be(Sn,{key:0},sr(3,Ct=>S("div",{key:Ct,class:"animate-pulse"},Re[54]||(Re[54]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),S("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Oe(!0),Be(Sn,{key:1},sr(Qe.value,Ct=>(Oe(),Be("div",{key:Ct.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[S("button",{onClick:Ht=>ze(Ct.id),class:"w-full text-left"},[S("div",kG,kt(Ct.nom),1),S("div",AG,kt(Ct.description),1),S("div",TG," Modifié le "+kt(Ve(Ct.date_modification)),1)],8,MG),Yn(Q).isAdmin||Yn(Q).isEntreprise?(Oe(),Be("button",{key:0,onClick:Cu(Ht=>xr(Ct),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,DG)):Jt("",!0)]))),128))])])):(Oe(),Be("div",vG,[S("div",yG,[S("button",{onClick:Cn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Re[45]||(Re[45]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Kr(" Retour à la liste des salariés ")])),Re[46]||(Re[46]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",bG,kt(yn(ae.value)),1)]),Re[51]||(Re[51]=S("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),S("div",_G,[S("button",{onClick:nr,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},Re[47]||(Re[47]=[S("div",null,[S("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),S("div",{class:"text-xs text-primary-600"},"Afficher les plans créés sans visiteur associé")],-1),S("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),fe.value?(Oe(),Be(Sn,{key:0},sr(3,Ct=>S("div",{key:Ct,class:"animate-pulse"},Re[48]||(Re[48]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Oe(),Be(Sn,{key:1},[J.value.length===0?(Oe(),Be("div",wG,Re[49]||(Re[49]=[S("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarié",-1),S("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Oe(!0),Be(Sn,{key:1},sr(J.value,Ct=>(Oe(),Be("button",{key:Ct.id,onClick:Ht=>Ds(Ct),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",LG,kt(yn(Ct)),1)]),Re[50]||(Re[50]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,xG))),128))],64))])])):(Oe(),Be("div",fG,[Re[44]||(Re[44]=S("h3",{class:"font-medium text-gray-700"},"Sélectionnez un salarié",-1)),S("div",pG,[me.value?(Oe(),Be(Sn,{key:0},sr(3,Ct=>S("div",{key:Ct,class:"animate-pulse"},Re[42]||(Re[42]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Oe(!0),Be(Sn,{key:1},sr(_e.value,Ct=>(Oe(),Be("button",{key:Ct.id,onClick:Ht=>tr(Ct),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",mG,kt(yn(Ct)),1)]),Re[43]||(Re[43]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,gG))),128))])]))])):(Oe(),Be("div",OG,[Yn(s).plans.length===0?(Oe(),Be("div",NG,Re[56]||(Re[56]=[S("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(Oe(),Be("div",IG,[(Oe(!0),Be(Sn,null,sr(Yn(s).plans,Ct=>(Oe(),Be("div",{key:Ct.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[S("button",{onClick:Ht=>ze(Ct.id),class:"w-full text-left"},[S("div",RG,kt(Ct.nom),1),S("div",FG,kt(Ct.description),1),S("div",jG," Modifié le "+kt(Ve(Ct.date_modification)),1)],8,BG),Yn(Q).isAdmin||Yn(Q).isEntreprise?(Oe(),Be("button",{key:0,onClick:Cu(Ht=>xr(Ct),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,zG)):Jt("",!0)]))),128))]))]))])])])):Jt("",!0)])),(Oe(),Ca(Z0,{to:"body"},[I.value?(Oe(),Be("div",$G,[S("div",VG,[S("div",UG,[Re[57]||(Re[57]=S("svg",{class:"h-12 w-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),Re[58]||(Re[58]=S("h3",{class:"text-xl font-semibold text-gray-900"},"Supprimer le plan",-1)),S("p",HG,' Êtes-vous sûr de vouloir supprimer le plan "'+kt((wn=U.value)==null?void 0:wn.nom)+'" ? Cette action est irréversible. ',1)]),S("div",{class:"flex justify-center space-x-4"},[S("button",{onClick:Gr,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-300"}," Annuler "),S("button",{onClick:cr,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"}," Supprimer ")])])])):Jt("",!0)]))])]),B.value?(Oe(),Ca(FE,{key:0,note:z.value,"is-new-note":!((Ut=z.value)!=null&&Ut.id),location:(Jn=z.value)==null?void 0:Jn.location,onClose:yr,onSave:Oo},null,8,["note","is-new-note","location"])):Jt("",!0)],64)}}}),WG={class:"fixed inset-0 z-[3001] overflow-y-auto"},GG={class:"flex items-center justify-center min-h-screen w-full p-0"},qG={class:"relative bg-white w-full h-full max-h-full overflow-y-auto md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},YG={class:"p-4 md:p-6"},ZG={class:"flex justify-between items-center mb-4 border-b pb-4"},KG={class:"text-xl font-semibold text-gray-900",id:"modal-headline"},XG={class:"mt-4"},JG={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},QG={class:"flex"},eq={class:"ml-3"},tq={class:"text-sm font-medium text-red-800"},nq={key:0},rq={key:1},iq=["value"],sq={key:2},oq={key:3},aq=["value"],lq={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2"},uq={key:0,class:"mt-2 text-sm text-red-600"},cq={key:0,class:"mt-2 text-sm text-red-600"},hq={key:4},dq={class:"flex items-center"},fq={key:5,class:"border-t pt-4 mt-4"},pq={class:"mb-4"},gq={class:"mb-4"},mq={key:6},vq={key:7},yq={key:0,class:"mt-2 text-sm text-red-600"},bq={class:"flex justify-end space-x-3"},_q=["disabled"],wq={key:0,class:"mr-2"},xq=js({__name:"UserFormModal",props:{user:{type:Object,default:()=>({})},salaries:{type:Array,default:()=>[]},entreprises:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isEntreprise:{type:Boolean,default:!1},currentSalarie:{type:String,default:void 0},currentEntreprise:{type:String,default:void 0},apiErrors:{type:Array,default:()=>[]},refreshKey:{type:Number,default:0}},emits:["close","save","refresh"],setup(t,{emit:e}){const n=t,r=e,i=St(!1),s=St(""),o=St(""),a=St(""),l=St(""),c=St(""),d=ou({id:void 0,first_name:"",last_name:"",username:"",email:"",password:"",company_name:"",role:n.isEntreprise?"SALARIE":n.isAdmin?"ADMIN":"VISITEUR",salarie:null,entreprise:null,is_active:!0,storage_quota:50,storage_used:0,ecowitt_api_key:"",ecowitt_application_key:""});mo(()=>{var v;(v=n.user)!=null&&v.id?(d.id=n.user.id,d.first_name=n.user.first_name||"",d.last_name=n.user.last_name||"",d.username=n.user.username||"",d.email=n.user.email||"",d.company_name=n.user.company_name||"",d.role=n.user.role||"VISITEUR",d.is_active=n.user.is_active??!0,d.ecowitt_api_key=n.user.ecowitt_api_key||"",d.ecowitt_application_key=n.user.ecowitt_application_key||"",d.storage_quota=n.user.storage_quota||50,d.storage_used=n.user.storage_used||0,n.user.salarie?typeof n.user.salarie=="object"?d.salarie=n.user.salarie.id:d.salarie=n.user.salarie:n.user.salarie_id?d.salarie=n.user.salarie_id:n.currentSalarie&&(d.salarie=parseInt(n.currentSalarie)),n.user.entreprise?typeof n.user.entreprise=="object"?d.entreprise=n.user.entreprise.id:d.entreprise=n.user.entreprise:n.user.entreprise_id?d.entreprise=n.user.entreprise_id:n.currentEntreprise&&(d.entreprise=parseInt(n.currentEntreprise))):(n.currentSalarie&&(d.salarie=parseInt(n.currentSalarie)),n.currentEntreprise&&(d.entreprise=parseInt(n.currentEntreprise)),n.isEntreprise?d.role="SALARIE":n.isAdmin||(d.role="VISITEUR"))}),dm(()=>{d.role==="ADMIN"||d.role==="ENTREPRISE"?(d.salarie=null,d.entreprise=null):d.role==="SALARIE"&&(d.salarie=null,n.isEntreprise&&n.currentEntreprise&&(d.entreprise=parseInt(n.currentEntreprise)))}),dm(()=>{s.value="",o.value="",a.value="",l.value="",n.apiErrors&&n.apiErrors.length>0&&n.apiErrors.forEach(v=>{switch(v.field){case"email":s.value=v.message;break;case"username":o.value=v.message;break;case"password":a.value=v.message;break;case"non_field_error":default:l.value=v.message;break}})});async function p(){s.value="",o.value="",a.value="",l.value="";let v=!0;if(d.id||(d.password!==c.value?(a.value="Les mots de passe ne correspondent pas",v=!1):d.password.length<8&&(a.value="Le mot de passe doit contenir au moins 8 caractères",v=!1)),!!v){i.value=!0;try{const g={...d};d.id&&delete g.password,n.isEntreprise&&["SALARIE","VISITEUR"].includes(d.role)&&(g.entreprise_id=n.currentEntreprise?parseInt(n.currentEntreprise):void 0),g.salarie&&(g.salarie_id=g.salarie,delete g.salarie),n.currentSalarie&&d.role==="VISITEUR"&&(g.salarie_id=parseInt(n.currentSalarie)),await r("save",g),r("refresh")}catch(g){console.error("Erreur locale:",g)}finally{i.value=!1}}}return(v,g)=>(Oe(),Be("div",WG,[S("div",GG,[g[42]||(g[42]=S("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[S("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),S("div",qG,[S("div",null,[S("div",YG,[S("div",ZG,[S("h3",KG,kt(t.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),S("button",{type:"button",onClick:g[0]||(g[0]=x=>v.$emit("close")),class:"text-gray-400 hover:text-gray-500"},g[16]||(g[16]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",XG,[l.value?(Oe(),Be("div",JG,[S("div",QG,[g[17]||(g[17]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",eq,[S("h3",tq,kt(l.value),1)])])])):Jt("",!0),S("form",{onSubmit:Cu(p,["prevent"]),class:"space-y-6"},[t.isAdmin?(Oe(),Be("div",nq,[g[19]||(g[19]=S("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),Tn(S("select",{id:"role","onUpdate:modelValue":g[1]||(g[1]=x=>d.role=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},g[18]||(g[18]=[S("option",{value:"ADMIN"},"Administrateur",-1),S("option",{value:"ENTREPRISE"},"Entreprise",-1),S("option",{value:"SALARIE"},"Salarie",-1),S("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[ns,d.role]])])):Jt("",!0),t.isAdmin&&d.role==="SALARIE"?(Oe(),Be("div",rq,[g[21]||(g[21]=S("label",{for:"entreprise",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Tn(S("select",{id:"entreprise","onUpdate:modelValue":g[2]||(g[2]=x=>d.entreprise=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[g[20]||(g[20]=S("option",{value:null},"-- Sélectionner une entreprise --",-1)),(Oe(!0),Be(Sn,null,sr(t.entreprises,x=>(Oe(),Be("option",{key:x.id,value:x.id},kt(x.first_name)+" "+kt(x.last_name)+" ("+kt(x.company_name||"Entreprise")+") ",9,iq))),128))],512),[[ns,d.entreprise]])])):Jt("",!0),t.isEntreprise&&!d.id?(Oe(),Be("div",sq,[g[23]||(g[23]=S("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),Tn(S("select",{id:"role","onUpdate:modelValue":g[3]||(g[3]=x=>d.role=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},g[22]||(g[22]=[S("option",{value:"SALARIE"},"Salarie",-1),S("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[ns,d.role]])])):Jt("",!0),(t.isAdmin||t.isEntreprise)&&d.role==="VISITEUR"&&!t.currentSalarie?(Oe(),Be("div",oq,[g[25]||(g[25]=S("label",{for:"salarie",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),Tn(S("select",{id:"salarie","onUpdate:modelValue":g[4]||(g[4]=x=>d.salarie=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},[g[24]||(g[24]=S("option",{value:null},"-- Sélectionner un salarie --",-1)),(Oe(!0),Be(Sn,null,sr(t.salaries,x=>(Oe(),Be("option",{key:x.id,value:x.id},kt(x.first_name)+" "+kt(x.last_name)+" ("+kt(x.company_name||"Salarie")+") ",9,aq))),128))],512),[[ns,d.salarie]])])):Jt("",!0),S("div",lq,[S("div",null,[g[26]||(g[26]=S("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),Tn(S("input",{type:"text",id:"first_name","onUpdate:modelValue":g[5]||(g[5]=x=>d.first_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[zr,d.first_name]])]),S("div",null,[g[27]||(g[27]=S("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),Tn(S("input",{type:"text",id:"last_name","onUpdate:modelValue":g[6]||(g[6]=x=>d.last_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[zr,d.last_name]])])]),S("div",null,[g[28]||(g[28]=S("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),Tn(S("input",{type:"email",id:"email","onUpdate:modelValue":g[7]||(g[7]=x=>d.email=x),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[zr,d.email]]),s.value?(Oe(),Be("div",uq,kt(s.value),1)):Jt("",!0)]),S("div",null,[g[29]||(g[29]=S("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),Tn(S("input",{type:"text",id:"username","onUpdate:modelValue":g[8]||(g[8]=x=>d.username=x),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[zr,d.username]]),o.value?(Oe(),Be("div",cq,kt(o.value),1)):Jt("",!0)]),S("div",null,[g[30]||(g[30]=S("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Tn(S("input",{type:"text",id:"company_name","onUpdate:modelValue":g[9]||(g[9]=x=>d.company_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[zr,d.company_name]])]),d.role==="ENTREPRISE"||d.role==="SALARIE"?(Oe(),Be("div",hq,[g[32]||(g[32]=S("label",{for:"storage_quota",class:"block text-sm font-medium text-gray-700"},"Quota de stockage (MB)",-1)),S("div",dq,[Tn(S("input",{type:"number",id:"storage_quota","onUpdate:modelValue":g[10]||(g[10]=x=>d.storage_quota=x),min:"1",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[zr,d.storage_quota]]),g[31]||(g[31]=S("span",{class:"ml-2 text-sm text-gray-500"},"MB",-1))]),g[33]||(g[33]=S("p",{class:"mt-1 text-sm text-gray-500"},"Espace de stockage maximum pour les photos des notes",-1))])):Jt("",!0),d.role==="ENTREPRISE"?(Oe(),Be("div",fq,[g[38]||(g[38]=S("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Configuration API",-1)),S("div",pq,[g[34]||(g[34]=S("label",{for:"ecowitt_api_key",class:"block text-sm font-medium text-gray-700"},"Clé API Ecowitt",-1)),Tn(S("input",{type:"text",id:"ecowitt_api_key","onUpdate:modelValue":g[11]||(g[11]=x=>d.ecowitt_api_key=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la clé API Ecowitt"},null,512),[[zr,d.ecowitt_api_key]]),g[35]||(g[35]=S("p",{class:"mt-1 text-sm text-gray-500"},"Clé API pour accéder aux services météo Ecowitt",-1))]),S("div",gq,[g[36]||(g[36]=S("label",{for:"ecowitt_application_key",class:"block text-sm font-medium text-gray-700"},"Clé d'application Ecowitt",-1)),Tn(S("input",{type:"text",id:"ecowitt_application_key","onUpdate:modelValue":g[12]||(g[12]=x=>d.ecowitt_application_key=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la clé d'application Ecowitt"},null,512),[[zr,d.ecowitt_application_key]]),g[37]||(g[37]=S("p",{class:"mt-1 text-sm text-gray-500"},"Clé d'application pour accéder aux services météo Ecowitt",-1))])])):Jt("",!0),d.id?Jt("",!0):(Oe(),Be("div",mq,[g[39]||(g[39]=S("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),Tn(S("input",{type:"password",id:"password","onUpdate:modelValue":g[13]||(g[13]=x=>d.password=x),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[zr,d.password]])])),d.id?Jt("",!0):(Oe(),Be("div",vq,[g[40]||(g[40]=S("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),Tn(S("input",{type:"password",id:"password_confirm","onUpdate:modelValue":g[14]||(g[14]=x=>c.value=x),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[zr,c.value]]),a.value?(Oe(),Be("div",yq,kt(a.value),1)):Jt("",!0)])),S("div",bq,[S("button",{type:"button",onClick:g[15]||(g[15]=x=>v.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Annuler "),S("button",{type:"submit",disabled:i.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[i.value?(Oe(),Be("span",wq,g[41]||(g[41]=[S("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):Jt("",!0),Kr(" "+kt(d.id?"Enregistrer":"Créer"),1)],8,_q)])],32)])])])])])]))}}),Lq={class:"fixed inset-0 z-[3001] overflow-y-auto"},Sq={class:"flex items-center justify-center min-h-screen w-full"},Cq={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},Eq={class:"p-4 md:p-6"},Pq={class:"flex items-start"},Mq={class:"ml-4 flex-1"},kq={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},Aq={class:"mt-2"},Tq={class:"text-sm text-gray-500"},Dq={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},lP=js({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(t){return(e,n)=>(Oe(),Be("div",Lq,[S("div",Sq,[n[3]||(n[3]=S("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[S("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),S("div",Cq,[S("div",Eq,[S("div",Pq,[n[2]||(n[2]=S("div",{class:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[S("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),S("div",Mq,[S("h3",kq,kt(t.title),1),S("div",Aq,[S("p",Tq,kt(t.message),1)])])]),S("div",Dq,[S("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=r=>e.$emit("confirm"))}," Confirmer "),S("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=r=>e.$emit("cancel"))}," Annuler ")])])])])]))}}),Oq={class:"h-full bg-gray-50"},Nq={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Iq={class:"flex justify-between items-center mb-8"},Bq={class:"text-3xl font-extrabold text-gray-900"},Rq={key:0},Fq={key:1},jq={key:2},zq={key:0},$q={key:1},Vq={key:2},Uq={class:"bg-white shadow rounded-lg mb-6 p-4"},Hq={class:"space-y-4"},Wq={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Gq={key:0},qq={key:0,value:"ADMIN"},Yq={key:1,value:"ENTREPRISE"},Zq={key:1},Kq=["value"],Xq={key:2},Jq=["value"],Qq={class:"w-full"},eY={class:"bg-white shadow rounded-lg"},tY={class:"overflow-x-auto"},nY={class:"min-w-full divide-y divide-gray-200"},rY={class:"bg-gray-50"},iY={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},sY={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},oY={class:"bg-white divide-y divide-gray-200"},aY={key:0,class:"animate-pulse"},lY={key:1},uY={class:"px-6 py-4 whitespace-nowrap"},cY={class:"flex items-center"},hY={class:"flex-shrink-0 h-10 w-10"},dY={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},fY={class:"text-primary-600 font-medium"},pY={class:"ml-4"},gY={class:"text-sm font-medium text-gray-900"},mY={class:"text-sm text-gray-500"},vY={class:"px-6 py-4 whitespace-nowrap"},yY={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},bY={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},_Y={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},wY={class:"px-6 py-4 whitespace-nowrap"},xY={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},LY=["onClick"],SY=["onClick"],CY={key:0,class:"fixed inset-0 z-[3001] overflow-y-auto"},EY=js({__name:"UserListView",setup(t){const e=ma(),n=su(),r=St([]),i=St([]),s=St([]),o=St(!1),a=St(!1),l=St(null),c=St(null),d=St(!0),p=St([]),v=ou({role:"",search:"",salarie:"",entreprise:""}),g=Qn(()=>e.isAdmin),x=Qn(()=>e.isEntreprise),E=Qn(()=>e.isSalarie),k=Qn(()=>g.value?r.value.filter(z=>z.role==="SALARIE"):x.value?r.value.filter(z=>{var U,V;return z.role==="SALARIE"&&((U=z.entreprise)==null?void 0:U.id)===((V=e.user)==null?void 0:V.id)}):[]),A=Qn(()=>{let z=r.value;if(x.value&&(z=z.filter(U=>{var V,re,Q,_e,we;return U.role==="SALARIE"?((V=U.entreprise)==null?void 0:V.id)===((re=e.user)==null?void 0:re.id):U.role==="VISITEUR"?((_e=(Q=U.salarie)==null?void 0:Q.entreprise)==null?void 0:_e.id)===((we=e.user)==null?void 0:we.id):!1})),E.value&&(z=z.filter(U=>{var V,re;return U.role==="VISITEUR"&&(U.salarie_id===((V=e.user)==null?void 0:V.id)||U.salarie&&U.salarie.id===((re=e.user)==null?void 0:re.id))})),(g.value||x.value)&&(v.role&&(z=z.filter(U=>U.role===v.role)),v.salarie&&(z=z.filter(U=>{var re;const V=((re=U.salarie)==null?void 0:re.id)||U.salarie_id;return(V==null?void 0:V.toString())===v.salarie.toString()})),v.entreprise&&g.value&&(z=z.filter(U=>{var V,re,Q,_e,we;return U.role==="SALARIE"?((re=(V=U.entreprise)==null?void 0:V.id)==null?void 0:re.toString())===v.entreprise.toString():U.role==="VISITEUR"?((we=(_e=(Q=U.salarie)==null?void 0:Q.entreprise)==null?void 0:_e.id)==null?void 0:we.toString())===v.entreprise.toString():!1}))),v.search){const U=v.search.toLowerCase();z=z.filter(V=>{var re,Q,_e,we;return((re=V.username)==null?void 0:re.toLowerCase().includes(U))||((Q=V.email)==null?void 0:Q.toLowerCase().includes(U))||((_e=V.first_name)==null?void 0:_e.toLowerCase().includes(U))||((we=V.last_name)==null?void 0:we.toLowerCase().includes(U))||V.company_name&&V.company_name.toLowerCase().includes(U)})}return z});mo(async()=>{await D(),await j()});async function D(){var z,U,V;d.value=!0;try{if(g.value)r.value=await e.fetchUsers();else if(x.value){const[re,Q]=await Promise.all([rv({role:"SALARIE",entrepriseId:(z=e.user)==null?void 0:z.id}),rv({role:"VISITEUR",entrepriseId:(U=e.user)==null?void 0:U.id})]);r.value=[...re,...Q]}else E.value&&(r.value=await rv({role:"VISITEUR",salarieId:(V=e.user)==null?void 0:V.id,includeDetails:!0}),console.log("Visiteurs récupérés:",r.value))}catch(re){console.error("Erreur lors de la récupération des utilisateurs:",re),n.error("Erreur lors de la récupération des utilisateurs")}finally{d.value=!1}}async function j(){try{g.value?await Promise.all([Y(),ge()]):x.value&&await te()}catch(z){console.error("Erreur lors de la récupération des dépendances:",z)}}async function Y(){var z;try{g.value?i.value=await e.fetchUsersByRole({role:"SALARIE"}):x.value&&(i.value=await e.fetchEntrepriseSalaries((z=e.user)==null?void 0:z.id))}catch(U){console.error("Erreur lors de la récupération des salaries:",U)}}async function te(){var z,U;if(!(!x.value||!((z=e.user)!=null&&z.id)))try{i.value=await e.fetchEntrepriseSalaries((U=e.user)==null?void 0:U.id)}catch(V){console.error("Erreur lors de la récupération des salaries de l'entreprise:",V)}}async function ge(){try{s.value=await e.fetchEnterprises()}catch(z){console.error("Erreur lors de la récupération des entreprises:",z)}}function pe(){l.value=null,o.value=!0}function N(z){l.value={...z},o.value=!0}function $(){o.value=!1,l.value=null,p.value=[]}async function Z(z){var V,re,Q,_e,we,Qe;p.value=[];const U=!!z.id;try{const ae={...z};g.value?(ae.entreprise&&typeof ae.entreprise=="object"?ae.entreprise_id=ae.entreprise.id:typeof ae.entreprise=="number"&&(ae.entreprise_id=ae.entreprise),ae.salarie&&typeof ae.salarie=="object"?ae.salarie_id=ae.salarie.id:typeof ae.salarie=="number"&&(ae.salarie_id=ae.salarie)):x.value?(ae.entreprise_id=(V=e.user)==null?void 0:V.id,ae.role==="VISITEUR"&&(ae.salarie&&typeof ae.salarie=="object"?ae.salarie_id=ae.salarie.id:typeof ae.salarie=="number"&&(ae.salarie_id=ae.salarie))):E.value&&(ae.role="VISITEUR",ae.salarie_id=(re=e.user)==null?void 0:re.id),ae.role==="SALARIE"?((Q=ae.entreprise)!=null&&Q.id?(ae.entreprise_id=ae.entreprise.id,delete ae.entreprise):typeof ae.entreprise=="number"&&(ae.entreprise_id=ae.entreprise,delete ae.entreprise),delete ae.salarie):ae.role==="VISITEUR"&&((_e=ae.salarie)!=null&&_e.id?(ae.salarie_id=ae.salarie.id,delete ae.salarie):typeof ae.salarie=="number"&&(ae.salarie_id=ae.salarie,delete ae.salarie),delete ae.entreprise,delete ae.entreprise_id),U?(await e.updateUser(z.id,ae),n.success("Utilisateur modifié avec succès")):(await e.createUser(ae),n.success("Utilisateur créé avec succès")),await Promise.all([D(),j()]),$()}catch(ae){console.error("Error saving user:",((we=ae.response)==null?void 0:we.data)||ae),p.value=W7(ae),n.error("Erreur lors de la sauvegarde de l'utilisateur");const H=((Qe=ae.response)==null?void 0:Qe.data)||{};let K="";throw typeof H=="object"&&(K=Object.entries(H).map(([me,fe])=>Array.isArray(fe)?`${me}: ${fe[0]}`:`${me}: ${fe}`).filter(me=>me).join(`
`)),K||(K="Une erreur est survenue lors de la sauvegarde"),new Error(K)}}function B(z){c.value=z,a.value=!0}async function I(){if(c.value)try{await e.deleteUser(c.value.id),n.success("Utilisateur supprimé avec succès"),await Promise.all([D(),j()]),a.value=!1,c.value=null}catch(z){throw console.error("Erreur lors de la suppression de l'utilisateur:",z),n.error("Erreur lors de la suppression de l'utilisateur"),z}}function R(z){var U,V,re,Q,_e,we,Qe,ae;return g.value?!0:x.value?z.role==="SALARIE"?((U=z.entreprise)==null?void 0:U.id)===((V=e.user)==null?void 0:V.id):z.role==="VISITEUR"?((Q=(re=z.salarie)==null?void 0:re.entreprise)==null?void 0:Q.id)===((_e=e.user)==null?void 0:_e.id):!1:E.value?z.role==="VISITEUR"&&(z.salarie_id===((we=e.user)==null?void 0:we.id)||((Qe=z.salarie)==null?void 0:Qe.id)===((ae=e.user)==null?void 0:ae.id)):!1}return(z,U)=>{var V,re,Q,_e;return Oe(),Be("div",Oq,[S("div",Nq,[S("div",Iq,[S("h1",Bq,[g.value?(Oe(),Be("span",Rq,"Gestion des utilisateurs")):x.value?(Oe(),Be("span",Fq,"Gestion des salaries et visiteurs")):E.value?(Oe(),Be("span",jq,"Gestion des visiteurs")):Jt("",!0)]),S("button",{onClick:pe,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[U[5]||(U[5]=S("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),g.value?(Oe(),Be("span",zq,"Nouvel utilisateur")):x.value?(Oe(),Be("span",$q,"Nouveau salarie/visiteur")):E.value?(Oe(),Be("span",Vq,"Nouvel visiteur")):Jt("",!0)])]),S("div",Uq,[S("div",Hq,[S("div",Wq,[g.value||x.value?(Oe(),Be("div",Gq,[U[9]||(U[9]=S("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),Tn(S("select",{id:"role-filter","onUpdate:modelValue":U[0]||(U[0]=we=>v.role=we),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[U[6]||(U[6]=S("option",{value:""},"Tous les rôles",-1)),g.value?(Oe(),Be("option",qq,"Administrateur")):Jt("",!0),g.value?(Oe(),Be("option",Yq,"Entreprise")):Jt("",!0),U[7]||(U[7]=S("option",{value:"SALARIE"},"Salarie",-1)),U[8]||(U[8]=S("option",{value:"VISITEUR"},"Visiteur",-1))],512),[[ns,v.role]])])):Jt("",!0),g.value?(Oe(),Be("div",Zq,[U[11]||(U[11]=S("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),Tn(S("select",{id:"entreprise-filter","onUpdate:modelValue":U[1]||(U[1]=we=>v.entreprise=we),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[U[10]||(U[10]=S("option",{value:""},"Toutes les entreprises",-1)),(Oe(!0),Be(Sn,null,sr(s.value,we=>(Oe(),Be("option",{key:we.id,value:we.id},kt(Yn(Su)(we)),9,Kq))),128))],512),[[ns,v.entreprise]])])):Jt("",!0),g.value||x.value?(Oe(),Be("div",Xq,[U[13]||(U[13]=S("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),Tn(S("select",{id:"salarie-filter","onUpdate:modelValue":U[2]||(U[2]=we=>v.salarie=we),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[U[12]||(U[12]=S("option",{value:""},"Tous les salaries",-1)),(Oe(!0),Be(Sn,null,sr(k.value,we=>(Oe(),Be("option",{key:we.id,value:we.id},kt(Yn(Su)(we)),9,Jq))),128))],512),[[ns,v.salarie]])])):Jt("",!0)]),S("div",Qq,[U[14]||(U[14]=S("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Tn(S("input",{type:"text",id:"search","onUpdate:modelValue":U[3]||(U[3]=we=>v.search=we),placeholder:"Rechercher par nom, email, entreprise...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[zr,v.search]])])])]),S("div",eY,[S("div",tY,[S("table",nY,[S("thead",rY,[S("tr",null,[U[15]||(U[15]=S("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur ",-1)),U[16]||(U[16]=S("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rôle ",-1)),U[17]||(U[17]=S("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),g.value||x.value?(Oe(),Be("th",iY," Entreprise ")):Jt("",!0),g.value||x.value?(Oe(),Be("th",sY," Salarie ")):Jt("",!0),U[18]||(U[18]=S("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),U[19]||(U[19]=S("th",{scope:"col",class:"relative px-6 py-3"},[S("span",{class:"sr-only"},"Actions")],-1))])]),S("tbody",oY,[d.value?(Oe(),Be("tr",aY,U[20]||(U[20]=[S("td",{colspan:"7",class:"py-4 px-6"},[S("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):A.value.length===0?(Oe(),Be("tr",lY,U[21]||(U[21]=[S("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun utilisateur trouvé ",-1)]))):Jt("",!0),(Oe(!0),Be(Sn,null,sr(A.value,we=>{var Qe;return Oe(),Be("tr",{key:we.id},[S("td",uY,[S("div",cY,[S("div",hY,[S("div",dY,[S("span",fY,kt(Yn(q7)(we.first_name,we.last_name)),1)])]),S("div",pY,[S("div",gY,kt(Yn(Su)(we)),1),S("div",mY,kt(we.username),1)])])]),S("td",vY,[S("span",{class:Di(Yn(K7)())},kt(Yn(Z7)(we.role)),3)]),S("td",yY,kt(we.email),1),g.value||x.value?(Oe(),Be("td",bY,[we.role==="ENTREPRISE"?(Oe(),Be(Sn,{key:0},[Kr(" - ")],64)):we.role==="SALARIE"?(Oe(),Be(Sn,{key:1},[Kr(kt(we.entreprise?Yn(Su)(we.entreprise):"Non assigné"),1)],64)):we.role==="VISITEUR"?(Oe(),Be(Sn,{key:2},[Kr(kt((Qe=we.salarie)!=null&&Qe.entreprise?Yn(Su)(we.salarie.entreprise):"Non assigné"),1)],64)):(Oe(),Be(Sn,{key:3},[Kr(" - ")],64))])):Jt("",!0),g.value||x.value?(Oe(),Be("td",_Y,[we.role==="ENTREPRISE"||we.role==="ADMIN"?(Oe(),Be(Sn,{key:0},[Kr(" - ")],64)):we.role==="SALARIE"?(Oe(),Be(Sn,{key:1},[Kr(" - ")],64)):(Oe(),Be(Sn,{key:2},[Kr(kt(we.salarie?Yn(Su)(we.salarie):"Non assigné"),1)],64))])):Jt("",!0),S("td",wY,[S("span",{class:Di(Yn(X7)(we.is_active))},kt(we.is_active?"Actif":"Inactif"),3)]),S("td",xY,[S("button",{onClick:ae=>N(we),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,LY),R(we)?(Oe(),Be("button",{key:0,onClick:ae=>B(we),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,SY)):Jt("",!0)])])}),128))])])])])]),o.value?(Oe(),Be("div",CY,[mi(xq,{user:l.value,salaries:i.value,entreprises:s.value,"is-admin":g.value,"is-entreprise":x.value,"current-salarie":E.value?(re=(V=Yn(e).user)==null?void 0:V.id)==null?void 0:re.toString():void 0,"current-entreprise":x.value?(_e=(Q=Yn(e).user)==null?void 0:Q.id)==null?void 0:_e.toString():void 0,"api-errors":p.value,onClose:$,onSave:Z},null,8,["user","salaries","entreprises","is-admin","is-entreprise","current-salarie","current-entreprise","api-errors"])])):Jt("",!0),a.value?(Oe(),Ca(lP,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:I,onCancel:U[4]||(U[4]=we=>a.value=!1)})):Jt("",!0)])}}}),PY={class:"h-full bg-gray-50"},MY={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},kY={class:"sm:flex sm:items-center"},AY={class:"sm:flex-auto"},TY={class:"text-2xl font-semibold text-gray-900"},DY={class:"mt-2 text-sm text-gray-700"},OY={key:0,class:"mt-8"},NY={class:"mb-6"},IY=["value"],BY={class:"mb-6"},RY={value:null},FY=["value"],jY={key:0,class:"mb-6"},zY={value:null},$Y=["value"],VY={key:1,class:"mt-8"},UY={class:"mb-6"},HY=["value"],WY={class:"mt-8"},GY={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},qY={class:"overflow-x-auto"},YY={class:"min-w-full divide-y divide-gray-300"},ZY={class:"bg-gray-50"},KY={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},XY={class:"ml-2 flex-none rounded"},JY={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},QY={class:"ml-2 flex-none rounded"},eZ={class:"divide-y divide-gray-200 bg-white"},tZ={key:0},nZ={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},rZ={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},iZ={class:"px-3 py-4 text-sm text-gray-900"},sZ={key:0,class:"flex items-center"},oZ={class:"h-8 w-8 flex-shrink-0"},aZ={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},lZ={class:"text-primary-700 font-medium text-sm"},uZ={class:"ml-3"},cZ={class:"font-medium"},hZ={key:1,class:"text-gray-500"},dZ={class:"px-3 py-4 text-sm text-gray-900"},fZ={key:0,class:"flex items-center"},pZ={class:"h-8 w-8 flex-shrink-0"},gZ={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},mZ={class:"text-primary-700 font-medium text-sm"},vZ={class:"ml-3"},yZ={class:"font-medium"},bZ={key:1,class:"text-gray-500"},_Z={class:"px-3 py-4 text-sm text-gray-900"},wZ={key:0,class:"flex items-center"},xZ={class:"h-8 w-8 flex-shrink-0"},LZ={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},SZ={class:"text-primary-700 font-medium text-sm"},CZ={class:"ml-3"},EZ={class:"font-medium"},PZ={key:1,class:"text-gray-500"},MZ={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},kZ={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},AZ=["onClick"],TZ=["onClick"],DZ=["onClick"],OZ={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},NZ={class:"bg-white rounded-lg p-6 max-w-md w-full"},IZ={class:"flex justify-between items-center mb-4"},BZ=["disabled"],RZ=["disabled"],FZ={key:0,class:"space-y-4"},jZ={key:0},zZ=["disabled"],$Z=["value"],VZ=["disabled"],UZ=["value"],HZ={key:0,class:"mt-1 text-sm text-gray-500"},WZ=["disabled"],GZ=["value"],qZ={key:0,class:"mt-1 text-sm text-gray-500"},YZ={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},ZZ={class:"flex"},KZ={class:"ml-3"},XZ={class:"text-sm font-medium text-red-800"},JZ={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},QZ=["disabled"],eK={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},tK=js({__name:"PlansView",setup(t){const e=Nm(),n=Uy(),r=ma(),i=St([]),s=St([]),o=St([]),a=St([]),l=St(!1),c=St(!1),d=St(!1),p=St(null),v=St({nom:"",description:"",client:null}),g=St({id:0,nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),x=St(!1),E=St(null),k=St(null),A=St(null),D=St("date_modification"),j=St("desc"),Y=St(null),te=Qn(()=>k.value?a.value.filter(X=>typeof X.salarie=="object"&&X.salarie?X.salarie.id===k.value:X.salarie===k.value||X.salarie_id===k.value):a.value),ge=Qn(()=>{let X=i.value;console.log(`
[PlansView] Filtering plans:`,X.map(De=>({id:De.id,entreprise:De.entreprise,salarie:De.salarie,visiteur:De.visiteur}))),r.isAdmin?(Y.value&&(X=X.filter(De=>{var Te;return typeof De.entreprise=="object"?((Te=De.entreprise)==null?void 0:Te.id)===Y.value:De.entreprise===Y.value})),k.value&&(X=X.filter(De=>{var Te;return typeof De.salarie=="object"?((Te=De.salarie)==null?void 0:Te.id)===k.value:De.salarie===k.value}),A.value&&(X=X.filter(De=>{var Te;return typeof De.visiteur=="object"?((Te=De.visiteur)==null?void 0:Te.id)===A.value:De.visiteur===A.value})))):r.isSalarie&&(X=X.filter(De=>{var Te,Je,de;return typeof De.salarie=="object"?((Te=De.salarie)==null?void 0:Te.id)===((Je=r.user)==null?void 0:Je.id):De.salarie===((de=r.user)==null?void 0:de.id)}),A.value&&(X=X.filter(De=>{var Te;return typeof De.visiteur=="object"?((Te=De.visiteur)==null?void 0:Te.id)===A.value:De.visiteur===A.value})));const J=[...X].sort((De,Te)=>{if(D.value==="nom")return j.value==="asc"?De.nom.localeCompare(Te.nom):Te.nom.localeCompare(De.nom);{const Je=new Date(De[D.value]).getTime(),de=new Date(Te[D.value]).getTime();return j.value==="asc"?Je-de:de-Je}});return console.log("[PlansView] Final filtered and sorted plans:",J.map(De=>({id:De.id,entreprise:De.entreprise,salarie:De.salarie,visiteur:De.visiteur}))),J}),pe=Qn(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complète des plans",plans:i.value}:r.isSalarie?{title:"Plans des visiteurs",description:"Plans où vous êtes assigné comme salarie",plans:i.value.filter(X=>{var J,De,Te;return typeof X.salarie=="object"?((J=X.salarie)==null?void 0:J.id)===((De=r.user)==null?void 0:De.id):X.salarie===((Te=r.user)==null?void 0:Te.id)})}:{title:"Mes plans",description:"Plans qui vous sont assignés ou que vous avez créés",plans:i.value.filter(X=>{var Te,Je,de,ee;const J=X.createur.id===((Te=r.user)==null?void 0:Te.id);let De=!1;return typeof X.visiteur=="object"?De=((Je=X.visiteur)==null?void 0:Je.id)===((de=r.user)==null?void 0:de.id):De=X.visiteur===((ee=r.user)==null?void 0:ee.id),De||J})}),N=Qn(()=>Y.value?s.value.filter(X=>{var J;return typeof X.entreprise=="object"?((J=X.entreprise)==null?void 0:J.id)===Y.value:X.entreprise_id===Y.value}):s.value),$=Qn(()=>g.value.entreprise?s.value.filter(X=>{var J;return typeof X.entreprise=="object"?((J=X.entreprise)==null?void 0:J.id)===g.value.entreprise:X.entreprise_id===g.value.entreprise}):[]),Z=Qn(()=>!g.value.entreprise||!g.value.salarie?[]:a.value.filter(X=>typeof X.salarie=="object"&&X.salarie?X.salarie.id===g.value.salarie:X.salarie===g.value.salarie||X.salarie_id===g.value.salarie));mo(async()=>{var X;await B(),r.isAdmin?await I():r.isSalarie&&await z(((X=r.user)==null?void 0:X.id)||0)});async function B(){try{const X=await n.fetchPlansWithDetails();i.value=X.data}catch(X){console.error("Erreur lors du chargement des plans:",X)}}async function I(){try{console.log("Chargement des entreprises..."),o.value=await r.fetchEnterprises(),console.log("Entreprises chargées:",o.value)}catch(X){console.error("Erreur lors du chargement des entreprises:",X)}}async function R(X){try{if(console.log("Chargement des salaries pour l'entreprise:",X),X===void 0){const J=await r.fetchUsersByRole({role:"SALARIE"});s.value=J}else s.value=await r.fetchEntrepriseSalaries(X);console.log("Salaries chargés:",s.value)}catch(J){console.error("Erreur lors du chargement des salaries:",J)}}async function z(X){try{console.log("Chargement des visiteurs pour le salarie:",X);const J=await rv({role:"VISITEUR",salarieId:X});a.value=J.map(De=>({...De,salarie_id:X})),console.log("Visiteurs chargés:",a.value)}catch(J){console.error("Erreur lors du chargement des visiteurs:",J)}}function U(){l.value=!0,v.value={nom:"",description:"",client:null}}async function V(X){console.log(`
[PlansView][editPlan] ====== DÉBUT ÉDITION PLAN ======`),console.log("[PlansView][editPlan] Plan reçu:",{id:X.id,nom:X.nom,entreprise:X.entreprise,salarie:X.salarie,visiteur:X.visiteur});try{console.log("[PlansView][editPlan] Définition du plan courant dans le store..."),n.setCurrentPlan(X),console.log("[PlansView][editPlan] Sauvegarde de l'ID dans localStorage:",X.id),localStorage.setItem("lastPlanId",X.id.toString()),console.log("[PlansView][editPlan] Redirection vers la vue carte..."),await e.push("/"),console.log(`[PlansView][editPlan] ====== FIN ÉDITION PLAN ======
`)}catch(J){console.error("[PlansView][editPlan] ERREUR:",J),J instanceof Error&&console.error("[PlansView][editPlan] Stack trace:",J.stack),alert("Une erreur est survenue lors du chargement du plan")}}async function re(X){X!=null&&X.id&&(p.value=X,d.value=!0)}async function Q(){var X,J;if((X=p.value)!=null&&X.id)try{await n.deletePlan(p.value.id),await B(),((J=n.currentPlan)==null?void 0:J.id)===p.value.id&&n.clearCurrentPlan()}catch(De){console.error("Erreur lors de la suppression du plan:",De),alert("Une erreur est survenue lors de la suppression du plan")}finally{d.value=!1,p.value=null}}function _e(){d.value=!1,p.value=null}function we(X){return new Date(X).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Qe(X){if(!X)return"";const J=X.first_name||"",De=X.last_name||"";return(J.charAt(0)+De.charAt(0)).toUpperCase()}async function ae(X){x.value=!0,E.value=null;try{r.isAdmin&&!o.value.length&&await I();const J=typeof X.entreprise=="object"&&X.entreprise?X.entreprise.id:X.entreprise,De=typeof X.salarie=="object"&&X.salarie?X.salarie.id:X.salarie,Te=typeof X.visiteur=="object"&&X.visiteur?X.visiteur.id:X.visiteur;g.value={id:X.id,nom:X.nom,description:X.description,entreprise:J||null,salarie:De||null,visiteur:Te||null},J&&await R(J),De&&await z(De),c.value=!0}catch(J){console.error("Erreur lors de l'ouverture du modal:",J),E.value="Erreur lors du chargement des données"}finally{x.value=!1}}async function H(){var X,J,De,Te,Je;E.value=null,x.value=!0;try{if(!g.value.nom.trim())throw new Error("Le nom du plan est requis");if(g.value.visiteur&&!g.value.salarie)throw new Error("Un salarie doit être sélectionné pour assigner un visiteur");if(g.value.salarie&&!g.value.entreprise)throw new Error("Une entreprise doit être sélectionnée pour assigner un salarie");console.log("Données envoyées pour la mise à jour:",{id:g.value.id,nom:g.value.nom.trim(),description:g.value.description.trim(),entreprise_id:g.value.entreprise,salarie_id:g.value.salarie,visiteur_id:g.value.visiteur});const de=await n.updatePlanDetails(g.value.id,{nom:g.value.nom.trim(),description:g.value.description.trim(),entreprise_id:g.value.entreprise,salarie_id:g.value.salarie,visiteur_id:g.value.visiteur});console.log("Réponse de la mise à jour:",de),de&&(c.value=!1,await B())}catch(de){if(console.error("Erreur lors de la mise à jour du plan:",de),(J=(X=de.response)==null?void 0:X.data)!=null&&J.detail)E.value=de.response.data.detail;else if((Te=(De=de.response)==null?void 0:De.data)!=null&&Te.non_field_errors)E.value=de.response.data.non_field_errors[0];else if((Je=de.response)!=null&&Je.data){const ee=Object.entries(de.response.data).map(([se,ce])=>`${se}: ${Array.isArray(ce)?ce[0]:ce}`);E.value=ee.join(`
`)}else E.value=de.message||"Une erreur est survenue lors de la mise à jour du plan"}finally{x.value=!1}}ki(()=>Y.value,async X=>{k.value=null,A.value=null,X?await R(X):await R()}),ki(()=>k.value,async X=>{A.value=null,X&&await z(X)}),ki(()=>g.value.entreprise,async X=>{X===null?(g.value.salarie=null,g.value.visiteur=null):await R(X)}),ki(()=>g.value.salarie,async X=>{g.value.visiteur=null,X&&await z(X)});function K(X){var Je,de,ee;const J=r.user;if(!J)return!1;if(J.user_type==="admin")return!0;if(J.user_type==="entreprise")return typeof X.entreprise=="object"?((Je=X.entreprise)==null?void 0:Je.id)===J.id:X.entreprise===J.id;if(J.user_type==="salarie")return typeof X.salarie=="object"?((de=X.salarie)==null?void 0:de.id)===J.id:X.salarie===J.id;const De=X.createur.id===J.id;let Te=!1;return typeof X.visiteur=="object"?Te=((ee=X.visiteur)==null?void 0:ee.id)===J.id:Te=X.visiteur===J.id,Te||De}async function me(X){await B(),localStorage.setItem("lastPlanId",X.toString()),console.log(`Plan ${X} créé et défini comme plan actif`),e.push("/")}function fe(X){D.value===X?j.value=j.value==="asc"?"desc":"asc":(D.value=X,j.value="desc")}function he(X){return X?Su(X):""}return(X,J)=>{var De;return Oe(),Be("div",PY,[S("div",MY,[S("div",kY,[S("div",AY,[S("h1",TY,kt(pe.value.title),1),S("p",DY,kt(pe.value.description),1)]),S("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[S("button",{onClick:U,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),Yn(r).isAdmin?(Oe(),Be("div",OY,[S("div",NY,[J[15]||(J[15]=S("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par entreprise",-1)),Tn(S("select",{id:"entreprise-filter","onUpdate:modelValue":J[0]||(J[0]=Te=>Y.value=Te),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[J[14]||(J[14]=S("option",{value:null},"Toutes les entreprises",-1)),(Oe(!0),Be(Sn,null,sr(o.value,Te=>(Oe(),Be("option",{key:Te.id,value:Te.id},kt(he(Te)),9,IY))),128))],512),[[ns,Y.value]])]),S("div",BY,[J[16]||(J[16]=S("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par salarie",-1)),Tn(S("select",{id:"salarie-filter","onUpdate:modelValue":J[1]||(J[1]=Te=>k.value=Te),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[S("option",RY,kt(N.value.length?"Tous les salaries":"Aucun salarie disponible"),1),(Oe(!0),Be(Sn,null,sr(N.value,Te=>(Oe(),Be("option",{key:Te.id,value:Te.id},kt(he(Te)),9,FY))),128))],512),[[ns,k.value]])]),k.value?(Oe(),Be("div",jY,[J[17]||(J[17]=S("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),Tn(S("select",{id:"visiteur-filter","onUpdate:modelValue":J[2]||(J[2]=Te=>A.value=Te),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[S("option",zY,kt(te.value.length?"Tous les visiteurs":"Aucun visiteur disponible"),1),(Oe(!0),Be(Sn,null,sr(te.value,Te=>(Oe(),Be("option",{key:Te.id,value:Te.id},kt(he(Te)),9,$Y))),128))],512),[[ns,A.value]])])):Jt("",!0)])):Yn(r).isSalarie?(Oe(),Be("div",VY,[S("div",UY,[J[19]||(J[19]=S("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),Tn(S("select",{id:"visiteur-filter","onUpdate:modelValue":J[3]||(J[3]=Te=>A.value=Te),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[J[18]||(J[18]=S("option",{value:null},"Tous les visiteurs",-1)),(Oe(!0),Be(Sn,null,sr(a.value,Te=>(Oe(),Be("option",{key:Te.id,value:Te.id},kt(he(Te)),9,HY))),128))],512),[[ns,A.value]])])])):Jt("",!0),S("div",WY,[S("div",GY,[S("div",qY,[S("table",YY,[S("thead",ZY,[S("tr",null,[S("th",KY,[S("button",{onClick:J[4]||(J[4]=Te=>fe("nom")),class:"group inline-flex items-center"},[J[21]||(J[21]=Kr(" Nom ")),S("span",XY,[(Oe(),Be("svg",{class:Di(["h-5 w-5",{"text-gray-900":D.value==="nom","text-gray-400":D.value!=="nom","rotate-180":D.value==="nom"&&j.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},J[20]||(J[20]=[S("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),J[24]||(J[24]=S("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),J[25]||(J[25]=S("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise ",-1)),J[26]||(J[26]=S("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Salarie ",-1)),J[27]||(J[27]=S("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Visiteur ",-1)),S("th",JY,[S("button",{onClick:J[5]||(J[5]=Te=>fe("date_modification")),class:"group inline-flex items-center"},[J[23]||(J[23]=Kr(" Dernière modification ")),S("span",QY,[(Oe(),Be("svg",{class:Di(["h-5 w-5",{"text-gray-900":D.value==="date_modification","text-gray-400":D.value!=="date_modification","rotate-180":D.value==="date_modification"&&j.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},J[22]||(J[22]=[S("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),J[28]||(J[28]=S("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[S("span",{class:"sr-only"},"Actions")],-1))])]),S("tbody",eZ,[ge.value.length===0?(Oe(),Be("tr",tZ,J[29]||(J[29]=[S("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):Jt("",!0),(Oe(!0),Be(Sn,null,sr(ge.value,Te=>(Oe(),Be("tr",{key:Te.id,class:"hover:bg-gray-50"},[S("td",nZ,kt(Te.nom),1),S("td",rZ,kt(Te.description||"-"),1),S("td",iZ,[Te.entreprise&&typeof Te.entreprise=="object"?(Oe(),Be("div",sZ,[S("div",oZ,[S("div",aZ,[S("span",lZ,kt(Qe(Te.entreprise)),1)])]),S("div",uZ,[S("div",cZ,kt(Yn(Su)(Te.entreprise)),1)])])):(Oe(),Be("div",hZ," Non assigné "))]),S("td",dZ,[Te.salarie&&typeof Te.salarie=="object"?(Oe(),Be("div",fZ,[S("div",pZ,[S("div",gZ,[S("span",mZ,kt(Qe(Te.salarie)),1)])]),S("div",vZ,[S("div",yZ,kt(Yn(Su)(Te.salarie)),1)])])):(Oe(),Be("div",bZ," Non assigné "))]),S("td",_Z,[Te.visiteur&&typeof Te.visiteur=="object"?(Oe(),Be("div",wZ,[S("div",xZ,[S("div",LZ,[S("span",SZ,kt(Qe(Te.visiteur)),1)])]),S("div",CZ,[S("div",EZ,kt(Yn(Su)(Te.visiteur)),1)])])):(Oe(),Be("div",PZ," Non assigné "))]),S("td",MZ,kt(we(Te.date_modification)),1),S("td",kZ,[S("button",{onClick:Je=>V(Te),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,AZ),S("button",{onClick:Je=>ae(Te),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,TZ),K(Te)?(Oe(),Be("button",{key:0,onClick:Je=>re(Te),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,DZ)):Jt("",!0)])]))),128))])])])])]),mi(zE,{modelValue:l.value,"onUpdate:modelValue":J[6]||(J[6]=Te=>l.value=Te),salaries:s.value,clients:a.value,onCreated:me},null,8,["modelValue","salaries","clients"]),c.value?(Oe(),Be("div",OZ,[S("div",NZ,[S("div",IZ,[J[31]||(J[31]=S("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),S("button",{onClick:J[7]||(J[7]=Te=>c.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},J[30]||(J[30]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("form",{onSubmit:Cu(H,["prevent"]),class:"space-y-4"},[S("div",null,[J[32]||(J[32]=S("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),Tn(S("input",{type:"text",id:"edit-nom","onUpdate:modelValue":J[8]||(J[8]=Te=>g.value.nom=Te),disabled:x.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",required:""},null,8,BZ),[[zr,g.value.nom]])]),S("div",null,[J[33]||(J[33]=S("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),Tn(S("textarea",{id:"edit-description","onUpdate:modelValue":J[9]||(J[9]=Te=>g.value.description=Te),disabled:x.value,rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,RZ),[[zr,g.value.description]])]),Yn(r).isAdmin||((De=Yn(r).user)==null?void 0:De.user_type)==="entreprise"?(Oe(),Be("div",FZ,[Yn(r).isAdmin?(Oe(),Be("div",jZ,[J[35]||(J[35]=S("label",{for:"edit-entreprise",class:"block text-sm font-medium text-gray-700"}," Entreprise ",-1)),Tn(S("select",{id:"edit-entreprise","onUpdate:modelValue":J[10]||(J[10]=Te=>g.value.entreprise=Te),disabled:x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[J[34]||(J[34]=S("option",{value:null},"Sélectionner une entreprise",-1)),(Oe(!0),Be(Sn,null,sr(o.value,Te=>(Oe(),Be("option",{key:Te.id,value:Te.id},kt(he(Te)),9,$Z))),128))],8,zZ),[[ns,g.value.entreprise]])])):Jt("",!0),S("div",null,[J[37]||(J[37]=S("label",{for:"edit-salarie",class:"block text-sm font-medium text-gray-700"}," Salarie ",-1)),Tn(S("select",{id:"edit-salarie","onUpdate:modelValue":J[11]||(J[11]=Te=>g.value.salarie=Te),disabled:Yn(r).isAdmin&&!g.value.entreprise||x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[J[36]||(J[36]=S("option",{value:null},"Sélectionner un salarie",-1)),(Oe(!0),Be(Sn,null,sr($.value,Te=>(Oe(),Be("option",{key:Te.id,value:Te.id},kt(he(Te)),9,UZ))),128))],8,VZ),[[ns,g.value.salarie]]),Yn(r).isAdmin&&!g.value.entreprise?(Oe(),Be("p",HZ," Veuillez d'abord sélectionner une entreprise ")):Jt("",!0)]),S("div",null,[J[39]||(J[39]=S("label",{for:"edit-visiteur",class:"block text-sm font-medium text-gray-700"}," Visiteur ",-1)),Tn(S("select",{id:"edit-visiteur","onUpdate:modelValue":J[12]||(J[12]=Te=>g.value.visiteur=Te),disabled:!g.value.salarie||x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[J[38]||(J[38]=S("option",{value:null},"Sélectionner un visiteur",-1)),(Oe(!0),Be(Sn,null,sr(Z.value,Te=>(Oe(),Be("option",{key:Te.id,value:Te.id},kt(he(Te)),9,GZ))),128))],8,WZ),[[ns,g.value.visiteur]]),g.value.salarie?Jt("",!0):(Oe(),Be("p",qZ," Veuillez d'abord sélectionner un salarie "))])])):Jt("",!0),E.value?(Oe(),Be("div",YZ,[S("div",ZZ,[J[40]||(J[40]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",KZ,[S("p",XZ,kt(E.value),1)])])])):Jt("",!0),S("div",JZ,[S("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:J[13]||(J[13]=Te=>c.value=!1)}," Annuler "),S("button",{type:"submit",disabled:x.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[x.value?(Oe(),Be("svg",eK,J[41]||(J[41]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Jt("",!0),Kr(" "+kt(x.value?"Enregistrement...":"Enregistrer"),1)],8,QZ)])],32)])])):Jt("",!0),d.value?(Oe(),Ca(lP,{key:3,title:"Supprimer le plan",message:"Êtes-vous sûr de vouloir supprimer ce plan ? Cette action est irréversible.",onConfirm:Q,onCancel:_e})):Jt("",!0)])])}}});var uP={exports:{}};const nK=wE(sI);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function z5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z5(Object(n),!0).forEach(function(r){rK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hv(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hv=function(e){return typeof e}:hv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hv(t)}function rK(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qu(){return Qu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qu.apply(this,arguments)}function iK(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function sK(t,e){if(t==null)return{};var n=iK(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function oK(t){return aK(t)||lK(t)||uK(t)||cK()}function aK(t){if(Array.isArray(t))return Bb(t)}function lK(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uK(t,e){if(t){if(typeof t=="string")return Bb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bb(t,e)}}function Bb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function cK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hK="1.14.0";function Ih(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var zh=Ih(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Im=Ih(/Edge/i),$5=Ih(/firefox/i),qg=Ih(/safari/i)&&!Ih(/chrome/i)&&!Ih(/android/i),cP=Ih(/iP(ad|od|hone)/i),dK=Ih(/chrome/i)&&Ih(/android/i),hP={capture:!1,passive:!1};function Ti(t,e,n){t.addEventListener(e,n,!zh&&hP)}function wi(t,e,n){t.removeEventListener(e,n,!zh&&hP)}function Jv(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function fK(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function yc(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Jv(t,e):Jv(t,e))||r&&t===n)return t;if(t===n)break}while(t=fK(t))}return null}var V5=/\s+/g;function fo(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(V5," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(V5," ")}}function gr(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function gf(t,e){var n="";if(typeof t=="string")n=t;else do{var r=gr(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function dP(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function Qc(){var t=document.scrollingElement;return t||document.documentElement}function Xs(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,c,d,p;if(t!==window&&t.parentNode&&t!==Qc()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,d=s.height,p=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,p=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!zh))do if(i&&i.getBoundingClientRect&&(gr(i,"transform")!=="none"||n&&gr(i,"position")!=="static")){var v=i.getBoundingClientRect();o-=v.top+parseInt(gr(i,"border-top-width")),a-=v.left+parseInt(gr(i,"border-left-width")),l=o+s.height,c=a+s.width;break}while(i=i.parentNode);if(r&&t!==window){var g=gf(i||t),x=g&&g.a,E=g&&g.d;g&&(o/=E,a/=x,p/=x,d/=E,l=o+d,c=a+p)}return{top:o,left:a,bottom:l,right:c,width:p,height:d}}}function U5(t,e,n){for(var r=dd(t,!0),i=Xs(t)[e];r;){var s=Xs(r)[n],o=void 0;if(o=i>=s,!o)return r;if(r===Qc())break;r=dd(r,!1)}return!1}function Dp(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Br.ghost&&(r||o[s]!==Br.dragged)&&yc(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function W_(t,e){for(var n=t.lastElementChild;n&&(n===Br.ghost||gr(n,"display")==="none"||e&&!Jv(n,e));)n=n.previousElementSibling;return n||null}function Mo(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Br.clone&&(!e||Jv(t,e))&&n++;return n}function H5(t){var e=0,n=0,r=Qc();if(t)do{var i=gf(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function pK(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function dd(t,e){if(!t||!t.getBoundingClientRect)return Qc();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=gr(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Qc();if(r||e)return n;r=!0}}while(n=n.parentNode);return Qc()}function gK(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function h2(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Yg;function fP(t,e){return function(){if(!Yg){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),Yg=setTimeout(function(){Yg=void 0},e)}}}function mK(){clearTimeout(Yg),Yg=void 0}function pP(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function G_(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function W5(t,e){gr(t,"position","absolute"),gr(t,"top",e.top),gr(t,"left",e.left),gr(t,"width",e.width),gr(t,"height",e.height)}function d2(t){gr(t,"position",""),gr(t,"top",""),gr(t,"left",""),gr(t,"width",""),gr(t,"height","")}var gl="Sortable"+new Date().getTime();function vK(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(gr(i,"display")==="none"||i===Br.ghost)){t.push({target:i,rect:Xs(i)});var s=nh({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=gf(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(pK(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,c=a.target,d=c.fromRect,p=Xs(c),v=c.prevFromRect,g=c.prevToRect,x=a.rect,E=gf(c,!0);E&&(p.top-=E.f,p.left-=E.e),c.toRect=p,c.thisAnimationDuration&&h2(v,p)&&!h2(d,p)&&(x.top-p.top)/(x.left-p.left)===(d.top-p.top)/(d.left-p.left)&&(l=bK(x,v,g,i.options)),h2(p,d)||(c.prevFromRect=d,c.prevToRect=p,l||(l=i.options.animation),i.animate(c,x,p,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){gr(r,"transition",""),gr(r,"transform","");var a=gf(this.el),l=a&&a.a,c=a&&a.d,d=(i.left-s.left)/(l||1),p=(i.top-s.top)/(c||1);r.animatingX=!!d,r.animatingY=!!p,gr(r,"transform","translate3d("+d+"px,"+p+"px,0)"),this.forRepaintDummy=yK(r),gr(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),gr(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){gr(r,"transition",""),gr(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function yK(t){return t.offsetWidth}function bK(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var Xf=[],f2={initializeByDefault:!0},Bm={mount:function(e){for(var n in f2)f2.hasOwnProperty(n)&&!(n in e)&&(e[n]=f2[n]);Xf.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Xf.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";Xf.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](nh({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](nh({sortable:n},r)))})},initializePlugins:function(e,n,r,i){Xf.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,Qu(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return Xf.forEach(function(i){typeof i.eventProperties=="function"&&Qu(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return Xf.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function Sg(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,d=t.oldDraggableIndex,p=t.newDraggableIndex,v=t.originalEvent,g=t.putSortable,x=t.extraEventProperties;if(e=e||n&&n[gl],!!e){var E,k=e.options,A="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!zh&&!Im?E=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(E=document.createEvent("Event"),E.initEvent(r,!0,!0)),E.to=o||n,E.from=a||n,E.item=i||n,E.clone=s,E.oldIndex=l,E.newIndex=c,E.oldDraggableIndex=d,E.newDraggableIndex=p,E.originalEvent=v,E.pullMode=g?g.lastPutMode:void 0;var D=nh(nh({},x),Bm.getEventProperties(r,e));for(var j in D)E[j]=D[j];n&&n.dispatchEvent(E),k[A]&&k[A].call(e,E)}}var _K=["evt"],Yl=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=sK(r,_K);Bm.pluginEvent.bind(Br)(e,n,nh({dragEl:$n,parentEl:Co,ghostEl:si,rootEl:Ks,nextEl:tf,lastDownEl:dv,cloneEl:Eo,cloneHidden:ud,dragStarted:Cg,putSortable:Wa,activeSortable:Br.active,originalEvent:i,oldIndex:dp,oldDraggableIndex:Zg,newIndex:wu,newDraggableIndex:ld,hideGhostForTarget:yP,unhideGhostForTarget:bP,cloneNowHidden:function(){ud=!0},cloneNowShown:function(){ud=!1},dispatchSortableEvent:function(a){Ml({sortable:n,name:a,originalEvent:i})}},s))};function Ml(t){Sg(nh({putSortable:Wa,cloneEl:Eo,targetEl:$n,rootEl:Ks,oldIndex:dp,oldDraggableIndex:Zg,newIndex:wu,newDraggableIndex:ld},t))}var $n,Co,si,Ks,tf,dv,Eo,ud,dp,wu,Zg,ld,P0,Wa,up=!1,Qv=!1,ey=[],Yd,pc,p2,g2,G5,q5,Cg,Jf,Kg,Xg=!1,M0=!1,fv,ul,m2=[],Rb=!1,ty=[],qy=typeof document<"u",k0=cP,Y5=Im||zh?"cssFloat":"float",wK=qy&&!dK&&!cP&&"draggable"in document.createElement("div"),gP=function(){if(qy){if(zh)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),mP=function(e,n){var r=gr(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=Dp(e,0,n),o=Dp(e,1,n),a=s&&gr(s),l=o&&gr(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Xs(s).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Xs(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var p=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===p)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[Y5]==="none"||o&&r[Y5]==="none"&&c+d>i)?"vertical":"horizontal"},xK=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?n.left:n.top,l=r?n.right:n.bottom,c=r?n.width:n.height;return i===a||s===l||i+o/2===a+c/2},LK=function(e,n){var r;return ey.some(function(i){var s=i[gl].options.emptyInsertThreshold;if(!(!s||W_(i))){var o=Xs(i),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},vP=function(e){function n(s,o){return function(a,l,c,d){var p=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||p))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,d),o)(a,l,c,d);var v=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===v||s.join&&s.indexOf(v)>-1}}var r={},i=e.group;(!i||hv(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},yP=function(){!gP&&si&&gr(si,"display","none")},bP=function(){!gP&&si&&gr(si,"display","")};qy&&document.addEventListener("click",function(t){if(Qv)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Qv=!1,!1},!0);var Zd=function(e){if($n){e=e.touches?e.touches[0]:e;var n=LK(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[gl]._onDragOver(r)}}},SK=function(e){$n&&$n.parentNode[gl]._isOutsideThisEl(e.target)};function Br(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Qu({},e),t[gl]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return mP(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Br.supportPointer!==!1&&"PointerEvent"in window&&!qg,emptyInsertThreshold:5};Bm.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);vP(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:wK,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Ti(t,"pointerdown",this._onTapStart):(Ti(t,"mousedown",this._onTapStart),Ti(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ti(t,"dragover",this),Ti(t,"dragenter",this)),ey.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Qu(this,vK())}Br.prototype={constructor:Br,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Jf=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,$n):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,d=i.filter;if(DK(r),!$n&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&qg&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=yc(l,i.draggable,r,!1),!(l&&l.animated)&&dv!==l)){if(dp=Mo(l),Zg=Mo(l,i.draggable),typeof d=="function"){if(d.call(this,e,l,this)){Ml({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Yl("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(p){if(p=yc(c,p.trim(),r,!1),p)return Ml({sortable:n,rootEl:p,name:"filter",targetEl:l,fromEl:r,toEl:r}),Yl("filter",n,{evt:e}),!0}),d)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!yc(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!$n&&r.parentNode===s){var c=Xs(r);if(Ks=s,$n=r,Co=$n.parentNode,tf=$n.nextSibling,dv=r,P0=o.group,Br.dragged=$n,Yd={target:$n,clientX:(n||e).clientX,clientY:(n||e).clientY},G5=Yd.clientX-c.left,q5=Yd.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,$n.style["will-change"]="all",l=function(){if(Yl("delayEnded",i,{evt:e}),Br.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!$5&&i.nativeDraggable&&($n.draggable=!0),i._triggerDragStart(e,n),Ml({sortable:i,name:"choose",originalEvent:e}),fo($n,o.chosenClass,!0)},o.ignore.split(",").forEach(function(d){dP($n,d.trim(),v2)}),Ti(a,"dragover",Zd),Ti(a,"mousemove",Zd),Ti(a,"touchmove",Zd),Ti(a,"mouseup",i._onDrop),Ti(a,"touchend",i._onDrop),Ti(a,"touchcancel",i._onDrop),$5&&this.nativeDraggable&&(this.options.touchStartThreshold=4,$n.draggable=!0),Yl("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Im||zh))){if(Br.eventCanceled){this._onDrop();return}Ti(a,"mouseup",i._disableDelayedDrag),Ti(a,"touchend",i._disableDelayedDrag),Ti(a,"touchcancel",i._disableDelayedDrag),Ti(a,"mousemove",i._delayedDragTouchMoveHandler),Ti(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&Ti(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){$n&&v2($n),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;wi(e,"mouseup",this._disableDelayedDrag),wi(e,"touchend",this._disableDelayedDrag),wi(e,"touchcancel",this._disableDelayedDrag),wi(e,"mousemove",this._delayedDragTouchMoveHandler),wi(e,"touchmove",this._delayedDragTouchMoveHandler),wi(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?Ti(document,"pointermove",this._onTouchMove):n?Ti(document,"touchmove",this._onTouchMove):Ti(document,"mousemove",this._onTouchMove):(Ti($n,"dragend",this),Ti(Ks,"dragstart",this._onDragStart));try{document.selection?pv(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(up=!1,Ks&&$n){Yl("dragStarted",this,{evt:n}),this.nativeDraggable&&Ti(document,"dragover",SK);var r=this.options;!e&&fo($n,r.dragClass,!1),fo($n,r.ghostClass,!0),Br.active=this,e&&this._appendGhost(),Ml({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(pc){this._lastX=pc.clientX,this._lastY=pc.clientY,yP();for(var e=document.elementFromPoint(pc.clientX,pc.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(pc.clientX,pc.clientY),e!==n);)n=e;if($n.parentNode[gl]._isOutsideThisEl(e),n)do{if(n[gl]){var r=void 0;if(r=n[gl]._onDragOver({clientX:pc.clientX,clientY:pc.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);bP()}},_onTouchMove:function(e){if(Yd){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=si&&gf(si,!0),a=si&&o&&o.a,l=si&&o&&o.d,c=k0&&ul&&H5(ul),d=(s.clientX-Yd.clientX+i.x)/(a||1)+(c?c[0]-m2[0]:0)/(a||1),p=(s.clientY-Yd.clientY+i.y)/(l||1)+(c?c[1]-m2[1]:0)/(l||1);if(!Br.active&&!up){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(si){o?(o.e+=d-(p2||0),o.f+=p-(g2||0)):o={a:1,b:0,c:0,d:1,e:d,f:p};var v="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");gr(si,"webkitTransform",v),gr(si,"mozTransform",v),gr(si,"msTransform",v),gr(si,"transform",v),p2=d,g2=p,pc=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!si){var e=this.options.fallbackOnBody?document.body:Ks,n=Xs($n,!0,k0,!0,e),r=this.options;if(k0){for(ul=e;gr(ul,"position")==="static"&&gr(ul,"transform")==="none"&&ul!==document;)ul=ul.parentNode;ul!==document.body&&ul!==document.documentElement?(ul===document&&(ul=Qc()),n.top+=ul.scrollTop,n.left+=ul.scrollLeft):ul=Qc(),m2=H5(ul)}si=$n.cloneNode(!0),fo(si,r.ghostClass,!1),fo(si,r.fallbackClass,!0),fo(si,r.dragClass,!0),gr(si,"transition",""),gr(si,"transform",""),gr(si,"box-sizing","border-box"),gr(si,"margin",0),gr(si,"top",n.top),gr(si,"left",n.left),gr(si,"width",n.width),gr(si,"height",n.height),gr(si,"opacity","0.8"),gr(si,"position",k0?"absolute":"fixed"),gr(si,"zIndex","100000"),gr(si,"pointerEvents","none"),Br.ghost=si,e.appendChild(si),gr(si,"transform-origin",G5/parseInt(si.style.width)*100+"% "+q5/parseInt(si.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(Yl("dragStart",this,{evt:e}),Br.eventCanceled){this._onDrop();return}Yl("setupClone",this),Br.eventCanceled||(Eo=G_($n),Eo.draggable=!1,Eo.style["will-change"]="",this._hideClone(),fo(Eo,this.options.chosenClass,!1),Br.clone=Eo),r.cloneId=pv(function(){Yl("clone",r),!Br.eventCanceled&&(r.options.removeCloneOnHide||Ks.insertBefore(Eo,$n),r._hideClone(),Ml({sortable:r,name:"clone"}))}),!n&&fo($n,s.dragClass,!0),n?(Qv=!0,r._loopId=setInterval(r._emulateDragOver,50)):(wi(document,"mouseup",r._onDrop),wi(document,"touchend",r._onDrop),wi(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,$n)),Ti(document,"drop",r),gr($n,"transform","translateZ(0)")),up=!0,r._dragStartId=pv(r._dragStarted.bind(r,n,e)),Ti(document,"selectstart",r),Cg=!0,qg&&gr(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,a=this.options,l=a.group,c=Br.active,d=P0===l,p=a.sort,v=Wa||c,g,x=this,E=!1;if(Rb)return;function k(Q,_e){Yl(Q,x,nh({evt:e,isOwner:d,axis:g?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:p,fromSortable:v,target:r,completed:D,onMove:function(Qe,ae){return A0(Ks,n,$n,i,Qe,Xs(Qe),e,ae)},changed:j},_e))}function A(){k("dragOverAnimationCapture"),x.captureAnimationState(),x!==v&&v.captureAnimationState()}function D(Q){return k("dragOverCompleted",{insertion:Q}),Q&&(d?c._hideClone():c._showClone(x),x!==v&&(fo($n,Wa?Wa.options.ghostClass:c.options.ghostClass,!1),fo($n,a.ghostClass,!0)),Wa!==x&&x!==Br.active?Wa=x:x===Br.active&&Wa&&(Wa=null),v===x&&(x._ignoreWhileAnimating=r),x.animateAll(function(){k("dragOverAnimationComplete"),x._ignoreWhileAnimating=null}),x!==v&&(v.animateAll(),v._ignoreWhileAnimating=null)),(r===$n&&!$n.animated||r===n&&!r.animated)&&(Jf=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&($n.parentNode[gl]._isOutsideThisEl(e.target),!Q&&Zd(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),E=!0}function j(){wu=Mo($n),ld=Mo($n,a.draggable),Ml({sortable:x,name:"change",toEl:n,newIndex:wu,newDraggableIndex:ld,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=yc(r,a.draggable,n,!0),k("dragOver"),Br.eventCanceled)return E;if($n.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||x._ignoreWhileAnimating===r)return D(!1);if(Qv=!1,c&&!a.disabled&&(d?p||(o=Co!==Ks):Wa===this||(this.lastPutMode=P0.checkPull(this,c,$n,e))&&l.checkPut(this,c,$n,e))){if(g=this._getDirection(e,r)==="vertical",i=Xs($n),k("dragOverValid"),Br.eventCanceled)return E;if(o)return Co=Ks,A(),this._hideClone(),k("revert"),Br.eventCanceled||(tf?Ks.insertBefore($n,tf):Ks.appendChild($n)),D(!0);var Y=W_(n,a.draggable);if(!Y||MK(e,g,this)&&!Y.animated){if(Y===$n)return D(!1);if(Y&&n===e.target&&(r=Y),r&&(s=Xs(r)),A0(Ks,n,$n,i,r,s,e,!!r)!==!1)return A(),n.appendChild($n),Co=n,j(),D(!0)}else if(Y&&PK(e,g,this)){var te=Dp(n,0,a,!0);if(te===$n)return D(!1);if(r=te,s=Xs(r),A0(Ks,n,$n,i,r,s,e,!1)!==!1)return A(),n.insertBefore($n,te),Co=n,j(),D(!0)}else if(r.parentNode===n){s=Xs(r);var ge=0,pe,N=$n.parentNode!==n,$=!xK($n.animated&&$n.toRect||i,r.animated&&r.toRect||s,g),Z=g?"top":"left",B=U5(r,"top","top")||U5($n,"top","top"),I=B?B.scrollTop:void 0;Jf!==r&&(pe=s[Z],Xg=!1,M0=!$&&a.invertSwap||N),ge=kK(e,r,s,g,$?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,M0,Jf===r);var R;if(ge!==0){var z=Mo($n);do z-=ge,R=Co.children[z];while(R&&(gr(R,"display")==="none"||R===si))}if(ge===0||R===r)return D(!1);Jf=r,Kg=ge;var U=r.nextElementSibling,V=!1;V=ge===1;var re=A0(Ks,n,$n,i,r,s,e,V);if(re!==!1)return(re===1||re===-1)&&(V=re===1),Rb=!0,setTimeout(EK,30),A(),V&&!U?n.appendChild($n):r.parentNode.insertBefore($n,V?U:r),B&&pP(B,0,I-B.scrollTop),Co=$n.parentNode,pe!==void 0&&!M0&&(fv=Math.abs(pe-Xs(r)[Z])),j(),D(!0)}if(n.contains($n))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){wi(document,"mousemove",this._onTouchMove),wi(document,"touchmove",this._onTouchMove),wi(document,"pointermove",this._onTouchMove),wi(document,"dragover",Zd),wi(document,"mousemove",Zd),wi(document,"touchmove",Zd)},_offUpEvents:function(){var e=this.el.ownerDocument;wi(e,"mouseup",this._onDrop),wi(e,"touchend",this._onDrop),wi(e,"pointerup",this._onDrop),wi(e,"touchcancel",this._onDrop),wi(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(wu=Mo($n),ld=Mo($n,r.draggable),Yl("drop",this,{evt:e}),Co=$n&&$n.parentNode,wu=Mo($n),ld=Mo($n,r.draggable),Br.eventCanceled){this._nulling();return}up=!1,M0=!1,Xg=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Fb(this.cloneId),Fb(this._dragStartId),this.nativeDraggable&&(wi(document,"drop",this),wi(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),qg&&gr(document.body,"user-select",""),gr($n,"transform",""),e&&(Cg&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),si&&si.parentNode&&si.parentNode.removeChild(si),(Ks===Co||Wa&&Wa.lastPutMode!=="clone")&&Eo&&Eo.parentNode&&Eo.parentNode.removeChild(Eo),$n&&(this.nativeDraggable&&wi($n,"dragend",this),v2($n),$n.style["will-change"]="",Cg&&!up&&fo($n,Wa?Wa.options.ghostClass:this.options.ghostClass,!1),fo($n,this.options.chosenClass,!1),Ml({sortable:this,name:"unchoose",toEl:Co,newIndex:null,newDraggableIndex:null,originalEvent:e}),Ks!==Co?(wu>=0&&(Ml({rootEl:Co,name:"add",toEl:Co,fromEl:Ks,originalEvent:e}),Ml({sortable:this,name:"remove",toEl:Co,originalEvent:e}),Ml({rootEl:Co,name:"sort",toEl:Co,fromEl:Ks,originalEvent:e}),Ml({sortable:this,name:"sort",toEl:Co,originalEvent:e})),Wa&&Wa.save()):wu!==dp&&wu>=0&&(Ml({sortable:this,name:"update",toEl:Co,originalEvent:e}),Ml({sortable:this,name:"sort",toEl:Co,originalEvent:e})),Br.active&&((wu==null||wu===-1)&&(wu=dp,ld=Zg),Ml({sortable:this,name:"end",toEl:Co,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Yl("nulling",this),Ks=$n=Co=si=tf=Eo=dv=ud=Yd=pc=Cg=wu=ld=dp=Zg=Jf=Kg=Wa=P0=Br.dragged=Br.ghost=Br.clone=Br.active=null,ty.forEach(function(e){e.checked=!0}),ty.length=p2=g2=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":$n&&(this._onDragOver(e),CK(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],yc(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||TK(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];yc(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return yc(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=Bm.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&vP(r)},destroy:function(){Yl("destroy",this);var e=this.el;e[gl]=null,wi(e,"mousedown",this._onTapStart),wi(e,"touchstart",this._onTapStart),wi(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(wi(e,"dragover",this),wi(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ey.splice(ey.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ud){if(Yl("hideClone",this),Br.eventCanceled)return;gr(Eo,"display","none"),this.options.removeCloneOnHide&&Eo.parentNode&&Eo.parentNode.removeChild(Eo),ud=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ud){if(Yl("showClone",this),Br.eventCanceled)return;$n.parentNode==Ks&&!this.options.group.revertClone?Ks.insertBefore(Eo,$n):tf?Ks.insertBefore(Eo,tf):Ks.appendChild(Eo),this.options.group.revertClone&&this.animate($n,Eo),gr(Eo,"display",""),ud=!1}}};function CK(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function A0(t,e,n,r,i,s,o,a){var l,c=t[gl],d=c.options.onMove,p;return window.CustomEvent&&!zh&&!Im?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=s||Xs(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),d&&(p=d.call(c,l,o)),p}function v2(t){t.draggable=!1}function EK(){Rb=!1}function PK(t,e,n){var r=Xs(Dp(n.el,0,n.options,!0)),i=10;return e?t.clientX<r.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-i||t.clientY<r.bottom&&t.clientX<r.left}function MK(t,e,n){var r=Xs(W_(n.el,n.options.draggable)),i=10;return e?t.clientX>r.right+i||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+i}function kK(t,e,n,r,i,s,o,a){var l=r?t.clientY:t.clientX,c=r?n.height:n.width,d=r?n.top:n.left,p=r?n.bottom:n.right,v=!1;if(!o){if(a&&fv<c*i){if(!Xg&&(Kg===1?l>d+c*s/2:l<p-c*s/2)&&(Xg=!0),Xg)v=!0;else if(Kg===1?l<d+fv:l>p-fv)return-Kg}else if(l>d+c*(1-i)/2&&l<p-c*(1-i)/2)return AK(e)}return v=v||o,v&&(l<d+c*s/2||l>p-c*s/2)?l>d+c/2?1:-1:0}function AK(t){return Mo($n)<Mo(t)?1:-1}function TK(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function DK(t){ty.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&ty.push(r)}}function pv(t){return setTimeout(t,0)}function Fb(t){return clearTimeout(t)}qy&&Ti(document,"touchmove",function(t){(Br.active||up)&&t.cancelable&&t.preventDefault()});Br.utils={on:Ti,off:wi,css:gr,find:dP,is:function(e,n){return!!yc(e,n,e,!1)},extend:gK,throttle:fP,closest:yc,toggleClass:fo,clone:G_,index:Mo,nextTick:pv,cancelNextTick:Fb,detectDirection:mP,getChild:Dp};Br.get=function(t){return t[gl]};Br.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Br.utils=nh(nh({},Br.utils),r.utils)),Bm.mount(r)})};Br.create=function(t,e){return new Br(t,e)};Br.version=hK;var ra=[],Eg,jb,zb=!1,y2,b2,ny,Pg;function OK(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?Ti(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ti(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Ti(document,"touchmove",this._handleFallbackAutoScroll):Ti(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?wi(document,"dragover",this._handleAutoScroll):(wi(document,"pointermove",this._handleFallbackAutoScroll),wi(document,"touchmove",this._handleFallbackAutoScroll),wi(document,"mousemove",this._handleFallbackAutoScroll)),Z5(),gv(),mK()},nulling:function(){ny=jb=Eg=zb=Pg=y2=b2=null,ra.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(ny=n,r||this.options.forceAutoScrollFallback||Im||zh||qg){_2(n,this.options,a,r);var l=dd(a,!0);zb&&(!Pg||s!==y2||o!==b2)&&(Pg&&Z5(),Pg=setInterval(function(){var c=dd(document.elementFromPoint(s,o),!0);c!==l&&(l=c,gv()),_2(n,i.options,c,r)},10),y2=s,b2=o)}else{if(!this.options.bubbleScroll||dd(a,!0)===Qc()){gv();return}_2(n,this.options,dd(a,!1),!1)}}},Qu(t,{pluginName:"scroll",initializeByDefault:!0})}function gv(){ra.forEach(function(t){clearInterval(t.pid)}),ra=[]}function Z5(){clearInterval(Pg)}var _2=fP(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Qc(),c=!1,d;jb!==n&&(jb=n,gv(),Eg=e.scroll,d=e.scrollFn,Eg===!0&&(Eg=dd(n,!0)));var p=0,v=Eg;do{var g=v,x=Xs(g),E=x.top,k=x.bottom,A=x.left,D=x.right,j=x.width,Y=x.height,te=void 0,ge=void 0,pe=g.scrollWidth,N=g.scrollHeight,$=gr(g),Z=g.scrollLeft,B=g.scrollTop;g===l?(te=j<pe&&($.overflowX==="auto"||$.overflowX==="scroll"||$.overflowX==="visible"),ge=Y<N&&($.overflowY==="auto"||$.overflowY==="scroll"||$.overflowY==="visible")):(te=j<pe&&($.overflowX==="auto"||$.overflowX==="scroll"),ge=Y<N&&($.overflowY==="auto"||$.overflowY==="scroll"));var I=te&&(Math.abs(D-i)<=o&&Z+j<pe)-(Math.abs(A-i)<=o&&!!Z),R=ge&&(Math.abs(k-s)<=o&&B+Y<N)-(Math.abs(E-s)<=o&&!!B);if(!ra[p])for(var z=0;z<=p;z++)ra[z]||(ra[z]={});(ra[p].vx!=I||ra[p].vy!=R||ra[p].el!==g)&&(ra[p].el=g,ra[p].vx=I,ra[p].vy=R,clearInterval(ra[p].pid),(I!=0||R!=0)&&(c=!0,ra[p].pid=setInterval((function(){r&&this.layer===0&&Br.active._onTouchMove(ny);var U=ra[this.layer].vy?ra[this.layer].vy*a:0,V=ra[this.layer].vx?ra[this.layer].vx*a:0;typeof d=="function"&&d.call(Br.dragged.parentNode[gl],V,U,t,ny,ra[this.layer].el)!=="continue"||pP(ra[this.layer].el,V,U)}).bind({layer:p}),24))),p++}while(e.bubbleScroll&&v!==l&&(v=dd(v,!1)));zb=c}},30),_P=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=r||s;a();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,p=document.elementFromPoint(d.clientX,d.clientY);l(),c&&!c.el.contains(p)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function q_(){}q_.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Dp(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:_P};Qu(q_,{pluginName:"revertOnSpill"});function Y_(){}Y_.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:_P};Qu(Y_,{pluginName:"removeOnSpill"});var Vu;function NK(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(n){var r=n.dragEl;Vu=r},dragOverValid:function(n){var r=n.completed,i=n.target,s=n.onMove,o=n.activeSortable,a=n.changed,l=n.cancel;if(o.options.swap){var c=this.sortable.el,d=this.options;if(i&&i!==c){var p=Vu;s(i)!==!1?(fo(i,d.swapClass,!0),Vu=i):Vu=null,p&&p!==Vu&&fo(p,d.swapClass,!1)}a(),r(!0),l()}},drop:function(n){var r=n.activeSortable,i=n.putSortable,s=n.dragEl,o=i||this.sortable,a=this.options;Vu&&fo(Vu,a.swapClass,!1),Vu&&(a.swap||i&&i.options.swap)&&s!==Vu&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),IK(s,Vu),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){Vu=null}},Qu(t,{pluginName:"swap",eventProperties:function(){return{swapItem:Vu}}})}function IK(t,e){var n=t.parentNode,r=e.parentNode,i,s;!n||!r||n.isEqualNode(e)||r.isEqualNode(t)||(i=Mo(t),s=Mo(e),n.isEqualNode(r)&&i<s&&s++,n.insertBefore(e,n.children[i]),r.insertBefore(t,r.children[s]))}var Yr=[],_u=[],ag,gc,lg=!1,Zl=!1,Qf=!1,Ms,ug,T0;function BK(){function t(e){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));e.options.supportPointer?Ti(document,"pointerup",this._deselectMultiDrag):(Ti(document,"mouseup",this._deselectMultiDrag),Ti(document,"touchend",this._deselectMultiDrag)),Ti(document,"keydown",this._checkKeyDown),Ti(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";Yr.length&&gc===e?Yr.forEach(function(a,l){o+=(l?", ":"")+a.textContent}):o=s.textContent,i.setData("Text",o)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var r=n.dragEl;Ms=r},delayEnded:function(){this.isMultiDrag=~Yr.indexOf(Ms)},setupClone:function(n){var r=n.sortable,i=n.cancel;if(this.isMultiDrag){for(var s=0;s<Yr.length;s++)_u.push(G_(Yr[s])),_u[s].sortableIndex=Yr[s].sortableIndex,_u[s].draggable=!1,_u[s].style["will-change"]="",fo(_u[s],this.options.selectedClass,!1),Yr[s]===Ms&&fo(_u[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(n){var r=n.sortable,i=n.rootEl,s=n.dispatchSortableEvent,o=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Yr.length&&gc===r&&(K5(!0,i),s("clone"),o()))},showClone:function(n){var r=n.cloneNowShown,i=n.rootEl,s=n.cancel;this.isMultiDrag&&(K5(!1,i),_u.forEach(function(o){gr(o,"display","")}),r(),T0=!1,s())},hideClone:function(n){var r=this;n.sortable;var i=n.cloneNowHidden,s=n.cancel;this.isMultiDrag&&(_u.forEach(function(o){gr(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),T0=!0,s())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&gc&&gc.multiDrag._deselectMultiDrag(),Yr.forEach(function(r){r.sortableIndex=Mo(r)}),Yr=Yr.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),Qf=!0},dragStarted:function(n){var r=this,i=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Yr.forEach(function(o){o!==Ms&&gr(o,"position","absolute")});var s=Xs(Ms,!1,!0,!0);Yr.forEach(function(o){o!==Ms&&W5(o,s)}),Zl=!0,lg=!0}i.animateAll(function(){Zl=!1,lg=!1,r.options.animation&&Yr.forEach(function(o){d2(o)}),r.options.sort&&D0()})}},dragOver:function(n){var r=n.target,i=n.completed,s=n.cancel;Zl&&~Yr.indexOf(r)&&(i(!1),s())},revert:function(n){var r=n.fromSortable,i=n.rootEl,s=n.sortable,o=n.dragRect;Yr.length>1&&(Yr.forEach(function(a){s.addAnimationState({target:a,rect:Zl?Xs(a):o}),d2(a),a.fromRect=o,r.removeAnimationState(a)}),Zl=!1,RK(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(n){var r=n.sortable,i=n.isOwner,s=n.insertion,o=n.activeSortable,a=n.parentEl,l=n.putSortable,c=this.options;if(s){if(i&&o._hideClone(),lg=!1,c.animation&&Yr.length>1&&(Zl||!i&&!o.options.sort&&!l)){var d=Xs(Ms,!1,!0,!0);Yr.forEach(function(v){v!==Ms&&(W5(v,d),a.appendChild(v))}),Zl=!0}if(!i)if(Zl||D0(),Yr.length>1){var p=T0;o._showClone(r),o.options.animation&&!T0&&p&&_u.forEach(function(v){o.addAnimationState({target:v,rect:ug}),v.fromRect=ug,v.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(n){var r=n.dragRect,i=n.isOwner,s=n.activeSortable;if(Yr.forEach(function(a){a.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){ug=Qu({},r);var o=gf(Ms,!0);ug.top-=o.f,ug.left-=o.e}},dragOverAnimationComplete:function(){Zl&&(Zl=!1,D0())},drop:function(n){var r=n.originalEvent,i=n.rootEl,s=n.parentEl,o=n.sortable,a=n.dispatchSortableEvent,l=n.oldIndex,c=n.putSortable,d=c||this.sortable;if(r){var p=this.options,v=s.children;if(!Qf)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),fo(Ms,p.selectedClass,!~Yr.indexOf(Ms)),~Yr.indexOf(Ms))Yr.splice(Yr.indexOf(Ms),1),ag=null,Sg({sortable:o,rootEl:i,name:"deselect",targetEl:Ms});else{if(Yr.push(Ms),Sg({sortable:o,rootEl:i,name:"select",targetEl:Ms}),r.shiftKey&&ag&&o.el.contains(ag)){var g=Mo(ag),x=Mo(Ms);if(~g&&~x&&g!==x){var E,k;for(x>g?(k=g,E=x):(k=x,E=g+1);k<E;k++)~Yr.indexOf(v[k])||(fo(v[k],p.selectedClass,!0),Yr.push(v[k]),Sg({sortable:o,rootEl:i,name:"select",targetEl:v[k]}))}}else ag=Ms;gc=d}if(Qf&&this.isMultiDrag){if(Zl=!1,(s[gl].options.sort||s!==i)&&Yr.length>1){var A=Xs(Ms),D=Mo(Ms,":not(."+this.options.selectedClass+")");if(!lg&&p.animation&&(Ms.thisAnimationDuration=null),d.captureAnimationState(),!lg&&(p.animation&&(Ms.fromRect=A,Yr.forEach(function(Y){if(Y.thisAnimationDuration=null,Y!==Ms){var te=Zl?Xs(Y):A;Y.fromRect=te,d.addAnimationState({target:Y,rect:te})}})),D0(),Yr.forEach(function(Y){v[D]?s.insertBefore(Y,v[D]):s.appendChild(Y),D++}),l===Mo(Ms))){var j=!1;Yr.forEach(function(Y){if(Y.sortableIndex!==Mo(Y)){j=!0;return}}),j&&a("update")}Yr.forEach(function(Y){d2(Y)}),d.animateAll()}gc=d}(i===s||c&&c.lastPutMode!=="clone")&&_u.forEach(function(Y){Y.parentNode&&Y.parentNode.removeChild(Y)})}},nullingGlobal:function(){this.isMultiDrag=Qf=!1,_u.length=0},destroyGlobal:function(){this._deselectMultiDrag(),wi(document,"pointerup",this._deselectMultiDrag),wi(document,"mouseup",this._deselectMultiDrag),wi(document,"touchend",this._deselectMultiDrag),wi(document,"keydown",this._checkKeyDown),wi(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Qf<"u"&&Qf)&&gc===this.sortable&&!(n&&yc(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;Yr.length;){var r=Yr[0];fo(r,this.options.selectedClass,!1),Yr.shift(),Sg({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Qu(t,{pluginName:"multiDrag",utils:{select:function(n){var r=n.parentNode[gl];!r||!r.options.multiDrag||~Yr.indexOf(n)||(gc&&gc!==r&&(gc.multiDrag._deselectMultiDrag(),gc=r),fo(n,r.options.selectedClass,!0),Yr.push(n))},deselect:function(n){var r=n.parentNode[gl],i=Yr.indexOf(n);!r||!r.options.multiDrag||!~i||(fo(n,r.options.selectedClass,!1),Yr.splice(i,1))}},eventProperties:function(){var n=this,r=[],i=[];return Yr.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;Zl&&s!==Ms?o=-1:Zl?o=Mo(s,":not(."+n.options.selectedClass+")"):o=Mo(s),i.push({multiDragElement:s,index:o})}),{items:oK(Yr),clones:[].concat(_u),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function RK(t,e){Yr.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function K5(t,e){_u.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function D0(){Yr.forEach(function(t){t!==Ms&&t.parentNode&&t.parentNode.removeChild(t)})}Br.mount(new OK);Br.mount(Y_,q_);const FK=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:BK,Sortable:Br,Swap:NK,default:Br},Symbol.toStringTag,{value:"Module"})),jK=wE(FK);(function(t,e){(function(r,i){t.exports=i(nK,jK)})(typeof self<"u"?self:Pa,function(n,r){return function(i){var s={};function o(a){if(s[a])return s[a].exports;var l=s[a]={i:a,l:!1,exports:{}};return i[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=i,o.c=s,o.d=function(a,l,c){o.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:c})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,l){if(l&1&&(a=o(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var d in a)o.d(c,d,(function(p){return a[p]}).bind(null,d));return c},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var a=o("b622"),l=a("toStringTag"),c={};c[l]="z",i.exports=String(c)==="[object z]"},"0366":function(i,s,o){var a=o("1c0b");i.exports=function(l,c,d){if(a(l),c===void 0)return l;switch(d){case 0:return function(){return l.call(c)};case 1:return function(p){return l.call(c,p)};case 2:return function(p,v){return l.call(c,p,v)};case 3:return function(p,v,g){return l.call(c,p,v,g)}}return function(){return l.apply(c,arguments)}}},"057f":function(i,s,o){var a=o("fc6a"),l=o("241c").f,c={}.toString,d=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],p=function(v){try{return l(v)}catch{return d.slice()}};i.exports.f=function(g){return d&&c.call(g)=="[object Window]"?p(g):l(a(g))}},"06cf":function(i,s,o){var a=o("83ab"),l=o("d1e7"),c=o("5c6c"),d=o("fc6a"),p=o("c04e"),v=o("5135"),g=o("0cfb"),x=Object.getOwnPropertyDescriptor;s.f=a?x:function(k,A){if(k=d(k),A=p(A,!0),g)try{return x(k,A)}catch{}if(v(k,A))return c(!l.f.call(k,A),k[A])}},"0cfb":function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("cc12");i.exports=!a&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var a=o("23e7"),l=o("d58f").left,c=o("a640"),d=o("ae40"),p=c("reduce"),v=d("reduce",{1:0});a({target:"Array",proto:!0,forced:!p||!v},{reduce:function(x){return l(this,x,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var a=o("c6b6"),l=o("9263");i.exports=function(c,d){var p=c.exec;if(typeof p=="function"){var v=p.call(c,d);if(typeof v!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return v}if(a(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,d)}},"159b":function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("17c2"),d=o("9112");for(var p in l){var v=a[p],g=v&&v.prototype;if(g&&g.forEach!==c)try{d(g,"forEach",c)}catch{g.forEach=c}}},"17c2":function(i,s,o){var a=o("b727").forEach,l=o("a640"),c=o("ae40"),d=l("forEach"),p=c("forEach");i.exports=!d||!p?function(g){return a(this,g,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var a=o("d066");i.exports=a("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var a=o("b622"),l=a("iterator"),c=!1;try{var d=0,p={next:function(){return{done:!!d++}},return:function(){c=!0}};p[l]=function(){return this},Array.from(p,function(){throw 2})}catch{}i.exports=function(v,g){if(!g&&!c)return!1;var x=!1;try{var E={};E[l]=function(){return{next:function(){return{done:x=!0}}}},v(E)}catch{}return x}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var a=o("d039"),l=o("b622"),c=o("2d00"),d=l("species");i.exports=function(p){return c>=51||!a(function(){var v=[],g=v.constructor={};return g[d]=function(){return{foo:1}},v[p](Boolean).foo!==1})}},"23cb":function(i,s,o){var a=o("a691"),l=Math.max,c=Math.min;i.exports=function(d,p){var v=a(d);return v<0?l(v+p,0):c(v,p)}},"23e7":function(i,s,o){var a=o("da84"),l=o("06cf").f,c=o("9112"),d=o("6eeb"),p=o("ce4e"),v=o("e893"),g=o("94ca");i.exports=function(x,E){var k=x.target,A=x.global,D=x.stat,j,Y,te,ge,pe,N;if(A?Y=a:D?Y=a[k]||p(k,{}):Y=(a[k]||{}).prototype,Y)for(te in E){if(pe=E[te],x.noTargetGet?(N=l(Y,te),ge=N&&N.value):ge=Y[te],j=g(A?te:k+(D?".":"#")+te,x.forced),!j&&ge!==void 0){if(typeof pe==typeof ge)continue;v(pe,ge)}(x.sham||ge&&ge.sham)&&c(pe,"sham",!0),d(Y,te,pe,x)}}},"241c":function(i,s,o){var a=o("ca84"),l=o("7839"),c=l.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(p){return a(p,c)}},"25f0":function(i,s,o){var a=o("6eeb"),l=o("825a"),c=o("d039"),d=o("ad6d"),p="toString",v=RegExp.prototype,g=v[p],x=c(function(){return g.call({source:"a",flags:"b"})!="/a/b"}),E=g.name!=p;(x||E)&&a(RegExp.prototype,p,function(){var A=l(this),D=String(A.source),j=A.flags,Y=String(j===void 0&&A instanceof RegExp&&!("flags"in v)?d.call(A):j);return"/"+D+"/"+Y},{unsafe:!0})},"2ca0":function(i,s,o){var a=o("23e7"),l=o("06cf").f,c=o("50c4"),d=o("5a34"),p=o("1d80"),v=o("ab13"),g=o("c430"),x="".startsWith,E=Math.min,k=v("startsWith"),A=!g&&!k&&!!function(){var D=l(String.prototype,"startsWith");return D&&!D.writable}();a({target:"String",proto:!0,forced:!A&&!k},{startsWith:function(j){var Y=String(p(this));d(j);var te=c(E(arguments.length>1?arguments[1]:void 0,Y.length)),ge=String(j);return x?x.call(Y,ge,te):Y.slice(te,te+ge.length)===ge}})},"2d00":function(i,s,o){var a=o("da84"),l=o("342f"),c=a.process,d=c&&c.versions,p=d&&d.v8,v,g;p?(v=p.split("."),g=v[0]+v[1]):l&&(v=l.match(/Edge\/(\d+)/),(!v||v[1]>=74)&&(v=l.match(/Chrome\/(\d+)/),v&&(g=v[1]))),i.exports=g&&+g},"342f":function(i,s,o){var a=o("d066");i.exports=a("navigator","userAgent")||""},"35a1":function(i,s,o){var a=o("f5df"),l=o("3f8c"),c=o("b622"),d=c("iterator");i.exports=function(p){if(p!=null)return p[d]||p["@@iterator"]||l[a(p)]}},"37e8":function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("825a"),d=o("df75");i.exports=a?Object.defineProperties:function(v,g){c(v);for(var x=d(g),E=x.length,k=0,A;E>k;)l.f(v,A=x[k++],g[A]);return v}},"3bbe":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(i,s,o){var a=o("6547").charAt,l=o("69f3"),c=o("7dd0"),d="String Iterator",p=l.set,v=l.getterFor(d);c(String,"String",function(g){p(this,{type:d,string:String(g),index:0})},function(){var x=v(this),E=x.string,k=x.index,A;return k>=E.length?{value:void 0,done:!0}:(A=a(E,k),x.index+=A.length,{value:A,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var a=o("23e7"),l=o("17c2");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(i,s,o){var a=o("da84");i.exports=a},"44ad":function(i,s,o){var a=o("d039"),l=o("c6b6"),c="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(d){return l(d)=="String"?c.call(d,""):Object(d)}:Object},"44d2":function(i,s,o){var a=o("b622"),l=o("7c73"),c=o("9bf2"),d=a("unscopables"),p=Array.prototype;p[d]==null&&c.f(p,d,{configurable:!0,value:l(null)}),i.exports=function(v){p[d][v]=!0}},"44e7":function(i,s,o){var a=o("861d"),l=o("c6b6"),c=o("b622"),d=c("match");i.exports=function(p){var v;return a(p)&&((v=p[d])!==void 0?!!v:l(p)=="RegExp")}},4930:function(i,s,o){var a=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},"4d64":function(i,s,o){var a=o("fc6a"),l=o("50c4"),c=o("23cb"),d=function(p){return function(v,g,x){var E=a(v),k=l(E.length),A=c(x,k),D;if(p&&g!=g){for(;k>A;)if(D=E[A++],D!=D)return!0}else for(;k>A;A++)if((p||A in E)&&E[A]===g)return p||A||0;return!p&&-1}};i.exports={includes:d(!0),indexOf:d(!1)}},"4de4":function(i,s,o){var a=o("23e7"),l=o("b727").filter,c=o("1dde"),d=o("ae40"),p=c("filter"),v=d("filter");a({target:"Array",proto:!0,forced:!p||!v},{filter:function(x){return l(this,x,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var a=o("0366"),l=o("7b0b"),c=o("9bdd"),d=o("e95a"),p=o("50c4"),v=o("8418"),g=o("35a1");i.exports=function(E){var k=l(E),A=typeof this=="function"?this:Array,D=arguments.length,j=D>1?arguments[1]:void 0,Y=j!==void 0,te=g(k),ge=0,pe,N,$,Z,B,I;if(Y&&(j=a(j,D>2?arguments[2]:void 0,2)),te!=null&&!(A==Array&&d(te)))for(Z=te.call(k),B=Z.next,N=new A;!($=B.call(Z)).done;ge++)I=Y?c(Z,j,[$.value,ge],!0):$.value,v(N,ge,I);else for(pe=p(k.length),N=new A(pe);pe>ge;ge++)I=Y?j(k[ge],ge):k[ge],v(N,ge,I);return N.length=ge,N}},"4fad":function(i,s,o){var a=o("23e7"),l=o("6f53").entries;a({target:"Object",stat:!0},{entries:function(d){return l(d)}})},"50c4":function(i,s,o){var a=o("a691"),l=Math.min;i.exports=function(c){return c>0?l(a(c),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(a,l){return o.call(a,l)}},5319:function(i,s,o){var a=o("d784"),l=o("825a"),c=o("7b0b"),d=o("50c4"),p=o("a691"),v=o("1d80"),g=o("8aa5"),x=o("14c3"),E=Math.max,k=Math.min,A=Math.floor,D=/\$([$&'`]|\d\d?|<[^>]*>)/g,j=/\$([$&'`]|\d\d?)/g,Y=function(te){return te===void 0?te:String(te)};a("replace",2,function(te,ge,pe,N){var $=N.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,Z=N.REPLACE_KEEPS_$0,B=$?"$":"$0";return[function(z,U){var V=v(this),re=z==null?void 0:z[te];return re!==void 0?re.call(z,V,U):ge.call(String(V),z,U)},function(R,z){if(!$&&Z||typeof z=="string"&&z.indexOf(B)===-1){var U=pe(ge,R,this,z);if(U.done)return U.value}var V=l(R),re=String(this),Q=typeof z=="function";Q||(z=String(z));var _e=V.global;if(_e){var we=V.unicode;V.lastIndex=0}for(var Qe=[];;){var ae=x(V,re);if(ae===null||(Qe.push(ae),!_e))break;var H=String(ae[0]);H===""&&(V.lastIndex=g(re,d(V.lastIndex),we))}for(var K="",me=0,fe=0;fe<Qe.length;fe++){ae=Qe[fe];for(var he=String(ae[0]),X=E(k(p(ae.index),re.length),0),J=[],De=1;De<ae.length;De++)J.push(Y(ae[De]));var Te=ae.groups;if(Q){var Je=[he].concat(J,X,re);Te!==void 0&&Je.push(Te);var de=String(z.apply(void 0,Je))}else de=I(he,re,X,J,Te,z);X>=me&&(K+=re.slice(me,X)+de,me=X+he.length)}return K+re.slice(me)}];function I(R,z,U,V,re,Q){var _e=U+R.length,we=V.length,Qe=j;return re!==void 0&&(re=c(re),Qe=D),ge.call(Q,Qe,function(ae,H){var K;switch(H.charAt(0)){case"$":return"$";case"&":return R;case"`":return z.slice(0,U);case"'":return z.slice(_e);case"<":K=re[H.slice(1,-1)];break;default:var me=+H;if(me===0)return ae;if(me>we){var fe=A(me/10);return fe===0?ae:fe<=we?V[fe-1]===void 0?H.charAt(1):V[fe-1]+H.charAt(1):ae}K=V[me-1]}return K===void 0?"":K})}})},5692:function(i,s,o){var a=o("c430"),l=o("c6cd");(i.exports=function(c,d){return l[c]||(l[c]=d!==void 0?d:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var a=o("d066"),l=o("241c"),c=o("7418"),d=o("825a");i.exports=a("Reflect","ownKeys")||function(v){var g=l.f(d(v)),x=c.f;return x?g.concat(x(v)):g}},"5a34":function(i,s,o){var a=o("44e7");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(i,s){i.exports=function(o,a){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:a}}},"5db7":function(i,s,o){var a=o("23e7"),l=o("a2bf"),c=o("7b0b"),d=o("50c4"),p=o("1c0b"),v=o("65f0");a({target:"Array",proto:!0},{flatMap:function(x){var E=c(this),k=d(E.length),A;return p(x),A=v(E,0),A.length=l(A,E,E,k,0,1,x,arguments.length>1?arguments[1]:void 0),A}})},6547:function(i,s,o){var a=o("a691"),l=o("1d80"),c=function(d){return function(p,v){var g=String(l(p)),x=a(v),E=g.length,k,A;return x<0||x>=E?d?"":void 0:(k=g.charCodeAt(x),k<55296||k>56319||x+1===E||(A=g.charCodeAt(x+1))<56320||A>57343?d?g.charAt(x):k:d?g.slice(x,x+2):(k-55296<<10)+(A-56320)+65536)}};i.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(i,s,o){var a=o("861d"),l=o("e8b5"),c=o("b622"),d=c("species");i.exports=function(p,v){var g;return l(p)&&(g=p.constructor,typeof g=="function"&&(g===Array||l(g.prototype))?g=void 0:a(g)&&(g=g[d],g===null&&(g=void 0))),new(g===void 0?Array:g)(v===0?0:v)}},"69f3":function(i,s,o){var a=o("7f9a"),l=o("da84"),c=o("861d"),d=o("9112"),p=o("5135"),v=o("f772"),g=o("d012"),x=l.WeakMap,E,k,A,D=function($){return A($)?k($):E($,{})},j=function($){return function(Z){var B;if(!c(Z)||(B=k(Z)).type!==$)throw TypeError("Incompatible receiver, "+$+" required");return B}};if(a){var Y=new x,te=Y.get,ge=Y.has,pe=Y.set;E=function($,Z){return pe.call(Y,$,Z),Z},k=function($){return te.call(Y,$)||{}},A=function($){return ge.call(Y,$)}}else{var N=v("state");g[N]=!0,E=function($,Z){return d($,N,Z),Z},k=function($){return p($,N)?$[N]:{}},A=function($){return p($,N)}}i.exports={set:E,get:k,has:A,enforce:D,getterFor:j}},"6eeb":function(i,s,o){var a=o("da84"),l=o("9112"),c=o("5135"),d=o("ce4e"),p=o("8925"),v=o("69f3"),g=v.get,x=v.enforce,E=String(String).split("String");(i.exports=function(k,A,D,j){var Y=j?!!j.unsafe:!1,te=j?!!j.enumerable:!1,ge=j?!!j.noTargetGet:!1;if(typeof D=="function"&&(typeof A=="string"&&!c(D,"name")&&l(D,"name",A),x(D).source=E.join(typeof A=="string"?A:"")),k===a){te?k[A]=D:d(A,D);return}else Y?!ge&&k[A]&&(te=!0):delete k[A];te?k[A]=D:l(k,A,D)})(Function.prototype,"toString",function(){return typeof this=="function"&&g(this).source||p(this)})},"6f53":function(i,s,o){var a=o("83ab"),l=o("df75"),c=o("fc6a"),d=o("d1e7").f,p=function(v){return function(g){for(var x=c(g),E=l(x),k=E.length,A=0,D=[],j;k>A;)j=E[A++],(!a||d.call(x,j))&&D.push(v?[j,x[j]]:x[j]);return D}};i.exports={entries:p(!0),values:p(!1)}},"73d9":function(i,s,o){var a=o("44d2");a("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var a=o("428f"),l=o("5135"),c=o("e538"),d=o("9bf2").f;i.exports=function(p){var v=a.Symbol||(a.Symbol={});l(v,p)||d(v,p,{value:c.f(p)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var a=o("1d80");i.exports=function(l){return Object(a(l))}},"7c73":function(i,s,o){var a=o("825a"),l=o("37e8"),c=o("7839"),d=o("d012"),p=o("1be4"),v=o("cc12"),g=o("f772"),x=">",E="<",k="prototype",A="script",D=g("IE_PROTO"),j=function(){},Y=function($){return E+A+x+$+E+"/"+A+x},te=function($){$.write(Y("")),$.close();var Z=$.parentWindow.Object;return $=null,Z},ge=function(){var $=v("iframe"),Z="java"+A+":",B;return $.style.display="none",p.appendChild($),$.src=String(Z),B=$.contentWindow.document,B.open(),B.write(Y("document.F=Object")),B.close(),B.F},pe,N=function(){try{pe=document.domain&&new ActiveXObject("htmlfile")}catch{}N=pe?te(pe):ge();for(var $=c.length;$--;)delete N[k][c[$]];return N()};d[D]=!0,i.exports=Object.create||function(Z,B){var I;return Z!==null?(j[k]=a(Z),I=new j,j[k]=null,I[D]=Z):I=N(),B===void 0?I:l(I,B)}},"7dd0":function(i,s,o){var a=o("23e7"),l=o("9ed3"),c=o("e163"),d=o("d2bb"),p=o("d44e"),v=o("9112"),g=o("6eeb"),x=o("b622"),E=o("c430"),k=o("3f8c"),A=o("ae93"),D=A.IteratorPrototype,j=A.BUGGY_SAFARI_ITERATORS,Y=x("iterator"),te="keys",ge="values",pe="entries",N=function(){return this};i.exports=function($,Z,B,I,R,z,U){l(B,Z,I);var V=function(fe){if(fe===R&&Qe)return Qe;if(!j&&fe in _e)return _e[fe];switch(fe){case te:return function(){return new B(this,fe)};case ge:return function(){return new B(this,fe)};case pe:return function(){return new B(this,fe)}}return function(){return new B(this)}},re=Z+" Iterator",Q=!1,_e=$.prototype,we=_e[Y]||_e["@@iterator"]||R&&_e[R],Qe=!j&&we||V(R),ae=Z=="Array"&&_e.entries||we,H,K,me;if(ae&&(H=c(ae.call(new $)),D!==Object.prototype&&H.next&&(!E&&c(H)!==D&&(d?d(H,D):typeof H[Y]!="function"&&v(H,Y,N)),p(H,re,!0,!0),E&&(k[re]=N))),R==ge&&we&&we.name!==ge&&(Q=!0,Qe=function(){return we.call(this)}),(!E||U)&&_e[Y]!==Qe&&v(_e,Y,Qe),k[Z]=Qe,R)if(K={values:V(ge),keys:z?Qe:V(te),entries:V(pe)},U)for(me in K)(j||Q||!(me in _e))&&g(_e,me,K[me]);else a({target:Z,proto:!0,forced:j||Q},K);return K}},"7f9a":function(i,s,o){var a=o("da84"),l=o("8925"),c=a.WeakMap;i.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(i,s,o){var a=o("d039");i.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var a=o("c04e"),l=o("9bf2"),c=o("5c6c");i.exports=function(d,p,v){var g=a(p);g in d?l.f(d,g,c(0,v)):d[g]=v}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var a,l,c;(function(d,p){l=[],a=p,c=typeof a=="function"?a.apply(s,l):a,c!==void 0&&(i.exports=c)})(typeof self<"u"?self:this,function(){function d(){var p=Object.getOwnPropertyDescriptor(document,"currentScript");if(!p&&"currentScript"in document&&document.currentScript||p&&p.get!==d&&document.currentScript)return document.currentScript;try{throw new Error}catch(pe){var v=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,g=/@([^@]*):(\d+):(\d+)\s*$/ig,x=v.exec(pe.stack)||g.exec(pe.stack),E=x&&x[1]||!1,k=x&&x[2]||!1,A=document.location.href.replace(document.location.hash,""),D,j,Y,te=document.getElementsByTagName("script");E===A&&(D=document.documentElement.outerHTML,j=new RegExp("(?:[^\\n]+?\\n){0,"+(k-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),Y=D.replace(j,"$1").trim());for(var ge=0;ge<te.length;ge++)if(te[ge].readyState==="interactive"||te[ge].src===E||E===A&&te[ge].innerHTML&&te[ge].innerHTML.trim()===Y)return te[ge];return null}}return d})},8925:function(i,s,o){var a=o("c6cd"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(c){return l.call(c)}),i.exports=a.inspectSource},"8aa5":function(i,s,o){var a=o("6547").charAt;i.exports=function(l,c,d){return c+(d?a(l,c).length:1)}},"8bbf":function(i,s){i.exports=n},"90e3":function(i,s){var o=0,a=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+a).toString(36)}},9112:function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("5c6c");i.exports=a?function(d,p,v){return l.f(d,p,c(1,v))}:function(d,p,v){return d[p]=v,d}},9263:function(i,s,o){var a=o("ad6d"),l=o("9f7f"),c=RegExp.prototype.exec,d=String.prototype.replace,p=c,v=function(){var k=/a/,A=/b*/g;return c.call(k,"a"),c.call(A,"a"),k.lastIndex!==0||A.lastIndex!==0}(),g=l.UNSUPPORTED_Y||l.BROKEN_CARET,x=/()??/.exec("")[1]!==void 0,E=v||x||g;E&&(p=function(A){var D=this,j,Y,te,ge,pe=g&&D.sticky,N=a.call(D),$=D.source,Z=0,B=A;return pe&&(N=N.replace("y",""),N.indexOf("g")===-1&&(N+="g"),B=String(A).slice(D.lastIndex),D.lastIndex>0&&(!D.multiline||D.multiline&&A[D.lastIndex-1]!==`
`)&&($="(?: "+$+")",B=" "+B,Z++),Y=new RegExp("^(?:"+$+")",N)),x&&(Y=new RegExp("^"+$+"$(?!\\s)",N)),v&&(j=D.lastIndex),te=c.call(pe?Y:D,B),pe?te?(te.input=te.input.slice(Z),te[0]=te[0].slice(Z),te.index=D.lastIndex,D.lastIndex+=te[0].length):D.lastIndex=0:v&&te&&(D.lastIndex=D.global?te.index+te[0].length:j),x&&te&&te.length>1&&d.call(te[0],Y,function(){for(ge=1;ge<arguments.length-2;ge++)arguments[ge]===void 0&&(te[ge]=void 0)}),te}),i.exports=p},"94ca":function(i,s,o){var a=o("d039"),l=/#|\.prototype\./,c=function(x,E){var k=p[d(x)];return k==g?!0:k==v?!1:typeof E=="function"?a(E):!!E},d=c.normalize=function(x){return String(x).replace(l,".").toLowerCase()},p=c.data={},v=c.NATIVE="N",g=c.POLYFILL="P";i.exports=c},"99af":function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("e8b5"),d=o("861d"),p=o("7b0b"),v=o("50c4"),g=o("8418"),x=o("65f0"),E=o("1dde"),k=o("b622"),A=o("2d00"),D=k("isConcatSpreadable"),j=9007199254740991,Y="Maximum allowed index exceeded",te=A>=51||!l(function(){var $=[];return $[D]=!1,$.concat()[0]!==$}),ge=E("concat"),pe=function($){if(!d($))return!1;var Z=$[D];return Z!==void 0?!!Z:c($)},N=!te||!ge;a({target:"Array",proto:!0,forced:N},{concat:function(Z){var B=p(this),I=x(B,0),R=0,z,U,V,re,Q;for(z=-1,V=arguments.length;z<V;z++)if(Q=z===-1?B:arguments[z],pe(Q)){if(re=v(Q.length),R+re>j)throw TypeError(Y);for(U=0;U<re;U++,R++)U in Q&&g(I,R,Q[U])}else{if(R>=j)throw TypeError(Y);g(I,R++,Q)}return I.length=R,I}})},"9bdd":function(i,s,o){var a=o("825a");i.exports=function(l,c,d,p){try{return p?c(a(d)[0],d[1]):c(d)}catch(g){var v=l.return;throw v!==void 0&&a(v.call(l)),g}}},"9bf2":function(i,s,o){var a=o("83ab"),l=o("0cfb"),c=o("825a"),d=o("c04e"),p=Object.defineProperty;s.f=a?p:function(g,x,E){if(c(g),x=d(x,!0),c(E),l)try{return p(g,x,E)}catch{}if("get"in E||"set"in E)throw TypeError("Accessors not supported");return"value"in E&&(g[x]=E.value),g}},"9ed3":function(i,s,o){var a=o("ae93").IteratorPrototype,l=o("7c73"),c=o("5c6c"),d=o("d44e"),p=o("3f8c"),v=function(){return this};i.exports=function(g,x,E){var k=x+" Iterator";return g.prototype=l(a,{next:c(1,E)}),d(g,k,!1,!0),p[k]=v,g}},"9f7f":function(i,s,o){var a=o("d039");function l(c,d){return RegExp(c,d)}s.UNSUPPORTED_Y=a(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),s.BROKEN_CARET=a(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(i,s,o){var a=o("e8b5"),l=o("50c4"),c=o("0366"),d=function(p,v,g,x,E,k,A,D){for(var j=E,Y=0,te=A?c(A,D,3):!1,ge;Y<x;){if(Y in g){if(ge=te?te(g[Y],Y,v):g[Y],k>0&&a(ge))j=d(p,v,ge,l(ge.length),j,k-1)-1;else{if(j>=9007199254740991)throw TypeError("Exceed the acceptable array length");p[j]=ge}j++}Y++}return j};i.exports=d},a352:function(i,s){i.exports=r},a434:function(i,s,o){var a=o("23e7"),l=o("23cb"),c=o("a691"),d=o("50c4"),p=o("7b0b"),v=o("65f0"),g=o("8418"),x=o("1dde"),E=o("ae40"),k=x("splice"),A=E("splice",{ACCESSORS:!0,0:0,1:2}),D=Math.max,j=Math.min,Y=9007199254740991,te="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!k||!A},{splice:function(pe,N){var $=p(this),Z=d($.length),B=l(pe,Z),I=arguments.length,R,z,U,V,re,Q;if(I===0?R=z=0:I===1?(R=0,z=Z-B):(R=I-2,z=j(D(c(N),0),Z-B)),Z+R-z>Y)throw TypeError(te);for(U=v($,z),V=0;V<z;V++)re=B+V,re in $&&g(U,V,$[re]);if(U.length=z,R<z){for(V=B;V<Z-z;V++)re=V+z,Q=V+R,re in $?$[Q]=$[re]:delete $[Q];for(V=Z;V>Z-z+R;V--)delete $[V-1]}else if(R>z)for(V=Z-z;V>B;V--)re=V+z-1,Q=V+R-1,re in $?$[Q]=$[re]:delete $[Q];for(V=0;V<R;V++)$[V+B]=arguments[V+2];return $.length=Z-z+R,U}})},a4d3:function(i,s,o){var a=o("23e7"),l=o("da84"),c=o("d066"),d=o("c430"),p=o("83ab"),v=o("4930"),g=o("fdbf"),x=o("d039"),E=o("5135"),k=o("e8b5"),A=o("861d"),D=o("825a"),j=o("7b0b"),Y=o("fc6a"),te=o("c04e"),ge=o("5c6c"),pe=o("7c73"),N=o("df75"),$=o("241c"),Z=o("057f"),B=o("7418"),I=o("06cf"),R=o("9bf2"),z=o("d1e7"),U=o("9112"),V=o("6eeb"),re=o("5692"),Q=o("f772"),_e=o("d012"),we=o("90e3"),Qe=o("b622"),ae=o("e538"),H=o("746f"),K=o("d44e"),me=o("69f3"),fe=o("b727").forEach,he=Q("hidden"),X="Symbol",J="prototype",De=Qe("toPrimitive"),Te=me.set,Je=me.getterFor(X),de=Object[J],ee=l.Symbol,se=c("JSON","stringify"),ce=I.f,ze=R.f,Ce=Z.f,ve=z.f,Ve=re("symbols"),Ye=re("op-symbols"),Ze=re("string-to-symbol-registry"),_t=re("symbol-to-string-registry"),We=re("wks"),ut=l.QObject,Vt=!ut||!ut[J]||!ut[J].findChild,tn=p&&x(function(){return pe(ze({},"a",{get:function(){return ze(this,"a",{value:7}).a}})).a!=7})?function(Qt,Cn,Mn){var tr=ce(de,Cn);tr&&delete de[Cn],ze(Qt,Cn,Mn),tr&&Qt!==de&&ze(de,Cn,tr)}:ze,bn=function(Qt,Cn){var Mn=Ve[Qt]=pe(ee[J]);return Te(Mn,{type:X,tag:Qt,description:Cn}),p||(Mn.description=Cn),Mn},et=g?function(Qt){return typeof Qt=="symbol"}:function(Qt){return Object(Qt)instanceof ee},at=function(Cn,Mn,tr){Cn===de&&at(Ye,Mn,tr),D(Cn);var yr=te(Mn,!0);return D(tr),E(Ve,yr)?(tr.enumerable?(E(Cn,he)&&Cn[he][yr]&&(Cn[he][yr]=!1),tr=pe(tr,{enumerable:ge(0,!1)})):(E(Cn,he)||ze(Cn,he,ge(1,{})),Cn[he][yr]=!0),tn(Cn,yr,tr)):ze(Cn,yr,tr)},it=function(Cn,Mn){D(Cn);var tr=Y(Mn),yr=N(tr).concat(Dn(tr));return fe(yr,function(xr){(!p||Kt.call(tr,xr))&&at(Cn,xr,tr[xr])}),Cn},zt=function(Cn,Mn){return Mn===void 0?pe(Cn):it(pe(Cn),Mn)},Kt=function(Cn){var Mn=te(Cn,!0),tr=ve.call(this,Mn);return this===de&&E(Ve,Mn)&&!E(Ye,Mn)?!1:tr||!E(this,Mn)||!E(Ve,Mn)||E(this,he)&&this[he][Mn]?tr:!0},Nn=function(Cn,Mn){var tr=Y(Cn),yr=te(Mn,!0);if(!(tr===de&&E(Ve,yr)&&!E(Ye,yr))){var xr=ce(tr,yr);return xr&&E(Ve,yr)&&!(E(tr,he)&&tr[he][yr])&&(xr.enumerable=!0),xr}},yn=function(Cn){var Mn=Ce(Y(Cn)),tr=[];return fe(Mn,function(yr){!E(Ve,yr)&&!E(_e,yr)&&tr.push(yr)}),tr},Dn=function(Cn){var Mn=Cn===de,tr=Ce(Mn?Ye:Y(Cn)),yr=[];return fe(tr,function(xr){E(Ve,xr)&&(!Mn||E(de,xr))&&yr.push(Ve[xr])}),yr};if(v||(ee=function(){if(this instanceof ee)throw TypeError("Symbol is not a constructor");var Cn=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),Mn=we(Cn),tr=function(yr){this===de&&tr.call(Ye,yr),E(this,he)&&E(this[he],Mn)&&(this[he][Mn]=!1),tn(this,Mn,ge(1,yr))};return p&&Vt&&tn(de,Mn,{configurable:!0,set:tr}),bn(Mn,Cn)},V(ee[J],"toString",function(){return Je(this).tag}),V(ee,"withoutSetter",function(Qt){return bn(we(Qt),Qt)}),z.f=Kt,R.f=at,I.f=Nn,$.f=Z.f=yn,B.f=Dn,ae.f=function(Qt){return bn(Qe(Qt),Qt)},p&&(ze(ee[J],"description",{configurable:!0,get:function(){return Je(this).description}}),d||V(de,"propertyIsEnumerable",Kt,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!v,sham:!v},{Symbol:ee}),fe(N(We),function(Qt){H(Qt)}),a({target:X,stat:!0,forced:!v},{for:function(Qt){var Cn=String(Qt);if(E(Ze,Cn))return Ze[Cn];var Mn=ee(Cn);return Ze[Cn]=Mn,_t[Mn]=Cn,Mn},keyFor:function(Cn){if(!et(Cn))throw TypeError(Cn+" is not a symbol");if(E(_t,Cn))return _t[Cn]},useSetter:function(){Vt=!0},useSimple:function(){Vt=!1}}),a({target:"Object",stat:!0,forced:!v,sham:!p},{create:zt,defineProperty:at,defineProperties:it,getOwnPropertyDescriptor:Nn}),a({target:"Object",stat:!0,forced:!v},{getOwnPropertyNames:yn,getOwnPropertySymbols:Dn}),a({target:"Object",stat:!0,forced:x(function(){B.f(1)})},{getOwnPropertySymbols:function(Cn){return B.f(j(Cn))}}),se){var er=!v||x(function(){var Qt=ee();return se([Qt])!="[null]"||se({a:Qt})!="{}"||se(Object(Qt))!="{}"});a({target:"JSON",stat:!0,forced:er},{stringify:function(Cn,Mn,tr){for(var yr=[Cn],xr=1,cr;arguments.length>xr;)yr.push(arguments[xr++]);if(cr=Mn,!(!A(Mn)&&Cn===void 0||et(Cn)))return k(Mn)||(Mn=function(Gr,zs){if(typeof cr=="function"&&(zs=cr.call(this,Gr,zs)),!et(zs))return zs}),yr[1]=Mn,se.apply(null,yr)}})}ee[J][De]||U(ee[J],De,ee[J].valueOf),K(ee,X),_e[he]=!0},a630:function(i,s,o){var a=o("23e7"),l=o("4df4"),c=o("1c7e"),d=!c(function(p){Array.from(p)});a({target:"Array",stat:!0,forced:d},{from:l})},a640:function(i,s,o){var a=o("d039");i.exports=function(l,c){var d=[][l];return!!d&&a(function(){d.call(null,c||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,a=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(l>0?a:o)(l)}},ab13:function(i,s,o){var a=o("b622"),l=a("match");i.exports=function(c){var d=/./;try{"/./"[c](d)}catch{try{return d[l]=!1,"/./"[c](d)}catch{}}return!1}},ac1f:function(i,s,o){var a=o("23e7"),l=o("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(i,s,o){var a=o("825a");i.exports=function(){var l=a(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("5135"),d=Object.defineProperty,p={},v=function(g){throw g};i.exports=function(g,x){if(c(p,g))return p[g];x||(x={});var E=[][g],k=c(x,"ACCESSORS")?x.ACCESSORS:!1,A=c(x,0)?x[0]:v,D=c(x,1)?x[1]:void 0;return p[g]=!!E&&!l(function(){if(k&&!a)return!0;var j={length:-1};k?d(j,1,{enumerable:!0,get:v}):j[1]=1,E.call(j,A,D)})}},ae93:function(i,s,o){var a=o("e163"),l=o("9112"),c=o("5135"),d=o("b622"),p=o("c430"),v=d("iterator"),g=!1,x=function(){return this},E,k,A;[].keys&&(A=[].keys(),"next"in A?(k=a(a(A)),k!==Object.prototype&&(E=k)):g=!0),E==null&&(E={}),!p&&!c(E,v)&&l(E,v,x),i.exports={IteratorPrototype:E,BUGGY_SAFARI_ITERATORS:g}},b041:function(i,s,o){var a=o("00ee"),l=o("f5df");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(i,s,o){var a=o("83ab"),l=o("9bf2").f,c=Function.prototype,d=c.toString,p=/^\s*function ([^ (]*)/,v="name";a&&!(v in c)&&l(c,v,{configurable:!0,get:function(){try{return d.call(this).match(p)[1]}catch{return""}}})},b622:function(i,s,o){var a=o("da84"),l=o("5692"),c=o("5135"),d=o("90e3"),p=o("4930"),v=o("fdbf"),g=l("wks"),x=a.Symbol,E=v?x:x&&x.withoutSetter||d;i.exports=function(k){return c(g,k)||(p&&c(x,k)?g[k]=x[k]:g[k]=E("Symbol."+k)),g[k]}},b64b:function(i,s,o){var a=o("23e7"),l=o("7b0b"),c=o("df75"),d=o("d039"),p=d(function(){c(1)});a({target:"Object",stat:!0,forced:p},{keys:function(g){return c(l(g))}})},b727:function(i,s,o){var a=o("0366"),l=o("44ad"),c=o("7b0b"),d=o("50c4"),p=o("65f0"),v=[].push,g=function(x){var E=x==1,k=x==2,A=x==3,D=x==4,j=x==6,Y=x==5||j;return function(te,ge,pe,N){for(var $=c(te),Z=l($),B=a(ge,pe,3),I=d(Z.length),R=0,z=N||p,U=E?z(te,I):k?z(te,0):void 0,V,re;I>R;R++)if((Y||R in Z)&&(V=Z[R],re=B(V,R,$),x)){if(E)U[R]=re;else if(re)switch(x){case 3:return!0;case 5:return V;case 6:return R;case 2:v.call(U,V)}else if(D)return!1}return j?-1:A||D?D:U}};i.exports={forEach:g(0),map:g(1),filter:g(2),some:g(3),every:g(4),find:g(5),findIndex:g(6)}},c04e:function(i,s,o){var a=o("861d");i.exports=function(l,c){if(!a(l))return l;var d,p;if(c&&typeof(d=l.toString)=="function"&&!a(p=d.call(l))||typeof(d=l.valueOf)=="function"&&!a(p=d.call(l))||!c&&typeof(d=l.toString)=="function"&&!a(p=d.call(l)))return p;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(a){return o.call(a).slice(8,-1)}},c6cd:function(i,s,o){var a=o("da84"),l=o("ce4e"),c="__core-js_shared__",d=a[c]||l(c,{});i.exports=d},c740:function(i,s,o){var a=o("23e7"),l=o("b727").findIndex,c=o("44d2"),d=o("ae40"),p="findIndex",v=!0,g=d(p);p in[]&&Array(1)[p](function(){v=!1}),a({target:"Array",proto:!0,forced:v||!g},{findIndex:function(E){return l(this,E,arguments.length>1?arguments[1]:void 0)}}),c(p)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var a=o("23e7"),l=o("4d64").indexOf,c=o("a640"),d=o("ae40"),p=[].indexOf,v=!!p&&1/[1].indexOf(1,-0)<0,g=c("indexOf"),x=d("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:v||!g||!x},{indexOf:function(k){return v?p.apply(this,arguments)||0:l(this,k,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var a=o("5135"),l=o("fc6a"),c=o("4d64").indexOf,d=o("d012");i.exports=function(p,v){var g=l(p),x=0,E=[],k;for(k in g)!a(d,k)&&a(g,k)&&E.push(k);for(;v.length>x;)a(g,k=v[x++])&&(~c(E,k)||E.push(k));return E}},caad:function(i,s,o){var a=o("23e7"),l=o("4d64").includes,c=o("44d2"),d=o("ae40"),p=d("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!p},{includes:function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(i,s,o){var a=o("da84"),l=o("861d"),c=a.document,d=l(c)&&l(c.createElement);i.exports=function(p){return d?c.createElement(p):{}}},ce4e:function(i,s,o){var a=o("da84"),l=o("9112");i.exports=function(c,d){try{l(a,c,d)}catch{a[c]=d}return d}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var a=o("428f"),l=o("da84"),c=function(d){return typeof d=="function"?d:void 0};i.exports=function(d,p){return arguments.length<2?c(a[d])||c(l[d]):a[d]&&a[d][p]||l[d]&&l[d][p]}},d1e7:function(i,s,o){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!a.call({1:2},1);s.f=c?function(p){var v=l(this,p);return!!v&&v.enumerable}:a},d28b:function(i,s,o){var a=o("746f");a("iterator")},d2bb:function(i,s,o){var a=o("825a"),l=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,d={},p;try{p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,p.call(d,[]),c=d instanceof Array}catch{}return function(g,x){return a(g),l(x),c?p.call(g,x):g.__proto__=x,g}}():void 0)},d3b7:function(i,s,o){var a=o("00ee"),l=o("6eeb"),c=o("b041");a||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(i,s,o){var a=o("9bf2").f,l=o("5135"),c=o("b622"),d=c("toStringTag");i.exports=function(p,v,g){p&&!l(p=g?p:p.prototype,d)&&a(p,d,{configurable:!0,value:v})}},d58f:function(i,s,o){var a=o("1c0b"),l=o("7b0b"),c=o("44ad"),d=o("50c4"),p=function(v){return function(g,x,E,k){a(x);var A=l(g),D=c(A),j=d(A.length),Y=v?j-1:0,te=v?-1:1;if(E<2)for(;;){if(Y in D){k=D[Y],Y+=te;break}if(Y+=te,v?Y<0:j<=Y)throw TypeError("Reduce of empty array with no initial value")}for(;v?Y>=0:j>Y;Y+=te)Y in D&&(k=x(k,D[Y],Y,A));return k}};i.exports={left:p(!1),right:p(!0)}},d784:function(i,s,o){o("ac1f");var a=o("6eeb"),l=o("d039"),c=o("b622"),d=o("9263"),p=o("9112"),v=c("species"),g=!l(function(){var D=/./;return D.exec=function(){var j=[];return j.groups={a:"7"},j},"".replace(D,"$<a>")!=="7"}),x=function(){return"a".replace(/./,"$0")==="$0"}(),E=c("replace"),k=function(){return/./[E]?/./[E]("a","$0")==="":!1}(),A=!l(function(){var D=/(?:)/,j=D.exec;D.exec=function(){return j.apply(this,arguments)};var Y="ab".split(D);return Y.length!==2||Y[0]!=="a"||Y[1]!=="b"});i.exports=function(D,j,Y,te){var ge=c(D),pe=!l(function(){var R={};return R[ge]=function(){return 7},""[D](R)!=7}),N=pe&&!l(function(){var R=!1,z=/a/;return D==="split"&&(z={},z.constructor={},z.constructor[v]=function(){return z},z.flags="",z[ge]=/./[ge]),z.exec=function(){return R=!0,null},z[ge](""),!R});if(!pe||!N||D==="replace"&&!(g&&x&&!k)||D==="split"&&!A){var $=/./[ge],Z=Y(ge,""[D],function(R,z,U,V,re){return z.exec===d?pe&&!re?{done:!0,value:$.call(z,U,V)}:{done:!0,value:R.call(U,z,V)}:{done:!1}},{REPLACE_KEEPS_$0:x,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:k}),B=Z[0],I=Z[1];a(String.prototype,D,B),a(RegExp.prototype,ge,j==2?function(R,z){return I.call(R,this,z)}:function(R){return I.call(R,this)})}te&&p(RegExp.prototype[ge],"sham",!0)}},d81d:function(i,s,o){var a=o("23e7"),l=o("b727").map,c=o("1dde"),d=o("ae40"),p=c("map"),v=d("map");a({target:"Array",proto:!0,forced:!p||!v},{map:function(x){return l(this,x,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(a){var l=function(c){return c&&c.Math==Math&&c};i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("56ef"),d=o("fc6a"),p=o("06cf"),v=o("8418");a({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(x){for(var E=d(x),k=p.f,A=c(E),D={},j=0,Y,te;A.length>j;)te=k(E,Y=A[j++]),te!==void 0&&v(D,Y,te);return D}})},dbf1:function(i,s,o){(function(a){o.d(s,"a",function(){return c});function l(){return typeof window<"u"?window.console:a.console}var c=l()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("e260"),d=o("9112"),p=o("b622"),v=p("iterator"),g=p("toStringTag"),x=c.values;for(var E in l){var k=a[E],A=k&&k.prototype;if(A){if(A[v]!==x)try{d(A,v,x)}catch{A[v]=x}if(A[g]||d(A,g,E),l[E]){for(var D in c)if(A[D]!==c[D])try{d(A,D,c[D])}catch{A[D]=c[D]}}}}},df75:function(i,s,o){var a=o("ca84"),l=o("7839");i.exports=Object.keys||function(d){return a(d,l)}},e01a:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("da84"),d=o("5135"),p=o("861d"),v=o("9bf2").f,g=o("e893"),x=c.Symbol;if(l&&typeof x=="function"&&(!("description"in x.prototype)||x().description!==void 0)){var E={},k=function(){var ge=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),pe=this instanceof k?new x(ge):ge===void 0?x():x(ge);return ge===""&&(E[pe]=!0),pe};g(k,x);var A=k.prototype=x.prototype;A.constructor=k;var D=A.toString,j=String(x("test"))=="Symbol(test)",Y=/^Symbol\((.*)\)[^)]+$/;v(A,"description",{configurable:!0,get:function(){var ge=p(this)?this.valueOf():this,pe=D.call(ge);if(d(E,ge))return"";var N=j?pe.slice(7,-1):pe.replace(Y,"$1");return N===""?void 0:N}}),a({global:!0,forced:!0},{Symbol:k})}},e163:function(i,s,o){var a=o("5135"),l=o("7b0b"),c=o("f772"),d=o("e177"),p=c("IE_PROTO"),v=Object.prototype;i.exports=d?Object.getPrototypeOf:function(g){return g=l(g),a(g,p)?g[p]:typeof g.constructor=="function"&&g instanceof g.constructor?g.constructor.prototype:g instanceof Object?v:null}},e177:function(i,s,o){var a=o("d039");i.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(i,s,o){var a=o("fc6a"),l=o("44d2"),c=o("3f8c"),d=o("69f3"),p=o("7dd0"),v="Array Iterator",g=d.set,x=d.getterFor(v);i.exports=p(Array,"Array",function(E,k){g(this,{type:v,target:a(E),index:0,kind:k})},function(){var E=x(this),k=E.target,A=E.kind,D=E.index++;return!k||D>=k.length?(E.target=void 0,{value:void 0,done:!0}):A=="keys"?{value:D,done:!1}:A=="values"?{value:k[D],done:!1}:{value:[D,k[D]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("fc6a"),d=o("06cf").f,p=o("83ab"),v=l(function(){d(1)}),g=!p||v;a({target:"Object",stat:!0,forced:g,sham:!p},{getOwnPropertyDescriptor:function(E,k){return d(c(E),k)}})},e538:function(i,s,o){var a=o("b622");s.f=a},e893:function(i,s,o){var a=o("5135"),l=o("56ef"),c=o("06cf"),d=o("9bf2");i.exports=function(p,v){for(var g=l(v),x=d.f,E=c.f,k=0;k<g.length;k++){var A=g[k];a(p,A)||x(p,A,E(v,A))}}},e8b5:function(i,s,o){var a=o("c6b6");i.exports=Array.isArray||function(c){return a(c)=="Array"}},e95a:function(i,s,o){var a=o("b622"),l=o("3f8c"),c=a("iterator"),d=Array.prototype;i.exports=function(p){return p!==void 0&&(l.Array===p||d[c]===p)}},f5df:function(i,s,o){var a=o("00ee"),l=o("c6b6"),c=o("b622"),d=c("toStringTag"),p=l(function(){return arguments}())=="Arguments",v=function(g,x){try{return g[x]}catch{}};i.exports=a?l:function(g){var x,E,k;return g===void 0?"Undefined":g===null?"Null":typeof(E=v(x=Object(g),d))=="string"?E:p?l(x):(k=l(x))=="Object"&&typeof x.callee=="function"?"Arguments":k}},f772:function(i,s,o){var a=o("5692"),l=o("90e3"),c=a("keys");i.exports=function(d){return c[d]||(c[d]=l(d))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var a=window.document.currentScript;{var l=o("8875");a=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(o.p=c[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function d(et,at,it){return at in et?Object.defineProperty(et,at,{value:it,enumerable:!0,configurable:!0,writable:!0}):et[at]=it,et}function p(et,at){var it=Object.keys(et);if(Object.getOwnPropertySymbols){var zt=Object.getOwnPropertySymbols(et);at&&(zt=zt.filter(function(Kt){return Object.getOwnPropertyDescriptor(et,Kt).enumerable})),it.push.apply(it,zt)}return it}function v(et){for(var at=1;at<arguments.length;at++){var it=arguments[at]!=null?arguments[at]:{};at%2?p(Object(it),!0).forEach(function(zt){d(et,zt,it[zt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(it)):p(Object(it)).forEach(function(zt){Object.defineProperty(et,zt,Object.getOwnPropertyDescriptor(it,zt))})}return et}function g(et){if(Array.isArray(et))return et}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function x(et,at){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(et)))){var it=[],zt=!0,Kt=!1,Nn=void 0;try{for(var yn=et[Symbol.iterator](),Dn;!(zt=(Dn=yn.next()).done)&&(it.push(Dn.value),!(at&&it.length===at));zt=!0);}catch(er){Kt=!0,Nn=er}finally{try{!zt&&yn.return!=null&&yn.return()}finally{if(Kt)throw Nn}}return it}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function E(et,at){(at==null||at>et.length)&&(at=et.length);for(var it=0,zt=new Array(at);it<at;it++)zt[it]=et[it];return zt}function k(et,at){if(et){if(typeof et=="string")return E(et,at);var it=Object.prototype.toString.call(et).slice(8,-1);if(it==="Object"&&et.constructor&&(it=et.constructor.name),it==="Map"||it==="Set")return Array.from(et);if(it==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(it))return E(et,at)}}function A(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(et,at){return g(et)||x(et,at)||k(et,at)||A()}function j(et){if(Array.isArray(et))return E(et)}function Y(et){if(typeof Symbol<"u"&&Symbol.iterator in Object(et))return Array.from(et)}function te(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ge(et){return j(et)||Y(et)||k(et)||te()}var pe=o("a352"),N=o.n(pe);function $(et){et.parentElement!==null&&et.parentElement.removeChild(et)}function Z(et,at,it){var zt=it===0?et.children[0]:et.children[it-1].nextSibling;et.insertBefore(at,zt)}var B=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function I(et){var at=Object.create(null);return function(zt){var Kt=at[zt];return Kt||(at[zt]=et(zt))}}var R=/-(\w)/g,z=I(function(et){return et.replace(R,function(at,it){return it.toUpperCase()})});o("5db7"),o("73d9");var U=["Start","Add","Remove","Update","End"],V=["Choose","Unchoose","Sort","Filter","Clone"],re=["Move"],Q=[re,U,V].flatMap(function(et){return et}).map(function(et){return"on".concat(et)}),_e={manage:re,manageAndEmit:U,emit:V};function we(et){return Q.indexOf(et)!==-1}o("caad"),o("2ca0");var Qe=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function ae(et){return Qe.includes(et)}function H(et){return["transition-group","TransitionGroup"].includes(et)}function K(et){return["id","class","role","style"].includes(et)||et.startsWith("data-")||et.startsWith("aria-")||et.startsWith("on")}function me(et){return et.reduce(function(at,it){var zt=D(it,2),Kt=zt[0],Nn=zt[1];return at[Kt]=Nn,at},{})}function fe(et){var at=et.$attrs,it=et.componentData,zt=it===void 0?{}:it,Kt=me(Object.entries(at).filter(function(Nn){var yn=D(Nn,2),Dn=yn[0];return yn[1],K(Dn)}));return v(v({},Kt),zt)}function he(et){var at=et.$attrs,it=et.callBackBuilder,zt=me(X(at));Object.entries(it).forEach(function(Nn){var yn=D(Nn,2),Dn=yn[0],er=yn[1];_e[Dn].forEach(function(Qt){zt["on".concat(Qt)]=er(Qt)})});var Kt="[data-draggable]".concat(zt.draggable||"");return v(v({},zt),{},{draggable:Kt})}function X(et){return Object.entries(et).filter(function(at){var it=D(at,2),zt=it[0];return it[1],!K(zt)}).map(function(at){var it=D(at,2),zt=it[0],Kt=it[1];return[z(zt),Kt]}).filter(function(at){var it=D(at,2),zt=it[0];return it[1],!we(zt)})}o("c740");function J(et,at){if(!(et instanceof at))throw new TypeError("Cannot call a class as a function")}function De(et,at){for(var it=0;it<at.length;it++){var zt=at[it];zt.enumerable=zt.enumerable||!1,zt.configurable=!0,"value"in zt&&(zt.writable=!0),Object.defineProperty(et,zt.key,zt)}}function Te(et,at,it){return at&&De(et.prototype,at),et}var Je=function(at){var it=at.el;return it},de=function(at,it){return at.__draggable_context=it},ee=function(at){return at.__draggable_context},se=function(){function et(at){var it=at.nodes,zt=it.header,Kt=it.default,Nn=it.footer,yn=at.root,Dn=at.realList;J(this,et),this.defaultNodes=Kt,this.children=[].concat(ge(zt),ge(Kt),ge(Nn)),this.externalComponent=yn.externalComponent,this.rootTransition=yn.transition,this.tag=yn.tag,this.realList=Dn}return Te(et,[{key:"render",value:function(it,zt){var Kt=this.tag,Nn=this.children,yn=this._isRootComponent,Dn=yn?{default:function(){return Nn}}:Nn;return it(Kt,zt,Dn)}},{key:"updated",value:function(){var it=this.defaultNodes,zt=this.realList;it.forEach(function(Kt,Nn){de(Je(Kt),{element:zt[Nn],index:Nn})})}},{key:"getUnderlyingVm",value:function(it){return ee(it)}},{key:"getVmIndexFromDomIndex",value:function(it,zt){var Kt=this.defaultNodes,Nn=Kt.length,yn=zt.children,Dn=yn.item(it);if(Dn===null)return Nn;var er=ee(Dn);if(er)return er.index;if(Nn===0)return 0;var Qt=Je(Kt[0]),Cn=ge(yn).findIndex(function(Mn){return Mn===Qt});return it<Cn?0:Nn}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),et}(),ce=o("8bbf");function ze(et,at){var it=et[at];return it?it():[]}function Ce(et){var at=et.$slots,it=et.realList,zt=et.getKey,Kt=it||[],Nn=["header","footer"].map(function(Mn){return ze(at,Mn)}),yn=D(Nn,2),Dn=yn[0],er=yn[1],Qt=at.item;if(!Qt)throw new Error("draggable element must have an item slot");var Cn=Kt.flatMap(function(Mn,tr){return Qt({element:Mn,index:tr}).map(function(yr){return yr.key=zt(Mn),yr.props=v(v({},yr.props||{}),{},{"data-draggable":!0}),yr})});if(Cn.length!==Kt.length)throw new Error("Item slot must have only one child");return{header:Dn,footer:er,default:Cn}}function ve(et){var at=H(et),it=!ae(et)&&!at;return{transition:at,externalComponent:it,tag:it?Object(ce.resolveComponent)(et):at?ce.TransitionGroup:et}}function Ve(et){var at=et.$slots,it=et.tag,zt=et.realList,Kt=et.getKey,Nn=Ce({$slots:at,realList:zt,getKey:Kt}),yn=ve(it);return new se({nodes:Nn,root:yn,realList:zt})}function Ye(et,at){var it=this;Object(ce.nextTick)(function(){return it.$emit(et.toLowerCase(),at)})}function Ze(et){var at=this;return function(it,zt){if(at.realList!==null)return at["onDrag".concat(et)](it,zt)}}function _t(et){var at=this,it=Ze.call(this,et);return function(zt,Kt){it.call(at,zt,Kt),Ye.call(at,et,zt)}}var We=null,ut={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(at){return at}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Vt=["update:modelValue","change"].concat(ge([].concat(ge(_e.manageAndEmit),ge(_e.emit)).map(function(et){return et.toLowerCase()}))),tn=Object(ce.defineComponent)({name:"draggable",inheritAttrs:!1,props:ut,emits:Vt,data:function(){return{error:!1}},render:function(){try{this.error=!1;var at=this.$slots,it=this.$attrs,zt=this.tag,Kt=this.componentData,Nn=this.realList,yn=this.getKey,Dn=Ve({$slots:at,tag:zt,realList:Nn,getKey:yn});this.componentStructure=Dn;var er=fe({$attrs:it,componentData:Kt});return Dn.render(ce.h,er)}catch(Qt){return this.error=!0,Object(ce.h)("pre",{style:{color:"red"}},Qt.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&B.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var at=this;if(!this.error){var it=this.$attrs,zt=this.$el,Kt=this.componentStructure;Kt.updated();var Nn=he({$attrs:it,callBackBuilder:{manageAndEmit:function(er){return _t.call(at,er)},emit:function(er){return Ye.bind(at,er)},manage:function(er){return Ze.call(at,er)}}}),yn=zt.nodeType===1?zt:zt.parentElement;this._sortable=new N.a(yn,Nn),this.targetDomElement=yn,yn.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var at=this.list;return at||this.modelValue},getKey:function(){var at=this.itemKey;return typeof at=="function"?at:function(it){return it[at]}}},watch:{$attrs:{handler:function(at){var it=this._sortable;it&&X(at).forEach(function(zt){var Kt=D(zt,2),Nn=Kt[0],yn=Kt[1];it.option(Nn,yn)})},deep:!0}},methods:{getUnderlyingVm:function(at){return this.componentStructure.getUnderlyingVm(at)||null},getUnderlyingPotencialDraggableComponent:function(at){return at.__draggable_component__},emitChanges:function(at){var it=this;Object(ce.nextTick)(function(){return it.$emit("change",at)})},alterList:function(at){if(this.list){at(this.list);return}var it=ge(this.modelValue);at(it),this.$emit("update:modelValue",it)},spliceList:function(){var at=arguments,it=function(Kt){return Kt.splice.apply(Kt,ge(at))};this.alterList(it)},updatePosition:function(at,it){var zt=function(Nn){return Nn.splice(it,0,Nn.splice(at,1)[0])};this.alterList(zt)},getRelatedContextFromMoveEvent:function(at){var it=at.to,zt=at.related,Kt=this.getUnderlyingPotencialDraggableComponent(it);if(!Kt)return{component:Kt};var Nn=Kt.realList,yn={list:Nn,component:Kt};if(it!==zt&&Nn){var Dn=Kt.getUnderlyingVm(zt)||{};return v(v({},Dn),yn)}return yn},getVmIndexFromDomIndex:function(at){return this.componentStructure.getVmIndexFromDomIndex(at,this.targetDomElement)},onDragStart:function(at){this.context=this.getUnderlyingVm(at.item),at.item._underlying_vm_=this.clone(this.context.element),We=at.item},onDragAdd:function(at){var it=at.item._underlying_vm_;if(it!==void 0){$(at.item);var zt=this.getVmIndexFromDomIndex(at.newIndex);this.spliceList(zt,0,it);var Kt={element:it,newIndex:zt};this.emitChanges({added:Kt})}},onDragRemove:function(at){if(Z(this.$el,at.item,at.oldIndex),at.pullMode==="clone"){$(at.clone);return}var it=this.context,zt=it.index,Kt=it.element;this.spliceList(zt,1);var Nn={element:Kt,oldIndex:zt};this.emitChanges({removed:Nn})},onDragUpdate:function(at){$(at.item),Z(at.from,at.item,at.oldIndex);var it=this.context.index,zt=this.getVmIndexFromDomIndex(at.newIndex);this.updatePosition(it,zt);var Kt={element:this.context.element,oldIndex:it,newIndex:zt};this.emitChanges({moved:Kt})},computeFutureIndex:function(at,it){if(!at.element)return 0;var zt=ge(it.to.children).filter(function(Dn){return Dn.style.display!=="none"}),Kt=zt.indexOf(it.related),Nn=at.component.getVmIndexFromDomIndex(Kt),yn=zt.indexOf(We)!==-1;return yn||!it.willInsertAfter?Nn:Nn+1},onDragMove:function(at,it){var zt=this.move,Kt=this.realList;if(!zt||!Kt)return!0;var Nn=this.getRelatedContextFromMoveEvent(at),yn=this.computeFutureIndex(Nn,at),Dn=v(v({},this.context),{},{futureIndex:yn}),er=v(v({},at),{},{relatedContext:Nn,draggedContext:Dn});return zt(er,it)},onDragEnd:function(){We=null}}}),bn=tn;s.default=bn},fb6a:function(i,s,o){var a=o("23e7"),l=o("861d"),c=o("e8b5"),d=o("23cb"),p=o("50c4"),v=o("fc6a"),g=o("8418"),x=o("b622"),E=o("1dde"),k=o("ae40"),A=E("slice"),D=k("slice",{ACCESSORS:!0,0:0,1:2}),j=x("species"),Y=[].slice,te=Math.max;a({target:"Array",proto:!0,forced:!A||!D},{slice:function(pe,N){var $=v(this),Z=p($.length),B=d(pe,Z),I=d(N===void 0?Z:N,Z),R,z,U;if(c($)&&(R=$.constructor,typeof R=="function"&&(R===Array||c(R.prototype))?R=void 0:l(R)&&(R=R[j],R===null&&(R=void 0)),R===Array||R===void 0))return Y.call($,B,I);for(z=new(R===void 0?Array:R)(te(I-B,0)),U=0;B<I;B++,U++)B in $&&g(z,U,$[B]);return z.length=U,z}})},fc6a:function(i,s,o){var a=o("44ad"),l=o("1d80");i.exports=function(c){return a(l(c))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var a=o("4930");i.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(uP);var zK=uP.exports;const $K=j_(zK),VK={class:"h-full bg-gray-50"},UK={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},HK={class:"sm:flex sm:items-center"},WK={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},GK={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10"},qK={class:"mt-6 bg-white shadow rounded-lg p-4"},YK={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ZK=["value"],KK={key:0,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},XK={key:1,class:"mt-6 overflow-x-auto pb-4"},JK={key:0,class:"p-6 text-center bg-white shadow rounded-lg mb-4"},QK={class:"flex space-x-4 min-w-max"},eX={class:"bg-white rounded-lg shadow overflow-hidden"},tX={class:"flex items-center"},nX={class:"flex items-center"},rX={class:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full"},iX={class:"p-2 max-h-[calc(100vh-250px)] overflow-y-auto"},sX={class:"min-h-[100px] draggable-container"},oX={class:"note-container"},aX={class:"bg-white rounded-md shadow-sm border border-gray-200 overflow-hidden"},lX={class:"flex items-center"},uX={key:0,class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},cX={class:"text-sm font-medium text-gray-900 truncate"},hX={class:"px-3 py-2"},dX={class:"text-sm text-gray-500 line-clamp-2"},fX={class:"px-3 py-2 bg-gray-50 border-t border-gray-100 flex justify-between items-center"},pX={class:"text-xs text-gray-500"},gX={class:"flex space-x-1"},mX={key:0,class:"text-xs text-primary-500 flex items-center mr-1",title:"Note géolocalisée"},vX={key:1,class:"text-xs text-gray-400 flex items-center mr-1",title:"Note simple"},yX=["onClick"],bX=["onClick"],_X=["onClick"],wX=["onClick"],xX={key:0,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},LX={class:"flex items-center justify-center min-h-screen w-full"},SX={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},CX={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3 p-4 md:px-6"},EX=js({__name:"NotesView",setup(t){const e=Nm(),n=su(),r=wf(),i=Tp(),s=St(!0),o=St(!1),a=St(!1),l=St(null),c=St(null),d=St("info"),p=St(null),v=St(window.innerWidth<768),g=()=>{v.value=window.innerWidth<768},x=Qn(()=>{const H=r.getSortedColumns;return console.log("[NotesView][columnsForDrag] Colonnes triées:",H),H}),E=[{id:ts.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:ts.COMPANY,title:"Entreprise",description:"Visible uniquement par l'entreprise"},{id:ts.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et ses salariés"},{id:ts.VISITOR,title:"Visiteurs",description:"Visible par tous (entreprise, salariés et visiteurs)"}],k=ou({search:"",date:"",accessLevel:""});function A(H){if(!H)return"Date non définie";try{const K=new Date(H);return isNaN(K.getTime())?(console.warn("[safeFormatDate] Date invalide:",H),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(K)}catch(K){return console.error("[safeFormatDate] Erreur lors du formatage de la date:",K),"Date invalide"}}function D(H){if(!H)return null;try{const K=new Date(H);return isNaN(K.getTime())?(console.warn("[safeDate] Date invalide:",H),null):K}catch(K){return console.error("[safeDate] Erreur lors de la création de la date:",K),null}}function j(H){return A(H)}const Y=Qn(()=>{let H=r.getAccessibleNotes;if(k.search){const K=k.search.toLowerCase();H=H.filter(me=>me.title.toLowerCase().includes(K)||me.description.toLowerCase().includes(K))}if(k.accessLevel&&(H=H.filter(K=>K.accessLevel===k.accessLevel)),k.date){const K=new Date;K.setHours(0,0,0,0);const me=new Date(K);me.setDate(K.getDate()-K.getDay());const fe=new Date(K.getFullYear(),K.getMonth(),1);H=H.filter(he=>{const X=D(he.createdAt);return X?k.date==="today"?X>=K:k.date==="week"?X>=me:k.date==="month"?X>=fe:!0:!1})}return H}),te=Qn(()=>H=>r.getNotesByColumn(H));function ge(H){if(H==null)return"Non défini";switch(H){case ts.PRIVATE:return"Privé";case ts.COMPANY:return"Entreprise";case ts.EMPLOYEE:return"Salariés";case ts.VISITOR:return"Visiteurs";default:return"Non défini"}}function pe(H){if(H==null)return"#9CA3AF";switch(H){case ts.PRIVATE:return"#9CA3AF";case ts.COMPANY:return"#EF4444";case ts.EMPLOYEE:return"#F59E0B";case ts.VISITOR:return"#10B981";default:return"#6B7280"}}mo(()=>{console.log("[NotesView] Composant monté"),N().then(()=>{console.log("[NotesView] Données chargées avec succès")}).catch(H=>{console.error("[NotesView] Erreur lors du chargement des données:",H),n.error("Erreur lors du chargement des données")}),document.addEventListener("click",ae),window.addEventListener("resize",g)});async function N(){console.log(`
[NotesView][loadInitialData] Début du chargement des données`);try{s.value=!0,console.log("[NotesView][loadInitialData] Chargement des colonnes..."),await r.loadColumns(),console.log("[NotesView][loadInitialData] Colonnes chargées:",r.columns),console.log("[NotesView][loadInitialData] Chargement des notes...");const H=await Ea.getNotes();console.log("[NotesView][loadInitialData] Notes reçues:",H.data),H.data.length>0?(console.log("[NotesView][loadInitialData] Détails des notes:"),H.data.forEach((he,X)=>{console.log(`Note ${X+1}:`,{id:he.id,title:he.title,columnId:he.column||he.column_id,access_level:he.access_level,column:he.column})})):console.warn("[NotesView][loadInitialData] Aucune note reçue du backend!");const K=r.columns.map(he=>he.id),me=H.data.filter(he=>{const X=(he.column||he.column_id||"").toString();return X===""||!K.includes(X)});if(me.length>0){console.warn(`[NotesView][loadInitialData] ${me.length} notes avec des colonnes invalides:`,me),console.log("[NotesView][loadInitialData] Assignation des notes à la colonne À faire (2)");for(const he of me)try{await Ea.updateNote(he.id,{column:"2"})}catch(X){console.error(`[NotesView][loadInitialData] Erreur lors de l'assignation de la note ${he.id} à la colonne À faire:`,X)}}const fe=H.data.map(he=>({id:he.id,title:he.title,description:he.description,location:he.location,columnId:(he.column||he.column_id||"2").toString(),access_level:he.access_level,style:he.style||{},comments:he.comments||[],photos:he.photos||[],order:he.order||0,createdAt:he.created_at,updatedAt:he.updated_at}));r.notes.length=0,fe.forEach(he=>{r.addNote(he)}),console.log("[NotesView][loadInitialData] Notes chargées dans le store");for(const he of r.columns){const X=r.getNotesByColumn(he.id);console.log(`[NotesView][loadInitialData] Colonne ${he.title} (${he.id}): ${X.length} notes`),X.length>0&&X.forEach(J=>{console.log(`  - Note ID=${J.id}, Titre="${J.title}", Niveau d'accès=${J.accessLevel}, Colonne=${J.columnId}`)})}}catch(H){console.error("[NotesView][loadInitialData] Erreur:",H),n.error("Erreur lors du chargement des données")}finally{s.value=!1,console.log("[NotesView][loadInitialData] Chargement terminé")}}function $(){e.push({path:"/",query:{tool:"Note"}})}async function Z(H){if(!H.location){n.warning("Cette note n'est pas géolocalisée");return}try{const me=(await Ea.getNote(H.id)).data,fe=me.plan;console.log("[NotesView][viewOnMap] Détails de la note récupérés:",me),e.push({path:"/",query:{lat:Array.isArray(H.location)?H.location[0].toString():H.location.coordinates[1].toString(),lng:Array.isArray(H.location)?H.location[1].toString():H.location.coordinates[0].toString(),noteId:H.id.toString(),planId:fe?fe.toString():void 0}})}catch(K){console.error("[NotesView][viewOnMap] Erreur lors de la récupération des détails de la note:",K),n.error("Erreur lors de l'ouverture de la note sur la carte")}}function B(H){if(!H.location){n.warning("Cette note n'est pas géolocalisée");return}let K,me;Array.isArray(H.location)?(K=H.location[0],me=H.location[1]):(K=H.location.coordinates[1],me=H.location.coordinates[0]);const fe=`https://www.google.com/maps/dir/?api=1&destination=${K},${me}`;window.open(fe,"_blank")}function I(H){c.value=JSON.parse(JSON.stringify(H)),d.value="info",a.value=!0}async function R(H){if(console.log("[NotesView][handleNoteSave] Note sauvegardée:",H),H&&H.id){const K=r.notes.find(me=>me.id===H.id);K&&(!H.comments&&K.comments&&(H.comments=K.comments),!H.photos&&K.photos&&(H.photos=K.photos))}if(a.value=!1,p.value&&c.value)try{const K={location:c.value.location,name:c.value.title,description:c.value.description,columnId:c.value.columnId,accessLevel:c.value.accessLevel,style:c.value.style,comments:c.value.comments||[],photos:c.value.photos||[],order:c.value.order,createdAt:c.value.createdAt,updatedAt:new Date().toISOString()},me=i.elements.findIndex(fe=>{var he;return fe.type_forme==="Note"&&fe.id===((he=c.value)==null?void 0:he.id)});me!==-1?i.elements[me].data=K:i.elements.push({id:c.value.id,type_forme:"Note",data:K}),await i.saveToPlan(p.value),n.success("Note sauvegardée et plan mis à jour avec succès")}catch(K){console.error("Erreur lors de la sauvegarde de la note:",K),n.error("Erreur lors de la sauvegarde de la note")}}function z(H){l.value=H,o.value=!0}async function U(){if(l.value)try{try{await Ea.deleteNote(l.value.id)}catch(H){if(H.response&&H.response.status===404)console.log("[NotesView][deleteNote] Note non trouvée dans le backend (404), suppression locale uniquement");else throw H}r.removeNote(l.value.id),n.success("Note supprimée avec succès")}catch(H){console.error("Erreur lors de la suppression de la note:",H),n.error("Erreur lors de la suppression de la note")}finally{o.value=!1,l.value=null}}async function V(H,K){console.log("[NotesView][onDragChange] Événement:",H),console.log("[NotesView][onDragChange] Colonne cible:",K);try{if(H.added){const{element:me}=H.added;console.log("[NotesView][onDragChange] Note à déplacer:",me);const fe=typeof me=="object"&&me.id?me.id:null;if(!fe)throw console.error("[NotesView][onDragChange] ID de note invalide:",me),new Error("ID de note invalide");r.moveNote(fe,K);const X=te.value(K).map(De=>De.id);r.reorderNotes(K,X);const J=r.getColumnById(K);n.success(`Note déplacée vers ${(J==null?void 0:J.title)||"une autre colonne"}`),await re(fe,{columnId:K})}if(H.moved){const me=te.value(K),fe=me.map(he=>he.id);r.reorderNotes(K,fe),n.success("Ordre des notes mis à jour");for(const[he,X]of me.entries())await re(X.id,{order:he})}}catch(me){console.error("[NotesView][onDragChange] Erreur:",me),n.error("Une erreur est survenue lors du déplacement de la note")}}async function re(H,K){console.log("[NotesView][updateNoteInBackend] Mise à jour de la note:",H,K);try{const me=r.notes.find(X=>X.id===H);if(!me){console.error("[NotesView][updateNoteInBackend] Note non trouvée:",H);return}const fe={...K};if(K.columnId){const X=r.getColumnById(K.columnId);X?(console.log(`[NotesView][updateNoteInBackend] Mise à jour de la colonne: ${X.id} (${X.title})`),fe.column=X.id,delete fe.columnId,delete fe.column_id):console.warn(`[NotesView][updateNoteInBackend] Colonne non trouvée: ${K.columnId}`)}const he={...me,...fe,updatedAt:new Date().toISOString()};console.log("[NotesView][updateNoteInBackend] Données envoyées au backend:",he),await Ea.updateNote(H,he),console.log("[NotesView][updateNoteInBackend] Note mise à jour avec succès")}catch(me){throw console.error("[NotesView][updateNoteInBackend] Erreur:",me),me}}function Q(){c.value={id:"",title:"Nouvelle note",description:"",location:null,columnId:r.getDefaultColumn.id,accessLevel:ts.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:[],photos:[]},a.value=!0,d.value="info"}const _e=St(null),we=St(!1);function Qe(){we.value=!we.value}function ae(H){_e.value&&!_e.value.contains(H.target)&&(we.value=!1)}return mo(()=>{document.addEventListener("click",ae),window.addEventListener("resize",g)}),Td(()=>{document.removeEventListener("click",ae),window.removeEventListener("resize",g)}),(H,K)=>{var me,fe;return Oe(),Be("div",VK,[S("div",UK,[S("div",HK,[K[6]||(K[6]=S("div",{class:"sm:flex-auto"},[S("h1",{class:"text-2xl font-semibold text-gray-900"},"Notes"),S("p",{class:"mt-2 text-sm text-gray-700"}," Liste de toutes vos notes. ")],-1)),S("div",WK,[S("div",{class:"relative",ref_key:"dropdownRef",ref:_e},[S("button",{onClick:Qe,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},K[5]||(K[5]=[Kr(" Créer "),S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])),we.value?(Oe(),Be("div",GK,[S("div",{class:"py-1"},[S("button",{onClick:Q,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note simple "),S("button",{onClick:$,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note géolocalisée ")])])):Jt("",!0)],512)])]),S("div",qK,[S("div",YK,[S("div",null,[K[7]||(K[7]=S("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),Tn(S("input",{type:"text",id:"search","onUpdate:modelValue":K[0]||(K[0]=he=>k.search=he),placeholder:"Rechercher par titre ou description...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[zr,k.search]])]),S("div",null,[K[9]||(K[9]=S("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),Tn(S("select",{id:"date","onUpdate:modelValue":K[1]||(K[1]=he=>k.date=he),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},K[8]||(K[8]=[S("option",{value:""},"Toutes les dates",-1),S("option",{value:"today"},"Aujourd'hui",-1),S("option",{value:"week"},"Cette semaine",-1),S("option",{value:"month"},"Ce mois",-1)]),512),[[ns,k.date]])]),S("div",null,[K[11]||(K[11]=S("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accès",-1)),Tn(S("select",{id:"accessLevel","onUpdate:modelValue":K[2]||(K[2]=he=>k.accessLevel=he),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[K[10]||(K[10]=S("option",{value:""},"Tous les niveaux",-1)),(Oe(),Be(Sn,null,sr(E,he=>S("option",{key:he.id,value:he.id},kt(he.title),9,ZK)),64))],512),[[ns,k.accessLevel]])])])]),s.value?(Oe(),Be("div",KK,K[12]||(K[12]=[S("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),S("p",{class:"mt-2 text-sm text-gray-500"},"Chargement des notes...",-1)]))):(Oe(),Be("div",XK,[Y.value.length===0&&x.value.length===0?(Oe(),Be("div",JK,K[13]||(K[13]=[S("p",{class:"text-sm text-gray-500"},"Aucune note ni colonne trouvée",-1)]))):Jt("",!0),S("div",QK,[(Oe(!0),Be(Sn,null,sr(x.value,he=>(Oe(),Be("div",{key:he.id,class:"column-wrapper w-80 flex-shrink-0"},[S("div",eX,[S("div",{class:"p-3 flex items-center justify-between no-select",style:ru({backgroundColor:he.color+"20",borderBottom:"2px solid "+he.color})},[S("div",tX,[S("h3",{class:"text-sm font-semibold",style:ru({color:he.color})},kt(he.title),5)]),S("div",nX,[S("span",rX,kt(te.value(he.id).length),1)])],4),S("div",iX,[S("div",sX,[mi(Yn($K),{list:te.value(he.id),class:"space-y-2",group:"notes","item-key":"id",handle:v.value?null:".note-drag-handle",onChange:X=>V(X,he.id),animation:150,"ghost-class":"ghost-card","chosen-class":"chosen","drag-class":"dragging",disabled:v.value},{item:Yu(({element:X})=>[S("div",oX,[S("div",aX,[S("div",{class:Di(["p-3 flex items-center justify-between",{"note-drag-handle cursor-move":!v.value,"no-select":!0}])},[S("div",lX,[v.value?Jt("",!0):(Oe(),Be("svg",uX,K[14]||(K[14]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"},null,-1)]))),S("h4",cX,kt(X.title),1)]),S("div",null,[S("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:ru({backgroundColor:pe(X.accessLevel)+"20",color:pe(X.accessLevel)})},kt(ge(X.accessLevel)||"Non défini"),5)])],2),S("div",hX,[S("p",dX,kt(X.description||"Aucune description"),1)]),S("div",fX,[S("span",pX,kt(X.updatedAt?j(X.updatedAt):X.createdAt?j(X.createdAt):"Date non définie"),1),S("div",gX,[X.location?(Oe(),Be("span",mX,K[15]||(K[15]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))):(Oe(),Be("span",vX,K[16]||(K[16]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]))),X.location?(Oe(),Be(Sn,{key:2},[S("button",{onClick:J=>B(X),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Ouvrir dans Google Maps"},K[17]||(K[17]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),8,yX),S("button",{onClick:J=>Z(X),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Voir sur la carte"},K[18]||(K[18]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)]),8,bX)],64)):Jt("",!0),S("button",{onClick:J=>I(X),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Éditer la note"},K[19]||(K[19]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,_X),S("button",{onClick:J=>z(X),class:"p-1 text-gray-400 hover:text-red-500 focus:outline-none",title:"Supprimer la note"},K[20]||(K[20]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,wX)])])])])]),"empty-content":Yu(()=>K[21]||(K[21]=[S("div",{class:"p-4 text-center text-gray-400 text-sm italic"}," Aucune note dans cette colonne ",-1)])),_:2},1032,["list","handle","onChange","disabled"])])])])]))),128))])]))]),o.value?(Oe(),Be("div",xX,[S("div",LX,[K[23]||(K[23]=S("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),S("div",SX,[K[22]||(K[22]=nu('<div class="p-4 md:p-6" data-v-0158f3fe><div class="flex items-start" data-v-0158f3fe><div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100" data-v-0158f3fe><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-0158f3fe><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-0158f3fe></path></svg></div><div class="ml-4 flex-1" data-v-0158f3fe><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title" data-v-0158f3fe> Supprimer la note </h3><div class="mt-2" data-v-0158f3fe><p class="text-sm text-gray-500" data-v-0158f3fe> Êtes-vous sûr de vouloir supprimer cette note ? Cette action est irréversible. </p></div></div></div></div>',1)),S("div",CX,[S("button",{onClick:U,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm"}," Supprimer "),S("button",{onClick:K[3]||(K[3]=he=>o.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])])])])):Jt("",!0),a.value?(Oe(),Ca(FE,{key:1,note:c.value,"is-new-note":!((me=c.value)!=null&&me.id),location:(fe=c.value)==null?void 0:fe.location,onClose:K[4]||(K[4]=he=>a.value=!1),onSave:R},null,8,["note","is-new-note","location"])):Jt("",!0)])}}}),PX=ih(EX,[["__scopeId","data-v-0158f3fe"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Rm(t){return t+.5|0}const fd=(t,e,n)=>Math.max(Math.min(t,n),e);function Mg(t){return fd(Rm(t*2.55),0,255)}function _d(t){return fd(Rm(t*255),0,255)}function Eh(t){return fd(Rm(t/2.55)/100,0,1)}function X5(t){return fd(Rm(t*100),0,100)}const Uu={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$b=[..."0123456789ABCDEF"],MX=t=>$b[t&15],kX=t=>$b[(t&240)>>4]+$b[t&15],O0=t=>(t&240)>>4===(t&15),AX=t=>O0(t.r)&&O0(t.g)&&O0(t.b)&&O0(t.a);function TX(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Uu[t[1]]*17,g:255&Uu[t[2]]*17,b:255&Uu[t[3]]*17,a:e===5?Uu[t[4]]*17:255}:(e===7||e===9)&&(n={r:Uu[t[1]]<<4|Uu[t[2]],g:Uu[t[3]]<<4|Uu[t[4]],b:Uu[t[5]]<<4|Uu[t[6]],a:e===9?Uu[t[7]]<<4|Uu[t[8]]:255})),n}const DX=(t,e)=>t<255?e(t):"";function OX(t){var e=AX(t)?MX:kX;return t?"#"+e(t.r)+e(t.g)+e(t.b)+DX(t.a,e):void 0}const NX=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function wP(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function IX(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function BX(t,e,n){const r=wP(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function RX(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function Z_(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,d;return s!==o&&(d=s-o,c=a>.5?d/(2-s-o):d/(s+o),l=RX(n,r,i,d,s),l=l*60+.5),[l|0,c||0,a]}function K_(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(_d)}function X_(t,e,n){return K_(wP,t,e,n)}function FX(t,e,n){return K_(BX,t,e,n)}function jX(t,e,n){return K_(IX,t,e,n)}function xP(t){return(t%360+360)%360}function zX(t){const e=NX.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Mg(+e[5]):_d(+e[5]));const i=xP(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=FX(i,s,o):e[1]==="hsv"?r=jX(i,s,o):r=X_(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function $X(t,e){var n=Z_(t);n[0]=xP(n[0]+e),n=X_(n),t.r=n[0],t.g=n[1],t.b=n[2]}function VX(t){if(!t)return;const e=Z_(t),n=e[0],r=X5(e[1]),i=X5(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Eh(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const J5={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Q5={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function UX(){const t={},e=Object.keys(Q5),n=Object.keys(J5);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,J5[s]);s=parseInt(Q5[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let N0;function HX(t){N0||(N0=UX(),N0.transparent=[0,0,0,0]);const e=N0[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const WX=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function GX(t){const e=WX.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Mg(o):fd(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Mg(r):fd(r,0,255)),i=255&(e[4]?Mg(i):fd(i,0,255)),s=255&(e[6]?Mg(s):fd(s,0,255)),{r,g:i,b:s,a:n}}}function qX(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Eh(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const w2=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ep=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function YX(t,e,n){const r=ep(Eh(t.r)),i=ep(Eh(t.g)),s=ep(Eh(t.b));return{r:_d(w2(r+n*(ep(Eh(e.r))-r))),g:_d(w2(i+n*(ep(Eh(e.g))-i))),b:_d(w2(s+n*(ep(Eh(e.b))-s))),a:t.a+n*(e.a-t.a)}}function I0(t,e,n){if(t){let r=Z_(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=X_(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function LP(t,e){return t&&Object.assign(e||{},t)}function e3(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=_d(t[3]))):(e=LP(t,{r:0,g:0,b:0,a:1}),e.a=_d(e.a)),e}function ZX(t){return t.charAt(0)==="r"?GX(t):zX(t)}class bm{constructor(e){if(e instanceof bm)return e;const n=typeof e;let r;n==="object"?r=e3(e):n==="string"&&(r=TX(e)||HX(e)||ZX(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=LP(this._rgb);return e&&(e.a=Eh(e.a)),e}set rgb(e){this._rgb=e3(e)}rgbString(){return this._valid?qX(this._rgb):void 0}hexString(){return this._valid?OX(this._rgb):void 0}hslString(){return this._valid?VX(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=YX(this._rgb,e._rgb,n)),this}clone(){return new bm(this.rgb)}alpha(e){return this._rgb.a=_d(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Rm(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return I0(this._rgb,2,e),this}darken(e){return I0(this._rgb,2,-e),this}saturate(e){return I0(this._rgb,1,e),this}desaturate(e){return I0(this._rgb,1,-e),this}rotate(e){return $X(this._rgb,e),this}}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function xh(){}const KX=(()=>{let t=0;return()=>t++})();function Wi(t){return t===null||typeof t>"u"}function Js(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Oi(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ko(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function xu(t,e){return ko(t)?t:e}function ai(t,e){return typeof t>"u"?e:t}const XX=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,SP=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function As(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function us(t,e,n,r){let i,s,o;if(Js(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(Oi(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function ry(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function iy(t){if(Js(t))return t.map(iy);if(Oi(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=iy(t[n[i]]);return e}return t}function CP(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function JX(t,e,n,r){if(!CP(t))return;const i=e[t],s=n[t];Oi(i)&&Oi(s)?_m(i,s,r):e[t]=iy(s)}function _m(t,e,n){const r=Js(e)?e:[e],i=r.length;if(!Oi(t))return t;n=n||{};const s=n.merger||JX;let o;for(let a=0;a<i;++a){if(o=r[a],!Oi(o))continue;const l=Object.keys(o);for(let c=0,d=l.length;c<d;++c)s(l[c],t,o,n)}return t}function Jg(t,e){return _m(t,e,{merger:QX})}function QX(t,e,n){if(!CP(t))return;const r=e[t],i=n[t];Oi(r)&&Oi(i)?Jg(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=iy(i))}const t3={"":t=>t,x:t=>t.x,y:t=>t.y};function eJ(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function tJ(t){const e=eJ(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Pd(t,e){return(t3[e]||(t3[e]=tJ(e)))(t)}function J_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const wm=t=>typeof t<"u",Md=t=>typeof t=="function",n3=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function nJ(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Fs=Math.PI,Rs=2*Fs,rJ=Rs+Fs,sy=Number.POSITIVE_INFINITY,iJ=Fs/180,Go=Fs/2,Kd=Fs/4,r3=Fs*2/3,pd=Math.log10,eh=Math.sign;function Qg(t,e,n){return Math.abs(t-e)<n}function i3(t){const e=Math.round(t);t=Qg(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(pd(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function sJ(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function Op(t){return!isNaN(parseFloat(t))&&isFinite(t)}function oJ(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function EP(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function wc(t){return t*(Fs/180)}function Q_(t){return t*(180/Fs)}function s3(t){if(!ko(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function PP(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Fs&&(s+=Rs),{angle:s,distance:i}}function Vb(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function aJ(t,e){return(t-e+rJ)%Rs-Fs}function Lu(t){return(t%Rs+Rs)%Rs}function xm(t,e,n,r){const i=Lu(t),s=Lu(e),o=Lu(n),a=Lu(s-i),l=Lu(o-i),c=Lu(i-s),d=Lu(i-o);return i===s||i===o||r&&s===o||a>l&&c<d}function Ma(t,e,n){return Math.max(e,Math.min(n,t))}function lJ(t){return Ma(t,-32768,32767)}function Dh(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function ew(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const Oh=(t,e,n,r)=>ew(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),uJ=(t,e,n)=>ew(t,n,r=>t[r][e]>=n);function cJ(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const MP=["push","pop","shift","splice","unshift"];function hJ(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),MP.forEach(n=>{const r="_onData"+J_(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function o3(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(MP.forEach(s=>{delete t[s]}),delete t._chartjs)}function kP(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const AP=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function TP(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,AP.call(window,()=>{r=!1,t.apply(e,n)}))}}function dJ(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const tw=t=>t==="start"?"left":t==="end"?"right":"center",cl=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,fJ=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function DP(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:d,minDefined:p,maxDefined:v}=o.getUserBounds();p&&(i=Ma(Math.min(Oh(a,l,c).lo,n?r:Oh(e,l,o.getPixelForValue(c)).lo),0,r-1)),v?s=Ma(Math.max(Oh(a,o.axis,d,!0).hi+1,n?0:Oh(e,l,o.getPixelForValue(d),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function OP(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const B0=t=>t===0||t===1,a3=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Rs/n)),l3=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Rs/n)+1,em={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Go)+1,easeOutSine:t=>Math.sin(t*Go),easeInOutSine:t=>-.5*(Math.cos(Fs*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>B0(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>B0(t)?t:a3(t,.075,.3),easeOutElastic:t=>B0(t)?t:l3(t,.075,.3),easeInOutElastic(t){return B0(t)?t:t<.5?.5*a3(t*2,.1125,.45):.5+.5*l3(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-em.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?em.easeInBounce(t*2)*.5:em.easeOutBounce(t*2-1)*.5+.5};function nw(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function u3(t){return nw(t)?t:new bm(t)}function x2(t){return nw(t)?t:new bm(t).saturate(.5).darken(.1).hexString()}const pJ=["x","y","borderWidth","radius","tension"],gJ=["color","borderColor","backgroundColor"];function mJ(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:gJ},numbers:{type:"number",properties:pJ}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function vJ(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const c3=new Map;function yJ(t,e){e=e||{};const n=t+JSON.stringify(e);let r=c3.get(n);return r||(r=new Intl.NumberFormat(t,e),c3.set(n,r)),r}function Fm(t,e,n){return yJ(e,n).format(t)}const NP={values(t){return Js(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=bJ(t,n)}const o=pd(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Fm(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(pd(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?NP.numeric.call(this,t,e,n):""}};function bJ(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Yy={formatters:NP};function _J(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Yy.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const xf=Object.create(null),Ub=Object.create(null);function tm(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function L2(t,e,n){return typeof e=="string"?_m(tm(t,e),n):_m(tm(t,""),e)}class wJ{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>x2(i.backgroundColor),this.hoverBorderColor=(r,i)=>x2(i.borderColor),this.hoverColor=(r,i)=>x2(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return L2(this,e,n)}get(e){return tm(this,e)}describe(e,n){return L2(Ub,e,n)}override(e,n){return L2(xf,e,n)}route(e,n,r,i){const s=tm(this,e),o=tm(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Oi(l)?Object.assign({},c,l):ai(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Ao=new wJ({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[mJ,vJ,_J]);function xJ(t){return!t||Wi(t.size)||Wi(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function oy(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function LJ(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,d,p,v;for(l=0;l<a;l++)if(p=n[l],p!=null&&!Js(p))o=oy(t,i,s,o,p);else if(Js(p))for(c=0,d=p.length;c<d;c++)v=p[c],v!=null&&!Js(v)&&(o=oy(t,i,s,o,v));t.restore();const g=s.length/2;if(g>n.length){for(l=0;l<g;l++)delete i[s[l]];s.splice(0,g)}return o}function Xd(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function h3(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Hb(t,e,n,r){IP(t,e,n,r,null)}function IP(t,e,n,r,i){let s,o,a,l,c,d,p,v;const g=e.pointStyle,x=e.rotation,E=e.radius;let k=(x||0)*iJ;if(g&&typeof g=="object"&&(s=g.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(k),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(E)||E<=0)){switch(t.beginPath(),g){default:i?t.ellipse(n,r,i/2,E,0,0,Rs):t.arc(n,r,E,0,Rs),t.closePath();break;case"triangle":d=i?i/2:E,t.moveTo(n+Math.sin(k)*d,r-Math.cos(k)*E),k+=r3,t.lineTo(n+Math.sin(k)*d,r-Math.cos(k)*E),k+=r3,t.lineTo(n+Math.sin(k)*d,r-Math.cos(k)*E),t.closePath();break;case"rectRounded":c=E*.516,l=E-c,o=Math.cos(k+Kd)*l,p=Math.cos(k+Kd)*(i?i/2-c:l),a=Math.sin(k+Kd)*l,v=Math.sin(k+Kd)*(i?i/2-c:l),t.arc(n-p,r-a,c,k-Fs,k-Go),t.arc(n+v,r-o,c,k-Go,k),t.arc(n+p,r+a,c,k,k+Go),t.arc(n-v,r+o,c,k+Go,k+Fs),t.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*E,d=i?i/2:l,t.rect(n-d,r-l,2*d,2*l);break}k+=Kd;case"rectRot":p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+v,r-o),t.lineTo(n+p,r+a),t.lineTo(n-v,r+o),t.closePath();break;case"crossRot":k+=Kd;case"cross":p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o);break;case"star":p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o),k+=Kd,p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o);break;case"line":o=i?i/2:Math.cos(k)*E,a=Math.sin(k)*E,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(k)*(i?i/2:E),r+Math.sin(k)*E);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Nh(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Zy(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ky(t){t.restore()}function SJ(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function CJ(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function EJ(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Wi(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function PJ(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,d=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,d),t.lineTo(a,d),t.stroke()}}function MJ(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Lf(t,e,n,r,i,s={}){const o=Js(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,EJ(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&MJ(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Wi(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),PJ(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function Lm(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Fs,Fs,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Fs,Go,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Go,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Go,!0),t.lineTo(n+o.topLeft,r)}const kJ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,AJ=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function TJ(t,e){const n=(""+t).match(kJ);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const DJ=t=>+t||0;function rw(t,e){const n={},r=Oi(e),i=r?Object.keys(e):e,s=Oi(t)?r?o=>ai(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=DJ(s(o));return n}function BP(t){return rw(t,{top:"y",right:"x",bottom:"y",left:"x"})}function mf(t){return rw(t,["topLeft","topRight","bottomLeft","bottomRight"])}function yl(t){const e=BP(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ga(t,e){t=t||{},e=e||Ao.font;let n=ai(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=ai(t.style,e.style);r&&!(""+r).match(AJ)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:ai(t.family,e.family),lineHeight:TJ(ai(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:ai(t.weight,e.weight),string:""};return i.string=xJ(i),i}function kg(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function OJ(t,e,n){const{min:r,max:i}=t,s=SP(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Dd(t,e){return Object.assign(Object.create(t),e)}function iw(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=zP("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>iw([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return FP(a,l,()=>$J(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return f3(a).includes(l)},ownKeys(a){return f3(a)},set(a,l,c){const d=a._storage||(a._storage=i());return a[l]=d[l]=c,delete a._keys,!0}})}function Np(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:RP(t,r),setContext:s=>Np(t,s,n,r),override:s=>Np(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return FP(s,o,()=>IJ(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function RP(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Md(n)?n:()=>n,isIndexable:Md(r)?r:()=>r}}const NJ=(t,e)=>t?t+J_(e):e,sw=(t,e)=>Oi(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function FP(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=n();return t[e]=r,r}function IJ(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return Md(a)&&o.isScriptable(e)&&(a=BJ(e,a,t,n)),Js(a)&&a.length&&(a=RJ(e,a,t,o.isIndexable)),sw(e,a)&&(a=Np(a,i,s&&s[e],o)),a}function BJ(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),sw(t,l)&&(l=ow(i._scopes,i,t,l)),l}function RJ(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(Oi(e[0])){const l=e,c=i._scopes.filter(d=>d!==l);e=[];for(const d of l){const p=ow(c,i,t,d);e.push(Np(p,s,o&&o[t],a))}}return e}function jP(t,e,n){return Md(t)?t(e,n):t}const FJ=(t,e)=>t===!0?e:typeof t=="string"?Pd(e,t):void 0;function jJ(t,e,n,r,i){for(const s of e){const o=FJ(n,s);if(o){t.add(o);const a=jP(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function ow(t,e,n,r){const i=e._rootScopes,s=jP(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=d3(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=d3(a,o,s,l,r),l===null)?!1:iw(Array.from(a),[""],i,s,()=>zJ(e,n,r))}function d3(t,e,n,r,i){for(;n;)n=jJ(t,e,n,r,i);return n}function zJ(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Js(i)&&Oi(n)?n:i||{}}function $J(t,e,n,r){let i;for(const s of e)if(i=zP(NJ(s,t),n),typeof i<"u")return sw(t,i)?ow(n,r,t,i):i}function zP(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function f3(t){let e=t._keys;return e||(e=t._keys=VJ(t._scopes)),e}function VJ(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function $P(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,d;for(a=0,l=r;a<l;++a)c=a+n,d=e[c],o[a]={r:i.parse(Pd(d,s),c)};return o}const UJ=Number.EPSILON||1e-14,Ip=(t,e)=>e<t.length&&!t[e].skip&&t[e],VP=t=>t==="x"?"y":"x";function HJ(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=Vb(s,i),l=Vb(o,s);let c=a/(a+l),d=l/(a+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const p=r*c,v=r*d;return{previous:{x:s.x-p*(o.x-i.x),y:s.y-p*(o.y-i.y)},next:{x:s.x+v*(o.x-i.x),y:s.y+v*(o.y-i.y)}}}function WJ(t,e,n){const r=t.length;let i,s,o,a,l,c=Ip(t,0);for(let d=0;d<r-1;++d)if(l=c,c=Ip(t,d+1),!(!l||!c)){if(Qg(e[d],0,UJ)){n[d]=n[d+1]=0;continue}i=n[d]/e[d],s=n[d+1]/e[d],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[d]=i*o*e[d],n[d+1]=s*o*e[d])}}function GJ(t,e,n="x"){const r=VP(n),i=t.length;let s,o,a,l=Ip(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Ip(t,c+1),!a)continue;const d=a[n],p=a[r];o&&(s=(d-o[n])/3,a[`cp1${n}`]=d-s,a[`cp1${r}`]=p-s*e[c]),l&&(s=(l[n]-d)/3,a[`cp2${n}`]=d+s,a[`cp2${r}`]=p+s*e[c])}}function qJ(t,e="x"){const n=VP(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=Ip(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Ip(t,o+1),!!l){if(c){const d=c[e]-l[e];i[o]=d!==0?(c[n]-l[n])/d:0}s[o]=a?c?eh(i[o-1])!==eh(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}WJ(t,i,s),GJ(t,s,e)}function R0(t,e,n){return Math.max(Math.min(t,n),e)}function YJ(t,e){let n,r,i,s,o,a=Nh(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&Nh(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=R0(i.cp1x,e.left,e.right),i.cp1y=R0(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=R0(i.cp2x,e.left,e.right),i.cp2y=R0(i.cp2y,e.top,e.bottom)))}function ZJ(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")qJ(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=HJ(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&YJ(t,n)}function aw(){return typeof window<"u"&&typeof document<"u"}function lw(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ay(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Xy=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function KJ(t,e){return Xy(t).getPropertyValue(e)}const XJ=["top","right","bottom","left"];function vf(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=XJ[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const JJ=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function QJ(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(JJ(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function nf(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Xy(n),s=i.boxSizing==="border-box",o=vf(i,"padding"),a=vf(i,"border","width"),{x:l,y:c,box:d}=QJ(t,n),p=o.left+(d&&a.left),v=o.top+(d&&a.top);let{width:g,height:x}=e;return s&&(g-=o.width+a.width,x-=o.height+a.height),{x:Math.round((l-p)/g*n.width/r),y:Math.round((c-v)/x*n.height/r)}}function eQ(t,e,n){let r,i;if(e===void 0||n===void 0){const s=lw(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Xy(s),l=vf(a,"border","width"),c=vf(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=ay(a.maxWidth,s,"clientWidth"),i=ay(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||sy,maxHeight:i||sy}}const F0=t=>Math.round(t*10)/10;function tQ(t,e,n,r){const i=Xy(t),s=vf(i,"margin"),o=ay(i.maxWidth,t,"clientWidth")||sy,a=ay(i.maxHeight,t,"clientHeight")||sy,l=eQ(t,e,n);let{width:c,height:d}=l;if(i.boxSizing==="content-box"){const v=vf(i,"border","width"),g=vf(i,"padding");c-=g.width+v.width,d-=g.height+v.height}return c=Math.max(0,c-s.width),d=Math.max(0,r?c/r:d-s.height),c=F0(Math.min(c,o,l.maxWidth)),d=F0(Math.min(d,a,l.maxHeight)),c&&!d&&(d=F0(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&d>l.height&&(d=l.height,c=F0(Math.floor(d*r))),{width:c,height:d}}function p3(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const nQ=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};aw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function g3(t,e){const n=KJ(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function rf(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function rQ(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function iQ(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=rf(t,i,n),a=rf(i,s,n),l=rf(s,e,n),c=rf(o,a,n),d=rf(a,l,n);return rf(c,d,n)}const sQ=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},oQ=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Lp(t,e,n){return t?sQ(e,n):oQ()}function UP(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function HP(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function WP(t){return t==="angle"?{between:xm,compare:aJ,normalize:Lu}:{between:Dh,compare:(e,n)=>e-n,normalize:e=>e}}function m3({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function aQ(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=WP(r),l=e.length;let{start:c,end:d,loop:p}=t,v,g;if(p){for(c+=l,d+=l,v=0,g=l;v<g&&o(a(e[c%l][r]),i,s);++v)c--,d--;c%=l,d%=l}return d<c&&(d+=l),{start:c,end:d,loop:p,style:t.style}}function GP(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=WP(r),{start:d,end:p,loop:v,style:g}=aQ(t,e,n),x=[];let E=!1,k=null,A,D,j;const Y=()=>l(i,j,A)&&a(i,j)!==0,te=()=>a(s,A)===0||l(s,j,A),ge=()=>E||Y(),pe=()=>!E||te();for(let N=d,$=d;N<=p;++N)D=e[N%o],!D.skip&&(A=c(D[r]),A!==j&&(E=l(A,i,s),k===null&&ge()&&(k=a(A,i)===0?N:$),k!==null&&pe()&&(x.push(m3({start:k,end:N,loop:v,count:o,style:g})),k=null),$=N,j=A));return k!==null&&x.push(m3({start:k,end:p,loop:v,count:o,style:g})),x}function qP(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=GP(r[i],t.points,e);s.length&&n.push(...s)}return n}function lQ(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function uQ(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function cQ(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=lQ(n,i,s,r);if(r===!0)return v3(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return v3(t,uQ(n,o,l,c),n,e)}function v3(t,e,n,r){return!r||!r.setContext||!n?e:hQ(t,e,n,r)}function hQ(t,e,n,r){const i=t._chart.getContext(),s=y3(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let d=s,p=e[0].start,v=p;function g(x,E,k,A){const D=a?-1:1;if(x!==E){for(x+=l;n[x%l].skip;)x-=D;for(;n[E%l].skip;)E+=D;x%l!==E%l&&(c.push({start:x%l,end:E%l,loop:k,style:A}),d=A,p=E%l)}}for(const x of e){p=a?p:x.start;let E=n[p%l],k;for(v=p+1;v<=x.end;v++){const A=n[v%l];k=y3(r.setContext(Dd(i,{type:"segment",p0:E,p1:A,p0DataIndex:(v-1)%l,p1DataIndex:v%l,datasetIndex:o}))),dQ(k,d)&&g(p,v-1,x.loop,d),E=A,d=k}p<v-1&&g(p,v-1,x.loop,d)}return c}function y3(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function dQ(t,e){if(!e)return!1;const n=[],r=function(i,s){return nw(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class fQ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=AP.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Lh=new fQ;const b3="transparent",pQ={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=u3(t||b3),i=r.valid&&u3(e||b3);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class gQ{constructor(e,n,r,i){const s=n[r];i=kg([e.to,i,s,e.from]);const o=kg([e.from,s,i]);this._active=!0,this._fn=e.fn||pQ[e.type||typeof o],this._easing=em[e.easing]||em.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=kg([e.to,n,i,e.from]),this._from=kg([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class YP{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Oi(e))return;const n=Object.keys(Ao.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Oi(s))return;const o={};for(const a of n)o[a]=s[a];(Js(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=vQ(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&mQ(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const d=n[c];let p=s[c];const v=r.get(c);if(p)if(v&&p.active()){p.update(v,d,a);continue}else p.cancel();if(!v||!v.duration){e[c]=d;continue}s[c]=p=new gQ(v,e,c,d),i.push(p)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return Lh.add(this._chart,r),!0}}function mQ(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function vQ(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function _3(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function yQ(t,e,n){if(n===!1)return!1;const r=_3(t,n),i=_3(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function bQ(t){let e,n,r,i;return Oi(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function ZP(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function w3(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(r.all)continue;break}c=t.values[l],ko(c)&&(s||e===0||eh(e)===eh(c))&&(e+=c)}return e}}function _Q(t){const e=Object.keys(t),n=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],n[r]={x:s,y:t[s]};return n}function x3(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function wQ(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function xQ(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function LQ(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function L3(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function S3(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,d=wQ(s,o,r),p=e.length;let v;for(let g=0;g<p;++g){const x=e[g],{[l]:E,[c]:k}=x,A=x._stacks||(x._stacks={});v=A[c]=LQ(i,d,E),v[a]=k,v._top=L3(v,o,!0,r.type),v._bottom=L3(v,o,!1,r.type);const D=v._visualValues||(v._visualValues={});D[a]=k}}function S2(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function SQ(t,e){return Dd(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function CQ(t,e,n){return Dd(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function cg(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const C2=t=>t==="reset"||t==="none",C3=(t,e)=>e?t:Object.assign({},t),EQ=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:ZP(n,!0),values:null};class Lc{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=x3(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&cg(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(p,v,g,x)=>p==="x"?v:p==="r"?x:g,s=n.xAxisID=ai(r.xAxisID,S2(e,"x")),o=n.yAxisID=ai(r.yAxisID,S2(e,"y")),a=n.rAxisID=ai(r.rAxisID,S2(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),d=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&o3(this._data,this),e._stacked&&cg(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Oi(n))this._data=_Q(n);else if(r!==n){if(r){o3(r,this);const i=this._cachedMeta;cg(i),i._parsed=[]}n&&Object.isExtensible(n)&&hJ(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=x3(n.vScale,n),n.stack!==r.stack&&(i=!0,cg(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&S3(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],d,p,v;if(this._parsing===!1)r._parsed=i,r._sorted=!0,v=i;else{Js(i[e])?v=this.parseArrayData(r,i,e,n):Oi(i[e])?v=this.parseObjectData(r,i,e,n):v=this.parsePrimitiveData(r,i,e,n);const g=()=>p[a]===null||c&&p[a]<c[a];for(d=0;d<n;++d)r._parsed[d+e]=p=v[d],l&&(g()&&(l=!1),c=p);r._sorted=l}o&&S3(this,v)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),d=s===o,p=new Array(i);let v,g,x;for(v=0,g=i;v<g;++v)x=v+r,p[v]={[a]:d||s.parse(c[x],x),[l]:o.parse(n[x],x)};return p}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,d,p;for(l=0,c=i;l<c;++l)d=l+r,p=n[d],a[l]={x:s.parse(p[0],d),y:o.parse(p[1],d)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let d,p,v,g;for(d=0,p=i;d<p;++d)v=d+r,g=n[v],c[d]={x:s.parse(Pd(g,a),v),y:o.parse(Pd(g,l),v)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:ZP(i,!0),values:n._stacks[e.axis]._visualValues};return w3(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=w3(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=EQ(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:p}=xQ(a);let v,g;function x(){g=i[v];const E=g[a.axis];return!ko(g[e.axis])||d>E||p<E}for(v=0;v<o&&!(!x()&&(this.updateRangeFromParsed(c,e,g,l),s));++v);if(s){for(v=o-1;v>=0;--v)if(!x()){this.updateRangeFromParsed(c,e,g,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],ko(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=bQ(ai(this.options.clip,yQ(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let d;for(r.dataset&&r.dataset.draw(e,s,a,l),d=a;d<a+l;++d){const p=i[d];p.hidden||(p.active&&c?o.push(p):p.draw(e,s))}for(d=0;d<o.length;++d)o[d].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=CQ(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=SQ(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&wm(r);if(a)return C3(a,l);const c=this.chart.config,d=c.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],v=c.getOptionScopes(this.getDataset(),d),g=Object.keys(Ao.elements[e]),x=()=>this.getContext(r,i,n),E=c.resolveNamedOptions(v,g,x,p);return E.$shared&&(E.$shared=l,s[o]=Object.freeze(C3(E,l))),E}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const d=this.chart.config,p=d.datasetAnimationScopeKeys(this._type,n),v=d.getOptionScopes(this.getDataset(),p);l=d.createResolver(v,this.getContext(e,r,n))}const c=new YP(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||C2(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){C2(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!C2(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&cg(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ke(Lc,"defaults",{}),Ke(Lc,"datasetElementType",null),Ke(Lc,"dataElementType",null);function PQ(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=kP(r.sort((i,s)=>i-s))}return t._cache.$bar}function MQ(t){const e=t.iScale,n=PQ(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(wm(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function kQ(t,e,n,r){const i=n.barThickness;let s,o;return Wi(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function AQ(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function TQ(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function KP(t,e,n,r){return Js(t)?TQ(t,e,n,r):e[n.axis]=n.parse(t,r),e}function E3(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,d,p,v;for(c=n,d=n+r;c<d;++c)v=e[c],p={},p[i.axis]=a||i.parse(o[c],c),l.push(KP(v,p,s,c));return l}function E2(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function DQ(t,e,n){return t!==0?eh(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function OQ(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function NQ(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:d}=OQ(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=d:(s[P3(d,o,a,l)]=!0,i=c)),s[P3(i,o,a,l)]=!0,t.borderSkipped=s}function P3(t,e,n,r){return r?(t=IQ(t,e,n),t=M3(t,n,e)):t=M3(t,e,n),t}function IQ(t,e,n){return t===e?n:t===n?e:t}function M3(t,e,n){return t==="start"?e:t==="end"?n:t}function BQ(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class mv extends Lc{parsePrimitiveData(e,n,r,i){return E3(e,n,r,i)}parseArrayData(e,n,r,i){return E3(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,d=o.axis==="x"?a:l,p=[];let v,g,x,E;for(v=r,g=r+i;v<g;++v)E=n[v],x={},x[s.axis]=s.parse(Pd(E,c),v),p.push(KP(Pd(E,d),x,o,v));return p}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=E2(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),d=this._getRuler(),{sharedOptions:p,includeOptions:v}=this._getSharedOptions(n,i);for(let g=n;g<n+r;g++){const x=this.getParsed(g),E=s||Wi(x[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),k=this._calculateBarIndexPixels(g,d),A=(x._stacks||{})[a.axis],D={horizontal:c,base:E.base,enableBorderRadius:!A||E2(x._custom)||o===A._top||o===A._bottom,x:c?E.head:k.center,y:c?k.center:E.head,height:c?k.size:Math.abs(E.size),width:c?Math.abs(E.size):k.size};v&&(D.options=p||this.resolveDataElementOptions(g,e[g].active?"active":i));const j=D.options||e[g].options;NQ(D,j,A,o),BQ(D,j,d.ratio),this.updateElement(e[g],g,D,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=r.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),d=c&&c[l.vScale.axis];if(Wi(d)||isNaN(d))return!0};for(const l of i)if(!(n!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||MQ(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,d=E2(c);let p=l[n.axis],v=0,g=r?this.applyStack(n,l,r):p,x,E;g!==p&&(v=g-p,g=p),d&&(p=c.barStart,g=c.barEnd-c.barStart,p!==0&&eh(p)!==eh(c.barEnd)&&(v=0),v+=p);const k=!Wi(s)&&!d?s:v;let A=n.getPixelForValue(k);if(this.chart.getDataVisibility(e)?x=n.getPixelForValue(v+g):x=A,E=x-A,Math.abs(E)<o){E=DQ(E,n,a)*o,p===a&&(A-=E/2);const D=n.getPixelForDecimal(0),j=n.getPixelForDecimal(1),Y=Math.min(D,j),te=Math.max(D,j);A=Math.max(Math.min(A,te),Y),x=A+E,r&&!d&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(x)-n.getValueForPixel(A))}if(A===n.getPixelForValue(a)){const D=eh(E)*n.getLineWidthForValue(a)/2;A+=D,E-=D}return{size:E,base:A,head:x,center:x+E/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=ai(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,d=i.barThickness==="flex"?AQ(e,n,i,c):kQ(e,n,i,c),p=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=d.start+d.chunk*p+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&r[s].draw(this._ctx)}}Ke(mv,"id","bar"),Ke(mv,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Ke(mv,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class vv extends Lc{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,i){const s=super.parsePrimitiveData(e,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,n,r,i){const s=super.parseArrayData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=ai(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,n,r,i){const s=super.parseObjectData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=ai(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),d=o.axis,p=a.axis;for(let v=n;v<n+r;v++){const g=e[v],x=!s&&this.getParsed(v),E={},k=E[d]=s?o.getPixelForDecimal(.5):o.getPixelForValue(x[d]),A=E[p]=s?a.getBasePixel():a.getPixelForValue(x[p]);E.skip=isNaN(k)||isNaN(A),c&&(E.options=l||this.resolveDataElementOptions(v,g.active?"active":i),s&&(E.options.radius=0)),this.updateElement(g,v,E,i)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=ai(r&&r._custom,s),i}}Ke(vv,"id","bubble"),Ke(vv,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Ke(vv,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function RQ(t,e,n){let r=1,i=1,s=0,o=0;if(e<Rs){const a=t,l=a+e,c=Math.cos(a),d=Math.sin(a),p=Math.cos(l),v=Math.sin(l),g=(j,Y,te)=>xm(j,a,l,!0)?1:Math.max(Y,Y*n,te,te*n),x=(j,Y,te)=>xm(j,a,l,!0)?-1:Math.min(Y,Y*n,te,te*n),E=g(0,c,p),k=g(Go,d,v),A=x(Fs,c,p),D=x(Fs+Go,d,v);r=(E-A)/2,i=(k-D)/2,s=-(E+A)/2,o=-(k+D)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class uf extends Lc{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(Oi(r[e])){const{key:l="value"}=this._parsing;s=c=>+Pd(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return wc(this.options.rotation-90)}_getCircumference(){return wc(this.options.circumference)}_getRotationExtents(){let e=Rs,n=-Rs;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(XX(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:d,rotation:p}=this._getRotationExtents(),{ratioX:v,ratioY:g,offsetX:x,offsetY:E}=RQ(p,d,l),k=(r.width-o)/v,A=(r.height-o)/g,D=Math.max(Math.min(k,A)/2,0),j=SP(this.options.radius,D),Y=Math.max(j*l,0),te=(j-Y)/this._getVisibleDatasetWeightTotal();this.offsetX=x*j,this.offsetY=E*j,i.total=this.calculateTotal(),this.outerRadius=j-te*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-te*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/Rs)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,d=(a.left+a.right)/2,p=(a.top+a.bottom)/2,v=s&&c.animateScale,g=v?0:this.innerRadius,x=v?0:this.outerRadius,{sharedOptions:E,includeOptions:k}=this._getSharedOptions(n,i);let A=this._getRotation(),D;for(D=0;D<n;++D)A+=this._circumference(D,s);for(D=n;D<n+r;++D){const j=this._circumference(D,s),Y=e[D],te={x:d+this.offsetX,y:p+this.offsetY,startAngle:A,endAngle:A+j,circumference:j,outerRadius:x,innerRadius:g};k&&(te.options=E||this.resolveDataElementOptions(D,Y.active?"active":i)),A+=j,this.updateElement(Y,D,te,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Rs*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Fm(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(ai(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Ke(uf,"id","doughnut"),Ke(uf,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Ke(uf,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Ke(uf,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class yv extends Lc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=DP(n,i,o);this._drawStart=a,this._drawCount=l,OP(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:d,includeOptions:p}=this._getSharedOptions(n,i),v=o.axis,g=a.axis,{spanGaps:x,segment:E}=this.options,k=Op(x)?x:Number.POSITIVE_INFINITY,A=this.chart._animationsDisabled||s||i==="none",D=n+r,j=e.length;let Y=n>0&&this.getParsed(n-1);for(let te=0;te<j;++te){const ge=e[te],pe=A?ge:{};if(te<n||te>=D){pe.skip=!0;continue}const N=this.getParsed(te),$=Wi(N[g]),Z=pe[v]=o.getPixelForValue(N[v],te),B=pe[g]=s||$?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,N,l):N[g],te);pe.skip=isNaN(Z)||isNaN(B)||$,pe.stop=te>0&&Math.abs(N[v]-Y[v])>k,E&&(pe.parsed=N,pe.raw=c.data[te]),p&&(pe.options=d||this.resolveDataElementOptions(te,ge.active?"active":i)),A||this.updateElement(ge,te,pe,i),Y=N}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Ke(yv,"id","line"),Ke(yv,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ke(yv,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class nm extends Lc{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Fm(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return $P.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,d=c.xCenter,p=c.yCenter,v=c.getIndexAngle(0)-.5*Fs;let g=v,x;const E=360/this.countVisibleElements();for(x=0;x<n;++x)g+=this._computeAngle(x,i,E);for(x=n;x<n+r;x++){const k=e[x];let A=g,D=g+this._computeAngle(x,i,E),j=o.getDataVisibility(x)?c.getDistanceFromCenterForValue(this.getParsed(x).r):0;g=D,s&&(l.animateScale&&(j=0),l.animateRotate&&(A=D=v));const Y={x:d,y:p,innerRadius:0,outerRadius:j,startAngle:A,endAngle:D,options:this.resolveDataElementOptions(x,k.active?"active":i)};this.updateElement(k,x,Y,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?wc(this.resolveDataElementOptions(e,n).angle||r):0}}Ke(nm,"id","polarArea"),Ke(nm,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Ke(nm,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Wb extends uf{}Ke(Wb,"id","pie"),Ke(Wb,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class bv extends Lc{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return $P.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),d=s.getPointPositionForValue(a,this.getParsed(a).r),p=o?s.xCenter:d.x,v=o?s.yCenter:d.y,g={x:p,y:v,angle:d.angle,skip:isNaN(p)||isNaN(v),options:c};this.updateElement(l,a,g,i)}}}Ke(bv,"id","radar"),Ke(bv,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Ke(bv,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class _v extends Lc{getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=DP(n,r,i);if(this._drawStart=s,this._drawCount=o,OP(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,d=this.resolveDataElementOptions(n,i),p=this.getSharedOptions(d),v=this.includeOptions(i,p),g=o.axis,x=a.axis,{spanGaps:E,segment:k}=this.options,A=Op(E)?E:Number.POSITIVE_INFINITY,D=this.chart._animationsDisabled||s||i==="none";let j=n>0&&this.getParsed(n-1);for(let Y=n;Y<n+r;++Y){const te=e[Y],ge=this.getParsed(Y),pe=D?te:{},N=Wi(ge[x]),$=pe[g]=o.getPixelForValue(ge[g],Y),Z=pe[x]=s||N?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,ge,l):ge[x],Y);pe.skip=isNaN($)||isNaN(Z)||N,pe.stop=Y>0&&Math.abs(ge[g]-j[g])>A,k&&(pe.parsed=ge,pe.raw=c.data[Y]),v&&(pe.options=p||this.resolveDataElementOptions(Y,te.active?"active":i)),D||this.updateElement(te,Y,pe,i),j=ge}this.updateSharedOptions(p,i,d)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}Ke(_v,"id","scatter"),Ke(_v,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Ke(_v,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var FQ=Object.freeze({__proto__:null,BarController:mv,BubbleController:vv,DoughnutController:uf,LineController:yv,PieController:Wb,PolarAreaController:nm,RadarController:bv,ScatterController:_v});function Jd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class uw{constructor(e){Ke(this,"options");this.options=e||{}}static override(e){Object.assign(uw.prototype,e)}init(){}formats(){return Jd()}parse(){return Jd()}format(){return Jd()}add(){return Jd()}diff(){return Jd()}startOf(){return Jd()}endOf(){return Jd()}}var XP={_date:uw};function jQ(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?uJ:Oh;if(r){if(i._sharedOptions){const c=s[0],d=typeof c.getRange=="function"&&c.getRange(e);if(d){const p=l(s,e,n-d),v=l(s,e,n+d);return{lo:p.lo,hi:v.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function Jy(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:d}=s[a],{lo:p,hi:v}=jQ(s[a],e,o,i);for(let g=p;g<=v;++g){const x=d[g];x.skip||r(x,c,g)}}}function zQ(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function P2(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||Jy(t,n,e,function(a,l,c){!i&&!Nh(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function $Q(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:d}=o.getProps(["startAngle","endAngle"],r),{angle:p}=PP(o,{x:e.x,y:e.y});xm(p,c,d)&&i.push({element:o,datasetIndex:a,index:l})}return Jy(t,n,e,s),i}function VQ(t,e,n,r,i,s){let o=[];const a=zQ(n);let l=Number.POSITIVE_INFINITY;function c(d,p,v){const g=d.inRange(e.x,e.y,i);if(r&&!g)return;const x=d.getCenterPoint(i);if(!(!!s||t.isPointInArea(x))&&!g)return;const k=a(e,x);k<l?(o=[{element:d,datasetIndex:p,index:v}],l=k):k===l&&o.push({element:d,datasetIndex:p,index:v})}return Jy(t,n,e,c),o}function M2(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?$Q(t,e,n,i):VQ(t,e,n,r,i,s)}function k3(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Jy(t,n,e,(l,c,d)=>{l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:d}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var UQ={modes:{index(t,e,n,r){const i=nf(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?P2(t,i,s,r,o):M2(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const d=a[0].index,p=c.data[d];p&&!p.skip&&l.push({element:p,datasetIndex:c.index,index:d})}),l):[]},dataset(t,e,n,r){const i=nf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?P2(t,i,s,r,o):M2(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let d=0;d<c.length;++d)a.push({element:c[d],datasetIndex:l,index:d})}return a},point(t,e,n,r){const i=nf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return P2(t,i,s,r,o)},nearest(t,e,n,r){const i=nf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return M2(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=nf(e,t);return k3(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=nf(e,t);return k3(t,i,"y",n.intersect,r)}}};const JP=["left","top","right","bottom"];function hg(t,e){return t.filter(n=>n.pos===e)}function A3(t,e){return t.filter(n=>JP.indexOf(n.pos)===-1&&n.box.axis===e)}function dg(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function HQ(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function WQ(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!JP.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function GQ(t,e){const n=WQ(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],d=c&&a.stackWeight/c.weight;a.horizontal?(a.width=d?d*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=d?d*i:l&&e.availableHeight)}return n}function qQ(t){const e=HQ(t),n=dg(e.filter(c=>c.box.fullSize),!0),r=dg(hg(e,"left"),!0),i=dg(hg(e,"right")),s=dg(hg(e,"top"),!0),o=dg(hg(e,"bottom")),a=A3(e,"x"),l=A3(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:hg(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function T3(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function QP(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function YQ(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!Oi(i)){n.size&&(t[i]-=n.size);const p=r[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?s.height:s.width),n.size=p.size/p.count,t[i]+=n.size}s.getPadding&&QP(o,s.getPadding());const a=Math.max(0,e.outerWidth-T3(o,t,"left","right")),l=Math.max(0,e.outerHeight-T3(o,t,"top","bottom")),c=a!==t.w,d=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:d}:{same:d,other:c}}function ZQ(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function KQ(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Ag(t,e,n,r){const i=[];let s,o,a,l,c,d;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,KQ(a.horizontal,e));const{same:p,other:v}=YQ(e,n,a,r);c|=p&&i.length,d=d||v,l.fullSize||i.push(a)}return c&&Ag(i,e,n,r)||d}function j0(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function D3(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},d=a.stackWeight/c.weight||1;if(a.horizontal){const p=e.w*d,v=c.size||l.height;wm(c.start)&&(o=c.start),l.fullSize?j0(l,i.left,o,n.outerWidth-i.right-i.left,v):j0(l,e.left+c.placed,o,p,v),c.start=o,c.placed+=p,o=l.bottom}else{const p=e.h*d,v=c.size||l.width;wm(c.start)&&(s=c.start),l.fullSize?j0(l,s,i.top,v,n.outerHeight-i.bottom-i.top):j0(l,s,e.top+c.placed,v,p),c.start=s,c.placed+=p,s=l.right}}e.x=s,e.y=o}var vl={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=yl(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=qQ(t.boxes),l=a.vertical,c=a.horizontal;us(t.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const d=l.reduce((E,k)=>k.box.options&&k.box.options.display===!1?E:E+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/d,hBoxMaxHeight:o/2}),v=Object.assign({},i);QP(v,yl(r));const g=Object.assign({maxPadding:v,w:s,h:o,x:i.left,y:i.top},i),x=GQ(l.concat(c),p);Ag(a.fullSize,g,p,x),Ag(l,g,p,x),Ag(c,g,p,x)&&Ag(l,g,p,x),ZQ(g),D3(a.leftAndTop,g,p,x),g.x+=g.w,g.y+=g.h,D3(a.rightAndBottom,g,p,x),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},us(a.chartArea,E=>{const k=E.box;Object.assign(k,t.chartArea),k.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class eM{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class XQ extends eM{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const wv="$chartjs",JQ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},O3=t=>t===null||t==="";function QQ(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[wv]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",O3(i)){const s=g3(t,"width");s!==void 0&&(t.width=s)}if(O3(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=g3(t,"height");s!==void 0&&(t.height=s)}return t}const tM=nQ?{passive:!0}:!1;function eee(t,e,n){t.addEventListener(e,n,tM)}function tee(t,e,n){t.canvas.removeEventListener(e,n,tM)}function nee(t,e){const n=JQ[t.type]||t.type,{x:r,y:i}=nf(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function ly(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function ree(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ly(a.addedNodes,r),o=o&&!ly(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function iee(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ly(a.removedNodes,r),o=o&&!ly(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Sm=new Map;let N3=0;function nM(){const t=window.devicePixelRatio;t!==N3&&(N3=t,Sm.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function see(t,e){Sm.size||window.addEventListener("resize",nM),Sm.set(t,e)}function oee(t){Sm.delete(t),Sm.size||window.removeEventListener("resize",nM)}function aee(t,e,n){const r=t.canvas,i=r&&lw(r);if(!i)return;const s=TP((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,d=l.contentRect.height;c===0&&d===0||s(c,d)});return o.observe(i),see(t,s),o}function k2(t,e,n){n&&n.disconnect(),e==="resize"&&oee(t)}function lee(t,e,n){const r=t.canvas,i=TP(s=>{t.ctx!==null&&n(nee(s,t))},t);return eee(r,e,i),i}class uee extends eM{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(QQ(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[wv])return!1;const r=n[wv].initial;["height","width"].forEach(s=>{const o=r[s];Wi(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[wv],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:ree,detach:iee,resize:aee}[n]||lee;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:k2,detach:k2,resize:k2}[n]||tee)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return tQ(e,n,r,i)}isAttached(e){const n=lw(e);return!!(n&&n.isConnected)}}function cee(t){return!aw()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?XQ:uee}var Y0;let $h=(Y0=class{constructor(){Ke(this,"x");Ke(this,"y");Ke(this,"active",!1);Ke(this,"options");Ke(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Op(this.x)&&Op(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},Ke(Y0,"defaults",{}),Ke(Y0,"defaultRoutes"),Y0);function hee(t,e){const n=t.options.ticks,r=dee(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?pee(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return gee(e,c,s,o/i),c;const d=fee(s,e,i);if(o>0){let p,v;const g=o>1?Math.round((l-a)/(o-1)):null;for(z0(e,c,d,Wi(g)?0:a-g,a),p=0,v=o-1;p<v;p++)z0(e,c,d,s[p],s[p+1]);return z0(e,c,d,l,Wi(g)?e.length:l+g),c}return z0(e,c,d),c}function dee(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function fee(t,e,n){const r=mee(t),i=e.length/n;if(!r)return Math.max(i,1);const s=sJ(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function pee(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function gee(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function z0(t,e,n,r,i){const s=ai(r,0),o=Math.min(ai(i,t.length),t.length);let a=0,l,c,d;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),d=s;d<0;)a++,d=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===d&&(e.push(t[c]),a++,d=Math.round(s+a*n))}function mee(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const vee=t=>t==="left"?"right":t==="right"?"left":t,I3=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,B3=(t,e)=>Math.min(e||t,t);function R3(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function yee(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function bee(t,e){us(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function fg(t){return t.drawTicks?t.tickLength:0}function F3(t,e){if(!t.display)return 0;const n=ga(t.font,e),r=yl(t.padding);return(Js(t.text)?t.text.length:1)*n.lineHeight+r.height}function _ee(t,e){return Dd(t,{scale:e,type:"scale"})}function wee(t,e,n){return Dd(t,{tick:n,index:e,type:"tick"})}function xee(t,e,n){let r=tw(t);return(n&&e!=="right"||!n&&e==="right")&&(r=vee(r)),r}function Lee(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:d}=l;let p=0,v,g,x;const E=o-i,k=a-s;if(t.isHorizontal()){if(g=cl(r,s,a),Oi(n)){const A=Object.keys(n)[0],D=n[A];x=d[A].getPixelForValue(D)+E-e}else n==="center"?x=(c.bottom+c.top)/2+E-e:x=I3(t,n,e);v=a-s}else{if(Oi(n)){const A=Object.keys(n)[0],D=n[A];g=d[A].getPixelForValue(D)-k+e}else n==="center"?g=(c.left+c.right)/2-k+e:g=I3(t,n,e);x=cl(r,o,i),p=n==="left"?-Go:Go}return{titleX:g,titleY:x,maxWidth:v,rotation:p}}class Pf extends $h{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=xu(e,Number.POSITIVE_INFINITY),n=xu(n,Number.NEGATIVE_INFINITY),r=xu(r,Number.POSITIVE_INFINITY),i=xu(i,Number.NEGATIVE_INFINITY),{min:xu(e,r),max:xu(n,i),minDefined:ko(e),maxDefined:ko(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:xu(n,xu(r,n)),max:xu(r,xu(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){As(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=OJ(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?R3(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=hee(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){As(this.options.afterUpdate,[this])}beforeSetDimensions(){As(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){As(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),As(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){As(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=As(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){As(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){As(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=B3(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const d=this._getLabelSizes(),p=d.widest.width,v=d.highest.height,g=Ma(this.chart.width-p,0,this.maxWidth);a=e.offset?this.maxWidth/r:g/(r-1),p+6>a&&(a=g/(r-(e.offset?.5:1)),l=this.maxHeight-fg(e.grid)-n.padding-F3(e.title,this.chart.options.font),c=Math.sqrt(p*p+v*v),o=Q_(Math.min(Math.asin(Ma((d.highest.height+6)/a,-1,1)),Math.asin(Ma(l/c,-1,1))-Math.asin(Ma(v/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){As(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){As(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=F3(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=fg(s)+l):(e.height=this.maxHeight,e.width=fg(s)+l),r.display&&this.ticks.length){const{first:c,last:d,widest:p,highest:v}=this._getLabelSizes(),g=r.padding*2,x=wc(this.labelRotation),E=Math.cos(x),k=Math.sin(x);if(a){const A=r.mirror?0:k*p.width+E*v.height;e.height=Math.min(this.maxHeight,e.height+A+g)}else{const A=r.mirror?0:E*p.width+k*v.height;e.width=Math.min(this.maxWidth,e.width+A+g)}this._calculatePadding(c,d,k,E)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,g=0;l?c?(v=i*e.width,g=r*n.height):(v=r*e.height,g=i*n.width):s==="start"?g=n.width:s==="end"?v=e.width:s!=="inner"&&(v=e.width/2,g=n.width/2),this.paddingLeft=Math.max((v-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((g-p+o)*this.width/(this.width-p),0)}else{let d=n.height/2,p=e.height/2;s==="start"?(d=0,p=e.height):s==="end"&&(d=n.height,p=0),this.paddingTop=d+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){As(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Wi(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=R3(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/B3(n,r));let c=0,d=0,p,v,g,x,E,k,A,D,j,Y,te;for(p=0;p<n;p+=l){if(x=e[p].label,E=this._resolveTickFontOptions(p),i.font=k=E.string,A=s[k]=s[k]||{data:{},gc:[]},D=E.lineHeight,j=Y=0,!Wi(x)&&!Js(x))j=oy(i,A.data,A.gc,j,x),Y=D;else if(Js(x))for(v=0,g=x.length;v<g;++v)te=x[v],!Wi(te)&&!Js(te)&&(j=oy(i,A.data,A.gc,j,te),Y+=D);o.push(j),a.push(Y),c=Math.max(j,c),d=Math.max(Y,d)}bee(s,n);const ge=o.indexOf(c),pe=a.indexOf(d),N=$=>({width:o[$]||0,height:a[$]||0});return{first:N(0),last:N(n-1),widest:N(ge),highest:N(pe),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return lJ(this._alignToPixels?Xd(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=wee(this.getContext(),e,r))}return this.$context||(this.$context=_ee(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=wc(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),p=this.ticks.length+(l?1:0),v=fg(s),g=[],x=a.setContext(this.getContext()),E=x.display?x.width:0,k=E/2,A=function(V){return Xd(r,V,E)};let D,j,Y,te,ge,pe,N,$,Z,B,I,R;if(o==="top")D=A(this.bottom),pe=this.bottom-v,$=D-k,B=A(e.top)+k,R=e.bottom;else if(o==="bottom")D=A(this.top),B=e.top,R=A(e.bottom)-k,pe=D+k,$=this.top+v;else if(o==="left")D=A(this.right),ge=this.right-v,N=D-k,Z=A(e.left)+k,I=e.right;else if(o==="right")D=A(this.left),Z=e.left,I=A(e.right)-k,ge=D+k,N=this.left+v;else if(n==="x"){if(o==="center")D=A((e.top+e.bottom)/2+.5);else if(Oi(o)){const V=Object.keys(o)[0],re=o[V];D=A(this.chart.scales[V].getPixelForValue(re))}B=e.top,R=e.bottom,pe=D+k,$=pe+v}else if(n==="y"){if(o==="center")D=A((e.left+e.right)/2);else if(Oi(o)){const V=Object.keys(o)[0],re=o[V];D=A(this.chart.scales[V].getPixelForValue(re))}ge=D-k,N=ge-v,Z=e.left,I=e.right}const z=ai(i.ticks.maxTicksLimit,p),U=Math.max(1,Math.ceil(p/z));for(j=0;j<p;j+=U){const V=this.getContext(j),re=s.setContext(V),Q=a.setContext(V),_e=re.lineWidth,we=re.color,Qe=Q.dash||[],ae=Q.dashOffset,H=re.tickWidth,K=re.tickColor,me=re.tickBorderDash||[],fe=re.tickBorderDashOffset;Y=yee(this,j,l),Y!==void 0&&(te=Xd(r,Y,_e),c?ge=N=Z=I=te:pe=$=B=R=te,g.push({tx1:ge,ty1:pe,tx2:N,ty2:$,x1:Z,y1:B,x2:I,y2:R,width:_e,color:we,borderDash:Qe,borderDashOffset:ae,tickWidth:H,tickColor:K,tickBorderDash:me,tickBorderDashOffset:fe}))}return this._ticksLength=p,this._borderValue=D,g}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:d,mirror:p}=s,v=fg(r.grid),g=v+d,x=p?-d:g,E=-wc(this.labelRotation),k=[];let A,D,j,Y,te,ge,pe,N,$,Z,B,I,R="middle";if(i==="top")ge=this.bottom-x,pe=this._getXAxisLabelAlignment();else if(i==="bottom")ge=this.top+x,pe=this._getXAxisLabelAlignment();else if(i==="left"){const U=this._getYAxisLabelAlignment(v);pe=U.textAlign,te=U.x}else if(i==="right"){const U=this._getYAxisLabelAlignment(v);pe=U.textAlign,te=U.x}else if(n==="x"){if(i==="center")ge=(e.top+e.bottom)/2+g;else if(Oi(i)){const U=Object.keys(i)[0],V=i[U];ge=this.chart.scales[U].getPixelForValue(V)+g}pe=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")te=(e.left+e.right)/2-g;else if(Oi(i)){const U=Object.keys(i)[0],V=i[U];te=this.chart.scales[U].getPixelForValue(V)}pe=this._getYAxisLabelAlignment(v).textAlign}n==="y"&&(l==="start"?R="top":l==="end"&&(R="bottom"));const z=this._getLabelSizes();for(A=0,D=a.length;A<D;++A){j=a[A],Y=j.label;const U=s.setContext(this.getContext(A));N=this.getPixelForTick(A)+s.labelOffset,$=this._resolveTickFontOptions(A),Z=$.lineHeight,B=Js(Y)?Y.length:1;const V=B/2,re=U.color,Q=U.textStrokeColor,_e=U.textStrokeWidth;let we=pe;o?(te=N,pe==="inner"&&(A===D-1?we=this.options.reverse?"left":"right":A===0?we=this.options.reverse?"right":"left":we="center"),i==="top"?c==="near"||E!==0?I=-B*Z+Z/2:c==="center"?I=-z.highest.height/2-V*Z+Z:I=-z.highest.height+Z/2:c==="near"||E!==0?I=Z/2:c==="center"?I=z.highest.height/2-V*Z:I=z.highest.height-B*Z,p&&(I*=-1),E!==0&&!U.showLabelBackdrop&&(te+=Z/2*Math.sin(E))):(ge=N,I=(1-B)*Z/2);let Qe;if(U.showLabelBackdrop){const ae=yl(U.backdropPadding),H=z.heights[A],K=z.widths[A];let me=I-ae.top,fe=0-ae.left;switch(R){case"middle":me-=H/2;break;case"bottom":me-=H;break}switch(pe){case"center":fe-=K/2;break;case"right":fe-=K;break;case"inner":A===D-1?fe-=K:A>0&&(fe-=K/2);break}Qe={left:fe,top:me,width:K+ae.width,height:H+ae.height,color:U.backdropColor}}k.push({label:Y,font:$,textOffset:I,options:{rotation:E,color:re,strokeColor:Q,strokeWidth:_e,textAlign:we,textBaseline:R,translation:[te,ge],backdrop:Qe}})}return k}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-wc(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,d;return n==="left"?i?(d=this.right+s,r==="near"?c="left":r==="center"?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-a,r==="near"?c="right":r==="center"?(c="center",d-=l/2):(c="left",d=this.left)):n==="right"?i?(d=this.left+s,r==="near"?c="right":r==="center"?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+a,r==="near"?c="left":r==="center"?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,d,p,v;this.isHorizontal()?(c=Xd(e,this.left,o)-o/2,d=Xd(e,this.right,a)+a/2,p=v=l):(p=Xd(e,this.top,o)-o/2,v=Xd(e,this.bottom,a)+a/2,c=d=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,p),n.lineTo(d,v),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Zy(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,d=o.textOffset;Lf(r,c,0,d,l,a)}i&&Ky(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=ga(r.font),o=yl(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Oi(n)?(l+=o.bottom,Js(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:d,maxWidth:p,rotation:v}=Lee(this,l,n,a);Lf(e,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:v,textAlign:xee(a,n,i),textBaseline:"middle",translation:[c,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=ai(e.grid&&e.grid.z,-1),i=ai(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Pf.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return ga(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class $0{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;Eee(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,See(e,o,r),this.override&&Ao.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Ao[i]&&(delete Ao[i][r],this.override&&delete xf[r])}}function See(t,e,n){const r=_m(Object.create(null),[n?Ao.get(n):{},Ao.get(e),t.defaults]);Ao.set(e,r),t.defaultRoutes&&Cee(e,t.defaultRoutes),t.descriptors&&Ao.describe(e,t.descriptors)}function Cee(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Ao.route(s,i,l,a)})}function Eee(t){return"id"in t&&"defaults"in t}class Pee{constructor(){this.controllers=new $0(Lc,"datasets",!0),this.elements=new $0($h,"elements"),this.plugins=new $0(Object,"plugins"),this.scales=new $0(Pf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):us(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=J_(e);As(r["before"+i],[],r),n[e](r),As(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Uc=new Pee;class Mee{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(As(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Wi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=ai(r.options&&r.options.plugins,{}),s=kee(r);return i===!1&&!n?[]:Tee(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function kee(t){const e={},n=[],r=Object.keys(Uc.plugins.items);for(let s=0;s<r.length;s++)n.push(Uc.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function Aee(t,e){return!e&&t===!1?null:t===!0?{}:t}function Tee(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=Aee(r[l],i);c!==null&&s.push({plugin:a,options:Dee(t.config,{plugin:a,local:n[l]},c,o)})}return s}function Dee(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Gb(t,e){const n=Ao.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Oee(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Nee(t,e){return t===e?"_index_":"_value_"}function j3(t){if(t==="x"||t==="y"||t==="r")return t}function Iee(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function qb(t,...e){if(j3(t))return t;for(const n of e){const r=n.axis||Iee(n.position)||t.length>1&&j3(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function z3(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Bee(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return z3(t,"x",n[0])||z3(t,"y",n[0])}return{}}function Ree(t,e){const n=xf[t.type]||{scales:{}},r=e.scales||{},i=Gb(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Oi(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=qb(o,a,Bee(o,t),Ao.scales[a.type]),c=Nee(l,i),d=n.scales||{};s[o]=Jg(Object.create(null),[{axis:l},a,d[l],d[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Gb(a,e),d=(xf[a]||{}).scales||{};Object.keys(d).forEach(p=>{const v=Oee(p,l),g=o[v+"AxisID"]||v;s[g]=s[g]||Object.create(null),Jg(s[g],[{axis:v},r[g],d[p]])})}),Object.keys(s).forEach(o=>{const a=s[o];Jg(a,[Ao.scales[a.type],Ao.scale])}),s}function rM(t){const e=t.options||(t.options={});e.plugins=ai(e.plugins,{}),e.scales=Ree(t,e)}function iM(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Fee(t){return t=t||{},t.data=iM(t.data),rM(t),t}const $3=new Map,sM=new Set;function V0(t,e){let n=$3.get(t);return n||(n=e(),$3.set(t,n),sM.add(n)),n}const pg=(t,e,n)=>{const r=Pd(e,n);r!==void 0&&t.add(r)};class jee{constructor(e){this._config=Fee(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=iM(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),rM(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return V0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return V0(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return V0(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return V0(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(d=>{e&&(l.add(e),d.forEach(p=>pg(l,e,p))),d.forEach(p=>pg(l,i,p)),d.forEach(p=>pg(l,xf[s]||{},p)),d.forEach(p=>pg(l,Ao,p)),d.forEach(p=>pg(l,Ub,p))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),sM.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,xf[n]||{},Ao.datasets[n]||{},{type:n},Ao,Ub]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=V3(this._resolverCache,e,i);let l=o;if($ee(o,n)){s.$shared=!1,r=Md(r)?r():r;const c=this.createResolver(e,r,a);l=Np(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=V3(this._resolverCache,e,r);return Oi(n)?Np(s,n,void 0,i):s}}function V3(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:iw(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const zee=t=>Oi(t)&&Object.getOwnPropertyNames(t).some(e=>Md(t[e]));function $ee(t,e){const{isScriptable:n,isIndexable:r}=RP(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(Md(a)||zee(a))||o&&Js(a))return!0}return!1}var Vee="4.4.1";const Uee=["top","bottom","left","right","chartArea"];function U3(t,e){return t==="top"||t==="bottom"||Uee.indexOf(t)===-1&&e==="x"}function H3(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function W3(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),As(n&&n.onComplete,[t],e)}function Hee(t){const e=t.chart,n=e.options.animation;As(n&&n.onProgress,[t],e)}function oM(t){return aw()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const xv={},G3=t=>{const e=oM(t);return Object.values(xv).filter(n=>n.canvas===e).pop()};function Wee(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function Gee(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function U0(t,e,n){return t.options.clip?t[n]:e[n]}function qee(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:U0(n,e,"left"),right:U0(n,e,"right"),top:U0(r,e,"top"),bottom:U0(r,e,"bottom")}:e}class Gc{static register(...e){Uc.add(...e),q3()}static unregister(...e){Uc.remove(...e),q3()}constructor(e,n){const r=this.config=new jee(n),i=oM(e),s=G3(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||cee(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,d=l&&l.width;if(this.id=KX(),this.ctx=a,this.canvas=l,this.width=d,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Mee,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=dJ(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],xv[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Lh.listen(this,"complete",W3),Lh.listen(this,"progress",Hee),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return Wi(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Uc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():p3(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return h3(this.canvas,this.ctx),this}stop(){return Lh.stop(this),this}resize(e,n){Lh.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,p3(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),As(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};us(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=qb(o,a),c=l==="r",d=l==="x";return{options:a,dposition:c?"chartArea":d?"bottom":"left",dtype:c?"radialLinear":d?"category":"linear"}}))),us(s,o=>{const a=o.options,l=a.id,c=qb(l,a),d=ai(a.type,o.dtype);(a.position===void 0||U3(a.position,c)!==U3(o.dposition))&&(a.position=o.dposition),i[l]=!0;let p=null;if(l in r&&r[l].type===d)p=r[l];else{const v=Uc.getScale(d);p=new v({id:l,type:d,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(a,e)}),us(i,(o,a)=>{o||delete r[a]}),us(r,o=>{vl.configure(this,o,o.options),vl.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(H3("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||Gb(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Uc.getController(a),{datasetElementType:c,dataElementType:d}=Ao.datasets[a];Object.assign(l,{dataElementType:Uc.getElement(d),datasetElementType:c&&Uc.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){us(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,d=this.data.datasets.length;c<d;c++){const{controller:p}=this.getDatasetMeta(c),v=!i&&s.indexOf(p)===-1;p.buildOrUpdateElements(v),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||us(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(H3("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){us(this.scales,e=>{vl.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!n3(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;Wee(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!n3(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;vl.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],us(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Md(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Lh.has(this)?this.attached&&!Lh.running(this)&&Lh.start(this):(this.draw(),W3({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=qee(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&Zy(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&Ky(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Nh(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=UQ.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Dd(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);wm(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Lh.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),h3(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete xv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};us(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){us(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},us(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!ry(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(d=>!c.some(p=>d.datasetIndex===p.datasetIndex&&d.index===p.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=nJ(e),c=Gee(e,this._lastEvent,r,l);r&&(this._lastEvent=null,As(s.onHover,[e,a,this],this),l&&As(s.onClick,[e,a,this],this));const d=!ry(a,i);return(d||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,d}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}Ke(Gc,"defaults",Ao),Ke(Gc,"instances",xv),Ke(Gc,"overrides",xf),Ke(Gc,"registry",Uc),Ke(Gc,"version",Vee),Ke(Gc,"getChart",G3);function q3(){return us(Gc.instances,t=>t._plugins.invalidate())}function Yee(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+Go,r-Go),t.closePath(),t.clip()}function Zee(t){return rw(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Kee(t,e,n,r){const i=Zee(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return Ma(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Ma(i.innerStart,0,o),innerEnd:Ma(i.innerEnd,0,o)}}function tp(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function uy(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:d}=e,p=Math.max(e.outerRadius+r+n-c,0),v=d>0?d+r+n+c:0;let g=0;const x=i-l;if(r){const U=d>0?d-r:0,V=p>0?p-r:0,re=(U+V)/2,Q=re!==0?x*re/(re+r):x;g=(x-Q)/2}const E=Math.max(.001,x*p-n/Fs)/p,k=(x-E)/2,A=l+k+g,D=i-k-g,{outerStart:j,outerEnd:Y,innerStart:te,innerEnd:ge}=Kee(e,v,p,D-A),pe=p-j,N=p-Y,$=A+j/pe,Z=D-Y/N,B=v+te,I=v+ge,R=A+te/B,z=D-ge/I;if(t.beginPath(),s){const U=($+Z)/2;if(t.arc(o,a,p,$,U),t.arc(o,a,p,U,Z),Y>0){const _e=tp(N,Z,o,a);t.arc(_e.x,_e.y,Y,Z,D+Go)}const V=tp(I,D,o,a);if(t.lineTo(V.x,V.y),ge>0){const _e=tp(I,z,o,a);t.arc(_e.x,_e.y,ge,D+Go,z+Math.PI)}const re=(D-ge/v+(A+te/v))/2;if(t.arc(o,a,v,D-ge/v,re,!0),t.arc(o,a,v,re,A+te/v,!0),te>0){const _e=tp(B,R,o,a);t.arc(_e.x,_e.y,te,R+Math.PI,A-Go)}const Q=tp(pe,A,o,a);if(t.lineTo(Q.x,Q.y),j>0){const _e=tp(pe,$,o,a);t.arc(_e.x,_e.y,j,A-Go,$)}}else{t.moveTo(o,a);const U=Math.cos($)*p+o,V=Math.sin($)*p+a;t.lineTo(U,V);const re=Math.cos(Z)*p+o,Q=Math.sin(Z)*p+a;t.lineTo(re,Q)}t.closePath()}function Xee(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){uy(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%Rs||Rs))}return uy(t,e,n,r,l,i),t.fill(),l}function Jee(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:d,borderDash:p,borderDashOffset:v}=l,g=l.borderAlign==="inner";if(!c)return;t.setLineDash(p||[]),t.lineDashOffset=v,g?(t.lineWidth=c*2,t.lineJoin=d||"round"):(t.lineWidth=c,t.lineJoin=d||"bevel");let x=e.endAngle;if(s){uy(t,e,n,r,x,i);for(let E=0;E<s;++E)t.stroke();isNaN(a)||(x=o+(a%Rs||Rs))}g&&Yee(t,e,x),s||(uy(t,e,n,r,x,i),t.stroke())}class Tg extends $h{constructor(n){super();Ke(this,"circumference");Ke(this,"endAngle");Ke(this,"fullCircles");Ke(this,"innerRadius");Ke(this,"outerRadius");Ke(this,"pixelMargin");Ke(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=PP(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:p,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),g=(this.options.spacing+this.options.borderWidth)/2,E=ai(v,c-l)>=Rs||xm(o,l,c),k=Dh(a,d+g,p+g);return E&&k}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:d}=this.options,p=(s+o)/2,v=(a+l+d+c)/2;return{x:r+Math.cos(p)*v,y:i+Math.sin(p)*v}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>Rs?Math.floor(i/Rs):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Fs,i||0)),d=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,Xee(n,this,d,o,a),Jee(n,this,d,o,a),n.restore()}}Ke(Tg,"id","arc"),Ke(Tg,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Ke(Tg,"defaultRoutes",{backgroundColor:"backgroundColor"}),Ke(Tg,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function aM(t,e,n=e){t.lineCap=ai(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ai(n.borderDash,e.borderDash)),t.lineDashOffset=ai(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ai(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ai(n.borderWidth,e.borderWidth),t.strokeStyle=ai(n.borderColor,e.borderColor)}function Qee(t,e,n){t.lineTo(n.x,n.y)}function ete(t){return t.stepped?SJ:t.tension||t.cubicInterpolationMode==="monotone"?CJ:Qee}function lM(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),d=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!d?r+c-l:c-l}}function tte(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=lM(i,n,r),d=ete(s);let{move:p=!0,reverse:v}=r||{},g,x,E;for(g=0;g<=c;++g)x=i[(a+(v?c-g:g))%o],!x.skip&&(p?(t.moveTo(x.x,x.y),p=!1):d(t,E,x,v,s.stepped),E=x);return l&&(x=i[(a+(v?c:0))%o],d(t,E,x,v,s.stepped)),!!l}function nte(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=lM(i,n,r),{move:l=!0,reverse:c}=r||{};let d=0,p=0,v,g,x,E,k,A;const D=Y=>(o+(c?a-Y:Y))%s,j=()=>{E!==k&&(t.lineTo(d,k),t.lineTo(d,E),t.lineTo(d,A))};for(l&&(g=i[D(0)],t.moveTo(g.x,g.y)),v=0;v<=a;++v){if(g=i[D(v)],g.skip)continue;const Y=g.x,te=g.y,ge=Y|0;ge===x?(te<E?E=te:te>k&&(k=te),d=(p*d+Y)/++p):(j(),t.lineTo(Y,te),x=ge,p=0,E=k=te),A=te}j()}function Yb(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?nte:tte}function rte(t){return t.stepped?rQ:t.tension||t.cubicInterpolationMode==="monotone"?iQ:rf}function ite(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),aM(t,e.options),t.stroke(i)}function ste(t,e,n,r){const{segments:i,options:s}=e,o=Yb(e);for(const a of i)aM(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const ote=typeof Path2D=="function";function ate(t,e,n,r){ote&&!e.options.segment?ite(t,e,n,r):ste(t,e,n,r)}class gd extends $h{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;ZJ(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=cQ(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=qP(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=rte(r);let c,d;for(c=0,d=o.length;c<d;++c){const{start:p,end:v}=o[c],g=s[p],x=s[v];if(g===x){a.push(g);continue}const E=Math.abs((i-g[n])/(x[n]-g[n])),k=l(g,x,E,r.stepped);k[n]=e[n],a.push(k)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Yb(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=Yb(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),ate(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ke(gd,"id","line"),Ke(gd,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ke(gd,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ke(gd,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Y3(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class Lv extends $h{constructor(n){super();Ke(this,"parsed");Ke(this,"skip");Ke(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return Y3(this,n,"x",r)}inYRange(n,r){return Y3(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!Nh(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Hb(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Ke(Lv,"id","point"),Ke(Lv,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ke(Lv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function uM(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,d,p;return t.horizontal?(p=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-p,d=r+p):(p=s/2,a=n-p,l=n+p,c=Math.min(r,i),d=Math.max(r,i)),{left:a,top:c,right:l,bottom:d}}function md(t,e,n,r){return t?0:Ma(e,n,r)}function lte(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=BP(r);return{t:md(i.top,s.top,0,n),r:md(i.right,s.right,0,e),b:md(i.bottom,s.bottom,0,n),l:md(i.left,s.left,0,e)}}function ute(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=mf(i),o=Math.min(e,n),a=t.borderSkipped,l=r||Oi(i);return{topLeft:md(!l||a.top||a.left,s.topLeft,0,o),topRight:md(!l||a.top||a.right,s.topRight,0,o),bottomLeft:md(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:md(!l||a.bottom||a.right,s.bottomRight,0,o)}}function cte(t){const e=uM(t),n=e.right-e.left,r=e.bottom-e.top,i=lte(t,n/2,r/2),s=ute(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function A2(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&uM(t,r);return a&&(i||Dh(e,a.left,a.right))&&(s||Dh(n,a.top,a.bottom))}function hte(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function dte(t,e){t.rect(e.x,e.y,e.w,e.h)}function T2(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class Sv extends $h{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=cte(this),a=hte(o.radius)?Lm:dte;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,T2(o,n,s)),e.clip(),a(e,T2(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,T2(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return A2(this,e,n,r)}inXRange(e,n){return A2(this,e,null,n)}inYRange(e,n){return A2(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Ke(Sv,"id","bar"),Ke(Sv,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Ke(Sv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var fte=Object.freeze({__proto__:null,ArcElement:Tg,BarElement:Sv,LineElement:gd,PointElement:Lv});const Zb=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Z3=Zb.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function cM(t){return Zb[t%Zb.length]}function hM(t){return Z3[t%Z3.length]}function pte(t,e){return t.borderColor=cM(e),t.backgroundColor=hM(e),++e}function gte(t,e){return t.backgroundColor=t.data.map(()=>cM(e++)),e}function mte(t,e){return t.backgroundColor=t.data.map(()=>hM(e++)),e}function vte(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof uf?e=gte(n,e):i instanceof nm?e=mte(n,e):i&&(e=pte(n,e))}}function K3(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function yte(t){return t&&(t.borderColor||t.backgroundColor)}var bte={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i;if(!n.forceOverride&&(K3(r)||yte(i)||s&&K3(s)))return;const o=vte(t);r.forEach(o)}};function _te(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let d=e,p,v,g,x,E;for(o[l++]=t[d],p=0;p<s-2;p++){let k=0,A=0,D;const j=Math.floor((p+1)*a)+1+e,Y=Math.min(Math.floor((p+2)*a)+1,n)+e,te=Y-j;for(D=j;D<Y;D++)k+=t[D].x,A+=t[D].y;k/=te,A/=te;const ge=Math.floor(p*a)+1+e,pe=Math.min(Math.floor((p+1)*a)+1,n)+e,{x:N,y:$}=t[d];for(g=x=-1,D=ge;D<pe;D++)x=.5*Math.abs((N-k)*(t[D].y-$)-(N-t[D].x)*(A-$)),x>g&&(g=x,v=t[D],E=D);o[l++]=v,d=E}return o[l++]=t[c],o}function wte(t,e,n,r){let i=0,s=0,o,a,l,c,d,p,v,g,x,E;const k=[],A=e+n-1,D=t[e].x,Y=t[A].x-D;for(o=e;o<e+n;++o){a=t[o],l=(a.x-D)/Y*r,c=a.y;const te=l|0;if(te===d)c<x?(x=c,p=o):c>E&&(E=c,v=o),i=(s*i+a.x)/++s;else{const ge=o-1;if(!Wi(p)&&!Wi(v)){const pe=Math.min(p,v),N=Math.max(p,v);pe!==g&&pe!==ge&&k.push({...t[pe],x:i}),N!==g&&N!==ge&&k.push({...t[N],x:i})}o>0&&ge!==g&&k.push(t[ge]),k.push(a),d=te,s=0,x=E=c,p=v=g=o}}return k}function dM(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function X3(t){t.data.datasets.forEach(e=>{dM(e)})}function xte(t,e){const n=e.length;let r=0,i;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=Ma(Oh(e,s.axis,o).lo,0,n-1)),c?i=Ma(Oh(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var Lte={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){X3(t);return}const r=t.width;t.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=t.getDatasetMeta(s),c=o||i.data;if(kg([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const d=t.scales[l.xAxisID];if(d.type!=="linear"&&d.type!=="time"||t.options.parsing)return;let{start:p,count:v}=xte(l,c);const g=n.threshold||4*r;if(v<=g){dM(i);return}Wi(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(E){this._data=E}}));let x;switch(n.algorithm){case"lttb":x=_te(c,p,v,r,n);break;case"min-max":x=wte(c,p,v,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=x})},destroy(t){X3(t)}};function Ste(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=cw(l,c,i);const d=Kb(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:d,start:i[l],end:i[c]});continue}const p=qP(e,d);for(const v of p){const g=Kb(n,s[v.start],s[v.end],v.loop),x=GP(a,i,g);for(const E of x)o.push({source:E,target:v,start:{[n]:J3(d,g,"start",Math.max)},end:{[n]:J3(d,g,"end",Math.min)}})}}return o}function Kb(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=Lu(i),s=Lu(s)),{property:t,start:i,end:s}}function Cte(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=cw(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function cw(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function J3(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function fM(t,e){let n=[],r=!1;return Js(t)?(r=!0,n=t):n=Cte(t,e),n.length?new gd({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function Q3(t){return t&&t.fill!==!1}function Ete(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!ko(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function Pte(t,e,n){const r=Tte(t);if(Oi(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return ko(i)&&Math.floor(i)===i?Mte(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Mte(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function kte(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Oi(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function Ate(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Oi(t)?r=t.value:r=e.getBaseValue(),r}function Tte(t){const e=t.options,n=e.fill;let r=ai(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function Dte(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=Ote(e,n);a.push(fM({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let d=c.start;d<=c.end;d++)Nte(i,o[d],a)}return new gd({points:i,options:{}})}function Ote(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function Nte(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=Ite(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function Ite(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const d=s[c],p=o[d.start][n],v=o[d.end][n];if(Dh(i,p,v)){a=i===p,l=i===v;break}}return{first:a,last:l,point:r}}class pM{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:Rs},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function Bte(t){const{chart:e,fill:n,line:r}=t;if(ko(n))return Rte(e,n);if(n==="stack")return Dte(t);if(n==="shape")return!0;const i=Fte(t);return i instanceof pM?i:fM(i,r)}function Rte(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function Fte(t){return(t.scale||{}).getPointPositionForValue?zte(t):jte(t)}function jte(t){const{scale:e={},fill:n}=t,r=kte(n,e);if(ko(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function zte(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=Ate(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new pM({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function D2(t,e,n){const r=Bte(e),{line:i,scale:s,axis:o}=e,a=i.options,l=a.fill,c=a.backgroundColor,{above:d=c,below:p=c}=l||{};r&&i.points.length&&(Zy(t,n),$te(t,{line:i,target:r,above:d,below:p,area:n,scale:s,axis:o}),Ky(t))}function $te(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==i&&(eL(t,r,o.top),tL(t,{line:n,target:r,color:i,scale:a,property:l}),t.restore(),t.save(),eL(t,r,o.bottom)),tL(t,{line:n,target:r,color:s,scale:a,property:l}),t.restore()}function eL(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,d=i[l],p=i[cw(l,c,i)];s?(t.moveTo(d.x,d.y),s=!1):(t.lineTo(d.x,n),t.lineTo(d.x,d.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(p.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function tL(t,e){const{line:n,target:r,property:i,color:s,scale:o}=e,a=Ste(n,r,i);for(const{source:l,target:c,start:d,end:p}of a){const{style:{backgroundColor:v=s}={}}=l,g=r!==!0;t.save(),t.fillStyle=v,Vte(t,o,g&&Kb(i,d,p)),t.beginPath();const x=!!n.pathSegment(t,l);let E;if(g){x?t.closePath():nL(t,r,p,i);const k=!!r.pathSegment(t,c,{move:x,reverse:!0});E=x&&k,E||nL(t,r,d,i)}t.closePath(),t.fill(E?"evenodd":"nonzero"),t.restore()}}function Vte(t,e,n){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,r,a-o,i-r),t.clip())}function nL(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var Ute={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof gd&&(l={visible:t.isDatasetVisible(o),index:o,fill:Pte(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=Ete(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&D2(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;Q3(s)&&D2(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!Q3(r)||n.drawTime!=="beforeDatasetDraw"||D2(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const rL=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},Hte=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class iL extends $h{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=As(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=ga(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=rL(r,s);let c,d;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(o,s,a,l)+10):(d=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=i+a;let p=e;s.textAlign="left",s.textBaseline="middle";let v=-1,g=-d;return this.legendItems.forEach((x,E)=>{const k=r+n/2+s.measureText(x.text).width;(E===0||c[c.length-1]+k+2*a>o)&&(p+=d,c[c.length-(E>0?0:1)]=0,g+=d,v++),l[E]={left:0,top:g,row:v,width:k,height:i},c[c.length-1]+=k+a}),p}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=o-e;let p=a,v=0,g=0,x=0,E=0;return this.legendItems.forEach((k,A)=>{const{itemWidth:D,itemHeight:j}=Wte(r,n,s,k,i);A>0&&g+j+2*a>d&&(p+=v+a,c.push({width:v,height:g}),x+=v+a,E++,v=g=0),l[A]={left:x,top:g,col:E,width:D,height:j},v=Math.max(v,D),g+=j+a}),p+=v,c.push({width:v,height:g}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=Lp(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=cl(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=cl(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=cl(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=cl(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Zy(e,this),this._draw(),Ky(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Ao.color,l=Lp(e.rtl,this.left,this.width),c=ga(o.font),{padding:d}=o,p=c.size,v=p/2;let g;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:x,boxHeight:E,itemHeight:k}=rL(o,p),A=function(ge,pe,N){if(isNaN(x)||x<=0||isNaN(E)||E<0)return;i.save();const $=ai(N.lineWidth,1);if(i.fillStyle=ai(N.fillStyle,a),i.lineCap=ai(N.lineCap,"butt"),i.lineDashOffset=ai(N.lineDashOffset,0),i.lineJoin=ai(N.lineJoin,"miter"),i.lineWidth=$,i.strokeStyle=ai(N.strokeStyle,a),i.setLineDash(ai(N.lineDash,[])),o.usePointStyle){const Z={radius:E*Math.SQRT2/2,pointStyle:N.pointStyle,rotation:N.rotation,borderWidth:$},B=l.xPlus(ge,x/2),I=pe+v;IP(i,Z,B,I,o.pointStyleWidth&&x)}else{const Z=pe+Math.max((p-E)/2,0),B=l.leftForLtr(ge,x),I=mf(N.borderRadius);i.beginPath(),Object.values(I).some(R=>R!==0)?Lm(i,{x:B,y:Z,w:x,h:E,radius:I}):i.rect(B,Z,x,E),i.fill(),$!==0&&i.stroke()}i.restore()},D=function(ge,pe,N){Lf(i,N.text,ge,pe+k/2,c,{strikethrough:N.hidden,textAlign:l.textAlign(N.textAlign)})},j=this.isHorizontal(),Y=this._computeTitleHeight();j?g={x:cl(s,this.left+d,this.right-r[0]),y:this.top+d+Y,line:0}:g={x:this.left+d,y:cl(s,this.top+Y+d,this.bottom-n[0].height),line:0},UP(this.ctx,e.textDirection);const te=k+d;this.legendItems.forEach((ge,pe)=>{i.strokeStyle=ge.fontColor,i.fillStyle=ge.fontColor;const N=i.measureText(ge.text).width,$=l.textAlign(ge.textAlign||(ge.textAlign=o.textAlign)),Z=x+v+N;let B=g.x,I=g.y;l.setWidth(this.width),j?pe>0&&B+Z+d>this.right&&(I=g.y+=te,g.line++,B=g.x=cl(s,this.left+d,this.right-r[g.line])):pe>0&&I+te>this.bottom&&(B=g.x=B+n[g.line].width+d,g.line++,I=g.y=cl(s,this.top+Y+d,this.bottom-n[g.line].height));const R=l.x(B);if(A(R,I,ge),B=fJ($,B+x+v,j?B+Z:this.right,e.rtl),D(l.x(B),I,ge),j)g.x+=Z+d;else if(typeof ge.text!="string"){const z=c.lineHeight;g.y+=gM(ge,z)+d}else g.y+=te}),HP(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=ga(n.font),i=yl(n.padding);if(!n.display)return;const s=Lp(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let d,p=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),d=this.top+c,p=cl(e.align,p,this.right-v);else{const x=this.columnSizes.reduce((E,k)=>Math.max(E,k.height),0);d=c+cl(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const g=cl(a,p,p+v);o.textAlign=s.textAlign(tw(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Lf(o,n.text,g,d,r)}_computeTitleHeight(){const e=this.options.title,n=ga(e.font),r=yl(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(Dh(e,this.left,this.right)&&Dh(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Dh(e,i.left,i.left+i.width)&&Dh(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!Yte(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=Hte(i,r);i&&!s&&As(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&As(n.onHover,[e,r,this],this)}else r&&As(n.onClick,[e,r,this],this)}}function Wte(t,e,n,r,i){const s=Gte(r,t,e,n),o=qte(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function Gte(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function qte(t,e,n){let r=t;return typeof e.text!="string"&&(r=gM(e,n)),r}function gM(t,e){const n=t.text?t.text.length:0;return e*n}function Yte(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Zte={id:"legend",_element:iL,start(t,e,n){const r=t.legend=new iL({ctx:t.ctx,options:n,chart:t});vl.configure(t,r,n),vl.addBox(t,r)},stop(t){vl.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;vl.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),d=yl(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class hw extends $h{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Js(r.text)?r.text.length:1;this._padding=yl(r.padding);const s=i*ga(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,d,p;return this.isHorizontal()?(d=cl(a,r,s),p=n+e,c=s-r):(o.position==="left"?(d=r+e,p=cl(a,i,n),l=Fs*-.5):(d=s-e,p=cl(a,n,i),l=Fs*.5),c=i-n),{titleX:d,titleY:p,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=ga(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Lf(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:tw(n.align),textBaseline:"middle",translation:[o,a]})}}function Kte(t,e){const n=new hw({ctx:t.ctx,options:e,chart:t});vl.configure(t,n,e),vl.addBox(t,n),t.titleBlock=n}var Xte={id:"title",_element:hw,start(t,e,n){Kte(t,n)},stop(t){const e=t.titleBlock;vl.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;vl.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const H0=new WeakMap;var Jte={id:"subtitle",start(t,e,n){const r=new hw({ctx:t.ctx,options:n,chart:t});vl.configure(t,r,n),vl.addBox(t,r),H0.set(t,r)},stop(t){vl.removeBox(t,H0.get(t)),H0.delete(t)},beforeUpdate(t,e,n){const r=H0.get(t);vl.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Dg={average(t){if(!t.length)return!1;let e,n,r=0,i=0,s=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();r+=a.x,i+=a.y,++s}}return{x:r/s,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),d=Vb(e,c);d<i&&(i=d,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function $c(t,e){return e&&(Js(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Sh(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Qte(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function sL(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=ga(e.bodyFont),c=ga(e.titleFont),d=ga(e.footerFont),p=s.length,v=i.length,g=r.length,x=yl(e.padding);let E=x.height,k=0,A=r.reduce((Y,te)=>Y+te.before.length+te.lines.length+te.after.length,0);if(A+=t.beforeBody.length+t.afterBody.length,p&&(E+=p*c.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),A){const Y=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;E+=g*Y+(A-g)*l.lineHeight+(A-1)*e.bodySpacing}v&&(E+=e.footerMarginTop+v*d.lineHeight+(v-1)*e.footerSpacing);let D=0;const j=function(Y){k=Math.max(k,n.measureText(Y).width+D)};return n.save(),n.font=c.string,us(t.title,j),n.font=l.string,us(t.beforeBody.concat(t.afterBody),j),D=e.displayColors?o+2+e.boxPadding:0,us(r,Y=>{us(Y.before,j),us(Y.lines,j),us(Y.after,j)}),D=0,n.font=d.string,us(t.footer,j),n.restore(),k+=x.width,{width:k,height:E}}function ene(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function tne(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function nne(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),tne(c,t,e,n)&&(c="center"),c}function oL(t,e,n){const r=n.yAlign||e.yAlign||ene(t,n);return{xAlign:n.xAlign||e.xAlign||nne(t,e,n,r),yAlign:r}}function rne(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function ine(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function aL(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:d,topRight:p,bottomLeft:v,bottomRight:g}=mf(o);let x=rne(e,a);const E=ine(e,l,c);return l==="center"?a==="left"?x+=c:a==="right"&&(x-=c):a==="left"?x-=Math.max(d,v)+i:a==="right"&&(x+=Math.max(p,g)+i),{x:Ma(x,0,r.width-e.width),y:Ma(E,0,r.height-e.height)}}function W0(t,e,n){const r=yl(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function lL(t){return $c([],Sh(t))}function sne(t,e,n){return Dd(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function uL(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const mM={beforeTitle:xh,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:xh,beforeBody:xh,beforeLabel:xh,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Wi(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:xh,afterBody:xh,beforeFooter:xh,footer:xh,afterFooter:xh};function Kl(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?mM[e].call(n,r):i}class Xb extends $h{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new YP(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=sne(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Kl(r,"beforeTitle",this,e),s=Kl(r,"title",this,e),o=Kl(r,"afterTitle",this,e);let a=[];return a=$c(a,Sh(i)),a=$c(a,Sh(s)),a=$c(a,Sh(o)),a}getBeforeBody(e,n){return lL(Kl(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return us(e,s=>{const o={before:[],lines:[],after:[]},a=uL(r,s);$c(o.before,Sh(Kl(a,"beforeLabel",this,s))),$c(o.lines,Kl(a,"label",this,s)),$c(o.after,Sh(Kl(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return lL(Kl(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Kl(r,"beforeFooter",this,e),s=Kl(r,"footer",this,e),o=Kl(r,"afterFooter",this,e);let a=[];return a=$c(a,Sh(i)),a=$c(a,Sh(s)),a=$c(a,Sh(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(Qte(this.chart,n[l]));return e.filter&&(a=a.filter((d,p,v)=>e.filter(d,p,v,r))),e.itemSort&&(a=a.sort((d,p)=>e.itemSort(d,p,r))),us(a,d=>{const p=uL(e.callbacks,d);i.push(Kl(p,"labelColor",this,d)),s.push(Kl(p,"labelPointStyle",this,d)),o.push(Kl(p,"labelTextColor",this,d))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Dg[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=sL(this,r),c=Object.assign({},a,l),d=oL(this.chart,r,c),p=aL(r,c,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:d,bottomRight:p}=mf(a),{x:v,y:g}=e,{width:x,height:E}=n;let k,A,D,j,Y,te;return s==="center"?(Y=g+E/2,i==="left"?(k=v,A=k-o,j=Y+o,te=Y-o):(k=v+x,A=k+o,j=Y-o,te=Y+o),D=k):(i==="left"?A=v+Math.max(l,d)+o:i==="right"?A=v+x-Math.max(c,p)-o:A=this.caretX,s==="top"?(j=g,Y=j-o,k=A-o,D=A+o):(j=g+E,Y=j+o,k=A+o,D=A-o),te=j),{x1:k,x2:A,x3:D,y1:j,y2:Y,y3:te}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=Lp(r.rtl,this.x,this.width);for(e.x=W0(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=ga(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,d=ga(s.bodyFont),p=W0(this,"left",s),v=i.x(p),g=l<d.lineHeight?(d.lineHeight-l)/2:0,x=n.y+g;if(s.usePointStyle){const E={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},k=i.leftForLtr(v,c)+c/2,A=x+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Hb(e,E,k,A),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Hb(e,E,k,A)}else{e.lineWidth=Oi(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const E=i.leftForLtr(v,c),k=i.leftForLtr(i.xPlus(v,1),c-2),A=mf(o.borderRadius);Object.values(A).some(D=>D!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Lm(e,{x:E,y:x,w:c,h:l,radius:A}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Lm(e,{x:k,y:x+1,w:c-2,h:l-2,radius:A}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(E,x,c,l),e.strokeRect(E,x,c,l),e.fillStyle=o.backgroundColor,e.fillRect(k,x+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:d}=r,p=ga(r.bodyFont);let v=p.lineHeight,g=0;const x=Lp(r.rtl,this.x,this.width),E=function(N){n.fillText(N,x.x(e.x+g),e.y+v/2),e.y+=v+s},k=x.textAlign(o);let A,D,j,Y,te,ge,pe;for(n.textAlign=o,n.textBaseline="middle",n.font=p.string,e.x=W0(this,k,r),n.fillStyle=r.bodyColor,us(this.beforeBody,E),g=a&&k!=="right"?o==="center"?c/2+d:c+2+d:0,Y=0,ge=i.length;Y<ge;++Y){for(A=i[Y],D=this.labelTextColors[Y],n.fillStyle=D,us(A.before,E),j=A.lines,a&&j.length&&(this._drawColorBox(n,e,Y,x,r),v=Math.max(p.lineHeight,l)),te=0,pe=j.length;te<pe;++te)E(j[te]),v=p.lineHeight;us(A.after,E)}g=0,v=p.lineHeight,us(this.afterBody,E),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=Lp(r.rtl,this.x,this.width);for(e.x=W0(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=ga(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:d}=r,{topLeft:p,topRight:v,bottomLeft:g,bottomRight:x}=mf(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+p,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-v,l),n.quadraticCurveTo(a+c,l,a+c,l+v),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+d-x),n.quadraticCurveTo(a+c,l+d,a+c-x,l+d),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+g,l+d),n.quadraticCurveTo(a,l+d,a,l+d-g),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+p),n.quadraticCurveTo(a,l,a+p,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Dg[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=sL(this,e),l=Object.assign({},o,this._size),c=oL(n,e,l),d=aL(e,l,c,n);(i._to!==d.x||s._to!==d.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=yl(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),UP(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),HP(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!ry(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!ry(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Dg[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}Ke(Xb,"positioners",Dg);var one={id:"tooltip",_element:Xb,positioners:Dg,afterInit(t,e,n){n&&(t.tooltip=new Xb({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:mM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},ane=Object.freeze({__proto__:null,Colors:bte,Decimation:Lte,Filler:Ute,Legend:Zte,SubTitle:Jte,Title:Xte,Tooltip:one});const lne=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function une(t,e,n,r){const i=t.indexOf(e);if(i===-1)return lne(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const cne=(t,e)=>t===null?null:Ma(Math.round(t),0,e);function cL(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Jb extends Pf{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Wi(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:une(r,e,ai(n,e),this._addedLabels),cne(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return cL.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Ke(Jb,"id","category"),Ke(Jb,"defaults",{ticks:{callback:cL}});function hne(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:d,maxDigits:p,includeBounds:v}=t,g=s||1,x=d-1,{min:E,max:k}=e,A=!Wi(o),D=!Wi(a),j=!Wi(c),Y=(k-E)/(p+1);let te=i3((k-E)/x/g)*g,ge,pe,N,$;if(te<1e-14&&!A&&!D)return[{value:E},{value:k}];$=Math.ceil(k/te)-Math.floor(E/te),$>x&&(te=i3($*te/x/g)*g),Wi(l)||(ge=Math.pow(10,l),te=Math.ceil(te*ge)/ge),i==="ticks"?(pe=Math.floor(E/te)*te,N=Math.ceil(k/te)*te):(pe=E,N=k),A&&D&&s&&oJ((a-o)/s,te/1e3)?($=Math.round(Math.min((a-o)/te,d)),te=(a-o)/$,pe=o,N=a):j?(pe=A?o:pe,N=D?a:N,$=c-1,te=(N-pe)/$):($=(N-pe)/te,Qg($,Math.round($),te/1e3)?$=Math.round($):$=Math.ceil($));const Z=Math.max(s3(te),s3(pe));ge=Math.pow(10,Wi(l)?Z:l),pe=Math.round(pe*ge)/ge,N=Math.round(N*ge)/ge;let B=0;for(A&&(v&&pe!==o?(n.push({value:o}),pe<o&&B++,Qg(Math.round((pe+B*te)*ge)/ge,o,hL(o,Y,t))&&B++):pe<o&&B++);B<$;++B){const I=Math.round((pe+B*te)*ge)/ge;if(D&&I>a)break;n.push({value:I})}return D&&v&&N!==a?n.length&&Qg(n[n.length-1].value,a,hL(a,Y,t))?n[n.length-1].value=a:n.push({value:a}):(!D||N===a)&&n.push({value:N}),n}function hL(t,e,{horizontal:n,minRotation:r}){const i=wc(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class cy extends Pf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Wi(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=eh(i),c=eh(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=hne(i,s);return e.bounds==="ticks"&&EP(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Fm(e,this.chart.options.locale,this.options.ticks.format)}}class Qb extends cy{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ko(e)?e:0,this.max=ko(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=wc(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ke(Qb,"id","linear"),Ke(Qb,"defaults",{ticks:{callback:Yy.formatters.numeric}});const Cm=t=>Math.floor(pd(t)),Qd=(t,e)=>Math.pow(10,Cm(t)+e);function dL(t){return t/Math.pow(10,Cm(t))===1}function fL(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function dne(t,e){const n=e-t;let r=Cm(n);for(;fL(t,e,r)>10;)r++;for(;fL(t,e,r)<10;)r--;return Math.min(r,Cm(t))}function fne(t,{min:e,max:n}){e=xu(t.min,e);const r=[],i=Cm(e);let s=dne(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,d=Math.floor((e-l)/a/10)*a*10;let p=Math.floor((c-d)/Math.pow(10,s)),v=xu(t.min,Math.round((l+d+p*Math.pow(10,s))*o)/o);for(;v<n;)r.push({value:v,major:dL(v),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(s++,p=2,o=s>=0?1:o),v=Math.round((l+d+p*Math.pow(10,s))*o)/o;const g=xu(t.max,v);return r.push({value:g,major:dL(g),significand:p}),r}class e_ extends Pf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=cy.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return ko(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ko(e)?Math.max(0,e):null,this.max=ko(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ko(this._userMin)&&(this.min=e===Qd(this.min,0)?Qd(this.min,-1):Qd(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(Qd(r,-1)),o(Qd(i,1)))),r<=0&&s(Qd(i,-1)),i<=0&&o(Qd(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=fne(n,this);return e.bounds==="ticks"&&EP(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":Fm(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=pd(e),this._valueRange=pd(this.max)-pd(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(pd(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}Ke(e_,"id","logarithmic"),Ke(e_,"defaults",{ticks:{callback:Yy.formatters.logarithmic,major:{enabled:!0}}});function t_(t){const e=t.ticks;if(e.display&&t.display){const n=yl(e.backdropPadding);return ai(e.font&&e.font.size,Ao.font.size)+n.height}return 0}function pne(t,e,n){return n=Js(n)?n:[n],{w:LJ(t,e.string,n),h:n.length*e.lineHeight}}function pL(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function gne(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Fs/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const d=t.getPointPosition(l,t.drawingArea+i[l],a),p=ga(c.font),v=pne(t.ctx,p,t._pointLabels[l]);r[l]=v;const g=Lu(t.getIndexAngle(l)+a),x=Math.round(Q_(g)),E=pL(x,d.x,v.w,0,180),k=pL(x,d.y,v.h,90,270);mne(n,e,g,E,k)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=bne(t,r,i)}function mne(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function vne(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(Q_(Lu(l.angle+Go))),d=xne(l.y,a.h,c),p=_ne(c),v=wne(l.x,a.w,p);return{visible:!0,x:l.x,y:d,textAlign:p,left:v,top:d,right:v+a.w,bottom:d+a.h}}function yne(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(Nh({x:n,y:r},e)||Nh({x:n,y:s},e)||Nh({x:i,y:r},e)||Nh({x:i,y:s},e))}function bne(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:t_(s)/2,additionalAngle:o?Fs/i:0};let c;for(let d=0;d<i;d++){l.padding=n[d],l.size=e[d];const p=vne(t,d,l);r.push(p),a==="auto"&&(p.visible=yne(p,c),p.visible&&(c=p))}return r}function _ne(t){return t===0||t===180?"center":t<180?"left":"right"}function wne(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function xne(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function Lne(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!Wi(a)){const l=mf(e.borderRadius),c=yl(e.backdropPadding);t.fillStyle=a;const d=r-c.left,p=i-c.top,v=s-r+c.width,g=o-i+c.height;Object.values(l).some(x=>x!==0)?(t.beginPath(),Lm(t,{x:d,y:p,w:v,h:g,radius:l}),t.fill()):t.fillRect(d,p,v,g)}}function Sne(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));Lne(n,o,s);const a=ga(o.font),{x:l,y:c,textAlign:d}=s;Lf(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:d,textBaseline:"middle"})}}function vM(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,Rs);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function Cne(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),vM(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function Ene(t,e,n){return Dd(t,{label:n,index:e,type:"pointLabel"})}class Og extends cy{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=yl(t_(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=ko(e)&&!isNaN(e)?e:0,this.max=ko(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/t_(this.options))}generateTickLabels(e){cy.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=As(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?gne(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=Rs/(this._pointLabels.length||1),r=this.options.startAngle||0;return Lu(e*n+wc(r))}getDistanceFromCenterForValue(e){if(Wi(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(Wi(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return Ene(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-Go+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),vM(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&Sne(this,o),i.display&&this.ticks.forEach((d,p)=>{if(p!==0){l=this.getDistanceFromCenterForValue(d.value);const v=this.getContext(p),g=i.setContext(v),x=s.setContext(v);Cne(this,g,l,o,x)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const d=r.setContext(this.getPointLabelContext(a)),{color:p,lineWidth:v}=d;!v||!p||(e.lineWidth=v,e.strokeStyle=p,e.setLineDash(d.borderDash),e.lineDashOffset=d.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),d=ga(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=d.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const p=yl(c.backdropPadding);e.fillRect(-o/2-p.left,-s-d.size/2-p.top,o+p.width,d.size+p.height)}Lf(e,a.label,0,-s,d,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Ke(Og,"id","radialLinear"),Ke(Og,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Yy.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Ke(Og,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Ke(Og,"descriptors",{angleLines:{_fallback:"grid"}});const Qy={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},tu=Object.keys(Qy);function gL(t,e){return t-e}function mL(t,e){if(Wi(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),ko(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Op(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function vL(t,e,n,r){const i=tu.length;for(let s=tu.indexOf(t);s<i-1;++s){const o=Qy[tu[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return tu[s]}return tu[i-1]}function Pne(t,e,n,r,i){for(let s=tu.length-1;s>=tu.indexOf(n);s--){const o=tu[s];if(Qy[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return tu[n?tu.indexOf(n):0]}function Mne(t){for(let e=tu.indexOf(t)+1,n=tu.length;e<n;++e)if(Qy[tu[e]].common)return tu[e]}function yL(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=ew(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function kne(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function bL(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:kne(t,r,i,n)}class Em extends Pf{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new XP._date(e.adapters.date);i.init(n),Jg(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:mL(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=ko(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=ko(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=cJ(i,s,o);return this._unit=n.unit||(r.autoSkip?vL(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):Pne(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Mne(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),bL(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Ma(n,0,o),r=Ma(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||vL(s.minUnit,n,r,this._getLabelCapacity(n)),a=ai(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Op(l)||l===!0,d={};let p=n,v,g;if(c&&(p=+e.startOf(p,"isoWeek",l)),p=+e.startOf(p,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const x=i.ticks.source==="data"&&this.getDataTimestamps();for(v=p,g=0;v<r;v=+e.add(v,a,o),g++)yL(d,v,x);return(v===r||i.bounds==="ticks"||g===1)&&yL(d,v,x),Object.keys(d).sort(gL).map(E=>+E)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return As(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,d=l&&a[l],p=c&&a[c],v=r[n],g=c&&p&&v&&v.major;return this._adapter.format(e,i||(g?p:d))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=wc(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,bL(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(mL(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return kP(e.sort(gL))}}Ke(Em,"id","time"),Ke(Em,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function G0(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Oh(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Oh(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class n_ extends Em{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=G0(n,this.min),this._tableRange=G0(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,d;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)d=i[o+1],l=i[o-1],c=i[o],Math.round((d+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(G0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return G0(this._table,r*this._tableRange+this._minPos,!0)}}Ke(n_,"id","timeseries"),Ke(n_,"defaults",Em.defaults);var Ane=Object.freeze({__proto__:null,CategoryScale:Jb,LinearScale:Qb,LogarithmicScale:e_,RadialLinearScale:Og,TimeScale:Em,TimeSeriesScale:n_});const Tne=[FQ,fte,ane,Ane];Gc.register(...Tne);const yM=6048e5,Dne=864e5,jm=6e4,zm=36e5,One=1e3,_L=Symbol.for("constructDateFrom");function To(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&_L in t?t[_L](e):t instanceof Date?new t.constructor(e):new Date(e)}function Xr(t,e){return To(e||t,t)}function e1(t,e,n){const r=Xr(t,n==null?void 0:n.in);return isNaN(e)?To((n==null?void 0:n.in)||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function dw(t,e,n){const r=Xr(t,n==null?void 0:n.in);if(isNaN(e))return To(t,NaN);if(!e)return r;const i=r.getDate(),s=To(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function fw(t,e,n){return To(t,+Xr(t)+e)}function Nne(t,e,n){return fw(t,e*zm)}let Ine={};function Mf(){return Ine}function rh(t,e){var a,l,c,d;const n=Mf(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,i=Xr(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Bp(t,e){return rh(t,{...e,weekStartsOn:1})}function bM(t,e){const n=Xr(t,e==null?void 0:e.in),r=n.getFullYear(),i=To(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=Bp(i),o=To(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Bp(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function hy(t){const e=Xr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function kf(t,...e){const n=To.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function r_(t,e){const n=Xr(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function _M(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e),s=r_(r),o=r_(i),a=+s-hy(s),l=+o-hy(o);return Math.round((a-l)/Dne)}function Bne(t,e){const n=bM(t,e),r=To(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Bp(r)}function Rne(t,e,n){const r=Xr(t,n==null?void 0:n.in);return r.setTime(r.getTime()+e*jm),r}function Fne(t,e,n){return dw(t,e*3,n)}function jne(t,e,n){return fw(t,e*1e3)}function zne(t,e,n){return e1(t,e*7,n)}function $ne(t,e,n){return dw(t,e*12,n)}function rm(t,e){const n=+Xr(t)-+Xr(e);return n<0?-1:n>0?1:n}function Vne(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function wM(t){return!(!Vne(t)&&typeof t!="number"||isNaN(+Xr(t)))}function Une(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function Hne(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e);return r.getFullYear()-i.getFullYear()}function xM(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e),s=wL(r,i),o=Math.abs(_M(r,i));r.setDate(r.getDate()-s*o);const a=+(wL(r,i)===-s),l=s*(o-a);return l===0?0:l}function wL(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function $m(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function Wne(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e),s=(+r-+i)/zm;return $m(n==null?void 0:n.roundingMethod)(s)}function pw(t,e){return+Xr(t)-+Xr(e)}function Gne(t,e,n){const r=pw(t,e)/jm;return $m(n==null?void 0:n.roundingMethod)(r)}function LM(t,e){const n=Xr(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function SM(t,e){const n=Xr(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function qne(t,e){const n=Xr(t,e==null?void 0:e.in);return+LM(n,e)==+SM(n,e)}function CM(t,e,n){const[r,i,s]=kf(n==null?void 0:n.in,t,t,e),o=rm(i,s),a=Math.abs(Une(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let l=rm(i,s)===-o;qne(r)&&a===1&&rm(r,s)===1&&(l=!1);const c=o*(a-+l);return c===0?0:c}function Yne(t,e,n){const r=CM(t,e,n)/3;return $m(n==null?void 0:n.roundingMethod)(r)}function Zne(t,e,n){const r=pw(t,e)/1e3;return $m(n==null?void 0:n.roundingMethod)(r)}function Kne(t,e,n){const r=xM(t,e,n)/7;return $m(n==null?void 0:n.roundingMethod)(r)}function Xne(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e),s=rm(r,i),o=Math.abs(Hne(r,i));r.setFullYear(1584),i.setFullYear(1584);const a=rm(r,i)===-s,l=s*(o-+a);return l===0?0:l}function Jne(t,e){const n=Xr(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3;return n.setMonth(i,1),n.setHours(0,0,0,0),n}function Qne(t,e){const n=Xr(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function ere(t,e){const n=Xr(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function EM(t,e){const n=Xr(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function tre(t,e){const n=Xr(t,e==null?void 0:e.in);return n.setMinutes(59,59,999),n}function nre(t,e){var a,l;const n=Mf(),r=n.weekStartsOn??((l=(a=n.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,i=Xr(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function rre(t,e){const n=Xr(t,e==null?void 0:e.in);return n.setSeconds(59,999),n}function ire(t,e){const n=Xr(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3+3;return n.setMonth(i,0),n.setHours(23,59,59,999),n}function sre(t,e){const n=Xr(t,e==null?void 0:e.in);return n.setMilliseconds(999),n}const ore={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},are=(t,e,n)=>{let r;const i=ore[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function O2(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const lre={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ure={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},cre={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},hre={date:O2({formats:lre,defaultWidth:"full"}),time:O2({formats:ure,defaultWidth:"full"}),dateTime:O2({formats:cre,defaultWidth:"full"})},dre={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},fre=(t,e,n,r)=>dre[t];function gg(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const pre={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},gre={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},mre={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},vre={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},yre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},bre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},_re=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},wre={ordinalNumber:_re,era:gg({values:pre,defaultWidth:"wide"}),quarter:gg({values:gre,defaultWidth:"wide",argumentCallback:t=>t-1}),month:gg({values:mre,defaultWidth:"wide"}),day:gg({values:vre,defaultWidth:"wide"}),dayPeriod:gg({values:yre,defaultWidth:"wide",formattingValues:bre,defaultFormattingWidth:"wide"})};function mg(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Lre(a,p=>p.test(o)):xre(a,p=>p.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function xre(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Lre(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Sre(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const Cre=/^(\d+)(th|st|nd|rd)?/i,Ere=/\d+/i,Pre={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Mre={any:[/^b/i,/^(a|c)/i]},kre={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Are={any:[/1/i,/2/i,/3/i,/4/i]},Tre={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Dre={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ore={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Nre={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ire={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Bre={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Rre={ordinalNumber:Sre({matchPattern:Cre,parsePattern:Ere,valueCallback:t=>parseInt(t,10)}),era:mg({matchPatterns:Pre,defaultMatchWidth:"wide",parsePatterns:Mre,defaultParseWidth:"any"}),quarter:mg({matchPatterns:kre,defaultMatchWidth:"wide",parsePatterns:Are,defaultParseWidth:"any",valueCallback:t=>t+1}),month:mg({matchPatterns:Tre,defaultMatchWidth:"wide",parsePatterns:Dre,defaultParseWidth:"any"}),day:mg({matchPatterns:Ore,defaultMatchWidth:"wide",parsePatterns:Nre,defaultParseWidth:"any"}),dayPeriod:mg({matchPatterns:Ire,defaultMatchWidth:"any",parsePatterns:Bre,defaultParseWidth:"any"})},PM={code:"en-US",formatDistance:are,formatLong:hre,formatRelative:fre,localize:wre,match:Rre,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Fre(t,e){const n=Xr(t,e==null?void 0:e.in);return _M(n,EM(n))+1}function MM(t,e){const n=Xr(t,e==null?void 0:e.in),r=+Bp(n)-+Bne(n);return Math.round(r/yM)+1}function gw(t,e){var d,p,v,g;const n=Xr(t,e==null?void 0:e.in),r=n.getFullYear(),i=Mf(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(v=i.locale)==null?void 0:v.options)==null?void 0:g.firstWeekContainsDate)??1,o=To((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=rh(o,e),l=To((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=rh(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function jre(t,e){var a,l,c,d;const n=Mf(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,i=gw(t,e),s=To((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),rh(s,e)}function kM(t,e){const n=Xr(t,e==null?void 0:e.in),r=+rh(n,e)-+jre(n,e);return Math.round(r/yM)+1}function ls(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ed={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return ls(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):ls(n+1,2)},d(t,e){return ls(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return ls(t.getHours()%12||12,e.length)},H(t,e){return ls(t.getHours(),e.length)},m(t,e){return ls(t.getMinutes(),e.length)},s(t,e){return ls(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return ls(i,e.length)}},np={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},xL={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ed.y(t,e)},Y:function(t,e,n,r){const i=gw(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return ls(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):ls(s,e.length)},R:function(t,e){const n=bM(t);return ls(n,e.length)},u:function(t,e){const n=t.getFullYear();return ls(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ls(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ls(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ed.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return ls(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=kM(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):ls(i,e.length)},I:function(t,e,n){const r=MM(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):ls(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ed.d(t,e)},D:function(t,e,n){const r=Fre(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ls(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return ls(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return ls(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return ls(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=np.noon:r===0?i=np.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=np.evening:r>=12?i=np.afternoon:r>=4?i=np.morning:i=np.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ed.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ed.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ls(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):ls(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ed.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ed.s(t,e)},S:function(t,e){return ed.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return SL(r);case"XXXX":case"XX":return sf(r);case"XXXXX":case"XXX":default:return sf(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return SL(r);case"xxxx":case"xx":return sf(r);case"xxxxx":case"xxx":default:return sf(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+LL(r,":");case"OOOO":default:return"GMT"+sf(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+LL(r,":");case"zzzz":default:return"GMT"+sf(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return ls(r,e.length)},T:function(t,e,n){return ls(+t,e.length)}};function LL(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+ls(s,2)}function SL(t,e){return t%60===0?(t>0?"-":"+")+ls(Math.abs(t)/60,2):sf(t,e)}function sf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=ls(Math.trunc(r/60),2),s=ls(r%60,2);return n+i+e+s}const CL=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},AM=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},zre=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return CL(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",CL(r,e)).replace("{{time}}",AM(i,e))},i_={p:AM,P:zre},$re=/^D+$/,Vre=/^Y+$/,Ure=["D","DD","YY","YYYY"];function TM(t){return $re.test(t)}function DM(t){return Vre.test(t)}function s_(t,e,n){const r=Hre(t,e,n);if(console.warn(r),Ure.includes(t))throw new RangeError(r)}function Hre(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Wre=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Gre=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qre=/^'([^]*?)'?$/,Yre=/''/g,Zre=/[a-zA-Z]/;function Kre(t,e,n){var d,p,v,g,x,E,k,A;const r=Mf(),i=(n==null?void 0:n.locale)??r.locale??PM,s=(n==null?void 0:n.firstWeekContainsDate)??((p=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(v=r.locale)==null?void 0:v.options)==null?void 0:g.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((E=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:E.weekStartsOn)??r.weekStartsOn??((A=(k=r.locale)==null?void 0:k.options)==null?void 0:A.weekStartsOn)??0,a=Xr(t,n==null?void 0:n.in);if(!wM(a))throw new RangeError("Invalid time value");let l=e.match(Gre).map(D=>{const j=D[0];if(j==="p"||j==="P"){const Y=i_[j];return Y(D,i.formatLong)}return D}).join("").match(Wre).map(D=>{if(D==="''")return{isToken:!1,value:"'"};const j=D[0];if(j==="'")return{isToken:!1,value:Xre(D)};if(xL[j])return{isToken:!0,value:D};if(j.match(Zre))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:D}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(D=>{if(!D.isToken)return D.value;const j=D.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&DM(j)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&TM(j))&&s_(j,e,String(t));const Y=xL[j[0]];return Y(a,j,i.localize,c)}).join("")}function Xre(t){const e=t.match(qre);return e?e[1].replace(Yre,"'"):t}function Jre(){return Object.assign({},Mf())}function Qre(t,e){const n=Xr(t,e==null?void 0:e.in).getDay();return n===0?7:n}function eie(t,e){const n=tie(e)?new e(0):To(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function tie(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const nie=10;class OM{constructor(){Ke(this,"subPriority",0)}validate(e,n){return!0}}class rie extends OM{constructor(e,n,r,i,s){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class iie extends OM{constructor(n,r){super();Ke(this,"priority",nie);Ke(this,"subPriority",-1);this.context=n||(i=>To(r,i))}set(n,r){return r.timestampIsSet?n:To(n,eie(n,this.context))}}class rs{run(e,n,r,i){const s=this.parse(e,n,r,i);return s?{setter:new rie(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,n,r){return!0}}class sie extends rs{constructor(){super(...arguments);Ke(this,"priority",140);Ke(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,r,i){return r.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const qo={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},qc={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Yo(t,e){return t&&{value:e(t.value),rest:t.rest}}function po(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function Yc(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(i*zm+s*jm+o*One),rest:e.slice(n[0].length)}}function NM(t){return po(qo.anyDigitsSigned,t)}function Do(t,e){switch(t){case 1:return po(qo.singleDigit,e);case 2:return po(qo.twoDigits,e);case 3:return po(qo.threeDigits,e);case 4:return po(qo.fourDigits,e);default:return po(new RegExp("^\\d{1,"+t+"}"),e)}}function dy(t,e){switch(t){case 1:return po(qo.singleDigitSigned,e);case 2:return po(qo.twoDigitsSigned,e);case 3:return po(qo.threeDigitsSigned,e);case 4:return po(qo.fourDigitsSigned,e);default:return po(new RegExp("^-?\\d{1,"+t+"}"),e)}}function mw(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function IM(t,e){const n=e>0,r=n?e:1-e;let i;if(r<=50)i=t||100;else{const s=r+50,o=Math.trunc(s/100)*100,a=t>=s%100;i=t+o-(a?100:0)}return n?i:1-i}function BM(t){return t%400===0||t%4===0&&t%100!==0}class oie extends rs{constructor(){super(...arguments);Ke(this,"priority",130);Ke(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return Yo(Do(4,n),s);case"yo":return Yo(i.ordinalNumber(n,{unit:"year"}),s);default:return Yo(Do(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i){const s=n.getFullYear();if(i.isTwoDigitYear){const a=IM(i.year,s);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class aie extends rs{constructor(){super(...arguments);Ke(this,"priority",130);Ke(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Yo(Do(4,n),s);case"Yo":return Yo(i.ordinalNumber(n,{unit:"year"}),s);default:return Yo(Do(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i,s){const o=gw(n,s);if(i.isTwoDigitYear){const l=IM(i.year,o);return n.setFullYear(l,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),rh(n,s)}const a=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(a,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),rh(n,s)}}class lie extends rs{constructor(){super(...arguments);Ke(this,"priority",130);Ke(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return dy(r==="R"?4:r.length,n)}set(n,r,i){const s=To(n,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),Bp(s)}}class uie extends rs{constructor(){super(...arguments);Ke(this,"priority",130);Ke(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return dy(r==="u"?4:r.length,n)}set(n,r,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class cie extends rs{constructor(){super(...arguments);Ke(this,"priority",120);Ke(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"Q":case"QQ":return Do(r.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class hie extends rs{constructor(){super(...arguments);Ke(this,"priority",120);Ke(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"q":case"qq":return Do(r.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class die extends rs{constructor(){super(...arguments);Ke(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Ke(this,"priority",110)}parse(n,r,i){const s=o=>o-1;switch(r){case"M":return Yo(po(qo.month,n),s);case"MM":return Yo(Do(2,n),s);case"Mo":return Yo(i.ordinalNumber(n,{unit:"month"}),s);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class fie extends rs{constructor(){super(...arguments);Ke(this,"priority",110);Ke(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,i){const s=o=>o-1;switch(r){case"L":return Yo(po(qo.month,n),s);case"LL":return Yo(Do(2,n),s);case"Lo":return Yo(i.ordinalNumber(n,{unit:"month"}),s);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function pie(t,e,n){const r=Xr(t,n==null?void 0:n.in),i=kM(r,n)-e;return r.setDate(r.getDate()-i*7),Xr(r,n==null?void 0:n.in)}class gie extends rs{constructor(){super(...arguments);Ke(this,"priority",100);Ke(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,i){switch(r){case"w":return po(qo.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return Do(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i,s){return rh(pie(n,i,s),s)}}function mie(t,e,n){const r=Xr(t,n==null?void 0:n.in),i=MM(r,n)-e;return r.setDate(r.getDate()-i*7),r}class vie extends rs{constructor(){super(...arguments);Ke(this,"priority",100);Ke(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,i){switch(r){case"I":return po(qo.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return Do(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i){return Bp(mie(n,i))}}const yie=[31,28,31,30,31,30,31,31,30,31,30,31],bie=[31,29,31,30,31,30,31,31,30,31,30,31];class _ie extends rs{constructor(){super(...arguments);Ke(this,"priority",90);Ke(this,"subPriority",1);Ke(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"d":return po(qo.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return Do(r.length,n)}}validate(n,r){const i=n.getFullYear(),s=BM(i),o=n.getMonth();return s?r>=1&&r<=bie[o]:r>=1&&r<=yie[o]}set(n,r,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class wie extends rs{constructor(){super(...arguments);Ke(this,"priority",90);Ke(this,"subpriority",1);Ke(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,i){switch(r){case"D":case"DD":return po(qo.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return Do(r.length,n)}}validate(n,r){const i=n.getFullYear();return BM(i)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function vw(t,e,n){var p,v,g,x;const r=Mf(),i=(n==null?void 0:n.weekStartsOn)??((v=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((x=(g=r.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,s=Xr(t,n==null?void 0:n.in),o=s.getDay(),l=(e%7+7)%7,c=7-i,d=e<0||e>6?e-(o+c)%7:(l+c)%7-(o+c)%7;return e1(s,d,n)}class xie extends rs{constructor(){super(...arguments);Ke(this,"priority",90);Ke(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=vw(n,i,s),n.setHours(0,0,0,0),n}}class Lie extends rs{constructor(){super(...arguments);Ke(this,"priority",90);Ke(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return Yo(Do(r.length,n),o);case"eo":return Yo(i.ordinalNumber(n,{unit:"day"}),o);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=vw(n,i,s),n.setHours(0,0,0,0),n}}class Sie extends rs{constructor(){super(...arguments);Ke(this,"priority",90);Ke(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return Yo(Do(r.length,n),o);case"co":return Yo(i.ordinalNumber(n,{unit:"day"}),o);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=vw(n,i,s),n.setHours(0,0,0,0),n}}function Cie(t,e,n){const r=Xr(t,n==null?void 0:n.in),i=Qre(r,n),s=e-i;return e1(r,s,n)}class Eie extends rs{constructor(){super(...arguments);Ke(this,"priority",90);Ke(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,i){const s=o=>o===0?7:o;switch(r){case"i":case"ii":return Do(r.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return Yo(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiii":return Yo(i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Yo(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Yo(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s)}}validate(n,r){return r>=1&&r<=7}set(n,r,i){return n=Cie(n,i),n.setHours(0,0,0,0),n}}class Pie extends rs{constructor(){super(...arguments);Ke(this,"priority",80);Ke(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(mw(i),0,0,0),n}}class Mie extends rs{constructor(){super(...arguments);Ke(this,"priority",80);Ke(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(mw(i),0,0,0),n}}class kie extends rs{constructor(){super(...arguments);Ke(this,"priority",80);Ke(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(mw(i),0,0,0),n}}class Aie extends rs{constructor(){super(...arguments);Ke(this,"priority",70);Ke(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,i){switch(r){case"h":return po(qo.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return Do(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,i){const s=n.getHours()>=12;return s&&i<12?n.setHours(i+12,0,0,0):!s&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class Tie extends rs{constructor(){super(...arguments);Ke(this,"priority",70);Ke(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,i){switch(r){case"H":return po(qo.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return Do(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,i){return n.setHours(i,0,0,0),n}}class Die extends rs{constructor(){super(...arguments);Ke(this,"priority",70);Ke(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,i){switch(r){case"K":return po(qo.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return Do(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class Oie extends rs{constructor(){super(...arguments);Ke(this,"priority",70);Ke(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,i){switch(r){case"k":return po(qo.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return Do(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,i){const s=i<=24?i%24:i;return n.setHours(s,0,0,0),n}}class Nie extends rs{constructor(){super(...arguments);Ke(this,"priority",60);Ke(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"m":return po(qo.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return Do(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setMinutes(i,0,0),n}}class Iie extends rs{constructor(){super(...arguments);Ke(this,"priority",50);Ke(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"s":return po(qo.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return Do(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setSeconds(i,0),n}}class Bie extends rs{constructor(){super(...arguments);Ke(this,"priority",30);Ke(this,"incompatibleTokens",["t","T"])}parse(n,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return Yo(Do(r.length,n),i)}set(n,r,i){return n.setMilliseconds(i),n}}class Rie extends rs{constructor(){super(...arguments);Ke(this,"priority",10);Ke(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return Yc(qc.basicOptionalMinutes,n);case"XX":return Yc(qc.basic,n);case"XXXX":return Yc(qc.basicOptionalSeconds,n);case"XXXXX":return Yc(qc.extendedOptionalSeconds,n);case"XXX":default:return Yc(qc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:To(n,n.getTime()-hy(n)-i)}}class Fie extends rs{constructor(){super(...arguments);Ke(this,"priority",10);Ke(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return Yc(qc.basicOptionalMinutes,n);case"xx":return Yc(qc.basic,n);case"xxxx":return Yc(qc.basicOptionalSeconds,n);case"xxxxx":return Yc(qc.extendedOptionalSeconds,n);case"xxx":default:return Yc(qc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:To(n,n.getTime()-hy(n)-i)}}class jie extends rs{constructor(){super(...arguments);Ke(this,"priority",40);Ke(this,"incompatibleTokens","*")}parse(n){return NM(n)}set(n,r,i){return[To(n,i*1e3),{timestampIsSet:!0}]}}class zie extends rs{constructor(){super(...arguments);Ke(this,"priority",20);Ke(this,"incompatibleTokens","*")}parse(n){return NM(n)}set(n,r,i){return[To(n,i),{timestampIsSet:!0}]}}const $ie={G:new sie,y:new oie,Y:new aie,R:new lie,u:new uie,Q:new cie,q:new hie,M:new die,L:new fie,w:new gie,I:new vie,d:new _ie,D:new wie,E:new xie,e:new Lie,c:new Sie,i:new Eie,a:new Pie,b:new Mie,B:new kie,h:new Aie,H:new Tie,K:new Die,k:new Oie,m:new Nie,s:new Iie,S:new Bie,X:new Rie,x:new Fie,t:new jie,T:new zie},Vie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Uie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Hie=/^'([^]*?)'?$/,Wie=/''/g,Gie=/\S/,qie=/[a-zA-Z]/;function Yie(t,e,n,r){var k,A,D,j,Y,te,ge,pe;const i=()=>To((r==null?void 0:r.in)||n,NaN),s=Jre(),o=(r==null?void 0:r.locale)??s.locale??PM,a=(r==null?void 0:r.firstWeekContainsDate)??((A=(k=r==null?void 0:r.locale)==null?void 0:k.options)==null?void 0:A.firstWeekContainsDate)??s.firstWeekContainsDate??((j=(D=s.locale)==null?void 0:D.options)==null?void 0:j.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((te=(Y=r==null?void 0:r.locale)==null?void 0:Y.options)==null?void 0:te.weekStartsOn)??s.weekStartsOn??((pe=(ge=s.locale)==null?void 0:ge.options)==null?void 0:pe.weekStartsOn)??0;if(!e)return t?i():Xr(n,r==null?void 0:r.in);const c={firstWeekContainsDate:a,weekStartsOn:l,locale:o},d=[new iie(r==null?void 0:r.in,n)],p=e.match(Uie).map(N=>{const $=N[0];if($ in i_){const Z=i_[$];return Z(N,o.formatLong)}return N}).join("").match(Vie),v=[];for(let N of p){!(r!=null&&r.useAdditionalWeekYearTokens)&&DM(N)&&s_(N,e,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&TM(N)&&s_(N,e,t);const $=N[0],Z=$ie[$];if(Z){const{incompatibleTokens:B}=Z;if(Array.isArray(B)){const R=v.find(z=>B.includes(z.token)||z.token===$);if(R)throw new RangeError(`The format string mustn't contain \`${R.fullToken}\` and \`${N}\` at the same time`)}else if(Z.incompatibleTokens==="*"&&v.length>0)throw new RangeError(`The format string mustn't contain \`${N}\` and any other token at the same time`);v.push({token:$,fullToken:N});const I=Z.run(t,N,o.match,c);if(!I)return i();d.push(I.setter),t=I.rest}else{if($.match(qie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+$+"`");if(N==="''"?N="'":$==="'"&&(N=Zie(N)),t.indexOf(N)===0)t=t.slice(N.length);else return i()}}if(t.length>0&&Gie.test(t))return i();const g=d.map(N=>N.priority).sort((N,$)=>$-N).filter((N,$,Z)=>Z.indexOf(N)===$).map(N=>d.filter($=>$.priority===N).sort(($,Z)=>Z.subPriority-$.subPriority)).map(N=>N[0]);let x=Xr(n,r==null?void 0:r.in);if(isNaN(+x))return i();const E={};for(const N of g){if(!N.validate(x,c))return i();const $=N.set(x,E,c);Array.isArray($)?(x=$[0],Object.assign(E,$[1])):x=$}return x}function Zie(t){return t.match(Hie)[1].replace(Wie,"'")}function Kie(t,e){const n=Xr(t,e==null?void 0:e.in);return n.setMinutes(0,0,0),n}function Xie(t,e){const n=Xr(t,e==null?void 0:e.in);return n.setSeconds(0,0),n}function Jie(t,e){const n=Xr(t,e==null?void 0:e.in);return n.setMilliseconds(0),n}function Qie(t,e){const n=()=>To(e==null?void 0:e.in,NaN),r=(e==null?void 0:e.additionalDigits)??2,i=rse(t);let s;if(i.date){const c=ise(i.date,r);s=sse(c.restDateString,c.year)}if(!s||isNaN(+s))return n();const o=+s;let a=0,l;if(i.time&&(a=ose(i.time),isNaN(a)))return n();if(i.timezone){if(l=ase(i.timezone),isNaN(l))return n()}else{const c=new Date(o+a),d=Xr(0,e==null?void 0:e.in);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return Xr(o+a+l,e==null?void 0:e.in)}const q0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ese=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,tse=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,nse=/^([+-])(\d{2})(?::?(\d{2}))?$/;function rse(t){const e={},n=t.split(q0.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],q0.timeZoneDelimiter.test(e.date)&&(e.date=t.split(q0.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=q0.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function ise(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function sse(t,e){if(e===null)return new Date(NaN);const n=t.match(ese);if(!n)return new Date(NaN);const r=!!n[4],i=vg(n[1]),s=vg(n[2])-1,o=vg(n[3]),a=vg(n[4]),l=vg(n[5])-1;if(r)return dse(e,a,l)?lse(e,a,l):new Date(NaN);{const c=new Date(0);return!cse(e,s,o)||!hse(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function vg(t){return t?parseInt(t):1}function ose(t){const e=t.match(tse);if(!e)return NaN;const n=N2(e[1]),r=N2(e[2]),i=N2(e[3]);return fse(n,r,i)?n*zm+r*jm+i*1e3:NaN}function N2(t){return t&&parseFloat(t.replace(",","."))||0}function ase(t){if(t==="Z")return 0;const e=t.match(nse);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return pse(r,i)?n*(r*zm+i*jm):NaN}function lse(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const use=[31,null,31,30,31,30,31,31,30,31,30,31];function RM(t){return t%400===0||t%4===0&&t%100!==0}function cse(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(use[e]||(RM(t)?29:28))}function hse(t,e){return e>=1&&e<=(RM(t)?366:365)}function dse(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function fse(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function pse(t,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const gse={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};XP._date.override({_id:"date-fns",formats:function(){return gse},parse:function(t,e){if(t===null||typeof t>"u")return null;const n=typeof t;return n==="number"||t instanceof Date?t=Xr(t):n==="string"&&(typeof e=="string"?t=Yie(t,e,new Date,this.options):t=Qie(t,this.options)),wM(t)?t.getTime():null},format:function(t,e){return Kre(t,e,this.options)},add:function(t,e,n){switch(n){case"millisecond":return fw(t,e);case"second":return jne(t,e);case"minute":return Rne(t,e);case"hour":return Nne(t,e);case"day":return e1(t,e);case"week":return zne(t,e);case"month":return dw(t,e);case"quarter":return Fne(t,e);case"year":return $ne(t,e);default:return t}},diff:function(t,e,n){switch(n){case"millisecond":return pw(t,e);case"second":return Zne(t,e);case"minute":return Gne(t,e);case"hour":return Wne(t,e);case"day":return xM(t,e);case"week":return Kne(t,e);case"month":return CM(t,e);case"quarter":return Yne(t,e);case"year":return Xne(t,e);default:return 0}},startOf:function(t,e,n){switch(e){case"second":return Jie(t);case"minute":return Xie(t);case"hour":return Kie(t);case"day":return r_(t);case"week":return rh(t);case"isoWeek":return rh(t,{weekStartsOn:+n});case"month":return Qne(t);case"quarter":return Jne(t);case"year":return EM(t);default:return t}},endOf:function(t,e){switch(e){case"second":return sre(t);case"minute":return rre(t);case"hour":return tre(t);case"day":return LM(t);case"week":return nre(t);case"month":return SM(t);case"quarter":return ire(t);case"year":return ere(t);default:return t}}});const mse={class:"container mx-auto px-4 py-8"},vse={class:"mb-8"},yse={key:0,class:"mb-6"},bse={class:"flex gap-4"},_se=["disabled"],wse={key:0,value:""},xse=["value"],Lse={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},Sse={class:"flex"},Cse={class:"ml-3"},Ese={class:"text-sm font-medium text-red-800"},Pse={class:"mb-6"},Mse={class:"flex gap-4"},kse=["disabled"],Ase={key:0,value:""},Tse={key:1,value:""},Dse=["value"],Ose=["disabled"],Nse={key:0,class:"mt-4 bg-white rounded-lg shadow-md p-4"},Ise={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},Bse={class:"font-medium"},Rse={class:"font-medium"},Fse={class:"font-medium"},jse={class:"font-medium"},zse={class:"font-medium"},$se={class:"font-medium"},Vse={class:"md:col-span-2 lg:col-span-3 flex items-center"},Use=["href"],Hse={class:"mb-6"},Wse={class:"border-b border-gray-200"},Gse={class:"-mb-px flex space-x-8","aria-label":"Tabs"},qse=["onClick"],Yse={key:2,class:"mb-8"},Zse={class:"text-sm text-gray-600 mb-4"},Kse={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Xse={class:"bg-white rounded-lg shadow-md p-6"},Jse={class:"text-4xl font-bold text-primary-600 mb-2"},Qse={class:"text-sm text-gray-600"},eoe={class:"bg-white rounded-lg shadow-md p-6"},toe={class:"text-4xl font-bold text-primary-600 mb-2"},noe={class:"mt-4"},roe={class:"w-full bg-gray-200 rounded-full h-2.5"},ioe={class:"bg-white rounded-lg shadow-md p-6"},soe={class:"text-4xl font-bold text-primary-600 mb-2"},ooe={class:"text-sm text-gray-600"},aoe={class:"bg-white rounded-lg shadow-md p-6"},loe={class:"text-4xl font-bold text-primary-600 mb-2"},uoe={class:"text-sm text-gray-600"},coe={class:"bg-white rounded-lg shadow-md p-6"},hoe={class:"text-4xl font-bold text-primary-600 mb-2"},doe={class:"text-sm text-gray-600"},foe={class:"bg-white rounded-lg shadow-md p-6"},poe={class:"text-4xl font-bold text-primary-600 mb-2"},goe={class:"text-sm text-gray-600"},moe={key:3,class:"mb-8"},voe={class:"flex justify-between items-center mb-4"},yoe={class:"flex items-center gap-4"},boe={key:0,class:"text-sm text-gray-600"},_oe=["disabled"],woe={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},xoe={key:0,class:"md:col-span-2 grid grid-cols-2 gap-4"},Loe=["value"],Soe={key:0,class:"mt-1 text-sm text-red-600"},Coe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Eoe={class:"bg-white rounded-lg shadow-md p-6"},Poe={class:"chart-container"},Moe={class:"bg-white rounded-lg shadow-md p-6"},koe={class:"chart-container"},Aoe={class:"bg-white rounded-lg shadow-md p-6"},Toe={class:"chart-container"},Doe={class:"bg-white rounded-lg shadow-md p-6"},Ooe={class:"chart-container"},Noe={class:"bg-white rounded-lg shadow-md p-6"},Ioe={class:"chart-container"},Boe={class:"bg-white rounded-lg shadow-md p-6"},Roe={class:"chart-container"},Foe=js({__name:"MeteoView",setup(t){const e=su(),n=ma(),r=St({}),i=St(new Date),s=St(""),o=St([]),a=St(""),l=St([]),c=St(null),d=St(""),p=St(""),v=Qn(()=>n.isAdmin);let g=null;const x=Qn(()=>!a.value||!o.value.length?null:o.value.find(ee=>ee.mac===a.value));function E(ee){return ee?ee.latitude&&ee.longitude&&ee.latitude!==0&&ee.longitude!==0:!1}function k(ee){return E(ee)?`${ee.latitude.toFixed(6)}, ${ee.longitude.toFixed(6)}`:""}function A(ee){if(!E(ee))return"#";const se=ee.latitude,ce=ee.longitude,ze=encodeURIComponent(ee.name||"Station météo");return`https://www.google.com/maps/search/?api=1&query=${se},${ce}&query_place_id=${ze}`}async function D(){try{d.value="";const ee={};v.value&&c.value&&(ee.entreprise=c.value),console.log("[fetchDevices] Appel API avec params:",ee);const se=await G1.getDevices(ee);console.log("[fetchDevices] Réponse API:",se.data);let ce;if(se.data&&se.data.devices)ce=se.data.devices;else if(Array.isArray(se.data))ce=se.data;else if(ce=[],typeof se.data=="object"&&se.data!==null){for(const ze in se.data)if(Array.isArray(se.data[ze])){ce=se.data[ze];break}}o.value=ce.map(ze=>{var Ce,ve;return{id:ze.id,name:ze.name||`Station ${ze.mac}`,mac:ze.mac,model:((Ce=ze.stationtype)==null?void 0:Ce.split("_")[0])||"Inconnu",firmware_version:(ve=ze.stationtype)!=null&&ve.includes("_V")?ze.stationtype.split("_V")[1]:"1.0",timezone:ze.date_zone_id||"UTC",created_at:ze.createtime?new Date(ze.createtime*1e3).toISOString():new Date().toISOString(),latitude:ze.latitude||0,longitude:ze.longitude||0}}),console.log("[fetchDevices] Appareils normalisés:",o.value),o.value.length>0?(a.value=o.value[0].mac,await j()):console.warn("[fetchDevices] Aucun appareil disponible")}catch(ee){console.error("[fetchDevices] Erreur lors de la récupération des appareils:",ee),ee.response&&ee.response.data&&ee.response.data.error?d.value=ee.response.data.error:(d.value="Erreur lors de la récupération des stations météo",e.error("Erreur lors de la récupération des stations météo")),o.value=[],a.value="",r.value={}}}async function j(){if(a.value)try{d.value="";const ee={mac:a.value};v.value&&c.value&&(ee.entreprise=c.value),console.log("[fetchWeatherData] Appel API avec params:",ee);const se=await G1.getRealTimeData(ee);console.log("[fetchWeatherData] Réponse API:",se.data),console.log("[fetchWeatherData] Structure de la réponse:",{hasData:se.data&&"data"in se.data,hasCode:se.data&&"code"in se.data,topLevelKeys:se.data?Object.keys(se.data):[]});let ce;se.data&&"data"in se.data?ce=se.data.data:se.data&&("outdoor"in se.data||"indoor"in se.data)?ce=se.data:(ce={},console.warn("[fetchWeatherData] Format de réponse non reconnu")),r.value=ce,i.value=new Date,console.log("[fetchWeatherData] Données météo extraites:",r.value)}catch(ee){console.error("[fetchWeatherData] Erreur:",ee),ee.response&&ee.response.data&&ee.response.data.error?d.value=ee.response.data.error:(d.value="Erreur lors de la récupération des données météo",e.error("Erreur lors de la récupération des données météo")),r.value={}}}function Y(ee){if(ee==null)return"0";const se=typeof ee=="string"?parseFloat(ee):ee;return isNaN(se)?"0":((se-32)*5/9).toFixed(1)}function te(ee){if(ee==null)return"0";const se=typeof ee=="string"?parseFloat(ee):ee;return isNaN(se)?"0":(se*1.60934).toFixed(1)}function ge(ee){if(ee==null)return"0";const se=typeof ee=="string"?parseFloat(ee):ee;return isNaN(se)?"0":(se*25.4).toFixed(1)}function pe(ee){if(ee==null)return"0";const se=typeof ee=="string"?parseFloat(ee):ee;return isNaN(se)?"0":(se*33.8639).toFixed(1)}function N(ee){if(!ee)return"N/A";const se=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSO","SO","OSO","O","ONO","NO","NNO"],ce=Math.round(ee/22.5)%16;return se[ce]}function $(ee){return ee?ee>0?"En hausse":"En baisse":"Stable"}async function Z(){if(v.value)try{const ee=await Dl.getUsers({role:"ENTREPRISE"});l.value=ee.data,l.value.length>0&&!c.value&&(c.value=l.value[0].id)}catch(ee){console.error("Erreur lors de la récupération des entreprises:",ee),e.error("Erreur lors de la récupération des entreprises")}}async function B(){try{o.value=[],a.value="",r.value={},d.value="",Object.values(he).forEach(ee=>{try{ee.destroy()}catch(se){console.error("Erreur lors de la destruction d'un graphique:",se)}}),he={},await D()}catch(ee){console.error("Erreur lors de la récupération des appareils avec l'entreprise:",ee),e.error("Erreur lors du changement d'entreprise")}}const I=[{id:"realtime",name:"Temps réel"},{id:"history",name:"Historique"}],R=St("realtime"),z=St("today"),U=St("5min"),V=St(""),re=St(""),Q=()=>{const ee=new Date,se=new Date(ee);se.setDate(ee.getDate()-1),V.value=se.toISOString().split("T")[0],re.value=se.toISOString().split("T")[0]},_e=[{value:"5min",label:"5 minutes",maxDays:1,maxPastDays:90},{value:"30min",label:"30 minutes",maxDays:7,maxPastDays:365},{value:"4hour",label:"4 heures",maxDays:31,maxPastDays:730},{value:"1day",label:"1 jour",maxDays:365,maxPastDays:1460}],we=Qn(()=>{const ee=X(),se=new Date(ee.start),ce=new Date(ee.end);ce.setHours(23,59,59,999);const ze=Math.abs(ce.getTime()-se.getTime()),Ce=Math.ceil(ze/(1e3*60*60*24)),Ve=Math.abs(new Date().getTime()-se.getTime()),Ye=Math.ceil(Ve/(1e3*60*60*24));return _e.filter(Ze=>Ce<=Ze.maxDays&&Ye<=Ze.maxPastDays)});ki(z,ee=>{ee==="custom"&&Q(),!we.value.some(ce=>ce.value===U.value)&&we.value.length>0&&(U.value=we.value[0].value)}),ki([V,re],()=>{z.value==="custom"&&!we.value.some(se=>se.value===U.value)&&we.value.length>0&&(U.value=we.value[0].value)});const Qe=St(null),ae=St(null),H=St(null),K=St(null),me=St(null),fe=St(null);let he={};const X=()=>{let ee=new Date,se=new Date;switch(z.value){case"today":ee.setHours(0,0,0,0);break;case"yesterday":ee.setDate(ee.getDate()-1),ee.setHours(0,0,0,0),se.setDate(se.getDate()-1),se.setHours(23,59,59,999);break;case"week":ee.setDate(ee.getDate()-7);break;case"month":ee.setDate(ee.getDate()-30);break;case"custom":ee=new Date(V.value),se=new Date(re.value);break}return{start:ee.toISOString().split("T")[0],end:se.toISOString().split("T")[0]}},J=async()=>{try{if(De.value){console.log("[updateAllCharts] Mise à jour déjà en cours, annulation");return}if(De.value=!0,we.value.length===0){e.warning("Aucun intervalle disponible pour cette période"),De.value=!1;return}we.value.some(ze=>ze.value===U.value)||(U.value=we.value[0].value),console.log("[updateAllCharts] Début de la mise à jour des graphiques");const se=X(),ce={mac:a.value,start_date:se.start,end_date:se.end,cycle_type:U.value};v.value&&c.value&&(ce.entreprise=c.value),console.log("[updateAllCharts] Récupération des données historiques:",ce);try{const Ce=(await G1.getHistoryData(ce)).data;console.log("[updateAllCharts] Données historiques reçues:",Ce);const ve=[{type:"temp",ref:Qe},{type:"humidity",ref:ae},{type:"pressure",ref:H},{type:"wind",ref:K},{type:"rain",ref:me},{type:"solar",ref:fe}];for(const Ve of ve)if(console.log(`[updateAllCharts] Mise à jour du graphique ${Ve.type}`),Ve.ref.value){const Ye=de(Ce,Ve.type);Te(Ve.type,Ve.ref.value,Ye)}s.value=new Date().toLocaleString()}catch(ze){console.error("[updateAllCharts] Erreur lors de la récupération des données:",ze),e.error("Erreur lors de la récupération des données historiques")}finally{De.value=!1}}catch(ee){console.error("[updateAllCharts] Erreur lors de la mise à jour des graphiques:",ee),e.error("Erreur lors de la mise à jour des graphiques"),De.value=!1}},De=St(!1),Te=(ee,se,ce)=>{try{if(he[ee]&&(he[ee].destroy(),delete he[ee]),console.log(`[updateChart] Données reçues pour ${ee}:`,ce),!ce.datasets||!ce.datasets.length){console.warn(`[updateChart] Pas de datasets pour ${ee}`),he[ee]=new Gc(se,{type:"line",data:{labels:[],datasets:[]},options:{plugins:{title:{display:!0,text:"Aucune donnée disponible"}}}});return}let ze="hour";U.value==="5min"||U.value==="30min"?ze="hour":(U.value==="4hour"||U.value==="1day")&&(ze="day");const Ce=X(),ve=new Date(Ce.start),Ve=new Date(Ce.end);Ve.setHours(23,59,59,999);const Ye={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{title:function(Ze){return Ze.length>0?new Date(Ze[0].parsed.x).toLocaleString():""}}}},scales:{x:{type:"time",time:{unit:ze,displayFormats:{hour:"HH:mm",day:"dd/MM",week:"dd/MM",month:"MM/yyyy"}},min:ve.getTime(),max:Ve.getTime(),title:{display:!0,text:"Date/Heure"}},y:{beginAtZero:!0,title:{display:!0,text:Je(ee)},ticks:{callback:function(Ze){const _t=typeof Ze=="string"?parseFloat(Ze):Ze;switch(ee){case"temp":return _t.toFixed(1)+"°C";case"humidity":return _t.toFixed(0)+"%";case"pressure":return _t.toFixed(0)+" hPa";case"wind":case"rain":return _t.toFixed(1)+(ee==="wind"?" km/h":" mm");case"solar":return _t.toFixed(0)+" W/m²";default:return _t}}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};he[ee]=new Gc(se,{type:"line",data:{datasets:ce.datasets||[]},options:Ye}),console.log(`[updateChart] Graphique ${ee} créé avec ${ce.datasets.length} datasets`)}catch(ze){console.error(`[updateChart] Erreur lors de la mise à jour du graphique ${ee}:`,ze)}},Je=ee=>{switch(ee){case"temp":return"Température (°C)";case"humidity":return"Humidité (%)";case"pressure":return"Pression (hPa)";case"wind":return"Vitesse (km/h)";case"rain":return"Précipitations (mm)";case"solar":return"Rayonnement (W/m²)";default:return""}},de=(ee,se)=>{var ve,Ve,Ye,Ze,_t,We,ut,Vt,tn,bn,et,at,it,zt,Kt,Nn,yn,Dn,er;if(console.log(`[formatHistoryDataForChart] Données reçues pour ${se}:`,ee),!ee)return console.warn(`[formatHistoryDataForChart] Pas de données pour ${se}`),null;let ce;if("data"in ee)ce=ee.data;else if(se in ee)ce=ee;else return console.warn(`[formatHistoryDataForChart] Structure de données non reconnue pour ${se}`),null;console.log(`[formatHistoryDataForChart] Données extraites pour ${se}:`,ce);const ze=[],Ce=(Qt,Cn,Mn,tr)=>{if(!Array.isArray(Qt)){console.warn(`[formatHistoryDataForChart] Les données pour ${Cn} ne sont pas un tableau`);return}const yr=Qt.map(xr=>{const cr=parseFloat(String(xr.value));return{x:xr.time,y:tr?tr(cr):cr}}).filter(xr=>!isNaN(xr.y));yr.length>0&&ze.push({label:Cn,data:yr,borderColor:Mn,fill:!1,tension:.4})};switch(se){case"temp":(Ve=(ve=ce.outdoor)==null?void 0:ve.temperature)!=null&&Ve.list?Ce(Object.entries(ce.outdoor.temperature.list).map(([Qt,Cn])=>({time:parseInt(Qt)*1e3,value:Cn})),"Température","#FF6384",Qt=>(Qt-32)*5/9):(Ye=ce.outdoor)!=null&&Ye.temperature&&Ce(ce.outdoor.temperature,"Température","#FF6384",Qt=>(Qt-32)*5/9);break;case"humidity":(_t=(Ze=ce.outdoor)==null?void 0:Ze.humidity)!=null&&_t.list?Ce(Object.entries(ce.outdoor.humidity.list).map(([Qt,Cn])=>({time:parseInt(Qt)*1e3,value:Cn})),"Humidité","#36A2EB"):(We=ce.outdoor)!=null&&We.humidity&&Ce(ce.outdoor.humidity,"Humidité","#36A2EB");break;case"pressure":(Vt=(ut=ce.pressure)==null?void 0:ut.absolute)!=null&&Vt.list?Ce(Object.entries(ce.pressure.absolute.list).map(([Qt,Cn])=>({time:parseInt(Qt)*1e3,value:Cn})),"Pression","#4BC0C0",Qt=>Qt*33.8639):(tn=ce.pressure)!=null&&tn.absolute&&Ce(ce.pressure.absolute,"Pression","#4BC0C0",Qt=>Qt*33.8639);break;case"wind":(et=(bn=ce.wind)==null?void 0:bn.wind_speed)!=null&&et.list?(Ce(Object.entries(ce.wind.wind_speed.list).map(([Qt,Cn])=>({time:parseInt(Qt)*1e3,value:Cn})),"Vitesse du vent","#FFCE56",Qt=>Qt*1.60934),(at=ce.wind.wind_gust)!=null&&at.list&&Ce(Object.entries(ce.wind.wind_gust.list).map(([Qt,Cn])=>({time:parseInt(Qt)*1e3,value:Cn})),"Rafales","#FF9F40",Qt=>Qt*1.60934)):(it=ce.wind)!=null&&it.wind_speed&&(Ce(ce.wind.wind_speed,"Vitesse du vent","#FFCE56",Qt=>Qt*1.60934),ce.wind.wind_gust&&Ce(ce.wind.wind_gust,"Rafales","#FF9F40",Qt=>Qt*1.60934));break;case"rain":(Kt=(zt=ce.rainfall)==null?void 0:zt.daily)!=null&&Kt.list?Ce(Object.entries(ce.rainfall.daily.list).map(([Qt,Cn])=>({time:parseInt(Qt)*1e3,value:Cn})),"Précipitations journalières","#9966FF",Qt=>Qt*25.4):(Nn=ce.rainfall)!=null&&Nn.daily&&Ce(ce.rainfall.daily,"Précipitations journalières","#9966FF",Qt=>Qt*25.4);break;case"solar":(Dn=(yn=ce.solar_and_uvi)==null?void 0:yn.solar)!=null&&Dn.list?Ce(Object.entries(ce.solar_and_uvi.solar.list).map(([Qt,Cn])=>({time:parseInt(Qt)*1e3,value:Cn})),"Rayonnement solaire","#FF9F40"):(er=ce.solar_and_uvi)!=null&&er.solar&&Ce(ce.solar_and_uvi.solar,"Rayonnement solaire","#FF9F40");break}return console.log(`[formatHistoryDataForChart] Datasets générés pour ${se}:`,ze),{datasets:ze}};return Ju(()=>{Object.values(he).forEach(ee=>ee.destroy())}),ki([z,U,V,re],()=>{R.value==="history"&&a.value&&J()}),mo(async()=>{const ee=[];v.value&&ee.push(Z()),await Promise.all(ee),await D(),g=window.setInterval(j,5*60*1e3)}),ki(c,ee=>{v.value&&ee&&B()}),ki(a,ee=>{ee&&R.value==="history"&&J()}),ki(R,ee=>{ee==="history"&&a.value&&J()}),Ju(()=>{g&&clearInterval(g)}),(ee,se)=>{var ce,ze,Ce,ve,Ve,Ye,Ze,_t,We,ut,Vt,tn,bn,et,at,it,zt,Kt,Nn,yn,Dn,er,Qt,Cn,Mn,tr,yr,xr,cr,Gr,zs,Ai,Oo,Ds,nr,Os,No,lt;return Oe(),Be("div",mse,[S("div",vse,[se[38]||(se[38]=S("h1",{class:"text-3xl font-bold mb-4"},"Météo",-1)),v.value?(Oe(),Be("div",yse,[se[6]||(se[6]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sélectionner une entreprise ",-1)),S("div",bse,[Tn(S("select",{"onUpdate:modelValue":se[0]||(se[0]=Re=>c.value=Re),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!l.value.length,onChange:B},[l.value.length?Jt("",!0):(Oe(),Be("option",wse,"Chargement des entreprises...")),(Oe(!0),Be(Sn,null,sr(l.value,Re=>(Oe(),Be("option",{key:Re.id,value:Re.id},kt(Re.company_name||`${Re.first_name} ${Re.last_name}`),9,xse))),128))],40,_se),[[ns,c.value]])])])):Jt("",!0),d.value?(Oe(),Be("div",Lse,[S("div",Sse,[se[7]||(se[7]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",Cse,[S("h3",Ese,kt(d.value),1)])])])):Jt("",!0),S("div",Pse,[se[17]||(se[17]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sélectionner une station ",-1)),S("div",Mse,[Tn(S("select",{"onUpdate:modelValue":se[1]||(se[1]=Re=>a.value=Re),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!!(!o.value.length||d.value)},[!o.value.length&&!d.value?(Oe(),Be("option",Ase,"Chargement des stations...")):Jt("",!0),d.value?(Oe(),Be("option",Tse,"Aucune station disponible")):Jt("",!0),(Oe(!0),Be(Sn,null,sr(o.value,Re=>(Oe(),Be("option",{key:Re.mac,value:Re.mac},kt(Re.name)+" ("+kt(Re.model)+" - v"+kt(Re.firmware_version)+") ",9,Dse))),128))],8,kse),[[ns,a.value]]),S("button",{onClick:j,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!!(!a.value||d.value)}," Actualiser ",8,Ose)]),x.value?(Oe(),Be("div",Nse,[se[16]||(se[16]=S("h3",{class:"text-lg font-semibold mb-2"},"Informations sur la station",-1)),S("div",Ise,[S("div",null,[se[8]||(se[8]=S("span",{class:"text-gray-500"},"Modèle:",-1)),S("p",Bse,kt(x.value.model),1)]),S("div",null,[se[9]||(se[9]=S("span",{class:"text-gray-500"},"Version:",-1)),S("p",Rse,kt(x.value.firmware_version),1)]),S("div",null,[se[10]||(se[10]=S("span",{class:"text-gray-500"},"ID:",-1)),S("p",Fse,kt(x.value.id),1)]),S("div",null,[se[11]||(se[11]=S("span",{class:"text-gray-500"},"MAC:",-1)),S("p",jse,kt(x.value.mac),1)]),S("div",null,[se[12]||(se[12]=S("span",{class:"text-gray-500"},"Fuseau horaire:",-1)),S("p",zse,kt(x.value.timezone),1)]),S("div",null,[se[13]||(se[13]=S("span",{class:"text-gray-500"},"Installation:",-1)),S("p",$se,kt(new Date(x.value.created_at).toLocaleDateString()),1)]),S("div",Vse,[se[15]||(se[15]=S("span",{class:"text-gray-500 mr-2"},"Position:",-1)),E(x.value)?(Oe(),Be("a",{key:0,href:A(x.value),target:"_blank",class:"text-primary-600 hover:text-primary-800 flex items-center",title:"Ouvrir dans Google Maps"},[se[14]||(se[14]=S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),Kr(" "+kt(k(x.value)),1)],8,Use)):Jt("",!0)])])])):Jt("",!0)]),S("div",Hse,[S("div",Wse,[S("nav",Gse,[(Oe(),Be(Sn,null,sr(I,Re=>S("button",{key:Re.id,onClick:ft=>R.value=Re.id,class:Di([R.value===Re.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},kt(Re.name),11,qse)),64))])])]),R.value==="realtime"?(Oe(),Be("div",Yse,[S("p",Zse," Dernière mise à jour : "+kt(i.value?new Date(i.value).toLocaleString():"Jamais"),1),S("div",Kse,[S("div",Xse,[se[18]||(se[18]=S("h2",{class:"text-xl font-semibold mb-4"},"Température Extérieure",-1)),S("div",Jse,kt(Y((ze=(ce=r.value.outdoor)==null?void 0:ce.temperature)==null?void 0:ze.value))+"°C ",1),S("div",Qse," Min: "+kt(Y(((ve=(Ce=r.value.outdoor)==null?void 0:Ce.temperature)==null?void 0:ve.min)||"0"))+"°C Max: "+kt(Y(((Ye=(Ve=r.value.outdoor)==null?void 0:Ve.temperature)==null?void 0:Ye.max)||"0"))+"°C ",1)]),S("div",eoe,[se[19]||(se[19]=S("h2",{class:"text-xl font-semibold mb-4"},"Humidité",-1)),S("div",toe,kt(((_t=(Ze=r.value.outdoor)==null?void 0:Ze.humidity)==null?void 0:_t.value)||"0")+"% ",1),S("div",noe,[S("div",roe,[S("div",{class:"bg-primary-600 h-2.5 rounded-full",style:ru({width:`${((ut=(We=r.value.outdoor)==null?void 0:We.humidity)==null?void 0:ut.value)||0}%`})},null,4)])])]),S("div",ioe,[se[20]||(se[20]=S("h2",{class:"text-xl font-semibold mb-4"},"Pression Atmosphérique",-1)),S("div",soe,kt(pe((tn=(Vt=r.value.pressure)==null?void 0:Vt.absolute)==null?void 0:tn.value))+" hPa ",1),S("div",ooe," Tendance: "+kt($((et=(bn=r.value.pressure)==null?void 0:bn.absolute)==null?void 0:et.trend)),1)]),S("div",aoe,[se[22]||(se[22]=S("h2",{class:"text-xl font-semibold mb-4"},"Vent",-1)),S("div",loe,kt(te(((it=(at=r.value.wind)==null?void 0:at.speed)==null?void 0:it.value)||((Kt=(zt=r.value.wind)==null?void 0:zt.wind_speed)==null?void 0:Kt.value)))+" km/h ",1),S("div",uoe,[Kr(" Direction: "+kt(N(((yn=(Nn=r.value.wind)==null?void 0:Nn.direction)==null?void 0:yn.value)||((er=(Dn=r.value.wind)==null?void 0:Dn.wind_direction)==null?void 0:er.value)))+" ",1),se[21]||(se[21]=S("br",null,null,-1)),Kr(" Rafales: "+kt(te(((Cn=(Qt=r.value.wind)==null?void 0:Qt.gust)==null?void 0:Cn.value)||((tr=(Mn=r.value.wind)==null?void 0:Mn.wind_gust)==null?void 0:tr.value)))+" km/h ",1)])]),S("div",coe,[se[24]||(se[24]=S("h2",{class:"text-xl font-semibold mb-4"},"Précipitations",-1)),S("div",hoe,kt(ge((xr=(yr=r.value.rainfall)==null?void 0:yr.daily)==null?void 0:xr.value))+" mm ",1),S("div",doe,[Kr(" Taux: "+kt(ge(((Gr=(cr=r.value.rainfall)==null?void 0:cr.rate)==null?void 0:Gr.value)||((Ai=(zs=r.value.rainfall)==null?void 0:zs.rain_rate)==null?void 0:Ai.value)))+" mm/h ",1),se[23]||(se[23]=S("br",null,null,-1)),Kr(" Mensuel: "+kt(ge((Ds=(Oo=r.value.rainfall)==null?void 0:Oo.monthly)==null?void 0:Ds.value))+" mm ",1)])]),S("div",foe,[se[25]||(se[25]=S("h2",{class:"text-xl font-semibold mb-4"},"Rayonnement",-1)),S("div",poe,kt(((Os=(nr=r.value.solar_and_uvi)==null?void 0:nr.solar)==null?void 0:Os.value)||"0")+" W/m² ",1),S("div",goe," UV: "+kt(((lt=(No=r.value.solar_and_uvi)==null?void 0:No.uvi)==null?void 0:lt.value)||"0"),1)])])])):R.value==="history"?(Oe(),Be("div",moe,[S("div",voe,[se[26]||(se[26]=S("h2",{class:"text-xl font-semibold"},"Données historiques",-1)),S("div",yoe,[s.value?(Oe(),Be("div",boe," Dernière mise à jour: "+kt(s.value),1)):Jt("",!0),S("button",{onClick:J,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!a.value}," Actualiser ",8,_oe)])]),S("div",woe,[S("div",null,[se[28]||(se[28]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Période ",-1)),Tn(S("select",{"onUpdate:modelValue":se[2]||(se[2]=Re=>z.value=Re),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},se[27]||(se[27]=[nu('<option value="today" data-v-9a089f70>Aujourd&#39;hui</option><option value="yesterday" data-v-9a089f70>Hier</option><option value="week" data-v-9a089f70>7 derniers jours</option><option value="month" data-v-9a089f70>30 derniers jours</option><option value="custom" data-v-9a089f70>Période personnalisée</option>',5)]),512),[[ns,z.value]])]),z.value==="custom"?(Oe(),Be("div",xoe,[S("div",null,[se[29]||(se[29]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de début ",-1)),Tn(S("input",{type:"date","onUpdate:modelValue":se[3]||(se[3]=Re=>V.value=Re),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[zr,V.value]])]),S("div",null,[se[30]||(se[30]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de fin ",-1)),Tn(S("input",{type:"date","onUpdate:modelValue":se[4]||(se[4]=Re=>re.value=Re),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[zr,re.value]])])])):Jt("",!0),S("div",null,[se[31]||(se[31]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Intervalle ",-1)),Tn(S("select",{"onUpdate:modelValue":se[5]||(se[5]=Re=>U.value=Re),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},[(Oe(!0),Be(Sn,null,sr(we.value,Re=>(Oe(),Be("option",{key:Re.value,value:Re.value},kt(Re.label),9,Loe))),128))],512),[[ns,U.value]]),p.value?(Oe(),Be("div",Soe,kt(p.value),1)):Jt("",!0)])]),S("div",Coe,[S("div",Eoe,[se[32]||(se[32]=S("h3",{class:"text-lg font-semibold mb-4"},"Température",-1)),S("div",Poe,[S("canvas",{ref_key:"tempChart",ref:Qe},null,512)])]),S("div",Moe,[se[33]||(se[33]=S("h3",{class:"text-lg font-semibold mb-4"},"Humidité",-1)),S("div",koe,[S("canvas",{ref_key:"humidityChart",ref:ae},null,512)])]),S("div",Aoe,[se[34]||(se[34]=S("h3",{class:"text-lg font-semibold mb-4"},"Pression",-1)),S("div",Toe,[S("canvas",{ref_key:"pressureChart",ref:H},null,512)])]),S("div",Doe,[se[35]||(se[35]=S("h3",{class:"text-lg font-semibold mb-4"},"Vent",-1)),S("div",Ooe,[S("canvas",{ref_key:"windChart",ref:K},null,512)])]),S("div",Noe,[se[36]||(se[36]=S("h3",{class:"text-lg font-semibold mb-4"},"Précipitations",-1)),S("div",Ioe,[S("canvas",{ref_key:"rainChart",ref:me},null,512)])]),S("div",Boe,[se[37]||(se[37]=S("h3",{class:"text-lg font-semibold mb-4"},"Rayonnement",-1)),S("div",Roe,[S("canvas",{ref_key:"solarChart",ref:fe},null,512)])])])])):Jt("",!0)])])}}}),joe=ih(Foe,[["__scopeId","data-v-9a089f70"]]),FM=JB({history:kB("/"),routes:[{path:"/",name:"home",component:j5,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/meteo",name:"meteo",component:joe,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/plans",name:"plans",component:tK,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/users",name:"users",component:EY,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie"]}},{path:"/profile",name:"profile",component:()=>Ah(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/login",name:"login",component:Bj,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Ah(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Ah(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:ij,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/notes",name:"notes",component:PX,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/map",name:"map",component:j5,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Ah(()=>import("./NotFoundView.js"),[])}]});FM.beforeEach(async(t,e,n)=>{var a,l;const r=ma();if(console.log("Route:",t.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(c){console.error("Error initializing auth store:",c)}const i=r.isAuthenticated,s=(a=r.user)==null?void 0:a.must_change_password,o=(l=r.user)==null?void 0:l.user_type;if(t.meta.requiresAuth&&!i){n("/login");return}if(i&&s&&t.name!=="changePassword"){n({name:"changePassword"});return}if(t.name==="changePassword"&&!s){n({name:"home"});return}if(t.meta.allowedRoles&&o&&!t.meta.allowedRoles.includes(o)){n({name:"home"});return}if(t.meta.requiresGuest&&i){n({name:"home"});return}n()});function zoe(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(p=!0)=>{await l};async function d(){if("serviceWorker"in navigator){if(a=await Ah(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/static/frontend/sw.js",{scope:"/static/frontend/",type:"classic"})).catch(p=>{o==null||o(p)}),!a)return;a.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),a.addEventListener("installed",p=>{p.isUpdate||r==null||r()}),a.register({immediate:e}).then(p=>{s?s("/static/frontend/sw.js",p):i==null||i(p)}).catch(p=>{o==null||o(p)})}}return l=d(),c}const yw=jv(B9),jM=oI();yw.use(jM);yw.use(FM);const $oe=ma(jM);window.INITIAL_STATE&&$oe.initialize(window.INITIAL_STATE);yw.mount("#app");zoe({immediate:!0,onRegistered(t){t&&console.log("SW enregistré:",t)},onRegisterError(t){console.error("Erreur d'enregistrement du SW:",t)},onOfflineReady(){console.log("L'application est prête à être utilisée hors ligne")}});export{cs as _,ou as a,S as b,Be as c,js as d,Jt as e,Yn as f,Kr as g,Tn as h,Oe as i,nu as j,mi as k,Yu as l,wS as m,Di as n,mo as o,eR as p,Nm as q,St as r,Pa as s,kt as t,ma as u,zr as v,Cu as w,j_ as x};
